var FE=Object.defineProperty;var jE=(e,n,t)=>n in e?FE(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var Ht=(e,n,t)=>jE(e,typeof n!="symbol"?n+"":n,t);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function P0(e){const n=Object.create(null);for(const t of e.split(","))n[t]=1;return t=>t in n}const Di={},qh=[],gu=()=>{},zE=()=>!1,Mp=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),N1=e=>e.startsWith("onUpdate:"),co=Object.assign,D1=(e,n)=>{const t=e.indexOf(n);t>-1&&e.splice(t,1)},$E=Object.prototype.hasOwnProperty,Wi=(e,n)=>$E.call(e,n),tr=Array.isArray,Wh=e=>fd(e)==="[object Map]",lh=e=>fd(e)==="[object Set]",N2=e=>fd(e)==="[object Date]",UE=e=>fd(e)==="[object RegExp]",Tr=e=>typeof e=="function",_o=e=>typeof e=="string",Gu=e=>typeof e=="symbol",Qi=e=>e!==null&&typeof e=="object",I1=e=>(Qi(e)||Tr(e))&&Tr(e.then)&&Tr(e.catch),nw=Object.prototype.toString,fd=e=>nw.call(e),VE=e=>fd(e).slice(8,-1),M0=e=>fd(e)==="[object Object]",O1=e=>_o(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Zh=P0(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),A0=e=>{const n=Object.create(null);return t=>n[t]||(n[t]=e(t))},GE=/-(\w)/g,ga=A0(e=>e.replace(GE,(n,t)=>t?t.toUpperCase():"")),HE=/\B([A-Z])/g,Cl=A0(e=>e.replace(HE,"-$1").toLowerCase()),Ap=A0(e=>e.charAt(0).toUpperCase()+e.slice(1)),Zd=A0(e=>e?`on${Ap(e)}`:""),tl=(e,n)=>!Object.is(e,n),Kh=(e,...n)=>{for(let t=0;t<e.length;t++)e[t](...n)},rw=(e,n,t,r=!1)=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,writable:r,value:t})},Kg=e=>{const n=parseFloat(e);return isNaN(n)?e:n},Yg=e=>{const n=_o(e)?Number(e):NaN;return isNaN(n)?e:n};let D2;const k0=()=>D2||(D2=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),qE="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",WE=P0(qE);function Hl(e){if(tr(e)){const n={};for(let t=0;t<e.length;t++){const r=e[t],i=_o(r)?JE(r):Hl(r);if(i)for(const s in i)n[s]=i[s]}return n}else if(_o(e)||Qi(e))return e}const ZE=/;(?![^(]*\))/g,KE=/:([^]+)/,YE=/\/\*[^]*?\*\//g;function JE(e){const n={};return e.replace(YE,"").split(ZE).forEach(t=>{if(t){const r=t.split(KE);r.length>1&&(n[r[0].trim()]=r[1].trim())}}),n}function Fi(e){let n="";if(_o(e))n=e;else if(tr(e))for(let t=0;t<e.length;t++){const r=Fi(e[t]);r&&(n+=r+" ")}else if(Qi(e))for(const t in e)e[t]&&(n+=t+" ");return n.trim()}function XE(e){if(!e)return null;let{class:n,style:t}=e;return n&&!_o(n)&&(e.class=Fi(n)),t&&(e.style=Hl(t)),e}const QE="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",eP=P0(QE);function iw(e){return!!e||e===""}function tP(e,n){if(e.length!==n.length)return!1;let t=!0;for(let r=0;t&&r<e.length;r++)t=xf(e[r],n[r]);return t}function xf(e,n){if(e===n)return!0;let t=N2(e),r=N2(n);if(t||r)return t&&r?e.getTime()===n.getTime():!1;if(t=Gu(e),r=Gu(n),t||r)return e===n;if(t=tr(e),r=tr(n),t||r)return t&&r?tP(e,n):!1;if(t=Qi(e),r=Qi(n),t||r){if(!t||!r)return!1;const i=Object.keys(e).length,s=Object.keys(n).length;if(i!==s)return!1;for(const o in e){const u=e.hasOwnProperty(o),f=n.hasOwnProperty(o);if(u&&!f||!u&&f||!xf(e[o],n[o]))return!1}}return String(e)===String(n)}function T0(e,n){return e.findIndex(t=>xf(t,n))}const ow=e=>!!(e&&e.__v_isRef===!0),Wt=e=>_o(e)?e:e==null?"":tr(e)||Qi(e)&&(e.toString===nw||!Tr(e.toString))?ow(e)?Wt(e.value):JSON.stringify(e,sw,2):String(e),sw=(e,n)=>ow(n)?sw(e,n.value):Wh(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((t,[r,i],s)=>(t[Om(r,s)+" =>"]=i,t),{})}:lh(n)?{[`Set(${n.size})`]:[...n.values()].map(t=>Om(t))}:Gu(n)?Om(n):Qi(n)&&!tr(n)&&!M0(n)?String(n):n,Om=(e,n="")=>{var t;return Gu(e)?`Symbol(${(t=e.description)!=null?t:n})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let el;class B1{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=el,!n&&el&&(this.index=(el.scopes||(el.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let n,t;if(this.scopes)for(n=0,t=this.scopes.length;n<t;n++)this.scopes[n].pause();for(n=0,t=this.effects.length;n<t;n++)this.effects[n].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let n,t;if(this.scopes)for(n=0,t=this.scopes.length;n<t;n++)this.scopes[n].resume();for(n=0,t=this.effects.length;n<t;n++)this.effects[n].resume()}}run(n){if(this._active){const t=el;try{return el=this,n()}finally{el=t}}}on(){el=this}off(){el=this.parent}stop(n){if(this._active){this._active=!1;let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(this.effects.length=0,t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!n){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function R1(e){return new B1(e)}function F1(){return el}function aw(e,n=!1){el&&el.cleanups.push(e)}let yo;const Bm=new WeakSet;class dp{constructor(n){this.fn=n,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,el&&el.active&&el.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Bm.has(this)&&(Bm.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||uw(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,I2(this),cw(this);const n=yo,t=Uu;yo=this,Uu=!0;try{return this.fn()}finally{fw(this),yo=n,Uu=t,this.flags&=-3}}stop(){if(this.flags&1){for(let n=this.deps;n;n=n.nextDep)$1(n);this.deps=this.depsTail=void 0,I2(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Bm.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Cv(this)&&this.run()}get dirty(){return Cv(this)}}let lw=0,Kd,Yd;function uw(e,n=!1){if(e.flags|=8,n){e.next=Yd,Yd=e;return}e.next=Kd,Kd=e}function j1(){lw++}function z1(){if(--lw>0)return;if(Yd){let n=Yd;for(Yd=void 0;n;){const t=n.next;n.next=void 0,n.flags&=-9,n=t}}let e;for(;Kd;){let n=Kd;for(Kd=void 0;n;){const t=n.next;if(n.next=void 0,n.flags&=-9,n.flags&1)try{n.trigger()}catch(r){e||(e=r)}n=t}}if(e)throw e}function cw(e){for(let n=e.deps;n;n=n.nextDep)n.version=-1,n.prevActiveLink=n.dep.activeLink,n.dep.activeLink=n}function fw(e){let n,t=e.depsTail,r=t;for(;r;){const i=r.prevDep;r.version===-1?(r===t&&(t=i),$1(r),nP(r)):n=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}e.deps=n,e.depsTail=t}function Cv(e){for(let n=e.deps;n;n=n.nextDep)if(n.dep.version!==n.version||n.dep.computed&&(hw(n.dep.computed)||n.dep.version!==n.version))return!0;return!!e._dirty}function hw(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===pp))return;e.globalVersion=pp;const n=e.dep;if(e.flags|=2,n.version>0&&!e.isSSR&&e.deps&&!Cv(e)){e.flags&=-3;return}const t=yo,r=Uu;yo=e,Uu=!0;try{cw(e);const i=e.fn(e._value);(n.version===0||tl(i,e._value))&&(e._value=i,n.version++)}catch(i){throw n.version++,i}finally{yo=t,Uu=r,fw(e),e.flags&=-3}}function $1(e,n=!1){const{dep:t,prevSub:r,nextSub:i}=e;if(r&&(r.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=r,e.nextSub=void 0),t.subs===e&&(t.subs=r,!r&&t.computed)){t.computed.flags&=-5;for(let s=t.computed.deps;s;s=s.nextDep)$1(s,!0)}!n&&!--t.sc&&t.map&&t.map.delete(t.key)}function nP(e){const{prevDep:n,nextDep:t}=e;n&&(n.nextDep=t,e.prevDep=void 0),t&&(t.prevDep=n,e.nextDep=void 0)}function rP(e,n){e.effect instanceof dp&&(e=e.effect.fn);const t=new dp(e);n&&co(t,n);try{t.run()}catch(i){throw t.stop(),i}const r=t.run.bind(t);return r.effect=t,r}function iP(e){e.effect.stop()}let Uu=!0;const dw=[];function Af(){dw.push(Uu),Uu=!1}function kf(){const e=dw.pop();Uu=e===void 0?!0:e}function I2(e){const{cleanup:n}=e;if(e.cleanup=void 0,n){const t=yo;yo=void 0;try{n()}finally{yo=t}}}let pp=0;class oP{constructor(n,t){this.sub=n,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class N0{constructor(n){this.computed=n,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(n){if(!yo||!Uu||yo===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==yo)t=this.activeLink=new oP(yo,this),yo.deps?(t.prevDep=yo.depsTail,yo.depsTail.nextDep=t,yo.depsTail=t):yo.deps=yo.depsTail=t,pw(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const r=t.nextDep;r.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=r),t.prevDep=yo.depsTail,t.nextDep=void 0,yo.depsTail.nextDep=t,yo.depsTail=t,yo.deps===t&&(yo.deps=r)}return t}trigger(n){this.version++,pp++,this.notify(n)}notify(n){j1();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{z1()}}}function pw(e){if(e.dep.sc++,e.sub.flags&4){const n=e.dep.computed;if(n&&!e.dep.subs){n.flags|=20;for(let r=n.deps;r;r=r.nextDep)pw(r)}const t=e.dep.subs;t!==e&&(e.prevSub=t,t&&(t.nextSub=e)),e.dep.subs=e}}const Jg=new WeakMap,Qf=Symbol(""),Ev=Symbol(""),gp=Symbol("");function Oa(e,n,t){if(Uu&&yo){let r=Jg.get(e);r||Jg.set(e,r=new Map);let i=r.get(t);i||(r.set(t,i=new N0),i.map=r,i.key=t),i.track()}}function Rc(e,n,t,r,i,s){const o=Jg.get(e);if(!o){pp++;return}const u=f=>{f&&f.trigger()};if(j1(),n==="clear")o.forEach(u);else{const f=tr(e),d=f&&O1(t);if(f&&t==="length"){const g=Number(r);o.forEach((y,x)=>{(x==="length"||x===gp||!Gu(x)&&x>=g)&&u(y)})}else switch((t!==void 0||o.has(void 0))&&u(o.get(t)),d&&u(o.get(gp)),n){case"add":f?d&&u(o.get("length")):(u(o.get(Qf)),Wh(e)&&u(o.get(Ev)));break;case"delete":f||(u(o.get(Qf)),Wh(e)&&u(o.get(Ev)));break;case"set":Wh(e)&&u(o.get(Qf));break}}z1()}function sP(e,n){const t=Jg.get(e);return t&&t.get(n)}function Mh(e){const n=Ni(e);return n===e?n:(Oa(n,"iterate",gp),ql(e)?n:n.map(Ba))}function D0(e){return Oa(e=Ni(e),"iterate",gp),e}const aP={__proto__:null,[Symbol.iterator](){return Rm(this,Symbol.iterator,Ba)},concat(...e){return Mh(this).concat(...e.map(n=>tr(n)?Mh(n):n))},entries(){return Rm(this,"entries",e=>(e[1]=Ba(e[1]),e))},every(e,n){return Nc(this,"every",e,n,void 0,arguments)},filter(e,n){return Nc(this,"filter",e,n,t=>t.map(Ba),arguments)},find(e,n){return Nc(this,"find",e,n,Ba,arguments)},findIndex(e,n){return Nc(this,"findIndex",e,n,void 0,arguments)},findLast(e,n){return Nc(this,"findLast",e,n,Ba,arguments)},findLastIndex(e,n){return Nc(this,"findLastIndex",e,n,void 0,arguments)},forEach(e,n){return Nc(this,"forEach",e,n,void 0,arguments)},includes(...e){return Fm(this,"includes",e)},indexOf(...e){return Fm(this,"indexOf",e)},join(e){return Mh(this).join(e)},lastIndexOf(...e){return Fm(this,"lastIndexOf",e)},map(e,n){return Nc(this,"map",e,n,void 0,arguments)},pop(){return Sd(this,"pop")},push(...e){return Sd(this,"push",e)},reduce(e,...n){return O2(this,"reduce",e,n)},reduceRight(e,...n){return O2(this,"reduceRight",e,n)},shift(){return Sd(this,"shift")},some(e,n){return Nc(this,"some",e,n,void 0,arguments)},splice(...e){return Sd(this,"splice",e)},toReversed(){return Mh(this).toReversed()},toSorted(e){return Mh(this).toSorted(e)},toSpliced(...e){return Mh(this).toSpliced(...e)},unshift(...e){return Sd(this,"unshift",e)},values(){return Rm(this,"values",Ba)}};function Rm(e,n,t){const r=D0(e),i=r[n]();return r!==e&&!ql(e)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=t(s.value)),s}),i}const lP=Array.prototype;function Nc(e,n,t,r,i,s){const o=D0(e),u=o!==e&&!ql(e),f=o[n];if(f!==lP[n]){const y=f.apply(e,s);return u?Ba(y):y}let d=t;o!==e&&(u?d=function(y,x){return t.call(this,Ba(y),x,e)}:t.length>2&&(d=function(y,x){return t.call(this,y,x,e)}));const g=f.call(o,d,r);return u&&i?i(g):g}function O2(e,n,t,r){const i=D0(e);let s=t;return i!==e&&(ql(e)?t.length>3&&(s=function(o,u,f){return t.call(this,o,u,f,e)}):s=function(o,u,f){return t.call(this,o,Ba(u),f,e)}),i[n](s,...r)}function Fm(e,n,t){const r=Ni(e);Oa(r,"iterate",gp);const i=r[n](...t);return(i===-1||i===!1)&&B0(t[0])?(t[0]=Ni(t[0]),r[n](...t)):i}function Sd(e,n,t=[]){Af(),j1();const r=Ni(e)[n].apply(e,t);return z1(),kf(),r}const uP=P0("__proto__,__v_isRef,__isVue"),gw=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Gu));function cP(e){Gu(e)||(e=String(e));const n=Ni(this);return Oa(n,"has",e),n.hasOwnProperty(e)}class mw{constructor(n=!1,t=!1){this._isReadonly=n,this._isShallow=t}get(n,t,r){if(t==="__v_skip")return n.__v_skip;const i=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return s;if(t==="__v_raw")return r===(i?s?xw:ww:s?bw:_w).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(r)?n:void 0;const o=tr(n);if(!i){let f;if(o&&(f=aP[t]))return f;if(t==="hasOwnProperty")return cP}const u=Reflect.get(n,t,Xo(n)?n:r);return(Gu(t)?gw.has(t):uP(t))||(i||Oa(n,"get",t),s)?u:Xo(u)?o&&O1(t)?u:u.value:Qi(u)?i?Bu(u):Kl(u):u}}class vw extends mw{constructor(n=!1){super(!1,n)}set(n,t,r,i){let s=n[t];if(!this._isShallow){const f=Lf(s);if(!ql(r)&&!Lf(r)&&(s=Ni(s),r=Ni(r)),!tr(n)&&Xo(s)&&!Xo(r))return f?!1:(s.value=r,!0)}const o=tr(n)&&O1(t)?Number(t)<n.length:Wi(n,t),u=Reflect.set(n,t,r,Xo(n)?n:i);return n===Ni(i)&&(o?tl(r,s)&&Rc(n,"set",t,r):Rc(n,"add",t,r)),u}deleteProperty(n,t){const r=Wi(n,t);n[t];const i=Reflect.deleteProperty(n,t);return i&&r&&Rc(n,"delete",t,void 0),i}has(n,t){const r=Reflect.has(n,t);return(!Gu(t)||!gw.has(t))&&Oa(n,"has",t),r}ownKeys(n){return Oa(n,"iterate",tr(n)?"length":Qf),Reflect.ownKeys(n)}}class yw extends mw{constructor(n=!1){super(!0,n)}set(n,t){return!0}deleteProperty(n,t){return!0}}const fP=new vw,hP=new yw,dP=new vw(!0),pP=new yw(!0),Pv=e=>e,lg=e=>Reflect.getPrototypeOf(e);function gP(e,n,t){return function(...r){const i=this.__v_raw,s=Ni(i),o=Wh(s),u=e==="entries"||e===Symbol.iterator&&o,f=e==="keys"&&o,d=i[e](...r),g=t?Pv:n?Mv:Ba;return!n&&Oa(s,"iterate",f?Ev:Qf),{next(){const{value:y,done:x}=d.next();return x?{value:y,done:x}:{value:u?[g(y[0]),g(y[1])]:g(y),done:x}},[Symbol.iterator](){return this}}}}function ug(e){return function(...n){return e==="delete"?!1:e==="clear"?void 0:this}}function mP(e,n){const t={get(i){const s=this.__v_raw,o=Ni(s),u=Ni(i);e||(tl(i,u)&&Oa(o,"get",i),Oa(o,"get",u));const{has:f}=lg(o),d=n?Pv:e?Mv:Ba;if(f.call(o,i))return d(s.get(i));if(f.call(o,u))return d(s.get(u));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!e&&Oa(Ni(i),"iterate",Qf),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=Ni(s),u=Ni(i);return e||(tl(i,u)&&Oa(o,"has",i),Oa(o,"has",u)),i===u?s.has(i):s.has(i)||s.has(u)},forEach(i,s){const o=this,u=o.__v_raw,f=Ni(u),d=n?Pv:e?Mv:Ba;return!e&&Oa(f,"iterate",Qf),u.forEach((g,y)=>i.call(s,d(g),d(y),o))}};return co(t,e?{add:ug("add"),set:ug("set"),delete:ug("delete"),clear:ug("clear")}:{add(i){!n&&!ql(i)&&!Lf(i)&&(i=Ni(i));const s=Ni(this);return lg(s).has.call(s,i)||(s.add(i),Rc(s,"add",i,i)),this},set(i,s){!n&&!ql(s)&&!Lf(s)&&(s=Ni(s));const o=Ni(this),{has:u,get:f}=lg(o);let d=u.call(o,i);d||(i=Ni(i),d=u.call(o,i));const g=f.call(o,i);return o.set(i,s),d?tl(s,g)&&Rc(o,"set",i,s):Rc(o,"add",i,s),this},delete(i){const s=Ni(this),{has:o,get:u}=lg(s);let f=o.call(s,i);f||(i=Ni(i),f=o.call(s,i)),u&&u.call(s,i);const d=s.delete(i);return f&&Rc(s,"delete",i,void 0),d},clear(){const i=Ni(this),s=i.size!==0,o=i.clear();return s&&Rc(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=gP(i,e,n)}),t}function I0(e,n){const t=mP(e,n);return(r,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(Wi(t,i)&&i in r?t:r,i,s)}const vP={get:I0(!1,!1)},yP={get:I0(!1,!0)},_P={get:I0(!0,!1)},bP={get:I0(!0,!0)},_w=new WeakMap,bw=new WeakMap,ww=new WeakMap,xw=new WeakMap;function wP(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function xP(e){return e.__v_skip||!Object.isExtensible(e)?0:wP(VE(e))}function Kl(e){return Lf(e)?e:O0(e,!1,fP,vP,_w)}function U1(e){return O0(e,!1,dP,yP,bw)}function Bu(e){return O0(e,!0,hP,_P,ww)}function LP(e){return O0(e,!0,pP,bP,xw)}function O0(e,n,t,r,i){if(!Qi(e)||e.__v_raw&&!(n&&e.__v_isReactive))return e;const s=i.get(e);if(s)return s;const o=xP(e);if(o===0)return e;const u=new Proxy(e,o===2?r:t);return i.set(e,u),u}function dc(e){return Lf(e)?dc(e.__v_raw):!!(e&&e.__v_isReactive)}function Lf(e){return!!(e&&e.__v_isReadonly)}function ql(e){return!!(e&&e.__v_isShallow)}function B0(e){return e?!!e.__v_raw:!1}function Ni(e){const n=e&&e.__v_raw;return n?Ni(n):e}function R0(e){return!Wi(e,"__v_skip")&&Object.isExtensible(e)&&rw(e,"__v_skip",!0),e}const Ba=e=>Qi(e)?Kl(e):e,Mv=e=>Qi(e)?Bu(e):e;function Xo(e){return e?e.__v_isRef===!0:!1}function jt(e){return Lw(e,!1)}function V1(e){return Lw(e,!0)}function Lw(e,n){return Xo(e)?e:new SP(e,n)}class SP{constructor(n,t){this.dep=new N0,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?n:Ni(n),this._value=t?n:Ba(n),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(n){const t=this._rawValue,r=this.__v_isShallow||ql(n)||Lf(n);n=r?n:Ni(n),tl(n,t)&&(this._rawValue=n,this._value=r?n:Ba(n),this.dep.trigger())}}function CP(e){e.dep&&e.dep.trigger()}function Wn(e){return Xo(e)?e.value:e}function EP(e){return Tr(e)?e():Wn(e)}const PP={get:(e,n,t)=>n==="__v_raw"?e:Wn(Reflect.get(e,n,t)),set:(e,n,t,r)=>{const i=e[n];return Xo(i)&&!Xo(t)?(i.value=t,!0):Reflect.set(e,n,t,r)}};function G1(e){return dc(e)?e:new Proxy(e,PP)}class MP{constructor(n){this.__v_isRef=!0,this._value=void 0;const t=this.dep=new N0,{get:r,set:i}=n(t.track.bind(t),t.trigger.bind(t));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(n){this._set(n)}}function Sw(e){return new MP(e)}function Cw(e){const n=tr(e)?new Array(e.length):{};for(const t in e)n[t]=Ew(e,t);return n}class AP{constructor(n,t,r){this._object=n,this._key=t,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const n=this._object[this._key];return this._value=n===void 0?this._defaultValue:n}set value(n){this._object[this._key]=n}get dep(){return sP(Ni(this._object),this._key)}}class kP{constructor(n){this._getter=n,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function TP(e,n,t){return Xo(e)?e:Tr(e)?new kP(e):Qi(e)&&arguments.length>1?Ew(e,n,t):jt(e)}function Ew(e,n,t){const r=e[n];return Xo(r)?r:new AP(e,n,t)}class NP{constructor(n,t,r){this.fn=n,this.setter=t,this._value=void 0,this.dep=new N0(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=pp-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&yo!==this)return uw(this,!0),!0}get value(){const n=this.dep.track();return hw(this),n&&(n.version=this.dep.version),this._value}set value(n){this.setter&&this.setter(n)}}function DP(e,n,t=!1){let r,i;return Tr(e)?r=e:(r=e.get,i=e.set),new NP(r,i,t)}const IP={GET:"get",HAS:"has",ITERATE:"iterate"},OP={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},cg={},Xg=new WeakMap;let lf;function BP(){return lf}function Pw(e,n=!1,t=lf){if(t){let r=Xg.get(t);r||Xg.set(t,r=[]),r.push(e)}}function RP(e,n,t=Di){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:u,call:f}=t,d=Q=>i?Q:ql(Q)||i===!1||i===0?Fc(Q,1):Fc(Q);let g,y,x,_,M=!1,k=!1;if(Xo(e)?(y=()=>e.value,M=ql(e)):dc(e)?(y=()=>d(e),M=!0):tr(e)?(k=!0,M=e.some(Q=>dc(Q)||ql(Q)),y=()=>e.map(Q=>{if(Xo(Q))return Q.value;if(dc(Q))return d(Q);if(Tr(Q))return f?f(Q,2):Q()})):Tr(e)?n?y=f?()=>f(e,2):e:y=()=>{if(x){Af();try{x()}finally{kf()}}const Q=lf;lf=g;try{return f?f(e,3,[_]):e(_)}finally{lf=Q}}:y=gu,n&&i){const Q=y,he=i===!0?1/0:i;y=()=>Fc(Q(),he)}const N=F1(),T=()=>{g.stop(),N&&N.active&&D1(N.effects,g)};if(s&&n){const Q=n;n=(...he)=>{Q(...he),T()}}let F=k?new Array(e.length).fill(cg):cg;const K=Q=>{if(!(!(g.flags&1)||!g.dirty&&!Q))if(n){const he=g.run();if(i||M||(k?he.some((fe,me)=>tl(fe,F[me])):tl(he,F))){x&&x();const fe=lf;lf=g;try{const me=[he,F===cg?void 0:k&&F[0]===cg?[]:F,_];f?f(n,3,me):n(...me),F=he}finally{lf=fe}}}else g.run()};return u&&u(K),g=new dp(y),g.scheduler=o?()=>o(K,!1):K,_=Q=>Pw(Q,!1,g),x=g.onStop=()=>{const Q=Xg.get(g);if(Q){if(f)f(Q,4);else for(const he of Q)he();Xg.delete(g)}},n?r?K(!0):F=g.run():o?o(K.bind(null,!0),!0):g.run(),T.pause=g.pause.bind(g),T.resume=g.resume.bind(g),T.stop=T,T}function Fc(e,n=1/0,t){if(n<=0||!Qi(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),n--,Xo(e))Fc(e.value,n,t);else if(tr(e))for(let r=0;r<e.length;r++)Fc(e[r],n,t);else if(lh(e)||Wh(e))e.forEach(r=>{Fc(r,n,t)});else if(M0(e)){for(const r in e)Fc(e[r],n,t);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Fc(e[r],n,t)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Mw=[];function FP(e){Mw.push(e)}function jP(){Mw.pop()}function zP(e,n){}const $P={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},UP={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function hd(e,n,t,r){try{return r?e(...r):e()}catch(i){uh(i,n,t)}}function vu(e,n,t,r){if(Tr(e)){const i=hd(e,n,t,r);return i&&I1(i)&&i.catch(s=>{uh(s,n,t)}),i}if(tr(e)){const i=[];for(let s=0;s<e.length;s++)i.push(vu(e[s],n,t,r));return i}}function uh(e,n,t,r=!0){const i=n?n.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=n&&n.appContext.config||Di;if(n){let u=n.parent;const f=n.proxy,d=`https://vuejs.org/error-reference/#runtime-${t}`;for(;u;){const g=u.ec;if(g){for(let y=0;y<g.length;y++)if(g[y](e,f,d)===!1)return}u=u.parent}if(s){Af(),hd(s,null,10,[e,f,d]),kf();return}}VP(e,t,i,r,o)}function VP(e,n,t,r=!0,i=!1){if(i)throw e;console.error(e)}const nl=[];let lc=-1;const Yh=[];let uf=null,Bh=0;const Aw=Promise.resolve();let Qg=null;function zs(e){const n=Qg||Aw;return e?n.then(this?e.bind(this):e):n}function GP(e){let n=lc+1,t=nl.length;for(;n<t;){const r=n+t>>>1,i=nl[r],s=vp(i);s<e||s===e&&i.flags&2?n=r+1:t=r}return n}function H1(e){if(!(e.flags&1)){const n=vp(e),t=nl[nl.length-1];!t||!(e.flags&2)&&n>=vp(t)?nl.push(e):nl.splice(GP(n),0,e),e.flags|=1,kw()}}function kw(){Qg||(Qg=Aw.then(Tw))}function mp(e){tr(e)?Yh.push(...e):uf&&e.id===-1?uf.splice(Bh+1,0,e):e.flags&1||(Yh.push(e),e.flags|=1),kw()}function B2(e,n,t=lc+1){for(;t<nl.length;t++){const r=nl[t];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;nl.splice(t,1),t--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function e0(e){if(Yh.length){const n=[...new Set(Yh)].sort((t,r)=>vp(t)-vp(r));if(Yh.length=0,uf){uf.push(...n);return}for(uf=n,Bh=0;Bh<uf.length;Bh++){const t=uf[Bh];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}uf=null,Bh=0}}const vp=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Tw(e){try{for(lc=0;lc<nl.length;lc++){const n=nl[lc];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),hd(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;lc<nl.length;lc++){const n=nl[lc];n&&(n.flags&=-2)}lc=-1,nl.length=0,e0(),Qg=null,(nl.length||Yh.length)&&Tw()}}let Rh,fg=[];function Nw(e,n){var t,r;Rh=e,Rh?(Rh.enabled=!0,fg.forEach(({event:i,args:s})=>Rh.emit(i,...s)),fg=[]):typeof window<"u"&&window.HTMLElement&&!((r=(t=window.navigator)==null?void 0:t.userAgent)!=null&&r.includes("jsdom"))?((n.__VUE_DEVTOOLS_HOOK_REPLAY__=n.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{Nw(s,n)}),setTimeout(()=>{Rh||(n.__VUE_DEVTOOLS_HOOK_REPLAY__=null,fg=[])},3e3)):fg=[]}let Us=null,F0=null;function yp(e){const n=Us;return Us=e,F0=e&&e.type.__scopeId||null,n}function HP(e){F0=e}function qP(){F0=null}const WP=e=>pu;function pu(e,n=Us,t){if(!n||e._n)return e;const r=(...i)=>{r._d&&Rv(-1);const s=yp(n);let o;try{o=e(...i)}finally{yp(s),r._d&&Rv(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Fn(e,n){if(Us===null)return e;const t=Np(Us),r=e.dirs||(e.dirs=[]);for(let i=0;i<n.length;i++){let[s,o,u,f=Di]=n[i];s&&(Tr(s)&&(s={mounted:s,updated:s}),s.deep&&Fc(o),r.push({dir:s,instance:t,value:o,oldValue:void 0,arg:u,modifiers:f}))}return e}function uc(e,n,t,r){const i=e.dirs,s=n&&n.dirs;for(let o=0;o<i.length;o++){const u=i[o];s&&(u.oldValue=s[o].value);let f=u.dir[r];f&&(Af(),vu(f,t,8,[e.el,u,e,n]),kf())}}const Dw=Symbol("_vte"),Iw=e=>e.__isTeleport,Jd=e=>e&&(e.disabled||e.disabled===""),R2=e=>e&&(e.defer||e.defer===""),F2=e=>typeof SVGElement<"u"&&e instanceof SVGElement,j2=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Av=(e,n)=>{const t=e&&e.to;return _o(t)?n?n(t):null:t},Ow={name:"Teleport",__isTeleport:!0,process(e,n,t,r,i,s,o,u,f,d){const{mc:g,pc:y,pbc:x,o:{insert:_,querySelector:M,createText:k,createComment:N}}=d,T=Jd(n.props);let{shapeFlag:F,children:K,dynamicChildren:Q}=n;if(e==null){const he=n.el=k(""),fe=n.anchor=k("");_(he,t,r),_(fe,t,r);const me=($,X)=>{F&16&&(i&&i.isCE&&(i.ce._teleportTarget=$),g(K,$,X,i,s,o,u,f))},G=()=>{const $=n.target=Av(n.props,M),X=Bw($,n,k,_);$&&(o!=="svg"&&F2($)?o="svg":o!=="mathml"&&j2($)&&(o="mathml"),T||(me($,X),kg(n,!1)))};T&&(me(t,fe),kg(n,!0)),R2(n.props)?js(()=>{G(),n.el.__isMounted=!0},s):G()}else{if(R2(n.props)&&!e.el.__isMounted){js(()=>{Ow.process(e,n,t,r,i,s,o,u,f,d),delete e.el.__isMounted},s);return}n.el=e.el,n.targetStart=e.targetStart;const he=n.anchor=e.anchor,fe=n.target=e.target,me=n.targetAnchor=e.targetAnchor,G=Jd(e.props),$=G?t:fe,X=G?he:me;if(o==="svg"||F2(fe)?o="svg":(o==="mathml"||j2(fe))&&(o="mathml"),Q?(x(e.dynamicChildren,Q,$,i,s,o,u),ty(e,n,!0)):f||y(e,n,$,X,i,s,o,u,!1),T)G?n.props&&e.props&&n.props.to!==e.props.to&&(n.props.to=e.props.to):hg(n,t,he,d,1);else if((n.props&&n.props.to)!==(e.props&&e.props.to)){const R=n.target=Av(n.props,M);R&&hg(n,R,null,d,0)}else G&&hg(n,fe,me,d,1);kg(n,T)}},remove(e,n,t,{um:r,o:{remove:i}},s){const{shapeFlag:o,children:u,anchor:f,targetStart:d,targetAnchor:g,target:y,props:x}=e;if(y&&(i(d),i(g)),s&&i(f),o&16){const _=s||!Jd(x);for(let M=0;M<u.length;M++){const k=u[M];r(k,n,t,_,!!k.dynamicChildren)}}},move:hg,hydrate:ZP};function hg(e,n,t,{o:{insert:r},m:i},s=2){s===0&&r(e.targetAnchor,n,t);const{el:o,anchor:u,shapeFlag:f,children:d,props:g}=e,y=s===2;if(y&&r(o,n,t),(!y||Jd(g))&&f&16)for(let x=0;x<d.length;x++)i(d[x],n,t,2);y&&r(u,n,t)}function ZP(e,n,t,r,i,s,{o:{nextSibling:o,parentNode:u,querySelector:f,insert:d,createText:g}},y){const x=n.target=Av(n.props,f);if(x){const _=Jd(n.props),M=x._lpa||x.firstChild;if(n.shapeFlag&16)if(_)n.anchor=y(o(e),n,u(e),t,r,i,s),n.targetStart=M,n.targetAnchor=M&&o(M);else{n.anchor=o(e);let k=M;for(;k;){if(k&&k.nodeType===8){if(k.data==="teleport start anchor")n.targetStart=k;else if(k.data==="teleport anchor"){n.targetAnchor=k,x._lpa=n.targetAnchor&&o(n.targetAnchor);break}}k=o(k)}n.targetAnchor||Bw(x,n,g,d),y(M&&o(M),n,x,t,r,i,s)}kg(n,_)}return n.anchor&&o(n.anchor)}const kv=Ow;function kg(e,n){const t=e.ctx;if(t&&t.ut){let r,i;for(n?(r=e.el,i=e.anchor):(r=e.targetStart,i=e.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",t.uid),r=r.nextSibling;t.ut()}}function Bw(e,n,t,r){const i=n.targetStart=t(""),s=n.targetAnchor=t("");return i[Dw]=s,e&&(r(i,e),r(s,e)),s}const cf=Symbol("_leaveCb"),dg=Symbol("_enterCb");function q1(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Is(()=>{e.isMounted=!0}),ch(()=>{e.isUnmounting=!0}),e}const su=[Function,Array],W1={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:su,onEnter:su,onAfterEnter:su,onEnterCancelled:su,onBeforeLeave:su,onLeave:su,onAfterLeave:su,onLeaveCancelled:su,onBeforeAppear:su,onAppear:su,onAfterAppear:su,onAppearCancelled:su},Rw=e=>{const n=e.subTree;return n.component?Rw(n.component):n},KP={name:"BaseTransition",props:W1,setup(e,{slots:n}){const t=_u(),r=q1();return()=>{const i=n.default&&j0(n.default(),!0);if(!i||!i.length)return;const s=Fw(i),o=Ni(e),{mode:u}=o;if(r.isLeaving)return jm(s);const f=z2(s);if(!f)return jm(s);let d=nd(f,o,r,t,y=>d=y);f.type!==Ds&&Uc(f,d);let g=t.subTree&&z2(t.subTree);if(g&&g.type!==Ds&&!ju(f,g)&&Rw(t).type!==Ds){let y=nd(g,o,r,t);if(Uc(g,y),u==="out-in"&&f.type!==Ds)return r.isLeaving=!0,y.afterLeave=()=>{r.isLeaving=!1,t.job.flags&8||t.update(),delete y.afterLeave,g=void 0},jm(s);u==="in-out"&&f.type!==Ds?y.delayLeave=(x,_,M)=>{const k=zw(r,g);k[String(g.key)]=g,x[cf]=()=>{_(),x[cf]=void 0,delete d.delayedLeave,g=void 0},d.delayedLeave=()=>{M(),delete d.delayedLeave,g=void 0}}:g=void 0}else g&&(g=void 0);return s}}};function Fw(e){let n=e[0];if(e.length>1){for(const t of e)if(t.type!==Ds){n=t;break}}return n}const jw=KP;function zw(e,n){const{leavingVNodes:t}=e;let r=t.get(n.type);return r||(r=Object.create(null),t.set(n.type,r)),r}function nd(e,n,t,r,i){const{appear:s,mode:o,persisted:u=!1,onBeforeEnter:f,onEnter:d,onAfterEnter:g,onEnterCancelled:y,onBeforeLeave:x,onLeave:_,onAfterLeave:M,onLeaveCancelled:k,onBeforeAppear:N,onAppear:T,onAfterAppear:F,onAppearCancelled:K}=n,Q=String(e.key),he=zw(t,e),fe=($,X)=>{$&&vu($,r,9,X)},me=($,X)=>{const R=X[1];fe($,X),tr($)?$.every(O=>O.length<=1)&&R():$.length<=1&&R()},G={mode:o,persisted:u,beforeEnter($){let X=f;if(!t.isMounted)if(s)X=N||f;else return;$[cf]&&$[cf](!0);const R=he[Q];R&&ju(e,R)&&R.el[cf]&&R.el[cf](),fe(X,[$])},enter($){let X=d,R=g,O=y;if(!t.isMounted)if(s)X=T||d,R=F||g,O=K||y;else return;let B=!1;const z=$[dg]=W=>{B||(B=!0,W?fe(O,[$]):fe(R,[$]),G.delayedLeave&&G.delayedLeave(),$[dg]=void 0)};X?me(X,[$,z]):z()},leave($,X){const R=String(e.key);if($[dg]&&$[dg](!0),t.isUnmounting)return X();fe(x,[$]);let O=!1;const B=$[cf]=z=>{O||(O=!0,X(),z?fe(k,[$]):fe(M,[$]),$[cf]=void 0,he[R]===e&&delete he[R])};he[R]=e,_?me(_,[$,B]):B()},clone($){const X=nd($,n,t,r,i);return i&&i(X),X}};return G}function jm(e){if(kp(e))return e=vc(e),e.children=null,e}function z2(e){if(!kp(e))return Iw(e.type)&&e.children?Fw(e.children):e;const{shapeFlag:n,children:t}=e;if(t){if(n&16)return t[0];if(n&32&&Tr(t.default))return t.default()}}function Uc(e,n){e.shapeFlag&6&&e.component?(e.transition=n,Uc(e.component.subTree,n)):e.shapeFlag&128?(e.ssContent.transition=n.clone(e.ssContent),e.ssFallback.transition=n.clone(e.ssFallback)):e.transition=n}function j0(e,n=!1,t){let r=[],i=0;for(let s=0;s<e.length;s++){let o=e[s];const u=t==null?o.key:String(t)+String(o.key!=null?o.key:s);o.type===Tn?(o.patchFlag&128&&i++,r=r.concat(j0(o.children,n,u))):(n||o.type!==Ds)&&r.push(u!=null?vc(o,{key:u}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function cs(e,n){return Tr(e)?co({name:e.name},n,{setup:e}):e}function YP(){const e=_u();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function Z1(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function JP(e){const n=_u(),t=V1(null);if(n){const i=n.refs===Di?n.refs={}:n.refs;Object.defineProperty(i,e,{enumerable:!0,get:()=>t.value,set:s=>t.value=s})}return t}function _p(e,n,t,r,i=!1){if(tr(e)){e.forEach((M,k)=>_p(M,n&&(tr(n)?n[k]:n),t,r,i));return}if(_f(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&_p(e,n,t,r.component.subTree);return}const s=r.shapeFlag&4?Np(r.component):r.el,o=i?null:s,{i:u,r:f}=e,d=n&&n.r,g=u.refs===Di?u.refs={}:u.refs,y=u.setupState,x=Ni(y),_=y===Di?()=>!1:M=>Wi(x,M);if(d!=null&&d!==f&&(_o(d)?(g[d]=null,_(d)&&(y[d]=null)):Xo(d)&&(d.value=null)),Tr(f))hd(f,u,12,[o,g]);else{const M=_o(f),k=Xo(f);if(M||k){const N=()=>{if(e.f){const T=M?_(f)?y[f]:g[f]:f.value;i?tr(T)&&D1(T,s):tr(T)?T.includes(s)||T.push(s):M?(g[f]=[s],_(f)&&(y[f]=g[f])):(f.value=[s],e.k&&(g[e.k]=f.value))}else M?(g[f]=o,_(f)&&(y[f]=o)):k&&(f.value=o,e.k&&(g[e.k]=o))};o?(N.id=-1,js(N,t)):N()}}}let $2=!1;const Ah=()=>{$2||(console.error("Hydration completed but contains mismatches."),$2=!0)},XP=e=>e.namespaceURI.includes("svg")&&e.tagName!=="foreignObject",QP=e=>e.namespaceURI.includes("MathML"),pg=e=>{if(e.nodeType===1){if(XP(e))return"svg";if(QP(e))return"mathml"}},Vh=e=>e.nodeType===8;function eM(e){const{mt:n,p:t,o:{patchProp:r,createText:i,nextSibling:s,parentNode:o,remove:u,insert:f,createComment:d}}=e,g=(K,Q)=>{if(!Q.hasChildNodes()){t(null,K,Q),e0(),Q._vnode=K;return}y(Q.firstChild,K,null,null,null),e0(),Q._vnode=K},y=(K,Q,he,fe,me,G=!1)=>{G=G||!!Q.dynamicChildren;const $=Vh(K)&&K.data==="[",X=()=>k(K,Q,he,fe,me,$),{type:R,ref:O,shapeFlag:B,patchFlag:z}=Q;let W=K.nodeType;Q.el=K,z===-2&&(G=!1,Q.dynamicChildren=null);let V=null;switch(R){case bf:W!==3?Q.children===""?(f(Q.el=i(""),o(K),K),V=K):V=X():(K.data!==Q.children&&(Ah(),K.data=Q.children),V=s(K));break;case Ds:F(K)?(V=s(K),T(Q.el=K.content.firstChild,K,he)):W!==8||$?V=X():V=s(K);break;case th:if($&&(K=s(K),W=K.nodeType),W===1||W===3){V=K;const oe=!Q.children.length;for(let ie=0;ie<Q.staticCount;ie++)oe&&(Q.children+=V.nodeType===1?V.outerHTML:V.data),ie===Q.staticCount-1&&(Q.anchor=V),V=s(V);return $?s(V):V}else X();break;case Tn:$?V=M(K,Q,he,fe,me,G):V=X();break;default:if(B&1)(W!==1||Q.type.toLowerCase()!==K.tagName.toLowerCase())&&!F(K)?V=X():V=x(K,Q,he,fe,me,G);else if(B&6){Q.slotScopeIds=me;const oe=o(K);if($?V=N(K):Vh(K)&&K.data==="teleport start"?V=N(K,K.data,"teleport end"):V=s(K),n(Q,oe,null,he,fe,pg(oe),G),_f(Q)&&!Q.type.__asyncResolved){let ie;$?(ie=pi(Tn),ie.anchor=V?V.previousSibling:oe.lastChild):ie=K.nodeType===3?Ei(""):pi("div"),ie.el=K,Q.component.subTree=ie}}else B&64?W!==8?V=X():V=Q.type.hydrate(K,Q,he,fe,me,G,e,_):B&128&&(V=Q.type.hydrate(K,Q,he,fe,pg(o(K)),me,G,e,y))}return O!=null&&_p(O,null,fe,Q),V},x=(K,Q,he,fe,me,G)=>{G=G||!!Q.dynamicChildren;const{type:$,props:X,patchFlag:R,shapeFlag:O,dirs:B,transition:z}=Q,W=$==="input"||$==="option";if(W||R!==-1){B&&uc(Q,null,he,"created");let V=!1;if(F(K)){V=d4(null,z)&&he&&he.vnode.props&&he.vnode.props.appear;const ie=K.content.firstChild;V&&z.beforeEnter(ie),T(ie,K,he),Q.el=K=ie}if(O&16&&!(X&&(X.innerHTML||X.textContent))){let ie=_(K.firstChild,Q,K,he,fe,me,G);for(;ie;){gg(K,1)||Ah();const xe=ie;ie=ie.nextSibling,u(xe)}}else if(O&8){let ie=Q.children;ie[0]===`
`&&(K.tagName==="PRE"||K.tagName==="TEXTAREA")&&(ie=ie.slice(1)),K.textContent!==ie&&(gg(K,0)||Ah(),K.textContent=Q.children)}if(X){if(W||!G||R&48){const ie=K.tagName.includes("-");for(const xe in X)(W&&(xe.endsWith("value")||xe==="indeterminate")||Mp(xe)&&!Zh(xe)||xe[0]==="."||ie)&&r(K,xe,null,X[xe],void 0,he)}else if(X.onClick)r(K,"onClick",null,X.onClick,void 0,he);else if(R&4&&dc(X.style))for(const ie in X.style)X.style[ie]}let oe;(oe=X&&X.onVnodeBeforeMount)&&xl(oe,he,Q),B&&uc(Q,null,he,"beforeMount"),((oe=X&&X.onVnodeMounted)||B||V)&&x4(()=>{oe&&xl(oe,he,Q),V&&z.enter(K),B&&uc(Q,null,he,"mounted")},fe)}return K.nextSibling},_=(K,Q,he,fe,me,G,$)=>{$=$||!!Q.dynamicChildren;const X=Q.children,R=X.length;for(let O=0;O<R;O++){const B=$?X[O]:X[O]=Sl(X[O]),z=B.type===bf;K?(z&&!$&&O+1<R&&Sl(X[O+1]).type===bf&&(f(i(K.data.slice(B.children.length)),he,s(K)),K.data=B.children),K=y(K,B,fe,me,G,$)):z&&!B.children?f(B.el=i(""),he):(gg(he,1)||Ah(),t(null,B,he,null,fe,me,pg(he),G))}return K},M=(K,Q,he,fe,me,G)=>{const{slotScopeIds:$}=Q;$&&(me=me?me.concat($):$);const X=o(K),R=_(s(K),Q,X,he,fe,me,G);return R&&Vh(R)&&R.data==="]"?s(Q.anchor=R):(Ah(),f(Q.anchor=d("]"),X,R),R)},k=(K,Q,he,fe,me,G)=>{if(gg(K.parentElement,1)||Ah(),Q.el=null,G){const R=N(K);for(;;){const O=s(K);if(O&&O!==R)u(O);else break}}const $=s(K),X=o(K);return u(K),t(null,Q,X,$,he,fe,pg(X),me),he&&(he.vnode.el=Q.el,V0(he,Q.el)),$},N=(K,Q="[",he="]")=>{let fe=0;for(;K;)if(K=s(K),K&&Vh(K)&&(K.data===Q&&fe++,K.data===he)){if(fe===0)return s(K);fe--}return K},T=(K,Q,he)=>{const fe=Q.parentNode;fe&&fe.replaceChild(K,Q);let me=he;for(;me;)me.vnode.el===Q&&(me.vnode.el=me.subTree.el=K),me=me.parent},F=K=>K.nodeType===1&&K.tagName==="TEMPLATE";return[g,y]}const U2="data-allow-mismatch",tM={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function gg(e,n){if(n===0||n===1)for(;e&&!e.hasAttribute(U2);)e=e.parentElement;const t=e&&e.getAttribute(U2);if(t==null)return!1;if(t==="")return!0;{const r=t.split(",");return n===0&&r.includes("children")?!0:t.split(",").includes(tM[n])}}const nM=k0().requestIdleCallback||(e=>setTimeout(e,1)),rM=k0().cancelIdleCallback||(e=>clearTimeout(e)),iM=(e=1e4)=>n=>{const t=nM(n,{timeout:e});return()=>rM(t)};function oM(e){const{top:n,left:t,bottom:r,right:i}=e.getBoundingClientRect(),{innerHeight:s,innerWidth:o}=window;return(n>0&&n<s||r>0&&r<s)&&(t>0&&t<o||i>0&&i<o)}const sM=e=>(n,t)=>{const r=new IntersectionObserver(i=>{for(const s of i)if(s.isIntersecting){r.disconnect(),n();break}},e);return t(i=>{if(i instanceof Element){if(oM(i))return n(),r.disconnect(),!1;r.observe(i)}}),()=>r.disconnect()},aM=e=>n=>{if(e){const t=matchMedia(e);if(t.matches)n();else return t.addEventListener("change",n,{once:!0}),()=>t.removeEventListener("change",n)}},lM=(e=[])=>(n,t)=>{_o(e)&&(e=[e]);let r=!1;const i=o=>{r||(r=!0,s(),n(),o.target.dispatchEvent(new o.constructor(o.type,o)))},s=()=>{t(o=>{for(const u of e)o.removeEventListener(u,i)})};return t(o=>{for(const u of e)o.addEventListener(u,i,{once:!0})}),s};function uM(e,n){if(Vh(e)&&e.data==="["){let t=1,r=e.nextSibling;for(;r;){if(r.nodeType===1){if(n(r)===!1)break}else if(Vh(r))if(r.data==="]"){if(--t===0)break}else r.data==="["&&t++;r=r.nextSibling}}else n(e)}const _f=e=>!!e.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function cM(e){Tr(e)&&(e={loader:e});const{loader:n,loadingComponent:t,errorComponent:r,delay:i=200,hydrate:s,timeout:o,suspensible:u=!0,onError:f}=e;let d=null,g,y=0;const x=()=>(y++,d=null,_()),_=()=>{let M;return d||(M=d=n().catch(k=>{if(k=k instanceof Error?k:new Error(String(k)),f)return new Promise((N,T)=>{f(k,()=>N(x()),()=>T(k),y+1)});throw k}).then(k=>M!==d&&d?d:(k&&(k.__esModule||k[Symbol.toStringTag]==="Module")&&(k=k.default),g=k,k)))};return cs({name:"AsyncComponentWrapper",__asyncLoader:_,__asyncHydrate(M,k,N){const T=s?()=>{const F=s(N,K=>uM(M,K));F&&(k.bum||(k.bum=[])).push(F)}:N;g?T():_().then(()=>!k.isUnmounted&&T())},get __asyncResolved(){return g},setup(){const M=$s;if(Z1(M),g)return()=>zm(g,M);const k=K=>{d=null,uh(K,M,13,!r)};if(u&&M.suspense||rd)return _().then(K=>()=>zm(K,M)).catch(K=>(k(K),()=>r?pi(r,{error:K}):null));const N=jt(!1),T=jt(),F=jt(!!i);return i&&setTimeout(()=>{F.value=!1},i),o!=null&&setTimeout(()=>{if(!N.value&&!T.value){const K=new Error(`Async component timed out after ${o}ms.`);k(K),T.value=K}},o),_().then(()=>{N.value=!0,M.parent&&kp(M.parent.vnode)&&M.parent.update()}).catch(K=>{k(K),T.value=K}),()=>{if(N.value&&g)return zm(g,M);if(T.value&&r)return pi(r,{error:T.value});if(t&&!F.value)return pi(t)}}})}function zm(e,n){const{ref:t,props:r,children:i,ce:s}=n.vnode,o=pi(e,r,i);return o.ref=t,o.ce=s,delete n.vnode.ce,o}const kp=e=>e.type.__isKeepAlive,fM={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:n}){const t=_u(),r=t.ctx;if(!r.renderer)return()=>{const F=n.default&&n.default();return F&&F.length===1?F[0]:F};const i=new Map,s=new Set;let o=null;const u=t.suspense,{renderer:{p:f,m:d,um:g,o:{createElement:y}}}=r,x=y("div");r.activate=(F,K,Q,he,fe)=>{const me=F.component;d(F,K,Q,0,u),f(me.vnode,F,K,Q,me,u,he,F.slotScopeIds,fe),js(()=>{me.isDeactivated=!1,me.a&&Kh(me.a);const G=F.props&&F.props.onVnodeMounted;G&&xl(G,me.parent,F)},u)},r.deactivate=F=>{const K=F.component;n0(K.m),n0(K.a),d(F,x,null,1,u),js(()=>{K.da&&Kh(K.da);const Q=F.props&&F.props.onVnodeUnmounted;Q&&xl(Q,K.parent,F),K.isDeactivated=!0},u)};function _(F){$m(F),g(F,t,u,!0)}function M(F){i.forEach((K,Q)=>{const he=Uv(K.type);he&&!F(he)&&k(Q)})}function k(F){const K=i.get(F);K&&(!o||!ju(K,o))?_(K):o&&$m(o),i.delete(F),s.delete(F)}Co(()=>[e.include,e.exclude],([F,K])=>{F&&M(Q=>Rd(F,Q)),K&&M(Q=>!Rd(K,Q))},{flush:"post",deep:!0});let N=null;const T=()=>{N!=null&&(r0(t.subTree.type)?js(()=>{i.set(N,mg(t.subTree))},t.subTree.suspense):i.set(N,mg(t.subTree)))};return Is(T),$0(T),ch(()=>{i.forEach(F=>{const{subTree:K,suspense:Q}=t,he=mg(K);if(F.type===he.type&&F.key===he.key){$m(he);const fe=he.component.da;fe&&js(fe,Q);return}_(F)})}),()=>{if(N=null,!n.default)return o=null;const F=n.default(),K=F[0];if(F.length>1)return o=null,F;if(!Vc(K)||!(K.shapeFlag&4)&&!(K.shapeFlag&128))return o=null,K;let Q=mg(K);if(Q.type===Ds)return o=null,Q;const he=Q.type,fe=Uv(_f(Q)?Q.type.__asyncResolved||{}:he),{include:me,exclude:G,max:$}=e;if(me&&(!fe||!Rd(me,fe))||G&&fe&&Rd(G,fe))return Q.shapeFlag&=-257,o=Q,K;const X=Q.key==null?he:Q.key,R=i.get(X);return Q.el&&(Q=vc(Q),K.shapeFlag&128&&(K.ssContent=Q)),N=X,R?(Q.el=R.el,Q.component=R.component,Q.transition&&Uc(Q,Q.transition),Q.shapeFlag|=512,s.delete(X),s.add(X)):(s.add(X),$&&s.size>parseInt($,10)&&k(s.values().next().value)),Q.shapeFlag|=256,o=Q,r0(K.type)?K:Q}}},hM=fM;function Rd(e,n){return tr(e)?e.some(t=>Rd(t,n)):_o(e)?e.split(",").includes(n):UE(e)?(e.lastIndex=0,e.test(n)):!1}function $w(e,n){Vw(e,"a",n)}function Uw(e,n){Vw(e,"da",n)}function Vw(e,n,t=$s){const r=e.__wdc||(e.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(z0(n,r,t),t){let i=t.parent;for(;i&&i.parent;)kp(i.parent.vnode)&&dM(r,n,t,i),i=i.parent}}function dM(e,n,t,r){const i=z0(n,e,r,!0);mc(()=>{D1(r[n],i)},t)}function $m(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function mg(e){return e.shapeFlag&128?e.ssContent:e}function z0(e,n,t=$s,r=!1){if(t){const i=t[e]||(t[e]=[]),s=n.__weh||(n.__weh=(...o)=>{Af();const u=sh(t),f=vu(n,t,e,o);return u(),kf(),f});return r?i.unshift(s):i.push(s),s}}const Hc=e=>(n,t=$s)=>{(!rd||e==="sp")&&z0(e,(...r)=>n(...r),t)},Gw=Hc("bm"),Is=Hc("m"),K1=Hc("bu"),$0=Hc("u"),ch=Hc("bum"),mc=Hc("um"),Hw=Hc("sp"),qw=Hc("rtg"),Ww=Hc("rtc");function Zw(e,n=$s){z0("ec",e,n)}const Y1="components",pM="directives";function Kw(e,n){return J1(Y1,e,!0,n)||e}const Yw=Symbol.for("v-ndc");function gM(e){return _o(e)?J1(Y1,e,!1)||e:e||Yw}function mM(e){return J1(pM,e)}function J1(e,n,t=!0,r=!1){const i=Us||$s;if(i){const s=i.type;if(e===Y1){const u=Uv(s,!1);if(u&&(u===n||u===ga(n)||u===Ap(ga(n))))return s}const o=V2(i[e]||s[e],n)||V2(i.appContext[e],n);return!o&&r?s:o}}function V2(e,n){return e&&(e[n]||e[ga(n)]||e[Ap(ga(n))])}function xr(e,n,t,r){let i;const s=t&&t[r],o=tr(e);if(o||_o(e)){const u=o&&dc(e);let f=!1;u&&(f=!ql(e),e=D0(e)),i=new Array(e.length);for(let d=0,g=e.length;d<g;d++)i[d]=n(f?Ba(e[d]):e[d],d,void 0,s&&s[d])}else if(typeof e=="number"){i=new Array(e);for(let u=0;u<e;u++)i[u]=n(u+1,u,void 0,s&&s[u])}else if(Qi(e))if(e[Symbol.iterator])i=Array.from(e,(u,f)=>n(u,f,void 0,s&&s[f]));else{const u=Object.keys(e);i=new Array(u.length);for(let f=0,d=u.length;f<d;f++){const g=u[f];i[f]=n(e[g],g,f,s&&s[f])}}else i=[];return t&&(t[r]=i),i}function vM(e,n){for(let t=0;t<n.length;t++){const r=n[t];if(tr(r))for(let i=0;i<r.length;i++)e[r[i].name]=r[i].fn;else r&&(e[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return e}function yM(e,n,t={},r,i){if(Us.ce||Us.parent&&_f(Us.parent)&&Us.parent.ce)return n!=="default"&&(t.name=n),$e(),rl(Tn,null,[pi("slot",t,r&&r())],64);let s=e[n];s&&s._c&&(s._d=!1),$e();const o=s&&X1(s(t)),u=t.key||o&&o.key,f=rl(Tn,{key:(u&&!Gu(u)?u:`_${n}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&e._===1?64:-2);return!i&&f.scopeId&&(f.slotScopeIds=[f.scopeId+"-s"]),s&&s._c&&(s._d=!0),f}function X1(e){return e.some(n=>Vc(n)?!(n.type===Ds||n.type===Tn&&!X1(n.children)):!0)?e:null}function _M(e,n){const t={};for(const r in e)t[n&&/[A-Z]/.test(r)?`on:${r}`:Zd(r)]=e[r];return t}const Tv=e=>e?A4(e)?Np(e):Tv(e.parent):null,Xd=co(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Tv(e.parent),$root:e=>Tv(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Q1(e),$forceUpdate:e=>e.f||(e.f=()=>{H1(e.update)}),$nextTick:e=>e.n||(e.n=zs.bind(e.proxy)),$watch:e=>KM.bind(e)}),Um=(e,n)=>e!==Di&&!e.__isScriptSetup&&Wi(e,n),Nv={get({_:e},n){if(n==="__v_skip")return!0;const{ctx:t,setupState:r,data:i,props:s,accessCache:o,type:u,appContext:f}=e;let d;if(n[0]!=="$"){const _=o[n];if(_!==void 0)switch(_){case 1:return r[n];case 2:return i[n];case 4:return t[n];case 3:return s[n]}else{if(Um(r,n))return o[n]=1,r[n];if(i!==Di&&Wi(i,n))return o[n]=2,i[n];if((d=e.propsOptions[0])&&Wi(d,n))return o[n]=3,s[n];if(t!==Di&&Wi(t,n))return o[n]=4,t[n];Dv&&(o[n]=0)}}const g=Xd[n];let y,x;if(g)return n==="$attrs"&&Oa(e.attrs,"get",""),g(e);if((y=u.__cssModules)&&(y=y[n]))return y;if(t!==Di&&Wi(t,n))return o[n]=4,t[n];if(x=f.config.globalProperties,Wi(x,n))return x[n]},set({_:e},n,t){const{data:r,setupState:i,ctx:s}=e;return Um(i,n)?(i[n]=t,!0):r!==Di&&Wi(r,n)?(r[n]=t,!0):Wi(e.props,n)||n[0]==="$"&&n.slice(1)in e?!1:(s[n]=t,!0)},has({_:{data:e,setupState:n,accessCache:t,ctx:r,appContext:i,propsOptions:s}},o){let u;return!!t[o]||e!==Di&&Wi(e,o)||Um(n,o)||(u=s[0])&&Wi(u,o)||Wi(r,o)||Wi(Xd,o)||Wi(i.config.globalProperties,o)},defineProperty(e,n,t){return t.get!=null?e._.accessCache[n]=0:Wi(t,"value")&&this.set(e,n,t.value,null),Reflect.defineProperty(e,n,t)}},bM=co({},Nv,{get(e,n){if(n!==Symbol.unscopables)return Nv.get(e,n,e)},has(e,n){return n[0]!=="_"&&!WE(n)}});function wM(){return null}function xM(){return null}function LM(e){}function SM(e){}function CM(){return null}function EM(){}function PM(e,n){return null}function MM(){return Jw().slots}function AM(){return Jw().attrs}function Jw(){const e=_u();return e.setupContext||(e.setupContext=N4(e))}function bp(e){return tr(e)?e.reduce((n,t)=>(n[t]=null,n),{}):e}function kM(e,n){const t=bp(e);for(const r in n){if(r.startsWith("__skip"))continue;let i=t[r];i?tr(i)||Tr(i)?i=t[r]={type:i,default:n[r]}:i.default=n[r]:i===null&&(i=t[r]={default:n[r]}),i&&n[`__skip_${r}`]&&(i.skipFactory=!0)}return t}function TM(e,n){return!e||!n?e||n:tr(e)&&tr(n)?e.concat(n):co({},bp(e),bp(n))}function NM(e,n){const t={};for(const r in e)n.includes(r)||Object.defineProperty(t,r,{enumerable:!0,get:()=>e[r]});return t}function DM(e){const n=_u();let t=e();return jv(),I1(t)&&(t=t.catch(r=>{throw sh(n),r})),[t,()=>sh(n)]}let Dv=!0;function IM(e){const n=Q1(e),t=e.proxy,r=e.ctx;Dv=!1,n.beforeCreate&&G2(n.beforeCreate,e,"bc");const{data:i,computed:s,methods:o,watch:u,provide:f,inject:d,created:g,beforeMount:y,mounted:x,beforeUpdate:_,updated:M,activated:k,deactivated:N,beforeDestroy:T,beforeUnmount:F,destroyed:K,unmounted:Q,render:he,renderTracked:fe,renderTriggered:me,errorCaptured:G,serverPrefetch:$,expose:X,inheritAttrs:R,components:O,directives:B,filters:z}=n;if(d&&OM(d,r,null),o)for(const oe in o){const ie=o[oe];Tr(ie)&&(r[oe]=ie.bind(t))}if(i){const oe=i.call(t,t);Qi(oe)&&(e.data=Kl(oe))}if(Dv=!0,s)for(const oe in s){const ie=s[oe],xe=Tr(ie)?ie.bind(t,t):Tr(ie.get)?ie.get.bind(t,t):gu,Ee=!Tr(ie)&&Tr(ie.set)?ie.set.bind(t):gu,Te=cr({get:xe,set:Ee});Object.defineProperty(r,oe,{enumerable:!0,configurable:!0,get:()=>Te.value,set:Y=>Te.value=Y})}if(u)for(const oe in u)Xw(u[oe],r,t,oe);if(f){const oe=Tr(f)?f.call(t):f;Reflect.ownKeys(oe).forEach(ie=>{Qd(ie,oe[ie])})}g&&G2(g,e,"c");function V(oe,ie){tr(ie)?ie.forEach(xe=>oe(xe.bind(t))):ie&&oe(ie.bind(t))}if(V(Gw,y),V(Is,x),V(K1,_),V($0,M),V($w,k),V(Uw,N),V(Zw,G),V(Ww,fe),V(qw,me),V(ch,F),V(mc,Q),V(Hw,$),tr(X))if(X.length){const oe=e.exposed||(e.exposed={});X.forEach(ie=>{Object.defineProperty(oe,ie,{get:()=>t[ie],set:xe=>t[ie]=xe})})}else e.exposed||(e.exposed={});he&&e.render===gu&&(e.render=he),R!=null&&(e.inheritAttrs=R),O&&(e.components=O),B&&(e.directives=B),$&&Z1(e)}function OM(e,n,t=gu){tr(e)&&(e=Iv(e));for(const r in e){const i=e[r];let s;Qi(i)?"default"in i?s=Wl(i.from||r,i.default,!0):s=Wl(i.from||r):s=Wl(i),Xo(s)?Object.defineProperty(n,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):n[r]=s}}function G2(e,n,t){vu(tr(e)?e.map(r=>r.bind(n.proxy)):e.bind(n.proxy),n,t)}function Xw(e,n,t,r){let i=r.includes(".")?y4(t,r):()=>t[r];if(_o(e)){const s=n[e];Tr(s)&&Co(i,s)}else if(Tr(e))Co(i,e.bind(t));else if(Qi(e))if(tr(e))e.forEach(s=>Xw(s,n,t,r));else{const s=Tr(e.handler)?e.handler.bind(t):n[e.handler];Tr(s)&&Co(i,s,e)}}function Q1(e){const n=e.type,{mixins:t,extends:r}=n,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,u=s.get(n);let f;return u?f=u:!i.length&&!t&&!r?f=n:(f={},i.length&&i.forEach(d=>t0(f,d,o,!0)),t0(f,n,o)),Qi(n)&&s.set(n,f),f}function t0(e,n,t,r=!1){const{mixins:i,extends:s}=n;s&&t0(e,s,t,!0),i&&i.forEach(o=>t0(e,o,t,!0));for(const o in n)if(!(r&&o==="expose")){const u=BM[o]||t&&t[o];e[o]=u?u(e[o],n[o]):n[o]}return e}const BM={data:H2,props:q2,emits:q2,methods:Fd,computed:Fd,beforeCreate:Ka,created:Ka,beforeMount:Ka,mounted:Ka,beforeUpdate:Ka,updated:Ka,beforeDestroy:Ka,beforeUnmount:Ka,destroyed:Ka,unmounted:Ka,activated:Ka,deactivated:Ka,errorCaptured:Ka,serverPrefetch:Ka,components:Fd,directives:Fd,watch:FM,provide:H2,inject:RM};function H2(e,n){return n?e?function(){return co(Tr(e)?e.call(this,this):e,Tr(n)?n.call(this,this):n)}:n:e}function RM(e,n){return Fd(Iv(e),Iv(n))}function Iv(e){if(tr(e)){const n={};for(let t=0;t<e.length;t++)n[e[t]]=e[t];return n}return e}function Ka(e,n){return e?[...new Set([].concat(e,n))]:n}function Fd(e,n){return e?co(Object.create(null),e,n):n}function q2(e,n){return e?tr(e)&&tr(n)?[...new Set([...e,...n])]:co(Object.create(null),bp(e),bp(n??{})):n}function FM(e,n){if(!e)return n;if(!n)return e;const t=co(Object.create(null),e);for(const r in n)t[r]=Ka(e[r],n[r]);return t}function Qw(){return{app:null,config:{isNativeTag:zE,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let jM=0;function zM(e,n){return function(r,i=null){Tr(r)||(r=co({},r)),i!=null&&!Qi(i)&&(i=null);const s=Qw(),o=new WeakSet,u=[];let f=!1;const d=s.app={_uid:jM++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:I4,get config(){return s.config},set config(g){},use(g,...y){return o.has(g)||(g&&Tr(g.install)?(o.add(g),g.install(d,...y)):Tr(g)&&(o.add(g),g(d,...y))),d},mixin(g){return s.mixins.includes(g)||s.mixins.push(g),d},component(g,y){return y?(s.components[g]=y,d):s.components[g]},directive(g,y){return y?(s.directives[g]=y,d):s.directives[g]},mount(g,y,x){if(!f){const _=d._ceVNode||pi(r,i);return _.appContext=s,x===!0?x="svg":x===!1&&(x=void 0),y&&n?n(_,g):e(_,g,x),f=!0,d._container=g,g.__vue_app__=d,Np(_.component)}},onUnmount(g){u.push(g)},unmount(){f&&(vu(u,d._instance,16),e(null,d._container),delete d._container.__vue_app__)},provide(g,y){return s.provides[g]=y,d},runWithContext(g){const y=eh;eh=d;try{return g()}finally{eh=y}}};return d}}let eh=null;function Qd(e,n){if($s){let t=$s.provides;const r=$s.parent&&$s.parent.provides;r===t&&(t=$s.provides=Object.create(r)),t[e]=n}}function Wl(e,n,t=!1){const r=$s||Us;if(r||eh){const i=eh?eh._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return t&&Tr(n)?n.call(r&&r.proxy):n}}function e4(){return!!($s||Us||eh)}const t4={},n4=()=>Object.create(t4),r4=e=>Object.getPrototypeOf(e)===t4;function $M(e,n,t,r=!1){const i={},s=n4();e.propsDefaults=Object.create(null),i4(e,n,i,s);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);t?e.props=r?i:U1(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function UM(e,n,t,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=e,u=Ni(i),[f]=e.propsOptions;let d=!1;if((r||o>0)&&!(o&16)){if(o&8){const g=e.vnode.dynamicProps;for(let y=0;y<g.length;y++){let x=g[y];if(U0(e.emitsOptions,x))continue;const _=n[x];if(f)if(Wi(s,x))_!==s[x]&&(s[x]=_,d=!0);else{const M=ga(x);i[M]=Ov(f,u,M,_,e,!1)}else _!==s[x]&&(s[x]=_,d=!0)}}}else{i4(e,n,i,s)&&(d=!0);let g;for(const y in u)(!n||!Wi(n,y)&&((g=Cl(y))===y||!Wi(n,g)))&&(f?t&&(t[y]!==void 0||t[g]!==void 0)&&(i[y]=Ov(f,u,y,void 0,e,!0)):delete i[y]);if(s!==u)for(const y in s)(!n||!Wi(n,y))&&(delete s[y],d=!0)}d&&Rc(e.attrs,"set","")}function i4(e,n,t,r){const[i,s]=e.propsOptions;let o=!1,u;if(n)for(let f in n){if(Zh(f))continue;const d=n[f];let g;i&&Wi(i,g=ga(f))?!s||!s.includes(g)?t[g]=d:(u||(u={}))[g]=d:U0(e.emitsOptions,f)||(!(f in r)||d!==r[f])&&(r[f]=d,o=!0)}if(s){const f=Ni(t),d=u||Di;for(let g=0;g<s.length;g++){const y=s[g];t[y]=Ov(i,f,y,d[y],e,!Wi(d,y))}}return o}function Ov(e,n,t,r,i,s){const o=e[t];if(o!=null){const u=Wi(o,"default");if(u&&r===void 0){const f=o.default;if(o.type!==Function&&!o.skipFactory&&Tr(f)){const{propsDefaults:d}=i;if(t in d)r=d[t];else{const g=sh(i);r=d[t]=f.call(null,n),g()}}else r=f;i.ce&&i.ce._setProp(t,r)}o[0]&&(s&&!u?r=!1:o[1]&&(r===""||r===Cl(t))&&(r=!0))}return r}const VM=new WeakMap;function o4(e,n,t=!1){const r=t?VM:n.propsCache,i=r.get(e);if(i)return i;const s=e.props,o={},u=[];let f=!1;if(!Tr(e)){const g=y=>{f=!0;const[x,_]=o4(y,n,!0);co(o,x),_&&u.push(..._)};!t&&n.mixins.length&&n.mixins.forEach(g),e.extends&&g(e.extends),e.mixins&&e.mixins.forEach(g)}if(!s&&!f)return Qi(e)&&r.set(e,qh),qh;if(tr(s))for(let g=0;g<s.length;g++){const y=ga(s[g]);W2(y)&&(o[y]=Di)}else if(s)for(const g in s){const y=ga(g);if(W2(y)){const x=s[g],_=o[y]=tr(x)||Tr(x)?{type:x}:co({},x),M=_.type;let k=!1,N=!0;if(tr(M))for(let T=0;T<M.length;++T){const F=M[T],K=Tr(F)&&F.name;if(K==="Boolean"){k=!0;break}else K==="String"&&(N=!1)}else k=Tr(M)&&M.name==="Boolean";_[0]=k,_[1]=N,(k||Wi(_,"default"))&&u.push(y)}}const d=[o,u];return Qi(e)&&r.set(e,d),d}function W2(e){return e[0]!=="$"&&!Zh(e)}const s4=e=>e[0]==="_"||e==="$stable",ey=e=>tr(e)?e.map(Sl):[Sl(e)],GM=(e,n,t)=>{if(n._n)return n;const r=pu((...i)=>ey(n(...i)),t);return r._c=!1,r},a4=(e,n,t)=>{const r=e._ctx;for(const i in e){if(s4(i))continue;const s=e[i];if(Tr(s))n[i]=GM(i,s,r);else if(s!=null){const o=ey(s);n[i]=()=>o}}},l4=(e,n)=>{const t=ey(n);e.slots.default=()=>t},u4=(e,n,t)=>{for(const r in n)(t||r!=="_")&&(e[r]=n[r])},HM=(e,n,t)=>{const r=e.slots=n4();if(e.vnode.shapeFlag&32){const i=n._;i?(u4(r,n,t),t&&rw(r,"_",i,!0)):a4(n,r)}else n&&l4(e,n)},qM=(e,n,t)=>{const{vnode:r,slots:i}=e;let s=!0,o=Di;if(r.shapeFlag&32){const u=n._;u?t&&u===1?s=!1:u4(i,n,t):(s=!n.$stable,a4(n,i)),o=n}else n&&(l4(e,n),o={default:1});if(s)for(const u in i)!s4(u)&&o[u]==null&&delete i[u]},js=x4;function c4(e){return h4(e)}function f4(e){return h4(e,eM)}function h4(e,n){const t=k0();t.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:u,createComment:f,setText:d,setElementText:g,parentNode:y,nextSibling:x,setScopeId:_=gu,insertStaticContent:M}=e,k=(ce,ne,ye,de=null,Ze=null,qe=null,tt=void 0,ze=null,Qe=!!ne.dynamicChildren)=>{if(ce===ne)return;ce&&!ju(ce,ne)&&(de=pe(ce),Y(ce,Ze,qe,!0),ce=null),ne.patchFlag===-2&&(Qe=!1,ne.dynamicChildren=null);const{type:et,ref:bt,shapeFlag:Pt}=ne;switch(et){case bf:N(ce,ne,ye,de);break;case Ds:T(ce,ne,ye,de);break;case th:ce==null&&F(ne,ye,de,tt);break;case Tn:O(ce,ne,ye,de,Ze,qe,tt,ze,Qe);break;default:Pt&1?he(ce,ne,ye,de,Ze,qe,tt,ze,Qe):Pt&6?B(ce,ne,ye,de,Ze,qe,tt,ze,Qe):(Pt&64||Pt&128)&&et.process(ce,ne,ye,de,Ze,qe,tt,ze,Qe,ke)}bt!=null&&Ze&&_p(bt,ce&&ce.ref,qe,ne||ce,!ne)},N=(ce,ne,ye,de)=>{if(ce==null)r(ne.el=u(ne.children),ye,de);else{const Ze=ne.el=ce.el;ne.children!==ce.children&&d(Ze,ne.children)}},T=(ce,ne,ye,de)=>{ce==null?r(ne.el=f(ne.children||""),ye,de):ne.el=ce.el},F=(ce,ne,ye,de)=>{[ce.el,ce.anchor]=M(ce.children,ne,ye,de,ce.el,ce.anchor)},K=({el:ce,anchor:ne},ye,de)=>{let Ze;for(;ce&&ce!==ne;)Ze=x(ce),r(ce,ye,de),ce=Ze;r(ne,ye,de)},Q=({el:ce,anchor:ne})=>{let ye;for(;ce&&ce!==ne;)ye=x(ce),i(ce),ce=ye;i(ne)},he=(ce,ne,ye,de,Ze,qe,tt,ze,Qe)=>{ne.type==="svg"?tt="svg":ne.type==="math"&&(tt="mathml"),ce==null?fe(ne,ye,de,Ze,qe,tt,ze,Qe):$(ce,ne,Ze,qe,tt,ze,Qe)},fe=(ce,ne,ye,de,Ze,qe,tt,ze)=>{let Qe,et;const{props:bt,shapeFlag:Pt,transition:At,dirs:Vt}=ce;if(Qe=ce.el=o(ce.type,qe,bt&&bt.is,bt),Pt&8?g(Qe,ce.children):Pt&16&&G(ce.children,Qe,null,de,Ze,Vm(ce,qe),tt,ze),Vt&&uc(ce,null,de,"created"),me(Qe,ce,ce.scopeId,tt,de),bt){for(const mn in bt)mn!=="value"&&!Zh(mn)&&s(Qe,mn,null,bt[mn],qe,de);"value"in bt&&s(Qe,"value",null,bt.value,qe),(et=bt.onVnodeBeforeMount)&&xl(et,de,ce)}Vt&&uc(ce,null,de,"beforeMount");const Qt=d4(Ze,At);Qt&&At.beforeEnter(Qe),r(Qe,ne,ye),((et=bt&&bt.onVnodeMounted)||Qt||Vt)&&js(()=>{et&&xl(et,de,ce),Qt&&At.enter(Qe),Vt&&uc(ce,null,de,"mounted")},Ze)},me=(ce,ne,ye,de,Ze)=>{if(ye&&_(ce,ye),de)for(let qe=0;qe<de.length;qe++)_(ce,de[qe]);if(Ze){let qe=Ze.subTree;if(ne===qe||r0(qe.type)&&(qe.ssContent===ne||qe.ssFallback===ne)){const tt=Ze.vnode;me(ce,tt,tt.scopeId,tt.slotScopeIds,Ze.parent)}}},G=(ce,ne,ye,de,Ze,qe,tt,ze,Qe=0)=>{for(let et=Qe;et<ce.length;et++){const bt=ce[et]=ze?ff(ce[et]):Sl(ce[et]);k(null,bt,ne,ye,de,Ze,qe,tt,ze)}},$=(ce,ne,ye,de,Ze,qe,tt)=>{const ze=ne.el=ce.el;let{patchFlag:Qe,dynamicChildren:et,dirs:bt}=ne;Qe|=ce.patchFlag&16;const Pt=ce.props||Di,At=ne.props||Di;let Vt;if(ye&&$f(ye,!1),(Vt=At.onVnodeBeforeUpdate)&&xl(Vt,ye,ne,ce),bt&&uc(ne,ce,ye,"beforeUpdate"),ye&&$f(ye,!0),(Pt.innerHTML&&At.innerHTML==null||Pt.textContent&&At.textContent==null)&&g(ze,""),et?X(ce.dynamicChildren,et,ze,ye,de,Vm(ne,Ze),qe):tt||ie(ce,ne,ze,null,ye,de,Vm(ne,Ze),qe,!1),Qe>0){if(Qe&16)R(ze,Pt,At,ye,Ze);else if(Qe&2&&Pt.class!==At.class&&s(ze,"class",null,At.class,Ze),Qe&4&&s(ze,"style",Pt.style,At.style,Ze),Qe&8){const Qt=ne.dynamicProps;for(let mn=0;mn<Qt.length;mn++){const Ye=Qt[mn],ot=Pt[Ye],rt=At[Ye];(rt!==ot||Ye==="value")&&s(ze,Ye,ot,rt,Ze,ye)}}Qe&1&&ce.children!==ne.children&&g(ze,ne.children)}else!tt&&et==null&&R(ze,Pt,At,ye,Ze);((Vt=At.onVnodeUpdated)||bt)&&js(()=>{Vt&&xl(Vt,ye,ne,ce),bt&&uc(ne,ce,ye,"updated")},de)},X=(ce,ne,ye,de,Ze,qe,tt)=>{for(let ze=0;ze<ne.length;ze++){const Qe=ce[ze],et=ne[ze],bt=Qe.el&&(Qe.type===Tn||!ju(Qe,et)||Qe.shapeFlag&70)?y(Qe.el):ye;k(Qe,et,bt,null,de,Ze,qe,tt,!0)}},R=(ce,ne,ye,de,Ze)=>{if(ne!==ye){if(ne!==Di)for(const qe in ne)!Zh(qe)&&!(qe in ye)&&s(ce,qe,ne[qe],null,Ze,de);for(const qe in ye){if(Zh(qe))continue;const tt=ye[qe],ze=ne[qe];tt!==ze&&qe!=="value"&&s(ce,qe,ze,tt,Ze,de)}"value"in ye&&s(ce,"value",ne.value,ye.value,Ze)}},O=(ce,ne,ye,de,Ze,qe,tt,ze,Qe)=>{const et=ne.el=ce?ce.el:u(""),bt=ne.anchor=ce?ce.anchor:u("");let{patchFlag:Pt,dynamicChildren:At,slotScopeIds:Vt}=ne;Vt&&(ze=ze?ze.concat(Vt):Vt),ce==null?(r(et,ye,de),r(bt,ye,de),G(ne.children||[],ye,bt,Ze,qe,tt,ze,Qe)):Pt>0&&Pt&64&&At&&ce.dynamicChildren?(X(ce.dynamicChildren,At,ye,Ze,qe,tt,ze),(ne.key!=null||Ze&&ne===Ze.subTree)&&ty(ce,ne,!0)):ie(ce,ne,ye,bt,Ze,qe,tt,ze,Qe)},B=(ce,ne,ye,de,Ze,qe,tt,ze,Qe)=>{ne.slotScopeIds=ze,ce==null?ne.shapeFlag&512?Ze.ctx.activate(ne,ye,de,tt,Qe):z(ne,ye,de,Ze,qe,tt,Qe):W(ce,ne,Qe)},z=(ce,ne,ye,de,Ze,qe,tt)=>{const ze=ce.component=M4(ce,de,Ze);if(kp(ce)&&(ze.ctx.renderer=ke),k4(ze,!1,tt),ze.asyncDep){if(Ze&&Ze.registerDep(ze,V,tt),!ce.el){const Qe=ze.subTree=pi(Ds);T(null,Qe,ne,ye)}}else V(ze,ce,ne,ye,Ze,qe,tt)},W=(ce,ne,ye)=>{const de=ne.component=ce.component;if(tA(ce,ne,ye))if(de.asyncDep&&!de.asyncResolved){oe(de,ne,ye);return}else de.next=ne,de.update();else ne.el=ce.el,de.vnode=ne},V=(ce,ne,ye,de,Ze,qe,tt)=>{const ze=()=>{if(ce.isMounted){let{next:Pt,bu:At,u:Vt,parent:Qt,vnode:mn}=ce;{const en=p4(ce);if(en){Pt&&(Pt.el=mn.el,oe(ce,Pt,tt)),en.asyncDep.then(()=>{ce.isUnmounted||ze()});return}}let Ye=Pt,ot;$f(ce,!1),Pt?(Pt.el=mn.el,oe(ce,Pt,tt)):Pt=mn,At&&Kh(At),(ot=Pt.props&&Pt.props.onVnodeBeforeUpdate)&&xl(ot,Qt,Pt,mn),$f(ce,!0);const rt=Tg(ce),zt=ce.subTree;ce.subTree=rt,k(zt,rt,y(zt.el),pe(zt),ce,Ze,qe),Pt.el=rt.el,Ye===null&&V0(ce,rt.el),Vt&&js(Vt,Ze),(ot=Pt.props&&Pt.props.onVnodeUpdated)&&js(()=>xl(ot,Qt,Pt,mn),Ze)}else{let Pt;const{el:At,props:Vt}=ne,{bm:Qt,m:mn,parent:Ye,root:ot,type:rt}=ce,zt=_f(ne);if($f(ce,!1),Qt&&Kh(Qt),!zt&&(Pt=Vt&&Vt.onVnodeBeforeMount)&&xl(Pt,Ye,ne),$f(ce,!0),At&&Ge){const en=()=>{ce.subTree=Tg(ce),Ge(At,ce.subTree,ce,Ze,null)};zt&&rt.__asyncHydrate?rt.__asyncHydrate(At,ce,en):en()}else{ot.ce&&ot.ce._injectChildStyle(rt);const en=ce.subTree=Tg(ce);k(null,en,ye,de,ce,Ze,qe),ne.el=en.el}if(mn&&js(mn,Ze),!zt&&(Pt=Vt&&Vt.onVnodeMounted)){const en=ne;js(()=>xl(Pt,Ye,en),Ze)}(ne.shapeFlag&256||Ye&&_f(Ye.vnode)&&Ye.vnode.shapeFlag&256)&&ce.a&&js(ce.a,Ze),ce.isMounted=!0,ne=ye=de=null}};ce.scope.on();const Qe=ce.effect=new dp(ze);ce.scope.off();const et=ce.update=Qe.run.bind(Qe),bt=ce.job=Qe.runIfDirty.bind(Qe);bt.i=ce,bt.id=ce.uid,Qe.scheduler=()=>H1(bt),$f(ce,!0),et()},oe=(ce,ne,ye)=>{ne.component=ce;const de=ce.vnode.props;ce.vnode=ne,ce.next=null,UM(ce,ne.props,de,ye),qM(ce,ne.children,ye),Af(),B2(ce),kf()},ie=(ce,ne,ye,de,Ze,qe,tt,ze,Qe=!1)=>{const et=ce&&ce.children,bt=ce?ce.shapeFlag:0,Pt=ne.children,{patchFlag:At,shapeFlag:Vt}=ne;if(At>0){if(At&128){Ee(et,Pt,ye,de,Ze,qe,tt,ze,Qe);return}else if(At&256){xe(et,Pt,ye,de,Ze,qe,tt,ze,Qe);return}}Vt&8?(bt&16&&le(et,Ze,qe),Pt!==et&&g(ye,Pt)):bt&16?Vt&16?Ee(et,Pt,ye,de,Ze,qe,tt,ze,Qe):le(et,Ze,qe,!0):(bt&8&&g(ye,""),Vt&16&&G(Pt,ye,de,Ze,qe,tt,ze,Qe))},xe=(ce,ne,ye,de,Ze,qe,tt,ze,Qe)=>{ce=ce||qh,ne=ne||qh;const et=ce.length,bt=ne.length,Pt=Math.min(et,bt);let At;for(At=0;At<Pt;At++){const Vt=ne[At]=Qe?ff(ne[At]):Sl(ne[At]);k(ce[At],Vt,ye,null,Ze,qe,tt,ze,Qe)}et>bt?le(ce,Ze,qe,!0,!1,Pt):G(ne,ye,de,Ze,qe,tt,ze,Qe,Pt)},Ee=(ce,ne,ye,de,Ze,qe,tt,ze,Qe)=>{let et=0;const bt=ne.length;let Pt=ce.length-1,At=bt-1;for(;et<=Pt&&et<=At;){const Vt=ce[et],Qt=ne[et]=Qe?ff(ne[et]):Sl(ne[et]);if(ju(Vt,Qt))k(Vt,Qt,ye,null,Ze,qe,tt,ze,Qe);else break;et++}for(;et<=Pt&&et<=At;){const Vt=ce[Pt],Qt=ne[At]=Qe?ff(ne[At]):Sl(ne[At]);if(ju(Vt,Qt))k(Vt,Qt,ye,null,Ze,qe,tt,ze,Qe);else break;Pt--,At--}if(et>Pt){if(et<=At){const Vt=At+1,Qt=Vt<bt?ne[Vt].el:de;for(;et<=At;)k(null,ne[et]=Qe?ff(ne[et]):Sl(ne[et]),ye,Qt,Ze,qe,tt,ze,Qe),et++}}else if(et>At)for(;et<=Pt;)Y(ce[et],Ze,qe,!0),et++;else{const Vt=et,Qt=et,mn=new Map;for(et=Qt;et<=At;et++){const Nn=ne[et]=Qe?ff(ne[et]):Sl(ne[et]);Nn.key!=null&&mn.set(Nn.key,et)}let Ye,ot=0;const rt=At-Qt+1;let zt=!1,en=0;const Bn=new Array(rt);for(et=0;et<rt;et++)Bn[et]=0;for(et=Vt;et<=Pt;et++){const Nn=ce[et];if(ot>=rt){Y(Nn,Ze,qe,!0);continue}let ar;if(Nn.key!=null)ar=mn.get(Nn.key);else for(Ye=Qt;Ye<=At;Ye++)if(Bn[Ye-Qt]===0&&ju(Nn,ne[Ye])){ar=Ye;break}ar===void 0?Y(Nn,Ze,qe,!0):(Bn[ar-Qt]=et+1,ar>=en?en=ar:zt=!0,k(Nn,ne[ar],ye,null,Ze,qe,tt,ze,Qe),ot++)}const bn=zt?WM(Bn):qh;for(Ye=bn.length-1,et=rt-1;et>=0;et--){const Nn=Qt+et,ar=ne[Nn],xn=Nn+1<bt?ne[Nn+1].el:de;Bn[et]===0?k(null,ar,ye,xn,Ze,qe,tt,ze,Qe):zt&&(Ye<0||et!==bn[Ye]?Te(ar,ye,xn,2):Ye--)}}},Te=(ce,ne,ye,de,Ze=null)=>{const{el:qe,type:tt,transition:ze,children:Qe,shapeFlag:et}=ce;if(et&6){Te(ce.component.subTree,ne,ye,de);return}if(et&128){ce.suspense.move(ne,ye,de);return}if(et&64){tt.move(ce,ne,ye,ke);return}if(tt===Tn){r(qe,ne,ye);for(let Pt=0;Pt<Qe.length;Pt++)Te(Qe[Pt],ne,ye,de);r(ce.anchor,ne,ye);return}if(tt===th){K(ce,ne,ye);return}if(de!==2&&et&1&&ze)if(de===0)ze.beforeEnter(qe),r(qe,ne,ye),js(()=>ze.enter(qe),Ze);else{const{leave:Pt,delayLeave:At,afterLeave:Vt}=ze,Qt=()=>r(qe,ne,ye),mn=()=>{Pt(qe,()=>{Qt(),Vt&&Vt()})};At?At(qe,Qt,mn):mn()}else r(qe,ne,ye)},Y=(ce,ne,ye,de=!1,Ze=!1)=>{const{type:qe,props:tt,ref:ze,children:Qe,dynamicChildren:et,shapeFlag:bt,patchFlag:Pt,dirs:At,cacheIndex:Vt}=ce;if(Pt===-2&&(Ze=!1),ze!=null&&_p(ze,null,ye,ce,!0),Vt!=null&&(ne.renderCache[Vt]=void 0),bt&256){ne.ctx.deactivate(ce);return}const Qt=bt&1&&At,mn=!_f(ce);let Ye;if(mn&&(Ye=tt&&tt.onVnodeBeforeUnmount)&&xl(Ye,ne,ce),bt&6)ue(ce.component,ye,de);else{if(bt&128){ce.suspense.unmount(ye,de);return}Qt&&uc(ce,null,ne,"beforeUnmount"),bt&64?ce.type.remove(ce,ne,ye,ke,de):et&&!et.hasOnce&&(qe!==Tn||Pt>0&&Pt&64)?le(et,ne,ye,!1,!0):(qe===Tn&&Pt&384||!Ze&&bt&16)&&le(Qe,ne,ye),de&&q(ce)}(mn&&(Ye=tt&&tt.onVnodeUnmounted)||Qt)&&js(()=>{Ye&&xl(Ye,ne,ce),Qt&&uc(ce,null,ne,"unmounted")},ye)},q=ce=>{const{type:ne,el:ye,anchor:de,transition:Ze}=ce;if(ne===Tn){ee(ye,de);return}if(ne===th){Q(ce);return}const qe=()=>{i(ye),Ze&&!Ze.persisted&&Ze.afterLeave&&Ze.afterLeave()};if(ce.shapeFlag&1&&Ze&&!Ze.persisted){const{leave:tt,delayLeave:ze}=Ze,Qe=()=>tt(ye,qe);ze?ze(ce.el,qe,Qe):Qe()}else qe()},ee=(ce,ne)=>{let ye;for(;ce!==ne;)ye=x(ce),i(ce),ce=ye;i(ne)},ue=(ce,ne,ye)=>{const{bum:de,scope:Ze,job:qe,subTree:tt,um:ze,m:Qe,a:et}=ce;n0(Qe),n0(et),de&&Kh(de),Ze.stop(),qe&&(qe.flags|=8,Y(tt,ce,ne,ye)),ze&&js(ze,ne),js(()=>{ce.isUnmounted=!0},ne),ne&&ne.pendingBranch&&!ne.isUnmounted&&ce.asyncDep&&!ce.asyncResolved&&ce.suspenseId===ne.pendingId&&(ne.deps--,ne.deps===0&&ne.resolve())},le=(ce,ne,ye,de=!1,Ze=!1,qe=0)=>{for(let tt=qe;tt<ce.length;tt++)Y(ce[tt],ne,ye,de,Ze)},pe=ce=>{if(ce.shapeFlag&6)return pe(ce.component.subTree);if(ce.shapeFlag&128)return ce.suspense.next();const ne=x(ce.anchor||ce.el),ye=ne&&ne[Dw];return ye?x(ye):ne};let Z=!1;const D=(ce,ne,ye)=>{ce==null?ne._vnode&&Y(ne._vnode,null,null,!0):k(ne._vnode||null,ce,ne,null,null,null,ye),ne._vnode=ce,Z||(Z=!0,B2(),e0(),Z=!1)},ke={p:k,um:Y,m:Te,r:q,mt:z,mc:G,pc:ie,pbc:X,n:pe,o:e};let Me,Ge;return n&&([Me,Ge]=n(ke)),{render:D,hydrate:Me,createApp:zM(D,Me)}}function Vm({type:e,props:n},t){return t==="svg"&&e==="foreignObject"||t==="mathml"&&e==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:t}function $f({effect:e,job:n},t){t?(e.flags|=32,n.flags|=4):(e.flags&=-33,n.flags&=-5)}function d4(e,n){return(!e||e&&!e.pendingBranch)&&n&&!n.persisted}function ty(e,n,t=!1){const r=e.children,i=n.children;if(tr(r)&&tr(i))for(let s=0;s<r.length;s++){const o=r[s];let u=i[s];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=i[s]=ff(i[s]),u.el=o.el),!t&&u.patchFlag!==-2&&ty(o,u)),u.type===bf&&(u.el=o.el)}}function WM(e){const n=e.slice(),t=[0];let r,i,s,o,u;const f=e.length;for(r=0;r<f;r++){const d=e[r];if(d!==0){if(i=t[t.length-1],e[i]<d){n[r]=i,t.push(r);continue}for(s=0,o=t.length-1;s<o;)u=s+o>>1,e[t[u]]<d?s=u+1:o=u;d<e[t[s]]&&(s>0&&(n[r]=t[s-1]),t[s]=r)}}for(s=t.length,o=t[s-1];s-- >0;)t[s]=o,o=n[o];return t}function p4(e){const n=e.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:p4(n)}function n0(e){if(e)for(let n=0;n<e.length;n++)e[n].flags|=8}const g4=Symbol.for("v-scx"),m4=()=>Wl(g4);function wp(e,n){return Tp(e,null,n)}function ZM(e,n){return Tp(e,null,{flush:"post"})}function v4(e,n){return Tp(e,null,{flush:"sync"})}function Co(e,n,t){return Tp(e,n,t)}function Tp(e,n,t=Di){const{immediate:r,deep:i,flush:s,once:o}=t,u=co({},t),f=n&&r||!n&&s!=="post";let d;if(rd){if(s==="sync"){const _=m4();d=_.__watcherHandles||(_.__watcherHandles=[])}else if(!f){const _=()=>{};return _.stop=gu,_.resume=gu,_.pause=gu,_}}const g=$s;u.call=(_,M,k)=>vu(_,g,M,k);let y=!1;s==="post"?u.scheduler=_=>{js(_,g&&g.suspense)}:s!=="sync"&&(y=!0,u.scheduler=(_,M)=>{M?_():H1(_)}),u.augmentJob=_=>{n&&(_.flags|=4),y&&(_.flags|=2,g&&(_.id=g.uid,_.i=g))};const x=RP(e,n,u);return rd&&(d?d.push(x):f&&x()),x}function KM(e,n,t){const r=this.proxy,i=_o(e)?e.includes(".")?y4(r,e):()=>r[e]:e.bind(r,r);let s;Tr(n)?s=n:(s=n.handler,t=n);const o=sh(this),u=Tp(i,s.bind(r),t);return o(),u}function y4(e,n){const t=n.split(".");return()=>{let r=e;for(let i=0;i<t.length&&r;i++)r=r[t[i]];return r}}function YM(e,n,t=Di){const r=_u(),i=ga(n),s=Cl(n),o=_4(e,i),u=Sw((f,d)=>{let g,y=Di,x;return v4(()=>{const _=e[i];tl(g,_)&&(g=_,d())}),{get(){return f(),t.get?t.get(g):g},set(_){const M=t.set?t.set(_):_;if(!tl(M,g)&&!(y!==Di&&tl(_,y)))return;const k=r.vnode.props;k&&(n in k||i in k||s in k)&&(`onUpdate:${n}`in k||`onUpdate:${i}`in k||`onUpdate:${s}`in k)||(g=_,d()),r.emit(`update:${n}`,M),tl(_,M)&&tl(_,y)&&!tl(M,x)&&d(),y=_,x=M}}});return u[Symbol.iterator]=()=>{let f=0;return{next(){return f<2?{value:f++?o||Di:u,done:!1}:{done:!0}}}},u}const _4=(e,n)=>n==="modelValue"||n==="model-value"?e.modelModifiers:e[`${n}Modifiers`]||e[`${ga(n)}Modifiers`]||e[`${Cl(n)}Modifiers`];function JM(e,n,...t){if(e.isUnmounted)return;const r=e.vnode.props||Di;let i=t;const s=n.startsWith("update:"),o=s&&_4(r,n.slice(7));o&&(o.trim&&(i=t.map(g=>_o(g)?g.trim():g)),o.number&&(i=t.map(Kg)));let u,f=r[u=Zd(n)]||r[u=Zd(ga(n))];!f&&s&&(f=r[u=Zd(Cl(n))]),f&&vu(f,e,6,i);const d=r[u+"Once"];if(d){if(!e.emitted)e.emitted={};else if(e.emitted[u])return;e.emitted[u]=!0,vu(d,e,6,i)}}function b4(e,n,t=!1){const r=n.emitsCache,i=r.get(e);if(i!==void 0)return i;const s=e.emits;let o={},u=!1;if(!Tr(e)){const f=d=>{const g=b4(d,n,!0);g&&(u=!0,co(o,g))};!t&&n.mixins.length&&n.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}return!s&&!u?(Qi(e)&&r.set(e,null),null):(tr(s)?s.forEach(f=>o[f]=null):co(o,s),Qi(e)&&r.set(e,o),o)}function U0(e,n){return!e||!Mp(n)?!1:(n=n.slice(2).replace(/Once$/,""),Wi(e,n[0].toLowerCase()+n.slice(1))||Wi(e,Cl(n))||Wi(e,n))}function Tg(e){const{type:n,vnode:t,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:u,emit:f,render:d,renderCache:g,props:y,data:x,setupState:_,ctx:M,inheritAttrs:k}=e,N=yp(e);let T,F;try{if(t.shapeFlag&4){const Q=i||r,he=Q;T=Sl(d.call(he,Q,g,y,_,x,M)),F=u}else{const Q=n;T=Sl(Q.length>1?Q(y,{attrs:u,slots:o,emit:f}):Q(y,null)),F=n.props?u:QM(u)}}catch(Q){ep.length=0,uh(Q,e,1),T=pi(Ds)}let K=T;if(F&&k!==!1){const Q=Object.keys(F),{shapeFlag:he}=K;Q.length&&he&7&&(s&&Q.some(N1)&&(F=eA(F,s)),K=vc(K,F,!1,!0))}return t.dirs&&(K=vc(K,null,!1,!0),K.dirs=K.dirs?K.dirs.concat(t.dirs):t.dirs),t.transition&&Uc(K,t.transition),T=K,yp(N),T}function XM(e,n=!0){let t;for(let r=0;r<e.length;r++){const i=e[r];if(Vc(i)){if(i.type!==Ds||i.children==="v-if"){if(t)return;t=i}}else return}return t}const QM=e=>{let n;for(const t in e)(t==="class"||t==="style"||Mp(t))&&((n||(n={}))[t]=e[t]);return n},eA=(e,n)=>{const t={};for(const r in e)(!N1(r)||!(r.slice(9)in n))&&(t[r]=e[r]);return t};function tA(e,n,t){const{props:r,children:i,component:s}=e,{props:o,children:u,patchFlag:f}=n,d=s.emitsOptions;if(n.dirs||n.transition)return!0;if(t&&f>=0){if(f&1024)return!0;if(f&16)return r?Z2(r,o,d):!!o;if(f&8){const g=n.dynamicProps;for(let y=0;y<g.length;y++){const x=g[y];if(o[x]!==r[x]&&!U0(d,x))return!0}}}else return(i||u)&&(!u||!u.$stable)?!0:r===o?!1:r?o?Z2(r,o,d):!0:!!o;return!1}function Z2(e,n,t){const r=Object.keys(n);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(n[s]!==e[s]&&!U0(t,s))return!0}return!1}function V0({vnode:e,parent:n},t){for(;n;){const r=n.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=n.vnode).el=t,n=n.parent;else break}}const r0=e=>e.__isSuspense;let Bv=0;const nA={name:"Suspense",__isSuspense:!0,process(e,n,t,r,i,s,o,u,f,d){if(e==null)iA(n,t,r,i,s,o,u,f,d);else{if(s&&s.deps>0&&!e.suspense.isInFallback){n.suspense=e.suspense,n.suspense.vnode=n,n.el=e.el;return}oA(e,n,t,r,i,o,u,f,d)}},hydrate:sA,normalize:aA},rA=nA;function xp(e,n){const t=e.props&&e.props[n];Tr(t)&&t()}function iA(e,n,t,r,i,s,o,u,f){const{p:d,o:{createElement:g}}=f,y=g("div"),x=e.suspense=w4(e,i,r,n,y,t,s,o,u,f);d(null,x.pendingBranch=e.ssContent,y,null,r,x,s,o),x.deps>0?(xp(e,"onPending"),xp(e,"onFallback"),d(null,e.ssFallback,n,t,r,null,s,o),Jh(x,e.ssFallback)):x.resolve(!1,!0)}function oA(e,n,t,r,i,s,o,u,{p:f,um:d,o:{createElement:g}}){const y=n.suspense=e.suspense;y.vnode=n,n.el=e.el;const x=n.ssContent,_=n.ssFallback,{activeBranch:M,pendingBranch:k,isInFallback:N,isHydrating:T}=y;if(k)y.pendingBranch=x,ju(x,k)?(f(k,x,y.hiddenContainer,null,i,y,s,o,u),y.deps<=0?y.resolve():N&&(T||(f(M,_,t,r,i,null,s,o,u),Jh(y,_)))):(y.pendingId=Bv++,T?(y.isHydrating=!1,y.activeBranch=k):d(k,i,y),y.deps=0,y.effects.length=0,y.hiddenContainer=g("div"),N?(f(null,x,y.hiddenContainer,null,i,y,s,o,u),y.deps<=0?y.resolve():(f(M,_,t,r,i,null,s,o,u),Jh(y,_))):M&&ju(x,M)?(f(M,x,t,r,i,y,s,o,u),y.resolve(!0)):(f(null,x,y.hiddenContainer,null,i,y,s,o,u),y.deps<=0&&y.resolve()));else if(M&&ju(x,M))f(M,x,t,r,i,y,s,o,u),Jh(y,x);else if(xp(n,"onPending"),y.pendingBranch=x,x.shapeFlag&512?y.pendingId=x.component.suspenseId:y.pendingId=Bv++,f(null,x,y.hiddenContainer,null,i,y,s,o,u),y.deps<=0)y.resolve();else{const{timeout:F,pendingId:K}=y;F>0?setTimeout(()=>{y.pendingId===K&&y.fallback(_)},F):F===0&&y.fallback(_)}}function w4(e,n,t,r,i,s,o,u,f,d,g=!1){const{p:y,m:x,um:_,n:M,o:{parentNode:k,remove:N}}=d;let T;const F=lA(e);F&&n&&n.pendingBranch&&(T=n.pendingId,n.deps++);const K=e.props?Yg(e.props.timeout):void 0,Q=s,he={vnode:e,parent:n,parentComponent:t,namespace:o,container:r,hiddenContainer:i,deps:0,pendingId:Bv++,timeout:typeof K=="number"?K:-1,activeBranch:null,pendingBranch:null,isInFallback:!g,isHydrating:g,isUnmounted:!1,effects:[],resolve(fe=!1,me=!1){const{vnode:G,activeBranch:$,pendingBranch:X,pendingId:R,effects:O,parentComponent:B,container:z}=he;let W=!1;he.isHydrating?he.isHydrating=!1:fe||(W=$&&X.transition&&X.transition.mode==="out-in",W&&($.transition.afterLeave=()=>{R===he.pendingId&&(x(X,z,s===Q?M($):s,0),mp(O))}),$&&(k($.el)===z&&(s=M($)),_($,B,he,!0)),W||x(X,z,s,0)),Jh(he,X),he.pendingBranch=null,he.isInFallback=!1;let V=he.parent,oe=!1;for(;V;){if(V.pendingBranch){V.effects.push(...O),oe=!0;break}V=V.parent}!oe&&!W&&mp(O),he.effects=[],F&&n&&n.pendingBranch&&T===n.pendingId&&(n.deps--,n.deps===0&&!me&&n.resolve()),xp(G,"onResolve")},fallback(fe){if(!he.pendingBranch)return;const{vnode:me,activeBranch:G,parentComponent:$,container:X,namespace:R}=he;xp(me,"onFallback");const O=M(G),B=()=>{he.isInFallback&&(y(null,fe,X,O,$,null,R,u,f),Jh(he,fe))},z=fe.transition&&fe.transition.mode==="out-in";z&&(G.transition.afterLeave=B),he.isInFallback=!0,_(G,$,null,!0),z||B()},move(fe,me,G){he.activeBranch&&x(he.activeBranch,fe,me,G),he.container=fe},next(){return he.activeBranch&&M(he.activeBranch)},registerDep(fe,me,G){const $=!!he.pendingBranch;$&&he.deps++;const X=fe.vnode.el;fe.asyncDep.catch(R=>{uh(R,fe,0)}).then(R=>{if(fe.isUnmounted||he.isUnmounted||he.pendingId!==fe.suspenseId)return;fe.asyncResolved=!0;const{vnode:O}=fe;zv(fe,R,!1),X&&(O.el=X);const B=!X&&fe.subTree.el;me(fe,O,k(X||fe.subTree.el),X?null:M(fe.subTree),he,o,G),B&&N(B),V0(fe,O.el),$&&--he.deps===0&&he.resolve()})},unmount(fe,me){he.isUnmounted=!0,he.activeBranch&&_(he.activeBranch,t,fe,me),he.pendingBranch&&_(he.pendingBranch,t,fe,me)}};return he}function sA(e,n,t,r,i,s,o,u,f){const d=n.suspense=w4(n,r,t,e.parentNode,document.createElement("div"),null,i,s,o,u,!0),g=f(e,d.pendingBranch=n.ssContent,t,d,s,o);return d.deps===0&&d.resolve(!1,!0),g}function aA(e){const{shapeFlag:n,children:t}=e,r=n&32;e.ssContent=K2(r?t.default:t),e.ssFallback=r?K2(t.fallback):pi(Ds)}function K2(e){let n;if(Tr(e)){const t=oh&&e._c;t&&(e._d=!1,$e()),e=e(),t&&(e._d=!0,n=za,L4())}return tr(e)&&(e=XM(e)),e=Sl(e),n&&!e.dynamicChildren&&(e.dynamicChildren=n.filter(t=>t!==e)),e}function x4(e,n){n&&n.pendingBranch?tr(e)?n.effects.push(...e):n.effects.push(e):mp(e)}function Jh(e,n){e.activeBranch=n;const{vnode:t,parentComponent:r}=e;let i=n.el;for(;!i&&n.component;)n=n.component.subTree,i=n.el;t.el=i,r&&r.subTree===t&&(r.vnode.el=i,V0(r,i))}function lA(e){const n=e.props&&e.props.suspensible;return n!=null&&n!==!1}const Tn=Symbol.for("v-fgt"),bf=Symbol.for("v-txt"),Ds=Symbol.for("v-cmt"),th=Symbol.for("v-stc"),ep=[];let za=null;function $e(e=!1){ep.push(za=e?null:[])}function L4(){ep.pop(),za=ep[ep.length-1]||null}let oh=1;function Rv(e,n=!1){oh+=e,e<0&&za&&n&&(za.hasOnce=!0)}function S4(e){return e.dynamicChildren=oh>0?za||qh:null,L4(),oh>0&&za&&za.push(e),e}function He(e,n,t,r,i,s){return S4(E(e,n,t,r,i,s,!0))}function rl(e,n,t,r,i){return S4(pi(e,n,t,r,i,!0))}function Vc(e){return e?e.__v_isVNode===!0:!1}function ju(e,n){return e.type===n.type&&e.key===n.key}function uA(e){}const C4=({key:e})=>e??null,Ng=({ref:e,ref_key:n,ref_for:t})=>(typeof e=="number"&&(e=""+e),e!=null?_o(e)||Xo(e)||Tr(e)?{i:Us,r:e,k:n,f:!!t}:e:null);function E(e,n=null,t=null,r=0,i=null,s=e===Tn?0:1,o=!1,u=!1){const f={__v_isVNode:!0,__v_skip:!0,type:e,props:n,key:n&&C4(n),ref:n&&Ng(n),scopeId:F0,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Us};return u?(ny(f,t),s&128&&e.normalize(f)):t&&(f.shapeFlag|=_o(t)?8:16),oh>0&&!o&&za&&(f.patchFlag>0||s&6)&&f.patchFlag!==32&&za.push(f),f}const pi=cA;function cA(e,n=null,t=null,r=0,i=null,s=!1){if((!e||e===Yw)&&(e=Ds),Vc(e)){const u=vc(e,n,!0);return t&&ny(u,t),oh>0&&!s&&za&&(u.shapeFlag&6?za[za.indexOf(e)]=u:za.push(u)),u.patchFlag=-2,u}if(vA(e)&&(e=e.__vccOpts),n){n=E4(n);let{class:u,style:f}=n;u&&!_o(u)&&(n.class=Fi(u)),Qi(f)&&(B0(f)&&!tr(f)&&(f=co({},f)),n.style=Hl(f))}const o=_o(e)?1:r0(e)?128:Iw(e)?64:Qi(e)?4:Tr(e)?2:0;return E(e,n,t,r,i,o,s,!0)}function E4(e){return e?B0(e)||r4(e)?co({},e):e:null}function vc(e,n,t=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:u,transition:f}=e,d=n?P4(i||{},n):i,g={__v_isVNode:!0,__v_skip:!0,type:e.type,props:d,key:d&&C4(d),ref:n&&n.ref?t&&s?tr(s)?s.concat(Ng(n)):[s,Ng(n)]:Ng(n):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:u,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:n&&e.type!==Tn?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:f,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&vc(e.ssContent),ssFallback:e.ssFallback&&vc(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return f&&r&&Uc(g,f.clone(g)),g}function Ei(e=" ",n=0){return pi(bf,null,e,n)}function zu(e,n){const t=pi(th,null,e);return t.staticCount=n,t}function cn(e="",n=!1){return n?($e(),rl(Ds,null,e)):pi(Ds,null,e)}function Sl(e){return e==null||typeof e=="boolean"?pi(Ds):tr(e)?pi(Tn,null,e.slice()):Vc(e)?ff(e):pi(bf,null,String(e))}function ff(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:vc(e)}function ny(e,n){let t=0;const{shapeFlag:r}=e;if(n==null)n=null;else if(tr(n))t=16;else if(typeof n=="object")if(r&65){const i=n.default;i&&(i._c&&(i._d=!1),ny(e,i()),i._c&&(i._d=!0));return}else{t=32;const i=n._;!i&&!r4(n)?n._ctx=Us:i===3&&Us&&(Us.slots._===1?n._=1:(n._=2,e.patchFlag|=1024))}else Tr(n)?(n={default:n,_ctx:Us},t=32):(n=String(n),r&64?(t=16,n=[Ei(n)]):t=8);e.children=n,e.shapeFlag|=t}function P4(...e){const n={};for(let t=0;t<e.length;t++){const r=e[t];for(const i in r)if(i==="class")n.class!==r.class&&(n.class=Fi([n.class,r.class]));else if(i==="style")n.style=Hl([n.style,r.style]);else if(Mp(i)){const s=n[i],o=r[i];o&&s!==o&&!(tr(s)&&s.includes(o))&&(n[i]=s?[].concat(s,o):o)}else i!==""&&(n[i]=r[i])}return n}function xl(e,n,t,r=null){vu(e,n,7,[t,r])}const fA=Qw();let hA=0;function M4(e,n,t){const r=e.type,i=(n?n.appContext:e.appContext)||fA,s={uid:hA++,vnode:e,type:r,parent:n,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new B1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(i.provides),ids:n?n.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:o4(r,i),emitsOptions:b4(r,i),emit:null,emitted:null,propsDefaults:Di,inheritAttrs:r.inheritAttrs,ctx:Di,data:Di,props:Di,attrs:Di,slots:Di,refs:Di,setupState:Di,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=n?n.root:s,s.emit=JM.bind(null,s),e.ce&&e.ce(s),s}let $s=null;const _u=()=>$s||Us;let i0,Fv;{const e=k0(),n=(t,r)=>{let i;return(i=e[t])||(i=e[t]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};i0=n("__VUE_INSTANCE_SETTERS__",t=>$s=t),Fv=n("__VUE_SSR_SETTERS__",t=>rd=t)}const sh=e=>{const n=$s;return i0(e),e.scope.on(),()=>{e.scope.off(),i0(n)}},jv=()=>{$s&&$s.scope.off(),i0(null)};function A4(e){return e.vnode.shapeFlag&4}let rd=!1;function k4(e,n=!1,t=!1){n&&Fv(n);const{props:r,children:i}=e.vnode,s=A4(e);$M(e,r,s,n),HM(e,i,t);const o=s?dA(e,n):void 0;return n&&Fv(!1),o}function dA(e,n){const t=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Nv);const{setup:r}=t;if(r){Af();const i=e.setupContext=r.length>1?N4(e):null,s=sh(e),o=hd(r,e,0,[e.props,i]),u=I1(o);if(kf(),s(),(u||e.sp)&&!_f(e)&&Z1(e),u){if(o.then(jv,jv),n)return o.then(f=>{zv(e,f,n)}).catch(f=>{uh(f,e,0)});e.asyncDep=o}else zv(e,o,n)}else T4(e,n)}function zv(e,n,t){Tr(n)?e.type.__ssrInlineRender?e.ssrRender=n:e.render=n:Qi(n)&&(e.setupState=G1(n)),T4(e,t)}let o0,$v;function pA(e){o0=e,$v=n=>{n.render._rc&&(n.withProxy=new Proxy(n.ctx,bM))}}const gA=()=>!o0;function T4(e,n,t){const r=e.type;if(!e.render){if(!n&&o0&&!r.render){const i=r.template||Q1(e).template;if(i){const{isCustomElement:s,compilerOptions:o}=e.appContext.config,{delimiters:u,compilerOptions:f}=r,d=co(co({isCustomElement:s,delimiters:u},o),f);r.render=o0(i,d)}}e.render=r.render||gu,$v&&$v(e)}{const i=sh(e);Af();try{IM(e)}finally{kf(),i()}}}const mA={get(e,n){return Oa(e,"get",""),e[n]}};function N4(e){const n=t=>{e.exposed=t||{}};return{attrs:new Proxy(e.attrs,mA),slots:e.slots,emit:e.emit,expose:n}}function Np(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(G1(R0(e.exposed)),{get(n,t){if(t in n)return n[t];if(t in Xd)return Xd[t](e)},has(n,t){return t in n||t in Xd}})):e.proxy}function Uv(e,n=!0){return Tr(e)?e.displayName||e.name:e.name||n&&e.__name}function vA(e){return Tr(e)&&"__vccOpts"in e}const cr=(e,n)=>DP(e,n,rd);function G0(e,n,t){const r=arguments.length;return r===2?Qi(n)&&!tr(n)?Vc(n)?pi(e,null,[n]):pi(e,n):pi(e,null,n):(r>3?t=Array.prototype.slice.call(arguments,2):r===3&&Vc(t)&&(t=[t]),pi(e,n,t))}function yA(){}function _A(e,n,t,r){const i=t[r];if(i&&D4(i,e))return i;const s=n();return s.memo=e.slice(),s.cacheIndex=r,t[r]=s}function D4(e,n){const t=e.memo;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(tl(t[r],n[r]))return!1;return oh>0&&za&&za.push(e),!0}const I4="3.5.13",bA=gu,wA=UP,xA=Rh,LA=Nw,SA={createComponentInstance:M4,setupComponent:k4,renderComponentRoot:Tg,setCurrentRenderingInstance:yp,isVNode:Vc,normalizeVNode:Sl,getComponentPublicInstance:Np,ensureValidVNode:X1,pushWarningContext:FP,popWarningContext:jP},CA=SA,EA=null,PA=null,MA=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Vv;const Y2=typeof window<"u"&&window.trustedTypes;if(Y2)try{Vv=Y2.createPolicy("vue",{createHTML:e=>e})}catch{}const O4=Vv?e=>Vv.createHTML(e):e=>e,AA="http://www.w3.org/2000/svg",kA="http://www.w3.org/1998/Math/MathML",Bc=typeof document<"u"?document:null,J2=Bc&&Bc.createElement("template"),TA={insert:(e,n,t)=>{n.insertBefore(e,t||null)},remove:e=>{const n=e.parentNode;n&&n.removeChild(e)},createElement:(e,n,t,r)=>{const i=n==="svg"?Bc.createElementNS(AA,e):n==="mathml"?Bc.createElementNS(kA,e):t?Bc.createElement(e,{is:t}):Bc.createElement(e);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>Bc.createTextNode(e),createComment:e=>Bc.createComment(e),setText:(e,n)=>{e.nodeValue=n},setElementText:(e,n)=>{e.textContent=n},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Bc.querySelector(e),setScopeId(e,n){e.setAttribute(n,"")},insertStaticContent(e,n,t,r,i,s){const o=t?t.previousSibling:n.lastChild;if(i&&(i===s||i.nextSibling))for(;n.insertBefore(i.cloneNode(!0),t),!(i===s||!(i=i.nextSibling)););else{J2.innerHTML=O4(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const u=J2.content;if(r==="svg"||r==="mathml"){const f=u.firstChild;for(;f.firstChild;)u.appendChild(f.firstChild);u.removeChild(f)}n.insertBefore(u,t)}return[o?o.nextSibling:n.firstChild,t?t.previousSibling:n.lastChild]}},ef="transition",Cd="animation",id=Symbol("_vtc"),B4={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},R4=co({},W1,B4),NA=e=>(e.displayName="Transition",e.props=R4,e),Gv=NA((e,{slots:n})=>G0(jw,F4(e),n)),Uf=(e,n=[])=>{tr(e)?e.forEach(t=>t(...n)):e&&e(...n)},X2=e=>e?tr(e)?e.some(n=>n.length>1):e.length>1:!1;function F4(e){const n={};for(const O in e)O in B4||(n[O]=e[O]);if(e.css===!1)return n;const{name:t="v",type:r,duration:i,enterFromClass:s=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:u=`${t}-enter-to`,appearFromClass:f=s,appearActiveClass:d=o,appearToClass:g=u,leaveFromClass:y=`${t}-leave-from`,leaveActiveClass:x=`${t}-leave-active`,leaveToClass:_=`${t}-leave-to`}=e,M=DA(i),k=M&&M[0],N=M&&M[1],{onBeforeEnter:T,onEnter:F,onEnterCancelled:K,onLeave:Q,onLeaveCancelled:he,onBeforeAppear:fe=T,onAppear:me=F,onAppearCancelled:G=K}=n,$=(O,B,z,W)=>{O._enterCancelled=W,sf(O,B?g:u),sf(O,B?d:o),z&&z()},X=(O,B)=>{O._isLeaving=!1,sf(O,y),sf(O,_),sf(O,x),B&&B()},R=O=>(B,z)=>{const W=O?me:F,V=()=>$(B,O,z);Uf(W,[B,V]),Q2(()=>{sf(B,O?f:s),sc(B,O?g:u),X2(W)||e_(B,r,k,V)})};return co(n,{onBeforeEnter(O){Uf(T,[O]),sc(O,s),sc(O,o)},onBeforeAppear(O){Uf(fe,[O]),sc(O,f),sc(O,d)},onEnter:R(!1),onAppear:R(!0),onLeave(O,B){O._isLeaving=!0;const z=()=>X(O,B);sc(O,y),O._enterCancelled?(sc(O,x),Hv()):(Hv(),sc(O,x)),Q2(()=>{O._isLeaving&&(sf(O,y),sc(O,_),X2(Q)||e_(O,r,N,z))}),Uf(Q,[O,z])},onEnterCancelled(O){$(O,!1,void 0,!0),Uf(K,[O])},onAppearCancelled(O){$(O,!0,void 0,!0),Uf(G,[O])},onLeaveCancelled(O){X(O),Uf(he,[O])}})}function DA(e){if(e==null)return null;if(Qi(e))return[Gm(e.enter),Gm(e.leave)];{const n=Gm(e);return[n,n]}}function Gm(e){return Yg(e)}function sc(e,n){n.split(/\s+/).forEach(t=>t&&e.classList.add(t)),(e[id]||(e[id]=new Set)).add(n)}function sf(e,n){n.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const t=e[id];t&&(t.delete(n),t.size||(e[id]=void 0))}function Q2(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let IA=0;function e_(e,n,t,r){const i=e._endId=++IA,s=()=>{i===e._endId&&r()};if(t!=null)return setTimeout(s,t);const{type:o,timeout:u,propCount:f}=j4(e,n);if(!o)return r();const d=o+"end";let g=0;const y=()=>{e.removeEventListener(d,x),s()},x=_=>{_.target===e&&++g>=f&&y()};setTimeout(()=>{g<f&&y()},u+1),e.addEventListener(d,x)}function j4(e,n){const t=window.getComputedStyle(e),r=M=>(t[M]||"").split(", "),i=r(`${ef}Delay`),s=r(`${ef}Duration`),o=t_(i,s),u=r(`${Cd}Delay`),f=r(`${Cd}Duration`),d=t_(u,f);let g=null,y=0,x=0;n===ef?o>0&&(g=ef,y=o,x=s.length):n===Cd?d>0&&(g=Cd,y=d,x=f.length):(y=Math.max(o,d),g=y>0?o>d?ef:Cd:null,x=g?g===ef?s.length:f.length:0);const _=g===ef&&/\b(transform|all)(,|$)/.test(r(`${ef}Property`).toString());return{type:g,timeout:y,propCount:x,hasTransform:_}}function t_(e,n){for(;e.length<n.length;)e=e.concat(e);return Math.max(...n.map((t,r)=>n_(t)+n_(e[r])))}function n_(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Hv(){return document.body.offsetHeight}function OA(e,n,t){const r=e[id];r&&(n=(n?[n,...r]:[...r]).join(" ")),n==null?e.removeAttribute("class"):t?e.setAttribute("class",n):e.className=n}const s0=Symbol("_vod"),z4=Symbol("_vsh"),H0={beforeMount(e,{value:n},{transition:t}){e[s0]=e.style.display==="none"?"":e.style.display,t&&n?t.beforeEnter(e):Ed(e,n)},mounted(e,{value:n},{transition:t}){t&&n&&t.enter(e)},updated(e,{value:n,oldValue:t},{transition:r}){!n!=!t&&(r?n?(r.beforeEnter(e),Ed(e,!0),r.enter(e)):r.leave(e,()=>{Ed(e,!1)}):Ed(e,n))},beforeUnmount(e,{value:n}){Ed(e,n)}};function Ed(e,n){e.style.display=n?e[s0]:"none",e[z4]=!n}function BA(){H0.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const $4=Symbol("");function RA(e){const n=_u();if(!n)return;const t=n.ut=(i=e(n.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${n.uid}"]`)).forEach(s=>a0(s,i))},r=()=>{const i=e(n.proxy);n.ce?a0(n.ce,i):qv(n.subTree,i),t(i)};K1(()=>{mp(r)}),Is(()=>{Co(r,gu,{flush:"post"});const i=new MutationObserver(r);i.observe(n.subTree.el.parentNode,{childList:!0}),mc(()=>i.disconnect())})}function qv(e,n){if(e.shapeFlag&128){const t=e.suspense;e=t.activeBranch,t.pendingBranch&&!t.isHydrating&&t.effects.push(()=>{qv(t.activeBranch,n)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)a0(e.el,n);else if(e.type===Tn)e.children.forEach(t=>qv(t,n));else if(e.type===th){let{el:t,anchor:r}=e;for(;t&&(a0(t,n),t!==r);)t=t.nextSibling}}function a0(e,n){if(e.nodeType===1){const t=e.style;let r="";for(const i in n)t.setProperty(`--${i}`,n[i]),r+=`--${i}: ${n[i]};`;t[$4]=r}}const FA=/(^|;)\s*display\s*:/;function jA(e,n,t){const r=e.style,i=_o(t);let s=!1;if(t&&!i){if(n)if(_o(n))for(const o of n.split(";")){const u=o.slice(0,o.indexOf(":")).trim();t[u]==null&&Dg(r,u,"")}else for(const o in n)t[o]==null&&Dg(r,o,"");for(const o in t)o==="display"&&(s=!0),Dg(r,o,t[o])}else if(i){if(n!==t){const o=r[$4];o&&(t+=";"+o),r.cssText=t,s=FA.test(t)}}else n&&e.removeAttribute("style");s0 in e&&(e[s0]=s?r.display:"",e[z4]&&(r.display="none"))}const r_=/\s*!important$/;function Dg(e,n,t){if(tr(t))t.forEach(r=>Dg(e,n,r));else if(t==null&&(t=""),n.startsWith("--"))e.setProperty(n,t);else{const r=zA(e,n);r_.test(t)?e.setProperty(Cl(r),t.replace(r_,""),"important"):e[r]=t}}const i_=["Webkit","Moz","ms"],Hm={};function zA(e,n){const t=Hm[n];if(t)return t;let r=ga(n);if(r!=="filter"&&r in e)return Hm[n]=r;r=Ap(r);for(let i=0;i<i_.length;i++){const s=i_[i]+r;if(s in e)return Hm[n]=s}return n}const o_="http://www.w3.org/1999/xlink";function s_(e,n,t,r,i,s=eP(n)){r&&n.startsWith("xlink:")?t==null?e.removeAttributeNS(o_,n.slice(6,n.length)):e.setAttributeNS(o_,n,t):t==null||s&&!iw(t)?e.removeAttribute(n):e.setAttribute(n,s?"":Gu(t)?String(t):t)}function a_(e,n,t,r,i){if(n==="innerHTML"||n==="textContent"){t!=null&&(e[n]=n==="innerHTML"?O4(t):t);return}const s=e.tagName;if(n==="value"&&s!=="PROGRESS"&&!s.includes("-")){const u=s==="OPTION"?e.getAttribute("value")||"":e.value,f=t==null?e.type==="checkbox"?"on":"":String(t);(u!==f||!("_value"in e))&&(e.value=f),t==null&&e.removeAttribute(n),e._value=t;return}let o=!1;if(t===""||t==null){const u=typeof e[n];u==="boolean"?t=iw(t):t==null&&u==="string"?(t="",o=!0):u==="number"&&(t=0,o=!0)}try{e[n]=t}catch{}o&&e.removeAttribute(i||n)}function jc(e,n,t,r){e.addEventListener(n,t,r)}function $A(e,n,t,r){e.removeEventListener(n,t,r)}const l_=Symbol("_vei");function UA(e,n,t,r,i=null){const s=e[l_]||(e[l_]={}),o=s[n];if(r&&o)o.value=r;else{const[u,f]=VA(n);if(r){const d=s[n]=qA(r,i);jc(e,u,d,f)}else o&&($A(e,u,o,f),s[n]=void 0)}}const u_=/(?:Once|Passive|Capture)$/;function VA(e){let n;if(u_.test(e)){n={};let r;for(;r=e.match(u_);)e=e.slice(0,e.length-r[0].length),n[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Cl(e.slice(2)),n]}let qm=0;const GA=Promise.resolve(),HA=()=>qm||(GA.then(()=>qm=0),qm=Date.now());function qA(e,n){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;vu(WA(r,t.value),n,5,[r])};return t.value=e,t.attached=HA(),t}function WA(e,n){if(tr(n)){const t=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{t.call(e),e._stopped=!0},n.map(r=>i=>!i._stopped&&r&&r(i))}else return n}const c_=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,ZA=(e,n,t,r,i,s)=>{const o=i==="svg";n==="class"?OA(e,r,o):n==="style"?jA(e,t,r):Mp(n)?N1(n)||UA(e,n,t,r,s):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):KA(e,n,r,o))?(a_(e,n,r),!e.tagName.includes("-")&&(n==="value"||n==="checked"||n==="selected")&&s_(e,n,r,o,s,n!=="value")):e._isVueCE&&(/[A-Z]/.test(n)||!_o(r))?a_(e,ga(n),r,s,n):(n==="true-value"?e._trueValue=r:n==="false-value"&&(e._falseValue=r),s_(e,n,r,o))};function KA(e,n,t,r){if(r)return!!(n==="innerHTML"||n==="textContent"||n in e&&c_(n)&&Tr(t));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&e.tagName==="INPUT"||n==="type"&&e.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return c_(n)&&_o(t)?!1:n in e}const f_={};/*! #__NO_SIDE_EFFECTS__ */function U4(e,n,t){const r=cs(e,n);M0(r)&&co(r,n);class i extends q0{constructor(o){super(r,o,t)}}return i.def=r,i}/*! #__NO_SIDE_EFFECTS__ */const YA=(e,n)=>U4(e,n,X4),JA=typeof HTMLElement<"u"?HTMLElement:class{};class q0 extends JA{constructor(n,t={},r=u0){super(),this._def=n,this._props=t,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==u0?this._root=this.shadowRoot:n.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let n=this;for(;n=n&&(n.parentNode||n.host);)if(n instanceof q0){this._parent=n;break}this._instance||(this._resolved?(this._setParent(),this._update()):n&&n._pendingResolve?this._pendingResolve=n._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(n=this._parent){n&&(this._instance.parent=n._instance,this._instance.provides=n._instance.provides)}disconnectedCallback(){this._connected=!1,zs(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const i of r)this._setAttr(i.attributeName)}),this._ob.observe(this,{attributes:!0});const n=(r,i=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:s,styles:o}=r;let u;if(s&&!tr(s))for(const f in s){const d=s[f];(d===Number||d&&d.type===Number)&&(f in this._props&&(this._props[f]=Yg(this._props[f])),(u||(u=Object.create(null)))[ga(f)]=!0)}this._numberProps=u,i&&this._resolveProps(r),this.shadowRoot&&this._applyStyles(o),this._mount(r)},t=this._def.__asyncLoader;t?this._pendingResolve=t().then(r=>n(this._def=r,!0)):n(this._def)}_mount(n){this._app=this._createApp(n),n.configureApp&&n.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const t=this._instance&&this._instance.exposed;if(t)for(const r in t)Wi(this,r)||Object.defineProperty(this,r,{get:()=>Wn(t[r])})}_resolveProps(n){const{props:t}=n,r=tr(t)?t:Object.keys(t||{});for(const i of Object.keys(this))i[0]!=="_"&&r.includes(i)&&this._setProp(i,this[i]);for(const i of r.map(ga))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(s){this._setProp(i,s,!0,!0)}})}_setAttr(n){if(n.startsWith("data-v-"))return;const t=this.hasAttribute(n);let r=t?this.getAttribute(n):f_;const i=ga(n);t&&this._numberProps&&this._numberProps[i]&&(r=Yg(r)),this._setProp(i,r,!1,!0)}_getProp(n){return this._props[n]}_setProp(n,t,r=!0,i=!1){if(t!==this._props[n]&&(t===f_?delete this._props[n]:(this._props[n]=t,n==="key"&&this._app&&(this._app._ceVNode.key=t)),i&&this._instance&&this._update(),r)){const s=this._ob;s&&s.disconnect(),t===!0?this.setAttribute(Cl(n),""):typeof t=="string"||typeof t=="number"?this.setAttribute(Cl(n),t+""):t||this.removeAttribute(Cl(n)),s&&s.observe(this,{attributes:!0})}}_update(){J4(this._createVNode(),this._root)}_createVNode(){const n={};this.shadowRoot||(n.onVnodeMounted=n.onVnodeUpdated=this._renderSlots.bind(this));const t=pi(this._def,co(n,this._props));return this._instance||(t.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const i=(s,o)=>{this.dispatchEvent(new CustomEvent(s,M0(o[0])?co({detail:o},o[0]):{detail:o}))};r.emit=(s,...o)=>{i(s,o),Cl(s)!==s&&i(Cl(s),o)},this._setParent()}),t}_applyStyles(n,t){if(!n)return;if(t){if(t===this._def||this._styleChildren.has(t))return;this._styleChildren.add(t)}const r=this._nonce;for(let i=n.length-1;i>=0;i--){const s=document.createElement("style");r&&s.setAttribute("nonce",r),s.textContent=n[i],this.shadowRoot.prepend(s)}}_parseSlots(){const n=this._slots={};let t;for(;t=this.firstChild;){const r=t.nodeType===1&&t.getAttribute("slot")||"default";(n[r]||(n[r]=[])).push(t),this.removeChild(t)}}_renderSlots(){const n=(this._teleportTarget||this).querySelectorAll("slot"),t=this._instance.type.__scopeId;for(let r=0;r<n.length;r++){const i=n[r],s=i.getAttribute("name")||"default",o=this._slots[s],u=i.parentNode;if(o)for(const f of o){if(t&&f.nodeType===1){const d=t+"-s",g=document.createTreeWalker(f,1);f.setAttribute(d,"");let y;for(;y=g.nextNode();)y.setAttribute(d,"")}u.insertBefore(f,i)}else for(;i.firstChild;)u.insertBefore(i.firstChild,i);u.removeChild(i)}}_injectChildStyle(n){this._applyStyles(n.styles,n)}_removeChildStyle(n){}}function V4(e){const n=_u(),t=n&&n.ce;return t||null}function XA(){const e=V4();return e&&e.shadowRoot}function QA(e="$style"){{const n=_u();if(!n)return Di;const t=n.type.__cssModules;if(!t)return Di;const r=t[e];return r||Di}}const G4=new WeakMap,H4=new WeakMap,l0=Symbol("_moveCb"),h_=Symbol("_enterCb"),e6=e=>(delete e.props.mode,e),t6=e6({name:"TransitionGroup",props:co({},R4,{tag:String,moveClass:String}),setup(e,{slots:n}){const t=_u(),r=q1();let i,s;return $0(()=>{if(!i.length)return;const o=e.moveClass||`${e.name||"v"}-move`;if(!s6(i[0].el,t.vnode.el,o))return;i.forEach(r6),i.forEach(i6);const u=i.filter(o6);Hv(),u.forEach(f=>{const d=f.el,g=d.style;sc(d,o),g.transform=g.webkitTransform=g.transitionDuration="";const y=d[l0]=x=>{x&&x.target!==d||(!x||/transform$/.test(x.propertyName))&&(d.removeEventListener("transitionend",y),d[l0]=null,sf(d,o))};d.addEventListener("transitionend",y)})}),()=>{const o=Ni(e),u=F4(o);let f=o.tag||Tn;if(i=[],s)for(let d=0;d<s.length;d++){const g=s[d];g.el&&g.el instanceof Element&&(i.push(g),Uc(g,nd(g,u,r,t)),G4.set(g,g.el.getBoundingClientRect()))}s=n.default?j0(n.default()):[];for(let d=0;d<s.length;d++){const g=s[d];g.key!=null&&Uc(g,nd(g,u,r,t))}return pi(f,null,s)}}}),n6=t6;function r6(e){const n=e.el;n[l0]&&n[l0](),n[h_]&&n[h_]()}function i6(e){H4.set(e,e.el.getBoundingClientRect())}function o6(e){const n=G4.get(e),t=H4.get(e),r=n.left-t.left,i=n.top-t.top;if(r||i){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",e}}function s6(e,n,t){const r=e.cloneNode(),i=e[id];i&&i.forEach(u=>{u.split(/\s+/).forEach(f=>f&&r.classList.remove(f))}),t.split(/\s+/).forEach(u=>u&&r.classList.add(u)),r.style.display="none";const s=n.nodeType===1?n:n.parentNode;s.appendChild(r);const{hasTransform:o}=j4(r);return s.removeChild(r),o}const Sf=e=>{const n=e.props["onUpdate:modelValue"]||!1;return tr(n)?t=>Kh(n,t):n};function a6(e){e.target.composing=!0}function d_(e){const n=e.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const mu=Symbol("_assign"),ri={created(e,{modifiers:{lazy:n,trim:t,number:r}},i){e[mu]=Sf(i);const s=r||i.props&&i.props.type==="number";jc(e,n?"change":"input",o=>{if(o.target.composing)return;let u=e.value;t&&(u=u.trim()),s&&(u=Kg(u)),e[mu](u)}),t&&jc(e,"change",()=>{e.value=e.value.trim()}),n||(jc(e,"compositionstart",a6),jc(e,"compositionend",d_),jc(e,"change",d_))},mounted(e,{value:n}){e.value=n??""},beforeUpdate(e,{value:n,oldValue:t,modifiers:{lazy:r,trim:i,number:s}},o){if(e[mu]=Sf(o),e.composing)return;const u=(s||e.type==="number")&&!/^0\d/.test(e.value)?Kg(e.value):e.value,f=n??"";u!==f&&(document.activeElement===e&&e.type!=="range"&&(r&&n===t||i&&e.value.trim()===f)||(e.value=f))}},Ll={deep:!0,created(e,n,t){e[mu]=Sf(t),jc(e,"change",()=>{const r=e._modelValue,i=od(e),s=e.checked,o=e[mu];if(tr(r)){const u=T0(r,i),f=u!==-1;if(s&&!f)o(r.concat(i));else if(!s&&f){const d=[...r];d.splice(u,1),o(d)}}else if(lh(r)){const u=new Set(r);s?u.add(i):u.delete(i),o(u)}else o(q4(e,s))})},mounted:p_,beforeUpdate(e,n,t){e[mu]=Sf(t),p_(e,n,t)}};function p_(e,{value:n,oldValue:t},r){e._modelValue=n;let i;if(tr(n))i=T0(n,r.props.value)>-1;else if(lh(n))i=n.has(r.props.value);else{if(n===t)return;i=xf(n,q4(e,!0))}e.checked!==i&&(e.checked=i)}const ry={created(e,{value:n},t){e.checked=xf(n,t.props.value),e[mu]=Sf(t),jc(e,"change",()=>{e[mu](od(e))})},beforeUpdate(e,{value:n,oldValue:t},r){e[mu]=Sf(r),n!==t&&(e.checked=xf(n,r.props.value))}},uo={deep:!0,created(e,{value:n,modifiers:{number:t}},r){const i=lh(n);jc(e,"change",()=>{const s=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>t?Kg(od(o)):od(o));e[mu](e.multiple?i?new Set(s):s:s[0]),e._assigning=!0,zs(()=>{e._assigning=!1})}),e[mu]=Sf(r)},mounted(e,{value:n}){g_(e,n)},beforeUpdate(e,n,t){e[mu]=Sf(t)},updated(e,{value:n}){e._assigning||g_(e,n)}};function g_(e,n){const t=e.multiple,r=tr(n);if(!(t&&!r&&!lh(n))){for(let i=0,s=e.options.length;i<s;i++){const o=e.options[i],u=od(o);if(t)if(r){const f=typeof u;f==="string"||f==="number"?o.selected=n.some(d=>String(d)===String(u)):o.selected=T0(n,u)>-1}else o.selected=n.has(u);else if(xf(od(o),n)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!t&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function od(e){return"_value"in e?e._value:e.value}function q4(e,n){const t=n?"_trueValue":"_falseValue";return t in e?e[t]:n}const iy={created(e,n,t){vg(e,n,t,null,"created")},mounted(e,n,t){vg(e,n,t,null,"mounted")},beforeUpdate(e,n,t,r){vg(e,n,t,r,"beforeUpdate")},updated(e,n,t,r){vg(e,n,t,r,"updated")}};function W4(e,n){switch(e){case"SELECT":return uo;case"TEXTAREA":return ri;default:switch(n){case"checkbox":return Ll;case"radio":return ry;default:return ri}}}function vg(e,n,t,r,i){const o=W4(e.tagName,t.props&&t.props.type)[i];o&&o(e,n,t,r)}function l6(){ri.getSSRProps=({value:e})=>({value:e}),ry.getSSRProps=({value:e},n)=>{if(n.props&&xf(n.props.value,e))return{checked:!0}},Ll.getSSRProps=({value:e},n)=>{if(tr(e)){if(n.props&&T0(e,n.props.value)>-1)return{checked:!0}}else if(lh(e)){if(n.props&&e.has(n.props.value))return{checked:!0}}else if(e)return{checked:!0}},iy.getSSRProps=(e,n)=>{if(typeof n.type!="string")return;const t=W4(n.type.toUpperCase(),n.props&&n.props.type);if(t.getSSRProps)return t.getSSRProps(e,n)}}const u6=["ctrl","shift","alt","meta"],c6={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,n)=>u6.some(t=>e[`${t}Key`]&&!n.includes(t))},Cf=(e,n)=>{const t=e._withMods||(e._withMods={}),r=n.join(".");return t[r]||(t[r]=(i,...s)=>{for(let o=0;o<n.length;o++){const u=c6[n[o]];if(u&&u(i,n))return}return e(i,...s)})},f6={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},h6=(e,n)=>{const t=e._withKeys||(e._withKeys={}),r=n.join(".");return t[r]||(t[r]=i=>{if(!("key"in i))return;const s=Cl(i.key);if(n.some(o=>o===s||f6[o]===s))return e(i)})},Z4=co({patchProp:ZA},TA);let tp,m_=!1;function K4(){return tp||(tp=c4(Z4))}function Y4(){return tp=m_?tp:f4(Z4),m_=!0,tp}const J4=(...e)=>{K4().render(...e)},d6=(...e)=>{Y4().hydrate(...e)},u0=(...e)=>{const n=K4().createApp(...e),{mount:t}=n;return n.mount=r=>{const i=e5(r);if(!i)return;const s=n._component;!Tr(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=t(i,!1,Q4(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},n},X4=(...e)=>{const n=Y4().createApp(...e),{mount:t}=n;return n.mount=r=>{const i=e5(r);if(i)return t(i,!0,Q4(i))},n};function Q4(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function e5(e){return _o(e)?document.querySelector(e):e}let v_=!1;const p6=()=>{v_||(v_=!0,l6(),BA())};/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const g6=()=>{},m6=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:jw,BaseTransitionPropsValidators:W1,Comment:Ds,DeprecationTypes:MA,EffectScope:B1,ErrorCodes:$P,ErrorTypeStrings:wA,Fragment:Tn,KeepAlive:hM,ReactiveEffect:dp,Static:th,Suspense:rA,Teleport:kv,Text:bf,TrackOpTypes:IP,Transition:Gv,TransitionGroup:n6,TriggerOpTypes:OP,VueElement:q0,assertNumber:zP,callWithAsyncErrorHandling:vu,callWithErrorHandling:hd,camelize:ga,capitalize:Ap,cloneVNode:vc,compatUtils:PA,compile:g6,computed:cr,createApp:u0,createBlock:rl,createCommentVNode:cn,createElementBlock:He,createElementVNode:E,createHydrationRenderer:f4,createPropsRestProxy:NM,createRenderer:c4,createSSRApp:X4,createSlots:vM,createStaticVNode:zu,createTextVNode:Ei,createVNode:pi,customRef:Sw,defineAsyncComponent:cM,defineComponent:cs,defineCustomElement:U4,defineEmits:xM,defineExpose:LM,defineModel:EM,defineOptions:SM,defineProps:wM,defineSSRCustomElement:YA,defineSlots:CM,devtools:xA,effect:rP,effectScope:R1,getCurrentInstance:_u,getCurrentScope:F1,getCurrentWatcher:BP,getTransitionRawChildren:j0,guardReactiveProps:E4,h:G0,handleError:uh,hasInjectionContext:e4,hydrate:d6,hydrateOnIdle:iM,hydrateOnInteraction:lM,hydrateOnMediaQuery:aM,hydrateOnVisible:sM,initCustomFormatter:yA,initDirectivesForSSR:p6,inject:Wl,isMemoSame:D4,isProxy:B0,isReactive:dc,isReadonly:Lf,isRef:Xo,isRuntimeOnly:gA,isShallow:ql,isVNode:Vc,markRaw:R0,mergeDefaults:kM,mergeModels:TM,mergeProps:P4,nextTick:zs,normalizeClass:Fi,normalizeProps:XE,normalizeStyle:Hl,onActivated:$w,onBeforeMount:Gw,onBeforeUnmount:ch,onBeforeUpdate:K1,onDeactivated:Uw,onErrorCaptured:Zw,onMounted:Is,onRenderTracked:Ww,onRenderTriggered:qw,onScopeDispose:aw,onServerPrefetch:Hw,onUnmounted:mc,onUpdated:$0,onWatcherCleanup:Pw,openBlock:$e,popScopeId:qP,provide:Qd,proxyRefs:G1,pushScopeId:HP,queuePostFlushCb:mp,reactive:Kl,readonly:Bu,ref:jt,registerRuntimeCompiler:pA,render:J4,renderList:xr,renderSlot:yM,resolveComponent:Kw,resolveDirective:mM,resolveDynamicComponent:gM,resolveFilter:EA,resolveTransitionHooks:nd,setBlockTracking:Rv,setDevtoolsHook:LA,setTransitionHooks:Uc,shallowReactive:U1,shallowReadonly:LP,shallowRef:V1,ssrContextKey:g4,ssrUtils:CA,stop:iP,toDisplayString:Wt,toHandlerKey:Zd,toHandlers:_M,toRaw:Ni,toRef:TP,toRefs:Cw,toValue:EP,transformVNodeArgs:uA,triggerRef:CP,unref:Wn,useAttrs:AM,useCssModule:QA,useCssVars:RA,useHost:V4,useId:YP,useModel:YM,useSSRContext:m4,useShadowRoot:XA,useSlots:MM,useTemplateRef:JP,useTransitionState:q1,vModelCheckbox:Ll,vModelDynamic:iy,vModelRadio:ry,vModelSelect:uo,vModelText:ri,vShow:H0,version:I4,warn:bA,watch:Co,watchEffect:wp,watchPostEffect:ZM,watchSyncEffect:v4,withAsyncContext:DM,withCtx:pu,withDefaults:PM,withDirectives:Fn,withKeys:h6,withMemo:_A,withModifiers:Cf,withScopeId:WP},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let t5;const W0=e=>t5=e,n5=Symbol();function Wv(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var np;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(np||(np={}));function v6(){const e=R1(!0),n=e.run(()=>jt({}));let t=[],r=[];const i=R0({install(s){W0(i),i._a=s,s.provide(n5,i),s.config.globalProperties.$pinia=i,r.forEach(o=>t.push(o)),r=[]},use(s){return this._a?t.push(s):r.push(s),this},_p:t,_a:null,_e:e,_s:new Map,state:n});return i}const r5=()=>{};function y_(e,n,t,r=r5){e.push(n);const i=()=>{const s=e.indexOf(n);s>-1&&(e.splice(s,1),r())};return!t&&F1()&&aw(i),i}function kh(e,...n){e.slice().forEach(t=>{t(...n)})}const y6=e=>e(),__=Symbol(),Wm=Symbol();function Zv(e,n){e instanceof Map&&n instanceof Map?n.forEach((t,r)=>e.set(r,t)):e instanceof Set&&n instanceof Set&&n.forEach(e.add,e);for(const t in n){if(!n.hasOwnProperty(t))continue;const r=n[t],i=e[t];Wv(i)&&Wv(r)&&e.hasOwnProperty(t)&&!Xo(r)&&!dc(r)?e[t]=Zv(i,r):e[t]=r}return e}const _6=Symbol();function b6(e){return!Wv(e)||!e.hasOwnProperty(_6)}const{assign:af}=Object;function w6(e){return!!(Xo(e)&&e.effect)}function x6(e,n,t,r){const{state:i,actions:s,getters:o}=n,u=t.state.value[e];let f;function d(){u||(t.state.value[e]=i?i():{});const g=Cw(t.state.value[e]);return af(g,s,Object.keys(o||{}).reduce((y,x)=>(y[x]=R0(cr(()=>{W0(t);const _=t._s.get(e);return o[x].call(_,_)})),y),{}))}return f=i5(e,d,n,t,r,!0),f}function i5(e,n,t={},r,i,s){let o;const u=af({actions:{}},t),f={deep:!0};let d,g,y=[],x=[],_;const M=r.state.value[e];!s&&!M&&(r.state.value[e]={}),jt({});let k;function N(G){let $;d=g=!1,typeof G=="function"?(G(r.state.value[e]),$={type:np.patchFunction,storeId:e,events:_}):(Zv(r.state.value[e],G),$={type:np.patchObject,payload:G,storeId:e,events:_});const X=k=Symbol();zs().then(()=>{k===X&&(d=!0)}),g=!0,kh(y,$,r.state.value[e])}const T=s?function(){const{state:$}=t,X=$?$():{};this.$patch(R=>{af(R,X)})}:r5;function F(){o.stop(),y=[],x=[],r._s.delete(e)}const K=(G,$="")=>{if(__ in G)return G[Wm]=$,G;const X=function(){W0(r);const R=Array.from(arguments),O=[],B=[];function z(oe){O.push(oe)}function W(oe){B.push(oe)}kh(x,{args:R,name:X[Wm],store:he,after:z,onError:W});let V;try{V=G.apply(this&&this.$id===e?this:he,R)}catch(oe){throw kh(B,oe),oe}return V instanceof Promise?V.then(oe=>(kh(O,oe),oe)).catch(oe=>(kh(B,oe),Promise.reject(oe))):(kh(O,V),V)};return X[__]=!0,X[Wm]=$,X},Q={_p:r,$id:e,$onAction:y_.bind(null,x),$patch:N,$reset:T,$subscribe(G,$={}){const X=y_(y,G,$.detached,()=>R()),R=o.run(()=>Co(()=>r.state.value[e],O=>{($.flush==="sync"?g:d)&&G({storeId:e,type:np.direct,events:_},O)},af({},f,$)));return X},$dispose:F},he=Kl(Q);r._s.set(e,he);const me=(r._a&&r._a.runWithContext||y6)(()=>r._e.run(()=>(o=R1()).run(()=>n({action:K}))));for(const G in me){const $=me[G];if(Xo($)&&!w6($)||dc($))s||(M&&b6($)&&(Xo($)?$.value=M[G]:Zv($,M[G])),r.state.value[e][G]=$);else if(typeof $=="function"){const X=K($,G);me[G]=X,u.actions[G]=$}}return af(he,me),af(Ni(he),me),Object.defineProperty(he,"$state",{get:()=>r.state.value[e],set:G=>{N($=>{af($,G)})}}),r._p.forEach(G=>{af(he,o.run(()=>G({store:he,app:r._a,pinia:r,options:u})))}),M&&s&&t.hydrate&&t.hydrate(he.$state,M),d=!0,g=!0,he}/*! #__NO_SIDE_EFFECTS__ */function Dp(e,n,t){let r,i;const s=typeof n=="function";typeof e=="string"?(r=e,i=s?t:n):(i=e,r=e.id);function o(u,f){const d=e4();return u=u||(d?Wl(n5,null):null),u&&W0(u),u=t5,u._s.has(r)||(s?i5(r,n,i,u):x6(r,i,u)),u._s.get(r)}return o.$id=r,o}function o5(e,n){return function(){return e.apply(n,arguments)}}const{toString:L6}=Object.prototype,{getPrototypeOf:oy}=Object,Z0=(e=>n=>{const t=L6.call(n);return e[t]||(e[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Wu=e=>(e=e.toLowerCase(),n=>Z0(n)===e),K0=e=>n=>typeof n===e,{isArray:dd}=Array,Lp=K0("undefined");function S6(e){return e!==null&&!Lp(e)&&e.constructor!==null&&!Lp(e.constructor)&&Zl(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const s5=Wu("ArrayBuffer");function C6(e){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(e):n=e&&e.buffer&&s5(e.buffer),n}const E6=K0("string"),Zl=K0("function"),a5=K0("number"),Y0=e=>e!==null&&typeof e=="object",P6=e=>e===!0||e===!1,Ig=e=>{if(Z0(e)!=="object")return!1;const n=oy(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},M6=Wu("Date"),A6=Wu("File"),k6=Wu("Blob"),T6=Wu("FileList"),N6=e=>Y0(e)&&Zl(e.pipe),D6=e=>{let n;return e&&(typeof FormData=="function"&&e instanceof FormData||Zl(e.append)&&((n=Z0(e))==="formdata"||n==="object"&&Zl(e.toString)&&e.toString()==="[object FormData]"))},I6=Wu("URLSearchParams"),[O6,B6,R6,F6]=["ReadableStream","Request","Response","Headers"].map(Wu),j6=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ip(e,n,{allOwnKeys:t=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),dd(e))for(r=0,i=e.length;r<i;r++)n.call(null,e[r],r,e);else{const s=t?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;let u;for(r=0;r<o;r++)u=s[r],n.call(null,e[u],u,e)}}function l5(e,n){n=n.toLowerCase();const t=Object.keys(e);let r=t.length,i;for(;r-- >0;)if(i=t[r],n===i.toLowerCase())return i;return null}const Jf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,u5=e=>!Lp(e)&&e!==Jf;function Kv(){const{caseless:e}=u5(this)&&this||{},n={},t=(r,i)=>{const s=e&&l5(n,i)||i;Ig(n[s])&&Ig(r)?n[s]=Kv(n[s],r):Ig(r)?n[s]=Kv({},r):dd(r)?n[s]=r.slice():n[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Ip(arguments[r],t);return n}const z6=(e,n,t,{allOwnKeys:r}={})=>(Ip(n,(i,s)=>{t&&Zl(i)?e[s]=o5(i,t):e[s]=i},{allOwnKeys:r}),e),$6=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),U6=(e,n,t,r)=>{e.prototype=Object.create(n.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:n.prototype}),t&&Object.assign(e.prototype,t)},V6=(e,n,t,r)=>{let i,s,o;const u={};if(n=n||{},e==null)return n;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],(!r||r(o,e,n))&&!u[o]&&(n[o]=e[o],u[o]=!0);e=t!==!1&&oy(e)}while(e&&(!t||t(e,n))&&e!==Object.prototype);return n},G6=(e,n,t)=>{e=String(e),(t===void 0||t>e.length)&&(t=e.length),t-=n.length;const r=e.indexOf(n,t);return r!==-1&&r===t},H6=e=>{if(!e)return null;if(dd(e))return e;let n=e.length;if(!a5(n))return null;const t=new Array(n);for(;n-- >0;)t[n]=e[n];return t},q6=(e=>n=>e&&n instanceof e)(typeof Uint8Array<"u"&&oy(Uint8Array)),W6=(e,n)=>{const r=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=r.next())&&!i.done;){const s=i.value;n.call(e,s[0],s[1])}},Z6=(e,n)=>{let t;const r=[];for(;(t=e.exec(n))!==null;)r.push(t);return r},K6=Wu("HTMLFormElement"),Y6=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),b_=(({hasOwnProperty:e})=>(n,t)=>e.call(n,t))(Object.prototype),J6=Wu("RegExp"),c5=(e,n)=>{const t=Object.getOwnPropertyDescriptors(e),r={};Ip(t,(i,s)=>{let o;(o=n(i,s,e))!==!1&&(r[s]=o||i)}),Object.defineProperties(e,r)},X6=e=>{c5(e,(n,t)=>{if(Zl(e)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=e[t];if(Zl(r)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},Q6=(e,n)=>{const t={},r=i=>{i.forEach(s=>{t[s]=!0})};return dd(e)?r(e):r(String(e).split(n)),t},ek=()=>{},tk=(e,n)=>e!=null&&Number.isFinite(e=+e)?e:n;function nk(e){return!!(e&&Zl(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const rk=e=>{const n=new Array(10),t=(r,i)=>{if(Y0(r)){if(n.indexOf(r)>=0)return;if(!("toJSON"in r)){n[i]=r;const s=dd(r)?[]:{};return Ip(r,(o,u)=>{const f=t(o,i+1);!Lp(f)&&(s[u]=f)}),n[i]=void 0,s}}return r};return t(e,0)},ik=Wu("AsyncFunction"),ok=e=>e&&(Y0(e)||Zl(e))&&Zl(e.then)&&Zl(e.catch),f5=((e,n)=>e?setImmediate:n?((t,r)=>(Jf.addEventListener("message",({source:i,data:s})=>{i===Jf&&s===t&&r.length&&r.shift()()},!1),i=>{r.push(i),Jf.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Zl(Jf.postMessage)),sk=typeof queueMicrotask<"u"?queueMicrotask.bind(Jf):typeof process<"u"&&process.nextTick||f5,Jt={isArray:dd,isArrayBuffer:s5,isBuffer:S6,isFormData:D6,isArrayBufferView:C6,isString:E6,isNumber:a5,isBoolean:P6,isObject:Y0,isPlainObject:Ig,isReadableStream:O6,isRequest:B6,isResponse:R6,isHeaders:F6,isUndefined:Lp,isDate:M6,isFile:A6,isBlob:k6,isRegExp:J6,isFunction:Zl,isStream:N6,isURLSearchParams:I6,isTypedArray:q6,isFileList:T6,forEach:Ip,merge:Kv,extend:z6,trim:j6,stripBOM:$6,inherits:U6,toFlatObject:V6,kindOf:Z0,kindOfTest:Wu,endsWith:G6,toArray:H6,forEachEntry:W6,matchAll:Z6,isHTMLForm:K6,hasOwnProperty:b_,hasOwnProp:b_,reduceDescriptors:c5,freezeMethods:X6,toObjectSet:Q6,toCamelCase:Y6,noop:ek,toFiniteNumber:tk,findKey:l5,global:Jf,isContextDefined:u5,isSpecCompliantForm:nk,toJSONObject:rk,isAsyncFn:ik,isThenable:ok,setImmediate:f5,asap:sk};function oi(e,n,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",n&&(this.code=n),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Jt.inherits(oi,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Jt.toJSONObject(this.config),code:this.code,status:this.status}}});const h5=oi.prototype,d5={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{d5[e]={value:e}});Object.defineProperties(oi,d5);Object.defineProperty(h5,"isAxiosError",{value:!0});oi.from=(e,n,t,r,i,s)=>{const o=Object.create(h5);return Jt.toFlatObject(e,o,function(f){return f!==Error.prototype},u=>u!=="isAxiosError"),oi.call(o,e.message,n,t,r,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const ak=null;function Yv(e){return Jt.isPlainObject(e)||Jt.isArray(e)}function p5(e){return Jt.endsWith(e,"[]")?e.slice(0,-2):e}function w_(e,n,t){return e?e.concat(n).map(function(i,s){return i=p5(i),!t&&s?"["+i+"]":i}).join(t?".":""):n}function lk(e){return Jt.isArray(e)&&!e.some(Yv)}const uk=Jt.toFlatObject(Jt,{},null,function(n){return/^is[A-Z]/.test(n)});function J0(e,n,t){if(!Jt.isObject(e))throw new TypeError("target must be an object");n=n||new FormData,t=Jt.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(k,N){return!Jt.isUndefined(N[k])});const r=t.metaTokens,i=t.visitor||g,s=t.dots,o=t.indexes,f=(t.Blob||typeof Blob<"u"&&Blob)&&Jt.isSpecCompliantForm(n);if(!Jt.isFunction(i))throw new TypeError("visitor must be a function");function d(M){if(M===null)return"";if(Jt.isDate(M))return M.toISOString();if(!f&&Jt.isBlob(M))throw new oi("Blob is not supported. Use a Buffer instead.");return Jt.isArrayBuffer(M)||Jt.isTypedArray(M)?f&&typeof Blob=="function"?new Blob([M]):Buffer.from(M):M}function g(M,k,N){let T=M;if(M&&!N&&typeof M=="object"){if(Jt.endsWith(k,"{}"))k=r?k:k.slice(0,-2),M=JSON.stringify(M);else if(Jt.isArray(M)&&lk(M)||(Jt.isFileList(M)||Jt.endsWith(k,"[]"))&&(T=Jt.toArray(M)))return k=p5(k),T.forEach(function(K,Q){!(Jt.isUndefined(K)||K===null)&&n.append(o===!0?w_([k],Q,s):o===null?k:k+"[]",d(K))}),!1}return Yv(M)?!0:(n.append(w_(N,k,s),d(M)),!1)}const y=[],x=Object.assign(uk,{defaultVisitor:g,convertValue:d,isVisitable:Yv});function _(M,k){if(!Jt.isUndefined(M)){if(y.indexOf(M)!==-1)throw Error("Circular reference detected in "+k.join("."));y.push(M),Jt.forEach(M,function(T,F){(!(Jt.isUndefined(T)||T===null)&&i.call(n,T,Jt.isString(F)?F.trim():F,k,x))===!0&&_(T,k?k.concat(F):[F])}),y.pop()}}if(!Jt.isObject(e))throw new TypeError("data must be an object");return _(e),n}function x_(e){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return n[r]})}function sy(e,n){this._pairs=[],e&&J0(e,this,n)}const g5=sy.prototype;g5.append=function(n,t){this._pairs.push([n,t])};g5.toString=function(n){const t=n?function(r){return n.call(this,r,x_)}:x_;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function ck(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function m5(e,n,t){if(!n)return e;const r=t&&t.encode||ck;Jt.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let s;if(i?s=i(n,t):s=Jt.isURLSearchParams(n)?n.toString():new sy(n,t).toString(r),s){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class L_{constructor(){this.handlers=[]}use(n,t,r){return this.handlers.push({fulfilled:n,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){Jt.forEach(this.handlers,function(r){r!==null&&n(r)})}}const v5={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},fk=typeof URLSearchParams<"u"?URLSearchParams:sy,hk=typeof FormData<"u"?FormData:null,dk=typeof Blob<"u"?Blob:null,pk={isBrowser:!0,classes:{URLSearchParams:fk,FormData:hk,Blob:dk},protocols:["http","https","file","blob","url","data"]},ay=typeof window<"u"&&typeof document<"u",Jv=typeof navigator=="object"&&navigator||void 0,gk=ay&&(!Jv||["ReactNative","NativeScript","NS"].indexOf(Jv.product)<0),mk=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",vk=ay&&window.location.href||"http://localhost",yk=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ay,hasStandardBrowserEnv:gk,hasStandardBrowserWebWorkerEnv:mk,navigator:Jv,origin:vk},Symbol.toStringTag,{value:"Module"})),Ra={...yk,...pk};function _k(e,n){return J0(e,new Ra.classes.URLSearchParams,Object.assign({visitor:function(t,r,i,s){return Ra.isNode&&Jt.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},n))}function bk(e){return Jt.matchAll(/\w+|\[(\w*)]/g,e).map(n=>n[0]==="[]"?"":n[1]||n[0])}function wk(e){const n={},t=Object.keys(e);let r;const i=t.length;let s;for(r=0;r<i;r++)s=t[r],n[s]=e[s];return n}function y5(e){function n(t,r,i,s){let o=t[s++];if(o==="__proto__")return!0;const u=Number.isFinite(+o),f=s>=t.length;return o=!o&&Jt.isArray(i)?i.length:o,f?(Jt.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!u):((!i[o]||!Jt.isObject(i[o]))&&(i[o]=[]),n(t,r,i[o],s)&&Jt.isArray(i[o])&&(i[o]=wk(i[o])),!u)}if(Jt.isFormData(e)&&Jt.isFunction(e.entries)){const t={};return Jt.forEachEntry(e,(r,i)=>{n(bk(r),i,t,0)}),t}return null}function xk(e,n,t){if(Jt.isString(e))try{return(n||JSON.parse)(e),Jt.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(e)}const Op={transitional:v5,adapter:["xhr","http","fetch"],transformRequest:[function(n,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,s=Jt.isObject(n);if(s&&Jt.isHTMLForm(n)&&(n=new FormData(n)),Jt.isFormData(n))return i?JSON.stringify(y5(n)):n;if(Jt.isArrayBuffer(n)||Jt.isBuffer(n)||Jt.isStream(n)||Jt.isFile(n)||Jt.isBlob(n)||Jt.isReadableStream(n))return n;if(Jt.isArrayBufferView(n))return n.buffer;if(Jt.isURLSearchParams(n))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let u;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return _k(n,this.formSerializer).toString();if((u=Jt.isFileList(n))||r.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return J0(u?{"files[]":n}:n,f&&new f,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),xk(n)):n}],transformResponse:[function(n){const t=this.transitional||Op.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(Jt.isResponse(n)||Jt.isReadableStream(n))return n;if(n&&Jt.isString(n)&&(r&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(n)}catch(u){if(o)throw u.name==="SyntaxError"?oi.from(u,oi.ERR_BAD_RESPONSE,this,null,this.response):u}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ra.classes.FormData,Blob:Ra.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Jt.forEach(["delete","get","head","post","put","patch"],e=>{Op.headers[e]={}});const Lk=Jt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Sk=e=>{const n={};let t,r,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!t||n[t]&&Lk[t])&&(t==="set-cookie"?n[t]?n[t].push(r):n[t]=[r]:n[t]=n[t]?n[t]+", "+r:r)}),n},S_=Symbol("internals");function Pd(e){return e&&String(e).trim().toLowerCase()}function Og(e){return e===!1||e==null?e:Jt.isArray(e)?e.map(Og):String(e)}function Ck(e){const n=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(e);)n[r[1]]=r[2];return n}const Ek=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Zm(e,n,t,r,i){if(Jt.isFunction(r))return r.call(this,n,t);if(i&&(n=t),!!Jt.isString(n)){if(Jt.isString(r))return n.indexOf(r)!==-1;if(Jt.isRegExp(r))return r.test(n)}}function Pk(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,t,r)=>t.toUpperCase()+r)}function Mk(e,n){const t=Jt.toCamelCase(" "+n);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+t,{value:function(i,s,o){return this[r].call(this,n,i,s,o)},configurable:!0})})}let El=class{constructor(n){n&&this.set(n)}set(n,t,r){const i=this;function s(u,f,d){const g=Pd(f);if(!g)throw new Error("header name must be a non-empty string");const y=Jt.findKey(i,g);(!y||i[y]===void 0||d===!0||d===void 0&&i[y]!==!1)&&(i[y||f]=Og(u))}const o=(u,f)=>Jt.forEach(u,(d,g)=>s(d,g,f));if(Jt.isPlainObject(n)||n instanceof this.constructor)o(n,t);else if(Jt.isString(n)&&(n=n.trim())&&!Ek(n))o(Sk(n),t);else if(Jt.isHeaders(n))for(const[u,f]of n.entries())s(f,u,r);else n!=null&&s(t,n,r);return this}get(n,t){if(n=Pd(n),n){const r=Jt.findKey(this,n);if(r){const i=this[r];if(!t)return i;if(t===!0)return Ck(i);if(Jt.isFunction(t))return t.call(this,i,r);if(Jt.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,t){if(n=Pd(n),n){const r=Jt.findKey(this,n);return!!(r&&this[r]!==void 0&&(!t||Zm(this,this[r],r,t)))}return!1}delete(n,t){const r=this;let i=!1;function s(o){if(o=Pd(o),o){const u=Jt.findKey(r,o);u&&(!t||Zm(r,r[u],u,t))&&(delete r[u],i=!0)}}return Jt.isArray(n)?n.forEach(s):s(n),i}clear(n){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const s=t[r];(!n||Zm(this,this[s],s,n,!0))&&(delete this[s],i=!0)}return i}normalize(n){const t=this,r={};return Jt.forEach(this,(i,s)=>{const o=Jt.findKey(r,s);if(o){t[o]=Og(i),delete t[s];return}const u=n?Pk(s):String(s).trim();u!==s&&delete t[s],t[u]=Og(i),r[u]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const t=Object.create(null);return Jt.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=n&&Jt.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,t])=>n+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...t){const r=new this(n);return t.forEach(i=>r.set(i)),r}static accessor(n){const r=(this[S_]=this[S_]={accessors:{}}).accessors,i=this.prototype;function s(o){const u=Pd(o);r[u]||(Mk(i,o),r[u]=!0)}return Jt.isArray(n)?n.forEach(s):s(n),this}};El.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Jt.reduceDescriptors(El.prototype,({value:e},n)=>{let t=n[0].toUpperCase()+n.slice(1);return{get:()=>e,set(r){this[t]=r}}});Jt.freezeMethods(El);function Km(e,n){const t=this||Op,r=n||t,i=El.from(r.headers);let s=r.data;return Jt.forEach(e,function(u){s=u.call(t,s,i.normalize(),n?n.status:void 0)}),i.normalize(),s}function _5(e){return!!(e&&e.__CANCEL__)}function pd(e,n,t){oi.call(this,e??"canceled",oi.ERR_CANCELED,n,t),this.name="CanceledError"}Jt.inherits(pd,oi,{__CANCEL__:!0});function b5(e,n,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?e(t):n(new oi("Request failed with status code "+t.status,[oi.ERR_BAD_REQUEST,oi.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function Ak(e){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}function kk(e,n){e=e||10;const t=new Array(e),r=new Array(e);let i=0,s=0,o;return n=n!==void 0?n:1e3,function(f){const d=Date.now(),g=r[s];o||(o=d),t[i]=f,r[i]=d;let y=s,x=0;for(;y!==i;)x+=t[y++],y=y%e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),d-o<n)return;const _=g&&d-g;return _?Math.round(x*1e3/_):void 0}}function Tk(e,n){let t=0,r=1e3/n,i,s;const o=(d,g=Date.now())=>{t=g,i=null,s&&(clearTimeout(s),s=null),e.apply(null,d)};return[(...d)=>{const g=Date.now(),y=g-t;y>=r?o(d,g):(i=d,s||(s=setTimeout(()=>{s=null,o(i)},r-y)))},()=>i&&o(i)]}const c0=(e,n,t=3)=>{let r=0;const i=kk(50,250);return Tk(s=>{const o=s.loaded,u=s.lengthComputable?s.total:void 0,f=o-r,d=i(f),g=o<=u;r=o;const y={loaded:o,total:u,progress:u?o/u:void 0,bytes:f,rate:d||void 0,estimated:d&&u&&g?(u-o)/d:void 0,event:s,lengthComputable:u!=null,[n?"download":"upload"]:!0};e(y)},t)},C_=(e,n)=>{const t=e!=null;return[r=>n[0]({lengthComputable:t,total:e,loaded:r}),n[1]]},E_=e=>(...n)=>Jt.asap(()=>e(...n)),Nk=Ra.hasStandardBrowserEnv?((e,n)=>t=>(t=new URL(t,Ra.origin),e.protocol===t.protocol&&e.host===t.host&&(n||e.port===t.port)))(new URL(Ra.origin),Ra.navigator&&/(msie|trident)/i.test(Ra.navigator.userAgent)):()=>!0,Dk=Ra.hasStandardBrowserEnv?{write(e,n,t,r,i,s){const o=[e+"="+encodeURIComponent(n)];Jt.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),Jt.isString(r)&&o.push("path="+r),Jt.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Ik(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Ok(e,n){return n?e.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):e}function w5(e,n,t){let r=!Ik(n);return e&&(r||t==!1)?Ok(e,n):n}const P_=e=>e instanceof El?{...e}:e;function ah(e,n){n=n||{};const t={};function r(d,g,y,x){return Jt.isPlainObject(d)&&Jt.isPlainObject(g)?Jt.merge.call({caseless:x},d,g):Jt.isPlainObject(g)?Jt.merge({},g):Jt.isArray(g)?g.slice():g}function i(d,g,y,x){if(Jt.isUndefined(g)){if(!Jt.isUndefined(d))return r(void 0,d,y,x)}else return r(d,g,y,x)}function s(d,g){if(!Jt.isUndefined(g))return r(void 0,g)}function o(d,g){if(Jt.isUndefined(g)){if(!Jt.isUndefined(d))return r(void 0,d)}else return r(void 0,g)}function u(d,g,y){if(y in n)return r(d,g);if(y in e)return r(void 0,d)}const f={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u,headers:(d,g,y)=>i(P_(d),P_(g),y,!0)};return Jt.forEach(Object.keys(Object.assign({},e,n)),function(g){const y=f[g]||i,x=y(e[g],n[g],g);Jt.isUndefined(x)&&y!==u||(t[g]=x)}),t}const x5=e=>{const n=ah({},e);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:u}=n;n.headers=o=El.from(o),n.url=m5(w5(n.baseURL,n.url,n.allowAbsoluteUrls),e.params,e.paramsSerializer),u&&o.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let f;if(Jt.isFormData(t)){if(Ra.hasStandardBrowserEnv||Ra.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((f=o.getContentType())!==!1){const[d,...g]=f?f.split(";").map(y=>y.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...g].join("; "))}}if(Ra.hasStandardBrowserEnv&&(r&&Jt.isFunction(r)&&(r=r(n)),r||r!==!1&&Nk(n.url))){const d=i&&s&&Dk.read(s);d&&o.set(i,d)}return n},Bk=typeof XMLHttpRequest<"u",Rk=Bk&&function(e){return new Promise(function(t,r){const i=x5(e);let s=i.data;const o=El.from(i.headers).normalize();let{responseType:u,onUploadProgress:f,onDownloadProgress:d}=i,g,y,x,_,M;function k(){_&&_(),M&&M(),i.cancelToken&&i.cancelToken.unsubscribe(g),i.signal&&i.signal.removeEventListener("abort",g)}let N=new XMLHttpRequest;N.open(i.method.toUpperCase(),i.url,!0),N.timeout=i.timeout;function T(){if(!N)return;const K=El.from("getAllResponseHeaders"in N&&N.getAllResponseHeaders()),he={data:!u||u==="text"||u==="json"?N.responseText:N.response,status:N.status,statusText:N.statusText,headers:K,config:e,request:N};b5(function(me){t(me),k()},function(me){r(me),k()},he),N=null}"onloadend"in N?N.onloadend=T:N.onreadystatechange=function(){!N||N.readyState!==4||N.status===0&&!(N.responseURL&&N.responseURL.indexOf("file:")===0)||setTimeout(T)},N.onabort=function(){N&&(r(new oi("Request aborted",oi.ECONNABORTED,e,N)),N=null)},N.onerror=function(){r(new oi("Network Error",oi.ERR_NETWORK,e,N)),N=null},N.ontimeout=function(){let Q=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const he=i.transitional||v5;i.timeoutErrorMessage&&(Q=i.timeoutErrorMessage),r(new oi(Q,he.clarifyTimeoutError?oi.ETIMEDOUT:oi.ECONNABORTED,e,N)),N=null},s===void 0&&o.setContentType(null),"setRequestHeader"in N&&Jt.forEach(o.toJSON(),function(Q,he){N.setRequestHeader(he,Q)}),Jt.isUndefined(i.withCredentials)||(N.withCredentials=!!i.withCredentials),u&&u!=="json"&&(N.responseType=i.responseType),d&&([x,M]=c0(d,!0),N.addEventListener("progress",x)),f&&N.upload&&([y,_]=c0(f),N.upload.addEventListener("progress",y),N.upload.addEventListener("loadend",_)),(i.cancelToken||i.signal)&&(g=K=>{N&&(r(!K||K.type?new pd(null,e,N):K),N.abort(),N=null)},i.cancelToken&&i.cancelToken.subscribe(g),i.signal&&(i.signal.aborted?g():i.signal.addEventListener("abort",g)));const F=Ak(i.url);if(F&&Ra.protocols.indexOf(F)===-1){r(new oi("Unsupported protocol "+F+":",oi.ERR_BAD_REQUEST,e));return}N.send(s||null)})},Fk=(e,n)=>{const{length:t}=e=e?e.filter(Boolean):[];if(n||t){let r=new AbortController,i;const s=function(d){if(!i){i=!0,u();const g=d instanceof Error?d:this.reason;r.abort(g instanceof oi?g:new pd(g instanceof Error?g.message:g))}};let o=n&&setTimeout(()=>{o=null,s(new oi(`timeout ${n} of ms exceeded`,oi.ETIMEDOUT))},n);const u=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(s):d.removeEventListener("abort",s)}),e=null)};e.forEach(d=>d.addEventListener("abort",s));const{signal:f}=r;return f.unsubscribe=()=>Jt.asap(u),f}},jk=function*(e,n){let t=e.byteLength;if(t<n){yield e;return}let r=0,i;for(;r<t;)i=r+n,yield e.slice(r,i),r=i},zk=async function*(e,n){for await(const t of $k(e))yield*jk(t,n)},$k=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const n=e.getReader();try{for(;;){const{done:t,value:r}=await n.read();if(t)break;yield r}}finally{await n.cancel()}},M_=(e,n,t,r)=>{const i=zk(e,n);let s=0,o,u=f=>{o||(o=!0,r&&r(f))};return new ReadableStream({async pull(f){try{const{done:d,value:g}=await i.next();if(d){u(),f.close();return}let y=g.byteLength;if(t){let x=s+=y;t(x)}f.enqueue(new Uint8Array(g))}catch(d){throw u(d),d}},cancel(f){return u(f),i.return()}},{highWaterMark:2})},X0=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",L5=X0&&typeof ReadableStream=="function",Uk=X0&&(typeof TextEncoder=="function"?(e=>n=>e.encode(n))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),S5=(e,...n)=>{try{return!!e(...n)}catch{return!1}},Vk=L5&&S5(()=>{let e=!1;const n=new Request(Ra.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!n}),A_=64*1024,Xv=L5&&S5(()=>Jt.isReadableStream(new Response("").body)),f0={stream:Xv&&(e=>e.body)};X0&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(n=>{!f0[n]&&(f0[n]=Jt.isFunction(e[n])?t=>t[n]():(t,r)=>{throw new oi(`Response type '${n}' is not supported`,oi.ERR_NOT_SUPPORT,r)})})})(new Response);const Gk=async e=>{if(e==null)return 0;if(Jt.isBlob(e))return e.size;if(Jt.isSpecCompliantForm(e))return(await new Request(Ra.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Jt.isArrayBufferView(e)||Jt.isArrayBuffer(e))return e.byteLength;if(Jt.isURLSearchParams(e)&&(e=e+""),Jt.isString(e))return(await Uk(e)).byteLength},Hk=async(e,n)=>{const t=Jt.toFiniteNumber(e.getContentLength());return t??Gk(n)},qk=X0&&(async e=>{let{url:n,method:t,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:u,onUploadProgress:f,responseType:d,headers:g,withCredentials:y="same-origin",fetchOptions:x}=x5(e);d=d?(d+"").toLowerCase():"text";let _=Fk([i,s&&s.toAbortSignal()],o),M;const k=_&&_.unsubscribe&&(()=>{_.unsubscribe()});let N;try{if(f&&Vk&&t!=="get"&&t!=="head"&&(N=await Hk(g,r))!==0){let he=new Request(n,{method:"POST",body:r,duplex:"half"}),fe;if(Jt.isFormData(r)&&(fe=he.headers.get("content-type"))&&g.setContentType(fe),he.body){const[me,G]=C_(N,c0(E_(f)));r=M_(he.body,A_,me,G)}}Jt.isString(y)||(y=y?"include":"omit");const T="credentials"in Request.prototype;M=new Request(n,{...x,signal:_,method:t.toUpperCase(),headers:g.normalize().toJSON(),body:r,duplex:"half",credentials:T?y:void 0});let F=await fetch(M);const K=Xv&&(d==="stream"||d==="response");if(Xv&&(u||K&&k)){const he={};["status","statusText","headers"].forEach($=>{he[$]=F[$]});const fe=Jt.toFiniteNumber(F.headers.get("content-length")),[me,G]=u&&C_(fe,c0(E_(u),!0))||[];F=new Response(M_(F.body,A_,me,()=>{G&&G(),k&&k()}),he)}d=d||"text";let Q=await f0[Jt.findKey(f0,d)||"text"](F,e);return!K&&k&&k(),await new Promise((he,fe)=>{b5(he,fe,{data:Q,headers:El.from(F.headers),status:F.status,statusText:F.statusText,config:e,request:M})})}catch(T){throw k&&k(),T&&T.name==="TypeError"&&/fetch/i.test(T.message)?Object.assign(new oi("Network Error",oi.ERR_NETWORK,e,M),{cause:T.cause||T}):oi.from(T,T&&T.code,e,M)}}),Qv={http:ak,xhr:Rk,fetch:qk};Jt.forEach(Qv,(e,n)=>{if(e){try{Object.defineProperty(e,"name",{value:n})}catch{}Object.defineProperty(e,"adapterName",{value:n})}});const k_=e=>`- ${e}`,Wk=e=>Jt.isFunction(e)||e===null||e===!1,C5={getAdapter:e=>{e=Jt.isArray(e)?e:[e];const{length:n}=e;let t,r;const i={};for(let s=0;s<n;s++){t=e[s];let o;if(r=t,!Wk(t)&&(r=Qv[(o=String(t)).toLowerCase()],r===void 0))throw new oi(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([u,f])=>`adapter ${u} `+(f===!1?"is not supported by the environment":"is not available in the build"));let o=n?s.length>1?`since :
`+s.map(k_).join(`
`):" "+k_(s[0]):"as no adapter specified";throw new oi("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Qv};function Ym(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new pd(null,e)}function T_(e){return Ym(e),e.headers=El.from(e.headers),e.data=Km.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),C5.getAdapter(e.adapter||Op.adapter)(e).then(function(r){return Ym(e),r.data=Km.call(e,e.transformResponse,r),r.headers=El.from(r.headers),r},function(r){return _5(r)||(Ym(e),r&&r.response&&(r.response.data=Km.call(e,e.transformResponse,r.response),r.response.headers=El.from(r.response.headers))),Promise.reject(r)})}const E5="1.8.4",Q0={};["object","boolean","number","function","string","symbol"].forEach((e,n)=>{Q0[e]=function(r){return typeof r===e||"a"+(n<1?"n ":" ")+e}});const N_={};Q0.transitional=function(n,t,r){function i(s,o){return"[Axios v"+E5+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,u)=>{if(n===!1)throw new oi(i(o," has been removed"+(t?" in "+t:"")),oi.ERR_DEPRECATED);return t&&!N_[o]&&(N_[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),n?n(s,o,u):!0}};Q0.spelling=function(n){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${n}`),!0)};function Zk(e,n,t){if(typeof e!="object")throw new oi("options must be an object",oi.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=n[s];if(o){const u=e[s],f=u===void 0||o(u,s,e);if(f!==!0)throw new oi("option "+s+" must be "+f,oi.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new oi("Unknown option "+s,oi.ERR_BAD_OPTION)}}const Bg={assertOptions:Zk,validators:Q0},ic=Bg.validators;let nh=class{constructor(n){this.defaults=n,this.interceptors={request:new L_,response:new L_}}async request(n,t){try{return await this._request(n,t)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(n,t){typeof n=="string"?(t=t||{},t.url=n):t=n||{},t=ah(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:s}=t;r!==void 0&&Bg.assertOptions(r,{silentJSONParsing:ic.transitional(ic.boolean),forcedJSONParsing:ic.transitional(ic.boolean),clarifyTimeoutError:ic.transitional(ic.boolean)},!1),i!=null&&(Jt.isFunction(i)?t.paramsSerializer={serialize:i}:Bg.assertOptions(i,{encode:ic.function,serialize:ic.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Bg.assertOptions(t,{baseUrl:ic.spelling("baseURL"),withXsrfToken:ic.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&Jt.merge(s.common,s[t.method]);s&&Jt.forEach(["delete","get","head","post","put","patch","common"],M=>{delete s[M]}),t.headers=El.concat(o,s);const u=[];let f=!0;this.interceptors.request.forEach(function(k){typeof k.runWhen=="function"&&k.runWhen(t)===!1||(f=f&&k.synchronous,u.unshift(k.fulfilled,k.rejected))});const d=[];this.interceptors.response.forEach(function(k){d.push(k.fulfilled,k.rejected)});let g,y=0,x;if(!f){const M=[T_.bind(this),void 0];for(M.unshift.apply(M,u),M.push.apply(M,d),x=M.length,g=Promise.resolve(t);y<x;)g=g.then(M[y++],M[y++]);return g}x=u.length;let _=t;for(y=0;y<x;){const M=u[y++],k=u[y++];try{_=M(_)}catch(N){k.call(this,N);break}}try{g=T_.call(this,_)}catch(M){return Promise.reject(M)}for(y=0,x=d.length;y<x;)g=g.then(d[y++],d[y++]);return g}getUri(n){n=ah(this.defaults,n);const t=w5(n.baseURL,n.url,n.allowAbsoluteUrls);return m5(t,n.params,n.paramsSerializer)}};Jt.forEach(["delete","get","head","options"],function(n){nh.prototype[n]=function(t,r){return this.request(ah(r||{},{method:n,url:t,data:(r||{}).data}))}});Jt.forEach(["post","put","patch"],function(n){function t(r){return function(s,o,u){return this.request(ah(u||{},{method:n,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}nh.prototype[n]=t(),nh.prototype[n+"Form"]=t(!0)});let Kk=class P5{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(u=>{r.subscribe(u),s=u}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},n(function(s,o,u){r.reason||(r.reason=new pd(s,o,u),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const t=this._listeners.indexOf(n);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const n=new AbortController,t=r=>{n.abort(r)};return this.subscribe(t),n.signal.unsubscribe=()=>this.unsubscribe(t),n.signal}static source(){let n;return{token:new P5(function(i){n=i}),cancel:n}}};function Yk(e){return function(t){return e.apply(null,t)}}function Jk(e){return Jt.isObject(e)&&e.isAxiosError===!0}const e1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(e1).forEach(([e,n])=>{e1[n]=e});function M5(e){const n=new nh(e),t=o5(nh.prototype.request,n);return Jt.extend(t,nh.prototype,n,{allOwnKeys:!0}),Jt.extend(t,n,null,{allOwnKeys:!0}),t.create=function(i){return M5(ah(e,i))},t}const Ls=M5(Op);Ls.Axios=nh;Ls.CanceledError=pd;Ls.CancelToken=Kk;Ls.isCancel=_5;Ls.VERSION=E5;Ls.toFormData=J0;Ls.AxiosError=oi;Ls.Cancel=Ls.CanceledError;Ls.all=function(n){return Promise.all(n)};Ls.spread=Yk;Ls.isAxiosError=Jk;Ls.mergeConfig=ah;Ls.AxiosHeaders=El;Ls.formToJSON=e=>y5(Jt.isHTMLForm(e)?new FormData(e):e);Ls.getAdapter=C5.getAdapter;Ls.HttpStatusCode=e1;Ls.default=Ls;const{Axios:eG,AxiosError:tG,CanceledError:nG,isCancel:rG,CancelToken:iG,VERSION:oG,all:sG,Cancel:aG,isAxiosError:lG,spread:uG,toFormData:cG,AxiosHeaders:fG,HttpStatusCode:hG,formToJSON:dG,getAdapter:pG,mergeConfig:gG}=Ls,pn=Kl({measures:[],longTasks:[],memorySnapshots:[],framesPerSecond:0,lastFpsUpdate:0,frameCount:0,isRecording:!1,isEnabled:!1,startTime:0,currentOperation:null,operationStack:[],operationHistory:[]});let wf=null,Xf=null;const Xk=1e3;function em(){if(pn.isEnabled){pn.isRecording=!0,pn.startTime=performance.now(),pn.frameCount=0,pn.lastFpsUpdate=performance.now();try{window.PerformanceObserver&&PerformanceObserver.supportedEntryTypes.includes("longtask")&&(wf=new PerformanceObserver(e=>{e.getEntries().forEach(t=>{pn.longTasks.push({duration:t.duration,startTime:t.startTime,name:t.name,component:Hu()})})}),wf.observe({entryTypes:["longtask"]}))}catch(e){console.warn("PerformanceObserver pour longues tches non support",e)}Qk(),ly()}}function h0(){pn.isRecording=!1,wf&&(wf.disconnect(),wf=null),N5()}function t1(){wf&&(wf.disconnect(),wf=null),N5(),pn.measures=[],pn.longTasks=[],pn.memorySnapshots=[],pn.operationHistory=[],pn.frameCount=0,pn.framesPerSecond=0,pn.lastFpsUpdate=0,pn.isEnabled&&em()}function A5(e,n,t){if(!pn.isEnabled||!pn.isRecording)return()=>{};const r=performance.now(),i=pn.currentOperation;return pn.currentOperation=e,pn.operationStack.push(e),()=>{const s=performance.now()-r;pn.operationStack.pop(),pn.currentOperation=pn.operationStack[pn.operationStack.length-1]||null,pn.measures.push({name:e,startTime:r,duration:s,component:n||Hu(),info:t,parentOperation:i||void 0}),s>10&&pn.operationHistory.push({operation:e,component:n||Hu()||"unknown",durationMs:s,timestamp:Date.now()})}}async function k5(e,n,t,r){if(!pn.isEnabled||!pn.isRecording)return n();const i=performance.now(),s=pn.currentOperation;pn.currentOperation=e,pn.operationStack.push(e);try{return await n()}finally{const o=performance.now()-i;pn.operationStack.pop(),pn.currentOperation=pn.operationStack[pn.operationStack.length-1]||null,pn.measures.push({name:e,startTime:i,duration:o,component:t||Hu(),info:r,parentOperation:s||void 0}),o>10&&pn.operationHistory.push({operation:e,component:t||Hu()||"unknown",durationMs:o,timestamp:Date.now()})}}function T5(e,n,t,r){if(!pn.isEnabled||!pn.isRecording)return n();const i=performance.now(),s=pn.currentOperation;pn.currentOperation=e,pn.operationStack.push(e);try{return n()}finally{const o=performance.now()-i;pn.operationStack.pop(),pn.currentOperation=pn.operationStack[pn.operationStack.length-1]||null,pn.measures.push({name:e,startTime:i,duration:o,component:t||Hu(),info:r,parentOperation:s||void 0}),o>10&&pn.operationHistory.push({operation:e,component:t||Hu()||"unknown",durationMs:o,timestamp:Date.now()})}}function ly(){!pn.isEnabled||!pn.isRecording||(performance.memory?pn.memorySnapshots.push({jsHeapSizeLimit:performance.memory.jsHeapSizeLimit,totalJSHeapSize:performance.memory.totalJSHeapSize,usedJSHeapSize:performance.memory.usedJSHeapSize,timestamp:performance.now()}):pn.memorySnapshots.push({timestamp:performance.now()}))}function Qk(){Xf!==null&&cancelAnimationFrame(Xf),pn.frameCount=0,pn.lastFpsUpdate=performance.now();function e(){pn.frameCount++;const n=performance.now();n-pn.lastFpsUpdate>=Xk&&(pn.framesPerSecond=Math.round(pn.frameCount*1e3/(n-pn.lastFpsUpdate)),pn.frameCount=0,pn.lastFpsUpdate=n),pn.isRecording&&(Xf=requestAnimationFrame(e))}Xf=requestAnimationFrame(e)}function N5(){Xf!==null&&(cancelAnimationFrame(Xf),Xf=null)}function Hu(){return""}function n1(e){pn.isEnabled=e,e&&!pn.isRecording?em():!e&&pn.isRecording&&h0()}function D5(e,n,t){return(...r)=>{if(!pn.isEnabled||!pn.isRecording)return e(...r);const i=performance.now();try{return e(...r)}finally{const s=performance.now()-i;pn.measures.push({name:n,startTime:i,duration:s,component:t||Hu(),info:{args:r}}),s>10&&pn.operationHistory.push({operation:n,component:t||Hu()||"unknown",durationMs:s,timestamp:Date.now()})}}}function I5(e,n,t){return async(...r)=>{if(!pn.isEnabled||!pn.isRecording)return await e(...r);const i=performance.now();try{return await e(...r)}finally{const s=performance.now()-i;pn.measures.push({name:n,startTime:i,duration:s,component:t||Hu(),info:{args:r}}),s>10&&pn.operationHistory.push({operation:n,component:t||Hu()||"unknown",durationMs:s,timestamp:Date.now()})}}}function eT(e,n){const t=pn.measures.filter(o=>o.startTime>=e&&o.startTime+o.duration<=n),r=new Map,i=[];t.forEach(o=>{o.parentOperation?(r.has(o.parentOperation)||r.set(o.parentOperation,[]),r.get(o.parentOperation).push(o)):i.push(o)});function s(o){const u=r.get(o.name)||[];return{operation:o.name,duration:o.duration,component:o.component,children:u.sort((f,d)=>d.duration-f.duration).map(f=>s(f))}}return i.sort((o,u)=>u.duration-o.duration).map(o=>s(o))}function r1(e,n){const t=e||pn.startTime,r=n||performance.now(),i=eT(t,r),s=r-t,o=new Map;function u(d){const g=o.get(d.operation)||{duration:0,component:d.component};g.duration+=d.duration,o.set(d.operation,g),d.children.forEach(y=>u(y))}i.forEach(d=>u(d));const f=Array.from(o.entries()).map(([d,{duration:g,component:y}])=>({operation:d,duration:g,component:y,impact:g/s*100})).sort((d,g)=>g.impact-d.impact).slice(0,10);return{criticalPaths:i,totalTime:s,bottlenecks:f}}function gd(){const e=jt(!1);Is(()=>{try{const r=new URL(window.location.href).searchParams.get("perf")==="true";e.value=r,n1(r),t1()}catch(t){console.warn("Erreur lors de la vrification du paramtre perf:",t),e.value=!1,n1(!1)}}),mc(()=>{pn.isRecording&&h0()});const n=(t,r)=>{if(!pn.isEnabled||!pn.isRecording)return null;const i=pn.measures.find(d=>d.name===t&&d.startTime===r);if(!i)return null;const s=i.startTime+i.duration,o=pn.measures.filter(d=>d.startTime>=i.startTime&&d.startTime<=s&&d!==i),u=pn.longTasks.filter(d=>d.startTime>=i.startTime&&d.startTime<=s),f=pn.memorySnapshots.filter(d=>d.timestamp>=i.startTime&&d.timestamp<=s);return{operation:{name:i.name,component:i.component,startTime:i.startTime,duration:i.duration,info:i.info},context:{relatedOperations:o.map(d=>({name:d.name,component:d.component,startTime:d.startTime-i.startTime,duration:d.duration,info:d.info})),longTasks:u.map(d=>({duration:d.duration,startTime:d.startTime-i.startTime,name:d.name,component:d.component})),memorySnapshots:f.map(d=>({...d,timestamp:d.timestamp-i.startTime}))},summary:{totalRelatedOperations:o.length,totalLongTasks:u.length,maxLongTaskDuration:Math.max(...u.map(d=>d.duration),0),memoryDelta:f.length>1?(f[f.length-1].usedJSHeapSize||0)-(f[0].usedJSHeapSize||0):0}}};return{isEnabled:Bu(jt(pn.isEnabled)),isQueryParamEnabled:Bu(e),isRecording:Bu(jt(pn.isRecording)),measures:Bu(jt(pn.measures)),longTasks:Bu(jt(pn.longTasks)),memorySnapshots:Bu(jt(pn.memorySnapshots)),framesPerSecond:Bu(jt(pn.framesPerSecond)),operationHistory:Bu(jt(pn.operationHistory)),startRecording:em,stopRecording:h0,clearRecording:t1,startMeasure:A5,measure:T5,measureAsync:k5,captureMemorySnapshot:ly,createPerformanceTracker:D5,createAsyncPerformanceTracker:I5,getOperationDetails:n,getSlowOperations:()=>!pn.isEnabled||!pn.isRecording?[]:[...pn.measures].sort((t,r)=>r.duration-t.duration).slice(0,10),getLongTasks:()=>!pn.isEnabled||!pn.isRecording?[]:[...pn.longTasks].sort((t,r)=>r.duration-t.duration),getPerformanceReport:()=>{if(!pn.isEnabled||!pn.isRecording)return null;const t=r1();return{totalMeasures:pn.measures.length,totalLongTasks:pn.longTasks.length,slowestOperations:[...pn.measures].sort((r,i)=>i.duration-r.duration).slice(0,10),averageFps:pn.framesPerSecond,memoryUsage:pn.memorySnapshots.length>0?pn.memorySnapshots[pn.memorySnapshots.length-1]:null,operationsByComponent:tT(pn.measures),criticalPaths:t.criticalPaths,bottlenecks:t.bottlenecks,recordingDuration:pn.isRecording?performance.now()-pn.startTime:null}},analyzeCriticalPaths:r1}}function tT(e){if(!pn.isEnabled||!pn.isRecording)return{};const n={};return e.forEach(t=>{const r=t.component||"unknown";n[r]||(n[r]={totalTime:0,callCount:0,operations:{}}),n[r].totalTime+=t.duration,n[r].callCount++,n[r].operations[t.name]||(n[r].operations[t.name]={totalTime:0,callCount:0}),n[r].operations[t.name].totalTime+=t.duration,n[r].operations[t.name].callCount++}),n}const dn={startRecording:em,stopRecording:h0,clearRecording:t1,startMeasure:A5,measure:T5,measureAsync:k5,captureMemorySnapshot:ly,createPerformanceTracker:D5,createAsyncPerformanceTracker:I5,setEnabled:n1,analyzeCriticalPaths:r1},Rn=Ls.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0}),$r=gd();function O5(e){var r;const t=`; ${document.cookie}`.split(`; ${e}=`);return t.length===2&&((r=t.pop())==null?void 0:r.split(";").shift())||null}Rn.interceptors.request.use(async e=>{const n=$r.startMeasure("api_request_interceptor","ApiService");try{const t=O5("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),console.log("Request config:",{url:e.url,method:e.method,headers:e.headers,withCredentials:e.withCredentials}),e}finally{n()}},e=>(console.error("Request interceptor error:",e),Promise.reject(e)));Rn.interceptors.response.use(e=>e,async e=>{var r,i;const n=$r.startMeasure("api_response_interceptor","ApiService"),t=e.config;try{if(((r=e.response)==null?void 0:r.status)===401&&!t._retry&&!((i=t.url)!=null&&i.includes("/token/refresh/"))){t._retry=!0;const s=ma();try{await $r.measureAsync("token_refresh",()=>s.refreshToken(),"ApiService");const o=O5("access_token");if(o)return t.headers.Authorization=`Bearer ${o}`,Rn(t)}catch(o){return await s.logout(),window.location.pathname!=="/login"&&(window.location.href="/login"),Promise.reject(o)}}return Promise.reject(e)}finally{n()}});function B5(e){var t;const n=[];if((t=e.response)!=null&&t.data){const r=e.response.data;typeof r=="object"&&!Array.isArray(r)?Object.entries(r).forEach(([i,s])=>{Array.isArray(s)?s.forEach(o=>{n.push({field:i,message:o})}):typeof s=="string"&&n.push({field:i,message:s})}):typeof r=="string"?n.push({field:"non_field_error",message:r}):r.detail&&n.push({field:"non_field_error",message:r.detail})}else e.message&&n.push({field:"non_field_error",message:`Erreur de connexion: ${e.message}`});return n.length===0&&n.push({field:"non_field_error",message:"Une erreur inconnue s'est produite"}),n}const nT={async login(e,n){const t=$r.startMeasure("auth_login","AuthService");try{return(await $r.measureAsync("login_request",()=>Rn.post("/token/",{username:e,password:n}),"AuthService")).data}finally{t()}},async logout(){const e=$r.startMeasure("auth_logout","AuthService");try{await $r.measureAsync("logout_request",()=>Rn.post("/token/logout/"),"AuthService")}finally{e()}},async register(e){const n=$r.startMeasure("auth_register","AuthService");try{return await $r.measureAsync("register_request",()=>Rn.post("/register/",e),"AuthService")}finally{n()}}};async function rp(e){console.log("[fetchUsersByHierarchy] Rcupration des utilisateurs:",e);const n={role:e.role};e.entrepriseId&&(n.entreprise=e.entrepriseId),e.salarieId&&(n.salarie=e.salarieId),e.includeDetails&&(n.include_plans=!0),e.search&&(n.search=e.search),console.log("[fetchUsersByHierarchy] Filtres appliqus:",n);try{const t=await Qa.getUsers(n);return console.log(`[fetchUsersByHierarchy] Rsultat (${t.data.length} utilisateurs):`,t.data),t.data}catch(t){throw console.error("[fetchUsersByHierarchy] Erreur lors de la rcupration des utilisateurs:",t),t}}const Qa={async getUsers(e={}){const n=$r.startMeasure("get_users","UserService");try{return await $r.measureAsync("get_users_request",()=>Rn.get("/users/",{params:e}),"UserService")}finally{n()}},async getUser(e){return await Rn.get(`/users/${e}/`)},async createUser(e){return await Rn.post("/users/",e)},async updateUser(e,n){return await Rn.patch(`/users/${e}/`,n)},async deleteUser(e){return await Rn.delete(`/users/${e}/`)},async getEntreprises(){return await Rn.get("/users/",{params:{role:"ENTREPRISE"}})},async getSalaries(e){const n={role:"SALARIE"};return e&&(n.entreprise=e),await Rn.get("/users/",{params:n})},async getSalarieVisiteurs(e){return await Rn.get("/users/",{params:{role:"VISITEUR",salarie:e}})},async getEntrepriseVisiteurs(e){return await Rn.get("/users/",{params:{role:"VISITEUR",entreprise:e}})},async getUsersByHierarchy(e){const n=$r.startMeasure("get_users_hierarchy","UserService");try{const t=$r.measure("prepare_hierarchy_filters",()=>{const r={role:e.role};return e.entrepriseId&&(r.entreprise=e.entrepriseId),e.salarieId&&(r.salarie=e.salarieId),e.includeDetails&&(r.include_plans=!0),e.search&&(r.search=e.search),r},"UserService");return await $r.measureAsync("get_users_hierarchy_request",()=>Rn.get("/users/",{params:t}),"UserService")}finally{n()}},async getEntrepriseSalaries(e){return await Rn.get("/users/",{params:{role:"SALARIE",entreprise:e}})},async getVisiteurs(e,n){const t={role:"VISITEUR"};return e&&(t.salarie=e),n&&(t.entreprise=n),await Rn.get("/users/",{params:t})},async assignEntrepriseToSalarie(e,n){return await Rn.patch(`/users/${e}/`,{entreprise:n})},async assignSalarieToVisiteur(e,n){return await Rn.patch(`/users/${e}/`,{salarie:n})},formatLogoFileName(e){return $r.measure("format_logo_filename",()=>{var i;const n=new Date().getTime(),t=((i=e.name.split(".").pop())==null?void 0:i.toLowerCase())||"";return`${e.name.split(".")[0].toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}-${n}.${t}`},"UserService")},async uploadLogo(e){const n=$r.startMeasure("upload_logo","UserService");try{const t=new FormData,r=this.formatLogoFileName(e),i=new File([e],r,{type:e.type});return t.append("logo",i),await $r.measureAsync("upload_logo_request",()=>Rn.post("/users/upload_logo/",t,{headers:{"Content-Type":"multipart/form-data"}}),"UserService")}finally{n()}}},jd={async getPlans(){const e=$r.startMeasure("get_plans","IrrigationService");try{return await $r.measureAsync("get_plans_request",()=>Rn.get("/plans/"),"IrrigationService")}finally{e()}},async createPlan(e){const n=$r.startMeasure("create_plan","IrrigationService");try{const t=$r.measure("format_plan_data",()=>({...e,entreprise:e.entreprise?typeof e.entreprise=="object"&&"id"in e.entreprise?e.entreprise.id:Number(e.entreprise):null,salarie:e.salarie?typeof e.salarie=="object"&&"id"in e.salarie?e.salarie.id:Number(e.salarie):null,visiteur:e.visiteur?typeof e.visiteur=="object"&&"id"in e.visiteur?e.visiteur.id:Number(e.visiteur):null}),"IrrigationService");return await $r.measureAsync("create_plan_request",()=>Rn.post("/plans/",t),"IrrigationService")}finally{n()}},async updatePlan(e,n){const t=$r.startMeasure("update_plan","IrrigationService");try{return await $r.measureAsync("update_plan_request",()=>Rn.put(`/plans/${e}/`,n),"IrrigationService")}finally{t()}},async deletePlan(e){const n=$r.startMeasure("delete_plan","IrrigationService");try{return await $r.measureAsync("delete_plan_request",()=>Rn.delete(`/plans/${e}/`),"IrrigationService")}finally{n()}},async getVisiteurPlans(e){return await Rn.get("/plans/",{params:{visiteur:e}})},async createPlanForVisiteur(e){return await Rn.post("/plans/",e)},async getEntreprisePlans(e){return await Rn.get("/plans/",{params:{entreprise:e}})},async getSalariePlans(e){return await Rn.get("/plans/",{params:{salarie:e}})},async createPlanForSalarie(e,n){const t={...e,salarie:n};return await Rn.post("/plans/",t)},async createPlanForEntreprise(e,n){const t={...e,entreprise:n};return await Rn.post("/plans/",t)}},du={async getNotes(e={}){const n=$r.startMeasure("get_notes","NoteService");try{return await $r.measureAsync("get_notes_request",()=>Rn.get("/notes/",{params:e}),"NoteService")}finally{n()}},async getNote(e){const n=$r.startMeasure("get_note","NoteService");try{return await $r.measureAsync("get_note_request",()=>Rn.get(`/notes/${e}/`),"NoteService")}finally{n()}},async createNote(e){const n=$r.startMeasure("create_note","NoteService");try{const t={...e};return t.location&&Object.keys(t.location).length===0&&delete t.location,await $r.measureAsync("create_note_request",()=>Rn.post("/notes/",t),"NoteService")}finally{n()}},async updateNote(e,n){console.log("[noteService][updateNote] Mise  jour de la note:",{noteId:e,noteData:n});const t=$r.startMeasure("update_note","NoteService");try{const r={...n};r.location&&Object.keys(r.location).length===0&&delete r.location,n.column!==void 0?r.column=n.column:n.columnId!==void 0&&(r.column=n.columnId),delete r.columnId,delete r.column_id,delete r.column_details,console.log("[noteService][updateNote] Donnes formates:",r);const i=await $r.measureAsync("update_note_request",()=>Rn.patch(`/notes/${e}/`,r),"NoteService");return console.log("[noteService][updateNote] Rponse du serveur:",i.data),i}catch(r){throw console.error("[noteService][updateNote] Erreur lors de la mise  jour:",r),r}finally{t()}},async deleteNote(e){const n=$r.startMeasure("delete_note","NoteService");try{return await $r.measureAsync("delete_note_request",()=>Rn.delete(`/notes/${e}/`),"NoteService")}finally{n()}},async getComments(e){return await Rn.get(`/notes/${e}/comments/`)},async addComment(e,n){return await Rn.post(`/notes/${e}/comments/`,n)},async updateComment(e,n,t){return await Rn.patch(`/notes/${e}/comments/${n}/`,t)},async deleteComment(e,n){return await Rn.delete(`/notes/${e}/comments/${n}/`)},async getPhotos(e){return await Rn.get(`/notes/${e}/photos/`)},async addPhoto(e,n){return await Rn.post(`/notes/${e}/photos/`,n,{headers:{"Content-Type":"multipart/form-data"}})},async updatePhoto(e,n,t){return await Rn.patch(`/notes/${e}/photos/${n}/`,t)},async deletePhoto(e,n){return await Rn.delete(`/notes/${e}/photos/${n}/`)}},rT={async getColumns(){console.log(`
[columnService][getColumns] Rcupration des colonnes`);const e=$r.startMeasure("get_columns","ColumnService");try{const n=await $r.measureAsync("get_columns_request",()=>Rn.get("/columns/"),"ColumnService");return console.log("[columnService][getColumns] Rponse:",n.data),n}catch(n){throw console.error("[columnService][getColumns] Erreur:",n),n}finally{e()}},async createColumn(e){console.log(`
[columnService][createColumn] Cration d'une colonne:`,e);const n=$r.startMeasure("create_column","ColumnService");try{const t=await $r.measureAsync("create_column_request",()=>Rn.post("/columns/",e),"ColumnService");return console.log("[columnService][createColumn] Rponse:",t.data),t}catch(t){throw console.error("[columnService][createColumn] Erreur:",t),t}finally{n()}},async updateColumn(e,n){console.log(`
[columnService][updateColumn] Mise  jour de la colonne:`,e,n);const t=$r.startMeasure("update_column","ColumnService");try{const r=await $r.measureAsync("update_column_request",()=>Rn.patch(`/columns/${e}/`,n),"ColumnService");return console.log("[columnService][updateColumn] Rponse:",r.data),r}catch(r){throw console.error("[columnService][updateColumn] Erreur:",r),r}finally{t()}},async deleteColumn(e){const n=$r.startMeasure("delete_column","ColumnService");try{return await $r.measureAsync("delete_column_request",()=>Rn.delete(`/columns/${e}/`),"ColumnService")}finally{n()}},async updateColumnsOrder(e){const n=$r.startMeasure("update_columns_order","ColumnService");try{return await $r.measureAsync("update_columns_order_request",()=>Rn.post("/columns/reorder/",{columns:e}),"ColumnService")}finally{n()}}},iT=Object.freeze(Object.defineProperty({__proto__:null,authService:nT,columnService:rT,default:Rn,fetchUsersByHierarchy:rp,formatApiErrors:B5,irrigationService:jd,noteService:du,userService:Qa},Symbol.toStringTag,{value:"Module"}));Rn.defaults.baseURL="/api";Rn.defaults.headers.common["Content-Type"]="application/json";Rn.defaults.withCredentials=!0;function Sp(e){var r;const t=`; ${document.cookie}`.split(`; ${e}=`);return t.length===2&&((r=t.pop())==null?void 0:r.split(";").shift())||null}Rn.interceptors.request.use(e=>{const n=Sp("access_token");return n&&(e.headers.Authorization=`Bearer ${n}`),e},e=>(console.error("Request interceptor error:",e),Promise.reject(e)));Rn.interceptors.response.use(e=>e,async e=>{var r,i;const n=ma(),t=e.config;if(((r=e.response)==null?void 0:r.status)===401&&!t._retry&&!((i=t.url)!=null&&i.includes("/token/refresh/"))){t._retry=!0;try{if(!Sp("access_token"))throw new Error("No token available");await n.refreshToken();const o=Sp("access_token");if(o)return t.headers.Authorization=`Bearer ${o}`,Rn(t)}catch(s){console.error("Token refresh failed:",s),await n.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(e)});function oT(e,n,t=1){const r=new Date;r.setTime(r.getTime()+t*24*60*60*1e3);const i=`expires=${r.toUTCString()}`;document.cookie=`${e}=${n};${i};path=/;secure;samesite=Strict`}function Vl(e){if(!e)return"-";const n=e.first_name||"",t=e.last_name?e.last_name.toUpperCase():"",r=`${n} ${t}`.trim(),i=e.company_name||e.role||"";return!r&&!i?"-":r?i?`${r} (${i})`:r:`(${i})`}function sT(e="",n=""){return`${(e==null?void 0:e.charAt(0))||""}${(n==null?void 0:n.charAt(0))||""}`.toUpperCase()}const aT={ADMIN:"Administrateur",ENTREPRISE:"Entreprise",SALARIE:"Salarie",VISITEUR:"Visiteur"};function lT(e){return aT[e]||e}function uT(){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function cT(e){return e?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}async function fT({role:e,entrepriseId:n,salarieId:t,includeDetails:r=!1}){const i={role:e};return n&&(i.entreprise=n),t&&(i.salarie=t),r&&(i.include_plans=!0),(await Qa.getUsers(i)).data}const ma=Dp("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,enterprises:[],employees:[],visitors:[]}),getters:{isAdmin:e=>{var n;return((n=e.user)==null?void 0:n.user_type)==="admin"},isEntreprise:e=>{var n;return((n=e.user)==null?void 0:n.user_type)==="entreprise"},isSalarie:e=>{var n;return((n=e.user)==null?void 0:n.user_type)==="salarie"},isVisiteur:e=>{var n;return((n=e.user)==null?void 0:n.user_type)==="visiteur"},currentUser:e=>e.user,hasEnterprise:e=>{var n;return!!((n=e.user)!=null&&n.enterprise_id)},hasEmployee:e=>{var n;return!!((n=e.user)!=null&&n.employee_id)}},actions:{async initialize(e){if(!e){const t=await this.restoreSession();return this.initialized=!0,t}if(e.isAuthenticated&&e.user)return this.user=e.user,this.isAuthenticated=!0,this.mustChangePassword=e.user.must_change_password||!1,this.initialized=!0,!0;const n=await this.restoreSession();return this.initialized=!0,n},async restoreSession(){try{if(!Sp("access_token"))return this.isAuthenticated=!1,this.user=null,!1;const n=await Rn.post("/token/refresh/");return n.data.user?(this.user=n.data.user,this.isAuthenticated=!0,this.mustChangePassword=n.data.user.must_change_password||!1,!0):(await this.fetchUserProfile(),!0)}catch(e){return console.error("Failed to restore session:",e),this.isAuthenticated=!1,this.user=null,!1}},async login(e,n){var t,r,i;try{const s=await Rn.post("/token/",{username:e,password:n});if(!s.data.access)throw new Error("Token d'accs non reu");document.cookie=`access_token=${s.data.access}; path=/; secure; samesite=Strict`;const o=await this.fetchUserProfile();return this.user=o,this.isAuthenticated=!0,!0}catch(s){throw this.isAuthenticated=!1,this.user=null,((t=s.response)==null?void 0:t.status)===401?new Error("Identifiants incorrects"):(i=(r=s.response)==null?void 0:r.data)!=null&&i.detail?new Error(s.response.data.detail):s}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const e=await Rn.get("/users/me/");return this.user=e.data,this.isAuthenticated=!0,this.mustChangePassword=e.data.must_change_password||!1,e.data}catch(e){throw this.isAuthenticated=!1,this.user=null,e}},async changePassword(e,n){try{const t=await Rn.post("/users/change_password/",{old_password:e,password:n});return this.user={...this.user,must_change_password:!1},t.data}catch(t){throw console.error("Password change error:",t),t}},async refreshToken(){var e,n;try{if(!Sp("refresh_token"))throw new Error("No refresh token available");const r=await Rn.post("/token/refresh/",{},{withCredentials:!0,_retry:!0}),{access:i}=r.data;if(!i)throw new Error("No access token received");return oT("access_token",i,1),this.isAuthenticated=!0,i}catch(t){throw console.error("Error refreshing token:",{status:(e=t.response)==null?void 0:e.status,data:(n=t.response)==null?void 0:n.data}),this.isAuthenticated=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",t}},async fetchUsers(e={}){this.loading=!0;try{return(await Qa.getUsers(e)).data}catch(n){throw this.error="Erreur lors de la rcupration des utilisateurs",n}finally{this.loading=!1}},async fetchEnterprises(){this.loading=!0;try{const e=await Qa.getUsers({role:"ENTREPRISE"});return this.enterprises=e.data,this.enterprises}catch(e){throw this.error="Erreur lors de la rcupration des entreprises",e}finally{this.loading=!1}},async fetchEnterpriseEmployees(e){this.loading=!0;try{const n=await Qa.getUsers({role:"SALARIE",entreprise:e});return this.employees=n.data,this.employees}catch(n){throw this.error="Erreur lors de la rcupration des salaries",n}finally{this.loading=!1}},async fetchEnterpriseVisitors(e){this.loading=!0;try{const n=await Qa.getUsers({role:"VISITEUR",entreprise:e});return this.visitors=n.data,this.visitors}catch(n){throw this.error="Erreur lors de la rcupration des visiteurs",n}finally{this.loading=!1}},async createUser(e){this.loading=!0;try{return(await Qa.createUser(e)).data}catch(n){throw this.error="Erreur lors de la cration de l'utilisateur",n}finally{this.loading=!1}},async updateUser(e,n){this.loading=!0;try{return(await Qa.updateUser(e,n)).data}catch(t){throw this.error="Erreur lors de la mise  jour de l'utilisateur",t}finally{this.loading=!1}},async deleteUser(e){this.loading=!0;try{return await Qa.deleteUser(e),!0}catch(n){throw this.error="Erreur lors de la suppression de l'utilisateur",n}finally{this.loading=!1}},async fetchEnterprisesLegacy(){this.loading=!0;try{const e=await Rn.get("/users/",{params:{role:"entreprise"}});this.enterprises=e.data}catch(e){throw this.error="Erreur lors de la rcupration des entreprises",e}finally{this.loading=!1}},async setEnterprise(e,n){this.loading=!0;try{await Rn.patch(`/users/${e}/`,{enterprise:n}),this.user&&this.user.id===e&&(this.user.enterprise_id=n)}catch(t){throw this.error="Erreur lors de la mise  jour de l'entreprise",t}finally{this.loading=!1}},async updateUserRole(e,n){this.loading=!0;try{const t=await Rn.patch(`/users/${e}/`,{role:n});return this.user&&this.user.id===e&&(this.user.user_type=n),t.data}catch(t){throw this.error="Erreur lors de la mise  jour du rle",t}finally{this.loading=!1}},async updateUserEmail(e){var n;this.loading=!0;try{const t=await Rn.patch(`/users/${(n=this.user)==null?void 0:n.id}/`,{email:e});return this.user&&(this.user.email=e),t.data}catch(t){throw this.error="Erreur lors de la mise  jour de l'email",t}finally{this.loading=!1}},async uploadLogo(e){this.loading=!0;try{const n=await Qa.uploadLogo(e);return this.user&&n.data.logo&&(this.user.logo=n.data.logo),n.data}catch(n){throw this.error="Erreur lors du tlversement du logo",n}finally{this.loading=!1}},checkAccess(e){return this.user?e.includes(this.user.user_type):!1},async fetchUsersByRole(e){this.loading=!0;try{return await fT(e)}catch(n){throw console.error(`Error fetching ${e.role}:`,n),n}finally{this.loading=!1}},async fetchEntrepriseSalaries(e){this.loading=!0;try{return(await Qa.getUsers({role:"SALARIE",entreprise:e})).data}catch(n){throw this.error="Erreur lors de la rcupration des salaries",n}finally{this.loading=!1}},async fetchSalarieVisiteurs(e){this.loading=!0;try{return(await Qa.getUsers({role:"VISITEUR",salarie:e})).data}catch(n){throw this.error="Erreur lors de la rcupration des visiteurs",n}finally{this.loading=!1}}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Fh=typeof document<"u";function R5(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function hT(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&R5(e.default)}const Yi=Object.assign;function Jm(e,n){const t={};for(const r in n){const i=n[r];t[r]=qu(i)?i.map(e):e(i)}return t}const ip=()=>{},qu=Array.isArray,F5=/#/g,dT=/&/g,pT=/\//g,gT=/=/g,mT=/\?/g,j5=/\+/g,vT=/%5B/g,yT=/%5D/g,z5=/%5E/g,_T=/%60/g,$5=/%7B/g,bT=/%7C/g,U5=/%7D/g,wT=/%20/g;function uy(e){return encodeURI(""+e).replace(bT,"|").replace(vT,"[").replace(yT,"]")}function xT(e){return uy(e).replace($5,"{").replace(U5,"}").replace(z5,"^")}function i1(e){return uy(e).replace(j5,"%2B").replace(wT,"+").replace(F5,"%23").replace(dT,"%26").replace(_T,"`").replace($5,"{").replace(U5,"}").replace(z5,"^")}function LT(e){return i1(e).replace(gT,"%3D")}function ST(e){return uy(e).replace(F5,"%23").replace(mT,"%3F")}function CT(e){return e==null?"":ST(e).replace(pT,"%2F")}function Cp(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const ET=/\/$/,PT=e=>e.replace(ET,"");function Xm(e,n,t="/"){let r,i={},s="",o="";const u=n.indexOf("#");let f=n.indexOf("?");return u<f&&u>=0&&(f=-1),f>-1&&(r=n.slice(0,f),s=n.slice(f+1,u>-1?u:n.length),i=e(s)),u>-1&&(r=r||n.slice(0,u),o=n.slice(u,n.length)),r=TT(r??n,t),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:Cp(o)}}function MT(e,n){const t=n.query?e(n.query):"";return n.path+(t&&"?")+t+(n.hash||"")}function D_(e,n){return!n||!e.toLowerCase().startsWith(n.toLowerCase())?e:e.slice(n.length)||"/"}function AT(e,n,t){const r=n.matched.length-1,i=t.matched.length-1;return r>-1&&r===i&&sd(n.matched[r],t.matched[i])&&V5(n.params,t.params)&&e(n.query)===e(t.query)&&n.hash===t.hash}function sd(e,n){return(e.aliasOf||e)===(n.aliasOf||n)}function V5(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const t in e)if(!kT(e[t],n[t]))return!1;return!0}function kT(e,n){return qu(e)?I_(e,n):qu(n)?I_(n,e):e===n}function I_(e,n){return qu(n)?e.length===n.length&&e.every((t,r)=>t===n[r]):e.length===1&&e[0]===n}function TT(e,n){if(e.startsWith("/"))return e;if(!e)return n;const t=n.split("/"),r=e.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=t.length-1,o,u;for(o=0;o<r.length;o++)if(u=r[o],u!==".")if(u==="..")s>1&&s--;else break;return t.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const tf={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Ep;(function(e){e.pop="pop",e.push="push"})(Ep||(Ep={}));var op;(function(e){e.back="back",e.forward="forward",e.unknown=""})(op||(op={}));function NT(e){if(!e)if(Fh){const n=document.querySelector("base");e=n&&n.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),PT(e)}const DT=/^[^#]+#/;function IT(e,n){return e.replace(DT,"#")+n}function OT(e,n){const t=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:n.behavior,left:r.left-t.left-(n.left||0),top:r.top-t.top-(n.top||0)}}const tm=()=>({left:window.scrollX,top:window.scrollY});function BT(e){let n;if("el"in e){const t=e.el,r=typeof t=="string"&&t.startsWith("#"),i=typeof t=="string"?r?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!i)return;n=OT(i,e)}else n=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.scrollX,n.top!=null?n.top:window.scrollY)}function O_(e,n){return(history.state?history.state.position-n:-1)+e}const o1=new Map;function RT(e,n){o1.set(e,n)}function FT(e){const n=o1.get(e);return o1.delete(e),n}let jT=()=>location.protocol+"//"+location.host;function G5(e,n){const{pathname:t,search:r,hash:i}=n,s=e.indexOf("#");if(s>-1){let u=i.includes(e.slice(s))?e.slice(s).length:1,f=i.slice(u);return f[0]!=="/"&&(f="/"+f),D_(f,"")}return D_(t,e)+r+i}function zT(e,n,t,r){let i=[],s=[],o=null;const u=({state:x})=>{const _=G5(e,location),M=t.value,k=n.value;let N=0;if(x){if(t.value=_,n.value=x,o&&o===M){o=null;return}N=k?x.position-k.position:0}else r(_);i.forEach(T=>{T(t.value,M,{delta:N,type:Ep.pop,direction:N?N>0?op.forward:op.back:op.unknown})})};function f(){o=t.value}function d(x){i.push(x);const _=()=>{const M=i.indexOf(x);M>-1&&i.splice(M,1)};return s.push(_),_}function g(){const{history:x}=window;x.state&&x.replaceState(Yi({},x.state,{scroll:tm()}),"")}function y(){for(const x of s)x();s=[],window.removeEventListener("popstate",u),window.removeEventListener("beforeunload",g)}return window.addEventListener("popstate",u),window.addEventListener("beforeunload",g,{passive:!0}),{pauseListeners:f,listen:d,destroy:y}}function B_(e,n,t,r=!1,i=!1){return{back:e,current:n,forward:t,replaced:r,position:window.history.length,scroll:i?tm():null}}function $T(e){const{history:n,location:t}=window,r={value:G5(e,t)},i={value:n.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function s(f,d,g){const y=e.indexOf("#"),x=y>-1?(t.host&&document.querySelector("base")?e:e.slice(y))+f:jT()+e+f;try{n[g?"replaceState":"pushState"](d,"",x),i.value=d}catch(_){console.error(_),t[g?"replace":"assign"](x)}}function o(f,d){const g=Yi({},n.state,B_(i.value.back,f,i.value.forward,!0),d,{position:i.value.position});s(f,g,!0),r.value=f}function u(f,d){const g=Yi({},i.value,n.state,{forward:f,scroll:tm()});s(g.current,g,!0);const y=Yi({},B_(r.value,f,null),{position:g.position+1},d);s(f,y,!1),r.value=f}return{location:r,state:i,push:u,replace:o}}function UT(e){e=NT(e);const n=$T(e),t=zT(e,n.state,n.location,n.replace);function r(s,o=!0){o||t.pauseListeners(),history.go(s)}const i=Yi({location:"",base:e,go:r,createHref:IT.bind(null,e)},n,t);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>n.state.value}),i}function VT(e){return typeof e=="string"||e&&typeof e=="object"}function H5(e){return typeof e=="string"||typeof e=="symbol"}const q5=Symbol("");var R_;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(R_||(R_={}));function ad(e,n){return Yi(new Error,{type:e,[q5]:!0},n)}function Dc(e,n){return e instanceof Error&&q5 in e&&(n==null||!!(e.type&n))}const F_="[^/]+?",GT={sensitive:!1,strict:!1,start:!0,end:!0},HT=/[.+*?^${}()[\]/\\]/g;function qT(e,n){const t=Yi({},GT,n),r=[];let i=t.start?"^":"";const s=[];for(const d of e){const g=d.length?[]:[90];t.strict&&!d.length&&(i+="/");for(let y=0;y<d.length;y++){const x=d[y];let _=40+(t.sensitive?.25:0);if(x.type===0)y||(i+="/"),i+=x.value.replace(HT,"\\$&"),_+=40;else if(x.type===1){const{value:M,repeatable:k,optional:N,regexp:T}=x;s.push({name:M,repeatable:k,optional:N});const F=T||F_;if(F!==F_){_+=10;try{new RegExp(`(${F})`)}catch(Q){throw new Error(`Invalid custom RegExp for param "${M}" (${F}): `+Q.message)}}let K=k?`((?:${F})(?:/(?:${F}))*)`:`(${F})`;y||(K=N&&d.length<2?`(?:/${K})`:"/"+K),N&&(K+="?"),i+=K,_+=20,N&&(_+=-8),k&&(_+=-20),F===".*"&&(_+=-50)}g.push(_)}r.push(g)}if(t.strict&&t.end){const d=r.length-1;r[d][r[d].length-1]+=.7000000000000001}t.strict||(i+="/?"),t.end?i+="$":t.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,t.sensitive?"":"i");function u(d){const g=d.match(o),y={};if(!g)return null;for(let x=1;x<g.length;x++){const _=g[x]||"",M=s[x-1];y[M.name]=_&&M.repeatable?_.split("/"):_}return y}function f(d){let g="",y=!1;for(const x of e){(!y||!g.endsWith("/"))&&(g+="/"),y=!1;for(const _ of x)if(_.type===0)g+=_.value;else if(_.type===1){const{value:M,repeatable:k,optional:N}=_,T=M in d?d[M]:"";if(qu(T)&&!k)throw new Error(`Provided param "${M}" is an array but it is not repeatable (* or + modifiers)`);const F=qu(T)?T.join("/"):T;if(!F)if(N)x.length<2&&(g.endsWith("/")?g=g.slice(0,-1):y=!0);else throw new Error(`Missing required param "${M}"`);g+=F}}return g||"/"}return{re:o,score:r,keys:s,parse:u,stringify:f}}function WT(e,n){let t=0;for(;t<e.length&&t<n.length;){const r=n[t]-e[t];if(r)return r;t++}return e.length<n.length?e.length===1&&e[0]===80?-1:1:e.length>n.length?n.length===1&&n[0]===80?1:-1:0}function W5(e,n){let t=0;const r=e.score,i=n.score;for(;t<r.length&&t<i.length;){const s=WT(r[t],i[t]);if(s)return s;t++}if(Math.abs(i.length-r.length)===1){if(j_(r))return 1;if(j_(i))return-1}return i.length-r.length}function j_(e){const n=e[e.length-1];return e.length>0&&n[n.length-1]<0}const ZT={type:0,value:""},KT=/[a-zA-Z0-9_]/;function YT(e){if(!e)return[[]];if(e==="/")return[[ZT]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function n(_){throw new Error(`ERR (${t})/"${d}": ${_}`)}let t=0,r=t;const i=[];let s;function o(){s&&i.push(s),s=[]}let u=0,f,d="",g="";function y(){d&&(t===0?s.push({type:0,value:d}):t===1||t===2||t===3?(s.length>1&&(f==="*"||f==="+")&&n(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:d,regexp:g,repeatable:f==="*"||f==="+",optional:f==="*"||f==="?"})):n("Invalid state to consume buffer"),d="")}function x(){d+=f}for(;u<e.length;){if(f=e[u++],f==="\\"&&t!==2){r=t,t=4;continue}switch(t){case 0:f==="/"?(d&&y(),o()):f===":"?(y(),t=1):x();break;case 4:x(),t=r;break;case 1:f==="("?t=2:KT.test(f)?x():(y(),t=0,f!=="*"&&f!=="?"&&f!=="+"&&u--);break;case 2:f===")"?g[g.length-1]=="\\"?g=g.slice(0,-1)+f:t=3:g+=f;break;case 3:y(),t=0,f!=="*"&&f!=="?"&&f!=="+"&&u--,g="";break;default:n("Unknown state");break}}return t===2&&n(`Unfinished custom RegExp for param "${d}"`),y(),o(),i}function JT(e,n,t){const r=qT(YT(e.path),t),i=Yi(r,{record:e,parent:n,children:[],alias:[]});return n&&!i.record.aliasOf==!n.record.aliasOf&&n.children.push(i),i}function XT(e,n){const t=[],r=new Map;n=V_({strict:!1,end:!0,sensitive:!1},n);function i(y){return r.get(y)}function s(y,x,_){const M=!_,k=$_(y);k.aliasOf=_&&_.record;const N=V_(n,y),T=[k];if("alias"in y){const Q=typeof y.alias=="string"?[y.alias]:y.alias;for(const he of Q)T.push($_(Yi({},k,{components:_?_.record.components:k.components,path:he,aliasOf:_?_.record:k})))}let F,K;for(const Q of T){const{path:he}=Q;if(x&&he[0]!=="/"){const fe=x.record.path,me=fe[fe.length-1]==="/"?"":"/";Q.path=x.record.path+(he&&me+he)}if(F=JT(Q,x,N),_?_.alias.push(F):(K=K||F,K!==F&&K.alias.push(F),M&&y.name&&!U_(F)&&o(y.name)),Z5(F)&&f(F),k.children){const fe=k.children;for(let me=0;me<fe.length;me++)s(fe[me],F,_&&_.children[me])}_=_||F}return K?()=>{o(K)}:ip}function o(y){if(H5(y)){const x=r.get(y);x&&(r.delete(y),t.splice(t.indexOf(x),1),x.children.forEach(o),x.alias.forEach(o))}else{const x=t.indexOf(y);x>-1&&(t.splice(x,1),y.record.name&&r.delete(y.record.name),y.children.forEach(o),y.alias.forEach(o))}}function u(){return t}function f(y){const x=t8(y,t);t.splice(x,0,y),y.record.name&&!U_(y)&&r.set(y.record.name,y)}function d(y,x){let _,M={},k,N;if("name"in y&&y.name){if(_=r.get(y.name),!_)throw ad(1,{location:y});N=_.record.name,M=Yi(z_(x.params,_.keys.filter(K=>!K.optional).concat(_.parent?_.parent.keys.filter(K=>K.optional):[]).map(K=>K.name)),y.params&&z_(y.params,_.keys.map(K=>K.name))),k=_.stringify(M)}else if(y.path!=null)k=y.path,_=t.find(K=>K.re.test(k)),_&&(M=_.parse(k),N=_.record.name);else{if(_=x.name?r.get(x.name):t.find(K=>K.re.test(x.path)),!_)throw ad(1,{location:y,currentLocation:x});N=_.record.name,M=Yi({},x.params,y.params),k=_.stringify(M)}const T=[];let F=_;for(;F;)T.unshift(F.record),F=F.parent;return{name:N,path:k,params:M,matched:T,meta:e8(T)}}e.forEach(y=>s(y));function g(){t.length=0,r.clear()}return{addRoute:s,resolve:d,removeRoute:o,clearRoutes:g,getRoutes:u,getRecordMatcher:i}}function z_(e,n){const t={};for(const r of n)r in e&&(t[r]=e[r]);return t}function $_(e){const n={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:QT(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(n,"mods",{value:{}}),n}function QT(e){const n={},t=e.props||!1;if("component"in e)n.default=t;else for(const r in e.components)n[r]=typeof t=="object"?t[r]:t;return n}function U_(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function e8(e){return e.reduce((n,t)=>Yi(n,t.meta),{})}function V_(e,n){const t={};for(const r in e)t[r]=r in n?n[r]:e[r];return t}function t8(e,n){let t=0,r=n.length;for(;t!==r;){const s=t+r>>1;W5(e,n[s])<0?r=s:t=s+1}const i=n8(e);return i&&(r=n.lastIndexOf(i,r-1)),r}function n8(e){let n=e;for(;n=n.parent;)if(Z5(n)&&W5(e,n)===0)return n}function Z5({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function r8(e){const n={};if(e===""||e==="?")return n;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(j5," "),o=s.indexOf("="),u=Cp(o<0?s:s.slice(0,o)),f=o<0?null:Cp(s.slice(o+1));if(u in n){let d=n[u];qu(d)||(d=n[u]=[d]),d.push(f)}else n[u]=f}return n}function G_(e){let n="";for(let t in e){const r=e[t];if(t=LT(t),r==null){r!==void 0&&(n+=(n.length?"&":"")+t);continue}(qu(r)?r.map(s=>s&&i1(s)):[r&&i1(r)]).forEach(s=>{s!==void 0&&(n+=(n.length?"&":"")+t,s!=null&&(n+="="+s))})}return n}function i8(e){const n={};for(const t in e){const r=e[t];r!==void 0&&(n[t]=qu(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return n}const o8=Symbol(""),H_=Symbol(""),nm=Symbol(""),cy=Symbol(""),s1=Symbol("");function Md(){let e=[];function n(r){return e.push(r),()=>{const i=e.indexOf(r);i>-1&&e.splice(i,1)}}function t(){e=[]}return{add:n,list:()=>e.slice(),reset:t}}function hf(e,n,t,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((u,f)=>{const d=x=>{x===!1?f(ad(4,{from:t,to:n})):x instanceof Error?f(x):VT(x)?f(ad(2,{from:n,to:x})):(o&&r.enterCallbacks[i]===o&&typeof x=="function"&&o.push(x),u())},g=s(()=>e.call(r&&r.instances[i],n,t,d));let y=Promise.resolve(g);e.length<3&&(y=y.then(d)),y.catch(x=>f(x))})}function Qm(e,n,t,r,i=s=>s()){const s=[];for(const o of e)for(const u in o.components){let f=o.components[u];if(!(n!=="beforeRouteEnter"&&!o.instances[u]))if(R5(f)){const g=(f.__vccOpts||f)[n];g&&s.push(hf(g,t,r,o,u,i))}else{let d=f();s.push(()=>d.then(g=>{if(!g)throw new Error(`Couldn't resolve component "${u}" at "${o.path}"`);const y=hT(g)?g.default:g;o.mods[u]=g,o.components[u]=y;const _=(y.__vccOpts||y)[n];return _&&hf(_,t,r,o,u,i)()}))}}return s}function q_(e){const n=Wl(nm),t=Wl(cy),r=cr(()=>{const f=Wn(e.to);return n.resolve(f)}),i=cr(()=>{const{matched:f}=r.value,{length:d}=f,g=f[d-1],y=t.matched;if(!g||!y.length)return-1;const x=y.findIndex(sd.bind(null,g));if(x>-1)return x;const _=W_(f[d-2]);return d>1&&W_(g)===_&&y[y.length-1].path!==_?y.findIndex(sd.bind(null,f[d-2])):x}),s=cr(()=>i.value>-1&&u8(t.params,r.value.params)),o=cr(()=>i.value>-1&&i.value===t.matched.length-1&&V5(t.params,r.value.params));function u(f={}){if(l8(f)){const d=n[Wn(e.replace)?"replace":"push"](Wn(e.to)).catch(ip);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:r,href:cr(()=>r.value.href),isActive:s,isExactActive:o,navigate:u}}function s8(e){return e.length===1?e[0]:e}const a8=cs({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:q_,setup(e,{slots:n}){const t=Kl(q_(e)),{options:r}=Wl(nm),i=cr(()=>({[Z_(e.activeClass,r.linkActiveClass,"router-link-active")]:t.isActive,[Z_(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const s=n.default&&s8(n.default(t));return e.custom?s:G0("a",{"aria-current":t.isExactActive?e.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:i.value},s)}}}),zd=a8;function l8(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const n=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return e.preventDefault&&e.preventDefault(),!0}}function u8(e,n){for(const t in n){const r=n[t],i=e[t];if(typeof r=="string"){if(r!==i)return!1}else if(!qu(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function W_(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Z_=(e,n,t)=>e??n??t,c8=cs({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:n,slots:t}){const r=Wl(s1),i=cr(()=>e.route||r.value),s=Wl(H_,0),o=cr(()=>{let d=Wn(s);const{matched:g}=i.value;let y;for(;(y=g[d])&&!y.components;)d++;return d}),u=cr(()=>i.value.matched[o.value]);Qd(H_,cr(()=>o.value+1)),Qd(o8,u),Qd(s1,i);const f=jt();return Co(()=>[f.value,u.value,e.name],([d,g,y],[x,_,M])=>{g&&(g.instances[y]=d,_&&_!==g&&d&&d===x&&(g.leaveGuards.size||(g.leaveGuards=_.leaveGuards),g.updateGuards.size||(g.updateGuards=_.updateGuards))),d&&g&&(!_||!sd(g,_)||!x)&&(g.enterCallbacks[y]||[]).forEach(k=>k(d))},{flush:"post"}),()=>{const d=i.value,g=e.name,y=u.value,x=y&&y.components[g];if(!x)return K_(t.default,{Component:x,route:d});const _=y.props[g],M=_?_===!0?d.params:typeof _=="function"?_(d):_:null,N=G0(x,Yi({},M,n,{onVnodeUnmounted:T=>{T.component.isUnmounted&&(y.instances[g]=null)},ref:f}));return K_(t.default,{Component:N,route:d})||N}}});function K_(e,n){if(!e)return null;const t=e(n);return t.length===1?t[0]:t}const K5=c8;function f8(e){const n=XT(e.routes,e),t=e.parseQuery||r8,r=e.stringifyQuery||G_,i=e.history,s=Md(),o=Md(),u=Md(),f=V1(tf);let d=tf;Fh&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const g=Jm.bind(null,pe=>""+pe),y=Jm.bind(null,CT),x=Jm.bind(null,Cp);function _(pe,Z){let D,ke;return H5(pe)?(D=n.getRecordMatcher(pe),ke=Z):ke=pe,n.addRoute(ke,D)}function M(pe){const Z=n.getRecordMatcher(pe);Z&&n.removeRoute(Z)}function k(){return n.getRoutes().map(pe=>pe.record)}function N(pe){return!!n.getRecordMatcher(pe)}function T(pe,Z){if(Z=Yi({},Z||f.value),typeof pe=="string"){const ne=Xm(t,pe,Z.path),ye=n.resolve({path:ne.path},Z),de=i.createHref(ne.fullPath);return Yi(ne,ye,{params:x(ye.params),hash:Cp(ne.hash),redirectedFrom:void 0,href:de})}let D;if(pe.path!=null)D=Yi({},pe,{path:Xm(t,pe.path,Z.path).path});else{const ne=Yi({},pe.params);for(const ye in ne)ne[ye]==null&&delete ne[ye];D=Yi({},pe,{params:y(ne)}),Z.params=y(Z.params)}const ke=n.resolve(D,Z),Me=pe.hash||"";ke.params=g(x(ke.params));const Ge=MT(r,Yi({},pe,{hash:xT(Me),path:ke.path})),ce=i.createHref(Ge);return Yi({fullPath:Ge,hash:Me,query:r===G_?i8(pe.query):pe.query||{}},ke,{redirectedFrom:void 0,href:ce})}function F(pe){return typeof pe=="string"?Xm(t,pe,f.value.path):Yi({},pe)}function K(pe,Z){if(d!==pe)return ad(8,{from:Z,to:pe})}function Q(pe){return me(pe)}function he(pe){return Q(Yi(F(pe),{replace:!0}))}function fe(pe){const Z=pe.matched[pe.matched.length-1];if(Z&&Z.redirect){const{redirect:D}=Z;let ke=typeof D=="function"?D(pe):D;return typeof ke=="string"&&(ke=ke.includes("?")||ke.includes("#")?ke=F(ke):{path:ke},ke.params={}),Yi({query:pe.query,hash:pe.hash,params:ke.path!=null?{}:pe.params},ke)}}function me(pe,Z){const D=d=T(pe),ke=f.value,Me=pe.state,Ge=pe.force,ce=pe.replace===!0,ne=fe(D);if(ne)return me(Yi(F(ne),{state:typeof ne=="object"?Yi({},Me,ne.state):Me,force:Ge,replace:ce}),Z||D);const ye=D;ye.redirectedFrom=Z;let de;return!Ge&&AT(r,ke,D)&&(de=ad(16,{to:ye,from:ke}),Te(ke,ke,!0,!1)),(de?Promise.resolve(de):X(ye,ke)).catch(Ze=>Dc(Ze)?Dc(Ze,2)?Ze:Ee(Ze):ie(Ze,ye,ke)).then(Ze=>{if(Ze){if(Dc(Ze,2))return me(Yi({replace:ce},F(Ze.to),{state:typeof Ze.to=="object"?Yi({},Me,Ze.to.state):Me,force:Ge}),Z||ye)}else Ze=O(ye,ke,!0,ce,Me);return R(ye,ke,Ze),Ze})}function G(pe,Z){const D=K(pe,Z);return D?Promise.reject(D):Promise.resolve()}function $(pe){const Z=ee.values().next().value;return Z&&typeof Z.runWithContext=="function"?Z.runWithContext(pe):pe()}function X(pe,Z){let D;const[ke,Me,Ge]=h8(pe,Z);D=Qm(ke.reverse(),"beforeRouteLeave",pe,Z);for(const ne of ke)ne.leaveGuards.forEach(ye=>{D.push(hf(ye,pe,Z))});const ce=G.bind(null,pe,Z);return D.push(ce),le(D).then(()=>{D=[];for(const ne of s.list())D.push(hf(ne,pe,Z));return D.push(ce),le(D)}).then(()=>{D=Qm(Me,"beforeRouteUpdate",pe,Z);for(const ne of Me)ne.updateGuards.forEach(ye=>{D.push(hf(ye,pe,Z))});return D.push(ce),le(D)}).then(()=>{D=[];for(const ne of Ge)if(ne.beforeEnter)if(qu(ne.beforeEnter))for(const ye of ne.beforeEnter)D.push(hf(ye,pe,Z));else D.push(hf(ne.beforeEnter,pe,Z));return D.push(ce),le(D)}).then(()=>(pe.matched.forEach(ne=>ne.enterCallbacks={}),D=Qm(Ge,"beforeRouteEnter",pe,Z,$),D.push(ce),le(D))).then(()=>{D=[];for(const ne of o.list())D.push(hf(ne,pe,Z));return D.push(ce),le(D)}).catch(ne=>Dc(ne,8)?ne:Promise.reject(ne))}function R(pe,Z,D){u.list().forEach(ke=>$(()=>ke(pe,Z,D)))}function O(pe,Z,D,ke,Me){const Ge=K(pe,Z);if(Ge)return Ge;const ce=Z===tf,ne=Fh?history.state:{};D&&(ke||ce?i.replace(pe.fullPath,Yi({scroll:ce&&ne&&ne.scroll},Me)):i.push(pe.fullPath,Me)),f.value=pe,Te(pe,Z,D,ce),Ee()}let B;function z(){B||(B=i.listen((pe,Z,D)=>{if(!ue.listening)return;const ke=T(pe),Me=fe(ke);if(Me){me(Yi(Me,{replace:!0,force:!0}),ke).catch(ip);return}d=ke;const Ge=f.value;Fh&&RT(O_(Ge.fullPath,D.delta),tm()),X(ke,Ge).catch(ce=>Dc(ce,12)?ce:Dc(ce,2)?(me(Yi(F(ce.to),{force:!0}),ke).then(ne=>{Dc(ne,20)&&!D.delta&&D.type===Ep.pop&&i.go(-1,!1)}).catch(ip),Promise.reject()):(D.delta&&i.go(-D.delta,!1),ie(ce,ke,Ge))).then(ce=>{ce=ce||O(ke,Ge,!1),ce&&(D.delta&&!Dc(ce,8)?i.go(-D.delta,!1):D.type===Ep.pop&&Dc(ce,20)&&i.go(-1,!1)),R(ke,Ge,ce)}).catch(ip)}))}let W=Md(),V=Md(),oe;function ie(pe,Z,D){Ee(pe);const ke=V.list();return ke.length?ke.forEach(Me=>Me(pe,Z,D)):console.error(pe),Promise.reject(pe)}function xe(){return oe&&f.value!==tf?Promise.resolve():new Promise((pe,Z)=>{W.add([pe,Z])})}function Ee(pe){return oe||(oe=!pe,z(),W.list().forEach(([Z,D])=>pe?D(pe):Z()),W.reset()),pe}function Te(pe,Z,D,ke){const{scrollBehavior:Me}=e;if(!Fh||!Me)return Promise.resolve();const Ge=!D&&FT(O_(pe.fullPath,0))||(ke||!D)&&history.state&&history.state.scroll||null;return zs().then(()=>Me(pe,Z,Ge)).then(ce=>ce&&BT(ce)).catch(ce=>ie(ce,pe,Z))}const Y=pe=>i.go(pe);let q;const ee=new Set,ue={currentRoute:f,listening:!0,addRoute:_,removeRoute:M,clearRoutes:n.clearRoutes,hasRoute:N,getRoutes:k,resolve:T,options:e,push:Q,replace:he,go:Y,back:()=>Y(-1),forward:()=>Y(1),beforeEach:s.add,beforeResolve:o.add,afterEach:u.add,onError:V.add,isReady:xe,install(pe){const Z=this;pe.component("RouterLink",zd),pe.component("RouterView",K5),pe.config.globalProperties.$router=Z,Object.defineProperty(pe.config.globalProperties,"$route",{enumerable:!0,get:()=>Wn(f)}),Fh&&!q&&f.value===tf&&(q=!0,Q(i.location).catch(Me=>{}));const D={};for(const Me in tf)Object.defineProperty(D,Me,{get:()=>f.value[Me],enumerable:!0});pe.provide(nm,Z),pe.provide(cy,U1(D)),pe.provide(s1,f);const ke=pe.unmount;ee.add(pe),pe.unmount=function(){ee.delete(pe),ee.size<1&&(d=tf,B&&B(),B=null,f.value=tf,q=!1,oe=!1),ke()}}};function le(pe){return pe.reduce((Z,D)=>Z.then(()=>$(D)),Promise.resolve())}return ue}function h8(e,n){const t=[],r=[],i=[],s=Math.max(n.matched.length,e.matched.length);for(let o=0;o<s;o++){const u=n.matched[o];u&&(e.matched.find(d=>sd(d,u))?r.push(u):t.push(u));const f=e.matched[o];f&&(n.matched.find(d=>sd(d,f))||i.push(f))}return[t,r,i]}function Bp(){return Wl(nm)}function mG(e){return Wl(cy)}const Vu=Dp("notification",()=>{const e=jt([]),n=jt(0),t=jt(null),r=cr(()=>[...e.value].sort((y,x)=>x.timestamp-y.timestamp));function i({type:y,message:x,duration:_=5e3}){const M=++n.value,k=Date.now(),N={id:M,type:y,message:x,duration:_,timestamp:k};return e.value.push(N),t.value=M,_>0&&setTimeout(()=>{d(M)},_),M}const s=(y,x=5e3)=>i({type:"success",message:y,duration:x}),o=(y,x=5e3)=>i({type:"error",message:y,duration:x}),u=(y,x=5e3)=>i({type:"info",message:y,duration:x}),f=(y,x=5e3)=>i({type:"warning",message:y,duration:x});function d(y){const x=e.value.findIndex(_=>_.id===y);x!==-1&&e.value.splice(x,1),t.value===y&&(t.value=null)}function g(){e.value=[],t.value=null}return{notifications:r,lastAddedId:t,addNotification:i,removeNotification:d,clearAll:g,success:s,error:o,info:u,warning:f}}),d8=Object.freeze(Object.defineProperty({__proto__:null,useNotificationStore:Vu},Symbol.toStringTag,{value:"Module"}));var ea=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Y5(e){if(e.__esModule)return e;var n=e.default;if(typeof n=="function"){var t=function r(){return this instanceof r?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};t.prototype=n.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),t}function p8(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var J5=p8,g8=typeof ea=="object"&&ea&&ea.Object===Object&&ea,m8=g8,v8=m8,y8=typeof self=="object"&&self&&self.Object===Object&&self,_8=v8||y8||Function("return this")(),X5=_8,b8=X5,w8=function(){return b8.Date.now()},x8=w8,L8=/\s/;function S8(e){for(var n=e.length;n--&&L8.test(e.charAt(n)););return n}var C8=S8,E8=C8,P8=/^\s+/;function M8(e){return e&&e.slice(0,E8(e)+1).replace(P8,"")}var A8=M8,k8=X5,T8=k8.Symbol,Q5=T8,Y_=Q5,ex=Object.prototype,N8=ex.hasOwnProperty,D8=ex.toString,Ad=Y_?Y_.toStringTag:void 0;function I8(e){var n=N8.call(e,Ad),t=e[Ad];try{e[Ad]=void 0;var r=!0}catch{}var i=D8.call(e);return r&&(n?e[Ad]=t:delete e[Ad]),i}var O8=I8,B8=Object.prototype,R8=B8.toString;function F8(e){return R8.call(e)}var j8=F8,J_=Q5,z8=O8,$8=j8,U8="[object Null]",V8="[object Undefined]",X_=J_?J_.toStringTag:void 0;function G8(e){return e==null?e===void 0?V8:U8:X_&&X_ in Object(e)?z8(e):$8(e)}var H8=G8;function q8(e){return e!=null&&typeof e=="object"}var W8=q8,Z8=H8,K8=W8,Y8="[object Symbol]";function J8(e){return typeof e=="symbol"||K8(e)&&Z8(e)==Y8}var X8=J8,Q8=A8,Q_=J5,eN=X8,eb=NaN,tN=/^[-+]0x[0-9a-f]+$/i,nN=/^0b[01]+$/i,rN=/^0o[0-7]+$/i,iN=parseInt;function oN(e){if(typeof e=="number")return e;if(eN(e))return eb;if(Q_(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=Q_(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=Q8(e);var t=nN.test(e);return t||rN.test(e)?iN(e.slice(2),t?2:8):tN.test(e)?eb:+e}var sN=oN,aN=J5,ev=x8,tb=sN,lN="Expected a function",uN=Math.max,cN=Math.min;function fN(e,n,t){var r,i,s,o,u,f,d=0,g=!1,y=!1,x=!0;if(typeof e!="function")throw new TypeError(lN);n=tb(n)||0,aN(t)&&(g=!!t.leading,y="maxWait"in t,s=y?uN(tb(t.maxWait)||0,n):s,x="trailing"in t?!!t.trailing:x);function _(fe){var me=r,G=i;return r=i=void 0,d=fe,o=e.apply(G,me),o}function M(fe){return d=fe,u=setTimeout(T,n),g?_(fe):o}function k(fe){var me=fe-f,G=fe-d,$=n-me;return y?cN($,s-G):$}function N(fe){var me=fe-f,G=fe-d;return f===void 0||me>=n||me<0||y&&G>=s}function T(){var fe=ev();if(N(fe))return F(fe);u=setTimeout(T,k(fe))}function F(fe){return u=void 0,x&&r?_(fe):(r=i=void 0,o)}function K(){u!==void 0&&clearTimeout(u),d=0,r=f=i=u=void 0}function Q(){return u===void 0?o:F(ev())}function he(){var fe=ev(),me=N(fe);if(r=arguments,i=this,f=fe,me){if(u===void 0)return M(f);if(y)return clearTimeout(u),u=setTimeout(T,n),_(f)}return u===void 0&&(u=setTimeout(T,n)),o}return he.cancel=K,he.flush=Q,he}var hN=fN;const dN=fy(hN),pN={class:"relative w-full"},gN={key:0,class:"search-results w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},mN=["onClick"],nb=cs({__name:"SearchBar",emits:["select-location"],setup(e,{emit:n}){const t=jt(""),r=jt([]),i=n,s=dN(async f=>{if(f.length<3){r.value=[];return}try{const g=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(f)}`)).json();r.value=g}catch(d){console.error("Erreur lors de la recherche d'adresse:",d),r.value=[]}},300);function o(){s(t.value)}function u(f){t.value=f.display_name,r.value=[],i("select-location",{lat:parseFloat(f.lat),lng:parseFloat(f.lon)})}return(f,d)=>($e(),He("div",pN,[Fn(E("input",{"onUpdate:modelValue":d[0]||(d[0]=g=>t.value=g),onInput:o,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[ri,t.value]]),r.value.length>0?($e(),He("div",gN,[($e(!0),He(Tn,null,xr(r.value,g=>($e(),He("div",{key:g.place_id,onClick:y=>u(g),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},Wt(g.display_name),9,mN))),128))])):cn("",!0)]))}}),vN={class:"perf-title"},yN={class:"perf-basic-stats"},_N={class:"perf-stat"},bN={class:"perf-stat"},wN={class:"perf-expand-btn"},xN={key:0,class:"perf-content"},LN={class:"perf-section"},SN={class:"perf-metrics"},CN={class:"perf-metric"},EN={class:"perf-metric-value"},PN={class:"perf-metric"},MN={class:"perf-metric-value"},AN={class:"perf-metric"},kN={class:"perf-metric-value"},TN={class:"perf-metric"},NN={class:"perf-metric-value"},DN={class:"perf-section"},IN={class:"perf-metrics"},ON={key:0,class:"perf-metric"},BN={class:"perf-metric-value"},RN={key:1,class:"perf-metric"},FN={class:"perf-metric-value"},jN={key:2,class:"perf-metric"},zN={class:"perf-metric-value"},$N={class:"perf-section"},UN={class:"perf-table"},VN={class:"perf-table-cell"},GN={class:"perf-table-cell"},HN={class:"perf-table-cell"},qN={class:"perf-table-cell"},WN=["onClick"],ZN={key:0,class:"perf-empty"},KN=cs({__name:"PerformancePanel",props:{position:{}},setup(e){const t=e.position||"bottom-left",r=jt(!1),{isQueryParamEnabled:i,isRecording:s,measures:o,longTasks:u,memorySnapshots:f,framesPerSecond:d,operationHistory:g,startRecording:y,stopRecording:x,clearRecording:_,captureMemorySnapshot:M,getSlowOperations:k,getPerformanceReport:N,getOperationDetails:T}=gd(),F=cr(()=>{const O=N()??{totalMeasures:0,totalLongTasks:0,slowestOperations:[],averageFps:0,memoryUsage:null};return{totalMeasures:O.totalMeasures,totalLongTasks:O.totalLongTasks,averageDuration:O.slowestOperations.length>0?O.slowestOperations.reduce((B,z)=>B+z.duration,0)/O.slowestOperations.length:0,fps:O.averageFps,slowestOperations:O.slowestOperations,memoryUsage:O.memoryUsage}}),K=cr(()=>(N()??{slowestOperations:[]}).slowestOperations.slice(0,5).map(B=>({operation:B.name,component:B.component||"unknown",durationMs:B.duration,timestamp:B.startTime}))),Q=jt(null);Is(()=>{i.value&&(Q.value=window.setInterval(()=>{M()},1e3))}),mc(()=>{Q.value!==null&&clearInterval(Q.value)});function he(O){return O===void 0?"N/A":O<1024?O+" B":O<1024*1024?(O/1024).toFixed(2)+" KB":O<1024*1024*1024?(O/(1024*1024)).toFixed(2)+" MB":(O/(1024*1024*1024)).toFixed(2)+" GB"}function fe(O){return O.toFixed(2)}const me=()=>{M()};function G(){const O=N(),B="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(O,null,2)),z=document.createElement("a");z.setAttribute("href",B),z.setAttribute("download","performance_report.json"),document.body.appendChild(z),z.click(),z.remove()}function $(){_(),me()}function X(){const O=N();navigator.clipboard.writeText(JSON.stringify(O,null,2)).then(()=>{alert("Donnes de performance copies dans le presse-papiers")}).catch(B=>{console.error("Erreur lors de la copie des donnes",B),alert("Erreur lors de la copie des donnes")})}async function R(O){const B=T(O.operation,O.timestamp);if(!B){alert("Impossible de trouver les dtails de cette opration");return}const z={operation:{...B.operation,startTimeRelative:"0ms",startTimeAbsolute:new Date(B.operation.startTime).toISOString()},context:{...B.context,relatedOperations:B.context.relatedOperations.map(W=>({...W,startTime:`+${W.startTime.toFixed(2)}ms`})),longTasks:B.context.longTasks.map(W=>({...W,startTime:`+${W.startTime.toFixed(2)}ms`})),memorySnapshots:B.context.memorySnapshots.map(W=>({...W,timestamp:`+${W.timestamp.toFixed(2)}ms`,usedJSHeapSize:W.usedJSHeapSize?he(W.usedJSHeapSize):"N/A",totalJSHeapSize:W.totalJSHeapSize?he(W.totalJSHeapSize):"N/A"}))},summary:{...B.summary,memoryDelta:he(B.summary.memoryDelta),maxLongTaskDuration:`${B.summary.maxLongTaskDuration.toFixed(2)}ms`}};try{await navigator.clipboard.writeText(JSON.stringify(z,null,2)),alert("Dtails de l'opration copis dans le presse-papiers")}catch(W){console.error("Erreur lors de la copie des dtails",W),alert("Erreur lors de la copie des dtails")}}return(O,B)=>{var z,W,V,oe,ie,xe;return Wn(i)?($e(),He("div",{key:0,class:Fi(["performance-panel",`position-${Wn(t)}`,{expanded:r.value}])},[E("div",{class:"perf-header",onClick:B[0]||(B[0]=Ee=>r.value=!r.value)},[E("div",vN,[E("div",{class:Fi(["perf-indicator",{active:Wn(s)}])},null,2),B[1]||(B[1]=E("span",null,"Performance",-1))]),E("div",yN,[E("span",_N,Wt(F.value.fps)+" FPS",1),E("span",bN,Wt(fe(F.value.averageDuration))+"ms",1)]),E("button",wN,Wt(r.value?"":""),1)]),r.value?($e(),He("div",xN,[E("div",LN,[B[6]||(B[6]=E("h3",null,"Mtriques gnrales",-1)),E("div",SN,[E("div",CN,[B[2]||(B[2]=E("span",{class:"perf-metric-label"},"Mesures",-1)),E("span",EN,Wt(F.value.totalMeasures),1)]),E("div",PN,[B[3]||(B[3]=E("span",{class:"perf-metric-label"},"Tches longues",-1)),E("span",MN,Wt(F.value.totalLongTasks),1)]),E("div",AN,[B[4]||(B[4]=E("span",{class:"perf-metric-label"},"Dure moyenne",-1)),E("span",kN,Wt(fe(F.value.averageDuration))+"ms",1)]),E("div",TN,[B[5]||(B[5]=E("span",{class:"perf-metric-label"},"FPS",-1)),E("span",NN,Wt(F.value.fps),1)])])]),E("div",DN,[B[10]||(B[10]=E("h3",null,"Mmoire",-1)),E("div",IN,[((z=F.value.memoryUsage)==null?void 0:z.usedJSHeapSize)!==void 0?($e(),He("div",ON,[B[7]||(B[7]=E("span",{class:"perf-metric-label"},"Utilise",-1)),E("span",BN,Wt(he((W=F.value.memoryUsage)==null?void 0:W.usedJSHeapSize)),1)])):cn("",!0),((V=F.value.memoryUsage)==null?void 0:V.totalJSHeapSize)!==void 0?($e(),He("div",RN,[B[8]||(B[8]=E("span",{class:"perf-metric-label"},"Totale",-1)),E("span",FN,Wt(he((oe=F.value.memoryUsage)==null?void 0:oe.totalJSHeapSize)),1)])):cn("",!0),((ie=F.value.memoryUsage)==null?void 0:ie.jsHeapSizeLimit)!==void 0?($e(),He("div",jN,[B[9]||(B[9]=E("span",{class:"perf-metric-label"},"Limite",-1)),E("span",zN,Wt(he((xe=F.value.memoryUsage)==null?void 0:xe.jsHeapSizeLimit)),1)])):cn("",!0)])]),E("div",$N,[B[13]||(B[13]=E("h3",null,"Oprations les plus lentes",-1)),E("div",UN,[B[12]||(B[12]=zu('<div class="perf-table-header" data-v-fefe39b0><div class="perf-table-cell" data-v-fefe39b0>Opration</div><div class="perf-table-cell" data-v-fefe39b0>Composant</div><div class="perf-table-cell" data-v-fefe39b0>Dure</div><div class="perf-table-cell" data-v-fefe39b0>Actions</div></div>',1)),($e(!0),He(Tn,null,xr(K.value,Ee=>($e(),He("div",{class:"perf-table-row",key:Ee.timestamp},[E("div",VN,Wt(Ee.operation),1),E("div",GN,Wt(Ee.component),1),E("div",HN,Wt(fe(Ee.durationMs))+"ms",1),E("div",qN,[E("button",{onClick:Te=>R(Ee),class:"perf-action-button",title:"Copier les dtails"},B[11]||(B[11]=[E("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]),8,WN)])]))),128)),K.value.length===0?($e(),He("div",ZN," Aucune opration enregistre ")):cn("",!0)])]),E("div",{class:"perf-actions"},[E("button",{onClick:$,class:"perf-button"}," Rinitialiser "),E("button",{onClick:G,class:"perf-button"}," Tlcharger "),E("button",{onClick:X,class:"perf-button"}," Copier ")])])):cn("",!0)],2)):cn("",!0)}}}),Rp=(e,n)=>{const t=e.__vccOpts||e;for(const[r,i]of n)t[r]=i;return t},YN=Rp(KN,[["__scopeId","data-v-fefe39b0"]]),JN={class:"h-screen flex flex-col"},XN={key:0,class:"bg-white shadow-sm z-[2500] flex-shrink-0"},QN={class:"mx-auto px-4 sm:px-6 lg:px-8"},e7={class:"flex h-16 items-center justify-between"},t7={class:"flex items-center"},n7={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},r7={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},i7={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},o7={class:"hidden md:flex md:ml-6 space-x-8"},s7={key:0,class:"flex-1 mx-2"},a7={class:"hidden md:block"},l7={class:"md:hidden"},u7={key:1,class:"flex-1"},c7={class:"flex items-center space-x-2 md:space-x-4"},f7={key:0,class:"hidden md:flex items-center justify-center p-2 text-amber-500 hover:text-amber-600 rounded-full hover:bg-amber-50 focus:outline-none focus:ring-2 focus:ring-amber-400",title:"Performance active"},h7={class:"relative"},d7={class:"px-4 py-2 border-b border-gray-100 flex justify-between items-center"},p7={class:"flex items-center justify-between w-full"},g7={class:"flex items-center space-x-3"},m7={class:"max-h-72 overflow-y-auto"},v7={key:0,class:"px-4 py-3 text-sm text-gray-500 text-center"},y7={class:"flex items-start"},_7={class:"flex-shrink-0 mr-3"},b7={key:0,class:"h-6 w-6 md:h-5 md:w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor"},w7={key:1,class:"h-6 w-6 md:h-5 md:w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},x7={key:2,class:"h-6 w-6 md:h-5 md:w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},L7={key:3,class:"h-6 w-6 md:h-5 md:w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor"},S7={class:"flex-1"},C7={class:"text-sm md:text-sm text-gray-800"},E7=["onClick"],P7={class:"relative"},M7={class:"hidden md:flex flex-col items-end"},A7={class:"text-sm font-medium text-gray-700"},k7={key:0,class:"text-xs text-gray-500"},T7=["src","alt"],N7={class:"md:hidden px-4 py-2 border-b border-gray-100 flex justify-between items-center"},D7={class:"text-sm font-semibold text-gray-700"},I7={class:"text-xs text-gray-500"},O7={key:0,class:"md:hidden fixed inset-0 bg-white shadow-lg z-[3000] border-t border-gray-200",style:{top:"var(--header-height)"}},B7={class:"space-y-1 px-2 pb-3 pt-2"},R7=cs({__name:"App",setup(e){const n=Bp(),t=ma(),r=Vu(),{isQueryParamEnabled:i}=gd(),s=jt(!1),o=jt(!1),u=jt(!1),f=jt(!1),d=jt(null),g=jt(!1),y=jt(!1),x=jt(null),_=jt("13px"),M=jt("65px");function k(){y.value=window.innerWidth<768}Is(()=>{k(),window.addEventListener("resize",k),window.addEventListener("resize",N)}),ch(()=>{window.removeEventListener("resize",k),window.removeEventListener("resize",N)});function N(){if(!x.value)return;const B=x.value.getBoundingClientRect();_.value=`${B.top+window.scrollY+5}px`;const z=B.left+B.width/2;M.value=`${window.innerWidth-z-22}px`}const T=cr(()=>{const B=t.user;if(!B)return"";const z=`${B.first_name} ${B.last_name.toUpperCase()}`;return B.company_name?`${z} (${B.company_name})`:z}),F=cr(()=>{var z;switch((z=t.user)==null?void 0:z.user_type){case"admin":return"Accs administrateur";case"entreprise":return"Accs entreprise";case"salarie":return"Accs salarie";case"visiteur":return"Accs visiteur";default:return""}}),K=cr(()=>{var B;return((B=t.user)==null?void 0:B.user_type)==="admin"}),Q=cr(()=>t.isAuthenticated),he=[{name:"Carte",to:"/"},{name:"Notes",to:"/notes"}],fe=cr(()=>{var z;if(!Q.value)return[];const B=[...he];return(K.value||((z=t.user)==null?void 0:z.user_type)==="entreprise")&&B.push({name:"Utilisateurs",to:"/users"}),B}),me=cr(()=>Q.value?[{name:"Mon profil",to:"/profile"}]:[]);async function G(){try{await t.logout(),n.push("/login")}catch(B){console.error("Erreur lors de la dconnexion:",B)}}function $(B){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:B.lat,lng:B.lng,zoom:16}}))}Is(async()=>{console.log("App mounted, checking auth...");try{if(localStorage.getItem("token")){console.log("Token found, checking auth..."),await t.checkAuth(),await t.fetchUserProfile();const z=localStorage.getItem("lastPlanId");z&&window.dispatchEvent(new CustomEvent("load-last-plan",{detail:{planId:z}}))}else console.log("No token found")}catch(B){console.error("Auth check error:",B),n.push("/login")}});const X=cr(()=>{const B="TagMap";if(!Q.value)return`${B} - Connexion`;const z=n.currentRoute.value,V={home:"Carte",notes:"Notes",users:"Utilisateurs",profile:"Mon profil",changePassword:"Changement de mot de passe",map:"Carte"}[z.name]||"";return V?`${B} - ${V}`:B});Co(X,B=>{document.title=B},{immediate:!0});const R=cr(()=>r.notifications.length);function O(){r.clearAll(),u.value=!1}return wp(()=>{if(r.lastAddedId!==null){const B=r.notifications.find(z=>z.id===r.lastAddedId);B&&zs(()=>{N(),f.value=!0,d.value={id:B.id,message:B.message,type:B.type},requestAnimationFrame(()=>{setTimeout(()=>{g.value=!0,setTimeout(()=>{g.value=!1,setTimeout(()=>{var z;((z=d.value)==null?void 0:z.id)===B.id&&(d.value=null,f.value=!1)},300)},4e3)},50)})})}}),(B,z)=>{var W;return $e(),He("div",JN,[Q.value?($e(),He("header",XN,[E("nav",QN,[E("div",e7,[E("div",t7,[E("button",{onClick:z[0]||(z[0]=V=>o.value=!o.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 md:hidden"},[z[7]||(z[7]=E("span",{class:"sr-only"},"Ouvrir le menu",-1)),($e(),He("svg",n7,[o.value?($e(),He("path",i7)):($e(),He("path",r7))]))]),pi(Wn(zd),{to:"/",class:"text-xl font-semibold text-primary-600 truncate ml-2 md:ml-0"},{default:pu(()=>z[8]||(z[8]=[E("span",{class:"md:inline hidden"},"TagMap",-1),E("span",{class:"md:hidden inline"},"TM",-1)])),_:1}),E("div",o7,[($e(!0),He(Tn,null,xr(fe.value,V=>($e(),rl(Wn(zd),{key:V.name,to:V.to,class:Fi(["text-sm font-medium transition-colors duration-200",[B.$route.path===V.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:pu(()=>[Ei(Wt(V.name),1)]),_:2},1032,["to","class"]))),128))])]),B.$route.path==="/"?($e(),He("div",s7,[E("div",a7,[pi(nb,{onSelectLocation:$})]),E("div",l7,[pi(nb,{onSelectLocation:$,class:"max-w-full"})])])):($e(),He("div",u7)),E("div",c7,[Wn(i)?($e(),He("button",f7,z[9]||(z[9]=[E("span",{class:"sr-only"},"Performance",-1),E("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)]))):cn("",!0),E("div",h7,[E("button",{ref_key:"bellButtonRef",ref:x,onClick:z[1]||(z[1]=V=>u.value=!u.value),class:Fi(["relative flex items-center justify-center p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",{"animate-bell":f.value}])},z[10]||(z[10]=[E("span",{class:"sr-only"},"Voir les notifications",-1),E("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)]),2),u.value?($e(),He("div",{key:0,class:"absolute right-0 mt-2 md:w-80 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:Hl(y.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[E("div",d7,[E("div",p7,[z[12]||(z[12]=E("h3",{class:"text-sm font-semibold text-gray-700"},"Notifications",-1)),E("div",g7,[R.value>0?($e(),He("button",{key:0,onClick:O,class:"text-xs text-primary-600 hover:text-primary-800"}," Tout effacer ")):cn("",!0),E("button",{onClick:z[2]||(z[2]=V=>u.value=!1),class:"md:hidden p-1 rounded-full hover:bg-gray-100"},z[11]||(z[11]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])]),E("div",m7,[R.value===0?($e(),He("div",v7," Aucune notification ")):cn("",!0),($e(!0),He(Tn,null,xr(Wn(r).notifications,V=>($e(),He("div",{key:V.id,class:"px-4 py-3 md:py-3 py-4 border-b border-gray-100 last:border-0 hover:bg-gray-50"},[E("div",y7,[E("div",_7,[V.type==="success"?($e(),He("svg",b7,z[13]||(z[13]=[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):V.type==="error"?($e(),He("svg",w7,z[14]||(z[14]=[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):V.type==="warning"?($e(),He("svg",x7,z[15]||(z[15]=[E("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):($e(),He("svg",L7,z[16]||(z[16]=[E("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])))]),E("div",S7,[E("p",C7,Wt(V.message),1),E("button",{onClick:oe=>Wn(r).removeNotification(V.id),class:"text-xs md:text-xs text-primary-600 hover:text-primary-800 mt-2 md:mt-1 py-1 md:py-0"}," Fermer ",8,E7)])])]))),128))])],4)):cn("",!0)]),E("div",P7,[E("button",{onClick:z[3]||(z[3]=V=>s.value=!s.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[E("div",M7,[E("span",A7,Wt(T.value),1),F.value?($e(),He("span",k7,Wt(F.value),1)):cn("",!0)]),E("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:((W=Wn(t).user)==null?void 0:W.logo)||"https://ui-avatars.com/api/?name="+encodeURIComponent(T.value),alt:T.value},null,8,T7)]),s.value?($e(),He("div",{key:0,class:"absolute right-0 mt-2 md:w-48 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:Hl(y.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[E("div",N7,[E("div",null,[E("div",D7,Wt(T.value),1),E("div",I7,Wt(F.value),1)]),E("button",{onClick:z[4]||(z[4]=V=>s.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},z[17]||(z[17]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),($e(!0),He(Tn,null,xr(me.value,V=>($e(),rl(Wn(zd),{key:V.name,to:V.to,class:"block px-4 md:py-2 py-3 text-sm text-gray-700 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",onClick:z[5]||(z[5]=oe=>s.value=!1)},{default:pu(()=>[Ei(Wt(V.name),1)]),_:2},1032,["to"]))),128)),E("button",{onClick:G,class:"block w-full px-4 md:py-2 py-3 text-left text-sm text-red-600 hover:bg-gray-50 font-medium"}," Dconnexion ")],4)):cn("",!0)])])]),o.value?($e(),He("div",O7,[E("div",B7,[($e(!0),He(Tn,null,xr(fe.value,V=>($e(),rl(Wn(zd),{key:V.name,to:V.to,class:Fi(["block px-3 py-2 rounded-md text-base font-medium",[B.$route.path===V.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:z[6]||(z[6]=oe=>o.value=!1)},{default:pu(()=>[Ei(Wt(V.name),1)]),_:2},1032,["to","class"]))),128))])])):cn("",!0)])])):cn("",!0),E("main",{class:Fi([B.$route.path==="/"&&!y.value?"overflow-hidden":"overflow-auto","flex-1 flex flex-col","md:h-[calc(100vh-64px)]"])},[pi(Wn(K5))],2),pi(YN,{position:"bottom-left"})])}}}),F7="modulepreload",j7=function(e){return"/static/frontend/"+e},rb={},zc=function(n,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),u=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(t.map(f=>{if(f=j7(f),f in rb)return;rb[f]=!0;const d=f.endsWith(".css"),g=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const y=document.createElement("link");if(y.rel=d?"stylesheet":F7,d||(y.as="script"),y.crossOrigin="",y.href=f,u&&y.setAttribute("nonce",u),document.head.appendChild(y),d)return new Promise((x,_)=>{y.addEventListener("load",x),y.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${f}`)))})}))}function s(o){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=o,window.dispatchEvent(u),!u.defaultPrevented)throw o}return i.then(o=>{for(const u of o||[])u.status==="rejected"&&s(u.reason);return n().catch(s)})},z7={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},$7={class:"max-w-md w-full space-y-8"},U7={class:"space-y-4"},V7={class:"mt-1"},G7={class:"mt-1"},H7={class:"mt-1"},q7={key:0,class:"rounded-md bg-red-50 p-4"},W7={class:"flex"},Z7={class:"ml-3"},K7={class:"text-sm font-medium text-red-800"},Y7={key:1,class:"rounded-md bg-yellow-50 p-4"},J7={class:"flex"},X7={class:"ml-3"},Q7={class:"mt-2 text-sm text-yellow-700"},eD={class:"list-disc pl-5 space-y-1"},tD=["disabled"],nD={class:"absolute left-0 inset-y-0 flex items-center pl-3"},rD={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},iD={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},oD=cs({__name:"ChangePasswordForm",setup(e){const n=Bp(),t=ma(),r=Kl({oldPassword:"",newPassword:"",confirmPassword:""}),i=jt(!1),s=jt("");Is(()=>{var d,g;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:t.isAuthenticated,userId:(d=t.user)==null?void 0:d.id,mustChangePassword:(g=t.user)==null?void 0:g.must_change_password})});const o=cr(()=>{const d=[];return r.newPassword&&r.newPassword.length<8&&d.push("Le nouveau mot de passe doit contenir au moins 8 caractres"),r.newPassword&&r.confirmPassword&&r.newPassword!==r.confirmPassword&&d.push("Les mots de passe ne correspondent pas"),d}),u=cr(()=>r.oldPassword.length>0&&r.newPassword.length>=8&&r.newPassword===r.confirmPassword);async function f(){var d,g,y,x,_,M,k,N;if(!u.value){s.value="Veuillez corriger les erreurs avant de continuer";return}if(!((d=t.user)!=null&&d.id)){s.value="Erreur : utilisateur non identifi";return}i.value=!0,s.value="";try{console.log("Submitting password change..."),await t.changePassword(r.oldPassword,r.newPassword),console.log("Password changed successfully"),n.push("/")}catch(T){console.error("Password change failed:",T),(y=(g=T.response)==null?void 0:g.data)!=null&&y.detail?s.value=T.response.data.detail:(_=(x=T.response)==null?void 0:x.data)!=null&&_.old_password?s.value=T.response.data.old_password[0]:(k=(M=T.response)==null?void 0:M.data)!=null&&k.password?s.value=T.response.data.password[0]:((N=T.response)==null?void 0:N.status)===401?(s.value="Session expire, veuillez vous reconnecter",await t.logout(),n.push("/login")):s.value="Une erreur est survenue lors du changement de mot de passe"}finally{i.value=!1}}return(d,g)=>($e(),He("div",z7,[E("div",$7,[g[12]||(g[12]=E("div",null,[E("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),E("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de scurit, vous devez changer votre mot de passe. ")],-1)),E("form",{class:"mt-8 space-y-6",onSubmit:Cf(f,["prevent"])},[E("div",U7,[E("div",null,[g[3]||(g[3]=E("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),E("div",V7,[Fn(E("input",{id:"old-password","onUpdate:modelValue":g[0]||(g[0]=y=>r.oldPassword=y),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[ri,r.oldPassword]])])]),E("div",null,[g[4]||(g[4]=E("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),E("div",G7,[Fn(E("input",{id:"new-password","onUpdate:modelValue":g[1]||(g[1]=y=>r.newPassword=y),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[ri,r.newPassword]])]),g[5]||(g[5]=E("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractres ",-1))]),E("div",null,[g[6]||(g[6]=E("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),E("div",H7,[Fn(E("input",{id:"confirm-password","onUpdate:modelValue":g[2]||(g[2]=y=>r.confirmPassword=y),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[ri,r.confirmPassword]])])])]),s.value?($e(),He("div",q7,[E("div",W7,[g[7]||(g[7]=E("div",{class:"flex-shrink-0"},[E("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),E("div",Z7,[E("h3",K7,Wt(s.value),1)])])])):cn("",!0),o.value.length>0?($e(),He("div",Y7,[E("div",J7,[g[9]||(g[9]=E("div",{class:"flex-shrink-0"},[E("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),E("div",X7,[g[8]||(g[8]=E("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),E("div",Q7,[E("ul",eD,[($e(!0),He(Tn,null,xr(o.value,(y,x)=>($e(),He("li",{key:x},Wt(y),1))),128))])])])])])):cn("",!0),E("div",null,[E("button",{type:"submit",disabled:i.value||!u.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[E("span",nD,[i.value?($e(),He("svg",iD,g[11]||(g[11]=[E("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),E("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):($e(),He("svg",rD,g[10]||(g[10]=[E("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),Ei(" "+Wt(i.value?"Modification en cours...":"Changer le mot de passe"),1)],8,tD)])],32)])]))}}),sD="/static/frontend/assets/background.svg",aD={class:"min-h-screen overflow-auto relative py-12 sm:px-6 lg:px-8"},lD={class:"container mx-auto relative z-10"},uD={class:"sm:mx-auto sm:w-full sm:max-w-md"},cD={class:"bg-white/95 backdrop-blur-sm py-8 px-6 shadow-xl rounded-xl sm:px-10 border border-white/20"},fD={key:0,class:"rounded-md bg-red-50 p-4"},hD={class:"flex"},dD={class:"ml-3"},pD={class:"text-sm font-medium text-red-800"},gD={class:"mt-1"},mD={class:"mt-1 relative"},vD=["type"],yD={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},_D={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},bD={class:"flex items-center justify-between"},wD={class:"flex items-center"},xD={class:"text-sm"},LD=["disabled"],SD={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},CD={class:"mt-16 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ED={class:"mt-12"},PD={class:"flex flex-wrap justify-center gap-2 mb-8"},MD=["onClick"],AD={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},kD={class:"flex items-center mb-4"},TD={class:"text-2xl mr-2"},ND={class:"text-xl font-semibold text-gray-900"},DD={class:"text-gray-600 text-sm"},ID={key:0,class:"flex justify-center mt-8 gap-2"},OD=["onClick"],tv=6,BD=cs({__name:"LoginView",setup(e){const n=Bp(),t=ma(),r=jt(!1),i=jt(null),s=jt(!1),o=jt("Tous"),u=jt(1),f=Kl({username:"",password:"",rememberMe:!1}),d=[{type:"Liniculteur",sector:"Agriculture",icon:"",text:"En tant qu'entreprise, j'ai mis en place un sous-compte  agriculteur  permettant la golocalisation des parcelles. Cela offre  nos salaris et prestataires une visibilit complte sur l'ensemble des parcelles et facilite leur accs. De plus, ils peuvent y ajouter des notes et des photos si ncessaire. Grce aux trackers, nous renforons galement la scurit de nos machines contre le vol."},{type:"Agro industriel",sector:"Industrie",icon:"",text:"La gestion des comptes et sous-comptes est un atout majeur pour limiter, filtrer et contrler l'accs de nos salaris aux diffrentes tches."},{type:"Agence de voyage",sector:"Tourisme",icon:"",text:"L'outil nous permet de crer gratuitement et sans limite des sous-comptes clients, d'tablir des itinraires personnaliss avec des points d'intrt."},{type:"Industriel agroalimentaire",sector:"Industrie",icon:"",text:"Nous disposons d'un compte entreprise avec des sous-comptes ddis  chaque culture. Nos techniciens et agriculteurs partenaires peuvent ainsi ajouter des annotations et photo sur les parcelles. Grce aux stations mto connectes, nous optimisons la gestion des tours d'irrigation par secteur gographique en fonction des prcipitations."},{type:"Conseil municipal",sector:"Collectivit",icon:"",text:"Cette solution nous permet de gagner en efficacit dans la gestion des tches  raliser, en les golocalisant et en offrant  nos employs communaux la possibilit d'ajouter des commentaires et des photos sur chaque tche gorfrence."},{type:"Location de matriel",sector:"Services",icon:"",text:"Cette solution nous permet de golocaliser notre flotte grce  des trackers sans abonnement, avec uniquement un abonnement  la plateforme."},{type:"Agriculteur",sector:"Agriculture",icon:"",text:"J'ai quip tous mes canons d'enrouleurs de trackers et de camras pour dissuader le vol de batteries."},{type:"Semencier",sector:"Agriculture",icon:"",text:"Nous assurons la golocalisation de l'ensemble de nos parcelles en France."},{type:"Concessionnaire irrigation",sector:"Services",icon:"",text:"Nous avons golocalis tous les forages de nos clients et ajout en commentaire la procdure d'entre, facilitant ainsi le travail de nos techniciens et agriculteurs lors des interventions."},{type:"Entreprise paysagiste",sector:"Services",icon:"",text:"Nous golocalisons tous nos chantiers et ajoutons une photo du chantier termin en commentaire, servant de preuve en cas de litige."}],g=cr(()=>["Tous",...new Set(d.map(k=>k.sector))]),y=cr(()=>{let M=o.value==="Tous"?d:d.filter(T=>T.sector===o.value);const k=(u.value-1)*tv,N=k+tv;return M.slice(k,N)}),x=cr(()=>{const M=o.value==="Tous"?d:d.filter(k=>k.sector===o.value);return Math.ceil(M.length/tv)});Is(async()=>{var M;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE);try{if((M=window.INITIAL_STATE)!=null&&M.isAuthenticated){console.log("User is authenticated, redirecting to home"),n.push("/");return}await t.restoreSession()&&(console.log("Session restored, redirecting to home"),n.push("/"))}catch(k){console.error("Error during initialization:",k),i.value=null}});async function _(){var M,k,N,T,F,K,Q,he,fe;r.value=!0,i.value=null;try{if(!f.username||!f.password){i.value="Veuillez remplir tous les champs";return}await t.login(f.username,f.password),(M=t.user)!=null&&M.must_change_password?n.push("/change-password"):n.push("/")}catch(me){console.error("Login error:",me),((k=me==null?void 0:me.response)==null?void 0:k.status)===500?i.value="Le service est temporairement indisponible. Veuillez ressayer dans quelques instants.":((N=me==null?void 0:me.response)==null?void 0:N.status)===401||((T=me==null?void 0:me.response)==null?void 0:T.status)===403?i.value="Identifiants incorrects. Veuillez vrifier votre nom d'utilisateur et mot de passe.":(K=(F=me==null?void 0:me.response)==null?void 0:F.data)!=null&&K.detail?i.value=me.response.data.detail:(fe=(he=(Q=me==null?void 0:me.response)==null?void 0:Q.data)==null?void 0:he.non_field_errors)!=null&&fe[0]?i.value=me.response.data.non_field_errors[0]:(me==null?void 0:me.message)==="Network Error"?i.value="Impossible de se connecter au serveur. Veuillez vrifier votre connexion internet.":i.value="Une erreur est survenue lors de la connexion. Veuillez ressayer."}finally{r.value=!1}}return(M,k)=>{const N=Kw("router-link");return $e(),He("div",aD,[E("div",{class:"fixed inset-0 z-0",style:Hl({backgroundImage:`url(${Wn(sD)})`,backgroundSize:"400px",backgroundRepeat:"repeat",filter:"blur(1px) opacity(0.15)"})},null,4),k[16]||(k[16]=E("div",{class:"fixed inset-0 z-0 bg-gradient-to-br from-white/40 via-transparent to-primary-900/10"},null,-1)),E("div",lD,[E("div",uD,[E("div",cD,[k[12]||(k[12]=E("div",{class:"text-center mb-8"},[E("h2",{class:"text-3xl font-bold text-gray-900 mb-2"}," TagMap "),E("p",{class:"text-sm text-gray-600"}," Solution innovante de cartographie et gestion de projets ")],-1)),E("form",{class:"space-y-6",onSubmit:Cf(_,["prevent"])},[i.value?($e(),He("div",fD,[E("div",hD,[k[4]||(k[4]=E("div",{class:"flex-shrink-0"},[E("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),E("div",dD,[E("h3",pD,Wt(i.value),1)])])])):cn("",!0),E("div",null,[k[5]||(k[5]=E("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),E("div",gD,[Fn(E("input",{id:"username","onUpdate:modelValue":k[0]||(k[0]=T=>f.username=T),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[ri,f.username]])])]),E("div",null,[k[8]||(k[8]=E("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),E("div",mD,[Fn(E("input",{id:"password","onUpdate:modelValue":k[1]||(k[1]=T=>f.password=T),type:s.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,vD),[[iy,f.password]]),E("button",{type:"button",onClick:k[2]||(k[2]=T=>s.value=!s.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[s.value?($e(),He("svg",yD,k[6]||(k[6]=[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):($e(),He("svg",_D,k[7]||(k[7]=[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),E("div",bD,[E("div",wD,[Fn(E("input",{id:"remember-me","onUpdate:modelValue":k[3]||(k[3]=T=>f.rememberMe=T),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[Ll,f.rememberMe]]),k[9]||(k[9]=E("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),E("div",xD,[pi(N,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:pu(()=>k[10]||(k[10]=[Ei(" Mot de passe oubli ? ")])),_:1})])]),E("div",null,[E("button",{type:"submit",disabled:r.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[r.value?($e(),He("svg",SD,k[11]||(k[11]=[E("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),E("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):cn("",!0),Ei(" "+Wt(r.value?"Connexion en cours...":"Se connecter"),1)],8,LD)])],32)])]),E("div",CD,[k[14]||(k[14]=zu('<div class="mb-12 bg-white/90 backdrop-blur-sm p-8 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-6" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32></span><h3 class="text-xl font-bold text-gray-900" data-v-9ff7ee32>quipements Connects sans Abonnement</h3></div><div class="grid grid-cols-1 md:grid-cols-2 gap-6" data-v-9ff7ee32><div class="flex items-center space-x-4" data-v-9ff7ee32><div class="flex-shrink-0 text-2xl" data-v-9ff7ee32></div><div data-v-9ff7ee32><h4 class="font-semibold" data-v-9ff7ee32>Tracker GPS solaire</h4><p class="text-gray-600" data-v-9ff7ee32>Golocalisez et scurisez votre matriel</p></div></div><div class="flex items-center space-x-4" data-v-9ff7ee32><div class="flex-shrink-0 text-2xl" data-v-9ff7ee32></div><div data-v-9ff7ee32><h4 class="font-semibold" data-v-9ff7ee32>Station mto</h4><p class="text-gray-600" data-v-9ff7ee32>Optimisez vos dcisions avec des donnes en temps rel</p></div></div></div></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8" data-v-9ff7ee32><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32></span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Carte Interactive</h3></div><p class="text-gray-600" data-v-9ff7ee32>Imaginez... Une carte interactive o tout est sous contrle ! Tout est centralis, organis et accessible en un clin d&#39;il !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32></span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Collaboration en Temps Rel</h3></div><p class="text-gray-600" data-v-9ff7ee32>Travail d&#39;quipe simplifi : Collaborez en temps rel sur une interface ultra-intuitive. Vos quipes restent synchronises et efficaces !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32></span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Cerveau Cartographique</h3></div><p class="text-gray-600" data-v-9ff7ee32>Un cerveau cartographique : Dessinez, annotez, planifiez, suivez !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32></span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Accs Scuris</h3></div><p class="text-gray-600" data-v-9ff7ee32>Accs scuris et intelligent : Grez les droits d&#39;accs de vos salaris et prestataires en un clic.</p></div></div>',2)),E("div",ED,[k[13]||(k[13]=E("h3",{class:"text-2xl font-bold text-center text-gray-900 mb-8"},"Ils utilisent TagMap",-1)),E("div",PD,[($e(!0),He(Tn,null,xr(g.value,T=>($e(),He("button",{key:T,onClick:F=>o.value=T,class:Fi(["px-4 py-2 rounded-full text-sm font-medium transition-all duration-200",o.value===T?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},Wt(T),11,MD))),128))]),E("div",AD,[($e(!0),He(Tn,null,xr(y.value,T=>($e(),He("div",{key:T.type,class:"bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20 transition-all duration-300 hover:shadow-xl"},[E("div",kD,[E("span",TD,Wt(T.icon),1),E("span",ND,Wt(T.type),1)]),E("p",DD,Wt(T.text),1)]))),128))]),x.value>1?($e(),He("div",ID,[($e(!0),He(Tn,null,xr(x.value,T=>($e(),He("button",{key:T,onClick:F=>u.value=T,class:Fi(["w-8 h-8 rounded-full text-sm font-medium transition-all duration-200",u.value===T?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},Wt(T),11,OD))),128))])):cn("",!0)])]),k[15]||(k[15]=E("div",{class:"h-16"},null,-1))])])}}}),RD=Rp(BD,[["__scopeId","data-v-9ff7ee32"]]),ib="/static/frontend/assets/logo.svg";var a1={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,n){(function(t,r){r(n)})(ea,function(t){var r="1.9.4";function i(a){var p,S,U,se;for(S=1,U=arguments.length;S<U;S++){se=arguments[S];for(p in se)a[p]=se[p]}return a}var s=Object.create||function(){function a(){}return function(p){return a.prototype=p,new a}}();function o(a,p){var S=Array.prototype.slice;if(a.bind)return a.bind.apply(a,S.call(arguments,1));var U=S.call(arguments,2);return function(){return a.apply(p,U.length?U.concat(S.call(arguments)):arguments)}}var u=0;function f(a){return"_leaflet_id"in a||(a._leaflet_id=++u),a._leaflet_id}function d(a,p,S){var U,se,Se,st;return st=function(){U=!1,se&&(Se.apply(S,se),se=!1)},Se=function(){U?se=arguments:(a.apply(S,arguments),setTimeout(st,p),U=!0)},Se}function g(a,p,S){var U=p[1],se=p[0],Se=U-se;return a===U&&S?a:((a-se)%Se+Se)%Se+se}function y(){return!1}function x(a,p){if(p===!1)return a;var S=Math.pow(10,p===void 0?6:p);return Math.round(a*S)/S}function _(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function M(a){return _(a).split(/\s+/)}function k(a,p){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?s(a.options):{});for(var S in p)a.options[S]=p[S];return a.options}function N(a,p,S){var U=[];for(var se in a)U.push(encodeURIComponent(S?se.toUpperCase():se)+"="+encodeURIComponent(a[se]));return(!p||p.indexOf("?")===-1?"?":"&")+U.join("&")}var T=/\{ *([\w_ -]+) *\}/g;function F(a,p){return a.replace(T,function(S,U){var se=p[U];if(se===void 0)throw new Error("No value provided for variable "+S);return typeof se=="function"&&(se=se(p)),se})}var K=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function Q(a,p){for(var S=0;S<a.length;S++)if(a[S]===p)return S;return-1}var he="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function fe(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var me=0;function G(a){var p=+new Date,S=Math.max(0,16-(p-me));return me=p+S,window.setTimeout(a,S)}var $=window.requestAnimationFrame||fe("RequestAnimationFrame")||G,X=window.cancelAnimationFrame||fe("CancelAnimationFrame")||fe("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function R(a,p,S){if(S&&$===G)a.call(p);else return $.call(window,o(a,p))}function O(a){a&&X.call(window,a)}var B={__proto__:null,extend:i,create:s,bind:o,get lastId(){return u},stamp:f,throttle:d,wrapNum:g,falseFn:y,formatNum:x,trim:_,splitWords:M,setOptions:k,getParamString:N,template:F,isArray:K,indexOf:Q,emptyImageUrl:he,requestFn:$,cancelFn:X,requestAnimFrame:R,cancelAnimFrame:O};function z(){}z.extend=function(a){var p=function(){k(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},S=p.__super__=this.prototype,U=s(S);U.constructor=p,p.prototype=U;for(var se in this)Object.prototype.hasOwnProperty.call(this,se)&&se!=="prototype"&&se!=="__super__"&&(p[se]=this[se]);return a.statics&&i(p,a.statics),a.includes&&(W(a.includes),i.apply(null,[U].concat(a.includes))),i(U,a),delete U.statics,delete U.includes,U.options&&(U.options=S.options?s(S.options):{},i(U.options,a.options)),U._initHooks=[],U.callInitHooks=function(){if(!this._initHooksCalled){S.callInitHooks&&S.callInitHooks.call(this),this._initHooksCalled=!0;for(var Se=0,st=U._initHooks.length;Se<st;Se++)U._initHooks[Se].call(this)}},p},z.include=function(a){var p=this.prototype.options;return i(this.prototype,a),a.options&&(this.prototype.options=p,this.mergeOptions(a.options)),this},z.mergeOptions=function(a){return i(this.prototype.options,a),this},z.addInitHook=function(a){var p=Array.prototype.slice.call(arguments,1),S=typeof a=="function"?a:function(){this[a].apply(this,p)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(S),this};function W(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=K(a)?a:[a];for(var p=0;p<a.length;p++)a[p]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var V={on:function(a,p,S){if(typeof a=="object")for(var U in a)this._on(U,a[U],p);else{a=M(a);for(var se=0,Se=a.length;se<Se;se++)this._on(a[se],p,S)}return this},off:function(a,p,S){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var U in a)this._off(U,a[U],p);else{a=M(a);for(var se=arguments.length===1,Se=0,st=a.length;Se<st;Se++)se?this._off(a[Se]):this._off(a[Se],p,S)}return this},_on:function(a,p,S,U){if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}if(this._listens(a,p,S)===!1){S===this&&(S=void 0);var se={fn:p,ctx:S};U&&(se.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(se)}},_off:function(a,p,S){var U,se,Se;if(this._events&&(U=this._events[a],!!U)){if(arguments.length===1){if(this._firingCount)for(se=0,Se=U.length;se<Se;se++)U[se].fn=y;delete this._events[a];return}if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}var st=this._listens(a,p,S);if(st!==!1){var Mt=U[st];this._firingCount&&(Mt.fn=y,this._events[a]=U=U.slice()),U.splice(st,1)}}},fire:function(a,p,S){if(!this.listens(a,S))return this;var U=i({},p,{type:a,target:this,sourceTarget:p&&p.sourceTarget||this});if(this._events){var se=this._events[a];if(se){this._firingCount=this._firingCount+1||1;for(var Se=0,st=se.length;Se<st;Se++){var Mt=se[Se],Ut=Mt.fn;Mt.once&&this.off(a,Ut,Mt.ctx),Ut.call(Mt.ctx||this,U)}this._firingCount--}}return S&&this._propagateEvent(U),this},listens:function(a,p,S,U){typeof a!="string"&&console.warn('"string" type argument expected');var se=p;typeof p!="function"&&(U=!!p,se=void 0,S=void 0);var Se=this._events&&this._events[a];if(Se&&Se.length&&this._listens(a,se,S)!==!1)return!0;if(U){for(var st in this._eventParents)if(this._eventParents[st].listens(a,p,S,U))return!0}return!1},_listens:function(a,p,S){if(!this._events)return!1;var U=this._events[a]||[];if(!p)return!!U.length;S===this&&(S=void 0);for(var se=0,Se=U.length;se<Se;se++)if(U[se].fn===p&&U[se].ctx===S)return se;return!1},once:function(a,p,S){if(typeof a=="object")for(var U in a)this._on(U,a[U],p,!0);else{a=M(a);for(var se=0,Se=a.length;se<Se;se++)this._on(a[se],p,S,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[f(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[f(a)],this},_propagateEvent:function(a){for(var p in this._eventParents)this._eventParents[p].fire(a.type,i({layer:a.target,propagatedFrom:a.target},a),!0)}};V.addEventListener=V.on,V.removeEventListener=V.clearAllEventListeners=V.off,V.addOneTimeEventListener=V.once,V.fireEvent=V.fire,V.hasEventListeners=V.listens;var oe=z.extend(V);function ie(a,p,S){this.x=S?Math.round(a):a,this.y=S?Math.round(p):p}var xe=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};ie.prototype={clone:function(){return new ie(this.x,this.y)},add:function(a){return this.clone()._add(Ee(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(Ee(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new ie(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new ie(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=xe(this.x),this.y=xe(this.y),this},distanceTo:function(a){a=Ee(a);var p=a.x-this.x,S=a.y-this.y;return Math.sqrt(p*p+S*S)},equals:function(a){return a=Ee(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=Ee(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function Ee(a,p,S){return a instanceof ie?a:K(a)?new ie(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new ie(a.x,a.y):new ie(a,p,S)}function Te(a,p){if(a)for(var S=p?[a,p]:a,U=0,se=S.length;U<se;U++)this.extend(S[U])}Te.prototype={extend:function(a){var p,S;if(!a)return this;if(a instanceof ie||typeof a[0]=="number"||"x"in a)p=S=Ee(a);else if(a=Y(a),p=a.min,S=a.max,!p||!S)return this;return!this.min&&!this.max?(this.min=p.clone(),this.max=S.clone()):(this.min.x=Math.min(p.x,this.min.x),this.max.x=Math.max(S.x,this.max.x),this.min.y=Math.min(p.y,this.min.y),this.max.y=Math.max(S.y,this.max.y)),this},getCenter:function(a){return Ee((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return Ee(this.min.x,this.max.y)},getTopRight:function(){return Ee(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var p,S;return typeof a[0]=="number"||a instanceof ie?a=Ee(a):a=Y(a),a instanceof Te?(p=a.min,S=a.max):p=S=a,p.x>=this.min.x&&S.x<=this.max.x&&p.y>=this.min.y&&S.y<=this.max.y},intersects:function(a){a=Y(a);var p=this.min,S=this.max,U=a.min,se=a.max,Se=se.x>=p.x&&U.x<=S.x,st=se.y>=p.y&&U.y<=S.y;return Se&&st},overlaps:function(a){a=Y(a);var p=this.min,S=this.max,U=a.min,se=a.max,Se=se.x>p.x&&U.x<S.x,st=se.y>p.y&&U.y<S.y;return Se&&st},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var p=this.min,S=this.max,U=Math.abs(p.x-S.x)*a,se=Math.abs(p.y-S.y)*a;return Y(Ee(p.x-U,p.y-se),Ee(S.x+U,S.y+se))},equals:function(a){return a?(a=Y(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function Y(a,p){return!a||a instanceof Te?a:new Te(a,p)}function q(a,p){if(a)for(var S=p?[a,p]:a,U=0,se=S.length;U<se;U++)this.extend(S[U])}q.prototype={extend:function(a){var p=this._southWest,S=this._northEast,U,se;if(a instanceof ue)U=a,se=a;else if(a instanceof q){if(U=a._southWest,se=a._northEast,!U||!se)return this}else return a?this.extend(le(a)||ee(a)):this;return!p&&!S?(this._southWest=new ue(U.lat,U.lng),this._northEast=new ue(se.lat,se.lng)):(p.lat=Math.min(U.lat,p.lat),p.lng=Math.min(U.lng,p.lng),S.lat=Math.max(se.lat,S.lat),S.lng=Math.max(se.lng,S.lng)),this},pad:function(a){var p=this._southWest,S=this._northEast,U=Math.abs(p.lat-S.lat)*a,se=Math.abs(p.lng-S.lng)*a;return new q(new ue(p.lat-U,p.lng-se),new ue(S.lat+U,S.lng+se))},getCenter:function(){return new ue((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ue(this.getNorth(),this.getWest())},getSouthEast:function(){return new ue(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof ue||"lat"in a?a=le(a):a=ee(a);var p=this._southWest,S=this._northEast,U,se;return a instanceof q?(U=a.getSouthWest(),se=a.getNorthEast()):U=se=a,U.lat>=p.lat&&se.lat<=S.lat&&U.lng>=p.lng&&se.lng<=S.lng},intersects:function(a){a=ee(a);var p=this._southWest,S=this._northEast,U=a.getSouthWest(),se=a.getNorthEast(),Se=se.lat>=p.lat&&U.lat<=S.lat,st=se.lng>=p.lng&&U.lng<=S.lng;return Se&&st},overlaps:function(a){a=ee(a);var p=this._southWest,S=this._northEast,U=a.getSouthWest(),se=a.getNorthEast(),Se=se.lat>p.lat&&U.lat<S.lat,st=se.lng>p.lng&&U.lng<S.lng;return Se&&st},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,p){return a?(a=ee(a),this._southWest.equals(a.getSouthWest(),p)&&this._northEast.equals(a.getNorthEast(),p)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ee(a,p){return a instanceof q?a:new q(a,p)}function ue(a,p,S){if(isNaN(a)||isNaN(p))throw new Error("Invalid LatLng object: ("+a+", "+p+")");this.lat=+a,this.lng=+p,S!==void 0&&(this.alt=+S)}ue.prototype={equals:function(a,p){if(!a)return!1;a=le(a);var S=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return S<=(p===void 0?1e-9:p)},toString:function(a){return"LatLng("+x(this.lat,a)+", "+x(this.lng,a)+")"},distanceTo:function(a){return Z.distance(this,le(a))},wrap:function(){return Z.wrapLatLng(this)},toBounds:function(a){var p=180*a/40075017,S=p/Math.cos(Math.PI/180*this.lat);return ee([this.lat-p,this.lng-S],[this.lat+p,this.lng+S])},clone:function(){return new ue(this.lat,this.lng,this.alt)}};function le(a,p,S){return a instanceof ue?a:K(a)&&typeof a[0]!="object"?a.length===3?new ue(a[0],a[1],a[2]):a.length===2?new ue(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new ue(a.lat,"lng"in a?a.lng:a.lon,a.alt):p===void 0?null:new ue(a,p,S)}var pe={latLngToPoint:function(a,p){var S=this.projection.project(a),U=this.scale(p);return this.transformation._transform(S,U)},pointToLatLng:function(a,p){var S=this.scale(p),U=this.transformation.untransform(a,S);return this.projection.unproject(U)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var p=this.projection.bounds,S=this.scale(a),U=this.transformation.transform(p.min,S),se=this.transformation.transform(p.max,S);return new Te(U,se)},infinite:!1,wrapLatLng:function(a){var p=this.wrapLng?g(a.lng,this.wrapLng,!0):a.lng,S=this.wrapLat?g(a.lat,this.wrapLat,!0):a.lat,U=a.alt;return new ue(S,p,U)},wrapLatLngBounds:function(a){var p=a.getCenter(),S=this.wrapLatLng(p),U=p.lat-S.lat,se=p.lng-S.lng;if(U===0&&se===0)return a;var Se=a.getSouthWest(),st=a.getNorthEast(),Mt=new ue(Se.lat-U,Se.lng-se),Ut=new ue(st.lat-U,st.lng-se);return new q(Mt,Ut)}},Z=i({},pe,{wrapLng:[-180,180],R:6371e3,distance:function(a,p){var S=Math.PI/180,U=a.lat*S,se=p.lat*S,Se=Math.sin((p.lat-a.lat)*S/2),st=Math.sin((p.lng-a.lng)*S/2),Mt=Se*Se+Math.cos(U)*Math.cos(se)*st*st,Ut=2*Math.atan2(Math.sqrt(Mt),Math.sqrt(1-Mt));return this.R*Ut}}),D=6378137,ke={R:D,MAX_LATITUDE:85.0511287798,project:function(a){var p=Math.PI/180,S=this.MAX_LATITUDE,U=Math.max(Math.min(S,a.lat),-S),se=Math.sin(U*p);return new ie(this.R*a.lng*p,this.R*Math.log((1+se)/(1-se))/2)},unproject:function(a){var p=180/Math.PI;return new ue((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*p,a.x*p/this.R)},bounds:function(){var a=D*Math.PI;return new Te([-a,-a],[a,a])}()};function Me(a,p,S,U){if(K(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=p,this._c=S,this._d=U}Me.prototype={transform:function(a,p){return this._transform(a.clone(),p)},_transform:function(a,p){return p=p||1,a.x=p*(this._a*a.x+this._b),a.y=p*(this._c*a.y+this._d),a},untransform:function(a,p){return p=p||1,new ie((a.x/p-this._b)/this._a,(a.y/p-this._d)/this._c)}};function Ge(a,p,S,U){return new Me(a,p,S,U)}var ce=i({},Z,{code:"EPSG:3857",projection:ke,transformation:function(){var a=.5/(Math.PI*ke.R);return Ge(a,.5,-a,.5)}()}),ne=i({},ce,{code:"EPSG:900913"});function ye(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function de(a,p){var S="",U,se,Se,st,Mt,Ut;for(U=0,Se=a.length;U<Se;U++){for(Mt=a[U],se=0,st=Mt.length;se<st;se++)Ut=Mt[se],S+=(se?"L":"M")+Ut.x+" "+Ut.y;S+=p?lt.svg?"z":"x":""}return S||"M0 0"}var Ze=document.documentElement.style,qe="ActiveXObject"in window,tt=qe&&!document.addEventListener,ze="msLaunchUri"in navigator&&!("documentMode"in document),Qe=mr("webkit"),et=mr("android"),bt=mr("android 2")||mr("android 3"),Pt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),At=et&&mr("Google")&&Pt<537&&!("AudioNode"in window),Vt=!!window.opera,Qt=!ze&&mr("chrome"),mn=mr("gecko")&&!Qe&&!Vt&&!qe,Ye=!Qt&&mr("safari"),ot=mr("phantom"),rt="OTransition"in Ze,zt=navigator.platform.indexOf("Win")===0,en=qe&&"transition"in Ze,Bn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!bt,bn="MozPerspective"in Ze,Nn=!window.L_DISABLE_3D&&(en||Bn||bn)&&!rt&&!ot,ar=typeof orientation<"u"||mr("mobile"),xn=ar&&Qe,Mn=ar&&Bn,Pn=!window.PointerEvent&&window.MSPointerEvent,fr=!!(window.PointerEvent||Pn),yr="ontouchstart"in window||!!window.TouchEvent,at=!window.L_NO_TOUCH&&(yr||fr),We=ar&&Vt,Ot=ar&&mn,En=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Jn=function(){var a=!1;try{var p=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",y,p),window.removeEventListener("testPassiveEventSupport",y,p)}catch{}return a}(),Zn=function(){return!!document.createElement("canvas").getContext}(),qt=!!(document.createElementNS&&ye("svg").createSVGRect),gn=!!qt&&function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Rt=!qt&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var p=a.firstChild;return p.style.behavior="url(#default#VML)",p&&typeof p.adj=="object"}catch{return!1}}(),Kt=navigator.platform.indexOf("Mac")===0,Ln=navigator.platform.indexOf("Linux")===0;function mr(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var lt={ie:qe,ielt9:tt,edge:ze,webkit:Qe,android:et,android23:bt,androidStock:At,opera:Vt,chrome:Qt,gecko:mn,safari:Ye,phantom:ot,opera12:rt,win:zt,ie3d:en,webkit3d:Bn,gecko3d:bn,any3d:Nn,mobile:ar,mobileWebkit:xn,mobileWebkit3d:Mn,msPointer:Pn,pointer:fr,touch:at,touchNative:yr,mobileOpera:We,mobileGecko:Ot,retina:En,passiveEvents:Jn,canvas:Zn,svg:qt,vml:Rt,inlineSvg:gn,mac:Kt,linux:Ln},Cn=lt.msPointer?"MSPointerDown":"pointerdown",Lr=lt.msPointer?"MSPointerMove":"pointermove",Ii=lt.msPointer?"MSPointerUp":"pointerup",Fr=lt.msPointer?"MSPointerCancel":"pointercancel",Pr={touchstart:Cn,touchmove:Lr,touchend:Ii,touchcancel:Fr},lr={touchstart:Br,touchmove:Kr,touchend:Kr,touchcancel:Kr},Hr={},ir=!1;function Or(a,p,S){return p==="touchstart"&&gi(),lr[p]?(S=lr[p].bind(this,S),a.addEventListener(Pr[p],S,!1),S):(console.warn("wrong event specified:",p),y)}function jr(a,p,S){if(!Pr[p]){console.warn("wrong event specified:",p);return}a.removeEventListener(Pr[p],S,!1)}function on(a){Hr[a.pointerId]=a}function ji(a){Hr[a.pointerId]&&(Hr[a.pointerId]=a)}function _i(a){delete Hr[a.pointerId]}function gi(){ir||(document.addEventListener(Cn,on,!0),document.addEventListener(Lr,ji,!0),document.addEventListener(Ii,_i,!0),document.addEventListener(Fr,_i,!0),ir=!0)}function Kr(a,p){if(p.pointerType!==(p.MSPOINTER_TYPE_MOUSE||"mouse")){p.touches=[];for(var S in Hr)p.touches.push(Hr[S]);p.changedTouches=[p],a(p)}}function Br(a,p){p.MSPOINTER_TYPE_TOUCH&&p.pointerType===p.MSPOINTER_TYPE_TOUCH&&Cr(p),Kr(a,p)}function Rr(a){var p={},S,U;for(U in a)S=a[U],p[U]=S&&S.bind?S.bind(a):S;return a=p,p.type="dblclick",p.detail=2,p.isTrusted=!1,p._simulated=!0,p}var dr=200;function zi(a,p){a.addEventListener("dblclick",p);var S=0,U;function se(Se){if(Se.detail!==1){U=Se.detail;return}if(!(Se.pointerType==="mouse"||Se.sourceCapabilities&&!Se.sourceCapabilities.firesTouchEvents)){var st=Ua(Se);if(!(st.some(function(Ut){return Ut instanceof HTMLLabelElement&&Ut.attributes.for})&&!st.some(function(Ut){return Ut instanceof HTMLInputElement||Ut instanceof HTMLSelectElement}))){var Mt=Date.now();Mt-S<=dr?(U++,U===2&&p(Rr(Se))):U=1,S=Mt}}}return a.addEventListener("click",se),{dblclick:p,simDblclick:se}}function Ss(a,p){a.removeEventListener("dblclick",p.dblclick),a.removeEventListener("click",p.simDblclick)}var Cs=fo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),si=fo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),jn=si==="webkitTransition"||si==="OTransition"?si+"End":"transitionend";function Po(a){return typeof a=="string"?document.getElementById(a):a}function ci(a,p){var S=a.style[p]||a.currentStyle&&a.currentStyle[p];if((!S||S==="auto")&&document.defaultView){var U=document.defaultView.getComputedStyle(a,null);S=U?U[p]:null}return S==="auto"?null:S}function hr(a,p,S){var U=document.createElement(a);return U.className=p||"",S&&S.appendChild(U),U}function qn(a){var p=a.parentNode;p&&p.removeChild(a)}function bo(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function wo(a){var p=a.parentNode;p&&p.lastChild!==a&&p.appendChild(a)}function Sr(a){var p=a.parentNode;p&&p.firstChild!==a&&p.insertBefore(a,p.firstChild)}function Vs(a,p){if(a.classList!==void 0)return a.classList.contains(p);var S=_n(a);return S.length>0&&new RegExp("(^|\\s)"+p+"(\\s|$)").test(S)}function Gn(a,p){if(a.classList!==void 0)for(var S=M(p),U=0,se=S.length;U<se;U++)a.classList.add(S[U]);else if(!Vs(a,p)){var Se=_n(a);Yr(a,(Se?Se+" ":"")+p)}}function _r(a,p){a.classList!==void 0?a.classList.remove(p):Yr(a,_((" "+_n(a)+" ").replace(" "+p+" "," ")))}function Yr(a,p){a.className.baseVal===void 0?a.className=p:a.className.baseVal=p}function _n(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function nn(a,p){"opacity"in a.style?a.style.opacity=p:"filter"in a.style&&ai(a,p)}function ai(a,p){var S=!1,U="DXImageTransform.Microsoft.Alpha";try{S=a.filters.item(U)}catch{if(p===1)return}p=Math.round(p*100),S?(S.Enabled=p!==100,S.Opacity=p):a.style.filter+=" progid:"+U+"(opacity="+p+")"}function fo(a){for(var p=document.documentElement.style,S=0;S<a.length;S++)if(a[S]in p)return a[S];return!1}function xo(a,p,S){var U=p||new ie(0,0);a.style[Cs]=(lt.ie3d?"translate("+U.x+"px,"+U.y+"px)":"translate3d("+U.x+"px,"+U.y+"px,0)")+(S?" scale("+S+")":"")}function Mi(a,p){a._leaflet_pos=p,lt.any3d?xo(a,p):(a.style.left=p.x+"px",a.style.top=p.y+"px")}function fs(a){return a._leaflet_pos||new ie(0,0)}var Qo,Ro,hi;if("onselectstart"in document)Qo=function(){br(window,"selectstart",Cr)},Ro=function(){Nr(window,"selectstart",Cr)};else{var Os=fo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Qo=function(){if(Os){var a=document.documentElement.style;hi=a[Os],a[Os]="none"}},Ro=function(){Os&&(document.documentElement.style[Os]=hi,hi=void 0)}}function Fo(){br(window,"dragstart",Cr)}function eo(){Nr(window,"dragstart",Cr)}var Lo,Gs;function va(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(to(),Lo=a,Gs=a.style.outlineStyle,a.style.outlineStyle="none",br(window,"keydown",to))}function to(){Lo&&(Lo.style.outlineStyle=Gs,Lo=void 0,Gs=void 0,Nr(window,"keydown",to))}function il(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function ya(a){var p=a.getBoundingClientRect();return{x:p.width/a.offsetWidth||1,y:p.height/a.offsetHeight||1,boundingClientRect:p}}var gr={__proto__:null,TRANSFORM:Cs,TRANSITION:si,TRANSITION_END:jn,get:Po,getStyle:ci,create:hr,remove:qn,empty:bo,toFront:wo,toBack:Sr,hasClass:Vs,addClass:Gn,removeClass:_r,setClass:Yr,getClass:_n,setOpacity:nn,testProp:fo,setTransform:xo,setPosition:Mi,getPosition:fs,get disableTextSelection(){return Qo},get enableTextSelection(){return Ro},disableImageDrag:Fo,enableImageDrag:eo,preventOutline:va,restoreOutline:to,getSizedParentNode:il,getScale:ya};function br(a,p,S,U){if(p&&typeof p=="object")for(var se in p)sl(a,se,p[se],S);else{p=M(p);for(var Se=0,st=p.length;Se<st;Se++)sl(a,p[Se],S,U)}return this}var Jr="_leaflet_events";function Nr(a,p,S,U){if(arguments.length===1)jo(a),delete a[Jr];else if(p&&typeof p=="object")for(var se in p)Hs(a,se,p[se],S);else if(p=M(p),arguments.length===2)jo(a,function(Mt){return Q(p,Mt)!==-1});else for(var Se=0,st=p.length;Se<st;Se++)Hs(a,p[Se],S,U);return this}function jo(a,p){for(var S in a[Jr]){var U=S.split(/\d/)[0];(!p||p(U))&&Hs(a,U,null,null,S)}}var ol={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function sl(a,p,S,U){var se=p+f(S)+(U?"_"+f(U):"");if(a[Jr]&&a[Jr][se])return this;var Se=function(Mt){return S.call(U||a,Mt||window.event)},st=Se;!lt.touchNative&&lt.pointer&&p.indexOf("touch")===0?Se=Or(a,p,Se):lt.touch&&p==="dblclick"?Se=zi(a,Se):"addEventListener"in a?p==="touchstart"||p==="touchmove"||p==="wheel"||p==="mousewheel"?a.addEventListener(ol[p]||p,Se,lt.passiveEvents?{passive:!1}:!1):p==="mouseenter"||p==="mouseleave"?(Se=function(Mt){Mt=Mt||window.event,al(a,Mt)&&st(Mt)},a.addEventListener(ol[p],Se,!1)):a.addEventListener(p,st,!1):a.attachEvent("on"+p,Se),a[Jr]=a[Jr]||{},a[Jr][se]=Se}function Hs(a,p,S,U,se){se=se||p+f(S)+(U?"_"+f(U):"");var Se=a[Jr]&&a[Jr][se];if(!Se)return this;!lt.touchNative&&lt.pointer&&p.indexOf("touch")===0?jr(a,p,Se):lt.touch&&p==="dblclick"?Ss(a,Se):"removeEventListener"in a?a.removeEventListener(ol[p]||p,Se,!1):a.detachEvent("on"+p,Se),a[Jr][se]=null}function $a(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function bu(a){return sl(a,"wheel",$a),this}function Ml(a){return br(a,"mousedown touchstart dblclick contextmenu",$a),a._leaflet_disable_click=!0,this}function Cr(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function qr(a){return Cr(a),$a(a),this}function Ua(a){if(a.composedPath)return a.composedPath();for(var p=[],S=a.target;S;)p.push(S),S=S.parentNode;return p}function Yu(a,p){if(!p)return new ie(a.clientX,a.clientY);var S=ya(p),U=S.boundingClientRect;return new ie((a.clientX-U.left)/S.x-p.clientLeft,(a.clientY-U.top)/S.y-p.clientTop)}var Al=lt.linux&&lt.chrome?window.devicePixelRatio:lt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Yl(a){return lt.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/Al:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function al(a,p){var S=p.relatedTarget;if(!S)return!0;try{for(;S&&S!==a;)S=S.parentNode}catch{return!1}return S!==a}var kl={__proto__:null,on:br,off:Nr,stopPropagation:$a,disableScrollPropagation:bu,disableClickPropagation:Ml,preventDefault:Cr,stop:qr,getPropagationPath:Ua,getMousePosition:Yu,getWheelDelta:Yl,isExternalTarget:al,addListener:br,removeListener:Nr},Jl=oe.extend({run:function(a,p,S,U){this.stop(),this._el=a,this._inProgress=!0,this._duration=S||.25,this._easeOutPower=1/Math.max(U||.5,.2),this._startPos=fs(a),this._offset=p.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=R(this._animate,this),this._step()},_step:function(a){var p=+new Date-this._startTime,S=this._duration*1e3;p<S?this._runFrame(this._easeOut(p/S),a):(this._runFrame(1),this._complete())},_runFrame:function(a,p){var S=this._startPos.add(this._offset.multiplyBy(a));p&&S._round(),Mi(this._el,S),this.fire("step")},_complete:function(){O(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),Xr=oe.extend({options:{crs:ce,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,p){p=k(this,p),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),p.maxBounds&&this.setMaxBounds(p.maxBounds),p.zoom!==void 0&&(this._zoom=this._limitZoom(p.zoom)),p.center&&p.zoom!==void 0&&this.setView(le(p.center),p.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=si&&lt.any3d&&!lt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),br(this._proxy,jn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,p,S){if(p=p===void 0?this._zoom:this._limitZoom(p),a=this._limitCenter(le(a),p,this.options.maxBounds),S=S||{},this._stop(),this._loaded&&!S.reset&&S!==!0){S.animate!==void 0&&(S.zoom=i({animate:S.animate},S.zoom),S.pan=i({animate:S.animate,duration:S.duration},S.pan));var U=this._zoom!==p?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,p,S.zoom):this._tryAnimatedPan(a,S.pan);if(U)return clearTimeout(this._sizeTimer),this}return this._resetView(a,p,S.pan&&S.pan.noMoveStart),this},setZoom:function(a,p){return this._loaded?this.setView(this.getCenter(),a,{zoom:p}):(this._zoom=a,this)},zoomIn:function(a,p){return a=a||(lt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,p)},zoomOut:function(a,p){return a=a||(lt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,p)},setZoomAround:function(a,p,S){var U=this.getZoomScale(p),se=this.getSize().divideBy(2),Se=a instanceof ie?a:this.latLngToContainerPoint(a),st=Se.subtract(se).multiplyBy(1-1/U),Mt=this.containerPointToLatLng(se.add(st));return this.setView(Mt,p,{zoom:S})},_getBoundsCenterZoom:function(a,p){p=p||{},a=a.getBounds?a.getBounds():ee(a);var S=Ee(p.paddingTopLeft||p.padding||[0,0]),U=Ee(p.paddingBottomRight||p.padding||[0,0]),se=this.getBoundsZoom(a,!1,S.add(U));if(se=typeof p.maxZoom=="number"?Math.min(p.maxZoom,se):se,se===1/0)return{center:a.getCenter(),zoom:se};var Se=U.subtract(S).divideBy(2),st=this.project(a.getSouthWest(),se),Mt=this.project(a.getNorthEast(),se),Ut=this.unproject(st.add(Mt).divideBy(2).add(Se),se);return{center:Ut,zoom:se}},fitBounds:function(a,p){if(a=ee(a),!a.isValid())throw new Error("Bounds are not valid.");var S=this._getBoundsCenterZoom(a,p);return this.setView(S.center,S.zoom,p)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,p){return this.setView(a,this._zoom,{pan:p})},panBy:function(a,p){if(a=Ee(a).round(),p=p||{},!a.x&&!a.y)return this.fire("moveend");if(p.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Jl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),p.noMoveStart||this.fire("movestart"),p.animate!==!1){Gn(this._mapPane,"leaflet-pan-anim");var S=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,S,p.duration||.25,p.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,p,S){if(S=S||{},S.animate===!1||!lt.any3d)return this.setView(a,p,S);this._stop();var U=this.project(this.getCenter()),se=this.project(a),Se=this.getSize(),st=this._zoom;a=le(a),p=p===void 0?st:p;var Mt=Math.max(Se.x,Se.y),Ut=Mt*this.getZoomScale(st,p),an=se.distanceTo(U)||1,In=1.42,Xn=In*In;function zr(mi){var Wo=mi?-1:1,De=mi?Ut:Mt,ms=Ut*Ut-Mt*Mt+Wo*Xn*Xn*an*an,Lu=2*De*Xn*an,Io=ms/Lu,Gr=Math.sqrt(Io*Io+1)-Io,Wc=Gr<1e-9?-18:Math.log(Gr);return Wc}function mo(mi){return(Math.exp(mi)-Math.exp(-mi))/2}function Ji(mi){return(Math.exp(mi)+Math.exp(-mi))/2}function Do(mi){return mo(mi)/Ji(mi)}var Hi=zr(0);function gs(mi){return Mt*(Ji(Hi)/Ji(Hi+In*mi))}function wc(mi){return Mt*(Ji(Hi)*Do(Hi+In*mi)-mo(Hi))/Xn}function ca(mi){return 1-Math.pow(1-mi,1.5)}var Js=Date.now(),Fs=(zr(1)-Hi)/In,Tf=S.duration?1e3*S.duration:1e3*Fs*.8;function eu(){var mi=(Date.now()-Js)/Tf,Wo=ca(mi)*Fs;mi<=1?(this._flyToFrame=R(eu,this),this._move(this.unproject(U.add(se.subtract(U).multiplyBy(wc(Wo)/an)),st),this.getScaleZoom(Mt/gs(Wo),st),{flyTo:!0})):this._move(a,p)._moveEnd(!0)}return this._moveStart(!0,S.noMoveStart),eu.call(this),this},flyToBounds:function(a,p){var S=this._getBoundsCenterZoom(a,p);return this.flyTo(S.center,S.zoom,p)},setMaxBounds:function(a){return a=ee(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var p=this.options.minZoom;return this.options.minZoom=a,this._loaded&&p!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var p=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&p!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,p){this._enforcingBounds=!0;var S=this.getCenter(),U=this._limitCenter(S,this._zoom,ee(a));return S.equals(U)||this.panTo(U,p),this._enforcingBounds=!1,this},panInside:function(a,p){p=p||{};var S=Ee(p.paddingTopLeft||p.padding||[0,0]),U=Ee(p.paddingBottomRight||p.padding||[0,0]),se=this.project(this.getCenter()),Se=this.project(a),st=this.getPixelBounds(),Mt=Y([st.min.add(S),st.max.subtract(U)]),Ut=Mt.getSize();if(!Mt.contains(Se)){this._enforcingBounds=!0;var an=Se.subtract(Mt.getCenter()),In=Mt.extend(Se).getSize().subtract(Ut);se.x+=an.x<0?-In.x:In.x,se.y+=an.y<0?-In.y:In.y,this.panTo(this.unproject(se),p),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=i({animate:!1,pan:!0},a===!0?{animate:!0}:a);var p=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var S=this.getSize(),U=p.divideBy(2).round(),se=S.divideBy(2).round(),Se=U.subtract(se);return!Se.x&&!Se.y?this:(a.animate&&a.pan?this.panBy(Se):(a.pan&&this._rawPanBy(Se),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:p,newSize:S}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=i({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var p=o(this._handleGeolocationResponse,this),S=o(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(p,S,a):navigator.geolocation.getCurrentPosition(p,S,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var p=a.code,S=a.message||(p===1?"permission denied":p===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:p,message:"Geolocation error: "+S+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var p=a.coords.latitude,S=a.coords.longitude,U=new ue(p,S),se=U.toBounds(a.coords.accuracy*2),Se=this._locateOptions;if(Se.setView){var st=this.getBoundsZoom(se);this.setView(U,Se.maxZoom?Math.min(st,Se.maxZoom):st)}var Mt={latlng:U,bounds:se,timestamp:a.timestamp};for(var Ut in a.coords)typeof a.coords[Ut]=="number"&&(Mt[Ut]=a.coords[Ut]);this.fire("locationfound",Mt)}},addHandler:function(a,p){if(!p)return this;var S=this[a]=new p(this);return this._handlers.push(S),this.options[a]&&S.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),qn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(O(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)qn(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,p){var S="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),U=hr("div",S,p||this._mapPane);return a&&(this._panes[a]=U),U},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),p=this.unproject(a.getBottomLeft()),S=this.unproject(a.getTopRight());return new q(p,S)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,p,S){a=ee(a),S=Ee(S||[0,0]);var U=this.getZoom()||0,se=this.getMinZoom(),Se=this.getMaxZoom(),st=a.getNorthWest(),Mt=a.getSouthEast(),Ut=this.getSize().subtract(S),an=Y(this.project(Mt,U),this.project(st,U)).getSize(),In=lt.any3d?this.options.zoomSnap:1,Xn=Ut.x/an.x,zr=Ut.y/an.y,mo=p?Math.max(Xn,zr):Math.min(Xn,zr);return U=this.getScaleZoom(mo,U),In&&(U=Math.round(U/(In/100))*(In/100),U=p?Math.ceil(U/In)*In:Math.floor(U/In)*In),Math.max(se,Math.min(Se,U))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ie(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,p){var S=this._getTopLeftPoint(a,p);return new Te(S,S.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,p){var S=this.options.crs;return p=p===void 0?this._zoom:p,S.scale(a)/S.scale(p)},getScaleZoom:function(a,p){var S=this.options.crs;p=p===void 0?this._zoom:p;var U=S.zoom(a*S.scale(p));return isNaN(U)?1/0:U},project:function(a,p){return p=p===void 0?this._zoom:p,this.options.crs.latLngToPoint(le(a),p)},unproject:function(a,p){return p=p===void 0?this._zoom:p,this.options.crs.pointToLatLng(Ee(a),p)},layerPointToLatLng:function(a){var p=Ee(a).add(this.getPixelOrigin());return this.unproject(p)},latLngToLayerPoint:function(a){var p=this.project(le(a))._round();return p._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(le(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(ee(a))},distance:function(a,p){return this.options.crs.distance(le(a),le(p))},containerPointToLayerPoint:function(a){return Ee(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return Ee(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var p=this.containerPointToLayerPoint(Ee(a));return this.layerPointToLatLng(p)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(le(a)))},mouseEventToContainerPoint:function(a){return Yu(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var p=this._container=Po(a);if(p){if(p._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");br(p,"scroll",this._onScroll,this),this._containerId=f(p)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&lt.any3d,Gn(a,"leaflet-container"+(lt.touch?" leaflet-touch":"")+(lt.retina?" leaflet-retina":"")+(lt.ielt9?" leaflet-oldie":"")+(lt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var p=ci(a,"position");p!=="absolute"&&p!=="relative"&&p!=="fixed"&&p!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Mi(this._mapPane,new ie(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Gn(a.markerPane,"leaflet-zoom-hide"),Gn(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,p,S){Mi(this._mapPane,new ie(0,0));var U=!this._loaded;this._loaded=!0,p=this._limitZoom(p),this.fire("viewprereset");var se=this._zoom!==p;this._moveStart(se,S)._move(a,p)._moveEnd(se),this.fire("viewreset"),U&&this.fire("load")},_moveStart:function(a,p){return a&&this.fire("zoomstart"),p||this.fire("movestart"),this},_move:function(a,p,S,U){p===void 0&&(p=this._zoom);var se=this._zoom!==p;return this._zoom=p,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),U?S&&S.pinch&&this.fire("zoom",S):((se||S&&S.pinch)&&this.fire("zoom",S),this.fire("move",S)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return O(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){Mi(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[f(this._container)]=this;var p=a?Nr:br;p(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&p(window,"resize",this._onResize,this),lt.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){O(this._resizeRequest),this._resizeRequest=R(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,p){for(var S=[],U,se=p==="mouseout"||p==="mouseover",Se=a.target||a.srcElement,st=!1;Se;){if(U=this._targets[f(Se)],U&&(p==="click"||p==="preclick")&&this._draggableMoved(U)){st=!0;break}if(U&&U.listens(p,!0)&&(se&&!al(Se,a)||(S.push(U),se))||Se===this._container)break;Se=Se.parentNode}return!S.length&&!st&&!se&&this.listens(p,!0)&&(S=[this]),S},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var p=a.target||a.srcElement;if(!(!this._loaded||p._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(p))){var S=a.type;S==="mousedown"&&va(p),this._fireDOMEvent(a,S)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,p,S){if(a.type==="click"){var U=i({},a);U.type="preclick",this._fireDOMEvent(U,U.type,S)}var se=this._findEventTargets(a,p);if(S){for(var Se=[],st=0;st<S.length;st++)S[st].listens(p,!0)&&Se.push(S[st]);se=Se.concat(se)}if(se.length){p==="contextmenu"&&Cr(a);var Mt=se[0],Ut={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var an=Mt.getLatLng&&(!Mt._radius||Mt._radius<=10);Ut.containerPoint=an?this.latLngToContainerPoint(Mt.getLatLng()):this.mouseEventToContainerPoint(a),Ut.layerPoint=this.containerPointToLayerPoint(Ut.containerPoint),Ut.latlng=an?Mt.getLatLng():this.layerPointToLatLng(Ut.layerPoint)}for(st=0;st<se.length;st++)if(se[st].fire(p,Ut,!0),Ut.originalEvent._stopped||se[st].options.bubblingMouseEvents===!1&&Q(this._mouseEvents,p)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,p=this._handlers.length;a<p;a++)this._handlers[a].disable()},whenReady:function(a,p){return this._loaded?a.call(p||this,{target:this}):this.on("load",a,p),this},_getMapPanePos:function(){return fs(this._mapPane)||new ie(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,p){var S=a&&p!==void 0?this._getNewPixelOrigin(a,p):this.getPixelOrigin();return S.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,p){var S=this.getSize()._divideBy(2);return this.project(a,p)._subtract(S)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,p,S){var U=this._getNewPixelOrigin(S,p);return this.project(a,p)._subtract(U)},_latLngBoundsToNewLayerBounds:function(a,p,S){var U=this._getNewPixelOrigin(S,p);return Y([this.project(a.getSouthWest(),p)._subtract(U),this.project(a.getNorthWest(),p)._subtract(U),this.project(a.getSouthEast(),p)._subtract(U),this.project(a.getNorthEast(),p)._subtract(U)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,p,S){if(!S)return a;var U=this.project(a,p),se=this.getSize().divideBy(2),Se=new Te(U.subtract(se),U.add(se)),st=this._getBoundsOffset(Se,S,p);return Math.abs(st.x)<=1&&Math.abs(st.y)<=1?a:this.unproject(U.add(st),p)},_limitOffset:function(a,p){if(!p)return a;var S=this.getPixelBounds(),U=new Te(S.min.add(a),S.max.add(a));return a.add(this._getBoundsOffset(U,p))},_getBoundsOffset:function(a,p,S){var U=Y(this.project(p.getNorthEast(),S),this.project(p.getSouthWest(),S)),se=U.min.subtract(a.min),Se=U.max.subtract(a.max),st=this._rebound(se.x,-Se.x),Mt=this._rebound(se.y,-Se.y);return new ie(st,Mt)},_rebound:function(a,p){return a+p>0?Math.round(a-p)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(p))},_limitZoom:function(a){var p=this.getMinZoom(),S=this.getMaxZoom(),U=lt.any3d?this.options.zoomSnap:1;return U&&(a=Math.round(a/U)*U),Math.max(p,Math.min(S,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){_r(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,p){var S=this._getCenterOffset(a)._trunc();return(p&&p.animate)!==!0&&!this.getSize().contains(S)?!1:(this.panBy(S,p),!0)},_createAnimProxy:function(){var a=this._proxy=hr("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(p){var S=Cs,U=this._proxy.style[S];xo(this._proxy,this.project(p.center,p.zoom),this.getZoomScale(p.zoom,1)),U===this._proxy.style[S]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){qn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),p=this.getZoom();xo(this._proxy,this.project(a,p),this.getZoomScale(p,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,p,S){if(this._animatingZoom)return!0;if(S=S||{},!this._zoomAnimated||S.animate===!1||this._nothingToAnimate()||Math.abs(p-this._zoom)>this.options.zoomAnimationThreshold)return!1;var U=this.getZoomScale(p),se=this._getCenterOffset(a)._divideBy(1-1/U);return S.animate!==!0&&!this.getSize().contains(se)?!1:(R(function(){this._moveStart(!0,S.noMoveStart||!1)._animateZoom(a,p,!0)},this),!0)},_animateZoom:function(a,p,S,U){this._mapPane&&(S&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=p,Gn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:p,noUpdate:U}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&_r(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function no(a,p){return new Xr(a,p)}var or=z.extend({options:{position:"topright"},initialize:function(a){k(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var p=this._map;return p&&p.removeControl(this),this.options.position=a,p&&p.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var p=this._container=this.onAdd(a),S=this.getPosition(),U=a._controlCorners[S];return Gn(p,"leaflet-control"),S.indexOf("bottom")!==-1?U.insertBefore(p,U.firstChild):U.appendChild(p),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(qn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),ro=function(a){return new or(a)};Xr.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},p="leaflet-",S=this._controlContainer=hr("div",p+"control-container",this._container);function U(se,Se){var st=p+se+" "+p+Se;a[se+Se]=hr("div",st,S)}U("top","left"),U("top","right"),U("bottom","left"),U("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)qn(this._controlCorners[a]);qn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ll=or.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,p,S,U){return S<U?-1:U<S?1:0}},initialize:function(a,p,S){k(this,S),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var U in a)this._addLayer(a[U],U);for(U in p)this._addLayer(p[U],U,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var p=0;p<this._layers.length;p++)this._layers[p].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return or.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,p){return this._addLayer(a,p),this._map?this._update():this},addOverlay:function(a,p){return this._addLayer(a,p,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var p=this._getLayer(f(a));return p&&this._layers.splice(this._layers.indexOf(p),1),this._map?this._update():this},expand:function(){Gn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(Gn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):_r(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return _r(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",p=this._container=hr("div",a),S=this.options.collapsed;p.setAttribute("aria-haspopup",!0),Ml(p),bu(p);var U=this._section=hr("section",a+"-list");S&&(this._map.on("click",this.collapse,this),br(p,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var se=this._layersLink=hr("a",a+"-toggle",p);se.href="#",se.title="Layers",se.setAttribute("role","button"),br(se,{keydown:function(Se){Se.keyCode===13&&this._expandSafely()},click:function(Se){Cr(Se),this._expandSafely()}},this),S||this.expand(),this._baseLayersList=hr("div",a+"-base",U),this._separator=hr("div",a+"-separator",U),this._overlaysList=hr("div",a+"-overlays",U),p.appendChild(U)},_getLayer:function(a){for(var p=0;p<this._layers.length;p++)if(this._layers[p]&&f(this._layers[p].layer)===a)return this._layers[p]},_addLayer:function(a,p,S){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:p,overlay:S}),this.options.sortLayers&&this._layers.sort(o(function(U,se){return this.options.sortFunction(U.layer,se.layer,U.name,se.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;bo(this._baseLayersList),bo(this._overlaysList),this._layerControlInputs=[];var a,p,S,U,se=0;for(S=0;S<this._layers.length;S++)U=this._layers[S],this._addItem(U),p=p||U.overlay,a=a||!U.overlay,se+=U.overlay?0:1;return this.options.hideSingleBase&&(a=a&&se>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=p&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var p=this._getLayer(f(a.target)),S=p.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;S&&this._map.fire(S,p)},_createRadioElement:function(a,p){var S='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(p?' checked="checked"':"")+"/>",U=document.createElement("div");return U.innerHTML=S,U.firstChild},_addItem:function(a){var p=document.createElement("label"),S=this._map.hasLayer(a.layer),U;a.overlay?(U=document.createElement("input"),U.type="checkbox",U.className="leaflet-control-layers-selector",U.defaultChecked=S):U=this._createRadioElement("leaflet-base-layers_"+f(this),S),this._layerControlInputs.push(U),U.layerId=f(a.layer),br(U,"click",this._onInputClick,this);var se=document.createElement("span");se.innerHTML=" "+a.name;var Se=document.createElement("span");p.appendChild(Se),Se.appendChild(U),Se.appendChild(se);var st=a.overlay?this._overlaysList:this._baseLayersList;return st.appendChild(p),this._checkDisabledLayers(),p},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,p,S,U=[],se=[];this._handlingClick=!0;for(var Se=a.length-1;Se>=0;Se--)p=a[Se],S=this._getLayer(p.layerId).layer,p.checked?U.push(S):p.checked||se.push(S);for(Se=0;Se<se.length;Se++)this._map.hasLayer(se[Se])&&this._map.removeLayer(se[Se]);for(Se=0;Se<U.length;Se++)this._map.hasLayer(U[Se])||this._map.addLayer(U[Se]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,p,S,U=this._map.getZoom(),se=a.length-1;se>=0;se--)p=a[se],S=this._getLayer(p.layerId).layer,p.disabled=S.options.minZoom!==void 0&&U<S.options.minZoom||S.options.maxZoom!==void 0&&U>S.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,br(a,"click",Cr),this.expand();var p=this;setTimeout(function(){Nr(a,"click",Cr),p._preventClick=!1})}}),_a=function(a,p,S){return new ll(a,p,S)},Ui=or.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var p="leaflet-control-zoom",S=hr("div",p+" leaflet-bar"),U=this.options;return this._zoomInButton=this._createButton(U.zoomInText,U.zoomInTitle,p+"-in",S,this._zoomIn),this._zoomOutButton=this._createButton(U.zoomOutText,U.zoomOutTitle,p+"-out",S,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),S},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,p,S,U,se){var Se=hr("a",S,U);return Se.innerHTML=a,Se.href="#",Se.title=p,Se.setAttribute("role","button"),Se.setAttribute("aria-label",p),Ml(Se),br(Se,"click",qr),br(Se,"click",se,this),br(Se,"click",this._refocusOnMap,this),Se},_updateDisabled:function(){var a=this._map,p="leaflet-disabled";_r(this._zoomInButton,p),_r(this._zoomOutButton,p),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(Gn(this._zoomOutButton,p),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(Gn(this._zoomInButton,p),this._zoomInButton.setAttribute("aria-disabled","true"))}});Xr.mergeOptions({zoomControl:!0}),Xr.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ui,this.addControl(this.zoomControl))});var Xl=function(a){return new Ui(a)},ta=or.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var p="leaflet-control-scale",S=hr("div",p),U=this.options;return this._addScales(U,p+"-line",S),a.on(U.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),S},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,p,S){a.metric&&(this._mScale=hr("div",p,S)),a.imperial&&(this._iScale=hr("div",p,S))},_update:function(){var a=this._map,p=a.getSize().y/2,S=a.distance(a.containerPointToLatLng([0,p]),a.containerPointToLatLng([this.options.maxWidth,p]));this._updateScales(S)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var p=this._getRoundNum(a),S=p<1e3?p+" m":p/1e3+" km";this._updateScale(this._mScale,S,p/a)},_updateImperial:function(a){var p=a*3.2808399,S,U,se;p>5280?(S=p/5280,U=this._getRoundNum(S),this._updateScale(this._iScale,U+" mi",U/S)):(se=this._getRoundNum(p),this._updateScale(this._iScale,se+" ft",se/p))},_updateScale:function(a,p,S){a.style.width=Math.round(this.options.maxWidth*S)+"px",a.innerHTML=p},_getRoundNum:function(a){var p=Math.pow(10,(Math.floor(a)+"").length-1),S=a/p;return S=S>=10?10:S>=5?5:S>=3?3:S>=2?2:1,p*S}}),Tl=function(a){return new ta(a)},Nl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Bs=or.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(lt.inlineSvg?Nl+" ":"")+"Leaflet</a>"},initialize:function(a){k(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=hr("div","leaflet-control-attribution"),Ml(this._container);for(var p in a._layers)a._layers[p].getAttribution&&this.addAttribution(a._layers[p].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var p in this._attributions)this._attributions[p]&&a.push(p);var S=[];this.options.prefix&&S.push(this.options.prefix),a.length&&S.push(a.join(", ")),this._container.innerHTML=S.join(' <span aria-hidden="true">|</span> ')}}});Xr.mergeOptions({attributionControl:!0}),Xr.addInitHook(function(){this.options.attributionControl&&new Bs().addTo(this)});var Dl=function(a){return new Bs(a)};or.Layers=ll,or.Zoom=Ui,or.Scale=ta,or.Attribution=Bs,ro.layers=_a,ro.zoom=Xl,ro.scale=Tl,ro.attribution=Dl;var bi=z.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});bi.addTo=function(a,p){return a.addHandler(p,this),this};var Ju={Events:V},Mo=lt.touch?"touchstart mousedown":"mousedown",qs=oe.extend({options:{clickTolerance:3},initialize:function(a,p,S,U){k(this,U),this._element=a,this._dragStartTarget=p||a,this._preventOutline=S},enable:function(){this._enabled||(br(this._dragStartTarget,Mo,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(qs._dragging===this&&this.finishDrag(!0),Nr(this._dragStartTarget,Mo,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!Vs(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){qs._dragging===this&&this.finishDrag();return}if(!(qs._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(qs._dragging=this,this._preventOutline&&va(this._element),Fo(),Qo(),!this._moving)){this.fire("down");var p=a.touches?a.touches[0]:a,S=il(this._element);this._startPoint=new ie(p.clientX,p.clientY),this._startPos=fs(this._element),this._parentScale=ya(S);var U=a.type==="mousedown";br(document,U?"mousemove":"touchmove",this._onMove,this),br(document,U?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var p=a.touches&&a.touches.length===1?a.touches[0]:a,S=new ie(p.clientX,p.clientY)._subtract(this._startPoint);!S.x&&!S.y||Math.abs(S.x)+Math.abs(S.y)<this.options.clickTolerance||(S.x/=this._parentScale.x,S.y/=this._parentScale.y,Cr(a),this._moved||(this.fire("dragstart"),this._moved=!0,Gn(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Gn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(S),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),Mi(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){_r(document.body,"leaflet-dragging"),this._lastTarget&&(_r(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Nr(document,"mousemove touchmove",this._onMove,this),Nr(document,"mouseup touchend touchcancel",this._onUp,this),eo(),Ro();var p=this._moved&&this._moving;this._moving=!1,qs._dragging=!1,p&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function Il(a,p,S){var U,se=[1,4,2,8],Se,st,Mt,Ut,an,In,Xn,zr;for(Se=0,In=a.length;Se<In;Se++)a[Se]._code=$t(a[Se],p);for(Mt=0;Mt<4;Mt++){for(Xn=se[Mt],U=[],Se=0,In=a.length,st=In-1;Se<In;st=Se++)Ut=a[Se],an=a[st],Ut._code&Xn?an._code&Xn||(zr=Lt(an,Ut,Xn,p,S),zr._code=$t(zr,p),U.push(zr)):(an._code&Xn&&(zr=Lt(an,Ut,Xn,p,S),zr._code=$t(zr,p),U.push(zr)),U.push(Ut));a=U}return a}function Ws(a,p){var S,U,se,Se,st,Mt,Ut,an,In;if(!a||a.length===0)throw new Error("latlngs not passed");zn(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Xn=le([0,0]),zr=ee(a),mo=zr.getNorthWest().distanceTo(zr.getSouthWest())*zr.getNorthEast().distanceTo(zr.getNorthWest());mo<1700&&(Xn=ul(a));var Ji=a.length,Do=[];for(S=0;S<Ji;S++){var Hi=le(a[S]);Do.push(p.project(le([Hi.lat-Xn.lat,Hi.lng-Xn.lng])))}for(Mt=Ut=an=0,S=0,U=Ji-1;S<Ji;U=S++)se=Do[S],Se=Do[U],st=se.y*Se.x-Se.y*se.x,Ut+=(se.x+Se.x)*st,an+=(se.y+Se.y)*st,Mt+=st*3;Mt===0?In=Do[0]:In=[Ut/Mt,an/Mt];var gs=p.unproject(Ee(In));return le([gs.lat+Xn.lat,gs.lng+Xn.lng])}function ul(a){for(var p=0,S=0,U=0,se=0;se<a.length;se++){var Se=le(a[se]);p+=Se.lat,S+=Se.lng,U++}return le([p/U,S/U])}var cl={__proto__:null,clipPolygon:Il,polygonCenter:Ws,centroid:ul};function wi(a,p){if(!p||!a.length)return a.slice();var S=p*p;return a=_e(a,S),a=io(a,S),a}function Es(a,p,S){return Math.sqrt(Dn(a,p,S,!0))}function ba(a,p,S){return Dn(a,p,S)}function io(a,p){var S=a.length,U=typeof Uint8Array<"u"?Uint8Array:Array,se=new U(S);se[0]=se[S-1]=1,I(a,se,p,0,S-1);var Se,st=[];for(Se=0;Se<S;Se++)se[Se]&&st.push(a[Se]);return st}function I(a,p,S,U,se){var Se=0,st,Mt,Ut;for(Mt=U+1;Mt<=se-1;Mt++)Ut=Dn(a[Mt],a[U],a[se],!0),Ut>Se&&(st=Mt,Se=Ut);Se>S&&(p[st]=1,I(a,p,S,U,st),I(a,p,S,st,se))}function _e(a,p){for(var S=[a[0]],U=1,se=0,Se=a.length;U<Se;U++)fn(a[U],a[se])>p&&(S.push(a[U]),se=U);return se<Se-1&&S.push(a[Se-1]),S}var Ke;function ft(a,p,S,U,se){var Se=U?Ke:$t(a,S),st=$t(p,S),Mt,Ut,an;for(Ke=st;;){if(!(Se|st))return[a,p];if(Se&st)return!1;Mt=Se||st,Ut=Lt(a,p,Mt,S,se),an=$t(Ut,S),Mt===Se?(a=Ut,Se=an):(p=Ut,st=an)}}function Lt(a,p,S,U,se){var Se=p.x-a.x,st=p.y-a.y,Mt=U.min,Ut=U.max,an,In;return S&8?(an=a.x+Se*(Ut.y-a.y)/st,In=Ut.y):S&4?(an=a.x+Se*(Mt.y-a.y)/st,In=Mt.y):S&2?(an=Ut.x,In=a.y+st*(Ut.x-a.x)/Se):S&1&&(an=Mt.x,In=a.y+st*(Mt.x-a.x)/Se),new ie(an,In,se)}function $t(a,p){var S=0;return a.x<p.min.x?S|=1:a.x>p.max.x&&(S|=2),a.y<p.min.y?S|=4:a.y>p.max.y&&(S|=8),S}function fn(a,p){var S=p.x-a.x,U=p.y-a.y;return S*S+U*U}function Dn(a,p,S,U){var se=p.x,Se=p.y,st=S.x-se,Mt=S.y-Se,Ut=st*st+Mt*Mt,an;return Ut>0&&(an=((a.x-se)*st+(a.y-Se)*Mt)/Ut,an>1?(se=S.x,Se=S.y):an>0&&(se+=st*an,Se+=Mt*an)),st=a.x-se,Mt=a.y-Se,U?st*st+Mt*Mt:new ie(se,Se)}function zn(a){return!K(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function nr(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),zn(a)}function vr(a,p){var S,U,se,Se,st,Mt,Ut,an;if(!a||a.length===0)throw new Error("latlngs not passed");zn(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var In=le([0,0]),Xn=ee(a),zr=Xn.getNorthWest().distanceTo(Xn.getSouthWest())*Xn.getNorthEast().distanceTo(Xn.getNorthWest());zr<1700&&(In=ul(a));var mo=a.length,Ji=[];for(S=0;S<mo;S++){var Do=le(a[S]);Ji.push(p.project(le([Do.lat-In.lat,Do.lng-In.lng])))}for(S=0,U=0;S<mo-1;S++)U+=Ji[S].distanceTo(Ji[S+1])/2;if(U===0)an=Ji[0];else for(S=0,Se=0;S<mo-1;S++)if(st=Ji[S],Mt=Ji[S+1],se=st.distanceTo(Mt),Se+=se,Se>U){Ut=(Se-U)/se,an=[Mt.x-Ut*(Mt.x-st.x),Mt.y-Ut*(Mt.y-st.y)];break}var Hi=p.unproject(Ee(an));return le([Hi.lat+In.lat,Hi.lng+In.lng])}var Ur={__proto__:null,simplify:wi,pointToSegmentDistance:Es,closestPointOnSegment:ba,clipSegment:ft,_getEdgeIntersection:Lt,_getBitCode:$t,_sqClosestPointOnSegment:Dn,isFlat:zn,_flat:nr,polylineCenter:vr},$i={project:function(a){return new ie(a.lng,a.lat)},unproject:function(a){return new ue(a.y,a.x)},bounds:new Te([-180,-90],[180,90])},di={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Te([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var p=Math.PI/180,S=this.R,U=a.lat*p,se=this.R_MINOR/S,Se=Math.sqrt(1-se*se),st=Se*Math.sin(U),Mt=Math.tan(Math.PI/4-U/2)/Math.pow((1-st)/(1+st),Se/2);return U=-S*Math.log(Math.max(Mt,1e-10)),new ie(a.lng*p*S,U)},unproject:function(a){for(var p=180/Math.PI,S=this.R,U=this.R_MINOR/S,se=Math.sqrt(1-U*U),Se=Math.exp(-a.y/S),st=Math.PI/2-2*Math.atan(Se),Mt=0,Ut=.1,an;Mt<15&&Math.abs(Ut)>1e-7;Mt++)an=se*Math.sin(st),an=Math.pow((1-an)/(1+an),se/2),Ut=Math.PI/2-2*Math.atan(Se*an)-st,st+=Ut;return new ue(st*p,a.x*p/S)}},xi={__proto__:null,LonLat:$i,Mercator:di,SphericalMercator:ke},oo=i({},Z,{code:"EPSG:3395",projection:di,transformation:function(){var a=.5/(Math.PI*di.R);return Ge(a,.5,-a,.5)}()}),ho=i({},Z,{code:"EPSG:4326",projection:$i,transformation:Ge(1/180,1,-1/180,.5)}),Ps=i({},pe,{projection:$i,transformation:Ge(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,p){var S=p.lng-a.lng,U=p.lat-a.lat;return Math.sqrt(S*S+U*U)},infinite:!0});pe.Earth=Z,pe.EPSG3395=oo,pe.EPSG3857=ce,pe.EPSG900913=ne,pe.EPSG4326=ho,pe.Simple=Ps;var Vr=oe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[f(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[f(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var p=a.target;if(p.hasLayer(this)){if(this._map=p,this._zoomAnimated=p._zoomAnimated,this.getEvents){var S=this.getEvents();p.on(S,this),this.once("remove",function(){p.off(S,this)},this)}this.onAdd(p),this.fire("add"),p.fire("layeradd",{layer:this})}}});Xr.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var p=f(a);return this._layers[p]?this:(this._layers[p]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var p=f(a);return this._layers[p]?(this._loaded&&a.onRemove(this),delete this._layers[p],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return f(a)in this._layers},eachLayer:function(a,p){for(var S in this._layers)a.call(p,this._layers[S]);return this},_addLayers:function(a){a=a?K(a)?a:[a]:[];for(var p=0,S=a.length;p<S;p++)this.addLayer(a[p])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[f(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var p=f(a);this._zoomBoundLayers[p]&&(delete this._zoomBoundLayers[p],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,p=-1/0,S=this._getZoomSpan();for(var U in this._zoomBoundLayers){var se=this._zoomBoundLayers[U].options;a=se.minZoom===void 0?a:Math.min(a,se.minZoom),p=se.maxZoom===void 0?p:Math.max(p,se.maxZoom)}this._layersMaxZoom=p===-1/0?void 0:p,this._layersMinZoom=a===1/0?void 0:a,S!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var zo=Vr.extend({initialize:function(a,p){k(this,p),this._layers={};var S,U;if(a)for(S=0,U=a.length;S<U;S++)this.addLayer(a[S])},addLayer:function(a){var p=this.getLayerId(a);return this._layers[p]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var p=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[p]&&this._map.removeLayer(this._layers[p]),delete this._layers[p],this},hasLayer:function(a){var p=typeof a=="number"?a:this.getLayerId(a);return p in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var p=Array.prototype.slice.call(arguments,1),S,U;for(S in this._layers)U=this._layers[S],U[a]&&U[a].apply(U,p);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,p){for(var S in this._layers)a.call(p,this._layers[S]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return f(a)}}),fl=function(a,p){return new zo(a,p)},es=zo.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),zo.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),zo.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new q;for(var p in this._layers){var S=this._layers[p];a.extend(S.getBounds?S.getBounds():S.getLatLng())}return a}}),Ql=function(a,p){return new es(a,p)},na=z.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){k(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,p){var S=this._getIconUrl(a);if(!S){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var U=this._createImg(S,p&&p.tagName==="IMG"?p:null);return this._setIconStyles(U,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(U.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),U},_setIconStyles:function(a,p){var S=this.options,U=S[p+"Size"];typeof U=="number"&&(U=[U,U]);var se=Ee(U),Se=Ee(p==="shadow"&&S.shadowAnchor||S.iconAnchor||se&&se.divideBy(2,!0));a.className="leaflet-marker-"+p+" "+(S.className||""),Se&&(a.style.marginLeft=-Se.x+"px",a.style.marginTop=-Se.y+"px"),se&&(a.style.width=se.x+"px",a.style.height=se.y+"px")},_createImg:function(a,p){return p=p||document.createElement("img"),p.src=a,p},_getIconUrl:function(a){return lt.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function wu(a){return new na(a)}var Va=na.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof Va.imagePath!="string"&&(Va.imagePath=this._detectIconPath()),(this.options.imagePath||Va.imagePath)+na.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var p=function(S,U,se){var Se=U.exec(S);return Se&&Se[se]};return a=p(a,/^url\((['"])?(.+)\1\)$/,2),a&&p(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=hr("div","leaflet-default-icon-path",document.body),p=ci(a,"background-image")||ci(a,"backgroundImage");if(document.body.removeChild(a),p=this._stripUrl(p),p)return p;var S=document.querySelector('link[href$="leaflet.css"]');return S?S.href.substring(0,S.href.length-11-1):""}}),Ga=bi.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new qs(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Gn(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&_r(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var p=this._marker,S=p._map,U=this._marker.options.autoPanSpeed,se=this._marker.options.autoPanPadding,Se=fs(p._icon),st=S.getPixelBounds(),Mt=S.getPixelOrigin(),Ut=Y(st.min._subtract(Mt).add(se),st.max._subtract(Mt).subtract(se));if(!Ut.contains(Se)){var an=Ee((Math.max(Ut.max.x,Se.x)-Ut.max.x)/(st.max.x-Ut.max.x)-(Math.min(Ut.min.x,Se.x)-Ut.min.x)/(st.min.x-Ut.min.x),(Math.max(Ut.max.y,Se.y)-Ut.max.y)/(st.max.y-Ut.max.y)-(Math.min(Ut.min.y,Se.y)-Ut.min.y)/(st.min.y-Ut.min.y)).multiplyBy(U);S.panBy(an,{animate:!1}),this._draggable._newPos._add(an),this._draggable._startPos._add(an),Mi(p._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=R(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(O(this._panRequest),this._panRequest=R(this._adjustPan.bind(this,a)))},_onDrag:function(a){var p=this._marker,S=p._shadow,U=fs(p._icon),se=p._map.layerPointToLatLng(U);S&&Mi(S,U),p._latlng=se,a.latlng=se,a.oldLatLng=this._oldLatLng,p.fire("move",a).fire("drag",a)},_onDragEnd:function(a){O(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),po=Vr.extend({options:{icon:new Va,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,p){k(this,p),this._latlng=le(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var p=this._latlng;return this._latlng=le(a),this.update(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,p="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),S=a.icon.createIcon(this._icon),U=!1;S!==this._icon&&(this._icon&&this._removeIcon(),U=!0,a.title&&(S.title=a.title),S.tagName==="IMG"&&(S.alt=a.alt||"")),Gn(S,p),a.keyboard&&(S.tabIndex="0",S.setAttribute("role","button")),this._icon=S,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&br(S,"focus",this._panOnFocus,this);var se=a.icon.createShadow(this._shadow),Se=!1;se!==this._shadow&&(this._removeShadow(),Se=!0),se&&(Gn(se,p),se.alt=""),this._shadow=se,a.opacity<1&&this._updateOpacity(),U&&this.getPane().appendChild(this._icon),this._initInteraction(),se&&Se&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Nr(this._icon,"focus",this._panOnFocus,this),qn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&qn(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&Mi(this._icon,a),this._shadow&&Mi(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var p=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(p)},_initInteraction:function(){if(this.options.interactive&&(Gn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ga)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ga(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&nn(this._icon,a),this._shadow&&nn(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var p=this.options.icon.options,S=p.iconSize?Ee(p.iconSize):Ee(0,0),U=p.iconAnchor?Ee(p.iconAnchor):Ee(0,0);a.panInside(this._latlng,{paddingTopLeft:U,paddingBottomRight:S.subtract(U)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ra(a,p){return new po(a,p)}var Ms=Vr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return k(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),hs=Ms.extend({options:{fill:!0,radius:10},initialize:function(a,p){k(this,p),this._latlng=le(a),this._radius=this.options.radius},setLatLng:function(a){var p=this._latlng;return this._latlng=le(a),this.redraw(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var p=a&&a.radius||this._radius;return Ms.prototype.setStyle.call(this,a),this.setRadius(p),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,p=this._radiusY||a,S=this._clickTolerance(),U=[a+S,p+S];this._pxBounds=new Te(this._point.subtract(U),this._point.add(U))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function hl(a,p){return new hs(a,p)}var $o=hs.extend({initialize:function(a,p,S){if(typeof p=="number"&&(p=i({},S,{radius:p})),k(this,p),this._latlng=le(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new q(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:Ms.prototype.setStyle,_project:function(){var a=this._latlng.lng,p=this._latlng.lat,S=this._map,U=S.options.crs;if(U.distance===Z.distance){var se=Math.PI/180,Se=this._mRadius/Z.R/se,st=S.project([p+Se,a]),Mt=S.project([p-Se,a]),Ut=st.add(Mt).divideBy(2),an=S.unproject(Ut).lat,In=Math.acos((Math.cos(Se*se)-Math.sin(p*se)*Math.sin(an*se))/(Math.cos(p*se)*Math.cos(an*se)))/se;(isNaN(In)||In===0)&&(In=Se/Math.cos(Math.PI/180*p)),this._point=Ut.subtract(S.getPixelOrigin()),this._radius=isNaN(In)?0:Ut.x-S.project([an,a-In]).x,this._radiusY=Ut.y-st.y}else{var Xn=U.unproject(U.project(this._latlng).subtract([this._mRadius,0]));this._point=S.latLngToLayerPoint(this._latlng),this._radius=this._point.x-S.latLngToLayerPoint(Xn).x}this._updateBounds()}});function ts(a,p,S){return new $o(a,p,S)}var ns=Ms.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,p){k(this,p),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var p=1/0,S=null,U=Dn,se,Se,st=0,Mt=this._parts.length;st<Mt;st++)for(var Ut=this._parts[st],an=1,In=Ut.length;an<In;an++){se=Ut[an-1],Se=Ut[an];var Xn=U(a,se,Se,!0);Xn<p&&(p=Xn,S=U(a,se,Se))}return S&&(S.distance=Math.sqrt(p)),S},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return vr(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,p){return p=p||this._defaultShape(),a=le(a),p.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new q,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return zn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var p=[],S=zn(a),U=0,se=a.length;U<se;U++)S?(p[U]=le(a[U]),this._bounds.extend(p[U])):p[U]=this._convertLatLngs(a[U]);return p},_project:function(){var a=new Te;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),p=new ie(a,a);this._rawPxBounds&&(this._pxBounds=new Te([this._rawPxBounds.min.subtract(p),this._rawPxBounds.max.add(p)]))},_projectLatlngs:function(a,p,S){var U=a[0]instanceof ue,se=a.length,Se,st;if(U){for(st=[],Se=0;Se<se;Se++)st[Se]=this._map.latLngToLayerPoint(a[Se]),S.extend(st[Se]);p.push(st)}else for(Se=0;Se<se;Se++)this._projectLatlngs(a[Se],p,S)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var p=this._parts,S,U,se,Se,st,Mt,Ut;for(S=0,se=0,Se=this._rings.length;S<Se;S++)for(Ut=this._rings[S],U=0,st=Ut.length;U<st-1;U++)Mt=ft(Ut[U],Ut[U+1],a,U,!0),Mt&&(p[se]=p[se]||[],p[se].push(Mt[0]),(Mt[1]!==Ut[U+1]||U===st-2)&&(p[se].push(Mt[1]),se++))}},_simplifyPoints:function(){for(var a=this._parts,p=this.options.smoothFactor,S=0,U=a.length;S<U;S++)a[S]=wi(a[S],p)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,p){var S,U,se,Se,st,Mt,Ut=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(S=0,Se=this._parts.length;S<Se;S++)for(Mt=this._parts[S],U=0,st=Mt.length,se=st-1;U<st;se=U++)if(!(!p&&U===0)&&Es(a,Mt[se],Mt[U])<=Ut)return!0;return!1}});function Xu(a,p){return new ns(a,p)}ns._flat=nr;var So=ns.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ws(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var p=ns.prototype._convertLatLngs.call(this,a),S=p.length;return S>=2&&p[0]instanceof ue&&p[0].equals(p[S-1])&&p.pop(),p},_setLatLngs:function(a){ns.prototype._setLatLngs.call(this,a),zn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return zn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,p=this.options.weight,S=new ie(p,p);if(a=new Te(a.min.subtract(S),a.max.add(S)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var U=0,se=this._rings.length,Se;U<se;U++)Se=Il(this._rings[U],a,!0),Se.length&&this._parts.push(Se)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var p=!1,S,U,se,Se,st,Mt,Ut,an;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(Se=0,Ut=this._parts.length;Se<Ut;Se++)for(S=this._parts[Se],st=0,an=S.length,Mt=an-1;st<an;Mt=st++)U=S[st],se=S[Mt],U.y>a.y!=se.y>a.y&&a.x<(se.x-U.x)*(a.y-U.y)/(se.y-U.y)+U.x&&(p=!p);return p||ns.prototype._containsPoint.call(this,a,!0)}});function wa(a,p){return new So(a,p)}var Uo=es.extend({initialize:function(a,p){k(this,p),this._layers={},a&&this.addData(a)},addData:function(a){var p=K(a)?a:a.features,S,U,se;if(p){for(S=0,U=p.length;S<U;S++)se=p[S],(se.geometries||se.geometry||se.features||se.coordinates)&&this.addData(se);return this}var Se=this.options;if(Se.filter&&!Se.filter(a))return this;var st=Vo(a,Se);return st?(st.feature=Ho(a),st.defaultOptions=st.options,this.resetStyle(st),Se.onEachFeature&&Se.onEachFeature(a,st),this.addLayer(st)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=i({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(p){this._setLayerStyle(p,a)},this)},_setLayerStyle:function(a,p){a.setStyle&&(typeof p=="function"&&(p=p(a.feature)),a.setStyle(p))}});function Vo(a,p){var S=a.type==="Feature"?a.geometry:a,U=S?S.coordinates:null,se=[],Se=p&&p.pointToLayer,st=p&&p.coordsToLatLng||La,Mt,Ut,an,In;if(!U&&!S)return null;switch(S.type){case"Point":return Mt=st(U),xa(Se,a,Mt,p);case"MultiPoint":for(an=0,In=U.length;an<In;an++)Mt=st(U[an]),se.push(xa(Se,a,Mt,p));return new es(se);case"LineString":case"MultiLineString":return Ut=Go(U,S.type==="LineString"?0:1,st),new ns(Ut,p);case"Polygon":case"MultiPolygon":return Ut=Go(U,S.type==="Polygon"?1:2,st),new So(Ut,p);case"GeometryCollection":for(an=0,In=S.geometries.length;an<In;an++){var Xn=Vo({geometry:S.geometries[an],type:"Feature",properties:a.properties},p);Xn&&se.push(Xn)}return new es(se);case"FeatureCollection":for(an=0,In=S.features.length;an<In;an++){var zr=Vo(S.features[an],p);zr&&se.push(zr)}return new es(se);default:throw new Error("Invalid GeoJSON object.")}}function xa(a,p,S,U){return a?a(p,S):new po(S,U&&U.markersInheritOptions&&U)}function La(a){return new ue(a[1],a[0],a[2])}function Go(a,p,S){for(var U=[],se=0,Se=a.length,st;se<Se;se++)st=p?Go(a[se],p-1,S):(S||La)(a[se]),U.push(st);return U}function Ao(a,p){return a=le(a),a.alt!==void 0?[x(a.lng,p),x(a.lat,p),x(a.alt,p)]:[x(a.lng,p),x(a.lat,p)]}function ia(a,p,S,U){for(var se=[],Se=0,st=a.length;Se<st;Se++)se.push(p?ia(a[Se],zn(a[Se])?0:p-1,S,U):Ao(a[Se],U));return!p&&S&&se.length>0&&se.push(se[0].slice()),se}function As(a,p){return a.feature?i({},a.feature,{geometry:p}):Ho(p)}function Ho(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var _t={toGeoJSON:function(a){return As(this,{type:"Point",coordinates:Ao(this.getLatLng(),a)})}};po.include(_t),$o.include(_t),hs.include(_t),ns.include({toGeoJSON:function(a){var p=!zn(this._latlngs),S=ia(this._latlngs,p?1:0,!1,a);return As(this,{type:(p?"Multi":"")+"LineString",coordinates:S})}}),So.include({toGeoJSON:function(a){var p=!zn(this._latlngs),S=p&&!zn(this._latlngs[0]),U=ia(this._latlngs,S?2:p?1:0,!0,a);return p||(U=[U]),As(this,{type:(S?"Multi":"")+"Polygon",coordinates:U})}}),zo.include({toMultiPoint:function(a){var p=[];return this.eachLayer(function(S){p.push(S.toGeoJSON(a).geometry.coordinates)}),As(this,{type:"MultiPoint",coordinates:p})},toGeoJSON:function(a){var p=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(p==="MultiPoint")return this.toMultiPoint(a);var S=p==="GeometryCollection",U=[];return this.eachLayer(function(se){if(se.toGeoJSON){var Se=se.toGeoJSON(a);if(S)U.push(Se.geometry);else{var st=Ho(Se);st.type==="FeatureCollection"?U.push.apply(U,st.features):U.push(st)}}}),S?As(this,{geometries:U,type:"GeometryCollection"}):{type:"FeatureCollection",features:U}}});function Zt(a,p){return new Uo(a,p)}var kt=Zt,An=Vr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,p,S){this._url=a,this._bounds=ee(p),k(this,S)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Gn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){qn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&wo(this._image),this},bringToBack:function(){return this._map&&Sr(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=ee(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",p=this._image=a?this._url:hr("img");if(Gn(p,"leaflet-image-layer"),this._zoomAnimated&&Gn(p,"leaflet-zoom-animated"),this.options.className&&Gn(p,this.options.className),p.onselectstart=y,p.onmousemove=y,p.onload=o(this.fire,this,"load"),p.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=p.src;return}p.src=this._url,p.alt=this.options.alt},_animateZoom:function(a){var p=this._map.getZoomScale(a.zoom),S=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;xo(this._image,S,p)},_reset:function(){var a=this._image,p=new Te(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),S=p.getSize();Mi(a,p.min),a.style.width=S.x+"px",a.style.height=S.y+"px"},_updateOpacity:function(){nn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),Kn=function(a,p,S){return new An(a,p,S)},wr=An.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",p=this._image=a?this._url:hr("video");if(Gn(p,"leaflet-image-layer"),this._zoomAnimated&&Gn(p,"leaflet-zoom-animated"),this.options.className&&Gn(p,this.options.className),p.onselectstart=y,p.onmousemove=y,p.onloadeddata=o(this.fire,this,"load"),a){for(var S=p.getElementsByTagName("source"),U=[],se=0;se<S.length;se++)U.push(S[se].src);this._url=S.length>0?U:[p.src];return}K(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(p.style,"objectFit")&&(p.style.objectFit="fill"),p.autoplay=!!this.options.autoplay,p.loop=!!this.options.loop,p.muted=!!this.options.muted,p.playsInline=!!this.options.playsInline;for(var Se=0;Se<this._url.length;Se++){var st=hr("source");st.src=this._url[Se],p.appendChild(st)}}});function Vi(a,p,S){return new wr(a,p,S)}var Li=An.extend({_initImage:function(){var a=this._image=this._url;Gn(a,"leaflet-image-layer"),this._zoomAnimated&&Gn(a,"leaflet-zoom-animated"),this.options.className&&Gn(a,this.options.className),a.onselectstart=y,a.onmousemove=y}});function Ol(a,p,S){return new Li(a,p,S)}var rs=Vr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,p){a&&(a instanceof ue||K(a))?(this._latlng=le(a),k(this,p)):(k(this,a),this._source=p),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&nn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&nn(this._container,1),this.bringToFront(),this.options.interactive&&(Gn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(nn(this._container,0),this._removeTimeout=setTimeout(o(qn,void 0,this._container),200)):qn(this._container),this.options.interactive&&(_r(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=le(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&wo(this._container),this},bringToBack:function(){return this._map&&Sr(this._container),this},_prepareOpen:function(a){var p=this._source;if(!p._map)return!1;if(p instanceof es){p=null;var S=this._source._layers;for(var U in S)if(S[U]._map){p=S[U];break}if(!p)return!1;this._source=p}if(!a)if(p.getCenter)a=p.getCenter();else if(p.getLatLng)a=p.getLatLng();else if(p.getBounds)a=p.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,p=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof p=="string")a.innerHTML=p;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(p)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),p=Ee(this.options.offset),S=this._getAnchor();this._zoomAnimated?Mi(this._container,a.add(S)):p=p.add(a).add(S);var U=this._containerBottom=-p.y,se=this._containerLeft=-Math.round(this._containerWidth/2)+p.x;this._container.style.bottom=U+"px",this._container.style.left=se+"px"}},_getAnchor:function(){return[0,0]}});Xr.include({_initOverlay:function(a,p,S,U){var se=p;return se instanceof a||(se=new a(U).setContent(p)),S&&se.setLatLng(S),se}}),Vr.include({_initOverlay:function(a,p,S,U){var se=S;return se instanceof a?(k(se,U),se._source=this):(se=p&&!U?p:new a(U,this),se.setContent(S)),se}});var Gi=rs.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,rs.prototype.openOn.call(this,a)},onAdd:function(a){rs.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ms||this._source.on("preclick",$a))},onRemove:function(a){rs.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ms||this._source.off("preclick",$a))},getEvents:function(){var a=rs.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",p=this._container=hr("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),S=this._wrapper=hr("div",a+"-content-wrapper",p);if(this._contentNode=hr("div",a+"-content",S),Ml(p),bu(this._contentNode),br(p,"contextmenu",$a),this._tipContainer=hr("div",a+"-tip-container",p),this._tip=hr("div",a+"-tip",this._tipContainer),this.options.closeButton){var U=this._closeButton=hr("a",a+"-close-button",p);U.setAttribute("role","button"),U.setAttribute("aria-label","Close popup"),U.href="#close",U.innerHTML='<span aria-hidden="true">&#215;</span>',br(U,"click",function(se){Cr(se),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,p=a.style;p.width="",p.whiteSpace="nowrap";var S=a.offsetWidth;S=Math.min(S,this.options.maxWidth),S=Math.max(S,this.options.minWidth),p.width=S+1+"px",p.whiteSpace="",p.height="";var U=a.offsetHeight,se=this.options.maxHeight,Se="leaflet-popup-scrolled";se&&U>se?(p.height=se+"px",Gn(a,Se)):_r(a,Se),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var p=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),S=this._getAnchor();Mi(this._container,p.add(S))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,p=parseInt(ci(this._container,"marginBottom"),10)||0,S=this._container.offsetHeight+p,U=this._containerWidth,se=new ie(this._containerLeft,-S-this._containerBottom);se._add(fs(this._container));var Se=a.layerPointToContainerPoint(se),st=Ee(this.options.autoPanPadding),Mt=Ee(this.options.autoPanPaddingTopLeft||st),Ut=Ee(this.options.autoPanPaddingBottomRight||st),an=a.getSize(),In=0,Xn=0;Se.x+U+Ut.x>an.x&&(In=Se.x+U-an.x+Ut.x),Se.x-In-Mt.x<0&&(In=Se.x-Mt.x),Se.y+S+Ut.y>an.y&&(Xn=Se.y+S-an.y+Ut.y),Se.y-Xn-Mt.y<0&&(Xn=Se.y-Mt.y),(In||Xn)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([In,Xn]))}},_getAnchor:function(){return Ee(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),oa=function(a,p){return new Gi(a,p)};Xr.mergeOptions({closePopupOnClick:!0}),Xr.include({openPopup:function(a,p,S){return this._initOverlay(Gi,a,p,S).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),Vr.include({bindPopup:function(a,p){return this._popup=this._initOverlay(Gi,this._popup,a,p),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof es||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){qr(a);var p=a.layer||a.target;if(this._popup._source===p&&!(p instanceof Ms)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=p,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var Sa=rs.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){rs.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){rs.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=rs.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",p=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=hr("div",p),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var p,S,U=this._map,se=this._container,Se=U.latLngToContainerPoint(U.getCenter()),st=U.layerPointToContainerPoint(a),Mt=this.options.direction,Ut=se.offsetWidth,an=se.offsetHeight,In=Ee(this.options.offset),Xn=this._getAnchor();Mt==="top"?(p=Ut/2,S=an):Mt==="bottom"?(p=Ut/2,S=0):Mt==="center"?(p=Ut/2,S=an/2):Mt==="right"?(p=0,S=an/2):Mt==="left"?(p=Ut,S=an/2):st.x<Se.x?(Mt="right",p=0,S=an/2):(Mt="left",p=Ut+(In.x+Xn.x)*2,S=an/2),a=a.subtract(Ee(p,S,!0)).add(In).add(Xn),_r(se,"leaflet-tooltip-right"),_r(se,"leaflet-tooltip-left"),_r(se,"leaflet-tooltip-top"),_r(se,"leaflet-tooltip-bottom"),Gn(se,"leaflet-tooltip-"+Mt),Mi(se,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&nn(this._container,a)},_animateZoom:function(a){var p=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(p)},_getAnchor:function(){return Ee(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),sa=function(a,p){return new Sa(a,p)};Xr.include({openTooltip:function(a,p,S){return this._initOverlay(Sa,a,p,S).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),Vr.include({bindTooltip:function(a,p){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Sa,this._tooltip,a,p),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var p=a?"off":"on",S={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?S.add=this._openTooltip:(S.mouseover=this._openTooltip,S.mouseout=this.closeTooltip,S.click=this._openTooltip,this._map?this._addFocusListeners():S.add=this._addFocusListeners),this._tooltip.options.sticky&&(S.mousemove=this._moveTooltip),this[p](S),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof es||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var p=typeof a.getElement=="function"&&a.getElement();p&&(br(p,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),br(p,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var p=typeof a.getElement=="function"&&a.getElement();p&&p.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var p=this;this._map.once("moveend",function(){p._openOnceFlag=!1,p._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var p=a.latlng,S,U;this._tooltip.options.sticky&&a.originalEvent&&(S=this._map.mouseEventToContainerPoint(a.originalEvent),U=this._map.containerPointToLayerPoint(S),p=this._map.layerPointToLatLng(U)),this._tooltip.setLatLng(p)}});var aa=na.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var p=a&&a.tagName==="DIV"?a:document.createElement("div"),S=this.options;if(S.html instanceof Element?(bo(p),p.appendChild(S.html)):p.innerHTML=S.html!==!1?S.html:"",S.bgPos){var U=Ee(S.bgPos);p.style.backgroundPosition=-U.x+"px "+-U.y+"px"}return this._setIconStyles(p,"icon"),p},createShadow:function(){return null}});function la(a){return new aa(a)}na.Default=Va;var Qr=Vr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:lt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){k(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),qn(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(wo(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Sr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof ie?a:new ie(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var p=this.getPane().children,S=-a(-1/0,1/0),U=0,se=p.length,Se;U<se;U++)Se=p[U].style.zIndex,p[U]!==this._container&&Se&&(S=a(S,+Se));isFinite(S)&&(this.options.zIndex=S+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!lt.ielt9){nn(this._container,this.options.opacity);var a=+new Date,p=!1,S=!1;for(var U in this._tiles){var se=this._tiles[U];if(!(!se.current||!se.loaded)){var Se=Math.min(1,(a-se.loaded)/200);nn(se.el,Se),Se<1?p=!0:(se.active?S=!0:this._onOpaqueTile(se),se.active=!0)}}S&&!this._noPrune&&this._pruneTiles(),p&&(O(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=hr("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,p=this.options.maxZoom;if(a!==void 0){for(var S in this._levels)S=Number(S),this._levels[S].el.children.length||S===a?(this._levels[S].el.style.zIndex=p-Math.abs(a-S),this._onUpdateLevel(S)):(qn(this._levels[S].el),this._removeTilesAtZoom(S),this._onRemoveLevel(S),delete this._levels[S]);var U=this._levels[a],se=this._map;return U||(U=this._levels[a]={},U.el=hr("div","leaflet-tile-container leaflet-zoom-animated",this._container),U.el.style.zIndex=p,U.origin=se.project(se.unproject(se.getPixelOrigin()),a).round(),U.zoom=a,this._setZoomTransform(U,se.getCenter(),se.getZoom()),y(U.el.offsetWidth),this._onCreateLevel(U)),this._level=U,U}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var a,p,S=this._map.getZoom();if(S>this.options.maxZoom||S<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)p=this._tiles[a],p.retain=p.current;for(a in this._tiles)if(p=this._tiles[a],p.current&&!p.active){var U=p.coords;this._retainParent(U.x,U.y,U.z,U.z-5)||this._retainChildren(U.x,U.y,U.z,U.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var p in this._tiles)this._tiles[p].coords.z===a&&this._removeTile(p)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)qn(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,p,S,U){var se=Math.floor(a/2),Se=Math.floor(p/2),st=S-1,Mt=new ie(+se,+Se);Mt.z=+st;var Ut=this._tileCoordsToKey(Mt),an=this._tiles[Ut];return an&&an.active?(an.retain=!0,!0):(an&&an.loaded&&(an.retain=!0),st>U?this._retainParent(se,Se,st,U):!1)},_retainChildren:function(a,p,S,U){for(var se=2*a;se<2*a+2;se++)for(var Se=2*p;Se<2*p+2;Se++){var st=new ie(se,Se);st.z=S+1;var Mt=this._tileCoordsToKey(st),Ut=this._tiles[Mt];if(Ut&&Ut.active){Ut.retain=!0;continue}else Ut&&Ut.loaded&&(Ut.retain=!0);S+1<U&&this._retainChildren(se,Se,S+1,U)}},_resetView:function(a){var p=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),p,p)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var p=this.options;return p.minNativeZoom!==void 0&&a<p.minNativeZoom?p.minNativeZoom:p.maxNativeZoom!==void 0&&p.maxNativeZoom<a?p.maxNativeZoom:a},_setView:function(a,p,S,U){var se=Math.round(p);this.options.maxZoom!==void 0&&se>this.options.maxZoom||this.options.minZoom!==void 0&&se<this.options.minZoom?se=void 0:se=this._clampZoom(se);var Se=this.options.updateWhenZooming&&se!==this._tileZoom;(!U||Se)&&(this._tileZoom=se,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),se!==void 0&&this._update(a),S||this._pruneTiles(),this._noPrune=!!S),this._setZoomTransforms(a,p)},_setZoomTransforms:function(a,p){for(var S in this._levels)this._setZoomTransform(this._levels[S],a,p)},_setZoomTransform:function(a,p,S){var U=this._map.getZoomScale(S,a.zoom),se=a.origin.multiplyBy(U).subtract(this._map._getNewPixelOrigin(p,S)).round();lt.any3d?xo(a.el,se,U):Mi(a.el,se)},_resetGrid:function(){var a=this._map,p=a.options.crs,S=this._tileSize=this.getTileSize(),U=this._tileZoom,se=this._map.getPixelWorldBounds(this._tileZoom);se&&(this._globalTileRange=this._pxBoundsToTileRange(se)),this._wrapX=p.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,p.wrapLng[0]],U).x/S.x),Math.ceil(a.project([0,p.wrapLng[1]],U).x/S.y)],this._wrapY=p.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([p.wrapLat[0],0],U).y/S.x),Math.ceil(a.project([p.wrapLat[1],0],U).y/S.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var p=this._map,S=p._animatingZoom?Math.max(p._animateToZoom,p.getZoom()):p.getZoom(),U=p.getZoomScale(S,this._tileZoom),se=p.project(a,this._tileZoom).floor(),Se=p.getSize().divideBy(U*2);return new Te(se.subtract(Se),se.add(Se))},_update:function(a){var p=this._map;if(p){var S=this._clampZoom(p.getZoom());if(a===void 0&&(a=p.getCenter()),this._tileZoom!==void 0){var U=this._getTiledPixelBounds(a),se=this._pxBoundsToTileRange(U),Se=se.getCenter(),st=[],Mt=this.options.keepBuffer,Ut=new Te(se.getBottomLeft().subtract([Mt,-Mt]),se.getTopRight().add([Mt,-Mt]));if(!(isFinite(se.min.x)&&isFinite(se.min.y)&&isFinite(se.max.x)&&isFinite(se.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var an in this._tiles){var In=this._tiles[an].coords;(In.z!==this._tileZoom||!Ut.contains(new ie(In.x,In.y)))&&(this._tiles[an].current=!1)}if(Math.abs(S-this._tileZoom)>1){this._setView(a,S);return}for(var Xn=se.min.y;Xn<=se.max.y;Xn++)for(var zr=se.min.x;zr<=se.max.x;zr++){var mo=new ie(zr,Xn);if(mo.z=this._tileZoom,!!this._isValidTile(mo)){var Ji=this._tiles[this._tileCoordsToKey(mo)];Ji?Ji.current=!0:st.push(mo)}}if(st.sort(function(Hi,gs){return Hi.distanceTo(Se)-gs.distanceTo(Se)}),st.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Do=document.createDocumentFragment();for(zr=0;zr<st.length;zr++)this._addTile(st[zr],Do);this._level.el.appendChild(Do)}}}},_isValidTile:function(a){var p=this._map.options.crs;if(!p.infinite){var S=this._globalTileRange;if(!p.wrapLng&&(a.x<S.min.x||a.x>S.max.x)||!p.wrapLat&&(a.y<S.min.y||a.y>S.max.y))return!1}if(!this.options.bounds)return!0;var U=this._tileCoordsToBounds(a);return ee(this.options.bounds).overlaps(U)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var p=this._map,S=this.getTileSize(),U=a.scaleBy(S),se=U.add(S),Se=p.unproject(U,a.z),st=p.unproject(se,a.z);return[Se,st]},_tileCoordsToBounds:function(a){var p=this._tileCoordsToNwSe(a),S=new q(p[0],p[1]);return this.options.noWrap||(S=this._map.wrapLatLngBounds(S)),S},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var p=a.split(":"),S=new ie(+p[0],+p[1]);return S.z=+p[2],S},_removeTile:function(a){var p=this._tiles[a];p&&(qn(p.el),delete this._tiles[a],this.fire("tileunload",{tile:p.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){Gn(a,"leaflet-tile");var p=this.getTileSize();a.style.width=p.x+"px",a.style.height=p.y+"px",a.onselectstart=y,a.onmousemove=y,lt.ielt9&&this.options.opacity<1&&nn(a,this.options.opacity)},_addTile:function(a,p){var S=this._getTilePos(a),U=this._tileCoordsToKey(a),se=this.createTile(this._wrapCoords(a),o(this._tileReady,this,a));this._initTile(se),this.createTile.length<2&&R(o(this._tileReady,this,a,null,se)),Mi(se,S),this._tiles[U]={el:se,coords:a,current:!0},p.appendChild(se),this.fire("tileloadstart",{tile:se,coords:a})},_tileReady:function(a,p,S){p&&this.fire("tileerror",{error:p,tile:S,coords:a});var U=this._tileCoordsToKey(a);S=this._tiles[U],S&&(S.loaded=+new Date,this._map._fadeAnimated?(nn(S.el,0),O(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this)):(S.active=!0,this._pruneTiles()),p||(Gn(S.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:S.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),lt.ielt9||!this._map._fadeAnimated?R(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var p=new ie(this._wrapX?g(a.x,this._wrapX):a.x,this._wrapY?g(a.y,this._wrapY):a.y);return p.z=a.z,p},_pxBoundsToTileRange:function(a){var p=this.getTileSize();return new Te(a.min.unscaleBy(p).floor(),a.max.unscaleBy(p).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function Zs(a){return new Qr(a)}var ko=Qr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,p){this._url=a,p=k(this,p),p.detectRetina&&lt.retina&&p.maxZoom>0?(p.tileSize=Math.floor(p.tileSize/2),p.zoomReverse?(p.zoomOffset--,p.minZoom=Math.min(p.maxZoom,p.minZoom+1)):(p.zoomOffset++,p.maxZoom=Math.max(p.minZoom,p.maxZoom-1)),p.minZoom=Math.max(0,p.minZoom)):p.zoomReverse?p.minZoom=Math.min(p.maxZoom,p.minZoom):p.maxZoom=Math.max(p.minZoom,p.maxZoom),typeof p.subdomains=="string"&&(p.subdomains=p.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,p){return this._url===a&&p===void 0&&(p=!0),this._url=a,p||this.redraw(),this},createTile:function(a,p){var S=document.createElement("img");return br(S,"load",o(this._tileOnLoad,this,p,S)),br(S,"error",o(this._tileOnError,this,p,S)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(S.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(S.referrerPolicy=this.options.referrerPolicy),S.alt="",S.src=this.getTileUrl(a),S},getTileUrl:function(a){var p={r:lt.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var S=this._globalTileRange.max.y-a.y;this.options.tms&&(p.y=S),p["-y"]=S}return F(this._url,i(p,this.options))},_tileOnLoad:function(a,p){lt.ielt9?setTimeout(o(a,this,null,p),0):a(null,p)},_tileOnError:function(a,p,S){var U=this.options.errorTileUrl;U&&p.getAttribute("src")!==U&&(p.src=U),a(S,p)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,p=this.options.maxZoom,S=this.options.zoomReverse,U=this.options.zoomOffset;return S&&(a=p-a),a+U},_getSubdomain:function(a){var p=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[p]},_abortLoading:function(){var a,p;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(p=this._tiles[a].el,p.onload=y,p.onerror=y,!p.complete)){p.src=he;var S=this._tiles[a].coords;qn(p),delete this._tiles[a],this.fire("tileabort",{tile:p,coords:S})}},_removeTile:function(a){var p=this._tiles[a];if(p)return p.el.setAttribute("src",he),Qr.prototype._removeTile.call(this,a)},_tileReady:function(a,p,S){if(!(!this._map||S&&S.getAttribute("src")===he))return Qr.prototype._tileReady.call(this,a,p,S)}});function Si(a,p){return new ko(a,p)}var Ai=ko.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,p){this._url=a;var S=i({},this.defaultWmsParams);for(var U in p)U in this.options||(S[U]=p[U]);p=k(this,p);var se=p.detectRetina&&lt.retina?2:1,Se=this.getTileSize();S.width=Se.x*se,S.height=Se.y*se,this.wmsParams=S},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var p=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[p]=this._crs.code,ko.prototype.onAdd.call(this,a)},getTileUrl:function(a){var p=this._tileCoordsToNwSe(a),S=this._crs,U=Y(S.project(p[0]),S.project(p[1])),se=U.min,Se=U.max,st=(this._wmsVersion>=1.3&&this._crs===ho?[se.y,se.x,Se.y,Se.x]:[se.x,se.y,Se.x,Se.y]).join(","),Mt=ko.prototype.getTileUrl.call(this,a);return Mt+N(this.wmsParams,Mt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+st},setParams:function(a,p){return i(this.wmsParams,a),p||this.redraw(),this}});function so(a,p){return new Ai(a,p)}ko.WMS=Ai,Si.wms=so;var Bi=Vr.extend({options:{padding:.1},initialize:function(a){k(this,a),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Gn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,p){var S=this._map.getZoomScale(p,this._zoom),U=this._map.getSize().multiplyBy(.5+this.options.padding),se=this._map.project(this._center,p),Se=U.multiplyBy(-S).add(se).subtract(this._map._getNewPixelOrigin(a,p));lt.any3d?xo(this._container,Se,S):Mi(this._container,Se)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,p=this._map.getSize(),S=this._map.containerPointToLayerPoint(p.multiplyBy(-a)).round();this._bounds=new Te(S,S.add(p.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ks=Bi.extend({options:{tolerance:0},getEvents:function(){var a=Bi.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Bi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");br(a,"mousemove",this._onMouseMove,this),br(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),br(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){O(this._redrawRequest),delete this._ctx,qn(this._container),Nr(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var p in this._layers)a=this._layers[p],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Bi.prototype._update.call(this);var a=this._bounds,p=this._container,S=a.getSize(),U=lt.retina?2:1;Mi(p,a.min),p.width=U*S.x,p.height=U*S.y,p.style.width=S.x+"px",p.style.height=S.y+"px",lt.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){Bi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[f(a)]=a;var p=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=p),this._drawLast=p,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var p=a._order,S=p.next,U=p.prev;S?S.prev=U:this._drawLast=U,U?U.next=S:this._drawFirst=S,delete a._order,delete this._layers[f(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var p=a.options.dashArray.split(/[, ]+/),S=[],U,se;for(se=0;se<p.length;se++){if(U=Number(p[se]),isNaN(U))return;S.push(U)}a.options._dashArray=S}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||R(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var p=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Te,this._redrawBounds.extend(a._pxBounds.min.subtract([p,p])),this._redrawBounds.extend(a._pxBounds.max.add([p,p]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var p=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,p.x,p.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,p=this._redrawBounds;if(this._ctx.save(),p){var S=p.getSize();this._ctx.beginPath(),this._ctx.rect(p.min.x,p.min.y,S.x,S.y),this._ctx.clip()}this._drawing=!0;for(var U=this._drawFirst;U;U=U.next)a=U.layer,(!p||a._pxBounds&&a._pxBounds.intersects(p))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,p){if(this._drawing){var S,U,se,Se,st=a._parts,Mt=st.length,Ut=this._ctx;if(Mt){for(Ut.beginPath(),S=0;S<Mt;S++){for(U=0,se=st[S].length;U<se;U++)Se=st[S][U],Ut[U?"lineTo":"moveTo"](Se.x,Se.y);p&&Ut.closePath()}this._fillStroke(Ut,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var p=a._point,S=this._ctx,U=Math.max(Math.round(a._radius),1),se=(Math.max(Math.round(a._radiusY),1)||U)/U;se!==1&&(S.save(),S.scale(1,se)),S.beginPath(),S.arc(p.x,p.y/se,U,0,Math.PI*2,!1),se!==1&&S.restore(),this._fillStroke(S,a)}},_fillStroke:function(a,p){var S=p.options;S.fill&&(a.globalAlpha=S.fillOpacity,a.fillStyle=S.fillColor||S.color,a.fill(S.fillRule||"evenodd")),S.stroke&&S.weight!==0&&(a.setLineDash&&a.setLineDash(p.options&&p.options._dashArray||[]),a.globalAlpha=S.opacity,a.lineWidth=S.weight,a.strokeStyle=S.color,a.lineCap=S.lineCap,a.lineJoin=S.lineJoin,a.stroke())},_onClick:function(a){for(var p=this._map.mouseEventToLayerPoint(a),S,U,se=this._drawFirst;se;se=se.next)S=se.layer,S.options.interactive&&S._containsPoint(p)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(S))&&(U=S);this._fireEvent(U?[U]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var p=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,p)}},_handleMouseOut:function(a){var p=this._hoveredLayer;p&&(_r(this._container,"leaflet-interactive"),this._fireEvent([p],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,p){if(!this._mouseHoverThrottled){for(var S,U,se=this._drawFirst;se;se=se.next)S=se.layer,S.options.interactive&&S._containsPoint(p)&&(U=S);U!==this._hoveredLayer&&(this._handleMouseOut(a),U&&(Gn(this._container,"leaflet-interactive"),this._fireEvent([U],a,"mouseover"),this._hoveredLayer=U)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,p,S){this._map._fireDOMEvent(p,S||p.type,a)},_bringToFront:function(a){var p=a._order;if(p){var S=p.next,U=p.prev;if(S)S.prev=U;else return;U?U.next=S:S&&(this._drawFirst=S),p.prev=this._drawLast,this._drawLast.next=p,p.next=null,this._drawLast=p,this._requestRedraw(a)}},_bringToBack:function(a){var p=a._order;if(p){var S=p.next,U=p.prev;if(U)U.next=S;else return;S?S.prev=U:U&&(this._drawLast=U),p.prev=null,p.next=this._drawFirst,this._drawFirst.prev=p,this._drawFirst=p,this._requestRedraw(a)}}});function ds(a){return lt.canvas?new ks(a):null}var Rs=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),xu={_initContainer:function(){this._container=hr("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Bi.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var p=a._container=Rs("shape");Gn(p,"leaflet-vml-shape "+(this.options.className||"")),p.coordsize="1 1",a._path=Rs("path"),p.appendChild(a._path),this._updateStyle(a),this._layers[f(a)]=a},_addPath:function(a){var p=a._container;this._container.appendChild(p),a.options.interactive&&a.addInteractiveTarget(p)},_removePath:function(a){var p=a._container;qn(p),a.removeInteractiveTarget(p),delete this._layers[f(a)]},_updateStyle:function(a){var p=a._stroke,S=a._fill,U=a.options,se=a._container;se.stroked=!!U.stroke,se.filled=!!U.fill,U.stroke?(p||(p=a._stroke=Rs("stroke")),se.appendChild(p),p.weight=U.weight+"px",p.color=U.color,p.opacity=U.opacity,U.dashArray?p.dashStyle=K(U.dashArray)?U.dashArray.join(" "):U.dashArray.replace(/( *, *)/g," "):p.dashStyle="",p.endcap=U.lineCap.replace("butt","flat"),p.joinstyle=U.lineJoin):p&&(se.removeChild(p),a._stroke=null),U.fill?(S||(S=a._fill=Rs("fill")),se.appendChild(S),S.color=U.fillColor||U.color,S.opacity=U.fillOpacity):S&&(se.removeChild(S),a._fill=null)},_updateCircle:function(a){var p=a._point.round(),S=Math.round(a._radius),U=Math.round(a._radiusY||S);this._setPath(a,a._empty()?"M0 0":"AL "+p.x+","+p.y+" "+S+","+U+" 0,"+65535*360)},_setPath:function(a,p){a._path.v=p},_bringToFront:function(a){wo(a._container)},_bringToBack:function(a){Sr(a._container)}},ua=lt.vml?Rs:ye,go=Bi.extend({_initContainer:function(){this._container=ua("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ua("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){qn(this._container),Nr(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Bi.prototype._update.call(this);var a=this._bounds,p=a.getSize(),S=this._container;(!this._svgSize||!this._svgSize.equals(p))&&(this._svgSize=p,S.setAttribute("width",p.x),S.setAttribute("height",p.y)),Mi(S,a.min),S.setAttribute("viewBox",[a.min.x,a.min.y,p.x,p.y].join(" ")),this.fire("update")}},_initPath:function(a){var p=a._path=ua("path");a.options.className&&Gn(p,a.options.className),a.options.interactive&&Gn(p,"leaflet-interactive"),this._updateStyle(a),this._layers[f(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){qn(a._path),a.removeInteractiveTarget(a._path),delete this._layers[f(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var p=a._path,S=a.options;p&&(S.stroke?(p.setAttribute("stroke",S.color),p.setAttribute("stroke-opacity",S.opacity),p.setAttribute("stroke-width",S.weight),p.setAttribute("stroke-linecap",S.lineCap),p.setAttribute("stroke-linejoin",S.lineJoin),S.dashArray?p.setAttribute("stroke-dasharray",S.dashArray):p.removeAttribute("stroke-dasharray"),S.dashOffset?p.setAttribute("stroke-dashoffset",S.dashOffset):p.removeAttribute("stroke-dashoffset")):p.setAttribute("stroke","none"),S.fill?(p.setAttribute("fill",S.fillColor||S.color),p.setAttribute("fill-opacity",S.fillOpacity),p.setAttribute("fill-rule",S.fillRule||"evenodd")):p.setAttribute("fill","none"))},_updatePoly:function(a,p){this._setPath(a,de(a._parts,p))},_updateCircle:function(a){var p=a._point,S=Math.max(Math.round(a._radius),1),U=Math.max(Math.round(a._radiusY),1)||S,se="a"+S+","+U+" 0 1,0 ",Se=a._empty()?"M0 0":"M"+(p.x-S)+","+p.y+se+S*2+",0 "+se+-S*2+",0 ";this._setPath(a,Se)},_setPath:function(a,p){a._path.setAttribute("d",p)},_bringToFront:function(a){wo(a._path)},_bringToBack:function(a){Sr(a._path)}});lt.vml&&go.include(xu);function Oi(a){return lt.svg||lt.vml?new go(a):null}Xr.include({getRenderer:function(a){var p=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return p||(p=this._renderer=this._createRenderer()),this.hasLayer(p)||this.addLayer(p),p},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var p=this._paneRenderers[a];return p===void 0&&(p=this._createRenderer({pane:a}),this._paneRenderers[a]=p),p},_createRenderer:function(a){return this.options.preferCanvas&&ds(a)||Oi(a)}});var qo=So.extend({initialize:function(a,p){So.prototype.initialize.call(this,this._boundsToLatLngs(a),p)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=ee(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function ps(a,p){return new qo(a,p)}go.create=ua,go.pointsToPath=de,Uo.geometryToLayer=Vo,Uo.coordsToLatLng=La,Uo.coordsToLatLngs=Go,Uo.latLngToCoords=Ao,Uo.latLngsToCoords=ia,Uo.getFeature=As,Uo.asFeature=Ho,Xr.mergeOptions({boxZoom:!0});var pr=bi.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){br(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Nr(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){qn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Qo(),Fo(),this._startPoint=this._map.mouseEventToContainerPoint(a),br(document,{contextmenu:qr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=hr("div","leaflet-zoom-box",this._container),Gn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var p=new Te(this._point,this._startPoint),S=p.getSize();Mi(this._box,p.min),this._box.style.width=S.x+"px",this._box.style.height=S.y+"px"},_finish:function(){this._moved&&(qn(this._box),_r(this._container,"leaflet-crosshair")),Ro(),eo(),Nr(document,{contextmenu:qr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var p=new q(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(p).fire("boxzoomend",{boxZoomBounds:p})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Xr.addInitHook("addHandler","boxZoom",pr),Xr.mergeOptions({doubleClickZoom:!0});var Ca=bi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var p=this._map,S=p.getZoom(),U=p.options.zoomDelta,se=a.originalEvent.shiftKey?S-U:S+U;p.options.doubleClickZoom==="center"?p.setZoom(se):p.setZoomAround(a.containerPoint,se)}});Xr.addInitHook("addHandler","doubleClickZoom",Ca),Xr.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ea=bi.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new qs(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}Gn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){_r(this._map._container,"leaflet-grab"),_r(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var p=ee(this._map.options.maxBounds);this._offsetLimit=Y(this._map.latLngToContainerPoint(p.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(p.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var p=this._lastTime=+new Date,S=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(S),this._times.push(p),this._prunePositions(p)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),p=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=p.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,p){return a-(a-p)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),p=this._offsetLimit;a.x<p.min.x&&(a.x=this._viscousLimit(a.x,p.min.x)),a.y<p.min.y&&(a.y=this._viscousLimit(a.y,p.min.y)),a.x>p.max.x&&(a.x=this._viscousLimit(a.x,p.max.x)),a.y>p.max.y&&(a.y=this._viscousLimit(a.y,p.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,p=Math.round(a/2),S=this._initialWorldOffset,U=this._draggable._newPos.x,se=(U-p+S)%a+p-S,Se=(U+p+S)%a-p-S,st=Math.abs(se+S)<Math.abs(Se+S)?se:Se;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=st},_onDragEnd:function(a){var p=this._map,S=p.options,U=!S.inertia||a.noInertia||this._times.length<2;if(p.fire("dragend",a),U)p.fire("moveend");else{this._prunePositions(+new Date);var se=this._lastPos.subtract(this._positions[0]),Se=(this._lastTime-this._times[0])/1e3,st=S.easeLinearity,Mt=se.multiplyBy(st/Se),Ut=Mt.distanceTo([0,0]),an=Math.min(S.inertiaMaxSpeed,Ut),In=Mt.multiplyBy(an/Ut),Xn=an/(S.inertiaDeceleration*st),zr=In.multiplyBy(-Xn/2).round();!zr.x&&!zr.y?p.fire("moveend"):(zr=p._limitOffset(zr,p.options.maxBounds),R(function(){p.panBy(zr,{duration:Xn,easeLinearity:st,noMoveStart:!0,animate:!0})}))}}});Xr.addInitHook("addHandler","dragging",Ea),Xr.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ks=bi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),br(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Nr(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,p=document.documentElement,S=a.scrollTop||p.scrollTop,U=a.scrollLeft||p.scrollLeft;this._map._container.focus(),window.scrollTo(U,S)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var p=this._panKeys={},S=this.keyCodes,U,se;for(U=0,se=S.left.length;U<se;U++)p[S.left[U]]=[-1*a,0];for(U=0,se=S.right.length;U<se;U++)p[S.right[U]]=[a,0];for(U=0,se=S.down.length;U<se;U++)p[S.down[U]]=[0,a];for(U=0,se=S.up.length;U<se;U++)p[S.up[U]]=[0,-1*a]},_setZoomDelta:function(a){var p=this._zoomKeys={},S=this.keyCodes,U,se;for(U=0,se=S.zoomIn.length;U<se;U++)p[S.zoomIn[U]]=a;for(U=0,se=S.zoomOut.length;U<se;U++)p[S.zoomOut[U]]=-a},_addHooks:function(){br(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Nr(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var p=a.keyCode,S=this._map,U;if(p in this._panKeys){if(!S._panAnim||!S._panAnim._inProgress)if(U=this._panKeys[p],a.shiftKey&&(U=Ee(U).multiplyBy(3)),S.options.maxBounds&&(U=S._limitOffset(Ee(U),S.options.maxBounds)),S.options.worldCopyJump){var se=S.wrapLatLng(S.unproject(S.project(S.getCenter()).add(U)));S.panTo(se)}else S.panBy(U)}else if(p in this._zoomKeys)S.setZoom(S.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[p]);else if(p===27&&S._popup&&S._popup.options.closeOnEscapeKey)S.closePopup();else return;qr(a)}}});Xr.addInitHook("addHandler","keyboard",Ks),Xr.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var is=bi.extend({addHooks:function(){br(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Nr(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var p=Yl(a),S=this._map.options.wheelDebounceTime;this._delta+=p,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var U=Math.max(S-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),U),qr(a)},_performZoom:function(){var a=this._map,p=a.getZoom(),S=this._map.options.zoomSnap||0;a._stop();var U=this._delta/(this._map.options.wheelPxPerZoomLevel*4),se=4*Math.log(2/(1+Math.exp(-Math.abs(U))))/Math.LN2,Se=S?Math.ceil(se/S)*S:se,st=a._limitZoom(p+(this._delta>0?Se:-Se))-p;this._delta=0,this._startTime=null,st&&(a.options.scrollWheelZoom==="center"?a.setZoom(p+st):a.setZoomAround(this._lastMousePos,p+st))}});Xr.addInitHook("addHandler","scrollWheelZoom",is);var bc=600;Xr.mergeOptions({tapHold:lt.touchNative&&lt.safari&&lt.mobile,tapTolerance:15});var To=bi.extend({addHooks:function(){br(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Nr(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var p=a.touches[0];this._startPos=this._newPos=new ie(p.clientX,p.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(br(document,"touchend",Cr),br(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",p))},this),bc),br(document,"touchend touchcancel contextmenu",this._cancel,this),br(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){Nr(document,"touchend",Cr),Nr(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),Nr(document,"touchend touchcancel contextmenu",this._cancel,this),Nr(document,"touchmove",this._onMove,this)},_onMove:function(a){var p=a.touches[0];this._newPos=new ie(p.clientX,p.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,p){var S=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:p.screenX,screenY:p.screenY,clientX:p.clientX,clientY:p.clientY});S._simulated=!0,p.target.dispatchEvent(S)}});Xr.addInitHook("addHandler","tapHold",To),Xr.mergeOptions({touchZoom:lt.touch,bounceAtZoomLimits:!0});var No=bi.extend({addHooks:function(){Gn(this._map._container,"leaflet-touch-zoom"),br(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){_r(this._map._container,"leaflet-touch-zoom"),Nr(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var p=this._map;if(!(!a.touches||a.touches.length!==2||p._animatingZoom||this._zooming)){var S=p.mouseEventToContainerPoint(a.touches[0]),U=p.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=p.getSize()._divideBy(2),this._startLatLng=p.containerPointToLatLng(this._centerPoint),p.options.touchZoom!=="center"&&(this._pinchStartLatLng=p.containerPointToLatLng(S.add(U)._divideBy(2))),this._startDist=S.distanceTo(U),this._startZoom=p.getZoom(),this._moved=!1,this._zooming=!0,p._stop(),br(document,"touchmove",this._onTouchMove,this),br(document,"touchend touchcancel",this._onTouchEnd,this),Cr(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var p=this._map,S=p.mouseEventToContainerPoint(a.touches[0]),U=p.mouseEventToContainerPoint(a.touches[1]),se=S.distanceTo(U)/this._startDist;if(this._zoom=p.getScaleZoom(se,this._startZoom),!p.options.bounceAtZoomLimits&&(this._zoom<p.getMinZoom()&&se<1||this._zoom>p.getMaxZoom()&&se>1)&&(this._zoom=p._limitZoom(this._zoom)),p.options.touchZoom==="center"){if(this._center=this._startLatLng,se===1)return}else{var Se=S._add(U)._divideBy(2)._subtract(this._centerPoint);if(se===1&&Se.x===0&&Se.y===0)return;this._center=p.unproject(p.project(this._pinchStartLatLng,this._zoom).subtract(Se),this._zoom)}this._moved||(p._moveStart(!0,!1),this._moved=!0),O(this._animRequest);var st=o(p._move,p,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=R(st,this,!0),Cr(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,O(this._animRequest),Nr(document,"touchmove",this._onTouchMove,this),Nr(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Xr.addInitHook("addHandler","touchZoom",No),Xr.BoxZoom=pr,Xr.DoubleClickZoom=Ca,Xr.Drag=Ea,Xr.Keyboard=Ks,Xr.ScrollWheelZoom=is,Xr.TapHold=To,Xr.TouchZoom=No,t.Bounds=Te,t.Browser=lt,t.CRS=pe,t.Canvas=ks,t.Circle=$o,t.CircleMarker=hs,t.Class=z,t.Control=or,t.DivIcon=aa,t.DivOverlay=rs,t.DomEvent=kl,t.DomUtil=gr,t.Draggable=qs,t.Evented=oe,t.FeatureGroup=es,t.GeoJSON=Uo,t.GridLayer=Qr,t.Handler=bi,t.Icon=na,t.ImageOverlay=An,t.LatLng=ue,t.LatLngBounds=q,t.Layer=Vr,t.LayerGroup=zo,t.LineUtil=Ur,t.Map=Xr,t.Marker=po,t.Mixin=Ju,t.Path=Ms,t.Point=ie,t.PolyUtil=cl,t.Polygon=So,t.Polyline=ns,t.Popup=Gi,t.PosAnimation=Jl,t.Projection=xi,t.Rectangle=qo,t.Renderer=Bi,t.SVG=go,t.SVGOverlay=Li,t.TileLayer=ko,t.Tooltip=Sa,t.Transformation=Me,t.Util=B,t.VideoOverlay=wr,t.bind=o,t.bounds=Y,t.canvas=ds,t.circle=ts,t.circleMarker=hl,t.control=ro,t.divIcon=la,t.extend=i,t.featureGroup=Ql,t.geoJSON=Zt,t.geoJson=kt,t.gridLayer=Zs,t.icon=wu,t.imageOverlay=Kn,t.latLng=le,t.latLngBounds=ee,t.layerGroup=fl,t.map=no,t.marker=ra,t.point=Ee,t.polygon=wa,t.polyline=Xu,t.popup=oa,t.rectangle=ps,t.setOptions=k,t.stamp=f,t.svg=Oi,t.svgOverlay=Ol,t.tileLayer=Si,t.tooltip=sa,t.transformation=Ge,t.version=r,t.videoOverlay=Vi;var Ys=window.L;t.noConflict=function(){return window.L=Ys,this},window.L=t})})(a1,a1.exports);var Ft=a1.exports;const Vn=fy(Ft);var ob={exports:{}};(function(e,n){(function(t,r){r(n)})(ea,function(t){var r=typeof window<"u"?window:typeof ea<"u"?ea:typeof self<"u"?self:{};function i(d,g){return d(g={exports:{}},g.exports),g.exports}var s=i(function(d,g){(function(y){const x={escape:function(W){return W.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:_,mimeType:function(W){return W=_(W).toLowerCase(),function(){var V="application/font-woff",oe="image/jpeg";return{woff:V,woff2:V,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:oe,jpeg:oe,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[W]||""},dataAsUrl:function(W,V){return`data:${V};base64,`+W},isDataUrl:function(W){return W.search(/^(data:)/)!==-1},canvasToBlob:function(W){return W.toBlob?new Promise(function(oe){W.toBlob(oe)}):(V=W,new Promise(function(oe){const ie=me(V.toDataURL().split(",")[1]);var xe=ie.length;const Ee=new Uint8Array(xe);for(let Te=0;Te<xe;Te++)Ee[Te]=ie.charCodeAt(Te);oe(new Blob([Ee],{type:"image/png"}))}));var V},resolveUrl:function(W,V){const oe=document.implementation.createHTMLDocument(),ie=oe.createElement("base"),xe=(oe.head.appendChild(ie),oe.createElement("a"));return oe.body.appendChild(xe),ie.href=V,xe.href=W,xe.href},getAndEncode:function(W){let V=he.impl.urlCache.find(function(oe){return oe.url===W});return V||(V={url:W,promise:null},he.impl.urlCache.push(V)),V.promise===null&&(he.impl.options.cacheBust&&(W+=(/\?/.test(W)?"&":"?")+new Date().getTime()),V.promise=new Promise(function(oe){const ie=he.impl.options.httpTimeout,xe=new XMLHttpRequest;let Ee;var Te;function Y(q){console.error(q),oe("")}xe.onreadystatechange=function(){if(xe.readyState===4)if(xe.status!==200)Ee?oe(Ee):Y(`cannot fetch resource: ${W}, status: `+xe.status);else{const q=new FileReader;q.onloadend=function(){var ee=q.result.split(/,/)[1];oe(ee)},q.readAsDataURL(xe.response)}},xe.ontimeout=function(){Ee?oe(Ee):Y(`timeout of ${ie}ms occured while fetching resource: `+W)},xe.responseType="blob",xe.timeout=ie,he.impl.options.useCredentials&&(xe.withCredentials=!0),xe.open("GET",W,!0),xe.send(),he.impl.options.imagePlaceholder&&(Te=he.impl.options.imagePlaceholder.split(/,/))&&Te[1]&&(Ee=Te[1])})),V.promise},uid:function(){let W=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+W++}}(),delay:function(W){return function(V){return new Promise(function(oe){setTimeout(function(){oe(V)},W)})}},asArray:function(W){const V=[],oe=W.length;for(let ie=0;ie<oe;ie++)V.push(W[ie]);return V},escapeXhtml:function(W){return W.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(W){return W!=="data:,"?new Promise(function(V,oe){const ie=new Image;he.impl.options.useCredentials&&(ie.crossOrigin="use-credentials"),ie.onload=function(){V(ie)},ie.onerror=oe,ie.src=W}):Promise.resolve()},width:function(W){var V=M(W,"border-left-width"),oe=M(W,"border-right-width");return W.scrollWidth+V+oe},height:function(W){var V=M(W,"border-top-width"),oe=M(W,"border-bottom-width");return W.scrollHeight+V+oe}};function _(W){return(W=/\.([^\.\/]*?)(\?|$)/g.exec(W))?W[1]:""}function M(W,V){const oe=fe(W).getPropertyValue(V);return parseFloat(oe.replace("px",""))}const k=function(){const W=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(xe,Ee,Te){return V(xe)?Promise.resolve(xe).then(oe).then(function(Y){let q=Promise.resolve(xe);return Y.forEach(function(ee){q=q.then(function(ue){return ie(ue,ee,Ee,Te)})}),q}):Promise.resolve(xe)},shouldProcess:V,impl:{readUrls:oe,inline:ie}};function V(xe){return xe.search(W)!==-1}function oe(xe){const Ee=[];for(var Te;(Te=W.exec(xe))!==null;)Ee.push(Te[1]);return Ee.filter(function(Y){return!x.isDataUrl(Y)})}function ie(xe,Ee,Te,Y){return Promise.resolve(Ee).then(function(q){return Te?x.resolveUrl(q,Te):q}).then(Y||x.getAndEncode).then(function(q){return x.dataAsUrl(q,x.mimeType(Ee))}).then(function(q){return xe.replace((ee=Ee,new RegExp(`(url\\(['"]?)(${x.escape(ee)})(['"]?\\))`,"g")),`$1${q}$3`);var ee})}}(),N={resolveAll:function(){return T().then(function(W){return Promise.all(W.map(function(V){return V.resolve()}))}).then(function(W){return W.join(`
`)})},impl:{readAll:T}};function T(){return Promise.resolve(x.asArray(document.styleSheets)).then(function(V){const oe=[];return V.forEach(function(ie){if(Object.getPrototypeOf(ie).hasOwnProperty("cssRules"))try{x.asArray(ie.cssRules||[]).forEach(oe.push.bind(oe))}catch(xe){console.log("Error while reading CSS rules from "+ie.href,xe.toString())}}),oe}).then(function(V){return V.filter(function(oe){return oe.type===CSSRule.FONT_FACE_RULE}).filter(function(oe){return k.shouldProcess(oe.style.getPropertyValue("src"))})}).then(function(V){return V.map(W)});function W(V){return{resolve:function(){var oe=(V.parentStyleSheet||{}).href;return k.inlineAll(V.cssText,oe)},src:function(){return V.style.getPropertyValue("src")}}}}const F={inlineAll:function W(V){return V instanceof Element?function(oe){const ie=oe.style.getPropertyValue("background");return ie?k.inlineAll(ie).then(function(xe){oe.style.setProperty("background",xe,ie)}).then(function(){return oe}):Promise.resolve(oe)}(V).then(function(){return V instanceof HTMLImageElement?K(V).inline():Promise.all(x.asArray(V.childNodes).map(function(oe){return W(oe)}))}):Promise.resolve(V)},impl:{newImage:K}};function K(W){return{inline:function(V){return x.isDataUrl(W.src)?Promise.resolve():Promise.resolve(W.src).then(V||x.getAndEncode).then(function(oe){return x.dataAsUrl(oe,x.mimeType(W.src))}).then(function(oe){return new Promise(function(ie){W.onload=ie,W.onerror=ie,W.src=oe})})}}}const Q={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},he={toSvg:G,toPng:function(W,V){return(V=V||{}).raster=!0,$(W,V).then(function(oe){return oe.toDataURL()})},toJpeg:function(W,V){return(V=V||{}).raster=!0,$(W,V).then(function(oe){return oe.toDataURL("image/jpeg",V.quality||1)})},toBlob:function(W,V){return(V=V||{}).raster=!0,$(W,V).then(x.canvasToBlob)},toPixelData:function(W,V){return(V=V||{}).raster=!0,$(W,V).then(function(oe){return oe.getContext("2d").getImageData(0,0,x.width(W),x.height(W)).data})},toCanvas:function(W,V){return(V=V||{}).raster=!0,$(W,V||{})},impl:{fontFaces:N,images:F,util:x,inliner:k,urlCache:[],options:{}}},fe=(d.exports=he,y.getComputedStyle||window.getComputedStyle),me=y.atob||window.atob;function G(W,V){var oe=V=V||{};return oe.imagePlaceholder===void 0?he.impl.options.imagePlaceholder=Q.imagePlaceholder:he.impl.options.imagePlaceholder=oe.imagePlaceholder,oe.cacheBust===void 0?he.impl.options.cacheBust=Q.cacheBust:he.impl.options.cacheBust=oe.cacheBust,oe.useCredentials===void 0?he.impl.options.useCredentials=Q.useCredentials:he.impl.options.useCredentials=oe.useCredentials,Promise.resolve(W).then(function(ie){return function xe(Ee,Te,Y,q,ee=null){return Y||!Te||Te(Ee)?Promise.resolve(Ee).then(function(ue){return ue instanceof HTMLCanvasElement?x.makeImage(ue.toDataURL()):ue.nodeName==="IFRAME"?html2canvas(ue.contentDocument.body).then(le=>le.toDataURL()).then(x.makeImage):ue.cloneNode(!1)}).then(function(ue){return function(le,pe){const Z=le.childNodes;return Z.length===0?Promise.resolve(pe):function(D,ke){const Me=fe(le);let Ge=Promise.resolve();return ke.forEach(function(ce){Ge=Ge.then(function(){return xe(ce,Te,!1,q,Me)}).then(function(ne){ne&&D.appendChild(ne)})}),Ge}(pe,x.asArray(Z)).then(function(){return pe})}(Ee,ue)}).then(function(ue){return function(le,pe,Z){return pe instanceof Element?Promise.resolve().then(function(){(function(D,ke){const Me=fe(D);Me.cssText?(ke.style.cssText=Me.cssText,function(Ge,ce){ce.font=Ge.font,ce.fontFamily=Ge.fontFamily,ce.fontFeatureSettings=Ge.fontFeatureSettings,ce.fontKerning=Ge.fontKerning,ce.fontSize=Ge.fontSize,ce.fontStretch=Ge.fontStretch,ce.fontStyle=Ge.fontStyle,ce.fontVariant=Ge.fontVariant,ce.fontVariantCaps=Ge.fontVariantCaps,ce.fontVariantEastAsian=Ge.fontVariantEastAsian,ce.fontVariantLigatures=Ge.fontVariantLigatures,ce.fontVariantNumeric=Ge.fontVariantNumeric,ce.fontVariationSettings=Ge.fontVariationSettings,ce.fontWeight=Ge.fontWeight}(Me,ke.style)):(Z?function(Ge,ce,ne,ye){const de=ne.style,Ze=Ge.style;for(var qe of ce){var tt=ce.getPropertyValue(qe),ze=Ze.getPropertyValue(qe),Qe=(Ze.setProperty(qe,ye?"initial":"unset"),ce.getPropertyValue(qe));Qe!==tt?de.setProperty(qe,tt):de.removeProperty(qe),Ze.setProperty(qe,ze)}}(D,Me,ke,Y):function(Ge,ce,ne){const ye=function(Ze){if(z[Ze])return z[Ze];B||((B=document.createElement("iframe")).style.visibility="hidden",B.style.position="fixed",document.body.appendChild(B),B.contentWindow.document.write('<!DOCTYPE html><meta charset="UTF-8"><title>sandbox</title><body>'));const qe=document.createElement(Ze),tt=(B.contentWindow.document.body.appendChild(qe),qe.textContent=".",B.contentWindow.getComputedStyle(qe)),ze={};return x.asArray(tt).forEach(function(Qe){ze[Qe]=Qe==="width"||Qe==="height"?"auto":tt.getPropertyValue(Qe)}),B.contentWindow.document.body.removeChild(qe),z[Ze]=ze}(ne.tagName),de=ne.style;x.asArray(Ge).forEach(function(Ze){var qe=Ge.getPropertyValue(Ze);(qe!==ye[Ze]||ce&&qe!==ce.getPropertyValue(Ze))&&de.setProperty(Ze,qe,Ge.getPropertyPriority(Ze))})}(Me,ee,ke),Y&&(["inset-block","inset-block-start","inset-block-end"].forEach(Ge=>ke.style.removeProperty(Ge)),["left","right","top","bottom"].forEach(Ge=>{ke.style.getPropertyValue(Ge)&&ke.style.setProperty(Ge,"0px")})))})(le,pe)}).then(function(){[":before",":after"].forEach(function(D){(function(ke){const Me=fe(le,ke),Ge=Me.getPropertyValue("content");if(Ge!==""&&Ge!=="none"){const ce=x.uid(),ne=pe.getAttribute("class"),ye=(ne&&pe.setAttribute("class",ne+" "+ce),document.createElement("style"));ye.appendChild(function(){const de=`.${ce}:`+ke,Ze=(Me.cssText?function(){return`${Me.cssText} content: ${Me.getPropertyValue("content")};`}:function(){return x.asArray(Me).map(function(qe){return qe+": "+Me.getPropertyValue(qe)+(Me.getPropertyPriority(qe)?" !important":"")}).join("; ")+";"})();return document.createTextNode(de+`{${Ze}}`)}()),pe.appendChild(ye)}})(D)})}).then(function(){le instanceof HTMLTextAreaElement&&(pe.innerHTML=le.value),le instanceof HTMLInputElement&&pe.setAttribute("value",le.value)}).then(function(){pe instanceof SVGElement&&(pe.setAttribute("xmlns","http://www.w3.org/2000/svg"),pe instanceof SVGRectElement&&["width","height"].forEach(function(D){const ke=pe.getAttribute(D);ke&&pe.style.setProperty(D,ke)}))}).then(function(){return pe}):pe}(Ee,ue,q)}):Promise.resolve()}(ie,V.filter,!0,!V.raster)}).then(X).then(R).then(function(ie){V.bgcolor&&(ie.style.backgroundColor=V.bgcolor),V.width&&(ie.style.width=V.width+"px"),V.height&&(ie.style.height=V.height+"px"),V.style&&Object.keys(V.style).forEach(function(Ee){ie.style[Ee]=V.style[Ee]});let xe=null;return typeof V.onclone=="function"&&(xe=V.onclone(ie)),Promise.resolve(xe).then(function(){return ie})}).then(function(ie){return ie=ie,xe=V.width||x.width(W),Ee=V.height||x.height(W),Promise.resolve(ie).then(function(Te){return Te.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(Te)}).then(x.escapeXhtml).then(function(Te){return`<foreignObject x="0" y="0" width="100%" height="100%">${Te}</foreignObject>`}).then(function(Te){return`<svg xmlns="http://www.w3.org/2000/svg" width="${xe}" height="${Ee}">${Te}</svg>`}).then(function(Te){return"data:image/svg+xml;charset=utf-8,"+Te});var xe,Ee}).then(function(ie){return he.impl.urlCache=[],ie})}function $(W,V){return G(W,V).then(x.makeImage).then(x.delay(0)).then(function(oe){var ie=typeof V.scale!="number"?1:V.scale;const xe=function(Te,Y){const q=document.createElement("canvas");if(q.width=(V.width||x.width(Te))*Y,q.height=(V.height||x.height(Te))*Y,V.bgcolor){const ee=q.getContext("2d");ee.fillStyle=V.bgcolor,ee.fillRect(0,0,q.width,q.height)}return q}(W,ie),Ee=xe.getContext("2d");return Ee.mozImageSmoothingEnabled=!1,Ee.msImageSmoothingEnabled=!1,Ee.imageSmoothingEnabled=!1,oe&&(Ee.scale(ie,ie),Ee.drawImage(oe,0,0)),B&&(document.body.removeChild(B),B=null,O&&clearTimeout(O),O=setTimeout(()=>{O=null,z={}},2e4)),xe})}function X(W){return N.resolveAll().then(function(V){const oe=document.createElement("style");return W.appendChild(oe),oe.appendChild(document.createTextNode(V)),W})}function R(W){return F.inlineAll(W).then(function(){return W})}let O=null,B=null,z={}})(r)}),o=i(function(d,g){(function(){function y(N,T,F){var K=new XMLHttpRequest;K.open("GET",N),K.responseType="blob",K.onload=function(){k(K.response,T,F)},K.onerror=function(){console.error("could not download file")},K.send()}function x(N){var T=new XMLHttpRequest;T.open("HEAD",N,!1);try{T.send()}catch{}return 200<=T.status&&299>=T.status}function _(N){try{N.dispatchEvent(new MouseEvent("click"))}catch{var T=document.createEvent("MouseEvents");T.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),N.dispatchEvent(T)}}var M=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof r=="object"&&r.global===r?r:void 0,k=M.saveAs||(typeof window!="object"||window!==M?function(){}:"download"in HTMLAnchorElement.prototype?function(N,T,F){var K=M.URL||M.webkitURL,Q=document.createElement("a");T=T||N.name||"download",Q.download=T,Q.rel="noopener",typeof N=="string"?(Q.href=N,Q.origin===location.origin?_(Q):x(Q.href)?y(N,T,F):_(Q,Q.target="_blank")):(Q.href=K.createObjectURL(N),setTimeout(function(){K.revokeObjectURL(Q.href)},4e4),setTimeout(function(){_(Q)},0))}:"msSaveOrOpenBlob"in navigator?function(N,T,F){if(T=T||N.name||"download",typeof N!="string")navigator.msSaveOrOpenBlob(function(Q,he){return he===void 0?he={autoBom:!1}:typeof he!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),he={autoBom:!he}),he.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(Q.type)?new Blob(["\uFEFF",Q],{type:Q.type}):Q}(N,F),T);else if(x(N))y(N,T,F);else{var K=document.createElement("a");K.href=N,K.target="_blank",setTimeout(function(){_(K)})}}:function(N,T,F,K){if((K=K||open("","_blank"))&&(K.document.title=K.document.body.innerText="downloading..."),typeof N=="string")return y(N,T,F);var Q=N.type==="application/octet-stream",he=/constructor/i.test(M.HTMLElement)||M.safari,fe=/CriOS\/[\d]+/.test(navigator.userAgent);if((fe||Q&&he)&&typeof FileReader=="object"){var me=new FileReader;me.onloadend=function(){var X=me.result;X=fe?X:X.replace(/^data:[^;]*;/,"data:attachment/file;"),K?K.location.href=X:location=X,K=null},me.readAsDataURL(N)}else{var G=M.URL||M.webkitURL,$=G.createObjectURL(N);K?K.location=$:location.href=$,K=null,setTimeout(function(){G.revokeObjectURL($)},4e4)}});M.saveAs=k.saveAs=k,d.exports=k})()}),u=L.Control.extend({options:{cropImageByInnerWH:!0,hidden:!1,domtoimageOptions:{},position:"topleft",screenName:"screen",iconUrl:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+",hideElementsWithSelectors:[".leaflet-control-container"],onCropBorderSize:2,caption:null,captionFontSize:15,captionFont:"Arial",captionColor:"black",captionBgColor:"white",captionOffset:5,mimeType:"image/png",debugMode:!1,preventDownload:!1,onPixelDataFail:function(d){var g=d.node,y=d.error;return console.warn("Map node is very big "+g.scrollWidth+"x"+g.scrollHeight),console.warn(`Add function: SimpleMapScreenshoter({
              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {
                 // Solutions:
                 // decrease size of map
                 // or decrease zoom level
                 // or remove elements with big distanses
                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap
                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)
              }
            })`),Promise.reject(y)}},onAdd:function(){return this._container=L.DomUtil.create("div","leaflet-control-simpleMapScreenshoter"),this._link=null,this._screenState={status:1,promise:null},this.options.hidden===!1&&this._addScreenBtn(),this._onUserStartInteractWithMap=this._onUserStartInteractWithMap.bind(this),this._onUserEndInteractWithMap=this._onUserEndInteractWithMap.bind(this),this._map.on("zoomstart",this._onUserStartInteractWithMap),this._map.on("move",this._onUserStartInteractWithMap),this._map.on("zoomend",this._onUserEndInteractWithMap),this._map.on("moveend",this._onUserEndInteractWithMap),this._container},takeScreen:function(){var d=this,g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"blob",y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},x={};for(var _ in this.options)y.hasOwnProperty(_)?x[_]=y[_]:x[_]=this.options[_];return this._screenState.status===2?this._screenState.promise:(this._map.fire("simpleMapScreenshoter.takeScreen"),this._screenState.status=2,this._setElementsVisible(!1),this._screenState.promise=this._waitEndOfInteractions().then(function(){return d._getPixelData(x)}).then(function(M){return d._setElementsVisible(!0),d._toCanvas(M,x)}).then(function(M){return g==="image"?d._canvasToImage(M,x):g==="canvas"?M:d._canvasToBlob(M,x)}).then(function(M){return d._screenState.status=1,d._map.fire("simpleMapScreenshoter.done"),M}).catch(function(M){return d._setElementsVisible(!0),d._screenState.status=1,d._map.fire("simpleMapScreenshoter.error",{e:M}),Promise.reject(M)}),this._screenState.promise)},_setElementsVisible:function(){var d=this,g=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.hideElementsWithSelectors.forEach(function(y){var x=d._map._container.querySelectorAll(y),_=!0,M=!1,k=void 0;try{for(var N,T=x[Symbol.iterator]();!(_=(N=T.next()).done);_=!0)N.value.style.opacity=g===!1?0:1}catch(F){M=!0,k=F}finally{try{!_&&T.return&&T.return()}finally{if(M)throw k}}})},_canvasToImage:function(d,g){var y=g.mimeType,x=d.toDataURL(y);return x.indexOf("base64")===-1?Promise.reject(new Error("Base64 image generation error")):Promise.resolve(x)},_canvasToBlob:function(d,g){var y=g.mimeType;return new Promise(function(x,_){d.toBlob(function(M){x(M)},y)})},_toCanvas:function(d,g){var y=g.captionOffset,x=g.caption,_=g.captionFontSize,M=g.captionFont,k=g.captionColor,N=g.captionBgColor,T=this._node,F=T.screenHeight,K=T.screenWidth,Q=document.createElement("canvas");Q.width=K,Q.height=F;for(var he=Q.getContext("2d"),fe=he.createImageData(K,F),me=0;me<d.length;++me)fe.data[me]=d[me];he.putImageData(fe,0,0),fe=null;var G=document.createElement("canvas"),$=G.getContext("2d"),X=0,R=0,O=F,B=K;if(this.options.cropImageByInnerWH===!0){for(var z=[],W=0,V=0;V<F;++V){W=0;for(var oe=0;oe<K;++oe)d[4*V*K+4*oe+4]===0&&W++;W===K&&z.push(V)}var ie=this._getMinAndMaxOnValuesBreak(z);X=ie.min;for(var xe=K,Ee=ie.max,Te=[],Y=0,q=R;q<xe;++q){Y=0;for(var ee=0;ee<F;++ee)d[4*ee*K+4*q+4]===0&&Y++;Y===F&&Te.push(q)}var ue=this._getMinAndMaxOnValuesBreak(Te);R=ue.min,xe=ue.max,(R===0&&xe===0||xe===null)&&(xe=K),(X===0&&Ee===0||Ee===null)&&(Ee=F),this.options.debugMode===!0&&(console.log("emptyYLine",z),console.log("minMaxY",ie),console.log("emptyXLine",Te),console.log("minMaxX",ue),console.log("debugX",{}),console.log("debugY",{})),X===0&&Ee===F&&R===0&&xe===K||(X+=this.options.onCropBorderSize,Ee-=this.options.onCropBorderSize,R+=this.options.onCropBorderSize,xe-=this.options.onCropBorderSize),O=Ee-X,B=xe-R,G.width=B,G.height=O}else G.width=B,G.height=O;var le=null;return x&&(le=typeof x=="function"?x.call(this):x),le!==null&&(G.height=G.height+(y+_+y),$.beginPath(),$.rect(0,0,G.width,G.height),$.fillStyle=N,$.fill(),$.save()),$.drawImage(Q,R,X,B,O,0,0,B,O),le!==null&&($.font=_+"px "+M,$.fillStyle=k,$.fillText(le,y,O+y+_)),Promise.resolve(G)},_getMinAndMaxOnValuesBreak:function(d){for(var g=0,y=0,x=!1,_=1;_<d.length;_++){if(d[_]-1!==d[_-1]){y=d[_],x=!0;break}g=d[_]}return x===!1&&d[0]>1?(g=0,y=d[0]):x===!1&&(g=d[d.length-1]||0,y=null),{min:g,max:y}},_getPixelData:function(d){var g=this,y=d.domtoimageOptions,x=y===void 0?{}:y;return this._getPixelDataOfNormalMap(x).catch(function(_){return console.warn("May be map size very big on that zoom level, we have error:",_.toString()),console.warn("You can manually hide map elements with large distances between them for fix that warn"),g._getPixelDataOfBigMap(x)})},_getPixelDataOfNormalMap:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=this._map.getContainer();return this._node={node:g,screenHeight:g.scrollHeight,screenWidth:g.scrollWidth},s.toPixelData(g,d)},_getPixelDataOfBigMap:function(){var d=this,g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=this._map.getContainer(),x=this._map.getPane("mapPane");x.style.width=2*y.clientWidth+"px",x.style.height=2*y.clientHeight+"px",x.style.overflow="hidden";var _=function(){x.style.width="initial",x.style.height="initial",x.style.overflow="initial"};return this._node={node:y,screenHeight:y.scrollHeight,screenWidth:y.scrollWidth},s.toPixelData(y,g).then(function(M){return _(),M}).catch(function(M){return _(),y.scrollHeight>=4e3||y.scrollWidth>=4e3?d.options.onPixelDataFail({plugin:d,node:y,mapPane:x,error:M,domtoimageOptions:g}):Promise.reject(M)})},_addScreenBtn:function(){this._link=L.DomUtil.create("a","leaflet-control-simpleMapScreenshoter-btn",this._container),this._addCss(),L.DomEvent.addListener(this._link,"click",this._onScreenBtn,this),L.DomEvent.disableClickPropagation(this._link)},_addCss:function(){var d=`
    .leaflet-control-simpleMapScreenshoter{
       border: 2px solid rgba(0,0,0,0.2);
       background-clip: padding-box;
    }
    .leaflet-control-simpleMapScreenshoter a{
       background-color: #fff;
       border-bottom: 1px solid #ccc;
       width: 30px;
       height: 30px;
       line-height: 30px;
       display: block;
       text-align: center;
       text-decoration: none;
       color: black;
       overflow: hidden;
       border-radius: 2px;
       background-image: url('`+this.options.iconUrl+`');
       background-position: 46% 41%;
       background-repeat: no-repeat;
       background-size: 63%;
    }
    .leaflet-control-simpleMapScreenshoter a:hover{
       cursor: pointer;
    }
    `,g=document.head||document.getElementsByTagName("head")[0],y=document.createElement("style");y.appendChild(document.createTextNode(d)),g.appendChild(y)},_onScreenBtn:function(){var d=this;this._map.fire("simpleMapScreenshoter.click"),this.options.preventDownload||this.takeScreen().then(function(g){var y=typeof d.options.screenName=="function"?d.options.screenName.call(d):d.options.screenName;o.saveAs(g,y+".png")}).catch(function(g){d._map.fire("simpleMapScreenshoter.error",{e:g})})},_onUserStartInteractWithMap:function(){this._interaction=!0},_onUserEndInteractWithMap:function(){this._interaction=!1},_waitEndOfInteractions:function(){var d=this;return new Promise(function(g){var y=setInterval(function(){d._interaction||(g(),clearInterval(y))},100)})}}),f=(L.Control.SimpleMapScreenshoter=u,L.simpleMapScreenshoter=function(d){return new L.Control.SimpleMapScreenshoter(d)},u);t.default=f,t.SimpleMapScreenshoter=u,Object.defineProperty(t,"__esModule",{value:!0})})})(ob,ob.exports);var Ja=63710088e-1,tx={centimeters:Ja*100,centimetres:Ja*100,degrees:360/(2*Math.PI),feet:Ja*3.28084,inches:Ja*39.37,kilometers:Ja/1e3,kilometres:Ja/1e3,meters:Ja,metres:Ja,miles:Ja/1609.344,millimeters:Ja*1e3,millimetres:Ja*1e3,nauticalmiles:Ja/1852,radians:1,yards:Ja*1.0936};function ld(e,n,t={}){const r={type:"Feature"};return(t.id===0||t.id)&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.properties=n||{},r.geometry=e,r}function d0(e,n,t={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!sb(e[0])||!sb(e[1]))throw new Error("coordinates must contain numbers");return ld({type:"Point",coordinates:e},n,t)}function fu(e,n,t={}){for(const i of e){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<i[i.length-1].length;s++)if(i[i.length-1][s]!==i[0][s])throw new Error("First and last Position are not equivalent.")}return ld({type:"Polygon",coordinates:e},n,t)}function hu(e,n,t={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return ld({type:"LineString",coordinates:e},n,t)}function FD(e,n={}){const t={type:"FeatureCollection"};return n.id&&(t.id=n.id),n.bbox&&(t.bbox=n.bbox),t.features=e,t}function jD(e,n,t={}){return ld({type:"MultiPolygon",coordinates:e},n,t)}function zD(e,n="kilometers"){const t=tx[n];if(!t)throw new Error(n+" units is invalid");return e*t}function $D(e,n="kilometers"){const t=tx[n];if(!t)throw new Error(n+" units is invalid");return e/t}function l1(e){return e%(2*Math.PI)*180/Math.PI}function $u(e){return e%360*Math.PI/180}function sb(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function ab(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function UD(e){return e.type==="Feature"?e.geometry:e}function nx(e,n,t={}){if(t.final===!0)return VD(e,n);const r=ab(e),i=ab(n),s=$u(r[0]),o=$u(i[0]),u=$u(r[1]),f=$u(i[1]),d=Math.sin(o-s)*Math.cos(f),g=Math.cos(u)*Math.sin(f)-Math.sin(u)*Math.cos(f)*Math.cos(o-s);return l1(Math.atan2(d,g))}function VD(e,n){let t=nx(n,e);return t=(t+180)%360,t}function GD(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function hy(e,n,t,r={}){const i=GD(e),s=$u(i[0]),o=$u(i[1]),u=$u(t),f=$D(n,r.units),d=Math.asin(Math.sin(o)*Math.cos(f)+Math.cos(o)*Math.sin(f)*Math.cos(u)),g=s+Math.atan2(Math.sin(u)*Math.sin(f)*Math.cos(o),Math.cos(f)-Math.sin(o)*Math.sin(d)),y=l1(g),x=l1(d);return d0([y,x],r.properties)}var lb=hy;function ub(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function dy(e,n,t={}){var r=ub(e),i=ub(n),s=$u(i[1]-r[1]),o=$u(i[0]-r[0]),u=$u(r[1]),f=$u(i[1]),d=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(u)*Math.cos(f);return zD(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)),t.units)}var nv=dy;function HD(e,n,t={}){const i=UD(e).coordinates;let s=0;for(let o=0;o<i.length&&!(n>=s&&o===i.length-1);o++)if(s>=n){const u=n-s;if(u){const f=nx(i[o],i[o-1])-180;return hy(i[o],u,f,t)}else return d0(i[o])}else s+=dy(i[o],i[o+1],t);return d0(i[i.length-1])}var u1=HD;function qD(e,n){var t,r,i,s,o,u,f,d,g,y,x=0,_=e.type==="FeatureCollection",M=e.type==="Feature",k=_?e.features.length:1;for(t=0;t<k;t++){for(u=_?e.features[t].geometry:M?e.geometry:e,d=_?e.features[t].properties:M?e.properties:{},g=_?e.features[t].bbox:M?e.bbox:void 0,y=_?e.features[t].id:M?e.id:void 0,f=u?u.type==="GeometryCollection":!1,o=f?u.geometries.length:1,i=0;i<o;i++){if(s=f?u.geometries[i]:u,s===null){if(n(null,x,d,g,y)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(n(s,x,d,g,y)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(n(s.geometries[r],x,d,g,y)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}x++}}function WD(e,n,t){var r=t;return qD(e,function(i,s,o,u,f){s===0&&t===void 0?r=i:r=n(r,i,s,o,u,f)}),r}function rx(e){return WD(e,(n,t)=>n+ZD(t),0)}function ZD(e){let n=0,t;switch(e.type){case"Polygon":return cb(e.coordinates);case"MultiPolygon":for(t=0;t<e.coordinates.length;t++)n+=cb(e.coordinates[t]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function cb(e){let n=0;if(e&&e.length>0){n+=Math.abs(fb(e[0]));for(let t=1;t<e.length;t++)n-=Math.abs(fb(e[t]))}return n}var KD=Ja*Ja/2,rv=Math.PI/180;function fb(e){const n=e.length-1;if(n<=2)return 0;let t=0,r=0;for(;r<n;){const i=e[r],s=e[r+1===n?0:r+1],o=e[r+2>=n?(r+2)%n:r+2],u=i[0]*rv,f=s[1]*rv,d=o[0]*rv;t+=(d-u)*Math.sin(f),r++}return t*KD}var oc=rx;function ix(e,n,t){if(e!==null)for(var r,i,s,o,u,f,d,g=0,y=0,x,_=e.type,M=_==="FeatureCollection",k=_==="Feature",N=M?e.features.length:1,T=0;T<N;T++){d=M?e.features[T].geometry:k?e.geometry:e,x=d?d.type==="GeometryCollection":!1,u=x?d.geometries.length:1;for(var F=0;F<u;F++){var K=0,Q=0;if(o=x?d.geometries[F]:d,o!==null){f=o.coordinates;var he=o.type;switch(g=he==="Polygon"||he==="MultiPolygon"?1:0,he){case null:break;case"Point":if(n(f,y,T,K,Q)===!1)return!1;y++,K++;break;case"LineString":case"MultiPoint":for(r=0;r<f.length;r++){if(n(f[r],y,T,K,Q)===!1)return!1;y++,he==="MultiPoint"&&K++}he==="LineString"&&K++;break;case"Polygon":case"MultiLineString":for(r=0;r<f.length;r++){for(i=0;i<f[r].length-g;i++){if(n(f[r][i],y,T,K,Q)===!1)return!1;y++}he==="MultiLineString"&&K++,he==="Polygon"&&Q++}he==="Polygon"&&K++;break;case"MultiPolygon":for(r=0;r<f.length;r++){for(Q=0,i=0;i<f[r].length;i++){for(s=0;s<f[r][i].length-g;s++){if(n(f[r][i][s],y,T,K,Q)===!1)return!1;y++}Q++}K++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(ix(o.geometries[r],n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function YD(e,n={}){let t=0,r=0,i=0;return ix(e,function(s){t+=s[0],r+=s[1],i++}),d0([t/i,r/i],n.properties)}var sp=YD;function JD(e,n,t={}){const r=t.steps||64,i=t.properties?t.properties:!Array.isArray(e)&&e.type==="Feature"&&e.properties?e.properties:{},s=[];for(let o=0;o<r;o++)s.push(hy(e,n,o*-360/r,t).geometry.coordinates);return s.push(s[0]),fu([s],i)}var XD=JD,QD=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,iv=Math.ceil,uu=Math.floor,wl="[BigNumber Error] ",hb=wl+"Number primitive has more than 15 significant digits: ",Tu=1e14,ni=14,db=9007199254740991,ov=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],nf=1e7,zl=1e9;function ox(e){var n,t,r,i=F.prototype={constructor:F,toString:null,valueOf:null},s=new F(1),o=20,u=4,f=-7,d=21,g=-1e7,y=1e7,x=!1,_=1,M=0,k={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},N="0123456789abcdefghijklmnopqrstuvwxyz",T=!0;function F(G,$){var X,R,O,B,z,W,V,oe,ie=this;if(!(ie instanceof F))return new F(G,$);if($==null){if(G&&G._isBigNumber===!0){ie.s=G.s,!G.c||G.e>y?ie.c=ie.e=null:G.e<g?ie.c=[ie.e=0]:(ie.e=G.e,ie.c=G.c.slice());return}if((W=typeof G=="number")&&G*0==0){if(ie.s=1/G<0?(G=-G,-1):1,G===~~G){for(B=0,z=G;z>=10;z/=10,B++);B>y?ie.c=ie.e=null:(ie.e=B,ie.c=[G]);return}oe=String(G)}else{if(!QD.test(oe=String(G)))return r(ie,oe,W);ie.s=oe.charCodeAt(0)==45?(oe=oe.slice(1),-1):1}(B=oe.indexOf("."))>-1&&(oe=oe.replace(".","")),(z=oe.search(/e/i))>0?(B<0&&(B=z),B+=+oe.slice(z+1),oe=oe.substring(0,z)):B<0&&(B=oe.length)}else{if(Yo($,2,N.length,"Base"),$==10&&T)return ie=new F(G),fe(ie,o+ie.e+1,u);if(oe=String(G),W=typeof G=="number"){if(G*0!=0)return r(ie,oe,W,$);if(ie.s=1/G<0?(oe=oe.slice(1),-1):1,F.DEBUG&&oe.replace(/^0\.0*|\./,"").length>15)throw Error(hb+G)}else ie.s=oe.charCodeAt(0)===45?(oe=oe.slice(1),-1):1;for(X=N.slice(0,$),B=z=0,V=oe.length;z<V;z++)if(X.indexOf(R=oe.charAt(z))<0){if(R=="."){if(z>B){B=V;continue}}else if(!O&&(oe==oe.toUpperCase()&&(oe=oe.toLowerCase())||oe==oe.toLowerCase()&&(oe=oe.toUpperCase()))){O=!0,z=-1,B=0;continue}return r(ie,String(G),W,$)}W=!1,oe=t(oe,$,10,ie.s),(B=oe.indexOf("."))>-1?oe=oe.replace(".",""):B=oe.length}for(z=0;oe.charCodeAt(z)===48;z++);for(V=oe.length;oe.charCodeAt(--V)===48;);if(oe=oe.slice(z,++V)){if(V-=z,W&&F.DEBUG&&V>15&&(G>db||G!==uu(G)))throw Error(hb+ie.s*G);if((B=B-z-1)>y)ie.c=ie.e=null;else if(B<g)ie.c=[ie.e=0];else{if(ie.e=B,ie.c=[],z=(B+1)%ni,B<0&&(z+=ni),z<V){for(z&&ie.c.push(+oe.slice(0,z)),V-=ni;z<V;)ie.c.push(+oe.slice(z,z+=ni));z=ni-(oe=oe.slice(z)).length}else z-=V;for(;z--;oe+="0");ie.c.push(+oe)}}else ie.c=[ie.e=0]}F.clone=ox,F.ROUND_UP=0,F.ROUND_DOWN=1,F.ROUND_CEIL=2,F.ROUND_FLOOR=3,F.ROUND_HALF_UP=4,F.ROUND_HALF_DOWN=5,F.ROUND_HALF_EVEN=6,F.ROUND_HALF_CEIL=7,F.ROUND_HALF_FLOOR=8,F.EUCLID=9,F.config=F.set=function(G){var $,X;if(G!=null)if(typeof G=="object"){if(G.hasOwnProperty($="DECIMAL_PLACES")&&(X=G[$],Yo(X,0,zl,$),o=X),G.hasOwnProperty($="ROUNDING_MODE")&&(X=G[$],Yo(X,0,8,$),u=X),G.hasOwnProperty($="EXPONENTIAL_AT")&&(X=G[$],X&&X.pop?(Yo(X[0],-1e9,0,$),Yo(X[1],0,zl,$),f=X[0],d=X[1]):(Yo(X,-1e9,zl,$),f=-(d=X<0?-X:X))),G.hasOwnProperty($="RANGE"))if(X=G[$],X&&X.pop)Yo(X[0],-1e9,-1,$),Yo(X[1],1,zl,$),g=X[0],y=X[1];else if(Yo(X,-1e9,zl,$),X)g=-(y=X<0?-X:X);else throw Error(wl+$+" cannot be zero: "+X);if(G.hasOwnProperty($="CRYPTO"))if(X=G[$],X===!!X)if(X)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))x=X;else throw x=!X,Error(wl+"crypto unavailable");else x=X;else throw Error(wl+$+" not true or false: "+X);if(G.hasOwnProperty($="MODULO_MODE")&&(X=G[$],Yo(X,0,9,$),_=X),G.hasOwnProperty($="POW_PRECISION")&&(X=G[$],Yo(X,0,zl,$),M=X),G.hasOwnProperty($="FORMAT"))if(X=G[$],typeof X=="object")k=X;else throw Error(wl+$+" not an object: "+X);if(G.hasOwnProperty($="ALPHABET"))if(X=G[$],typeof X=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(X))T=X.slice(0,10)=="0123456789",N=X;else throw Error(wl+$+" invalid: "+X)}else throw Error(wl+"Object expected: "+G);return{DECIMAL_PLACES:o,ROUNDING_MODE:u,EXPONENTIAL_AT:[f,d],RANGE:[g,y],CRYPTO:x,MODULO_MODE:_,POW_PRECISION:M,FORMAT:k,ALPHABET:N}},F.isBigNumber=function(G){if(!G||G._isBigNumber!==!0)return!1;if(!F.DEBUG)return!0;var $,X,R=G.c,O=G.e,B=G.s;e:if({}.toString.call(R)=="[object Array]"){if((B===1||B===-1)&&O>=-1e9&&O<=zl&&O===uu(O)){if(R[0]===0){if(O===0&&R.length===1)return!0;break e}if($=(O+1)%ni,$<1&&($+=ni),String(R[0]).length==$){for($=0;$<R.length;$++)if(X=R[$],X<0||X>=Tu||X!==uu(X))break e;if(X!==0)return!0}}}else if(R===null&&O===null&&(B===null||B===1||B===-1))return!0;throw Error(wl+"Invalid BigNumber: "+G)},F.maximum=F.max=function(){return Q(arguments,-1)},F.minimum=F.min=function(){return Q(arguments,1)},F.random=function(){var G=9007199254740992,$=Math.random()*G&2097151?function(){return uu(Math.random()*G)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(X){var R,O,B,z,W,V=0,oe=[],ie=new F(s);if(X==null?X=o:Yo(X,0,zl),z=iv(X/ni),x)if(crypto.getRandomValues){for(R=crypto.getRandomValues(new Uint32Array(z*=2));V<z;)W=R[V]*131072+(R[V+1]>>>11),W>=9e15?(O=crypto.getRandomValues(new Uint32Array(2)),R[V]=O[0],R[V+1]=O[1]):(oe.push(W%1e14),V+=2);V=z/2}else if(crypto.randomBytes){for(R=crypto.randomBytes(z*=7);V<z;)W=(R[V]&31)*281474976710656+R[V+1]*1099511627776+R[V+2]*4294967296+R[V+3]*16777216+(R[V+4]<<16)+(R[V+5]<<8)+R[V+6],W>=9e15?crypto.randomBytes(7).copy(R,V):(oe.push(W%1e14),V+=7);V=z/7}else throw x=!1,Error(wl+"crypto unavailable");if(!x)for(;V<z;)W=$(),W<9e15&&(oe[V++]=W%1e14);for(z=oe[--V],X%=ni,z&&X&&(W=ov[ni-X],oe[V]=uu(z/W)*W);oe[V]===0;oe.pop(),V--);if(V<0)oe=[B=0];else{for(B=-1;oe[0]===0;oe.splice(0,1),B-=ni);for(V=1,W=oe[0];W>=10;W/=10,V++);V<ni&&(B-=ni-V)}return ie.e=B,ie.c=oe,ie}}(),F.sum=function(){for(var G=1,$=arguments,X=new F($[0]);G<$.length;)X=X.plus($[G++]);return X},t=function(){var G="0123456789";function $(X,R,O,B){for(var z,W=[0],V,oe=0,ie=X.length;oe<ie;){for(V=W.length;V--;W[V]*=R);for(W[0]+=B.indexOf(X.charAt(oe++)),z=0;z<W.length;z++)W[z]>O-1&&(W[z+1]==null&&(W[z+1]=0),W[z+1]+=W[z]/O|0,W[z]%=O)}return W.reverse()}return function(X,R,O,B,z){var W,V,oe,ie,xe,Ee,Te,Y,q=X.indexOf("."),ee=o,ue=u;for(q>=0&&(ie=M,M=0,X=X.replace(".",""),Y=new F(R),Ee=Y.pow(X.length-q),M=ie,Y.c=$(Ic(au(Ee.c),Ee.e,"0"),10,O,G),Y.e=Y.c.length),Te=$(X,R,O,z?(W=N,G):(W=G,N)),oe=ie=Te.length;Te[--ie]==0;Te.pop());if(!Te[0])return W.charAt(0);if(q<0?--oe:(Ee.c=Te,Ee.e=oe,Ee.s=B,Ee=n(Ee,Y,ee,ue,O),Te=Ee.c,xe=Ee.r,oe=Ee.e),V=oe+ee+1,q=Te[V],ie=O/2,xe=xe||V<0||Te[V+1]!=null,xe=ue<4?(q!=null||xe)&&(ue==0||ue==(Ee.s<0?3:2)):q>ie||q==ie&&(ue==4||xe||ue==6&&Te[V-1]&1||ue==(Ee.s<0?8:7)),V<1||!Te[0])X=xe?Ic(W.charAt(1),-ee,W.charAt(0)):W.charAt(0);else{if(Te.length=V,xe)for(--O;++Te[--V]>O;)Te[V]=0,V||(++oe,Te=[1].concat(Te));for(ie=Te.length;!Te[--ie];);for(q=0,X="";q<=ie;X+=W.charAt(Te[q++]));X=Ic(X,oe,W.charAt(0))}return X}}(),n=function(){function G(R,O,B){var z,W,V,oe,ie=0,xe=R.length,Ee=O%nf,Te=O/nf|0;for(R=R.slice();xe--;)V=R[xe]%nf,oe=R[xe]/nf|0,z=Te*V+oe*Ee,W=Ee*V+z%nf*nf+ie,ie=(W/B|0)+(z/nf|0)+Te*oe,R[xe]=W%B;return ie&&(R=[ie].concat(R)),R}function $(R,O,B,z){var W,V;if(B!=z)V=B>z?1:-1;else for(W=V=0;W<B;W++)if(R[W]!=O[W]){V=R[W]>O[W]?1:-1;break}return V}function X(R,O,B,z){for(var W=0;B--;)R[B]-=W,W=R[B]<O[B]?1:0,R[B]=W*z+R[B]-O[B];for(;!R[0]&&R.length>1;R.splice(0,1));}return function(R,O,B,z,W){var V,oe,ie,xe,Ee,Te,Y,q,ee,ue,le,pe,Z,D,ke,Me,Ge,ce=R.s==O.s?1:-1,ne=R.c,ye=O.c;if(!ne||!ne[0]||!ye||!ye[0])return new F(!R.s||!O.s||(ne?ye&&ne[0]==ye[0]:!ye)?NaN:ne&&ne[0]==0||!ye?ce*0:ce/0);for(q=new F(ce),ee=q.c=[],oe=R.e-O.e,ce=B+oe+1,W||(W=Tu,oe=cu(R.e/ni)-cu(O.e/ni),ce=ce/ni|0),ie=0;ye[ie]==(ne[ie]||0);ie++);if(ye[ie]>(ne[ie]||0)&&oe--,ce<0)ee.push(1),xe=!0;else{for(D=ne.length,Me=ye.length,ie=0,ce+=2,Ee=uu(W/(ye[0]+1)),Ee>1&&(ye=G(ye,Ee,W),ne=G(ne,Ee,W),Me=ye.length,D=ne.length),Z=Me,ue=ne.slice(0,Me),le=ue.length;le<Me;ue[le++]=0);Ge=ye.slice(),Ge=[0].concat(Ge),ke=ye[0],ye[1]>=W/2&&ke++;do{if(Ee=0,V=$(ye,ue,Me,le),V<0){if(pe=ue[0],Me!=le&&(pe=pe*W+(ue[1]||0)),Ee=uu(pe/ke),Ee>1)for(Ee>=W&&(Ee=W-1),Te=G(ye,Ee,W),Y=Te.length,le=ue.length;$(Te,ue,Y,le)==1;)Ee--,X(Te,Me<Y?Ge:ye,Y,W),Y=Te.length,V=1;else Ee==0&&(V=Ee=1),Te=ye.slice(),Y=Te.length;if(Y<le&&(Te=[0].concat(Te)),X(ue,Te,le,W),le=ue.length,V==-1)for(;$(ye,ue,Me,le)<1;)Ee++,X(ue,Me<le?Ge:ye,le,W),le=ue.length}else V===0&&(Ee++,ue=[0]);ee[ie++]=Ee,ue[0]?ue[le++]=ne[Z]||0:(ue=[ne[Z]],le=1)}while((Z++<D||ue[0]!=null)&&ce--);xe=ue[0]!=null,ee[0]||ee.splice(0,1)}if(W==Tu){for(ie=1,ce=ee[0];ce>=10;ce/=10,ie++);fe(q,B+(q.e=ie+oe*ni-1)+1,z,xe)}else q.e=oe,q.r=+xe;return q}}();function K(G,$,X,R){var O,B,z,W,V;if(X==null?X=u:Yo(X,0,8),!G.c)return G.toString();if(O=G.c[0],z=G.e,$==null)V=au(G.c),V=R==1||R==2&&(z<=f||z>=d)?_g(V,z):Ic(V,z,"0");else if(G=fe(new F(G),$,X),B=G.e,V=au(G.c),W=V.length,R==1||R==2&&($<=B||B<=f)){for(;W<$;V+="0",W++);V=_g(V,B)}else if($-=z,V=Ic(V,B,"0"),B+1>W){if(--$>0)for(V+=".";$--;V+="0");}else if($+=B-W,$>0)for(B+1==W&&(V+=".");$--;V+="0");return G.s<0&&O?"-"+V:V}function Q(G,$){for(var X,R,O=1,B=new F(G[0]);O<G.length;O++)R=new F(G[O]),(!R.s||(X=Vf(B,R))===$||X===0&&B.s===$)&&(B=R);return B}function he(G,$,X){for(var R=1,O=$.length;!$[--O];$.pop());for(O=$[0];O>=10;O/=10,R++);return(X=R+X*ni-1)>y?G.c=G.e=null:X<g?G.c=[G.e=0]:(G.e=X,G.c=$),G}r=function(){var G=/^(-?)0([xbo])(?=\w[\w.]*$)/i,$=/^([^.]+)\.$/,X=/^\.([^.]+)$/,R=/^-?(Infinity|NaN)$/,O=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(B,z,W,V){var oe,ie=W?z:z.replace(O,"");if(R.test(ie))B.s=isNaN(ie)?null:ie<0?-1:1;else{if(!W&&(ie=ie.replace(G,function(xe,Ee,Te){return oe=(Te=Te.toLowerCase())=="x"?16:Te=="b"?2:8,!V||V==oe?Ee:xe}),V&&(oe=V,ie=ie.replace($,"$1").replace(X,"0.$1")),z!=ie))return new F(ie,oe);if(F.DEBUG)throw Error(wl+"Not a"+(V?" base "+V:"")+" number: "+z);B.s=null}B.c=B.e=null}}();function fe(G,$,X,R){var O,B,z,W,V,oe,ie,xe=G.c,Ee=ov;if(xe){e:{for(O=1,W=xe[0];W>=10;W/=10,O++);if(B=$-O,B<0)B+=ni,z=$,V=xe[oe=0],ie=uu(V/Ee[O-z-1]%10);else if(oe=iv((B+1)/ni),oe>=xe.length)if(R){for(;xe.length<=oe;xe.push(0));V=ie=0,O=1,B%=ni,z=B-ni+1}else break e;else{for(V=W=xe[oe],O=1;W>=10;W/=10,O++);B%=ni,z=B-ni+O,ie=z<0?0:uu(V/Ee[O-z-1]%10)}if(R=R||$<0||xe[oe+1]!=null||(z<0?V:V%Ee[O-z-1]),R=X<4?(ie||R)&&(X==0||X==(G.s<0?3:2)):ie>5||ie==5&&(X==4||R||X==6&&(B>0?z>0?V/Ee[O-z]:0:xe[oe-1])%10&1||X==(G.s<0?8:7)),$<1||!xe[0])return xe.length=0,R?($-=G.e+1,xe[0]=Ee[(ni-$%ni)%ni],G.e=-$||0):xe[0]=G.e=0,G;if(B==0?(xe.length=oe,W=1,oe--):(xe.length=oe+1,W=Ee[ni-B],xe[oe]=z>0?uu(V/Ee[O-z]%Ee[z])*W:0),R)for(;;)if(oe==0){for(B=1,z=xe[0];z>=10;z/=10,B++);for(z=xe[0]+=W,W=1;z>=10;z/=10,W++);B!=W&&(G.e++,xe[0]==Tu&&(xe[0]=1));break}else{if(xe[oe]+=W,xe[oe]!=Tu)break;xe[oe--]=0,W=1}for(B=xe.length;xe[--B]===0;xe.pop());}G.e>y?G.c=G.e=null:G.e<g&&(G.c=[G.e=0])}return G}function me(G){var $,X=G.e;return X===null?G.toString():($=au(G.c),$=X<=f||X>=d?_g($,X):Ic($,X,"0"),G.s<0?"-"+$:$)}return i.absoluteValue=i.abs=function(){var G=new F(this);return G.s<0&&(G.s=1),G},i.comparedTo=function(G,$){return Vf(this,new F(G,$))},i.decimalPlaces=i.dp=function(G,$){var X,R,O,B=this;if(G!=null)return Yo(G,0,zl),$==null?$=u:Yo($,0,8),fe(new F(B),G+B.e+1,$);if(!(X=B.c))return null;if(R=((O=X.length-1)-cu(this.e/ni))*ni,O=X[O])for(;O%10==0;O/=10,R--);return R<0&&(R=0),R},i.dividedBy=i.div=function(G,$){return n(this,new F(G,$),o,u)},i.dividedToIntegerBy=i.idiv=function(G,$){return n(this,new F(G,$),0,1)},i.exponentiatedBy=i.pow=function(G,$){var X,R,O,B,z,W,V,oe,ie,xe=this;if(G=new F(G),G.c&&!G.isInteger())throw Error(wl+"Exponent not an integer: "+me(G));if($!=null&&($=new F($)),W=G.e>14,!xe.c||!xe.c[0]||xe.c[0]==1&&!xe.e&&xe.c.length==1||!G.c||!G.c[0])return ie=new F(Math.pow(+me(xe),W?G.s*(2-yg(G)):+me(G))),$?ie.mod($):ie;if(V=G.s<0,$){if($.c?!$.c[0]:!$.s)return new F(NaN);R=!V&&xe.isInteger()&&$.isInteger(),R&&(xe=xe.mod($))}else{if(G.e>9&&(xe.e>0||xe.e<-1||(xe.e==0?xe.c[0]>1||W&&xe.c[1]>=24e7:xe.c[0]<8e13||W&&xe.c[0]<=9999975e7)))return B=xe.s<0&&yg(G)?-0:0,xe.e>-1&&(B=1/B),new F(V?1/B:B);M&&(B=iv(M/ni+2))}for(W?(X=new F(.5),V&&(G.s=1),oe=yg(G)):(O=Math.abs(+me(G)),oe=O%2),ie=new F(s);;){if(oe){if(ie=ie.times(xe),!ie.c)break;B?ie.c.length>B&&(ie.c.length=B):R&&(ie=ie.mod($))}if(O){if(O=uu(O/2),O===0)break;oe=O%2}else if(G=G.times(X),fe(G,G.e+1,1),G.e>14)oe=yg(G);else{if(O=+me(G),O===0)break;oe=O%2}xe=xe.times(xe),B?xe.c&&xe.c.length>B&&(xe.c.length=B):R&&(xe=xe.mod($))}return R?ie:(V&&(ie=s.div(ie)),$?ie.mod($):B?fe(ie,M,u,z):ie)},i.integerValue=function(G){var $=new F(this);return G==null?G=u:Yo(G,0,8),fe($,$.e+1,G)},i.isEqualTo=i.eq=function(G,$){return Vf(this,new F(G,$))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(G,$){return Vf(this,new F(G,$))>0},i.isGreaterThanOrEqualTo=i.gte=function(G,$){return($=Vf(this,new F(G,$)))===1||$===0},i.isInteger=function(){return!!this.c&&cu(this.e/ni)>this.c.length-2},i.isLessThan=i.lt=function(G,$){return Vf(this,new F(G,$))<0},i.isLessThanOrEqualTo=i.lte=function(G,$){return($=Vf(this,new F(G,$)))===-1||$===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(G,$){var X,R,O,B,z=this,W=z.s;if(G=new F(G,$),$=G.s,!W||!$)return new F(NaN);if(W!=$)return G.s=-$,z.plus(G);var V=z.e/ni,oe=G.e/ni,ie=z.c,xe=G.c;if(!V||!oe){if(!ie||!xe)return ie?(G.s=-$,G):new F(xe?z:NaN);if(!ie[0]||!xe[0])return xe[0]?(G.s=-$,G):new F(ie[0]?z:u==3?-0:0)}if(V=cu(V),oe=cu(oe),ie=ie.slice(),W=V-oe){for((B=W<0)?(W=-W,O=ie):(oe=V,O=xe),O.reverse(),$=W;$--;O.push(0));O.reverse()}else for(R=(B=(W=ie.length)<($=xe.length))?W:$,W=$=0;$<R;$++)if(ie[$]!=xe[$]){B=ie[$]<xe[$];break}if(B&&(O=ie,ie=xe,xe=O,G.s=-G.s),$=(R=xe.length)-(X=ie.length),$>0)for(;$--;ie[X++]=0);for($=Tu-1;R>W;){if(ie[--R]<xe[R]){for(X=R;X&&!ie[--X];ie[X]=$);--ie[X],ie[R]+=Tu}ie[R]-=xe[R]}for(;ie[0]==0;ie.splice(0,1),--oe);return ie[0]?he(G,ie,oe):(G.s=u==3?-1:1,G.c=[G.e=0],G)},i.modulo=i.mod=function(G,$){var X,R,O=this;return G=new F(G,$),!O.c||!G.s||G.c&&!G.c[0]?new F(NaN):!G.c||O.c&&!O.c[0]?new F(O):(_==9?(R=G.s,G.s=1,X=n(O,G,0,3),G.s=R,X.s*=R):X=n(O,G,0,_),G=O.minus(X.times(G)),!G.c[0]&&_==1&&(G.s=O.s),G)},i.multipliedBy=i.times=function(G,$){var X,R,O,B,z,W,V,oe,ie,xe,Ee,Te,Y,q,ee,ue=this,le=ue.c,pe=(G=new F(G,$)).c;if(!le||!pe||!le[0]||!pe[0])return!ue.s||!G.s||le&&!le[0]&&!pe||pe&&!pe[0]&&!le?G.c=G.e=G.s=null:(G.s*=ue.s,!le||!pe?G.c=G.e=null:(G.c=[0],G.e=0)),G;for(R=cu(ue.e/ni)+cu(G.e/ni),G.s*=ue.s,V=le.length,xe=pe.length,V<xe&&(Y=le,le=pe,pe=Y,O=V,V=xe,xe=O),O=V+xe,Y=[];O--;Y.push(0));for(q=Tu,ee=nf,O=xe;--O>=0;){for(X=0,Ee=pe[O]%ee,Te=pe[O]/ee|0,z=V,B=O+z;B>O;)oe=le[--z]%ee,ie=le[z]/ee|0,W=Te*oe+ie*Ee,oe=Ee*oe+W%ee*ee+Y[B]+X,X=(oe/q|0)+(W/ee|0)+Te*ie,Y[B--]=oe%q;Y[B]=X}return X?++R:Y.splice(0,1),he(G,Y,R)},i.negated=function(){var G=new F(this);return G.s=-G.s||null,G},i.plus=function(G,$){var X,R=this,O=R.s;if(G=new F(G,$),$=G.s,!O||!$)return new F(NaN);if(O!=$)return G.s=-$,R.minus(G);var B=R.e/ni,z=G.e/ni,W=R.c,V=G.c;if(!B||!z){if(!W||!V)return new F(O/0);if(!W[0]||!V[0])return V[0]?G:new F(W[0]?R:O*0)}if(B=cu(B),z=cu(z),W=W.slice(),O=B-z){for(O>0?(z=B,X=V):(O=-O,X=W),X.reverse();O--;X.push(0));X.reverse()}for(O=W.length,$=V.length,O-$<0&&(X=V,V=W,W=X,$=O),O=0;$;)O=(W[--$]=W[$]+V[$]+O)/Tu|0,W[$]=Tu===W[$]?0:W[$]%Tu;return O&&(W=[O].concat(W),++z),he(G,W,z)},i.precision=i.sd=function(G,$){var X,R,O,B=this;if(G!=null&&G!==!!G)return Yo(G,1,zl),$==null?$=u:Yo($,0,8),fe(new F(B),G,$);if(!(X=B.c))return null;if(O=X.length-1,R=O*ni+1,O=X[O]){for(;O%10==0;O/=10,R--);for(O=X[0];O>=10;O/=10,R++);}return G&&B.e+1>R&&(R=B.e+1),R},i.shiftedBy=function(G){return Yo(G,-9007199254740991,db),this.times("1e"+G)},i.squareRoot=i.sqrt=function(){var G,$,X,R,O,B=this,z=B.c,W=B.s,V=B.e,oe=o+4,ie=new F("0.5");if(W!==1||!z||!z[0])return new F(!W||W<0&&(!z||z[0])?NaN:z?B:1/0);if(W=Math.sqrt(+me(B)),W==0||W==1/0?($=au(z),($.length+V)%2==0&&($+="0"),W=Math.sqrt(+$),V=cu((V+1)/2)-(V<0||V%2),W==1/0?$="5e"+V:($=W.toExponential(),$=$.slice(0,$.indexOf("e")+1)+V),X=new F($)):X=new F(W+""),X.c[0]){for(V=X.e,W=V+oe,W<3&&(W=0);;)if(O=X,X=ie.times(O.plus(n(B,O,oe,1))),au(O.c).slice(0,W)===($=au(X.c)).slice(0,W))if(X.e<V&&--W,$=$.slice(W-3,W+1),$=="9999"||!R&&$=="4999"){if(!R&&(fe(O,O.e+o+2,0),O.times(O).eq(B))){X=O;break}oe+=4,W+=4,R=1}else{(!+$||!+$.slice(1)&&$.charAt(0)=="5")&&(fe(X,X.e+o+2,1),G=!X.times(X).eq(B));break}}return fe(X,X.e+o+1,u,G)},i.toExponential=function(G,$){return G!=null&&(Yo(G,0,zl),G++),K(this,G,$,1)},i.toFixed=function(G,$){return G!=null&&(Yo(G,0,zl),G=G+this.e+1),K(this,G,$)},i.toFormat=function(G,$,X){var R,O=this;if(X==null)G!=null&&$&&typeof $=="object"?(X=$,$=null):G&&typeof G=="object"?(X=G,G=$=null):X=k;else if(typeof X!="object")throw Error(wl+"Argument not an object: "+X);if(R=O.toFixed(G,$),O.c){var B,z=R.split("."),W=+X.groupSize,V=+X.secondaryGroupSize,oe=X.groupSeparator||"",ie=z[0],xe=z[1],Ee=O.s<0,Te=Ee?ie.slice(1):ie,Y=Te.length;if(V&&(B=W,W=V,V=B,Y-=B),W>0&&Y>0){for(B=Y%W||W,ie=Te.substr(0,B);B<Y;B+=W)ie+=oe+Te.substr(B,W);V>0&&(ie+=oe+Te.slice(B)),Ee&&(ie="-"+ie)}R=xe?ie+(X.decimalSeparator||"")+((V=+X.fractionGroupSize)?xe.replace(new RegExp("\\d{"+V+"}\\B","g"),"$&"+(X.fractionGroupSeparator||"")):xe):ie}return(X.prefix||"")+R+(X.suffix||"")},i.toFraction=function(G){var $,X,R,O,B,z,W,V,oe,ie,xe,Ee,Te=this,Y=Te.c;if(G!=null&&(W=new F(G),!W.isInteger()&&(W.c||W.s!==1)||W.lt(s)))throw Error(wl+"Argument "+(W.isInteger()?"out of range: ":"not an integer: ")+me(W));if(!Y)return new F(Te);for($=new F(s),oe=X=new F(s),R=V=new F(s),Ee=au(Y),B=$.e=Ee.length-Te.e-1,$.c[0]=ov[(z=B%ni)<0?ni+z:z],G=!G||W.comparedTo($)>0?B>0?$:oe:W,z=y,y=1/0,W=new F(Ee),V.c[0]=0;ie=n(W,$,0,1),O=X.plus(ie.times(R)),O.comparedTo(G)!=1;)X=R,R=O,oe=V.plus(ie.times(O=oe)),V=O,$=W.minus(ie.times(O=$)),W=O;return O=n(G.minus(X),R,0,1),V=V.plus(O.times(oe)),X=X.plus(O.times(R)),V.s=oe.s=Te.s,B=B*2,xe=n(oe,R,B,u).minus(Te).abs().comparedTo(n(V,X,B,u).minus(Te).abs())<1?[oe,R]:[V,X],y=z,xe},i.toNumber=function(){return+me(this)},i.toPrecision=function(G,$){return G!=null&&Yo(G,1,zl),K(this,G,$,2)},i.toString=function(G){var $,X=this,R=X.s,O=X.e;return O===null?R?($="Infinity",R<0&&($="-"+$)):$="NaN":(G==null?$=O<=f||O>=d?_g(au(X.c),O):Ic(au(X.c),O,"0"):G===10&&T?(X=fe(new F(X),o+O+1,u),$=Ic(au(X.c),X.e,"0")):(Yo(G,2,N.length,"Base"),$=t(Ic(au(X.c),O,"0"),10,G,R,!0)),R<0&&X.c[0]&&($="-"+$)),$},i.valueOf=i.toJSON=function(){return me(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,e!=null&&F.set(e),F}function cu(e){var n=e|0;return e>0||e===n?n:n-1}function au(e){for(var n,t,r=1,i=e.length,s=e[0]+"";r<i;){for(n=e[r++]+"",t=ni-n.length;t--;n="0"+n);s+=n}for(i=s.length;s.charCodeAt(--i)===48;);return s.slice(0,i+1||1)}function Vf(e,n){var t,r,i=e.c,s=n.c,o=e.s,u=n.s,f=e.e,d=n.e;if(!o||!u)return null;if(t=i&&!i[0],r=s&&!s[0],t||r)return t?r?0:-u:o;if(o!=u)return o;if(t=o<0,r=f==d,!i||!s)return r?0:!i^t?1:-1;if(!r)return f>d^t?1:-1;for(u=(f=i.length)<(d=s.length)?f:d,o=0;o<u;o++)if(i[o]!=s[o])return i[o]>s[o]^t?1:-1;return f==d?0:f>d^t?1:-1}function Yo(e,n,t,r){if(e<n||e>t||e!==uu(e))throw Error(wl+(r||"Argument")+(typeof e=="number"?e<n||e>t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function yg(e){var n=e.c.length-1;return cu(e.e/ni)==n&&e.c[n]%2!=0}function _g(e,n){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(n<0?"e":"e+")+n}function Ic(e,n,t){var r,i;if(n<0){for(i=t+".";++n;i+=t);e=i+e}else if(r=e.length,++n>r){for(i=t,n-=r;--n;i+=t);e+=i}else n<r&&(e=e.slice(0,n)+"."+e.slice(n));return e}var fc=ox(),eI=class{constructor(e){Ht(this,"key");Ht(this,"left",null);Ht(this,"right",null);this.key=e}},kd=class extends eI{constructor(e){super(e)}},tI=class{constructor(){Ht(this,"size",0);Ht(this,"modificationCount",0);Ht(this,"splayCount",0)}splay(e){const n=this.root;if(n==null)return this.compare(e,e),-1;let t=null,r=null,i=null,s=null,o=n;const u=this.compare;let f;for(;;)if(f=u(o.key,e),f>0){let d=o.left;if(d==null||(f=u(d.key,e),f>0&&(o.left=d.right,d.right=o,o=d,d=o.left,d==null)))break;t==null?r=o:t.left=o,t=o,o=d}else if(f<0){let d=o.right;if(d==null||(f=u(d.key,e),f<0&&(o.right=d.left,d.left=o,o=d,d=o.right,d==null)))break;i==null?s=o:i.right=o,i=o,o=d}else break;return i!=null&&(i.right=o.left,o.left=s),t!=null&&(t.left=o.right,o.right=r),this.root!==o&&(this.root=o,this.splayCount++),f}splayMin(e){let n=e,t=n.left;for(;t!=null;){const r=t;n.left=r.right,r.right=n,n=r,t=n.left}return n}splayMax(e){let n=e,t=n.right;for(;t!=null;){const r=t;n.right=r.left,r.left=n,n=r,t=n.right}return n}_delete(e){if(this.root==null||this.splay(e)!=0)return null;let t=this.root;const r=t,i=t.left;if(this.size--,i==null)this.root=t.right;else{const s=t.right;t=this.splayMax(i),t.right=s,this.root=t}return this.modificationCount++,r}addNewRoot(e,n){this.size++,this.modificationCount++;const t=this.root;if(t==null){this.root=e;return}n<0?(e.left=t,e.right=t.right,t.right=null):(e.right=t,e.left=t.left,t.left=null),this.root=e}_first(){const e=this.root;return e==null?null:(this.root=this.splayMin(e),this.root)}_last(){const e=this.root;return e==null?null:(this.root=this.splayMax(e),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(e){return this.validKey(e)&&this.splay(e)==0}defaultCompare(){return(e,n)=>e<n?-1:e>n?1:0}wrap(){return{getRoot:()=>this.root,setRoot:e=>{this.root=e},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:e=>{this.splayCount=e},splay:e=>this.splay(e),has:e=>this.has(e)}}},ew,tw,p0=class $d extends tI{constructor(t,r){super();Ht(this,"root",null);Ht(this,"compare");Ht(this,"validKey");Ht(this,ew,"[object Set]");this.compare=t??this.defaultCompare(),this.validKey=r??(i=>i!=null&&i!=null)}delete(t){return this.validKey(t)?this._delete(t)!=null:!1}deleteAll(t){for(const r of t)this.delete(r)}forEach(t){const r=this[Symbol.iterator]();let i;for(;i=r.next(),!i.done;)t(i.value,i.value,this)}add(t){const r=this.splay(t);return r!=0&&this.addNewRoot(new kd(t),r),this}addAndReturn(t){const r=this.splay(t);return r!=0&&this.addNewRoot(new kd(t),r),this.root.key}addAll(t){for(const r of t)this.add(r)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(t){if(t==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(t)<0)return this.root.key;let i=this.root.left;if(i==null)return null;let s=i.right;for(;s!=null;)i=s,s=i.right;return i.key}firstAfter(t){if(t==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(t)>0)return this.root.key;let i=this.root.right;if(i==null)return null;let s=i.left;for(;s!=null;)i=s,s=i.left;return i.key}retainAll(t){const r=new $d(this.compare,this.validKey),i=this.modificationCount;for(const s of t){if(i!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(s)&&this.splay(s)==0&&r.add(this.root.key)}r.size!=this.size&&(this.root=r.root,this.size=r.size,this.modificationCount++)}lookup(t){return!this.validKey(t)||this.splay(t)!=0?null:this.root.key}intersection(t){const r=new $d(this.compare,this.validKey);for(const i of this)t.has(i)&&r.add(i);return r}difference(t){const r=new $d(this.compare,this.validKey);for(const i of this)t.has(i)||r.add(i);return r}union(t){const r=this.clone();return r.addAll(t),r}clone(){const t=new $d(this.compare,this.validKey);return t.size=this.size,t.root=this.copyNode(this.root),t}copyNode(t){if(t==null)return null;function r(s,o){let u,f;do{if(u=s.left,f=s.right,u!=null){const d=new kd(u.key);o.left=d,r(u,d)}if(f!=null){const d=new kd(f.key);o.right=d,s=f,o=d}}while(f!=null)}const i=new kd(t.key);return r(t,i),i}toSet(){return this.clone()}entries(){return new rI(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(tw=Symbol.iterator,ew=Symbol.toStringTag,tw)](){return new nI(this.wrap())}},sx=class{constructor(e){Ht(this,"tree");Ht(this,"path",new Array);Ht(this,"modificationCount",null);Ht(this,"splayCount");this.tree=e,this.splayCount=e.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;const e=this.path[this.path.length-1];return this.getValue(e)}rebuildPath(e){this.path.splice(0,this.path.length),this.tree.splay(e),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(e){for(;e!=null;)this.path.push(e),e=e.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let t=this.tree.getRoot();for(;t!=null;)this.path.push(t),t=t.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let e=this.path[this.path.length-1],n=e.right;if(n!=null){for(;n!=null;)this.path.push(n),n=n.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===e;)e=this.path.pop();return this.path.length>0}},nI=class extends sx{getValue(e){return e.key}},rI=class extends sx{getValue(e){return[e.key,e.key]}},ax=e=>()=>e,c1=e=>{const n=e?(t,r)=>r.minus(t).abs().isLessThanOrEqualTo(e):ax(!1);return(t,r)=>n(t,r)?0:t.comparedTo(r)};function iI(e){const n=e?(t,r,i,s,o)=>t.exponentiatedBy(2).isLessThanOrEqualTo(s.minus(r).exponentiatedBy(2).plus(o.minus(i).exponentiatedBy(2)).times(e)):ax(!1);return(t,r,i)=>{const s=t.x,o=t.y,u=i.x,f=i.y,d=o.minus(f).times(r.x.minus(u)).minus(s.minus(u).times(r.y.minus(f)));return n(d,s,o,u,f)?0:d.comparedTo(0)}}var oI=e=>e,sI=e=>{if(e){const n=new p0(c1(e)),t=new p0(c1(e)),r=(s,o)=>o.addAndReturn(s),i=s=>({x:r(s.x,n),y:r(s.y,t)});return i({x:new fc(0),y:new fc(0)}),i}return oI},f1=e=>({set:n=>{Gc=f1(n)},reset:()=>f1(e),compare:c1(e),snap:sI(e),orient:iI(e)}),Gc=f1(),Td=(e,n)=>e.ll.x.isLessThanOrEqualTo(n.x)&&n.x.isLessThanOrEqualTo(e.ur.x)&&e.ll.y.isLessThanOrEqualTo(n.y)&&n.y.isLessThanOrEqualTo(e.ur.y),h1=(e,n)=>{if(n.ur.x.isLessThan(e.ll.x)||e.ur.x.isLessThan(n.ll.x)||n.ur.y.isLessThan(e.ll.y)||e.ur.y.isLessThan(n.ll.y))return null;const t=e.ll.x.isLessThan(n.ll.x)?n.ll.x:e.ll.x,r=e.ur.x.isLessThan(n.ur.x)?e.ur.x:n.ur.x,i=e.ll.y.isLessThan(n.ll.y)?n.ll.y:e.ll.y,s=e.ur.y.isLessThan(n.ur.y)?e.ur.y:n.ur.y;return{ll:{x:t,y:i},ur:{x:r,y:s}}},Rg=(e,n)=>e.x.times(n.y).minus(e.y.times(n.x)),lx=(e,n)=>e.x.times(n.x).plus(e.y.times(n.y)),g0=e=>lx(e,e).sqrt(),aI=(e,n,t)=>{const r={x:n.x.minus(e.x),y:n.y.minus(e.y)},i={x:t.x.minus(e.x),y:t.y.minus(e.y)};return Rg(i,r).div(g0(i)).div(g0(r))},lI=(e,n,t)=>{const r={x:n.x.minus(e.x),y:n.y.minus(e.y)},i={x:t.x.minus(e.x),y:t.y.minus(e.y)};return lx(i,r).div(g0(i)).div(g0(r))},pb=(e,n,t)=>n.y.isZero()?null:{x:e.x.plus(n.x.div(n.y).times(t.minus(e.y))),y:t},gb=(e,n,t)=>n.x.isZero()?null:{x:t,y:e.y.plus(n.y.div(n.x).times(t.minus(e.x)))},uI=(e,n,t,r)=>{if(n.x.isZero())return gb(t,r,e.x);if(r.x.isZero())return gb(e,n,t.x);if(n.y.isZero())return pb(t,r,e.y);if(r.y.isZero())return pb(e,n,t.y);const i=Rg(n,r);if(i.isZero())return null;const s={x:t.x.minus(e.x),y:t.y.minus(e.y)},o=Rg(s,n).div(i),u=Rg(s,r).div(i),f=e.x.plus(u.times(n.x)),d=t.x.plus(o.times(r.x)),g=e.y.plus(u.times(n.y)),y=t.y.plus(o.times(r.y)),x=f.plus(d).div(2),_=g.plus(y).div(2);return{x,y:_}},cc=class ux{constructor(n,t){Ht(this,"point");Ht(this,"isLeft");Ht(this,"segment");Ht(this,"otherSE");Ht(this,"consumedBy");n.events===void 0?n.events=[this]:n.events.push(this),this.point=n,this.isLeft=t}static compare(n,t){const r=ux.comparePoints(n.point,t.point);return r!==0?r:(n.point!==t.point&&n.link(t),n.isLeft!==t.isLeft?n.isLeft?1:-1:m0.compare(n.segment,t.segment))}static comparePoints(n,t){return n.x.isLessThan(t.x)?-1:n.x.isGreaterThan(t.x)?1:n.y.isLessThan(t.y)?-1:n.y.isGreaterThan(t.y)?1:0}link(n){if(n.point===this.point)throw new Error("Tried to link already linked events");const t=n.point.events;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.point.events.push(s),s.point=this.point}this.checkForConsuming()}checkForConsuming(){const n=this.point.events.length;for(let t=0;t<n;t++){const r=this.point.events[t];if(r.segment.consumedBy===void 0)for(let i=t+1;i<n;i++){const s=this.point.events[i];s.consumedBy===void 0&&r.otherSE.point.events===s.otherSE.point.events&&r.segment.consume(s.segment)}}}getAvailableLinkedEvents(){const n=[];for(let t=0,r=this.point.events.length;t<r;t++){const i=this.point.events[t];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&n.push(i)}return n}getLeftmostComparator(n){const t=new Map,r=i=>{const s=i.otherSE;t.set(i,{sine:aI(this.point,n.point,s.point),cosine:lI(this.point,n.point,s.point)})};return(i,s)=>{t.has(i)||r(i),t.has(s)||r(s);const{sine:o,cosine:u}=t.get(i),{sine:f,cosine:d}=t.get(s);return o.isGreaterThanOrEqualTo(0)&&f.isGreaterThanOrEqualTo(0)?u.isLessThan(d)?1:u.isGreaterThan(d)?-1:0:o.isLessThan(0)&&f.isLessThan(0)?u.isLessThan(d)?-1:u.isGreaterThan(d)?1:0:f.isLessThan(o)?-1:f.isGreaterThan(o)?1:0}}},cI=class d1{constructor(n){Ht(this,"events");Ht(this,"poly");Ht(this,"_isExteriorRing");Ht(this,"_enclosingRing");this.events=n;for(let t=0,r=n.length;t<r;t++)n[t].segment.ringOut=this;this.poly=null}static factory(n){const t=[];for(let r=0,i=n.length;r<i;r++){const s=n[r];if(!s.isInResult()||s.ringOut)continue;let o=null,u=s.leftSE,f=s.rightSE;const d=[u],g=u.point,y=[];for(;o=u,u=f,d.push(u),u.point!==g;)for(;;){const x=u.getAvailableLinkedEvents();if(x.length===0){const k=d[0].point,N=d[d.length-1].point;throw new Error(`Unable to complete output ring starting at [${k.x}, ${k.y}]. Last matching segment found ends at [${N.x}, ${N.y}].`)}if(x.length===1){f=x[0].otherSE;break}let _=null;for(let k=0,N=y.length;k<N;k++)if(y[k].point===u.point){_=k;break}if(_!==null){const k=y.splice(_)[0],N=d.splice(k.index);N.unshift(N[0].otherSE),t.push(new d1(N.reverse()));continue}y.push({index:d.length,point:u.point});const M=u.getLeftmostComparator(o);f=x.sort(M)[0].otherSE;break}t.push(new d1(d))}return t}getGeom(){let n=this.events[0].point;const t=[n];for(let d=1,g=this.events.length-1;d<g;d++){const y=this.events[d].point,x=this.events[d+1].point;Gc.orient(y,n,x)!==0&&(t.push(y),n=y)}if(t.length===1)return null;const r=t[0],i=t[1];Gc.orient(r,n,i)===0&&t.shift(),t.push(t[0]);const s=this.isExteriorRing()?1:-1,o=this.isExteriorRing()?0:t.length-1,u=this.isExteriorRing()?t.length:-1,f=[];for(let d=o;d!=u;d+=s)f.push([t[d].x.toNumber(),t[d].y.toNumber()]);return f}isExteriorRing(){if(this._isExteriorRing===void 0){const n=this.enclosingRing();this._isExteriorRing=n?!n.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var i,s;let n=this.events[0];for(let o=1,u=this.events.length;o<u;o++){const f=this.events[o];cc.compare(n,f)>0&&(n=f)}let t=n.segment.prevInResult(),r=t?t.prevInResult():null;for(;;){if(!t)return null;if(!r)return t.ringOut;if(r.ringOut!==t.ringOut)return((i=r.ringOut)==null?void 0:i.enclosingRing())!==t.ringOut?t.ringOut:(s=t.ringOut)==null?void 0:s.enclosingRing();t=r.prevInResult(),r=t?t.prevInResult():null}}},mb=class{constructor(e){Ht(this,"exteriorRing");Ht(this,"interiorRings");this.exteriorRing=e,e.poly=this,this.interiorRings=[]}addInterior(e){this.interiorRings.push(e),e.poly=this}getGeom(){const e=this.exteriorRing.getGeom();if(e===null)return null;const n=[e];for(let t=0,r=this.interiorRings.length;t<r;t++){const i=this.interiorRings[t].getGeom();i!==null&&n.push(i)}return n}},fI=class{constructor(e){Ht(this,"rings");Ht(this,"polys");this.rings=e,this.polys=this._composePolys(e)}getGeom(){const e=[];for(let n=0,t=this.polys.length;n<t;n++){const r=this.polys[n].getGeom();r!==null&&e.push(r)}return e}_composePolys(e){var t;const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];if(!s.poly)if(s.isExteriorRing())n.push(new mb(s));else{const o=s.enclosingRing();o!=null&&o.poly||n.push(new mb(o)),(t=o==null?void 0:o.poly)==null||t.addInterior(s)}}return n}},hI=class{constructor(e,n=m0.compare){Ht(this,"queue");Ht(this,"tree");Ht(this,"segments");this.queue=e,this.tree=new p0(n),this.segments=[]}process(e){const n=e.segment,t=[];if(e.consumedBy)return e.isLeft?this.queue.delete(e.otherSE):this.tree.delete(n),t;e.isLeft&&this.tree.add(n);let r=n,i=n;do r=this.tree.lastBefore(r);while(r!=null&&r.consumedBy!=null);do i=this.tree.firstAfter(i);while(i!=null&&i.consumedBy!=null);if(e.isLeft){let s=null;if(r){const u=r.getIntersection(n);if(u!==null&&(n.isAnEndpoint(u)||(s=u),!r.isAnEndpoint(u))){const f=this._splitSafely(r,u);for(let d=0,g=f.length;d<g;d++)t.push(f[d])}}let o=null;if(i){const u=i.getIntersection(n);if(u!==null&&(n.isAnEndpoint(u)||(o=u),!i.isAnEndpoint(u))){const f=this._splitSafely(i,u);for(let d=0,g=f.length;d<g;d++)t.push(f[d])}}if(s!==null||o!==null){let u=null;s===null?u=o:o===null?u=s:u=cc.comparePoints(s,o)<=0?s:o,this.queue.delete(n.rightSE),t.push(n.rightSE);const f=n.split(u);for(let d=0,g=f.length;d<g;d++)t.push(f[d])}t.length>0?(this.tree.delete(n),t.push(e)):(this.segments.push(n),n.prev=r)}else{if(r&&i){const s=r.getIntersection(i);if(s!==null){if(!r.isAnEndpoint(s)){const o=this._splitSafely(r,s);for(let u=0,f=o.length;u<f;u++)t.push(o[u])}if(!i.isAnEndpoint(s)){const o=this._splitSafely(i,s);for(let u=0,f=o.length;u<f;u++)t.push(o[u])}}}this.tree.delete(n)}return t}_splitSafely(e,n){this.tree.delete(e);const t=e.rightSE;this.queue.delete(t);const r=e.split(n);return r.push(t),e.consumedBy===void 0&&this.tree.add(e),r}},dI=class{constructor(){Ht(this,"type");Ht(this,"numMultiPolys")}run(e,n,t){Ud.type=e;const r=[new yb(n,!0)];for(let d=0,g=t.length;d<g;d++)r.push(new yb(t[d],!1));if(Ud.numMultiPolys=r.length,Ud.type==="difference"){const d=r[0];let g=1;for(;g<r.length;)h1(r[g].bbox,d.bbox)!==null?g++:r.splice(g,1)}if(Ud.type==="intersection")for(let d=0,g=r.length;d<g;d++){const y=r[d];for(let x=d+1,_=r.length;x<_;x++)if(h1(y.bbox,r[x].bbox)===null)return[]}const i=new p0(cc.compare);for(let d=0,g=r.length;d<g;d++){const y=r[d].getSweepEvents();for(let x=0,_=y.length;x<_;x++)i.add(y[x])}const s=new hI(i);let o=null;for(i.size!=0&&(o=i.first(),i.delete(o));o;){const d=s.process(o);for(let g=0,y=d.length;g<y;g++){const x=d[g];x.consumedBy===void 0&&i.add(x)}i.size!=0?(o=i.first(),i.delete(o)):o=null}Gc.reset();const u=cI.factory(s.segments);return new fI(u).getGeom()}},Ud=new dI,p1=Ud,pI=0,m0=class Fg{constructor(n,t,r,i){Ht(this,"id");Ht(this,"leftSE");Ht(this,"rightSE");Ht(this,"rings");Ht(this,"windings");Ht(this,"ringOut");Ht(this,"consumedBy");Ht(this,"prev");Ht(this,"_prevInResult");Ht(this,"_beforeState");Ht(this,"_afterState");Ht(this,"_isInResult");this.id=++pI,this.leftSE=n,n.segment=this,n.otherSE=t,this.rightSE=t,t.segment=this,t.otherSE=n,this.rings=r,this.windings=i}static compare(n,t){const r=n.leftSE.point.x,i=t.leftSE.point.x,s=n.rightSE.point.x,o=t.rightSE.point.x;if(o.isLessThan(r))return 1;if(s.isLessThan(i))return-1;const u=n.leftSE.point.y,f=t.leftSE.point.y,d=n.rightSE.point.y,g=t.rightSE.point.y;if(r.isLessThan(i)){if(f.isLessThan(u)&&f.isLessThan(d))return 1;if(f.isGreaterThan(u)&&f.isGreaterThan(d))return-1;const y=n.comparePoint(t.leftSE.point);if(y<0)return 1;if(y>0)return-1;const x=t.comparePoint(n.rightSE.point);return x!==0?x:-1}if(r.isGreaterThan(i)){if(u.isLessThan(f)&&u.isLessThan(g))return-1;if(u.isGreaterThan(f)&&u.isGreaterThan(g))return 1;const y=t.comparePoint(n.leftSE.point);if(y!==0)return y;const x=n.comparePoint(t.rightSE.point);return x<0?1:x>0?-1:1}if(u.isLessThan(f))return-1;if(u.isGreaterThan(f))return 1;if(s.isLessThan(o)){const y=t.comparePoint(n.rightSE.point);if(y!==0)return y}if(s.isGreaterThan(o)){const y=n.comparePoint(t.rightSE.point);if(y<0)return 1;if(y>0)return-1}if(!s.eq(o)){const y=d.minus(u),x=s.minus(r),_=g.minus(f),M=o.minus(i);if(y.isGreaterThan(x)&&_.isLessThan(M))return 1;if(y.isLessThan(x)&&_.isGreaterThan(M))return-1}return s.isGreaterThan(o)?1:s.isLessThan(o)||d.isLessThan(g)?-1:d.isGreaterThan(g)?1:n.id<t.id?-1:n.id>t.id?1:0}static fromRing(n,t,r){let i,s,o;const u=cc.comparePoints(n,t);if(u<0)i=n,s=t,o=1;else if(u>0)i=t,s=n,o=-1;else throw new Error(`Tried to create degenerate segment at [${n.x}, ${n.y}]`);const f=new cc(i,!0),d=new cc(s,!1);return new Fg(f,d,[r],[o])}replaceRightSE(n){this.rightSE=n,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const n=this.leftSE.point.y,t=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:n.isLessThan(t)?n:t},ur:{x:this.rightSE.point.x,y:n.isGreaterThan(t)?n:t}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(n){return n.x.eq(this.leftSE.point.x)&&n.y.eq(this.leftSE.point.y)||n.x.eq(this.rightSE.point.x)&&n.y.eq(this.rightSE.point.y)}comparePoint(n){return Gc.orient(this.leftSE.point,n,this.rightSE.point)}getIntersection(n){const t=this.bbox(),r=n.bbox(),i=h1(t,r);if(i===null)return null;const s=this.leftSE.point,o=this.rightSE.point,u=n.leftSE.point,f=n.rightSE.point,d=Td(t,u)&&this.comparePoint(u)===0,g=Td(r,s)&&n.comparePoint(s)===0,y=Td(t,f)&&this.comparePoint(f)===0,x=Td(r,o)&&n.comparePoint(o)===0;if(g&&d)return x&&!y?o:!x&&y?f:null;if(g)return y&&s.x.eq(f.x)&&s.y.eq(f.y)?null:s;if(d)return x&&o.x.eq(u.x)&&o.y.eq(u.y)?null:u;if(x&&y)return null;if(x)return o;if(y)return f;const _=uI(s,this.vector(),u,n.vector());return _===null||!Td(i,_)?null:Gc.snap(_)}split(n){const t=[],r=n.events!==void 0,i=new cc(n,!0),s=new cc(n,!1),o=this.rightSE;this.replaceRightSE(s),t.push(s),t.push(i);const u=new Fg(i,o,this.rings.slice(),this.windings.slice());return cc.comparePoints(u.leftSE.point,u.rightSE.point)>0&&u.swapEvents(),cc.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),s.checkForConsuming()),t}swapEvents(){const n=this.rightSE;this.rightSE=this.leftSE,this.leftSE=n,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let t=0,r=this.windings.length;t<r;t++)this.windings[t]*=-1}consume(n){let t=this,r=n;for(;t.consumedBy;)t=t.consumedBy;for(;r.consumedBy;)r=r.consumedBy;const i=Fg.compare(t,r);if(i!==0){if(i>0){const s=t;t=r,r=s}if(t.prev===r){const s=t;t=r,r=s}for(let s=0,o=r.rings.length;s<o;s++){const u=r.rings[s],f=r.windings[s],d=t.rings.indexOf(u);d===-1?(t.rings.push(u),t.windings.push(f)):t.windings[d]+=f}r.rings=null,r.windings=null,r.consumedBy=t,r.leftSE.consumedBy=t.leftSE,r.rightSE.consumedBy=t.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const n=this.prev.consumedBy||this.prev;this._beforeState=n.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const n=this.beforeState();this._afterState={rings:n.rings.slice(0),windings:n.windings.slice(0),multiPolys:[]};const t=this._afterState.rings,r=this._afterState.windings,i=this._afterState.multiPolys;for(let u=0,f=this.rings.length;u<f;u++){const d=this.rings[u],g=this.windings[u],y=t.indexOf(d);y===-1?(t.push(d),r.push(g)):r[y]+=g}const s=[],o=[];for(let u=0,f=t.length;u<f;u++){if(r[u]===0)continue;const d=t[u],g=d.poly;if(o.indexOf(g)===-1)if(d.isExterior)s.push(g);else{o.indexOf(g)===-1&&o.push(g);const y=s.indexOf(d.poly);y!==-1&&s.splice(y,1)}}for(let u=0,f=s.length;u<f;u++){const d=s[u].multiPoly;i.indexOf(d)===-1&&i.push(d)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const n=this.beforeState().multiPolys,t=this.afterState().multiPolys;switch(p1.type){case"union":{const r=n.length===0,i=t.length===0;this._isInResult=r!==i;break}case"intersection":{let r,i;n.length<t.length?(r=n.length,i=t.length):(r=t.length,i=n.length),this._isInResult=i===p1.numMultiPolys&&r<i;break}case"xor":{const r=Math.abs(n.length-t.length);this._isInResult=r%2===1;break}case"difference":{const r=i=>i.length===1&&i[0].isSubject;this._isInResult=r(n)!==r(t);break}}return this._isInResult}},vb=class{constructor(e,n,t){Ht(this,"poly");Ht(this,"isExterior");Ht(this,"segments");Ht(this,"bbox");if(!Array.isArray(e)||e.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=t,this.segments=[],typeof e[0][0]!="number"||typeof e[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const r=Gc.snap({x:new fc(e[0][0]),y:new fc(e[0][1])});this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};let i=r;for(let s=1,o=e.length;s<o;s++){if(typeof e[s][0]!="number"||typeof e[s][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const u=Gc.snap({x:new fc(e[s][0]),y:new fc(e[s][1])});u.x.eq(i.x)&&u.y.eq(i.y)||(this.segments.push(m0.fromRing(i,u,this)),u.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=u.x),u.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=u.y),u.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=u.x),u.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=u.y),i=u)}(!r.x.eq(i.x)||!r.y.eq(i.y))&&this.segments.push(m0.fromRing(i,r,this))}getSweepEvents(){const e=[];for(let n=0,t=this.segments.length;n<t;n++){const r=this.segments[n];e.push(r.leftSE),e.push(r.rightSE)}return e}},gI=class{constructor(e,n){Ht(this,"multiPoly");Ht(this,"exteriorRing");Ht(this,"interiorRings");Ht(this,"bbox");if(!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new vb(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let t=1,r=e.length;t<r;t++){const i=new vb(e[t],this,!1);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.interiorRings.push(i)}this.multiPoly=n}getSweepEvents(){const e=this.exteriorRing.getSweepEvents();for(let n=0,t=this.interiorRings.length;n<t;n++){const r=this.interiorRings[n].getSweepEvents();for(let i=0,s=r.length;i<s;i++)e.push(r[i])}return e}},yb=class{constructor(e,n){Ht(this,"isSubject");Ht(this,"polys");Ht(this,"bbox");if(!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof e[0][0][0]=="number"&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:new fc(Number.POSITIVE_INFINITY),y:new fc(Number.POSITIVE_INFINITY)},ur:{x:new fc(Number.NEGATIVE_INFINITY),y:new fc(Number.NEGATIVE_INFINITY)}};for(let t=0,r=e.length;t<r;t++){const i=new gI(e[t],this);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.polys.push(i)}this.isSubject=n}getSweepEvents(){const e=[];for(let n=0,t=this.polys.length;n<t;n++){const r=this.polys[n].getSweepEvents();for(let i=0,s=r.length;i<s;i++)e.push(r[i])}return e}},mI=(e,...n)=>p1.run("intersection",e,n);Gc.set;function vI(e,n){var t,r,i,s,o,u,f,d,g,y,x=0,_=e.type==="FeatureCollection",M=e.type==="Feature",k=_?e.features.length:1;for(t=0;t<k;t++){for(u=_?e.features[t].geometry:M?e.geometry:e,d=_?e.features[t].properties:M?e.properties:{},g=_?e.features[t].bbox:M?e.bbox:void 0,y=_?e.features[t].id:M?e.id:void 0,f=u?u.type==="GeometryCollection":!1,o=f?u.geometries.length:1,i=0;i<o;i++){if(s=f?u.geometries[i]:u,s===null){if(n(null,x,d,g,y)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(n(s,x,d,g,y)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(n(s.geometries[r],x,d,g,y)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}x++}}function yI(e,n={}){const t=[];if(vI(e,i=>{t.push(i.coordinates)}),t.length<2)throw new Error("Must specify at least 2 geometries");const r=mI(t[0],...t.slice(1));return r.length===0?null:r.length===1?fu(r[0],n.properties):jD(r,n.properties)}var _I=yI;function cx(e,n,t){if(e!==null)for(var r,i,s,o,u,f,d,g=0,y=0,x,_=e.type,M=_==="FeatureCollection",k=_==="Feature",N=M?e.features.length:1,T=0;T<N;T++){d=M?e.features[T].geometry:k?e.geometry:e,x=d?d.type==="GeometryCollection":!1,u=x?d.geometries.length:1;for(var F=0;F<u;F++){var K=0,Q=0;if(o=x?d.geometries[F]:d,o!==null){f=o.coordinates;var he=o.type;switch(g=0,he){case null:break;case"Point":if(n(f,y,T,K,Q)===!1)return!1;y++,K++;break;case"LineString":case"MultiPoint":for(r=0;r<f.length;r++){if(n(f[r],y,T,K,Q)===!1)return!1;y++,he==="MultiPoint"&&K++}he==="LineString"&&K++;break;case"Polygon":case"MultiLineString":for(r=0;r<f.length;r++){for(i=0;i<f[r].length-g;i++){if(n(f[r][i],y,T,K,Q)===!1)return!1;y++}he==="MultiLineString"&&K++,he==="Polygon"&&Q++}he==="Polygon"&&K++;break;case"MultiPolygon":for(r=0;r<f.length;r++){for(Q=0,i=0;i<f[r].length;i++){for(s=0;s<f[r][i].length-g;s++){if(n(f[r][i][s],y,T,K,Q)===!1)return!1;y++}Q++}K++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(cx(o.geometries[r],n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function bI(e,n){var t,r,i,s,o,u,f,d,g,y,x=0,_=e.type==="FeatureCollection",M=e.type==="Feature",k=_?e.features.length:1;for(t=0;t<k;t++){for(u=_?e.features[t].geometry:M?e.geometry:e,d=_?e.features[t].properties:M?e.properties:{},g=_?e.features[t].bbox:M?e.bbox:void 0,y=_?e.features[t].id:M?e.id:void 0,f=u?u.type==="GeometryCollection":!1,o=f?u.geometries.length:1,i=0;i<o;i++){if(s=f?u.geometries[i]:u,s===null){if(n(null,x,d,g,y)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(n(s,x,d,g,y)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(n(s.geometries[r],x,d,g,y)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}x++}}function wI(e,n){bI(e,function(t,r,i,s,o){var u=t===null?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return n(ld(t,i,{bbox:s,id:o}),r,0)===!1?!1:void 0}var f;switch(u){case"MultiPoint":f="Point";break;case"MultiLineString":f="LineString";break;case"MultiPolygon":f="Polygon";break}for(var d=0;d<t.coordinates.length;d++){var g=t.coordinates[d],y={type:f,coordinates:g};if(n(ld(y,i),r,d)===!1)return!1}})}function xI(e,n){wI(e,function(t,r,i){var s=0;if(t.geometry){var o=t.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var u,f=0,d=0,g=0;if(cx(t,function(y,x,_,M,k){if(u===void 0||r>f||M>d||k>g){u=y,f=r,d=M,g=k,s=0;return}var N=hu([u,y],t.properties);if(n(N,r,i,k,s)===!1)return!1;s++,u=y})===!1)return!1}}})}function LI(e,n,t){var r=t,i=!1;return xI(e,function(s,o,u,f,d){i===!1&&t===void 0?r=s:r=n(r,s,o,u,f,d),i=!0}),r}function v0(e,n={}){return LI(e,(t,r)=>{const i=r.geometry.coordinates;return t+dy(i[0],i[1],n)},0)}var Gf=v0;class gf extends Vn.Polygon{constructor(t,r={}){super(t,{...r,pmIgnore:!1,interactive:!0});Ht(this,"properties");this.properties=dn.measure("Polygon.constructor.initProperties",()=>({type:"Polygon",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{color:r.color||"#2b6451",weight:r.weight||3,opacity:r.opacity||1,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity||.2,dashArray:r.dashArray||"",name:r.name||""}})),this.updateProperties(),this.on({add:()=>this.updateProperties(),edit:()=>this.updateProperties(),drag:()=>this.updateProperties()})}updateProperties(){dn.measure("Polygon.updateProperties",()=>{var t,r,i,s,o;try{const u=this.getLatLngs()[0];if(!u||u.length<3){console.warn("Polygon has less than 3 points, cannot calculate properties");return}const f=u.map(T=>[T.lng,T.lat]);f.push(f[0]);const d=fu([f]),g=rx(d),y=v0(hu([...f]),{units:"meters"}),x=sp(d),_=Vn.latLng(x.geometry.coordinates[1],x.geometry.coordinates[0]),M=((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||"",k=((i=this.properties)==null?void 0:i.category)||"forages",N=((s=this.properties)==null?void 0:s.accessLevel)||"visitor";this.properties={type:"Polygon",coordinates:u.map(T=>({lat:T.lat,lng:T.lng})),surface:g,perimeter:y,center:{lat:_.lat,lng:_.lng},vertices:u.length,category:k,accessLevel:N,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:M}},this.fire("properties:updated",{shape:this,properties:this.properties})}catch(u){console.error("Failed to calculate polygon properties",u)}})}setName(t){dn.measure("Polygon.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=t,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return dn.measure("Polygon.getName",()=>{var t,r;return((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||""})}setLatLngs(t){return dn.measure("Polygon.setLatLngs",()=>(super.setLatLngs(t),this.updateProperties(),this))}getMidPoints(){return dn.measure("Polygon.getMidPoints",()=>{const t=this.getLatLngs()[0],r=[];if(t.length<2)return r;for(let i=0;i<t.length;i++){const s=t[i],o=t[(i+1)%t.length];r.push(Vn.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return r})}moveVertex(t,r){dn.measure("Polygon.moveVertex",()=>{const i=this.getLatLngs()[0];t>=0&&t<i.length&&(i[t]=r,Vn.Polygon.prototype.setLatLngs.call(this,[i]))})}addVertex(t,r){dn.measure("Polygon.addVertex",()=>{const i=this.getLatLngs()[0];t>=0&&t<i.length&&(i.splice((t+1)%i.length,0,r),Vn.Polygon.prototype.setLatLngs.call(this,[i]))})}move(t){return dn.measure("Polygon.move",()=>{const i=this.getLatLngs()[0].map(s=>Vn.latLng(s.lat+t.lat,s.lng+t.lng));return Vn.Polygon.prototype.setLatLngs.call(this,[i]),this})}getCenter(){return dn.measure("Polygon.getCenter",()=>{const t=this.getLatLngs()[0];if(!t||t.length===0)return new Vn.LatLng(0,0);try{const r=t.filter(d=>d&&typeof d.lat=="number"&&typeof d.lng=="number"&&!isNaN(d.lat)&&!isNaN(d.lng)&&Math.abs(d.lat)<=90&&Math.abs(d.lng)<=180);if(r.length===0)return console.warn("Aucun point valide dans le polygone pour calculer le centre"),new Vn.LatLng(0,0);const i=r.map(d=>[d.lng,d.lat]);i.push(i[0]);const s=fu([i]),o=sp(s),u=o.geometry.coordinates[1],f=o.geometry.coordinates[0];if(typeof u!="number"||typeof f!="number"||isNaN(u)||isNaN(f)||Math.abs(u)>90||Math.abs(f)>180)throw new Error("Centroid calcul invalide");return Vn.latLng(u,f)}catch(r){console.warn("Erreur lors du calcul du centrode avec turf.js, utilisation de la mthode simple",r);let i=0,s=0,o=0;for(const u of t)u&&typeof u.lat=="number"&&typeof u.lng=="number"&&!isNaN(u.lat)&&!isNaN(u.lng)&&Math.abs(u.lat)<=90&&Math.abs(u.lng)<=180&&(i+=u.lat,s+=u.lng,o++);return o===0?(console.error("Impossible de calculer un centre valide pour le polygone"),new Vn.LatLng(0,0)):new Vn.LatLng(i/o,s/o)}})}getSegmentLengths(){return dn.measure("Polygon.getSegmentLengths",()=>{const t=this.getLatLngs()[0],r=[];if(t.length<2)return r;for(let i=0;i<t.length;i++){const s=t[i],o=t[(i+1)%t.length];r.push(s.distanceTo(o))}return r})}}class Ns extends Vn.Polyline{constructor(t,r={}){super(t,{...r,pmIgnore:!1,interactive:!0});Ht(this,"properties");Ht(this,"cachedProperties",{});Ht(this,"needsUpdate",!0);this.properties=dn.measure("Line.constructor.initProperties",()=>({type:"Line",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{...r||{},name:r.name||""}})),this.updateProperties(),this.on("add",()=>{this.updateProperties()})}updateProperties(){dn.measure("Line.updateProperties",()=>{var i,s,o,u,f;const t=this.getLatLngs();if(!t||t.length<2){console.warn("Line has less than 2 points, cannot calculate properties");return}const r=t.map(d=>[d.lng,d.lat]);try{const d=hu(r),g=v0(d,{units:"meters"});let y;if(t.length===2)y=Vn.latLng((t[0].lat+t[1].lat)/2,(t[0].lng+t[1].lng)/2);else{const N=u1(d,g/2,{units:"meters"});y=Vn.latLng(N.geometry.coordinates[1],N.geometry.coordinates[0])}const x=10,_=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"",M=((o=this.properties)==null?void 0:o.category)||"forages",k=((u=this.properties)==null?void 0:u.accessLevel)||"visitor";this.properties={type:"Line",length:g,coordinates:t.map(N=>({lat:N.lat,lng:N.lng})),center:{lat:y.lat,lng:y.lng},vertices:t.length,surfaceInfluence:g*x,dimensions:{width:x},category:M,accessLevel:k,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,dashArray:((f=this.options)==null?void 0:f.dashArray)||"",name:_}},this.cachedProperties.length=g,this.cachedProperties.center=y,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.needsUpdate=!1,this.fire("properties:updated",{shape:this,properties:this.properties})}catch(d){console.error("Failed to calculate line properties",d)}})}setName(t){dn.measure("Line.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=t,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return dn.measure("Line.getName",()=>{var t,r;return((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||""})}invalidateCache(){dn.measure("Line.invalidateCache",()=>{this.needsUpdate=!0,this.cachedProperties={}})}setLatLngs(t){return super.setLatLngs(t),this.needsUpdate=!0,this.cachedProperties={},this.fire("latlngs:updated",{latlngs:this.getLatLngs()}),this}getMidPoints(){return dn.measure("Line.getMidPoints",()=>{if(!this.needsUpdate&&this.cachedProperties.midPoints)return this.cachedProperties.midPoints;const t=this.getLatLngs(),r=[];if(t.length<2)return r;for(let i=0;i<t.length-1;i++){const s=t[i],o=t[i+1];if(!s||!o){console.warn("Points invalides dtects pour le segment",i);continue}r.push(Vn.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return this.cachedProperties.midPoints=r,r})}getMidPointAt(t){return dn.measure("Line.getMidPointAt",()=>{const r=this.getLatLngs();if(t<0||t>=r.length-1||r.length<2)return null;const i=r[t],s=r[t+1];return!i||!s?(console.warn("Points invalides pour calcul du midpoint au segment",t),null):Vn.latLng((i.lat+s.lat)/2,(i.lng+s.lng)/2)})}moveVertex(t,r,i=!1){dn.measure("Line.moveVertex",()=>{const s=this.getLatLngs();t>=0&&t<s.length&&(s[t]=r,this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("vertex:moved",{index:t,latlng:r,allPoints:s}),i&&this.updateProperties())})}addVertex(t,r,i=!1){dn.measure("Line.addVertex",()=>{const s=this.getLatLngs();t>=0&&t<s.length-1&&(s.splice(t+1,0,r),Vn.Polyline.prototype.setLatLngs.call(this,s),this.needsUpdate=!0,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.cachedProperties.center=void 0,this.cachedProperties.length=void 0,i&&this.updateProperties())})}move(t,r=!0){return dn.measure("Line.move",()=>{this.fire("move:start");const i=this.getLatLngs(),s=i.map(o=>Vn.latLng(o.lat+t.lat,o.lng+t.lng));return this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("move",{delta:t,newPositions:s,oldPositions:i}),r&&(this.updateProperties(),this.fire("properties:updated",{shape:this,properties:this.properties}),this.fire("move:end")),this})}getCenter(){return dn.measure("Line.getCenter",()=>{if(!this.needsUpdate&&this.cachedProperties.center)return this.cachedProperties.center;const t=this.getLatLngs();if(t.length<2)return t[0]||new Vn.LatLng(0,0);try{const r=t.map(f=>[f.lng,f.lat]),i=hu(r),s=v0(i,{units:"meters"}),o=u1(i,s/2,{units:"meters"}),u=Vn.latLng(o.geometry.coordinates[1],o.geometry.coordinates[0]);return this.cachedProperties.center=u,u}catch(r){console.warn("Error calculating line center with turf.js, using simple method",r);const i=t.reduce((u,f)=>u+f.lat,0)/t.length,s=t.reduce((u,f)=>u+f.lng,0)/t.length,o=new Vn.LatLng(i,s);return this.cachedProperties.center=o,o}})}getSegmentLengths(){return dn.measure("Line.getSegmentLengths",()=>{if(!this.needsUpdate&&this.cachedProperties.segmentLengths)return this.cachedProperties.segmentLengths;const t=this.getLatLngs(),r=[];if(t.length<2)return r;for(let i=0;i<t.length-1;i++){const s=t[i],o=t[i+1];r.push(s.distanceTo(o))}return this.cachedProperties.segmentLengths=r,r})}getSegmentLengthAt(t){return dn.measure("Line.getSegmentLengthAt",()=>{const r=this.getLatLngs();if(t<0||t>=r.length-1||r.length<2)return 0;const i=r[t],s=r[t+1];return i.distanceTo(s)})}getLengthToVertex(t){return dn.measure("Line.getLengthToVertex",()=>{const r=this.getLatLngs();let i=0;if(t<=0||r.length<2)return 0;for(let s=0;s<Math.min(t,r.length-1);s++)i+=r[s].distanceTo(r[s+1]);return i})}getLength(){return dn.measure("Line.getLength",()=>{if(!this.needsUpdate&&this.cachedProperties.length)return this.cachedProperties.length;const t=this.getLatLngs();let r=0;for(let i=0;i<t.length-1;i++)r+=t[i].distanceTo(t[i+1]);return this.cachedProperties.length=r,r})}}const Xa=class Xa extends Ns{constructor(t,r={}){super(t,{...r,color:"#FF4500",weight:4,opacity:.8,interactive:!1,pmIgnore:!0});Ht(this,"elevationData",[]);Ht(this,"elevationProfile",null);Ht(this,"elevationMarker",null);Ht(this,"isZooming",!1);Ht(this,"simpleLine",null);Ht(this,"isDestroyed",!1);Ht(this,"zoomAnimationTimeout",null);this.properties=dn.measure("ElevationLine.constructor.initProperties",()=>({...this.properties,type:"ElevationLine",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{...this.properties.style||{},name:r.name||""},elevationProfile:null,maxElevation:0,minElevation:0,elevationGain:0,elevationLoss:0,dataSource:"pending"})),this.setupEventListeners()}setupEventListeners(){dn.measure("ElevationLine.setupEventListeners",()=>{this.on("move",()=>this.updateElevationProfile()),this.on("add",()=>{this._map&&(this._map.on("zoomstart",this.handleZoomStart,this),this._map.on("zoomend",this.handleZoomEnd,this),this._map.on("zoomanim",this._animateZoom,this))}),this.on("remove",()=>{this.cleanupEventListeners()})})}cleanupEventListeners(){this._map&&(this._map.off("zoomstart",this.handleZoomStart,this),this._map.off("zoomend",this.handleZoomEnd,this),this._map.off("zoomanim",this._animateZoom,this)),this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null)}_animateZoom(t){if(this.isDestroyed||!this._map||!this.getLatLngs().length){console.debug("[ElevationLine] Animation de zoom ignore - ligne dtruite ou carte non disponible");return}this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null);try{this.elevationMarker&&this.elevationMarker.remove();const r=this._path;r&&(r.style.display="none");const i=this.getLatLngs();if(i&&i.length>0&&this._map&&!this.isDestroyed){if(!this._map.getContainer()){console.debug("[ElevationLine] Carte non valide pendant l'animation de zoom");return}if(this.simpleLine?this.simpleLine.setLatLngs(i):(this.simpleLine=Vn.polyline(i,{color:"#FF4500",weight:3,opacity:.6,smoothFactor:1,interactive:!1}),this._map&&this._map.getContainer()&&this.simpleLine.addTo(this._map)),this.simpleLine&&this.simpleLine._path){const s=this.simpleLine._path.style.transform;this.simpleLine._path.style.transform="",this.zoomAnimationTimeout=setTimeout(()=>{if(this.isDestroyed||!this._map||!this._map.getContainer()){this.cleanup();return}try{this.simpleLine&&this.simpleLine._path&&(this.simpleLine._path.style.transform=s,this.simpleLine._path.style.display=""),r&&!this.isDestroyed&&(r.style.display=""),this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&this.redraw()}catch(o){console.warn("[ElevationLine] Erreur lors de la restauration aprs animation:",o),this.cleanup()}},300)}}}catch(r){console.debug("[ElevationLine] Animation de zoom ignore:",r),this.zoomAnimationTimeout=setTimeout(()=>{if(this.isDestroyed||!this._map||!this._map.getContainer()){this.cleanup();return}try{this._path&&(this._path.style.display=""),this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&this.redraw()}catch(i){console.error("[ElevationLine] Erreur lors de la restauration aprs animation:",i),this.cleanup()}},300)}}handleZoomStart(){this.isDestroyed||dn.measure("ElevationLine.handleZoomStart",()=>{if(!(this.isZooming||!this._map)){this.isZooming=!0;try{this.elevationMarker&&this.elevationMarker.remove();const t=this._path;t&&(t.style.display="none"),this.isDestroyed||this.setStyle({opacity:.3})}catch(t){console.error("[ElevationLine] Error in handleZoomStart:",t),this.cleanup()}}})}handleZoomEnd(){this.isDestroyed||dn.measure("ElevationLine.handleZoomEnd",()=>{if(!this._map){this.isZooming=!1;return}try{this.simpleLine&&this._map&&(this.simpleLine.remove(),this.simpleLine=null);const t=this._path;t&&(t.style.display=""),this.isDestroyed||this.setStyle({opacity:.8}),this.zoomAnimationTimeout&&clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=setTimeout(()=>{if(!(this.isDestroyed||!this._map))try{this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&this.redraw()}catch(r){console.warn("[ElevationLine] Erreur lors du redraw aprs zoom:",r),this.cleanup()}},50)}catch(t){console.error("[ElevationLine] Error in handleZoomEnd:",t)}finally{this.isZooming=!1}})}cleanup(){dn.measure("ElevationLine.cleanup",()=>{if(this.isZooming=!1,this.hideElevationMarker(),this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null),this.simpleLine&&this._map){try{this.simpleLine.remove()}catch(r){console.error("[ElevationLine] Error removing simpleLine:",r)}this.simpleLine=null}if(this.elevationProfile){try{this.elevationProfile.remove()}catch(r){console.error("[ElevationLine] Error removing elevationProfile:",r)}this.elevationProfile=null}const t=this._path;t&&(t.style.display=""),!this.isDestroyed&&this._map&&this._map.hasLayer(this)&&this.setStyle({opacity:.8})})}calculateOptimalSampleCount(){return dn.measure("ElevationLine.calculateOptimalSampleCount",()=>{const t=this.getLength(),r=Math.ceil(t/Xa.SAMPLE_DISTANCE);return Math.min(Math.max(r,Xa.MIN_SAMPLES),Xa.MAX_SAMPLES)})}async fetchElevationData(t=0){return dn.measure("ElevationLine.fetchElevationData",async()=>{if(this.getLatLngs().length===0)return;const i=this.getLength();let s="";const o=this.calculateOptimalSampleCount();console.log(`[ElevationLine] Using ${o} sample points for ${i.toFixed(0)}m line`);const u=[];for(let f=0;f<o;f++){const d=f/(o-1)*i,g=this.getPointAtDistance(d);g&&u.push(`${g.lat},${g.lng}`)}s=u.join("|");try{const f=await fetch(`${Xa.API_URL}?locations=${s}`);if(!f.ok)throw new Error(`HTTP error ${f.status}`);const d=await f.json();if(!d.results||!Array.isArray(d.results))throw new Error("Invalid API response format");this.elevationData=d.results.map((g,y)=>({distance:y/(o-1)*i,elevation:g.elevation})),this.properties.dataSource="api"}catch(f){if(console.warn(`[ElevationLine] API fetch attempt ${t+1}/${Xa.MAX_RETRIES} failed:`,f),t<Xa.MAX_RETRIES)return await new Promise(d=>setTimeout(d,Xa.RETRY_DELAY)),this.fetchElevationData(t+1);console.warn("[ElevationLine] All API attempts failed, falling back to simulation"),this.simulateElevationData(),this.properties.dataSource="simulation"}this.calculateElevationStatistics()})}simulateElevationData(){dn.measure("ElevationLine.simulateElevationData",()=>{const t=this.getLength(),r=this.calculateOptimalSampleCount();this.elevationData=Array.from({length:r},(i,s)=>{const o=s/(r-1)*t,u=100+Math.sin(o/t*Math.PI*2)*50;return{distance:o,elevation:u}})})}calculateElevationStatistics(){dn.measure("ElevationLine.calculateElevationStatistics",()=>{if(!this.elevationData.length)return;const t=this.elevationData.map(g=>g.elevation),r=t.length?Math.max(...t):0,i=t.length?Math.min(...t):0;let s=0,o=0,u=0,f=0,d=0;console.log("[ElevationLine][calculateElevationStatistics] Donnes brutes:",{elevationsCount:t.length,maxElevation:r,minElevation:i});for(let g=1;g<this.elevationData.length;g++){const y=this.elevationData[g-1],x=this.elevationData[g],_=x.elevation-y.elevation;_>0?s+=_:o+=Math.abs(_);const M=x.distance-y.distance;if(M>0){const k=_/M*100;u=Math.max(u,Math.abs(k)),f+=Math.abs(k),d++}}console.log("[ElevationLine][calculateElevationStatistics] Calculs intermdiaires:",{gain:s,loss:o,maxSlope:u,averageSlope:d>0?f/d:0}),this.properties={...this.properties,type:"ElevationLine",maxElevation:r,minElevation:i,elevationGain:s,elevationLoss:o,maxSlope:u,averageSlope:d>0?f/d:0,elevationData:this.elevationData,dataSource:this.properties.dataSource,length:this.getLength()},console.log("[ElevationLine][calculateElevationStatistics] Proprits mises  jour:",this.properties)})}showElevationAt(t){dn.measure("ElevationLine.showElevationAt",()=>{if(!(!this.elevationData.length||!this._map))try{const r=this.elevationData.reduce((s,o)=>Math.abs(o.distance-t)<Math.abs(s.distance-t)?o:s),i=this.getPointAtDistance(t);if(!i)return;this.elevationMarker?(this.elevationMarker.setLatLng(i),this.elevationMarker.setTooltipContent(`Distance: ${this.formatDistance(r.distance)}<br>Altitude: ${this.formatElevation(r.elevation)}`)):(this.elevationMarker=Vn.circleMarker(i,{radius:6,color:"#FF4500",fillColor:"#FF4500",fillOpacity:1,weight:2,className:"elevation-marker"}),this.elevationMarker.bindTooltip(`Distance: ${this.formatDistance(r.distance)}<br>Altitude: ${this.formatElevation(r.elevation)}`,{permanent:!0,direction:"top",offset:[0,-10],className:"elevation-marker-tooltip"}),this._map&&this._map.hasLayer(this)&&this.elevationMarker.addTo(this._map)),this.fire("elevation:show",{distance:t,elevation:r.elevation,latLng:i})}catch(r){console.error("[ElevationLine] Erreur lors de l'affichage de l'lvation:",r),this.hideElevationMarker()}})}hideElevationMarker(){dn.measure("ElevationLine.hideElevationMarker",()=>{this.elevationMarker&&(this.elevationMarker.remove(),this.elevationMarker=null)})}getPointAtDistance(t){return dn.measure("ElevationLine.getPointAtDistance",()=>{try{const i=this.getLatLngs().map(u=>[u.lng,u.lat]),s=hu(i),o=u1(s,t,{units:"meters"});return Vn.latLng(o.geometry.coordinates[1],o.geometry.coordinates[0])}catch(r){return console.error("Error calculating point at distance",r),null}})}moveVertex(t,r,i=!1){dn.measure("ElevationLine.moveVertex",()=>{super.moveVertex(t,r,!1),this.properties.type="ElevationLine",i&&this.updateElevationProfile()})}addVertex(t,r,i=!1){dn.measure("ElevationLine.addVertex",()=>{console.warn("[ElevationLine] Tentative d'ajout de vertex ignore - non autoris pour un profil altimtrique")})}setLatLngs(t){return dn.measure("ElevationLine.setLatLngs",()=>(super.setLatLngs(t),this.properties.type="ElevationLine",this.updateElevationProfile(),this))}move(t,r=!0){return dn.measure("ElevationLine.move",()=>(super.move(t,!1),this.properties.type="ElevationLine",r&&this.updateElevationProfile(),this))}setName(t){dn.measure("ElevationLine.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=t,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return dn.measure("ElevationLine.getName",()=>{var t,r;return((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||""})}formatDistance(t){return dn.measure("ElevationLine.formatDistance",()=>t>=1e3?`${(t/1e3).toFixed(2)} km`:`${t.toFixed(0)} m`)}formatElevation(t){return dn.measure("ElevationLine.formatElevation",()=>`${t.toFixed(0)} m`)}onAdd(t){return dn.measure("ElevationLine.onAdd",()=>(super.onAdd(t),this))}onRemove(t){return this.isDestroyed=!0,this.cleanupEventListeners(),this.cleanup(),super.onRemove(t)}async updateElevationProfile(){return dn.measure("ElevationLine.updateElevationProfile",async()=>{try{if(this.properties.elevationData&&this.properties.dataSource==="restored"){this.elevationData=this.properties.elevationData,this.calculateElevationStatistics(),this._map&&this._map.hasLayer(this)&&this.redraw(),this.fire("elevation:updated",{shape:this,elevationData:this.elevationData,properties:this.properties});return}await this.fetchElevationData(),this.updateProperties(),this._map&&this._map.hasLayer(this)&&this.redraw(),this.fire("elevation:updated",{shape:this,elevationData:this.elevationData,properties:this.properties})}catch(t){console.error("[ElevationLine] Erreur lors de la mise  jour du profil d'lvation:",t),this.properties.dataSource="error"}})}updateProperties(){dn.measure("ElevationLine.updateProperties",()=>{var t,r;if(super.updateProperties(),this.elevationData&&this.elevationData.length>0){const i=this.elevationData.map(N=>N.elevation),s=Math.max(...i),o=Math.min(...i);let u=0,f=0,d=0,g=0,y=0;for(let N=1;N<this.elevationData.length;N++){const T=this.elevationData[N-1],F=this.elevationData[N],K=F.elevation-T.elevation;K>0?u+=K:f+=Math.abs(K);const Q=F.distance-T.distance;if(Q>0){const he=K/Q*100;d=Math.max(d,Math.abs(he)),g+=Math.abs(he),y++}}const _=this.getLatLngs().map(N=>({lat:N.lat,lng:N.lng})),M=((t=this.properties)==null?void 0:t.category)||"forages",k=((r=this.properties)==null?void 0:r.accessLevel)||"visitor";this.properties={...this.properties,type:"ElevationLine",coordinates:_,elevationData:this.elevationData.map(N=>({distance:N.distance,elevation:N.elevation})),maxElevation:s,minElevation:o,elevationGain:u,elevationLoss:f,maxSlope:d,averageSlope:y>0?g/y:0,dataSource:this.properties.dataSource||"api",category:M,accessLevel:k},this.fire("properties:updated",{shape:this,properties:this.properties})}})}getElevationData(){return dn.measure("ElevationLine.getElevationData",()=>this.elevationData)}};Ht(Xa,"API_URL","https://api.open-elevation.com/api/v1/lookup"),Ht(Xa,"RETRY_DELAY",2e3),Ht(Xa,"MAX_RETRIES",3),Ht(Xa,"SAMPLE_DISTANCE",100),Ht(Xa,"MIN_SAMPLES",10),Ht(Xa,"MAX_SAMPLES",50);let Ef=Xa;var y0={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */y0.exports;(function(e,n){(function(){var t,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",u="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",d=500,g="__lodash_placeholder__",y=1,x=2,_=4,M=1,k=2,N=1,T=2,F=4,K=8,Q=16,he=32,fe=64,me=128,G=256,$=512,X=30,R="...",O=800,B=16,z=1,W=2,V=3,oe=1/0,ie=9007199254740991,xe=17976931348623157e292,Ee=NaN,Te=4294967295,Y=Te-1,q=Te>>>1,ee=[["ary",me],["bind",N],["bindKey",T],["curry",K],["curryRight",Q],["flip",$],["partial",he],["partialRight",fe],["rearg",G]],ue="[object Arguments]",le="[object Array]",pe="[object AsyncFunction]",Z="[object Boolean]",D="[object Date]",ke="[object DOMException]",Me="[object Error]",Ge="[object Function]",ce="[object GeneratorFunction]",ne="[object Map]",ye="[object Number]",de="[object Null]",Ze="[object Object]",qe="[object Promise]",tt="[object Proxy]",ze="[object RegExp]",Qe="[object Set]",et="[object String]",bt="[object Symbol]",Pt="[object Undefined]",At="[object WeakMap]",Vt="[object WeakSet]",Qt="[object ArrayBuffer]",mn="[object DataView]",Ye="[object Float32Array]",ot="[object Float64Array]",rt="[object Int8Array]",zt="[object Int16Array]",en="[object Int32Array]",Bn="[object Uint8Array]",bn="[object Uint8ClampedArray]",Nn="[object Uint16Array]",ar="[object Uint32Array]",xn=/\b__p \+= '';/g,Mn=/\b(__p \+=) '' \+/g,Pn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,fr=/&(?:amp|lt|gt|quot|#39);/g,yr=/[&<>"']/g,at=RegExp(fr.source),We=RegExp(yr.source),Ot=/<%-([\s\S]+?)%>/g,En=/<%([\s\S]+?)%>/g,Jn=/<%=([\s\S]+?)%>/g,Zn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qt=/^\w*$/,gn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rt=/[\\^$.*+?()[\]{}|]/g,Kt=RegExp(Rt.source),Ln=/^\s+/,mr=/\s/,lt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Cn=/\{\n\/\* \[wrapped with (.+)\] \*/,Lr=/,? & /,Ii=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Fr=/[()=,{}\[\]\/\s]/,Pr=/\\(\\)?/g,lr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Hr=/\w*$/,ir=/^[-+]0x[0-9a-f]+$/i,Or=/^0b[01]+$/i,jr=/^\[object .+?Constructor\]$/,on=/^0o[0-7]+$/i,ji=/^(?:0|[1-9]\d*)$/,_i=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,gi=/($^)/,Kr=/['\n\r\u2028\u2029\\]/g,Br="\\ud800-\\udfff",Rr="\\u0300-\\u036f",dr="\\ufe20-\\ufe2f",zi="\\u20d0-\\u20ff",Ss=Rr+dr+zi,Cs="\\u2700-\\u27bf",si="a-z\\xdf-\\xf6\\xf8-\\xff",jn="\\xac\\xb1\\xd7\\xf7",Po="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ci="\\u2000-\\u206f",hr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",qn="A-Z\\xc0-\\xd6\\xd8-\\xde",bo="\\ufe0e\\ufe0f",wo=jn+Po+ci+hr,Sr="[']",Vs="["+Br+"]",Gn="["+wo+"]",_r="["+Ss+"]",Yr="\\d+",_n="["+Cs+"]",nn="["+si+"]",ai="[^"+Br+wo+Yr+Cs+si+qn+"]",fo="\\ud83c[\\udffb-\\udfff]",xo="(?:"+_r+"|"+fo+")",Mi="[^"+Br+"]",fs="(?:\\ud83c[\\udde6-\\uddff]){2}",Qo="[\\ud800-\\udbff][\\udc00-\\udfff]",Ro="["+qn+"]",hi="\\u200d",Os="(?:"+nn+"|"+ai+")",Fo="(?:"+Ro+"|"+ai+")",eo="(?:"+Sr+"(?:d|ll|m|re|s|t|ve))?",Lo="(?:"+Sr+"(?:D|LL|M|RE|S|T|VE))?",Gs=xo+"?",va="["+bo+"]?",to="(?:"+hi+"(?:"+[Mi,fs,Qo].join("|")+")"+va+Gs+")*",il="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ya="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",gr=va+Gs+to,br="(?:"+[_n,fs,Qo].join("|")+")"+gr,Jr="(?:"+[Mi+_r+"?",_r,fs,Qo,Vs].join("|")+")",Nr=RegExp(Sr,"g"),jo=RegExp(_r,"g"),ol=RegExp(fo+"(?="+fo+")|"+Jr+gr,"g"),sl=RegExp([Ro+"?"+nn+"+"+eo+"(?="+[Gn,Ro,"$"].join("|")+")",Fo+"+"+Lo+"(?="+[Gn,Ro+Os,"$"].join("|")+")",Ro+"?"+Os+"+"+eo,Ro+"+"+Lo,ya,il,Yr,br].join("|"),"g"),Hs=RegExp("["+hi+Br+Ss+bo+"]"),$a=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,bu=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ml=-1,Cr={};Cr[Ye]=Cr[ot]=Cr[rt]=Cr[zt]=Cr[en]=Cr[Bn]=Cr[bn]=Cr[Nn]=Cr[ar]=!0,Cr[ue]=Cr[le]=Cr[Qt]=Cr[Z]=Cr[mn]=Cr[D]=Cr[Me]=Cr[Ge]=Cr[ne]=Cr[ye]=Cr[Ze]=Cr[ze]=Cr[Qe]=Cr[et]=Cr[At]=!1;var qr={};qr[ue]=qr[le]=qr[Qt]=qr[mn]=qr[Z]=qr[D]=qr[Ye]=qr[ot]=qr[rt]=qr[zt]=qr[en]=qr[ne]=qr[ye]=qr[Ze]=qr[ze]=qr[Qe]=qr[et]=qr[bt]=qr[Bn]=qr[bn]=qr[Nn]=qr[ar]=!0,qr[Me]=qr[Ge]=qr[At]=!1;var Ua={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Yu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Al={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Yl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},al=parseFloat,kl=parseInt,Jl=typeof ea=="object"&&ea&&ea.Object===Object&&ea,Xr=typeof self=="object"&&self&&self.Object===Object&&self,no=Jl||Xr||Function("return this")(),or=n&&!n.nodeType&&n,ro=or&&!0&&e&&!e.nodeType&&e,ll=ro&&ro.exports===or,_a=ll&&Jl.process,Ui=function(){try{var _t=ro&&ro.require&&ro.require("util").types;return _t||_a&&_a.binding&&_a.binding("util")}catch{}}(),Xl=Ui&&Ui.isArrayBuffer,ta=Ui&&Ui.isDate,Tl=Ui&&Ui.isMap,Nl=Ui&&Ui.isRegExp,Bs=Ui&&Ui.isSet,Dl=Ui&&Ui.isTypedArray;function bi(_t,Zt,kt){switch(kt.length){case 0:return _t.call(Zt);case 1:return _t.call(Zt,kt[0]);case 2:return _t.call(Zt,kt[0],kt[1]);case 3:return _t.call(Zt,kt[0],kt[1],kt[2])}return _t.apply(Zt,kt)}function Ju(_t,Zt,kt,An){for(var Kn=-1,wr=_t==null?0:_t.length;++Kn<wr;){var Vi=_t[Kn];Zt(An,Vi,kt(Vi),_t)}return An}function Mo(_t,Zt){for(var kt=-1,An=_t==null?0:_t.length;++kt<An&&Zt(_t[kt],kt,_t)!==!1;);return _t}function qs(_t,Zt){for(var kt=_t==null?0:_t.length;kt--&&Zt(_t[kt],kt,_t)!==!1;);return _t}function Il(_t,Zt){for(var kt=-1,An=_t==null?0:_t.length;++kt<An;)if(!Zt(_t[kt],kt,_t))return!1;return!0}function Ws(_t,Zt){for(var kt=-1,An=_t==null?0:_t.length,Kn=0,wr=[];++kt<An;){var Vi=_t[kt];Zt(Vi,kt,_t)&&(wr[Kn++]=Vi)}return wr}function ul(_t,Zt){var kt=_t==null?0:_t.length;return!!kt&&fn(_t,Zt,0)>-1}function cl(_t,Zt,kt){for(var An=-1,Kn=_t==null?0:_t.length;++An<Kn;)if(kt(Zt,_t[An]))return!0;return!1}function wi(_t,Zt){for(var kt=-1,An=_t==null?0:_t.length,Kn=Array(An);++kt<An;)Kn[kt]=Zt(_t[kt],kt,_t);return Kn}function Es(_t,Zt){for(var kt=-1,An=Zt.length,Kn=_t.length;++kt<An;)_t[Kn+kt]=Zt[kt];return _t}function ba(_t,Zt,kt,An){var Kn=-1,wr=_t==null?0:_t.length;for(An&&wr&&(kt=_t[++Kn]);++Kn<wr;)kt=Zt(kt,_t[Kn],Kn,_t);return kt}function io(_t,Zt,kt,An){var Kn=_t==null?0:_t.length;for(An&&Kn&&(kt=_t[--Kn]);Kn--;)kt=Zt(kt,_t[Kn],Kn,_t);return kt}function I(_t,Zt){for(var kt=-1,An=_t==null?0:_t.length;++kt<An;)if(Zt(_t[kt],kt,_t))return!0;return!1}var _e=vr("length");function Ke(_t){return _t.split("")}function ft(_t){return _t.match(Ii)||[]}function Lt(_t,Zt,kt){var An;return kt(_t,function(Kn,wr,Vi){if(Zt(Kn,wr,Vi))return An=wr,!1}),An}function $t(_t,Zt,kt,An){for(var Kn=_t.length,wr=kt+(An?1:-1);An?wr--:++wr<Kn;)if(Zt(_t[wr],wr,_t))return wr;return-1}function fn(_t,Zt,kt){return Zt===Zt?So(_t,Zt,kt):$t(_t,zn,kt)}function Dn(_t,Zt,kt,An){for(var Kn=kt-1,wr=_t.length;++Kn<wr;)if(An(_t[Kn],Zt))return Kn;return-1}function zn(_t){return _t!==_t}function nr(_t,Zt){var kt=_t==null?0:_t.length;return kt?xi(_t,Zt)/kt:Ee}function vr(_t){return function(Zt){return Zt==null?t:Zt[_t]}}function Ur(_t){return function(Zt){return _t==null?t:_t[Zt]}}function $i(_t,Zt,kt,An,Kn){return Kn(_t,function(wr,Vi,Li){kt=An?(An=!1,wr):Zt(kt,wr,Vi,Li)}),kt}function di(_t,Zt){var kt=_t.length;for(_t.sort(Zt);kt--;)_t[kt]=_t[kt].value;return _t}function xi(_t,Zt){for(var kt,An=-1,Kn=_t.length;++An<Kn;){var wr=Zt(_t[An]);wr!==t&&(kt=kt===t?wr:kt+wr)}return kt}function oo(_t,Zt){for(var kt=-1,An=Array(_t);++kt<_t;)An[kt]=Zt(kt);return An}function ho(_t,Zt){return wi(Zt,function(kt){return[kt,_t[kt]]})}function Ps(_t){return _t&&_t.slice(0,xa(_t)+1).replace(Ln,"")}function Vr(_t){return function(Zt){return _t(Zt)}}function zo(_t,Zt){return wi(Zt,function(kt){return _t[kt]})}function fl(_t,Zt){return _t.has(Zt)}function es(_t,Zt){for(var kt=-1,An=_t.length;++kt<An&&fn(Zt,_t[kt],0)>-1;);return kt}function Ql(_t,Zt){for(var kt=_t.length;kt--&&fn(Zt,_t[kt],0)>-1;);return kt}function na(_t,Zt){for(var kt=_t.length,An=0;kt--;)_t[kt]===Zt&&++An;return An}var wu=Ur(Ua),Va=Ur(Yu);function Ga(_t){return"\\"+Yl[_t]}function po(_t,Zt){return _t==null?t:_t[Zt]}function ra(_t){return Hs.test(_t)}function Ms(_t){return $a.test(_t)}function hs(_t){for(var Zt,kt=[];!(Zt=_t.next()).done;)kt.push(Zt.value);return kt}function hl(_t){var Zt=-1,kt=Array(_t.size);return _t.forEach(function(An,Kn){kt[++Zt]=[Kn,An]}),kt}function $o(_t,Zt){return function(kt){return _t(Zt(kt))}}function ts(_t,Zt){for(var kt=-1,An=_t.length,Kn=0,wr=[];++kt<An;){var Vi=_t[kt];(Vi===Zt||Vi===g)&&(_t[kt]=g,wr[Kn++]=kt)}return wr}function ns(_t){var Zt=-1,kt=Array(_t.size);return _t.forEach(function(An){kt[++Zt]=An}),kt}function Xu(_t){var Zt=-1,kt=Array(_t.size);return _t.forEach(function(An){kt[++Zt]=[An,An]}),kt}function So(_t,Zt,kt){for(var An=kt-1,Kn=_t.length;++An<Kn;)if(_t[An]===Zt)return An;return-1}function wa(_t,Zt,kt){for(var An=kt+1;An--;)if(_t[An]===Zt)return An;return An}function Uo(_t){return ra(_t)?Go(_t):_e(_t)}function Vo(_t){return ra(_t)?Ao(_t):Ke(_t)}function xa(_t){for(var Zt=_t.length;Zt--&&mr.test(_t.charAt(Zt)););return Zt}var La=Ur(Al);function Go(_t){for(var Zt=ol.lastIndex=0;ol.test(_t);)++Zt;return Zt}function Ao(_t){return _t.match(ol)||[]}function ia(_t){return _t.match(sl)||[]}var As=function _t(Zt){Zt=Zt==null?no:Ho.defaults(no.Object(),Zt,Ho.pick(no,bu));var kt=Zt.Array,An=Zt.Date,Kn=Zt.Error,wr=Zt.Function,Vi=Zt.Math,Li=Zt.Object,Ol=Zt.RegExp,rs=Zt.String,Gi=Zt.TypeError,oa=kt.prototype,Sa=wr.prototype,sa=Li.prototype,aa=Zt["__core-js_shared__"],la=Sa.toString,Qr=sa.hasOwnProperty,Zs=0,ko=function(){var c=/[^.]+$/.exec(aa&&aa.keys&&aa.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),Si=sa.toString,Ai=la.call(Li),so=no._,Bi=Ol("^"+la.call(Qr).replace(Rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ks=ll?Zt.Buffer:t,ds=Zt.Symbol,Rs=Zt.Uint8Array,xu=ks?ks.allocUnsafe:t,ua=$o(Li.getPrototypeOf,Li),go=Li.create,Oi=sa.propertyIsEnumerable,qo=oa.splice,ps=ds?ds.isConcatSpreadable:t,pr=ds?ds.iterator:t,Ca=ds?ds.toStringTag:t,Ea=function(){try{var c=Ff(Li,"defineProperty");return c({},"",{}),c}catch{}}(),Ks=Zt.clearTimeout!==no.clearTimeout&&Zt.clearTimeout,is=An&&An.now!==no.Date.now&&An.now,bc=Zt.setTimeout!==no.setTimeout&&Zt.setTimeout,To=Vi.ceil,No=Vi.floor,Ys=Li.getOwnPropertySymbols,a=ks?ks.isBuffer:t,p=Zt.isFinite,S=oa.join,U=$o(Li.keys,Li),se=Vi.max,Se=Vi.min,st=An.now,Mt=Zt.parseInt,Ut=Vi.random,an=oa.reverse,In=Ff(Zt,"DataView"),Xn=Ff(Zt,"Map"),zr=Ff(Zt,"Promise"),mo=Ff(Zt,"Set"),Ji=Ff(Zt,"WeakMap"),Do=Ff(Li,"create"),Hi=Ji&&new Ji,gs={},wc=jf(In),ca=jf(Xn),Js=jf(zr),Fs=jf(mo),Tf=jf(Ji),eu=ds?ds.prototype:t,mi=eu?eu.valueOf:t,Wo=eu?eu.toString:t;function De(c){if(os(c)&&!ti(c)&&!(c instanceof Gr)){if(c instanceof Io)return c;if(Qr.call(c,"__wrapped__"))return Jy(c)}return new Io(c)}var ms=function(){function c(){}return function(m){if(!Ko(m))return{};if(go)return go(m);c.prototype=m;var A=new c;return c.prototype=t,A}}();function Lu(){}function Io(c,m){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!m,this.__index__=0,this.__values__=t}De.templateSettings={escape:Ot,evaluate:En,interpolate:Jn,variable:"",imports:{_:De}},De.prototype=Lu.prototype,De.prototype.constructor=De,Io.prototype=ms(Lu.prototype),Io.prototype.constructor=Io;function Gr(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Te,this.__views__=[]}function Wc(){var c=new Gr(this.__wrapped__);return c.__actions__=pl(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=pl(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=pl(this.__views__),c}function hh(){if(this.__filtered__){var c=new Gr(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function Zc(){var c=this.__wrapped__.value(),m=this.__dir__,A=ti(c),te=m<0,we=A?c.length:0,Re=f3(0,we,this.__views__),it=Re.start,mt=Re.end,Et=mt-it,ln=te?mt:it-1,un=this.__iteratees__,vn=un.length,Un=0,sr=Se(Et,this.__takeCount__);if(!A||!te&&we==Et&&sr==Et)return tu(c,this.__actions__);var Mr=[];e:for(;Et--&&Un<sr;){ln+=m;for(var fi=-1,Ar=c[ln];++fi<vn;){var Ci=un[fi],Ti=Ci.iteratee,Fl=Ci.type,Za=Ti(Ar);if(Fl==W)Ar=Za;else if(!Za){if(Fl==z)continue e;break e}}Mr[Un++]=Ar}return Mr}Gr.prototype=ms(Lu.prototype),Gr.prototype.constructor=Gr;function Ha(c){var m=-1,A=c==null?0:c.length;for(this.clear();++m<A;){var te=c[m];this.set(te[0],te[1])}}function xc(){this.__data__=Do?Do(null):{},this.size=0}function Nf(c){var m=this.has(c)&&delete this.__data__[c];return this.size-=m?1:0,m}function md(c){var m=this.__data__;if(Do){var A=m[c];return A===f?t:A}return Qr.call(m,c)?m[c]:t}function Qu(c){var m=this.__data__;return Do?m[c]!==t:Qr.call(m,c)}function Kc(c,m){var A=this.__data__;return this.size+=this.has(c)?0:1,A[c]=Do&&m===t?f:m,this}Ha.prototype.clear=xc,Ha.prototype.delete=Nf,Ha.prototype.get=md,Ha.prototype.has=Qu,Ha.prototype.set=Kc;function Bl(c){var m=-1,A=c==null?0:c.length;for(this.clear();++m<A;){var te=c[m];this.set(te[0],te[1])}}function vd(){this.__data__=[],this.size=0}function Yc(c){var m=this.__data__,A=yt(m,c);if(A<0)return!1;var te=m.length-1;return A==te?m.pop():qo.call(m,A,1),--this.size,!0}function Jc(c){var m=this.__data__,A=yt(m,c);return A<0?t:m[A][1]}function dh(c){return yt(this.__data__,c)>-1}function ph(c,m){var A=this.__data__,te=yt(A,c);return te<0?(++this.size,A.push([c,m])):A[te][1]=m,this}Bl.prototype.clear=vd,Bl.prototype.delete=Yc,Bl.prototype.get=Jc,Bl.prototype.has=dh,Bl.prototype.set=ph;function Pa(c){var m=-1,A=c==null?0:c.length;for(this.clear();++m<A;){var te=c[m];this.set(te[0],te[1])}}function gh(){this.size=0,this.__data__={hash:new Ha,map:new(Xn||Bl),string:new Ha}}function mh(c){var m=Xp(this,c).delete(c);return this.size-=m?1:0,m}function vh(c){return Xp(this,c).get(c)}function b(c){return Xp(this,c).has(c)}function P(c,m){var A=Xp(this,c),te=A.size;return A.set(c,m),this.size+=A.size==te?0:1,this}Pa.prototype.clear=gh,Pa.prototype.delete=mh,Pa.prototype.get=vh,Pa.prototype.has=b,Pa.prototype.set=P;function H(c){var m=-1,A=c==null?0:c.length;for(this.__data__=new Pa;++m<A;)this.add(c[m])}function ae(c){return this.__data__.set(c,f),this}function be(c){return this.__data__.has(c)}H.prototype.add=H.prototype.push=ae,H.prototype.has=be;function Ce(c){var m=this.__data__=new Bl(c);this.size=m.size}function Ae(){this.__data__=new Bl,this.size=0}function Ne(c){var m=this.__data__,A=m.delete(c);return this.size=m.size,A}function Ie(c){return this.__data__.get(c)}function Ve(c){return this.__data__.has(c)}function dt(c,m){var A=this.__data__;if(A instanceof Bl){var te=A.__data__;if(!Xn||te.length<i-1)return te.push([c,m]),this.size=++A.size,this;A=this.__data__=new Pa(te)}return A.set(c,m),this.size=A.size,this}Ce.prototype.clear=Ae,Ce.prototype.delete=Ne,Ce.prototype.get=Ie,Ce.prototype.has=Ve,Ce.prototype.set=dt;function Dt(c,m){var A=ti(c),te=!A&&zf(c),we=!A&&!te&&Qc(c),Re=!A&&!te&&!we&&Eh(c),it=A||te||we||Re,mt=it?oo(c.length,rs):[],Et=mt.length;for(var ln in c)(m||Qr.call(c,ln))&&!(it&&(ln=="length"||we&&(ln=="offset"||ln=="parent")||Re&&(ln=="buffer"||ln=="byteLength"||ln=="byteOffset")||Mc(ln,Et)))&&mt.push(ln);return mt}function It(c){var m=c.length;return m?c[Of(0,m-1)]:t}function xt(c,m){return Qp(pl(c),Qn(m,0,c.length))}function Yt(c){return Qp(pl(c))}function Gt(c,m,A){(A!==t&&!Au(c[m],A)||A===t&&!(m in c))&&kn(c,m,A)}function pt(c,m,A){var te=c[m];(!(Qr.call(c,m)&&Au(te,A))||A===t&&!(m in c))&&kn(c,m,A)}function yt(c,m){for(var A=c.length;A--;)if(Au(c[A][0],m))return A;return-1}function tn(c,m,A,te){return j(c,function(we,Re,it){m(te,we,A(we),it)}),te}function hn(c,m){return c&&nc(m,Xs(m),c)}function rn(c,m){return c&&nc(m,ml(m),c)}function kn(c,m,A){m=="__proto__"&&Ea?Ea(c,m,{configurable:!0,enumerable:!0,value:A,writable:!0}):c[m]=A}function Sn(c,m){for(var A=-1,te=m.length,we=kt(te),Re=c==null;++A<te;)we[A]=Re?t:Em(c,m[A]);return we}function Qn(c,m,A){return c===c&&(A!==t&&(c=c<=A?c:A),m!==t&&(c=c>=m?c:m)),c}function l(c,m,A,te,we,Re){var it,mt=m&y,Et=m&x,ln=m&_;if(A&&(it=we?A(c,te,we,Re):A(c)),it!==t)return it;if(!Ko(c))return c;var un=ti(c);if(un){if(it=d3(c),!mt)return pl(c,it)}else{var vn=Aa(c),Un=vn==Ge||vn==ce;if(Qc(c))return Ly(c,mt);if(vn==Ze||vn==ue||Un&&!we){if(it=Et||Un?{}:Uy(c),!mt)return Et?n3(c,rn(it,c)):t3(c,hn(it,c))}else{if(!qr[vn])return we?c:{};it=p3(c,vn,mt)}}Re||(Re=new Ce);var sr=Re.get(c);if(sr)return sr;Re.set(c,it),v2(c)?c.forEach(function(Ar){it.add(l(Ar,m,A,Ar,c,Re))}):g2(c)&&c.forEach(function(Ar,Ci){it.set(Ci,l(Ar,m,A,Ci,c,Re))});var Mr=ln?Et?hm:fm:Et?ml:Xs,fi=un?t:Mr(c);return Mo(fi||c,function(Ar,Ci){fi&&(Ci=Ar,Ar=c[Ci]),pt(it,Ci,l(Ar,m,A,Ci,c,Re))}),it}function h(c){var m=Xs(c);return function(A){return v(A,c,m)}}function v(c,m,A){var te=A.length;if(c==null)return!te;for(c=Li(c);te--;){var we=A[te],Re=m[we],it=c[we];if(it===t&&!(we in c)||!Re(it))return!1}return!0}function w(c,m,A){if(typeof c!="function")throw new Gi(o);return xd(function(){c.apply(t,A)},m)}function C(c,m,A,te){var we=-1,Re=ul,it=!0,mt=c.length,Et=[],ln=m.length;if(!mt)return Et;A&&(m=wi(m,Vr(A))),te?(Re=cl,it=!1):m.length>=i&&(Re=fl,it=!1,m=new H(m));e:for(;++we<mt;){var un=c[we],vn=A==null?un:A(un);if(un=te||un!==0?un:0,it&&vn===vn){for(var Un=ln;Un--;)if(m[Un]===vn)continue e;Et.push(un)}else Re(m,vn,te)||Et.push(un)}return Et}var j=My(Xt),J=My(yn,!0);function re(c,m){var A=!0;return j(c,function(te,we,Re){return A=!!m(te,we,Re),A}),A}function ge(c,m,A){for(var te=-1,we=c.length;++te<we;){var Re=c[te],it=m(Re);if(it!=null&&(mt===t?it===it&&!Rl(it):A(it,mt)))var mt=it,Et=Re}return Et}function Le(c,m,A,te){var we=c.length;for(A=ui(A),A<0&&(A=-A>we?0:we+A),te=te===t||te>we?we:ui(te),te<0&&(te+=we),te=A>te?0:_2(te);A<te;)c[A++]=m;return c}function Xe(c,m){var A=[];return j(c,function(te,we,Re){m(te,we,Re)&&A.push(te)}),A}function Ue(c,m,A,te,we){var Re=-1,it=c.length;for(A||(A=m3),we||(we=[]);++Re<it;){var mt=c[Re];m>0&&A(mt)?m>1?Ue(mt,m-1,A,te,we):Es(we,mt):te||(we[we.length]=mt)}return we}var vt=Ay(),Tt=Ay(!0);function Xt(c,m){return c&&vt(c,m,Xs)}function yn(c,m){return c&&Tt(c,m,Xs)}function wn(c,m){return Ws(m,function(A){return Ac(c[A])})}function ur(c,m){m=Mu(m,c);for(var A=0,te=m.length;c!=null&&A<te;)c=c[rc(m[A++])];return A&&A==te?c:t}function Je(c,m,A){var te=m(c);return ti(c)?te:Es(te,A(c))}function nt(c){return c==null?c===t?Pt:de:Ca&&Ca in Li(c)?c3(c):L3(c)}function ht(c,m){return c>m}function Bt(c,m){return c!=null&&Qr.call(c,m)}function wt(c,m){return c!=null&&m in Li(c)}function Nt(c,m,A){return c>=Se(m,A)&&c<se(m,A)}function ve(c,m,A){for(var te=A?cl:ul,we=c[0].length,Re=c.length,it=Re,mt=kt(Re),Et=1/0,ln=[];it--;){var un=c[it];it&&m&&(un=wi(un,Vr(m))),Et=Se(un.length,Et),mt[it]=!A&&(m||we>=120&&un.length>=120)?new H(it&&un):t}un=c[0];var vn=-1,Un=mt[0];e:for(;++vn<we&&ln.length<Et;){var sr=un[vn],Mr=m?m(sr):sr;if(sr=A||sr!==0?sr:0,!(Un?fl(Un,Mr):te(ln,Mr,A))){for(it=Re;--it;){var fi=mt[it];if(!(fi?fl(fi,Mr):te(c[it],Mr,A)))continue e}Un&&Un.push(Mr),ln.push(sr)}}return ln}function Pe(c,m,A,te){return Xt(c,function(we,Re,it){m(te,A(we),Re,it)}),te}function Be(c,m,A){m=Mu(m,c),c=qy(c,m);var te=c==null?c:c[rc(iu(m))];return te==null?t:bi(te,c,A)}function Oe(c){return os(c)&&nt(c)==ue}function Fe(c){return os(c)&&nt(c)==Qt}function je(c){return os(c)&&nt(c)==D}function ut(c,m,A,te,we){return c===m?!0:c==null||m==null||!os(c)&&!os(m)?c!==c&&m!==m:ct(c,m,A,te,ut,we)}function ct(c,m,A,te,we,Re){var it=ti(c),mt=ti(m),Et=it?le:Aa(c),ln=mt?le:Aa(m);Et=Et==ue?Ze:Et,ln=ln==ue?Ze:ln;var un=Et==Ze,vn=ln==Ze,Un=Et==ln;if(Un&&Qc(c)){if(!Qc(m))return!1;it=!0,un=!1}if(Un&&!un)return Re||(Re=new Ce),it||Eh(c)?jy(c,m,A,te,we,Re):l3(c,m,Et,A,te,we,Re);if(!(A&M)){var sr=un&&Qr.call(c,"__wrapped__"),Mr=vn&&Qr.call(m,"__wrapped__");if(sr||Mr){var fi=sr?c.value():c,Ar=Mr?m.value():m;return Re||(Re=new Ce),we(fi,Ar,A,te,Re)}}return Un?(Re||(Re=new Ce),u3(c,m,A,te,we,Re)):!1}function gt(c){return os(c)&&Aa(c)==ne}function St(c,m,A,te){var we=A.length,Re=we,it=!te;if(c==null)return!Re;for(c=Li(c);we--;){var mt=A[we];if(it&&mt[2]?mt[1]!==c[mt[0]]:!(mt[0]in c))return!1}for(;++we<Re;){mt=A[we];var Et=mt[0],ln=c[Et],un=mt[1];if(it&&mt[2]){if(ln===t&&!(Et in c))return!1}else{var vn=new Ce;if(te)var Un=te(ln,un,Et,c,m,vn);if(!(Un===t?ut(un,ln,M|k,te,vn):Un))return!1}}return!0}function Ct(c){if(!Ko(c)||y3(c))return!1;var m=Ac(c)?Bi:jr;return m.test(jf(c))}function sn(c){return os(c)&&nt(c)==ze}function $n(c){return os(c)&&Aa(c)==Qe}function Hn(c){return os(c)&&og(c.length)&&!!Cr[nt(c)]}function er(c){return typeof c=="function"?c:c==null?vl:typeof c=="object"?ti(c)?Su(c[0],c[1]):vs(c):k2(c)}function vi(c){if(!wd(c))return U(c);var m=[];for(var A in Li(c))Qr.call(c,A)&&A!="constructor"&&m.push(A);return m}function ki(c){if(!Ko(c))return x3(c);var m=wd(c),A=[];for(var te in c)te=="constructor"&&(m||!Qr.call(c,te))||A.push(te);return A}function ei(c,m){return c<m}function Ri(c,m){var A=-1,te=gl(c)?kt(c.length):[];return j(c,function(we,Re,it){te[++A]=m(we,Re,it)}),te}function vs(c){var m=pm(c);return m.length==1&&m[0][2]?Gy(m[0][0],m[0][1]):function(A){return A===c||St(A,c,m)}}function Su(c,m){return mm(c)&&Vy(m)?Gy(rc(c),m):function(A){var te=Em(A,c);return te===t&&te===m?Pm(A,c):ut(m,te,M|k)}}function fa(c,m,A,te,we){c!==m&&vt(m,function(Re,it){if(we||(we=new Ce),Ko(Re))Df(c,m,it,A,fa,te,we);else{var mt=te?te(ym(c,it),Re,it+"",c,m,we):t;mt===t&&(mt=Re),Gt(c,it,mt)}},ml)}function Df(c,m,A,te,we,Re,it){var mt=ym(c,A),Et=ym(m,A),ln=it.get(Et);if(ln){Gt(c,A,ln);return}var un=Re?Re(mt,Et,A+"",c,m,it):t,vn=un===t;if(vn){var Un=ti(Et),sr=!Un&&Qc(Et),Mr=!Un&&!sr&&Eh(Et);un=Et,Un||sr||Mr?ti(mt)?un=mt:ys(mt)?un=pl(mt):sr?(vn=!1,un=Ly(Et,!0)):Mr?(vn=!1,un=Sy(Et,!0)):un=[]:Ld(Et)||zf(Et)?(un=mt,zf(mt)?un=b2(mt):(!Ko(mt)||Ac(mt))&&(un=Uy(Et))):vn=!1}vn&&(it.set(Et,un),we(un,Et,te,Re,it),it.delete(Et)),Gt(c,A,un)}function qa(c,m){var A=c.length;if(A)return m+=m<0?A:0,Mc(m,A)?c[m]:t}function ec(c,m,A){m.length?m=wi(m,function(Re){return ti(Re)?function(it){return ur(it,Re.length===1?Re[0]:Re)}:Re}):m=[vl];var te=-1;m=wi(m,Vr(Er()));var we=Ri(c,function(Re,it,mt){var Et=wi(m,function(ln){return ln(Re)});return{criteria:Et,index:++te,value:Re}});return di(we,function(Re,it){return e3(Re,it,A)})}function ha(c,m){return Zo(c,m,function(A,te){return Pm(c,te)})}function Zo(c,m,A){for(var te=-1,we=m.length,Re={};++te<we;){var it=m[te],mt=ur(c,it);A(mt,it)&&Lc(Re,Mu(it,c),mt)}return Re}function ao(c){return function(m){return ur(m,c)}}function yh(c,m,A,te){var we=te?Dn:fn,Re=-1,it=m.length,mt=c;for(c===m&&(m=pl(m)),A&&(mt=wi(c,Vr(A)));++Re<it;)for(var Et=0,ln=m[Re],un=A?A(ln):ln;(Et=we(mt,un,Et,te))>-1;)mt!==c&&qo.call(mt,Et,1),qo.call(c,Et,1);return c}function If(c,m){for(var A=c?m.length:0,te=A-1;A--;){var we=m[A];if(A==te||we!==Re){var Re=we;Mc(we)?qo.call(c,we,1):Sc(c,we)}}return c}function Of(c,m){return c+No(Ut()*(m-c+1))}function Bf(c,m,A,te){for(var we=-1,Re=se(To((m-c)/(A||1)),0),it=kt(Re);Re--;)it[te?Re:++we]=c,c+=A;return it}function _h(c,m){var A="";if(!c||m<1||m>ie)return A;do m%2&&(A+=c),m=No(m/2),m&&(c+=c);while(m);return A}function li(c,m){return _m(Hy(c,m,vl),c+"")}function bh(c){return It(Ph(c))}function $p(c,m){var A=Ph(c);return Qp(A,Qn(m,0,A.length))}function Lc(c,m,A,te){if(!Ko(c))return c;m=Mu(m,c);for(var we=-1,Re=m.length,it=Re-1,mt=c;mt!=null&&++we<Re;){var Et=rc(m[we]),ln=A;if(Et==="__proto__"||Et==="constructor"||Et==="prototype")return c;if(we!=it){var un=mt[Et];ln=te?te(un,Et,mt):t,ln===t&&(ln=Ko(un)?un:Mc(m[we+1])?[]:{})}pt(mt,Et,ln),mt=mt[Et]}return c}var Cu=Hi?function(c,m){return Hi.set(c,m),c}:vl,Up=Ea?function(c,m){return Ea(c,"toString",{configurable:!0,enumerable:!1,value:Am(m),writable:!0})}:vl;function Vp(c){return Qp(Ph(c))}function dl(c,m,A){var te=-1,we=c.length;m<0&&(m=-m>we?0:we+m),A=A>we?we:A,A<0&&(A+=we),we=m>A?0:A-m>>>0,m>>>=0;for(var Re=kt(we);++te<we;)Re[te]=c[te+m];return Re}function Gp(c,m){var A;return j(c,function(te,we,Re){return A=m(te,we,Re),!A}),!!A}function Eu(c,m,A){var te=0,we=c==null?te:c.length;if(typeof m=="number"&&m===m&&we<=q){for(;te<we;){var Re=te+we>>>1,it=c[Re];it!==null&&!Rl(it)&&(A?it<=m:it<m)?te=Re+1:we=Re}return we}return yd(c,m,vl,A)}function yd(c,m,A,te){var we=0,Re=c==null?0:c.length;if(Re===0)return 0;m=A(m);for(var it=m!==m,mt=m===null,Et=Rl(m),ln=m===t;we<Re;){var un=No((we+Re)/2),vn=A(c[un]),Un=vn!==t,sr=vn===null,Mr=vn===vn,fi=Rl(vn);if(it)var Ar=te||Mr;else ln?Ar=Mr&&(te||Un):mt?Ar=Mr&&Un&&(te||!sr):Et?Ar=Mr&&Un&&!sr&&(te||!fi):sr||fi?Ar=!1:Ar=te?vn<=m:vn<m;Ar?we=un+1:Re=un}return Se(Re,Y)}function _d(c,m){for(var A=-1,te=c.length,we=0,Re=[];++A<te;){var it=c[A],mt=m?m(it):it;if(!A||!Au(mt,Et)){var Et=mt;Re[we++]=it===0?0:it}}return Re}function Hp(c){return typeof c=="number"?c:Rl(c)?Ee:+c}function Ma(c){if(typeof c=="string")return c;if(ti(c))return wi(c,Ma)+"";if(Rl(c))return Wo?Wo.call(c):"";var m=c+"";return m=="0"&&1/c==-1/0?"-0":m}function tc(c,m,A){var te=-1,we=ul,Re=c.length,it=!0,mt=[],Et=mt;if(A)it=!1,we=cl;else if(Re>=i){var ln=m?null:s3(c);if(ln)return ns(ln);it=!1,we=fl,Et=new H}else Et=m?[]:mt;e:for(;++te<Re;){var un=c[te],vn=m?m(un):un;if(un=A||un!==0?un:0,it&&vn===vn){for(var Un=Et.length;Un--;)if(Et[Un]===vn)continue e;m&&Et.push(vn),mt.push(un)}else we(Et,vn,A)||(Et!==mt&&Et.push(vn),mt.push(un))}return mt}function Sc(c,m){return m=Mu(m,c),c=qy(c,m),c==null||delete c[rc(iu(m))]}function wh(c,m,A,te){return Lc(c,m,A(ur(c,m)),te)}function Cc(c,m,A,te){for(var we=c.length,Re=te?we:-1;(te?Re--:++Re<we)&&m(c[Re],Re,c););return A?dl(c,te?0:Re,te?Re+1:we):dl(c,te?Re+1:0,te?we:Re)}function tu(c,m){var A=c;return A instanceof Gr&&(A=A.value()),ba(m,function(te,we){return we.func.apply(we.thisArg,Es([te],we.args))},A)}function nu(c,m,A){var te=c.length;if(te<2)return te?tc(c[0]):[];for(var we=-1,Re=kt(te);++we<te;)for(var it=c[we],mt=-1;++mt<te;)mt!=we&&(Re[we]=C(Re[we]||it,c[mt],m,A));return tc(Ue(Re,1),m,A)}function Pu(c,m,A){for(var te=-1,we=c.length,Re=m.length,it={};++te<we;){var mt=te<Re?m[te]:t;A(it,c[te],mt)}return it}function Xc(c){return ys(c)?c:[]}function Rf(c){return typeof c=="function"?c:vl}function Mu(c,m){return ti(c)?c:mm(c,m)?[c]:Yy(Ki(c))}var am=li;function ru(c,m,A){var te=c.length;return A=A===t?te:A,!m&&A>=te?c:dl(c,m,A)}var xh=Ks||function(c){return no.clearTimeout(c)};function Ly(c,m){if(m)return c.slice();var A=c.length,te=xu?xu(A):new c.constructor(A);return c.copy(te),te}function lm(c){var m=new c.constructor(c.byteLength);return new Rs(m).set(new Rs(c)),m}function Jx(c,m){var A=m?lm(c.buffer):c.buffer;return new c.constructor(A,c.byteOffset,c.byteLength)}function Xx(c){var m=new c.constructor(c.source,Hr.exec(c));return m.lastIndex=c.lastIndex,m}function Qx(c){return mi?Li(mi.call(c)):{}}function Sy(c,m){var A=m?lm(c.buffer):c.buffer;return new c.constructor(A,c.byteOffset,c.length)}function Cy(c,m){if(c!==m){var A=c!==t,te=c===null,we=c===c,Re=Rl(c),it=m!==t,mt=m===null,Et=m===m,ln=Rl(m);if(!mt&&!ln&&!Re&&c>m||Re&&it&&Et&&!mt&&!ln||te&&it&&Et||!A&&Et||!we)return 1;if(!te&&!Re&&!ln&&c<m||ln&&A&&we&&!te&&!Re||mt&&A&&we||!it&&we||!Et)return-1}return 0}function e3(c,m,A){for(var te=-1,we=c.criteria,Re=m.criteria,it=we.length,mt=A.length;++te<it;){var Et=Cy(we[te],Re[te]);if(Et){if(te>=mt)return Et;var ln=A[te];return Et*(ln=="desc"?-1:1)}}return c.index-m.index}function Ey(c,m,A,te){for(var we=-1,Re=c.length,it=A.length,mt=-1,Et=m.length,ln=se(Re-it,0),un=kt(Et+ln),vn=!te;++mt<Et;)un[mt]=m[mt];for(;++we<it;)(vn||we<Re)&&(un[A[we]]=c[we]);for(;ln--;)un[mt++]=c[we++];return un}function Py(c,m,A,te){for(var we=-1,Re=c.length,it=-1,mt=A.length,Et=-1,ln=m.length,un=se(Re-mt,0),vn=kt(un+ln),Un=!te;++we<un;)vn[we]=c[we];for(var sr=we;++Et<ln;)vn[sr+Et]=m[Et];for(;++it<mt;)(Un||we<Re)&&(vn[sr+A[it]]=c[we++]);return vn}function pl(c,m){var A=-1,te=c.length;for(m||(m=kt(te));++A<te;)m[A]=c[A];return m}function nc(c,m,A,te){var we=!A;A||(A={});for(var Re=-1,it=m.length;++Re<it;){var mt=m[Re],Et=te?te(A[mt],c[mt],mt,A,c):t;Et===t&&(Et=c[mt]),we?kn(A,mt,Et):pt(A,mt,Et)}return A}function t3(c,m){return nc(c,gm(c),m)}function n3(c,m){return nc(c,zy(c),m)}function qp(c,m){return function(A,te){var we=ti(A)?Ju:tn,Re=m?m():{};return we(A,c,Er(te,2),Re)}}function Lh(c){return li(function(m,A){var te=-1,we=A.length,Re=we>1?A[we-1]:t,it=we>2?A[2]:t;for(Re=c.length>3&&typeof Re=="function"?(we--,Re):t,it&&Wa(A[0],A[1],it)&&(Re=we<3?t:Re,we=1),m=Li(m);++te<we;){var mt=A[te];mt&&c(m,mt,te,Re)}return m})}function My(c,m){return function(A,te){if(A==null)return A;if(!gl(A))return c(A,te);for(var we=A.length,Re=m?we:-1,it=Li(A);(m?Re--:++Re<we)&&te(it[Re],Re,it)!==!1;);return A}}function Ay(c){return function(m,A,te){for(var we=-1,Re=Li(m),it=te(m),mt=it.length;mt--;){var Et=it[c?mt:++we];if(A(Re[Et],Et,Re)===!1)break}return m}}function r3(c,m,A){var te=m&N,we=bd(c);function Re(){var it=this&&this!==no&&this instanceof Re?we:c;return it.apply(te?A:this,arguments)}return Re}function ky(c){return function(m){m=Ki(m);var A=ra(m)?Vo(m):t,te=A?A[0]:m.charAt(0),we=A?ru(A,1).join(""):m.slice(1);return te[c]()+we}}function Sh(c){return function(m){return ba(M2(P2(m).replace(Nr,"")),c,"")}}function bd(c){return function(){var m=arguments;switch(m.length){case 0:return new c;case 1:return new c(m[0]);case 2:return new c(m[0],m[1]);case 3:return new c(m[0],m[1],m[2]);case 4:return new c(m[0],m[1],m[2],m[3]);case 5:return new c(m[0],m[1],m[2],m[3],m[4]);case 6:return new c(m[0],m[1],m[2],m[3],m[4],m[5]);case 7:return new c(m[0],m[1],m[2],m[3],m[4],m[5],m[6])}var A=ms(c.prototype),te=c.apply(A,m);return Ko(te)?te:A}}function i3(c,m,A){var te=bd(c);function we(){for(var Re=arguments.length,it=kt(Re),mt=Re,Et=Ch(we);mt--;)it[mt]=arguments[mt];var ln=Re<3&&it[0]!==Et&&it[Re-1]!==Et?[]:ts(it,Et);if(Re-=ln.length,Re<A)return Oy(c,m,Wp,we.placeholder,t,it,ln,t,t,A-Re);var un=this&&this!==no&&this instanceof we?te:c;return bi(un,this,it)}return we}function Ty(c){return function(m,A,te){var we=Li(m);if(!gl(m)){var Re=Er(A,3);m=Xs(m),A=function(mt){return Re(we[mt],mt,we)}}var it=c(m,A,te);return it>-1?we[Re?m[it]:it]:t}}function Ny(c){return Pc(function(m){var A=m.length,te=A,we=Io.prototype.thru;for(c&&m.reverse();te--;){var Re=m[te];if(typeof Re!="function")throw new Gi(o);if(we&&!it&&Jp(Re)=="wrapper")var it=new Io([],!0)}for(te=it?te:A;++te<A;){Re=m[te];var mt=Jp(Re),Et=mt=="wrapper"?dm(Re):t;Et&&vm(Et[0])&&Et[1]==(me|K|he|G)&&!Et[4].length&&Et[9]==1?it=it[Jp(Et[0])].apply(it,Et[3]):it=Re.length==1&&vm(Re)?it[mt]():it.thru(Re)}return function(){var ln=arguments,un=ln[0];if(it&&ln.length==1&&ti(un))return it.plant(un).value();for(var vn=0,Un=A?m[vn].apply(this,ln):un;++vn<A;)Un=m[vn].call(this,Un);return Un}})}function Wp(c,m,A,te,we,Re,it,mt,Et,ln){var un=m&me,vn=m&N,Un=m&T,sr=m&(K|Q),Mr=m&$,fi=Un?t:bd(c);function Ar(){for(var Ci=arguments.length,Ti=kt(Ci),Fl=Ci;Fl--;)Ti[Fl]=arguments[Fl];if(sr)var Za=Ch(Ar),jl=na(Ti,Za);if(te&&(Ti=Ey(Ti,te,we,sr)),Re&&(Ti=Py(Ti,Re,it,sr)),Ci-=jl,sr&&Ci<ln){var _s=ts(Ti,Za);return Oy(c,m,Wp,Ar.placeholder,A,Ti,_s,mt,Et,ln-Ci)}var ku=vn?A:this,Tc=Un?ku[c]:c;return Ci=Ti.length,mt?Ti=S3(Ti,mt):Mr&&Ci>1&&Ti.reverse(),un&&Et<Ci&&(Ti.length=Et),this&&this!==no&&this instanceof Ar&&(Tc=fi||bd(Tc)),Tc.apply(ku,Ti)}return Ar}function Dy(c,m){return function(A,te){return Pe(A,c,m(te),{})}}function Zp(c,m){return function(A,te){var we;if(A===t&&te===t)return m;if(A!==t&&(we=A),te!==t){if(we===t)return te;typeof A=="string"||typeof te=="string"?(A=Ma(A),te=Ma(te)):(A=Hp(A),te=Hp(te)),we=c(A,te)}return we}}function um(c){return Pc(function(m){return m=wi(m,Vr(Er())),li(function(A){var te=this;return c(m,function(we){return bi(we,te,A)})})})}function Kp(c,m){m=m===t?" ":Ma(m);var A=m.length;if(A<2)return A?_h(m,c):m;var te=_h(m,To(c/Uo(m)));return ra(m)?ru(Vo(te),0,c).join(""):te.slice(0,c)}function o3(c,m,A,te){var we=m&N,Re=bd(c);function it(){for(var mt=-1,Et=arguments.length,ln=-1,un=te.length,vn=kt(un+Et),Un=this&&this!==no&&this instanceof it?Re:c;++ln<un;)vn[ln]=te[ln];for(;Et--;)vn[ln++]=arguments[++mt];return bi(Un,we?A:this,vn)}return it}function Iy(c){return function(m,A,te){return te&&typeof te!="number"&&Wa(m,A,te)&&(A=te=t),m=kc(m),A===t?(A=m,m=0):A=kc(A),te=te===t?m<A?1:-1:kc(te),Bf(m,A,te,c)}}function Yp(c){return function(m,A){return typeof m=="string"&&typeof A=="string"||(m=ou(m),A=ou(A)),c(m,A)}}function Oy(c,m,A,te,we,Re,it,mt,Et,ln){var un=m&K,vn=un?it:t,Un=un?t:it,sr=un?Re:t,Mr=un?t:Re;m|=un?he:fe,m&=~(un?fe:he),m&F||(m&=-4);var fi=[c,m,we,sr,vn,Mr,Un,mt,Et,ln],Ar=A.apply(t,fi);return vm(c)&&Wy(Ar,fi),Ar.placeholder=te,Zy(Ar,c,m)}function cm(c){var m=Vi[c];return function(A,te){if(A=ou(A),te=te==null?0:Se(ui(te),292),te&&p(A)){var we=(Ki(A)+"e").split("e"),Re=m(we[0]+"e"+(+we[1]+te));return we=(Ki(Re)+"e").split("e"),+(we[0]+"e"+(+we[1]-te))}return m(A)}}var s3=mo&&1/ns(new mo([,-0]))[1]==oe?function(c){return new mo(c)}:Nm;function By(c){return function(m){var A=Aa(m);return A==ne?hl(m):A==Qe?Xu(m):ho(m,c(m))}}function Ec(c,m,A,te,we,Re,it,mt){var Et=m&T;if(!Et&&typeof c!="function")throw new Gi(o);var ln=te?te.length:0;if(ln||(m&=-97,te=we=t),it=it===t?it:se(ui(it),0),mt=mt===t?mt:ui(mt),ln-=we?we.length:0,m&fe){var un=te,vn=we;te=we=t}var Un=Et?t:dm(c),sr=[c,m,A,te,we,un,vn,Re,it,mt];if(Un&&w3(sr,Un),c=sr[0],m=sr[1],A=sr[2],te=sr[3],we=sr[4],mt=sr[9]=sr[9]===t?Et?0:c.length:se(sr[9]-ln,0),!mt&&m&(K|Q)&&(m&=-25),!m||m==N)var Mr=r3(c,m,A);else m==K||m==Q?Mr=i3(c,m,mt):(m==he||m==(N|he))&&!we.length?Mr=o3(c,m,A,te):Mr=Wp.apply(t,sr);var fi=Un?Cu:Wy;return Zy(fi(Mr,sr),c,m)}function Ry(c,m,A,te){return c===t||Au(c,sa[A])&&!Qr.call(te,A)?m:c}function Fy(c,m,A,te,we,Re){return Ko(c)&&Ko(m)&&(Re.set(m,c),fa(c,m,t,Fy,Re),Re.delete(m)),c}function a3(c){return Ld(c)?t:c}function jy(c,m,A,te,we,Re){var it=A&M,mt=c.length,Et=m.length;if(mt!=Et&&!(it&&Et>mt))return!1;var ln=Re.get(c),un=Re.get(m);if(ln&&un)return ln==m&&un==c;var vn=-1,Un=!0,sr=A&k?new H:t;for(Re.set(c,m),Re.set(m,c);++vn<mt;){var Mr=c[vn],fi=m[vn];if(te)var Ar=it?te(fi,Mr,vn,m,c,Re):te(Mr,fi,vn,c,m,Re);if(Ar!==t){if(Ar)continue;Un=!1;break}if(sr){if(!I(m,function(Ci,Ti){if(!fl(sr,Ti)&&(Mr===Ci||we(Mr,Ci,A,te,Re)))return sr.push(Ti)})){Un=!1;break}}else if(!(Mr===fi||we(Mr,fi,A,te,Re))){Un=!1;break}}return Re.delete(c),Re.delete(m),Un}function l3(c,m,A,te,we,Re,it){switch(A){case mn:if(c.byteLength!=m.byteLength||c.byteOffset!=m.byteOffset)return!1;c=c.buffer,m=m.buffer;case Qt:return!(c.byteLength!=m.byteLength||!Re(new Rs(c),new Rs(m)));case Z:case D:case ye:return Au(+c,+m);case Me:return c.name==m.name&&c.message==m.message;case ze:case et:return c==m+"";case ne:var mt=hl;case Qe:var Et=te&M;if(mt||(mt=ns),c.size!=m.size&&!Et)return!1;var ln=it.get(c);if(ln)return ln==m;te|=k,it.set(c,m);var un=jy(mt(c),mt(m),te,we,Re,it);return it.delete(c),un;case bt:if(mi)return mi.call(c)==mi.call(m)}return!1}function u3(c,m,A,te,we,Re){var it=A&M,mt=fm(c),Et=mt.length,ln=fm(m),un=ln.length;if(Et!=un&&!it)return!1;for(var vn=Et;vn--;){var Un=mt[vn];if(!(it?Un in m:Qr.call(m,Un)))return!1}var sr=Re.get(c),Mr=Re.get(m);if(sr&&Mr)return sr==m&&Mr==c;var fi=!0;Re.set(c,m),Re.set(m,c);for(var Ar=it;++vn<Et;){Un=mt[vn];var Ci=c[Un],Ti=m[Un];if(te)var Fl=it?te(Ti,Ci,Un,m,c,Re):te(Ci,Ti,Un,c,m,Re);if(!(Fl===t?Ci===Ti||we(Ci,Ti,A,te,Re):Fl)){fi=!1;break}Ar||(Ar=Un=="constructor")}if(fi&&!Ar){var Za=c.constructor,jl=m.constructor;Za!=jl&&"constructor"in c&&"constructor"in m&&!(typeof Za=="function"&&Za instanceof Za&&typeof jl=="function"&&jl instanceof jl)&&(fi=!1)}return Re.delete(c),Re.delete(m),fi}function Pc(c){return _m(Hy(c,t,e2),c+"")}function fm(c){return Je(c,Xs,gm)}function hm(c){return Je(c,ml,zy)}var dm=Hi?function(c){return Hi.get(c)}:Nm;function Jp(c){for(var m=c.name+"",A=gs[m],te=Qr.call(gs,m)?A.length:0;te--;){var we=A[te],Re=we.func;if(Re==null||Re==c)return we.name}return m}function Ch(c){var m=Qr.call(De,"placeholder")?De:c;return m.placeholder}function Er(){var c=De.iteratee||km;return c=c===km?er:c,arguments.length?c(arguments[0],arguments[1]):c}function Xp(c,m){var A=c.__data__;return v3(m)?A[typeof m=="string"?"string":"hash"]:A.map}function pm(c){for(var m=Xs(c),A=m.length;A--;){var te=m[A],we=c[te];m[A]=[te,we,Vy(we)]}return m}function Ff(c,m){var A=po(c,m);return Ct(A)?A:t}function c3(c){var m=Qr.call(c,Ca),A=c[Ca];try{c[Ca]=t;var te=!0}catch{}var we=Si.call(c);return te&&(m?c[Ca]=A:delete c[Ca]),we}var gm=Ys?function(c){return c==null?[]:(c=Li(c),Ws(Ys(c),function(m){return Oi.call(c,m)}))}:Dm,zy=Ys?function(c){for(var m=[];c;)Es(m,gm(c)),c=ua(c);return m}:Dm,Aa=nt;(In&&Aa(new In(new ArrayBuffer(1)))!=mn||Xn&&Aa(new Xn)!=ne||zr&&Aa(zr.resolve())!=qe||mo&&Aa(new mo)!=Qe||Ji&&Aa(new Ji)!=At)&&(Aa=function(c){var m=nt(c),A=m==Ze?c.constructor:t,te=A?jf(A):"";if(te)switch(te){case wc:return mn;case ca:return ne;case Js:return qe;case Fs:return Qe;case Tf:return At}return m});function f3(c,m,A){for(var te=-1,we=A.length;++te<we;){var Re=A[te],it=Re.size;switch(Re.type){case"drop":c+=it;break;case"dropRight":m-=it;break;case"take":m=Se(m,c+it);break;case"takeRight":c=se(c,m-it);break}}return{start:c,end:m}}function h3(c){var m=c.match(Cn);return m?m[1].split(Lr):[]}function $y(c,m,A){m=Mu(m,c);for(var te=-1,we=m.length,Re=!1;++te<we;){var it=rc(m[te]);if(!(Re=c!=null&&A(c,it)))break;c=c[it]}return Re||++te!=we?Re:(we=c==null?0:c.length,!!we&&og(we)&&Mc(it,we)&&(ti(c)||zf(c)))}function d3(c){var m=c.length,A=new c.constructor(m);return m&&typeof c[0]=="string"&&Qr.call(c,"index")&&(A.index=c.index,A.input=c.input),A}function Uy(c){return typeof c.constructor=="function"&&!wd(c)?ms(ua(c)):{}}function p3(c,m,A){var te=c.constructor;switch(m){case Qt:return lm(c);case Z:case D:return new te(+c);case mn:return Jx(c,A);case Ye:case ot:case rt:case zt:case en:case Bn:case bn:case Nn:case ar:return Sy(c,A);case ne:return new te;case ye:case et:return new te(c);case ze:return Xx(c);case Qe:return new te;case bt:return Qx(c)}}function g3(c,m){var A=m.length;if(!A)return c;var te=A-1;return m[te]=(A>1?"& ":"")+m[te],m=m.join(A>2?", ":" "),c.replace(lt,`{
/* [wrapped with `+m+`] */
`)}function m3(c){return ti(c)||zf(c)||!!(ps&&c&&c[ps])}function Mc(c,m){var A=typeof c;return m=m??ie,!!m&&(A=="number"||A!="symbol"&&ji.test(c))&&c>-1&&c%1==0&&c<m}function Wa(c,m,A){if(!Ko(A))return!1;var te=typeof m;return(te=="number"?gl(A)&&Mc(m,A.length):te=="string"&&m in A)?Au(A[m],c):!1}function mm(c,m){if(ti(c))return!1;var A=typeof c;return A=="number"||A=="symbol"||A=="boolean"||c==null||Rl(c)?!0:qt.test(c)||!Zn.test(c)||m!=null&&c in Li(m)}function v3(c){var m=typeof c;return m=="string"||m=="number"||m=="symbol"||m=="boolean"?c!=="__proto__":c===null}function vm(c){var m=Jp(c),A=De[m];if(typeof A!="function"||!(m in Gr.prototype))return!1;if(c===A)return!0;var te=dm(A);return!!te&&c===te[0]}function y3(c){return!!ko&&ko in c}var _3=aa?Ac:Im;function wd(c){var m=c&&c.constructor,A=typeof m=="function"&&m.prototype||sa;return c===A}function Vy(c){return c===c&&!Ko(c)}function Gy(c,m){return function(A){return A==null?!1:A[c]===m&&(m!==t||c in Li(A))}}function b3(c){var m=rg(c,function(te){return A.size===d&&A.clear(),te}),A=m.cache;return m}function w3(c,m){var A=c[1],te=m[1],we=A|te,Re=we<(N|T|me),it=te==me&&A==K||te==me&&A==G&&c[7].length<=m[8]||te==(me|G)&&m[7].length<=m[8]&&A==K;if(!(Re||it))return c;te&N&&(c[2]=m[2],we|=A&N?0:F);var mt=m[3];if(mt){var Et=c[3];c[3]=Et?Ey(Et,mt,m[4]):mt,c[4]=Et?ts(c[3],g):m[4]}return mt=m[5],mt&&(Et=c[5],c[5]=Et?Py(Et,mt,m[6]):mt,c[6]=Et?ts(c[5],g):m[6]),mt=m[7],mt&&(c[7]=mt),te&me&&(c[8]=c[8]==null?m[8]:Se(c[8],m[8])),c[9]==null&&(c[9]=m[9]),c[0]=m[0],c[1]=we,c}function x3(c){var m=[];if(c!=null)for(var A in Li(c))m.push(A);return m}function L3(c){return Si.call(c)}function Hy(c,m,A){return m=se(m===t?c.length-1:m,0),function(){for(var te=arguments,we=-1,Re=se(te.length-m,0),it=kt(Re);++we<Re;)it[we]=te[m+we];we=-1;for(var mt=kt(m+1);++we<m;)mt[we]=te[we];return mt[m]=A(it),bi(c,this,mt)}}function qy(c,m){return m.length<2?c:ur(c,dl(m,0,-1))}function S3(c,m){for(var A=c.length,te=Se(m.length,A),we=pl(c);te--;){var Re=m[te];c[te]=Mc(Re,A)?we[Re]:t}return c}function ym(c,m){if(!(m==="constructor"&&typeof c[m]=="function")&&m!="__proto__")return c[m]}var Wy=Ky(Cu),xd=bc||function(c,m){return no.setTimeout(c,m)},_m=Ky(Up);function Zy(c,m,A){var te=m+"";return _m(c,g3(te,C3(h3(te),A)))}function Ky(c){var m=0,A=0;return function(){var te=st(),we=B-(te-A);if(A=te,we>0){if(++m>=O)return arguments[0]}else m=0;return c.apply(t,arguments)}}function Qp(c,m){var A=-1,te=c.length,we=te-1;for(m=m===t?te:m;++A<m;){var Re=Of(A,we),it=c[Re];c[Re]=c[A],c[A]=it}return c.length=m,c}var Yy=b3(function(c){var m=[];return c.charCodeAt(0)===46&&m.push(""),c.replace(gn,function(A,te,we,Re){m.push(we?Re.replace(Pr,"$1"):te||A)}),m});function rc(c){if(typeof c=="string"||Rl(c))return c;var m=c+"";return m=="0"&&1/c==-1/0?"-0":m}function jf(c){if(c!=null){try{return la.call(c)}catch{}try{return c+""}catch{}}return""}function C3(c,m){return Mo(ee,function(A){var te="_."+A[0];m&A[1]&&!ul(c,te)&&c.push(te)}),c.sort()}function Jy(c){if(c instanceof Gr)return c.clone();var m=new Io(c.__wrapped__,c.__chain__);return m.__actions__=pl(c.__actions__),m.__index__=c.__index__,m.__values__=c.__values__,m}function E3(c,m,A){(A?Wa(c,m,A):m===t)?m=1:m=se(ui(m),0);var te=c==null?0:c.length;if(!te||m<1)return[];for(var we=0,Re=0,it=kt(To(te/m));we<te;)it[Re++]=dl(c,we,we+=m);return it}function P3(c){for(var m=-1,A=c==null?0:c.length,te=0,we=[];++m<A;){var Re=c[m];Re&&(we[te++]=Re)}return we}function M3(){var c=arguments.length;if(!c)return[];for(var m=kt(c-1),A=arguments[0],te=c;te--;)m[te-1]=arguments[te];return Es(ti(A)?pl(A):[A],Ue(m,1))}var A3=li(function(c,m){return ys(c)?C(c,Ue(m,1,ys,!0)):[]}),k3=li(function(c,m){var A=iu(m);return ys(A)&&(A=t),ys(c)?C(c,Ue(m,1,ys,!0),Er(A,2)):[]}),T3=li(function(c,m){var A=iu(m);return ys(A)&&(A=t),ys(c)?C(c,Ue(m,1,ys,!0),t,A):[]});function N3(c,m,A){var te=c==null?0:c.length;return te?(m=A||m===t?1:ui(m),dl(c,m<0?0:m,te)):[]}function D3(c,m,A){var te=c==null?0:c.length;return te?(m=A||m===t?1:ui(m),m=te-m,dl(c,0,m<0?0:m)):[]}function I3(c,m){return c&&c.length?Cc(c,Er(m,3),!0,!0):[]}function O3(c,m){return c&&c.length?Cc(c,Er(m,3),!0):[]}function B3(c,m,A,te){var we=c==null?0:c.length;return we?(A&&typeof A!="number"&&Wa(c,m,A)&&(A=0,te=we),Le(c,m,A,te)):[]}function Xy(c,m,A){var te=c==null?0:c.length;if(!te)return-1;var we=A==null?0:ui(A);return we<0&&(we=se(te+we,0)),$t(c,Er(m,3),we)}function Qy(c,m,A){var te=c==null?0:c.length;if(!te)return-1;var we=te-1;return A!==t&&(we=ui(A),we=A<0?se(te+we,0):Se(we,te-1)),$t(c,Er(m,3),we,!0)}function e2(c){var m=c==null?0:c.length;return m?Ue(c,1):[]}function R3(c){var m=c==null?0:c.length;return m?Ue(c,oe):[]}function F3(c,m){var A=c==null?0:c.length;return A?(m=m===t?1:ui(m),Ue(c,m)):[]}function j3(c){for(var m=-1,A=c==null?0:c.length,te={};++m<A;){var we=c[m];te[we[0]]=we[1]}return te}function t2(c){return c&&c.length?c[0]:t}function z3(c,m,A){var te=c==null?0:c.length;if(!te)return-1;var we=A==null?0:ui(A);return we<0&&(we=se(te+we,0)),fn(c,m,we)}function $3(c){var m=c==null?0:c.length;return m?dl(c,0,-1):[]}var U3=li(function(c){var m=wi(c,Xc);return m.length&&m[0]===c[0]?ve(m):[]}),V3=li(function(c){var m=iu(c),A=wi(c,Xc);return m===iu(A)?m=t:A.pop(),A.length&&A[0]===c[0]?ve(A,Er(m,2)):[]}),G3=li(function(c){var m=iu(c),A=wi(c,Xc);return m=typeof m=="function"?m:t,m&&A.pop(),A.length&&A[0]===c[0]?ve(A,t,m):[]});function H3(c,m){return c==null?"":S.call(c,m)}function iu(c){var m=c==null?0:c.length;return m?c[m-1]:t}function q3(c,m,A){var te=c==null?0:c.length;if(!te)return-1;var we=te;return A!==t&&(we=ui(A),we=we<0?se(te+we,0):Se(we,te-1)),m===m?wa(c,m,we):$t(c,zn,we,!0)}function W3(c,m){return c&&c.length?qa(c,ui(m)):t}var Z3=li(n2);function n2(c,m){return c&&c.length&&m&&m.length?yh(c,m):c}function K3(c,m,A){return c&&c.length&&m&&m.length?yh(c,m,Er(A,2)):c}function Y3(c,m,A){return c&&c.length&&m&&m.length?yh(c,m,t,A):c}var J3=Pc(function(c,m){var A=c==null?0:c.length,te=Sn(c,m);return If(c,wi(m,function(we){return Mc(we,A)?+we:we}).sort(Cy)),te});function X3(c,m){var A=[];if(!(c&&c.length))return A;var te=-1,we=[],Re=c.length;for(m=Er(m,3);++te<Re;){var it=c[te];m(it,te,c)&&(A.push(it),we.push(te))}return If(c,we),A}function bm(c){return c==null?c:an.call(c)}function Q3(c,m,A){var te=c==null?0:c.length;return te?(A&&typeof A!="number"&&Wa(c,m,A)?(m=0,A=te):(m=m==null?0:ui(m),A=A===t?te:ui(A)),dl(c,m,A)):[]}function eL(c,m){return Eu(c,m)}function tL(c,m,A){return yd(c,m,Er(A,2))}function nL(c,m){var A=c==null?0:c.length;if(A){var te=Eu(c,m);if(te<A&&Au(c[te],m))return te}return-1}function rL(c,m){return Eu(c,m,!0)}function iL(c,m,A){return yd(c,m,Er(A,2),!0)}function oL(c,m){var A=c==null?0:c.length;if(A){var te=Eu(c,m,!0)-1;if(Au(c[te],m))return te}return-1}function sL(c){return c&&c.length?_d(c):[]}function aL(c,m){return c&&c.length?_d(c,Er(m,2)):[]}function lL(c){var m=c==null?0:c.length;return m?dl(c,1,m):[]}function uL(c,m,A){return c&&c.length?(m=A||m===t?1:ui(m),dl(c,0,m<0?0:m)):[]}function cL(c,m,A){var te=c==null?0:c.length;return te?(m=A||m===t?1:ui(m),m=te-m,dl(c,m<0?0:m,te)):[]}function fL(c,m){return c&&c.length?Cc(c,Er(m,3),!1,!0):[]}function hL(c,m){return c&&c.length?Cc(c,Er(m,3)):[]}var dL=li(function(c){return tc(Ue(c,1,ys,!0))}),pL=li(function(c){var m=iu(c);return ys(m)&&(m=t),tc(Ue(c,1,ys,!0),Er(m,2))}),gL=li(function(c){var m=iu(c);return m=typeof m=="function"?m:t,tc(Ue(c,1,ys,!0),t,m)});function mL(c){return c&&c.length?tc(c):[]}function vL(c,m){return c&&c.length?tc(c,Er(m,2)):[]}function yL(c,m){return m=typeof m=="function"?m:t,c&&c.length?tc(c,t,m):[]}function wm(c){if(!(c&&c.length))return[];var m=0;return c=Ws(c,function(A){if(ys(A))return m=se(A.length,m),!0}),oo(m,function(A){return wi(c,vr(A))})}function r2(c,m){if(!(c&&c.length))return[];var A=wm(c);return m==null?A:wi(A,function(te){return bi(m,t,te)})}var _L=li(function(c,m){return ys(c)?C(c,m):[]}),bL=li(function(c){return nu(Ws(c,ys))}),wL=li(function(c){var m=iu(c);return ys(m)&&(m=t),nu(Ws(c,ys),Er(m,2))}),xL=li(function(c){var m=iu(c);return m=typeof m=="function"?m:t,nu(Ws(c,ys),t,m)}),LL=li(wm);function SL(c,m){return Pu(c||[],m||[],pt)}function CL(c,m){return Pu(c||[],m||[],Lc)}var EL=li(function(c){var m=c.length,A=m>1?c[m-1]:t;return A=typeof A=="function"?(c.pop(),A):t,r2(c,A)});function i2(c){var m=De(c);return m.__chain__=!0,m}function PL(c,m){return m(c),c}function eg(c,m){return m(c)}var ML=Pc(function(c){var m=c.length,A=m?c[0]:0,te=this.__wrapped__,we=function(Re){return Sn(Re,c)};return m>1||this.__actions__.length||!(te instanceof Gr)||!Mc(A)?this.thru(we):(te=te.slice(A,+A+(m?1:0)),te.__actions__.push({func:eg,args:[we],thisArg:t}),new Io(te,this.__chain__).thru(function(Re){return m&&!Re.length&&Re.push(t),Re}))});function AL(){return i2(this)}function kL(){return new Io(this.value(),this.__chain__)}function TL(){this.__values__===t&&(this.__values__=y2(this.value()));var c=this.__index__>=this.__values__.length,m=c?t:this.__values__[this.__index__++];return{done:c,value:m}}function NL(){return this}function DL(c){for(var m,A=this;A instanceof Lu;){var te=Jy(A);te.__index__=0,te.__values__=t,m?we.__wrapped__=te:m=te;var we=te;A=A.__wrapped__}return we.__wrapped__=c,m}function IL(){var c=this.__wrapped__;if(c instanceof Gr){var m=c;return this.__actions__.length&&(m=new Gr(this)),m=m.reverse(),m.__actions__.push({func:eg,args:[bm],thisArg:t}),new Io(m,this.__chain__)}return this.thru(bm)}function OL(){return tu(this.__wrapped__,this.__actions__)}var BL=qp(function(c,m,A){Qr.call(c,A)?++c[A]:kn(c,A,1)});function RL(c,m,A){var te=ti(c)?Il:re;return A&&Wa(c,m,A)&&(m=t),te(c,Er(m,3))}function FL(c,m){var A=ti(c)?Ws:Xe;return A(c,Er(m,3))}var jL=Ty(Xy),zL=Ty(Qy);function $L(c,m){return Ue(tg(c,m),1)}function UL(c,m){return Ue(tg(c,m),oe)}function VL(c,m,A){return A=A===t?1:ui(A),Ue(tg(c,m),A)}function o2(c,m){var A=ti(c)?Mo:j;return A(c,Er(m,3))}function s2(c,m){var A=ti(c)?qs:J;return A(c,Er(m,3))}var GL=qp(function(c,m,A){Qr.call(c,A)?c[A].push(m):kn(c,A,[m])});function HL(c,m,A,te){c=gl(c)?c:Ph(c),A=A&&!te?ui(A):0;var we=c.length;return A<0&&(A=se(we+A,0)),sg(c)?A<=we&&c.indexOf(m,A)>-1:!!we&&fn(c,m,A)>-1}var qL=li(function(c,m,A){var te=-1,we=typeof m=="function",Re=gl(c)?kt(c.length):[];return j(c,function(it){Re[++te]=we?bi(m,it,A):Be(it,m,A)}),Re}),WL=qp(function(c,m,A){kn(c,A,m)});function tg(c,m){var A=ti(c)?wi:Ri;return A(c,Er(m,3))}function ZL(c,m,A,te){return c==null?[]:(ti(m)||(m=m==null?[]:[m]),A=te?t:A,ti(A)||(A=A==null?[]:[A]),ec(c,m,A))}var KL=qp(function(c,m,A){c[A?0:1].push(m)},function(){return[[],[]]});function YL(c,m,A){var te=ti(c)?ba:$i,we=arguments.length<3;return te(c,Er(m,4),A,we,j)}function JL(c,m,A){var te=ti(c)?io:$i,we=arguments.length<3;return te(c,Er(m,4),A,we,J)}function XL(c,m){var A=ti(c)?Ws:Xe;return A(c,ig(Er(m,3)))}function QL(c){var m=ti(c)?It:bh;return m(c)}function eS(c,m,A){(A?Wa(c,m,A):m===t)?m=1:m=ui(m);var te=ti(c)?xt:$p;return te(c,m)}function tS(c){var m=ti(c)?Yt:Vp;return m(c)}function nS(c){if(c==null)return 0;if(gl(c))return sg(c)?Uo(c):c.length;var m=Aa(c);return m==ne||m==Qe?c.size:vi(c).length}function rS(c,m,A){var te=ti(c)?I:Gp;return A&&Wa(c,m,A)&&(m=t),te(c,Er(m,3))}var iS=li(function(c,m){if(c==null)return[];var A=m.length;return A>1&&Wa(c,m[0],m[1])?m=[]:A>2&&Wa(m[0],m[1],m[2])&&(m=[m[0]]),ec(c,Ue(m,1),[])}),ng=is||function(){return no.Date.now()};function oS(c,m){if(typeof m!="function")throw new Gi(o);return c=ui(c),function(){if(--c<1)return m.apply(this,arguments)}}function a2(c,m,A){return m=A?t:m,m=c&&m==null?c.length:m,Ec(c,me,t,t,t,t,m)}function l2(c,m){var A;if(typeof m!="function")throw new Gi(o);return c=ui(c),function(){return--c>0&&(A=m.apply(this,arguments)),c<=1&&(m=t),A}}var xm=li(function(c,m,A){var te=N;if(A.length){var we=ts(A,Ch(xm));te|=he}return Ec(c,te,m,A,we)}),u2=li(function(c,m,A){var te=N|T;if(A.length){var we=ts(A,Ch(u2));te|=he}return Ec(m,te,c,A,we)});function c2(c,m,A){m=A?t:m;var te=Ec(c,K,t,t,t,t,t,m);return te.placeholder=c2.placeholder,te}function f2(c,m,A){m=A?t:m;var te=Ec(c,Q,t,t,t,t,t,m);return te.placeholder=f2.placeholder,te}function h2(c,m,A){var te,we,Re,it,mt,Et,ln=0,un=!1,vn=!1,Un=!0;if(typeof c!="function")throw new Gi(o);m=ou(m)||0,Ko(A)&&(un=!!A.leading,vn="maxWait"in A,Re=vn?se(ou(A.maxWait)||0,m):Re,Un="trailing"in A?!!A.trailing:Un);function sr(_s){var ku=te,Tc=we;return te=we=t,ln=_s,it=c.apply(Tc,ku),it}function Mr(_s){return ln=_s,mt=xd(Ci,m),un?sr(_s):it}function fi(_s){var ku=_s-Et,Tc=_s-ln,T2=m-ku;return vn?Se(T2,Re-Tc):T2}function Ar(_s){var ku=_s-Et,Tc=_s-ln;return Et===t||ku>=m||ku<0||vn&&Tc>=Re}function Ci(){var _s=ng();if(Ar(_s))return Ti(_s);mt=xd(Ci,fi(_s))}function Ti(_s){return mt=t,Un&&te?sr(_s):(te=we=t,it)}function Fl(){mt!==t&&xh(mt),ln=0,te=Et=we=mt=t}function Za(){return mt===t?it:Ti(ng())}function jl(){var _s=ng(),ku=Ar(_s);if(te=arguments,we=this,Et=_s,ku){if(mt===t)return Mr(Et);if(vn)return xh(mt),mt=xd(Ci,m),sr(Et)}return mt===t&&(mt=xd(Ci,m)),it}return jl.cancel=Fl,jl.flush=Za,jl}var sS=li(function(c,m){return w(c,1,m)}),aS=li(function(c,m,A){return w(c,ou(m)||0,A)});function lS(c){return Ec(c,$)}function rg(c,m){if(typeof c!="function"||m!=null&&typeof m!="function")throw new Gi(o);var A=function(){var te=arguments,we=m?m.apply(this,te):te[0],Re=A.cache;if(Re.has(we))return Re.get(we);var it=c.apply(this,te);return A.cache=Re.set(we,it)||Re,it};return A.cache=new(rg.Cache||Pa),A}rg.Cache=Pa;function ig(c){if(typeof c!="function")throw new Gi(o);return function(){var m=arguments;switch(m.length){case 0:return!c.call(this);case 1:return!c.call(this,m[0]);case 2:return!c.call(this,m[0],m[1]);case 3:return!c.call(this,m[0],m[1],m[2])}return!c.apply(this,m)}}function uS(c){return l2(2,c)}var cS=am(function(c,m){m=m.length==1&&ti(m[0])?wi(m[0],Vr(Er())):wi(Ue(m,1),Vr(Er()));var A=m.length;return li(function(te){for(var we=-1,Re=Se(te.length,A);++we<Re;)te[we]=m[we].call(this,te[we]);return bi(c,this,te)})}),Lm=li(function(c,m){var A=ts(m,Ch(Lm));return Ec(c,he,t,m,A)}),d2=li(function(c,m){var A=ts(m,Ch(d2));return Ec(c,fe,t,m,A)}),fS=Pc(function(c,m){return Ec(c,G,t,t,t,m)});function hS(c,m){if(typeof c!="function")throw new Gi(o);return m=m===t?m:ui(m),li(c,m)}function dS(c,m){if(typeof c!="function")throw new Gi(o);return m=m==null?0:se(ui(m),0),li(function(A){var te=A[m],we=ru(A,0,m);return te&&Es(we,te),bi(c,this,we)})}function pS(c,m,A){var te=!0,we=!0;if(typeof c!="function")throw new Gi(o);return Ko(A)&&(te="leading"in A?!!A.leading:te,we="trailing"in A?!!A.trailing:we),h2(c,m,{leading:te,maxWait:m,trailing:we})}function gS(c){return a2(c,1)}function mS(c,m){return Lm(Rf(m),c)}function vS(){if(!arguments.length)return[];var c=arguments[0];return ti(c)?c:[c]}function yS(c){return l(c,_)}function _S(c,m){return m=typeof m=="function"?m:t,l(c,_,m)}function bS(c){return l(c,y|_)}function wS(c,m){return m=typeof m=="function"?m:t,l(c,y|_,m)}function xS(c,m){return m==null||v(c,m,Xs(m))}function Au(c,m){return c===m||c!==c&&m!==m}var LS=Yp(ht),SS=Yp(function(c,m){return c>=m}),zf=Oe(function(){return arguments}())?Oe:function(c){return os(c)&&Qr.call(c,"callee")&&!Oi.call(c,"callee")},ti=kt.isArray,CS=Xl?Vr(Xl):Fe;function gl(c){return c!=null&&og(c.length)&&!Ac(c)}function ys(c){return os(c)&&gl(c)}function ES(c){return c===!0||c===!1||os(c)&&nt(c)==Z}var Qc=a||Im,PS=ta?Vr(ta):je;function MS(c){return os(c)&&c.nodeType===1&&!Ld(c)}function AS(c){if(c==null)return!0;if(gl(c)&&(ti(c)||typeof c=="string"||typeof c.splice=="function"||Qc(c)||Eh(c)||zf(c)))return!c.length;var m=Aa(c);if(m==ne||m==Qe)return!c.size;if(wd(c))return!vi(c).length;for(var A in c)if(Qr.call(c,A))return!1;return!0}function kS(c,m){return ut(c,m)}function TS(c,m,A){A=typeof A=="function"?A:t;var te=A?A(c,m):t;return te===t?ut(c,m,t,A):!!te}function Sm(c){if(!os(c))return!1;var m=nt(c);return m==Me||m==ke||typeof c.message=="string"&&typeof c.name=="string"&&!Ld(c)}function NS(c){return typeof c=="number"&&p(c)}function Ac(c){if(!Ko(c))return!1;var m=nt(c);return m==Ge||m==ce||m==pe||m==tt}function p2(c){return typeof c=="number"&&c==ui(c)}function og(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=ie}function Ko(c){var m=typeof c;return c!=null&&(m=="object"||m=="function")}function os(c){return c!=null&&typeof c=="object"}var g2=Tl?Vr(Tl):gt;function DS(c,m){return c===m||St(c,m,pm(m))}function IS(c,m,A){return A=typeof A=="function"?A:t,St(c,m,pm(m),A)}function OS(c){return m2(c)&&c!=+c}function BS(c){if(_3(c))throw new Kn(s);return Ct(c)}function RS(c){return c===null}function FS(c){return c==null}function m2(c){return typeof c=="number"||os(c)&&nt(c)==ye}function Ld(c){if(!os(c)||nt(c)!=Ze)return!1;var m=ua(c);if(m===null)return!0;var A=Qr.call(m,"constructor")&&m.constructor;return typeof A=="function"&&A instanceof A&&la.call(A)==Ai}var Cm=Nl?Vr(Nl):sn;function jS(c){return p2(c)&&c>=-9007199254740991&&c<=ie}var v2=Bs?Vr(Bs):$n;function sg(c){return typeof c=="string"||!ti(c)&&os(c)&&nt(c)==et}function Rl(c){return typeof c=="symbol"||os(c)&&nt(c)==bt}var Eh=Dl?Vr(Dl):Hn;function zS(c){return c===t}function $S(c){return os(c)&&Aa(c)==At}function US(c){return os(c)&&nt(c)==Vt}var VS=Yp(ei),GS=Yp(function(c,m){return c<=m});function y2(c){if(!c)return[];if(gl(c))return sg(c)?Vo(c):pl(c);if(pr&&c[pr])return hs(c[pr]());var m=Aa(c),A=m==ne?hl:m==Qe?ns:Ph;return A(c)}function kc(c){if(!c)return c===0?c:0;if(c=ou(c),c===oe||c===-1/0){var m=c<0?-1:1;return m*xe}return c===c?c:0}function ui(c){var m=kc(c),A=m%1;return m===m?A?m-A:m:0}function _2(c){return c?Qn(ui(c),0,Te):0}function ou(c){if(typeof c=="number")return c;if(Rl(c))return Ee;if(Ko(c)){var m=typeof c.valueOf=="function"?c.valueOf():c;c=Ko(m)?m+"":m}if(typeof c!="string")return c===0?c:+c;c=Ps(c);var A=Or.test(c);return A||on.test(c)?kl(c.slice(2),A?2:8):ir.test(c)?Ee:+c}function b2(c){return nc(c,ml(c))}function HS(c){return c?Qn(ui(c),-9007199254740991,ie):c===0?c:0}function Ki(c){return c==null?"":Ma(c)}var qS=Lh(function(c,m){if(wd(m)||gl(m)){nc(m,Xs(m),c);return}for(var A in m)Qr.call(m,A)&&pt(c,A,m[A])}),w2=Lh(function(c,m){nc(m,ml(m),c)}),ag=Lh(function(c,m,A,te){nc(m,ml(m),c,te)}),WS=Lh(function(c,m,A,te){nc(m,Xs(m),c,te)}),ZS=Pc(Sn);function KS(c,m){var A=ms(c);return m==null?A:hn(A,m)}var YS=li(function(c,m){c=Li(c);var A=-1,te=m.length,we=te>2?m[2]:t;for(we&&Wa(m[0],m[1],we)&&(te=1);++A<te;)for(var Re=m[A],it=ml(Re),mt=-1,Et=it.length;++mt<Et;){var ln=it[mt],un=c[ln];(un===t||Au(un,sa[ln])&&!Qr.call(c,ln))&&(c[ln]=Re[ln])}return c}),JS=li(function(c){return c.push(t,Fy),bi(x2,t,c)});function XS(c,m){return Lt(c,Er(m,3),Xt)}function QS(c,m){return Lt(c,Er(m,3),yn)}function eC(c,m){return c==null?c:vt(c,Er(m,3),ml)}function tC(c,m){return c==null?c:Tt(c,Er(m,3),ml)}function nC(c,m){return c&&Xt(c,Er(m,3))}function rC(c,m){return c&&yn(c,Er(m,3))}function iC(c){return c==null?[]:wn(c,Xs(c))}function oC(c){return c==null?[]:wn(c,ml(c))}function Em(c,m,A){var te=c==null?t:ur(c,m);return te===t?A:te}function sC(c,m){return c!=null&&$y(c,m,Bt)}function Pm(c,m){return c!=null&&$y(c,m,wt)}var aC=Dy(function(c,m,A){m!=null&&typeof m.toString!="function"&&(m=Si.call(m)),c[m]=A},Am(vl)),lC=Dy(function(c,m,A){m!=null&&typeof m.toString!="function"&&(m=Si.call(m)),Qr.call(c,m)?c[m].push(A):c[m]=[A]},Er),uC=li(Be);function Xs(c){return gl(c)?Dt(c):vi(c)}function ml(c){return gl(c)?Dt(c,!0):ki(c)}function cC(c,m){var A={};return m=Er(m,3),Xt(c,function(te,we,Re){kn(A,m(te,we,Re),te)}),A}function fC(c,m){var A={};return m=Er(m,3),Xt(c,function(te,we,Re){kn(A,we,m(te,we,Re))}),A}var hC=Lh(function(c,m,A){fa(c,m,A)}),x2=Lh(function(c,m,A,te){fa(c,m,A,te)}),dC=Pc(function(c,m){var A={};if(c==null)return A;var te=!1;m=wi(m,function(Re){return Re=Mu(Re,c),te||(te=Re.length>1),Re}),nc(c,hm(c),A),te&&(A=l(A,y|x|_,a3));for(var we=m.length;we--;)Sc(A,m[we]);return A});function pC(c,m){return L2(c,ig(Er(m)))}var gC=Pc(function(c,m){return c==null?{}:ha(c,m)});function L2(c,m){if(c==null)return{};var A=wi(hm(c),function(te){return[te]});return m=Er(m),Zo(c,A,function(te,we){return m(te,we[0])})}function mC(c,m,A){m=Mu(m,c);var te=-1,we=m.length;for(we||(we=1,c=t);++te<we;){var Re=c==null?t:c[rc(m[te])];Re===t&&(te=we,Re=A),c=Ac(Re)?Re.call(c):Re}return c}function vC(c,m,A){return c==null?c:Lc(c,m,A)}function yC(c,m,A,te){return te=typeof te=="function"?te:t,c==null?c:Lc(c,m,A,te)}var S2=By(Xs),C2=By(ml);function _C(c,m,A){var te=ti(c),we=te||Qc(c)||Eh(c);if(m=Er(m,4),A==null){var Re=c&&c.constructor;we?A=te?new Re:[]:Ko(c)?A=Ac(Re)?ms(ua(c)):{}:A={}}return(we?Mo:Xt)(c,function(it,mt,Et){return m(A,it,mt,Et)}),A}function bC(c,m){return c==null?!0:Sc(c,m)}function wC(c,m,A){return c==null?c:wh(c,m,Rf(A))}function xC(c,m,A,te){return te=typeof te=="function"?te:t,c==null?c:wh(c,m,Rf(A),te)}function Ph(c){return c==null?[]:zo(c,Xs(c))}function LC(c){return c==null?[]:zo(c,ml(c))}function SC(c,m,A){return A===t&&(A=m,m=t),A!==t&&(A=ou(A),A=A===A?A:0),m!==t&&(m=ou(m),m=m===m?m:0),Qn(ou(c),m,A)}function CC(c,m,A){return m=kc(m),A===t?(A=m,m=0):A=kc(A),c=ou(c),Nt(c,m,A)}function EC(c,m,A){if(A&&typeof A!="boolean"&&Wa(c,m,A)&&(m=A=t),A===t&&(typeof m=="boolean"?(A=m,m=t):typeof c=="boolean"&&(A=c,c=t)),c===t&&m===t?(c=0,m=1):(c=kc(c),m===t?(m=c,c=0):m=kc(m)),c>m){var te=c;c=m,m=te}if(A||c%1||m%1){var we=Ut();return Se(c+we*(m-c+al("1e-"+((we+"").length-1))),m)}return Of(c,m)}var PC=Sh(function(c,m,A){return m=m.toLowerCase(),c+(A?E2(m):m)});function E2(c){return Mm(Ki(c).toLowerCase())}function P2(c){return c=Ki(c),c&&c.replace(_i,wu).replace(jo,"")}function MC(c,m,A){c=Ki(c),m=Ma(m);var te=c.length;A=A===t?te:Qn(ui(A),0,te);var we=A;return A-=m.length,A>=0&&c.slice(A,we)==m}function AC(c){return c=Ki(c),c&&We.test(c)?c.replace(yr,Va):c}function kC(c){return c=Ki(c),c&&Kt.test(c)?c.replace(Rt,"\\$&"):c}var TC=Sh(function(c,m,A){return c+(A?"-":"")+m.toLowerCase()}),NC=Sh(function(c,m,A){return c+(A?" ":"")+m.toLowerCase()}),DC=ky("toLowerCase");function IC(c,m,A){c=Ki(c),m=ui(m);var te=m?Uo(c):0;if(!m||te>=m)return c;var we=(m-te)/2;return Kp(No(we),A)+c+Kp(To(we),A)}function OC(c,m,A){c=Ki(c),m=ui(m);var te=m?Uo(c):0;return m&&te<m?c+Kp(m-te,A):c}function BC(c,m,A){c=Ki(c),m=ui(m);var te=m?Uo(c):0;return m&&te<m?Kp(m-te,A)+c:c}function RC(c,m,A){return A||m==null?m=0:m&&(m=+m),Mt(Ki(c).replace(Ln,""),m||0)}function FC(c,m,A){return(A?Wa(c,m,A):m===t)?m=1:m=ui(m),_h(Ki(c),m)}function jC(){var c=arguments,m=Ki(c[0]);return c.length<3?m:m.replace(c[1],c[2])}var zC=Sh(function(c,m,A){return c+(A?"_":"")+m.toLowerCase()});function $C(c,m,A){return A&&typeof A!="number"&&Wa(c,m,A)&&(m=A=t),A=A===t?Te:A>>>0,A?(c=Ki(c),c&&(typeof m=="string"||m!=null&&!Cm(m))&&(m=Ma(m),!m&&ra(c))?ru(Vo(c),0,A):c.split(m,A)):[]}var UC=Sh(function(c,m,A){return c+(A?" ":"")+Mm(m)});function VC(c,m,A){return c=Ki(c),A=A==null?0:Qn(ui(A),0,c.length),m=Ma(m),c.slice(A,A+m.length)==m}function GC(c,m,A){var te=De.templateSettings;A&&Wa(c,m,A)&&(m=t),c=Ki(c),m=ag({},m,te,Ry);var we=ag({},m.imports,te.imports,Ry),Re=Xs(we),it=zo(we,Re),mt,Et,ln=0,un=m.interpolate||gi,vn="__p += '",Un=Ol((m.escape||gi).source+"|"+un.source+"|"+(un===Jn?lr:gi).source+"|"+(m.evaluate||gi).source+"|$","g"),sr="//# sourceURL="+(Qr.call(m,"sourceURL")?(m.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ml+"]")+`
`;c.replace(Un,function(Ar,Ci,Ti,Fl,Za,jl){return Ti||(Ti=Fl),vn+=c.slice(ln,jl).replace(Kr,Ga),Ci&&(mt=!0,vn+=`' +
__e(`+Ci+`) +
'`),Za&&(Et=!0,vn+=`';
`+Za+`;
__p += '`),Ti&&(vn+=`' +
((__t = (`+Ti+`)) == null ? '' : __t) +
'`),ln=jl+Ar.length,Ar}),vn+=`';
`;var Mr=Qr.call(m,"variable")&&m.variable;if(!Mr)vn=`with (obj) {
`+vn+`
}
`;else if(Fr.test(Mr))throw new Kn(u);vn=(Et?vn.replace(xn,""):vn).replace(Mn,"$1").replace(Pn,"$1;"),vn="function("+(Mr||"obj")+`) {
`+(Mr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(mt?", __e = _.escape":"")+(Et?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+vn+`return __p
}`;var fi=A2(function(){return wr(Re,sr+"return "+vn).apply(t,it)});if(fi.source=vn,Sm(fi))throw fi;return fi}function HC(c){return Ki(c).toLowerCase()}function qC(c){return Ki(c).toUpperCase()}function WC(c,m,A){if(c=Ki(c),c&&(A||m===t))return Ps(c);if(!c||!(m=Ma(m)))return c;var te=Vo(c),we=Vo(m),Re=es(te,we),it=Ql(te,we)+1;return ru(te,Re,it).join("")}function ZC(c,m,A){if(c=Ki(c),c&&(A||m===t))return c.slice(0,xa(c)+1);if(!c||!(m=Ma(m)))return c;var te=Vo(c),we=Ql(te,Vo(m))+1;return ru(te,0,we).join("")}function KC(c,m,A){if(c=Ki(c),c&&(A||m===t))return c.replace(Ln,"");if(!c||!(m=Ma(m)))return c;var te=Vo(c),we=es(te,Vo(m));return ru(te,we).join("")}function YC(c,m){var A=X,te=R;if(Ko(m)){var we="separator"in m?m.separator:we;A="length"in m?ui(m.length):A,te="omission"in m?Ma(m.omission):te}c=Ki(c);var Re=c.length;if(ra(c)){var it=Vo(c);Re=it.length}if(A>=Re)return c;var mt=A-Uo(te);if(mt<1)return te;var Et=it?ru(it,0,mt).join(""):c.slice(0,mt);if(we===t)return Et+te;if(it&&(mt+=Et.length-mt),Cm(we)){if(c.slice(mt).search(we)){var ln,un=Et;for(we.global||(we=Ol(we.source,Ki(Hr.exec(we))+"g")),we.lastIndex=0;ln=we.exec(un);)var vn=ln.index;Et=Et.slice(0,vn===t?mt:vn)}}else if(c.indexOf(Ma(we),mt)!=mt){var Un=Et.lastIndexOf(we);Un>-1&&(Et=Et.slice(0,Un))}return Et+te}function JC(c){return c=Ki(c),c&&at.test(c)?c.replace(fr,La):c}var XC=Sh(function(c,m,A){return c+(A?" ":"")+m.toUpperCase()}),Mm=ky("toUpperCase");function M2(c,m,A){return c=Ki(c),m=A?t:m,m===t?Ms(c)?ia(c):ft(c):c.match(m)||[]}var A2=li(function(c,m){try{return bi(c,t,m)}catch(A){return Sm(A)?A:new Kn(A)}}),QC=Pc(function(c,m){return Mo(m,function(A){A=rc(A),kn(c,A,xm(c[A],c))}),c});function eE(c){var m=c==null?0:c.length,A=Er();return c=m?wi(c,function(te){if(typeof te[1]!="function")throw new Gi(o);return[A(te[0]),te[1]]}):[],li(function(te){for(var we=-1;++we<m;){var Re=c[we];if(bi(Re[0],this,te))return bi(Re[1],this,te)}})}function tE(c){return h(l(c,y))}function Am(c){return function(){return c}}function nE(c,m){return c==null||c!==c?m:c}var rE=Ny(),iE=Ny(!0);function vl(c){return c}function km(c){return er(typeof c=="function"?c:l(c,y))}function oE(c){return vs(l(c,y))}function sE(c,m){return Su(c,l(m,y))}var aE=li(function(c,m){return function(A){return Be(A,c,m)}}),lE=li(function(c,m){return function(A){return Be(c,A,m)}});function Tm(c,m,A){var te=Xs(m),we=wn(m,te);A==null&&!(Ko(m)&&(we.length||!te.length))&&(A=m,m=c,c=this,we=wn(m,Xs(m)));var Re=!(Ko(A)&&"chain"in A)||!!A.chain,it=Ac(c);return Mo(we,function(mt){var Et=m[mt];c[mt]=Et,it&&(c.prototype[mt]=function(){var ln=this.__chain__;if(Re||ln){var un=c(this.__wrapped__),vn=un.__actions__=pl(this.__actions__);return vn.push({func:Et,args:arguments,thisArg:c}),un.__chain__=ln,un}return Et.apply(c,Es([this.value()],arguments))})}),c}function uE(){return no._===this&&(no._=so),this}function Nm(){}function cE(c){return c=ui(c),li(function(m){return qa(m,c)})}var fE=um(wi),hE=um(Il),dE=um(I);function k2(c){return mm(c)?vr(rc(c)):ao(c)}function pE(c){return function(m){return c==null?t:ur(c,m)}}var gE=Iy(),mE=Iy(!0);function Dm(){return[]}function Im(){return!1}function vE(){return{}}function yE(){return""}function _E(){return!0}function bE(c,m){if(c=ui(c),c<1||c>ie)return[];var A=Te,te=Se(c,Te);m=Er(m),c-=Te;for(var we=oo(te,m);++A<c;)m(A);return we}function wE(c){return ti(c)?wi(c,rc):Rl(c)?[c]:pl(Yy(Ki(c)))}function xE(c){var m=++Zs;return Ki(c)+m}var LE=Zp(function(c,m){return c+m},0),SE=cm("ceil"),CE=Zp(function(c,m){return c/m},1),EE=cm("floor");function PE(c){return c&&c.length?ge(c,vl,ht):t}function ME(c,m){return c&&c.length?ge(c,Er(m,2),ht):t}function AE(c){return nr(c,vl)}function kE(c,m){return nr(c,Er(m,2))}function TE(c){return c&&c.length?ge(c,vl,ei):t}function NE(c,m){return c&&c.length?ge(c,Er(m,2),ei):t}var DE=Zp(function(c,m){return c*m},1),IE=cm("round"),OE=Zp(function(c,m){return c-m},0);function BE(c){return c&&c.length?xi(c,vl):0}function RE(c,m){return c&&c.length?xi(c,Er(m,2)):0}return De.after=oS,De.ary=a2,De.assign=qS,De.assignIn=w2,De.assignInWith=ag,De.assignWith=WS,De.at=ZS,De.before=l2,De.bind=xm,De.bindAll=QC,De.bindKey=u2,De.castArray=vS,De.chain=i2,De.chunk=E3,De.compact=P3,De.concat=M3,De.cond=eE,De.conforms=tE,De.constant=Am,De.countBy=BL,De.create=KS,De.curry=c2,De.curryRight=f2,De.debounce=h2,De.defaults=YS,De.defaultsDeep=JS,De.defer=sS,De.delay=aS,De.difference=A3,De.differenceBy=k3,De.differenceWith=T3,De.drop=N3,De.dropRight=D3,De.dropRightWhile=I3,De.dropWhile=O3,De.fill=B3,De.filter=FL,De.flatMap=$L,De.flatMapDeep=UL,De.flatMapDepth=VL,De.flatten=e2,De.flattenDeep=R3,De.flattenDepth=F3,De.flip=lS,De.flow=rE,De.flowRight=iE,De.fromPairs=j3,De.functions=iC,De.functionsIn=oC,De.groupBy=GL,De.initial=$3,De.intersection=U3,De.intersectionBy=V3,De.intersectionWith=G3,De.invert=aC,De.invertBy=lC,De.invokeMap=qL,De.iteratee=km,De.keyBy=WL,De.keys=Xs,De.keysIn=ml,De.map=tg,De.mapKeys=cC,De.mapValues=fC,De.matches=oE,De.matchesProperty=sE,De.memoize=rg,De.merge=hC,De.mergeWith=x2,De.method=aE,De.methodOf=lE,De.mixin=Tm,De.negate=ig,De.nthArg=cE,De.omit=dC,De.omitBy=pC,De.once=uS,De.orderBy=ZL,De.over=fE,De.overArgs=cS,De.overEvery=hE,De.overSome=dE,De.partial=Lm,De.partialRight=d2,De.partition=KL,De.pick=gC,De.pickBy=L2,De.property=k2,De.propertyOf=pE,De.pull=Z3,De.pullAll=n2,De.pullAllBy=K3,De.pullAllWith=Y3,De.pullAt=J3,De.range=gE,De.rangeRight=mE,De.rearg=fS,De.reject=XL,De.remove=X3,De.rest=hS,De.reverse=bm,De.sampleSize=eS,De.set=vC,De.setWith=yC,De.shuffle=tS,De.slice=Q3,De.sortBy=iS,De.sortedUniq=sL,De.sortedUniqBy=aL,De.split=$C,De.spread=dS,De.tail=lL,De.take=uL,De.takeRight=cL,De.takeRightWhile=fL,De.takeWhile=hL,De.tap=PL,De.throttle=pS,De.thru=eg,De.toArray=y2,De.toPairs=S2,De.toPairsIn=C2,De.toPath=wE,De.toPlainObject=b2,De.transform=_C,De.unary=gS,De.union=dL,De.unionBy=pL,De.unionWith=gL,De.uniq=mL,De.uniqBy=vL,De.uniqWith=yL,De.unset=bC,De.unzip=wm,De.unzipWith=r2,De.update=wC,De.updateWith=xC,De.values=Ph,De.valuesIn=LC,De.without=_L,De.words=M2,De.wrap=mS,De.xor=bL,De.xorBy=wL,De.xorWith=xL,De.zip=LL,De.zipObject=SL,De.zipObjectDeep=CL,De.zipWith=EL,De.entries=S2,De.entriesIn=C2,De.extend=w2,De.extendWith=ag,Tm(De,De),De.add=LE,De.attempt=A2,De.camelCase=PC,De.capitalize=E2,De.ceil=SE,De.clamp=SC,De.clone=yS,De.cloneDeep=bS,De.cloneDeepWith=wS,De.cloneWith=_S,De.conformsTo=xS,De.deburr=P2,De.defaultTo=nE,De.divide=CE,De.endsWith=MC,De.eq=Au,De.escape=AC,De.escapeRegExp=kC,De.every=RL,De.find=jL,De.findIndex=Xy,De.findKey=XS,De.findLast=zL,De.findLastIndex=Qy,De.findLastKey=QS,De.floor=EE,De.forEach=o2,De.forEachRight=s2,De.forIn=eC,De.forInRight=tC,De.forOwn=nC,De.forOwnRight=rC,De.get=Em,De.gt=LS,De.gte=SS,De.has=sC,De.hasIn=Pm,De.head=t2,De.identity=vl,De.includes=HL,De.indexOf=z3,De.inRange=CC,De.invoke=uC,De.isArguments=zf,De.isArray=ti,De.isArrayBuffer=CS,De.isArrayLike=gl,De.isArrayLikeObject=ys,De.isBoolean=ES,De.isBuffer=Qc,De.isDate=PS,De.isElement=MS,De.isEmpty=AS,De.isEqual=kS,De.isEqualWith=TS,De.isError=Sm,De.isFinite=NS,De.isFunction=Ac,De.isInteger=p2,De.isLength=og,De.isMap=g2,De.isMatch=DS,De.isMatchWith=IS,De.isNaN=OS,De.isNative=BS,De.isNil=FS,De.isNull=RS,De.isNumber=m2,De.isObject=Ko,De.isObjectLike=os,De.isPlainObject=Ld,De.isRegExp=Cm,De.isSafeInteger=jS,De.isSet=v2,De.isString=sg,De.isSymbol=Rl,De.isTypedArray=Eh,De.isUndefined=zS,De.isWeakMap=$S,De.isWeakSet=US,De.join=H3,De.kebabCase=TC,De.last=iu,De.lastIndexOf=q3,De.lowerCase=NC,De.lowerFirst=DC,De.lt=VS,De.lte=GS,De.max=PE,De.maxBy=ME,De.mean=AE,De.meanBy=kE,De.min=TE,De.minBy=NE,De.stubArray=Dm,De.stubFalse=Im,De.stubObject=vE,De.stubString=yE,De.stubTrue=_E,De.multiply=DE,De.nth=W3,De.noConflict=uE,De.noop=Nm,De.now=ng,De.pad=IC,De.padEnd=OC,De.padStart=BC,De.parseInt=RC,De.random=EC,De.reduce=YL,De.reduceRight=JL,De.repeat=FC,De.replace=jC,De.result=mC,De.round=IE,De.runInContext=_t,De.sample=QL,De.size=nS,De.snakeCase=zC,De.some=rS,De.sortedIndex=eL,De.sortedIndexBy=tL,De.sortedIndexOf=nL,De.sortedLastIndex=rL,De.sortedLastIndexBy=iL,De.sortedLastIndexOf=oL,De.startCase=UC,De.startsWith=VC,De.subtract=OE,De.sum=BE,De.sumBy=RE,De.template=GC,De.times=bE,De.toFinite=kc,De.toInteger=ui,De.toLength=_2,De.toLower=HC,De.toNumber=ou,De.toSafeInteger=HS,De.toString=Ki,De.toUpper=qC,De.trim=WC,De.trimEnd=ZC,De.trimStart=KC,De.truncate=YC,De.unescape=JC,De.uniqueId=xE,De.upperCase=XC,De.upperFirst=Mm,De.each=o2,De.eachRight=s2,De.first=t2,Tm(De,function(){var c={};return Xt(De,function(m,A){Qr.call(De.prototype,A)||(c[A]=m)}),c}(),{chain:!1}),De.VERSION=r,Mo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){De[c].placeholder=De}),Mo(["drop","take"],function(c,m){Gr.prototype[c]=function(A){A=A===t?1:se(ui(A),0);var te=this.__filtered__&&!m?new Gr(this):this.clone();return te.__filtered__?te.__takeCount__=Se(A,te.__takeCount__):te.__views__.push({size:Se(A,Te),type:c+(te.__dir__<0?"Right":"")}),te},Gr.prototype[c+"Right"]=function(A){return this.reverse()[c](A).reverse()}}),Mo(["filter","map","takeWhile"],function(c,m){var A=m+1,te=A==z||A==V;Gr.prototype[c]=function(we){var Re=this.clone();return Re.__iteratees__.push({iteratee:Er(we,3),type:A}),Re.__filtered__=Re.__filtered__||te,Re}}),Mo(["head","last"],function(c,m){var A="take"+(m?"Right":"");Gr.prototype[c]=function(){return this[A](1).value()[0]}}),Mo(["initial","tail"],function(c,m){var A="drop"+(m?"":"Right");Gr.prototype[c]=function(){return this.__filtered__?new Gr(this):this[A](1)}}),Gr.prototype.compact=function(){return this.filter(vl)},Gr.prototype.find=function(c){return this.filter(c).head()},Gr.prototype.findLast=function(c){return this.reverse().find(c)},Gr.prototype.invokeMap=li(function(c,m){return typeof c=="function"?new Gr(this):this.map(function(A){return Be(A,c,m)})}),Gr.prototype.reject=function(c){return this.filter(ig(Er(c)))},Gr.prototype.slice=function(c,m){c=ui(c);var A=this;return A.__filtered__&&(c>0||m<0)?new Gr(A):(c<0?A=A.takeRight(-c):c&&(A=A.drop(c)),m!==t&&(m=ui(m),A=m<0?A.dropRight(-m):A.take(m-c)),A)},Gr.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},Gr.prototype.toArray=function(){return this.take(Te)},Xt(Gr.prototype,function(c,m){var A=/^(?:filter|find|map|reject)|While$/.test(m),te=/^(?:head|last)$/.test(m),we=De[te?"take"+(m=="last"?"Right":""):m],Re=te||/^find/.test(m);we&&(De.prototype[m]=function(){var it=this.__wrapped__,mt=te?[1]:arguments,Et=it instanceof Gr,ln=mt[0],un=Et||ti(it),vn=function(Ci){var Ti=we.apply(De,Es([Ci],mt));return te&&Un?Ti[0]:Ti};un&&A&&typeof ln=="function"&&ln.length!=1&&(Et=un=!1);var Un=this.__chain__,sr=!!this.__actions__.length,Mr=Re&&!Un,fi=Et&&!sr;if(!Re&&un){it=fi?it:new Gr(this);var Ar=c.apply(it,mt);return Ar.__actions__.push({func:eg,args:[vn],thisArg:t}),new Io(Ar,Un)}return Mr&&fi?c.apply(this,mt):(Ar=this.thru(vn),Mr?te?Ar.value()[0]:Ar.value():Ar)})}),Mo(["pop","push","shift","sort","splice","unshift"],function(c){var m=oa[c],A=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",te=/^(?:pop|shift)$/.test(c);De.prototype[c]=function(){var we=arguments;if(te&&!this.__chain__){var Re=this.value();return m.apply(ti(Re)?Re:[],we)}return this[A](function(it){return m.apply(ti(it)?it:[],we)})}}),Xt(Gr.prototype,function(c,m){var A=De[m];if(A){var te=A.name+"";Qr.call(gs,te)||(gs[te]=[]),gs[te].push({name:m,func:A})}}),gs[Wp(t,T).name]=[{name:"wrapper",func:t}],Gr.prototype.clone=Wc,Gr.prototype.reverse=hh,Gr.prototype.value=Zc,De.prototype.at=ML,De.prototype.chain=AL,De.prototype.commit=kL,De.prototype.next=TL,De.prototype.plant=DL,De.prototype.reverse=IL,De.prototype.toJSON=De.prototype.valueOf=De.prototype.value=OL,De.prototype.first=De.prototype.head,pr&&(De.prototype[pr]=NL),De},Ho=As();ro?((ro.exports=Ho)._=Ho,or._=Ho):no._=Ho}).call(ea)})(y0,y0.exports);var fx=y0.exports;class pa extends Vn.Polygon{constructor(t,r={}){super([],{...r,pmIgnore:!1,interactive:!0});Ht(this,"_width");Ht(this,"_height");Ht(this,"_center");Ht(this,"_rotation");Ht(this,"_isMapReady",!1);Ht(this,"properties");Ht(this,"_helperPoints",{corners:[],midPoints:[]});Ht(this,"_throttledUpdateProperties");const i=t instanceof Vn.LatLngBounds?t:Vn.latLngBounds(t);if(this._center=i.getCenter(),this._rotation=0,console.log("[Rectangle][constructor] Initialisation avec options:",{bounds:i,center:this._center,hasExplicitDimensions:!!(r.width&&r.height),width:r.width,height:r.height}),r.width&&r.height)this._width=r.width,this._height=r.height,console.log("[Rectangle][constructor] Utilisation des dimensions explicites:",{width:this._width,height:this._height});else{const s=i.getSouthWest(),o=i.getNorthEast();this._width=dn.measure("Rectangle.constructor.calculateWidth",()=>{const u=nv([s.lng,s.lat],[o.lng,s.lat],{units:"meters"});return Math.max(u,1)}),this._height=dn.measure("Rectangle.constructor.calculateHeight",()=>{const u=nv([s.lng,s.lat],[s.lng,o.lat],{units:"meters"});return Math.max(u,1)}),console.log("[Rectangle][constructor] Dimensions calcules depuis bounds:",{width:this._width,height:this._height})}(this._width<1||this._height<1)&&this._getPixelsPerMeter()>0&&(this._width=Math.max(this._width,1),this._height=Math.max(this._height,1),this._updatePolygonCoordinates()),this.properties=dn.measure("Rectangle.constructor.initProperties",()=>({type:"Rectangle",style:{...r,name:r.name||""},rotation:this._rotation})),this._throttledUpdateProperties=dn.measure("Rectangle.constructor.initThrottle",()=>fx.throttle(()=>{this.updateProperties()},100)),this.on("add",()=>{this._isMapReady=!0,this._updatePolygonCoordinates(),this.updateProperties()}),this.on("remove",()=>{this._isMapReady=!1})}_updatePolygonCoordinates(){dn.measure("Rectangle._updatePolygonCoordinates",()=>{if(!this._isMapReady||!this._map)return;console.log("[Rectangle][_updatePolygonCoordinates] Dbut mise  jour avec:",{width:this._width,height:this._height,center:this._center,rotation:this._rotation}),this._width=Math.max(this._width,1),this._height=Math.max(this._height,1);const t=this._width/2,r=this._height/2,i=lb([this._center.lng,this._center.lat],r,0,{units:"meters"}).geometry.coordinates,s=lb([this._center.lng,this._center.lat],t,90,{units:"meters"}).geometry.coordinates,o=Math.abs(i[1]-this._center.lat)*2,u=Math.abs(s[0]-this._center.lng)*2,f=[Vn.latLng(this._center.lat+o/2,this._center.lng-u/2),Vn.latLng(this._center.lat+o/2,this._center.lng+u/2),Vn.latLng(this._center.lat-o/2,this._center.lng+u/2),Vn.latLng(this._center.lat-o/2,this._center.lng-u/2)];if(this._rotation===0){this.setLatLngs(f);return}const d=this._map.latLngToContainerPoint(this._center),g=f.map(N=>this._map.latLngToContainerPoint(N)),y=-this._rotation*Math.PI/180,x=Math.cos(y),_=Math.sin(y),k=g.map(N=>{const T=N.x-d.x,F=N.y-d.y;return Vn.point(d.x+(T*x-F*_),d.y+(T*_+F*x))}).map(N=>this._map.containerPointToLatLng(N));console.log("[Rectangle][_updatePolygonCoordinates] Rsultat final:",{corners:k,dimensions:{width:this._width,height:this._height}}),this.setLatLngs(k),this.fire("coordinates:updated",{corners:k,center:this._center,rotation:this._rotation,dimensions:{width:this._width,height:this._height}})})}_getPixelsPerMeter(){return dn.measure("Rectangle._getPixelsPerMeter",()=>{if(!this._isMapReady||!this._map)return 1;const t=Math.max(this._width/1e3,1e-4),r=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(Vn.latLng(this._center.lat,this._center.lng+t)).x-r.x,o=nv([this._center.lng,this._center.lat],[this._center.lng+t,this._center.lat],{units:"meters"}),u=Math.abs(s/o);return isNaN(u)||u<=0?(console.warn("[Rectangle][_getPixelsPerMeter] Ratio invalide, utilisation de la valeur par dfaut"),1):u})}getRotatedCorners(){return dn.measure("Rectangle.getRotatedCorners",()=>{try{const t=this.getLatLngs();if(!t||!Array.isArray(t)||t.length===0){const r=this._width/2,i=this._height/2;return[Vn.latLng(this._center.lat+i,this._center.lng-r),Vn.latLng(this._center.lat+i,this._center.lng+r),Vn.latLng(this._center.lat-i,this._center.lng+r),Vn.latLng(this._center.lat-i,this._center.lng-r)]}return t[0]}catch(t){console.warn("Error in getRotatedCorners:",t);const r=this._width/2,i=this._height/2;return[Vn.latLng(this._center.lat+i,this._center.lng-r),Vn.latLng(this._center.lat+i,this._center.lng+r),Vn.latLng(this._center.lat-i,this._center.lng+r),Vn.latLng(this._center.lat-i,this._center.lng-r)]}})}getMidPoints(){return dn.measure("Rectangle.getMidPoints",()=>{try{const t=this.getRotatedCorners();if(!t||t.length<4){const i=this._width/2,s=this._height/2;return[Vn.latLng(this._center.lat+s,this._center.lng),Vn.latLng(this._center.lat,this._center.lng+i),Vn.latLng(this._center.lat-s,this._center.lng),Vn.latLng(this._center.lat,this._center.lng-i)]}if(!t.every(i=>i&&typeof i.lat=="number"&&typeof i.lng=="number"))throw new Error("Invalid corner coordinates");return[this._getMidPoint(t[3],t[0]),this._getMidPoint(t[0],t[1]),this._getMidPoint(t[1],t[2]),this._getMidPoint(t[2],t[3])]}catch(t){console.warn("Error in getMidPoints:",t);const r=this._width/2,i=this._height/2;return[Vn.latLng(this._center.lat+i,this._center.lng),Vn.latLng(this._center.lat,this._center.lng+r),Vn.latLng(this._center.lat-i,this._center.lng),Vn.latLng(this._center.lat,this._center.lng-r)]}})}_getMidPoint(t,r){return dn.measure("Rectangle._getMidPoint",()=>{if(!t||!r||typeof t.lat!="number"||typeof t.lng!="number"||typeof r.lat!="number"||typeof r.lng!="number")throw new Error("Invalid points for midpoint calculation");return Vn.latLng((t.lat+r.lat)/2,(t.lng+r.lng)/2)})}getCenter(){return dn.measure("Rectangle.getCenter",()=>this._center)}setCenter(t){dn.measure("Rectangle.setCenter",()=>{this._center=t,this._updatePolygonCoordinates(),this.updateProperties(),this.updateHelperPointPositions()})}getRotation(){return dn.measure("Rectangle.getRotation",()=>this._rotation)}setRotation(t,r=!1){dn.measure("Rectangle.setRotation",()=>{this._rotation=(t%360+360)%360,this._updatePolygonCoordinates(),r&&this.updateProperties(),this.updateHelperPointPositions(),this.fire("rotation:updated",{angle:this._rotation,corners:this.getRotatedCorners(),center:this._center})})}finalizeRotation(){dn.measure("Rectangle.finalizeRotation",()=>{this.updateProperties()})}getDimensions(){return dn.measure("Rectangle.getDimensions",()=>({width:this._width,height:this._height}))}setDimensions(t,r){dn.measure("Rectangle.setDimensions",()=>{console.log("[Rectangle][setDimensions] Dbut de la mise  jour des dimensions:",{oldWidth:this._width,oldHeight:this._height,newWidth:t,newHeight:r}),this._width=t,this._height=r,console.log("[Rectangle][setDimensions] Mise  jour des coordonnes du polygone"),this._updatePolygonCoordinates(),console.log("[Rectangle][setDimensions] Mise  jour des proprits"),this.updateProperties(),console.log("[Rectangle][setDimensions] mission de l'vnement dimensions:updated"),this.fire("dimensions:updated",{width:this._width,height:this._height,corners:this.getRotatedCorners(),center:this._center}),this.updateHelperPointPositions()})}resizeFromCorner(t,r){dn.measure("Rectangle.resizeFromCorner",()=>{if(!(!this._isMapReady||!this._map))try{const i=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(r),o=s.x-i.x,u=s.y-i.y,f=-this._rotation*Math.PI/180,d=Math.cos(f),g=Math.sin(f),y=o*d-u*g,x=o*g+u*d,_=this._getPixelsPerMeter(),M=t===0||t===3?-1:1,k=t===0||t===1?1:-1,N=Math.max(Math.abs(y*2)/_,1),T=Math.max(Math.abs(x*2)/_,1),F=N*_/2,K=T*_/2,Q=M*F*d-k*K*g,he=M*F*g+k*K*d,fe=Vn.point(s.x-Q,s.y-he),me=this._map.containerPointToLatLng(fe),X=[Vn.point(fe.x-F,fe.y+K),Vn.point(fe.x+F,fe.y+K),Vn.point(fe.x+F,fe.y-K),Vn.point(fe.x-F,fe.y-K)].map(R=>{const O=R.x-fe.x,B=R.y-fe.y;return Vn.point(fe.x+(O*d-B*g),fe.y+(O*g+B*d))}).map(R=>this._map.containerPointToLatLng(R));this._width=N,this._height=T,this._center=me,this.setLatLngs(X),this.fire("coordinates:updated",{corners:X,center:this._center,rotation:this._rotation})}catch(i){console.warn("Error in resizeFromCorner:",i)}})}resizeFromSide(t,r){dn.measure("Rectangle.resizeFromSide",()=>{if(!this._isMapReady||!this._map)return;const i=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(r),o=s.x-i.x,u=s.y-i.y,f=-this._rotation*Math.PI/180,d=Math.cos(f),g=Math.sin(f),y=o*d-u*g,x=o*g+u*d,_=this._getPixelsPerMeter();t%2===0?this._height=Math.abs(x*2)/_:this._width=Math.abs(y*2)/_,this._updatePolygonCoordinates(),this.updateProperties()})}moveFromCenter(t){dn.measure("Rectangle.moveFromCenter",()=>{this._center=t,this._updatePolygonCoordinates(),this.updateProperties()})}updateProperties(){dn.measure("Rectangle.updateProperties",()=>{var i,s,o;const t=this.getRotatedCorners(),r=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"";this.properties={...this.properties,width:this._width,height:this._height,surface:this._width*this._height,perimeter:2*(this._width+this._height),center:this._center,corners:t,midPoints:this.getMidPoints(),rotation:this._rotation,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:r}},this.fire("properties:updated",{shape:this,properties:this.properties,corners:t,midPoints:this.getMidPoints()})})}setName(t){dn.measure("Rectangle.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=t,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return dn.measure("Rectangle.getName",()=>{var t,r;return((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||""})}generateHelperPoints(t,r="rgba(220, 38, 38, 0.5)",i="rgba(37, 99, 235, 0.5)"){dn.measure("Rectangle.generateHelperPoints",()=>{this.clearHelperPoints();const s=this.getRotatedCorners(),o=this.getMidPoints();this._helperPoints.corners=s.map(u=>Vn.circleMarker(u,{radius:5,color:r,fillColor:r,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-corner",pmIgnore:!0,interactive:!1}).addTo(t)),this._helperPoints.midPoints=o.map(u=>Vn.circleMarker(u,{radius:5,color:i,fillColor:i,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-midpoint",pmIgnore:!0,interactive:!1}).addTo(t))})}clearHelperPoints(){dn.measure("Rectangle.clearHelperPoints",()=>{this._helperPoints.corners.forEach(t=>{if(t&&t.remove)try{t.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de coin:",r)}}),this._helperPoints.midPoints.forEach(t=>{if(t&&t.remove)try{t.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de milieu:",r)}}),this._helperPoints.corners=[],this._helperPoints.midPoints=[]})}updateHelperPointPositions(){dn.measure("Rectangle.updateHelperPointPositions",()=>{if(this._helperPoints.corners.length===0&&this._helperPoints.midPoints.length===0)return;const t=this.getRotatedCorners(),r=this.getMidPoints();t.forEach((i,s)=>{this._helperPoints.corners[s]&&this._helperPoints.corners[s].setLatLng(i)}),r.forEach((i,s)=>{this._helperPoints.midPoints[s]&&this._helperPoints.midPoints[s].setLatLng(i)})})}findClosestHelperPoint(t){return dn.measure("Rectangle.findClosestHelperPoint",()=>{const r=this.getRotatedCorners(),i=this.getMidPoints(),s=[...r,...i];if(s.length===0)return null;let o=s[0],u=t.distanceTo(o);for(let f=1;f<s.length;f++){const d=t.distanceTo(s[f]);d<u&&(u=d,o=s[f])}return o})}toggleHelperPoints(t,r,i,s){dn.measure("Rectangle.toggleHelperPoints",()=>{r&&t?this.generateHelperPoints(t,i,s):this.clearHelperPoints()})}containsPoint(t){return dn.measure("Rectangle.containsPoint",()=>{const r=this.getRotatedCorners();if(r.length!==4)return!1;let i=!1;for(let s=0,o=r.length-1;s<r.length;o=s++){const u=r[s].lng,f=r[s].lat,d=r[o].lng,g=r[o].lat;f>t.lat!=g>t.lat&&t.lng<(d-u)*(t.lat-f)/(g-f)+u&&(i=!i)}return i})}}var Zi=(e=>(e.PRIVATE="private",e.COMPANY="company",e.EMPLOYEE="employee",e.VISITOR="visitor",e))(Zi||{});const Fp=Dp("notes",()=>{const e=jt([]),n=jt([]),t=cr(()=>R=>e.value.find(O=>O.id===R)),r=cr(()=>R=>{const O=e.value.find(B=>B.id===R);return O?O.color:"#6B7280"}),i=cr(()=>R=>n.value.filter(O=>O.columnId===R).sort((O,B)=>O.order-B.order)),s=cr(()=>e.value.find(R=>R.isDefault)||e.value[0]),o=cr(()=>[...e.value].sort((R,O)=>R.order-O.order)),u=cr(()=>R=>{const O=ma();if(!O.user)return!1;if(O.isAdmin)return!0;switch(R.accessLevel){case"private":return!0;case"company":return O.isAdmin||O.isEntreprise;case"employee":return O.isAdmin||O.isEntreprise||O.isSalarie;case"visitor":return O.isAdmin||O.isEntreprise||O.isSalarie||O.isVisiteur;default:return!1}}),f=cr(()=>n.value.filter(R=>u.value(R))),d=cr(()=>R=>f.value.filter(O=>O.columnId===R).sort((O,B)=>O.order-B.order));async function g(){console.log(`
[NotesStore][loadColumns] Initialisation des colonnes fixes...`);try{const R=[{id:"1",title:"Ides",color:"#8B5CF6",order:0,isDefault:!1},{id:"2",title:" faire",color:"#F59E0B",order:1,isDefault:!0},{id:"3",title:"En cours",color:"#3B82F6",order:2,isDefault:!1},{id:"4",title:"Termines",color:"#10B981",order:3,isDefault:!1},{id:"5",title:"Autres",color:"#6B7280",order:4,isDefault:!1}];e.value=R,console.log("[NotesStore][loadColumns] Colonnes fixes initialises:",e.value)}catch(R){throw console.error("[NotesStore][loadColumns] Erreur:",R),R}}async function y(R){console.log(`
[NotesStore][addColumn] Fonction dsactive - Utilisation de colonnes fixes`)}async function x(R,O){console.log(`
[NotesStore][updateColumn] Mise  jour locale de la colonne:`,R,O);try{const B=e.value.findIndex(z=>z.id===R);B!==-1&&(e.value[B]={...e.value[B],...O},console.log("[NotesStore][updateColumn] tat des colonnes aprs mise  jour:",e.value))}catch(B){throw console.error("[NotesStore][updateColumn] Erreur:",B),B}}async function _(R){console.log(`
[NotesStore][removeColumn] Fonction dsactive - Utilisation de colonnes fixes`)}async function M(R){console.log(`
[NotesStore][reorderColumns] FONCTION DSACTIVE - Le dplacement des colonnes n'est plus possible`)}function k(R){if(!R)return"private";switch(R.toLowerCase()){case"private":return"private";case"company":return"company";case"employee":return"employee";case"visitor":return"visitor";default:return console.warn(`[NotesStore] Niveau d'accs inconnu: ${R}, utilisation de PRIVATE par dfaut`),"private"}}function N(R){if(!R.id)throw console.error("[NotesStore][addNote] Erreur: ID du backend manquant"),new Error("L'ID du backend est requis pour ajouter une note");const O=new Date().toISOString(),B=n.value.filter(V=>V.columnId===R.columnId),z=B.length>0?Math.max(...B.map(V=>V.order))+1:0,W=k(R.access_level);return console.log("[NotesStore][addNote] Ajout d'une note avec ID backend:",R.id,"et niveau d'accs:",W),n.value.push({...R,id:R.id,order:z,accessLevel:W,createdAt:O,updatedAt:O,comments:[],photos:[]}),R.id}function T(R,O){const B=n.value.findIndex(z=>z.id===R);if(B!==-1){const z=k(O.access_level),W={...n.value[B],...O,accessLevel:z,updatedAt:new Date().toISOString()};n.value[B]=W,console.log("[NotesStore][updateNote] Note mise  jour avec niveau d'accs:",W.accessLevel)}}function F(R){n.value.findIndex(B=>B.id===R)!==-1?(console.log("[NotesStore][removeNote] Suppression de la note avec ID:",R),n.value=n.value.filter(B=>B.id!==R)):console.warn("[NotesStore][removeNote] Tentative de suppression d'une note inexistante avec ID:",R)}function K(R,O){const B=n.value.findIndex(z=>z.id===R);if(B!==-1){const z=n.value[B];if(z.columnId!==O){const V=n.value.filter(xe=>xe.columnId===O),oe=V.length>0?Math.max(...V.map(xe=>xe.order))+1:0,ie={...z,columnId:O,order:oe,updatedAt:new Date().toISOString()};n.value[B]=ie}else n.value[B]={...n.value[B],updatedAt:new Date().toISOString()}}}function Q(R,O){O.forEach((B,z)=>{const W=n.value.findIndex(V=>V.id===B&&V.columnId===R);W!==-1&&(n.value[W]={...n.value[W],order:z,updatedAt:new Date().toISOString()})})}function he(R){switch(R){case"private":return"Priv";case"company":return"Entreprise";case"employee":return"Salaris";case"visitor":return"Visiteurs";default:return"Inconnu"}}async function fe(R,O){try{const B=ma();if(!B.user)throw new Error("Vous devez tre connect pour ajouter un commentaire");if(!B.isEntreprise&&!B.isAdmin)throw new Error("Seules les entreprises peuvent ajouter des commentaires");if(!n.value.some(Ee=>Ee.id===R))throw new Error(`La note avec l'ID ${R} n'existe pas`);const V=(await du.addComment(R,O)).data,oe=n.value.findIndex(Ee=>Ee.id===R);if(oe===-1)return;const ie=n.value[oe];ie.comments||(ie.comments=[]);const xe={id:V.id,text:V.text,createdAt:V.created_at,userId:V.user,userName:V.user_name,userRole:V.user_role};return ie.comments.push(xe),ie.updatedAt=new Date().toISOString(),n.value[oe]={...ie},xe.id}catch(B){throw console.error("Erreur lors de l'ajout du commentaire:",B),B}}async function me(R,O){try{const B=n.value.findIndex(V=>V.id===R);if(B===-1)throw new Error(`La note avec l'ID ${R} n'existe pas`);const z=n.value[B];if(!z.comments||z.comments.length===0)throw new Error("Aucun commentaire trouv pour cette note");if(!z.comments.some(V=>V.id===O))throw new Error(`Le commentaire avec l'ID ${O} n'existe pas`);await du.deleteComment(R,O),z.comments=z.comments.filter(V=>V.id!==O),z.updatedAt=new Date().toISOString(),n.value[B]={...z}}catch(B){throw console.error("Erreur lors de la suppression du commentaire:",B),B}}async function G(R,O){try{if(O.id&&O.image){const B=n.value.findIndex(V=>V.id===R);if(B===-1)return;const z=n.value[B];z.photos||(z.photos=[]);const W={id:O.id,url:O.image,caption:O.caption,createdAt:O.created_at};return z.photos.push(W),z.updatedAt=new Date().toISOString(),n.value[B]={...z},W.id}else{const B=new FormData;B.append("image",O.url),O.caption&&B.append("caption",O.caption);const W=(await du.addPhoto(R,B)).data,V=n.value.findIndex(xe=>xe.id===R);if(V===-1)return;const oe=n.value[V];oe.photos||(oe.photos=[]);const ie={id:W.id,url:W.image,caption:W.caption,createdAt:W.created_at};return oe.photos.push(ie),oe.updatedAt=new Date().toISOString(),n.value[V]={...oe},ie.id}}catch(B){throw console.error("Erreur lors de l'ajout de la photo:",B),B}}async function $(R,O){try{await du.deletePhoto(R,O);const B=n.value.findIndex(W=>W.id===R);if(B===-1||!n.value[B].photos)return;const z=n.value[B];z.photos=z.photos.filter(W=>W.id!==O),z.updatedAt=new Date().toISOString(),n.value[B]={...z}}catch(B){throw console.error("Erreur lors de la suppression de la photo:",B),B}}async function X(R,O,B){try{await du.updatePhoto(R,O,{caption:B});const z=n.value.findIndex(oe=>oe.id===R);if(z===-1||!n.value[z].photos)return;const W=n.value[z],V=W.photos.findIndex(oe=>oe.id===O);if(V===-1)return;W.photos[V].caption=B,W.updatedAt=new Date().toISOString(),n.value[z]={...W}}catch(z){throw console.error("Erreur lors de la mise  jour de la lgende:",z),z}}return{columns:e,notes:n,getColumnById:t,getColumnColor:r,getNotesByColumn:i,getDefaultColumn:s,getSortedColumns:o,hasAccessToNote:u,getAccessibleNotes:f,getAccessibleNotesByColumn:d,getAccessLevelLabel:he,loadColumns:g,addColumn:y,updateColumn:x,removeColumn:_,reorderColumns:M,addNote:N,updateNote:T,removeNote:F,moveNote:K,reorderNotes:Q,addComment:fe,removeComment:me,addPhoto:G,removePhoto:$,updatePhoto:X}});class mf extends Ft.Marker{constructor(t,r={}){const s=`
      <div class="geo-note-marker">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="${r.color||"#2b6451"}" width="24" height="24">
          <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" />
          <circle cx="12" cy="10" r="3" fill="white" />
        </svg>
      </div>
    `,u={icon:Ft.divIcon({html:s,className:"",iconSize:[24,36],iconAnchor:[12,36],popupAnchor:[0,-36]}),draggable:!1,autoPan:!0};super(t,u);Ht(this,"properties");Ht(this,"_planSaved",!1);Ht(this,"_isMoving",!1);this.properties={type:"Note",name:r.name||"Note golocalise",description:r.description||"",columnId:r.columnId||"1",accessLevel:r.accessLevel||Zi.PRIVATE,category:r.category||"forages",style:{color:r.color||"#2b6451",weight:r.weight||2,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity!==void 0?r.fillOpacity:.8,radius:r.radius||12},comments:[],photos:[],order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},console.log("[GeoNote][constructor] Note cre avec columnId:",this.properties.columnId),this.bindPopup(this.createPopupContent()),this.on("dblclick",this.onDoubleClick),window.addEventListener("geonote:updateStyle",f=>{const d=this._leaflet_id,g=this.properties.id,y=f.detail.noteId;console.log("[GeoNote][updateStyle] vnement reu pour noteId:",y,"Comparaison avec - ID Leaflet:",d,"ID backend:",g),(y===d||g&&y===g)&&(console.log("[GeoNote][updateStyle] Correspondance trouve, mise  jour du style:",f.detail.style),this.setNoteStyle(f.detail.style),this.bindPopup(this.createPopupContent()))}),console.log("[GeoNote][constructor] Note cre:",{location:t,name:this.properties.name,type:this.properties.type,style:this.properties.style})}createPopupContent(){const t=document.createElement("div");t.className="geo-note-popup",t.style.display="flex",t.style.flexDirection="column";const r=document.createElement("div");r.className="geo-note-header",t.appendChild(r);const i=document.createElement("div");i.className="geo-note-title",i.textContent=this.properties.name,r.appendChild(i);const s=document.createElement("div");s.className="geo-note-badges",r.appendChild(s);const o=document.createElement("div");o.className="geo-note-badge",o.style.backgroundColor=this.getColumnColor(this.properties.columnId),o.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
        <path d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5z" />
        <path d="M11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
      </svg>
      ${this.getColumnLabel(this.properties.columnId)}
    `,s.appendChild(o);const u=document.createElement("div");if(u.className="geo-note-badge",u.style.backgroundColor=this.getAccessLevelColor(this.properties.accessLevel),u.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
      </svg>
      ${this.getAccessLevelLabel(this.properties.accessLevel)}
    `,s.appendChild(u),this.properties.description&&this.properties.description.trim()!==""){const y=document.createElement("div");y.className="geo-note-content",t.appendChild(y);const x=document.createElement("div");x.className="geo-note-description",x.textContent=this.properties.description,y.appendChild(x)}const f=document.createElement("div");f.className="geo-note-buttons",f.style.display="flex",f.style.width="100%",f.style.marginTop="auto",f.style.borderTop="1px solid #E5E7EB",t.appendChild(f);const d=document.createElement("button");d.className="geo-note-edit-button",d.style.flex="1",d.style.height="36px",d.style.border="none",d.style.borderRight="1px solid #E5E7EB",d.style.background="transparent",d.style.color="#4B5563",d.style.fontSize="11px",d.style.fontWeight="500",d.style.display="flex",d.style.alignItems="center",d.style.justifyContent="center",d.style.cursor="pointer",d.style.padding="0",d.style.margin="0",d.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3 h-3 mr-1 inline-block align-text-bottom">
        <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
      </svg>
      diter
    `,d.onclick=y=>{y.stopPropagation(),this.editNote()},f.appendChild(d);const g=document.createElement("button");return g.className="geo-note-open-button",g.style.flex="1",g.style.height="36px",g.style.border="none",g.style.background="transparent",g.style.color="#3B82F6",g.style.fontSize="11px",g.style.fontWeight="500",g.style.display="flex",g.style.alignItems="center",g.style.justifyContent="center",g.style.cursor="pointer",g.style.padding="0",g.style.margin="0",g.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3 h-3 mr-1 inline-block align-text-bottom">
        <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
      </svg>
      Itinraire
    `,g.onclick=y=>{y.stopPropagation(),this.openInGoogleMaps()},f.appendChild(g),t}getColumnColor(t){return{1:"#8B5CF6",2:"#F59E0B",3:"#3B82F6",4:"#10B981",5:"#6B7280"}[t]||"#6B7280"}getColumnLabel(t){return{1:"Ides",2:" faire",3:"En cours",4:"Termines",5:"Autres"}[t]||"Colonne "+t}getAccessLevelLabel(t){switch(t){case Zi.PRIVATE:return"Priv";case Zi.COMPANY:return"Entreprise";case Zi.EMPLOYEE:return"Salaris";case Zi.VISITOR:return"Visiteurs";default:return"Inconnu"}}getAccessLevelColor(t){switch(t){case Zi.PRIVATE:return"#9CA3AF";case Zi.COMPANY:return"#EF4444";case Zi.EMPLOYEE:return"#F59E0B";case Zi.VISITOR:return"#10B981";default:return"#6B7280"}}onDoubleClick(t){Ft.DomEvent.stopPropagation(t),this.editNote()}editNote(){this.closePopup();const t=this.properties.id||this._leaflet_id;console.log(`[GeoNote][editNote] dition de note - ID backend: ${this.properties.id}, ID Leaflet: ${this._leaflet_id}, ID utilis: ${t}`);const r={id:t,title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},columnId:this.properties.columnId||"1",accessLevel:this.properties.accessLevel||"company",style:this.properties.style||{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:this.properties.comments||[],photos:this.properties.photos||[]};console.log("[GeoNote][editNote] dition de note avec columnId:",r.columnId),console.log("[GeoNote] mission de l'vnement note:edit avec",r);const i=new CustomEvent("geonote:edit",{detail:{note:r}});window.dispatchEvent(i),this.fire("note:edit",{note:r})}openInGoogleMaps(){this.closePopup();const t=this.getLatLng().lat,r=this.getLatLng().lng,i=`https://www.google.com/maps/dir/?api=1&destination=${t},${r}`;window.open(i,"_blank")}updateProperties(){var s,o;this.properties.type="Note",this.properties.category||(this.properties.category="forages"),this.properties.accessLevel||(this.properties.accessLevel=Zi.PRIVATE);const t=(s=this.getElement())==null?void 0:s.querySelector(".geo-note-marker"),r=t?window.getComputedStyle(t).color:"#2b6451",i=((o=this.properties.style)==null?void 0:o.radius)||12;this.properties.style={color:r,weight:2,fillColor:r,fillOpacity:.8,radius:i}}setNoteStyle(t){var u;console.log("[GeoNote][setNoteStyle] Mise  jour du style:",t);const r=t.color||t.fillColor||"#2b6451",i=t.fillColor||t.color||"#2b6451";console.log("[GeoNote][setNoteStyle] Nouvelles couleurs - stroke:",r,"fill:",i);const s=`
      <div class="geo-note-marker">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="${i}" width="24" height="24">
          <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" />
          <circle cx="12" cy="10" r="3" fill="white" />
        </svg>
      </div>
    `;console.log("[GeoNote][setNoteStyle] Nouvel HTML d'icne:",s);const o=Ft.divIcon({html:s,className:"",iconSize:[24,36],iconAnchor:[12,36],popupAnchor:[0,-36]});this.setIcon(o),console.log("[GeoNote][setNoteStyle] Nouvelle icne applique"),this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,color:r,weight:t.weight||this.properties.style.weight||2,fillColor:i,fillOpacity:t.fillOpacity!==void 0?t.fillOpacity:this.properties.style.fillOpacity||.8,radius:t.radius||((u=this.properties.style)==null?void 0:u.radius)||12},console.log("[GeoNote][setNoteStyle] Style mis  jour dans les proprits:",this.properties.style)),this.bindPopup(this.createPopupContent())}toBackendFormat(t){this.updateProperties();const r=this.getLatLng(),s={...{...this.properties.style,radius:this.properties.style.radius||12},_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel},o=this.properties.columnId||"1";return console.log("[GeoNote][toBackendFormat] Sauvegarde de note avec columnId:",o),{id:t,type_forme:"Note",data:{location:{type:"Point",coordinates:[r.lng,r.lat]},name:this.properties.name,description:this.properties.description,columnId:o,accessLevel:this.properties.accessLevel,category:this.properties.category||"forages",style:s,comments:this.properties.comments||[],photos:this.properties.photos||[],order:this.properties.order||0,createdAt:this.properties.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()}}}updateFromBackendData(t){this.properties.type="Note";const r=t.style?{...t.style,radius:t.style.radius||12}:this.properties.style,i=t.columnId||this.properties.columnId||"1";console.log("[GeoNote][updateFromBackendData] Mise  jour de note avec columnId:",i),this.properties={...this.properties,name:t.name||this.properties.name,description:t.description||this.properties.description,columnId:i,accessLevel:t.accessLevel||this.properties.accessLevel,category:t.category||this.properties.category||"forages",style:r,comments:t.comments||this.properties.comments||[],photos:t.photos||this.properties.photos||[],order:t.order||this.properties.order||0,createdAt:t.createdAt||this.properties.createdAt,updatedAt:t.updatedAt||new Date().toISOString()},this.setNoteStyle(r),this.bindPopup(this.createPopupContent()),console.log("[GeoNote][updateFromBackendData] Note mise  jour:",{name:this.properties.name,type:this.properties.type,style:this.properties.style})}static fromBackendData(t){var u,f,d,g,y,x,_;let r;if(typeof t.location=="object"&&!Array.isArray(t.location)&&t.location.type==="Point"){const M=t.location.coordinates;console.log("[GeoNote][fromBackendData] Coordonnes GeoJSON reues:",M),r=[M[1],M[0]]}else if(Array.isArray(t.location)&&t.location.length===2)r=t.location;else throw new Error("Les donnes de la note ne contiennent pas de position valide");console.log("[GeoNote][fromBackendData] Cration d'une note  partir des donnes:",t),console.log("[GeoNote][fromBackendData] Position utilise:",r);const i=((u=t.style)==null?void 0:u._accessLevel)||((f=t.style)==null?void 0:f.accessLevel)||t.accessLevel||Zi.PRIVATE;console.log("[GeoNote][fromBackendData] Niveau d'accs rcupr:",i,"Style:",t.style),t.accessLevel=i;const s=t.columnId||"1";console.log("[GeoNote][fromBackendData] Cration de note avec columnId:",s);const o=new mf(r,{name:t.name,description:t.description,columnId:s,accessLevel:i,category:t.category||"forages",color:(d=t.style)==null?void 0:d.color,weight:(g=t.style)==null?void 0:g.weight,fillColor:(y=t.style)==null?void 0:y.fillColor,fillOpacity:(x=t.style)==null?void 0:x.fillOpacity,radius:(_=t.style)==null?void 0:_.radius});return o.properties.type="Note",o.properties.comments=t.comments||[],o.properties.photos=t.photos||[],o.properties.order=t.order||0,o.properties.createdAt=t.createdAt||new Date().toISOString(),o.properties.updatedAt=t.updatedAt||new Date().toISOString(),t.style&&o.setNoteStyle(t.style),o.bindPopup(o.createPopupContent()),console.log("[GeoNote][fromBackendData] Note cre:",{location:r,name:o.properties.name,type:o.properties.type,style:o.properties.style}),o}triggerPlanSave(){if(this._planSaved)return;console.log("[GeoNote][triggerPlanSave] Dclenchement de la sauvegarde automatique du plan");const t=new CustomEvent("geonote:savePlan");window.dispatchEvent(t),this._planSaved=!0}resetPlanSaveState(){this._planSaved=!1}moveTo(t){this.setLatLng(t),this.fire("note:moved",{latlng:t,note:this}),this.bindPopup(this.createPopupContent()),this.triggerPlanSave()}startMoving(){this._isMoving=!0,this.closePopup(),this.fire("note:movestart",{latlng:this.getLatLng(),note:this})}finishMoving(){this._isMoving=!1,this.fire("note:moveend",{latlng:this.getLatLng(),note:this}),this.triggerPlanSave()}isMoving(){return this._isMoving}}function SI(e){return e&&Array.isArray(e.points)&&e.points.length>0&&Array.isArray(e.points[0])&&e.points[0].length===2}function CI(e){if(!e||typeof e!="object")return console.log("[DrawingStore] ElevationData invalide: pas un objet",{data:e}),!1;const n=Array.isArray(e.points)&&e.points.length>0&&Array.isArray(e.points[0])&&e.points[0].length===2,t=typeof e.style=="object"&&e.style!==null,r=!e.elevationData||Array.isArray(e.elevationData)&&e.elevationData.every(i=>typeof i=="object"&&"distance"in i&&"elevation"in i);return n&&t&&r}function EI(e){return e&&Array.isArray(e.points)&&e.points.length>0&&Array.isArray(e.points[0])&&e.points[0].length===2}function _b(e){var n,t,r,i,s,o,u,f,d,g,y,x,_,M,k,N,T,F,K,Q,he,fe,me,G,$,X,R;if(console.log("[DrawingStore] Conversion de la forme en lment",{type:(n=e.properties)==null?void 0:n.type,name:(r=(t=e.properties)==null?void 0:t.style)==null?void 0:r.name,properties:e.properties}),((i=e.properties)==null?void 0:i.type)==="Note"){const O=e.getLatLng();return{type_forme:"Note",data:{points:[[O.lng,O.lat]],style:{color:((s=e.properties.style)==null?void 0:s.color)||"#2b6451",weight:((o=e.properties.style)==null?void 0:o.weight)||3,opacity:((u=e.properties.style)==null?void 0:u.opacity)||1,fillColor:((f=e.properties.style)==null?void 0:f.fillColor)||"#2b6451",fillOpacity:((d=e.properties.style)==null?void 0:d.fillOpacity)||.2,name:((g=e.properties.style)==null?void 0:g.name)||""}}}}if(e instanceof Ef||((y=e.properties)==null?void 0:y.type)==="ElevationLine")return{type_forme:"ElevationLine",data:{points:e.getLatLngs().map(z=>[z.lng,z.lat]),style:{color:((x=e.properties.style)==null?void 0:x.color)||"#2b6451",weight:((_=e.properties.style)==null?void 0:_.weight)||4,opacity:((M=e.properties.style)==null?void 0:M.opacity)||.8,name:((k=e.properties.style)==null?void 0:k.name)||""},category:e.properties.category||"forages",accessLevel:e.properties.accessLevel||"visitor",elevationData:e.properties.elevationData,minElevation:e.properties.minElevation,maxElevation:e.properties.maxElevation,elevationGain:e.properties.elevationGain,elevationLoss:e.properties.elevationLoss,averageSlope:e.properties.averageSlope,maxSlope:e.properties.maxSlope}};if(e instanceof gf||((N=e.properties)==null?void 0:N.type)==="Polygon")return{type_forme:"Polygon",data:{points:e.getLatLngs()[0].map(z=>[z.lng,z.lat]),style:{color:((T=e.properties.style)==null?void 0:T.color)||"#2b6451",weight:((F=e.properties.style)==null?void 0:F.weight)||3,opacity:((K=e.properties.style)==null?void 0:K.opacity)||1,fillColor:((Q=e.properties.style)==null?void 0:Q.fillColor)||"#2b6451",fillOpacity:((he=e.properties.style)==null?void 0:he.fillOpacity)||.2,name:((fe=e.properties.style)==null?void 0:fe.name)||""},category:e.properties.category||"forages",accessLevel:e.properties.accessLevel||"visitor"}};if(e instanceof Ns||((me=e.properties)==null?void 0:me.type)==="Line")return{type_forme:"Line",data:{points:e.getLatLngs().map(z=>[z.lng,z.lat]),category:e.properties.category||"forages",accessLevel:e.properties.accessLevel||"visitor",style:{color:((G=e.properties.style)==null?void 0:G.color)||"#2b6451",weight:(($=e.properties.style)==null?void 0:$.weight)||3,opacity:((X=e.properties.style)==null?void 0:X.opacity)||1,name:((R=e.properties.style)==null?void 0:R.name)||""}}};throw new Error("Type de forme non reconnu")}function PI(e){var n,t,r,i,s,o,u,f,d,g,y,x,_,M,k,N,T,F,K,Q,he,fe,me,G,$,X,R,O,B,z,W,V,oe,ie,xe,Ee,Te,Y,q,ee,ue,le,pe;switch(console.log("[DrawingStore] Conversion de l'lment stock en forme",{element:e}),e.type_forme){case"Polygon":{const Z=e.data;if(!SI(Z))return console.error("[DrawingStore] Donnes invalides pour Polygon"),null;const D=Z.points.map(Ge=>Vn.latLng(Ge[1],Ge[0])),ke=((n=Z.style)==null?void 0:n._accessLevel)||((t=Z.style)==null?void 0:t.accessLevel)||Z.accessLevel||"visitor";console.log("[DrawingStore] Polygon - Niveau d'accs rcupr:",ke,"Style:",Z.style),Z.accessLevel=ke;const Me=new gf([D],{color:((r=Z.style)==null?void 0:r.color)||"#2b6451",weight:((i=Z.style)==null?void 0:i.weight)||3,opacity:((s=Z.style)==null?void 0:s.opacity)||1,fillColor:((o=Z.style)==null?void 0:o.fillColor)||"#2b6451",fillOpacity:((u=Z.style)==null?void 0:u.fillOpacity)||.2,dashArray:((f=Z.style)==null?void 0:f.dashArray)||"",name:((d=Z.style)==null?void 0:d.name)||"",category:Z.category||"forages",accessLevel:ke});return Me.updateProperties(),Me}case"ElevationLine":{const Z=e.data;if(!CI(Z))return console.error("[DrawingStore] Donnes invalides pour ElevationLine"),null;const D=Z.points.map(Ge=>Vn.latLng(Ge[1],Ge[0])),ke=((g=Z.style)==null?void 0:g._accessLevel)||((y=Z.style)==null?void 0:y.accessLevel)||Z.accessLevel||"visitor";console.log("[DrawingStore] ElevationLine - Niveau d'accs rcupr:",ke,"Style:",Z.style),Z.accessLevel=ke;const Me=new Ef(D,{color:((x=Z.style)==null?void 0:x.color)||"#2b6451",weight:((_=Z.style)==null?void 0:_.weight)||4,opacity:((M=Z.style)==null?void 0:M.opacity)||.8,name:((k=Z.style)==null?void 0:k.name)||"",category:Z.category||"forages",accessLevel:ke});return Me.properties={type:"ElevationLine",category:Z.category||"forages",accessLevel:ke,style:{...Z.style||{},name:((N=Z.style)==null?void 0:N.name)||""},elevationData:Z.elevationData,minElevation:Z.minElevation,maxElevation:Z.maxElevation,elevationGain:Z.elevationGain,elevationLoss:Z.elevationLoss,averageSlope:Z.averageSlope,maxSlope:Z.maxSlope,dataSource:"restored"},Z.elevationData&&Me.updateElevationProfile(),console.log("[DrawingStore] ElevationLine restored:",{points:D.length,hasElevationData:!!Z.elevationData,name:(T=Z.style)==null?void 0:T.name,properties:Me.properties}),Me}case"Line":{const Z=e.data;if(!EI(Z))return console.error("[DrawingStore] Donnes invalides pour Ligne"),null;const D=Z.points.map(Ge=>Vn.latLng(Ge[1],Ge[0])),ke=((F=Z.style)==null?void 0:F._accessLevel)||((K=Z.style)==null?void 0:K.accessLevel)||Z.accessLevel||"visitor";console.log("[DrawingStore] Line - Niveau d'accs rcupr:",ke,"Style:",Z.style),Z.accessLevel=ke;const Me=new Ns(D,{...Z.style||{},name:((Q=Z.style)==null?void 0:Q.name)||"",category:Z.category||"forages",accessLevel:ke});return Me.updateProperties(),Me}case"Rectangle":{const Z=e.data;if(console.log("[DrawingStore][convertStoredElementToShape] Restauration Rectangle:",{data:Z,bounds:Z.bounds,width:Z.width,height:Z.height,rotation:Z.rotation}),!Z.bounds)return console.error("[DrawingStore] Donnes de bounds manquantes pour Rectangle"),null;const D=new Vn.LatLngBounds(Vn.latLng(Z.bounds.southWest[1],Z.bounds.southWest[0]),Vn.latLng(Z.bounds.northEast[1],Z.bounds.northEast[0])),ke=new pa(D,{color:((he=Z.style)==null?void 0:he.color)||"#2b6451",weight:((fe=Z.style)==null?void 0:fe.weight)||3,opacity:((me=Z.style)==null?void 0:me.opacity)||1,fillColor:((G=Z.style)==null?void 0:G.fillColor)||"#2b6451",fillOpacity:(($=Z.style)==null?void 0:$.fillOpacity)||.2,dashArray:((X=Z.style)==null?void 0:X.dashArray)||"",name:((R=Z.style)==null?void 0:R.name)||"",width:Z.width,height:Z.height});return Z.rotation&&ke.setRotation(Z.rotation),console.log("[DrawingStore][convertStoredElementToShape] Rectangle restaur:",{bounds:ke.getBounds(),dimensions:ke.getDimensions(),properties:ke.properties}),ke}case"Circle":{console.log("[DrawingStore] Traitement d'un Circle  partir de l'API",{id:e.id,data:e.data,hasName:((B=(O=e.data)==null?void 0:O.style)==null?void 0:B.name)!==void 0,name:(W=(z=e.data)==null?void 0:z.style)==null?void 0:W.name});const Z=e.data;if(!Z.center||!Z.radius)return console.error("[DrawingStore] Donnes invalides pour Circle"),null;const D=Vn.circle([Z.center[1],Z.center[0]],{color:((V=Z.style)==null?void 0:V.color)||"#2b6451",weight:((oe=Z.style)==null?void 0:oe.weight)||3,opacity:((ie=Z.style)==null?void 0:ie.opacity)||1,fillColor:((xe=Z.style)==null?void 0:xe.fillColor)||"#2b6451",fillOpacity:((Ee=Z.style)==null?void 0:Ee.fillOpacity)||.2,dashArray:((Te=Z.style)==null?void 0:Te.dashArray)||"",radius:Z.radius});return D.properties={type:"Circle",radius:Z.radius,diameter:Z.radius*2,surface:Math.PI*Z.radius*Z.radius,perimeter:2*Math.PI*Z.radius,style:{...Z.style||{},name:((Y=Z.style)==null?void 0:Y.name)||""}},console.log("[DrawingStore] Cercle cr:",{centerType:typeof Z.center,center:Z.center,radius:Z.radius,style:D.properties.style,name:D.properties.style.name}),D}case"Note":{console.log("[DrawingStore] Traitement d'une Note  partir de l'API",{id:e.id,data:e.data});const Z=e.data;if(!Z.location)return console.error("[DrawingStore] Donnes invalides pour Note"),null;try{const D={location:Z.location,name:Z.name||"Note golocalise",description:Z.description||"",columnId:Z.columnId||"en-cours",accessLevel:Z.accessLevel||"private",category:Z.category||"forages",style:{color:((q=Z.style)==null?void 0:q.color)||"#2b6451",weight:((ee=Z.style)==null?void 0:ee.weight)||2,fillColor:((ue=Z.style)==null?void 0:ue.fillColor)||"#2b6451",fillOpacity:((le=Z.style)==null?void 0:le.fillOpacity)||.8,radius:((pe=Z.style)==null?void 0:pe.radius)||12},comments:Z.comments||[],photos:Z.photos||[],order:Z.order||0,createdAt:Z.createdAt||new Date().toISOString(),updatedAt:Z.updatedAt||new Date().toISOString()};console.log("[DrawingStore] Donnes prpares pour la note:",D);const ke=mf.fromBackendData(D);return ke._dbId=e.id,console.log("[DrawingStore] Note cre:",{id:e.id,location:D.location,name:D.name,type:ke.properties.type}),ke}catch(D){return console.error("[DrawingStore] Erreur lors de la cration de la Note:",D),null}}default:return console.warn("[DrawingStore] Type non gr pour la restauration:",e.type_forme),null}}const ud=Dp("drawing",{state:()=>({currentMapId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",filters:{accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}},currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null,performanceMonitor:gd()}),getters:{hasUnsavedChanges:e=>e.unsavedChanges,getCurrentElements:e=>e.elements,getSelectedElement:e=>e.selectedElement,getCurrentTool:e=>e.currentTool,getCurrentStyle:e=>e.currentStyle,getLastUsedType:e=>e.lastUsedType,getFilters:e=>e.filters,getFilteredElements:e=>{if(e.elements.length===0)return console.log("[DrawingStore][getFilteredElements] Aucun lment dans le store, retour d'un tableau vide"),[];console.log("[DrawingStore][getFilteredElements] Dbut du filtrage avec",{totalElements:e.elements.length,filters:JSON.stringify({accessLevels:e.filters.accessLevels,categories:e.filters.categories,shapeTypes:e.filters.shapeTypes})}),console.log("[DrawingStore][getFilteredElements] lments dans le store:",e.elements.map(t=>({id:t.id,type_forme:t.type_forme,data:t.data?JSON.stringify(t.data):null})));const n=e.elements.filter(t=>{var f,d;if(console.log(`[DrawingStore][getFilteredElements] Vrification de l'lment ${t.id} (${t.type_forme})`),!(t.type_forme in e.filters.shapeTypes?e.filters.shapeTypes[t.type_forme]:!0))return console.log(`[DrawingStore][getFilteredElements] lment ${t.id} filtr par type: ${t.type_forme} (non visible)`),!1;const i=((f=t.data)==null?void 0:f.category)||"default";if(!(i in e.filters.categories?e.filters.categories[i]:!0))return console.log(`[DrawingStore][getFilteredElements] lment ${t.id} filtr par catgorie: ${i} (non visible)`),!1;const o=((d=t.data)==null?void 0:d.accessLevel)||"visitor";let u=!0;return o==="company"?u=e.filters.accessLevels.company:o==="employee"?u=e.filters.accessLevels.employee:o==="visitor"&&(u=e.filters.accessLevels.visitor),u?(console.log(`[DrawingStore][getFilteredElements] lment ${t.id} visible: type=${t.type_forme}, catgorie=${i}, accs=${o}`),!0):(console.log(`[DrawingStore][getFilteredElements] lment ${t.id} filtr par niveau d'accs: ${o} (non visible)`),!1)});return console.log("[DrawingStore][getFilteredElements] Rsultat du filtrage:",{total:e.elements.length,filtered:n.length,filteredIds:n.map(t=>t.id)}),n}},actions:{setCurrentPlan(e){window.dispatchEvent(new CustomEvent("clearControlPoints")),this.currentMapId=e,e===null&&this.clearElements(),this.selectedElement=null,this.unsavedChanges=!1,this.currentTool="",this.lastUsedType=null,this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},this.filters={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}}},clearCurrentPlan(){(this.currentMapId!==null||this.elements.length>0)&&(this.currentMapId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null)},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.error=null},addElement(e){var t;const n=this.performanceMonitor.startMeasure("addElement","DrawingStore");try{if(console.log("[DrawingStore] Ajout d'un lment",{element:e,isLeafletLayer:e instanceof Vn.Layer,hasProperties:!!e.properties,properties:e.properties,type:(t=e.properties)==null?void 0:t.type}),e instanceof Vn.Layer&&e.properties){const r=this.performanceMonitor.measure("addElement_convert",()=>_b(e),"DrawingStore");console.log("[DrawingStore] lment converti avant ajout",{original:e,converted:r,type:r.type_forme,data:r.data}),this.elements.push(r)}else!e.type_forme&&this.lastUsedType&&(e.type_forme=this.lastUsedType),this.elements.push(e);this.unsavedChanges=!0}finally{n()}},updateElement(e){const n=this.elements.findIndex(t=>t.id===e.id);if(n!==-1){const t=this.elements[n].type_forme;this.elements[n]={...e,type_forme:t},this.unsavedChanges=!0}},removeElement(e){const n=this.elements.findIndex(t=>t.id===e);n!==-1&&(this.elements.splice(n,1),this.unsavedChanges=!0)},selectElement(e){this.selectedElement=e},setCurrentTool(e){this.currentTool=e,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(e)&&(this.lastUsedType=e)},setCurrentStyle(e){if(!e||Object.keys(e).length===0){this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2};return}this.currentStyle={...this.currentStyle,...e}},updateFilters(e){if(console.log("[DrawingStore][updateFilters] Mise  jour des filtres:",JSON.stringify(e,null,2)),console.log("[DrawingStore][updateFilters] Filtres avant mise  jour:",JSON.stringify(this.filters,null,2)),e.accessLevels){const n={...this.filters.accessLevels};this.filters.accessLevels={...this.filters.accessLevels,...e.accessLevels},console.log("[DrawingStore][updateFilters] Niveaux d'accs mis  jour:",{avant:n,aprs:this.filters.accessLevels})}if(e.categories){const n={...this.filters.categories};this.filters.categories={...this.filters.categories,...e.categories},console.log("[DrawingStore][updateFilters] Catgories mises  jour:",{avant:n,aprs:this.filters.categories});const t=Object.keys(e.categories).filter(r=>n[r]!==this.filters.categories[r]);if(t.length>0){console.log(`[DrawingStore][updateFilters] Catgories modifies: ${t.join(", ")}`);const r=t.filter(i=>n[i]===!1&&this.filters.categories[i]===!0);r.length>0&&(console.log(`[DrawingStore][updateFilters] Catgories ractives: ${r.join(", ")}`),window.dispatchEvent(new CustomEvent("categoriesReactivated",{detail:{categories:r}})))}}if(e.shapeTypes){const n={...this.filters.shapeTypes};this.filters.shapeTypes={...this.filters.shapeTypes,...e.shapeTypes},console.log("[DrawingStore][updateFilters] Types de formes mis  jour:",{avant:n,aprs:this.filters.shapeTypes});const t=Object.keys(e.shapeTypes).filter(r=>n[r]!==this.filters.shapeTypes[r]);if(t.length>0){console.log(`[DrawingStore][updateFilters] Types de formes modifis: ${t.join(", ")}`);const r=t.filter(i=>n[i]===!1&&this.filters.shapeTypes[i]===!0);r.length>0&&(console.log(`[DrawingStore][updateFilters] Types de formes ractivs: ${r.join(", ")}`),window.dispatchEvent(new CustomEvent("shapeTypesReactivated",{detail:{shapeTypes:r}})))}}console.log("[DrawingStore][updateFilters] Filtres mis  jour:",JSON.stringify(this.filters,null,2)),console.log("[DrawingStore][updateFilters] mission de l'event filtersChanged"),window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:this.filters}}))},async loadPlanElements(e){const n=this.performanceMonitor.startMeasure("loadPlanElements","DrawingStore");if(this.currentMapId===e&&this.elements.length>0)return console.log(`[DrawingStore] Plan ${e} dj charg avec ${this.elements.length} lments`),n(),this.elements;this.loading=!0;try{console.log("[DrawingStore] Dbut du chargement du plan",{planId:e});const r=(await this.performanceMonitor.measureAsync("loadPlanElements_apiCall",()=>Rn.get(`/plans/${e}/`),"DrawingStore")).data;return console.log("[DrawingStore] Donnes du plan reues",{formes:r.formes,preferences:r.preferences}),r.formes&&Array.isArray(r.formes)&&r.formes.forEach((i,s)=>{var o,u,f;console.log(`[DrawingStore] Analyse dtaille forme ${s}:`,{id:i.id,type_forme:i.type_forme,hasData:!!i.data,dataKeys:i.data?Object.keys(i.data):[],name:(o=i.data)==null?void 0:o.name,hasName:i.data&&"name"in i.data,centerType:(u=i.data)!=null&&u.center?typeof i.data.center:"undefined",center:(f=i.data)==null?void 0:f.center})}),this.elements=r.formes.map(i=>{var s;if(console.log("[DrawingStore] Traitement de la forme stocke",{id:i.id,type_forme:i.type_forme,data:i.data}),i.type_forme)return console.log("[DrawingStore] Forme dj au format lment",{type_forme:i.type_forme,data:i.data,hasName:i.data&&"name"in i.data,name:(s=i.data)==null?void 0:s.name}),{id:i.id,type_forme:i.type_forme,data:i.data||{}};try{const o=PI(i);if(o)return console.log("[DrawingStore] Forme convertie avec succs",{originalType:i.type_forme,convertedType:o.type,properties:o.properties}),_b(o)}catch(o){console.error("[DrawingStore] Erreur lors de la conversion de la forme",{error:o,forme:i})}return console.warn("[DrawingStore] Utilisation de la forme sans conversion",{type_forme:i.type_forme,data:i.data}),i}),console.log(`[DrawingStore] Plan ${e} - Charg ${this.elements.length} lments`,{elements:this.elements.map(i=>({id:i.id,type_forme:i.type_forme}))}),this.currentMapId=e,this.unsavedChanges=!1,r.preferences&&(console.log("[DrawingStore] Chargement des prfrences",r.preferences),r.preferences.currentTool&&this.setCurrentTool(r.preferences.currentTool),r.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...r.preferences.currentStyle}),r.preferences.lastUsedType&&(this.lastUsedType=r.preferences.lastUsedType)),this.elements}catch(t){throw console.error("[DrawingStore] Erreur lors du chargement des lments:",t),this.error="Erreur lors du chargement des lments du plan",t}finally{this.loading=!1,n()}},async saveToPlan(e,n){const t=this.performanceMonitor.startMeasure("saveToPlan","DrawingStore");this.loading=!0;try{const r=e||this.currentMapId;if(console.log("[DrawingStore][saveToPlan] Dbut de la sauvegarde",{targetPlanId:r,currentPlanId:this.currentMapId,elementsCount:this.elements.length,elementsToDelete:n==null?void 0:n.elementsToDelete}),!r)throw new Error("Aucun plan slectionn pour la sauvegarde");const i=this.performanceMonitor.measure("saveToPlan_prepareElements",()=>this.elements.map(f=>({...f,type_forme:f.type_forme||this.lastUsedType})),"DrawingStore"),s=(n==null?void 0:n.elementsToDelete)||[],o=`/plans/${r}/save_with_elements/`,u=await this.performanceMonitor.measureAsync("saveToPlan_apiCall",()=>Rn.post(o,{formes:i,connexions:[],annotations:[],elementsToDelete:s,preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}}),"DrawingStore");return this.elements=this.performanceMonitor.measure("saveToPlan_processResponse",()=>{const f=new Set(s);return u.data.formes.filter(d=>!f.has(d.id)).map(d=>({...d,type_forme:d.type_forme}))},"DrawingStore"),console.log("[DrawingStore][saveToPlan] lments aprs filtrage:",{totalElements:this.elements.length,elementsToDelete:s}),this.unsavedChanges=!1,u.data}catch(r){throw console.error("[DrawingStore][saveToPlan] ERREUR:",r),console.error("[DrawingStore][saveToPlan] Stack trace:",r instanceof Error?r.stack:"No stack trace"),this.error="Erreur lors de la sauvegarde du plan",r}finally{this.loading=!1,t()}}}}),MI={class:"h-full flex flex-col bg-white"},AI={class:"border-b border-gray-200"},kI={class:"flex -mb-px"},TI={class:"flex-1 overflow-y-auto"},NI={key:0,class:"p-3"},DI={class:"grid grid-cols-4 gap-1.5 mb-4"},II=["onClick","title"],OI=["innerHTML"],BI={key:1,class:"my-4 border-t border-gray-200"},RI={key:2,class:"mt-4"},FI={class:"mb-4"},jI={class:"mb-4"},zI={class:"mb-4"},$I={class:"grid grid-cols-1 gap-4"},UI={key:0,class:"space-y-1"},VI={class:"flex justify-between items-center"},GI={class:"text-sm font-medium text-gray-500"},HI={class:"flex justify-between items-center"},qI={class:"text-sm font-medium text-gray-500"},WI={class:"text-sm font-medium text-gray-500"},ZI={class:"flex flex-col space-y-2 w-full"},KI={class:"flex justify-between items-center"},YI={class:"text-sm font-medium text-gray-500 ml-2"},JI={class:"flex justify-between items-center"},XI={class:"text-sm font-medium text-gray-500 ml-2"},QI={class:"flex justify-between items-center"},eO={class:"text-sm font-medium text-gray-500 ml-2"},tO={class:"flex justify-between items-center"},nO={class:"text-sm font-medium text-gray-500 ml-2"},rO={class:"flex justify-between items-center"},iO={class:"text-sm font-medium text-gray-500 ml-2"},oO={ref:"elevationProfileContainer",class:"elevation-profile-container w-full h-48 bg-gray-50 rounded border border-gray-200 relative mt-4"},sO={ref:"elevationCanvas"},aO={key:1,class:"p-3"},lO={class:"grid grid-cols-6 gap-2 mb-4"},uO=["onClick","title"],cO={key:0,class:"space-y-4"},fO={class:"flex items-center gap-4"},hO={class:"flex items-center gap-2"},dO={class:"flex items-center gap-4"},pO=["value"],gO={key:0,class:"flex items-center gap-4"},mO={class:"flex items-center gap-2"},vO={key:1,class:"space-y-4"},yO={class:"flex items-center gap-4"},_O={class:"flex items-center gap-2"},bO={class:"flex items-center gap-4"},wO={class:"flex items-center gap-2"},xO={key:2,class:"p-3 space-y-4"},LO={class:"space-y-2"},SO={class:"space-y-2"},CO={class:"space-y-1"},EO={class:"flex items-center"},PO={class:"flex items-center"},MO={class:"flex items-center"},AO={class:"flex items-center"},kO={class:"flex items-center"},TO={class:"flex items-center"},NO={class:"space-y-2"},DO={class:"space-y-1"},IO={class:"flex items-center"},OO={class:"flex items-center"},BO={class:"flex items-center"},RO={class:"flex items-center"},FO={key:0,class:"p-3 border-t border-gray-200"},jO={class:"mt-3"},zO={class:"mb-4"},$O={class:"grid grid-cols-2 gap-2"},UO={class:"grid grid-cols-2 gap-2"},VO=cs({__name:"DrawingTools",props:{currentTool:{type:String,default:""},selectedShape:{type:Object,default:null},allLayers:{type:Array,default:()=>[]}},emits:["tool-change","style-update","properties-update","delete-shape","filter-change","close-drawer"],setup(e,{emit:n}){const t=e,r=ud(),i=[{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"ElevationLine",label:"Profil altimtrique"},{type:"Note",label:"Note golocalise"}],s=Z=>{switch(Z){case"Polygon":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5l16 0l0 14l-16 0l0 -14z"/></svg>';case"Line":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 20l16 -16"/></svg>';case"ElevationLine":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 20h18l-3-3l-4 4l-4-7l-4 4l-3-3"/></svg>';case"Note":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 2l4 4m-6 0l2-2 4 4-2 2-4-4z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h8" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 14h4" /></svg>';default:return""}},o=jt("tools");Co(o,(Z,D)=>{console.log("[DrawingTools][watch activeTab] Changement d'onglet:",{newTab:Z,oldTab:D}),Z==="filters"&&D!=="filters"&&(console.log("[DrawingTools][watch activeTab] Passage  l'onglet filtres"),console.log("[DrawingTools][watch activeTab] tat actuel des filtres dans le store:",JSON.stringify({accessLevels:{...r.filters.accessLevels},categories:{...r.filters.categories},shapeTypes:{...r.filters.shapeTypes}},null,2)),console.log("[DrawingTools][watch activeTab] tat actuel des filtres locaux:",JSON.stringify({accessLevels:{...fe.accessLevels},categories:{...fe.categories},shapeTypes:{...fe.shapeTypes}},null,2)),t.selectedShape&&(console.log("[DrawingTools][watch activeTab] Dslection de la forme actuelle lors du passage  l'onglet filtres"),le("tool-change","")),setTimeout(()=>{Ee()},0)),D==="filters"&&Z!=="filters"&&(console.log("[DrawingTools][watch activeTab] Sortie de l'onglet filtres, application des changements"),console.log("[DrawingTools][watch activeTab] tat des filtres locaux avant application:",JSON.stringify({accessLevels:{...fe.accessLevels},categories:{...fe.categories},shapeTypes:{...fe.shapeTypes}},null,2)),Ee())});const u=jt({samplePoints:!0,circleSections:!0}),f=jt("#2b6451"),d=jt(2),g=jt("solid"),y=jt("#2b6451"),x=jt(.2),_=jt(!0),M=jt(""),k=jt("default"),N=jt("visitor"),T=jt({radius:4,color:"#2b6451",fillOpacity:.6,weight:2}),F=jt({radius:6,color:"#EF4444",fillOpacity:.8,weight:2}),K=["#2b6451","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],Q=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointills"}],he=jt("company"),fe=Kl({accessLevels:{company:!0,employee:!1,visitor:!1},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}}),me=Z=>{console.log(`[DrawingTools][updateAccessLevelFilter] Changement du niveau d'accs: ${Z}`),he.value=Z,Z==="company"?(fe.accessLevels.company=!0,fe.accessLevels.employee=!1,fe.accessLevels.visitor=!1):Z==="employee"?(fe.accessLevels.company=!1,fe.accessLevels.employee=!0,fe.accessLevels.visitor=!1):Z==="visitor"&&(fe.accessLevels.company=!1,fe.accessLevels.employee=!1,fe.accessLevels.visitor=!0),Ee()},G=Z=>{console.log(`[DrawingTools][updateAccessLevelFilterAndDeselect] Changement du niveau d'accs: ${Z}`),t.selectedShape&&(console.log("[DrawingTools][updateAccessLevelFilterAndDeselect] Dslection de la forme actuelle"),le("tool-change","")),me(Z)};console.log("[DrawingTools] Initialisation des filtres:",JSON.stringify({local:{accessLevels:{...fe.accessLevels},categories:{...fe.categories},shapeTypes:{...fe.shapeTypes}},store:{accessLevels:{...r.filters.accessLevels},categories:{...r.filters.categories},shapeTypes:{...r.filters.shapeTypes}}},null,2));const $=cr(()=>t.selectedShape&&t.selectedShape.properties||null),X=Z=>{u.value[Z]=!u.value[Z]},R=Z=>{f.value=Z,y.value=Z,O({strokeColor:Z,fillColor:Z})},O=Z=>{t.selectedShape&&le("style-update",Z)},B=()=>{t.selectedShape&&le("properties-update",{name:M.value})},z=()=>{t.selectedShape&&le("properties-update",{category:k.value})},W=()=>{t.selectedShape&&le("properties-update",{accessLevel:N.value})},V=()=>{var Z;!t.selectedShape||((Z=$.value)==null?void 0:Z.type)!=="ElevationLine"||le("style-update",{samplePointStyle:T.value})},oe=()=>{var Z;!t.selectedShape||((Z=$.value)==null?void 0:Z.type)!=="ElevationLine"||le("style-update",{minMaxPointStyle:F.value})},ie=()=>{console.log("[DrawingTools][resetFilters] Dbut de la rinitialisation des filtres"),console.log("[DrawingTools][resetFilters] tat actuel des filtres:",JSON.stringify({accessLevels:{...fe.accessLevels},categories:{...fe.categories},shapeTypes:{...fe.shapeTypes}},null,2));const Z={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}};console.log("[DrawingTools][resetFilters] Nouveaux filtres  appliquer:",JSON.stringify(Z,null,2)),console.log("[DrawingTools][resetFilters] Mise  jour des filtres locaux"),fe.accessLevels.company=!0,fe.accessLevels.employee=!0,fe.accessLevels.visitor=!0,fe.categories.forages=!0,fe.categories.clients=!0,fe.categories.entrepots=!0,fe.categories.livraisons=!0,fe.categories.cultures=!0,fe.categories.parcelles=!0,fe.shapeTypes.Polygon=!0,fe.shapeTypes.Line=!0,fe.shapeTypes.ElevationLine=!0,fe.shapeTypes.Note=!0,console.log("[DrawingTools][resetFilters] Filtres locaux aprs mise  jour:",JSON.stringify({accessLevels:{...fe.accessLevels},categories:{...fe.categories},shapeTypes:{...fe.shapeTypes}},null,2)),console.log("[DrawingTools][resetFilters] Mise  jour des filtres dans le store"),r.updateFilters(Z),console.log("[DrawingTools][resetFilters] mission de l'event filter-change"),le("filter-change",Z),console.log("[DrawingTools][resetFilters] Mise  jour force de l'affichage"),console.log("[DrawingTools][resetFilters] Filtres rinitialiss avec succs")},xe=()=>{console.log("[DrawingTools][resetFiltersAndDeselect] Dbut de la rinitialisation des filtres avec dslection"),ee(),ie(),console.log("[DrawingTools][resetFiltersAndDeselect] Filtres rinitialiss et forme dslectionne avec succs")},Ee=()=>{const Z={...fe.accessLevels},D={...fe.categories},ke={...fe.shapeTypes};console.log("[DrawingTools][applyFilters] Application des filtres:",JSON.stringify({accessLevels:Z,categories:D,shapeTypes:ke},null,2));const Me={accessLevels:Z,categories:D,shapeTypes:ke};console.log("[DrawingTools][applyFilters] Envoi des filtres au store:",JSON.stringify(Me,null,2)),r.updateFilters(Me),console.log("[DrawingTools][applyFilters] mission de l'event filter-change"),le("filter-change",Me),setTimeout(()=>{console.log("[DrawingTools][applyFilters] Mise  jour force de l'affichage"),window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:Me}}))},0),console.log("[DrawingTools][applyFilters] Filtres appliqus avec succs")},Te=Z=>`${Math.round(Z)} m`,Y=Z=>Z>=1e4?`${(Z/1e4).toFixed(2)} ha`:`${Math.round(Z)} m`,q=Z=>`${Z.toFixed(1)}%`,ee=()=>{t.selectedShape&&(console.log("[DrawingTools][deselectCurrentShape] Dslection de la forme actuelle"),le("tool-change",""))},ue=()=>{ee(),o.value="filters"},le=n;wp(()=>{var Z,D,ke,Me,Ge,ce,ne;if(t.selectedShape){console.log("[DrawingTools][watchEffect] Mise  jour des proprits pour la forme slectionne:",{type:t.selectedShape.type,properties:t.selectedShape.properties,options:t.selectedShape.options,layer:(Z=t.selectedShape.layer)==null?void 0:Z._leaflet_id});const ye=t.selectedShape.options||{};f.value=ye.color||"#2b6451",d.value=ye.weight||3,g.value=ye.dashArray?"dashed":"solid",y.value=ye.fillColor||"#2b6451",x.value=ye.fillOpacity||.2;const de=t.selectedShape.type||((D=t.selectedShape.properties)==null?void 0:D.type)||"";_.value=de!=="Line",console.log("[DrawingTools][watchEffect] Type de forme dtect:",de),M.value=((ke=t.selectedShape.properties)==null?void 0:ke.name)||"",k.value=((Me=t.selectedShape.properties)==null?void 0:Me.category)||"forages",N.value=((Ge=t.selectedShape.properties)==null?void 0:Ge.accessLevel)||"visitor",de==="ElevationLine"&&((ce=t.selectedShape.properties)!=null&&ce.samplePointStyle&&(T.value={...t.selectedShape.properties.samplePointStyle}),(ne=t.selectedShape.properties)!=null&&ne.minMaxPointStyle&&(F.value={...t.selectedShape.properties.minMaxPointStyle})),console.log("[DrawingTools][watchEffect] Proprits mises  jour avec succs")}}),Is(()=>{console.log("[DrawingTools][onMounted] Initialisation des filtres depuis le store");const Z=r.filters;console.log("[DrawingTools][onMounted] Filtres du store:",JSON.stringify({accessLevels:{...Z.accessLevels},categories:{...Z.categories},shapeTypes:{...Z.shapeTypes}},null,2)),fe.accessLevels.company=Z.accessLevels.company,fe.accessLevels.employee=Z.accessLevels.employee,fe.accessLevels.visitor=Z.accessLevels.visitor,fe.categories.forages=Z.categories.forages,fe.categories.clients=Z.categories.clients,fe.categories.entrepots=Z.categories.entrepots,fe.categories.livraisons=Z.categories.livraisons,fe.categories.cultures=Z.categories.cultures,fe.categories.parcelles=Z.categories.parcelles,fe.shapeTypes.Polygon=Z.shapeTypes.Polygon,fe.shapeTypes.Line=Z.shapeTypes.Line,fe.shapeTypes.ElevationLine=Z.shapeTypes.ElevationLine,fe.shapeTypes.Note=Z.shapeTypes.Note,console.log("[DrawingTools][onMounted] Filtres locaux aprs initialisation:",JSON.stringify({accessLevels:{...fe.accessLevels},categories:{...fe.categories},shapeTypes:{...fe.shapeTypes}},null,2))}),Co(fe,(Z,D)=>{console.log("[DrawingTools][watch filters] Changement dtect:",{activeTab:o.value,newFilters:JSON.stringify({accessLevels:Z.accessLevels,categories:Z.categories,shapeTypes:Z.shapeTypes}),oldFilters:JSON.stringify({accessLevels:D.accessLevels,categories:D.categories,shapeTypes:D.shapeTypes})});const ke=Object.keys(Z.accessLevels).filter(ne=>D.accessLevels[ne]!==Z.accessLevels[ne]),Me=Object.keys(Z.categories).filter(ne=>D.categories[ne]!==Z.categories[ne]),Ge=Object.keys(Z.shapeTypes).filter(ne=>D.shapeTypes[ne]!==Z.shapeTypes[ne]),ce=ke.length>0||Me.length>0||Ge.length>0;console.log("[DrawingTools][watch filters] Diffrences dtectes:",{accessLevelsDiff:ke,categoriesDiff:Me,shapeTypesDiff:Ge,hasChanges:ce}),o.value==="filters"?(console.log("[DrawingTools][watch filters] Onglet filtres actif, application des filtres"),Ee()):console.log("[DrawingTools][watch filters] Onglet filtres non actif, pas d'application automatique")},{deep:!0});const pe=Z=>{le("tool-change",t.currentTool===Z?"":Z),window.innerWidth<768&&le("close-drawer")};return(Z,D)=>{var ke,Me,Ge,ce;return $e(),He("div",MI,[D[94]||(D[94]=E("div",{class:"p-3 bg-gray-50 border-b border-gray-200 flex justify-between items-center md:flex hidden"},[E("h3",{class:"text-sm font-semibold text-gray-700"},"Outils de dessin")],-1)),E("div",AI,[E("nav",kI,[E("button",{onClick:D[0]||(D[0]=ne=>o.value="tools"),class:Fi([o.value==="tools"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},D[44]||(D[44]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),E("span",null,"Outils",-1)]),2),e.selectedShape&&((ke=e.selectedShape.properties)==null?void 0:ke.type)!=="Note"?($e(),He("button",{key:0,onClick:D[1]||(D[1]=ne=>o.value="style"),class:Fi([o.value==="style"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},D[45]||(D[45]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})],-1),E("span",null,"Style",-1)]),2)):cn("",!0),E("button",{onClick:ue,class:Fi([o.value==="filters"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},D[46]||(D[46]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1),E("span",null,"Filtres",-1)]),2)])]),E("div",TI,[o.value==="tools"?($e(),He("div",NI,[E("div",DI,[($e(!0),He(Tn,null,xr(i.filter(ne=>ne.type!=="delete"),ne=>($e(),He("button",{key:ne.type,class:Fi(["flex items-center justify-center p-2 rounded-md border",{"bg-blue-50 border-blue-300 text-blue-700 shadow-sm":e.currentTool===ne.type}]),onClick:ye=>pe(ne.type),title:ne.label},[E("span",{class:"icon",innerHTML:s(ne.type)},null,8,OI)],10,II))),128))]),e.selectedShape?($e(),He("button",{key:0,class:Fi(["w-full mt-2 p-2 rounded-md border border-red-200 bg-red-50 text-red-600 hover:bg-red-100 flex items-center justify-center",{"bg-red-100":e.currentTool==="delete"}]),onClick:D[2]||(D[2]=ne=>Z.$emit("delete-shape")),title:"Supprimer la forme"},D[47]||(D[47]=[E("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),E("span",{class:"text-sm"},"Supprimer",-1)]),2)):cn("",!0),e.selectedShape&&$.value?($e(),He("div",BI)):cn("",!0),e.selectedShape&&$.value?($e(),He("div",RI,[E("div",FI,[D[48]||(D[48]=E("label",{for:"shapeName",class:"block text-sm font-medium text-gray-700 mb-1"},"Nom de la forme",-1)),Fn(E("input",{type:"text",id:"shapeName","onUpdate:modelValue":D[3]||(D[3]=ne=>M.value=ne),onChange:B,placeholder:"Donnez un nom  cette forme",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},null,544),[[ri,M.value]])]),E("div",jI,[D[50]||(D[50]=E("label",{for:"shapeCategory",class:"block text-sm font-medium text-gray-700 mb-1"},"Catgorie",-1)),Fn(E("select",{id:"shapeCategory","onUpdate:modelValue":D[4]||(D[4]=ne=>k.value=ne),onChange:z,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},D[49]||(D[49]=[zu('<option value="forages" data-v-02201fea>Forages</option><option value="clients" data-v-02201fea>Clients</option><option value="entrepots" data-v-02201fea>Entrepts</option><option value="livraisons" data-v-02201fea>Lieux de livraison</option><option value="cultures" data-v-02201fea>Cultures</option><option value="parcelles" data-v-02201fea>Noms des parcelles</option><option value="default" data-v-02201fea>Autre</option>',7)]),544),[[uo,k.value]])]),E("div",zI,[D[52]||(D[52]=E("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700 mb-1"},"Niveau d'accs",-1)),D[53]||(D[53]=E("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Dfinit qui peut voir cet lment sur la carte. ",-1)),Fn(E("select",{id:"accessLevel","onUpdate:modelValue":D[5]||(D[5]=ne=>N.value=ne),onChange:W,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},D[51]||(D[51]=[E("option",{value:"company"},"Entreprise uniquement",-1),E("option",{value:"employee"},"Entreprise et salaris",-1),E("option",{value:"visitor"},"Tous (visiteurs inclus)",-1)]),544),[[uo,N.value]])]),E("div",$I,[$.value.type==="Polygon"?($e(),He("div",UI,[E("div",VI,[D[54]||(D[54]=E("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),E("span",GI,Wt(Y($.value.surface||0)),1)]),E("div",HI,[D[55]||(D[55]=E("span",{class:"text-sm font-semibold text-gray-700"},"Primtre :",-1)),E("span",qI,Wt(Te($.value.perimeter||0)),1)])])):$.value.type==="Line"?($e(),He(Tn,{key:1},[D[56]||(D[56]=E("span",{class:"text-sm font-semibold text-gray-700"},"Longueur :",-1)),E("span",WI,Wt(Te($.value.length||0)),1)],64)):$.value.type==="ElevationLine"?($e(),He(Tn,{key:2},[E("div",ZI,[E("div",KI,[D[57]||(D[57]=E("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Distance totale :",-1)),E("span",YI,Wt(Te($.value.length||0)),1)]),E("div",JI,[D[58]||(D[58]=E("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Dnivel + :",-1)),E("span",XI,Wt(Te($.value.elevationGain||0)),1)]),E("div",QI,[D[59]||(D[59]=E("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Dnivel - :",-1)),E("span",eO,Wt(Te($.value.elevationLoss||0)),1)]),E("div",tO,[D[60]||(D[60]=E("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Pente moy. :",-1)),E("span",nO,Wt(q($.value.averageSlope||0)),1)]),E("div",rO,[D[61]||(D[61]=E("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Pente max :",-1)),E("span",iO,Wt(q($.value.maxSlope||0)),1)])]),E("div",oO,[E("canvas",sO,null,512)],512)],64)):cn("",!0)])])):cn("",!0)])):cn("",!0),o.value==="style"&&e.selectedShape&&((Me=e.selectedShape.properties)==null?void 0:Me.type)!=="Note"?($e(),He("div",aO,[E("div",lO,[($e(),He(Tn,null,xr(K,ne=>E("button",{key:ne,class:"w-8 h-8 rounded-full",style:Hl({backgroundColor:ne}),onClick:ye=>R(ne),title:ne},null,12,uO)),64))]),((Ge=$.value)==null?void 0:Ge.type)!=="TextRectangle"?($e(),He("div",cO,[E("div",fO,[D[62]||(D[62]=E("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),E("div",hO,[Fn(E("input",{type:"color","onUpdate:modelValue":D[6]||(D[6]=ne=>f.value=ne),class:"w-16 h-8 rounded border",onChange:D[7]||(D[7]=ne=>O({strokeColor:f.value})),title:"Couleur du contour"},null,544),[[ri,f.value]]),Fn(E("input",{type:"range","onUpdate:modelValue":D[8]||(D[8]=ne=>d.value=ne),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:D[9]||(D[9]=ne=>O({strokeWidth:d.value})),title:"paisseur du contour"},null,544),[[ri,d.value]])])]),E("div",dO,[D[63]||(D[63]=E("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Style",-1)),Fn(E("select",{"onUpdate:modelValue":D[10]||(D[10]=ne=>g.value=ne),class:"w-full rounded border",onChange:D[11]||(D[11]=ne=>O({strokeStyle:g.value}))},[($e(),He(Tn,null,xr(Q,ne=>E("option",{key:ne.value,value:ne.value},Wt(ne.label),9,pO)),64))],544),[[uo,g.value]])]),_.value?($e(),He("div",gO,[D[64]||(D[64]=E("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),E("div",mO,[Fn(E("input",{type:"color","onUpdate:modelValue":D[12]||(D[12]=ne=>y.value=ne),class:"w-16 h-8 rounded border",onChange:D[13]||(D[13]=ne=>O({fillColor:y.value})),title:"Couleur de remplissage"},null,544),[[ri,y.value]]),Fn(E("input",{type:"range","onUpdate:modelValue":D[14]||(D[14]=ne=>x.value=ne),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:D[15]||(D[15]=ne=>O({fillOpacity:x.value})),title:"Opacit du remplissage"},null,544),[[ri,x.value]])])])):cn("",!0)])):cn("",!0),((ce=$.value)==null?void 0:ce.type)==="TextRectangle"?($e(),He("div",vO,[E("div",yO,[D[65]||(D[65]=E("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),E("div",_O,[Fn(E("input",{type:"color","onUpdate:modelValue":D[16]||(D[16]=ne=>f.value=ne),class:"w-16 h-8 rounded border",onChange:D[17]||(D[17]=ne=>O({strokeColor:f.value})),title:"Couleur du contour"},null,544),[[ri,f.value]]),Fn(E("input",{type:"range","onUpdate:modelValue":D[18]||(D[18]=ne=>d.value=ne),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:D[19]||(D[19]=ne=>O({strokeWidth:d.value})),title:"paisseur du contour"},null,544),[[ri,d.value]])])]),E("div",bO,[D[66]||(D[66]=E("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),E("div",wO,[Fn(E("input",{type:"color","onUpdate:modelValue":D[20]||(D[20]=ne=>y.value=ne),class:"w-16 h-8 rounded border",onChange:D[21]||(D[21]=ne=>O({fillColor:y.value})),title:"Couleur de remplissage"},null,544),[[ri,y.value]]),Fn(E("input",{type:"range","onUpdate:modelValue":D[22]||(D[22]=ne=>x.value=ne),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:D[23]||(D[23]=ne=>O({fillOpacity:x.value})),title:"Opacit du remplissage"},null,544),[[ri,x.value]])])])])):cn("",!0)])):cn("",!0),o.value==="filters"?($e(),He("div",xO,[E("div",LO,[D[69]||(D[69]=E("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Niveau d'accs",-1)),D[70]||(D[70]=E("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Slectionnez votre niveau d'accs pour filtrer les lments visibles sur la carte. ",-1)),E("div",null,[Fn(E("select",{"onUpdate:modelValue":D[24]||(D[24]=ne=>he.value=ne),onChange:D[25]||(D[25]=ne=>G(he.value)),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-sm"},D[67]||(D[67]=[E("option",{value:"company"},"Entreprise (accs  tout)",-1),E("option",{value:"employee"},"Salaris (accs niveau salaris et visiteurs)",-1),E("option",{value:"visitor"},"Visiteurs (accs niveau visiteurs uniquement)",-1)]),544),[[uo,he.value]]),D[68]||(D[68]=E("div",{class:"mt-2 text-xs text-gray-500"},[E("p",null,[E("strong",null,"Entreprise"),Ei(" : Vous verrez tous les lments (entreprise, salaris, visiteurs)")]),E("p",null,[E("strong",null,"Salaris"),Ei(" : Vous verrez les lments pour salaris et visiteurs")]),E("p",null,[E("strong",null,"Visiteurs"),Ei(" : Vous ne verrez que les lments pour visiteurs")])],-1))])]),E("div",SO,[D[77]||(D[77]=E("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"lments",-1)),E("div",CO,[E("label",EO,[Fn(E("input",{type:"checkbox","onUpdate:modelValue":D[26]||(D[26]=ne=>fe.categories.forages=ne),onChange:ee,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Ll,fe.categories.forages]]),D[71]||(D[71]=E("span",{class:"ml-2 text-sm text-gray-700"},"Forages",-1))]),E("label",PO,[Fn(E("input",{type:"checkbox","onUpdate:modelValue":D[27]||(D[27]=ne=>fe.categories.clients=ne),onChange:ee,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Ll,fe.categories.clients]]),D[72]||(D[72]=E("span",{class:"ml-2 text-sm text-gray-700"},"Clients",-1))]),E("label",MO,[Fn(E("input",{type:"checkbox","onUpdate:modelValue":D[28]||(D[28]=ne=>fe.categories.entrepots=ne),onChange:ee,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Ll,fe.categories.entrepots]]),D[73]||(D[73]=E("span",{class:"ml-2 text-sm text-gray-700"},"Entrepts",-1))]),E("label",AO,[Fn(E("input",{type:"checkbox","onUpdate:modelValue":D[29]||(D[29]=ne=>fe.categories.livraisons=ne),onChange:ee,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Ll,fe.categories.livraisons]]),D[74]||(D[74]=E("span",{class:"ml-2 text-sm text-gray-700"},"Lieux de livraison",-1))]),E("label",kO,[Fn(E("input",{type:"checkbox","onUpdate:modelValue":D[30]||(D[30]=ne=>fe.categories.cultures=ne),onChange:ee,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Ll,fe.categories.cultures]]),D[75]||(D[75]=E("span",{class:"ml-2 text-sm text-gray-700"},"Cultures",-1))]),E("label",TO,[Fn(E("input",{type:"checkbox","onUpdate:modelValue":D[31]||(D[31]=ne=>fe.categories.parcelles=ne),onChange:ee,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Ll,fe.categories.parcelles]]),D[76]||(D[76]=E("span",{class:"ml-2 text-sm text-gray-700"},"Noms des parcelles",-1))])])]),E("div",NO,[D[82]||(D[82]=E("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Types de formes",-1)),E("div",DO,[E("label",IO,[Fn(E("input",{type:"checkbox","onUpdate:modelValue":D[32]||(D[32]=ne=>fe.shapeTypes.Polygon=ne),onChange:ee,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Ll,fe.shapeTypes.Polygon]]),D[78]||(D[78]=E("span",{class:"ml-2 text-sm text-gray-700"},"Polygones",-1))]),E("label",OO,[Fn(E("input",{type:"checkbox","onUpdate:modelValue":D[33]||(D[33]=ne=>fe.shapeTypes.Line=ne),onChange:ee,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Ll,fe.shapeTypes.Line]]),D[79]||(D[79]=E("span",{class:"ml-2 text-sm text-gray-700"},"Lignes",-1))]),E("label",BO,[Fn(E("input",{type:"checkbox","onUpdate:modelValue":D[34]||(D[34]=ne=>fe.shapeTypes.ElevationLine=ne),onChange:ee,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Ll,fe.shapeTypes.ElevationLine]]),D[80]||(D[80]=E("span",{class:"ml-2 text-sm text-gray-700"},"Profils altimtriques",-1))]),E("label",RO,[Fn(E("input",{type:"checkbox","onUpdate:modelValue":D[35]||(D[35]=ne=>fe.shapeTypes.Note=ne),onChange:ee,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Ll,fe.shapeTypes.Note]]),D[81]||(D[81]=E("span",{class:"ml-2 text-sm text-gray-700"},"Notes",-1))])])]),E("div",{class:"pt-2"},[E("button",{onClick:xe,class:"w-full px-3 py-2 bg-gray-100 text-gray-700 text-sm rounded hover:bg-gray-200 transition-colors"}," Rinitialiser ")])])):cn("",!0)]),e.selectedShape&&$.value&&$.value.type==="ElevationLine"?($e(),He("div",FO,[E("button",{class:"flex items-center justify-between w-full text-sm font-semibold text-gray-700",onClick:D[36]||(D[36]=ne=>X("samplePoints"))},[D[84]||(D[84]=E("span",null,"Points d'chantillonnage",-1)),($e(),He("svg",{class:Fi(["w-4 h-4",{"rotate-180":!u.value.samplePoints}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},D[83]||(D[83]=[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),Fn(E("div",jO,[E("div",zO,[D[89]||(D[89]=E("h4",{class:"text-sm font-semibold mb-2"},"Points normaux",-1)),E("div",$O,[E("div",null,[D[85]||(D[85]=E("label",{class:"text-xs text-gray-600"},"Taille",-1)),Fn(E("input",{type:"number","onUpdate:modelValue":D[37]||(D[37]=ne=>T.value.radius=ne),min:"2",max:"10",step:"1",class:"w-full px-2 py-1 border rounded",onChange:V},null,544),[[ri,T.value.radius]])]),E("div",null,[D[86]||(D[86]=E("label",{class:"text-xs text-gray-600"},"Couleur",-1)),Fn(E("input",{type:"color","onUpdate:modelValue":D[38]||(D[38]=ne=>T.value.color=ne),class:"w-full h-8 px-1 border rounded",onChange:V},null,544),[[ri,T.value.color]])]),E("div",null,[D[87]||(D[87]=E("label",{class:"text-xs text-gray-600"},"Opacit",-1)),Fn(E("input",{type:"range","onUpdate:modelValue":D[39]||(D[39]=ne=>T.value.fillOpacity=ne),min:"0",max:"1",step:"0.1",class:"w-full",onChange:V},null,544),[[ri,T.value.fillOpacity]])]),E("div",null,[D[88]||(D[88]=E("label",{class:"text-xs text-gray-600"},"Bordure",-1)),Fn(E("input",{type:"number","onUpdate:modelValue":D[40]||(D[40]=ne=>T.value.weight=ne),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:V},null,544),[[ri,T.value.weight]])])])]),E("div",null,[D[93]||(D[93]=E("h4",{class:"text-sm font-semibold mb-2"},"Points min/max",-1)),E("div",UO,[E("div",null,[D[90]||(D[90]=E("label",{class:"text-xs text-gray-600"},"Taille",-1)),Fn(E("input",{type:"number","onUpdate:modelValue":D[41]||(D[41]=ne=>F.value.radius=ne),min:"4",max:"12",step:"1",class:"w-full px-2 py-1 border rounded",onChange:oe},null,544),[[ri,F.value.radius]])]),E("div",null,[D[91]||(D[91]=E("label",{class:"text-xs text-gray-600"},"Bordure",-1)),Fn(E("input",{type:"number","onUpdate:modelValue":D[42]||(D[42]=ne=>F.value.weight=ne),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:oe},null,544),[[ri,F.value.weight]])]),E("div",null,[D[92]||(D[92]=E("label",{class:"text-xs text-gray-600"},"Opacit",-1)),Fn(E("input",{type:"range","onUpdate:modelValue":D[43]||(D[43]=ne=>F.value.fillOpacity=ne),min:"0",max:"1",step:"0.1",class:"w-full",onChange:oe},null,544),[[ri,F.value.fillOpacity]])])])])],512),[[H0,!u.value.samplePoints]])])):cn("",!0)])}}}),GO=Rp(VO,[["__scopeId","data-v-02201fea"]]),HO={class:"map-toolbar w-full"},qO={class:"hidden md:flex items-center space-x-2"},WO={class:"dropdown"},ZO={class:"dropdown-menu"},KO=["onClick"],YO={key:0,class:"border-l pl-2 flex-1"},JO={class:"flex items-center"},XO={class:"plan-info"},QO={class:"plan-name"},eB={key:0,class:"plan-description"},tB={class:"border-l pl-2 ml-auto"},nB={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},rB={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},iB={key:"saving"},oB={key:"success",class:"save-success-text"},sB={key:"default"},aB={class:"md:hidden"},lB={class:"flex justify-between items-center"},uB={key:0,class:"truncate mx-2 text-sm font-medium"},cB={key:0,class:"mobile-menu mt-0 bg-white shadow-lg p-4 z-[1900] fixed left-0 right-0 w-full"},fB={class:"flex justify-between items-center mb-3 border-b pb-2"},hB={class:"flex flex-col space-y-4"},dB={key:0,class:"flex flex-col pb-3 border-b"},pB={class:"text-sm font-semibold text-gray-800"},gB={key:0,class:"text-xs text-gray-600 mt-1"},mB={class:"flex flex-col"},vB={class:"grid grid-cols-3 gap-2"},yB=["onClick"],_B={key:0,class:"animate-spin h-4 w-4 mr-2 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},bB={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},wB={key:"saving"},xB={key:"success",class:"save-success-text"},LB={key:"default"},SB=cs({__name:"MapToolbar",props:{lastSave:{},planName:{},planDescription:{},saveStatus:{}},emits:["change-map-type","create-new-plan","load-plan","save-plan","adjust-view","generate-summary"],setup(e,{emit:n}){const t=n,r=e,i=jt("Hybride"),s=jt(!1),o=N=>{const T=N.currentTarget,F=T.nextElementSibling;if(F&&F.classList.contains("dropdown-menu")){const K=T.getBoundingClientRect();F.style.top=`${K.bottom}px`,F.style.left=`${K.left}px`}},u={Hybride:"Hybride",Cadastre:"Cadastre",IGN:"IGN"},f=cr(()=>r.lastSave?new Date(r.lastSave).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Jamais"),d=N=>{i.value=N,t("change-map-type",N),k()},g=()=>{t("create-new-plan"),k()},y=()=>{t("load-plan"),k()},x=()=>{t("save-plan"),k()},_=()=>{t("adjust-view"),k()},M=()=>{t("generate-summary"),k()},k=()=>{s.value=!1};return(N,T)=>($e(),He("div",HO,[E("div",qO,[E("div",WO,[E("button",{class:"btn-toolbar dropdown-toggle",onMouseover:o},[T[2]||(T[2]=E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M12 1.586l-4 4V17h8V5.586l-4-4zM2 17V9.276l4-3.638V17H2zM2 8.162V3h4.5L12 8.5V17H6V5.638L2 8.162z","clip-rule":"evenodd"})],-1)),E("span",null,Wt(u[i.value]),1)],32),E("div",ZO,[($e(),He(Tn,null,xr(u,(F,K)=>E("button",{key:K,class:Fi(["dropdown-item",{active:K===i.value}]),onClick:Q=>d(K)},Wt(F),11,KO)),64))])]),N.planName?($e(),He("div",YO,[E("div",JO,[E("div",XO,[E("h2",QO,Wt(N.planName),1),N.planDescription?($e(),He("p",eB,Wt(N.planDescription),1)):cn("",!0)])])])):cn("",!0),E("div",{class:"border-l pl-2"},[E("div",{class:"flex items-center space-x-1"},[E("button",{onClick:g,class:"btn-toolbar",title:"Nouveau plan"},T[3]||(T[3]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),E("span",{class:"hidden lg:inline ml-1"},"Nouveau",-1)])),E("button",{onClick:y,class:"btn-toolbar",title:"Charger un plan"},T[4]||(T[4]=[zu('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" data-v-bcd65717><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" data-v-bcd65717></path><path d="M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z" data-v-bcd65717></path><path fill-rule="evenodd" d="M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z" clip-rule="evenodd" data-v-bcd65717></path></svg><span class="hidden lg:inline ml-1" data-v-bcd65717>Charger</span>',2)])),E("button",{onClick:x,class:"btn-toolbar",title:"Enregistrer le plan"},T[5]||(T[5]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1),E("span",{class:"hidden lg:inline ml-1"},"Enregistrer",-1)]))])]),E("div",{class:"border-l pl-2"},[E("div",{class:"flex items-center space-x-1"},[E("button",{onClick:_,class:"btn-toolbar",title:"Ajuster la vue"},T[6]||(T[6]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),E("span",{class:"hidden lg:inline ml-1"},"Ajuster",-1)])),E("button",{onClick:M,class:"btn-toolbar",title:"Gnrer une synthse"},T[7]||(T[7]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),E("span",{class:"hidden lg:inline ml-1"},"Synthse",-1)]))])]),E("div",tB,[E("div",{class:Fi(["text-xs hidden lg:flex items-center",{"text-gray-500":!N.saveStatus,"text-primary-600 font-medium":N.saveStatus==="success","text-blue-600 font-medium":N.saveStatus==="saving"}])},[N.saveStatus==="saving"?($e(),He("svg",nB,T[8]||(T[8]=[E("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),E("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):cn("",!0),N.saveStatus==="success"?($e(),He("svg",rB,T[9]||(T[9]=[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):cn("",!0),pi(Gv,{name:"fade-slide",mode:"out-in"},{default:pu(()=>[N.saveStatus==="saving"?($e(),He("span",iB," Sauvegarde en cours... ")):N.saveStatus==="success"?($e(),He("span",oB," Sauvegarde russie ! ")):($e(),He("span",sB," Dernire modification : "+Wt(f.value),1))]),_:1})],2)])]),E("div",aB,[E("div",lB,[E("button",{onClick:T[0]||(T[0]=F=>s.value=!s.value),class:"p-2 rounded-md border bg-white shadow-sm"},T[10]||(T[10]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1)])),N.planName?($e(),He("div",uB,Wt(N.planName),1)):cn("",!0),E("div",{class:"flex space-x-2"},[E("button",{onClick:g,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},T[11]||(T[11]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1)])),E("button",{onClick:x,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},T[12]||(T[12]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1)])),E("button",{onClick:_,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},T[13]||(T[13]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)]))])]),s.value?($e(),He("div",cB,[E("div",fB,[T[15]||(T[15]=E("h3",{class:"text-base font-semibold text-gray-800"},"Menu",-1)),E("button",{onClick:T[1]||(T[1]=F=>s.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},T[14]||(T[14]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("div",hB,[N.planName?($e(),He("div",dB,[E("h3",pB,Wt(N.planName),1),N.planDescription?($e(),He("p",gB,Wt(N.planDescription),1)):cn("",!0)])):cn("",!0),E("div",mB,[T[16]||(T[16]=E("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Type de carte",-1)),E("div",vB,[($e(),He(Tn,null,xr(u,(F,K)=>E("button",{key:K,class:Fi(["px-3 py-2 text-sm rounded-md border shadow-sm",{"bg-blue-50 border-blue-300 text-blue-700 font-medium":K===i.value}]),onClick:Q=>d(K)},Wt(F),11,yB)),64))])]),E("div",{class:"flex flex-col"},[T[20]||(T[20]=E("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Outils de plan",-1)),E("div",{class:"grid grid-cols-3 gap-2"},[E("button",{onClick:g,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},T[17]||(T[17]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),Ei(" Nouveau ")])),E("button",{onClick:y,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},T[18]||(T[18]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"}),E("path",{d:"M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z"}),E("path",{"fill-rule":"evenodd",d:"M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),Ei(" Charger ")])),E("button",{onClick:M,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},T[19]||(T[19]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),Ei(" Synthse ")]))])]),E("div",{class:Fi(["text-sm text-center pt-3 border-t flex items-center justify-center space-x-1 mt-2",{"text-gray-500":!N.saveStatus,"text-primary-600 font-medium":N.saveStatus==="success","text-blue-600 font-medium":N.saveStatus==="saving"}])},[N.saveStatus==="saving"?($e(),He("svg",_B,T[21]||(T[21]=[E("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),E("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):cn("",!0),N.saveStatus==="success"?($e(),He("svg",bB,T[22]||(T[22]=[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):cn("",!0),pi(Gv,{name:"fade-slide",mode:"out-in"},{default:pu(()=>[N.saveStatus==="saving"?($e(),He("span",wB," Sauvegarde en cours... ")):N.saveStatus==="success"?($e(),He("span",xB," Sauvegarde russie ! ")):($e(),He("span",LB," Dernire modification : "+Wt(f.value),1))]),_:1})],2)])])):cn("",!0)])]))}}),CB=Rp(SB,[["__scopeId","data-v-bcd65717"]]),EB={class:"comment-thread"},PB={key:0,class:"space-y-3 mb-4"},MB={class:"flex justify-between items-start"},AB={class:"flex items-center"},kB={class:"font-medium text-sm text-gray-900"},TB={class:"flex items-center"},NB={class:"text-xs text-gray-500"},DB=["onClick"],IB={class:"mt-1 text-sm text-gray-700 whitespace-pre-wrap"},OB={key:1,class:"text-center text-sm text-gray-500 italic my-4"},BB={key:2,class:"mt-3"},RB={class:"flex justify-end mt-2"},FB=["disabled"],jB={key:3,class:"text-center text-sm text-gray-500 italic mt-2"},zB=cs({__name:"CommentThread",props:{noteId:{},comments:{}},emits:["update:comments"],setup(e,{emit:n}){const t=e,r=ma(),i=Fp(),s=Vu(),o=jt(""),u=cr(()=>r.isEntreprise||r.isAdmin);function f(M){return r.user&&M.userId===r.user.id||r.isAdmin}async function d(){var M;if(o.value.trim())try{await i.addComment(t.noteId,o.value.trim()),o.value="",s.success("Commentaire ajout avec succs")}catch(k){if(console.error("Erreur lors de l'ajout du commentaire:",k),(M=k.response)!=null&&M.data){const N=k.response.data;N.note?s.error(`Erreur: ${N.note[0]}`):N.user?s.error(`Erreur: ${N.user[0]}`):N.text?s.error(`Erreur: ${N.text[0]}`):s.error("Erreur lors de l'ajout du commentaire")}else s.error("Erreur lors de l'ajout du commentaire")}}async function g(M){var k;if(confirm("Voulez-vous vraiment supprimer ce commentaire ?"))try{await i.removeComment(t.noteId,M),s.success("Commentaire supprim")}catch(N){if(console.error("Erreur lors de la suppression du commentaire:",N),(k=N.response)!=null&&k.data){const T=N.response.data;T.detail?s.error(`Erreur: ${T.detail}`):s.error("Erreur lors de la suppression du commentaire")}else s.error("Erreur lors de la suppression du commentaire")}}function y(M){const k=new Date(M);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(k)}function x(M){switch(M){case"admin":return"bg-purple-100 text-purple-800";case"entreprise":return"bg-blue-100 text-blue-800";case"salarie":return"bg-green-100 text-green-800";case"visiteur":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}function _(M){switch(M){case"admin":return"Admin";case"entreprise":return"Entreprise";case"salarie":return"Salari";case"visiteur":return"Visiteur";default:return M}}return(M,k)=>($e(),He("div",EB,[M.comments&&M.comments.length>0?($e(),He("div",PB,[($e(!0),He(Tn,null,xr(M.comments,N=>($e(),He("div",{key:N.id,class:"bg-gray-50 rounded-lg p-3"},[E("div",MB,[E("div",AB,[E("div",kB,Wt(N.userName),1),E("span",{class:Fi(["ml-2 text-xs px-2 py-0.5 rounded-full",x(N.userRole)])},Wt(_(N.userRole)),3)]),E("div",TB,[E("span",NB,Wt(y(N.createdAt)),1),f(N)?($e(),He("button",{key:0,onClick:T=>g(N.id),class:"ml-2 text-gray-400 hover:text-red-500"},k[1]||(k[1]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,DB)):cn("",!0)])]),E("p",IB,Wt(N.text),1)]))),128))])):($e(),He("div",OB," Aucun commentaire pour le moment ")),u.value?($e(),He("div",BB,[Fn(E("textarea",{"onUpdate:modelValue":k[0]||(k[0]=N=>o.value=N),placeholder:"Ajouter un commentaire...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:"2"},null,512),[[ri,o.value]]),E("div",RB,[E("button",{onClick:d,disabled:!o.value.trim(),class:"px-3 py-1 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"}," Ajouter ",8,FB)])])):($e(),He("div",jB," Seuls les utilisateurs de l'entreprise peuvent ajouter des commentaires "))]))}}),$B={class:"photo-gallery"},UB={key:0,class:"grid grid-cols-2 gap-2 mb-4"},VB=["src","alt","onClick"],GB={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 rounded-lg flex items-center justify-center"},HB={class:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex space-x-2"},qB=["onClick"],WB=["onClick"],ZB={key:0,class:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs p-1 truncate rounded-b-lg"},KB={key:1,class:"text-center text-sm text-gray-500 italic my-4"},YB={class:"flex space-x-2 mt-3"},JB={for:"photo-upload",class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 cursor-pointer"},XB={key:2,class:"fixed inset-0 z-[3002] flex items-center justify-center p-4 bg-black bg-opacity-75"},QB={class:"relative max-w-3xl max-h-[90vh] bg-white rounded-lg overflow-hidden"},eR=["src","alt"],tR={key:1,class:"p-3 bg-white"},nR={class:"text-sm text-gray-700"},rR={key:3,class:"fixed inset-0 z-[3002] flex items-center justify-center p-4 bg-black bg-opacity-75"},iR={class:"w-full max-w-md bg-white rounded-lg overflow-hidden"},oR={class:"p-4"},sR={class:"p-4 bg-gray-50 flex justify-end space-x-3"},aR={key:4,class:"fixed inset-0 z-[3002] flex items-center justify-center p-4 bg-black bg-opacity-75"},lR={class:"w-full max-w-md bg-white rounded-lg overflow-hidden"},uR={class:"p-4 border-b flex justify-between items-center"},cR={class:"relative"},fR=["src"],hR={class:"p-4 bg-gray-50 flex justify-center"},dR={key:1,class:"flex space-x-3"},pR=cs({__name:"PhotoGallery",props:{noteId:{},photos:{}},emits:["update:photos"],setup(e,{emit:n}){const t=e,r=Fp(),i=Vu(),s=jt(null),o=jt(null);let u=null;const f=jt(!1),d=jt(!1),g=jt(!1),y=jt(null),x=jt(null),_=jt(""),M=jt(null);function k(X){y.value=X,f.value=!0}function N(X){x.value=X,_.value=X.caption||"",d.value=!0}function T(){if(x.value)try{r.updatePhoto(t.noteId,x.value.id,_.value),d.value=!1,i.success("Lgende mise  jour")}catch(X){console.error("Erreur lors de la mise  jour de la lgende:",X),i.error("Erreur lors de la mise  jour de la lgende")}}function F(X){if(confirm("tes-vous sr de vouloir supprimer cette photo ?"))try{r.removePhoto(t.noteId,X),i.success("Photo supprime")}catch(R){console.error("Erreur lors de la suppression de la photo:",R),i.error("Erreur lors de la suppression de la photo")}}async function K(X){const R=X.target;if(!R.files||R.files.length===0)return;const O=R.files[0];if(!O.type.startsWith("image/")){i.error("Le fichier doit tre une image");return}if(O.size>5*1024*1024){i.error("L'image est trop volumineuse (max 5MB)");return}try{const B=await Q(O);r.addPhoto(t.noteId,{url:B}),R.value="",i.success("Photo ajoute")}catch(B){console.error("Erreur lors de l'ajout de la photo:",B),i.error("Erreur lors de l'ajout de la photo")}}function Q(X){return new Promise((R,O)=>{const B=new FileReader;B.onload=()=>R(B.result),B.onerror=O,B.readAsDataURL(X)})}async function he(){g.value=!0,M.value=null;try{u=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}}),s.value&&(s.value.srcObject=u)}catch(X){console.error("Erreur lors de l'accs  la camra:",X),i.error("Impossible d'accder  la camra"),g.value=!1}}function fe(){if(!s.value||!o.value)return;const X=s.value,R=o.value;R.width=X.videoWidth,R.height=X.videoHeight;const O=R.getContext("2d");O&&(O.drawImage(X,0,0,R.width,R.height),M.value=R.toDataURL("image/jpeg"))}function me(){M.value=null}function G(){if(M.value)try{r.addPhoto(t.noteId,{url:M.value}),g.value=!1,$(),i.success("Photo ajoute")}catch(X){console.error("Erreur lors de l'ajout de la photo:",X),i.error("Erreur lors de l'ajout de la photo")}}function $(){u&&(u.getTracks().forEach(X=>X.stop()),u=null)}return mc(()=>{$()}),(X,R)=>($e(),He("div",$B,[X.photos&&X.photos.length>0?($e(),He("div",UB,[($e(!0),He(Tn,null,xr(X.photos,O=>($e(),He("div",{key:O.id,class:"relative group"},[E("img",{src:O.url,alt:O.caption||"Photo",class:"w-full h-32 object-cover rounded-lg cursor-pointer",onClick:B=>k(O)},null,8,VB),E("div",GB,[E("div",HB,[E("button",{onClick:Cf(B=>N(O),["stop"]),class:"p-1 bg-white rounded-full text-gray-700 hover:text-primary-600",title:"Modifier la lgende"},R[4]||(R[4]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,qB),E("button",{onClick:Cf(B=>F(O.id),["stop"]),class:"p-1 bg-white rounded-full text-gray-700 hover:text-red-600",title:"Supprimer la photo"},R[5]||(R[5]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,WB)])]),O.caption?($e(),He("div",ZB,Wt(O.caption),1)):cn("",!0)]))),128))])):($e(),He("div",KB," Aucune photo pour le moment ")),E("div",YB,[E("button",{onClick:he,class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},R[6]||(R[6]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),Ei(" Prendre une photo ")])),E("label",JB,[R[7]||(R[7]=E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0l-4 4m4-4v12"})],-1)),R[8]||(R[8]=Ei(" Tlverser ")),E("input",{id:"photo-upload",type:"file",accept:"image/*",class:"hidden",onChange:K},null,32)])]),f.value?($e(),He("div",XB,[E("div",QB,[E("button",{onClick:R[0]||(R[0]=O=>f.value=!1),class:"absolute top-2 right-2 z-10 p-1 bg-white rounded-full text-gray-700 hover:text-red-600 shadow-md"},R[9]||(R[9]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),y.value?($e(),He("img",{key:0,src:y.value.url,alt:y.value.caption||"Photo",class:"max-h-[80vh] max-w-full object-contain"},null,8,eR)):cn("",!0),y.value&&y.value.caption?($e(),He("div",tR,[E("p",nR,Wt(y.value.caption),1)])):cn("",!0)])])):cn("",!0),d.value?($e(),He("div",rR,[E("div",iR,[R[10]||(R[10]=E("div",{class:"p-4 border-b"},[E("h3",{class:"text-lg font-medium text-gray-900"},"Modifier la lgende")],-1)),E("div",oR,[Fn(E("textarea",{"onUpdate:modelValue":R[1]||(R[1]=O=>_.value=O),placeholder:"Ajouter une lgende...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:"3"},null,512),[[ri,_.value]])]),E("div",sR,[E("button",{onClick:R[2]||(R[2]=O=>d.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Annuler "),E("button",{onClick:T,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Enregistrer ")])])])):cn("",!0),g.value?($e(),He("div",aR,[E("div",lR,[E("div",uR,[R[12]||(R[12]=E("h3",{class:"text-lg font-medium text-gray-900"},"Prendre une photo",-1)),E("button",{onClick:R[3]||(R[3]=O=>g.value=!1),class:"text-gray-400 hover:text-gray-500"},R[11]||(R[11]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("div",cR,[M.value?($e(),He("img",{key:1,src:M.value,class:"w-full h-64 object-cover",alt:"Captured"},null,8,fR)):($e(),He("video",{key:0,ref_key:"videoElement",ref:s,autoplay:"",class:"w-full h-64 object-cover"},null,512)),E("canvas",{ref_key:"canvasElement",ref:o,class:"hidden"},null,512)]),E("div",hR,[M.value?($e(),He("div",dR,[E("button",{onClick:me,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Reprendre "),E("button",{onClick:G,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Utiliser ")])):($e(),He("button",{key:0,onClick:fe,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-full w-12 h-12 flex items-center justify-center hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},R[13]||(R[13]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"})],-1)])))])])])):cn("",!0)]))}}),gR={class:"fixed z-[9999] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},mR={class:"flex items-center justify-center min-h-screen w-full"},vR={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-2xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden"},yR={class:"p-4 md:p-6 flex-1 overflow-y-auto"},_R={class:"flex justify-between items-center mb-4 border-b pb-4"},bR={class:"text-xl font-semibold text-gray-900"},wR={class:"mb-4 border-b border-gray-200"},xR={class:"flex space-x-4","aria-label":"Tabs"},LR={key:0,class:"ml-1 px-2 py-0.5 text-xs rounded-full bg-primary-100 text-primary-800"},SR={key:0,class:"ml-1 px-2 py-0.5 text-xs rounded-full bg-primary-100 text-primary-800"},CR={key:0},ER={class:"mb-4"},PR={class:"mb-4"},MR={key:0,class:"mb-4 p-2 rounded bg-gray-50 flex items-center"},AR={class:"mb-4"},kR=["value"],TR={class:"mb-4"},NR=["value"],DR={class:"mb-4"},IR={class:"mt-1 flex space-x-2"},OR=["onClick"],BR={key:1,class:"mt-4"},RR={key:2,class:"mt-4"},hx=cs({__name:"NoteEditModal",props:{note:{},isNewNote:{type:Boolean},location:{}},emits:["close","save"],setup(e,{emit:n}){const t=e,r=n,i=Fp(),s=Vu(),o=jt("info"),u=jt({title:"",description:"",columnId:"",accessLevel:Zi.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[],photos:[]});function f(N){return Array.isArray(N)?N:typeof N=="object"&&"type"in N&&"coordinates"in N?[N.coordinates[1],N.coordinates[0]]:(console.error("[NoteEditModal] Format de localisation non reconnu:",N),[0,0])}function d(N){if(!N)return new Date().toISOString();try{const T=new Date(N);return isNaN(T.getTime())?(console.warn("[NoteEditModal] Date invalide:",N),new Date().toISOString()):T.toISOString()}catch(T){return console.error("[NoteEditModal] Erreur lors de la cration de la date:",T),new Date().toISOString()}}Is(()=>{if(console.log("[NoteEditModal] onMounted - props:",t),t.note){console.log("[NoteEditModal] dition d'une note existante:",t.note);const N=JSON.parse(JSON.stringify(t.note));N.createdAt=d(N.createdAt),N.updatedAt=d(N.updatedAt),u.value=N}else if(t.isNewNote){if(console.log("[NoteEditModal] Cration d'une nouvelle note"),u.value={title:"Nouvelle note",description:"",columnId:i.getDefaultColumn.id||"1",accessLevel:Zi.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[],photos:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},t.location){console.log("[NoteEditModal] Ajout de la localisation:",t.location);const N=f(t.location);u.value.location=N}console.log("[NoteEditModal] Niveau d'accs initial:",u.value.accessLevel)}else console.error("[NoteEditModal] Erreur: Ni note existante ni nouvelle note");console.log("[NoteEditModal] editingNote.value aprs initialisation:",u.value)});const g=cr(()=>i.getSortedColumns),y=[{id:Zi.PRIVATE,title:"Priv",description:"Visible uniquement par vous"},{id:Zi.COMPANY,title:"Entreprise",description:"Visible par l'entreprise uniquement"},{id:Zi.EMPLOYEE,title:"Salaris",description:"Visible par l'entreprise et les salaris"},{id:Zi.VISITOR,title:"Visiteurs",description:"Visible par tous"}],x=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6B7280"];function _(N){if(console.log("[NoteEditModal] Mise  jour de la couleur:",N),u.value.style.color=N,u.value.style.fillColor=N,t.note&&!t.isNewNote&&u.value.location){const T=t.note._leaflet_id||t.note.id;console.log("[NoteEditModal] Mise  jour de la couleur sur la carte, noteId:",T,"color:",N);const F=new CustomEvent("geonote:updateStyle",{detail:{noteId:T,style:{color:N,fillColor:N}}});window.dispatchEvent(F)}else console.log("[NoteEditModal] Nouvelle note ou non golocalise, la couleur sera applique lors de la cration")}function M(){r("close")}async function k(){var N;try{const T={title:u.value.title,description:u.value.description,columnId:u.value.columnId,style:u.value.style,access_level:u.value.accessLevel,comments:u.value.comments||[],photos:u.value.photos||[]};u.value.location&&(T.location=Array.isArray(u.value.location)?{type:"Point",coordinates:[u.value.location[1],u.value.location[0]]}:u.value.location),console.log("[NoteEditModal] Donnes de note  sauvegarder:",T),console.log("[NoteEditModal] Niveau d'accs:",u.value.accessLevel);let F;if((N=t.note)!=null&&N.id){if(F=(await du.updateNote(t.note.id,T)).data,i.updateNote(t.note.id,{...u.value,...F,accessLevel:u.value.accessLevel,updatedAt:new Date().toISOString()}),u.value.location){const Q=t.note._leaflet_id||t.note.id,he=new CustomEvent("geonote:updateStyle",{detail:{noteId:Q,style:u.value.style}});window.dispatchEvent(he)}s.success("Note mise  jour avec succs")}else{if(F=(await du.createNote(T)).data,!F.id)throw new Error("Le backend n'a pas fourni d'ID pour la nouvelle note");const Q=i.getDefaultColumn,he={...T,id:F.id,columnId:T.columnId||Q.id,accessLevel:u.value.accessLevel,style:T.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.2}};console.log("[NoteEditModal] Note  ajouter au store avec ID backend:",F.id),i.addNote(he),s.success("Note cre avec succs")}r("save",F),r("close")}catch(T){console.error("[NoteEditModal] Erreur lors de la sauvegarde de la note:",T),s.error("Erreur lors de la sauvegarde de la note")}}return(N,T)=>{var F,K,Q,he,fe;return $e(),He("div",gR,[E("div",mR,[T[17]||(T[17]=E("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),E("div",vR,[E("form",{onSubmit:Cf(k,["prevent"]),class:"h-full md:h-auto flex flex-col"},[E("div",yR,[E("div",_R,[E("h3",bR,Wt((F=N.note)!=null&&F.id?"Modifier la note":"Nouvelle note"),1),E("button",{type:"button",onClick:M,class:"text-gray-400 hover:text-gray-500"},T[7]||(T[7]=[E("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("div",wR,[E("nav",xR,[E("button",{type:"button",onClick:T[0]||(T[0]=me=>o.value="info"),class:Fi(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",o.value==="info"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Informations ",2),E("button",{type:"button",onClick:T[1]||(T[1]=me=>o.value="comments"),class:Fi(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",o.value==="comments"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[T[8]||(T[8]=Ei(" Commentaires ")),(Q=(K=N.note)==null?void 0:K.comments)!=null&&Q.length?($e(),He("span",LR,Wt(N.note.comments.length),1)):cn("",!0)],2),E("button",{type:"button",onClick:T[2]||(T[2]=me=>o.value="photos"),class:Fi(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",o.value==="photos"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[T[9]||(T[9]=Ei(" Photos ")),(fe=(he=N.note)==null?void 0:he.photos)!=null&&fe.length?($e(),He("span",SR,Wt(N.note.photos.length),1)):cn("",!0)],2)])]),o.value==="info"?($e(),He("div",CR,[E("div",ER,[T[10]||(T[10]=E("label",{for:"title",class:"block text-sm font-medium text-gray-700"},"Titre",-1)),Fn(E("input",{type:"text",id:"title","onUpdate:modelValue":T[3]||(T[3]=me=>u.value.title=me),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[ri,u.value.title]])]),E("div",PR,[T[11]||(T[11]=E("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),Fn(E("textarea",{id:"description","onUpdate:modelValue":T[4]||(T[4]=me=>u.value.description=me),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[ri,u.value.description]])]),u.value.location?($e(),He("div",MR,T[12]||(T[12]=[E("div",{class:"text-primary-600 mr-2"},[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})])],-1),E("div",{class:"text-sm text-gray-600"}," Note golocalise ",-1)]))):cn("",!0),E("div",AR,[T[13]||(T[13]=E("label",{for:"column",class:"block text-sm font-medium text-gray-700"},"tat",-1)),Fn(E("select",{id:"column","onUpdate:modelValue":T[5]||(T[5]=me=>u.value.columnId=me),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[($e(!0),He(Tn,null,xr(g.value,me=>($e(),He("option",{key:me.id,value:me.id},Wt(me.title),9,kR))),128))],512),[[uo,u.value.columnId]])]),E("div",TR,[T[14]||(T[14]=E("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accs",-1)),Fn(E("select",{id:"accessLevel","onUpdate:modelValue":T[6]||(T[6]=me=>u.value.accessLevel=me),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[($e(),He(Tn,null,xr(y,me=>E("option",{key:me.id,value:me.id},Wt(me.title)+" - "+Wt(me.description),9,NR)),64))],512),[[uo,u.value.accessLevel]])]),E("div",DR,[T[15]||(T[15]=E("label",{class:"block text-sm font-medium text-gray-700"},"Couleur",-1)),E("div",IR,[($e(),He(Tn,null,xr(x,me=>E("div",{key:me,class:Fi(["w-8 h-8 rounded-full cursor-pointer border-2",{"border-gray-400":u.value.style.color!==me,"border-black":u.value.style.color===me}]),style:Hl({backgroundColor:me}),onClick:G=>_(me)},null,14,OR)),64))])])])):o.value==="comments"?($e(),He("div",BR,[N.note?($e(),rl(zB,{key:0,noteId:N.note.id,comments:N.note.comments||[]},null,8,["noteId","comments"])):cn("",!0)])):o.value==="photos"?($e(),He("div",RR,[N.note?($e(),rl(pR,{key:0,noteId:N.note.id,photos:N.note.photos||[]},null,8,["noteId","photos"])):cn("",!0)])):cn("",!0)]),E("div",{class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[T[16]||(T[16]=E("button",{type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:ml-3 sm:w-auto sm:text-sm"}," Enregistrer ",-1)),E("button",{onClick:M,type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Annuler ")])],32)])])])}}});(()=>{var Sn,Qn;var e=Object.create,n=Object.defineProperty,t=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,o=(l,h)=>()=>(h||l((h={exports:{}}).exports,h),h.exports),u=(l,h,v,w)=>{if(h&&typeof h=="object"||typeof h=="function")for(let C of r(h))!s.call(l,C)&&C!==v&&n(l,C,{get:()=>h[C],enumerable:!(w=t(h,C))||w.enumerable});return l},f=(l,h,v)=>(v=l!=null?e(i(l)):{},u(h||!l||!l.__esModule?n(v,"default",{value:l,enumerable:!0}):v,l)),d=o((l,h)=>{function v(){this.__data__=[],this.size=0}h.exports=v}),g=o((l,h)=>{function v(w,C){return w===C||w!==w&&C!==C}h.exports=v}),y=o((l,h)=>{var v=g();function w(C,j){for(var J=C.length;J--;)if(v(C[J][0],j))return J;return-1}h.exports=w}),x=o((l,h)=>{var v=y(),w=Array.prototype,C=w.splice;function j(J){var re=this.__data__,ge=v(re,J);if(ge<0)return!1;var Le=re.length-1;return ge==Le?re.pop():C.call(re,ge,1),--this.size,!0}h.exports=j}),_=o((l,h)=>{var v=y();function w(C){var j=this.__data__,J=v(j,C);return J<0?void 0:j[J][1]}h.exports=w}),M=o((l,h)=>{var v=y();function w(C){return v(this.__data__,C)>-1}h.exports=w}),k=o((l,h)=>{var v=y();function w(C,j){var J=this.__data__,re=v(J,C);return re<0?(++this.size,J.push([C,j])):J[re][1]=j,this}h.exports=w}),N=o((l,h)=>{var v=d(),w=x(),C=_(),j=M(),J=k();function re(ge){var Le=-1,Xe=ge==null?0:ge.length;for(this.clear();++Le<Xe;){var Ue=ge[Le];this.set(Ue[0],Ue[1])}}re.prototype.clear=v,re.prototype.delete=w,re.prototype.get=C,re.prototype.has=j,re.prototype.set=J,h.exports=re}),T=o((l,h)=>{var v=N();function w(){this.__data__=new v,this.size=0}h.exports=w}),F=o((l,h)=>{function v(w){var C=this.__data__,j=C.delete(w);return this.size=C.size,j}h.exports=v}),K=o((l,h)=>{function v(w){return this.__data__.get(w)}h.exports=v}),Q=o((l,h)=>{function v(w){return this.__data__.has(w)}h.exports=v}),he=o((l,h)=>{var v=typeof ea=="object"&&ea&&ea.Object===Object&&ea;h.exports=v}),fe=o((l,h)=>{var v=he(),w=typeof self=="object"&&self&&self.Object===Object&&self,C=v||w||Function("return this")();h.exports=C}),me=o((l,h)=>{var v=fe(),w=v.Symbol;h.exports=w}),G=o((l,h)=>{var v=me(),w=Object.prototype,C=w.hasOwnProperty,j=w.toString,J=v?v.toStringTag:void 0;function re(ge){var Le=C.call(ge,J),Xe=ge[J];try{ge[J]=void 0;var Ue=!0}catch{}var vt=j.call(ge);return Ue&&(Le?ge[J]=Xe:delete ge[J]),vt}h.exports=re}),$=o((l,h)=>{var v=Object.prototype,w=v.toString;function C(j){return w.call(j)}h.exports=C}),X=o((l,h)=>{var v=me(),w=G(),C=$(),j="[object Null]",J="[object Undefined]",re=v?v.toStringTag:void 0;function ge(Le){return Le==null?Le===void 0?J:j:re&&re in Object(Le)?w(Le):C(Le)}h.exports=ge}),R=o((l,h)=>{function v(w){var C=typeof w;return w!=null&&(C=="object"||C=="function")}h.exports=v}),O=o((l,h)=>{var v=X(),w=R(),C="[object AsyncFunction]",j="[object Function]",J="[object GeneratorFunction]",re="[object Proxy]";function ge(Le){if(!w(Le))return!1;var Xe=v(Le);return Xe==j||Xe==J||Xe==C||Xe==re}h.exports=ge}),B=o((l,h)=>{var v=fe(),w=v["__core-js_shared__"];h.exports=w}),z=o((l,h)=>{var v=B(),w=function(){var j=/[^.]+$/.exec(v&&v.keys&&v.keys.IE_PROTO||"");return j?"Symbol(src)_1."+j:""}();function C(j){return!!w&&w in j}h.exports=C}),W=o((l,h)=>{var v=Function.prototype,w=v.toString;function C(j){if(j!=null){try{return w.call(j)}catch{}try{return j+""}catch{}}return""}h.exports=C}),V=o((l,h)=>{var v=O(),w=z(),C=R(),j=W(),J=/[\\^$.*+?()[\]{}|]/g,re=/^\[object .+?Constructor\]$/,ge=Function.prototype,Le=Object.prototype,Xe=ge.toString,Ue=Le.hasOwnProperty,vt=RegExp("^"+Xe.call(Ue).replace(J,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Tt(Xt){if(!C(Xt)||w(Xt))return!1;var yn=v(Xt)?vt:re;return yn.test(j(Xt))}h.exports=Tt}),oe=o((l,h)=>{function v(w,C){return w==null?void 0:w[C]}h.exports=v}),ie=o((l,h)=>{var v=V(),w=oe();function C(j,J){var re=w(j,J);return v(re)?re:void 0}h.exports=C}),xe=o((l,h)=>{var v=ie(),w=fe(),C=v(w,"Map");h.exports=C}),Ee=o((l,h)=>{var v=ie(),w=v(Object,"create");h.exports=w}),Te=o((l,h)=>{var v=Ee();function w(){this.__data__=v?v(null):{},this.size=0}h.exports=w}),Y=o((l,h)=>{function v(w){var C=this.has(w)&&delete this.__data__[w];return this.size-=C?1:0,C}h.exports=v}),q=o((l,h)=>{var v=Ee(),w="__lodash_hash_undefined__",C=Object.prototype,j=C.hasOwnProperty;function J(re){var ge=this.__data__;if(v){var Le=ge[re];return Le===w?void 0:Le}return j.call(ge,re)?ge[re]:void 0}h.exports=J}),ee=o((l,h)=>{var v=Ee(),w=Object.prototype,C=w.hasOwnProperty;function j(J){var re=this.__data__;return v?re[J]!==void 0:C.call(re,J)}h.exports=j}),ue=o((l,h)=>{var v=Ee(),w="__lodash_hash_undefined__";function C(j,J){var re=this.__data__;return this.size+=this.has(j)?0:1,re[j]=v&&J===void 0?w:J,this}h.exports=C}),le=o((l,h)=>{var v=Te(),w=Y(),C=q(),j=ee(),J=ue();function re(ge){var Le=-1,Xe=ge==null?0:ge.length;for(this.clear();++Le<Xe;){var Ue=ge[Le];this.set(Ue[0],Ue[1])}}re.prototype.clear=v,re.prototype.delete=w,re.prototype.get=C,re.prototype.has=j,re.prototype.set=J,h.exports=re}),pe=o((l,h)=>{var v=le(),w=N(),C=xe();function j(){this.size=0,this.__data__={hash:new v,map:new(C||w),string:new v}}h.exports=j}),Z=o((l,h)=>{function v(w){var C=typeof w;return C=="string"||C=="number"||C=="symbol"||C=="boolean"?w!=="__proto__":w===null}h.exports=v}),D=o((l,h)=>{var v=Z();function w(C,j){var J=C.__data__;return v(j)?J[typeof j=="string"?"string":"hash"]:J.map}h.exports=w}),ke=o((l,h)=>{var v=D();function w(C){var j=v(this,C).delete(C);return this.size-=j?1:0,j}h.exports=w}),Me=o((l,h)=>{var v=D();function w(C){return v(this,C).get(C)}h.exports=w}),Ge=o((l,h)=>{var v=D();function w(C){return v(this,C).has(C)}h.exports=w}),ce=o((l,h)=>{var v=D();function w(C,j){var J=v(this,C),re=J.size;return J.set(C,j),this.size+=J.size==re?0:1,this}h.exports=w}),ne=o((l,h)=>{var v=pe(),w=ke(),C=Me(),j=Ge(),J=ce();function re(ge){var Le=-1,Xe=ge==null?0:ge.length;for(this.clear();++Le<Xe;){var Ue=ge[Le];this.set(Ue[0],Ue[1])}}re.prototype.clear=v,re.prototype.delete=w,re.prototype.get=C,re.prototype.has=j,re.prototype.set=J,h.exports=re}),ye=o((l,h)=>{var v=N(),w=xe(),C=ne(),j=200;function J(re,ge){var Le=this.__data__;if(Le instanceof v){var Xe=Le.__data__;if(!w||Xe.length<j-1)return Xe.push([re,ge]),this.size=++Le.size,this;Le=this.__data__=new C(Xe)}return Le.set(re,ge),this.size=Le.size,this}h.exports=J}),de=o((l,h)=>{var v=N(),w=T(),C=F(),j=K(),J=Q(),re=ye();function ge(Le){var Xe=this.__data__=new v(Le);this.size=Xe.size}ge.prototype.clear=w,ge.prototype.delete=C,ge.prototype.get=j,ge.prototype.has=J,ge.prototype.set=re,h.exports=ge}),Ze=o((l,h)=>{var v=ie(),w=function(){try{var C=v(Object,"defineProperty");return C({},"",{}),C}catch{}}();h.exports=w}),qe=o((l,h)=>{var v=Ze();function w(C,j,J){j=="__proto__"&&v?v(C,j,{configurable:!0,enumerable:!0,value:J,writable:!0}):C[j]=J}h.exports=w}),tt=o((l,h)=>{var v=qe(),w=g();function C(j,J,re){(re!==void 0&&!w(j[J],re)||re===void 0&&!(J in j))&&v(j,J,re)}h.exports=C}),ze=o((l,h)=>{function v(w){return function(C,j,J){for(var re=-1,ge=Object(C),Le=J(C),Xe=Le.length;Xe--;){var Ue=Le[w?Xe:++re];if(j(ge[Ue],Ue,ge)===!1)break}return C}}h.exports=v}),Qe=o((l,h)=>{var v=ze(),w=v();h.exports=w}),et=o((l,h)=>{var v=fe(),w=typeof l=="object"&&l&&!l.nodeType&&l,C=w&&typeof h=="object"&&h&&!h.nodeType&&h,j=C&&C.exports===w,J=j?v.Buffer:void 0,re=J?J.allocUnsafe:void 0;function ge(Le,Xe){if(Xe)return Le.slice();var Ue=Le.length,vt=re?re(Ue):new Le.constructor(Ue);return Le.copy(vt),vt}h.exports=ge}),bt=o((l,h)=>{var v=fe(),w=v.Uint8Array;h.exports=w}),Pt=o((l,h)=>{var v=bt();function w(C){var j=new C.constructor(C.byteLength);return new v(j).set(new v(C)),j}h.exports=w}),At=o((l,h)=>{var v=Pt();function w(C,j){var J=j?v(C.buffer):C.buffer;return new C.constructor(J,C.byteOffset,C.length)}h.exports=w}),Vt=o((l,h)=>{function v(w,C){var j=-1,J=w.length;for(C||(C=Array(J));++j<J;)C[j]=w[j];return C}h.exports=v}),Qt=o((l,h)=>{var v=R(),w=Object.create,C=function(){function j(){}return function(J){if(!v(J))return{};if(w)return w(J);j.prototype=J;var re=new j;return j.prototype=void 0,re}}();h.exports=C}),mn=o((l,h)=>{function v(w,C){return function(j){return w(C(j))}}h.exports=v}),Ye=o((l,h)=>{var v=mn(),w=v(Object.getPrototypeOf,Object);h.exports=w}),ot=o((l,h)=>{var v=Object.prototype;function w(C){var j=C&&C.constructor,J=typeof j=="function"&&j.prototype||v;return C===J}h.exports=w}),rt=o((l,h)=>{var v=Qt(),w=Ye(),C=ot();function j(J){return typeof J.constructor=="function"&&!C(J)?v(w(J)):{}}h.exports=j}),zt=o((l,h)=>{function v(w){return w!=null&&typeof w=="object"}h.exports=v}),en=o((l,h)=>{var v=X(),w=zt(),C="[object Arguments]";function j(J){return w(J)&&v(J)==C}h.exports=j}),Bn=o((l,h)=>{var v=en(),w=zt(),C=Object.prototype,j=C.hasOwnProperty,J=C.propertyIsEnumerable,re=v(function(){return arguments}())?v:function(ge){return w(ge)&&j.call(ge,"callee")&&!J.call(ge,"callee")};h.exports=re}),bn=o((l,h)=>{var v=Array.isArray;h.exports=v}),Nn=o((l,h)=>{var v=9007199254740991;function w(C){return typeof C=="number"&&C>-1&&C%1==0&&C<=v}h.exports=w}),ar=o((l,h)=>{var v=O(),w=Nn();function C(j){return j!=null&&w(j.length)&&!v(j)}h.exports=C}),xn=o((l,h)=>{var v=ar(),w=zt();function C(j){return w(j)&&v(j)}h.exports=C}),Mn=o((l,h)=>{function v(){return!1}h.exports=v}),Pn=o((l,h)=>{var v=fe(),w=Mn(),C=typeof l=="object"&&l&&!l.nodeType&&l,j=C&&typeof h=="object"&&h&&!h.nodeType&&h,J=j&&j.exports===C,re=J?v.Buffer:void 0,ge=re?re.isBuffer:void 0,Le=ge||w;h.exports=Le}),fr=o((l,h)=>{var v=X(),w=Ye(),C=zt(),j="[object Object]",J=Function.prototype,re=Object.prototype,ge=J.toString,Le=re.hasOwnProperty,Xe=ge.call(Object);function Ue(vt){if(!C(vt)||v(vt)!=j)return!1;var Tt=w(vt);if(Tt===null)return!0;var Xt=Le.call(Tt,"constructor")&&Tt.constructor;return typeof Xt=="function"&&Xt instanceof Xt&&ge.call(Xt)==Xe}h.exports=Ue}),yr=o((l,h)=>{var v=X(),w=Nn(),C=zt(),j="[object Arguments]",J="[object Array]",re="[object Boolean]",ge="[object Date]",Le="[object Error]",Xe="[object Function]",Ue="[object Map]",vt="[object Number]",Tt="[object Object]",Xt="[object RegExp]",yn="[object Set]",wn="[object String]",ur="[object WeakMap]",Je="[object ArrayBuffer]",nt="[object DataView]",ht="[object Float32Array]",Bt="[object Float64Array]",wt="[object Int8Array]",Nt="[object Int16Array]",ve="[object Int32Array]",Pe="[object Uint8Array]",Be="[object Uint8ClampedArray]",Oe="[object Uint16Array]",Fe="[object Uint32Array]",je={};je[ht]=je[Bt]=je[wt]=je[Nt]=je[ve]=je[Pe]=je[Be]=je[Oe]=je[Fe]=!0,je[j]=je[J]=je[Je]=je[re]=je[nt]=je[ge]=je[Le]=je[Xe]=je[Ue]=je[vt]=je[Tt]=je[Xt]=je[yn]=je[wn]=je[ur]=!1;function ut(ct){return C(ct)&&w(ct.length)&&!!je[v(ct)]}h.exports=ut}),at=o((l,h)=>{function v(w){return function(C){return w(C)}}h.exports=v}),We=o((l,h)=>{var v=he(),w=typeof l=="object"&&l&&!l.nodeType&&l,C=w&&typeof h=="object"&&h&&!h.nodeType&&h,j=C&&C.exports===w,J=j&&v.process,re=function(){try{var ge=C&&C.require&&C.require("util").types;return ge||J&&J.binding&&J.binding("util")}catch{}}();h.exports=re}),Ot=o((l,h)=>{var v=yr(),w=at(),C=We(),j=C&&C.isTypedArray,J=j?w(j):v;h.exports=J}),En=o((l,h)=>{function v(w,C){if(!(C==="constructor"&&typeof w[C]=="function")&&C!="__proto__")return w[C]}h.exports=v}),Jn=o((l,h)=>{var v=qe(),w=g(),C=Object.prototype,j=C.hasOwnProperty;function J(re,ge,Le){var Xe=re[ge];(!(j.call(re,ge)&&w(Xe,Le))||Le===void 0&&!(ge in re))&&v(re,ge,Le)}h.exports=J}),Zn=o((l,h)=>{var v=Jn(),w=qe();function C(j,J,re,ge){var Le=!re;re||(re={});for(var Xe=-1,Ue=J.length;++Xe<Ue;){var vt=J[Xe],Tt=ge?ge(re[vt],j[vt],vt,re,j):void 0;Tt===void 0&&(Tt=j[vt]),Le?w(re,vt,Tt):v(re,vt,Tt)}return re}h.exports=C}),qt=o((l,h)=>{function v(w,C){for(var j=-1,J=Array(w);++j<w;)J[j]=C(j);return J}h.exports=v}),gn=o((l,h)=>{var v=9007199254740991,w=/^(?:0|[1-9]\d*)$/;function C(j,J){var re=typeof j;return J=J??v,!!J&&(re=="number"||re!="symbol"&&w.test(j))&&j>-1&&j%1==0&&j<J}h.exports=C}),Rt=o((l,h)=>{var v=qt(),w=Bn(),C=bn(),j=Pn(),J=gn(),re=Ot(),ge=Object.prototype,Le=ge.hasOwnProperty;function Xe(Ue,vt){var Tt=C(Ue),Xt=!Tt&&w(Ue),yn=!Tt&&!Xt&&j(Ue),wn=!Tt&&!Xt&&!yn&&re(Ue),ur=Tt||Xt||yn||wn,Je=ur?v(Ue.length,String):[],nt=Je.length;for(var ht in Ue)(vt||Le.call(Ue,ht))&&!(ur&&(ht=="length"||yn&&(ht=="offset"||ht=="parent")||wn&&(ht=="buffer"||ht=="byteLength"||ht=="byteOffset")||J(ht,nt)))&&Je.push(ht);return Je}h.exports=Xe}),Kt=o((l,h)=>{function v(w){var C=[];if(w!=null)for(var j in Object(w))C.push(j);return C}h.exports=v}),Ln=o((l,h)=>{var v=R(),w=ot(),C=Kt(),j=Object.prototype,J=j.hasOwnProperty;function re(ge){if(!v(ge))return C(ge);var Le=w(ge),Xe=[];for(var Ue in ge)Ue=="constructor"&&(Le||!J.call(ge,Ue))||Xe.push(Ue);return Xe}h.exports=re}),mr=o((l,h)=>{var v=Rt(),w=Ln(),C=ar();function j(J){return C(J)?v(J,!0):w(J)}h.exports=j}),lt=o((l,h)=>{var v=Zn(),w=mr();function C(j){return v(j,w(j))}h.exports=C}),Cn=o((l,h)=>{var v=tt(),w=et(),C=At(),j=Vt(),J=rt(),re=Bn(),ge=bn(),Le=xn(),Xe=Pn(),Ue=O(),vt=R(),Tt=fr(),Xt=Ot(),yn=En(),wn=lt();function ur(Je,nt,ht,Bt,wt,Nt,ve){var Pe=yn(Je,ht),Be=yn(nt,ht),Oe=ve.get(Be);if(Oe){v(Je,ht,Oe);return}var Fe=Nt?Nt(Pe,Be,ht+"",Je,nt,ve):void 0,je=Fe===void 0;if(je){var ut=ge(Be),ct=!ut&&Xe(Be),gt=!ut&&!ct&&Xt(Be);Fe=Be,ut||ct||gt?ge(Pe)?Fe=Pe:Le(Pe)?Fe=j(Pe):ct?(je=!1,Fe=w(Be,!0)):gt?(je=!1,Fe=C(Be,!0)):Fe=[]:Tt(Be)||re(Be)?(Fe=Pe,re(Pe)?Fe=wn(Pe):(!vt(Pe)||Ue(Pe))&&(Fe=J(Be))):je=!1}je&&(ve.set(Be,Fe),wt(Fe,Be,Bt,Nt,ve),ve.delete(Be)),v(Je,ht,Fe)}h.exports=ur}),Lr=o((l,h)=>{var v=de(),w=tt(),C=Qe(),j=Cn(),J=R(),re=mr(),ge=En();function Le(Xe,Ue,vt,Tt,Xt){Xe!==Ue&&C(Ue,function(yn,wn){if(Xt||(Xt=new v),J(yn))j(Xe,Ue,wn,vt,Le,Tt,Xt);else{var ur=Tt?Tt(ge(Xe,wn),yn,wn+"",Xe,Ue,Xt):void 0;ur===void 0&&(ur=yn),w(Xe,wn,ur)}},re)}h.exports=Le}),Ii=o((l,h)=>{function v(w){return w}h.exports=v}),Fr=o((l,h)=>{function v(w,C,j){switch(j.length){case 0:return w.call(C);case 1:return w.call(C,j[0]);case 2:return w.call(C,j[0],j[1]);case 3:return w.call(C,j[0],j[1],j[2])}return w.apply(C,j)}h.exports=v}),Pr=o((l,h)=>{var v=Fr(),w=Math.max;function C(j,J,re){return J=w(J===void 0?j.length-1:J,0),function(){for(var ge=arguments,Le=-1,Xe=w(ge.length-J,0),Ue=Array(Xe);++Le<Xe;)Ue[Le]=ge[J+Le];Le=-1;for(var vt=Array(J+1);++Le<J;)vt[Le]=ge[Le];return vt[J]=re(Ue),v(j,this,vt)}}h.exports=C}),lr=o((l,h)=>{function v(w){return function(){return w}}h.exports=v}),Hr=o((l,h)=>{var v=lr(),w=Ze(),C=Ii(),j=w?function(J,re){return w(J,"toString",{configurable:!0,enumerable:!1,value:v(re),writable:!0})}:C;h.exports=j}),ir=o((l,h)=>{var v=800,w=16,C=Date.now;function j(J){var re=0,ge=0;return function(){var Le=C(),Xe=w-(Le-ge);if(ge=Le,Xe>0){if(++re>=v)return arguments[0]}else re=0;return J.apply(void 0,arguments)}}h.exports=j}),Or=o((l,h)=>{var v=Hr(),w=ir(),C=w(v);h.exports=C}),jr=o((l,h)=>{var v=Ii(),w=Pr(),C=Or();function j(J,re){return C(w(J,re,v),J+"")}h.exports=j}),on=o((l,h)=>{var v=g(),w=ar(),C=gn(),j=R();function J(re,ge,Le){if(!j(Le))return!1;var Xe=typeof ge;return(Xe=="number"?w(Le)&&C(ge,Le.length):Xe=="string"&&ge in Le)?v(Le[ge],re):!1}h.exports=J}),ji=o((l,h)=>{var v=jr(),w=on();function C(j){return v(function(J,re){var ge=-1,Le=re.length,Xe=Le>1?re[Le-1]:void 0,Ue=Le>2?re[2]:void 0;for(Xe=j.length>3&&typeof Xe=="function"?(Le--,Xe):void 0,Ue&&w(re[0],re[1],Ue)&&(Xe=Le<3?void 0:Xe,Le=1),J=Object(J);++ge<Le;){var vt=re[ge];vt&&j(J,vt,ge,Xe)}return J})}h.exports=C}),_i=o((l,h)=>{var v=Lr(),w=ji(),C=w(function(j,J,re){v(j,J,re)});h.exports=C}),gi=o((l,h)=>{var v=X(),w=zt(),C="[object Symbol]";function j(J){return typeof J=="symbol"||w(J)&&v(J)==C}h.exports=j}),Kr=o((l,h)=>{var v=bn(),w=gi(),C=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,j=/^\w*$/;function J(re,ge){if(v(re))return!1;var Le=typeof re;return Le=="number"||Le=="symbol"||Le=="boolean"||re==null||w(re)?!0:j.test(re)||!C.test(re)||ge!=null&&re in Object(ge)}h.exports=J}),Br=o((l,h)=>{var v=ne(),w="Expected a function";function C(j,J){if(typeof j!="function"||J!=null&&typeof J!="function")throw new TypeError(w);var re=function(){var ge=arguments,Le=J?J.apply(this,ge):ge[0],Xe=re.cache;if(Xe.has(Le))return Xe.get(Le);var Ue=j.apply(this,ge);return re.cache=Xe.set(Le,Ue)||Xe,Ue};return re.cache=new(C.Cache||v),re}C.Cache=v,h.exports=C}),Rr=o((l,h)=>{var v=Br(),w=500;function C(j){var J=v(j,function(ge){return re.size===w&&re.clear(),ge}),re=J.cache;return J}h.exports=C}),dr=o((l,h)=>{var v=Rr(),w=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,C=/\\(\\)?/g,j=v(function(J){var re=[];return J.charCodeAt(0)===46&&re.push(""),J.replace(w,function(ge,Le,Xe,Ue){re.push(Xe?Ue.replace(C,"$1"):Le||ge)}),re});h.exports=j}),zi=o((l,h)=>{function v(w,C){for(var j=-1,J=w==null?0:w.length,re=Array(J);++j<J;)re[j]=C(w[j],j,w);return re}h.exports=v}),Ss=o((l,h)=>{var v=me(),w=zi(),C=bn(),j=gi(),J=v?v.prototype:void 0,re=J?J.toString:void 0;function ge(Le){if(typeof Le=="string")return Le;if(C(Le))return w(Le,ge)+"";if(j(Le))return re?re.call(Le):"";var Xe=Le+"";return Xe=="0"&&1/Le==-1/0?"-0":Xe}h.exports=ge}),Cs=o((l,h)=>{var v=Ss();function w(C){return C==null?"":v(C)}h.exports=w}),si=o((l,h)=>{var v=bn(),w=Kr(),C=dr(),j=Cs();function J(re,ge){return v(re)?re:w(re,ge)?[re]:C(j(re))}h.exports=J}),jn=o((l,h)=>{var v=gi();function w(C){if(typeof C=="string"||v(C))return C;var j=C+"";return j=="0"&&1/C==-1/0?"-0":j}h.exports=w}),Po=o((l,h)=>{var v=si(),w=jn();function C(j,J){J=v(J,j);for(var re=0,ge=J.length;j!=null&&re<ge;)j=j[w(J[re++])];return re&&re==ge?j:void 0}h.exports=C}),ci=o((l,h)=>{var v=Po();function w(C,j,J){var re=C==null?void 0:v(C,j);return re===void 0?J:re}h.exports=w}),hr=o((l,h)=>{(function(v,w){typeof l=="object"&&typeof h<"u"?h.exports=w():(v=v||self).RBush=w()})(l,function(){function v(Je,nt,ht,Bt,wt){(function Nt(ve,Pe,Be,Oe,Fe){for(;Oe>Be;){if(Oe-Be>600){var je=Oe-Be+1,ut=Pe-Be+1,ct=Math.log(je),gt=.5*Math.exp(2*ct/3),St=.5*Math.sqrt(ct*gt*(je-gt)/je)*(ut-je/2<0?-1:1),Ct=Math.max(Be,Math.floor(Pe-ut*gt/je+St)),sn=Math.min(Oe,Math.floor(Pe+(je-ut)*gt/je+St));Nt(ve,Pe,Ct,sn,Fe)}var $n=ve[Pe],Hn=Be,er=Oe;for(w(ve,Be,Pe),Fe(ve[Oe],$n)>0&&w(ve,Be,Oe);Hn<er;){for(w(ve,Hn,er),Hn++,er--;Fe(ve[Hn],$n)<0;)Hn++;for(;Fe(ve[er],$n)>0;)er--}Fe(ve[Be],$n)===0?w(ve,Be,er):w(ve,++er,Oe),er<=Pe&&(Be=er+1),Pe<=er&&(Oe=er-1)}})(Je,nt,ht||0,Bt||Je.length-1,wt||C)}function w(Je,nt,ht){var Bt=Je[nt];Je[nt]=Je[ht],Je[ht]=Bt}function C(Je,nt){return Je<nt?-1:Je>nt?1:0}var j=function(Je){Je===void 0&&(Je=9),this._maxEntries=Math.max(4,Je),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function J(Je,nt,ht){if(!ht)return nt.indexOf(Je);for(var Bt=0;Bt<nt.length;Bt++)if(ht(Je,nt[Bt]))return Bt;return-1}function re(Je,nt){ge(Je,0,Je.children.length,nt,Je)}function ge(Je,nt,ht,Bt,wt){wt||(wt=wn(null)),wt.minX=1/0,wt.minY=1/0,wt.maxX=-1/0,wt.maxY=-1/0;for(var Nt=nt;Nt<ht;Nt++){var ve=Je.children[Nt];Le(wt,Je.leaf?Bt(ve):ve)}return wt}function Le(Je,nt){return Je.minX=Math.min(Je.minX,nt.minX),Je.minY=Math.min(Je.minY,nt.minY),Je.maxX=Math.max(Je.maxX,nt.maxX),Je.maxY=Math.max(Je.maxY,nt.maxY),Je}function Xe(Je,nt){return Je.minX-nt.minX}function Ue(Je,nt){return Je.minY-nt.minY}function vt(Je){return(Je.maxX-Je.minX)*(Je.maxY-Je.minY)}function Tt(Je){return Je.maxX-Je.minX+(Je.maxY-Je.minY)}function Xt(Je,nt){return Je.minX<=nt.minX&&Je.minY<=nt.minY&&nt.maxX<=Je.maxX&&nt.maxY<=Je.maxY}function yn(Je,nt){return nt.minX<=Je.maxX&&nt.minY<=Je.maxY&&nt.maxX>=Je.minX&&nt.maxY>=Je.minY}function wn(Je){return{children:Je,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function ur(Je,nt,ht,Bt,wt){for(var Nt=[nt,ht];Nt.length;)if(!((ht=Nt.pop())-(nt=Nt.pop())<=Bt)){var ve=nt+Math.ceil((ht-nt)/Bt/2)*Bt;v(Je,ve,nt,ht,wt),Nt.push(nt,ve,ve,ht)}}return j.prototype.all=function(){return this._all(this.data,[])},j.prototype.search=function(Je){var nt=this.data,ht=[];if(!yn(Je,nt))return ht;for(var Bt=this.toBBox,wt=[];nt;){for(var Nt=0;Nt<nt.children.length;Nt++){var ve=nt.children[Nt],Pe=nt.leaf?Bt(ve):ve;yn(Je,Pe)&&(nt.leaf?ht.push(ve):Xt(Je,Pe)?this._all(ve,ht):wt.push(ve))}nt=wt.pop()}return ht},j.prototype.collides=function(Je){var nt=this.data;if(!yn(Je,nt))return!1;for(var ht=[];nt;){for(var Bt=0;Bt<nt.children.length;Bt++){var wt=nt.children[Bt],Nt=nt.leaf?this.toBBox(wt):wt;if(yn(Je,Nt)){if(nt.leaf||Xt(Je,Nt))return!0;ht.push(wt)}}nt=ht.pop()}return!1},j.prototype.load=function(Je){if(!Je||!Je.length)return this;if(Je.length<this._minEntries){for(var nt=0;nt<Je.length;nt++)this.insert(Je[nt]);return this}var ht=this._build(Je.slice(),0,Je.length-1,0);if(this.data.children.length)if(this.data.height===ht.height)this._splitRoot(this.data,ht);else{if(this.data.height<ht.height){var Bt=this.data;this.data=ht,ht=Bt}this._insert(ht,this.data.height-ht.height-1,!0)}else this.data=ht;return this},j.prototype.insert=function(Je){return Je&&this._insert(Je,this.data.height-1),this},j.prototype.clear=function(){return this.data=wn([]),this},j.prototype.remove=function(Je,nt){if(!Je)return this;for(var ht,Bt,wt,Nt=this.data,ve=this.toBBox(Je),Pe=[],Be=[];Nt||Pe.length;){if(Nt||(Nt=Pe.pop(),Bt=Pe[Pe.length-1],ht=Be.pop(),wt=!0),Nt.leaf){var Oe=J(Je,Nt.children,nt);if(Oe!==-1)return Nt.children.splice(Oe,1),Pe.push(Nt),this._condense(Pe),this}wt||Nt.leaf||!Xt(Nt,ve)?Bt?(ht++,Nt=Bt.children[ht],wt=!1):Nt=null:(Pe.push(Nt),Be.push(ht),ht=0,Bt=Nt,Nt=Nt.children[0])}return this},j.prototype.toBBox=function(Je){return Je},j.prototype.compareMinX=function(Je,nt){return Je.minX-nt.minX},j.prototype.compareMinY=function(Je,nt){return Je.minY-nt.minY},j.prototype.toJSON=function(){return this.data},j.prototype.fromJSON=function(Je){return this.data=Je,this},j.prototype._all=function(Je,nt){for(var ht=[];Je;)Je.leaf?nt.push.apply(nt,Je.children):ht.push.apply(ht,Je.children),Je=ht.pop();return nt},j.prototype._build=function(Je,nt,ht,Bt){var wt,Nt=ht-nt+1,ve=this._maxEntries;if(Nt<=ve)return re(wt=wn(Je.slice(nt,ht+1)),this.toBBox),wt;Bt||(Bt=Math.ceil(Math.log(Nt)/Math.log(ve)),ve=Math.ceil(Nt/Math.pow(ve,Bt-1))),(wt=wn([])).leaf=!1,wt.height=Bt;var Pe=Math.ceil(Nt/ve),Be=Pe*Math.ceil(Math.sqrt(ve));ur(Je,nt,ht,Be,this.compareMinX);for(var Oe=nt;Oe<=ht;Oe+=Be){var Fe=Math.min(Oe+Be-1,ht);ur(Je,Oe,Fe,Pe,this.compareMinY);for(var je=Oe;je<=Fe;je+=Pe){var ut=Math.min(je+Pe-1,Fe);wt.children.push(this._build(Je,je,ut,Bt-1))}}return re(wt,this.toBBox),wt},j.prototype._chooseSubtree=function(Je,nt,ht,Bt){for(;Bt.push(nt),!nt.leaf&&Bt.length-1!==ht;){for(var wt=1/0,Nt=1/0,ve=void 0,Pe=0;Pe<nt.children.length;Pe++){var Be=nt.children[Pe],Oe=vt(Be),Fe=(je=Je,ut=Be,(Math.max(ut.maxX,je.maxX)-Math.min(ut.minX,je.minX))*(Math.max(ut.maxY,je.maxY)-Math.min(ut.minY,je.minY))-Oe);Fe<Nt?(Nt=Fe,wt=Oe<wt?Oe:wt,ve=Be):Fe===Nt&&Oe<wt&&(wt=Oe,ve=Be)}nt=ve||nt.children[0]}var je,ut;return nt},j.prototype._insert=function(Je,nt,ht){var Bt=ht?Je:this.toBBox(Je),wt=[],Nt=this._chooseSubtree(Bt,this.data,nt,wt);for(Nt.children.push(Je),Le(Nt,Bt);nt>=0&&wt[nt].children.length>this._maxEntries;)this._split(wt,nt),nt--;this._adjustParentBBoxes(Bt,wt,nt)},j.prototype._split=function(Je,nt){var ht=Je[nt],Bt=ht.children.length,wt=this._minEntries;this._chooseSplitAxis(ht,wt,Bt);var Nt=this._chooseSplitIndex(ht,wt,Bt),ve=wn(ht.children.splice(Nt,ht.children.length-Nt));ve.height=ht.height,ve.leaf=ht.leaf,re(ht,this.toBBox),re(ve,this.toBBox),nt?Je[nt-1].children.push(ve):this._splitRoot(ht,ve)},j.prototype._splitRoot=function(Je,nt){this.data=wn([Je,nt]),this.data.height=Je.height+1,this.data.leaf=!1,re(this.data,this.toBBox)},j.prototype._chooseSplitIndex=function(Je,nt,ht){for(var Bt,wt,Nt,ve,Pe,Be,Oe,Fe=1/0,je=1/0,ut=nt;ut<=ht-nt;ut++){var ct=ge(Je,0,ut,this.toBBox),gt=ge(Je,ut,ht,this.toBBox),St=(wt=ct,Nt=gt,ve=void 0,Pe=void 0,Be=void 0,Oe=void 0,ve=Math.max(wt.minX,Nt.minX),Pe=Math.max(wt.minY,Nt.minY),Be=Math.min(wt.maxX,Nt.maxX),Oe=Math.min(wt.maxY,Nt.maxY),Math.max(0,Be-ve)*Math.max(0,Oe-Pe)),Ct=vt(ct)+vt(gt);St<Fe?(Fe=St,Bt=ut,je=Ct<je?Ct:je):St===Fe&&Ct<je&&(je=Ct,Bt=ut)}return Bt||ht-nt},j.prototype._chooseSplitAxis=function(Je,nt,ht){var Bt=Je.leaf?this.compareMinX:Xe,wt=Je.leaf?this.compareMinY:Ue;this._allDistMargin(Je,nt,ht,Bt)<this._allDistMargin(Je,nt,ht,wt)&&Je.children.sort(Bt)},j.prototype._allDistMargin=function(Je,nt,ht,Bt){Je.children.sort(Bt);for(var wt=this.toBBox,Nt=ge(Je,0,nt,wt),ve=ge(Je,ht-nt,ht,wt),Pe=Tt(Nt)+Tt(ve),Be=nt;Be<ht-nt;Be++){var Oe=Je.children[Be];Le(Nt,Je.leaf?wt(Oe):Oe),Pe+=Tt(Nt)}for(var Fe=ht-nt-1;Fe>=nt;Fe--){var je=Je.children[Fe];Le(ve,Je.leaf?wt(je):je),Pe+=Tt(ve)}return Pe},j.prototype._adjustParentBBoxes=function(Je,nt,ht){for(var Bt=ht;Bt>=0;Bt--)Le(nt[Bt],Je)},j.prototype._condense=function(Je){for(var nt=Je.length-1,ht=void 0;nt>=0;nt--)Je[nt].children.length===0?nt>0?(ht=Je[nt-1].children).splice(ht.indexOf(Je[nt]),1):this.clear():re(Je[nt],this.toBBox)},j})}),qn=o(l=>{Object.defineProperty(l,"__esModule",{value:!0}),l.earthRadius=63710088e-1,l.factors={centimeters:l.earthRadius*100,centimetres:l.earthRadius*100,degrees:l.earthRadius/111325,feet:l.earthRadius*3.28084,inches:l.earthRadius*39.37,kilometers:l.earthRadius/1e3,kilometres:l.earthRadius/1e3,meters:l.earthRadius,metres:l.earthRadius,miles:l.earthRadius/1609.344,millimeters:l.earthRadius*1e3,millimetres:l.earthRadius*1e3,nauticalmiles:l.earthRadius/1852,radians:1,yards:l.earthRadius*1.0936},l.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/l.earthRadius,yards:1.0936133},l.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function h(Oe,Fe,je){je===void 0&&(je={});var ut={type:"Feature"};return(je.id===0||je.id)&&(ut.id=je.id),je.bbox&&(ut.bbox=je.bbox),ut.properties=Fe||{},ut.geometry=Oe,ut}l.feature=h;function v(Oe,Fe,je){switch(Oe){case"Point":return w(Fe).geometry;case"LineString":return re(Fe).geometry;case"Polygon":return j(Fe).geometry;case"MultiPoint":return Ue(Fe).geometry;case"MultiLineString":return Xe(Fe).geometry;case"MultiPolygon":return vt(Fe).geometry;default:throw new Error(Oe+" is invalid")}}l.geometry=v;function w(Oe,Fe,je){if(je===void 0&&(je={}),!Oe)throw new Error("coordinates is required");if(!Array.isArray(Oe))throw new Error("coordinates must be an Array");if(Oe.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Nt(Oe[0])||!Nt(Oe[1]))throw new Error("coordinates must contain numbers");var ut={type:"Point",coordinates:Oe};return h(ut,Fe,je)}l.point=w;function C(Oe,Fe,je){return je===void 0&&(je={}),Le(Oe.map(function(ut){return w(ut,Fe)}),je)}l.points=C;function j(Oe,Fe,je){je===void 0&&(je={});for(var ut=0,ct=Oe;ut<ct.length;ut++){var gt=ct[ut];if(gt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var St=0;St<gt[gt.length-1].length;St++)if(gt[gt.length-1][St]!==gt[0][St])throw new Error("First and last Position are not equivalent.")}var Ct={type:"Polygon",coordinates:Oe};return h(Ct,Fe,je)}l.polygon=j;function J(Oe,Fe,je){return je===void 0&&(je={}),Le(Oe.map(function(ut){return j(ut,Fe)}),je)}l.polygons=J;function re(Oe,Fe,je){if(je===void 0&&(je={}),Oe.length<2)throw new Error("coordinates must be an array of two or more positions");var ut={type:"LineString",coordinates:Oe};return h(ut,Fe,je)}l.lineString=re;function ge(Oe,Fe,je){return je===void 0&&(je={}),Le(Oe.map(function(ut){return re(ut,Fe)}),je)}l.lineStrings=ge;function Le(Oe,Fe){Fe===void 0&&(Fe={});var je={type:"FeatureCollection"};return Fe.id&&(je.id=Fe.id),Fe.bbox&&(je.bbox=Fe.bbox),je.features=Oe,je}l.featureCollection=Le;function Xe(Oe,Fe,je){je===void 0&&(je={});var ut={type:"MultiLineString",coordinates:Oe};return h(ut,Fe,je)}l.multiLineString=Xe;function Ue(Oe,Fe,je){je===void 0&&(je={});var ut={type:"MultiPoint",coordinates:Oe};return h(ut,Fe,je)}l.multiPoint=Ue;function vt(Oe,Fe,je){je===void 0&&(je={});var ut={type:"MultiPolygon",coordinates:Oe};return h(ut,Fe,je)}l.multiPolygon=vt;function Tt(Oe,Fe,je){je===void 0&&(je={});var ut={type:"GeometryCollection",geometries:Oe};return h(ut,Fe,je)}l.geometryCollection=Tt;function Xt(Oe,Fe){if(Fe===void 0&&(Fe=0),Fe&&!(Fe>=0))throw new Error("precision must be a positive number");var je=Math.pow(10,Fe||0);return Math.round(Oe*je)/je}l.round=Xt;function yn(Oe,Fe){Fe===void 0&&(Fe="kilometers");var je=l.factors[Fe];if(!je)throw new Error(Fe+" units is invalid");return Oe*je}l.radiansToLength=yn;function wn(Oe,Fe){Fe===void 0&&(Fe="kilometers");var je=l.factors[Fe];if(!je)throw new Error(Fe+" units is invalid");return Oe/je}l.lengthToRadians=wn;function ur(Oe,Fe){return nt(wn(Oe,Fe))}l.lengthToDegrees=ur;function Je(Oe){var Fe=Oe%360;return Fe<0&&(Fe+=360),Fe}l.bearingToAzimuth=Je;function nt(Oe){var Fe=Oe%(2*Math.PI);return Fe*180/Math.PI}l.radiansToDegrees=nt;function ht(Oe){var Fe=Oe%360;return Fe*Math.PI/180}l.degreesToRadians=ht;function Bt(Oe,Fe,je){if(Fe===void 0&&(Fe="kilometers"),je===void 0&&(je="kilometers"),!(Oe>=0))throw new Error("length must be a positive number");return yn(wn(Oe,Fe),je)}l.convertLength=Bt;function wt(Oe,Fe,je){if(Fe===void 0&&(Fe="meters"),je===void 0&&(je="kilometers"),!(Oe>=0))throw new Error("area must be a positive number");var ut=l.areaFactors[Fe];if(!ut)throw new Error("invalid original units");var ct=l.areaFactors[je];if(!ct)throw new Error("invalid final units");return Oe/ut*ct}l.convertArea=wt;function Nt(Oe){return!isNaN(Oe)&&Oe!==null&&!Array.isArray(Oe)}l.isNumber=Nt;function ve(Oe){return!!Oe&&Oe.constructor===Object}l.isObject=ve;function Pe(Oe){if(!Oe)throw new Error("bbox is required");if(!Array.isArray(Oe))throw new Error("bbox must be an Array");if(Oe.length!==4&&Oe.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");Oe.forEach(function(Fe){if(!Nt(Fe))throw new Error("bbox must only contain numbers")})}l.validateBBox=Pe;function Be(Oe){if(!Oe)throw new Error("id is required");if(["string","number"].indexOf(typeof Oe)===-1)throw new Error("id must be a number or a string")}l.validateId=Be}),bo=o(l=>{Object.defineProperty(l,"__esModule",{value:!0});var h=qn();function v(nt,ht,Bt){if(nt!==null)for(var wt,Nt,ve,Pe,Be,Oe,Fe,je=0,ut=0,ct,gt=nt.type,St=gt==="FeatureCollection",Ct=gt==="Feature",sn=St?nt.features.length:1,$n=0;$n<sn;$n++){Fe=St?nt.features[$n].geometry:Ct?nt.geometry:nt,ct=Fe?Fe.type==="GeometryCollection":!1,Be=ct?Fe.geometries.length:1;for(var Hn=0;Hn<Be;Hn++){var er=0,vi=0;if(Pe=ct?Fe.geometries[Hn]:Fe,Pe!==null){Oe=Pe.coordinates;var ki=Pe.type;switch(je=Bt&&(ki==="Polygon"||ki==="MultiPolygon")?1:0,ki){case null:break;case"Point":if(ht(Oe,ut,$n,er,vi)===!1)return!1;ut++,er++;break;case"LineString":case"MultiPoint":for(wt=0;wt<Oe.length;wt++){if(ht(Oe[wt],ut,$n,er,vi)===!1)return!1;ut++,ki==="MultiPoint"&&er++}ki==="LineString"&&er++;break;case"Polygon":case"MultiLineString":for(wt=0;wt<Oe.length;wt++){for(Nt=0;Nt<Oe[wt].length-je;Nt++){if(ht(Oe[wt][Nt],ut,$n,er,vi)===!1)return!1;ut++}ki==="MultiLineString"&&er++,ki==="Polygon"&&vi++}ki==="Polygon"&&er++;break;case"MultiPolygon":for(wt=0;wt<Oe.length;wt++){for(vi=0,Nt=0;Nt<Oe[wt].length;Nt++){for(ve=0;ve<Oe[wt][Nt].length-je;ve++){if(ht(Oe[wt][Nt][ve],ut,$n,er,vi)===!1)return!1;ut++}vi++}er++}break;case"GeometryCollection":for(wt=0;wt<Pe.geometries.length;wt++)if(v(Pe.geometries[wt],ht,Bt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function w(nt,ht,Bt,wt){var Nt=Bt;return v(nt,function(ve,Pe,Be,Oe,Fe){Pe===0&&Bt===void 0?Nt=ve:Nt=ht(Nt,ve,Pe,Be,Oe,Fe)},wt),Nt}function C(nt,ht){var Bt;switch(nt.type){case"FeatureCollection":for(Bt=0;Bt<nt.features.length&&ht(nt.features[Bt].properties,Bt)!==!1;Bt++);break;case"Feature":ht(nt.properties,0);break}}function j(nt,ht,Bt){var wt=Bt;return C(nt,function(Nt,ve){ve===0&&Bt===void 0?wt=Nt:wt=ht(wt,Nt,ve)}),wt}function J(nt,ht){if(nt.type==="Feature")ht(nt,0);else if(nt.type==="FeatureCollection")for(var Bt=0;Bt<nt.features.length&&ht(nt.features[Bt],Bt)!==!1;Bt++);}function re(nt,ht,Bt){var wt=Bt;return J(nt,function(Nt,ve){ve===0&&Bt===void 0?wt=Nt:wt=ht(wt,Nt,ve)}),wt}function ge(nt){var ht=[];return v(nt,function(Bt){ht.push(Bt)}),ht}function Le(nt,ht){var Bt,wt,Nt,ve,Pe,Be,Oe,Fe,je,ut,ct=0,gt=nt.type==="FeatureCollection",St=nt.type==="Feature",Ct=gt?nt.features.length:1;for(Bt=0;Bt<Ct;Bt++){for(Be=gt?nt.features[Bt].geometry:St?nt.geometry:nt,Fe=gt?nt.features[Bt].properties:St?nt.properties:{},je=gt?nt.features[Bt].bbox:St?nt.bbox:void 0,ut=gt?nt.features[Bt].id:St?nt.id:void 0,Oe=Be?Be.type==="GeometryCollection":!1,Pe=Oe?Be.geometries.length:1,Nt=0;Nt<Pe;Nt++){if(ve=Oe?Be.geometries[Nt]:Be,ve===null){if(ht(null,ct,Fe,je,ut)===!1)return!1;continue}switch(ve.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(ht(ve,ct,Fe,je,ut)===!1)return!1;break}case"GeometryCollection":{for(wt=0;wt<ve.geometries.length;wt++)if(ht(ve.geometries[wt],ct,Fe,je,ut)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}ct++}}function Xe(nt,ht,Bt){var wt=Bt;return Le(nt,function(Nt,ve,Pe,Be,Oe){ve===0&&Bt===void 0?wt=Nt:wt=ht(wt,Nt,ve,Pe,Be,Oe)}),wt}function Ue(nt,ht){Le(nt,function(Bt,wt,Nt,ve,Pe){var Be=Bt===null?null:Bt.type;switch(Be){case null:case"Point":case"LineString":case"Polygon":return ht(h.feature(Bt,Nt,{bbox:ve,id:Pe}),wt,0)===!1?!1:void 0}var Oe;switch(Be){case"MultiPoint":Oe="Point";break;case"MultiLineString":Oe="LineString";break;case"MultiPolygon":Oe="Polygon";break}for(var Fe=0;Fe<Bt.coordinates.length;Fe++){var je=Bt.coordinates[Fe],ut={type:Oe,coordinates:je};if(ht(h.feature(ut,Nt),wt,Fe)===!1)return!1}})}function vt(nt,ht,Bt){var wt=Bt;return Ue(nt,function(Nt,ve,Pe){ve===0&&Pe===0&&Bt===void 0?wt=Nt:wt=ht(wt,Nt,ve,Pe)}),wt}function Tt(nt,ht){Ue(nt,function(Bt,wt,Nt){var ve=0;if(Bt.geometry){var Pe=Bt.geometry.type;if(!(Pe==="Point"||Pe==="MultiPoint")){var Be,Oe=0,Fe=0,je=0;if(v(Bt,function(ut,ct,gt,St,Ct){if(Be===void 0||wt>Oe||St>Fe||Ct>je){Be=ut,Oe=wt,Fe=St,je=Ct,ve=0;return}var sn=h.lineString([Be,ut],Bt.properties);if(ht(sn,wt,Nt,Ct,ve)===!1)return!1;ve++,Be=ut})===!1)return!1}}})}function Xt(nt,ht,Bt){var wt=Bt,Nt=!1;return Tt(nt,function(ve,Pe,Be,Oe,Fe){Nt===!1&&Bt===void 0?wt=ve:wt=ht(wt,ve,Pe,Be,Oe,Fe),Nt=!0}),wt}function yn(nt,ht){if(!nt)throw new Error("geojson is required");Ue(nt,function(Bt,wt,Nt){if(Bt.geometry!==null){var ve=Bt.geometry.type,Pe=Bt.geometry.coordinates;switch(ve){case"LineString":if(ht(Bt,wt,Nt,0,0)===!1)return!1;break;case"Polygon":for(var Be=0;Be<Pe.length;Be++)if(ht(h.lineString(Pe[Be],Bt.properties),wt,Nt,Be)===!1)return!1;break}}})}function wn(nt,ht,Bt){var wt=Bt;return yn(nt,function(Nt,ve,Pe,Be){ve===0&&Bt===void 0?wt=Nt:wt=ht(wt,Nt,ve,Pe,Be)}),wt}function ur(nt,ht){if(ht=ht||{},!h.isObject(ht))throw new Error("options is invalid");var Bt=ht.featureIndex||0,wt=ht.multiFeatureIndex||0,Nt=ht.geometryIndex||0,ve=ht.segmentIndex||0,Pe=ht.properties,Be;switch(nt.type){case"FeatureCollection":Bt<0&&(Bt=nt.features.length+Bt),Pe=Pe||nt.features[Bt].properties,Be=nt.features[Bt].geometry;break;case"Feature":Pe=Pe||nt.properties,Be=nt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Be=nt;break;default:throw new Error("geojson is invalid")}if(Be===null)return null;var Oe=Be.coordinates;switch(Be.type){case"Point":case"MultiPoint":return null;case"LineString":return ve<0&&(ve=Oe.length+ve-1),h.lineString([Oe[ve],Oe[ve+1]],Pe,ht);case"Polygon":return Nt<0&&(Nt=Oe.length+Nt),ve<0&&(ve=Oe[Nt].length+ve-1),h.lineString([Oe[Nt][ve],Oe[Nt][ve+1]],Pe,ht);case"MultiLineString":return wt<0&&(wt=Oe.length+wt),ve<0&&(ve=Oe[wt].length+ve-1),h.lineString([Oe[wt][ve],Oe[wt][ve+1]],Pe,ht);case"MultiPolygon":return wt<0&&(wt=Oe.length+wt),Nt<0&&(Nt=Oe[wt].length+Nt),ve<0&&(ve=Oe[wt][Nt].length-ve-1),h.lineString([Oe[wt][Nt][ve],Oe[wt][Nt][ve+1]],Pe,ht)}throw new Error("geojson is invalid")}function Je(nt,ht){if(ht=ht||{},!h.isObject(ht))throw new Error("options is invalid");var Bt=ht.featureIndex||0,wt=ht.multiFeatureIndex||0,Nt=ht.geometryIndex||0,ve=ht.coordIndex||0,Pe=ht.properties,Be;switch(nt.type){case"FeatureCollection":Bt<0&&(Bt=nt.features.length+Bt),Pe=Pe||nt.features[Bt].properties,Be=nt.features[Bt].geometry;break;case"Feature":Pe=Pe||nt.properties,Be=nt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Be=nt;break;default:throw new Error("geojson is invalid")}if(Be===null)return null;var Oe=Be.coordinates;switch(Be.type){case"Point":return h.point(Oe,Pe,ht);case"MultiPoint":return wt<0&&(wt=Oe.length+wt),h.point(Oe[wt],Pe,ht);case"LineString":return ve<0&&(ve=Oe.length+ve),h.point(Oe[ve],Pe,ht);case"Polygon":return Nt<0&&(Nt=Oe.length+Nt),ve<0&&(ve=Oe[Nt].length+ve),h.point(Oe[Nt][ve],Pe,ht);case"MultiLineString":return wt<0&&(wt=Oe.length+wt),ve<0&&(ve=Oe[wt].length+ve),h.point(Oe[wt][ve],Pe,ht);case"MultiPolygon":return wt<0&&(wt=Oe.length+wt),Nt<0&&(Nt=Oe[wt].length+Nt),ve<0&&(ve=Oe[wt][Nt].length-ve),h.point(Oe[wt][Nt][ve],Pe,ht)}throw new Error("geojson is invalid")}l.coordAll=ge,l.coordEach=v,l.coordReduce=w,l.featureEach=J,l.featureReduce=re,l.findPoint=Je,l.findSegment=ur,l.flattenEach=Ue,l.flattenReduce=vt,l.geomEach=Le,l.geomReduce=Xe,l.lineEach=yn,l.lineReduce=wn,l.propEach=C,l.propReduce=j,l.segmentEach=Tt,l.segmentReduce=Xt}),wo=o(l=>{Object.defineProperty(l,"__esModule",{value:!0});var h=bo();function v(w){var C=[1/0,1/0,-1/0,-1/0];return h.coordEach(w,function(j){C[0]>j[0]&&(C[0]=j[0]),C[1]>j[1]&&(C[1]=j[1]),C[2]<j[0]&&(C[2]=j[0]),C[3]<j[1]&&(C[3]=j[1])}),C}v.default=v,l.default=v}),Sr=o((l,h)=>{var v=hr(),w=qn(),C=bo(),j=wo().default,J=C.featureEach;C.coordEach,w.polygon;var re=w.featureCollection;function ge(Le){var Xe=new v(Le);return Xe.insert=function(Ue){if(Ue.type!=="Feature")throw new Error("invalid feature");return Ue.bbox=Ue.bbox?Ue.bbox:j(Ue),v.prototype.insert.call(this,Ue)},Xe.load=function(Ue){var vt=[];return Array.isArray(Ue)?Ue.forEach(function(Tt){if(Tt.type!=="Feature")throw new Error("invalid features");Tt.bbox=Tt.bbox?Tt.bbox:j(Tt),vt.push(Tt)}):J(Ue,function(Tt){if(Tt.type!=="Feature")throw new Error("invalid features");Tt.bbox=Tt.bbox?Tt.bbox:j(Tt),vt.push(Tt)}),v.prototype.load.call(this,vt)},Xe.remove=function(Ue,vt){if(Ue.type!=="Feature")throw new Error("invalid feature");return Ue.bbox=Ue.bbox?Ue.bbox:j(Ue),v.prototype.remove.call(this,Ue,vt)},Xe.clear=function(){return v.prototype.clear.call(this)},Xe.search=function(Ue){var vt=v.prototype.search.call(this,this.toBBox(Ue));return re(vt)},Xe.collides=function(Ue){return v.prototype.collides.call(this,this.toBBox(Ue))},Xe.all=function(){var Ue=v.prototype.all.call(this);return re(Ue)},Xe.toJSON=function(){return v.prototype.toJSON.call(this)},Xe.fromJSON=function(Ue){return v.prototype.fromJSON.call(this,Ue)},Xe.toBBox=function(Ue){var vt;if(Ue.bbox)vt=Ue.bbox;else if(Array.isArray(Ue)&&Ue.length===4)vt=Ue;else if(Array.isArray(Ue)&&Ue.length===6)vt=[Ue[0],Ue[1],Ue[3],Ue[4]];else if(Ue.type==="Feature")vt=j(Ue);else if(Ue.type==="FeatureCollection")vt=j(Ue);else throw new Error("invalid geojson");return{minX:vt[0],minY:vt[1],maxX:vt[2],maxY:vt[3]}},Xe}h.exports=ge,h.exports.default=ge});Array.prototype.findIndex=Array.prototype.findIndex||function(l){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof l!="function")throw new TypeError("callback must be a function");for(var h=Object(this),v=h.length>>>0,w=arguments[1],C=0;C<v;C++)if(l.call(w,h[C],C,h))return C;return-1},Array.prototype.find=Array.prototype.find||function(l){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof l!="function")throw new TypeError("callback must be a function");for(var h=Object(this),v=h.length>>>0,w=arguments[1],C=0;C<v;C++){var j=h[C];if(l.call(w,j,C,h))return j}},typeof Object.assign!="function"&&(Object.assign=function(l){if(l==null)throw new TypeError("Cannot convert undefined or null to object");l=Object(l);for(var h=1;h<arguments.length;h++){var v=arguments[h];if(v!=null)for(var w in v)Object.prototype.hasOwnProperty.call(v,w)&&(l[w]=v[w])}return l}),function(l){l.forEach(function(h){h.hasOwnProperty("remove")||Object.defineProperty(h,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(l,h){if(this==null)throw new TypeError('"this" is null or not defined');var v=Object(this),w=v.length>>>0;if(w===0)return!1;var C=h|0,j=Math.max(C>=0?C:w-Math.abs(C),0);function J(re,ge){return re===ge||typeof re=="number"&&typeof ge=="number"&&isNaN(re)&&isNaN(ge)}for(;j<w;){if(J(v[j],l))return!0;j++}return!1}});var Vs={version:"2.18.3"},Gn=f(_i()),_r={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},Yr={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex lschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer lschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Lnge",segmentLength:"Segment Lnge",area:"Flche",radius:"Radius",perimeter:"Umfang",height:"Hhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},_n={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},nn={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},ai={tooltips:{placeMarker:"Adaug un punct",firstVertex:"Apas aici pentru a aduga primul Vertex",continueLine:"Apas aici pentru a continua desenul",finishLine:"Apas pe orice obiect pentru a finisa desenul",finishPoly:"Apas pe primul obiect pentru a finisa",finishRect:"Apas pentru a finisa",startCircle:"Apas pentru a desena un cerc",finishCircle:"Apas pentru a finisa un cerc",placeCircleMarker:"Adaug un punct"},actions:{finish:"Termin",cancel:"Anuleaz",removeLastVertex:"terge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaug o bulin",drawPolyButton:"Deseneaz un poligon",drawLineButton:"Deseneaz o linie",drawCircleButton:"Deseneaz un cerc",drawRectButton:"Deseneaz un dreptunghi",editButton:"Editeaz straturile",dragButton:"Mut straturile",cutButton:"Taie straturile",deleteButton:"terge straturile",drawCircleMarkerButton:"Deseneaz marcatorul cercului",snappingButton:"Fixai marcatorul glisat pe alte straturi i vrfuri",pinningButton:"Fixai vrfurile partajate mpreun",rotateButton:"Rotii stratul"}},fo={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:"     ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" "}},xo={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vrtice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del crculo",finishCircle:"Presiona para finalizar el crculo",placeCircleMarker:"Presiona para colocar un marcador de crculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar ltimo vrtice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polgono",drawLineButton:"Dibujar Lnea",drawCircleButton:"Dibujar Crculo",drawRectButton:"Dibujar Rectngulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Crculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vrtices",pinningButton:"Fijar juntos los vrtices compartidos",rotateButton:"Rotar capa"}},Mi={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beindigen",finishPoly:"Klik op het eerst punt om te beindigen",finishRect:"Klik om te beindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},fs={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer  dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"diter des calques",dragButton:"Dplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"pingler ensemble les sommets partags",rotateButton:"Tourner des calques"}},Qo={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},Ro={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},hi={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vrtice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do crculo",finishCircle:"Clique para finalizar o crculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover ltimo vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},Os={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vrtice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do crculo",finishCircle:"Clique para terminar o crculo",placeCircleMarker:"Clique para colocar marcador de crculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover ltimo Vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},Fo={tooltips:{placeMarker:"Kliknij, aby umieci znacznik",firstVertex:"Kliknij, aby umieci pierwszy wierzchoek",continueLine:"Kliknij, aby kontynuowa rysowanie",finishLine:"Kliknij dowolny istniejcy znacznik, aby zakoczy",finishPoly:"Kliknij pierwszy znacznik, aby zakoczy",finishRect:"Kliknij, aby zakoczy",startCircle:"Kliknij, aby umieci rodek okrgu",finishCircle:"Kliknij, aby zakoczy okrg",placeCircleMarker:"Kliknij, aby umieci znacznik okrgu",placeText:"Kliknij, aby umieci tekst"},actions:{finish:"Zakocz",cancel:"Anuluj",removeLastVertex:"Usu ostatni wierzchoek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokt",drawLineButton:"Rysuj lini",drawCircleButton:"Rysuj okrg",drawRectButton:"Rysuj prostokt",editButton:"Edytuj warstwy",dragButton:"Przecignij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usu warstwy",drawCircleMarkerButton:"Rysuj znacznik okrgy",snappingButton:"Przycignij przenoszony znacznik do innych warstw i wierzchokw",pinningButton:"Przypnij wsplne wierzchoki razem",rotateButton:"Obr warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne ledzenie linii"},measurements:{totalLength:"Dugo",segmentLength:"Dugo odcinka",area:"Obszar",radius:"Promie",perimeter:"Obwd",height:"Wysoko",width:"Szeroko",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},eo={tooltips:{placeMarker:"Klicka fr att placera markr",firstVertex:"Klicka fr att placera frsta hrnet",continueLine:"Klicka fr att fortstta rita",finishLine:"Klicka p en existerande punkt fr att slutfra",finishPoly:"Klicka p den frsta punkten fr att slutfra",finishRect:"Klicka fr att slutfra",startCircle:"Klicka fr att placera cirkelns centrum",finishCircle:"Klicka fr att slutfra cirkeln",placeCircleMarker:"Klicka fr att placera cirkelmarkr"},actions:{finish:"Slutfr",cancel:"Avbryt",removeLastVertex:"Ta bort sista hrnet"},buttonTitles:{drawMarkerButton:"Rita Markr",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkr",snappingButton:"Snpp dra markren till andra lager och hrn",pinningButton:"Fst delade hrn tillsammans",rotateButton:"Rotera lagret"}},Lo={tooltips:{placeMarker:"     ",firstVertex:"       ",continueLine:"      ",finishLine:"        ",finishPoly:"       ",finishRect:"    ",startCircle:"      ",finishCircle:"      ",placeCircleMarker:"      "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"        ",pinningButton:"   ",rotateButton:"  "}},Gs={tooltips:{placeMarker:"Kattintson a jell elhelyezshez",firstVertex:"Kattintson az els pont elhelyezshez",continueLine:"Kattintson a kvetkez pont elhelyezshez",finishLine:"A befejezshez kattintson egy meglv pontra",finishPoly:"A befejezshez kattintson az els pontra",finishRect:"Kattintson a befejezshez",startCircle:"Kattintson a kr kzppontjnak elhelyezshez",finishCircle:"Kattintson a kr befejezshez",placeCircleMarker:"Kattintson a krjell elhelyezshez"},actions:{finish:"Befejezs",cancel:"Mgse",removeLastVertex:"Utols pont eltvoltsa"},buttonTitles:{drawMarkerButton:"Jell rajzolsa",drawPolyButton:"Poligon rajzolsa",drawLineButton:"Vonal rajzolsa",drawCircleButton:"Kr rajzolsa",drawRectButton:"Ngyzet rajzolsa",editButton:"Elemek szerkesztse",dragButton:"Elemek mozgatsa",cutButton:"Elemek vgsa",deleteButton:"Elemek trlse",drawCircleMarkerButton:"Kr jell rajzolsa",snappingButton:"Kapcsolja a jelltt msik elemhez vagy ponthoz",pinningButton:"Kzs pontok sszektse",rotateButton:"Flia elforgatsa"}},va={tooltips:{placeMarker:"Tryk for at placere en markr",firstVertex:"Tryk for at placere det frste punkt",continueLine:"Tryk for at fortstte linjen",finishLine:"Tryk p et eksisterende punkt for at afslutte",finishPoly:"Tryk p det frste punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkr"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markr",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Trk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkr",snappingButton:"Fastgr trukket markr til andre elementer",pinningButton:"Sammenlg delte elementer",rotateButton:"Roter laget"}},to={tooltips:{placeMarker:"Klikk for  plassere punkt",firstVertex:"Klikk for  plassere frste punkt",continueLine:"Klikk for  tegne videre",finishLine:"Klikk p et eksisterende punkt for  fullfre",finishPoly:"Klikk frste punkt for  fullfre",finishRect:"Klikk for  fullfre",startCircle:"Klikk for  sette sirkel midtpunkt",finishCircle:"Klikk for  fullfre sirkel",placeCircleMarker:"Klikk for  plassere sirkel",placeText:"Klikk for  plassere tekst"},actions:{finish:"Fullfr",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotr objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalr objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Omrde",radius:"Radius",perimeter:"Omriss",height:"Hyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkr"}},il={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"   ",finishLine:"      ",finishPoly:"     ",finishRect:"  ",startCircle:"    ",finishCircle:"    ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"      ",rotateButton:" ",drawTextButton:" ",scaleButton:"",autoTracingButton:" "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},ya={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:" -    ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"'   ",rotateButton:" "}},gr={tooltips:{placeMarker:"areti yerletirmek iin tklayn",firstVertex:"lk tepe noktasn yerletirmek iin tklayn",continueLine:"izime devam etmek iin tklayn",finishLine:"Bitirmek iin mevcut herhangi bir iaretiyi tklayn",finishPoly:"Bitirmek iin ilk iaretiyi tklayn",finishRect:"Bitirmek iin tklayn",startCircle:"Daire merkezine yerletirmek iin tklayn",finishCircle:"Daireyi bitirmek iin tklayn",placeCircleMarker:"Daire iaretisi yerletirmek iin tklayn"},actions:{finish:"Bitir",cancel:"ptal",removeLastVertex:"Son keyi kaldr"},buttonTitles:{drawMarkerButton:"izim aretisi",drawPolyButton:"okgenler iz",drawLineButton:"oklu izgi iz",drawCircleButton:"ember iz",drawRectButton:"Dikdrtgen iz",editButton:"Katmanlar dzenle",dragButton:"Katmanlar srkle",cutButton:"Katmanlar kes",deleteButton:"Katmanlar kaldr",drawCircleMarkerButton:"Daire iaretisi iz",snappingButton:"Srklenen iaretiyi dier katmanlara ve kelere yaptr",pinningButton:"Paylalan keleri birbirine sabitle",rotateButton:"Katman dndr"}},br={tooltips:{placeMarker:"Kliknutm vytvote znaku",firstVertex:"Kliknutm vytvote prvn objekt",continueLine:"Kliknutm pokraujte v kreslen",finishLine:"Kliknut na libovolnou existujc znaku pro dokonen",finishPoly:"Vyberte prvn bod pro dokonen",finishRect:"Kliknte pro dokonen",startCircle:"Kliknutm pidejte sted kruhu",finishCircle:",   ",placeCircleMarker:"Kliknutm nastavte polomr"},actions:{finish:"Dokonit",cancel:"Zruit",removeLastVertex:"Zruit posledn akci"},buttonTitles:{drawMarkerButton:"Pidat znaku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit kivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdlnk",editButton:"Upravit vrstvu",dragButton:"Peneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Pidat kruhovou znaku",snappingButton:"Navzat tanou znaku k dalm vrstvm a vrcholm",pinningButton:"Spojit spolen body dohromady",rotateButton:"Otote vrstvu"}},Jr={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:"",placeText:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:"",drawTextButton:""}},Nr={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtmist",finishLine:"Klikkaa olemassa olevaa merkki lopettaaksesi",finishPoly:"Klikkaa ensimmist merkki lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrn keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrn",placeCircleMarker:"Klikkaa asettaaksesi ympyrmerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirr merkkej",drawPolyButton:"Piirr monikulmioita",drawLineButton:"Piirr viivoja",drawCircleButton:"Piirr ympyr",drawRectButton:"Piirr neliskulmioita",editButton:"Muokkaa",dragButton:"Siirr",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirr ympyrmerkki",snappingButton:"Kiinnit siirrettv merkki toisiin muotoihin",pinningButton:"Kiinnit jaetut muodot yhteen",rotateButton:"Knn",drawTextButton:"Piirr teksti"}},jo={tooltips:{placeMarker:"  ",firstVertex:"   ",continueLine:"  ",finishLine:"   ",finishPoly:"   ",finishRect:" ",startCircle:"    ",finishCircle:"  ",placeCircleMarker:"   ",placeText:"  "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" ",drawTextButton:" "}},ol={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"    ",finishLine:"    ",finishPoly:"    ",finishRect:"  ",startCircle:"    ",finishCircle:"   ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:" ",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:"  ",cutButton:"  ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"     ",pinningButton:"   ",rotateButton:" ",drawTextButton:" ",scaleButton:"  ",autoTracingButton:"  "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},sl=Os,Hs={en:_r,de:Yr,it:_n,id:nn,ro:ai,ru:fo,es:xo,nl:Mi,fr:fs,pt:sl,pt_br:hi,pt_pt:Os,zh:Qo,zh_tw:Ro,pl:Fo,sv:eo,el:Lo,hu:Gs,da:va,no:to,fa:il,ua:ya,tr:gr,cz:br,ja:Jr,fi:Nr,ko:jo,ky:ol},$a={_globalEditModeEnabled:!1,enableGlobalEditMode(l){let h={...l};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(v=>{this._isRelevantForEdit(v)&&v.pm.enable(h)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(l=>{l.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(l=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(l)},handleLayerAdditionInGlobalEditMode(){let l=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let h in l){let v=l[h];this._isRelevantForEdit(v)&&v.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:l}){this._addedLayersEdit[L.stamp(l)]=l},_isRelevantForEdit(l){return l.pm&&!(l instanceof L.LayerGroup)&&(!L.PM.optIn&&!l.options.pmIgnore||L.PM.optIn&&l.options.pmIgnore===!1)&&!l._pmTempLayer&&l.pm.options.allowEditing}},bu=$a,Ml={_globalDragModeEnabled:!1,enableGlobalDragMode(){let l=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},l.forEach(h=>{this._isRelevantForDrag(h)&&h.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let l=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,l.forEach(h=>{h.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let l=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let h in l){let v=l[h];this._isRelevantForDrag(v)&&v.pm.enableLayerDrag()}},_layerAddedDrag({layer:l}){this._addedLayersDrag[L.stamp(l)]=l},_isRelevantForDrag(l){return l.pm&&!(l instanceof L.LayerGroup)&&(!L.PM.optIn&&!l.options.pmIgnore||L.PM.optIn&&l.options.pmIgnore===!1)&&!l._pmTempLayer&&l.pm.options.draggable}},Cr=Ml,qr={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(l=>{this._isRelevantForRemoval(l)&&(l.pm.enabled()&&l.pm.disable(),l.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(l=>{l.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(l){let h=l.target;this._isRelevantForRemoval(h)&&!h.pm.dragging()&&(h.removeFrom(this.map.pm._getContainingLayer()),h.remove(),h instanceof L.LayerGroup?(this._fireRemoveLayerGroup(h),this._fireRemoveLayerGroup(this.map,h)):(h.pm._fireRemove(h),h.pm._fireRemove(this.map,h)))},_isRelevantForRemoval(l){return l.pm&&!(l instanceof L.LayerGroup)&&(!L.PM.optIn&&!l.options.pmIgnore||L.PM.optIn&&l.options.pmIgnore===!1)&&!l._pmTempLayer&&l.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let l=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let h in l){let v=l[h];this._isRelevantForRemoval(v)&&(v.pm.enabled()&&v.pm.disable(),v.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:l}){this._addedLayersRemoval[L.stamp(l)]=l}},Ua=qr,Yu={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(l=>l instanceof L.Polyline).forEach(l=>{this._isRelevantForRotate(l)&&l.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(l=>l instanceof L.Polyline).forEach(l=>{l.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(l){return l.pm&&l instanceof L.Polyline&&!(l instanceof L.LayerGroup)&&(!L.PM.optIn&&!l.options.pmIgnore||L.PM.optIn&&l.options.pmIgnore===!1)&&!l._pmTempLayer&&l.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let l=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let h in l){let v=l[h];this._isRelevantForRemoval(v)&&v.pm.enableRotate()}},_layerAddedRotate({layer:l}){this._addedLayersRotate[L.stamp(l)]=l}},Al=Yu,Yl=f(_i()),al={_fireDrawStart(l="Draw",h={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},l,h)},_fireDrawEnd(l="Draw",h={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},l,h)},_fireCreate(l,h="Draw",v={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:l,layer:l},h,v)},_fireCenterPlaced(l="Draw",h={}){let v=l==="Draw"?this._layer:void 0,w=l!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:v,layer:w,latlng:this._layer.getLatLng()},l,h)},_fireCut(l,h,v,w="Draw",C={}){this.__fire(l,"pm:cut",{shape:this._shape,layer:h,originalLayer:v},w,C)},_fireEdit(l=this._layer,h="Edit",v={}){this.__fire(l,"pm:edit",{layer:this._layer,shape:this.getShape()},h,v)},_fireEnable(l="Edit",h={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},l,h)},_fireDisable(l="Edit",h={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},l,h)},_fireUpdate(l="Edit",h={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},l,h)},_fireMarkerDragStart(l,h=void 0,v="Edit",w={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:l,shape:this.getShape(),indexPath:h},v,w)},_fireMarkerDrag(l,h=void 0,v="Edit",w={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:l,shape:this.getShape(),indexPath:h},v,w)},_fireMarkerDragEnd(l,h=void 0,v=void 0,w="Edit",C={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:l,shape:this.getShape(),indexPath:h,intersectionReset:v},w,C)},_fireDragStart(l="Edit",h={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},l,h)},_fireDrag(l,h="Edit",v={}){this.__fire(this._layer,"pm:drag",{...l,shape:this.getShape()},h,v)},_fireDragEnd(l="Edit",h={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},l,h)},_fireDragEnable(l="Edit",h={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},l,h)},_fireDragDisable(l="Edit",h={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},l,h)},_fireRemove(l,h=l,v="Edit",w={}){this.__fire(l,"pm:remove",{layer:h,shape:this.getShape()},v,w)},_fireVertexAdded(l,h,v,w="Edit",C={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:l,indexPath:h,latlng:v,shape:this.getShape()},w,C)},_fireVertexRemoved(l,h,v="Edit",w={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:l,indexPath:h,shape:this.getShape()},v,w)},_fireVertexClick(l,h,v="Edit",w={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:l,indexPath:h,shape:this.getShape()},v,w)},_fireIntersect(l,h=this._layer,v="Edit",w={}){this.__fire(h,"pm:intersect",{layer:this._layer,intersection:l,shape:this.getShape()},v,w)},_fireLayerReset(l,h,v="Edit",w={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:l,indexPath:h,shape:this.getShape()},v,w)},_fireChange(l,h="Edit",v={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:l,shape:this.getShape()},h,v)},_fireTextChange(l,h="Edit",v={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:l,shape:this.getShape()},h,v)},_fireTextFocus(l="Edit",h={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},l,h)},_fireTextBlur(l="Edit",h={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},l,h)},_fireSnapDrag(l,h,v="Snapping",w={}){this.__fire(l,"pm:snapdrag",h,v,w)},_fireSnap(l,h,v="Snapping",w={}){this.__fire(l,"pm:snap",h,v,w)},_fireUnsnap(l,h,v="Snapping",w={}){this.__fire(l,"pm:unsnap",h,v,w)},_fireRotationEnable(l,h,v="Rotation",w={}){this.__fire(l,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},v,w)},_fireRotationDisable(l,h="Rotation",v={}){this.__fire(l,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},h,v)},_fireRotationStart(l,h,v="Rotation",w={}){this.__fire(l,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:h},v,w)},_fireRotation(l,h,v,w=this._rotationLayer,C="Rotation",j={}){this.__fire(l,"pm:rotate",{layer:w,helpLayer:this._layer,startAngle:this._startAngle,angle:w.pm.getAngle(),angleDiff:h,oldLatLngs:v,newLatLngs:w.getLatLngs()},C,j)},_fireRotationEnd(l,h,v,w="Rotation",C={}){this.__fire(l,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:h,angle:this._rotationLayer.pm.getAngle(),originLatLngs:v,newLatLngs:this._rotationLayer.getLatLngs()},w,C)},_fireActionClick(l,h,v,w="Toolbar",C={}){this.__fire(this._map,"pm:actionclick",{text:l.text,action:l,btnName:h,button:v},w,C)},_fireButtonClick(l,h,v="Toolbar",w={}){this.__fire(this._map,"pm:buttonclick",{btnName:l,button:h},v,w)},_fireLangChange(l,h,v,w,C="Global",j={}){this.__fire(this.map,"pm:langchange",{oldLang:l,activeLang:h,fallback:v,translations:w},C,j)},_fireGlobalDragModeToggled(l,h="Global",v={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:l,map:this.map},h,v)},_fireGlobalEditModeToggled(l,h="Global",v={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:l,map:this.map},h,v)},_fireGlobalRemovalModeToggled(l,h="Global",v={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:l,map:this.map},h,v)},_fireGlobalCutModeToggled(l="Global",h={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},l,h)},_fireGlobalDrawModeToggled(l="Global",h={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},l,h)},_fireGlobalRotateModeToggled(l="Global",h={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},l,h)},_fireRemoveLayerGroup(l,h=l,v="Edit",w={}){this.__fire(l,"pm:remove",{layer:h,shape:void 0},v,w)},_fireKeyeventEvent(l,h,v,w="Global",C={}){this.__fire(this.map,"pm:keyevent",{event:l,eventType:h,focusOn:v},w,C)},__fire(l,h,v,w,C={}){v=(0,Yl.default)(v,C,{source:w}),L.PM.Utils._fireEvent(l,h,v)}},kl=al,Jl=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(l){this.map=l,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),l.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(l){let h="document";this.map.getContainer().contains(l.target)&&(h="map");let v={event:l,eventType:l.type,focusOn:h};this._lastEvents[l.type]=v,this._lastEvents.current=v,this.map.pm._fireKeyeventEvent(l,l.type,h)},_onBlur(l){l.altKey=!1;let h={event:l,eventType:l.type,focusOn:"document"};this._lastEvents[l.type]=h,this._lastEvents.current=h},getLastKeyEvent(l="current"){return this._lastEvents[l]},isShiftKeyPressed(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.shiftKey},isAltKeyPressed(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.altKey},isCtrlKeyPressed(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.ctrlKey},isMetaKeyPressed(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.metaKey},getPressedKey(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.key}}),Xr=Jl,no=f(ci());function or(l){let h=L.PM.activeLang;return(0,no.default)(Hs[h],l)||(0,no.default)(Hs.en,l)||l}function ro(l){for(let h=0;h<l.length;h+=1){let v=l[h];if(Array.isArray(v)){if(ro(v))return!0}else if(v!=null&&v!=="")return!0}return!1}function ll(l){return l.reduce((h,v)=>{if(v.length!==0){let w=Array.isArray(v)?ll(v):v;Array.isArray(w)?w.length!==0&&h.push(w):h.push(w)}return h},[])}function _a(l,h,v){let w={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:C,b:j,f:J}=w,re=l.lng,ge=l.lat,Le=v,Xe=Math.PI,Ue=h*Xe/180,vt=Math.sin(Ue),Tt=Math.cos(Ue),Xt=(1-J)*Math.tan(ge*Xe/180),yn=1/Math.sqrt(1+Xt*Xt),wn=Xt*yn,ur=Math.atan2(Xt,Tt),Je=yn*vt,nt=1-Je*Je,ht=nt*(C*C-j*j)/(j*j),Bt=1+ht/16384*(4096+ht*(-768+ht*(320-175*ht))),wt=ht/1024*(256+ht*(-128+ht*(74-47*ht))),Nt=Le/(j*Bt),ve=2*Math.PI,Pe,Be,Oe;for(;Math.abs(Nt-ve)>1e-12;){Pe=Math.cos(2*ur+Nt),Be=Math.sin(Nt),Oe=Math.cos(Nt);let sn=wt*Be*(Pe+wt/4*(Oe*(-1+2*Pe*Pe)-wt/6*Pe*(-3+4*Be*Be)*(-3+4*Pe*Pe)));ve=Nt,Nt=Le/(j*Bt)+sn}let Fe=wn*Be-yn*Oe*Tt,je=Math.atan2(wn*Oe+yn*Be*Tt,(1-J)*Math.sqrt(Je*Je+Fe*Fe)),ut=Math.atan2(Be*vt,yn*Oe-wn*Be*Tt),ct=J/16*nt*(4+J*(4-3*nt)),gt=ut-(1-ct)*J*Je*(Nt+ct*Be*(Pe+ct*Oe*(-1+2*Pe*Pe))),St=re+gt*180/Xe,Ct=je*180/Xe;return L.latLng(St,Ct)}function Ui(l,h,v,w,C=!0){let j,J,re,ge=[];for(let Le=0;Le<v;Le+=1){if(C)j=Le*360/v+w,J=_a(l,j,h),re=L.latLng(J.lng,J.lat);else{let Xe=l.lat+Math.cos(2*Le*Math.PI/v)*h,Ue=l.lng+Math.sin(2*Le*Math.PI/v)*h;re=L.latLng(Xe,Ue)}ge.push(re)}return ge}function Xl(l,h,v){h=(h+360)%360;let w=Math.PI/180,C=180/Math.PI,{R:j}=L.CRS.Earth,J=l.lng*w,re=l.lat*w,ge=h*w,Le=Math.sin(re),Xe=Math.cos(re),Ue=Math.cos(v/j),vt=Math.sin(v/j),Tt=Math.asin(Le*Ue+Xe*vt*Math.cos(ge)),Xt=J+Math.atan2(Math.sin(ge)*vt*Xe,Ue-Le*Math.sin(Tt));Xt*=C;let yn=Xt-360,wn=Xt<-180?Xt+360:Xt;return Xt=Xt>180?yn:wn,L.latLng([Tt*C,Xt])}function ta(l,h,v){let w=l.latLngToContainerPoint(h),C=l.latLngToContainerPoint(v),j=Math.atan2(C.y-w.y,C.x-w.x)*180/Math.PI+90;return j+=j<0?360:0,j}function Tl(l,h,v,w){let C=ta(l,h,v);return Xl(h,C,w)}function Nl(l,h,v="asc"){if(!h||Object.keys(h).length===0)return(ge,Le)=>ge-Le;let w=Object.keys(h),C,j=w.length-1,J={};for(;j>=0;)C=w[j],J[C.toLowerCase()]=h[C],j-=1;function re(ge){if(ge instanceof L.Marker)return"Marker";if(ge instanceof L.Circle)return"Circle";if(ge instanceof L.CircleMarker)return"CircleMarker";if(ge instanceof L.Rectangle)return"Rectangle";if(ge instanceof L.Polygon)return"Polygon";if(ge instanceof L.Polyline)return"Line"}return(ge,Le)=>{let Xe,Ue;if(Xe=re(ge.layer).toLowerCase(),Ue=re(Le.layer).toLowerCase(),!Xe||!Ue)return 0;let vt=Xe in J?J[Xe]:Number.MAX_SAFE_INTEGER,Tt=Ue in J?J[Ue]:Number.MAX_SAFE_INTEGER,Xt=0;return vt<Tt?Xt=-1:vt>Tt&&(Xt=1),v==="desc"?Xt*-1:Xt}}function Bs(l,h=l.getLatLngs()){return l instanceof L.Polygon?L.polygon(h).getLatLngs():L.polyline(h).getLatLngs()}function Dl(l,h){var v,w,C,j;if((w=(v=h.options.crs)==null?void 0:v.projection)!=null&&w.MAX_LATITUDE){let J=(j=(C=h.options.crs)==null?void 0:C.projection)==null?void 0:j.MAX_LATITUDE;l.lat=Math.max(Math.min(J,l.lat),-J)}return l}function bi(l){return l.options.renderer||l._map&&(l._map._getPaneRenderer(l.options.pane)||l._map.options.renderer||l._map._renderer)||l._renderer}var Ju=L.Class.extend({includes:[bu,Cr,Ua,Al,kl],initialize(l){this.map=l,this.Draw=new L.PM.Draw(l),this.Toolbar=new L.PM.Toolbar(l),this.Keyboard=Xr(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(l)},setLang(l="en",h,v="en"){if(l=l.trim().toLowerCase(),!/^[a-z]{2}$/.test(l)){let C=l.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(C){let j=[`${C[1]}_${C[2]}`,`${C[1]}`];for(let J of j)if(Hs[J]){l=J;break}}}let w=L.PM.activeLang;h&&(Hs[l]=(0,Gn.default)(Hs[v],h)),L.PM.activeLang=l,this.map.pm.Toolbar.reinit(),this._fireLangChange(w,l,v,Hs[l])},addControls(l){this.Toolbar.addControls(l)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(l="Polygon",h){l==="Poly"&&(l="Polygon"),this.Draw.enable(l,h)},disableDraw(l="Polygon"){l==="Poly"&&(l="Polygon"),this.Draw.disable(l)},setPathOptions(l,h={}){let v=h.ignoreShapes||[],w=h.merge||!1;this.map.pm.Draw.shapes.forEach(C=>{v.indexOf(C)===-1&&this.map.pm.Draw[C].setPathOptions(l,w)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(l){let h=(0,Gn.default)(this.globalOptions,l);h.editable&&(h.resizeableCircleMarker=h.editable,delete h.editable);let v=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!h.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),v=!0);let w=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!h.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),w=!0),this.map.pm.Draw.shapes.forEach(C=>{this.map.pm.Draw[C].setOptions(h)}),v&&this.map.pm.Draw.CircleMarker.enable(),w&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(C=>{C.pm.setOptions(h)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=h,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(l=>{l.pm.enabled()&&l.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(l){return this.Draw.Cut.enable(l)},toggleGlobalCutMode(l){return this.Draw.Cut.toggle(l)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(l=!1){let h=L.PM.Utils.findLayers(this.map);if(!l)return h;let v=L.featureGroup();return v._pmTempLayer=!0,h.forEach(w=>{v.addLayer(w)}),v},getGeomanDrawLayers(l=!1){let h=L.PM.Utils.findLayers(this.map).filter(w=>w._drawnByGeoman===!0);if(!l)return h;let v=L.featureGroup();return v._pmTempLayer=!0,h.forEach(w=>{v.addLayer(w)}),v},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(l){this._touchEventCounter===0&&(L.DomEvent.on(l,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(l,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(l){this._touchEventCounter===1&&(L.DomEvent.off(l,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(l,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(l){bi(this.map)._onMouseMove(this._createMouseEvent("mousemove",l))},_canvasTouchClick(l){let h="";l.type==="touchstart"||l.type==="pointerdown"?h="mousedown":(l.type==="touchend"||l.type==="pointerup"||l.type==="touchcancel"||l.type==="pointercancel")&&(h="mouseup"),h&&bi(this.map)._onClick(this._createMouseEvent(h,l))},_createMouseEvent(l,h){let v,w=h.touches[0]||h.changedTouches[0];try{v=new MouseEvent(l,{bubbles:h.bubbles,cancelable:h.cancelable,view:h.view,detail:w.detail,screenX:w.screenX,screenY:w.screenY,clientX:w.clientX,clientY:w.clientY,ctrlKey:h.ctrlKey,altKey:h.altKey,shiftKey:h.shiftKey,metaKey:h.metaKey,button:h.button,relatedTarget:h.relatedTarget})}catch{v=document.createEvent("MouseEvents"),v.initMouseEvent(l,h.bubbles,h.cancelable,h.view,w.detail,w.screenX,w.screenY,w.clientX,w.clientY,h.ctrlKey,h.altKey,h.shiftKey,h.metaKey,h.button,h.relatedTarget)}return v}}),Mo=Ju,qs=L.Control.extend({includes:[kl],options:{position:"topleft",disableByOtherButtons:!0},initialize(l){this._button=L.Util.extend({},this.options,l)},onAdd(l){return this._map=l,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let l=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),l?l.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(l){return typeof l=="boolean"?this._button.toggleStatus=l:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(l){l&&l.preventDefault(),!this._button.disabled&&(this._button.onClick(l,{button:this,event:l}),this._clicked(l),this._button.afterClick(l,{button:this,event:l}))},_makeButton(l){let h=this.options.position.indexOf("right")>-1?"pos-right":"",v=L.DomUtil.create("div",`button-container  ${h}`,this._container);l.title&&v.setAttribute("title",l.title);let w=L.DomUtil.create("a","leaflet-buttons-control-button",v);w.setAttribute("role","button"),w.setAttribute("tabindex","0"),w.href="#";let C=L.DomUtil.create("div",`leaflet-pm-actions-container ${h}`,v),j=l.actions,J={cancel:{text:or("actions.cancel"),title:or("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:or("actions.finish"),title:or("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:or("actions.removeLastVertex"),title:or("actions.removeLastVertex"),onClick(){this._map.pm.Draw[l.jsClass]._removeLastVertex()}},finish:{text:or("actions.finish"),title:or("actions.finish"),onClick(ge){this._map.pm.Draw[l.jsClass]._finishShape(ge)}}};l._preparedActions=j.map(ge=>{let Le=typeof ge=="string"?ge:ge.name,Xe;if(J[Le])Xe=J[Le];else if(ge.text)Xe=ge;else return Xe;let Ue=L.DomUtil.create("a",`leaflet-pm-action ${h} action-${Le}`,C);if(Ue.setAttribute("role","button"),Ue.setAttribute("tabindex","0"),Ue.href="#",Xe.title&&(Ue.title=Xe.title),Ue.innerHTML=Xe.text,L.DomEvent.disableClickPropagation(Ue),L.DomEvent.on(Ue,"click",L.DomEvent.stop),Xe._node=Ue,!l.disabled&&Xe.onClick){let vt=Tt=>{Tt.preventDefault();let Xt="",{buttons:yn}=this._map.pm.Toolbar;for(let wn in yn)if(yn[wn]._button===l){Xt=wn;break}this._fireActionClick(Xe,Xt,l)};L.DomEvent.addListener(Ue,"click",vt,this),L.DomEvent.addListener(Ue,"click",Xe.onClick,this),L.DomEvent.addListener(Ue,"click",()=>this._updateActiveAction(l))}return Xe}),this._updateActiveAction(l),l.toggleStatus&&L.DomUtil.addClass(v,"active");let re=L.DomUtil.create("div","control-icon",w);return l.iconUrl&&re.setAttribute("src",l.iconUrl),l.className&&L.DomUtil.addClass(re,l.className),L.DomEvent.disableClickPropagation(w),L.DomEvent.on(w,"click",L.DomEvent.stop),l.disabled||(L.DomEvent.addListener(w,"click",this._onBtnClick,this),L.DomEvent.addListener(w,"click",this._triggerClick,this)),l.disabled&&(L.DomUtil.addClass(w,"pm-disabled"),w.setAttribute("aria-disabled","true")),v},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let l="",{buttons:h}=this._map.pm.Toolbar;for(let v in h)if(h[v]._button===this._button){l=v;break}this._fireButtonClick(l,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let l="pm-disabled",h=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(h,l),h.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(h,l),h.setAttribute("aria-disabled","false"))},_updateActiveAction(l){var h;(h=l._preparedActions)==null||h.forEach(v=>{v!=null&&v._node&&(v.isActive&&v.isActive.call(this)?L.DomUtil.addClass(v._node,"active-action"):L.DomUtil.removeClass(v._node,"active-action"))})}}),Il=qs;L.Control.PMButton=Il;var Ws=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(l){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(l)},reinit(){let l=this.isVisible;this.removeControls(),this._defineButtons(),l&&this.addControls()},init(l){this.map=l,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(l){let h=`${l}Container`;return this[h]||(this[h]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${l} leaflet-bar leaflet-control`)),this[h]},getButtons(){return this.buttons},addControls(l=this.options){typeof l.editPolygon<"u"&&(l.editMode=l.editPolygon),typeof l.deleteLayer<"u"&&(l.removalMode=l.deleteLayer),L.Util.setOptions(this,l),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let l=this.getButtons(),h={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let v in l){let w=l[v];L.Util.setOptions(w,{className:h.geomanIcons[v]})}},removeControls(){let l=this.getButtons();for(let h in l)l[h].remove();this.isVisible=!1},toggleControls(l=this.options){this.isVisible?this.removeControls():this.addControls(l)},_addButton(l,h){return this.buttons[l]=h,this.options[l]=!!this.options[l]||!1,this.buttons[l]},triggerClickOnToggledButtons(l){for(let h in this.buttons){let v=this.buttons[h];v._button.disableByOtherButtons&&v!==l&&v.toggled()&&v._triggerClick()}},toggleButton(l,h,v=!0){l==="editPolygon"&&(l="editMode"),l==="deleteLayer"&&(l="removalMode");let w=l;return v&&this.triggerClickOnToggledButtons(this.buttons[w]),this.buttons[w]?this.buttons[w].toggle(h):!1},_defineButtons(){let l={className:"control-icon leaflet-pm-icon-marker",title:or("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(vt,Tt)=>{this.map.pm.Draw[Tt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},h={title:or("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(vt,Tt)=>{this.map.pm.Draw[Tt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},v={className:"control-icon leaflet-pm-icon-polyline",title:or("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(vt,Tt)=>{this.map.pm.Draw[Tt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},w={title:or("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(vt,Tt)=>{this.map.pm.Draw[Tt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},C={title:or("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(vt,Tt)=>{this.map.pm.Draw[Tt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},j={title:or("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(vt,Tt)=>{this.map.pm.Draw[Tt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},J={title:or("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},re={title:or("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},ge={title:or("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(vt,Tt)=>{this.map.pm.Draw[Tt.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},Le={title:or("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Xe={title:or("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Ue={className:"control-icon leaflet-pm-icon-text",title:or("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(vt,Tt)=>{this.map.pm.Draw[Tt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(l)),this._addButton("drawPolyline",new L.Control.PMButton(v)),this._addButton("drawRectangle",new L.Control.PMButton(j)),this._addButton("drawPolygon",new L.Control.PMButton(h)),this._addButton("drawCircle",new L.Control.PMButton(w)),this._addButton("drawCircleMarker",new L.Control.PMButton(C)),this._addButton("drawText",new L.Control.PMButton(Ue)),this._addButton("editMode",new L.Control.PMButton(J)),this._addButton("dragMode",new L.Control.PMButton(re)),this._addButton("cutPolygon",new L.Control.PMButton(ge)),this._addButton("removalMode",new L.Control.PMButton(Le)),this._addButton("rotateMode",new L.Control.PMButton(Xe))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let l=this.getButtons(),h=[];this.options.drawControls===!1&&(h=h.concat(Object.keys(l).filter(v=>!l[v]._button.tool))),this.options.editControls===!1&&(h=h.concat(Object.keys(l).filter(v=>l[v]._button.tool==="edit"))),this.options.optionsControls===!1&&(h=h.concat(Object.keys(l).filter(v=>l[v]._button.tool==="options"))),this.options.customControls===!1&&(h=h.concat(Object.keys(l).filter(v=>l[v]._button.tool==="custom")));for(let v in l)if(this.options[v]&&h.indexOf(v)===-1){let w=l[v]._button.tool;w||(w="draw"),l[v].setPosition(this._getBtnPosition(w)),l[v].addTo(this.map)}},_getBtnPosition(l){return this.options.positions&&this.options.positions[l]?this.options.positions[l]:this.options.position},setBlockPosition(l,h){this.options.positions[l]=h,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(l,h){if(h)typeof h!="object"&&(h={name:h});else throw new TypeError("Button has no name");let v=this._btnNameMapping(l);if(!h.name)throw new TypeError("Button has no name");if(this.buttons[h.name])throw new TypeError("Button with this name already exists");let w=this.map.pm.Draw.createNewDrawInstance(h.name,v);h={...this.buttons[v]._button,...h};let C=this.createCustomControl(h);return{drawInstance:w,control:C}},createCustomControl(l){if(!l.name)throw new TypeError("Button has no name");if(this.buttons[l.name])throw new TypeError("Button with this name already exists");l.onClick||(l.onClick=()=>{}),l.afterClick||(l.afterClick=()=>{}),l.toggle!==!1&&(l.toggle=!0),l.block&&(l.block=l.block.toLowerCase()),(!l.block||l.block==="draw")&&(l.block=""),l.className?l.className.indexOf("control-icon")===-1&&(l.className=`control-icon ${l.className}`):l.className="control-icon";let h={tool:l.block,className:l.className,title:l.title||"",jsClass:l.name,onClick:l.onClick,afterClick:l.afterClick,doToggle:l.toggle,toggleStatus:!1,disableOtherButtons:l.disableOtherButtons??!0,disableByOtherButtons:l.disableByOtherButtons??!0,cssToggle:l.toggle,position:this.options.position,actions:l.actions||[],disabled:!!l.disabled};this.options[l.name]!==!1&&(this.options[l.name]=!0);let v=this._addButton(l.name,new L.Control.PMButton(h));return this.changeControlOrder(),v},controlExists(l){return!!this.getButton(l)},getButton(l){return this.getButtons()[l]},getButtonsInBlock(l){let h={};if(l)for(let v in this.getButtons()){let w=this.getButtons()[v];(w._button.tool===l||l==="draw"&&!w._button.tool)&&(h[v]=w)}return h},changeControlOrder(l=[]){let h=this._shapeMapping(),v=[];l.forEach(j=>{h[j]?v.push(h[j]):v.push(j)});let w=this.getButtons(),C={};v.forEach(j=>{w[j]&&(C[j]=w[j])}),Object.keys(w).filter(j=>!w[j]._button.tool||w[j]._button.tool==="draw").forEach(j=>{v.indexOf(j)===-1&&(C[j]=w[j])}),Object.keys(w).filter(j=>w[j]._button.tool==="edit").forEach(j=>{v.indexOf(j)===-1&&(C[j]=w[j])}),Object.keys(w).filter(j=>w[j]._button.tool==="options").forEach(j=>{v.indexOf(j)===-1&&(C[j]=w[j])}),Object.keys(w).filter(j=>w[j]._button.tool==="custom").forEach(j=>{v.indexOf(j)===-1&&(C[j]=w[j])}),Object.keys(w).forEach(j=>{v.indexOf(j)===-1&&(C[j]=w[j])}),this.map.pm.Toolbar.buttons=C,this._showHideButtons()},getControlOrder(){let l=this.getButtons(),h=[];for(let v in l)h.push(v);return h},changeActionsOfControl(l,h){let v=this._btnNameMapping(l);if(!v)throw new TypeError("No name passed");if(!h)throw new TypeError("No actions passed");if(!this.buttons[v])throw new TypeError("Button with this name not exists");this.buttons[v]._button.actions=h,this.changeControlOrder()},setButtonDisabled(l,h){let v=this._btnNameMapping(l);h?this.buttons[v].disable():this.buttons[v].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(l){let h=this._shapeMapping();return h[l]?h[l]:l}}),ul=Ws,cl=f(_i()),wi={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(l){l.forEach(h=>{if(Array.isArray(h)){this._assignEvents(h);return}h.off("drag",this._handleSnapping,this),h.on("drag",this._handleSnapping,this),h.off("dragend",this._cleanupSnapping,this),h.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(l){if(l){let h=l.target;h._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(h=>{h.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(l){var re,ge,Le;let h=l.target;if(h._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((re=l==null?void 0:l.originalEvent)==null?void 0:re.altKey)||((Le=(ge=this._map)==null?void 0:ge.pm)==null?void 0:Le.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let v=this._calcClosestLayer(h.getLatLng(),this._snapList);if(Object.keys(v).length===0)return!1;let w=v.layer instanceof L.Marker||v.layer instanceof L.CircleMarker||!this.options.snapSegment,C;w?C=v.latlng:C=this._checkPrioritiySnapping(v);let j=this.options.snapDistance,J={marker:h,shape:this._shape,snapLatLng:C,segment:v.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:v.layer,distance:v.distance};if(this._fireSnapDrag(J.marker,J),this._fireSnapDrag(this._layer,J),v.distance<j){h._orgLatLng=h.getLatLng(),h.setLatLng(C),h._snapped=!0,h._snapInfo=J;let Xe=()=>{this._snapLatLng=C,this._fireSnap(h,J),this._fireSnap(this._layer,J)},Ue=this._snapLatLng||{},vt=C||{};(Ue.lat!==vt.lat||Ue.lng!==vt.lng)&&Xe()}else this._snapLatLng&&(this._unsnap(J),h._snapped=!1,h._snapInfo=void 0,this._fireUnsnap(J.marker,J),this._fireUnsnap(this._layer,J));return!0},_createSnapList(){let l=[],h=[],v=this._map;v.off("layerremove",this._handleSnapLayerRemoval,this),v.on("layerremove",this._handleSnapLayerRemoval,this),v.eachLayer(w=>{if((w instanceof L.Polyline||w instanceof L.Marker||w instanceof L.CircleMarker||w instanceof L.ImageOverlay)&&w.options.snapIgnore!==!0){if(w.options.snapIgnore===void 0&&(!L.PM.optIn&&w.options.pmIgnore===!0||L.PM.optIn&&w.options.pmIgnore!==!1))return;(w instanceof L.Circle||w instanceof L.CircleMarker)&&w.pm&&w.pm._hiddenPolyCircle?l.push(w.pm._hiddenPolyCircle):w instanceof L.ImageOverlay&&(w=L.rectangle(w.getBounds())),l.push(w);let C=L.polyline([],{color:"red",pmIgnore:!0});C._pmTempLayer=!0,h.push(C),(w instanceof L.Circle||w instanceof L.CircleMarker)&&h.push(C)}}),l=l.filter(w=>this._layer!==w),l=l.filter(w=>w._latlng||w._latlngs&&ro(w._latlngs)),l=l.filter(w=>!w._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let w=L.polyline([],{color:"red",pmIgnore:!0});w._pmTempLayer=!0,h.push(w)}),this._snapList=l.concat(this._otherSnapLayers)):this._snapList=l,this.debugIndicatorLines=h},_handleSnapLayerRemoval({layer:l}){if(!l._leaflet_id)return;let h=this._snapList.findIndex(v=>v._leaflet_id===l._leaflet_id);h>-1&&this._snapList.splice(h,1)},_calcClosestLayer(l,h){return this._calcClosestLayers(l,h,1)[0]},_calcClosestLayers(l,h,v=1){let w=[],C={};h.forEach((J,re)=>{var Le;if(J._parentCopy&&J._parentCopy===this._layer||((Le=J.getLatLngs)==null?void 0:Le.call(J).flat(5).length)<2)return;let ge=this._calcLayerDistances(l,J);if(ge.distance=Math.floor(ge.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[re]){let Xe=L.polyline([],{color:"red",pmIgnore:!0});Xe._pmTempLayer=!0,this.debugIndicatorLines[re]=Xe}this.debugIndicatorLines[re].setLatLngs([l,ge.latlng])}v===1&&(C.distance===void 0||ge.distance-5<=C.distance)?(ge.distance+5<C.distance&&(w=[]),C=ge,C.layer=J,w.push(C)):v!==1&&(C={},C=ge,C.layer=J,w.push(C))}),v!==1&&(w=w.sort((J,re)=>J.distance-re.distance)),v===-1&&(v=w.length);let j=this._getClosestLayerByPriority(w,v);return L.Util.isArray(j)?j:[j]},_calcLayerDistances(l,h){let v=this._map,w=h instanceof L.Marker||h instanceof L.CircleMarker,C=h instanceof L.Polygon,j=l;if(w){let J=h.getLatLng();return{latlng:{...J},distance:this._getDistance(v,J,j)}}return this._calcLatLngDistances(j,h.getLatLngs(),v,C)},_calcLatLngDistances(l,h,v,w=!1){let C,j,J,re=ge=>{ge.forEach((Le,Xe)=>{if(Array.isArray(Le)){re(Le);return}if(this.options.snapSegment){let Ue=Le,vt;w?vt=Xe+1===ge.length?0:Xe+1:vt=Xe+1===ge.length?void 0:Xe+1;let Tt=ge[vt];if(Tt){let Xt=this._getDistanceToSegment(v,l,Ue,Tt);(j===void 0||Xt<j)&&(j=Xt,J=[Ue,Tt])}}else{let Ue=this._getDistance(v,l,Le);(j===void 0||Ue<j)&&(j=Ue,C=Le)}})};return re(h),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(v,l,J[0],J[1])},segment:J,distance:j}:{latlng:C,distance:j}},_getClosestLayerByPriority(l,h=1){l=l.sort((J,re)=>J._leaflet_id-re._leaflet_id);let v=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],w=this._map.pm.globalOptions.snappingOrder||[],C=0,j={};return w.concat(v).forEach(J=>{j[J]||(C+=1,j[J]=C)}),l.sort(Nl("instanceofShape",j)),h===1?l[0]||{}:l.slice(0,h)},_checkPrioritiySnapping(l){let h=this._map,v=l.segment[0],w=l.segment[1],C=l.latlng,j=C;if(this.options.snapVertex){let J=this._getDistance(h,v,C),re=this._getDistance(h,w,C),ge=J<re?v:w,Le=J<re?J:re;if(this.options.snapMiddle){let Ue=L.PM.Utils.calcMiddleLatLng(h,v,w),vt=this._getDistance(h,Ue,C);vt<J&&vt<re&&(ge=Ue,Le=vt)}let Xe=this.options.snapDistance;Le<Xe&&(j=ge)}return{...j}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(l,h,v,w){let C=l.getMaxZoom();C===1/0&&(C=l.getZoom());let j=l.project(h,C),J=l.project(v,C),re=l.project(w,C),ge=L.LineUtil.closestPointOnSegment(j,J,re);return l.unproject(ge,C)},_getDistanceToSegment(l,h,v,w){let C=l.latLngToContainerPoint(h),j=l.latLngToContainerPoint(v),J=l.latLngToContainerPoint(w);return L.LineUtil.pointToSegmentDistance(C,j,J)},_getDistance(l,h,v){return l.latLngToContainerPoint(h).distanceTo(l.latLngToContainerPoint(v))}},Es=wi,ba=L.Class.extend({includes:[Es,kl],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(l){L.Util.setOptions(this,l),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(l){let h=new L.Icon.Default;h.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=h,this._map=l,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(v=>{this[v]=new L.PM.Draw[v](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(l,h=!1){h?this.options.pathOptions=(0,cl.default)(this.options.pathOptions,l):this.options.pathOptions=l},getShapes(){return this.shapes},getShape(){return this._shape},enable(l,h){if(!l)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[l].enable(h)},disable(){this.shapes.forEach(l=>{this[l].disable()})},addControls(){this.shapes.forEach(l=>{this[l].addButton()})},getActiveShape(){let l;return this.shapes.forEach(h=>{this[h]._enabled&&(l=h)}),l},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let l=[];this._map.eachLayer(h=>{(h instanceof L.Polyline||h instanceof L.Marker||h instanceof L.Circle||h instanceof L.CircleMarker||h instanceof L.ImageOverlay)&&(h._pmTempLayer||l.push(h))}),this._enabled?l.forEach(h=>{L.PM.Utils.disablePopup(h)}):l.forEach(h=>{L.PM.Utils.enablePopup(h)})},createNewDrawInstance(l,h){let v=this._getShapeFromBtnName(h);if(this[l])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[v])throw new TypeError(`There is no class L.PM.Draw.${v}`);return this[l]=new L.PM.Draw[v](this._map),this[l].toolbarButtonName=l,this[l]._shape=l,this.shapes.push(l),this[h]&&this[l].setOptions(this[h].options),this[l].setOptions(this[l].options),this[l]},_getShapeFromBtnName(l){let h={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return h[l]?h[l]:this[l]?this[l]._shape:l},_finishLayer(l){l.pm&&(l.pm.setOptions(this.options),l.pm._shape=this._shape,l.pm._map=this._map),this._addDrawnLayerProp(l)},_addDrawnLayerProp(l){l._drawnByGeoman=!0},_setPane(l,h){h==="layerPane"?l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":h==="vertexPane"?l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":h==="markerPane"&&(l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),io=ba;io.Marker=io.extend({initialize(l){this._map=l,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(l){L.Util.setOptions(this,l),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(or("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(l=>{this.isRelevantMarker(l)&&l.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},isRelevantMarker(l){return l instanceof L.Marker&&l.pm&&!l._pmTempLayer&&!l.pm._initTextMarker},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this.options.snappable){let h=l;h.target=this._hintMarker,this._handleSnapping(h)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(l){if(!l.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._hintMarker.getLatLng(),v=new L.Marker(h,this.options.markerStyle);this._setPane(v,"markerPane"),this._finishLayer(v),v.pm||(v.options.draggable=!1),v.addTo(this._map.pm._getContainingLayer()),v.pm&&this.options.markerEditable?v.pm.enable():v.dragging&&v.dragging.disable(),this._fireCreate(v),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var l,h;(l=this.options.markerStyle)!=null&&l.icon&&((h=this._hintMarker)==null||h.setIcon(this.options.markerStyle.icon))}});var I=63710088e-1,_e={centimeters:I*100,centimetres:I*100,degrees:I/111325,feet:I*3.28084,inches:I*39.37,kilometers:I/1e3,kilometres:I/1e3,meters:I,metres:I,miles:I/1609.344,millimeters:I*1e3,millimetres:I*1e3,nauticalmiles:I/1852,radians:1,yards:I*1.0936};function Ke(l,h,v){v===void 0&&(v={});var w={type:"Feature"};return(v.id===0||v.id)&&(w.id=v.id),v.bbox&&(w.bbox=v.bbox),w.properties=h||{},w.geometry=l,w}function ft(l,h,v){if(v===void 0&&(v={}),!l)throw new Error("coordinates is required");if(!Array.isArray(l))throw new Error("coordinates must be an Array");if(l.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!vr(l[0])||!vr(l[1]))throw new Error("coordinates must contain numbers");var w={type:"Point",coordinates:l};return Ke(w,h,v)}function Lt(l,h,v){if(v===void 0&&(v={}),l.length<2)throw new Error("coordinates must be an array of two or more positions");var w={type:"LineString",coordinates:l};return Ke(w,h,v)}function $t(l,h){h===void 0&&(h={});var v={type:"FeatureCollection"};return h.id&&(v.id=h.id),h.bbox&&(v.bbox=h.bbox),v.features=l,v}function fn(l,h){h===void 0&&(h="kilometers");var v=_e[h];if(!v)throw new Error(h+" units is invalid");return l*v}function Dn(l,h){h===void 0&&(h="kilometers");var v=_e[h];if(!v)throw new Error(h+" units is invalid");return l/v}function zn(l){var h=l%(2*Math.PI);return h*180/Math.PI}function nr(l){var h=l%360;return h*Math.PI/180}function vr(l){return!isNaN(l)&&l!==null&&!Array.isArray(l)}function Ur(l){var h,v,w={type:"FeatureCollection",features:[]};if(l.type==="Feature"?v=l.geometry:v=l,v.type==="LineString")h=[v.coordinates];else if(v.type==="MultiLineString")h=v.coordinates;else if(v.type==="MultiPolygon")h=[].concat.apply([],v.coordinates);else if(v.type==="Polygon")h=v.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return h.forEach(function(C){h.forEach(function(j){for(var J=0;J<C.length-1;J++)for(var re=J;re<j.length-1;re++)if(!(C===j&&(Math.abs(J-re)===1||J===0&&re===C.length-2&&C[J][0]===C[C.length-1][0]&&C[J][1]===C[C.length-1][1]))){var ge=$i(C[J][0],C[J][1],C[J+1][0],C[J+1][1],j[re][0],j[re][1],j[re+1][0],j[re+1][1]);ge&&w.features.push(ft([ge[0],ge[1]]))}})}),w}function $i(l,h,v,w,C,j,J,re){var ge,Le,Xe,Ue,vt,Tt={x:null,y:null,onLine1:!1,onLine2:!1};return ge=(re-j)*(v-l)-(J-C)*(w-h),ge===0?Tt.x!==null&&Tt.y!==null?Tt:!1:(Le=h-j,Xe=l-C,Ue=(J-C)*Le-(re-j)*Xe,vt=(v-l)*Le-(w-h)*Xe,Le=Ue/ge,Xe=vt/ge,Tt.x=l+Le*(v-l),Tt.y=h+Le*(w-h),Le>=0&&Le<=1&&(Tt.onLine1=!0),Xe>=0&&Xe<=1&&(Tt.onLine2=!0),Tt.onLine1&&Tt.onLine2?[Tt.x,Tt.y]:!1)}io.Line=io.extend({initialize(l){this._map=l,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(l){L.Util.setOptions(this,l),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(or("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},_syncHintLine(){let l=this._layer.getLatLngs();if(l.length>0){let h=l[l.length-1];this._hintline.setLatLngs([h,this._hintMarker.getLatLng()])}},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this.options.snappable){let v=l;v.target=this._hintMarker,this._handleSnapping(v)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let h=this._layer._defaultShape().slice();h.push(this._hintMarker.getLatLng()),this._change(h)},hasSelfIntersection(){return Ur(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(l,h){let v=L.polyline(this._layer.getLatLngs());l&&(h||(h=this._hintMarker.getLatLng()),v.addLatLng(h));let w=Ur(v.toGeoJSON(15));this._doesSelfIntersect=w.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(w,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(l){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,l.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._hintMarker.getLatLng(),v=this._layer.getLatLngs(),w=v[v.length-1];if(h.equals(v[0])||v.length>0&&h.equals(w)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:h,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(h);let C=this._createMarker(h);this._setTooltipText(),this._setHintLineAfterNewVertex(h),this._fireVertexAdded(C,void 0,h,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(l)},_setHintLineAfterNewVertex(l){this._hintline.setLatLngs([l,l])},_removeLastVertex(){let l=this._markers;if(l.length<=1){this.disable();return}let h=this._layer.getLatLngs(),v=l[l.length-1],{indexPath:w}=L.PM.Utils.findDeepMarkerIndex(l,v);l.pop(),this._layerGroup.removeLayer(v);let C=l[l.length-1],j=h.indexOf(C.getLatLng());h=h.slice(0,j+1),this._layer.setLatLngs(h),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(v,w,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let l=this._layer.getLatLngs();if(l.length<=1)return;let h=L.polyline(l,this.options.pathOptions);this._setPane(h,"layerPane"),this._finishLayer(h),h.addTo(this._map.pm._getContainingLayer()),this._fireCreate(h),this.options.snappable&&this._cleanupSnapping();let v=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(v))},_createMarker(l){let h=new L.Marker(l,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._pmTempLayer=!0,this._layerGroup.addLayer(h),this._markers.push(h),h.on("click",this._finishShape,this),h},_setTooltipText(){let{length:l}=this._layer.getLatLngs().flat(),h="";l<=1?h=or("tooltips.continueLine"):h=or("tooltips.finishLine"),this._hintMarker.setTooltipContent(h)},_change(l){this._fireChange(l,"Draw")},setStyle(){var l,h;(l=this._layer)==null||l.setStyle(this.options.templineStyle),(h=this._hintline)==null||h.setStyle(this.options.hintlineStyle)}}),io.Polygon=io.Line.extend({initialize(l){this._map=l,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(l){L.PM.Draw.Line.prototype.enable.call(this,l),this._layer.pm._shape="Polygon"},_createMarker(l){let h=new L.Marker(l,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._pmTempLayer=!0,this._layerGroup.addLayer(h),this._markers.push(h),this._layer.getLatLngs().flat().length===1?(h.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(h)-1,this.options.snappable&&this._cleanupSnapping()):h.on("click",()=>1),h},_setTooltipText(){let{length:l}=this._layer.getLatLngs().flat(),h="";l<=2?h=or("tooltips.continueLine"):h=or("tooltips.finishPoly"),this._hintMarker.setTooltipContent(h)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let l=this._layer.getLatLngs();if(l.length<=2)return;let h=L.polygon(l,this.options.pathOptions);this._setPane(h,"layerPane"),this._finishLayer(h),h.addTo(this._map.pm._getContainingLayer()),this._fireCreate(h),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let v=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(v))}}),io.Rectangle=io.extend({initialize(l){this._map=l,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(l){if(L.Util.setOptions(this,l),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(or("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let h=0;h<2;h+=1){let v=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(v,"vertexPane"),v._pmTempLayer=!0,this._layerGroup.addLayer(v),this._styleMarkers.push(v)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},_placeStartingMarkers(l){this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(h),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(v=>{L.DomUtil.addClass(v._icon,"visible"),v.setLatLng(h)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(or("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let l=this._startMarker.getLatLng();l&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([l,l]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this.options.snappable){let v=l;v.target=this._hintMarker,this._handleSnapping(v)}let h=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(h,"Draw")},_syncRectangleSize(){let l=Dl(this._startMarker.getLatLng(),this._map),h=Dl(this._hintMarker.getLatLng(),this._map),v=L.PM.Utils._getRotatedRectangle(l,h,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(v),this.options.cursorMarker&&this._styleMarkers){let w=[];v.forEach(C=>{!C.equals(l,1e-8)&&!C.equals(h,1e-8)&&w.push(C)}),w.forEach((C,j)=>{try{this._styleMarkers[j].setLatLng(C)}catch{}})}},_findCorners(){let l=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(l[0],l[2],this.options.rectangleAngle||0,this._map)},_finishShape(l){this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._hintMarker.getLatLng(),v=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||v.equals(h))return;let w=L.rectangle([v,h],this.options.pathOptions);if(this.options.rectangleAngle){let j=L.PM.Utils._getRotatedRectangle(v,h,this.options.rectangleAngle||0,this._map);w.setLatLngs(j),w.pm&&w.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(w,"layerPane"),this._finishLayer(w),w.addTo(this._map.pm._getContainingLayer()),this._fireCreate(w);let C=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(C))},setStyle(){var l;(l=this._layer)==null||l.setStyle(this.options.pathOptions)}}),io.CircleMarker=io.extend({initialize(l){this._map=l,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(l){if(L.Util.setOptions(this,l),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let h={};L.extend(h,this.options.templineStyle),h.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),h),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(or("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(or("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(l=>{this.isRelevantMarker(l)&&l.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(l=>{this.isRelevantMarker(l)&&l.pm.disable()})},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},_placeCenterMarker(l){this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let h=this._hintMarker.getLatLng();this._centerMarker.setLatLng(h),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let l=this._centerMarker.getLatLng();l&&(this._layer.setLatLng(l),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(or("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let l=this._centerMarker.getLatLng(),h=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([l,h])},_syncCircleRadius(){let l=this._centerMarker.getLatLng(),h=this._hintMarker.getLatLng(),v=this._distanceCalculation(l,h);this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(v)},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let v=l;v.target=this._hintMarker,this._handleSnapping(v)}this._handleHintMarkerSnapping();let h=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(h,"Draw")},isRelevantMarker(l){return l instanceof L.CircleMarker&&!(l instanceof L.Circle)&&l.pm&&!l._pmTempLayer},_createMarker(l){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!l.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._hintMarker.getLatLng(),v=new this._BaseCircleClass(h,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(v,"layerPane"),this._finishLayer(v),v.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(v),this._fireCreate(v),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(l){l.pm&&this.options.markerEditable&&l.pm.enable()},_finishShape(l){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._centerMarker.getLatLng(),v=this._defaultRadius;if(this.options[this._editableOption]){let J=this._hintMarker.getLatLng();v=this._distanceCalculation(h,J),this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?v=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]&&(v=this.options[this._maxRadiusOption])}let w={...this.options.pathOptions,radius:v},C=new this._BaseCircleClass(h,w);this._setPane(C,"layerPane"),this._finishLayer(C),C.addTo(this._map.pm._getContainingLayer()),C.pm&&C.pm._updateHiddenPolyCircle(),this._fireCreate(C);let j=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(j))},_getNewDestinationOfHintMarker(){let l=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return l;let h=this._centerMarker.getLatLng(),v=this._distanceCalculation(h,l);this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?l=Tl(this._map,h,l,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]&&(l=Tl(this._map,h,l,this._getMaxDistanceInMeter()))}return l},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let l=this._centerMarker.getLatLng(),h=this._hintMarker.getLatLng(),v=this._distanceCalculation(l,h);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var h,v;let l={};L.extend(l,this.options.templineStyle),this.options[this._editableOption]&&(l.radius=0),(h=this._layer)==null||h.setStyle(l),(v=this._hintline)==null||v.setStyle(this.options.hintlineStyle)},_distanceCalculation(l,h){return this._map.project(l).distanceTo(this._map.project(h))}}),io.Circle=io.CircleMarker.extend({initialize(l){this._map=l,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(l,h){return this._map.distance(l,h)}});function di(l){if(!l)throw new Error("coord is required");if(!Array.isArray(l)){if(l.type==="Feature"&&l.geometry!==null&&l.geometry.type==="Point")return l.geometry.coordinates;if(l.type==="Point")return l.coordinates}if(Array.isArray(l)&&l.length>=2&&!Array.isArray(l[0])&&!Array.isArray(l[1]))return l;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function xi(l){if(Array.isArray(l))return l;if(l.type==="Feature"){if(l.geometry!==null)return l.geometry.coordinates}else if(l.coordinates)return l.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function oo(l){return l.type==="Feature"?l.geometry:l}function ho(l,h){return l.type==="FeatureCollection"?"FeatureCollection":l.type==="GeometryCollection"?"GeometryCollection":l.type==="Feature"&&l.geometry!==null?l.geometry.type:l.type}function Ps(l,h,v){if(l!==null)for(var w,C,j,J,re,ge,Le,Xe=0,Ue=0,vt,Tt=l.type,Xt=Tt==="FeatureCollection",yn=Tt==="Feature",wn=Xt?l.features.length:1,ur=0;ur<wn;ur++){Le=Xt?l.features[ur].geometry:yn?l.geometry:l,vt=Le?Le.type==="GeometryCollection":!1,re=vt?Le.geometries.length:1;for(var Je=0;Je<re;Je++){var nt=0,ht=0;if(J=vt?Le.geometries[Je]:Le,J!==null){ge=J.coordinates;var Bt=J.type;switch(Xe=0,Bt){case null:break;case"Point":if(h(ge,Ue,ur,nt,ht)===!1)return!1;Ue++,nt++;break;case"LineString":case"MultiPoint":for(w=0;w<ge.length;w++){if(h(ge[w],Ue,ur,nt,ht)===!1)return!1;Ue++,Bt==="MultiPoint"&&nt++}Bt==="LineString"&&nt++;break;case"Polygon":case"MultiLineString":for(w=0;w<ge.length;w++){for(C=0;C<ge[w].length-Xe;C++){if(h(ge[w][C],Ue,ur,nt,ht)===!1)return!1;Ue++}Bt==="MultiLineString"&&nt++,Bt==="Polygon"&&ht++}Bt==="Polygon"&&nt++;break;case"MultiPolygon":for(w=0;w<ge.length;w++){for(ht=0,C=0;C<ge[w].length;C++){for(j=0;j<ge[w][C].length-Xe;j++){if(h(ge[w][C][j],Ue,ur,nt,ht)===!1)return!1;Ue++}ht++}nt++}break;case"GeometryCollection":for(w=0;w<J.geometries.length;w++)if(Ps(J.geometries[w],h)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Vr(l,h){if(l.type==="Feature")h(l,0);else if(l.type==="FeatureCollection")for(var v=0;v<l.features.length&&h(l.features[v],v)!==!1;v++);}function zo(l,h,v){var w=v;return Vr(l,function(C,j){j===0&&v===void 0?w=C:w=h(w,C,j)}),w}function fl(l,h){var v,w,C,j,J,re,ge,Le,Xe,Ue,vt=0,Tt=l.type==="FeatureCollection",Xt=l.type==="Feature",yn=Tt?l.features.length:1;for(v=0;v<yn;v++){for(re=Tt?l.features[v].geometry:Xt?l.geometry:l,Le=Tt?l.features[v].properties:Xt?l.properties:{},Xe=Tt?l.features[v].bbox:Xt?l.bbox:void 0,Ue=Tt?l.features[v].id:Xt?l.id:void 0,ge=re?re.type==="GeometryCollection":!1,J=ge?re.geometries.length:1,C=0;C<J;C++){if(j=ge?re.geometries[C]:re,j===null){if(h(null,vt,Le,Xe,Ue)===!1)return!1;continue}switch(j.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(h(j,vt,Le,Xe,Ue)===!1)return!1;break}case"GeometryCollection":{for(w=0;w<j.geometries.length;w++)if(h(j.geometries[w],vt,Le,Xe,Ue)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}vt++}}function es(l,h){fl(l,function(v,w,C,j,J){var re=v===null?null:v.type;switch(re){case null:case"Point":case"LineString":case"Polygon":return h(Ke(v,C,{bbox:j,id:J}),w,0)===!1?!1:void 0}var ge;switch(re){case"MultiPoint":ge="Point";break;case"MultiLineString":ge="LineString";break;case"MultiPolygon":ge="Polygon";break}for(var Le=0;Le<v.coordinates.length;Le++){var Xe=v.coordinates[Le],Ue={type:ge,coordinates:Xe};if(h(Ke(Ue,C),w,Le)===!1)return!1}})}function Ql(l){if(!l)throw new Error("geojson is required");var h=[];return es(l,function(v){na(v,h)}),$t(h)}function na(l,h){var v=[],w=l.geometry;if(w!==null){switch(w.type){case"Polygon":v=xi(w);break;case"LineString":v=[xi(w)]}v.forEach(function(C){var j=wu(C,l.properties);j.forEach(function(J){J.id=h.length,h.push(J)})})}}function wu(l,h){var v=[];return l.reduce(function(w,C){var j=Lt([w,C],h);return j.bbox=Va(w,C),v.push(j),C}),v}function Va(l,h){var v=l[0],w=l[1],C=h[0],j=h[1],J=v<C?v:C,re=w<j?w:j,ge=v>C?v:C,Le=w>j?w:j;return[J,re,ge,Le]}var Ga=Ql,po=f(Sr(),1);function ra(l,h){var v={},w=[];if(l.type==="LineString"&&(l=Ke(l)),h.type==="LineString"&&(h=Ke(h)),l.type==="Feature"&&h.type==="Feature"&&l.geometry!==null&&h.geometry!==null&&l.geometry.type==="LineString"&&h.geometry.type==="LineString"&&l.geometry.coordinates.length===2&&h.geometry.coordinates.length===2){var C=Ms(l,h);return C&&w.push(C),$t(w)}var j=(0,po.default)();return j.load(Ga(h)),Vr(Ga(l),function(J){Vr(j.search(J),function(re){var ge=Ms(J,re);if(ge){var Le=xi(ge).join(",");v[Le]||(v[Le]=!0,w.push(ge))}})}),$t(w)}function Ms(l,h){var v=xi(l),w=xi(h);if(v.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(w.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var C=v[0][0],j=v[0][1],J=v[1][0],re=v[1][1],ge=w[0][0],Le=w[0][1],Xe=w[1][0],Ue=w[1][1],vt=(Ue-Le)*(J-C)-(Xe-ge)*(re-j),Tt=(Xe-ge)*(j-Le)-(Ue-Le)*(C-ge),Xt=(J-C)*(j-Le)-(re-j)*(C-ge);if(vt===0)return null;var yn=Tt/vt,wn=Xt/vt;if(yn>=0&&yn<=1&&wn>=0&&wn<=1){var ur=C+yn*(J-C),Je=j+yn*(re-j);return ft([ur,Je])}return null}var hs=ra,hl=f(Sr(),1);function $o(l,h,v){v===void 0&&(v={});var w=di(l),C=di(h),j=nr(C[1]-w[1]),J=nr(C[0]-w[0]),re=nr(w[1]),ge=nr(C[1]),Le=Math.pow(Math.sin(j/2),2)+Math.pow(Math.sin(J/2),2)*Math.cos(re)*Math.cos(ge);return fn(2*Math.atan2(Math.sqrt(Le),Math.sqrt(1-Le)),v.units)}var ts=$o;function ns(l){var h=l[0],v=l[1],w=l[2],C=l[3],j=ts(l.slice(0,2),[w,v]),J=ts(l.slice(0,2),[h,C]);if(j>=J){var re=(v+C)/2;return[h,re-(w-h)/2,w,re+(w-h)/2]}else{var ge=(h+w)/2;return[ge-(C-v)/2,v,ge+(C-v)/2,C]}}var Xu=ns;function So(l){var h=[1/0,1/0,-1/0,-1/0];return Ps(l,function(v){h[0]>v[0]&&(h[0]=v[0]),h[1]>v[1]&&(h[1]=v[1]),h[2]<v[0]&&(h[2]=v[0]),h[3]<v[1]&&(h[3]=v[1])}),h}So.default=So;var wa=So;function Uo(l,h){h===void 0&&(h={});var v=h.precision,w=h.coordinates,C=h.mutate;if(v=v==null||isNaN(v)?6:v,w=w==null||isNaN(w)?3:w,!l)throw new Error("<geojson> is required");if(typeof v!="number")throw new Error("<precision> must be a number");if(typeof w!="number")throw new Error("<coordinates> must be a number");(C===!1||C===void 0)&&(l=JSON.parse(JSON.stringify(l)));var j=Math.pow(10,v);return Ps(l,function(J){Vo(J,j,w)}),l}function Vo(l,h,v){l.length>v&&l.splice(v,l.length);for(var w=0;w<l.length;w++)l[w]=Math.round(l[w]*h)/h;return l}var xa=Uo;function La(l,h,v){if(v===void 0&&(v={}),v.final===!0)return Go(l,h);var w=di(l),C=di(h),j=nr(w[0]),J=nr(C[0]),re=nr(w[1]),ge=nr(C[1]),Le=Math.sin(J-j)*Math.cos(ge),Xe=Math.cos(re)*Math.sin(ge)-Math.sin(re)*Math.cos(ge)*Math.cos(J-j);return zn(Math.atan2(Le,Xe))}function Go(l,h){var v=La(h,l);return v=(v+180)%360,v}function Ao(l,h,v,w){w===void 0&&(w={});var C=di(l),j=nr(C[0]),J=nr(C[1]),re=nr(v),ge=Dn(h,w.units),Le=Math.asin(Math.sin(J)*Math.cos(ge)+Math.cos(J)*Math.sin(ge)*Math.cos(re)),Xe=j+Math.atan2(Math.sin(re)*Math.sin(ge)*Math.cos(J),Math.cos(ge)-Math.sin(J)*Math.sin(Le)),Ue=zn(Xe),vt=zn(Le);return ft([Ue,vt],w.properties)}function ia(l,h,v){v===void 0&&(v={});var w=ft([1/0,1/0],{dist:1/0}),C=0;return es(l,function(j){for(var J=xi(j),re=0;re<J.length-1;re++){var ge=ft(J[re]);ge.properties.dist=ts(h,ge,v);var Le=ft(J[re+1]);Le.properties.dist=ts(h,Le,v);var Xe=ts(ge,Le,v),Ue=Math.max(ge.properties.dist,Le.properties.dist),vt=La(ge,Le),Tt=Ao(h,Ue,vt+90,v),Xt=Ao(h,Ue,vt-90,v),yn=hs(Lt([Tt.geometry.coordinates,Xt.geometry.coordinates]),Lt([ge.geometry.coordinates,Le.geometry.coordinates])),wn=null;yn.features.length>0&&(wn=yn.features[0],wn.properties.dist=ts(h,wn,v),wn.properties.location=C+ts(ge,wn,v)),ge.properties.dist<w.properties.dist&&(w=ge,w.properties.index=re,w.properties.location=C),Le.properties.dist<w.properties.dist&&(w=Le,w.properties.index=re+1,w.properties.location=C+Xe),wn&&wn.properties.dist<w.properties.dist&&(w=wn,w.properties.index=re),C+=Xe}}),w}var As=ia;function Ho(l,h){if(!l)throw new Error("line is required");if(!h)throw new Error("splitter is required");var v=ho(l),w=ho(h);if(v!=="LineString")throw new Error("line must be LineString");if(w==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(w==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var C=xa(h,{precision:7});switch(w){case"Point":return Zt(l,C);case"MultiPoint":return _t(l,C);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return _t(l,hs(l,C))}}function _t(l,h){var v=[],w=(0,hl.default)();return es(h,function(C){if(v.forEach(function(re,ge){re.id=ge}),!v.length)v=Zt(l,C).features,v.forEach(function(re){re.bbox||(re.bbox=Xu(wa(re)))}),w.load($t(v));else{var j=w.search(C);if(j.features.length){var J=kt(C,j);v=v.filter(function(re){return re.id!==J.id}),w.remove(J),Vr(Zt(J,C),function(re){v.push(re),w.insert(re)})}}}),$t(v)}function Zt(l,h){var v=[],w=xi(l)[0],C=xi(l)[l.geometry.coordinates.length-1];if(An(w,di(h))||An(C,di(h)))return $t([l]);var j=(0,hl.default)(),J=Ga(l);j.load(J);var re=j.search(h);if(!re.features.length)return $t([l]);var ge=kt(h,re),Le=[w],Xe=zo(J,function(Ue,vt,Tt){var Xt=xi(vt)[1],yn=di(h);return Tt===ge.id?(Ue.push(yn),v.push(Lt(Ue)),An(yn,Xt)?[yn]:[yn,Xt]):(Ue.push(Xt),Ue)},Le);return Xe.length>1&&v.push(Lt(Xe)),$t(v)}function kt(l,h){if(!h.features.length)throw new Error("lines must contain features");if(h.features.length===1)return h.features[0];var v,w=1/0;return Vr(h,function(C){var j=As(C,l),J=j.properties.dist;J<w&&(v=C,w=J)}),v}function An(l,h){return l[0]===h[0]&&l[1]===h[1]}var Kn=Ho;function wr(l,h,v){if(v===void 0&&(v={}),!l)throw new Error("point is required");if(!h)throw new Error("polygon is required");var w=di(l),C=oo(h),j=C.type,J=h.bbox,re=C.coordinates;if(J&&Li(w,J)===!1)return!1;j==="Polygon"&&(re=[re]);for(var ge=!1,Le=0;Le<re.length&&!ge;Le++)if(Vi(w,re[Le][0],v.ignoreBoundary)){for(var Xe=!1,Ue=1;Ue<re[Le].length&&!Xe;)Vi(w,re[Le][Ue],!v.ignoreBoundary)&&(Xe=!0),Ue++;Xe||(ge=!0)}return ge}function Vi(l,h,v){var w=!1;h[0][0]===h[h.length-1][0]&&h[0][1]===h[h.length-1][1]&&(h=h.slice(0,h.length-1));for(var C=0,j=h.length-1;C<h.length;j=C++){var J=h[C][0],re=h[C][1],ge=h[j][0],Le=h[j][1],Xe=l[1]*(J-ge)+re*(ge-l[0])+Le*(l[0]-J)===0&&(J-l[0])*(ge-l[0])<=0&&(re-l[1])*(Le-l[1])<=0;if(Xe)return!v;var Ue=re>l[1]!=Le>l[1]&&l[0]<(ge-J)*(l[1]-re)/(Le-re)+J;Ue&&(w=!w)}return w}function Li(l,h){return h[0]<=l[0]&&h[1]<=l[1]&&h[2]>=l[0]&&h[3]>=l[1]}function Ol(l,h,v){v===void 0&&(v={});for(var w=di(l),C=xi(h),j=0;j<C.length-1;j++){var J=!1;if(v.ignoreEndVertices&&(j===0&&(J="start"),j===C.length-2&&(J="end"),j===0&&j+1===C.length-1&&(J="both")),rs(C[j],C[j+1],w,J,typeof v.epsilon>"u"?null:v.epsilon))return!0}return!1}function rs(l,h,v,w,C){var j=v[0],J=v[1],re=l[0],ge=l[1],Le=h[0],Xe=h[1],Ue=v[0]-re,vt=v[1]-ge,Tt=Le-re,Xt=Xe-ge,yn=Ue*Xt-vt*Tt;if(C!==null){if(Math.abs(yn)>C)return!1}else if(yn!==0)return!1;if(w){if(w==="start")return Math.abs(Tt)>=Math.abs(Xt)?Tt>0?re<j&&j<=Le:Le<=j&&j<re:Xt>0?ge<J&&J<=Xe:Xe<=J&&J<ge;if(w==="end")return Math.abs(Tt)>=Math.abs(Xt)?Tt>0?re<=j&&j<Le:Le<j&&j<=re:Xt>0?ge<=J&&J<Xe:Xe<J&&J<=ge;if(w==="both")return Math.abs(Tt)>=Math.abs(Xt)?Tt>0?re<j&&j<Le:Le<j&&j<re:Xt>0?ge<J&&J<Xe:Xe<J&&J<ge}else return Math.abs(Tt)>=Math.abs(Xt)?Tt>0?re<=j&&j<=Le:Le<=j&&j<=re:Xt>0?ge<=J&&J<=Xe:Xe<=J&&J<=ge;return!1}var Gi=Ol;function oa(l,h){var v=oo(l),w=oo(h),C=v.type,j=w.type,J=v.coordinates,re=w.coordinates;switch(C){case"Point":switch(j){case"Point":return Ai(J,re);default:throw new Error("feature2 "+j+" geometry not supported")}case"MultiPoint":switch(j){case"Point":return Sa(v,w);case"MultiPoint":return sa(v,w);default:throw new Error("feature2 "+j+" geometry not supported")}case"LineString":switch(j){case"Point":return Gi(w,v,{ignoreEndVertices:!0});case"LineString":return Qr(v,w);case"MultiPoint":return aa(v,w);default:throw new Error("feature2 "+j+" geometry not supported")}case"Polygon":switch(j){case"Point":return wr(w,v,{ignoreBoundary:!0});case"LineString":return Zs(v,w);case"Polygon":return ko(v,w);case"MultiPoint":return la(v,w);default:throw new Error("feature2 "+j+" geometry not supported")}default:throw new Error("feature1 "+C+" geometry not supported")}}function Sa(l,h){var v,w=!1;for(v=0;v<l.coordinates.length;v++)if(Ai(l.coordinates[v],h.coordinates)){w=!0;break}return w}function sa(l,h){for(var v=0,w=h.coordinates;v<w.length;v++){for(var C=w[v],j=!1,J=0,re=l.coordinates;J<re.length;J++){var ge=re[J];if(Ai(C,ge)){j=!0;break}}if(!j)return!1}return!0}function aa(l,h){for(var v=!1,w=0,C=h.coordinates;w<C.length;w++){var j=C[w];if(Gi(j,l,{ignoreEndVertices:!0})&&(v=!0),!Gi(j,l))return!1}return!!v}function la(l,h){for(var v=0,w=h.coordinates;v<w.length;v++){var C=w[v];if(!wr(C,l,{ignoreBoundary:!0}))return!1}return!0}function Qr(l,h){for(var v=!1,w=0,C=h.coordinates;w<C.length;w++){var j=C[w];if(Gi({type:"Point",coordinates:j},l,{ignoreEndVertices:!0})&&(v=!0),!Gi({type:"Point",coordinates:j},l,{ignoreEndVertices:!1}))return!1}return v}function Zs(l,h){var v=!1,w=0,C=wa(l),j=wa(h);if(!Si(C,j))return!1;for(w;w<h.coordinates.length-1;w++){var J=so(h.coordinates[w],h.coordinates[w+1]);if(wr({type:"Point",coordinates:J},l,{ignoreBoundary:!0})){v=!0;break}}return v}function ko(l,h){if(l.type==="Feature"&&l.geometry===null||h.type==="Feature"&&h.geometry===null)return!1;var v=wa(l),w=wa(h);if(!Si(v,w))return!1;for(var C=oo(h).coordinates,j=0,J=C;j<J.length;j++)for(var re=J[j],ge=0,Le=re;ge<Le.length;ge++){var Xe=Le[ge];if(!wr(Xe,l))return!1}return!0}function Si(l,h){return!(l[0]>h[0]||l[2]<h[2]||l[1]>h[1]||l[3]<h[3])}function Ai(l,h){return l[0]===h[0]&&l[1]===h[1]}function so(l,h){return[(l[0]+h[0])/2,(l[1]+h[1])/2]}var Bi=f(ci()),ks=l=>()=>l,ds=l=>{let h=l?(v,w)=>w.minus(v).abs().isLessThanOrEqualTo(l):ks(!1);return(v,w)=>h(v,w)?0:v.comparedTo(w)};function Rs(l){let h=l?(v,w,C,j,J)=>v.exponentiatedBy(2).isLessThanOrEqualTo(j.minus(w).exponentiatedBy(2).plus(J.minus(C).exponentiatedBy(2)).times(l)):ks(!1);return(v,w,C)=>{let j=v.x,J=v.y,re=C.x,ge=C.y,Le=J.minus(ge).times(w.x.minus(re)).minus(j.minus(re).times(w.y.minus(ge)));return h(Le,j,J,re,ge)?0:Le.comparedTo(0)}}var xu=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,ua=Math.ceil,go=Math.floor,Oi="[BigNumber Error] ",qo=Oi+"Number primitive has more than 15 significant digits: ",ps=1e14,pr=14,Ca=9007199254740991,Ea=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Ks=1e7,is=1e9;function bc(l){var h,v,w,C=Je.prototype={constructor:Je,toString:null,valueOf:null},j=new Je(1),J=20,re=4,ge=-7,Le=21,Xe=-1e7,Ue=1e7,vt=!1,Tt=1,Xt=0,yn={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},wn="0123456789abcdefghijklmnopqrstuvwxyz",ur=!0;function Je(ve,Pe){var Be,Oe,Fe,je,ut,ct,gt,St,Ct=this;if(!(Ct instanceof Je))return new Je(ve,Pe);if(Pe==null){if(ve&&ve._isBigNumber===!0){Ct.s=ve.s,!ve.c||ve.e>Ue?Ct.c=Ct.e=null:ve.e<Xe?Ct.c=[Ct.e=0]:(Ct.e=ve.e,Ct.c=ve.c.slice());return}if((ct=typeof ve=="number")&&ve*0==0){if(Ct.s=1/ve<0?(ve=-ve,-1):1,ve===~~ve){for(je=0,ut=ve;ut>=10;ut/=10,je++);je>Ue?Ct.c=Ct.e=null:(Ct.e=je,Ct.c=[ve]);return}St=String(ve)}else{if(!xu.test(St=String(ve)))return w(Ct,St,ct);Ct.s=St.charCodeAt(0)==45?(St=St.slice(1),-1):1}(je=St.indexOf("."))>-1&&(St=St.replace(".","")),(ut=St.search(/e/i))>0?(je<0&&(je=ut),je+=+St.slice(ut+1),St=St.substring(0,ut)):je<0&&(je=St.length)}else{if(a(Pe,2,wn.length,"Base"),Pe==10&&ur)return Ct=new Je(ve),wt(Ct,J+Ct.e+1,re);if(St=String(ve),ct=typeof ve=="number"){if(ve*0!=0)return w(Ct,St,ct,Pe);if(Ct.s=1/ve<0?(St=St.slice(1),-1):1,Je.DEBUG&&St.replace(/^0\.0*|\./,"").length>15)throw Error(qo+ve)}else Ct.s=St.charCodeAt(0)===45?(St=St.slice(1),-1):1;for(Be=wn.slice(0,Pe),je=ut=0,gt=St.length;ut<gt;ut++)if(Be.indexOf(Oe=St.charAt(ut))<0){if(Oe=="."){if(ut>je){je=gt;continue}}else if(!Fe&&(St==St.toUpperCase()&&(St=St.toLowerCase())||St==St.toLowerCase()&&(St=St.toUpperCase()))){Fe=!0,ut=-1,je=0;continue}return w(Ct,String(ve),ct,Pe)}ct=!1,St=v(St,Pe,10,Ct.s),(je=St.indexOf("."))>-1?St=St.replace(".",""):je=St.length}for(ut=0;St.charCodeAt(ut)===48;ut++);for(gt=St.length;St.charCodeAt(--gt)===48;);if(St=St.slice(ut,++gt)){if(gt-=ut,ct&&Je.DEBUG&&gt>15&&(ve>Ca||ve!==go(ve)))throw Error(qo+Ct.s*ve);if((je=je-ut-1)>Ue)Ct.c=Ct.e=null;else if(je<Xe)Ct.c=[Ct.e=0];else{if(Ct.e=je,Ct.c=[],ut=(je+1)%pr,je<0&&(ut+=pr),ut<gt){for(ut&&Ct.c.push(+St.slice(0,ut)),gt-=pr;ut<gt;)Ct.c.push(+St.slice(ut,ut+=pr));ut=pr-(St=St.slice(ut)).length}else ut-=gt;for(;ut--;St+="0");Ct.c.push(+St)}}else Ct.c=[Ct.e=0]}Je.clone=bc,Je.ROUND_UP=0,Je.ROUND_DOWN=1,Je.ROUND_CEIL=2,Je.ROUND_FLOOR=3,Je.ROUND_HALF_UP=4,Je.ROUND_HALF_DOWN=5,Je.ROUND_HALF_EVEN=6,Je.ROUND_HALF_CEIL=7,Je.ROUND_HALF_FLOOR=8,Je.EUCLID=9,Je.config=Je.set=function(ve){var Pe,Be;if(ve!=null)if(typeof ve=="object"){if(ve.hasOwnProperty(Pe="DECIMAL_PLACES")&&(Be=ve[Pe],a(Be,0,is,Pe),J=Be),ve.hasOwnProperty(Pe="ROUNDING_MODE")&&(Be=ve[Pe],a(Be,0,8,Pe),re=Be),ve.hasOwnProperty(Pe="EXPONENTIAL_AT")&&(Be=ve[Pe],Be&&Be.pop?(a(Be[0],-1e9,0,Pe),a(Be[1],0,is,Pe),ge=Be[0],Le=Be[1]):(a(Be,-1e9,is,Pe),ge=-(Le=Be<0?-Be:Be))),ve.hasOwnProperty(Pe="RANGE"))if(Be=ve[Pe],Be&&Be.pop)a(Be[0],-1e9,-1,Pe),a(Be[1],1,is,Pe),Xe=Be[0],Ue=Be[1];else if(a(Be,-1e9,is,Pe),Be)Xe=-(Ue=Be<0?-Be:Be);else throw Error(Oi+Pe+" cannot be zero: "+Be);if(ve.hasOwnProperty(Pe="CRYPTO"))if(Be=ve[Pe],Be===!!Be)if(Be)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))vt=Be;else throw vt=!Be,Error(Oi+"crypto unavailable");else vt=Be;else throw Error(Oi+Pe+" not true or false: "+Be);if(ve.hasOwnProperty(Pe="MODULO_MODE")&&(Be=ve[Pe],a(Be,0,9,Pe),Tt=Be),ve.hasOwnProperty(Pe="POW_PRECISION")&&(Be=ve[Pe],a(Be,0,is,Pe),Xt=Be),ve.hasOwnProperty(Pe="FORMAT"))if(Be=ve[Pe],typeof Be=="object")yn=Be;else throw Error(Oi+Pe+" not an object: "+Be);if(ve.hasOwnProperty(Pe="ALPHABET"))if(Be=ve[Pe],typeof Be=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(Be))ur=Be.slice(0,10)=="0123456789",wn=Be;else throw Error(Oi+Pe+" invalid: "+Be)}else throw Error(Oi+"Object expected: "+ve);return{DECIMAL_PLACES:J,ROUNDING_MODE:re,EXPONENTIAL_AT:[ge,Le],RANGE:[Xe,Ue],CRYPTO:vt,MODULO_MODE:Tt,POW_PRECISION:Xt,FORMAT:yn,ALPHABET:wn}},Je.isBigNumber=function(ve){if(!ve||ve._isBigNumber!==!0)return!1;if(!Je.DEBUG)return!0;var Pe,Be,Oe=ve.c,Fe=ve.e,je=ve.s;e:if({}.toString.call(Oe)=="[object Array]"){if((je===1||je===-1)&&Fe>=-1e9&&Fe<=is&&Fe===go(Fe)){if(Oe[0]===0){if(Fe===0&&Oe.length===1)return!0;break e}if(Pe=(Fe+1)%pr,Pe<1&&(Pe+=pr),String(Oe[0]).length==Pe){for(Pe=0;Pe<Oe.length;Pe++)if(Be=Oe[Pe],Be<0||Be>=ps||Be!==go(Be))break e;if(Be!==0)return!0}}}else if(Oe===null&&Fe===null&&(je===null||je===1||je===-1))return!0;throw Error(Oi+"Invalid BigNumber: "+ve)},Je.maximum=Je.max=function(){return ht(arguments,-1)},Je.minimum=Je.min=function(){return ht(arguments,1)},Je.random=function(){var ve=9007199254740992,Pe=Math.random()*ve&2097151?function(){return go(Math.random()*ve)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(Be){var Oe,Fe,je,ut,ct,gt=0,St=[],Ct=new Je(j);if(Be==null?Be=J:a(Be,0,is),ut=ua(Be/pr),vt)if(crypto.getRandomValues){for(Oe=crypto.getRandomValues(new Uint32Array(ut*=2));gt<ut;)ct=Oe[gt]*131072+(Oe[gt+1]>>>11),ct>=9e15?(Fe=crypto.getRandomValues(new Uint32Array(2)),Oe[gt]=Fe[0],Oe[gt+1]=Fe[1]):(St.push(ct%1e14),gt+=2);gt=ut/2}else if(crypto.randomBytes){for(Oe=crypto.randomBytes(ut*=7);gt<ut;)ct=(Oe[gt]&31)*281474976710656+Oe[gt+1]*1099511627776+Oe[gt+2]*4294967296+Oe[gt+3]*16777216+(Oe[gt+4]<<16)+(Oe[gt+5]<<8)+Oe[gt+6],ct>=9e15?crypto.randomBytes(7).copy(Oe,gt):(St.push(ct%1e14),gt+=7);gt=ut/7}else throw vt=!1,Error(Oi+"crypto unavailable");if(!vt)for(;gt<ut;)ct=Pe(),ct<9e15&&(St[gt++]=ct%1e14);for(ut=St[--gt],Be%=pr,ut&&Be&&(ct=Ea[pr-Be],St[gt]=go(ut/ct)*ct);St[gt]===0;St.pop(),gt--);if(gt<0)St=[je=0];else{for(je=-1;St[0]===0;St.splice(0,1),je-=pr);for(gt=1,ct=St[0];ct>=10;ct/=10,gt++);gt<pr&&(je-=pr-gt)}return Ct.e=je,Ct.c=St,Ct}}(),Je.sum=function(){for(var ve=1,Pe=arguments,Be=new Je(Pe[0]);ve<Pe.length;)Be=Be.plus(Pe[ve++]);return Be},v=function(){var ve="0123456789";function Pe(Be,Oe,Fe,je){for(var ut,ct=[0],gt,St=0,Ct=Be.length;St<Ct;){for(gt=ct.length;gt--;ct[gt]*=Oe);for(ct[0]+=je.indexOf(Be.charAt(St++)),ut=0;ut<ct.length;ut++)ct[ut]>Fe-1&&(ct[ut+1]==null&&(ct[ut+1]=0),ct[ut+1]+=ct[ut]/Fe|0,ct[ut]%=Fe)}return ct.reverse()}return function(Be,Oe,Fe,je,ut){var ct,gt,St,Ct,sn,$n,Hn,er,vi=Be.indexOf("."),ki=J,ei=re;for(vi>=0&&(Ct=Xt,Xt=0,Be=Be.replace(".",""),er=new Je(Oe),$n=er.pow(Be.length-vi),Xt=Ct,er.c=Pe(U(No($n.c),$n.e,"0"),10,Fe,ve),er.e=er.c.length),Hn=Pe(Be,Oe,Fe,ut?(ct=wn,ve):(ct=ve,wn)),St=Ct=Hn.length;Hn[--Ct]==0;Hn.pop());if(!Hn[0])return ct.charAt(0);if(vi<0?--St:($n.c=Hn,$n.e=St,$n.s=je,$n=h($n,er,ki,ei,Fe),Hn=$n.c,sn=$n.r,St=$n.e),gt=St+ki+1,vi=Hn[gt],Ct=Fe/2,sn=sn||gt<0||Hn[gt+1]!=null,sn=ei<4?(vi!=null||sn)&&(ei==0||ei==($n.s<0?3:2)):vi>Ct||vi==Ct&&(ei==4||sn||ei==6&&Hn[gt-1]&1||ei==($n.s<0?8:7)),gt<1||!Hn[0])Be=sn?U(ct.charAt(1),-ki,ct.charAt(0)):ct.charAt(0);else{if(Hn.length=gt,sn)for(--Fe;++Hn[--gt]>Fe;)Hn[gt]=0,gt||(++St,Hn=[1].concat(Hn));for(Ct=Hn.length;!Hn[--Ct];);for(vi=0,Be="";vi<=Ct;Be+=ct.charAt(Hn[vi++]));Be=U(Be,St,ct.charAt(0))}return Be}}(),h=function(){function ve(Oe,Fe,je){var ut,ct,gt,St,Ct=0,sn=Oe.length,$n=Fe%Ks,Hn=Fe/Ks|0;for(Oe=Oe.slice();sn--;)gt=Oe[sn]%Ks,St=Oe[sn]/Ks|0,ut=Hn*gt+St*$n,ct=$n*gt+ut%Ks*Ks+Ct,Ct=(ct/je|0)+(ut/Ks|0)+Hn*St,Oe[sn]=ct%je;return Ct&&(Oe=[Ct].concat(Oe)),Oe}function Pe(Oe,Fe,je,ut){var ct,gt;if(je!=ut)gt=je>ut?1:-1;else for(ct=gt=0;ct<je;ct++)if(Oe[ct]!=Fe[ct]){gt=Oe[ct]>Fe[ct]?1:-1;break}return gt}function Be(Oe,Fe,je,ut){for(var ct=0;je--;)Oe[je]-=ct,ct=Oe[je]<Fe[je]?1:0,Oe[je]=ct*ut+Oe[je]-Fe[je];for(;!Oe[0]&&Oe.length>1;Oe.splice(0,1));}return function(Oe,Fe,je,ut,ct){var gt,St,Ct,sn,$n,Hn,er,vi,ki,ei,Ri,vs,Su,fa,Df,qa,ec,ha=Oe.s==Fe.s?1:-1,Zo=Oe.c,ao=Fe.c;if(!Zo||!Zo[0]||!ao||!ao[0])return new Je(!Oe.s||!Fe.s||(Zo?ao&&Zo[0]==ao[0]:!ao)?NaN:Zo&&Zo[0]==0||!ao?ha*0:ha/0);for(vi=new Je(ha),ki=vi.c=[],St=Oe.e-Fe.e,ha=je+St+1,ct||(ct=ps,St=To(Oe.e/pr)-To(Fe.e/pr),ha=ha/pr|0),Ct=0;ao[Ct]==(Zo[Ct]||0);Ct++);if(ao[Ct]>(Zo[Ct]||0)&&St--,ha<0)ki.push(1),sn=!0;else{for(fa=Zo.length,qa=ao.length,Ct=0,ha+=2,$n=go(ct/(ao[0]+1)),$n>1&&(ao=ve(ao,$n,ct),Zo=ve(Zo,$n,ct),qa=ao.length,fa=Zo.length),Su=qa,ei=Zo.slice(0,qa),Ri=ei.length;Ri<qa;ei[Ri++]=0);ec=ao.slice(),ec=[0].concat(ec),Df=ao[0],ao[1]>=ct/2&&Df++;do{if($n=0,gt=Pe(ao,ei,qa,Ri),gt<0){if(vs=ei[0],qa!=Ri&&(vs=vs*ct+(ei[1]||0)),$n=go(vs/Df),$n>1)for($n>=ct&&($n=ct-1),Hn=ve(ao,$n,ct),er=Hn.length,Ri=ei.length;Pe(Hn,ei,er,Ri)==1;)$n--,Be(Hn,qa<er?ec:ao,er,ct),er=Hn.length,gt=1;else $n==0&&(gt=$n=1),Hn=ao.slice(),er=Hn.length;if(er<Ri&&(Hn=[0].concat(Hn)),Be(ei,Hn,Ri,ct),Ri=ei.length,gt==-1)for(;Pe(ao,ei,qa,Ri)<1;)$n++,Be(ei,qa<Ri?ec:ao,Ri,ct),Ri=ei.length}else gt===0&&($n++,ei=[0]);ki[Ct++]=$n,ei[0]?ei[Ri++]=Zo[Su]||0:(ei=[Zo[Su]],Ri=1)}while((Su++<fa||ei[0]!=null)&&ha--);sn=ei[0]!=null,ki[0]||ki.splice(0,1)}if(ct==ps){for(Ct=1,ha=ki[0];ha>=10;ha/=10,Ct++);wt(vi,je+(vi.e=Ct+St*pr-1)+1,ut,sn)}else vi.e=St,vi.r=+sn;return vi}}();function nt(ve,Pe,Be,Oe){var Fe,je,ut,ct,gt;if(Be==null?Be=re:a(Be,0,8),!ve.c)return ve.toString();if(Fe=ve.c[0],ut=ve.e,Pe==null)gt=No(ve.c),gt=Oe==1||Oe==2&&(ut<=ge||ut>=Le)?S(gt,ut):U(gt,ut,"0");else if(ve=wt(new Je(ve),Pe,Be),je=ve.e,gt=No(ve.c),ct=gt.length,Oe==1||Oe==2&&(Pe<=je||je<=ge)){for(;ct<Pe;gt+="0",ct++);gt=S(gt,je)}else if(Pe-=ut,gt=U(gt,je,"0"),je+1>ct){if(--Pe>0)for(gt+=".";Pe--;gt+="0");}else if(Pe+=je-ct,Pe>0)for(je+1==ct&&(gt+=".");Pe--;gt+="0");return ve.s<0&&Fe?"-"+gt:gt}function ht(ve,Pe){for(var Be,Oe,Fe=1,je=new Je(ve[0]);Fe<ve.length;Fe++)Oe=new Je(ve[Fe]),(!Oe.s||(Be=Ys(je,Oe))===Pe||Be===0&&je.s===Pe)&&(je=Oe);return je}function Bt(ve,Pe,Be){for(var Oe=1,Fe=Pe.length;!Pe[--Fe];Pe.pop());for(Fe=Pe[0];Fe>=10;Fe/=10,Oe++);return(Be=Oe+Be*pr-1)>Ue?ve.c=ve.e=null:Be<Xe?ve.c=[ve.e=0]:(ve.e=Be,ve.c=Pe),ve}w=function(){var ve=/^(-?)0([xbo])(?=\w[\w.]*$)/i,Pe=/^([^.]+)\.$/,Be=/^\.([^.]+)$/,Oe=/^-?(Infinity|NaN)$/,Fe=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(je,ut,ct,gt){var St,Ct=ct?ut:ut.replace(Fe,"");if(Oe.test(Ct))je.s=isNaN(Ct)?null:Ct<0?-1:1;else{if(!ct&&(Ct=Ct.replace(ve,function(sn,$n,Hn){return St=(Hn=Hn.toLowerCase())=="x"?16:Hn=="b"?2:8,!gt||gt==St?$n:sn}),gt&&(St=gt,Ct=Ct.replace(Pe,"$1").replace(Be,"0.$1")),ut!=Ct))return new Je(Ct,St);if(Je.DEBUG)throw Error(Oi+"Not a"+(gt?" base "+gt:"")+" number: "+ut);je.s=null}je.c=je.e=null}}();function wt(ve,Pe,Be,Oe){var Fe,je,ut,ct,gt,St,Ct,sn=ve.c,$n=Ea;if(sn){e:{for(Fe=1,ct=sn[0];ct>=10;ct/=10,Fe++);if(je=Pe-Fe,je<0)je+=pr,ut=Pe,gt=sn[St=0],Ct=go(gt/$n[Fe-ut-1]%10);else if(St=ua((je+1)/pr),St>=sn.length)if(Oe){for(;sn.length<=St;sn.push(0));gt=Ct=0,Fe=1,je%=pr,ut=je-pr+1}else break e;else{for(gt=ct=sn[St],Fe=1;ct>=10;ct/=10,Fe++);je%=pr,ut=je-pr+Fe,Ct=ut<0?0:go(gt/$n[Fe-ut-1]%10)}if(Oe=Oe||Pe<0||sn[St+1]!=null||(ut<0?gt:gt%$n[Fe-ut-1]),Oe=Be<4?(Ct||Oe)&&(Be==0||Be==(ve.s<0?3:2)):Ct>5||Ct==5&&(Be==4||Oe||Be==6&&(je>0?ut>0?gt/$n[Fe-ut]:0:sn[St-1])%10&1||Be==(ve.s<0?8:7)),Pe<1||!sn[0])return sn.length=0,Oe?(Pe-=ve.e+1,sn[0]=$n[(pr-Pe%pr)%pr],ve.e=-Pe||0):sn[0]=ve.e=0,ve;if(je==0?(sn.length=St,ct=1,St--):(sn.length=St+1,ct=$n[pr-je],sn[St]=ut>0?go(gt/$n[Fe-ut]%$n[ut])*ct:0),Oe)for(;;)if(St==0){for(je=1,ut=sn[0];ut>=10;ut/=10,je++);for(ut=sn[0]+=ct,ct=1;ut>=10;ut/=10,ct++);je!=ct&&(ve.e++,sn[0]==ps&&(sn[0]=1));break}else{if(sn[St]+=ct,sn[St]!=ps)break;sn[St--]=0,ct=1}for(je=sn.length;sn[--je]===0;sn.pop());}ve.e>Ue?ve.c=ve.e=null:ve.e<Xe&&(ve.c=[ve.e=0])}return ve}function Nt(ve){var Pe,Be=ve.e;return Be===null?ve.toString():(Pe=No(ve.c),Pe=Be<=ge||Be>=Le?S(Pe,Be):U(Pe,Be,"0"),ve.s<0?"-"+Pe:Pe)}return C.absoluteValue=C.abs=function(){var ve=new Je(this);return ve.s<0&&(ve.s=1),ve},C.comparedTo=function(ve,Pe){return Ys(this,new Je(ve,Pe))},C.decimalPlaces=C.dp=function(ve,Pe){var Be,Oe,Fe,je=this;if(ve!=null)return a(ve,0,is),Pe==null?Pe=re:a(Pe,0,8),wt(new Je(je),ve+je.e+1,Pe);if(!(Be=je.c))return null;if(Oe=((Fe=Be.length-1)-To(this.e/pr))*pr,Fe=Be[Fe])for(;Fe%10==0;Fe/=10,Oe--);return Oe<0&&(Oe=0),Oe},C.dividedBy=C.div=function(ve,Pe){return h(this,new Je(ve,Pe),J,re)},C.dividedToIntegerBy=C.idiv=function(ve,Pe){return h(this,new Je(ve,Pe),0,1)},C.exponentiatedBy=C.pow=function(ve,Pe){var Be,Oe,Fe,je,ut,ct,gt,St,Ct,sn=this;if(ve=new Je(ve),ve.c&&!ve.isInteger())throw Error(Oi+"Exponent not an integer: "+Nt(ve));if(Pe!=null&&(Pe=new Je(Pe)),ct=ve.e>14,!sn.c||!sn.c[0]||sn.c[0]==1&&!sn.e&&sn.c.length==1||!ve.c||!ve.c[0])return Ct=new Je(Math.pow(+Nt(sn),ct?ve.s*(2-p(ve)):+Nt(ve))),Pe?Ct.mod(Pe):Ct;if(gt=ve.s<0,Pe){if(Pe.c?!Pe.c[0]:!Pe.s)return new Je(NaN);Oe=!gt&&sn.isInteger()&&Pe.isInteger(),Oe&&(sn=sn.mod(Pe))}else{if(ve.e>9&&(sn.e>0||sn.e<-1||(sn.e==0?sn.c[0]>1||ct&&sn.c[1]>=24e7:sn.c[0]<8e13||ct&&sn.c[0]<=9999975e7)))return je=sn.s<0&&p(ve)?-0:0,sn.e>-1&&(je=1/je),new Je(gt?1/je:je);Xt&&(je=ua(Xt/pr+2))}for(ct?(Be=new Je(.5),gt&&(ve.s=1),St=p(ve)):(Fe=Math.abs(+Nt(ve)),St=Fe%2),Ct=new Je(j);;){if(St){if(Ct=Ct.times(sn),!Ct.c)break;je?Ct.c.length>je&&(Ct.c.length=je):Oe&&(Ct=Ct.mod(Pe))}if(Fe){if(Fe=go(Fe/2),Fe===0)break;St=Fe%2}else if(ve=ve.times(Be),wt(ve,ve.e+1,1),ve.e>14)St=p(ve);else{if(Fe=+Nt(ve),Fe===0)break;St=Fe%2}sn=sn.times(sn),je?sn.c&&sn.c.length>je&&(sn.c.length=je):Oe&&(sn=sn.mod(Pe))}return Oe?Ct:(gt&&(Ct=j.div(Ct)),Pe?Ct.mod(Pe):je?wt(Ct,Xt,re,ut):Ct)},C.integerValue=function(ve){var Pe=new Je(this);return ve==null?ve=re:a(ve,0,8),wt(Pe,Pe.e+1,ve)},C.isEqualTo=C.eq=function(ve,Pe){return Ys(this,new Je(ve,Pe))===0},C.isFinite=function(){return!!this.c},C.isGreaterThan=C.gt=function(ve,Pe){return Ys(this,new Je(ve,Pe))>0},C.isGreaterThanOrEqualTo=C.gte=function(ve,Pe){return(Pe=Ys(this,new Je(ve,Pe)))===1||Pe===0},C.isInteger=function(){return!!this.c&&To(this.e/pr)>this.c.length-2},C.isLessThan=C.lt=function(ve,Pe){return Ys(this,new Je(ve,Pe))<0},C.isLessThanOrEqualTo=C.lte=function(ve,Pe){return(Pe=Ys(this,new Je(ve,Pe)))===-1||Pe===0},C.isNaN=function(){return!this.s},C.isNegative=function(){return this.s<0},C.isPositive=function(){return this.s>0},C.isZero=function(){return!!this.c&&this.c[0]==0},C.minus=function(ve,Pe){var Be,Oe,Fe,je,ut=this,ct=ut.s;if(ve=new Je(ve,Pe),Pe=ve.s,!ct||!Pe)return new Je(NaN);if(ct!=Pe)return ve.s=-Pe,ut.plus(ve);var gt=ut.e/pr,St=ve.e/pr,Ct=ut.c,sn=ve.c;if(!gt||!St){if(!Ct||!sn)return Ct?(ve.s=-Pe,ve):new Je(sn?ut:NaN);if(!Ct[0]||!sn[0])return sn[0]?(ve.s=-Pe,ve):new Je(Ct[0]?ut:re==3?-0:0)}if(gt=To(gt),St=To(St),Ct=Ct.slice(),ct=gt-St){for((je=ct<0)?(ct=-ct,Fe=Ct):(St=gt,Fe=sn),Fe.reverse(),Pe=ct;Pe--;Fe.push(0));Fe.reverse()}else for(Oe=(je=(ct=Ct.length)<(Pe=sn.length))?ct:Pe,ct=Pe=0;Pe<Oe;Pe++)if(Ct[Pe]!=sn[Pe]){je=Ct[Pe]<sn[Pe];break}if(je&&(Fe=Ct,Ct=sn,sn=Fe,ve.s=-ve.s),Pe=(Oe=sn.length)-(Be=Ct.length),Pe>0)for(;Pe--;Ct[Be++]=0);for(Pe=ps-1;Oe>ct;){if(Ct[--Oe]<sn[Oe]){for(Be=Oe;Be&&!Ct[--Be];Ct[Be]=Pe);--Ct[Be],Ct[Oe]+=ps}Ct[Oe]-=sn[Oe]}for(;Ct[0]==0;Ct.splice(0,1),--St);return Ct[0]?Bt(ve,Ct,St):(ve.s=re==3?-1:1,ve.c=[ve.e=0],ve)},C.modulo=C.mod=function(ve,Pe){var Be,Oe,Fe=this;return ve=new Je(ve,Pe),!Fe.c||!ve.s||ve.c&&!ve.c[0]?new Je(NaN):!ve.c||Fe.c&&!Fe.c[0]?new Je(Fe):(Tt==9?(Oe=ve.s,ve.s=1,Be=h(Fe,ve,0,3),ve.s=Oe,Be.s*=Oe):Be=h(Fe,ve,0,Tt),ve=Fe.minus(Be.times(ve)),!ve.c[0]&&Tt==1&&(ve.s=Fe.s),ve)},C.multipliedBy=C.times=function(ve,Pe){var Be,Oe,Fe,je,ut,ct,gt,St,Ct,sn,$n,Hn,er,vi,ki,ei=this,Ri=ei.c,vs=(ve=new Je(ve,Pe)).c;if(!Ri||!vs||!Ri[0]||!vs[0])return!ei.s||!ve.s||Ri&&!Ri[0]&&!vs||vs&&!vs[0]&&!Ri?ve.c=ve.e=ve.s=null:(ve.s*=ei.s,!Ri||!vs?ve.c=ve.e=null:(ve.c=[0],ve.e=0)),ve;for(Oe=To(ei.e/pr)+To(ve.e/pr),ve.s*=ei.s,gt=Ri.length,sn=vs.length,gt<sn&&(er=Ri,Ri=vs,vs=er,Fe=gt,gt=sn,sn=Fe),Fe=gt+sn,er=[];Fe--;er.push(0));for(vi=ps,ki=Ks,Fe=sn;--Fe>=0;){for(Be=0,$n=vs[Fe]%ki,Hn=vs[Fe]/ki|0,ut=gt,je=Fe+ut;je>Fe;)St=Ri[--ut]%ki,Ct=Ri[ut]/ki|0,ct=Hn*St+Ct*$n,St=$n*St+ct%ki*ki+er[je]+Be,Be=(St/vi|0)+(ct/ki|0)+Hn*Ct,er[je--]=St%vi;er[je]=Be}return Be?++Oe:er.splice(0,1),Bt(ve,er,Oe)},C.negated=function(){var ve=new Je(this);return ve.s=-ve.s||null,ve},C.plus=function(ve,Pe){var Be,Oe=this,Fe=Oe.s;if(ve=new Je(ve,Pe),Pe=ve.s,!Fe||!Pe)return new Je(NaN);if(Fe!=Pe)return ve.s=-Pe,Oe.minus(ve);var je=Oe.e/pr,ut=ve.e/pr,ct=Oe.c,gt=ve.c;if(!je||!ut){if(!ct||!gt)return new Je(Fe/0);if(!ct[0]||!gt[0])return gt[0]?ve:new Je(ct[0]?Oe:Fe*0)}if(je=To(je),ut=To(ut),ct=ct.slice(),Fe=je-ut){for(Fe>0?(ut=je,Be=gt):(Fe=-Fe,Be=ct),Be.reverse();Fe--;Be.push(0));Be.reverse()}for(Fe=ct.length,Pe=gt.length,Fe-Pe<0&&(Be=gt,gt=ct,ct=Be,Pe=Fe),Fe=0;Pe;)Fe=(ct[--Pe]=ct[Pe]+gt[Pe]+Fe)/ps|0,ct[Pe]=ps===ct[Pe]?0:ct[Pe]%ps;return Fe&&(ct=[Fe].concat(ct),++ut),Bt(ve,ct,ut)},C.precision=C.sd=function(ve,Pe){var Be,Oe,Fe,je=this;if(ve!=null&&ve!==!!ve)return a(ve,1,is),Pe==null?Pe=re:a(Pe,0,8),wt(new Je(je),ve,Pe);if(!(Be=je.c))return null;if(Fe=Be.length-1,Oe=Fe*pr+1,Fe=Be[Fe]){for(;Fe%10==0;Fe/=10,Oe--);for(Fe=Be[0];Fe>=10;Fe/=10,Oe++);}return ve&&je.e+1>Oe&&(Oe=je.e+1),Oe},C.shiftedBy=function(ve){return a(ve,-9007199254740991,Ca),this.times("1e"+ve)},C.squareRoot=C.sqrt=function(){var ve,Pe,Be,Oe,Fe,je=this,ut=je.c,ct=je.s,gt=je.e,St=J+4,Ct=new Je("0.5");if(ct!==1||!ut||!ut[0])return new Je(!ct||ct<0&&(!ut||ut[0])?NaN:ut?je:1/0);if(ct=Math.sqrt(+Nt(je)),ct==0||ct==1/0?(Pe=No(ut),(Pe.length+gt)%2==0&&(Pe+="0"),ct=Math.sqrt(+Pe),gt=To((gt+1)/2)-(gt<0||gt%2),ct==1/0?Pe="5e"+gt:(Pe=ct.toExponential(),Pe=Pe.slice(0,Pe.indexOf("e")+1)+gt),Be=new Je(Pe)):Be=new Je(ct+""),Be.c[0]){for(gt=Be.e,ct=gt+St,ct<3&&(ct=0);;)if(Fe=Be,Be=Ct.times(Fe.plus(h(je,Fe,St,1))),No(Fe.c).slice(0,ct)===(Pe=No(Be.c)).slice(0,ct))if(Be.e<gt&&--ct,Pe=Pe.slice(ct-3,ct+1),Pe=="9999"||!Oe&&Pe=="4999"){if(!Oe&&(wt(Fe,Fe.e+J+2,0),Fe.times(Fe).eq(je))){Be=Fe;break}St+=4,ct+=4,Oe=1}else{(!+Pe||!+Pe.slice(1)&&Pe.charAt(0)=="5")&&(wt(Be,Be.e+J+2,1),ve=!Be.times(Be).eq(je));break}}return wt(Be,Be.e+J+1,re,ve)},C.toExponential=function(ve,Pe){return ve!=null&&(a(ve,0,is),ve++),nt(this,ve,Pe,1)},C.toFixed=function(ve,Pe){return ve!=null&&(a(ve,0,is),ve=ve+this.e+1),nt(this,ve,Pe)},C.toFormat=function(ve,Pe,Be){var Oe,Fe=this;if(Be==null)ve!=null&&Pe&&typeof Pe=="object"?(Be=Pe,Pe=null):ve&&typeof ve=="object"?(Be=ve,ve=Pe=null):Be=yn;else if(typeof Be!="object")throw Error(Oi+"Argument not an object: "+Be);if(Oe=Fe.toFixed(ve,Pe),Fe.c){var je,ut=Oe.split("."),ct=+Be.groupSize,gt=+Be.secondaryGroupSize,St=Be.groupSeparator||"",Ct=ut[0],sn=ut[1],$n=Fe.s<0,Hn=$n?Ct.slice(1):Ct,er=Hn.length;if(gt&&(je=ct,ct=gt,gt=je,er-=je),ct>0&&er>0){for(je=er%ct||ct,Ct=Hn.substr(0,je);je<er;je+=ct)Ct+=St+Hn.substr(je,ct);gt>0&&(Ct+=St+Hn.slice(je)),$n&&(Ct="-"+Ct)}Oe=sn?Ct+(Be.decimalSeparator||"")+((gt=+Be.fractionGroupSize)?sn.replace(new RegExp("\\d{"+gt+"}\\B","g"),"$&"+(Be.fractionGroupSeparator||"")):sn):Ct}return(Be.prefix||"")+Oe+(Be.suffix||"")},C.toFraction=function(ve){var Pe,Be,Oe,Fe,je,ut,ct,gt,St,Ct,sn,$n,Hn=this,er=Hn.c;if(ve!=null&&(ct=new Je(ve),!ct.isInteger()&&(ct.c||ct.s!==1)||ct.lt(j)))throw Error(Oi+"Argument "+(ct.isInteger()?"out of range: ":"not an integer: ")+Nt(ct));if(!er)return new Je(Hn);for(Pe=new Je(j),St=Be=new Je(j),Oe=gt=new Je(j),$n=No(er),je=Pe.e=$n.length-Hn.e-1,Pe.c[0]=Ea[(ut=je%pr)<0?pr+ut:ut],ve=!ve||ct.comparedTo(Pe)>0?je>0?Pe:St:ct,ut=Ue,Ue=1/0,ct=new Je($n),gt.c[0]=0;Ct=h(ct,Pe,0,1),Fe=Be.plus(Ct.times(Oe)),Fe.comparedTo(ve)!=1;)Be=Oe,Oe=Fe,St=gt.plus(Ct.times(Fe=St)),gt=Fe,Pe=ct.minus(Ct.times(Fe=Pe)),ct=Fe;return Fe=h(ve.minus(Be),Oe,0,1),gt=gt.plus(Fe.times(St)),Be=Be.plus(Fe.times(Oe)),gt.s=St.s=Hn.s,je=je*2,sn=h(St,Oe,je,re).minus(Hn).abs().comparedTo(h(gt,Be,je,re).minus(Hn).abs())<1?[St,Oe]:[gt,Be],Ue=ut,sn},C.toNumber=function(){return+Nt(this)},C.toPrecision=function(ve,Pe){return ve!=null&&a(ve,1,is),nt(this,ve,Pe,2)},C.toString=function(ve){var Pe,Be=this,Oe=Be.s,Fe=Be.e;return Fe===null?Oe?(Pe="Infinity",Oe<0&&(Pe="-"+Pe)):Pe="NaN":(ve==null?Pe=Fe<=ge||Fe>=Le?S(No(Be.c),Fe):U(No(Be.c),Fe,"0"):ve===10&&ur?(Be=wt(new Je(Be),J+Fe+1,re),Pe=U(No(Be.c),Be.e,"0")):(a(ve,2,wn.length,"Base"),Pe=v(U(No(Be.c),Fe,"0"),10,ve,Oe,!0)),Oe<0&&Be.c[0]&&(Pe="-"+Pe)),Pe},C.valueOf=C.toJSON=function(){return Nt(this)},C._isBigNumber=!0,C[Symbol.toStringTag]="BigNumber",C[Symbol.for("nodejs.util.inspect.custom")]=C.valueOf,l!=null&&Je.set(l),Je}function To(l){var h=l|0;return l>0||l===h?h:h-1}function No(l){for(var h,v,w=1,C=l.length,j=l[0]+"";w<C;){for(h=l[w++]+"",v=pr-h.length;v--;h="0"+h);j+=h}for(C=j.length;j.charCodeAt(--C)===48;);return j.slice(0,C+1||1)}function Ys(l,h){var v,w,C=l.c,j=h.c,J=l.s,re=h.s,ge=l.e,Le=h.e;if(!J||!re)return null;if(v=C&&!C[0],w=j&&!j[0],v||w)return v?w?0:-re:J;if(J!=re)return J;if(v=J<0,w=ge==Le,!C||!j)return w?0:!C^v?1:-1;if(!w)return ge>Le^v?1:-1;for(re=(ge=C.length)<(Le=j.length)?ge:Le,J=0;J<re;J++)if(C[J]!=j[J])return C[J]>j[J]^v?1:-1;return ge==Le?0:ge>Le^v?1:-1}function a(l,h,v,w){if(l<h||l>v||l!==go(l))throw Error(Oi+(w||"Argument")+(typeof l=="number"?l<h||l>v?" out of range: ":" not an integer: ":" not a primitive number: ")+String(l))}function p(l){var h=l.c.length-1;return To(l.e/pr)==h&&l.c[h]%2!=0}function S(l,h){return(l.length>1?l.charAt(0)+"."+l.slice(1):l)+(h<0?"e":"e+")+h}function U(l,h,v){var w,C;if(h<0){for(C=v+".";++h;C+=v);l=C+l}else if(w=l.length,++h>w){for(C=v,h-=w;--h;C+=v);l+=C}else h<w&&(l=l.slice(0,h)+"."+l.slice(h));return l}var se=bc(),Se=se,st=class{constructor(l){Ht(this,"key");Ht(this,"left",null);Ht(this,"right",null);this.key=l}},Mt=class extends st{constructor(l){super(l)}},Ut=class{constructor(){Ht(this,"size",0);Ht(this,"modificationCount",0);Ht(this,"splayCount",0)}splay(l){let h=this.root;if(h==null)return this.compare(l,l),-1;let v=null,w=null,C=null,j=null,J=h,re=this.compare,ge;for(;;)if(ge=re(J.key,l),ge>0){let Le=J.left;if(Le==null||(ge=re(Le.key,l),ge>0&&(J.left=Le.right,Le.right=J,J=Le,Le=J.left,Le==null)))break;v==null?w=J:v.left=J,v=J,J=Le}else if(ge<0){let Le=J.right;if(Le==null||(ge=re(Le.key,l),ge<0&&(J.right=Le.left,Le.left=J,J=Le,Le=J.right,Le==null)))break;C==null?j=J:C.right=J,C=J,J=Le}else break;return C!=null&&(C.right=J.left,J.left=j),v!=null&&(v.left=J.right,J.right=w),this.root!==J&&(this.root=J,this.splayCount++),ge}splayMin(l){let h=l,v=h.left;for(;v!=null;){let w=v;h.left=w.right,w.right=h,h=w,v=h.left}return h}splayMax(l){let h=l,v=h.right;for(;v!=null;){let w=v;h.right=w.left,w.left=h,h=w,v=h.right}return h}_delete(l){if(this.root==null||this.splay(l)!=0)return null;let h=this.root,v=h,w=h.left;if(this.size--,w==null)this.root=h.right;else{let C=h.right;h=this.splayMax(w),h.right=C,this.root=h}return this.modificationCount++,v}addNewRoot(l,h){this.size++,this.modificationCount++;let v=this.root;if(v==null){this.root=l;return}h<0?(l.left=v,l.right=v.right,v.right=null):(l.right=v,l.left=v.left,v.left=null),this.root=l}_first(){let l=this.root;return l==null?null:(this.root=this.splayMin(l),this.root)}_last(){let l=this.root;return l==null?null:(this.root=this.splayMax(l),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(l){return this.validKey(l)&&this.splay(l)==0}defaultCompare(){return(l,h)=>l<h?-1:l>h?1:0}wrap(){return{getRoot:()=>this.root,setRoot:l=>{this.root=l},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:l=>{this.splayCount=l},splay:l=>this.splay(l),has:l=>this.has(l)}}},an=class Vd extends Ut{constructor(v,w){super();Ht(this,"root",null);Ht(this,"compare");Ht(this,"validKey");Ht(this,Sn,"[object Set]");this.compare=v??this.defaultCompare(),this.validKey=w??(C=>C!=null&&C!=null)}delete(v){return this.validKey(v)?this._delete(v)!=null:!1}deleteAll(v){for(let w of v)this.delete(w)}forEach(v){let w=this[Symbol.iterator](),C;for(;C=w.next(),!C.done;)v(C.value,C.value,this)}add(v){let w=this.splay(v);return w!=0&&this.addNewRoot(new Mt(v),w),this}addAndReturn(v){let w=this.splay(v);return w!=0&&this.addNewRoot(new Mt(v),w),this.root.key}addAll(v){for(let w of v)this.add(w)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(v){if(v==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(v)<0)return this.root.key;let w=this.root.left;if(w==null)return null;let C=w.right;for(;C!=null;)w=C,C=w.right;return w.key}firstAfter(v){if(v==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(v)>0)return this.root.key;let w=this.root.right;if(w==null)return null;let C=w.left;for(;C!=null;)w=C,C=w.left;return w.key}retainAll(v){let w=new Vd(this.compare,this.validKey),C=this.modificationCount;for(let j of v){if(C!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(j)&&this.splay(j)==0&&w.add(this.root.key)}w.size!=this.size&&(this.root=w.root,this.size=w.size,this.modificationCount++)}lookup(v){return!this.validKey(v)||this.splay(v)!=0?null:this.root.key}intersection(v){let w=new Vd(this.compare,this.validKey);for(let C of this)v.has(C)&&w.add(C);return w}difference(v){let w=new Vd(this.compare,this.validKey);for(let C of this)v.has(C)||w.add(C);return w}union(v){let w=this.clone();return w.addAll(v),w}clone(){let v=new Vd(this.compare,this.validKey);return v.size=this.size,v.root=this.copyNode(this.root),v}copyNode(v){if(v==null)return null;function w(j,J){let re,ge;do{if(re=j.left,ge=j.right,re!=null){let Le=new Mt(re.key);J.left=Le,w(re,Le)}if(ge!=null){let Le=new Mt(ge.key);J.right=Le,j=ge,J=Le}}while(ge!=null)}let C=new Mt(v.key);return w(v,C),C}toSet(){return this.clone()}entries(){return new zr(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(Qn=Symbol.iterator,Sn=Symbol.toStringTag,Qn)](){return new Xn(this.wrap())}},In=class{constructor(l){Ht(this,"tree");Ht(this,"path",new Array);Ht(this,"modificationCount",null);Ht(this,"splayCount");this.tree=l,this.splayCount=l.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let l=this.path[this.path.length-1];return this.getValue(l)}rebuildPath(l){this.path.splice(0,this.path.length),this.tree.splay(l),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(l){for(;l!=null;)this.path.push(l),l=l.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let v=this.tree.getRoot();for(;v!=null;)this.path.push(v),v=v.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let l=this.path[this.path.length-1],h=l.right;if(h!=null){for(;h!=null;)this.path.push(h),h=h.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===l;)l=this.path.pop();return this.path.length>0}},Xn=class extends In{getValue(l){return l.key}},zr=class extends In{getValue(l){return[l.key,l.key]}},mo=l=>l,Ji=l=>{if(l){let h=new an(ds(l)),v=new an(ds(l)),w=(j,J)=>J.addAndReturn(j),C=j=>({x:w(j.x,h),y:w(j.y,v)});return C({x:new Se(0),y:new Se(0)}),C}return mo},Do=l=>({set:h=>{Hi=Do(h)},reset:()=>Do(l),compare:ds(l),snap:Ji(l),orient:Rs(l)}),Hi=Do(),gs=(l,h)=>l.ll.x.isLessThanOrEqualTo(h.x)&&h.x.isLessThanOrEqualTo(l.ur.x)&&l.ll.y.isLessThanOrEqualTo(h.y)&&h.y.isLessThanOrEqualTo(l.ur.y),wc=(l,h)=>{if(h.ur.x.isLessThan(l.ll.x)||l.ur.x.isLessThan(h.ll.x)||h.ur.y.isLessThan(l.ll.y)||l.ur.y.isLessThan(h.ll.y))return null;let v=l.ll.x.isLessThan(h.ll.x)?h.ll.x:l.ll.x,w=l.ur.x.isLessThan(h.ur.x)?l.ur.x:h.ur.x,C=l.ll.y.isLessThan(h.ll.y)?h.ll.y:l.ll.y,j=l.ur.y.isLessThan(h.ur.y)?l.ur.y:h.ur.y;return{ll:{x:v,y:C},ur:{x:w,y:j}}},ca=(l,h)=>l.x.times(h.y).minus(l.y.times(h.x)),Js=(l,h)=>l.x.times(h.x).plus(l.y.times(h.y)),Fs=l=>Js(l,l).sqrt(),Tf=(l,h,v)=>{let w={x:h.x.minus(l.x),y:h.y.minus(l.y)},C={x:v.x.minus(l.x),y:v.y.minus(l.y)};return ca(C,w).div(Fs(C)).div(Fs(w))},eu=(l,h,v)=>{let w={x:h.x.minus(l.x),y:h.y.minus(l.y)},C={x:v.x.minus(l.x),y:v.y.minus(l.y)};return Js(C,w).div(Fs(C)).div(Fs(w))},mi=(l,h,v)=>h.y.isZero()?null:{x:l.x.plus(h.x.div(h.y).times(v.minus(l.y))),y:v},Wo=(l,h,v)=>h.x.isZero()?null:{x:v,y:l.y.plus(h.y.div(h.x).times(v.minus(l.x)))},De=(l,h,v,w)=>{if(h.x.isZero())return Wo(v,w,l.x);if(w.x.isZero())return Wo(l,h,v.x);if(h.y.isZero())return mi(v,w,l.y);if(w.y.isZero())return mi(l,h,v.y);let C=ca(h,w);if(C.isZero())return null;let j={x:v.x.minus(l.x),y:v.y.minus(l.y)},J=ca(j,h).div(C),re=ca(j,w).div(C),ge=l.x.plus(re.times(h.x)),Le=v.x.plus(J.times(w.x)),Xe=l.y.plus(re.times(h.y)),Ue=v.y.plus(J.times(w.y)),vt=ge.plus(Le).div(2),Tt=Xe.plus(Ue).div(2);return{x:vt,y:Tt}},ms=class dx{constructor(h,v){Ht(this,"point");Ht(this,"isLeft");Ht(this,"segment");Ht(this,"otherSE");Ht(this,"consumedBy");h.events===void 0?h.events=[this]:h.events.push(this),this.point=h,this.isLeft=v}static compare(h,v){let w=dx.comparePoints(h.point,v.point);return w!==0?w:(h.point!==v.point&&h.link(v),h.isLeft!==v.isLeft?h.isLeft?1:-1:Io.compare(h.segment,v.segment))}static comparePoints(h,v){return h.x.isLessThan(v.x)?-1:h.x.isGreaterThan(v.x)?1:h.y.isLessThan(v.y)?-1:h.y.isGreaterThan(v.y)?1:0}link(h){if(h.point===this.point)throw new Error("Tried to link already linked events");let v=h.point.events;for(let w=0,C=v.length;w<C;w++){let j=v[w];this.point.events.push(j),j.point=this.point}this.checkForConsuming()}checkForConsuming(){let h=this.point.events.length;for(let v=0;v<h;v++){let w=this.point.events[v];if(w.segment.consumedBy===void 0)for(let C=v+1;C<h;C++){let j=this.point.events[C];j.consumedBy===void 0&&w.otherSE.point.events===j.otherSE.point.events&&w.segment.consume(j.segment)}}}getAvailableLinkedEvents(){let h=[];for(let v=0,w=this.point.events.length;v<w;v++){let C=this.point.events[v];C!==this&&!C.segment.ringOut&&C.segment.isInResult()&&h.push(C)}return h}getLeftmostComparator(h){let v=new Map,w=C=>{let j=C.otherSE;v.set(C,{sine:Tf(this.point,h.point,j.point),cosine:eu(this.point,h.point,j.point)})};return(C,j)=>{v.has(C)||w(C),v.has(j)||w(j);let{sine:J,cosine:re}=v.get(C),{sine:ge,cosine:Le}=v.get(j);return J.isGreaterThanOrEqualTo(0)&&ge.isGreaterThanOrEqualTo(0)?re.isLessThan(Le)?1:re.isGreaterThan(Le)?-1:0:J.isLessThan(0)&&ge.isLessThan(0)?re.isLessThan(Le)?-1:re.isGreaterThan(Le)?1:0:ge.isLessThan(J)?-1:ge.isGreaterThan(J)?1:0}}},Lu=0,Io=class jg{constructor(h,v,w,C){Ht(this,"id");Ht(this,"leftSE");Ht(this,"rightSE");Ht(this,"rings");Ht(this,"windings");Ht(this,"ringOut");Ht(this,"consumedBy");Ht(this,"prev");Ht(this,"_prevInResult");Ht(this,"_beforeState");Ht(this,"_afterState");Ht(this,"_isInResult");this.id=++Lu,this.leftSE=h,h.segment=this,h.otherSE=v,this.rightSE=v,v.segment=this,v.otherSE=h,this.rings=w,this.windings=C}static compare(h,v){let w=h.leftSE.point.x,C=v.leftSE.point.x,j=h.rightSE.point.x,J=v.rightSE.point.x;if(J.isLessThan(w))return 1;if(j.isLessThan(C))return-1;let re=h.leftSE.point.y,ge=v.leftSE.point.y,Le=h.rightSE.point.y,Xe=v.rightSE.point.y;if(w.isLessThan(C)){if(ge.isLessThan(re)&&ge.isLessThan(Le))return 1;if(ge.isGreaterThan(re)&&ge.isGreaterThan(Le))return-1;let Ue=h.comparePoint(v.leftSE.point);if(Ue<0)return 1;if(Ue>0)return-1;let vt=v.comparePoint(h.rightSE.point);return vt!==0?vt:-1}if(w.isGreaterThan(C)){if(re.isLessThan(ge)&&re.isLessThan(Xe))return-1;if(re.isGreaterThan(ge)&&re.isGreaterThan(Xe))return 1;let Ue=v.comparePoint(h.leftSE.point);if(Ue!==0)return Ue;let vt=h.comparePoint(v.rightSE.point);return vt<0?1:vt>0?-1:1}if(re.isLessThan(ge))return-1;if(re.isGreaterThan(ge))return 1;if(j.isLessThan(J)){let Ue=v.comparePoint(h.rightSE.point);if(Ue!==0)return Ue}if(j.isGreaterThan(J)){let Ue=h.comparePoint(v.rightSE.point);if(Ue<0)return 1;if(Ue>0)return-1}if(!j.eq(J)){let Ue=Le.minus(re),vt=j.minus(w),Tt=Xe.minus(ge),Xt=J.minus(C);if(Ue.isGreaterThan(vt)&&Tt.isLessThan(Xt))return 1;if(Ue.isLessThan(vt)&&Tt.isGreaterThan(Xt))return-1}return j.isGreaterThan(J)?1:j.isLessThan(J)||Le.isLessThan(Xe)?-1:Le.isGreaterThan(Xe)?1:h.id<v.id?-1:h.id>v.id?1:0}static fromRing(h,v,w){let C,j,J,re=ms.comparePoints(h,v);if(re<0)C=h,j=v,J=1;else if(re>0)C=v,j=h,J=-1;else throw new Error(`Tried to create degenerate segment at [${h.x}, ${h.y}]`);let ge=new ms(C,!0),Le=new ms(j,!1);return new jg(ge,Le,[w],[J])}replaceRightSE(h){this.rightSE=h,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let h=this.leftSE.point.y,v=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:h.isLessThan(v)?h:v},ur:{x:this.rightSE.point.x,y:h.isGreaterThan(v)?h:v}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(h){return h.x.eq(this.leftSE.point.x)&&h.y.eq(this.leftSE.point.y)||h.x.eq(this.rightSE.point.x)&&h.y.eq(this.rightSE.point.y)}comparePoint(h){return Hi.orient(this.leftSE.point,h,this.rightSE.point)}getIntersection(h){let v=this.bbox(),w=h.bbox(),C=wc(v,w);if(C===null)return null;let j=this.leftSE.point,J=this.rightSE.point,re=h.leftSE.point,ge=h.rightSE.point,Le=gs(v,re)&&this.comparePoint(re)===0,Xe=gs(w,j)&&h.comparePoint(j)===0,Ue=gs(v,ge)&&this.comparePoint(ge)===0,vt=gs(w,J)&&h.comparePoint(J)===0;if(Xe&&Le)return vt&&!Ue?J:!vt&&Ue?ge:null;if(Xe)return Ue&&j.x.eq(ge.x)&&j.y.eq(ge.y)?null:j;if(Le)return vt&&J.x.eq(re.x)&&J.y.eq(re.y)?null:re;if(vt&&Ue)return null;if(vt)return J;if(Ue)return ge;let Tt=De(j,this.vector(),re,h.vector());return Tt===null||!gs(C,Tt)?null:Hi.snap(Tt)}split(h){let v=[],w=h.events!==void 0,C=new ms(h,!0),j=new ms(h,!1),J=this.rightSE;this.replaceRightSE(j),v.push(j),v.push(C);let re=new jg(C,J,this.rings.slice(),this.windings.slice());return ms.comparePoints(re.leftSE.point,re.rightSE.point)>0&&re.swapEvents(),ms.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),w&&(C.checkForConsuming(),j.checkForConsuming()),v}swapEvents(){let h=this.rightSE;this.rightSE=this.leftSE,this.leftSE=h,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let v=0,w=this.windings.length;v<w;v++)this.windings[v]*=-1}consume(h){let v=this,w=h;for(;v.consumedBy;)v=v.consumedBy;for(;w.consumedBy;)w=w.consumedBy;let C=jg.compare(v,w);if(C!==0){if(C>0){let j=v;v=w,w=j}if(v.prev===w){let j=v;v=w,w=j}for(let j=0,J=w.rings.length;j<J;j++){let re=w.rings[j],ge=w.windings[j],Le=v.rings.indexOf(re);Le===-1?(v.rings.push(re),v.windings.push(ge)):v.windings[Le]+=ge}w.rings=null,w.windings=null,w.consumedBy=v,w.leftSE.consumedBy=v.leftSE,w.rightSE.consumedBy=v.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let h=this.prev.consumedBy||this.prev;this._beforeState=h.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let h=this.beforeState();this._afterState={rings:h.rings.slice(0),windings:h.windings.slice(0),multiPolys:[]};let v=this._afterState.rings,w=this._afterState.windings,C=this._afterState.multiPolys;for(let re=0,ge=this.rings.length;re<ge;re++){let Le=this.rings[re],Xe=this.windings[re],Ue=v.indexOf(Le);Ue===-1?(v.push(Le),w.push(Xe)):w[Ue]+=Xe}let j=[],J=[];for(let re=0,ge=v.length;re<ge;re++){if(w[re]===0)continue;let Le=v[re],Xe=Le.poly;if(J.indexOf(Xe)===-1)if(Le.isExterior)j.push(Xe);else{J.indexOf(Xe)===-1&&J.push(Xe);let Ue=j.indexOf(Le.poly);Ue!==-1&&j.splice(Ue,1)}}for(let re=0,ge=j.length;re<ge;re++){let Le=j[re].multiPoly;C.indexOf(Le)===-1&&C.push(Le)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let h=this.beforeState().multiPolys,v=this.afterState().multiPolys;switch(Kc.type){case"union":{let w=h.length===0,C=v.length===0;this._isInResult=w!==C;break}case"intersection":{let w,C;h.length<v.length?(w=h.length,C=v.length):(w=v.length,C=h.length),this._isInResult=C===Kc.numMultiPolys&&w<C;break}case"xor":{let w=Math.abs(h.length-v.length);this._isInResult=w%2===1;break}case"difference":{let w=C=>C.length===1&&C[0].isSubject;this._isInResult=w(h)!==w(v);break}}return this._isInResult}},Gr=class{constructor(l,h,v){Ht(this,"poly");Ht(this,"isExterior");Ht(this,"segments");Ht(this,"bbox");if(!Array.isArray(l)||l.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=h,this.isExterior=v,this.segments=[],typeof l[0][0]!="number"||typeof l[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let w=Hi.snap({x:new Se(l[0][0]),y:new Se(l[0][1])});this.bbox={ll:{x:w.x,y:w.y},ur:{x:w.x,y:w.y}};let C=w;for(let j=1,J=l.length;j<J;j++){if(typeof l[j][0]!="number"||typeof l[j][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let re=Hi.snap({x:new Se(l[j][0]),y:new Se(l[j][1])});re.x.eq(C.x)&&re.y.eq(C.y)||(this.segments.push(Io.fromRing(C,re,this)),re.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=re.x),re.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=re.y),re.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=re.x),re.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=re.y),C=re)}(!w.x.eq(C.x)||!w.y.eq(C.y))&&this.segments.push(Io.fromRing(C,w,this))}getSweepEvents(){let l=[];for(let h=0,v=this.segments.length;h<v;h++){let w=this.segments[h];l.push(w.leftSE),l.push(w.rightSE)}return l}},Wc=class{constructor(l,h){Ht(this,"multiPoly");Ht(this,"exteriorRing");Ht(this,"interiorRings");Ht(this,"bbox");if(!Array.isArray(l))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Gr(l[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let v=1,w=l.length;v<w;v++){let C=new Gr(l[v],this,!1);C.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=C.bbox.ll.x),C.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=C.bbox.ll.y),C.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=C.bbox.ur.x),C.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=C.bbox.ur.y),this.interiorRings.push(C)}this.multiPoly=h}getSweepEvents(){let l=this.exteriorRing.getSweepEvents();for(let h=0,v=this.interiorRings.length;h<v;h++){let w=this.interiorRings[h].getSweepEvents();for(let C=0,j=w.length;C<j;C++)l.push(w[C])}return l}},hh=class{constructor(l,h){Ht(this,"isSubject");Ht(this,"polys");Ht(this,"bbox");if(!Array.isArray(l))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof l[0][0][0]=="number"&&(l=[l])}catch{}this.polys=[],this.bbox={ll:{x:new Se(Number.POSITIVE_INFINITY),y:new Se(Number.POSITIVE_INFINITY)},ur:{x:new Se(Number.NEGATIVE_INFINITY),y:new Se(Number.NEGATIVE_INFINITY)}};for(let v=0,w=l.length;v<w;v++){let C=new Wc(l[v],this);C.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=C.bbox.ll.x),C.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=C.bbox.ll.y),C.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=C.bbox.ur.x),C.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=C.bbox.ur.y),this.polys.push(C)}this.isSubject=h}getSweepEvents(){let l=[];for(let h=0,v=this.polys.length;h<v;h++){let w=this.polys[h].getSweepEvents();for(let C=0,j=w.length;C<j;C++)l.push(w[C])}return l}},Zc=class g1{constructor(h){Ht(this,"events");Ht(this,"poly");Ht(this,"_isExteriorRing");Ht(this,"_enclosingRing");this.events=h;for(let v=0,w=h.length;v<w;v++)h[v].segment.ringOut=this;this.poly=null}static factory(h){let v=[];for(let w=0,C=h.length;w<C;w++){let j=h[w];if(!j.isInResult()||j.ringOut)continue;let J=null,re=j.leftSE,ge=j.rightSE,Le=[re],Xe=re.point,Ue=[];for(;J=re,re=ge,Le.push(re),re.point!==Xe;)for(;;){let vt=re.getAvailableLinkedEvents();if(vt.length===0){let yn=Le[0].point,wn=Le[Le.length-1].point;throw new Error(`Unable to complete output ring starting at [${yn.x}, ${yn.y}]. Last matching segment found ends at [${wn.x}, ${wn.y}].`)}if(vt.length===1){ge=vt[0].otherSE;break}let Tt=null;for(let yn=0,wn=Ue.length;yn<wn;yn++)if(Ue[yn].point===re.point){Tt=yn;break}if(Tt!==null){let yn=Ue.splice(Tt)[0],wn=Le.splice(yn.index);wn.unshift(wn[0].otherSE),v.push(new g1(wn.reverse()));continue}Ue.push({index:Le.length,point:re.point});let Xt=re.getLeftmostComparator(J);ge=vt.sort(Xt)[0].otherSE;break}v.push(new g1(Le))}return v}getGeom(){let h=this.events[0].point,v=[h];for(let Le=1,Xe=this.events.length-1;Le<Xe;Le++){let Ue=this.events[Le].point,vt=this.events[Le+1].point;Hi.orient(Ue,h,vt)!==0&&(v.push(Ue),h=Ue)}if(v.length===1)return null;let w=v[0],C=v[1];Hi.orient(w,h,C)===0&&v.shift(),v.push(v[0]);let j=this.isExteriorRing()?1:-1,J=this.isExteriorRing()?0:v.length-1,re=this.isExteriorRing()?v.length:-1,ge=[];for(let Le=J;Le!=re;Le+=j)ge.push([v[Le].x.toNumber(),v[Le].y.toNumber()]);return ge}isExteriorRing(){if(this._isExteriorRing===void 0){let h=this.enclosingRing();this._isExteriorRing=h?!h.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var C,j;let h=this.events[0];for(let J=1,re=this.events.length;J<re;J++){let ge=this.events[J];ms.compare(h,ge)>0&&(h=ge)}let v=h.segment.prevInResult(),w=v?v.prevInResult():null;for(;;){if(!v)return null;if(!w)return v.ringOut;if(w.ringOut!==v.ringOut)return((C=w.ringOut)==null?void 0:C.enclosingRing())!==v.ringOut?v.ringOut:(j=v.ringOut)==null?void 0:j.enclosingRing();v=w.prevInResult(),w=v?v.prevInResult():null}}},Ha=class{constructor(l){Ht(this,"exteriorRing");Ht(this,"interiorRings");this.exteriorRing=l,l.poly=this,this.interiorRings=[]}addInterior(l){this.interiorRings.push(l),l.poly=this}getGeom(){let l=this.exteriorRing.getGeom();if(l===null)return null;let h=[l];for(let v=0,w=this.interiorRings.length;v<w;v++){let C=this.interiorRings[v].getGeom();C!==null&&h.push(C)}return h}},xc=class{constructor(l){Ht(this,"rings");Ht(this,"polys");this.rings=l,this.polys=this._composePolys(l)}getGeom(){let l=[];for(let h=0,v=this.polys.length;h<v;h++){let w=this.polys[h].getGeom();w!==null&&l.push(w)}return l}_composePolys(l){var v;let h=[];for(let w=0,C=l.length;w<C;w++){let j=l[w];if(!j.poly)if(j.isExteriorRing())h.push(new Ha(j));else{let J=j.enclosingRing();J!=null&&J.poly||h.push(new Ha(J)),(v=J==null?void 0:J.poly)==null||v.addInterior(j)}}return h}},Nf=class{constructor(l,h=Io.compare){Ht(this,"queue");Ht(this,"tree");Ht(this,"segments");this.queue=l,this.tree=new an(h),this.segments=[]}process(l){let h=l.segment,v=[];if(l.consumedBy)return l.isLeft?this.queue.delete(l.otherSE):this.tree.delete(h),v;l.isLeft&&this.tree.add(h);let w=h,C=h;do w=this.tree.lastBefore(w);while(w!=null&&w.consumedBy!=null);do C=this.tree.firstAfter(C);while(C!=null&&C.consumedBy!=null);if(l.isLeft){let j=null;if(w){let re=w.getIntersection(h);if(re!==null&&(h.isAnEndpoint(re)||(j=re),!w.isAnEndpoint(re))){let ge=this._splitSafely(w,re);for(let Le=0,Xe=ge.length;Le<Xe;Le++)v.push(ge[Le])}}let J=null;if(C){let re=C.getIntersection(h);if(re!==null&&(h.isAnEndpoint(re)||(J=re),!C.isAnEndpoint(re))){let ge=this._splitSafely(C,re);for(let Le=0,Xe=ge.length;Le<Xe;Le++)v.push(ge[Le])}}if(j!==null||J!==null){let re=null;j===null?re=J:J===null?re=j:re=ms.comparePoints(j,J)<=0?j:J,this.queue.delete(h.rightSE),v.push(h.rightSE);let ge=h.split(re);for(let Le=0,Xe=ge.length;Le<Xe;Le++)v.push(ge[Le])}v.length>0?(this.tree.delete(h),v.push(l)):(this.segments.push(h),h.prev=w)}else{if(w&&C){let j=w.getIntersection(C);if(j!==null){if(!w.isAnEndpoint(j)){let J=this._splitSafely(w,j);for(let re=0,ge=J.length;re<ge;re++)v.push(J[re])}if(!C.isAnEndpoint(j)){let J=this._splitSafely(C,j);for(let re=0,ge=J.length;re<ge;re++)v.push(J[re])}}}this.tree.delete(h)}return v}_splitSafely(l,h){this.tree.delete(l);let v=l.rightSE;this.queue.delete(v);let w=l.split(h);return w.push(v),l.consumedBy===void 0&&this.tree.add(l),w}},md=class{constructor(){Ht(this,"type");Ht(this,"numMultiPolys")}run(l,h,v){Qu.type=l;let w=[new hh(h,!0)];for(let ge=0,Le=v.length;ge<Le;ge++)w.push(new hh(v[ge],!1));if(Qu.numMultiPolys=w.length,Qu.type==="difference"){let ge=w[0],Le=1;for(;Le<w.length;)wc(w[Le].bbox,ge.bbox)!==null?Le++:w.splice(Le,1)}if(Qu.type==="intersection")for(let ge=0,Le=w.length;ge<Le;ge++){let Xe=w[ge];for(let Ue=ge+1,vt=w.length;Ue<vt;Ue++)if(wc(Xe.bbox,w[Ue].bbox)===null)return[]}let C=new an(ms.compare);for(let ge=0,Le=w.length;ge<Le;ge++){let Xe=w[ge].getSweepEvents();for(let Ue=0,vt=Xe.length;Ue<vt;Ue++)C.add(Xe[Ue])}let j=new Nf(C),J=null;for(C.size!=0&&(J=C.first(),C.delete(J));J;){let ge=j.process(J);for(let Le=0,Xe=ge.length;Le<Xe;Le++){let Ue=ge[Le];Ue.consumedBy===void 0&&C.add(Ue)}C.size!=0?(J=C.first(),C.delete(J)):J=null}Hi.reset();let re=Zc.factory(j.segments);return new xc(re).getGeom()}},Qu=new md,Kc=Qu,Bl=(l,...h)=>Kc.run("intersection",l,h),vd=(l,...h)=>Kc.run("difference",l,h);Hi.set;function Yc(l){let h={type:"Feature"};return h.geometry=l,h}function Jc(l){return l.type==="Feature"?l.geometry:l}function dh(l){return l&&l.geometry&&l.geometry.coordinates?l.geometry.coordinates:l}function ph(l){return Yc({type:"LineString",coordinates:l})}function Pa(l){return Yc({type:"MultiLineString",coordinates:l})}function gh(l){return Yc({type:"Polygon",coordinates:l})}function mh(l){return Yc({type:"MultiPolygon",coordinates:l})}function vh(l,h){let v=Jc(l),w=Jc(h),C=Bl(v.coordinates,w.coordinates);return C.length===0?null:C.length===1?gh(C[0]):mh(C)}function b(l,h){let v=Jc(l),w=Jc(h),C=vd(v.coordinates,w.coordinates);return C.length===0?null:C.length===1?gh(C[0]):mh(C)}function P(l){return Array.isArray(l)?1+P(l[0]):-1}function H(l){l instanceof L.Polyline&&(l=l.toGeoJSON(15));let h=dh(l),v=P(h),w=[];return v>1?h.forEach(C=>{w.push(ph(C))}):w.push(l),w}function ae(l){let h=[];return l.eachLayer(v=>{h.push(dh(v.toGeoJSON(15)))}),Pa(h)}io.Cut=io.Polygon.extend({initialize(l){this._map=l,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let l=this._layer.getLatLngs();if(l.length<=2)return;let h=L.polygon(l,this.options.pathOptions);h._latlngInfos=this._layer._latlngInfo,this.cut(h),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:w,originalLayer:C})=>{this._fireCut(C,w,C),this._fireCut(this._map,w,C),C.pm._fireEdit()}),this._editedLayers=[];let v=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(v))},cut(l){let h=this._map._layers,v=l._latlngInfos||[];Object.keys(h).map(w=>h[w]).filter(w=>w.pm).filter(w=>!w._pmTempLayer).filter(w=>!L.PM.optIn&&!w.options.pmIgnore||L.PM.optIn&&w.options.pmIgnore===!1).filter(w=>w instanceof L.Polyline).filter(w=>w!==l).filter(w=>w.pm.options.allowCutting).filter(w=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(w)>-1:!0).filter(w=>!this._layerGroup.hasLayer(w)).filter(w=>{try{let C=!!hs(l.toGeoJSON(15),w.toGeoJSON(15)).features.length>0;return C||w instanceof L.Polyline&&!(w instanceof L.Polygon)?C:!!vh(l.toGeoJSON(15),w.toGeoJSON(15))}catch{return w instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(w=>{let C;if(w instanceof L.Polygon){C=L.polygon(w.getLatLngs());let ge=C.getLatLngs();v.forEach(Le=>{if(Le&&Le.snapInfo){let{latlng:Xe}=Le,Ue=this._calcClosestLayer(Xe,[C]);if(Ue&&Ue.segment&&Ue.distance<this.options.snapDistance){let{segment:vt}=Ue;if(vt&&vt.length===2){let{indexPath:Tt,parentPath:Xt,newIndex:yn}=L.PM.Utils._getIndexFromSegment(ge,vt);(Tt.length>1?(0,Bi.default)(ge,Xt):ge).splice(yn,0,Xe)}}}})}else C=w;let j=this._cutLayer(l,C),J=L.geoJSON(j,w.options);J.getLayers().length===1&&([J]=J.getLayers()),this._setPane(J,"layerPane");let re=J.addTo(this._map.pm._getContainingLayer());if(re.pm.enable(w.pm.options),re.pm.disable(),w._pmTempLayer=!0,l._pmTempLayer=!0,w.remove(),w.removeFrom(this._map.pm._getContainingLayer()),l.remove(),l.removeFrom(this._map.pm._getContainingLayer()),re.getLayers&&re.getLayers().length===0&&this._map.pm.removeLayer({target:re}),re instanceof L.LayerGroup?(re.eachLayer(ge=>{this._addDrawnLayerProp(ge)}),this._addDrawnLayerProp(re)):this._addDrawnLayerProp(re),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let ge=this.options.layersToCut.indexOf(w);ge>-1&&this.options.layersToCut.splice(ge,1)}this._editedLayers.push({layer:re,originalLayer:w})})},_cutLayer(l,h){let v=L.geoJSON(),w;if(h instanceof L.Polygon)w=b(h.toGeoJSON(15),l.toGeoJSON(15));else{let C=H(h);C.forEach(j=>{let J=Kn(j,l.toGeoJSON(15)),re;J&&J.features.length>0?re=L.geoJSON(J):re=L.geoJSON(j),re.getLayers().forEach(ge=>{oa(l.toGeoJSON(15),ge.toGeoJSON(15))||ge.addTo(v)})}),C.length>1?w=ae(v):w=v.toGeoJSON(15)}return w},_change:L.Util.falseFn}),io.Text=io.extend({initialize(l){this._map=l,this._shape="Text",this.toolbarButtonName="drawText"},enable(l){L.Util.setOptions(this,l),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(or("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var l;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(l=this._hintMarker)==null||l.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this.options.snappable){let h=l;h.target=this._hintMarker,this._handleSnapping(h)}},_createMarker(l){var C,j,J,re;if(!l.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(C=this.options.textOptions)==null?void 0:C.className){let ge=this.options.textOptions.className.split(" ");this.textArea.classList.add(...ge)}let v=this._createTextIcon(this.textArea),w=new L.Marker(h,{textMarker:!0,_textMarkerOverPM:!0,icon:v});if(this._setPane(w,"markerPane"),this._finishLayer(w),w.pm||(w.options.draggable=!1),w.addTo(this._map.pm._getContainingLayer()),w.pm){w.pm.textArea=this.textArea,L.setOptions(w.pm,{removeIfEmpty:((j=this.options.textOptions)==null?void 0:j.removeIfEmpty)??!0});let ge=((J=this.options.textOptions)==null?void 0:J.focusAfterDraw)??!0;w.pm._createTextMarker(ge),(re=this.options.textOptions)!=null&&re.text&&w.pm.setText(this.options.textOptions.text)}this._fireCreate(w),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(l){this.enable(),this._hintMarker.setLatLng(l.latlng)},_createTextArea(){let l=document.createElement("textarea");return l.readOnly=!0,l.classList.add("pm-textarea","pm-disabled"),l},_createTextIcon(l){return L.divIcon({className:"pm-text-marker",html:l})}});var be={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,bi(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let l=this._getDOMElem();l&&(bi(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(l)):L.DomEvent.on(l,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,bi(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let l=this._getDOMElem();l&&(bi(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(l)):L.DomEvent.off(l,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(l){let h=l.touches?l.touches[0]:l,v={originalEvent:h,target:this._layer};return v.containerPoint=this._map.mouseEventToContainerPoint(h),v.latlng=this._map.containerPointToLatLng(v.containerPoint),this._dragMixinOnMouseDown(v),!1},_simulateMouseMoveEvent(l){let h=l.touches?l.touches[0]:l,v={originalEvent:h,target:this._layer};return v.containerPoint=this._map.mouseEventToContainerPoint(h),v.latlng=this._map.containerPointToLatLng(v.containerPoint),this._dragMixinOnMouseMove(v),!1},_simulateMouseUpEvent(l){let h={originalEvent:l.touches?l.touches[0]:l,target:this._layer};return l.type.indexOf("touch")===-1&&(h.containerPoint=this._map.mouseEventToContainerPoint(l),h.latlng=this._map.containerPointToLatLng(h.containerPoint)),this._dragMixinOnMouseUp(h),!1},_dragMixinOnMouseDown(l){if(l.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(l);let h=l._fromLayerSync,v=this._syncLayers("_dragMixinOnMouseDown",l);if(this._layer instanceof L.Marker&&(this.options.snappable&&!h&&!v?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let w="resizeableCircleMarker";this._layer instanceof L.Circle&&(w="resizeableCircle"),this.options.snappable&&!h&&!v?this._layer.pm.options[w]||this._initSnappableMarkersDrag():this._layer.pm.options[w]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=l.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(l){this._overwriteEventIfItComesFromMarker(l);let h=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",l),this._dragging||(this._dragging=!0,L.DomUtil.addClass(h,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=l.latlng),this._onLayerDrag(l),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(l){let h=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",l),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,h&&L.DomUtil.removeClass(h,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(l){let{latlng:h}=l,v={lat:h.lat-this._tempDragCoord.lat,lng:h.lng-this._tempDragCoord.lng},w=C=>C.map(j=>{if(Array.isArray(j))return w(j);let J={lat:j.lat+v.lat,lng:j.lng+v.lng};return(j.alt||j.alt===0)&&(J.alt=j.alt),J});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let C=w([this._layer.getLatLng()]);this._layer.setLatLng(C[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let C=this._layer.getLatLng();this._layer._snapped&&(C=this._layer._orgLatLng);let j=w([C]);this._layer.setLatLng(j[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let C=w([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(C),this._fireChange(this._layer.getBounds(),"Edit")}else{let C=w(this._layer.getLatLngs());this._layer.setLatLngs(C),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=h,l.layer=this._layer,this._fireDrag(l)},addDraggingClass(){let l=this._getDOMElem();l&&L.DomUtil.addClass(l,"leaflet-pm-draggable")},removeDraggingClass(){let l=this._getDOMElem();l&&L.DomUtil.removeClass(l,"leaflet-pm-draggable")},_getDOMElem(){let l=null;return this._layer._path?l=this._layer._path:this._layer._renderer&&this._layer._renderer._container?l=this._layer._renderer._container:this._layer._image?l=this._layer._image:this._layer._icon&&(l=this._layer._icon),l},_overwriteEventIfItComesFromMarker(l){l.target.getLatLng&&(!l.target._radius||l.target._radius<=10)&&(l.containerPoint=this._map.mouseEventToContainerPoint(l.originalEvent),l.latlng=this._map.containerPointToLatLng(l.containerPoint))},_syncLayers(l,h){if(this.enabled())return!1;if(!h._fromLayerSync&&this._layer===h.target&&this.options.syncLayersOnDrag){h._fromLayerSync=!0;let v=[];if(L.Util.isArray(this.options.syncLayersOnDrag))v=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(w=>{w instanceof L.LayerGroup&&(v=v.concat(w.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let w in this._parentLayerGroup){let C=this._parentLayerGroup[w];C.pm&&(v=C.pm.getLayers(!0))}return L.Util.isArray(v)&&v.length>0&&(v=v.filter(w=>!!w.pm).filter(w=>!!w.pm.options.draggable),v.forEach(w=>{w!==this._layer&&w.pm[l]&&(w._snapped=!1,w.pm[l](h))})),v.length>0}return!1},_stopDOMImageDrag(l){return l.preventDefault(),!1}},Ce=be,Ae=f(ci());function Ne(l,h,v,w){return v.unproject(h.transform(v.project(l,w)),w)}function Ie(l,h,v){let w=v.getMaxZoom();if(w===1/0&&(w=v.getZoom()),L.Util.isArray(l)){let C=[];return l.forEach(j=>{C.push(Ie(j,h,v))}),C}return l instanceof L.LatLng?Ne(l,h,v,w):null}function Ve(l,h){h instanceof L.Layer&&(h=h.getLatLng());let v=l.getMaxZoom();return v===1/0&&(v=l.getZoom()),l.project(h,v)}function dt(l,h){let v=l.getMaxZoom();return v===1/0&&(v=l.getZoom()),l.unproject(h,v)}var Dt={_onRotateStart(l){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Ve(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Ve(this._map,l.target.getLatLng()),this._initialRotateLatLng=Bs(this._layer),this._startAngle=this.getAngle();let h=Bs(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,h),this._fireRotationStart(this._map,h)},_onRotate(l){let h=Ve(this._map,l.target.getLatLng()),v=this._rotationStartPoint,w=this._rotationOriginPoint,C=Math.atan2(h.y-w.y,h.x-w.x)-Math.atan2(v.y-w.y,v.x-w.x);this._layer.setLatLngs(this._rotateLayer(C,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let j=this;function J(Xe,Ue=[],vt=-1){if(vt>-1&&Ue.push(vt),L.Util.isArray(Xe[0]))Xe.forEach((Tt,Xt)=>J(Tt,Ue.slice(),Xt));else{let Tt=Ue.length>0?(0,Ae.default)(j._markers,Ue):j._markers[0];Xe.forEach((Xt,yn)=>{Tt[yn].setLatLng(Xt)})}}J(this._layer.getLatLngs());let re=Bs(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(C,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let ge=C*180/Math.PI;ge=ge<0?ge+360:ge;let Le=ge+this._startAngle;this._setAngle(Le),this._rotationLayer.pm._setAngle(Le),this._fireRotation(this._rotationLayer,ge,re),this._fireRotation(this._map,ge,re),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let l=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let h=Bs(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Bs(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,l,h),this._fireRotationEnd(this._map,l,h),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(l,h,v,w,C){let j=Ve(C,v);return this._matrix=w.clone().rotate(l,j).flip(),Ie(h,this._matrix,C)},_setAngle(l){l=l<0?l+360:l,this._angle=l%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let l=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),h=l.getCenter();return l.removeFrom(this._layer._map),h},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(ta(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let l={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),l),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Bs(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(l){let h=this.getAngle(),v=this._layer.getLatLngs(),w=l*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(w,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+l),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(w,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let C=this.getAngle()-h;C=C<0?C+360:C,this._startAngle=h,this._fireRotation(this._layer,C,v,this._layer),this._fireRotation(this._map||this._layer._map,C,v,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(l){let h=l-this.getAngle();this.rotateLayer(h)},getAngle(){return this._angle||0},setInitAngle(l){this._setAngle(l)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(l){this._rotationCenter=l,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(l)}},It=Dt,xt=L.Class.extend({includes:[Ce,Es,It,kl],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(l){L.Util.setOptions(this,l)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(l,h){h==="layerPane"?l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":h==="vertexPane"?l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":h==="markerPane"&&(l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(l,h){let v=h.target,w={layer:this._layer,marker:v,event:h},C="";return l==="move"?C="moveVertexValidation":l==="add"?C="addVertexValidation":l==="remove"&&(C="removeVertexValidation"),this.options[C]&&typeof this.options[C]=="function"&&!this.options[C](w)?(l==="move"&&(v._cancelDragEventChain=v.getLatLng()),!1):(v._cancelDragEventChain=null,!0)},_vertexValidationDrag(l){return l._cancelDragEventChain?(l._latlng=l._cancelDragEventChain,l.update(),!1):!0},_vertexValidationDragEnd(l){return l._cancelDragEventChain?(l._cancelDragEventChain=null,!1):!0}}),Yt=xt;Yt.LayerGroup=L.Class.extend({initialize(l){this._layerGroup=l,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(w=>this._initLayer(w));let h=w=>{if(w.layer._pmTempLayer)return;this._layers=this.getLayers();let C=this._layers.filter(j=>!j.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in j.pm._parentLayerGroup));C.forEach(j=>{this._initLayer(j)}),C.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(h,100,this),this),this._layerGroup.on("layerremove",w=>{this._removeLayerFromGroup(w.target)},this);let v=w=>{w.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(v,100,this),this)},enable(l,h=[]){h.length===0&&(this._layers=this.getLayers()),this._options=l,this._layers.forEach(v=>{v instanceof L.LayerGroup?h.indexOf(v._leaflet_id)===-1&&(h.push(v._leaflet_id),v.pm.enable(l,h)):v.pm.enable(l)})},disable(l=[]){l.length===0&&(this._layers=this.getLayers()),this._layers.forEach(h=>{h instanceof L.LayerGroup?l.indexOf(h._leaflet_id)===-1&&(l.push(h._leaflet_id),h.pm.disable(l)):h.pm.disable()})},enabled(l=[]){return l.length===0&&(this._layers=this.getLayers()),!!this._layers.find(h=>h instanceof L.LayerGroup?l.indexOf(h._leaflet_id)===-1?(l.push(h._leaflet_id),h.pm.enabled(l)):!1:h.pm.enabled())},toggleEdit(l,h=[]){h.length===0&&(this._layers=this.getLayers()),this._options=l,this._layers.forEach(v=>{v instanceof L.LayerGroup?h.indexOf(v._leaflet_id)===-1&&(h.push(v._leaflet_id),v.pm.toggleEdit(l,h)):v.pm.toggleEdit(l)})},_initLayer(l){let h=L.Util.stamp(this._layerGroup);l.pm._parentLayerGroup||(l.pm._parentLayerGroup={}),l.pm._parentLayerGroup[h]=this._layerGroup},_removeLayerFromGroup(l){if(l.pm&&l.pm._layerGroup){let h=L.Util.stamp(this._layerGroup);delete l.pm._layerGroup[h]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(l=>l.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var l;return this._map||((l=this._layers.find(h=>!!h._map))==null?void 0:l._map)||null},getLayers(l=!1,h=!0,v=!0,w=[]){let C=[];return l?this._layerGroup.getLayers().forEach(j=>{C.push(j),j instanceof L.LayerGroup&&w.indexOf(j._leaflet_id)===-1&&(w.push(j._leaflet_id),C=C.concat(j.pm.getLayers(!0,!0,!0,w)))}):C=this._layerGroup.getLayers(),v&&(C=C.filter(j=>!(j instanceof L.LayerGroup))),h&&(C=C.filter(j=>!!j.pm),C=C.filter(j=>!j._pmTempLayer),C=C.filter(j=>!L.PM.optIn&&!j.options.pmIgnore||L.PM.optIn&&j.options.pmIgnore===!1)),C},setOptions(l,h=[]){h.length===0&&(this._layers=this.getLayers()),this.options=l,this._layers.forEach(v=>{v.pm&&(v instanceof L.LayerGroup?h.indexOf(v._leaflet_id)===-1&&(h.push(v._leaflet_id),v.pm.setOptions(l,h)):v.pm.setOptions(l))})}}),Yt.Marker=Yt.extend({_shape:"Marker",initialize(l){this._layer=l,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(l={draggable:!0}){if(L.Util.setOptions(this,l),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(l){this.enabled()?this.disable():this.enable(l)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(l){let h=l.target;h.remove(),this._fireRemove(h),this._fireRemove(this._map,h)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let l=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,l.off("pm:drag",this._handleSnapping,this),l.on("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.on("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this),l.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let l=this._layer;l.off("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this)}});var Gt=f(ci()),pt={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let l=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=l.filter((h,v,w)=>w.indexOf(h)===v)},_removeFromCache(l){let h=this.markerCache.indexOf(l);h>-1&&this.markerCache.splice(h,1)},renderLimits(l){this.markerCache.forEach(h=>{l.includes(h)?this._markerGroup.addLayer(h):this._markerGroup.removeLayer(h)})},applyLimitFilters({latlng:l={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let h=[...this._filterClosestMarkers(l)];this.renderLimits(h)},_filterClosestMarkers(l){let h=[...this.markerCache],v=this.options.limitMarkersToCount;return v===-1?h:(h.sort((w,C)=>{let j=w._latlng.distanceTo(l),J=C._latlng.distanceTo(l);return j-J}),h.filter((w,C)=>v>-1?C<v:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(l){this._preventRenderMarkers=!!l}},yt=pt;Yt.Line=Yt.extend({includes:[yt],_shape:"Line",initialize(l){this._layer=l,this._enabled=!1},enable(l){if(L.Util.setOptions(this,l),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let l=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(l,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(l){return this.enabled()?this.disable():this.enable(l),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let l=this._map,h=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(l),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let v=w=>{if(Array.isArray(w[0]))return w.map(v,this);let C=w.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&w.map((j,J)=>{let re=this.isPolygon()?(J+1)%w.length:J+1;return this._createMiddleMarker(C[J],C[re])}),C};this._markers=v(h),this.filterMarkerGroup(),l.addLayer(this._markerGroup)},_createMarker(l){let h=new L.Marker(l,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._pmTempLayer=!0,this.options.rotate?(h.on("dragstart",this._onRotateStart,this),h.on("drag",this._onRotate,this),h.on("dragend",this._onRotateEnd,this)):(h.on("click",this._onVertexClick,this),h.on("dragstart",this._onMarkerDragStart,this),h.on("move",this._onMarkerDrag,this),h.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||h.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(h),h},_createMiddleMarker(l,h){if(!l||!h)return!1;let v=L.PM.Utils.calcMiddleLatLng(this._map,l.getLatLng(),h.getLatLng()),w=this._createMarker(v),C=L.divIcon({className:"marker-icon marker-icon-middle"});return w.setIcon(C),w.leftM=l,w.rightM=h,l._middleMarkerNext=w,h._middleMarkerPrev=w,w.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),w.on("movestart",this._onMiddleMarkerMoveStart,this),w},_onMiddleMarkerClick(l){let h=l.target;if(!this._vertexValidation("add",l))return;let v=L.divIcon({className:"marker-icon"});h.setIcon(v),this._addMarker(h,h.leftM,h.rightM)},_onMiddleMarkerMoveStart(l){let h=l.target;if(h.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",l)){h.on("move",this._onMiddleMarkerMovePrevent,this);return}h._dragging=!0,this._addMarker(h,h.leftM,h.rightM)},_onMiddleMarkerMovePrevent(l){let h=l.target;this._vertexValidationDrag(h)},_onMiddleMarkerMoveEnd(l){let h=l.target;if(h.off("move",this._onMiddleMarkerMovePrevent,this),h.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(h))return;let v=L.divIcon({className:"marker-icon"});h.setIcon(v),setTimeout(()=>{delete h._dragging},100)},_addMarker(l,h,v){l.off("movestart",this._onMiddleMarkerMoveStart,this),l.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let w=l.getLatLng(),C=this._layer._latlngs;delete l.leftM,delete l.rightM;let{indexPath:j,index:J,parentPath:re}=L.PM.Utils.findDeepMarkerIndex(this._markers,h),ge=j.length>1?(0,Gt.default)(C,re):C,Le=j.length>1?(0,Gt.default)(this._markers,re):this._markers;ge.splice(J+1,0,w),Le.splice(J+1,0,l),this._layer.setLatLngs(C),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(h,l),this._createMiddleMarker(l,v)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(l,L.PM.Utils.findDeepMarkerIndex(this._markers,l).indexPath,w),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return Ur(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(l){let h=this._layer,v,w;if(this.options.allowSelfIntersection?v=!1:(w=Ur(this._layer.toGeoJSON(15)),v=w.features.length>0),v){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return v;l?this._flashLayer():(h.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(w)}else h.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return v},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(l,h){l.forEach(v=>{Array.isArray(v)?this._updateDisabledMarkerStyle(v,h):v._icon&&(h&&!this._checkMarkerAllowedToDrag(v)?L.DomUtil.addClass(v._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(v._icon,"vertexmarker-disabled"))})},_removeMarker(l){let h=l.target;if(!this._vertexValidation("remove",l))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=Bs(this._layer,this._layer.getLatLngs()));let v=this._layer.getLatLngs(),{indexPath:w,index:C,parentPath:j}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);if(!w)return;let J=w.length>1?(0,Gt.default)(v,j):v,re=w.length>1?(0,Gt.default)(this._markers,j):this._markers,ge=j[j.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!ge&&(J.length<=2||this.isPolygon()&&J.length<=3)){this._flashLayer();return}J.splice(C,1),this._layer.setLatLngs(v),this.isPolygon()&&J.length<=2&&J.splice(0,J.length);let Le=!1;if(J.length<=1&&(J.splice(0,J.length),j.length>1&&w.length>1&&(v=ll(v)),this._layer.setLatLngs(v),this._initMarkers(),Le=!0),ro(v)||this._layer.remove(),v=ll(v),this._layer.setLatLngs(v),this._markers=ll(this._markers),!Le&&(re=w.length>1?(0,Gt.default)(this._markers,j):this._markers,h._middleMarkerPrev&&(this._markerGroup.removeLayer(h._middleMarkerPrev),this._removeFromCache(h._middleMarkerPrev)),h._middleMarkerNext&&(this._markerGroup.removeLayer(h._middleMarkerNext),this._removeFromCache(h._middleMarkerNext)),this._markerGroup.removeLayer(h),this._removeFromCache(h),re)){let Xe,Ue;if(this.isPolygon()?(Xe=(C+1)%re.length,Ue=(C+(re.length-1))%re.length):(Ue=C-1<0?void 0:C-1,Xe=C+1>=re.length?void 0:C+1),Xe!==Ue){let vt=re[Ue],Tt=re[Xe];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(vt,Tt)}re.splice(C,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(h,w),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(l){let h=this._layer.getLatLngs(),v=l.getLatLng(),{indexPath:w,index:C,parentPath:j}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);(w.length>1?(0,Gt.default)(h,j):h).splice(C,1,v),this._layer.setLatLngs(h)},_getNeighborMarkers(l){let{indexPath:h,index:v,parentPath:w}=L.PM.Utils.findDeepMarkerIndex(this._markers,l),C=h.length>1?(0,Gt.default)(this._markers,w):this._markers,j=(v+1)%C.length,J=(v+(C.length-1))%C.length,re=C[J],ge=C[j];return{prevMarker:re,nextMarker:ge}},_checkMarkerAllowedToDrag(l){let{prevMarker:h,nextMarker:v}=this._getNeighborMarkers(l),w=L.polyline([h.getLatLng(),l.getLatLng()]),C=L.polyline([l.getLatLng(),v.getLatLng()]),j=hs(this._layer.toGeoJSON(15),w.toGeoJSON(15)).features.length,J=hs(this._layer.toGeoJSON(15),C.toGeoJSON(15)).features.length;return l.getLatLng()===this._markers[0][0].getLatLng()?J+=1:l.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(j+=1),!(j<=2&&J<=2)},_onMarkerDragStart(l){let h=l.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",l))return;let{indexPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);this._fireMarkerDragStart(l,v),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Bs(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(h):this._markerAllowedToDrag=null},_onMarkerDrag(l){let h=l.target;if(!this._vertexValidationDrag(h))return;let{indexPath:v,index:w,parentPath:C}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);if(!v)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(h);let j=v.length>1?(0,Gt.default)(this._markers,C):this._markers,J=(w+1)%j.length,re=(w+(j.length-1))%j.length,ge=h.getLatLng(),Le=j[re].getLatLng(),Xe=j[J].getLatLng();if(h._middleMarkerNext){let Ue=L.PM.Utils.calcMiddleLatLng(this._map,ge,Xe);h._middleMarkerNext.setLatLng(Ue)}if(h._middleMarkerPrev){let Ue=L.PM.Utils.calcMiddleLatLng(this._map,ge,Le);h._middleMarkerPrev.setLatLng(Ue)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(l,v),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(l){let h=l.target;if(!this._vertexValidationDragEnd(h))return;let{indexPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,h),w=!this.options.allowSelfIntersection&&this.hasSelfIntersection();w&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(w=!1);let C=!this.options.allowSelfIntersection&&w;if(this._fireMarkerDragEnd(l,v,C),C){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(l,v);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(l){let h=l.target;if(h._dragging)return;let{indexPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);this._fireVertexClick(l,v)}}),Yt.Polygon=Yt.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(l){let{prevMarker:h,nextMarker:v}=this._getNeighborMarkers(l),w=L.polyline([h.getLatLng(),l.getLatLng()]),C=L.polyline([l.getLatLng(),v.getLatLng()]),j=hs(this._layer.toGeoJSON(15),w.toGeoJSON(15)).features.length,J=hs(this._layer.toGeoJSON(15),C.toGeoJSON(15)).features.length;return!(j<=2&&J<=2)}}),Yt.Rectangle=Yt.Polygon.extend({_shape:"Rectangle",_initMarkers(){let l=this._map,h=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,l.addLayer(this._markerGroup),this._markers=[],this._markers[0]=h.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((v,w)=>{let C=this._cornerMarkers.find(j=>j._index===w);C&&C.setLatLng(v)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(l,h){let v=new L.Marker(l,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(v,"vertexPane"),v._origLatLng=l,v._index=h,v._pmTempLayer=!0,v.on("click",this._onVertexClick,this),this._markerGroup.addLayer(v),v},_addMarkerEvents(){this._markers[0].forEach(l=>{l.on("dragstart",this._onMarkerDragStart,this),l.on("drag",this._onMarkerDrag,this),l.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||l.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(l){if(!this._vertexValidation("move",l))return;let h=l.target,v=this._cornerMarkers;h._oppositeCornerLatLng=v.find(C=>C._index===(h._index+2)%4).getLatLng(),h._snapped=!1;let{indexPath:w}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);this._fireMarkerDragStart(l,w)},_onMarkerDrag(l){let h=l.target;if(!this._vertexValidationDrag(h)||h._index===void 0)return;this._adjustRectangleForMarkerMove(h);let{indexPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);this._fireMarkerDrag(l,v),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(l){let h=l.target;if(!this._vertexValidationDragEnd(h))return;this._cornerMarkers.forEach(w=>{delete w._oppositeCornerLatLng});let{indexPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);this._fireMarkerDragEnd(l,v),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(l){L.extend(l._origLatLng,l._latlng);let h=L.PM.Utils._getRotatedRectangle(l.getLatLng(),l._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(h),this._adjustAllMarkers(l),this._layer.redraw()},_adjustAllMarkers(l){let h=this._layer.getLatLngs()[0];if(h&&h.length!==4&&h.length>0)h.forEach((v,w)=>{this._cornerMarkers[w].setLatLng(v)}),this._cornerMarkers.slice(h.length).forEach(v=>{v.setLatLng(h[0])});else if(!h||!h.length)console.error("The layer has no LatLngs");else{let v=h.findIndex(w=>l.getLatLng().equals(w));v>-1?(this._cornerMarkers[(l._index+1)%4].setLatLng(h[(v+1)%4]),this._cornerMarkers[(l._index+2)%4].setLatLng(h[(v+2)%4]),this._cornerMarkers[(l._index+3)%4].setLatLng(h[(v+3)%4])):this._cornerMarkers.forEach(w=>{w.setLatLng(h[w._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(ta(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let l=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(l[0],l[2],this.getAngle(),this._map||this)}}),Yt.CircleMarker=Yt.extend({_shape:"CircleMarker",initialize(l){this._layer=l,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(l={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,l),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(l){this.enabled()?this.disable():this.enable(l)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let l=this._map;this._helperLayers&&(this._helperLayers.removeFrom(l),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(l);let h=this._layer.getLatLng(),v=this._layer._radius,w=this._getLatLngOnCircle(h,v);this._centerMarker=this._createCenterMarker(h),this._outerMarker=this._createOuterMarker(w),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(l,h){let v=this._map.project(l),w=L.point(v.x+h,v.y);return this._map.unproject(w)},_createHintLine(l,h){let v=l.getLatLng(),w=h.getLatLng();this._hintline=L.polyline([v,w],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(l){let h=this._createMarker(l);return this.options.draggable?(L.DomUtil.addClass(h._icon,"leaflet-pm-draggable"),h.on("move",this._moveCircle,this)):h.dragging.disable(),h},_createOuterMarker(l){let h=this._createMarker(l);return h.on("drag",this._resizeCircle,this),h},_createMarker(l){let h=new L.Marker(l,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._origLatLng=l,h._pmTempLayer=!0,h.on("dragstart",this._onMarkerDragStart,this),h.on("drag",this._onMarkerDrag,this),h.on("dragend",this._onMarkerDragEnd,this),h.on("click",this._onVertexClick,this),this._helperLayers.addLayer(h),h},_moveCircle(l){if(l.target._cancelDragEventChain)return;let h=this._centerMarker.getLatLng();this._layer.setLatLng(h);let v=this._layer._radius,w=this._getLatLngOnCircle(h,v);this._outerMarker._latlng=w,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let l=this._layer.getLatLng(),h=this._layer._radius,v=this._getLatLngOnCircle(l,h);this._outerMarker.setLatLng(v),this._centerMarker.setLatLng(l),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let l=this._centerMarker.getLatLng(),h=this._outerMarker.getLatLng(),v=this._distanceCalculation(l,h);this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(v),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let l=this._centerMarker.getLatLng(),h=this._outerMarker.getLatLng();this._hintline.setLatLngs([l,h])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(l){this._vertexValidation("move",l)&&this._fireMarkerDragStart(l)},_onMarkerDrag(l){let h=l.target;h instanceof L.Marker&&!this._vertexValidationDrag(h)||this._fireMarkerDrag(l)},_onMarkerDragEnd(l){this._extedingMarkerDragEnd();let h=l.target;this._vertexValidationDragEnd(h)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(l))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let l=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,l.off("pm:drag",this._handleSnapping,this),l.on("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.on("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this),l.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let l=this._layer;l.off("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let l=this._layer._map||this._map;if(l){let h=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),l,this._layer.getLatLng()),v=L.circle(this._layer.getLatLng(),this._layer.options);v.setRadius(h);let w=l&&l.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(v,200,!w).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(v,200,!w),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let l=this._centerMarker.getLatLng(),h=this._outerMarker.getLatLng(),v=this._distanceCalculation(l,h);return this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?h=Tl(this._map,l,h,this._getMinDistanceInMeter(l)):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]&&(h=Tl(this._map,l,h,this._getMaxDistanceInMeter(l))),h},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let l=this._centerMarker.getLatLng(),h=this._outerMarker.getLatLng(),v=this._distanceCalculation(l,h);this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(l,h){return this._map.project(l).distanceTo(this._map.project(h))},_getMinDistanceInMeter(l){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,l)},_getMaxDistanceInMeter(l){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,l)},_onVertexClick(l){l.target._dragging||this._fireVertexClick(l,void 0)}}),Yt.Circle=Yt.CircleMarker.extend({_shape:"Circle",initialize(l){this._layer=l,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(l){L.PM.Edit.CircleMarker.prototype.enable.call(this,l||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let l=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(l,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let l=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!l).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!l),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(l,h){return this._map.distance(l,h)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(l){l.target._dragging||this._fireVertexClick(l,void 0)}}),Yt.ImageOverlay=Yt.extend({_shape:"ImageOverlay",initialize(l){this._layer=l,this._enabled=!1},toggleEdit(l){this.enabled()?this.disable():this.enable(l)},enabled(){return this._enabled},enable(l={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,l),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let l=this._layer.getBounds(),h=l.getNorthWest(),v=l.getNorthEast(),w=l.getSouthEast(),C=l.getSouthWest();return[h,v,w,C]}}),Yt.Text=Yt.extend({_shape:"Text",initialize(l){this._layer=l,this._enabled=!1},enable(l){if(L.Util.setOptions(this,l),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let l=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),l.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(l){this.enabled()?this.disable():this.enable(l)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let l=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,l.off("pm:drag",this._handleSnapping,this),l.on("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.on("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this),l.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let l=this._layer;l.off("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let l=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,h=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${l}px`,this.textArea.style.width=`${h}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(l){l.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(l={}){let h=this._hasFocus;this._hasFocus=l.type==="focus",!h!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(l){l&&(this.textArea.value=l),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let h=this.options.className.split(" ");this.textArea.classList.add(...h)}let l=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(l),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(l=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),l===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(l){l.preventDefault()}});var tn=function(l,h,v,w,C,j){this._matrix=[l,h,v,w,C,j]};tn.init=()=>new L.PM.Matrix(1,0,0,1,0,0),tn.prototype={transform(l){return this._transform(l.clone())},_transform(l){let h=this._matrix,{x:v,y:w}=l;return l.x=h[0]*v+h[1]*w+h[4],l.y=h[2]*v+h[3]*w+h[5],l},untransform(l){let h=this._matrix;return new L.Point((l.x/h[0]-h[4])/h[0],(l.y/h[2]-h[5])/h[2])},clone(){let l=this._matrix;return new L.PM.Matrix(l[0],l[1],l[2],l[3],l[4],l[5])},translate(l){if(l===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let h,v;return typeof l=="number"?(h=l,v=l):(h=l.x,v=l.y),this._add(1,0,0,1,h,v)},scale(l,h){if(l===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let v,w;return h=h||L.point(0,0),typeof l=="number"?(v=l,w=l):(v=l.x,w=l.y),this._add(v,0,0,w,h.x,h.y)._add(1,0,0,1,-h.x,-h.y)},rotate(l,h){let v=Math.cos(l),w=Math.sin(l);return h=h||new L.Point(0,0),this._add(v,w,-w,v,h.x,h.y)._add(1,0,0,1,-h.x,-h.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(l,h,v,w,C,j){let J=[[],[],[]],re=this._matrix,ge=[[re[0],re[2],re[4]],[re[1],re[3],re[5]],[0,0,1]],Le=[[l,v,C],[h,w,j],[0,0,1]],Xe;l&&l instanceof L.PM.Matrix&&(re=l._matrix,Le=[[re[0],re[2],re[4]],[re[1],re[3],re[5]],[0,0,1]]);for(let Ue=0;Ue<3;Ue+=1)for(let vt=0;vt<3;vt+=1){Xe=0;for(let Tt=0;Tt<3;Tt+=1)Xe+=ge[Ue][Tt]*Le[Tt][vt];J[Ue][vt]=Xe}return this._matrix=[J[0][0],J[1][0],J[0][1],J[1][1],J[0][2],J[1][2]],this}};var hn=tn,rn={calcMiddleLatLng(l,h,v){let w=l.project(h),C=l.project(v);return l.unproject(w._add(C)._divideBy(2))},findLayers(l){let h=[];return l.eachLayer(v=>{(v instanceof L.Polyline||v instanceof L.Marker||v instanceof L.Circle||v instanceof L.CircleMarker||v instanceof L.ImageOverlay)&&h.push(v)}),h=h.filter(v=>!!v.pm),h=h.filter(v=>!v._pmTempLayer),h=h.filter(v=>!L.PM.optIn&&!v.options.pmIgnore||L.PM.optIn&&v.options.pmIgnore===!1),h},circleToPolygon(l,h=60,v=!0){let w=l.getLatLng(),C=l.getRadius(),j=Ui(w,C,h,0,v),J=[];for(let re=0;re<j.length;re+=1){let ge=[j[re].lat,j[re].lng];J.push(ge)}return L.polygon(J,l.options)},disablePopup(l){l.getPopup()&&(l._tempPopupCopy=l.getPopup(),l.unbindPopup())},enablePopup(l){l._tempPopupCopy&&(l.bindPopup(l._tempPopupCopy),delete l._tempPopupCopy)},_fireEvent(l,h,v,w=!1){l.fire(h,v,w);let{groups:C}=this.getAllParentGroups(l);C.forEach(j=>{j.fire(h,v,w)})},getAllParentGroups(l){let h=[],v=[],w=C=>{for(let j in C._eventParents)if(h.indexOf(j)===-1){h.push(j);let J=C._eventParents[j];v.push(J),w(J)}};return!l._pmLastGroupFetch||!l._pmLastGroupFetch.time||new Date().getTime()-l._pmLastGroupFetch.time>1e3?(w(l),l._pmLastGroupFetch={time:new Date().getTime(),groups:v,groupIds:h},{groupIds:h,groups:v}):{groups:l._pmLastGroupFetch.groups,groupIds:l._pmLastGroupFetch.groupIds}},createGeodesicPolygon:Ui,getTranslation:or,findDeepCoordIndex(l,h,v=!0){let w,C=J=>(re,ge)=>{let Le=J.concat(ge);if(v){if(re.lat&&re.lat===h.lat&&re.lng===h.lng)return w=Le,!0}else if(re.lat&&L.latLng(re).equals(h))return w=Le,!0;return Array.isArray(re)&&re.some(C(Le))};l.some(C([]));let j={};return w&&(j={indexPath:w,index:w[w.length-1],parentPath:w.slice(0,w.length-1)}),j},findDeepMarkerIndex(l,h){let v,w=j=>(J,re)=>{let ge=j.concat(re);return J._leaflet_id===h._leaflet_id?(v=ge,!0):Array.isArray(J)&&J.some(w(ge))};l.some(w([]));let C={};return v&&(C={indexPath:v,index:v[v.length-1],parentPath:v.slice(0,v.length-1)}),C},_getIndexFromSegment(l,h){if(h&&h.length===2){let v=this.findDeepCoordIndex(l,h[0]),w=this.findDeepCoordIndex(l,h[1]),C=Math.max(v.index,w.index);return(v.index===0||w.index===0)&&C!==1&&(C+=1),{indexA:v,indexB:w,newIndex:C,indexPath:v.indexPath,parentPath:v.parentPath}}return null},_getRotatedRectangle(l,h,v,w){let C=Ve(w,l),j=Ve(w,h),J=v*Math.PI/180,re=Math.cos(J),ge=Math.sin(J),Le=(j.x-C.x)*re+(j.y-C.y)*ge,Xe=(j.y-C.y)*re-(j.x-C.x)*ge,Ue=Le*re+C.x,vt=Le*ge+C.y,Tt=-Xe*ge+C.x,Xt=Xe*re+C.y,yn=dt(w,C),wn=dt(w,{x:Ue,y:vt}),ur=dt(w,j),Je=dt(w,{x:Tt,y:Xt});return[yn,wn,ur,Je]},pxRadiusToMeterRadius(l,h,v){let w=h.project(v),C=L.point(w.x+l,w.y);return h.distance(h.unproject(C),v)}},kn=rn;L.PM=L.PM||{version:Vs.version,Map:Mo,Toolbar:ul,Draw:io,Edit:Yt,Utils:kn,Matrix:hn,activeLang:"en",optIn:!1,initialize(l){this.addInitHooks(l)},setOptIn(l){this.optIn=!!l},addInitHooks(){function l(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(l);function h(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(h);function v(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(v);function w(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(w);function C(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(C);function j(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(j);function J(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(J);function re(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(re);function ge(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(ge)},reInitLayer(l){l instanceof L.LayerGroup&&l.eachLayer(h=>{this.reInitLayer(h)}),l.pm||L.PM.optIn&&l.options.pmIgnore!==!1||l.options.pmIgnore||(l instanceof L.Map?l.pm=new L.PM.Map(l):l instanceof L.Marker?l.options.textMarker?(l.pm=new L.PM.Edit.Text(l),l.pm._initTextMarker(),l.pm._createTextMarker(!1)):l.pm=new L.PM.Edit.Marker(l):l instanceof L.Circle?l.pm=new L.PM.Edit.Circle(l):l instanceof L.CircleMarker?l.pm=new L.PM.Edit.CircleMarker(l):l instanceof L.Rectangle?l.pm=new L.PM.Edit.Rectangle(l):l instanceof L.Polygon?l.pm=new L.PM.Edit.Polygon(l):l instanceof L.Polyline?l.pm=new L.PM.Edit.Line(l):l instanceof L.LayerGroup?l.pm=new L.PM.Edit.LayerGroup(l):l instanceof L.ImageOverlay&&(l.pm=new L.PM.Edit.ImageOverlay(l)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(l){let h=this._map.mouseEventToLayerPoint(l),v,w;for(let C=this._drawFirst;C;C=C.next)v=C.layer,v.options.interactive&&v._containsPoint(h)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(v))&&(w=v);w&&(L.DomEvent.fakeStop(l),this._fireEvent([w],l))}}),L.PM.initialize()})();class jh extends Vn.Circle{constructor(t,r){const i=r.radius||10;super(t,i,r);Ht(this,"properties");Ht(this,"angleCache",new Map);Ht(this,"lastCenter");Ht(this,"lastCenterCosLat");Ht(this,"_pendingNameUpdate",!1);Ht(this,"_nameUpdateTimeout",null);dn.measure("Circle.constructor.init",()=>{this.properties={type:"Circle",style:{name:r.name||""}},requestAnimationFrame(()=>{this.updateProperties()}),this.on("add",()=>{requestAnimationFrame(()=>{this.updateProperties()})})},"Circle")}updateProperties(){dn.measure("Circle.updateProperties",()=>{var u,f,d,g;const t=this.getRadius(),r=this.getLatLng(),i=((f=(u=this.properties)==null?void 0:u.style)==null?void 0:f.name)||"",s=((d=this.properties)==null?void 0:d.style)||{},o={type:"Circle",radius:t,diameter:t*2,surface:Math.PI*Math.pow(t,2),perimeter:2*Math.PI*t,center:{lat:r.lat,lng:r.lng},style:{...s,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((g=this.options)==null?void 0:g.dashArray)||"",name:i}};JSON.stringify(this.properties)!==JSON.stringify(o)&&(this.properties=o,this.fire("properties:updated",{shape:this,properties:this.properties}))},"Circle")}setName(t){dn.measure("Circle.setName",()=>{var r,i;((i=(r=this.properties)==null?void 0:r.style)==null?void 0:i.name)!==t&&(this.properties.style||(this.properties.style={}),this.properties.style.name=t,!this._pendingNameUpdate&&(this._pendingNameUpdate=!0,this._nameUpdateTimeout&&clearTimeout(this._nameUpdateTimeout),this._nameUpdateTimeout=setTimeout(()=>{this._pendingNameUpdate=!1,this._nameUpdateTimeout=null,this.fire("properties:updated",{shape:this,properties:this.properties})},100)))},"Circle")}getName(){return dn.measure("Circle.getName",()=>{var t,r;return((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||""},"Circle")}setRadius(t){return dn.measure("Circle.setRadius",()=>(super.setRadius(t),this.updateProperties(),this),"Circle")}setLatLng(t){return dn.measure("Circle.setLatLng",()=>(super.setLatLng(t),this.updateProperties(),this),"Circle")}calculatePointOnCircle(t){return dn.measure("Circle.calculatePointOnCircle",()=>{const r=this.getLatLng(),i=this.getRadius();let s=this.angleCache.get(t);if(!s){const o=t*Math.PI/180;s={sin:Math.sin(o),cos:Math.cos(o)},this.angleCache.set(t,s)}return(!this.lastCenter||!this.lastCenter.equals(r))&&(this.lastCenter=r,this.lastCenterCosLat=Math.cos(r.lat*Math.PI/180)),Vn.latLng(r.lat+i/111319.9*s.sin,r.lng+i/(111319.9*this.lastCenterCosLat)*s.cos)},"Circle")}getCardinalPoints(){return dn.measure("Circle.getCardinalPoints",()=>[0,45,90,135,180,225,270,315].map(t=>this.calculatePointOnCircle(t)),"Circle")}calculateAngleFromPoint(t){return dn.measure("Circle.calculateAngleFromPoint",()=>{const r=this.getLatLng(),i=t.lng-r.lng,s=t.lat-r.lat;let o=Math.atan2(s,i)*180/Math.PI;return o<0&&(o+=360),o},"Circle")}resizeFromControlPoint(t){dn.measure("Circle.resizeFromControlPoint",()=>{const i=this.getLatLng().distanceTo(t);i>0&&super.setRadius(i)},"Circle")}clearCache(){this.angleCache.clear(),this.lastCenter=void 0,this.lastCenterCosLat=void 0}}const _0=(e,n)=>{if(!e||typeof e!="string"||!e.startsWith("#"))return`rgba(0, 0, 0, ${n})`;const t=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16);return`rgba(${t}, ${r}, ${i}, ${n})`},bb=(e,n)=>{e.style.fontSize=n.fontSize,e.style.color=n.color,e.style.backgroundColor=_0(n.backgroundColor,n.backgroundOpacity),n.hasBorder?e.style.border=`${n.borderWidth} solid ${_0(n.borderColor,n.borderOpacity)}`:e.style.border="none",e.style.padding=n.padding,e.style.borderRadius=n.borderRadius},yl=e=>{document.querySelectorAll(".drawing-help-message").forEach(r=>r.remove());const t=Ft.DomUtil.create("div","drawing-help-message");return t.innerHTML=e,t.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(t),t};function wb(e,n,t){const r=156543.03392*Math.cos(n*Math.PI/180)/Math.pow(2,t);return e/r}const qi=(e,n="m",t="")=>{let r,i;return n==="m"?e>=1e4?(r=(e/1e4).toFixed(2),i="ha"):(r=e.toFixed(2),i="m"):n==="m"?e>=1e3?(r=(e/1e3).toFixed(2),i="km"):(r=e.toFixed(2),i="m"):(r=e.toFixed(2),i=n),t?`${t}: ${r} ${i}`:`${r} ${i}`},FR=e=>({...e,clientX:e.clientX,clientY:e.clientY,button:e.button||0,buttons:e.buttons||0,altKey:e.altKey||!1}),jR=(e,n)=>{let t;return function(...r){window.clearTimeout(t),t=window.setTimeout(()=>e.apply(this,r),n)}},Hf=(e,n)=>{let t=0;return function(...r){const i=Date.now();if(!(i-t<n))return t=i,e.apply(this,r)}};function zR(){const e=jt(null),n=jt(null),t=jt(null),r=jt(null),i=jt(""),s=jt(null),o=jt(!1),u=jt(null);window.addEventListener("clearControlPoints",()=>{s.value=null,t.value&&t.value.clearLayers(),r.value&&r.value.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(q=>q.remove()),document.querySelectorAll(".drawing-help-message").forEach(q=>q.remove())}),mc(()=>{window.removeEventListener("clearControlPoints",()=>{}),e.value&&(e.value.remove(),e.value=null)});const f=(q,ee="Double-cliquez pour diter")=>{const ue={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0,rotation:0,physicalSize:2},le=(Ze,qe)=>{var et;const tt=((et=e.value)==null?void 0:et.getZoom())||14,ze=q.lat,Qe=wb(qe.physicalSize,ze,tt);return`<div class="text-container" style="width:${Qe}px;height:${Qe}px;transform:rotate(${qe.rotation}deg)">
        <div class="text-annotation" style="font-size:${Qe*.2}px;color:${qe.color};background-color:${_0(qe.backgroundColor,qe.backgroundOpacity)};border:${qe.hasBorder?qe.borderWidth+" solid "+_0(qe.borderColor,qe.borderOpacity):"none"};padding:${qe.padding};border-radius:${qe.borderRadius}">${Ze}</div>
        <div class="text-controls"><div class="control-button rotate"></div><div class="control-button move"></div></div>
      </div>`},pe=()=>{if(!e.value)return;const Ze=D.getIcon(),qe={html:le(D.properties.text,D.properties.style),className:Ze.options.className};D.setIcon(Ft.divIcon(qe))},Z=Ft.divIcon({html:le(ee,ue),className:"text-container",iconSize:[40,40],iconAnchor:[20,20]}),D=Ft.marker(q,{icon:Z,draggable:!1,pmIgnore:!0});D.properties={type:"text",text:ee,style:{...ue}},e.value&&(e.value.on("zoomend",pe),D.on("remove",()=>{var Ze;(Ze=e.value)==null||Ze.off("zoomend",pe)})),pe();let ke=!1,Me=!1,Ge=0,ce=0;const ne=Ze=>{if(!e.value)return;const qe=Ze.target;if(qe.classList.contains("rotate")){ke=!0;const tt=D.getLatLng(),ze=e.value.mouseEventToLatLng(Ze);Ge=Math.atan2(ze.lat-tt.lat,ze.lng-tt.lng)*180/Math.PI,ce=D.properties.style.rotation||0}else qe.classList.contains("move")&&(Me=!0);document.addEventListener("mousemove",ye),document.addEventListener("mouseup",de)},ye=Ze=>{if(!(!Me||!e.value)){if(ke){const qe=D.getLatLng(),tt=e.value.mouseEventToLatLng(Ze),ze=Math.atan2(tt.lat-qe.lat,tt.lng-qe.lng)*180/Math.PI,Qe=(ce+(ze-Ge))%360;D.properties.style.rotation=Qe;const et=D.getIcon(),bt={html:le(D.properties.text,D.properties.style),className:et.options.className};D.setIcon(Ft.divIcon(bt))}else if(Me){const qe=FR(Ze),tt=e.value.mouseEventToLatLng(qe);D.setLatLng(tt)}}},de=()=>{ke=!1,Me=!1,document.removeEventListener("mousemove",ye),document.removeEventListener("mouseup",de)};return D.on("add",()=>{const Ze=D.getElement();Ze&&Ze.querySelectorAll(".control-button").forEach(tt=>{tt.addEventListener("mousedown",ne)})}),D.on("remove",()=>{const Ze=D.getElement();Ze&&Ze.querySelectorAll(".control-button").forEach(tt=>{tt.removeEventListener("mousedown",ne)})}),D.on("dblclick",Ze=>{var bt;Ft.DomEvent.stopPropagation(Ze);const qe=(bt=D.getElement())==null?void 0:bt.querySelector(".text-annotation");if(!qe)return;qe.contentEditable="true",qe.focus(),qe.classList.add("editing");const tt=window.getSelection(),ze=document.createRange();ze.selectNodeContents(qe),tt==null||tt.removeAllRanges(),tt==null||tt.addRange(ze);const Qe=()=>{qe.contentEditable="false",qe.classList.remove("editing");const Pt=qe.innerText.trim();if(Pt){D.properties.text=Pt;const At=D.getIcon(),Vt={html:le(Pt,D.properties.style),className:At.options.className};D.setIcon(Ft.divIcon(Vt))}qe.removeEventListener("blur",Qe),qe.removeEventListener("keydown",et)},et=Pt=>{Pt.key==="Enter"&&!Pt.shiftKey&&(Pt.preventDefault(),Qe())};qe.addEventListener("blur",Qe),qe.addEventListener("keydown",et)}),D},d=(q,ee)=>{const ue=Ft.DomUtil.create("div","measure-tooltip");if(ue.innerHTML=ee,ue.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(ue),e.value){const le=e.value.latLngToContainerPoint(q);ue.style.left=`${le.x+10}px`,ue.style.top=`${le.y-25}px`}return ue},g=Hf((q,ee,ue)=>{if(q&&(q.innerHTML=ue,e.value)){const le=e.value.latLngToContainerPoint(ee);q.style.left=`${le.x+10}px`,q.style.top=`${le.y-25}px`}},100),y=(q,ee,ue)=>{q.on("mouseover",()=>{const le=d(q.getLatLng(),ue());q.measureDiv=le}),q.on("mousemove",le=>{q.measureDiv&&e.value&&g(q.measureDiv,le.latlng,ue())}),q.on("mouseout",()=>{q.measureDiv&&(q.measureDiv.remove(),q.measureDiv=void 0)})};let x=[];const _=()=>{var q;x.cleanup&&x.cleanup(),t.value&&t.value.clearLayers(),x=[],(q=r.value)==null||q.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(ee=>ee.remove()),n.value&&n.value.getLayers().forEach(ee=>{ee instanceof pa&&ee.clearHelperPoints()})},M=(q,ee="#2563EB")=>{const ue=Ft.circleMarker(q,{radius:6,color:ee,fillColor:ee,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return t.value&&t.value.addLayer(ue),ue},k=(q,ee)=>{var le,pe,Z,D,ke,Me;console.log("Input layer:",{type:ee,instanceof:{Circle:q instanceof Ft.Circle,Rectangle:q instanceof Ft.Rectangle,Polygon:q instanceof Ft.Polygon,Polyline:q instanceof Ft.Polyline,ElevationLine:q instanceof Ef,Line:q instanceof Ns},options:q.options});const ue={type:ee,style:q.options||{}};try{if(q instanceof Ft.Circle){const Ge=q.getRadius();ue.radius=Ge,ue.diameter=Ge*2,ue.surface=Math.PI*Math.pow(Ge,2),ue.perimeter=2*Math.PI*Ge,ue.center=q.getLatLng()}else if(q instanceof Ft.Rectangle){const Ge=q.getBounds(),ce=Ge.getNorthEast(),ne=Ge.getSouthWest(),ye=hu([[ne.lng,ne.lat],[ce.lng,ne.lat]]),de=hu([[ne.lng,ne.lat],[ne.lng,ce.lat]]),Ze=Gf(ye,{units:"meters"}),qe=Gf(de,{units:"meters"});ue.width=Ze,ue.height=qe,ue.surface=Ze*qe,ue.perimeter=2*(Ze+qe),ue.dimensions={width:Ze,height:qe}}else if(q instanceof Ft.Polygon)try{const ce=q.getLatLngs()[0].map(ye=>[ye.lng,ye.lat]);ce.push(ce[0]);const ne=fu([ce]);ue.surface=oc(ne),ue.perimeter=Gf(hu(ce),{units:"meters"})}catch(Ge){console.error("Erreur lors du calcul des proprits du polygone",Ge)}else if(q instanceof Ft.Polyline&&!(q instanceof Ft.Polygon))try{const Ge=q.getLatLngs();let ce=0;for(let ne=1;ne<Ge.length;ne++)ce+=Ge[ne].distanceTo(Ge[ne-1]);ue.length=ce}catch(Ge){console.error("Erreur lors du calcul de la longueur de la ligne",Ge)}ue.style={...ue.style,color:((le=q.options)==null?void 0:le.color)||"#3388ff",weight:((pe=q.options)==null?void 0:pe.weight)||3,opacity:((Z=q.options)==null?void 0:Z.opacity)||1,fillColor:((D=q.options)==null?void 0:D.fillColor)||"#3388ff",fillOpacity:((ke=q.options)==null?void 0:ke.fillOpacity)||.2,dashArray:((Me=q.options)==null?void 0:Me.dashArray)||""}}catch(Ge){console.error("Error calculating shape properties:",Ge)}return ue},N=(q,ee=2)=>{var D;if(!e.value){console.warn("Map is not available for text size update");return}const ue=e.value.getZoom(),le=q.getLatLng().lat,pe=wb(ee,le,ue),Z=(D=q.getElement())==null?void 0:D.querySelector(".text-annotation");Z&&(q.properties.style.fontSize=`${pe}px`,q.properties.physicalWidth=ee,q.properties.physicalHeight=ee,bb(Z,q.properties.style))},T=(q,ee,ue)=>{const le=Ft.map(q).setView(ee,ue);e.value=le,Ft.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:5}).addTo(le);const pe=new Ft.FeatureGroup;return pe.addTo(le),n.value=pe,t.value=Ft.featureGroup().addTo(le),r.value=Ft.featureGroup().addTo(le),le.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:pe,snapLayers:[pe,r.value],templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),le.on("pm:drawstart",Z=>{o.value=!0,Z.shape==="Circle"&&i.value==="Semicircle"&&(le.getContainer().style.cursor="crosshair")}),le.on("pm:drawend",()=>{o.value=!1,le.getContainer().style.cursor="",s.value&&yl("Cliquez sur la forme pour afficher les points de contrle")}),le.on("pm:create",Te),pe.on("click",Z=>{var ke,Me,Ge,ce,ne,ye,de,Ze,qe,tt,ze,Qe,et,bt,Pt;Ft.DomEvent.stopPropagation(Z);const D=Z.layer;if(D.name&&!((ke=D.properties)!=null&&ke.name)?(D.properties||(D.properties={}),D.properties.name=D.name):(Me=D.properties)!=null&&Me.name&&!D.name&&(D.name=D.properties.name),console.log("[featureGroup click] tat du nom:",{directName:D.name,propertiesName:(Ge=D.properties)==null?void 0:Ge.name,fullProperties:D.properties}),(ce=r.value)==null||ce.clearLayers(),_(),s.value=D,D instanceof jh)$(D);else if(D instanceof Ft.Circle){console.log("[useMapDrawing] Cration du cercle personnalis:",{propertyDescriptor:Object.getOwnPropertyDescriptor(D,"name"),directName:D.name,propertiesName:(ne=D.properties)==null?void 0:ne.name,styleNameBeforeTransfer:(de=(ye=D.properties)==null?void 0:ye.style)==null?void 0:de.name,nameIsEnumerable:Object.keys(D).includes("name"),allProperties:Object.keys(D.properties||{}),_dbId:D._dbId});const At=D.name,Vt=(Ze=D.properties)==null?void 0:Ze.name,Qt=(tt=(qe=D.properties)==null?void 0:qe.style)==null?void 0:tt.name,mn=D._dbId,Ye=new jh(D.getLatLng(),{...D.options,radius:D.getRadius()});D.properties?Ye.properties={...D.properties||{}}:Ye.updateProperties();const ot=At||Vt||Qt;ot&&(Ye.properties.name=ot,Ye.properties.style||(Ye.properties.style={}),Ye.properties.style.name=ot,Ye.name=ot),mn&&(Ye._dbId=mn),console.log("[useMapDrawing] Cercle aprs conversion:",{name:Ye.name,propertiesName:Ye.properties.name,stylePropertyName:(ze=Ye.properties.style)==null?void 0:ze.name,allProperties:Object.keys(Ye.properties||{})}),(Qe=n.value)==null||Qe.removeLayer(D),(et=n.value)==null||et.addLayer(Ye),s.value=Ye,$(Ye)}else if(D instanceof pa)X(D);else if(D instanceof Ft.Rectangle){const At=new pa(D.getBounds(),{...D.options});At.updateProperties(),(bt=n.value)==null||bt.removeLayer(D),(Pt=n.value)==null||Pt.addLayer(At),s.value=At,X(At)}else D instanceof Ft.Polygon?O(D):D instanceof Ns||D instanceof Ft.Polyline?R(D):D instanceof mf&&B(D)}),le.on("pm:edit",Z=>{var ke,Me,Ge;console.log("[pm:edit] Dbut",{layer:Z.layer,currentProperties:Z.layer.properties});const D=Z.layer;if(D){const ce=((ke=D.properties)==null?void 0:ke.type)||"unknown";if(me(D,ce),console.log("[pm:edit] Aprs updateLayerProperties",{updatedProperties:D.properties,selectedShape:s.value}),D instanceof jh)$(D);else if(D instanceof pa)X(D);else if(D instanceof Ft.Rectangle){const ne=new pa(D.getBounds(),{...D.options});ne.updateProperties(),(Me=n.value)==null||Me.removeLayer(D),(Ge=n.value)==null||Ge.addLayer(ne),s.value=ne,X(ne)}else D instanceof Ft.Polygon?O(D):D instanceof Ns?(D.updateProperties(),me(D,"Line"),R(D)):D instanceof Ft.Polyline?R(D):D instanceof mf&&(D.updateProperties(),B(D))}}),le.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(Z=>Z.remove()),yl("Dplacez la forme  l'endroit souhait")}),le.on("pm:dragend",Z=>{var ke,Me,Ge;console.log("[pm:dragend] Dbut",{layer:Z.layer,currentProperties:Z.layer.properties});const D=Z.layer;if(D){const ce=((ke=D.properties)==null?void 0:ke.type)||"unknown";if(D instanceof Ft.Rectangle&&!(D instanceof pa)){const ne=new pa(D.getBounds(),{...D.options});ne.updateProperties(),(Me=n.value)==null||Me.removeLayer(D),(Ge=n.value)==null||Ge.addLayer(ne),s.value=ne,X(ne)}else D instanceof Ns?(D.updateProperties(),me(D,"Line"),R(D)):me(D,ce);console.log("[pm:dragend] Aprs updateLayerProperties",{updatedProperties:D.properties,selectedShape:s.value})}setTimeout(()=>{yl("Cliquez sur la forme pour afficher les points de contrle")},100)}),le.on("pm:remove",()=>{var Z;(Z=document.querySelector(".drawing-help-message"))==null||Z.remove()}),le.on("pm:select",()=>{document.querySelectorAll(".drawing-help-message").forEach(Z=>Z.remove()),yl("Utilisez les points de contrle pour modifier la forme")}),le.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(Z=>Z.remove())}),le.on("zoomstart",()=>{s.value&&(_(),s.value=null,document.querySelectorAll(".drawing-help-message").forEach(Z=>Z.remove()))}),le},F=()=>{if(!(!e.value||!n.value||!n.value.getLayers().length))try{const q=n.value.getBounds();if(q.isValid()){const ee={zoomAnimation:e.value.options.zoomAnimation,fadeAnimation:e.value.options.fadeAnimation,markerZoomAnimation:e.value.options.markerZoomAnimation};e.value.options.zoomAnimation=!1,e.value.options.fadeAnimation=!1,e.value.options.markerZoomAnimation=!1,e.value.fitBounds(q,{padding:[50,50],maxZoom:18,animate:!1,duration:0,noMoveStart:!0}),e.value.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{try{e.value.options.fadeAnimation=ee.fadeAnimation,setTimeout(()=>{try{e.value.options.zoomAnimation=ee.zoomAnimation,e.value.options.markerZoomAnimation=ee.markerZoomAnimation}catch(ue){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",ue)}},500)}catch(ue){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",ue)}},500)}}catch(q){if(console.warn("[useMapDrawing] Error adjusting view:",q),e.value)try{e.value.options.zoomAnimation=!0,e.value.options.fadeAnimation=!0,e.value.options.markerZoomAnimation=!0,e.value.invalidateSize({animate:!1,pan:!1})}catch(ee){console.error("[useMapDrawing] Erreur lors de la restauration aprs chec:",ee)}}},K=q=>{var ue;if(!e.value)return;document.querySelectorAll(".drawing-help-message").forEach(le=>le.remove());try{const le=e.value.pm;le.globalEditModeEnabled()&&le.disableGlobalEditMode(),le.globalRemovalModeEnabled()&&le.disableGlobalRemovalMode(),le.disableDraw(),_(),(ue=r.value)==null||ue.clearLayers()}catch(le){console.error("Error disabling modes:",le)}if(i.value=q,!q){_();return}let ee=q;switch(q){case"Note":ee="GeoNote";break;case"Polygon":ee="Polygon";break;case"Line":ee="Line";break;case"ElevationLine":ee="ElevationLine";break;default:ee=q}q=ee,Y(),setTimeout(()=>{var le,pe,Z,D,ke,Me,Ge,ce,ne,ye,de,Ze,qe;try{switch(q){case"Polygon":yl("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(le=e.value)==null||le.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(pe=e.value)==null||pe.off("pm:create"),(Z=e.value)==null||Z.on("pm:create",ze=>{var Qe,et,bt;if(ze.shape==="Polygon"&&ze.layer){const Pt=ze.layer.getLatLngs()[0];(Qe=e.value)==null||Qe.removeLayer(ze.layer),(et=n.value)!=null&&et.hasLayer(ze.layer)&&n.value.removeLayer(ze.layer);const At=new gf(Pt,{color:"#3B82F6",weight:3,fillColor:"#3B82F6",fillOpacity:.2});n.value&&(n.value.addLayer(At),s.value=At,At.updateProperties()),(bt=e.value)==null||bt.pm.disableDraw(),Y()}});break;case"Circle":n.value&&n.value.getLayers().filter(Qe=>Qe instanceof pa).forEach(Qe=>{Qe.toggleHelperPoints(e.value,!0,"#DC2626","#2563EB")}),e.value.pm.setGlobalOptions({snapDistance:15,snapSegment:!0,snapVertices:!0,snapLayers:[n.value,r.value],snapMiddle:!0,snapIntersections:!0}),yl("Positionnez le centre du cercle. Points bleus : milieu des cts, Points rouges : sommets, Point vert : centre"),e.value.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Rectangle":yl("Cliquez et maintenez pour dessiner un rectangle, relchez pour terminer"),(D=e.value)==null||D.pm.enableDraw("Rectangle",{finishOn:"mouseup"});break;case"Polygon":yl("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(ke=e.value)==null||ke.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":yl("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(Me=e.value)==null||Me.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(Ge=e.value)==null||Ge.off("pm:create"),(ce=e.value)==null||ce.on("pm:create",ze=>{var Qe,et,bt;if(ze.shape==="Line"&&ze.layer){const Pt=ze.layer.getLatLngs();(Qe=e.value)==null||Qe.removeLayer(ze.layer),(et=n.value)!=null&&et.hasLayer(ze.layer)&&n.value.removeLayer(ze.layer);const At=new Ns(Pt,{color:"#3B82F6",weight:3,opacity:.8});n.value&&(n.value.addLayer(At),s.value=At,At.updateProperties()),(bt=e.value)==null||bt.pm.disableDraw(),Y()}});break;case"Text":if(yl("Cliquez pour ajouter du texte, double-cliquez pour diter"),e.value){const ze=Qe=>{if(!e.value||!n.value)return;const et=f(Qe.latlng);n.value.addLayer(et),s.value=et,e.value.off("click",ze),K("")};e.value.on("click",ze)}break;case"GeoNote":if(yl("Cliquez pour ajouter une note golocalise, double-cliquez pour diter"),e.value){const ze=async Qe=>{if(!(!e.value||!n.value))try{const et=ud(),bt=new mf(Qe.latlng,{color:"#3B82F6",name:"Note golocalise",description:"",columnId:"1"});n.value.addLayer(bt),s.value=bt,bt.updateProperties();const Pt={plan:et.currentMapId,title:bt.properties.name,description:bt.properties.description,location:{type:"Point",coordinates:[Qe.latlng.lng,Qe.latlng.lat]},access_level:bt.properties.accessLevel,style:bt.properties.style,category:bt.properties.category};console.log("[useMapDrawing] Sauvegarde de la note golocalise dans le backend:",Pt),zc(()=>Promise.resolve().then(()=>iT),void 0).then(async({noteService:At})=>{try{const Vt=await At.createNote(Pt);console.log("[useMapDrawing] Note sauvegarde avec succs:",Vt.data);const Qt=Vt.data.id,mn=bt._leaflet_id;console.log(`[useMapDrawing] ID Leaflet: ${mn}, ID backend: ${Qt}`),bt._dbId=Qt,bt.properties.id=Qt,Vt.data.column_id&&(bt.properties.columnId=Vt.data.column_id,console.log("[useMapDrawing] colonne mise  jour avec:",Vt.data.column_id)),window.dispatchEvent(new CustomEvent("note:created",{detail:{note:Vt.data,geoNote:bt,leafletId:mn,backendId:Qt}})),bt.openPopup(),bt.triggerPlanSave()}catch(Vt){console.error("[useMapDrawing] Erreur lors de la sauvegarde de la note:",Vt),zc(async()=>{const{useNotificationStore:Qt}=await Promise.resolve().then(()=>d8);return{useNotificationStore:Qt}},void 0).then(({useNotificationStore:Qt})=>{Qt().error("Erreur lors de la cration de la note")})}}),e.value.off("click",ze),K("")}catch(et){console.error("[useMapDrawing] Erreur lors de la cration de la note:",et),e.value.off("click",ze),K("")}};e.value.on("click",ze)}break;case"delete":yl("Cliquez sur une forme pour la supprimer"),(ne=e.value)==null||ne.pm.enableGlobalRemovalMode();break;case"ElevationLine":yl("Cliquez et maintenez pour tracer le profil altimtrique"),(ye=e.value)==null||ye.pm.enableDraw("Line",{finishOn:"mouseup",continueDrawing:!1,allowSelfIntersection:!1,templineStyle:{color:"#FF4500",weight:4,opacity:.8}}),(de=e.value)==null||de.pm.setGlobalOptions({continueDrawing:!1,finishOn:"mouseup",preventMarkerRemoval:!0,preventVertexEdit:!0,preventMarkerEdit:!0}),(Ze=e.value)==null||Ze.off("pm:create"),(qe=e.value)==null||qe.on("pm:create",async ze=>{var Qe,et,bt;if(ze.shape==="Line"&&ze.layer){const Pt=ze.layer.getLatLngs();(Qe=e.value)==null||Qe.removeLayer(ze.layer),(et=n.value)!=null&&et.hasLayer(ze.layer)&&n.value.removeLayer(ze.layer);const At=new Ef(Pt,{color:"#FF4500",weight:4,opacity:.8,interactive:!1,pmIgnore:!0});if(n.value){n.value.addLayer(At),s.value=At,await At.updateElevationProfile();const Vt=k(At,"ElevationLine");Object.assign(At.properties,{...Vt,...At.properties,type:"ElevationLine",elevationData:At.getElevationData()}),s.value=null,zs(()=>{s.value=At})}(bt=e.value)==null||bt.pm.disableDraw(),i.value="",Y()}});break}}catch(tt){console.error("[setDrawingTool] Erreur lors de la configuration de l'outil:",tt)}},100)},Q=q=>{var ue;if(!s.value)return;const ee=s.value;if(ee.properties=ee.properties||{},ee.properties.style=ee.properties.style||{},ee.properties.style={...ee.properties.style,...q},ee.properties.type==="text"){const le=ee.properties._textLayer,pe=(ue=le==null?void 0:le.getElement())==null?void 0:ue.querySelector(".text-annotation");pe&&bb(pe,ee.properties.style);const Z={color:q.borderColor||ee.properties.style.borderColor,weight:parseInt(q.borderWidth||ee.properties.style.borderWidth),opacity:q.borderOpacity??ee.properties.style.borderOpacity};"setStyle"in ee&&ee.setStyle(Z)}else if(ee.properties.type==="TextRectangle")console.log("[updateShapeStyle] TextRectangle supprim selon les exigences");else{const le={};q.fillColor&&(le.fillColor=q.fillColor),q.fillOpacity!==void 0&&(le.fillOpacity=q.fillOpacity),q.strokeColor&&(le.color=q.strokeColor),q.strokeOpacity!==void 0&&(le.opacity=q.strokeOpacity),q.strokeWidth!==void 0&&(le.weight=q.strokeWidth),q.dashArray&&(le.dashArray=q.dashArray),"setStyle"in ee&&ee.setStyle(le)}},he=q=>{var D,ke,Me,Ge,ce;if(!s.value){console.warn("[useMapDrawing] Cannot update properties: no shape selected");return}console.log("[useMapDrawing] Updating shape properties",{before:s.value.properties,newProps:q,layerType:(D=s.value.properties)==null?void 0:D.type,beforeName:s.value.name,beforePropertiesName:(ke=s.value.properties)==null?void 0:ke.name,beforeCategory:(Me=s.value.properties)==null?void 0:Me.category,nameIsDirectProperty:"name"in s.value,dbId:s.value._dbId}),s.value.properties||(s.value.properties={});const ee=s.value.properties.type;console.log(`[useMapDrawing] Type actuel de la forme: ${ee}`),s.value.properties.category||(s.value.properties.category="forages"),s.value.properties.accessLevel||(s.value.properties.accessLevel="visitor"),s.value._dbId||(s.value._dbId=Date.now()+Math.floor(Math.random()*1e3),console.log(`[useMapDrawing] Assigned temporary dbId: ${s.value._dbId}`));const ue=s.value.properties.type;console.log(`[useMapDrawing] Type original avant mise  jour: ${ue}`);const le=s.value.properties.category;console.log(`[useMapDrawing] Catgorie existante: ${le}`);const pe="category"in q&&q.category!==le;if(Object.keys(q).forEach(ne=>{ne==="type"&&ue?console.log(`[useMapDrawing] Prservation du type original: ${ue}`):s.value.properties[ne]=q[ne],ne==="name"&&(console.log(`[useMapDrawing] Setting name "${q[ne]}" directly on layer`),s.value.name=q[ne]),ne==="category"&&console.log(`[useMapDrawing] Mise  jour de la catgorie: ${le} -> ${q[ne]}`)}),ue&&(s.value.properties.type=ue),le&&!pe&&(console.log(`[useMapDrawing] Restauration de la catgorie originale: ${le}`),s.value.properties.category=le),s.value._dbId&&pe){const ne=ud(),ye=ne.elements.find(de=>de.id===s.value._dbId);if(ye){console.log(`[useMapDrawing] Mise  jour de la catgorie dans le store: ${s.value.properties.category} pour l'lment ${s.value._dbId}`);const de=ye;de.data||(de.data={}),de.data.category=s.value.properties.category,ne.$patch({unsavedChanges:!0})}}const Z=new CustomEvent("shape:propertiesUpdated",{detail:{shape:s.value,properties:s.value.properties,categoryUpdated:pe}});if(window.dispatchEvent(Z),console.log("[useMapDrawing] Updated shape properties",{after:s.value.properties,name:s.value.name,propertiesName:(Ge=s.value.properties)==null?void 0:Ge.name,allLayerKeys:Object.keys(s.value),allPropertiesKeys:Object.keys(s.value.properties||{})}),((ce=s.value.properties)==null?void 0:ce.type)==="Circle"){const ne=s.value,ye=ne.getRadius();ne.properties.radius=ye,ne.properties.diameter=ye*2,ne.properties.surface=Math.PI*ye*ye,ne.properties.perimeter=2*Math.PI*ye,q.name&&(console.log(`[useMapDrawing] Ensuring circle name "${q.name}" is set in multiple places`),ne.properties.name=q.name,ne.properties.style.name=q.name,ne.name=q.name,console.log("[useMapDrawing] Circle name verification:",{circleDirectName:ne.name,circlePropertiesName:ne.properties.name,nameIsEnumerable:Object.keys(ne).includes("name"),propertiesNameIsEnumerable:Object.keys(ne.properties).includes("name")}))}},fe=q=>{console.log("[forceShapeUpdate] Dbut",{currentProperties:q.properties,selectedShapeRef:s.value}),s.value=null,zs(()=>{s.value=q,console.log("[forceShapeUpdate] Aprs mise  jour",{selectedShape:s.value,properties:s.value.properties})})},me=(q,ee)=>{console.log("[updateLayerProperties] Dbut",{layer:q,shapeType:ee,currentProperties:q.properties}),jR((le,pe)=>{const Z=k(le,pe);console.log("[updateLayerProperties] Nouvelles proprits calcules",{newProperties:Z}),le.properties={...Z},fe(le),le.fire("properties:updated",{shape:le,properties:le.properties}),console.log("[updateLayerProperties] Fin",{finalProperties:le.properties,selectedShape:s.value})},100)(q,ee)},G=(q,ee)=>Ft.latLng((q.lat+ee.lat)/2,(q.lng+ee.lng)/2),$=q=>{if(!e.value||!n.value)return;_();const ee=q.getLatLng(),ue=q.getRadius(),le=M(ee,"#059669");x.push(le),y(le,q,()=>[qi(ue,"m","Rayon"),qi(ue*2,"m","Diamtre"),qi(Math.PI*Math.pow(ue,2),"m","Surface")].join("<br>"));const pe=[],Z=[0,45,90,135,180,225,270,315];Z.forEach(D=>{const ke=q.calculatePointOnCircle(D),Me=M(ke,"#2563EB");pe.push(Me),x.push(Me),y(Me,q,()=>qi(ue,"m","Rayon")),Me.on("mousedown",Ge=>{if(!e.value)return;Ft.DomEvent.stopPropagation(Ge),e.value.dragging.disable();let ce=!0;const ne=de=>{ce&&(q.resizeFromControlPoint(de.latlng),pe.forEach((Ze,qe)=>{const tt=q.calculatePointOnCircle(Z[qe]);Ze.setLatLng(tt)}),le.setLatLng(q.getLatLng()),Me.measureDiv&&(Me.measureDiv.innerHTML=qi(q.getRadius(),"m","Rayon")))},ye=()=>{ce=!1,e.value&&(e.value.off("mousemove",ne),document.removeEventListener("mouseup",ye),e.value.dragging.enable(),q.updateProperties(),s.value=null,zs(()=>{s.value=q}),me(q,"Circle"))};e.value.on("mousemove",ne),document.addEventListener("mouseup",ye)})}),le.on("mousedown",D=>{if(!e.value)return;Ft.DomEvent.stopPropagation(D),e.value.dragging.disable();let ke=!0;const Me=q.getLatLng(),Ge=D.latlng,ce=ye=>{if(!ke)return;const de=ye.latlng.lng-Ge.lng,Ze=ye.latlng.lat-Ge.lat,qe=Ft.latLng(Me.lat+Ze,Me.lng+de);Ft.Circle.prototype.setLatLng.call(q,qe),le.setLatLng(qe),pe.forEach((tt,ze)=>{const Qe=q.calculatePointOnCircle(Z[ze]);tt.setLatLng(Qe)}),le.measureDiv&&(le.measureDiv.innerHTML=[qi(q.getRadius(),"m","Rayon"),qi(q.getRadius()*2,"m","Diamtre"),qi(Math.PI*Math.pow(q.getRadius(),2),"m","Surface")].join("<br>"))},ne=()=>{ke=!1,e.value&&(e.value.off("mousemove",ce),document.removeEventListener("mouseup",ne),e.value.dragging.enable(),q.updateProperties(),s.value=null,zs(()=>{s.value=q}),me(q,"Circle"))};e.value.on("mousemove",ce),document.addEventListener("mouseup",ne)}),q.on("circle:resized",()=>{me(q,"Circle")}),s.value=q},X=q=>{var ce;if(!e.value||!n.value)return;if(!(q instanceof pa)){console.warn("La couche n'est pas une instance de Rectangle");return}const ee=q;_();const ue=ee.getCenter(),le=ee.getRotatedCorners(),pe=ee.getMidPoints(),Z=M(ue,"#059669");x.push(Z),y(Z,ee,()=>{const{width:ne,height:ye}=ee.getDimensions(),de=ne*ye,Ze=ee.getRotation();return[qi(ne,"m","Largeur"),qi(ye,"m","Hauteur"),qi(de,"m","Surface"),`Rotation: ${Ze.toFixed(1)}`].join("<br>")});const D=M(Ft.latLng(ue.lat+(le[0].lat-ue.lat)*1.2,ue.lng+(le[0].lng-ue.lng)*1.2),"#F97316");x.push(D);const ke=Ft.polyline([ue,D.getLatLng()],{color:"#F97316",weight:1,opacity:.6,dashArray:"4",pmIgnore:!0});(ce=t.value)==null||ce.addLayer(ke);const Me=le.map(ne=>{const ye=M(ne,"#DC2626");return x.push(ye),y(ye,ee,()=>{const{width:de,height:Ze}=ee.getDimensions();return[qi(de,"m","Largeur"),qi(Ze,"m","Hauteur")].join("<br>")}),ye}),Ge=pe.map((ne,ye)=>{const de=M(ne,"#2b6451");return x.push(de),y(de,ee,()=>{const{width:Ze,height:qe}=ee.getDimensions(),tt=ye%2===0?Ze:qe;return[qi(tt,"m","Longueur du ct"),qi(tt/2,"m","Distance au coin")].join("<br>")}),de});Z.on("mousedown",ne=>{if(!e.value)return;Ft.DomEvent.stopPropagation(ne),e.value.dragging.disable();let ye=!0;const de=qe=>{if(!ye)return;ee.moveFromCenter(qe.latlng);const tt=ee.getRotatedCorners(),ze=ee.getMidPoints();Me.forEach((et,bt)=>et.setLatLng(tt[bt])),Ge.forEach((et,bt)=>et.setLatLng(ze[bt])),Z.setLatLng(qe.latlng);const Qe=Ft.latLng(qe.latlng.lat+(tt[0].lat-qe.latlng.lat)*1.2,qe.latlng.lng+(tt[0].lng-qe.latlng.lng)*1.2);D.setLatLng(Qe),ke.setLatLngs([qe.latlng,Qe])},Ze=()=>{ye=!1,e.value&&(e.value.off("mousemove",de),document.removeEventListener("mouseup",Ze),e.value.dragging.enable(),ee.updateProperties(),s.value=null,zs(()=>{s.value=ee}))};e.value.on("mousemove",de),document.addEventListener("mouseup",Ze)}),D.on("mousedown",ne=>{if(!e.value)return;Ft.DomEvent.stopPropagation(ne),e.value.dragging.disable();let ye=!1;const de=ne.latlng,Ze=ee.getRotation(),qe=ee.getCenter(),tt=de.lng-qe.lng,ze=de.lat-qe.lat,Qe=Math.atan2(ze,tt)*180/Math.PI;x.forEach(Pt=>{Pt!==D&&(Pt.setStyle({opacity:0,fillOpacity:0}),Pt.measureDiv&&(Pt.measureDiv.style.display="none"))});const et=Hf(Pt=>{ye||(ye=!0);const At=Pt.latlng.lng-qe.lng,Vt=Pt.latlng.lat-qe.lat;let mn=Math.atan2(Vt,At)*180/Math.PI-Qe,Ye=(Ze+mn)%360;Ye<0&&(Ye+=360),ee.setRotation(Ye,!1),D.setLatLng(Pt.latlng),ke.setLatLngs([qe,Pt.latlng])},16),bt=()=>{e.value&&(e.value.off("mousemove",et),document.removeEventListener("mouseup",bt),e.value.dragging.enable(),ye&&ee.finalizeRotation(),s.value=null,zs(()=>{s.value=ee,_(),X(ee)}))};e.value.on("mousemove",et),document.addEventListener("mouseup",bt)}),ee.on("coordinates:updated",ne=>{const{corners:ye,center:de}=ne,Ze=ee.getMidPoints();Me.forEach((tt,ze)=>tt.setLatLng(ye[ze])),Ge.forEach((tt,ze)=>tt.setLatLng(Ze[ze])),Z.setLatLng(de);const qe=Ft.latLng(de.lat+(ye[0].lat-de.lat)*1.2,de.lng+(ye[0].lng-de.lng)*1.2);D.setLatLng(qe),ke.setLatLngs([de,qe])})},R=q=>{if(!e.value||!n.value)return;_();const ee=q.getLatLngs();if(!ee||ee.length===0){console.warn("Pas de points pour la ligne");return}let ue=null;if(q instanceof Ns){const le=q.getCenter();ue=M(le,"#059669"),x.push(ue),y(ue,q,()=>{const pe=q.getLength()||0;return qi(pe,"m","Longueur totale")}),ue.on("mousedown",pe=>{if(!e.value)return;Ft.DomEvent.stopPropagation(pe),e.value.dragging.disable();let Z=!0;const D=q.getLatLngs().map(ne=>Ft.latLng(ne.lat,ne.lng)),ke=pe.latlng;q instanceof Ns&&(q.off("move:end"),q.off("vertex:moved"),q.off("latlngs:updated"),q.off("properties:updated")),x.forEach((ne,ye)=>{ye>0&&(ne.setStyle({opacity:0,fillOpacity:0}),ne.measureDiv&&(ne.measureDiv.style.display="none"))});const Ge=Hf(ne=>{if(!Z)return;const ye=ne.latlng.lng-ke.lng,de=ne.latlng.lat-ke.lat,Ze=D.map(qe=>Ft.latLng(qe.lat+de,qe.lng+ye));Ft.Polyline.prototype.setLatLngs.call(q,Ze),ue==null||ue.setLatLng(ne.latlng)},16),ce=()=>{if(Z=!1,!!e.value){if(e.value.off("mousemove",Ge),document.removeEventListener("mouseup",ce),e.value.dragging.enable(),q instanceof Ns){const ne=()=>{_(),R(q)};q.on("move:end",ne),q.on("vertex:moved",ne),q.on("latlngs:updated",ne),q.on("properties:updated",ne),q.updateProperties(),me(q,"Line")}_(),R(q)}};e.value.on("mousemove",Ge),document.addEventListener("mouseup",ce)})}if(ee.forEach((le,pe)=>{const Z=M(le,"#DC2626");x.push(Z),y(Z,q,()=>{if(q instanceof Ns){const D=q.getLength()||0,ke=q.getLengthToVertex(pe);return[qi(ke,"m","Distance depuis le dbut"),qi(D,"m","Longueur totale")].join("<br>")}return""}),Z.on("mousedown",D=>{if(!e.value)return;Ft.DomEvent.stopPropagation(D),e.value.dragging.disable();let ke=!0;q instanceof Ns&&(q.off("move:end"),q.off("vertex:moved"),q.off("latlngs:updated"),q.off("properties:updated")),x.forEach((ce,ne)=>{ne!==pe+1&&(ce.setStyle({opacity:0,fillOpacity:0}),ce.measureDiv&&(ce.measureDiv.style.display="none"))});const Me=Hf(ce=>{if(!ke)return;const ne=q.getLatLngs();ne[pe]=ce.latlng,Ft.Polyline.prototype.setLatLngs.call(q,ne),Z.setLatLng(ce.latlng)},16),Ge=()=>{if(ke=!1,!!e.value){if(e.value.off("mousemove",Me),document.removeEventListener("mouseup",Ge),e.value.dragging.enable(),q instanceof Ns){const ce=()=>{_(),R(q)};q.on("move:end",ce),q.on("vertex:moved",ce),q.on("latlngs:updated",ce),q.on("properties:updated",ce),q.updateProperties(),me(q,"Line")}_(),R(q)}};e.value.on("mousemove",Me),document.addEventListener("mouseup",Ge)})}),ee.length>=2)for(let le=0;le<ee.length-1;le++){const pe=ee[le],Z=ee[le+1],D=Ft.latLng((pe.lat+Z.lat)/2,(pe.lng+Z.lng)/2),ke=M(D,"#2b6451");x.push(ke),y(ke,q,()=>{if(q instanceof Ns){const Me=q.getSegmentLengthAt(le),Ge=q.getLength()||0,ce=q.getLengthToVertex(le)+Me/2;return[qi(Me,"m","Longueur du segment"),qi(Me/2,"m","Demi-segment"),qi(ce,"m","Distance depuis le dbut"),qi(Ge,"m","Longueur totale")].join("<br>")}return""})}if(q instanceof Ns){const le=()=>{_(),R(q)};q.on("move:start",()=>{x.forEach((pe,Z)=>{Z>0&&(pe.setStyle({opacity:0,fillOpacity:0}),pe.measureDiv&&(pe.measureDiv.style.display="none"))})}),q.on("move:end",le),q.on("vertex:moved",le),q.on("latlngs:updated",le),q.on("properties:updated",le),x.cleanup=()=>{q.off("move:start",()=>{}),q.off("move:end",le),q.off("vertex:moved",le),q.off("latlngs:updated",le),q.off("properties:updated",le)}}},O=q=>{if(!e.value||!n.value)return;_();const ee=q.getLatLngs()[0],ue=ee.map(Ge=>[Ge.lng,Ge.lat]);ue.push(ue[0]);const le=fu([ue]),pe=oc(le),Z=ee.reduce((Ge,ce,ne)=>{const ye=ee[(ne+1)%ee.length];return Ge+ce.distanceTo(ye)},0);let D;if(typeof q.getCenter=="function")try{D=q.getCenter()}catch(Ge){console.warn("Erreur lors de la rcupration du centre du polygone via getCenter(), utilisation de la mthode alternative",Ge);const ce=sp(le);D=Ft.latLng(ce.geometry.coordinates[1],ce.geometry.coordinates[0])}else{const Ge=sp(le);D=Ft.latLng(Ge.geometry.coordinates[1],Ge.geometry.coordinates[0])}const ke=M(D,"#059669");x.push(ke),y(ke,q,()=>[qi(Z,"m","Primtre"),qi(pe,"m","Surface")].join("<br>")),ke.on("mousedown",Ge=>{if(!e.value)return;Ft.DomEvent.stopPropagation(Ge),e.value.dragging.disable();let ce=!0;const ne=Ge.latlng,ye=[...ee];x.forEach((tt,ze)=>{ze>0&&tt.setStyle({opacity:0,fillOpacity:0})});const de=Hf(tt=>{if(!ce)return;const ze=tt.latlng.lng-ne.lng,Qe=tt.latlng.lat-ne.lat,et=ye.map(bt=>Ft.latLng(bt.lat+Qe,bt.lng+ze));Ft.Polygon.prototype.setLatLngs.call(q,[et]),ke.setLatLng(tt.latlng)},16),Ze=tt=>{ce&&de(tt)},qe=()=>{if(ce=!1,!!e.value){if(e.value.off("mousemove",Ze),document.removeEventListener("mouseup",qe),e.value.dragging.enable(),q.properties){const tt=q.getLatLngs()[0],ze=tt.map(et=>[et.lng,et.lat]);ze.push(ze[0]);const Qe=fu([ze]);q.properties.area=oc(Qe),q.properties.perimeter=tt.reduce((et,bt,Pt)=>{const At=tt[(Pt+1)%tt.length];return et+bt.distanceTo(At)},0),q.properties.surface=q.properties.area}_(),O(q),s.value=null,zs(()=>{s.value=q})}};e.value.on("mousemove",Ze),document.addEventListener("mouseup",qe)}),ee.forEach((Ge,ce)=>{const ne=M(Ge,"#DC2626");x.push(ne),y(ne,q,()=>{const ye=ee[(ce-1+ee.length)%ee.length],de=ee[(ce+1)%ee.length],Ze=Ge.distanceTo(ye),qe=Ge.distanceTo(de);return[qi(Ze,"m","Distance au point prcdent"),qi(qe,"m","Distance au point suivant"),qi(Z,"m","Primtre total"),qi(pe,"m","Surface")].join("<br>")}),ne.on("mousedown",ye=>{if(Ft.DomEvent.stopPropagation(ye),!e.value)return;e.value.dragging.disable();let de=!0;ke&&(ke.setStyle({opacity:0,fillOpacity:0}),ke.measureDiv&&(ke.measureDiv.style.display="none"));const Ze=Hf(ze=>{if(!de)return;ee[ce]=ze.latlng,Ft.Polygon.prototype.setLatLngs.call(q,[ee]),ne.setLatLng(ze.latlng);const Qe=x.slice(ee.length+1),et=(ce-1+ee.length)%ee.length,bt=Qe[et];if(bt){const At=ee[et],Vt=ee[ce],Qt=Ft.latLng((At.lat+Vt.lat)/2,(At.lng+Vt.lng)/2);bt.setLatLng(Qt)}const Pt=Qe[ce];if(Pt){const At=ee[ce],Vt=ee[(ce+1)%ee.length],Qt=Ft.latLng((At.lat+Vt.lat)/2,(At.lng+Vt.lng)/2);Pt.setLatLng(Qt)}},16),qe=ze=>{de&&Ze(ze)},tt=()=>{if(de=!1,!!e.value){if(e.value.off("mousemove",qe),document.removeEventListener("mouseup",tt),e.value.dragging.enable(),q.properties){const ze=q.getLatLngs()[0].map(et=>[et.lng,et.lat]);ze.push(ze[0]);const Qe=fu([ze]);q.properties.area=oc(Qe),q.properties.perimeter=ee.reduce((et,bt,Pt)=>{const At=ee[(Pt+1)%ee.length];return et+bt.distanceTo(At)},0),q.properties.surface=q.properties.area}_(),O(q),s.value=null,zs(()=>{s.value=q})}};e.value.on("mousemove",qe),document.addEventListener("mouseup",tt)})}),(()=>{const Ge=q.getLatLngs()[0];x.slice(Ge.length+1).forEach(ne=>{t.value&&t.value.removeLayer(ne)}),x=x.slice(0,Ge.length+1);const ce=new Array(Ge.length);for(let ne=0;ne<Ge.length;ne++){const ye=Ge[ne],de=Ge[(ne+1)%Ge.length];ce[ne]=G(ye,de)}ce.forEach((ne,ye)=>{const de=M(ne,"#2b6451");x.push(de),y(de,q,()=>{const Ze=Ge[ye],qe=Ge[(ye+1)%Ge.length],tt=Ze.distanceTo(qe);return[qi(tt,"m","Longueur du segment"),qi(Z,"m","Primtre total"),qi(pe,"m","Surface")].join("<br>")}),de.on("mousedown",Ze=>{if(!e.value)return;Ft.DomEvent.stopPropagation(Ze),e.value.dragging.disable();let qe=!0;const tt=ye;ke&&(ke.setStyle({opacity:0,fillOpacity:0}),ke.measureDiv&&(ke.measureDiv.style.display="none"));const ze=[...q.getLatLngs()[0]];ze.splice((tt+1)%ze.length,0,ne),q.setLatLngs([ze]),_(),O(q);const Qe=tt+1,et=1+Qe,bt=Qe<x.length-1?x[et]:null;if(bt){const Pt=Vt=>{if(!qe)return;const Qt=q.getLatLngs()[0];Qt[Qe]=Vt.latlng,q.setLatLngs([Qt]),bt.setLatLng(Vt.latlng);const mn=x.slice(1+Qt.length),Ye=(Qe-1+Qt.length)%Qt.length,ot=Qe;if(mn[Ye]){const rt=Qt[Ye],zt=Qt[Qe],en=Ft.latLng((rt.lat+zt.lat)/2,(rt.lng+zt.lng)/2);mn[Ye].setLatLng(en)}if(mn[ot]){const rt=Qt[Qe],zt=Qt[(Qe+1)%Qt.length],en=Ft.latLng((rt.lat+zt.lat)/2,(rt.lng+zt.lng)/2);mn[ot].setLatLng(en)}},At=()=>{if(qe=!1,!!e.value){if(e.value.off("mousemove",Pt),document.removeEventListener("mouseup",At),e.value.dragging.enable(),q.properties){const Vt=q.getLatLngs()[0].map(mn=>[mn.lng,mn.lat]);Vt.push(Vt[0]);const Qt=fu([Vt]);q.properties.area=oc(Qt),q.properties.perimeter=q.getLatLngs()[0].reduce((mn,Ye,ot,rt)=>{const zt=rt[(ot+1)%rt.length];return mn+Ye.distanceTo(zt)},0)}_(),O(q),s.value=null,zs(()=>{s.value=q})}};e.value.on("mousemove",Pt),document.addEventListener("mouseup",At)}else e.value.dragging.enable(),_(),O(q)})})})()},B=q=>{if(!e.value||!n.value)return;_();const ee=q.getLatLng(),ue=M(ee,"#059669");x.push(ue),y(ue,q,()=>`Position: ${ee.lat.toFixed(6)}, ${ee.lng.toFixed(6)}`),ue.on("mousedown",le=>{if(!e.value)return;Ft.DomEvent.stopPropagation(le),e.value.dragging.disable(),q.startMoving();let pe=!0;const D=Hf(Me=>{pe&&(ue.setLatLng(Me.latlng),q.setLatLng(Me.latlng))},16),ke=()=>{e.value&&(e.value.off("mousemove",D),document.removeEventListener("mouseup",ke),e.value.dragging.enable(),pe=!1,q.finishMoving(),q.updateProperties(),s.value=null,zs(()=>{s.value=q,_(),B(q)}))};e.value.on("mousemove",D),document.addEventListener("mouseup",ke)}),s.value=q},z=q=>{if(!(!e.value||!r.value)){console.log("[generateTempControlPoints] Gnration des points temporaires pour",{layerType:q.constructor.name,properties:q.properties}),r.value.clearLayers();try{if(q instanceof pa)q.generateHelperPoints(e.value);else if(q instanceof jh){if("getLatLng"in q&&typeof q.getLatLng=="function"){const ee=q.getLatLng();if(ee){const ue=Ft.circleMarker(ee,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(ue)}}}else if(q instanceof mf){const ee=q.getLatLng();if(ee){const ue=Ft.circleMarker(ee,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(ue)}}else if(q instanceof gf||q instanceof Ft.Polygon){let ee=[];if("getLatLngs"in q){const le=q.getLatLngs();if(Array.isArray(le)&&le.length>0){const pe=le[0];Array.isArray(pe)?ee=pe:pe instanceof Ft.LatLng&&(ee=le)}}let ue=null;if(q instanceof gf&&typeof q.getCenter=="function")ue=q.getCenter();else if(ee.length>0){const le=ee.map(D=>[D.lng,D.lat]);le.push(le[0]);const pe=fu([le]),Z=sp(pe);ue=Ft.latLng(Z.geometry.coordinates[1],Z.geometry.coordinates[0])}if(ue){const le=Ft.circleMarker(ue,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(le)}ee.forEach(le=>{if(le){const pe=Ft.circleMarker(le,{radius:5,color:"#DC2626",fillColor:"#DC2626",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(pe)}});for(let le=0;le<ee.length;le++){const pe=ee[le],Z=ee[(le+1)%ee.length];if(pe&&Z){const D=Ft.latLng((pe.lat+Z.lat)/2,(pe.lng+Z.lng)/2),ke=Ft.circleMarker(D,{radius:5,color:"#2563EB",fillColor:"#2563EB",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(ke)}}}console.log("[generateTempControlPoints] Points temporaires gnrs",{count:r.value.getLayers().length})}catch(ee){console.error("[generateTempControlPoints] Erreur lors de la gnration des points temporaires:",ee)}}},W=q=>{console.log("Nombre total de couches:",q.length);const ee=q.filter(D=>{var Ge;if(!D)return!1;let ke=0,Me={width:0,height:0};if(D instanceof Ft.Circle){ke=Math.PI*Math.pow(D.getRadius(),2);const ce=D.getRadius();console.log(`
Forme dtecte: Circle`),console.log(`- Surface propre: ${ke.toFixed(2)} m`),console.log(`- Rayon: ${ce.toFixed(2)} m`),console.log("- Angle: Cercle complet (360)")}else if(D instanceof pa||D instanceof Ft.Rectangle){const ce=D.getBounds(),ne=ce.getSouthWest(),ye=ce.getNorthEast(),de=hu([[ne.lng,ne.lat],[ye.lng,ne.lat]]),Ze=hu([[ne.lng,ne.lat],[ne.lng,ye.lat]]);Me.width=Gf(de,{units:"meters"}),Me.height=Gf(Ze,{units:"meters"}),ke=Me.width*Me.height,console.log(`
Forme dtecte: Rectangle`),console.log(`- Surface propre: ${ke.toFixed(2)} m`),console.log(`- Largeur: ${Me.width.toFixed(2)} m`),console.log(`- Hauteur: ${Me.height.toFixed(2)} m`)}else if(((Ge=D.properties)==null?void 0:Ge.type)==="Semicircle"){const ce=D.getStartAngle(),ne=D.getStopAngle(),ye=(ne-ce+360)%360,de=D.getRadius();ke=Math.PI*Math.pow(de,2)*ye/360,console.log(`
Forme dtecte: Semicircle`),console.log(`- Surface propre: ${ke.toFixed(2)} m`),console.log(`- Rayon: ${de.toFixed(2)} m`),console.log(`- Angle de dbut: ${ce.toFixed(2)}`),console.log(`- Angle de fin: ${ne.toFixed(2)}`),console.log(`- Angle d'ouverture: ${ye.toFixed(2)}`)}return ke>0});if(ee.length===0)return 0;const ue=new Set,le=[];for(const D of ee)if(!ue.has(D)){const ke=ie(ee,D);ke.length>0&&(le.push(ke),ke.forEach(Me=>ue.add(Me)))}console.log(`
Nombre de groupes de formes connectes: ${le.length}`);const pe=le.map((D,ke)=>{console.log(`
Calcul pour le groupe ${ke+1} (${D.length} formes):`);const Me=D.map(de=>{var Ze,qe,tt;try{let ze;if(de instanceof Ft.Circle){const Qe=de.getLatLng(),et=de.getRadius();ze=XD([Qe.lng,Qe.lat],et/1e3,{units:"kilometers",steps:256});const bt=oc(ze),Pt=((Ze=de.properties)==null?void 0:Ze.surface)||0;return console.log(`
Conversion Cercle -> GeoJSON`),console.log(`- Rayon: ${et.toFixed(2)}m`),console.log(`- Surface proprit: ${Pt.toFixed(2)}m`),console.log(`- Surface GeoJSON: ${bt.toFixed(2)}m`),ze}else if(de instanceof pa||de instanceof Ft.Rectangle){const Qe=de.getBounds(),et=Qe.getSouthWest(),bt=Qe.getNorthEast(),Pt=Ft.latLng(bt.lat,et.lng),At=Ft.latLng(et.lat,bt.lng),Vt=[[et.lng,et.lat],[At.lng,At.lat],[bt.lng,bt.lat],[Pt.lng,Pt.lat],[et.lng,et.lat]];ze=fu([Vt]);const Qt=oc(ze),mn=hu([[et.lng,et.lat],[bt.lng,et.lat]]),Ye=hu([[et.lng,et.lat],[et.lng,bt.lat]]),ot=Gf(mn,{units:"meters"}),rt=Gf(Ye,{units:"meters"}),zt=ot*rt;return console.log(`
Conversion Rectangle -> GeoJSON`),console.log(`- Largeur: ${ot.toFixed(2)}m`),console.log(`- Hauteur: ${rt.toFixed(2)}m`),console.log(`- Surface thorique: ${zt.toFixed(2)}m`),console.log(`- Surface GeoJSON: ${Qt.toFixed(2)}m`),console.log(`- Diffrence: ${Math.abs(zt-Qt).toFixed(2)}m (${(Math.abs(zt-Qt)/zt*100).toFixed(2)}%)`),ze}else if(((qe=de.properties)==null?void 0:qe.type)==="Semicircle"){const Qe=de.getCenter(),et=de.getRadius(),bt=de.getStartAngle(),Pt=de.getStopAngle(),At=[],Vt=64;At.push([Qe.lng,Qe.lat]);for(let Ye=0;Ye<=Vt;Ye++){const rt=(bt+(Pt-bt+360)%360*Ye/Vt)*Math.PI/180,zt=et*Math.cos(rt),Bn=et*Math.sin(rt)/111319.9,bn=zt/(111319.9*Math.cos(Qe.lat*Math.PI/180));At.push([Qe.lng+bn,Qe.lat+Bn])}At.push([Qe.lng,Qe.lat]),ze=fu([At]);const Qt=oc(ze),mn=((tt=de.properties)==null?void 0:tt.surface)||0;return console.log(`
Conversion Semicircle -> GeoJSON`),console.log(`- Rayon: ${et.toFixed(2)}m`),console.log(`- Surface proprit: ${mn.toFixed(2)}m`),console.log(`- Surface GeoJSON: ${Qt.toFixed(2)}m`),console.log(`- Diffrence: ${Math.abs(mn-Qt).toFixed(2)}m (${(Math.abs(mn-Qt)/mn*100).toFixed(2)}%)`),ze}return null}catch(ze){return console.error("[useMapDrawing] Erreur lors de la conversion en GeoJSON:",ze),null}}).filter(de=>de!==null);if(Me.length===0)return 0;const Ge=Me.map(de=>{const Ze=oc(de);return console.log(`Surface individuelle: ${Ze.toFixed(2)}m`),Ze});let ce=0;for(let de=0;de<Me.length;de++)for(let Ze=de+1;Ze<Me.length;Ze++)try{const qe=FD([Me[de],Me[Ze]]),tt=_I(qe);if(tt){const ze=oc(tt);ce+=ze,console.log(`Intersection entre formes ${de+1} et ${Ze+1}: ${ze.toFixed(2)}m`)}}catch(qe){console.error(`Erreur lors du calcul d'intersection entre les formes ${de+1} et ${Ze+1}:`,qe)}const ne=Ge.reduce((de,Ze)=>de+Ze,0),ye=ne-ce;return console.log(`
Calcul de la surface d'irrigation pour le groupe ${ke+1}:`),console.log(`- Surface totale (somme): ${ne.toFixed(2)}m`),console.log(`- Surface d'intersection: ${ce.toFixed(2)}m`),console.log(`- Surface d'irrigation finale: ${ye.toFixed(2)}m`),ye}),Z=Math.max(...pe);return console.log(`
Surface d'irrigation maximale parmi les groupes: ${Z.toFixed(2)}m`),Z},V=()=>{u.value&&(e.value.removeLayer(u.value),u.value=null)},oe=(q,ee)=>{if(!e.value)return;V();const ue=ee?ie(q,ee):q;if(u.value||(u.value=Ft.layerGroup().addTo(e.value)),ue.forEach(le=>{var Z;const pe=(Z=le.properties)==null?void 0:Z.type;if(pe==="Circle"||pe==="Semicircle"){const D=le.getLatLng(),ke=le.getRadius(),Me=Ft.circle(D,{radius:ke,fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:Ft.canvas({padding:.5})}),Ge=Ft.circle(D,{radius:ke,fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:Ft.canvas({padding:.5})});u.value&&(u.value.addLayer(Ge),u.value.addLayer(Me))}else if(pe==="Rectangle"||pe==="Polygon"){const D=le.getLatLngs(),ke=Ft.polygon(D,{fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:Ft.canvas({padding:.5})}),Me=Ft.polygon(D,{fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:Ft.canvas({padding:.5})});u.value&&(u.value.addLayer(Me),u.value.addLayer(ke))}}),ee&&ue.length>1&&e.value){const le=Ft.latLngBounds([]);ue.forEach(D=>{D.getBounds?le.extend(D.getBounds()):D.getLatLng&&le.extend(D.getLatLng())});const pe=le.getCenter(),Z=Ft.tooltip({permanent:!0,direction:"center",className:"connected-group-tooltip"}).setContent("<div>Groupe connect</div>").setLatLng(pe);u.value&&u.value.addLayer(Ft.marker(pe,{opacity:0,interactive:!1}).bindTooltip(Z).openTooltip())}},ie=(q,ee)=>{if(!ee)return[];const ue=new Set,le=[ee],pe=[ee];for(ee._leaflet_id!==void 0&&ue.add(ee._leaflet_id);le.length>0;){const Z=le.shift();for(const D of q){if(D===Z||ue.has(D._leaflet_id))continue;xe(Z,D)&&(pe.push(D),le.push(D),ue.add(D._leaflet_id))}}return pe},xe=(q,ee)=>{let ue=null,le=null;if(q.getBounds&&typeof q.getBounds=="function")ue=q.getBounds();else if(q.getLatLng&&q.getRadius){const pe=q.getLatLng(),Z=q.getRadius();ue=Ft.latLngBounds([pe.lat-Z/111e3,pe.lng-Z/(111e3*Math.cos(pe.lat*Math.PI/180))],[pe.lat+Z/111e3,pe.lng+Z/(111e3*Math.cos(pe.lat*Math.PI/180))])}if(ee.getBounds&&typeof ee.getBounds=="function")le=ee.getBounds();else if(ee.getLatLng&&ee.getRadius){const pe=ee.getLatLng(),Z=ee.getRadius();le=Ft.latLngBounds([pe.lat-Z/111e3,pe.lng-Z/(111e3*Math.cos(pe.lat*Math.PI/180))],[pe.lat+Z/111e3,pe.lng+Z/(111e3*Math.cos(pe.lat*Math.PI/180))])}return!(!ue||!le||!ue.intersects(le))},Ee=(q,ee)=>{var le;const ue=ie(q,ee);return ue.length===1&&(le=ee.properties)!=null&&le.surface?ee.properties.surface:W(ue)},Te=q=>{var le,pe,Z,D,ke,Me,Ge,ce,ne;const ee=q.layer;(le=n.value)==null||le.addLayer(ee);let ue="unknown";if(ee instanceof Ft.Circle?ue=i.value==="Semicircle"?"Semicircle":"Circle":ee instanceof Ft.Rectangle?ue="Rectangle":ee instanceof Ft.Polygon?ue="Polygon":ee instanceof Ft.Polyline&&!(ee instanceof Ft.Polygon)&&(ue="Line"),ee.properties=k(ee,ue),ee.properties||(ee.properties={}),ee.properties.category||(ee.properties.category="forages"),ee.properties.accessLevel||(ee.properties.accessLevel="visitor"),ee._dbId=Date.now()+Math.floor(Math.random()*1e3),s.value=ee,console.log("[useMapDrawing] Input layer:",{type:ue,instanceof:{Circle:ee instanceof Ft.Circle,Rectangle:ee instanceof Ft.Rectangle,Polygon:ee instanceof Ft.Polygon,Polyline:ee instanceof Ft.Polyline},options:ee.options,properties:ee.properties,_dbId:ee._dbId}),window.dispatchEvent(new CustomEvent("shape:created",{detail:{shape:ee,type:ue,properties:ee.properties}})),ee.on("mouseover",()=>{console.log("[mouseover] Survol de la forme",{type:ue,isSelected:s.value===ee}),(!s.value||s.value!==ee)&&z(ee)}),ee.on("mouseout",()=>{var ye;console.log("[mouseout] Sortie de la forme",{type:ue,isSelected:s.value===ee}),(!s.value||s.value!==ee)&&((ye=r.value)==null||ye.clearLayers())}),ue==="Semicircle")console.log("Conversion en demi-cercle dsactive selon les exigences");else if(ue==="Circle"){(pe=n.value)==null||pe.removeLayer(ee);const ye=new jh(ee.getLatLng(),{radius:ee.getRadius(),...ee.options});ye.properties={...k(ye,"Circle"),type:"Circle"},Object.defineProperty(ye,"name",{value:ye.properties.name,writable:!0,enumerable:!0,configurable:!0}),console.log("[useMapDrawing] Cration du cercle personnalis:",{propertyDescriptor:Object.getOwnPropertyDescriptor(ye,"name"),directName:ye.name,propertiesName:ye.properties.name,nameIsEnumerable:Object.keys(ye).includes("name"),allProperties:Object.keys(ye.properties),allKeys:Object.keys(ye)}),(Z=n.value)==null||Z.addLayer(ye),s.value=ye,$(ye)}else if(ue==="Rectangle"){(D=n.value)==null||D.removeLayer(ee);const ye=new pa(ee.getBounds(),{...ee.options});ye.updateProperties(),(ke=n.value)==null||ke.addLayer(ye),s.value=ye,X(ye)}else if(ee instanceof Ft.Polygon){const ye=ee.getLatLngs()[0],de=new gf([ye],{...ee.options});de.updateProperties(),(Me=n.value)==null||Me.removeLayer(ee),(Ge=n.value)==null||Ge.addLayer(de),s.value=de,O(de)}else if(ee instanceof Ns)R(ee);else if(ee instanceof Ft.Polyline&&!(ee instanceof Ft.Polygon)){const ye=ee.getLatLngs(),de=new Ns(ye,{...ee.options});de.updateProperties(),(ce=n.value)==null||ce.removeLayer(ee),(ne=n.value)==null||ne.addLayer(de),s.value=de,R(de)}yl("Cliquez sur la forme pour afficher les points de contrle")},Y=()=>{e.value&&(e.value.off("pm:create"),e.value.on("pm:create",Te))};return{map:e,featureGroup:n,controlPointsGroup:t,tempControlPointsGroup:r,currentTool:i,selectedShape:s,isDrawing:o,initMap:T,setDrawingTool:K,updateShapeStyle:Q,updateShapeProperties:he,updateTextFixedSize:N,adjustView:F,clearActiveControlPoints:_,calculateTotalCoverageArea:W,showCoverageOverlay:oe,hideCoverageOverlay:V,calculateConnectedCoverageArea:Ee,getConnectedShapes:ie}}function $R(){const{isEnabled:e,startMeasure:n}=gd(),t=jt(null),r=jt(""),i=jt("Hybride"),s=jt(null),o=n("createBaseMaps","useMapState"),u={Hybride:Ft.layerGroup([Ft.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:19,tileSize:256,zoomOffset:0,bounds:Ft.latLngBounds(Ft.latLng(41.333,-5.566),Ft.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0,opacity:.6}),Ft.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:" Esri",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:20,tileSize:256,zoomOffset:0,bounds:Ft.latLngBounds(Ft.latLng(41.333,-5.566),Ft.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0,opacity:.6})]),Cadastre:Ft.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Cadastre - Carte  IGN/Geoportail",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:18,tileSize:256,zoomOffset:0,bounds:Ft.latLngBounds(Ft.latLng(41.333,-5.566),Ft.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0}),IGN:Ft.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Carte IGN  IGN/Geoportail",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:18,tileSize:256,zoomOffset:0,bounds:Ft.latLngBounds(Ft.latLng(41.333,-5.566),Ft.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0})};o();const f=dn.createPerformanceTracker(x=>{dn.measure("initMap:setOptions",()=>{t.value=x,x.options.zoomSnap=.25,x.options.zoomDelta=.25,x.options.wheelPxPerZoomLevel=100,x.options.zoomAnimation=!0,x.options.fadeAnimation=!0,x.options.markerZoomAnimation=!0,x.options.minZoom=2,x.options.maxZoom=19,x.options.scrollWheelZoom=!0,x.options.doubleClickZoom=!0;const _=Ft.latLngBounds(Ft.latLng(-90,-180),Ft.latLng(90,180));x.setMaxBounds(_),x.options.maxBoundsViscosity=1,x.options.trackResize=!0;let M=null;x.getZoom(),x.on("zoomstart",()=>{x.getZoom(),x.options.zoomAnimation=!1,x.options.markerZoomAnimation=!1}),x.on("zoomend",()=>{M&&clearTimeout(M),M=setTimeout(()=>{setTimeout(()=>{x.options.zoomAnimation=!0,x.options.markerZoomAnimation=!0,x.invalidateSize({animate:!1,pan:!1});const N=x.getBounds(),T=x.options.maxBounds;T&&!N.intersects(T)&&x.panInsideBounds(T,{animate:!1})},250)},250)});const k=x._zoomAnimation;k&&(x._zoomAnimation=function(N){try{this._animatingZoom||k.call(this,N)}catch{console.warn("Animation de zoom interrompue, restauration de la vue..."),this._resetView(this.getCenter(),this.getZoom())}})},"useMapState"),dn.measure("initMap:addInitialLayer",()=>{x&&x.whenReady(()=>{const _=i.value;if(u[_]){if(console.log(`Initialisation de la couche de base: ${_}`),s.value&&x.hasLayer(s.value))try{x.removeLayer(s.value),console.log("Couche active prcdente supprime")}catch(M){console.warn("Erreur lors de la suppression de la couche active prcdente:",M)}s.value=u[_];try{s.value.addTo(x),console.log(`Couche ${_} ajoute  la carte`)}catch(M){console.error(`Erreur lors de l'ajout de la couche ${_}:`,M)}}else console.warn(`Couche de base non disponible: ${_}`)})},"useMapState"),x.on("baselayerchange",_=>{const M=n("baselayerchange","useMapState",{layer:_.name});i.value=_.name,s.value=_.layer,M()}),e.value&&(x.on("movestart",()=>{n("mapMove","useMapState",{startCenter:x.getCenter()})}),x.on("moveend",()=>{n("mapMoveEnd","useMapState",{endCenter:x.getCenter()})()}),x.on("tileloadstart",()=>{n("tileLoad","useMapState")}),x.on("tileload",()=>{n("tileLoadEnd","useMapState")()}))},"initMap","useMapState"),d=dn.createAsyncPerformanceTracker(async x=>{if(!t.value||!u[x]){console.warn(`Impossible de changer la carte de base: ${t.value?"type de carte non disponible":"carte non initialise"}`);return}try{if(i.value===x)return;console.log(`Changement de carte: ${i.value} -> ${x}`);const _=t.value,M=_.getCenter(),k=_.getZoom();_.options.zoomAnimation=!1,_.options.fadeAnimation=!1,_.options.markerZoomAnimation=!1;const N=u[x];if(s.value&&_.hasLayer(s.value))try{_.removeLayer(s.value),console.log(`Couche prcdente ${i.value} supprime`)}catch(T){console.warn("Erreur lors de la suppression de la couche active:",T)}try{N instanceof Ft.LayerGroup,N.addTo(_),console.log(`Nouvelle couche ${x} ajoute`)}catch(T){console.error("Erreur lors de l'ajout de la nouvelle couche:",T);try{_.hasLayer(N)&&_.removeLayer(N),N.addTo(_),console.log(`Rcupration: couche ${x} rajoute`)}catch(F){throw console.error("chec de la rcupration:",F),new Error("Impossible d'ajouter la nouvelle couche")}}s.value=N,i.value=x;try{_.setView(M,k,{animate:!1,duration:0,noMoveStart:!0}),console.log(`Vue rinitialise: centre=${M}, zoom=${k}`)}catch(T){console.warn("Erreur lors de la rinitialisation de la vue:",T)}try{_.invalidateSize({animate:!1,pan:!1})}catch(T){console.warn("Erreur lors du rafrachissement de la carte:",T)}setTimeout(()=>{_.options.zoomAnimation=!0,_.options.fadeAnimation=!0,_.options.markerZoomAnimation=!0,console.log("Animations restaures")},500)}catch(_){if(console.error("Erreur lors du changement de carte de base:",_),t.value)try{const M=t.value;M.eachLayer(N=>{(N instanceof Ft.TileLayer||N instanceof Ft.LayerGroup)&&M.removeLayer(N)});const k=u[x];k.addTo(M),s.value=k,i.value=x,M.options.zoomAnimation=!0,M.options.fadeAnimation=!0,M.options.markerZoomAnimation=!0,M.invalidateSize({animate:!1,pan:!1}),console.log("Rcupration effectue aprs erreur")}catch(M){console.error("Erreur lors de la rcupration aprs chec:",M)}}},"changeBaseMap","useMapState"),g=dn.createAsyncPerformanceTracker(async()=>{if(!(!t.value||!r.value))try{const x=await dn.measureAsync("searchLocation:fetchData",async()=>await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(r.value)}`),"useMapState"),_=await dn.measureAsync("searchLocation:parseResponse",async()=>await x.json(),"useMapState");_&&_.length>0&&dn.measure("searchLocation:updateView",()=>{const{lat:M,lon:k}=_[0];t.value.setView([M,k],13,{animate:i.value!=="Cadastre"})},"useMapState")}catch(x){console.error("Erreur lors de la recherche de localisation:",x)}},"searchLocation","useMapState");return{map:t,searchQuery:r,currentBaseMap:i,baseMaps:u,initMap:f,searchLocation:g,changeBaseMap:d,cleanup:()=>{const x=n("cleanup","useMapState");t.value&&(t.value.remove(),t.value=null),s.value&&(s.value=null),x()},isPerformanceEnabled:e}}const py=Dp("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[],performanceMonitor:gd()}),getters:{getPlanById:e=>n=>e.plans.find(t=>t.id===n),hasUnsavedChanges:e=>e.unsavedChanges,getCurrentPlanHistory:e=>e.planHistory},actions:{async fetchPlans(){var t,r;const e=this.performanceMonitor.startMeasure("fetchPlans","IrrigationStore"),n=ma();this.loading=!0;try{let i="/plans/";const s={};n.isSalarie?s.salarie=(t=n.user)==null?void 0:t.id:n.isVisiteur&&(s.visiteur=(r=n.user)==null?void 0:r.id);const o=await this.performanceMonitor.measureAsync("fetchPlans_apiCall",()=>Rn.get(i,{params:s}),"IrrigationStore");this.plans=o.data}catch(i){throw this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,e()}},async fetchPlansWithDetails(){var t,r;const e=this.performanceMonitor.startMeasure("fetchPlansWithDetails","IrrigationStore"),n=ma();this.loading=!0;try{let i="/plans/";const s={include_details:!0};n.isSalarie?s.salarie=(t=n.user)==null?void 0:t.id:n.isVisiteur&&(s.visiteur=(r=n.user)==null?void 0:r.id);const o=await this.performanceMonitor.measureAsync("fetchPlansWithDetails_apiCall",()=>Rn.get(i,{params:s}),"IrrigationStore"),u=this.performanceMonitor.measure("fetchPlansWithDetails_processResponse",()=>o.data.map(f=>({...f,entreprise:typeof f.entreprise=="object"?f.entreprise:null,salarie:typeof f.salarie=="object"?f.salarie:null,visiteur:typeof f.visiteur=="object"?f.visiteur:null})),"IrrigationStore");return this.plans=u,{data:u}}catch(i){throw console.error("[IrrigationStore] Error fetching plans:",i),this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,e()}},async fetchClientPlans(e){this.loading=!0;try{return(await jd.getVisiteurPlans(e)).data}catch(n){throw this.error="Erreur lors du chargement des plans du client",n}finally{this.loading=!1}},async createPlan(e){var r;const n=this.performanceMonitor.startMeasure("createPlan","IrrigationStore");this.clearCurrentPlan(),this.loading=!0;const t=Vu();try{const i=ma();((r=i.user)==null?void 0:r.user_type)==="visiteur"&&(e={...e,visiteur:i.user.id,salarie_id:i.user.enterprise_id,entreprise_id:i.user.enterprise_id});const s=this.performanceMonitor.measure("createPlan_formatData",()=>({...e,entreprise:e.entreprise?typeof e.entreprise=="object"&&e.entreprise&&"id"in e.entreprise?e.entreprise.id:Number(e.entreprise):null,salarie:e.salarie?typeof e.salarie=="object"&&e.salarie&&"id"in e.salarie?e.salarie.id:Number(e.salarie):null,visiteur:e.visiteur?typeof e.visiteur=="object"&&e.visiteur&&"id"in e.visiteur?e.visiteur.id:Number(e.visiteur):null}),"IrrigationStore"),o=await this.performanceMonitor.measureAsync("createPlan_apiCall",()=>jd.createPlan(s),"IrrigationStore");return this.plans.push(o.data),t.success(`Le plan "${o.data.nom}" a t cr avec succs`),o.data}catch(i){const s=i instanceof Error?i.message:String(i);throw console.error("Error creating plan:",s),this.error=s,t.error(`Erreur lors de la cration du plan : ${s}`),i}finally{this.loading=!1,n()}},async createPlanForClient(e,n){this.clearCurrentPlan(),this.loading=!0;try{const t={...e,visiteur:n},r=await jd.createPlanForVisiteur(t);return this.plans.push(r.data),r.data}catch(t){const r=t instanceof Error?t.message:String(t);throw console.error("Error creating plan for client:",r),this.error="Erreur lors de la cration du plan pour le client",t}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(e){const n=this.performanceMonitor.startMeasure("savePlan","IrrigationStore");if(!this.unsavedChanges){console.log("[IrrigationStore][savePlan] Aucun changement  sauvegarder"),n();return}this.loading=!0;try{const t=await this.performanceMonitor.measureAsync("savePlan_apiCall",()=>{var r;return Rn.patch(`/plans/${e}/`,{...this.currentPlan,version:((r=this.currentPlan)==null?void 0:r.version)||1})},"IrrigationStore");return this.performanceMonitor.measure("savePlan_updateState",()=>{var i;const r=this.plans.findIndex(s=>s.id===e);r!==-1&&(this.plans[r]=t.data),((i=this.currentPlan)==null?void 0:i.id)===e&&(this.currentPlan=t.data)},"IrrigationStore"),this.unsavedChanges=!1,t.data}catch(t){throw console.error("[IrrigationStore][savePlan] ERREUR:",t),this.error="Erreur lors de la sauvegarde du plan",t}finally{this.loading=!1,n()}},async updatePlanDetails(e,n){const t=this.performanceMonitor.startMeasure("updatePlanDetails","IrrigationStore"),r=Vu();try{const i=await this.performanceMonitor.measureAsync("updatePlanDetails_apiCall",()=>{const{visiteur_id:s,salarie_id:o,entreprise_id:u,...f}=n,d={...f};return s!==void 0&&(d.visiteur_id=s),o!==void 0&&(d.salarie_id=o),u!==void 0&&(d.entreprise_id=u),Rn.patch(`/plans/${e}/`,d)},"IrrigationStore");return this.performanceMonitor.measure("updatePlanDetails_updateState",()=>{this.currentPlan&&this.currentPlan.id===e&&(this.currentPlan={...this.currentPlan,...i.data});const s=this.plans.findIndex(o=>o.id===e);s!==-1&&(this.plans[s]={...this.plans[s],...i.data})},"IrrigationStore"),i.data}catch(i){throw console.error("Erreur lors de la mise  jour du plan:",i),r.error(`Erreur lors de la mise  jour du plan : ${i instanceof Error?i.message:String(i)}`),i}finally{t()}},async fetchPlanHistory(e){this.loading=!0;try{const n=await Rn.get(`/plans/${e}/historique/`);return this.planHistory=n.data,n.data}catch(n){throw this.error="Erreur lors de la rcupration de l'historique",n}finally{this.loading=!1}},async restorePlanVersion(e,n){var t;this.loading=!0;try{const r=await Rn.post(`/plans/${e}/restaurer/`,{version_id:n});((t=this.currentPlan)==null?void 0:t.id)===e&&(this.currentPlan=r.data);const i=this.plans.findIndex(s=>s.id===e);return i!==-1&&(this.plans[i]=r.data),r.data}catch(r){throw this.error="Erreur lors de la restauration de la version",r}finally{this.loading=!1}},setCurrentPlan(e){this.currentPlan=e,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.unsavedChanges=!1,this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(e){var t;this.loading=!0;const n=Vu();try{const r=this.plans.find(i=>i.id===e);await jd.deletePlan(e),this.plans=this.plans.filter(i=>i.id!==e),((t=this.currentPlan)==null?void 0:t.id)===e&&this.clearCurrentPlan(),n.success(`Le plan "${(r==null?void 0:r.nom)||""}" a t supprim avec succs`)}catch(r){throw this.error="Erreur lors de la suppression du plan",n.error(`Erreur lors de la suppression du plan : ${r instanceof Error?r.message:String(r)}`),r}finally{this.loading=!1}}}}),UR={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[3001] overflow-y-auto"},VR={class:"bg-white w-full h-full md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 relative overflow-y-auto"},GR={class:"p-4 md:p-6 pt-0 overflow-y-auto max-h-[calc(100vh-80px)] md:max-h-[calc(90vh-80px)]"},HR={key:0,class:"mb-4"},qR={key:0,class:"animate-pulse"},WR=["value"],ZR={key:1,class:"mb-4"},KR={key:0,class:"animate-pulse"},YR=["disabled"],JR={value:null},XR=["value"],QR={key:2,class:"mb-4"},eF={key:0,class:"animate-pulse"},tF=["disabled"],nF={value:null},rF=["value"],iF={class:"mb-4"},oF={class:"mb-6"},sF={class:"flex justify-end space-x-3"},aF=["disabled"],lF={key:0},uF={key:1},px=cs({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","salarieSelected","visiteurSelected"],setup(e,{expose:n,emit:t}){function r(B){return B?typeof B=="object"?B.id:B:null}function i(B){if(B===null)throw new Error("Invalid ID");return B}const s=e,o=t,u=ma(),f=py(),d=ud(),g=jt(!1),y=jt(null),x=jt([]),_=jt([]),M=jt([]),k=jt(null),N=jt(null),T=jt(!1),F=jt(!1),K=jt(!1),Q=jt({nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),he=cr(()=>{var B,z,W;return((B=u.user)==null?void 0:B.user_type)==="admin"?Q.value.nom.trim()&&Q.value.entreprise&&Q.value.salarie&&Q.value.visiteur:((z=u.user)==null?void 0:z.user_type)==="entreprise"?Q.value.nom.trim()&&Q.value.salarie&&Q.value.visiteur:((W=u.user)==null?void 0:W.user_type)==="salarie"?Q.value.nom.trim()&&Q.value.visiteur:Q.value.nom.trim()});Co(()=>Q.value.entreprise,async B=>{if(!s.modelValue)return;Q.value.salarie=null,Q.value.visiteur=null,_.value=[];const z=r(B);console.log("[NewPlanModal] Entreprise slectionne:",z),z?await fe(z):x.value=[]}),Co(()=>Q.value.salarie,async B=>{if(!s.modelValue)return;Q.value.visiteur=null;const z=r(B);z?await me(z):_.value=[]}),Co(()=>s.modelValue,B=>{var z,W,V;B?((z=u.user)==null?void 0:z.user_type)==="admin"?R():((W=u.user)==null?void 0:W.user_type)==="entreprise"?fe(u.user.id):((V=u.user)==null?void 0:V.user_type)==="salarie"&&me(u.user.id):(Q.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},k.value=null,N.value=null,_.value=[],x.value=[],M.value=[],y.value=null)});async function fe(B){T.value=!0;try{console.log("[NewPlanModal] Chargement des salaries pour entreprise:",B);const z=await Qa.getUsers({role:"SALARIE",entreprise:B});console.log("[NewPlanModal] Rponse salaries:",z.data),x.value=z.data}catch(z){console.error("[NewPlanModal] Error loading salaries:",z),x.value=[]}finally{T.value=!1}}async function me(B){F.value=!0;try{const z=await Qa.getUsers({role:"VISITEUR",salarie:B});_.value=z.data}catch(z){console.error("[NewPlanModal] Error loading visiteurs:",z),_.value=[]}finally{F.value=!1}}async function G(B){s.modelValue&&(k.value=B,Q.value.salarie=B.id,await me(B.id),o("salarieSelected",B))}function $(B){s.modelValue&&(N.value=B,Q.value.visiteur=B.id,o("visiteurSelected",B))}function X(){o("update:modelValue",!1),Q.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},k.value=null,N.value=null,_.value=[],y.value=null}async function R(){K.value=!0;try{const B=await u.fetchEnterprises();M.value=B}catch(B){console.error("[NewPlanModal] Error loading entreprises:",B),M.value=[]}finally{K.value=!1}}async function O(){var B,z;y.value=null,g.value=!0;try{const W={nom:Q.value.nom.trim(),description:Q.value.description.trim()},V=u.user;if(!V)throw new Error("User not found");if(V.user_type==="admin"){if(!Q.value.entreprise||!Q.value.salarie||!Q.value.visiteur)throw new Error("Missing required fields");W.entreprise=i(r(Q.value.entreprise)),W.salarie=i(r(Q.value.salarie)),W.visiteur=Q.value.visiteur}else if(V.user_type==="entreprise"){if(!Q.value.salarie||!Q.value.visiteur)throw new Error("Missing required fields");W.entreprise=V.id,W.salarie=i(r(Q.value.salarie)),W.visiteur=Q.value.visiteur}else if(V.user_type==="salarie"){if(!V.entreprise||!Q.value.visiteur)throw new Error("Missing required fields");W.entreprise=V.entreprise.id,W.salarie=V.id,W.visiteur=Q.value.visiteur}else if(V.user_type==="visiteur"){if(!V.entreprise||!V.salarie)throw new Error("Missing required fields");W.entreprise=V.entreprise.id,W.salarie=V.salarie.id,W.visiteur=V.id}console.log("Donnes du plan  crer:",W),f.clearCurrentPlan(),d.setCurrentPlan(null);const oe=await f.createPlan(W);o("created",oe.id),X()}catch(W){console.error("[NewPlanModal] Error creating plan:",W),console.error("Response data:",(B=W.response)==null?void 0:B.data);let V="Une erreur est survenue lors de la cration du plan";(z=W.response)!=null&&z.data&&(typeof W.response.data=="object"?V=Object.entries(W.response.data).map(([oe,ie])=>Array.isArray(ie)?`${oe}: ${ie.join(", ")}`:`${oe}: ${ie}`).join(`
`):typeof W.response.data=="string"&&(V=W.response.data)),y.value=V}finally{g.value=!1}}return n({salaries:x,visiteurs:_,selectedSalarie:k,selectedVisiteur:N,loadSalaries:fe,loadVisiteurs:me,selectSalarie:G,selectVisiteur:$}),(B,z)=>{var W,V,oe,ie;return B.modelValue?($e(),He("div",UR,[E("div",VR,[E("div",{class:"flex justify-between items-center mb-4 sticky top-0 bg-white p-4 md:p-6 pb-4 border-b z-10"},[z[6]||(z[6]=E("h2",{class:"text-xl font-semibold text-gray-900"},"Crer un nouveau plan",-1)),E("button",{onClick:X,class:"text-gray-400 hover:text-gray-500"},z[5]||(z[5]=[E("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("div",GR,[Wn(u).isAdmin?($e(),He("div",HR,[z[9]||(z[9]=E("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Entreprise",-1)),K.value?($e(),He("div",qR,z[7]||(z[7]=[E("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Fn(($e(),He("select",{key:1,"onUpdate:modelValue":z[0]||(z[0]=xe=>Q.value.entreprise=xe),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[z[8]||(z[8]=E("option",{value:null},"Slectionnez une entreprise",-1)),($e(!0),He(Tn,null,xr(M.value,xe=>($e(),He("option",{key:xe.id,value:xe.id},Wt(Wn(Vl)(xe)),9,WR))),128))],512)),[[uo,Q.value.entreprise]])])):cn("",!0),((W=Wn(u).user)==null?void 0:W.user_type)==="admin"||((V=Wn(u).user)==null?void 0:V.user_type)==="entreprise"?($e(),He("div",ZR,[z[11]||(z[11]=E("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Salarie",-1)),T.value?($e(),He("div",KR,z[10]||(z[10]=[E("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Fn(($e(),He("select",{key:1,id:"edit-salarie","onUpdate:modelValue":z[1]||(z[1]=xe=>Q.value.salarie=xe),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:Wn(u).isAdmin&&!Q.value.entreprise},[E("option",JR,Wt(x.value.length?"Slectionnez un salarie":"Aucun salarie disponible"),1),($e(!0),He(Tn,null,xr(x.value,xe=>($e(),He("option",{key:xe.id,value:xe.id},Wt(Wn(Vl)(xe)),9,XR))),128))],8,YR)),[[uo,Q.value.salarie]])])):cn("",!0),((oe=Wn(u).user)==null?void 0:oe.user_type)!=="visiteur"?($e(),He("div",QR,[z[13]||(z[13]=E("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Visiteur",-1)),F.value?($e(),He("div",eF,z[12]||(z[12]=[E("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Fn(($e(),He("select",{key:1,id:"edit-visiteur","onUpdate:modelValue":z[2]||(z[2]=xe=>Q.value.visiteur=xe),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!_.value.length||((ie=Wn(u).user)==null?void 0:ie.user_type)!=="salarie"&&!Q.value.salarie},[E("option",nF,Wt(_.value.length?"Slectionnez un visiteur":"Aucun visiteur disponible"),1),($e(!0),He(Tn,null,xr(_.value,xe=>($e(),He("option",{key:xe.id,value:xe.id},Wt(Wn(Vl)(xe)),9,rF))),128))],8,tF)),[[uo,Q.value.visiteur]])])):cn("",!0),E("div",iF,[z[14]||(z[14]=E("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),Fn(E("input",{id:"edit-nom","onUpdate:modelValue":z[3]||(z[3]=xe=>Q.value.nom=xe),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[ri,Q.value.nom]])]),E("div",oF,[z[15]||(z[15]=E("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),Fn(E("textarea",{id:"edit-description","onUpdate:modelValue":z[4]||(z[4]=xe=>Q.value.description=xe),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[ri,Q.value.description]])]),E("div",sF,[E("button",{onClick:X,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),E("button",{onClick:O,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!he.value||g.value},[g.value?($e(),He("span",lF,"Cration en cours...")):($e(),He("span",uF,"Crer"))],8,aF)])])])])):cn("",!0)}}});function Xi(e){"@babel/helpers - typeof";return Xi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Xi(e)}var Fa=Uint8Array,Gl=Uint16Array,gy=Int32Array,rm=new Fa([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),im=new Fa([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),m1=new Fa([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),gx=function(e,n){for(var t=new Gl(31),r=0;r<31;++r)t[r]=n+=1<<e[r-1];for(var i=new gy(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return{b:t,r:i}},mx=gx(rm,2),vx=mx.b,v1=mx.r;vx[28]=258,v1[258]=28;var yx=gx(im,0),cF=yx.b,xb=yx.r,y1=new Gl(32768);for(var Eo=0;Eo<32768;++Eo){var rf=(Eo&43690)>>1|(Eo&21845)<<1;rf=(rf&52428)>>2|(rf&13107)<<2,rf=(rf&61680)>>4|(rf&3855)<<4,y1[Eo]=((rf&65280)>>8|(rf&255)<<8)>>1}var pc=function(e,n,t){for(var r=e.length,i=0,s=new Gl(n);i<r;++i)e[i]&&++s[e[i]-1];var o=new Gl(n);for(i=1;i<n;++i)o[i]=o[i-1]+s[i-1]<<1;var u;if(t){u=new Gl(1<<n);var f=15-n;for(i=0;i<r;++i)if(e[i])for(var d=i<<4|e[i],g=n-e[i],y=o[e[i]-1]++<<g,x=y|(1<<g)-1;y<=x;++y)u[y1[y]>>f]=d}else for(u=new Gl(r),i=0;i<r;++i)e[i]&&(u[i]=y1[o[e[i]-1]++]>>15-e[i]);return u},Pf=new Fa(288);for(var Eo=0;Eo<144;++Eo)Pf[Eo]=8;for(var Eo=144;Eo<256;++Eo)Pf[Eo]=9;for(var Eo=256;Eo<280;++Eo)Pf[Eo]=7;for(var Eo=280;Eo<288;++Eo)Pf[Eo]=8;var Pp=new Fa(32);for(var Eo=0;Eo<32;++Eo)Pp[Eo]=5;var fF=pc(Pf,9,0),hF=pc(Pf,9,1),dF=pc(Pp,5,0),pF=pc(Pp,5,1),sv=function(e){for(var n=e[0],t=1;t<e.length;++t)e[t]>n&&(n=e[t]);return n},Nu=function(e,n,t){var r=n/8|0;return(e[r]|e[r+1]<<8)>>(n&7)&t},av=function(e,n){var t=n/8|0;return(e[t]|e[t+1]<<8|e[t+2]<<16)>>(n&7)},my=function(e){return(e+7)/8|0},_x=function(e,n,t){return(t==null||t>e.length)&&(t=e.length),new Fa(e.subarray(n,t))},gF=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ru=function(e,n,t){var r=new Error(n||gF[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,Ru),!t)throw r;return r},mF=function(e,n,t,r){var i=e.length,s=0;if(!i||n.f&&!n.l)return t||new Fa(0);var o=!t,u=o||n.i!=2,f=n.i;o&&(t=new Fa(i*3));var d=function(Me){var Ge=t.length;if(Me>Ge){var ce=new Fa(Math.max(Ge*2,Me));ce.set(t),t=ce}},g=n.f||0,y=n.p||0,x=n.b||0,_=n.l,M=n.d,k=n.m,N=n.n,T=i*8;do{if(!_){g=Nu(e,y,1);var F=Nu(e,y+1,3);if(y+=3,F)if(F==1)_=hF,M=pF,k=9,N=5;else if(F==2){var fe=Nu(e,y,31)+257,me=Nu(e,y+10,15)+4,G=fe+Nu(e,y+5,31)+1;y+=14;for(var $=new Fa(G),X=new Fa(19),R=0;R<me;++R)X[m1[R]]=Nu(e,y+R*3,7);y+=me*3;for(var O=sv(X),B=(1<<O)-1,z=pc(X,O,1),R=0;R<G;){var W=z[Nu(e,y,B)];y+=W&15;var K=W>>4;if(K<16)$[R++]=K;else{var V=0,oe=0;for(K==16?(oe=3+Nu(e,y,3),y+=2,V=$[R-1]):K==17?(oe=3+Nu(e,y,7),y+=3):K==18&&(oe=11+Nu(e,y,127),y+=7);oe--;)$[R++]=V}}var ie=$.subarray(0,fe),xe=$.subarray(fe);k=sv(ie),N=sv(xe),_=pc(ie,k,1),M=pc(xe,N,1)}else Ru(1);else{var K=my(y)+4,Q=e[K-4]|e[K-3]<<8,he=K+Q;if(he>i){f&&Ru(0);break}u&&d(x+Q),t.set(e.subarray(K,he),x),n.b=x+=Q,n.p=y=he*8,n.f=g;continue}if(y>T){f&&Ru(0);break}}u&&d(x+131072);for(var Ee=(1<<k)-1,Te=(1<<N)-1,Y=y;;Y=y){var V=_[av(e,y)&Ee],q=V>>4;if(y+=V&15,y>T){f&&Ru(0);break}if(V||Ru(2),q<256)t[x++]=q;else if(q==256){Y=y,_=null;break}else{var ee=q-254;if(q>264){var R=q-257,ue=rm[R];ee=Nu(e,y,(1<<ue)-1)+vx[R],y+=ue}var le=M[av(e,y)&Te],pe=le>>4;le||Ru(3),y+=le&15;var xe=cF[pe];if(pe>3){var ue=im[pe];xe+=av(e,y)&(1<<ue)-1,y+=ue}if(y>T){f&&Ru(0);break}u&&d(x+131072);var Z=x+ee;if(x<xe){var D=s-xe,ke=Math.min(xe,Z);for(D+x<0&&Ru(3);x<ke;++x)t[x]=r[D+x]}for(;x<Z;++x)t[x]=t[x-xe]}}n.l=_,n.p=Y,n.b=x,n.f=g,_&&(g=1,n.m=k,n.d=M,n.n=N)}while(!g);return x!=t.length&&o?_x(t,0,x):t.subarray(0,x)},Oc=function(e,n,t){t<<=n&7;var r=n/8|0;e[r]|=t,e[r+1]|=t>>8},Nd=function(e,n,t){t<<=n&7;var r=n/8|0;e[r]|=t,e[r+1]|=t>>8,e[r+2]|=t>>16},lv=function(e,n){for(var t=[],r=0;r<e.length;++r)e[r]&&t.push({s:r,f:e[r]});var i=t.length,s=t.slice();if(!i)return{t:wx,l:0};if(i==1){var o=new Fa(t[0].s+1);return o[t[0].s]=1,{t:o,l:1}}t.sort(function(he,fe){return he.f-fe.f}),t.push({s:-1,f:25001});var u=t[0],f=t[1],d=0,g=1,y=2;for(t[0]={s:-1,f:u.f+f.f,l:u,r:f};g!=i-1;)u=t[t[d].f<t[y].f?d++:y++],f=t[d!=g&&t[d].f<t[y].f?d++:y++],t[g++]={s:-1,f:u.f+f.f,l:u,r:f};for(var x=s[0].s,r=1;r<i;++r)s[r].s>x&&(x=s[r].s);var _=new Gl(x+1),M=_1(t[g-1],_,0);if(M>n){var r=0,k=0,N=M-n,T=1<<N;for(s.sort(function(fe,me){return _[me.s]-_[fe.s]||fe.f-me.f});r<i;++r){var F=s[r].s;if(_[F]>n)k+=T-(1<<M-_[F]),_[F]=n;else break}for(k>>=N;k>0;){var K=s[r].s;_[K]<n?k-=1<<n-_[K]++-1:++r}for(;r>=0&&k;--r){var Q=s[r].s;_[Q]==n&&(--_[Q],++k)}M=n}return{t:new Fa(_),l:M}},_1=function(e,n,t){return e.s==-1?Math.max(_1(e.l,n,t+1),_1(e.r,n,t+1)):n[e.s]=t},Lb=function(e){for(var n=e.length;n&&!e[--n];);for(var t=new Gl(++n),r=0,i=e[0],s=1,o=function(f){t[r++]=f},u=1;u<=n;++u)if(e[u]==i&&u!=n)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=e[u]}return{c:t.subarray(0,r),n}},Dd=function(e,n){for(var t=0,r=0;r<n.length;++r)t+=e[r]*n[r];return t},bx=function(e,n,t){var r=t.length,i=my(n+2);e[i]=r&255,e[i+1]=r>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var s=0;s<r;++s)e[i+s+4]=t[s];return(i+4+r)*8},Sb=function(e,n,t,r,i,s,o,u,f,d,g){Oc(n,g++,t),++i[256];for(var y=lv(i,15),x=y.t,_=y.l,M=lv(s,15),k=M.t,N=M.l,T=Lb(x),F=T.c,K=T.n,Q=Lb(k),he=Q.c,fe=Q.n,me=new Gl(19),G=0;G<F.length;++G)++me[F[G]&31];for(var G=0;G<he.length;++G)++me[he[G]&31];for(var $=lv(me,7),X=$.t,R=$.l,O=19;O>4&&!X[m1[O-1]];--O);var B=d+5<<3,z=Dd(i,Pf)+Dd(s,Pp)+o,W=Dd(i,x)+Dd(s,k)+o+14+3*O+Dd(me,X)+2*me[16]+3*me[17]+7*me[18];if(f>=0&&B<=z&&B<=W)return bx(n,g,e.subarray(f,f+d));var V,oe,ie,xe;if(Oc(n,g,1+(W<z)),g+=2,W<z){V=pc(x,_,0),oe=x,ie=pc(k,N,0),xe=k;var Ee=pc(X,R,0);Oc(n,g,K-257),Oc(n,g+5,fe-1),Oc(n,g+10,O-4),g+=14;for(var G=0;G<O;++G)Oc(n,g+3*G,X[m1[G]]);g+=3*O;for(var Te=[F,he],Y=0;Y<2;++Y)for(var q=Te[Y],G=0;G<q.length;++G){var ee=q[G]&31;Oc(n,g,Ee[ee]),g+=X[ee],ee>15&&(Oc(n,g,q[G]>>5&127),g+=q[G]>>12)}}else V=fF,oe=Pf,ie=dF,xe=Pp;for(var G=0;G<u;++G){var ue=r[G];if(ue>255){var ee=ue>>18&31;Nd(n,g,V[ee+257]),g+=oe[ee+257],ee>7&&(Oc(n,g,ue>>23&31),g+=rm[ee]);var le=ue&31;Nd(n,g,ie[le]),g+=xe[le],le>3&&(Nd(n,g,ue>>5&8191),g+=im[le])}else Nd(n,g,V[ue]),g+=oe[ue]}return Nd(n,g,V[256]),g+oe[256]},vF=new gy([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),wx=new Fa(0),yF=function(e,n,t,r,i,s){var o=s.z||e.length,u=new Fa(r+o+5*(1+Math.ceil(o/7e3))+i),f=u.subarray(r,u.length-i),d=s.l,g=(s.r||0)&7;if(n){g&&(f[0]=s.r>>3);for(var y=vF[n-1],x=y>>13,_=y&8191,M=(1<<t)-1,k=s.p||new Gl(32768),N=s.h||new Gl(M+1),T=Math.ceil(t/3),F=2*T,K=function(ne){return(e[ne]^e[ne+1]<<T^e[ne+2]<<F)&M},Q=new gy(25e3),he=new Gl(288),fe=new Gl(32),me=0,G=0,$=s.i||0,X=0,R=s.w||0,O=0;$+2<o;++$){var B=K($),z=$&32767,W=N[B];if(k[z]=W,N[B]=z,R<=$){var V=o-$;if((me>7e3||X>24576)&&(V>423||!d)){g=Sb(e,f,0,Q,he,fe,G,X,O,$-O,g),X=me=G=0,O=$;for(var oe=0;oe<286;++oe)he[oe]=0;for(var oe=0;oe<30;++oe)fe[oe]=0}var ie=2,xe=0,Ee=_,Te=z-W&32767;if(V>2&&B==K($-Te))for(var Y=Math.min(x,V)-1,q=Math.min(32767,$),ee=Math.min(258,V);Te<=q&&--Ee&&z!=W;){if(e[$+ie]==e[$+ie-Te]){for(var ue=0;ue<ee&&e[$+ue]==e[$+ue-Te];++ue);if(ue>ie){if(ie=ue,xe=Te,ue>Y)break;for(var le=Math.min(Te,ue-2),pe=0,oe=0;oe<le;++oe){var Z=$-Te+oe&32767,D=k[Z],ke=Z-D&32767;ke>pe&&(pe=ke,W=Z)}}}z=W,W=k[z],Te+=z-W&32767}if(xe){Q[X++]=268435456|v1[ie]<<18|xb[xe];var Me=v1[ie]&31,Ge=xb[xe]&31;G+=rm[Me]+im[Ge],++he[257+Me],++fe[Ge],R=$+ie,++me}else Q[X++]=e[$],++he[e[$]]}}for($=Math.max($,R);$<o;++$)Q[X++]=e[$],++he[e[$]];g=Sb(e,f,d,Q,he,fe,G,X,O,$-O,g),d||(s.r=g&7|f[g/8|0]<<3,g-=7,s.h=N,s.p=k,s.i=$,s.w=R)}else{for(var $=s.w||0;$<o+d;$+=65535){var ce=$+65535;ce>=o&&(f[g/8|0]=d,ce=o),g=bx(f,g+1,e.subarray($,ce))}s.i=o}return _x(u,0,r+my(g)+i)},xx=function(){var e=1,n=0;return{p:function(t){for(var r=e,i=n,s=t.length|0,o=0;o!=s;){for(var u=Math.min(o+2655,s);o<u;++o)i+=r+=t[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}e=r,n=i},d:function(){return e%=65521,n%=65521,(e&255)<<24|(e&65280)<<8|(n&255)<<8|n>>8}}},_F=function(e,n,t,r,i){if(!i&&(i={l:1},n.dictionary)){var s=n.dictionary.subarray(-32768),o=new Fa(s.length+e.length);o.set(s),o.set(e,s.length),e=o,i.w=s.length}return yF(e,n.level==null?6:n.level,n.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+n.mem,t,r,i)},Lx=function(e,n,t){for(;t;++n)e[n]=t,t>>>=8},bF=function(e,n){var t=n.level,r=t==0?0:t<6?1:t==9?3:2;if(e[0]=120,e[1]=r<<6|(n.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,n.dictionary){var i=xx();i.p(n.dictionary),Lx(e,2,i.d())}},wF=function(e,n){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Ru(6,"invalid zlib data"),(e[1]>>5&1)==1&&Ru(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function b1(e,n){n||(n={});var t=xx();t.p(e);var r=_F(e,n,n.dictionary?6:2,4);return bF(r,n),Lx(r,r.length-4,t.d()),r}function xF(e,n){return mF(e.subarray(wF(e),-4),{i:2},n,n)}var LF=typeof TextDecoder<"u"&&new TextDecoder,SF=0;try{LF.decode(wx,{stream:!0}),SF=1}catch{}var Ir=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function uv(){Ir.console&&typeof Ir.console.log=="function"&&Ir.console.log.apply(Ir.console,arguments)}var lo={log:uv,warn:function(e){Ir.console&&(typeof Ir.console.warn=="function"?Ir.console.warn.apply(Ir.console,arguments):uv.call(null,arguments))},error:function(e){Ir.console&&(typeof Ir.console.error=="function"?Ir.console.error.apply(Ir.console,arguments):uv(e))}};function cv(e,n,t){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){Zf(r.response,n,t)},r.onerror=function(){lo.error("could not download file")},r.send()}function Cb(e){var n=new XMLHttpRequest;n.open("HEAD",e,!1);try{n.send()}catch{}return n.status>=200&&n.status<=299}function bg(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}}var ap,w1,Zf=Ir.saveAs||((typeof window>"u"?"undefined":Xi(window))!=="object"||window!==Ir?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,n,t){var r=Ir.URL||Ir.webkitURL,i=document.createElement("a");n=n||e.name||"download",i.download=n,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?Cb(i.href)?cv(e,n,t):bg(i,i.target="_blank"):bg(i)):(i.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){bg(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,n,t){if(n=n||e.name||"download",typeof e=="string")if(Cb(e))cv(e,n,t);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){bg(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Xi(s)!=="object"&&(lo.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(e,t),n)}:function(e,n,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return cv(e,n,t);var i=e.type==="application/octet-stream",s=/constructor/i.test(Ir.HTMLElement)||Ir.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Xi(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var g=u.result;g=o?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=g:location=g,r=null},u.readAsDataURL(e)}else{var f=Ir.URL||Ir.webkitURL,d=f.createObjectURL(e);r?r.location=d:location.href=d,r=null,setTimeout(function(){f.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Sx(e){var n;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,s=t[r].process,o=i.exec(e);o&&(n=s(o),this.r=n[0],this.g=n[1],this.b=n[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),f=this.g.toString(16),d=this.b.toString(16);return u.length==1&&(u="0"+u),f.length==1&&(f="0"+f),d.length==1&&(d="0"+d),"#"+u+f+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function fv(e,n){var t=e[0],r=e[1],i=e[2],s=e[3];t=ka(t,r,i,s,n[0],7,-680876936),s=ka(s,t,r,i,n[1],12,-389564586),i=ka(i,s,t,r,n[2],17,606105819),r=ka(r,i,s,t,n[3],22,-1044525330),t=ka(t,r,i,s,n[4],7,-176418897),s=ka(s,t,r,i,n[5],12,1200080426),i=ka(i,s,t,r,n[6],17,-1473231341),r=ka(r,i,s,t,n[7],22,-45705983),t=ka(t,r,i,s,n[8],7,1770035416),s=ka(s,t,r,i,n[9],12,-1958414417),i=ka(i,s,t,r,n[10],17,-42063),r=ka(r,i,s,t,n[11],22,-1990404162),t=ka(t,r,i,s,n[12],7,1804603682),s=ka(s,t,r,i,n[13],12,-40341101),i=ka(i,s,t,r,n[14],17,-1502002290),t=Ta(t,r=ka(r,i,s,t,n[15],22,1236535329),i,s,n[1],5,-165796510),s=Ta(s,t,r,i,n[6],9,-1069501632),i=Ta(i,s,t,r,n[11],14,643717713),r=Ta(r,i,s,t,n[0],20,-373897302),t=Ta(t,r,i,s,n[5],5,-701558691),s=Ta(s,t,r,i,n[10],9,38016083),i=Ta(i,s,t,r,n[15],14,-660478335),r=Ta(r,i,s,t,n[4],20,-405537848),t=Ta(t,r,i,s,n[9],5,568446438),s=Ta(s,t,r,i,n[14],9,-1019803690),i=Ta(i,s,t,r,n[3],14,-187363961),r=Ta(r,i,s,t,n[8],20,1163531501),t=Ta(t,r,i,s,n[13],5,-1444681467),s=Ta(s,t,r,i,n[2],9,-51403784),i=Ta(i,s,t,r,n[7],14,1735328473),t=Na(t,r=Ta(r,i,s,t,n[12],20,-1926607734),i,s,n[5],4,-378558),s=Na(s,t,r,i,n[8],11,-2022574463),i=Na(i,s,t,r,n[11],16,1839030562),r=Na(r,i,s,t,n[14],23,-35309556),t=Na(t,r,i,s,n[1],4,-1530992060),s=Na(s,t,r,i,n[4],11,1272893353),i=Na(i,s,t,r,n[7],16,-155497632),r=Na(r,i,s,t,n[10],23,-1094730640),t=Na(t,r,i,s,n[13],4,681279174),s=Na(s,t,r,i,n[0],11,-358537222),i=Na(i,s,t,r,n[3],16,-722521979),r=Na(r,i,s,t,n[6],23,76029189),t=Na(t,r,i,s,n[9],4,-640364487),s=Na(s,t,r,i,n[12],11,-421815835),i=Na(i,s,t,r,n[15],16,530742520),t=Da(t,r=Na(r,i,s,t,n[2],23,-995338651),i,s,n[0],6,-198630844),s=Da(s,t,r,i,n[7],10,1126891415),i=Da(i,s,t,r,n[14],15,-1416354905),r=Da(r,i,s,t,n[5],21,-57434055),t=Da(t,r,i,s,n[12],6,1700485571),s=Da(s,t,r,i,n[3],10,-1894986606),i=Da(i,s,t,r,n[10],15,-1051523),r=Da(r,i,s,t,n[1],21,-2054922799),t=Da(t,r,i,s,n[8],6,1873313359),s=Da(s,t,r,i,n[15],10,-30611744),i=Da(i,s,t,r,n[6],15,-1560198380),r=Da(r,i,s,t,n[13],21,1309151649),t=Da(t,r,i,s,n[4],6,-145523070),s=Da(s,t,r,i,n[11],10,-1120210379),i=Da(i,s,t,r,n[2],15,718787259),r=Da(r,i,s,t,n[9],21,-343485551),e[0]=vf(t,e[0]),e[1]=vf(r,e[1]),e[2]=vf(i,e[2]),e[3]=vf(s,e[3])}function om(e,n,t,r,i,s){return n=vf(vf(n,e),vf(r,s)),vf(n<<i|n>>>32-i,t)}function ka(e,n,t,r,i,s,o){return om(n&t|~n&r,e,n,i,s,o)}function Ta(e,n,t,r,i,s,o){return om(n&r|t&~r,e,n,i,s,o)}function Na(e,n,t,r,i,s,o){return om(n^t^r,e,n,i,s,o)}function Da(e,n,t,r,i,s,o){return om(t^(n|~r),e,n,i,s,o)}function Cx(e){var n,t=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=e.length;n+=64)fv(r,CF(e.substring(n-64,n)));e=e.substring(n-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<e.length;n++)i[n>>2]|=e.charCodeAt(n)<<(n%4<<3);if(i[n>>2]|=128<<(n%4<<3),n>55)for(fv(r,i),n=0;n<16;n++)i[n]=0;return i[14]=8*t,fv(r,i),r}function CF(e){var n,t=[];for(n=0;n<64;n+=4)t[n>>2]=e.charCodeAt(n)+(e.charCodeAt(n+1)<<8)+(e.charCodeAt(n+2)<<16)+(e.charCodeAt(n+3)<<24);return t}ap=Ir.atob.bind(Ir),w1=Ir.btoa.bind(Ir);var Eb="0123456789abcdef".split("");function EF(e){for(var n="",t=0;t<4;t++)n+=Eb[e>>8*t+4&15]+Eb[e>>8*t&15];return n}function PF(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function x1(e){return Cx(e).map(PF).join("")}var MF=function(e){for(var n=0;n<e.length;n++)e[n]=EF(e[n]);return e.join("")}(Cx("hello"))!="5d41402abc4b2a76b9719d911017c592";function vf(e,n){if(MF){var t=(65535&e)+(65535&n);return(e>>16)+(n>>16)+(t>>16)<<16|65535&t}return e+n&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function L1(e,n){var t,r,i,s;if(e!==t){for(var o=(i=e,s=1+(256/e.length>>0),new Array(s+1).join(i)),u=[],f=0;f<256;f++)u[f]=f;var d=0;for(f=0;f<256;f++){var g=u[f];d=(d+g+o.charCodeAt(f))%256,u[f]=u[d],u[d]=g}t=e,r=u}else u=r;var y=n.length,x=0,_=0,M="";for(f=0;f<y;f++)_=(_+(g=u[x=(x+1)%256]))%256,u[x]=u[_],u[_]=g,o=u[(u[x]+u[_])%256],M+=String.fromCharCode(n.charCodeAt(f)^o);return M}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Pb={print:4,modify:8,copy:16,"annot-forms":32};function zh(e,n,t,r){this.v=1,this.r=2;var i=192;e.forEach(function(u){if(Pb.perm!==void 0)throw new Error("Invalid permission: "+u);i+=Pb[u]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(n+this.padding).substr(0,32),o=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=x1(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=L1(this.encryptionKey,this.padding)}function $h(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var n="",t=e.length,r=0;r<t;r++){var i=e.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?n+="#"+("0"+i.toString(16)).slice(-2):n+=e[r]}return n}function Mb(e){if(Xi(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var n={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");n.hasOwnProperty(t)||(n[t]={});var s=Math.random().toString(35);return n[t][s]=[r,!!i],s},this.unsubscribe=function(t){for(var r in n)if(n[r][t])return delete n[r][t],Object.keys(n[r]).length===0&&delete n[r],!0;return!1},this.publish=function(t){if(n.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in n[t]){var o=n[t][s];try{o[0].apply(e,r)}catch(u){Ir.console&&lo.error("jsPDF PubSub Error",u.message,u)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return n}}function b0(e){if(!(this instanceof b0))return new b0(e);var n="opacity,stroke-opacity".split(",");for(var t in e)e.hasOwnProperty(t)&&n.indexOf(t)>=0&&(this[t]=e[t]);this.id="",this.objectNumber=-1}function Ex(e,n){this.gState=e,this.matrix=n,this.id="",this.objectNumber=-1}function Yf(e,n,t,r,i){if(!(this instanceof Yf))return new Yf(e,n,t,r,i);this.type=e==="axial"?2:3,this.coords=n,this.colors=t,Ex.call(this,r,i)}function Gh(e,n,t,r,i){if(!(this instanceof Gh))return new Gh(e,n,t,r,i);this.boundingBox=e,this.xStep=n,this.yStep=t,this.stream="",this.cloneIndex=0,Ex.call(this,r,i)}function kr(e){var n,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],u=1,f=16,d="S",g=null;Xi(e=e||{})==="object"&&(t=e.orientation,r=e.unit||r,i=e.format||i,s=e.compress||e.compressPdf||s,(g=e.encryption||null)!==null&&(g.userPassword=g.userPassword||"",g.ownerPassword=g.ownerPassword||"",g.userPermissions=g.userPermissions||[]),u=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(n=e.precision),e.floatPrecision!==void 0&&(f=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",t=(""+(t||"P")).toLowerCase();var y=e.putOnlyUsedFonts||!1,x={},_={internal:{},__private__:{}};_.__private__.PubSub=Mb;var M="1.3",k=_.__private__.getPdfVersion=function(){return M};_.__private__.setPdfVersion=function(I){M=I};var N={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};_.__private__.getPageFormats=function(){return N};var T=_.__private__.getPageFormat=function(I){return N[I]};i=i||"a4";var F={COMPAT:"compat",ADVANCED:"advanced"},K=F.COMPAT;function Q(){this.saveGraphicsState(),de(new gn(rt,0,0,-rt,0,ba()*rt).toString()+" cm"),this.setFontSize(this.getFontSize()/rt),d="n",K=F.ADVANCED}function he(){this.restoreGraphicsState(),d="S",K=F.COMPAT}var fe=_.__private__.combineFontStyleAndFontWeight=function(I,_e){if(I=="bold"&&_e=="normal"||I=="bold"&&_e==400||I=="normal"&&_e=="italic"||I=="bold"&&_e=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return _e&&(I=_e==400||_e==="normal"?I==="italic"?"italic":"normal":_e!=700&&_e!=="bold"||I!=="normal"?(_e==700?"bold":_e)+""+I:"bold"),I};_.advancedAPI=function(I){var _e=K===F.COMPAT;return _e&&Q.call(this),typeof I!="function"||(I(this),_e&&he.call(this)),this},_.compatAPI=function(I){var _e=K===F.ADVANCED;return _e&&he.call(this),typeof I!="function"||(I(this),_e&&Q.call(this)),this},_.isAdvancedAPI=function(){return K===F.ADVANCED};var me,G=function(I){if(K!==F.ADVANCED)throw new Error(I+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},$=_.roundToPrecision=_.__private__.roundToPrecision=function(I,_e){var Ke=n||_e;if(isNaN(I)||isNaN(Ke))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return I.toFixed(Ke).replace(/0+$/,"")};me=_.hpf=_.__private__.hpf=typeof f=="number"?function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.hpf");return $(I,f)}:f==="smart"?function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.hpf");return $(I,I>-1&&I<1?16:5)}:function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.hpf");return $(I,16)};var X=_.f2=_.__private__.f2=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.f2");return $(I,2)},R=_.__private__.f3=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.f3");return $(I,3)},O=_.scale=_.__private__.scale=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.scale");return K===F.COMPAT?I*rt:K===F.ADVANCED?I:void 0},B=function(I){return K===F.COMPAT?ba()-I:K===F.ADVANCED?I:void 0},z=function(I){return O(B(I))};_.__private__.setPrecision=_.setPrecision=function(I){typeof parseInt(I,10)=="number"&&(n=parseInt(I,10))};var W,V="00000000000000000000000000000000",oe=_.__private__.getFileId=function(){return V},ie=_.__private__.setFileId=function(I){return V=I!==void 0&&/^[a-fA-F0-9]{32}$/.test(I)?I.toUpperCase():V.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),g!==null&&(to=new zh(g.userPermissions,g.userPassword,g.ownerPassword,V)),V};_.setFileId=function(I){return ie(I),this},_.getFileId=function(){return oe()};var xe=_.__private__.convertDateToPDFDate=function(I){var _e=I.getTimezoneOffset(),Ke=_e<0?"+":"-",ft=Math.floor(Math.abs(_e/60)),Lt=Math.abs(_e%60),$t=[Ke,ee(ft),"'",ee(Lt),"'"].join("");return["D:",I.getFullYear(),ee(I.getMonth()+1),ee(I.getDate()),ee(I.getHours()),ee(I.getMinutes()),ee(I.getSeconds()),$t].join("")},Ee=_.__private__.convertPDFDateToDate=function(I){var _e=parseInt(I.substr(2,4),10),Ke=parseInt(I.substr(6,2),10)-1,ft=parseInt(I.substr(8,2),10),Lt=parseInt(I.substr(10,2),10),$t=parseInt(I.substr(12,2),10),fn=parseInt(I.substr(14,2),10);return new Date(_e,Ke,ft,Lt,$t,fn,0)},Te=_.__private__.setCreationDate=function(I){var _e;if(I===void 0&&(I=new Date),I instanceof Date)_e=xe(I);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(I))throw new Error("Invalid argument passed to jsPDF.setCreationDate");_e=I}return W=_e},Y=_.__private__.getCreationDate=function(I){var _e=W;return I==="jsDate"&&(_e=Ee(W)),_e};_.setCreationDate=function(I){return Te(I),this},_.getCreationDate=function(I){return Y(I)};var q,ee=_.__private__.padd2=function(I){return("0"+parseInt(I)).slice(-2)},ue=_.__private__.padd2Hex=function(I){return("00"+(I=I.toString())).substr(I.length)},le=0,pe=[],Z=[],D=0,ke=[],Me=[],Ge=!1,ce=Z,ne=function(){le=0,D=0,Z=[],pe=[],ke=[],Ii=lt(),Fr=lt()};_.__private__.setCustomOutputDestination=function(I){Ge=!0,ce=I};var ye=function(I){Ge||(ce=I)};_.__private__.resetCustomOutputDestination=function(){Ge=!1,ce=Z};var de=_.__private__.out=function(I){return I=I.toString(),D+=I.length+1,ce.push(I),ce},Ze=_.__private__.write=function(I){return de(arguments.length===1?I.toString():Array.prototype.join.call(arguments," "))},qe=_.__private__.getArrayBuffer=function(I){for(var _e=I.length,Ke=new ArrayBuffer(_e),ft=new Uint8Array(Ke);_e--;)ft[_e]=I.charCodeAt(_e);return Ke},tt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];_.__private__.getStandardFonts=function(){return tt};var ze=e.fontSize||16;_.__private__.setFontSize=_.setFontSize=function(I){return ze=K===F.ADVANCED?I/rt:I,this};var Qe,et=_.__private__.getFontSize=_.getFontSize=function(){return K===F.COMPAT?ze:ze*rt},bt=e.R2L||!1;_.__private__.setR2L=_.setR2L=function(I){return bt=I,this},_.__private__.getR2L=_.getR2L=function(){return bt};var Pt,At=_.__private__.setZoomMode=function(I){var _e=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(I))Qe=I;else if(isNaN(I)){if(_e.indexOf(I)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+I+'" is not recognized.');Qe=I}else Qe=parseInt(I,10)};_.__private__.getZoomMode=function(){return Qe};var Vt,Qt=_.__private__.setPageMode=function(I){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(I)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+I+'" is not recognized.');Pt=I};_.__private__.getPageMode=function(){return Pt};var mn=_.__private__.setLayoutMode=function(I){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(I)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+I+'" is not recognized.');Vt=I};_.__private__.getLayoutMode=function(){return Vt},_.__private__.setDisplayMode=_.setDisplayMode=function(I,_e,Ke){return At(I),mn(_e),Qt(Ke),this};var Ye={title:"",subject:"",author:"",keywords:"",creator:""};_.__private__.getDocumentProperty=function(I){if(Object.keys(Ye).indexOf(I)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ye[I]},_.__private__.getDocumentProperties=function(){return Ye},_.__private__.setDocumentProperties=_.setProperties=_.setDocumentProperties=function(I){for(var _e in Ye)Ye.hasOwnProperty(_e)&&I[_e]&&(Ye[_e]=I[_e]);return this},_.__private__.setDocumentProperty=function(I,_e){if(Object.keys(Ye).indexOf(I)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ye[I]=_e};var ot,rt,zt,en,Bn,bn={},Nn={},ar=[],xn={},Mn={},Pn={},fr={},yr=null,at=0,We=[],Ot=new Mb(_),En=e.hotfixes||[],Jn={},Zn={},qt=[],gn=function I(_e,Ke,ft,Lt,$t,fn){if(!(this instanceof I))return new I(_e,Ke,ft,Lt,$t,fn);isNaN(_e)&&(_e=1),isNaN(Ke)&&(Ke=0),isNaN(ft)&&(ft=0),isNaN(Lt)&&(Lt=1),isNaN($t)&&($t=0),isNaN(fn)&&(fn=0),this._matrix=[_e,Ke,ft,Lt,$t,fn]};Object.defineProperty(gn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(I){this._matrix[0]=I}}),Object.defineProperty(gn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(I){this._matrix[1]=I}}),Object.defineProperty(gn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(I){this._matrix[2]=I}}),Object.defineProperty(gn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(I){this._matrix[3]=I}}),Object.defineProperty(gn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(I){this._matrix[4]=I}}),Object.defineProperty(gn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(I){this._matrix[5]=I}}),Object.defineProperty(gn.prototype,"a",{get:function(){return this._matrix[0]},set:function(I){this._matrix[0]=I}}),Object.defineProperty(gn.prototype,"b",{get:function(){return this._matrix[1]},set:function(I){this._matrix[1]=I}}),Object.defineProperty(gn.prototype,"c",{get:function(){return this._matrix[2]},set:function(I){this._matrix[2]=I}}),Object.defineProperty(gn.prototype,"d",{get:function(){return this._matrix[3]},set:function(I){this._matrix[3]=I}}),Object.defineProperty(gn.prototype,"e",{get:function(){return this._matrix[4]},set:function(I){this._matrix[4]=I}}),Object.defineProperty(gn.prototype,"f",{get:function(){return this._matrix[5]},set:function(I){this._matrix[5]=I}}),Object.defineProperty(gn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(gn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(gn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(gn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),gn.prototype.join=function(I){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(me).join(I)},gn.prototype.multiply=function(I){var _e=I.sx*this.sx+I.shy*this.shx,Ke=I.sx*this.shy+I.shy*this.sy,ft=I.shx*this.sx+I.sy*this.shx,Lt=I.shx*this.shy+I.sy*this.sy,$t=I.tx*this.sx+I.ty*this.shx+this.tx,fn=I.tx*this.shy+I.ty*this.sy+this.ty;return new gn(_e,Ke,ft,Lt,$t,fn)},gn.prototype.decompose=function(){var I=this.sx,_e=this.shy,Ke=this.shx,ft=this.sy,Lt=this.tx,$t=this.ty,fn=Math.sqrt(I*I+_e*_e),Dn=(I/=fn)*Ke+(_e/=fn)*ft;Ke-=I*Dn,ft-=_e*Dn;var zn=Math.sqrt(Ke*Ke+ft*ft);return Dn/=zn,I*(ft/=zn)<_e*(Ke/=zn)&&(I=-I,_e=-_e,Dn=-Dn,fn=-fn),{scale:new gn(fn,0,0,zn,0,0),translate:new gn(1,0,0,1,Lt,$t),rotate:new gn(I,_e,-_e,I,0,0),skew:new gn(1,0,Dn,1,0,0)}},gn.prototype.toString=function(I){return this.join(" ")},gn.prototype.inversed=function(){var I=this.sx,_e=this.shy,Ke=this.shx,ft=this.sy,Lt=this.tx,$t=this.ty,fn=1/(I*ft-_e*Ke),Dn=ft*fn,zn=-_e*fn,nr=-Ke*fn,vr=I*fn;return new gn(Dn,zn,nr,vr,-Dn*Lt-nr*$t,-zn*Lt-vr*$t)},gn.prototype.applyToPoint=function(I){var _e=I.x*this.sx+I.y*this.shx+this.tx,Ke=I.x*this.shy+I.y*this.sy+this.ty;return new Mo(_e,Ke)},gn.prototype.applyToRectangle=function(I){var _e=this.applyToPoint(I),Ke=this.applyToPoint(new Mo(I.x+I.w,I.y+I.h));return new qs(_e.x,_e.y,Ke.x-_e.x,Ke.y-_e.y)},gn.prototype.clone=function(){var I=this.sx,_e=this.shy,Ke=this.shx,ft=this.sy,Lt=this.tx,$t=this.ty;return new gn(I,_e,Ke,ft,Lt,$t)},_.Matrix=gn;var Rt=_.matrixMult=function(I,_e){return _e.multiply(I)},Kt=new gn(1,0,0,1,0,0);_.unitMatrix=_.identityMatrix=Kt;var Ln=function(I,_e){if(!Mn[I]){var Ke=(_e instanceof Yf?"Sh":"P")+(Object.keys(xn).length+1).toString(10);_e.id=Ke,Mn[I]=Ke,xn[Ke]=_e,Ot.publish("addPattern",_e)}};_.ShadingPattern=Yf,_.TilingPattern=Gh,_.addShadingPattern=function(I,_e){return G("addShadingPattern()"),Ln(I,_e),this},_.beginTilingPattern=function(I){G("beginTilingPattern()"),Ws(I.boundingBox[0],I.boundingBox[1],I.boundingBox[2]-I.boundingBox[0],I.boundingBox[3]-I.boundingBox[1],I.matrix)},_.endTilingPattern=function(I,_e){G("endTilingPattern()"),_e.stream=Me[q].join(`
`),Ln(I,_e),Ot.publish("endTilingPattern",_e),qt.pop().restore()};var mr=_.__private__.newObject=function(){var I=lt();return Cn(I,!0),I},lt=_.__private__.newObjectDeferred=function(){return le++,pe[le]=function(){return D},le},Cn=function(I,_e){return _e=typeof _e=="boolean"&&_e,pe[I]=D,_e&&de(I+" 0 obj"),I},Lr=_.__private__.newAdditionalObject=function(){var I={objId:lt(),content:""};return ke.push(I),I},Ii=lt(),Fr=lt(),Pr=_.__private__.decodeColorString=function(I){var _e=I.split(" ");if(_e.length!==2||_e[1]!=="g"&&_e[1]!=="G")_e.length===5&&(_e[4]==="k"||_e[4]==="K")&&(_e=[(1-_e[0])*(1-_e[3]),(1-_e[1])*(1-_e[3]),(1-_e[2])*(1-_e[3]),"r"]);else{var Ke=parseFloat(_e[0]);_e=[Ke,Ke,Ke,"r"]}for(var ft="#",Lt=0;Lt<3;Lt++)ft+=("0"+Math.floor(255*parseFloat(_e[Lt])).toString(16)).slice(-2);return ft},lr=_.__private__.encodeColorString=function(I){var _e;typeof I=="string"&&(I={ch1:I});var Ke=I.ch1,ft=I.ch2,Lt=I.ch3,$t=I.ch4,fn=I.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ke=="string"&&Ke.charAt(0)!=="#"){var Dn=new Sx(Ke);if(Dn.ok)Ke=Dn.toHex();else if(!/^\d*\.?\d*$/.test(Ke))throw new Error('Invalid color "'+Ke+'" passed to jsPDF.encodeColorString.')}if(typeof Ke=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ke)&&(Ke="#"+Ke[1]+Ke[1]+Ke[2]+Ke[2]+Ke[3]+Ke[3]),typeof Ke=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ke)){var zn=parseInt(Ke.substr(1),16);Ke=zn>>16&255,ft=zn>>8&255,Lt=255&zn}if(ft===void 0||$t===void 0&&Ke===ft&&ft===Lt)if(typeof Ke=="string")_e=Ke+" "+fn[0];else switch(I.precision){case 2:_e=X(Ke/255)+" "+fn[0];break;case 3:default:_e=R(Ke/255)+" "+fn[0]}else if($t===void 0||Xi($t)==="object"){if($t&&!isNaN($t.a)&&$t.a===0)return _e=["1.","1.","1.",fn[1]].join(" ");if(typeof Ke=="string")_e=[Ke,ft,Lt,fn[1]].join(" ");else switch(I.precision){case 2:_e=[X(Ke/255),X(ft/255),X(Lt/255),fn[1]].join(" ");break;default:case 3:_e=[R(Ke/255),R(ft/255),R(Lt/255),fn[1]].join(" ")}}else if(typeof Ke=="string")_e=[Ke,ft,Lt,$t,fn[2]].join(" ");else switch(I.precision){case 2:_e=[X(Ke),X(ft),X(Lt),X($t),fn[2]].join(" ");break;case 3:default:_e=[R(Ke),R(ft),R(Lt),R($t),fn[2]].join(" ")}return _e},Hr=_.__private__.getFilters=function(){return o},ir=_.__private__.putStream=function(I){var _e=(I=I||{}).data||"",Ke=I.filters||Hr(),ft=I.alreadyAppliedFilters||[],Lt=I.addLength1||!1,$t=_e.length,fn=I.objectId,Dn=function(oo){return oo};if(g!==null&&fn===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");g!==null&&(Dn=to.encryptor(fn,0));var zn={};Ke===!0&&(Ke=["FlateEncode"]);var nr=I.additionalKeyValues||[],vr=(zn=kr.API.processDataByFilters!==void 0?kr.API.processDataByFilters(_e,Ke):{data:_e,reverseChain:[]}).reverseChain+(Array.isArray(ft)?ft.join(" "):ft.toString());if(zn.data.length!==0&&(nr.push({key:"Length",value:zn.data.length}),Lt===!0&&nr.push({key:"Length1",value:$t})),vr.length!=0)if(vr.split("/").length-1==1)nr.push({key:"Filter",value:vr});else{nr.push({key:"Filter",value:"["+vr+"]"});for(var Ur=0;Ur<nr.length;Ur+=1)if(nr[Ur].key==="DecodeParms"){for(var $i=[],di=0;di<zn.reverseChain.split("/").length-1;di+=1)$i.push("null");$i.push(nr[Ur].value),nr[Ur].value="["+$i.join(" ")+"]"}}de("<<");for(var xi=0;xi<nr.length;xi++)de("/"+nr[xi].key+" "+nr[xi].value);de(">>"),zn.data.length!==0&&(de("stream"),de(Dn(zn.data)),de("endstream"))},Or=_.__private__.putPage=function(I){var _e=I.number,Ke=I.data,ft=I.objId,Lt=I.contentsObjId;Cn(ft,!0),de("<</Type /Page"),de("/Parent "+I.rootDictionaryObjId+" 0 R"),de("/Resources "+I.resourceDictionaryObjId+" 0 R"),de("/MediaBox ["+parseFloat(me(I.mediaBox.bottomLeftX))+" "+parseFloat(me(I.mediaBox.bottomLeftY))+" "+me(I.mediaBox.topRightX)+" "+me(I.mediaBox.topRightY)+"]"),I.cropBox!==null&&de("/CropBox ["+me(I.cropBox.bottomLeftX)+" "+me(I.cropBox.bottomLeftY)+" "+me(I.cropBox.topRightX)+" "+me(I.cropBox.topRightY)+"]"),I.bleedBox!==null&&de("/BleedBox ["+me(I.bleedBox.bottomLeftX)+" "+me(I.bleedBox.bottomLeftY)+" "+me(I.bleedBox.topRightX)+" "+me(I.bleedBox.topRightY)+"]"),I.trimBox!==null&&de("/TrimBox ["+me(I.trimBox.bottomLeftX)+" "+me(I.trimBox.bottomLeftY)+" "+me(I.trimBox.topRightX)+" "+me(I.trimBox.topRightY)+"]"),I.artBox!==null&&de("/ArtBox ["+me(I.artBox.bottomLeftX)+" "+me(I.artBox.bottomLeftY)+" "+me(I.artBox.topRightX)+" "+me(I.artBox.topRightY)+"]"),typeof I.userUnit=="number"&&I.userUnit!==1&&de("/UserUnit "+I.userUnit),Ot.publish("putPage",{objId:ft,pageContext:We[_e],pageNumber:_e,page:Ke}),de("/Contents "+Lt+" 0 R"),de(">>"),de("endobj");var $t=Ke.join(`
`);return K===F.ADVANCED&&($t+=`
Q`),Cn(Lt,!0),ir({data:$t,filters:Hr(),objectId:Lt}),de("endobj"),ft},jr=_.__private__.putPages=function(){var I,_e,Ke=[];for(I=1;I<=at;I++)We[I].objId=lt(),We[I].contentsObjId=lt();for(I=1;I<=at;I++)Ke.push(Or({number:I,data:Me[I],objId:We[I].objId,contentsObjId:We[I].contentsObjId,mediaBox:We[I].mediaBox,cropBox:We[I].cropBox,bleedBox:We[I].bleedBox,trimBox:We[I].trimBox,artBox:We[I].artBox,userUnit:We[I].userUnit,rootDictionaryObjId:Ii,resourceDictionaryObjId:Fr}));Cn(Ii,!0),de("<</Type /Pages");var ft="/Kids [";for(_e=0;_e<at;_e++)ft+=Ke[_e]+" 0 R ";de(ft+"]"),de("/Count "+at),de(">>"),de("endobj"),Ot.publish("postPutPages")},on=function(I){Ot.publish("putFont",{font:I,out:de,newObject:mr,putStream:ir}),I.isAlreadyPutted!==!0&&(I.objectNumber=mr(),de("<<"),de("/Type /Font"),de("/BaseFont /"+$h(I.postScriptName)),de("/Subtype /Type1"),typeof I.encoding=="string"&&de("/Encoding /"+I.encoding),de("/FirstChar 32"),de("/LastChar 255"),de(">>"),de("endobj"))},ji=function(){for(var I in bn)bn.hasOwnProperty(I)&&(y===!1||y===!0&&x.hasOwnProperty(I))&&on(bn[I])},_i=function(I){I.objectNumber=mr();var _e=[];_e.push({key:"Type",value:"/XObject"}),_e.push({key:"Subtype",value:"/Form"}),_e.push({key:"BBox",value:"["+[me(I.x),me(I.y),me(I.x+I.width),me(I.y+I.height)].join(" ")+"]"}),_e.push({key:"Matrix",value:"["+I.matrix.toString()+"]"});var Ke=I.pages[1].join(`
`);ir({data:Ke,additionalKeyValues:_e,objectId:I.objectNumber}),de("endobj")},gi=function(){for(var I in Jn)Jn.hasOwnProperty(I)&&_i(Jn[I])},Kr=function(I,_e){var Ke,ft=[],Lt=1/(_e-1);for(Ke=0;Ke<1;Ke+=Lt)ft.push(Ke);if(ft.push(1),I[0].offset!=0){var $t={offset:0,color:I[0].color};I.unshift($t)}if(I[I.length-1].offset!=1){var fn={offset:1,color:I[I.length-1].color};I.push(fn)}for(var Dn="",zn=0,nr=0;nr<ft.length;nr++){for(Ke=ft[nr];Ke>I[zn+1].offset;)zn++;var vr=I[zn].offset,Ur=(Ke-vr)/(I[zn+1].offset-vr),$i=I[zn].color,di=I[zn+1].color;Dn+=ue(Math.round((1-Ur)*$i[0]+Ur*di[0]).toString(16))+ue(Math.round((1-Ur)*$i[1]+Ur*di[1]).toString(16))+ue(Math.round((1-Ur)*$i[2]+Ur*di[2]).toString(16))}return Dn.trim()},Br=function(I,_e){_e||(_e=21);var Ke=mr(),ft=Kr(I.colors,_e),Lt=[];Lt.push({key:"FunctionType",value:"0"}),Lt.push({key:"Domain",value:"[0.0 1.0]"}),Lt.push({key:"Size",value:"["+_e+"]"}),Lt.push({key:"BitsPerSample",value:"8"}),Lt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Lt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ir({data:ft,additionalKeyValues:Lt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ke}),de("endobj"),I.objectNumber=mr(),de("<< /ShadingType "+I.type),de("/ColorSpace /DeviceRGB");var $t="/Coords ["+me(parseFloat(I.coords[0]))+" "+me(parseFloat(I.coords[1]))+" ";I.type===2?$t+=me(parseFloat(I.coords[2]))+" "+me(parseFloat(I.coords[3])):$t+=me(parseFloat(I.coords[2]))+" "+me(parseFloat(I.coords[3]))+" "+me(parseFloat(I.coords[4]))+" "+me(parseFloat(I.coords[5])),de($t+="]"),I.matrix&&de("/Matrix ["+I.matrix.toString()+"]"),de("/Function "+Ke+" 0 R"),de("/Extend [true true]"),de(">>"),de("endobj")},Rr=function(I,_e){var Ke=lt(),ft=mr();_e.push({resourcesOid:Ke,objectOid:ft}),I.objectNumber=ft;var Lt=[];Lt.push({key:"Type",value:"/Pattern"}),Lt.push({key:"PatternType",value:"1"}),Lt.push({key:"PaintType",value:"1"}),Lt.push({key:"TilingType",value:"1"}),Lt.push({key:"BBox",value:"["+I.boundingBox.map(me).join(" ")+"]"}),Lt.push({key:"XStep",value:me(I.xStep)}),Lt.push({key:"YStep",value:me(I.yStep)}),Lt.push({key:"Resources",value:Ke+" 0 R"}),I.matrix&&Lt.push({key:"Matrix",value:"["+I.matrix.toString()+"]"}),ir({data:I.stream,additionalKeyValues:Lt,objectId:I.objectNumber}),de("endobj")},dr=function(I){var _e;for(_e in xn)xn.hasOwnProperty(_e)&&(xn[_e]instanceof Yf?Br(xn[_e]):xn[_e]instanceof Gh&&Rr(xn[_e],I))},zi=function(I){for(var _e in I.objectNumber=mr(),de("<<"),I)switch(_e){case"opacity":de("/ca "+X(I[_e]));break;case"stroke-opacity":de("/CA "+X(I[_e]))}de(">>"),de("endobj")},Ss=function(){var I;for(I in Pn)Pn.hasOwnProperty(I)&&zi(Pn[I])},Cs=function(){for(var I in de("/XObject <<"),Jn)Jn.hasOwnProperty(I)&&Jn[I].objectNumber>=0&&de("/"+I+" "+Jn[I].objectNumber+" 0 R");Ot.publish("putXobjectDict"),de(">>")},si=function(){to.oid=mr(),de("<<"),de("/Filter /Standard"),de("/V "+to.v),de("/R "+to.r),de("/U <"+to.toHexString(to.U)+">"),de("/O <"+to.toHexString(to.O)+">"),de("/P "+to.P),de(">>"),de("endobj")},jn=function(){for(var I in de("/Font <<"),bn)bn.hasOwnProperty(I)&&(y===!1||y===!0&&x.hasOwnProperty(I))&&de("/"+I+" "+bn[I].objectNumber+" 0 R");de(">>")},Po=function(){if(Object.keys(xn).length>0){for(var I in de("/Shading <<"),xn)xn.hasOwnProperty(I)&&xn[I]instanceof Yf&&xn[I].objectNumber>=0&&de("/"+I+" "+xn[I].objectNumber+" 0 R");Ot.publish("putShadingPatternDict"),de(">>")}},ci=function(I){if(Object.keys(xn).length>0){for(var _e in de("/Pattern <<"),xn)xn.hasOwnProperty(_e)&&xn[_e]instanceof _.TilingPattern&&xn[_e].objectNumber>=0&&xn[_e].objectNumber<I&&de("/"+_e+" "+xn[_e].objectNumber+" 0 R");Ot.publish("putTilingPatternDict"),de(">>")}},hr=function(){if(Object.keys(Pn).length>0){var I;for(I in de("/ExtGState <<"),Pn)Pn.hasOwnProperty(I)&&Pn[I].objectNumber>=0&&de("/"+I+" "+Pn[I].objectNumber+" 0 R");Ot.publish("putGStateDict"),de(">>")}},qn=function(I){Cn(I.resourcesOid,!0),de("<<"),de("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),jn(),Po(),ci(I.objectOid),hr(),Cs(),de(">>"),de("endobj")},bo=function(){var I=[];ji(),Ss(),gi(),dr(I),Ot.publish("putResources"),I.forEach(qn),qn({resourcesOid:Fr,objectOid:Number.MAX_SAFE_INTEGER}),Ot.publish("postPutResources")},wo=function(){Ot.publish("putAdditionalObjects");for(var I=0;I<ke.length;I++){var _e=ke[I];Cn(_e.objId,!0),de(_e.content),de("endobj")}Ot.publish("postPutAdditionalObjects")},Sr=function(I){Nn[I.fontName]=Nn[I.fontName]||{},Nn[I.fontName][I.fontStyle]=I.id},Vs=function(I,_e,Ke,ft,Lt){var $t={id:"F"+(Object.keys(bn).length+1).toString(10),postScriptName:I,fontName:_e,fontStyle:Ke,encoding:ft,isStandardFont:Lt||!1,metadata:{}};return Ot.publish("addFont",{font:$t,instance:this}),bn[$t.id]=$t,Sr($t),$t.id},Gn=function(I){for(var _e=0,Ke=tt.length;_e<Ke;_e++){var ft=Vs.call(this,I[_e][0],I[_e][1],I[_e][2],tt[_e][3],!0);y===!1&&(x[ft]=!0);var Lt=I[_e][0].split("-");Sr({id:ft,fontName:Lt[0],fontStyle:Lt[1]||""})}Ot.publish("addFonts",{fonts:bn,dictionary:Nn})},_r=function(I){return I.foo=function(){try{return I.apply(this,arguments)}catch(ft){var _e=ft.stack||"";~_e.indexOf(" at ")&&(_e=_e.split(" at ")[1]);var Ke="Error in function "+_e.split(`
`)[0].split("<")[0]+": "+ft.message;if(!Ir.console)throw new Error(Ke);Ir.console.error(Ke,ft),Ir.alert&&alert(Ke)}},I.foo.bar=I,I.foo},Yr=function(I,_e){var Ke,ft,Lt,$t,fn,Dn,zn,nr,vr;if(Lt=(_e=_e||{}).sourceEncoding||"Unicode",fn=_e.outputEncoding,(_e.autoencode||fn)&&bn[ot].metadata&&bn[ot].metadata[Lt]&&bn[ot].metadata[Lt].encoding&&($t=bn[ot].metadata[Lt].encoding,!fn&&bn[ot].encoding&&(fn=bn[ot].encoding),!fn&&$t.codePages&&(fn=$t.codePages[0]),typeof fn=="string"&&(fn=$t[fn]),fn)){for(zn=!1,Dn=[],Ke=0,ft=I.length;Ke<ft;Ke++)(nr=fn[I.charCodeAt(Ke)])?Dn.push(String.fromCharCode(nr)):Dn.push(I[Ke]),Dn[Ke].charCodeAt(0)>>8&&(zn=!0);I=Dn.join("")}for(Ke=I.length;zn===void 0&&Ke!==0;)I.charCodeAt(Ke-1)>>8&&(zn=!0),Ke--;if(!zn)return I;for(Dn=_e.noBOM?[]:[254,255],Ke=0,ft=I.length;Ke<ft;Ke++){if((vr=(nr=I.charCodeAt(Ke))>>8)>>8)throw new Error("Character at position "+Ke+" of string '"+I+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Dn.push(vr),Dn.push(nr-(vr<<8))}return String.fromCharCode.apply(void 0,Dn)},_n=_.__private__.pdfEscape=_.pdfEscape=function(I,_e){return Yr(I,_e).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},nn=_.__private__.beginPage=function(I){Me[++at]=[],We[at]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(I[0]),topRightY:Number(I[1])}},xo(at),ye(Me[q])},ai=function(I,_e){var Ke,ft,Lt;switch(t=_e||t,typeof I=="string"&&(Ke=T(I.toLowerCase()),Array.isArray(Ke)&&(ft=Ke[0],Lt=Ke[1])),Array.isArray(I)&&(ft=I[0]*rt,Lt=I[1]*rt),isNaN(ft)&&(ft=i[0],Lt=i[1]),(ft>14400||Lt>14400)&&(lo.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ft=Math.min(14400,ft),Lt=Math.min(14400,Lt)),i=[ft,Lt],t.substr(0,1)){case"l":Lt>ft&&(i=[Lt,ft]);break;case"p":ft>Lt&&(i=[Lt,ft])}nn(i),kl(Yl),de(Ui),Dl!==0&&de(Dl+" J"),bi!==0&&de(bi+" j"),Ot.publish("addPage",{pageNumber:at})},fo=function(I){I>0&&I<=at&&(Me.splice(I,1),We.splice(I,1),at--,q>at&&(q=at),this.setPage(q))},xo=function(I){I>0&&I<=at&&(q=I)},Mi=_.__private__.getNumberOfPages=_.getNumberOfPages=function(){return Me.length-1},fs=function(I,_e,Ke){var ft,Lt=void 0;return Ke=Ke||{},I=I!==void 0?I:bn[ot].fontName,_e=_e!==void 0?_e:bn[ot].fontStyle,ft=I.toLowerCase(),Nn[ft]!==void 0&&Nn[ft][_e]!==void 0?Lt=Nn[ft][_e]:Nn[I]!==void 0&&Nn[I][_e]!==void 0?Lt=Nn[I][_e]:Ke.disableWarning===!1&&lo.warn("Unable to look up font label for font '"+I+"', '"+_e+"'. Refer to getFontList() for available fonts."),Lt||Ke.noFallback||(Lt=Nn.times[_e])==null&&(Lt=Nn.times.normal),Lt},Qo=_.__private__.putInfo=function(){var I=mr(),_e=function(ft){return ft};for(var Ke in g!==null&&(_e=to.encryptor(I,0)),de("<<"),de("/Producer ("+_n(_e("jsPDF "+kr.version))+")"),Ye)Ye.hasOwnProperty(Ke)&&Ye[Ke]&&de("/"+Ke.substr(0,1).toUpperCase()+Ke.substr(1)+" ("+_n(_e(Ye[Ke]))+")");de("/CreationDate ("+_n(_e(W))+")"),de(">>"),de("endobj")},Ro=_.__private__.putCatalog=function(I){var _e=(I=I||{}).rootDictionaryObjId||Ii;switch(mr(),de("<<"),de("/Type /Catalog"),de("/Pages "+_e+" 0 R"),Qe||(Qe="fullwidth"),Qe){case"fullwidth":de("/OpenAction [3 0 R /FitH null]");break;case"fullheight":de("/OpenAction [3 0 R /FitV null]");break;case"fullpage":de("/OpenAction [3 0 R /Fit]");break;case"original":de("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ke=""+Qe;Ke.substr(Ke.length-1)==="%"&&(Qe=parseInt(Qe)/100),typeof Qe=="number"&&de("/OpenAction [3 0 R /XYZ null null "+X(Qe)+"]")}switch(Vt||(Vt="continuous"),Vt){case"continuous":de("/PageLayout /OneColumn");break;case"single":de("/PageLayout /SinglePage");break;case"two":case"twoleft":de("/PageLayout /TwoColumnLeft");break;case"tworight":de("/PageLayout /TwoColumnRight")}Pt&&de("/PageMode /"+Pt),Ot.publish("putCatalog"),de(">>"),de("endobj")},hi=_.__private__.putTrailer=function(){de("trailer"),de("<<"),de("/Size "+(le+1)),de("/Root "+le+" 0 R"),de("/Info "+(le-1)+" 0 R"),g!==null&&de("/Encrypt "+to.oid+" 0 R"),de("/ID [ <"+V+"> <"+V+"> ]"),de(">>")},Os=_.__private__.putHeader=function(){de("%PDF-"+M),de("%")},Fo=_.__private__.putXRef=function(){var I="0000000000";de("xref"),de("0 "+(le+1)),de("0000000000 65535 f ");for(var _e=1;_e<=le;_e++)typeof pe[_e]=="function"?de((I+pe[_e]()).slice(-10)+" 00000 n "):pe[_e]!==void 0?de((I+pe[_e]).slice(-10)+" 00000 n "):de("0000000000 00000 n ")},eo=_.__private__.buildDocument=function(){ne(),ye(Z),Ot.publish("buildDocument"),Os(),jr(),wo(),bo(),g!==null&&si(),Qo(),Ro();var I=D;return Fo(),hi(),de("startxref"),de(""+I),de("%%EOF"),ye(Me[q]),Z.join(`
`)},Lo=_.__private__.getBlob=function(I){return new Blob([qe(I)],{type:"application/pdf"})},Gs=_.output=_.__private__.output=_r(function(I,_e){switch(typeof(_e=_e||{})=="string"?_e={filename:_e}:_e.filename=_e.filename||"generated.pdf",I){case void 0:return eo();case"save":_.save(_e.filename);break;case"arraybuffer":return qe(eo());case"blob":return Lo(eo());case"bloburi":case"bloburl":if(Ir.URL!==void 0&&typeof Ir.URL.createObjectURL=="function")return Ir.URL&&Ir.URL.createObjectURL(Lo(eo()))||void 0;lo.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ke="",ft=eo();try{Ke=w1(ft)}catch{Ke=w1(unescape(encodeURIComponent(ft)))}return"data:application/pdf;filename="+_e.filename+";base64,"+Ke;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Ir)==="[object Window]"){var Lt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",$t=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';_e.pdfObjectUrl&&(Lt=_e.pdfObjectUrl,$t="");var fn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Lt+'"'+$t+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(_e)+");<\/script></body></html>",Dn=Ir.open();return Dn!==null&&Dn.document.write(fn),Dn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Ir)==="[object Window]"){var zn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(_e.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+_e.filename+'" width="500px" height="400px" /></body></html>',nr=Ir.open();if(nr!==null){nr.document.write(zn);var vr=this;nr.document.documentElement.querySelector("#pdfViewer").onload=function(){nr.document.title=_e.filename,nr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(vr.output("bloburl"))}}return nr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Ir)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ur='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",_e)+'"></iframe></body></html>',$i=Ir.open();if($i!==null&&($i.document.write(Ur),$i.document.title=_e.filename),$i||typeof safari>"u")return $i;break;case"datauri":case"dataurl":return Ir.document.location.href=this.output("datauristring",_e);default:return null}}),va=function(I){return Array.isArray(En)===!0&&En.indexOf(I)>-1};switch(r){case"pt":rt=1;break;case"mm":rt=72/25.4;break;case"cm":rt=72/2.54;break;case"in":rt=72;break;case"px":rt=va("px_scaling")==1?.75:96/72;break;case"pc":case"em":rt=12;break;case"ex":rt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);rt=r}var to=null;Te(),ie();var il=function(I){return g!==null?to.encryptor(I,0):function(_e){return _e}},ya=_.__private__.getPageInfo=_.getPageInfo=function(I){if(isNaN(I)||I%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:We[I].objId,pageNumber:I,pageContext:We[I]}},gr=_.__private__.getPageInfoByObjId=function(I){if(isNaN(I)||I%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var _e in We)if(We[_e].objId===I)break;return ya(_e)},br=_.__private__.getCurrentPageInfo=_.getCurrentPageInfo=function(){return{objId:We[q].objId,pageNumber:q,pageContext:We[q]}};_.addPage=function(){return ai.apply(this,arguments),this},_.setPage=function(){return xo.apply(this,arguments),ye.call(this,Me[q]),this},_.insertPage=function(I){return this.addPage(),this.movePage(q,I),this},_.movePage=function(I,_e){var Ke,ft;if(I>_e){Ke=Me[I],ft=We[I];for(var Lt=I;Lt>_e;Lt--)Me[Lt]=Me[Lt-1],We[Lt]=We[Lt-1];Me[_e]=Ke,We[_e]=ft,this.setPage(_e)}else if(I<_e){Ke=Me[I],ft=We[I];for(var $t=I;$t<_e;$t++)Me[$t]=Me[$t+1],We[$t]=We[$t+1];Me[_e]=Ke,We[_e]=ft,this.setPage(_e)}return this},_.deletePage=function(){return fo.apply(this,arguments),this},_.__private__.text=_.text=function(I,_e,Ke,ft,Lt){var $t,fn,Dn,zn,nr,vr,Ur,$i,di,xi=(ft=ft||{}).scope||this;if(typeof I=="number"&&typeof _e=="number"&&(typeof Ke=="string"||Array.isArray(Ke))){var oo=Ke;Ke=_e,_e=I,I=oo}if(arguments[3]instanceof gn?(G("The transform parameter of text() with a Matrix value"),di=Lt):(Dn=arguments[4],zn=arguments[5],Xi(Ur=arguments[3])==="object"&&Ur!==null||(typeof Dn=="string"&&(zn=Dn,Dn=null),typeof Ur=="string"&&(zn=Ur,Ur=null),typeof Ur=="number"&&(Dn=Ur,Ur=null),ft={flags:Ur,angle:Dn,align:zn})),isNaN(_e)||isNaN(Ke)||I==null)throw new Error("Invalid arguments passed to jsPDF.text");if(I.length===0)return xi;var ho="",Ps=!1,Vr=typeof ft.lineHeightFactor=="number"?ft.lineHeightFactor:Al,zo=xi.internal.scaleFactor;function fl(Si){return Si=Si.split("	").join(Array(ft.TabLen||9).join(" ")),_n(Si,Ur)}function es(Si){for(var Ai,so=Si.concat(),Bi=[],ks=so.length;ks--;)typeof(Ai=so.shift())=="string"?Bi.push(Ai):Array.isArray(Si)&&(Ai.length===1||Ai[1]===void 0&&Ai[2]===void 0)?Bi.push(Ai[0]):Bi.push([Ai[0],Ai[1],Ai[2]]);return Bi}function Ql(Si,Ai){var so;if(typeof Si=="string")so=Ai(Si)[0];else if(Array.isArray(Si)){for(var Bi,ks,ds=Si.concat(),Rs=[],xu=ds.length;xu--;)typeof(Bi=ds.shift())=="string"?Rs.push(Ai(Bi)[0]):Array.isArray(Bi)&&typeof Bi[0]=="string"&&(ks=Ai(Bi[0],Bi[1],Bi[2]),Rs.push([ks[0],ks[1],ks[2]]));so=Rs}return so}var na=!1,wu=!0;if(typeof I=="string")na=!0;else if(Array.isArray(I)){var Va=I.concat();fn=[];for(var Ga,po=Va.length;po--;)(typeof(Ga=Va.shift())!="string"||Array.isArray(Ga)&&typeof Ga[0]!="string")&&(wu=!1);na=wu}if(na===!1)throw new Error('Type of text must be string or Array. "'+I+'" is not recognized.');typeof I=="string"&&(I=I.match(/[\r?\n]/)?I.split(/\r\n|\r|\n/g):[I]);var ra=ze/xi.internal.scaleFactor,Ms=ra*(Vr-1);switch(ft.baseline){case"bottom":Ke-=Ms;break;case"top":Ke+=ra-Ms;break;case"hanging":Ke+=ra-2*Ms;break;case"middle":Ke+=ra/2-Ms}if((vr=ft.maxWidth||0)>0&&(typeof I=="string"?I=xi.splitTextToSize(I,vr):Object.prototype.toString.call(I)==="[object Array]"&&(I=I.reduce(function(Si,Ai){return Si.concat(xi.splitTextToSize(Ai,vr))},[]))),$t={text:I,x:_e,y:Ke,options:ft,mutex:{pdfEscape:_n,activeFontKey:ot,fonts:bn,activeFontSize:ze}},Ot.publish("preProcessText",$t),I=$t.text,Dn=(ft=$t.options).angle,!(di instanceof gn)&&Dn&&typeof Dn=="number"){Dn*=Math.PI/180,ft.rotationDirection===0&&(Dn=-Dn),K===F.ADVANCED&&(Dn=-Dn);var hs=Math.cos(Dn),hl=Math.sin(Dn);di=new gn(hs,hl,-hl,hs,0,0)}else Dn&&Dn instanceof gn&&(di=Dn);K!==F.ADVANCED||di||(di=Kt),(nr=ft.charSpace||Nl)!==void 0&&(ho+=me(O(nr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),($i=ft.horizontalScale)!==void 0&&(ho+=me(100*$i)+` Tz
`),ft.lang;var $o=-1,ts=ft.renderingMode!==void 0?ft.renderingMode:ft.stroke,ns=xi.internal.getCurrentPageInfo().pageContext;switch(ts){case 0:case!1:case"fill":$o=0;break;case 1:case!0:case"stroke":$o=1;break;case 2:case"fillThenStroke":$o=2;break;case 3:case"invisible":$o=3;break;case 4:case"fillAndAddForClipping":$o=4;break;case 5:case"strokeAndAddPathForClipping":$o=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":$o=6;break;case 7:case"addToPathForClipping":$o=7}var Xu=ns.usedRenderingMode!==void 0?ns.usedRenderingMode:-1;$o!==-1?ho+=$o+` Tr
`:Xu!==-1&&(ho+=`0 Tr
`),$o!==-1&&(ns.usedRenderingMode=$o),zn=ft.align||"left";var So,wa=ze*Vr,Uo=xi.internal.pageSize.getWidth(),Vo=bn[ot];nr=ft.charSpace||Nl,vr=ft.maxWidth||0,Ur=Object.assign({autoencode:!0,noBOM:!0},ft.flags);var xa=[],La=function(Si){return xi.getStringUnitWidth(Si,{font:Vo,charSpace:nr,fontSize:ze,doKerning:!1})*ze/zo};if(Object.prototype.toString.call(I)==="[object Array]"){var Go;fn=es(I),zn!=="left"&&(So=fn.map(La));var Ao,ia=0;if(zn==="right"){_e-=So[0],I=[],po=fn.length;for(var As=0;As<po;As++)As===0?(Ao=or(_e),Go=ro(Ke)):(Ao=O(ia-So[As]),Go=-wa),I.push([fn[As],Ao,Go]),ia=So[As]}else if(zn==="center"){_e-=So[0]/2,I=[],po=fn.length;for(var Ho=0;Ho<po;Ho++)Ho===0?(Ao=or(_e),Go=ro(Ke)):(Ao=O((ia-So[Ho])/2),Go=-wa),I.push([fn[Ho],Ao,Go]),ia=So[Ho]}else if(zn==="left"){I=[],po=fn.length;for(var _t=0;_t<po;_t++)I.push(fn[_t])}else if(zn==="justify"&&Vo.encoding==="Identity-H"){I=[],po=fn.length,vr=vr!==0?vr:Uo;for(var Zt=0,kt=0;kt<po;kt++)if(Go=kt===0?ro(Ke):-wa,Ao=kt===0?or(_e):Zt,kt<po-1){var An=O((vr-So[kt])/(fn[kt].split(" ").length-1)),Kn=fn[kt].split(" ");I.push([Kn[0]+" ",Ao,Go]),Zt=0;for(var wr=1;wr<Kn.length;wr++){var Vi=(La(Kn[wr-1]+" "+Kn[wr])-La(Kn[wr]))*zo+An;wr==Kn.length-1?I.push([Kn[wr],Vi,0]):I.push([Kn[wr]+" ",Vi,0]),Zt-=Vi}}else I.push([fn[kt],Ao,Go]);I.push(["",Zt,0])}else{if(zn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(I=[],po=fn.length,vr=vr!==0?vr:Uo,kt=0;kt<po;kt++)Go=kt===0?ro(Ke):-wa,Ao=kt===0?or(_e):0,kt<po-1?xa.push(me(O((vr-So[kt])/(fn[kt].split(" ").length-1)))):xa.push(0),I.push([fn[kt],Ao,Go])}}var Li=typeof ft.R2L=="boolean"?ft.R2L:bt;Li===!0&&(I=Ql(I,function(Si,Ai,so){return[Si.split("").reverse().join(""),Ai,so]})),$t={text:I,x:_e,y:Ke,options:ft,mutex:{pdfEscape:_n,activeFontKey:ot,fonts:bn,activeFontSize:ze}},Ot.publish("postProcessText",$t),I=$t.text,Ps=$t.mutex.isHex||!1;var Ol=bn[ot].encoding;Ol!=="WinAnsiEncoding"&&Ol!=="StandardEncoding"||(I=Ql(I,function(Si,Ai,so){return[fl(Si),Ai,so]})),fn=es(I),I=[];for(var rs,Gi,oa,Sa=0,sa=1,aa=Array.isArray(fn[0])?sa:Sa,la="",Qr=function(Si,Ai,so){var Bi="";return so instanceof gn?(so=typeof ft.angle=="number"?Rt(so,new gn(1,0,0,1,Si,Ai)):Rt(new gn(1,0,0,1,Si,Ai),so),K===F.ADVANCED&&(so=Rt(new gn(1,0,0,-1,0,0),so)),Bi=so.join(" ")+` Tm
`):Bi=me(Si)+" "+me(Ai)+` Td
`,Bi},Zs=0;Zs<fn.length;Zs++){switch(la="",aa){case sa:oa=(Ps?"<":"(")+fn[Zs][0]+(Ps?">":")"),rs=parseFloat(fn[Zs][1]),Gi=parseFloat(fn[Zs][2]);break;case Sa:oa=(Ps?"<":"(")+fn[Zs]+(Ps?">":")"),rs=or(_e),Gi=ro(Ke)}xa!==void 0&&xa[Zs]!==void 0&&(la=xa[Zs]+` Tw
`),Zs===0?I.push(la+Qr(rs,Gi,di)+oa):aa===Sa?I.push(la+oa):aa===sa&&I.push(la+Qr(rs,Gi,di)+oa)}I=aa===Sa?I.join(` Tj
T* `):I.join(` Tj
`),I+=` Tj
`;var ko=`BT
/`;return ko+=ot+" "+ze+` Tf
`,ko+=me(ze*Vr)+` TL
`,ko+=ta+`
`,ko+=ho,ko+=I,de(ko+="ET"),x[ot]=!0,xi};var Jr=_.__private__.clip=_.clip=function(I){return de(I==="evenodd"?"W*":"W"),this};_.clipEvenOdd=function(){return Jr("evenodd")},_.__private__.discardPath=_.discardPath=function(){return de("n"),this};var Nr=_.__private__.isValidStyle=function(I){var _e=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(I)!==-1&&(_e=!0),_e};_.__private__.setDefaultPathOperation=_.setDefaultPathOperation=function(I){return Nr(I)&&(d=I),this};var jo=_.__private__.getStyle=_.getStyle=function(I){var _e=d;switch(I){case"D":case"S":_e="S";break;case"F":_e="f";break;case"FD":case"DF":_e="B";break;case"f":case"f*":case"B":case"B*":_e=I}return _e},ol=_.close=function(){return de("h"),this};_.stroke=function(){return de("S"),this},_.fill=function(I){return sl("f",I),this},_.fillEvenOdd=function(I){return sl("f*",I),this},_.fillStroke=function(I){return sl("B",I),this},_.fillStrokeEvenOdd=function(I){return sl("B*",I),this};var sl=function(I,_e){Xi(_e)==="object"?bu(_e,I):de(I)},Hs=function(I){I===null||K===F.ADVANCED&&I===void 0||(I=jo(I),de(I))};function $a(I,_e,Ke,ft,Lt){var $t=new Gh(_e||this.boundingBox,Ke||this.xStep,ft||this.yStep,this.gState,Lt||this.matrix);$t.stream=this.stream;var fn=I+"$$"+this.cloneIndex+++"$$";return Ln(fn,$t),$t}var bu=function(I,_e){var Ke=Mn[I.key],ft=xn[Ke];if(ft instanceof Yf)de("q"),de(Ml(_e)),ft.gState&&_.setGState(ft.gState),de(I.matrix.toString()+" cm"),de("/"+Ke+" sh"),de("Q");else if(ft instanceof Gh){var Lt=new gn(1,0,0,-1,0,ba());I.matrix&&(Lt=Lt.multiply(I.matrix||Kt),Ke=$a.call(ft,I.key,I.boundingBox,I.xStep,I.yStep,Lt).id),de("q"),de("/Pattern cs"),de("/"+Ke+" scn"),ft.gState&&_.setGState(ft.gState),de(_e),de("Q")}},Ml=function(I){switch(I){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Cr=_.moveTo=function(I,_e){return de(me(O(I))+" "+me(z(_e))+" m"),this},qr=_.lineTo=function(I,_e){return de(me(O(I))+" "+me(z(_e))+" l"),this},Ua=_.curveTo=function(I,_e,Ke,ft,Lt,$t){return de([me(O(I)),me(z(_e)),me(O(Ke)),me(z(ft)),me(O(Lt)),me(z($t)),"c"].join(" ")),this};_.__private__.line=_.line=function(I,_e,Ke,ft,Lt){if(isNaN(I)||isNaN(_e)||isNaN(Ke)||isNaN(ft)||!Nr(Lt))throw new Error("Invalid arguments passed to jsPDF.line");return K===F.COMPAT?this.lines([[Ke-I,ft-_e]],I,_e,[1,1],Lt||"S"):this.lines([[Ke-I,ft-_e]],I,_e,[1,1]).stroke()},_.__private__.lines=_.lines=function(I,_e,Ke,ft,Lt,$t){var fn,Dn,zn,nr,vr,Ur,$i,di,xi,oo,ho,Ps;if(typeof I=="number"&&(Ps=Ke,Ke=_e,_e=I,I=Ps),ft=ft||[1,1],$t=$t||!1,isNaN(_e)||isNaN(Ke)||!Array.isArray(I)||!Array.isArray(ft)||!Nr(Lt)||typeof $t!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Cr(_e,Ke),fn=ft[0],Dn=ft[1],nr=I.length,oo=_e,ho=Ke,zn=0;zn<nr;zn++)(vr=I[zn]).length===2?(oo=vr[0]*fn+oo,ho=vr[1]*Dn+ho,qr(oo,ho)):(Ur=vr[0]*fn+oo,$i=vr[1]*Dn+ho,di=vr[2]*fn+oo,xi=vr[3]*Dn+ho,oo=vr[4]*fn+oo,ho=vr[5]*Dn+ho,Ua(Ur,$i,di,xi,oo,ho));return $t&&ol(),Hs(Lt),this},_.path=function(I){for(var _e=0;_e<I.length;_e++){var Ke=I[_e],ft=Ke.c;switch(Ke.op){case"m":Cr(ft[0],ft[1]);break;case"l":qr(ft[0],ft[1]);break;case"c":Ua.apply(this,ft);break;case"h":ol()}}return this},_.__private__.rect=_.rect=function(I,_e,Ke,ft,Lt){if(isNaN(I)||isNaN(_e)||isNaN(Ke)||isNaN(ft)||!Nr(Lt))throw new Error("Invalid arguments passed to jsPDF.rect");return K===F.COMPAT&&(ft=-ft),de([me(O(I)),me(z(_e)),me(O(Ke)),me(O(ft)),"re"].join(" ")),Hs(Lt),this},_.__private__.triangle=_.triangle=function(I,_e,Ke,ft,Lt,$t,fn){if(isNaN(I)||isNaN(_e)||isNaN(Ke)||isNaN(ft)||isNaN(Lt)||isNaN($t)||!Nr(fn))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ke-I,ft-_e],[Lt-Ke,$t-ft],[I-Lt,_e-$t]],I,_e,[1,1],fn,!0),this},_.__private__.roundedRect=_.roundedRect=function(I,_e,Ke,ft,Lt,$t,fn){if(isNaN(I)||isNaN(_e)||isNaN(Ke)||isNaN(ft)||isNaN(Lt)||isNaN($t)||!Nr(fn))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Dn=4/3*(Math.SQRT2-1);return Lt=Math.min(Lt,.5*Ke),$t=Math.min($t,.5*ft),this.lines([[Ke-2*Lt,0],[Lt*Dn,0,Lt,$t-$t*Dn,Lt,$t],[0,ft-2*$t],[0,$t*Dn,-Lt*Dn,$t,-Lt,$t],[2*Lt-Ke,0],[-Lt*Dn,0,-Lt,-$t*Dn,-Lt,-$t],[0,2*$t-ft],[0,-$t*Dn,Lt*Dn,-$t,Lt,-$t]],I+Lt,_e,[1,1],fn,!0),this},_.__private__.ellipse=_.ellipse=function(I,_e,Ke,ft,Lt){if(isNaN(I)||isNaN(_e)||isNaN(Ke)||isNaN(ft)||!Nr(Lt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var $t=4/3*(Math.SQRT2-1)*Ke,fn=4/3*(Math.SQRT2-1)*ft;return Cr(I+Ke,_e),Ua(I+Ke,_e-fn,I+$t,_e-ft,I,_e-ft),Ua(I-$t,_e-ft,I-Ke,_e-fn,I-Ke,_e),Ua(I-Ke,_e+fn,I-$t,_e+ft,I,_e+ft),Ua(I+$t,_e+ft,I+Ke,_e+fn,I+Ke,_e),Hs(Lt),this},_.__private__.circle=_.circle=function(I,_e,Ke,ft){if(isNaN(I)||isNaN(_e)||isNaN(Ke)||!Nr(ft))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(I,_e,Ke,Ke,ft)},_.setFont=function(I,_e,Ke){return Ke&&(_e=fe(_e,Ke)),ot=fs(I,_e,{disableWarning:!1}),this};var Yu=_.__private__.getFont=_.getFont=function(){return bn[fs.apply(_,arguments)]};_.__private__.getFontList=_.getFontList=function(){var I,_e,Ke={};for(I in Nn)if(Nn.hasOwnProperty(I))for(_e in Ke[I]=[],Nn[I])Nn[I].hasOwnProperty(_e)&&Ke[I].push(_e);return Ke},_.addFont=function(I,_e,Ke,ft,Lt){var $t=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&$t.indexOf(arguments[3])!==-1?Lt=arguments[3]:arguments[3]&&$t.indexOf(arguments[3])==-1&&(Ke=fe(Ke,ft)),Lt=Lt||"Identity-H",Vs.call(this,I,_e,Ke,Lt)};var Al,Yl=e.lineWidth||.200025,al=_.__private__.getLineWidth=_.getLineWidth=function(){return Yl},kl=_.__private__.setLineWidth=_.setLineWidth=function(I){return Yl=I,de(me(O(I))+" w"),this};_.__private__.setLineDash=kr.API.setLineDash=kr.API.setLineDashPattern=function(I,_e){if(I=I||[],_e=_e||0,isNaN(_e)||!Array.isArray(I))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return I=I.map(function(Ke){return me(O(Ke))}).join(" "),_e=me(O(_e)),de("["+I+"] "+_e+" d"),this};var Jl=_.__private__.getLineHeight=_.getLineHeight=function(){return ze*Al};_.__private__.getLineHeight=_.getLineHeight=function(){return ze*Al};var Xr=_.__private__.setLineHeightFactor=_.setLineHeightFactor=function(I){return typeof(I=I||1.15)=="number"&&(Al=I),this},no=_.__private__.getLineHeightFactor=_.getLineHeightFactor=function(){return Al};Xr(e.lineHeight);var or=_.__private__.getHorizontalCoordinate=function(I){return O(I)},ro=_.__private__.getVerticalCoordinate=function(I){return K===F.ADVANCED?I:We[q].mediaBox.topRightY-We[q].mediaBox.bottomLeftY-O(I)},ll=_.__private__.getHorizontalCoordinateString=_.getHorizontalCoordinateString=function(I){return me(or(I))},_a=_.__private__.getVerticalCoordinateString=_.getVerticalCoordinateString=function(I){return me(ro(I))},Ui=e.strokeColor||"0 G";_.__private__.getStrokeColor=_.getDrawColor=function(){return Pr(Ui)},_.__private__.setStrokeColor=_.setDrawColor=function(I,_e,Ke,ft){return Ui=lr({ch1:I,ch2:_e,ch3:Ke,ch4:ft,pdfColorType:"draw",precision:2}),de(Ui),this};var Xl=e.fillColor||"0 g";_.__private__.getFillColor=_.getFillColor=function(){return Pr(Xl)},_.__private__.setFillColor=_.setFillColor=function(I,_e,Ke,ft){return Xl=lr({ch1:I,ch2:_e,ch3:Ke,ch4:ft,pdfColorType:"fill",precision:2}),de(Xl),this};var ta=e.textColor||"0 g",Tl=_.__private__.getTextColor=_.getTextColor=function(){return Pr(ta)};_.__private__.setTextColor=_.setTextColor=function(I,_e,Ke,ft){return ta=lr({ch1:I,ch2:_e,ch3:Ke,ch4:ft,pdfColorType:"text",precision:3}),this};var Nl=e.charSpace,Bs=_.__private__.getCharSpace=_.getCharSpace=function(){return parseFloat(Nl||0)};_.__private__.setCharSpace=_.setCharSpace=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Nl=I,this};var Dl=0;_.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},_.__private__.setLineCap=_.setLineCap=function(I){var _e=_.CapJoinStyles[I];if(_e===void 0)throw new Error("Line cap style of '"+I+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Dl=_e,de(_e+" J"),this};var bi=0;_.__private__.setLineJoin=_.setLineJoin=function(I){var _e=_.CapJoinStyles[I];if(_e===void 0)throw new Error("Line join style of '"+I+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return bi=_e,de(_e+" j"),this},_.__private__.setLineMiterLimit=_.__private__.setMiterLimit=_.setLineMiterLimit=_.setMiterLimit=function(I){if(I=I||0,isNaN(I))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return de(me(O(I))+" M"),this},_.GState=b0,_.setGState=function(I){(I=typeof I=="string"?Pn[fr[I]]:Ju(null,I)).equals(yr)||(de("/"+I.id+" gs"),yr=I)};var Ju=function(I,_e){if(!I||!fr[I]){var Ke=!1;for(var ft in Pn)if(Pn.hasOwnProperty(ft)&&Pn[ft].equals(_e)){Ke=!0;break}if(Ke)_e=Pn[ft];else{var Lt="GS"+(Object.keys(Pn).length+1).toString(10);Pn[Lt]=_e,_e.id=Lt}return I&&(fr[I]=_e.id),Ot.publish("addGState",_e),_e}};_.addGState=function(I,_e){return Ju(I,_e),this},_.saveGraphicsState=function(){return de("q"),ar.push({key:ot,size:ze,color:ta}),this},_.restoreGraphicsState=function(){de("Q");var I=ar.pop();return ot=I.key,ze=I.size,ta=I.color,yr=null,this},_.setCurrentTransformationMatrix=function(I){return de(I.toString()+" cm"),this},_.comment=function(I){return de("#"+I),this};var Mo=function(I,_e){var Ke=I||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ke},set:function($t){isNaN($t)||(Ke=parseFloat($t))}});var ft=_e||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ft},set:function($t){isNaN($t)||(ft=parseFloat($t))}});var Lt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Lt},set:function($t){Lt=$t.toString()}}),this},qs=function(I,_e,Ke,ft){Mo.call(this,I,_e),this.type="rect";var Lt=Ke||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Lt},set:function(fn){isNaN(fn)||(Lt=parseFloat(fn))}});var $t=ft||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return $t},set:function(fn){isNaN(fn)||($t=parseFloat(fn))}}),this},Il=function(){this.page=at,this.currentPage=q,this.pages=Me.slice(0),this.pagesContext=We.slice(0),this.x=zt,this.y=en,this.matrix=Bn,this.width=wi(q),this.height=ba(q),this.outputDestination=ce,this.id="",this.objectNumber=-1};Il.prototype.restore=function(){at=this.page,q=this.currentPage,We=this.pagesContext,Me=this.pages,zt=this.x,en=this.y,Bn=this.matrix,Es(q,this.width),io(q,this.height),ce=this.outputDestination};var Ws=function(I,_e,Ke,ft,Lt){qt.push(new Il),at=q=0,Me=[],zt=I,en=_e,Bn=Lt,nn([Ke,ft])},ul=function(I){if(Zn[I])qt.pop().restore();else{var _e=new Il,Ke="Xo"+(Object.keys(Jn).length+1).toString(10);_e.id=Ke,Zn[I]=Ke,Jn[Ke]=_e,Ot.publish("addFormObject",_e),qt.pop().restore()}};for(var cl in _.beginFormObject=function(I,_e,Ke,ft,Lt){return Ws(I,_e,Ke,ft,Lt),this},_.endFormObject=function(I){return ul(I),this},_.doFormObject=function(I,_e){var Ke=Jn[Zn[I]];return de("q"),de(_e.toString()+" cm"),de("/"+Ke.id+" Do"),de("Q"),this},_.getFormObject=function(I){var _e=Jn[Zn[I]];return{x:_e.x,y:_e.y,width:_e.width,height:_e.height,matrix:_e.matrix}},_.save=function(I,_e){return I=I||"generated.pdf",(_e=_e||{}).returnPromise=_e.returnPromise||!1,_e.returnPromise===!1?(Zf(Lo(eo()),I),typeof Zf.unload=="function"&&Ir.setTimeout&&setTimeout(Zf.unload,911),this):new Promise(function(Ke,ft){try{var Lt=Zf(Lo(eo()),I);typeof Zf.unload=="function"&&Ir.setTimeout&&setTimeout(Zf.unload,911),Ke(Lt)}catch($t){ft($t.message)}})},kr.API)kr.API.hasOwnProperty(cl)&&(cl==="events"&&kr.API.events.length?function(I,_e){var Ke,ft,Lt;for(Lt=_e.length-1;Lt!==-1;Lt--)Ke=_e[Lt][0],ft=_e[Lt][1],I.subscribe.apply(I,[Ke].concat(typeof ft=="function"?[ft]:ft))}(Ot,kr.API.events):_[cl]=kr.API[cl]);var wi=_.getPageWidth=function(I){return(We[I=I||q].mediaBox.topRightX-We[I].mediaBox.bottomLeftX)/rt},Es=_.setPageWidth=function(I,_e){We[I].mediaBox.topRightX=_e*rt+We[I].mediaBox.bottomLeftX},ba=_.getPageHeight=function(I){return(We[I=I||q].mediaBox.topRightY-We[I].mediaBox.bottomLeftY)/rt},io=_.setPageHeight=function(I,_e){We[I].mediaBox.topRightY=_e*rt+We[I].mediaBox.bottomLeftY};return _.internal={pdfEscape:_n,getStyle:jo,getFont:Yu,getFontSize:et,getCharSpace:Bs,getTextColor:Tl,getLineHeight:Jl,getLineHeightFactor:no,getLineWidth:al,write:Ze,getHorizontalCoordinate:or,getVerticalCoordinate:ro,getCoordinateString:ll,getVerticalCoordinateString:_a,collections:{},newObject:mr,newAdditionalObject:Lr,newObjectDeferred:lt,newObjectDeferredBegin:Cn,getFilters:Hr,putStream:ir,events:Ot,scaleFactor:rt,pageSize:{getWidth:function(){return wi(q)},setWidth:function(I){Es(q,I)},getHeight:function(){return ba(q)},setHeight:function(I){io(q,I)}},encryptionOptions:g,encryption:to,getEncryptor:il,output:Gs,getNumberOfPages:Mi,pages:Me,out:de,f2:X,f3:R,getPageInfo:ya,getPageInfoByObjId:gr,getCurrentPageInfo:br,getPDFVersion:k,Point:Mo,Rectangle:qs,Matrix:gn,hasHotfix:va},Object.defineProperty(_.internal.pageSize,"width",{get:function(){return wi(q)},set:function(I){Es(q,I)},enumerable:!0,configurable:!0}),Object.defineProperty(_.internal.pageSize,"height",{get:function(){return ba(q)},set:function(I){io(q,I)},enumerable:!0,configurable:!0}),Gn.call(_,tt),ot="F1",ai(i,t),Ot.publish("initialized"),_}zh.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},zh.prototype.toHexString=function(e){return e.split("").map(function(n){return("0"+(255&n.charCodeAt(0)).toString(16)).slice(-2)}).join("")},zh.prototype.hexToBytes=function(e){for(var n=[],t=0;t<e.length;t+=2)n.push(String.fromCharCode(parseInt(e.substr(t,2),16)));return n.join("")},zh.prototype.processOwnerPassword=function(e,n){return L1(x1(n).substr(0,5),e)},zh.prototype.encryptor=function(e,n){var t=x1(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&n,n>>8&255)).substr(0,10);return function(r){return L1(t,r)}},b0.prototype.equals=function(e){var n,t="id,objectNumber,equals";if(!e||Xi(e)!==Xi(this))return!1;var r=0;for(n in this)if(!(t.indexOf(n)>=0)){if(this.hasOwnProperty(n)&&!e.hasOwnProperty(n)||this[n]!==e[n])return!1;r++}for(n in e)e.hasOwnProperty(n)&&t.indexOf(n)<0&&r--;return r===0},kr.API={events:[]},kr.version="2.5.2";var ls=kr.API,vy=1,fh=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Th=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Zr=function(e){return e.toFixed(2)},of=function(e){return e.toFixed(5)};ls.__acroform__={};var Pl=function(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e},Ab=function(e){return e*vy},ac=function(e){var n=new Mx,t=Yn.internal.getHeight(e)||0,r=Yn.internal.getWidth(e)||0;return n.BBox=[0,0,Number(Zr(r)),Number(Zr(t))],n},AF=ls.__acroform__.setBit=function(e,n){if(e=e||0,n=n||0,isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<n},kF=ls.__acroform__.clearBit=function(e,n){if(e=e||0,n=n||0,isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<n)},TF=ls.__acroform__.getBit=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<n?1:0},bs=ls.__acroform__.getBitForPdf=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return TF(e,n-1)},ws=ls.__acroform__.setBitForPdf=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return AF(e,n-1)},xs=ls.__acroform__.clearBitForPdf=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return kF(e,n-1)},NF=ls.__acroform__.calculateCoordinates=function(e,n){var t=n.internal.getHorizontalCoordinate,r=n.internal.getVerticalCoordinate,i=e[0],s=e[1],o=e[2],u=e[3],f={};return f.lowerLeft_X=t(i)||0,f.lowerLeft_Y=r(s+u)||0,f.upperRight_X=t(i+o)||0,f.upperRight_Y=r(s)||0,[Number(Zr(f.lowerLeft_X)),Number(Zr(f.lowerLeft_Y)),Number(Zr(f.upperRight_X)),Number(Zr(f.upperRight_Y))]},DF=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var n=[],t=e._V||e.DV,r=S1(e,t),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;n.push("/Tx BMC"),n.push("q"),n.push("BT"),n.push(e.scope.__private__.encodeColorString(e.color)),n.push("/"+i+" "+Zr(r.fontSize)+" Tf"),n.push("1 0 0 1 0 0 Tm"),n.push(r.text),n.push("ET"),n.push("Q"),n.push("EMC");var s=ac(e);return s.scope=e.scope,s.stream=n.join(`
`),s}},S1=function(e,n){var t=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},i=(n=(n=n.substr(0,1)=="("?n.substr(1):n).substr(n.length-1)==")"?n.substr(0,n.length-1):n).split(" ");i=e.multiline?i.map(function(R){return R.split(`
`)}):i.map(function(R){return[R]});var s=t,o=Yn.internal.getHeight(e)||0;o=o<0?-o:o;var u=Yn.internal.getWidth(e)||0;u=u<0?-u:u;var f=function(R,O,B){if(R+1<i.length){var z=O+" "+i[R+1][0];return wg(z,e,B).width<=u-4}return!1};s++;e:for(;s>0;){n="",s--;var d,g,y=wg("3",e,s).height,x=e.multiline?o-s:(o-y)/2,_=x+=2,M=0,k=0,N=0;if(s<=0){n=`(...) Tj
`,n+="% Width of Text: "+wg(n,e,s=12).width+", FieldWidth:"+u+`
`;break}for(var T="",F=0,K=0;K<i.length;K++)if(i.hasOwnProperty(K)){var Q=!1;if(i[K].length!==1&&N!==i[K].length-1){if((y+2)*(F+2)+2>o)continue e;T+=i[K][N],Q=!0,k=K,K--}else{T=(T+=i[K][N]+" ").substr(T.length-1)==" "?T.substr(0,T.length-1):T;var he=parseInt(K),fe=f(he,T,s),me=K>=i.length-1;if(fe&&!me){T+=" ",N=0;continue}if(fe||me){if(me)k=he;else if(e.multiline&&(y+2)*(F+2)+2>o)continue e}else{if(!e.multiline||(y+2)*(F+2)+2>o)continue e;k=he}}for(var G="",$=M;$<=k;$++){var X=i[$];if(e.multiline){if($===k){G+=X[N]+" ",N=(N+1)%X.length;continue}if($===M){G+=X[X.length-1]+" ";continue}}G+=X[0]+" "}switch(G=G.substr(G.length-1)==" "?G.substr(0,G.length-1):G,g=wg(G,e,s).width,e.textAlign){case"right":d=u-g-2;break;case"center":d=(u-g)/2;break;case"left":default:d=2}n+=Zr(d)+" "+Zr(_)+` Td
`,n+="("+fh(G)+`) Tj
`,n+=-Zr(d)+` 0 Td
`,_=-(s+2),g=0,M=Q?k:k+1,F++,T=""}break}return r.text=n,r.fontSize=s,r},wg=function(e,n,t){var r=n.scope.internal.getFont(n.fontName,n.fontStyle),i=n.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:n.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},IF={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},OF=function(e,n){var t={type:"reference",object:e};n.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&n.internal.getPageInfo(e.page).pageContext.annotations.push(t)},BF=function(e,n){for(var t in e)if(e.hasOwnProperty(t)){var r=t,i=e[t];n.internal.newObjectDeferredBegin(i.objId,!0),Xi(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete e[r]}},RF=function(e,n){if(n.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Zu.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(IF)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");vy=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new Ax,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&OF(s,t)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(t){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var u=r[o],f=[],d=u.Rect;if(u.Rect&&(u.Rect=NF(u.Rect,i)),i.internal.newObjectDeferredBegin(u.objId,!0),u.DA=Yn.createDefaultAppearanceStream(u),Xi(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(f=u.getKeyValueListForStream()),u.Rect=d,u.hasAppearanceStream&&!u.appearanceStreamContent){var g=DF(u);f.push({key:"AP",value:"<</N "+g+">>"}),i.internal.acroformPlugin.xForms.push(g)}if(u.appearanceStreamContent){var y="";for(var x in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(x)){var _=u.appearanceStreamContent[x];if(y+="/"+x+" ",y+="<<",Object.keys(_).length>=1||Array.isArray(_)){for(var o in _)if(_.hasOwnProperty(o)){var M=_[o];typeof M=="function"&&(M=M.call(i,u)),y+="/"+o+" "+M+" ",i.internal.acroformPlugin.xForms.indexOf(M)>=0||i.internal.acroformPlugin.xForms.push(M)}}else typeof(M=_)=="function"&&(M=M.call(i,u)),y+="/"+o+" "+M,i.internal.acroformPlugin.xForms.indexOf(M)>=0||i.internal.acroformPlugin.xForms.push(M);y+=">>"}f.push({key:"AP",value:`<<
`+y+">>"})}i.internal.putStream({additionalKeyValues:f,objectId:u.objId}),i.internal.out("endobj")}s&&BF(i.internal.acroformPlugin.xForms,i)})(t,e)}),e.internal.acroformPlugin.isInitialized=!0}},Px=ls.__acroform__.arrayToPdfArray=function(e,n,t){var r=function(o){return o};if(Array.isArray(e)){for(var i="[",s=0;s<e.length;s++)switch(s!==0&&(i+=" "),Xi(e[s])){case"boolean":case"number":case"object":i+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(n!==void 0&&t&&(r=t.internal.getEncryptor(n)),i+="("+fh(r(e[s].toString()))+")"):i+=e[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},hv=function(e,n,t){var r=function(i){return i};return n!==void 0&&t&&(r=t.internal.getEncryptor(n)),(e=e||"").toString(),e="("+fh(r(e))+")"},hc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};hc.prototype.toString=function(){return this.objId+" 0 R"},hc.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},hc.prototype.getKeyValueListForStream=function(){var e=[],n=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in n)if(Object.getOwnPropertyDescriptor(this,n[t]).configurable===!1){var r=n[t],i=this[r];i&&(Array.isArray(i)?e.push({key:r,value:Px(i,this.objId,this.scope)}):i instanceof hc?(i.scope=this.scope,e.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:r,value:i}))}return e};var Mx=function(){hc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,n=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};Pl(Mx,hc);var Ax=function(){hc.call(this);var e,n=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return n.length>0?n:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return n}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+fh(t(e))+")"}},set:function(t){e=t}})};Pl(Ax,hc);var Zu=function e(){hc.call(this);var n=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return n},set:function(T){if(isNaN(T))throw new Error('Invalid value "'+T+'" for attribute F supplied.');n=T}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!bs(n,3)},set:function(T){T?this.F=ws(n,3):this.F=xs(n,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(T){if(isNaN(T))throw new Error('Invalid value "'+T+'" for attribute Ff supplied.');t=T}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(T){r=T!==void 0?T:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(T){r[0]=T}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(T){r[1]=T}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(T){r[2]=T}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(T){r[3]=T}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(T){switch(T){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=T;break;default:throw new Error('Invalid value "'+T+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof w0)return;s="FieldObject"+e.FieldNum++}var T=function(F){return F};return this.scope&&(T=this.scope.internal.getEncryptor(this.objId)),"("+fh(T(s))+")"},set:function(T){s=T.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(T){s=T}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(T){o=T}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(T){u=T}});var f=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f},set:function(T){f=T}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/vy:d},set:function(T){d=T}});var g="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return g},set:function(T){g=T}});var y="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!y||this instanceof w0||this instanceof rh))return hv(y,this.objId,this.scope)},set:function(T){T=T.toString(),y=T}});var x=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof Qs?x:hv(x,this.objId,this.scope)},set:function(T){T=T.toString(),x=this instanceof Qs?T:T.substr(0,1)==="("?Th(T.substr(1,T.length-2)):Th(T)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Qs?Th(x.substr(1,x.length-1)):x},set:function(T){T=T.toString(),x=this instanceof Qs?"/"+T:T}});var _=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(_)return _},set:function(T){this.V=T}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(_)return this instanceof Qs?_:hv(_,this.objId,this.scope)},set:function(T){T=T.toString(),_=this instanceof Qs?T:T.substr(0,1)==="("?Th(T.substr(1,T.length-2)):Th(T)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Qs?Th(_.substr(1,_.length-1)):_},set:function(T){T=T.toString(),_=this instanceof Qs?"/"+T:T}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var M,k=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return k},set:function(T){T=!!T,k=T}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(M)return M},set:function(T){M=T}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,1)},set:function(T){T?this.Ff=ws(this.Ff,1):this.Ff=xs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,2)},set:function(T){T?this.Ff=ws(this.Ff,2):this.Ff=xs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,3)},set:function(T){T?this.Ff=ws(this.Ff,3):this.Ff=xs(this.Ff,3)}});var N=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(N!==null)return N},set:function(T){if([0,1,2].indexOf(T)===-1)throw new Error('Invalid value "'+T+'" for attribute Q supplied.');N=T}}),Object.defineProperty(this,"textAlign",{get:function(){var T;switch(N){case 0:default:T="left";break;case 1:T="center";break;case 2:T="right"}return T},configurable:!0,enumerable:!0,set:function(T){switch(T){case"right":case 2:N=2;break;case"center":case 1:N=1;break;case"left":case 0:default:N=0}}})};Pl(Zu,hc);var Xh=function(){Zu.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var n=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Px(n,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=function(s,o,u){u||(u=1);for(var f,d=[];f=o.exec(s);)d.push(f[u]);return d}(r,/\((.*?)\)/g)),n=i}}),this.getOptions=function(){return n},this.setOptions=function(t){n=t,this.sort&&n.sort()},this.addOption=function(t){t=(t=t||"").toString(),n.push(t),this.sort&&n.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();n.indexOf(t)!==-1&&(n.splice(n.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,18)},set:function(t){t?this.Ff=ws(this.Ff,18):this.Ff=xs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=ws(this.Ff,19):this.Ff=xs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,20)},set:function(t){t?(this.Ff=ws(this.Ff,20),n.sort()):this.Ff=xs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,22)},set:function(t){t?this.Ff=ws(this.Ff,22):this.Ff=xs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,23)},set:function(t){t?this.Ff=ws(this.Ff,23):this.Ff=xs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,27)},set:function(t){t?this.Ff=ws(this.Ff,27):this.Ff=xs(this.Ff,27)}}),this.hasAppearanceStream=!1};Pl(Xh,Zu);var Qh=function(){Xh.call(this),this.fontName="helvetica",this.combo=!1};Pl(Qh,Xh);var ed=function(){Qh.call(this),this.combo=!0};Pl(ed,Qh);var zg=function(){ed.call(this),this.edit=!0};Pl(zg,ed);var Qs=function(){Zu.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,15)},set:function(t){t?this.Ff=ws(this.Ff,15):this.Ff=xs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,16)},set:function(t){t?this.Ff=ws(this.Ff,16):this.Ff=xs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,17)},set:function(t){t?this.Ff=ws(this.Ff,17):this.Ff=xs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,26)},set:function(t){t?this.Ff=ws(this.Ff,26):this.Ff=xs(this.Ff,26)}});var e,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(n).length!==0){var r,i=[];for(r in i.push("<<"),n)i.push("/"+r+" ("+fh(t(n[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Xi(t)==="object"&&(n=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(t){typeof t=="string"&&(n.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};Pl(Qs,Zu);var $g=function(){Qs.call(this),this.pushButton=!0};Pl($g,Qs);var td=function(){Qs.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n!==void 0?n:[]}})};Pl(td,Qs);var w0=function(){var e,n;Zu.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return n},set:function(i){n=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(u){return u};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+fh(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Xi(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Yn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Pl(w0,Zu),td.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var n in this.Kids)if(this.Kids.hasOwnProperty(n)){var t=this.Kids[n];t.appearanceStreamContent=e.createAppearanceStream(t.optionName),t.caption=e.getCA()}},td.prototype.createOption=function(e){var n=new w0;return n.Parent=this,n.optionName=e,this.Kids.push(n),FF.call(this.scope,n),n};var Ug=function(){Qs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Yn.CheckBox.createAppearanceStream()};Pl(Ug,Qs);var rh=function(){Zu.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,13)},set:function(n){n?this.Ff=ws(this.Ff,13):this.Ff=xs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,21)},set:function(n){n?this.Ff=ws(this.Ff,21):this.Ff=xs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,23)},set:function(n){n?this.Ff=ws(this.Ff,23):this.Ff=xs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,24)},set:function(n){n?this.Ff=ws(this.Ff,24):this.Ff=xs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,25)},set:function(n){n?this.Ff=ws(this.Ff,25):this.Ff=xs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,26)},set:function(n){n?this.Ff=ws(this.Ff,26):this.Ff=xs(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){Number.isInteger(n)&&(e=n)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Pl(rh,Zu);var Vg=function(){rh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!bs(this.Ff,14)},set:function(e){e?this.Ff=ws(this.Ff,14):this.Ff=xs(this.Ff,14)}}),this.password=!0};Pl(Vg,rh);var Yn={CheckBox:{createAppearanceStream:function(){return{N:{On:Yn.CheckBox.YesNormal},D:{On:Yn.CheckBox.YesPushDown,Off:Yn.CheckBox.OffPushDown}}},YesPushDown:function(e){var n=ac(e);n.scope=e.scope;var t=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),s=S1(e,e.caption);return t.push("0.749023 g"),t.push("0 0 "+Zr(Yn.internal.getWidth(e))+" "+Zr(Yn.internal.getHeight(e))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+Zr(s.fontSize)+" Tf "+i),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),n.stream=t.join(`
`),n},YesNormal:function(e){var n=ac(e);n.scope=e.scope;var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),i=[],s=Yn.internal.getHeight(e),o=Yn.internal.getWidth(e),u=S1(e,e.caption);return i.push("1 g"),i.push("0 0 "+Zr(o)+" "+Zr(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Zr(o-1)+" "+Zr(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+Zr(u.fontSize)+" Tf "+r),i.push(u.text),i.push("ET"),i.push("Q"),n.stream=i.join(`
`),n},OffPushDown:function(e){var n=ac(e);n.scope=e.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Zr(Yn.internal.getWidth(e))+" "+Zr(Yn.internal.getHeight(e))+" re"),t.push("f"),n.stream=t.join(`
`),n}},RadioButton:{Circle:{createAppearanceStream:function(e){var n={D:{Off:Yn.RadioButton.Circle.OffPushDown},N:{}};return n.N[e]=Yn.RadioButton.Circle.YesNormal,n.D[e]=Yn.RadioButton.Circle.YesPushDown,n},getCA:function(){return"l"},YesNormal:function(e){var n=ac(e);n.scope=e.scope;var t=[],r=Yn.internal.getWidth(e)<=Yn.internal.getHeight(e)?Yn.internal.getWidth(e)/4:Yn.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Yn.internal.Bezier_C,s=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+of(Yn.internal.getWidth(e)/2)+" "+of(Yn.internal.getHeight(e)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),n.stream=t.join(`
`),n},YesPushDown:function(e){var n=ac(e);n.scope=e.scope;var t=[],r=Yn.internal.getWidth(e)<=Yn.internal.getHeight(e)?Yn.internal.getWidth(e)/4:Yn.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Yn.internal.Bezier_C).toFixed(5)),o=Number((r*Yn.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+of(Yn.internal.getWidth(e)/2)+" "+of(Yn.internal.getHeight(e)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+of(Yn.internal.getWidth(e)/2)+" "+of(Yn.internal.getHeight(e)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),n.stream=t.join(`
`),n},OffPushDown:function(e){var n=ac(e);n.scope=e.scope;var t=[],r=Yn.internal.getWidth(e)<=Yn.internal.getHeight(e)?Yn.internal.getWidth(e)/4:Yn.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Yn.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+of(Yn.internal.getWidth(e)/2)+" "+of(Yn.internal.getHeight(e)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),n.stream=t.join(`
`),n}},Cross:{createAppearanceStream:function(e){var n={D:{Off:Yn.RadioButton.Cross.OffPushDown},N:{}};return n.N[e]=Yn.RadioButton.Cross.YesNormal,n.D[e]=Yn.RadioButton.Cross.YesPushDown,n},getCA:function(){return"8"},YesNormal:function(e){var n=ac(e);n.scope=e.scope;var t=[],r=Yn.internal.calculateCross(e);return t.push("q"),t.push("1 1 "+Zr(Yn.internal.getWidth(e)-2)+" "+Zr(Yn.internal.getHeight(e)-2)+" re"),t.push("W"),t.push("n"),t.push(Zr(r.x1.x)+" "+Zr(r.x1.y)+" m"),t.push(Zr(r.x2.x)+" "+Zr(r.x2.y)+" l"),t.push(Zr(r.x4.x)+" "+Zr(r.x4.y)+" m"),t.push(Zr(r.x3.x)+" "+Zr(r.x3.y)+" l"),t.push("s"),t.push("Q"),n.stream=t.join(`
`),n},YesPushDown:function(e){var n=ac(e);n.scope=e.scope;var t=Yn.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+Zr(Yn.internal.getWidth(e))+" "+Zr(Yn.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Zr(Yn.internal.getWidth(e)-2)+" "+Zr(Yn.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Zr(t.x1.x)+" "+Zr(t.x1.y)+" m"),r.push(Zr(t.x2.x)+" "+Zr(t.x2.y)+" l"),r.push(Zr(t.x4.x)+" "+Zr(t.x4.y)+" m"),r.push(Zr(t.x3.x)+" "+Zr(t.x3.y)+" l"),r.push("s"),r.push("Q"),n.stream=r.join(`
`),n},OffPushDown:function(e){var n=ac(e);n.scope=e.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Zr(Yn.internal.getWidth(e))+" "+Zr(Yn.internal.getHeight(e))+" re"),t.push("f"),n.stream=t.join(`
`),n}}},createDefaultAppearanceStream:function(e){var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,t=e.scope.__private__.encodeColorString(e.color);return"/"+n+" "+e.fontSize+" Tf "+t}};Yn.internal={Bezier_C:.551915024494,calculateCross:function(e){var n=Yn.internal.getWidth(e),t=Yn.internal.getHeight(e),r=Math.min(n,t);return{x1:{x:(n-r)/2,y:(t-r)/2+r},x2:{x:(n-r)/2+r,y:(t-r)/2},x3:{x:(n-r)/2,y:(t-r)/2},x4:{x:(n-r)/2+r,y:(t-r)/2+r}}}},Yn.internal.getWidth=function(e){var n=0;return Xi(e)==="object"&&(n=Ab(e.Rect[2])),n},Yn.internal.getHeight=function(e){var n=0;return Xi(e)==="object"&&(n=Ab(e.Rect[3])),n};var FF=ls.addField=function(e){if(RF(this,e),!(e instanceof Zu))throw new Error("Invalid argument passed to jsPDF.addField.");var n;return(n=e).scope.internal.acroformPlugin.printedOut&&(n.scope.internal.acroformPlugin.printedOut=!1,n.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),n.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(n),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};ls.AcroFormChoiceField=Xh,ls.AcroFormListBox=Qh,ls.AcroFormComboBox=ed,ls.AcroFormEditBox=zg,ls.AcroFormButton=Qs,ls.AcroFormPushButton=$g,ls.AcroFormRadioButton=td,ls.AcroFormCheckBox=Ug,ls.AcroFormTextField=rh,ls.AcroFormPasswordField=Vg,ls.AcroFormAppearance=Yn,ls.AcroForm={ChoiceField:Xh,ListBox:Qh,ComboBox:ed,EditBox:zg,Button:Qs,PushButton:$g,RadioButton:td,CheckBox:Ug,TextField:rh,PasswordField:Vg,Appearance:Yn},kr.AcroForm={ChoiceField:Xh,ListBox:Qh,ComboBox:ed,EditBox:zg,Button:Qs,PushButton:$g,RadioButton:td,CheckBox:Ug,TextField:rh,PasswordField:Vg,Appearance:Yn};kr.AcroForm;function kx(e){return e.reduce(function(n,t,r){return n[t]=r,n},{})}(function(e){e.__addimage__={};var n="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(R,O){var B,z,W,V,oe,ie=n;if((O=O||n)==="RGBA"||R.data!==void 0&&R.data instanceof Uint8ClampedArray&&"height"in R&&"width"in R)return"RGBA";if(fe(R))for(oe in t)for(W=t[oe],B=0;B<W.length;B+=1){for(V=!0,z=0;z<W[B].length;z+=1)if(W[B][z]!==void 0&&W[B][z]!==R[z]){V=!1;break}if(V===!0){ie=oe;break}}else for(oe in t)for(W=t[oe],B=0;B<W.length;B+=1){for(V=!0,z=0;z<W[B].length;z+=1)if(W[B][z]!==void 0&&W[B][z]!==R.charCodeAt(z)){V=!1;break}if(V===!0){ie=oe;break}}return ie===n&&O!==n&&(ie=O),ie},i=function R(O){for(var B=this.internal.write,z=this.internal.putStream,W=(0,this.internal.getFilters)();W.indexOf("FlateEncode")!==-1;)W.splice(W.indexOf("FlateEncode"),1);O.objectId=this.internal.newObject();var V=[];if(V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Image"}),V.push({key:"Width",value:O.width}),V.push({key:"Height",value:O.height}),O.colorSpace===N.INDEXED?V.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(O.palette.length/3-1)+" "+("sMask"in O&&O.sMask!==void 0?O.objectId+2:O.objectId+1)+" 0 R]"}):(V.push({key:"ColorSpace",value:"/"+O.colorSpace}),O.colorSpace===N.DEVICE_CMYK&&V.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),V.push({key:"BitsPerComponent",value:O.bitsPerComponent}),"decodeParameters"in O&&O.decodeParameters!==void 0&&V.push({key:"DecodeParms",value:"<<"+O.decodeParameters+">>"}),"transparency"in O&&Array.isArray(O.transparency)){for(var oe="",ie=0,xe=O.transparency.length;ie<xe;ie++)oe+=O.transparency[ie]+" "+O.transparency[ie]+" ";V.push({key:"Mask",value:"["+oe+"]"})}O.sMask!==void 0&&V.push({key:"SMask",value:O.objectId+1+" 0 R"});var Ee=O.filter!==void 0?["/"+O.filter]:void 0;if(z({data:O.data,additionalKeyValues:V,alreadyAppliedFilters:Ee,objectId:O.objectId}),B("endobj"),"sMask"in O&&O.sMask!==void 0){var Te="/Predictor "+O.predictor+" /Colors 1 /BitsPerComponent "+O.bitsPerComponent+" /Columns "+O.width,Y={width:O.width,height:O.height,colorSpace:"DeviceGray",bitsPerComponent:O.bitsPerComponent,decodeParameters:Te,data:O.sMask};"filter"in O&&(Y.filter=O.filter),R.call(this,Y)}if(O.colorSpace===N.INDEXED){var q=this.internal.newObject();z({data:G(new Uint8Array(O.palette)),objectId:q}),B("endobj")}},s=function(){var R=this.internal.collections.addImage_images;for(var O in R)i.call(this,R[O])},o=function(){var R,O=this.internal.collections.addImage_images,B=this.internal.write;for(var z in O)B("/I"+(R=O[z]).index,R.objectId,"0","R")},u=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},f=function(){var R=this.internal.collections.addImage_images;return u.call(this),R},d=function(){return Object.keys(this.internal.collections.addImage_images).length},g=function(R){return typeof e["process"+R.toUpperCase()]=="function"},y=function(R){return Xi(R)==="object"&&R.nodeType===1},x=function(R,O){if(R.nodeName==="IMG"&&R.hasAttribute("src")){var B=""+R.getAttribute("src");if(B.indexOf("data:image/")===0)return ap(unescape(B).split("base64,").pop());var z=e.loadFile(B,!0);if(z!==void 0)return z}if(R.nodeName==="CANVAS"){if(R.width===0||R.height===0)throw new Error("Given canvas must have data. Canvas width: "+R.width+", height: "+R.height);var W;switch(O){case"PNG":W="image/png";break;case"WEBP":W="image/webp";break;case"JPEG":case"JPG":default:W="image/jpeg"}return ap(R.toDataURL(W,1).split("base64,").pop())}},_=function(R){var O=this.internal.collections.addImage_images;if(O){for(var B in O)if(R===O[B].alias)return O[B]}},M=function(R,O,B){return R||O||(R=-96,O=-96),R<0&&(R=-1*B.width*72/R/this.internal.scaleFactor),O<0&&(O=-1*B.height*72/O/this.internal.scaleFactor),R===0&&(R=O*B.width/B.height),O===0&&(O=R*B.height/B.width),[R,O]},k=function(R,O,B,z,W,V){var oe=M.call(this,B,z,W),ie=this.internal.getCoordinateString,xe=this.internal.getVerticalCoordinateString,Ee=f.call(this);if(B=oe[0],z=oe[1],Ee[W.index]=W,V){V*=Math.PI/180;var Te=Math.cos(V),Y=Math.sin(V),q=function(ue){return ue.toFixed(4)},ee=[q(Te),q(Y),q(-1*Y),q(Te),0,0,"cm"]}this.internal.write("q"),V?(this.internal.write([1,"0","0",1,ie(R),xe(O+z),"cm"].join(" ")),this.internal.write(ee.join(" ")),this.internal.write([ie(B),"0","0",ie(z),"0","0","cm"].join(" "))):this.internal.write([ie(B),"0","0",ie(z),ie(R),xe(O+z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+W.index+" Do"),this.internal.write("Q")},N=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var T=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},F=e.__addimage__.sHashCode=function(R){var O,B,z=0;if(typeof R=="string")for(B=R.length,O=0;O<B;O++)z=(z<<5)-z+R.charCodeAt(O),z|=0;else if(fe(R))for(B=R.byteLength/2,O=0;O<B;O++)z=(z<<5)-z+R[O],z|=0;return z},K=e.__addimage__.validateStringAsBase64=function(R){(R=R||"").toString().trim();var O=!0;return R.length===0&&(O=!1),R.length%4!=0&&(O=!1),/^[A-Za-z0-9+/]+$/.test(R.substr(0,R.length-2))===!1&&(O=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(R.substr(-2))===!1&&(O=!1),O},Q=e.__addimage__.extractImageFromDataUrl=function(R){var O=(R=R||"").split("base64,"),B=null;if(O.length===2){var z=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(O[0]);Array.isArray(z)&&(B={mimeType:z[1],charset:z[2],data:O[1]})}return B},he=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(R){return he()&&R instanceof ArrayBuffer};var fe=e.__addimage__.isArrayBufferView=function(R){return he()&&typeof Uint32Array<"u"&&(R instanceof Int8Array||R instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array)},me=e.__addimage__.binaryStringToUint8Array=function(R){for(var O=R.length,B=new Uint8Array(O),z=0;z<O;z++)B[z]=R.charCodeAt(z);return B},G=e.__addimage__.arrayBufferToBinaryString=function(R){for(var O="",B=fe(R)?R:new Uint8Array(R),z=0;z<B.length;z+=8192)O+=String.fromCharCode.apply(null,B.subarray(z,z+8192));return O};e.addImage=function(){var R,O,B,z,W,V,oe,ie,xe;if(typeof arguments[1]=="number"?(O=n,B=arguments[1],z=arguments[2],W=arguments[3],V=arguments[4],oe=arguments[5],ie=arguments[6],xe=arguments[7]):(O=arguments[1],B=arguments[2],z=arguments[3],W=arguments[4],V=arguments[5],oe=arguments[6],ie=arguments[7],xe=arguments[8]),Xi(R=arguments[0])==="object"&&!y(R)&&"imageData"in R){var Ee=R;R=Ee.imageData,O=Ee.format||O||n,B=Ee.x||B||0,z=Ee.y||z||0,W=Ee.w||Ee.width||W,V=Ee.h||Ee.height||V,oe=Ee.alias||oe,ie=Ee.compression||ie,xe=Ee.rotation||Ee.angle||xe}var Te=this.internal.getFilters();if(ie===void 0&&Te.indexOf("FlateEncode")!==-1&&(ie="SLOW"),isNaN(B)||isNaN(z))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var Y=$.call(this,R,O,oe,ie);return k.call(this,B,z,W,V,Y,xe),this};var $=function(R,O,B,z){var W,V,oe;if(typeof R=="string"&&r(R)===n){R=unescape(R);var ie=X(R,!1);(ie!==""||(ie=e.loadFile(R,!0))!==void 0)&&(R=ie)}if(y(R)&&(R=x(R,O)),O=r(R,O),!g(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(((oe=B)==null||oe.length===0)&&(B=function(xe){return typeof xe=="string"||fe(xe)?F(xe):fe(xe.data)?F(xe.data):null}(R)),(W=_.call(this,B))||(he()&&(R instanceof Uint8Array||O==="RGBA"||(V=R,R=me(R))),W=this["process"+O.toUpperCase()](R,d.call(this),B,function(xe){return xe&&typeof xe=="string"&&(xe=xe.toUpperCase()),xe in e.image_compression?xe:T.NONE}(z),V)),!W)throw new Error("An unknown error occurred whilst processing the image.");return W},X=e.__addimage__.convertBase64ToBinaryString=function(R,O){var B;O=typeof O!="boolean"||O;var z,W="";if(typeof R=="string"){z=(B=Q(R))!==null?B.data:R;try{W=ap(z)}catch(V){if(O)throw K(z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+V.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return W};e.getImageProperties=function(R){var O,B,z="";if(y(R)&&(R=x(R)),typeof R=="string"&&r(R)===n&&((z=X(R,!1))===""&&(z=e.loadFile(R)||""),R=z),B=r(R),!g(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(!he()||R instanceof Uint8Array||(R=me(R)),!(O=this["process"+B.toUpperCase()](R)))throw new Error("An unknown error occurred whilst processing the image");return O.fileType=B,O}})(kr.API),function(e){var n=function(t){if(t!==void 0&&t!="")return!0};kr.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(t){for(var r,i,s,o=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,f=this.internal.getPageInfoByObjId(t.objId),d=t.pageContext.annotations,g=!1,y=0;y<d.length&&!g;y++)switch((r=d[y]).type){case"link":(n(r.options.url)||n(r.options.pageNumber))&&(g=!0);break;case"reference":case"text":case"freetext":g=!0}if(g!=0){this.internal.write("/Annots [");for(var x=0;x<d.length;x++){r=d[x];var _=this.internal.pdfEscape,M=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var k=this.internal.newAdditionalObject(),N=this.internal.newAdditionalObject(),T=this.internal.getEncryptor(k.objId),F=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+u(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y)+"] ")+"/Contents ("+_(T(r.contents))+")",s+=" /Popup "+N.objId+" 0 R",s+=" /P "+f.objId+" 0 R",s+=" /T ("+_(T(F))+") >>",k.content=s;var K=k.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+u(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+u(r.bounds.y)+"] ")+" /Parent "+K,r.open&&(s+=" /Open true"),s+=" >>",N.content=s,this.internal.write(k.objId,"0 R",N.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+u(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y+r.bounds.h)+"] ";var Q=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+_(M(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Q+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var he=this.annotations._nameMap[r.options.name];r.options.pageNumber=he.page,r.options.top=he.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+_(M(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var fe=u(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+fe+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},e.link=function(t,r,i,s,o){var u=this.internal.getCurrentPageInfo(),f=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:f(t),y:d(r),w:f(t+i),h:d(r+s)},options:o,type:"link"})},e.textWithLink=function(t,r,i,s){var o,u,f=this.getTextWidth(t),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){u=s.maxWidth;var g=this.splitTextToSize(t,u).length;o=Math.ceil(d*g)}else u=f,o=d;return this.text(t,r,i,s),i+=.2*d,s.align==="center"&&(r-=f/2),s.align==="right"&&(r-=f),this.link(r,i-d,u,o,s),f},e.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(kr.API),function(e){var n={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(k){return n[k.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(k){return typeof k=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(k)},u=e.__arabicParser__.isArabicEndLetter=function(k){return o(k)&&s(k)&&n[k.charCodeAt(0)].length<=2},f=e.__arabicParser__.isArabicAlfLetter=function(k){return o(k)&&i.indexOf(k.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(k){return o(k)&&s(k)&&n[k.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(k){return o(k)&&s(k)&&n[k.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(k){return o(k)&&s(k)&&n[k.charCodeAt(0)].length>=3};var g=e.__arabicParser__.arabicLetterHasMedialForm=function(k){return o(k)&&s(k)&&n[k.charCodeAt(0)].length==4},y=e.__arabicParser__.resolveLigatures=function(k){var N=0,T=t,F="",K=0;for(N=0;N<k.length;N+=1)T[k.charCodeAt(N)]!==void 0?(K++,typeof(T=T[k.charCodeAt(N)])=="number"&&(F+=String.fromCharCode(T),T=t,K=0),N===k.length-1&&(T=t,F+=k.charAt(N-(K-1)),N-=K-1,K=0)):(T=t,F+=k.charAt(N-K),N-=K,K=0);return F};e.__arabicParser__.isArabicDiacritic=function(k){return k!==void 0&&r[k.charCodeAt(0)]!==void 0};var x=e.__arabicParser__.getCorrectForm=function(k,N,T){return o(k)?s(k)===!1?-1:!d(k)||!o(N)&&!o(T)||!o(T)&&u(N)||u(k)&&!o(N)||u(k)&&f(N)||u(k)&&u(N)?0:g(k)&&o(N)&&!u(N)&&o(T)&&d(T)?3:u(k)||!o(T)?1:2:-1},_=function(k){var N=0,T=0,F=0,K="",Q="",he="",fe=(k=k||"").split("\\s+"),me=[];for(N=0;N<fe.length;N+=1){for(me.push(""),T=0;T<fe[N].length;T+=1)K=fe[N][T],Q=fe[N][T-1],he=fe[N][T+1],o(K)?(F=x(K,Q,he),me[N]+=F!==-1?String.fromCharCode(n[K.charCodeAt(0)][F]):K):me[N]+=K;me[N]=y(me[N])}return me.join(" ")},M=e.__arabicParser__.processArabic=e.processArabic=function(){var k,N=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,T=[];if(Array.isArray(N)){var F=0;for(T=[],F=0;F<N.length;F+=1)Array.isArray(N[F])?T.push([_(N[F][0]),N[F][1],N[F][2]]):T.push([_(N[F])]);k=T}else k=_(N);return typeof arguments[0]=="string"?k:(arguments[0].text=k,arguments[0])};e.events.push(["preProcessText",M])}(kr.API),kr.API.autoPrint=function(e){var n;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){n=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+n+" 0 R")})}return this},function(e){var n=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(u){t=u}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(u){r=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(u){i=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(u){s=u}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(u){o=u}}),Object.defineProperty(this,"parentNode",{})};n.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},n.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new n,this.canvas.pdf=this}])}(kr.API),function(e){var n={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},n),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var f=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(k){f=k}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(k){d=k}});var g=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return g},set:function(k){g=k}});var y=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return y},set:function(k){y=k}});var x=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return x},set:function(k){x=k}});var _=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return _},set:function(k){_=k}});var M=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return M},set:function(k){M=k}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(f){return r.call(this),this.internal.__cell__.headerFunction=typeof f=="function"?f:void 0,this},e.getTextDimensions=function(f,d){r.call(this);var g=(d=d||{}).fontSize||this.getFontSize(),y=d.font||this.getFont(),x=d.scaleFactor||this.internal.scaleFactor,_=0,M=0,k=0,N=this;if(!Array.isArray(f)&&typeof f!="string"){if(typeof f!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");f=String(f)}var T=d.maxWidth;T>0?typeof f=="string"?f=this.splitTextToSize(f,T):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(K,Q){return K.concat(N.splitTextToSize(Q,T))},[])):f=Array.isArray(f)?f:[f];for(var F=0;F<f.length;F++)_<(k=this.getStringUnitWidth(f[F],{font:y})*g)&&(_=k);return _!==0&&(M=f.length),{w:_/=x,h:Math.max((M*g*this.getLineHeightFactor()-g*(this.getLineHeightFactor()-1))/x,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var f=this.internal.__cell__.margins||n;return this.internal.__cell__.lastCell=new s(f.left,f.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var f;f=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var d=this.internal.__cell__.lastCell,g=this.internal.__cell__.padding,y=this.internal.__cell__.margins||n,x=this.internal.__cell__.tableHeaderRow,_=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===f.lineNumber?(f.x=(d.x||0)+(d.width||0),f.y=d.y||0):d.y+d.height+f.height+y.bottom>this.getPageHeight()?(this.cellAddPage(),f.y=y.top,_&&x&&(this.printHeaderRow(f.lineNumber,!0),f.y+=x[0].height)):f.y=d.y+d.height||f.y),f.text[0]!==void 0&&(this.rect(f.x,f.y,f.width,f.height,t===!0?"FD":void 0),f.align==="right"?this.text(f.text,f.x+f.width-g,f.y+g,{align:"right",baseline:"top"}):f.align==="center"?this.text(f.text,f.x+f.width/2,f.y+g,{align:"center",baseline:"top",maxWidth:f.width-g-g}):this.text(f.text,f.x+g,f.y+g,{align:"left",baseline:"top",maxWidth:f.width-g-g})),this.internal.__cell__.lastCell=f,this};e.table=function(f,d,g,y,x){if(r.call(this),!g)throw new Error("No data for PDF table.");var _,M,k,N,T=[],F=[],K=[],Q={},he={},fe=[],me=[],G=(x=x||{}).autoSize||!1,$=x.printHeaders!==!1,X=x.css&&x.css["font-size"]!==void 0?16*x.css["font-size"]:x.fontSize||12,R=x.margins||Object.assign({width:this.getPageWidth()},n),O=typeof x.padding=="number"?x.padding:3,B=x.headerBackgroundColor||"#c8c8c8",z=x.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=$,this.internal.__cell__.margins=R,this.internal.__cell__.table_font_size=X,this.internal.__cell__.padding=O,this.internal.__cell__.headerBackgroundColor=B,this.internal.__cell__.headerTextColor=z,this.setFontSize(X),y==null)F=T=Object.keys(g[0]),K=T.map(function(){return"left"});else if(Array.isArray(y)&&Xi(y[0])==="object")for(T=y.map(function(Ee){return Ee.name}),F=y.map(function(Ee){return Ee.prompt||Ee.name||""}),K=y.map(function(Ee){return Ee.align||"left"}),_=0;_<y.length;_+=1)he[y[_].name]=y[_].width*(19.049976/25.4);else Array.isArray(y)&&typeof y[0]=="string"&&(F=T=y,K=T.map(function(){return"left"}));if(G||Array.isArray(y)&&typeof y[0]=="string")for(_=0;_<T.length;_+=1){for(Q[N=T[_]]=g.map(function(Ee){return Ee[N]}),this.setFont(void 0,"bold"),fe.push(this.getTextDimensions(F[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),M=Q[N],this.setFont(void 0,"normal"),k=0;k<M.length;k+=1)fe.push(this.getTextDimensions(M[k],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);he[N]=Math.max.apply(null,fe)+O+O,fe=[]}if($){var W={};for(_=0;_<T.length;_+=1)W[T[_]]={},W[T[_]].text=F[_],W[T[_]].align=K[_];var V=u.call(this,W,he);me=T.map(function(Ee){return new s(f,d,he[Ee],V,W[Ee].text,void 0,W[Ee].align)}),this.setTableHeaderRow(me),this.printHeaderRow(1,!1)}var oe=y.reduce(function(Ee,Te){return Ee[Te.name]=Te.align,Ee},{});for(_=0;_<g.length;_+=1){"rowStart"in x&&x.rowStart instanceof Function&&x.rowStart({row:_,data:g[_]},this);var ie=u.call(this,g[_],he);for(k=0;k<T.length;k+=1){var xe=g[_][T[k]];"cellStart"in x&&x.cellStart instanceof Function&&x.cellStart({row:_,col:k,data:xe},this),o.call(this,new s(f,d,he[T[k]],ie,xe,_+2,oe[T[k]]))}}return this.internal.__cell__.table_x=f,this.internal.__cell__.table_y=d,this};var u=function(f,d){var g=this.internal.__cell__.padding,y=this.internal.__cell__.table_font_size,x=this.internal.scaleFactor;return Object.keys(f).map(function(_){var M=f[_];return this.splitTextToSize(M.hasOwnProperty("text")?M.text:M,d[_]-g-g)},this).map(function(_){return this.getLineHeightFactor()*_.length*y/x+g+g},this).reduce(function(_,M){return Math.max(_,M)},0)};e.setTableHeaderRow=function(f){r.call(this),this.internal.__cell__.tableHeaderRow=f},e.printHeaderRow=function(f,d){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var g;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var y=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(y[0],y[1],y[2],y[3],void 0,-1)}this.setFont(void 0,"bold");for(var x=[],_=0;_<this.internal.__cell__.tableHeaderRow.length;_+=1){g=this.internal.__cell__.tableHeaderRow[_].clone(),d&&(g.y=this.internal.__cell__.margins.top||0,x.push(g)),g.lineNumber=f;var M=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,g),this.setTextColor(M)}x.length>0&&this.setTableHeaderRow(x),this.setFont(void 0,"normal"),t=!1}}(kr.API);var Tx={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Nx=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],C1=kx(Nx),Dx=[100,200,300,400,500,600,700,800,900],jF=kx(Dx);function E1(e){var n=e.family.replace(/"|'/g,"").toLowerCase(),t=function(s){return Tx[s=s||"normal"]?s:"normal"}(e.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),i=function(s){return typeof C1[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:n,style:t,weight:r,stretch:i,src:e.src||[],ref:e.ref||{name:n,style:[i,t,r].join(" ")}}}function kb(e,n,t,r){var i;for(i=t;i>=0&&i<n.length;i+=r)if(e[n[i]])return e[n[i]];for(i=t;i>=0&&i<n.length;i-=r)if(e[n[i]])return e[n[i]]}var zF={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Tb={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Nb(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function $F(e,n,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},zF,t.genericFontFamilies||{}),s=null,o=null,u=0;u<n.length;++u)if(i[(s=E1(n[u])).family]&&(s.family=i[s.family]),e.hasOwnProperty(s.family)){o=e[s.family];break}if(!(o=o||e[r]))throw new Error("Could not find a font-family for the rule '"+Nb(s)+"' and default family '"+r+"'.");if(o=function(f,d){if(d[f])return d[f];var g=C1[f],y=g<=C1.normal?-1:1,x=kb(d,Nx,g,y);if(!x)throw new Error("Could not find a matching font-stretch value for "+f);return x}(s.stretch,o),o=function(f,d){if(d[f])return d[f];for(var g=Tx[f],y=0;y<g.length;++y)if(d[g[y]])return d[g[y]];throw new Error("Could not find a matching font-style for "+f)}(s.style,o),!(o=function(f,d){if(d[f])return d[f];if(f===400&&d[500])return d[500];if(f===500&&d[400])return d[400];var g=jF[f],y=kb(d,Dx,g,f<400?-1:1);if(!y)throw new Error("Could not find a matching font-weight for value "+f);return y}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+Nb(s)+"'.");return o}function Db(e){return e.trimLeft()}function UF(e,n){for(var t=0;t<e.length;){if(e.charAt(t)===n)return[e.substring(0,t),e.substring(t+1)];t+=1}return null}function VF(e){var n=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return n===null?null:[n[0],e.substring(n[0].length)]}var xg,Ib,Ob,dv=["times"];(function(e){var n,t,r,i,s,o,u,f,d,g=function(Y){return Y=Y||{},this.isStrokeTransparent=Y.isStrokeTransparent||!1,this.strokeOpacity=Y.strokeOpacity||1,this.strokeStyle=Y.strokeStyle||"#000000",this.fillStyle=Y.fillStyle||"#000000",this.isFillTransparent=Y.isFillTransparent||!1,this.fillOpacity=Y.fillOpacity||1,this.font=Y.font||"10px sans-serif",this.textBaseline=Y.textBaseline||"alphabetic",this.textAlign=Y.textAlign||"left",this.lineWidth=Y.lineWidth||1,this.lineJoin=Y.lineJoin||"miter",this.lineCap=Y.lineCap||"butt",this.path=Y.path||[],this.transform=Y.transform!==void 0?Y.transform.clone():new f,this.globalCompositeOperation=Y.globalCompositeOperation||"normal",this.globalAlpha=Y.globalAlpha||1,this.clip_path=Y.clip_path||[],this.currentPoint=Y.currentPoint||new o,this.miterLimit=Y.miterLimit||10,this.lastPoint=Y.lastPoint||new o,this.lineDashOffset=Y.lineDashOffset||0,this.lineDash=Y.lineDash||[],this.margin=Y.margin||[0,0,0,0],this.prevPageLastElemOffset=Y.prevPageLastElemOffset||0,this.ignoreClearRect=typeof Y.ignoreClearRect!="boolean"||Y.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new y(this),n=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,u=this.internal.Rectangle,f=this.internal.Matrix,d=new g}]);var y=function(Y){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=Y;Object.defineProperty(this,"pdf",{get:function(){return q}});var ee=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ee},set:function(ye){ee=!!ye}});var ue=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ue},set:function(ye){ue=!!ye}});var le=0;Object.defineProperty(this,"posX",{get:function(){return le},set:function(ye){isNaN(ye)||(le=ye)}});var pe=0;Object.defineProperty(this,"posY",{get:function(){return pe},set:function(ye){isNaN(ye)||(pe=ye)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(ye){var de;typeof ye=="number"?de=[ye,ye,ye,ye]:((de=new Array(4))[0]=ye[0],de[1]=ye.length>=2?ye[1]:de[0],de[2]=ye.length>=3?ye[2]:de[0],de[3]=ye.length>=4?ye[3]:de[1]),d.margin=de}});var Z=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Z},set:function(ye){Z=ye}});var D=0;Object.defineProperty(this,"lastBreak",{get:function(){return D},set:function(ye){D=ye}});var ke=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ke},set:function(ye){ke=ye}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(ye){ye instanceof g&&(d=ye)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(ye){d.path=ye}});var Me=[];Object.defineProperty(this,"ctxStack",{get:function(){return Me},set:function(ye){Me=ye}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ye){var de;de=x(ye),this.ctx.fillStyle=de.style,this.ctx.isFillTransparent=de.a===0,this.ctx.fillOpacity=de.a,this.pdf.setFillColor(de.r,de.g,de.b,{a:de.a}),this.pdf.setTextColor(de.r,de.g,de.b,{a:de.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ye){var de=x(ye);this.ctx.strokeStyle=de.style,this.ctx.isStrokeTransparent=de.a===0,this.ctx.strokeOpacity=de.a,de.a===0?this.pdf.setDrawColor(255,255,255):(de.a,this.pdf.setDrawColor(de.r,de.g,de.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ye){["butt","round","square"].indexOf(ye)!==-1&&(this.ctx.lineCap=ye,this.pdf.setLineCap(ye))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ye){isNaN(ye)||(this.ctx.lineWidth=ye,this.pdf.setLineWidth(ye))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ye){["bevel","round","miter"].indexOf(ye)!==-1&&(this.ctx.lineJoin=ye,this.pdf.setLineJoin(ye))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ye){isNaN(ye)||(this.ctx.miterLimit=ye,this.pdf.setMiterLimit(ye))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ye){this.ctx.textBaseline=ye}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ye){["right","end","center","left","start"].indexOf(ye)!==-1&&(this.ctx.textAlign=ye)}});var Ge=null;function ce(ye,de){if(Ge===null){var Ze=function(qe){var tt=[];return Object.keys(qe).forEach(function(ze){qe[ze].forEach(function(Qe){var et=null;switch(Qe){case"bold":et={family:ze,weight:"bold"};break;case"italic":et={family:ze,style:"italic"};break;case"bolditalic":et={family:ze,weight:"bold",style:"italic"};break;case"":case"normal":et={family:ze}}et!==null&&(et.ref={name:ze,style:Qe},tt.push(et))})}),tt}(ye.getFontList());Ge=function(qe){for(var tt={},ze=0;ze<qe.length;++ze){var Qe=E1(qe[ze]),et=Qe.family,bt=Qe.stretch,Pt=Qe.style,At=Qe.weight;tt[et]=tt[et]||{},tt[et][bt]=tt[et][bt]||{},tt[et][bt][Pt]=tt[et][bt][Pt]||{},tt[et][bt][Pt][At]=Qe}return tt}(Ze.concat(de))}return Ge}var ne=null;Object.defineProperty(this,"fontFaces",{get:function(){return ne},set:function(ye){Ge=null,ne=ye}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ye){var de;if(this.ctx.font=ye,(de=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ye))!==null){var Ze=de[1],qe=(de[2],de[3]),tt=de[4],ze=(de[5],de[6]),Qe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(tt)[2];tt=Math.floor(Qe==="px"?parseFloat(tt)*this.pdf.internal.scaleFactor:Qe==="em"?parseFloat(tt)*this.pdf.getFontSize():parseFloat(tt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(tt);var et=function(Ye){var ot,rt,zt=[],en=Ye.trim();if(en==="")return dv;if(en in Tb)return[Tb[en]];for(;en!=="";){switch(rt=null,ot=(en=Db(en)).charAt(0)){case'"':case"'":rt=UF(en.substring(1),ot);break;default:rt=VF(en)}if(rt===null||(zt.push(rt[0]),(en=Db(rt[1]))!==""&&en.charAt(0)!==","))return dv;en=en.replace(/^,/,"")}return zt}(ze);if(this.fontFaces){var bt=$F(ce(this.pdf,this.fontFaces),et.map(function(Ye){return{family:Ye,stretch:"normal",weight:qe,style:Ze}}));this.pdf.setFont(bt.ref.name,bt.ref.style)}else{var Pt="";(qe==="bold"||parseInt(qe,10)>=700||Ze==="bold")&&(Pt="bold"),Ze==="italic"&&(Pt+="italic"),Pt.length===0&&(Pt="normal");for(var At="",Vt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Qt=0;Qt<et.length;Qt++){if(this.pdf.internal.getFont(et[Qt],Pt,{noFallback:!0,disableWarning:!0})!==void 0){At=et[Qt];break}if(Pt==="bolditalic"&&this.pdf.internal.getFont(et[Qt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)At=et[Qt],Pt="bold";else if(this.pdf.internal.getFont(et[Qt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){At=et[Qt],Pt="normal";break}}if(At===""){for(var mn=0;mn<et.length;mn++)if(Vt[et[mn]]){At=Vt[et[mn]];break}}At=At===""?"Times":At,this.pdf.setFont(At,Pt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ye){this.ctx.globalCompositeOperation=ye}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ye){this.ctx.globalAlpha=ye}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ye){this.ctx.lineDashOffset=ye,Te.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ye){this.ctx.lineDash=ye,Te.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ye){this.ctx.ignoreClearRect=!!ye}})};y.prototype.setLineDash=function(Y){this.lineDash=Y},y.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},y.prototype.fill=function(){Q.call(this,"fill",!1)},y.prototype.stroke=function(){Q.call(this,"stroke",!1)},y.prototype.beginPath=function(){this.path=[{type:"begin"}]},y.prototype.moveTo=function(Y,q){if(isNaN(Y)||isNaN(q))throw lo.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ee=this.ctx.transform.applyToPoint(new o(Y,q));this.path.push({type:"mt",x:ee.x,y:ee.y}),this.ctx.lastPoint=new o(Y,q)},y.prototype.closePath=function(){var Y=new o(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&Xi(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){Y=new o(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(Y.x,Y.y)},y.prototype.lineTo=function(Y,q){if(isNaN(Y)||isNaN(q))throw lo.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ee=this.ctx.transform.applyToPoint(new o(Y,q));this.path.push({type:"lt",x:ee.x,y:ee.y}),this.ctx.lastPoint=new o(ee.x,ee.y)},y.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Q.call(this,null,!0)},y.prototype.quadraticCurveTo=function(Y,q,ee,ue){if(isNaN(ee)||isNaN(ue)||isNaN(Y)||isNaN(q))throw lo.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var le=this.ctx.transform.applyToPoint(new o(ee,ue)),pe=this.ctx.transform.applyToPoint(new o(Y,q));this.path.push({type:"qct",x1:pe.x,y1:pe.y,x:le.x,y:le.y}),this.ctx.lastPoint=new o(le.x,le.y)},y.prototype.bezierCurveTo=function(Y,q,ee,ue,le,pe){if(isNaN(le)||isNaN(pe)||isNaN(Y)||isNaN(q)||isNaN(ee)||isNaN(ue))throw lo.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Z=this.ctx.transform.applyToPoint(new o(le,pe)),D=this.ctx.transform.applyToPoint(new o(Y,q)),ke=this.ctx.transform.applyToPoint(new o(ee,ue));this.path.push({type:"bct",x1:D.x,y1:D.y,x2:ke.x,y2:ke.y,x:Z.x,y:Z.y}),this.ctx.lastPoint=new o(Z.x,Z.y)},y.prototype.arc=function(Y,q,ee,ue,le,pe){if(isNaN(Y)||isNaN(q)||isNaN(ee)||isNaN(ue)||isNaN(le))throw lo.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(pe=!!pe,!this.ctx.transform.isIdentity){var Z=this.ctx.transform.applyToPoint(new o(Y,q));Y=Z.x,q=Z.y;var D=this.ctx.transform.applyToPoint(new o(0,ee)),ke=this.ctx.transform.applyToPoint(new o(0,0));ee=Math.sqrt(Math.pow(D.x-ke.x,2)+Math.pow(D.y-ke.y,2))}Math.abs(le-ue)>=2*Math.PI&&(ue=0,le=2*Math.PI),this.path.push({type:"arc",x:Y,y:q,radius:ee,startAngle:ue,endAngle:le,counterclockwise:pe})},y.prototype.arcTo=function(Y,q,ee,ue,le){throw new Error("arcTo not implemented.")},y.prototype.rect=function(Y,q,ee,ue){if(isNaN(Y)||isNaN(q)||isNaN(ee)||isNaN(ue))throw lo.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(Y,q),this.lineTo(Y+ee,q),this.lineTo(Y+ee,q+ue),this.lineTo(Y,q+ue),this.lineTo(Y,q),this.lineTo(Y+ee,q),this.lineTo(Y,q)},y.prototype.fillRect=function(Y,q,ee,ue){if(isNaN(Y)||isNaN(q)||isNaN(ee)||isNaN(ue))throw lo.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!_.call(this)){var le={};this.lineCap!=="butt"&&(le.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(le.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(Y,q,ee,ue),this.fill(),le.hasOwnProperty("lineCap")&&(this.lineCap=le.lineCap),le.hasOwnProperty("lineJoin")&&(this.lineJoin=le.lineJoin)}},y.prototype.strokeRect=function(Y,q,ee,ue){if(isNaN(Y)||isNaN(q)||isNaN(ee)||isNaN(ue))throw lo.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");M.call(this)||(this.beginPath(),this.rect(Y,q,ee,ue),this.stroke())},y.prototype.clearRect=function(Y,q,ee,ue){if(isNaN(Y)||isNaN(q)||isNaN(ee)||isNaN(ue))throw lo.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(Y,q,ee,ue))},y.prototype.save=function(Y){Y=typeof Y!="boolean"||Y;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,ee=0;ee<this.pdf.internal.getNumberOfPages();ee++)this.pdf.setPage(ee+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),Y){this.ctx.fontSize=this.pdf.internal.getFontSize();var ue=new g(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ue}},y.prototype.restore=function(Y){Y=typeof Y!="boolean"||Y;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,ee=0;ee<this.pdf.internal.getNumberOfPages();ee++)this.pdf.setPage(ee+1),this.pdf.internal.out("Q");this.pdf.setPage(q),Y&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},y.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var x=function(Y){var q,ee,ue,le;if(Y.isCanvasGradient===!0&&(Y=Y.getColor()),!Y)return{r:0,g:0,b:0,a:0,style:Y};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(Y))q=0,ee=0,ue=0,le=0;else{var pe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(Y);if(pe!==null)q=parseInt(pe[1]),ee=parseInt(pe[2]),ue=parseInt(pe[3]),le=1;else if((pe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(Y))!==null)q=parseInt(pe[1]),ee=parseInt(pe[2]),ue=parseInt(pe[3]),le=parseFloat(pe[4]);else{if(le=1,typeof Y=="string"&&Y.charAt(0)!=="#"){var Z=new Sx(Y);Y=Z.ok?Z.toHex():"#000000"}Y.length===4?(q=Y.substring(1,2),q+=q,ee=Y.substring(2,3),ee+=ee,ue=Y.substring(3,4),ue+=ue):(q=Y.substring(1,3),ee=Y.substring(3,5),ue=Y.substring(5,7)),q=parseInt(q,16),ee=parseInt(ee,16),ue=parseInt(ue,16)}}return{r:q,g:ee,b:ue,a:le,style:Y}},_=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},M=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};y.prototype.fillText=function(Y,q,ee,ue){if(isNaN(q)||isNaN(ee)||typeof Y!="string")throw lo.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ue=isNaN(ue)?void 0:ue,!_.call(this)){var le=ie(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;O.call(this,{text:Y,x:q,y:ee,scale:pe,angle:le,align:this.textAlign,maxWidth:ue})}},y.prototype.strokeText=function(Y,q,ee,ue){if(isNaN(q)||isNaN(ee)||typeof Y!="string")throw lo.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!M.call(this)){ue=isNaN(ue)?void 0:ue;var le=ie(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;O.call(this,{text:Y,x:q,y:ee,scale:pe,renderingMode:"stroke",angle:le,align:this.textAlign,maxWidth:ue})}},y.prototype.measureText=function(Y){if(typeof Y!="string")throw lo.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,ee=this.pdf.internal.scaleFactor,ue=q.internal.getFontSize(),le=q.getStringUnitWidth(Y)*ue/q.internal.scaleFactor,pe=function(Z){var D=(Z=Z||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return D}}),this};return new pe({width:le*=Math.round(96*ee/72*1e4)/1e4})},y.prototype.scale=function(Y,q){if(isNaN(Y)||isNaN(q))throw lo.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ee=new f(Y,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(ee)},y.prototype.rotate=function(Y){if(isNaN(Y))throw lo.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new f(Math.cos(Y),Math.sin(Y),-Math.sin(Y),Math.cos(Y),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},y.prototype.translate=function(Y,q){if(isNaN(Y)||isNaN(q))throw lo.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ee=new f(1,0,0,1,Y,q);this.ctx.transform=this.ctx.transform.multiply(ee)},y.prototype.transform=function(Y,q,ee,ue,le,pe){if(isNaN(Y)||isNaN(q)||isNaN(ee)||isNaN(ue)||isNaN(le)||isNaN(pe))throw lo.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Z=new f(Y,q,ee,ue,le,pe);this.ctx.transform=this.ctx.transform.multiply(Z)},y.prototype.setTransform=function(Y,q,ee,ue,le,pe){Y=isNaN(Y)?1:Y,q=isNaN(q)?0:q,ee=isNaN(ee)?0:ee,ue=isNaN(ue)?1:ue,le=isNaN(le)?0:le,pe=isNaN(pe)?0:pe,this.ctx.transform=new f(Y,q,ee,ue,le,pe)};var k=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};y.prototype.drawImage=function(Y,q,ee,ue,le,pe,Z,D,ke){var Me=this.pdf.getImageProperties(Y),Ge=1,ce=1,ne=1,ye=1;ue!==void 0&&D!==void 0&&(ne=D/ue,ye=ke/le,Ge=Me.width/ue*D/ue,ce=Me.height/le*ke/le),pe===void 0&&(pe=q,Z=ee,q=0,ee=0),ue!==void 0&&D===void 0&&(D=ue,ke=le),ue===void 0&&D===void 0&&(D=Me.width,ke=Me.height);for(var de,Ze=this.ctx.transform.decompose(),qe=ie(Ze.rotate.shx),tt=new f,ze=(tt=(tt=(tt=tt.multiply(Ze.translate)).multiply(Ze.skew)).multiply(Ze.scale)).applyToRectangle(new u(pe-q*ne,Z-ee*ye,ue*Ge,le*ce)),Qe=N.call(this,ze),et=[],bt=0;bt<Qe.length;bt+=1)et.indexOf(Qe[bt])===-1&&et.push(Qe[bt]);if(K(et),this.autoPaging)for(var Pt=et[0],At=et[et.length-1],Vt=Pt;Vt<At+1;Vt++){this.pdf.setPage(Vt);var Qt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],mn=Vt===1?this.posY+this.margin[0]:this.margin[0],Ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],rt=Vt===1?0:Ye+(Vt-2)*ot;if(this.ctx.clip_path.length!==0){var zt=this.path;de=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(de,this.posX+this.margin[3],-rt+mn+this.ctx.prevPageLastElemOffset),he.call(this,"fill",!0),this.path=zt}var en=JSON.parse(JSON.stringify(ze));en=F([en],this.posX+this.margin[3],-rt+mn+this.ctx.prevPageLastElemOffset)[0];var Bn=(Vt>Pt||Vt<At)&&k.call(this);Bn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Qt,ot,null).clip().discardPath()),this.pdf.addImage(Y,"JPEG",en.x,en.y,en.w,en.h,null,null,qe),Bn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(Y,"JPEG",ze.x,ze.y,ze.w,ze.h,null,null,qe)};var N=function(Y,q,ee){var ue=[];q=q||this.pdf.internal.pageSize.width,ee=ee||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var le=this.posY+this.ctx.prevPageLastElemOffset;switch(Y.type){default:case"mt":case"lt":ue.push(Math.floor((Y.y+le)/ee)+1);break;case"arc":ue.push(Math.floor((Y.y+le-Y.radius)/ee)+1),ue.push(Math.floor((Y.y+le+Y.radius)/ee)+1);break;case"qct":var pe=xe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Y.x1,Y.y1,Y.x,Y.y);ue.push(Math.floor((pe.y+le)/ee)+1),ue.push(Math.floor((pe.y+pe.h+le)/ee)+1);break;case"bct":var Z=Ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Y.x1,Y.y1,Y.x2,Y.y2,Y.x,Y.y);ue.push(Math.floor((Z.y+le)/ee)+1),ue.push(Math.floor((Z.y+Z.h+le)/ee)+1);break;case"rect":ue.push(Math.floor((Y.y+le)/ee)+1),ue.push(Math.floor((Y.y+Y.h+le)/ee)+1)}for(var D=0;D<ue.length;D+=1)for(;this.pdf.internal.getNumberOfPages()<ue[D];)T.call(this);return ue},T=function(){var Y=this.fillStyle,q=this.strokeStyle,ee=this.font,ue=this.lineCap,le=this.lineWidth,pe=this.lineJoin;this.pdf.addPage(),this.fillStyle=Y,this.strokeStyle=q,this.font=ee,this.lineCap=ue,this.lineWidth=le,this.lineJoin=pe},F=function(Y,q,ee){for(var ue=0;ue<Y.length;ue++)switch(Y[ue].type){case"bct":Y[ue].x2+=q,Y[ue].y2+=ee;case"qct":Y[ue].x1+=q,Y[ue].y1+=ee;case"mt":case"lt":case"arc":default:Y[ue].x+=q,Y[ue].y+=ee}return Y},K=function(Y){return Y.sort(function(q,ee){return q-ee})},Q=function(Y,q){for(var ee,ue,le=this.fillStyle,pe=this.strokeStyle,Z=this.lineCap,D=this.lineWidth,ke=Math.abs(D*this.ctx.transform.scaleX),Me=this.lineJoin,Ge=JSON.parse(JSON.stringify(this.path)),ce=JSON.parse(JSON.stringify(this.path)),ne=[],ye=0;ye<ce.length;ye++)if(ce[ye].x!==void 0)for(var de=N.call(this,ce[ye]),Ze=0;Ze<de.length;Ze+=1)ne.indexOf(de[Ze])===-1&&ne.push(de[Ze]);for(var qe=0;qe<ne.length;qe++)for(;this.pdf.internal.getNumberOfPages()<ne[qe];)T.call(this);if(K(ne),this.autoPaging)for(var tt=ne[0],ze=ne[ne.length-1],Qe=tt;Qe<ze+1;Qe++){this.pdf.setPage(Qe),this.fillStyle=le,this.strokeStyle=pe,this.lineCap=Z,this.lineWidth=ke,this.lineJoin=Me;var et=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],bt=Qe===1?this.posY+this.margin[0]:this.margin[0],Pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],At=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Vt=Qe===1?0:Pt+(Qe-2)*At;if(this.ctx.clip_path.length!==0){var Qt=this.path;ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(ee,this.posX+this.margin[3],-Vt+bt+this.ctx.prevPageLastElemOffset),he.call(this,Y,!0),this.path=Qt}if(ue=JSON.parse(JSON.stringify(Ge)),this.path=F(ue,this.posX+this.margin[3],-Vt+bt+this.ctx.prevPageLastElemOffset),q===!1||Qe===0){var mn=(Qe>tt||Qe<ze)&&k.call(this);mn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],et,At,null).clip().discardPath()),he.call(this,Y,q),mn&&this.pdf.restoreGraphicsState()}this.lineWidth=D}else this.lineWidth=ke,he.call(this,Y,q),this.lineWidth=D;this.path=Ge},he=function(Y,q){if((Y!=="stroke"||q||!M.call(this))&&(Y==="stroke"||q||!_.call(this))){for(var ee,ue,le=[],pe=this.path,Z=0;Z<pe.length;Z++){var D=pe[Z];switch(D.type){case"begin":le.push({begin:!0});break;case"close":le.push({close:!0});break;case"mt":le.push({start:D,deltas:[],abs:[]});break;case"lt":var ke=le.length;if(pe[Z-1]&&!isNaN(pe[Z-1].x)&&(ee=[D.x-pe[Z-1].x,D.y-pe[Z-1].y],ke>0)){for(;ke>=0;ke--)if(le[ke-1].close!==!0&&le[ke-1].begin!==!0){le[ke-1].deltas.push(ee),le[ke-1].abs.push(D);break}}break;case"bct":ee=[D.x1-pe[Z-1].x,D.y1-pe[Z-1].y,D.x2-pe[Z-1].x,D.y2-pe[Z-1].y,D.x-pe[Z-1].x,D.y-pe[Z-1].y],le[le.length-1].deltas.push(ee);break;case"qct":var Me=pe[Z-1].x+2/3*(D.x1-pe[Z-1].x),Ge=pe[Z-1].y+2/3*(D.y1-pe[Z-1].y),ce=D.x+2/3*(D.x1-D.x),ne=D.y+2/3*(D.y1-D.y),ye=D.x,de=D.y;ee=[Me-pe[Z-1].x,Ge-pe[Z-1].y,ce-pe[Z-1].x,ne-pe[Z-1].y,ye-pe[Z-1].x,de-pe[Z-1].y],le[le.length-1].deltas.push(ee);break;case"arc":le.push({deltas:[],abs:[],arc:!0}),Array.isArray(le[le.length-1].abs)&&le[le.length-1].abs.push(D)}}ue=q?null:Y==="stroke"?"stroke":"fill";for(var Ze=!1,qe=0;qe<le.length;qe++)if(le[qe].arc)for(var tt=le[qe].abs,ze=0;ze<tt.length;ze++){var Qe=tt[ze];Qe.type==="arc"?G.call(this,Qe.x,Qe.y,Qe.radius,Qe.startAngle,Qe.endAngle,Qe.counterclockwise,void 0,q,!Ze):B.call(this,Qe.x,Qe.y),Ze=!0}else if(le[qe].close===!0)this.pdf.internal.out("h"),Ze=!1;else if(le[qe].begin!==!0){var et=le[qe].start.x,bt=le[qe].start.y;z.call(this,le[qe].deltas,et,bt),Ze=!0}ue&&$.call(this,ue),q&&X.call(this)}},fe=function(Y){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ee=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return Y-ee;case"top":return Y+q-ee;case"hanging":return Y+q-2*ee;case"middle":return Y+q/2-ee;case"ideographic":return Y;case"alphabetic":default:return Y}},me=function(Y){return Y+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};y.prototype.createLinearGradient=function(){var Y=function(){};return Y.colorStops=[],Y.addColorStop=function(q,ee){this.colorStops.push([q,ee])},Y.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},Y.isCanvasGradient=!0,Y},y.prototype.createPattern=function(){return this.createLinearGradient()},y.prototype.createRadialGradient=function(){return this.createLinearGradient()};var G=function(Y,q,ee,ue,le,pe,Z,D,ke){for(var Me=V.call(this,ee,ue,le,pe),Ge=0;Ge<Me.length;Ge++){var ce=Me[Ge];Ge===0&&(ke?R.call(this,ce.x1+Y,ce.y1+q):B.call(this,ce.x1+Y,ce.y1+q)),W.call(this,Y,q,ce.x2,ce.y2,ce.x3,ce.y3,ce.x4,ce.y4)}D?X.call(this):$.call(this,Z)},$=function(Y){switch(Y){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},X=function(){this.pdf.clip(),this.pdf.discardPath()},R=function(Y,q){this.pdf.internal.out(t(Y)+" "+r(q)+" m")},O=function(Y){var q;switch(Y.align){case"right":case"end":q="right";break;case"center":q="center";break;case"left":case"start":default:q="left"}var ee=this.pdf.getTextDimensions(Y.text),ue=fe.call(this,Y.y),le=me.call(this,ue)-ee.h,pe=this.ctx.transform.applyToPoint(new o(Y.x,ue)),Z=this.ctx.transform.decompose(),D=new f;D=(D=(D=D.multiply(Z.translate)).multiply(Z.skew)).multiply(Z.scale);for(var ke,Me,Ge,ce=this.ctx.transform.applyToRectangle(new u(Y.x,ue,ee.w,ee.h)),ne=D.applyToRectangle(new u(Y.x,le,ee.w,ee.h)),ye=N.call(this,ne),de=[],Ze=0;Ze<ye.length;Ze+=1)de.indexOf(ye[Ze])===-1&&de.push(ye[Ze]);if(K(de),this.autoPaging)for(var qe=de[0],tt=de[de.length-1],ze=qe;ze<tt+1;ze++){this.pdf.setPage(ze);var Qe=ze===1?this.posY+this.margin[0]:this.margin[0],et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],bt=this.pdf.internal.pageSize.height-this.margin[2],Pt=bt-this.margin[0],At=this.pdf.internal.pageSize.width-this.margin[1],Vt=At-this.margin[3],Qt=ze===1?0:et+(ze-2)*Pt;if(this.ctx.clip_path.length!==0){var mn=this.path;ke=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(ke,this.posX+this.margin[3],-1*Qt+Qe),he.call(this,"fill",!0),this.path=mn}var Ye=F([JSON.parse(JSON.stringify(ne))],this.posX+this.margin[3],-Qt+Qe+this.ctx.prevPageLastElemOffset)[0];Y.scale>=.01&&(Me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Me*Y.scale),Ge=this.lineWidth,this.lineWidth=Ge*Y.scale);var ot=this.autoPaging!=="text";if(ot||Ye.y+Ye.h<=bt){if(ot||Ye.y>=Qe&&Ye.x<=At){var rt=ot?Y.text:this.pdf.splitTextToSize(Y.text,Y.maxWidth||At-Ye.x)[0],zt=F([JSON.parse(JSON.stringify(ce))],this.posX+this.margin[3],-Qt+Qe+this.ctx.prevPageLastElemOffset)[0],en=ot&&(ze>qe||ze<tt)&&k.call(this);en&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Vt,Pt,null).clip().discardPath()),this.pdf.text(rt,zt.x,zt.y,{angle:Y.angle,align:q,renderingMode:Y.renderingMode}),en&&this.pdf.restoreGraphicsState()}}else Ye.y<bt&&(this.ctx.prevPageLastElemOffset+=bt-Ye.y);Y.scale>=.01&&(this.pdf.setFontSize(Me),this.lineWidth=Ge)}else Y.scale>=.01&&(Me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Me*Y.scale),Ge=this.lineWidth,this.lineWidth=Ge*Y.scale),this.pdf.text(Y.text,pe.x+this.posX,pe.y+this.posY,{angle:Y.angle,align:q,renderingMode:Y.renderingMode,maxWidth:Y.maxWidth}),Y.scale>=.01&&(this.pdf.setFontSize(Me),this.lineWidth=Ge)},B=function(Y,q,ee,ue){ee=ee||0,ue=ue||0,this.pdf.internal.out(t(Y+ee)+" "+r(q+ue)+" l")},z=function(Y,q,ee){return this.pdf.lines(Y,q,ee,null,null)},W=function(Y,q,ee,ue,le,pe,Z,D){this.pdf.internal.out([n(i(ee+Y)),n(s(ue+q)),n(i(le+Y)),n(s(pe+q)),n(i(Z+Y)),n(s(D+q)),"c"].join(" "))},V=function(Y,q,ee,ue){for(var le=2*Math.PI,pe=Math.PI/2;q>ee;)q-=le;var Z=Math.abs(ee-q);Z<le&&ue&&(Z=le-Z);for(var D=[],ke=ue?-1:1,Me=q;Z>1e-5;){var Ge=Me+ke*Math.min(Z,pe);D.push(oe.call(this,Y,Me,Ge)),Z-=Math.abs(Ge-Me),Me=Ge}return D},oe=function(Y,q,ee){var ue=(ee-q)/2,le=Y*Math.cos(ue),pe=Y*Math.sin(ue),Z=le,D=-pe,ke=Z*Z+D*D,Me=ke+Z*le+D*pe,Ge=4/3*(Math.sqrt(2*ke*Me)-Me)/(Z*pe-D*le),ce=Z-Ge*D,ne=D+Ge*Z,ye=ce,de=-ne,Ze=ue+q,qe=Math.cos(Ze),tt=Math.sin(Ze);return{x1:Y*Math.cos(q),y1:Y*Math.sin(q),x2:ce*qe-ne*tt,y2:ce*tt+ne*qe,x3:ye*qe-de*tt,y3:ye*tt+de*qe,x4:Y*Math.cos(ee),y4:Y*Math.sin(ee)}},ie=function(Y){return 180*Y/Math.PI},xe=function(Y,q,ee,ue,le,pe){var Z=Y+.5*(ee-Y),D=q+.5*(ue-q),ke=le+.5*(ee-le),Me=pe+.5*(ue-pe),Ge=Math.min(Y,le,Z,ke),ce=Math.max(Y,le,Z,ke),ne=Math.min(q,pe,D,Me),ye=Math.max(q,pe,D,Me);return new u(Ge,ne,ce-Ge,ye-ne)},Ee=function(Y,q,ee,ue,le,pe,Z,D){var ke,Me,Ge,ce,ne,ye,de,Ze,qe,tt,ze,Qe,et,bt,Pt=ee-Y,At=ue-q,Vt=le-ee,Qt=pe-ue,mn=Z-le,Ye=D-pe;for(Me=0;Me<41;Me++)qe=(de=(Ge=Y+(ke=Me/40)*Pt)+ke*((ne=ee+ke*Vt)-Ge))+ke*(ne+ke*(le+ke*mn-ne)-de),tt=(Ze=(ce=q+ke*At)+ke*((ye=ue+ke*Qt)-ce))+ke*(ye+ke*(pe+ke*Ye-ye)-Ze),Me==0?(ze=qe,Qe=tt,et=qe,bt=tt):(ze=Math.min(ze,qe),Qe=Math.min(Qe,tt),et=Math.max(et,qe),bt=Math.max(bt,tt));return new u(Math.round(ze),Math.round(Qe),Math.round(et-ze),Math.round(bt-Qe))},Te=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Y,q,ee=(Y=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:Y,lineDashOffset:q}));this.prevLineDash!==ee&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ee)}}})(kr.API),function(e){var n=function(s){var o,u,f,d,g,y,x,_,M,k;for(u=[],f=0,d=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;d>f;f+=4)(g=(s.charCodeAt(f)<<24)+(s.charCodeAt(f+1)<<16)+(s.charCodeAt(f+2)<<8)+s.charCodeAt(f+3))!==0?(y=(g=((g=((g=((g=(g-(k=g%85))/85)-(M=g%85))/85)-(_=g%85))/85)-(x=g%85))/85)%85,u.push(y+33,x+33,_+33,M+33,k+33)):u.push(122);return function(N,T){for(var F=T;F>0;F--)N.pop()}(u,o.length),String.fromCharCode.apply(String,u)+"~>"},t=function(s){var o,u,f,d,g,y=String,x="length",_=255,M="charCodeAt",k="slice",N="replace";for(s[k](-2),s=s[k](0,-2)[N](/\s/g,"")[N]("z","!!!!!"),f=[],d=0,g=(s+=o="uuuuu"[k](s[x]%5||5))[x];g>d;d+=5)u=52200625*(s[M](d)-33)+614125*(s[M](d+1)-33)+7225*(s[M](d+2)-33)+85*(s[M](d+3)-33)+(s[M](d+4)-33),f.push(_&u>>24,_&u>>16,_&u>>8,_&u);return function(T,F){for(var K=F;K>0;K--)T.pop()}(f,o[x]),y.fromCharCode.apply(y,f)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var u="",f=0;f<s.length;f+=2)u+=String.fromCharCode("0x"+(s[f]+s[f+1]));return u},i=function(s){for(var o=new Uint8Array(s.length),u=s.length;u--;)o[u]=s.charCodeAt(u);return s=(o=b1(o)).reduce(function(f,d){return f+String.fromCharCode(d)},"")};e.processDataByFilters=function(s,o){var u=0,f=s||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),u=0;u<o.length;u+=1)switch(o[u]){case"ASCII85Decode":case"/ASCII85Decode":f=t(f),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=n(f),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=r(f),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=f.split("").map(function(g){return("0"+g.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=i(f),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[u]+'" is not implemented')}return{data:f,reverseChain:d.reverse().join(" ")}}}(kr.API),function(e){e.loadFile=function(n,t,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var u=void 0;try{u=function(f,d,g){var y=new XMLHttpRequest,x=0,_=function(M){var k=M.length,N=[],T=String.fromCharCode;for(x=0;x<k;x+=1)N.push(T(255&M.charCodeAt(x)));return N.join("")};if(y.open("GET",f,!d),y.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(y.onload=function(){y.status===200?g(_(this.responseText)):g(void 0)}),y.send(null),d&&y.status===200)return _(y.responseText)}(i,s,o)}catch{}return u}(n,t,r)},e.loadImageFile=e.loadFile}(kr.API),function(e){function n(){return(Ir.html2canvas?Promise.resolve(Ir.html2canvas):zc(()=>import("./html2canvas.esm.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function t(){return(Ir.DOMPurify?Promise.resolve(Ir.DOMPurify):zc(()=>import("./purify.es.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var u=Xi(o);return u==="undefined"?"undefined":u==="string"||o instanceof String?"string":u==="number"||o instanceof Number?"number":u==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":u==="object"?"object":"unknown"},i=function(o,u){var f=document.createElement(o);for(var d in u.className&&(f.className=u.className),u.innerHTML&&u.dompurify&&(f.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)f.style[d]=u.style[d];return f},s=function o(u){var f=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),f);return d=(d=d.setProgress(1,o,1,[o])).set(u)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,u){return o.__proto__=u||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,u){return this.then(function(){switch(u=u||function(f){switch(r(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(t).then(function(f){return this.set({src:i("div",{innerHTML:o,dompurify:f})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=function f(d,g){for(var y=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),x=d.firstChild;x;x=x.nextSibling)g!==!0&&x.nodeType===1&&x.nodeName==="SCRIPT"||y.appendChild(f(x,g));return d.nodeType===1&&(d.nodeName==="CANVAS"?(y.width=d.width,y.height=d.height,y.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(y.value=d.value),y.addEventListener("load",function(){y.scrollTop=d.scrollTop,y.scrollLeft=d.scrollLeft},!0)),y}(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(n).then(function(u){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,u(this.prop.container,f)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(n).then(function(u){var f=this.opt.jsPDF,d=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,y=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete y.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=d,d)for(var x=0;x<d.length;++x){var _=d[x],M=_.src.find(function(k){return k.format==="truetype"});M&&f.addFont(M.url,_.ref.name,_.ref.style)}return y.windowHeight=y.windowHeight||0,y.windowHeight=y.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):y.windowHeight,f.context2d.save(!0),u(this.prop.container,y)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,u,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(o,u):this.outputPdf(o,u)},s.prototype.outputPdf=function(o,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,u)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var u=Object.keys(o||{}).map(function(f){if(f in s.template.prop)return function(){this.prop[f]=o[f]};switch(f){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[f]=o[f]}}},this);return this.then(function(){return this.thenList(u)})},s.prototype.get=function(o,u){return this.then(function(){var f=o in s.template.prop?this.prop[o]:this.opt[o];return u?u(f):f})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function u(f,d){return Math.floor(f*d/72*96)}return this.then(function(){(o=o||kr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:u(o.inner.width,o.k),height:u(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,u,f,d){return o!=null&&(this.progress.val=o),u!=null&&(this.progress.state=u),f!=null&&(this.progress.n=f),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,u,f,d){return this.setProgress(o?this.progress.val+o:null,u||null,f?this.progress.n+f:null,d?this.progress.stack.concat(d):null)},s.prototype.then=function(o,u){var f=this;return this.thenCore(o,u,function(d,g){return f.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(y){return f.updateProgress(null,d),y}).then(d,g).then(function(y){return f.updateProgress(1),y})})},s.prototype.thenCore=function(o,u,f){f=f||Promise.prototype.then,o&&(o=o.bind(this)),u&&(u=u.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),g=f.call(d,o,u);return s.convert(g,this.__proto__)},s.prototype.thenExternal=function(o,u){return Promise.prototype.then.call(this,o,u)},s.prototype.thenList=function(o){var u=this;return o.forEach(function(f){u=u.thenCore(f)}),u},s.prototype.catch=function(o){o&&(o=o.bind(this));var u=Promise.prototype.catch.call(this,o);return s.convert(u,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,kr.getPageSize=function(o,u,f){if(Xi(o)==="object"){var d=o;o=d.orientation,u=d.unit||u,f=d.format||f}u=u||"mm",f=f||"a4",o=(""+(o||"P")).toLowerCase();var g,y=(""+f).toLowerCase(),x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+u}var _,M=0,k=0;if(x.hasOwnProperty(y))M=x[y][1]/g,k=x[y][0]/g;else try{M=f[1],k=f[0]}catch{throw new Error("Invalid format: "+f)}if(o==="p"||o==="portrait")o="p",k>M&&(_=k,k=M,M=_);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",M>k&&(_=k,k=M,M=_)}return{width:k,height:M,unit:u,k:g,orientation:o}},e.html=function(o,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(E1):null;var f=new s(u);return u.worker?f:f.from(o).doCallback()}}(kr.API),kr.API.addJS=function(e){return Ob=e,this.internal.events.subscribe("postPutResources",function(){xg=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(xg+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Ib=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ob+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){xg!==void 0&&Ib!==void 0&&this.internal.out("/Names <</JavaScript "+xg+" 0 R>>")}),this},function(e){var n;e.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],u=r.exec(o);if(u!=null){var f=u[1];t.internal.newObjectDeferredBegin(f,!1)}t.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,g=[];for(s=0;s<d;s++){var y=t.internal.newObject();g.push(y);var x=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+x.objId+" 0 R /XYZ null null null]>> endobj")}var _=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<g.length;s++)t.internal.write("(page_"+(s+1)+")"+g[s]+" 0 R");t.internal.write(" ] >>","endobj"),n=t.internal.newObject(),t.internal.write("<< /Dests "+_+" 0 R"),t.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+n+" 0 R"))}]),e.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var u=this.count=this.count_r({count:0},o);if(u>0&&this.line("/Count "+u),o.options&&o.options.pageNumber){var f=t.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var d=0;d<r.children.length;d++)this.renderItems(r.children[d])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(kr.API),function(e){var n=[192,193,194,195,196,197,198,199];e.processJPEG=function(t,r,i,s,o,u){var f,d=this.decode.DCT_DECODE,g=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=o||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(f=function(y){for(var x,_=256*y.charCodeAt(4)+y.charCodeAt(5),M=y.length,k={width:0,height:0,numcomponents:1},N=4;N<M;N+=2){if(N+=_,n.indexOf(y.charCodeAt(N+1))!==-1){x=256*y.charCodeAt(N+5)+y.charCodeAt(N+6),k={width:256*y.charCodeAt(N+7)+y.charCodeAt(N+8),height:x,numcomponents:y.charCodeAt(N+9)};break}_=256*y.charCodeAt(N+2)+y.charCodeAt(N+3)}return k}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}g={data:t,width:f.width,height:f.height,colorSpace:u,bitsPerComponent:8,filter:d,index:r,alias:i}}return g}}(kr.API);var Nh,Lg,Bb,Rb,Fb,GF=function(){var e,n,t;function r(s){var o,u,f,d,g,y,x,_,M,k,N,T,F,K;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},y=null;;){switch(o=this.readUInt32(),M=(function(){var Q,he;for(he=[],Q=0;Q<4;++Q)he.push(String.fromCharCode(this.data[this.pos++]));return he}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":y&&this.animation.frames.push(y),this.pos+=4,y={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},g=this.readUInt16(),d=this.readUInt16()||100,y.delay=1e3*g/d,y.disposeOp=this.data[this.pos++],y.blendOp=this.data[this.pos++],y.data=[];break;case"IDAT":case"fdAT":for(M==="fdAT"&&(this.pos+=4,o-=4),s=(y!=null?y.data:void 0)||this.imgData,T=0;0<=o?T<o:T>o;0<=o?++T:--T)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(f=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>f)throw new Error("More transparent colors than palette size");if((k=f-this.transparency.indexed.length)>0)for(F=0;0<=k?F<k:F>k;0<=k?++F:--F)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":x=(N=this.read(o)).indexOf(0),_=String.fromCharCode.apply(String,N.slice(0,x)),this.text[_]=String.fromCharCode.apply(String,N.slice(x+1));break;case"IEND":return y&&this.animation.frames.push(y),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(K=this.colorType)===4||K===6,u=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*u,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,u;for(u=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)u.push(this.data[this.pos++]);return u},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,u=new Uint8Array(this.width*this.height*o),f=0,d=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function g(y,x,_,M){var k,N,T,F,K,Q,he,fe,me,G,$,X,R,O,B,z,W,V,oe,ie,xe,Ee=Math.ceil((d.width-y)/_),Te=Math.ceil((d.height-x)/M),Y=d.width==Ee&&d.height==Te;for(O=o*Ee,X=Y?u:new Uint8Array(O*Te),Q=s.length,R=0,N=0;R<Te&&f<Q;){switch(s[f++]){case 0:for(F=W=0;W<O;F=W+=1)X[N++]=s[f++];break;case 1:for(F=V=0;V<O;F=V+=1)k=s[f++],K=F<o?0:X[N-o],X[N++]=(k+K)%256;break;case 2:for(F=oe=0;oe<O;F=oe+=1)k=s[f++],T=(F-F%o)/o,B=R&&X[(R-1)*O+T*o+F%o],X[N++]=(B+k)%256;break;case 3:for(F=ie=0;ie<O;F=ie+=1)k=s[f++],T=(F-F%o)/o,K=F<o?0:X[N-o],B=R&&X[(R-1)*O+T*o+F%o],X[N++]=(k+Math.floor((K+B)/2))%256;break;case 4:for(F=xe=0;xe<O;F=xe+=1)k=s[f++],T=(F-F%o)/o,K=F<o?0:X[N-o],R===0?B=z=0:(B=X[(R-1)*O+T*o+F%o],z=T&&X[(R-1)*O+(T-1)*o+F%o]),he=K+B-z,fe=Math.abs(he-K),G=Math.abs(he-B),$=Math.abs(he-z),me=fe<=G&&fe<=$?K:G<=$?B:z,X[N++]=(k+me)%256;break;default:throw new Error("Invalid filter algorithm: "+s[f-1])}if(!Y){var q=((x+R*M)*d.width+y)*o,ee=R*O;for(F=0;F<Ee;F+=1){for(var ue=0;ue<o;ue+=1)u[q++]=X[ee++];q+=(_-1)*o}}R++}}return s=xF(s),d.interlaceMethod==1?(g(0,0,8,8),g(4,0,8,8),g(0,4,4,8),g(2,0,4,4),g(0,2,2,4),g(1,0,2,2),g(0,1,1,2)):g(0,0,1,1),u},r.prototype.decodePalette=function(){var s,o,u,f,d,g,y,x,_;for(u=this.palette,g=this.transparency.indexed||[],d=new Uint8Array((g.length||0)+u.length),f=0,s=0,o=y=0,x=u.length;y<x;o=y+=3)d[f++]=u[o],d[f++]=u[o+1],d[f++]=u[o+2],d[f++]=(_=g[s++])!=null?_:255;return d},r.prototype.copyToImageData=function(s,o){var u,f,d,g,y,x,_,M,k,N,T;if(f=this.colors,k=null,u=this.hasAlphaChannel,this.palette.length&&(k=(T=this._decodedPalette)!=null?T:this._decodedPalette=this.decodePalette(),f=4,u=!0),M=(d=s.data||s).length,y=k||o,g=x=0,f===1)for(;g<M;)_=k?4*o[g/4]:x,N=y[_++],d[g++]=N,d[g++]=N,d[g++]=N,d[g++]=u?y[_++]:255,x=_;else for(;g<M;)_=k?4*o[g/4]:x,d[g++]=y[_++],d[g++]=y[_++],d[g++]=y[_++],d[g++]=u?y[_++]:255,x=_},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(Ir)==="[object Window]"){try{n=Ir.document.createElement("canvas"),t=n.getContext("2d")}catch{return!1}return!0}return!1};return i(),e=function(s){var o;if(i()===!0)return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(o=new Image).src=n.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,u,f,d,g,y,x,_;if(this.animation){for(_=[],u=g=0,y=(x=this.animation.frames).length;g<y;u=++g)o=x[u],f=s.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(f,d),o.imageData=f,_.push(o.image=e(f));return _}},r.prototype.renderFrame=function(s,o){var u,f,d;return u=(f=this.animation.frames)[o],d=f[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?s.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&s.putImageData(d.imageData,d.xOffset,d.yOffset),u.blendOp===0&&s.clearRect(u.xOffset,u.yOffset,u.width,u.height),s.drawImage(u.image,u.xOffset,u.yOffset)},r.prototype.animate=function(s){var o,u,f,d,g,y,x=this;return u=0,y=this.animation,d=y.numFrames,f=y.frames,g=y.numPlays,(o=function(){var _,M;if(_=u++%d,M=f[_],x.renderFrame(s,_),d>1&&u/d<g)return x.animation._timeout=setTimeout(o,M.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,u;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(u=o.createImageData(this.width,this.height),this.copyToImageData(u,this.decodePixels()),o.putImageData(u,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function HF(e){var n=0;if(e[n++]!==71||e[n++]!==73||e[n++]!==70||e[n++]!==56||(e[n++]+1&253)!=56||e[n++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=e[n++]|e[n++]<<8,r=e[n++]|e[n++]<<8,i=e[n++],s=i>>7,o=1<<(7&i)+1;e[n++],e[n++];var u=null,f=null;s&&(u=n,f=o,n+=3*o);var d=!0,g=[],y=0,x=null,_=0,M=null;for(this.width=t,this.height=r;d&&n<e.length;)switch(e[n++]){case 33:switch(e[n++]){case 255:if(e[n]!==11||e[n+1]==78&&e[n+2]==69&&e[n+3]==84&&e[n+4]==83&&e[n+5]==67&&e[n+6]==65&&e[n+7]==80&&e[n+8]==69&&e[n+9]==50&&e[n+10]==46&&e[n+11]==48&&e[n+12]==3&&e[n+13]==1&&e[n+16]==0)n+=14,M=e[n++]|e[n++]<<8,n++;else for(n+=12;;){if(!((R=e[n++])>=0))throw Error("Invalid block size");if(R===0)break;n+=R}break;case 249:if(e[n++]!==4||e[n+4]!==0)throw new Error("Invalid graphics extension block.");var k=e[n++];y=e[n++]|e[n++]<<8,x=e[n++],!(1&k)&&(x=null),_=k>>2&7,n++;break;case 254:for(;;){if(!((R=e[n++])>=0))throw Error("Invalid block size");if(R===0)break;n+=R}break;default:throw new Error("Unknown graphic control label: 0x"+e[n-1].toString(16))}break;case 44:var N=e[n++]|e[n++]<<8,T=e[n++]|e[n++]<<8,F=e[n++]|e[n++]<<8,K=e[n++]|e[n++]<<8,Q=e[n++],he=Q>>6&1,fe=1<<(7&Q)+1,me=u,G=f,$=!1;Q>>7&&($=!0,me=n,G=fe,n+=3*fe);var X=n;for(n++;;){var R;if(!((R=e[n++])>=0))throw Error("Invalid block size");if(R===0)break;n+=R}g.push({x:N,y:T,width:F,height:K,has_local_palette:$,palette_offset:me,palette_size:G,data_offset:X,data_length:n-X,transparent_index:x,interlaced:!!he,delay:y,disposal:_});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[n-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return M},this.frameInfo=function(O){if(O<0||O>=g.length)throw new Error("Frame index out of range.");return g[O]},this.decodeAndBlitFrameBGRA=function(O,B){var z=this.frameInfo(O),W=z.width*z.height,V=new Uint8Array(W);jb(e,z.data_offset,V,W);var oe=z.palette_offset,ie=z.transparent_index;ie===null&&(ie=256);var xe=z.width,Ee=t-xe,Te=xe,Y=4*(z.y*t+z.x),q=4*((z.y+z.height)*t+z.x),ee=Y,ue=4*Ee;z.interlaced===!0&&(ue+=4*t*7);for(var le=8,pe=0,Z=V.length;pe<Z;++pe){var D=V[pe];if(Te===0&&(Te=xe,(ee+=ue)>=q&&(ue=4*Ee+4*t*(le-1),ee=Y+(xe+Ee)*(le<<1),le>>=1)),D===ie)ee+=4;else{var ke=e[oe+3*D],Me=e[oe+3*D+1],Ge=e[oe+3*D+2];B[ee++]=Ge,B[ee++]=Me,B[ee++]=ke,B[ee++]=255}--Te}},this.decodeAndBlitFrameRGBA=function(O,B){var z=this.frameInfo(O),W=z.width*z.height,V=new Uint8Array(W);jb(e,z.data_offset,V,W);var oe=z.palette_offset,ie=z.transparent_index;ie===null&&(ie=256);var xe=z.width,Ee=t-xe,Te=xe,Y=4*(z.y*t+z.x),q=4*((z.y+z.height)*t+z.x),ee=Y,ue=4*Ee;z.interlaced===!0&&(ue+=4*t*7);for(var le=8,pe=0,Z=V.length;pe<Z;++pe){var D=V[pe];if(Te===0&&(Te=xe,(ee+=ue)>=q&&(ue=4*Ee+4*t*(le-1),ee=Y+(xe+Ee)*(le<<1),le>>=1)),D===ie)ee+=4;else{var ke=e[oe+3*D],Me=e[oe+3*D+1],Ge=e[oe+3*D+2];B[ee++]=ke,B[ee++]=Me,B[ee++]=Ge,B[ee++]=255}--Te}}}function jb(e,n,t,r){for(var i=e[n++],s=1<<i,o=s+1,u=o+1,f=i+1,d=(1<<f)-1,g=0,y=0,x=0,_=e[n++],M=new Int32Array(4096),k=null;;){for(;g<16&&_!==0;)y|=e[n++]<<g,g+=8,_===1?_=e[n++]:--_;if(g<f)break;var N=y&d;if(y>>=f,g-=f,N!==s){if(N===o)break;for(var T=N<u?N:k,F=0,K=T;K>s;)K=M[K]>>8,++F;var Q=K;if(x+F+(T!==N?1:0)>r)return void lo.log("Warning, gif stream longer than expected.");t[x++]=Q;var he=x+=F;for(T!==N&&(t[x++]=Q),K=T;F--;)K=M[K],t[--he]=255&K,K>>=8;k!==null&&u<4096&&(M[u++]=k<<8|Q,u>=d+1&&f<12&&(++f,d=d<<1|1)),k=N}else u=o+1,d=(1<<(f=i+1))-1,k=null}return x!==r&&lo.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function pv(e){var n,t,r,i,s,o=Math.floor,u=new Array(64),f=new Array(64),d=new Array(64),g=new Array(64),y=new Array(65535),x=new Array(65535),_=new Array(64),M=new Array(64),k=[],N=0,T=7,F=new Array(64),K=new Array(64),Q=new Array(64),he=new Array(256),fe=new Array(2048),me=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],G=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],$=[0,1,2,3,4,5,6,7,8,9,10,11],X=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],W=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function V(Y,q){for(var ee=0,ue=0,le=new Array,pe=1;pe<=16;pe++){for(var Z=1;Z<=Y[pe];Z++)le[q[ue]]=[],le[q[ue]][0]=ee,le[q[ue]][1]=pe,ue++,ee++;ee*=2}return le}function oe(Y){for(var q=Y[0],ee=Y[1]-1;ee>=0;)q&1<<ee&&(N|=1<<T),ee--,--T<0&&(N==255?(ie(255),ie(0)):ie(N),T=7,N=0)}function ie(Y){k.push(Y)}function xe(Y){ie(Y>>8&255),ie(255&Y)}function Ee(Y,q,ee,ue,le){for(var pe,Z=le[0],D=le[240],ke=function(tt,ze){var Qe,et,bt,Pt,At,Vt,Qt,mn,Ye,ot,rt=0;for(Ye=0;Ye<8;++Ye){Qe=tt[rt],et=tt[rt+1],bt=tt[rt+2],Pt=tt[rt+3],At=tt[rt+4],Vt=tt[rt+5],Qt=tt[rt+6];var zt=Qe+(mn=tt[rt+7]),en=Qe-mn,Bn=et+Qt,bn=et-Qt,Nn=bt+Vt,ar=bt-Vt,xn=Pt+At,Mn=Pt-At,Pn=zt+xn,fr=zt-xn,yr=Bn+Nn,at=Bn-Nn;tt[rt]=Pn+yr,tt[rt+4]=Pn-yr;var We=.707106781*(at+fr);tt[rt+2]=fr+We,tt[rt+6]=fr-We;var Ot=.382683433*((Pn=Mn+ar)-(at=bn+en)),En=.5411961*Pn+Ot,Jn=1.306562965*at+Ot,Zn=.707106781*(yr=ar+bn),qt=en+Zn,gn=en-Zn;tt[rt+5]=gn+En,tt[rt+3]=gn-En,tt[rt+1]=qt+Jn,tt[rt+7]=qt-Jn,rt+=8}for(rt=0,Ye=0;Ye<8;++Ye){Qe=tt[rt],et=tt[rt+8],bt=tt[rt+16],Pt=tt[rt+24],At=tt[rt+32],Vt=tt[rt+40],Qt=tt[rt+48];var Rt=Qe+(mn=tt[rt+56]),Kt=Qe-mn,Ln=et+Qt,mr=et-Qt,lt=bt+Vt,Cn=bt-Vt,Lr=Pt+At,Ii=Pt-At,Fr=Rt+Lr,Pr=Rt-Lr,lr=Ln+lt,Hr=Ln-lt;tt[rt]=Fr+lr,tt[rt+32]=Fr-lr;var ir=.707106781*(Hr+Pr);tt[rt+16]=Pr+ir,tt[rt+48]=Pr-ir;var Or=.382683433*((Fr=Ii+Cn)-(Hr=mr+Kt)),jr=.5411961*Fr+Or,on=1.306562965*Hr+Or,ji=.707106781*(lr=Cn+mr),_i=Kt+ji,gi=Kt-ji;tt[rt+40]=gi+jr,tt[rt+24]=gi-jr,tt[rt+8]=_i+on,tt[rt+56]=_i-on,rt++}for(Ye=0;Ye<64;++Ye)ot=tt[Ye]*ze[Ye],_[Ye]=ot>0?ot+.5|0:ot-.5|0;return _}(Y,q),Me=0;Me<64;++Me)M[me[Me]]=ke[Me];var Ge=M[0]-ee;ee=M[0],Ge==0?oe(ue[0]):(oe(ue[x[pe=32767+Ge]]),oe(y[pe]));for(var ce=63;ce>0&&M[ce]==0;)ce--;if(ce==0)return oe(Z),ee;for(var ne,ye=1;ye<=ce;){for(var de=ye;M[ye]==0&&ye<=ce;)++ye;var Ze=ye-de;if(Ze>=16){ne=Ze>>4;for(var qe=1;qe<=ne;++qe)oe(D);Ze&=15}pe=32767+M[ye],oe(le[(Ze<<4)+x[pe]]),oe(y[pe]),ye++}return ce!=63&&oe(Z),ee}function Te(Y){Y=Math.min(Math.max(Y,1),100),s!=Y&&(function(q){for(var ee=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ue=0;ue<64;ue++){var le=o((ee[ue]*q+50)/100);le=Math.min(Math.max(le,1),255),u[me[ue]]=le}for(var pe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Z=0;Z<64;Z++){var D=o((pe[Z]*q+50)/100);D=Math.min(Math.max(D,1),255),f[me[Z]]=D}for(var ke=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Me=0,Ge=0;Ge<8;Ge++)for(var ce=0;ce<8;ce++)d[Me]=1/(u[me[Me]]*ke[Ge]*ke[ce]*8),g[Me]=1/(f[me[Me]]*ke[Ge]*ke[ce]*8),Me++}(Y<50?Math.floor(5e3/Y):Math.floor(200-2*Y)),s=Y)}this.encode=function(Y,q){q&&Te(q),k=new Array,N=0,T=7,xe(65496),xe(65504),xe(16),ie(74),ie(70),ie(73),ie(70),ie(0),ie(1),ie(1),ie(0),xe(1),xe(1),ie(0),ie(0),function(){xe(65499),xe(132),ie(0);for(var et=0;et<64;et++)ie(u[et]);ie(1);for(var bt=0;bt<64;bt++)ie(f[bt])}(),function(et,bt){xe(65472),xe(17),ie(8),xe(bt),xe(et),ie(3),ie(1),ie(17),ie(0),ie(2),ie(17),ie(1),ie(3),ie(17),ie(1)}(Y.width,Y.height),function(){xe(65476),xe(418),ie(0);for(var et=0;et<16;et++)ie(G[et+1]);for(var bt=0;bt<=11;bt++)ie($[bt]);ie(16);for(var Pt=0;Pt<16;Pt++)ie(X[Pt+1]);for(var At=0;At<=161;At++)ie(R[At]);ie(1);for(var Vt=0;Vt<16;Vt++)ie(O[Vt+1]);for(var Qt=0;Qt<=11;Qt++)ie(B[Qt]);ie(17);for(var mn=0;mn<16;mn++)ie(z[mn+1]);for(var Ye=0;Ye<=161;Ye++)ie(W[Ye])}(),xe(65498),xe(12),ie(3),ie(1),ie(0),ie(2),ie(17),ie(3),ie(17),ie(0),ie(63),ie(0);var ee=0,ue=0,le=0;N=0,T=7,this.encode.displayName="_encode_";for(var pe,Z,D,ke,Me,Ge,ce,ne,ye,de=Y.data,Ze=Y.width,qe=Y.height,tt=4*Ze,ze=0;ze<qe;){for(pe=0;pe<tt;){for(Me=tt*ze+pe,ce=-1,ne=0,ye=0;ye<64;ye++)Ge=Me+(ne=ye>>3)*tt+(ce=4*(7&ye)),ze+ne>=qe&&(Ge-=tt*(ze+1+ne-qe)),pe+ce>=tt&&(Ge-=pe+ce-tt+4),Z=de[Ge++],D=de[Ge++],ke=de[Ge++],F[ye]=(fe[Z]+fe[D+256>>0]+fe[ke+512>>0]>>16)-128,K[ye]=(fe[Z+768>>0]+fe[D+1024>>0]+fe[ke+1280>>0]>>16)-128,Q[ye]=(fe[Z+1280>>0]+fe[D+1536>>0]+fe[ke+1792>>0]>>16)-128;ee=Ee(F,d,ee,n,r),ue=Ee(K,g,ue,t,i),le=Ee(Q,g,le,t,i),pe+=32}ze+=8}if(T>=0){var Qe=[];Qe[1]=T+1,Qe[0]=(1<<T+1)-1,oe(Qe)}return xe(65497),new Uint8Array(k)},e=e||50,function(){for(var Y=String.fromCharCode,q=0;q<256;q++)he[q]=Y(q)}(),n=V(G,$),t=V(O,B),r=V(X,R),i=V(z,W),function(){for(var Y=1,q=2,ee=1;ee<=15;ee++){for(var ue=Y;ue<q;ue++)x[32767+ue]=ee,y[32767+ue]=[],y[32767+ue][1]=ee,y[32767+ue][0]=ue;for(var le=-(q-1);le<=-Y;le++)x[32767+le]=ee,y[32767+le]=[],y[32767+le][1]=ee,y[32767+le][0]=q-1+le;Y<<=1,q<<=1}}(),function(){for(var Y=0;Y<256;Y++)fe[Y]=19595*Y,fe[Y+256>>0]=38470*Y,fe[Y+512>>0]=7471*Y+32768,fe[Y+768>>0]=-11059*Y,fe[Y+1024>>0]=-21709*Y,fe[Y+1280>>0]=32768*Y+8421375,fe[Y+1536>>0]=-27439*Y,fe[Y+1792>>0]=-5329*Y}(),Te(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Du(e,n){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!n,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function zb(e){function n(G){if(!G)throw Error("assert :P")}function t(G,$,X){for(var R=0;4>R;R++)if(G[$+R]!=X.charCodeAt(R))return!0;return!1}function r(G,$,X,R,O){for(var B=0;B<O;B++)G[$+B]=X[R+B]}function i(G,$,X,R){for(var O=0;O<R;O++)G[$+O]=X}function s(G){return new Int32Array(G)}function o(G,$){for(var X=[],R=0;R<G;R++)X.push(new $);return X}function u(G,$){var X=[];return function R(O,B,z){for(var W=z[B],V=0;V<W&&(O.push(z.length>B+1?[]:new $),!(z.length<B+1));V++)R(O[V],B+1,z)}(X,0,G),X}var f=function(){var G=this;function $(b,P){for(var H=1<<P-1>>>0;b&H;)H>>>=1;return H?(b&H-1)+H:b}function X(b,P,H,ae,be){n(!(ae%H));do b[P+(ae-=H)]=be;while(0<ae)}function R(b,P,H,ae,be){if(n(2328>=be),512>=be)var Ce=s(512);else if((Ce=s(be))==null)return 0;return function(Ae,Ne,Ie,Ve,dt,Dt){var It,xt,Yt=Ne,Gt=1<<Ie,pt=s(16),yt=s(16);for(n(dt!=0),n(Ve!=null),n(Ae!=null),n(0<Ie),xt=0;xt<dt;++xt){if(15<Ve[xt])return 0;++pt[Ve[xt]]}if(pt[0]==dt)return 0;for(yt[1]=0,It=1;15>It;++It){if(pt[It]>1<<It)return 0;yt[It+1]=yt[It]+pt[It]}for(xt=0;xt<dt;++xt)It=Ve[xt],0<Ve[xt]&&(Dt[yt[It]++]=xt);if(yt[15]==1)return(Ve=new O).g=0,Ve.value=Dt[0],X(Ae,Yt,1,Gt,Ve),Gt;var tn,hn=-1,rn=Gt-1,kn=0,Sn=1,Qn=1,l=1<<Ie;for(xt=0,It=1,dt=2;It<=Ie;++It,dt<<=1){if(Sn+=Qn<<=1,0>(Qn-=pt[It]))return 0;for(;0<pt[It];--pt[It])(Ve=new O).g=It,Ve.value=Dt[xt++],X(Ae,Yt+kn,dt,l,Ve),kn=$(kn,It)}for(It=Ie+1,dt=2;15>=It;++It,dt<<=1){if(Sn+=Qn<<=1,0>(Qn-=pt[It]))return 0;for(;0<pt[It];--pt[It]){if(Ve=new O,(kn&rn)!=hn){for(Yt+=l,tn=1<<(hn=It)-Ie;15>hn&&!(0>=(tn-=pt[hn]));)++hn,tn<<=1;Gt+=l=1<<(tn=hn-Ie),Ae[Ne+(hn=kn&rn)].g=tn+Ie,Ae[Ne+hn].value=Yt-Ne-hn}Ve.g=It-Ie,Ve.value=Dt[xt++],X(Ae,Yt+(kn>>Ie),dt,l,Ve),kn=$(kn,It)}}return Sn!=2*yt[15]-1?0:Gt}(b,P,H,ae,be,Ce)}function O(){this.value=this.g=0}function B(){this.value=this.g=0}function z(){this.G=o(5,O),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(po,B)}function W(b,P,H,ae){n(b!=null),n(P!=null),n(2147483648>ae),b.Ca=254,b.I=0,b.b=-8,b.Ka=0,b.oa=P,b.pa=H,b.Jd=P,b.Yc=H+ae,b.Zc=4<=ae?H+ae-4+1:H,pe(b)}function V(b,P){for(var H=0;0<P--;)H|=D(b,128)<<P;return H}function oe(b,P){var H=V(b,P);return Z(b)?-H:H}function ie(b,P,H,ae){var be,Ce=0;for(n(b!=null),n(P!=null),n(4294967288>ae),b.Sb=ae,b.Ra=0,b.u=0,b.h=0,4<ae&&(ae=4),be=0;be<ae;++be)Ce+=P[H+be]<<8*be;b.Ra=Ce,b.bb=ae,b.oa=P,b.pa=H}function xe(b){for(;8<=b.u&&b.bb<b.Sb;)b.Ra>>>=8,b.Ra+=b.oa[b.pa+b.bb]<<hs-8>>>0,++b.bb,b.u-=8;ee(b)&&(b.h=1,b.u=0)}function Ee(b,P){if(n(0<=P),!b.h&&P<=Ms){var H=q(b)&ra[P];return b.u+=P,xe(b),H}return b.h=1,b.u=0}function Te(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Y(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function q(b){return b.Ra>>>(b.u&hs-1)>>>0}function ee(b){return n(b.bb<=b.Sb),b.h||b.bb==b.Sb&&b.u>hs}function ue(b,P){b.u=P,b.h=ee(b)}function le(b){b.u>=hl&&(n(b.u>=hl),xe(b))}function pe(b){n(b!=null&&b.oa!=null),b.pa<b.Zc?(b.I=(b.oa[b.pa++]|b.I<<8)>>>0,b.b+=8):(n(b!=null&&b.oa!=null),b.pa<b.Yc?(b.b+=8,b.I=b.oa[b.pa++]|b.I<<8):b.Ka?b.b=0:(b.I<<=8,b.b+=8,b.Ka=1))}function Z(b){return V(b,1)}function D(b,P){var H=b.Ca;0>b.b&&pe(b);var ae=b.b,be=H*P>>>8,Ce=(b.I>>>ae>be)+0;for(Ce?(H-=be,b.I-=be+1<<ae>>>0):H=be+1,ae=H,be=0;256<=ae;)be+=8,ae>>=8;return ae=7^be+$o[ae],b.b-=ae,b.Ca=(H<<ae)-1,Ce}function ke(b,P,H){b[P+0]=H>>24&255,b[P+1]=H>>16&255,b[P+2]=H>>8&255,b[P+3]=H>>0&255}function Me(b,P){return b[P+0]<<0|b[P+1]<<8}function Ge(b,P){return Me(b,P)|b[P+2]<<16}function ce(b,P){return Me(b,P)|Me(b,P+2)<<16}function ne(b,P){var H=1<<P;return n(b!=null),n(0<P),b.X=s(H),b.X==null?0:(b.Mb=32-P,b.Xa=P,1)}function ye(b,P){n(b!=null),n(P!=null),n(b.Xa==P.Xa),r(P.X,0,b.X,0,1<<P.Xa)}function de(){this.X=[],this.Xa=this.Mb=0}function Ze(b,P,H,ae){n(H!=null),n(ae!=null);var be=H[0],Ce=ae[0];return be==0&&(be=(b*Ce+P/2)/P),Ce==0&&(Ce=(P*be+b/2)/b),0>=be||0>=Ce?0:(H[0]=be,ae[0]=Ce,1)}function qe(b,P){return b+(1<<P)-1>>>P}function tt(b,P){return((4278255360&b)+(4278255360&P)>>>0&4278255360)+((16711935&b)+(16711935&P)>>>0&16711935)>>>0}function ze(b,P){G[P]=function(H,ae,be,Ce,Ae,Ne,Ie){var Ve;for(Ve=0;Ve<Ae;++Ve){var dt=G[b](Ne[Ie+Ve-1],be,Ce+Ve);Ne[Ie+Ve]=tt(H[ae+Ve],dt)}}}function Qe(){this.ud=this.hd=this.jd=0}function et(b,P){return((4278124286&(b^P))>>>1)+(b&P)>>>0}function bt(b){return 0<=b&&256>b?b:0>b?0:255<b?255:void 0}function Pt(b,P){return bt(b+(b-P+.5>>1))}function At(b,P,H){return Math.abs(P-H)-Math.abs(b-H)}function Vt(b,P,H,ae,be,Ce,Ae){for(ae=Ce[Ae-1],H=0;H<be;++H)Ce[Ae+H]=ae=tt(b[P+H],ae)}function Qt(b,P,H,ae,be){var Ce;for(Ce=0;Ce<H;++Ce){var Ae=b[P+Ce],Ne=Ae>>8&255,Ie=16711935&(Ie=(Ie=16711935&Ae)+((Ne<<16)+Ne));ae[be+Ce]=(4278255360&Ae)+Ie>>>0}}function mn(b,P){P.jd=b>>0&255,P.hd=b>>8&255,P.ud=b>>16&255}function Ye(b,P,H,ae,be,Ce){var Ae;for(Ae=0;Ae<ae;++Ae){var Ne=P[H+Ae],Ie=Ne>>>8,Ve=Ne,dt=255&(dt=(dt=Ne>>>16)+((b.jd<<24>>24)*(Ie<<24>>24)>>>5));Ve=255&(Ve=(Ve=Ve+((b.hd<<24>>24)*(Ie<<24>>24)>>>5))+((b.ud<<24>>24)*(dt<<24>>24)>>>5)),be[Ce+Ae]=(4278255360&Ne)+(dt<<16)+Ve}}function ot(b,P,H,ae,be){G[P]=function(Ce,Ae,Ne,Ie,Ve,dt,Dt,It,xt){for(Ie=Dt;Ie<It;++Ie)for(Dt=0;Dt<xt;++Dt)Ve[dt++]=be(Ne[ae(Ce[Ae++])])},G[b]=function(Ce,Ae,Ne,Ie,Ve,dt,Dt){var It=8>>Ce.b,xt=Ce.Ea,Yt=Ce.K[0],Gt=Ce.w;if(8>It)for(Ce=(1<<Ce.b)-1,Gt=(1<<It)-1;Ae<Ne;++Ae){var pt,yt=0;for(pt=0;pt<xt;++pt)pt&Ce||(yt=ae(Ie[Ve++])),dt[Dt++]=be(Yt[yt&Gt]),yt>>=It}else G["VP8LMapColor"+H](Ie,Ve,Yt,Gt,dt,Dt,Ae,Ne,xt)}}function rt(b,P,H,ae,be){for(H=P+H;P<H;){var Ce=b[P++];ae[be++]=Ce>>16&255,ae[be++]=Ce>>8&255,ae[be++]=Ce>>0&255}}function zt(b,P,H,ae,be){for(H=P+H;P<H;){var Ce=b[P++];ae[be++]=Ce>>16&255,ae[be++]=Ce>>8&255,ae[be++]=Ce>>0&255,ae[be++]=Ce>>24&255}}function en(b,P,H,ae,be){for(H=P+H;P<H;){var Ce=(Ae=b[P++])>>16&240|Ae>>12&15,Ae=Ae>>0&240|Ae>>28&15;ae[be++]=Ce,ae[be++]=Ae}}function Bn(b,P,H,ae,be){for(H=P+H;P<H;){var Ce=(Ae=b[P++])>>16&248|Ae>>13&7,Ae=Ae>>5&224|Ae>>3&31;ae[be++]=Ce,ae[be++]=Ae}}function bn(b,P,H,ae,be){for(H=P+H;P<H;){var Ce=b[P++];ae[be++]=Ce>>0&255,ae[be++]=Ce>>8&255,ae[be++]=Ce>>16&255}}function Nn(b,P,H,ae,be,Ce){if(Ce==0)for(H=P+H;P<H;)ke(ae,((Ce=b[P++])[0]>>24|Ce[1]>>8&65280|Ce[2]<<8&16711680|Ce[3]<<24)>>>0),be+=32;else r(ae,be,b,P,H)}function ar(b,P){G[P][0]=G[b+"0"],G[P][1]=G[b+"1"],G[P][2]=G[b+"2"],G[P][3]=G[b+"3"],G[P][4]=G[b+"4"],G[P][5]=G[b+"5"],G[P][6]=G[b+"6"],G[P][7]=G[b+"7"],G[P][8]=G[b+"8"],G[P][9]=G[b+"9"],G[P][10]=G[b+"10"],G[P][11]=G[b+"11"],G[P][12]=G[b+"12"],G[P][13]=G[b+"13"],G[P][14]=G[b+"0"],G[P][15]=G[b+"0"]}function xn(b){return b==To||b==No||b==Ys||b==a}function Mn(){this.eb=[],this.size=this.A=this.fb=0}function Pn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function fr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Mn,this.f.kb=new Pn,this.sd=null}function yr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function at(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function We(b){return alert("todo:WebPSamplerProcessPlane"),b.T}function Ot(b,P){var H=b.T,ae=P.ba.f.RGBA,be=ae.eb,Ce=ae.fb+b.ka*ae.A,Ae=Wo[P.ba.S],Ne=b.y,Ie=b.O,Ve=b.f,dt=b.N,Dt=b.ea,It=b.W,xt=P.cc,Yt=P.dc,Gt=P.Mc,pt=P.Nc,yt=b.ka,tn=b.ka+b.T,hn=b.U,rn=hn+1>>1;for(yt==0?Ae(Ne,Ie,null,null,Ve,dt,Dt,It,Ve,dt,Dt,It,be,Ce,null,null,hn):(Ae(P.ec,P.fc,Ne,Ie,xt,Yt,Gt,pt,Ve,dt,Dt,It,be,Ce-ae.A,be,Ce,hn),++H);yt+2<tn;yt+=2)xt=Ve,Yt=dt,Gt=Dt,pt=It,dt+=b.Rc,It+=b.Rc,Ce+=2*ae.A,Ae(Ne,(Ie+=2*b.fa)-b.fa,Ne,Ie,xt,Yt,Gt,pt,Ve,dt,Dt,It,be,Ce-ae.A,be,Ce,hn);return Ie+=b.fa,b.j+tn<b.o?(r(P.ec,P.fc,Ne,Ie,hn),r(P.cc,P.dc,Ve,dt,rn),r(P.Mc,P.Nc,Dt,It,rn),H--):1&tn||Ae(Ne,Ie,null,null,Ve,dt,Dt,It,Ve,dt,Dt,It,be,Ce+ae.A,null,null,hn),H}function En(b,P,H){var ae=b.F,be=[b.J];if(ae!=null){var Ce=b.U,Ae=P.ba.S,Ne=Ae==Ks||Ae==Ys;P=P.ba.f.RGBA;var Ie=[0],Ve=b.ka;Ie[0]=b.T,b.Kb&&(Ve==0?--Ie[0]:(--Ve,be[0]-=b.width),b.j+b.ka+b.T==b.o&&(Ie[0]=b.o-b.j-Ve));var dt=P.eb;Ve=P.fb+Ve*P.A,b=Ai(ae,be[0],b.width,Ce,Ie,dt,Ve+(Ne?0:3),P.A),n(H==Ie),b&&xn(Ae)&&ko(dt,Ve,Ne,Ce,Ie,P.A)}return 0}function Jn(b){var P=b.ma,H=P.ba.S,ae=11>H,be=H==pr||H==Ea||H==Ks||H==is||H==12||xn(H);if(P.memory=null,P.Ib=null,P.Jb=null,P.Nd=null,!wu(P.Oa,b,be?11:12))return 0;if(be&&xn(H)&&fn(),b.da)alert("todo:use_scaling");else{if(ae){if(P.Ib=We,b.Kb){if(H=b.U+1>>1,P.memory=s(b.U+2*H),P.memory==null)return 0;P.ec=P.memory,P.fc=0,P.cc=P.ec,P.dc=P.fc+b.U,P.Mc=P.cc,P.Nc=P.dc+H,P.Ib=Ot,fn()}}else alert("todo:EmitYUV");be&&(P.Jb=En,ae&&Lt())}if(ae&&!Qu){for(b=0;256>b;++b)Kc[b]=89858*(b-128)+Ha>>Zc,Yc[b]=-22014*(b-128)+Ha,vd[b]=-45773*(b-128),Bl[b]=113618*(b-128)+Ha>>Zc;for(b=xc;b<Nf;++b)P=76283*(b-16)+Ha>>Zc,Jc[b-xc]=Vr(P,255),dh[b-xc]=Vr(P+8>>4,15);Qu=1}return 1}function Zn(b){var P=b.ma,H=b.U,ae=b.T;return n(!(1&b.ka)),0>=H||0>=ae?0:(H=P.Ib(b,P),P.Jb!=null&&P.Jb(b,P,H),P.Dc+=H,1)}function qt(b){b.ma.memory=null}function gn(b,P,H,ae){return Ee(b,8)!=47?0:(P[0]=Ee(b,14)+1,H[0]=Ee(b,14)+1,ae[0]=Ee(b,1),Ee(b,3)!=0?0:!b.h)}function Rt(b,P){if(4>b)return b+1;var H=b-2>>1;return(2+(1&b)<<H)+Ee(P,H)+1}function Kt(b,P){return 120<P?P-120:1<=(H=((H=st[P-1])>>4)*b+(8-(15&H)))?H:1;var H}function Ln(b,P,H){var ae=q(H),be=b[P+=255&ae].g-8;return 0<be&&(ue(H,H.u+8),ae=q(H),P+=b[P].value,P+=ae&(1<<be)-1),ue(H,H.u+b[P].g),b[P].value}function mr(b,P,H){return H.g+=b.g,H.value+=b.value<<P>>>0,n(8>=H.g),b.g}function lt(b,P,H){var ae=b.xc;return n((P=ae==0?0:b.vc[b.md*(H>>ae)+(P>>ae)])<b.Wb),b.Ya[P]}function Cn(b,P,H,ae){var be=b.ab,Ce=b.c*P,Ae=b.C;P=Ae+P;var Ne=H,Ie=ae;for(ae=b.Ta,H=b.Ua;0<be--;){var Ve=b.gc[be],dt=Ae,Dt=P,It=Ne,xt=Ie,Yt=(Ie=ae,Ne=H,Ve.Ea);switch(n(dt<Dt),n(Dt<=Ve.nc),Ve.hc){case 2:Xu(It,xt,(Dt-dt)*Yt,Ie,Ne);break;case 0:var Gt=dt,pt=Dt,yt=Ie,tn=Ne,hn=(l=Ve).Ea;Gt==0&&(ts(It,xt,null,null,1,yt,tn),Vt(It,xt+1,0,0,hn-1,yt,tn+1),xt+=hn,tn+=hn,++Gt);for(var rn=1<<l.b,kn=rn-1,Sn=qe(hn,l.b),Qn=l.K,l=l.w+(Gt>>l.b)*Sn;Gt<pt;){var h=Qn,v=l,w=1;for(ns(It,xt,yt,tn-hn,1,yt,tn);w<hn;){var C=(w&~kn)+rn;C>hn&&(C=hn),(0,xa[h[v++]>>8&15])(It,xt+ +w,yt,tn+w-hn,C-w,yt,tn+w),w=C}xt+=hn,tn+=hn,++Gt&kn||(l+=Sn)}Dt!=Ve.nc&&r(Ie,Ne-Yt,Ie,Ne+(Dt-dt-1)*Yt,Yt);break;case 1:for(Yt=It,pt=xt,hn=(It=Ve.Ea)-(tn=It&~(yt=(xt=1<<Ve.b)-1)),Gt=qe(It,Ve.b),rn=Ve.K,Ve=Ve.w+(dt>>Ve.b)*Gt;dt<Dt;){for(kn=rn,Sn=Ve,Qn=new Qe,l=pt+tn,h=pt+It;pt<l;)mn(kn[Sn++],Qn),La(Qn,Yt,pt,xt,Ie,Ne),pt+=xt,Ne+=xt;pt<h&&(mn(kn[Sn++],Qn),La(Qn,Yt,pt,hn,Ie,Ne),pt+=hn,Ne+=hn),++dt&yt||(Ve+=Gt)}break;case 3:if(It==Ie&&xt==Ne&&0<Ve.b){for(pt=Ie,It=Yt=Ne+(Dt-dt)*Yt-(tn=(Dt-dt)*qe(Ve.Ea,Ve.b)),xt=Ie,yt=Ne,Gt=[],tn=(hn=tn)-1;0<=tn;--tn)Gt[tn]=xt[yt+tn];for(tn=hn-1;0<=tn;--tn)pt[It+tn]=Gt[tn];So(Ve,dt,Dt,Ie,Yt,Ie,Ne)}else So(Ve,dt,Dt,It,xt,Ie,Ne)}Ne=ae,Ie=H}Ie!=H&&r(ae,H,Ne,Ie,Ce)}function Lr(b,P){var H=b.V,ae=b.Ba+b.c*b.C,be=P-b.C;if(n(P<=b.l.o),n(16>=be),0<be){var Ce=b.l,Ae=b.Ta,Ne=b.Ua,Ie=Ce.width;if(Cn(b,be,H,ae),be=Ne=[Ne],n((H=b.C)<(ae=P)),n(Ce.v<Ce.va),ae>Ce.o&&(ae=Ce.o),H<Ce.j){var Ve=Ce.j-H;H=Ce.j,be[0]+=Ve*Ie}if(H>=ae?H=0:(be[0]+=4*Ce.v,Ce.ka=H-Ce.j,Ce.U=Ce.va-Ce.v,Ce.T=ae-H,H=1),H){if(Ne=Ne[0],11>(H=b.ca).S){var dt=H.f.RGBA,Dt=(ae=H.S,be=Ce.U,Ce=Ce.T,Ve=dt.eb,dt.A),It=Ce;for(dt=dt.fb+b.Ma*dt.A;0<It--;){var xt=Ae,Yt=Ne,Gt=be,pt=Ve,yt=dt;switch(ae){case ps:Go(xt,Yt,Gt,pt,yt);break;case pr:Ao(xt,Yt,Gt,pt,yt);break;case To:Ao(xt,Yt,Gt,pt,yt),ko(pt,yt,0,Gt,1,0);break;case Ca:Ho(xt,Yt,Gt,pt,yt);break;case Ea:Nn(xt,Yt,Gt,pt,yt,1);break;case No:Nn(xt,Yt,Gt,pt,yt,1),ko(pt,yt,0,Gt,1,0);break;case Ks:Nn(xt,Yt,Gt,pt,yt,0);break;case Ys:Nn(xt,Yt,Gt,pt,yt,0),ko(pt,yt,1,Gt,1,0);break;case is:ia(xt,Yt,Gt,pt,yt);break;case a:ia(xt,Yt,Gt,pt,yt),Si(pt,yt,Gt,1,0);break;case bc:As(xt,Yt,Gt,pt,yt);break;default:n(0)}Ne+=Ie,dt+=Dt}b.Ma+=Ce}else alert("todo:EmitRescaledRowsYUVA");n(b.Ma<=H.height)}}b.C=P,n(b.C<=b.i)}function Ii(b){var P;if(0<b.ua)return 0;for(P=0;P<b.Wb;++P){var H=b.Ya[P].G,ae=b.Ya[P].H;if(0<H[1][ae[1]+0].g||0<H[2][ae[2]+0].g||0<H[3][ae[3]+0].g)return 0}return 1}function Fr(b,P,H,ae,be,Ce){if(b.Z!=0){var Ae=b.qd,Ne=b.rd;for(n(mi[b.Z]!=null);P<H;++P)mi[b.Z](Ae,Ne,ae,be,ae,be,Ce),Ae=ae,Ne=be,be+=Ce;b.qd=Ae,b.rd=Ne}}function Pr(b,P){var H=b.l.ma,ae=H.Z==0||H.Z==1?b.l.j:b.C;if(ae=b.C<ae?ae:b.C,n(P<=b.l.o),P>ae){var be=b.l.width,Ce=H.ca,Ae=H.tb+be*ae,Ne=b.V,Ie=b.Ba+b.c*ae,Ve=b.gc;n(b.ab==1),n(Ve[0].hc==3),Uo(Ve[0],ae,P,Ne,Ie,Ce,Ae),Fr(H,ae,P,Ce,Ae,be)}b.C=b.Ma=P}function lr(b,P,H,ae,be,Ce,Ae){var Ne=b.$/ae,Ie=b.$%ae,Ve=b.m,dt=b.s,Dt=H+b.$,It=Dt;be=H+ae*be;var xt=H+ae*Ce,Yt=280+dt.ua,Gt=b.Pb?Ne:16777216,pt=0<dt.ua?dt.Wa:null,yt=dt.wc,tn=Dt<xt?lt(dt,Ie,Ne):null;n(b.C<Ce),n(xt<=be);var hn=!1;e:for(;;){for(;hn||Dt<xt;){var rn=0;if(Ne>=Gt){var kn=Dt-H;n((Gt=b).Pb),Gt.wd=Gt.m,Gt.xd=kn,0<Gt.s.ua&&ye(Gt.s.Wa,Gt.s.vb),Gt=Ne+Ut}if(Ie&yt||(tn=lt(dt,Ie,Ne)),n(tn!=null),tn.Qb&&(P[Dt]=tn.qb,hn=!0),!hn)if(le(Ve),tn.jc){rn=Ve,kn=P;var Sn=Dt,Qn=tn.pd[q(rn)&po-1];n(tn.jc),256>Qn.g?(ue(rn,rn.u+Qn.g),kn[Sn]=Qn.value,rn=0):(ue(rn,rn.u+Qn.g-256),n(256<=Qn.value),rn=Qn.value),rn==0&&(hn=!0)}else rn=Ln(tn.G[0],tn.H[0],Ve);if(Ve.h)break;if(hn||256>rn){if(!hn)if(tn.nd)P[Dt]=(tn.qb|rn<<8)>>>0;else{if(le(Ve),hn=Ln(tn.G[1],tn.H[1],Ve),le(Ve),kn=Ln(tn.G[2],tn.H[2],Ve),Sn=Ln(tn.G[3],tn.H[3],Ve),Ve.h)break;P[Dt]=(Sn<<24|hn<<16|rn<<8|kn)>>>0}if(hn=!1,++Dt,++Ie>=ae&&(Ie=0,++Ne,Ae!=null&&Ne<=Ce&&!(Ne%16)&&Ae(b,Ne),pt!=null))for(;It<Dt;)rn=P[It++],pt.X[(506832829*rn&4294967295)>>>pt.Mb]=rn}else if(280>rn){if(rn=Rt(rn-256,Ve),kn=Ln(tn.G[4],tn.H[4],Ve),le(Ve),kn=Kt(ae,kn=Rt(kn,Ve)),Ve.h)break;if(Dt-H<kn||be-Dt<rn)break e;for(Sn=0;Sn<rn;++Sn)P[Dt+Sn]=P[Dt+Sn-kn];for(Dt+=rn,Ie+=rn;Ie>=ae;)Ie-=ae,++Ne,Ae!=null&&Ne<=Ce&&!(Ne%16)&&Ae(b,Ne);if(n(Dt<=be),Ie&yt&&(tn=lt(dt,Ie,Ne)),pt!=null)for(;It<Dt;)rn=P[It++],pt.X[(506832829*rn&4294967295)>>>pt.Mb]=rn}else{if(!(rn<Yt))break e;for(hn=rn-280,n(pt!=null);It<Dt;)rn=P[It++],pt.X[(506832829*rn&4294967295)>>>pt.Mb]=rn;rn=Dt,n(!(hn>>>(kn=pt).Xa)),P[rn]=kn.X[hn],hn=!0}hn||n(Ve.h==ee(Ve))}if(b.Pb&&Ve.h&&Dt<be)n(b.m.h),b.a=5,b.m=b.wd,b.$=b.xd,0<b.s.ua&&ye(b.s.vb,b.s.Wa);else{if(Ve.h)break e;Ae!=null&&Ae(b,Ne>Ce?Ce:Ne),b.a=0,b.$=Dt-H}return 1}return b.a=3,0}function Hr(b){n(b!=null),b.vc=null,b.yc=null,b.Ya=null;var P=b.Wa;P!=null&&(P.X=null),b.vb=null,n(b!=null)}function ir(){var b=new ul;return b==null?null:(b.a=0,b.xb=eu,ar("Predictor","VP8LPredictors"),ar("Predictor","VP8LPredictors_C"),ar("PredictorAdd","VP8LPredictorsAdd"),ar("PredictorAdd","VP8LPredictorsAdd_C"),Xu=Qt,La=Ye,Go=rt,Ao=zt,ia=en,As=Bn,Ho=bn,G.VP8LMapColor32b=wa,G.VP8LMapColor8b=Vo,b)}function Or(b,P,H,ae,be){var Ce=1,Ae=[b],Ne=[P],Ie=ae.m,Ve=ae.s,dt=null,Dt=0;e:for(;;){if(H)for(;Ce&&Ee(Ie,1);){var It=Ae,xt=Ne,Yt=ae,Gt=1,pt=Yt.m,yt=Yt.gc[Yt.ab],tn=Ee(pt,2);if(Yt.Oc&1<<tn)Ce=0;else{switch(Yt.Oc|=1<<tn,yt.hc=tn,yt.Ea=It[0],yt.nc=xt[0],yt.K=[null],++Yt.ab,n(4>=Yt.ab),tn){case 0:case 1:yt.b=Ee(pt,3)+2,Gt=Or(qe(yt.Ea,yt.b),qe(yt.nc,yt.b),0,Yt,yt.K),yt.K=yt.K[0];break;case 3:var hn,rn=Ee(pt,8)+1,kn=16<rn?0:4<rn?1:2<rn?2:3;if(It[0]=qe(yt.Ea,kn),yt.b=kn,hn=Gt=Or(rn,1,0,Yt,yt.K)){var Sn,Qn=rn,l=yt,h=1<<(8>>l.b),v=s(h);if(v==null)hn=0;else{var w=l.K[0],C=l.w;for(v[0]=l.K[0][0],Sn=1;Sn<1*Qn;++Sn)v[Sn]=tt(w[C+Sn],v[Sn-1]);for(;Sn<4*h;++Sn)v[Sn]=0;l.K[0]=null,l.K[0]=v,hn=1}}Gt=hn;break;case 2:break;default:n(0)}Ce=Gt}}if(Ae=Ae[0],Ne=Ne[0],Ce&&Ee(Ie,1)&&!(Ce=1<=(Dt=Ee(Ie,4))&&11>=Dt)){ae.a=3;break e}var j;if(j=Ce)t:{var J,re,ge,Le=ae,Xe=Ae,Ue=Ne,vt=Dt,Tt=H,Xt=Le.m,yn=Le.s,wn=[null],ur=1,Je=0,nt=Mt[vt];n:for(;;){if(Tt&&Ee(Xt,1)){var ht=Ee(Xt,3)+2,Bt=qe(Xe,ht),wt=qe(Ue,ht),Nt=Bt*wt;if(!Or(Bt,wt,0,Le,wn))break n;for(wn=wn[0],yn.xc=ht,J=0;J<Nt;++J){var ve=wn[J]>>8&65535;wn[J]=ve,ve>=ur&&(ur=ve+1)}}if(Xt.h)break n;for(re=0;5>re;++re){var Pe=U[re];!re&&0<vt&&(Pe+=1<<vt),Je<Pe&&(Je=Pe)}var Be=o(ur*nt,O),Oe=ur,Fe=o(Oe,z);if(Fe==null)var je=null;else n(65536>=Oe),je=Fe;var ut=s(Je);if(je==null||ut==null||Be==null){Le.a=1;break n}var ct=Be;for(J=ge=0;J<ur;++J){var gt=je[J],St=gt.G,Ct=gt.H,sn=0,$n=1,Hn=0;for(re=0;5>re;++re){Pe=U[re],St[re]=ct,Ct[re]=ge,!re&&0<vt&&(Pe+=1<<vt);i:{var er,vi=Pe,ki=Le,ei=ut,Ri=ct,vs=ge,Su=0,fa=ki.m,Df=Ee(fa,1);if(i(ei,0,0,vi),Df){var qa=Ee(fa,1)+1,ec=Ee(fa,1),ha=Ee(fa,ec==0?1:8);ei[ha]=1,qa==2&&(ei[ha=Ee(fa,8)]=1);var Zo=1}else{var ao=s(19),yh=Ee(fa,4)+4;if(19<yh){ki.a=3;var If=0;break i}for(er=0;er<yh;++er)ao[Se[er]]=Ee(fa,3);var Of=void 0,Bf=void 0,_h=ki,li=ao,bh=vi,$p=ei,Lc=0,Cu=_h.m,Up=8,Vp=o(128,O);r:for(;R(Vp,0,7,li,19);){if(Ee(Cu,1)){var dl=2+2*Ee(Cu,3);if((Of=2+Ee(Cu,dl))>bh)break r}else Of=bh;for(Bf=0;Bf<bh&&Of--;){le(Cu);var Gp=Vp[0+(127&q(Cu))];ue(Cu,Cu.u+Gp.g);var Eu=Gp.value;if(16>Eu)$p[Bf++]=Eu,Eu!=0&&(Up=Eu);else{var yd=Eu==16,_d=Eu-16,Hp=S[_d],Ma=Ee(Cu,p[_d])+Hp;if(Bf+Ma>bh)break r;for(var tc=yd?Up:0;0<Ma--;)$p[Bf++]=tc}}Lc=1;break r}Lc||(_h.a=3),Zo=Lc}(Zo=Zo&&!fa.h)&&(Su=R(Ri,vs,8,ei,vi)),Zo&&Su!=0?If=Su:(ki.a=3,If=0)}if(If==0)break n;if($n&&se[re]==1&&($n=ct[ge].g==0),sn+=ct[ge].g,ge+=If,3>=re){var Sc,wh=ut[0];for(Sc=1;Sc<Pe;++Sc)ut[Sc]>wh&&(wh=ut[Sc]);Hn+=wh}}if(gt.nd=$n,gt.Qb=0,$n&&(gt.qb=(St[3][Ct[3]+0].value<<24|St[1][Ct[1]+0].value<<16|St[2][Ct[2]+0].value)>>>0,sn==0&&256>St[0][Ct[0]+0].value&&(gt.Qb=1,gt.qb+=St[0][Ct[0]+0].value<<8)),gt.jc=!gt.Qb&&6>Hn,gt.jc){var Cc,tu=gt;for(Cc=0;Cc<po;++Cc){var nu=Cc,Pu=tu.pd[nu],Xc=tu.G[0][tu.H[0]+nu];256<=Xc.value?(Pu.g=Xc.g+256,Pu.value=Xc.value):(Pu.g=0,Pu.value=0,nu>>=mr(Xc,8,Pu),nu>>=mr(tu.G[1][tu.H[1]+nu],16,Pu),nu>>=mr(tu.G[2][tu.H[2]+nu],0,Pu),mr(tu.G[3][tu.H[3]+nu],24,Pu))}}}yn.vc=wn,yn.Wb=ur,yn.Ya=je,yn.yc=Be,j=1;break t}j=0}if(!(Ce=j)){ae.a=3;break e}if(0<Dt){if(Ve.ua=1<<Dt,!ne(Ve.Wa,Dt)){ae.a=1,Ce=0;break e}}else Ve.ua=0;var Rf=ae,Mu=Ae,am=Ne,ru=Rf.s,xh=ru.xc;if(Rf.c=Mu,Rf.i=am,ru.md=qe(Mu,xh),ru.wc=xh==0?-1:(1<<xh)-1,H){ae.xb=Tf;break e}if((dt=s(Ae*Ne))==null){ae.a=1,Ce=0;break e}Ce=(Ce=lr(ae,dt,0,Ae,Ne,Ne,null))&&!Ie.h;break e}return Ce?(be!=null?be[0]=dt:(n(dt==null),n(H)),ae.$=0,H||Hr(Ve)):Hr(Ve),Ce}function jr(b,P){var H=b.c*b.i,ae=H+P+16*P;return n(b.c<=P),b.V=s(ae),b.V==null?(b.Ta=null,b.Ua=0,b.a=1,0):(b.Ta=b.V,b.Ua=b.Ba+H+P,1)}function on(b,P){var H=b.C,ae=P-H,be=b.V,Ce=b.Ba+b.c*H;for(n(P<=b.l.o);0<ae;){var Ae=16<ae?16:ae,Ne=b.l.ma,Ie=b.l.width,Ve=Ie*Ae,dt=Ne.ca,Dt=Ne.tb+Ie*H,It=b.Ta,xt=b.Ua;Cn(b,Ae,be,Ce),so(It,xt,dt,Dt,Ve),Fr(Ne,H,H+Ae,dt,Dt,Ie),ae-=Ae,be+=Ae*b.c,H+=Ae}n(H==P),b.C=b.Ma=P}function ji(){this.ub=this.yd=this.td=this.Rb=0}function _i(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function gi(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Kr(){this.Yb=function(){var b=[];return function P(H,ae,be){for(var Ce=be[ae],Ae=0;Ae<Ce&&(H.push(be.length>ae+1?[]:0),!(be.length<ae+1));Ae++)P(H[Ae],ae+1,be)}(b,0,[3,11]),b}()}function Br(){this.jb=s(3),this.Wc=u([4,8],Kr),this.Xc=u([4,17],Kr)}function Rr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function dr(){this.ld=this.La=this.dd=this.tc=0}function zi(){this.Na=this.la=0}function Ss(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Cs(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function si(){this.uc=this.M=this.Nb=0,this.wa=Array(new dr),this.Y=0,this.ya=Array(new Cs),this.aa=0,this.l=new ci}function jn(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Po(){this.cb=this.a=0,this.sc="",this.m=new Te,this.Od=new ji,this.Kc=new _i,this.ed=new Rr,this.Qa=new gi,this.Ic=this.$c=this.Aa=0,this.D=new si,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Te),this.ia=0,this.pb=o(4,Ss),this.Pa=new Br,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new jn),this.Hd=0,this.rb=Array(new zi),this.sb=0,this.wa=Array(new dr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Cs),this.L=this.aa=0,this.gd=u([4,2],dr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ci(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function hr(){var b=new Po;return b!=null&&(b.a=0,b.sc="OK",b.cb=0,b.Xb=0,Xn||(Xn=Sr)),b}function qn(b,P,H){return b.a==0&&(b.a=P,b.sc=H,b.cb=0),0}function bo(b,P,H){return 3<=H&&b[P+0]==157&&b[P+1]==1&&b[P+2]==42}function wo(b,P){if(b==null)return 0;if(b.a=0,b.sc="OK",P==null)return qn(b,2,"null VP8Io passed to VP8GetHeaders()");var H=P.data,ae=P.w,be=P.ha;if(4>be)return qn(b,7,"Truncated header.");var Ce=H[ae+0]|H[ae+1]<<8|H[ae+2]<<16,Ae=b.Od;if(Ae.Rb=!(1&Ce),Ae.td=Ce>>1&7,Ae.yd=Ce>>4&1,Ae.ub=Ce>>5,3<Ae.td)return qn(b,3,"Incorrect keyframe parameters.");if(!Ae.yd)return qn(b,4,"Frame not displayable.");ae+=3,be-=3;var Ne=b.Kc;if(Ae.Rb){if(7>be)return qn(b,7,"cannot parse picture header");if(!bo(H,ae,be))return qn(b,3,"Bad code word");Ne.c=16383&(H[ae+4]<<8|H[ae+3]),Ne.Td=H[ae+4]>>6,Ne.i=16383&(H[ae+6]<<8|H[ae+5]),Ne.Ud=H[ae+6]>>6,ae+=7,be-=7,b.za=Ne.c+15>>4,b.Ub=Ne.i+15>>4,P.width=Ne.c,P.height=Ne.i,P.Da=0,P.j=0,P.v=0,P.va=P.width,P.o=P.height,P.da=0,P.ib=P.width,P.hb=P.height,P.U=P.width,P.T=P.height,i((Ce=b.Pa).jb,0,255,Ce.jb.length),n((Ce=b.Qa)!=null),Ce.Cb=0,Ce.Bb=0,Ce.Fb=1,i(Ce.Zb,0,0,Ce.Zb.length),i(Ce.Lb,0,0,Ce.Lb)}if(Ae.ub>be)return qn(b,7,"bad partition length");W(Ce=b.m,H,ae,Ae.ub),ae+=Ae.ub,be-=Ae.ub,Ae.Rb&&(Ne.Ld=Z(Ce),Ne.Kd=Z(Ce)),Ne=b.Qa;var Ie,Ve=b.Pa;if(n(Ce!=null),n(Ne!=null),Ne.Cb=Z(Ce),Ne.Cb){if(Ne.Bb=Z(Ce),Z(Ce)){for(Ne.Fb=Z(Ce),Ie=0;4>Ie;++Ie)Ne.Zb[Ie]=Z(Ce)?oe(Ce,7):0;for(Ie=0;4>Ie;++Ie)Ne.Lb[Ie]=Z(Ce)?oe(Ce,6):0}if(Ne.Bb)for(Ie=0;3>Ie;++Ie)Ve.jb[Ie]=Z(Ce)?V(Ce,8):255}else Ne.Bb=0;if(Ce.Ka)return qn(b,3,"cannot parse segment header");if((Ne=b.ed).zd=Z(Ce),Ne.Tb=V(Ce,6),Ne.wb=V(Ce,3),Ne.Pc=Z(Ce),Ne.Pc&&Z(Ce)){for(Ve=0;4>Ve;++Ve)Z(Ce)&&(Ne.vd[Ve]=oe(Ce,6));for(Ve=0;4>Ve;++Ve)Z(Ce)&&(Ne.od[Ve]=oe(Ce,6))}if(b.L=Ne.Tb==0?0:Ne.zd?1:2,Ce.Ka)return qn(b,3,"cannot parse filter header");var dt=be;if(be=Ie=ae,ae=Ie+dt,Ne=dt,b.Xb=(1<<V(b.m,2))-1,dt<3*(Ve=b.Xb))H=7;else{for(Ie+=3*Ve,Ne-=3*Ve,dt=0;dt<Ve;++dt){var Dt=H[be+0]|H[be+1]<<8|H[be+2]<<16;Dt>Ne&&(Dt=Ne),W(b.Jc[+dt],H,Ie,Dt),Ie+=Dt,Ne-=Dt,be+=3}W(b.Jc[+Ve],H,Ie,Ne),H=Ie<ae?0:5}if(H!=0)return qn(b,H,"cannot parse partitions");for(H=V(Ie=b.m,7),be=Z(Ie)?oe(Ie,4):0,ae=Z(Ie)?oe(Ie,4):0,Ne=Z(Ie)?oe(Ie,4):0,Ve=Z(Ie)?oe(Ie,4):0,Ie=Z(Ie)?oe(Ie,4):0,dt=b.Qa,Dt=0;4>Dt;++Dt){if(dt.Cb){var It=dt.Zb[Dt];dt.Fb||(It+=H)}else{if(0<Dt){b.pb[Dt]=b.pb[0];continue}It=H}var xt=b.pb[Dt];xt.Sc[0]=an[Vr(It+be,127)],xt.Sc[1]=In[Vr(It+0,127)],xt.Eb[0]=2*an[Vr(It+ae,127)],xt.Eb[1]=101581*In[Vr(It+Ne,127)]>>16,8>xt.Eb[1]&&(xt.Eb[1]=8),xt.Qc[0]=an[Vr(It+Ve,117)],xt.Qc[1]=In[Vr(It+Ie,127)],xt.lc=It+Ie}if(!Ae.Rb)return qn(b,4,"Not a key frame.");for(Z(Ce),Ae=b.Pa,H=0;4>H;++H){for(be=0;8>be;++be)for(ae=0;3>ae;++ae)for(Ne=0;11>Ne;++Ne)Ve=D(Ce,gs[H][be][ae][Ne])?V(Ce,8):Do[H][be][ae][Ne],Ae.Wc[H][be].Yb[ae][Ne]=Ve;for(be=0;17>be;++be)Ae.Xc[H][be]=Ae.Wc[H][wc[be]]}return b.kc=Z(Ce),b.kc&&(b.Bd=V(Ce,8)),b.cb=1}function Sr(b,P,H,ae,be,Ce,Ae){var Ne=P[be].Yb[H];for(H=0;16>be;++be){if(!D(b,Ne[H+0]))return be;for(;!D(b,Ne[H+1]);)if(Ne=P[++be].Yb[0],H=0,be==16)return 16;var Ie=P[be+1].Yb;if(D(b,Ne[H+2])){var Ve=b,dt=0;if(D(Ve,(It=Ne)[(Dt=H)+3]))if(D(Ve,It[Dt+6])){for(Ne=0,Dt=2*(dt=D(Ve,It[Dt+8]))+(It=D(Ve,It[Dt+9+dt])),dt=0,It=zr[Dt];It[Ne];++Ne)dt+=dt+D(Ve,It[Ne]);dt+=3+(8<<Dt)}else D(Ve,It[Dt+7])?(dt=7+2*D(Ve,165),dt+=D(Ve,145)):dt=5+D(Ve,159);else dt=D(Ve,It[Dt+4])?3+D(Ve,It[Dt+5]):2;Ne=Ie[2]}else dt=1,Ne=Ie[1];Ie=Ae+mo[be],0>(Ve=b).b&&pe(Ve);var Dt,It=Ve.b,xt=(Dt=Ve.Ca>>1)-(Ve.I>>It)>>31;--Ve.b,Ve.Ca+=xt,Ve.Ca|=1,Ve.I-=(Dt+1&xt)<<It,Ce[Ie]=((dt^xt)-xt)*ae[(0<be)+0]}return 16}function Vs(b){var P=b.rb[b.sb-1];P.la=0,P.Na=0,i(b.zc,0,0,b.zc.length),b.ja=0}function Gn(b,P){if(b==null)return 0;if(P==null)return qn(b,2,"NULL VP8Io parameter in VP8Decode().");if(!b.cb&&!wo(b,P))return 0;if(n(b.cb),P.ac==null||P.ac(P)){P.ob&&(b.L=0);var H=Pa[b.L];if(b.L==2?(b.yb=0,b.zb=0):(b.yb=P.v-H>>4,b.zb=P.j-H>>4,0>b.yb&&(b.yb=0),0>b.zb&&(b.zb=0)),b.Va=P.o+15+H>>4,b.Hb=P.va+15+H>>4,b.Hb>b.za&&(b.Hb=b.za),b.Va>b.Ub&&(b.Va=b.Ub),0<b.L){var ae=b.ed;for(H=0;4>H;++H){var be;if(b.Qa.Cb){var Ce=b.Qa.Lb[H];b.Qa.Fb||(Ce+=ae.Tb)}else Ce=ae.Tb;for(be=0;1>=be;++be){var Ae=b.gd[H][be],Ne=Ce;if(ae.Pc&&(Ne+=ae.vd[0],be&&(Ne+=ae.od[0])),0<(Ne=0>Ne?0:63<Ne?63:Ne)){var Ie=Ne;0<ae.wb&&(Ie=4<ae.wb?Ie>>2:Ie>>1)>9-ae.wb&&(Ie=9-ae.wb),1>Ie&&(Ie=1),Ae.dd=Ie,Ae.tc=2*Ne+Ie,Ae.ld=40<=Ne?2:15<=Ne?1:0}else Ae.tc=0;Ae.La=be}}}H=0}else qn(b,6,"Frame setup failed"),H=b.a;if(H=H==0){if(H){b.$c=0,0<b.Aa||(b.Ic=mh);e:{H=b.Ic,ae=4*(Ie=b.za);var Ve=32*Ie,dt=Ie+1,Dt=0<b.L?Ie*(0<b.Aa?2:1):0,It=(b.Aa==2?2:1)*Ie;if((Ae=ae+832+(be=3*(16*H+Pa[b.L])/2*Ve)+(Ce=b.Fa!=null&&0<b.Fa.length?b.Kc.c*b.Kc.i:0))!=Ae)H=0;else{if(Ae>b.Vb){if(b.Vb=0,b.Ec=s(Ae),b.Fc=0,b.Ec==null){H=qn(b,1,"no memory during frame initialization.");break e}b.Vb=Ae}Ae=b.Ec,Ne=b.Fc,b.Ac=Ae,b.Bc=Ne,Ne+=ae,b.Gd=o(Ve,jn),b.Hd=0,b.rb=o(dt+1,zi),b.sb=1,b.wa=Dt?o(Dt,dr):null,b.Y=0,b.D.Nb=0,b.D.wa=b.wa,b.D.Y=b.Y,0<b.Aa&&(b.D.Y+=Ie),n(!0),b.oc=Ae,b.pc=Ne,Ne+=832,b.ya=o(It,Cs),b.aa=0,b.D.ya=b.ya,b.D.aa=b.aa,b.Aa==2&&(b.D.aa+=Ie),b.R=16*Ie,b.B=8*Ie,Ie=(Ve=Pa[b.L])*b.R,Ve=Ve/2*b.B,b.sa=Ae,b.ta=Ne+Ie,b.qa=b.sa,b.ra=b.ta+16*H*b.R+Ve,b.Ha=b.qa,b.Ia=b.ra+8*H*b.B+Ve,b.$c=0,Ne+=be,b.mb=Ce?Ae:null,b.nb=Ce?Ne:null,n(Ne+Ce<=b.Fc+b.Vb),Vs(b),i(b.Ac,b.Bc,0,ae),H=1}}if(H){if(P.ka=0,P.y=b.sa,P.O=b.ta,P.f=b.qa,P.N=b.ra,P.ea=b.Ha,P.Vd=b.Ia,P.fa=b.R,P.Rc=b.B,P.F=null,P.J=0,!xu){for(H=-255;255>=H;++H)Bi[255+H]=0>H?-H:H;for(H=-1020;1020>=H;++H)ks[1020+H]=-128>H?-128:127<H?127:H;for(H=-112;112>=H;++H)ds[112+H]=-16>H?-16:15<H?15:H;for(H=-255;510>=H;++H)Rs[255+H]=0>H?0:255<H?255:H;xu=1}_t=Qo,Zt=fo,An=xo,Kn=Mi,wr=fs,kt=ai,Vi=Xl,Li=ta,Ol=Bs,rs=Dl,Gi=Tl,oa=Nl,Sa=bi,sa=Ju,aa=no,la=or,Qr=ro,Zs=ll,Js[0]=Nr,Js[1]=hi,Js[2]=br,Js[3]=Jr,Js[4]=jo,Js[5]=sl,Js[6]=ol,Js[7]=Hs,Js[8]=bu,Js[9]=$a,ca[0]=va,ca[1]=Fo,ca[2]=eo,ca[3]=Lo,ca[4]=to,ca[5]=il,ca[6]=ya,Fs[0]=Ua,Fs[1]=Os,Fs[2]=Ml,Fs[3]=Cr,Fs[4]=Al,Fs[5]=Yu,Fs[6]=Yl,H=1}else H=0}H&&(H=function(xt,Yt){for(xt.M=0;xt.M<xt.Va;++xt.M){var Gt,pt=xt.Jc[xt.M&xt.Xb],yt=xt.m,tn=xt;for(Gt=0;Gt<tn.za;++Gt){var hn=yt,rn=tn,kn=rn.Ac,Sn=rn.Bc+4*Gt,Qn=rn.zc,l=rn.ya[rn.aa+Gt];if(rn.Qa.Bb?l.$b=D(hn,rn.Pa.jb[0])?2+D(hn,rn.Pa.jb[2]):D(hn,rn.Pa.jb[1]):l.$b=0,rn.kc&&(l.Ad=D(hn,rn.Bd)),l.Za=!D(hn,145)+0,l.Za){var h=l.Ob,v=0;for(rn=0;4>rn;++rn){var w,C=Qn[0+rn];for(w=0;4>w;++w){C=Hi[kn[Sn+w]][C];for(var j=Ji[D(hn,C[0])];0<j;)j=Ji[2*j+D(hn,C[j])];C=-j,kn[Sn+w]=C}r(h,v,kn,Sn,4),v+=4,Qn[0+rn]=C}}else C=D(hn,156)?D(hn,128)?1:3:D(hn,163)?2:0,l.Ob[0]=C,i(kn,Sn,C,4),i(Qn,0,C,4);l.Dd=D(hn,142)?D(hn,114)?D(hn,183)?1:3:2:0}if(tn.m.Ka)return qn(xt,7,"Premature end-of-partition0 encountered.");for(;xt.ja<xt.za;++xt.ja){if(tn=pt,hn=(yt=xt).rb[yt.sb-1],kn=yt.rb[yt.sb+yt.ja],Gt=yt.ya[yt.aa+yt.ja],Sn=yt.kc?Gt.Ad:0)hn.la=kn.la=0,Gt.Za||(hn.Na=kn.Na=0),Gt.Hc=0,Gt.Gc=0,Gt.ia=0;else{var J,re;if(hn=kn,kn=tn,Sn=yt.Pa.Xc,Qn=yt.ya[yt.aa+yt.ja],l=yt.pb[Qn.$b],rn=Qn.ad,h=0,v=yt.rb[yt.sb-1],C=w=0,i(rn,h,0,384),Qn.Za)var ge=0,Le=Sn[3];else{j=s(16);var Xe=hn.Na+v.Na;if(Xe=Xn(kn,Sn[1],Xe,l.Eb,0,j,0),hn.Na=v.Na=(0<Xe)+0,1<Xe)_t(j,0,rn,h);else{var Ue=j[0]+3>>3;for(j=0;256>j;j+=16)rn[h+j]=Ue}ge=1,Le=Sn[0]}var vt=15&hn.la,Tt=15&v.la;for(j=0;4>j;++j){var Xt=1&Tt;for(Ue=re=0;4>Ue;++Ue)vt=vt>>1|(Xt=(Xe=Xn(kn,Le,Xe=Xt+(1&vt),l.Sc,ge,rn,h))>ge)<<7,re=re<<2|(3<Xe?3:1<Xe?2:rn[h+0]!=0),h+=16;vt>>=4,Tt=Tt>>1|Xt<<7,w=(w<<8|re)>>>0}for(Le=vt,ge=Tt>>4,J=0;4>J;J+=2){for(re=0,vt=hn.la>>4+J,Tt=v.la>>4+J,j=0;2>j;++j){for(Xt=1&Tt,Ue=0;2>Ue;++Ue)Xe=Xt+(1&vt),vt=vt>>1|(Xt=0<(Xe=Xn(kn,Sn[2],Xe,l.Qc,0,rn,h)))<<3,re=re<<2|(3<Xe?3:1<Xe?2:rn[h+0]!=0),h+=16;vt>>=2,Tt=Tt>>1|Xt<<5}C|=re<<4*J,Le|=vt<<4<<J,ge|=(240&Tt)<<J}hn.la=Le,v.la=ge,Qn.Hc=w,Qn.Gc=C,Qn.ia=43690&C?0:l.ia,Sn=!(w|C)}if(0<yt.L&&(yt.wa[yt.Y+yt.ja]=yt.gd[Gt.$b][Gt.Za],yt.wa[yt.Y+yt.ja].La|=!Sn),tn.Ka)return qn(xt,7,"Premature end-of-file encountered.")}if(Vs(xt),yt=Yt,tn=1,Gt=(pt=xt).D,hn=0<pt.L&&pt.M>=pt.zb&&pt.M<=pt.Va,pt.Aa==0)e:{if(Gt.M=pt.M,Gt.uc=hn,Ql(pt,Gt),tn=1,Gt=(re=pt.D).Nb,hn=(C=Pa[pt.L])*pt.R,kn=C/2*pt.B,j=16*Gt*pt.R,Ue=8*Gt*pt.B,Sn=pt.sa,Qn=pt.ta-hn+j,l=pt.qa,rn=pt.ra-kn+Ue,h=pt.Ha,v=pt.Ia-kn+Ue,Tt=(vt=re.M)==0,w=vt>=pt.Va-1,pt.Aa==2&&Ql(pt,re),re.uc)for(Xt=(Xe=pt).D.M,n(Xe.D.uc),re=Xe.yb;re<Xe.Hb;++re){ge=re,Le=Xt;var yn=(wn=(Pe=Xe).D).Nb;J=Pe.R;var wn=wn.wa[wn.Y+ge],ur=Pe.sa,Je=Pe.ta+16*yn*J+16*ge,nt=wn.dd,ht=wn.tc;if(ht!=0)if(n(3<=ht),Pe.L==1)0<ge&&la(ur,Je,J,ht+4),wn.La&&Zs(ur,Je,J,ht),0<Le&&aa(ur,Je,J,ht+4),wn.La&&Qr(ur,Je,J,ht);else{var Bt=Pe.B,wt=Pe.qa,Nt=Pe.ra+8*yn*Bt+8*ge,ve=Pe.Ha,Pe=Pe.Ia+8*yn*Bt+8*ge;yn=wn.ld,0<ge&&(Li(ur,Je,J,ht+4,nt,yn),rs(wt,Nt,ve,Pe,Bt,ht+4,nt,yn)),wn.La&&(oa(ur,Je,J,ht,nt,yn),sa(wt,Nt,ve,Pe,Bt,ht,nt,yn)),0<Le&&(Vi(ur,Je,J,ht+4,nt,yn),Ol(wt,Nt,ve,Pe,Bt,ht+4,nt,yn)),wn.La&&(Gi(ur,Je,J,ht,nt,yn),Sa(wt,Nt,ve,Pe,Bt,ht,nt,yn))}}if(pt.ia&&alert("todo:DitherRow"),yt.put!=null){if(re=16*vt,vt=16*(vt+1),Tt?(yt.y=pt.sa,yt.O=pt.ta+j,yt.f=pt.qa,yt.N=pt.ra+Ue,yt.ea=pt.Ha,yt.W=pt.Ia+Ue):(re-=C,yt.y=Sn,yt.O=Qn,yt.f=l,yt.N=rn,yt.ea=h,yt.W=v),w||(vt-=C),vt>yt.o&&(vt=yt.o),yt.F=null,yt.J=null,pt.Fa!=null&&0<pt.Fa.length&&re<vt&&(yt.J=io(pt,yt,re,vt-re),yt.F=pt.mb,yt.F==null&&yt.F.length==0)){tn=qn(pt,3,"Could not decode alpha data.");break e}re<yt.j&&(C=yt.j-re,re=yt.j,n(!(1&C)),yt.O+=pt.R*C,yt.N+=pt.B*(C>>1),yt.W+=pt.B*(C>>1),yt.F!=null&&(yt.J+=yt.width*C)),re<vt&&(yt.O+=yt.v,yt.N+=yt.v>>1,yt.W+=yt.v>>1,yt.F!=null&&(yt.J+=yt.v),yt.ka=re-yt.j,yt.U=yt.va-yt.v,yt.T=vt-re,tn=yt.put(yt))}Gt+1!=pt.Ic||w||(r(pt.sa,pt.ta-hn,Sn,Qn+16*pt.R,hn),r(pt.qa,pt.ra-kn,l,rn+8*pt.B,kn),r(pt.Ha,pt.Ia-kn,h,v+8*pt.B,kn))}if(!tn)return qn(xt,6,"Output aborted.")}return 1}(b,P)),P.bc!=null&&P.bc(P),H&=1}return H?(b.cb=0,H):0}function _r(b,P,H,ae,be){be=b[P+H+32*ae]+(be>>3),b[P+H+32*ae]=-256&be?0>be?0:255:be}function Yr(b,P,H,ae,be,Ce){_r(b,P,0,H,ae+be),_r(b,P,1,H,ae+Ce),_r(b,P,2,H,ae-Ce),_r(b,P,3,H,ae-be)}function _n(b){return(20091*b>>16)+b}function nn(b,P,H,ae){var be,Ce=0,Ae=s(16);for(be=0;4>be;++be){var Ne=b[P+0]+b[P+8],Ie=b[P+0]-b[P+8],Ve=(35468*b[P+4]>>16)-_n(b[P+12]),dt=_n(b[P+4])+(35468*b[P+12]>>16);Ae[Ce+0]=Ne+dt,Ae[Ce+1]=Ie+Ve,Ae[Ce+2]=Ie-Ve,Ae[Ce+3]=Ne-dt,Ce+=4,P++}for(be=Ce=0;4>be;++be)Ne=(b=Ae[Ce+0]+4)+Ae[Ce+8],Ie=b-Ae[Ce+8],Ve=(35468*Ae[Ce+4]>>16)-_n(Ae[Ce+12]),_r(H,ae,0,0,Ne+(dt=_n(Ae[Ce+4])+(35468*Ae[Ce+12]>>16))),_r(H,ae,1,0,Ie+Ve),_r(H,ae,2,0,Ie-Ve),_r(H,ae,3,0,Ne-dt),Ce++,ae+=32}function ai(b,P,H,ae){var be=b[P+0]+4,Ce=35468*b[P+4]>>16,Ae=_n(b[P+4]),Ne=35468*b[P+1]>>16;Yr(H,ae,0,be+Ae,b=_n(b[P+1]),Ne),Yr(H,ae,1,be+Ce,b,Ne),Yr(H,ae,2,be-Ce,b,Ne),Yr(H,ae,3,be-Ae,b,Ne)}function fo(b,P,H,ae,be){nn(b,P,H,ae),be&&nn(b,P+16,H,ae+4)}function xo(b,P,H,ae){Zt(b,P+0,H,ae,1),Zt(b,P+32,H,ae+128,1)}function Mi(b,P,H,ae){var be;for(b=b[P+0]+4,be=0;4>be;++be)for(P=0;4>P;++P)_r(H,ae,P,be,b)}function fs(b,P,H,ae){b[P+0]&&Kn(b,P+0,H,ae),b[P+16]&&Kn(b,P+16,H,ae+4),b[P+32]&&Kn(b,P+32,H,ae+128),b[P+48]&&Kn(b,P+48,H,ae+128+4)}function Qo(b,P,H,ae){var be,Ce=s(16);for(be=0;4>be;++be){var Ae=b[P+0+be]+b[P+12+be],Ne=b[P+4+be]+b[P+8+be],Ie=b[P+4+be]-b[P+8+be],Ve=b[P+0+be]-b[P+12+be];Ce[0+be]=Ae+Ne,Ce[8+be]=Ae-Ne,Ce[4+be]=Ve+Ie,Ce[12+be]=Ve-Ie}for(be=0;4>be;++be)Ae=(b=Ce[0+4*be]+3)+Ce[3+4*be],Ne=Ce[1+4*be]+Ce[2+4*be],Ie=Ce[1+4*be]-Ce[2+4*be],Ve=b-Ce[3+4*be],H[ae+0]=Ae+Ne>>3,H[ae+16]=Ve+Ie>>3,H[ae+32]=Ae-Ne>>3,H[ae+48]=Ve-Ie>>3,ae+=64}function Ro(b,P,H){var ae,be=P-32,Ce=Oi,Ae=255-b[be-1];for(ae=0;ae<H;++ae){var Ne,Ie=Ce,Ve=Ae+b[P-1];for(Ne=0;Ne<H;++Ne)b[P+Ne]=Ie[Ve+b[be+Ne]];P+=32}}function hi(b,P){Ro(b,P,4)}function Os(b,P){Ro(b,P,8)}function Fo(b,P){Ro(b,P,16)}function eo(b,P){var H;for(H=0;16>H;++H)r(b,P+32*H,b,P-32,16)}function Lo(b,P){var H;for(H=16;0<H;--H)i(b,P,b[P-1],16),P+=32}function Gs(b,P,H){var ae;for(ae=0;16>ae;++ae)i(P,H+32*ae,b,16)}function va(b,P){var H,ae=16;for(H=0;16>H;++H)ae+=b[P-1+32*H]+b[P+H-32];Gs(ae>>5,b,P)}function to(b,P){var H,ae=8;for(H=0;16>H;++H)ae+=b[P-1+32*H];Gs(ae>>4,b,P)}function il(b,P){var H,ae=8;for(H=0;16>H;++H)ae+=b[P+H-32];Gs(ae>>4,b,P)}function ya(b,P){Gs(128,b,P)}function gr(b,P,H){return b+2*P+H+2>>2}function br(b,P){var H,ae=P-32;for(ae=new Uint8Array([gr(b[ae-1],b[ae+0],b[ae+1]),gr(b[ae+0],b[ae+1],b[ae+2]),gr(b[ae+1],b[ae+2],b[ae+3]),gr(b[ae+2],b[ae+3],b[ae+4])]),H=0;4>H;++H)r(b,P+32*H,ae,0,ae.length)}function Jr(b,P){var H=b[P-1],ae=b[P-1+32],be=b[P-1+64],Ce=b[P-1+96];ke(b,P+0,16843009*gr(b[P-1-32],H,ae)),ke(b,P+32,16843009*gr(H,ae,be)),ke(b,P+64,16843009*gr(ae,be,Ce)),ke(b,P+96,16843009*gr(be,Ce,Ce))}function Nr(b,P){var H,ae=4;for(H=0;4>H;++H)ae+=b[P+H-32]+b[P-1+32*H];for(ae>>=3,H=0;4>H;++H)i(b,P+32*H,ae,4)}function jo(b,P){var H=b[P-1+0],ae=b[P-1+32],be=b[P-1+64],Ce=b[P-1-32],Ae=b[P+0-32],Ne=b[P+1-32],Ie=b[P+2-32],Ve=b[P+3-32];b[P+0+96]=gr(ae,be,b[P-1+96]),b[P+1+96]=b[P+0+64]=gr(H,ae,be),b[P+2+96]=b[P+1+64]=b[P+0+32]=gr(Ce,H,ae),b[P+3+96]=b[P+2+64]=b[P+1+32]=b[P+0+0]=gr(Ae,Ce,H),b[P+3+64]=b[P+2+32]=b[P+1+0]=gr(Ne,Ae,Ce),b[P+3+32]=b[P+2+0]=gr(Ie,Ne,Ae),b[P+3+0]=gr(Ve,Ie,Ne)}function ol(b,P){var H=b[P+1-32],ae=b[P+2-32],be=b[P+3-32],Ce=b[P+4-32],Ae=b[P+5-32],Ne=b[P+6-32],Ie=b[P+7-32];b[P+0+0]=gr(b[P+0-32],H,ae),b[P+1+0]=b[P+0+32]=gr(H,ae,be),b[P+2+0]=b[P+1+32]=b[P+0+64]=gr(ae,be,Ce),b[P+3+0]=b[P+2+32]=b[P+1+64]=b[P+0+96]=gr(be,Ce,Ae),b[P+3+32]=b[P+2+64]=b[P+1+96]=gr(Ce,Ae,Ne),b[P+3+64]=b[P+2+96]=gr(Ae,Ne,Ie),b[P+3+96]=gr(Ne,Ie,Ie)}function sl(b,P){var H=b[P-1+0],ae=b[P-1+32],be=b[P-1+64],Ce=b[P-1-32],Ae=b[P+0-32],Ne=b[P+1-32],Ie=b[P+2-32],Ve=b[P+3-32];b[P+0+0]=b[P+1+64]=Ce+Ae+1>>1,b[P+1+0]=b[P+2+64]=Ae+Ne+1>>1,b[P+2+0]=b[P+3+64]=Ne+Ie+1>>1,b[P+3+0]=Ie+Ve+1>>1,b[P+0+96]=gr(be,ae,H),b[P+0+64]=gr(ae,H,Ce),b[P+0+32]=b[P+1+96]=gr(H,Ce,Ae),b[P+1+32]=b[P+2+96]=gr(Ce,Ae,Ne),b[P+2+32]=b[P+3+96]=gr(Ae,Ne,Ie),b[P+3+32]=gr(Ne,Ie,Ve)}function Hs(b,P){var H=b[P+0-32],ae=b[P+1-32],be=b[P+2-32],Ce=b[P+3-32],Ae=b[P+4-32],Ne=b[P+5-32],Ie=b[P+6-32],Ve=b[P+7-32];b[P+0+0]=H+ae+1>>1,b[P+1+0]=b[P+0+64]=ae+be+1>>1,b[P+2+0]=b[P+1+64]=be+Ce+1>>1,b[P+3+0]=b[P+2+64]=Ce+Ae+1>>1,b[P+0+32]=gr(H,ae,be),b[P+1+32]=b[P+0+96]=gr(ae,be,Ce),b[P+2+32]=b[P+1+96]=gr(be,Ce,Ae),b[P+3+32]=b[P+2+96]=gr(Ce,Ae,Ne),b[P+3+64]=gr(Ae,Ne,Ie),b[P+3+96]=gr(Ne,Ie,Ve)}function $a(b,P){var H=b[P-1+0],ae=b[P-1+32],be=b[P-1+64],Ce=b[P-1+96];b[P+0+0]=H+ae+1>>1,b[P+2+0]=b[P+0+32]=ae+be+1>>1,b[P+2+32]=b[P+0+64]=be+Ce+1>>1,b[P+1+0]=gr(H,ae,be),b[P+3+0]=b[P+1+32]=gr(ae,be,Ce),b[P+3+32]=b[P+1+64]=gr(be,Ce,Ce),b[P+3+64]=b[P+2+64]=b[P+0+96]=b[P+1+96]=b[P+2+96]=b[P+3+96]=Ce}function bu(b,P){var H=b[P-1+0],ae=b[P-1+32],be=b[P-1+64],Ce=b[P-1+96],Ae=b[P-1-32],Ne=b[P+0-32],Ie=b[P+1-32],Ve=b[P+2-32];b[P+0+0]=b[P+2+32]=H+Ae+1>>1,b[P+0+32]=b[P+2+64]=ae+H+1>>1,b[P+0+64]=b[P+2+96]=be+ae+1>>1,b[P+0+96]=Ce+be+1>>1,b[P+3+0]=gr(Ne,Ie,Ve),b[P+2+0]=gr(Ae,Ne,Ie),b[P+1+0]=b[P+3+32]=gr(H,Ae,Ne),b[P+1+32]=b[P+3+64]=gr(ae,H,Ae),b[P+1+64]=b[P+3+96]=gr(be,ae,H),b[P+1+96]=gr(Ce,be,ae)}function Ml(b,P){var H;for(H=0;8>H;++H)r(b,P+32*H,b,P-32,8)}function Cr(b,P){var H;for(H=0;8>H;++H)i(b,P,b[P-1],8),P+=32}function qr(b,P,H){var ae;for(ae=0;8>ae;++ae)i(P,H+32*ae,b,8)}function Ua(b,P){var H,ae=8;for(H=0;8>H;++H)ae+=b[P+H-32]+b[P-1+32*H];qr(ae>>4,b,P)}function Yu(b,P){var H,ae=4;for(H=0;8>H;++H)ae+=b[P+H-32];qr(ae>>3,b,P)}function Al(b,P){var H,ae=4;for(H=0;8>H;++H)ae+=b[P-1+32*H];qr(ae>>3,b,P)}function Yl(b,P){qr(128,b,P)}function al(b,P,H){var ae=b[P-H],be=b[P+0],Ce=3*(be-ae)+ua[1020+b[P-2*H]-b[P+H]],Ae=go[112+(Ce+4>>3)];b[P-H]=Oi[255+ae+go[112+(Ce+3>>3)]],b[P+0]=Oi[255+be-Ae]}function kl(b,P,H,ae){var be=b[P+0],Ce=b[P+H];return qo[255+b[P-2*H]-b[P-H]]>ae||qo[255+Ce-be]>ae}function Jl(b,P,H,ae){return 4*qo[255+b[P-H]-b[P+0]]+qo[255+b[P-2*H]-b[P+H]]<=ae}function Xr(b,P,H,ae,be){var Ce=b[P-3*H],Ae=b[P-2*H],Ne=b[P-H],Ie=b[P+0],Ve=b[P+H],dt=b[P+2*H],Dt=b[P+3*H];return 4*qo[255+Ne-Ie]+qo[255+Ae-Ve]>ae?0:qo[255+b[P-4*H]-Ce]<=be&&qo[255+Ce-Ae]<=be&&qo[255+Ae-Ne]<=be&&qo[255+Dt-dt]<=be&&qo[255+dt-Ve]<=be&&qo[255+Ve-Ie]<=be}function no(b,P,H,ae){var be=2*ae+1;for(ae=0;16>ae;++ae)Jl(b,P+ae,H,be)&&al(b,P+ae,H)}function or(b,P,H,ae){var be=2*ae+1;for(ae=0;16>ae;++ae)Jl(b,P+ae*H,1,be)&&al(b,P+ae*H,1)}function ro(b,P,H,ae){var be;for(be=3;0<be;--be)no(b,P+=4*H,H,ae)}function ll(b,P,H,ae){var be;for(be=3;0<be;--be)or(b,P+=4,H,ae)}function _a(b,P,H,ae,be,Ce,Ae,Ne){for(Ce=2*Ce+1;0<be--;){if(Xr(b,P,H,Ce,Ae))if(kl(b,P,H,Ne))al(b,P,H);else{var Ie=b,Ve=P,dt=H,Dt=Ie[Ve-2*dt],It=Ie[Ve-dt],xt=Ie[Ve+0],Yt=Ie[Ve+dt],Gt=Ie[Ve+2*dt],pt=27*(tn=ua[1020+3*(xt-It)+ua[1020+Dt-Yt]])+63>>7,yt=18*tn+63>>7,tn=9*tn+63>>7;Ie[Ve-3*dt]=Oi[255+Ie[Ve-3*dt]+tn],Ie[Ve-2*dt]=Oi[255+Dt+yt],Ie[Ve-dt]=Oi[255+It+pt],Ie[Ve+0]=Oi[255+xt-pt],Ie[Ve+dt]=Oi[255+Yt-yt],Ie[Ve+2*dt]=Oi[255+Gt-tn]}P+=ae}}function Ui(b,P,H,ae,be,Ce,Ae,Ne){for(Ce=2*Ce+1;0<be--;){if(Xr(b,P,H,Ce,Ae))if(kl(b,P,H,Ne))al(b,P,H);else{var Ie=b,Ve=P,dt=H,Dt=Ie[Ve-dt],It=Ie[Ve+0],xt=Ie[Ve+dt],Yt=go[112+((Gt=3*(It-Dt))+4>>3)],Gt=go[112+(Gt+3>>3)],pt=Yt+1>>1;Ie[Ve-2*dt]=Oi[255+Ie[Ve-2*dt]+pt],Ie[Ve-dt]=Oi[255+Dt+Gt],Ie[Ve+0]=Oi[255+It-Yt],Ie[Ve+dt]=Oi[255+xt-pt]}P+=ae}}function Xl(b,P,H,ae,be,Ce){_a(b,P,H,1,16,ae,be,Ce)}function ta(b,P,H,ae,be,Ce){_a(b,P,1,H,16,ae,be,Ce)}function Tl(b,P,H,ae,be,Ce){var Ae;for(Ae=3;0<Ae;--Ae)Ui(b,P+=4*H,H,1,16,ae,be,Ce)}function Nl(b,P,H,ae,be,Ce){var Ae;for(Ae=3;0<Ae;--Ae)Ui(b,P+=4,1,H,16,ae,be,Ce)}function Bs(b,P,H,ae,be,Ce,Ae,Ne){_a(b,P,be,1,8,Ce,Ae,Ne),_a(H,ae,be,1,8,Ce,Ae,Ne)}function Dl(b,P,H,ae,be,Ce,Ae,Ne){_a(b,P,1,be,8,Ce,Ae,Ne),_a(H,ae,1,be,8,Ce,Ae,Ne)}function bi(b,P,H,ae,be,Ce,Ae,Ne){Ui(b,P+4*be,be,1,8,Ce,Ae,Ne),Ui(H,ae+4*be,be,1,8,Ce,Ae,Ne)}function Ju(b,P,H,ae,be,Ce,Ae,Ne){Ui(b,P+4,1,be,8,Ce,Ae,Ne),Ui(H,ae+4,1,be,8,Ce,Ae,Ne)}function Mo(){this.ba=new fr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new at,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function qs(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Il(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ws(){this.ua=0,this.Wa=new de,this.vb=new de,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new z,this.yc=new O}function ul(){this.xb=this.a=0,this.l=new ci,this.ca=new fr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Y,this.Pb=0,this.wd=new Y,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ws,this.ab=0,this.gc=o(4,Il),this.Oc=0}function cl(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ci,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function wi(b,P,H,ae,be,Ce,Ae){for(b=b==null?0:b[P+0],P=0;P<Ae;++P)be[Ce+P]=b+H[ae+P]&255,b=be[Ce+P]}function Es(b,P,H,ae,be,Ce,Ae){var Ne;if(b==null)wi(null,null,H,ae,be,Ce,Ae);else for(Ne=0;Ne<Ae;++Ne)be[Ce+Ne]=b[P+Ne]+H[ae+Ne]&255}function ba(b,P,H,ae,be,Ce,Ae){if(b==null)wi(null,null,H,ae,be,Ce,Ae);else{var Ne,Ie=b[P+0],Ve=Ie,dt=Ie;for(Ne=0;Ne<Ae;++Ne)Ve=dt+(Ie=b[P+Ne])-Ve,dt=H[ae+Ne]+(-256&Ve?0>Ve?0:255:Ve)&255,Ve=Ie,be[Ce+Ne]=dt}}function io(b,P,H,ae){var be=P.width,Ce=P.o;if(n(b!=null&&P!=null),0>H||0>=ae||H+ae>Ce)return null;if(!b.Cc){if(b.ga==null){var Ae;if(b.ga=new cl,(Ae=b.ga==null)||(Ae=P.width*P.o,n(b.Gb.length==0),b.Gb=s(Ae),b.Uc=0,b.Gb==null?Ae=0:(b.mb=b.Gb,b.nb=b.Uc,b.rc=null,Ae=1),Ae=!Ae),!Ae){Ae=b.ga;var Ne=b.Fa,Ie=b.P,Ve=b.qc,dt=b.mb,Dt=b.nb,It=Ie+1,xt=Ve-1,Yt=Ae.l;if(n(Ne!=null&&dt!=null&&P!=null),mi[0]=null,mi[1]=wi,mi[2]=Es,mi[3]=ba,Ae.ca=dt,Ae.tb=Dt,Ae.c=P.width,Ae.i=P.height,n(0<Ae.c&&0<Ae.i),1>=Ve)P=0;else if(Ae.$a=Ne[Ie+0]>>0&3,Ae.Z=Ne[Ie+0]>>2&3,Ae.Lc=Ne[Ie+0]>>4&3,Ie=Ne[Ie+0]>>6&3,0>Ae.$a||1<Ae.$a||4<=Ae.Z||1<Ae.Lc||Ie)P=0;else if(Yt.put=Zn,Yt.ac=Jn,Yt.bc=qt,Yt.ma=Ae,Yt.width=P.width,Yt.height=P.height,Yt.Da=P.Da,Yt.v=P.v,Yt.va=P.va,Yt.j=P.j,Yt.o=P.o,Ae.$a)e:{n(Ae.$a==1),P=ir();t:for(;;){if(P==null){P=0;break e}if(n(Ae!=null),Ae.mc=P,P.c=Ae.c,P.i=Ae.i,P.l=Ae.l,P.l.ma=Ae,P.l.width=Ae.c,P.l.height=Ae.i,P.a=0,ie(P.m,Ne,It,xt),!Or(Ae.c,Ae.i,1,P,null)||(P.ab==1&&P.gc[0].hc==3&&Ii(P.s)?(Ae.ic=1,Ne=P.c*P.i,P.Ta=null,P.Ua=0,P.V=s(Ne),P.Ba=0,P.V==null?(P.a=1,P=0):P=1):(Ae.ic=0,P=jr(P,Ae.c)),!P))break t;P=1;break e}Ae.mc=null,P=0}else P=xt>=Ae.c*Ae.i;Ae=!P}if(Ae)return null;b.ga.Lc!=1?b.Ga=0:ae=Ce-H}n(b.ga!=null),n(H+ae<=Ce);e:{if(P=(Ne=b.ga).c,Ce=Ne.l.o,Ne.$a==0){if(It=b.rc,xt=b.Vc,Yt=b.Fa,Ie=b.P+1+H*P,Ve=b.mb,dt=b.nb+H*P,n(Ie<=b.P+b.qc),Ne.Z!=0)for(n(mi[Ne.Z]!=null),Ae=0;Ae<ae;++Ae)mi[Ne.Z](It,xt,Yt,Ie,Ve,dt,P),It=Ve,xt=dt,dt+=P,Ie+=P;else for(Ae=0;Ae<ae;++Ae)r(Ve,dt,Yt,Ie,P),It=Ve,xt=dt,dt+=P,Ie+=P;b.rc=It,b.Vc=xt}else{if(n(Ne.mc!=null),P=H+ae,n((Ae=Ne.mc)!=null),n(P<=Ae.i),Ae.C>=P)P=1;else if(Ne.ic||Lt(),Ne.ic){Ne=Ae.V,It=Ae.Ba,xt=Ae.c;var Gt=Ae.i,pt=(Yt=1,Ie=Ae.$/xt,Ve=Ae.$%xt,dt=Ae.m,Dt=Ae.s,Ae.$),yt=xt*Gt,tn=xt*P,hn=Dt.wc,rn=pt<tn?lt(Dt,Ve,Ie):null;n(pt<=yt),n(P<=Gt),n(Ii(Dt));t:for(;;){for(;!dt.h&&pt<tn;){if(Ve&hn||(rn=lt(Dt,Ve,Ie)),n(rn!=null),le(dt),256>(Gt=Ln(rn.G[0],rn.H[0],dt)))Ne[It+pt]=Gt,++pt,++Ve>=xt&&(Ve=0,++Ie<=P&&!(Ie%16)&&Pr(Ae,Ie));else{if(!(280>Gt)){Yt=0;break t}Gt=Rt(Gt-256,dt);var kn,Sn=Ln(rn.G[4],rn.H[4],dt);if(le(dt),!(pt>=(Sn=Kt(xt,Sn=Rt(Sn,dt)))&&yt-pt>=Gt)){Yt=0;break t}for(kn=0;kn<Gt;++kn)Ne[It+pt+kn]=Ne[It+pt+kn-Sn];for(pt+=Gt,Ve+=Gt;Ve>=xt;)Ve-=xt,++Ie<=P&&!(Ie%16)&&Pr(Ae,Ie);pt<tn&&Ve&hn&&(rn=lt(Dt,Ve,Ie))}n(dt.h==ee(dt))}Pr(Ae,Ie>P?P:Ie);break t}!Yt||dt.h&&pt<yt?(Yt=0,Ae.a=dt.h?5:3):Ae.$=pt,P=Yt}else P=lr(Ae,Ae.V,Ae.Ba,Ae.c,Ae.i,P,on);if(!P){ae=0;break e}}H+ae>=Ce&&(b.Cc=1),ae=1}if(!ae)return null;if(b.Cc&&((ae=b.ga)!=null&&(ae.mc=null),b.ga=null,0<b.Ga))return alert("todo:WebPDequantizeLevels"),null}return b.nb+H*be}function I(b,P,H,ae,be,Ce){for(;0<be--;){var Ae,Ne=b,Ie=P+(H?1:0),Ve=b,dt=P+(H?0:3);for(Ae=0;Ae<ae;++Ae){var Dt=Ve[dt+4*Ae];Dt!=255&&(Dt*=32897,Ne[Ie+4*Ae+0]=Ne[Ie+4*Ae+0]*Dt>>23,Ne[Ie+4*Ae+1]=Ne[Ie+4*Ae+1]*Dt>>23,Ne[Ie+4*Ae+2]=Ne[Ie+4*Ae+2]*Dt>>23)}P+=Ce}}function _e(b,P,H,ae,be){for(;0<ae--;){var Ce;for(Ce=0;Ce<H;++Ce){var Ae=b[P+2*Ce+0],Ne=15&(Ve=b[P+2*Ce+1]),Ie=4369*Ne,Ve=(240&Ve|Ve>>4)*Ie>>16;b[P+2*Ce+0]=(240&Ae|Ae>>4)*Ie>>16&240|(15&Ae|Ae<<4)*Ie>>16>>4&15,b[P+2*Ce+1]=240&Ve|Ne}P+=be}}function Ke(b,P,H,ae,be,Ce,Ae,Ne){var Ie,Ve,dt=255;for(Ve=0;Ve<be;++Ve){for(Ie=0;Ie<ae;++Ie){var Dt=b[P+Ie];Ce[Ae+4*Ie]=Dt,dt&=Dt}P+=H,Ae+=Ne}return dt!=255}function ft(b,P,H,ae,be){var Ce;for(Ce=0;Ce<be;++Ce)H[ae+Ce]=b[P+Ce]>>8}function Lt(){ko=I,Si=_e,Ai=Ke,so=ft}function $t(b,P,H){G[b]=function(ae,be,Ce,Ae,Ne,Ie,Ve,dt,Dt,It,xt,Yt,Gt,pt,yt,tn,hn){var rn,kn=hn-1>>1,Sn=Ne[Ie+0]|Ve[dt+0]<<16,Qn=Dt[It+0]|xt[Yt+0]<<16;n(ae!=null);var l=3*Sn+Qn+131074>>2;for(P(ae[be+0],255&l,l>>16,Gt,pt),Ce!=null&&(l=3*Qn+Sn+131074>>2,P(Ce[Ae+0],255&l,l>>16,yt,tn)),rn=1;rn<=kn;++rn){var h=Ne[Ie+rn]|Ve[dt+rn]<<16,v=Dt[It+rn]|xt[Yt+rn]<<16,w=Sn+h+Qn+v+524296,C=w+2*(h+Qn)>>3;l=C+Sn>>1,Sn=(w=w+2*(Sn+v)>>3)+h>>1,P(ae[be+2*rn-1],255&l,l>>16,Gt,pt+(2*rn-1)*H),P(ae[be+2*rn-0],255&Sn,Sn>>16,Gt,pt+(2*rn-0)*H),Ce!=null&&(l=w+Qn>>1,Sn=C+v>>1,P(Ce[Ae+2*rn-1],255&l,l>>16,yt,tn+(2*rn-1)*H),P(Ce[Ae+2*rn+0],255&Sn,Sn>>16,yt,tn+(2*rn+0)*H)),Sn=h,Qn=v}1&hn||(l=3*Sn+Qn+131074>>2,P(ae[be+hn-1],255&l,l>>16,Gt,pt+(hn-1)*H),Ce!=null&&(l=3*Qn+Sn+131074>>2,P(Ce[Ae+hn-1],255&l,l>>16,yt,tn+(hn-1)*H)))}}function fn(){Wo[ps]=De,Wo[pr]=Lu,Wo[Ca]=ms,Wo[Ea]=Io,Wo[Ks]=Gr,Wo[is]=Wc,Wo[bc]=hh,Wo[To]=Lu,Wo[No]=Io,Wo[Ys]=Gr,Wo[a]=Wc}function Dn(b){return b&-16384?0>b?0:255:b>>md}function zn(b,P){return Dn((19077*b>>8)+(26149*P>>8)-14234)}function nr(b,P,H){return Dn((19077*b>>8)-(6419*P>>8)-(13320*H>>8)+8708)}function vr(b,P){return Dn((19077*b>>8)+(33050*P>>8)-17685)}function Ur(b,P,H,ae,be){ae[be+0]=zn(b,H),ae[be+1]=nr(b,P,H),ae[be+2]=vr(b,P)}function $i(b,P,H,ae,be){ae[be+0]=vr(b,P),ae[be+1]=nr(b,P,H),ae[be+2]=zn(b,H)}function di(b,P,H,ae,be){var Ce=nr(b,P,H);P=Ce<<3&224|vr(b,P)>>3,ae[be+0]=248&zn(b,H)|Ce>>5,ae[be+1]=P}function xi(b,P,H,ae,be){var Ce=240&vr(b,P)|15;ae[be+0]=240&zn(b,H)|nr(b,P,H)>>4,ae[be+1]=Ce}function oo(b,P,H,ae,be){ae[be+0]=255,Ur(b,P,H,ae,be+1)}function ho(b,P,H,ae,be){$i(b,P,H,ae,be),ae[be+3]=255}function Ps(b,P,H,ae,be){Ur(b,P,H,ae,be),ae[be+3]=255}function Vr(b,P){return 0>b?0:b>P?P:b}function zo(b,P,H){G[b]=function(ae,be,Ce,Ae,Ne,Ie,Ve,dt,Dt){for(var It=dt+(-2&Dt)*H;dt!=It;)P(ae[be+0],Ce[Ae+0],Ne[Ie+0],Ve,dt),P(ae[be+1],Ce[Ae+0],Ne[Ie+0],Ve,dt+H),be+=2,++Ae,++Ie,dt+=2*H;1&Dt&&P(ae[be+0],Ce[Ae+0],Ne[Ie+0],Ve,dt)}}function fl(b,P,H){return H==0?b==0?P==0?6:5:P==0?4:0:H}function es(b,P,H,ae,be){switch(b>>>30){case 3:Zt(P,H,ae,be,0);break;case 2:kt(P,H,ae,be);break;case 1:Kn(P,H,ae,be)}}function Ql(b,P){var H,ae,be=P.M,Ce=P.Nb,Ae=b.oc,Ne=b.pc+40,Ie=b.oc,Ve=b.pc+584,dt=b.oc,Dt=b.pc+600;for(H=0;16>H;++H)Ae[Ne+32*H-1]=129;for(H=0;8>H;++H)Ie[Ve+32*H-1]=129,dt[Dt+32*H-1]=129;for(0<be?Ae[Ne-1-32]=Ie[Ve-1-32]=dt[Dt-1-32]=129:(i(Ae,Ne-32-1,127,21),i(Ie,Ve-32-1,127,9),i(dt,Dt-32-1,127,9)),ae=0;ae<b.za;++ae){var It=P.ya[P.aa+ae];if(0<ae){for(H=-1;16>H;++H)r(Ae,Ne+32*H-4,Ae,Ne+32*H+12,4);for(H=-1;8>H;++H)r(Ie,Ve+32*H-4,Ie,Ve+32*H+4,4),r(dt,Dt+32*H-4,dt,Dt+32*H+4,4)}var xt=b.Gd,Yt=b.Hd+ae,Gt=It.ad,pt=It.Hc;if(0<be&&(r(Ae,Ne-32,xt[Yt].y,0,16),r(Ie,Ve-32,xt[Yt].f,0,8),r(dt,Dt-32,xt[Yt].ea,0,8)),It.Za){var yt=Ae,tn=Ne-32+16;for(0<be&&(ae>=b.za-1?i(yt,tn,xt[Yt].y[15],4):r(yt,tn,xt[Yt+1].y,0,4)),H=0;4>H;H++)yt[tn+128+H]=yt[tn+256+H]=yt[tn+384+H]=yt[tn+0+H];for(H=0;16>H;++H,pt<<=2)yt=Ae,tn=Ne+ph[H],Js[It.Ob[H]](yt,tn),es(pt,Gt,16*+H,yt,tn)}else if(yt=fl(ae,be,It.Ob[0]),ca[yt](Ae,Ne),pt!=0)for(H=0;16>H;++H,pt<<=2)es(pt,Gt,16*+H,Ae,Ne+ph[H]);for(H=It.Gc,yt=fl(ae,be,It.Dd),Fs[yt](Ie,Ve),Fs[yt](dt,Dt),pt=Gt,yt=Ie,tn=Ve,255&(It=H>>0)&&(170&It?An(pt,256,yt,tn):wr(pt,256,yt,tn)),It=dt,pt=Dt,255&(H>>=8)&&(170&H?An(Gt,320,It,pt):wr(Gt,320,It,pt)),be<b.Ub-1&&(r(xt[Yt].y,0,Ae,Ne+480,16),r(xt[Yt].f,0,Ie,Ve+224,8),r(xt[Yt].ea,0,dt,Dt+224,8)),H=8*Ce*b.B,xt=b.sa,Yt=b.ta+16*ae+16*Ce*b.R,Gt=b.qa,It=b.ra+8*ae+H,pt=b.Ha,yt=b.Ia+8*ae+H,H=0;16>H;++H)r(xt,Yt+H*b.R,Ae,Ne+32*H,16);for(H=0;8>H;++H)r(Gt,It+H*b.B,Ie,Ve+32*H,8),r(pt,yt+H*b.B,dt,Dt+32*H,8)}}function na(b,P,H,ae,be,Ce,Ae,Ne,Ie){var Ve=[0],dt=[0],Dt=0,It=Ie!=null?Ie.kd:0,xt=Ie??new qs;if(b==null||12>H)return 7;xt.data=b,xt.w=P,xt.ha=H,P=[P],H=[H],xt.gb=[xt.gb];e:{var Yt=P,Gt=H,pt=xt.gb;if(n(b!=null),n(Gt!=null),n(pt!=null),pt[0]=0,12<=Gt[0]&&!t(b,Yt[0],"RIFF")){if(t(b,Yt[0]+8,"WEBP")){pt=3;break e}var yt=ce(b,Yt[0]+4);if(12>yt||4294967286<yt){pt=3;break e}if(It&&yt>Gt[0]-8){pt=7;break e}pt[0]=yt,Yt[0]+=12,Gt[0]-=12}pt=0}if(pt!=0)return pt;for(yt=0<xt.gb[0],H=H[0];;){e:{var tn=b;Gt=P,pt=H;var hn=Ve,rn=dt,kn=Yt=[0];if((l=Dt=[Dt])[0]=0,8>pt[0])pt=7;else{if(!t(tn,Gt[0],"VP8X")){if(ce(tn,Gt[0]+4)!=10){pt=3;break e}if(18>pt[0]){pt=7;break e}var Sn=ce(tn,Gt[0]+8),Qn=1+Ge(tn,Gt[0]+12);if(2147483648<=Qn*(tn=1+Ge(tn,Gt[0]+15))){pt=3;break e}kn!=null&&(kn[0]=Sn),hn!=null&&(hn[0]=Qn),rn!=null&&(rn[0]=tn),Gt[0]+=18,pt[0]-=18,l[0]=1}pt=0}}if(Dt=Dt[0],Yt=Yt[0],pt!=0)return pt;if(Gt=!!(2&Yt),!yt&&Dt)return 3;if(Ce!=null&&(Ce[0]=!!(16&Yt)),Ae!=null&&(Ae[0]=Gt),Ne!=null&&(Ne[0]=0),Ae=Ve[0],Yt=dt[0],Dt&&Gt&&Ie==null){pt=0;break}if(4>H){pt=7;break}if(yt&&Dt||!yt&&!Dt&&!t(b,P[0],"ALPH")){H=[H],xt.na=[xt.na],xt.P=[xt.P],xt.Sa=[xt.Sa];e:{Sn=b,pt=P,yt=H;var l=xt.gb;hn=xt.na,rn=xt.P,kn=xt.Sa,Qn=22,n(Sn!=null),n(yt!=null),tn=pt[0];var h=yt[0];for(n(hn!=null),n(kn!=null),hn[0]=null,rn[0]=null,kn[0]=0;;){if(pt[0]=tn,yt[0]=h,8>h){pt=7;break e}var v=ce(Sn,tn+4);if(4294967286<v){pt=3;break e}var w=8+v+1&-2;if(Qn+=w,0<l&&Qn>l){pt=3;break e}if(!t(Sn,tn,"VP8 ")||!t(Sn,tn,"VP8L")){pt=0;break e}if(h[0]<w){pt=7;break e}t(Sn,tn,"ALPH")||(hn[0]=Sn,rn[0]=tn+8,kn[0]=v),tn+=w,h-=w}}if(H=H[0],xt.na=xt.na[0],xt.P=xt.P[0],xt.Sa=xt.Sa[0],pt!=0)break}H=[H],xt.Ja=[xt.Ja],xt.xa=[xt.xa];e:if(l=b,pt=P,yt=H,hn=xt.gb[0],rn=xt.Ja,kn=xt.xa,Sn=pt[0],tn=!t(l,Sn,"VP8 "),Qn=!t(l,Sn,"VP8L"),n(l!=null),n(yt!=null),n(rn!=null),n(kn!=null),8>yt[0])pt=7;else{if(tn||Qn){if(l=ce(l,Sn+4),12<=hn&&l>hn-12){pt=3;break e}if(It&&l>yt[0]-8){pt=7;break e}rn[0]=l,pt[0]+=8,yt[0]-=8,kn[0]=Qn}else kn[0]=5<=yt[0]&&l[Sn+0]==47&&!(l[Sn+4]>>5),rn[0]=yt[0];pt=0}if(H=H[0],xt.Ja=xt.Ja[0],xt.xa=xt.xa[0],P=P[0],pt!=0)break;if(4294967286<xt.Ja)return 3;if(Ne==null||Gt||(Ne[0]=xt.xa?2:1),Ae=[Ae],Yt=[Yt],xt.xa){if(5>H){pt=7;break}Ne=Ae,It=Yt,Gt=Ce,b==null||5>H?b=0:5<=H&&b[P+0]==47&&!(b[P+4]>>5)?(yt=[0],l=[0],hn=[0],ie(rn=new Y,b,P,H),gn(rn,yt,l,hn)?(Ne!=null&&(Ne[0]=yt[0]),It!=null&&(It[0]=l[0]),Gt!=null&&(Gt[0]=hn[0]),b=1):b=0):b=0}else{if(10>H){pt=7;break}Ne=Yt,b==null||10>H||!bo(b,P+3,H-3)?b=0:(It=b[P+0]|b[P+1]<<8|b[P+2]<<16,Gt=16383&(b[P+7]<<8|b[P+6]),b=16383&(b[P+9]<<8|b[P+8]),1&It||3<(It>>1&7)||!(It>>4&1)||It>>5>=xt.Ja||!Gt||!b?b=0:(Ae&&(Ae[0]=Gt),Ne&&(Ne[0]=b),b=1))}if(!b||(Ae=Ae[0],Yt=Yt[0],Dt&&(Ve[0]!=Ae||dt[0]!=Yt)))return 3;Ie!=null&&(Ie[0]=xt,Ie.offset=P-Ie.w,n(4294967286>P-Ie.w),n(Ie.offset==Ie.ha-H));break}return pt==0||pt==7&&Dt&&Ie==null?(Ce!=null&&(Ce[0]|=xt.na!=null&&0<xt.na.length),ae!=null&&(ae[0]=Ae),be!=null&&(be[0]=Yt),0):pt}function wu(b,P,H){var ae=P.width,be=P.height,Ce=0,Ae=0,Ne=ae,Ie=be;if(P.Da=b!=null&&0<b.Da,P.Da&&(Ne=b.cd,Ie=b.bd,Ce=b.v,Ae=b.j,11>H||(Ce&=-2,Ae&=-2),0>Ce||0>Ae||0>=Ne||0>=Ie||Ce+Ne>ae||Ae+Ie>be))return 0;if(P.v=Ce,P.j=Ae,P.va=Ce+Ne,P.o=Ae+Ie,P.U=Ne,P.T=Ie,P.da=b!=null&&0<b.da,P.da){if(!Ze(Ne,Ie,H=[b.ib],Ce=[b.hb]))return 0;P.ib=H[0],P.hb=Ce[0]}return P.ob=b!=null&&b.ob,P.Kb=b==null||!b.Sd,P.da&&(P.ob=P.ib<3*ae/4&&P.hb<3*be/4,P.Kb=0),1}function Va(b){if(b==null)return 2;if(11>b.S){var P=b.f.RGBA;P.fb+=(b.height-1)*P.A,P.A=-P.A}else P=b.f.kb,b=b.height,P.O+=(b-1)*P.fa,P.fa=-P.fa,P.N+=(b-1>>1)*P.Ab,P.Ab=-P.Ab,P.W+=(b-1>>1)*P.Db,P.Db=-P.Db,P.F!=null&&(P.J+=(b-1)*P.lb,P.lb=-P.lb);return 0}function Ga(b,P,H,ae){if(ae==null||0>=b||0>=P)return 2;if(H!=null){if(H.Da){var be=H.cd,Ce=H.bd,Ae=-2&H.v,Ne=-2&H.j;if(0>Ae||0>Ne||0>=be||0>=Ce||Ae+be>b||Ne+Ce>P)return 2;b=be,P=Ce}if(H.da){if(!Ze(b,P,be=[H.ib],Ce=[H.hb]))return 2;b=be[0],P=Ce[0]}}ae.width=b,ae.height=P;e:{var Ie=ae.width,Ve=ae.height;if(b=ae.S,0>=Ie||0>=Ve||!(b>=ps&&13>b))b=2;else{if(0>=ae.Rd&&ae.sd==null){Ae=Ce=be=P=0;var dt=(Ne=Ie*vh[b])*Ve;if(11>b||(Ce=(Ve+1)/2*(P=(Ie+1)/2),b==12&&(Ae=(be=Ie)*Ve)),(Ve=s(dt+2*Ce+Ae))==null){b=1;break e}ae.sd=Ve,11>b?((Ie=ae.f.RGBA).eb=Ve,Ie.fb=0,Ie.A=Ne,Ie.size=dt):((Ie=ae.f.kb).y=Ve,Ie.O=0,Ie.fa=Ne,Ie.Fd=dt,Ie.f=Ve,Ie.N=0+dt,Ie.Ab=P,Ie.Cd=Ce,Ie.ea=Ve,Ie.W=0+dt+Ce,Ie.Db=P,Ie.Ed=Ce,b==12&&(Ie.F=Ve,Ie.J=0+dt+2*Ce),Ie.Tc=Ae,Ie.lb=be)}if(P=1,be=ae.S,Ce=ae.width,Ae=ae.height,be>=ps&&13>be)if(11>be)b=ae.f.RGBA,P&=(Ne=Math.abs(b.A))*(Ae-1)+Ce<=b.size,P&=Ne>=Ce*vh[be],P&=b.eb!=null;else{b=ae.f.kb,Ne=(Ce+1)/2,dt=(Ae+1)/2,Ie=Math.abs(b.fa),Ve=Math.abs(b.Ab);var Dt=Math.abs(b.Db),It=Math.abs(b.lb),xt=It*(Ae-1)+Ce;P&=Ie*(Ae-1)+Ce<=b.Fd,P&=Ve*(dt-1)+Ne<=b.Cd,P=(P&=Dt*(dt-1)+Ne<=b.Ed)&Ie>=Ce&Ve>=Ne&Dt>=Ne,P&=b.y!=null,P&=b.f!=null,P&=b.ea!=null,be==12&&(P&=It>=Ce,P&=xt<=b.Tc,P&=b.F!=null)}else P=0;b=P?0:2}}return b!=0||H!=null&&H.fd&&(b=Va(ae)),b}var po=64,ra=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ms=24,hs=32,hl=8,$o=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ze("Predictor0","PredictorAdd0"),G.Predictor0=function(){return 4278190080},G.Predictor1=function(b){return b},G.Predictor2=function(b,P,H){return P[H+0]},G.Predictor3=function(b,P,H){return P[H+1]},G.Predictor4=function(b,P,H){return P[H-1]},G.Predictor5=function(b,P,H){return et(et(b,P[H+1]),P[H+0])},G.Predictor6=function(b,P,H){return et(b,P[H-1])},G.Predictor7=function(b,P,H){return et(b,P[H+0])},G.Predictor8=function(b,P,H){return et(P[H-1],P[H+0])},G.Predictor9=function(b,P,H){return et(P[H+0],P[H+1])},G.Predictor10=function(b,P,H){return et(et(b,P[H-1]),et(P[H+0],P[H+1]))},G.Predictor11=function(b,P,H){var ae=P[H+0];return 0>=At(ae>>24&255,b>>24&255,(P=P[H-1])>>24&255)+At(ae>>16&255,b>>16&255,P>>16&255)+At(ae>>8&255,b>>8&255,P>>8&255)+At(255&ae,255&b,255&P)?ae:b},G.Predictor12=function(b,P,H){var ae=P[H+0];return(bt((b>>24&255)+(ae>>24&255)-((P=P[H-1])>>24&255))<<24|bt((b>>16&255)+(ae>>16&255)-(P>>16&255))<<16|bt((b>>8&255)+(ae>>8&255)-(P>>8&255))<<8|bt((255&b)+(255&ae)-(255&P)))>>>0},G.Predictor13=function(b,P,H){var ae=P[H-1];return(Pt((b=et(b,P[H+0]))>>24&255,ae>>24&255)<<24|Pt(b>>16&255,ae>>16&255)<<16|Pt(b>>8&255,ae>>8&255)<<8|Pt(b>>0&255,ae>>0&255))>>>0};var ts=G.PredictorAdd0;G.PredictorAdd1=Vt,ze("Predictor2","PredictorAdd2"),ze("Predictor3","PredictorAdd3"),ze("Predictor4","PredictorAdd4"),ze("Predictor5","PredictorAdd5"),ze("Predictor6","PredictorAdd6"),ze("Predictor7","PredictorAdd7"),ze("Predictor8","PredictorAdd8"),ze("Predictor9","PredictorAdd9"),ze("Predictor10","PredictorAdd10"),ze("Predictor11","PredictorAdd11"),ze("Predictor12","PredictorAdd12"),ze("Predictor13","PredictorAdd13");var ns=G.PredictorAdd2;ot("ColorIndexInverseTransform","MapARGB","32b",function(b){return b>>8&255},function(b){return b}),ot("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(b){return b},function(b){return b>>8&255});var Xu,So=G.ColorIndexInverseTransform,wa=G.MapARGB,Uo=G.VP8LColorIndexInverseTransformAlpha,Vo=G.MapAlpha,xa=G.VP8LPredictorsAdd=[];xa.length=16,(G.VP8LPredictors=[]).length=16,(G.VP8LPredictorsAdd_C=[]).length=16,(G.VP8LPredictors_C=[]).length=16;var La,Go,Ao,ia,As,Ho,_t,Zt,kt,An,Kn,wr,Vi,Li,Ol,rs,Gi,oa,Sa,sa,aa,la,Qr,Zs,ko,Si,Ai,so,Bi=s(511),ks=s(2041),ds=s(225),Rs=s(767),xu=0,ua=ks,go=ds,Oi=Rs,qo=Bi,ps=0,pr=1,Ca=2,Ea=3,Ks=4,is=5,bc=6,To=7,No=8,Ys=9,a=10,p=[2,3,7],S=[3,3,11],U=[280,256,256,256,40],se=[0,1,1,1,0],Se=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],st=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Mt=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ut=8,an=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],In=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Xn=null,zr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],mo=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Ji=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Do=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Hi=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],gs=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],wc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ca=[],Js=[],Fs=[],Tf=1,eu=2,mi=[],Wo=[];$t("UpsampleRgbLinePair",Ur,3),$t("UpsampleBgrLinePair",$i,3),$t("UpsampleRgbaLinePair",Ps,4),$t("UpsampleBgraLinePair",ho,4),$t("UpsampleArgbLinePair",oo,4),$t("UpsampleRgba4444LinePair",xi,2),$t("UpsampleRgb565LinePair",di,2);var De=G.UpsampleRgbLinePair,ms=G.UpsampleBgrLinePair,Lu=G.UpsampleRgbaLinePair,Io=G.UpsampleBgraLinePair,Gr=G.UpsampleArgbLinePair,Wc=G.UpsampleRgba4444LinePair,hh=G.UpsampleRgb565LinePair,Zc=16,Ha=1<<Zc-1,xc=-227,Nf=482,md=6,Qu=0,Kc=s(256),Bl=s(256),vd=s(256),Yc=s(256),Jc=s(Nf-xc),dh=s(Nf-xc);zo("YuvToRgbRow",Ur,3),zo("YuvToBgrRow",$i,3),zo("YuvToRgbaRow",Ps,4),zo("YuvToBgraRow",ho,4),zo("YuvToArgbRow",oo,4),zo("YuvToRgba4444Row",xi,2),zo("YuvToRgb565Row",di,2);var ph=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Pa=[0,2,8],gh=[8,7,6,4,4,2,2,2,1,1,1,1],mh=1;this.WebPDecodeRGBA=function(b,P,H,ae,be){var Ce=pr,Ae=new Mo,Ne=new fr;Ae.ba=Ne,Ne.S=Ce,Ne.width=[Ne.width],Ne.height=[Ne.height];var Ie=Ne.width,Ve=Ne.height,dt=new yr;if(dt==null||b==null)var Dt=2;else n(dt!=null),Dt=na(b,P,H,dt.width,dt.height,dt.Pd,dt.Qd,dt.format,null);if(Dt!=0?Ie=0:(Ie!=null&&(Ie[0]=dt.width[0]),Ve!=null&&(Ve[0]=dt.height[0]),Ie=1),Ie){Ne.width=Ne.width[0],Ne.height=Ne.height[0],ae!=null&&(ae[0]=Ne.width),be!=null&&(be[0]=Ne.height);e:{if(ae=new ci,(be=new qs).data=b,be.w=P,be.ha=H,be.kd=1,P=[0],n(be!=null),((b=na(be.data,be.w,be.ha,null,null,null,P,null,be))==0||b==7)&&P[0]&&(b=4),(P=b)==0){if(n(Ae!=null),ae.data=be.data,ae.w=be.w+be.offset,ae.ha=be.ha-be.offset,ae.put=Zn,ae.ac=Jn,ae.bc=qt,ae.ma=Ae,be.xa){if((b=ir())==null){Ae=1;break e}if(function(It,xt){var Yt=[0],Gt=[0],pt=[0];t:for(;;){if(It==null)return 0;if(xt==null)return It.a=2,0;if(It.l=xt,It.a=0,ie(It.m,xt.data,xt.w,xt.ha),!gn(It.m,Yt,Gt,pt)){It.a=3;break t}if(It.xb=eu,xt.width=Yt[0],xt.height=Gt[0],!Or(Yt[0],Gt[0],1,It,null))break t;return 1}return n(It.a!=0),0}(b,ae)){if(ae=(P=Ga(ae.width,ae.height,Ae.Oa,Ae.ba))==0){t:{ae=b;n:for(;;){if(ae==null){ae=0;break t}if(n(ae.s.yc!=null),n(ae.s.Ya!=null),n(0<ae.s.Wb),n((H=ae.l)!=null),n((be=H.ma)!=null),ae.xb!=0){if(ae.ca=be.ba,ae.tb=be.tb,n(ae.ca!=null),!wu(be.Oa,H,Ea)){ae.a=2;break n}if(!jr(ae,H.width)||H.da)break n;if((H.da||xn(ae.ca.S))&&Lt(),11>ae.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ae.ca.f.kb.F!=null&&Lt()),ae.Pb&&0<ae.s.ua&&ae.s.vb.X==null&&!ne(ae.s.vb,ae.s.Wa.Xa)){ae.a=1;break n}ae.xb=0}if(!lr(ae,ae.V,ae.Ba,ae.c,ae.i,H.o,Lr))break n;be.Dc=ae.Ma,ae=1;break t}n(ae.a!=0),ae=0}ae=!ae}ae&&(P=b.a)}else P=b.a}else{if((b=new hr)==null){Ae=1;break e}if(b.Fa=be.na,b.P=be.P,b.qc=be.Sa,wo(b,ae)){if((P=Ga(ae.width,ae.height,Ae.Oa,Ae.ba))==0){if(b.Aa=0,H=Ae.Oa,n((be=b)!=null),H!=null){if(0<(Ie=0>(Ie=H.Md)?0:100<Ie?255:255*Ie/100)){for(Ve=dt=0;4>Ve;++Ve)12>(Dt=be.pb[Ve]).lc&&(Dt.ia=Ie*gh[0>Dt.lc?0:Dt.lc]>>3),dt|=Dt.ia;dt&&(alert("todo:VP8InitRandom"),be.ia=1)}be.Ga=H.Id,100<be.Ga?be.Ga=100:0>be.Ga&&(be.Ga=0)}Gn(b,ae)||(P=b.a)}}else P=b.a}P==0&&Ae.Oa!=null&&Ae.Oa.fd&&(P=Va(Ae.ba))}Ae=P}Ce=Ae!=0?null:11>Ce?Ne.f.RGBA.eb:Ne.f.kb.y}else Ce=null;return Ce};var vh=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(G,$){for(var X="",R=0;R<4;R++)X+=String.fromCharCode(G[$++]);return X}function g(G,$){return(G[$+0]<<0|G[$+1]<<8|G[$+2]<<16)>>>0}function y(G,$){return(G[$+0]<<0|G[$+1]<<8|G[$+2]<<16|G[$+3]<<24)>>>0}new f;var x=[0],_=[0],M=[],k=new f,N=e,T=function(G,$){var X={},R=0,O=!1,B=0,z=0;if(X.frames=[],!function(q,ee,ue,le){for(var pe=0;pe<le;pe++)if(q[ee+pe]!=ue.charCodeAt(pe))return!0;return!1}(G,$,"RIFF",4)){var W,V;for(y(G,$+=4),$+=8;$<G.length;){var oe=d(G,$),ie=y(G,$+=4);$+=4;var xe=ie+(1&ie);switch(oe){case"VP8 ":case"VP8L":X.frames[R]===void 0&&(X.frames[R]={}),(Y=X.frames[R]).src_off=O?z:$-8,Y.src_size=B+ie+8,R++,O&&(O=!1,B=0,z=0);break;case"VP8X":(Y=X.header={}).feature_flags=G[$];var Ee=$+4;Y.canvas_width=1+g(G,Ee),Ee+=3,Y.canvas_height=1+g(G,Ee),Ee+=3;break;case"ALPH":O=!0,B=xe+8,z=$-8;break;case"ANIM":(Y=X.header).bgcolor=y(G,$),Ee=$+4,Y.loop_count=(W=G)[(V=Ee)+0]<<0|W[V+1]<<8,Ee+=2;break;case"ANMF":var Te,Y;(Y=X.frames[R]={}).offset_x=2*g(G,$),$+=3,Y.offset_y=2*g(G,$),$+=3,Y.width=1+g(G,$),$+=3,Y.height=1+g(G,$),$+=3,Y.duration=g(G,$),$+=3,Te=G[$++],Y.dispose=1&Te,Y.blend=Te>>1&1}oe!="ANMF"&&($+=xe)}return X}}(N,0);T.response=N,T.rgbaoutput=!0,T.dataurl=!1;var F=T.header?T.header:null,K=T.frames?T.frames:null;if(F){F.loop_counter=F.loop_count,x=[F.canvas_height],_=[F.canvas_width];for(var Q=0;Q<K.length&&K[Q].blend!=0;Q++);}var he=K[0],fe=k.WebPDecodeRGBA(N,he.src_off,he.src_size,_,x);he.rgba=fe,he.imgwidth=_[0],he.imgheight=x[0];for(var me=0;me<_[0]*x[0]*4;me++)M[me]=fe[me];return this.width=_,this.height=x,this.data=M,this}(function(e){var n=function(){return typeof b1=="function"},t=function(x,_,M,k){var N=4,T=o;switch(k){case e.image_compression.FAST:N=1,T=s;break;case e.image_compression.MEDIUM:N=6,T=u;break;case e.image_compression.SLOW:N=9,T=f}x=r(x,_,M,T);var F=b1(x,{level:N});return e.__addimage__.arrayBufferToBinaryString(F)},r=function(x,_,M,k){for(var N,T,F,K=x.length/_,Q=new Uint8Array(x.length+K),he=g(),fe=0;fe<K;fe+=1){if(F=fe*_,N=x.subarray(F,F+_),k)Q.set(k(N,M,T),F+fe);else{for(var me,G=he.length,$=[];me<G;me+=1)$[me]=he[me](N,M,T);var X=y($.concat());Q.set($[X],F+fe)}T=N}return Q},i=function(x){var _=Array.apply([],x);return _.unshift(0),_},s=function(x,_){var M,k=[],N=x.length;k[0]=1;for(var T=0;T<N;T+=1)M=x[T-_]||0,k[T+1]=x[T]-M+256&255;return k},o=function(x,_,M){var k,N=[],T=x.length;N[0]=2;for(var F=0;F<T;F+=1)k=M&&M[F]||0,N[F+1]=x[F]-k+256&255;return N},u=function(x,_,M){var k,N,T=[],F=x.length;T[0]=3;for(var K=0;K<F;K+=1)k=x[K-_]||0,N=M&&M[K]||0,T[K+1]=x[K]+256-(k+N>>>1)&255;return T},f=function(x,_,M){var k,N,T,F,K=[],Q=x.length;K[0]=4;for(var he=0;he<Q;he+=1)k=x[he-_]||0,N=M&&M[he]||0,T=M&&M[he-_]||0,F=d(k,N,T),K[he+1]=x[he]-F+256&255;return K},d=function(x,_,M){if(x===_&&_===M)return x;var k=Math.abs(_-M),N=Math.abs(x-M),T=Math.abs(x+_-M-M);return k<=N&&k<=T?x:N<=T?_:M},g=function(){return[i,s,o,u,f]},y=function(x){var _=x.map(function(M){return M.reduce(function(k,N){return k+Math.abs(N)},0)});return _.indexOf(Math.min.apply(null,_))};e.processPNG=function(x,_,M,k){var N,T,F,K,Q,he,fe,me,G,$,X,R,O,B,z,W=this.decode.FLATE_DECODE,V="";if(this.__addimage__.isArrayBuffer(x)&&(x=new Uint8Array(x)),this.__addimage__.isArrayBufferView(x)){if(x=(F=new GF(x)).imgData,T=F.bits,N=F.colorSpace,Q=F.colors,[4,6].indexOf(F.colorType)!==-1){if(F.bits===8){G=(me=F.pixelBitlength==32?new Uint32Array(F.decodePixels().buffer):F.pixelBitlength==16?new Uint16Array(F.decodePixels().buffer):new Uint8Array(F.decodePixels().buffer)).length,X=new Uint8Array(G*F.colors),$=new Uint8Array(G);var oe,ie=F.pixelBitlength-F.bits;for(B=0,z=0;B<G;B++){for(O=me[B],oe=0;oe<ie;)X[z++]=O>>>oe&255,oe+=F.bits;$[B]=O>>>oe&255}}if(F.bits===16){G=(me=new Uint32Array(F.decodePixels().buffer)).length,X=new Uint8Array(G*(32/F.pixelBitlength)*F.colors),$=new Uint8Array(G*(32/F.pixelBitlength)),R=F.colors>1,B=0,z=0;for(var xe=0;B<G;)O=me[B++],X[z++]=O>>>0&255,R&&(X[z++]=O>>>16&255,O=me[B++],X[z++]=O>>>0&255),$[xe++]=O>>>16&255;T=8}k!==e.image_compression.NONE&&n()?(x=t(X,F.width*F.colors,F.colors,k),fe=t($,F.width,1,k)):(x=X,fe=$,W=void 0)}if(F.colorType===3&&(N=this.color_spaces.INDEXED,he=F.palette,F.transparency.indexed)){var Ee=F.transparency.indexed,Te=0;for(B=0,G=Ee.length;B<G;++B)Te+=Ee[B];if((Te/=255)===G-1&&Ee.indexOf(0)!==-1)K=[Ee.indexOf(0)];else if(Te!==G){for(me=F.decodePixels(),$=new Uint8Array(me.length),B=0,G=me.length;B<G;B++)$[B]=Ee[me[B]];fe=t($,F.width,1)}}var Y=function(q){var ee;switch(q){case e.image_compression.FAST:ee=11;break;case e.image_compression.MEDIUM:ee=13;break;case e.image_compression.SLOW:ee=14;break;default:ee=12}return ee}(k);return W===this.decode.FLATE_DECODE&&(V="/Predictor "+Y+" "),V+="/Colors "+Q+" /BitsPerComponent "+T+" /Columns "+F.width,(this.__addimage__.isArrayBuffer(x)||this.__addimage__.isArrayBufferView(x))&&(x=this.__addimage__.arrayBufferToBinaryString(x)),(fe&&this.__addimage__.isArrayBuffer(fe)||this.__addimage__.isArrayBufferView(fe))&&(fe=this.__addimage__.arrayBufferToBinaryString(fe)),{alias:M,data:x,index:_,filter:W,decodeParameters:V,transparency:K,palette:he,sMask:fe,predictor:Y,width:F.width,height:F.height,bitsPerComponent:T,colorSpace:N}}}})(kr.API),function(e){e.processGIF89A=function(n,t,r,i){var s=new HF(n),o=s.width,u=s.height,f=[];s.decodeAndBlitFrameRGBA(0,f);var d={data:f,width:o,height:u},g=new pv(100).encode(d,100);return e.processJPEG.call(this,g,t,r,i)},e.processGIF87A=e.processGIF89A}(kr.API),Du.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var n=0;n<e;n++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[n]={red:i,green:r,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Du.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,n=this.width*this.height*4;this.data=new Uint8Array(n),this[e]()}catch(t){lo.log("bit decode error:"+t)}},Du.prototype.bit1=function(){var e,n=Math.ceil(this.width/8),t=n%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<n;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,u=0;u<8&&8*i+u<this.width;u++){var f=this.palette[s>>7-u&1];this.data[o+4*u]=f.blue,this.data[o+4*u+1]=f.green,this.data[o+4*u+2]=f.red,this.data[o+4*u+3]=255}t!==0&&(this.pos+=4-t)}},Du.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),n=e%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,u=s>>4,f=15&s,d=this.palette[u];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*i+1>=this.width)break;d=this.palette[f],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}n!==0&&(this.pos+=4-n)}},Du.prototype.bit8=function(){for(var e=this.width%4,n=this.height-1;n>=0;n--){for(var t=this.bottom_up?n:this.height-1-n,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},Du.prototype.bit15=function(){for(var e=this.width%3,n=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&n)/n*255|0,u=(s>>5&n)/n*255|0,f=(s>>10&n)/n*255|0,d=s>>15?255:0,g=r*this.width*4+4*i;this.data[g]=f,this.data[g+1]=u,this.data[g+2]=o,this.data[g+3]=d}this.pos+=e}},Du.prototype.bit16=function(){for(var e=this.width%3,n=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(o&n)/n*255|0,f=(o>>5&t)/t*255|0,d=(o>>11)/n*255|0,g=i*this.width*4+4*s;this.data[g]=d,this.data[g+1]=f,this.data[g+2]=u,this.data[g+3]=255}this.pos+=e}},Du.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*t;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Du.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var n=this.bottom_up?e:this.height-1-e,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=n*this.width*4+4*t;this.data[u]=s,this.data[u+1]=i,this.data[u+2]=r,this.data[u+3]=o}},Du.prototype.getData=function(){return this.data},function(e){e.processBMP=function(n,t,r,i){var s=new Du(n,!1),o=s.width,u=s.height,f={data:s.getData(),width:o,height:u},d=new pv(100).encode(f,100);return e.processJPEG.call(this,d,t,r,i)}}(kr.API),zb.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(n,t,r,i){var s=new zb(n),o=s.width,u=s.height,f={data:s.getData(),width:o,height:u},d=new pv(100).encode(f,100);return e.processJPEG.call(this,d,t,r,i)}}(kr.API),kr.API.processRGBA=function(e,n,t){for(var r=e.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),u=0,f=0,d=0;d<i;d+=4){var g=r[d],y=r[d+1],x=r[d+2],_=r[d+3];s[u++]=g,s[u++]=y,s[u++]=x,o[f++]=_}var M=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:M,index:n,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},kr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Nh=kr.API,Lg=Nh.getCharWidthsArray=function(e,n){var t,r,i=(n=n||{}).font||this.internal.getFont(),s=n.fontSize||this.internal.getFontSize(),o=n.charSpace||this.internal.getCharSpace(),u=n.widths?n.widths:i.metadata.Unicode.widths,f=u.fof?u.fof:1,d=n.kerning?n.kerning:i.metadata.Unicode.kerning,g=d.fof?d.fof:1,y=n.doKerning!==!1,x=0,_=e.length,M=0,k=u[0]||f,N=[];for(t=0;t<_;t++)r=e.charCodeAt(t),typeof i.metadata.widthOfString=="function"?N.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(x=y&&Xi(d[r])==="object"&&!isNaN(parseInt(d[r][M],10))?d[r][M]/g:0,N.push((u[r]||k)/f+x)),M=r;return N},Bb=Nh.getStringUnitWidth=function(e,n){var t=(n=n||{}).fontSize||this.internal.getFontSize(),r=n.font||this.internal.getFont(),i=n.charSpace||this.internal.getCharSpace();return Nh.processArabic&&(e=Nh.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,t,i)/t:Lg.apply(this,arguments).reduce(function(s,o){return s+o},0)},Rb=function(e,n,t,r){for(var i=[],s=0,o=e.length,u=0;s!==o&&u+n[s]<t;)u+=n[s],s++;i.push(e.slice(0,s));var f=s;for(u=0;s!==o;)u+n[s]>r&&(i.push(e.slice(f,s)),u=0,f=s),u+=n[s],s++;return f!==s&&i.push(e.slice(f,s)),i},Fb=function(e,n,t){t||(t={});var r,i,s,o,u,f,d,g=[],y=[g],x=t.textIndent||0,_=0,M=0,k=e.split(" "),N=Lg.apply(this,[" ",t])[0];if(f=t.lineIndent===-1?k[0].length+2:t.lineIndent||0){var T=Array(f).join(" "),F=[];k.map(function(Q){(Q=Q.split(/\s*\n/)).length>1?F=F.concat(Q.map(function(he,fe){return(fe&&he.length?`
`:"")+he})):F.push(Q[0])}),k=F,f=Bb.apply(this,[T,t])}for(s=0,o=k.length;s<o;s++){var K=0;if(r=k[s],f&&r[0]==`
`&&(r=r.substr(1),K=1),x+_+(M=(i=Lg.apply(this,[r,t])).reduce(function(Q,he){return Q+he},0))>n||K){if(M>n){for(u=Rb.apply(this,[r,i,n-(x+_),n]),g.push(u.shift()),g=[u.pop()];u.length;)y.push([u.shift()]);M=i.slice(r.length-(g[0]?g[0].length:0)).reduce(function(Q,he){return Q+he},0)}else g=[r];y.push(g),x=M+f,_=N}else g.push(r),x+=_+M,_=N}return d=f?function(Q,he){return(he?T:"")+Q.join(" ")}:function(Q){return Q.join(" ")},y.map(d)},Nh.splitTextToSize=function(e,n,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(g){if(g.widths&&g.kerning)return{widths:g.widths,kerning:g.kerning};var y=this.internal.getFont(g.fontName,g.fontStyle);return y.metadata.Unicode?{widths:y.metadata.Unicode.widths||{0:1},kerning:y.metadata.Unicode.kerning||{}}:{font:y.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*n/i;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=t.lineIndent;var u,f,d=[];for(u=0,f=r.length;u<f;u++)d=d.concat(Fb.apply(this,[r[u],o,s]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var n="klmnopqrstuvwxyz",t={},r={},i=0;i<n.length;i++)t[n[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=n[i];var s=function(y){return"0x"+parseInt(y,10).toString(16)},o=e.__fontmetrics__.compress=function(y){var x,_,M,k,N=["{"];for(var T in y){if(x=y[T],isNaN(parseInt(T,10))?_="'"+T+"'":(T=parseInt(T,10),_=(_=s(T).slice(2)).slice(0,-1)+r[_.slice(-1)]),typeof x=="number")x<0?(M=s(x).slice(3),k="-"):(M=s(x).slice(2),k=""),M=k+M.slice(0,-1)+r[M.slice(-1)];else{if(Xi(x)!=="object")throw new Error("Don't know what to do with value type "+Xi(x)+".");M=o(x)}N.push(_+M)}return N.push("}"),N.join("")},u=e.__fontmetrics__.uncompress=function(y){if(typeof y!="string")throw new Error("Invalid argument passed to uncompress.");for(var x,_,M,k,N={},T=1,F=N,K=[],Q="",he="",fe=y.length-1,me=1;me<fe;me+=1)(k=y[me])=="'"?x?(M=x.join(""),x=void 0):x=[]:x?x.push(k):k=="{"?(K.push([F,M]),F={},M=void 0):k=="}"?((_=K.pop())[0][_[1]]=F,M=void 0,F=_[0]):k=="-"?T=-1:M===void 0?t.hasOwnProperty(k)?(Q+=t[k],M=parseInt(Q,16)*T,T=1,Q=""):Q+=k:t.hasOwnProperty(k)?(he+=t[k],F[M]=parseInt(he,16)*T,T=1,M=void 0,he=""):he+=k;return N},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},g={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(y){var x=y.font,_=g.Unicode[x.postScriptName];_&&(x.metadata.Unicode={},x.metadata.Unicode.widths=_.widths,x.metadata.Unicode.kerning=_.kerning);var M=d.Unicode[x.postScriptName];M&&(x.metadata.Unicode.encoding=M,x.encoding=M.codePages[0])}])}(kr.API),function(e){var n=function(t){for(var r=t.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=t.charCodeAt(s);return i};e.API.events.push(["addFont",function(t){var r=void 0,i=t.font,s=t.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,u){u=/^\x00\x01\x00\x00/.test(u)?n(u):n(ap(u)),o.metadata=e.API.TTFFont.open(u),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(kr),function(e){function n(){return(Ir.canvg?Promise.resolve(Ir.canvg):zc(()=>import("./index.es.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}kr.API.addSvgAsImage=function(t,r,i,s,o,u,f,d){if(isNaN(r)||isNaN(i))throw lo.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw lo.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var g=document.createElement("canvas");g.width=s,g.height=o;var y=g.getContext("2d");y.fillStyle="#fff",y.fillRect(0,0,g.width,g.height);var x={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},_=this;return n().then(function(M){return M.fromString(y,t,x)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(M){return M.render(x)}).then(function(){_.addImage(g.toDataURL("image/jpeg",1),r,i,s,o,f,d)})}}(),kr.API.putTotalPages=function(e){var n,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(n=new RegExp(e,"g"),t=this.internal.getNumberOfPages()):(n=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(n,t);return this},kr.API.viewerPreferences=function(e,n){var t;e=e||{},n=n||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(o),f=[],d=0,g=0,y=0;function x(M,k){var N,T=!1;for(N=0;N<M.length;N+=1)M[N]===k&&(T=!0);return T}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,e==="reset"||n===!0){var _=u.length;for(y=0;y<_;y+=1)t[u[y]].value=t[u[y]].defaultValue,t[u[y]].explicitSet=!1}if(Xi(e)==="object"){for(i in e)if(s=e[i],x(u,i)&&s!==void 0){if(t[i].type==="boolean"&&typeof s=="boolean")t[i].value=s;else if(t[i].type==="name"&&x(t[i].valueSet,s))t[i].value=s;else if(t[i].type==="integer"&&Number.isInteger(s))t[i].value=s;else if(t[i].type==="array"){for(d=0;d<s.length;d+=1)if(r=!0,s[d].length===1&&typeof s[d][0]=="number")f.push(String(s[d]-1));else if(s[d].length>1){for(g=0;g<s[d].length;g+=1)typeof s[d][g]!="number"&&(r=!1);r===!0&&f.push([s[d][0]-1,s[d][1]-1].join(" "))}t[i].value="["+f.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var M,k=[];for(M in t)t[M].explicitSet===!0&&(t[M].type==="name"?k.push("/"+M+" /"+t[M].value):k.push("/"+M+" "+t[M].value));k.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+k.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(e){var n=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),f=unescape(encodeURIComponent("</x:xmpmeta>")),d=s.length+o.length+u.length+i.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+u+f),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",n)),this}}(kr.API),function(e){var n=e.API,t=n.pdfEscape16=function(s,o){for(var u,f=o.metadata.Unicode.widths,d=["","0","00","000","0000"],g=[""],y=0,x=s.length;y<x;++y){if(u=o.metadata.characterToGlyph(s.charCodeAt(y)),o.metadata.glyIdsUsed.push(u),o.metadata.toUnicode[u]=s.charCodeAt(y),f.indexOf(u)==-1&&(f.push(u),f.push([parseInt(o.metadata.widthOfGlyph(u),10)])),u=="0")return g.join("");u=u.toString(16),g.push(d[4-u.length],u)}return g.join("")},r=function(s){var o,u,f,d,g,y,x;for(g=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,f=[],y=0,x=(u=Object.keys(s).sort(function(_,M){return _-M})).length;y<x;y++)o=u[y],f.length>=100&&(g+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar`,f=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(d=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),f.push("<"+o+"><"+d+">"));return f.length&&(g+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar
`),g+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};n.events.push(["putFont",function(s){(function(o){var u=o.font,f=o.out,d=o.newObject,g=o.putStream;if(u.metadata instanceof e.API.TTFFont&&u.encoding==="Identity-H"){for(var y=u.metadata.Unicode.widths,x=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),_="",M=0;M<x.length;M++)_+=String.fromCharCode(x[M]);var k=d();g({data:_,addLength1:!0,objectId:k}),f("endobj");var N=d();g({data:r(u.metadata.toUnicode),addLength1:!0,objectId:N}),f("endobj");var T=d();f("<<"),f("/Type /FontDescriptor"),f("/FontName /"+$h(u.fontName)),f("/FontFile2 "+k+" 0 R"),f("/FontBBox "+e.API.PDFObject.convert(u.metadata.bbox)),f("/Flags "+u.metadata.flags),f("/StemV "+u.metadata.stemV),f("/ItalicAngle "+u.metadata.italicAngle),f("/Ascent "+u.metadata.ascender),f("/Descent "+u.metadata.decender),f("/CapHeight "+u.metadata.capHeight),f(">>"),f("endobj");var F=d();f("<<"),f("/Type /Font"),f("/BaseFont /"+$h(u.fontName)),f("/FontDescriptor "+T+" 0 R"),f("/W "+e.API.PDFObject.convert(y)),f("/CIDToGIDMap /Identity"),f("/DW 1000"),f("/Subtype /CIDFontType2"),f("/CIDSystemInfo"),f("<<"),f("/Supplement 0"),f("/Registry (Adobe)"),f("/Ordering ("+u.encoding+")"),f(">>"),f(">>"),f("endobj"),u.objectNumber=d(),f("<<"),f("/Type /Font"),f("/Subtype /Type0"),f("/ToUnicode "+N+" 0 R"),f("/BaseFont /"+$h(u.fontName)),f("/Encoding /"+u.encoding),f("/DescendantFonts ["+F+" 0 R]"),f(">>"),f("endobj"),u.isAlreadyPutted=!0}})(s)}]),n.events.push(["putFont",function(s){(function(o){var u=o.font,f=o.out,d=o.newObject,g=o.putStream;if(u.metadata instanceof e.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var y=u.metadata.rawData,x="",_=0;_<y.length;_++)x+=String.fromCharCode(y[_]);var M=d();g({data:x,addLength1:!0,objectId:M}),f("endobj");var k=d();g({data:r(u.metadata.toUnicode),addLength1:!0,objectId:k}),f("endobj");var N=d();f("<<"),f("/Descent "+u.metadata.decender),f("/CapHeight "+u.metadata.capHeight),f("/StemV "+u.metadata.stemV),f("/Type /FontDescriptor"),f("/FontFile2 "+M+" 0 R"),f("/Flags 96"),f("/FontBBox "+e.API.PDFObject.convert(u.metadata.bbox)),f("/FontName /"+$h(u.fontName)),f("/ItalicAngle "+u.metadata.italicAngle),f("/Ascent "+u.metadata.ascender),f(">>"),f("endobj"),u.objectNumber=d();for(var T=0;T<u.metadata.hmtx.widths.length;T++)u.metadata.hmtx.widths[T]=parseInt(u.metadata.hmtx.widths[T]*(1e3/u.metadata.head.unitsPerEm));f("<</Subtype/TrueType/Type/Font/ToUnicode "+k+" 0 R/BaseFont/"+$h(u.fontName)+"/FontDescriptor "+N+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),f("endobj"),u.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,u=s.text||"",f=s.x,d=s.y,g=s.options||{},y=s.mutex||{},x=y.pdfEscape,_=y.activeFontKey,M=y.fonts,k=_,N="",T=0,F="",K=M[k].encoding;if(M[k].encoding!=="Identity-H")return{text:u,x:f,y:d,options:g,mutex:y};for(F=u,k=_,Array.isArray(u)&&(F=u[0]),T=0;T<F.length;T+=1)M[k].metadata.hasOwnProperty("cmap")&&(o=M[k].metadata.cmap.unicode.codeMap[F[T].charCodeAt(0)]),o||F[T].charCodeAt(0)<256&&M[k].metadata.hasOwnProperty("Unicode")?N+=F[T]:N+="";var Q="";return parseInt(k.slice(1))<14||K==="WinAnsiEncoding"?Q=x(N,k).split("").map(function(he){return he.charCodeAt(0).toString(16)}).join(""):K==="Identity-H"&&(Q=t(N,M[k])),y.isHex=!0,{text:Q,x:f,y:d,options:g,mutex:y}};n.events.push(["postProcessText",function(s){var o=s.text||"",u=[],f={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?u.push([i(Object.assign({},f,{text:o[d][0]})).text,o[d][1],o[d][2]]):u.push(i(Object.assign({},f,{text:o[d]})).text);s.text=u}else s.text=i(Object.assign({},f,{text:o})).text}])}(kr),function(e){var n=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(t){return n.call(this),this.internal.vFS[t]!==void 0},e.addFileToVFS=function(t,r){return n.call(this),this.internal.vFS[t]=r,this},e.getFileFromVFS=function(t){return n.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(kr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var i,s,o,u,f,d,g,y=n,x=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],_=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],M={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},k={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},N=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],T=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),F=!1,K=0;this.__bidiEngine__={};var Q=function(R){var O=R.charCodeAt(),B=O>>8,z=k[B];return z!==void 0?y[256*z+(255&O)]:B===252||B===253?"AL":T.test(B)?"L":B===8?"R":"N"},he=function(R){for(var O,B=0;B<R.length;B++){if((O=Q(R.charAt(B)))==="L")return!1;if(O==="R")return!0}return!1},fe=function(R,O,B,z){var W,V,oe,ie,xe=O[z];switch(xe){case"L":case"R":F=!1;break;case"N":case"AN":break;case"EN":F&&(xe="AN");break;case"AL":F=!0,xe="R";break;case"WS":xe="N";break;case"CS":z<1||z+1>=O.length||(W=B[z-1])!=="EN"&&W!=="AN"||(V=O[z+1])!=="EN"&&V!=="AN"?xe="N":F&&(V="AN"),xe=V===W?V:"N";break;case"ES":xe=(W=z>0?B[z-1]:"B")==="EN"&&z+1<O.length&&O[z+1]==="EN"?"EN":"N";break;case"ET":if(z>0&&B[z-1]==="EN"){xe="EN";break}if(F){xe="N";break}for(oe=z+1,ie=O.length;oe<ie&&O[oe]==="ET";)oe++;xe=oe<ie&&O[oe]==="EN"?"EN":"N";break;case"NSM":if(o&&!u){for(ie=O.length,oe=z+1;oe<ie&&O[oe]==="NSM";)oe++;if(oe<ie){var Ee=R[z],Te=Ee>=1425&&Ee<=2303||Ee===64286;if(W=O[oe],Te&&(W==="R"||W==="AL")){xe="R";break}}}xe=z<1||(W=O[z-1])==="B"?"N":B[z-1];break;case"B":F=!1,i=!0,xe=K;break;case"S":s=!0,xe="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":F=!1;break;case"BN":xe="N"}return xe},me=function(R,O,B){var z=R.split("");return B&&G(z,B,{hiLevel:K}),z.reverse(),O&&O.reverse(),z.join("")},G=function(R,O,B){var z,W,V,oe,ie,xe=-1,Ee=R.length,Te=0,Y=[],q=K?_:x,ee=[];for(F=!1,i=!1,s=!1,W=0;W<Ee;W++)ee[W]=Q(R[W]);for(V=0;V<Ee;V++){if(ie=Te,Y[V]=fe(R,ee,Y,V),z=240&(Te=q[ie][M[Y[V]]]),Te&=15,O[V]=oe=q[Te][5],z>0)if(z===16){for(W=xe;W<V;W++)O[W]=1;xe=-1}else xe=-1;if(q[Te][6])xe===-1&&(xe=V);else if(xe>-1){for(W=xe;W<V;W++)O[W]=oe;xe=-1}ee[V]==="B"&&(O[V]=0),B.hiLevel|=oe}s&&function(ue,le,pe){for(var Z=0;Z<pe;Z++)if(ue[Z]==="S"){le[Z]=K;for(var D=Z-1;D>=0&&ue[D]==="WS";D--)le[D]=K}}(ee,O,Ee)},$=function(R,O,B,z,W){if(!(W.hiLevel<R)){if(R===1&&K===1&&!i)return O.reverse(),void(B&&B.reverse());for(var V,oe,ie,xe,Ee=O.length,Te=0;Te<Ee;){if(z[Te]>=R){for(ie=Te+1;ie<Ee&&z[ie]>=R;)ie++;for(xe=Te,oe=ie-1;xe<oe;xe++,oe--)V=O[xe],O[xe]=O[oe],O[oe]=V,B&&(V=B[xe],B[xe]=B[oe],B[oe]=V);Te=ie}Te++}}},X=function(R,O,B){var z=R.split(""),W={hiLevel:K};return B||(B=[]),G(z,B,W),function(V,oe,ie){if(ie.hiLevel!==0&&g)for(var xe,Ee=0;Ee<V.length;Ee++)oe[Ee]===1&&(xe=N.indexOf(V[Ee]))>=0&&(V[Ee]=N[xe+1])}(z,B,W),$(2,z,O,B,W),$(1,z,O,B,W),z.join("")};return this.__bidiEngine__.doBidiReorder=function(R,O,B){if(function(W,V){if(V)for(var oe=0;oe<W.length;oe++)V[oe]=oe;u===void 0&&(u=he(W)),d===void 0&&(d=he(W))}(R,O),o||!f||d)if(o&&f&&u^d)K=u?1:0,R=me(R,O,B);else if(!o&&f&&d)K=u?1:0,R=X(R,O,B),R=me(R,O);else if(!o||u||f||d){if(o&&!f&&u^d)R=me(R,O),u?(K=0,R=X(R,O,B)):(K=1,R=X(R,O,B),R=me(R,O));else if(o&&u&&!f&&d)K=1,R=X(R,O,B),R=me(R,O);else if(!o&&!f&&u^d){var z=g;u?(K=1,R=X(R,O,B),K=0,g=!1,R=X(R,O,B),g=z):(K=0,R=X(R,O,B),R=me(R,O),K=1,g=!1,R=X(R,O,B),g=z,R=me(R,O))}}else K=0,R=X(R,O,B);else K=u?1:0,R=X(R,O,B);return R},this.__bidiEngine__.setOptions=function(R){R&&(o=R.isInputVisual,f=R.isOutputVisual,u=R.isInputRtl,d=R.isOutputRtl,g=R.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var n=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var u=0;for(o=[],u=0;u<i.length;u+=1)Object.prototype.toString.call(i[u])==="[object Array]"?o.push([t.doBidiReorder(i[u][0]),i[u][1],i[u][2]]):o.push([t.doBidiReorder(i[u])]);r.text=o}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(kr),kr.API.TTFFont=function(){function e(n){var t;if(this.rawData=n,t=this.contents=new Mf(n),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new s9(this),this.registerTTF()}return e.open=function(n){return new e(n)},e.prototype.parse=function(){return this.directory=new qF(this.contents),this.head=new ZF(this),this.name=new QF(this),this.cmap=new Ix(this),this.toUnicode={},this.hhea=new KF(this),this.maxp=new e9(this),this.hmtx=new t9(this),this.post=new JF(this),this.os2=new YF(this),this.loca=new o9(this),this.glyf=new n9(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var n,t,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,u,f,d;for(d=[],o=0,u=(f=this.bbox).length;o<u;o++)n=f[o],d.push(Math.round(n*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(n){var t;return((t=this.cmap.unicode)!=null?t.codeMap[n]:void 0)||0},e.prototype.widthOfGlyph=function(n){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(n).advance*t},e.prototype.widthOfString=function(n,t,r){var i,s,o,u;for(o=0,s=0,u=(n=""+n).length;0<=u?s<u:s>u;s=0<=u?++s:--s)i=n.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return o*(t/1e3)},e.prototype.lineHeight=function(n,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*n},e}();var Ku,Mf=function(){function e(n){this.data=n??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(n){return this.data[this.pos++]=n},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(n){return this.writeByte(n>>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt32=function(){var n;return(n=this.readUInt32())>=2147483648?n-4294967296:n},e.prototype.writeInt32=function(n){return n<0&&(n+=4294967296),this.writeUInt32(n)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(n){return this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt16=function(){var n;return(n=this.readUInt16())>=32768?n-65536:n},e.prototype.writeInt16=function(n){return n<0&&(n+=65536),this.writeUInt16(n)},e.prototype.readString=function(n){var t,r;for(r=[],t=0;0<=n?t<n:t>n;t=0<=n?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(n){var t,r,i;for(i=[],t=0,r=n.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(n.charCodeAt(t)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(n){return this.writeInt16(n)},e.prototype.readLongLong=function(){var n,t,r,i,s,o,u,f;return n=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),u=this.readByte(),f=this.readByte(),128&n?-1*(72057594037927940*(255^n)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^u)+(255^f)+1):72057594037927940*n+281474976710656*t+1099511627776*r+4294967296*i+16777216*s+65536*o+256*u+f},e.prototype.writeLongLong=function(n){var t,r;return t=Math.floor(n/4294967296),r=4294967295&n,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(n){return this.writeInt32(n)},e.prototype.read=function(n){var t,r;for(t=[],r=0;0<=n?r<n:r>n;r=0<=n?++r:--r)t.push(this.readByte());return t},e.prototype.write=function(n){var t,r,i,s;for(s=[],r=0,i=n.length;r<i;r++)t=n[r],s.push(this.writeByte(t));return s},e}(),qF=function(){var e;function n(t){var r,i,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return n.prototype.encode=function(t){var r,i,s,o,u,f,d,g,y,x,_,M,k;for(k in _=Object.keys(t).length,f=Math.log(2),y=16*Math.floor(Math.log(_)/f),o=Math.floor(y/f),g=16*_-y,(i=new Mf).writeInt(this.scalarType),i.writeShort(_),i.writeShort(y),i.writeShort(o),i.writeShort(g),s=16*_,d=i.pos+s,u=null,M=[],t)for(x=t[k],i.writeString(k),i.writeInt(e(x)),i.writeInt(d),i.writeInt(x.length),M=M.concat(x),k==="head"&&(u=d),d+=x.length;d%4;)M.push(0),d++;return i.write(M),r=2981146554-e(i.data),i.pos=u+8,i.writeUInt32(r),i.data},e=function(t){var r,i,s,o;for(t=Ox.call(t);t.length%4;)t.push(0);for(s=new Mf(t),i=0,r=0,o=t.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},n}(),WF={}.hasOwnProperty,_c=function(e,n){for(var t in n)WF.call(n,t)&&(e[t]=n[t]);function r(){this.constructor=e}return r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype,e};Ku=function(){function e(n){var t;this.file=n,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var ZF=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,Ku),n.prototype.tag="head",n.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},n.prototype.encode=function(t){var r;return(r=new Mf).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},n}(),$b=function(){function e(n,t){var r,i,s,o,u,f,d,g,y,x,_,M,k,N,T,F,K;switch(this.platformID=n.readUInt16(),this.encodingID=n.readShort(),this.offset=t+n.readInt(),y=n.pos,n.pos=this.offset,this.format=n.readUInt16(),this.length=n.readUInt16(),this.language=n.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(f=0;f<256;++f)this.codeMap[f]=n.readByte();break;case 4:for(_=n.readUInt16(),x=_/2,n.pos+=6,s=function(){var Q,he;for(he=[],f=Q=0;0<=x?Q<x:Q>x;f=0<=x?++Q:--Q)he.push(n.readUInt16());return he}(),n.pos+=2,k=function(){var Q,he;for(he=[],f=Q=0;0<=x?Q<x:Q>x;f=0<=x?++Q:--Q)he.push(n.readUInt16());return he}(),d=function(){var Q,he;for(he=[],f=Q=0;0<=x?Q<x:Q>x;f=0<=x?++Q:--Q)he.push(n.readUInt16());return he}(),g=function(){var Q,he;for(he=[],f=Q=0;0<=x?Q<x:Q>x;f=0<=x?++Q:--Q)he.push(n.readUInt16());return he}(),i=(this.length-n.pos+this.offset)/2,u=function(){var Q,he;for(he=[],f=Q=0;0<=i?Q<i:Q>i;f=0<=i?++Q:--Q)he.push(n.readUInt16());return he}(),f=T=0,K=s.length;T<K;f=++T)for(N=s[f],r=F=M=k[f];M<=N?F<=N:F>=N;r=M<=N?++F:--F)g[f]===0?o=r+d[f]:(o=u[g[f]/2+(r-M)-(x-f)]||0)!==0&&(o+=d[f]),this.codeMap[r]=65535&o}n.pos=y}return e.encode=function(n,t){var r,i,s,o,u,f,d,g,y,x,_,M,k,N,T,F,K,Q,he,fe,me,G,$,X,R,O,B,z,W,V,oe,ie,xe,Ee,Te,Y,q,ee,ue,le,pe,Z,D,ke,Me,Ge;switch(z=new Mf,o=Object.keys(n).sort(function(ce,ne){return ce-ne}),t){case"macroman":for(k=0,N=function(){var ce=[];for(M=0;M<256;++M)ce.push(0);return ce}(),F={0:0},s={},W=0,xe=o.length;W<xe;W++)F[D=n[i=o[W]]]==null&&(F[D]=++k),s[i]={old:n[i],new:F[n[i]]},N[i]=F[n[i]];return z.writeUInt16(1),z.writeUInt16(0),z.writeUInt32(12),z.writeUInt16(0),z.writeUInt16(262),z.writeUInt16(0),z.write(N),{charMap:s,subtable:z.data,maxGlyphID:k+1};case"unicode":for(O=[],y=[],K=0,F={},r={},T=d=null,V=0,Ee=o.length;V<Ee;V++)F[he=n[i=o[V]]]==null&&(F[he]=++K),r[i]={old:he,new:F[he]},u=F[he]-i,T!=null&&u===d||(T&&y.push(T),O.push(i),d=u),T=i;for(T&&y.push(T),y.push(65535),O.push(65535),X=2*($=O.length),G=2*Math.pow(Math.log($)/Math.LN2,2),x=Math.log(G/2)/Math.LN2,me=2*$-G,f=[],fe=[],_=[],M=oe=0,Te=O.length;oe<Te;M=++oe){if(R=O[M],g=y[M],R===65535){f.push(0),fe.push(0);break}if(R-(B=r[R].new)>=32768)for(f.push(0),fe.push(2*(_.length+$-M)),i=ie=R;R<=g?ie<=g:ie>=g;i=R<=g?++ie:--ie)_.push(r[i].new);else f.push(B-R),fe.push(0)}for(z.writeUInt16(3),z.writeUInt16(1),z.writeUInt32(12),z.writeUInt16(4),z.writeUInt16(16+8*$+2*_.length),z.writeUInt16(0),z.writeUInt16(X),z.writeUInt16(G),z.writeUInt16(x),z.writeUInt16(me),pe=0,Y=y.length;pe<Y;pe++)i=y[pe],z.writeUInt16(i);for(z.writeUInt16(0),Z=0,q=O.length;Z<q;Z++)i=O[Z],z.writeUInt16(i);for(ke=0,ee=f.length;ke<ee;ke++)u=f[ke],z.writeUInt16(u);for(Me=0,ue=fe.length;Me<ue;Me++)Q=fe[Me],z.writeUInt16(Q);for(Ge=0,le=_.length;Ge<le;Ge++)k=_[Ge],z.writeUInt16(k);return{charMap:r,subtable:z.data,maxGlyphID:K+1}}},e}(),Ix=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,Ku),n.prototype.tag="cmap",n.prototype.parse=function(t){var r,i,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new $b(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},n.encode=function(t,r){var i,s;return r==null&&(r="macroman"),i=$b.encode(t,r),(s=new Mf).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},n}(),KF=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,Ku),n.prototype.tag="hhea",n.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},n}(),YF=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,Ku),n.prototype.tag="OS/2",n.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},n}(),JF=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,Ku),n.prototype.tag="post",n.prototype.parse=function(t){var r,i,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var o;for(i=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=(function(){var u,f,d;for(d=[],o=u=0,f=this.file.maxp.numGlyphs;0<=f?u<f:u>f;o=0<=f?++u:--u)d.push(t.readUInt32());return d}).call(this)}},n}(),XF=function(e,n){this.raw=e,this.length=e.length,this.platformID=n.platformID,this.encodingID=n.encodingID,this.languageID=n.languageID},QF=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,Ku),n.prototype.tag="name",n.prototype.parse=function(t){var r,i,s,o,u,f,d,g,y,x,_;for(t.pos=this.offset,t.readShort(),r=t.readShort(),f=t.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+f+t.readShort()});for(d={},o=y=0,x=i.length;y<x;o=++y)s=i[o],t.pos=s.offset,g=t.readString(s.length),u=new XF(g,s),d[_=s.nameID]==null&&(d[_]=[]),d[s.nameID].push(u);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},n}(),e9=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,Ku),n.prototype.tag="maxp",n.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},n}(),t9=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,Ku),n.prototype.tag="hmtx",n.prototype.parse=function(t){var r,i,s,o,u,f,d;for(t.pos=this.offset,this.metrics=[],r=0,f=this.file.hhea.numberOfMetrics;0<=f?r<f:r>f;r=0<=f?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var g,y;for(y=[],r=g=0;0<=s?g<s:g>s;r=0<=s?++g:--g)y.push(t.readInt16());return y}(),this.widths=(function(){var g,y,x,_;for(_=[],g=0,y=(x=this.metrics).length;g<y;g++)o=x[g],_.push(o.advance);return _}).call(this),i=this.widths[this.widths.length-1],d=[],r=u=0;0<=s?u<s:u>s;r=0<=s?++u:--u)d.push(this.widths.push(i));return d},n.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},n}(),Ox=[].slice,n9=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,Ku),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(t){var r,i,s,o,u,f,d,g,y,x;return t in this.cache?this.cache[t]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(t),(s=o.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,u=(f=new Mf(r.read(s))).readShort(),g=f.readShort(),x=f.readShort(),d=f.readShort(),y=f.readShort(),this.cache[t]=u===-1?new i9(f,g,x,d,y):new r9(f,u,g,x,d,y),this.cache[t]))},n.prototype.encode=function(t,r,i){var s,o,u,f,d;for(u=[],o=[],f=0,d=r.length;f<d;f++)s=t[r[f]],o.push(u.length),s&&(u=u.concat(s.encode(i)));return o.push(u.length),{table:u,offsets:o}},n}(),r9=function(){function e(n,t,r,i,s,o){this.raw=n,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),i9=function(){function e(n,t,r,i,s){var o,u;for(this.raw=n,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;u=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&u;)o.pos+=1&u?4:2,128&u?o.pos+=8:64&u?o.pos+=4:8&u&&(o.pos+=2)}return e.prototype.encode=function(){var n,t,r;for(t=new Mf(Ox.call(this.raw.data)),n=0,r=this.glyphIDs.length;n<r;++n)t.pos=this.glyphOffsets[n];return t.data},e}(),o9=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,Ku),n.prototype.tag="loca",n.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*t.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(t.readUInt32());return o}).call(this)},n.prototype.indexOf=function(t){return this.offsets[t]},n.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},n.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,u=0;u<i.length;++u)if(i[u]=s,o<r.length&&r[o]==u){++o,i[u]=s;var f=this.offsets[u],d=this.offsets[u+1]-f;d>0&&(s+=d)}for(var g=new Array(4*i.length),y=0;y<i.length;++y)g[4*y+3]=255&i[y],g[4*y+2]=(65280&i[y])>>8,g[4*y+1]=(16711680&i[y])>>16,g[4*y]=(4278190080&i[y])>>24;return g},n}(),s9=function(){function e(n){this.font=n,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var n,t,r,i,s;for(t in i=this.font.cmap.tables[0].codeMap,n={},s=this.subset)r=s[t],n[t]=i[r];return n},e.prototype.glyphsFor=function(n){var t,r,i,s,o,u,f;for(i={},o=0,u=n.length;o<u;o++)i[s=n[o]]=this.font.glyf.glyphFor(s);for(s in t=[],i)(r=i[s])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(s in f=this.glyphsFor(t))r=f[s],i[s]=r;return i},e.prototype.encode=function(n,t){var r,i,s,o,u,f,d,g,y,x,_,M,k,N,T;for(i in r=Ix.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(n),_={0:0},T=r.charMap)_[(f=T[i]).old]=f.new;for(M in x=r.maxGlyphID,o)M in _||(_[M]=x++);return g=function(F){var K,Q;for(K in Q={},F)Q[F[K]]=K;return Q}(_),y=Object.keys(g).sort(function(F,K){return F-K}),k=function(){var F,K,Q;for(Q=[],F=0,K=y.length;F<K;F++)u=y[F],Q.push(g[u]);return Q}(),s=this.font.glyf.encode(o,k,_),d=this.font.loca.encode(s.offsets,k),N={cmap:this.font.cmap.raw(),glyf:s.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(N["OS/2"]=this.font.os2.raw()),this.font.directory.encode(N)},e}();kr.API.PDFObject=function(){var e;function n(){}return e=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},n.convert=function(t){var r,i,s,o;if(Array.isArray(t))return"["+function(){var u,f,d;for(d=[],u=0,f=t.length;u<f;u++)r=t[u],d.push(n.convert(r));return d}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+e(t.getUTCFullYear(),4)+e(t.getUTCMonth(),2)+e(t.getUTCDate(),2)+e(t.getUTCHours(),2)+e(t.getUTCMinutes(),2)+e(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in s=["<<"],t)o=t[i],s.push("/"+i+" "+n.convert(o));return s.push(">>"),s.join(`
`)}return""+t},n}();const a9={class:"h-full flex"},l9={class:"flex-1 relative"},u9={key:0,class:"absolute inset-0 bg-black/30 backdrop-blur-sm z-[2000] flex items-center justify-center"},c9={key:1,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[3000]"},f9={class:"text-center max-w-lg mx-auto p-8"},h9={class:"space-y-4"},d9={class:"map-parent"},p9={key:0,class:"fixed left-0 right-0 z-[1500]",style:{top:"var(--header-height)"}},g9={class:"map-content flex flex-col md:flex-row relative"},m9={class:"flex-1 relative"},v9={key:1,class:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 z-50"},y9={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center z-[9999] p-4 overflow-y-auto"},_9={class:"bg-white rounded-lg p-6 max-w-2xl w-full my-8 relative"},b9={class:"flex justify-between items-center mb-4 sticky top-0 bg-white pb-4 border-b"},w9={class:"overflow-y-auto max-h-[calc(100vh-12rem)]"},x9={key:0,class:"space-y-4"},L9={key:0,class:"space-y-2"},S9={class:"grid grid-cols-1 gap-2"},C9=["onClick"],E9={class:"font-medium text-gray-900"},P9={key:1,class:"space-y-2"},M9={class:"flex items-center mb-4"},A9={class:"text-sm text-gray-600"},k9={class:"grid grid-cols-1 gap-2"},T9=["onClick"],N9={class:"font-medium text-gray-900"},D9={key:2,class:"space-y-2"},I9={class:"flex items-center mb-4"},O9={class:"text-sm text-gray-600"},B9={class:"grid grid-cols-1 gap-2"},R9={key:0,class:"text-center py-8"},F9=["onClick"],j9={class:"font-medium text-gray-900"},z9={key:3,class:"space-y-2"},$9={class:"flex items-center mb-4"},U9={class:"text-sm text-gray-600"},V9={class:"grid grid-cols-1 gap-2"},G9=["onClick"],H9={class:"font-medium text-gray-900"},q9={class:"text-sm text-gray-500"},W9={class:"text-xs text-gray-400 mt-1"},Z9={key:1,class:"space-y-4"},K9={key:0,class:"space-y-2"},Y9={class:"grid grid-cols-1 gap-2"},J9={key:0,class:"text-center py-8"},X9=["onClick"],Q9={class:"font-medium text-gray-900"},ej={key:1,class:"space-y-2"},tj={class:"flex items-center mb-4"},nj={class:"text-sm text-gray-600"},rj={class:"grid grid-cols-1 gap-2"},ij=["onClick"],oj={class:"font-medium text-gray-900"},sj={class:"text-sm text-gray-500"},aj={class:"text-xs text-gray-400 mt-1"},lj={key:2,class:"space-y-4"},uj={key:3,class:"space-y-4"},cj={key:0,class:"text-center py-8"},fj={key:1,class:"space-y-2"},hj=["onClick"],dj={class:"font-medium text-gray-900"},pj={class:"text-sm text-gray-500"},gj={class:"text-xs text-gray-400 mt-1"},Ub=cs({__name:"MapView",emits:["shape-selected"],setup(e,{emit:n}){const t=jt(null),r=jt(!1),i=py(),s=ud(),o=Fp(),u=Vu(),f=jt([]),{currentTool:d,selectedShape:g,map:y,initMap:x,setDrawingTool:_,updateShapeStyle:M,updateShapeProperties:k,featureGroup:N,adjustView:T,clearActiveControlPoints:F,calculateConnectedCoverageArea:K}=zR(),{initMap:Q,changeBaseMap:he}=$R(),fe=jt(!1),me=jt(!1),G=jt(!1),$=jt(null),X=jt(null),R=jt(!1),O=jt(null),B=ma(),z=jt([]),W=jt([]),V=jt([]),oe=jt(null),ie=jt(null),xe=jt(null),Ee=jt(!1),Te=jt(!1),Y=jt(!1),q=jt(null),ee=cr(()=>{var at,We;return console.log("[MapView][filteredClients] Computing with:",{userType:(at=B.user)==null?void 0:at.user_type,selectedSalarie:oe.value,salarieVisiteurs:W.value,visiteurCount:((We=W.value)==null?void 0:We.length)||0}),B.isSalarie||oe.value?W.value:[]}),ue=cr(()=>{var Zn,qt,gn;if(!g.value)return null;console.log("[MapView][selectedShape] Initial layer state:",{layer:g.value,hasName:"name"in g.value,name:g.value.name,hasProperties:"properties"in g.value,propertiesName:(Zn=g.value.properties)==null?void 0:Zn.name,allLayerKeys:Object.keys(g.value),allPropertiesKeys:g.value.properties?Object.keys(g.value.properties):[],_leaflet_id:g.value._leaflet_id,_dbId:g.value._dbId,descriptor:Object.getOwnPropertyDescriptor(g.value,"name")});const at=g.value.properties||{};let We="unknown";at.type?We=at.type:g.value instanceof Ft.Circle?We="Circle":g.value instanceof pa||g.value instanceof Ft.Rectangle?We="Rectangle":g.value instanceof gf||g.value instanceof Ft.Polygon?We="Polygon":g.value instanceof Ef?We="ElevationLine":(g.value instanceof Ns||g.value instanceof Ft.Polyline&&!(g.value instanceof Ft.Polygon))&&(We="Line"),console.log(`[MapView][selectedShape] Type de forme dtect: ${We}`),at.type||(g.value.properties||(g.value.properties={}),g.value.properties.type=We);let Ot;if(at.style&&at.style.name)Ot=at.style.name,console.log("[MapView][selectedShape] Using name from style:",Ot);else if(at.name)Ot=at.name,console.log("[MapView][selectedShape] Using name from properties:",Ot);else if(g.value.name)Ot=g.value.name,console.log("[MapView][selectedShape] Using name from layer:",Ot);else{const Rt=Object.getOwnPropertyDescriptor(g.value,"name");Rt&&Rt.value&&(Ot=Rt.value,console.log("[MapView][selectedShape] Found name in non-enumerable layer property:",Ot));const Kt=["_name","displayName","title"];for(const Ln of Kt)if(g.value[Ln]){Ot=g.value[Ln],console.log(`[MapView][selectedShape] Found name in ${Ln}:`,Ot);break}}Ot&&(console.log(`[MapView][selectedShape] Ensuring name "${Ot}" is set everywhere`),g.value.properties||(g.value.properties={}),g.value.properties.name=Ot,g.value.properties.style||(g.value.properties.style={}),g.value.properties.style.name=Ot,g.value.name=Ot,typeof g.value.setName=="function"&&(g.value.setName(Ot),console.log(`[MapView][selectedShape] Used setName method to set name "${Ot}"`))),g.value.properties.category||(g.value.properties.category="forages"),g.value.properties.accessLevel||(g.value.properties.accessLevel="visitor"),console.log("[MapView][selectedShape] Preparing properties for DrawingTools:",{type:We,name:at.name,foundName:Ot,hasNameProperty:"name"in at,allPropertiesKeys:Object.keys(at),layerId:g.value._leaflet_id,rawProperties:at,layerName:g.value.name,layerPropertiesName:(qt=g.value.properties)==null?void 0:qt.name});const En={...at,type:We,name:Ot||g.value.name||at.name||void 0,category:g.value.properties.category||"forages",accessLevel:g.value.properties.accessLevel||"visitor"},Jn={type:We,properties:En,layer:g.value,options:g.value.options||{}};return console.log("[MapView][selectedShape] Final shape object for DrawingTools:",{type:Jn.type,hasName:"name"in Jn.properties,name:Jn.properties.name,layerName:Jn.layer.name,layerPropertiesName:(gn=Jn.layer.properties)==null?void 0:gn.name}),Jn});function le(at){const We=at.getCenter(),Ot=at.getZoom(),En={lat:We.lat,lng:We.lng,zoom:Ot};document.cookie=`mapState=${JSON.stringify(En)};max-age=2592000;path=/`}function pe(){const We=document.cookie.split(";").find(Ot=>Ot.trim().startsWith("mapState="));if(We)try{return JSON.parse(We.split("=")[1])}catch(Ot){return console.error("Erreur lors de la lecture du cookie de position:",Ot),null}return null}Is(async()=>{var at,We;console.log("[MapView][onMounted] Initialisation du composant MapView"),console.log("[MapView][onMounted] tat initial des filtres dans le store:",JSON.stringify({accessLevels:{...s.filters.accessLevels},categories:{...s.filters.categories},shapeTypes:{...s.filters.shapeTypes}},null,2));try{if(await i.fetchPlans(),(B.isAdmin||B.isEntreprise)&&await rt(),B.isEntreprise){Ee.value=!0;try{const Rt=await Rn.get("/users/",{params:{role:"SALARIE",entreprise:(at=B.user)==null?void 0:at.id}});z.value=Rt.data}catch(Rt){console.error("Error loading salaries:",Rt),z.value=[]}finally{Ee.value=!1}}if(B.isSalarie){Te.value=!0;try{const Rt=await B.fetchSalarieVisiteurs(((We=B.user)==null?void 0:We.id)||0);W.value=Array.isArray(Rt)?Rt:[Rt]}catch(Rt){console.error("Error loading clients:",Rt)}finally{Te.value=!1}}const Ot=pe(),En=Ot?[Ot.lat,Ot.lng]:[46.603354,1.888334],Jn=(Ot==null?void 0:Ot.zoom)??6;if(t.value&&!y.value){const Rt=x(t.value,En,Jn);Rt.pm.setLang("fr"),Rt.pm.addControls({rotateMode:!1}),Q(Rt),Rt.on("moveend",()=>{le(Rt)}),window.addEventListener("map-set-location",Kt=>{if(Rt&&Kt.detail){const{lat:Ln,lng:mr,zoom:lt}=Kt.detail;Rt.flyTo([Ln,mr],lt,{duration:1.5,easeLinearity:.25})}}),N.value&&(N.value.on("layeradd",Kt=>{const Ln=Kt.layer;Ln&&Ln._leaflet_id&&f.value.findIndex(lt=>lt.layer&&lt.layer._leaflet_id===Ln._leaflet_id)===-1&&(console.log(`[MapView][featureGroup.layeradd] Ajout de la couche ${Ln._leaflet_id}  shapes.value`),f.value.push({layer:Ln,id:Ln._dbId||Ln._leaflet_id}))}),N.value.on("layerremove",Kt=>{const Ln=Kt.layer;Ln&&Ln._leaflet_id&&console.log(`[MapView][featureGroup.layerremove] Couche ${Ln._leaflet_id} supprime du featureGroup mais conserve dans shapes.value`)}))}const Zn=localStorage.getItem("lastPlanId");if(Zn)try{console.log("[MapView][onMounted] Chargement immdiat du dernier plan:",Zn),await Ge(parseInt(Zn));const Rt=document.querySelector(".map-parent");Rt instanceof HTMLElement&&(Rt.style.display="block")}catch(Rt){console.error("[MapView][onMounted] Erreur chargement dernier plan:",Rt),$.value=null,i.clearCurrentPlan(),s.clearCurrentPlan(),ke(),localStorage.removeItem("lastPlanId")}else console.log("[MapView][onMounted] Aucun dernier plan  charger"),$.value=null,i.clearCurrentPlan(),s.clearCurrentPlan(),ke();window.addEventListener("shape:created",Rt=>{const{shape:Kt,type:Ln,properties:mr}=Rt.detail;console.log("[MapView] Nouvelle forme cre",{shape:Kt,type:Ln,properties:mr}),s.addElement(Kt),_("")}),window.addEventListener("geonote:savePlan",()=>{console.log("[MapView] vnement geonote:savePlan reu - Sauvegarde automatique du plan"),ce()}),window.addEventListener("categoriesReactivated",Rt=>{console.log("[MapView][categoriesReactivated] vnement reu:",Rt.detail),Mn()}),window.addEventListener("shapeTypesReactivated",Rt=>{console.log("[MapView][shapeTypesReactivated] vnement reu:",Rt.detail),Mn()});const qt=Rt=>{if(console.log("[MapView] dition de note via Leaflet",Rt),console.log("[MapView] Type de e:",typeof Rt,"Contenu de e:",JSON.stringify(Rt)),!Rt||!Rt.note){console.error("[MapView] Erreur: e.note est undefined ou null",Rt);return}const Kt=Rt.note;console.log("[MapView] Note  diter:",Kt),X.value={id:Kt.id,title:Kt.title||Kt.name,description:Kt.description,location:Kt.location,columnId:Kt.columnId||o.getDefaultColumn.id,accessLevel:Kt.accessLevel,style:Kt.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:Kt.createdAt||new Date().toISOString(),updatedAt:Kt.updatedAt||new Date().toISOString(),comments:Kt.comments||[],photos:Kt.photos||[]},console.log("[MapView] editingMapNote.value aprs conversion:",X.value),G.value=!0,console.log("[MapView] showNoteEditModal.value:",G.value)},gn=Rt=>{if(console.log("[MapView] dition de note via vnement global",Rt),!Rt.detail||!Rt.detail.note){console.error("[MapView] Erreur: event.detail.note est undefined ou null",Rt);return}const Kt=Rt.detail.note;console.log("[MapView] Note  diter (global):",Kt),X.value={id:Kt.id,title:Kt.title||Kt.name,description:Kt.description,location:Kt.location,columnId:Kt.columnId||o.getDefaultColumn.id,accessLevel:Kt.accessLevel,style:Kt.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:Kt.createdAt||new Date().toISOString(),updatedAt:Kt.updatedAt||new Date().toISOString(),comments:Kt.comments||[],photos:Kt.photos||[]},G.value=!0};window.addEventListener("geonote:edit",gn),N.value&&(N.value.off("note:edit"),N.value.on("note:edit",qt))}catch(Ot){console.error("Error during component mount:",Ot),$.value=null,i.clearCurrentPlan(),s.clearCurrentPlan(),ke(),localStorage.removeItem("lastPlanId")}}),Co(()=>s.hasUnsavedChanges,at=>{console.log("[MapView][watch drawingStore.hasUnsavedChanges]",at),at&&$.value&&i.markUnsavedChanges()}),Co(()=>s.filters,(at,We)=>{if(console.log("[MapView][watch drawingStore.filters] Changement de filtres dtect:",JSON.stringify(at,null,2)),We){const Ot=JSON.stringify(We.accessLevels)!==JSON.stringify(at.accessLevels),En=JSON.stringify(We.categories)!==JSON.stringify(at.categories),Jn=JSON.stringify(We.shapeTypes)!==JSON.stringify(at.shapeTypes);console.log("[MapView][watch drawingStore.filters] Changements dtects:",{accessLevelsChanged:Ot,categoriesChanged:En,shapeTypesChanged:Jn}),Ot||En||Jn?(console.log("[MapView][watch drawingStore.filters] Mise  jour de l'affichage suite au changement de filtres"),Mn()):console.log("[MapView][watch drawingStore.filters] Aucun changement rel, pas de mise  jour")}else console.log("[MapView][watch drawingStore.filters] Mise  jour de l'affichage suite au changement de filtres"),Mn()},{deep:!0});const Z=at=>{console.log("[MapView][filtersChanged] vnement reu:",at.detail),Mn()};Is(()=>{window.addEventListener("filtersChanged",Z)}),mc(()=>{window.removeEventListener("filtersChanged",Z),console.log("[MapView][filtersChanged] vnement dsactiv")}),Co(()=>s.getFilteredElements,(at,We)=>{console.log("[MapView][watch drawingStore.getFilteredElements] Mise  jour de l'affichage, lments filtrs:",{nouveaux:at.length,anciens:We?We.length:"aucun",ids:at.map(Ot=>Ot.id)}),console.log("[MapView][watch drawingStore.getFilteredElements] Mise  jour de l'affichage suite au changement d'elements filtrs"),Mn()},{deep:!0}),Co(y,async at=>{var We;console.log(`
[MapView][watch map] Nouvelle carte:`,!!at),at&&i.currentPlan&&!((We=N.value)!=null&&We.getLayers().length)&&(console.log("[MapView][watch map] Chargement initial des lments du plan:",i.currentPlan.id),ke(),await s.loadPlanElements(i.currentPlan.id))}),Co(()=>i.currentPlan,async(at,We)=>{var Ot,En,Jn;if((at==null?void 0:at.id)===(We==null?void 0:We.id)){console.log("[MapView][watch currentPlan] Plan identique, pas de rechargement ncessaire");return}console.log(`
[MapView][watch currentPlan] ====== CHANGEMENT DE PLAN ======`),console.log("[MapView][watch currentPlan] Nouveau plan:",at==null?void 0:at.id);try{if(at){console.log("[MapView][watch currentPlan] Mise  jour du plan courant..."),$.value=at;const Zn=document.querySelector(".map-parent");Zn instanceof HTMLElement&&(Zn.style.display="block"),console.log("[MapView][watch currentPlan] Plan mis  jour avec succs")}else{console.log("[MapView][watch currentPlan] Nettoyage du plan courant..."),$.value=null,ke();const Zn=document.querySelector(".map-parent");Zn instanceof HTMLElement&&(Zn.style.display="none")}}catch(Zn){console.error("[MapView][watch currentPlan] ERREUR:",Zn),$.value=null,ke()}console.log("[MapView][watch currentPlan] tat final:",{currentPlanId:(Ot=$.value)==null?void 0:Ot.id,storePlanId:(En=i.currentPlan)==null?void 0:En.id,mapVisible:y.value!==null,mapParentDisplay:(Jn=document.querySelector(".map-parent"))==null?void 0:Jn.getAttribute("style")}),console.log(`[MapView][watch currentPlan] ====== FIN CHANGEMENT ======
`)},{immediate:!0}),ch(()=>{y.value&&y.value.off("moveend"),window.removeEventListener("shape:created",()=>{})});function D(){r.value=!r.value}function ke(){N.value&&(N.value.eachLayer(at=>{var We;((We=at.properties)==null?void 0:We.type)==="Note"&&typeof at.resetPlanSaveState=="function"&&at.resetPlanSaveState()}),N.value.clearLayers()),f.value=[],F(),g.value=null,d.value=""}async function Me(at){return await dn.measureAsync("refreshMapWithPlan",async()=>{try{dn.measure("refreshMapWithPlan:clearMap",()=>{ke()},"MapView"),await dn.measureAsync("refreshMapWithPlan:loadPlanElements",async()=>{await s.loadPlanElements(at)},"MapView");const We=dn.measure("refreshMapWithPlan:getPlanById",()=>i.getPlanById(at),"MapView");We?(dn.measure("refreshMapWithPlan:updateCurrentPlan",()=>{$.value=We,i.setCurrentPlan(We),s.setCurrentPlan(We.id),localStorage.setItem("lastPlanId",We.id.toString())},"MapView"),y.value&&N.value&&await dn.measureAsync("refreshMapWithPlan:addShapesToMap",async()=>{console.log("[MapView][refreshMapWithPlan] lments disponibles:",{count:s.getCurrentElements.length,elements:s.getCurrentElements.map(Zn=>{var qt;return{id:Zn.id,type:Zn.type_forme,hasName:Zn.data&&"name"in Zn.data,name:(qt=Zn.data)==null?void 0:qt.name}})});const Ot=s.getCurrentElements.reduce((Zn,qt)=>(Zn[qt.type_forme]||(Zn[qt.type_forme]=[]),Zn[qt.type_forme].push(qt),Zn),{}),En=10,Jn=Object.entries(Ot).map(async([Zn,qt])=>{for(let gn=0;gn<qt.length;gn+=En){const Rt=qt.slice(gn,gn+En);await Promise.all(Rt.map(async Kt=>{await dn.measureAsync(`refreshMapWithPlan:createElement:${Kt.type_forme}`,async()=>{var mr;if(!N.value||!Kt.data)return;let Ln=null;switch(Kt.type_forme){case"Circle":{const lt=Kt.data;lt.center&&lt.radius&&(Ln=new jh(Ft.latLng(lt.center[1],lt.center[0]),{...lt.style,radius:lt.radius}),lt.name&&(Ln.properties={type:"Circle",name:lt.name,style:lt.style,radius:lt.radius,diameter:lt.radius*2,surface:Math.PI*lt.radius*lt.radius,perimeter:2*Math.PI*lt.radius},Ln.name=lt.name));break}case"Rectangle":{const lt=Kt.data;if(lt.bounds){const Cn=Ft.latLngBounds(Ft.latLng(lt.bounds.southWest[1],lt.bounds.southWest[0]),Ft.latLng(lt.bounds.northEast[1],lt.bounds.northEast[0]));Ln=new pa(Cn,lt.style),lt.name&&(Ln.properties={name:lt.name},Ln.name=lt.name)}break}case"Polygon":{const lt=Kt.data;if(lt.points&&lt.points.length>0){const Cn=lt.points.map(Lr=>Ft.latLng(Lr[1],Lr[0]));Ln=new gf(Cn,lt.style),lt.name&&(Ln.properties={name:lt.name},Ln.name=lt.name)}break}case"Line":{const lt=Kt.data;if(lt.points&&lt.points.length>0){const Cn=lt.points.map(Lr=>Ft.latLng(Lr[1],Lr[0]));Ln=new Ns(Cn,lt.style),lt.name&&(Ln.properties={name:lt.name},Ln.name=lt.name)}break}case"ElevationLine":{const lt=Kt.data;if(lt.points&&lt.points.length>0){const Cn=lt.points.map(Lr=>Ft.latLng(Lr[1],Lr[0]));Ln=new Ef(Cn,lt.style),lt.name&&(Ln.properties={name:lt.name,type:"ElevationLine",elevationData:lt.elevationData,minElevation:lt.minElevation,maxElevation:lt.maxElevation,elevationGain:lt.elevationGain,elevationLoss:lt.elevationLoss,averageSlope:lt.averageSlope,maxSlope:lt.maxSlope},Ln.name=lt.name),lt.elevationData&&(Ln.elevationData=lt.elevationData)}break}case"Note":{console.log("[MapView][refreshMapWithPlan] Cration d'une note:",Kt.data);const lt=Kt.data;if(lt.location&&Array.isArray(lt.location)&&lt.location.length===2)try{lt.category||(lt.category="forages",console.log("[MapView][refreshMapWithPlan] Catgorie par dfaut ajoute:",lt.category)),lt.accessLevel||(lt.accessLevel="private",console.log("[MapView][refreshMapWithPlan] Niveau d'accs par dfaut ajout:",lt.accessLevel));const Cn=mf.fromBackendData(lt);Cn._dbId=Kt.id,Ln=Cn,console.log("[MapView][refreshMapWithPlan] Note cre:",{id:Kt.id,location:lt.location,name:lt.name,category:lt.category,accessLevel:lt.accessLevel,type:Cn.properties.type})}catch(Cn){console.error("[MapView][refreshMapWithPlan] Erreur lors de la cration de la Note:",Cn)}else console.error("[MapView][refreshMapWithPlan] Donnes invalides pour Note:",lt);break}}Ln&&(Ln._dbId=Kt.id,(mr=N.value)==null||mr.addLayer(Ln),f.value.push({id:Kt.id,type:Kt.type_forme,layer:Ln,properties:Ln.properties}))},"MapView")})),await new Promise(Kt=>setTimeout(Kt,0))}});await Promise.all(Jn),dn.measure("refreshMapWithPlan:adjustView",()=>{T()},"MapView")},"MapView"),console.log(`Plan ${at} charg avec succs avec ${s.getCurrentElements.length} formes`)):console.error(`Plan ${at} introuvable aprs chargement`),me.value=!1}catch(We){throw console.error("Erreur lors du rafrachissement de la carte:",We),We}},"MapView")}async function Ge(at){return await dn.measureAsync("loadPlan",async()=>{var We;console.log(`
[MapView][loadPlan] ====== DBUT CHARGEMENT PLAN ======`),console.log("[MapView][loadPlan] Tentative de chargement du plan:",at);try{const Ot=await dn.measureAsync("loadPlan:getPlanFromStore",async()=>i.getPlanById(at),"MapView");if(console.log("[MapView][loadPlan] Plan trouv dans le store:",!!Ot),!Ot){console.log("[MapView][loadPlan] Plan non trouv dans le store, vrification API...");try{await dn.measureAsync("loadPlan:apiCheck",async()=>{await Rn.get(`/plans/${at}/`)},"MapView")}catch(En){throw((We=En.response)==null?void 0:We.status)===404&&(console.warn("[MapView][loadPlan] Plan non trouv - Nettoyage du localStorage"),localStorage.removeItem("lastPlanId"),$.value=null,i.clearCurrentPlan(),s.clearCurrentPlan(),ke()),En}}console.log("[MapView][loadPlan] Rafrachissement de la carte..."),await dn.measureAsync("loadPlan:refreshMap",async()=>{await Me(at)},"MapView"),me.value=!1,console.log("[MapView][loadPlan] Invalidation de la taille de la carte..."),At(),console.log("[MapView][loadPlan] Plan charg avec succs:",{planId:at,elementsCount:s.getCurrentElements.length})}catch(Ot){throw console.error("Erreur lors du chargement du plan:",Ot),dn.measure("loadPlan:errorRecovery",()=>{$.value=null,i.clearCurrentPlan(),s.clearCurrentPlan(),ke(),localStorage.removeItem("lastPlanId")},"MapView"),Ot}},"MapView")}async function ce(){var at;if(!$.value||!N.value){console.warn("Aucun plan actif ou groupe de formes  sauvegarder");return}R.value=!0,O.value="saving";try{const We=[],Ot=new Set(s.getCurrentElements.filter(qt=>qt.id!==void 0).map(qt=>qt.id)),En=new Set;console.log("[savePlan] Dbut de la sauvegarde",{featureGroupLayers:N.value.getLayers().length,existingIds:Array.from(Ot),currentElements:s.getCurrentElements}),N.value.eachLayer(qt=>{var Ln,mr,lt,Cn,Lr,Ii,Fr,Pr,lr,Hr,ir,Or,jr,on,ji,_i,gi,Kr,Br;console.log("[savePlan] Traitement de la couche",{type:(Ln=qt.properties)==null?void 0:Ln.type,name:(mr=qt.properties)==null?void 0:mr.name,isPolygon:qt instanceof Ft.Polygon,properties:qt.properties});let gn,Rt;const Kt={color:qt.options.color||"#2b6451",weight:qt.options.weight||3,opacity:qt.options.opacity||1,fillColor:qt.options.fillColor||"#2b6451",fillOpacity:qt.options.fillOpacity||.2,dashArray:qt.options.dashArray||""};if(qt instanceof pa){gn="Rectangle";const Rr=qt.getBounds();Rt={bounds:{southWest:[Rr.getSouthWest().lng,Rr.getSouthWest().lat],northEast:[Rr.getNorthEast().lng,Rr.getNorthEast().lat]},style:Kt,name:((lt=qt.properties)==null?void 0:lt.name)||"",rotation:qt.getRotation(),width:qt.getDimensions().width,height:qt.getDimensions().height,center:[qt.getCenter().lng,qt.getCenter().lat]}}else if(qt instanceof Ft.Circle)gn="Circle",Rt={center:[qt.getLatLng().lng,qt.getLatLng().lat],radius:qt.getRadius(),name:((Cn=qt.properties)==null?void 0:Cn.name)||"",style:Kt};else if(qt instanceof Ft.Rectangle){gn="Rectangle";const Rr=qt.getBounds();Rt={bounds:{southWest:[Rr.getSouthWest().lng,Rr.getSouthWest().lat],northEast:[Rr.getNorthEast().lng,Rr.getNorthEast().lat]},name:((Lr=qt.properties)==null?void 0:Lr.name)||"",style:Kt}}else if(qt instanceof Ft.Polyline&&!(qt instanceof Ft.Polygon))if(((Ii=qt.properties)==null?void 0:Ii.type)==="ElevationLine"){gn="ElevationLine";const Rr=qt.getLatLngs(),dr=((Fr=qt.properties)==null?void 0:Fr.category)||"forages",zi=((Pr=qt.properties)==null?void 0:Pr.accessLevel)||"visitor";console.log("[savePlan] ElevationLine - Catgorie:",dr,"Niveau d'accs:",zi),Rt={points:Rr.map(Ss=>[Ss.lng,Ss.lat]),style:{...Kt,color:((lr=qt.properties.style)==null?void 0:lr.color)||"#FF4500",weight:((Hr=qt.properties.style)==null?void 0:Hr.weight)||4,opacity:((ir=qt.properties.style)==null?void 0:ir.opacity)||.8,_accessLevel:zi,accessLevel:zi},name:((Or=qt.properties)==null?void 0:Or.name)||"",category:dr,accessLevel:zi,elevationData:qt.properties.elevationData,samplePointStyle:qt.properties.samplePointStyle,minMaxPointStyle:qt.properties.minMaxPointStyle,minElevation:qt.properties.minElevation,maxElevation:qt.properties.maxElevation,elevationGain:qt.properties.elevationGain,elevationLoss:qt.properties.elevationLoss,averageSlope:qt.properties.averageSlope,maxSlope:qt.properties.maxSlope}}else{gn="Line";const Rr=qt.getLatLngs(),dr=((jr=qt.properties)==null?void 0:jr.category)||"forages",zi=((on=qt.properties)==null?void 0:on.accessLevel)||"visitor";console.log("[savePlan] Line - Catgorie:",dr,"Niveau d'accs:",zi),Rt={points:Rr.map(Ss=>[Ss.lng,Ss.lat]),name:((ji=qt.properties)==null?void 0:ji.name)||"",category:dr,accessLevel:zi,style:{...Kt,_accessLevel:zi,accessLevel:zi}}}else if(qt instanceof Ft.Polygon&&!(qt instanceof Ft.Rectangle)){gn="Polygon";const Rr=qt.getLatLngs()[0],dr=((_i=qt.properties)==null?void 0:_i.category)||"forages",zi=((gi=qt.properties)==null?void 0:gi.accessLevel)||"visitor";console.log("[savePlan] Polygon - Catgorie:",dr,"Niveau d'accs:",zi),Rt={points:Rr.map(Ss=>[Ss.lng,Ss.lat]),name:((Kr=qt.properties)==null?void 0:Kr.name)||"",category:dr,accessLevel:zi,style:{...Kt,_accessLevel:zi,accessLevel:zi}}}else if(((Br=qt.properties)==null?void 0:Br.type)==="Note"){console.log("[savePlan] Traitement d'une GeoNote");const Rr=qt;if(Rr.toBackendFormat){Rr.properties.category||(Rr.properties.category="forages",console.log("[savePlan] Catgorie par dfaut ajoute:",Rr.properties.category)),Rr.properties.accessLevel||(Rr.properties.accessLevel="private",console.log("[savePlan] Niveau d'accs par dfaut ajout:",Rr.properties.accessLevel));const dr=Rr.toBackendFormat(Rr._dbId);gn=dr.type_forme,Rt=dr.data,Rr._dbId&&typeof Rr._dbId=="number"&&En.add(Rr._dbId),console.log("[savePlan] Donnes de la note prpares pour la sauvegarde:",{id:Rr._dbId,type:gn,category:Rt.category,accessLevel:Rt.accessLevel})}}if(gn&&Rt){let Rr=qt._elementId;qt._dbId&&(Rr=qt._dbId,typeof Rr=="number"&&En.add(Rr)),We.push({id:Rr,type_forme:gn,data:Rt})}}),console.log("[savePlan] lments  sauvegarder",{totalElements:We.length,elements:We.map(qt=>({type:qt.type_forme,hasPoints:"points"in qt.data,hasStyle:"style"in qt.data}))});const Jn=Array.from(Ot).filter(qt=>!En.has(qt));console.log("[savePlan] lments supprims:",{existingIds:Array.from(Ot),currentLayerIds:Array.from(En),elementsToDelete:Jn}),s.elements=We.filter(qt=>!qt.id||!Jn.includes(qt.id));const Zn=await s.saveToPlan($.value.id,{elementsToDelete:Jn});if(Zn&&((at=$.value)!=null&&at.id)){const qt=$.value.id;$.value={...$.value,...Zn},i.updatePlanDetails(qt,Zn)}O.value="success",N.value&&N.value.eachLayer(qt=>{var gn;((gn=qt.properties)==null?void 0:gn.type)==="Note"&&typeof qt.resetPlanSaveState=="function"&&qt.resetPlanSaveState()}),setTimeout(()=>{O.value=null},3e3)}catch(We){console.error("Erreur lors de la sauvegarde du plan:",We),O.value=null}finally{R.value=!1}}mc(()=>{B.user||tt(),i.clearCurrentPlan(),s.clearCurrentPlan(),N.value&&N.value.off("note:edit"),window.removeEventListener("geonote:edit",()=>{}),window.removeEventListener("categoriesReactivated",()=>{}),window.removeEventListener("shapeTypesReactivated",()=>{}),window.removeEventListener("shape:created",()=>{}),window.removeEventListener("map-set-location",()=>{})});function ne(at){if(console.log("[MapView][updateShapeProperties] Mise  jour des proprits:",at),k(at),at.category&&g.value&&g.value._dbId){const We=g.value._dbId,Ot=s.elements.find(En=>En.id===We);if(Ot){console.log(`[MapView][updateShapeProperties] Mise  jour de la catgorie dans le store: ${at.category} pour l'lment ${We}`);const En=Ot;En.data||(En.data={}),En.data.category=at.category,s.$patch({unsavedChanges:!0})}}}function ye(at){try{const We=new Date(at);return isNaN(We.getTime())?(console.error("Date invalide reue:",at),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(We)}catch(We){return console.error("Erreur lors du formatage de la date:",We),"Date invalide"}}const de=()=>{N.value&&T()},Ze=()=>{if(g.value&&N.value){const at=g.value._leaflet_id,We=g.value._dbId;_(""),N.value.removeLayer(g.value),f.value=f.value.filter(Ot=>Ot.layer&&Ot.layer._leaflet_id!==at),console.log(`[MapView][deleteSelectedShape] Forme ${at} (dbId: ${We}) supprime du featureGroup et de shapes.value`),g.value=null}};async function qe(at){console.log(`onPlanCreated - Tentative de chargement du plan ${at}`),await i.fetchPlans();const We=i.getPlanById(at);We?(console.log(`Plan ${at} trouv, chargement en cours...`),localStorage.setItem("lastPlanId",at.toString()),$.value=We,i.setCurrentPlan(We),s.setCurrentPlan(We.id),fe.value=!1,At(),console.log(`Plan ${at} charg avec succs`)):console.error(`Plan ${at} introuvable aprs cration! Vrifiez les permissions.`)}Co(oe,async at=>{var We;if(at&&((We=B.user)==null?void 0:We.user_type)==="admin"){Te.value=!0;try{const Ot=await B.fetchSalarieVisiteurs(at.id);W.value=Array.isArray(Ot)?Ot:[Ot]}catch(Ot){console.error("[MapView][watch selectedSalarie] Error:",Ot),W.value=[]}finally{Te.value=!1}}});function tt(){localStorage.removeItem("lastPlanId")}function ze(at,We="m"){return We==="m"?`${(at/1e4).toFixed(2)} ha`:We==="m"?at>=1e3?`${(at/1e3).toFixed(2)} km`:`${at.toFixed(2)} m`:`${at.toFixed(2)} ${We}`}const Qe=jt(!1);function et(at){return{Circle:"Cercle",Rectangle:"Rectangle",Semicircle:"Demi-cercle",Line:"Ligne",Polygon:"Polygone",TextRectangle:"Annotation",ElevationLine:"Profil altimtrique"}[at]||at}async function bt(){var We,Ot,En,Jn,Zn,qt,gn,Rt,Kt,Ln;if(!$.value||!y.value||!N.value){console.error("[generateSynthesis] Plan, map ou featureGroup manquant");return}const at=$.value;try{console.log("[generateSynthesis] Dbut de la gnration"),console.log("[generateSynthesis] Plan courant complet:",at),await ce();let Hr=at;if(!at.salarie_details&&!at.entreprise_details&&!at.client_details){console.log("[generateSynthesis] Dtails manquants, tentative de rcupration...");try{const dr=await Rn.get(`/plans/${at.id}/`);dr.status===200&&(console.log("[generateSynthesis] Plan mis  jour:",dr.data),$.value={...at,...dr.data},Hr=dr.data,i.updatePlanDetails(at.id,dr.data))}catch(dr){console.error("[generateSynthesis] Erreur lors de la rcupration des dtails:",dr)}}await new Promise(dr=>setTimeout(dr,1e3)),Qe.value=!0;const ir=Hr.salarie_details,Or=Hr.client_details,jr=(ir==null?void 0:ir.entreprise_details)||Hr.entreprise_details;console.log("[generateSynthesis] Dtails du plan utilis:",Hr),console.log("[generateSynthesis] Dtails des utilisateurs:",{salarie:ir?{id:ir.id,nom:`${ir.first_name} ${ir.last_name}`,company:ir.company_name,logo:ir.logo}:null,entreprise:jr?{id:jr.id,nom:`${jr.first_name} ${jr.last_name}`,company:jr.company_name,logo:jr.logo}:null,client:Or?{id:Or.id,nom:`${Or.first_name} ${Or.last_name}`,company:Or.company_name}:null}),g.value&&(F(),g.value=null);const on=new kr("l","mm","a4");console.log("[generateSynthesis] Chargement du logo de l'application");const ji=new Image;ji.src=ib,await new Promise(dr=>{ji.onload=()=>{console.log("[generateSynthesis] Logo application charg"),dr()},ji.onerror=zi=>{console.error("[generateSynthesis] Erreur chargement logo application:",zi),dr()}}),console.log("[generateSynthesis] Tentative de chargement du logo entreprise:",jr==null?void 0:jr.logo);let _i=null;jr!=null&&jr.logo&&(_i=new Image,_i.src=jr.logo,await new Promise(dr=>{_i?(_i.onload=()=>{console.log("[generateSynthesis] Logo entreprise charg avec succs"),dr()},_i.onerror=zi=>{console.error("[generateSynthesis] Erreur chargement logo entreprise:",zi),dr()}):dr()})),console.log("[generateSynthesis] Tentative de chargement du logo salarie:",ir==null?void 0:ir.logo);let gi=null;ir!=null&&ir.logo&&(gi=new Image,gi.src=ir.logo,await new Promise(dr=>{gi?(gi.onload=()=>{console.log("[generateSynthesis] Logo salarie charg avec succs"),dr()},gi.onerror=zi=>{console.error("[generateSynthesis] Erreur chargement logo salarie:",zi),dr()}):dr()})),console.log("[generateSynthesis] Ajout des logos au PDF:",{logoApplication:!0,logoEntreprise:_i!==null,logoSalarie:gi!==null}),_i!==null&&on.addImage(_i,"JPEG",148.5-40-30,20,40,40),on.addImage(ji,"JPEG",148.5-40/2,20,40,40),gi!==null&&on.addImage(gi,"JPEG",148.5+30,20,40,40),on.setFontSize(24),on.setTextColor(0),on.text(at.nom||"Sans titre",297/2,100,{align:"center"});let Kr=120;if(jr&&(on.setFontSize(14),on.setFont("helvetica","bold"),on.text("Entreprise:",20,Kr),on.setFont("helvetica","normal"),on.text(`${jr.first_name} ${jr.last_name}${jr.company_name?` (${jr.company_name})`:""}`,20,Kr+6),Kr+=15),ir&&(on.setFontSize(14),on.setFont("helvetica","bold"),on.text("Salarie:",20,Kr),on.setFont("helvetica","normal"),on.text(`${ir.first_name} ${ir.last_name}${ir.company_name?` (${ir.company_name})`:""}`,20,Kr+6),Kr+=15),Or&&(on.setFontSize(14),on.setFont("helvetica","bold"),on.text("Client:",20,Kr),on.setFont("helvetica","normal"),on.text(`${Or.first_name} ${Or.last_name}${Or.company_name?` (${Or.company_name})`:""}`,20,Kr+6),Kr+=15),at.description){on.setFont("helvetica","bold"),on.text("Description:",20,Kr),on.setFont("helvetica","normal");const dr=on.splitTextToSize(at.description,150);on.text(dr,20,Kr+6),Kr+=8*dr.length+10}Kr=Math.min(Kr,180),on.setFontSize(10),on.setTextColor(100),on.text(`Date de cration: ${ye(at.date_creation)}`,20,190),on.text(`Dernire modification: ${ye(at.date_modification)}`,277,190,{align:"right"});const Br=[];N.value.eachLayer(dr=>Br.push(dr));const Rr=Ft.simpleMapScreenshoter({hideElementsWithSelectors:[".leaflet-control-container",".leaflet-pm-toolbar",".leaflet-grid-layer",".leaflet-grid-label"],preventDownload:!0}).addTo(y.value);await new Promise(dr=>setTimeout(dr,3e3));for(let dr=0;dr<Br.length;dr++){on.addPage(),on.setFillColor(248,250,252),on.setDrawColor(226,232,240),on.rect(0,0,297,25,"F"),on.setFontSize(10),on.setTextColor(50,50,50),on.setFont("helvetica","bold"),on.text(at.nom||"Sans titre",20,12);let Cs=297-20-(15*(1+(_i!==null?1:0)+(gi!==null?1:0))+5*(1+(_i!==null?1:0)));_i!==null&&(on.addImage(_i,"JPEG",Cs,5,15,15),Cs+=20),on.addImage(ji,"JPEG",Cs,5,15,15),Cs+=20,gi!==null&&on.addImage(gi,"JPEG",Cs,5,15,15),on.setDrawColor(200,200,200),on.setLineWidth(.5),on.line(0,25,297,25);const si=Br[dr],jn=si.properties;if(jn){on.setTextColor(0),on.setFontSize(14),on.setFont("helvetica","bold");const Po=jn.name||et(jn.type);let ci="";if(jn.type!=="TextRectangle"){const qn=K(Br,si);ci=qn>0?` (surface totale d'irrigation : ${ze(qn,"m")})`:""}const hr=`${Po}${ci}`;on.text(hr,20,35)}if(jn&&jn.type==="ElevationLine")try{const Po=((We=si.getBounds)==null?void 0:We.call(si))||((Ot=si.getLatLng)==null?void 0:Ot.call(si));Po&&y.value.fitBounds(Po instanceof Ft.LatLng?Ft.latLngBounds([Po]):Po,{padding:[50,50]});try{const _n=((En=si.getBounds)==null?void 0:En.call(si))||((Jn=si.getLatLng)==null?void 0:Jn.call(si));if(!_n||!y.value)console.warn("[generateSynthesis] Bounds ou carte invalide");else{const nn=_n instanceof Ft.LatLng?Ft.latLngBounds([_n]):_n;nn&&nn.isValid&&nn.isValid()&&y.value.getContainer()&&document.body.contains(y.value.getContainer())&&y.value.fitBounds(nn,{padding:[50,50],animate:!1})}}catch(_n){console.warn("[generateSynthesis] Erreur lors de l'ajustement de la vue:",_n)}await new Promise(_n=>setTimeout(_n,2e3)),y.value.invalidateSize();try{y.value&&y.value.getContainer()&&document.body.contains(y.value.getContainer())?y.value.invalidateSize({animate:!1}):console.warn("[generateSynthesis] Carte non valide pour l'invalidation de taille")}catch(_n){console.warn("[generateSynthesis] Erreur lors de l'invalidation de la taille de la carte:",_n)}await new Promise(_n=>{const nn=()=>{var Mi;const ai=(Mi=y.value)==null?void 0:Mi.getContainer();if(!ai){_n();return}const fo=ai.querySelectorAll(".leaflet-tile-loaded");ai.querySelectorAll(".leaflet-tile-loading").length===0&&fo.length>0?_n():setTimeout(nn,100)};nn()});const ci=await Rr.takeScreen("image"),hr=await new Promise((_n,nn)=>{const ai=new Image;ai.onload=()=>_n(ai),ai.onerror=fo=>nn(fo),ai.src=ci}),qn=40,bo=237/2,wo=Math.min(70,hr.height*bo/hr.width);if(on.addImage(hr,"PNG",20,qn,bo,wo),jn.elevationData&&jn.elevationData.length>0){const _n=document.createElement("canvas");_n.width=800,_n.height=400;const nn=_n.getContext("2d");if(nn){const ai=jn.elevationData,fo=jn.minElevation,xo=jn.maxElevation,fs=(xo-fo)*.05,Qo=fo-fs,Ro=xo+fs,hi=40,Os=_n.width-2*hi,Fo=_n.height-2*hi,eo=Jr=>hi+Jr/ai[ai.length-1].distance*Os,Lo=Jr=>hi+Fo-(Jr-Qo)/(Ro-Qo)*Fo;nn.fillStyle="#f8fafc",nn.fillRect(0,0,_n.width,_n.height),nn.fillStyle="#334155",nn.font="bold 20px Arial",nn.textAlign="center",nn.fillText("Profil altimtrique",_n.width/2,25),nn.strokeStyle="#e2e8f0",nn.lineWidth=1,nn.beginPath(),nn.moveTo(hi,hi),nn.lineTo(hi,Fo+hi),nn.lineTo(Os+hi,Fo+hi),nn.strokeStyle="#94a3b8",nn.stroke();const Gs=5;for(let Jr=0;Jr<=Gs;Jr++){const Nr=Qo+Jr/Gs*(Ro-Qo),jo=Lo(Nr);nn.beginPath(),nn.strokeStyle="#e2e8f0",nn.moveTo(hi,jo),nn.lineTo(Os+hi,jo),nn.stroke(),nn.beginPath(),nn.strokeStyle="#94a3b8",nn.moveTo(hi-5,jo),nn.lineTo(hi,jo),nn.stroke(),nn.fillStyle="#64748b",nn.font="12px Arial",nn.textAlign="right",nn.fillText(`${Math.round(Nr)}m`,hi-8,jo+4)}const va=5,to=ai[ai.length-1].distance;for(let Jr=0;Jr<=va;Jr++){const Nr=Jr/va*to,jo=eo(Nr);nn.beginPath(),nn.strokeStyle="#e2e8f0",nn.moveTo(jo,hi),nn.lineTo(jo,Fo+hi),nn.stroke(),nn.beginPath(),nn.strokeStyle="#94a3b8",nn.moveTo(jo,Fo+hi),nn.lineTo(jo,Fo+hi+5),nn.stroke(),nn.fillStyle="#64748b",nn.font="12px Arial",nn.textAlign="center",nn.fillText(`${Math.round(Nr)}m`,jo,Fo+hi+16)}const il=nn.createLinearGradient(0,hi,0,Fo+hi);il.addColorStop(0,"rgba(255, 69, 0, 0.8)"),il.addColorStop(1,"rgba(255, 69, 0, 0.2)"),nn.beginPath(),nn.moveTo(eo(ai[0].distance),Lo(ai[0].elevation)),ai.forEach((Jr,Nr)=>{Nr>0&&nn.lineTo(eo(Jr.distance),Lo(Jr.elevation))}),nn.strokeStyle="#FF4500",nn.lineWidth=2,nn.stroke(),nn.lineTo(eo(ai[ai.length-1].distance),Lo(Qo)),nn.lineTo(eo(ai[0].distance),Lo(Qo)),nn.closePath(),nn.fillStyle=il,nn.fill(),ai.forEach(Jr=>{nn.beginPath(),nn.arc(eo(Jr.distance),Lo(Jr.elevation),3,0,Math.PI*2),nn.fillStyle="#FF4500",nn.fill(),nn.strokeStyle="white",nn.lineWidth=1,nn.stroke()});let ya=0,gr=0;for(let Jr=0;Jr<ai.length;Jr++)ai[Jr].elevation===fo&&(ya=Jr),ai[Jr].elevation===xo&&(gr=Jr);nn.beginPath(),nn.arc(eo(ai[gr].distance),Lo(ai[gr].elevation),6,0,Math.PI*2),nn.fillStyle="#059669",nn.fill(),nn.strokeStyle="white",nn.lineWidth=2,nn.stroke(),nn.beginPath(),nn.arc(eo(ai[ya].distance),Lo(ai[ya].elevation),6,0,Math.PI*2),nn.fillStyle="#DC2626",nn.fill(),nn.strokeStyle="white",nn.lineWidth=2,nn.stroke(),nn.font="12px Arial",nn.fillStyle="#059669",nn.textAlign="left",nn.fillText(`Point haut: ${ze(xo,"m")}`,hi,Fo+hi+35),nn.fillStyle="#DC2626",nn.fillText(`Point bas: ${ze(fo,"m")}`,hi+200,Fo+hi+35);const br=_n.toDataURL("image/png");on.addImage(br,"PNG",20+bo+20,qn,bo,wo)}}const Sr=qn+wo+15;on.setFillColor(248,250,252),on.setDrawColor(226,232,240),on.roundedRect(20,Sr,257,50,3,3,"FD"),on.setFont("helvetica","bold"),on.setFontSize(12),on.setTextColor(51,65,85),on.text("Caractristiques",30,Sr+10);const Vs=[{label:"Distance totale",value:ze(jn.length||0)},{label:"Dnivel positif",value:ze(jn.elevationGain||0,"m")},{label:"Dnivel ngatif",value:ze(jn.elevationLoss||0,"m")}],Gn=[{label:"Pente moyenne",value:`${(jn.averageSlope||0).toFixed(1)}%`},{label:"Pente maximale",value:`${(jn.maxSlope||0).toFixed(1)}%`},{label:"Altitude min/max",value:`${ze(jn.minElevation||0,"m")} / ${ze(jn.maxElevation||0,"m")}`}];let _r=Sr+20;on.setFont("helvetica","normal"),on.setFontSize(10),Vs.forEach(_n=>{on.setTextColor(100,116,139),on.text(_n.label,30,_r),on.setTextColor(15,23,42),on.setFont("helvetica","bold"),on.text(_n.value,110,_r),on.setFont("helvetica","normal"),_r+=9}),_r=Sr+20;const Yr=297/2;Gn.forEach(_n=>{on.setTextColor(100,116,139),on.text(_n.label,Yr,_r),on.setTextColor(15,23,42),on.setFont("helvetica","bold"),on.text(_n.value,Yr+80,_r),on.setFont("helvetica","normal"),_r+=9})}catch(Po){console.error("[generateSynthesis] Erreur traitement profil altimtrique:",Po)}else{const Po=((Zn=si.getBounds)==null?void 0:Zn.call(si))||((qt=si.getLatLng)==null?void 0:qt.call(si));Po&&y.value.fitBounds(Po instanceof Ft.LatLng?Ft.latLngBounds([Po]):Po,{padding:[50,50]});try{const ci=((gn=si.getBounds)==null?void 0:gn.call(si))||((Rt=si.getLatLng)==null?void 0:Rt.call(si));if(!ci||!y.value)console.warn("[generateSynthesis] Bounds ou carte invalide");else{const hr=ci instanceof Ft.LatLng?Ft.latLngBounds([ci]):ci;hr&&hr.isValid&&hr.isValid()&&y.value.getContainer()&&document.body.contains(y.value.getContainer())&&y.value.fitBounds(hr,{padding:[50,50],animate:!1})}}catch(ci){console.warn("[generateSynthesis] Erreur lors de l'ajustement de la vue:",ci)}await new Promise(ci=>setTimeout(ci,2e3)),y.value.invalidateSize(),await new Promise(ci=>{const hr=()=>{var Sr;const qn=(Sr=y.value)==null?void 0:Sr.getContainer();if(!qn){ci();return}const bo=qn.querySelectorAll(".leaflet-tile-loaded");qn.querySelectorAll(".leaflet-tile-loading").length===0&&bo.length>0?ci():setTimeout(hr,100)};hr()});try{const ci=await Rr.takeScreen("image"),hr=await new Promise((Sr,Vs)=>{const Gn=new Image;Gn.onload=()=>Sr(Gn),Gn.onerror=_r=>Vs(_r),Gn.src=ci}),qn=45,bo=297*.6-30;let wo=hr.height*bo/hr.width;if(wo>210*.9&&(wo=210*.9),on.addImage(hr,"PNG",20,qn,bo,wo),jn){let Sr=function(nn,ai,fo,xo,Mi){on.setTextColor(100,116,139),on.setFont("helvetica","normal"),on.text(nn,fo+10,xo),on.setTextColor(15,23,42),on.setFont("helvetica","bold"),on.text(ai,fo+Mi-10,xo,{align:"right"})},Gn=0;if(jn.type==="Circle")Gn=4;else if(jn.type==="Rectangle")Gn=4;else if(jn.type==="Line")Gn=1,(Kt=jn.dimensions)!=null&&Kt.width&&Gn++,jn.surfaceInfluence&&Gn++;else if(jn.type==="Semicircle")Gn=6;else if(jn.type==="Polygon")Gn=2;else if(jn.type==="CircleWithSections"&&(Gn=3,jn.sections&&jn.sections.length>0)){const nn=Math.ceil(jn.sections.length/3);Gn+=nn*3}const _r=Math.max(15+Gn*12+30,60),Yr=297-188.2-20;on.setFillColor(248,250,252),on.setDrawColor(226,232,240),on.roundedRect(188.2,qn,Yr,_r,3,3,"FD"),on.setFont("helvetica","bold"),on.setFontSize(12),on.setTextColor(51,65,85),on.text("Caractristiques",188.2+10,qn+15);let _n=qn+30;on.setFontSize(10),jn.type==="Circle"?(Sr("Rayon",ze(jn.radius),188.2,_n,Yr),_n+=12,Sr("Diamtre",ze(jn.radius*2),188.2,_n,Yr),_n+=12,Sr("Surface",ze(jn.surface,"m"),188.2,_n,Yr),_n+=12,Sr("Primtre",ze(jn.perimeter),188.2,_n,Yr)):jn.type==="Rectangle"?(Sr("Largeur",ze(jn.width),188.2,_n,Yr),_n+=12,Sr("Hauteur",ze(jn.height),188.2,_n,Yr),_n+=12,Sr("Surface",ze(jn.surface,"m"),188.2,_n,Yr),_n+=12,Sr("Primtre",ze(jn.perimeter),188.2,_n,Yr)):jn.type==="Line"?(Sr("Longueur",ze(jn.length),188.2,_n,Yr),_n+=12,(Ln=jn.dimensions)!=null&&Ln.width&&(Sr("Largeur d'influence",ze(jn.dimensions.width),188.2,_n,Yr),_n+=12),jn.surfaceInfluence&&Sr("Surface d'influence",ze(jn.surfaceInfluence,"m"),188.2,_n,Yr)):jn.type==="Semicircle"?(Sr("Rayon",ze(jn.radius),188.2,_n,Yr),_n+=12,Sr("Diamtre",ze(jn.radius*2),188.2,_n,Yr),_n+=12,Sr("Surface",ze(jn.surface,"m"),188.2,_n,Yr),_n+=12,Sr("Primtre",ze(jn.perimeter),188.2,_n,Yr),_n+=12,Sr("Longueur d'arc",ze(jn.arcLength),188.2,_n,Yr),_n+=12,Sr("Angle d'ouverture",`${jn.openingAngle.toFixed(1)}`,188.2,_n,Yr)):jn.type==="Polygon"?(Sr("Surface",ze(jn.surface,"m"),188.2,_n,Yr),_n+=12,Sr("Primtre",ze(jn.perimeter),188.2,_n,Yr)):jn.type==="CircleWithSections"&&(Sr("Rayon",ze(jn.radius),188.2,_n,Yr),_n+=12,Sr("Surface totale",ze(jn.surface,"m"),188.2,_n,Yr),_n+=12,Sr("Primtre",ze(jn.perimeter),188.2,_n,Yr),_n+=20,jn.sections&&jn.sections.length>0&&(_n=yr(jn.sections,on,188.2,_n,Yr)))}}catch(ci){console.error(`[generateSynthesis] Erreur capture forme ${dr+1}:`,ci)}}}y.value.removeControl(Rr),on.save(`synthese_${at.nom}.pdf`)}catch(mr){console.error("[generateSynthesis] Erreur:",mr),alert("Une erreur est survenue lors de la gnration de la synthse. Veuillez ressayer.")}finally{Qe.value=!1}}const Pt=fx.debounce(()=>{const at=dn.startMeasure("invalidateMapSize","MapView");if(!y.value){at();return}zs(()=>{dn.measure("invalidateMapSize:nextTick",()=>{var We;try{if(y.value&&y.value.getContainer()&&document.body.contains(y.value.getContainer())){if(y.value.invalidateSize({animate:!1}),(We=N.value)!=null&&We.getLayers().length)try{T()}catch(Ot){console.warn("[invalidateMapSize] Erreur lors de l'ajustement de la vue:",Ot)}}else console.warn("[invalidateMapSize] Carte non valide pour l'invalidation")}catch(Ot){console.warn("[invalidateMapSize] Erreur lors de l'invalidation de la taille de la carte:",Ot)}at()},"MapView")})},250);function At(){Pt()}Co($,(at,We)=>{at&&at.id!==(We==null?void 0:We.id)&&zs(()=>{At()})});const Vt=jt(null),Qt=jt(!1),mn=jt([]),Ye=cr(()=>{if(console.log("[MapView][filteredSalaries] Computing with:",{selectedEntreprise:Vt.value,salaries:z.value,salariesLength:z.value.length}),!Vt.value)return[];const at=z.value.filter(We=>{var Jn,Zn,qt;const Ot=We.entreprise,En=typeof Ot=="object"&&Ot!==null?Ot.id:Ot;return console.log("[MapView][filteredSalaries] Checking salarie:",{salarie:We,salarieEntreprise:Ot,salarieEntrepriseId:En,selectedEntrepriseId:(Jn=Vt.value)==null?void 0:Jn.id,matches:En===((Zn=Vt.value)==null?void 0:Zn.id)}),En===((qt=Vt.value)==null?void 0:qt.id)});return console.log("[MapView][filteredSalaries] Filtered result:",at),at});function ot(at){if(!at)return"";const We=at.first_name||"",Ot=at.last_name?at.last_name.toUpperCase():"",En=at.company_name||at.role||"";return`${We} ${Ot} (${En})`}async function rt(){Qt.value=!0;try{const at=await Rn.get("/users/",{params:{role:"ENTREPRISE"}});mn.value=at.data}catch(at){console.error("[MapView] Error loading entreprises:",at),mn.value=[]}finally{Qt.value=!1}}async function zt(at){console.log("[MapView][selectEntreprise] Slection de l'entreprise:",at),Vt.value=at,Ee.value=!0;try{console.log("[MapView][selectEntreprise] Envoi de la requte avec params:",{role:"SALARIE",entreprise:at.id});const We=await Rn.get("/users/",{params:{role:"SALARIE",entreprise:at.id}});console.log("[MapView][selectEntreprise] Rponse reue:",We.data),z.value=We.data,console.log("[MapView][selectEntreprise] Salaries mis  jour:",z.value)}catch(We){console.error("[MapView] Error loading salaries for entreprise:",We),z.value=[]}finally{Ee.value=!1}}function en(){Vt.value=null,oe.value=null,xe.value=null,z.value=[],W.value=[],V.value=[]}function Bn(){oe.value=null,xe.value=null,W.value=[],V.value=[]}function bn(){xe.value=null,V.value=[]}async function Nn(at){var We,Ot,En,Jn,Zn,qt;console.log(`
[MapView][selectSalarie] ====== DBUT SLECTION SALARIE ======`),console.log("Informations du salarie:",{id:at.id,username:at.username,company:at.company_name,role:at.role}),console.log("Contexte utilisateur:",{userType:(We=B.user)==null?void 0:We.user_type,userId:(Ot=B.user)==null?void 0:Ot.id,userRole:(En=B.user)==null?void 0:En.role,selectedEntrepriseId:(Jn=Vt.value)==null?void 0:Jn.id}),oe.value=at,Te.value=!0;try{const gn={role:"VISITEUR",salarie:at.id};B.isEntreprise?(console.log("Ajout de l'ID de l'entreprise connecte:",(Zn=B.user)==null?void 0:Zn.id),gn.entreprise=(qt=B.user)==null?void 0:qt.id):Vt.value&&(console.log("Ajout de l'ID de l'entreprise slectionne:",Vt.value.id),gn.entreprise=Vt.value.id),console.log("Paramtres de la requte:",gn);const Rt=await Rn.get("/users/",{params:gn});console.log("Rponse reue du serveur:",{status:Rt.status,dataLength:Array.isArray(Rt.data)?Rt.data.length:"non-array",data:Rt.data}),Array.isArray(Rt.data)?(W.value=Rt.data,console.log(`${Rt.data.length} visiteurs chargs`),Rt.data.forEach((Kt,Ln)=>{console.log(`Visiteur ${Ln+1}:`,{id:Kt.id,username:Kt.username,company:Kt.company_name,salarie:Kt.salarie})})):(console.warn("Format de rponse inattendu:",Rt.data),W.value=[]),W.value.length===0&&console.warn("Aucun visiteur trouv pour ce salarie")}catch(gn){if(console.error("ERREUR lors du chargement des visiteurs:",gn),gn&&typeof gn=="object"&&"response"in gn){const Rt=gn;console.error("Dtails de l'erreur:",{status:Rt.response.status,data:Rt.response.data})}W.value=[]}finally{Te.value=!1,console.log(`[MapView][selectSalarie] ====== FIN SLECTION SALARIE ======
`)}}function ar(){G.value=!1,X.value=null}function xn(at){console.log("[MapView][handleFilterChange] Nouveaux filtres reus:",JSON.stringify(at,null,2)),console.log("[MapView][handleFilterChange] Filtres actuels dans le store:",JSON.stringify({accessLevels:{...s.filters.accessLevels},categories:{...s.filters.categories},shapeTypes:{...s.filters.shapeTypes}},null,2)),console.log("[MapView][handleFilterChange] Mise  jour des filtres dans le store"),s.updateFilters(at),console.log("[MapView][handleFilterChange] lments dans le store:",{count:s.elements.length,ids:s.elements.map(We=>We.id)}),console.log("[MapView][handleFilterChange] Mise  jour de l'affichage de la carte"),Mn(),setTimeout(()=>{console.log("[MapView][handleFilterChange] Mise  jour force de l'affichage"),Mn()},100),console.log("[MapView][handleFilterChange] Traitement des filtres termin")}function Mn(){if(!N.value)return;const at={accessLevels:{...s.filters.accessLevels},categories:{...s.filters.categories},shapeTypes:{...s.filters.shapeTypes}};console.log("[MapView][updateMapDisplay] Mise  jour de l'affichage avec filtres:",JSON.stringify(at,null,2));const We={count:s.elements.length,elements:s.elements.map(lt=>({id:lt.id,type_forme:lt.type_forme}))};console.log("[MapView][updateMapDisplay] lments dans le store:",JSON.stringify(We,null,2));const Ot=s.getFilteredElements;console.log("[MapView][updateMapDisplay] lments filtrs:",{total:s.elements.length,filtered:Ot.length,filteredIds:Ot.map(lt=>lt.id)});const En=N.value.getLayers();console.log("[MapView][updateMapDisplay] Couches actuelles:",En.length);const Jn=En.map(lt=>({_leaflet_id:lt._leaflet_id,_dbId:lt._dbId,hasProperties:!!lt.properties,propertyType:lt.properties?lt.properties.type:null,category:lt.properties?lt.properties.category:null}));console.log("[MapView][updateMapDisplay] Dtails des couches:",JSON.stringify(Jn,null,2)),console.log("[MapView][updateMapDisplay] tat des filtres pour les catgories:",{forages:s.filters.categories.forages,clients:s.filters.categories.clients,entrepots:s.filters.categories.entrepots,livraisons:s.filters.categories.livraisons,cultures:s.filters.categories.cultures,parcelles:s.filters.categories.parcelles});const Zn=new Map;f.value.forEach(lt=>{lt.layer&&lt.id&&Zn.set(lt.id,lt.layer)});const qt=new Map;En.forEach(lt=>{lt._dbId&&qt.set(lt,lt._dbId)});const gn=new Set(Ot.map(lt=>lt.id));console.log("[MapView][updateMapDisplay] Dbut du traitement des couches");const Rt=Array.from(gn);console.log("[MapView][updateMapDisplay] IDs des lments filtrs:",JSON.stringify(Rt));let Kt=0,Ln=0,mr=0;En.forEach(lt=>{var _i,gi;const Cn=lt._dbId,Lr=lt._leaflet_id;if(!Cn){if(!lt.properties){mr++,console.log(`[MapView][updateMapDisplay] Couche ${Lr} sans dbId et sans proprits, ignore`);return}lt._dbId=Date.now()+Math.floor(Math.random()*1e3),console.log(`[MapView][updateMapDisplay] Couche ${Lr} sans dbId, ID temporaire assign: ${lt._dbId}`)}const Ii=lt.properties||{},Fr=Ii.type||lt.type_forme||"";let Pr=Ii.category;if(lt._dbId){const Kr=s.elements.find(Br=>Br.id===lt._dbId);if(Kr){const Br=Kr.data;Br&&Br.category&&(Pr!==Br.category&&(console.log(`[MapView][updateMapDisplay] Catgorie diffrente dtecte - Proprits: ${Pr}, Store: ${Br.category} pour la couche ${lt._dbId}`),Pr=Br.category),lt.properties||(lt.properties={}),lt.properties.category=Pr)}}Pr||(Pr="default");const lr=Ii.accessLevel||"visitor";console.log(`[MapView][updateMapDisplay] Couche ${Lr} (dbId: ${lt._dbId}): type=${Fr}, category=${Pr}, accessLevel=${lr}`),console.log("[MapView][updateMapDisplay] Filtres actuels:",JSON.stringify(s.filters));let Hr=!1;Fr?Hr=Fr in s.filters.shapeTypes&&s.filters.shapeTypes[Fr]===!0:Hr=s.filters.shapeTypes.Polygon===!0;let ir=!1;Pr?Pr in s.filters.categories?(ir=s.filters.categories[Pr]===!0,console.log(`[MapView][updateMapDisplay] Vrification de la catgorie ${Pr}: ${ir}`)):(ir=s.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catgorie ${Pr} non trouve dans les filtres, utilisation de 'forages': ${ir}`)):(ir=s.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catgorie non spcifie, utilisation de 'forages': ${ir}`));let Or=!1;const jr={company:s.filters.accessLevels.company===!0,employee:s.filters.accessLevels.employee===!0,visitor:s.filters.accessLevels.visitor===!0};let on="visitor";jr.company?on="company":jr.employee?on="employee":jr.visitor&&(on="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accs slectionn par l'utilisateur: ${on}`),on==="company"?Or=!0:on==="employee"?Or=lr==="employee"||lr==="visitor":on==="visitor"&&(Or=lr==="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accs de la couche: ${lr}, visible: ${Or}`);const ji=Hr&&ir&&Or;console.log(`[MapView][updateMapDisplay] Visibilit de la couche ${Lr}: typeVisible=${Hr}, categoryVisible=${ir}, accessLevelVisible=${Or}, isVisible=${ji}`),console.log(`[MapView][updateMapDisplay] Dtails de la couche ${Lr}: type=${Fr}, category=${Pr}, accessLevel=${lr}`),console.log("[MapView][updateMapDisplay] Filtres actuels:",JSON.stringify({accessLevels:s.filters.accessLevels,categories:s.filters.categories,shapeTypes:s.filters.shapeTypes},null,2)),ji?N.value.hasLayer(lt)?(Kt++,console.log(`[MapView][updateMapDisplay] Couche ${lt._dbId} (${Fr}) dj visible avec catgorie ${((gi=lt.properties)==null?void 0:gi.category)||"non dfinie"}`)):(Pr&&Pr!=="default"&&(!lt.properties||!lt.properties.category)&&(lt.properties||(lt.properties={}),lt.properties.category=Pr,console.log(`[MapView][updateMapDisplay] Catgorie dfinie avant ajout: ${Pr} pour la couche ${lt._dbId}`)),N.value.addLayer(lt),Kt++,console.log(`[MapView][updateMapDisplay] Affichage de la couche ${lt._dbId} (${Fr}) avec catgorie ${((_i=lt.properties)==null?void 0:_i.category)||"non dfinie"}`)):N.value.hasLayer(lt)?(N.value.removeLayer(lt),Ln++,console.log(`[MapView][updateMapDisplay] Masquage de la couche ${lt._dbId} (${Fr}) - Filtres non respects`)):(Ln++,console.log(`[MapView][updateMapDisplay] Couche ${lt._dbId} (${Fr}) dj masque`))}),console.log("[MapView][updateMapDisplay] Dbut de la restauration des couches filtres"),console.log("[MapView][updateMapDisplay] Nombre de formes dans shapes.value:",f.value.length),f.value.forEach(lt=>{var gi;if(!lt.layer){console.log("[MapView][updateMapDisplay] Forme sans couche, ignore");return}const Cn=lt.layer,Lr=Cn._leaflet_id,Ii=Cn._dbId;if(console.log(`[MapView][updateMapDisplay] Traitement de la forme ${Lr} (dbId: ${Ii})`),N.value.hasLayer(Cn)){console.log(`[MapView][updateMapDisplay] La couche ${Lr} est dj dans le featureGroup, ignore`);return}const Fr=Cn.properties||{},Pr=Fr.type||Cn.type_forme||"";let lr=null;if(Cn._dbId){const Kr=s.elements.find(Br=>Br.id===Cn._dbId);if(Kr){const Br=Kr.data;Br&&Br.category&&(lr=Br.category,console.log(`[MapView][updateMapDisplay] Catgorie rcupre depuis le store: ${lr} pour la couche ${Cn._dbId}`))}}!lr&&Fr.category&&(lr=Fr.category,console.log(`[MapView][updateMapDisplay] Catgorie rcupre depuis les proprits: ${lr} pour la couche ${Lr}`)),lr||(lr="default");const Hr=Fr.accessLevel||"visitor";if(Cn.properties||(Cn.properties={}),lr&&lr!=="default"&&(Cn.properties.category=lr,console.log(`[MapView][updateMapDisplay] Catgorie dfinie/restaure: ${lr} pour la couche ${Cn._dbId}`),Cn._dbId)){const Kr=s.elements.find(Br=>Br.id===Cn._dbId);if(Kr){const Br=Kr;Br.data||(Br.data={}),Br.data.category!==lr&&(console.log(`[MapView][updateMapDisplay] Mise  jour de la catgorie dans le store: ${lr} pour l'lment ${Cn._dbId}`),Br.data.category=lr,s.$patch({unsavedChanges:!0}))}}Cn.properties.accessLevel||(Cn.properties.accessLevel="visitor"),console.log(`[MapView][updateMapDisplay] Proprits de la couche ${Lr}: type=${Pr}, category=${lr}, accessLevel=${Hr}`);let ir=!1;Pr?ir=Pr in s.filters.shapeTypes&&s.filters.shapeTypes[Pr]===!0:ir=s.filters.shapeTypes.Polygon===!0;let Or=!1;lr?lr in s.filters.categories?(Or=s.filters.categories[lr]===!0,console.log(`[MapView][updateMapDisplay] Vrification de la catgorie ${lr}: ${Or}`)):(Or=s.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catgorie ${lr} non trouve, utilisation de 'forages': ${Or}`)):(Or=s.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Pas de catgorie, utilisation de 'forages': ${Or}`));let jr=!1;const on={company:s.filters.accessLevels.company===!0,employee:s.filters.accessLevels.employee===!0,visitor:s.filters.accessLevels.visitor===!0};let ji="visitor";on.company?ji="company":on.employee?ji="employee":on.visitor&&(ji="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accs slectionn par l'utilisateur (2me tape): ${ji}`),ji==="company"?jr=!0:ji==="employee"?jr=Hr==="employee"||Hr==="visitor":ji==="visitor"&&(jr=Hr==="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accs de la couche (2me tape): ${Hr}, visible: ${jr}`);const _i=ir&&Or&&jr;if(console.log(`[MapView][updateMapDisplay] Visibilit de la couche ${Lr}: typeVisible=${ir}, categoryVisible=${Or}, accessLevelVisible=${jr}, isVisible=${_i}`),_i){if(lr&&lr!=="default"&&(Cn.properties||(Cn.properties={}),Cn.properties.category=lr,console.log(`[MapView][updateMapDisplay] Catgorie dfinie avant restauration: ${lr} pour la couche ${Lr}`),Cn._dbId)){const Kr=s.elements.find(Br=>Br.id===Cn._dbId);if(Kr){const Br=Kr;Br.data||(Br.data={}),Br.data.category!==lr&&(console.log(`[MapView][updateMapDisplay] Mise  jour de la catgorie dans le store avant restauration: ${lr} pour l'lment ${Cn._dbId}`),Br.data.category=lr,s.$patch({unsavedChanges:!0}))}}N.value.addLayer(Cn),Kt++,console.log(`[MapView][updateMapDisplay] Restauration de la couche ${Lr} (${Pr}) avec catgorie ${((gi=Cn.properties)==null?void 0:gi.category)||"non dfinie"} - Filtres respects`)}else console.log(`[MapView][updateMapDisplay] La couche ${Lr} (${Pr}) reste masque - Filtres non respects`)}),console.log(`[MapView][updateMapDisplay] Restauration termine: ${Kt} couches visibles au total`),console.log(`[MapView][updateMapDisplay] Statistiques: ${Kt} couches visibles, ${Ln} couches masques, ${mr} couches sans dbId`),console.log("[MapView][updateMapDisplay] Mise  jour termine")}function Pn(at){if(N.value){const Ot=N.value.getLayers().find(En=>En._leaflet_id===at.id);Ot&&(Ot.properties.name=at.title,Ot.properties.description=at.description,Ot.properties.columnId=at.columnId,Ot.properties.accessLevel=at.accessLevel,Ot.properties.category||(Ot.properties.category="forages"),Ot.setNoteStyle({color:at.style.color,fillColor:at.style.fillColor,weight:at.style.weight,fillOpacity:at.style.fillOpacity,radius:at.style.radius}),Ot.closePopup(),Ot.unbindPopup(),Ot.bindPopup(Ot.createPopupContent()),console.log("[handleNoteSave] Note mise  jour:",{name:Ot.properties.name,category:Ot.properties.category,accessLevel:Ot.properties.accessLevel,columnId:Ot.properties.columnId}),o.notes.find(Jn=>Jn.id===at.id)?(o.updateNote(at.id,{title:at.title,description:at.description,columnId:at.columnId,accessLevel:at.accessLevel,style:at.style,updatedAt:new Date().toISOString()}),console.log("[handleNoteSave] Note mise  jour dans le store avec columnId:",at.columnId)):(o.addNote({title:at.title,description:at.description,location:[at.location[0],at.location[1]],columnId:at.columnId||"1",style:at.style,accessLevel:at.accessLevel}),console.log("[handleNoteSave] Note ajoute au store avec columnId:",at.columnId||"1")))}u.success("Note enregistre avec succs")}async function fr(at){var We;xe.value=at,Y.value=!0;try{const Ot={visiteur:at.id};B.isEntreprise?Ot.entreprise=(We=B.user)==null?void 0:We.id:Vt.value&&(Ot.entreprise=Vt.value.id),oe.value&&(Ot.salarie=oe.value.id);const En=await Rn.get("/plans/",{params:Ot});V.value=En.data}catch(Ot){console.error("[MapView] Error loading client plans:",Ot),V.value=[]}finally{Y.value=!1}}function yr(at,We,Ot,En,Jn){if(!at||at.length===0)return En;const Zn=[...at].sort((Cn,Lr)=>(Lr.surface||0)-(Cn.surface||0)),qt=Jn,gn=7,Rt=6,Kt=2,Ln=[{header:"Nom",width:.3,align:"left"},{header:"Surface",width:.2,align:"right"},{header:"Angles",width:.25,align:"right"},{header:"Rayon",width:.15,align:"right"},{header:"Type",width:.1,align:"center"}],mr=gn+Rt*Zn.length;We.setFillColor(248,250,252),We.setDrawColor(226,232,240),We.roundedRect(Ot,En,qt,mr+Kt*2,2,2,"FD"),We.setFillColor(241,245,249),We.rect(Ot+Kt,En+Kt,qt-Kt*2,gn,"F"),We.setFont("helvetica","bold"),We.setFontSize(7),We.setTextColor(51,65,85);let lt=Ot+Kt;return Ln.forEach(Cn=>{const Lr=Cn.width*(qt-Kt*2);Cn.align==="right"?We.text(Cn.header,lt+Lr-Kt,En+Kt+5,{align:"right"}):Cn.align==="center"?We.text(Cn.header,lt+Lr/2,En+Kt+5,{align:"center"}):We.text(Cn.header,lt+Kt/2,En+Kt+5),lt+=Lr}),We.setFont("helvetica","normal"),We.setFontSize(6.5),We.setTextColor(71,85,105),Zn.forEach((Cn,Lr)=>{const Ii=En+gn+Kt+Lr*Rt;Lr%2===0&&(We.setFillColor(250,252,254),We.rect(Ot+Kt,Ii,qt-Kt*2,Rt,"F"));let Fr=Ot+Kt;const Pr=Cn.name||`Section ${Lr+1}`;We.text(Pr,Fr+Kt/2,Ii+4),Fr+=Ln[0].width*(qt-Kt*2);const lr=ze(Cn.surface||0,"m");We.text(lr,Fr+Ln[1].width*(qt-Kt*2)-Kt,Ii+4,{align:"right"}),Fr+=Ln[1].width*(qt-Kt*2);const Hr=Cn.startAngle===0&&Cn.endAngle===360?"Complet":`${Cn.startAngle}-${Cn.endAngle}`;We.text(Hr,Fr+Ln[2].width*(qt-Kt*2)-Kt,Ii+4,{align:"right"}),Fr+=Ln[2].width*(qt-Kt*2);const ir=ze(Cn.radius||0);We.text(ir,Fr+Ln[3].width*(qt-Kt*2)-Kt,Ii+4,{align:"right"}),Fr+=Ln[3].width*(qt-Kt*2);const Or=Cn.startAngle===0&&Cn.endAngle===360?"C":"P";We.text(Or,Fr+Ln[4].width*(qt-Kt*2)/2,Ii+4,{align:"center"})}),We.setDrawColor(226,232,240),We.setLineWidth(.05),We.line(Ot+Kt,En+gn+Kt,Ot+qt-Kt,En+gn+Kt),En+mr+Kt*2}return(at,We)=>{var Ot,En,Jn,Zn,qt,gn;return $e(),He(Tn,null,[E("div",a9,[E("div",l9,[Qe.value?($e(),He("div",u9,We[9]||(We[9]=[zu('<div class="bg-white/90 rounded-2xl p-8 max-w-md shadow-2xl border border-gray-100"><div class="flex flex-col items-center"><div class="relative w-24 h-24 mb-6"><div class="absolute inset-0 border-4 border-primary-200 rounded-full"></div><div class="absolute inset-0 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"></div><div class="absolute inset-2 border-2 border-primary-400/30 rounded-full animate-pulse"></div><div class="absolute inset-0 flex items-center justify-center"><svg class="w-8 h-8 text-primary-600 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div><h3 class="text-xl font-semibold text-gray-900 mb-2"> Gnration de la synthse </h3><div class="space-y-2 text-center"><p class="text-primary-600 font-medium"> Capture des formes en cours... </p><p class="text-sm text-gray-500"> Nous optimisons la qualit de vos captures pour un rendu parfait </p></div></div></div>',1)]))):cn("",!0),$.value?cn("",!0):($e(),He("div",c9,[E("div",f9,[We[12]||(We[12]=zu('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+ib+'" alt="TagMap Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur TagMap</h1><p class="text-gray-600 mb-8">Pour commencer  dessiner, vous devez d&#39;abord crer un nouveau plan ou charger un plan existant.</p>',3)),E("div",h9,[E("button",{onClick:We[0]||(We[0]=Rt=>fe.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},We[10]||(We[10]=[E("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Ei(" Crer un nouveau plan ")])),E("button",{onClick:We[1]||(We[1]=Rt=>me.value=!0),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},We[11]||(We[11]=[E("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),Ei(" Charger un plan existant ")]))])])])),Fn(E("div",d9,[$.value&&!Qe.value?($e(),He("div",p9,[pi(CB,{"last-save":(Ot=$.value)!=null&&Ot.date_modification?new Date($.value.date_modification):void 0,"plan-name":(En=$.value)==null?void 0:En.nom,"plan-description":(Jn=$.value)==null?void 0:Jn.description,"save-status":O.value,onChangeMapType:Wn(he),onCreateNewPlan:We[2]||(We[2]=Rt=>fe.value=!0),onLoadPlan:We[3]||(We[3]=Rt=>me.value=!0),onSavePlan:ce,onAdjustView:de,onGenerateSummary:bt},null,8,["last-save","plan-name","plan-description","save-status","onChangeMapType"])])):cn("",!0),E("div",g9,[r.value&&$.value&&!Qe.value?($e(),He("div",{key:0,onClick:D,class:"md:hidden fixed inset-0 bg-black/30 z-[1800] transition-opacity duration-300"})):cn("",!0),$.value&&!Qe.value?($e(),He("div",{key:1,class:"md:hidden fixed left-0 right-0 z-[1900] bg-white py-3 px-3 shadow-lg border-t border-gray-200 flex items-center justify-between cursor-pointer",style:{height:"var(--mobile-bottom-toolbar-height)",bottom:"0"},onClick:D},We[13]||(We[13]=[zu('<div class="flex items-center w-full justify-center"><div class="flex items-center space-x-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg><span class="text-sm text-gray-500 font-medium">Outils de dessin</span></div></div>',1)]))):cn("",!0),E("div",m9,[E("div",{ref_key:"mapContainer",ref:t,class:"absolute inset-0 z-[1000]"},null,512)]),$.value&&!Qe.value?($e(),He("div",{key:2,class:Fi([r.value?"translate-y-0":"translate-y-full md:translate-y-0","w-full md:w-64 bg-white border-t md:border-t-0 border-gray-200 flex-shrink-0 z-[2000] transition-transform duration-300 ease-out","fixed md:relative bottom-0 md:bottom-auto right-0 md:top-0 h-[80%] md:h-auto rounded-t-xl md:rounded-none shadow-lg md:shadow-none"]),style:{bottom:"var(--mobile-bottom-toolbar-height)"}},[E("div",{class:"md:hidden w-full flex justify-between items-center px-4 py-2 border-b border-gray-200 cursor-pointer",onClick:D},We[14]||(We[14]=[zu('<div class="flex items-center"><div class="w-10 h-1.5 bg-gray-300 rounded-full mr-3"></div></div><button class="p-1.5 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-700" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>',2)])),pi(GO,{"current-tool":Wn(d),"selected-shape":ue.value,"all-layers":((Zn=Wn(N))==null?void 0:Zn.getLayers())||[],onToolChange:Wn(_),onStyleUpdate:Wn(M),onPropertiesUpdate:ne,onDeleteShape:Ze,onFilterChange:xn,onCloseDrawer:We[4]||(We[4]=Rt=>r.value=!1)},null,8,["current-tool","selected-shape","all-layers","onToolChange","onStyleUpdate"])],2)):cn("",!0)]),Qe.value?($e(),He("div",v9,We[15]||(We[15]=[zu('<div class="text-center"><div class="mb-4"><svg class="animate-spin h-10 w-10 mx-auto text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div><p class="text-lg font-medium text-gray-900">Gnration de la synthse en cours...</p><p class="text-sm text-gray-500 mt-2">Veuillez patienter pendant que nous analysons votre plan.</p></div>',1)]))):cn("",!0)],512),[[H0,$.value]]),($e(),rl(kv,{to:"body"},[pi(px,{ref_key:"newPlanModalRef",ref:q,modelValue:fe.value,"onUpdate:modelValue":We[5]||(We[5]=Rt=>fe.value=Rt),onCreated:qe,onSalarieSelected:We[6]||(We[6]=Rt=>oe.value=Rt),onVisiteurSelected:We[7]||(We[7]=Rt=>ie.value=Rt)},null,8,["modelValue"])])),($e(),rl(kv,{to:"body"},[me.value?($e(),He("div",y9,[E("div",_9,[E("div",b9,[We[17]||(We[17]=E("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),E("button",{onClick:We[8]||(We[8]=Rt=>me.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},We[16]||(We[16]=[E("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("div",w9,[Wn(B).isAdmin?($e(),He("div",x9,[Vt.value?oe.value?xe.value?($e(),He("div",z9,[E("div",$9,[E("button",{onClick:bn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},We[32]||(We[32]=[E("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Ei(" Retour  la liste des clients ")])),We[33]||(We[33]=E("span",{class:"mx-2 text-gray-400"},"|",-1)),E("span",U9,Wt(ot(xe.value)),1)]),We[35]||(We[35]=E("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),E("div",V9,[Y.value?($e(),He(Tn,{key:0},xr(3,Rt=>E("div",{key:Rt,class:"animate-pulse"},We[34]||(We[34]=[E("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[E("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),E("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),E("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):($e(!0),He(Tn,{key:1},xr(V.value,Rt=>($e(),He("button",{key:Rt.id,onClick:Kt=>Ge(Rt.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[E("div",H9,Wt(Rt.nom),1),E("div",q9,Wt(Rt.description),1),E("div",W9," Modifi le "+Wt(ye(Rt.date_modification)),1)],8,G9))),128))])])):($e(),He("div",D9,[E("div",I9,[E("button",{onClick:Bn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},We[26]||(We[26]=[E("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Ei(" Retour  la liste des salaries ")])),We[27]||(We[27]=E("span",{class:"mx-2 text-gray-400"},"|",-1)),E("span",O9,Wt(ot(oe.value)),1)]),We[31]||(We[31]=E("h3",{class:"font-medium text-gray-700"},"Slectionnez un visiteur",-1)),E("div",B9,[Te.value?($e(),He(Tn,{key:0},xr(3,Rt=>E("div",{key:Rt,class:"animate-pulse"},We[28]||(We[28]=[E("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[E("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),E("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):($e(),He(Tn,{key:1},[ee.value.length===0?($e(),He("div",R9,We[29]||(We[29]=[E("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouv pour ce salarie",-1),E("div",{class:"text-sm text-gray-400"}," Veuillez vrifier que des visiteurs ont t assigns  ce salarie ",-1)]))):($e(!0),He(Tn,{key:1},xr(ee.value,Rt=>($e(),He("button",{key:Rt.id,onClick:Kt=>fr(Rt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[E("div",null,[E("div",j9,Wt(ot(Rt)),1)]),We[30]||(We[30]=E("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,F9))),128))],64))])])):($e(),He("div",P9,[E("div",M9,[E("button",{onClick:en,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},We[21]||(We[21]=[E("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Ei(" Retour  la liste des entreprises ")])),We[22]||(We[22]=E("span",{class:"mx-2 text-gray-400"},"|",-1)),E("span",A9,Wt(ot(Vt.value)),1)]),We[25]||(We[25]=E("h3",{class:"font-medium text-gray-700"},"Slectionnez un salarie",-1)),E("div",k9,[Ee.value?($e(),He(Tn,{key:0},xr(3,Rt=>E("div",{key:Rt,class:"animate-pulse"},We[23]||(We[23]=[E("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[E("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),E("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):($e(!0),He(Tn,{key:1},xr(Ye.value,Rt=>($e(),He("button",{key:Rt.id,onClick:Kt=>Nn(Rt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[E("div",null,[E("div",N9,Wt(ot(Rt)),1)]),We[24]||(We[24]=E("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,T9))),128))])])):($e(),He("div",L9,[We[20]||(We[20]=E("h3",{class:"font-medium text-gray-700"},"Slectionnez une entreprise",-1)),E("div",S9,[Qt.value?($e(),He(Tn,{key:0},xr(3,Rt=>E("div",{key:Rt,class:"animate-pulse"},We[18]||(We[18]=[E("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[E("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),E("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):($e(!0),He(Tn,{key:1},xr(mn.value,Rt=>($e(),He("button",{key:Rt.id,onClick:Kt=>zt(Rt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[E("div",null,[E("div",E9,Wt(ot(Rt)),1)]),We[19]||(We[19]=E("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,C9))),128))])]))])):Wn(B).isSalarie?($e(),He("div",Z9,[xe.value?($e(),He("div",ej,[E("div",tj,[E("button",{onClick:bn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},We[40]||(We[40]=[E("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Ei(" Retour  la liste des clients ")])),We[41]||(We[41]=E("span",{class:"mx-2 text-gray-400"},"|",-1)),E("span",nj,Wt(ot(xe.value)),1)]),We[43]||(We[43]=E("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),E("div",rj,[Y.value?($e(),He(Tn,{key:0},xr(3,Rt=>E("div",{key:Rt,class:"animate-pulse"},We[42]||(We[42]=[E("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[E("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),E("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),E("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):($e(!0),He(Tn,{key:1},xr(V.value,Rt=>($e(),He("button",{key:Rt.id,onClick:Kt=>Ge(Rt.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[E("div",oj,Wt(Rt.nom),1),E("div",sj,Wt(Rt.description),1),E("div",aj," Modifi le "+Wt(ye(Rt.date_modification)),1)],8,ij))),128))])])):($e(),He("div",K9,[We[39]||(We[39]=E("h3",{class:"font-medium text-gray-700"},"Slectionnez un visiteur",-1)),E("div",Y9,[Te.value?($e(),He(Tn,{key:0},xr(3,Rt=>E("div",{key:Rt,class:"animate-pulse"},We[36]||(We[36]=[E("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[E("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),E("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):($e(),He(Tn,{key:1},[ee.value.length===0?($e(),He("div",J9,We[37]||(We[37]=[E("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouv pour ce salarie",-1),E("div",{class:"text-sm text-gray-400"}," Veuillez vrifier que des visiteurs ont t assigns  ce salarie ",-1)]))):($e(!0),He(Tn,{key:1},xr(ee.value,Rt=>($e(),He("button",{key:Rt.id,onClick:Kt=>fr(Rt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[E("div",null,[E("div",Q9,Wt(ot(Rt)),1)]),We[38]||(We[38]=E("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,X9))),128))],64))])]))])):Wn(B).isEntreprise?($e(),He("div",lj,Wt(Wn(B).isEntreprise?"...":""),1)):($e(),He("div",uj,[Wn(i).plans.length===0?($e(),He("div",cj,We[44]||(We[44]=[E("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):($e(),He("div",fj,[($e(!0),He(Tn,null,xr(Wn(i).plans,Rt=>($e(),He("button",{key:Rt.id,onClick:Kt=>Ge(Rt.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[E("div",dj,Wt(Rt.nom),1),E("div",pj,Wt(Rt.description),1),E("div",gj," Modifi le "+Wt(ye(Rt.date_modification)),1)],8,hj))),128))]))]))])])])):cn("",!0)]))])]),G.value?($e(),rl(hx,{key:0,note:X.value,"is-new-note":!((qt=X.value)!=null&&qt.id),location:(gn=X.value)==null?void 0:gn.location,onClose:ar,onSave:Pn},null,8,["note","is-new-note","location"])):cn("",!0)],64)}}}),mj={class:"fixed inset-0 z-[3001] overflow-y-auto"},vj={class:"flex items-center justify-center min-h-screen w-full p-0"},yj={class:"relative bg-white w-full h-full max-h-full overflow-y-auto md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},_j={class:"p-4 md:p-6"},bj={class:"flex justify-between items-center mb-4 border-b pb-4"},wj={class:"text-xl font-semibold text-gray-900",id:"modal-headline"},xj={class:"mt-4"},Lj={key:0,class:"mb-4 rounded-md bg-red-50 p-4"},Sj={class:"flex"},Cj={class:"ml-3"},Ej={class:"text-sm font-medium text-red-800"},Pj={key:0},Mj={key:1},Aj=["value"],kj={key:2},Tj={key:3},Nj=["value"],Dj={class:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-2"},Ij={key:0,class:"mt-2 text-sm text-red-600"},Oj={key:0,class:"mt-2 text-sm text-red-600"},Bj={key:4},Rj={class:"flex items-center"},Fj={key:5},jj={key:6},zj={key:0,class:"mt-2 text-sm text-red-600"},$j={class:"flex justify-end space-x-3"},Uj=["disabled"],Vj={key:0,class:"mr-2"},Gj=cs({__name:"UserFormModal",props:{user:{type:Object,default:()=>({})},salaries:{type:Array,default:()=>[]},entreprises:{type:Array,default:()=>[]},isAdmin:{type:Boolean,default:!1},isEntreprise:{type:Boolean,default:!1},currentSalarie:{type:String,default:void 0},currentEntreprise:{type:String,default:void 0},apiErrors:{type:Array,default:()=>[]},refreshKey:{type:Number,default:0}},emits:["close","save","refresh"],setup(e,{emit:n}){const t=e,r=n,i=jt(!1),s=jt(""),o=jt(""),u=jt(""),f=jt(""),d=jt(""),g=Kl({id:void 0,first_name:"",last_name:"",username:"",email:"",password:"",company_name:"",role:t.isEntreprise?"SALARIE":t.isAdmin?"ADMIN":"VISITEUR",salarie:null,entreprise:null,is_active:!0,storage_quota:50,storage_used:0});Is(()=>{var x;(x=t.user)!=null&&x.id?(g.id=t.user.id,g.first_name=t.user.first_name||"",g.last_name=t.user.last_name||"",g.username=t.user.username||"",g.email=t.user.email||"",g.company_name=t.user.company_name||"",g.role=t.user.role||"VISITEUR",g.is_active=t.user.is_active??!0,t.user.salarie?typeof t.user.salarie=="object"?g.salarie=t.user.salarie.id:g.salarie=t.user.salarie:t.user.salarie_id?g.salarie=t.user.salarie_id:t.currentSalarie&&(g.salarie=parseInt(t.currentSalarie)),t.user.entreprise?typeof t.user.entreprise=="object"?g.entreprise=t.user.entreprise.id:g.entreprise=t.user.entreprise:t.user.entreprise_id?g.entreprise=t.user.entreprise_id:t.currentEntreprise&&(g.entreprise=parseInt(t.currentEntreprise))):(t.currentSalarie&&(g.salarie=parseInt(t.currentSalarie)),t.currentEntreprise&&(g.entreprise=parseInt(t.currentEntreprise)),t.isEntreprise?g.role="SALARIE":t.isAdmin||(g.role="VISITEUR"))}),wp(()=>{g.role==="ADMIN"||g.role==="ENTREPRISE"?(g.salarie=null,g.entreprise=null):g.role==="SALARIE"&&(g.salarie=null,t.isEntreprise&&t.currentEntreprise&&(g.entreprise=parseInt(t.currentEntreprise)))}),wp(()=>{s.value="",o.value="",u.value="",f.value="",t.apiErrors&&t.apiErrors.length>0&&t.apiErrors.forEach(x=>{switch(x.field){case"email":s.value=x.message;break;case"username":o.value=x.message;break;case"password":u.value=x.message;break;case"non_field_error":default:f.value=x.message;break}})});async function y(){s.value="",o.value="",u.value="",f.value="";let x=!0;if(g.id||(g.password!==d.value?(u.value="Les mots de passe ne correspondent pas",x=!1):g.password.length<8&&(u.value="Le mot de passe doit contenir au moins 8 caractres",x=!1)),!!x){i.value=!0;try{const _={...g};g.id&&delete _.password,t.isEntreprise&&["SALARIE","VISITEUR"].includes(g.role)&&(_.entreprise_id=t.currentEntreprise?parseInt(t.currentEntreprise):void 0),_.salarie&&(_.salarie_id=_.salarie,delete _.salarie),t.currentSalarie&&g.role==="VISITEUR"&&(_.salarie_id=parseInt(t.currentSalarie)),await r("save",_),r("refresh")}catch(_){console.error("Erreur locale:",_)}finally{i.value=!1}}}return(x,_)=>($e(),He("div",mj,[E("div",vj,[_[35]||(_[35]=E("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[E("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),E("div",yj,[E("div",null,[E("div",_j,[E("div",bj,[E("h3",wj,Wt(e.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),E("button",{type:"button",onClick:_[0]||(_[0]=M=>x.$emit("close")),class:"text-gray-400 hover:text-gray-500"},_[14]||(_[14]=[E("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("div",xj,[f.value?($e(),He("div",Lj,[E("div",Sj,[_[15]||(_[15]=E("div",{class:"flex-shrink-0"},[E("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),E("div",Cj,[E("h3",Ej,Wt(f.value),1)])])])):cn("",!0),E("form",{onSubmit:Cf(y,["prevent"]),class:"space-y-6"},[e.isAdmin?($e(),He("div",Pj,[_[17]||(_[17]=E("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),Fn(E("select",{id:"role","onUpdate:modelValue":_[1]||(_[1]=M=>g.role=M),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},_[16]||(_[16]=[E("option",{value:"ADMIN"},"Administrateur",-1),E("option",{value:"ENTREPRISE"},"Entreprise",-1),E("option",{value:"SALARIE"},"Salarie",-1),E("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[uo,g.role]])])):cn("",!0),e.isAdmin&&g.role==="SALARIE"?($e(),He("div",Mj,[_[19]||(_[19]=E("label",{for:"entreprise",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Fn(E("select",{id:"entreprise","onUpdate:modelValue":_[2]||(_[2]=M=>g.entreprise=M),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},[_[18]||(_[18]=E("option",{value:null},"-- Slectionner une entreprise --",-1)),($e(!0),He(Tn,null,xr(e.entreprises,M=>($e(),He("option",{key:M.id,value:M.id},Wt(M.first_name)+" "+Wt(M.last_name)+" ("+Wt(M.company_name||"Entreprise")+") ",9,Aj))),128))],512),[[uo,g.entreprise]])])):cn("",!0),e.isEntreprise&&!g.id?($e(),He("div",kj,[_[21]||(_[21]=E("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),Fn(E("select",{id:"role","onUpdate:modelValue":_[3]||(_[3]=M=>g.role=M),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},_[20]||(_[20]=[E("option",{value:"SALARIE"},"Salarie",-1),E("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[uo,g.role]])])):cn("",!0),(e.isAdmin||e.isEntreprise)&&g.role==="VISITEUR"&&!e.currentSalarie?($e(),He("div",Tj,[_[23]||(_[23]=E("label",{for:"salarie",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),Fn(E("select",{id:"salarie","onUpdate:modelValue":_[4]||(_[4]=M=>g.salarie=M),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},[_[22]||(_[22]=E("option",{value:null},"-- Slectionner un salarie --",-1)),($e(!0),He(Tn,null,xr(e.salaries,M=>($e(),He("option",{key:M.id,value:M.id},Wt(M.first_name)+" "+Wt(M.last_name)+" ("+Wt(M.company_name||"Salarie")+") ",9,Nj))),128))],512),[[uo,g.salarie]])])):cn("",!0),E("div",Dj,[E("div",null,[_[24]||(_[24]=E("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prnom",-1)),Fn(E("input",{type:"text",id:"first_name","onUpdate:modelValue":_[5]||(_[5]=M=>g.first_name=M),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ri,g.first_name]])]),E("div",null,[_[25]||(_[25]=E("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),Fn(E("input",{type:"text",id:"last_name","onUpdate:modelValue":_[6]||(_[6]=M=>g.last_name=M),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ri,g.last_name]])])]),E("div",null,[_[26]||(_[26]=E("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),Fn(E("input",{type:"email",id:"email","onUpdate:modelValue":_[7]||(_[7]=M=>g.email=M),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ri,g.email]]),s.value?($e(),He("div",Ij,Wt(s.value),1)):cn("",!0)]),E("div",null,[_[27]||(_[27]=E("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),Fn(E("input",{type:"text",id:"username","onUpdate:modelValue":_[8]||(_[8]=M=>g.username=M),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ri,g.username]]),o.value?($e(),He("div",Oj,Wt(o.value),1)):cn("",!0)]),E("div",null,[_[28]||(_[28]=E("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Fn(E("input",{type:"text",id:"company_name","onUpdate:modelValue":_[9]||(_[9]=M=>g.company_name=M),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ri,g.company_name]])]),g.role==="ENTREPRISE"||g.role==="SALARIE"?($e(),He("div",Bj,[_[30]||(_[30]=E("label",{for:"storage_quota",class:"block text-sm font-medium text-gray-700"},"Quota de stockage (MB)",-1)),E("div",Rj,[Fn(E("input",{type:"number",id:"storage_quota","onUpdate:modelValue":_[10]||(_[10]=M=>g.storage_quota=M),min:"1",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ri,g.storage_quota]]),_[29]||(_[29]=E("span",{class:"ml-2 text-sm text-gray-500"},"MB",-1))]),_[31]||(_[31]=E("p",{class:"mt-1 text-sm text-gray-500"},"Espace de stockage maximum pour les photos des notes",-1))])):cn("",!0),g.id?cn("",!0):($e(),He("div",Fj,[_[32]||(_[32]=E("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),Fn(E("input",{type:"password",id:"password","onUpdate:modelValue":_[11]||(_[11]=M=>g.password=M),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ri,g.password]])])),g.id?cn("",!0):($e(),He("div",jj,[_[33]||(_[33]=E("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),Fn(E("input",{type:"password",id:"password_confirm","onUpdate:modelValue":_[12]||(_[12]=M=>d.value=M),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ri,d.value]]),u.value?($e(),He("div",zj,Wt(u.value),1)):cn("",!0)])),E("div",$j,[E("button",{type:"button",onClick:_[13]||(_[13]=M=>x.$emit("close")),class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Annuler "),E("button",{type:"submit",disabled:i.value,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[i.value?($e(),He("span",Vj,_[34]||(_[34]=[E("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[E("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),E("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):cn("",!0),Ei(" "+Wt(g.id?"Enregistrer":"Crer"),1)],8,Uj)])],32)])])])])])]))}}),Hj={class:"fixed inset-0 z-[3001] overflow-y-auto"},qj={class:"flex items-center justify-center min-h-screen w-full"},Wj={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},Zj={class:"p-4 md:p-6"},Kj={class:"flex items-start"},Yj={class:"ml-4 flex-1"},Jj={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},Xj={class:"mt-2"},Qj={class:"text-sm text-gray-500"},ez={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3"},Bx=cs({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(e){return(n,t)=>($e(),He("div",Hj,[E("div",qj,[t[3]||(t[3]=E("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[E("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),E("div",Wj,[E("div",Zj,[E("div",Kj,[t[2]||(t[2]=E("div",{class:"flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[E("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),E("div",Yj,[E("h3",Jj,Wt(e.title),1),E("div",Xj,[E("p",Qj,Wt(e.message),1)])])]),E("div",ez,[E("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm",onClick:t[0]||(t[0]=r=>n.$emit("confirm"))}," Confirmer "),E("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm",onClick:t[1]||(t[1]=r=>n.$emit("cancel"))}," Annuler ")])])])])]))}}),tz={class:"h-full bg-gray-50"},nz={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},rz={class:"flex justify-between items-center mb-8"},iz={class:"text-3xl font-extrabold text-gray-900"},oz={key:0},sz={key:1},az={key:2},lz={key:0},uz={key:1},cz={key:2},fz={class:"bg-white shadow rounded-lg mb-6 p-4"},hz={class:"space-y-4"},dz={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},pz={key:0},gz={key:0,value:"ADMIN"},mz={key:1,value:"ENTREPRISE"},vz={key:1},yz=["value"],_z={key:2},bz=["value"],wz={class:"w-full"},xz={class:"bg-white shadow rounded-lg"},Lz={class:"overflow-x-auto"},Sz={class:"min-w-full divide-y divide-gray-200"},Cz={class:"bg-gray-50"},Ez={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Pz={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Mz={class:"bg-white divide-y divide-gray-200"},Az={key:0,class:"animate-pulse"},kz={key:1},Tz={class:"px-6 py-4 whitespace-nowrap"},Nz={class:"flex items-center"},Dz={class:"flex-shrink-0 h-10 w-10"},Iz={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},Oz={class:"text-primary-600 font-medium"},Bz={class:"ml-4"},Rz={class:"text-sm font-medium text-gray-900"},Fz={class:"text-sm text-gray-500"},jz={class:"px-6 py-4 whitespace-nowrap"},zz={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},$z={key:0,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Uz={key:1,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Vz={class:"px-6 py-4 whitespace-nowrap"},Gz={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Hz=["onClick"],qz=["onClick"],Wz={key:0,class:"fixed inset-0 z-[3001] overflow-y-auto"},Zz=cs({__name:"UserListView",setup(e){const n=ma(),t=Vu(),r=jt([]),i=jt([]),s=jt([]),o=jt(!1),u=jt(!1),f=jt(null),d=jt(null),g=jt(!0),y=jt([]),x=Kl({role:"",search:"",salarie:"",entreprise:""}),_=cr(()=>n.isAdmin),M=cr(()=>n.isEntreprise),k=cr(()=>n.isSalarie),N=cr(()=>_.value?r.value.filter(z=>z.role==="SALARIE"):M.value?r.value.filter(z=>{var W,V;return z.role==="SALARIE"&&((W=z.entreprise)==null?void 0:W.id)===((V=n.user)==null?void 0:V.id)}):[]),T=cr(()=>{let z=r.value;if(M.value&&(z=z.filter(W=>{var V,oe,ie,xe,Ee;return W.role==="SALARIE"?((V=W.entreprise)==null?void 0:V.id)===((oe=n.user)==null?void 0:oe.id):W.role==="VISITEUR"?((xe=(ie=W.salarie)==null?void 0:ie.entreprise)==null?void 0:xe.id)===((Ee=n.user)==null?void 0:Ee.id):!1})),k.value&&(z=z.filter(W=>{var V,oe;return W.role==="VISITEUR"&&(W.salarie_id===((V=n.user)==null?void 0:V.id)||W.salarie&&W.salarie.id===((oe=n.user)==null?void 0:oe.id))})),(_.value||M.value)&&(x.role&&(z=z.filter(W=>W.role===x.role)),x.salarie&&(z=z.filter(W=>{var oe;const V=((oe=W.salarie)==null?void 0:oe.id)||W.salarie_id;return(V==null?void 0:V.toString())===x.salarie.toString()})),x.entreprise&&_.value&&(z=z.filter(W=>{var V,oe,ie,xe,Ee;return W.role==="SALARIE"?((oe=(V=W.entreprise)==null?void 0:V.id)==null?void 0:oe.toString())===x.entreprise.toString():W.role==="VISITEUR"?((Ee=(xe=(ie=W.salarie)==null?void 0:ie.entreprise)==null?void 0:xe.id)==null?void 0:Ee.toString())===x.entreprise.toString():!1}))),x.search){const W=x.search.toLowerCase();z=z.filter(V=>{var oe,ie,xe,Ee;return((oe=V.username)==null?void 0:oe.toLowerCase().includes(W))||((ie=V.email)==null?void 0:ie.toLowerCase().includes(W))||((xe=V.first_name)==null?void 0:xe.toLowerCase().includes(W))||((Ee=V.last_name)==null?void 0:Ee.toLowerCase().includes(W))||V.company_name&&V.company_name.toLowerCase().includes(W)})}return z});Is(async()=>{await F(),await K()});async function F(){var z,W,V;g.value=!0;try{if(_.value)r.value=await n.fetchUsers();else if(M.value){const[oe,ie]=await Promise.all([rp({role:"SALARIE",entrepriseId:(z=n.user)==null?void 0:z.id}),rp({role:"VISITEUR",entrepriseId:(W=n.user)==null?void 0:W.id})]);r.value=[...oe,...ie]}else k.value&&(r.value=await rp({role:"VISITEUR",salarieId:(V=n.user)==null?void 0:V.id,includeDetails:!0}),console.log("Visiteurs rcuprs:",r.value))}catch(oe){console.error("Erreur lors de la rcupration des utilisateurs:",oe),t.error("Erreur lors de la rcupration des utilisateurs")}finally{g.value=!1}}async function K(){try{_.value?await Promise.all([Q(),fe()]):M.value&&await he()}catch(z){console.error("Erreur lors de la rcupration des dpendances:",z)}}async function Q(){var z;try{_.value?i.value=await n.fetchUsersByRole({role:"SALARIE"}):M.value&&(i.value=await n.fetchEntrepriseSalaries((z=n.user)==null?void 0:z.id))}catch(W){console.error("Erreur lors de la rcupration des salaries:",W)}}async function he(){var z,W;if(!(!M.value||!((z=n.user)!=null&&z.id)))try{i.value=await n.fetchEntrepriseSalaries((W=n.user)==null?void 0:W.id)}catch(V){console.error("Erreur lors de la rcupration des salaries de l'entreprise:",V)}}async function fe(){try{s.value=await n.fetchEnterprises()}catch(z){console.error("Erreur lors de la rcupration des entreprises:",z)}}function me(){f.value=null,o.value=!0}function G(z){f.value={...z},o.value=!0}function $(){o.value=!1,f.value=null,y.value=[]}async function X(z){var V,oe,ie,xe,Ee,Te;y.value=[];const W=!!z.id;try{const Y={...z};_.value?(Y.entreprise&&typeof Y.entreprise=="object"?Y.entreprise_id=Y.entreprise.id:typeof Y.entreprise=="number"&&(Y.entreprise_id=Y.entreprise),Y.salarie&&typeof Y.salarie=="object"?Y.salarie_id=Y.salarie.id:typeof Y.salarie=="number"&&(Y.salarie_id=Y.salarie)):M.value?(Y.entreprise_id=(V=n.user)==null?void 0:V.id,Y.role==="VISITEUR"&&(Y.salarie&&typeof Y.salarie=="object"?Y.salarie_id=Y.salarie.id:typeof Y.salarie=="number"&&(Y.salarie_id=Y.salarie))):k.value&&(Y.role="VISITEUR",Y.salarie_id=(oe=n.user)==null?void 0:oe.id),Y.role==="SALARIE"?((ie=Y.entreprise)!=null&&ie.id?(Y.entreprise_id=Y.entreprise.id,delete Y.entreprise):typeof Y.entreprise=="number"&&(Y.entreprise_id=Y.entreprise,delete Y.entreprise),delete Y.salarie):Y.role==="VISITEUR"&&((xe=Y.salarie)!=null&&xe.id?(Y.salarie_id=Y.salarie.id,delete Y.salarie):typeof Y.salarie=="number"&&(Y.salarie_id=Y.salarie,delete Y.salarie),delete Y.entreprise,delete Y.entreprise_id),W?(await n.updateUser(z.id,Y),t.success("Utilisateur modifi avec succs")):(await n.createUser(Y),t.success("Utilisateur cr avec succs")),await Promise.all([F(),K()]),$()}catch(Y){console.error("Error saving user:",((Ee=Y.response)==null?void 0:Ee.data)||Y),y.value=B5(Y),t.error("Erreur lors de la sauvegarde de l'utilisateur");const q=((Te=Y.response)==null?void 0:Te.data)||{};let ee="";throw typeof q=="object"&&(ee=Object.entries(q).map(([ue,le])=>Array.isArray(le)?`${ue}: ${le[0]}`:`${ue}: ${le}`).filter(ue=>ue).join(`
`)),ee||(ee="Une erreur est survenue lors de la sauvegarde"),new Error(ee)}}function R(z){d.value=z,u.value=!0}async function O(){if(d.value)try{await n.deleteUser(d.value.id),t.success("Utilisateur supprim avec succs"),await Promise.all([F(),K()]),u.value=!1,d.value=null}catch(z){throw console.error("Erreur lors de la suppression de l'utilisateur:",z),t.error("Erreur lors de la suppression de l'utilisateur"),z}}function B(z){var W,V,oe,ie,xe,Ee,Te,Y;return _.value?!0:M.value?z.role==="SALARIE"?((W=z.entreprise)==null?void 0:W.id)===((V=n.user)==null?void 0:V.id):z.role==="VISITEUR"?((ie=(oe=z.salarie)==null?void 0:oe.entreprise)==null?void 0:ie.id)===((xe=n.user)==null?void 0:xe.id):!1:k.value?z.role==="VISITEUR"&&(z.salarie_id===((Ee=n.user)==null?void 0:Ee.id)||((Te=z.salarie)==null?void 0:Te.id)===((Y=n.user)==null?void 0:Y.id)):!1}return(z,W)=>{var V,oe,ie,xe;return $e(),He("div",tz,[E("div",nz,[E("div",rz,[E("h1",iz,[_.value?($e(),He("span",oz,"Gestion des utilisateurs")):M.value?($e(),He("span",sz,"Gestion des salaries et visiteurs")):k.value?($e(),He("span",az,"Gestion des visiteurs")):cn("",!0)]),E("button",{onClick:me,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[W[5]||(W[5]=E("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),_.value?($e(),He("span",lz,"Nouvel utilisateur")):M.value?($e(),He("span",uz,"Nouveau salarie/visiteur")):k.value?($e(),He("span",cz,"Nouvel visiteur")):cn("",!0)])]),E("div",fz,[E("div",hz,[E("div",dz,[_.value||M.value?($e(),He("div",pz,[W[9]||(W[9]=E("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rle",-1)),Fn(E("select",{id:"role-filter","onUpdate:modelValue":W[0]||(W[0]=Ee=>x.role=Ee),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[W[6]||(W[6]=E("option",{value:""},"Tous les rles",-1)),_.value?($e(),He("option",gz,"Administrateur")):cn("",!0),_.value?($e(),He("option",mz,"Entreprise")):cn("",!0),W[7]||(W[7]=E("option",{value:"SALARIE"},"Salarie",-1)),W[8]||(W[8]=E("option",{value:"VISITEUR"},"Visiteur",-1))],512),[[uo,x.role]])])):cn("",!0),_.value?($e(),He("div",vz,[W[11]||(W[11]=E("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Fn(E("select",{id:"entreprise-filter","onUpdate:modelValue":W[1]||(W[1]=Ee=>x.entreprise=Ee),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[W[10]||(W[10]=E("option",{value:""},"Toutes les entreprises",-1)),($e(!0),He(Tn,null,xr(s.value,Ee=>($e(),He("option",{key:Ee.id,value:Ee.id},Wt(Wn(Vl)(Ee)),9,yz))),128))],512),[[uo,x.entreprise]])])):cn("",!0),_.value||M.value?($e(),He("div",_z,[W[13]||(W[13]=E("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),Fn(E("select",{id:"salarie-filter","onUpdate:modelValue":W[2]||(W[2]=Ee=>x.salarie=Ee),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[W[12]||(W[12]=E("option",{value:""},"Tous les salaries",-1)),($e(!0),He(Tn,null,xr(N.value,Ee=>($e(),He("option",{key:Ee.id,value:Ee.id},Wt(Wn(Vl)(Ee)),9,bz))),128))],512),[[uo,x.salarie]])])):cn("",!0)]),E("div",wz,[W[14]||(W[14]=E("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),Fn(E("input",{type:"text",id:"search","onUpdate:modelValue":W[3]||(W[3]=Ee=>x.search=Ee),placeholder:"Rechercher par nom, email, entreprise...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[ri,x.search]])])])]),E("div",xz,[E("div",Lz,[E("table",Sz,[E("thead",Cz,[E("tr",null,[W[15]||(W[15]=E("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Utilisateur ",-1)),W[16]||(W[16]=E("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rle ",-1)),W[17]||(W[17]=E("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),_.value||M.value?($e(),He("th",Ez," Entreprise ")):cn("",!0),_.value||M.value?($e(),He("th",Pz," Salarie ")):cn("",!0),W[18]||(W[18]=E("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),W[19]||(W[19]=E("th",{scope:"col",class:"relative px-6 py-3"},[E("span",{class:"sr-only"},"Actions")],-1))])]),E("tbody",Mz,[g.value?($e(),He("tr",Az,W[20]||(W[20]=[E("td",{colspan:"7",class:"py-4 px-6"},[E("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):T.value.length===0?($e(),He("tr",kz,W[21]||(W[21]=[E("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun utilisateur trouv ",-1)]))):cn("",!0),($e(!0),He(Tn,null,xr(T.value,Ee=>{var Te;return $e(),He("tr",{key:Ee.id},[E("td",Tz,[E("div",Nz,[E("div",Dz,[E("div",Iz,[E("span",Oz,Wt(Wn(sT)(Ee.first_name,Ee.last_name)),1)])]),E("div",Bz,[E("div",Rz,Wt(Wn(Vl)(Ee)),1),E("div",Fz,Wt(Ee.username),1)])])]),E("td",jz,[E("span",{class:Fi(Wn(uT)())},Wt(Wn(lT)(Ee.role)),3)]),E("td",zz,Wt(Ee.email),1),_.value||M.value?($e(),He("td",$z,[Ee.role==="ENTREPRISE"?($e(),He(Tn,{key:0},[Ei(" - ")],64)):Ee.role==="SALARIE"?($e(),He(Tn,{key:1},[Ei(Wt(Ee.entreprise?Wn(Vl)(Ee.entreprise):"Non assign"),1)],64)):Ee.role==="VISITEUR"?($e(),He(Tn,{key:2},[Ei(Wt((Te=Ee.salarie)!=null&&Te.entreprise?Wn(Vl)(Ee.salarie.entreprise):"Non assign"),1)],64)):($e(),He(Tn,{key:3},[Ei(" - ")],64))])):cn("",!0),_.value||M.value?($e(),He("td",Uz,[Ee.role==="ENTREPRISE"||Ee.role==="ADMIN"?($e(),He(Tn,{key:0},[Ei(" - ")],64)):Ee.role==="SALARIE"?($e(),He(Tn,{key:1},[Ei(" - ")],64)):($e(),He(Tn,{key:2},[Ei(Wt(Ee.salarie?Wn(Vl)(Ee.salarie):"Non assign"),1)],64))])):cn("",!0),E("td",Vz,[E("span",{class:Fi(Wn(cT)(Ee.is_active))},Wt(Ee.is_active?"Actif":"Inactif"),3)]),E("td",Gz,[E("button",{onClick:Y=>G(Ee),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,Hz),B(Ee)?($e(),He("button",{key:0,onClick:Y=>R(Ee),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,qz)):cn("",!0)])])}),128))])])])])]),o.value?($e(),He("div",Wz,[pi(Gj,{user:f.value,salaries:i.value,entreprises:s.value,"is-admin":_.value,"is-entreprise":M.value,"current-salarie":k.value?(oe=(V=Wn(n).user)==null?void 0:V.id)==null?void 0:oe.toString():void 0,"current-entreprise":M.value?(xe=(ie=Wn(n).user)==null?void 0:ie.id)==null?void 0:xe.toString():void 0,"api-errors":y.value,onClose:$,onSave:X},null,8,["user","salaries","entreprises","is-admin","is-entreprise","current-salarie","current-entreprise","api-errors"])])):cn("",!0),u.value?($e(),rl(Bx,{key:1,title:"Supprimer l'utilisateur",message:"tes-vous sr de vouloir supprimer cet utilisateur ? Cette action est irrversible.",onConfirm:O,onCancel:W[4]||(W[4]=Ee=>u.value=!1)})):cn("",!0)])}}}),Kz={class:"h-full bg-gray-50"},Yz={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Jz={class:"sm:flex sm:items-center"},Xz={class:"sm:flex-auto"},Qz={class:"text-2xl font-semibold text-gray-900"},e$={class:"mt-2 text-sm text-gray-700"},t$={key:0,class:"mt-8"},n$={class:"mb-6"},r$=["value"],i$={class:"mb-6"},o$={value:null},s$=["value"],a$={key:0,class:"mb-6"},l$={value:null},u$=["value"],c$={key:1,class:"mt-8"},f$={class:"mb-6"},h$=["value"],d$={class:"mt-8"},p$={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},g$={class:"overflow-x-auto"},m$={class:"min-w-full divide-y divide-gray-300"},v$={class:"bg-gray-50"},y$={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"},_$={class:"ml-2 flex-none rounded"},b$={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},w$={class:"ml-2 flex-none rounded"},x$={class:"divide-y divide-gray-200 bg-white"},L$={key:0},S$={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},C$={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},E$={class:"px-3 py-4 text-sm text-gray-900"},P$={key:0,class:"flex items-center"},M$={class:"h-8 w-8 flex-shrink-0"},A$={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},k$={class:"text-primary-700 font-medium text-sm"},T$={class:"ml-3"},N$={class:"font-medium"},D$={key:1,class:"text-gray-500"},I$={class:"px-3 py-4 text-sm text-gray-900"},O$={key:0,class:"flex items-center"},B$={class:"h-8 w-8 flex-shrink-0"},R$={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},F$={class:"text-primary-700 font-medium text-sm"},j$={class:"ml-3"},z$={class:"font-medium"},$$={key:1,class:"text-gray-500"},U$={class:"px-3 py-4 text-sm text-gray-900"},V$={key:0,class:"flex items-center"},G$={class:"h-8 w-8 flex-shrink-0"},H$={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},q$={class:"text-primary-700 font-medium text-sm"},W$={class:"ml-3"},Z$={class:"font-medium"},K$={key:1,class:"text-gray-500"},Y$={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},J$={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},X$=["onClick"],Q$=["onClick"],eU=["onClick"],tU={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},nU={class:"bg-white rounded-lg p-6 max-w-md w-full"},rU={class:"flex justify-between items-center mb-4"},iU=["disabled"],oU=["disabled"],sU={key:0,class:"space-y-4"},aU={key:0},lU=["disabled"],uU=["value"],cU=["disabled"],fU=["value"],hU={key:0,class:"mt-1 text-sm text-gray-500"},dU=["disabled"],pU=["value"],gU={key:0,class:"mt-1 text-sm text-gray-500"},mU={key:1,class:"mt-4 bg-red-50 p-4 rounded-md"},vU={class:"flex"},yU={class:"ml-3"},_U={class:"text-sm font-medium text-red-800"},bU={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},wU=["disabled"],xU={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},LU=cs({__name:"PlansView",setup(e){const n=Bp(),t=py(),r=ma(),i=jt([]),s=jt([]),o=jt([]),u=jt([]),f=jt(!1),d=jt(!1),g=jt(!1),y=jt(null),x=jt({nom:"",description:"",client:null}),_=jt({id:0,nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),M=jt(!1),k=jt(null),N=jt(null),T=jt(null),F=jt("date_modification"),K=jt("desc"),Q=jt(null),he=cr(()=>N.value?u.value.filter(Z=>typeof Z.salarie=="object"&&Z.salarie?Z.salarie.id===N.value:Z.salarie===N.value||Z.salarie_id===N.value):u.value),fe=cr(()=>{let Z=i.value;console.log(`
[PlansView] Filtering plans:`,Z.map(ke=>({id:ke.id,entreprise:ke.entreprise,salarie:ke.salarie,visiteur:ke.visiteur}))),r.isAdmin?(Q.value&&(Z=Z.filter(ke=>{var Me;return typeof ke.entreprise=="object"?((Me=ke.entreprise)==null?void 0:Me.id)===Q.value:ke.entreprise===Q.value})),N.value&&(Z=Z.filter(ke=>{var Me;return typeof ke.salarie=="object"?((Me=ke.salarie)==null?void 0:Me.id)===N.value:ke.salarie===N.value}),T.value&&(Z=Z.filter(ke=>{var Me;return typeof ke.visiteur=="object"?((Me=ke.visiteur)==null?void 0:Me.id)===T.value:ke.visiteur===T.value})))):r.isSalarie&&(Z=Z.filter(ke=>{var Me,Ge,ce;return typeof ke.salarie=="object"?((Me=ke.salarie)==null?void 0:Me.id)===((Ge=r.user)==null?void 0:Ge.id):ke.salarie===((ce=r.user)==null?void 0:ce.id)}),T.value&&(Z=Z.filter(ke=>{var Me;return typeof ke.visiteur=="object"?((Me=ke.visiteur)==null?void 0:Me.id)===T.value:ke.visiteur===T.value})));const D=[...Z].sort((ke,Me)=>{if(F.value==="nom")return K.value==="asc"?ke.nom.localeCompare(Me.nom):Me.nom.localeCompare(ke.nom);{const Ge=new Date(ke[F.value]).getTime(),ce=new Date(Me[F.value]).getTime();return K.value==="asc"?Ge-ce:ce-Ge}});return console.log("[PlansView] Final filtered and sorted plans:",D.map(ke=>({id:ke.id,entreprise:ke.entreprise,salarie:ke.salarie,visiteur:ke.visiteur}))),D}),me=cr(()=>r.isAdmin?{title:"Tous les plans",description:"Liste complte des plans",plans:i.value}:r.isSalarie?{title:"Plans des visiteurs",description:"Plans o vous tes assign comme salarie",plans:i.value.filter(Z=>{var D,ke,Me;return typeof Z.salarie=="object"?((D=Z.salarie)==null?void 0:D.id)===((ke=r.user)==null?void 0:ke.id):Z.salarie===((Me=r.user)==null?void 0:Me.id)})}:{title:"Mes plans",description:"Plans qui vous sont assigns ou que vous avez crs",plans:i.value.filter(Z=>{var Me,Ge,ce,ne;const D=Z.createur.id===((Me=r.user)==null?void 0:Me.id);let ke=!1;return typeof Z.visiteur=="object"?ke=((Ge=Z.visiteur)==null?void 0:Ge.id)===((ce=r.user)==null?void 0:ce.id):ke=Z.visiteur===((ne=r.user)==null?void 0:ne.id),ke||D})}),G=cr(()=>Q.value?s.value.filter(Z=>{var D;return typeof Z.entreprise=="object"?((D=Z.entreprise)==null?void 0:D.id)===Q.value:Z.entreprise_id===Q.value}):s.value),$=cr(()=>_.value.entreprise?s.value.filter(Z=>{var D;return typeof Z.entreprise=="object"?((D=Z.entreprise)==null?void 0:D.id)===_.value.entreprise:Z.entreprise_id===_.value.entreprise}):[]),X=cr(()=>!_.value.entreprise||!_.value.salarie?[]:u.value.filter(Z=>typeof Z.salarie=="object"&&Z.salarie?Z.salarie.id===_.value.salarie:Z.salarie===_.value.salarie||Z.salarie_id===_.value.salarie));Is(async()=>{var Z;await R(),r.isAdmin?await O():r.isSalarie&&await z(((Z=r.user)==null?void 0:Z.id)||0)});async function R(){try{const Z=await t.fetchPlansWithDetails();i.value=Z.data}catch(Z){console.error("Erreur lors du chargement des plans:",Z)}}async function O(){try{console.log("Chargement des entreprises..."),o.value=await r.fetchEnterprises(),console.log("Entreprises charges:",o.value)}catch(Z){console.error("Erreur lors du chargement des entreprises:",Z)}}async function B(Z){try{if(console.log("Chargement des salaries pour l'entreprise:",Z),Z===void 0){const D=await r.fetchUsersByRole({role:"SALARIE"});s.value=D}else s.value=await r.fetchEntrepriseSalaries(Z);console.log("Salaries chargs:",s.value)}catch(D){console.error("Erreur lors du chargement des salaries:",D)}}async function z(Z){try{console.log("Chargement des visiteurs pour le salarie:",Z);const D=await rp({role:"VISITEUR",salarieId:Z});u.value=D.map(ke=>({...ke,salarie_id:Z})),console.log("Visiteurs chargs:",u.value)}catch(D){console.error("Erreur lors du chargement des visiteurs:",D)}}function W(){f.value=!0,x.value={nom:"",description:"",client:null}}async function V(Z){console.log(`
[PlansView][editPlan] ====== DBUT DITION PLAN ======`),console.log("[PlansView][editPlan] Plan reu:",{id:Z.id,nom:Z.nom,entreprise:Z.entreprise,salarie:Z.salarie,visiteur:Z.visiteur});try{console.log("[PlansView][editPlan] Dfinition du plan courant dans le store..."),t.setCurrentPlan(Z),console.log("[PlansView][editPlan] Sauvegarde de l'ID dans localStorage:",Z.id),localStorage.setItem("lastPlanId",Z.id.toString()),console.log("[PlansView][editPlan] Redirection vers la vue carte..."),await n.push("/"),console.log(`[PlansView][editPlan] ====== FIN DITION PLAN ======
`)}catch(D){console.error("[PlansView][editPlan] ERREUR:",D),D instanceof Error&&console.error("[PlansView][editPlan] Stack trace:",D.stack),alert("Une erreur est survenue lors du chargement du plan")}}async function oe(Z){Z!=null&&Z.id&&(y.value=Z,g.value=!0)}async function ie(){var Z,D;if((Z=y.value)!=null&&Z.id)try{await t.deletePlan(y.value.id),await R(),((D=t.currentPlan)==null?void 0:D.id)===y.value.id&&t.clearCurrentPlan()}catch(ke){console.error("Erreur lors de la suppression du plan:",ke),alert("Une erreur est survenue lors de la suppression du plan")}finally{g.value=!1,y.value=null}}function xe(){g.value=!1,y.value=null}function Ee(Z){return new Date(Z).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function Te(Z){if(!Z)return"";const D=Z.first_name||"",ke=Z.last_name||"";return(D.charAt(0)+ke.charAt(0)).toUpperCase()}async function Y(Z){M.value=!0,k.value=null;try{r.isAdmin&&!o.value.length&&await O();const D=typeof Z.entreprise=="object"&&Z.entreprise?Z.entreprise.id:Z.entreprise,ke=typeof Z.salarie=="object"&&Z.salarie?Z.salarie.id:Z.salarie,Me=typeof Z.visiteur=="object"&&Z.visiteur?Z.visiteur.id:Z.visiteur;_.value={id:Z.id,nom:Z.nom,description:Z.description,entreprise:D||null,salarie:ke||null,visiteur:Me||null},D&&await B(D),ke&&await z(ke),d.value=!0}catch(D){console.error("Erreur lors de l'ouverture du modal:",D),k.value="Erreur lors du chargement des donnes"}finally{M.value=!1}}async function q(){var Z,D,ke,Me,Ge;k.value=null,M.value=!0;try{if(!_.value.nom.trim())throw new Error("Le nom du plan est requis");if(_.value.visiteur&&!_.value.salarie)throw new Error("Un salarie doit tre slectionn pour assigner un visiteur");if(_.value.salarie&&!_.value.entreprise)throw new Error("Une entreprise doit tre slectionne pour assigner un salarie");console.log("Donnes envoyes pour la mise  jour:",{id:_.value.id,nom:_.value.nom.trim(),description:_.value.description.trim(),entreprise_id:_.value.entreprise,salarie_id:_.value.salarie,visiteur_id:_.value.visiteur});const ce=await t.updatePlanDetails(_.value.id,{nom:_.value.nom.trim(),description:_.value.description.trim(),entreprise_id:_.value.entreprise,salarie_id:_.value.salarie,visiteur_id:_.value.visiteur});console.log("Rponse de la mise  jour:",ce),ce&&(d.value=!1,await R())}catch(ce){if(console.error("Erreur lors de la mise  jour du plan:",ce),(D=(Z=ce.response)==null?void 0:Z.data)!=null&&D.detail)k.value=ce.response.data.detail;else if((Me=(ke=ce.response)==null?void 0:ke.data)!=null&&Me.non_field_errors)k.value=ce.response.data.non_field_errors[0];else if((Ge=ce.response)!=null&&Ge.data){const ne=Object.entries(ce.response.data).map(([ye,de])=>`${ye}: ${Array.isArray(de)?de[0]:de}`);k.value=ne.join(`
`)}else k.value=ce.message||"Une erreur est survenue lors de la mise  jour du plan"}finally{M.value=!1}}Co(()=>Q.value,async Z=>{N.value=null,T.value=null,Z?await B(Z):await B()}),Co(()=>N.value,async Z=>{T.value=null,Z&&await z(Z)}),Co(()=>_.value.entreprise,async Z=>{Z===null?(_.value.salarie=null,_.value.visiteur=null):await B(Z)}),Co(()=>_.value.salarie,async Z=>{_.value.visiteur=null,Z&&await z(Z)});function ee(Z){var Ge,ce,ne;const D=r.user;if(!D)return!1;if(D.user_type==="admin")return!0;if(D.user_type==="entreprise")return typeof Z.entreprise=="object"?((Ge=Z.entreprise)==null?void 0:Ge.id)===D.id:Z.entreprise===D.id;if(D.user_type==="salarie")return typeof Z.salarie=="object"?((ce=Z.salarie)==null?void 0:ce.id)===D.id:Z.salarie===D.id;const ke=Z.createur.id===D.id;let Me=!1;return typeof Z.visiteur=="object"?Me=((ne=Z.visiteur)==null?void 0:ne.id)===D.id:Me=Z.visiteur===D.id,Me||ke}async function ue(Z){await R(),localStorage.setItem("lastPlanId",Z.toString()),console.log(`Plan ${Z} cr et dfini comme plan actif`),n.push("/")}function le(Z){F.value===Z?K.value=K.value==="asc"?"desc":"asc":(F.value=Z,K.value="desc")}function pe(Z){return Z?Vl(Z):""}return(Z,D)=>{var ke;return $e(),He("div",Kz,[E("div",Yz,[E("div",Jz,[E("div",Xz,[E("h1",Qz,Wt(me.value.title),1),E("p",e$,Wt(me.value.description),1)]),E("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[E("button",{onClick:W,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),Wn(r).isAdmin?($e(),He("div",t$,[E("div",n$,[D[15]||(D[15]=E("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par entreprise",-1)),Fn(E("select",{id:"entreprise-filter","onUpdate:modelValue":D[0]||(D[0]=Me=>Q.value=Me),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[D[14]||(D[14]=E("option",{value:null},"Toutes les entreprises",-1)),($e(!0),He(Tn,null,xr(o.value,Me=>($e(),He("option",{key:Me.id,value:Me.id},Wt(pe(Me)),9,r$))),128))],512),[[uo,Q.value]])]),E("div",i$,[D[16]||(D[16]=E("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par salarie",-1)),Fn(E("select",{id:"salarie-filter","onUpdate:modelValue":D[1]||(D[1]=Me=>N.value=Me),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[E("option",o$,Wt(G.value.length?"Tous les salaries":"Aucun salarie disponible"),1),($e(!0),He(Tn,null,xr(G.value,Me=>($e(),He("option",{key:Me.id,value:Me.id},Wt(pe(Me)),9,s$))),128))],512),[[uo,N.value]])]),N.value?($e(),He("div",a$,[D[17]||(D[17]=E("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),Fn(E("select",{id:"visiteur-filter","onUpdate:modelValue":D[2]||(D[2]=Me=>T.value=Me),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[E("option",l$,Wt(he.value.length?"Tous les visiteurs":"Aucun visiteur disponible"),1),($e(!0),He(Tn,null,xr(he.value,Me=>($e(),He("option",{key:Me.id,value:Me.id},Wt(pe(Me)),9,u$))),128))],512),[[uo,T.value]])])):cn("",!0)])):Wn(r).isSalarie?($e(),He("div",c$,[E("div",f$,[D[19]||(D[19]=E("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),Fn(E("select",{id:"visiteur-filter","onUpdate:modelValue":D[3]||(D[3]=Me=>T.value=Me),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[D[18]||(D[18]=E("option",{value:null},"Tous les visiteurs",-1)),($e(!0),He(Tn,null,xr(u.value,Me=>($e(),He("option",{key:Me.id,value:Me.id},Wt(pe(Me)),9,h$))),128))],512),[[uo,T.value]])])])):cn("",!0),E("div",d$,[E("div",p$,[E("div",g$,[E("table",m$,[E("thead",v$,[E("tr",null,[E("th",y$,[E("button",{onClick:D[4]||(D[4]=Me=>le("nom")),class:"group inline-flex items-center"},[D[21]||(D[21]=Ei(" Nom ")),E("span",_$,[($e(),He("svg",{class:Fi(["h-5 w-5",{"text-gray-900":F.value==="nom","text-gray-400":F.value!=="nom","rotate-180":F.value==="nom"&&K.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},D[20]||(D[20]=[E("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),D[24]||(D[24]=E("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),D[25]||(D[25]=E("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise ",-1)),D[26]||(D[26]=E("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Salarie ",-1)),D[27]||(D[27]=E("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Visiteur ",-1)),E("th",b$,[E("button",{onClick:D[5]||(D[5]=Me=>le("date_modification")),class:"group inline-flex items-center"},[D[23]||(D[23]=Ei(" Dernire modification ")),E("span",w$,[($e(),He("svg",{class:Fi(["h-5 w-5",{"text-gray-900":F.value==="date_modification","text-gray-400":F.value!=="date_modification","rotate-180":F.value==="date_modification"&&K.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},D[22]||(D[22]=[E("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),D[28]||(D[28]=E("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[E("span",{class:"sr-only"},"Actions")],-1))])]),E("tbody",x$,[fe.value.length===0?($e(),He("tr",L$,D[29]||(D[29]=[E("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun plan disponible ",-1)]))):cn("",!0),($e(!0),He(Tn,null,xr(fe.value,Me=>($e(),He("tr",{key:Me.id,class:"hover:bg-gray-50"},[E("td",S$,Wt(Me.nom),1),E("td",C$,Wt(Me.description||"-"),1),E("td",E$,[Me.entreprise&&typeof Me.entreprise=="object"?($e(),He("div",P$,[E("div",M$,[E("div",A$,[E("span",k$,Wt(Te(Me.entreprise)),1)])]),E("div",T$,[E("div",N$,Wt(Wn(Vl)(Me.entreprise)),1)])])):($e(),He("div",D$," Non assign "))]),E("td",I$,[Me.salarie&&typeof Me.salarie=="object"?($e(),He("div",O$,[E("div",B$,[E("div",R$,[E("span",F$,Wt(Te(Me.salarie)),1)])]),E("div",j$,[E("div",z$,Wt(Wn(Vl)(Me.salarie)),1)])])):($e(),He("div",$$," Non assign "))]),E("td",U$,[Me.visiteur&&typeof Me.visiteur=="object"?($e(),He("div",V$,[E("div",G$,[E("div",H$,[E("span",q$,Wt(Te(Me.visiteur)),1)])]),E("div",W$,[E("div",Z$,Wt(Wn(Vl)(Me.visiteur)),1)])])):($e(),He("div",K$," Non assign "))]),E("td",Y$,Wt(Ee(Me.date_modification)),1),E("td",J$,[E("button",{onClick:Ge=>V(Me),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,X$),E("button",{onClick:Ge=>Y(Me),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,Q$),ee(Me)?($e(),He("button",{key:0,onClick:Ge=>oe(Me),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,eU)):cn("",!0)])]))),128))])])])])]),pi(px,{modelValue:f.value,"onUpdate:modelValue":D[6]||(D[6]=Me=>f.value=Me),salaries:s.value,clients:u.value,onCreated:ue},null,8,["modelValue","salaries","clients"]),d.value?($e(),He("div",tU,[E("div",nU,[E("div",rU,[D[31]||(D[31]=E("h2",{class:"text-xl font-semibold text-gray-900"},"Modifier le plan",-1)),E("button",{onClick:D[7]||(D[7]=Me=>d.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},D[30]||(D[30]=[E("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("form",{onSubmit:Cf(q,["prevent"]),class:"space-y-4"},[E("div",null,[D[32]||(D[32]=E("label",{for:"edit-nom",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),Fn(E("input",{type:"text",id:"edit-nom","onUpdate:modelValue":D[8]||(D[8]=Me=>_.value.nom=Me),disabled:M.value,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",required:""},null,8,iU),[[ri,_.value.nom]])]),E("div",null,[D[33]||(D[33]=E("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),Fn(E("textarea",{id:"edit-description","onUpdate:modelValue":D[9]||(D[9]=Me=>_.value.description=Me),disabled:M.value,rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"},null,8,oU),[[ri,_.value.description]])]),Wn(r).isAdmin||((ke=Wn(r).user)==null?void 0:ke.user_type)==="entreprise"?($e(),He("div",sU,[Wn(r).isAdmin?($e(),He("div",aU,[D[35]||(D[35]=E("label",{for:"edit-entreprise",class:"block text-sm font-medium text-gray-700"}," Entreprise ",-1)),Fn(E("select",{id:"edit-entreprise","onUpdate:modelValue":D[10]||(D[10]=Me=>_.value.entreprise=Me),disabled:M.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[D[34]||(D[34]=E("option",{value:null},"Slectionner une entreprise",-1)),($e(!0),He(Tn,null,xr(o.value,Me=>($e(),He("option",{key:Me.id,value:Me.id},Wt(pe(Me)),9,uU))),128))],8,lU),[[uo,_.value.entreprise]])])):cn("",!0),E("div",null,[D[37]||(D[37]=E("label",{for:"edit-salarie",class:"block text-sm font-medium text-gray-700"}," Salarie ",-1)),Fn(E("select",{id:"edit-salarie","onUpdate:modelValue":D[11]||(D[11]=Me=>_.value.salarie=Me),disabled:Wn(r).isAdmin&&!_.value.entreprise||M.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[D[36]||(D[36]=E("option",{value:null},"Slectionner un salarie",-1)),($e(!0),He(Tn,null,xr($.value,Me=>($e(),He("option",{key:Me.id,value:Me.id},Wt(pe(Me)),9,fU))),128))],8,cU),[[uo,_.value.salarie]]),Wn(r).isAdmin&&!_.value.entreprise?($e(),He("p",hU," Veuillez d'abord slectionner une entreprise ")):cn("",!0)]),E("div",null,[D[39]||(D[39]=E("label",{for:"edit-visiteur",class:"block text-sm font-medium text-gray-700"}," Visiteur ",-1)),Fn(E("select",{id:"edit-visiteur","onUpdate:modelValue":D[12]||(D[12]=Me=>_.value.visiteur=Me),disabled:!_.value.salarie||M.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[D[38]||(D[38]=E("option",{value:null},"Slectionner un visiteur",-1)),($e(!0),He(Tn,null,xr(X.value,Me=>($e(),He("option",{key:Me.id,value:Me.id},Wt(pe(Me)),9,pU))),128))],8,dU),[[uo,_.value.visiteur]]),_.value.salarie?cn("",!0):($e(),He("p",gU," Veuillez d'abord slectionner un salarie "))])])):cn("",!0),k.value?($e(),He("div",mU,[E("div",vU,[D[40]||(D[40]=E("div",{class:"flex-shrink-0"},[E("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),E("div",yU,[E("p",_U,Wt(k.value),1)])])])):cn("",!0),E("div",bU,[E("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:D[13]||(D[13]=Me=>d.value=!1)}," Annuler "),E("button",{type:"submit",disabled:M.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm disabled:opacity-50"},[M.value?($e(),He("svg",xU,D[41]||(D[41]=[E("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),E("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):cn("",!0),Ei(" "+Wt(M.value?"Enregistrement...":"Enregistrer"),1)],8,wU)])],32)])])):cn("",!0),g.value?($e(),rl(Bx,{key:3,title:"Supprimer le plan",message:"tes-vous sr de vouloir supprimer ce plan ? Cette action est irrversible.",onConfirm:ie,onCancel:xe})):cn("",!0)])])}}});var Rx={exports:{}};const SU=Y5(m6);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Vb(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,r)}return t}function yc(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?Vb(Object(t),!0).forEach(function(r){CU(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Vb(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Gg(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Gg=function(n){return typeof n}:Gg=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Gg(e)}function CU(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function yu(){return yu=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},yu.apply(this,arguments)}function EU(e,n){if(e==null)return{};var t={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(n.indexOf(i)>=0)&&(t[i]=e[i]);return t}function PU(e,n){if(e==null)return{};var t=EU(e,n),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(t[r]=e[r])}return t}function MU(e){return AU(e)||kU(e)||TU(e)||NU()}function AU(e){if(Array.isArray(e))return P1(e)}function kU(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function TU(e,n){if(e){if(typeof e=="string")return P1(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return P1(e,n)}}function P1(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function NU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var DU="1.14.0";function $c(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var qc=$c(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),jp=$c(/Edge/i),Gb=$c(/firefox/i),lp=$c(/safari/i)&&!$c(/chrome/i)&&!$c(/android/i),Fx=$c(/iP(ad|od|hone)/i),IU=$c(/chrome/i)&&$c(/android/i),jx={capture:!1,passive:!1};function Pi(e,n,t){e.addEventListener(n,t,!qc&&jx)}function yi(e,n,t){e.removeEventListener(n,t,!qc&&jx)}function x0(e,n){if(n){if(n[0]===">"&&(n=n.substring(1)),e)try{if(e.matches)return e.matches(n);if(e.msMatchesSelector)return e.msMatchesSelector(n);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(n)}catch{return!1}return!1}}function OU(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Fu(e,n,t,r){if(e){t=t||document;do{if(n!=null&&(n[0]===">"?e.parentNode===t&&x0(e,n):x0(e,n))||r&&e===t)return e;if(e===t)break}while(e=OU(e))}return null}var Hb=/\s+/g;function Jo(e,n,t){if(e&&n)if(e.classList)e.classList[t?"add":"remove"](n);else{var r=(" "+e.className+" ").replace(Hb," ").replace(" "+n+" "," ");e.className=(r+(t?" "+n:"")).replace(Hb," ")}}function rr(e,n,t){var r=e&&e.style;if(r){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(t=e.currentStyle),n===void 0?t:t[n];!(n in r)&&n.indexOf("webkit")===-1&&(n="-webkit-"+n),r[n]=t+(typeof t=="string"?"":"px")}}function ih(e,n){var t="";if(typeof e=="string")t=e;else do{var r=rr(e,"transform");r&&r!=="none"&&(t=r+" "+t)}while(!n&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(t)}function zx(e,n,t){if(e){var r=e.getElementsByTagName(n),i=0,s=r.length;if(t)for(;i<s;i++)t(r[i],i);return r}return[]}function gc(){var e=document.scrollingElement;return e||document.documentElement}function Bo(e,n,t,r,i){if(!(!e.getBoundingClientRect&&e!==window)){var s,o,u,f,d,g,y;if(e!==window&&e.parentNode&&e!==gc()?(s=e.getBoundingClientRect(),o=s.top,u=s.left,f=s.bottom,d=s.right,g=s.height,y=s.width):(o=0,u=0,f=window.innerHeight,d=window.innerWidth,g=window.innerHeight,y=window.innerWidth),(n||t)&&e!==window&&(i=i||e.parentNode,!qc))do if(i&&i.getBoundingClientRect&&(rr(i,"transform")!=="none"||t&&rr(i,"position")!=="static")){var x=i.getBoundingClientRect();o-=x.top+parseInt(rr(i,"border-top-width")),u-=x.left+parseInt(rr(i,"border-left-width")),f=o+s.height,d=u+s.width;break}while(i=i.parentNode);if(r&&e!==window){var _=ih(i||e),M=_&&_.a,k=_&&_.d;_&&(o/=k,u/=M,y/=M,g/=k,f=o+g,d=u+y)}return{top:o,left:u,bottom:f,right:d,width:y,height:g}}}function qb(e,n,t){for(var r=yf(e,!0),i=Bo(e)[n];r;){var s=Bo(r)[t],o=void 0;if(o=i>=s,!o)return r;if(r===gc())break;r=yf(r,!1)}return!1}function cd(e,n,t,r){for(var i=0,s=0,o=e.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==Dr.ghost&&(r||o[s]!==Dr.dragged)&&Fu(o[s],t.draggable,e,!1)){if(i===n)return o[s];i++}s++}return null}function yy(e,n){for(var t=e.lastElementChild;t&&(t===Dr.ghost||rr(t,"display")==="none"||n&&!x0(t,n));)t=t.previousElementSibling;return t||null}function us(e,n){var t=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==Dr.clone&&(!n||x0(e,n))&&t++;return t}function Wb(e){var n=0,t=0,r=gc();if(e)do{var i=ih(e),s=i.a,o=i.d;n+=e.scrollLeft*s,t+=e.scrollTop*o}while(e!==r&&(e=e.parentNode));return[n,t]}function BU(e,n){for(var t in e)if(e.hasOwnProperty(t)){for(var r in n)if(n.hasOwnProperty(r)&&n[r]===e[t][r])return Number(t)}return-1}function yf(e,n){if(!e||!e.getBoundingClientRect)return gc();var t=e,r=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var i=rr(t);if(t.clientWidth<t.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return gc();if(r||n)return t;r=!0}}while(t=t.parentNode);return gc()}function RU(e,n){if(e&&n)for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}function gv(e,n){return Math.round(e.top)===Math.round(n.top)&&Math.round(e.left)===Math.round(n.left)&&Math.round(e.height)===Math.round(n.height)&&Math.round(e.width)===Math.round(n.width)}var up;function $x(e,n){return function(){if(!up){var t=arguments,r=this;t.length===1?e.call(r,t[0]):e.apply(r,t),up=setTimeout(function(){up=void 0},n)}}}function FU(){clearTimeout(up),up=void 0}function Ux(e,n,t){e.scrollLeft+=n,e.scrollTop+=t}function _y(e){var n=window.Polymer,t=window.jQuery||window.Zepto;return n&&n.dom?n.dom(e).cloneNode(!0):t?t(e).clone(!0)[0]:e.cloneNode(!0)}function Zb(e,n){rr(e,"position","absolute"),rr(e,"top",n.top),rr(e,"left",n.left),rr(e,"width",n.width),rr(e,"height",n.height)}function mv(e){rr(e,"position",""),rr(e,"top",""),rr(e,"left",""),rr(e,"width",""),rr(e,"height","")}var ja="Sortable"+new Date().getTime();function jU(){var e=[],n;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(rr(i,"display")==="none"||i===Dr.ghost)){e.push({target:i,rect:Bo(i)});var s=yc({},e[e.length-1].rect);if(i.thisAnimationDuration){var o=ih(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){e.push(r)},removeAnimationState:function(r){e.splice(BU(e,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(n),typeof r=="function"&&r();return}var s=!1,o=0;e.forEach(function(u){var f=0,d=u.target,g=d.fromRect,y=Bo(d),x=d.prevFromRect,_=d.prevToRect,M=u.rect,k=ih(d,!0);k&&(y.top-=k.f,y.left-=k.e),d.toRect=y,d.thisAnimationDuration&&gv(x,y)&&!gv(g,y)&&(M.top-y.top)/(M.left-y.left)===(g.top-y.top)/(g.left-y.left)&&(f=$U(M,x,_,i.options)),gv(y,g)||(d.prevFromRect=g,d.prevToRect=y,f||(f=i.options.animation),i.animate(d,M,y,f)),f&&(s=!0,o=Math.max(o,f),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0,d.prevFromRect=null,d.fromRect=null,d.prevToRect=null,d.thisAnimationDuration=null},f),d.thisAnimationDuration=f)}),clearTimeout(n),s?n=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),e=[]},animate:function(r,i,s,o){if(o){rr(r,"transition",""),rr(r,"transform","");var u=ih(this.el),f=u&&u.a,d=u&&u.d,g=(i.left-s.left)/(f||1),y=(i.top-s.top)/(d||1);r.animatingX=!!g,r.animatingY=!!y,rr(r,"transform","translate3d("+g+"px,"+y+"px,0)"),this.forRepaintDummy=zU(r),rr(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),rr(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){rr(r,"transition",""),rr(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function zU(e){return e.offsetWidth}function $U(e,n,t,r){return Math.sqrt(Math.pow(n.top-e.top,2)+Math.pow(n.left-e.left,2))/Math.sqrt(Math.pow(n.top-t.top,2)+Math.pow(n.left-t.left,2))*r.animation}var Dh=[],vv={initializeByDefault:!0},zp={mount:function(n){for(var t in vv)vv.hasOwnProperty(t)&&!(t in n)&&(n[t]=vv[t]);Dh.forEach(function(r){if(r.pluginName===n.pluginName)throw"Sortable: Cannot mount plugin ".concat(n.pluginName," more than once")}),Dh.push(n)},pluginEvent:function(n,t,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=n+"Global";Dh.forEach(function(o){t[o.pluginName]&&(t[o.pluginName][s]&&t[o.pluginName][s](yc({sortable:t},r)),t.options[o.pluginName]&&t[o.pluginName][n]&&t[o.pluginName][n](yc({sortable:t},r)))})},initializePlugins:function(n,t,r,i){Dh.forEach(function(u){var f=u.pluginName;if(!(!n.options[f]&&!u.initializeByDefault)){var d=new u(n,t,n.options);d.sortable=n,d.options=n.options,n[f]=d,yu(r,d.defaults)}});for(var s in n.options)if(n.options.hasOwnProperty(s)){var o=this.modifyOption(n,s,n.options[s]);typeof o<"u"&&(n.options[s]=o)}},getEventProperties:function(n,t){var r={};return Dh.forEach(function(i){typeof i.eventProperties=="function"&&yu(r,i.eventProperties.call(t[i.pluginName],n))}),r},modifyOption:function(n,t,r){var i;return Dh.forEach(function(s){n[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[t]=="function"&&(i=s.optionListeners[t].call(n[s.pluginName],r))}),i}};function Gd(e){var n=e.sortable,t=e.rootEl,r=e.name,i=e.targetEl,s=e.cloneEl,o=e.toEl,u=e.fromEl,f=e.oldIndex,d=e.newIndex,g=e.oldDraggableIndex,y=e.newDraggableIndex,x=e.originalEvent,_=e.putSortable,M=e.extraEventProperties;if(n=n||t&&t[ja],!!n){var k,N=n.options,T="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!qc&&!jp?k=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(k=document.createEvent("Event"),k.initEvent(r,!0,!0)),k.to=o||t,k.from=u||t,k.item=i||t,k.clone=s,k.oldIndex=f,k.newIndex=d,k.oldDraggableIndex=g,k.newDraggableIndex=y,k.originalEvent=x,k.pullMode=_?_.lastPutMode:void 0;var F=yc(yc({},M),zp.getEventProperties(r,n));for(var K in F)k[K]=F[K];t&&t.dispatchEvent(k),N[T]&&N[T].call(n,k)}}var UU=["evt"],_l=function(n,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=PU(r,UU);zp.pluginEvent.bind(Dr)(n,t,yc({dragEl:On,parentEl:ss,ghostEl:ii,rootEl:Oo,nextEl:Kf,lastDownEl:Hg,cloneEl:as,cloneHidden:pf,dragStarted:Hd,putSortable:da,activeSortable:Dr.active,originalEvent:i,oldIndex:Hh,oldDraggableIndex:cp,newIndex:Ul,newDraggableIndex:df,hideGhostForTarget:qx,unhideGhostForTarget:Wx,cloneNowHidden:function(){pf=!0},cloneNowShown:function(){pf=!1},dispatchSortableEvent:function(u){Ya({sortable:t,name:u,originalEvent:i})}},s))};function Ya(e){Gd(yc({putSortable:da,cloneEl:as,targetEl:On,rootEl:Oo,oldIndex:Hh,oldDraggableIndex:cp,newIndex:Ul,newDraggableIndex:df},e))}var On,ss,ii,Oo,Kf,Hg,as,pf,Hh,Ul,cp,df,Sg,da,Uh=!1,L0=!1,S0=[],qf,Iu,yv,_v,Kb,Yb,Hd,Ih,fp,hp=!1,Cg=!1,qg,Ia,bv=[],M1=!1,C0=[],sm=typeof document<"u",Eg=Fx,Jb=jp||qc?"cssFloat":"float",VU=sm&&!IU&&!Fx&&"draggable"in document.createElement("div"),Vx=function(){if(sm){if(qc)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),Gx=function(n,t){var r=rr(n),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=cd(n,0,t),o=cd(n,1,t),u=s&&rr(s),f=o&&rr(o),d=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+Bo(s).width,g=f&&parseInt(f.marginLeft)+parseInt(f.marginRight)+Bo(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&u.float&&u.float!=="none"){var y=u.float==="left"?"left":"right";return o&&(f.clear==="both"||f.clear===y)?"vertical":"horizontal"}return s&&(u.display==="block"||u.display==="flex"||u.display==="table"||u.display==="grid"||d>=i&&r[Jb]==="none"||o&&r[Jb]==="none"&&d+g>i)?"vertical":"horizontal"},GU=function(n,t,r){var i=r?n.left:n.top,s=r?n.right:n.bottom,o=r?n.width:n.height,u=r?t.left:t.top,f=r?t.right:t.bottom,d=r?t.width:t.height;return i===u||s===f||i+o/2===u+d/2},HU=function(n,t){var r;return S0.some(function(i){var s=i[ja].options.emptyInsertThreshold;if(!(!s||yy(i))){var o=Bo(i),u=n>=o.left-s&&n<=o.right+s,f=t>=o.top-s&&t<=o.bottom+s;if(u&&f)return r=i}}),r},Hx=function(n){function t(s,o){return function(u,f,d,g){var y=u.options.group.name&&f.options.group.name&&u.options.group.name===f.options.group.name;if(s==null&&(o||y))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return t(s(u,f,d,g),o)(u,f,d,g);var x=(o?u:f).options.group.name;return s===!0||typeof s=="string"&&s===x||s.join&&s.indexOf(x)>-1}}var r={},i=n.group;(!i||Gg(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=t(i.pull,!0),r.checkPut=t(i.put),r.revertClone=i.revertClone,n.group=r},qx=function(){!Vx&&ii&&rr(ii,"display","none")},Wx=function(){!Vx&&ii&&rr(ii,"display","")};sm&&document.addEventListener("click",function(e){if(L0)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),L0=!1,!1},!0);var Wf=function(n){if(On){n=n.touches?n.touches[0]:n;var t=HU(n.clientX,n.clientY);if(t){var r={};for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i]);r.target=r.rootEl=t,r.preventDefault=void 0,r.stopPropagation=void 0,t[ja]._onDragOver(r)}}},qU=function(n){On&&On.parentNode[ja]._isOutsideThisEl(n.target)};function Dr(e,n){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=n=yu({},n),e[ja]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Gx(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,u){o.setData("Text",u.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Dr.supportPointer!==!1&&"PointerEvent"in window&&!lp,emptyInsertThreshold:5};zp.initializePlugins(this,e,t);for(var r in t)!(r in n)&&(n[r]=t[r]);Hx(n);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=n.forceFallback?!1:VU,this.nativeDraggable&&(this.options.touchStartThreshold=1),n.supportPointer?Pi(e,"pointerdown",this._onTapStart):(Pi(e,"mousedown",this._onTapStart),Pi(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Pi(e,"dragover",this),Pi(e,"dragenter",this)),S0.push(this.el),n.store&&n.store.get&&this.sort(n.store.get(this)||[]),yu(this,jU())}Dr.prototype={constructor:Dr,_isOutsideThisEl:function(n){!this.el.contains(n)&&n!==this.el&&(Ih=null)},_getDirection:function(n,t){return typeof this.options.direction=="function"?this.options.direction.call(this,n,t,On):this.options.direction},_onTapStart:function(n){if(n.cancelable){var t=this,r=this.el,i=this.options,s=i.preventOnFilter,o=n.type,u=n.touches&&n.touches[0]||n.pointerType&&n.pointerType==="touch"&&n,f=(u||n).target,d=n.target.shadowRoot&&(n.path&&n.path[0]||n.composedPath&&n.composedPath()[0])||f,g=i.filter;if(eV(r),!On&&!(/mousedown|pointerdown/.test(o)&&n.button!==0||i.disabled)&&!d.isContentEditable&&!(!this.nativeDraggable&&lp&&f&&f.tagName.toUpperCase()==="SELECT")&&(f=Fu(f,i.draggable,r,!1),!(f&&f.animated)&&Hg!==f)){if(Hh=us(f),cp=us(f,i.draggable),typeof g=="function"){if(g.call(this,n,f,this)){Ya({sortable:t,rootEl:d,name:"filter",targetEl:f,toEl:r,fromEl:r}),_l("filter",t,{evt:n}),s&&n.cancelable&&n.preventDefault();return}}else if(g&&(g=g.split(",").some(function(y){if(y=Fu(d,y.trim(),r,!1),y)return Ya({sortable:t,rootEl:y,name:"filter",targetEl:f,fromEl:r,toEl:r}),_l("filter",t,{evt:n}),!0}),g)){s&&n.cancelable&&n.preventDefault();return}i.handle&&!Fu(d,i.handle,r,!1)||this._prepareDragStart(n,u,f)}}},_prepareDragStart:function(n,t,r){var i=this,s=i.el,o=i.options,u=s.ownerDocument,f;if(r&&!On&&r.parentNode===s){var d=Bo(r);if(Oo=s,On=r,ss=On.parentNode,Kf=On.nextSibling,Hg=r,Sg=o.group,Dr.dragged=On,qf={target:On,clientX:(t||n).clientX,clientY:(t||n).clientY},Kb=qf.clientX-d.left,Yb=qf.clientY-d.top,this._lastX=(t||n).clientX,this._lastY=(t||n).clientY,On.style["will-change"]="all",f=function(){if(_l("delayEnded",i,{evt:n}),Dr.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!Gb&&i.nativeDraggable&&(On.draggable=!0),i._triggerDragStart(n,t),Ya({sortable:i,name:"choose",originalEvent:n}),Jo(On,o.chosenClass,!0)},o.ignore.split(",").forEach(function(g){zx(On,g.trim(),wv)}),Pi(u,"dragover",Wf),Pi(u,"mousemove",Wf),Pi(u,"touchmove",Wf),Pi(u,"mouseup",i._onDrop),Pi(u,"touchend",i._onDrop),Pi(u,"touchcancel",i._onDrop),Gb&&this.nativeDraggable&&(this.options.touchStartThreshold=4,On.draggable=!0),_l("delayStart",this,{evt:n}),o.delay&&(!o.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(jp||qc))){if(Dr.eventCanceled){this._onDrop();return}Pi(u,"mouseup",i._disableDelayedDrag),Pi(u,"touchend",i._disableDelayedDrag),Pi(u,"touchcancel",i._disableDelayedDrag),Pi(u,"mousemove",i._delayedDragTouchMoveHandler),Pi(u,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&Pi(u,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(f,o.delay)}else f()}},_delayedDragTouchMoveHandler:function(n){var t=n.touches?n.touches[0]:n;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){On&&wv(On),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var n=this.el.ownerDocument;yi(n,"mouseup",this._disableDelayedDrag),yi(n,"touchend",this._disableDelayedDrag),yi(n,"touchcancel",this._disableDelayedDrag),yi(n,"mousemove",this._delayedDragTouchMoveHandler),yi(n,"touchmove",this._delayedDragTouchMoveHandler),yi(n,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(n,t){t=t||n.pointerType=="touch"&&n,!this.nativeDraggable||t?this.options.supportPointer?Pi(document,"pointermove",this._onTouchMove):t?Pi(document,"touchmove",this._onTouchMove):Pi(document,"mousemove",this._onTouchMove):(Pi(On,"dragend",this),Pi(Oo,"dragstart",this._onDragStart));try{document.selection?Wg(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(n,t){if(Uh=!1,Oo&&On){_l("dragStarted",this,{evt:t}),this.nativeDraggable&&Pi(document,"dragover",qU);var r=this.options;!n&&Jo(On,r.dragClass,!1),Jo(On,r.ghostClass,!0),Dr.active=this,n&&this._appendGhost(),Ya({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Iu){this._lastX=Iu.clientX,this._lastY=Iu.clientY,qx();for(var n=document.elementFromPoint(Iu.clientX,Iu.clientY),t=n;n&&n.shadowRoot&&(n=n.shadowRoot.elementFromPoint(Iu.clientX,Iu.clientY),n!==t);)t=n;if(On.parentNode[ja]._isOutsideThisEl(n),t)do{if(t[ja]){var r=void 0;if(r=t[ja]._onDragOver({clientX:Iu.clientX,clientY:Iu.clientY,target:n,rootEl:t}),r&&!this.options.dragoverBubble)break}n=t}while(t=t.parentNode);Wx()}},_onTouchMove:function(n){if(qf){var t=this.options,r=t.fallbackTolerance,i=t.fallbackOffset,s=n.touches?n.touches[0]:n,o=ii&&ih(ii,!0),u=ii&&o&&o.a,f=ii&&o&&o.d,d=Eg&&Ia&&Wb(Ia),g=(s.clientX-qf.clientX+i.x)/(u||1)+(d?d[0]-bv[0]:0)/(u||1),y=(s.clientY-qf.clientY+i.y)/(f||1)+(d?d[1]-bv[1]:0)/(f||1);if(!Dr.active&&!Uh){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(n,!0)}if(ii){o?(o.e+=g-(yv||0),o.f+=y-(_v||0)):o={a:1,b:0,c:0,d:1,e:g,f:y};var x="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");rr(ii,"webkitTransform",x),rr(ii,"mozTransform",x),rr(ii,"msTransform",x),rr(ii,"transform",x),yv=g,_v=y,Iu=s}n.cancelable&&n.preventDefault()}},_appendGhost:function(){if(!ii){var n=this.options.fallbackOnBody?document.body:Oo,t=Bo(On,!0,Eg,!0,n),r=this.options;if(Eg){for(Ia=n;rr(Ia,"position")==="static"&&rr(Ia,"transform")==="none"&&Ia!==document;)Ia=Ia.parentNode;Ia!==document.body&&Ia!==document.documentElement?(Ia===document&&(Ia=gc()),t.top+=Ia.scrollTop,t.left+=Ia.scrollLeft):Ia=gc(),bv=Wb(Ia)}ii=On.cloneNode(!0),Jo(ii,r.ghostClass,!1),Jo(ii,r.fallbackClass,!0),Jo(ii,r.dragClass,!0),rr(ii,"transition",""),rr(ii,"transform",""),rr(ii,"box-sizing","border-box"),rr(ii,"margin",0),rr(ii,"top",t.top),rr(ii,"left",t.left),rr(ii,"width",t.width),rr(ii,"height",t.height),rr(ii,"opacity","0.8"),rr(ii,"position",Eg?"absolute":"fixed"),rr(ii,"zIndex","100000"),rr(ii,"pointerEvents","none"),Dr.ghost=ii,n.appendChild(ii),rr(ii,"transform-origin",Kb/parseInt(ii.style.width)*100+"% "+Yb/parseInt(ii.style.height)*100+"%")}},_onDragStart:function(n,t){var r=this,i=n.dataTransfer,s=r.options;if(_l("dragStart",this,{evt:n}),Dr.eventCanceled){this._onDrop();return}_l("setupClone",this),Dr.eventCanceled||(as=_y(On),as.draggable=!1,as.style["will-change"]="",this._hideClone(),Jo(as,this.options.chosenClass,!1),Dr.clone=as),r.cloneId=Wg(function(){_l("clone",r),!Dr.eventCanceled&&(r.options.removeCloneOnHide||Oo.insertBefore(as,On),r._hideClone(),Ya({sortable:r,name:"clone"}))}),!t&&Jo(On,s.dragClass,!0),t?(L0=!0,r._loopId=setInterval(r._emulateDragOver,50)):(yi(document,"mouseup",r._onDrop),yi(document,"touchend",r._onDrop),yi(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,On)),Pi(document,"drop",r),rr(On,"transform","translateZ(0)")),Uh=!0,r._dragStartId=Wg(r._dragStarted.bind(r,t,n)),Pi(document,"selectstart",r),Hd=!0,lp&&rr(document.body,"user-select","none")},_onDragOver:function(n){var t=this.el,r=n.target,i,s,o,u=this.options,f=u.group,d=Dr.active,g=Sg===f,y=u.sort,x=da||d,_,M=this,k=!1;if(M1)return;function N(ie,xe){_l(ie,M,yc({evt:n,isOwner:g,axis:_?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:y,fromSortable:x,target:r,completed:F,onMove:function(Te,Y){return Pg(Oo,t,On,i,Te,Bo(Te),n,Y)},changed:K},xe))}function T(){N("dragOverAnimationCapture"),M.captureAnimationState(),M!==x&&x.captureAnimationState()}function F(ie){return N("dragOverCompleted",{insertion:ie}),ie&&(g?d._hideClone():d._showClone(M),M!==x&&(Jo(On,da?da.options.ghostClass:d.options.ghostClass,!1),Jo(On,u.ghostClass,!0)),da!==M&&M!==Dr.active?da=M:M===Dr.active&&da&&(da=null),x===M&&(M._ignoreWhileAnimating=r),M.animateAll(function(){N("dragOverAnimationComplete"),M._ignoreWhileAnimating=null}),M!==x&&(x.animateAll(),x._ignoreWhileAnimating=null)),(r===On&&!On.animated||r===t&&!r.animated)&&(Ih=null),!u.dragoverBubble&&!n.rootEl&&r!==document&&(On.parentNode[ja]._isOutsideThisEl(n.target),!ie&&Wf(n)),!u.dragoverBubble&&n.stopPropagation&&n.stopPropagation(),k=!0}function K(){Ul=us(On),df=us(On,u.draggable),Ya({sortable:M,name:"change",toEl:t,newIndex:Ul,newDraggableIndex:df,originalEvent:n})}if(n.preventDefault!==void 0&&n.cancelable&&n.preventDefault(),r=Fu(r,u.draggable,t,!0),N("dragOver"),Dr.eventCanceled)return k;if(On.contains(n.target)||r.animated&&r.animatingX&&r.animatingY||M._ignoreWhileAnimating===r)return F(!1);if(L0=!1,d&&!u.disabled&&(g?y||(o=ss!==Oo):da===this||(this.lastPutMode=Sg.checkPull(this,d,On,n))&&f.checkPut(this,d,On,n))){if(_=this._getDirection(n,r)==="vertical",i=Bo(On),N("dragOverValid"),Dr.eventCanceled)return k;if(o)return ss=Oo,T(),this._hideClone(),N("revert"),Dr.eventCanceled||(Kf?Oo.insertBefore(On,Kf):Oo.appendChild(On)),F(!0);var Q=yy(t,u.draggable);if(!Q||YU(n,_,this)&&!Q.animated){if(Q===On)return F(!1);if(Q&&t===n.target&&(r=Q),r&&(s=Bo(r)),Pg(Oo,t,On,i,r,s,n,!!r)!==!1)return T(),t.appendChild(On),ss=t,K(),F(!0)}else if(Q&&KU(n,_,this)){var he=cd(t,0,u,!0);if(he===On)return F(!1);if(r=he,s=Bo(r),Pg(Oo,t,On,i,r,s,n,!1)!==!1)return T(),t.insertBefore(On,he),ss=t,K(),F(!0)}else if(r.parentNode===t){s=Bo(r);var fe=0,me,G=On.parentNode!==t,$=!GU(On.animated&&On.toRect||i,r.animated&&r.toRect||s,_),X=_?"top":"left",R=qb(r,"top","top")||qb(On,"top","top"),O=R?R.scrollTop:void 0;Ih!==r&&(me=s[X],hp=!1,Cg=!$&&u.invertSwap||G),fe=JU(n,r,s,_,$?1:u.swapThreshold,u.invertedSwapThreshold==null?u.swapThreshold:u.invertedSwapThreshold,Cg,Ih===r);var B;if(fe!==0){var z=us(On);do z-=fe,B=ss.children[z];while(B&&(rr(B,"display")==="none"||B===ii))}if(fe===0||B===r)return F(!1);Ih=r,fp=fe;var W=r.nextElementSibling,V=!1;V=fe===1;var oe=Pg(Oo,t,On,i,r,s,n,V);if(oe!==!1)return(oe===1||oe===-1)&&(V=oe===1),M1=!0,setTimeout(ZU,30),T(),V&&!W?t.appendChild(On):r.parentNode.insertBefore(On,V?W:r),R&&Ux(R,0,O-R.scrollTop),ss=On.parentNode,me!==void 0&&!Cg&&(qg=Math.abs(me-Bo(r)[X])),K(),F(!0)}if(t.contains(On))return F(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){yi(document,"mousemove",this._onTouchMove),yi(document,"touchmove",this._onTouchMove),yi(document,"pointermove",this._onTouchMove),yi(document,"dragover",Wf),yi(document,"mousemove",Wf),yi(document,"touchmove",Wf)},_offUpEvents:function(){var n=this.el.ownerDocument;yi(n,"mouseup",this._onDrop),yi(n,"touchend",this._onDrop),yi(n,"pointerup",this._onDrop),yi(n,"touchcancel",this._onDrop),yi(document,"selectstart",this)},_onDrop:function(n){var t=this.el,r=this.options;if(Ul=us(On),df=us(On,r.draggable),_l("drop",this,{evt:n}),ss=On&&On.parentNode,Ul=us(On),df=us(On,r.draggable),Dr.eventCanceled){this._nulling();return}Uh=!1,Cg=!1,hp=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),A1(this.cloneId),A1(this._dragStartId),this.nativeDraggable&&(yi(document,"drop",this),yi(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),lp&&rr(document.body,"user-select",""),rr(On,"transform",""),n&&(Hd&&(n.cancelable&&n.preventDefault(),!r.dropBubble&&n.stopPropagation()),ii&&ii.parentNode&&ii.parentNode.removeChild(ii),(Oo===ss||da&&da.lastPutMode!=="clone")&&as&&as.parentNode&&as.parentNode.removeChild(as),On&&(this.nativeDraggable&&yi(On,"dragend",this),wv(On),On.style["will-change"]="",Hd&&!Uh&&Jo(On,da?da.options.ghostClass:this.options.ghostClass,!1),Jo(On,this.options.chosenClass,!1),Ya({sortable:this,name:"unchoose",toEl:ss,newIndex:null,newDraggableIndex:null,originalEvent:n}),Oo!==ss?(Ul>=0&&(Ya({rootEl:ss,name:"add",toEl:ss,fromEl:Oo,originalEvent:n}),Ya({sortable:this,name:"remove",toEl:ss,originalEvent:n}),Ya({rootEl:ss,name:"sort",toEl:ss,fromEl:Oo,originalEvent:n}),Ya({sortable:this,name:"sort",toEl:ss,originalEvent:n})),da&&da.save()):Ul!==Hh&&Ul>=0&&(Ya({sortable:this,name:"update",toEl:ss,originalEvent:n}),Ya({sortable:this,name:"sort",toEl:ss,originalEvent:n})),Dr.active&&((Ul==null||Ul===-1)&&(Ul=Hh,df=cp),Ya({sortable:this,name:"end",toEl:ss,originalEvent:n}),this.save()))),this._nulling()},_nulling:function(){_l("nulling",this),Oo=On=ss=ii=Kf=as=Hg=pf=qf=Iu=Hd=Ul=df=Hh=cp=Ih=fp=da=Sg=Dr.dragged=Dr.ghost=Dr.clone=Dr.active=null,C0.forEach(function(n){n.checked=!0}),C0.length=yv=_v=0},handleEvent:function(n){switch(n.type){case"drop":case"dragend":this._onDrop(n);break;case"dragenter":case"dragover":On&&(this._onDragOver(n),WU(n));break;case"selectstart":n.preventDefault();break}},toArray:function(){for(var n=[],t,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)t=r[i],Fu(t,o.draggable,this.el,!1)&&n.push(t.getAttribute(o.dataIdAttr)||QU(t));return n},sort:function(n,t){var r={},i=this.el;this.toArray().forEach(function(s,o){var u=i.children[o];Fu(u,this.options.draggable,i,!1)&&(r[s]=u)},this),t&&this.captureAnimationState(),n.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),t&&this.animateAll()},save:function(){var n=this.options.store;n&&n.set&&n.set(this)},closest:function(n,t){return Fu(n,t||this.options.draggable,this.el,!1)},option:function(n,t){var r=this.options;if(t===void 0)return r[n];var i=zp.modifyOption(this,n,t);typeof i<"u"?r[n]=i:r[n]=t,n==="group"&&Hx(r)},destroy:function(){_l("destroy",this);var n=this.el;n[ja]=null,yi(n,"mousedown",this._onTapStart),yi(n,"touchstart",this._onTapStart),yi(n,"pointerdown",this._onTapStart),this.nativeDraggable&&(yi(n,"dragover",this),yi(n,"dragenter",this)),Array.prototype.forEach.call(n.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),S0.splice(S0.indexOf(this.el),1),this.el=n=null},_hideClone:function(){if(!pf){if(_l("hideClone",this),Dr.eventCanceled)return;rr(as,"display","none"),this.options.removeCloneOnHide&&as.parentNode&&as.parentNode.removeChild(as),pf=!0}},_showClone:function(n){if(n.lastPutMode!=="clone"){this._hideClone();return}if(pf){if(_l("showClone",this),Dr.eventCanceled)return;On.parentNode==Oo&&!this.options.group.revertClone?Oo.insertBefore(as,On):Kf?Oo.insertBefore(as,Kf):Oo.appendChild(as),this.options.group.revertClone&&this.animate(On,as),rr(as,"display",""),pf=!1}}};function WU(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Pg(e,n,t,r,i,s,o,u){var f,d=e[ja],g=d.options.onMove,y;return window.CustomEvent&&!qc&&!jp?f=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(f=document.createEvent("Event"),f.initEvent("move",!0,!0)),f.to=n,f.from=e,f.dragged=t,f.draggedRect=r,f.related=i||n,f.relatedRect=s||Bo(n),f.willInsertAfter=u,f.originalEvent=o,e.dispatchEvent(f),g&&(y=g.call(d,f,o)),y}function wv(e){e.draggable=!1}function ZU(){M1=!1}function KU(e,n,t){var r=Bo(cd(t.el,0,t.options,!0)),i=10;return n?e.clientX<r.left-i||e.clientY<r.top&&e.clientX<r.right:e.clientY<r.top-i||e.clientY<r.bottom&&e.clientX<r.left}function YU(e,n,t){var r=Bo(yy(t.el,t.options.draggable)),i=10;return n?e.clientX>r.right+i||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+i}function JU(e,n,t,r,i,s,o,u){var f=r?e.clientY:e.clientX,d=r?t.height:t.width,g=r?t.top:t.left,y=r?t.bottom:t.right,x=!1;if(!o){if(u&&qg<d*i){if(!hp&&(fp===1?f>g+d*s/2:f<y-d*s/2)&&(hp=!0),hp)x=!0;else if(fp===1?f<g+qg:f>y-qg)return-fp}else if(f>g+d*(1-i)/2&&f<y-d*(1-i)/2)return XU(n)}return x=x||o,x&&(f<g+d*s/2||f>y-d*s/2)?f>g+d/2?1:-1:0}function XU(e){return us(On)<us(e)?1:-1}function QU(e){for(var n=e.tagName+e.className+e.src+e.href+e.textContent,t=n.length,r=0;t--;)r+=n.charCodeAt(t);return r.toString(36)}function eV(e){C0.length=0;for(var n=e.getElementsByTagName("input"),t=n.length;t--;){var r=n[t];r.checked&&C0.push(r)}}function Wg(e){return setTimeout(e,0)}function A1(e){return clearTimeout(e)}sm&&Pi(document,"touchmove",function(e){(Dr.active||Uh)&&e.cancelable&&e.preventDefault()});Dr.utils={on:Pi,off:yi,css:rr,find:zx,is:function(n,t){return!!Fu(n,t,n,!1)},extend:RU,throttle:$x,closest:Fu,toggleClass:Jo,clone:_y,index:us,nextTick:Wg,cancelNextTick:A1,detectDirection:Gx,getChild:cd};Dr.get=function(e){return e[ja]};Dr.mount=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];n[0].constructor===Array&&(n=n[0]),n.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Dr.utils=yc(yc({},Dr.utils),r.utils)),zp.mount(r)})};Dr.create=function(e,n){return new Dr(e,n)};Dr.version=DU;var Ts=[],qd,k1,T1=!1,xv,Lv,E0,Wd;function tV(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this))}return e.prototype={dragStarted:function(t){var r=t.originalEvent;this.sortable.nativeDraggable?Pi(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Pi(document,"pointermove",this._handleFallbackAutoScroll):r.touches?Pi(document,"touchmove",this._handleFallbackAutoScroll):Pi(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var r=t.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?yi(document,"dragover",this._handleAutoScroll):(yi(document,"pointermove",this._handleFallbackAutoScroll),yi(document,"touchmove",this._handleFallbackAutoScroll),yi(document,"mousemove",this._handleFallbackAutoScroll)),Xb(),Zg(),FU()},nulling:function(){E0=k1=qd=T1=Wd=xv=Lv=null,Ts.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,r){var i=this,s=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,u=document.elementFromPoint(s,o);if(E0=t,r||this.options.forceAutoScrollFallback||jp||qc||lp){Sv(t,this.options,u,r);var f=yf(u,!0);T1&&(!Wd||s!==xv||o!==Lv)&&(Wd&&Xb(),Wd=setInterval(function(){var d=yf(document.elementFromPoint(s,o),!0);d!==f&&(f=d,Zg()),Sv(t,i.options,d,r)},10),xv=s,Lv=o)}else{if(!this.options.bubbleScroll||yf(u,!0)===gc()){Zg();return}Sv(t,this.options,yf(u,!1),!1)}}},yu(e,{pluginName:"scroll",initializeByDefault:!0})}function Zg(){Ts.forEach(function(e){clearInterval(e.pid)}),Ts=[]}function Xb(){clearInterval(Wd)}var Sv=$x(function(e,n,t,r){if(n.scroll){var i=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,o=n.scrollSensitivity,u=n.scrollSpeed,f=gc(),d=!1,g;k1!==t&&(k1=t,Zg(),qd=n.scroll,g=n.scrollFn,qd===!0&&(qd=yf(t,!0)));var y=0,x=qd;do{var _=x,M=Bo(_),k=M.top,N=M.bottom,T=M.left,F=M.right,K=M.width,Q=M.height,he=void 0,fe=void 0,me=_.scrollWidth,G=_.scrollHeight,$=rr(_),X=_.scrollLeft,R=_.scrollTop;_===f?(he=K<me&&($.overflowX==="auto"||$.overflowX==="scroll"||$.overflowX==="visible"),fe=Q<G&&($.overflowY==="auto"||$.overflowY==="scroll"||$.overflowY==="visible")):(he=K<me&&($.overflowX==="auto"||$.overflowX==="scroll"),fe=Q<G&&($.overflowY==="auto"||$.overflowY==="scroll"));var O=he&&(Math.abs(F-i)<=o&&X+K<me)-(Math.abs(T-i)<=o&&!!X),B=fe&&(Math.abs(N-s)<=o&&R+Q<G)-(Math.abs(k-s)<=o&&!!R);if(!Ts[y])for(var z=0;z<=y;z++)Ts[z]||(Ts[z]={});(Ts[y].vx!=O||Ts[y].vy!=B||Ts[y].el!==_)&&(Ts[y].el=_,Ts[y].vx=O,Ts[y].vy=B,clearInterval(Ts[y].pid),(O!=0||B!=0)&&(d=!0,Ts[y].pid=setInterval((function(){r&&this.layer===0&&Dr.active._onTouchMove(E0);var W=Ts[this.layer].vy?Ts[this.layer].vy*u:0,V=Ts[this.layer].vx?Ts[this.layer].vx*u:0;typeof g=="function"&&g.call(Dr.dragged.parentNode[ja],V,W,e,E0,Ts[this.layer].el)!=="continue"||Ux(Ts[this.layer].el,V,W)}).bind({layer:y}),24))),y++}while(n.bubbleScroll&&x!==f&&(x=yf(x,!1)));T1=d}},30),Zx=function(n){var t=n.originalEvent,r=n.putSortable,i=n.dragEl,s=n.activeSortable,o=n.dispatchSortableEvent,u=n.hideGhostForTarget,f=n.unhideGhostForTarget;if(t){var d=r||s;u();var g=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,y=document.elementFromPoint(g.clientX,g.clientY);f(),d&&!d.el.contains(y)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function by(){}by.prototype={startIndex:null,dragStart:function(n){var t=n.oldDraggableIndex;this.startIndex=t},onSpill:function(n){var t=n.dragEl,r=n.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=cd(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),r&&r.animateAll()},drop:Zx};yu(by,{pluginName:"revertOnSpill"});function wy(){}wy.prototype={onSpill:function(n){var t=n.dragEl,r=n.putSortable,i=r||this.sortable;i.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),i.animateAll()},drop:Zx};yu(wy,{pluginName:"removeOnSpill"});var lu;function nV(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(t){var r=t.dragEl;lu=r},dragOverValid:function(t){var r=t.completed,i=t.target,s=t.onMove,o=t.activeSortable,u=t.changed,f=t.cancel;if(o.options.swap){var d=this.sortable.el,g=this.options;if(i&&i!==d){var y=lu;s(i)!==!1?(Jo(i,g.swapClass,!0),lu=i):lu=null,y&&y!==lu&&Jo(y,g.swapClass,!1)}u(),r(!0),f()}},drop:function(t){var r=t.activeSortable,i=t.putSortable,s=t.dragEl,o=i||this.sortable,u=this.options;lu&&Jo(lu,u.swapClass,!1),lu&&(u.swap||i&&i.options.swap)&&s!==lu&&(o.captureAnimationState(),o!==r&&r.captureAnimationState(),rV(s,lu),o.animateAll(),o!==r&&r.animateAll())},nulling:function(){lu=null}},yu(e,{pluginName:"swap",eventProperties:function(){return{swapItem:lu}}})}function rV(e,n){var t=e.parentNode,r=n.parentNode,i,s;!t||!r||t.isEqualNode(n)||r.isEqualNode(e)||(i=us(e),s=us(n),t.isEqualNode(r)&&i<s&&s++,t.insertBefore(n,t.children[i]),r.insertBefore(e,r.children[s]))}var Wr=[],$l=[],Id,Ou,Od=!1,bl=!1,Oh=!1,vo,Bd,Mg;function iV(){function e(n){for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this));n.options.supportPointer?Pi(document,"pointerup",this._deselectMultiDrag):(Pi(document,"mouseup",this._deselectMultiDrag),Pi(document,"touchend",this._deselectMultiDrag)),Pi(document,"keydown",this._checkKeyDown),Pi(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(i,s){var o="";Wr.length&&Ou===n?Wr.forEach(function(u,f){o+=(f?", ":"")+u.textContent}):o=s.textContent,i.setData("Text",o)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){var r=t.dragEl;vo=r},delayEnded:function(){this.isMultiDrag=~Wr.indexOf(vo)},setupClone:function(t){var r=t.sortable,i=t.cancel;if(this.isMultiDrag){for(var s=0;s<Wr.length;s++)$l.push(_y(Wr[s])),$l[s].sortableIndex=Wr[s].sortableIndex,$l[s].draggable=!1,$l[s].style["will-change"]="",Jo($l[s],this.options.selectedClass,!1),Wr[s]===vo&&Jo($l[s],this.options.chosenClass,!1);r._hideClone(),i()}},clone:function(t){var r=t.sortable,i=t.rootEl,s=t.dispatchSortableEvent,o=t.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Wr.length&&Ou===r&&(Qb(!0,i),s("clone"),o()))},showClone:function(t){var r=t.cloneNowShown,i=t.rootEl,s=t.cancel;this.isMultiDrag&&(Qb(!1,i),$l.forEach(function(o){rr(o,"display","")}),r(),Mg=!1,s())},hideClone:function(t){var r=this;t.sortable;var i=t.cloneNowHidden,s=t.cancel;this.isMultiDrag&&($l.forEach(function(o){rr(o,"display","none"),r.options.removeCloneOnHide&&o.parentNode&&o.parentNode.removeChild(o)}),i(),Mg=!0,s())},dragStartGlobal:function(t){t.sortable,!this.isMultiDrag&&Ou&&Ou.multiDrag._deselectMultiDrag(),Wr.forEach(function(r){r.sortableIndex=us(r)}),Wr=Wr.sort(function(r,i){return r.sortableIndex-i.sortableIndex}),Oh=!0},dragStarted:function(t){var r=this,i=t.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){Wr.forEach(function(o){o!==vo&&rr(o,"position","absolute")});var s=Bo(vo,!1,!0,!0);Wr.forEach(function(o){o!==vo&&Zb(o,s)}),bl=!0,Od=!0}i.animateAll(function(){bl=!1,Od=!1,r.options.animation&&Wr.forEach(function(o){mv(o)}),r.options.sort&&Ag()})}},dragOver:function(t){var r=t.target,i=t.completed,s=t.cancel;bl&&~Wr.indexOf(r)&&(i(!1),s())},revert:function(t){var r=t.fromSortable,i=t.rootEl,s=t.sortable,o=t.dragRect;Wr.length>1&&(Wr.forEach(function(u){s.addAnimationState({target:u,rect:bl?Bo(u):o}),mv(u),u.fromRect=o,r.removeAnimationState(u)}),bl=!1,oV(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(t){var r=t.sortable,i=t.isOwner,s=t.insertion,o=t.activeSortable,u=t.parentEl,f=t.putSortable,d=this.options;if(s){if(i&&o._hideClone(),Od=!1,d.animation&&Wr.length>1&&(bl||!i&&!o.options.sort&&!f)){var g=Bo(vo,!1,!0,!0);Wr.forEach(function(x){x!==vo&&(Zb(x,g),u.appendChild(x))}),bl=!0}if(!i)if(bl||Ag(),Wr.length>1){var y=Mg;o._showClone(r),o.options.animation&&!Mg&&y&&$l.forEach(function(x){o.addAnimationState({target:x,rect:Bd}),x.fromRect=Bd,x.thisAnimationDuration=null})}else o._showClone(r)}},dragOverAnimationCapture:function(t){var r=t.dragRect,i=t.isOwner,s=t.activeSortable;if(Wr.forEach(function(u){u.thisAnimationDuration=null}),s.options.animation&&!i&&s.multiDrag.isMultiDrag){Bd=yu({},r);var o=ih(vo,!0);Bd.top-=o.f,Bd.left-=o.e}},dragOverAnimationComplete:function(){bl&&(bl=!1,Ag())},drop:function(t){var r=t.originalEvent,i=t.rootEl,s=t.parentEl,o=t.sortable,u=t.dispatchSortableEvent,f=t.oldIndex,d=t.putSortable,g=d||this.sortable;if(r){var y=this.options,x=s.children;if(!Oh)if(y.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Jo(vo,y.selectedClass,!~Wr.indexOf(vo)),~Wr.indexOf(vo))Wr.splice(Wr.indexOf(vo),1),Id=null,Gd({sortable:o,rootEl:i,name:"deselect",targetEl:vo});else{if(Wr.push(vo),Gd({sortable:o,rootEl:i,name:"select",targetEl:vo}),r.shiftKey&&Id&&o.el.contains(Id)){var _=us(Id),M=us(vo);if(~_&&~M&&_!==M){var k,N;for(M>_?(N=_,k=M):(N=M,k=_+1);N<k;N++)~Wr.indexOf(x[N])||(Jo(x[N],y.selectedClass,!0),Wr.push(x[N]),Gd({sortable:o,rootEl:i,name:"select",targetEl:x[N]}))}}else Id=vo;Ou=g}if(Oh&&this.isMultiDrag){if(bl=!1,(s[ja].options.sort||s!==i)&&Wr.length>1){var T=Bo(vo),F=us(vo,":not(."+this.options.selectedClass+")");if(!Od&&y.animation&&(vo.thisAnimationDuration=null),g.captureAnimationState(),!Od&&(y.animation&&(vo.fromRect=T,Wr.forEach(function(Q){if(Q.thisAnimationDuration=null,Q!==vo){var he=bl?Bo(Q):T;Q.fromRect=he,g.addAnimationState({target:Q,rect:he})}})),Ag(),Wr.forEach(function(Q){x[F]?s.insertBefore(Q,x[F]):s.appendChild(Q),F++}),f===us(vo))){var K=!1;Wr.forEach(function(Q){if(Q.sortableIndex!==us(Q)){K=!0;return}}),K&&u("update")}Wr.forEach(function(Q){mv(Q)}),g.animateAll()}Ou=g}(i===s||d&&d.lastPutMode!=="clone")&&$l.forEach(function(Q){Q.parentNode&&Q.parentNode.removeChild(Q)})}},nullingGlobal:function(){this.isMultiDrag=Oh=!1,$l.length=0},destroyGlobal:function(){this._deselectMultiDrag(),yi(document,"pointerup",this._deselectMultiDrag),yi(document,"mouseup",this._deselectMultiDrag),yi(document,"touchend",this._deselectMultiDrag),yi(document,"keydown",this._checkKeyDown),yi(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(!(typeof Oh<"u"&&Oh)&&Ou===this.sortable&&!(t&&Fu(t.target,this.options.draggable,this.sortable.el,!1))&&!(t&&t.button!==0))for(;Wr.length;){var r=Wr[0];Jo(r,this.options.selectedClass,!1),Wr.shift(),Gd({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},yu(e,{pluginName:"multiDrag",utils:{select:function(t){var r=t.parentNode[ja];!r||!r.options.multiDrag||~Wr.indexOf(t)||(Ou&&Ou!==r&&(Ou.multiDrag._deselectMultiDrag(),Ou=r),Jo(t,r.options.selectedClass,!0),Wr.push(t))},deselect:function(t){var r=t.parentNode[ja],i=Wr.indexOf(t);!r||!r.options.multiDrag||!~i||(Jo(t,r.options.selectedClass,!1),Wr.splice(i,1))}},eventProperties:function(){var t=this,r=[],i=[];return Wr.forEach(function(s){r.push({multiDragElement:s,index:s.sortableIndex});var o;bl&&s!==vo?o=-1:bl?o=us(s,":not(."+t.options.selectedClass+")"):o=us(s),i.push({multiDragElement:s,index:o})}),{items:MU(Wr),clones:[].concat($l),oldIndicies:r,newIndicies:i}},optionListeners:{multiDragKey:function(t){return t=t.toLowerCase(),t==="ctrl"?t="Control":t.length>1&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})}function oV(e,n){Wr.forEach(function(t,r){var i=n.children[t.sortableIndex+(e?Number(r):0)];i?n.insertBefore(t,i):n.appendChild(t)})}function Qb(e,n){$l.forEach(function(t,r){var i=n.children[t.sortableIndex+(e?Number(r):0)];i?n.insertBefore(t,i):n.appendChild(t)})}function Ag(){Wr.forEach(function(e){e!==vo&&e.parentNode&&e.parentNode.removeChild(e)})}Dr.mount(new tV);Dr.mount(wy,by);const sV=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:iV,Sortable:Dr,Swap:nV,default:Dr},Symbol.toStringTag,{value:"Module"})),aV=Y5(sV);(function(e,n){(function(r,i){e.exports=i(SU,aV)})(typeof self<"u"?self:ea,function(t,r){return function(i){var s={};function o(u){if(s[u])return s[u].exports;var f=s[u]={i:u,l:!1,exports:{}};return i[u].call(f.exports,f,f.exports,o),f.l=!0,f.exports}return o.m=i,o.c=s,o.d=function(u,f,d){o.o(u,f)||Object.defineProperty(u,f,{enumerable:!0,get:d})},o.r=function(u){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},o.t=function(u,f){if(f&1&&(u=o(u)),f&8||f&4&&typeof u=="object"&&u&&u.__esModule)return u;var d=Object.create(null);if(o.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:u}),f&2&&typeof u!="string")for(var g in u)o.d(d,g,(function(y){return u[y]}).bind(null,g));return d},o.n=function(u){var f=u&&u.__esModule?function(){return u.default}:function(){return u};return o.d(f,"a",f),f},o.o=function(u,f){return Object.prototype.hasOwnProperty.call(u,f)},o.p="",o(o.s="fb15")}({"00ee":function(i,s,o){var u=o("b622"),f=u("toStringTag"),d={};d[f]="z",i.exports=String(d)==="[object z]"},"0366":function(i,s,o){var u=o("1c0b");i.exports=function(f,d,g){if(u(f),d===void 0)return f;switch(g){case 0:return function(){return f.call(d)};case 1:return function(y){return f.call(d,y)};case 2:return function(y,x){return f.call(d,y,x)};case 3:return function(y,x,_){return f.call(d,y,x,_)}}return function(){return f.apply(d,arguments)}}},"057f":function(i,s,o){var u=o("fc6a"),f=o("241c").f,d={}.toString,g=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],y=function(x){try{return f(x)}catch{return g.slice()}};i.exports.f=function(_){return g&&d.call(_)=="[object Window]"?y(_):f(u(_))}},"06cf":function(i,s,o){var u=o("83ab"),f=o("d1e7"),d=o("5c6c"),g=o("fc6a"),y=o("c04e"),x=o("5135"),_=o("0cfb"),M=Object.getOwnPropertyDescriptor;s.f=u?M:function(N,T){if(N=g(N),T=y(T,!0),_)try{return M(N,T)}catch{}if(x(N,T))return d(!f.f.call(N,T),N[T])}},"0cfb":function(i,s,o){var u=o("83ab"),f=o("d039"),d=o("cc12");i.exports=!u&&!f(function(){return Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(i,s,o){var u=o("23e7"),f=o("d58f").left,d=o("a640"),g=o("ae40"),y=d("reduce"),x=g("reduce",{1:0});u({target:"Array",proto:!0,forced:!y||!x},{reduce:function(M){return f(this,M,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(i,s,o){var u=o("c6b6"),f=o("9263");i.exports=function(d,g){var y=d.exec;if(typeof y=="function"){var x=y.call(d,g);if(typeof x!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return x}if(u(d)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return f.call(d,g)}},"159b":function(i,s,o){var u=o("da84"),f=o("fdbc"),d=o("17c2"),g=o("9112");for(var y in f){var x=u[y],_=x&&x.prototype;if(_&&_.forEach!==d)try{g(_,"forEach",d)}catch{_.forEach=d}}},"17c2":function(i,s,o){var u=o("b727").forEach,f=o("a640"),d=o("ae40"),g=f("forEach"),y=d("forEach");i.exports=!g||!y?function(_){return u(this,_,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(i,s,o){var u=o("d066");i.exports=u("document","documentElement")},"1c0b":function(i,s){i.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},"1c7e":function(i,s,o){var u=o("b622"),f=u("iterator"),d=!1;try{var g=0,y={next:function(){return{done:!!g++}},return:function(){d=!0}};y[f]=function(){return this},Array.from(y,function(){throw 2})}catch{}i.exports=function(x,_){if(!_&&!d)return!1;var M=!1;try{var k={};k[f]=function(){return{next:function(){return{done:M=!0}}}},x(k)}catch{}return M}},"1d80":function(i,s){i.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},"1dde":function(i,s,o){var u=o("d039"),f=o("b622"),d=o("2d00"),g=f("species");i.exports=function(y){return d>=51||!u(function(){var x=[],_=x.constructor={};return _[g]=function(){return{foo:1}},x[y](Boolean).foo!==1})}},"23cb":function(i,s,o){var u=o("a691"),f=Math.max,d=Math.min;i.exports=function(g,y){var x=u(g);return x<0?f(x+y,0):d(x,y)}},"23e7":function(i,s,o){var u=o("da84"),f=o("06cf").f,d=o("9112"),g=o("6eeb"),y=o("ce4e"),x=o("e893"),_=o("94ca");i.exports=function(M,k){var N=M.target,T=M.global,F=M.stat,K,Q,he,fe,me,G;if(T?Q=u:F?Q=u[N]||y(N,{}):Q=(u[N]||{}).prototype,Q)for(he in k){if(me=k[he],M.noTargetGet?(G=f(Q,he),fe=G&&G.value):fe=Q[he],K=_(T?he:N+(F?".":"#")+he,M.forced),!K&&fe!==void 0){if(typeof me==typeof fe)continue;x(me,fe)}(M.sham||fe&&fe.sham)&&d(me,"sham",!0),g(Q,he,me,M)}}},"241c":function(i,s,o){var u=o("ca84"),f=o("7839"),d=f.concat("length","prototype");s.f=Object.getOwnPropertyNames||function(y){return u(y,d)}},"25f0":function(i,s,o){var u=o("6eeb"),f=o("825a"),d=o("d039"),g=o("ad6d"),y="toString",x=RegExp.prototype,_=x[y],M=d(function(){return _.call({source:"a",flags:"b"})!="/a/b"}),k=_.name!=y;(M||k)&&u(RegExp.prototype,y,function(){var T=f(this),F=String(T.source),K=T.flags,Q=String(K===void 0&&T instanceof RegExp&&!("flags"in x)?g.call(T):K);return"/"+F+"/"+Q},{unsafe:!0})},"2ca0":function(i,s,o){var u=o("23e7"),f=o("06cf").f,d=o("50c4"),g=o("5a34"),y=o("1d80"),x=o("ab13"),_=o("c430"),M="".startsWith,k=Math.min,N=x("startsWith"),T=!_&&!N&&!!function(){var F=f(String.prototype,"startsWith");return F&&!F.writable}();u({target:"String",proto:!0,forced:!T&&!N},{startsWith:function(K){var Q=String(y(this));g(K);var he=d(k(arguments.length>1?arguments[1]:void 0,Q.length)),fe=String(K);return M?M.call(Q,fe,he):Q.slice(he,he+fe.length)===fe}})},"2d00":function(i,s,o){var u=o("da84"),f=o("342f"),d=u.process,g=d&&d.versions,y=g&&g.v8,x,_;y?(x=y.split("."),_=x[0]+x[1]):f&&(x=f.match(/Edge\/(\d+)/),(!x||x[1]>=74)&&(x=f.match(/Chrome\/(\d+)/),x&&(_=x[1]))),i.exports=_&&+_},"342f":function(i,s,o){var u=o("d066");i.exports=u("navigator","userAgent")||""},"35a1":function(i,s,o){var u=o("f5df"),f=o("3f8c"),d=o("b622"),g=d("iterator");i.exports=function(y){if(y!=null)return y[g]||y["@@iterator"]||f[u(y)]}},"37e8":function(i,s,o){var u=o("83ab"),f=o("9bf2"),d=o("825a"),g=o("df75");i.exports=u?Object.defineProperties:function(x,_){d(x);for(var M=g(_),k=M.length,N=0,T;k>N;)f.f(x,T=M[N++],_[T]);return x}},"3bbe":function(i,s,o){var u=o("861d");i.exports=function(f){if(!u(f)&&f!==null)throw TypeError("Can't set "+String(f)+" as a prototype");return f}},"3ca3":function(i,s,o){var u=o("6547").charAt,f=o("69f3"),d=o("7dd0"),g="String Iterator",y=f.set,x=f.getterFor(g);d(String,"String",function(_){y(this,{type:g,string:String(_),index:0})},function(){var M=x(this),k=M.string,N=M.index,T;return N>=k.length?{value:void 0,done:!0}:(T=u(k,N),M.index+=T.length,{value:T,done:!1})})},"3f8c":function(i,s){i.exports={}},4160:function(i,s,o){var u=o("23e7"),f=o("17c2");u({target:"Array",proto:!0,forced:[].forEach!=f},{forEach:f})},"428f":function(i,s,o){var u=o("da84");i.exports=u},"44ad":function(i,s,o){var u=o("d039"),f=o("c6b6"),d="".split;i.exports=u(function(){return!Object("z").propertyIsEnumerable(0)})?function(g){return f(g)=="String"?d.call(g,""):Object(g)}:Object},"44d2":function(i,s,o){var u=o("b622"),f=o("7c73"),d=o("9bf2"),g=u("unscopables"),y=Array.prototype;y[g]==null&&d.f(y,g,{configurable:!0,value:f(null)}),i.exports=function(x){y[g][x]=!0}},"44e7":function(i,s,o){var u=o("861d"),f=o("c6b6"),d=o("b622"),g=d("match");i.exports=function(y){var x;return u(y)&&((x=y[g])!==void 0?!!x:f(y)=="RegExp")}},4930:function(i,s,o){var u=o("d039");i.exports=!!Object.getOwnPropertySymbols&&!u(function(){return!String(Symbol())})},"4d64":function(i,s,o){var u=o("fc6a"),f=o("50c4"),d=o("23cb"),g=function(y){return function(x,_,M){var k=u(x),N=f(k.length),T=d(M,N),F;if(y&&_!=_){for(;N>T;)if(F=k[T++],F!=F)return!0}else for(;N>T;T++)if((y||T in k)&&k[T]===_)return y||T||0;return!y&&-1}};i.exports={includes:g(!0),indexOf:g(!1)}},"4de4":function(i,s,o){var u=o("23e7"),f=o("b727").filter,d=o("1dde"),g=o("ae40"),y=d("filter"),x=g("filter");u({target:"Array",proto:!0,forced:!y||!x},{filter:function(M){return f(this,M,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(i,s,o){var u=o("0366"),f=o("7b0b"),d=o("9bdd"),g=o("e95a"),y=o("50c4"),x=o("8418"),_=o("35a1");i.exports=function(k){var N=f(k),T=typeof this=="function"?this:Array,F=arguments.length,K=F>1?arguments[1]:void 0,Q=K!==void 0,he=_(N),fe=0,me,G,$,X,R,O;if(Q&&(K=u(K,F>2?arguments[2]:void 0,2)),he!=null&&!(T==Array&&g(he)))for(X=he.call(N),R=X.next,G=new T;!($=R.call(X)).done;fe++)O=Q?d(X,K,[$.value,fe],!0):$.value,x(G,fe,O);else for(me=y(N.length),G=new T(me);me>fe;fe++)O=Q?K(N[fe],fe):N[fe],x(G,fe,O);return G.length=fe,G}},"4fad":function(i,s,o){var u=o("23e7"),f=o("6f53").entries;u({target:"Object",stat:!0},{entries:function(g){return f(g)}})},"50c4":function(i,s,o){var u=o("a691"),f=Math.min;i.exports=function(d){return d>0?f(u(d),9007199254740991):0}},5135:function(i,s){var o={}.hasOwnProperty;i.exports=function(u,f){return o.call(u,f)}},5319:function(i,s,o){var u=o("d784"),f=o("825a"),d=o("7b0b"),g=o("50c4"),y=o("a691"),x=o("1d80"),_=o("8aa5"),M=o("14c3"),k=Math.max,N=Math.min,T=Math.floor,F=/\$([$&'`]|\d\d?|<[^>]*>)/g,K=/\$([$&'`]|\d\d?)/g,Q=function(he){return he===void 0?he:String(he)};u("replace",2,function(he,fe,me,G){var $=G.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,X=G.REPLACE_KEEPS_$0,R=$?"$":"$0";return[function(z,W){var V=x(this),oe=z==null?void 0:z[he];return oe!==void 0?oe.call(z,V,W):fe.call(String(V),z,W)},function(B,z){if(!$&&X||typeof z=="string"&&z.indexOf(R)===-1){var W=me(fe,B,this,z);if(W.done)return W.value}var V=f(B),oe=String(this),ie=typeof z=="function";ie||(z=String(z));var xe=V.global;if(xe){var Ee=V.unicode;V.lastIndex=0}for(var Te=[];;){var Y=M(V,oe);if(Y===null||(Te.push(Y),!xe))break;var q=String(Y[0]);q===""&&(V.lastIndex=_(oe,g(V.lastIndex),Ee))}for(var ee="",ue=0,le=0;le<Te.length;le++){Y=Te[le];for(var pe=String(Y[0]),Z=k(N(y(Y.index),oe.length),0),D=[],ke=1;ke<Y.length;ke++)D.push(Q(Y[ke]));var Me=Y.groups;if(ie){var Ge=[pe].concat(D,Z,oe);Me!==void 0&&Ge.push(Me);var ce=String(z.apply(void 0,Ge))}else ce=O(pe,oe,Z,D,Me,z);Z>=ue&&(ee+=oe.slice(ue,Z)+ce,ue=Z+pe.length)}return ee+oe.slice(ue)}];function O(B,z,W,V,oe,ie){var xe=W+B.length,Ee=V.length,Te=K;return oe!==void 0&&(oe=d(oe),Te=F),fe.call(ie,Te,function(Y,q){var ee;switch(q.charAt(0)){case"$":return"$";case"&":return B;case"`":return z.slice(0,W);case"'":return z.slice(xe);case"<":ee=oe[q.slice(1,-1)];break;default:var ue=+q;if(ue===0)return Y;if(ue>Ee){var le=T(ue/10);return le===0?Y:le<=Ee?V[le-1]===void 0?q.charAt(1):V[le-1]+q.charAt(1):Y}ee=V[ue-1]}return ee===void 0?"":ee})}})},5692:function(i,s,o){var u=o("c430"),f=o("c6cd");(i.exports=function(d,g){return f[d]||(f[d]=g!==void 0?g:{})})("versions",[]).push({version:"3.6.5",mode:u?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(i,s,o){var u=o("d066"),f=o("241c"),d=o("7418"),g=o("825a");i.exports=u("Reflect","ownKeys")||function(x){var _=f.f(g(x)),M=d.f;return M?_.concat(M(x)):_}},"5a34":function(i,s,o){var u=o("44e7");i.exports=function(f){if(u(f))throw TypeError("The method doesn't accept regular expressions");return f}},"5c6c":function(i,s){i.exports=function(o,u){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:u}}},"5db7":function(i,s,o){var u=o("23e7"),f=o("a2bf"),d=o("7b0b"),g=o("50c4"),y=o("1c0b"),x=o("65f0");u({target:"Array",proto:!0},{flatMap:function(M){var k=d(this),N=g(k.length),T;return y(M),T=x(k,0),T.length=f(T,k,k,N,0,1,M,arguments.length>1?arguments[1]:void 0),T}})},6547:function(i,s,o){var u=o("a691"),f=o("1d80"),d=function(g){return function(y,x){var _=String(f(y)),M=u(x),k=_.length,N,T;return M<0||M>=k?g?"":void 0:(N=_.charCodeAt(M),N<55296||N>56319||M+1===k||(T=_.charCodeAt(M+1))<56320||T>57343?g?_.charAt(M):N:g?_.slice(M,M+2):(N-55296<<10)+(T-56320)+65536)}};i.exports={codeAt:d(!1),charAt:d(!0)}},"65f0":function(i,s,o){var u=o("861d"),f=o("e8b5"),d=o("b622"),g=d("species");i.exports=function(y,x){var _;return f(y)&&(_=y.constructor,typeof _=="function"&&(_===Array||f(_.prototype))?_=void 0:u(_)&&(_=_[g],_===null&&(_=void 0))),new(_===void 0?Array:_)(x===0?0:x)}},"69f3":function(i,s,o){var u=o("7f9a"),f=o("da84"),d=o("861d"),g=o("9112"),y=o("5135"),x=o("f772"),_=o("d012"),M=f.WeakMap,k,N,T,F=function($){return T($)?N($):k($,{})},K=function($){return function(X){var R;if(!d(X)||(R=N(X)).type!==$)throw TypeError("Incompatible receiver, "+$+" required");return R}};if(u){var Q=new M,he=Q.get,fe=Q.has,me=Q.set;k=function($,X){return me.call(Q,$,X),X},N=function($){return he.call(Q,$)||{}},T=function($){return fe.call(Q,$)}}else{var G=x("state");_[G]=!0,k=function($,X){return g($,G,X),X},N=function($){return y($,G)?$[G]:{}},T=function($){return y($,G)}}i.exports={set:k,get:N,has:T,enforce:F,getterFor:K}},"6eeb":function(i,s,o){var u=o("da84"),f=o("9112"),d=o("5135"),g=o("ce4e"),y=o("8925"),x=o("69f3"),_=x.get,M=x.enforce,k=String(String).split("String");(i.exports=function(N,T,F,K){var Q=K?!!K.unsafe:!1,he=K?!!K.enumerable:!1,fe=K?!!K.noTargetGet:!1;if(typeof F=="function"&&(typeof T=="string"&&!d(F,"name")&&f(F,"name",T),M(F).source=k.join(typeof T=="string"?T:"")),N===u){he?N[T]=F:g(T,F);return}else Q?!fe&&N[T]&&(he=!0):delete N[T];he?N[T]=F:f(N,T,F)})(Function.prototype,"toString",function(){return typeof this=="function"&&_(this).source||y(this)})},"6f53":function(i,s,o){var u=o("83ab"),f=o("df75"),d=o("fc6a"),g=o("d1e7").f,y=function(x){return function(_){for(var M=d(_),k=f(M),N=k.length,T=0,F=[],K;N>T;)K=k[T++],(!u||g.call(M,K))&&F.push(x?[K,M[K]]:M[K]);return F}};i.exports={entries:y(!0),values:y(!1)}},"73d9":function(i,s,o){var u=o("44d2");u("flatMap")},7418:function(i,s){s.f=Object.getOwnPropertySymbols},"746f":function(i,s,o){var u=o("428f"),f=o("5135"),d=o("e538"),g=o("9bf2").f;i.exports=function(y){var x=u.Symbol||(u.Symbol={});f(x,y)||g(x,y,{value:d.f(y)})}},7839:function(i,s){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(i,s,o){var u=o("1d80");i.exports=function(f){return Object(u(f))}},"7c73":function(i,s,o){var u=o("825a"),f=o("37e8"),d=o("7839"),g=o("d012"),y=o("1be4"),x=o("cc12"),_=o("f772"),M=">",k="<",N="prototype",T="script",F=_("IE_PROTO"),K=function(){},Q=function($){return k+T+M+$+k+"/"+T+M},he=function($){$.write(Q("")),$.close();var X=$.parentWindow.Object;return $=null,X},fe=function(){var $=x("iframe"),X="java"+T+":",R;return $.style.display="none",y.appendChild($),$.src=String(X),R=$.contentWindow.document,R.open(),R.write(Q("document.F=Object")),R.close(),R.F},me,G=function(){try{me=document.domain&&new ActiveXObject("htmlfile")}catch{}G=me?he(me):fe();for(var $=d.length;$--;)delete G[N][d[$]];return G()};g[F]=!0,i.exports=Object.create||function(X,R){var O;return X!==null?(K[N]=u(X),O=new K,K[N]=null,O[F]=X):O=G(),R===void 0?O:f(O,R)}},"7dd0":function(i,s,o){var u=o("23e7"),f=o("9ed3"),d=o("e163"),g=o("d2bb"),y=o("d44e"),x=o("9112"),_=o("6eeb"),M=o("b622"),k=o("c430"),N=o("3f8c"),T=o("ae93"),F=T.IteratorPrototype,K=T.BUGGY_SAFARI_ITERATORS,Q=M("iterator"),he="keys",fe="values",me="entries",G=function(){return this};i.exports=function($,X,R,O,B,z,W){f(R,X,O);var V=function(le){if(le===B&&Te)return Te;if(!K&&le in xe)return xe[le];switch(le){case he:return function(){return new R(this,le)};case fe:return function(){return new R(this,le)};case me:return function(){return new R(this,le)}}return function(){return new R(this)}},oe=X+" Iterator",ie=!1,xe=$.prototype,Ee=xe[Q]||xe["@@iterator"]||B&&xe[B],Te=!K&&Ee||V(B),Y=X=="Array"&&xe.entries||Ee,q,ee,ue;if(Y&&(q=d(Y.call(new $)),F!==Object.prototype&&q.next&&(!k&&d(q)!==F&&(g?g(q,F):typeof q[Q]!="function"&&x(q,Q,G)),y(q,oe,!0,!0),k&&(N[oe]=G))),B==fe&&Ee&&Ee.name!==fe&&(ie=!0,Te=function(){return Ee.call(this)}),(!k||W)&&xe[Q]!==Te&&x(xe,Q,Te),N[X]=Te,B)if(ee={values:V(fe),keys:z?Te:V(he),entries:V(me)},W)for(ue in ee)(K||ie||!(ue in xe))&&_(xe,ue,ee[ue]);else u({target:X,proto:!0,forced:K||ie},ee);return ee}},"7f9a":function(i,s,o){var u=o("da84"),f=o("8925"),d=u.WeakMap;i.exports=typeof d=="function"&&/native code/.test(f(d))},"825a":function(i,s,o){var u=o("861d");i.exports=function(f){if(!u(f))throw TypeError(String(f)+" is not an object");return f}},"83ab":function(i,s,o){var u=o("d039");i.exports=!u(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(i,s,o){var u=o("c04e"),f=o("9bf2"),d=o("5c6c");i.exports=function(g,y,x){var _=u(y);_ in g?f.f(g,_,d(0,x)):g[_]=x}},"861d":function(i,s){i.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},8875:function(i,s,o){var u,f,d;(function(g,y){f=[],u=y,d=typeof u=="function"?u.apply(s,f):u,d!==void 0&&(i.exports=d)})(typeof self<"u"?self:this,function(){function g(){var y=Object.getOwnPropertyDescriptor(document,"currentScript");if(!y&&"currentScript"in document&&document.currentScript||y&&y.get!==g&&document.currentScript)return document.currentScript;try{throw new Error}catch(me){var x=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,_=/@([^@]*):(\d+):(\d+)\s*$/ig,M=x.exec(me.stack)||_.exec(me.stack),k=M&&M[1]||!1,N=M&&M[2]||!1,T=document.location.href.replace(document.location.hash,""),F,K,Q,he=document.getElementsByTagName("script");k===T&&(F=document.documentElement.outerHTML,K=new RegExp("(?:[^\\n]+?\\n){0,"+(N-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),Q=F.replace(K,"$1").trim());for(var fe=0;fe<he.length;fe++)if(he[fe].readyState==="interactive"||he[fe].src===k||k===T&&he[fe].innerHTML&&he[fe].innerHTML.trim()===Q)return he[fe];return null}}return g})},8925:function(i,s,o){var u=o("c6cd"),f=Function.toString;typeof u.inspectSource!="function"&&(u.inspectSource=function(d){return f.call(d)}),i.exports=u.inspectSource},"8aa5":function(i,s,o){var u=o("6547").charAt;i.exports=function(f,d,g){return d+(g?u(f,d).length:1)}},"8bbf":function(i,s){i.exports=t},"90e3":function(i,s){var o=0,u=Math.random();i.exports=function(f){return"Symbol("+String(f===void 0?"":f)+")_"+(++o+u).toString(36)}},9112:function(i,s,o){var u=o("83ab"),f=o("9bf2"),d=o("5c6c");i.exports=u?function(g,y,x){return f.f(g,y,d(1,x))}:function(g,y,x){return g[y]=x,g}},9263:function(i,s,o){var u=o("ad6d"),f=o("9f7f"),d=RegExp.prototype.exec,g=String.prototype.replace,y=d,x=function(){var N=/a/,T=/b*/g;return d.call(N,"a"),d.call(T,"a"),N.lastIndex!==0||T.lastIndex!==0}(),_=f.UNSUPPORTED_Y||f.BROKEN_CARET,M=/()??/.exec("")[1]!==void 0,k=x||M||_;k&&(y=function(T){var F=this,K,Q,he,fe,me=_&&F.sticky,G=u.call(F),$=F.source,X=0,R=T;return me&&(G=G.replace("y",""),G.indexOf("g")===-1&&(G+="g"),R=String(T).slice(F.lastIndex),F.lastIndex>0&&(!F.multiline||F.multiline&&T[F.lastIndex-1]!==`
`)&&($="(?: "+$+")",R=" "+R,X++),Q=new RegExp("^(?:"+$+")",G)),M&&(Q=new RegExp("^"+$+"$(?!\\s)",G)),x&&(K=F.lastIndex),he=d.call(me?Q:F,R),me?he?(he.input=he.input.slice(X),he[0]=he[0].slice(X),he.index=F.lastIndex,F.lastIndex+=he[0].length):F.lastIndex=0:x&&he&&(F.lastIndex=F.global?he.index+he[0].length:K),M&&he&&he.length>1&&g.call(he[0],Q,function(){for(fe=1;fe<arguments.length-2;fe++)arguments[fe]===void 0&&(he[fe]=void 0)}),he}),i.exports=y},"94ca":function(i,s,o){var u=o("d039"),f=/#|\.prototype\./,d=function(M,k){var N=y[g(M)];return N==_?!0:N==x?!1:typeof k=="function"?u(k):!!k},g=d.normalize=function(M){return String(M).replace(f,".").toLowerCase()},y=d.data={},x=d.NATIVE="N",_=d.POLYFILL="P";i.exports=d},"99af":function(i,s,o){var u=o("23e7"),f=o("d039"),d=o("e8b5"),g=o("861d"),y=o("7b0b"),x=o("50c4"),_=o("8418"),M=o("65f0"),k=o("1dde"),N=o("b622"),T=o("2d00"),F=N("isConcatSpreadable"),K=9007199254740991,Q="Maximum allowed index exceeded",he=T>=51||!f(function(){var $=[];return $[F]=!1,$.concat()[0]!==$}),fe=k("concat"),me=function($){if(!g($))return!1;var X=$[F];return X!==void 0?!!X:d($)},G=!he||!fe;u({target:"Array",proto:!0,forced:G},{concat:function(X){var R=y(this),O=M(R,0),B=0,z,W,V,oe,ie;for(z=-1,V=arguments.length;z<V;z++)if(ie=z===-1?R:arguments[z],me(ie)){if(oe=x(ie.length),B+oe>K)throw TypeError(Q);for(W=0;W<oe;W++,B++)W in ie&&_(O,B,ie[W])}else{if(B>=K)throw TypeError(Q);_(O,B++,ie)}return O.length=B,O}})},"9bdd":function(i,s,o){var u=o("825a");i.exports=function(f,d,g,y){try{return y?d(u(g)[0],g[1]):d(g)}catch(_){var x=f.return;throw x!==void 0&&u(x.call(f)),_}}},"9bf2":function(i,s,o){var u=o("83ab"),f=o("0cfb"),d=o("825a"),g=o("c04e"),y=Object.defineProperty;s.f=u?y:function(_,M,k){if(d(_),M=g(M,!0),d(k),f)try{return y(_,M,k)}catch{}if("get"in k||"set"in k)throw TypeError("Accessors not supported");return"value"in k&&(_[M]=k.value),_}},"9ed3":function(i,s,o){var u=o("ae93").IteratorPrototype,f=o("7c73"),d=o("5c6c"),g=o("d44e"),y=o("3f8c"),x=function(){return this};i.exports=function(_,M,k){var N=M+" Iterator";return _.prototype=f(u,{next:d(1,k)}),g(_,N,!1,!0),y[N]=x,_}},"9f7f":function(i,s,o){var u=o("d039");function f(d,g){return RegExp(d,g)}s.UNSUPPORTED_Y=u(function(){var d=f("a","y");return d.lastIndex=2,d.exec("abcd")!=null}),s.BROKEN_CARET=u(function(){var d=f("^r","gy");return d.lastIndex=2,d.exec("str")!=null})},a2bf:function(i,s,o){var u=o("e8b5"),f=o("50c4"),d=o("0366"),g=function(y,x,_,M,k,N,T,F){for(var K=k,Q=0,he=T?d(T,F,3):!1,fe;Q<M;){if(Q in _){if(fe=he?he(_[Q],Q,x):_[Q],N>0&&u(fe))K=g(y,x,fe,f(fe.length),K,N-1)-1;else{if(K>=9007199254740991)throw TypeError("Exceed the acceptable array length");y[K]=fe}K++}Q++}return K};i.exports=g},a352:function(i,s){i.exports=r},a434:function(i,s,o){var u=o("23e7"),f=o("23cb"),d=o("a691"),g=o("50c4"),y=o("7b0b"),x=o("65f0"),_=o("8418"),M=o("1dde"),k=o("ae40"),N=M("splice"),T=k("splice",{ACCESSORS:!0,0:0,1:2}),F=Math.max,K=Math.min,Q=9007199254740991,he="Maximum allowed length exceeded";u({target:"Array",proto:!0,forced:!N||!T},{splice:function(me,G){var $=y(this),X=g($.length),R=f(me,X),O=arguments.length,B,z,W,V,oe,ie;if(O===0?B=z=0:O===1?(B=0,z=X-R):(B=O-2,z=K(F(d(G),0),X-R)),X+B-z>Q)throw TypeError(he);for(W=x($,z),V=0;V<z;V++)oe=R+V,oe in $&&_(W,V,$[oe]);if(W.length=z,B<z){for(V=R;V<X-z;V++)oe=V+z,ie=V+B,oe in $?$[ie]=$[oe]:delete $[ie];for(V=X;V>X-z+B;V--)delete $[V-1]}else if(B>z)for(V=X-z;V>R;V--)oe=V+z-1,ie=V+B-1,oe in $?$[ie]=$[oe]:delete $[ie];for(V=0;V<B;V++)$[V+R]=arguments[V+2];return $.length=X-z+B,W}})},a4d3:function(i,s,o){var u=o("23e7"),f=o("da84"),d=o("d066"),g=o("c430"),y=o("83ab"),x=o("4930"),_=o("fdbf"),M=o("d039"),k=o("5135"),N=o("e8b5"),T=o("861d"),F=o("825a"),K=o("7b0b"),Q=o("fc6a"),he=o("c04e"),fe=o("5c6c"),me=o("7c73"),G=o("df75"),$=o("241c"),X=o("057f"),R=o("7418"),O=o("06cf"),B=o("9bf2"),z=o("d1e7"),W=o("9112"),V=o("6eeb"),oe=o("5692"),ie=o("f772"),xe=o("d012"),Ee=o("90e3"),Te=o("b622"),Y=o("e538"),q=o("746f"),ee=o("d44e"),ue=o("69f3"),le=o("b727").forEach,pe=ie("hidden"),Z="Symbol",D="prototype",ke=Te("toPrimitive"),Me=ue.set,Ge=ue.getterFor(Z),ce=Object[D],ne=f.Symbol,ye=d("JSON","stringify"),de=O.f,Ze=B.f,qe=X.f,tt=z.f,ze=oe("symbols"),Qe=oe("op-symbols"),et=oe("string-to-symbol-registry"),bt=oe("symbol-to-string-registry"),Pt=oe("wks"),At=f.QObject,Vt=!At||!At[D]||!At[D].findChild,Qt=y&&M(function(){return me(Ze({},"a",{get:function(){return Ze(this,"a",{value:7}).a}})).a!=7})?function(xn,Mn,Pn){var fr=de(ce,Mn);fr&&delete ce[Mn],Ze(xn,Mn,Pn),fr&&xn!==ce&&Ze(ce,Mn,fr)}:Ze,mn=function(xn,Mn){var Pn=ze[xn]=me(ne[D]);return Me(Pn,{type:Z,tag:xn,description:Mn}),y||(Pn.description=Mn),Pn},Ye=_?function(xn){return typeof xn=="symbol"}:function(xn){return Object(xn)instanceof ne},ot=function(Mn,Pn,fr){Mn===ce&&ot(Qe,Pn,fr),F(Mn);var yr=he(Pn,!0);return F(fr),k(ze,yr)?(fr.enumerable?(k(Mn,pe)&&Mn[pe][yr]&&(Mn[pe][yr]=!1),fr=me(fr,{enumerable:fe(0,!1)})):(k(Mn,pe)||Ze(Mn,pe,fe(1,{})),Mn[pe][yr]=!0),Qt(Mn,yr,fr)):Ze(Mn,yr,fr)},rt=function(Mn,Pn){F(Mn);var fr=Q(Pn),yr=G(fr).concat(Nn(fr));return le(yr,function(at){(!y||en.call(fr,at))&&ot(Mn,at,fr[at])}),Mn},zt=function(Mn,Pn){return Pn===void 0?me(Mn):rt(me(Mn),Pn)},en=function(Mn){var Pn=he(Mn,!0),fr=tt.call(this,Pn);return this===ce&&k(ze,Pn)&&!k(Qe,Pn)?!1:fr||!k(this,Pn)||!k(ze,Pn)||k(this,pe)&&this[pe][Pn]?fr:!0},Bn=function(Mn,Pn){var fr=Q(Mn),yr=he(Pn,!0);if(!(fr===ce&&k(ze,yr)&&!k(Qe,yr))){var at=de(fr,yr);return at&&k(ze,yr)&&!(k(fr,pe)&&fr[pe][yr])&&(at.enumerable=!0),at}},bn=function(Mn){var Pn=qe(Q(Mn)),fr=[];return le(Pn,function(yr){!k(ze,yr)&&!k(xe,yr)&&fr.push(yr)}),fr},Nn=function(Mn){var Pn=Mn===ce,fr=qe(Pn?Qe:Q(Mn)),yr=[];return le(fr,function(at){k(ze,at)&&(!Pn||k(ce,at))&&yr.push(ze[at])}),yr};if(x||(ne=function(){if(this instanceof ne)throw TypeError("Symbol is not a constructor");var Mn=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),Pn=Ee(Mn),fr=function(yr){this===ce&&fr.call(Qe,yr),k(this,pe)&&k(this[pe],Pn)&&(this[pe][Pn]=!1),Qt(this,Pn,fe(1,yr))};return y&&Vt&&Qt(ce,Pn,{configurable:!0,set:fr}),mn(Pn,Mn)},V(ne[D],"toString",function(){return Ge(this).tag}),V(ne,"withoutSetter",function(xn){return mn(Ee(xn),xn)}),z.f=en,B.f=ot,O.f=Bn,$.f=X.f=bn,R.f=Nn,Y.f=function(xn){return mn(Te(xn),xn)},y&&(Ze(ne[D],"description",{configurable:!0,get:function(){return Ge(this).description}}),g||V(ce,"propertyIsEnumerable",en,{unsafe:!0}))),u({global:!0,wrap:!0,forced:!x,sham:!x},{Symbol:ne}),le(G(Pt),function(xn){q(xn)}),u({target:Z,stat:!0,forced:!x},{for:function(xn){var Mn=String(xn);if(k(et,Mn))return et[Mn];var Pn=ne(Mn);return et[Mn]=Pn,bt[Pn]=Mn,Pn},keyFor:function(Mn){if(!Ye(Mn))throw TypeError(Mn+" is not a symbol");if(k(bt,Mn))return bt[Mn]},useSetter:function(){Vt=!0},useSimple:function(){Vt=!1}}),u({target:"Object",stat:!0,forced:!x,sham:!y},{create:zt,defineProperty:ot,defineProperties:rt,getOwnPropertyDescriptor:Bn}),u({target:"Object",stat:!0,forced:!x},{getOwnPropertyNames:bn,getOwnPropertySymbols:Nn}),u({target:"Object",stat:!0,forced:M(function(){R.f(1)})},{getOwnPropertySymbols:function(Mn){return R.f(K(Mn))}}),ye){var ar=!x||M(function(){var xn=ne();return ye([xn])!="[null]"||ye({a:xn})!="{}"||ye(Object(xn))!="{}"});u({target:"JSON",stat:!0,forced:ar},{stringify:function(Mn,Pn,fr){for(var yr=[Mn],at=1,We;arguments.length>at;)yr.push(arguments[at++]);if(We=Pn,!(!T(Pn)&&Mn===void 0||Ye(Mn)))return N(Pn)||(Pn=function(Ot,En){if(typeof We=="function"&&(En=We.call(this,Ot,En)),!Ye(En))return En}),yr[1]=Pn,ye.apply(null,yr)}})}ne[D][ke]||W(ne[D],ke,ne[D].valueOf),ee(ne,Z),xe[pe]=!0},a630:function(i,s,o){var u=o("23e7"),f=o("4df4"),d=o("1c7e"),g=!d(function(y){Array.from(y)});u({target:"Array",stat:!0,forced:g},{from:f})},a640:function(i,s,o){var u=o("d039");i.exports=function(f,d){var g=[][f];return!!g&&u(function(){g.call(null,d||function(){throw 1},1)})}},a691:function(i,s){var o=Math.ceil,u=Math.floor;i.exports=function(f){return isNaN(f=+f)?0:(f>0?u:o)(f)}},ab13:function(i,s,o){var u=o("b622"),f=u("match");i.exports=function(d){var g=/./;try{"/./"[d](g)}catch{try{return g[f]=!1,"/./"[d](g)}catch{}}return!1}},ac1f:function(i,s,o){var u=o("23e7"),f=o("9263");u({target:"RegExp",proto:!0,forced:/./.exec!==f},{exec:f})},ad6d:function(i,s,o){var u=o("825a");i.exports=function(){var f=u(this),d="";return f.global&&(d+="g"),f.ignoreCase&&(d+="i"),f.multiline&&(d+="m"),f.dotAll&&(d+="s"),f.unicode&&(d+="u"),f.sticky&&(d+="y"),d}},ae40:function(i,s,o){var u=o("83ab"),f=o("d039"),d=o("5135"),g=Object.defineProperty,y={},x=function(_){throw _};i.exports=function(_,M){if(d(y,_))return y[_];M||(M={});var k=[][_],N=d(M,"ACCESSORS")?M.ACCESSORS:!1,T=d(M,0)?M[0]:x,F=d(M,1)?M[1]:void 0;return y[_]=!!k&&!f(function(){if(N&&!u)return!0;var K={length:-1};N?g(K,1,{enumerable:!0,get:x}):K[1]=1,k.call(K,T,F)})}},ae93:function(i,s,o){var u=o("e163"),f=o("9112"),d=o("5135"),g=o("b622"),y=o("c430"),x=g("iterator"),_=!1,M=function(){return this},k,N,T;[].keys&&(T=[].keys(),"next"in T?(N=u(u(T)),N!==Object.prototype&&(k=N)):_=!0),k==null&&(k={}),!y&&!d(k,x)&&f(k,x,M),i.exports={IteratorPrototype:k,BUGGY_SAFARI_ITERATORS:_}},b041:function(i,s,o){var u=o("00ee"),f=o("f5df");i.exports=u?{}.toString:function(){return"[object "+f(this)+"]"}},b0c0:function(i,s,o){var u=o("83ab"),f=o("9bf2").f,d=Function.prototype,g=d.toString,y=/^\s*function ([^ (]*)/,x="name";u&&!(x in d)&&f(d,x,{configurable:!0,get:function(){try{return g.call(this).match(y)[1]}catch{return""}}})},b622:function(i,s,o){var u=o("da84"),f=o("5692"),d=o("5135"),g=o("90e3"),y=o("4930"),x=o("fdbf"),_=f("wks"),M=u.Symbol,k=x?M:M&&M.withoutSetter||g;i.exports=function(N){return d(_,N)||(y&&d(M,N)?_[N]=M[N]:_[N]=k("Symbol."+N)),_[N]}},b64b:function(i,s,o){var u=o("23e7"),f=o("7b0b"),d=o("df75"),g=o("d039"),y=g(function(){d(1)});u({target:"Object",stat:!0,forced:y},{keys:function(_){return d(f(_))}})},b727:function(i,s,o){var u=o("0366"),f=o("44ad"),d=o("7b0b"),g=o("50c4"),y=o("65f0"),x=[].push,_=function(M){var k=M==1,N=M==2,T=M==3,F=M==4,K=M==6,Q=M==5||K;return function(he,fe,me,G){for(var $=d(he),X=f($),R=u(fe,me,3),O=g(X.length),B=0,z=G||y,W=k?z(he,O):N?z(he,0):void 0,V,oe;O>B;B++)if((Q||B in X)&&(V=X[B],oe=R(V,B,$),M)){if(k)W[B]=oe;else if(oe)switch(M){case 3:return!0;case 5:return V;case 6:return B;case 2:x.call(W,V)}else if(F)return!1}return K?-1:T||F?F:W}};i.exports={forEach:_(0),map:_(1),filter:_(2),some:_(3),every:_(4),find:_(5),findIndex:_(6)}},c04e:function(i,s,o){var u=o("861d");i.exports=function(f,d){if(!u(f))return f;var g,y;if(d&&typeof(g=f.toString)=="function"&&!u(y=g.call(f))||typeof(g=f.valueOf)=="function"&&!u(y=g.call(f))||!d&&typeof(g=f.toString)=="function"&&!u(y=g.call(f)))return y;throw TypeError("Can't convert object to primitive value")}},c430:function(i,s){i.exports=!1},c6b6:function(i,s){var o={}.toString;i.exports=function(u){return o.call(u).slice(8,-1)}},c6cd:function(i,s,o){var u=o("da84"),f=o("ce4e"),d="__core-js_shared__",g=u[d]||f(d,{});i.exports=g},c740:function(i,s,o){var u=o("23e7"),f=o("b727").findIndex,d=o("44d2"),g=o("ae40"),y="findIndex",x=!0,_=g(y);y in[]&&Array(1)[y](function(){x=!1}),u({target:"Array",proto:!0,forced:x||!_},{findIndex:function(k){return f(this,k,arguments.length>1?arguments[1]:void 0)}}),d(y)},c8ba:function(i,s){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}i.exports=o},c975:function(i,s,o){var u=o("23e7"),f=o("4d64").indexOf,d=o("a640"),g=o("ae40"),y=[].indexOf,x=!!y&&1/[1].indexOf(1,-0)<0,_=d("indexOf"),M=g("indexOf",{ACCESSORS:!0,1:0});u({target:"Array",proto:!0,forced:x||!_||!M},{indexOf:function(N){return x?y.apply(this,arguments)||0:f(this,N,arguments.length>1?arguments[1]:void 0)}})},ca84:function(i,s,o){var u=o("5135"),f=o("fc6a"),d=o("4d64").indexOf,g=o("d012");i.exports=function(y,x){var _=f(y),M=0,k=[],N;for(N in _)!u(g,N)&&u(_,N)&&k.push(N);for(;x.length>M;)u(_,N=x[M++])&&(~d(k,N)||k.push(N));return k}},caad:function(i,s,o){var u=o("23e7"),f=o("4d64").includes,d=o("44d2"),g=o("ae40"),y=g("indexOf",{ACCESSORS:!0,1:0});u({target:"Array",proto:!0,forced:!y},{includes:function(_){return f(this,_,arguments.length>1?arguments[1]:void 0)}}),d("includes")},cc12:function(i,s,o){var u=o("da84"),f=o("861d"),d=u.document,g=f(d)&&f(d.createElement);i.exports=function(y){return g?d.createElement(y):{}}},ce4e:function(i,s,o){var u=o("da84"),f=o("9112");i.exports=function(d,g){try{f(u,d,g)}catch{u[d]=g}return g}},d012:function(i,s){i.exports={}},d039:function(i,s){i.exports=function(o){try{return!!o()}catch{return!0}}},d066:function(i,s,o){var u=o("428f"),f=o("da84"),d=function(g){return typeof g=="function"?g:void 0};i.exports=function(g,y){return arguments.length<2?d(u[g])||d(f[g]):u[g]&&u[g][y]||f[g]&&f[g][y]}},d1e7:function(i,s,o){var u={}.propertyIsEnumerable,f=Object.getOwnPropertyDescriptor,d=f&&!u.call({1:2},1);s.f=d?function(y){var x=f(this,y);return!!x&&x.enumerable}:u},d28b:function(i,s,o){var u=o("746f");u("iterator")},d2bb:function(i,s,o){var u=o("825a"),f=o("3bbe");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var d=!1,g={},y;try{y=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,y.call(g,[]),d=g instanceof Array}catch{}return function(_,M){return u(_),f(M),d?y.call(_,M):_.__proto__=M,_}}():void 0)},d3b7:function(i,s,o){var u=o("00ee"),f=o("6eeb"),d=o("b041");u||f(Object.prototype,"toString",d,{unsafe:!0})},d44e:function(i,s,o){var u=o("9bf2").f,f=o("5135"),d=o("b622"),g=d("toStringTag");i.exports=function(y,x,_){y&&!f(y=_?y:y.prototype,g)&&u(y,g,{configurable:!0,value:x})}},d58f:function(i,s,o){var u=o("1c0b"),f=o("7b0b"),d=o("44ad"),g=o("50c4"),y=function(x){return function(_,M,k,N){u(M);var T=f(_),F=d(T),K=g(T.length),Q=x?K-1:0,he=x?-1:1;if(k<2)for(;;){if(Q in F){N=F[Q],Q+=he;break}if(Q+=he,x?Q<0:K<=Q)throw TypeError("Reduce of empty array with no initial value")}for(;x?Q>=0:K>Q;Q+=he)Q in F&&(N=M(N,F[Q],Q,T));return N}};i.exports={left:y(!1),right:y(!0)}},d784:function(i,s,o){o("ac1f");var u=o("6eeb"),f=o("d039"),d=o("b622"),g=o("9263"),y=o("9112"),x=d("species"),_=!f(function(){var F=/./;return F.exec=function(){var K=[];return K.groups={a:"7"},K},"".replace(F,"$<a>")!=="7"}),M=function(){return"a".replace(/./,"$0")==="$0"}(),k=d("replace"),N=function(){return/./[k]?/./[k]("a","$0")==="":!1}(),T=!f(function(){var F=/(?:)/,K=F.exec;F.exec=function(){return K.apply(this,arguments)};var Q="ab".split(F);return Q.length!==2||Q[0]!=="a"||Q[1]!=="b"});i.exports=function(F,K,Q,he){var fe=d(F),me=!f(function(){var B={};return B[fe]=function(){return 7},""[F](B)!=7}),G=me&&!f(function(){var B=!1,z=/a/;return F==="split"&&(z={},z.constructor={},z.constructor[x]=function(){return z},z.flags="",z[fe]=/./[fe]),z.exec=function(){return B=!0,null},z[fe](""),!B});if(!me||!G||F==="replace"&&!(_&&M&&!N)||F==="split"&&!T){var $=/./[fe],X=Q(fe,""[F],function(B,z,W,V,oe){return z.exec===g?me&&!oe?{done:!0,value:$.call(z,W,V)}:{done:!0,value:B.call(W,z,V)}:{done:!1}},{REPLACE_KEEPS_$0:M,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:N}),R=X[0],O=X[1];u(String.prototype,F,R),u(RegExp.prototype,fe,K==2?function(B,z){return O.call(B,this,z)}:function(B){return O.call(B,this)})}he&&y(RegExp.prototype[fe],"sham",!0)}},d81d:function(i,s,o){var u=o("23e7"),f=o("b727").map,d=o("1dde"),g=o("ae40"),y=d("map"),x=g("map");u({target:"Array",proto:!0,forced:!y||!x},{map:function(M){return f(this,M,arguments.length>1?arguments[1]:void 0)}})},da84:function(i,s,o){(function(u){var f=function(d){return d&&d.Math==Math&&d};i.exports=f(typeof globalThis=="object"&&globalThis)||f(typeof window=="object"&&window)||f(typeof self=="object"&&self)||f(typeof u=="object"&&u)||Function("return this")()}).call(this,o("c8ba"))},dbb4:function(i,s,o){var u=o("23e7"),f=o("83ab"),d=o("56ef"),g=o("fc6a"),y=o("06cf"),x=o("8418");u({target:"Object",stat:!0,sham:!f},{getOwnPropertyDescriptors:function(M){for(var k=g(M),N=y.f,T=d(k),F={},K=0,Q,he;T.length>K;)he=N(k,Q=T[K++]),he!==void 0&&x(F,Q,he);return F}})},dbf1:function(i,s,o){(function(u){o.d(s,"a",function(){return d});function f(){return typeof window<"u"?window.console:u.console}var d=f()}).call(this,o("c8ba"))},ddb0:function(i,s,o){var u=o("da84"),f=o("fdbc"),d=o("e260"),g=o("9112"),y=o("b622"),x=y("iterator"),_=y("toStringTag"),M=d.values;for(var k in f){var N=u[k],T=N&&N.prototype;if(T){if(T[x]!==M)try{g(T,x,M)}catch{T[x]=M}if(T[_]||g(T,_,k),f[k]){for(var F in d)if(T[F]!==d[F])try{g(T,F,d[F])}catch{T[F]=d[F]}}}}},df75:function(i,s,o){var u=o("ca84"),f=o("7839");i.exports=Object.keys||function(g){return u(g,f)}},e01a:function(i,s,o){var u=o("23e7"),f=o("83ab"),d=o("da84"),g=o("5135"),y=o("861d"),x=o("9bf2").f,_=o("e893"),M=d.Symbol;if(f&&typeof M=="function"&&(!("description"in M.prototype)||M().description!==void 0)){var k={},N=function(){var fe=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),me=this instanceof N?new M(fe):fe===void 0?M():M(fe);return fe===""&&(k[me]=!0),me};_(N,M);var T=N.prototype=M.prototype;T.constructor=N;var F=T.toString,K=String(M("test"))=="Symbol(test)",Q=/^Symbol\((.*)\)[^)]+$/;x(T,"description",{configurable:!0,get:function(){var fe=y(this)?this.valueOf():this,me=F.call(fe);if(g(k,fe))return"";var G=K?me.slice(7,-1):me.replace(Q,"$1");return G===""?void 0:G}}),u({global:!0,forced:!0},{Symbol:N})}},e163:function(i,s,o){var u=o("5135"),f=o("7b0b"),d=o("f772"),g=o("e177"),y=d("IE_PROTO"),x=Object.prototype;i.exports=g?Object.getPrototypeOf:function(_){return _=f(_),u(_,y)?_[y]:typeof _.constructor=="function"&&_ instanceof _.constructor?_.constructor.prototype:_ instanceof Object?x:null}},e177:function(i,s,o){var u=o("d039");i.exports=!u(function(){function f(){}return f.prototype.constructor=null,Object.getPrototypeOf(new f)!==f.prototype})},e260:function(i,s,o){var u=o("fc6a"),f=o("44d2"),d=o("3f8c"),g=o("69f3"),y=o("7dd0"),x="Array Iterator",_=g.set,M=g.getterFor(x);i.exports=y(Array,"Array",function(k,N){_(this,{type:x,target:u(k),index:0,kind:N})},function(){var k=M(this),N=k.target,T=k.kind,F=k.index++;return!N||F>=N.length?(k.target=void 0,{value:void 0,done:!0}):T=="keys"?{value:F,done:!1}:T=="values"?{value:N[F],done:!1}:{value:[F,N[F]],done:!1}},"values"),d.Arguments=d.Array,f("keys"),f("values"),f("entries")},e439:function(i,s,o){var u=o("23e7"),f=o("d039"),d=o("fc6a"),g=o("06cf").f,y=o("83ab"),x=f(function(){g(1)}),_=!y||x;u({target:"Object",stat:!0,forced:_,sham:!y},{getOwnPropertyDescriptor:function(k,N){return g(d(k),N)}})},e538:function(i,s,o){var u=o("b622");s.f=u},e893:function(i,s,o){var u=o("5135"),f=o("56ef"),d=o("06cf"),g=o("9bf2");i.exports=function(y,x){for(var _=f(x),M=g.f,k=d.f,N=0;N<_.length;N++){var T=_[N];u(y,T)||M(y,T,k(x,T))}}},e8b5:function(i,s,o){var u=o("c6b6");i.exports=Array.isArray||function(d){return u(d)=="Array"}},e95a:function(i,s,o){var u=o("b622"),f=o("3f8c"),d=u("iterator"),g=Array.prototype;i.exports=function(y){return y!==void 0&&(f.Array===y||g[d]===y)}},f5df:function(i,s,o){var u=o("00ee"),f=o("c6b6"),d=o("b622"),g=d("toStringTag"),y=f(function(){return arguments}())=="Arguments",x=function(_,M){try{return _[M]}catch{}};i.exports=u?f:function(_){var M,k,N;return _===void 0?"Undefined":_===null?"Null":typeof(k=x(M=Object(_),g))=="string"?k:y?f(M):(N=f(M))=="Object"&&typeof M.callee=="function"?"Arguments":N}},f772:function(i,s,o){var u=o("5692"),f=o("90e3"),d=u("keys");i.exports=function(g){return d[g]||(d[g]=f(g))}},fb15:function(i,s,o){if(o.r(s),typeof window<"u"){var u=window.document.currentScript;{var f=o("8875");u=f(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:f})}var d=u&&u.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);d&&(o.p=d[1])}o("99af"),o("4de4"),o("4160"),o("c975"),o("d81d"),o("a434"),o("159b"),o("a4d3"),o("e439"),o("dbb4"),o("b64b");function g(Ye,ot,rt){return ot in Ye?Object.defineProperty(Ye,ot,{value:rt,enumerable:!0,configurable:!0,writable:!0}):Ye[ot]=rt,Ye}function y(Ye,ot){var rt=Object.keys(Ye);if(Object.getOwnPropertySymbols){var zt=Object.getOwnPropertySymbols(Ye);ot&&(zt=zt.filter(function(en){return Object.getOwnPropertyDescriptor(Ye,en).enumerable})),rt.push.apply(rt,zt)}return rt}function x(Ye){for(var ot=1;ot<arguments.length;ot++){var rt=arguments[ot]!=null?arguments[ot]:{};ot%2?y(Object(rt),!0).forEach(function(zt){g(Ye,zt,rt[zt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ye,Object.getOwnPropertyDescriptors(rt)):y(Object(rt)).forEach(function(zt){Object.defineProperty(Ye,zt,Object.getOwnPropertyDescriptor(rt,zt))})}return Ye}function _(Ye){if(Array.isArray(Ye))return Ye}o("e01a"),o("d28b"),o("e260"),o("d3b7"),o("3ca3"),o("ddb0");function M(Ye,ot){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Ye)))){var rt=[],zt=!0,en=!1,Bn=void 0;try{for(var bn=Ye[Symbol.iterator](),Nn;!(zt=(Nn=bn.next()).done)&&(rt.push(Nn.value),!(ot&&rt.length===ot));zt=!0);}catch(ar){en=!0,Bn=ar}finally{try{!zt&&bn.return!=null&&bn.return()}finally{if(en)throw Bn}}return rt}}o("a630"),o("fb6a"),o("b0c0"),o("25f0");function k(Ye,ot){(ot==null||ot>Ye.length)&&(ot=Ye.length);for(var rt=0,zt=new Array(ot);rt<ot;rt++)zt[rt]=Ye[rt];return zt}function N(Ye,ot){if(Ye){if(typeof Ye=="string")return k(Ye,ot);var rt=Object.prototype.toString.call(Ye).slice(8,-1);if(rt==="Object"&&Ye.constructor&&(rt=Ye.constructor.name),rt==="Map"||rt==="Set")return Array.from(Ye);if(rt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rt))return k(Ye,ot)}}function T(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F(Ye,ot){return _(Ye)||M(Ye,ot)||N(Ye,ot)||T()}function K(Ye){if(Array.isArray(Ye))return k(Ye)}function Q(Ye){if(typeof Symbol<"u"&&Symbol.iterator in Object(Ye))return Array.from(Ye)}function he(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fe(Ye){return K(Ye)||Q(Ye)||N(Ye)||he()}var me=o("a352"),G=o.n(me);function $(Ye){Ye.parentElement!==null&&Ye.parentElement.removeChild(Ye)}function X(Ye,ot,rt){var zt=rt===0?Ye.children[0]:Ye.children[rt-1].nextSibling;Ye.insertBefore(ot,zt)}var R=o("dbf1");o("13d5"),o("4fad"),o("ac1f"),o("5319");function O(Ye){var ot=Object.create(null);return function(zt){var en=ot[zt];return en||(ot[zt]=Ye(zt))}}var B=/-(\w)/g,z=O(function(Ye){return Ye.replace(B,function(ot,rt){return rt.toUpperCase()})});o("5db7"),o("73d9");var W=["Start","Add","Remove","Update","End"],V=["Choose","Unchoose","Sort","Filter","Clone"],oe=["Move"],ie=[oe,W,V].flatMap(function(Ye){return Ye}).map(function(Ye){return"on".concat(Ye)}),xe={manage:oe,manageAndEmit:W,emit:V};function Ee(Ye){return ie.indexOf(Ye)!==-1}o("caad"),o("2ca0");var Te=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function Y(Ye){return Te.includes(Ye)}function q(Ye){return["transition-group","TransitionGroup"].includes(Ye)}function ee(Ye){return["id","class","role","style"].includes(Ye)||Ye.startsWith("data-")||Ye.startsWith("aria-")||Ye.startsWith("on")}function ue(Ye){return Ye.reduce(function(ot,rt){var zt=F(rt,2),en=zt[0],Bn=zt[1];return ot[en]=Bn,ot},{})}function le(Ye){var ot=Ye.$attrs,rt=Ye.componentData,zt=rt===void 0?{}:rt,en=ue(Object.entries(ot).filter(function(Bn){var bn=F(Bn,2),Nn=bn[0];return bn[1],ee(Nn)}));return x(x({},en),zt)}function pe(Ye){var ot=Ye.$attrs,rt=Ye.callBackBuilder,zt=ue(Z(ot));Object.entries(rt).forEach(function(Bn){var bn=F(Bn,2),Nn=bn[0],ar=bn[1];xe[Nn].forEach(function(xn){zt["on".concat(xn)]=ar(xn)})});var en="[data-draggable]".concat(zt.draggable||"");return x(x({},zt),{},{draggable:en})}function Z(Ye){return Object.entries(Ye).filter(function(ot){var rt=F(ot,2),zt=rt[0];return rt[1],!ee(zt)}).map(function(ot){var rt=F(ot,2),zt=rt[0],en=rt[1];return[z(zt),en]}).filter(function(ot){var rt=F(ot,2),zt=rt[0];return rt[1],!Ee(zt)})}o("c740");function D(Ye,ot){if(!(Ye instanceof ot))throw new TypeError("Cannot call a class as a function")}function ke(Ye,ot){for(var rt=0;rt<ot.length;rt++){var zt=ot[rt];zt.enumerable=zt.enumerable||!1,zt.configurable=!0,"value"in zt&&(zt.writable=!0),Object.defineProperty(Ye,zt.key,zt)}}function Me(Ye,ot,rt){return ot&&ke(Ye.prototype,ot),Ye}var Ge=function(ot){var rt=ot.el;return rt},ce=function(ot,rt){return ot.__draggable_context=rt},ne=function(ot){return ot.__draggable_context},ye=function(){function Ye(ot){var rt=ot.nodes,zt=rt.header,en=rt.default,Bn=rt.footer,bn=ot.root,Nn=ot.realList;D(this,Ye),this.defaultNodes=en,this.children=[].concat(fe(zt),fe(en),fe(Bn)),this.externalComponent=bn.externalComponent,this.rootTransition=bn.transition,this.tag=bn.tag,this.realList=Nn}return Me(Ye,[{key:"render",value:function(rt,zt){var en=this.tag,Bn=this.children,bn=this._isRootComponent,Nn=bn?{default:function(){return Bn}}:Bn;return rt(en,zt,Nn)}},{key:"updated",value:function(){var rt=this.defaultNodes,zt=this.realList;rt.forEach(function(en,Bn){ce(Ge(en),{element:zt[Bn],index:Bn})})}},{key:"getUnderlyingVm",value:function(rt){return ne(rt)}},{key:"getVmIndexFromDomIndex",value:function(rt,zt){var en=this.defaultNodes,Bn=en.length,bn=zt.children,Nn=bn.item(rt);if(Nn===null)return Bn;var ar=ne(Nn);if(ar)return ar.index;if(Bn===0)return 0;var xn=Ge(en[0]),Mn=fe(bn).findIndex(function(Pn){return Pn===xn});return rt<Mn?0:Bn}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),Ye}(),de=o("8bbf");function Ze(Ye,ot){var rt=Ye[ot];return rt?rt():[]}function qe(Ye){var ot=Ye.$slots,rt=Ye.realList,zt=Ye.getKey,en=rt||[],Bn=["header","footer"].map(function(Pn){return Ze(ot,Pn)}),bn=F(Bn,2),Nn=bn[0],ar=bn[1],xn=ot.item;if(!xn)throw new Error("draggable element must have an item slot");var Mn=en.flatMap(function(Pn,fr){return xn({element:Pn,index:fr}).map(function(yr){return yr.key=zt(Pn),yr.props=x(x({},yr.props||{}),{},{"data-draggable":!0}),yr})});if(Mn.length!==en.length)throw new Error("Item slot must have only one child");return{header:Nn,footer:ar,default:Mn}}function tt(Ye){var ot=q(Ye),rt=!Y(Ye)&&!ot;return{transition:ot,externalComponent:rt,tag:rt?Object(de.resolveComponent)(Ye):ot?de.TransitionGroup:Ye}}function ze(Ye){var ot=Ye.$slots,rt=Ye.tag,zt=Ye.realList,en=Ye.getKey,Bn=qe({$slots:ot,realList:zt,getKey:en}),bn=tt(rt);return new ye({nodes:Bn,root:bn,realList:zt})}function Qe(Ye,ot){var rt=this;Object(de.nextTick)(function(){return rt.$emit(Ye.toLowerCase(),ot)})}function et(Ye){var ot=this;return function(rt,zt){if(ot.realList!==null)return ot["onDrag".concat(Ye)](rt,zt)}}function bt(Ye){var ot=this,rt=et.call(this,Ye);return function(zt,en){rt.call(ot,zt,en),Qe.call(ot,Ye,zt)}}var Pt=null,At={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(ot){return ot}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Vt=["update:modelValue","change"].concat(fe([].concat(fe(xe.manageAndEmit),fe(xe.emit)).map(function(Ye){return Ye.toLowerCase()}))),Qt=Object(de.defineComponent)({name:"draggable",inheritAttrs:!1,props:At,emits:Vt,data:function(){return{error:!1}},render:function(){try{this.error=!1;var ot=this.$slots,rt=this.$attrs,zt=this.tag,en=this.componentData,Bn=this.realList,bn=this.getKey,Nn=ze({$slots:ot,tag:zt,realList:Bn,getKey:bn});this.componentStructure=Nn;var ar=le({$attrs:rt,componentData:en});return Nn.render(de.h,ar)}catch(xn){return this.error=!0,Object(de.h)("pre",{style:{color:"red"}},xn.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&R.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var ot=this;if(!this.error){var rt=this.$attrs,zt=this.$el,en=this.componentStructure;en.updated();var Bn=pe({$attrs:rt,callBackBuilder:{manageAndEmit:function(ar){return bt.call(ot,ar)},emit:function(ar){return Qe.bind(ot,ar)},manage:function(ar){return et.call(ot,ar)}}}),bn=zt.nodeType===1?zt:zt.parentElement;this._sortable=new G.a(bn,Bn),this.targetDomElement=bn,bn.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var ot=this.list;return ot||this.modelValue},getKey:function(){var ot=this.itemKey;return typeof ot=="function"?ot:function(rt){return rt[ot]}}},watch:{$attrs:{handler:function(ot){var rt=this._sortable;rt&&Z(ot).forEach(function(zt){var en=F(zt,2),Bn=en[0],bn=en[1];rt.option(Bn,bn)})},deep:!0}},methods:{getUnderlyingVm:function(ot){return this.componentStructure.getUnderlyingVm(ot)||null},getUnderlyingPotencialDraggableComponent:function(ot){return ot.__draggable_component__},emitChanges:function(ot){var rt=this;Object(de.nextTick)(function(){return rt.$emit("change",ot)})},alterList:function(ot){if(this.list){ot(this.list);return}var rt=fe(this.modelValue);ot(rt),this.$emit("update:modelValue",rt)},spliceList:function(){var ot=arguments,rt=function(en){return en.splice.apply(en,fe(ot))};this.alterList(rt)},updatePosition:function(ot,rt){var zt=function(Bn){return Bn.splice(rt,0,Bn.splice(ot,1)[0])};this.alterList(zt)},getRelatedContextFromMoveEvent:function(ot){var rt=ot.to,zt=ot.related,en=this.getUnderlyingPotencialDraggableComponent(rt);if(!en)return{component:en};var Bn=en.realList,bn={list:Bn,component:en};if(rt!==zt&&Bn){var Nn=en.getUnderlyingVm(zt)||{};return x(x({},Nn),bn)}return bn},getVmIndexFromDomIndex:function(ot){return this.componentStructure.getVmIndexFromDomIndex(ot,this.targetDomElement)},onDragStart:function(ot){this.context=this.getUnderlyingVm(ot.item),ot.item._underlying_vm_=this.clone(this.context.element),Pt=ot.item},onDragAdd:function(ot){var rt=ot.item._underlying_vm_;if(rt!==void 0){$(ot.item);var zt=this.getVmIndexFromDomIndex(ot.newIndex);this.spliceList(zt,0,rt);var en={element:rt,newIndex:zt};this.emitChanges({added:en})}},onDragRemove:function(ot){if(X(this.$el,ot.item,ot.oldIndex),ot.pullMode==="clone"){$(ot.clone);return}var rt=this.context,zt=rt.index,en=rt.element;this.spliceList(zt,1);var Bn={element:en,oldIndex:zt};this.emitChanges({removed:Bn})},onDragUpdate:function(ot){$(ot.item),X(ot.from,ot.item,ot.oldIndex);var rt=this.context.index,zt=this.getVmIndexFromDomIndex(ot.newIndex);this.updatePosition(rt,zt);var en={element:this.context.element,oldIndex:rt,newIndex:zt};this.emitChanges({moved:en})},computeFutureIndex:function(ot,rt){if(!ot.element)return 0;var zt=fe(rt.to.children).filter(function(Nn){return Nn.style.display!=="none"}),en=zt.indexOf(rt.related),Bn=ot.component.getVmIndexFromDomIndex(en),bn=zt.indexOf(Pt)!==-1;return bn||!rt.willInsertAfter?Bn:Bn+1},onDragMove:function(ot,rt){var zt=this.move,en=this.realList;if(!zt||!en)return!0;var Bn=this.getRelatedContextFromMoveEvent(ot),bn=this.computeFutureIndex(Bn,ot),Nn=x(x({},this.context),{},{futureIndex:bn}),ar=x(x({},ot),{},{relatedContext:Bn,draggedContext:Nn});return zt(ar,rt)},onDragEnd:function(){Pt=null}}}),mn=Qt;s.default=mn},fb6a:function(i,s,o){var u=o("23e7"),f=o("861d"),d=o("e8b5"),g=o("23cb"),y=o("50c4"),x=o("fc6a"),_=o("8418"),M=o("b622"),k=o("1dde"),N=o("ae40"),T=k("slice"),F=N("slice",{ACCESSORS:!0,0:0,1:2}),K=M("species"),Q=[].slice,he=Math.max;u({target:"Array",proto:!0,forced:!T||!F},{slice:function(me,G){var $=x(this),X=y($.length),R=g(me,X),O=g(G===void 0?X:G,X),B,z,W;if(d($)&&(B=$.constructor,typeof B=="function"&&(B===Array||d(B.prototype))?B=void 0:f(B)&&(B=B[K],B===null&&(B=void 0)),B===Array||B===void 0))return Q.call($,R,O);for(z=new(B===void 0?Array:B)(he(O-R,0)),W=0;R<O;R++,W++)R in $&&_(z,W,$[R]);return z.length=W,z}})},fc6a:function(i,s,o){var u=o("44ad"),f=o("1d80");i.exports=function(d){return u(f(d))}},fdbc:function(i,s){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(i,s,o){var u=o("4930");i.exports=u&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(Rx);var lV=Rx.exports;const uV=fy(lV),cV={class:"h-full bg-gray-50"},fV={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},hV={class:"sm:flex sm:items-center"},dV={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},pV={key:0,class:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10"},gV={class:"mt-6 bg-white shadow rounded-lg p-4"},mV={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},vV=["value"],yV={key:0,class:"mt-6 p-6 text-center bg-white shadow rounded-lg"},_V={key:1,class:"mt-6 overflow-x-auto pb-4"},bV={key:0,class:"p-6 text-center bg-white shadow rounded-lg mb-4"},wV={class:"flex space-x-4 min-w-max"},xV={class:"bg-white rounded-lg shadow overflow-hidden"},LV={class:"flex items-center"},SV={class:"flex items-center"},CV={class:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full"},EV={class:"p-2 max-h-[calc(100vh-250px)] overflow-y-auto"},PV={class:"min-h-[100px] draggable-container"},MV={class:"note-container"},AV={class:"bg-white rounded-md shadow-sm border border-gray-200 overflow-hidden"},kV={class:"p-3 flex items-center justify-between note-drag-handle cursor-move no-select"},TV={class:"flex items-center"},NV={class:"text-sm font-medium text-gray-900 truncate"},DV={class:"px-3 py-2"},IV={class:"text-sm text-gray-500 line-clamp-2"},OV={class:"px-3 py-2 bg-gray-50 border-t border-gray-100 flex justify-between items-center"},BV={class:"text-xs text-gray-500"},RV={class:"flex space-x-1"},FV={key:0,class:"text-xs text-primary-500 flex items-center mr-1",title:"Note golocalise"},jV={key:1,class:"text-xs text-gray-400 flex items-center mr-1",title:"Note simple"},zV=["onClick"],$V=["onClick"],UV=["onClick"],VV=["onClick"],GV={key:0,class:"fixed z-[3001] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},HV={class:"flex items-center justify-center min-h-screen w-full"},qV={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden"},WV={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3 p-4 md:px-6"},ZV=cs({__name:"NotesView",setup(e){const n=Bp(),t=Vu(),r=Fp(),i=ud(),s=jt(!0),o=jt(!1),u=jt(!1),f=jt(null),d=jt(null),g=jt("info"),y=jt(null),x=cr(()=>{const Te=r.getSortedColumns;return console.log("[NotesView][columnsForDrag] Colonnes tries:",Te),Te}),_=[{id:Zi.PRIVATE,title:"Priv",description:"Visible uniquement par vous"},{id:Zi.COMPANY,title:"Entreprise",description:"Visible uniquement par l'entreprise"},{id:Zi.EMPLOYEE,title:"Salaris",description:"Visible par l'entreprise et ses salaris"},{id:Zi.VISITOR,title:"Visiteurs",description:"Visible par tous (entreprise, salaris et visiteurs)"}],M=Kl({search:"",date:"",accessLevel:""});function k(Te){if(!Te)return"Date non dfinie";try{const Y=new Date(Te);return isNaN(Y.getTime())?(console.warn("[safeFormatDate] Date invalide:",Te),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(Y)}catch(Y){return console.error("[safeFormatDate] Erreur lors du formatage de la date:",Y),"Date invalide"}}function N(Te){if(!Te)return null;try{const Y=new Date(Te);return isNaN(Y.getTime())?(console.warn("[safeDate] Date invalide:",Te),null):Y}catch(Y){return console.error("[safeDate] Erreur lors de la cration de la date:",Y),null}}function T(Te){return k(Te)}const F=cr(()=>{let Te=r.getAccessibleNotes;if(M.search){const Y=M.search.toLowerCase();Te=Te.filter(q=>q.title.toLowerCase().includes(Y)||q.description.toLowerCase().includes(Y))}if(M.accessLevel&&(Te=Te.filter(Y=>Y.accessLevel===M.accessLevel)),M.date){const Y=new Date;Y.setHours(0,0,0,0);const q=new Date(Y);q.setDate(Y.getDate()-Y.getDay());const ee=new Date(Y.getFullYear(),Y.getMonth(),1);Te=Te.filter(ue=>{const le=N(ue.createdAt);return le?M.date==="today"?le>=Y:M.date==="week"?le>=q:M.date==="month"?le>=ee:!0:!1})}return Te}),K=cr(()=>Te=>{const Y=r.getNotesByColumn(Te);return console.log(`[NotesView][getNotesByColumn] Notes pour la colonne ${Te}:`,Y),Y});function Q(Te){if(Te==null)return"Non dfini";switch(Te){case Zi.PRIVATE:return"Priv";case Zi.COMPANY:return"Entreprise";case Zi.EMPLOYEE:return"Salaris";case Zi.VISITOR:return"Visiteurs";default:return"Non dfini"}}function he(Te){if(Te==null)return"#9CA3AF";switch(Te){case Zi.PRIVATE:return"#9CA3AF";case Zi.COMPANY:return"#EF4444";case Zi.EMPLOYEE:return"#F59E0B";case Zi.VISITOR:return"#10B981";default:return"#6B7280"}}Is(()=>{console.log("[NotesView] Composant mont"),fe().then(()=>{console.log("[NotesView] Donnes charges avec succs")}).catch(Te=>{console.error("[NotesView] Erreur lors du chargement des donnes:",Te),t.error("Erreur lors du chargement des donnes")})});async function fe(){console.log(`
[NotesView][loadInitialData] Dbut du chargement des donnes`);try{s.value=!0,console.log("[NotesView][loadInitialData] Chargement des colonnes..."),await r.loadColumns(),console.log("[NotesView][loadInitialData] Colonnes charges:",r.columns),console.log("[NotesView][loadInitialData] Chargement des notes...");const Te=await du.getNotes();console.log("[NotesView][loadInitialData] Notes reues:",Te.data),Te.data.length>0?(console.log("[NotesView][loadInitialData] Dtails des notes:"),Te.data.forEach((ue,le)=>{console.log(`Note ${le+1}:`,{id:ue.id,title:ue.title,columnId:ue.column||ue.column_id,access_level:ue.access_level,column:ue.column})})):console.warn("[NotesView][loadInitialData] Aucune note reue du backend!");const Y=r.columns.map(ue=>ue.id),q=Te.data.filter(ue=>{const le=(ue.column||ue.column_id||"").toString();return le===""||!Y.includes(le)});if(q.length>0){console.warn(`[NotesView][loadInitialData] ${q.length} notes avec des colonnes invalides:`,q),console.log("[NotesView][loadInitialData] Assignation des notes  la colonne  faire (2)");for(const ue of q)try{await du.updateNote(ue.id,{column:"2"})}catch(le){console.error(`[NotesView][loadInitialData] Erreur lors de l'assignation de la note ${ue.id}  la colonne  faire:`,le)}}const ee=Te.data.map(ue=>({id:ue.id,title:ue.title,description:ue.description,location:ue.location,columnId:(ue.column||ue.column_id||"2").toString(),access_level:ue.access_level,style:ue.style||{},comments:ue.comments||[],photos:ue.photos||[],order:ue.order||0,createdAt:ue.created_at,updatedAt:ue.updated_at}));r.notes.length=0,ee.forEach(ue=>{r.addNote(ue)}),console.log("[NotesView][loadInitialData] Notes charges dans le store");for(const ue of r.columns){const le=r.getNotesByColumn(ue.id);console.log(`[NotesView][loadInitialData] Colonne ${ue.title} (${ue.id}): ${le.length} notes`),le.length>0&&le.forEach(pe=>{console.log(`  - Note ID=${pe.id}, Titre="${pe.title}", Niveau d'accs=${pe.accessLevel}, Colonne=${pe.columnId}`)})}}catch(Te){console.error("[NotesView][loadInitialData] Erreur:",Te),t.error("Erreur lors du chargement des donnes")}finally{s.value=!1,console.log("[NotesView][loadInitialData] Chargement termin")}}function me(){n.push({path:"/",query:{tool:"Note"}})}function G(Te){if(!Te.location){t.warning("Cette note n'est pas golocalise");return}n.push({path:"/",query:{lat:Array.isArray(Te.location)?Te.location[0].toString():Te.location.coordinates[1].toString(),lng:Array.isArray(Te.location)?Te.location[1].toString():Te.location.coordinates[0].toString(),noteId:Te.id.toString()}})}function $(Te){if(!Te.location){t.warning("Cette note n'est pas golocalise");return}let Y,q;Array.isArray(Te.location)?(Y=Te.location[0],q=Te.location[1]):(Y=Te.location.coordinates[1],q=Te.location.coordinates[0]);const ee=`https://www.google.com/maps/dir/?api=1&destination=${Y},${q}`;window.open(ee,"_blank")}function X(Te){d.value=JSON.parse(JSON.stringify(Te)),g.value="info",u.value=!0}async function R(){if(u.value=!1,y.value&&d.value)try{const Te={location:d.value.location,name:d.value.title,description:d.value.description,columnId:d.value.columnId,accessLevel:d.value.accessLevel,style:d.value.style,comments:d.value.comments||[],photos:d.value.photos||[],order:d.value.order,createdAt:d.value.createdAt,updatedAt:new Date().toISOString()},Y=i.elements.findIndex(q=>{var ee;return q.type_forme==="Note"&&q.id===((ee=d.value)==null?void 0:ee.id)});Y!==-1?i.elements[Y].data=Te:i.elements.push({id:d.value.id,type_forme:"Note",data:Te}),await i.saveToPlan(y.value),t.success("Note sauvegarde et plan mis  jour avec succs")}catch(Te){console.error("Erreur lors de la sauvegarde de la note:",Te),t.error("Erreur lors de la sauvegarde de la note")}}function O(Te){f.value=Te,o.value=!0}async function B(){if(f.value)try{try{await du.deleteNote(f.value.id)}catch(Te){if(Te.response&&Te.response.status===404)console.log("[NotesView][deleteNote] Note non trouve dans le backend (404), suppression locale uniquement");else throw Te}r.removeNote(f.value.id),t.success("Note supprime avec succs")}catch(Te){console.error("Erreur lors de la suppression de la note:",Te),t.error("Erreur lors de la suppression de la note")}finally{o.value=!1,f.value=null}}async function z(Te,Y){console.log("[NotesView][onDragChange] vnement:",Te),console.log("[NotesView][onDragChange] Colonne cible:",Y);try{if(Te.added){const{element:q}=Te.added;console.log("[NotesView][onDragChange] Note  dplacer:",q);const ee=typeof q=="object"&&q.id?q.id:null;if(!ee)throw console.error("[NotesView][onDragChange] ID de note invalide:",q),new Error("ID de note invalide");r.moveNote(ee,Y);const le=K.value(Y).map(Z=>Z.id);r.reorderNotes(Y,le);const pe=r.getColumnById(Y);t.success(`Note dplace vers ${(pe==null?void 0:pe.title)||"une autre colonne"}`),await W(ee,{columnId:Y})}if(Te.moved){const q=K.value(Y),ee=q.map(ue=>ue.id);r.reorderNotes(Y,ee),t.success("Ordre des notes mis  jour");for(const[ue,le]of q.entries())await W(le.id,{order:ue})}}catch(q){console.error("[NotesView][onDragChange] Erreur:",q),t.error("Une erreur est survenue lors du dplacement de la note")}}async function W(Te,Y){console.log("[NotesView][updateNoteInBackend] Mise  jour de la note:",Te,Y);try{const q=r.notes.find(le=>le.id===Te);if(!q){console.error("[NotesView][updateNoteInBackend] Note non trouve:",Te);return}const ee={...Y};if(Y.columnId){const le=r.getColumnById(Y.columnId);le?(console.log(`[NotesView][updateNoteInBackend] Mise  jour de la colonne: ${le.id} (${le.title})`),ee.column=le.id,delete ee.columnId,delete ee.column_id):console.warn(`[NotesView][updateNoteInBackend] Colonne non trouve: ${Y.columnId}`)}const ue={...q,...ee,updatedAt:new Date().toISOString()};console.log("[NotesView][updateNoteInBackend] Donnes envoyes au backend:",ue),await du.updateNote(Te,ue),console.log("[NotesView][updateNoteInBackend] Note mise  jour avec succs")}catch(q){throw console.error("[NotesView][updateNoteInBackend] Erreur:",q),q}}function V(){d.value={id:"",title:"Nouvelle note",description:"",location:null,columnId:r.getDefaultColumn.id,accessLevel:Zi.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:[],photos:[]},u.value=!0,g.value="info"}const oe=jt(null),ie=jt(!1);function xe(){ie.value=!ie.value}function Ee(Te){oe.value&&!oe.value.contains(Te.target)&&(ie.value=!1)}return Is(()=>{document.addEventListener("click",Ee)}),ch(()=>{document.removeEventListener("click",Ee)}),(Te,Y)=>{var q,ee;return $e(),He("div",cV,[E("div",fV,[E("div",hV,[Y[6]||(Y[6]=E("div",{class:"sm:flex-auto"},[E("h1",{class:"text-2xl font-semibold text-gray-900"},"Notes"),E("p",{class:"mt-2 text-sm text-gray-700"}," Liste de toutes vos notes. ")],-1)),E("div",dV,[E("div",{class:"relative",ref_key:"dropdownRef",ref:oe},[E("button",{onClick:xe,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"},Y[5]||(Y[5]=[Ei(" Crer "),E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])),ie.value?($e(),He("div",pV,[E("div",{class:"py-1"},[E("button",{onClick:V,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note simple "),E("button",{onClick:me,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note golocalise ")])])):cn("",!0)],512)])]),E("div",gV,[E("div",mV,[E("div",null,[Y[7]||(Y[7]=E("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),Fn(E("input",{type:"text",id:"search","onUpdate:modelValue":Y[0]||(Y[0]=ue=>M.search=ue),placeholder:"Rechercher par titre ou description...",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[ri,M.search]])]),E("div",null,[Y[9]||(Y[9]=E("label",{for:"date",class:"block text-sm font-medium text-gray-700"},"Date",-1)),Fn(E("select",{id:"date","onUpdate:modelValue":Y[1]||(Y[1]=ue=>M.date=ue),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},Y[8]||(Y[8]=[E("option",{value:""},"Toutes les dates",-1),E("option",{value:"today"},"Aujourd'hui",-1),E("option",{value:"week"},"Cette semaine",-1),E("option",{value:"month"},"Ce mois",-1)]),512),[[uo,M.date]])]),E("div",null,[Y[11]||(Y[11]=E("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accs",-1)),Fn(E("select",{id:"accessLevel","onUpdate:modelValue":Y[2]||(Y[2]=ue=>M.accessLevel=ue),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[Y[10]||(Y[10]=E("option",{value:""},"Tous les niveaux",-1)),($e(),He(Tn,null,xr(_,ue=>E("option",{key:ue.id,value:ue.id},Wt(ue.title),9,vV)),64))],512),[[uo,M.accessLevel]])])])]),s.value?($e(),He("div",yV,Y[12]||(Y[12]=[E("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1),E("p",{class:"mt-2 text-sm text-gray-500"},"Chargement des notes...",-1)]))):($e(),He("div",_V,[F.value.length===0&&x.value.length===0?($e(),He("div",bV,Y[13]||(Y[13]=[E("p",{class:"text-sm text-gray-500"},"Aucune note ni colonne trouve",-1)]))):cn("",!0),E("div",wV,[($e(!0),He(Tn,null,xr(x.value,ue=>($e(),He("div",{key:ue.id,class:"column-wrapper w-80 flex-shrink-0"},[E("div",xV,[E("div",{class:"p-3 flex items-center justify-between no-select",style:Hl({backgroundColor:ue.color+"20",borderBottom:"2px solid "+ue.color})},[E("div",LV,[E("h3",{class:"text-sm font-semibold",style:Hl({color:ue.color})},Wt(ue.title),5)]),E("div",SV,[E("span",CV,Wt(K.value(ue.id).length),1)])],4),E("div",EV,[E("div",PV,[pi(Wn(uV),{list:K.value(ue.id),class:"space-y-2",group:"notes","item-key":"id",handle:".note-drag-handle",onChange:le=>z(le,ue.id),animation:150,"ghost-class":"ghost-card","chosen-class":"chosen","drag-class":"dragging"},{item:pu(({element:le})=>[E("div",MV,[E("div",AV,[E("div",kV,[E("div",TV,[Y[14]||(Y[14]=E("svg",{class:"h-4 w-4 mr-2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),E("h4",NV,Wt(le.title),1)]),E("div",null,[E("span",{class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:Hl({backgroundColor:he(le.accessLevel)+"20",color:he(le.accessLevel)})},Wt(Q(le.accessLevel)||"Non dfini"),5)])]),E("div",DV,[E("p",IV,Wt(le.description||"Aucune description"),1)]),E("div",OV,[E("span",BV,Wt(le.updatedAt?T(le.updatedAt):le.createdAt?T(le.createdAt):"Date non dfinie"),1),E("div",RV,[le.location?($e(),He("span",FV,Y[15]||(Y[15]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]))):($e(),He("span",jV,Y[16]||(Y[16]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)]))),le.location?($e(),He(Tn,{key:2},[E("button",{onClick:pe=>$(le),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Ouvrir dans Google Maps"},Y[17]||(Y[17]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]),8,zV),E("button",{onClick:pe=>G(le),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Voir sur la carte"},Y[18]||(Y[18]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1)]),8,$V)],64)):cn("",!0),E("button",{onClick:pe=>X(le),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"diter la note"},Y[19]||(Y[19]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,UV),E("button",{onClick:pe=>O(le),class:"p-1 text-gray-400 hover:text-red-500 focus:outline-none",title:"Supprimer la note"},Y[20]||(Y[20]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,VV)])])])])]),"empty-content":pu(()=>Y[21]||(Y[21]=[E("div",{class:"p-4 text-center text-gray-400 text-sm italic"}," Aucune note dans cette colonne ",-1)])),_:2},1032,["list","onChange"])])])])]))),128))])]))]),o.value?($e(),He("div",GV,[E("div",HV,[Y[23]||(Y[23]=E("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),E("div",qV,[Y[22]||(Y[22]=zu('<div class="p-4 md:p-6" data-v-bc1f0873><div class="flex items-start" data-v-bc1f0873><div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100" data-v-bc1f0873><svg class="h-6 w-6 text-red-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-v-bc1f0873><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-bc1f0873></path></svg></div><div class="ml-4 flex-1" data-v-bc1f0873><h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title" data-v-bc1f0873> Supprimer la note </h3><div class="mt-2" data-v-bc1f0873><p class="text-sm text-gray-500" data-v-bc1f0873> tes-vous sr de vouloir supprimer cette note ? Cette action est irrversible. </p></div></div></div></div>',1)),E("div",WV,[E("button",{onClick:B,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm"}," Supprimer "),E("button",{onClick:Y[3]||(Y[3]=ue=>o.value=!1),type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm"}," Annuler ")])])])])):cn("",!0),u.value?($e(),rl(hx,{key:1,note:d.value,"is-new-note":!((q=d.value)!=null&&q.id),location:(ee=d.value)==null?void 0:ee.location,onClose:Y[4]||(Y[4]=ue=>u.value=!1),onSave:R},null,8,["note","is-new-note","location"])):cn("",!0)])}}}),KV=Rp(ZV,[["__scopeId","data-v-bc1f0873"]]),Kx=f8({history:UT("/"),routes:[{path:"/",name:"home",component:Ub,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/plans",name:"plans",component:LU,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/users",name:"users",component:Zz,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie"]}},{path:"/profile",name:"profile",component:()=>zc(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/login",name:"login",component:RD,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>zc(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>zc(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:oD,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/notes",name:"notes",component:KV,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/map",name:"map",component:Ub,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>zc(()=>import("./NotFoundView.js"),[])}]});Kx.beforeEach(async(e,n,t)=>{var u,f;const r=ma();if(console.log("Route:",e.path,"Auth state:",{initialized:r.initialized,isAuthenticated:r.isAuthenticated,user:r.user}),!r.initialized)try{await r.initialize(window.INITIAL_STATE)}catch(d){console.error("Error initializing auth store:",d)}const i=r.isAuthenticated,s=(u=r.user)==null?void 0:u.must_change_password,o=(f=r.user)==null?void 0:f.user_type;if(e.meta.requiresAuth&&!i){t("/login");return}if(i&&s&&e.name!=="changePassword"){t({name:"changePassword"});return}if(e.name==="changePassword"&&!s){t({name:"home"});return}if(e.meta.allowedRoles&&o&&!e.meta.allowedRoles.includes(o)){t({name:"home"});return}if(e.meta.requiresGuest&&i){t({name:"home"});return}t()});const xy=u0(R7),Yx=v6();xy.use(Yx);xy.use(Kx);const YV=ma(Yx);window.INITIAL_STATE&&YV.initialize(window.INITIAL_STATE);xy.mount("#app");export{Xi as _,Kl as a,E as b,He as c,cs as d,cn as e,Wn as f,Ei as g,Fn as h,$e as i,zu as j,pi as k,pu as l,Kw as m,Fi as n,Is as o,mG as p,Bp as q,jt as r,ea as s,Wt as t,ma as u,ri as v,Cf as w,fy as x};

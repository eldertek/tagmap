var o8=Object.defineProperty;var a8=(t,e,n)=>e in t?o8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ke=(t,e,n)=>a8(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ty(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const gi={},ip=[],Bu=()=>{},l8=()=>!1,y0=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Vb=t=>t.startsWith("onUpdate:"),Yi=Object.assign,Hb=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},u8=Object.prototype.hasOwnProperty,Mi=(t,e)=>u8.call(t,e),Zn=Array.isArray,sp=t=>Pp(t)==="[object Map]",pd=t=>Pp(t)==="[object Set]",gx=t=>Pp(t)==="[object Date]",c8=t=>Pp(t)==="[object RegExp]",_r=t=>typeof t=="function",is=t=>typeof t=="string",gc=t=>typeof t=="symbol",ji=t=>t!==null&&typeof t=="object",Gb=t=>(ji(t)||_r(t))&&_r(t.then)&&_r(t.catch),dL=Object.prototype.toString,Pp=t=>dL.call(t),h8=t=>Pp(t).slice(8,-1),ny=t=>Pp(t)==="[object Object]",Wb=t=>is(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,op=ty(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ry=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},f8=/-(\w)/g,pa=ry(t=>t.replace(f8,(e,n)=>n?n.toUpperCase():"")),d8=/\B([A-Z])/g,zl=ry(t=>t.replace(d8,"-$1").toLowerCase()),b0=ry(t=>t.charAt(0).toUpperCase()+t.slice(1)),Lg=ry(t=>t?`on${b0(t)}`:""),ul=(t,e)=>!Object.is(t,e),ap=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},pL=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},gv=t=>{const e=parseFloat(t);return isNaN(e)?t:e},mv=t=>{const e=is(t)?Number(t):NaN;return isNaN(e)?t:e};let mx;const iy=()=>mx||(mx=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),p8="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",g8=ty(p8);function Vl(t){if(Zn(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=is(r)?b8(r):Vl(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(is(t)||ji(t))return t}const m8=/;(?![^(]*\))/g,v8=/:([^]+)/,y8=/\/\*[^]*?\*\//g;function b8(t){const e={};return t.replace(y8,"").split(m8).forEach(n=>{if(n){const r=n.split(v8);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function bi(t){let e="";if(is(t))e=t;else if(Zn(t))for(let n=0;n<t.length;n++){const r=bi(t[n]);r&&(e+=r+" ")}else if(ji(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function _8(t){if(!t)return null;let{class:e,style:n}=t;return e&&!is(e)&&(t.class=bi(e)),n&&(t.style=Vl(n)),t}const w8="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",x8=ty(w8);function gL(t){return!!t||t===""}function L8(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=gf(t[r],e[r]);return n}function gf(t,e){if(t===e)return!0;let n=gx(t),r=gx(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=gc(t),r=gc(e),n||r)return t===e;if(n=Zn(t),r=Zn(e),n||r)return n&&r?L8(t,e):!1;if(n=ji(t),r=ji(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!gf(t[o],e[o]))return!1}}return String(t)===String(e)}function sy(t,e){return t.findIndex(n=>gf(n,e))}const mL=t=>!!(t&&t.__v_isRef===!0),At=t=>is(t)?t:t==null?"":Zn(t)||ji(t)&&(t.toString===dL||!_r(t.toString))?mL(t)?At(t.value):JSON.stringify(t,vL,2):String(t),vL=(t,e)=>mL(e)?vL(t,e.value):sp(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[g1(r,s)+" =>"]=i,n),{})}:pd(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>g1(n))}:gc(e)?g1(e):ji(e)&&!Zn(e)&&!ny(e)?String(e):e,g1=(t,e="")=>{var n;return gc(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ll;class qb{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ll,!e&&ll&&(this.index=(ll.scopes||(ll.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=ll;try{return ll=this,e()}finally{ll=n}}}on(){ll=this}off(){ll=this.parent}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Yb(t){return new qb(t)}function Kb(){return ll}function yL(t,e=!1){ll&&ll.cleanups.push(t)}let ts;const m1=new WeakSet;class qg{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ll&&ll.active&&ll.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,m1.has(this)&&(m1.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||_L(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,vx(this),wL(this);const e=ts,n=dc;ts=this,dc=!0;try{return this.fn()}finally{xL(this),ts=e,dc=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Jb(e);this.deps=this.depsTail=void 0,vx(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?m1.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){w2(this)&&this.run()}get dirty(){return w2(this)}}let bL=0,Cg,Sg;function _L(t,e=!1){if(t.flags|=8,e){t.next=Sg,Sg=t;return}t.next=Cg,Cg=t}function Zb(){bL++}function Xb(){if(--bL>0)return;if(Sg){let e=Sg;for(Sg=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Cg;){let e=Cg;for(Cg=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function wL(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function xL(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),Jb(r),C8(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function w2(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(LL(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function LL(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Yg))return;t.globalVersion=Yg;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!w2(t)){t.flags&=-3;return}const n=ts,r=dc;ts=t,dc=!0;try{wL(t);const i=t.fn(t._value);(e.version===0||ul(i,t._value))&&(t._value=i,e.version++)}catch(i){throw e.version++,i}finally{ts=n,dc=r,xL(t),t.flags&=-3}}function Jb(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)Jb(s,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function C8(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}function S8(t,e){t.effect instanceof qg&&(t=t.effect.fn);const n=new qg(t);e&&Yi(n,e);try{n.run()}catch(i){throw n.stop(),i}const r=n.run.bind(n);return r.effect=n,r}function E8(t){t.effect.stop()}let dc=!0;const CL=[];function xf(){CL.push(dc),dc=!1}function Lf(){const t=CL.pop();dc=t===void 0?!0:t}function vx(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=ts;ts=void 0;try{e()}finally{ts=n}}}let Yg=0;class P8{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class oy{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!ts||!dc||ts===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==ts)n=this.activeLink=new P8(ts,this),ts.deps?(n.prevDep=ts.depsTail,ts.depsTail.nextDep=n,ts.depsTail=n):ts.deps=ts.depsTail=n,SL(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=ts.depsTail,n.nextDep=void 0,ts.depsTail.nextDep=n,ts.depsTail=n,ts.deps===n&&(ts.deps=r)}return n}trigger(e){this.version++,Yg++,this.notify(e)}notify(e){Zb();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Xb()}}}function SL(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)SL(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const vv=new WeakMap,ed=Symbol(""),x2=Symbol(""),Kg=Symbol("");function Ba(t,e,n){if(dc&&ts){let r=vv.get(t);r||vv.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new oy),i.map=r,i.key=n),i.track()}}function xh(t,e,n,r,i,s){const o=vv.get(t);if(!o){Yg++;return}const a=l=>{l&&l.trigger()};if(Zb(),e==="clear")o.forEach(a);else{const l=Zn(t),c=l&&Wb(n);if(l&&n==="length"){const f=Number(r);o.forEach((p,v)=>{(v==="length"||v===Kg||!gc(v)&&v>=f)&&a(p)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(Kg)),e){case"add":l?c&&a(o.get("length")):(a(o.get(ed)),sp(t)&&a(o.get(x2)));break;case"delete":l||(a(o.get(ed)),sp(t)&&a(o.get(x2)));break;case"set":sp(t)&&a(o.get(ed));break}}Xb()}function k8(t,e){const n=vv.get(t);return n&&n.get(e)}function Bd(t){const e=pi(t);return e===t?e:(Ba(e,"iterate",Kg),du(t)?e:e.map(Ra))}function ay(t){return Ba(t=pi(t),"iterate",Kg),t}const M8={__proto__:null,[Symbol.iterator](){return v1(this,Symbol.iterator,Ra)},concat(...t){return Bd(this).concat(...t.map(e=>Zn(e)?Bd(e):e))},entries(){return v1(this,"entries",t=>(t[1]=Ra(t[1]),t))},every(t,e){return dh(this,"every",t,e,void 0,arguments)},filter(t,e){return dh(this,"filter",t,e,n=>n.map(Ra),arguments)},find(t,e){return dh(this,"find",t,e,Ra,arguments)},findIndex(t,e){return dh(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return dh(this,"findLast",t,e,Ra,arguments)},findLastIndex(t,e){return dh(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return dh(this,"forEach",t,e,void 0,arguments)},includes(...t){return y1(this,"includes",t)},indexOf(...t){return y1(this,"indexOf",t)},join(t){return Bd(this).join(t)},lastIndexOf(...t){return y1(this,"lastIndexOf",t)},map(t,e){return dh(this,"map",t,e,void 0,arguments)},pop(){return zp(this,"pop")},push(...t){return zp(this,"push",t)},reduce(t,...e){return yx(this,"reduce",t,e)},reduceRight(t,...e){return yx(this,"reduceRight",t,e)},shift(){return zp(this,"shift")},some(t,e){return dh(this,"some",t,e,void 0,arguments)},splice(...t){return zp(this,"splice",t)},toReversed(){return Bd(this).toReversed()},toSorted(t){return Bd(this).toSorted(t)},toSpliced(...t){return Bd(this).toSpliced(...t)},unshift(...t){return zp(this,"unshift",t)},values(){return v1(this,"values",Ra)}};function v1(t,e,n){const r=ay(t),i=r[e]();return r!==t&&!du(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=n(s.value)),s}),i}const A8=Array.prototype;function dh(t,e,n,r,i,s){const o=ay(t),a=o!==t&&!du(t),l=o[e];if(l!==A8[e]){const p=l.apply(t,s);return a?Ra(p):p}let c=n;o!==t&&(a?c=function(p,v){return n.call(this,Ra(p),v,t)}:n.length>2&&(c=function(p,v){return n.call(this,p,v,t)}));const f=l.call(o,c,r);return a&&i?i(f):f}function yx(t,e,n,r){const i=ay(t);let s=n;return i!==t&&(du(t)?n.length>3&&(s=function(o,a,l){return n.call(this,o,a,l,t)}):s=function(o,a,l){return n.call(this,o,Ra(a),l,t)}),i[e](s,...r)}function y1(t,e,n){const r=pi(t);Ba(r,"iterate",Kg);const i=r[e](...n);return(i===-1||i===!1)&&cy(n[0])?(n[0]=pi(n[0]),r[e](...n)):i}function zp(t,e,n=[]){xf(),Zb();const r=pi(t)[e].apply(t,n);return Xb(),Lf(),r}const T8=ty("__proto__,__v_isRef,__isVue"),EL=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(gc));function O8(t){gc(t)||(t=String(t));const e=pi(this);return Ba(e,"has",t),e.hasOwnProperty(t)}class PL{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?DL:OL:s?TL:AL).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=Zn(e);if(!i){let l;if(o&&(l=M8[n]))return l;if(n==="hasOwnProperty")return O8}const a=Reflect.get(e,n,js(e)?e:r);return(gc(n)?EL.has(n):T8(n))||(i||Ba(e,"get",n),s)?a:js(a)?o&&Wb(n)?a:a.value:ji(a)?i?e_(a):mu(a):a}}class kL extends PL{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._isShallow){const l=mf(s);if(!du(r)&&!mf(r)&&(s=pi(s),r=pi(r)),!Zn(e)&&js(s)&&!js(r))return l?!1:(s.value=r,!0)}const o=Zn(e)&&Wb(n)?Number(n)<e.length:Mi(e,n),a=Reflect.set(e,n,r,js(e)?e:i);return e===pi(i)&&(o?ul(r,s)&&xh(e,"set",n,r):xh(e,"add",n,r)),a}deleteProperty(e,n){const r=Mi(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&xh(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!gc(n)||!EL.has(n))&&Ba(e,"has",n),r}ownKeys(e){return Ba(e,"iterate",Zn(e)?"length":ed),Reflect.ownKeys(e)}}class ML extends PL{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const D8=new kL,I8=new ML,N8=new kL(!0),B8=new ML(!0),L2=t=>t,em=t=>Reflect.getPrototypeOf(t);function R8(t,e,n){return function(...r){const i=this.__v_raw,s=pi(i),o=sp(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...r),f=n?L2:e?C2:Ra;return!e&&Ba(s,"iterate",l?x2:ed),{next(){const{value:p,done:v}=c.next();return v?{value:p,done:v}:{value:a?[f(p[0]),f(p[1])]:f(p),done:v}},[Symbol.iterator](){return this}}}}function tm(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function F8(t,e){const n={get(i){const s=this.__v_raw,o=pi(s),a=pi(i);t||(ul(i,a)&&Ba(o,"get",i),Ba(o,"get",a));const{has:l}=em(o),c=e?L2:t?C2:Ra;if(l.call(o,i))return c(s.get(i));if(l.call(o,a))return c(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!t&&Ba(pi(i),"iterate",ed),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=pi(s),a=pi(i);return t||(ul(i,a)&&Ba(o,"has",i),Ba(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,l=pi(a),c=e?L2:t?C2:Ra;return!t&&Ba(l,"iterate",ed),a.forEach((f,p)=>i.call(s,c(f),c(p),o))}};return Yi(n,t?{add:tm("add"),set:tm("set"),delete:tm("delete"),clear:tm("clear")}:{add(i){!e&&!du(i)&&!mf(i)&&(i=pi(i));const s=pi(this);return em(s).has.call(s,i)||(s.add(i),xh(s,"add",i,i)),this},set(i,s){!e&&!du(s)&&!mf(s)&&(s=pi(s));const o=pi(this),{has:a,get:l}=em(o);let c=a.call(o,i);c||(i=pi(i),c=a.call(o,i));const f=l.call(o,i);return o.set(i,s),c?ul(s,f)&&xh(o,"set",i,s):xh(o,"add",i,s),this},delete(i){const s=pi(this),{has:o,get:a}=em(s);let l=o.call(s,i);l||(i=pi(i),l=o.call(s,i)),a&&a.call(s,i);const c=s.delete(i);return l&&xh(s,"delete",i,void 0),c},clear(){const i=pi(this),s=i.size!==0,o=i.clear();return s&&xh(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=R8(i,t,e)}),n}function ly(t,e){const n=F8(t,e);return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(Mi(n,i)&&i in r?n:r,i,s)}const j8={get:ly(!1,!1)},z8={get:ly(!1,!0)},U8={get:ly(!0,!1)},$8={get:ly(!0,!0)},AL=new WeakMap,TL=new WeakMap,OL=new WeakMap,DL=new WeakMap;function V8(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function H8(t){return t.__v_skip||!Object.isExtensible(t)?0:V8(h8(t))}function mu(t){return mf(t)?t:uy(t,!1,D8,j8,AL)}function Qb(t){return uy(t,!1,N8,z8,TL)}function e_(t){return uy(t,!0,I8,U8,OL)}function G8(t){return uy(t,!0,B8,$8,DL)}function uy(t,e,n,r,i){if(!ji(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=H8(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function Wc(t){return mf(t)?Wc(t.__v_raw):!!(t&&t.__v_isReactive)}function mf(t){return!!(t&&t.__v_isReadonly)}function du(t){return!!(t&&t.__v_isShallow)}function cy(t){return t?!!t.__v_raw:!1}function pi(t){const e=t&&t.__v_raw;return e?pi(e):t}function hy(t){return!Mi(t,"__v_skip")&&Object.isExtensible(t)&&pL(t,"__v_skip",!0),t}const Ra=t=>ji(t)?mu(t):t,C2=t=>ji(t)?e_(t):t;function js(t){return t?t.__v_isRef===!0:!1}function bt(t){return IL(t,!1)}function t_(t){return IL(t,!0)}function IL(t,e){return js(t)?t:new W8(t,e)}class W8{constructor(e,n){this.dep=new oy,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:pi(e),this._value=n?e:Ra(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||du(e)||mf(e);e=r?e:pi(e),ul(e,n)&&(this._rawValue=e,this._value=r?e:Ra(e),this.dep.trigger())}}function q8(t){t.dep&&t.dep.trigger()}function dn(t){return js(t)?t.value:t}function Y8(t){return _r(t)?t():dn(t)}const K8={get:(t,e,n)=>e==="__v_raw"?t:dn(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return js(i)&&!js(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function n_(t){return Wc(t)?t:new Proxy(t,K8)}class Z8{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new oy,{get:r,set:i}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(e){this._set(e)}}function NL(t){return new Z8(t)}function r_(t){const e=Zn(t)?new Array(t.length):{};for(const n in t)e[n]=BL(t,n);return e}class X8{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return k8(pi(this._object),this._key)}}class J8{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Q8(t,e,n){return js(t)?t:_r(t)?new J8(t):ji(t)&&arguments.length>1?BL(t,e,n):bt(t)}function BL(t,e,n){const r=t[e];return js(r)?r:new X8(t,e,n)}class eO{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new oy(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Yg-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&ts!==this)return _L(this,!0),!0}get value(){const e=this.dep.track();return LL(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function tO(t,e,n=!1){let r,i;return _r(t)?r=t:(r=t.get,i=t.set),new eO(r,i,n)}const nO={GET:"get",HAS:"has",ITERATE:"iterate"},rO={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},nm={},yv=new WeakMap;let Jh;function iO(){return Jh}function RL(t,e=!1,n=Jh){if(n){let r=yv.get(n);r||yv.set(n,r=[]),r.push(t)}}function sO(t,e,n=gi){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=n,c=W=>i?W:du(W)||i===!1||i===0?Lh(W,1):Lh(W);let f,p,v,m,C=!1,S=!1;if(js(t)?(p=()=>t.value,C=du(t)):Wc(t)?(p=()=>c(t),C=!0):Zn(t)?(S=!0,C=t.some(W=>Wc(W)||du(W)),p=()=>t.map(W=>{if(js(W))return W.value;if(Wc(W))return c(W);if(_r(W))return l?l(W,2):W()})):_r(t)?e?p=l?()=>l(t,2):t:p=()=>{if(v){xf();try{v()}finally{Lf()}}const W=Jh;Jh=f;try{return l?l(t,3,[m]):t(m)}finally{Jh=W}}:p=Bu,e&&i){const W=p,X=i===!0?1/0:i;p=()=>Lh(W(),X)}const I=Kb(),N=()=>{f.stop(),I&&I.active&&Hb(I.effects,f)};if(s&&e){const W=e;e=(...X)=>{W(...X),N()}}let T=S?new Array(t.length).fill(nm):nm;const j=W=>{if(!(!(f.flags&1)||!f.dirty&&!W))if(e){const X=f.run();if(i||C||(S?X.some((ce,he)=>ul(ce,T[he])):ul(X,T))){v&&v();const ce=Jh;Jh=f;try{const he=[X,T===nm?void 0:S&&T[0]===nm?[]:T,m];l?l(e,3,he):e(...he),T=X}finally{Jh=ce}}}else f.run()};return a&&a(j),f=new qg(p),f.scheduler=o?()=>o(j,!1):j,m=W=>RL(W,!1,f),v=f.onStop=()=>{const W=yv.get(f);if(W){if(l)l(W,4);else for(const X of W)X();yv.delete(f)}},e?r?j(!0):T=f.run():o?o(j.bind(null,!0),!0):f.run(),N.pause=f.pause.bind(f),N.resume=f.resume.bind(f),N.stop=N,N}function Lh(t,e=1/0,n){if(e<=0||!ji(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,js(t))Lh(t.value,e,n);else if(Zn(t))for(let r=0;r<t.length;r++)Lh(t[r],e,n);else if(pd(t)||sp(t))t.forEach(r=>{Lh(r,e,n)});else if(ny(t)){for(const r in t)Lh(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Lh(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const FL=[];function oO(t){FL.push(t)}function aO(){FL.pop()}function lO(t,e){}const uO={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},cO={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function kp(t,e,n,r){try{return r?t(...r):t()}catch(i){gd(i,e,n)}}function ju(t,e,n,r){if(_r(t)){const i=kp(t,e,n,r);return i&&Gb(i)&&i.catch(s=>{gd(s,e,n)}),i}if(Zn(t)){const i=[];for(let s=0;s<t.length;s++)i.push(ju(t[s],e,n,r));return i}}function gd(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||gi;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const f=a.ec;if(f){for(let p=0;p<f.length;p++)if(f[p](t,l,c)===!1)return}a=a.parent}if(s){xf(),kp(s,null,10,[t,l,c]),Lf();return}}hO(t,n,i,r,o)}function hO(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const cl=[];let Bc=-1;const lp=[];let Qh=null,Yd=0;const jL=Promise.resolve();let bv=null;function fl(t){const e=bv||jL;return t?e.then(this?t.bind(this):t):e}function fO(t){let e=Bc+1,n=cl.length;for(;e<n;){const r=e+n>>>1,i=cl[r],s=Xg(i);s<t||s===t&&i.flags&2?e=r+1:n=r}return e}function i_(t){if(!(t.flags&1)){const e=Xg(t),n=cl[cl.length-1];!n||!(t.flags&2)&&e>=Xg(n)?cl.push(t):cl.splice(fO(e),0,t),t.flags|=1,zL()}}function zL(){bv||(bv=jL.then(UL))}function Zg(t){Zn(t)?lp.push(...t):Qh&&t.id===-1?Qh.splice(Yd+1,0,t):t.flags&1||(lp.push(t),t.flags|=1),zL()}function bx(t,e,n=Bc+1){for(;n<cl.length;n++){const r=cl[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;cl.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function _v(t){if(lp.length){const e=[...new Set(lp)].sort((n,r)=>Xg(n)-Xg(r));if(lp.length=0,Qh){Qh.push(...e);return}for(Qh=e,Yd=0;Yd<Qh.length;Yd++){const n=Qh[Yd];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Qh=null,Yd=0}}const Xg=t=>t.id==null?t.flags&2?-1:1/0:t.id;function UL(t){try{for(Bc=0;Bc<cl.length;Bc++){const e=cl[Bc];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),kp(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Bc<cl.length;Bc++){const e=cl[Bc];e&&(e.flags&=-2)}Bc=-1,cl.length=0,_v(),bv=null,(cl.length||lp.length)&&UL()}}let Kd,rm=[];function $L(t,e){var n,r;Kd=t,Kd?(Kd.enabled=!0,rm.forEach(({event:i,args:s})=>Kd.emit(i,...s)),rm=[]):typeof window<"u"&&window.HTMLElement&&!((r=(n=window.navigator)==null?void 0:n.userAgent)!=null&&r.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{$L(s,e)}),setTimeout(()=>{Kd||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,rm=[])},3e3)):rm=[]}let No=null,fy=null;function Jg(t){const e=No;return No=t,fy=t&&t.type.__scopeId||null,e}function dO(t){fy=t}function pO(){fy=null}const gO=t=>Ul;function Ul(t,e=No,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&O2(-1);const s=Jg(e);let o;try{o=t(...i)}finally{Jg(s),r._d&&O2(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Dn(t,e){if(No===null)return t;const n=x0(No),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=gi]=e[i];s&&(_r(s)&&(s={mounted:s,updated:s}),s.deep&&Lh(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Fc(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(xf(),ju(l,n,8,[t.el,a,t,e]),Lf())}}const VL=Symbol("_vte"),HL=t=>t.__isTeleport,Eg=t=>t&&(t.disabled||t.disabled===""),_x=t=>t&&(t.defer||t.defer===""),wx=t=>typeof SVGElement<"u"&&t instanceof SVGElement,xx=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,S2=(t,e)=>{const n=t&&t.to;return is(n)?e?e(n):null:n},GL={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,c){const{mc:f,pc:p,pbc:v,o:{insert:m,querySelector:C,createText:S,createComment:I}}=c,N=Eg(e.props);let{shapeFlag:T,children:j,dynamicChildren:W}=e;if(t==null){const X=e.el=S(""),ce=e.anchor=S("");m(X,n,r),m(ce,n,r);const he=(B,q)=>{T&16&&(i&&i.isCE&&(i.ce._teleportTarget=B),f(j,B,q,i,s,o,a,l))},O=()=>{const B=e.target=S2(e.props,C),q=WL(B,e,S,m);B&&(o!=="svg"&&wx(B)?o="svg":o!=="mathml"&&xx(B)&&(o="mathml"),N||(he(B,q),zm(e,!1)))};N&&(he(n,ce),zm(e,!0)),_x(e.props)?Do(()=>{O(),e.el.__isMounted=!0},s):O()}else{if(_x(e.props)&&!t.el.__isMounted){Do(()=>{GL.process(t,e,n,r,i,s,o,a,l,c),delete t.el.__isMounted},s);return}e.el=t.el,e.targetStart=t.targetStart;const X=e.anchor=t.anchor,ce=e.target=t.target,he=e.targetAnchor=t.targetAnchor,O=Eg(t.props),B=O?n:ce,q=O?X:he;if(o==="svg"||wx(ce)?o="svg":(o==="mathml"||xx(ce))&&(o="mathml"),W?(v(t.dynamicChildren,W,B,i,s,o,a),g_(t,e,!0)):l||p(t,e,B,q,i,s,o,a,!1),N)O?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):im(e,n,X,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const F=e.target=S2(e.props,C);F&&im(e,F,null,c,0)}else O&&im(e,ce,he,c,1);zm(e,N)}},remove(t,e,n,{um:r,o:{remove:i}},s){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:f,target:p,props:v}=t;if(p&&(i(c),i(f)),s&&i(l),o&16){const m=s||!Eg(v);for(let C=0;C<a.length;C++){const S=a[C];r(S,e,n,m,!!S.dynamicChildren)}}},move:im,hydrate:mO};function im(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:f}=t,p=s===2;if(p&&r(o,e,n),(!p||Eg(f))&&l&16)for(let v=0;v<c.length;v++)i(c[v],e,n,2);p&&r(a,e,n)}function mO(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:f}},p){const v=e.target=S2(e.props,l);if(v){const m=Eg(e.props),C=v._lpa||v.firstChild;if(e.shapeFlag&16)if(m)e.anchor=p(o(t),e,a(t),n,r,i,s),e.targetStart=C,e.targetAnchor=C&&o(C);else{e.anchor=o(t);let S=C;for(;S;){if(S&&S.nodeType===8){if(S.data==="teleport start anchor")e.targetStart=S;else if(S.data==="teleport anchor"){e.targetAnchor=S,v._lpa=e.targetAnchor&&o(e.targetAnchor);break}}S=o(S)}e.targetAnchor||WL(v,e,f,c),p(C&&o(C),e,v,n,r,i,s)}zm(e,m)}return e.anchor&&o(e.anchor)}const Zd=GL;function zm(t,e){const n=t.ctx;if(n&&n.ut){let r,i;for(e?(r=t.el,i=t.anchor):(r=t.targetStart,i=t.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function WL(t,e,n,r){const i=e.targetStart=n(""),s=e.targetAnchor=n("");return i[VL]=s,t&&(r(i,t),r(s,t)),s}const ef=Symbol("_leaveCb"),sm=Symbol("_enterCb");function s_(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return zs(()=>{t.isMounted=!0}),Cf(()=>{t.isUnmounting=!0}),t}const Au=[Function,Array],o_={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Au,onEnter:Au,onAfterEnter:Au,onEnterCancelled:Au,onBeforeLeave:Au,onLeave:Au,onAfterLeave:Au,onLeaveCancelled:Au,onBeforeAppear:Au,onAppear:Au,onAfterAppear:Au,onAppearCancelled:Au},qL=t=>{const e=t.subTree;return e.component?qL(e.component):e},vO={name:"BaseTransition",props:o_,setup(t,{slots:e}){const n=Uu(),r=s_();return()=>{const i=e.default&&dy(e.default(),!0);if(!i||!i.length)return;const s=YL(i),o=pi(t),{mode:a}=o;if(r.isLeaving)return b1(s);const l=Lx(s);if(!l)return b1(s);let c=gp(l,o,r,n,p=>c=p);l.type!==ko&&Ah(l,c);let f=n.subTree&&Lx(n.subTree);if(f&&f.type!==ko&&!cc(l,f)&&qL(n).type!==ko){let p=gp(f,o,r,n);if(Ah(f,p),a==="out-in"&&l.type!==ko)return r.isLeaving=!0,p.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete p.afterLeave,f=void 0},b1(s);a==="in-out"&&l.type!==ko?p.delayLeave=(v,m,C)=>{const S=ZL(r,f);S[String(f.key)]=f,v[ef]=()=>{m(),v[ef]=void 0,delete c.delayedLeave,f=void 0},c.delayedLeave=()=>{C(),delete c.delayedLeave,f=void 0}}:f=void 0}else f&&(f=void 0);return s}}};function YL(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==ko){e=n;break}}return e}const KL=vO;function ZL(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function gp(t,e,n,r,i){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:f,onEnterCancelled:p,onBeforeLeave:v,onLeave:m,onAfterLeave:C,onLeaveCancelled:S,onBeforeAppear:I,onAppear:N,onAfterAppear:T,onAppearCancelled:j}=e,W=String(t.key),X=ZL(n,t),ce=(B,q)=>{B&&ju(B,r,9,q)},he=(B,q)=>{const F=q[1];ce(B,q),Zn(B)?B.every(R=>R.length<=1)&&F():B.length<=1&&F()},O={mode:o,persisted:a,beforeEnter(B){let q=l;if(!n.isMounted)if(s)q=I||l;else return;B[ef]&&B[ef](!0);const F=X[W];F&&cc(t,F)&&F.el[ef]&&F.el[ef](),ce(q,[B])},enter(B){let q=c,F=f,R=p;if(!n.isMounted)if(s)q=N||c,F=T||f,R=j||p;else return;let K=!1;const Z=B[sm]=Y=>{K||(K=!0,Y?ce(R,[B]):ce(F,[B]),O.delayedLeave&&O.delayedLeave(),B[sm]=void 0)};q?he(q,[B,Z]):Z()},leave(B,q){const F=String(t.key);if(B[sm]&&B[sm](!0),n.isUnmounting)return q();ce(v,[B]);let R=!1;const K=B[ef]=Z=>{R||(R=!0,q(),Z?ce(S,[B]):ce(C,[B]),B[ef]=void 0,X[F]===t&&delete X[F])};X[F]=t,m?he(m,[B,K]):K()},clone(B){const q=gp(B,e,n,r,i);return i&&i(q),q}};return O}function b1(t){if(_0(t))return t=Zc(t),t.children=null,t}function Lx(t){if(!_0(t))return HL(t.type)&&t.children?YL(t.children):t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&_r(n.default))return n.default()}}function Ah(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Ah(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function dy(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===gn?(o.patchFlag&128&&i++,r=r.concat(dy(o.children,e,a))):(e||o.type!==ko)&&r.push(a!=null?Zc(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function hs(t,e){return _r(t)?Yi({name:t.name},e,{setup:t}):t}function yO(){const t=Uu();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function a_(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function bO(t){const e=Uu(),n=t_(null);if(e){const i=e.refs===gi?e.refs={}:e.refs;Object.defineProperty(i,t,{enumerable:!0,get:()=>n.value,set:s=>n.value=s})}return n}function Qg(t,e,n,r,i=!1){if(Zn(t)){t.forEach((C,S)=>Qg(C,e&&(Zn(e)?e[S]:e),n,r,i));return}if(ff(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Qg(t,e,n,r.component.subTree);return}const s=r.shapeFlag&4?x0(r.component):r.el,o=i?null:s,{i:a,r:l}=t,c=e&&e.r,f=a.refs===gi?a.refs={}:a.refs,p=a.setupState,v=pi(p),m=p===gi?()=>!1:C=>Mi(v,C);if(c!=null&&c!==l&&(is(c)?(f[c]=null,m(c)&&(p[c]=null)):js(c)&&(c.value=null)),_r(l))kp(l,a,12,[o,f]);else{const C=is(l),S=js(l);if(C||S){const I=()=>{if(t.f){const N=C?m(l)?p[l]:f[l]:l.value;i?Zn(N)&&Hb(N,s):Zn(N)?N.includes(s)||N.push(s):C?(f[l]=[s],m(l)&&(p[l]=f[l])):(l.value=[s],t.k&&(f[t.k]=l.value))}else C?(f[l]=o,m(l)&&(p[l]=o)):S&&(l.value=o,t.k&&(f[t.k]=o))};o?(I.id=-1,Do(I,n)):I()}}}let Cx=!1;const Rd=()=>{Cx||(console.error("Hydration completed but contains mismatches."),Cx=!0)},_O=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",wO=t=>t.namespaceURI.includes("MathML"),om=t=>{if(t.nodeType===1){if(_O(t))return"svg";if(wO(t))return"mathml"}},tp=t=>t.nodeType===8;function xO(t){const{mt:e,p:n,o:{patchProp:r,createText:i,nextSibling:s,parentNode:o,remove:a,insert:l,createComment:c}}=t,f=(j,W)=>{if(!W.hasChildNodes()){n(null,j,W),_v(),W._vnode=j;return}p(W.firstChild,j,null,null,null),_v(),W._vnode=j},p=(j,W,X,ce,he,O=!1)=>{O=O||!!W.dynamicChildren;const B=tp(j)&&j.data==="[",q=()=>S(j,W,X,ce,he,B),{type:F,ref:R,shapeFlag:K,patchFlag:Z}=W;let Y=j.nodeType;W.el=j,Z===-2&&(O=!1,W.dynamicChildren=null);let k=null;switch(F){case df:Y!==3?W.children===""?(l(W.el=i(""),o(j),j),k=j):k=q():(j.data!==W.children&&(Rd(),j.data=W.children),k=s(j));break;case ko:T(j)?(k=s(j),N(W.el=j.content.firstChild,j,X)):Y!==8||B?k=q():k=s(j);break;case nd:if(B&&(j=s(j),Y=j.nodeType),Y===1||Y===3){k=j;const U=!W.children.length;for(let H=0;H<W.staticCount;H++)U&&(W.children+=k.nodeType===1?k.outerHTML:k.data),H===W.staticCount-1&&(W.anchor=k),k=s(k);return B?s(k):k}else q();break;case gn:B?k=C(j,W,X,ce,he,O):k=q();break;default:if(K&1)(Y!==1||W.type.toLowerCase()!==j.tagName.toLowerCase())&&!T(j)?k=q():k=v(j,W,X,ce,he,O);else if(K&6){W.slotScopeIds=he;const U=o(j);if(B?k=I(j):tp(j)&&j.data==="teleport start"?k=I(j,j.data,"teleport end"):k=s(j),e(W,U,null,X,ce,om(U),O),ff(W)&&!W.type.__asyncResolved){let H;B?(H=Kr(gn),H.anchor=k?k.previousSibling:U.lastChild):H=j.nodeType===3?Mr(""):Kr("div"),H.el=j,W.component.subTree=H}}else K&64?Y!==8?k=q():k=W.type.hydrate(j,W,X,ce,he,O,t,m):K&128&&(k=W.type.hydrate(j,W,X,ce,om(o(j)),he,O,t,p))}return R!=null&&Qg(R,null,ce,W),k},v=(j,W,X,ce,he,O)=>{O=O||!!W.dynamicChildren;const{type:B,props:q,patchFlag:F,shapeFlag:R,dirs:K,transition:Z}=W,Y=B==="input"||B==="option";if(Y||F!==-1){K&&Fc(W,null,X,"created");let k=!1;if(T(j)){k=LC(null,Z)&&X&&X.vnode.props&&X.vnode.props.appear;const H=j.content.firstChild;k&&Z.beforeEnter(H),N(H,j,X),W.el=j=H}if(R&16&&!(q&&(q.innerHTML||q.textContent))){let H=m(j.firstChild,W,j,X,ce,he,O);for(;H;){am(j,1)||Rd();const ue=H;H=H.nextSibling,a(ue)}}else if(R&8){let H=W.children;H[0]===`
`&&(j.tagName==="PRE"||j.tagName==="TEXTAREA")&&(H=H.slice(1)),j.textContent!==H&&(am(j,0)||Rd(),j.textContent=W.children)}if(q){if(Y||!O||F&48){const H=j.tagName.includes("-");for(const ue in q)(Y&&(ue.endsWith("value")||ue==="indeterminate")||y0(ue)&&!op(ue)||ue[0]==="."||H)&&r(j,ue,null,q[ue],void 0,X)}else if(q.onClick)r(j,"onClick",null,q.onClick,void 0,X);else if(F&4&&Wc(q.style))for(const H in q.style)q.style[H]}let U;(U=q&&q.onVnodeBeforeMount)&&Bl(U,X,W),K&&Fc(W,null,X,"beforeMount"),((U=q&&q.onVnodeMounted)||K||k)&&OC(()=>{U&&Bl(U,X,W),k&&Z.enter(j),K&&Fc(W,null,X,"mounted")},ce)}return j.nextSibling},m=(j,W,X,ce,he,O,B)=>{B=B||!!W.dynamicChildren;const q=W.children,F=q.length;for(let R=0;R<F;R++){const K=B?q[R]:q[R]=jl(q[R]),Z=K.type===df;j?(Z&&!B&&R+1<F&&jl(q[R+1]).type===df&&(l(i(j.data.slice(K.children.length)),X,s(j)),j.data=K.children),j=p(j,K,ce,he,O,B)):Z&&!K.children?l(K.el=i(""),X):(am(X,1)||Rd(),n(null,K,X,null,ce,he,om(X),O))}return j},C=(j,W,X,ce,he,O)=>{const{slotScopeIds:B}=W;B&&(he=he?he.concat(B):B);const q=o(j),F=m(s(j),W,q,X,ce,he,O);return F&&tp(F)&&F.data==="]"?s(W.anchor=F):(Rd(),l(W.anchor=c("]"),q,F),F)},S=(j,W,X,ce,he,O)=>{if(am(j.parentElement,1)||Rd(),W.el=null,O){const F=I(j);for(;;){const R=s(j);if(R&&R!==F)a(R);else break}}const B=s(j),q=o(j);return a(j),n(null,W,q,B,X,ce,om(q),he),X&&(X.vnode.el=W.el,vy(X,W.el)),B},I=(j,W="[",X="]")=>{let ce=0;for(;j;)if(j=s(j),j&&tp(j)&&(j.data===W&&ce++,j.data===X)){if(ce===0)return s(j);ce--}return j},N=(j,W,X)=>{const ce=W.parentNode;ce&&ce.replaceChild(j,W);let he=X;for(;he;)he.vnode.el===W&&(he.vnode.el=he.subTree.el=j),he=he.parent},T=j=>j.nodeType===1&&j.tagName==="TEMPLATE";return[f,p]}const Sx="data-allow-mismatch",LO={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function am(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(Sx);)t=t.parentElement;const n=t&&t.getAttribute(Sx);if(n==null)return!1;if(n==="")return!0;{const r=n.split(",");return e===0&&r.includes("children")?!0:n.split(",").includes(LO[e])}}const CO=iy().requestIdleCallback||(t=>setTimeout(t,1)),SO=iy().cancelIdleCallback||(t=>clearTimeout(t)),EO=(t=1e4)=>e=>{const n=CO(e,{timeout:t});return()=>SO(n)};function PO(t){const{top:e,left:n,bottom:r,right:i}=t.getBoundingClientRect(),{innerHeight:s,innerWidth:o}=window;return(e>0&&e<s||r>0&&r<s)&&(n>0&&n<o||i>0&&i<o)}const kO=t=>(e,n)=>{const r=new IntersectionObserver(i=>{for(const s of i)if(s.isIntersecting){r.disconnect(),e();break}},t);return n(i=>{if(i instanceof Element){if(PO(i))return e(),r.disconnect(),!1;r.observe(i)}}),()=>r.disconnect()},MO=t=>e=>{if(t){const n=matchMedia(t);if(n.matches)e();else return n.addEventListener("change",e,{once:!0}),()=>n.removeEventListener("change",e)}},AO=(t=[])=>(e,n)=>{is(t)&&(t=[t]);let r=!1;const i=o=>{r||(r=!0,s(),e(),o.target.dispatchEvent(new o.constructor(o.type,o)))},s=()=>{n(o=>{for(const a of t)o.removeEventListener(a,i)})};return n(o=>{for(const a of t)o.addEventListener(a,i,{once:!0})}),s};function TO(t,e){if(tp(t)&&t.data==="["){let n=1,r=t.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(tp(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else e(t)}const ff=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function OO(t){_r(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:i=200,hydrate:s,timeout:o,suspensible:a=!0,onError:l}=t;let c=null,f,p=0;const v=()=>(p++,c=null,m()),m=()=>{let C;return c||(C=c=e().catch(S=>{if(S=S instanceof Error?S:new Error(String(S)),l)return new Promise((I,N)=>{l(S,()=>I(v()),()=>N(S),p+1)});throw S}).then(S=>C!==c&&c?c:(S&&(S.__esModule||S[Symbol.toStringTag]==="Module")&&(S=S.default),f=S,S)))};return hs({name:"AsyncComponentWrapper",__asyncLoader:m,__asyncHydrate(C,S,I){const N=s?()=>{const T=s(I,j=>TO(C,j));T&&(S.bum||(S.bum=[])).push(T)}:I;f?N():m().then(()=>!S.isUnmounted&&N())},get __asyncResolved(){return f},setup(){const C=Io;if(a_(C),f)return()=>_1(f,C);const S=j=>{c=null,gd(j,C,13,!r)};if(a&&C.suspense||mp)return m().then(j=>()=>_1(j,C)).catch(j=>(S(j),()=>r?Kr(r,{error:j}):null));const I=bt(!1),N=bt(),T=bt(!!i);return i&&setTimeout(()=>{T.value=!1},i),o!=null&&setTimeout(()=>{if(!I.value&&!N.value){const j=new Error(`Async component timed out after ${o}ms.`);S(j),N.value=j}},o),m().then(()=>{I.value=!0,C.parent&&_0(C.parent.vnode)&&C.parent.update()}).catch(j=>{S(j),N.value=j}),()=>{if(I.value&&f)return _1(f,C);if(N.value&&r)return Kr(r,{error:N.value});if(n&&!T.value)return Kr(n)}}})}function _1(t,e){const{ref:n,props:r,children:i,ce:s}=e.vnode,o=Kr(t,r,i);return o.ref=n,o.ce=s,delete e.vnode.ce,o}const _0=t=>t.type.__isKeepAlive,DO={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=Uu(),r=n.ctx;if(!r.renderer)return()=>{const T=e.default&&e.default();return T&&T.length===1?T[0]:T};const i=new Map,s=new Set;let o=null;const a=n.suspense,{renderer:{p:l,m:c,um:f,o:{createElement:p}}}=r,v=p("div");r.activate=(T,j,W,X,ce)=>{const he=T.component;c(T,j,W,0,a),l(he.vnode,T,j,W,he,a,X,T.slotScopeIds,ce),Do(()=>{he.isDeactivated=!1,he.a&&ap(he.a);const O=T.props&&T.props.onVnodeMounted;O&&Bl(O,he.parent,T)},a)},r.deactivate=T=>{const j=T.component;xv(j.m),xv(j.a),c(T,v,null,1,a),Do(()=>{j.da&&ap(j.da);const W=T.props&&T.props.onVnodeUnmounted;W&&Bl(W,j.parent,T),j.isDeactivated=!0},a)};function m(T){w1(T),f(T,n,a,!0)}function C(T){i.forEach((j,W)=>{const X=R2(j.type);X&&!T(X)&&S(W)})}function S(T){const j=i.get(T);j&&(!o||!cc(j,o))?m(j):o&&w1(o),i.delete(T),s.delete(T)}li(()=>[t.include,t.exclude],([T,j])=>{T&&C(W=>ag(T,W)),j&&C(W=>!ag(j,W))},{flush:"post",deep:!0});let I=null;const N=()=>{I!=null&&(Lv(n.subTree.type)?Do(()=>{i.set(I,lm(n.subTree))},n.subTree.suspense):i.set(I,lm(n.subTree)))};return zs(N),gy(N),Cf(()=>{i.forEach(T=>{const{subTree:j,suspense:W}=n,X=lm(j);if(T.type===X.type&&T.key===X.key){w1(X);const ce=X.component.da;ce&&Do(ce,W);return}m(T)})}),()=>{if(I=null,!e.default)return o=null;const T=e.default(),j=T[0];if(T.length>1)return o=null,T;if(!Th(j)||!(j.shapeFlag&4)&&!(j.shapeFlag&128))return o=null,j;let W=lm(j);if(W.type===ko)return o=null,W;const X=W.type,ce=R2(ff(W)?W.type.__asyncResolved||{}:X),{include:he,exclude:O,max:B}=t;if(he&&(!ce||!ag(he,ce))||O&&ce&&ag(O,ce))return W.shapeFlag&=-257,o=W,j;const q=W.key==null?X:W.key,F=i.get(q);return W.el&&(W=Zc(W),j.shapeFlag&128&&(j.ssContent=W)),I=q,F?(W.el=F.el,W.component=F.component,W.transition&&Ah(W,W.transition),W.shapeFlag|=512,s.delete(q),s.add(q)):(s.add(q),B&&s.size>parseInt(B,10)&&S(s.values().next().value)),W.shapeFlag|=256,o=W,Lv(j.type)?j:W}}},IO=DO;function ag(t,e){return Zn(t)?t.some(n=>ag(n,e)):is(t)?t.split(",").includes(e):c8(t)?(t.lastIndex=0,t.test(e)):!1}function XL(t,e){QL(t,"a",e)}function JL(t,e){QL(t,"da",e)}function QL(t,e,n=Io){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(py(e,r,n),n){let i=n.parent;for(;i&&i.parent;)_0(i.parent.vnode)&&NO(r,e,n,i),i=i.parent}}function NO(t,e,n,r){const i=py(e,t,r,!0);Ru(()=>{Hb(r[e],i)},n)}function w1(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function lm(t){return t.shapeFlag&128?t.ssContent:t}function py(t,e,n=Io,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{xf();const a=ud(n),l=ju(e,n,t,o);return a(),Lf(),l});return r?i.unshift(s):i.push(s),s}}const Dh=t=>(e,n=Io)=>{(!mp||t==="sp")&&py(t,(...r)=>e(...r),n)},eC=Dh("bm"),zs=Dh("m"),l_=Dh("bu"),gy=Dh("u"),Cf=Dh("bum"),Ru=Dh("um"),tC=Dh("sp"),nC=Dh("rtg"),rC=Dh("rtc");function iC(t,e=Io){py("ec",t,e)}const u_="components",BO="directives";function c_(t,e){return h_(u_,t,!0,e)||t}const sC=Symbol.for("v-ndc");function oC(t){return is(t)?h_(u_,t,!1)||t:t||sC}function RO(t){return h_(BO,t)}function h_(t,e,n=!0,r=!1){const i=No||Io;if(i){const s=i.type;if(t===u_){const a=R2(s,!1);if(a&&(a===e||a===pa(e)||a===b0(pa(e))))return s}const o=Ex(i[t]||s[t],e)||Ex(i.appContext[t],e);return!o&&r?s:o}}function Ex(t,e){return t&&(t[e]||t[pa(e)]||t[b0(pa(e))])}function Vn(t,e,n,r){let i;const s=n&&n[r],o=Zn(t);if(o||is(t)){const a=o&&Wc(t);let l=!1;a&&(l=!du(t),t=ay(t)),i=new Array(t.length);for(let c=0,f=t.length;c<f;c++)i[c]=e(l?Ra(t[c]):t[c],c,void 0,s&&s[c])}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,s&&s[a])}else if(ji(t))if(t[Symbol.iterator])i=Array.from(t,(a,l)=>e(a,l,void 0,s&&s[l]));else{const a=Object.keys(t);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const f=a[l];i[l]=e(t[f],f,l,s&&s[l])}}else i=[];return n&&(n[r]=i),i}function FO(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(Zn(r))for(let i=0;i<r.length;i++)t[r[i].name]=r[i].fn;else r&&(t[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return t}function jO(t,e,n={},r,i){if(No.ce||No.parent&&ff(No.parent)&&No.parent.ce)return e!=="default"&&(n.name=e),Me(),ho(gn,null,[Kr("slot",n,r&&r())],64);let s=t[e];s&&s._c&&(s._d=!1),Me();const o=s&&f_(s(n)),a=n.key||o&&o.key,l=ho(gn,{key:(a&&!gc(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&t._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function f_(t){return t.some(e=>Th(e)?!(e.type===ko||e.type===gn&&!f_(e.children)):!0)?t:null}function zO(t,e){const n={};for(const r in t)n[e&&/[A-Z]/.test(r)?`on:${r}`:Lg(r)]=t[r];return n}const E2=t=>t?jC(t)?x0(t):E2(t.parent):null,Pg=Yi(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>E2(t.parent),$root:t=>E2(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>d_(t),$forceUpdate:t=>t.f||(t.f=()=>{i_(t.update)}),$nextTick:t=>t.n||(t.n=fl.bind(t.proxy)),$watch:t=>mD.bind(t)}),x1=(t,e)=>t!==gi&&!t.__isScriptSetup&&Mi(t,e),P2={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(x1(r,e))return o[e]=1,r[e];if(i!==gi&&Mi(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&Mi(c,e))return o[e]=3,s[e];if(n!==gi&&Mi(n,e))return o[e]=4,n[e];k2&&(o[e]=0)}}const f=Pg[e];let p,v;if(f)return e==="$attrs"&&Ba(t.attrs,"get",""),f(t);if((p=a.__cssModules)&&(p=p[e]))return p;if(n!==gi&&Mi(n,e))return o[e]=4,n[e];if(v=l.config.globalProperties,Mi(v,e))return v[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return x1(i,e)?(i[e]=n,!0):r!==gi&&Mi(r,e)?(r[e]=n,!0):Mi(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==gi&&Mi(t,o)||x1(e,o)||(a=s[0])&&Mi(a,o)||Mi(r,o)||Mi(Pg,o)||Mi(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Mi(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}},UO=Yi({},P2,{get(t,e){if(e!==Symbol.unscopables)return P2.get(t,e,t)},has(t,e){return e[0]!=="_"&&!g8(e)}});function $O(){return null}function VO(){return null}function HO(t){}function GO(t){}function WO(){return null}function qO(){}function YO(t,e){return null}function KO(){return aC().slots}function ZO(){return aC().attrs}function aC(){const t=Uu();return t.setupContext||(t.setupContext=$C(t))}function e0(t){return Zn(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function XO(t,e){const n=e0(t);for(const r in e){if(r.startsWith("__skip"))continue;let i=n[r];i?Zn(i)||_r(i)?i=n[r]={type:i,default:e[r]}:i.default=e[r]:i===null&&(i=n[r]={default:e[r]}),i&&e[`__skip_${r}`]&&(i.skipFactory=!0)}return n}function JO(t,e){return!t||!e?t||e:Zn(t)&&Zn(e)?t.concat(e):Yi({},e0(t),e0(e))}function QO(t,e){const n={};for(const r in t)e.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>t[r]});return n}function eD(t){const e=Uu();let n=t();return I2(),Gb(n)&&(n=n.catch(r=>{throw ud(e),r})),[n,()=>ud(e)]}let k2=!0;function tD(t){const e=d_(t),n=t.proxy,r=t.ctx;k2=!1,e.beforeCreate&&Px(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:f,beforeMount:p,mounted:v,beforeUpdate:m,updated:C,activated:S,deactivated:I,beforeDestroy:N,beforeUnmount:T,destroyed:j,unmounted:W,render:X,renderTracked:ce,renderTriggered:he,errorCaptured:O,serverPrefetch:B,expose:q,inheritAttrs:F,components:R,directives:K,filters:Z}=e;if(c&&nD(c,r,null),o)for(const U in o){const H=o[U];_r(H)&&(r[U]=H.bind(n))}if(i){const U=i.call(n,n);ji(U)&&(t.data=mu(U))}if(k2=!0,s)for(const U in s){const H=s[U],ue=_r(H)?H.bind(n,n):_r(H.get)?H.get.bind(n,n):Bu,_e=!_r(H)&&_r(H.set)?H.set.bind(n):Bu,Ie=Hn({get:ue,set:_e});Object.defineProperty(r,U,{enumerable:!0,configurable:!0,get:()=>Ie.value,set:ee=>Ie.value=ee})}if(a)for(const U in a)lC(a[U],r,n,U);if(l){const U=_r(l)?l.call(n):l;Reflect.ownKeys(U).forEach(H=>{kg(H,U[H])})}f&&Px(f,t,"c");function k(U,H){Zn(H)?H.forEach(ue=>U(ue.bind(n))):H&&U(H.bind(n))}if(k(eC,p),k(zs,v),k(l_,m),k(gy,C),k(XL,S),k(JL,I),k(iC,O),k(rC,ce),k(nC,he),k(Cf,T),k(Ru,W),k(tC,B),Zn(q))if(q.length){const U=t.exposed||(t.exposed={});q.forEach(H=>{Object.defineProperty(U,H,{get:()=>n[H],set:ue=>n[H]=ue})})}else t.exposed||(t.exposed={});X&&t.render===Bu&&(t.render=X),F!=null&&(t.inheritAttrs=F),R&&(t.components=R),K&&(t.directives=K),B&&a_(t)}function nD(t,e,n=Bu){Zn(t)&&(t=M2(t));for(const r in t){const i=t[r];let s;ji(i)?"default"in i?s=pu(i.from||r,i.default,!0):s=pu(i.from||r):s=pu(i),js(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function Px(t,e,n){ju(Zn(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function lC(t,e,n,r){let i=r.includes(".")?kC(n,r):()=>n[r];if(is(t)){const s=e[t];_r(s)&&li(i,s)}else if(_r(t))li(i,t.bind(n));else if(ji(t))if(Zn(t))t.forEach(s=>lC(s,e,n,r));else{const s=_r(t.handler)?t.handler.bind(n):e[t.handler];_r(s)&&li(i,s,t)}}function d_(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(c=>wv(l,c,o,!0)),wv(l,e,o)),ji(e)&&s.set(e,l),l}function wv(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&wv(t,s,n,!0),i&&i.forEach(o=>wv(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=rD[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const rD={data:kx,props:Mx,emits:Mx,methods:lg,computed:lg,beforeCreate:il,created:il,beforeMount:il,mounted:il,beforeUpdate:il,updated:il,beforeDestroy:il,beforeUnmount:il,destroyed:il,unmounted:il,activated:il,deactivated:il,errorCaptured:il,serverPrefetch:il,components:lg,directives:lg,watch:sD,provide:kx,inject:iD};function kx(t,e){return e?t?function(){return Yi(_r(t)?t.call(this,this):t,_r(e)?e.call(this,this):e)}:e:t}function iD(t,e){return lg(M2(t),M2(e))}function M2(t){if(Zn(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function il(t,e){return t?[...new Set([].concat(t,e))]:e}function lg(t,e){return t?Yi(Object.create(null),t,e):e}function Mx(t,e){return t?Zn(t)&&Zn(e)?[...new Set([...t,...e])]:Yi(Object.create(null),e0(t),e0(e??{})):e}function sD(t,e){if(!t)return e;if(!e)return t;const n=Yi(Object.create(null),t);for(const r in e)n[r]=il(t[r],e[r]);return n}function uC(){return{app:null,config:{isNativeTag:l8,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let oD=0;function aD(t,e){return function(r,i=null){_r(r)||(r=Yi({},r)),i!=null&&!ji(i)&&(i=null);const s=uC(),o=new WeakSet,a=[];let l=!1;const c=s.app={_uid:oD++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:HC,get config(){return s.config},set config(f){},use(f,...p){return o.has(f)||(f&&_r(f.install)?(o.add(f),f.install(c,...p)):_r(f)&&(o.add(f),f(c,...p))),c},mixin(f){return s.mixins.includes(f)||s.mixins.push(f),c},component(f,p){return p?(s.components[f]=p,c):s.components[f]},directive(f,p){return p?(s.directives[f]=p,c):s.directives[f]},mount(f,p,v){if(!l){const m=c._ceVNode||Kr(r,i);return m.appContext=s,v===!0?v="svg":v===!1&&(v=void 0),p&&e?e(m,f):t(m,f,v),l=!0,c._container=f,f.__vue_app__=c,x0(m.component)}},onUnmount(f){a.push(f)},unmount(){l&&(ju(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(f,p){return s.provides[f]=p,c},runWithContext(f){const p=td;td=c;try{return f()}finally{td=p}}};return c}}let td=null;function kg(t,e){if(Io){let n=Io.provides;const r=Io.parent&&Io.parent.provides;r===n&&(n=Io.provides=Object.create(r)),n[t]=e}}function pu(t,e,n=!1){const r=Io||No;if(r||td){const i=td?td._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&_r(e)?e.call(r&&r.proxy):e}}function cC(){return!!(Io||No||td)}const hC={},fC=()=>Object.create(hC),dC=t=>Object.getPrototypeOf(t)===hC;function lD(t,e,n,r=!1){const i={},s=fC();t.propsDefaults=Object.create(null),pC(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:Qb(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function uD(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=pi(i),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const f=t.vnode.dynamicProps;for(let p=0;p<f.length;p++){let v=f[p];if(my(t.emitsOptions,v))continue;const m=e[v];if(l)if(Mi(s,v))m!==s[v]&&(s[v]=m,c=!0);else{const C=pa(v);i[C]=A2(l,a,C,m,t,!1)}else m!==s[v]&&(s[v]=m,c=!0)}}}else{pC(t,e,i,s)&&(c=!0);let f;for(const p in a)(!e||!Mi(e,p)&&((f=zl(p))===p||!Mi(e,f)))&&(l?n&&(n[p]!==void 0||n[f]!==void 0)&&(i[p]=A2(l,a,p,void 0,t,!0)):delete i[p]);if(s!==a)for(const p in s)(!e||!Mi(e,p))&&(delete s[p],c=!0)}c&&xh(t.attrs,"set","")}function pC(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(op(l))continue;const c=e[l];let f;i&&Mi(i,f=pa(l))?!s||!s.includes(f)?n[f]=c:(a||(a={}))[f]=c:my(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=pi(n),c=a||gi;for(let f=0;f<s.length;f++){const p=s[f];n[p]=A2(i,l,p,c[p],t,!Mi(c,p))}}return o}function A2(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=Mi(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&_r(l)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const f=ud(i);r=c[n]=l.call(null,e),f()}}else r=l;i.ce&&i.ce._setProp(n,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===zl(n))&&(r=!0))}return r}const cD=new WeakMap;function gC(t,e,n=!1){const r=n?cD:e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!_r(t)){const f=p=>{l=!0;const[v,m]=gC(p,e,!0);Yi(o,v),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!s&&!l)return ji(t)&&r.set(t,ip),ip;if(Zn(s))for(let f=0;f<s.length;f++){const p=pa(s[f]);Ax(p)&&(o[p]=gi)}else if(s)for(const f in s){const p=pa(f);if(Ax(p)){const v=s[f],m=o[p]=Zn(v)||_r(v)?{type:v}:Yi({},v),C=m.type;let S=!1,I=!0;if(Zn(C))for(let N=0;N<C.length;++N){const T=C[N],j=_r(T)&&T.name;if(j==="Boolean"){S=!0;break}else j==="String"&&(I=!1)}else S=_r(C)&&C.name==="Boolean";m[0]=S,m[1]=I,(S||Mi(m,"default"))&&a.push(p)}}const c=[o,a];return ji(t)&&r.set(t,c),c}function Ax(t){return t[0]!=="$"&&!op(t)}const mC=t=>t[0]==="_"||t==="$stable",p_=t=>Zn(t)?t.map(jl):[jl(t)],hD=(t,e,n)=>{if(e._n)return e;const r=Ul((...i)=>p_(e(...i)),n);return r._c=!1,r},vC=(t,e,n)=>{const r=t._ctx;for(const i in t){if(mC(i))continue;const s=t[i];if(_r(s))e[i]=hD(i,s,r);else if(s!=null){const o=p_(s);e[i]=()=>o}}},yC=(t,e)=>{const n=p_(e);t.slots.default=()=>n},bC=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},fD=(t,e,n)=>{const r=t.slots=fC();if(t.vnode.shapeFlag&32){const i=e._;i?(bC(r,e,n),n&&pL(r,"_",i,!0)):vC(e,r)}else e&&yC(t,e)},dD=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=gi;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:bC(i,e,n):(s=!e.$stable,vC(e,i)),o=e}else e&&(yC(t,e),o={default:1});if(s)for(const a in i)!mC(a)&&o[a]==null&&delete i[a]},Do=OC;function _C(t){return xC(t)}function wC(t){return xC(t,xO)}function xC(t,e){const n=iy();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:f,parentNode:p,nextSibling:v,setScopeId:m=Bu,insertStaticContent:C}=t,S=(le,ae,de,re=null,Ae=null,Ge=null,tt=void 0,at=null,ut=!!ae.dynamicChildren)=>{if(le===ae)return;le&&!cc(le,ae)&&(re=ye(le),ee(le,Ae,Ge,!0),le=null),ae.patchFlag===-2&&(ut=!1,ae.dynamicChildren=null);const{type:gt,ref:$t,shapeFlag:Rt}=ae;switch(gt){case df:I(le,ae,de,re);break;case ko:N(le,ae,de,re);break;case nd:le==null&&T(ae,de,re,tt);break;case gn:R(le,ae,de,re,Ae,Ge,tt,at,ut);break;default:Rt&1?X(le,ae,de,re,Ae,Ge,tt,at,ut):Rt&6?K(le,ae,de,re,Ae,Ge,tt,at,ut):(Rt&64||Rt&128)&&gt.process(le,ae,de,re,Ae,Ge,tt,at,ut,$e)}$t!=null&&Ae&&Qg($t,le&&le.ref,Ge,ae||le,!ae)},I=(le,ae,de,re)=>{if(le==null)r(ae.el=a(ae.children),de,re);else{const Ae=ae.el=le.el;ae.children!==le.children&&c(Ae,ae.children)}},N=(le,ae,de,re)=>{le==null?r(ae.el=l(ae.children||""),de,re):ae.el=le.el},T=(le,ae,de,re)=>{[le.el,le.anchor]=C(le.children,ae,de,re,le.el,le.anchor)},j=({el:le,anchor:ae},de,re)=>{let Ae;for(;le&&le!==ae;)Ae=v(le),r(le,de,re),le=Ae;r(ae,de,re)},W=({el:le,anchor:ae})=>{let de;for(;le&&le!==ae;)de=v(le),i(le),le=de;i(ae)},X=(le,ae,de,re,Ae,Ge,tt,at,ut)=>{ae.type==="svg"?tt="svg":ae.type==="math"&&(tt="mathml"),le==null?ce(ae,de,re,Ae,Ge,tt,at,ut):B(le,ae,Ae,Ge,tt,at,ut)},ce=(le,ae,de,re,Ae,Ge,tt,at)=>{let ut,gt;const{props:$t,shapeFlag:Rt,transition:Gt,dirs:ln}=le;if(ut=le.el=o(le.type,Ge,$t&&$t.is,$t),Rt&8?f(ut,le.children):Rt&16&&O(le.children,ut,null,re,Ae,L1(le,Ge),tt,at),ln&&Fc(le,null,re,"created"),he(ut,le,le.scopeId,tt,re),$t){for(const yn in $t)yn!=="value"&&!op(yn)&&s(ut,yn,null,$t[yn],Ge,re);"value"in $t&&s(ut,"value",null,$t.value,Ge),(gt=$t.onVnodeBeforeMount)&&Bl(gt,re,le)}ln&&Fc(le,null,re,"beforeMount");const mn=LC(Ae,Gt);mn&&Gt.beforeEnter(ut),r(ut,ae,de),((gt=$t&&$t.onVnodeMounted)||mn||ln)&&Do(()=>{gt&&Bl(gt,re,le),mn&&Gt.enter(ut),ln&&Fc(le,null,re,"mounted")},Ae)},he=(le,ae,de,re,Ae)=>{if(de&&m(le,de),re)for(let Ge=0;Ge<re.length;Ge++)m(le,re[Ge]);if(Ae){let Ge=Ae.subTree;if(ae===Ge||Lv(Ge.type)&&(Ge.ssContent===ae||Ge.ssFallback===ae)){const tt=Ae.vnode;he(le,tt,tt.scopeId,tt.slotScopeIds,Ae.parent)}}},O=(le,ae,de,re,Ae,Ge,tt,at,ut=0)=>{for(let gt=ut;gt<le.length;gt++){const $t=le[gt]=at?tf(le[gt]):jl(le[gt]);S(null,$t,ae,de,re,Ae,Ge,tt,at)}},B=(le,ae,de,re,Ae,Ge,tt)=>{const at=ae.el=le.el;let{patchFlag:ut,dynamicChildren:gt,dirs:$t}=ae;ut|=le.patchFlag&16;const Rt=le.props||gi,Gt=ae.props||gi;let ln;if(de&&Bf(de,!1),(ln=Gt.onVnodeBeforeUpdate)&&Bl(ln,de,ae,le),$t&&Fc(ae,le,de,"beforeUpdate"),de&&Bf(de,!0),(Rt.innerHTML&&Gt.innerHTML==null||Rt.textContent&&Gt.textContent==null)&&f(at,""),gt?q(le.dynamicChildren,gt,at,de,re,L1(ae,Ae),Ge):tt||H(le,ae,at,null,de,re,L1(ae,Ae),Ge,!1),ut>0){if(ut&16)F(at,Rt,Gt,de,Ae);else if(ut&2&&Rt.class!==Gt.class&&s(at,"class",null,Gt.class,Ae),ut&4&&s(at,"style",Rt.style,Gt.style,Ae),ut&8){const mn=ae.dynamicProps;for(let yn=0;yn<mn.length;yn++){const Ze=mn[yn],it=Rt[Ze],et=Gt[Ze];(et!==it||Ze==="value")&&s(at,Ze,it,et,Ae,de)}}ut&1&&le.children!==ae.children&&f(at,ae.children)}else!tt&&gt==null&&F(at,Rt,Gt,de,Ae);((ln=Gt.onVnodeUpdated)||$t)&&Do(()=>{ln&&Bl(ln,de,ae,le),$t&&Fc(ae,le,de,"updated")},re)},q=(le,ae,de,re,Ae,Ge,tt)=>{for(let at=0;at<ae.length;at++){const ut=le[at],gt=ae[at],$t=ut.el&&(ut.type===gn||!cc(ut,gt)||ut.shapeFlag&70)?p(ut.el):de;S(ut,gt,$t,null,re,Ae,Ge,tt,!0)}},F=(le,ae,de,re,Ae)=>{if(ae!==de){if(ae!==gi)for(const Ge in ae)!op(Ge)&&!(Ge in de)&&s(le,Ge,ae[Ge],null,Ae,re);for(const Ge in de){if(op(Ge))continue;const tt=de[Ge],at=ae[Ge];tt!==at&&Ge!=="value"&&s(le,Ge,at,tt,Ae,re)}"value"in de&&s(le,"value",ae.value,de.value,Ae)}},R=(le,ae,de,re,Ae,Ge,tt,at,ut)=>{const gt=ae.el=le?le.el:a(""),$t=ae.anchor=le?le.anchor:a("");let{patchFlag:Rt,dynamicChildren:Gt,slotScopeIds:ln}=ae;ln&&(at=at?at.concat(ln):ln),le==null?(r(gt,de,re),r($t,de,re),O(ae.children||[],de,$t,Ae,Ge,tt,at,ut)):Rt>0&&Rt&64&&Gt&&le.dynamicChildren?(q(le.dynamicChildren,Gt,de,Ae,Ge,tt,at),(ae.key!=null||Ae&&ae===Ae.subTree)&&g_(le,ae,!0)):H(le,ae,de,$t,Ae,Ge,tt,at,ut)},K=(le,ae,de,re,Ae,Ge,tt,at,ut)=>{ae.slotScopeIds=at,le==null?ae.shapeFlag&512?Ae.ctx.activate(ae,de,re,tt,ut):Z(ae,de,re,Ae,Ge,tt,ut):Y(le,ae,ut)},Z=(le,ae,de,re,Ae,Ge,tt)=>{const at=le.component=FC(le,re,Ae);if(_0(le)&&(at.ctx.renderer=$e),zC(at,!1,tt),at.asyncDep){if(Ae&&Ae.registerDep(at,k,tt),!le.el){const ut=at.subTree=Kr(ko);N(null,ut,ae,de)}}else k(at,le,ae,de,Ae,Ge,tt)},Y=(le,ae,de)=>{const re=ae.component=le.component;if(xD(le,ae,de))if(re.asyncDep&&!re.asyncResolved){U(re,ae,de);return}else re.next=ae,re.update();else ae.el=le.el,re.vnode=ae},k=(le,ae,de,re,Ae,Ge,tt)=>{const at=()=>{if(le.isMounted){let{next:Rt,bu:Gt,u:ln,parent:mn,vnode:yn}=le;{const Zt=CC(le);if(Zt){Rt&&(Rt.el=yn.el,U(le,Rt,tt)),Zt.asyncDep.then(()=>{le.isUnmounted||at()});return}}let Ze=Rt,it;Bf(le,!1),Rt?(Rt.el=yn.el,U(le,Rt,tt)):Rt=yn,Gt&&ap(Gt),(it=Rt.props&&Rt.props.onVnodeBeforeUpdate)&&Bl(it,mn,Rt,yn),Bf(le,!0);const et=Um(le),Bt=le.subTree;le.subTree=et,S(Bt,et,p(Bt.el),ye(Bt),le,Ae,Ge),Rt.el=et.el,Ze===null&&vy(le,et.el),ln&&Do(ln,Ae),(it=Rt.props&&Rt.props.onVnodeUpdated)&&Do(()=>Bl(it,mn,Rt,yn),Ae)}else{let Rt;const{el:Gt,props:ln}=ae,{bm:mn,m:yn,parent:Ze,root:it,type:et}=le,Bt=ff(ae);if(Bf(le,!1),mn&&ap(mn),!Bt&&(Rt=ln&&ln.onVnodeBeforeMount)&&Bl(Rt,Ze,ae),Bf(le,!0),Gt&&ot){const Zt=()=>{le.subTree=Um(le),ot(Gt,le.subTree,le,Ae,null)};Bt&&et.__asyncHydrate?et.__asyncHydrate(Gt,le,Zt):Zt()}else{it.ce&&it.ce._injectChildStyle(et);const Zt=le.subTree=Um(le);S(null,Zt,de,re,le,Ae,Ge),ae.el=Zt.el}if(yn&&Do(yn,Ae),!Bt&&(Rt=ln&&ln.onVnodeMounted)){const Zt=ae;Do(()=>Bl(Rt,Ze,Zt),Ae)}(ae.shapeFlag&256||Ze&&ff(Ze.vnode)&&Ze.vnode.shapeFlag&256)&&le.a&&Do(le.a,Ae),le.isMounted=!0,ae=de=re=null}};le.scope.on();const ut=le.effect=new qg(at);le.scope.off();const gt=le.update=ut.run.bind(ut),$t=le.job=ut.runIfDirty.bind(ut);$t.i=le,$t.id=le.uid,ut.scheduler=()=>i_($t),Bf(le,!0),gt()},U=(le,ae,de)=>{ae.component=le;const re=le.vnode.props;le.vnode=ae,le.next=null,uD(le,ae.props,re,de),dD(le,ae.children,de),xf(),bx(le),Lf()},H=(le,ae,de,re,Ae,Ge,tt,at,ut=!1)=>{const gt=le&&le.children,$t=le?le.shapeFlag:0,Rt=ae.children,{patchFlag:Gt,shapeFlag:ln}=ae;if(Gt>0){if(Gt&128){_e(gt,Rt,de,re,Ae,Ge,tt,at,ut);return}else if(Gt&256){ue(gt,Rt,de,re,Ae,Ge,tt,at,ut);return}}ln&8?($t&16&&ve(gt,Ae,Ge),Rt!==gt&&f(de,Rt)):$t&16?ln&16?_e(gt,Rt,de,re,Ae,Ge,tt,at,ut):ve(gt,Ae,Ge,!0):($t&8&&f(de,""),ln&16&&O(Rt,de,re,Ae,Ge,tt,at,ut))},ue=(le,ae,de,re,Ae,Ge,tt,at,ut)=>{le=le||ip,ae=ae||ip;const gt=le.length,$t=ae.length,Rt=Math.min(gt,$t);let Gt;for(Gt=0;Gt<Rt;Gt++){const ln=ae[Gt]=ut?tf(ae[Gt]):jl(ae[Gt]);S(le[Gt],ln,de,null,Ae,Ge,tt,at,ut)}gt>$t?ve(le,Ae,Ge,!0,!1,Rt):O(ae,de,re,Ae,Ge,tt,at,ut,Rt)},_e=(le,ae,de,re,Ae,Ge,tt,at,ut)=>{let gt=0;const $t=ae.length;let Rt=le.length-1,Gt=$t-1;for(;gt<=Rt&&gt<=Gt;){const ln=le[gt],mn=ae[gt]=ut?tf(ae[gt]):jl(ae[gt]);if(cc(ln,mn))S(ln,mn,de,null,Ae,Ge,tt,at,ut);else break;gt++}for(;gt<=Rt&&gt<=Gt;){const ln=le[Rt],mn=ae[Gt]=ut?tf(ae[Gt]):jl(ae[Gt]);if(cc(ln,mn))S(ln,mn,de,null,Ae,Ge,tt,at,ut);else break;Rt--,Gt--}if(gt>Rt){if(gt<=Gt){const ln=Gt+1,mn=ln<$t?ae[ln].el:re;for(;gt<=Gt;)S(null,ae[gt]=ut?tf(ae[gt]):jl(ae[gt]),de,mn,Ae,Ge,tt,at,ut),gt++}}else if(gt>Gt)for(;gt<=Rt;)ee(le[gt],Ae,Ge,!0),gt++;else{const ln=gt,mn=gt,yn=new Map;for(gt=mn;gt<=Gt;gt++){const xn=ae[gt]=ut?tf(ae[gt]):jl(ae[gt]);xn.key!=null&&yn.set(xn.key,gt)}let Ze,it=0;const et=Gt-mn+1;let Bt=!1,Zt=0;const Sn=new Array(et);for(gt=0;gt<et;gt++)Sn[gt]=0;for(gt=ln;gt<=Rt;gt++){const xn=le[gt];if(it>=et){ee(xn,Ae,Ge,!0);continue}let zn;if(xn.key!=null)zn=yn.get(xn.key);else for(Ze=mn;Ze<=Gt;Ze++)if(Sn[Ze-mn]===0&&cc(xn,ae[Ze])){zn=Ze;break}zn===void 0?ee(xn,Ae,Ge,!0):(Sn[zn-mn]=gt+1,zn>=Zt?Zt=zn:Bt=!0,S(xn,ae[zn],de,null,Ae,Ge,tt,at,ut),it++)}const bn=Bt?pD(Sn):ip;for(Ze=bn.length-1,gt=et-1;gt>=0;gt--){const xn=mn+gt,zn=ae[xn],vn=xn+1<$t?ae[xn+1].el:re;Sn[gt]===0?S(null,zn,de,vn,Ae,Ge,tt,at,ut):Bt&&(Ze<0||gt!==bn[Ze]?Ie(zn,de,vn,2):Ze--)}}},Ie=(le,ae,de,re,Ae=null)=>{const{el:Ge,type:tt,transition:at,children:ut,shapeFlag:gt}=le;if(gt&6){Ie(le.component.subTree,ae,de,re);return}if(gt&128){le.suspense.move(ae,de,re);return}if(gt&64){tt.move(le,ae,de,$e);return}if(tt===gn){r(Ge,ae,de);for(let Rt=0;Rt<ut.length;Rt++)Ie(ut[Rt],ae,de,re);r(le.anchor,ae,de);return}if(tt===nd){j(le,ae,de);return}if(re!==2&&gt&1&&at)if(re===0)at.beforeEnter(Ge),r(Ge,ae,de),Do(()=>at.enter(Ge),Ae);else{const{leave:Rt,delayLeave:Gt,afterLeave:ln}=at,mn=()=>r(Ge,ae,de),yn=()=>{Rt(Ge,()=>{mn(),ln&&ln()})};Gt?Gt(Ge,mn,yn):yn()}else r(Ge,ae,de)},ee=(le,ae,de,re=!1,Ae=!1)=>{const{type:Ge,props:tt,ref:at,children:ut,dynamicChildren:gt,shapeFlag:$t,patchFlag:Rt,dirs:Gt,cacheIndex:ln}=le;if(Rt===-2&&(Ae=!1),at!=null&&Qg(at,null,de,le,!0),ln!=null&&(ae.renderCache[ln]=void 0),$t&256){ae.ctx.deactivate(le);return}const mn=$t&1&&Gt,yn=!ff(le);let Ze;if(yn&&(Ze=tt&&tt.onVnodeBeforeUnmount)&&Bl(Ze,ae,le),$t&6)ge(le.component,de,re);else{if($t&128){le.suspense.unmount(de,re);return}mn&&Fc(le,null,ae,"beforeUnmount"),$t&64?le.type.remove(le,ae,de,$e,re):gt&&!gt.hasOnce&&(Ge!==gn||Rt>0&&Rt&64)?ve(gt,ae,de,!1,!0):(Ge===gn&&Rt&384||!Ae&&$t&16)&&ve(ut,ae,de),re&&te(le)}(yn&&(Ze=tt&&tt.onVnodeUnmounted)||mn)&&Do(()=>{Ze&&Bl(Ze,ae,le),mn&&Fc(le,null,ae,"unmounted")},de)},te=le=>{const{type:ae,el:de,anchor:re,transition:Ae}=le;if(ae===gn){oe(de,re);return}if(ae===nd){W(le);return}const Ge=()=>{i(de),Ae&&!Ae.persisted&&Ae.afterLeave&&Ae.afterLeave()};if(le.shapeFlag&1&&Ae&&!Ae.persisted){const{leave:tt,delayLeave:at}=Ae,ut=()=>tt(de,Ge);at?at(le.el,Ge,ut):ut()}else Ge()},oe=(le,ae)=>{let de;for(;le!==ae;)de=v(le),i(le),le=de;i(ae)},ge=(le,ae,de)=>{const{bum:re,scope:Ae,job:Ge,subTree:tt,um:at,m:ut,a:gt}=le;xv(ut),xv(gt),re&&ap(re),Ae.stop(),Ge&&(Ge.flags|=8,ee(tt,le,ae,de)),at&&Do(at,ae),Do(()=>{le.isUnmounted=!0},ae),ae&&ae.pendingBranch&&!ae.isUnmounted&&le.asyncDep&&!le.asyncResolved&&le.suspenseId===ae.pendingId&&(ae.deps--,ae.deps===0&&ae.resolve())},ve=(le,ae,de,re=!1,Ae=!1,Ge=0)=>{for(let tt=Ge;tt<le.length;tt++)ee(le[tt],ae,de,re,Ae)},ye=le=>{if(le.shapeFlag&6)return ye(le.component.subTree);if(le.shapeFlag&128)return le.suspense.next();const ae=v(le.anchor||le.el),de=ae&&ae[VL];return de?v(de):ae};let pe=!1;const fe=(le,ae,de)=>{le==null?ae._vnode&&ee(ae._vnode,null,null,!0):S(ae._vnode||null,le,ae,null,null,null,de),ae._vnode=le,pe||(pe=!0,bx(),_v(),pe=!1)},$e={p:S,um:ee,m:Ie,r:te,mt:Z,mc:O,pc:H,pbc:q,n:ye,o:t};let Ne,ot;return e&&([Ne,ot]=e($e)),{render:fe,hydrate:Ne,createApp:aD(fe,Ne)}}function L1({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Bf({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function LC(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function g_(t,e,n=!1){const r=t.children,i=e.children;if(Zn(r)&&Zn(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=tf(i[s]),a.el=o.el),!n&&a.patchFlag!==-2&&g_(o,a)),a.type===df&&(a.el=o.el)}}function pD(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function CC(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:CC(e)}function xv(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const SC=Symbol.for("v-scx"),EC=()=>pu(SC);function t0(t,e){return w0(t,null,e)}function gD(t,e){return w0(t,null,{flush:"post"})}function PC(t,e){return w0(t,null,{flush:"sync"})}function li(t,e,n){return w0(t,e,n)}function w0(t,e,n=gi){const{immediate:r,deep:i,flush:s,once:o}=n,a=Yi({},n),l=e&&r||!e&&s!=="post";let c;if(mp){if(s==="sync"){const m=EC();c=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=Bu,m.resume=Bu,m.pause=Bu,m}}const f=Io;a.call=(m,C,S)=>ju(m,f,C,S);let p=!1;s==="post"?a.scheduler=m=>{Do(m,f&&f.suspense)}:s!=="sync"&&(p=!0,a.scheduler=(m,C)=>{C?m():i_(m)}),a.augmentJob=m=>{e&&(m.flags|=4),p&&(m.flags|=2,f&&(m.id=f.uid,m.i=f))};const v=sO(t,e,a);return mp&&(c?c.push(v):l&&v()),v}function mD(t,e,n){const r=this.proxy,i=is(t)?t.includes(".")?kC(r,t):()=>r[t]:t.bind(r,r);let s;_r(e)?s=e:(s=e.handler,n=e);const o=ud(this),a=w0(i,s.bind(r),n);return o(),a}function kC(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function vD(t,e,n=gi){const r=Uu(),i=pa(e),s=zl(e),o=MC(t,i),a=NL((l,c)=>{let f,p=gi,v;return PC(()=>{const m=t[i];ul(f,m)&&(f=m,c())}),{get(){return l(),n.get?n.get(f):f},set(m){const C=n.set?n.set(m):m;if(!ul(C,f)&&!(p!==gi&&ul(m,p)))return;const S=r.vnode.props;S&&(e in S||i in S||s in S)&&(`onUpdate:${e}`in S||`onUpdate:${i}`in S||`onUpdate:${s}`in S)||(f=m,c()),r.emit(`update:${e}`,C),ul(m,C)&&ul(m,p)&&!ul(C,v)&&c(),p=m,v=C}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||gi:a,done:!1}:{done:!0}}}},a}const MC=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${pa(e)}Modifiers`]||t[`${zl(e)}Modifiers`];function yD(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||gi;let i=n;const s=e.startsWith("update:"),o=s&&MC(r,e.slice(7));o&&(o.trim&&(i=n.map(f=>is(f)?f.trim():f)),o.number&&(i=n.map(gv)));let a,l=r[a=Lg(e)]||r[a=Lg(pa(e))];!l&&s&&(l=r[a=Lg(zl(e))]),l&&ju(l,t,6,i);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,ju(c,t,6,i)}}function AC(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!_r(t)){const l=c=>{const f=AC(c,e,!0);f&&(a=!0,Yi(o,f))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(ji(t)&&r.set(t,null),null):(Zn(s)?s.forEach(l=>o[l]=null):Yi(o,s),ji(t)&&r.set(t,o),o)}function my(t,e){return!t||!y0(e)?!1:(e=e.slice(2).replace(/Once$/,""),Mi(t,e[0].toLowerCase()+e.slice(1))||Mi(t,zl(e))||Mi(t,e))}function Um(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:f,props:p,data:v,setupState:m,ctx:C,inheritAttrs:S}=t,I=Jg(t);let N,T;try{if(n.shapeFlag&4){const W=i||r,X=W;N=jl(c.call(X,W,f,p,m,v,C)),T=a}else{const W=e;N=jl(W.length>1?W(p,{attrs:a,slots:o,emit:l}):W(p,null)),T=e.props?a:_D(a)}}catch(W){Mg.length=0,gd(W,t,1),N=Kr(ko)}let j=N;if(T&&S!==!1){const W=Object.keys(T),{shapeFlag:X}=j;W.length&&X&7&&(s&&W.some(Vb)&&(T=wD(T,s)),j=Zc(j,T,!1,!0))}return n.dirs&&(j=Zc(j,null,!1,!0),j.dirs=j.dirs?j.dirs.concat(n.dirs):n.dirs),n.transition&&Ah(j,n.transition),N=j,Jg(I),N}function bD(t,e=!0){let n;for(let r=0;r<t.length;r++){const i=t[r];if(Th(i)){if(i.type!==ko||i.children==="v-if"){if(n)return;n=i}}else return}return n}const _D=t=>{let e;for(const n in t)(n==="class"||n==="style"||y0(n))&&((e||(e={}))[n]=t[n]);return e},wD=(t,e)=>{const n={};for(const r in t)(!Vb(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function xD(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Tx(r,o,c):!!o;if(l&8){const f=e.dynamicProps;for(let p=0;p<f.length;p++){const v=f[p];if(o[v]!==r[v]&&!my(c,v))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Tx(r,o,c):!0:!!o;return!1}function Tx(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!my(n,s))return!0}return!1}function vy({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Lv=t=>t.__isSuspense;let T2=0;const LD={name:"Suspense",__isSuspense:!0,process(t,e,n,r,i,s,o,a,l,c){if(t==null)SD(e,n,r,i,s,o,a,l,c);else{if(s&&s.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}ED(t,e,n,r,i,o,a,l,c)}},hydrate:PD,normalize:kD},CD=LD;function n0(t,e){const n=t.props&&t.props[e];_r(n)&&n()}function SD(t,e,n,r,i,s,o,a,l){const{p:c,o:{createElement:f}}=l,p=f("div"),v=t.suspense=TC(t,i,r,e,p,n,s,o,a,l);c(null,v.pendingBranch=t.ssContent,p,null,r,v,s,o),v.deps>0?(n0(t,"onPending"),n0(t,"onFallback"),c(null,t.ssFallback,e,n,r,null,s,o),up(v,t.ssFallback)):v.resolve(!1,!0)}function ED(t,e,n,r,i,s,o,a,{p:l,um:c,o:{createElement:f}}){const p=e.suspense=t.suspense;p.vnode=e,e.el=t.el;const v=e.ssContent,m=e.ssFallback,{activeBranch:C,pendingBranch:S,isInFallback:I,isHydrating:N}=p;if(S)p.pendingBranch=v,cc(v,S)?(l(S,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0?p.resolve():I&&(N||(l(C,m,n,r,i,null,s,o,a),up(p,m)))):(p.pendingId=T2++,N?(p.isHydrating=!1,p.activeBranch=S):c(S,i,p),p.deps=0,p.effects.length=0,p.hiddenContainer=f("div"),I?(l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0?p.resolve():(l(C,m,n,r,i,null,s,o,a),up(p,m))):C&&cc(v,C)?(l(C,v,n,r,i,p,s,o,a),p.resolve(!0)):(l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0&&p.resolve()));else if(C&&cc(v,C))l(C,v,n,r,i,p,s,o,a),up(p,v);else if(n0(e,"onPending"),p.pendingBranch=v,v.shapeFlag&512?p.pendingId=v.component.suspenseId:p.pendingId=T2++,l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0)p.resolve();else{const{timeout:T,pendingId:j}=p;T>0?setTimeout(()=>{p.pendingId===j&&p.fallback(m)},T):T===0&&p.fallback(m)}}function TC(t,e,n,r,i,s,o,a,l,c,f=!1){const{p,m:v,um:m,n:C,o:{parentNode:S,remove:I}}=c;let N;const T=MD(t);T&&e&&e.pendingBranch&&(N=e.pendingId,e.deps++);const j=t.props?mv(t.props.timeout):void 0,W=s,X={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:i,deps:0,pendingId:T2++,timeout:typeof j=="number"?j:-1,activeBranch:null,pendingBranch:null,isInFallback:!f,isHydrating:f,isUnmounted:!1,effects:[],resolve(ce=!1,he=!1){const{vnode:O,activeBranch:B,pendingBranch:q,pendingId:F,effects:R,parentComponent:K,container:Z}=X;let Y=!1;X.isHydrating?X.isHydrating=!1:ce||(Y=B&&q.transition&&q.transition.mode==="out-in",Y&&(B.transition.afterLeave=()=>{F===X.pendingId&&(v(q,Z,s===W?C(B):s,0),Zg(R))}),B&&(S(B.el)===Z&&(s=C(B)),m(B,K,X,!0)),Y||v(q,Z,s,0)),up(X,q),X.pendingBranch=null,X.isInFallback=!1;let k=X.parent,U=!1;for(;k;){if(k.pendingBranch){k.effects.push(...R),U=!0;break}k=k.parent}!U&&!Y&&Zg(R),X.effects=[],T&&e&&e.pendingBranch&&N===e.pendingId&&(e.deps--,e.deps===0&&!he&&e.resolve()),n0(O,"onResolve")},fallback(ce){if(!X.pendingBranch)return;const{vnode:he,activeBranch:O,parentComponent:B,container:q,namespace:F}=X;n0(he,"onFallback");const R=C(O),K=()=>{X.isInFallback&&(p(null,ce,q,R,B,null,F,a,l),up(X,ce))},Z=ce.transition&&ce.transition.mode==="out-in";Z&&(O.transition.afterLeave=K),X.isInFallback=!0,m(O,B,null,!0),Z||K()},move(ce,he,O){X.activeBranch&&v(X.activeBranch,ce,he,O),X.container=ce},next(){return X.activeBranch&&C(X.activeBranch)},registerDep(ce,he,O){const B=!!X.pendingBranch;B&&X.deps++;const q=ce.vnode.el;ce.asyncDep.catch(F=>{gd(F,ce,0)}).then(F=>{if(ce.isUnmounted||X.isUnmounted||X.pendingId!==ce.suspenseId)return;ce.asyncResolved=!0;const{vnode:R}=ce;N2(ce,F,!1),q&&(R.el=q);const K=!q&&ce.subTree.el;he(ce,R,S(q||ce.subTree.el),q?null:C(ce.subTree),X,o,O),K&&I(K),vy(ce,R.el),B&&--X.deps===0&&X.resolve()})},unmount(ce,he){X.isUnmounted=!0,X.activeBranch&&m(X.activeBranch,n,ce,he),X.pendingBranch&&m(X.pendingBranch,n,ce,he)}};return X}function PD(t,e,n,r,i,s,o,a,l){const c=e.suspense=TC(e,r,n,t.parentNode,document.createElement("div"),null,i,s,o,a,!0),f=l(t,c.pendingBranch=e.ssContent,n,c,s,o);return c.deps===0&&c.resolve(!1,!0),f}function kD(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=Ox(r?n.default:n),t.ssFallback=r?Ox(n.fallback):Kr(ko)}function Ox(t){let e;if(_r(t)){const n=ld&&t._c;n&&(t._d=!1,Me()),t=t(),n&&(t._d=!0,e=Ua,DC())}return Zn(t)&&(t=bD(t)),t=jl(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function OC(t,e){e&&e.pendingBranch?Zn(t)?e.effects.push(...t):e.effects.push(t):Zg(t)}function up(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let i=e.el;for(;!i&&e.component;)e=e.component.subTree,i=e.el;n.el=i,r&&r.subTree===n&&(r.vnode.el=i,vy(r,i))}function MD(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const gn=Symbol.for("v-fgt"),df=Symbol.for("v-txt"),ko=Symbol.for("v-cmt"),nd=Symbol.for("v-stc"),Mg=[];let Ua=null;function Me(t=!1){Mg.push(Ua=t?null:[])}function DC(){Mg.pop(),Ua=Mg[Mg.length-1]||null}let ld=1;function O2(t,e=!1){ld+=t,t<0&&Ua&&e&&(Ua.hasOnce=!0)}function IC(t){return t.dynamicChildren=ld>0?Ua||ip:null,DC(),ld>0&&Ua&&Ua.push(t),t}function De(t,e,n,r,i,s){return IC(E(t,e,n,r,i,s,!0))}function ho(t,e,n,r,i){return IC(Kr(t,e,n,r,i,!0))}function Th(t){return t?t.__v_isVNode===!0:!1}function cc(t,e){return t.type===e.type&&t.key===e.key}function AD(t){}const NC=({key:t})=>t??null,$m=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?is(t)||js(t)||_r(t)?{i:No,r:t,k:e,f:!!n}:t:null);function E(t,e=null,n=null,r=0,i=null,s=t===gn?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&NC(e),ref:e&&$m(e),scopeId:fy,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:No};return a?(m_(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=is(n)?8:16),ld>0&&!o&&Ua&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Ua.push(l),l}const Kr=TD;function TD(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===sC)&&(t=ko),Th(t)){const a=Zc(t,e,!0);return n&&m_(a,n),ld>0&&!s&&Ua&&(a.shapeFlag&6?Ua[Ua.indexOf(t)]=a:Ua.push(a)),a.patchFlag=-2,a}if(FD(t)&&(t=t.__vccOpts),e){e=BC(e);let{class:a,style:l}=e;a&&!is(a)&&(e.class=bi(a)),ji(l)&&(cy(l)&&!Zn(l)&&(l=Yi({},l)),e.style=Vl(l))}const o=is(t)?1:Lv(t)?128:HL(t)?64:ji(t)?4:_r(t)?2:0;return E(t,e,n,r,i,o,s,!0)}function BC(t){return t?cy(t)||dC(t)?Yi({},t):t:null}function Zc(t,e,n=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=t,c=e?RC(i||{},e):i,f={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&NC(c),ref:e&&e.ref?n&&s?Zn(s)?s.concat($m(e)):[s,$m(e)]:$m(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==gn?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Zc(t.ssContent),ssFallback:t.ssFallback&&Zc(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Ah(f,l.clone(f)),f}function Mr(t=" ",e=0){return Kr(df,null,t,e)}function dl(t,e){const n=Kr(nd,null,t);return n.staticCount=e,n}function Ht(t="",e=!1){return e?(Me(),ho(ko,null,t)):Kr(ko,null,t)}function jl(t){return t==null||typeof t=="boolean"?Kr(ko):Zn(t)?Kr(gn,null,t.slice()):Th(t)?tf(t):Kr(df,null,String(t))}function tf(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Zc(t)}function m_(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Zn(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),m_(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!dC(e)?e._ctx=No:i===3&&No&&(No.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else _r(e)?(e={default:e,_ctx:No},n=32):(e=String(e),r&64?(n=16,e=[Mr(e)]):n=8);t.children=e,t.shapeFlag|=n}function RC(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=bi([e.class,r.class]));else if(i==="style")e.style=Vl([e.style,r.style]);else if(y0(i)){const s=e[i],o=r[i];o&&s!==o&&!(Zn(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Bl(t,e,n,r=null){ju(t,e,7,[n,r])}const OD=uC();let DD=0;function FC(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||OD,s={uid:DD++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new qb(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:gC(r,i),emitsOptions:AC(r,i),emit:null,emitted:null,propsDefaults:gi,inheritAttrs:r.inheritAttrs,ctx:gi,data:gi,props:gi,attrs:gi,slots:gi,refs:gi,setupState:gi,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=yD.bind(null,s),t.ce&&t.ce(s),s}let Io=null;const Uu=()=>Io||No;let Cv,D2;{const t=iy(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};Cv=e("__VUE_INSTANCE_SETTERS__",n=>Io=n),D2=e("__VUE_SSR_SETTERS__",n=>mp=n)}const ud=t=>{const e=Io;return Cv(t),t.scope.on(),()=>{t.scope.off(),Cv(e)}},I2=()=>{Io&&Io.scope.off(),Cv(null)};function jC(t){return t.vnode.shapeFlag&4}let mp=!1;function zC(t,e=!1,n=!1){e&&D2(e);const{props:r,children:i}=t.vnode,s=jC(t);lD(t,r,s,e),fD(t,i,n);const o=s?ID(t,e):void 0;return e&&D2(!1),o}function ID(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,P2);const{setup:r}=n;if(r){xf();const i=t.setupContext=r.length>1?$C(t):null,s=ud(t),o=kp(r,t,0,[t.props,i]),a=Gb(o);if(Lf(),s(),(a||t.sp)&&!ff(t)&&a_(t),a){if(o.then(I2,I2),e)return o.then(l=>{N2(t,l,e)}).catch(l=>{gd(l,t,0)});t.asyncDep=o}else N2(t,o,e)}else UC(t,e)}function N2(t,e,n){_r(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ji(e)&&(t.setupState=n_(e)),UC(t,n)}let Sv,B2;function ND(t){Sv=t,B2=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,UO))}}const BD=()=>!Sv;function UC(t,e,n){const r=t.type;if(!t.render){if(!e&&Sv&&!r.render){const i=r.template||d_(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=Yi(Yi({isCustomElement:s,delimiters:a},o),l);r.render=Sv(i,c)}}t.render=r.render||Bu,B2&&B2(t)}{const i=ud(t);xf();try{tD(t)}finally{Lf(),i()}}}const RD={get(t,e){return Ba(t,"get",""),t[e]}};function $C(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,RD),slots:t.slots,emit:t.emit,expose:e}}function x0(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(n_(hy(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Pg)return Pg[n](t)},has(e,n){return n in e||n in Pg}})):t.proxy}function R2(t,e=!0){return _r(t)?t.displayName||t.name:t.name||e&&t.__name}function FD(t){return _r(t)&&"__vccOpts"in t}const Hn=(t,e)=>tO(t,e,mp);function yy(t,e,n){const r=arguments.length;return r===2?ji(e)&&!Zn(e)?Th(e)?Kr(t,null,[e]):Kr(t,e):Kr(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Th(n)&&(n=[n]),Kr(t,e,n))}function jD(){}function zD(t,e,n,r){const i=n[r];if(i&&VC(i,t))return i;const s=e();return s.memo=t.slice(),s.cacheIndex=r,n[r]=s}function VC(t,e){const n=t.memo;if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(ul(n[r],e[r]))return!1;return ld>0&&Ua&&Ua.push(t),!0}const HC="3.5.13",UD=Bu,$D=cO,VD=Kd,HD=$L,GD={createComponentInstance:FC,setupComponent:zC,renderComponentRoot:Um,setCurrentRenderingInstance:Jg,isVNode:Th,normalizeVNode:jl,getComponentPublicInstance:x0,ensureValidVNode:f_,pushWarningContext:oO,popWarningContext:aO},WD=GD,qD=null,YD=null,KD=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let F2;const Dx=typeof window<"u"&&window.trustedTypes;if(Dx)try{F2=Dx.createPolicy("vue",{createHTML:t=>t})}catch{}const GC=F2?t=>F2.createHTML(t):t=>t,ZD="http://www.w3.org/2000/svg",XD="http://www.w3.org/1998/Math/MathML",_h=typeof document<"u"?document:null,Ix=_h&&_h.createElement("template"),JD={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?_h.createElementNS(ZD,t):e==="mathml"?_h.createElementNS(XD,t):n?_h.createElement(t,{is:n}):_h.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>_h.createTextNode(t),createComment:t=>_h.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>_h.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{Ix.innerHTML=GC(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=Ix.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Vh="transition",Up="animation",vp=Symbol("_vtc"),WC={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},qC=Yi({},o_,WC),QD=t=>(t.displayName="Transition",t.props=qC,t),j2=QD((t,{slots:e})=>yy(KL,YC(t),e)),Rf=(t,e=[])=>{Zn(t)?t.forEach(n=>n(...e)):t&&t(...e)},Nx=t=>t?Zn(t)?t.some(e=>e.length>1):t.length>1:!1;function YC(t){const e={};for(const R in t)R in WC||(e[R]=t[R]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:f=a,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:v=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,C=eI(i),S=C&&C[0],I=C&&C[1],{onBeforeEnter:N,onEnter:T,onEnterCancelled:j,onLeave:W,onLeaveCancelled:X,onBeforeAppear:ce=N,onAppear:he=T,onAppearCancelled:O=j}=e,B=(R,K,Z,Y)=>{R._enterCancelled=Y,Zh(R,K?f:a),Zh(R,K?c:o),Z&&Z()},q=(R,K)=>{R._isLeaving=!1,Zh(R,p),Zh(R,m),Zh(R,v),K&&K()},F=R=>(K,Z)=>{const Y=R?he:T,k=()=>B(K,R,Z);Rf(Y,[K,k]),Bx(()=>{Zh(K,R?l:s),Dc(K,R?f:a),Nx(Y)||Rx(K,r,S,k)})};return Yi(e,{onBeforeEnter(R){Rf(N,[R]),Dc(R,s),Dc(R,o)},onBeforeAppear(R){Rf(ce,[R]),Dc(R,l),Dc(R,c)},onEnter:F(!1),onAppear:F(!0),onLeave(R,K){R._isLeaving=!0;const Z=()=>q(R,K);Dc(R,p),R._enterCancelled?(Dc(R,v),z2()):(z2(),Dc(R,v)),Bx(()=>{R._isLeaving&&(Zh(R,p),Dc(R,m),Nx(W)||Rx(R,r,I,Z))}),Rf(W,[R,Z])},onEnterCancelled(R){B(R,!1,void 0,!0),Rf(j,[R])},onAppearCancelled(R){B(R,!0,void 0,!0),Rf(O,[R])},onLeaveCancelled(R){q(R),Rf(X,[R])}})}function eI(t){if(t==null)return null;if(ji(t))return[C1(t.enter),C1(t.leave)];{const e=C1(t);return[e,e]}}function C1(t){return mv(t)}function Dc(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[vp]||(t[vp]=new Set)).add(e)}function Zh(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[vp];n&&(n.delete(e),n.size||(t[vp]=void 0))}function Bx(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let tI=0;function Rx(t,e,n,r){const i=t._endId=++tI,s=()=>{i===t._endId&&r()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=KC(t,e);if(!o)return r();const c=o+"end";let f=0;const p=()=>{t.removeEventListener(c,v),s()},v=m=>{m.target===t&&++f>=l&&p()};setTimeout(()=>{f<l&&p()},a+1),t.addEventListener(c,v)}function KC(t,e){const n=window.getComputedStyle(t),r=C=>(n[C]||"").split(", "),i=r(`${Vh}Delay`),s=r(`${Vh}Duration`),o=Fx(i,s),a=r(`${Up}Delay`),l=r(`${Up}Duration`),c=Fx(a,l);let f=null,p=0,v=0;e===Vh?o>0&&(f=Vh,p=o,v=s.length):e===Up?c>0&&(f=Up,p=c,v=l.length):(p=Math.max(o,c),f=p>0?o>c?Vh:Up:null,v=f?f===Vh?s.length:l.length:0);const m=f===Vh&&/\b(transform|all)(,|$)/.test(r(`${Vh}Property`).toString());return{type:f,timeout:p,propCount:v,hasTransform:m}}function Fx(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>jx(n)+jx(t[r])))}function jx(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function z2(){return document.body.offsetHeight}function nI(t,e,n){const r=t[vp];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Ev=Symbol("_vod"),ZC=Symbol("_vsh"),v_={beforeMount(t,{value:e},{transition:n}){t[Ev]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):$p(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),$p(t,!0),r.enter(t)):r.leave(t,()=>{$p(t,!1)}):$p(t,e))},beforeUnmount(t,{value:e}){$p(t,e)}};function $p(t,e){t.style.display=e?t[Ev]:"none",t[ZC]=!e}function rI(){v_.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const XC=Symbol("");function iI(t){const e=Uu();if(!e)return;const n=e.ut=(i=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(s=>Pv(s,i))},r=()=>{const i=t(e.proxy);e.ce?Pv(e.ce,i):U2(e.subTree,i),n(i)};l_(()=>{Zg(r)}),zs(()=>{li(r,Bu,{flush:"post"});const i=new MutationObserver(r);i.observe(e.subTree.el.parentNode,{childList:!0}),Ru(()=>i.disconnect())})}function U2(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{U2(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)Pv(t.el,e);else if(t.type===gn)t.children.forEach(n=>U2(n,e));else if(t.type===nd){let{el:n,anchor:r}=t;for(;n&&(Pv(n,e),n!==r);)n=n.nextSibling}}function Pv(t,e){if(t.nodeType===1){const n=t.style;let r="";for(const i in e)n.setProperty(`--${i}`,e[i]),r+=`--${i}: ${e[i]};`;n[XC]=r}}const sI=/(^|;)\s*display\s*:/;function oI(t,e,n){const r=t.style,i=is(n);let s=!1;if(n&&!i){if(e)if(is(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Vm(r,a,"")}else for(const o in e)n[o]==null&&Vm(r,o,"");for(const o in n)o==="display"&&(s=!0),Vm(r,o,n[o])}else if(i){if(e!==n){const o=r[XC];o&&(n+=";"+o),r.cssText=n,s=sI.test(n)}}else e&&t.removeAttribute("style");Ev in t&&(t[Ev]=s?r.display:"",t[ZC]&&(r.display="none"))}const zx=/\s*!important$/;function Vm(t,e,n){if(Zn(n))n.forEach(r=>Vm(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=aI(t,e);zx.test(n)?t.setProperty(zl(r),n.replace(zx,""),"important"):t[r]=n}}const Ux=["Webkit","Moz","ms"],S1={};function aI(t,e){const n=S1[e];if(n)return n;let r=pa(e);if(r!=="filter"&&r in t)return S1[e]=r;r=b0(r);for(let i=0;i<Ux.length;i++){const s=Ux[i]+r;if(s in t)return S1[e]=s}return e}const $x="http://www.w3.org/1999/xlink";function Vx(t,e,n,r,i,s=x8(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS($x,e.slice(6,e.length)):t.setAttributeNS($x,e,n):n==null||s&&!gL(n)?t.removeAttribute(e):t.setAttribute(e,s?"":gc(n)?String(n):n)}function Hx(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?GC(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=gL(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(i||e)}function Ch(t,e,n,r){t.addEventListener(e,n,r)}function lI(t,e,n,r){t.removeEventListener(e,n,r)}const Gx=Symbol("_vei");function uI(t,e,n,r,i=null){const s=t[Gx]||(t[Gx]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=cI(e);if(r){const c=s[e]=dI(r,i);Ch(t,a,c,l)}else o&&(lI(t,a,o,l),s[e]=void 0)}}const Wx=/(?:Once|Passive|Capture)$/;function cI(t){let e;if(Wx.test(t)){e={};let r;for(;r=t.match(Wx);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):zl(t.slice(2)),e]}let E1=0;const hI=Promise.resolve(),fI=()=>E1||(hI.then(()=>E1=0),E1=Date.now());function dI(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;ju(pI(r,n.value),e,5,[r])};return n.value=t,n.attached=fI(),n}function pI(t,e){if(Zn(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const qx=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,gI=(t,e,n,r,i,s)=>{const o=i==="svg";e==="class"?nI(t,r,o):e==="style"?oI(t,n,r):y0(e)?Vb(e)||uI(t,e,n,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):mI(t,e,r,o))?(Hx(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Vx(t,e,r,o,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!is(r))?Hx(t,pa(e),r,s,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Vx(t,e,r,o))};function mI(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&qx(e)&&_r(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return qx(e)&&is(n)?!1:e in t}const Yx={};/*! #__NO_SIDE_EFFECTS__ */function JC(t,e,n){const r=hs(t,e);ny(r)&&Yi(r,e);class i extends by{constructor(o){super(r,o,n)}}return i.def=r,i}/*! #__NO_SIDE_EFFECTS__ */const vI=(t,e)=>JC(t,e,lS),yI=typeof HTMLElement<"u"?HTMLElement:class{};class by extends yI{constructor(e,n={},r=Mv){super(),this._def=e,this._props=n,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==Mv?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof by){this._parent=e;break}this._instance||(this._resolved?(this._setParent(),this._update()):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._instance.provides=e._instance.provides)}disconnectedCallback(){this._connected=!1,fl(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const i of r)this._setAttr(i.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(r,i=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:s,styles:o}=r;let a;if(s&&!Zn(s))for(const l in s){const c=s[l];(c===Number||c&&c.type===Number)&&(l in this._props&&(this._props[l]=mv(this._props[l])),(a||(a=Object.create(null)))[pa(l)]=!0)}this._numberProps=a,i&&this._resolveProps(r),this.shadowRoot&&this._applyStyles(o),this._mount(r)},n=this._def.__asyncLoader;n?this._pendingResolve=n().then(r=>e(this._def=r,!0)):e(this._def)}_mount(e){this._app=this._createApp(e),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const n=this._instance&&this._instance.exposed;if(n)for(const r in n)Mi(this,r)||Object.defineProperty(this,r,{get:()=>dn(n[r])})}_resolveProps(e){const{props:n}=e,r=Zn(n)?n:Object.keys(n||{});for(const i of Object.keys(this))i[0]!=="_"&&r.includes(i)&&this._setProp(i,this[i]);for(const i of r.map(pa))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(s){this._setProp(i,s,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const n=this.hasAttribute(e);let r=n?this.getAttribute(e):Yx;const i=pa(e);n&&this._numberProps&&this._numberProps[i]&&(r=mv(r)),this._setProp(i,r,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,n,r=!0,i=!1){if(n!==this._props[e]&&(n===Yx?delete this._props[e]:(this._props[e]=n,e==="key"&&this._app&&(this._app._ceVNode.key=n)),i&&this._instance&&this._update(),r)){const s=this._ob;s&&s.disconnect(),n===!0?this.setAttribute(zl(e),""):typeof n=="string"||typeof n=="number"?this.setAttribute(zl(e),n+""):n||this.removeAttribute(zl(e)),s&&s.observe(this,{attributes:!0})}}_update(){aS(this._createVNode(),this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const n=Kr(this._def,Yi(e,this._props));return this._instance||(n.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const i=(s,o)=>{this.dispatchEvent(new CustomEvent(s,ny(o[0])?Yi({detail:o},o[0]):{detail:o}))};r.emit=(s,...o)=>{i(s,o),zl(s)!==s&&i(zl(s),o)},this._setParent()}),n}_applyStyles(e,n){if(!e)return;if(n){if(n===this._def||this._styleChildren.has(n))return;this._styleChildren.add(n)}const r=this._nonce;for(let i=e.length-1;i>=0;i--){const s=document.createElement("style");r&&s.setAttribute("nonce",r),s.textContent=e[i],this.shadowRoot.prepend(s)}}_parseSlots(){const e=this._slots={};let n;for(;n=this.firstChild;){const r=n.nodeType===1&&n.getAttribute("slot")||"default";(e[r]||(e[r]=[])).push(n),this.removeChild(n)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),n=this._instance.type.__scopeId;for(let r=0;r<e.length;r++){const i=e[r],s=i.getAttribute("name")||"default",o=this._slots[s],a=i.parentNode;if(o)for(const l of o){if(n&&l.nodeType===1){const c=n+"-s",f=document.createTreeWalker(l,1);l.setAttribute(c,"");let p;for(;p=f.nextNode();)p.setAttribute(c,"")}a.insertBefore(l,i)}else for(;i.firstChild;)a.insertBefore(i.firstChild,i);a.removeChild(i)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function QC(t){const e=Uu(),n=e&&e.ce;return n||null}function bI(){const t=QC();return t&&t.shadowRoot}function _I(t="$style"){{const e=Uu();if(!e)return gi;const n=e.type.__cssModules;if(!n)return gi;const r=n[t];return r||gi}}const eS=new WeakMap,tS=new WeakMap,kv=Symbol("_moveCb"),Kx=Symbol("_enterCb"),wI=t=>(delete t.props.mode,t),xI=wI({name:"TransitionGroup",props:Yi({},qC,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Uu(),r=s_();let i,s;return gy(()=>{if(!i.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!PI(i[0].el,n.vnode.el,o))return;i.forEach(CI),i.forEach(SI);const a=i.filter(EI);z2(),a.forEach(l=>{const c=l.el,f=c.style;Dc(c,o),f.transform=f.webkitTransform=f.transitionDuration="";const p=c[kv]=v=>{v&&v.target!==c||(!v||/transform$/.test(v.propertyName))&&(c.removeEventListener("transitionend",p),c[kv]=null,Zh(c,o))};c.addEventListener("transitionend",p)})}),()=>{const o=pi(t),a=YC(o);let l=o.tag||gn;if(i=[],s)for(let c=0;c<s.length;c++){const f=s[c];f.el&&f.el instanceof Element&&(i.push(f),Ah(f,gp(f,a,r,n)),eS.set(f,f.el.getBoundingClientRect()))}s=e.default?dy(e.default()):[];for(let c=0;c<s.length;c++){const f=s[c];f.key!=null&&Ah(f,gp(f,a,r,n))}return Kr(l,null,s)}}}),LI=xI;function CI(t){const e=t.el;e[kv]&&e[kv](),e[Kx]&&e[Kx]()}function SI(t){tS.set(t,t.el.getBoundingClientRect())}function EI(t){const e=eS.get(t),n=tS.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",t}}function PI(t,e,n){const r=t.cloneNode(),i=t[vp];i&&i.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:o}=KC(r);return s.removeChild(r),o}const vf=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Zn(e)?n=>ap(e,n):e};function kI(t){t.target.composing=!0}function Zx(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Fu=Symbol("_assign"),ai={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[Fu]=vf(i);const s=r||i.props&&i.props.type==="number";Ch(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=gv(a)),t[Fu](a)}),n&&Ch(t,"change",()=>{t.value=t.value.trim()}),e||(Ch(t,"compositionstart",kI),Ch(t,"compositionend",Zx),Ch(t,"change",Zx))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:i,number:s}},o){if(t[Fu]=vf(o),t.composing)return;const a=(s||t.type==="number")&&!/^0\d/.test(t.value)?gv(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||i&&t.value.trim()===l)||(t.value=l))}},Rl={deep:!0,created(t,e,n){t[Fu]=vf(n),Ch(t,"change",()=>{const r=t._modelValue,i=yp(t),s=t.checked,o=t[Fu];if(Zn(r)){const a=sy(r,i),l=a!==-1;if(s&&!l)o(r.concat(i));else if(!s&&l){const c=[...r];c.splice(a,1),o(c)}}else if(pd(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(nS(t,s))})},mounted:Xx,beforeUpdate(t,e,n){t[Fu]=vf(n),Xx(t,e,n)}};function Xx(t,{value:e,oldValue:n},r){t._modelValue=e;let i;if(Zn(e))i=sy(e,r.props.value)>-1;else if(pd(e))i=e.has(r.props.value);else{if(e===n)return;i=gf(e,nS(t,!0))}t.checked!==i&&(t.checked=i)}const y_={created(t,{value:e},n){t.checked=gf(e,n.props.value),t[Fu]=vf(n),Ch(t,"change",()=>{t[Fu](yp(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[Fu]=vf(r),e!==n&&(t.checked=gf(e,r.props.value))}},Li={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=pd(e);Ch(t,"change",()=>{const s=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?gv(yp(o)):yp(o));t[Fu](t.multiple?i?new Set(s):s:s[0]),t._assigning=!0,fl(()=>{t._assigning=!1})}),t[Fu]=vf(r)},mounted(t,{value:e}){Jx(t,e)},beforeUpdate(t,e,n){t[Fu]=vf(n)},updated(t,{value:e}){t._assigning||Jx(t,e)}};function Jx(t,e){const n=t.multiple,r=Zn(e);if(!(n&&!r&&!pd(e))){for(let i=0,s=t.options.length;i<s;i++){const o=t.options[i],a=yp(o);if(n)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=sy(e,a)>-1}else o.selected=e.has(a);else if(gf(yp(o),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function yp(t){return"_value"in t?t._value:t.value}function nS(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const b_={created(t,e,n){um(t,e,n,null,"created")},mounted(t,e,n){um(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){um(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){um(t,e,n,r,"updated")}};function rS(t,e){switch(t){case"SELECT":return Li;case"TEXTAREA":return ai;default:switch(e){case"checkbox":return Rl;case"radio":return y_;default:return ai}}}function um(t,e,n,r,i){const o=rS(t.tagName,n.props&&n.props.type)[i];o&&o(t,e,n,r)}function MI(){ai.getSSRProps=({value:t})=>({value:t}),y_.getSSRProps=({value:t},e)=>{if(e.props&&gf(e.props.value,t))return{checked:!0}},Rl.getSSRProps=({value:t},e)=>{if(Zn(t)){if(e.props&&sy(t,e.props.value)>-1)return{checked:!0}}else if(pd(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},b_.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const n=rS(e.type.toUpperCase(),e.props&&e.props.type);if(n.getSSRProps)return n.getSSRProps(t,e)}}const AI=["ctrl","shift","alt","meta"],TI={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>AI.some(n=>t[`${n}Key`]&&!e.includes(n))},pl=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const a=TI[e[o]];if(a&&a(i,e))return}return t(i,...s)})},OI={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},DI=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const s=zl(i.key);if(e.some(o=>o===s||OI[o]===s))return t(i)})},iS=Yi({patchProp:gI},JD);let Ag,Qx=!1;function sS(){return Ag||(Ag=_C(iS))}function oS(){return Ag=Qx?Ag:wC(iS),Qx=!0,Ag}const aS=(...t)=>{sS().render(...t)},II=(...t)=>{oS().hydrate(...t)},Mv=(...t)=>{const e=sS().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=cS(r);if(!i)return;const s=e._component;!_r(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,uS(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e},lS=(...t)=>{const e=oS().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=cS(r);if(i)return n(i,!0,uS(i))},e};function uS(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function cS(t){return is(t)?document.querySelector(t):t}let e4=!1;const NI=()=>{e4||(e4=!0,MI(),rI())};/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const BI=()=>{},RI=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:KL,BaseTransitionPropsValidators:o_,Comment:ko,DeprecationTypes:KD,EffectScope:qb,ErrorCodes:uO,ErrorTypeStrings:$D,Fragment:gn,KeepAlive:IO,ReactiveEffect:qg,Static:nd,Suspense:CD,Teleport:Zd,Text:df,TrackOpTypes:nO,Transition:j2,TransitionGroup:LI,TriggerOpTypes:rO,VueElement:by,assertNumber:lO,callWithAsyncErrorHandling:ju,callWithErrorHandling:kp,camelize:pa,capitalize:b0,cloneVNode:Zc,compatUtils:YD,compile:BI,computed:Hn,createApp:Mv,createBlock:ho,createCommentVNode:Ht,createElementBlock:De,createElementVNode:E,createHydrationRenderer:wC,createPropsRestProxy:QO,createRenderer:_C,createSSRApp:lS,createSlots:FO,createStaticVNode:dl,createTextVNode:Mr,createVNode:Kr,customRef:NL,defineAsyncComponent:OO,defineComponent:hs,defineCustomElement:JC,defineEmits:VO,defineExpose:HO,defineModel:qO,defineOptions:GO,defineProps:$O,defineSSRCustomElement:vI,defineSlots:WO,devtools:VD,effect:S8,effectScope:Yb,getCurrentInstance:Uu,getCurrentScope:Kb,getCurrentWatcher:iO,getTransitionRawChildren:dy,guardReactiveProps:BC,h:yy,handleError:gd,hasInjectionContext:cC,hydrate:II,hydrateOnIdle:EO,hydrateOnInteraction:AO,hydrateOnMediaQuery:MO,hydrateOnVisible:kO,initCustomFormatter:jD,initDirectivesForSSR:NI,inject:pu,isMemoSame:VC,isProxy:cy,isReactive:Wc,isReadonly:mf,isRef:js,isRuntimeOnly:BD,isShallow:du,isVNode:Th,markRaw:hy,mergeDefaults:XO,mergeModels:JO,mergeProps:RC,nextTick:fl,normalizeClass:bi,normalizeProps:_8,normalizeStyle:Vl,onActivated:XL,onBeforeMount:eC,onBeforeUnmount:Cf,onBeforeUpdate:l_,onDeactivated:JL,onErrorCaptured:iC,onMounted:zs,onRenderTracked:rC,onRenderTriggered:nC,onScopeDispose:yL,onServerPrefetch:tC,onUnmounted:Ru,onUpdated:gy,onWatcherCleanup:RL,openBlock:Me,popScopeId:pO,provide:kg,proxyRefs:n_,pushScopeId:dO,queuePostFlushCb:Zg,reactive:mu,readonly:e_,ref:bt,registerRuntimeCompiler:ND,render:aS,renderList:Vn,renderSlot:jO,resolveComponent:c_,resolveDirective:RO,resolveDynamicComponent:oC,resolveFilter:qD,resolveTransitionHooks:gp,setBlockTracking:O2,setDevtoolsHook:HD,setTransitionHooks:Ah,shallowReactive:Qb,shallowReadonly:G8,shallowRef:t_,ssrContextKey:SC,ssrUtils:WD,stop:E8,toDisplayString:At,toHandlerKey:Lg,toHandlers:zO,toRaw:pi,toRef:Q8,toRefs:r_,toValue:Y8,transformVNodeArgs:AD,triggerRef:q8,unref:dn,useAttrs:ZO,useCssModule:_I,useCssVars:iI,useHost:QC,useId:yO,useModel:vD,useSSRContext:EC,useShadowRoot:bI,useSlots:KO,useTemplateRef:bO,useTransitionState:s_,vModelCheckbox:Rl,vModelDynamic:b_,vModelRadio:y_,vModelSelect:Li,vModelText:ai,vShow:v_,version:HC,warn:UD,watch:li,watchEffect:t0,watchPostEffect:gD,watchSyncEffect:PC,withAsyncContext:eD,withCtx:Ul,withDefaults:YO,withDirectives:Dn,withKeys:DI,withMemo:zD,withModifiers:pl,withScopeId:gO},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let hS;const _y=t=>hS=t,fS=Symbol();function $2(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Tg;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Tg||(Tg={}));function FI(){const t=Yb(!0),e=t.run(()=>bt({}));let n=[],r=[];const i=hy({install(s){_y(i),i._a=s,s.provide(fS,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return this._a?n.push(s):r.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const dS=()=>{};function t4(t,e,n,r=dS){t.push(e);const i=()=>{const s=t.indexOf(e);s>-1&&(t.splice(s,1),r())};return!n&&Kb()&&yL(i),i}function Fd(t,...e){t.slice().forEach(n=>{n(...e)})}const jI=t=>t(),n4=Symbol(),P1=Symbol();function V2(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],i=t[n];$2(i)&&$2(r)&&t.hasOwnProperty(n)&&!js(r)&&!Wc(r)?t[n]=V2(i,r):t[n]=r}return t}const zI=Symbol();function UI(t){return!$2(t)||!t.hasOwnProperty(zI)}const{assign:Xh}=Object;function $I(t){return!!(js(t)&&t.effect)}function VI(t,e,n,r){const{state:i,actions:s,getters:o}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=i?i():{});const f=r_(n.state.value[t]);return Xh(f,s,Object.keys(o||{}).reduce((p,v)=>(p[v]=hy(Hn(()=>{_y(n);const m=n._s.get(t);return o[v].call(m,m)})),p),{}))}return l=pS(t,c,e,n,r,!0),l}function pS(t,e,n={},r,i,s){let o;const a=Xh({actions:{}},n),l={deep:!0};let c,f,p=[],v=[],m;const C=r.state.value[t];!s&&!C&&(r.state.value[t]={}),bt({});let S;function I(O){let B;c=f=!1,typeof O=="function"?(O(r.state.value[t]),B={type:Tg.patchFunction,storeId:t,events:m}):(V2(r.state.value[t],O),B={type:Tg.patchObject,payload:O,storeId:t,events:m});const q=S=Symbol();fl().then(()=>{S===q&&(c=!0)}),f=!0,Fd(p,B,r.state.value[t])}const N=s?function(){const{state:B}=n,q=B?B():{};this.$patch(F=>{Xh(F,q)})}:dS;function T(){o.stop(),p=[],v=[],r._s.delete(t)}const j=(O,B="")=>{if(n4 in O)return O[P1]=B,O;const q=function(){_y(r);const F=Array.from(arguments),R=[],K=[];function Z(U){R.push(U)}function Y(U){K.push(U)}Fd(v,{args:F,name:q[P1],store:X,after:Z,onError:Y});let k;try{k=O.apply(this&&this.$id===t?this:X,F)}catch(U){throw Fd(K,U),U}return k instanceof Promise?k.then(U=>(Fd(R,U),U)).catch(U=>(Fd(K,U),Promise.reject(U))):(Fd(R,k),k)};return q[n4]=!0,q[P1]=B,q},W={_p:r,$id:t,$onAction:t4.bind(null,v),$patch:I,$reset:N,$subscribe(O,B={}){const q=t4(p,O,B.detached,()=>F()),F=o.run(()=>li(()=>r.state.value[t],R=>{(B.flush==="sync"?f:c)&&O({storeId:t,type:Tg.direct,events:m},R)},Xh({},l,B)));return q},$dispose:T},X=mu(W);r._s.set(t,X);const he=(r._a&&r._a.runWithContext||jI)(()=>r._e.run(()=>(o=Yb()).run(()=>e({action:j}))));for(const O in he){const B=he[O];if(js(B)&&!$I(B)||Wc(B))s||(C&&UI(B)&&(js(B)?B.value=C[O]:V2(B,C[O])),r.state.value[t][O]=B);else if(typeof B=="function"){const q=j(B,O);he[O]=q,a.actions[O]=B}}return Xh(X,he),Xh(pi(X),he),Object.defineProperty(X,"$state",{get:()=>r.state.value[t],set:O=>{I(B=>{Xh(B,O)})}}),r._p.forEach(O=>{Xh(X,o.run(()=>O({store:X,app:r._a,pinia:r,options:a})))}),C&&s&&n.hydrate&&n.hydrate(X.$state,C),c=!0,f=!0,X}/*! #__NO_SIDE_EFFECTS__ */function Mp(t,e,n){let r,i;const s=typeof e=="function";typeof t=="string"?(r=t,i=s?n:e):(i=t,r=t.id);function o(a,l){const c=cC();return a=a||(c?pu(fS,null):null),a&&_y(a),a=hS,a._s.has(r)||(s?pS(r,e,i,a):VI(r,i,a)),a._s.get(r)}return o.$id=r,o}function gS(t,e){return function(){return t.apply(e,arguments)}}const{toString:HI}=Object.prototype,{getPrototypeOf:__}=Object,wy=(t=>e=>{const n=HI.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),vc=t=>(t=t.toLowerCase(),e=>wy(e)===t),xy=t=>e=>typeof e===t,{isArray:Ap}=Array,r0=xy("undefined");function GI(t){return t!==null&&!r0(t)&&t.constructor!==null&&!r0(t.constructor)&&gu(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const mS=vc("ArrayBuffer");function WI(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&mS(t.buffer),e}const qI=xy("string"),gu=xy("function"),vS=xy("number"),Ly=t=>t!==null&&typeof t=="object",YI=t=>t===!0||t===!1,Hm=t=>{if(wy(t)!=="object")return!1;const e=__(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},KI=vc("Date"),ZI=vc("File"),XI=vc("Blob"),JI=vc("FileList"),QI=t=>Ly(t)&&gu(t.pipe),e7=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||gu(t.append)&&((e=wy(t))==="formdata"||e==="object"&&gu(t.toString)&&t.toString()==="[object FormData]"))},t7=vc("URLSearchParams"),[n7,r7,i7,s7]=["ReadableStream","Request","Response","Headers"].map(vc),o7=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function L0(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Ap(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function yS(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Jf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,bS=t=>!r0(t)&&t!==Jf;function H2(){const{caseless:t}=bS(this)&&this||{},e={},n=(r,i)=>{const s=t&&yS(e,i)||i;Hm(e[s])&&Hm(r)?e[s]=H2(e[s],r):Hm(r)?e[s]=H2({},r):Ap(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&L0(arguments[r],n);return e}const a7=(t,e,n,{allOwnKeys:r}={})=>(L0(e,(i,s)=>{n&&gu(i)?t[s]=gS(i,n):t[s]=i},{allOwnKeys:r}),t),l7=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),u7=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},c7=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&__(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},h7=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},f7=t=>{if(!t)return null;if(Ap(t))return t;let e=t.length;if(!vS(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},d7=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&__(Uint8Array)),p7=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},g7=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},m7=vc("HTMLFormElement"),v7=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),r4=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),y7=vc("RegExp"),_S=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};L0(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},b7=t=>{_S(t,(e,n)=>{if(gu(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(gu(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},_7=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Ap(t)?r(t):r(String(t).split(e)),n},w7=()=>{},x7=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function L7(t){return!!(t&&gu(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const C7=t=>{const e=new Array(10),n=(r,i)=>{if(Ly(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Ap(r)?[]:{};return L0(r,(o,a)=>{const l=n(o,i+1);!r0(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},S7=vc("AsyncFunction"),E7=t=>t&&(Ly(t)||gu(t))&&gu(t.then)&&gu(t.catch),wS=((t,e)=>t?setImmediate:e?((n,r)=>(Jf.addEventListener("message",({source:i,data:s})=>{i===Jf&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Jf.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",gu(Jf.postMessage)),P7=typeof queueMicrotask<"u"?queueMicrotask.bind(Jf):typeof process<"u"&&process.nextTick||wS,Yt={isArray:Ap,isArrayBuffer:mS,isBuffer:GI,isFormData:e7,isArrayBufferView:WI,isString:qI,isNumber:vS,isBoolean:YI,isObject:Ly,isPlainObject:Hm,isReadableStream:n7,isRequest:r7,isResponse:i7,isHeaders:s7,isUndefined:r0,isDate:KI,isFile:ZI,isBlob:XI,isRegExp:y7,isFunction:gu,isStream:QI,isURLSearchParams:t7,isTypedArray:d7,isFileList:JI,forEach:L0,merge:H2,extend:a7,trim:o7,stripBOM:l7,inherits:u7,toFlatObject:c7,kindOf:wy,kindOfTest:vc,endsWith:h7,toArray:f7,forEachEntry:p7,matchAll:g7,isHTMLForm:m7,hasOwnProperty:r4,hasOwnProp:r4,reduceDescriptors:_S,freezeMethods:b7,toObjectSet:_7,toCamelCase:v7,noop:w7,toFiniteNumber:x7,findKey:yS,global:Jf,isContextDefined:bS,isSpecCompliantForm:L7,toJSONObject:C7,isAsyncFn:S7,isThenable:E7,setImmediate:wS,asap:P7};function zr(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Yt.inherits(zr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Yt.toJSONObject(this.config),code:this.code,status:this.status}}});const xS=zr.prototype,LS={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{LS[t]={value:t}});Object.defineProperties(zr,LS);Object.defineProperty(xS,"isAxiosError",{value:!0});zr.from=(t,e,n,r,i,s)=>{const o=Object.create(xS);return Yt.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),zr.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const k7=null;function G2(t){return Yt.isPlainObject(t)||Yt.isArray(t)}function CS(t){return Yt.endsWith(t,"[]")?t.slice(0,-2):t}function i4(t,e,n){return t?t.concat(e).map(function(i,s){return i=CS(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function M7(t){return Yt.isArray(t)&&!t.some(G2)}const A7=Yt.toFlatObject(Yt,{},null,function(e){return/^is[A-Z]/.test(e)});function Cy(t,e,n){if(!Yt.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Yt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,I){return!Yt.isUndefined(I[S])});const r=n.metaTokens,i=n.visitor||f,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Yt.isSpecCompliantForm(e);if(!Yt.isFunction(i))throw new TypeError("visitor must be a function");function c(C){if(C===null)return"";if(Yt.isDate(C))return C.toISOString();if(!l&&Yt.isBlob(C))throw new zr("Blob is not supported. Use a Buffer instead.");return Yt.isArrayBuffer(C)||Yt.isTypedArray(C)?l&&typeof Blob=="function"?new Blob([C]):Buffer.from(C):C}function f(C,S,I){let N=C;if(C&&!I&&typeof C=="object"){if(Yt.endsWith(S,"{}"))S=r?S:S.slice(0,-2),C=JSON.stringify(C);else if(Yt.isArray(C)&&M7(C)||(Yt.isFileList(C)||Yt.endsWith(S,"[]"))&&(N=Yt.toArray(C)))return S=CS(S),N.forEach(function(j,W){!(Yt.isUndefined(j)||j===null)&&e.append(o===!0?i4([S],W,s):o===null?S:S+"[]",c(j))}),!1}return G2(C)?!0:(e.append(i4(I,S,s),c(C)),!1)}const p=[],v=Object.assign(A7,{defaultVisitor:f,convertValue:c,isVisitable:G2});function m(C,S){if(!Yt.isUndefined(C)){if(p.indexOf(C)!==-1)throw Error("Circular reference detected in "+S.join("."));p.push(C),Yt.forEach(C,function(N,T){(!(Yt.isUndefined(N)||N===null)&&i.call(e,N,Yt.isString(T)?T.trim():T,S,v))===!0&&m(N,S?S.concat(T):[T])}),p.pop()}}if(!Yt.isObject(t))throw new TypeError("data must be an object");return m(t),e}function s4(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function w_(t,e){this._pairs=[],t&&Cy(t,this,e)}const SS=w_.prototype;SS.append=function(e,n){this._pairs.push([e,n])};SS.toString=function(e){const n=e?function(r){return e.call(this,r,s4)}:s4;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function T7(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ES(t,e,n){if(!e)return t;const r=n&&n.encode||T7;Yt.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=Yt.isURLSearchParams(e)?e.toString():new w_(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class o4{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Yt.forEach(this.handlers,function(r){r!==null&&e(r)})}}const PS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},O7=typeof URLSearchParams<"u"?URLSearchParams:w_,D7=typeof FormData<"u"?FormData:null,I7=typeof Blob<"u"?Blob:null,N7={isBrowser:!0,classes:{URLSearchParams:O7,FormData:D7,Blob:I7},protocols:["http","https","file","blob","url","data"]},x_=typeof window<"u"&&typeof document<"u",W2=typeof navigator=="object"&&navigator||void 0,B7=x_&&(!W2||["ReactNative","NativeScript","NS"].indexOf(W2.product)<0),R7=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",F7=x_&&window.location.href||"http://localhost",j7=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:x_,hasStandardBrowserEnv:B7,hasStandardBrowserWebWorkerEnv:R7,navigator:W2,origin:F7},Symbol.toStringTag,{value:"Module"})),Fa={...j7,...N7};function z7(t,e){return Cy(t,new Fa.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Fa.isNode&&Yt.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function U7(t){return Yt.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function $7(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function kS(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&Yt.isArray(i)?i.length:o,l?(Yt.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!Yt.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&Yt.isArray(i[o])&&(i[o]=$7(i[o])),!a)}if(Yt.isFormData(t)&&Yt.isFunction(t.entries)){const n={};return Yt.forEachEntry(t,(r,i)=>{e(U7(r),i,n,0)}),n}return null}function V7(t,e,n){if(Yt.isString(t))try{return(e||JSON.parse)(t),Yt.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const C0={transitional:PS,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Yt.isObject(e);if(s&&Yt.isHTMLForm(e)&&(e=new FormData(e)),Yt.isFormData(e))return i?JSON.stringify(kS(e)):e;if(Yt.isArrayBuffer(e)||Yt.isBuffer(e)||Yt.isStream(e)||Yt.isFile(e)||Yt.isBlob(e)||Yt.isReadableStream(e))return e;if(Yt.isArrayBufferView(e))return e.buffer;if(Yt.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return z7(e,this.formSerializer).toString();if((a=Yt.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Cy(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),V7(e)):e}],transformResponse:[function(e){const n=this.transitional||C0.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Yt.isResponse(e)||Yt.isReadableStream(e))return e;if(e&&Yt.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?zr.from(a,zr.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Fa.classes.FormData,Blob:Fa.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Yt.forEach(["delete","get","head","post","put","patch"],t=>{C0.headers[t]={}});const H7=Yt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),G7=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&H7[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},a4=Symbol("internals");function Vp(t){return t&&String(t).trim().toLowerCase()}function Gm(t){return t===!1||t==null?t:Yt.isArray(t)?t.map(Gm):String(t)}function W7(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const q7=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function k1(t,e,n,r,i){if(Yt.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Yt.isString(e)){if(Yt.isString(r))return e.indexOf(r)!==-1;if(Yt.isRegExp(r))return r.test(e)}}function Y7(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function K7(t,e){const n=Yt.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let Hl=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,c){const f=Vp(l);if(!f)throw new Error("header name must be a non-empty string");const p=Yt.findKey(i,f);(!p||i[p]===void 0||c===!0||c===void 0&&i[p]!==!1)&&(i[p||l]=Gm(a))}const o=(a,l)=>Yt.forEach(a,(c,f)=>s(c,f,l));if(Yt.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(Yt.isString(e)&&(e=e.trim())&&!q7(e))o(G7(e),n);else if(Yt.isHeaders(e))for(const[a,l]of e.entries())s(l,a,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=Vp(e),e){const r=Yt.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return W7(i);if(Yt.isFunction(n))return n.call(this,i,r);if(Yt.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Vp(e),e){const r=Yt.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||k1(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=Vp(o),o){const a=Yt.findKey(r,o);a&&(!n||k1(r,r[a],a,n))&&(delete r[a],i=!0)}}return Yt.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||k1(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return Yt.forEach(this,(i,s)=>{const o=Yt.findKey(r,s);if(o){n[o]=Gm(i),delete n[s];return}const a=e?Y7(s):String(s).trim();a!==s&&delete n[s],n[a]=Gm(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Yt.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Yt.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[a4]=this[a4]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Vp(o);r[a]||(K7(i,o),r[a]=!0)}return Yt.isArray(e)?e.forEach(s):s(e),this}};Hl.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Yt.reduceDescriptors(Hl.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Yt.freezeMethods(Hl);function M1(t,e){const n=this||C0,r=e||n,i=Hl.from(r.headers);let s=r.data;return Yt.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function MS(t){return!!(t&&t.__CANCEL__)}function Tp(t,e,n){zr.call(this,t??"canceled",zr.ERR_CANCELED,e,n),this.name="CanceledError"}Yt.inherits(Tp,zr,{__CANCEL__:!0});function AS(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new zr("Request failed with status code "+n.status,[zr.ERR_BAD_REQUEST,zr.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Z7(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function X7(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),f=r[s];o||(o=c),n[i]=l,r[i]=c;let p=s,v=0;for(;p!==i;)v+=n[p++],p=p%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const m=f&&c-f;return m?Math.round(v*1e3/m):void 0}}function J7(t,e){let n=0,r=1e3/e,i,s;const o=(c,f=Date.now())=>{n=f,i=null,s&&(clearTimeout(s),s=null),t.apply(null,c)};return[(...c)=>{const f=Date.now(),p=f-n;p>=r?o(c,f):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},r-p)))},()=>i&&o(i)]}const Av=(t,e,n=3)=>{let r=0;const i=X7(50,250);return J7(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,c=i(l),f=o<=a;r=o;const p={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&f?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(p)},n)},l4=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},u4=t=>(...e)=>Yt.asap(()=>t(...e)),Q7=Fa.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Fa.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Fa.origin),Fa.navigator&&/(msie|trident)/i.test(Fa.navigator.userAgent)):()=>!0,eN=Fa.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];Yt.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Yt.isString(r)&&o.push("path="+r),Yt.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function tN(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function nN(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function TS(t,e,n){let r=!tN(e);return t&&(r||n==!1)?nN(t,e):e}const c4=t=>t instanceof Hl?{...t}:t;function cd(t,e){e=e||{};const n={};function r(c,f,p,v){return Yt.isPlainObject(c)&&Yt.isPlainObject(f)?Yt.merge.call({caseless:v},c,f):Yt.isPlainObject(f)?Yt.merge({},f):Yt.isArray(f)?f.slice():f}function i(c,f,p,v){if(Yt.isUndefined(f)){if(!Yt.isUndefined(c))return r(void 0,c,p,v)}else return r(c,f,p,v)}function s(c,f){if(!Yt.isUndefined(f))return r(void 0,f)}function o(c,f){if(Yt.isUndefined(f)){if(!Yt.isUndefined(c))return r(void 0,c)}else return r(void 0,f)}function a(c,f,p){if(p in e)return r(c,f);if(p in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,f,p)=>i(c4(c),c4(f),p,!0)};return Yt.forEach(Object.keys(Object.assign({},t,e)),function(f){const p=l[f]||i,v=p(t[f],e[f],f);Yt.isUndefined(v)&&p!==a||(n[f]=v)}),n}const OS=t=>{const e=cd({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=Hl.from(o),e.url=ES(TS(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(Yt.isFormData(n)){if(Fa.hasStandardBrowserEnv||Fa.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...f]=l?l.split(";").map(p=>p.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...f].join("; "))}}if(Fa.hasStandardBrowserEnv&&(r&&Yt.isFunction(r)&&(r=r(e)),r||r!==!1&&Q7(e.url))){const c=i&&s&&eN.read(s);c&&o.set(i,c)}return e},rN=typeof XMLHttpRequest<"u",iN=rN&&function(t){return new Promise(function(n,r){const i=OS(t);let s=i.data;const o=Hl.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,f,p,v,m,C;function S(){m&&m(),C&&C(),i.cancelToken&&i.cancelToken.unsubscribe(f),i.signal&&i.signal.removeEventListener("abort",f)}let I=new XMLHttpRequest;I.open(i.method.toUpperCase(),i.url,!0),I.timeout=i.timeout;function N(){if(!I)return;const j=Hl.from("getAllResponseHeaders"in I&&I.getAllResponseHeaders()),X={data:!a||a==="text"||a==="json"?I.responseText:I.response,status:I.status,statusText:I.statusText,headers:j,config:t,request:I};AS(function(he){n(he),S()},function(he){r(he),S()},X),I=null}"onloadend"in I?I.onloadend=N:I.onreadystatechange=function(){!I||I.readyState!==4||I.status===0&&!(I.responseURL&&I.responseURL.indexOf("file:")===0)||setTimeout(N)},I.onabort=function(){I&&(r(new zr("Request aborted",zr.ECONNABORTED,t,I)),I=null)},I.onerror=function(){r(new zr("Network Error",zr.ERR_NETWORK,t,I)),I=null},I.ontimeout=function(){let W=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const X=i.transitional||PS;i.timeoutErrorMessage&&(W=i.timeoutErrorMessage),r(new zr(W,X.clarifyTimeoutError?zr.ETIMEDOUT:zr.ECONNABORTED,t,I)),I=null},s===void 0&&o.setContentType(null),"setRequestHeader"in I&&Yt.forEach(o.toJSON(),function(W,X){I.setRequestHeader(X,W)}),Yt.isUndefined(i.withCredentials)||(I.withCredentials=!!i.withCredentials),a&&a!=="json"&&(I.responseType=i.responseType),c&&([v,C]=Av(c,!0),I.addEventListener("progress",v)),l&&I.upload&&([p,m]=Av(l),I.upload.addEventListener("progress",p),I.upload.addEventListener("loadend",m)),(i.cancelToken||i.signal)&&(f=j=>{I&&(r(!j||j.type?new Tp(null,t,I):j),I.abort(),I=null)},i.cancelToken&&i.cancelToken.subscribe(f),i.signal&&(i.signal.aborted?f():i.signal.addEventListener("abort",f)));const T=Z7(i.url);if(T&&Fa.protocols.indexOf(T)===-1){r(new zr("Unsupported protocol "+T+":",zr.ERR_BAD_REQUEST,t));return}I.send(s||null)})},sN=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(c){if(!i){i=!0,a();const f=c instanceof Error?c:this.reason;r.abort(f instanceof zr?f:new Tp(f instanceof Error?f.message:f))}};let o=e&&setTimeout(()=>{o=null,s(new zr(`timeout ${e} of ms exceeded`,zr.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>Yt.asap(a),l}},oN=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},aN=async function*(t,e){for await(const n of lN(t))yield*oN(n,e)},lN=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},h4=(t,e,n,r)=>{const i=aN(t,e);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:f}=await i.next();if(c){a(),l.close();return}let p=f.byteLength;if(n){let v=s+=p;n(v)}l.enqueue(new Uint8Array(f))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},Sy=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",DS=Sy&&typeof ReadableStream=="function",uN=Sy&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),IS=(t,...e)=>{try{return!!t(...e)}catch{return!1}},cN=DS&&IS(()=>{let t=!1;const e=new Request(Fa.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),f4=64*1024,q2=DS&&IS(()=>Yt.isReadableStream(new Response("").body)),Tv={stream:q2&&(t=>t.body)};Sy&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Tv[e]&&(Tv[e]=Yt.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new zr(`Response type '${e}' is not supported`,zr.ERR_NOT_SUPPORT,r)})})})(new Response);const hN=async t=>{if(t==null)return 0;if(Yt.isBlob(t))return t.size;if(Yt.isSpecCompliantForm(t))return(await new Request(Fa.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Yt.isArrayBufferView(t)||Yt.isArrayBuffer(t))return t.byteLength;if(Yt.isURLSearchParams(t)&&(t=t+""),Yt.isString(t))return(await uN(t)).byteLength},fN=async(t,e)=>{const n=Yt.toFiniteNumber(t.getContentLength());return n??hN(e)},dN=Sy&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:f,withCredentials:p="same-origin",fetchOptions:v}=OS(t);c=c?(c+"").toLowerCase():"text";let m=sN([i,s&&s.toAbortSignal()],o),C;const S=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let I;try{if(l&&cN&&n!=="get"&&n!=="head"&&(I=await fN(f,r))!==0){let X=new Request(e,{method:"POST",body:r,duplex:"half"}),ce;if(Yt.isFormData(r)&&(ce=X.headers.get("content-type"))&&f.setContentType(ce),X.body){const[he,O]=l4(I,Av(u4(l)));r=h4(X.body,f4,he,O)}}Yt.isString(p)||(p=p?"include":"omit");const N="credentials"in Request.prototype;C=new Request(e,{...v,signal:m,method:n.toUpperCase(),headers:f.normalize().toJSON(),body:r,duplex:"half",credentials:N?p:void 0});let T=await fetch(C);const j=q2&&(c==="stream"||c==="response");if(q2&&(a||j&&S)){const X={};["status","statusText","headers"].forEach(B=>{X[B]=T[B]});const ce=Yt.toFiniteNumber(T.headers.get("content-length")),[he,O]=a&&l4(ce,Av(u4(a),!0))||[];T=new Response(h4(T.body,f4,he,()=>{O&&O(),S&&S()}),X)}c=c||"text";let W=await Tv[Yt.findKey(Tv,c)||"text"](T,t);return!j&&S&&S(),await new Promise((X,ce)=>{AS(X,ce,{data:W,headers:Hl.from(T.headers),status:T.status,statusText:T.statusText,config:t,request:C})})}catch(N){throw S&&S(),N&&N.name==="TypeError"&&/fetch/i.test(N.message)?Object.assign(new zr("Network Error",zr.ERR_NETWORK,t,C),{cause:N.cause||N}):zr.from(N,N&&N.code,t,C)}}),Y2={http:k7,xhr:iN,fetch:dN};Yt.forEach(Y2,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const d4=t=>`- ${t}`,pN=t=>Yt.isFunction(t)||t===null||t===!1,NS={getAdapter:t=>{t=Yt.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!pN(n)&&(r=Y2[(o=String(n)).toLowerCase()],r===void 0))throw new zr(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(d4).join(`
`):" "+d4(s[0]):"as no adapter specified";throw new zr("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Y2};function A1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Tp(null,t)}function p4(t){return A1(t),t.headers=Hl.from(t.headers),t.data=M1.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),NS.getAdapter(t.adapter||C0.adapter)(t).then(function(r){return A1(t),r.data=M1.call(t,t.transformResponse,r),r.headers=Hl.from(r.headers),r},function(r){return MS(r)||(A1(t),r&&r.response&&(r.response.data=M1.call(t,t.transformResponse,r.response),r.response.headers=Hl.from(r.response.headers))),Promise.reject(r)})}const BS="1.8.4",Ey={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Ey[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const g4={};Ey.transitional=function(e,n,r){function i(s,o){return"[Axios v"+BS+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new zr(i(o," has been removed"+(n?" in "+n:"")),zr.ERR_DEPRECATED);return n&&!g4[o]&&(g4[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};Ey.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function gN(t,e,n){if(typeof t!="object")throw new zr("options must be an object",zr.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new zr("option "+s+" must be "+l,zr.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new zr("Unknown option "+s,zr.ERR_BAD_OPTION)}}const Wm={assertOptions:gN,validators:Ey},Oc=Wm.validators;let rd=class{constructor(e){this.defaults=e,this.interceptors={request:new o4,response:new o4}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=cd(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&Wm.assertOptions(r,{silentJSONParsing:Oc.transitional(Oc.boolean),forcedJSONParsing:Oc.transitional(Oc.boolean),clarifyTimeoutError:Oc.transitional(Oc.boolean)},!1),i!=null&&(Yt.isFunction(i)?n.paramsSerializer={serialize:i}:Wm.assertOptions(i,{encode:Oc.function,serialize:Oc.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Wm.assertOptions(n,{baseUrl:Oc.spelling("baseURL"),withXsrfToken:Oc.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Yt.merge(s.common,s[n.method]);s&&Yt.forEach(["delete","get","head","post","put","patch","common"],C=>{delete s[C]}),n.headers=Hl.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(n)===!1||(l=l&&S.synchronous,a.unshift(S.fulfilled,S.rejected))});const c=[];this.interceptors.response.forEach(function(S){c.push(S.fulfilled,S.rejected)});let f,p=0,v;if(!l){const C=[p4.bind(this),void 0];for(C.unshift.apply(C,a),C.push.apply(C,c),v=C.length,f=Promise.resolve(n);p<v;)f=f.then(C[p++],C[p++]);return f}v=a.length;let m=n;for(p=0;p<v;){const C=a[p++],S=a[p++];try{m=C(m)}catch(I){S.call(this,I);break}}try{f=p4.call(this,m)}catch(C){return Promise.reject(C)}for(p=0,v=c.length;p<v;)f=f.then(c[p++],c[p++]);return f}getUri(e){e=cd(this.defaults,e);const n=TS(e.baseURL,e.url,e.allowAbsoluteUrls);return ES(n,e.params,e.paramsSerializer)}};Yt.forEach(["delete","get","head","options"],function(e){rd.prototype[e]=function(n,r){return this.request(cd(r||{},{method:e,url:n,data:(r||{}).data}))}});Yt.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(cd(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}rd.prototype[e]=n(),rd.prototype[e+"Form"]=n(!0)});let mN=class RS{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Tp(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new RS(function(i){e=i}),cancel:e}}};function vN(t){return function(n){return t.apply(null,n)}}function yN(t){return Yt.isObject(t)&&t.isAxiosError===!0}const K2={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(K2).forEach(([t,e])=>{K2[e]=t});function FS(t){const e=new rd(t),n=gS(rd.prototype.request,e);return Yt.extend(n,rd.prototype,e,{allOwnKeys:!0}),Yt.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return FS(cd(t,i))},n}const bo=FS(C0);bo.Axios=rd;bo.CanceledError=Tp;bo.CancelToken=mN;bo.isCancel=MS;bo.VERSION=BS;bo.toFormData=Cy;bo.AxiosError=zr;bo.Cancel=bo.CanceledError;bo.all=function(e){return Promise.all(e)};bo.spread=vN;bo.isAxiosError=yN;bo.mergeConfig=cd;bo.AxiosHeaders=Hl;bo.formToJSON=t=>kS(Yt.isHTMLForm(t)?new FormData(t):t);bo.getAdapter=NS.getAdapter;bo.HttpStatusCode=K2;bo.default=bo;const{Axios:Use,AxiosError:$se,CanceledError:Vse,isCancel:Hse,CancelToken:Gse,VERSION:Wse,all:qse,Cancel:Yse,isAxiosError:Kse,spread:Zse,toFormData:Xse,AxiosHeaders:Jse,HttpStatusCode:Qse,formToJSON:eoe,getAdapter:toe,mergeConfig:noe}=bo,En=bo.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});function jS(t){var r;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}En.interceptors.request.use(async t=>{try{const e=jS("access_token");return e&&(t.headers.Authorization=`Bearer ${e}`),t}catch{return t}},t=>Promise.reject(t));En.interceptors.response.use(t=>t,async t=>{var n,r;const e=t.config;try{if(((n=t.response)==null?void 0:n.status)===401&&!e._retry&&!((r=e.url)!=null&&r.includes("/token/refresh/"))){e._retry=!0;const i=eo();try{await i.refreshToken();const s=jS("access_token");if(s)return e.headers.Authorization=`Bearer ${s}`,En(e)}catch(s){return await i.logout(),window.location.pathname!=="/login"&&(window.location.href="/login"),Promise.reject(s)}}return Promise.reject(t)}catch(i){return Promise.reject(i)}});function bN(t){var n;const e=[];if((n=t.response)!=null&&n.data){const r=t.response.data;typeof r=="object"&&!Array.isArray(r)?Object.entries(r).forEach(([i,s])=>{Array.isArray(s)?s.forEach(o=>{e.push({field:i,message:o})}):typeof s=="string"&&e.push({field:i,message:s})}):typeof r=="string"?e.push({field:"non_field_error",message:r}):r.detail&&e.push({field:"non_field_error",message:r.detail})}else t.message&&e.push({field:"non_field_error",message:`Erreur de connexion: ${t.message}`});return e.length===0&&e.push({field:"non_field_error",message:"Une erreur inconnue s'est produite"}),e}async function qm(t){const e={role:t.role};t.entrepriseId&&(e.entreprise=t.entrepriseId),t.salarieId&&(e.salarie=t.salarieId),t.includeDetails&&(e.include_plans=!0),t.search&&(e.search=t.search);try{return(await da.getUsers(e)).data}catch(n){throw n}}const da={async getUsers(t={}){try{return await En.get("/users/",{params:t})}catch(e){throw e}},async getUser(t){return await En.get(`/users/${t}/`)},async createUser(t){return await En.post("/users/",t)},async updateUser(t,e){return await En.patch(`/users/${t}/`,e)},async deleteUser(t){return await En.delete(`/users/${t}/`)},async getEntreprises(){return await En.get("/users/",{params:{role:"ENTREPRISE"}})},async getSalaries(t){const e={role:"SALARIE"};return t&&(e.entreprise=t),await En.get("/users/",{params:e})},async getSalarieVisiteurs(t){return await En.get("/users/",{params:{role:"VISITEUR",salarie:t}})},async getEntrepriseVisiteurs(t){return await En.get("/users/",{params:{role:"VISITEUR",entreprise:t}})},async getUsersByHierarchy(t){const e={role:t.role};return t.entrepriseId&&(e.entreprise=t.entrepriseId),t.salarieId&&(e.salarie=t.salarieId),t.includeDetails&&(e.include_plans=!0),t.search&&(e.search=t.search),await En.get("/users/",{params:e})},async getEntrepriseSalaries(t){return await En.get("/users/",{params:{role:"SALARIE",entreprise:t}})},async getVisiteurs(t,e){const n={role:"VISITEUR"};return t&&(n.salarie=t),e&&(n.entreprise=e),await En.get("/users/",{params:n})},async assignEntrepriseToSalarie(t,e){return await En.patch(`/users/${t}/`,{entreprise:e})},async assignSalarieToVisiteur(t,e){return await En.patch(`/users/${t}/`,{salarie:e})},formatLogoFileName(t){var i;const e=new Date().getTime(),n=((i=t.name.split(".").pop())==null?void 0:i.toLowerCase())||"";return`${t.name.split(".")[0].toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}-${e}.${n}`},async uploadLogo(t){try{const e=new FormData,n=this.formatLogoFileName(t),r=new File([t],n,{type:t.type});return e.append("logo",r),await En.post("/users/upload_logo/",e,{headers:{"Content-Type":"multipart/form-data"}})}catch(e){throw e}}};async function T1(t,e=3,n=1e3,r=1e4){let i=0;for(;;)try{return await t()}catch(s){if(i++,i>=e)throw s;const o=Math.min(n*Math.pow(2,i-1),r),a=Math.random()*200;await new Promise(l=>setTimeout(l,o+a))}}const cm={async getPlans(){try{return await En.get("/plans/")}catch(t){throw t}},async createPlan(t){try{const e={...t,entreprise:t.entreprise?typeof t.entreprise=="object"&&"id"in t.entreprise?t.entreprise.id:Number(t.entreprise):null,salarie:t.salarie?typeof t.salarie=="object"&&"id"in t.salarie?t.salarie.id:Number(t.salarie):null,visiteur:t.visiteur?typeof t.visiteur=="object"&&"id"in t.visiteur?t.visiteur.id:Number(t.visiteur):null};return await En.post("/plans/",e)}catch(e){throw e}},async updatePlan(t,e){try{return await En.put(`/plans/${t}/`,e)}catch(n){throw n}},async deletePlan(t){try{return await En.delete(`/plans/${t}/`)}catch(e){throw e}},async getVisiteurPlans(t){return await En.get("/plans/",{params:{visiteur:t}})},async createPlanForVisiteur(t){return await En.post("/plans/",t)},async getEntreprisePlans(t){return await En.get("/plans/",{params:{entreprise:t}})},async getSalariePlans(t){return await En.get("/plans/",{params:{salarie:t}})},async createPlanForSalarie(t,e){const n={...t,salarie:e};return await En.post("/plans/",n)},async createPlanForEntreprise(t,e){const n={...t,entreprise:e};return await En.post("/plans/",n)}},Xo={async getNotes(t={}){try{return await En.get("/notes/",{params:t})}catch(e){throw console.error("Error getting notes:",e),e}},async getNotesByPlan(t){try{return await En.get("/notes/",{params:{plan:t}})}catch(e){throw console.error("Error getting notes for plan:",e),e}},async getNote(t){try{return await En.get(`/notes/${t}/`)}catch(e){throw console.error("Error getting note:",e),e}},async createNote(t){try{const e={...t};return e.location&&Object.keys(e.location).length===0&&delete e.location,await En.post("/notes/",e)}catch(e){throw console.error("Error creating note:",e),e}},async updateNote(t,e){try{const n=e.backendId||t,r={...e};r.location&&Object.keys(r.location).length===0&&delete r.location,e.column!==void 0?r.column=e.column:e.columnId!==void 0&&(r.column=e.columnId),delete r.columnId,delete r.column_id,delete r.column_details,delete r.backendId,delete r.leafletId;const i=r.enterprise_id;delete r.enterprise_name;const s=await En.patch(`/notes/${n}/`,r);return i!==void 0&&(s.data.enterprise_id=i),s}catch(n){throw console.error("[noteService][updateNote] Erreur lors de la mise  jour:",n),n}},async deleteNote(t){try{return await En.delete(`/notes/${t}/`)}catch(e){throw console.error("Error deleting note:",e),e}},async getComments(t){return await En.get(`/notes/${t}/comments/`)},async addComment(t,e){const n=typeof e=="string"?{text:e}:e;return await En.post(`/notes/${t}/comments/`,n)},async updateComment(t,e,n){return await En.patch(`/notes/${t}/comments/${e}/`,n)},async deleteComment(t,e){return await En.delete(`/notes/${t}/comments/${e}/`)},async getPhotos(t){return await En.get(`/notes/${t}/photos/`)},async addPhoto(t,e){return await En.post(`/notes/${t}/photos/`,e,{headers:{"Content-Type":"multipart/form-data"}})},async updatePhoto(t,e,n){return await En.patch(`/notes/${t}/photos/${e}/`,n)},async deletePhoto(t,e){return await En.delete(`/notes/${t}/photos/${e}/`)}},O1={async getDevices(t={}){try{return await T1(()=>En.get("/weather/devices/",{params:t}),3,1e3,1e4)}catch(e){throw console.error("Error getting weather devices:",e),e}},async getRealTimeData(t){try{const e=typeof t=="string"?{mac:t}:t;return await T1(()=>En.get("/weather/",{params:e}),3,1e3,1e4)}catch(e){throw console.error("Error getting real-time weather data:",e),e}},async getHistoryData(t){try{return await T1(()=>En.get("/weather/history/",{params:t}),3,1e3,1e4)}catch(e){throw console.error("Error getting weather history data:",e),e}}},hm={async getFilters(){try{return await En.get("/map-filters/")}catch(t){throw console.error("Error getting map filters:",t),t}},async getFilter(t){try{return await En.get(`/map-filters/${t}/`)}catch(e){throw console.error("Error getting map filter:",e),e}},async createFilter(t){try{return await En.post("/map-filters/",t)}catch(e){throw console.error("Error creating map filter:",e),e}},async updateFilter(t,e){try{return await En.patch(`/map-filters/${t}/`,e)}catch(n){throw console.error("Error updating map filter:",n),n}},async deleteFilter(t){try{return await En.delete(`/map-filters/${t}/`)}catch(e){throw console.error("Error deleting map filter:",e),e}}},Z2={async getGoogleMapsApiKey(){try{return await En.get("/settings/get_google_maps_api_key/")}catch(t){throw console.error("Error getting Google Maps API key:",t),t}},async setGoogleMapsApiKey(t){try{return await En.post("/settings/set_google_maps_api_key/",{key:t})}catch(e){throw console.error("Error setting Google Maps API key:",e),e}}};En.defaults.baseURL="/api";En.defaults.headers.common["Content-Type"]="application/json";En.defaults.withCredentials=!0;function i0(t){var r;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}En.interceptors.request.use(t=>{const e=i0("access_token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));En.interceptors.response.use(t=>t,async t=>{var r,i;const e=eo(),n=t.config;if(((r=t.response)==null?void 0:r.status)===401&&!n._retry&&!((i=n.url)!=null&&i.includes("/token/refresh/"))){n._retry=!0;try{if(!i0("access_token"))throw new Error("No token available");await e.refreshToken();const o=i0("access_token");if(o)return n.headers.Authorization=`Bearer ${o}`,En(n)}catch(s){console.error("Token refresh failed:",s),await e.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(t)});function _N(t,e,n=1){const r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);const i=`expires=${r.toUTCString()}`;document.cookie=`${t}=${e};${i};path=/;secure;samesite=Strict`}function hl(t){if(!t)return"-";const e=t.first_name||"",n=t.last_name?t.last_name.toUpperCase():"",r=`${e} ${n}`.trim(),i=t.company_name||t.role||"";return!r&&!i?"-":r?i?`${r} (${i})`:r:`(${i})`}function wN(t="",e=""){return`${(t==null?void 0:t.charAt(0))||""}${(e==null?void 0:e.charAt(0))||""}`.toUpperCase()}const xN={ADMIN:"Administrateur",ENTREPRISE:"Entreprise",SALARIE:"Salarie",VISITEUR:"Visiteur"};function LN(t){return xN[t]||t}function CN(){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function SN(t){return t?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}async function EN({role:t,entrepriseId:e,salarieId:n,includeDetails:r=!1}){const i={role:t};return e&&(i.entreprise=e),n&&(i.salarie=n),r&&(i.include_plans=!0),(await da.getUsers(i)).data}const eo=Mp("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,enterprises:[],employees:[],visitors:[]}),getters:{isAdmin:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="admin"},isEntreprise:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="entreprise"},isSalarie:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="salarie"},isVisiteur:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="visiteur"},currentUser:t=>t.user,hasEnterprise:t=>{var e;return!!((e=t.user)!=null&&e.enterprise_id)},hasEmployee:t=>{var e;return!!((e=t.user)!=null&&e.employee_id)}},actions:{async initialize(t){if(!t){const n=await this.restoreSession();return this.initialized=!0,n}if(t.isAuthenticated&&t.user)return this.user=t.user,this.isAuthenticated=!0,this.mustChangePassword=t.user.must_change_password||!1,this.initialized=!0,!0;const e=await this.restoreSession();return this.initialized=!0,e},async restoreSession(){try{if(!i0("access_token"))return this.isAuthenticated=!1,this.user=null,!1;const e=await En.post("/token/refresh/");return e.data.user?(this.user=e.data.user,this.isAuthenticated=!0,this.mustChangePassword=e.data.user.must_change_password||!1,!0):(await this.fetchUserProfile(),!0)}catch(t){return console.error("Failed to restore session:",t),this.isAuthenticated=!1,this.user=null,!1}},async login(t,e){var n,r,i;try{const s=await En.post("/token/",{username:t,password:e});if(!s.data.access)throw new Error("Token d'accs non reu");document.cookie=`access_token=${s.data.access}; path=/; secure; samesite=Strict`;const o=await this.fetchUserProfile();return this.user=o,this.isAuthenticated=!0,!0}catch(s){throw this.isAuthenticated=!1,this.user=null,((n=s.response)==null?void 0:n.status)===401?new Error("Identifiants incorrects"):(i=(r=s.response)==null?void 0:r.data)!=null&&i.detail?new Error(s.response.data.detail):s}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const t=await En.get("/users/me/");return this.user=t.data,this.isAuthenticated=!0,this.mustChangePassword=t.data.must_change_password||!1,t.data}catch(t){throw this.isAuthenticated=!1,this.user=null,t}},async changePassword(t,e){try{const n=await En.post("/users/change_password/",{old_password:t,password:e});return this.user={...this.user,must_change_password:!1},n.data}catch(n){throw console.error("Password change error:",n),n}},async refreshToken(){var t,e;try{if(!i0("refresh_token"))throw new Error("No refresh token available");const r=await En.post("/token/refresh/",{},{withCredentials:!0,_retry:!0}),{access:i}=r.data;if(!i)throw new Error("No access token received");return _N("access_token",i,1),this.isAuthenticated=!0,i}catch(n){throw console.error("Error refreshing token:",{status:(t=n.response)==null?void 0:t.status,data:(e=n.response)==null?void 0:e.data}),this.isAuthenticated=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",n}},async fetchUsers(t={}){this.loading=!0;try{return(await da.getUsers(t)).data}catch(e){throw this.error="Erreur lors de la rcupration des utilisateurs",e}finally{this.loading=!1}},async fetchEnterprises(){this.loading=!0;try{const t=await da.getUsers({role:"ENTREPRISE"});return this.enterprises=t.data,this.enterprises}catch(t){throw this.error="Erreur lors de la rcupration des entreprises",t}finally{this.loading=!1}},async fetchEnterpriseEmployees(t){this.loading=!0;try{const e=await da.getUsers({role:"SALARIE",entreprise:t});return this.employees=e.data,this.employees}catch(e){throw this.error="Erreur lors de la rcupration des salaries",e}finally{this.loading=!1}},async fetchEnterpriseVisitors(t){this.loading=!0;try{const e=await da.getUsers({role:"VISITEUR",entreprise:t});return this.visitors=e.data,this.visitors}catch(e){throw this.error="Erreur lors de la rcupration des visiteurs",e}finally{this.loading=!1}},async createUser(t){this.loading=!0;try{return(await da.createUser(t)).data}catch(e){throw this.error="Erreur lors de la cration de l'utilisateur",e}finally{this.loading=!1}},async updateUser(t,e){this.loading=!0;try{return(await da.updateUser(t,e)).data}catch(n){throw this.error="Erreur lors de la mise  jour de l'utilisateur",n}finally{this.loading=!1}},async deleteUser(t){this.loading=!0;try{return await da.deleteUser(t),!0}catch(e){throw this.error="Erreur lors de la suppression de l'utilisateur",e}finally{this.loading=!1}},async fetchEnterprisesLegacy(){this.loading=!0;try{const t=await En.get("/users/",{params:{role:"entreprise"}});this.enterprises=t.data}catch(t){throw this.error="Erreur lors de la rcupration des entreprises",t}finally{this.loading=!1}},async setEnterprise(t,e){this.loading=!0;try{await En.patch(`/users/${t}/`,{enterprise:e}),this.user&&this.user.id===t&&(this.user.enterprise_id=e)}catch(n){throw this.error="Erreur lors de la mise  jour de l'entreprise",n}finally{this.loading=!1}},async updateUserRole(t,e){this.loading=!0;try{const n=await En.patch(`/users/${t}/`,{role:e});return this.user&&this.user.id===t&&(this.user.user_type=e),n.data}catch(n){throw this.error="Erreur lors de la mise  jour du rle",n}finally{this.loading=!1}},async updateUserEmail(t){var e;this.loading=!0;try{const n=await En.patch(`/users/${(e=this.user)==null?void 0:e.id}/`,{email:t});return this.user&&(this.user.email=t),n.data}catch(n){throw this.error="Erreur lors de la mise  jour de l'email",n}finally{this.loading=!1}},async uploadLogo(t){this.loading=!0;try{const e=await da.uploadLogo(t);return this.user&&e.data.logo&&(this.user.logo=e.data.logo),e.data}catch(e){throw this.error="Erreur lors du tlversement du logo",e}finally{this.loading=!1}},checkAccess(t){return this.user?t.includes(this.user.user_type):!1},async fetchUsersByRole(t){this.loading=!0;try{return await EN(t)}catch(e){throw console.error(`Error fetching ${t.role}:`,e),e}finally{this.loading=!1}},async fetchEntrepriseSalaries(t){this.loading=!0;try{return(await da.getUsers({role:"SALARIE",entreprise:t})).data}catch(e){throw this.error="Erreur lors de la rcupration des salaries",e}finally{this.loading=!1}},async fetchSalarieVisiteurs(t){this.loading=!0;try{return(await da.getUsers({role:"VISITEUR",salarie:t})).data}catch(e){throw this.error="Erreur lors de la rcupration des visiteurs",e}finally{this.loading=!1}}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Xd=typeof document<"u";function zS(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function PN(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&zS(t.default)}const Oi=Object.assign;function D1(t,e){const n={};for(const r in e){const i=e[r];n[r]=mc(i)?i.map(t):t(i)}return n}const Og=()=>{},mc=Array.isArray,US=/#/g,kN=/&/g,MN=/\//g,AN=/=/g,TN=/\?/g,$S=/\+/g,ON=/%5B/g,DN=/%5D/g,VS=/%5E/g,IN=/%60/g,HS=/%7B/g,NN=/%7C/g,GS=/%7D/g,BN=/%20/g;function L_(t){return encodeURI(""+t).replace(NN,"|").replace(ON,"[").replace(DN,"]")}function RN(t){return L_(t).replace(HS,"{").replace(GS,"}").replace(VS,"^")}function X2(t){return L_(t).replace($S,"%2B").replace(BN,"+").replace(US,"%23").replace(kN,"%26").replace(IN,"`").replace(HS,"{").replace(GS,"}").replace(VS,"^")}function FN(t){return X2(t).replace(AN,"%3D")}function jN(t){return L_(t).replace(US,"%23").replace(TN,"%3F")}function zN(t){return t==null?"":jN(t).replace(MN,"%2F")}function s0(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const UN=/\/$/,$N=t=>t.replace(UN,"");function I1(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=WN(r??e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:s0(o)}}function VN(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function m4(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function HN(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&bp(e.matched[r],n.matched[i])&&WS(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function bp(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function WS(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!GN(t[n],e[n]))return!1;return!0}function GN(t,e){return mc(t)?v4(t,e):mc(e)?v4(e,t):t===e}function v4(t,e){return mc(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function WN(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const Hh={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var o0;(function(t){t.pop="pop",t.push="push"})(o0||(o0={}));var Dg;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Dg||(Dg={}));function qN(t){if(!t)if(Xd){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),$N(t)}const YN=/^[^#]+#/;function KN(t,e){return t.replace(YN,"#")+e}function ZN(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Py=()=>({left:window.scrollX,top:window.scrollY});function XN(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=ZN(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function y4(t,e){return(history.state?history.state.position-e:-1)+t}const J2=new Map;function JN(t,e){J2.set(t,e)}function QN(t){const e=J2.get(t);return J2.delete(t),e}let eB=()=>location.protocol+"//"+location.host;function qS(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),m4(l,"")}return m4(n,t)+r+i}function tB(t,e,n,r){let i=[],s=[],o=null;const a=({state:v})=>{const m=qS(t,location),C=n.value,S=e.value;let I=0;if(v){if(n.value=m,e.value=v,o&&o===C){o=null;return}I=S?v.position-S.position:0}else r(m);i.forEach(N=>{N(n.value,C,{delta:I,type:o0.pop,direction:I?I>0?Dg.forward:Dg.back:Dg.unknown})})};function l(){o=n.value}function c(v){i.push(v);const m=()=>{const C=i.indexOf(v);C>-1&&i.splice(C,1)};return s.push(m),m}function f(){const{history:v}=window;v.state&&v.replaceState(Oi({},v.state,{scroll:Py()}),"")}function p(){for(const v of s)v();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",f)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",f,{passive:!0}),{pauseListeners:l,listen:c,destroy:p}}function b4(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?Py():null}}function nB(t){const{history:e,location:n}=window,r={value:qS(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,f){const p=t.indexOf("#"),v=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+l:eB()+t+l;try{e[f?"replaceState":"pushState"](c,"",v),i.value=c}catch(m){console.error(m),n[f?"replace":"assign"](v)}}function o(l,c){const f=Oi({},e.state,b4(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});s(l,f,!0),r.value=l}function a(l,c){const f=Oi({},i.value,e.state,{forward:l,scroll:Py()});s(f.current,f,!0);const p=Oi({},b4(r.value,l,null),{position:f.position+1},c);s(l,p,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function rB(t){t=qN(t);const e=nB(t),n=tB(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=Oi({location:"",base:t,go:r,createHref:KN.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function iB(t){return typeof t=="string"||t&&typeof t=="object"}function YS(t){return typeof t=="string"||typeof t=="symbol"}const KS=Symbol("");var _4;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(_4||(_4={}));function _p(t,e){return Oi(new Error,{type:t,[KS]:!0},e)}function ph(t,e){return t instanceof Error&&KS in t&&(e==null||!!(t.type&e))}const w4="[^/]+?",sB={sensitive:!1,strict:!1,start:!0,end:!0},oB=/[.+*?^${}()[\]/\\]/g;function aB(t,e){const n=Oi({},sB,e),r=[];let i=n.start?"^":"";const s=[];for(const c of t){const f=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let p=0;p<c.length;p++){const v=c[p];let m=40+(n.sensitive?.25:0);if(v.type===0)p||(i+="/"),i+=v.value.replace(oB,"\\$&"),m+=40;else if(v.type===1){const{value:C,repeatable:S,optional:I,regexp:N}=v;s.push({name:C,repeatable:S,optional:I});const T=N||w4;if(T!==w4){m+=10;try{new RegExp(`(${T})`)}catch(W){throw new Error(`Invalid custom RegExp for param "${C}" (${T}): `+W.message)}}let j=S?`((?:${T})(?:/(?:${T}))*)`:`(${T})`;p||(j=I&&c.length<2?`(?:/${j})`:"/"+j),I&&(j+="?"),i+=j,m+=20,I&&(m+=-8),S&&(m+=-20),T===".*"&&(m+=-50)}f.push(m)}r.push(f)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const f=c.match(o),p={};if(!f)return null;for(let v=1;v<f.length;v++){const m=f[v]||"",C=s[v-1];p[C.name]=m&&C.repeatable?m.split("/"):m}return p}function l(c){let f="",p=!1;for(const v of t){(!p||!f.endsWith("/"))&&(f+="/"),p=!1;for(const m of v)if(m.type===0)f+=m.value;else if(m.type===1){const{value:C,repeatable:S,optional:I}=m,N=C in c?c[C]:"";if(mc(N)&&!S)throw new Error(`Provided param "${C}" is an array but it is not repeatable (* or + modifiers)`);const T=mc(N)?N.join("/"):N;if(!T)if(I)v.length<2&&(f.endsWith("/")?f=f.slice(0,-1):p=!0);else throw new Error(`Missing required param "${C}"`);f+=T}}return f||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function lB(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function ZS(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=lB(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(x4(r))return 1;if(x4(i))return-1}return i.length-r.length}function x4(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const uB={type:0,value:""},cB=/[a-zA-Z0-9_]/;function hB(t){if(!t)return[[]];if(t==="/")return[[uB]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${c}": ${m}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,c="",f="";function p(){c&&(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:f,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function v(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&p(),o()):l===":"?(p(),n=1):v();break;case 4:v(),n=r;break;case 1:l==="("?n=2:cB.test(l)?v():(p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+l:n=3:f+=l;break;case 3:p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,f="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),p(),o(),i}function fB(t,e,n){const r=aB(hB(t.path),n),i=Oi(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function dB(t,e){const n=[],r=new Map;e=E4({strict:!1,end:!0,sensitive:!1},e);function i(p){return r.get(p)}function s(p,v,m){const C=!m,S=C4(p);S.aliasOf=m&&m.record;const I=E4(e,p),N=[S];if("alias"in p){const W=typeof p.alias=="string"?[p.alias]:p.alias;for(const X of W)N.push(C4(Oi({},S,{components:m?m.record.components:S.components,path:X,aliasOf:m?m.record:S})))}let T,j;for(const W of N){const{path:X}=W;if(v&&X[0]!=="/"){const ce=v.record.path,he=ce[ce.length-1]==="/"?"":"/";W.path=v.record.path+(X&&he+X)}if(T=fB(W,v,I),m?m.alias.push(T):(j=j||T,j!==T&&j.alias.push(T),C&&p.name&&!S4(T)&&o(p.name)),XS(T)&&l(T),S.children){const ce=S.children;for(let he=0;he<ce.length;he++)s(ce[he],T,m&&m.children[he])}m=m||T}return j?()=>{o(j)}:Og}function o(p){if(YS(p)){const v=r.get(p);v&&(r.delete(p),n.splice(n.indexOf(v),1),v.children.forEach(o),v.alias.forEach(o))}else{const v=n.indexOf(p);v>-1&&(n.splice(v,1),p.record.name&&r.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function a(){return n}function l(p){const v=mB(p,n);n.splice(v,0,p),p.record.name&&!S4(p)&&r.set(p.record.name,p)}function c(p,v){let m,C={},S,I;if("name"in p&&p.name){if(m=r.get(p.name),!m)throw _p(1,{location:p});I=m.record.name,C=Oi(L4(v.params,m.keys.filter(j=>!j.optional).concat(m.parent?m.parent.keys.filter(j=>j.optional):[]).map(j=>j.name)),p.params&&L4(p.params,m.keys.map(j=>j.name))),S=m.stringify(C)}else if(p.path!=null)S=p.path,m=n.find(j=>j.re.test(S)),m&&(C=m.parse(S),I=m.record.name);else{if(m=v.name?r.get(v.name):n.find(j=>j.re.test(v.path)),!m)throw _p(1,{location:p,currentLocation:v});I=m.record.name,C=Oi({},v.params,p.params),S=m.stringify(C)}const N=[];let T=m;for(;T;)N.unshift(T.record),T=T.parent;return{name:I,path:S,params:C,matched:N,meta:gB(N)}}t.forEach(p=>s(p));function f(){n.length=0,r.clear()}return{addRoute:s,resolve:c,removeRoute:o,clearRoutes:f,getRoutes:a,getRecordMatcher:i}}function L4(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function C4(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:pB(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function pB(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function S4(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function gB(t){return t.reduce((e,n)=>Oi(e,n.meta),{})}function E4(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function mB(t,e){let n=0,r=e.length;for(;n!==r;){const s=n+r>>1;ZS(t,e[s])<0?r=s:n=s+1}const i=vB(t);return i&&(r=e.lastIndexOf(i,r-1)),r}function vB(t){let e=t;for(;e=e.parent;)if(XS(e)&&ZS(t,e)===0)return e}function XS({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function yB(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace($S," "),o=s.indexOf("="),a=s0(o<0?s:s.slice(0,o)),l=o<0?null:s0(s.slice(o+1));if(a in e){let c=e[a];mc(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function P4(t){let e="";for(let n in t){const r=t[n];if(n=FN(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(mc(r)?r.map(s=>s&&X2(s)):[r&&X2(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function bB(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=mc(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const _B=Symbol(""),k4=Symbol(""),ky=Symbol(""),C_=Symbol(""),Q2=Symbol("");function Hp(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function nf(t,e,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=v=>{v===!1?l(_p(4,{from:n,to:e})):v instanceof Error?l(v):iB(v)?l(_p(2,{from:e,to:v})):(o&&r.enterCallbacks[i]===o&&typeof v=="function"&&o.push(v),a())},f=s(()=>t.call(r&&r.instances[i],e,n,c));let p=Promise.resolve(f);t.length<3&&(p=p.then(c)),p.catch(v=>l(v))})}function N1(t,e,n,r,i=s=>s()){const s=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(zS(l)){const f=(l.__vccOpts||l)[e];f&&s.push(nf(f,n,r,o,a,i))}else{let c=l();s.push(()=>c.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const p=PN(f)?f.default:f;o.mods[a]=f,o.components[a]=p;const m=(p.__vccOpts||p)[e];return m&&nf(m,n,r,o,a,i)()}))}}return s}function M4(t){const e=pu(ky),n=pu(C_),r=Hn(()=>{const l=dn(t.to);return e.resolve(l)}),i=Hn(()=>{const{matched:l}=r.value,{length:c}=l,f=l[c-1],p=n.matched;if(!f||!p.length)return-1;const v=p.findIndex(bp.bind(null,f));if(v>-1)return v;const m=A4(l[c-2]);return c>1&&A4(f)===m&&p[p.length-1].path!==m?p.findIndex(bp.bind(null,l[c-2])):v}),s=Hn(()=>i.value>-1&&CB(n.params,r.value.params)),o=Hn(()=>i.value>-1&&i.value===n.matched.length-1&&WS(n.params,r.value.params));function a(l={}){if(LB(l)){const c=e[dn(t.replace)?"replace":"push"](dn(t.to)).catch(Og);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:Hn(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}function wB(t){return t.length===1?t[0]:t}const xB=hs({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:M4,setup(t,{slots:e}){const n=mu(M4(t)),{options:r}=pu(ky),i=Hn(()=>({[T4(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[T4(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&wB(e.default(n));return t.custom?s:yy("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),ug=xB;function LB(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function CB(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!mc(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function A4(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const T4=(t,e,n)=>t??e??n,SB=hs({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=pu(Q2),i=Hn(()=>t.route||r.value),s=pu(k4,0),o=Hn(()=>{let c=dn(s);const{matched:f}=i.value;let p;for(;(p=f[c])&&!p.components;)c++;return c}),a=Hn(()=>i.value.matched[o.value]);kg(k4,Hn(()=>o.value+1)),kg(_B,a),kg(Q2,i);const l=bt();return li(()=>[l.value,a.value,t.name],([c,f,p],[v,m,C])=>{f&&(f.instances[p]=c,m&&m!==f&&c&&c===v&&(f.leaveGuards.size||(f.leaveGuards=m.leaveGuards),f.updateGuards.size||(f.updateGuards=m.updateGuards))),c&&f&&(!m||!bp(f,m)||!v)&&(f.enterCallbacks[p]||[]).forEach(S=>S(c))},{flush:"post"}),()=>{const c=i.value,f=t.name,p=a.value,v=p&&p.components[f];if(!v)return O4(n.default,{Component:v,route:c});const m=p.props[f],C=m?m===!0?c.params:typeof m=="function"?m(c):m:null,I=yy(v,Oi({},C,e,{onVnodeUnmounted:N=>{N.component.isUnmounted&&(p.instances[f]=null)},ref:l}));return O4(n.default,{Component:I,route:c})||I}}});function O4(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const JS=SB;function EB(t){const e=dB(t.routes,t),n=t.parseQuery||yB,r=t.stringifyQuery||P4,i=t.history,s=Hp(),o=Hp(),a=Hp(),l=t_(Hh);let c=Hh;Xd&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=D1.bind(null,ye=>""+ye),p=D1.bind(null,zN),v=D1.bind(null,s0);function m(ye,pe){let fe,$e;return YS(ye)?(fe=e.getRecordMatcher(ye),$e=pe):$e=ye,e.addRoute($e,fe)}function C(ye){const pe=e.getRecordMatcher(ye);pe&&e.removeRoute(pe)}function S(){return e.getRoutes().map(ye=>ye.record)}function I(ye){return!!e.getRecordMatcher(ye)}function N(ye,pe){if(pe=Oi({},pe||l.value),typeof ye=="string"){const ae=I1(n,ye,pe.path),de=e.resolve({path:ae.path},pe),re=i.createHref(ae.fullPath);return Oi(ae,de,{params:v(de.params),hash:s0(ae.hash),redirectedFrom:void 0,href:re})}let fe;if(ye.path!=null)fe=Oi({},ye,{path:I1(n,ye.path,pe.path).path});else{const ae=Oi({},ye.params);for(const de in ae)ae[de]==null&&delete ae[de];fe=Oi({},ye,{params:p(ae)}),pe.params=p(pe.params)}const $e=e.resolve(fe,pe),Ne=ye.hash||"";$e.params=f(v($e.params));const ot=VN(r,Oi({},ye,{hash:RN(Ne),path:$e.path})),le=i.createHref(ot);return Oi({fullPath:ot,hash:Ne,query:r===P4?bB(ye.query):ye.query||{}},$e,{redirectedFrom:void 0,href:le})}function T(ye){return typeof ye=="string"?I1(n,ye,l.value.path):Oi({},ye)}function j(ye,pe){if(c!==ye)return _p(8,{from:pe,to:ye})}function W(ye){return he(ye)}function X(ye){return W(Oi(T(ye),{replace:!0}))}function ce(ye){const pe=ye.matched[ye.matched.length-1];if(pe&&pe.redirect){const{redirect:fe}=pe;let $e=typeof fe=="function"?fe(ye):fe;return typeof $e=="string"&&($e=$e.includes("?")||$e.includes("#")?$e=T($e):{path:$e},$e.params={}),Oi({query:ye.query,hash:ye.hash,params:$e.path!=null?{}:ye.params},$e)}}function he(ye,pe){const fe=c=N(ye),$e=l.value,Ne=ye.state,ot=ye.force,le=ye.replace===!0,ae=ce(fe);if(ae)return he(Oi(T(ae),{state:typeof ae=="object"?Oi({},Ne,ae.state):Ne,force:ot,replace:le}),pe||fe);const de=fe;de.redirectedFrom=pe;let re;return!ot&&HN(r,$e,fe)&&(re=_p(16,{to:de,from:$e}),Ie($e,$e,!0,!1)),(re?Promise.resolve(re):q(de,$e)).catch(Ae=>ph(Ae)?ph(Ae,2)?Ae:_e(Ae):H(Ae,de,$e)).then(Ae=>{if(Ae){if(ph(Ae,2))return he(Oi({replace:le},T(Ae.to),{state:typeof Ae.to=="object"?Oi({},Ne,Ae.to.state):Ne,force:ot}),pe||de)}else Ae=R(de,$e,!0,le,Ne);return F(de,$e,Ae),Ae})}function O(ye,pe){const fe=j(ye,pe);return fe?Promise.reject(fe):Promise.resolve()}function B(ye){const pe=oe.values().next().value;return pe&&typeof pe.runWithContext=="function"?pe.runWithContext(ye):ye()}function q(ye,pe){let fe;const[$e,Ne,ot]=PB(ye,pe);fe=N1($e.reverse(),"beforeRouteLeave",ye,pe);for(const ae of $e)ae.leaveGuards.forEach(de=>{fe.push(nf(de,ye,pe))});const le=O.bind(null,ye,pe);return fe.push(le),ve(fe).then(()=>{fe=[];for(const ae of s.list())fe.push(nf(ae,ye,pe));return fe.push(le),ve(fe)}).then(()=>{fe=N1(Ne,"beforeRouteUpdate",ye,pe);for(const ae of Ne)ae.updateGuards.forEach(de=>{fe.push(nf(de,ye,pe))});return fe.push(le),ve(fe)}).then(()=>{fe=[];for(const ae of ot)if(ae.beforeEnter)if(mc(ae.beforeEnter))for(const de of ae.beforeEnter)fe.push(nf(de,ye,pe));else fe.push(nf(ae.beforeEnter,ye,pe));return fe.push(le),ve(fe)}).then(()=>(ye.matched.forEach(ae=>ae.enterCallbacks={}),fe=N1(ot,"beforeRouteEnter",ye,pe,B),fe.push(le),ve(fe))).then(()=>{fe=[];for(const ae of o.list())fe.push(nf(ae,ye,pe));return fe.push(le),ve(fe)}).catch(ae=>ph(ae,8)?ae:Promise.reject(ae))}function F(ye,pe,fe){a.list().forEach($e=>B(()=>$e(ye,pe,fe)))}function R(ye,pe,fe,$e,Ne){const ot=j(ye,pe);if(ot)return ot;const le=pe===Hh,ae=Xd?history.state:{};fe&&($e||le?i.replace(ye.fullPath,Oi({scroll:le&&ae&&ae.scroll},Ne)):i.push(ye.fullPath,Ne)),l.value=ye,Ie(ye,pe,fe,le),_e()}let K;function Z(){K||(K=i.listen((ye,pe,fe)=>{if(!ge.listening)return;const $e=N(ye),Ne=ce($e);if(Ne){he(Oi(Ne,{replace:!0,force:!0}),$e).catch(Og);return}c=$e;const ot=l.value;Xd&&JN(y4(ot.fullPath,fe.delta),Py()),q($e,ot).catch(le=>ph(le,12)?le:ph(le,2)?(he(Oi(T(le.to),{force:!0}),$e).then(ae=>{ph(ae,20)&&!fe.delta&&fe.type===o0.pop&&i.go(-1,!1)}).catch(Og),Promise.reject()):(fe.delta&&i.go(-fe.delta,!1),H(le,$e,ot))).then(le=>{le=le||R($e,ot,!1),le&&(fe.delta&&!ph(le,8)?i.go(-fe.delta,!1):fe.type===o0.pop&&ph(le,20)&&i.go(-1,!1)),F($e,ot,le)}).catch(Og)}))}let Y=Hp(),k=Hp(),U;function H(ye,pe,fe){_e(ye);const $e=k.list();return $e.length?$e.forEach(Ne=>Ne(ye,pe,fe)):console.error(ye),Promise.reject(ye)}function ue(){return U&&l.value!==Hh?Promise.resolve():new Promise((ye,pe)=>{Y.add([ye,pe])})}function _e(ye){return U||(U=!ye,Z(),Y.list().forEach(([pe,fe])=>ye?fe(ye):pe()),Y.reset()),ye}function Ie(ye,pe,fe,$e){const{scrollBehavior:Ne}=t;if(!Xd||!Ne)return Promise.resolve();const ot=!fe&&QN(y4(ye.fullPath,0))||($e||!fe)&&history.state&&history.state.scroll||null;return fl().then(()=>Ne(ye,pe,ot)).then(le=>le&&XN(le)).catch(le=>H(le,ye,pe))}const ee=ye=>i.go(ye);let te;const oe=new Set,ge={currentRoute:l,listening:!0,addRoute:m,removeRoute:C,clearRoutes:e.clearRoutes,hasRoute:I,getRoutes:S,resolve:N,options:t,push:W,replace:X,go:ee,back:()=>ee(-1),forward:()=>ee(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:k.add,isReady:ue,install(ye){const pe=this;ye.component("RouterLink",ug),ye.component("RouterView",JS),ye.config.globalProperties.$router=pe,Object.defineProperty(ye.config.globalProperties,"$route",{enumerable:!0,get:()=>dn(l)}),Xd&&!te&&l.value===Hh&&(te=!0,W(i.location).catch(Ne=>{}));const fe={};for(const Ne in Hh)Object.defineProperty(fe,Ne,{get:()=>l.value[Ne],enumerable:!0});ye.provide(ky,pe),ye.provide(C_,Qb(fe)),ye.provide(Q2,l);const $e=ye.unmount;oe.add(ye),ye.unmount=function(){oe.delete(ye),oe.size<1&&(c=Hh,K&&K(),K=null,l.value=Hh,te=!1,U=!1),$e()}}};function ve(ye){return ye.reduce((pe,fe)=>pe.then(()=>B(fe)),Promise.resolve())}return ge}function PB(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(c=>bp(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>bp(c,l))||i.push(l))}return[n,r,i]}function S0(){return pu(ky)}function kB(t){return pu(C_)}const Gl=Mp("notification",()=>{const t=bt([]),e=bt(0),n=bt(null),r=Hn(()=>[...t.value].sort((p,v)=>v.timestamp-p.timestamp));function i({type:p,message:v,duration:m=5e3}){const C=++e.value,S=Date.now(),I={id:C,type:p,message:v,duration:m,timestamp:S};return t.value.push(I),n.value=C,m>0&&setTimeout(()=>{c(C)},m),C}const s=(p,v=5e3)=>i({type:"success",message:p,duration:v}),o=(p,v=5e3)=>i({type:"error",message:p,duration:v}),a=(p,v=5e3)=>i({type:"info",message:p,duration:v}),l=(p,v=5e3)=>i({type:"warning",message:p,duration:v});function c(p){const v=t.value.findIndex(m=>m.id===p);v!==-1&&t.value.splice(v,1),n.value===p&&(n.value=null)}function f(){t.value=[],n.value=null}return{notifications:r,lastAddedId:n,addNotification:i,removeNotification:c,clearAll:f,success:s,error:o,info:a,warning:l}}),MB=Object.freeze(Object.defineProperty({__proto__:null,useNotificationStore:Gl},Symbol.toStringTag,{value:"Module"}));var Jo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function S_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function QS(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}function AB(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var eE=AB,TB=typeof Jo=="object"&&Jo&&Jo.Object===Object&&Jo,OB=TB,DB=OB,IB=typeof self=="object"&&self&&self.Object===Object&&self,NB=DB||IB||Function("return this")(),tE=NB,BB=tE,RB=function(){return BB.Date.now()},FB=RB,jB=/\s/;function zB(t){for(var e=t.length;e--&&jB.test(t.charAt(e)););return e}var UB=zB,$B=UB,VB=/^\s+/;function HB(t){return t&&t.slice(0,$B(t)+1).replace(VB,"")}var GB=HB,WB=tE,qB=WB.Symbol,nE=qB,D4=nE,rE=Object.prototype,YB=rE.hasOwnProperty,KB=rE.toString,Gp=D4?D4.toStringTag:void 0;function ZB(t){var e=YB.call(t,Gp),n=t[Gp];try{t[Gp]=void 0;var r=!0}catch{}var i=KB.call(t);return r&&(e?t[Gp]=n:delete t[Gp]),i}var XB=ZB,JB=Object.prototype,QB=JB.toString;function eR(t){return QB.call(t)}var tR=eR,I4=nE,nR=XB,rR=tR,iR="[object Null]",sR="[object Undefined]",N4=I4?I4.toStringTag:void 0;function oR(t){return t==null?t===void 0?sR:iR:N4&&N4 in Object(t)?nR(t):rR(t)}var aR=oR;function lR(t){return t!=null&&typeof t=="object"}var uR=lR,cR=aR,hR=uR,fR="[object Symbol]";function dR(t){return typeof t=="symbol"||hR(t)&&cR(t)==fR}var pR=dR,gR=GB,B4=eE,mR=pR,R4=NaN,vR=/^[-+]0x[0-9a-f]+$/i,yR=/^0b[01]+$/i,bR=/^0o[0-7]+$/i,_R=parseInt;function wR(t){if(typeof t=="number")return t;if(mR(t))return R4;if(B4(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=B4(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=gR(t);var n=yR.test(t);return n||bR.test(t)?_R(t.slice(2),n?2:8):vR.test(t)?R4:+t}var xR=wR,LR=eE,B1=FB,F4=xR,CR="Expected a function",SR=Math.max,ER=Math.min;function PR(t,e,n){var r,i,s,o,a,l,c=0,f=!1,p=!1,v=!0;if(typeof t!="function")throw new TypeError(CR);e=F4(e)||0,LR(n)&&(f=!!n.leading,p="maxWait"in n,s=p?SR(F4(n.maxWait)||0,e):s,v="trailing"in n?!!n.trailing:v);function m(ce){var he=r,O=i;return r=i=void 0,c=ce,o=t.apply(O,he),o}function C(ce){return c=ce,a=setTimeout(N,e),f?m(ce):o}function S(ce){var he=ce-l,O=ce-c,B=e-he;return p?ER(B,s-O):B}function I(ce){var he=ce-l,O=ce-c;return l===void 0||he>=e||he<0||p&&O>=s}function N(){var ce=B1();if(I(ce))return T(ce);a=setTimeout(N,S(ce))}function T(ce){return a=void 0,v&&r?m(ce):(r=i=void 0,o)}function j(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function W(){return a===void 0?o:T(B1())}function X(){var ce=B1(),he=I(ce);if(r=arguments,i=this,l=ce,he){if(a===void 0)return C(l);if(p)return clearTimeout(a),a=setTimeout(N,e),m(l)}return a===void 0&&(a=setTimeout(N,e)),o}return X.cancel=j,X.flush=W,X}var kR=PR;const MR=S_(kR),AR={class:"relative w-full"},TR={key:0,class:"search-results w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},OR=["onClick"],j4=hs({__name:"SearchBar",emits:["select-location"],setup(t,{emit:e}){const n=bt(""),r=bt([]),i=e,s=MR(async l=>{if(l.length<3){r.value=[];return}try{const f=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(l)}`)).json();r.value=f}catch(c){console.error("Erreur lors de la recherche d'adresse:",c),r.value=[]}},300);function o(){s(n.value)}function a(l){n.value=l.display_name,r.value=[],i("select-location",{lat:parseFloat(l.lat),lng:parseFloat(l.lon)})}return(l,c)=>(Me(),De("div",AR,[Dn(E("input",{"onUpdate:modelValue":c[0]||(c[0]=f=>n.value=f),onInput:o,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[ai,n.value]]),r.value.length>0?(Me(),De("div",TR,[(Me(!0),De(gn,null,Vn(r.value,f=>(Me(),De("div",{key:f.place_id,onClick:p=>a(f),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},At(f.display_name),9,OR))),128))])):Ht("",!0)]))}}),DR={key:0,class:"pwa-update-notification"},IR=hs({__name:"PWAUpdateNotification",setup(t,{expose:e}){const n=bt(!1),r=async()=>{window.location.reload(),n.value=!1},i=()=>{n.value=!1};return e({showUpdateNotification:n,refreshApp:r,closeNotification:i}),(s,o)=>n.value?(Me(),De("div",DR,[E("div",{class:"pwa-update-content"},[o[0]||(o[0]=E("p",null,"Une nouvelle version est disponible",-1)),E("div",{class:"pwa-update-actions"},[E("button",{onClick:r,class:"pwa-update-button"},"Mettre  jour"),E("button",{onClick:i,class:"pwa-close-button"},"Plus tard")])])])):Ht("",!0)}}),Qc=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},NR=Qc(IR,[["__scopeId","data-v-aa687693"]]),BR="/static/frontend/img/icons/android-chrome-192x192.png",RR={class:"prompt-content"},FR={class:"prompt-body"},jR={key:0,class:"install-instructions ios"},zR={key:1,class:"install-instructions android"},UR={key:2,class:"install-instructions desktop"},$R={key:3,class:"install-instructions desktop"},VR=hs({__name:"PWAInstallPrompt",setup(t){const e=bt(!1),n=bt(!1),r=bt(null);bt(null);const i=bt(!1),s=bt(!1),o=bt(!1),a=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,l=()=>{const m=localStorage.getItem("pwaPromptLastClosed");if(!m)return!1;const C=3*24*60*60*1e3;return Date.now()-parseInt(m)<C},c=()=>{i.value=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,s.value=/Android/.test(navigator.userAgent),o.value=!i.value&&!s.value,window.addEventListener("beforeinstallprompt",m=>{m.preventDefault(),r.value=m,e.value=!0,n.value=!0}),window.addEventListener("appinstalled",m=>{e.value=!1}),!a()&&(l()||setTimeout(()=>{e.value=!0,n.value=!0},3e3))},f=()=>{window.removeEventListener("beforeinstallprompt",()=>{}),window.removeEventListener("appinstalled",()=>{})};zs(()=>{c()}),Cf(()=>{f()});const p=async()=>{if(r.value)try{r.value.prompt();const m=await r.value.userChoice;r.value=null,m.outcome==="accepted"&&(e.value=!1)}catch(m){console.error("Erreur lors de l'installation:",m)}},v=()=>{e.value=!1,localStorage.setItem("pwaPromptLastClosed",Date.now().toString())};return(m,C)=>e.value?(Me(),De("div",{key:0,class:bi(["pwa-install-prompt",{fullscreen:n.value}])},[E("div",RR,[E("div",{class:"prompt-header"},[C[1]||(C[1]=E("div",{class:"app-info"},[E("img",{src:BR,alt:"TagMap Logo",class:"app-logo"}),E("div",{class:"app-details"},[E("h2",null,"Installer TagMap"),E("p",null,"Solution innovante de cartographie et gestion de projets")])],-1)),E("button",{onClick:v,class:"close-button","aria-label":"Fermer"},C[0]||(C[0]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[E("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),E("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))]),E("div",FR,[i.value?(Me(),De("div",jR,C[2]||(C[2]=[dl('<h3 data-v-3779ba3f>Pour installer l&#39;application sur votre iPhone :</h3><div class="instruction-step" data-v-3779ba3f><div class="step-number" data-v-3779ba3f>1</div><div class="step-content" data-v-3779ba3f><p data-v-3779ba3f>Appuyez sur <strong data-v-3779ba3f>Partager</strong> <span class="ios-share-icon" data-v-3779ba3f><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3779ba3f><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8" data-v-3779ba3f></path><polyline points="16 6 12 2 8 6" data-v-3779ba3f></polyline><line x1="12" y1="2" x2="12" y2="15" data-v-3779ba3f></line></svg></span></p></div></div><div class="instruction-step" data-v-3779ba3f><div class="step-number" data-v-3779ba3f>2</div><div class="step-content" data-v-3779ba3f><p data-v-3779ba3f>Faites dfiler et appuyez sur <strong data-v-3779ba3f>Sur l&#39;cran d&#39;accueil</strong></p></div></div><div class="instruction-step" data-v-3779ba3f><div class="step-number" data-v-3779ba3f>3</div><div class="step-content" data-v-3779ba3f><p data-v-3779ba3f>Appuyez sur <strong data-v-3779ba3f>Ajouter</strong> en haut  droite</p></div></div>',4)]))):s.value?(Me(),De("div",zR,[C[3]||(C[3]=E("h3",null,"Pour installer l'application sur votre appareil :",-1)),C[4]||(C[4]=E("div",{class:"instruction-step"},[E("div",{class:"step-number"},"1"),E("div",{class:"step-content"},[E("p",null,"Appuyez sur le bouton ci-dessous")])],-1)),E("button",{onClick:p,class:"install-button"}," Installer l'application ")])):o.value?(Me(),De("div",UR,[C[5]||(C[5]=E("h3",null,"Pour installer l'application sur votre ordinateur :",-1)),C[6]||(C[6]=E("div",{class:"instruction-step"},[E("div",{class:"step-number"},"1"),E("div",{class:"step-content"},[E("p",null,"Cliquez sur le bouton ci-dessous pour installer l'application")])],-1)),E("button",{onClick:p,class:"install-button"}," Installer l'application ")])):(Me(),De("div",$R,C[7]||(C[7]=[dl('<h3 data-v-3779ba3f>Pour installer l&#39;application sur votre ordinateur :</h3><div class="instruction-step" data-v-3779ba3f><div class="step-number" data-v-3779ba3f>1</div><div class="step-content" data-v-3779ba3f><p data-v-3779ba3f>Cliquez sur l&#39;icne d&#39;installation dans la barre d&#39;adresse</p></div></div><div class="instruction-step" data-v-3779ba3f><div class="step-number" data-v-3779ba3f>2</div><div class="step-content" data-v-3779ba3f><p data-v-3779ba3f>Cliquez sur &quot;Installer&quot;</p></div></div>',3)])))]),E("div",{class:"prompt-footer"},[C[8]||(C[8]=dl('<div class="benefits" data-v-3779ba3f><div class="benefit-item" data-v-3779ba3f><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3779ba3f><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" data-v-3779ba3f></path></svg><span data-v-3779ba3f>Scuris</span></div><div class="benefit-item" data-v-3779ba3f><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3779ba3f><circle cx="12" cy="12" r="10" data-v-3779ba3f></circle><polyline points="12 6 12 12 16 14" data-v-3779ba3f></polyline></svg><span data-v-3779ba3f>Rapide</span></div><div class="benefit-item" data-v-3779ba3f><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3779ba3f><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" data-v-3779ba3f></path></svg><span data-v-3779ba3f>Hors ligne</span></div></div>',1)),E("button",{onClick:v,class:"remind-later"},"Me le rappeler plus tard")])])],2)):Ht("",!0)}}),HR=Qc(VR,[["__scopeId","data-v-3779ba3f"]]),GR={class:"app-container"},WR={key:0,class:"app-header bg-white shadow-sm z-[2500] flex-shrink-0"},qR={class:"mx-auto px-4 sm:px-6 lg:px-8"},YR={class:"flex h-16 items-center justify-between"},KR={class:"flex items-center"},ZR={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},XR={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},JR={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},QR={class:"hidden md:flex md:ml-6 space-x-8"},eF={key:0,class:"flex-1 mx-2"},tF={class:"hidden md:block"},nF={class:"md:hidden"},rF={key:1,class:"flex-1"},iF={class:"flex items-center space-x-2 md:space-x-4"},sF={class:"relative"},oF={class:"px-4 py-2 border-b border-gray-100 flex justify-between items-center"},aF={class:"flex items-center justify-between w-full"},lF={class:"flex items-center space-x-3"},uF={class:"max-h-72 overflow-y-auto"},cF={key:0,class:"px-4 py-3 text-sm text-gray-500 text-center"},hF={class:"flex items-start"},fF={class:"flex-shrink-0 mr-3"},dF={key:0,class:"h-6 w-6 md:h-5 md:w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor"},pF={key:1,class:"h-6 w-6 md:h-5 md:w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},gF={key:2,class:"h-6 w-6 md:h-5 md:w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},mF={key:3,class:"h-6 w-6 md:h-5 md:w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor"},vF={class:"flex-1"},yF={class:"text-sm md:text-sm text-gray-800"},bF=["onClick"],_F={class:"relative"},wF={class:"hidden md:flex flex-col items-end"},xF={class:"text-sm font-medium text-gray-700"},LF={key:0,class:"text-xs text-gray-500"},CF=["src","alt"],SF={class:"md:hidden px-4 py-2 border-b border-gray-100 flex justify-between items-center"},EF={class:"text-sm font-semibold text-gray-700"},PF={class:"text-xs text-gray-500"},kF={key:0,class:"md:hidden fixed inset-0 bg-white shadow-lg z-[3000] border-t border-gray-200",style:{top:"var(--header-height)"}},MF={class:"space-y-1 px-2 pb-3 pt-2"},AF={class:"app-main"},TF=hs({__name:"App",setup(t){const e=S0(),n=eo(),r=Gl(),i=bt(!1),s=bt(!1),o=bt(!1),a=bt(!1),l=bt(null),c=bt(!1),f=bt(!1),p=bt(null),v=bt("13px"),m=bt("65px"),C=bt(null),S=bt(null),I=bt(!1);function N(){f.value=window.innerWidth<768}zs(()=>{N(),window.addEventListener("resize",N),window.addEventListener("resize",T),window.addEventListener("pwa-update-available",()=>{I.value=!0})}),Cf(()=>{window.removeEventListener("resize",N),window.removeEventListener("resize",T),window.removeEventListener("pwa-update-available",()=>{})});function T(){if(!p.value)return;const Y=p.value.getBoundingClientRect();v.value=`${Y.top+window.scrollY+5}px`;const k=Y.left+Y.width/2;m.value=`${window.innerWidth-k-22}px`}const j=Hn(()=>{const Y=n.user;if(!Y)return"";const k=`${Y.first_name} ${Y.last_name.toUpperCase()}`;return Y.company_name?`${k} (${Y.company_name})`:k}),W=Hn(()=>{var k;switch((k=n.user)==null?void 0:k.user_type){case"admin":return"Accs administrateur";case"entreprise":return"Accs entreprise";case"salarie":return"Accs salarie";case"visiteur":return"Accs visiteur";default:return""}}),X=Hn(()=>{var Y;return((Y=n.user)==null?void 0:Y.user_type)==="admin"}),ce=Hn(()=>n.isAuthenticated),he=[{name:"Carte",to:"/"},{name:"Mto",to:"/meteo"},{name:"Notes",to:"/notes"}],O=Hn(()=>{var k,U;if(!ce.value)return[];const Y=[...he];return(X.value||((k=n.user)==null?void 0:k.user_type)==="entreprise"||((U=n.user)==null?void 0:U.user_type)==="salarie")&&Y.push({name:"Utilisateurs",to:"/users"}),X.value&&Y.push({name:"Paramtres",to:"/parametres"}),Y}),B=Hn(()=>ce.value?[{name:"Mon profil",to:"/profile"}]:[]);async function q(){try{await n.logout(),e.push("/login")}catch(Y){console.error("Erreur lors de la dconnexion:",Y)}}function F(Y){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:Y.lat,lng:Y.lng,zoom:16}}))}zs(async()=>{try{if(localStorage.getItem("token")){await n.checkAuth(),await n.fetchUserProfile();const k=localStorage.getItem("lastPlanId");k&&window.dispatchEvent(new CustomEvent("load-last-plan",{detail:{planId:k}}))}}catch(Y){console.error("Auth check error:",Y),e.push("/login")}});const R=Hn(()=>{const Y="TagMap";if(!ce.value)return`${Y} - Connexion`;const k=e.currentRoute.value,H={home:"Carte",meteo:"Mto",notes:"Notes",users:"Utilisateurs",profile:"Mon profil",changePassword:"Changement de mot de passe",map:"Carte"}[k.name]||"";return H?`${Y} - ${H}`:Y});li(R,Y=>{document.title=Y},{immediate:!0});const K=Hn(()=>r.notifications.length);function Z(){r.clearAll(),o.value=!1}return t0(()=>{if(r.lastAddedId!==null){const Y=r.notifications.find(k=>k.id===r.lastAddedId);Y&&fl(()=>{T(),a.value=!0,l.value={id:Y.id,message:Y.message,type:Y.type},requestAnimationFrame(()=>{setTimeout(()=>{c.value=!0,setTimeout(()=>{c.value=!1,setTimeout(()=>{var k;((k=l.value)==null?void 0:k.id)===Y.id&&(l.value=null,a.value=!1)},300)},4e3)},50)})})}}),(Y,k)=>{var U;return Me(),De("div",GR,[ce.value?(Me(),De("header",WR,[E("nav",qR,[E("div",YR,[E("div",KR,[E("button",{onClick:k[0]||(k[0]=H=>s.value=!s.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 md:hidden"},[k[7]||(k[7]=E("span",{class:"sr-only"},"Ouvrir le menu",-1)),(Me(),De("svg",ZR,[s.value?(Me(),De("path",JR)):(Me(),De("path",XR))]))]),Kr(dn(ug),{to:"/",class:"text-xl font-semibold text-primary-600 truncate ml-2 md:ml-0"},{default:Ul(()=>k[8]||(k[8]=[E("span",{class:"md:inline hidden"},"TagMap",-1),E("span",{class:"md:hidden inline"},"TM",-1)])),_:1}),E("div",QR,[(Me(!0),De(gn,null,Vn(O.value,H=>(Me(),ho(dn(ug),{key:H.name,to:H.to,class:bi(["text-sm font-medium transition-colors duration-200",[Y.$route.path===H.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Ul(()=>[Mr(At(H.name),1)]),_:2},1032,["to","class"]))),128))])]),Y.$route.path==="/"?(Me(),De("div",eF,[E("div",tF,[Kr(j4,{onSelectLocation:F})]),E("div",nF,[Kr(j4,{onSelectLocation:F,class:"max-w-full"})])])):(Me(),De("div",rF)),E("div",iF,[E("div",sF,[E("button",{ref_key:"bellButtonRef",ref:p,onClick:k[1]||(k[1]=H=>o.value=!o.value),class:bi(["relative flex items-center justify-center p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",{"animate-bell":a.value}])},k[9]||(k[9]=[E("span",{class:"sr-only"},"Voir les notifications",-1),E("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)]),2),o.value?(Me(),De("div",{key:0,class:"absolute right-0 mt-2 md:w-80 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:Vl(f.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[E("div",oF,[E("div",aF,[k[11]||(k[11]=E("h3",{class:"text-sm font-semibold text-gray-700"},"Notifications",-1)),E("div",lF,[K.value>0?(Me(),De("button",{key:0,onClick:Z,class:"text-xs text-primary-600 hover:text-primary-800"}," Tout effacer ")):Ht("",!0),E("button",{onClick:k[2]||(k[2]=H=>o.value=!1),class:"md:hidden p-1 rounded-full hover:bg-gray-100"},k[10]||(k[10]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])]),E("div",uF,[K.value===0?(Me(),De("div",cF," Aucune notification ")):Ht("",!0),(Me(!0),De(gn,null,Vn(dn(r).notifications,H=>(Me(),De("div",{key:H.id,class:"px-4 py-3 md:py-3 py-4 border-b border-gray-100 last:border-0 hover:bg-gray-50"},[E("div",hF,[E("div",fF,[H.type==="success"?(Me(),De("svg",dF,k[12]||(k[12]=[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):H.type==="error"?(Me(),De("svg",pF,k[13]||(k[13]=[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):H.type==="warning"?(Me(),De("svg",gF,k[14]||(k[14]=[E("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):(Me(),De("svg",mF,k[15]||(k[15]=[E("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])))]),E("div",vF,[E("p",yF,At(H.message),1),E("button",{onClick:ue=>dn(r).removeNotification(H.id),class:"text-xs md:text-xs text-primary-600 hover:text-primary-800 mt-2 md:mt-1 py-1 md:py-0"}," Fermer ",8,bF)])])]))),128))])],4)):Ht("",!0)]),E("div",_F,[E("button",{onClick:k[3]||(k[3]=H=>i.value=!i.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[E("div",wF,[E("span",xF,At(j.value),1),W.value?(Me(),De("span",LF,At(W.value),1)):Ht("",!0)]),E("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:((U=dn(n).user)==null?void 0:U.logo)||"https://ui-avatars.com/api/?name="+encodeURIComponent(j.value),alt:j.value},null,8,CF)]),i.value?(Me(),De("div",{key:0,class:"absolute right-0 mt-2 md:w-48 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:Vl(f.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[E("div",SF,[E("div",null,[E("div",EF,At(j.value),1),E("div",PF,At(W.value),1)]),E("button",{onClick:k[4]||(k[4]=H=>i.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},k[16]||(k[16]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),(Me(!0),De(gn,null,Vn(B.value,H=>(Me(),ho(dn(ug),{key:H.name,to:H.to,class:"block px-4 md:py-2 py-3 text-sm text-gray-700 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",onClick:k[5]||(k[5]=ue=>i.value=!1)},{default:Ul(()=>[Mr(At(H.name),1)]),_:2},1032,["to"]))),128)),E("button",{onClick:q,class:"block w-full px-4 md:py-2 py-3 text-left text-sm text-red-600 hover:bg-gray-50 font-medium"}," Dconnexion ")],4)):Ht("",!0)])])]),s.value?(Me(),De("div",kF,[E("div",MF,[(Me(!0),De(gn,null,Vn(O.value,H=>(Me(),ho(dn(ug),{key:H.name,to:H.to,class:bi(["block px-3 py-2 rounded-md text-base font-medium",[Y.$route.path===H.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:k[6]||(k[6]=ue=>s.value=!1)},{default:Ul(()=>[Mr(At(H.name),1)]),_:2},1032,["to","class"]))),128))])])):Ht("",!0)])])):Ht("",!0),E("main",AF,[Kr(dn(JS),null,{default:Ul(({Component:H,route:ue})=>[(Me(),ho(oC(H),{class:bi({"router-view-map":ue.meta.isMapRoute})},null,8,["class"]))]),_:1})]),Kr(NR,{ref_key:"pwaUpdateNotification",ref:C},null,512),Kr(HR,{ref_key:"pwaInstallPrompt",ref:S},null,512)])}}}),OF="modulepreload",DF=function(t){return"/static/frontend/"+t},z4={},Sh=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=DF(l),l in z4)return;z4[l]=!0;const c=l.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":OF,c||(p.as="script"),p.crossOrigin="",p.href=l,a&&p.setAttribute("nonce",a),document.head.appendChild(p),c)return new Promise((v,m)=>{p.addEventListener("load",v),p.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},IF={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},NF={class:"max-w-md w-full space-y-8"},BF={class:"space-y-4"},RF={class:"mt-1"},FF={class:"mt-1"},jF={class:"mt-1"},zF={key:0,class:"rounded-md bg-red-50 p-4"},UF={class:"flex"},$F={class:"ml-3"},VF={class:"text-sm font-medium text-red-800"},HF={key:1,class:"rounded-md bg-yellow-50 p-4"},GF={class:"flex"},WF={class:"ml-3"},qF={class:"mt-2 text-sm text-yellow-700"},YF={class:"list-disc pl-5 space-y-1"},KF=["disabled"],ZF={class:"absolute left-0 inset-y-0 flex items-center pl-3"},XF={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},JF={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},QF=hs({__name:"ChangePasswordForm",setup(t){const e=S0(),n=eo(),r=mu({oldPassword:"",newPassword:"",confirmPassword:""}),i=bt(!1),s=bt(""),o=Hn(()=>{const c=[];return r.newPassword&&r.newPassword.length<8&&c.push("Le nouveau mot de passe doit contenir au moins 8 caractres"),r.newPassword&&r.confirmPassword&&r.newPassword!==r.confirmPassword&&c.push("Les mots de passe ne correspondent pas"),c}),a=Hn(()=>r.oldPassword.length>0&&r.newPassword.length>=8&&r.newPassword===r.confirmPassword);async function l(){var c,f,p,v,m,C,S,I;if(!a.value){s.value="Veuillez corriger les erreurs avant de continuer";return}if(!((c=n.user)!=null&&c.id)){s.value="Erreur : utilisateur non identifi";return}i.value=!0,s.value="";try{await n.changePassword(r.oldPassword,r.newPassword),e.push("/")}catch(N){console.error("Password change failed:",N),(p=(f=N.response)==null?void 0:f.data)!=null&&p.detail?s.value=N.response.data.detail:(m=(v=N.response)==null?void 0:v.data)!=null&&m.old_password?s.value=N.response.data.old_password[0]:(S=(C=N.response)==null?void 0:C.data)!=null&&S.password?s.value=N.response.data.password[0]:((I=N.response)==null?void 0:I.status)===401?(s.value="Session expire, veuillez vous reconnecter",await n.logout(),e.push("/login")):s.value="Une erreur est survenue lors du changement de mot de passe"}finally{i.value=!1}}return(c,f)=>(Me(),De("div",IF,[E("div",NF,[f[12]||(f[12]=E("div",null,[E("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),E("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de scurit, vous devez changer votre mot de passe. ")],-1)),E("form",{class:"mt-8 space-y-6",onSubmit:pl(l,["prevent"])},[E("div",BF,[E("div",null,[f[3]||(f[3]=E("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),E("div",RF,[Dn(E("input",{id:"old-password","onUpdate:modelValue":f[0]||(f[0]=p=>r.oldPassword=p),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[ai,r.oldPassword]])])]),E("div",null,[f[4]||(f[4]=E("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),E("div",FF,[Dn(E("input",{id:"new-password","onUpdate:modelValue":f[1]||(f[1]=p=>r.newPassword=p),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[ai,r.newPassword]])]),f[5]||(f[5]=E("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractres ",-1))]),E("div",null,[f[6]||(f[6]=E("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),E("div",jF,[Dn(E("input",{id:"confirm-password","onUpdate:modelValue":f[2]||(f[2]=p=>r.confirmPassword=p),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[ai,r.confirmPassword]])])])]),s.value?(Me(),De("div",zF,[E("div",UF,[f[7]||(f[7]=E("div",{class:"flex-shrink-0"},[E("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),E("div",$F,[E("h3",VF,At(s.value),1)])])])):Ht("",!0),o.value.length>0?(Me(),De("div",HF,[E("div",GF,[f[9]||(f[9]=E("div",{class:"flex-shrink-0"},[E("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),E("div",WF,[f[8]||(f[8]=E("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),E("div",qF,[E("ul",YF,[(Me(!0),De(gn,null,Vn(o.value,(p,v)=>(Me(),De("li",{key:v},At(p),1))),128))])])])])])):Ht("",!0),E("div",null,[E("button",{type:"submit",disabled:i.value||!a.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[E("span",ZF,[i.value?(Me(),De("svg",JF,f[11]||(f[11]=[E("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),E("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Me(),De("svg",XF,f[10]||(f[10]=[E("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),Mr(" "+At(i.value?"Modification en cours...":"Changer le mot de passe"),1)],8,KF)])],32)])]))}}),e9="/static/frontend/assets/background.svg",t9={class:"min-h-screen overflow-auto relative py-12 sm:px-6 lg:px-8"},n9={class:"container mx-auto relative z-10"},r9={class:"sm:mx-auto sm:w-full sm:max-w-md"},i9={class:"bg-white/95 backdrop-blur-sm py-8 px-6 shadow-xl rounded-xl sm:px-10 border border-white/20"},s9={key:0,class:"rounded-md bg-red-50 p-4"},o9={class:"flex"},a9={class:"ml-3"},l9={class:"text-sm font-medium text-red-800"},u9={class:"mt-1"},c9={class:"mt-1 relative"},h9=["type"],f9={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d9={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},p9={class:"flex items-center justify-between"},g9={class:"flex items-center"},m9={class:"text-sm"},v9=["disabled"],y9={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},b9={class:"mt-16 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},_9={class:"mt-12"},w9={class:"flex flex-wrap justify-center gap-2 mb-8"},x9=["onClick"],L9={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},C9={class:"flex items-center mb-4"},S9={class:"text-2xl mr-2"},E9={class:"text-xl font-semibold text-gray-900"},P9={class:"text-gray-600 text-sm"},k9={key:0,class:"flex justify-center mt-8 gap-2"},M9=["onClick"],R1=6,A9=hs({__name:"LoginView",setup(t){const e=S0(),n=eo(),r=bt(!1),i=bt(null),s=bt(!1),o=bt("Tous"),a=bt(1),l=mu({username:"",password:"",rememberMe:!1}),c=[{type:"Liniculteur",sector:"Agriculture",icon:"",text:"En tant qu'entreprise, j'ai mis en place un sous-compte  agriculteur  permettant la golocalisation des parcelles. Cela offre  nos salaris et prestataires une visibilit complte sur l'ensemble des parcelles et facilite leur accs. De plus, ils peuvent y ajouter des notes et des photos si ncessaire. Grce aux trackers, nous renforons galement la scurit de nos machines contre le vol."},{type:"Agro industriel",sector:"Industrie",icon:"",text:"La gestion des comptes et sous-comptes est un atout majeur pour limiter, filtrer et contrler l'accs de nos salaris aux diffrentes tches."},{type:"Agence de voyage",sector:"Tourisme",icon:"",text:"L'outil nous permet de crer gratuitement et sans limite des sous-comptes clients, d'tablir des itinraires personnaliss avec des points d'intrt."},{type:"Industriel agroalimentaire",sector:"Industrie",icon:"",text:"Nous disposons d'un compte entreprise avec des sous-comptes ddis  chaque culture. Nos techniciens et agriculteurs partenaires peuvent ainsi ajouter des annotations et photo sur les parcelles. Grce aux stations mto connectes, nous optimisons la gestion des tours d'irrigation par secteur gographique en fonction des prcipitations."},{type:"Conseil municipal",sector:"Collectivit",icon:"",text:"Cette solution nous permet de gagner en efficacit dans la gestion des tches  raliser, en les golocalisant et en offrant  nos employs communaux la possibilit d'ajouter des commentaires et des photos sur chaque tche gorfrence."},{type:"Location de matriel",sector:"Services",icon:"",text:"Cette solution nous permet de golocaliser notre flotte grce  des trackers sans abonnement, avec uniquement un abonnement  la plateforme."},{type:"Agriculteur",sector:"Agriculture",icon:"",text:"J'ai quip tous mes canons d'enrouleurs de trackers et de camras pour dissuader le vol de batteries."},{type:"Semencier",sector:"Agriculture",icon:"",text:"Nous assurons la golocalisation de l'ensemble de nos parcelles en France."},{type:"Concessionnaire irrigation",sector:"Services",icon:"",text:"Nous avons golocalis tous les forages de nos clients et ajout en commentaire la procdure d'entre, facilitant ainsi le travail de nos techniciens et agriculteurs lors des interventions."},{type:"Entreprise paysagiste",sector:"Services",icon:"",text:"Nous golocalisons tous nos chantiers et ajoutons une photo du chantier termin en commentaire, servant de preuve en cas de litige."}],f=Hn(()=>["Tous",...new Set(c.map(S=>S.sector))]),p=Hn(()=>{let C=o.value==="Tous"?c:c.filter(N=>N.sector===o.value);const S=(a.value-1)*R1,I=S+R1;return C.slice(S,I)}),v=Hn(()=>{const C=o.value==="Tous"?c:c.filter(S=>S.sector===o.value);return Math.ceil(C.length/R1)});zs(async()=>{var C;try{if((C=window.INITIAL_STATE)!=null&&C.isAuthenticated){e.push("/");return}await n.restoreSession()&&e.push("/")}catch(S){console.error("Error during initialization:",S),i.value=null}});async function m(){var C,S,I,N,T,j,W,X,ce;r.value=!0,i.value=null;try{if(!l.username||!l.password){i.value="Veuillez remplir tous les champs";return}await n.login(l.username,l.password),(C=n.user)!=null&&C.must_change_password?e.push("/change-password"):e.push("/")}catch(he){console.error("Login error:",he),((S=he==null?void 0:he.response)==null?void 0:S.status)===500?i.value="Le service est temporairement indisponible. Veuillez ressayer dans quelques instants.":((I=he==null?void 0:he.response)==null?void 0:I.status)===401||((N=he==null?void 0:he.response)==null?void 0:N.status)===403?i.value="Identifiants incorrects. Veuillez vrifier votre nom d'utilisateur et mot de passe.":(j=(T=he==null?void 0:he.response)==null?void 0:T.data)!=null&&j.detail?i.value=he.response.data.detail:(ce=(X=(W=he==null?void 0:he.response)==null?void 0:W.data)==null?void 0:X.non_field_errors)!=null&&ce[0]?i.value=he.response.data.non_field_errors[0]:(he==null?void 0:he.message)==="Network Error"?i.value="Impossible de se connecter au serveur. Veuillez vrifier votre connexion internet.":i.value="Une erreur est survenue lors de la connexion. Veuillez ressayer."}finally{r.value=!1}}return(C,S)=>{const I=c_("router-link");return Me(),De("div",t9,[E("div",{class:"fixed inset-0 z-0",style:Vl({backgroundImage:`url(${dn(e9)})`,backgroundSize:"400px",backgroundRepeat:"repeat",filter:"blur(1px) opacity(0.15)"})},null,4),S[16]||(S[16]=E("div",{class:"fixed inset-0 z-0 bg-gradient-to-br from-white/40 via-transparent to-primary-900/10"},null,-1)),E("div",n9,[E("div",r9,[E("div",i9,[S[12]||(S[12]=E("div",{class:"text-center mb-8"},[E("h2",{class:"text-3xl font-bold text-gray-900 mb-2"}," TagMap "),E("p",{class:"text-sm text-gray-600"}," Solution innovante de cartographie et gestion de projets ")],-1)),E("form",{class:"space-y-6",onSubmit:pl(m,["prevent"])},[i.value?(Me(),De("div",s9,[E("div",o9,[S[4]||(S[4]=E("div",{class:"flex-shrink-0"},[E("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),E("div",a9,[E("h3",l9,At(i.value),1)])])])):Ht("",!0),E("div",null,[S[5]||(S[5]=E("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),E("div",u9,[Dn(E("input",{id:"username","onUpdate:modelValue":S[0]||(S[0]=N=>l.username=N),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[ai,l.username]])])]),E("div",null,[S[8]||(S[8]=E("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),E("div",c9,[Dn(E("input",{id:"password","onUpdate:modelValue":S[1]||(S[1]=N=>l.password=N),type:s.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,h9),[[b_,l.password]]),E("button",{type:"button",onClick:S[2]||(S[2]=N=>s.value=!s.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[s.value?(Me(),De("svg",f9,S[6]||(S[6]=[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(Me(),De("svg",d9,S[7]||(S[7]=[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),E("div",p9,[E("div",g9,[Dn(E("input",{id:"remember-me","onUpdate:modelValue":S[3]||(S[3]=N=>l.rememberMe=N),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[Rl,l.rememberMe]]),S[9]||(S[9]=E("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),E("div",m9,[Kr(I,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Ul(()=>S[10]||(S[10]=[Mr(" Mot de passe oubli ? ")])),_:1})])]),E("div",null,[E("button",{type:"submit",disabled:r.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[r.value?(Me(),De("svg",y9,S[11]||(S[11]=[E("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),E("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Ht("",!0),Mr(" "+At(r.value?"Connexion en cours...":"Se connecter"),1)],8,v9)])],32)])]),E("div",b9,[S[14]||(S[14]=dl('<div class="mb-12 bg-white/90 backdrop-blur-sm p-8 rounded-xl shadow-lg border border-white/20" data-v-cb538253><div class="flex items-center mb-6" data-v-cb538253><span class="text-2xl mr-2" data-v-cb538253></span><h3 class="text-xl font-bold text-gray-900" data-v-cb538253>quipements Connects sans Abonnement</h3></div><div class="grid grid-cols-1 md:grid-cols-2 gap-6" data-v-cb538253><div class="flex items-center space-x-4" data-v-cb538253><div class="flex-shrink-0 text-2xl" data-v-cb538253></div><div data-v-cb538253><h4 class="font-semibold" data-v-cb538253>Tracker GPS solaire</h4><p class="text-gray-600" data-v-cb538253>Golocalisez et scurisez votre matriel</p></div></div><div class="flex items-center space-x-4" data-v-cb538253><div class="flex-shrink-0 text-2xl" data-v-cb538253></div><div data-v-cb538253><h4 class="font-semibold" data-v-cb538253>Station mto</h4><p class="text-gray-600" data-v-cb538253>Optimisez vos dcisions avec des donnes en temps rel</p></div></div></div></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8" data-v-cb538253><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-cb538253><div class="flex items-center mb-4" data-v-cb538253><span class="text-2xl mr-2" data-v-cb538253></span><h3 class="text-lg font-semibold text-gray-900" data-v-cb538253>Carte Interactive</h3></div><p class="text-gray-600" data-v-cb538253>Imaginez... Une carte interactive o tout est sous contrle ! Tout est centralis, organis et accessible en un clin d&#39;il !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-cb538253><div class="flex items-center mb-4" data-v-cb538253><span class="text-2xl mr-2" data-v-cb538253></span><h3 class="text-lg font-semibold text-gray-900" data-v-cb538253>Collaboration en Temps Rel</h3></div><p class="text-gray-600" data-v-cb538253>Travail d&#39;quipe simplifi : Collaborez en temps rel sur une interface ultra-intuitive. Vos quipes restent synchronises et efficaces !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-cb538253><div class="flex items-center mb-4" data-v-cb538253><span class="text-2xl mr-2" data-v-cb538253></span><h3 class="text-lg font-semibold text-gray-900" data-v-cb538253>Cerveau Cartographique</h3></div><p class="text-gray-600" data-v-cb538253>Un cerveau cartographique : Dessinez, annotez, planifiez, suivez !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-cb538253><div class="flex items-center mb-4" data-v-cb538253><span class="text-2xl mr-2" data-v-cb538253></span><h3 class="text-lg font-semibold text-gray-900" data-v-cb538253>Accs Scuris</h3></div><p class="text-gray-600" data-v-cb538253>Accs scuris et intelligent : Grez les droits d&#39;accs de vos salaris et prestataires en un clic.</p></div></div>',2)),E("div",_9,[S[13]||(S[13]=E("h3",{class:"text-2xl font-bold text-center text-gray-900 mb-8"},"Ils utilisent TagMap",-1)),E("div",w9,[(Me(!0),De(gn,null,Vn(f.value,N=>(Me(),De("button",{key:N,onClick:T=>o.value=N,class:bi(["px-4 py-2 rounded-full text-sm font-medium transition-all duration-200",o.value===N?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},At(N),11,x9))),128))]),E("div",L9,[(Me(!0),De(gn,null,Vn(p.value,N=>(Me(),De("div",{key:N.type,class:"bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20 transition-all duration-300 hover:shadow-xl"},[E("div",C9,[E("span",S9,At(N.icon),1),E("span",E9,At(N.type),1)]),E("p",P9,At(N.text),1)]))),128))]),v.value>1?(Me(),De("div",k9,[(Me(!0),De(gn,null,Vn(v.value,N=>(Me(),De("button",{key:N,onClick:T=>a.value=N,class:bi(["w-8 h-8 rounded-full text-sm font-medium transition-all duration-200",a.value===N?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},At(N),11,M9))),128))])):Ht("",!0)])]),S[15]||(S[15]=E("div",{class:"h-16"},null,-1))])])}}}),T9=Qc(A9,[["__scopeId","data-v-cb538253"]]),O9="/static/frontend/assets/logo.svg";var eb={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(Jo,function(n){var r="1.9.4";function i(u){var y,P,V,ie;for(P=1,V=arguments.length;P<V;P++){ie=arguments[P];for(y in ie)u[y]=ie[y]}return u}var s=Object.create||function(){function u(){}return function(y){return u.prototype=y,new u}}();function o(u,y){var P=Array.prototype.slice;if(u.bind)return u.bind.apply(u,P.call(arguments,1));var V=P.call(arguments,2);return function(){return u.apply(y,V.length?V.concat(P.call(arguments)):arguments)}}var a=0;function l(u){return"_leaflet_id"in u||(u._leaflet_id=++a),u._leaflet_id}function c(u,y,P){var V,ie,Se,nt;return nt=function(){V=!1,ie&&(Se.apply(P,ie),ie=!1)},Se=function(){V?ie=arguments:(u.apply(P,arguments),setTimeout(nt,y),V=!0)},Se}function f(u,y,P){var V=y[1],ie=y[0],Se=V-ie;return u===V&&P?u:((u-ie)%Se+Se)%Se+ie}function p(){return!1}function v(u,y){if(y===!1)return u;var P=Math.pow(10,y===void 0?6:y);return Math.round(u*P)/P}function m(u){return u.trim?u.trim():u.replace(/^\s+|\s+$/g,"")}function C(u){return m(u).split(/\s+/)}function S(u,y){Object.prototype.hasOwnProperty.call(u,"options")||(u.options=u.options?s(u.options):{});for(var P in y)u.options[P]=y[P];return u.options}function I(u,y,P){var V=[];for(var ie in u)V.push(encodeURIComponent(P?ie.toUpperCase():ie)+"="+encodeURIComponent(u[ie]));return(!y||y.indexOf("?")===-1?"?":"&")+V.join("&")}var N=/\{ *([\w_ -]+) *\}/g;function T(u,y){return u.replace(N,function(P,V){var ie=y[V];if(ie===void 0)throw new Error("No value provided for variable "+P);return typeof ie=="function"&&(ie=ie(y)),ie})}var j=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"};function W(u,y){for(var P=0;P<u.length;P++)if(u[P]===y)return P;return-1}var X="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ce(u){return window["webkit"+u]||window["moz"+u]||window["ms"+u]}var he=0;function O(u){var y=+new Date,P=Math.max(0,16-(y-he));return he=y+P,window.setTimeout(u,P)}var B=window.requestAnimationFrame||ce("RequestAnimationFrame")||O,q=window.cancelAnimationFrame||ce("CancelAnimationFrame")||ce("CancelRequestAnimationFrame")||function(u){window.clearTimeout(u)};function F(u,y,P){if(P&&B===O)u.call(y);else return B.call(window,o(u,y))}function R(u){u&&q.call(window,u)}var K={__proto__:null,extend:i,create:s,bind:o,get lastId(){return a},stamp:l,throttle:c,wrapNum:f,falseFn:p,formatNum:v,trim:m,splitWords:C,setOptions:S,getParamString:I,template:T,isArray:j,indexOf:W,emptyImageUrl:X,requestFn:B,cancelFn:q,requestAnimFrame:F,cancelAnimFrame:R};function Z(){}Z.extend=function(u){var y=function(){S(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},P=y.__super__=this.prototype,V=s(P);V.constructor=y,y.prototype=V;for(var ie in this)Object.prototype.hasOwnProperty.call(this,ie)&&ie!=="prototype"&&ie!=="__super__"&&(y[ie]=this[ie]);return u.statics&&i(y,u.statics),u.includes&&(Y(u.includes),i.apply(null,[V].concat(u.includes))),i(V,u),delete V.statics,delete V.includes,V.options&&(V.options=P.options?s(P.options):{},i(V.options,u.options)),V._initHooks=[],V.callInitHooks=function(){if(!this._initHooksCalled){P.callInitHooks&&P.callInitHooks.call(this),this._initHooksCalled=!0;for(var Se=0,nt=V._initHooks.length;Se<nt;Se++)V._initHooks[Se].call(this)}},y},Z.include=function(u){var y=this.prototype.options;return i(this.prototype,u),u.options&&(this.prototype.options=y,this.mergeOptions(u.options)),this},Z.mergeOptions=function(u){return i(this.prototype.options,u),this},Z.addInitHook=function(u){var y=Array.prototype.slice.call(arguments,1),P=typeof u=="function"?u:function(){this[u].apply(this,y)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(P),this};function Y(u){if(!(typeof L>"u"||!L||!L.Mixin)){u=j(u)?u:[u];for(var y=0;y<u.length;y++)u[y]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var k={on:function(u,y,P){if(typeof u=="object")for(var V in u)this._on(V,u[V],y);else{u=C(u);for(var ie=0,Se=u.length;ie<Se;ie++)this._on(u[ie],y,P)}return this},off:function(u,y,P){if(!arguments.length)delete this._events;else if(typeof u=="object")for(var V in u)this._off(V,u[V],y);else{u=C(u);for(var ie=arguments.length===1,Se=0,nt=u.length;Se<nt;Se++)ie?this._off(u[Se]):this._off(u[Se],y,P)}return this},_on:function(u,y,P,V){if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}if(this._listens(u,y,P)===!1){P===this&&(P=void 0);var ie={fn:y,ctx:P};V&&(ie.once=!0),this._events=this._events||{},this._events[u]=this._events[u]||[],this._events[u].push(ie)}},_off:function(u,y,P){var V,ie,Se;if(this._events&&(V=this._events[u],!!V)){if(arguments.length===1){if(this._firingCount)for(ie=0,Se=V.length;ie<Se;ie++)V[ie].fn=p;delete this._events[u];return}if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}var nt=this._listens(u,y,P);if(nt!==!1){var Pt=V[nt];this._firingCount&&(Pt.fn=p,this._events[u]=V=V.slice()),V.splice(nt,1)}}},fire:function(u,y,P){if(!this.listens(u,P))return this;var V=i({},y,{type:u,target:this,sourceTarget:y&&y.sourceTarget||this});if(this._events){var ie=this._events[u];if(ie){this._firingCount=this._firingCount+1||1;for(var Se=0,nt=ie.length;Se<nt;Se++){var Pt=ie[Se],jt=Pt.fn;Pt.once&&this.off(u,jt,Pt.ctx),jt.call(Pt.ctx||this,V)}this._firingCount--}}return P&&this._propagateEvent(V),this},listens:function(u,y,P,V){typeof u!="string"&&console.warn('"string" type argument expected');var ie=y;typeof y!="function"&&(V=!!y,ie=void 0,P=void 0);var Se=this._events&&this._events[u];if(Se&&Se.length&&this._listens(u,ie,P)!==!1)return!0;if(V){for(var nt in this._eventParents)if(this._eventParents[nt].listens(u,y,P,V))return!0}return!1},_listens:function(u,y,P){if(!this._events)return!1;var V=this._events[u]||[];if(!y)return!!V.length;P===this&&(P=void 0);for(var ie=0,Se=V.length;ie<Se;ie++)if(V[ie].fn===y&&V[ie].ctx===P)return ie;return!1},once:function(u,y,P){if(typeof u=="object")for(var V in u)this._on(V,u[V],y,!0);else{u=C(u);for(var ie=0,Se=u.length;ie<Se;ie++)this._on(u[ie],y,P,!0)}return this},addEventParent:function(u){return this._eventParents=this._eventParents||{},this._eventParents[l(u)]=u,this},removeEventParent:function(u){return this._eventParents&&delete this._eventParents[l(u)],this},_propagateEvent:function(u){for(var y in this._eventParents)this._eventParents[y].fire(u.type,i({layer:u.target,propagatedFrom:u.target},u),!0)}};k.addEventListener=k.on,k.removeEventListener=k.clearAllEventListeners=k.off,k.addOneTimeEventListener=k.once,k.fireEvent=k.fire,k.hasEventListeners=k.listens;var U=Z.extend(k);function H(u,y,P){this.x=P?Math.round(u):u,this.y=P?Math.round(y):y}var ue=Math.trunc||function(u){return u>0?Math.floor(u):Math.ceil(u)};H.prototype={clone:function(){return new H(this.x,this.y)},add:function(u){return this.clone()._add(_e(u))},_add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.clone()._subtract(_e(u))},_subtract:function(u){return this.x-=u.x,this.y-=u.y,this},divideBy:function(u){return this.clone()._divideBy(u)},_divideBy:function(u){return this.x/=u,this.y/=u,this},multiplyBy:function(u){return this.clone()._multiplyBy(u)},_multiplyBy:function(u){return this.x*=u,this.y*=u,this},scaleBy:function(u){return new H(this.x*u.x,this.y*u.y)},unscaleBy:function(u){return new H(this.x/u.x,this.y/u.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ue(this.x),this.y=ue(this.y),this},distanceTo:function(u){u=_e(u);var y=u.x-this.x,P=u.y-this.y;return Math.sqrt(y*y+P*P)},equals:function(u){return u=_e(u),u.x===this.x&&u.y===this.y},contains:function(u){return u=_e(u),Math.abs(u.x)<=Math.abs(this.x)&&Math.abs(u.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function _e(u,y,P){return u instanceof H?u:j(u)?new H(u[0],u[1]):u==null?u:typeof u=="object"&&"x"in u&&"y"in u?new H(u.x,u.y):new H(u,y,P)}function Ie(u,y){if(u)for(var P=y?[u,y]:u,V=0,ie=P.length;V<ie;V++)this.extend(P[V])}Ie.prototype={extend:function(u){var y,P;if(!u)return this;if(u instanceof H||typeof u[0]=="number"||"x"in u)y=P=_e(u);else if(u=ee(u),y=u.min,P=u.max,!y||!P)return this;return!this.min&&!this.max?(this.min=y.clone(),this.max=P.clone()):(this.min.x=Math.min(y.x,this.min.x),this.max.x=Math.max(P.x,this.max.x),this.min.y=Math.min(y.y,this.min.y),this.max.y=Math.max(P.y,this.max.y)),this},getCenter:function(u){return _e((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,u)},getBottomLeft:function(){return _e(this.min.x,this.max.y)},getTopRight:function(){return _e(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(u){var y,P;return typeof u[0]=="number"||u instanceof H?u=_e(u):u=ee(u),u instanceof Ie?(y=u.min,P=u.max):y=P=u,y.x>=this.min.x&&P.x<=this.max.x&&y.y>=this.min.y&&P.y<=this.max.y},intersects:function(u){u=ee(u);var y=this.min,P=this.max,V=u.min,ie=u.max,Se=ie.x>=y.x&&V.x<=P.x,nt=ie.y>=y.y&&V.y<=P.y;return Se&&nt},overlaps:function(u){u=ee(u);var y=this.min,P=this.max,V=u.min,ie=u.max,Se=ie.x>y.x&&V.x<P.x,nt=ie.y>y.y&&V.y<P.y;return Se&&nt},isValid:function(){return!!(this.min&&this.max)},pad:function(u){var y=this.min,P=this.max,V=Math.abs(y.x-P.x)*u,ie=Math.abs(y.y-P.y)*u;return ee(_e(y.x-V,y.y-ie),_e(P.x+V,P.y+ie))},equals:function(u){return u?(u=ee(u),this.min.equals(u.getTopLeft())&&this.max.equals(u.getBottomRight())):!1}};function ee(u,y){return!u||u instanceof Ie?u:new Ie(u,y)}function te(u,y){if(u)for(var P=y?[u,y]:u,V=0,ie=P.length;V<ie;V++)this.extend(P[V])}te.prototype={extend:function(u){var y=this._southWest,P=this._northEast,V,ie;if(u instanceof ge)V=u,ie=u;else if(u instanceof te){if(V=u._southWest,ie=u._northEast,!V||!ie)return this}else return u?this.extend(ve(u)||oe(u)):this;return!y&&!P?(this._southWest=new ge(V.lat,V.lng),this._northEast=new ge(ie.lat,ie.lng)):(y.lat=Math.min(V.lat,y.lat),y.lng=Math.min(V.lng,y.lng),P.lat=Math.max(ie.lat,P.lat),P.lng=Math.max(ie.lng,P.lng)),this},pad:function(u){var y=this._southWest,P=this._northEast,V=Math.abs(y.lat-P.lat)*u,ie=Math.abs(y.lng-P.lng)*u;return new te(new ge(y.lat-V,y.lng-ie),new ge(P.lat+V,P.lng+ie))},getCenter:function(){return new ge((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ge(this.getNorth(),this.getWest())},getSouthEast:function(){return new ge(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(u){typeof u[0]=="number"||u instanceof ge||"lat"in u?u=ve(u):u=oe(u);var y=this._southWest,P=this._northEast,V,ie;return u instanceof te?(V=u.getSouthWest(),ie=u.getNorthEast()):V=ie=u,V.lat>=y.lat&&ie.lat<=P.lat&&V.lng>=y.lng&&ie.lng<=P.lng},intersects:function(u){u=oe(u);var y=this._southWest,P=this._northEast,V=u.getSouthWest(),ie=u.getNorthEast(),Se=ie.lat>=y.lat&&V.lat<=P.lat,nt=ie.lng>=y.lng&&V.lng<=P.lng;return Se&&nt},overlaps:function(u){u=oe(u);var y=this._southWest,P=this._northEast,V=u.getSouthWest(),ie=u.getNorthEast(),Se=ie.lat>y.lat&&V.lat<P.lat,nt=ie.lng>y.lng&&V.lng<P.lng;return Se&&nt},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(u,y){return u?(u=oe(u),this._southWest.equals(u.getSouthWest(),y)&&this._northEast.equals(u.getNorthEast(),y)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function oe(u,y){return u instanceof te?u:new te(u,y)}function ge(u,y,P){if(isNaN(u)||isNaN(y))throw new Error("Invalid LatLng object: ("+u+", "+y+")");this.lat=+u,this.lng=+y,P!==void 0&&(this.alt=+P)}ge.prototype={equals:function(u,y){if(!u)return!1;u=ve(u);var P=Math.max(Math.abs(this.lat-u.lat),Math.abs(this.lng-u.lng));return P<=(y===void 0?1e-9:y)},toString:function(u){return"LatLng("+v(this.lat,u)+", "+v(this.lng,u)+")"},distanceTo:function(u){return pe.distance(this,ve(u))},wrap:function(){return pe.wrapLatLng(this)},toBounds:function(u){var y=180*u/40075017,P=y/Math.cos(Math.PI/180*this.lat);return oe([this.lat-y,this.lng-P],[this.lat+y,this.lng+P])},clone:function(){return new ge(this.lat,this.lng,this.alt)}};function ve(u,y,P){return u instanceof ge?u:j(u)&&typeof u[0]!="object"?u.length===3?new ge(u[0],u[1],u[2]):u.length===2?new ge(u[0],u[1]):null:u==null?u:typeof u=="object"&&"lat"in u?new ge(u.lat,"lng"in u?u.lng:u.lon,u.alt):y===void 0?null:new ge(u,y,P)}var ye={latLngToPoint:function(u,y){var P=this.projection.project(u),V=this.scale(y);return this.transformation._transform(P,V)},pointToLatLng:function(u,y){var P=this.scale(y),V=this.transformation.untransform(u,P);return this.projection.unproject(V)},project:function(u){return this.projection.project(u)},unproject:function(u){return this.projection.unproject(u)},scale:function(u){return 256*Math.pow(2,u)},zoom:function(u){return Math.log(u/256)/Math.LN2},getProjectedBounds:function(u){if(this.infinite)return null;var y=this.projection.bounds,P=this.scale(u),V=this.transformation.transform(y.min,P),ie=this.transformation.transform(y.max,P);return new Ie(V,ie)},infinite:!1,wrapLatLng:function(u){var y=this.wrapLng?f(u.lng,this.wrapLng,!0):u.lng,P=this.wrapLat?f(u.lat,this.wrapLat,!0):u.lat,V=u.alt;return new ge(P,y,V)},wrapLatLngBounds:function(u){var y=u.getCenter(),P=this.wrapLatLng(y),V=y.lat-P.lat,ie=y.lng-P.lng;if(V===0&&ie===0)return u;var Se=u.getSouthWest(),nt=u.getNorthEast(),Pt=new ge(Se.lat-V,Se.lng-ie),jt=new ge(nt.lat-V,nt.lng-ie);return new te(Pt,jt)}},pe=i({},ye,{wrapLng:[-180,180],R:6371e3,distance:function(u,y){var P=Math.PI/180,V=u.lat*P,ie=y.lat*P,Se=Math.sin((y.lat-u.lat)*P/2),nt=Math.sin((y.lng-u.lng)*P/2),Pt=Se*Se+Math.cos(V)*Math.cos(ie)*nt*nt,jt=2*Math.atan2(Math.sqrt(Pt),Math.sqrt(1-Pt));return this.R*jt}}),fe=6378137,$e={R:fe,MAX_LATITUDE:85.0511287798,project:function(u){var y=Math.PI/180,P=this.MAX_LATITUDE,V=Math.max(Math.min(P,u.lat),-P),ie=Math.sin(V*y);return new H(this.R*u.lng*y,this.R*Math.log((1+ie)/(1-ie))/2)},unproject:function(u){var y=180/Math.PI;return new ge((2*Math.atan(Math.exp(u.y/this.R))-Math.PI/2)*y,u.x*y/this.R)},bounds:function(){var u=fe*Math.PI;return new Ie([-u,-u],[u,u])}()};function Ne(u,y,P,V){if(j(u)){this._a=u[0],this._b=u[1],this._c=u[2],this._d=u[3];return}this._a=u,this._b=y,this._c=P,this._d=V}Ne.prototype={transform:function(u,y){return this._transform(u.clone(),y)},_transform:function(u,y){return y=y||1,u.x=y*(this._a*u.x+this._b),u.y=y*(this._c*u.y+this._d),u},untransform:function(u,y){return y=y||1,new H((u.x/y-this._b)/this._a,(u.y/y-this._d)/this._c)}};function ot(u,y,P,V){return new Ne(u,y,P,V)}var le=i({},pe,{code:"EPSG:3857",projection:$e,transformation:function(){var u=.5/(Math.PI*$e.R);return ot(u,.5,-u,.5)}()}),ae=i({},le,{code:"EPSG:900913"});function de(u){return document.createElementNS("http://www.w3.org/2000/svg",u)}function re(u,y){var P="",V,ie,Se,nt,Pt,jt;for(V=0,Se=u.length;V<Se;V++){for(Pt=u[V],ie=0,nt=Pt.length;ie<nt;ie++)jt=Pt[ie],P+=(ie?"L":"M")+jt.x+" "+jt.y;P+=y?Xt.svg?"z":"x":""}return P||"M0 0"}var Ae=document.documentElement.style,Ge="ActiveXObject"in window,tt=Ge&&!document.addEventListener,at="msLaunchUri"in navigator&&!("documentMode"in document),ut=_n("webkit"),gt=_n("android"),$t=_n("android 2")||_n("android 3"),Rt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Gt=gt&&_n("Google")&&Rt<537&&!("AudioNode"in window),ln=!!window.opera,mn=!at&&_n("chrome"),yn=_n("gecko")&&!ut&&!ln&&!Ge,Ze=!mn&&_n("safari"),it=_n("phantom"),et="OTransition"in Ae,Bt=navigator.platform.indexOf("Win")===0,Zt=Ge&&"transition"in Ae,Sn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!$t,bn="MozPerspective"in Ae,xn=!window.L_DISABLE_3D&&(Zt||Sn||bn)&&!et&&!it,zn=typeof orientation<"u"||_n("mobile"),vn=zn&&ut,tn=zn&&Sn,un=!window.PointerEvent&&window.MSPointerEvent,Xn=!!(window.PointerEvent||un),nr="ontouchstart"in window||!!window.TouchEvent,ur=!window.L_NO_TOUCH&&(nr||Xn),Rn=zn&&ln,Cr=zn&&yn,Ki=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ci=function(){var u=!1;try{var y=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("testPassiveEventSupport",p,y),window.removeEventListener("testPassiveEventSupport",p,y)}catch{}return u}(),Us=function(){return!!document.createElement("canvas").getContext}(),ss=!!(document.createElementNS&&de("svg").createSVGRect),Gn=!!ss&&function(){var u=document.createElement("div");return u.innerHTML="<svg/>",(u.firstChild&&u.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ot=!ss&&function(){try{var u=document.createElement("div");u.innerHTML='<v:shape adj="1"/>';var y=u.firstChild;return y.style.behavior="url(#default#VML)",y&&typeof y.adj=="object"}catch{return!1}}(),Je=navigator.platform.indexOf("Mac")===0,Ut=navigator.platform.indexOf("Linux")===0;function _n(u){return navigator.userAgent.toLowerCase().indexOf(u)>=0}var Xt={ie:Ge,ielt9:tt,edge:at,webkit:ut,android:gt,android23:$t,androidStock:Gt,opera:ln,chrome:mn,gecko:yn,safari:Ze,phantom:it,opera12:et,win:Bt,ie3d:Zt,webkit3d:Sn,gecko3d:bn,any3d:xn,mobile:zn,mobileWebkit:vn,mobileWebkit3d:tn,msPointer:un,pointer:Xn,touch:ur,touchNative:nr,mobileOpera:Rn,mobileGecko:Cr,retina:Ki,passiveEvents:Ci,canvas:Us,svg:ss,vml:Ot,inlineSvg:Gn,mac:Je,linux:Ut},Fn=Xt.msPointer?"MSPointerDown":"pointerdown",Wt=Xt.msPointer?"MSPointerMove":"pointermove",Lt=Xt.msPointer?"MSPointerUp":"pointerup",hn=Xt.msPointer?"MSPointerCancel":"pointercancel",Ln={touchstart:Fn,touchmove:Wt,touchend:Lt,touchcancel:hn},On={touchstart:Ls,touchmove:gr,touchend:gr,touchcancel:gr},Wn={},ar=!1;function Xr(u,y,P){return y==="touchstart"&&ir(),On[y]?(P=On[y].bind(this,P),u.addEventListener(Ln[y],P,!1),P):(console.warn("wrong event specified:",y),p)}function sr(u,y,P){if(!Ln[y]){console.warn("wrong event specified:",y);return}u.removeEventListener(Ln[y],P,!1)}function Fi(u){Wn[u.pointerId]=u}function Gr(u){Wn[u.pointerId]&&(Wn[u.pointerId]=u)}function _o(u){delete Wn[u.pointerId]}function ir(){ar||(document.addEventListener(Fn,Fi,!0),document.addEventListener(Wt,Gr,!0),document.addEventListener(Lt,_o,!0),document.addEventListener(hn,_o,!0),ar=!0)}function gr(u,y){if(y.pointerType!==(y.MSPOINTER_TYPE_MOUSE||"mouse")){y.touches=[];for(var P in Wn)y.touches.push(Wn[P]);y.changedTouches=[y],u(y)}}function Ls(u,y){y.MSPOINTER_TYPE_TOUCH&&y.pointerType===y.MSPOINTER_TYPE_TOUCH&&dr(y),gr(u,y)}function Ha(u){var y={},P,V;for(V in u)P=u[V],y[V]=P&&P.bind?P.bind(u):P;return u=y,y.type="dblclick",y.detail=2,y.isTrusted=!1,y._simulated=!0,y}var vu=200;function _c(u,y){u.addEventListener("dblclick",y);var P=0,V;function ie(Se){if(Se.detail!==1){V=Se.detail;return}if(!(Se.pointerType==="mouse"||Se.sourceCapabilities&&!Se.sourceCapabilities.firesTouchEvents)){var nt=Xa(Se);if(!(nt.some(function(jt){return jt instanceof HTMLLabelElement&&jt.attributes.for})&&!nt.some(function(jt){return jt instanceof HTMLInputElement||jt instanceof HTMLSelectElement}))){var Pt=Date.now();Pt-P<=vu?(V++,V===2&&y(Ha(Se))):V=1,P=Pt}}}return u.addEventListener("click",ie),{dblclick:y,simDblclick:ie}}function wc(u,y){u.removeEventListener("dblclick",y.dblclick),u.removeEventListener("click",y.simDblclick)}var gl=vl(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ml=vl(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),$u=ml==="webkitTransition"||ml==="OTransition"?ml+"End":"transitionend";function xc(u){return typeof u=="string"?document.getElementById(u):u}function Mo(u,y){var P=u.style[y]||u.currentStyle&&u.currentStyle[y];if((!P||P==="auto")&&document.defaultView){var V=document.defaultView.getComputedStyle(u,null);P=V?V[y]:null}return P==="auto"?null:P}function Wr(u,y,P){var V=document.createElement(u);return V.className=y||"",P&&P.appendChild(V),V}function fr(u){var y=u.parentNode;y&&y.removeChild(u)}function Ga(u){for(;u.firstChild;)u.removeChild(u.firstChild)}function ga(u){var y=u.parentNode;y&&y.lastChild!==u&&y.appendChild(u)}function Ro(u){var y=u.parentNode;y&&y.firstChild!==u&&y.insertBefore(u,y.firstChild)}function ql(u,y){if(u.classList!==void 0)return u.classList.contains(y);var P=Cs(u);return P.length>0&&new RegExp("(^|\\s)"+y+"(\\s|$)").test(P)}function mr(u,y){if(u.classList!==void 0)for(var P=C(y),V=0,ie=P.length;V<ie;V++)u.classList.add(P[V]);else if(!ql(u,y)){var Se=Cs(u);Wa(u,(Se?Se+" ":"")+y)}}function qr(u,y){u.classList!==void 0?u.classList.remove(y):Wa(u,m((" "+Cs(u)+" ").replace(" "+y+" "," ")))}function Wa(u,y){u.className.baseVal===void 0?u.className=y:u.className.baseVal=y}function Cs(u){return u.correspondingElement&&(u=u.correspondingElement),u.className.baseVal===void 0?u.className:u.className.baseVal}function Ss(u,y){"opacity"in u.style?u.style.opacity=y:"filter"in u.style&&Vu(u,y)}function Vu(u,y){var P=!1,V="DXImageTransform.Microsoft.Alpha";try{P=u.filters.item(V)}catch{if(y===1)return}y=Math.round(y*100),P?(P.Enabled=y!==100,P.Opacity=y):u.style.filter+=" progid:"+V+"(opacity="+y+")"}function vl(u){for(var y=document.documentElement.style,P=0;P<u.length;P++)if(u[P]in y)return u[P];return!1}function ma(u,y,P){var V=y||new H(0,0);u.style[gl]=(Xt.ie3d?"translate("+V.x+"px,"+V.y+"px)":"translate3d("+V.x+"px,"+V.y+"px,0)")+(P?" scale("+P+")":"")}function Di(u,y){u._leaflet_pos=y,Xt.any3d?ma(u,y):(u.style.left=y.x+"px",u.style.top=y.y+"px")}function Fo(u){return u._leaflet_pos||new H(0,0)}var qa,wo,yu;if("onselectstart"in document)qa=function(){vr(window,"selectstart",dr)},wo=function(){$r(window,"selectstart",dr)};else{var Ya=vl(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);qa=function(){if(Ya){var u=document.documentElement.style;yu=u[Ya],u[Ya]="none"}},wo=function(){Ya&&(document.documentElement.style[Ya]=yu,yu=void 0)}}function Hu(){vr(window,"dragstart",dr)}function jo(){$r(window,"dragstart",dr)}var va,Ka;function Yl(u){for(;u.tabIndex===-1;)u=u.parentNode;u.style&&(os(),va=u,Ka=u.style.outlineStyle,u.style.outlineStyle="none",vr(window,"keydown",os))}function os(){va&&(va.style.outlineStyle=Ka,va=void 0,Ka=void 0,$r(window,"keydown",os))}function Lc(u){do u=u.parentNode;while((!u.offsetWidth||!u.offsetHeight)&&u!==document.body);return u}function bu(u){var y=u.getBoundingClientRect();return{x:y.width/u.offsetWidth||1,y:y.height/u.offsetHeight||1,boundingClientRect:y}}var cr={__proto__:null,TRANSFORM:gl,TRANSITION:ml,TRANSITION_END:$u,get:xc,getStyle:Mo,create:Wr,remove:fr,empty:Ga,toFront:ga,toBack:Ro,hasClass:ql,addClass:mr,removeClass:qr,setClass:Wa,getClass:Cs,setOpacity:Ss,testProp:vl,setTransform:ma,setPosition:Di,getPosition:Fo,get disableTextSelection(){return qa},get enableTextSelection(){return wo},disableImageDrag:Hu,enableImageDrag:jo,preventOutline:Yl,restoreOutline:os,getSizedParentNode:Lc,getScale:bu};function vr(u,y,P,V){if(y&&typeof y=="object")for(var ie in y)bl(u,ie,y[ie],P);else{y=C(y);for(var Se=0,nt=y.length;Se<nt;Se++)bl(u,y[Se],P,V)}return this}var zo="_leaflet_events";function $r(u,y,P,V){if(arguments.length===1)Gu(u),delete u[zo];else if(y&&typeof y=="object")for(var ie in y)Uo(u,ie,y[ie],P);else if(y=C(y),arguments.length===2)Gu(u,function(Pt){return W(y,Pt)!==-1});else for(var Se=0,nt=y.length;Se<nt;Se++)Uo(u,y[Se],P,V);return this}function Gu(u,y){for(var P in u[zo]){var V=P.split(/\d/)[0];(!y||y(V))&&Uo(u,V,null,null,P)}}var yl={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function bl(u,y,P,V){var ie=y+l(P)+(V?"_"+l(V):"");if(u[zo]&&u[zo][ie])return this;var Se=function(Pt){return P.call(V||u,Pt||window.event)},nt=Se;!Xt.touchNative&&Xt.pointer&&y.indexOf("touch")===0?Se=Xr(u,y,Se):Xt.touch&&y==="dblclick"?Se=_c(u,Se):"addEventListener"in u?y==="touchstart"||y==="touchmove"||y==="wheel"||y==="mousewheel"?u.addEventListener(yl[y]||y,Se,Xt.passiveEvents?{passive:!1}:!1):y==="mouseenter"||y==="mouseleave"?(Se=function(Pt){Pt=Pt||window.event,_l(u,Pt)&&nt(Pt)},u.addEventListener(yl[y],Se,!1)):u.addEventListener(y,nt,!1):u.attachEvent("on"+y,Se),u[zo]=u[zo]||{},u[zo][ie]=Se}function Uo(u,y,P,V,ie){ie=ie||y+l(P)+(V?"_"+l(V):"");var Se=u[zo]&&u[zo][ie];if(!Se)return this;!Xt.touchNative&&Xt.pointer&&y.indexOf("touch")===0?sr(u,y,Se):Xt.touch&&y==="dblclick"?wc(u,Se):"removeEventListener"in u?u.removeEventListener(yl[y]||y,Se,!1):u.detachEvent("on"+y,Se),u[zo][ie]=null}function Za(u){return u.stopPropagation?u.stopPropagation():u.originalEvent?u.originalEvent._stopped=!0:u.cancelBubble=!0,this}function Wu(u){return bl(u,"wheel",Za),this}function Kl(u){return vr(u,"mousedown touchstart dblclick contextmenu",Za),u._leaflet_disable_click=!0,this}function dr(u){return u.preventDefault?u.preventDefault():u.returnValue=!1,this}function Ar(u){return dr(u),Za(u),this}function Xa(u){if(u.composedPath)return u.composedPath();for(var y=[],P=u.target;P;)y.push(P),P=P.parentNode;return y}function Cc(u,y){if(!y)return new H(u.clientX,u.clientY);var P=bu(y),V=P.boundingClientRect;return new H((u.clientX-V.left)/P.x-y.clientLeft,(u.clientY-V.top)/P.y-y.clientTop)}var Zl=Xt.linux&&Xt.chrome?window.devicePixelRatio:Xt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function _u(u){return Xt.edge?u.wheelDeltaY/2:u.deltaY&&u.deltaMode===0?-u.deltaY/Zl:u.deltaY&&u.deltaMode===1?-u.deltaY*20:u.deltaY&&u.deltaMode===2?-u.deltaY*60:u.deltaX||u.deltaZ?0:u.wheelDelta?(u.wheelDeltaY||u.wheelDelta)/2:u.detail&&Math.abs(u.detail)<32765?-u.detail*20:u.detail?u.detail/-32765*60:0}function _l(u,y){var P=y.relatedTarget;if(!P)return!0;try{for(;P&&P!==u;)P=P.parentNode}catch{return!1}return P!==u}var Xl={__proto__:null,on:vr,off:$r,stopPropagation:Za,disableScrollPropagation:Wu,disableClickPropagation:Kl,preventDefault:dr,stop:Ar,getPropagationPath:Xa,getMousePosition:Cc,getWheelDelta:_u,isExternalTarget:_l,addListener:vr,removeListener:$r},wu=U.extend({run:function(u,y,P,V){this.stop(),this._el=u,this._inProgress=!0,this._duration=P||.25,this._easeOutPower=1/Math.max(V||.5,.2),this._startPos=Fo(u),this._offset=y.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=F(this._animate,this),this._step()},_step:function(u){var y=+new Date-this._startTime,P=this._duration*1e3;y<P?this._runFrame(this._easeOut(y/P),u):(this._runFrame(1),this._complete())},_runFrame:function(u,y){var P=this._startPos.add(this._offset.multiplyBy(u));y&&P._round(),Di(this._el,P),this.fire("step")},_complete:function(){R(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(u){return 1-Math.pow(1-u,this._easeOutPower)}}),Ir=U.extend({options:{crs:le,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(u,y){y=S(this,y),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(u),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),y.maxBounds&&this.setMaxBounds(y.maxBounds),y.zoom!==void 0&&(this._zoom=this._limitZoom(y.zoom)),y.center&&y.zoom!==void 0&&this.setView(ve(y.center),y.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ml&&Xt.any3d&&!Xt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),vr(this._proxy,$u,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(u,y,P){if(y=y===void 0?this._zoom:this._limitZoom(y),u=this._limitCenter(ve(u),y,this.options.maxBounds),P=P||{},this._stop(),this._loaded&&!P.reset&&P!==!0){P.animate!==void 0&&(P.zoom=i({animate:P.animate},P.zoom),P.pan=i({animate:P.animate,duration:P.duration},P.pan));var V=this._zoom!==y?this._tryAnimatedZoom&&this._tryAnimatedZoom(u,y,P.zoom):this._tryAnimatedPan(u,P.pan);if(V)return clearTimeout(this._sizeTimer),this}return this._resetView(u,y,P.pan&&P.pan.noMoveStart),this},setZoom:function(u,y){return this._loaded?this.setView(this.getCenter(),u,{zoom:y}):(this._zoom=u,this)},zoomIn:function(u,y){return u=u||(Xt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+u,y)},zoomOut:function(u,y){return u=u||(Xt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-u,y)},setZoomAround:function(u,y,P){var V=this.getZoomScale(y),ie=this.getSize().divideBy(2),Se=u instanceof H?u:this.latLngToContainerPoint(u),nt=Se.subtract(ie).multiplyBy(1-1/V),Pt=this.containerPointToLatLng(ie.add(nt));return this.setView(Pt,y,{zoom:P})},_getBoundsCenterZoom:function(u,y){y=y||{},u=u.getBounds?u.getBounds():oe(u);var P=_e(y.paddingTopLeft||y.padding||[0,0]),V=_e(y.paddingBottomRight||y.padding||[0,0]),ie=this.getBoundsZoom(u,!1,P.add(V));if(ie=typeof y.maxZoom=="number"?Math.min(y.maxZoom,ie):ie,ie===1/0)return{center:u.getCenter(),zoom:ie};var Se=V.subtract(P).divideBy(2),nt=this.project(u.getSouthWest(),ie),Pt=this.project(u.getNorthEast(),ie),jt=this.unproject(nt.add(Pt).divideBy(2).add(Se),ie);return{center:jt,zoom:ie}},fitBounds:function(u,y){if(u=oe(u),!u.isValid())throw new Error("Bounds are not valid.");var P=this._getBoundsCenterZoom(u,y);return this.setView(P.center,P.zoom,y)},fitWorld:function(u){return this.fitBounds([[-90,-180],[90,180]],u)},panTo:function(u,y){return this.setView(u,this._zoom,{pan:y})},panBy:function(u,y){if(u=_e(u).round(),y=y||{},!u.x&&!u.y)return this.fire("moveend");if(y.animate!==!0&&!this.getSize().contains(u))return this._resetView(this.unproject(this.project(this.getCenter()).add(u)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new wu,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),y.noMoveStart||this.fire("movestart"),y.animate!==!1){mr(this._mapPane,"leaflet-pan-anim");var P=this._getMapPanePos().subtract(u).round();this._panAnim.run(this._mapPane,P,y.duration||.25,y.easeLinearity)}else this._rawPanBy(u),this.fire("move").fire("moveend");return this},flyTo:function(u,y,P){if(P=P||{},P.animate===!1||!Xt.any3d)return this.setView(u,y,P);this._stop();var V=this.project(this.getCenter()),ie=this.project(u),Se=this.getSize(),nt=this._zoom;u=ve(u),y=y===void 0?nt:y;var Pt=Math.max(Se.x,Se.y),jt=Pt*this.getZoomScale(nt,y),nn=ie.distanceTo(V)||1,An=1.42,qn=An*An;function Sr(Jr){var Ds=Jr?-1:1,Oe=Jr?jt:Pt,ao=jt*jt-Pt*Pt+Ds*qn*qn*nn*nn,Ku=2*Oe*qn*nn,ys=ao/Ku,kr=Math.sqrt(ys*ys+1)-ys,Bh=kr<1e-9?-18:Math.log(kr);return Bh}function Qi(Jr){return(Math.exp(Jr)-Math.exp(-Jr))/2}function Ii(Jr){return(Math.exp(Jr)+Math.exp(-Jr))/2}function vs(Jr){return Qi(Jr)/Ii(Jr)}var ki=Sr(0);function oo(Jr){return Pt*(Ii(ki)/Ii(ki+An*Jr))}function nh(Jr){return Pt*(Ii(ki)*vs(ki+An*Jr)-Qi(ki))/qn}function ua(Jr){return 1-Math.pow(1-Jr,1.5)}var qo=Date.now(),Oo=(Sr(1)-ki)/An,Ef=P.duration?1e3*P.duration:1e3*Oo*.8;function Cu(){var Jr=(Date.now()-qo)/Ef,Ds=ua(Jr)*Oo;Jr<=1?(this._flyToFrame=F(Cu,this),this._move(this.unproject(V.add(ie.subtract(V).multiplyBy(nh(Ds)/nn)),nt),this.getScaleZoom(Pt/oo(Ds),nt),{flyTo:!0})):this._move(u,y)._moveEnd(!0)}return this._moveStart(!0,P.noMoveStart),Cu.call(this),this},flyToBounds:function(u,y){var P=this._getBoundsCenterZoom(u,y);return this.flyTo(P.center,P.zoom,y)},setMaxBounds:function(u){return u=oe(u),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),u.isValid()?(this.options.maxBounds=u,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(u){var y=this.options.minZoom;return this.options.minZoom=u,this._loaded&&y!==u&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(u):this},setMaxZoom:function(u){var y=this.options.maxZoom;return this.options.maxZoom=u,this._loaded&&y!==u&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(u):this},panInsideBounds:function(u,y){this._enforcingBounds=!0;var P=this.getCenter(),V=this._limitCenter(P,this._zoom,oe(u));return P.equals(V)||this.panTo(V,y),this._enforcingBounds=!1,this},panInside:function(u,y){y=y||{};var P=_e(y.paddingTopLeft||y.padding||[0,0]),V=_e(y.paddingBottomRight||y.padding||[0,0]),ie=this.project(this.getCenter()),Se=this.project(u),nt=this.getPixelBounds(),Pt=ee([nt.min.add(P),nt.max.subtract(V)]),jt=Pt.getSize();if(!Pt.contains(Se)){this._enforcingBounds=!0;var nn=Se.subtract(Pt.getCenter()),An=Pt.extend(Se).getSize().subtract(jt);ie.x+=nn.x<0?-An.x:An.x,ie.y+=nn.y<0?-An.y:An.y,this.panTo(this.unproject(ie),y),this._enforcingBounds=!1}return this},invalidateSize:function(u){if(!this._loaded)return this;u=i({animate:!1,pan:!0},u===!0?{animate:!0}:u);var y=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var P=this.getSize(),V=y.divideBy(2).round(),ie=P.divideBy(2).round(),Se=V.subtract(ie);return!Se.x&&!Se.y?this:(u.animate&&u.pan?this.panBy(Se):(u.pan&&this._rawPanBy(Se),this.fire("move"),u.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:y,newSize:P}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(u){if(u=this._locateOptions=i({timeout:1e4,watch:!1},u),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var y=o(this._handleGeolocationResponse,this),P=o(this._handleGeolocationError,this);return u.watch?this._locationWatchId=navigator.geolocation.watchPosition(y,P,u):navigator.geolocation.getCurrentPosition(y,P,u),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(u){if(this._container._leaflet_id){var y=u.code,P=u.message||(y===1?"permission denied":y===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:y,message:"Geolocation error: "+P+"."})}},_handleGeolocationResponse:function(u){if(this._container._leaflet_id){var y=u.coords.latitude,P=u.coords.longitude,V=new ge(y,P),ie=V.toBounds(u.coords.accuracy*2),Se=this._locateOptions;if(Se.setView){var nt=this.getBoundsZoom(ie);this.setView(V,Se.maxZoom?Math.min(nt,Se.maxZoom):nt)}var Pt={latlng:V,bounds:ie,timestamp:u.timestamp};for(var jt in u.coords)typeof u.coords[jt]=="number"&&(Pt[jt]=u.coords[jt]);this.fire("locationfound",Pt)}},addHandler:function(u,y){if(!y)return this;var P=this[u]=new y(this);return this._handlers.push(P),this.options[u]&&P.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),fr(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(R(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var u;for(u in this._layers)this._layers[u].remove();for(u in this._panes)fr(this._panes[u]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(u,y){var P="leaflet-pane"+(u?" leaflet-"+u.replace("Pane","")+"-pane":""),V=Wr("div",P,y||this._mapPane);return u&&(this._panes[u]=V),V},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var u=this.getPixelBounds(),y=this.unproject(u.getBottomLeft()),P=this.unproject(u.getTopRight());return new te(y,P)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(u,y,P){u=oe(u),P=_e(P||[0,0]);var V=this.getZoom()||0,ie=this.getMinZoom(),Se=this.getMaxZoom(),nt=u.getNorthWest(),Pt=u.getSouthEast(),jt=this.getSize().subtract(P),nn=ee(this.project(Pt,V),this.project(nt,V)).getSize(),An=Xt.any3d?this.options.zoomSnap:1,qn=jt.x/nn.x,Sr=jt.y/nn.y,Qi=y?Math.max(qn,Sr):Math.min(qn,Sr);return V=this.getScaleZoom(Qi,V),An&&(V=Math.round(V/(An/100))*(An/100),V=y?Math.ceil(V/An)*An:Math.floor(V/An)*An),Math.max(ie,Math.min(Se,V))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new H(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(u,y){var P=this._getTopLeftPoint(u,y);return new Ie(P,P.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(u){return this.options.crs.getProjectedBounds(u===void 0?this.getZoom():u)},getPane:function(u){return typeof u=="string"?this._panes[u]:u},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(u,y){var P=this.options.crs;return y=y===void 0?this._zoom:y,P.scale(u)/P.scale(y)},getScaleZoom:function(u,y){var P=this.options.crs;y=y===void 0?this._zoom:y;var V=P.zoom(u*P.scale(y));return isNaN(V)?1/0:V},project:function(u,y){return y=y===void 0?this._zoom:y,this.options.crs.latLngToPoint(ve(u),y)},unproject:function(u,y){return y=y===void 0?this._zoom:y,this.options.crs.pointToLatLng(_e(u),y)},layerPointToLatLng:function(u){var y=_e(u).add(this.getPixelOrigin());return this.unproject(y)},latLngToLayerPoint:function(u){var y=this.project(ve(u))._round();return y._subtract(this.getPixelOrigin())},wrapLatLng:function(u){return this.options.crs.wrapLatLng(ve(u))},wrapLatLngBounds:function(u){return this.options.crs.wrapLatLngBounds(oe(u))},distance:function(u,y){return this.options.crs.distance(ve(u),ve(y))},containerPointToLayerPoint:function(u){return _e(u).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(u){return _e(u).add(this._getMapPanePos())},containerPointToLatLng:function(u){var y=this.containerPointToLayerPoint(_e(u));return this.layerPointToLatLng(y)},latLngToContainerPoint:function(u){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ve(u)))},mouseEventToContainerPoint:function(u){return Cc(u,this._container)},mouseEventToLayerPoint:function(u){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(u))},mouseEventToLatLng:function(u){return this.layerPointToLatLng(this.mouseEventToLayerPoint(u))},_initContainer:function(u){var y=this._container=xc(u);if(y){if(y._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");vr(y,"scroll",this._onScroll,this),this._containerId=l(y)},_initLayout:function(){var u=this._container;this._fadeAnimated=this.options.fadeAnimation&&Xt.any3d,mr(u,"leaflet-container"+(Xt.touch?" leaflet-touch":"")+(Xt.retina?" leaflet-retina":"")+(Xt.ielt9?" leaflet-oldie":"")+(Xt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var y=Mo(u,"position");y!=="absolute"&&y!=="relative"&&y!=="fixed"&&y!=="sticky"&&(u.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var u=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Di(this._mapPane,new H(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(mr(u.markerPane,"leaflet-zoom-hide"),mr(u.shadowPane,"leaflet-zoom-hide"))},_resetView:function(u,y,P){Di(this._mapPane,new H(0,0));var V=!this._loaded;this._loaded=!0,y=this._limitZoom(y),this.fire("viewprereset");var ie=this._zoom!==y;this._moveStart(ie,P)._move(u,y)._moveEnd(ie),this.fire("viewreset"),V&&this.fire("load")},_moveStart:function(u,y){return u&&this.fire("zoomstart"),y||this.fire("movestart"),this},_move:function(u,y,P,V){y===void 0&&(y=this._zoom);var ie=this._zoom!==y;return this._zoom=y,this._lastCenter=u,this._pixelOrigin=this._getNewPixelOrigin(u),V?P&&P.pinch&&this.fire("zoom",P):((ie||P&&P.pinch)&&this.fire("zoom",P),this.fire("move",P)),this},_moveEnd:function(u){return u&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return R(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(u){Di(this._mapPane,this._getMapPanePos().subtract(u))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(u){this._targets={},this._targets[l(this._container)]=this;var y=u?$r:vr;y(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&y(window,"resize",this._onResize,this),Xt.any3d&&this.options.transform3DLimit&&(u?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){R(this._resizeRequest),this._resizeRequest=F(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var u=this._getMapPanePos();Math.max(Math.abs(u.x),Math.abs(u.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(u,y){for(var P=[],V,ie=y==="mouseout"||y==="mouseover",Se=u.target||u.srcElement,nt=!1;Se;){if(V=this._targets[l(Se)],V&&(y==="click"||y==="preclick")&&this._draggableMoved(V)){nt=!0;break}if(V&&V.listens(y,!0)&&(ie&&!_l(Se,u)||(P.push(V),ie))||Se===this._container)break;Se=Se.parentNode}return!P.length&&!nt&&!ie&&this.listens(y,!0)&&(P=[this]),P},_isClickDisabled:function(u){for(;u&&u!==this._container;){if(u._leaflet_disable_click)return!0;u=u.parentNode}},_handleDOMEvent:function(u){var y=u.target||u.srcElement;if(!(!this._loaded||y._leaflet_disable_events||u.type==="click"&&this._isClickDisabled(y))){var P=u.type;P==="mousedown"&&Yl(y),this._fireDOMEvent(u,P)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(u,y,P){if(u.type==="click"){var V=i({},u);V.type="preclick",this._fireDOMEvent(V,V.type,P)}var ie=this._findEventTargets(u,y);if(P){for(var Se=[],nt=0;nt<P.length;nt++)P[nt].listens(y,!0)&&Se.push(P[nt]);ie=Se.concat(ie)}if(ie.length){y==="contextmenu"&&dr(u);var Pt=ie[0],jt={originalEvent:u};if(u.type!=="keypress"&&u.type!=="keydown"&&u.type!=="keyup"){var nn=Pt.getLatLng&&(!Pt._radius||Pt._radius<=10);jt.containerPoint=nn?this.latLngToContainerPoint(Pt.getLatLng()):this.mouseEventToContainerPoint(u),jt.layerPoint=this.containerPointToLayerPoint(jt.containerPoint),jt.latlng=nn?Pt.getLatLng():this.layerPointToLatLng(jt.layerPoint)}for(nt=0;nt<ie.length;nt++)if(ie[nt].fire(y,jt,!0),jt.originalEvent._stopped||ie[nt].options.bubblingMouseEvents===!1&&W(this._mouseEvents,y)!==-1)return}},_draggableMoved:function(u){return u=u.dragging&&u.dragging.enabled()?u:this,u.dragging&&u.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var u=0,y=this._handlers.length;u<y;u++)this._handlers[u].disable()},whenReady:function(u,y){return this._loaded?u.call(y||this,{target:this}):this.on("load",u,y),this},_getMapPanePos:function(){return Fo(this._mapPane)||new H(0,0)},_moved:function(){var u=this._getMapPanePos();return u&&!u.equals([0,0])},_getTopLeftPoint:function(u,y){var P=u&&y!==void 0?this._getNewPixelOrigin(u,y):this.getPixelOrigin();return P.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(u,y){var P=this.getSize()._divideBy(2);return this.project(u,y)._subtract(P)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(u,y,P){var V=this._getNewPixelOrigin(P,y);return this.project(u,y)._subtract(V)},_latLngBoundsToNewLayerBounds:function(u,y,P){var V=this._getNewPixelOrigin(P,y);return ee([this.project(u.getSouthWest(),y)._subtract(V),this.project(u.getNorthWest(),y)._subtract(V),this.project(u.getSouthEast(),y)._subtract(V),this.project(u.getNorthEast(),y)._subtract(V)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(u){return this.latLngToLayerPoint(u).subtract(this._getCenterLayerPoint())},_limitCenter:function(u,y,P){if(!P)return u;var V=this.project(u,y),ie=this.getSize().divideBy(2),Se=new Ie(V.subtract(ie),V.add(ie)),nt=this._getBoundsOffset(Se,P,y);return Math.abs(nt.x)<=1&&Math.abs(nt.y)<=1?u:this.unproject(V.add(nt),y)},_limitOffset:function(u,y){if(!y)return u;var P=this.getPixelBounds(),V=new Ie(P.min.add(u),P.max.add(u));return u.add(this._getBoundsOffset(V,y))},_getBoundsOffset:function(u,y,P){var V=ee(this.project(y.getNorthEast(),P),this.project(y.getSouthWest(),P)),ie=V.min.subtract(u.min),Se=V.max.subtract(u.max),nt=this._rebound(ie.x,-Se.x),Pt=this._rebound(ie.y,-Se.y);return new H(nt,Pt)},_rebound:function(u,y){return u+y>0?Math.round(u-y)/2:Math.max(0,Math.ceil(u))-Math.max(0,Math.floor(y))},_limitZoom:function(u){var y=this.getMinZoom(),P=this.getMaxZoom(),V=Xt.any3d?this.options.zoomSnap:1;return V&&(u=Math.round(u/V)*V),Math.max(y,Math.min(P,u))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){qr(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(u,y){var P=this._getCenterOffset(u)._trunc();return(y&&y.animate)!==!0&&!this.getSize().contains(P)?!1:(this.panBy(P,y),!0)},_createAnimProxy:function(){var u=this._proxy=Wr("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(u),this.on("zoomanim",function(y){var P=gl,V=this._proxy.style[P];ma(this._proxy,this.project(y.center,y.zoom),this.getZoomScale(y.zoom,1)),V===this._proxy.style[P]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){fr(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var u=this.getCenter(),y=this.getZoom();ma(this._proxy,this.project(u,y),this.getZoomScale(y,1))},_catchTransitionEnd:function(u){this._animatingZoom&&u.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(u,y,P){if(this._animatingZoom)return!0;if(P=P||{},!this._zoomAnimated||P.animate===!1||this._nothingToAnimate()||Math.abs(y-this._zoom)>this.options.zoomAnimationThreshold)return!1;var V=this.getZoomScale(y),ie=this._getCenterOffset(u)._divideBy(1-1/V);return P.animate!==!0&&!this.getSize().contains(ie)?!1:(F(function(){this._moveStart(!0,P.noMoveStart||!1)._animateZoom(u,y,!0)},this),!0)},_animateZoom:function(u,y,P,V){this._mapPane&&(P&&(this._animatingZoom=!0,this._animateToCenter=u,this._animateToZoom=y,mr(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:u,zoom:y,noUpdate:V}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&qr(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function zi(u,y){return new Ir(u,y)}var er=Z.extend({options:{position:"topright"},initialize:function(u){S(this,u)},getPosition:function(){return this.options.position},setPosition:function(u){var y=this._map;return y&&y.removeControl(this),this.options.position=u,y&&y.addControl(this),this},getContainer:function(){return this._container},addTo:function(u){this.remove(),this._map=u;var y=this._container=this.onAdd(u),P=this.getPosition(),V=u._controlCorners[P];return mr(y,"leaflet-control"),P.indexOf("bottom")!==-1?V.insertBefore(y,V.firstChild):V.appendChild(y),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(fr(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(u){this._map&&u&&u.screenX>0&&u.screenY>0&&this._map.getContainer().focus()}}),Ui=function(u){return new er(u)};Ir.include({addControl:function(u){return u.addTo(this),this},removeControl:function(u){return u.remove(),this},_initControlPos:function(){var u=this._controlCorners={},y="leaflet-",P=this._controlContainer=Wr("div",y+"control-container",this._container);function V(ie,Se){var nt=y+ie+" "+y+Se;u[ie+Se]=Wr("div",nt,P)}V("top","left"),V("top","right"),V("bottom","left"),V("bottom","right")},_clearControlPos:function(){for(var u in this._controlCorners)fr(this._controlCorners[u]);fr(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var wl=er.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(u,y,P,V){return P<V?-1:V<P?1:0}},initialize:function(u,y,P){S(this,P),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var V in u)this._addLayer(u[V],V);for(V in y)this._addLayer(y[V],V,!0)},onAdd:function(u){this._initLayout(),this._update(),this._map=u,u.on("zoomend",this._checkDisabledLayers,this);for(var y=0;y<this._layers.length;y++)this._layers[y].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(u){return er.prototype.addTo.call(this,u),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(u,y){return this._addLayer(u,y),this._map?this._update():this},addOverlay:function(u,y){return this._addLayer(u,y,!0),this._map?this._update():this},removeLayer:function(u){u.off("add remove",this._onLayerChange,this);var y=this._getLayer(l(u));return y&&this._layers.splice(this._layers.indexOf(y),1),this._map?this._update():this},expand:function(){mr(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var u=this._map.getSize().y-(this._container.offsetTop+50);return u<this._section.clientHeight?(mr(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=u+"px"):qr(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return qr(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var u="leaflet-control-layers",y=this._container=Wr("div",u),P=this.options.collapsed;y.setAttribute("aria-haspopup",!0),Kl(y),Wu(y);var V=this._section=Wr("section",u+"-list");P&&(this._map.on("click",this.collapse,this),vr(y,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var ie=this._layersLink=Wr("a",u+"-toggle",y);ie.href="#",ie.title="Layers",ie.setAttribute("role","button"),vr(ie,{keydown:function(Se){Se.keyCode===13&&this._expandSafely()},click:function(Se){dr(Se),this._expandSafely()}},this),P||this.expand(),this._baseLayersList=Wr("div",u+"-base",V),this._separator=Wr("div",u+"-separator",V),this._overlaysList=Wr("div",u+"-overlays",V),y.appendChild(V)},_getLayer:function(u){for(var y=0;y<this._layers.length;y++)if(this._layers[y]&&l(this._layers[y].layer)===u)return this._layers[y]},_addLayer:function(u,y,P){this._map&&u.on("add remove",this._onLayerChange,this),this._layers.push({layer:u,name:y,overlay:P}),this.options.sortLayers&&this._layers.sort(o(function(V,ie){return this.options.sortFunction(V.layer,ie.layer,V.name,ie.name)},this)),this.options.autoZIndex&&u.setZIndex&&(this._lastZIndex++,u.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ga(this._baseLayersList),Ga(this._overlaysList),this._layerControlInputs=[];var u,y,P,V,ie=0;for(P=0;P<this._layers.length;P++)V=this._layers[P],this._addItem(V),y=y||V.overlay,u=u||!V.overlay,ie+=V.overlay?0:1;return this.options.hideSingleBase&&(u=u&&ie>1,this._baseLayersList.style.display=u?"":"none"),this._separator.style.display=y&&u?"":"none",this},_onLayerChange:function(u){this._handlingClick||this._update();var y=this._getLayer(l(u.target)),P=y.overlay?u.type==="add"?"overlayadd":"overlayremove":u.type==="add"?"baselayerchange":null;P&&this._map.fire(P,y)},_createRadioElement:function(u,y){var P='<input type="radio" class="leaflet-control-layers-selector" name="'+u+'"'+(y?' checked="checked"':"")+"/>",V=document.createElement("div");return V.innerHTML=P,V.firstChild},_addItem:function(u){var y=document.createElement("label"),P=this._map.hasLayer(u.layer),V;u.overlay?(V=document.createElement("input"),V.type="checkbox",V.className="leaflet-control-layers-selector",V.defaultChecked=P):V=this._createRadioElement("leaflet-base-layers_"+l(this),P),this._layerControlInputs.push(V),V.layerId=l(u.layer),vr(V,"click",this._onInputClick,this);var ie=document.createElement("span");ie.innerHTML=" "+u.name;var Se=document.createElement("span");y.appendChild(Se),Se.appendChild(V),Se.appendChild(ie);var nt=u.overlay?this._overlaysList:this._baseLayersList;return nt.appendChild(y),this._checkDisabledLayers(),y},_onInputClick:function(){if(!this._preventClick){var u=this._layerControlInputs,y,P,V=[],ie=[];this._handlingClick=!0;for(var Se=u.length-1;Se>=0;Se--)y=u[Se],P=this._getLayer(y.layerId).layer,y.checked?V.push(P):y.checked||ie.push(P);for(Se=0;Se<ie.length;Se++)this._map.hasLayer(ie[Se])&&this._map.removeLayer(ie[Se]);for(Se=0;Se<V.length;Se++)this._map.hasLayer(V[Se])||this._map.addLayer(V[Se]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var u=this._layerControlInputs,y,P,V=this._map.getZoom(),ie=u.length-1;ie>=0;ie--)y=u[ie],P=this._getLayer(y.layerId).layer,y.disabled=P.options.minZoom!==void 0&&V<P.options.minZoom||P.options.maxZoom!==void 0&&V>P.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var u=this._section;this._preventClick=!0,vr(u,"click",dr),this.expand();var y=this;setTimeout(function(){$r(u,"click",dr),y._preventClick=!1})}}),ya=function(u,y,P){return new wl(u,y,P)},Si=er.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(u){var y="leaflet-control-zoom",P=Wr("div",y+" leaflet-bar"),V=this.options;return this._zoomInButton=this._createButton(V.zoomInText,V.zoomInTitle,y+"-in",P,this._zoomIn),this._zoomOutButton=this._createButton(V.zoomOutText,V.zoomOutTitle,y+"-out",P,this._zoomOut),this._updateDisabled(),u.on("zoomend zoomlevelschange",this._updateDisabled,this),P},onRemove:function(u){u.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(u){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(u.shiftKey?3:1))},_zoomOut:function(u){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(u.shiftKey?3:1))},_createButton:function(u,y,P,V,ie){var Se=Wr("a",P,V);return Se.innerHTML=u,Se.href="#",Se.title=y,Se.setAttribute("role","button"),Se.setAttribute("aria-label",y),Kl(Se),vr(Se,"click",Ar),vr(Se,"click",ie,this),vr(Se,"click",this._refocusOnMap,this),Se},_updateDisabled:function(){var u=this._map,y="leaflet-disabled";qr(this._zoomInButton,y),qr(this._zoomOutButton,y),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||u._zoom===u.getMinZoom())&&(mr(this._zoomOutButton,y),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||u._zoom===u.getMaxZoom())&&(mr(this._zoomInButton,y),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ir.mergeOptions({zoomControl:!0}),Ir.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Si,this.addControl(this.zoomControl))});var xu=function(u){return new Si(u)},ea=er.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(u){var y="leaflet-control-scale",P=Wr("div",y),V=this.options;return this._addScales(V,y+"-line",P),u.on(V.updateWhenIdle?"moveend":"move",this._update,this),u.whenReady(this._update,this),P},onRemove:function(u){u.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(u,y,P){u.metric&&(this._mScale=Wr("div",y,P)),u.imperial&&(this._iScale=Wr("div",y,P))},_update:function(){var u=this._map,y=u.getSize().y/2,P=u.distance(u.containerPointToLatLng([0,y]),u.containerPointToLatLng([this.options.maxWidth,y]));this._updateScales(P)},_updateScales:function(u){this.options.metric&&u&&this._updateMetric(u),this.options.imperial&&u&&this._updateImperial(u)},_updateMetric:function(u){var y=this._getRoundNum(u),P=y<1e3?y+" m":y/1e3+" km";this._updateScale(this._mScale,P,y/u)},_updateImperial:function(u){var y=u*3.2808399,P,V,ie;y>5280?(P=y/5280,V=this._getRoundNum(P),this._updateScale(this._iScale,V+" mi",V/P)):(ie=this._getRoundNum(y),this._updateScale(this._iScale,ie+" ft",ie/y))},_updateScale:function(u,y,P){u.style.width=Math.round(this.options.maxWidth*P)+"px",u.innerHTML=y},_getRoundNum:function(u){var y=Math.pow(10,(Math.floor(u)+"").length-1),P=u/y;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:1,y*P}}),Jl=function(u){return new ea(u)},Ql='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ao=er.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Xt.inlineSvg?Ql+" ":"")+"Leaflet</a>"},initialize:function(u){S(this,u),this._attributions={}},onAdd:function(u){u.attributionControl=this,this._container=Wr("div","leaflet-control-attribution"),Kl(this._container);for(var y in u._layers)u._layers[y].getAttribution&&this.addAttribution(u._layers[y].getAttribution());return this._update(),u.on("layeradd",this._addAttribution,this),this._container},onRemove:function(u){u.off("layeradd",this._addAttribution,this)},_addAttribution:function(u){u.layer.getAttribution&&(this.addAttribution(u.layer.getAttribution()),u.layer.once("remove",function(){this.removeAttribution(u.layer.getAttribution())},this))},setPrefix:function(u){return this.options.prefix=u,this._update(),this},addAttribution:function(u){return u?(this._attributions[u]||(this._attributions[u]=0),this._attributions[u]++,this._update(),this):this},removeAttribution:function(u){return u?(this._attributions[u]&&(this._attributions[u]--,this._update()),this):this},_update:function(){if(this._map){var u=[];for(var y in this._attributions)this._attributions[y]&&u.push(y);var P=[];this.options.prefix&&P.push(this.options.prefix),u.length&&P.push(u.join(", ")),this._container.innerHTML=P.join(' <span aria-hidden="true">|</span> ')}}});Ir.mergeOptions({attributionControl:!0}),Ir.addInitHook(function(){this.options.attributionControl&&new Ao().addTo(this)});var eu=function(u){return new Ao(u)};er.Layers=wl,er.Zoom=Si,er.Scale=ea,er.Attribution=Ao,Ui.layers=ya,Ui.zoom=xu,Ui.scale=Jl,Ui.attribution=eu;var ti=Z.extend({initialize:function(u){this._map=u},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ti.addTo=function(u,y){return u.addHandler(y,this),this};var Sc={Events:k},fs=Xt.touch?"touchstart mousedown":"mousedown",$o=U.extend({options:{clickTolerance:3},initialize:function(u,y,P,V){S(this,V),this._element=u,this._dragStartTarget=y||u,this._preventOutline=P},enable:function(){this._enabled||(vr(this._dragStartTarget,fs,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&($o._dragging===this&&this.finishDrag(!0),$r(this._dragStartTarget,fs,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(u){if(this._enabled&&(this._moved=!1,!ql(this._element,"leaflet-zoom-anim"))){if(u.touches&&u.touches.length!==1){$o._dragging===this&&this.finishDrag();return}if(!($o._dragging||u.shiftKey||u.which!==1&&u.button!==1&&!u.touches)&&($o._dragging=this,this._preventOutline&&Yl(this._element),Hu(),qa(),!this._moving)){this.fire("down");var y=u.touches?u.touches[0]:u,P=Lc(this._element);this._startPoint=new H(y.clientX,y.clientY),this._startPos=Fo(this._element),this._parentScale=bu(P);var V=u.type==="mousedown";vr(document,V?"mousemove":"touchmove",this._onMove,this),vr(document,V?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(u){if(this._enabled){if(u.touches&&u.touches.length>1){this._moved=!0;return}var y=u.touches&&u.touches.length===1?u.touches[0]:u,P=new H(y.clientX,y.clientY)._subtract(this._startPoint);!P.x&&!P.y||Math.abs(P.x)+Math.abs(P.y)<this.options.clickTolerance||(P.x/=this._parentScale.x,P.y/=this._parentScale.y,dr(u),this._moved||(this.fire("dragstart"),this._moved=!0,mr(document.body,"leaflet-dragging"),this._lastTarget=u.target||u.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),mr(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(P),this._moving=!0,this._lastEvent=u,this._updatePosition())}},_updatePosition:function(){var u={originalEvent:this._lastEvent};this.fire("predrag",u),Di(this._element,this._newPos),this.fire("drag",u)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(u){qr(document.body,"leaflet-dragging"),this._lastTarget&&(qr(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),$r(document,"mousemove touchmove",this._onMove,this),$r(document,"mouseup touchend touchcancel",this._onUp,this),jo(),wo();var y=this._moved&&this._moving;this._moving=!1,$o._dragging=!1,y&&this.fire("dragend",{noInertia:u,distance:this._newPos.distanceTo(this._startPos)})}});function tu(u,y,P){var V,ie=[1,4,2,8],Se,nt,Pt,jt,nn,An,qn,Sr;for(Se=0,An=u.length;Se<An;Se++)u[Se]._code=Ft(u[Se],y);for(Pt=0;Pt<4;Pt++){for(qn=ie[Pt],V=[],Se=0,An=u.length,nt=An-1;Se<An;nt=Se++)jt=u[Se],nn=u[nt],jt._code&qn?nn._code&qn||(Sr=xt(nn,jt,qn,y,P),Sr._code=Ft(Sr,y),V.push(Sr)):(nn._code&qn&&(Sr=xt(nn,jt,qn,y,P),Sr._code=Ft(Sr,y),V.push(Sr)),V.push(jt));u=V}return u}function Vo(u,y){var P,V,ie,Se,nt,Pt,jt,nn,An;if(!u||u.length===0)throw new Error("latlngs not passed");In(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var qn=ve([0,0]),Sr=oe(u),Qi=Sr.getNorthWest().distanceTo(Sr.getSouthWest())*Sr.getNorthEast().distanceTo(Sr.getNorthWest());Qi<1700&&(qn=xl(u));var Ii=u.length,vs=[];for(P=0;P<Ii;P++){var ki=ve(u[P]);vs.push(y.project(ve([ki.lat-qn.lat,ki.lng-qn.lng])))}for(Pt=jt=nn=0,P=0,V=Ii-1;P<Ii;V=P++)ie=vs[P],Se=vs[V],nt=ie.y*Se.x-Se.y*ie.x,jt+=(ie.x+Se.x)*nt,nn+=(ie.y+Se.y)*nt,Pt+=nt*3;Pt===0?An=vs[0]:An=[jt/Pt,nn/Pt];var oo=y.unproject(_e(An));return ve([oo.lat+qn.lat,oo.lng+qn.lng])}function xl(u){for(var y=0,P=0,V=0,ie=0;ie<u.length;ie++){var Se=ve(u[ie]);y+=Se.lat,P+=Se.lng,V++}return ve([y/V,P/V])}var Ll={__proto__:null,clipPolygon:tu,polygonCenter:Vo,centroid:xl};function ni(u,y){if(!y||!u.length)return u.slice();var P=y*y;return u=we(u,P),u=$i(u,P),u}function xo(u,y,P){return Math.sqrt(Mn(u,y,P,!0))}function ba(u,y,P){return Mn(u,y,P)}function $i(u,y){var P=u.length,V=typeof Uint8Array<"u"?Uint8Array:Array,ie=new V(P);ie[0]=ie[P-1]=1,z(u,ie,y,0,P-1);var Se,nt=[];for(Se=0;Se<P;Se++)ie[Se]&&nt.push(u[Se]);return nt}function z(u,y,P,V,ie){var Se=0,nt,Pt,jt;for(Pt=V+1;Pt<=ie-1;Pt++)jt=Mn(u[Pt],u[V],u[ie],!0),jt>Se&&(nt=Pt,Se=jt);Se>P&&(y[nt]=1,z(u,y,P,V,nt),z(u,y,P,nt,ie))}function we(u,y){for(var P=[u[0]],V=1,ie=0,Se=u.length;V<Se;V++)on(u[V],u[ie])>y&&(P.push(u[V]),ie=V);return ie<Se-1&&P.push(u[Se-1]),P}var We;function lt(u,y,P,V,ie){var Se=V?We:Ft(u,P),nt=Ft(y,P),Pt,jt,nn;for(We=nt;;){if(!(Se|nt))return[u,y];if(Se&nt)return!1;Pt=Se||nt,jt=xt(u,y,Pt,P,ie),nn=Ft(jt,P),Pt===Se?(u=jt,Se=nn):(y=jt,nt=nn)}}function xt(u,y,P,V,ie){var Se=y.x-u.x,nt=y.y-u.y,Pt=V.min,jt=V.max,nn,An;return P&8?(nn=u.x+Se*(jt.y-u.y)/nt,An=jt.y):P&4?(nn=u.x+Se*(Pt.y-u.y)/nt,An=Pt.y):P&2?(nn=jt.x,An=u.y+nt*(jt.x-u.x)/Se):P&1&&(nn=Pt.x,An=u.y+nt*(Pt.x-u.x)/Se),new H(nn,An,ie)}function Ft(u,y){var P=0;return u.x<y.min.x?P|=1:u.x>y.max.x&&(P|=2),u.y<y.min.y?P|=4:u.y>y.max.y&&(P|=8),P}function on(u,y){var P=y.x-u.x,V=y.y-u.y;return P*P+V*V}function Mn(u,y,P,V){var ie=y.x,Se=y.y,nt=P.x-ie,Pt=P.y-Se,jt=nt*nt+Pt*Pt,nn;return jt>0&&(nn=((u.x-ie)*nt+(u.y-Se)*Pt)/jt,nn>1?(ie=P.x,Se=P.y):nn>0&&(ie+=nt*nn,Se+=Pt*nn)),nt=u.x-ie,Pt=u.y-Se,V?nt*nt+Pt*Pt:new H(ie,Se)}function In(u){return!j(u[0])||typeof u[0][0]!="object"&&typeof u[0][0]<"u"}function Jn(u){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),In(u)}function lr(u,y){var P,V,ie,Se,nt,Pt,jt,nn;if(!u||u.length===0)throw new Error("latlngs not passed");In(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var An=ve([0,0]),qn=oe(u),Sr=qn.getNorthWest().distanceTo(qn.getSouthWest())*qn.getNorthEast().distanceTo(qn.getNorthWest());Sr<1700&&(An=xl(u));var Qi=u.length,Ii=[];for(P=0;P<Qi;P++){var vs=ve(u[P]);Ii.push(y.project(ve([vs.lat-An.lat,vs.lng-An.lng])))}for(P=0,V=0;P<Qi-1;P++)V+=Ii[P].distanceTo(Ii[P+1])/2;if(V===0)nn=Ii[0];else for(P=0,Se=0;P<Qi-1;P++)if(nt=Ii[P],Pt=Ii[P+1],ie=nt.distanceTo(Pt),Se+=ie,Se>V){jt=(Se-V)/ie,nn=[Pt.x-jt*(Pt.x-nt.x),Pt.y-jt*(Pt.y-nt.y)];break}var ki=y.unproject(_e(nn));return ve([ki.lat+An.lat,ki.lng+An.lng])}var Er={__proto__:null,simplify:ni,pointToSegmentDistance:xo,closestPointOnSegment:ba,clipSegment:lt,_getEdgeIntersection:xt,_getBitCode:Ft,_sqClosestPointOnSegment:Mn,isFlat:In,_flat:Jn,polylineCenter:lr},wi={project:function(u){return new H(u.lng,u.lat)},unproject:function(u){return new ge(u.y,u.x)},bounds:new Ie([-180,-90],[180,90])},Zr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Ie([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(u){var y=Math.PI/180,P=this.R,V=u.lat*y,ie=this.R_MINOR/P,Se=Math.sqrt(1-ie*ie),nt=Se*Math.sin(V),Pt=Math.tan(Math.PI/4-V/2)/Math.pow((1-nt)/(1+nt),Se/2);return V=-P*Math.log(Math.max(Pt,1e-10)),new H(u.lng*y*P,V)},unproject:function(u){for(var y=180/Math.PI,P=this.R,V=this.R_MINOR/P,ie=Math.sqrt(1-V*V),Se=Math.exp(-u.y/P),nt=Math.PI/2-2*Math.atan(Se),Pt=0,jt=.1,nn;Pt<15&&Math.abs(jt)>1e-7;Pt++)nn=ie*Math.sin(nt),nn=Math.pow((1-nn)/(1+nn),ie/2),jt=Math.PI/2-2*Math.atan(Se*nn)-nt,nt+=jt;return new ge(nt*y,u.x*y/P)}},ri={__proto__:null,LonLat:wi,Mercator:Zr,SphericalMercator:$e},Vi=i({},pe,{code:"EPSG:3395",projection:Zr,transformation:function(){var u=.5/(Math.PI*Zr.R);return ot(u,.5,-u,.5)}()}),Zi=i({},pe,{code:"EPSG:4326",projection:wi,transformation:ot(1/180,1,-1/180,.5)}),Lo=i({},ye,{projection:wi,transformation:ot(1,0,-1,0),scale:function(u){return Math.pow(2,u)},zoom:function(u){return Math.log(u)/Math.LN2},distance:function(u,y){var P=y.lng-u.lng,V=y.lat-u.lat;return Math.sqrt(P*P+V*V)},infinite:!0});ye.Earth=pe,ye.EPSG3395=Vi,ye.EPSG3857=le,ye.EPSG900913=ae,ye.EPSG4326=Zi,ye.Simple=Lo;var Pr=U.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(u){return u.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(u){return u&&u.removeLayer(this),this},getPane:function(u){return this._map.getPane(u?this.options[u]||u:this.options.pane)},addInteractiveTarget:function(u){return this._map._targets[l(u)]=this,this},removeInteractiveTarget:function(u){return delete this._map._targets[l(u)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(u){var y=u.target;if(y.hasLayer(this)){if(this._map=y,this._zoomAnimated=y._zoomAnimated,this.getEvents){var P=this.getEvents();y.on(P,this),this.once("remove",function(){y.off(P,this)},this)}this.onAdd(y),this.fire("add"),y.fire("layeradd",{layer:this})}}});Ir.include({addLayer:function(u){if(!u._layerAdd)throw new Error("The provided object is not a Layer.");var y=l(u);return this._layers[y]?this:(this._layers[y]=u,u._mapToAdd=this,u.beforeAdd&&u.beforeAdd(this),this.whenReady(u._layerAdd,u),this)},removeLayer:function(u){var y=l(u);return this._layers[y]?(this._loaded&&u.onRemove(this),delete this._layers[y],this._loaded&&(this.fire("layerremove",{layer:u}),u.fire("remove")),u._map=u._mapToAdd=null,this):this},hasLayer:function(u){return l(u)in this._layers},eachLayer:function(u,y){for(var P in this._layers)u.call(y,this._layers[P]);return this},_addLayers:function(u){u=u?j(u)?u:[u]:[];for(var y=0,P=u.length;y<P;y++)this.addLayer(u[y])},_addZoomLimit:function(u){(!isNaN(u.options.maxZoom)||!isNaN(u.options.minZoom))&&(this._zoomBoundLayers[l(u)]=u,this._updateZoomLevels())},_removeZoomLimit:function(u){var y=l(u);this._zoomBoundLayers[y]&&(delete this._zoomBoundLayers[y],this._updateZoomLevels())},_updateZoomLevels:function(){var u=1/0,y=-1/0,P=this._getZoomSpan();for(var V in this._zoomBoundLayers){var ie=this._zoomBoundLayers[V].options;u=ie.minZoom===void 0?u:Math.min(u,ie.minZoom),y=ie.maxZoom===void 0?y:Math.max(y,ie.maxZoom)}this._layersMaxZoom=y===-1/0?void 0:y,this._layersMinZoom=u===1/0?void 0:u,P!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Es=Pr.extend({initialize:function(u,y){S(this,y),this._layers={};var P,V;if(u)for(P=0,V=u.length;P<V;P++)this.addLayer(u[P])},addLayer:function(u){var y=this.getLayerId(u);return this._layers[y]=u,this._map&&this._map.addLayer(u),this},removeLayer:function(u){var y=u in this._layers?u:this.getLayerId(u);return this._map&&this._layers[y]&&this._map.removeLayer(this._layers[y]),delete this._layers[y],this},hasLayer:function(u){var y=typeof u=="number"?u:this.getLayerId(u);return y in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(u){var y=Array.prototype.slice.call(arguments,1),P,V;for(P in this._layers)V=this._layers[P],V[u]&&V[u].apply(V,y);return this},onAdd:function(u){this.eachLayer(u.addLayer,u)},onRemove:function(u){this.eachLayer(u.removeLayer,u)},eachLayer:function(u,y){for(var P in this._layers)u.call(y,this._layers[P]);return this},getLayer:function(u){return this._layers[u]},getLayers:function(){var u=[];return this.eachLayer(u.push,u),u},setZIndex:function(u){return this.invoke("setZIndex",u)},getLayerId:function(u){return l(u)}}),Cl=function(u,y){return new Es(u,y)},$s=Es.extend({addLayer:function(u){return this.hasLayer(u)?this:(u.addEventParent(this),Es.prototype.addLayer.call(this,u),this.fire("layeradd",{layer:u}))},removeLayer:function(u){return this.hasLayer(u)?(u in this._layers&&(u=this._layers[u]),u.removeEventParent(this),Es.prototype.removeLayer.call(this,u),this.fire("layerremove",{layer:u})):this},setStyle:function(u){return this.invoke("setStyle",u)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var u=new te;for(var y in this._layers){var P=this._layers[y];u.extend(P.getBounds?P.getBounds():P.getLatLng())}return u}}),Lu=function(u,y){return new $s(u,y)},ta=Z.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(u){S(this,u)},createIcon:function(u){return this._createIcon("icon",u)},createShadow:function(u){return this._createIcon("shadow",u)},_createIcon:function(u,y){var P=this._getIconUrl(u);if(!P){if(u==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var V=this._createImg(P,y&&y.tagName==="IMG"?y:null);return this._setIconStyles(V,u),(this.options.crossOrigin||this.options.crossOrigin==="")&&(V.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),V},_setIconStyles:function(u,y){var P=this.options,V=P[y+"Size"];typeof V=="number"&&(V=[V,V]);var ie=_e(V),Se=_e(y==="shadow"&&P.shadowAnchor||P.iconAnchor||ie&&ie.divideBy(2,!0));u.className="leaflet-marker-"+y+" "+(P.className||""),Se&&(u.style.marginLeft=-Se.x+"px",u.style.marginTop=-Se.y+"px"),ie&&(u.style.width=ie.x+"px",u.style.height=ie.y+"px")},_createImg:function(u,y){return y=y||document.createElement("img"),y.src=u,y},_getIconUrl:function(u){return Xt.retina&&this.options[u+"RetinaUrl"]||this.options[u+"Url"]}});function qu(u){return new ta(u)}var Ja=ta.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(u){return typeof Ja.imagePath!="string"&&(Ja.imagePath=this._detectIconPath()),(this.options.imagePath||Ja.imagePath)+ta.prototype._getIconUrl.call(this,u)},_stripUrl:function(u){var y=function(P,V,ie){var Se=V.exec(P);return Se&&Se[ie]};return u=y(u,/^url\((['"])?(.+)\1\)$/,2),u&&y(u,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var u=Wr("div","leaflet-default-icon-path",document.body),y=Mo(u,"background-image")||Mo(u,"backgroundImage");if(document.body.removeChild(u),y=this._stripUrl(y),y)return y;var P=document.querySelector('link[href$="leaflet.css"]');return P?P.href.substring(0,P.href.length-11-1):""}}),Qa=ti.extend({initialize:function(u){this._marker=u},addHooks:function(){var u=this._marker._icon;this._draggable||(this._draggable=new $o(u,u,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),mr(u,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&qr(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(u){var y=this._marker,P=y._map,V=this._marker.options.autoPanSpeed,ie=this._marker.options.autoPanPadding,Se=Fo(y._icon),nt=P.getPixelBounds(),Pt=P.getPixelOrigin(),jt=ee(nt.min._subtract(Pt).add(ie),nt.max._subtract(Pt).subtract(ie));if(!jt.contains(Se)){var nn=_e((Math.max(jt.max.x,Se.x)-jt.max.x)/(nt.max.x-jt.max.x)-(Math.min(jt.min.x,Se.x)-jt.min.x)/(nt.min.x-jt.min.x),(Math.max(jt.max.y,Se.y)-jt.max.y)/(nt.max.y-jt.max.y)-(Math.min(jt.min.y,Se.y)-jt.min.y)/(nt.min.y-jt.min.y)).multiplyBy(V);P.panBy(nn,{animate:!1}),this._draggable._newPos._add(nn),this._draggable._startPos._add(nn),Di(y._icon,this._draggable._newPos),this._onDrag(u),this._panRequest=F(this._adjustPan.bind(this,u))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(u){this._marker.options.autoPan&&(R(this._panRequest),this._panRequest=F(this._adjustPan.bind(this,u)))},_onDrag:function(u){var y=this._marker,P=y._shadow,V=Fo(y._icon),ie=y._map.layerPointToLatLng(V);P&&Di(P,V),y._latlng=ie,u.latlng=ie,u.oldLatLng=this._oldLatLng,y.fire("move",u).fire("drag",u)},_onDragEnd:function(u){R(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",u)}}),Xi=Pr.extend({options:{icon:new Ja,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(u,y){S(this,y),this._latlng=ve(u)},onAdd:function(u){this._zoomAnimated=this._zoomAnimated&&u.options.markerZoomAnimation,this._zoomAnimated&&u.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(u){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&u.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(u){var y=this._latlng;return this._latlng=ve(u),this.update(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},setZIndexOffset:function(u){return this.options.zIndexOffset=u,this.update()},getIcon:function(){return this.options.icon},setIcon:function(u){return this.options.icon=u,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var u=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(u)}return this},_initIcon:function(){var u=this.options,y="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),P=u.icon.createIcon(this._icon),V=!1;P!==this._icon&&(this._icon&&this._removeIcon(),V=!0,u.title&&(P.title=u.title),P.tagName==="IMG"&&(P.alt=u.alt||"")),mr(P,y),u.keyboard&&(P.tabIndex="0",P.setAttribute("role","button")),this._icon=P,u.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&vr(P,"focus",this._panOnFocus,this);var ie=u.icon.createShadow(this._shadow),Se=!1;ie!==this._shadow&&(this._removeShadow(),Se=!0),ie&&(mr(ie,y),ie.alt=""),this._shadow=ie,u.opacity<1&&this._updateOpacity(),V&&this.getPane().appendChild(this._icon),this._initInteraction(),ie&&Se&&this.getPane(u.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&$r(this._icon,"focus",this._panOnFocus,this),fr(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&fr(this._shadow),this._shadow=null},_setPos:function(u){this._icon&&Di(this._icon,u),this._shadow&&Di(this._shadow,u),this._zIndex=u.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(u){this._icon&&(this._icon.style.zIndex=this._zIndex+u)},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center).round();this._setPos(y)},_initInteraction:function(){if(this.options.interactive&&(mr(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Qa)){var u=this.options.draggable;this.dragging&&(u=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Qa(this),u&&this.dragging.enable()}},setOpacity:function(u){return this.options.opacity=u,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var u=this.options.opacity;this._icon&&Ss(this._icon,u),this._shadow&&Ss(this._shadow,u)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var u=this._map;if(u){var y=this.options.icon.options,P=y.iconSize?_e(y.iconSize):_e(0,0),V=y.iconAnchor?_e(y.iconAnchor):_e(0,0);u.panInside(this._latlng,{paddingTopLeft:V,paddingBottomRight:P.subtract(V)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function na(u,y){return new Xi(u,y)}var Co=Pr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(u){this._renderer=u.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(u){return S(this,u),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&u&&Object.prototype.hasOwnProperty.call(u,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ro=Co.extend({options:{fill:!0,radius:10},initialize:function(u,y){S(this,y),this._latlng=ve(u),this._radius=this.options.radius},setLatLng:function(u){var y=this._latlng;return this._latlng=ve(u),this.redraw(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(u){return this.options.radius=this._radius=u,this.redraw()},getRadius:function(){return this._radius},setStyle:function(u){var y=u&&u.radius||this._radius;return Co.prototype.setStyle.call(this,u),this.setRadius(y),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var u=this._radius,y=this._radiusY||u,P=this._clickTolerance(),V=[u+P,y+P];this._pxBounds=new Ie(this._point.subtract(V),this._point.add(V))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(u){return u.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Sl(u,y){return new ro(u,y)}var Ps=ro.extend({initialize:function(u,y,P){if(typeof y=="number"&&(y=i({},P,{radius:y})),S(this,y),this._latlng=ve(u),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(u){return this._mRadius=u,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var u=[this._radius,this._radiusY||this._radius];return new te(this._map.layerPointToLatLng(this._point.subtract(u)),this._map.layerPointToLatLng(this._point.add(u)))},setStyle:Co.prototype.setStyle,_project:function(){var u=this._latlng.lng,y=this._latlng.lat,P=this._map,V=P.options.crs;if(V.distance===pe.distance){var ie=Math.PI/180,Se=this._mRadius/pe.R/ie,nt=P.project([y+Se,u]),Pt=P.project([y-Se,u]),jt=nt.add(Pt).divideBy(2),nn=P.unproject(jt).lat,An=Math.acos((Math.cos(Se*ie)-Math.sin(y*ie)*Math.sin(nn*ie))/(Math.cos(y*ie)*Math.cos(nn*ie)))/ie;(isNaN(An)||An===0)&&(An=Se/Math.cos(Math.PI/180*y)),this._point=jt.subtract(P.getPixelOrigin()),this._radius=isNaN(An)?0:jt.x-P.project([nn,u-An]).x,this._radiusY=jt.y-nt.y}else{var qn=V.unproject(V.project(this._latlng).subtract([this._mRadius,0]));this._point=P.latLngToLayerPoint(this._latlng),this._radius=this._point.x-P.latLngToLayerPoint(qn).x}this._updateBounds()}});function Vs(u,y,P){return new Ps(u,y,P)}var Hs=Co.extend({options:{smoothFactor:1,noClip:!1},initialize:function(u,y){S(this,y),this._setLatLngs(u)},getLatLngs:function(){return this._latlngs},setLatLngs:function(u){return this._setLatLngs(u),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(u){for(var y=1/0,P=null,V=Mn,ie,Se,nt=0,Pt=this._parts.length;nt<Pt;nt++)for(var jt=this._parts[nt],nn=1,An=jt.length;nn<An;nn++){ie=jt[nn-1],Se=jt[nn];var qn=V(u,ie,Se,!0);qn<y&&(y=qn,P=V(u,ie,Se))}return P&&(P.distance=Math.sqrt(y)),P},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return lr(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(u,y){return y=y||this._defaultShape(),u=ve(u),y.push(u),this._bounds.extend(u),this.redraw()},_setLatLngs:function(u){this._bounds=new te,this._latlngs=this._convertLatLngs(u)},_defaultShape:function(){return In(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(u){for(var y=[],P=In(u),V=0,ie=u.length;V<ie;V++)P?(y[V]=ve(u[V]),this._bounds.extend(y[V])):y[V]=this._convertLatLngs(u[V]);return y},_project:function(){var u=new Ie;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,u),this._bounds.isValid()&&u.isValid()&&(this._rawPxBounds=u,this._updateBounds())},_updateBounds:function(){var u=this._clickTolerance(),y=new H(u,u);this._rawPxBounds&&(this._pxBounds=new Ie([this._rawPxBounds.min.subtract(y),this._rawPxBounds.max.add(y)]))},_projectLatlngs:function(u,y,P){var V=u[0]instanceof ge,ie=u.length,Se,nt;if(V){for(nt=[],Se=0;Se<ie;Se++)nt[Se]=this._map.latLngToLayerPoint(u[Se]),P.extend(nt[Se]);y.push(nt)}else for(Se=0;Se<ie;Se++)this._projectLatlngs(u[Se],y,P)},_clipPoints:function(){var u=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}var y=this._parts,P,V,ie,Se,nt,Pt,jt;for(P=0,ie=0,Se=this._rings.length;P<Se;P++)for(jt=this._rings[P],V=0,nt=jt.length;V<nt-1;V++)Pt=lt(jt[V],jt[V+1],u,V,!0),Pt&&(y[ie]=y[ie]||[],y[ie].push(Pt[0]),(Pt[1]!==jt[V+1]||V===nt-2)&&(y[ie].push(Pt[1]),ie++))}},_simplifyPoints:function(){for(var u=this._parts,y=this.options.smoothFactor,P=0,V=u.length;P<V;P++)u[P]=ni(u[P],y)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(u,y){var P,V,ie,Se,nt,Pt,jt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(P=0,Se=this._parts.length;P<Se;P++)for(Pt=this._parts[P],V=0,nt=Pt.length,ie=nt-1;V<nt;ie=V++)if(!(!y&&V===0)&&xo(u,Pt[ie],Pt[V])<=jt)return!0;return!1}});function Ec(u,y){return new Hs(u,y)}Hs._flat=Jn;var as=Hs.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Vo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(u){var y=Hs.prototype._convertLatLngs.call(this,u),P=y.length;return P>=2&&y[0]instanceof ge&&y[0].equals(y[P-1])&&y.pop(),y},_setLatLngs:function(u){Hs.prototype._setLatLngs.call(this,u),In(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return In(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var u=this._renderer._bounds,y=this.options.weight,P=new H(y,y);if(u=new Ie(u.min.subtract(P),u.max.add(P)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}for(var V=0,ie=this._rings.length,Se;V<ie;V++)Se=tu(this._rings[V],u,!0),Se.length&&this._parts.push(Se)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(u){var y=!1,P,V,ie,Se,nt,Pt,jt,nn;if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(Se=0,jt=this._parts.length;Se<jt;Se++)for(P=this._parts[Se],nt=0,nn=P.length,Pt=nn-1;nt<nn;Pt=nt++)V=P[nt],ie=P[Pt],V.y>u.y!=ie.y>u.y&&u.x<(ie.x-V.x)*(u.y-V.y)/(ie.y-V.y)+V.x&&(y=!y);return y||Hs.prototype._containsPoint.call(this,u,!0)}});function _a(u,y){return new as(u,y)}var ks=$s.extend({initialize:function(u,y){S(this,y),this._layers={},u&&this.addData(u)},addData:function(u){var y=j(u)?u:u.features,P,V,ie;if(y){for(P=0,V=y.length;P<V;P++)ie=y[P],(ie.geometries||ie.geometry||ie.features||ie.coordinates)&&this.addData(ie);return this}var Se=this.options;if(Se.filter&&!Se.filter(u))return this;var nt=Ms(u,Se);return nt?(nt.feature=Ts(u),nt.defaultOptions=nt.options,this.resetStyle(nt),Se.onEachFeature&&Se.onEachFeature(u,nt),this.addLayer(nt)):this},resetStyle:function(u){return u===void 0?this.eachLayer(this.resetStyle,this):(u.options=i({},u.defaultOptions),this._setLayerStyle(u,this.options.style),this)},setStyle:function(u){return this.eachLayer(function(y){this._setLayerStyle(y,u)},this)},_setLayerStyle:function(u,y){u.setStyle&&(typeof y=="function"&&(y=y(u.feature)),u.setStyle(y))}});function Ms(u,y){var P=u.type==="Feature"?u.geometry:u,V=P?P.coordinates:null,ie=[],Se=y&&y.pointToLayer,nt=y&&y.coordsToLatLng||xa,Pt,jt,nn,An;if(!V&&!P)return null;switch(P.type){case"Point":return Pt=nt(V),wa(Se,u,Pt,y);case"MultiPoint":for(nn=0,An=V.length;nn<An;nn++)Pt=nt(V[nn]),ie.push(wa(Se,u,Pt,y));return new $s(ie);case"LineString":case"MultiLineString":return jt=As(V,P.type==="LineString"?0:1,nt),new Hs(jt,y);case"Polygon":case"MultiPolygon":return jt=As(V,P.type==="Polygon"?1:2,nt),new as(jt,y);case"GeometryCollection":for(nn=0,An=P.geometries.length;nn<An;nn++){var qn=Ms({geometry:P.geometries[nn],type:"Feature",properties:u.properties},y);qn&&ie.push(qn)}return new $s(ie);case"FeatureCollection":for(nn=0,An=P.features.length;nn<An;nn++){var Sr=Ms(P.features[nn],y);Sr&&ie.push(Sr)}return new $s(ie);default:throw new Error("Invalid GeoJSON object.")}}function wa(u,y,P,V){return u?u(y,P):new Xi(P,V&&V.markersInheritOptions&&V)}function xa(u){return new ge(u[1],u[0],u[2])}function As(u,y,P){for(var V=[],ie=0,Se=u.length,nt;ie<Se;ie++)nt=y?As(u[ie],y-1,P):(P||xa)(u[ie]),V.push(nt);return V}function ds(u,y){return u=ve(u),u.alt!==void 0?[v(u.lng,y),v(u.lat,y),v(u.alt,y)]:[v(u.lng,y),v(u.lat,y)]}function ra(u,y,P,V){for(var ie=[],Se=0,nt=u.length;Se<nt;Se++)ie.push(y?ra(u[Se],In(u[Se])?0:y-1,P,V):ds(u[Se],V));return!y&&P&&ie.length>0&&ie.push(ie[0].slice()),ie}function So(u,y){return u.feature?i({},u.feature,{geometry:y}):Ts(y)}function Ts(u){return u.type==="Feature"||u.type==="FeatureCollection"?u:{type:"Feature",properties:{},geometry:u}}var yt={toGeoJSON:function(u){return So(this,{type:"Point",coordinates:ds(this.getLatLng(),u)})}};Xi.include(yt),Ps.include(yt),ro.include(yt),Hs.include({toGeoJSON:function(u){var y=!In(this._latlngs),P=ra(this._latlngs,y?1:0,!1,u);return So(this,{type:(y?"Multi":"")+"LineString",coordinates:P})}}),as.include({toGeoJSON:function(u){var y=!In(this._latlngs),P=y&&!In(this._latlngs[0]),V=ra(this._latlngs,P?2:y?1:0,!0,u);return y||(V=[V]),So(this,{type:(P?"Multi":"")+"Polygon",coordinates:V})}}),Es.include({toMultiPoint:function(u){var y=[];return this.eachLayer(function(P){y.push(P.toGeoJSON(u).geometry.coordinates)}),So(this,{type:"MultiPoint",coordinates:y})},toGeoJSON:function(u){var y=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(y==="MultiPoint")return this.toMultiPoint(u);var P=y==="GeometryCollection",V=[];return this.eachLayer(function(ie){if(ie.toGeoJSON){var Se=ie.toGeoJSON(u);if(P)V.push(Se.geometry);else{var nt=Ts(Se);nt.type==="FeatureCollection"?V.push.apply(V,nt.features):V.push(nt)}}}),P?So(this,{geometries:V,type:"GeometryCollection"}):{type:"FeatureCollection",features:V}}});function Vt(u,y){return new ks(u,y)}var kt=Vt,Pn=Pr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(u,y,P){this._url=u,this._bounds=oe(y),S(this,P)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(mr(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){fr(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(u){return this.options.opacity=u,this._image&&this._updateOpacity(),this},setStyle:function(u){return u.opacity&&this.setOpacity(u.opacity),this},bringToFront:function(){return this._map&&ga(this._image),this},bringToBack:function(){return this._map&&Ro(this._image),this},setUrl:function(u){return this._url=u,this._image&&(this._image.src=u),this},setBounds:function(u){return this._bounds=oe(u),this._map&&this._reset(),this},getEvents:function(){var u={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var u=this._url.tagName==="IMG",y=this._image=u?this._url:Wr("img");if(mr(y,"leaflet-image-layer"),this._zoomAnimated&&mr(y,"leaflet-zoom-animated"),this.options.className&&mr(y,this.options.className),y.onselectstart=p,y.onmousemove=p,y.onload=o(this.fire,this,"load"),y.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),u){this._url=y.src;return}y.src=this._url,y.alt=this.options.alt},_animateZoom:function(u){var y=this._map.getZoomScale(u.zoom),P=this._map._latLngBoundsToNewLayerBounds(this._bounds,u.zoom,u.center).min;ma(this._image,P,y)},_reset:function(){var u=this._image,y=new Ie(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),P=y.getSize();Di(u,y.min),u.style.width=P.x+"px",u.style.height=P.y+"px"},_updateOpacity:function(){Ss(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var u=this.options.errorOverlayUrl;u&&this._url!==u&&(this._url=u,this._image.src=u)},getCenter:function(){return this._bounds.getCenter()}}),Un=function(u,y,P){return new Pn(u,y,P)},hr=Pn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var u=this._url.tagName==="VIDEO",y=this._image=u?this._url:Wr("video");if(mr(y,"leaflet-image-layer"),this._zoomAnimated&&mr(y,"leaflet-zoom-animated"),this.options.className&&mr(y,this.options.className),y.onselectstart=p,y.onmousemove=p,y.onloadeddata=o(this.fire,this,"load"),u){for(var P=y.getElementsByTagName("source"),V=[],ie=0;ie<P.length;ie++)V.push(P[ie].src);this._url=P.length>0?V:[y.src];return}j(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(y.style,"objectFit")&&(y.style.objectFit="fill"),y.autoplay=!!this.options.autoplay,y.loop=!!this.options.loop,y.muted=!!this.options.muted,y.playsInline=!!this.options.playsInline;for(var Se=0;Se<this._url.length;Se++){var nt=Wr("source");nt.src=this._url[Se],y.appendChild(nt)}}});function Ei(u,y,P){return new hr(u,y,P)}var ii=Pn.extend({_initImage:function(){var u=this._image=this._url;mr(u,"leaflet-image-layer"),this._zoomAnimated&&mr(u,"leaflet-zoom-animated"),this.options.className&&mr(u,this.options.className),u.onselectstart=p,u.onmousemove=p}});function nu(u,y,P){return new ii(u,y,P)}var Gs=Pr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(u,y){u&&(u instanceof ge||j(u))?(this._latlng=ve(u),S(this,y)):(S(this,u),this._source=y),this.options.content&&(this._content=this.options.content)},openOn:function(u){return u=arguments.length?u:this._source._map,u.hasLayer(this)||u.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(u){return this._map?this.close():(arguments.length?this._source=u:u=this._source,this._prepareOpen(),this.openOn(u._map)),this},onAdd:function(u){this._zoomAnimated=u._zoomAnimated,this._container||this._initLayout(),u._fadeAnimated&&Ss(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),u._fadeAnimated&&Ss(this._container,1),this.bringToFront(),this.options.interactive&&(mr(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(u){u._fadeAnimated?(Ss(this._container,0),this._removeTimeout=setTimeout(o(fr,void 0,this._container),200)):fr(this._container),this.options.interactive&&(qr(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(u){return this._latlng=ve(u),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(u){return this._content=u,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var u={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ga(this._container),this},bringToBack:function(){return this._map&&Ro(this._container),this},_prepareOpen:function(u){var y=this._source;if(!y._map)return!1;if(y instanceof $s){y=null;var P=this._source._layers;for(var V in P)if(P[V]._map){y=P[V];break}if(!y)return!1;this._source=y}if(!u)if(y.getCenter)u=y.getCenter();else if(y.getLatLng)u=y.getLatLng();else if(y.getBounds)u=y.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(u),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var u=this._contentNode,y=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof y=="string")u.innerHTML=y;else{for(;u.hasChildNodes();)u.removeChild(u.firstChild);u.appendChild(y)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var u=this._map.latLngToLayerPoint(this._latlng),y=_e(this.options.offset),P=this._getAnchor();this._zoomAnimated?Di(this._container,u.add(P)):y=y.add(u).add(P);var V=this._containerBottom=-y.y,ie=this._containerLeft=-Math.round(this._containerWidth/2)+y.x;this._container.style.bottom=V+"px",this._container.style.left=ie+"px"}},_getAnchor:function(){return[0,0]}});Ir.include({_initOverlay:function(u,y,P,V){var ie=y;return ie instanceof u||(ie=new u(V).setContent(y)),P&&ie.setLatLng(P),ie}}),Pr.include({_initOverlay:function(u,y,P,V){var ie=P;return ie instanceof u?(S(ie,V),ie._source=this):(ie=y&&!V?y:new u(V,this),ie.setContent(P)),ie}});var Pi=Gs.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(u){return u=arguments.length?u:this._source._map,!u.hasLayer(this)&&u._popup&&u._popup.options.autoClose&&u.removeLayer(u._popup),u._popup=this,Gs.prototype.openOn.call(this,u)},onAdd:function(u){Gs.prototype.onAdd.call(this,u),u.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Co||this._source.on("preclick",Za))},onRemove:function(u){Gs.prototype.onRemove.call(this,u),u.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Co||this._source.off("preclick",Za))},getEvents:function(){var u=Gs.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(u.preclick=this.close),this.options.keepInView&&(u.moveend=this._adjustPan),u},_initLayout:function(){var u="leaflet-popup",y=this._container=Wr("div",u+" "+(this.options.className||"")+" leaflet-zoom-animated"),P=this._wrapper=Wr("div",u+"-content-wrapper",y);if(this._contentNode=Wr("div",u+"-content",P),Kl(y),Wu(this._contentNode),vr(y,"contextmenu",Za),this._tipContainer=Wr("div",u+"-tip-container",y),this._tip=Wr("div",u+"-tip",this._tipContainer),this.options.closeButton){var V=this._closeButton=Wr("a",u+"-close-button",y);V.setAttribute("role","button"),V.setAttribute("aria-label","Close popup"),V.href="#close",V.innerHTML='<span aria-hidden="true">&#215;</span>',vr(V,"click",function(ie){dr(ie),this.close()},this)}},_updateLayout:function(){var u=this._contentNode,y=u.style;y.width="",y.whiteSpace="nowrap";var P=u.offsetWidth;P=Math.min(P,this.options.maxWidth),P=Math.max(P,this.options.minWidth),y.width=P+1+"px",y.whiteSpace="",y.height="";var V=u.offsetHeight,ie=this.options.maxHeight,Se="leaflet-popup-scrolled";ie&&V>ie?(y.height=ie+"px",mr(u,Se)):qr(u,Se),this._containerWidth=this._container.offsetWidth},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center),P=this._getAnchor();Di(this._container,y.add(P))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var u=this._map,y=parseInt(Mo(this._container,"marginBottom"),10)||0,P=this._container.offsetHeight+y,V=this._containerWidth,ie=new H(this._containerLeft,-P-this._containerBottom);ie._add(Fo(this._container));var Se=u.layerPointToContainerPoint(ie),nt=_e(this.options.autoPanPadding),Pt=_e(this.options.autoPanPaddingTopLeft||nt),jt=_e(this.options.autoPanPaddingBottomRight||nt),nn=u.getSize(),An=0,qn=0;Se.x+V+jt.x>nn.x&&(An=Se.x+V-nn.x+jt.x),Se.x-An-Pt.x<0&&(An=Se.x-Pt.x),Se.y+P+jt.y>nn.y&&(qn=Se.y+P-nn.y+jt.y),Se.y-qn-Pt.y<0&&(qn=Se.y-Pt.y),(An||qn)&&(this.options.keepInView&&(this._autopanning=!0),u.fire("autopanstart").panBy([An,qn]))}},_getAnchor:function(){return _e(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ia=function(u,y){return new Pi(u,y)};Ir.mergeOptions({closePopupOnClick:!0}),Ir.include({openPopup:function(u,y,P){return this._initOverlay(Pi,u,y,P).openOn(this),this},closePopup:function(u){return u=arguments.length?u:this._popup,u&&u.close(),this}}),Pr.include({bindPopup:function(u,y){return this._popup=this._initOverlay(Pi,this._popup,u,y),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(u){return this._popup&&(this instanceof $s||(this._popup._source=this),this._popup._prepareOpen(u||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(u){return this._popup&&this._popup.setContent(u),this},getPopup:function(){return this._popup},_openPopup:function(u){if(!(!this._popup||!this._map)){Ar(u);var y=u.layer||u.target;if(this._popup._source===y&&!(y instanceof Co)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(u.latlng);return}this._popup._source=y,this.openPopup(u.latlng)}},_movePopup:function(u){this._popup.setLatLng(u.latlng)},_onKeyPress:function(u){u.originalEvent.keyCode===13&&this._openPopup(u)}});var La=Gs.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(u){Gs.prototype.onAdd.call(this,u),this.setOpacity(this.options.opacity),u.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(u){Gs.prototype.onRemove.call(this,u),u.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var u=Gs.prototype.getEvents.call(this);return this.options.permanent||(u.preclick=this.close),u},_initLayout:function(){var u="leaflet-tooltip",y=u+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Wr("div",y),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(u){var y,P,V=this._map,ie=this._container,Se=V.latLngToContainerPoint(V.getCenter()),nt=V.layerPointToContainerPoint(u),Pt=this.options.direction,jt=ie.offsetWidth,nn=ie.offsetHeight,An=_e(this.options.offset),qn=this._getAnchor();Pt==="top"?(y=jt/2,P=nn):Pt==="bottom"?(y=jt/2,P=0):Pt==="center"?(y=jt/2,P=nn/2):Pt==="right"?(y=0,P=nn/2):Pt==="left"?(y=jt,P=nn/2):nt.x<Se.x?(Pt="right",y=0,P=nn/2):(Pt="left",y=jt+(An.x+qn.x)*2,P=nn/2),u=u.subtract(_e(y,P,!0)).add(An).add(qn),qr(ie,"leaflet-tooltip-right"),qr(ie,"leaflet-tooltip-left"),qr(ie,"leaflet-tooltip-top"),qr(ie,"leaflet-tooltip-bottom"),mr(ie,"leaflet-tooltip-"+Pt),Di(ie,u)},_updatePosition:function(){var u=this._map.latLngToLayerPoint(this._latlng);this._setPosition(u)},setOpacity:function(u){this.options.opacity=u,this._container&&Ss(this._container,u)},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center);this._setPosition(y)},_getAnchor:function(){return _e(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),sa=function(u,y){return new La(u,y)};Ir.include({openTooltip:function(u,y,P){return this._initOverlay(La,u,y,P).openOn(this),this},closeTooltip:function(u){return u.close(),this}}),Pr.include({bindTooltip:function(u,y){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(La,this._tooltip,u,y),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(u){if(!(!u&&this._tooltipHandlersAdded)){var y=u?"off":"on",P={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?P.add=this._openTooltip:(P.mouseover=this._openTooltip,P.mouseout=this.closeTooltip,P.click=this._openTooltip,this._map?this._addFocusListeners():P.add=this._addFocusListeners),this._tooltip.options.sticky&&(P.mousemove=this._moveTooltip),this[y](P),this._tooltipHandlersAdded=!u}},openTooltip:function(u){return this._tooltip&&(this instanceof $s||(this._tooltip._source=this),this._tooltip._prepareOpen(u)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(u){return this._tooltip&&this._tooltip.setContent(u),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(u){var y=typeof u.getElement=="function"&&u.getElement();y&&(vr(y,"focus",function(){this._tooltip._source=u,this.openTooltip()},this),vr(y,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(u){var y=typeof u.getElement=="function"&&u.getElement();y&&y.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(u){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var y=this;this._map.once("moveend",function(){y._openOnceFlag=!1,y._openTooltip(u)});return}this._tooltip._source=u.layer||u.target,this.openTooltip(this._tooltip.options.sticky?u.latlng:void 0)}},_moveTooltip:function(u){var y=u.latlng,P,V;this._tooltip.options.sticky&&u.originalEvent&&(P=this._map.mouseEventToContainerPoint(u.originalEvent),V=this._map.containerPointToLayerPoint(P),y=this._map.layerPointToLatLng(V)),this._tooltip.setLatLng(y)}});var oa=ta.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(u){var y=u&&u.tagName==="DIV"?u:document.createElement("div"),P=this.options;if(P.html instanceof Element?(Ga(y),y.appendChild(P.html)):y.innerHTML=P.html!==!1?P.html:"",P.bgPos){var V=_e(P.bgPos);y.style.backgroundPosition=-V.x+"px "+-V.y+"px"}return this._setIconStyles(y,"icon"),y},createShadow:function(){return null}});function aa(u){return new oa(u)}ta.Default=Ja;var Nr=Pr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Xt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(u){S(this,u)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(u){u._addZoomLimit(this)},onRemove:function(u){this._removeAllTiles(),fr(this._container),u._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ga(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ro(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(u){return this.options.opacity=u,this._updateOpacity(),this},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var u=this._clampZoom(this._map.getZoom());u!==this._tileZoom&&(this._tileZoom=u,this._updateLevels()),this._update()}return this},getEvents:function(){var u={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),u.move=this._onMove),this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},createTile:function(){return document.createElement("div")},getTileSize:function(){var u=this.options.tileSize;return u instanceof H?u:new H(u,u)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(u){for(var y=this.getPane().children,P=-u(-1/0,1/0),V=0,ie=y.length,Se;V<ie;V++)Se=y[V].style.zIndex,y[V]!==this._container&&Se&&(P=u(P,+Se));isFinite(P)&&(this.options.zIndex=P+u(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Xt.ielt9){Ss(this._container,this.options.opacity);var u=+new Date,y=!1,P=!1;for(var V in this._tiles){var ie=this._tiles[V];if(!(!ie.current||!ie.loaded)){var Se=Math.min(1,(u-ie.loaded)/200);Ss(ie.el,Se),Se<1?y=!0:(ie.active?P=!0:this._onOpaqueTile(ie),ie.active=!0)}}P&&!this._noPrune&&this._pruneTiles(),y&&(R(this._fadeFrame),this._fadeFrame=F(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=Wr("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var u=this._tileZoom,y=this.options.maxZoom;if(u!==void 0){for(var P in this._levels)P=Number(P),this._levels[P].el.children.length||P===u?(this._levels[P].el.style.zIndex=y-Math.abs(u-P),this._onUpdateLevel(P)):(fr(this._levels[P].el),this._removeTilesAtZoom(P),this._onRemoveLevel(P),delete this._levels[P]);var V=this._levels[u],ie=this._map;return V||(V=this._levels[u]={},V.el=Wr("div","leaflet-tile-container leaflet-zoom-animated",this._container),V.el.style.zIndex=y,V.origin=ie.project(ie.unproject(ie.getPixelOrigin()),u).round(),V.zoom=u,this._setZoomTransform(V,ie.getCenter(),ie.getZoom()),p(V.el.offsetWidth),this._onCreateLevel(V)),this._level=V,V}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var u,y,P=this._map.getZoom();if(P>this.options.maxZoom||P<this.options.minZoom){this._removeAllTiles();return}for(u in this._tiles)y=this._tiles[u],y.retain=y.current;for(u in this._tiles)if(y=this._tiles[u],y.current&&!y.active){var V=y.coords;this._retainParent(V.x,V.y,V.z,V.z-5)||this._retainChildren(V.x,V.y,V.z,V.z+2)}for(u in this._tiles)this._tiles[u].retain||this._removeTile(u)}},_removeTilesAtZoom:function(u){for(var y in this._tiles)this._tiles[y].coords.z===u&&this._removeTile(y)},_removeAllTiles:function(){for(var u in this._tiles)this._removeTile(u)},_invalidateAll:function(){for(var u in this._levels)fr(this._levels[u].el),this._onRemoveLevel(Number(u)),delete this._levels[u];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(u,y,P,V){var ie=Math.floor(u/2),Se=Math.floor(y/2),nt=P-1,Pt=new H(+ie,+Se);Pt.z=+nt;var jt=this._tileCoordsToKey(Pt),nn=this._tiles[jt];return nn&&nn.active?(nn.retain=!0,!0):(nn&&nn.loaded&&(nn.retain=!0),nt>V?this._retainParent(ie,Se,nt,V):!1)},_retainChildren:function(u,y,P,V){for(var ie=2*u;ie<2*u+2;ie++)for(var Se=2*y;Se<2*y+2;Se++){var nt=new H(ie,Se);nt.z=P+1;var Pt=this._tileCoordsToKey(nt),jt=this._tiles[Pt];if(jt&&jt.active){jt.retain=!0;continue}else jt&&jt.loaded&&(jt.retain=!0);P+1<V&&this._retainChildren(ie,Se,P+1,V)}},_resetView:function(u){var y=u&&(u.pinch||u.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),y,y)},_animateZoom:function(u){this._setView(u.center,u.zoom,!0,u.noUpdate)},_clampZoom:function(u){var y=this.options;return y.minNativeZoom!==void 0&&u<y.minNativeZoom?y.minNativeZoom:y.maxNativeZoom!==void 0&&y.maxNativeZoom<u?y.maxNativeZoom:u},_setView:function(u,y,P,V){var ie=Math.round(y);this.options.maxZoom!==void 0&&ie>this.options.maxZoom||this.options.minZoom!==void 0&&ie<this.options.minZoom?ie=void 0:ie=this._clampZoom(ie);var Se=this.options.updateWhenZooming&&ie!==this._tileZoom;(!V||Se)&&(this._tileZoom=ie,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),ie!==void 0&&this._update(u),P||this._pruneTiles(),this._noPrune=!!P),this._setZoomTransforms(u,y)},_setZoomTransforms:function(u,y){for(var P in this._levels)this._setZoomTransform(this._levels[P],u,y)},_setZoomTransform:function(u,y,P){var V=this._map.getZoomScale(P,u.zoom),ie=u.origin.multiplyBy(V).subtract(this._map._getNewPixelOrigin(y,P)).round();Xt.any3d?ma(u.el,ie,V):Di(u.el,ie)},_resetGrid:function(){var u=this._map,y=u.options.crs,P=this._tileSize=this.getTileSize(),V=this._tileZoom,ie=this._map.getPixelWorldBounds(this._tileZoom);ie&&(this._globalTileRange=this._pxBoundsToTileRange(ie)),this._wrapX=y.wrapLng&&!this.options.noWrap&&[Math.floor(u.project([0,y.wrapLng[0]],V).x/P.x),Math.ceil(u.project([0,y.wrapLng[1]],V).x/P.y)],this._wrapY=y.wrapLat&&!this.options.noWrap&&[Math.floor(u.project([y.wrapLat[0],0],V).y/P.x),Math.ceil(u.project([y.wrapLat[1],0],V).y/P.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(u){var y=this._map,P=y._animatingZoom?Math.max(y._animateToZoom,y.getZoom()):y.getZoom(),V=y.getZoomScale(P,this._tileZoom),ie=y.project(u,this._tileZoom).floor(),Se=y.getSize().divideBy(V*2);return new Ie(ie.subtract(Se),ie.add(Se))},_update:function(u){var y=this._map;if(y){var P=this._clampZoom(y.getZoom());if(u===void 0&&(u=y.getCenter()),this._tileZoom!==void 0){var V=this._getTiledPixelBounds(u),ie=this._pxBoundsToTileRange(V),Se=ie.getCenter(),nt=[],Pt=this.options.keepBuffer,jt=new Ie(ie.getBottomLeft().subtract([Pt,-Pt]),ie.getTopRight().add([Pt,-Pt]));if(!(isFinite(ie.min.x)&&isFinite(ie.min.y)&&isFinite(ie.max.x)&&isFinite(ie.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var nn in this._tiles){var An=this._tiles[nn].coords;(An.z!==this._tileZoom||!jt.contains(new H(An.x,An.y)))&&(this._tiles[nn].current=!1)}if(Math.abs(P-this._tileZoom)>1){this._setView(u,P);return}for(var qn=ie.min.y;qn<=ie.max.y;qn++)for(var Sr=ie.min.x;Sr<=ie.max.x;Sr++){var Qi=new H(Sr,qn);if(Qi.z=this._tileZoom,!!this._isValidTile(Qi)){var Ii=this._tiles[this._tileCoordsToKey(Qi)];Ii?Ii.current=!0:nt.push(Qi)}}if(nt.sort(function(ki,oo){return ki.distanceTo(Se)-oo.distanceTo(Se)}),nt.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var vs=document.createDocumentFragment();for(Sr=0;Sr<nt.length;Sr++)this._addTile(nt[Sr],vs);this._level.el.appendChild(vs)}}}},_isValidTile:function(u){var y=this._map.options.crs;if(!y.infinite){var P=this._globalTileRange;if(!y.wrapLng&&(u.x<P.min.x||u.x>P.max.x)||!y.wrapLat&&(u.y<P.min.y||u.y>P.max.y))return!1}if(!this.options.bounds)return!0;var V=this._tileCoordsToBounds(u);return oe(this.options.bounds).overlaps(V)},_keyToBounds:function(u){return this._tileCoordsToBounds(this._keyToTileCoords(u))},_tileCoordsToNwSe:function(u){var y=this._map,P=this.getTileSize(),V=u.scaleBy(P),ie=V.add(P),Se=y.unproject(V,u.z),nt=y.unproject(ie,u.z);return[Se,nt]},_tileCoordsToBounds:function(u){var y=this._tileCoordsToNwSe(u),P=new te(y[0],y[1]);return this.options.noWrap||(P=this._map.wrapLatLngBounds(P)),P},_tileCoordsToKey:function(u){return u.x+":"+u.y+":"+u.z},_keyToTileCoords:function(u){var y=u.split(":"),P=new H(+y[0],+y[1]);return P.z=+y[2],P},_removeTile:function(u){var y=this._tiles[u];y&&(fr(y.el),delete this._tiles[u],this.fire("tileunload",{tile:y.el,coords:this._keyToTileCoords(u)}))},_initTile:function(u){mr(u,"leaflet-tile");var y=this.getTileSize();u.style.width=y.x+"px",u.style.height=y.y+"px",u.onselectstart=p,u.onmousemove=p,Xt.ielt9&&this.options.opacity<1&&Ss(u,this.options.opacity)},_addTile:function(u,y){var P=this._getTilePos(u),V=this._tileCoordsToKey(u),ie=this.createTile(this._wrapCoords(u),o(this._tileReady,this,u));this._initTile(ie),this.createTile.length<2&&F(o(this._tileReady,this,u,null,ie)),Di(ie,P),this._tiles[V]={el:ie,coords:u,current:!0},y.appendChild(ie),this.fire("tileloadstart",{tile:ie,coords:u})},_tileReady:function(u,y,P){y&&this.fire("tileerror",{error:y,tile:P,coords:u});var V=this._tileCoordsToKey(u);P=this._tiles[V],P&&(P.loaded=+new Date,this._map._fadeAnimated?(Ss(P.el,0),R(this._fadeFrame),this._fadeFrame=F(this._updateOpacity,this)):(P.active=!0,this._pruneTiles()),y||(mr(P.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:P.el,coords:u})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Xt.ielt9||!this._map._fadeAnimated?F(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(u){return u.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(u){var y=new H(this._wrapX?f(u.x,this._wrapX):u.x,this._wrapY?f(u.y,this._wrapY):u.y);return y.z=u.z,y},_pxBoundsToTileRange:function(u){var y=this.getTileSize();return new Ie(u.min.unscaleBy(y).floor(),u.max.unscaleBy(y).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var u in this._tiles)if(!this._tiles[u].loaded)return!1;return!0}});function Ho(u){return new Nr(u)}var ps=Nr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(u,y){this._url=u,y=S(this,y),y.detectRetina&&Xt.retina&&y.maxZoom>0?(y.tileSize=Math.floor(y.tileSize/2),y.zoomReverse?(y.zoomOffset--,y.minZoom=Math.min(y.maxZoom,y.minZoom+1)):(y.zoomOffset++,y.maxZoom=Math.max(y.minZoom,y.maxZoom-1)),y.minZoom=Math.max(0,y.minZoom)):y.zoomReverse?y.minZoom=Math.min(y.maxZoom,y.minZoom):y.maxZoom=Math.max(y.minZoom,y.maxZoom),typeof y.subdomains=="string"&&(y.subdomains=y.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(u,y){return this._url===u&&y===void 0&&(y=!0),this._url=u,y||this.redraw(),this},createTile:function(u,y){var P=document.createElement("img");return vr(P,"load",o(this._tileOnLoad,this,y,P)),vr(P,"error",o(this._tileOnError,this,y,P)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(P.referrerPolicy=this.options.referrerPolicy),P.alt="",P.src=this.getTileUrl(u),P},getTileUrl:function(u){var y={r:Xt.retina?"@2x":"",s:this._getSubdomain(u),x:u.x,y:u.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var P=this._globalTileRange.max.y-u.y;this.options.tms&&(y.y=P),y["-y"]=P}return T(this._url,i(y,this.options))},_tileOnLoad:function(u,y){Xt.ielt9?setTimeout(o(u,this,null,y),0):u(null,y)},_tileOnError:function(u,y,P){var V=this.options.errorTileUrl;V&&y.getAttribute("src")!==V&&(y.src=V),u(P,y)},_onTileRemove:function(u){u.tile.onload=null},_getZoomForUrl:function(){var u=this._tileZoom,y=this.options.maxZoom,P=this.options.zoomReverse,V=this.options.zoomOffset;return P&&(u=y-u),u+V},_getSubdomain:function(u){var y=Math.abs(u.x+u.y)%this.options.subdomains.length;return this.options.subdomains[y]},_abortLoading:function(){var u,y;for(u in this._tiles)if(this._tiles[u].coords.z!==this._tileZoom&&(y=this._tiles[u].el,y.onload=p,y.onerror=p,!y.complete)){y.src=X;var P=this._tiles[u].coords;fr(y),delete this._tiles[u],this.fire("tileabort",{tile:y,coords:P})}},_removeTile:function(u){var y=this._tiles[u];if(y)return y.el.setAttribute("src",X),Nr.prototype._removeTile.call(this,u)},_tileReady:function(u,y,P){if(!(!this._map||P&&P.getAttribute("src")===X))return Nr.prototype._tileReady.call(this,u,y,P)}});function si(u,y){return new ps(u,y)}var hi=ps.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(u,y){this._url=u;var P=i({},this.defaultWmsParams);for(var V in y)V in this.options||(P[V]=y[V]);y=S(this,y);var ie=y.detectRetina&&Xt.retina?2:1,Se=this.getTileSize();P.width=Se.x*ie,P.height=Se.y*ie,this.wmsParams=P},onAdd:function(u){this._crs=this.options.crs||u.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var y=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[y]=this._crs.code,ps.prototype.onAdd.call(this,u)},getTileUrl:function(u){var y=this._tileCoordsToNwSe(u),P=this._crs,V=ee(P.project(y[0]),P.project(y[1])),ie=V.min,Se=V.max,nt=(this._wmsVersion>=1.3&&this._crs===Zi?[ie.y,ie.x,Se.y,Se.x]:[ie.x,ie.y,Se.x,Se.y]).join(","),Pt=ps.prototype.getTileUrl.call(this,u);return Pt+I(this.wmsParams,Pt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+nt},setParams:function(u,y){return i(this.wmsParams,u),y||this.redraw(),this}});function Hi(u,y){return new hi(u,y)}ps.WMS=hi,si.wms=Hi;var vi=Pr.extend({options:{padding:.1},initialize:function(u){S(this,u),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),mr(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var u={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(u.zoomanim=this._onAnimZoom),u},_onAnimZoom:function(u){this._updateTransform(u.center,u.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(u,y){var P=this._map.getZoomScale(y,this._zoom),V=this._map.getSize().multiplyBy(.5+this.options.padding),ie=this._map.project(this._center,y),Se=V.multiplyBy(-P).add(ie).subtract(this._map._getNewPixelOrigin(u,y));Xt.any3d?ma(this._container,Se,P):Di(this._container,Se)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var u in this._layers)this._layers[u]._reset()},_onZoomEnd:function(){for(var u in this._layers)this._layers[u]._project()},_updatePaths:function(){for(var u in this._layers)this._layers[u]._update()},_update:function(){var u=this.options.padding,y=this._map.getSize(),P=this._map.containerPointToLayerPoint(y.multiplyBy(-u)).round();this._bounds=new Ie(P,P.add(y.multiplyBy(1+u*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Eo=vi.extend({options:{tolerance:0},getEvents:function(){var u=vi.prototype.getEvents.call(this);return u.viewprereset=this._onViewPreReset,u},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){vi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var u=this._container=document.createElement("canvas");vr(u,"mousemove",this._onMouseMove,this),vr(u,"click dblclick mousedown mouseup contextmenu",this._onClick,this),vr(u,"mouseout",this._handleMouseOut,this),u._leaflet_disable_events=!0,this._ctx=u.getContext("2d")},_destroyContainer:function(){R(this._redrawRequest),delete this._ctx,fr(this._container),$r(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var u;this._redrawBounds=null;for(var y in this._layers)u=this._layers[y],u._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){vi.prototype._update.call(this);var u=this._bounds,y=this._container,P=u.getSize(),V=Xt.retina?2:1;Di(y,u.min),y.width=V*P.x,y.height=V*P.y,y.style.width=P.x+"px",y.style.height=P.y+"px",Xt.retina&&this._ctx.scale(2,2),this._ctx.translate(-u.min.x,-u.min.y),this.fire("update")}},_reset:function(){vi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(u){this._updateDashArray(u),this._layers[l(u)]=u;var y=u._order={layer:u,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=y),this._drawLast=y,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(u){this._requestRedraw(u)},_removePath:function(u){var y=u._order,P=y.next,V=y.prev;P?P.prev=V:this._drawLast=V,V?V.next=P:this._drawFirst=P,delete u._order,delete this._layers[l(u)],this._requestRedraw(u)},_updatePath:function(u){this._extendRedrawBounds(u),u._project(),u._update(),this._requestRedraw(u)},_updateStyle:function(u){this._updateDashArray(u),this._requestRedraw(u)},_updateDashArray:function(u){if(typeof u.options.dashArray=="string"){var y=u.options.dashArray.split(/[, ]+/),P=[],V,ie;for(ie=0;ie<y.length;ie++){if(V=Number(y[ie]),isNaN(V))return;P.push(V)}u.options._dashArray=P}else u.options._dashArray=u.options.dashArray},_requestRedraw:function(u){this._map&&(this._extendRedrawBounds(u),this._redrawRequest=this._redrawRequest||F(this._redraw,this))},_extendRedrawBounds:function(u){if(u._pxBounds){var y=(u.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Ie,this._redrawBounds.extend(u._pxBounds.min.subtract([y,y])),this._redrawBounds.extend(u._pxBounds.max.add([y,y]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var u=this._redrawBounds;if(u){var y=u.getSize();this._ctx.clearRect(u.min.x,u.min.y,y.x,y.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var u,y=this._redrawBounds;if(this._ctx.save(),y){var P=y.getSize();this._ctx.beginPath(),this._ctx.rect(y.min.x,y.min.y,P.x,P.y),this._ctx.clip()}this._drawing=!0;for(var V=this._drawFirst;V;V=V.next)u=V.layer,(!y||u._pxBounds&&u._pxBounds.intersects(y))&&u._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(u,y){if(this._drawing){var P,V,ie,Se,nt=u._parts,Pt=nt.length,jt=this._ctx;if(Pt){for(jt.beginPath(),P=0;P<Pt;P++){for(V=0,ie=nt[P].length;V<ie;V++)Se=nt[P][V],jt[V?"lineTo":"moveTo"](Se.x,Se.y);y&&jt.closePath()}this._fillStroke(jt,u)}}},_updateCircle:function(u){if(!(!this._drawing||u._empty())){var y=u._point,P=this._ctx,V=Math.max(Math.round(u._radius),1),ie=(Math.max(Math.round(u._radiusY),1)||V)/V;ie!==1&&(P.save(),P.scale(1,ie)),P.beginPath(),P.arc(y.x,y.y/ie,V,0,Math.PI*2,!1),ie!==1&&P.restore(),this._fillStroke(P,u)}},_fillStroke:function(u,y){var P=y.options;P.fill&&(u.globalAlpha=P.fillOpacity,u.fillStyle=P.fillColor||P.color,u.fill(P.fillRule||"evenodd")),P.stroke&&P.weight!==0&&(u.setLineDash&&u.setLineDash(y.options&&y.options._dashArray||[]),u.globalAlpha=P.opacity,u.lineWidth=P.weight,u.strokeStyle=P.color,u.lineCap=P.lineCap,u.lineJoin=P.lineJoin,u.stroke())},_onClick:function(u){for(var y=this._map.mouseEventToLayerPoint(u),P,V,ie=this._drawFirst;ie;ie=ie.next)P=ie.layer,P.options.interactive&&P._containsPoint(y)&&(!(u.type==="click"||u.type==="preclick")||!this._map._draggableMoved(P))&&(V=P);this._fireEvent(V?[V]:!1,u)},_onMouseMove:function(u){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var y=this._map.mouseEventToLayerPoint(u);this._handleMouseHover(u,y)}},_handleMouseOut:function(u){var y=this._hoveredLayer;y&&(qr(this._container,"leaflet-interactive"),this._fireEvent([y],u,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(u,y){if(!this._mouseHoverThrottled){for(var P,V,ie=this._drawFirst;ie;ie=ie.next)P=ie.layer,P.options.interactive&&P._containsPoint(y)&&(V=P);V!==this._hoveredLayer&&(this._handleMouseOut(u),V&&(mr(this._container,"leaflet-interactive"),this._fireEvent([V],u,"mouseover"),this._hoveredLayer=V)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,u),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(u,y,P){this._map._fireDOMEvent(y,P||y.type,u)},_bringToFront:function(u){var y=u._order;if(y){var P=y.next,V=y.prev;if(P)P.prev=V;else return;V?V.next=P:P&&(this._drawFirst=P),y.prev=this._drawLast,this._drawLast.next=y,y.next=null,this._drawLast=y,this._requestRedraw(u)}},_bringToBack:function(u){var y=u._order;if(y){var P=y.next,V=y.prev;if(V)V.next=P;else return;P?P.prev=V:V&&(this._drawLast=V),y.prev=null,y.next=this._drawFirst,this._drawFirst.prev=y,this._drawFirst=y,this._requestRedraw(u)}}});function io(u){return Xt.canvas?new Eo(u):null}var To=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(u){return document.createElement("<lvml:"+u+' class="lvml">')}}catch{}return function(u){return document.createElement("<"+u+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Yu={_initContainer:function(){this._container=Wr("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(vi.prototype._update.call(this),this.fire("update"))},_initPath:function(u){var y=u._container=To("shape");mr(y,"leaflet-vml-shape "+(this.options.className||"")),y.coordsize="1 1",u._path=To("path"),y.appendChild(u._path),this._updateStyle(u),this._layers[l(u)]=u},_addPath:function(u){var y=u._container;this._container.appendChild(y),u.options.interactive&&u.addInteractiveTarget(y)},_removePath:function(u){var y=u._container;fr(y),u.removeInteractiveTarget(y),delete this._layers[l(u)]},_updateStyle:function(u){var y=u._stroke,P=u._fill,V=u.options,ie=u._container;ie.stroked=!!V.stroke,ie.filled=!!V.fill,V.stroke?(y||(y=u._stroke=To("stroke")),ie.appendChild(y),y.weight=V.weight+"px",y.color=V.color,y.opacity=V.opacity,V.dashArray?y.dashStyle=j(V.dashArray)?V.dashArray.join(" "):V.dashArray.replace(/( *, *)/g," "):y.dashStyle="",y.endcap=V.lineCap.replace("butt","flat"),y.joinstyle=V.lineJoin):y&&(ie.removeChild(y),u._stroke=null),V.fill?(P||(P=u._fill=To("fill")),ie.appendChild(P),P.color=V.fillColor||V.color,P.opacity=V.fillOpacity):P&&(ie.removeChild(P),u._fill=null)},_updateCircle:function(u){var y=u._point.round(),P=Math.round(u._radius),V=Math.round(u._radiusY||P);this._setPath(u,u._empty()?"M0 0":"AL "+y.x+","+y.y+" "+P+","+V+" 0,"+65535*360)},_setPath:function(u,y){u._path.v=y},_bringToFront:function(u){ga(u._container)},_bringToBack:function(u){Ro(u._container)}},la=Xt.vml?To:de,Ji=vi.extend({_initContainer:function(){this._container=la("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=la("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){fr(this._container),$r(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){vi.prototype._update.call(this);var u=this._bounds,y=u.getSize(),P=this._container;(!this._svgSize||!this._svgSize.equals(y))&&(this._svgSize=y,P.setAttribute("width",y.x),P.setAttribute("height",y.y)),Di(P,u.min),P.setAttribute("viewBox",[u.min.x,u.min.y,y.x,y.y].join(" ")),this.fire("update")}},_initPath:function(u){var y=u._path=la("path");u.options.className&&mr(y,u.options.className),u.options.interactive&&mr(y,"leaflet-interactive"),this._updateStyle(u),this._layers[l(u)]=u},_addPath:function(u){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(u._path),u.addInteractiveTarget(u._path)},_removePath:function(u){fr(u._path),u.removeInteractiveTarget(u._path),delete this._layers[l(u)]},_updatePath:function(u){u._project(),u._update()},_updateStyle:function(u){var y=u._path,P=u.options;y&&(P.stroke?(y.setAttribute("stroke",P.color),y.setAttribute("stroke-opacity",P.opacity),y.setAttribute("stroke-width",P.weight),y.setAttribute("stroke-linecap",P.lineCap),y.setAttribute("stroke-linejoin",P.lineJoin),P.dashArray?y.setAttribute("stroke-dasharray",P.dashArray):y.removeAttribute("stroke-dasharray"),P.dashOffset?y.setAttribute("stroke-dashoffset",P.dashOffset):y.removeAttribute("stroke-dashoffset")):y.setAttribute("stroke","none"),P.fill?(y.setAttribute("fill",P.fillColor||P.color),y.setAttribute("fill-opacity",P.fillOpacity),y.setAttribute("fill-rule",P.fillRule||"evenodd")):y.setAttribute("fill","none"))},_updatePoly:function(u,y){this._setPath(u,re(u._parts,y))},_updateCircle:function(u){var y=u._point,P=Math.max(Math.round(u._radius),1),V=Math.max(Math.round(u._radiusY),1)||P,ie="a"+P+","+V+" 0 1,0 ",Se=u._empty()?"M0 0":"M"+(y.x-P)+","+y.y+ie+P*2+",0 "+ie+-P*2+",0 ";this._setPath(u,Se)},_setPath:function(u,y){u._path.setAttribute("d",y)},_bringToFront:function(u){ga(u._path)},_bringToBack:function(u){Ro(u._path)}});Xt.vml&&Ji.include(Yu);function mi(u){return Xt.svg||Xt.vml?new Ji(u):null}Ir.include({getRenderer:function(u){var y=u.options.renderer||this._getPaneRenderer(u.options.pane)||this.options.renderer||this._renderer;return y||(y=this._renderer=this._createRenderer()),this.hasLayer(y)||this.addLayer(y),y},_getPaneRenderer:function(u){if(u==="overlayPane"||u===void 0)return!1;var y=this._paneRenderers[u];return y===void 0&&(y=this._createRenderer({pane:u}),this._paneRenderers[u]=y),y},_createRenderer:function(u){return this.options.preferCanvas&&io(u)||mi(u)}});var Os=as.extend({initialize:function(u,y){as.prototype.initialize.call(this,this._boundsToLatLngs(u),y)},setBounds:function(u){return this.setLatLngs(this._boundsToLatLngs(u))},_boundsToLatLngs:function(u){return u=oe(u),[u.getSouthWest(),u.getNorthWest(),u.getNorthEast(),u.getSouthEast()]}});function so(u,y){return new Os(u,y)}Ji.create=la,Ji.pointsToPath=re,ks.geometryToLayer=Ms,ks.coordsToLatLng=xa,ks.coordsToLatLngs=As,ks.latLngToCoords=ds,ks.latLngsToCoords=ra,ks.getFeature=So,ks.asFeature=Ts,Ir.mergeOptions({boxZoom:!0});var or=ti.extend({initialize:function(u){this._map=u,this._container=u._container,this._pane=u._panes.overlayPane,this._resetStateTimeout=0,u.on("unload",this._destroy,this)},addHooks:function(){vr(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){$r(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){fr(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(u){if(!u.shiftKey||u.which!==1&&u.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),qa(),Hu(),this._startPoint=this._map.mouseEventToContainerPoint(u),vr(document,{contextmenu:Ar,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(u){this._moved||(this._moved=!0,this._box=Wr("div","leaflet-zoom-box",this._container),mr(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(u);var y=new Ie(this._point,this._startPoint),P=y.getSize();Di(this._box,y.min),this._box.style.width=P.x+"px",this._box.style.height=P.y+"px"},_finish:function(){this._moved&&(fr(this._box),qr(this._container,"leaflet-crosshair")),wo(),jo(),$r(document,{contextmenu:Ar,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(u){if(!(u.which!==1&&u.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var y=new te(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(y).fire("boxzoomend",{boxZoomBounds:y})}},_onKeyDown:function(u){u.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ir.addInitHook("addHandler","boxZoom",or),Ir.mergeOptions({doubleClickZoom:!0});var Ca=ti.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(u){var y=this._map,P=y.getZoom(),V=y.options.zoomDelta,ie=u.originalEvent.shiftKey?P-V:P+V;y.options.doubleClickZoom==="center"?y.setZoom(ie):y.setZoomAround(u.containerPoint,ie)}});Ir.addInitHook("addHandler","doubleClickZoom",Ca),Ir.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Sa=ti.extend({addHooks:function(){if(!this._draggable){var u=this._map;this._draggable=new $o(u._mapPane,u._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),u.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),u.on("zoomend",this._onZoomEnd,this),u.whenReady(this._onZoomEnd,this))}mr(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){qr(this._map._container,"leaflet-grab"),qr(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var u=this._map;if(u._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var y=oe(this._map.options.maxBounds);this._offsetLimit=ee(this._map.latLngToContainerPoint(y.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(y.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;u.fire("movestart").fire("dragstart"),u.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(u){if(this._map.options.inertia){var y=this._lastTime=+new Date,P=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(P),this._times.push(y),this._prunePositions(y)}this._map.fire("move",u).fire("drag",u)},_prunePositions:function(u){for(;this._positions.length>1&&u-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var u=this._map.getSize().divideBy(2),y=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=y.subtract(u).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(u,y){return u-(u-y)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var u=this._draggable._newPos.subtract(this._draggable._startPos),y=this._offsetLimit;u.x<y.min.x&&(u.x=this._viscousLimit(u.x,y.min.x)),u.y<y.min.y&&(u.y=this._viscousLimit(u.y,y.min.y)),u.x>y.max.x&&(u.x=this._viscousLimit(u.x,y.max.x)),u.y>y.max.y&&(u.y=this._viscousLimit(u.y,y.max.y)),this._draggable._newPos=this._draggable._startPos.add(u)}},_onPreDragWrap:function(){var u=this._worldWidth,y=Math.round(u/2),P=this._initialWorldOffset,V=this._draggable._newPos.x,ie=(V-y+P)%u+y-P,Se=(V+y+P)%u-y-P,nt=Math.abs(ie+P)<Math.abs(Se+P)?ie:Se;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=nt},_onDragEnd:function(u){var y=this._map,P=y.options,V=!P.inertia||u.noInertia||this._times.length<2;if(y.fire("dragend",u),V)y.fire("moveend");else{this._prunePositions(+new Date);var ie=this._lastPos.subtract(this._positions[0]),Se=(this._lastTime-this._times[0])/1e3,nt=P.easeLinearity,Pt=ie.multiplyBy(nt/Se),jt=Pt.distanceTo([0,0]),nn=Math.min(P.inertiaMaxSpeed,jt),An=Pt.multiplyBy(nn/jt),qn=nn/(P.inertiaDeceleration*nt),Sr=An.multiplyBy(-qn/2).round();!Sr.x&&!Sr.y?y.fire("moveend"):(Sr=y._limitOffset(Sr,y.options.maxBounds),F(function(){y.panBy(Sr,{duration:qn,easeLinearity:nt,noMoveStart:!0,animate:!0})}))}}});Ir.addInitHook("addHandler","dragging",Sa),Ir.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Go=ti.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(u){this._map=u,this._setPanDelta(u.options.keyboardPanDelta),this._setZoomDelta(u.options.zoomDelta)},addHooks:function(){var u=this._map._container;u.tabIndex<=0&&(u.tabIndex="0"),vr(u,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),$r(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var u=document.body,y=document.documentElement,P=u.scrollTop||y.scrollTop,V=u.scrollLeft||y.scrollLeft;this._map._container.focus(),window.scrollTo(V,P)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(u){var y=this._panKeys={},P=this.keyCodes,V,ie;for(V=0,ie=P.left.length;V<ie;V++)y[P.left[V]]=[-1*u,0];for(V=0,ie=P.right.length;V<ie;V++)y[P.right[V]]=[u,0];for(V=0,ie=P.down.length;V<ie;V++)y[P.down[V]]=[0,u];for(V=0,ie=P.up.length;V<ie;V++)y[P.up[V]]=[0,-1*u]},_setZoomDelta:function(u){var y=this._zoomKeys={},P=this.keyCodes,V,ie;for(V=0,ie=P.zoomIn.length;V<ie;V++)y[P.zoomIn[V]]=u;for(V=0,ie=P.zoomOut.length;V<ie;V++)y[P.zoomOut[V]]=-u},_addHooks:function(){vr(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){$r(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(u){if(!(u.altKey||u.ctrlKey||u.metaKey)){var y=u.keyCode,P=this._map,V;if(y in this._panKeys){if(!P._panAnim||!P._panAnim._inProgress)if(V=this._panKeys[y],u.shiftKey&&(V=_e(V).multiplyBy(3)),P.options.maxBounds&&(V=P._limitOffset(_e(V),P.options.maxBounds)),P.options.worldCopyJump){var ie=P.wrapLatLng(P.unproject(P.project(P.getCenter()).add(V)));P.panTo(ie)}else P.panBy(V)}else if(y in this._zoomKeys)P.setZoom(P.getZoom()+(u.shiftKey?3:1)*this._zoomKeys[y]);else if(y===27&&P._popup&&P._popup.options.closeOnEscapeKey)P.closePopup();else return;Ar(u)}}});Ir.addInitHook("addHandler","keyboard",Go),Ir.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ws=ti.extend({addHooks:function(){vr(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){$r(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(u){var y=_u(u),P=this._map.options.wheelDebounceTime;this._delta+=y,this._lastMousePos=this._map.mouseEventToContainerPoint(u),this._startTime||(this._startTime=+new Date);var V=Math.max(P-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),V),Ar(u)},_performZoom:function(){var u=this._map,y=u.getZoom(),P=this._map.options.zoomSnap||0;u._stop();var V=this._delta/(this._map.options.wheelPxPerZoomLevel*4),ie=4*Math.log(2/(1+Math.exp(-Math.abs(V))))/Math.LN2,Se=P?Math.ceil(ie/P)*P:ie,nt=u._limitZoom(y+(this._delta>0?Se:-Se))-y;this._delta=0,this._startTime=null,nt&&(u.options.scrollWheelZoom==="center"?u.setZoom(y+nt):u.setZoomAround(this._lastMousePos,y+nt))}});Ir.addInitHook("addHandler","scrollWheelZoom",Ws);var th=600;Ir.mergeOptions({tapHold:Xt.touchNative&&Xt.safari&&Xt.mobile,tapTolerance:15});var gs=ti.extend({addHooks:function(){vr(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){$r(this._map._container,"touchstart",this._onDown,this)},_onDown:function(u){if(clearTimeout(this._holdTimeout),u.touches.length===1){var y=u.touches[0];this._startPos=this._newPos=new H(y.clientX,y.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(vr(document,"touchend",dr),vr(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",y))},this),th),vr(document,"touchend touchcancel contextmenu",this._cancel,this),vr(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function u(){$r(document,"touchend",dr),$r(document,"touchend touchcancel",u)},_cancel:function(){clearTimeout(this._holdTimeout),$r(document,"touchend touchcancel contextmenu",this._cancel,this),$r(document,"touchmove",this._onMove,this)},_onMove:function(u){var y=u.touches[0];this._newPos=new H(y.clientX,y.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(u,y){var P=new MouseEvent(u,{bubbles:!0,cancelable:!0,view:window,screenX:y.screenX,screenY:y.screenY,clientX:y.clientX,clientY:y.clientY});P._simulated=!0,y.target.dispatchEvent(P)}});Ir.addInitHook("addHandler","tapHold",gs),Ir.mergeOptions({touchZoom:Xt.touch,bounceAtZoomLimits:!0});var ms=ti.extend({addHooks:function(){mr(this._map._container,"leaflet-touch-zoom"),vr(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){qr(this._map._container,"leaflet-touch-zoom"),$r(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(u){var y=this._map;if(!(!u.touches||u.touches.length!==2||y._animatingZoom||this._zooming)){var P=y.mouseEventToContainerPoint(u.touches[0]),V=y.mouseEventToContainerPoint(u.touches[1]);this._centerPoint=y.getSize()._divideBy(2),this._startLatLng=y.containerPointToLatLng(this._centerPoint),y.options.touchZoom!=="center"&&(this._pinchStartLatLng=y.containerPointToLatLng(P.add(V)._divideBy(2))),this._startDist=P.distanceTo(V),this._startZoom=y.getZoom(),this._moved=!1,this._zooming=!0,y._stop(),vr(document,"touchmove",this._onTouchMove,this),vr(document,"touchend touchcancel",this._onTouchEnd,this),dr(u)}},_onTouchMove:function(u){if(!(!u.touches||u.touches.length!==2||!this._zooming)){var y=this._map,P=y.mouseEventToContainerPoint(u.touches[0]),V=y.mouseEventToContainerPoint(u.touches[1]),ie=P.distanceTo(V)/this._startDist;if(this._zoom=y.getScaleZoom(ie,this._startZoom),!y.options.bounceAtZoomLimits&&(this._zoom<y.getMinZoom()&&ie<1||this._zoom>y.getMaxZoom()&&ie>1)&&(this._zoom=y._limitZoom(this._zoom)),y.options.touchZoom==="center"){if(this._center=this._startLatLng,ie===1)return}else{var Se=P._add(V)._divideBy(2)._subtract(this._centerPoint);if(ie===1&&Se.x===0&&Se.y===0)return;this._center=y.unproject(y.project(this._pinchStartLatLng,this._zoom).subtract(Se),this._zoom)}this._moved||(y._moveStart(!0,!1),this._moved=!0),R(this._animRequest);var nt=o(y._move,y,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=F(nt,this,!0),dr(u)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,R(this._animRequest),$r(document,"touchmove",this._onTouchMove,this),$r(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ir.addInitHook("addHandler","touchZoom",ms),Ir.BoxZoom=or,Ir.DoubleClickZoom=Ca,Ir.Drag=Sa,Ir.Keyboard=Go,Ir.ScrollWheelZoom=Ws,Ir.TapHold=gs,Ir.TouchZoom=ms,n.Bounds=Ie,n.Browser=Xt,n.CRS=ye,n.Canvas=Eo,n.Circle=Ps,n.CircleMarker=ro,n.Class=Z,n.Control=er,n.DivIcon=oa,n.DivOverlay=Gs,n.DomEvent=Xl,n.DomUtil=cr,n.Draggable=$o,n.Evented=U,n.FeatureGroup=$s,n.GeoJSON=ks,n.GridLayer=Nr,n.Handler=ti,n.Icon=ta,n.ImageOverlay=Pn,n.LatLng=ge,n.LatLngBounds=te,n.Layer=Pr,n.LayerGroup=Es,n.LineUtil=Er,n.Map=Ir,n.Marker=Xi,n.Mixin=Sc,n.Path=Co,n.Point=H,n.PolyUtil=Ll,n.Polygon=as,n.Polyline=Hs,n.Popup=Pi,n.PosAnimation=wu,n.Projection=ri,n.Rectangle=Os,n.Renderer=vi,n.SVG=Ji,n.SVGOverlay=ii,n.TileLayer=ps,n.Tooltip=La,n.Transformation=Ne,n.Util=K,n.VideoOverlay=hr,n.bind=o,n.bounds=ee,n.canvas=io,n.circle=Vs,n.circleMarker=Sl,n.control=Ui,n.divIcon=aa,n.extend=i,n.featureGroup=Lu,n.geoJSON=Vt,n.geoJson=kt,n.gridLayer=Ho,n.icon=qu,n.imageOverlay=Un,n.latLng=ve,n.latLngBounds=oe,n.layerGroup=Cl,n.map=zi,n.marker=na,n.point=_e,n.polygon=_a,n.polyline=Ec,n.popup=ia,n.rectangle=so,n.setOptions=S,n.stamp=l,n.svg=mi,n.svgOverlay=nu,n.tileLayer=si,n.tooltip=sa,n.transformation=ot,n.version=r,n.videoOverlay=Ei;var Wo=window.L;n.noConflict=function(){return window.L=Wo,this},window.L=n})})(eb,eb.exports);var pn=eb.exports;const ns=S_(pn);var U4={exports:{}};(function(t,e){(function(n,r){r(e)})(Jo,function(n){var r=typeof window<"u"?window:typeof Jo<"u"?Jo:typeof self<"u"?self:{};function i(c,f){return c(f={exports:{}},f.exports),f.exports}var s=i(function(c,f){(function(p){const v={escape:function(Y){return Y.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:m,mimeType:function(Y){return Y=m(Y).toLowerCase(),function(){var k="application/font-woff",U="image/jpeg";return{woff:k,woff2:k,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:U,jpeg:U,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[Y]||""},dataAsUrl:function(Y,k){return`data:${k};base64,`+Y},isDataUrl:function(Y){return Y.search(/^(data:)/)!==-1},canvasToBlob:function(Y){return Y.toBlob?new Promise(function(U){Y.toBlob(U)}):(k=Y,new Promise(function(U){const H=he(k.toDataURL().split(",")[1]);var ue=H.length;const _e=new Uint8Array(ue);for(let Ie=0;Ie<ue;Ie++)_e[Ie]=H.charCodeAt(Ie);U(new Blob([_e],{type:"image/png"}))}));var k},resolveUrl:function(Y,k){const U=document.implementation.createHTMLDocument(),H=U.createElement("base"),ue=(U.head.appendChild(H),U.createElement("a"));return U.body.appendChild(ue),H.href=k,ue.href=Y,ue.href},getAndEncode:function(Y){let k=X.impl.urlCache.find(function(U){return U.url===Y});return k||(k={url:Y,promise:null},X.impl.urlCache.push(k)),k.promise===null&&(X.impl.options.cacheBust&&(Y+=(/\?/.test(Y)?"&":"?")+new Date().getTime()),k.promise=new Promise(function(U){const H=X.impl.options.httpTimeout,ue=new XMLHttpRequest;let _e;var Ie;function ee(te){console.error(te),U("")}ue.onreadystatechange=function(){if(ue.readyState===4)if(ue.status!==200)_e?U(_e):ee(`cannot fetch resource: ${Y}, status: `+ue.status);else{const te=new FileReader;te.onloadend=function(){var oe=te.result.split(/,/)[1];U(oe)},te.readAsDataURL(ue.response)}},ue.ontimeout=function(){_e?U(_e):ee(`timeout of ${H}ms occured while fetching resource: `+Y)},ue.responseType="blob",ue.timeout=H,X.impl.options.useCredentials&&(ue.withCredentials=!0),ue.open("GET",Y,!0),ue.send(),X.impl.options.imagePlaceholder&&(Ie=X.impl.options.imagePlaceholder.split(/,/))&&Ie[1]&&(_e=Ie[1])})),k.promise},uid:function(){let Y=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+Y++}}(),delay:function(Y){return function(k){return new Promise(function(U){setTimeout(function(){U(k)},Y)})}},asArray:function(Y){const k=[],U=Y.length;for(let H=0;H<U;H++)k.push(Y[H]);return k},escapeXhtml:function(Y){return Y.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(Y){return Y!=="data:,"?new Promise(function(k,U){const H=new Image;X.impl.options.useCredentials&&(H.crossOrigin="use-credentials"),H.onload=function(){k(H)},H.onerror=U,H.src=Y}):Promise.resolve()},width:function(Y){var k=C(Y,"border-left-width"),U=C(Y,"border-right-width");return Y.scrollWidth+k+U},height:function(Y){var k=C(Y,"border-top-width"),U=C(Y,"border-bottom-width");return Y.scrollHeight+k+U}};function m(Y){return(Y=/\.([^\.\/]*?)(\?|$)/g.exec(Y))?Y[1]:""}function C(Y,k){const U=ce(Y).getPropertyValue(k);return parseFloat(U.replace("px",""))}const S=function(){const Y=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(ue,_e,Ie){return k(ue)?Promise.resolve(ue).then(U).then(function(ee){let te=Promise.resolve(ue);return ee.forEach(function(oe){te=te.then(function(ge){return H(ge,oe,_e,Ie)})}),te}):Promise.resolve(ue)},shouldProcess:k,impl:{readUrls:U,inline:H}};function k(ue){return ue.search(Y)!==-1}function U(ue){const _e=[];for(var Ie;(Ie=Y.exec(ue))!==null;)_e.push(Ie[1]);return _e.filter(function(ee){return!v.isDataUrl(ee)})}function H(ue,_e,Ie,ee){return Promise.resolve(_e).then(function(te){return Ie?v.resolveUrl(te,Ie):te}).then(ee||v.getAndEncode).then(function(te){return v.dataAsUrl(te,v.mimeType(_e))}).then(function(te){return ue.replace((oe=_e,new RegExp(`(url\\(['"]?)(${v.escape(oe)})(['"]?\\))`,"g")),`$1${te}$3`);var oe})}}(),I={resolveAll:function(){return N().then(function(Y){return Promise.all(Y.map(function(k){return k.resolve()}))}).then(function(Y){return Y.join(`
`)})},impl:{readAll:N}};function N(){return Promise.resolve(v.asArray(document.styleSheets)).then(function(k){const U=[];return k.forEach(function(H){if(Object.getPrototypeOf(H).hasOwnProperty("cssRules"))try{v.asArray(H.cssRules||[]).forEach(U.push.bind(U))}catch(ue){console.log("Error while reading CSS rules from "+H.href,ue.toString())}}),U}).then(function(k){return k.filter(function(U){return U.type===CSSRule.FONT_FACE_RULE}).filter(function(U){return S.shouldProcess(U.style.getPropertyValue("src"))})}).then(function(k){return k.map(Y)});function Y(k){return{resolve:function(){var U=(k.parentStyleSheet||{}).href;return S.inlineAll(k.cssText,U)},src:function(){return k.style.getPropertyValue("src")}}}}const T={inlineAll:function Y(k){return k instanceof Element?function(U){const H=U.style.getPropertyValue("background");return H?S.inlineAll(H).then(function(ue){U.style.setProperty("background",ue,H)}).then(function(){return U}):Promise.resolve(U)}(k).then(function(){return k instanceof HTMLImageElement?j(k).inline():Promise.all(v.asArray(k.childNodes).map(function(U){return Y(U)}))}):Promise.resolve(k)},impl:{newImage:j}};function j(Y){return{inline:function(k){return v.isDataUrl(Y.src)?Promise.resolve():Promise.resolve(Y.src).then(k||v.getAndEncode).then(function(U){return v.dataAsUrl(U,v.mimeType(Y.src))}).then(function(U){return new Promise(function(H){Y.onload=H,Y.onerror=H,Y.src=U})})}}}const W={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},X={toSvg:O,toPng:function(Y,k){return(k=k||{}).raster=!0,B(Y,k).then(function(U){return U.toDataURL()})},toJpeg:function(Y,k){return(k=k||{}).raster=!0,B(Y,k).then(function(U){return U.toDataURL("image/jpeg",k.quality||1)})},toBlob:function(Y,k){return(k=k||{}).raster=!0,B(Y,k).then(v.canvasToBlob)},toPixelData:function(Y,k){return(k=k||{}).raster=!0,B(Y,k).then(function(U){return U.getContext("2d").getImageData(0,0,v.width(Y),v.height(Y)).data})},toCanvas:function(Y,k){return(k=k||{}).raster=!0,B(Y,k||{})},impl:{fontFaces:I,images:T,util:v,inliner:S,urlCache:[],options:{}}},ce=(c.exports=X,p.getComputedStyle||window.getComputedStyle),he=p.atob||window.atob;function O(Y,k){var U=k=k||{};return U.imagePlaceholder===void 0?X.impl.options.imagePlaceholder=W.imagePlaceholder:X.impl.options.imagePlaceholder=U.imagePlaceholder,U.cacheBust===void 0?X.impl.options.cacheBust=W.cacheBust:X.impl.options.cacheBust=U.cacheBust,U.useCredentials===void 0?X.impl.options.useCredentials=W.useCredentials:X.impl.options.useCredentials=U.useCredentials,Promise.resolve(Y).then(function(H){return function ue(_e,Ie,ee,te,oe=null){return ee||!Ie||Ie(_e)?Promise.resolve(_e).then(function(ge){return ge instanceof HTMLCanvasElement?v.makeImage(ge.toDataURL()):ge.nodeName==="IFRAME"?html2canvas(ge.contentDocument.body).then(ve=>ve.toDataURL()).then(v.makeImage):ge.cloneNode(!1)}).then(function(ge){return function(ve,ye){const pe=ve.childNodes;return pe.length===0?Promise.resolve(ye):function(fe,$e){const Ne=ce(ve);let ot=Promise.resolve();return $e.forEach(function(le){ot=ot.then(function(){return ue(le,Ie,!1,te,Ne)}).then(function(ae){ae&&fe.appendChild(ae)})}),ot}(ye,v.asArray(pe)).then(function(){return ye})}(_e,ge)}).then(function(ge){return function(ve,ye,pe){return ye instanceof Element?Promise.resolve().then(function(){(function(fe,$e){const Ne=ce(fe);Ne.cssText?($e.style.cssText=Ne.cssText,function(ot,le){le.font=ot.font,le.fontFamily=ot.fontFamily,le.fontFeatureSettings=ot.fontFeatureSettings,le.fontKerning=ot.fontKerning,le.fontSize=ot.fontSize,le.fontStretch=ot.fontStretch,le.fontStyle=ot.fontStyle,le.fontVariant=ot.fontVariant,le.fontVariantCaps=ot.fontVariantCaps,le.fontVariantEastAsian=ot.fontVariantEastAsian,le.fontVariantLigatures=ot.fontVariantLigatures,le.fontVariantNumeric=ot.fontVariantNumeric,le.fontVariationSettings=ot.fontVariationSettings,le.fontWeight=ot.fontWeight}(Ne,$e.style)):(pe?function(ot,le,ae,de){const re=ae.style,Ae=ot.style;for(var Ge of le){var tt=le.getPropertyValue(Ge),at=Ae.getPropertyValue(Ge),ut=(Ae.setProperty(Ge,de?"initial":"unset"),le.getPropertyValue(Ge));ut!==tt?re.setProperty(Ge,tt):re.removeProperty(Ge),Ae.setProperty(Ge,at)}}(fe,Ne,$e,ee):function(ot,le,ae){const de=function(Ae){if(Z[Ae])return Z[Ae];K||((K=document.createElement("iframe")).style.visibility="hidden",K.style.position="fixed",document.body.appendChild(K),K.contentWindow.document.write('<!DOCTYPE html><meta charset="UTF-8"><title>sandbox</title><body>'));const Ge=document.createElement(Ae),tt=(K.contentWindow.document.body.appendChild(Ge),Ge.textContent=".",K.contentWindow.getComputedStyle(Ge)),at={};return v.asArray(tt).forEach(function(ut){at[ut]=ut==="width"||ut==="height"?"auto":tt.getPropertyValue(ut)}),K.contentWindow.document.body.removeChild(Ge),Z[Ae]=at}(ae.tagName),re=ae.style;v.asArray(ot).forEach(function(Ae){var Ge=ot.getPropertyValue(Ae);(Ge!==de[Ae]||le&&Ge!==le.getPropertyValue(Ae))&&re.setProperty(Ae,Ge,ot.getPropertyPriority(Ae))})}(Ne,oe,$e),ee&&(["inset-block","inset-block-start","inset-block-end"].forEach(ot=>$e.style.removeProperty(ot)),["left","right","top","bottom"].forEach(ot=>{$e.style.getPropertyValue(ot)&&$e.style.setProperty(ot,"0px")})))})(ve,ye)}).then(function(){[":before",":after"].forEach(function(fe){(function($e){const Ne=ce(ve,$e),ot=Ne.getPropertyValue("content");if(ot!==""&&ot!=="none"){const le=v.uid(),ae=ye.getAttribute("class"),de=(ae&&ye.setAttribute("class",ae+" "+le),document.createElement("style"));de.appendChild(function(){const re=`.${le}:`+$e,Ae=(Ne.cssText?function(){return`${Ne.cssText} content: ${Ne.getPropertyValue("content")};`}:function(){return v.asArray(Ne).map(function(Ge){return Ge+": "+Ne.getPropertyValue(Ge)+(Ne.getPropertyPriority(Ge)?" !important":"")}).join("; ")+";"})();return document.createTextNode(re+`{${Ae}}`)}()),ye.appendChild(de)}})(fe)})}).then(function(){ve instanceof HTMLTextAreaElement&&(ye.innerHTML=ve.value),ve instanceof HTMLInputElement&&ye.setAttribute("value",ve.value)}).then(function(){ye instanceof SVGElement&&(ye.setAttribute("xmlns","http://www.w3.org/2000/svg"),ye instanceof SVGRectElement&&["width","height"].forEach(function(fe){const $e=ye.getAttribute(fe);$e&&ye.style.setProperty(fe,$e)}))}).then(function(){return ye}):ye}(_e,ge,te)}):Promise.resolve()}(H,k.filter,!0,!k.raster)}).then(q).then(F).then(function(H){k.bgcolor&&(H.style.backgroundColor=k.bgcolor),k.width&&(H.style.width=k.width+"px"),k.height&&(H.style.height=k.height+"px"),k.style&&Object.keys(k.style).forEach(function(_e){H.style[_e]=k.style[_e]});let ue=null;return typeof k.onclone=="function"&&(ue=k.onclone(H)),Promise.resolve(ue).then(function(){return H})}).then(function(H){return H=H,ue=k.width||v.width(Y),_e=k.height||v.height(Y),Promise.resolve(H).then(function(Ie){return Ie.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(Ie)}).then(v.escapeXhtml).then(function(Ie){return`<foreignObject x="0" y="0" width="100%" height="100%">${Ie}</foreignObject>`}).then(function(Ie){return`<svg xmlns="http://www.w3.org/2000/svg" width="${ue}" height="${_e}">${Ie}</svg>`}).then(function(Ie){return"data:image/svg+xml;charset=utf-8,"+Ie});var ue,_e}).then(function(H){return X.impl.urlCache=[],H})}function B(Y,k){return O(Y,k).then(v.makeImage).then(v.delay(0)).then(function(U){var H=typeof k.scale!="number"?1:k.scale;const ue=function(Ie,ee){const te=document.createElement("canvas");if(te.width=(k.width||v.width(Ie))*ee,te.height=(k.height||v.height(Ie))*ee,k.bgcolor){const oe=te.getContext("2d");oe.fillStyle=k.bgcolor,oe.fillRect(0,0,te.width,te.height)}return te}(Y,H),_e=ue.getContext("2d");return _e.mozImageSmoothingEnabled=!1,_e.msImageSmoothingEnabled=!1,_e.imageSmoothingEnabled=!1,U&&(_e.scale(H,H),_e.drawImage(U,0,0)),K&&(document.body.removeChild(K),K=null,R&&clearTimeout(R),R=setTimeout(()=>{R=null,Z={}},2e4)),ue})}function q(Y){return I.resolveAll().then(function(k){const U=document.createElement("style");return Y.appendChild(U),U.appendChild(document.createTextNode(k)),Y})}function F(Y){return T.inlineAll(Y).then(function(){return Y})}let R=null,K=null,Z={}})(r)}),o=i(function(c,f){(function(){function p(I,N,T){var j=new XMLHttpRequest;j.open("GET",I),j.responseType="blob",j.onload=function(){S(j.response,N,T)},j.onerror=function(){console.error("could not download file")},j.send()}function v(I){var N=new XMLHttpRequest;N.open("HEAD",I,!1);try{N.send()}catch{}return 200<=N.status&&299>=N.status}function m(I){try{I.dispatchEvent(new MouseEvent("click"))}catch{var N=document.createEvent("MouseEvents");N.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),I.dispatchEvent(N)}}var C=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof r=="object"&&r.global===r?r:void 0,S=C.saveAs||(typeof window!="object"||window!==C?function(){}:"download"in HTMLAnchorElement.prototype?function(I,N,T){var j=C.URL||C.webkitURL,W=document.createElement("a");N=N||I.name||"download",W.download=N,W.rel="noopener",typeof I=="string"?(W.href=I,W.origin===location.origin?m(W):v(W.href)?p(I,N,T):m(W,W.target="_blank")):(W.href=j.createObjectURL(I),setTimeout(function(){j.revokeObjectURL(W.href)},4e4),setTimeout(function(){m(W)},0))}:"msSaveOrOpenBlob"in navigator?function(I,N,T){if(N=N||I.name||"download",typeof I!="string")navigator.msSaveOrOpenBlob(function(W,X){return X===void 0?X={autoBom:!1}:typeof X!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),X={autoBom:!X}),X.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(W.type)?new Blob(["\uFEFF",W],{type:W.type}):W}(I,T),N);else if(v(I))p(I,N,T);else{var j=document.createElement("a");j.href=I,j.target="_blank",setTimeout(function(){m(j)})}}:function(I,N,T,j){if((j=j||open("","_blank"))&&(j.document.title=j.document.body.innerText="downloading..."),typeof I=="string")return p(I,N,T);var W=I.type==="application/octet-stream",X=/constructor/i.test(C.HTMLElement)||C.safari,ce=/CriOS\/[\d]+/.test(navigator.userAgent);if((ce||W&&X)&&typeof FileReader=="object"){var he=new FileReader;he.onloadend=function(){var q=he.result;q=ce?q:q.replace(/^data:[^;]*;/,"data:attachment/file;"),j?j.location.href=q:location=q,j=null},he.readAsDataURL(I)}else{var O=C.URL||C.webkitURL,B=O.createObjectURL(I);j?j.location=B:location.href=B,j=null,setTimeout(function(){O.revokeObjectURL(B)},4e4)}});C.saveAs=S.saveAs=S,c.exports=S})()}),a=L.Control.extend({options:{cropImageByInnerWH:!0,hidden:!1,domtoimageOptions:{},position:"topleft",screenName:"screen",iconUrl:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+",hideElementsWithSelectors:[".leaflet-control-container"],onCropBorderSize:2,caption:null,captionFontSize:15,captionFont:"Arial",captionColor:"black",captionBgColor:"white",captionOffset:5,mimeType:"image/png",debugMode:!1,preventDownload:!1,onPixelDataFail:function(c){var f=c.node,p=c.error;return console.warn("Map node is very big "+f.scrollWidth+"x"+f.scrollHeight),console.warn(`Add function: SimpleMapScreenshoter({
              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {
                 // Solutions:
                 // decrease size of map
                 // or decrease zoom level
                 // or remove elements with big distanses
                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap
                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)
              }
            })`),Promise.reject(p)}},onAdd:function(){return this._container=L.DomUtil.create("div","leaflet-control-simpleMapScreenshoter"),this._link=null,this._screenState={status:1,promise:null},this.options.hidden===!1&&this._addScreenBtn(),this._onUserStartInteractWithMap=this._onUserStartInteractWithMap.bind(this),this._onUserEndInteractWithMap=this._onUserEndInteractWithMap.bind(this),this._map.on("zoomstart",this._onUserStartInteractWithMap),this._map.on("move",this._onUserStartInteractWithMap),this._map.on("zoomend",this._onUserEndInteractWithMap),this._map.on("moveend",this._onUserEndInteractWithMap),this._container},takeScreen:function(){var c=this,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"blob",p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v={};for(var m in this.options)p.hasOwnProperty(m)?v[m]=p[m]:v[m]=this.options[m];return this._screenState.status===2?this._screenState.promise:(this._map.fire("simpleMapScreenshoter.takeScreen"),this._screenState.status=2,this._setElementsVisible(!1),this._screenState.promise=this._waitEndOfInteractions().then(function(){return c._getPixelData(v)}).then(function(C){return c._setElementsVisible(!0),c._toCanvas(C,v)}).then(function(C){return f==="image"?c._canvasToImage(C,v):f==="canvas"?C:c._canvasToBlob(C,v)}).then(function(C){return c._screenState.status=1,c._map.fire("simpleMapScreenshoter.done"),C}).catch(function(C){return c._setElementsVisible(!0),c._screenState.status=1,c._map.fire("simpleMapScreenshoter.error",{e:C}),Promise.reject(C)}),this._screenState.promise)},_setElementsVisible:function(){var c=this,f=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.hideElementsWithSelectors.forEach(function(p){var v=c._map._container.querySelectorAll(p),m=!0,C=!1,S=void 0;try{for(var I,N=v[Symbol.iterator]();!(m=(I=N.next()).done);m=!0)I.value.style.opacity=f===!1?0:1}catch(T){C=!0,S=T}finally{try{!m&&N.return&&N.return()}finally{if(C)throw S}}})},_canvasToImage:function(c,f){var p=f.mimeType,v=c.toDataURL(p);return v.indexOf("base64")===-1?Promise.reject(new Error("Base64 image generation error")):Promise.resolve(v)},_canvasToBlob:function(c,f){var p=f.mimeType;return new Promise(function(v,m){c.toBlob(function(C){v(C)},p)})},_toCanvas:function(c,f){var p=f.captionOffset,v=f.caption,m=f.captionFontSize,C=f.captionFont,S=f.captionColor,I=f.captionBgColor,N=this._node,T=N.screenHeight,j=N.screenWidth,W=document.createElement("canvas");W.width=j,W.height=T;for(var X=W.getContext("2d"),ce=X.createImageData(j,T),he=0;he<c.length;++he)ce.data[he]=c[he];X.putImageData(ce,0,0),ce=null;var O=document.createElement("canvas"),B=O.getContext("2d"),q=0,F=0,R=T,K=j;if(this.options.cropImageByInnerWH===!0){for(var Z=[],Y=0,k=0;k<T;++k){Y=0;for(var U=0;U<j;++U)c[4*k*j+4*U+4]===0&&Y++;Y===j&&Z.push(k)}var H=this._getMinAndMaxOnValuesBreak(Z);q=H.min;for(var ue=j,_e=H.max,Ie=[],ee=0,te=F;te<ue;++te){ee=0;for(var oe=0;oe<T;++oe)c[4*oe*j+4*te+4]===0&&ee++;ee===T&&Ie.push(te)}var ge=this._getMinAndMaxOnValuesBreak(Ie);F=ge.min,ue=ge.max,(F===0&&ue===0||ue===null)&&(ue=j),(q===0&&_e===0||_e===null)&&(_e=T),this.options.debugMode===!0&&(console.log("emptyYLine",Z),console.log("minMaxY",H),console.log("emptyXLine",Ie),console.log("minMaxX",ge),console.log("debugX",{}),console.log("debugY",{})),q===0&&_e===T&&F===0&&ue===j||(q+=this.options.onCropBorderSize,_e-=this.options.onCropBorderSize,F+=this.options.onCropBorderSize,ue-=this.options.onCropBorderSize),R=_e-q,K=ue-F,O.width=K,O.height=R}else O.width=K,O.height=R;var ve=null;return v&&(ve=typeof v=="function"?v.call(this):v),ve!==null&&(O.height=O.height+(p+m+p),B.beginPath(),B.rect(0,0,O.width,O.height),B.fillStyle=I,B.fill(),B.save()),B.drawImage(W,F,q,K,R,0,0,K,R),ve!==null&&(B.font=m+"px "+C,B.fillStyle=S,B.fillText(ve,p,R+p+m)),Promise.resolve(O)},_getMinAndMaxOnValuesBreak:function(c){for(var f=0,p=0,v=!1,m=1;m<c.length;m++){if(c[m]-1!==c[m-1]){p=c[m],v=!0;break}f=c[m]}return v===!1&&c[0]>1?(f=0,p=c[0]):v===!1&&(f=c[c.length-1]||0,p=null),{min:f,max:p}},_getPixelData:function(c){var f=this,p=c.domtoimageOptions,v=p===void 0?{}:p;return this._getPixelDataOfNormalMap(v).catch(function(m){return console.warn("May be map size very big on that zoom level, we have error:",m.toString()),console.warn("You can manually hide map elements with large distances between them for fix that warn"),f._getPixelDataOfBigMap(v)})},_getPixelDataOfNormalMap:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=this._map.getContainer();return this._node={node:f,screenHeight:f.scrollHeight,screenWidth:f.scrollWidth},s.toPixelData(f,c)},_getPixelDataOfBigMap:function(){var c=this,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=this._map.getContainer(),v=this._map.getPane("mapPane");v.style.width=2*p.clientWidth+"px",v.style.height=2*p.clientHeight+"px",v.style.overflow="hidden";var m=function(){v.style.width="initial",v.style.height="initial",v.style.overflow="initial"};return this._node={node:p,screenHeight:p.scrollHeight,screenWidth:p.scrollWidth},s.toPixelData(p,f).then(function(C){return m(),C}).catch(function(C){return m(),p.scrollHeight>=4e3||p.scrollWidth>=4e3?c.options.onPixelDataFail({plugin:c,node:p,mapPane:v,error:C,domtoimageOptions:f}):Promise.reject(C)})},_addScreenBtn:function(){this._link=L.DomUtil.create("a","leaflet-control-simpleMapScreenshoter-btn",this._container),this._addCss(),L.DomEvent.addListener(this._link,"click",this._onScreenBtn,this),L.DomEvent.disableClickPropagation(this._link)},_addCss:function(){var c=`
    .leaflet-control-simpleMapScreenshoter{
       border: 2px solid rgba(0,0,0,0.2);
       background-clip: padding-box;
    }
    .leaflet-control-simpleMapScreenshoter a{
       background-color: #fff;
       border-bottom: 1px solid #ccc;
       width: 30px;
       height: 30px;
       line-height: 30px;
       display: block;
       text-align: center;
       text-decoration: none;
       color: black;
       overflow: hidden;
       border-radius: 2px;
       background-image: url('`+this.options.iconUrl+`');
       background-position: 46% 41%;
       background-repeat: no-repeat;
       background-size: 63%;
    }
    .leaflet-control-simpleMapScreenshoter a:hover{
       cursor: pointer;
    }
    `,f=document.head||document.getElementsByTagName("head")[0],p=document.createElement("style");p.appendChild(document.createTextNode(c)),f.appendChild(p)},_onScreenBtn:function(){var c=this;this._map.fire("simpleMapScreenshoter.click"),this.options.preventDownload||this.takeScreen().then(function(f){var p=typeof c.options.screenName=="function"?c.options.screenName.call(c):c.options.screenName;o.saveAs(f,p+".png")}).catch(function(f){c._map.fire("simpleMapScreenshoter.error",{e:f})})},_onUserStartInteractWithMap:function(){this._interaction=!0},_onUserEndInteractWithMap:function(){this._interaction=!1},_waitEndOfInteractions:function(){var c=this;return new Promise(function(f){var p=setInterval(function(){c._interaction||(f(),clearInterval(p))},100)})}}),l=(L.Control.SimpleMapScreenshoter=a,L.simpleMapScreenshoter=function(c){return new L.Control.SimpleMapScreenshoter(c)},a);n.default=l,n.SimpleMapScreenshoter=a,Object.defineProperty(n,"__esModule",{value:!0})})})(U4,U4.exports);var ol=63710088e-1,iE={centimeters:ol*100,centimetres:ol*100,degrees:360/(2*Math.PI),feet:ol*3.28084,inches:ol*39.37,kilometers:ol/1e3,kilometres:ol/1e3,meters:ol,metres:ol,miles:ol/1609.344,millimeters:ol*1e3,millimetres:ol*1e3,nauticalmiles:ol/1852,radians:1,yards:ol*1.0936};function wp(t,e,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function Ov(t,e,n={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!$4(t[0])||!$4(t[1]))throw new Error("coordinates must contain numbers");return wp({type:"Point",coordinates:t},e,n)}function zc(t,e,n={}){for(const i of t){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<i[i.length-1].length;s++)if(i[i.length-1][s]!==i[0][s])throw new Error("First and last Position are not equivalent.")}return wp({type:"Polygon",coordinates:t},e,n)}function a0(t,e,n={}){if(t.length<2)throw new Error("coordinates must be an array of two or more positions");return wp({type:"LineString",coordinates:t},e,n)}function D9(t,e={}){const n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function I9(t,e,n={}){return wp({type:"MultiPolygon",coordinates:t},e,n)}function N9(t,e="kilometers"){const n=iE[e];if(!n)throw new Error(e+" units is invalid");return t*n}function B9(t,e="kilometers"){const n=iE[e];if(!n)throw new Error(e+" units is invalid");return t/n}function tb(t){return t%(2*Math.PI)*180/Math.PI}function hc(t){return t%360*Math.PI/180}function $4(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function V4(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function R9(t){return t.type==="Feature"?t.geometry:t}function sE(t,e,n={}){if(n.final===!0)return F9(t,e);const r=V4(t),i=V4(e),s=hc(r[0]),o=hc(i[0]),a=hc(r[1]),l=hc(i[1]),c=Math.sin(o-s)*Math.cos(l),f=Math.cos(a)*Math.sin(l)-Math.sin(a)*Math.cos(l)*Math.cos(o-s);return tb(Math.atan2(c,f))}function F9(t,e){let n=sE(e,t);return n=(n+180)%360,n}function j9(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function oE(t,e,n,r={}){const i=j9(t),s=hc(i[0]),o=hc(i[1]),a=hc(n),l=B9(e,r.units),c=Math.asin(Math.sin(o)*Math.cos(l)+Math.cos(o)*Math.sin(l)*Math.cos(a)),f=s+Math.atan2(Math.sin(a)*Math.sin(l)*Math.cos(o),Math.cos(l)-Math.sin(o)*Math.sin(c)),p=tb(f),v=tb(c);return Ov([p,v],r.properties)}function H4(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function aE(t,e,n={}){var r=H4(t),i=H4(e),s=hc(i[1]-r[1]),o=hc(i[0]-r[0]),a=hc(r[1]),l=hc(i[1]),c=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(a)*Math.cos(l);return N9(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),n.units)}function z9(t,e,n={}){const i=R9(t).coordinates;let s=0;for(let o=0;o<i.length&&!(e>=s&&o===i.length-1);o++)if(s>=e){const a=e-s;if(a){const l=sE(i[o],i[o-1])-180;return oE(i[o],a,l,n)}else return Ov(i[o])}else s+=aE(i[o],i[o+1],n);return Ov(i[i.length-1])}var G4=z9;function U9(t,e){var n,r,i,s,o,a,l,c,f,p,v=0,m=t.type==="FeatureCollection",C=t.type==="Feature",S=m?t.features.length:1;for(n=0;n<S;n++){for(a=m?t.features[n].geometry:C?t.geometry:t,c=m?t.features[n].properties:C?t.properties:{},f=m?t.features[n].bbox:C?t.bbox:void 0,p=m?t.features[n].id:C?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,c,f,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,c,f,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,c,f,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function $9(t,e,n){var r=n;return U9(t,function(i,s,o,a,l){s===0&&n===void 0?r=i:r=e(r,i,s,o,a,l)}),r}function lE(t){return $9(t,(e,n)=>e+V9(n),0)}function V9(t){let e=0,n;switch(t.type){case"Polygon":return W4(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)e+=W4(t.coordinates[n]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function W4(t){let e=0;if(t&&t.length>0){e+=Math.abs(q4(t[0]));for(let n=1;n<t.length;n++)e-=Math.abs(q4(t[n]))}return e}var H9=ol*ol/2,F1=Math.PI/180;function q4(t){const e=t.length-1;if(e<=2)return 0;let n=0,r=0;for(;r<e;){const i=t[r],s=t[r+1===e?0:r+1],o=t[r+2>=e?(r+2)%e:r+2],a=i[0]*F1,l=s[1]*F1,c=o[0]*F1;n+=(c-a)*Math.sin(l),r++}return n*H9}var Gh=lE;function uE(t,e,n){if(t!==null)for(var r,i,s,o,a,l,c,f=0,p=0,v,m=t.type,C=m==="FeatureCollection",S=m==="Feature",I=C?t.features.length:1,N=0;N<I;N++){c=C?t.features[N].geometry:S?t.geometry:t,v=c?c.type==="GeometryCollection":!1,a=v?c.geometries.length:1;for(var T=0;T<a;T++){var j=0,W=0;if(o=v?c.geometries[T]:c,o!==null){l=o.coordinates;var X=o.type;switch(f=X==="Polygon"||X==="MultiPolygon"?1:0,X){case null:break;case"Point":if(e(l,p,N,j,W)===!1)return!1;p++,j++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],p,N,j,W)===!1)return!1;p++,X==="MultiPoint"&&j++}X==="LineString"&&j++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-f;i++){if(e(l[r][i],p,N,j,W)===!1)return!1;p++}X==="MultiLineString"&&j++,X==="Polygon"&&W++}X==="Polygon"&&j++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(W=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-f;s++){if(e(l[r][i][s],p,N,j,W)===!1)return!1;p++}W++}j++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(uE(o.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function G9(t,e={}){let n=0,r=0,i=0;return uE(t,function(s){n+=s[0],r+=s[1],i++}),Ov([n/i,r/i],e.properties)}var Ig=G9;function W9(t,e,n={}){const r=n.steps||64,i=n.properties?n.properties:!Array.isArray(t)&&t.type==="Feature"&&t.properties?t.properties:{},s=[];for(let o=0;o<r;o++)s.push(oE(t,e,o*-360/r,n).geometry.coordinates);return s.push(s[0]),zc([s],i)}var q9=W9,Y9=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,j1=Math.ceil,Iu=Math.floor,Nl="[BigNumber Error] ",Y4=Nl+"Number primitive has more than 15 significant digits: ",rc=1e14,Fr=14,K4=9007199254740991,z1=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Wh=1e7,au=1e9;function cE(t){var e,n,r,i=T.prototype={constructor:T,toString:null,valueOf:null},s=new T(1),o=20,a=4,l=-7,c=21,f=-1e7,p=1e7,v=!1,m=1,C=0,S={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},I="0123456789abcdefghijklmnopqrstuvwxyz",N=!0;function T(O,B){var q,F,R,K,Z,Y,k,U,H=this;if(!(H instanceof T))return new T(O,B);if(B==null){if(O&&O._isBigNumber===!0){H.s=O.s,!O.c||O.e>p?H.c=H.e=null:O.e<f?H.c=[H.e=0]:(H.e=O.e,H.c=O.c.slice());return}if((Y=typeof O=="number")&&O*0==0){if(H.s=1/O<0?(O=-O,-1):1,O===~~O){for(K=0,Z=O;Z>=10;Z/=10,K++);K>p?H.c=H.e=null:(H.e=K,H.c=[O]);return}U=String(O)}else{if(!Y9.test(U=String(O)))return r(H,U,Y);H.s=U.charCodeAt(0)==45?(U=U.slice(1),-1):1}(K=U.indexOf("."))>-1&&(U=U.replace(".","")),(Z=U.search(/e/i))>0?(K<0&&(K=Z),K+=+U.slice(Z+1),U=U.substring(0,Z)):K<0&&(K=U.length)}else{if(Bs(B,2,I.length,"Base"),B==10&&N)return H=new T(O),ce(H,o+H.e+1,a);if(U=String(O),Y=typeof O=="number"){if(O*0!=0)return r(H,U,Y,B);if(H.s=1/O<0?(U=U.slice(1),-1):1,T.DEBUG&&U.replace(/^0\.0*|\./,"").length>15)throw Error(Y4+O)}else H.s=U.charCodeAt(0)===45?(U=U.slice(1),-1):1;for(q=I.slice(0,B),K=Z=0,k=U.length;Z<k;Z++)if(q.indexOf(F=U.charAt(Z))<0){if(F=="."){if(Z>K){K=k;continue}}else if(!R&&(U==U.toUpperCase()&&(U=U.toLowerCase())||U==U.toLowerCase()&&(U=U.toUpperCase()))){R=!0,Z=-1,K=0;continue}return r(H,String(O),Y,B)}Y=!1,U=n(U,B,10,H.s),(K=U.indexOf("."))>-1?U=U.replace(".",""):K=U.length}for(Z=0;U.charCodeAt(Z)===48;Z++);for(k=U.length;U.charCodeAt(--k)===48;);if(U=U.slice(Z,++k)){if(k-=Z,Y&&T.DEBUG&&k>15&&(O>K4||O!==Iu(O)))throw Error(Y4+H.s*O);if((K=K-Z-1)>p)H.c=H.e=null;else if(K<f)H.c=[H.e=0];else{if(H.e=K,H.c=[],Z=(K+1)%Fr,K<0&&(Z+=Fr),Z<k){for(Z&&H.c.push(+U.slice(0,Z)),k-=Fr;Z<k;)H.c.push(+U.slice(Z,Z+=Fr));Z=Fr-(U=U.slice(Z)).length}else Z-=k;for(;Z--;U+="0");H.c.push(+U)}}else H.c=[H.e=0]}T.clone=cE,T.ROUND_UP=0,T.ROUND_DOWN=1,T.ROUND_CEIL=2,T.ROUND_FLOOR=3,T.ROUND_HALF_UP=4,T.ROUND_HALF_DOWN=5,T.ROUND_HALF_EVEN=6,T.ROUND_HALF_CEIL=7,T.ROUND_HALF_FLOOR=8,T.EUCLID=9,T.config=T.set=function(O){var B,q;if(O!=null)if(typeof O=="object"){if(O.hasOwnProperty(B="DECIMAL_PLACES")&&(q=O[B],Bs(q,0,au,B),o=q),O.hasOwnProperty(B="ROUNDING_MODE")&&(q=O[B],Bs(q,0,8,B),a=q),O.hasOwnProperty(B="EXPONENTIAL_AT")&&(q=O[B],q&&q.pop?(Bs(q[0],-1e9,0,B),Bs(q[1],0,au,B),l=q[0],c=q[1]):(Bs(q,-1e9,au,B),l=-(c=q<0?-q:q))),O.hasOwnProperty(B="RANGE"))if(q=O[B],q&&q.pop)Bs(q[0],-1e9,-1,B),Bs(q[1],1,au,B),f=q[0],p=q[1];else if(Bs(q,-1e9,au,B),q)f=-(p=q<0?-q:q);else throw Error(Nl+B+" cannot be zero: "+q);if(O.hasOwnProperty(B="CRYPTO"))if(q=O[B],q===!!q)if(q)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))v=q;else throw v=!q,Error(Nl+"crypto unavailable");else v=q;else throw Error(Nl+B+" not true or false: "+q);if(O.hasOwnProperty(B="MODULO_MODE")&&(q=O[B],Bs(q,0,9,B),m=q),O.hasOwnProperty(B="POW_PRECISION")&&(q=O[B],Bs(q,0,au,B),C=q),O.hasOwnProperty(B="FORMAT"))if(q=O[B],typeof q=="object")S=q;else throw Error(Nl+B+" not an object: "+q);if(O.hasOwnProperty(B="ALPHABET"))if(q=O[B],typeof q=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(q))N=q.slice(0,10)=="0123456789",I=q;else throw Error(Nl+B+" invalid: "+q)}else throw Error(Nl+"Object expected: "+O);return{DECIMAL_PLACES:o,ROUNDING_MODE:a,EXPONENTIAL_AT:[l,c],RANGE:[f,p],CRYPTO:v,MODULO_MODE:m,POW_PRECISION:C,FORMAT:S,ALPHABET:I}},T.isBigNumber=function(O){if(!O||O._isBigNumber!==!0)return!1;if(!T.DEBUG)return!0;var B,q,F=O.c,R=O.e,K=O.s;e:if({}.toString.call(F)=="[object Array]"){if((K===1||K===-1)&&R>=-1e9&&R<=au&&R===Iu(R)){if(F[0]===0){if(R===0&&F.length===1)return!0;break e}if(B=(R+1)%Fr,B<1&&(B+=Fr),String(F[0]).length==B){for(B=0;B<F.length;B++)if(q=F[B],q<0||q>=rc||q!==Iu(q))break e;if(q!==0)return!0}}}else if(F===null&&R===null&&(K===null||K===1||K===-1))return!0;throw Error(Nl+"Invalid BigNumber: "+O)},T.maximum=T.max=function(){return W(arguments,-1)},T.minimum=T.min=function(){return W(arguments,1)},T.random=function(){var O=9007199254740992,B=Math.random()*O&2097151?function(){return Iu(Math.random()*O)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(q){var F,R,K,Z,Y,k=0,U=[],H=new T(s);if(q==null?q=o:Bs(q,0,au),Z=j1(q/Fr),v)if(crypto.getRandomValues){for(F=crypto.getRandomValues(new Uint32Array(Z*=2));k<Z;)Y=F[k]*131072+(F[k+1]>>>11),Y>=9e15?(R=crypto.getRandomValues(new Uint32Array(2)),F[k]=R[0],F[k+1]=R[1]):(U.push(Y%1e14),k+=2);k=Z/2}else if(crypto.randomBytes){for(F=crypto.randomBytes(Z*=7);k<Z;)Y=(F[k]&31)*281474976710656+F[k+1]*1099511627776+F[k+2]*4294967296+F[k+3]*16777216+(F[k+4]<<16)+(F[k+5]<<8)+F[k+6],Y>=9e15?crypto.randomBytes(7).copy(F,k):(U.push(Y%1e14),k+=7);k=Z/7}else throw v=!1,Error(Nl+"crypto unavailable");if(!v)for(;k<Z;)Y=B(),Y<9e15&&(U[k++]=Y%1e14);for(Z=U[--k],q%=Fr,Z&&q&&(Y=z1[Fr-q],U[k]=Iu(Z/Y)*Y);U[k]===0;U.pop(),k--);if(k<0)U=[K=0];else{for(K=-1;U[0]===0;U.splice(0,1),K-=Fr);for(k=1,Y=U[0];Y>=10;Y/=10,k++);k<Fr&&(K-=Fr-k)}return H.e=K,H.c=U,H}}(),T.sum=function(){for(var O=1,B=arguments,q=new T(B[0]);O<B.length;)q=q.plus(B[O++]);return q},n=function(){var O="0123456789";function B(q,F,R,K){for(var Z,Y=[0],k,U=0,H=q.length;U<H;){for(k=Y.length;k--;Y[k]*=F);for(Y[0]+=K.indexOf(q.charAt(U++)),Z=0;Z<Y.length;Z++)Y[Z]>R-1&&(Y[Z+1]==null&&(Y[Z+1]=0),Y[Z+1]+=Y[Z]/R|0,Y[Z]%=R)}return Y.reverse()}return function(q,F,R,K,Z){var Y,k,U,H,ue,_e,Ie,ee,te=q.indexOf("."),oe=o,ge=a;for(te>=0&&(H=C,C=0,q=q.replace(".",""),ee=new T(F),_e=ee.pow(q.length-te),C=H,ee.c=B(gh(Tu(_e.c),_e.e,"0"),10,R,O),ee.e=ee.c.length),Ie=B(q,F,R,Z?(Y=I,O):(Y=O,I)),U=H=Ie.length;Ie[--H]==0;Ie.pop());if(!Ie[0])return Y.charAt(0);if(te<0?--U:(_e.c=Ie,_e.e=U,_e.s=K,_e=e(_e,ee,oe,ge,R),Ie=_e.c,ue=_e.r,U=_e.e),k=U+oe+1,te=Ie[k],H=R/2,ue=ue||k<0||Ie[k+1]!=null,ue=ge<4?(te!=null||ue)&&(ge==0||ge==(_e.s<0?3:2)):te>H||te==H&&(ge==4||ue||ge==6&&Ie[k-1]&1||ge==(_e.s<0?8:7)),k<1||!Ie[0])q=ue?gh(Y.charAt(1),-oe,Y.charAt(0)):Y.charAt(0);else{if(Ie.length=k,ue)for(--R;++Ie[--k]>R;)Ie[k]=0,k||(++U,Ie=[1].concat(Ie));for(H=Ie.length;!Ie[--H];);for(te=0,q="";te<=H;q+=Y.charAt(Ie[te++]));q=gh(q,U,Y.charAt(0))}return q}}(),e=function(){function O(F,R,K){var Z,Y,k,U,H=0,ue=F.length,_e=R%Wh,Ie=R/Wh|0;for(F=F.slice();ue--;)k=F[ue]%Wh,U=F[ue]/Wh|0,Z=Ie*k+U*_e,Y=_e*k+Z%Wh*Wh+H,H=(Y/K|0)+(Z/Wh|0)+Ie*U,F[ue]=Y%K;return H&&(F=[H].concat(F)),F}function B(F,R,K,Z){var Y,k;if(K!=Z)k=K>Z?1:-1;else for(Y=k=0;Y<K;Y++)if(F[Y]!=R[Y]){k=F[Y]>R[Y]?1:-1;break}return k}function q(F,R,K,Z){for(var Y=0;K--;)F[K]-=Y,Y=F[K]<R[K]?1:0,F[K]=Y*Z+F[K]-R[K];for(;!F[0]&&F.length>1;F.splice(0,1));}return function(F,R,K,Z,Y){var k,U,H,ue,_e,Ie,ee,te,oe,ge,ve,ye,pe,fe,$e,Ne,ot,le=F.s==R.s?1:-1,ae=F.c,de=R.c;if(!ae||!ae[0]||!de||!de[0])return new T(!F.s||!R.s||(ae?de&&ae[0]==de[0]:!de)?NaN:ae&&ae[0]==0||!de?le*0:le/0);for(te=new T(le),oe=te.c=[],U=F.e-R.e,le=K+U+1,Y||(Y=rc,U=Nu(F.e/Fr)-Nu(R.e/Fr),le=le/Fr|0),H=0;de[H]==(ae[H]||0);H++);if(de[H]>(ae[H]||0)&&U--,le<0)oe.push(1),ue=!0;else{for(fe=ae.length,Ne=de.length,H=0,le+=2,_e=Iu(Y/(de[0]+1)),_e>1&&(de=O(de,_e,Y),ae=O(ae,_e,Y),Ne=de.length,fe=ae.length),pe=Ne,ge=ae.slice(0,Ne),ve=ge.length;ve<Ne;ge[ve++]=0);ot=de.slice(),ot=[0].concat(ot),$e=de[0],de[1]>=Y/2&&$e++;do{if(_e=0,k=B(de,ge,Ne,ve),k<0){if(ye=ge[0],Ne!=ve&&(ye=ye*Y+(ge[1]||0)),_e=Iu(ye/$e),_e>1)for(_e>=Y&&(_e=Y-1),Ie=O(de,_e,Y),ee=Ie.length,ve=ge.length;B(Ie,ge,ee,ve)==1;)_e--,q(Ie,Ne<ee?ot:de,ee,Y),ee=Ie.length,k=1;else _e==0&&(k=_e=1),Ie=de.slice(),ee=Ie.length;if(ee<ve&&(Ie=[0].concat(Ie)),q(ge,Ie,ve,Y),ve=ge.length,k==-1)for(;B(de,ge,Ne,ve)<1;)_e++,q(ge,Ne<ve?ot:de,ve,Y),ve=ge.length}else k===0&&(_e++,ge=[0]);oe[H++]=_e,ge[0]?ge[ve++]=ae[pe]||0:(ge=[ae[pe]],ve=1)}while((pe++<fe||ge[0]!=null)&&le--);ue=ge[0]!=null,oe[0]||oe.splice(0,1)}if(Y==rc){for(H=1,le=oe[0];le>=10;le/=10,H++);ce(te,K+(te.e=H+U*Fr-1)+1,Z,ue)}else te.e=U,te.r=+ue;return te}}();function j(O,B,q,F){var R,K,Z,Y,k;if(q==null?q=a:Bs(q,0,8),!O.c)return O.toString();if(R=O.c[0],Z=O.e,B==null)k=Tu(O.c),k=F==1||F==2&&(Z<=l||Z>=c)?dm(k,Z):gh(k,Z,"0");else if(O=ce(new T(O),B,q),K=O.e,k=Tu(O.c),Y=k.length,F==1||F==2&&(B<=K||K<=l)){for(;Y<B;k+="0",Y++);k=dm(k,K)}else if(B-=Z,k=gh(k,K,"0"),K+1>Y){if(--B>0)for(k+=".";B--;k+="0");}else if(B+=K-Y,B>0)for(K+1==Y&&(k+=".");B--;k+="0");return O.s<0&&R?"-"+k:k}function W(O,B){for(var q,F,R=1,K=new T(O[0]);R<O.length;R++)F=new T(O[R]),(!F.s||(q=Ff(K,F))===B||q===0&&K.s===B)&&(K=F);return K}function X(O,B,q){for(var F=1,R=B.length;!B[--R];B.pop());for(R=B[0];R>=10;R/=10,F++);return(q=F+q*Fr-1)>p?O.c=O.e=null:q<f?O.c=[O.e=0]:(O.e=q,O.c=B),O}r=function(){var O=/^(-?)0([xbo])(?=\w[\w.]*$)/i,B=/^([^.]+)\.$/,q=/^\.([^.]+)$/,F=/^-?(Infinity|NaN)$/,R=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(K,Z,Y,k){var U,H=Y?Z:Z.replace(R,"");if(F.test(H))K.s=isNaN(H)?null:H<0?-1:1;else{if(!Y&&(H=H.replace(O,function(ue,_e,Ie){return U=(Ie=Ie.toLowerCase())=="x"?16:Ie=="b"?2:8,!k||k==U?_e:ue}),k&&(U=k,H=H.replace(B,"$1").replace(q,"0.$1")),Z!=H))return new T(H,U);if(T.DEBUG)throw Error(Nl+"Not a"+(k?" base "+k:"")+" number: "+Z);K.s=null}K.c=K.e=null}}();function ce(O,B,q,F){var R,K,Z,Y,k,U,H,ue=O.c,_e=z1;if(ue){e:{for(R=1,Y=ue[0];Y>=10;Y/=10,R++);if(K=B-R,K<0)K+=Fr,Z=B,k=ue[U=0],H=Iu(k/_e[R-Z-1]%10);else if(U=j1((K+1)/Fr),U>=ue.length)if(F){for(;ue.length<=U;ue.push(0));k=H=0,R=1,K%=Fr,Z=K-Fr+1}else break e;else{for(k=Y=ue[U],R=1;Y>=10;Y/=10,R++);K%=Fr,Z=K-Fr+R,H=Z<0?0:Iu(k/_e[R-Z-1]%10)}if(F=F||B<0||ue[U+1]!=null||(Z<0?k:k%_e[R-Z-1]),F=q<4?(H||F)&&(q==0||q==(O.s<0?3:2)):H>5||H==5&&(q==4||F||q==6&&(K>0?Z>0?k/_e[R-Z]:0:ue[U-1])%10&1||q==(O.s<0?8:7)),B<1||!ue[0])return ue.length=0,F?(B-=O.e+1,ue[0]=_e[(Fr-B%Fr)%Fr],O.e=-B||0):ue[0]=O.e=0,O;if(K==0?(ue.length=U,Y=1,U--):(ue.length=U+1,Y=_e[Fr-K],ue[U]=Z>0?Iu(k/_e[R-Z]%_e[Z])*Y:0),F)for(;;)if(U==0){for(K=1,Z=ue[0];Z>=10;Z/=10,K++);for(Z=ue[0]+=Y,Y=1;Z>=10;Z/=10,Y++);K!=Y&&(O.e++,ue[0]==rc&&(ue[0]=1));break}else{if(ue[U]+=Y,ue[U]!=rc)break;ue[U--]=0,Y=1}for(K=ue.length;ue[--K]===0;ue.pop());}O.e>p?O.c=O.e=null:O.e<f&&(O.c=[O.e=0])}return O}function he(O){var B,q=O.e;return q===null?O.toString():(B=Tu(O.c),B=q<=l||q>=c?dm(B,q):gh(B,q,"0"),O.s<0?"-"+B:B)}return i.absoluteValue=i.abs=function(){var O=new T(this);return O.s<0&&(O.s=1),O},i.comparedTo=function(O,B){return Ff(this,new T(O,B))},i.decimalPlaces=i.dp=function(O,B){var q,F,R,K=this;if(O!=null)return Bs(O,0,au),B==null?B=a:Bs(B,0,8),ce(new T(K),O+K.e+1,B);if(!(q=K.c))return null;if(F=((R=q.length-1)-Nu(this.e/Fr))*Fr,R=q[R])for(;R%10==0;R/=10,F--);return F<0&&(F=0),F},i.dividedBy=i.div=function(O,B){return e(this,new T(O,B),o,a)},i.dividedToIntegerBy=i.idiv=function(O,B){return e(this,new T(O,B),0,1)},i.exponentiatedBy=i.pow=function(O,B){var q,F,R,K,Z,Y,k,U,H,ue=this;if(O=new T(O),O.c&&!O.isInteger())throw Error(Nl+"Exponent not an integer: "+he(O));if(B!=null&&(B=new T(B)),Y=O.e>14,!ue.c||!ue.c[0]||ue.c[0]==1&&!ue.e&&ue.c.length==1||!O.c||!O.c[0])return H=new T(Math.pow(+he(ue),Y?O.s*(2-fm(O)):+he(O))),B?H.mod(B):H;if(k=O.s<0,B){if(B.c?!B.c[0]:!B.s)return new T(NaN);F=!k&&ue.isInteger()&&B.isInteger(),F&&(ue=ue.mod(B))}else{if(O.e>9&&(ue.e>0||ue.e<-1||(ue.e==0?ue.c[0]>1||Y&&ue.c[1]>=24e7:ue.c[0]<8e13||Y&&ue.c[0]<=9999975e7)))return K=ue.s<0&&fm(O)?-0:0,ue.e>-1&&(K=1/K),new T(k?1/K:K);C&&(K=j1(C/Fr+2))}for(Y?(q=new T(.5),k&&(O.s=1),U=fm(O)):(R=Math.abs(+he(O)),U=R%2),H=new T(s);;){if(U){if(H=H.times(ue),!H.c)break;K?H.c.length>K&&(H.c.length=K):F&&(H=H.mod(B))}if(R){if(R=Iu(R/2),R===0)break;U=R%2}else if(O=O.times(q),ce(O,O.e+1,1),O.e>14)U=fm(O);else{if(R=+he(O),R===0)break;U=R%2}ue=ue.times(ue),K?ue.c&&ue.c.length>K&&(ue.c.length=K):F&&(ue=ue.mod(B))}return F?H:(k&&(H=s.div(H)),B?H.mod(B):K?ce(H,C,a,Z):H)},i.integerValue=function(O){var B=new T(this);return O==null?O=a:Bs(O,0,8),ce(B,B.e+1,O)},i.isEqualTo=i.eq=function(O,B){return Ff(this,new T(O,B))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(O,B){return Ff(this,new T(O,B))>0},i.isGreaterThanOrEqualTo=i.gte=function(O,B){return(B=Ff(this,new T(O,B)))===1||B===0},i.isInteger=function(){return!!this.c&&Nu(this.e/Fr)>this.c.length-2},i.isLessThan=i.lt=function(O,B){return Ff(this,new T(O,B))<0},i.isLessThanOrEqualTo=i.lte=function(O,B){return(B=Ff(this,new T(O,B)))===-1||B===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(O,B){var q,F,R,K,Z=this,Y=Z.s;if(O=new T(O,B),B=O.s,!Y||!B)return new T(NaN);if(Y!=B)return O.s=-B,Z.plus(O);var k=Z.e/Fr,U=O.e/Fr,H=Z.c,ue=O.c;if(!k||!U){if(!H||!ue)return H?(O.s=-B,O):new T(ue?Z:NaN);if(!H[0]||!ue[0])return ue[0]?(O.s=-B,O):new T(H[0]?Z:a==3?-0:0)}if(k=Nu(k),U=Nu(U),H=H.slice(),Y=k-U){for((K=Y<0)?(Y=-Y,R=H):(U=k,R=ue),R.reverse(),B=Y;B--;R.push(0));R.reverse()}else for(F=(K=(Y=H.length)<(B=ue.length))?Y:B,Y=B=0;B<F;B++)if(H[B]!=ue[B]){K=H[B]<ue[B];break}if(K&&(R=H,H=ue,ue=R,O.s=-O.s),B=(F=ue.length)-(q=H.length),B>0)for(;B--;H[q++]=0);for(B=rc-1;F>Y;){if(H[--F]<ue[F]){for(q=F;q&&!H[--q];H[q]=B);--H[q],H[F]+=rc}H[F]-=ue[F]}for(;H[0]==0;H.splice(0,1),--U);return H[0]?X(O,H,U):(O.s=a==3?-1:1,O.c=[O.e=0],O)},i.modulo=i.mod=function(O,B){var q,F,R=this;return O=new T(O,B),!R.c||!O.s||O.c&&!O.c[0]?new T(NaN):!O.c||R.c&&!R.c[0]?new T(R):(m==9?(F=O.s,O.s=1,q=e(R,O,0,3),O.s=F,q.s*=F):q=e(R,O,0,m),O=R.minus(q.times(O)),!O.c[0]&&m==1&&(O.s=R.s),O)},i.multipliedBy=i.times=function(O,B){var q,F,R,K,Z,Y,k,U,H,ue,_e,Ie,ee,te,oe,ge=this,ve=ge.c,ye=(O=new T(O,B)).c;if(!ve||!ye||!ve[0]||!ye[0])return!ge.s||!O.s||ve&&!ve[0]&&!ye||ye&&!ye[0]&&!ve?O.c=O.e=O.s=null:(O.s*=ge.s,!ve||!ye?O.c=O.e=null:(O.c=[0],O.e=0)),O;for(F=Nu(ge.e/Fr)+Nu(O.e/Fr),O.s*=ge.s,k=ve.length,ue=ye.length,k<ue&&(ee=ve,ve=ye,ye=ee,R=k,k=ue,ue=R),R=k+ue,ee=[];R--;ee.push(0));for(te=rc,oe=Wh,R=ue;--R>=0;){for(q=0,_e=ye[R]%oe,Ie=ye[R]/oe|0,Z=k,K=R+Z;K>R;)U=ve[--Z]%oe,H=ve[Z]/oe|0,Y=Ie*U+H*_e,U=_e*U+Y%oe*oe+ee[K]+q,q=(U/te|0)+(Y/oe|0)+Ie*H,ee[K--]=U%te;ee[K]=q}return q?++F:ee.splice(0,1),X(O,ee,F)},i.negated=function(){var O=new T(this);return O.s=-O.s||null,O},i.plus=function(O,B){var q,F=this,R=F.s;if(O=new T(O,B),B=O.s,!R||!B)return new T(NaN);if(R!=B)return O.s=-B,F.minus(O);var K=F.e/Fr,Z=O.e/Fr,Y=F.c,k=O.c;if(!K||!Z){if(!Y||!k)return new T(R/0);if(!Y[0]||!k[0])return k[0]?O:new T(Y[0]?F:R*0)}if(K=Nu(K),Z=Nu(Z),Y=Y.slice(),R=K-Z){for(R>0?(Z=K,q=k):(R=-R,q=Y),q.reverse();R--;q.push(0));q.reverse()}for(R=Y.length,B=k.length,R-B<0&&(q=k,k=Y,Y=q,B=R),R=0;B;)R=(Y[--B]=Y[B]+k[B]+R)/rc|0,Y[B]=rc===Y[B]?0:Y[B]%rc;return R&&(Y=[R].concat(Y),++Z),X(O,Y,Z)},i.precision=i.sd=function(O,B){var q,F,R,K=this;if(O!=null&&O!==!!O)return Bs(O,1,au),B==null?B=a:Bs(B,0,8),ce(new T(K),O,B);if(!(q=K.c))return null;if(R=q.length-1,F=R*Fr+1,R=q[R]){for(;R%10==0;R/=10,F--);for(R=q[0];R>=10;R/=10,F++);}return O&&K.e+1>F&&(F=K.e+1),F},i.shiftedBy=function(O){return Bs(O,-9007199254740991,K4),this.times("1e"+O)},i.squareRoot=i.sqrt=function(){var O,B,q,F,R,K=this,Z=K.c,Y=K.s,k=K.e,U=o+4,H=new T("0.5");if(Y!==1||!Z||!Z[0])return new T(!Y||Y<0&&(!Z||Z[0])?NaN:Z?K:1/0);if(Y=Math.sqrt(+he(K)),Y==0||Y==1/0?(B=Tu(Z),(B.length+k)%2==0&&(B+="0"),Y=Math.sqrt(+B),k=Nu((k+1)/2)-(k<0||k%2),Y==1/0?B="5e"+k:(B=Y.toExponential(),B=B.slice(0,B.indexOf("e")+1)+k),q=new T(B)):q=new T(Y+""),q.c[0]){for(k=q.e,Y=k+U,Y<3&&(Y=0);;)if(R=q,q=H.times(R.plus(e(K,R,U,1))),Tu(R.c).slice(0,Y)===(B=Tu(q.c)).slice(0,Y))if(q.e<k&&--Y,B=B.slice(Y-3,Y+1),B=="9999"||!F&&B=="4999"){if(!F&&(ce(R,R.e+o+2,0),R.times(R).eq(K))){q=R;break}U+=4,Y+=4,F=1}else{(!+B||!+B.slice(1)&&B.charAt(0)=="5")&&(ce(q,q.e+o+2,1),O=!q.times(q).eq(K));break}}return ce(q,q.e+o+1,a,O)},i.toExponential=function(O,B){return O!=null&&(Bs(O,0,au),O++),j(this,O,B,1)},i.toFixed=function(O,B){return O!=null&&(Bs(O,0,au),O=O+this.e+1),j(this,O,B)},i.toFormat=function(O,B,q){var F,R=this;if(q==null)O!=null&&B&&typeof B=="object"?(q=B,B=null):O&&typeof O=="object"?(q=O,O=B=null):q=S;else if(typeof q!="object")throw Error(Nl+"Argument not an object: "+q);if(F=R.toFixed(O,B),R.c){var K,Z=F.split("."),Y=+q.groupSize,k=+q.secondaryGroupSize,U=q.groupSeparator||"",H=Z[0],ue=Z[1],_e=R.s<0,Ie=_e?H.slice(1):H,ee=Ie.length;if(k&&(K=Y,Y=k,k=K,ee-=K),Y>0&&ee>0){for(K=ee%Y||Y,H=Ie.substr(0,K);K<ee;K+=Y)H+=U+Ie.substr(K,Y);k>0&&(H+=U+Ie.slice(K)),_e&&(H="-"+H)}F=ue?H+(q.decimalSeparator||"")+((k=+q.fractionGroupSize)?ue.replace(new RegExp("\\d{"+k+"}\\B","g"),"$&"+(q.fractionGroupSeparator||"")):ue):H}return(q.prefix||"")+F+(q.suffix||"")},i.toFraction=function(O){var B,q,F,R,K,Z,Y,k,U,H,ue,_e,Ie=this,ee=Ie.c;if(O!=null&&(Y=new T(O),!Y.isInteger()&&(Y.c||Y.s!==1)||Y.lt(s)))throw Error(Nl+"Argument "+(Y.isInteger()?"out of range: ":"not an integer: ")+he(Y));if(!ee)return new T(Ie);for(B=new T(s),U=q=new T(s),F=k=new T(s),_e=Tu(ee),K=B.e=_e.length-Ie.e-1,B.c[0]=z1[(Z=K%Fr)<0?Fr+Z:Z],O=!O||Y.comparedTo(B)>0?K>0?B:U:Y,Z=p,p=1/0,Y=new T(_e),k.c[0]=0;H=e(Y,B,0,1),R=q.plus(H.times(F)),R.comparedTo(O)!=1;)q=F,F=R,U=k.plus(H.times(R=U)),k=R,B=Y.minus(H.times(R=B)),Y=R;return R=e(O.minus(q),F,0,1),k=k.plus(R.times(U)),q=q.plus(R.times(F)),k.s=U.s=Ie.s,K=K*2,ue=e(U,F,K,a).minus(Ie).abs().comparedTo(e(k,q,K,a).minus(Ie).abs())<1?[U,F]:[k,q],p=Z,ue},i.toNumber=function(){return+he(this)},i.toPrecision=function(O,B){return O!=null&&Bs(O,1,au),j(this,O,B,2)},i.toString=function(O){var B,q=this,F=q.s,R=q.e;return R===null?F?(B="Infinity",F<0&&(B="-"+B)):B="NaN":(O==null?B=R<=l||R>=c?dm(Tu(q.c),R):gh(Tu(q.c),R,"0"):O===10&&N?(q=ce(new T(q),o+R+1,a),B=gh(Tu(q.c),q.e,"0")):(Bs(O,2,I.length,"Base"),B=n(gh(Tu(q.c),R,"0"),10,O,F,!0)),F<0&&q.c[0]&&(B="-"+B)),B},i.valueOf=i.toJSON=function(){return he(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,t!=null&&T.set(t),T}function Nu(t){var e=t|0;return t>0||t===e?e:e-1}function Tu(t){for(var e,n,r=1,i=t.length,s=t[0]+"";r<i;){for(e=t[r++]+"",n=Fr-e.length;n--;e="0"+e);s+=e}for(i=s.length;s.charCodeAt(--i)===48;);return s.slice(0,i+1||1)}function Ff(t,e){var n,r,i=t.c,s=e.c,o=t.s,a=e.s,l=t.e,c=e.e;if(!o||!a)return null;if(n=i&&!i[0],r=s&&!s[0],n||r)return n?r?0:-a:o;if(o!=a)return o;if(n=o<0,r=l==c,!i||!s)return r?0:!i^n?1:-1;if(!r)return l>c^n?1:-1;for(a=(l=i.length)<(c=s.length)?l:c,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^n?1:-1;return l==c?0:l>c^n?1:-1}function Bs(t,e,n,r){if(t<e||t>n||t!==Iu(t))throw Error(Nl+(r||"Argument")+(typeof t=="number"?t<e||t>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function fm(t){var e=t.c.length-1;return Nu(t.e/Fr)==e&&t.c[e]%2!=0}function dm(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function gh(t,e,n){var r,i;if(e<0){for(i=n+".";++e;i+=n);t=i+t}else if(r=t.length,++e>r){for(i=n,e-=r;--e;i+=n);t+=i}else e<r&&(t=t.slice(0,e)+"."+t.slice(e));return t}var Hc=cE(),K9=class{constructor(t){Ke(this,"key");Ke(this,"left",null);Ke(this,"right",null);this.key=t}},Wp=class extends K9{constructor(t){super(t)}},Z9=class{constructor(){Ke(this,"size",0);Ke(this,"modificationCount",0);Ke(this,"splayCount",0)}splay(t){const e=this.root;if(e==null)return this.compare(t,t),-1;let n=null,r=null,i=null,s=null,o=e;const a=this.compare;let l;for(;;)if(l=a(o.key,t),l>0){let c=o.left;if(c==null||(l=a(c.key,t),l>0&&(o.left=c.right,c.right=o,o=c,c=o.left,c==null)))break;n==null?r=o:n.left=o,n=o,o=c}else if(l<0){let c=o.right;if(c==null||(l=a(c.key,t),l<0&&(o.right=c.left,c.left=o,o=c,c=o.right,c==null)))break;i==null?s=o:i.right=o,i=o,o=c}else break;return i!=null&&(i.right=o.left,o.left=s),n!=null&&(n.left=o.right,o.right=r),this.root!==o&&(this.root=o,this.splayCount++),l}splayMin(t){let e=t,n=e.left;for(;n!=null;){const r=n;e.left=r.right,r.right=e,e=r,n=e.left}return e}splayMax(t){let e=t,n=e.right;for(;n!=null;){const r=n;e.right=r.left,r.left=e,e=r,n=e.right}return e}_delete(t){if(this.root==null||this.splay(t)!=0)return null;let n=this.root;const r=n,i=n.left;if(this.size--,i==null)this.root=n.right;else{const s=n.right;n=this.splayMax(i),n.right=s,this.root=n}return this.modificationCount++,r}addNewRoot(t,e){this.size++,this.modificationCount++;const n=this.root;if(n==null){this.root=t;return}e<0?(t.left=n,t.right=n.right,n.right=null):(t.right=n,t.left=n.left,n.left=null),this.root=t}_first(){const t=this.root;return t==null?null:(this.root=this.splayMin(t),this.root)}_last(){const t=this.root;return t==null?null:(this.root=this.splayMax(t),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(t){return this.validKey(t)&&this.splay(t)==0}defaultCompare(){return(t,e)=>t<e?-1:t>e?1:0}wrap(){return{getRoot:()=>this.root,setRoot:t=>{this.root=t},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:t=>{this.splayCount=t},splay:t=>this.splay(t),has:t=>this.has(t)}}},hL,fL,Dv=class cg extends Z9{constructor(n,r){super();Ke(this,"root",null);Ke(this,"compare");Ke(this,"validKey");Ke(this,hL,"[object Set]");this.compare=n??this.defaultCompare(),this.validKey=r??(i=>i!=null&&i!=null)}delete(n){return this.validKey(n)?this._delete(n)!=null:!1}deleteAll(n){for(const r of n)this.delete(r)}forEach(n){const r=this[Symbol.iterator]();let i;for(;i=r.next(),!i.done;)n(i.value,i.value,this)}add(n){const r=this.splay(n);return r!=0&&this.addNewRoot(new Wp(n),r),this}addAndReturn(n){const r=this.splay(n);return r!=0&&this.addNewRoot(new Wp(n),r),this.root.key}addAll(n){for(const r of n)this.add(r)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(n){if(n==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(n)<0)return this.root.key;let i=this.root.left;if(i==null)return null;let s=i.right;for(;s!=null;)i=s,s=i.right;return i.key}firstAfter(n){if(n==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(n)>0)return this.root.key;let i=this.root.right;if(i==null)return null;let s=i.left;for(;s!=null;)i=s,s=i.left;return i.key}retainAll(n){const r=new cg(this.compare,this.validKey),i=this.modificationCount;for(const s of n){if(i!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(s)&&this.splay(s)==0&&r.add(this.root.key)}r.size!=this.size&&(this.root=r.root,this.size=r.size,this.modificationCount++)}lookup(n){return!this.validKey(n)||this.splay(n)!=0?null:this.root.key}intersection(n){const r=new cg(this.compare,this.validKey);for(const i of this)n.has(i)&&r.add(i);return r}difference(n){const r=new cg(this.compare,this.validKey);for(const i of this)n.has(i)||r.add(i);return r}union(n){const r=this.clone();return r.addAll(n),r}clone(){const n=new cg(this.compare,this.validKey);return n.size=this.size,n.root=this.copyNode(this.root),n}copyNode(n){if(n==null)return null;function r(s,o){let a,l;do{if(a=s.left,l=s.right,a!=null){const c=new Wp(a.key);o.left=c,r(a,c)}if(l!=null){const c=new Wp(l.key);o.right=c,s=l,o=c}}while(l!=null)}const i=new Wp(n.key);return r(n,i),i}toSet(){return this.clone()}entries(){return new J9(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(fL=Symbol.iterator,hL=Symbol.toStringTag,fL)](){return new X9(this.wrap())}},hE=class{constructor(t){Ke(this,"tree");Ke(this,"path",new Array);Ke(this,"modificationCount",null);Ke(this,"splayCount");this.tree=t,this.splayCount=t.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;const t=this.path[this.path.length-1];return this.getValue(t)}rebuildPath(t){this.path.splice(0,this.path.length),this.tree.splay(t),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(t){for(;t!=null;)this.path.push(t),t=t.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let n=this.tree.getRoot();for(;n!=null;)this.path.push(n),n=n.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let t=this.path[this.path.length-1],e=t.right;if(e!=null){for(;e!=null;)this.path.push(e),e=e.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===t;)t=this.path.pop();return this.path.length>0}},X9=class extends hE{getValue(t){return t.key}},J9=class extends hE{getValue(t){return[t.key,t.key]}},fE=t=>()=>t,nb=t=>{const e=t?(n,r)=>r.minus(n).abs().isLessThanOrEqualTo(t):fE(!1);return(n,r)=>e(n,r)?0:n.comparedTo(r)};function Q9(t){const e=t?(n,r,i,s,o)=>n.exponentiatedBy(2).isLessThanOrEqualTo(s.minus(r).exponentiatedBy(2).plus(o.minus(i).exponentiatedBy(2)).times(t)):fE(!1);return(n,r,i)=>{const s=n.x,o=n.y,a=i.x,l=i.y,c=o.minus(l).times(r.x.minus(a)).minus(s.minus(a).times(r.y.minus(l)));return e(c,s,o,a,l)?0:c.comparedTo(0)}}var ej=t=>t,tj=t=>{if(t){const e=new Dv(nb(t)),n=new Dv(nb(t)),r=(s,o)=>o.addAndReturn(s),i=s=>({x:r(s.x,e),y:r(s.y,n)});return i({x:new Hc(0),y:new Hc(0)}),i}return ej},rb=t=>({set:e=>{Oh=rb(e)},reset:()=>rb(t),compare:nb(t),snap:tj(t),orient:Q9(t)}),Oh=rb(),qp=(t,e)=>t.ll.x.isLessThanOrEqualTo(e.x)&&e.x.isLessThanOrEqualTo(t.ur.x)&&t.ll.y.isLessThanOrEqualTo(e.y)&&e.y.isLessThanOrEqualTo(t.ur.y),ib=(t,e)=>{if(e.ur.x.isLessThan(t.ll.x)||t.ur.x.isLessThan(e.ll.x)||e.ur.y.isLessThan(t.ll.y)||t.ur.y.isLessThan(e.ll.y))return null;const n=t.ll.x.isLessThan(e.ll.x)?e.ll.x:t.ll.x,r=t.ur.x.isLessThan(e.ur.x)?t.ur.x:e.ur.x,i=t.ll.y.isLessThan(e.ll.y)?e.ll.y:t.ll.y,s=t.ur.y.isLessThan(e.ur.y)?t.ur.y:e.ur.y;return{ll:{x:n,y:i},ur:{x:r,y:s}}},Ym=(t,e)=>t.x.times(e.y).minus(t.y.times(e.x)),dE=(t,e)=>t.x.times(e.x).plus(t.y.times(e.y)),Iv=t=>dE(t,t).sqrt(),nj=(t,e,n)=>{const r={x:e.x.minus(t.x),y:e.y.minus(t.y)},i={x:n.x.minus(t.x),y:n.y.minus(t.y)};return Ym(i,r).div(Iv(i)).div(Iv(r))},rj=(t,e,n)=>{const r={x:e.x.minus(t.x),y:e.y.minus(t.y)},i={x:n.x.minus(t.x),y:n.y.minus(t.y)};return dE(i,r).div(Iv(i)).div(Iv(r))},Z4=(t,e,n)=>e.y.isZero()?null:{x:t.x.plus(e.x.div(e.y).times(n.minus(t.y))),y:n},X4=(t,e,n)=>e.x.isZero()?null:{x:n,y:t.y.plus(e.y.div(e.x).times(n.minus(t.x)))},ij=(t,e,n,r)=>{if(e.x.isZero())return X4(n,r,t.x);if(r.x.isZero())return X4(t,e,n.x);if(e.y.isZero())return Z4(n,r,t.y);if(r.y.isZero())return Z4(t,e,n.y);const i=Ym(e,r);if(i.isZero())return null;const s={x:n.x.minus(t.x),y:n.y.minus(t.y)},o=Ym(s,e).div(i),a=Ym(s,r).div(i),l=t.x.plus(a.times(e.x)),c=n.x.plus(o.times(r.x)),f=t.y.plus(a.times(e.y)),p=n.y.plus(o.times(r.y)),v=l.plus(c).div(2),m=f.plus(p).div(2);return{x:v,y:m}},jc=class pE{constructor(e,n){Ke(this,"point");Ke(this,"isLeft");Ke(this,"segment");Ke(this,"otherSE");Ke(this,"consumedBy");e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}static compare(e,n){const r=pE.comparePoints(e.point,n.point);return r!==0?r:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:Nv.compare(e.segment,n.segment))}static comparePoints(e,n){return e.x.isLessThan(n.x)?-1:e.x.isGreaterThan(n.x)?1:e.y.isLessThan(n.y)?-1:e.y.isGreaterThan(n.y)?1:0}link(e){if(e.point===this.point)throw new Error("Tried to link already linked events");const n=e.point.events;for(let r=0,i=n.length;r<i;r++){const s=n[r];this.point.events.push(s),s.point=this.point}this.checkForConsuming()}checkForConsuming(){const e=this.point.events.length;for(let n=0;n<e;n++){const r=this.point.events[n];if(r.segment.consumedBy===void 0)for(let i=n+1;i<e;i++){const s=this.point.events[i];s.consumedBy===void 0&&r.otherSE.point.events===s.otherSE.point.events&&r.segment.consume(s.segment)}}}getAvailableLinkedEvents(){const e=[];for(let n=0,r=this.point.events.length;n<r;n++){const i=this.point.events[n];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&e.push(i)}return e}getLeftmostComparator(e){const n=new Map,r=i=>{const s=i.otherSE;n.set(i,{sine:nj(this.point,e.point,s.point),cosine:rj(this.point,e.point,s.point)})};return(i,s)=>{n.has(i)||r(i),n.has(s)||r(s);const{sine:o,cosine:a}=n.get(i),{sine:l,cosine:c}=n.get(s);return o.isGreaterThanOrEqualTo(0)&&l.isGreaterThanOrEqualTo(0)?a.isLessThan(c)?1:a.isGreaterThan(c)?-1:0:o.isLessThan(0)&&l.isLessThan(0)?a.isLessThan(c)?-1:a.isGreaterThan(c)?1:0:l.isLessThan(o)?-1:l.isGreaterThan(o)?1:0}}},sj=class sb{constructor(e){Ke(this,"events");Ke(this,"poly");Ke(this,"_isExteriorRing");Ke(this,"_enclosingRing");this.events=e;for(let n=0,r=e.length;n<r;n++)e[n].segment.ringOut=this;this.poly=null}static factory(e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];if(!s.isInResult()||s.ringOut)continue;let o=null,a=s.leftSE,l=s.rightSE;const c=[a],f=a.point,p=[];for(;o=a,a=l,c.push(a),a.point!==f;)for(;;){const v=a.getAvailableLinkedEvents();if(v.length===0){const S=c[0].point,I=c[c.length-1].point;throw new Error(`Unable to complete output ring starting at [${S.x}, ${S.y}]. Last matching segment found ends at [${I.x}, ${I.y}].`)}if(v.length===1){l=v[0].otherSE;break}let m=null;for(let S=0,I=p.length;S<I;S++)if(p[S].point===a.point){m=S;break}if(m!==null){const S=p.splice(m)[0],I=c.splice(S.index);I.unshift(I[0].otherSE),n.push(new sb(I.reverse()));continue}p.push({index:c.length,point:a.point});const C=a.getLeftmostComparator(o);l=v.sort(C)[0].otherSE;break}n.push(new sb(c))}return n}getGeom(){let e=this.events[0].point;const n=[e];for(let c=1,f=this.events.length-1;c<f;c++){const p=this.events[c].point,v=this.events[c+1].point;Oh.orient(p,e,v)!==0&&(n.push(p),e=p)}if(n.length===1)return null;const r=n[0],i=n[1];Oh.orient(r,e,i)===0&&n.shift(),n.push(n[0]);const s=this.isExteriorRing()?1:-1,o=this.isExteriorRing()?0:n.length-1,a=this.isExteriorRing()?n.length:-1,l=[];for(let c=o;c!=a;c+=s)l.push([n[c].x.toNumber(),n[c].y.toNumber()]);return l}isExteriorRing(){if(this._isExteriorRing===void 0){const e=this.enclosingRing();this._isExteriorRing=e?!e.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var i,s;let e=this.events[0];for(let o=1,a=this.events.length;o<a;o++){const l=this.events[o];jc.compare(e,l)>0&&(e=l)}let n=e.segment.prevInResult(),r=n?n.prevInResult():null;for(;;){if(!n)return null;if(!r)return n.ringOut;if(r.ringOut!==n.ringOut)return((i=r.ringOut)==null?void 0:i.enclosingRing())!==n.ringOut?n.ringOut:(s=n.ringOut)==null?void 0:s.enclosingRing();n=r.prevInResult(),r=n?n.prevInResult():null}}},J4=class{constructor(t){Ke(this,"exteriorRing");Ke(this,"interiorRings");this.exteriorRing=t,t.poly=this,this.interiorRings=[]}addInterior(t){this.interiorRings.push(t),t.poly=this}getGeom(){const t=this.exteriorRing.getGeom();if(t===null)return null;const e=[t];for(let n=0,r=this.interiorRings.length;n<r;n++){const i=this.interiorRings[n].getGeom();i!==null&&e.push(i)}return e}},oj=class{constructor(t){Ke(this,"rings");Ke(this,"polys");this.rings=t,this.polys=this._composePolys(t)}getGeom(){const t=[];for(let e=0,n=this.polys.length;e<n;e++){const r=this.polys[e].getGeom();r!==null&&t.push(r)}return t}_composePolys(t){var n;const e=[];for(let r=0,i=t.length;r<i;r++){const s=t[r];if(!s.poly)if(s.isExteriorRing())e.push(new J4(s));else{const o=s.enclosingRing();o!=null&&o.poly||e.push(new J4(o)),(n=o==null?void 0:o.poly)==null||n.addInterior(s)}}return e}},aj=class{constructor(t,e=Nv.compare){Ke(this,"queue");Ke(this,"tree");Ke(this,"segments");this.queue=t,this.tree=new Dv(e),this.segments=[]}process(t){const e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.delete(t.otherSE):this.tree.delete(e),n;t.isLeft&&this.tree.add(e);let r=e,i=e;do r=this.tree.lastBefore(r);while(r!=null&&r.consumedBy!=null);do i=this.tree.firstAfter(i);while(i!=null&&i.consumedBy!=null);if(t.isLeft){let s=null;if(r){const a=r.getIntersection(e);if(a!==null&&(e.isAnEndpoint(a)||(s=a),!r.isAnEndpoint(a))){const l=this._splitSafely(r,a);for(let c=0,f=l.length;c<f;c++)n.push(l[c])}}let o=null;if(i){const a=i.getIntersection(e);if(a!==null&&(e.isAnEndpoint(a)||(o=a),!i.isAnEndpoint(a))){const l=this._splitSafely(i,a);for(let c=0,f=l.length;c<f;c++)n.push(l[c])}}if(s!==null||o!==null){let a=null;s===null?a=o:o===null?a=s:a=jc.comparePoints(s,o)<=0?s:o,this.queue.delete(e.rightSE),n.push(e.rightSE);const l=e.split(a);for(let c=0,f=l.length;c<f;c++)n.push(l[c])}n.length>0?(this.tree.delete(e),n.push(t)):(this.segments.push(e),e.prev=r)}else{if(r&&i){const s=r.getIntersection(i);if(s!==null){if(!r.isAnEndpoint(s)){const o=this._splitSafely(r,s);for(let a=0,l=o.length;a<l;a++)n.push(o[a])}if(!i.isAnEndpoint(s)){const o=this._splitSafely(i,s);for(let a=0,l=o.length;a<l;a++)n.push(o[a])}}}this.tree.delete(e)}return n}_splitSafely(t,e){this.tree.delete(t);const n=t.rightSE;this.queue.delete(n);const r=t.split(e);return r.push(n),t.consumedBy===void 0&&this.tree.add(t),r}},lj=class{constructor(){Ke(this,"type");Ke(this,"numMultiPolys")}run(t,e,n){hg.type=t;const r=[new e5(e,!0)];for(let c=0,f=n.length;c<f;c++)r.push(new e5(n[c],!1));if(hg.numMultiPolys=r.length,hg.type==="difference"){const c=r[0];let f=1;for(;f<r.length;)ib(r[f].bbox,c.bbox)!==null?f++:r.splice(f,1)}if(hg.type==="intersection")for(let c=0,f=r.length;c<f;c++){const p=r[c];for(let v=c+1,m=r.length;v<m;v++)if(ib(p.bbox,r[v].bbox)===null)return[]}const i=new Dv(jc.compare);for(let c=0,f=r.length;c<f;c++){const p=r[c].getSweepEvents();for(let v=0,m=p.length;v<m;v++)i.add(p[v])}const s=new aj(i);let o=null;for(i.size!=0&&(o=i.first(),i.delete(o));o;){const c=s.process(o);for(let f=0,p=c.length;f<p;f++){const v=c[f];v.consumedBy===void 0&&i.add(v)}i.size!=0?(o=i.first(),i.delete(o)):o=null}Oh.reset();const a=sj.factory(s.segments);return new oj(a).getGeom()}},hg=new lj,ob=hg,uj=0,Nv=class Km{constructor(e,n,r,i){Ke(this,"id");Ke(this,"leftSE");Ke(this,"rightSE");Ke(this,"rings");Ke(this,"windings");Ke(this,"ringOut");Ke(this,"consumedBy");Ke(this,"prev");Ke(this,"_prevInResult");Ke(this,"_beforeState");Ke(this,"_afterState");Ke(this,"_isInResult");this.id=++uj,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=r,this.windings=i}static compare(e,n){const r=e.leftSE.point.x,i=n.leftSE.point.x,s=e.rightSE.point.x,o=n.rightSE.point.x;if(o.isLessThan(r))return 1;if(s.isLessThan(i))return-1;const a=e.leftSE.point.y,l=n.leftSE.point.y,c=e.rightSE.point.y,f=n.rightSE.point.y;if(r.isLessThan(i)){if(l.isLessThan(a)&&l.isLessThan(c))return 1;if(l.isGreaterThan(a)&&l.isGreaterThan(c))return-1;const p=e.comparePoint(n.leftSE.point);if(p<0)return 1;if(p>0)return-1;const v=n.comparePoint(e.rightSE.point);return v!==0?v:-1}if(r.isGreaterThan(i)){if(a.isLessThan(l)&&a.isLessThan(f))return-1;if(a.isGreaterThan(l)&&a.isGreaterThan(f))return 1;const p=n.comparePoint(e.leftSE.point);if(p!==0)return p;const v=e.comparePoint(n.rightSE.point);return v<0?1:v>0?-1:1}if(a.isLessThan(l))return-1;if(a.isGreaterThan(l))return 1;if(s.isLessThan(o)){const p=n.comparePoint(e.rightSE.point);if(p!==0)return p}if(s.isGreaterThan(o)){const p=e.comparePoint(n.rightSE.point);if(p<0)return 1;if(p>0)return-1}if(!s.eq(o)){const p=c.minus(a),v=s.minus(r),m=f.minus(l),C=o.minus(i);if(p.isGreaterThan(v)&&m.isLessThan(C))return 1;if(p.isLessThan(v)&&m.isGreaterThan(C))return-1}return s.isGreaterThan(o)?1:s.isLessThan(o)||c.isLessThan(f)?-1:c.isGreaterThan(f)?1:e.id<n.id?-1:e.id>n.id?1:0}static fromRing(e,n,r){let i,s,o;const a=jc.comparePoints(e,n);if(a<0)i=e,s=n,o=1;else if(a>0)i=n,s=e,o=-1;else throw new Error(`Tried to create degenerate segment at [${e.x}, ${e.y}]`);const l=new jc(i,!0),c=new jc(s,!1);return new Km(l,c,[r],[o])}replaceRightSE(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const e=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e.isLessThan(n)?e:n},ur:{x:this.rightSE.point.x,y:e.isGreaterThan(n)?e:n}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(e){return e.x.eq(this.leftSE.point.x)&&e.y.eq(this.leftSE.point.y)||e.x.eq(this.rightSE.point.x)&&e.y.eq(this.rightSE.point.y)}comparePoint(e){return Oh.orient(this.leftSE.point,e,this.rightSE.point)}getIntersection(e){const n=this.bbox(),r=e.bbox(),i=ib(n,r);if(i===null)return null;const s=this.leftSE.point,o=this.rightSE.point,a=e.leftSE.point,l=e.rightSE.point,c=qp(n,a)&&this.comparePoint(a)===0,f=qp(r,s)&&e.comparePoint(s)===0,p=qp(n,l)&&this.comparePoint(l)===0,v=qp(r,o)&&e.comparePoint(o)===0;if(f&&c)return v&&!p?o:!v&&p?l:null;if(f)return p&&s.x.eq(l.x)&&s.y.eq(l.y)?null:s;if(c)return v&&o.x.eq(a.x)&&o.y.eq(a.y)?null:a;if(v&&p)return null;if(v)return o;if(p)return l;const m=ij(s,this.vector(),a,e.vector());return m===null||!qp(i,m)?null:Oh.snap(m)}split(e){const n=[],r=e.events!==void 0,i=new jc(e,!0),s=new jc(e,!1),o=this.rightSE;this.replaceRightSE(s),n.push(s),n.push(i);const a=new Km(i,o,this.rings.slice(),this.windings.slice());return jc.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),jc.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),s.checkForConsuming()),n}swapEvents(){const e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let n=0,r=this.windings.length;n<r;n++)this.windings[n]*=-1}consume(e){let n=this,r=e;for(;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;const i=Km.compare(n,r);if(i!==0){if(i>0){const s=n;n=r,r=s}if(n.prev===r){const s=n;n=r,r=s}for(let s=0,o=r.rings.length;s<o;s++){const a=r.rings[s],l=r.windings[s],c=n.rings.indexOf(a);c===-1?(n.rings.push(a),n.windings.push(l)):n.windings[c]+=l}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};const n=this._afterState.rings,r=this._afterState.windings,i=this._afterState.multiPolys;for(let a=0,l=this.rings.length;a<l;a++){const c=this.rings[a],f=this.windings[a],p=n.indexOf(c);p===-1?(n.push(c),r.push(f)):r[p]+=f}const s=[],o=[];for(let a=0,l=n.length;a<l;a++){if(r[a]===0)continue;const c=n[a],f=c.poly;if(o.indexOf(f)===-1)if(c.isExterior)s.push(f);else{o.indexOf(f)===-1&&o.push(f);const p=s.indexOf(c.poly);p!==-1&&s.splice(p,1)}}for(let a=0,l=s.length;a<l;a++){const c=s[a].multiPoly;i.indexOf(c)===-1&&i.push(c)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const e=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(ob.type){case"union":{const r=e.length===0,i=n.length===0;this._isInResult=r!==i;break}case"intersection":{let r,i;e.length<n.length?(r=e.length,i=n.length):(r=n.length,i=e.length),this._isInResult=i===ob.numMultiPolys&&r<i;break}case"xor":{const r=Math.abs(e.length-n.length);this._isInResult=r%2===1;break}case"difference":{const r=i=>i.length===1&&i[0].isSubject;this._isInResult=r(e)!==r(n);break}}return this._isInResult}},Q4=class{constructor(t,e,n){Ke(this,"poly");Ke(this,"isExterior");Ke(this,"segments");Ke(this,"bbox");if(!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=e,this.isExterior=n,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const r=Oh.snap({x:new Hc(t[0][0]),y:new Hc(t[0][1])});this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};let i=r;for(let s=1,o=t.length;s<o;s++){if(typeof t[s][0]!="number"||typeof t[s][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const a=Oh.snap({x:new Hc(t[s][0]),y:new Hc(t[s][1])});a.x.eq(i.x)&&a.y.eq(i.y)||(this.segments.push(Nv.fromRing(i,a,this)),a.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=a.x),a.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=a.y),a.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=a.x),a.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=a.y),i=a)}(!r.x.eq(i.x)||!r.y.eq(i.y))&&this.segments.push(Nv.fromRing(i,r,this))}getSweepEvents(){const t=[];for(let e=0,n=this.segments.length;e<n;e++){const r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}},cj=class{constructor(t,e){Ke(this,"multiPoly");Ke(this,"exteriorRing");Ke(this,"interiorRings");Ke(this,"bbox");if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Q4(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let n=1,r=t.length;n<r;n++){const i=new Q4(t[n],this,!1);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.interiorRings.push(i)}this.multiPoly=e}getSweepEvents(){const t=this.exteriorRing.getSweepEvents();for(let e=0,n=this.interiorRings.length;e<n;e++){const r=this.interiorRings[e].getSweepEvents();for(let i=0,s=r.length;i<s;i++)t.push(r[i])}return t}},e5=class{constructor(t,e){Ke(this,"isSubject");Ke(this,"polys");Ke(this,"bbox");if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:new Hc(Number.POSITIVE_INFINITY),y:new Hc(Number.POSITIVE_INFINITY)},ur:{x:new Hc(Number.NEGATIVE_INFINITY),y:new Hc(Number.NEGATIVE_INFINITY)}};for(let n=0,r=t.length;n<r;n++){const i=new cj(t[n],this);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.polys.push(i)}this.isSubject=e}getSweepEvents(){const t=[];for(let e=0,n=this.polys.length;e<n;e++){const r=this.polys[e].getSweepEvents();for(let i=0,s=r.length;i<s;i++)t.push(r[i])}return t}},hj=(t,...e)=>ob.run("intersection",t,e);Oh.set;function fj(t,e){var n,r,i,s,o,a,l,c,f,p,v=0,m=t.type==="FeatureCollection",C=t.type==="Feature",S=m?t.features.length:1;for(n=0;n<S;n++){for(a=m?t.features[n].geometry:C?t.geometry:t,c=m?t.features[n].properties:C?t.properties:{},f=m?t.features[n].bbox:C?t.bbox:void 0,p=m?t.features[n].id:C?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,c,f,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,c,f,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,c,f,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function dj(t,e={}){const n=[];if(fj(t,i=>{n.push(i.coordinates)}),n.length<2)throw new Error("Must specify at least 2 geometries");const r=hj(n[0],...n.slice(1));return r.length===0?null:r.length===1?zc(r[0],e.properties):I9(r,e.properties)}var pj=dj;function gE(t,e,n){if(t!==null)for(var r,i,s,o,a,l,c,f=0,p=0,v,m=t.type,C=m==="FeatureCollection",S=m==="Feature",I=C?t.features.length:1,N=0;N<I;N++){c=C?t.features[N].geometry:S?t.geometry:t,v=c?c.type==="GeometryCollection":!1,a=v?c.geometries.length:1;for(var T=0;T<a;T++){var j=0,W=0;if(o=v?c.geometries[T]:c,o!==null){l=o.coordinates;var X=o.type;switch(f=0,X){case null:break;case"Point":if(e(l,p,N,j,W)===!1)return!1;p++,j++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],p,N,j,W)===!1)return!1;p++,X==="MultiPoint"&&j++}X==="LineString"&&j++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-f;i++){if(e(l[r][i],p,N,j,W)===!1)return!1;p++}X==="MultiLineString"&&j++,X==="Polygon"&&W++}X==="Polygon"&&j++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(W=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-f;s++){if(e(l[r][i][s],p,N,j,W)===!1)return!1;p++}W++}j++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(gE(o.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function gj(t,e){var n,r,i,s,o,a,l,c,f,p,v=0,m=t.type==="FeatureCollection",C=t.type==="Feature",S=m?t.features.length:1;for(n=0;n<S;n++){for(a=m?t.features[n].geometry:C?t.geometry:t,c=m?t.features[n].properties:C?t.properties:{},f=m?t.features[n].bbox:C?t.bbox:void 0,p=m?t.features[n].id:C?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,c,f,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,c,f,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,c,f,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function mj(t,e){gj(t,function(n,r,i,s,o){var a=n===null?null:n.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return e(wp(n,i,{bbox:s,id:o}),r,0)===!1?!1:void 0}var l;switch(a){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var c=0;c<n.coordinates.length;c++){var f=n.coordinates[c],p={type:l,coordinates:f};if(e(wp(p,i),r,c)===!1)return!1}})}function vj(t,e){mj(t,function(n,r,i){var s=0;if(n.geometry){var o=n.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var a,l=0,c=0,f=0;if(gE(n,function(p,v,m,C,S){if(a===void 0||r>l||C>c||S>f){a=p,l=r,c=C,f=S,s=0;return}var I=a0([a,p],n.properties);if(e(I,r,i,S,s)===!1)return!1;s++,a=p})===!1)return!1}}})}function yj(t,e,n){var r=n,i=!1;return vj(t,function(s,o,a,l,c){i===!1&&n===void 0?r=s:r=e(r,s,o,a,l,c),i=!0}),r}function Bv(t,e={}){return yj(t,(n,r)=>{const i=r.geometry.coordinates;return n+aE(i[0],i[1],e)},0)}var bj=Bv;class Fl extends ns.Polygon{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});Ke(this,"properties");Ke(this,"_originalStyle");Ke(this,"_path");this.properties={type:"Polygon",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{color:r.color||"#2b6451",weight:r.weight||3,opacity:r.opacity||1,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity||.2,dashArray:r.dashArray||"",name:r.name||""}},this.on("mouseover",this.highlight),this.on("mouseout",this.unhighlight),this.updateProperties(),this.on({add:()=>this.updateProperties(),edit:()=>this.updateProperties(),drag:()=>this.updateProperties()})}updateProperties(){var n,r,i,s,o;try{const a=this.getLatLngs()[0];if(!a||a.length<3){console.warn("Polygon has less than 3 points, cannot calculate properties");return}const l=a.map(N=>[N.lng,N.lat]);l.push(l[0]);const c=zc([l]),f=lE(c),p=Bv(a0([...l]),{units:"meters"}),v=Ig(c),m=ns.latLng(v.geometry.coordinates[1],v.geometry.coordinates[0]),C=((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||"",S=((i=this.properties)==null?void 0:i.category)||"forages",I=((s=this.properties)==null?void 0:s.accessLevel)||"visitor";this.properties={type:"Polygon",coordinates:a.map(N=>({lat:N.lat,lng:N.lng})),surface:f,perimeter:p,center:{lat:m.lat,lng:m.lng},vertices:a.length,category:S,accessLevel:I,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:C}},this.fire("properties:updated",{shape:this,properties:this.properties})}catch(a){console.error("Failed to calculate polygon properties",a)}}setName(n){this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})}getName(){var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""}setLatLngs(n){return super.setLatLngs(n),this.updateProperties(),this}getMidPoints(){const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let i=0;i<n.length;i++){const s=n[i],o=n[(i+1)%n.length];r.push(ns.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return r}moveVertex(n,r){const i=this.getLatLngs()[0];n>=0&&n<i.length&&(i[n]=r,ns.Polygon.prototype.setLatLngs.call(this,[i]))}addVertex(n,r){const i=this.getLatLngs()[0];n>=0&&n<i.length&&(i.splice((n+1)%i.length,0,r),ns.Polygon.prototype.setLatLngs.call(this,[i]))}move(n){const i=this.getLatLngs()[0].map(s=>ns.latLng(s.lat+n.lat,s.lng+n.lng));return ns.Polygon.prototype.setLatLngs.call(this,[i]),this}getCenter(){const n=this.getLatLngs()[0];if(!n||n.length===0)return new ns.LatLng(0,0);try{const r=n.filter(c=>c&&typeof c.lat=="number"&&typeof c.lng=="number"&&!isNaN(c.lat)&&!isNaN(c.lng)&&Math.abs(c.lat)<=90&&Math.abs(c.lng)<=180);if(r.length===0)return console.warn("Aucun point valide dans le polygone pour calculer le centre"),new ns.LatLng(0,0);const i=r.map(c=>[c.lng,c.lat]);i.push(i[0]);const s=zc([i]),o=Ig(s),a=o.geometry.coordinates[1],l=o.geometry.coordinates[0];if(typeof a!="number"||typeof l!="number"||isNaN(a)||isNaN(l)||Math.abs(a)>90||Math.abs(l)>180)throw new Error("Centroid calcul invalide");return ns.latLng(a,l)}catch(r){console.warn("Erreur lors du calcul du centrode avec turf.js, utilisation de la mthode simple",r);let i=0,s=0,o=0;for(const a of n)a&&typeof a.lat=="number"&&typeof a.lng=="number"&&!isNaN(a.lat)&&!isNaN(a.lng)&&Math.abs(a.lat)<=90&&Math.abs(a.lng)<=180&&(i+=a.lat,s+=a.lng,o++);return o===0?(console.error("Impossible de calculer un centre valide pour le polygone"),new ns.LatLng(0,0)):new ns.LatLng(i/o,s/o)}}getSegmentLengths(){const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let i=0;i<n.length;i++){const s=n[i],o=n[(i+1)%n.length];r.push(s.distanceTo(o))}return r}highlight(){if(!this._originalStyle){this._originalStyle={...this.options};const n=(this._originalStyle.weight||3)*1.5;this.setStyle({weight:n,opacity:1,fillOpacity:Math.min((this._originalStyle.fillOpacity||.2)+.1,.4),className:"polygon-hover-effect"});try{this._path&&(this._path.style.filter="drop-shadow(0 0 3px rgba(43, 100, 81, 0.7))",this._path.style.transition="all 0.2s ease-in-out")}catch(r){console.warn("Impossible d'appliquer l'effet de lueur au polygone",r)}}}unhighlight(){if(this._originalStyle){this.setStyle(this._originalStyle),this._originalStyle=void 0;try{this._path&&(this._path.style.filter="",this._path.style.transition="")}catch(n){console.warn("Impossible de restaurer le style du polygone",n)}}}}class _s extends ns.Polyline{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});Ke(this,"properties");Ke(this,"cachedProperties",{});Ke(this,"needsUpdate",!0);Ke(this,"_originalStyle");Ke(this,"_path");this.properties={type:"Line",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{...r||{},name:r.name||""}},this.updateProperties(),this.on("add",()=>{this.updateProperties()}),this.on("mouseover",this.highlight),this.on("mouseout",this.unhighlight)}highlight(){if(!this._originalStyle){this._originalStyle={...this.options};const n=(this._originalStyle.weight||3)*1.75,r=this._originalStyle.color||"#2b6451";this.setStyle({weight:n,opacity:1,className:"line-hover-effect"});try{this._path&&(this._path.style.filter=`drop-shadow(0 0 4px ${r})`,this._path.style.transition="all 0.2s ease-in-out")}catch{console.warn("Impossible d'appliquer l'effet de lueur  la ligne")}}}unhighlight(){if(this._originalStyle){this.setStyle(this._originalStyle),this._originalStyle=void 0;try{this._path&&(this._path.style.filter="",this._path.style.transition="")}catch{console.warn("Impossible de retirer l'effet de lueur de la ligne")}}}isPointNearLine(n,r=10){if(!this._map)return!1;const i=this.getLatLngs();if(i.length<2)return!1;for(let s=0;s<i.length-1;s++){const o=this._map.latLngToLayerPoint(i[s]),a=this._map.latLngToLayerPoint(i[s+1]),l=this._map.latLngToLayerPoint(n);if(ns.LineUtil.pointToSegmentDistance(l,o,a)<=r)return!0}return!1}updateProperties(){var i,s,o,a,l;const n=this.getLatLngs();if(!n||n.length<2){console.warn("Line has less than 2 points, cannot calculate properties");return}const r=n.map(c=>[c.lng,c.lat]);try{const c=a0(r),f=Bv(c,{units:"meters"});let p;if(n.length===2)p=ns.latLng((n[0].lat+n[1].lat)/2,(n[0].lng+n[1].lng)/2);else{const S=G4(c,f/2,{units:"meters"});p=ns.latLng(S.geometry.coordinates[1],S.geometry.coordinates[0])}const v=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"",m=((o=this.properties)==null?void 0:o.category)||"forages",C=((a=this.properties)==null?void 0:a.accessLevel)||"visitor";this.properties={type:"Line",length:f,coordinates:n.map(S=>({lat:S.lat,lng:S.lng})),center:{lat:p.lat,lng:p.lng},vertices:n.length,category:m,accessLevel:C,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,dashArray:((l=this.options)==null?void 0:l.dashArray)||"",name:v}},this.cachedProperties.length=f,this.cachedProperties.center=p,this.cachedProperties.midPoints=void 0,this.needsUpdate=!1,this.fire("properties:updated",{shape:this,properties:this.properties})}catch(c){console.error("Failed to calculate line properties",c)}}setName(n){this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})}getName(){var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""}invalidateCache(){this.needsUpdate=!0,this.cachedProperties={}}setLatLngs(n){return super.setLatLngs(n),this.needsUpdate=!0,this.cachedProperties={},this.fire("latlngs:updated",{latlngs:this.getLatLngs()}),this}getMidPoints(){if(!this.needsUpdate&&this.cachedProperties.midPoints)return this.cachedProperties.midPoints;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];if(!s||!o){console.warn("Points invalides dtects pour le segment",i);continue}r.push(ns.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return this.cachedProperties.midPoints=r,r}getMidPointAt(n){const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return null;const i=r[n],s=r[n+1];return!i||!s?(console.warn("Points invalides pour calcul du midpoint au segment",n),null):ns.latLng((i.lat+s.lat)/2,(i.lng+s.lng)/2)}moveVertex(n,r,i=!1){const s=this.getLatLngs();n>=0&&n<s.length&&(s[n]=r,this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("vertex:moved",{index:n,latlng:r,allPoints:s}),i&&this.updateProperties())}addVertex(n,r,i=!1){const s=this.getLatLngs();n>=0&&n<s.length-1&&(s.splice(n+1,0,r),ns.Polyline.prototype.setLatLngs.call(this,s),this.needsUpdate=!0,this.cachedProperties={},i&&this.updateProperties())}move(n,r=!0){this.fire("move:start");const i=this.getLatLngs(),s=i.map(o=>ns.latLng(o.lat+n.lat,o.lng+n.lng));return this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("move",{delta:n,newPositions:s,oldPositions:i}),r&&(this.updateProperties(),this.fire("properties:updated",{shape:this,properties:this.properties}),this.fire("move:end")),this}getCenter(){if(!this.needsUpdate&&this.cachedProperties.center)return this.cachedProperties.center;const n=this.getLatLngs();if(n.length<2)return n[0]||new ns.LatLng(0,0);try{const r=n.map(l=>[l.lng,l.lat]),i=a0(r),s=Bv(i,{units:"meters"}),o=G4(i,s/2,{units:"meters"}),a=ns.latLng(o.geometry.coordinates[1],o.geometry.coordinates[0]);return this.cachedProperties.center=a,a}catch(r){console.warn("Error calculating line center with turf.js, using simple method",r);const i=n.reduce((a,l)=>a+l.lat,0)/n.length,s=n.reduce((a,l)=>a+l.lng,0)/n.length,o=new ns.LatLng(i,s);return this.cachedProperties.center=o,o}}getSegmentLengths(){const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];r.push(s.distanceTo(o))}return r}getSegmentLengthAt(n){const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return 0;const i=r[n],s=r[n+1];return i.distanceTo(s)}getLength(){if(!this.needsUpdate&&this.cachedProperties.length)return this.cachedProperties.length;const n=this.getLatLngs();let r=0;for(let i=0;i<n.length-1;i++)r+=n[i].distanceTo(n[i+1]);return this.cachedProperties.length=r,r}}var xi=(t=>(t.PRIVATE="private",t.COMPANY="company",t.EMPLOYEE="employee",t.VISITOR="visitor",t))(xi||{});const hd=Mp("notes",()=>{const t=bt([]),e=bt([]),n=Hn(()=>O=>t.value.find(B=>B.id===O)),r=Hn(()=>O=>{const B=t.value.find(q=>q.id===O);return B?B.color:"#6B7280"}),i=Hn(()=>O=>e.value.filter(B=>B.columnId===O).sort((B,q)=>B.order-q.order)),s=Hn(()=>t.value.find(O=>O.isDefault)||t.value[0]),o=Hn(()=>[...t.value].sort((O,B)=>O.order-B.order)),a=Hn(()=>e.value),l=Hn(()=>O=>a.value.filter(B=>B.columnId===O).sort((B,q)=>B.order-q.order));async function c(){try{const O=[{id:"1",title:"Ides",color:"#8B5CF6",order:0,isDefault:!1},{id:"2",title:" faire",color:"#F59E0B",order:1,isDefault:!0},{id:"3",title:"En cours",color:"#3B82F6",order:2,isDefault:!1},{id:"4",title:"Termines",color:"#10B981",order:3,isDefault:!1},{id:"5",title:"Autres",color:"#6B7280",order:4,isDefault:!1}];t.value=O}catch(O){throw console.error("[NotesStore][loadColumns] Erreur:",O),O}}async function f(O){}async function p(O,B){try{const q=t.value.findIndex(F=>F.id===O);q!==-1&&(t.value[q]={...t.value[q],...B})}catch(q){throw console.error("[NotesStore][updateColumn] Erreur:",q),q}}function v(O){if(!O)return"private";switch(O.toLowerCase()){case"private":return"private";case"company":return"company";case"employee":return"employee";case"visitor":return"visitor";default:return console.warn(`[NotesStore] Niveau d'accs inconnu: ${O}, utilisation de PRIVATE par dfaut`),"private"}}function m(O){var Y,k,U,H;if(!O.id)throw console.error("[NotesStore][addNote] Erreur: ID du backend manquant"),new Error("L'ID du backend est requis pour ajouter une note");const B=new Date().toISOString(),q=e.value.filter(ue=>ue.columnId===O.columnId),F=q.length>0?Math.max(...q.map(ue=>ue.order))+1:0,R=v(O.access_level),K=eo();let Z=O.enterprise_id;return Z==null&&(K.isAdmin?Z=null:K.isEntreprise&&K.user?Z=K.user.id:K.isSalarie&&((Y=K.user)!=null&&Y.enterprise_id)?Z=K.user.enterprise_id:K.isVisiteur&&((U=(k=K.user)==null?void 0:k.salarie)!=null&&U.enterprise_id)?Z=K.user.salarie.enterprise_id:!K.isAdmin&&((H=K.user)!=null&&H.enterprise_id)&&(Z=K.user.enterprise_id)),e.value.push({...O,id:O.id,order:F,accessLevel:R,createdAt:O.createdAt||O.created_at||B,updatedAt:O.updatedAt||O.updated_at||B,comments:[],photos:[],enterprise_id:Z}),O.id}function C(O,B){try{const q=e.value.findIndex(F=>F.id===O);q!==-1&&(B.color&&(B.style={...e.value[q].style,color:B.color,fillColor:B.color}),B.access_level&&(B.accessLevel=v(B.access_level),delete B.access_level),e.value[q]={...e.value[q],...B})}catch(q){throw console.error("[NotesStore][updateNote] Erreur:",q),q}}function S(O){e.value.findIndex(q=>q.id===O)!==-1?e.value=e.value.filter(q=>q.id!==O):console.warn("[NotesStore][removeNote] Tentative de suppression d'une note inexistante avec ID:",O)}function I(O,B){const q=e.value.findIndex(F=>F.id===O);if(q!==-1){const F=e.value[q];if(F.columnId!==B){const K=e.value.filter(k=>k.columnId===B),Z=K.length>0?Math.max(...K.map(k=>k.order))+1:0,Y={...F,columnId:B,order:Z,updatedAt:new Date().toISOString()};e.value[q]=Y}else e.value[q]={...e.value[q],updatedAt:new Date().toISOString()}}}function N(O,B){B.forEach((q,F)=>{const R=e.value.findIndex(K=>K.id===q&&K.columnId===O);R!==-1&&(e.value[R]={...e.value[R],order:F,updatedAt:new Date().toISOString()})})}function T(O){switch(O){case"private":return"Priv";case"company":return"Entreprise";case"employee":return"Salaris";case"visitor":return"Visiteurs";default:return"Inconnu"}}async function j(O,B){try{const q=eo();if(!q.user)throw new Error("Vous devez tre connect pour ajouter un commentaire");if(!q.isEntreprise&&!q.isAdmin)throw new Error("Seules les entreprises peuvent ajouter des commentaires");if(!e.value.some(U=>U.id===O))throw new Error(`La note avec l'ID ${O} n'existe pas`);const K=(await Xo.addComment(O,B)).data,Z=e.value.findIndex(U=>U.id===O);if(Z===-1)return;const Y=e.value[Z];Y.comments||(Y.comments=[]);const k={id:K.id,text:K.text,createdAt:K.created_at,userId:K.user,userName:K.user_name,userRole:K.user_role};return Y.comments.push(k),Y.updatedAt=new Date().toISOString(),e.value[Z]={...Y},k.id}catch(q){throw console.error("Erreur lors de l'ajout du commentaire:",q),q}}async function W(O,B){try{const q=e.value.findIndex(K=>K.id===O);if(q===-1)throw new Error(`La note avec l'ID ${O} n'existe pas`);const F=e.value[q];if(!F.comments||F.comments.length===0)throw new Error("Aucun commentaire trouv pour cette note");if(!F.comments.some(K=>K.id===B))throw new Error(`Le commentaire avec l'ID ${B} n'existe pas`);await Xo.deleteComment(O,B),F.comments=F.comments.filter(K=>K.id!==B),F.updatedAt=new Date().toISOString(),e.value[q]={...F}}catch(q){throw console.error("Erreur lors de la suppression du commentaire:",q),q}}async function X(O,B){try{if(B.id&&B.image){const q=e.value.findIndex(K=>K.id===O);if(q===-1)return;const F=e.value[q];F.photos||(F.photos=[]);const R={id:B.id,url:B.image,caption:B.caption,createdAt:B.created_at};return F.photos.push(R),F.updatedAt=new Date().toISOString(),e.value[q]={...F},R.id}else{const q=new FormData;q.append("image",B.url),B.caption&&q.append("caption",B.caption);const R=(await Xo.addPhoto(O,q)).data,K=e.value.findIndex(k=>k.id===O);if(K===-1)return;const Z=e.value[K];Z.photos||(Z.photos=[]);const Y={id:R.id,url:R.image,caption:R.caption,createdAt:R.created_at};return Z.photos.push(Y),Z.updatedAt=new Date().toISOString(),e.value[K]={...Z},Y.id}}catch(q){throw console.error("Erreur lors de l'ajout de la photo:",q),q}}async function ce(O,B){try{await Xo.deletePhoto(O,B);const q=e.value.findIndex(K=>K.id===O);if(q===-1){console.error("[NotesStore] Note non trouve pour la suppression de la photo");return}e.value[q].photos||(e.value[q].photos=[]);const F=e.value[q],R=(F.photos||[]).filter(K=>K.id!==B);e.value[q]={...F,photos:R,updatedAt:new Date().toISOString()}}catch(q){throw console.error("Erreur lors de la suppression de la photo:",q),q}}async function he(O,B,q){try{await Xo.updatePhoto(O,B,{caption:q});const F=e.value.findIndex(Z=>Z.id===O);if(F===-1||!e.value[F].photos)return;const R=e.value[F],K=R.photos.findIndex(Z=>Z.id===B);if(K===-1)return;R.photos[K].caption=q,R.updatedAt=new Date().toISOString(),e.value[F]={...R}}catch(F){throw console.error("Erreur lors de la mise  jour de la lgende:",F),F}}return{columns:t,notes:e,getColumnById:n,getColumnColor:r,getNotesByColumn:i,getDefaultColumn:s,getSortedColumns:o,getAccessibleNotes:a,getAccessibleNotesByColumn:l,getAccessLevelLabel:T,loadColumns:c,addColumn:f,updateColumn:p,addNote:m,updateNote:C,removeNote:S,moveNote:I,reorderNotes:N,addComment:j,removeComment:W,addPhoto:X,removePhoto:ce,updatePhoto:he}});class al extends pn.Marker{constructor(n,r={}){const s=`
      <div class="geo-note-marker">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
          <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${r.color||"#2b6451"}" />
        </svg>
      </div>
    `,o=pn.divIcon({html:s,className:"geo-note-icon",iconSize:[24,36],iconAnchor:[12,36]});if(!document.getElementById("geo-note-style")){const l=document.createElement("style");l.id="geo-note-style",l.textContent=`
        .geo-note-icon {
          background: none !important;
          border: none !important;
        }
        .geo-note-marker {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 100%;
          height: 100%;
          position: relative;
          transition: filter 0.2s ease-in-out;
        }
        .geo-note-marker.hover {
          filter: brightness(1.2) drop-shadow(0 0 4px rgba(59, 130, 246, 0.7));
        }
      `,document.head.appendChild(l)}super(n,{icon:o,draggable:!1,autoPan:!0,riseOnHover:!0,bubblingMouseEvents:!1,interactive:!0,keyboard:!1});Ke(this,"properties");Ke(this,"_planSaved",!1);Ke(this,"_isMoving",!1);Ke(this,"_animateZoom",()=>{});this.properties={type:"Note",name:r.name||"Note golocalise",description:r.description||"",columnId:r.columnId||"1",accessLevel:r.accessLevel||xi.PRIVATE,category:r.category||"forages",style:{color:r.color||"#2b6451",weight:r.weight||2,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity!==void 0?r.fillOpacity:.8,radius:r.radius||12},comments:[],photos:[],order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),enterprise_id:r.enterprise_id||null},this.on("dblclick",this.onDoubleClick),this.on("add",l=>{if(l.target&&l.target._map){const c=l.target._map;this._protectFromZoomAnimationErrors(c),c.on("zoomend",()=>{this.updatePosition(),this.refreshIconStyle(),this.forceVisible()}),c.on("moveend",()=>{this.updatePosition(),this.refreshIconStyle(),this.forceVisible()}),setTimeout(()=>this.forceVisible(),100)}}),window.addEventListener("geonote:updateStyle",l=>{const c=l.detail.noteId,f=this._dbId||this.properties.id;c===f&&(this.setNoteStyle(l.detail.style),this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,...l.detail.style}))}),window.addEventListener("geonote:update",l=>{const c=l.detail.noteId,f=this._dbId||this.properties.id;c===f&&(this.properties={...this.properties,name:l.detail.properties.name,description:l.detail.properties.description,columnId:l.detail.properties.columnId,accessLevel:l.detail.properties.accessLevel,style:l.detail.properties.style},this.setNoteStyle(l.detail.properties.style))}),this.on("mouseover",this.highlight),this.on("mouseout",this.unhighlight)}forceVisible(){try{const n=this.getElement();if(!n){console.warn("[GeoNote][forceVisible] lment DOM introuvable, recration de l'icne"),this.recreateIcon();return}n.style.display="block",n.style.visibility="visible",n.style.opacity="1";const r=n.querySelector(".geo-note-marker");r&&(r.style.display="flex",r.style.visibility="visible",r.style.opacity="1");const i=n.querySelector("svg");i&&(i.style.display="block",i.style.visibility="visible",i.style.opacity="1"),n.offsetHeight}catch(n){console.error("[GeoNote][forceVisible] Erreur:",n),this.recreateIcon()}}recreateIcon(){var n,r;try{const i=this.getLatLng(),o=`
        <div class="geo-note-marker" style="display: flex; visibility: visible; opacity: 1;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" style="display: block; visibility: visible; opacity: 1;">
            <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${((n=this.properties.style)==null?void 0:n.fillColor)||((r=this.properties.style)==null?void 0:r.color)||"#2b6451"}" />
          </svg>
        </div>
      `,a=pn.divIcon({html:o,className:"geo-note-icon forced-visible",iconSize:[24,36],iconAnchor:[12,36]});if(this.setIcon(a),this._map){const l=this._map.latLngToLayerPoint(i),c=this.getElement();c&&pn.DomUtil.setPosition(c,l)}if(!document.getElementById("geo-note-forced-style")){const l=document.createElement("style");l.id="geo-note-forced-style",l.textContent=`
          .forced-visible {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            pointer-events: auto !important;
          }
          .forced-visible * {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
          }
          .geo-note-marker {
            display: flex !important;
            visibility: visible !important;
            opacity: 1 !important;
          }
        `,document.head.appendChild(l)}}catch(i){console.error("[GeoNote][recreateIcon] Erreur lors de la recration de l'icne:",i)}}highlight(){const n=this.getElement();if(n){this.forceVisible(),n.style.visibility="visible",n.style.display="",n.style.opacity="1",n.style.zIndex="1000";const r=n.querySelector(".geo-note-marker");r&&r.classList.add("hover")}}unhighlight(){const n=this.getElement();if(n){this.forceVisible();const r=n.querySelector(".geo-note-marker");r&&r.classList.remove("hover"),n.style.zIndex="",n.style.visibility="visible",n.style.display="",n.style.opacity="1"}}getColumnColor(n){return{1:"#8B5CF6",2:"#F59E0B",3:"#3B82F6",4:"#10B981",5:"#6B7280"}[n]||"#6B7280"}getColumnLabel(n){return{1:"Ides",2:" faire",3:"En cours",4:"Termines",5:"Autres"}[n]||"Colonne "+n}getAccessLevelLabel(n){switch(n){case xi.PRIVATE:return"Priv";case xi.COMPANY:return"Entreprise";case xi.EMPLOYEE:return"Salaris";case xi.VISITOR:return"Visiteurs";default:return"Inconnu"}}getAccessLevelColor(n){switch(n){case xi.PRIVATE:return"#9CA3AF";case xi.COMPANY:return"#EF4444";case xi.EMPLOYEE:return"#F59E0B";case xi.VISITOR:return"#10B981";default:return"#6B7280"}}onDoubleClick(n){pn.DomEvent.stopPropagation(n),this.editNote()}editNote(){const n=this._dbId,i={id:this._leaflet_id,backendId:n,title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},columnId:this.properties.columnId||"1",accessLevel:this.properties.accessLevel||"company",style:this.properties.style||{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:this.properties.comments||[],photos:this.properties.photos||[]},s=new CustomEvent("geonote:edit",{detail:{note:i,source:this,backendId:n}});window.dispatchEvent(s),this.fire("note:edit",{note:i,source:this,backendId:n})}updateProperties(){var s;this.properties.type="Note",this.properties.category||(this.properties.category="forages"),this.properties.accessLevel||(this.properties.accessLevel=xi.PRIVATE);const n=this.properties.style||{};let r=n.color||n.fillColor;if(!r){const o=(s=this.getElement())==null?void 0:s.querySelector(".geo-note-marker svg path");if(o){const a=o.getAttribute("fill");a&&(r=a)}}r||(r="#2b6451");const i=n.radius||12;this.properties.style={...n,color:r,weight:n.weight||2,fillColor:r,fillOpacity:n.fillOpacity||.8,radius:i,_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel,category:this.properties.category}}setNoteStyle(n){const r=n.color||n.fillColor||"#2b6451",i=n.fillColor||n.color||"#2b6451",s=this.getElement();if(s)try{const l=s.querySelector("svg path");l?l.setAttribute("fill",i):this._updateIconWithNewColor(i)}catch(l){console.warn("[GeoNote][setNoteStyle] Erreur lors de la mise  jour directe du SVG:",l),this._updateIconWithNewColor(i)}else this._updateIconWithNewColor(i);const o=n._accessLevel||n.accessLevel||this.properties.accessLevel,a=n.category||this.properties.category;this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,color:r,weight:n.weight||this.properties.style.weight||2,fillColor:i,fillOpacity:n.fillOpacity!==void 0?n.fillOpacity:this.properties.style.fillOpacity||.8,radius:n.radius||this.properties.style.radius||12,_accessLevel:o,accessLevel:o,category:a}),o&&this.properties.accessLevel!==o&&(this.properties.accessLevel=o),a&&this.properties.category!==a&&(this.properties.category=a),this.refreshIconStyle()}refreshIconStyle(){const n=this.getElement();if(n&&(n.style.display="none",n.offsetHeight,n.style.display="",pn.DomUtil.setTransform(n,new pn.Point(0,0),1),this._map))try{const r=this._map.latLngToLayerPoint(this.getLatLng());pn.DomUtil.setPosition(n,r),n.style.opacity="1",n.style.transition="opacity 0.2s"}catch(r){console.warn("[GeoNote][refreshIconStyle] Erreur lors de la mise  jour de la position:",r)}}_protectFromZoomAnimationErrors(n){try{const r=this._animateZoom;this._animateZoom=function(i){try{if(!this._map||!i.center||!i.zoom){console.warn("[GeoNote][_animateZoom] Animation de zoom ignore: proprits manquantes");return}typeof this.updatePositionDuringZoom=="function"?this.updatePositionDuringZoom(i):r.call(this,i)}catch(s){console.warn("[GeoNote][_animateZoom] Erreur lors de l'animation de zoom:",s);try{const o=this.getElement();if(o&&this._map){const a=this._map.latLngToLayerPoint(this.getLatLng());pn.DomUtil.setPosition(o,a)}}catch(o){console.error("[GeoNote][_animateZoom] Erreur lors de la rcupration:",o)}}},n.on("zoomanim",i=>{this.updatePositionDuringZoom(i)})}catch(r){console.error("[GeoNote][_protectFromZoomAnimationErrors] Erreur lors de la mise en place de la protection:",r)}}_updateIconWithNewColor(n){try{const r=this._map;let i=!1;r&&(i=r.options.zoomAnimation||!1,r.options.zoomAnimation=!1);const s=`
        <div class="geo-note-marker">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
            <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${n}" />
          </svg>
        </div>
      `,o=pn.divIcon({html:s,className:"geo-note-icon",iconSize:[24,36],iconAnchor:[12,36]});this.setIcon(o),r&&i&&setTimeout(()=>{r.options.zoomAnimation=!0},100)}catch(r){console.error("[GeoNote][_updateIconWithNewColor] Erreur lors de la mise  jour de l'icne:",r)}}toBackendFormat(n){this.updateProperties();const r=this.getLatLng(),s={...{...this.properties.style,radius:this.properties.style.radius||12},_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel},o=this.properties.columnId||"1";return{id:n,type_forme:"Note",data:{location:{type:"Point",coordinates:[r.lng,r.lat]},name:this.properties.name,description:this.properties.description,columnId:o,accessLevel:this.properties.accessLevel,category:this.properties.category||"forages",style:s,comments:this.properties.comments||[],photos:this.properties.photos||[],order:this.properties.order||0,createdAt:this.properties.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()}}}updateFromBackendData(n){var l,c,f;this.properties.type="Note";const r=n.style?{...n.style,radius:n.style.radius||12}:this.properties.style,i=((l=n.style)==null?void 0:l._accessLevel)||((c=n.style)==null?void 0:c.accessLevel)||n.accessLevel||this.properties.accessLevel||xi.PRIVATE,s=((f=n.style)==null?void 0:f.category)||n.category||this.properties.category||"forages",o=n.columnId||this.properties.columnId||"1",a={...r,_accessLevel:i,accessLevel:i,category:s};this.properties={...this.properties,name:n.name||this.properties.name,description:n.description||this.properties.description,columnId:o,accessLevel:i,category:s,style:a,comments:n.comments||this.properties.comments||[],photos:n.photos||this.properties.photos||[],order:n.order||this.properties.order||0,createdAt:n.createdAt||this.properties.createdAt,updatedAt:n.updatedAt||new Date().toISOString()},this.setNoteStyle(a)}static fromBackendData(n){var l,c,f,p,v,m,C,S;let r;if(typeof n.location=="object"&&!Array.isArray(n.location)&&n.location.type==="Point"){const I=n.location.coordinates;r=[I[1],I[0]]}else if(Array.isArray(n.location)&&n.location.length===2)r=n.location;else throw new Error("Les donnes de la note ne contiennent pas de position valide");const i=((l=n.style)==null?void 0:l._accessLevel)||((c=n.style)==null?void 0:c.accessLevel)||n.accessLevel||xi.PRIVATE,s=((f=n.style)==null?void 0:f.category)||n.category||"forages";n.accessLevel=i,n.category=s;const o=n.columnId||"1",a=new al(r,{name:n.name,description:n.description,columnId:o,accessLevel:i,category:n.category||"forages",color:(p=n.style)==null?void 0:p.color,weight:(v=n.style)==null?void 0:v.weight,fillColor:(m=n.style)==null?void 0:m.fillColor,fillOpacity:(C=n.style)==null?void 0:C.fillOpacity,radius:(S=n.style)==null?void 0:S.radius});return a.properties.type="Note",a.properties.comments=n.comments||[],a.properties.photos=n.photos||[],a.properties.order=n.order||0,a.properties.createdAt=n.createdAt||new Date().toISOString(),a.properties.updatedAt=n.updatedAt||new Date().toISOString(),n.style&&a.setNoteStyle(n.style),a}async saveNote(n){var r,i,s;if(this._planSaved)return this._dbId||0;try{this.updateProperties();let o=((r=this.properties.style)==null?void 0:r.color)||"#2b6451";if(o.startsWith("rgb")){const f=(i=this.getElement())==null?void 0:i.querySelector(".geo-note-marker svg path");if(f){const p=f.getAttribute("fill");p&&(o=p)}}const a={...this.properties.style,color:o,fillColor:o,_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel,category:this.properties.category},l={title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},column:this.properties.columnId||"1",access_level:this.properties.accessLevel||"company",style:a,category:this.properties.category||"forages",comments:this.properties.comments||[],photos:this.properties.photos||[]};if(this.properties.enterprise_id)l.enterprise_id=this.properties.enterprise_id;else{const f=eo();!f.isAdmin&&((s=f.user)!=null&&s.enterprise_id)&&(l.enterprise_id=f.user.enterprise_id)}n&&(l.plan=n);let c;return this._dbId?c=(await Xo.updateNote(this._dbId,l)).data:(c=(await Xo.createNote(l)).data,this._dbId=c.id,hd().addNote({...c,id:c.id,columnId:c.column,accessLevel:c.access_level})),this._planSaved=!0,c.id}catch(o){return console.error("[GeoNote][saveNote] Erreur lors de la sauvegarde de la note:",o),Gl().error("Erreur lors de la sauvegarde de la note"),0}}triggerPlanSave(){const n=localStorage.getItem("lastPlanId");n?this.saveNote(parseInt(n)):this.saveNote();const r=new CustomEvent("geonote:savePlan");window.dispatchEvent(r)}resetPlanSaveState(){this._planSaved=!1}moveTo(n){this.setLatLng(n),this.fire("note:moved",{latlng:n,note:this}),this.triggerPlanSave()}startMoving(){this._isMoving=!0,this.fire("note:movestart",{latlng:this.getLatLng(),note:this})}finishMoving(){this._isMoving=!1,this.fire("note:moveend",{latlng:this.getLatLng(),note:this}),this.triggerPlanSave()}isMoving(){return this._isMoving}updatePositionDuringZoom(n){try{if(!this._map||!n.center||n.zoom===void 0)return;const r=this.getElement();if(!r)return;r.style.opacity="0",r.style.transition="opacity 0.01s"}catch(r){console.warn("[GeoNote][updatePositionDuringZoom] Erreur lors de la gestion de l'animation de zoom:",r)}}updatePosition(){try{if(!this._map)return;const n=this.getElement();if(!n){console.warn("[GeoNote][updatePosition] lment DOM introuvable, recration de l'icne"),this.recreateIcon();return}const r=this._map.latLngToLayerPoint(this.getLatLng());pn.DomUtil.setPosition(n,r),n.style.opacity="1",n.style.transition="opacity 0.2s",n.style.visibility="visible",n.style.display="block";const i=n.getBoundingClientRect();i.width===0||i.height===0?(console.warn("[GeoNote][updatePosition] L'lment a une taille nulle, recration de l'icne"),this.recreateIcon()):setTimeout(()=>this.forceVisible(),50)}catch(n){console.warn("[GeoNote][updatePosition] Erreur lors de la mise  jour de la position:",n),this.recreateIcon()}}}function _j(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function wj(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function t5(t){var e,n,r,i,s,o,a,l,c,f,p,v,m,C,S,I,N,T,j;if(((e=t.properties)==null?void 0:e.type)==="Note"){const W=t.getLatLng();return{type_forme:"Note",data:{points:[[W.lng,W.lat]],style:{color:((n=t.properties.style)==null?void 0:n.color)||"#2b6451",weight:((r=t.properties.style)==null?void 0:r.weight)||3,opacity:((i=t.properties.style)==null?void 0:i.opacity)||1,fillColor:((s=t.properties.style)==null?void 0:s.fillColor)||"#2b6451",fillOpacity:((o=t.properties.style)==null?void 0:o.fillOpacity)||.2,name:((a=t.properties.style)==null?void 0:a.name)||""}}}}if(t instanceof Fl||((l=t.properties)==null?void 0:l.type)==="Polygon")return{type_forme:"Polygon",data:{points:t.getLatLngs()[0].map(ce=>[ce.lng,ce.lat]),style:{color:((c=t.properties.style)==null?void 0:c.color)||"#2b6451",weight:((f=t.properties.style)==null?void 0:f.weight)||3,opacity:((p=t.properties.style)==null?void 0:p.opacity)||1,fillColor:((v=t.properties.style)==null?void 0:v.fillColor)||"#2b6451",fillOpacity:((m=t.properties.style)==null?void 0:m.fillOpacity)||.2,name:((C=t.properties.style)==null?void 0:C.name)||""},category:t.properties.category||"forages",accessLevel:t.properties.accessLevel||"visitor"}};if(t instanceof _s||((S=t.properties)==null?void 0:S.type)==="Line")return{type_forme:"Line",data:{points:t.getLatLngs().map(ce=>[ce.lng,ce.lat]),category:t.properties.category||"forages",accessLevel:t.properties.accessLevel||"visitor",style:{color:((I=t.properties.style)==null?void 0:I.color)||"#2b6451",weight:((N=t.properties.style)==null?void 0:N.weight)||3,opacity:((T=t.properties.style)==null?void 0:T.opacity)||1,name:((j=t.properties.style)==null?void 0:j.name)||""}}};throw new Error("Type de forme non reconnu")}function xj(t){var e,n,r,i,s,o,a,l,c,f,p,v,m,C,S,I,N;switch(t.type_forme){case"Polygon":{const T=t.data;if(!_j(T))return console.error("[DrawingStore] Donnes invalides pour Polygon"),null;const j=T.points.map(ce=>ns.latLng(ce[1],ce[0])),W=((e=T.style)==null?void 0:e._accessLevel)||((n=T.style)==null?void 0:n.accessLevel)||T.accessLevel||"visitor";T.accessLevel=W;const X=new Fl([j],{color:((r=T.style)==null?void 0:r.color)||"#2b6451",weight:((i=T.style)==null?void 0:i.weight)||3,opacity:((s=T.style)==null?void 0:s.opacity)||1,fillColor:((o=T.style)==null?void 0:o.fillColor)||"#2b6451",fillOpacity:((a=T.style)==null?void 0:a.fillOpacity)||.2,dashArray:((l=T.style)==null?void 0:l.dashArray)||"",name:((c=T.style)==null?void 0:c.name)||"",category:T.category||"forages",accessLevel:W});return X.updateProperties(),X}case"Line":{const T=t.data;if(!wj(T))return console.error("[DrawingStore] Donnes invalides pour Ligne"),null;const j=T.points.map(ce=>ns.latLng(ce[1],ce[0])),W=((f=T.style)==null?void 0:f._accessLevel)||((p=T.style)==null?void 0:p.accessLevel)||T.accessLevel||"visitor";T.accessLevel=W;const X=new _s(j,{...T.style||{},name:((v=T.style)==null?void 0:v.name)||"",category:T.category||"forages",accessLevel:W});return X.updateProperties(),X}case"Note":{const T=t.data;if(!T.location)return console.error("[DrawingStore] Donnes invalides pour Note"),null;try{const j={location:T.location,name:T.name||"Note golocalise",description:T.description||"",columnId:T.columnId||"en-cours",accessLevel:T.accessLevel||"private",category:T.category||"forages",style:{color:((m=T.style)==null?void 0:m.color)||"#2b6451",weight:((C=T.style)==null?void 0:C.weight)||2,fillColor:((S=T.style)==null?void 0:S.fillColor)||"#2b6451",fillOpacity:((I=T.style)==null?void 0:I.fillOpacity)||.8,radius:((N=T.style)==null?void 0:N.radius)||12},comments:T.comments||[],photos:T.photos||[],order:T.order||0,createdAt:T.createdAt||new Date().toISOString(),updatedAt:T.updatedAt||new Date().toISOString()},W=al.fromBackendData(j);return W._dbId=t.id,W}catch(j){return console.error("[DrawingStore] Erreur lors de la cration de la Note:",j),null}}default:return console.warn("[DrawingStore] Type non gr pour la restauration:",t.type_forme),null}}const l0=Mp("drawing",{state:()=>({currentMapId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",filters:{accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,Note:!0}},currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null}),getters:{hasUnsavedChanges:t=>t.unsavedChanges,getCurrentElements:t=>t.elements,getSelectedElement:t=>t.selectedElement,getCurrentTool:t=>t.currentTool,getCurrentStyle:t=>t.currentStyle,getLastUsedType:t=>t.lastUsedType,getFilters:t=>t.filters,getFilteredElements:t=>t.elements.length===0?[]:t.elements.filter(n=>{var l,c;if(!(n.type_forme in t.filters.shapeTypes?t.filters.shapeTypes[n.type_forme]:!0))return!1;const i=((l=n.data)==null?void 0:l.category)||"default";if(!(i in t.filters.categories?t.filters.categories[i]:!0))return!1;const o=((c=n.data)==null?void 0:c.accessLevel)||"visitor";let a=!0;return o==="company"?a=t.filters.accessLevels.company:o==="employee"?a=t.filters.accessLevels.employee:o==="visitor"&&(a=t.filters.accessLevels.visitor),!!a})},actions:{setCurrentPlan(t){window.dispatchEvent(new CustomEvent("clearControlPoints")),this.currentMapId=t,t===null&&this.clearElements(),this.selectedElement=null,this.unsavedChanges=!1,this.currentTool="",this.lastUsedType=null,this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},this.filters={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,Note:!0}}},clearCurrentPlan(){(this.currentMapId!==null||this.elements.length>0)&&(this.currentMapId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null)},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.error=null},addElement(t){if(t instanceof ns.Layer&&t.properties){const e=t5(t);this.elements.push(e)}else!t.type_forme&&this.lastUsedType&&(t.type_forme=this.lastUsedType),this.elements.push(t);this.unsavedChanges=!0},updateElement(t){const e=this.elements.findIndex(n=>n.id===t.id);if(e!==-1){const n=this.elements[e].type_forme;this.elements[e]={...t,type_forme:n},this.unsavedChanges=!0}},removeElement(t){const e=this.elements.findIndex(n=>n.id===t);e!==-1&&(this.elements.splice(e,1),this.unsavedChanges=!0)},selectElement(t){this.selectedElement=t},setCurrentTool(t){this.currentTool=t,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE"].includes(t)&&(this.lastUsedType=t)},setCurrentStyle(t){if(!t||Object.keys(t).length===0){this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2};return}this.currentStyle={...this.currentStyle,...t}},updateFilters(t){if(t.accessLevels&&({...this.filters.accessLevels},this.filters.accessLevels={...this.filters.accessLevels,...t.accessLevels}),t.categories){const e={...this.filters.categories};this.filters.categories={...this.filters.categories,...t.categories};const n=Object.keys(t.categories).filter(r=>e[r]!==this.filters.categories[r]);if(n.length>0){const r=n.filter(i=>e[i]===!1&&this.filters.categories[i]===!0);r.length>0&&window.dispatchEvent(new CustomEvent("categoriesReactivated",{detail:{categories:r}}))}}if(t.shapeTypes){const e={...this.filters.shapeTypes};this.filters.shapeTypes={...this.filters.shapeTypes,...t.shapeTypes};const n=Object.keys(t.shapeTypes).filter(r=>e[r]!==this.filters.shapeTypes[r]);if(n.length>0){const r=n.filter(i=>e[i]===!1&&this.filters.shapeTypes[i]===!0);r.length>0&&window.dispatchEvent(new CustomEvent("shapeTypesReactivated",{detail:{shapeTypes:r}}))}}window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:this.filters}}))},async loadPlanElements(t){if(this.currentMapId===t&&this.elements.length>0)return this.elements;this.loading=!0;try{const n=(await En.get(`/plans/${t}/`)).data;return this.elements=n.formes.map(r=>{if(r.type_forme)return{id:r.id,type_forme:r.type_forme,data:r.data||{}};try{const i=xj(r);if(i)return t5(i)}catch(i){console.error("Erreur lors de la conversion de la forme",{error:i,id:r.id,type:r.type_forme})}return r}),this.currentMapId=t,this.unsavedChanges=!1,n.preferences&&(n.preferences.currentTool&&this.setCurrentTool(n.preferences.currentTool),n.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...n.preferences.currentStyle}),n.preferences.lastUsedType&&(this.lastUsedType=n.preferences.lastUsedType)),this.elements}catch(e){throw console.error("Erreur lors du chargement des lments:",e),this.error="Erreur lors du chargement des lments du plan",e}finally{this.loading=!1}},async saveToPlan(t,e){this.loading=!0;try{const n=t||this.currentMapId;if(!n)throw new Error("Aucun plan slectionn pour la sauvegarde");const r=this.elements.map(l=>({...l,type_forme:l.type_forme||this.lastUsedType})),i=(e==null?void 0:e.elementsToDelete)||[],s=`/plans/${n}/save_with_elements/`,o=await En.post(s,{formes:r,connexions:[],annotations:[],elementsToDelete:i,preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}}),a=new Set(i);return this.elements=o.data.formes.filter(l=>!a.has(l.id)).map(l=>({...l,type_forme:l.type_forme})),this.unsavedChanges=!1,o.data}catch(n){throw console.error("Erreur lors de la sauvegarde du plan:",n),this.error="Erreur lors de la sauvegarde du plan",n}finally{this.loading=!1}}}}),mE=Mp("mapFilters",{state:()=>({filters:[],loading:!1,error:null}),getters:{getFilterById:t=>e=>t.filters.find(n=>n.id===e),getFiltersByCategory:t=>e=>t.filters.filter(n=>n.category===e),getUniqueCategories:t=>{const e=new Set;return t.filters.forEach(n=>e.add(n.category)),Array.from(e)}},actions:{async initializeStore(){await this.fetchFilters()},async fetchFilters(){const t=Gl();this.loading=!0,this.error=null;try{const e=await hm.getFilters();return this.filters=e.data,this.filters}catch(e){throw this.error="Erreur lors du chargement des filtres",t.error("Impossible de charger les filtres de carte"),console.error("[MapFilterStore] Erreur lors du chargement des filtres:",e),e}finally{this.loading=!1}},async createFilter(t){this.loading=!0,this.error=null;try{const e=await hm.createFilter(t);return this.filters.push(e.data),e.data}catch(e){throw this.error="Erreur lors de la cration du filtre",console.error("[MapFilterStore] Erreur lors de la cration du filtre:",e),e}finally{this.loading=!1}},async updateFilter(t,e){this.loading=!0,this.error=null;try{const n=await hm.updateFilter(t,e),r=this.filters.findIndex(i=>i.id===t);return r!==-1&&(this.filters[r]=n.data),n.data}catch(n){throw this.error="Erreur lors de la mise  jour du filtre",console.error("[MapFilterStore] Erreur lors de la mise  jour du filtre:",n),n}finally{this.loading=!1}},async deleteFilter(t){this.loading=!0,this.error=null;try{return await hm.deleteFilter(t),this.filters=this.filters.filter(e=>e.id!==t),!0}catch(e){throw this.error="Erreur lors de la suppression du filtre",console.error("[MapFilterStore] Erreur lors de la suppression du filtre:",e),e}finally{this.loading=!1}}}}),My=Mp("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[]}),getters:{getPlanById:t=>e=>t.plans.find(n=>n.id===e),hasUnsavedChanges:t=>t.unsavedChanges,getCurrentPlanHistory:t=>t.planHistory},actions:{async fetchPlans(){var e,n;const t=eo();this.loading=!0;try{let r="/plans/";const i={};t.isSalarie?i.salarie=(e=t.user)==null?void 0:e.id:t.isVisiteur&&(i.visiteur=(n=t.user)==null?void 0:n.id);const s=await En.get(r,{params:i});this.plans=s.data}catch(r){throw this.error="Erreur lors du chargement des plans",r}finally{this.loading=!1}},async fetchPlansWithDetails(){var e,n;const t=eo();this.loading=!0;try{let r="/plans/";const i={include_details:!0};t.isSalarie?i.salarie=(e=t.user)==null?void 0:e.id:t.isVisiteur&&(i.visiteur=(n=t.user)==null?void 0:n.id);const o=(await En.get(r,{params:i})).data.map(a=>({...a,entreprise:typeof a.entreprise=="object"?a.entreprise:null,salarie:typeof a.salarie=="object"?a.salarie:null,visiteur:typeof a.visiteur=="object"?a.visiteur:null}));return this.plans=o,{data:o}}catch(r){throw console.error("[IrrigationStore] Error fetching plans:",r),this.error="Erreur lors du chargement des plans",r}finally{this.loading=!1}},async fetchClientPlans(t){this.loading=!0;try{return(await cm.getVisiteurPlans(t)).data}catch(e){throw this.error="Erreur lors du chargement des plans du client",e}finally{this.loading=!1}},async createPlan(t){var n;this.clearCurrentPlan(),this.loading=!0;const e=Gl();try{const r=eo();((n=r.user)==null?void 0:n.user_type)==="visiteur"&&(t={...t,visiteur:r.user.id,salarie_id:r.user.enterprise_id,entreprise_id:r.user.enterprise_id});const i={...t,entreprise:t.entreprise?typeof t.entreprise=="object"&&t.entreprise&&"id"in t.entreprise?t.entreprise.id:Number(t.entreprise):null,salarie:t.salarie?typeof t.salarie=="object"&&t.salarie&&"id"in t.salarie?t.salarie.id:Number(t.salarie):null,visiteur:t.visiteur?typeof t.visiteur=="object"&&t.visiteur&&"id"in t.visiteur?t.visiteur.id:Number(t.visiteur):null},s=await cm.createPlan(i);return this.plans.push(s.data),e.success(`Le plan "${s.data.nom}" a t cr avec succs`),s.data}catch(r){const i=r instanceof Error?r.message:String(r);throw console.error("Error creating plan:",i),this.error=i,e.error(`Erreur lors de la cration du plan : ${i}`),r}finally{this.loading=!1}},async createPlanForClient(t,e){this.clearCurrentPlan(),this.loading=!0;try{const n={...t,visiteur:e},r=await cm.createPlanForVisiteur(n);return this.plans.push(r.data),r.data}catch(n){const r=n instanceof Error?n.message:String(n);throw console.error("Error creating plan for client:",r),this.error="Erreur lors de la cration du plan pour le client",n}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(t){var e,n;if(this.unsavedChanges){this.loading=!0;try{const r=await En.patch(`/plans/${t}/`,{...this.currentPlan,version:((e=this.currentPlan)==null?void 0:e.version)||1}),i=this.plans.findIndex(s=>s.id===t);return i!==-1&&(this.plans[i]=r.data),((n=this.currentPlan)==null?void 0:n.id)===t&&(this.currentPlan=r.data),this.unsavedChanges=!1,r.data}catch(r){throw console.error("[IrrigationStore][savePlan] ERREUR:",r),this.error="Erreur lors de la sauvegarde du plan",r}finally{this.loading=!1}}},async updatePlanDetails(t,e){const n=Gl();try{const{visiteur_id:r,salarie_id:i,entreprise_id:s,...o}=e,a={...o};r!==void 0&&(a.visiteur_id=r),i!==void 0&&(a.salarie_id=i),s!==void 0&&(a.entreprise_id=s);const l=await En.patch(`/plans/${t}/`,a);this.currentPlan&&this.currentPlan.id===t&&(this.currentPlan={...this.currentPlan,...l.data});const c=this.plans.findIndex(f=>f.id===t);return c!==-1&&(this.plans[c]={...this.plans[c],...l.data}),l.data}catch(r){throw console.error("Erreur lors de la mise  jour du plan:",r),n.error(`Erreur lors de la mise  jour du plan : ${r instanceof Error?r.message:String(r)}`),r}},async fetchPlanHistory(t){this.loading=!0;try{const e=await En.get(`/plans/${t}/historique/`);return this.planHistory=e.data,e.data}catch(e){throw this.error="Erreur lors de la rcupration de l'historique",e}finally{this.loading=!1}},async restorePlanVersion(t,e){var n;this.loading=!0;try{const r=await En.post(`/plans/${t}/restaurer/`,{version_id:e});((n=this.currentPlan)==null?void 0:n.id)===t&&(this.currentPlan=r.data);const i=this.plans.findIndex(s=>s.id===t);return i!==-1&&(this.plans[i]=r.data),r.data}catch(r){throw this.error="Erreur lors de la restauration de la version",r}finally{this.loading=!1}},setCurrentPlan(t){this.currentPlan=t,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.unsavedChanges=!1,this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(t){var n;this.loading=!0;const e=Gl();try{const r=this.plans.find(i=>i.id===t);await cm.deletePlan(t),this.plans=this.plans.filter(i=>i.id!==t),((n=this.currentPlan)==null?void 0:n.id)===t&&this.clearCurrentPlan(),e.success(`Le plan "${(r==null?void 0:r.nom)||""}" a t supprim avec succs`)}catch(r){throw this.error="Erreur lors de la suppression du plan",e.error(`Erreur lors de la suppression du plan : ${r instanceof Error?r.message:String(r)}`),r}finally{this.loading=!1}}}}),Lj={class:"hidden md:hidden flex-mobile items-center justify-between p-4 border-b border-gray-200"},Cj={class:"flex-1 flex flex-col overflow-hidden"},Sj={class:"border-b border-gray-200"},Ej={class:"flex -mb-px"},Pj={class:"flex-1 overflow-hidden flex flex-col"},kj={key:0,class:"tab-content"},Mj={class:"grid grid-cols-3 gap-1.5 mb-4"},Aj=["onClick","title"],Tj=["innerHTML"],Oj={key:0,class:"grid grid-cols-2 gap-2 mt-2 mb-2"},Dj={key:2,class:"my-4 border-t border-gray-200"},Ij={key:3,class:"mt-4"},Nj={key:0,class:"mb-4"},Bj={class:"mb-4"},Rj=["value"],Fj={class:"mb-4"},jj={class:"grid grid-cols-1 gap-4"},zj={key:0,class:"space-y-1"},Uj={class:"flex justify-between items-center"},$j={class:"text-sm font-medium text-gray-500"},Vj={class:"flex justify-between items-center"},Hj={class:"text-sm font-medium text-gray-500"},Gj={class:"text-sm font-medium text-gray-500"},Wj={key:1,class:"tab-content"},qj={class:"grid grid-cols-6 gap-2 mb-4"},Yj=["onClick","title"],Kj={class:"space-y-4"},Zj={class:"flex items-center gap-4"},Xj={class:"flex items-center gap-2"},Jj={class:"flex items-center gap-4"},Qj=["value"],ez={key:0,class:"flex items-center gap-4"},tz={class:"flex items-center gap-2"},nz={key:2,class:"tab-content filters-tab"},rz={class:"filters-content"},iz={class:"space-y-2"},sz={class:"space-y-2 mt-4"},oz={class:"space-y-1"},az={class:"flex items-center"},lz={class:"flex items-center"},uz={class:"flex items-center"},cz={class:"flex items-center"},hz={class:"flex items-center"},fz={class:"flex items-center"},dz={key:0,class:"flex items-center"},pz=["onUpdate:modelValue"],gz={class:"ml-2 text-sm text-gray-700"},mz={key:0,class:"mt-2 pt-2 border-t border-gray-200"},vz={class:"flex space-x-2"},yz=["disabled"],bz={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},_z={key:1,class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},wz={class:"space-y-2 mt-4"},xz={class:"space-y-1"},Lz={class:"flex items-center"},Cz={class:"flex items-center"},Sz={class:"flex items-center"},Ez=hs({__name:"DrawingTools",props:{show:{type:Boolean,default:!1},selectedTool:{type:String,default:""},selectedShape:{type:Object,default:null},allLayers:{type:Array,default:()=>[]},isDrawing:{type:Boolean,default:!1}},emits:["update:show","tool-selected","style-update","properties-update","delete-shape","filter-change","close-drawer"],setup(t,{emit:e}){const n=t,r=l0(),i=eo(),s=Hn(()=>i.isAdmin),o=Hn(()=>i.isEntreprise),a=mE(),l=My(),c=mu({name:""}),f=bt(!1),p=bt(["forages","clients","entrepots","livraisons","cultures","parcelles"]),v=[{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"Note",label:"Note golocalise"}],m=le=>{switch(le){case"Polygon":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5l16 0l0 14l-16 0l0 -14z"/></svg>';case"Line":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 20l16 -16"/></svg>';case"Note":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 11c1.38 0 2.5-1.12 2.5-2.5S13.38 6 12 6s-2.5 1.12-2.5 2.5S10.62 11 12 11z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"/><ellipse cx="12" cy="22" rx="4" ry="1.5" stroke-width="2.5" fill="currentColor" fill-opacity="0.2"/></svg>';default:return""}},C=bt("tools");li(C,(le,ae)=>{le==="filters"&&ae!=="filters"&&(n.selectedShape&&fe("tool-selected",""),setTimeout(()=>{ee()},0)),ae==="filters"&&le!=="filters"&&ee()});const S=bt("#2b6451"),I=bt(2),N=bt("solid"),T=bt("#2b6451"),j=bt(.2),W=bt(!0),X=bt(""),ce=bt("default"),he=bt("visitor"),O=["#2b6451","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],B=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointills"}],q=bt("company"),F=mu({accessLevels:{company:!0,employee:!1,visitor:!1},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,Note:!0}}),R=le=>{q.value=le,le==="company"?(F.accessLevels.company=!0,F.accessLevels.employee=!1,F.accessLevels.visitor=!1):le==="employee"?(F.accessLevels.company=!1,F.accessLevels.employee=!0,F.accessLevels.visitor=!1):le==="visitor"&&(F.accessLevels.company=!1,F.accessLevels.employee=!1,F.accessLevels.visitor=!0),ee()},K=le=>{n.selectedShape&&fe("tool-selected",""),R(le)},Z=Hn(()=>n.selectedShape&&n.selectedShape.properties||null),Y=le=>{S.value=le,T.value=le,k({strokeColor:le,fillColor:le})},k=le=>{n.selectedShape&&fe("style-update",le)},U=()=>{n.selectedShape&&fe("properties-update",{name:X.value})},H=()=>{n.selectedShape&&fe("properties-update",{category:ce.value})},ue=()=>{n.selectedShape&&fe("properties-update",{accessLevel:he.value})},_e=()=>{const le={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,Note:!0}};F.accessLevels.company=!0,F.accessLevels.employee=!0,F.accessLevels.visitor=!0,F.categories.forages=!0,F.categories.clients=!0,F.categories.entrepots=!0,F.categories.livraisons=!0,F.categories.cultures=!0,F.categories.parcelles=!0,F.shapeTypes.Polygon=!0,F.shapeTypes.Line=!0,F.shapeTypes.Note=!0,r.updateFilters(le),fe("filter-change",le)},Ie=()=>{ve(),_e()},ee=()=>{const le={...F.accessLevels},ae={...F.categories},de={...F.shapeTypes},re={accessLevels:le,categories:ae,shapeTypes:de};r.updateFilters(re),fe("filter-change",re),setTimeout(()=>{window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:re}}))},0)},te=le=>`${Math.round(le)} m`,oe=le=>le>=1e4?`${(le/1e4).toFixed(2)} ha`:`${Math.round(le)} m`,ge=le=>p.value.includes(le)?le:le.split("_").map(ae=>ae.charAt(0).toUpperCase()+ae.slice(1)).join(" "),ve=()=>{n.selectedShape&&fe("tool-selected","")};async function ye(){var le,ae;if(!(!c.name||f.value)){f.value=!0;try{const de=c.name.toLowerCase().replace(/\s+/g,"_"),re=l.currentPlan;let Ae=null;if(re!=null&&re.entreprise_id?Ae=re.entreprise_id:re!=null&&re.entreprise&&typeof re.entreprise=="object"&&"id"in re.entreprise?Ae=re.entreprise.id:(le=i.user)!=null&&le.enterprise_id?Ae=i.user.enterprise_id:i.isEntreprise&&((ae=i.user)!=null&&ae.id)&&(Ae=i.user.id),!Ae)return;const Ge=await a.createFilter({name:c.name,category:de,entreprise:Ae});F.categories[de]||(F.categories[de]=!0);const tt={...r.filters.categories};tt[de]=!0,r.updateFilters({categories:tt}),fe("filter-change",F),c.name=""}catch{}finally{f.value=!1}}}const pe=()=>{ve(),C.value="filters"},fe=e;t0(()=>{var le,ae,de,re;if(n.selectedShape){const Ae=n.selectedShape.options||{};S.value=Ae.color||"#2b6451",I.value=Ae.weight||3,N.value=Ae.dashArray?"dashed":"solid",T.value=Ae.fillColor||"#2b6451",j.value=Ae.fillOpacity||.2;const Ge=n.selectedShape.type||((le=n.selectedShape.properties)==null?void 0:le.type)||"";W.value=Ge!=="Line",X.value=((ae=n.selectedShape.properties)==null?void 0:ae.name)||"",ce.value=((de=n.selectedShape.properties)==null?void 0:de.category)||"forages",he.value=((re=n.selectedShape.properties)==null?void 0:re.accessLevel)||"visitor"}}),zs(async()=>{const le=r.filters;F.accessLevels.company=le.accessLevels.company,F.accessLevels.employee=le.accessLevels.employee,F.accessLevels.visitor=le.accessLevels.visitor,F.categories.forages=le.categories.forages,F.categories.clients=le.categories.clients,F.categories.entrepots=le.categories.entrepots,F.categories.livraisons=le.categories.livraisons,F.categories.cultures=le.categories.cultures,F.categories.parcelles=le.categories.parcelles,F.shapeTypes.Polygon=le.shapeTypes.Polygon,F.shapeTypes.Line=le.shapeTypes.Line,F.shapeTypes.Note=le.shapeTypes.Note;try{await a.fetchFilters();const ae=a.getUniqueCategories,de=[];ae.forEach(re=>{!p.value.includes(re)&&!F.categories[re]&&(F.categories[re]=!0,de.push(re))}),de.length>0&&(r.updateFilters({categories:F.categories}),fe("filter-change",F))}catch{}}),li(F,(le,ae)=>{const de=Object.keys(le.accessLevels).filter(Ge=>ae.accessLevels[Ge]!==le.accessLevels[Ge]),re=Object.keys(le.categories).filter(Ge=>ae.categories[Ge]!==le.categories[Ge]),Ae=Object.keys(le.shapeTypes).filter(Ge=>ae.shapeTypes[Ge]!==le.shapeTypes[Ge]);de.length>0||re.length>0||Ae.length>0,C.value==="filters"&&ee()},{deep:!0});const $e=le=>{fe("tool-selected",n.selectedTool===le?"":le),window.innerWidth<768&&fe("update:show",!1)},Ne=()=>{var le;if(fe("update:show",!1),n.selectedShape&&((le=n.selectedShape.properties)==null?void 0:le.type)==="Note"){const ae=n.selectedShape.layer;ae&&typeof ae.editNote=="function"&&ae.editNote()}},ot=()=>{var le;if(fe("update:show",!1),n.selectedShape&&((le=n.selectedShape.properties)==null?void 0:le.type)==="Note"){const ae=n.selectedShape.layer;ae&&typeof ae.openInGoogleMaps=="function"&&ae.openInGoogleMaps()}};return(le,ae)=>{var de,re;return Me(),De("div",{class:bi(["drawing-tools-panel",{open:t.show}])},[E("div",Lj,[ae[30]||(ae[30]=E("div",{class:"flex items-center"},[E("div",{class:"w-10 h-1.5 bg-gray-300 rounded-full mr-3"}),E("h3",{class:"text-sm font-semibold text-gray-700"},"Outils")],-1)),E("button",{onClick:ae[0]||(ae[0]=Ae=>le.$emit("update:show",!1)),class:"p-1.5 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors"},ae[29]||(ae[29]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("div",Cj,[E("div",Sj,[E("nav",Ej,[E("button",{onClick:ae[1]||(ae[1]=Ae=>C.value="tools"),class:bi([C.value==="tools"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},ae[31]||(ae[31]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),E("span",null,"Outils",-1)]),2),t.selectedShape&&((de=t.selectedShape.properties)==null?void 0:de.type)!=="Note"?(Me(),De("button",{key:0,onClick:ae[2]||(ae[2]=Ae=>C.value="style"),class:bi([C.value==="style"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},ae[32]||(ae[32]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})],-1),E("span",null,"Style",-1)]),2)):Ht("",!0),E("button",{onClick:pe,class:bi([C.value==="filters"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},ae[33]||(ae[33]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1),E("span",null,"Filtres",-1)]),2)])]),E("div",Pj,[C.value==="tools"?(Me(),De("div",kj,[E("div",Mj,[(Me(!0),De(gn,null,Vn(v.filter(Ae=>Ae.type!=="delete"),Ae=>(Me(),De("button",{key:Ae.type,class:bi(["flex items-center justify-center p-2 rounded-md border transition-all duration-200",{"bg-primary-50 border-primary-500 text-primary-600":n.selectedTool===Ae.type,"hover:bg-gray-50 border-gray-300 text-gray-700":n.selectedTool!==Ae.type}]),onClick:Ge=>$e(Ae.type),title:Ae.label},[E("span",{class:"icon",innerHTML:m(Ae.type)},null,8,Tj)],10,Aj))),128))]),t.selectedShape&&Z.value&&Z.value.type==="Note"?(Me(),De("div",Oj,[E("button",{class:"p-2 rounded-md border border-primary-200 bg-primary-50 text-primary-600 hover:bg-primary-100 flex items-center justify-center",onClick:Ne,title:"diter la note"},ae[34]||(ae[34]=[E("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),E("span",{class:"text-sm"},"diter",-1)])),E("button",{class:"p-2 rounded-md border border-blue-200 bg-blue-50 text-blue-600 hover:bg-blue-100 flex items-center justify-center",onClick:ot,title:"Obtenir l'itinraire"},ae[35]||(ae[35]=[E("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1),E("span",{class:"text-sm"},"Itinraire",-1)]))])):Ht("",!0),t.selectedShape?(Me(),De("button",{key:1,class:bi(["w-full mt-2 p-2 rounded-md border border-red-200 bg-red-50 text-red-600 hover:bg-red-100 flex items-center justify-center",{"bg-red-100":n.selectedTool==="delete"}]),onClick:ae[3]||(ae[3]=Ae=>le.$emit("delete-shape")),title:"Supprimer la forme"},ae[36]||(ae[36]=[E("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),E("span",{class:"text-sm"},"Supprimer",-1)]),2)):Ht("",!0),t.selectedShape&&Z.value?(Me(),De("div",Dj)):Ht("",!0),t.selectedShape&&Z.value?(Me(),De("div",Ij,[Z.value.type!=="Note"?(Me(),De("div",Nj,[ae[37]||(ae[37]=E("label",{for:"shapeName",class:"block text-sm font-medium text-gray-700 mb-1"},"Nom de la forme",-1)),Dn(E("input",{type:"text",id:"shapeName","onUpdate:modelValue":ae[4]||(ae[4]=Ae=>X.value=Ae),onChange:U,placeholder:"Donnez un nom  cette forme",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},null,544),[[ai,X.value]])])):Ht("",!0),E("div",Bj,[ae[40]||(ae[40]=E("label",{for:"shapeCategory",class:"block text-sm font-medium text-gray-700 mb-1"},"Catgorie",-1)),Dn(E("select",{id:"shapeCategory","onUpdate:modelValue":ae[5]||(ae[5]=Ae=>ce.value=Ae),onChange:H,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},[ae[38]||(ae[38]=dl('<option value="forages" data-v-b0f42b55>Forages</option><option value="clients" data-v-b0f42b55>Clients</option><option value="entrepots" data-v-b0f42b55>Entrepts</option><option value="livraisons" data-v-b0f42b55>Lieux de livraison</option><option value="cultures" data-v-b0f42b55>Cultures</option><option value="parcelles" data-v-b0f42b55>Noms des parcelles</option>',6)),(Me(!0),De(gn,null,Vn(F.categories,(Ae,Ge)=>(Me(),De(gn,{key:Ge},[p.value.includes(String(Ge))?Ht("",!0):(Me(),De("option",{key:0,value:String(Ge)},At(ge(String(Ge))),9,Rj))],64))),128)),ae[39]||(ae[39]=E("option",{value:"default"},"Autre",-1))],544),[[Li,ce.value]])]),E("div",Fj,[ae[42]||(ae[42]=E("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700 mb-1"},"Niveau d'accs",-1)),ae[43]||(ae[43]=E("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Dfinit qui peut voir cet lment sur la carte. ",-1)),Dn(E("select",{id:"accessLevel","onUpdate:modelValue":ae[6]||(ae[6]=Ae=>he.value=Ae),onChange:ue,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},ae[41]||(ae[41]=[E("option",{value:"company"},"Entreprise uniquement",-1),E("option",{value:"employee"},"Entreprise et salaris",-1),E("option",{value:"visitor"},"Tous (visiteurs inclus)",-1)]),544),[[Li,he.value]])]),E("div",jj,[Z.value.type==="Polygon"?(Me(),De("div",zj,[E("div",Uj,[ae[44]||(ae[44]=E("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),E("span",$j,At(oe(Z.value.surface||0)),1)]),E("div",Vj,[ae[45]||(ae[45]=E("span",{class:"text-sm font-semibold text-gray-700"},"Primtre :",-1)),E("span",Hj,At(te(Z.value.perimeter||0)),1)])])):Z.value.type==="Line"?(Me(),De(gn,{key:1},[ae[46]||(ae[46]=E("span",{class:"text-sm font-semibold text-gray-700"},"Longueur :",-1)),E("span",Gj,At(te(Z.value.length||0)),1)],64)):Ht("",!0)])])):Ht("",!0)])):Ht("",!0),C.value==="style"&&t.selectedShape&&((re=t.selectedShape.properties)==null?void 0:re.type)!=="Note"?(Me(),De("div",Wj,[E("div",qj,[(Me(),De(gn,null,Vn(O,Ae=>E("button",{key:Ae,class:"w-8 h-8 rounded-full",style:Vl({backgroundColor:Ae}),onClick:Ge=>Y(Ae),title:Ae},null,12,Yj)),64))]),E("div",Kj,[E("div",Zj,[ae[47]||(ae[47]=E("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),E("div",Xj,[Dn(E("input",{type:"color","onUpdate:modelValue":ae[7]||(ae[7]=Ae=>S.value=Ae),class:"w-16 h-8 rounded border",onChange:ae[8]||(ae[8]=Ae=>k({strokeColor:S.value})),title:"Couleur du contour"},null,544),[[ai,S.value]]),Dn(E("input",{type:"range","onUpdate:modelValue":ae[9]||(ae[9]=Ae=>I.value=Ae),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:ae[10]||(ae[10]=Ae=>k({strokeWidth:I.value})),title:"paisseur du contour"},null,544),[[ai,I.value]])])]),E("div",Jj,[ae[48]||(ae[48]=E("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Style",-1)),Dn(E("select",{"onUpdate:modelValue":ae[11]||(ae[11]=Ae=>N.value=Ae),class:"w-full rounded border",onChange:ae[12]||(ae[12]=Ae=>k({strokeStyle:N.value}))},[(Me(),De(gn,null,Vn(B,Ae=>E("option",{key:Ae.value,value:Ae.value},At(Ae.label),9,Qj)),64))],544),[[Li,N.value]])]),W.value?(Me(),De("div",ez,[ae[49]||(ae[49]=E("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),E("div",tz,[Dn(E("input",{type:"color","onUpdate:modelValue":ae[13]||(ae[13]=Ae=>T.value=Ae),class:"w-16 h-8 rounded border",onChange:ae[14]||(ae[14]=Ae=>k({fillColor:T.value})),title:"Couleur de remplissage"},null,544),[[ai,T.value]]),Dn(E("input",{type:"range","onUpdate:modelValue":ae[15]||(ae[15]=Ae=>j.value=Ae),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:ae[16]||(ae[16]=Ae=>k({fillOpacity:j.value})),title:"Opacit du remplissage"},null,544),[[ai,j.value]])])])):Ht("",!0)])])):Ht("",!0),C.value==="filters"?(Me(),De("div",nz,[E("div",rz,[E("div",iz,[ae[52]||(ae[52]=E("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Niveau d'accs",-1)),ae[53]||(ae[53]=E("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Slectionnez votre niveau d'accs pour filtrer les lments visibles sur la carte. ",-1)),E("div",null,[Dn(E("select",{"onUpdate:modelValue":ae[17]||(ae[17]=Ae=>q.value=Ae),onChange:ae[18]||(ae[18]=Ae=>K(q.value)),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-sm"},ae[50]||(ae[50]=[E("option",{value:"company"},"Entreprise (accs  tout)",-1),E("option",{value:"employee"},"Salaris (accs niveau salaris et visiteurs)",-1),E("option",{value:"visitor"},"Visiteurs (accs niveau visiteurs uniquement)",-1)]),544),[[Li,q.value]]),ae[51]||(ae[51]=E("div",{class:"mt-2 text-xs text-gray-500"},[E("p",null,[E("strong",null,"Entreprise"),Mr(" : Vous verrez tous les lments (entreprise, salaris, visiteurs)")]),E("p",null,[E("strong",null,"Salaris"),Mr(" : Vous verrez les lments pour salaris et visiteurs")]),E("p",null,[E("strong",null,"Visiteurs"),Mr(" : Vous ne verrez que les lments pour visiteurs")])],-1))])]),E("div",sz,[ae[62]||(ae[62]=E("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Catgories",-1)),E("div",oz,[E("label",az,[Dn(E("input",{type:"checkbox","onUpdate:modelValue":ae[19]||(ae[19]=Ae=>F.categories.forages=Ae),onChange:ve,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Rl,F.categories.forages]]),ae[54]||(ae[54]=E("span",{class:"ml-2 text-sm text-gray-700"},"Forages",-1))]),E("label",lz,[Dn(E("input",{type:"checkbox","onUpdate:modelValue":ae[20]||(ae[20]=Ae=>F.categories.clients=Ae),onChange:ve,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Rl,F.categories.clients]]),ae[55]||(ae[55]=E("span",{class:"ml-2 text-sm text-gray-700"},"Clients",-1))]),E("label",uz,[Dn(E("input",{type:"checkbox","onUpdate:modelValue":ae[21]||(ae[21]=Ae=>F.categories.entrepots=Ae),onChange:ve,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Rl,F.categories.entrepots]]),ae[56]||(ae[56]=E("span",{class:"ml-2 text-sm text-gray-700"},"Entrepts",-1))]),E("label",cz,[Dn(E("input",{type:"checkbox","onUpdate:modelValue":ae[22]||(ae[22]=Ae=>F.categories.livraisons=Ae),onChange:ve,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Rl,F.categories.livraisons]]),ae[57]||(ae[57]=E("span",{class:"ml-2 text-sm text-gray-700"},"Lieux de livraison",-1))]),E("label",hz,[Dn(E("input",{type:"checkbox","onUpdate:modelValue":ae[23]||(ae[23]=Ae=>F.categories.cultures=Ae),onChange:ve,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Rl,F.categories.cultures]]),ae[58]||(ae[58]=E("span",{class:"ml-2 text-sm text-gray-700"},"Cultures",-1))]),E("label",fz,[Dn(E("input",{type:"checkbox","onUpdate:modelValue":ae[24]||(ae[24]=Ae=>F.categories.parcelles=Ae),onChange:ve,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Rl,F.categories.parcelles]]),ae[59]||(ae[59]=E("span",{class:"ml-2 text-sm text-gray-700"},"Noms des parcelles",-1))]),(Me(!0),De(gn,null,Vn(F.categories,(Ae,Ge)=>(Me(),De(gn,{key:Ge},[p.value.includes(String(Ge))?Ht("",!0):(Me(),De("label",dz,[Dn(E("input",{type:"checkbox","onUpdate:modelValue":tt=>F.categories[Ge]=tt,onChange:ve,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,40,pz),[[Rl,F.categories[Ge]]]),E("span",gz,At(Ge),1)]))],64))),128)),s.value||o.value?(Me(),De("div",mz,[E("div",vz,[Dn(E("input",{type:"text","onUpdate:modelValue":ae[25]||(ae[25]=Ae=>c.name=Ae),placeholder:"Nouveau filtre...",class:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-primary-500 focus:border-primary-500"},null,512),[[ai,c.name]]),E("button",{onClick:ye,disabled:!c.name||f.value,class:"px-2 py-1 bg-primary-600 text-white text-sm rounded hover:bg-primary-700 transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed"},[f.value?(Me(),De("svg",_z,ae[61]||(ae[61]=[E("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),E("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Me(),De("svg",bz,ae[60]||(ae[60]=[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"},null,-1)])))],8,yz)])])):Ht("",!0)])]),E("div",wz,[ae[66]||(ae[66]=E("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Types de formes",-1)),E("div",xz,[E("label",Lz,[Dn(E("input",{type:"checkbox","onUpdate:modelValue":ae[26]||(ae[26]=Ae=>F.shapeTypes.Polygon=Ae),onChange:ve,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Rl,F.shapeTypes.Polygon]]),ae[63]||(ae[63]=E("span",{class:"ml-2 text-sm text-gray-700"},"Polygones",-1))]),E("label",Cz,[Dn(E("input",{type:"checkbox","onUpdate:modelValue":ae[27]||(ae[27]=Ae=>F.shapeTypes.Line=Ae),onChange:ve,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Rl,F.shapeTypes.Line]]),ae[64]||(ae[64]=E("span",{class:"ml-2 text-sm text-gray-700"},"Lignes",-1))]),E("label",Sz,[Dn(E("input",{type:"checkbox","onUpdate:modelValue":ae[28]||(ae[28]=Ae=>F.shapeTypes.Note=Ae),onChange:ve,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Rl,F.shapeTypes.Note]]),ae[65]||(ae[65]=E("span",{class:"ml-2 text-sm text-gray-700"},"Notes",-1))])])]),E("div",{class:"pt-4 mb-4"},[E("button",{onClick:Ie,class:"w-full px-3 py-2 bg-gray-100 text-gray-700 text-sm rounded hover:bg-gray-200 transition-colors"}," Rinitialiser ")])])])):Ht("",!0)])])],2)}}}),n5=Qc(Ez,[["__scopeId","data-v-b0f42b55"]]),Pz={class:"map-toolbar w-full"},kz={class:"hidden md:flex items-center space-x-2"},Mz={class:"dropdown"},Az={class:"dropdown-menu"},Tz=["onClick"],Oz={key:0,class:"border-l pl-2 flex-1"},Dz={class:"flex items-center"},Iz={class:"plan-info"},Nz={class:"plan-name"},Bz={key:0,class:"plan-description"},Rz={class:"border-l pl-2 ml-auto"},Fz={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},jz={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},zz={key:"saving"},Uz={key:"success",class:"save-success-text"},$z={key:"default"},Vz={class:"md:hidden"},Hz={class:"flex justify-between items-center"},Gz={key:0,class:"truncate mx-2 text-sm font-medium"},Wz={key:0,class:"mobile-menu mt-0 bg-white shadow-lg p-4 z-[1900] fixed left-0 right-0 w-full"},qz={class:"flex justify-between items-center mb-3 border-b pb-2"},Yz={class:"flex flex-col space-y-4"},Kz={key:0,class:"flex flex-col pb-3 border-b"},Zz={class:"text-sm font-semibold text-gray-800"},Xz={key:0,class:"text-xs text-gray-600 mt-1"},Jz={class:"flex flex-col"},Qz={class:"grid grid-cols-3 gap-2"},eU=["onClick"],tU={key:0,class:"animate-spin h-4 w-4 mr-2 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},nU={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},rU={key:"saving"},iU={key:"success",class:"save-success-text"},sU={key:"default"},oU=hs({__name:"MapToolbar",props:{lastSave:{},planName:{},planDescription:{},saveStatus:{}},emits:["change-map-type","create-new-plan","load-plan","save-plan","adjust-view"],setup(t,{emit:e}){const n=t,r=e,{lastSave:i,planName:s,planDescription:o,saveStatus:a}=r_(n),l=bt("Hybride"),c=bt(!1),f=T=>{const j=T.currentTarget,W=j.nextElementSibling;if(W&&W.classList.contains("dropdown-menu")){const X=j.getBoundingClientRect();W.style.top=`${X.bottom}px`,W.style.left=`${X.left}px`}},p={Hybride:"Hybride",Cadastre:"Cadastre",IGN:"IGN"},v=Hn(()=>i.value?new Date(i.value).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Jamais"),m=T=>{l.value=T,r("change-map-type",T),c.value=!1},C=()=>{r("create-new-plan"),c.value=!1},S=()=>{r("load-plan"),c.value=!1},I=()=>{r("save-plan"),c.value=!1},N=()=>{r("adjust-view"),c.value=!1};return zs(()=>{const T=setInterval(()=>{window.dispatchEvent(new CustomEvent("geonote:savePlan"))},6e4);Ru(()=>{clearInterval(T)})}),li(a,T=>{T==="saving"&&window.dispatchEvent(new CustomEvent("geonote:savePlan"))}),(T,j)=>(Me(),De("div",Pz,[E("div",kz,[E("div",Mz,[E("button",{class:"btn-toolbar dropdown-toggle",onMouseover:f},[j[2]||(j[2]=E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M12 1.586l-4 4V17h8V5.586l-4-4zM2 17V9.276l4-3.638V17H2zM2 8.162V3h4.5L12 8.5V17H6V5.638L2 8.162z","clip-rule":"evenodd"})],-1)),E("span",null,At(p[l.value]),1)],32),E("div",Az,[(Me(),De(gn,null,Vn(p,(W,X)=>E("button",{key:X,class:bi(["dropdown-item",{active:X===l.value}]),onClick:ce=>m(X)},At(W),11,Tz)),64))])]),dn(s)?(Me(),De("div",Oz,[E("div",Dz,[E("div",Iz,[E("h2",Nz,At(dn(s)),1),dn(o)?(Me(),De("p",Bz,At(dn(o)),1)):Ht("",!0)])])])):Ht("",!0),E("div",{class:"border-l pl-2"},[E("div",{class:"flex items-center space-x-1"},[E("button",{onClick:C,class:"btn-toolbar",title:"Nouveau plan"},j[3]||(j[3]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),E("span",{class:"hidden lg:inline ml-1"},"Nouveau",-1)])),E("button",{onClick:S,class:"btn-toolbar",title:"Charger un plan"},j[4]||(j[4]=[dl('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" data-v-f1cdc164><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" data-v-f1cdc164></path><path d="M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z" data-v-f1cdc164></path><path fill-rule="evenodd" d="M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z" clip-rule="evenodd" data-v-f1cdc164></path></svg><span class="hidden lg:inline ml-1" data-v-f1cdc164>Charger</span>',2)])),E("button",{onClick:I,class:"btn-toolbar",title:"Enregistrer le plan"},j[5]||(j[5]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1),E("span",{class:"hidden lg:inline ml-1"},"Enregistrer",-1)]))])]),E("div",{class:"border-l pl-2"},[E("div",{class:"flex items-center space-x-1"},[E("button",{onClick:N,class:"btn-toolbar",title:"Ajuster la vue"},j[6]||(j[6]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),E("span",{class:"hidden lg:inline ml-1"},"Ajuster",-1)]))])]),E("div",Rz,[E("div",{class:bi(["text-xs hidden lg:flex items-center",{"text-gray-500":!dn(a),"text-primary-600 font-medium":dn(a)==="success","text-blue-600 font-medium":dn(a)==="saving"}])},[dn(a)==="saving"?(Me(),De("svg",Fz,j[7]||(j[7]=[E("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),E("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Ht("",!0),dn(a)==="success"?(Me(),De("svg",jz,j[8]||(j[8]=[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):Ht("",!0),Kr(j2,{name:"fade-slide",mode:"out-in"},{default:Ul(()=>[dn(a)==="saving"?(Me(),De("span",zz," Sauvegarde en cours... ")):dn(a)==="success"?(Me(),De("span",Uz," Sauvegarde russie ! ")):(Me(),De("span",$z," Dernire modification : "+At(v.value),1))]),_:1})],2)])]),E("div",Vz,[E("div",Hz,[E("button",{onClick:j[0]||(j[0]=W=>c.value=!c.value),class:"p-2 rounded-md border bg-white shadow-sm"},j[9]||(j[9]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z","clip-rule":"evenodd"})],-1)])),dn(s)?(Me(),De("div",Gz,At(dn(s)),1)):Ht("",!0),E("div",{class:"flex space-x-2"},[E("button",{onClick:C,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},j[10]||(j[10]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1)])),E("button",{onClick:I,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},j[11]||(j[11]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1)])),E("button",{onClick:N,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},j[12]||(j[12]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)]))])]),c.value?(Me(),De("div",Wz,[E("div",qz,[j[14]||(j[14]=E("h3",{class:"text-base font-semibold text-gray-800"},"Menu",-1)),E("button",{onClick:j[1]||(j[1]=W=>c.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},j[13]||(j[13]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("div",Yz,[dn(s)?(Me(),De("div",Kz,[E("h3",Zz,At(dn(s)),1),dn(o)?(Me(),De("p",Xz,At(dn(o)),1)):Ht("",!0)])):Ht("",!0),E("div",Jz,[j[15]||(j[15]=E("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Type de carte",-1)),E("div",Qz,[(Me(),De(gn,null,Vn(p,(W,X)=>E("button",{key:X,class:bi(["px-3 py-2 text-sm rounded-md border shadow-sm",{"bg-blue-50 border-blue-300 text-blue-700 font-medium":X===l.value}]),onClick:ce=>m(X)},At(W),11,eU)),64))])]),E("div",{class:"flex flex-col"},[j[18]||(j[18]=E("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Outils de plan",-1)),E("div",{class:"grid grid-cols-2 gap-2"},[E("button",{onClick:C,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},j[16]||(j[16]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),Mr(" Nouveau ")])),E("button",{onClick:S,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},j[17]||(j[17]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"}),E("path",{d:"M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z"}),E("path",{"fill-rule":"evenodd",d:"M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),Mr(" Charger ")]))])]),E("div",{class:bi(["text-sm text-center pt-3 border-t flex items-center justify-center space-x-1 mt-2",{"text-gray-500":!dn(a),"text-primary-600 font-medium":dn(a)==="success","text-blue-600 font-medium":dn(a)==="saving"}])},[dn(a)==="saving"?(Me(),De("svg",tU,j[19]||(j[19]=[E("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),E("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Ht("",!0),dn(a)==="success"?(Me(),De("svg",nU,j[20]||(j[20]=[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):Ht("",!0),Kr(j2,{name:"fade-slide",mode:"out-in"},{default:Ul(()=>[dn(a)==="saving"?(Me(),De("span",rU," Sauvegarde en cours... ")):dn(a)==="success"?(Me(),De("span",iU," Sauvegarde russie ! ")):(Me(),De("span",sU," Dernire modification : "+At(v.value),1))]),_:1})],2)])])):Ht("",!0)])]))}}),aU=Qc(oU,[["__scopeId","data-v-f1cdc164"]]),lU={class:"comment-thread"},uU={key:0,class:"space-y-3 mb-4"},cU={class:"flex justify-between items-start"},hU={class:"flex items-center"},fU={class:"font-medium text-sm text-gray-900"},dU={class:"flex items-center"},pU={class:"text-xs text-gray-500"},gU=["onClick"],mU={class:"mt-1 text-sm text-gray-700 whitespace-pre-wrap"},vU={key:1,class:"text-center text-sm text-gray-500 italic my-4"},yU={key:2,class:"mt-3"},bU={class:"flex justify-end mt-2"},_U=["disabled"],wU={key:3,class:"text-center text-sm text-gray-500 italic mt-2"},xU=hs({__name:"CommentThread",props:{noteId:{},comments:{}},emits:["update:comments","comment-added","comment-deleted"],setup(t,{emit:e}){const n=t;li(()=>n.comments,S=>{},{deep:!0});const r=e,i=eo(),s=hd(),o=Gl(),a=bt(""),l=Hn(()=>i.isEntreprise||i.isAdmin);function c(S){return i.user&&S.userId===i.user.id||i.isAdmin}async function f(){var S;if(a.value.trim())try{await s.addComment(n.noteId,a.value.trim()),a.value="",o.success("Commentaire ajout avec succs"),r("comment-added")}catch(I){if(console.error("Erreur lors de l'ajout du commentaire:",I),(S=I.response)!=null&&S.data){const N=I.response.data;N.note?o.error(`Erreur: ${N.note[0]}`):N.user?o.error(`Erreur: ${N.user[0]}`):N.text?o.error(`Erreur: ${N.text[0]}`):o.error("Erreur lors de l'ajout du commentaire")}else o.error("Erreur lors de l'ajout du commentaire")}}async function p(S){var I;if(confirm("Voulez-vous vraiment supprimer ce commentaire ?"))try{await s.removeComment(n.noteId,S),o.success("Commentaire supprim"),r("comment-deleted")}catch(N){if(console.error("Erreur lors de la suppression du commentaire:",N),(I=N.response)!=null&&I.data){const T=N.response.data;T.detail?o.error(`Erreur: ${T.detail}`):o.error("Erreur lors de la suppression du commentaire")}else o.error("Erreur lors de la suppression du commentaire")}}function v(S){try{if(!S)return"Date inconnue";const I=new Date(S);return isNaN(I.getTime())?(console.warn(`Date invalide: ${S}`),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(I)}catch(I){return console.error(`Erreur lors du formatage de la date: ${S}`,I),"Date invalide"}}function m(S){switch(S){case"admin":return"bg-purple-100 text-purple-800";case"entreprise":return"bg-blue-100 text-blue-800";case"salarie":return"bg-green-100 text-green-800";case"visiteur":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}function C(S){switch(S){case"admin":return"Admin";case"entreprise":return"Entreprise";case"salarie":return"Salari";case"visiteur":return"Visiteur";default:return S}}return(S,I)=>(Me(),De("div",lU,[S.comments&&S.comments.length>0?(Me(),De("div",uU,[(Me(!0),De(gn,null,Vn(S.comments,N=>(Me(),De("div",{key:N.id,class:"bg-gray-50 rounded-lg p-3"},[E("div",cU,[E("div",hU,[E("div",fU,At(N.userName),1),E("span",{class:bi(["ml-2 text-xs px-2 py-0.5 rounded-full",m(N.userRole)])},At(C(N.userRole)),3)]),E("div",dU,[E("span",pU,At(v(N.createdAt)),1),c(N)?(Me(),De("button",{key:0,onClick:pl(T=>p(N.id),["prevent"]),class:"ml-2 text-gray-400 hover:text-red-500"},I[1]||(I[1]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,gU)):Ht("",!0)])]),E("p",mU,At(N.text),1)]))),128))])):(Me(),De("div",vU," Aucun commentaire pour le moment ")),l.value?(Me(),De("div",yU,[Dn(E("textarea",{"onUpdate:modelValue":I[0]||(I[0]=N=>a.value=N),placeholder:"Ajouter un commentaire...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:"2"},null,512),[[ai,a.value]]),E("div",bU,[E("button",{type:"button",onClick:pl(f,["prevent"]),disabled:!a.value.trim(),class:"px-3 py-1 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"}," Ajouter ",8,_U)])])):(Me(),De("div",wU," Seuls les utilisateurs de l'entreprise peuvent ajouter des commentaires "))]))}}),LU={class:"photo-gallery"},CU={key:0,class:"grid grid-cols-2 gap-2 mb-4"},SU=["src","onClick"],EU={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 rounded-lg flex items-center justify-center"},PU={class:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex space-x-2"},kU=["onClick"],MU={key:1,class:"text-center text-sm text-gray-500 italic my-4"},AU={class:"flex space-x-2 mt-3"},TU={key:2,class:"mt-4 border border-gray-300 rounded-lg overflow-hidden bg-white"},OU={class:"relative bg-gray-900",style:{height:"300px"}},DU=["src"],IU={class:"p-3 bg-gray-50 border-t border-gray-300 flex justify-center"},NU={key:1,class:"flex space-x-3"},BU={key:3,class:"fixed inset-0 z-[3002] flex items-center justify-center p-4 bg-black bg-opacity-75"},RU={class:"relative max-w-3xl max-h-[90vh] bg-white rounded-lg overflow-hidden"},FU=["src"],jU=hs({__name:"PhotoGallery",props:{noteId:{},photos:{}},emits:["update:photos","photo-added","photo-deleted"],setup(t,{emit:e}){const n=t,r=e,i=hd(),s=Gl(),o=bt(null),a=bt(null),l=bt(null);let c=null;const f=bt(!1),p=bt(!1),v=bt(null),m=bt(null);function C(he){v.value=he,f.value=!0}async function S(he){var O;if(confirm("tes-vous sr de vouloir supprimer cette photo ?"))try{await i.removePhoto(n.noteId,he),s.success("Photo supprime"),r("photo-deleted"),f.value&&((O=v.value)==null?void 0:O.id)===he&&(f.value=!1,v.value=null)}catch(B){console.error("Erreur lors de la suppression de la photo:",B),s.error("Erreur lors de la suppression de la photo")}}function I(){l.value&&l.value.click()}async function N(he){const O=he.target;if(!O.files||O.files.length===0)return;const B=O.files[0];if(!B.type.startsWith("image/")){s.error("Le fichier doit tre une image");return}if(B.size>5*1024*1024){s.error("L'image est trop volumineuse (max 5MB)");return}try{const q=await T(B);await i.addPhoto(n.noteId,{url:q}),O.value="",s.success("Photo ajoute"),r("photo-added")}catch(q){console.error("Erreur lors de l'ajout de la photo:",q),s.error("Erreur lors de l'ajout de la photo")}}function T(he){return new Promise((O,B)=>{const q=new FileReader;q.onload=()=>O(q.result),q.onerror=B,q.readAsDataURL(he)})}li(p,async he=>{if(he){m.value=null;try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("API de camra non supporte sur ce navigateur");const O={video:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}};c=await navigator.mediaDevices.getUserMedia(O),o.value&&(o.value.srcObject=c,await new Promise(B=>{o.value.onloadedmetadata=()=>{o.value.play().then(B)}}))}catch(O){console.error("Erreur lors de l'accs  la camra:",O);let B="Impossible d'accder  la camra";O.name==="NotAllowedError"?B="L'accs  la camra a t refus. Veuillez vrifier vos permissions.":O.name==="NotFoundError"?B="Aucune camra n'a t trouve sur votre appareil.":O.name==="NotSupportedError"&&(B="Votre navigateur ne supporte pas l'accs  la camra."),s.error(B),p.value=!1}}else c&&(c.getTracks().forEach(O=>O.stop()),c=null)});function j(){if(!o.value||!a.value)return;const he=o.value,O=a.value;O.width=he.videoWidth,O.height=he.videoHeight;const B=O.getContext("2d");B&&(B.drawImage(he,0,0,O.width,O.height),m.value=O.toDataURL("image/jpeg"))}function W(){m.value=null}async function X(){if(m.value)try{await i.addPhoto(n.noteId,{url:m.value}),p.value=!1,s.success("Photo ajoute"),r("photo-added")}catch(he){console.error("Erreur lors de l'ajout de la photo:",he),s.error("Erreur lors de l'ajout de la photo")}}function ce(){p.value=!1}return Ru(()=>{c&&(c.getTracks().forEach(he=>he.stop()),c=null)}),(he,O)=>(Me(),De("div",LU,[he.photos&&he.photos.length>0?(Me(),De("div",CU,[(Me(!0),De(gn,null,Vn(he.photos,B=>(Me(),De("div",{key:B.id,class:"relative group"},[E("img",{src:B.url,alt:"Photo",class:"w-full h-32 object-cover rounded-lg cursor-pointer",onClick:q=>C(B)},null,8,SU),E("div",EU,[E("div",PU,[E("button",{onClick:pl(q=>S(B.id),["stop","prevent"]),class:"p-1 bg-white rounded-full text-gray-700 hover:text-red-600",title:"Supprimer la photo"},O[2]||(O[2]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,kU)])])]))),128))])):(Me(),De("div",MU," Aucune photo pour le moment ")),E("div",AU,[E("button",{type:"button",onClick:O[0]||(O[0]=B=>p.value=!0),class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},O[3]||(O[3]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),Mr(" Prendre une photo ")])),E("button",{type:"button",onClick:I,class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 cursor-pointer"},O[4]||(O[4]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0l-4 4m4-4v12"})],-1),Mr(" Tlverser ")])),E("input",{id:"photo-upload",ref_key:"fileInput",ref:l,type:"file",accept:"image/*",class:"hidden",onChange:N},null,544)]),p.value?(Me(),De("div",TU,[E("div",{class:"p-3 bg-gray-50 border-b border-gray-300 flex justify-between items-center"},[O[6]||(O[6]=E("h3",{class:"text-sm font-medium text-gray-700"},"Mode camra",-1)),E("button",{type:"button",onClick:ce,class:"text-gray-400 hover:text-gray-500"},O[5]||(O[5]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("div",OU,[m.value?(Me(),De("img",{key:1,src:m.value,class:"w-full h-full object-contain",alt:"Captured"},null,8,DU)):(Me(),De("video",{key:0,ref_key:"videoElement",ref:o,autoplay:"",class:"w-full h-full object-contain"},null,512)),E("canvas",{ref_key:"canvasElement",ref:a,class:"hidden"},null,512)]),E("div",IU,[m.value?(Me(),De("div",NU,[E("button",{type:"button",onClick:W,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Reprendre "),E("button",{type:"button",onClick:X,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Utiliser ")])):(Me(),De("button",{key:0,type:"button",onClick:j,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-full w-12 h-12 flex items-center justify-center hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},O[7]||(O[7]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"})],-1)])))])])):Ht("",!0),f.value?(Me(),De("div",BU,[E("div",RU,[E("button",{type:"button",onClick:O[1]||(O[1]=B=>f.value=!1),class:"absolute top-2 right-2 z-10 p-1 bg-white rounded-full text-gray-700 hover:text-red-600 shadow-md"},O[8]||(O[8]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),v.value?(Me(),De("img",{key:0,src:v.value.url,alt:"Photo",class:"max-h-[80vh] max-w-full object-contain"},null,8,FU)):Ht("",!0)])])):Ht("",!0)]))}}),zU=Qc(jU,[["__scopeId","data-v-f87156b4"]]),UU={class:"modal-header"},$U={class:"modal-title"},VU={class:"modal-tabs"},HU={key:0,class:"badge"},GU={key:0,class:"badge"},WU={class:"modal-content"},qU={key:0,class:"tab-content"},YU={class:"form-group"},KU={class:"form-group"},ZU={key:0,class:"location-indicator"},XU={class:"form-group"},JU=["value"],QU={key:1,class:"form-group"},e$=["value"],t$={class:"form-group"},n$=["value"],r$={class:"form-group"},i$={class:"color-picker"},s$=["onClick"],o$={key:1,class:"tab-content"},a$={key:2,class:"tab-content"},l$=hs({__name:"NoteEditModal",props:{note:{},isNewNote:{type:Boolean},location:{}},emits:["close","save"],setup(t,{emit:e}){const n=t,r=e,i=hd(),s=Gl(),o=eo(),a=bt("info"),l=bt([]),c=bt(null),f=window.console;li(a,async Y=>{Y==="comments"&&n.note&&n.note.id&&await C(n.note.id),Y==="photos"&&n.note&&n.note.id&&await S(n.note.id)});const p=bt({title:"",description:"",columnId:"",accessLevel:xi.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[],photos:[],enterprise_id:null});function v(Y){return Array.isArray(Y)?Y:typeof Y=="object"&&"type"in Y&&"coordinates"in Y?[Y.coordinates[1],Y.coordinates[0]]:(f.error("[NoteEditModal] Format de localisation non reconnu:",Y),[0,0])}function m(Y){if(!Y)return new Date().toISOString();try{const k=new Date(Y);return isNaN(k.getTime())?(f.warn("[NoteEditModal] Date invalide:",Y),new Date().toISOString()):k.toISOString()}catch(k){return f.error("[NoteEditModal] Erreur lors de la cration de la date:",k),new Date().toISOString()}}async function C(Y){try{const U=(await Xo.getComments(Y)).data.map(H=>({id:H.id,text:H.text,createdAt:H.created_at,userId:H.user,userName:H.user_name,userRole:H.user_role}));return n.note&&(i.updateNote(n.note.id,{comments:U}),p.value.comments=U),U}catch(k){return f.error("[NoteEditModal] Erreur lors du chargement des commentaires:",k),s.error("Erreur lors du chargement des commentaires"),[]}}async function S(Y){try{const U=(await Xo.getPhotos(Y)).data.map(H=>({id:H.id,url:H.image,createdAt:H.created_at,caption:H.caption}));return n.note&&(i.updateNote(n.note.id,{photos:U}),p.value.photos=U),U}catch(k){return f.error("[NoteEditModal] Erreur lors du chargement des photos:",k),s.error("Erreur lors du chargement des photos"),[]}}async function I(){if(o.isAdmin)try{const Y=await da.getEntreprises();l.value=Y.data}catch(Y){f.error("[NoteEditModal] Erreur lors du chargement des entreprises:",Y),s.error("Erreur lors du chargement des entreprises")}}zs(async()=>{var Y;if(await i.loadColumns(),await I(),n.note){const k=JSON.parse(JSON.stringify(n.note));k.createdAt=m(k.createdAt),k.updatedAt=m(k.updatedAt),p.value=k,o.isAdmin&&k.enterprise_id&&(c.value=k.enterprise_id),n.note.id&&await Promise.all([C(n.note.id),S(n.note.id)])}else if(n.isNewNote){if(p.value={title:"Nouvelle note",description:"",columnId:i.getDefaultColumn.id||"1",accessLevel:xi.PRIVATE,style:{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},comments:[],photos:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),enterprise_id:null},!o.isAdmin&&((Y=o.user)!=null&&Y.enterprise_id)&&(p.value.enterprise_id=o.user.enterprise_id),n.location){const k=v(n.location);p.value.location=k}}else f.error("[NoteEditModal] Erreur: Ni note existante ni nouvelle note")});const N=Hn(()=>i.getSortedColumns),T=Hn(()=>{var k;return((k=p.value.comments)==null?void 0:k.length)||0}),j=Hn(()=>{var k;return((k=p.value.photos)==null?void 0:k.length)||0}),W=[{id:xi.PRIVATE,title:"Priv",description:"Visible uniquement par vous"},{id:xi.COMPANY,title:"Entreprise",description:"Visible par l'entreprise uniquement"},{id:xi.EMPLOYEE,title:"Salaris",description:"Visible par l'entreprise et les salaris"},{id:xi.VISITOR,title:"Visiteurs",description:"Visible par tous"}],X=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6B7280"],ce=Y=>{var k;if(p.value.style?(p.value.style.color=Y,p.value.style.fillColor=Y):p.value.style={color:Y,weight:2,opacity:1,fillColor:Y,fillOpacity:.6,radius:8},p.value.color=Y,(k=n.note)!=null&&k.id){const U=new CustomEvent("geonote:updateStyle",{detail:{noteId:n.note.id,style:{color:Y,fillColor:Y}}});window.dispatchEvent(U);const H=new CustomEvent("geonote:update",{detail:{noteId:n.note.id,properties:{name:p.value.title,description:p.value.description,columnId:p.value.columnId,accessLevel:p.value.accessLevel,style:p.value.style}}});window.dispatchEvent(H)}},he=()=>{var Y,k,U,H,ue,_e,Ie,ee,te,oe,ge;p.value={title:((Y=n.note)==null?void 0:Y.title)||"",description:((k=n.note)==null?void 0:k.description)||"",columnId:((U=n.note)==null?void 0:U.columnId)||"",accessLevel:((H=n.note)==null?void 0:H.accessLevel)||"private",style:((ue=n.note)==null?void 0:ue.style)||{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},location:n.location||((_e=n.note)==null?void 0:_e.location)||null,comments:((Ie=n.note)==null?void 0:Ie.comments)||[],photos:((ee=n.note)==null?void 0:ee.photos)||[],enterprise_id:((te=n.note)==null?void 0:te.enterprise_id)||null},o.isAdmin&&((oe=n.note)!=null&&oe.enterprise_id)&&(c.value=n.note.enterprise_id),!o.isAdmin&&!p.value.enterprise_id&&((ge=o.user)!=null&&ge.enterprise_id)&&(p.value.enterprise_id=o.user.enterprise_id)};zs(()=>{he()}),li(()=>n.note,()=>{he()},{deep:!0});function O(){r("close")}async function B(){n.note&&n.note.id&&await C(n.note.id)}async function q(){n.note&&n.note.id&&await S(n.note.id)}async function F(){n.note&&n.note.id&&await C(n.note.id)}async function R(){n.note&&n.note.id&&await S(n.note.id)}async function K(){var Y,k;try{const U=p.value.style.color;p.value.style={...p.value.style,color:U,fillColor:U,weight:2,opacity:1,fillOpacity:.6,radius:8};const H={title:p.value.title,description:p.value.description,columnId:p.value.columnId,style:p.value.style,access_level:p.value.accessLevel,comments:p.value.comments||[],photos:p.value.photos||[],color:U,enterprise_id:o.isAdmin?c.value:p.value.enterprise_id};!o.isAdmin&&((Y=o.user)!=null&&Y.enterprise_id)&&(H.enterprise_id=o.user.enterprise_id),p.value.location&&(H.location=Array.isArray(p.value.location)?{type:"Point",coordinates:[p.value.location[1],p.value.location[0]]}:p.value.location);let ue;if((k=n.note)!=null&&k.id){const _e=n.note.backendId||n.note.id;H.backendId=n.note.backendId,ue=(await Xo.updateNote(_e,H)).data,i.updateNote(_e,{...p.value,...ue,accessLevel:p.value.accessLevel,style:p.value.style,color:U,updatedAt:new Date().toISOString(),enterprise_id:H.enterprise_id,enterprise_name:p.value.enterprise_name});const ee=n.note.leafletId||n.note.id,te=new CustomEvent("geonote:update",{detail:{noteId:ee,properties:{name:p.value.title,description:p.value.description,columnId:p.value.columnId,accessLevel:p.value.accessLevel,style:p.value.style,color:U}}});window.dispatchEvent(te),s.success("Note mise  jour avec succs")}else{if(ue=(await Xo.createNote(H)).data,!ue.id)throw new Error("Le backend n'a pas fourni d'ID pour la nouvelle note");const Ie=i.getDefaultColumn,ee={...H,id:ue.id,columnId:H.columnId||Ie.id,accessLevel:p.value.accessLevel,style:H.style,color:U};i.addNote(ee),s.success("Note cre avec succs")}ue&&(!ue.comments&&p.value.comments&&(ue.comments=p.value.comments),!ue.photos&&p.value.photos&&(ue.photos=p.value.photos),ue.color=U,ue.style={...ue.style,color:U,fillColor:U}),r("save",ue),r("close")}catch(U){f.error("[NoteEditModal] Erreur lors de la sauvegarde de la note:",U),s.error("Erreur lors de la sauvegarde de la note")}}function Z(Y){Y.stopPropagation()}return(Y,k)=>{var U;return Me(),De("div",{class:"modal-overlay",onClick:Z},[E("div",{class:"modal-container",onClick:k[8]||(k[8]=pl(()=>{},["stop"]))},[E("form",{onSubmit:pl(K,["prevent"]),class:"modal-form"},[E("div",UU,[E("h3",$U,At((U=Y.note)!=null&&U.id?"Modifier la note":"Nouvelle note"),1),E("button",{type:"button",onClick:O,class:"close-button"},k[9]||(k[9]=[E("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("div",VU,[E("button",{type:"button",onClick:k[0]||(k[0]=H=>a.value="info"),class:bi(["tab-button",{active:a.value==="info"}])}," Informations ",2),E("button",{type:"button",onClick:k[1]||(k[1]=H=>a.value="comments"),class:bi(["tab-button",{active:a.value==="comments"}])},[k[10]||(k[10]=Mr(" Commentaires ")),T.value>0?(Me(),De("span",HU,At(T.value),1)):Ht("",!0)],2),E("button",{type:"button",onClick:k[2]||(k[2]=H=>a.value="photos"),class:bi(["tab-button",{active:a.value==="photos"}])},[k[11]||(k[11]=Mr(" Photos ")),j.value>0?(Me(),De("span",GU,At(j.value),1)):Ht("",!0)],2)]),E("div",WU,[a.value==="info"?(Me(),De("div",qU,[E("div",YU,[k[12]||(k[12]=E("label",{for:"title"},"Titre",-1)),Dn(E("input",{type:"text",id:"title","onUpdate:modelValue":k[3]||(k[3]=H=>p.value.title=H),required:""},null,512),[[ai,p.value.title]])]),E("div",KU,[k[13]||(k[13]=E("label",{for:"description"},"Description",-1)),Dn(E("textarea",{id:"description","onUpdate:modelValue":k[4]||(k[4]=H=>p.value.description=H),rows:"3"},null,512),[[ai,p.value.description]])]),p.value.location?(Me(),De("div",ZU,k[14]||(k[14]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1),E("span",null,"Note golocalise",-1)]))):Ht("",!0),E("div",XU,[k[15]||(k[15]=E("label",{for:"column"},"tat",-1)),Dn(E("select",{id:"column","onUpdate:modelValue":k[5]||(k[5]=H=>p.value.columnId=H)},[(Me(!0),De(gn,null,Vn(N.value,H=>(Me(),De("option",{key:H.id,value:H.id},At(H.title),9,JU))),128))],512),[[Li,p.value.columnId]])]),dn(o).isAdmin?(Me(),De("div",QU,[k[17]||(k[17]=E("label",{for:"enterprise"},"Entreprise",-1)),Dn(E("select",{id:"enterprise","onUpdate:modelValue":k[6]||(k[6]=H=>c.value=H)},[k[16]||(k[16]=E("option",{value:null},"Slectionner une entreprise",-1)),(Me(!0),De(gn,null,Vn(l.value,H=>(Me(),De("option",{key:H.id,value:H.id},At(H.company_name||`${H.first_name} ${H.last_name}`),9,e$))),128))],512),[[Li,c.value]])])):Ht("",!0),E("div",t$,[k[18]||(k[18]=E("label",{for:"accessLevel"},"Niveau d'accs",-1)),Dn(E("select",{id:"accessLevel","onUpdate:modelValue":k[7]||(k[7]=H=>p.value.accessLevel=H)},[(Me(),De(gn,null,Vn(W,H=>E("option",{key:H.id,value:H.id},At(H.title)+" - "+At(H.description),9,n$)),64))],512),[[Li,p.value.accessLevel]])]),E("div",r$,[k[19]||(k[19]=E("label",null,"Couleur",-1)),E("div",i$,[(Me(),De(gn,null,Vn(X,H=>E("div",{key:H,class:bi(["color-option",{selected:p.value.style.color===H}]),style:Vl({backgroundColor:H}),onClick:ue=>ce(H)},null,14,s$)),64))])])])):a.value==="comments"?(Me(),De("div",o$,[Y.note?(Me(),ho(xU,{key:0,noteId:Y.note.id,comments:p.value.comments||[],onCommentAdded:B,onCommentDeleted:F},null,8,["noteId","comments"])):Ht("",!0)])):a.value==="photos"?(Me(),De("div",a$,[Y.note?(Me(),ho(zU,{key:0,noteId:Y.note.id,photos:p.value.photos||[],onPhotoAdded:q,onPhotoDeleted:R},null,8,["noteId","photos"])):Ht("",!0)])):Ht("",!0)]),E("div",{class:"modal-footer"},[k[20]||(k[20]=E("button",{type:"submit",class:"primary-button"},"Enregistrer",-1)),E("button",{type:"button",onClick:O,class:"secondary-button"},"Annuler")])],32)])])}}}),vE=Qc(l$,[["__scopeId","data-v-076ed871"]]);(()=>{var Cn,Yn;var t=Object.create,e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,o=(h,g)=>()=>(g||h((g={exports:{}}).exports,g),g.exports),a=(h,g,_,x)=>{if(g&&typeof g=="object"||typeof g=="function")for(let M of r(g))!s.call(h,M)&&M!==_&&e(h,M,{get:()=>g[M],enumerable:!(x=n(g,M))||x.enumerable});return h},l=(h,g,_)=>(_=h!=null?t(i(h)):{},a(g||!h||!h.__esModule?e(_,"default",{value:h,enumerable:!0}):_,h)),c=o((h,g)=>{function _(){this.__data__=[],this.size=0}g.exports=_}),f=o((h,g)=>{function _(x,M){return x===M||x!==x&&M!==M}g.exports=_}),p=o((h,g)=>{var _=f();function x(M,$){for(var J=M.length;J--;)if(_(M[J][0],$))return J;return-1}g.exports=x}),v=o((h,g)=>{var _=p(),x=Array.prototype,M=x.splice;function $(J){var ne=this.__data__,me=_(ne,J);if(me<0)return!1;var Ce=ne.length-1;return me==Ce?ne.pop():M.call(ne,me,1),--this.size,!0}g.exports=$}),m=o((h,g)=>{var _=p();function x(M){var $=this.__data__,J=_($,M);return J<0?void 0:$[J][1]}g.exports=x}),C=o((h,g)=>{var _=p();function x(M){return _(this.__data__,M)>-1}g.exports=x}),S=o((h,g)=>{var _=p();function x(M,$){var J=this.__data__,ne=_(J,M);return ne<0?(++this.size,J.push([M,$])):J[ne][1]=$,this}g.exports=x}),I=o((h,g)=>{var _=c(),x=v(),M=m(),$=C(),J=S();function ne(me){var Ce=-1,Ye=me==null?0:me.length;for(this.clear();++Ce<Ye;){var Ve=me[Ce];this.set(Ve[0],Ve[1])}}ne.prototype.clear=_,ne.prototype.delete=x,ne.prototype.get=M,ne.prototype.has=$,ne.prototype.set=J,g.exports=ne}),N=o((h,g)=>{var _=I();function x(){this.__data__=new _,this.size=0}g.exports=x}),T=o((h,g)=>{function _(x){var M=this.__data__,$=M.delete(x);return this.size=M.size,$}g.exports=_}),j=o((h,g)=>{function _(x){return this.__data__.get(x)}g.exports=_}),W=o((h,g)=>{function _(x){return this.__data__.has(x)}g.exports=_}),X=o((h,g)=>{var _=typeof Jo=="object"&&Jo&&Jo.Object===Object&&Jo;g.exports=_}),ce=o((h,g)=>{var _=X(),x=typeof self=="object"&&self&&self.Object===Object&&self,M=_||x||Function("return this")();g.exports=M}),he=o((h,g)=>{var _=ce(),x=_.Symbol;g.exports=x}),O=o((h,g)=>{var _=he(),x=Object.prototype,M=x.hasOwnProperty,$=x.toString,J=_?_.toStringTag:void 0;function ne(me){var Ce=M.call(me,J),Ye=me[J];try{me[J]=void 0;var Ve=!0}catch{}var mt=$.call(me);return Ve&&(Ce?me[J]=Ye:delete me[J]),mt}g.exports=ne}),B=o((h,g)=>{var _=Object.prototype,x=_.toString;function M($){return x.call($)}g.exports=M}),q=o((h,g)=>{var _=he(),x=O(),M=B(),$="[object Null]",J="[object Undefined]",ne=_?_.toStringTag:void 0;function me(Ce){return Ce==null?Ce===void 0?J:$:ne&&ne in Object(Ce)?x(Ce):M(Ce)}g.exports=me}),F=o((h,g)=>{function _(x){var M=typeof x;return x!=null&&(M=="object"||M=="function")}g.exports=_}),R=o((h,g)=>{var _=q(),x=F(),M="[object AsyncFunction]",$="[object Function]",J="[object GeneratorFunction]",ne="[object Proxy]";function me(Ce){if(!x(Ce))return!1;var Ye=_(Ce);return Ye==$||Ye==J||Ye==M||Ye==ne}g.exports=me}),K=o((h,g)=>{var _=ce(),x=_["__core-js_shared__"];g.exports=x}),Z=o((h,g)=>{var _=K(),x=function(){var $=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||"");return $?"Symbol(src)_1."+$:""}();function M($){return!!x&&x in $}g.exports=M}),Y=o((h,g)=>{var _=Function.prototype,x=_.toString;function M($){if($!=null){try{return x.call($)}catch{}try{return $+""}catch{}}return""}g.exports=M}),k=o((h,g)=>{var _=R(),x=Z(),M=F(),$=Y(),J=/[\\^$.*+?()[\]{}|]/g,ne=/^\[object .+?Constructor\]$/,me=Function.prototype,Ce=Object.prototype,Ye=me.toString,Ve=Ce.hasOwnProperty,mt=RegExp("^"+Ye.call(Ve).replace(J,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Mt(Kt){if(!M(Kt)||x(Kt))return!1;var fn=_(Kt)?mt:ne;return fn.test($(Kt))}g.exports=Mt}),U=o((h,g)=>{function _(x,M){return x==null?void 0:x[M]}g.exports=_}),H=o((h,g)=>{var _=k(),x=U();function M($,J){var ne=x($,J);return _(ne)?ne:void 0}g.exports=M}),ue=o((h,g)=>{var _=H(),x=ce(),M=_(x,"Map");g.exports=M}),_e=o((h,g)=>{var _=H(),x=_(Object,"create");g.exports=x}),Ie=o((h,g)=>{var _=_e();function x(){this.__data__=_?_(null):{},this.size=0}g.exports=x}),ee=o((h,g)=>{function _(x){var M=this.has(x)&&delete this.__data__[x];return this.size-=M?1:0,M}g.exports=_}),te=o((h,g)=>{var _=_e(),x="__lodash_hash_undefined__",M=Object.prototype,$=M.hasOwnProperty;function J(ne){var me=this.__data__;if(_){var Ce=me[ne];return Ce===x?void 0:Ce}return $.call(me,ne)?me[ne]:void 0}g.exports=J}),oe=o((h,g)=>{var _=_e(),x=Object.prototype,M=x.hasOwnProperty;function $(J){var ne=this.__data__;return _?ne[J]!==void 0:M.call(ne,J)}g.exports=$}),ge=o((h,g)=>{var _=_e(),x="__lodash_hash_undefined__";function M($,J){var ne=this.__data__;return this.size+=this.has($)?0:1,ne[$]=_&&J===void 0?x:J,this}g.exports=M}),ve=o((h,g)=>{var _=Ie(),x=ee(),M=te(),$=oe(),J=ge();function ne(me){var Ce=-1,Ye=me==null?0:me.length;for(this.clear();++Ce<Ye;){var Ve=me[Ce];this.set(Ve[0],Ve[1])}}ne.prototype.clear=_,ne.prototype.delete=x,ne.prototype.get=M,ne.prototype.has=$,ne.prototype.set=J,g.exports=ne}),ye=o((h,g)=>{var _=ve(),x=I(),M=ue();function $(){this.size=0,this.__data__={hash:new _,map:new(M||x),string:new _}}g.exports=$}),pe=o((h,g)=>{function _(x){var M=typeof x;return M=="string"||M=="number"||M=="symbol"||M=="boolean"?x!=="__proto__":x===null}g.exports=_}),fe=o((h,g)=>{var _=pe();function x(M,$){var J=M.__data__;return _($)?J[typeof $=="string"?"string":"hash"]:J.map}g.exports=x}),$e=o((h,g)=>{var _=fe();function x(M){var $=_(this,M).delete(M);return this.size-=$?1:0,$}g.exports=x}),Ne=o((h,g)=>{var _=fe();function x(M){return _(this,M).get(M)}g.exports=x}),ot=o((h,g)=>{var _=fe();function x(M){return _(this,M).has(M)}g.exports=x}),le=o((h,g)=>{var _=fe();function x(M,$){var J=_(this,M),ne=J.size;return J.set(M,$),this.size+=J.size==ne?0:1,this}g.exports=x}),ae=o((h,g)=>{var _=ye(),x=$e(),M=Ne(),$=ot(),J=le();function ne(me){var Ce=-1,Ye=me==null?0:me.length;for(this.clear();++Ce<Ye;){var Ve=me[Ce];this.set(Ve[0],Ve[1])}}ne.prototype.clear=_,ne.prototype.delete=x,ne.prototype.get=M,ne.prototype.has=$,ne.prototype.set=J,g.exports=ne}),de=o((h,g)=>{var _=I(),x=ue(),M=ae(),$=200;function J(ne,me){var Ce=this.__data__;if(Ce instanceof _){var Ye=Ce.__data__;if(!x||Ye.length<$-1)return Ye.push([ne,me]),this.size=++Ce.size,this;Ce=this.__data__=new M(Ye)}return Ce.set(ne,me),this.size=Ce.size,this}g.exports=J}),re=o((h,g)=>{var _=I(),x=N(),M=T(),$=j(),J=W(),ne=de();function me(Ce){var Ye=this.__data__=new _(Ce);this.size=Ye.size}me.prototype.clear=x,me.prototype.delete=M,me.prototype.get=$,me.prototype.has=J,me.prototype.set=ne,g.exports=me}),Ae=o((h,g)=>{var _=H(),x=function(){try{var M=_(Object,"defineProperty");return M({},"",{}),M}catch{}}();g.exports=x}),Ge=o((h,g)=>{var _=Ae();function x(M,$,J){$=="__proto__"&&_?_(M,$,{configurable:!0,enumerable:!0,value:J,writable:!0}):M[$]=J}g.exports=x}),tt=o((h,g)=>{var _=Ge(),x=f();function M($,J,ne){(ne!==void 0&&!x($[J],ne)||ne===void 0&&!(J in $))&&_($,J,ne)}g.exports=M}),at=o((h,g)=>{function _(x){return function(M,$,J){for(var ne=-1,me=Object(M),Ce=J(M),Ye=Ce.length;Ye--;){var Ve=Ce[x?Ye:++ne];if($(me[Ve],Ve,me)===!1)break}return M}}g.exports=_}),ut=o((h,g)=>{var _=at(),x=_();g.exports=x}),gt=o((h,g)=>{var _=ce(),x=typeof h=="object"&&h&&!h.nodeType&&h,M=x&&typeof g=="object"&&g&&!g.nodeType&&g,$=M&&M.exports===x,J=$?_.Buffer:void 0,ne=J?J.allocUnsafe:void 0;function me(Ce,Ye){if(Ye)return Ce.slice();var Ve=Ce.length,mt=ne?ne(Ve):new Ce.constructor(Ve);return Ce.copy(mt),mt}g.exports=me}),$t=o((h,g)=>{var _=ce(),x=_.Uint8Array;g.exports=x}),Rt=o((h,g)=>{var _=$t();function x(M){var $=new M.constructor(M.byteLength);return new _($).set(new _(M)),$}g.exports=x}),Gt=o((h,g)=>{var _=Rt();function x(M,$){var J=$?_(M.buffer):M.buffer;return new M.constructor(J,M.byteOffset,M.length)}g.exports=x}),ln=o((h,g)=>{function _(x,M){var $=-1,J=x.length;for(M||(M=Array(J));++$<J;)M[$]=x[$];return M}g.exports=_}),mn=o((h,g)=>{var _=F(),x=Object.create,M=function(){function $(){}return function(J){if(!_(J))return{};if(x)return x(J);$.prototype=J;var ne=new $;return $.prototype=void 0,ne}}();g.exports=M}),yn=o((h,g)=>{function _(x,M){return function($){return x(M($))}}g.exports=_}),Ze=o((h,g)=>{var _=yn(),x=_(Object.getPrototypeOf,Object);g.exports=x}),it=o((h,g)=>{var _=Object.prototype;function x(M){var $=M&&M.constructor,J=typeof $=="function"&&$.prototype||_;return M===J}g.exports=x}),et=o((h,g)=>{var _=mn(),x=Ze(),M=it();function $(J){return typeof J.constructor=="function"&&!M(J)?_(x(J)):{}}g.exports=$}),Bt=o((h,g)=>{function _(x){return x!=null&&typeof x=="object"}g.exports=_}),Zt=o((h,g)=>{var _=q(),x=Bt(),M="[object Arguments]";function $(J){return x(J)&&_(J)==M}g.exports=$}),Sn=o((h,g)=>{var _=Zt(),x=Bt(),M=Object.prototype,$=M.hasOwnProperty,J=M.propertyIsEnumerable,ne=_(function(){return arguments}())?_:function(me){return x(me)&&$.call(me,"callee")&&!J.call(me,"callee")};g.exports=ne}),bn=o((h,g)=>{var _=Array.isArray;g.exports=_}),xn=o((h,g)=>{var _=9007199254740991;function x(M){return typeof M=="number"&&M>-1&&M%1==0&&M<=_}g.exports=x}),zn=o((h,g)=>{var _=R(),x=xn();function M($){return $!=null&&x($.length)&&!_($)}g.exports=M}),vn=o((h,g)=>{var _=zn(),x=Bt();function M($){return x($)&&_($)}g.exports=M}),tn=o((h,g)=>{function _(){return!1}g.exports=_}),un=o((h,g)=>{var _=ce(),x=tn(),M=typeof h=="object"&&h&&!h.nodeType&&h,$=M&&typeof g=="object"&&g&&!g.nodeType&&g,J=$&&$.exports===M,ne=J?_.Buffer:void 0,me=ne?ne.isBuffer:void 0,Ce=me||x;g.exports=Ce}),Xn=o((h,g)=>{var _=q(),x=Ze(),M=Bt(),$="[object Object]",J=Function.prototype,ne=Object.prototype,me=J.toString,Ce=ne.hasOwnProperty,Ye=me.call(Object);function Ve(mt){if(!M(mt)||_(mt)!=$)return!1;var Mt=x(mt);if(Mt===null)return!0;var Kt=Ce.call(Mt,"constructor")&&Mt.constructor;return typeof Kt=="function"&&Kt instanceof Kt&&me.call(Kt)==Ye}g.exports=Ve}),nr=o((h,g)=>{var _=q(),x=xn(),M=Bt(),$="[object Arguments]",J="[object Array]",ne="[object Boolean]",me="[object Date]",Ce="[object Error]",Ye="[object Function]",Ve="[object Map]",mt="[object Number]",Mt="[object Object]",Kt="[object RegExp]",fn="[object Set]",wn="[object String]",rr="[object WeakMap]",qe="[object ArrayBuffer]",Xe="[object DataView]",ct="[object Float32Array]",Nt="[object Float64Array]",_t="[object Int8Array]",Tt="[object Int16Array]",be="[object Int32Array]",Pe="[object Uint8Array]",Fe="[object Uint8ClampedArray]",Re="[object Uint16Array]",ze="[object Uint32Array]",Ue={};Ue[ct]=Ue[Nt]=Ue[_t]=Ue[Tt]=Ue[be]=Ue[Pe]=Ue[Fe]=Ue[Re]=Ue[ze]=!0,Ue[$]=Ue[J]=Ue[qe]=Ue[ne]=Ue[Xe]=Ue[me]=Ue[Ce]=Ue[Ye]=Ue[Ve]=Ue[mt]=Ue[Mt]=Ue[Kt]=Ue[fn]=Ue[wn]=Ue[rr]=!1;function rt(st){return M(st)&&x(st.length)&&!!Ue[_(st)]}g.exports=rt}),ur=o((h,g)=>{function _(x){return function(M){return x(M)}}g.exports=_}),Rn=o((h,g)=>{var _=X(),x=typeof h=="object"&&h&&!h.nodeType&&h,M=x&&typeof g=="object"&&g&&!g.nodeType&&g,$=M&&M.exports===x,J=$&&_.process,ne=function(){try{var me=M&&M.require&&M.require("util").types;return me||J&&J.binding&&J.binding("util")}catch{}}();g.exports=ne}),Cr=o((h,g)=>{var _=nr(),x=ur(),M=Rn(),$=M&&M.isTypedArray,J=$?x($):_;g.exports=J}),Ki=o((h,g)=>{function _(x,M){if(!(M==="constructor"&&typeof x[M]=="function")&&M!="__proto__")return x[M]}g.exports=_}),Ci=o((h,g)=>{var _=Ge(),x=f(),M=Object.prototype,$=M.hasOwnProperty;function J(ne,me,Ce){var Ye=ne[me];(!($.call(ne,me)&&x(Ye,Ce))||Ce===void 0&&!(me in ne))&&_(ne,me,Ce)}g.exports=J}),Us=o((h,g)=>{var _=Ci(),x=Ge();function M($,J,ne,me){var Ce=!ne;ne||(ne={});for(var Ye=-1,Ve=J.length;++Ye<Ve;){var mt=J[Ye],Mt=me?me(ne[mt],$[mt],mt,ne,$):void 0;Mt===void 0&&(Mt=$[mt]),Ce?x(ne,mt,Mt):_(ne,mt,Mt)}return ne}g.exports=M}),ss=o((h,g)=>{function _(x,M){for(var $=-1,J=Array(x);++$<x;)J[$]=M($);return J}g.exports=_}),Gn=o((h,g)=>{var _=9007199254740991,x=/^(?:0|[1-9]\d*)$/;function M($,J){var ne=typeof $;return J=J??_,!!J&&(ne=="number"||ne!="symbol"&&x.test($))&&$>-1&&$%1==0&&$<J}g.exports=M}),Ot=o((h,g)=>{var _=ss(),x=Sn(),M=bn(),$=un(),J=Gn(),ne=Cr(),me=Object.prototype,Ce=me.hasOwnProperty;function Ye(Ve,mt){var Mt=M(Ve),Kt=!Mt&&x(Ve),fn=!Mt&&!Kt&&$(Ve),wn=!Mt&&!Kt&&!fn&&ne(Ve),rr=Mt||Kt||fn||wn,qe=rr?_(Ve.length,String):[],Xe=qe.length;for(var ct in Ve)(mt||Ce.call(Ve,ct))&&!(rr&&(ct=="length"||fn&&(ct=="offset"||ct=="parent")||wn&&(ct=="buffer"||ct=="byteLength"||ct=="byteOffset")||J(ct,Xe)))&&qe.push(ct);return qe}g.exports=Ye}),Je=o((h,g)=>{function _(x){var M=[];if(x!=null)for(var $ in Object(x))M.push($);return M}g.exports=_}),Ut=o((h,g)=>{var _=F(),x=it(),M=Je(),$=Object.prototype,J=$.hasOwnProperty;function ne(me){if(!_(me))return M(me);var Ce=x(me),Ye=[];for(var Ve in me)Ve=="constructor"&&(Ce||!J.call(me,Ve))||Ye.push(Ve);return Ye}g.exports=ne}),_n=o((h,g)=>{var _=Ot(),x=Ut(),M=zn();function $(J){return M(J)?_(J,!0):x(J)}g.exports=$}),Xt=o((h,g)=>{var _=Us(),x=_n();function M($){return _($,x($))}g.exports=M}),Fn=o((h,g)=>{var _=tt(),x=gt(),M=Gt(),$=ln(),J=et(),ne=Sn(),me=bn(),Ce=vn(),Ye=un(),Ve=R(),mt=F(),Mt=Xn(),Kt=Cr(),fn=Ki(),wn=Xt();function rr(qe,Xe,ct,Nt,_t,Tt,be){var Pe=fn(qe,ct),Fe=fn(Xe,ct),Re=be.get(Fe);if(Re){_(qe,ct,Re);return}var ze=Tt?Tt(Pe,Fe,ct+"",qe,Xe,be):void 0,Ue=ze===void 0;if(Ue){var rt=me(Fe),st=!rt&&Ye(Fe),dt=!rt&&!st&&Kt(Fe);ze=Fe,rt||st||dt?me(Pe)?ze=Pe:Ce(Pe)?ze=$(Pe):st?(Ue=!1,ze=x(Fe,!0)):dt?(Ue=!1,ze=M(Fe,!0)):ze=[]:Mt(Fe)||ne(Fe)?(ze=Pe,ne(Pe)?ze=wn(Pe):(!mt(Pe)||Ve(Pe))&&(ze=J(Fe))):Ue=!1}Ue&&(be.set(Fe,ze),_t(ze,Fe,Nt,Tt,be),be.delete(Fe)),_(qe,ct,ze)}g.exports=rr}),Wt=o((h,g)=>{var _=re(),x=tt(),M=ut(),$=Fn(),J=F(),ne=_n(),me=Ki();function Ce(Ye,Ve,mt,Mt,Kt){Ye!==Ve&&M(Ve,function(fn,wn){if(Kt||(Kt=new _),J(fn))$(Ye,Ve,wn,mt,Ce,Mt,Kt);else{var rr=Mt?Mt(me(Ye,wn),fn,wn+"",Ye,Ve,Kt):void 0;rr===void 0&&(rr=fn),x(Ye,wn,rr)}},ne)}g.exports=Ce}),Lt=o((h,g)=>{function _(x){return x}g.exports=_}),hn=o((h,g)=>{function _(x,M,$){switch($.length){case 0:return x.call(M);case 1:return x.call(M,$[0]);case 2:return x.call(M,$[0],$[1]);case 3:return x.call(M,$[0],$[1],$[2])}return x.apply(M,$)}g.exports=_}),Ln=o((h,g)=>{var _=hn(),x=Math.max;function M($,J,ne){return J=x(J===void 0?$.length-1:J,0),function(){for(var me=arguments,Ce=-1,Ye=x(me.length-J,0),Ve=Array(Ye);++Ce<Ye;)Ve[Ce]=me[J+Ce];Ce=-1;for(var mt=Array(J+1);++Ce<J;)mt[Ce]=me[Ce];return mt[J]=ne(Ve),_($,this,mt)}}g.exports=M}),On=o((h,g)=>{function _(x){return function(){return x}}g.exports=_}),Wn=o((h,g)=>{var _=On(),x=Ae(),M=Lt(),$=x?function(J,ne){return x(J,"toString",{configurable:!0,enumerable:!1,value:_(ne),writable:!0})}:M;g.exports=$}),ar=o((h,g)=>{var _=800,x=16,M=Date.now;function $(J){var ne=0,me=0;return function(){var Ce=M(),Ye=x-(Ce-me);if(me=Ce,Ye>0){if(++ne>=_)return arguments[0]}else ne=0;return J.apply(void 0,arguments)}}g.exports=$}),Xr=o((h,g)=>{var _=Wn(),x=ar(),M=x(_);g.exports=M}),sr=o((h,g)=>{var _=Lt(),x=Ln(),M=Xr();function $(J,ne){return M(x(J,ne,_),J+"")}g.exports=$}),Fi=o((h,g)=>{var _=f(),x=zn(),M=Gn(),$=F();function J(ne,me,Ce){if(!$(Ce))return!1;var Ye=typeof me;return(Ye=="number"?x(Ce)&&M(me,Ce.length):Ye=="string"&&me in Ce)?_(Ce[me],ne):!1}g.exports=J}),Gr=o((h,g)=>{var _=sr(),x=Fi();function M($){return _(function(J,ne){var me=-1,Ce=ne.length,Ye=Ce>1?ne[Ce-1]:void 0,Ve=Ce>2?ne[2]:void 0;for(Ye=$.length>3&&typeof Ye=="function"?(Ce--,Ye):void 0,Ve&&x(ne[0],ne[1],Ve)&&(Ye=Ce<3?void 0:Ye,Ce=1),J=Object(J);++me<Ce;){var mt=ne[me];mt&&$(J,mt,me,Ye)}return J})}g.exports=M}),_o=o((h,g)=>{var _=Wt(),x=Gr(),M=x(function($,J,ne){_($,J,ne)});g.exports=M}),ir=o((h,g)=>{var _=q(),x=Bt(),M="[object Symbol]";function $(J){return typeof J=="symbol"||x(J)&&_(J)==M}g.exports=$}),gr=o((h,g)=>{var _=bn(),x=ir(),M=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$=/^\w*$/;function J(ne,me){if(_(ne))return!1;var Ce=typeof ne;return Ce=="number"||Ce=="symbol"||Ce=="boolean"||ne==null||x(ne)?!0:$.test(ne)||!M.test(ne)||me!=null&&ne in Object(me)}g.exports=J}),Ls=o((h,g)=>{var _=ae(),x="Expected a function";function M($,J){if(typeof $!="function"||J!=null&&typeof J!="function")throw new TypeError(x);var ne=function(){var me=arguments,Ce=J?J.apply(this,me):me[0],Ye=ne.cache;if(Ye.has(Ce))return Ye.get(Ce);var Ve=$.apply(this,me);return ne.cache=Ye.set(Ce,Ve)||Ye,Ve};return ne.cache=new(M.Cache||_),ne}M.Cache=_,g.exports=M}),Ha=o((h,g)=>{var _=Ls(),x=500;function M($){var J=_($,function(me){return ne.size===x&&ne.clear(),me}),ne=J.cache;return J}g.exports=M}),vu=o((h,g)=>{var _=Ha(),x=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,M=/\\(\\)?/g,$=_(function(J){var ne=[];return J.charCodeAt(0)===46&&ne.push(""),J.replace(x,function(me,Ce,Ye,Ve){ne.push(Ye?Ve.replace(M,"$1"):Ce||me)}),ne});g.exports=$}),_c=o((h,g)=>{function _(x,M){for(var $=-1,J=x==null?0:x.length,ne=Array(J);++$<J;)ne[$]=M(x[$],$,x);return ne}g.exports=_}),wc=o((h,g)=>{var _=he(),x=_c(),M=bn(),$=ir(),J=_?_.prototype:void 0,ne=J?J.toString:void 0;function me(Ce){if(typeof Ce=="string")return Ce;if(M(Ce))return x(Ce,me)+"";if($(Ce))return ne?ne.call(Ce):"";var Ye=Ce+"";return Ye=="0"&&1/Ce==-1/0?"-0":Ye}g.exports=me}),gl=o((h,g)=>{var _=wc();function x(M){return M==null?"":_(M)}g.exports=x}),ml=o((h,g)=>{var _=bn(),x=gr(),M=vu(),$=gl();function J(ne,me){return _(ne)?ne:x(ne,me)?[ne]:M($(ne))}g.exports=J}),$u=o((h,g)=>{var _=ir();function x(M){if(typeof M=="string"||_(M))return M;var $=M+"";return $=="0"&&1/M==-1/0?"-0":$}g.exports=x}),xc=o((h,g)=>{var _=ml(),x=$u();function M($,J){J=_(J,$);for(var ne=0,me=J.length;$!=null&&ne<me;)$=$[x(J[ne++])];return ne&&ne==me?$:void 0}g.exports=M}),Mo=o((h,g)=>{var _=xc();function x(M,$,J){var ne=M==null?void 0:_(M,$);return ne===void 0?J:ne}g.exports=x}),Wr=o((h,g)=>{(function(_,x){typeof h=="object"&&typeof g<"u"?g.exports=x():(_=_||self).RBush=x()})(h,function(){function _(qe,Xe,ct,Nt,_t){(function Tt(be,Pe,Fe,Re,ze){for(;Re>Fe;){if(Re-Fe>600){var Ue=Re-Fe+1,rt=Pe-Fe+1,st=Math.log(Ue),dt=.5*Math.exp(2*st/3),Ct=.5*Math.sqrt(st*dt*(Ue-dt)/Ue)*(rt-Ue/2<0?-1:1),St=Math.max(Fe,Math.floor(Pe-rt*dt/Ue+Ct)),en=Math.min(Re,Math.floor(Pe+(Ue-rt)*dt/Ue+Ct));Tt(be,Pe,St,en,ze)}var Nn=be[Pe],jn=Fe,Kn=Re;for(x(be,Fe,Pe),ze(be[Re],Nn)>0&&x(be,Fe,Re);jn<Kn;){for(x(be,jn,Kn),jn++,Kn--;ze(be[jn],Nn)<0;)jn++;for(;ze(be[Kn],Nn)>0;)Kn--}ze(be[Fe],Nn)===0?x(be,Fe,Kn):x(be,++Kn,Re),Kn<=Pe&&(Fe=Kn+1),Pe<=Kn&&(Re=Kn-1)}})(qe,Xe,ct||0,Nt||qe.length-1,_t||M)}function x(qe,Xe,ct){var Nt=qe[Xe];qe[Xe]=qe[ct],qe[ct]=Nt}function M(qe,Xe){return qe<Xe?-1:qe>Xe?1:0}var $=function(qe){qe===void 0&&(qe=9),this._maxEntries=Math.max(4,qe),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function J(qe,Xe,ct){if(!ct)return Xe.indexOf(qe);for(var Nt=0;Nt<Xe.length;Nt++)if(ct(qe,Xe[Nt]))return Nt;return-1}function ne(qe,Xe){me(qe,0,qe.children.length,Xe,qe)}function me(qe,Xe,ct,Nt,_t){_t||(_t=wn(null)),_t.minX=1/0,_t.minY=1/0,_t.maxX=-1/0,_t.maxY=-1/0;for(var Tt=Xe;Tt<ct;Tt++){var be=qe.children[Tt];Ce(_t,qe.leaf?Nt(be):be)}return _t}function Ce(qe,Xe){return qe.minX=Math.min(qe.minX,Xe.minX),qe.minY=Math.min(qe.minY,Xe.minY),qe.maxX=Math.max(qe.maxX,Xe.maxX),qe.maxY=Math.max(qe.maxY,Xe.maxY),qe}function Ye(qe,Xe){return qe.minX-Xe.minX}function Ve(qe,Xe){return qe.minY-Xe.minY}function mt(qe){return(qe.maxX-qe.minX)*(qe.maxY-qe.minY)}function Mt(qe){return qe.maxX-qe.minX+(qe.maxY-qe.minY)}function Kt(qe,Xe){return qe.minX<=Xe.minX&&qe.minY<=Xe.minY&&Xe.maxX<=qe.maxX&&Xe.maxY<=qe.maxY}function fn(qe,Xe){return Xe.minX<=qe.maxX&&Xe.minY<=qe.maxY&&Xe.maxX>=qe.minX&&Xe.maxY>=qe.minY}function wn(qe){return{children:qe,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function rr(qe,Xe,ct,Nt,_t){for(var Tt=[Xe,ct];Tt.length;)if(!((ct=Tt.pop())-(Xe=Tt.pop())<=Nt)){var be=Xe+Math.ceil((ct-Xe)/Nt/2)*Nt;_(qe,be,Xe,ct,_t),Tt.push(Xe,be,be,ct)}}return $.prototype.all=function(){return this._all(this.data,[])},$.prototype.search=function(qe){var Xe=this.data,ct=[];if(!fn(qe,Xe))return ct;for(var Nt=this.toBBox,_t=[];Xe;){for(var Tt=0;Tt<Xe.children.length;Tt++){var be=Xe.children[Tt],Pe=Xe.leaf?Nt(be):be;fn(qe,Pe)&&(Xe.leaf?ct.push(be):Kt(qe,Pe)?this._all(be,ct):_t.push(be))}Xe=_t.pop()}return ct},$.prototype.collides=function(qe){var Xe=this.data;if(!fn(qe,Xe))return!1;for(var ct=[];Xe;){for(var Nt=0;Nt<Xe.children.length;Nt++){var _t=Xe.children[Nt],Tt=Xe.leaf?this.toBBox(_t):_t;if(fn(qe,Tt)){if(Xe.leaf||Kt(qe,Tt))return!0;ct.push(_t)}}Xe=ct.pop()}return!1},$.prototype.load=function(qe){if(!qe||!qe.length)return this;if(qe.length<this._minEntries){for(var Xe=0;Xe<qe.length;Xe++)this.insert(qe[Xe]);return this}var ct=this._build(qe.slice(),0,qe.length-1,0);if(this.data.children.length)if(this.data.height===ct.height)this._splitRoot(this.data,ct);else{if(this.data.height<ct.height){var Nt=this.data;this.data=ct,ct=Nt}this._insert(ct,this.data.height-ct.height-1,!0)}else this.data=ct;return this},$.prototype.insert=function(qe){return qe&&this._insert(qe,this.data.height-1),this},$.prototype.clear=function(){return this.data=wn([]),this},$.prototype.remove=function(qe,Xe){if(!qe)return this;for(var ct,Nt,_t,Tt=this.data,be=this.toBBox(qe),Pe=[],Fe=[];Tt||Pe.length;){if(Tt||(Tt=Pe.pop(),Nt=Pe[Pe.length-1],ct=Fe.pop(),_t=!0),Tt.leaf){var Re=J(qe,Tt.children,Xe);if(Re!==-1)return Tt.children.splice(Re,1),Pe.push(Tt),this._condense(Pe),this}_t||Tt.leaf||!Kt(Tt,be)?Nt?(ct++,Tt=Nt.children[ct],_t=!1):Tt=null:(Pe.push(Tt),Fe.push(ct),ct=0,Nt=Tt,Tt=Tt.children[0])}return this},$.prototype.toBBox=function(qe){return qe},$.prototype.compareMinX=function(qe,Xe){return qe.minX-Xe.minX},$.prototype.compareMinY=function(qe,Xe){return qe.minY-Xe.minY},$.prototype.toJSON=function(){return this.data},$.prototype.fromJSON=function(qe){return this.data=qe,this},$.prototype._all=function(qe,Xe){for(var ct=[];qe;)qe.leaf?Xe.push.apply(Xe,qe.children):ct.push.apply(ct,qe.children),qe=ct.pop();return Xe},$.prototype._build=function(qe,Xe,ct,Nt){var _t,Tt=ct-Xe+1,be=this._maxEntries;if(Tt<=be)return ne(_t=wn(qe.slice(Xe,ct+1)),this.toBBox),_t;Nt||(Nt=Math.ceil(Math.log(Tt)/Math.log(be)),be=Math.ceil(Tt/Math.pow(be,Nt-1))),(_t=wn([])).leaf=!1,_t.height=Nt;var Pe=Math.ceil(Tt/be),Fe=Pe*Math.ceil(Math.sqrt(be));rr(qe,Xe,ct,Fe,this.compareMinX);for(var Re=Xe;Re<=ct;Re+=Fe){var ze=Math.min(Re+Fe-1,ct);rr(qe,Re,ze,Pe,this.compareMinY);for(var Ue=Re;Ue<=ze;Ue+=Pe){var rt=Math.min(Ue+Pe-1,ze);_t.children.push(this._build(qe,Ue,rt,Nt-1))}}return ne(_t,this.toBBox),_t},$.prototype._chooseSubtree=function(qe,Xe,ct,Nt){for(;Nt.push(Xe),!Xe.leaf&&Nt.length-1!==ct;){for(var _t=1/0,Tt=1/0,be=void 0,Pe=0;Pe<Xe.children.length;Pe++){var Fe=Xe.children[Pe],Re=mt(Fe),ze=(Ue=qe,rt=Fe,(Math.max(rt.maxX,Ue.maxX)-Math.min(rt.minX,Ue.minX))*(Math.max(rt.maxY,Ue.maxY)-Math.min(rt.minY,Ue.minY))-Re);ze<Tt?(Tt=ze,_t=Re<_t?Re:_t,be=Fe):ze===Tt&&Re<_t&&(_t=Re,be=Fe)}Xe=be||Xe.children[0]}var Ue,rt;return Xe},$.prototype._insert=function(qe,Xe,ct){var Nt=ct?qe:this.toBBox(qe),_t=[],Tt=this._chooseSubtree(Nt,this.data,Xe,_t);for(Tt.children.push(qe),Ce(Tt,Nt);Xe>=0&&_t[Xe].children.length>this._maxEntries;)this._split(_t,Xe),Xe--;this._adjustParentBBoxes(Nt,_t,Xe)},$.prototype._split=function(qe,Xe){var ct=qe[Xe],Nt=ct.children.length,_t=this._minEntries;this._chooseSplitAxis(ct,_t,Nt);var Tt=this._chooseSplitIndex(ct,_t,Nt),be=wn(ct.children.splice(Tt,ct.children.length-Tt));be.height=ct.height,be.leaf=ct.leaf,ne(ct,this.toBBox),ne(be,this.toBBox),Xe?qe[Xe-1].children.push(be):this._splitRoot(ct,be)},$.prototype._splitRoot=function(qe,Xe){this.data=wn([qe,Xe]),this.data.height=qe.height+1,this.data.leaf=!1,ne(this.data,this.toBBox)},$.prototype._chooseSplitIndex=function(qe,Xe,ct){for(var Nt,_t,Tt,be,Pe,Fe,Re,ze=1/0,Ue=1/0,rt=Xe;rt<=ct-Xe;rt++){var st=me(qe,0,rt,this.toBBox),dt=me(qe,rt,ct,this.toBBox),Ct=(_t=st,Tt=dt,be=void 0,Pe=void 0,Fe=void 0,Re=void 0,be=Math.max(_t.minX,Tt.minX),Pe=Math.max(_t.minY,Tt.minY),Fe=Math.min(_t.maxX,Tt.maxX),Re=Math.min(_t.maxY,Tt.maxY),Math.max(0,Fe-be)*Math.max(0,Re-Pe)),St=mt(st)+mt(dt);Ct<ze?(ze=Ct,Nt=rt,Ue=St<Ue?St:Ue):Ct===ze&&St<Ue&&(Ue=St,Nt=rt)}return Nt||ct-Xe},$.prototype._chooseSplitAxis=function(qe,Xe,ct){var Nt=qe.leaf?this.compareMinX:Ye,_t=qe.leaf?this.compareMinY:Ve;this._allDistMargin(qe,Xe,ct,Nt)<this._allDistMargin(qe,Xe,ct,_t)&&qe.children.sort(Nt)},$.prototype._allDistMargin=function(qe,Xe,ct,Nt){qe.children.sort(Nt);for(var _t=this.toBBox,Tt=me(qe,0,Xe,_t),be=me(qe,ct-Xe,ct,_t),Pe=Mt(Tt)+Mt(be),Fe=Xe;Fe<ct-Xe;Fe++){var Re=qe.children[Fe];Ce(Tt,qe.leaf?_t(Re):Re),Pe+=Mt(Tt)}for(var ze=ct-Xe-1;ze>=Xe;ze--){var Ue=qe.children[ze];Ce(be,qe.leaf?_t(Ue):Ue),Pe+=Mt(be)}return Pe},$.prototype._adjustParentBBoxes=function(qe,Xe,ct){for(var Nt=ct;Nt>=0;Nt--)Ce(Xe[Nt],qe)},$.prototype._condense=function(qe){for(var Xe=qe.length-1,ct=void 0;Xe>=0;Xe--)qe[Xe].children.length===0?Xe>0?(ct=qe[Xe-1].children).splice(ct.indexOf(qe[Xe]),1):this.clear():ne(qe[Xe],this.toBBox)},$})}),fr=o(h=>{Object.defineProperty(h,"__esModule",{value:!0}),h.earthRadius=63710088e-1,h.factors={centimeters:h.earthRadius*100,centimetres:h.earthRadius*100,degrees:h.earthRadius/111325,feet:h.earthRadius*3.28084,inches:h.earthRadius*39.37,kilometers:h.earthRadius/1e3,kilometres:h.earthRadius/1e3,meters:h.earthRadius,metres:h.earthRadius,miles:h.earthRadius/1609.344,millimeters:h.earthRadius*1e3,millimetres:h.earthRadius*1e3,nauticalmiles:h.earthRadius/1852,radians:1,yards:h.earthRadius*1.0936},h.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/h.earthRadius,yards:1.0936133},h.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function g(Re,ze,Ue){Ue===void 0&&(Ue={});var rt={type:"Feature"};return(Ue.id===0||Ue.id)&&(rt.id=Ue.id),Ue.bbox&&(rt.bbox=Ue.bbox),rt.properties=ze||{},rt.geometry=Re,rt}h.feature=g;function _(Re,ze,Ue){switch(Re){case"Point":return x(ze).geometry;case"LineString":return ne(ze).geometry;case"Polygon":return $(ze).geometry;case"MultiPoint":return Ve(ze).geometry;case"MultiLineString":return Ye(ze).geometry;case"MultiPolygon":return mt(ze).geometry;default:throw new Error(Re+" is invalid")}}h.geometry=_;function x(Re,ze,Ue){if(Ue===void 0&&(Ue={}),!Re)throw new Error("coordinates is required");if(!Array.isArray(Re))throw new Error("coordinates must be an Array");if(Re.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Tt(Re[0])||!Tt(Re[1]))throw new Error("coordinates must contain numbers");var rt={type:"Point",coordinates:Re};return g(rt,ze,Ue)}h.point=x;function M(Re,ze,Ue){return Ue===void 0&&(Ue={}),Ce(Re.map(function(rt){return x(rt,ze)}),Ue)}h.points=M;function $(Re,ze,Ue){Ue===void 0&&(Ue={});for(var rt=0,st=Re;rt<st.length;rt++){var dt=st[rt];if(dt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Ct=0;Ct<dt[dt.length-1].length;Ct++)if(dt[dt.length-1][Ct]!==dt[0][Ct])throw new Error("First and last Position are not equivalent.")}var St={type:"Polygon",coordinates:Re};return g(St,ze,Ue)}h.polygon=$;function J(Re,ze,Ue){return Ue===void 0&&(Ue={}),Ce(Re.map(function(rt){return $(rt,ze)}),Ue)}h.polygons=J;function ne(Re,ze,Ue){if(Ue===void 0&&(Ue={}),Re.length<2)throw new Error("coordinates must be an array of two or more positions");var rt={type:"LineString",coordinates:Re};return g(rt,ze,Ue)}h.lineString=ne;function me(Re,ze,Ue){return Ue===void 0&&(Ue={}),Ce(Re.map(function(rt){return ne(rt,ze)}),Ue)}h.lineStrings=me;function Ce(Re,ze){ze===void 0&&(ze={});var Ue={type:"FeatureCollection"};return ze.id&&(Ue.id=ze.id),ze.bbox&&(Ue.bbox=ze.bbox),Ue.features=Re,Ue}h.featureCollection=Ce;function Ye(Re,ze,Ue){Ue===void 0&&(Ue={});var rt={type:"MultiLineString",coordinates:Re};return g(rt,ze,Ue)}h.multiLineString=Ye;function Ve(Re,ze,Ue){Ue===void 0&&(Ue={});var rt={type:"MultiPoint",coordinates:Re};return g(rt,ze,Ue)}h.multiPoint=Ve;function mt(Re,ze,Ue){Ue===void 0&&(Ue={});var rt={type:"MultiPolygon",coordinates:Re};return g(rt,ze,Ue)}h.multiPolygon=mt;function Mt(Re,ze,Ue){Ue===void 0&&(Ue={});var rt={type:"GeometryCollection",geometries:Re};return g(rt,ze,Ue)}h.geometryCollection=Mt;function Kt(Re,ze){if(ze===void 0&&(ze=0),ze&&!(ze>=0))throw new Error("precision must be a positive number");var Ue=Math.pow(10,ze||0);return Math.round(Re*Ue)/Ue}h.round=Kt;function fn(Re,ze){ze===void 0&&(ze="kilometers");var Ue=h.factors[ze];if(!Ue)throw new Error(ze+" units is invalid");return Re*Ue}h.radiansToLength=fn;function wn(Re,ze){ze===void 0&&(ze="kilometers");var Ue=h.factors[ze];if(!Ue)throw new Error(ze+" units is invalid");return Re/Ue}h.lengthToRadians=wn;function rr(Re,ze){return Xe(wn(Re,ze))}h.lengthToDegrees=rr;function qe(Re){var ze=Re%360;return ze<0&&(ze+=360),ze}h.bearingToAzimuth=qe;function Xe(Re){var ze=Re%(2*Math.PI);return ze*180/Math.PI}h.radiansToDegrees=Xe;function ct(Re){var ze=Re%360;return ze*Math.PI/180}h.degreesToRadians=ct;function Nt(Re,ze,Ue){if(ze===void 0&&(ze="kilometers"),Ue===void 0&&(Ue="kilometers"),!(Re>=0))throw new Error("length must be a positive number");return fn(wn(Re,ze),Ue)}h.convertLength=Nt;function _t(Re,ze,Ue){if(ze===void 0&&(ze="meters"),Ue===void 0&&(Ue="kilometers"),!(Re>=0))throw new Error("area must be a positive number");var rt=h.areaFactors[ze];if(!rt)throw new Error("invalid original units");var st=h.areaFactors[Ue];if(!st)throw new Error("invalid final units");return Re/rt*st}h.convertArea=_t;function Tt(Re){return!isNaN(Re)&&Re!==null&&!Array.isArray(Re)}h.isNumber=Tt;function be(Re){return!!Re&&Re.constructor===Object}h.isObject=be;function Pe(Re){if(!Re)throw new Error("bbox is required");if(!Array.isArray(Re))throw new Error("bbox must be an Array");if(Re.length!==4&&Re.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");Re.forEach(function(ze){if(!Tt(ze))throw new Error("bbox must only contain numbers")})}h.validateBBox=Pe;function Fe(Re){if(!Re)throw new Error("id is required");if(["string","number"].indexOf(typeof Re)===-1)throw new Error("id must be a number or a string")}h.validateId=Fe}),Ga=o(h=>{Object.defineProperty(h,"__esModule",{value:!0});var g=fr();function _(Xe,ct,Nt){if(Xe!==null)for(var _t,Tt,be,Pe,Fe,Re,ze,Ue=0,rt=0,st,dt=Xe.type,Ct=dt==="FeatureCollection",St=dt==="Feature",en=Ct?Xe.features.length:1,Nn=0;Nn<en;Nn++){ze=Ct?Xe.features[Nn].geometry:St?Xe.geometry:Xe,st=ze?ze.type==="GeometryCollection":!1,Fe=st?ze.geometries.length:1;for(var jn=0;jn<Fe;jn++){var Kn=0,Qr=0;if(Pe=st?ze.geometries[jn]:ze,Pe!==null){Re=Pe.coordinates;var fi=Pe.type;switch(Ue=Nt&&(fi==="Polygon"||fi==="MultiPolygon")?1:0,fi){case null:break;case"Point":if(ct(Re,rt,Nn,Kn,Qr)===!1)return!1;rt++,Kn++;break;case"LineString":case"MultiPoint":for(_t=0;_t<Re.length;_t++){if(ct(Re[_t],rt,Nn,Kn,Qr)===!1)return!1;rt++,fi==="MultiPoint"&&Kn++}fi==="LineString"&&Kn++;break;case"Polygon":case"MultiLineString":for(_t=0;_t<Re.length;_t++){for(Tt=0;Tt<Re[_t].length-Ue;Tt++){if(ct(Re[_t][Tt],rt,Nn,Kn,Qr)===!1)return!1;rt++}fi==="MultiLineString"&&Kn++,fi==="Polygon"&&Qr++}fi==="Polygon"&&Kn++;break;case"MultiPolygon":for(_t=0;_t<Re.length;_t++){for(Qr=0,Tt=0;Tt<Re[_t].length;Tt++){for(be=0;be<Re[_t][Tt].length-Ue;be++){if(ct(Re[_t][Tt][be],rt,Nn,Kn,Qr)===!1)return!1;rt++}Qr++}Kn++}break;case"GeometryCollection":for(_t=0;_t<Pe.geometries.length;_t++)if(_(Pe.geometries[_t],ct,Nt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function x(Xe,ct,Nt,_t){var Tt=Nt;return _(Xe,function(be,Pe,Fe,Re,ze){Pe===0&&Nt===void 0?Tt=be:Tt=ct(Tt,be,Pe,Fe,Re,ze)},_t),Tt}function M(Xe,ct){var Nt;switch(Xe.type){case"FeatureCollection":for(Nt=0;Nt<Xe.features.length&&ct(Xe.features[Nt].properties,Nt)!==!1;Nt++);break;case"Feature":ct(Xe.properties,0);break}}function $(Xe,ct,Nt){var _t=Nt;return M(Xe,function(Tt,be){be===0&&Nt===void 0?_t=Tt:_t=ct(_t,Tt,be)}),_t}function J(Xe,ct){if(Xe.type==="Feature")ct(Xe,0);else if(Xe.type==="FeatureCollection")for(var Nt=0;Nt<Xe.features.length&&ct(Xe.features[Nt],Nt)!==!1;Nt++);}function ne(Xe,ct,Nt){var _t=Nt;return J(Xe,function(Tt,be){be===0&&Nt===void 0?_t=Tt:_t=ct(_t,Tt,be)}),_t}function me(Xe){var ct=[];return _(Xe,function(Nt){ct.push(Nt)}),ct}function Ce(Xe,ct){var Nt,_t,Tt,be,Pe,Fe,Re,ze,Ue,rt,st=0,dt=Xe.type==="FeatureCollection",Ct=Xe.type==="Feature",St=dt?Xe.features.length:1;for(Nt=0;Nt<St;Nt++){for(Fe=dt?Xe.features[Nt].geometry:Ct?Xe.geometry:Xe,ze=dt?Xe.features[Nt].properties:Ct?Xe.properties:{},Ue=dt?Xe.features[Nt].bbox:Ct?Xe.bbox:void 0,rt=dt?Xe.features[Nt].id:Ct?Xe.id:void 0,Re=Fe?Fe.type==="GeometryCollection":!1,Pe=Re?Fe.geometries.length:1,Tt=0;Tt<Pe;Tt++){if(be=Re?Fe.geometries[Tt]:Fe,be===null){if(ct(null,st,ze,Ue,rt)===!1)return!1;continue}switch(be.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(ct(be,st,ze,Ue,rt)===!1)return!1;break}case"GeometryCollection":{for(_t=0;_t<be.geometries.length;_t++)if(ct(be.geometries[_t],st,ze,Ue,rt)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}st++}}function Ye(Xe,ct,Nt){var _t=Nt;return Ce(Xe,function(Tt,be,Pe,Fe,Re){be===0&&Nt===void 0?_t=Tt:_t=ct(_t,Tt,be,Pe,Fe,Re)}),_t}function Ve(Xe,ct){Ce(Xe,function(Nt,_t,Tt,be,Pe){var Fe=Nt===null?null:Nt.type;switch(Fe){case null:case"Point":case"LineString":case"Polygon":return ct(g.feature(Nt,Tt,{bbox:be,id:Pe}),_t,0)===!1?!1:void 0}var Re;switch(Fe){case"MultiPoint":Re="Point";break;case"MultiLineString":Re="LineString";break;case"MultiPolygon":Re="Polygon";break}for(var ze=0;ze<Nt.coordinates.length;ze++){var Ue=Nt.coordinates[ze],rt={type:Re,coordinates:Ue};if(ct(g.feature(rt,Tt),_t,ze)===!1)return!1}})}function mt(Xe,ct,Nt){var _t=Nt;return Ve(Xe,function(Tt,be,Pe){be===0&&Pe===0&&Nt===void 0?_t=Tt:_t=ct(_t,Tt,be,Pe)}),_t}function Mt(Xe,ct){Ve(Xe,function(Nt,_t,Tt){var be=0;if(Nt.geometry){var Pe=Nt.geometry.type;if(!(Pe==="Point"||Pe==="MultiPoint")){var Fe,Re=0,ze=0,Ue=0;if(_(Nt,function(rt,st,dt,Ct,St){if(Fe===void 0||_t>Re||Ct>ze||St>Ue){Fe=rt,Re=_t,ze=Ct,Ue=St,be=0;return}var en=g.lineString([Fe,rt],Nt.properties);if(ct(en,_t,Tt,St,be)===!1)return!1;be++,Fe=rt})===!1)return!1}}})}function Kt(Xe,ct,Nt){var _t=Nt,Tt=!1;return Mt(Xe,function(be,Pe,Fe,Re,ze){Tt===!1&&Nt===void 0?_t=be:_t=ct(_t,be,Pe,Fe,Re,ze),Tt=!0}),_t}function fn(Xe,ct){if(!Xe)throw new Error("geojson is required");Ve(Xe,function(Nt,_t,Tt){if(Nt.geometry!==null){var be=Nt.geometry.type,Pe=Nt.geometry.coordinates;switch(be){case"LineString":if(ct(Nt,_t,Tt,0,0)===!1)return!1;break;case"Polygon":for(var Fe=0;Fe<Pe.length;Fe++)if(ct(g.lineString(Pe[Fe],Nt.properties),_t,Tt,Fe)===!1)return!1;break}}})}function wn(Xe,ct,Nt){var _t=Nt;return fn(Xe,function(Tt,be,Pe,Fe){be===0&&Nt===void 0?_t=Tt:_t=ct(_t,Tt,be,Pe,Fe)}),_t}function rr(Xe,ct){if(ct=ct||{},!g.isObject(ct))throw new Error("options is invalid");var Nt=ct.featureIndex||0,_t=ct.multiFeatureIndex||0,Tt=ct.geometryIndex||0,be=ct.segmentIndex||0,Pe=ct.properties,Fe;switch(Xe.type){case"FeatureCollection":Nt<0&&(Nt=Xe.features.length+Nt),Pe=Pe||Xe.features[Nt].properties,Fe=Xe.features[Nt].geometry;break;case"Feature":Pe=Pe||Xe.properties,Fe=Xe.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Fe=Xe;break;default:throw new Error("geojson is invalid")}if(Fe===null)return null;var Re=Fe.coordinates;switch(Fe.type){case"Point":case"MultiPoint":return null;case"LineString":return be<0&&(be=Re.length+be-1),g.lineString([Re[be],Re[be+1]],Pe,ct);case"Polygon":return Tt<0&&(Tt=Re.length+Tt),be<0&&(be=Re[Tt].length+be-1),g.lineString([Re[Tt][be],Re[Tt][be+1]],Pe,ct);case"MultiLineString":return _t<0&&(_t=Re.length+_t),be<0&&(be=Re[_t].length+be-1),g.lineString([Re[_t][be],Re[_t][be+1]],Pe,ct);case"MultiPolygon":return _t<0&&(_t=Re.length+_t),Tt<0&&(Tt=Re[_t].length+Tt),be<0&&(be=Re[_t][Tt].length-be-1),g.lineString([Re[_t][Tt][be],Re[_t][Tt][be+1]],Pe,ct)}throw new Error("geojson is invalid")}function qe(Xe,ct){if(ct=ct||{},!g.isObject(ct))throw new Error("options is invalid");var Nt=ct.featureIndex||0,_t=ct.multiFeatureIndex||0,Tt=ct.geometryIndex||0,be=ct.coordIndex||0,Pe=ct.properties,Fe;switch(Xe.type){case"FeatureCollection":Nt<0&&(Nt=Xe.features.length+Nt),Pe=Pe||Xe.features[Nt].properties,Fe=Xe.features[Nt].geometry;break;case"Feature":Pe=Pe||Xe.properties,Fe=Xe.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Fe=Xe;break;default:throw new Error("geojson is invalid")}if(Fe===null)return null;var Re=Fe.coordinates;switch(Fe.type){case"Point":return g.point(Re,Pe,ct);case"MultiPoint":return _t<0&&(_t=Re.length+_t),g.point(Re[_t],Pe,ct);case"LineString":return be<0&&(be=Re.length+be),g.point(Re[be],Pe,ct);case"Polygon":return Tt<0&&(Tt=Re.length+Tt),be<0&&(be=Re[Tt].length+be),g.point(Re[Tt][be],Pe,ct);case"MultiLineString":return _t<0&&(_t=Re.length+_t),be<0&&(be=Re[_t].length+be),g.point(Re[_t][be],Pe,ct);case"MultiPolygon":return _t<0&&(_t=Re.length+_t),Tt<0&&(Tt=Re[_t].length+Tt),be<0&&(be=Re[_t][Tt].length-be),g.point(Re[_t][Tt][be],Pe,ct)}throw new Error("geojson is invalid")}h.coordAll=me,h.coordEach=_,h.coordReduce=x,h.featureEach=J,h.featureReduce=ne,h.findPoint=qe,h.findSegment=rr,h.flattenEach=Ve,h.flattenReduce=mt,h.geomEach=Ce,h.geomReduce=Ye,h.lineEach=fn,h.lineReduce=wn,h.propEach=M,h.propReduce=$,h.segmentEach=Mt,h.segmentReduce=Kt}),ga=o(h=>{Object.defineProperty(h,"__esModule",{value:!0});var g=Ga();function _(x){var M=[1/0,1/0,-1/0,-1/0];return g.coordEach(x,function($){M[0]>$[0]&&(M[0]=$[0]),M[1]>$[1]&&(M[1]=$[1]),M[2]<$[0]&&(M[2]=$[0]),M[3]<$[1]&&(M[3]=$[1])}),M}_.default=_,h.default=_}),Ro=o((h,g)=>{var _=Wr(),x=fr(),M=Ga(),$=ga().default,J=M.featureEach;M.coordEach,x.polygon;var ne=x.featureCollection;function me(Ce){var Ye=new _(Ce);return Ye.insert=function(Ve){if(Ve.type!=="Feature")throw new Error("invalid feature");return Ve.bbox=Ve.bbox?Ve.bbox:$(Ve),_.prototype.insert.call(this,Ve)},Ye.load=function(Ve){var mt=[];return Array.isArray(Ve)?Ve.forEach(function(Mt){if(Mt.type!=="Feature")throw new Error("invalid features");Mt.bbox=Mt.bbox?Mt.bbox:$(Mt),mt.push(Mt)}):J(Ve,function(Mt){if(Mt.type!=="Feature")throw new Error("invalid features");Mt.bbox=Mt.bbox?Mt.bbox:$(Mt),mt.push(Mt)}),_.prototype.load.call(this,mt)},Ye.remove=function(Ve,mt){if(Ve.type!=="Feature")throw new Error("invalid feature");return Ve.bbox=Ve.bbox?Ve.bbox:$(Ve),_.prototype.remove.call(this,Ve,mt)},Ye.clear=function(){return _.prototype.clear.call(this)},Ye.search=function(Ve){var mt=_.prototype.search.call(this,this.toBBox(Ve));return ne(mt)},Ye.collides=function(Ve){return _.prototype.collides.call(this,this.toBBox(Ve))},Ye.all=function(){var Ve=_.prototype.all.call(this);return ne(Ve)},Ye.toJSON=function(){return _.prototype.toJSON.call(this)},Ye.fromJSON=function(Ve){return _.prototype.fromJSON.call(this,Ve)},Ye.toBBox=function(Ve){var mt;if(Ve.bbox)mt=Ve.bbox;else if(Array.isArray(Ve)&&Ve.length===4)mt=Ve;else if(Array.isArray(Ve)&&Ve.length===6)mt=[Ve[0],Ve[1],Ve[3],Ve[4]];else if(Ve.type==="Feature")mt=$(Ve);else if(Ve.type==="FeatureCollection")mt=$(Ve);else throw new Error("invalid geojson");return{minX:mt[0],minY:mt[1],maxX:mt[2],maxY:mt[3]}},Ye}g.exports=me,g.exports.default=me});Array.prototype.findIndex=Array.prototype.findIndex||function(h){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof h!="function")throw new TypeError("callback must be a function");for(var g=Object(this),_=g.length>>>0,x=arguments[1],M=0;M<_;M++)if(h.call(x,g[M],M,g))return M;return-1},Array.prototype.find=Array.prototype.find||function(h){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof h!="function")throw new TypeError("callback must be a function");for(var g=Object(this),_=g.length>>>0,x=arguments[1],M=0;M<_;M++){var $=g[M];if(h.call(x,$,M,g))return $}},typeof Object.assign!="function"&&(Object.assign=function(h){if(h==null)throw new TypeError("Cannot convert undefined or null to object");h=Object(h);for(var g=1;g<arguments.length;g++){var _=arguments[g];if(_!=null)for(var x in _)Object.prototype.hasOwnProperty.call(_,x)&&(h[x]=_[x])}return h}),function(h){h.forEach(function(g){g.hasOwnProperty("remove")||Object.defineProperty(g,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(h,g){if(this==null)throw new TypeError('"this" is null or not defined');var _=Object(this),x=_.length>>>0;if(x===0)return!1;var M=g|0,$=Math.max(M>=0?M:x-Math.abs(M),0);function J(ne,me){return ne===me||typeof ne=="number"&&typeof me=="number"&&isNaN(ne)&&isNaN(me)}for(;$<x;){if(J(_[$],h))return!0;$++}return!1}});var ql={version:"2.18.3"},mr=l(_o()),qr={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},Wa={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex lschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer lschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Lnge",segmentLength:"Segment Lnge",area:"Flche",radius:"Radius",perimeter:"Umfang",height:"Hhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},Cs={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},Ss={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},Vu={tooltips:{placeMarker:"Adaug un punct",firstVertex:"Apas aici pentru a aduga primul Vertex",continueLine:"Apas aici pentru a continua desenul",finishLine:"Apas pe orice obiect pentru a finisa desenul",finishPoly:"Apas pe primul obiect pentru a finisa",finishRect:"Apas pentru a finisa",startCircle:"Apas pentru a desena un cerc",finishCircle:"Apas pentru a finisa un cerc",placeCircleMarker:"Adaug un punct"},actions:{finish:"Termin",cancel:"Anuleaz",removeLastVertex:"terge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaug o bulin",drawPolyButton:"Deseneaz un poligon",drawLineButton:"Deseneaz o linie",drawCircleButton:"Deseneaz un cerc",drawRectButton:"Deseneaz un dreptunghi",editButton:"Editeaz straturile",dragButton:"Mut straturile",cutButton:"Taie straturile",deleteButton:"terge straturile",drawCircleMarkerButton:"Deseneaz marcatorul cercului",snappingButton:"Fixai marcatorul glisat pe alte straturi i vrfuri",pinningButton:"Fixai vrfurile partajate mpreun",rotateButton:"Rotii stratul"}},vl={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:"     ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" "}},ma={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vrtice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del crculo",finishCircle:"Presiona para finalizar el crculo",placeCircleMarker:"Presiona para colocar un marcador de crculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar ltimo vrtice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polgono",drawLineButton:"Dibujar Lnea",drawCircleButton:"Dibujar Crculo",drawRectButton:"Dibujar Rectngulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Crculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vrtices",pinningButton:"Fijar juntos los vrtices compartidos",rotateButton:"Rotar capa"}},Di={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beindigen",finishPoly:"Klik op het eerst punt om te beindigen",finishRect:"Klik om te beindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},Fo={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer  dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"diter des calques",dragButton:"Dplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"pingler ensemble les sommets partags",rotateButton:"Tourner des calques"}},qa={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},wo={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},yu={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vrtice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do crculo",finishCircle:"Clique para finalizar o crculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover ltimo vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},Ya={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vrtice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do crculo",finishCircle:"Clique para terminar o crculo",placeCircleMarker:"Clique para colocar marcador de crculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover ltimo Vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},Hu={tooltips:{placeMarker:"Kliknij, aby umieci znacznik",firstVertex:"Kliknij, aby umieci pierwszy wierzchoek",continueLine:"Kliknij, aby kontynuowa rysowanie",finishLine:"Kliknij dowolny istniejcy znacznik, aby zakoczy",finishPoly:"Kliknij pierwszy znacznik, aby zakoczy",finishRect:"Kliknij, aby zakoczy",startCircle:"Kliknij, aby umieci rodek okrgu",finishCircle:"Kliknij, aby zakoczy okrg",placeCircleMarker:"Kliknij, aby umieci znacznik okrgu",placeText:"Kliknij, aby umieci tekst"},actions:{finish:"Zakocz",cancel:"Anuluj",removeLastVertex:"Usu ostatni wierzchoek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokt",drawLineButton:"Rysuj lini",drawCircleButton:"Rysuj okrg",drawRectButton:"Rysuj prostokt",editButton:"Edytuj warstwy",dragButton:"Przecignij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usu warstwy",drawCircleMarkerButton:"Rysuj znacznik okrgy",snappingButton:"Przycignij przenoszony znacznik do innych warstw i wierzchokw",pinningButton:"Przypnij wsplne wierzchoki razem",rotateButton:"Obr warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne ledzenie linii"},measurements:{totalLength:"Dugo",segmentLength:"Dugo odcinka",area:"Obszar",radius:"Promie",perimeter:"Obwd",height:"Wysoko",width:"Szeroko",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},jo={tooltips:{placeMarker:"Klicka fr att placera markr",firstVertex:"Klicka fr att placera frsta hrnet",continueLine:"Klicka fr att fortstta rita",finishLine:"Klicka p en existerande punkt fr att slutfra",finishPoly:"Klicka p den frsta punkten fr att slutfra",finishRect:"Klicka fr att slutfra",startCircle:"Klicka fr att placera cirkelns centrum",finishCircle:"Klicka fr att slutfra cirkeln",placeCircleMarker:"Klicka fr att placera cirkelmarkr"},actions:{finish:"Slutfr",cancel:"Avbryt",removeLastVertex:"Ta bort sista hrnet"},buttonTitles:{drawMarkerButton:"Rita Markr",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkr",snappingButton:"Snpp dra markren till andra lager och hrn",pinningButton:"Fst delade hrn tillsammans",rotateButton:"Rotera lagret"}},va={tooltips:{placeMarker:"     ",firstVertex:"       ",continueLine:"      ",finishLine:"        ",finishPoly:"       ",finishRect:"    ",startCircle:"      ",finishCircle:"      ",placeCircleMarker:"      "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"        ",pinningButton:"   ",rotateButton:"  "}},Ka={tooltips:{placeMarker:"Kattintson a jell elhelyezshez",firstVertex:"Kattintson az els pont elhelyezshez",continueLine:"Kattintson a kvetkez pont elhelyezshez",finishLine:"A befejezshez kattintson egy meglv pontra",finishPoly:"A befejezshez kattintson az els pontra",finishRect:"Kattintson a befejezshez",startCircle:"Kattintson a kr kzppontjnak elhelyezshez",finishCircle:"Kattintson a kr befejezshez",placeCircleMarker:"Kattintson a krjell elhelyezshez"},actions:{finish:"Befejezs",cancel:"Mgse",removeLastVertex:"Utols pont eltvoltsa"},buttonTitles:{drawMarkerButton:"Jell rajzolsa",drawPolyButton:"Poligon rajzolsa",drawLineButton:"Vonal rajzolsa",drawCircleButton:"Kr rajzolsa",drawRectButton:"Ngyzet rajzolsa",editButton:"Elemek szerkesztse",dragButton:"Elemek mozgatsa",cutButton:"Elemek vgsa",deleteButton:"Elemek trlse",drawCircleMarkerButton:"Kr jell rajzolsa",snappingButton:"Kapcsolja a jelltt msik elemhez vagy ponthoz",pinningButton:"Kzs pontok sszektse",rotateButton:"Flia elforgatsa"}},Yl={tooltips:{placeMarker:"Tryk for at placere en markr",firstVertex:"Tryk for at placere det frste punkt",continueLine:"Tryk for at fortstte linjen",finishLine:"Tryk p et eksisterende punkt for at afslutte",finishPoly:"Tryk p det frste punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkr"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markr",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Trk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkr",snappingButton:"Fastgr trukket markr til andre elementer",pinningButton:"Sammenlg delte elementer",rotateButton:"Roter laget"}},os={tooltips:{placeMarker:"Klikk for  plassere punkt",firstVertex:"Klikk for  plassere frste punkt",continueLine:"Klikk for  tegne videre",finishLine:"Klikk p et eksisterende punkt for  fullfre",finishPoly:"Klikk frste punkt for  fullfre",finishRect:"Klikk for  fullfre",startCircle:"Klikk for  sette sirkel midtpunkt",finishCircle:"Klikk for  fullfre sirkel",placeCircleMarker:"Klikk for  plassere sirkel",placeText:"Klikk for  plassere tekst"},actions:{finish:"Fullfr",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotr objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalr objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Omrde",radius:"Radius",perimeter:"Omriss",height:"Hyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkr"}},Lc={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"   ",finishLine:"      ",finishPoly:"     ",finishRect:"  ",startCircle:"    ",finishCircle:"    ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"      ",rotateButton:" ",drawTextButton:" ",scaleButton:"",autoTracingButton:" "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},bu={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:" -    ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"'   ",rotateButton:" "}},cr={tooltips:{placeMarker:"areti yerletirmek iin tklayn",firstVertex:"lk tepe noktasn yerletirmek iin tklayn",continueLine:"izime devam etmek iin tklayn",finishLine:"Bitirmek iin mevcut herhangi bir iaretiyi tklayn",finishPoly:"Bitirmek iin ilk iaretiyi tklayn",finishRect:"Bitirmek iin tklayn",startCircle:"Daire merkezine yerletirmek iin tklayn",finishCircle:"Daireyi bitirmek iin tklayn",placeCircleMarker:"Daire iaretisi yerletirmek iin tklayn"},actions:{finish:"Bitir",cancel:"ptal",removeLastVertex:"Son keyi kaldr"},buttonTitles:{drawMarkerButton:"izim aretisi",drawPolyButton:"okgenler iz",drawLineButton:"oklu izgi iz",drawCircleButton:"ember iz",drawRectButton:"Dikdrtgen iz",editButton:"Katmanlar dzenle",dragButton:"Katmanlar srkle",cutButton:"Katmanlar kes",deleteButton:"Katmanlar kaldr",drawCircleMarkerButton:"Daire iaretisi iz",snappingButton:"Srklenen iaretiyi dier katmanlara ve kelere yaptr",pinningButton:"Paylalan keleri birbirine sabitle",rotateButton:"Katman dndr"}},vr={tooltips:{placeMarker:"Kliknutm vytvote znaku",firstVertex:"Kliknutm vytvote prvn objekt",continueLine:"Kliknutm pokraujte v kreslen",finishLine:"Kliknut na libovolnou existujc znaku pro dokonen",finishPoly:"Vyberte prvn bod pro dokonen",finishRect:"Kliknte pro dokonen",startCircle:"Kliknutm pidejte sted kruhu",finishCircle:",   ",placeCircleMarker:"Kliknutm nastavte polomr"},actions:{finish:"Dokonit",cancel:"Zruit",removeLastVertex:"Zruit posledn akci"},buttonTitles:{drawMarkerButton:"Pidat znaku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit kivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdlnk",editButton:"Upravit vrstvu",dragButton:"Peneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Pidat kruhovou znaku",snappingButton:"Navzat tanou znaku k dalm vrstvm a vrcholm",pinningButton:"Spojit spolen body dohromady",rotateButton:"Otote vrstvu"}},zo={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:"",placeText:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:"",drawTextButton:""}},$r={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtmist",finishLine:"Klikkaa olemassa olevaa merkki lopettaaksesi",finishPoly:"Klikkaa ensimmist merkki lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrn keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrn",placeCircleMarker:"Klikkaa asettaaksesi ympyrmerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirr merkkej",drawPolyButton:"Piirr monikulmioita",drawLineButton:"Piirr viivoja",drawCircleButton:"Piirr ympyr",drawRectButton:"Piirr neliskulmioita",editButton:"Muokkaa",dragButton:"Siirr",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirr ympyrmerkki",snappingButton:"Kiinnit siirrettv merkki toisiin muotoihin",pinningButton:"Kiinnit jaetut muodot yhteen",rotateButton:"Knn",drawTextButton:"Piirr teksti"}},Gu={tooltips:{placeMarker:"  ",firstVertex:"   ",continueLine:"  ",finishLine:"   ",finishPoly:"   ",finishRect:" ",startCircle:"    ",finishCircle:"  ",placeCircleMarker:"   ",placeText:"  "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" ",drawTextButton:" "}},yl={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"    ",finishLine:"    ",finishPoly:"    ",finishRect:"  ",startCircle:"    ",finishCircle:"   ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:" ",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:"  ",cutButton:"  ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"     ",pinningButton:"   ",rotateButton:" ",drawTextButton:" ",scaleButton:"  ",autoTracingButton:"  "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},bl=Ya,Uo={en:qr,de:Wa,it:Cs,id:Ss,ro:Vu,ru:vl,es:ma,nl:Di,fr:Fo,pt:bl,pt_br:yu,pt_pt:Ya,zh:qa,zh_tw:wo,pl:Hu,sv:jo,el:va,hu:Ka,da:Yl,no:os,fa:Lc,ua:bu,tr:cr,cz:vr,ja:zo,fi:$r,ko:Gu,ky:yl},Za={_globalEditModeEnabled:!1,enableGlobalEditMode(h){let g={...h};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(_=>{this._isRelevantForEdit(_)&&_.pm.enable(g)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(h=>{h.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(h=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(h)},handleLayerAdditionInGlobalEditMode(){let h=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let g in h){let _=h[g];this._isRelevantForEdit(_)&&_.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:h}){this._addedLayersEdit[L.stamp(h)]=h},_isRelevantForEdit(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowEditing}},Wu=Za,Kl={_globalDragModeEnabled:!1,enableGlobalDragMode(){let h=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},h.forEach(g=>{this._isRelevantForDrag(g)&&g.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let h=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,h.forEach(g=>{g.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let h=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let g in h){let _=h[g];this._isRelevantForDrag(_)&&_.pm.enableLayerDrag()}},_layerAddedDrag({layer:h}){this._addedLayersDrag[L.stamp(h)]=h},_isRelevantForDrag(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.draggable}},dr=Kl,Ar={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(h=>{this._isRelevantForRemoval(h)&&(h.pm.enabled()&&h.pm.disable(),h.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(h=>{h.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(h){let g=h.target;this._isRelevantForRemoval(g)&&!g.pm.dragging()&&(g.removeFrom(this.map.pm._getContainingLayer()),g.remove(),g instanceof L.LayerGroup?(this._fireRemoveLayerGroup(g),this._fireRemoveLayerGroup(this.map,g)):(g.pm._fireRemove(g),g.pm._fireRemove(this.map,g)))},_isRelevantForRemoval(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let h=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let g in h){let _=h[g];this._isRelevantForRemoval(_)&&(_.pm.enabled()&&_.pm.disable(),_.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:h}){this._addedLayersRemoval[L.stamp(h)]=h}},Xa=Ar,Cc={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(h=>h instanceof L.Polyline).forEach(h=>{this._isRelevantForRotate(h)&&h.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(h=>h instanceof L.Polyline).forEach(h=>{h.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(h){return h.pm&&h instanceof L.Polyline&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let h=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let g in h){let _=h[g];this._isRelevantForRemoval(_)&&_.pm.enableRotate()}},_layerAddedRotate({layer:h}){this._addedLayersRotate[L.stamp(h)]=h}},Zl=Cc,_u=l(_o()),_l={_fireDrawStart(h="Draw",g={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},h,g)},_fireDrawEnd(h="Draw",g={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},h,g)},_fireCreate(h,g="Draw",_={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:h,layer:h},g,_)},_fireCenterPlaced(h="Draw",g={}){let _=h==="Draw"?this._layer:void 0,x=h!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:_,layer:x,latlng:this._layer.getLatLng()},h,g)},_fireCut(h,g,_,x="Draw",M={}){this.__fire(h,"pm:cut",{shape:this._shape,layer:g,originalLayer:_},x,M)},_fireEdit(h=this._layer,g="Edit",_={}){this.__fire(h,"pm:edit",{layer:this._layer,shape:this.getShape()},g,_)},_fireEnable(h="Edit",g={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},h,g)},_fireDisable(h="Edit",g={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},h,g)},_fireUpdate(h="Edit",g={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},h,g)},_fireMarkerDragStart(h,g=void 0,_="Edit",x={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:g},_,x)},_fireMarkerDrag(h,g=void 0,_="Edit",x={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:g},_,x)},_fireMarkerDragEnd(h,g=void 0,_=void 0,x="Edit",M={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:g,intersectionReset:_},x,M)},_fireDragStart(h="Edit",g={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},h,g)},_fireDrag(h,g="Edit",_={}){this.__fire(this._layer,"pm:drag",{...h,shape:this.getShape()},g,_)},_fireDragEnd(h="Edit",g={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},h,g)},_fireDragEnable(h="Edit",g={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},h,g)},_fireDragDisable(h="Edit",g={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},h,g)},_fireRemove(h,g=h,_="Edit",x={}){this.__fire(h,"pm:remove",{layer:g,shape:this.getShape()},_,x)},_fireVertexAdded(h,g,_,x="Edit",M={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:h,indexPath:g,latlng:_,shape:this.getShape()},x,M)},_fireVertexRemoved(h,g,_="Edit",x={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:h,indexPath:g,shape:this.getShape()},_,x)},_fireVertexClick(h,g,_="Edit",x={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:h,indexPath:g,shape:this.getShape()},_,x)},_fireIntersect(h,g=this._layer,_="Edit",x={}){this.__fire(g,"pm:intersect",{layer:this._layer,intersection:h,shape:this.getShape()},_,x)},_fireLayerReset(h,g,_="Edit",x={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:h,indexPath:g,shape:this.getShape()},_,x)},_fireChange(h,g="Edit",_={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:h,shape:this.getShape()},g,_)},_fireTextChange(h,g="Edit",_={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:h,shape:this.getShape()},g,_)},_fireTextFocus(h="Edit",g={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},h,g)},_fireTextBlur(h="Edit",g={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},h,g)},_fireSnapDrag(h,g,_="Snapping",x={}){this.__fire(h,"pm:snapdrag",g,_,x)},_fireSnap(h,g,_="Snapping",x={}){this.__fire(h,"pm:snap",g,_,x)},_fireUnsnap(h,g,_="Snapping",x={}){this.__fire(h,"pm:unsnap",g,_,x)},_fireRotationEnable(h,g,_="Rotation",x={}){this.__fire(h,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},_,x)},_fireRotationDisable(h,g="Rotation",_={}){this.__fire(h,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},g,_)},_fireRotationStart(h,g,_="Rotation",x={}){this.__fire(h,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:g},_,x)},_fireRotation(h,g,_,x=this._rotationLayer,M="Rotation",$={}){this.__fire(h,"pm:rotate",{layer:x,helpLayer:this._layer,startAngle:this._startAngle,angle:x.pm.getAngle(),angleDiff:g,oldLatLngs:_,newLatLngs:x.getLatLngs()},M,$)},_fireRotationEnd(h,g,_,x="Rotation",M={}){this.__fire(h,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:g,angle:this._rotationLayer.pm.getAngle(),originLatLngs:_,newLatLngs:this._rotationLayer.getLatLngs()},x,M)},_fireActionClick(h,g,_,x="Toolbar",M={}){this.__fire(this._map,"pm:actionclick",{text:h.text,action:h,btnName:g,button:_},x,M)},_fireButtonClick(h,g,_="Toolbar",x={}){this.__fire(this._map,"pm:buttonclick",{btnName:h,button:g},_,x)},_fireLangChange(h,g,_,x,M="Global",$={}){this.__fire(this.map,"pm:langchange",{oldLang:h,activeLang:g,fallback:_,translations:x},M,$)},_fireGlobalDragModeToggled(h,g="Global",_={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:h,map:this.map},g,_)},_fireGlobalEditModeToggled(h,g="Global",_={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:h,map:this.map},g,_)},_fireGlobalRemovalModeToggled(h,g="Global",_={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:h,map:this.map},g,_)},_fireGlobalCutModeToggled(h="Global",g={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},h,g)},_fireGlobalDrawModeToggled(h="Global",g={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},h,g)},_fireGlobalRotateModeToggled(h="Global",g={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},h,g)},_fireRemoveLayerGroup(h,g=h,_="Edit",x={}){this.__fire(h,"pm:remove",{layer:g,shape:void 0},_,x)},_fireKeyeventEvent(h,g,_,x="Global",M={}){this.__fire(this.map,"pm:keyevent",{event:h,eventType:g,focusOn:_},x,M)},__fire(h,g,_,x,M={}){_=(0,_u.default)(_,M,{source:x}),L.PM.Utils._fireEvent(h,g,_)}},Xl=_l,wu=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(h){this.map=h,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),h.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(h){let g="document";this.map.getContainer().contains(h.target)&&(g="map");let _={event:h,eventType:h.type,focusOn:g};this._lastEvents[h.type]=_,this._lastEvents.current=_,this.map.pm._fireKeyeventEvent(h,h.type,g)},_onBlur(h){h.altKey=!1;let g={event:h,eventType:h.type,focusOn:"document"};this._lastEvents[h.type]=g,this._lastEvents.current=g},getLastKeyEvent(h="current"){return this._lastEvents[h]},isShiftKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.shiftKey},isAltKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.altKey},isCtrlKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.ctrlKey},isMetaKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.metaKey},getPressedKey(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.key}}),Ir=wu,zi=l(Mo());function er(h){let g=L.PM.activeLang;return(0,zi.default)(Uo[g],h)||(0,zi.default)(Uo.en,h)||h}function Ui(h){for(let g=0;g<h.length;g+=1){let _=h[g];if(Array.isArray(_)){if(Ui(_))return!0}else if(_!=null&&_!=="")return!0}return!1}function wl(h){return h.reduce((g,_)=>{if(_.length!==0){let x=Array.isArray(_)?wl(_):_;Array.isArray(x)?x.length!==0&&g.push(x):g.push(x)}return g},[])}function ya(h,g,_){let x={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:M,b:$,f:J}=x,ne=h.lng,me=h.lat,Ce=_,Ye=Math.PI,Ve=g*Ye/180,mt=Math.sin(Ve),Mt=Math.cos(Ve),Kt=(1-J)*Math.tan(me*Ye/180),fn=1/Math.sqrt(1+Kt*Kt),wn=Kt*fn,rr=Math.atan2(Kt,Mt),qe=fn*mt,Xe=1-qe*qe,ct=Xe*(M*M-$*$)/($*$),Nt=1+ct/16384*(4096+ct*(-768+ct*(320-175*ct))),_t=ct/1024*(256+ct*(-128+ct*(74-47*ct))),Tt=Ce/($*Nt),be=2*Math.PI,Pe,Fe,Re;for(;Math.abs(Tt-be)>1e-12;){Pe=Math.cos(2*rr+Tt),Fe=Math.sin(Tt),Re=Math.cos(Tt);let en=_t*Fe*(Pe+_t/4*(Re*(-1+2*Pe*Pe)-_t/6*Pe*(-3+4*Fe*Fe)*(-3+4*Pe*Pe)));be=Tt,Tt=Ce/($*Nt)+en}let ze=wn*Fe-fn*Re*Mt,Ue=Math.atan2(wn*Re+fn*Fe*Mt,(1-J)*Math.sqrt(qe*qe+ze*ze)),rt=Math.atan2(Fe*mt,fn*Re-wn*Fe*Mt),st=J/16*Xe*(4+J*(4-3*Xe)),dt=rt-(1-st)*J*qe*(Tt+st*Fe*(Pe+st*Re*(-1+2*Pe*Pe))),Ct=ne+dt*180/Ye,St=Ue*180/Ye;return L.latLng(Ct,St)}function Si(h,g,_,x,M=!0){let $,J,ne,me=[];for(let Ce=0;Ce<_;Ce+=1){if(M)$=Ce*360/_+x,J=ya(h,$,g),ne=L.latLng(J.lng,J.lat);else{let Ye=h.lat+Math.cos(2*Ce*Math.PI/_)*g,Ve=h.lng+Math.sin(2*Ce*Math.PI/_)*g;ne=L.latLng(Ye,Ve)}me.push(ne)}return me}function xu(h,g,_){g=(g+360)%360;let x=Math.PI/180,M=180/Math.PI,{R:$}=L.CRS.Earth,J=h.lng*x,ne=h.lat*x,me=g*x,Ce=Math.sin(ne),Ye=Math.cos(ne),Ve=Math.cos(_/$),mt=Math.sin(_/$),Mt=Math.asin(Ce*Ve+Ye*mt*Math.cos(me)),Kt=J+Math.atan2(Math.sin(me)*mt*Ye,Ve-Ce*Math.sin(Mt));Kt*=M;let fn=Kt-360,wn=Kt<-180?Kt+360:Kt;return Kt=Kt>180?fn:wn,L.latLng([Mt*M,Kt])}function ea(h,g,_){let x=h.latLngToContainerPoint(g),M=h.latLngToContainerPoint(_),$=Math.atan2(M.y-x.y,M.x-x.x)*180/Math.PI+90;return $+=$<0?360:0,$}function Jl(h,g,_,x){let M=ea(h,g,_);return xu(g,M,x)}function Ql(h,g,_="asc"){if(!g||Object.keys(g).length===0)return(me,Ce)=>me-Ce;let x=Object.keys(g),M,$=x.length-1,J={};for(;$>=0;)M=x[$],J[M.toLowerCase()]=g[M],$-=1;function ne(me){if(me instanceof L.Marker)return"Marker";if(me instanceof L.Circle)return"Circle";if(me instanceof L.CircleMarker)return"CircleMarker";if(me instanceof L.Rectangle)return"Rectangle";if(me instanceof L.Polygon)return"Polygon";if(me instanceof L.Polyline)return"Line"}return(me,Ce)=>{let Ye,Ve;if(Ye=ne(me.layer).toLowerCase(),Ve=ne(Ce.layer).toLowerCase(),!Ye||!Ve)return 0;let mt=Ye in J?J[Ye]:Number.MAX_SAFE_INTEGER,Mt=Ve in J?J[Ve]:Number.MAX_SAFE_INTEGER,Kt=0;return mt<Mt?Kt=-1:mt>Mt&&(Kt=1),_==="desc"?Kt*-1:Kt}}function Ao(h,g=h.getLatLngs()){return h instanceof L.Polygon?L.polygon(g).getLatLngs():L.polyline(g).getLatLngs()}function eu(h,g){var _,x,M,$;if((x=(_=g.options.crs)==null?void 0:_.projection)!=null&&x.MAX_LATITUDE){let J=($=(M=g.options.crs)==null?void 0:M.projection)==null?void 0:$.MAX_LATITUDE;h.lat=Math.max(Math.min(J,h.lat),-J)}return h}function ti(h){return h.options.renderer||h._map&&(h._map._getPaneRenderer(h.options.pane)||h._map.options.renderer||h._map._renderer)||h._renderer}var Sc=L.Class.extend({includes:[Wu,dr,Xa,Zl,Xl],initialize(h){this.map=h,this.Draw=new L.PM.Draw(h),this.Toolbar=new L.PM.Toolbar(h),this.Keyboard=Ir(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(h)},setLang(h="en",g,_="en"){if(h=h.trim().toLowerCase(),!/^[a-z]{2}$/.test(h)){let M=h.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(M){let $=[`${M[1]}_${M[2]}`,`${M[1]}`];for(let J of $)if(Uo[J]){h=J;break}}}let x=L.PM.activeLang;g&&(Uo[h]=(0,mr.default)(Uo[_],g)),L.PM.activeLang=h,this.map.pm.Toolbar.reinit(),this._fireLangChange(x,h,_,Uo[h])},addControls(h){this.Toolbar.addControls(h)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(h="Polygon",g){h==="Poly"&&(h="Polygon"),this.Draw.enable(h,g)},disableDraw(h="Polygon"){h==="Poly"&&(h="Polygon"),this.Draw.disable(h)},setPathOptions(h,g={}){let _=g.ignoreShapes||[],x=g.merge||!1;this.map.pm.Draw.shapes.forEach(M=>{_.indexOf(M)===-1&&this.map.pm.Draw[M].setPathOptions(h,x)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(h){let g=(0,mr.default)(this.globalOptions,h);g.editable&&(g.resizeableCircleMarker=g.editable,delete g.editable);let _=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!g.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),_=!0);let x=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!g.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),x=!0),this.map.pm.Draw.shapes.forEach(M=>{this.map.pm.Draw[M].setOptions(g)}),_&&this.map.pm.Draw.CircleMarker.enable(),x&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(M=>{M.pm.setOptions(g)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=g,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(h=>{h.pm.enabled()&&h.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(h){return this.Draw.Cut.enable(h)},toggleGlobalCutMode(h){return this.Draw.Cut.toggle(h)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(h=!1){let g=L.PM.Utils.findLayers(this.map);if(!h)return g;let _=L.featureGroup();return _._pmTempLayer=!0,g.forEach(x=>{_.addLayer(x)}),_},getGeomanDrawLayers(h=!1){let g=L.PM.Utils.findLayers(this.map).filter(x=>x._drawnByGeoman===!0);if(!h)return g;let _=L.featureGroup();return _._pmTempLayer=!0,g.forEach(x=>{_.addLayer(x)}),_},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(h){this._touchEventCounter===0&&(L.DomEvent.on(h,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(h,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(h){this._touchEventCounter===1&&(L.DomEvent.off(h,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(h,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(h){ti(this.map)._onMouseMove(this._createMouseEvent("mousemove",h))},_canvasTouchClick(h){let g="";h.type==="touchstart"||h.type==="pointerdown"?g="mousedown":(h.type==="touchend"||h.type==="pointerup"||h.type==="touchcancel"||h.type==="pointercancel")&&(g="mouseup"),g&&ti(this.map)._onClick(this._createMouseEvent(g,h))},_createMouseEvent(h,g){let _,x=g.touches[0]||g.changedTouches[0];try{_=new MouseEvent(h,{bubbles:g.bubbles,cancelable:g.cancelable,view:g.view,detail:x.detail,screenX:x.screenX,screenY:x.screenY,clientX:x.clientX,clientY:x.clientY,ctrlKey:g.ctrlKey,altKey:g.altKey,shiftKey:g.shiftKey,metaKey:g.metaKey,button:g.button,relatedTarget:g.relatedTarget})}catch{_=document.createEvent("MouseEvents"),_.initMouseEvent(h,g.bubbles,g.cancelable,g.view,x.detail,x.screenX,x.screenY,x.clientX,x.clientY,g.ctrlKey,g.altKey,g.shiftKey,g.metaKey,g.button,g.relatedTarget)}return _}}),fs=Sc,$o=L.Control.extend({includes:[Xl],options:{position:"topleft",disableByOtherButtons:!0},initialize(h){this._button=L.Util.extend({},this.options,h)},onAdd(h){return this._map=h,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let h=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),h?h.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(h){return typeof h=="boolean"?this._button.toggleStatus=h:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(h){h&&h.preventDefault(),!this._button.disabled&&(this._button.onClick(h,{button:this,event:h}),this._clicked(h),this._button.afterClick(h,{button:this,event:h}))},_makeButton(h){let g=this.options.position.indexOf("right")>-1?"pos-right":"",_=L.DomUtil.create("div",`button-container  ${g}`,this._container);h.title&&_.setAttribute("title",h.title);let x=L.DomUtil.create("a","leaflet-buttons-control-button",_);x.setAttribute("role","button"),x.setAttribute("tabindex","0"),x.href="#";let M=L.DomUtil.create("div",`leaflet-pm-actions-container ${g}`,_),$=h.actions,J={cancel:{text:er("actions.cancel"),title:er("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:er("actions.finish"),title:er("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:er("actions.removeLastVertex"),title:er("actions.removeLastVertex"),onClick(){this._map.pm.Draw[h.jsClass]._removeLastVertex()}},finish:{text:er("actions.finish"),title:er("actions.finish"),onClick(me){this._map.pm.Draw[h.jsClass]._finishShape(me)}}};h._preparedActions=$.map(me=>{let Ce=typeof me=="string"?me:me.name,Ye;if(J[Ce])Ye=J[Ce];else if(me.text)Ye=me;else return Ye;let Ve=L.DomUtil.create("a",`leaflet-pm-action ${g} action-${Ce}`,M);if(Ve.setAttribute("role","button"),Ve.setAttribute("tabindex","0"),Ve.href="#",Ye.title&&(Ve.title=Ye.title),Ve.innerHTML=Ye.text,L.DomEvent.disableClickPropagation(Ve),L.DomEvent.on(Ve,"click",L.DomEvent.stop),Ye._node=Ve,!h.disabled&&Ye.onClick){let mt=Mt=>{Mt.preventDefault();let Kt="",{buttons:fn}=this._map.pm.Toolbar;for(let wn in fn)if(fn[wn]._button===h){Kt=wn;break}this._fireActionClick(Ye,Kt,h)};L.DomEvent.addListener(Ve,"click",mt,this),L.DomEvent.addListener(Ve,"click",Ye.onClick,this),L.DomEvent.addListener(Ve,"click",()=>this._updateActiveAction(h))}return Ye}),this._updateActiveAction(h),h.toggleStatus&&L.DomUtil.addClass(_,"active");let ne=L.DomUtil.create("div","control-icon",x);return h.iconUrl&&ne.setAttribute("src",h.iconUrl),h.className&&L.DomUtil.addClass(ne,h.className),L.DomEvent.disableClickPropagation(x),L.DomEvent.on(x,"click",L.DomEvent.stop),h.disabled||(L.DomEvent.addListener(x,"click",this._onBtnClick,this),L.DomEvent.addListener(x,"click",this._triggerClick,this)),h.disabled&&(L.DomUtil.addClass(x,"pm-disabled"),x.setAttribute("aria-disabled","true")),_},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let h="",{buttons:g}=this._map.pm.Toolbar;for(let _ in g)if(g[_]._button===this._button){h=_;break}this._fireButtonClick(h,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let h="pm-disabled",g=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(g,h),g.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(g,h),g.setAttribute("aria-disabled","false"))},_updateActiveAction(h){var g;(g=h._preparedActions)==null||g.forEach(_=>{_!=null&&_._node&&(_.isActive&&_.isActive.call(this)?L.DomUtil.addClass(_._node,"active-action"):L.DomUtil.removeClass(_._node,"active-action"))})}}),tu=$o;L.Control.PMButton=tu;var Vo=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(h){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(h)},reinit(){let h=this.isVisible;this.removeControls(),this._defineButtons(),h&&this.addControls()},init(h){this.map=h,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(h){let g=`${h}Container`;return this[g]||(this[g]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${h} leaflet-bar leaflet-control`)),this[g]},getButtons(){return this.buttons},addControls(h=this.options){typeof h.editPolygon<"u"&&(h.editMode=h.editPolygon),typeof h.deleteLayer<"u"&&(h.removalMode=h.deleteLayer),L.Util.setOptions(this,h),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let h=this.getButtons(),g={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let _ in h){let x=h[_];L.Util.setOptions(x,{className:g.geomanIcons[_]})}},removeControls(){let h=this.getButtons();for(let g in h)h[g].remove();this.isVisible=!1},toggleControls(h=this.options){this.isVisible?this.removeControls():this.addControls(h)},_addButton(h,g){return this.buttons[h]=g,this.options[h]=!!this.options[h]||!1,this.buttons[h]},triggerClickOnToggledButtons(h){for(let g in this.buttons){let _=this.buttons[g];_._button.disableByOtherButtons&&_!==h&&_.toggled()&&_._triggerClick()}},toggleButton(h,g,_=!0){h==="editPolygon"&&(h="editMode"),h==="deleteLayer"&&(h="removalMode");let x=h;return _&&this.triggerClickOnToggledButtons(this.buttons[x]),this.buttons[x]?this.buttons[x].toggle(g):!1},_defineButtons(){let h={className:"control-icon leaflet-pm-icon-marker",title:er("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(mt,Mt)=>{this.map.pm.Draw[Mt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},g={title:er("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(mt,Mt)=>{this.map.pm.Draw[Mt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},_={className:"control-icon leaflet-pm-icon-polyline",title:er("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(mt,Mt)=>{this.map.pm.Draw[Mt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},x={title:er("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(mt,Mt)=>{this.map.pm.Draw[Mt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},M={title:er("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(mt,Mt)=>{this.map.pm.Draw[Mt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},$={title:er("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(mt,Mt)=>{this.map.pm.Draw[Mt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},J={title:er("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},ne={title:er("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},me={title:er("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(mt,Mt)=>{this.map.pm.Draw[Mt.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},Ce={title:er("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Ye={title:er("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Ve={className:"control-icon leaflet-pm-icon-text",title:er("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(mt,Mt)=>{this.map.pm.Draw[Mt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(h)),this._addButton("drawPolyline",new L.Control.PMButton(_)),this._addButton("drawRectangle",new L.Control.PMButton($)),this._addButton("drawPolygon",new L.Control.PMButton(g)),this._addButton("drawCircle",new L.Control.PMButton(x)),this._addButton("drawCircleMarker",new L.Control.PMButton(M)),this._addButton("drawText",new L.Control.PMButton(Ve)),this._addButton("editMode",new L.Control.PMButton(J)),this._addButton("dragMode",new L.Control.PMButton(ne)),this._addButton("cutPolygon",new L.Control.PMButton(me)),this._addButton("removalMode",new L.Control.PMButton(Ce)),this._addButton("rotateMode",new L.Control.PMButton(Ye))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let h=this.getButtons(),g=[];this.options.drawControls===!1&&(g=g.concat(Object.keys(h).filter(_=>!h[_]._button.tool))),this.options.editControls===!1&&(g=g.concat(Object.keys(h).filter(_=>h[_]._button.tool==="edit"))),this.options.optionsControls===!1&&(g=g.concat(Object.keys(h).filter(_=>h[_]._button.tool==="options"))),this.options.customControls===!1&&(g=g.concat(Object.keys(h).filter(_=>h[_]._button.tool==="custom")));for(let _ in h)if(this.options[_]&&g.indexOf(_)===-1){let x=h[_]._button.tool;x||(x="draw"),h[_].setPosition(this._getBtnPosition(x)),h[_].addTo(this.map)}},_getBtnPosition(h){return this.options.positions&&this.options.positions[h]?this.options.positions[h]:this.options.position},setBlockPosition(h,g){this.options.positions[h]=g,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(h,g){if(g)typeof g!="object"&&(g={name:g});else throw new TypeError("Button has no name");let _=this._btnNameMapping(h);if(!g.name)throw new TypeError("Button has no name");if(this.buttons[g.name])throw new TypeError("Button with this name already exists");let x=this.map.pm.Draw.createNewDrawInstance(g.name,_);g={...this.buttons[_]._button,...g};let M=this.createCustomControl(g);return{drawInstance:x,control:M}},createCustomControl(h){if(!h.name)throw new TypeError("Button has no name");if(this.buttons[h.name])throw new TypeError("Button with this name already exists");h.onClick||(h.onClick=()=>{}),h.afterClick||(h.afterClick=()=>{}),h.toggle!==!1&&(h.toggle=!0),h.block&&(h.block=h.block.toLowerCase()),(!h.block||h.block==="draw")&&(h.block=""),h.className?h.className.indexOf("control-icon")===-1&&(h.className=`control-icon ${h.className}`):h.className="control-icon";let g={tool:h.block,className:h.className,title:h.title||"",jsClass:h.name,onClick:h.onClick,afterClick:h.afterClick,doToggle:h.toggle,toggleStatus:!1,disableOtherButtons:h.disableOtherButtons??!0,disableByOtherButtons:h.disableByOtherButtons??!0,cssToggle:h.toggle,position:this.options.position,actions:h.actions||[],disabled:!!h.disabled};this.options[h.name]!==!1&&(this.options[h.name]=!0);let _=this._addButton(h.name,new L.Control.PMButton(g));return this.changeControlOrder(),_},controlExists(h){return!!this.getButton(h)},getButton(h){return this.getButtons()[h]},getButtonsInBlock(h){let g={};if(h)for(let _ in this.getButtons()){let x=this.getButtons()[_];(x._button.tool===h||h==="draw"&&!x._button.tool)&&(g[_]=x)}return g},changeControlOrder(h=[]){let g=this._shapeMapping(),_=[];h.forEach($=>{g[$]?_.push(g[$]):_.push($)});let x=this.getButtons(),M={};_.forEach($=>{x[$]&&(M[$]=x[$])}),Object.keys(x).filter($=>!x[$]._button.tool||x[$]._button.tool==="draw").forEach($=>{_.indexOf($)===-1&&(M[$]=x[$])}),Object.keys(x).filter($=>x[$]._button.tool==="edit").forEach($=>{_.indexOf($)===-1&&(M[$]=x[$])}),Object.keys(x).filter($=>x[$]._button.tool==="options").forEach($=>{_.indexOf($)===-1&&(M[$]=x[$])}),Object.keys(x).filter($=>x[$]._button.tool==="custom").forEach($=>{_.indexOf($)===-1&&(M[$]=x[$])}),Object.keys(x).forEach($=>{_.indexOf($)===-1&&(M[$]=x[$])}),this.map.pm.Toolbar.buttons=M,this._showHideButtons()},getControlOrder(){let h=this.getButtons(),g=[];for(let _ in h)g.push(_);return g},changeActionsOfControl(h,g){let _=this._btnNameMapping(h);if(!_)throw new TypeError("No name passed");if(!g)throw new TypeError("No actions passed");if(!this.buttons[_])throw new TypeError("Button with this name not exists");this.buttons[_]._button.actions=g,this.changeControlOrder()},setButtonDisabled(h,g){let _=this._btnNameMapping(h);g?this.buttons[_].disable():this.buttons[_].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(h){let g=this._shapeMapping();return g[h]?g[h]:h}}),xl=Vo,Ll=l(_o()),ni={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(h){h.forEach(g=>{if(Array.isArray(g)){this._assignEvents(g);return}g.off("drag",this._handleSnapping,this),g.on("drag",this._handleSnapping,this),g.off("dragend",this._cleanupSnapping,this),g.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(h){if(h){let g=h.target;g._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(g=>{g.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(h){var ne,me,Ce;let g=h.target;if(g._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((ne=h==null?void 0:h.originalEvent)==null?void 0:ne.altKey)||((Ce=(me=this._map)==null?void 0:me.pm)==null?void 0:Ce.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let _=this._calcClosestLayer(g.getLatLng(),this._snapList);if(Object.keys(_).length===0)return!1;let x=_.layer instanceof L.Marker||_.layer instanceof L.CircleMarker||!this.options.snapSegment,M;x?M=_.latlng:M=this._checkPrioritiySnapping(_);let $=this.options.snapDistance,J={marker:g,shape:this._shape,snapLatLng:M,segment:_.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:_.layer,distance:_.distance};if(this._fireSnapDrag(J.marker,J),this._fireSnapDrag(this._layer,J),_.distance<$){g._orgLatLng=g.getLatLng(),g.setLatLng(M),g._snapped=!0,g._snapInfo=J;let Ye=()=>{this._snapLatLng=M,this._fireSnap(g,J),this._fireSnap(this._layer,J)},Ve=this._snapLatLng||{},mt=M||{};(Ve.lat!==mt.lat||Ve.lng!==mt.lng)&&Ye()}else this._snapLatLng&&(this._unsnap(J),g._snapped=!1,g._snapInfo=void 0,this._fireUnsnap(J.marker,J),this._fireUnsnap(this._layer,J));return!0},_createSnapList(){let h=[],g=[],_=this._map;_.off("layerremove",this._handleSnapLayerRemoval,this),_.on("layerremove",this._handleSnapLayerRemoval,this),_.eachLayer(x=>{if((x instanceof L.Polyline||x instanceof L.Marker||x instanceof L.CircleMarker||x instanceof L.ImageOverlay)&&x.options.snapIgnore!==!0){if(x.options.snapIgnore===void 0&&(!L.PM.optIn&&x.options.pmIgnore===!0||L.PM.optIn&&x.options.pmIgnore!==!1))return;(x instanceof L.Circle||x instanceof L.CircleMarker)&&x.pm&&x.pm._hiddenPolyCircle?h.push(x.pm._hiddenPolyCircle):x instanceof L.ImageOverlay&&(x=L.rectangle(x.getBounds())),h.push(x);let M=L.polyline([],{color:"red",pmIgnore:!0});M._pmTempLayer=!0,g.push(M),(x instanceof L.Circle||x instanceof L.CircleMarker)&&g.push(M)}}),h=h.filter(x=>this._layer!==x),h=h.filter(x=>x._latlng||x._latlngs&&Ui(x._latlngs)),h=h.filter(x=>!x._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let x=L.polyline([],{color:"red",pmIgnore:!0});x._pmTempLayer=!0,g.push(x)}),this._snapList=h.concat(this._otherSnapLayers)):this._snapList=h,this.debugIndicatorLines=g},_handleSnapLayerRemoval({layer:h}){if(!h._leaflet_id)return;let g=this._snapList.findIndex(_=>_._leaflet_id===h._leaflet_id);g>-1&&this._snapList.splice(g,1)},_calcClosestLayer(h,g){return this._calcClosestLayers(h,g,1)[0]},_calcClosestLayers(h,g,_=1){let x=[],M={};g.forEach((J,ne)=>{var Ce;if(J._parentCopy&&J._parentCopy===this._layer||((Ce=J.getLatLngs)==null?void 0:Ce.call(J).flat(5).length)<2)return;let me=this._calcLayerDistances(h,J);if(me.distance=Math.floor(me.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[ne]){let Ye=L.polyline([],{color:"red",pmIgnore:!0});Ye._pmTempLayer=!0,this.debugIndicatorLines[ne]=Ye}this.debugIndicatorLines[ne].setLatLngs([h,me.latlng])}_===1&&(M.distance===void 0||me.distance-5<=M.distance)?(me.distance+5<M.distance&&(x=[]),M=me,M.layer=J,x.push(M)):_!==1&&(M={},M=me,M.layer=J,x.push(M))}),_!==1&&(x=x.sort((J,ne)=>J.distance-ne.distance)),_===-1&&(_=x.length);let $=this._getClosestLayerByPriority(x,_);return L.Util.isArray($)?$:[$]},_calcLayerDistances(h,g){let _=this._map,x=g instanceof L.Marker||g instanceof L.CircleMarker,M=g instanceof L.Polygon,$=h;if(x){let J=g.getLatLng();return{latlng:{...J},distance:this._getDistance(_,J,$)}}return this._calcLatLngDistances($,g.getLatLngs(),_,M)},_calcLatLngDistances(h,g,_,x=!1){let M,$,J,ne=me=>{me.forEach((Ce,Ye)=>{if(Array.isArray(Ce)){ne(Ce);return}if(this.options.snapSegment){let Ve=Ce,mt;x?mt=Ye+1===me.length?0:Ye+1:mt=Ye+1===me.length?void 0:Ye+1;let Mt=me[mt];if(Mt){let Kt=this._getDistanceToSegment(_,h,Ve,Mt);($===void 0||Kt<$)&&($=Kt,J=[Ve,Mt])}}else{let Ve=this._getDistance(_,h,Ce);($===void 0||Ve<$)&&($=Ve,M=Ce)}})};return ne(g),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(_,h,J[0],J[1])},segment:J,distance:$}:{latlng:M,distance:$}},_getClosestLayerByPriority(h,g=1){h=h.sort((J,ne)=>J._leaflet_id-ne._leaflet_id);let _=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],x=this._map.pm.globalOptions.snappingOrder||[],M=0,$={};return x.concat(_).forEach(J=>{$[J]||(M+=1,$[J]=M)}),h.sort(Ql("instanceofShape",$)),g===1?h[0]||{}:h.slice(0,g)},_checkPrioritiySnapping(h){let g=this._map,_=h.segment[0],x=h.segment[1],M=h.latlng,$=M;if(this.options.snapVertex){let J=this._getDistance(g,_,M),ne=this._getDistance(g,x,M),me=J<ne?_:x,Ce=J<ne?J:ne;if(this.options.snapMiddle){let Ve=L.PM.Utils.calcMiddleLatLng(g,_,x),mt=this._getDistance(g,Ve,M);mt<J&&mt<ne&&(me=Ve,Ce=mt)}let Ye=this.options.snapDistance;Ce<Ye&&($=me)}return{...$}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(h,g,_,x){let M=h.getMaxZoom();M===1/0&&(M=h.getZoom());let $=h.project(g,M),J=h.project(_,M),ne=h.project(x,M),me=L.LineUtil.closestPointOnSegment($,J,ne);return h.unproject(me,M)},_getDistanceToSegment(h,g,_,x){let M=h.latLngToContainerPoint(g),$=h.latLngToContainerPoint(_),J=h.latLngToContainerPoint(x);return L.LineUtil.pointToSegmentDistance(M,$,J)},_getDistance(h,g,_){return h.latLngToContainerPoint(g).distanceTo(h.latLngToContainerPoint(_))}},xo=ni,ba=L.Class.extend({includes:[xo,Xl],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(h){L.Util.setOptions(this,h),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(h){let g=new L.Icon.Default;g.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=g,this._map=h,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(_=>{this[_]=new L.PM.Draw[_](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(h,g=!1){g?this.options.pathOptions=(0,Ll.default)(this.options.pathOptions,h):this.options.pathOptions=h},getShapes(){return this.shapes},getShape(){return this._shape},enable(h,g){if(!h)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[h].enable(g)},disable(){this.shapes.forEach(h=>{this[h].disable()})},addControls(){this.shapes.forEach(h=>{this[h].addButton()})},getActiveShape(){let h;return this.shapes.forEach(g=>{this[g]._enabled&&(h=g)}),h},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let h=[];this._map.eachLayer(g=>{(g instanceof L.Polyline||g instanceof L.Marker||g instanceof L.Circle||g instanceof L.CircleMarker||g instanceof L.ImageOverlay)&&(g._pmTempLayer||h.push(g))}),this._enabled?h.forEach(g=>{L.PM.Utils.disablePopup(g)}):h.forEach(g=>{L.PM.Utils.enablePopup(g)})},createNewDrawInstance(h,g){let _=this._getShapeFromBtnName(g);if(this[h])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[_])throw new TypeError(`There is no class L.PM.Draw.${_}`);return this[h]=new L.PM.Draw[_](this._map),this[h].toolbarButtonName=h,this[h]._shape=h,this.shapes.push(h),this[g]&&this[h].setOptions(this[g].options),this[h].setOptions(this[h].options),this[h]},_getShapeFromBtnName(h){let g={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return g[h]?g[h]:this[h]?this[h]._shape:h},_finishLayer(h){h.pm&&(h.pm.setOptions(this.options),h.pm._shape=this._shape,h.pm._map=this._map),this._addDrawnLayerProp(h)},_addDrawnLayerProp(h){h._drawnByGeoman=!0},_setPane(h,g){g==="layerPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":g==="vertexPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":g==="markerPane"&&(h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),$i=ba;$i.Marker=$i.extend({initialize(h){this._map=h,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(h){L.Util.setOptions(this,h),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(er("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(g=>{this.isRelevantMarker(g)&&g.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},isRelevantMarker(h){return h instanceof L.Marker&&h.pm&&!h._pmTempLayer&&!h.pm._initTextMarker},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let g=h;g.target=this._hintMarker,this._handleSnapping(g)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(h){if(!h.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng(),_=new L.Marker(g,this.options.markerStyle);this._setPane(_,"markerPane"),this._finishLayer(_),_.pm||(_.options.draggable=!1),_.addTo(this._map.pm._getContainingLayer()),_.pm&&this.options.markerEditable?_.pm.enable():_.dragging&&_.dragging.disable(),this._fireCreate(_),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var h,g;(h=this.options.markerStyle)!=null&&h.icon&&((g=this._hintMarker)==null||g.setIcon(this.options.markerStyle.icon))}});var z=63710088e-1,we={centimeters:z*100,centimetres:z*100,degrees:z/111325,feet:z*3.28084,inches:z*39.37,kilometers:z/1e3,kilometres:z/1e3,meters:z,metres:z,miles:z/1609.344,millimeters:z*1e3,millimetres:z*1e3,nauticalmiles:z/1852,radians:1,yards:z*1.0936};function We(h,g,_){_===void 0&&(_={});var x={type:"Feature"};return(_.id===0||_.id)&&(x.id=_.id),_.bbox&&(x.bbox=_.bbox),x.properties=g||{},x.geometry=h,x}function lt(h,g,_){if(_===void 0&&(_={}),!h)throw new Error("coordinates is required");if(!Array.isArray(h))throw new Error("coordinates must be an Array");if(h.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!lr(h[0])||!lr(h[1]))throw new Error("coordinates must contain numbers");var x={type:"Point",coordinates:h};return We(x,g,_)}function xt(h,g,_){if(_===void 0&&(_={}),h.length<2)throw new Error("coordinates must be an array of two or more positions");var x={type:"LineString",coordinates:h};return We(x,g,_)}function Ft(h,g){g===void 0&&(g={});var _={type:"FeatureCollection"};return g.id&&(_.id=g.id),g.bbox&&(_.bbox=g.bbox),_.features=h,_}function on(h,g){g===void 0&&(g="kilometers");var _=we[g];if(!_)throw new Error(g+" units is invalid");return h*_}function Mn(h,g){g===void 0&&(g="kilometers");var _=we[g];if(!_)throw new Error(g+" units is invalid");return h/_}function In(h){var g=h%(2*Math.PI);return g*180/Math.PI}function Jn(h){var g=h%360;return g*Math.PI/180}function lr(h){return!isNaN(h)&&h!==null&&!Array.isArray(h)}function Er(h){var g,_,x={type:"FeatureCollection",features:[]};if(h.type==="Feature"?_=h.geometry:_=h,_.type==="LineString")g=[_.coordinates];else if(_.type==="MultiLineString")g=_.coordinates;else if(_.type==="MultiPolygon")g=[].concat.apply([],_.coordinates);else if(_.type==="Polygon")g=_.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return g.forEach(function(M){g.forEach(function($){for(var J=0;J<M.length-1;J++)for(var ne=J;ne<$.length-1;ne++)if(!(M===$&&(Math.abs(J-ne)===1||J===0&&ne===M.length-2&&M[J][0]===M[M.length-1][0]&&M[J][1]===M[M.length-1][1]))){var me=wi(M[J][0],M[J][1],M[J+1][0],M[J+1][1],$[ne][0],$[ne][1],$[ne+1][0],$[ne+1][1]);me&&x.features.push(lt([me[0],me[1]]))}})}),x}function wi(h,g,_,x,M,$,J,ne){var me,Ce,Ye,Ve,mt,Mt={x:null,y:null,onLine1:!1,onLine2:!1};return me=(ne-$)*(_-h)-(J-M)*(x-g),me===0?Mt.x!==null&&Mt.y!==null?Mt:!1:(Ce=g-$,Ye=h-M,Ve=(J-M)*Ce-(ne-$)*Ye,mt=(_-h)*Ce-(x-g)*Ye,Ce=Ve/me,Ye=mt/me,Mt.x=h+Ce*(_-h),Mt.y=g+Ce*(x-g),Ce>=0&&Ce<=1&&(Mt.onLine1=!0),Ye>=0&&Ye<=1&&(Mt.onLine2=!0),Mt.onLine1&&Mt.onLine2?[Mt.x,Mt.y]:!1)}$i.Line=$i.extend({initialize(h){this._map=h,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(h){L.Util.setOptions(this,h),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(er("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_syncHintLine(){let h=this._layer.getLatLngs();if(h.length>0){let g=h[h.length-1];this._hintline.setLatLngs([g,this._hintMarker.getLatLng()])}},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let _=h;_.target=this._hintMarker,this._handleSnapping(_)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let g=this._layer._defaultShape().slice();g.push(this._hintMarker.getLatLng()),this._change(g)},hasSelfIntersection(){return Er(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(h,g){let _=L.polyline(this._layer.getLatLngs());h&&(g||(g=this._hintMarker.getLatLng()),_.addLatLng(g));let x=Er(_.toGeoJSON(15));this._doesSelfIntersect=x.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(x,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(h){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,h.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng(),_=this._layer.getLatLngs(),x=_[_.length-1];if(g.equals(_[0])||_.length>0&&g.equals(x)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:g,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(g);let M=this._createMarker(g);this._setTooltipText(),this._setHintLineAfterNewVertex(g),this._fireVertexAdded(M,void 0,g,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(h)},_setHintLineAfterNewVertex(h){this._hintline.setLatLngs([h,h])},_removeLastVertex(){let h=this._markers;if(h.length<=1){this.disable();return}let g=this._layer.getLatLngs(),_=h[h.length-1],{indexPath:x}=L.PM.Utils.findDeepMarkerIndex(h,_);h.pop(),this._layerGroup.removeLayer(_);let M=h[h.length-1],$=g.indexOf(M.getLatLng());g=g.slice(0,$+1),this._layer.setLatLngs(g),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(_,x,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let h=this._layer.getLatLngs();if(h.length<=1)return;let g=L.polyline(h,this.options.pathOptions);this._setPane(g,"layerPane"),this._finishLayer(g),g.addTo(this._map.pm._getContainingLayer()),this._fireCreate(g),this.options.snappable&&this._cleanupSnapping();let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},_createMarker(h){let g=new L.Marker(h,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this._layerGroup.addLayer(g),this._markers.push(g),g.on("click",this._finishShape,this),g},_setTooltipText(){let{length:h}=this._layer.getLatLngs().flat(),g="";h<=1?g=er("tooltips.continueLine"):g=er("tooltips.finishLine"),this._hintMarker.setTooltipContent(g)},_change(h){this._fireChange(h,"Draw")},setStyle(){var h,g;(h=this._layer)==null||h.setStyle(this.options.templineStyle),(g=this._hintline)==null||g.setStyle(this.options.hintlineStyle)}}),$i.Polygon=$i.Line.extend({initialize(h){this._map=h,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(h){L.PM.Draw.Line.prototype.enable.call(this,h),this._layer.pm._shape="Polygon"},_createMarker(h){let g=new L.Marker(h,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this._layerGroup.addLayer(g),this._markers.push(g),this._layer.getLatLngs().flat().length===1?(g.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(g)-1,this.options.snappable&&this._cleanupSnapping()):g.on("click",()=>1),g},_setTooltipText(){let{length:h}=this._layer.getLatLngs().flat(),g="";h<=2?g=er("tooltips.continueLine"):g=er("tooltips.finishPoly"),this._hintMarker.setTooltipContent(g)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let h=this._layer.getLatLngs();if(h.length<=2)return;let g=L.polygon(h,this.options.pathOptions);this._setPane(g,"layerPane"),this._finishLayer(g),g.addTo(this._map.pm._getContainingLayer()),this._fireCreate(g),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))}}),$i.Rectangle=$i.extend({initialize(h){this._map=h,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(h){if(L.Util.setOptions(this,h),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(er("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let g=0;g<2;g+=1){let _=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(_,"vertexPane"),_._pmTempLayer=!0,this._layerGroup.addLayer(_),this._styleMarkers.push(_)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_placeStartingMarkers(h){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(g),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(_=>{L.DomUtil.addClass(_._icon,"visible"),_.setLatLng(g)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(er("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let h=this._startMarker.getLatLng();h&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([h,h]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let _=h;_.target=this._hintMarker,this._handleSnapping(_)}let g=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(g,"Draw")},_syncRectangleSize(){let h=eu(this._startMarker.getLatLng(),this._map),g=eu(this._hintMarker.getLatLng(),this._map),_=L.PM.Utils._getRotatedRectangle(h,g,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(_),this.options.cursorMarker&&this._styleMarkers){let x=[];_.forEach(M=>{!M.equals(h,1e-8)&&!M.equals(g,1e-8)&&x.push(M)}),x.forEach((M,$)=>{try{this._styleMarkers[$].setLatLng(M)}catch{}})}},_findCorners(){let h=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(h[0],h[2],this.options.rectangleAngle||0,this._map)},_finishShape(h){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng(),_=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||_.equals(g))return;let x=L.rectangle([_,g],this.options.pathOptions);if(this.options.rectangleAngle){let $=L.PM.Utils._getRotatedRectangle(_,g,this.options.rectangleAngle||0,this._map);x.setLatLngs($),x.pm&&x.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(x,"layerPane"),this._finishLayer(x),x.addTo(this._map.pm._getContainingLayer()),this._fireCreate(x);let M=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(M))},setStyle(){var h;(h=this._layer)==null||h.setStyle(this.options.pathOptions)}}),$i.CircleMarker=$i.extend({initialize(h){this._map=h,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(h){if(L.Util.setOptions(this,h),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let g={};L.extend(g,this.options.templineStyle),g.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),g),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(er("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(er("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.disable()})},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_placeCenterMarker(h){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let g=this._hintMarker.getLatLng();this._centerMarker.setLatLng(g),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let h=this._centerMarker.getLatLng();h&&(this._layer.setLatLng(h),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(er("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let h=this._centerMarker.getLatLng(),g=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([h,g])},_syncCircleRadius(){let h=this._centerMarker.getLatLng(),g=this._hintMarker.getLatLng(),_=this._distanceCalculation(h,g);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(_)},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let _=h;_.target=this._hintMarker,this._handleSnapping(_)}this._handleHintMarkerSnapping();let g=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(g,"Draw")},isRelevantMarker(h){return h instanceof L.CircleMarker&&!(h instanceof L.Circle)&&h.pm&&!h._pmTempLayer},_createMarker(h){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!h.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng(),_=new this._BaseCircleClass(g,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(_,"layerPane"),this._finishLayer(_),_.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(_),this._fireCreate(_),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(h){h.pm&&this.options.markerEditable&&h.pm.enable()},_finishShape(h){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._centerMarker.getLatLng(),_=this._defaultRadius;if(this.options[this._editableOption]){let J=this._hintMarker.getLatLng();_=this._distanceCalculation(g,J),this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?_=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(_=this.options[this._maxRadiusOption])}let x={...this.options.pathOptions,radius:_},M=new this._BaseCircleClass(g,x);this._setPane(M,"layerPane"),this._finishLayer(M),M.addTo(this._map.pm._getContainingLayer()),M.pm&&M.pm._updateHiddenPolyCircle(),this._fireCreate(M);let $=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng($))},_getNewDestinationOfHintMarker(){let h=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return h;let g=this._centerMarker.getLatLng(),_=this._distanceCalculation(g,h);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?h=Jl(this._map,g,h,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(h=Jl(this._map,g,h,this._getMaxDistanceInMeter()))}return h},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let h=this._centerMarker.getLatLng(),g=this._hintMarker.getLatLng(),_=this._distanceCalculation(h,g);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var g,_;let h={};L.extend(h,this.options.templineStyle),this.options[this._editableOption]&&(h.radius=0),(g=this._layer)==null||g.setStyle(h),(_=this._hintline)==null||_.setStyle(this.options.hintlineStyle)},_distanceCalculation(h,g){return this._map.project(h).distanceTo(this._map.project(g))}}),$i.Circle=$i.CircleMarker.extend({initialize(h){this._map=h,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(h,g){return this._map.distance(h,g)}});function Zr(h){if(!h)throw new Error("coord is required");if(!Array.isArray(h)){if(h.type==="Feature"&&h.geometry!==null&&h.geometry.type==="Point")return h.geometry.coordinates;if(h.type==="Point")return h.coordinates}if(Array.isArray(h)&&h.length>=2&&!Array.isArray(h[0])&&!Array.isArray(h[1]))return h;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ri(h){if(Array.isArray(h))return h;if(h.type==="Feature"){if(h.geometry!==null)return h.geometry.coordinates}else if(h.coordinates)return h.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Vi(h){return h.type==="Feature"?h.geometry:h}function Zi(h,g){return h.type==="FeatureCollection"?"FeatureCollection":h.type==="GeometryCollection"?"GeometryCollection":h.type==="Feature"&&h.geometry!==null?h.geometry.type:h.type}function Lo(h,g,_){if(h!==null)for(var x,M,$,J,ne,me,Ce,Ye=0,Ve=0,mt,Mt=h.type,Kt=Mt==="FeatureCollection",fn=Mt==="Feature",wn=Kt?h.features.length:1,rr=0;rr<wn;rr++){Ce=Kt?h.features[rr].geometry:fn?h.geometry:h,mt=Ce?Ce.type==="GeometryCollection":!1,ne=mt?Ce.geometries.length:1;for(var qe=0;qe<ne;qe++){var Xe=0,ct=0;if(J=mt?Ce.geometries[qe]:Ce,J!==null){me=J.coordinates;var Nt=J.type;switch(Ye=0,Nt){case null:break;case"Point":if(g(me,Ve,rr,Xe,ct)===!1)return!1;Ve++,Xe++;break;case"LineString":case"MultiPoint":for(x=0;x<me.length;x++){if(g(me[x],Ve,rr,Xe,ct)===!1)return!1;Ve++,Nt==="MultiPoint"&&Xe++}Nt==="LineString"&&Xe++;break;case"Polygon":case"MultiLineString":for(x=0;x<me.length;x++){for(M=0;M<me[x].length-Ye;M++){if(g(me[x][M],Ve,rr,Xe,ct)===!1)return!1;Ve++}Nt==="MultiLineString"&&Xe++,Nt==="Polygon"&&ct++}Nt==="Polygon"&&Xe++;break;case"MultiPolygon":for(x=0;x<me.length;x++){for(ct=0,M=0;M<me[x].length;M++){for($=0;$<me[x][M].length-Ye;$++){if(g(me[x][M][$],Ve,rr,Xe,ct)===!1)return!1;Ve++}ct++}Xe++}break;case"GeometryCollection":for(x=0;x<J.geometries.length;x++)if(Lo(J.geometries[x],g)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Pr(h,g){if(h.type==="Feature")g(h,0);else if(h.type==="FeatureCollection")for(var _=0;_<h.features.length&&g(h.features[_],_)!==!1;_++);}function Es(h,g,_){var x=_;return Pr(h,function(M,$){$===0&&_===void 0?x=M:x=g(x,M,$)}),x}function Cl(h,g){var _,x,M,$,J,ne,me,Ce,Ye,Ve,mt=0,Mt=h.type==="FeatureCollection",Kt=h.type==="Feature",fn=Mt?h.features.length:1;for(_=0;_<fn;_++){for(ne=Mt?h.features[_].geometry:Kt?h.geometry:h,Ce=Mt?h.features[_].properties:Kt?h.properties:{},Ye=Mt?h.features[_].bbox:Kt?h.bbox:void 0,Ve=Mt?h.features[_].id:Kt?h.id:void 0,me=ne?ne.type==="GeometryCollection":!1,J=me?ne.geometries.length:1,M=0;M<J;M++){if($=me?ne.geometries[M]:ne,$===null){if(g(null,mt,Ce,Ye,Ve)===!1)return!1;continue}switch($.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(g($,mt,Ce,Ye,Ve)===!1)return!1;break}case"GeometryCollection":{for(x=0;x<$.geometries.length;x++)if(g($.geometries[x],mt,Ce,Ye,Ve)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}mt++}}function $s(h,g){Cl(h,function(_,x,M,$,J){var ne=_===null?null:_.type;switch(ne){case null:case"Point":case"LineString":case"Polygon":return g(We(_,M,{bbox:$,id:J}),x,0)===!1?!1:void 0}var me;switch(ne){case"MultiPoint":me="Point";break;case"MultiLineString":me="LineString";break;case"MultiPolygon":me="Polygon";break}for(var Ce=0;Ce<_.coordinates.length;Ce++){var Ye=_.coordinates[Ce],Ve={type:me,coordinates:Ye};if(g(We(Ve,M),x,Ce)===!1)return!1}})}function Lu(h){if(!h)throw new Error("geojson is required");var g=[];return $s(h,function(_){ta(_,g)}),Ft(g)}function ta(h,g){var _=[],x=h.geometry;if(x!==null){switch(x.type){case"Polygon":_=ri(x);break;case"LineString":_=[ri(x)]}_.forEach(function(M){var $=qu(M,h.properties);$.forEach(function(J){J.id=g.length,g.push(J)})})}}function qu(h,g){var _=[];return h.reduce(function(x,M){var $=xt([x,M],g);return $.bbox=Ja(x,M),_.push($),M}),_}function Ja(h,g){var _=h[0],x=h[1],M=g[0],$=g[1],J=_<M?_:M,ne=x<$?x:$,me=_>M?_:M,Ce=x>$?x:$;return[J,ne,me,Ce]}var Qa=Lu,Xi=l(Ro(),1);function na(h,g){var _={},x=[];if(h.type==="LineString"&&(h=We(h)),g.type==="LineString"&&(g=We(g)),h.type==="Feature"&&g.type==="Feature"&&h.geometry!==null&&g.geometry!==null&&h.geometry.type==="LineString"&&g.geometry.type==="LineString"&&h.geometry.coordinates.length===2&&g.geometry.coordinates.length===2){var M=Co(h,g);return M&&x.push(M),Ft(x)}var $=(0,Xi.default)();return $.load(Qa(g)),Pr(Qa(h),function(J){Pr($.search(J),function(ne){var me=Co(J,ne);if(me){var Ce=ri(me).join(",");_[Ce]||(_[Ce]=!0,x.push(me))}})}),Ft(x)}function Co(h,g){var _=ri(h),x=ri(g);if(_.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(x.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var M=_[0][0],$=_[0][1],J=_[1][0],ne=_[1][1],me=x[0][0],Ce=x[0][1],Ye=x[1][0],Ve=x[1][1],mt=(Ve-Ce)*(J-M)-(Ye-me)*(ne-$),Mt=(Ye-me)*($-Ce)-(Ve-Ce)*(M-me),Kt=(J-M)*($-Ce)-(ne-$)*(M-me);if(mt===0)return null;var fn=Mt/mt,wn=Kt/mt;if(fn>=0&&fn<=1&&wn>=0&&wn<=1){var rr=M+fn*(J-M),qe=$+fn*(ne-$);return lt([rr,qe])}return null}var ro=na,Sl=l(Ro(),1);function Ps(h,g,_){_===void 0&&(_={});var x=Zr(h),M=Zr(g),$=Jn(M[1]-x[1]),J=Jn(M[0]-x[0]),ne=Jn(x[1]),me=Jn(M[1]),Ce=Math.pow(Math.sin($/2),2)+Math.pow(Math.sin(J/2),2)*Math.cos(ne)*Math.cos(me);return on(2*Math.atan2(Math.sqrt(Ce),Math.sqrt(1-Ce)),_.units)}var Vs=Ps;function Hs(h){var g=h[0],_=h[1],x=h[2],M=h[3],$=Vs(h.slice(0,2),[x,_]),J=Vs(h.slice(0,2),[g,M]);if($>=J){var ne=(_+M)/2;return[g,ne-(x-g)/2,x,ne+(x-g)/2]}else{var me=(g+x)/2;return[me-(M-_)/2,_,me+(M-_)/2,M]}}var Ec=Hs;function as(h){var g=[1/0,1/0,-1/0,-1/0];return Lo(h,function(_){g[0]>_[0]&&(g[0]=_[0]),g[1]>_[1]&&(g[1]=_[1]),g[2]<_[0]&&(g[2]=_[0]),g[3]<_[1]&&(g[3]=_[1])}),g}as.default=as;var _a=as;function ks(h,g){g===void 0&&(g={});var _=g.precision,x=g.coordinates,M=g.mutate;if(_=_==null||isNaN(_)?6:_,x=x==null||isNaN(x)?3:x,!h)throw new Error("<geojson> is required");if(typeof _!="number")throw new Error("<precision> must be a number");if(typeof x!="number")throw new Error("<coordinates> must be a number");(M===!1||M===void 0)&&(h=JSON.parse(JSON.stringify(h)));var $=Math.pow(10,_);return Lo(h,function(J){Ms(J,$,x)}),h}function Ms(h,g,_){h.length>_&&h.splice(_,h.length);for(var x=0;x<h.length;x++)h[x]=Math.round(h[x]*g)/g;return h}var wa=ks;function xa(h,g,_){if(_===void 0&&(_={}),_.final===!0)return As(h,g);var x=Zr(h),M=Zr(g),$=Jn(x[0]),J=Jn(M[0]),ne=Jn(x[1]),me=Jn(M[1]),Ce=Math.sin(J-$)*Math.cos(me),Ye=Math.cos(ne)*Math.sin(me)-Math.sin(ne)*Math.cos(me)*Math.cos(J-$);return In(Math.atan2(Ce,Ye))}function As(h,g){var _=xa(g,h);return _=(_+180)%360,_}function ds(h,g,_,x){x===void 0&&(x={});var M=Zr(h),$=Jn(M[0]),J=Jn(M[1]),ne=Jn(_),me=Mn(g,x.units),Ce=Math.asin(Math.sin(J)*Math.cos(me)+Math.cos(J)*Math.sin(me)*Math.cos(ne)),Ye=$+Math.atan2(Math.sin(ne)*Math.sin(me)*Math.cos(J),Math.cos(me)-Math.sin(J)*Math.sin(Ce)),Ve=In(Ye),mt=In(Ce);return lt([Ve,mt],x.properties)}function ra(h,g,_){_===void 0&&(_={});var x=lt([1/0,1/0],{dist:1/0}),M=0;return $s(h,function($){for(var J=ri($),ne=0;ne<J.length-1;ne++){var me=lt(J[ne]);me.properties.dist=Vs(g,me,_);var Ce=lt(J[ne+1]);Ce.properties.dist=Vs(g,Ce,_);var Ye=Vs(me,Ce,_),Ve=Math.max(me.properties.dist,Ce.properties.dist),mt=xa(me,Ce),Mt=ds(g,Ve,mt+90,_),Kt=ds(g,Ve,mt-90,_),fn=ro(xt([Mt.geometry.coordinates,Kt.geometry.coordinates]),xt([me.geometry.coordinates,Ce.geometry.coordinates])),wn=null;fn.features.length>0&&(wn=fn.features[0],wn.properties.dist=Vs(g,wn,_),wn.properties.location=M+Vs(me,wn,_)),me.properties.dist<x.properties.dist&&(x=me,x.properties.index=ne,x.properties.location=M),Ce.properties.dist<x.properties.dist&&(x=Ce,x.properties.index=ne+1,x.properties.location=M+Ye),wn&&wn.properties.dist<x.properties.dist&&(x=wn,x.properties.index=ne),M+=Ye}}),x}var So=ra;function Ts(h,g){if(!h)throw new Error("line is required");if(!g)throw new Error("splitter is required");var _=Zi(h),x=Zi(g);if(_!=="LineString")throw new Error("line must be LineString");if(x==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(x==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var M=wa(g,{precision:7});switch(x){case"Point":return Vt(h,M);case"MultiPoint":return yt(h,M);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return yt(h,ro(h,M))}}function yt(h,g){var _=[],x=(0,Sl.default)();return $s(g,function(M){if(_.forEach(function(ne,me){ne.id=me}),!_.length)_=Vt(h,M).features,_.forEach(function(ne){ne.bbox||(ne.bbox=Ec(_a(ne)))}),x.load(Ft(_));else{var $=x.search(M);if($.features.length){var J=kt(M,$);_=_.filter(function(ne){return ne.id!==J.id}),x.remove(J),Pr(Vt(J,M),function(ne){_.push(ne),x.insert(ne)})}}}),Ft(_)}function Vt(h,g){var _=[],x=ri(h)[0],M=ri(h)[h.geometry.coordinates.length-1];if(Pn(x,Zr(g))||Pn(M,Zr(g)))return Ft([h]);var $=(0,Sl.default)(),J=Qa(h);$.load(J);var ne=$.search(g);if(!ne.features.length)return Ft([h]);var me=kt(g,ne),Ce=[x],Ye=Es(J,function(Ve,mt,Mt){var Kt=ri(mt)[1],fn=Zr(g);return Mt===me.id?(Ve.push(fn),_.push(xt(Ve)),Pn(fn,Kt)?[fn]:[fn,Kt]):(Ve.push(Kt),Ve)},Ce);return Ye.length>1&&_.push(xt(Ye)),Ft(_)}function kt(h,g){if(!g.features.length)throw new Error("lines must contain features");if(g.features.length===1)return g.features[0];var _,x=1/0;return Pr(g,function(M){var $=So(M,h),J=$.properties.dist;J<x&&(_=M,x=J)}),_}function Pn(h,g){return h[0]===g[0]&&h[1]===g[1]}var Un=Ts;function hr(h,g,_){if(_===void 0&&(_={}),!h)throw new Error("point is required");if(!g)throw new Error("polygon is required");var x=Zr(h),M=Vi(g),$=M.type,J=g.bbox,ne=M.coordinates;if(J&&ii(x,J)===!1)return!1;$==="Polygon"&&(ne=[ne]);for(var me=!1,Ce=0;Ce<ne.length&&!me;Ce++)if(Ei(x,ne[Ce][0],_.ignoreBoundary)){for(var Ye=!1,Ve=1;Ve<ne[Ce].length&&!Ye;)Ei(x,ne[Ce][Ve],!_.ignoreBoundary)&&(Ye=!0),Ve++;Ye||(me=!0)}return me}function Ei(h,g,_){var x=!1;g[0][0]===g[g.length-1][0]&&g[0][1]===g[g.length-1][1]&&(g=g.slice(0,g.length-1));for(var M=0,$=g.length-1;M<g.length;$=M++){var J=g[M][0],ne=g[M][1],me=g[$][0],Ce=g[$][1],Ye=h[1]*(J-me)+ne*(me-h[0])+Ce*(h[0]-J)===0&&(J-h[0])*(me-h[0])<=0&&(ne-h[1])*(Ce-h[1])<=0;if(Ye)return!_;var Ve=ne>h[1]!=Ce>h[1]&&h[0]<(me-J)*(h[1]-ne)/(Ce-ne)+J;Ve&&(x=!x)}return x}function ii(h,g){return g[0]<=h[0]&&g[1]<=h[1]&&g[2]>=h[0]&&g[3]>=h[1]}function nu(h,g,_){_===void 0&&(_={});for(var x=Zr(h),M=ri(g),$=0;$<M.length-1;$++){var J=!1;if(_.ignoreEndVertices&&($===0&&(J="start"),$===M.length-2&&(J="end"),$===0&&$+1===M.length-1&&(J="both")),Gs(M[$],M[$+1],x,J,typeof _.epsilon>"u"?null:_.epsilon))return!0}return!1}function Gs(h,g,_,x,M){var $=_[0],J=_[1],ne=h[0],me=h[1],Ce=g[0],Ye=g[1],Ve=_[0]-ne,mt=_[1]-me,Mt=Ce-ne,Kt=Ye-me,fn=Ve*Kt-mt*Mt;if(M!==null){if(Math.abs(fn)>M)return!1}else if(fn!==0)return!1;if(x){if(x==="start")return Math.abs(Mt)>=Math.abs(Kt)?Mt>0?ne<$&&$<=Ce:Ce<=$&&$<ne:Kt>0?me<J&&J<=Ye:Ye<=J&&J<me;if(x==="end")return Math.abs(Mt)>=Math.abs(Kt)?Mt>0?ne<=$&&$<Ce:Ce<$&&$<=ne:Kt>0?me<=J&&J<Ye:Ye<J&&J<=me;if(x==="both")return Math.abs(Mt)>=Math.abs(Kt)?Mt>0?ne<$&&$<Ce:Ce<$&&$<ne:Kt>0?me<J&&J<Ye:Ye<J&&J<me}else return Math.abs(Mt)>=Math.abs(Kt)?Mt>0?ne<=$&&$<=Ce:Ce<=$&&$<=ne:Kt>0?me<=J&&J<=Ye:Ye<=J&&J<=me;return!1}var Pi=nu;function ia(h,g){var _=Vi(h),x=Vi(g),M=_.type,$=x.type,J=_.coordinates,ne=x.coordinates;switch(M){case"Point":switch($){case"Point":return hi(J,ne);default:throw new Error("feature2 "+$+" geometry not supported")}case"MultiPoint":switch($){case"Point":return La(_,x);case"MultiPoint":return sa(_,x);default:throw new Error("feature2 "+$+" geometry not supported")}case"LineString":switch($){case"Point":return Pi(x,_,{ignoreEndVertices:!0});case"LineString":return Nr(_,x);case"MultiPoint":return oa(_,x);default:throw new Error("feature2 "+$+" geometry not supported")}case"Polygon":switch($){case"Point":return hr(x,_,{ignoreBoundary:!0});case"LineString":return Ho(_,x);case"Polygon":return ps(_,x);case"MultiPoint":return aa(_,x);default:throw new Error("feature2 "+$+" geometry not supported")}default:throw new Error("feature1 "+M+" geometry not supported")}}function La(h,g){var _,x=!1;for(_=0;_<h.coordinates.length;_++)if(hi(h.coordinates[_],g.coordinates)){x=!0;break}return x}function sa(h,g){for(var _=0,x=g.coordinates;_<x.length;_++){for(var M=x[_],$=!1,J=0,ne=h.coordinates;J<ne.length;J++){var me=ne[J];if(hi(M,me)){$=!0;break}}if(!$)return!1}return!0}function oa(h,g){for(var _=!1,x=0,M=g.coordinates;x<M.length;x++){var $=M[x];if(Pi($,h,{ignoreEndVertices:!0})&&(_=!0),!Pi($,h))return!1}return!!_}function aa(h,g){for(var _=0,x=g.coordinates;_<x.length;_++){var M=x[_];if(!hr(M,h,{ignoreBoundary:!0}))return!1}return!0}function Nr(h,g){for(var _=!1,x=0,M=g.coordinates;x<M.length;x++){var $=M[x];if(Pi({type:"Point",coordinates:$},h,{ignoreEndVertices:!0})&&(_=!0),!Pi({type:"Point",coordinates:$},h,{ignoreEndVertices:!1}))return!1}return _}function Ho(h,g){var _=!1,x=0,M=_a(h),$=_a(g);if(!si(M,$))return!1;for(x;x<g.coordinates.length-1;x++){var J=Hi(g.coordinates[x],g.coordinates[x+1]);if(hr({type:"Point",coordinates:J},h,{ignoreBoundary:!0})){_=!0;break}}return _}function ps(h,g){if(h.type==="Feature"&&h.geometry===null||g.type==="Feature"&&g.geometry===null)return!1;var _=_a(h),x=_a(g);if(!si(_,x))return!1;for(var M=Vi(g).coordinates,$=0,J=M;$<J.length;$++)for(var ne=J[$],me=0,Ce=ne;me<Ce.length;me++){var Ye=Ce[me];if(!hr(Ye,h))return!1}return!0}function si(h,g){return!(h[0]>g[0]||h[2]<g[2]||h[1]>g[1]||h[3]<g[3])}function hi(h,g){return h[0]===g[0]&&h[1]===g[1]}function Hi(h,g){return[(h[0]+g[0])/2,(h[1]+g[1])/2]}var vi=l(Mo()),Eo=h=>()=>h,io=h=>{let g=h?(_,x)=>x.minus(_).abs().isLessThanOrEqualTo(h):Eo(!1);return(_,x)=>g(_,x)?0:_.comparedTo(x)};function To(h){let g=h?(_,x,M,$,J)=>_.exponentiatedBy(2).isLessThanOrEqualTo($.minus(x).exponentiatedBy(2).plus(J.minus(M).exponentiatedBy(2)).times(h)):Eo(!1);return(_,x,M)=>{let $=_.x,J=_.y,ne=M.x,me=M.y,Ce=J.minus(me).times(x.x.minus(ne)).minus($.minus(ne).times(x.y.minus(me)));return g(Ce,$,J,ne,me)?0:Ce.comparedTo(0)}}var Yu=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,la=Math.ceil,Ji=Math.floor,mi="[BigNumber Error] ",Os=mi+"Number primitive has more than 15 significant digits: ",so=1e14,or=14,Ca=9007199254740991,Sa=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Go=1e7,Ws=1e9;function th(h){var g,_,x,M=qe.prototype={constructor:qe,toString:null,valueOf:null},$=new qe(1),J=20,ne=4,me=-7,Ce=21,Ye=-1e7,Ve=1e7,mt=!1,Mt=1,Kt=0,fn={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},wn="0123456789abcdefghijklmnopqrstuvwxyz",rr=!0;function qe(be,Pe){var Fe,Re,ze,Ue,rt,st,dt,Ct,St=this;if(!(St instanceof qe))return new qe(be,Pe);if(Pe==null){if(be&&be._isBigNumber===!0){St.s=be.s,!be.c||be.e>Ve?St.c=St.e=null:be.e<Ye?St.c=[St.e=0]:(St.e=be.e,St.c=be.c.slice());return}if((st=typeof be=="number")&&be*0==0){if(St.s=1/be<0?(be=-be,-1):1,be===~~be){for(Ue=0,rt=be;rt>=10;rt/=10,Ue++);Ue>Ve?St.c=St.e=null:(St.e=Ue,St.c=[be]);return}Ct=String(be)}else{if(!Yu.test(Ct=String(be)))return x(St,Ct,st);St.s=Ct.charCodeAt(0)==45?(Ct=Ct.slice(1),-1):1}(Ue=Ct.indexOf("."))>-1&&(Ct=Ct.replace(".","")),(rt=Ct.search(/e/i))>0?(Ue<0&&(Ue=rt),Ue+=+Ct.slice(rt+1),Ct=Ct.substring(0,rt)):Ue<0&&(Ue=Ct.length)}else{if(u(Pe,2,wn.length,"Base"),Pe==10&&rr)return St=new qe(be),_t(St,J+St.e+1,ne);if(Ct=String(be),st=typeof be=="number"){if(be*0!=0)return x(St,Ct,st,Pe);if(St.s=1/be<0?(Ct=Ct.slice(1),-1):1,qe.DEBUG&&Ct.replace(/^0\.0*|\./,"").length>15)throw Error(Os+be)}else St.s=Ct.charCodeAt(0)===45?(Ct=Ct.slice(1),-1):1;for(Fe=wn.slice(0,Pe),Ue=rt=0,dt=Ct.length;rt<dt;rt++)if(Fe.indexOf(Re=Ct.charAt(rt))<0){if(Re=="."){if(rt>Ue){Ue=dt;continue}}else if(!ze&&(Ct==Ct.toUpperCase()&&(Ct=Ct.toLowerCase())||Ct==Ct.toLowerCase()&&(Ct=Ct.toUpperCase()))){ze=!0,rt=-1,Ue=0;continue}return x(St,String(be),st,Pe)}st=!1,Ct=_(Ct,Pe,10,St.s),(Ue=Ct.indexOf("."))>-1?Ct=Ct.replace(".",""):Ue=Ct.length}for(rt=0;Ct.charCodeAt(rt)===48;rt++);for(dt=Ct.length;Ct.charCodeAt(--dt)===48;);if(Ct=Ct.slice(rt,++dt)){if(dt-=rt,st&&qe.DEBUG&&dt>15&&(be>Ca||be!==Ji(be)))throw Error(Os+St.s*be);if((Ue=Ue-rt-1)>Ve)St.c=St.e=null;else if(Ue<Ye)St.c=[St.e=0];else{if(St.e=Ue,St.c=[],rt=(Ue+1)%or,Ue<0&&(rt+=or),rt<dt){for(rt&&St.c.push(+Ct.slice(0,rt)),dt-=or;rt<dt;)St.c.push(+Ct.slice(rt,rt+=or));rt=or-(Ct=Ct.slice(rt)).length}else rt-=dt;for(;rt--;Ct+="0");St.c.push(+Ct)}}else St.c=[St.e=0]}qe.clone=th,qe.ROUND_UP=0,qe.ROUND_DOWN=1,qe.ROUND_CEIL=2,qe.ROUND_FLOOR=3,qe.ROUND_HALF_UP=4,qe.ROUND_HALF_DOWN=5,qe.ROUND_HALF_EVEN=6,qe.ROUND_HALF_CEIL=7,qe.ROUND_HALF_FLOOR=8,qe.EUCLID=9,qe.config=qe.set=function(be){var Pe,Fe;if(be!=null)if(typeof be=="object"){if(be.hasOwnProperty(Pe="DECIMAL_PLACES")&&(Fe=be[Pe],u(Fe,0,Ws,Pe),J=Fe),be.hasOwnProperty(Pe="ROUNDING_MODE")&&(Fe=be[Pe],u(Fe,0,8,Pe),ne=Fe),be.hasOwnProperty(Pe="EXPONENTIAL_AT")&&(Fe=be[Pe],Fe&&Fe.pop?(u(Fe[0],-1e9,0,Pe),u(Fe[1],0,Ws,Pe),me=Fe[0],Ce=Fe[1]):(u(Fe,-1e9,Ws,Pe),me=-(Ce=Fe<0?-Fe:Fe))),be.hasOwnProperty(Pe="RANGE"))if(Fe=be[Pe],Fe&&Fe.pop)u(Fe[0],-1e9,-1,Pe),u(Fe[1],1,Ws,Pe),Ye=Fe[0],Ve=Fe[1];else if(u(Fe,-1e9,Ws,Pe),Fe)Ye=-(Ve=Fe<0?-Fe:Fe);else throw Error(mi+Pe+" cannot be zero: "+Fe);if(be.hasOwnProperty(Pe="CRYPTO"))if(Fe=be[Pe],Fe===!!Fe)if(Fe)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))mt=Fe;else throw mt=!Fe,Error(mi+"crypto unavailable");else mt=Fe;else throw Error(mi+Pe+" not true or false: "+Fe);if(be.hasOwnProperty(Pe="MODULO_MODE")&&(Fe=be[Pe],u(Fe,0,9,Pe),Mt=Fe),be.hasOwnProperty(Pe="POW_PRECISION")&&(Fe=be[Pe],u(Fe,0,Ws,Pe),Kt=Fe),be.hasOwnProperty(Pe="FORMAT"))if(Fe=be[Pe],typeof Fe=="object")fn=Fe;else throw Error(mi+Pe+" not an object: "+Fe);if(be.hasOwnProperty(Pe="ALPHABET"))if(Fe=be[Pe],typeof Fe=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(Fe))rr=Fe.slice(0,10)=="0123456789",wn=Fe;else throw Error(mi+Pe+" invalid: "+Fe)}else throw Error(mi+"Object expected: "+be);return{DECIMAL_PLACES:J,ROUNDING_MODE:ne,EXPONENTIAL_AT:[me,Ce],RANGE:[Ye,Ve],CRYPTO:mt,MODULO_MODE:Mt,POW_PRECISION:Kt,FORMAT:fn,ALPHABET:wn}},qe.isBigNumber=function(be){if(!be||be._isBigNumber!==!0)return!1;if(!qe.DEBUG)return!0;var Pe,Fe,Re=be.c,ze=be.e,Ue=be.s;e:if({}.toString.call(Re)=="[object Array]"){if((Ue===1||Ue===-1)&&ze>=-1e9&&ze<=Ws&&ze===Ji(ze)){if(Re[0]===0){if(ze===0&&Re.length===1)return!0;break e}if(Pe=(ze+1)%or,Pe<1&&(Pe+=or),String(Re[0]).length==Pe){for(Pe=0;Pe<Re.length;Pe++)if(Fe=Re[Pe],Fe<0||Fe>=so||Fe!==Ji(Fe))break e;if(Fe!==0)return!0}}}else if(Re===null&&ze===null&&(Ue===null||Ue===1||Ue===-1))return!0;throw Error(mi+"Invalid BigNumber: "+be)},qe.maximum=qe.max=function(){return ct(arguments,-1)},qe.minimum=qe.min=function(){return ct(arguments,1)},qe.random=function(){var be=9007199254740992,Pe=Math.random()*be&2097151?function(){return Ji(Math.random()*be)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(Fe){var Re,ze,Ue,rt,st,dt=0,Ct=[],St=new qe($);if(Fe==null?Fe=J:u(Fe,0,Ws),rt=la(Fe/or),mt)if(crypto.getRandomValues){for(Re=crypto.getRandomValues(new Uint32Array(rt*=2));dt<rt;)st=Re[dt]*131072+(Re[dt+1]>>>11),st>=9e15?(ze=crypto.getRandomValues(new Uint32Array(2)),Re[dt]=ze[0],Re[dt+1]=ze[1]):(Ct.push(st%1e14),dt+=2);dt=rt/2}else if(crypto.randomBytes){for(Re=crypto.randomBytes(rt*=7);dt<rt;)st=(Re[dt]&31)*281474976710656+Re[dt+1]*1099511627776+Re[dt+2]*4294967296+Re[dt+3]*16777216+(Re[dt+4]<<16)+(Re[dt+5]<<8)+Re[dt+6],st>=9e15?crypto.randomBytes(7).copy(Re,dt):(Ct.push(st%1e14),dt+=7);dt=rt/7}else throw mt=!1,Error(mi+"crypto unavailable");if(!mt)for(;dt<rt;)st=Pe(),st<9e15&&(Ct[dt++]=st%1e14);for(rt=Ct[--dt],Fe%=or,rt&&Fe&&(st=Sa[or-Fe],Ct[dt]=Ji(rt/st)*st);Ct[dt]===0;Ct.pop(),dt--);if(dt<0)Ct=[Ue=0];else{for(Ue=-1;Ct[0]===0;Ct.splice(0,1),Ue-=or);for(dt=1,st=Ct[0];st>=10;st/=10,dt++);dt<or&&(Ue-=or-dt)}return St.e=Ue,St.c=Ct,St}}(),qe.sum=function(){for(var be=1,Pe=arguments,Fe=new qe(Pe[0]);be<Pe.length;)Fe=Fe.plus(Pe[be++]);return Fe},_=function(){var be="0123456789";function Pe(Fe,Re,ze,Ue){for(var rt,st=[0],dt,Ct=0,St=Fe.length;Ct<St;){for(dt=st.length;dt--;st[dt]*=Re);for(st[0]+=Ue.indexOf(Fe.charAt(Ct++)),rt=0;rt<st.length;rt++)st[rt]>ze-1&&(st[rt+1]==null&&(st[rt+1]=0),st[rt+1]+=st[rt]/ze|0,st[rt]%=ze)}return st.reverse()}return function(Fe,Re,ze,Ue,rt){var st,dt,Ct,St,en,Nn,jn,Kn,Qr=Fe.indexOf("."),fi=J,Br=ne;for(Qr>=0&&(St=Kt,Kt=0,Fe=Fe.replace(".",""),Kn=new qe(Re),Nn=Kn.pow(Fe.length-Qr),Kt=St,Kn.c=Pe(V(ms(Nn.c),Nn.e,"0"),10,ze,be),Kn.e=Kn.c.length),jn=Pe(Fe,Re,ze,rt?(st=wn,be):(st=be,wn)),Ct=St=jn.length;jn[--St]==0;jn.pop());if(!jn[0])return st.charAt(0);if(Qr<0?--Ct:(Nn.c=jn,Nn.e=Ct,Nn.s=Ue,Nn=g(Nn,Kn,fi,Br,ze),jn=Nn.c,en=Nn.r,Ct=Nn.e),dt=Ct+fi+1,Qr=jn[dt],St=ze/2,en=en||dt<0||jn[dt+1]!=null,en=Br<4?(Qr!=null||en)&&(Br==0||Br==(Nn.s<0?3:2)):Qr>St||Qr==St&&(Br==4||en||Br==6&&jn[dt-1]&1||Br==(Nn.s<0?8:7)),dt<1||!jn[0])Fe=en?V(st.charAt(1),-fi,st.charAt(0)):st.charAt(0);else{if(jn.length=dt,en)for(--ze;++jn[--dt]>ze;)jn[dt]=0,dt||(++Ct,jn=[1].concat(jn));for(St=jn.length;!jn[--St];);for(Qr=0,Fe="";Qr<=St;Fe+=st.charAt(jn[Qr++]));Fe=V(Fe,Ct,st.charAt(0))}return Fe}}(),g=function(){function be(Re,ze,Ue){var rt,st,dt,Ct,St=0,en=Re.length,Nn=ze%Go,jn=ze/Go|0;for(Re=Re.slice();en--;)dt=Re[en]%Go,Ct=Re[en]/Go|0,rt=jn*dt+Ct*Nn,st=Nn*dt+rt%Go*Go+St,St=(st/Ue|0)+(rt/Go|0)+jn*Ct,Re[en]=st%Ue;return St&&(Re=[St].concat(Re)),Re}function Pe(Re,ze,Ue,rt){var st,dt;if(Ue!=rt)dt=Ue>rt?1:-1;else for(st=dt=0;st<Ue;st++)if(Re[st]!=ze[st]){dt=Re[st]>ze[st]?1:-1;break}return dt}function Fe(Re,ze,Ue,rt){for(var st=0;Ue--;)Re[Ue]-=st,st=Re[Ue]<ze[Ue]?1:0,Re[Ue]=st*rt+Re[Ue]-ze[Ue];for(;!Re[0]&&Re.length>1;Re.splice(0,1));}return function(Re,ze,Ue,rt,st){var dt,Ct,St,en,Nn,jn,Kn,Qr,fi,Br,yi,lo,Zu,ca,kf,tl,kc,ha=Re.s==ze.s?1:-1,Is=Re.c,Gi=ze.c;if(!Is||!Is[0]||!Gi||!Gi[0])return new qe(!Re.s||!ze.s||(Is?Gi&&Is[0]==Gi[0]:!Gi)?NaN:Is&&Is[0]==0||!Gi?ha*0:ha/0);for(Qr=new qe(ha),fi=Qr.c=[],Ct=Re.e-ze.e,ha=Ue+Ct+1,st||(st=so,Ct=gs(Re.e/or)-gs(ze.e/or),ha=ha/or|0),St=0;Gi[St]==(Is[St]||0);St++);if(Gi[St]>(Is[St]||0)&&Ct--,ha<0)fi.push(1),en=!0;else{for(ca=Is.length,tl=Gi.length,St=0,ha+=2,Nn=Ji(st/(Gi[0]+1)),Nn>1&&(Gi=be(Gi,Nn,st),Is=be(Is,Nn,st),tl=Gi.length,ca=Is.length),Zu=tl,Br=Is.slice(0,tl),yi=Br.length;yi<tl;Br[yi++]=0);kc=Gi.slice(),kc=[0].concat(kc),kf=Gi[0],Gi[1]>=st/2&&kf++;do{if(Nn=0,dt=Pe(Gi,Br,tl,yi),dt<0){if(lo=Br[0],tl!=yi&&(lo=lo*st+(Br[1]||0)),Nn=Ji(lo/kf),Nn>1)for(Nn>=st&&(Nn=st-1),jn=be(Gi,Nn,st),Kn=jn.length,yi=Br.length;Pe(jn,Br,Kn,yi)==1;)Nn--,Fe(jn,tl<Kn?kc:Gi,Kn,st),Kn=jn.length,dt=1;else Nn==0&&(dt=Nn=1),jn=Gi.slice(),Kn=jn.length;if(Kn<yi&&(jn=[0].concat(jn)),Fe(Br,jn,yi,st),yi=Br.length,dt==-1)for(;Pe(Gi,Br,tl,yi)<1;)Nn++,Fe(Br,tl<yi?kc:Gi,yi,st),yi=Br.length}else dt===0&&(Nn++,Br=[0]);fi[St++]=Nn,Br[0]?Br[yi++]=Is[Zu]||0:(Br=[Is[Zu]],yi=1)}while((Zu++<ca||Br[0]!=null)&&ha--);en=Br[0]!=null,fi[0]||fi.splice(0,1)}if(st==so){for(St=1,ha=fi[0];ha>=10;ha/=10,St++);_t(Qr,Ue+(Qr.e=St+Ct*or-1)+1,rt,en)}else Qr.e=Ct,Qr.r=+en;return Qr}}();function Xe(be,Pe,Fe,Re){var ze,Ue,rt,st,dt;if(Fe==null?Fe=ne:u(Fe,0,8),!be.c)return be.toString();if(ze=be.c[0],rt=be.e,Pe==null)dt=ms(be.c),dt=Re==1||Re==2&&(rt<=me||rt>=Ce)?P(dt,rt):V(dt,rt,"0");else if(be=_t(new qe(be),Pe,Fe),Ue=be.e,dt=ms(be.c),st=dt.length,Re==1||Re==2&&(Pe<=Ue||Ue<=me)){for(;st<Pe;dt+="0",st++);dt=P(dt,Ue)}else if(Pe-=rt,dt=V(dt,Ue,"0"),Ue+1>st){if(--Pe>0)for(dt+=".";Pe--;dt+="0");}else if(Pe+=Ue-st,Pe>0)for(Ue+1==st&&(dt+=".");Pe--;dt+="0");return be.s<0&&ze?"-"+dt:dt}function ct(be,Pe){for(var Fe,Re,ze=1,Ue=new qe(be[0]);ze<be.length;ze++)Re=new qe(be[ze]),(!Re.s||(Fe=Wo(Ue,Re))===Pe||Fe===0&&Ue.s===Pe)&&(Ue=Re);return Ue}function Nt(be,Pe,Fe){for(var Re=1,ze=Pe.length;!Pe[--ze];Pe.pop());for(ze=Pe[0];ze>=10;ze/=10,Re++);return(Fe=Re+Fe*or-1)>Ve?be.c=be.e=null:Fe<Ye?be.c=[be.e=0]:(be.e=Fe,be.c=Pe),be}x=function(){var be=/^(-?)0([xbo])(?=\w[\w.]*$)/i,Pe=/^([^.]+)\.$/,Fe=/^\.([^.]+)$/,Re=/^-?(Infinity|NaN)$/,ze=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(Ue,rt,st,dt){var Ct,St=st?rt:rt.replace(ze,"");if(Re.test(St))Ue.s=isNaN(St)?null:St<0?-1:1;else{if(!st&&(St=St.replace(be,function(en,Nn,jn){return Ct=(jn=jn.toLowerCase())=="x"?16:jn=="b"?2:8,!dt||dt==Ct?Nn:en}),dt&&(Ct=dt,St=St.replace(Pe,"$1").replace(Fe,"0.$1")),rt!=St))return new qe(St,Ct);if(qe.DEBUG)throw Error(mi+"Not a"+(dt?" base "+dt:"")+" number: "+rt);Ue.s=null}Ue.c=Ue.e=null}}();function _t(be,Pe,Fe,Re){var ze,Ue,rt,st,dt,Ct,St,en=be.c,Nn=Sa;if(en){e:{for(ze=1,st=en[0];st>=10;st/=10,ze++);if(Ue=Pe-ze,Ue<0)Ue+=or,rt=Pe,dt=en[Ct=0],St=Ji(dt/Nn[ze-rt-1]%10);else if(Ct=la((Ue+1)/or),Ct>=en.length)if(Re){for(;en.length<=Ct;en.push(0));dt=St=0,ze=1,Ue%=or,rt=Ue-or+1}else break e;else{for(dt=st=en[Ct],ze=1;st>=10;st/=10,ze++);Ue%=or,rt=Ue-or+ze,St=rt<0?0:Ji(dt/Nn[ze-rt-1]%10)}if(Re=Re||Pe<0||en[Ct+1]!=null||(rt<0?dt:dt%Nn[ze-rt-1]),Re=Fe<4?(St||Re)&&(Fe==0||Fe==(be.s<0?3:2)):St>5||St==5&&(Fe==4||Re||Fe==6&&(Ue>0?rt>0?dt/Nn[ze-rt]:0:en[Ct-1])%10&1||Fe==(be.s<0?8:7)),Pe<1||!en[0])return en.length=0,Re?(Pe-=be.e+1,en[0]=Nn[(or-Pe%or)%or],be.e=-Pe||0):en[0]=be.e=0,be;if(Ue==0?(en.length=Ct,st=1,Ct--):(en.length=Ct+1,st=Nn[or-Ue],en[Ct]=rt>0?Ji(dt/Nn[ze-rt]%Nn[rt])*st:0),Re)for(;;)if(Ct==0){for(Ue=1,rt=en[0];rt>=10;rt/=10,Ue++);for(rt=en[0]+=st,st=1;rt>=10;rt/=10,st++);Ue!=st&&(be.e++,en[0]==so&&(en[0]=1));break}else{if(en[Ct]+=st,en[Ct]!=so)break;en[Ct--]=0,st=1}for(Ue=en.length;en[--Ue]===0;en.pop());}be.e>Ve?be.c=be.e=null:be.e<Ye&&(be.c=[be.e=0])}return be}function Tt(be){var Pe,Fe=be.e;return Fe===null?be.toString():(Pe=ms(be.c),Pe=Fe<=me||Fe>=Ce?P(Pe,Fe):V(Pe,Fe,"0"),be.s<0?"-"+Pe:Pe)}return M.absoluteValue=M.abs=function(){var be=new qe(this);return be.s<0&&(be.s=1),be},M.comparedTo=function(be,Pe){return Wo(this,new qe(be,Pe))},M.decimalPlaces=M.dp=function(be,Pe){var Fe,Re,ze,Ue=this;if(be!=null)return u(be,0,Ws),Pe==null?Pe=ne:u(Pe,0,8),_t(new qe(Ue),be+Ue.e+1,Pe);if(!(Fe=Ue.c))return null;if(Re=((ze=Fe.length-1)-gs(this.e/or))*or,ze=Fe[ze])for(;ze%10==0;ze/=10,Re--);return Re<0&&(Re=0),Re},M.dividedBy=M.div=function(be,Pe){return g(this,new qe(be,Pe),J,ne)},M.dividedToIntegerBy=M.idiv=function(be,Pe){return g(this,new qe(be,Pe),0,1)},M.exponentiatedBy=M.pow=function(be,Pe){var Fe,Re,ze,Ue,rt,st,dt,Ct,St,en=this;if(be=new qe(be),be.c&&!be.isInteger())throw Error(mi+"Exponent not an integer: "+Tt(be));if(Pe!=null&&(Pe=new qe(Pe)),st=be.e>14,!en.c||!en.c[0]||en.c[0]==1&&!en.e&&en.c.length==1||!be.c||!be.c[0])return St=new qe(Math.pow(+Tt(en),st?be.s*(2-y(be)):+Tt(be))),Pe?St.mod(Pe):St;if(dt=be.s<0,Pe){if(Pe.c?!Pe.c[0]:!Pe.s)return new qe(NaN);Re=!dt&&en.isInteger()&&Pe.isInteger(),Re&&(en=en.mod(Pe))}else{if(be.e>9&&(en.e>0||en.e<-1||(en.e==0?en.c[0]>1||st&&en.c[1]>=24e7:en.c[0]<8e13||st&&en.c[0]<=9999975e7)))return Ue=en.s<0&&y(be)?-0:0,en.e>-1&&(Ue=1/Ue),new qe(dt?1/Ue:Ue);Kt&&(Ue=la(Kt/or+2))}for(st?(Fe=new qe(.5),dt&&(be.s=1),Ct=y(be)):(ze=Math.abs(+Tt(be)),Ct=ze%2),St=new qe($);;){if(Ct){if(St=St.times(en),!St.c)break;Ue?St.c.length>Ue&&(St.c.length=Ue):Re&&(St=St.mod(Pe))}if(ze){if(ze=Ji(ze/2),ze===0)break;Ct=ze%2}else if(be=be.times(Fe),_t(be,be.e+1,1),be.e>14)Ct=y(be);else{if(ze=+Tt(be),ze===0)break;Ct=ze%2}en=en.times(en),Ue?en.c&&en.c.length>Ue&&(en.c.length=Ue):Re&&(en=en.mod(Pe))}return Re?St:(dt&&(St=$.div(St)),Pe?St.mod(Pe):Ue?_t(St,Kt,ne,rt):St)},M.integerValue=function(be){var Pe=new qe(this);return be==null?be=ne:u(be,0,8),_t(Pe,Pe.e+1,be)},M.isEqualTo=M.eq=function(be,Pe){return Wo(this,new qe(be,Pe))===0},M.isFinite=function(){return!!this.c},M.isGreaterThan=M.gt=function(be,Pe){return Wo(this,new qe(be,Pe))>0},M.isGreaterThanOrEqualTo=M.gte=function(be,Pe){return(Pe=Wo(this,new qe(be,Pe)))===1||Pe===0},M.isInteger=function(){return!!this.c&&gs(this.e/or)>this.c.length-2},M.isLessThan=M.lt=function(be,Pe){return Wo(this,new qe(be,Pe))<0},M.isLessThanOrEqualTo=M.lte=function(be,Pe){return(Pe=Wo(this,new qe(be,Pe)))===-1||Pe===0},M.isNaN=function(){return!this.s},M.isNegative=function(){return this.s<0},M.isPositive=function(){return this.s>0},M.isZero=function(){return!!this.c&&this.c[0]==0},M.minus=function(be,Pe){var Fe,Re,ze,Ue,rt=this,st=rt.s;if(be=new qe(be,Pe),Pe=be.s,!st||!Pe)return new qe(NaN);if(st!=Pe)return be.s=-Pe,rt.plus(be);var dt=rt.e/or,Ct=be.e/or,St=rt.c,en=be.c;if(!dt||!Ct){if(!St||!en)return St?(be.s=-Pe,be):new qe(en?rt:NaN);if(!St[0]||!en[0])return en[0]?(be.s=-Pe,be):new qe(St[0]?rt:ne==3?-0:0)}if(dt=gs(dt),Ct=gs(Ct),St=St.slice(),st=dt-Ct){for((Ue=st<0)?(st=-st,ze=St):(Ct=dt,ze=en),ze.reverse(),Pe=st;Pe--;ze.push(0));ze.reverse()}else for(Re=(Ue=(st=St.length)<(Pe=en.length))?st:Pe,st=Pe=0;Pe<Re;Pe++)if(St[Pe]!=en[Pe]){Ue=St[Pe]<en[Pe];break}if(Ue&&(ze=St,St=en,en=ze,be.s=-be.s),Pe=(Re=en.length)-(Fe=St.length),Pe>0)for(;Pe--;St[Fe++]=0);for(Pe=so-1;Re>st;){if(St[--Re]<en[Re]){for(Fe=Re;Fe&&!St[--Fe];St[Fe]=Pe);--St[Fe],St[Re]+=so}St[Re]-=en[Re]}for(;St[0]==0;St.splice(0,1),--Ct);return St[0]?Nt(be,St,Ct):(be.s=ne==3?-1:1,be.c=[be.e=0],be)},M.modulo=M.mod=function(be,Pe){var Fe,Re,ze=this;return be=new qe(be,Pe),!ze.c||!be.s||be.c&&!be.c[0]?new qe(NaN):!be.c||ze.c&&!ze.c[0]?new qe(ze):(Mt==9?(Re=be.s,be.s=1,Fe=g(ze,be,0,3),be.s=Re,Fe.s*=Re):Fe=g(ze,be,0,Mt),be=ze.minus(Fe.times(be)),!be.c[0]&&Mt==1&&(be.s=ze.s),be)},M.multipliedBy=M.times=function(be,Pe){var Fe,Re,ze,Ue,rt,st,dt,Ct,St,en,Nn,jn,Kn,Qr,fi,Br=this,yi=Br.c,lo=(be=new qe(be,Pe)).c;if(!yi||!lo||!yi[0]||!lo[0])return!Br.s||!be.s||yi&&!yi[0]&&!lo||lo&&!lo[0]&&!yi?be.c=be.e=be.s=null:(be.s*=Br.s,!yi||!lo?be.c=be.e=null:(be.c=[0],be.e=0)),be;for(Re=gs(Br.e/or)+gs(be.e/or),be.s*=Br.s,dt=yi.length,en=lo.length,dt<en&&(Kn=yi,yi=lo,lo=Kn,ze=dt,dt=en,en=ze),ze=dt+en,Kn=[];ze--;Kn.push(0));for(Qr=so,fi=Go,ze=en;--ze>=0;){for(Fe=0,Nn=lo[ze]%fi,jn=lo[ze]/fi|0,rt=dt,Ue=ze+rt;Ue>ze;)Ct=yi[--rt]%fi,St=yi[rt]/fi|0,st=jn*Ct+St*Nn,Ct=Nn*Ct+st%fi*fi+Kn[Ue]+Fe,Fe=(Ct/Qr|0)+(st/fi|0)+jn*St,Kn[Ue--]=Ct%Qr;Kn[Ue]=Fe}return Fe?++Re:Kn.splice(0,1),Nt(be,Kn,Re)},M.negated=function(){var be=new qe(this);return be.s=-be.s||null,be},M.plus=function(be,Pe){var Fe,Re=this,ze=Re.s;if(be=new qe(be,Pe),Pe=be.s,!ze||!Pe)return new qe(NaN);if(ze!=Pe)return be.s=-Pe,Re.minus(be);var Ue=Re.e/or,rt=be.e/or,st=Re.c,dt=be.c;if(!Ue||!rt){if(!st||!dt)return new qe(ze/0);if(!st[0]||!dt[0])return dt[0]?be:new qe(st[0]?Re:ze*0)}if(Ue=gs(Ue),rt=gs(rt),st=st.slice(),ze=Ue-rt){for(ze>0?(rt=Ue,Fe=dt):(ze=-ze,Fe=st),Fe.reverse();ze--;Fe.push(0));Fe.reverse()}for(ze=st.length,Pe=dt.length,ze-Pe<0&&(Fe=dt,dt=st,st=Fe,Pe=ze),ze=0;Pe;)ze=(st[--Pe]=st[Pe]+dt[Pe]+ze)/so|0,st[Pe]=so===st[Pe]?0:st[Pe]%so;return ze&&(st=[ze].concat(st),++rt),Nt(be,st,rt)},M.precision=M.sd=function(be,Pe){var Fe,Re,ze,Ue=this;if(be!=null&&be!==!!be)return u(be,1,Ws),Pe==null?Pe=ne:u(Pe,0,8),_t(new qe(Ue),be,Pe);if(!(Fe=Ue.c))return null;if(ze=Fe.length-1,Re=ze*or+1,ze=Fe[ze]){for(;ze%10==0;ze/=10,Re--);for(ze=Fe[0];ze>=10;ze/=10,Re++);}return be&&Ue.e+1>Re&&(Re=Ue.e+1),Re},M.shiftedBy=function(be){return u(be,-9007199254740991,Ca),this.times("1e"+be)},M.squareRoot=M.sqrt=function(){var be,Pe,Fe,Re,ze,Ue=this,rt=Ue.c,st=Ue.s,dt=Ue.e,Ct=J+4,St=new qe("0.5");if(st!==1||!rt||!rt[0])return new qe(!st||st<0&&(!rt||rt[0])?NaN:rt?Ue:1/0);if(st=Math.sqrt(+Tt(Ue)),st==0||st==1/0?(Pe=ms(rt),(Pe.length+dt)%2==0&&(Pe+="0"),st=Math.sqrt(+Pe),dt=gs((dt+1)/2)-(dt<0||dt%2),st==1/0?Pe="5e"+dt:(Pe=st.toExponential(),Pe=Pe.slice(0,Pe.indexOf("e")+1)+dt),Fe=new qe(Pe)):Fe=new qe(st+""),Fe.c[0]){for(dt=Fe.e,st=dt+Ct,st<3&&(st=0);;)if(ze=Fe,Fe=St.times(ze.plus(g(Ue,ze,Ct,1))),ms(ze.c).slice(0,st)===(Pe=ms(Fe.c)).slice(0,st))if(Fe.e<dt&&--st,Pe=Pe.slice(st-3,st+1),Pe=="9999"||!Re&&Pe=="4999"){if(!Re&&(_t(ze,ze.e+J+2,0),ze.times(ze).eq(Ue))){Fe=ze;break}Ct+=4,st+=4,Re=1}else{(!+Pe||!+Pe.slice(1)&&Pe.charAt(0)=="5")&&(_t(Fe,Fe.e+J+2,1),be=!Fe.times(Fe).eq(Ue));break}}return _t(Fe,Fe.e+J+1,ne,be)},M.toExponential=function(be,Pe){return be!=null&&(u(be,0,Ws),be++),Xe(this,be,Pe,1)},M.toFixed=function(be,Pe){return be!=null&&(u(be,0,Ws),be=be+this.e+1),Xe(this,be,Pe)},M.toFormat=function(be,Pe,Fe){var Re,ze=this;if(Fe==null)be!=null&&Pe&&typeof Pe=="object"?(Fe=Pe,Pe=null):be&&typeof be=="object"?(Fe=be,be=Pe=null):Fe=fn;else if(typeof Fe!="object")throw Error(mi+"Argument not an object: "+Fe);if(Re=ze.toFixed(be,Pe),ze.c){var Ue,rt=Re.split("."),st=+Fe.groupSize,dt=+Fe.secondaryGroupSize,Ct=Fe.groupSeparator||"",St=rt[0],en=rt[1],Nn=ze.s<0,jn=Nn?St.slice(1):St,Kn=jn.length;if(dt&&(Ue=st,st=dt,dt=Ue,Kn-=Ue),st>0&&Kn>0){for(Ue=Kn%st||st,St=jn.substr(0,Ue);Ue<Kn;Ue+=st)St+=Ct+jn.substr(Ue,st);dt>0&&(St+=Ct+jn.slice(Ue)),Nn&&(St="-"+St)}Re=en?St+(Fe.decimalSeparator||"")+((dt=+Fe.fractionGroupSize)?en.replace(new RegExp("\\d{"+dt+"}\\B","g"),"$&"+(Fe.fractionGroupSeparator||"")):en):St}return(Fe.prefix||"")+Re+(Fe.suffix||"")},M.toFraction=function(be){var Pe,Fe,Re,ze,Ue,rt,st,dt,Ct,St,en,Nn,jn=this,Kn=jn.c;if(be!=null&&(st=new qe(be),!st.isInteger()&&(st.c||st.s!==1)||st.lt($)))throw Error(mi+"Argument "+(st.isInteger()?"out of range: ":"not an integer: ")+Tt(st));if(!Kn)return new qe(jn);for(Pe=new qe($),Ct=Fe=new qe($),Re=dt=new qe($),Nn=ms(Kn),Ue=Pe.e=Nn.length-jn.e-1,Pe.c[0]=Sa[(rt=Ue%or)<0?or+rt:rt],be=!be||st.comparedTo(Pe)>0?Ue>0?Pe:Ct:st,rt=Ve,Ve=1/0,st=new qe(Nn),dt.c[0]=0;St=g(st,Pe,0,1),ze=Fe.plus(St.times(Re)),ze.comparedTo(be)!=1;)Fe=Re,Re=ze,Ct=dt.plus(St.times(ze=Ct)),dt=ze,Pe=st.minus(St.times(ze=Pe)),st=ze;return ze=g(be.minus(Fe),Re,0,1),dt=dt.plus(ze.times(Ct)),Fe=Fe.plus(ze.times(Re)),dt.s=Ct.s=jn.s,Ue=Ue*2,en=g(Ct,Re,Ue,ne).minus(jn).abs().comparedTo(g(dt,Fe,Ue,ne).minus(jn).abs())<1?[Ct,Re]:[dt,Fe],Ve=rt,en},M.toNumber=function(){return+Tt(this)},M.toPrecision=function(be,Pe){return be!=null&&u(be,1,Ws),Xe(this,be,Pe,2)},M.toString=function(be){var Pe,Fe=this,Re=Fe.s,ze=Fe.e;return ze===null?Re?(Pe="Infinity",Re<0&&(Pe="-"+Pe)):Pe="NaN":(be==null?Pe=ze<=me||ze>=Ce?P(ms(Fe.c),ze):V(ms(Fe.c),ze,"0"):be===10&&rr?(Fe=_t(new qe(Fe),J+ze+1,ne),Pe=V(ms(Fe.c),Fe.e,"0")):(u(be,2,wn.length,"Base"),Pe=_(V(ms(Fe.c),ze,"0"),10,be,Re,!0)),Re<0&&Fe.c[0]&&(Pe="-"+Pe)),Pe},M.valueOf=M.toJSON=function(){return Tt(this)},M._isBigNumber=!0,M[Symbol.toStringTag]="BigNumber",M[Symbol.for("nodejs.util.inspect.custom")]=M.valueOf,h!=null&&qe.set(h),qe}function gs(h){var g=h|0;return h>0||h===g?g:g-1}function ms(h){for(var g,_,x=1,M=h.length,$=h[0]+"";x<M;){for(g=h[x++]+"",_=or-g.length;_--;g="0"+g);$+=g}for(M=$.length;$.charCodeAt(--M)===48;);return $.slice(0,M+1||1)}function Wo(h,g){var _,x,M=h.c,$=g.c,J=h.s,ne=g.s,me=h.e,Ce=g.e;if(!J||!ne)return null;if(_=M&&!M[0],x=$&&!$[0],_||x)return _?x?0:-ne:J;if(J!=ne)return J;if(_=J<0,x=me==Ce,!M||!$)return x?0:!M^_?1:-1;if(!x)return me>Ce^_?1:-1;for(ne=(me=M.length)<(Ce=$.length)?me:Ce,J=0;J<ne;J++)if(M[J]!=$[J])return M[J]>$[J]^_?1:-1;return me==Ce?0:me>Ce^_?1:-1}function u(h,g,_,x){if(h<g||h>_||h!==Ji(h))throw Error(mi+(x||"Argument")+(typeof h=="number"?h<g||h>_?" out of range: ":" not an integer: ":" not a primitive number: ")+String(h))}function y(h){var g=h.c.length-1;return gs(h.e/or)==g&&h.c[g]%2!=0}function P(h,g){return(h.length>1?h.charAt(0)+"."+h.slice(1):h)+(g<0?"e":"e+")+g}function V(h,g,_){var x,M;if(g<0){for(M=_+".";++g;M+=_);h=M+h}else if(x=h.length,++g>x){for(M=_,g-=x;--g;M+=_);h+=M}else g<x&&(h=h.slice(0,g)+"."+h.slice(g));return h}var ie=th(),Se=ie,nt=class{constructor(h){Ke(this,"key");Ke(this,"left",null);Ke(this,"right",null);this.key=h}},Pt=class extends nt{constructor(h){super(h)}},jt=class{constructor(){Ke(this,"size",0);Ke(this,"modificationCount",0);Ke(this,"splayCount",0)}splay(h){let g=this.root;if(g==null)return this.compare(h,h),-1;let _=null,x=null,M=null,$=null,J=g,ne=this.compare,me;for(;;)if(me=ne(J.key,h),me>0){let Ce=J.left;if(Ce==null||(me=ne(Ce.key,h),me>0&&(J.left=Ce.right,Ce.right=J,J=Ce,Ce=J.left,Ce==null)))break;_==null?x=J:_.left=J,_=J,J=Ce}else if(me<0){let Ce=J.right;if(Ce==null||(me=ne(Ce.key,h),me<0&&(J.right=Ce.left,Ce.left=J,J=Ce,Ce=J.right,Ce==null)))break;M==null?$=J:M.right=J,M=J,J=Ce}else break;return M!=null&&(M.right=J.left,J.left=$),_!=null&&(_.left=J.right,J.right=x),this.root!==J&&(this.root=J,this.splayCount++),me}splayMin(h){let g=h,_=g.left;for(;_!=null;){let x=_;g.left=x.right,x.right=g,g=x,_=g.left}return g}splayMax(h){let g=h,_=g.right;for(;_!=null;){let x=_;g.right=x.left,x.left=g,g=x,_=g.right}return g}_delete(h){if(this.root==null||this.splay(h)!=0)return null;let g=this.root,_=g,x=g.left;if(this.size--,x==null)this.root=g.right;else{let M=g.right;g=this.splayMax(x),g.right=M,this.root=g}return this.modificationCount++,_}addNewRoot(h,g){this.size++,this.modificationCount++;let _=this.root;if(_==null){this.root=h;return}g<0?(h.left=_,h.right=_.right,_.right=null):(h.right=_,h.left=_.left,_.left=null),this.root=h}_first(){let h=this.root;return h==null?null:(this.root=this.splayMin(h),this.root)}_last(){let h=this.root;return h==null?null:(this.root=this.splayMax(h),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(h){return this.validKey(h)&&this.splay(h)==0}defaultCompare(){return(h,g)=>h<g?-1:h>g?1:0}wrap(){return{getRoot:()=>this.root,setRoot:h=>{this.root=h},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:h=>{this.splayCount=h},splay:h=>this.splay(h),has:h=>this.has(h)}}},nn=class fg extends jt{constructor(_,x){super();Ke(this,"root",null);Ke(this,"compare");Ke(this,"validKey");Ke(this,Cn,"[object Set]");this.compare=_??this.defaultCompare(),this.validKey=x??(M=>M!=null&&M!=null)}delete(_){return this.validKey(_)?this._delete(_)!=null:!1}deleteAll(_){for(let x of _)this.delete(x)}forEach(_){let x=this[Symbol.iterator](),M;for(;M=x.next(),!M.done;)_(M.value,M.value,this)}add(_){let x=this.splay(_);return x!=0&&this.addNewRoot(new Pt(_),x),this}addAndReturn(_){let x=this.splay(_);return x!=0&&this.addNewRoot(new Pt(_),x),this.root.key}addAll(_){for(let x of _)this.add(x)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(_){if(_==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(_)<0)return this.root.key;let x=this.root.left;if(x==null)return null;let M=x.right;for(;M!=null;)x=M,M=x.right;return x.key}firstAfter(_){if(_==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(_)>0)return this.root.key;let x=this.root.right;if(x==null)return null;let M=x.left;for(;M!=null;)x=M,M=x.left;return x.key}retainAll(_){let x=new fg(this.compare,this.validKey),M=this.modificationCount;for(let $ of _){if(M!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey($)&&this.splay($)==0&&x.add(this.root.key)}x.size!=this.size&&(this.root=x.root,this.size=x.size,this.modificationCount++)}lookup(_){return!this.validKey(_)||this.splay(_)!=0?null:this.root.key}intersection(_){let x=new fg(this.compare,this.validKey);for(let M of this)_.has(M)&&x.add(M);return x}difference(_){let x=new fg(this.compare,this.validKey);for(let M of this)_.has(M)||x.add(M);return x}union(_){let x=this.clone();return x.addAll(_),x}clone(){let _=new fg(this.compare,this.validKey);return _.size=this.size,_.root=this.copyNode(this.root),_}copyNode(_){if(_==null)return null;function x($,J){let ne,me;do{if(ne=$.left,me=$.right,ne!=null){let Ce=new Pt(ne.key);J.left=Ce,x(ne,Ce)}if(me!=null){let Ce=new Pt(me.key);J.right=Ce,$=me,J=Ce}}while(me!=null)}let M=new Pt(_.key);return x(_,M),M}toSet(){return this.clone()}entries(){return new Sr(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(Yn=Symbol.iterator,Cn=Symbol.toStringTag,Yn)](){return new qn(this.wrap())}},An=class{constructor(h){Ke(this,"tree");Ke(this,"path",new Array);Ke(this,"modificationCount",null);Ke(this,"splayCount");this.tree=h,this.splayCount=h.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let h=this.path[this.path.length-1];return this.getValue(h)}rebuildPath(h){this.path.splice(0,this.path.length),this.tree.splay(h),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(h){for(;h!=null;)this.path.push(h),h=h.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let _=this.tree.getRoot();for(;_!=null;)this.path.push(_),_=_.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let h=this.path[this.path.length-1],g=h.right;if(g!=null){for(;g!=null;)this.path.push(g),g=g.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===h;)h=this.path.pop();return this.path.length>0}},qn=class extends An{getValue(h){return h.key}},Sr=class extends An{getValue(h){return[h.key,h.key]}},Qi=h=>h,Ii=h=>{if(h){let g=new nn(io(h)),_=new nn(io(h)),x=($,J)=>J.addAndReturn($),M=$=>({x:x($.x,g),y:x($.y,_)});return M({x:new Se(0),y:new Se(0)}),M}return Qi},vs=h=>({set:g=>{ki=vs(g)},reset:()=>vs(h),compare:io(h),snap:Ii(h),orient:To(h)}),ki=vs(),oo=(h,g)=>h.ll.x.isLessThanOrEqualTo(g.x)&&g.x.isLessThanOrEqualTo(h.ur.x)&&h.ll.y.isLessThanOrEqualTo(g.y)&&g.y.isLessThanOrEqualTo(h.ur.y),nh=(h,g)=>{if(g.ur.x.isLessThan(h.ll.x)||h.ur.x.isLessThan(g.ll.x)||g.ur.y.isLessThan(h.ll.y)||h.ur.y.isLessThan(g.ll.y))return null;let _=h.ll.x.isLessThan(g.ll.x)?g.ll.x:h.ll.x,x=h.ur.x.isLessThan(g.ur.x)?h.ur.x:g.ur.x,M=h.ll.y.isLessThan(g.ll.y)?g.ll.y:h.ll.y,$=h.ur.y.isLessThan(g.ur.y)?h.ur.y:g.ur.y;return{ll:{x:_,y:M},ur:{x,y:$}}},ua=(h,g)=>h.x.times(g.y).minus(h.y.times(g.x)),qo=(h,g)=>h.x.times(g.x).plus(h.y.times(g.y)),Oo=h=>qo(h,h).sqrt(),Ef=(h,g,_)=>{let x={x:g.x.minus(h.x),y:g.y.minus(h.y)},M={x:_.x.minus(h.x),y:_.y.minus(h.y)};return ua(M,x).div(Oo(M)).div(Oo(x))},Cu=(h,g,_)=>{let x={x:g.x.minus(h.x),y:g.y.minus(h.y)},M={x:_.x.minus(h.x),y:_.y.minus(h.y)};return qo(M,x).div(Oo(M)).div(Oo(x))},Jr=(h,g,_)=>g.y.isZero()?null:{x:h.x.plus(g.x.div(g.y).times(_.minus(h.y))),y:_},Ds=(h,g,_)=>g.x.isZero()?null:{x:_,y:h.y.plus(g.y.div(g.x).times(_.minus(h.x)))},Oe=(h,g,_,x)=>{if(g.x.isZero())return Ds(_,x,h.x);if(x.x.isZero())return Ds(h,g,_.x);if(g.y.isZero())return Jr(_,x,h.y);if(x.y.isZero())return Jr(h,g,_.y);let M=ua(g,x);if(M.isZero())return null;let $={x:_.x.minus(h.x),y:_.y.minus(h.y)},J=ua($,g).div(M),ne=ua($,x).div(M),me=h.x.plus(ne.times(g.x)),Ce=_.x.plus(J.times(x.x)),Ye=h.y.plus(ne.times(g.y)),Ve=_.y.plus(J.times(x.y)),mt=me.plus(Ce).div(2),Mt=Ye.plus(Ve).div(2);return{x:mt,y:Mt}},ao=class yE{constructor(g,_){Ke(this,"point");Ke(this,"isLeft");Ke(this,"segment");Ke(this,"otherSE");Ke(this,"consumedBy");g.events===void 0?g.events=[this]:g.events.push(this),this.point=g,this.isLeft=_}static compare(g,_){let x=yE.comparePoints(g.point,_.point);return x!==0?x:(g.point!==_.point&&g.link(_),g.isLeft!==_.isLeft?g.isLeft?1:-1:ys.compare(g.segment,_.segment))}static comparePoints(g,_){return g.x.isLessThan(_.x)?-1:g.x.isGreaterThan(_.x)?1:g.y.isLessThan(_.y)?-1:g.y.isGreaterThan(_.y)?1:0}link(g){if(g.point===this.point)throw new Error("Tried to link already linked events");let _=g.point.events;for(let x=0,M=_.length;x<M;x++){let $=_[x];this.point.events.push($),$.point=this.point}this.checkForConsuming()}checkForConsuming(){let g=this.point.events.length;for(let _=0;_<g;_++){let x=this.point.events[_];if(x.segment.consumedBy===void 0)for(let M=_+1;M<g;M++){let $=this.point.events[M];$.consumedBy===void 0&&x.otherSE.point.events===$.otherSE.point.events&&x.segment.consume($.segment)}}}getAvailableLinkedEvents(){let g=[];for(let _=0,x=this.point.events.length;_<x;_++){let M=this.point.events[_];M!==this&&!M.segment.ringOut&&M.segment.isInResult()&&g.push(M)}return g}getLeftmostComparator(g){let _=new Map,x=M=>{let $=M.otherSE;_.set(M,{sine:Ef(this.point,g.point,$.point),cosine:Cu(this.point,g.point,$.point)})};return(M,$)=>{_.has(M)||x(M),_.has($)||x($);let{sine:J,cosine:ne}=_.get(M),{sine:me,cosine:Ce}=_.get($);return J.isGreaterThanOrEqualTo(0)&&me.isGreaterThanOrEqualTo(0)?ne.isLessThan(Ce)?1:ne.isGreaterThan(Ce)?-1:0:J.isLessThan(0)&&me.isLessThan(0)?ne.isLessThan(Ce)?-1:ne.isGreaterThan(Ce)?1:0:me.isLessThan(J)?-1:me.isGreaterThan(J)?1:0}}},Ku=0,ys=class Zm{constructor(g,_,x,M){Ke(this,"id");Ke(this,"leftSE");Ke(this,"rightSE");Ke(this,"rings");Ke(this,"windings");Ke(this,"ringOut");Ke(this,"consumedBy");Ke(this,"prev");Ke(this,"_prevInResult");Ke(this,"_beforeState");Ke(this,"_afterState");Ke(this,"_isInResult");this.id=++Ku,this.leftSE=g,g.segment=this,g.otherSE=_,this.rightSE=_,_.segment=this,_.otherSE=g,this.rings=x,this.windings=M}static compare(g,_){let x=g.leftSE.point.x,M=_.leftSE.point.x,$=g.rightSE.point.x,J=_.rightSE.point.x;if(J.isLessThan(x))return 1;if($.isLessThan(M))return-1;let ne=g.leftSE.point.y,me=_.leftSE.point.y,Ce=g.rightSE.point.y,Ye=_.rightSE.point.y;if(x.isLessThan(M)){if(me.isLessThan(ne)&&me.isLessThan(Ce))return 1;if(me.isGreaterThan(ne)&&me.isGreaterThan(Ce))return-1;let Ve=g.comparePoint(_.leftSE.point);if(Ve<0)return 1;if(Ve>0)return-1;let mt=_.comparePoint(g.rightSE.point);return mt!==0?mt:-1}if(x.isGreaterThan(M)){if(ne.isLessThan(me)&&ne.isLessThan(Ye))return-1;if(ne.isGreaterThan(me)&&ne.isGreaterThan(Ye))return 1;let Ve=_.comparePoint(g.leftSE.point);if(Ve!==0)return Ve;let mt=g.comparePoint(_.rightSE.point);return mt<0?1:mt>0?-1:1}if(ne.isLessThan(me))return-1;if(ne.isGreaterThan(me))return 1;if($.isLessThan(J)){let Ve=_.comparePoint(g.rightSE.point);if(Ve!==0)return Ve}if($.isGreaterThan(J)){let Ve=g.comparePoint(_.rightSE.point);if(Ve<0)return 1;if(Ve>0)return-1}if(!$.eq(J)){let Ve=Ce.minus(ne),mt=$.minus(x),Mt=Ye.minus(me),Kt=J.minus(M);if(Ve.isGreaterThan(mt)&&Mt.isLessThan(Kt))return 1;if(Ve.isLessThan(mt)&&Mt.isGreaterThan(Kt))return-1}return $.isGreaterThan(J)?1:$.isLessThan(J)||Ce.isLessThan(Ye)?-1:Ce.isGreaterThan(Ye)?1:g.id<_.id?-1:g.id>_.id?1:0}static fromRing(g,_,x){let M,$,J,ne=ao.comparePoints(g,_);if(ne<0)M=g,$=_,J=1;else if(ne>0)M=_,$=g,J=-1;else throw new Error(`Tried to create degenerate segment at [${g.x}, ${g.y}]`);let me=new ao(M,!0),Ce=new ao($,!1);return new Zm(me,Ce,[x],[J])}replaceRightSE(g){this.rightSE=g,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let g=this.leftSE.point.y,_=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:g.isLessThan(_)?g:_},ur:{x:this.rightSE.point.x,y:g.isGreaterThan(_)?g:_}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(g){return g.x.eq(this.leftSE.point.x)&&g.y.eq(this.leftSE.point.y)||g.x.eq(this.rightSE.point.x)&&g.y.eq(this.rightSE.point.y)}comparePoint(g){return ki.orient(this.leftSE.point,g,this.rightSE.point)}getIntersection(g){let _=this.bbox(),x=g.bbox(),M=nh(_,x);if(M===null)return null;let $=this.leftSE.point,J=this.rightSE.point,ne=g.leftSE.point,me=g.rightSE.point,Ce=oo(_,ne)&&this.comparePoint(ne)===0,Ye=oo(x,$)&&g.comparePoint($)===0,Ve=oo(_,me)&&this.comparePoint(me)===0,mt=oo(x,J)&&g.comparePoint(J)===0;if(Ye&&Ce)return mt&&!Ve?J:!mt&&Ve?me:null;if(Ye)return Ve&&$.x.eq(me.x)&&$.y.eq(me.y)?null:$;if(Ce)return mt&&J.x.eq(ne.x)&&J.y.eq(ne.y)?null:ne;if(mt&&Ve)return null;if(mt)return J;if(Ve)return me;let Mt=Oe($,this.vector(),ne,g.vector());return Mt===null||!oo(M,Mt)?null:ki.snap(Mt)}split(g){let _=[],x=g.events!==void 0,M=new ao(g,!0),$=new ao(g,!1),J=this.rightSE;this.replaceRightSE($),_.push($),_.push(M);let ne=new Zm(M,J,this.rings.slice(),this.windings.slice());return ao.comparePoints(ne.leftSE.point,ne.rightSE.point)>0&&ne.swapEvents(),ao.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),x&&(M.checkForConsuming(),$.checkForConsuming()),_}swapEvents(){let g=this.rightSE;this.rightSE=this.leftSE,this.leftSE=g,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let _=0,x=this.windings.length;_<x;_++)this.windings[_]*=-1}consume(g){let _=this,x=g;for(;_.consumedBy;)_=_.consumedBy;for(;x.consumedBy;)x=x.consumedBy;let M=Zm.compare(_,x);if(M!==0){if(M>0){let $=_;_=x,x=$}if(_.prev===x){let $=_;_=x,x=$}for(let $=0,J=x.rings.length;$<J;$++){let ne=x.rings[$],me=x.windings[$],Ce=_.rings.indexOf(ne);Ce===-1?(_.rings.push(ne),_.windings.push(me)):_.windings[Ce]+=me}x.rings=null,x.windings=null,x.consumedBy=_,x.leftSE.consumedBy=_.leftSE,x.rightSE.consumedBy=_.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let g=this.prev.consumedBy||this.prev;this._beforeState=g.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let g=this.beforeState();this._afterState={rings:g.rings.slice(0),windings:g.windings.slice(0),multiPolys:[]};let _=this._afterState.rings,x=this._afterState.windings,M=this._afterState.multiPolys;for(let ne=0,me=this.rings.length;ne<me;ne++){let Ce=this.rings[ne],Ye=this.windings[ne],Ve=_.indexOf(Ce);Ve===-1?(_.push(Ce),x.push(Ye)):x[Ve]+=Ye}let $=[],J=[];for(let ne=0,me=_.length;ne<me;ne++){if(x[ne]===0)continue;let Ce=_[ne],Ye=Ce.poly;if(J.indexOf(Ye)===-1)if(Ce.isExterior)$.push(Ye);else{J.indexOf(Ye)===-1&&J.push(Ye);let Ve=$.indexOf(Ce.poly);Ve!==-1&&$.splice(Ve,1)}}for(let ne=0,me=$.length;ne<me;ne++){let Ce=$[ne].multiPoly;M.indexOf(Ce)===-1&&M.push(Ce)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let g=this.beforeState().multiPolys,_=this.afterState().multiPolys;switch(Fh.type){case"union":{let x=g.length===0,M=_.length===0;this._isInResult=x!==M;break}case"intersection":{let x,M;g.length<_.length?(x=g.length,M=_.length):(x=_.length,M=g.length),this._isInResult=M===Fh.numMultiPolys&&x<M;break}case"xor":{let x=Math.abs(g.length-_.length);this._isInResult=x%2===1;break}case"difference":{let x=M=>M.length===1&&M[0].isSubject;this._isInResult=x(g)!==x(_);break}}return this._isInResult}},kr=class{constructor(h,g,_){Ke(this,"poly");Ke(this,"isExterior");Ke(this,"segments");Ke(this,"bbox");if(!Array.isArray(h)||h.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=g,this.isExterior=_,this.segments=[],typeof h[0][0]!="number"||typeof h[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let x=ki.snap({x:new Se(h[0][0]),y:new Se(h[0][1])});this.bbox={ll:{x:x.x,y:x.y},ur:{x:x.x,y:x.y}};let M=x;for(let $=1,J=h.length;$<J;$++){if(typeof h[$][0]!="number"||typeof h[$][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let ne=ki.snap({x:new Se(h[$][0]),y:new Se(h[$][1])});ne.x.eq(M.x)&&ne.y.eq(M.y)||(this.segments.push(ys.fromRing(M,ne,this)),ne.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=ne.x),ne.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=ne.y),ne.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=ne.x),ne.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=ne.y),M=ne)}(!x.x.eq(M.x)||!x.y.eq(M.y))&&this.segments.push(ys.fromRing(M,x,this))}getSweepEvents(){let h=[];for(let g=0,_=this.segments.length;g<_;g++){let x=this.segments[g];h.push(x.leftSE),h.push(x.rightSE)}return h}},Bh=class{constructor(h,g){Ke(this,"multiPoly");Ke(this,"exteriorRing");Ke(this,"interiorRings");Ke(this,"bbox");if(!Array.isArray(h))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new kr(h[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let _=1,x=h.length;_<x;_++){let M=new kr(h[_],this,!1);M.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=M.bbox.ll.x),M.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=M.bbox.ll.y),M.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=M.bbox.ur.x),M.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=M.bbox.ur.y),this.interiorRings.push(M)}this.multiPoly=g}getSweepEvents(){let h=this.exteriorRing.getSweepEvents();for(let g=0,_=this.interiorRings.length;g<_;g++){let x=this.interiorRings[g].getSweepEvents();for(let M=0,$=x.length;M<$;M++)h.push(x[M])}return h}},_d=class{constructor(h,g){Ke(this,"isSubject");Ke(this,"polys");Ke(this,"bbox");if(!Array.isArray(h))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof h[0][0][0]=="number"&&(h=[h])}catch{}this.polys=[],this.bbox={ll:{x:new Se(Number.POSITIVE_INFINITY),y:new Se(Number.POSITIVE_INFINITY)},ur:{x:new Se(Number.NEGATIVE_INFINITY),y:new Se(Number.NEGATIVE_INFINITY)}};for(let _=0,x=h.length;_<x;_++){let M=new Bh(h[_],this);M.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=M.bbox.ll.x),M.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=M.bbox.ll.y),M.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=M.bbox.ur.x),M.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=M.bbox.ur.y),this.polys.push(M)}this.isSubject=g}getSweepEvents(){let h=[];for(let g=0,_=this.polys.length;g<_;g++){let x=this.polys[g].getSweepEvents();for(let M=0,$=x.length;M<$;M++)h.push(x[M])}return h}},Rh=class ab{constructor(g){Ke(this,"events");Ke(this,"poly");Ke(this,"_isExteriorRing");Ke(this,"_enclosingRing");this.events=g;for(let _=0,x=g.length;_<x;_++)g[_].segment.ringOut=this;this.poly=null}static factory(g){let _=[];for(let x=0,M=g.length;x<M;x++){let $=g[x];if(!$.isInResult()||$.ringOut)continue;let J=null,ne=$.leftSE,me=$.rightSE,Ce=[ne],Ye=ne.point,Ve=[];for(;J=ne,ne=me,Ce.push(ne),ne.point!==Ye;)for(;;){let mt=ne.getAvailableLinkedEvents();if(mt.length===0){let fn=Ce[0].point,wn=Ce[Ce.length-1].point;throw new Error(`Unable to complete output ring starting at [${fn.x}, ${fn.y}]. Last matching segment found ends at [${wn.x}, ${wn.y}].`)}if(mt.length===1){me=mt[0].otherSE;break}let Mt=null;for(let fn=0,wn=Ve.length;fn<wn;fn++)if(Ve[fn].point===ne.point){Mt=fn;break}if(Mt!==null){let fn=Ve.splice(Mt)[0],wn=Ce.splice(fn.index);wn.unshift(wn[0].otherSE),_.push(new ab(wn.reverse()));continue}Ve.push({index:Ce.length,point:ne.point});let Kt=ne.getLeftmostComparator(J);me=mt.sort(Kt)[0].otherSE;break}_.push(new ab(Ce))}return _}getGeom(){let g=this.events[0].point,_=[g];for(let Ce=1,Ye=this.events.length-1;Ce<Ye;Ce++){let Ve=this.events[Ce].point,mt=this.events[Ce+1].point;ki.orient(Ve,g,mt)!==0&&(_.push(Ve),g=Ve)}if(_.length===1)return null;let x=_[0],M=_[1];ki.orient(x,g,M)===0&&_.shift(),_.push(_[0]);let $=this.isExteriorRing()?1:-1,J=this.isExteriorRing()?0:_.length-1,ne=this.isExteriorRing()?_.length:-1,me=[];for(let Ce=J;Ce!=ne;Ce+=$)me.push([_[Ce].x.toNumber(),_[Ce].y.toNumber()]);return me}isExteriorRing(){if(this._isExteriorRing===void 0){let g=this.enclosingRing();this._isExteriorRing=g?!g.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var M,$;let g=this.events[0];for(let J=1,ne=this.events.length;J<ne;J++){let me=this.events[J];ao.compare(g,me)>0&&(g=me)}let _=g.segment.prevInResult(),x=_?_.prevInResult():null;for(;;){if(!_)return null;if(!x)return _.ringOut;if(x.ringOut!==_.ringOut)return((M=x.ringOut)==null?void 0:M.enclosingRing())!==_.ringOut?_.ringOut:($=_.ringOut)==null?void 0:$.enclosingRing();_=x.prevInResult(),x=_?_.prevInResult():null}}},el=class{constructor(h){Ke(this,"exteriorRing");Ke(this,"interiorRings");this.exteriorRing=h,h.poly=this,this.interiorRings=[]}addInterior(h){this.interiorRings.push(h),h.poly=this}getGeom(){let h=this.exteriorRing.getGeom();if(h===null)return null;let g=[h];for(let _=0,x=this.interiorRings.length;_<x;_++){let M=this.interiorRings[_].getGeom();M!==null&&g.push(M)}return g}},rh=class{constructor(h){Ke(this,"rings");Ke(this,"polys");this.rings=h,this.polys=this._composePolys(h)}getGeom(){let h=[];for(let g=0,_=this.polys.length;g<_;g++){let x=this.polys[g].getGeom();x!==null&&h.push(x)}return h}_composePolys(h){var _;let g=[];for(let x=0,M=h.length;x<M;x++){let $=h[x];if(!$.poly)if($.isExteriorRing())g.push(new el($));else{let J=$.enclosingRing();J!=null&&J.poly||g.push(new el(J)),(_=J==null?void 0:J.poly)==null||_.addInterior($)}}return g}},Pf=class{constructor(h,g=ys.compare){Ke(this,"queue");Ke(this,"tree");Ke(this,"segments");this.queue=h,this.tree=new nn(g),this.segments=[]}process(h){let g=h.segment,_=[];if(h.consumedBy)return h.isLeft?this.queue.delete(h.otherSE):this.tree.delete(g),_;h.isLeft&&this.tree.add(g);let x=g,M=g;do x=this.tree.lastBefore(x);while(x!=null&&x.consumedBy!=null);do M=this.tree.firstAfter(M);while(M!=null&&M.consumedBy!=null);if(h.isLeft){let $=null;if(x){let ne=x.getIntersection(g);if(ne!==null&&(g.isAnEndpoint(ne)||($=ne),!x.isAnEndpoint(ne))){let me=this._splitSafely(x,ne);for(let Ce=0,Ye=me.length;Ce<Ye;Ce++)_.push(me[Ce])}}let J=null;if(M){let ne=M.getIntersection(g);if(ne!==null&&(g.isAnEndpoint(ne)||(J=ne),!M.isAnEndpoint(ne))){let me=this._splitSafely(M,ne);for(let Ce=0,Ye=me.length;Ce<Ye;Ce++)_.push(me[Ce])}}if($!==null||J!==null){let ne=null;$===null?ne=J:J===null?ne=$:ne=ao.comparePoints($,J)<=0?$:J,this.queue.delete(g.rightSE),_.push(g.rightSE);let me=g.split(ne);for(let Ce=0,Ye=me.length;Ce<Ye;Ce++)_.push(me[Ce])}_.length>0?(this.tree.delete(g),_.push(h)):(this.segments.push(g),g.prev=x)}else{if(x&&M){let $=x.getIntersection(M);if($!==null){if(!x.isAnEndpoint($)){let J=this._splitSafely(x,$);for(let ne=0,me=J.length;ne<me;ne++)_.push(J[ne])}if(!M.isAnEndpoint($)){let J=this._splitSafely(M,$);for(let ne=0,me=J.length;ne<me;ne++)_.push(J[ne])}}}this.tree.delete(g)}return _}_splitSafely(h,g){this.tree.delete(h);let _=h.rightSE;this.queue.delete(_);let x=h.split(g);return x.push(_),h.consumedBy===void 0&&this.tree.add(h),x}},Op=class{constructor(){Ke(this,"type");Ke(this,"numMultiPolys")}run(h,g,_){Pc.type=h;let x=[new _d(g,!0)];for(let me=0,Ce=_.length;me<Ce;me++)x.push(new _d(_[me],!1));if(Pc.numMultiPolys=x.length,Pc.type==="difference"){let me=x[0],Ce=1;for(;Ce<x.length;)nh(x[Ce].bbox,me.bbox)!==null?Ce++:x.splice(Ce,1)}if(Pc.type==="intersection")for(let me=0,Ce=x.length;me<Ce;me++){let Ye=x[me];for(let Ve=me+1,mt=x.length;Ve<mt;Ve++)if(nh(Ye.bbox,x[Ve].bbox)===null)return[]}let M=new nn(ao.compare);for(let me=0,Ce=x.length;me<Ce;me++){let Ye=x[me].getSweepEvents();for(let Ve=0,mt=Ye.length;Ve<mt;Ve++)M.add(Ye[Ve])}let $=new Pf(M),J=null;for(M.size!=0&&(J=M.first(),M.delete(J));J;){let me=$.process(J);for(let Ce=0,Ye=me.length;Ce<Ye;Ce++){let Ve=me[Ce];Ve.consumedBy===void 0&&M.add(Ve)}M.size!=0?(J=M.first(),M.delete(J)):J=null}ki.reset();let ne=Rh.factory($.segments);return new rh(ne).getGeom()}},Pc=new Op,Fh=Pc,ru=(h,...g)=>Fh.run("intersection",h,g),Dp=(h,...g)=>Fh.run("difference",h,g);ki.set;function jh(h){let g={type:"Feature"};return g.geometry=h,g}function zh(h){return h.type==="Feature"?h.geometry:h}function wd(h){return h&&h.geometry&&h.geometry.coordinates?h.geometry.coordinates:h}function xd(h){return jh({type:"LineString",coordinates:h})}function Ea(h){return jh({type:"MultiLineString",coordinates:h})}function Ld(h){return jh({type:"Polygon",coordinates:h})}function Cd(h){return jh({type:"MultiPolygon",coordinates:h})}function Sd(h,g){let _=zh(h),x=zh(g),M=ru(_.coordinates,x.coordinates);return M.length===0?null:M.length===1?Ld(M[0]):Cd(M)}function w(h,g){let _=zh(h),x=zh(g),M=Dp(_.coordinates,x.coordinates);return M.length===0?null:M.length===1?Ld(M[0]):Cd(M)}function A(h){return Array.isArray(h)?1+A(h[0]):-1}function G(h){h instanceof L.Polyline&&(h=h.toGeoJSON(15));let g=wd(h),_=A(g),x=[];return _>1?g.forEach(M=>{x.push(xd(M))}):x.push(h),x}function se(h){let g=[];return h.eachLayer(_=>{g.push(wd(_.toGeoJSON(15)))}),Ea(g)}$i.Cut=$i.Polygon.extend({initialize(h){this._map=h,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let h=this._layer.getLatLngs();if(h.length<=2)return;let g=L.polygon(h,this.options.pathOptions);g._latlngInfos=this._layer._latlngInfo,this.cut(g),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:x,originalLayer:M})=>{this._fireCut(M,x,M),this._fireCut(this._map,x,M),M.pm._fireEdit()}),this._editedLayers=[];let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},cut(h){let g=this._map._layers,_=h._latlngInfos||[];Object.keys(g).map(x=>g[x]).filter(x=>x.pm).filter(x=>!x._pmTempLayer).filter(x=>!L.PM.optIn&&!x.options.pmIgnore||L.PM.optIn&&x.options.pmIgnore===!1).filter(x=>x instanceof L.Polyline).filter(x=>x!==h).filter(x=>x.pm.options.allowCutting).filter(x=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(x)>-1:!0).filter(x=>!this._layerGroup.hasLayer(x)).filter(x=>{try{let M=!!ro(h.toGeoJSON(15),x.toGeoJSON(15)).features.length>0;return M||x instanceof L.Polyline&&!(x instanceof L.Polygon)?M:!!Sd(h.toGeoJSON(15),x.toGeoJSON(15))}catch{return x instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(x=>{let M;if(x instanceof L.Polygon){M=L.polygon(x.getLatLngs());let me=M.getLatLngs();_.forEach(Ce=>{if(Ce&&Ce.snapInfo){let{latlng:Ye}=Ce,Ve=this._calcClosestLayer(Ye,[M]);if(Ve&&Ve.segment&&Ve.distance<this.options.snapDistance){let{segment:mt}=Ve;if(mt&&mt.length===2){let{indexPath:Mt,parentPath:Kt,newIndex:fn}=L.PM.Utils._getIndexFromSegment(me,mt);(Mt.length>1?(0,vi.default)(me,Kt):me).splice(fn,0,Ye)}}}})}else M=x;let $=this._cutLayer(h,M),J=L.geoJSON($,x.options);J.getLayers().length===1&&([J]=J.getLayers()),this._setPane(J,"layerPane");let ne=J.addTo(this._map.pm._getContainingLayer());if(ne.pm.enable(x.pm.options),ne.pm.disable(),x._pmTempLayer=!0,h._pmTempLayer=!0,x.remove(),x.removeFrom(this._map.pm._getContainingLayer()),h.remove(),h.removeFrom(this._map.pm._getContainingLayer()),ne.getLayers&&ne.getLayers().length===0&&this._map.pm.removeLayer({target:ne}),ne instanceof L.LayerGroup?(ne.eachLayer(me=>{this._addDrawnLayerProp(me)}),this._addDrawnLayerProp(ne)):this._addDrawnLayerProp(ne),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let me=this.options.layersToCut.indexOf(x);me>-1&&this.options.layersToCut.splice(me,1)}this._editedLayers.push({layer:ne,originalLayer:x})})},_cutLayer(h,g){let _=L.geoJSON(),x;if(g instanceof L.Polygon)x=w(g.toGeoJSON(15),h.toGeoJSON(15));else{let M=G(g);M.forEach($=>{let J=Un($,h.toGeoJSON(15)),ne;J&&J.features.length>0?ne=L.geoJSON(J):ne=L.geoJSON($),ne.getLayers().forEach(me=>{ia(h.toGeoJSON(15),me.toGeoJSON(15))||me.addTo(_)})}),M.length>1?x=se(_):x=_.toGeoJSON(15)}return x},_change:L.Util.falseFn}),$i.Text=$i.extend({initialize(h){this._map=h,this._shape="Text",this.toolbarButtonName="drawText"},enable(h){L.Util.setOptions(this,h),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(er("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var h;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(h=this._hintMarker)==null||h.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let g=h;g.target=this._hintMarker,this._handleSnapping(g)}},_createMarker(h){var M,$,J,ne;if(!h.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(M=this.options.textOptions)==null?void 0:M.className){let me=this.options.textOptions.className.split(" ");this.textArea.classList.add(...me)}let _=this._createTextIcon(this.textArea),x=new L.Marker(g,{textMarker:!0,_textMarkerOverPM:!0,icon:_});if(this._setPane(x,"markerPane"),this._finishLayer(x),x.pm||(x.options.draggable=!1),x.addTo(this._map.pm._getContainingLayer()),x.pm){x.pm.textArea=this.textArea,L.setOptions(x.pm,{removeIfEmpty:(($=this.options.textOptions)==null?void 0:$.removeIfEmpty)??!0});let me=((J=this.options.textOptions)==null?void 0:J.focusAfterDraw)??!0;x.pm._createTextMarker(me),(ne=this.options.textOptions)!=null&&ne.text&&x.pm.setText(this.options.textOptions.text)}this._fireCreate(x),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(h){this.enable(),this._hintMarker.setLatLng(h.latlng)},_createTextArea(){let h=document.createElement("textarea");return h.readOnly=!0,h.classList.add("pm-textarea","pm-disabled"),h},_createTextIcon(h){return L.divIcon({className:"pm-text-marker",html:h})}});var xe={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,ti(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let h=this._getDOMElem();h&&(ti(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(h)):L.DomEvent.on(h,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,ti(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let h=this._getDOMElem();h&&(ti(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(h)):L.DomEvent.off(h,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(h){let g=h.touches?h.touches[0]:h,_={originalEvent:g,target:this._layer};return _.containerPoint=this._map.mouseEventToContainerPoint(g),_.latlng=this._map.containerPointToLatLng(_.containerPoint),this._dragMixinOnMouseDown(_),!1},_simulateMouseMoveEvent(h){let g=h.touches?h.touches[0]:h,_={originalEvent:g,target:this._layer};return _.containerPoint=this._map.mouseEventToContainerPoint(g),_.latlng=this._map.containerPointToLatLng(_.containerPoint),this._dragMixinOnMouseMove(_),!1},_simulateMouseUpEvent(h){let g={originalEvent:h.touches?h.touches[0]:h,target:this._layer};return h.type.indexOf("touch")===-1&&(g.containerPoint=this._map.mouseEventToContainerPoint(h),g.latlng=this._map.containerPointToLatLng(g.containerPoint)),this._dragMixinOnMouseUp(g),!1},_dragMixinOnMouseDown(h){if(h.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(h);let g=h._fromLayerSync,_=this._syncLayers("_dragMixinOnMouseDown",h);if(this._layer instanceof L.Marker&&(this.options.snappable&&!g&&!_?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let x="resizeableCircleMarker";this._layer instanceof L.Circle&&(x="resizeableCircle"),this.options.snappable&&!g&&!_?this._layer.pm.options[x]||this._initSnappableMarkersDrag():this._layer.pm.options[x]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=h.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(h){this._overwriteEventIfItComesFromMarker(h);let g=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",h),this._dragging||(this._dragging=!0,L.DomUtil.addClass(g,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=h.latlng),this._onLayerDrag(h),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(h){let g=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",h),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,g&&L.DomUtil.removeClass(g,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(h){let{latlng:g}=h,_={lat:g.lat-this._tempDragCoord.lat,lng:g.lng-this._tempDragCoord.lng},x=M=>M.map($=>{if(Array.isArray($))return x($);let J={lat:$.lat+_.lat,lng:$.lng+_.lng};return($.alt||$.alt===0)&&(J.alt=$.alt),J});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let M=x([this._layer.getLatLng()]);this._layer.setLatLng(M[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let M=this._layer.getLatLng();this._layer._snapped&&(M=this._layer._orgLatLng);let $=x([M]);this._layer.setLatLng($[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let M=x([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(M),this._fireChange(this._layer.getBounds(),"Edit")}else{let M=x(this._layer.getLatLngs());this._layer.setLatLngs(M),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=g,h.layer=this._layer,this._fireDrag(h)},addDraggingClass(){let h=this._getDOMElem();h&&L.DomUtil.addClass(h,"leaflet-pm-draggable")},removeDraggingClass(){let h=this._getDOMElem();h&&L.DomUtil.removeClass(h,"leaflet-pm-draggable")},_getDOMElem(){let h=null;return this._layer._path?h=this._layer._path:this._layer._renderer&&this._layer._renderer._container?h=this._layer._renderer._container:this._layer._image?h=this._layer._image:this._layer._icon&&(h=this._layer._icon),h},_overwriteEventIfItComesFromMarker(h){h.target.getLatLng&&(!h.target._radius||h.target._radius<=10)&&(h.containerPoint=this._map.mouseEventToContainerPoint(h.originalEvent),h.latlng=this._map.containerPointToLatLng(h.containerPoint))},_syncLayers(h,g){if(this.enabled())return!1;if(!g._fromLayerSync&&this._layer===g.target&&this.options.syncLayersOnDrag){g._fromLayerSync=!0;let _=[];if(L.Util.isArray(this.options.syncLayersOnDrag))_=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(x=>{x instanceof L.LayerGroup&&(_=_.concat(x.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let x in this._parentLayerGroup){let M=this._parentLayerGroup[x];M.pm&&(_=M.pm.getLayers(!0))}return L.Util.isArray(_)&&_.length>0&&(_=_.filter(x=>!!x.pm).filter(x=>!!x.pm.options.draggable),_.forEach(x=>{x!==this._layer&&x.pm[h]&&(x._snapped=!1,x.pm[h](g))})),_.length>0}return!1},_stopDOMImageDrag(h){return h.preventDefault(),!1}},Ee=xe,ke=l(Mo());function Te(h,g,_,x){return _.unproject(g.transform(_.project(h,x)),x)}function Be(h,g,_){let x=_.getMaxZoom();if(x===1/0&&(x=_.getZoom()),L.Util.isArray(h)){let M=[];return h.forEach($=>{M.push(Be($,g,_))}),M}return h instanceof L.LatLng?Te(h,g,_,x):null}function He(h,g){g instanceof L.Layer&&(g=g.getLatLng());let _=h.getMaxZoom();return _===1/0&&(_=h.getZoom()),h.project(g,_)}function ht(h,g){let _=h.getMaxZoom();return _===1/0&&(_=h.getZoom()),h.unproject(g,_)}var Dt={_onRotateStart(h){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=He(this._map,this._rotationOriginLatLng),this._rotationStartPoint=He(this._map,h.target.getLatLng()),this._initialRotateLatLng=Ao(this._layer),this._startAngle=this.getAngle();let g=Ao(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,g),this._fireRotationStart(this._map,g)},_onRotate(h){let g=He(this._map,h.target.getLatLng()),_=this._rotationStartPoint,x=this._rotationOriginPoint,M=Math.atan2(g.y-x.y,g.x-x.x)-Math.atan2(_.y-x.y,_.x-x.x);this._layer.setLatLngs(this._rotateLayer(M,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let $=this;function J(Ye,Ve=[],mt=-1){if(mt>-1&&Ve.push(mt),L.Util.isArray(Ye[0]))Ye.forEach((Mt,Kt)=>J(Mt,Ve.slice(),Kt));else{let Mt=Ve.length>0?(0,ke.default)($._markers,Ve):$._markers[0];Ye.forEach((Kt,fn)=>{Mt[fn].setLatLng(Kt)})}}J(this._layer.getLatLngs());let ne=Ao(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(M,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let me=M*180/Math.PI;me=me<0?me+360:me;let Ce=me+this._startAngle;this._setAngle(Ce),this._rotationLayer.pm._setAngle(Ce),this._fireRotation(this._rotationLayer,me,ne),this._fireRotation(this._map,me,ne),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let h=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let g=Ao(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Ao(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,h,g),this._fireRotationEnd(this._map,h,g),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(h,g,_,x,M){let $=He(M,_);return this._matrix=x.clone().rotate(h,$).flip(),Be(g,this._matrix,M)},_setAngle(h){h=h<0?h+360:h,this._angle=h%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let h=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),g=h.getCenter();return h.removeFrom(this._layer._map),g},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(ea(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let h={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),h),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Ao(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(h){let g=this.getAngle(),_=this._layer.getLatLngs(),x=h*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(x,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+h),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(x,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let M=this.getAngle()-g;M=M<0?M+360:M,this._startAngle=g,this._fireRotation(this._layer,M,_,this._layer),this._fireRotation(this._map||this._layer._map,M,_,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(h){let g=h-this.getAngle();this.rotateLayer(g)},getAngle(){return this._angle||0},setInitAngle(h){this._setAngle(h)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(h){this._rotationCenter=h,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(h)}},It=Dt,wt=L.Class.extend({includes:[Ee,xo,It,Xl],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(h){L.Util.setOptions(this,h)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(h,g){g==="layerPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":g==="vertexPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":g==="markerPane"&&(h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(h,g){let _=g.target,x={layer:this._layer,marker:_,event:g},M="";return h==="move"?M="moveVertexValidation":h==="add"?M="addVertexValidation":h==="remove"&&(M="removeVertexValidation"),this.options[M]&&typeof this.options[M]=="function"&&!this.options[M](x)?(h==="move"&&(_._cancelDragEventChain=_.getLatLng()),!1):(_._cancelDragEventChain=null,!0)},_vertexValidationDrag(h){return h._cancelDragEventChain?(h._latlng=h._cancelDragEventChain,h.update(),!1):!0},_vertexValidationDragEnd(h){return h._cancelDragEventChain?(h._cancelDragEventChain=null,!1):!0}}),qt=wt;qt.LayerGroup=L.Class.extend({initialize(h){this._layerGroup=h,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(x=>this._initLayer(x));let g=x=>{if(x.layer._pmTempLayer)return;this._layers=this.getLayers();let M=this._layers.filter($=>!$.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in $.pm._parentLayerGroup));M.forEach($=>{this._initLayer($)}),M.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(g,100,this),this),this._layerGroup.on("layerremove",x=>{this._removeLayerFromGroup(x.target)},this);let _=x=>{x.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(_,100,this),this)},enable(h,g=[]){g.length===0&&(this._layers=this.getLayers()),this._options=h,this._layers.forEach(_=>{_ instanceof L.LayerGroup?g.indexOf(_._leaflet_id)===-1&&(g.push(_._leaflet_id),_.pm.enable(h,g)):_.pm.enable(h)})},disable(h=[]){h.length===0&&(this._layers=this.getLayers()),this._layers.forEach(g=>{g instanceof L.LayerGroup?h.indexOf(g._leaflet_id)===-1&&(h.push(g._leaflet_id),g.pm.disable(h)):g.pm.disable()})},enabled(h=[]){return h.length===0&&(this._layers=this.getLayers()),!!this._layers.find(g=>g instanceof L.LayerGroup?h.indexOf(g._leaflet_id)===-1?(h.push(g._leaflet_id),g.pm.enabled(h)):!1:g.pm.enabled())},toggleEdit(h,g=[]){g.length===0&&(this._layers=this.getLayers()),this._options=h,this._layers.forEach(_=>{_ instanceof L.LayerGroup?g.indexOf(_._leaflet_id)===-1&&(g.push(_._leaflet_id),_.pm.toggleEdit(h,g)):_.pm.toggleEdit(h)})},_initLayer(h){let g=L.Util.stamp(this._layerGroup);h.pm._parentLayerGroup||(h.pm._parentLayerGroup={}),h.pm._parentLayerGroup[g]=this._layerGroup},_removeLayerFromGroup(h){if(h.pm&&h.pm._layerGroup){let g=L.Util.stamp(this._layerGroup);delete h.pm._layerGroup[g]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(h=>h.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var h;return this._map||((h=this._layers.find(g=>!!g._map))==null?void 0:h._map)||null},getLayers(h=!1,g=!0,_=!0,x=[]){let M=[];return h?this._layerGroup.getLayers().forEach($=>{M.push($),$ instanceof L.LayerGroup&&x.indexOf($._leaflet_id)===-1&&(x.push($._leaflet_id),M=M.concat($.pm.getLayers(!0,!0,!0,x)))}):M=this._layerGroup.getLayers(),_&&(M=M.filter($=>!($ instanceof L.LayerGroup))),g&&(M=M.filter($=>!!$.pm),M=M.filter($=>!$._pmTempLayer),M=M.filter($=>!L.PM.optIn&&!$.options.pmIgnore||L.PM.optIn&&$.options.pmIgnore===!1)),M},setOptions(h,g=[]){g.length===0&&(this._layers=this.getLayers()),this.options=h,this._layers.forEach(_=>{_.pm&&(_ instanceof L.LayerGroup?g.indexOf(_._leaflet_id)===-1&&(g.push(_._leaflet_id),_.pm.setOptions(h,g)):_.pm.setOptions(h))})}}),qt.Marker=qt.extend({_shape:"Marker",initialize(h){this._layer=h,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(h={draggable:!0}){if(L.Util.setOptions(this,h),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(h){let g=h.target;g.remove(),this._fireRemove(g),this._fireRemove(this._map,g)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)}});var zt=l(Mo()),ft={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let h=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=h.filter((g,_,x)=>x.indexOf(g)===_)},_removeFromCache(h){let g=this.markerCache.indexOf(h);g>-1&&this.markerCache.splice(g,1)},renderLimits(h){this.markerCache.forEach(g=>{h.includes(g)?this._markerGroup.addLayer(g):this._markerGroup.removeLayer(g)})},applyLimitFilters({latlng:h={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let g=[...this._filterClosestMarkers(h)];this.renderLimits(g)},_filterClosestMarkers(h){let g=[...this.markerCache],_=this.options.limitMarkersToCount;return _===-1?g:(g.sort((x,M)=>{let $=x._latlng.distanceTo(h),J=M._latlng.distanceTo(h);return $-J}),g.filter((x,M)=>_>-1?M<_:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(h){this._preventRenderMarkers=!!h}},vt=ft;qt.Line=qt.extend({includes:[vt],_shape:"Line",initialize(h){this._layer=h,this._enabled=!1},enable(h){if(L.Util.setOptions(this,h),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let h=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(h,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(h){return this.enabled()?this.disable():this.enable(h),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let h=this._map,g=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(h),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let _=x=>{if(Array.isArray(x[0]))return x.map(_,this);let M=x.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&x.map(($,J)=>{let ne=this.isPolygon()?(J+1)%x.length:J+1;return this._createMiddleMarker(M[J],M[ne])}),M};this._markers=_(g),this.filterMarkerGroup(),h.addLayer(this._markerGroup)},_createMarker(h){let g=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this.options.rotate?(g.on("dragstart",this._onRotateStart,this),g.on("drag",this._onRotate,this),g.on("dragend",this._onRotateEnd,this)):(g.on("click",this._onVertexClick,this),g.on("dragstart",this._onMarkerDragStart,this),g.on("move",this._onMarkerDrag,this),g.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||g.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(g),g},_createMiddleMarker(h,g){if(!h||!g)return!1;let _=L.PM.Utils.calcMiddleLatLng(this._map,h.getLatLng(),g.getLatLng()),x=this._createMarker(_),M=L.divIcon({className:"marker-icon marker-icon-middle"});return x.setIcon(M),x.leftM=h,x.rightM=g,h._middleMarkerNext=x,g._middleMarkerPrev=x,x.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),x.on("movestart",this._onMiddleMarkerMoveStart,this),x},_onMiddleMarkerClick(h){let g=h.target;if(!this._vertexValidation("add",h))return;let _=L.divIcon({className:"marker-icon"});g.setIcon(_),this._addMarker(g,g.leftM,g.rightM)},_onMiddleMarkerMoveStart(h){let g=h.target;if(g.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",h)){g.on("move",this._onMiddleMarkerMovePrevent,this);return}g._dragging=!0,this._addMarker(g,g.leftM,g.rightM)},_onMiddleMarkerMovePrevent(h){let g=h.target;this._vertexValidationDrag(g)},_onMiddleMarkerMoveEnd(h){let g=h.target;if(g.off("move",this._onMiddleMarkerMovePrevent,this),g.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(g))return;let _=L.divIcon({className:"marker-icon"});g.setIcon(_),setTimeout(()=>{delete g._dragging},100)},_addMarker(h,g,_){h.off("movestart",this._onMiddleMarkerMoveStart,this),h.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let x=h.getLatLng(),M=this._layer._latlngs;delete h.leftM,delete h.rightM;let{indexPath:$,index:J,parentPath:ne}=L.PM.Utils.findDeepMarkerIndex(this._markers,g),me=$.length>1?(0,zt.default)(M,ne):M,Ce=$.length>1?(0,zt.default)(this._markers,ne):this._markers;me.splice(J+1,0,x),Ce.splice(J+1,0,h),this._layer.setLatLngs(M),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(g,h),this._createMiddleMarker(h,_)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(h,L.PM.Utils.findDeepMarkerIndex(this._markers,h).indexPath,x),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return Er(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(h){let g=this._layer,_,x;if(this.options.allowSelfIntersection?_=!1:(x=Er(this._layer.toGeoJSON(15)),_=x.features.length>0),_){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return _;h?this._flashLayer():(g.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(x)}else g.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return _},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(h,g){h.forEach(_=>{Array.isArray(_)?this._updateDisabledMarkerStyle(_,g):_._icon&&(g&&!this._checkMarkerAllowedToDrag(_)?L.DomUtil.addClass(_._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(_._icon,"vertexmarker-disabled"))})},_removeMarker(h){let g=h.target;if(!this._vertexValidation("remove",h))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=Ao(this._layer,this._layer.getLatLngs()));let _=this._layer.getLatLngs(),{indexPath:x,index:M,parentPath:$}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);if(!x)return;let J=x.length>1?(0,zt.default)(_,$):_,ne=x.length>1?(0,zt.default)(this._markers,$):this._markers,me=$[$.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!me&&(J.length<=2||this.isPolygon()&&J.length<=3)){this._flashLayer();return}J.splice(M,1),this._layer.setLatLngs(_),this.isPolygon()&&J.length<=2&&J.splice(0,J.length);let Ce=!1;if(J.length<=1&&(J.splice(0,J.length),$.length>1&&x.length>1&&(_=wl(_)),this._layer.setLatLngs(_),this._initMarkers(),Ce=!0),Ui(_)||this._layer.remove(),_=wl(_),this._layer.setLatLngs(_),this._markers=wl(this._markers),!Ce&&(ne=x.length>1?(0,zt.default)(this._markers,$):this._markers,g._middleMarkerPrev&&(this._markerGroup.removeLayer(g._middleMarkerPrev),this._removeFromCache(g._middleMarkerPrev)),g._middleMarkerNext&&(this._markerGroup.removeLayer(g._middleMarkerNext),this._removeFromCache(g._middleMarkerNext)),this._markerGroup.removeLayer(g),this._removeFromCache(g),ne)){let Ye,Ve;if(this.isPolygon()?(Ye=(M+1)%ne.length,Ve=(M+(ne.length-1))%ne.length):(Ve=M-1<0?void 0:M-1,Ye=M+1>=ne.length?void 0:M+1),Ye!==Ve){let mt=ne[Ve],Mt=ne[Ye];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(mt,Mt)}ne.splice(M,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(g,x),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(h){let g=this._layer.getLatLngs(),_=h.getLatLng(),{indexPath:x,index:M,parentPath:$}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);(x.length>1?(0,zt.default)(g,$):g).splice(M,1,_),this._layer.setLatLngs(g)},_getNeighborMarkers(h){let{indexPath:g,index:_,parentPath:x}=L.PM.Utils.findDeepMarkerIndex(this._markers,h),M=g.length>1?(0,zt.default)(this._markers,x):this._markers,$=(_+1)%M.length,J=(_+(M.length-1))%M.length,ne=M[J],me=M[$];return{prevMarker:ne,nextMarker:me}},_checkMarkerAllowedToDrag(h){let{prevMarker:g,nextMarker:_}=this._getNeighborMarkers(h),x=L.polyline([g.getLatLng(),h.getLatLng()]),M=L.polyline([h.getLatLng(),_.getLatLng()]),$=ro(this._layer.toGeoJSON(15),x.toGeoJSON(15)).features.length,J=ro(this._layer.toGeoJSON(15),M.toGeoJSON(15)).features.length;return h.getLatLng()===this._markers[0][0].getLatLng()?J+=1:h.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&($+=1),!($<=2&&J<=2)},_onMarkerDragStart(h){let g=h.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",h))return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragStart(h,_),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Ao(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(g):this._markerAllowedToDrag=null},_onMarkerDrag(h){let g=h.target;if(!this._vertexValidationDrag(g))return;let{indexPath:_,index:x,parentPath:M}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);if(!_)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(g);let $=_.length>1?(0,zt.default)(this._markers,M):this._markers,J=(x+1)%$.length,ne=(x+($.length-1))%$.length,me=g.getLatLng(),Ce=$[ne].getLatLng(),Ye=$[J].getLatLng();if(g._middleMarkerNext){let Ve=L.PM.Utils.calcMiddleLatLng(this._map,me,Ye);g._middleMarkerNext.setLatLng(Ve)}if(g._middleMarkerPrev){let Ve=L.PM.Utils.calcMiddleLatLng(this._map,me,Ce);g._middleMarkerPrev.setLatLng(Ve)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(h,_),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(h){let g=h.target;if(!this._vertexValidationDragEnd(g))return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g),x=!this.options.allowSelfIntersection&&this.hasSelfIntersection();x&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(x=!1);let M=!this.options.allowSelfIntersection&&x;if(this._fireMarkerDragEnd(h,_,M),M){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(h,_);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(h){let g=h.target;if(g._dragging)return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireVertexClick(h,_)}}),qt.Polygon=qt.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(h){let{prevMarker:g,nextMarker:_}=this._getNeighborMarkers(h),x=L.polyline([g.getLatLng(),h.getLatLng()]),M=L.polyline([h.getLatLng(),_.getLatLng()]),$=ro(this._layer.toGeoJSON(15),x.toGeoJSON(15)).features.length,J=ro(this._layer.toGeoJSON(15),M.toGeoJSON(15)).features.length;return!($<=2&&J<=2)}}),qt.Rectangle=qt.Polygon.extend({_shape:"Rectangle",_initMarkers(){let h=this._map,g=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,h.addLayer(this._markerGroup),this._markers=[],this._markers[0]=g.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((_,x)=>{let M=this._cornerMarkers.find($=>$._index===x);M&&M.setLatLng(_)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(h,g){let _=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(_,"vertexPane"),_._origLatLng=h,_._index=g,_._pmTempLayer=!0,_.on("click",this._onVertexClick,this),this._markerGroup.addLayer(_),_},_addMarkerEvents(){this._markers[0].forEach(h=>{h.on("dragstart",this._onMarkerDragStart,this),h.on("drag",this._onMarkerDrag,this),h.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||h.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(h){if(!this._vertexValidation("move",h))return;let g=h.target,_=this._cornerMarkers;g._oppositeCornerLatLng=_.find(M=>M._index===(g._index+2)%4).getLatLng(),g._snapped=!1;let{indexPath:x}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragStart(h,x)},_onMarkerDrag(h){let g=h.target;if(!this._vertexValidationDrag(g)||g._index===void 0)return;this._adjustRectangleForMarkerMove(g);let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDrag(h,_),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(h){let g=h.target;if(!this._vertexValidationDragEnd(g))return;this._cornerMarkers.forEach(x=>{delete x._oppositeCornerLatLng});let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragEnd(h,_),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(h){L.extend(h._origLatLng,h._latlng);let g=L.PM.Utils._getRotatedRectangle(h.getLatLng(),h._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(g),this._adjustAllMarkers(h),this._layer.redraw()},_adjustAllMarkers(h){let g=this._layer.getLatLngs()[0];if(g&&g.length!==4&&g.length>0)g.forEach((_,x)=>{this._cornerMarkers[x].setLatLng(_)}),this._cornerMarkers.slice(g.length).forEach(_=>{_.setLatLng(g[0])});else if(!g||!g.length)console.error("The layer has no LatLngs");else{let _=g.findIndex(x=>h.getLatLng().equals(x));_>-1?(this._cornerMarkers[(h._index+1)%4].setLatLng(g[(_+1)%4]),this._cornerMarkers[(h._index+2)%4].setLatLng(g[(_+2)%4]),this._cornerMarkers[(h._index+3)%4].setLatLng(g[(_+3)%4])):this._cornerMarkers.forEach(x=>{x.setLatLng(g[x._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(ea(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let h=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(h[0],h[2],this.getAngle(),this._map||this)}}),qt.CircleMarker=qt.extend({_shape:"CircleMarker",initialize(h){this._layer=h,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(h={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,h),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let h=this._map;this._helperLayers&&(this._helperLayers.removeFrom(h),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(h);let g=this._layer.getLatLng(),_=this._layer._radius,x=this._getLatLngOnCircle(g,_);this._centerMarker=this._createCenterMarker(g),this._outerMarker=this._createOuterMarker(x),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(h,g){let _=this._map.project(h),x=L.point(_.x+g,_.y);return this._map.unproject(x)},_createHintLine(h,g){let _=h.getLatLng(),x=g.getLatLng();this._hintline=L.polyline([_,x],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(h){let g=this._createMarker(h);return this.options.draggable?(L.DomUtil.addClass(g._icon,"leaflet-pm-draggable"),g.on("move",this._moveCircle,this)):g.dragging.disable(),g},_createOuterMarker(h){let g=this._createMarker(h);return g.on("drag",this._resizeCircle,this),g},_createMarker(h){let g=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._origLatLng=h,g._pmTempLayer=!0,g.on("dragstart",this._onMarkerDragStart,this),g.on("drag",this._onMarkerDrag,this),g.on("dragend",this._onMarkerDragEnd,this),g.on("click",this._onVertexClick,this),this._helperLayers.addLayer(g),g},_moveCircle(h){if(h.target._cancelDragEventChain)return;let g=this._centerMarker.getLatLng();this._layer.setLatLng(g);let _=this._layer._radius,x=this._getLatLngOnCircle(g,_);this._outerMarker._latlng=x,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let h=this._layer.getLatLng(),g=this._layer._radius,_=this._getLatLngOnCircle(h,g);this._outerMarker.setLatLng(_),this._centerMarker.setLatLng(h),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let h=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),_=this._distanceCalculation(h,g);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(_),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let h=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng();this._hintline.setLatLngs([h,g])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(h){this._vertexValidation("move",h)&&this._fireMarkerDragStart(h)},_onMarkerDrag(h){let g=h.target;g instanceof L.Marker&&!this._vertexValidationDrag(g)||this._fireMarkerDrag(h)},_onMarkerDragEnd(h){this._extedingMarkerDragEnd();let g=h.target;this._vertexValidationDragEnd(g)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(h))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let h=this._layer._map||this._map;if(h){let g=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),h,this._layer.getLatLng()),_=L.circle(this._layer.getLatLng(),this._layer.options);_.setRadius(g);let x=h&&h.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(_,200,!x).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(_,200,!x),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let h=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),_=this._distanceCalculation(h,g);return this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?g=Jl(this._map,h,g,this._getMinDistanceInMeter(h)):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(g=Jl(this._map,h,g,this._getMaxDistanceInMeter(h))),g},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let h=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),_=this._distanceCalculation(h,g);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(h,g){return this._map.project(h).distanceTo(this._map.project(g))},_getMinDistanceInMeter(h){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,h)},_getMaxDistanceInMeter(h){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,h)},_onVertexClick(h){h.target._dragging||this._fireVertexClick(h,void 0)}}),qt.Circle=qt.CircleMarker.extend({_shape:"Circle",initialize(h){this._layer=h,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(h){L.PM.Edit.CircleMarker.prototype.enable.call(this,h||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let h=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(h,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let h=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!h).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!h),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(h,g){return this._map.distance(h,g)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(h){h.target._dragging||this._fireVertexClick(h,void 0)}}),qt.ImageOverlay=qt.extend({_shape:"ImageOverlay",initialize(h){this._layer=h,this._enabled=!1},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},enabled(){return this._enabled},enable(h={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,h),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let h=this._layer.getBounds(),g=h.getNorthWest(),_=h.getNorthEast(),x=h.getSouthEast(),M=h.getSouthWest();return[g,_,x,M]}}),qt.Text=qt.extend({_shape:"Text",initialize(h){this._layer=h,this._enabled=!1},enable(h){if(L.Util.setOptions(this,h),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let h=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),h.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let h=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,g=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${h}px`,this.textArea.style.width=`${g}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(h){h.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(h={}){let g=this._hasFocus;this._hasFocus=h.type==="focus",!g!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(h){h&&(this.textArea.value=h),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let g=this.options.className.split(" ");this.textArea.classList.add(...g)}let h=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(h),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(h=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),h===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(h){h.preventDefault()}});var Jt=function(h,g,_,x,M,$){this._matrix=[h,g,_,x,M,$]};Jt.init=()=>new L.PM.Matrix(1,0,0,1,0,0),Jt.prototype={transform(h){return this._transform(h.clone())},_transform(h){let g=this._matrix,{x:_,y:x}=h;return h.x=g[0]*_+g[1]*x+g[4],h.y=g[2]*_+g[3]*x+g[5],h},untransform(h){let g=this._matrix;return new L.Point((h.x/g[0]-g[4])/g[0],(h.y/g[2]-g[5])/g[2])},clone(){let h=this._matrix;return new L.PM.Matrix(h[0],h[1],h[2],h[3],h[4],h[5])},translate(h){if(h===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let g,_;return typeof h=="number"?(g=h,_=h):(g=h.x,_=h.y),this._add(1,0,0,1,g,_)},scale(h,g){if(h===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let _,x;return g=g||L.point(0,0),typeof h=="number"?(_=h,x=h):(_=h.x,x=h.y),this._add(_,0,0,x,g.x,g.y)._add(1,0,0,1,-g.x,-g.y)},rotate(h,g){let _=Math.cos(h),x=Math.sin(h);return g=g||new L.Point(0,0),this._add(_,x,-x,_,g.x,g.y)._add(1,0,0,1,-g.x,-g.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(h,g,_,x,M,$){let J=[[],[],[]],ne=this._matrix,me=[[ne[0],ne[2],ne[4]],[ne[1],ne[3],ne[5]],[0,0,1]],Ce=[[h,_,M],[g,x,$],[0,0,1]],Ye;h&&h instanceof L.PM.Matrix&&(ne=h._matrix,Ce=[[ne[0],ne[2],ne[4]],[ne[1],ne[3],ne[5]],[0,0,1]]);for(let Ve=0;Ve<3;Ve+=1)for(let mt=0;mt<3;mt+=1){Ye=0;for(let Mt=0;Mt<3;Mt+=1)Ye+=me[Ve][Mt]*Ce[Mt][mt];J[Ve][mt]=Ye}return this._matrix=[J[0][0],J[1][0],J[0][1],J[1][1],J[0][2],J[1][2]],this}};var an=Jt,Qt={calcMiddleLatLng(h,g,_){let x=h.project(g),M=h.project(_);return h.unproject(x._add(M)._divideBy(2))},findLayers(h){let g=[];return h.eachLayer(_=>{(_ instanceof L.Polyline||_ instanceof L.Marker||_ instanceof L.Circle||_ instanceof L.CircleMarker||_ instanceof L.ImageOverlay)&&g.push(_)}),g=g.filter(_=>!!_.pm),g=g.filter(_=>!_._pmTempLayer),g=g.filter(_=>!L.PM.optIn&&!_.options.pmIgnore||L.PM.optIn&&_.options.pmIgnore===!1),g},circleToPolygon(h,g=60,_=!0){let x=h.getLatLng(),M=h.getRadius(),$=Si(x,M,g,0,_),J=[];for(let ne=0;ne<$.length;ne+=1){let me=[$[ne].lat,$[ne].lng];J.push(me)}return L.polygon(J,h.options)},disablePopup(h){h.getPopup()&&(h._tempPopupCopy=h.getPopup(),h.unbindPopup())},enablePopup(h){h._tempPopupCopy&&(h.bindPopup(h._tempPopupCopy),delete h._tempPopupCopy)},_fireEvent(h,g,_,x=!1){h.fire(g,_,x);let{groups:M}=this.getAllParentGroups(h);M.forEach($=>{$.fire(g,_,x)})},getAllParentGroups(h){let g=[],_=[],x=M=>{for(let $ in M._eventParents)if(g.indexOf($)===-1){g.push($);let J=M._eventParents[$];_.push(J),x(J)}};return!h._pmLastGroupFetch||!h._pmLastGroupFetch.time||new Date().getTime()-h._pmLastGroupFetch.time>1e3?(x(h),h._pmLastGroupFetch={time:new Date().getTime(),groups:_,groupIds:g},{groupIds:g,groups:_}):{groups:h._pmLastGroupFetch.groups,groupIds:h._pmLastGroupFetch.groupIds}},createGeodesicPolygon:Si,getTranslation:er,findDeepCoordIndex(h,g,_=!0){let x,M=J=>(ne,me)=>{let Ce=J.concat(me);if(_){if(ne.lat&&ne.lat===g.lat&&ne.lng===g.lng)return x=Ce,!0}else if(ne.lat&&L.latLng(ne).equals(g))return x=Ce,!0;return Array.isArray(ne)&&ne.some(M(Ce))};h.some(M([]));let $={};return x&&($={indexPath:x,index:x[x.length-1],parentPath:x.slice(0,x.length-1)}),$},findDeepMarkerIndex(h,g){let _,x=$=>(J,ne)=>{let me=$.concat(ne);return J._leaflet_id===g._leaflet_id?(_=me,!0):Array.isArray(J)&&J.some(x(me))};h.some(x([]));let M={};return _&&(M={indexPath:_,index:_[_.length-1],parentPath:_.slice(0,_.length-1)}),M},_getIndexFromSegment(h,g){if(g&&g.length===2){let _=this.findDeepCoordIndex(h,g[0]),x=this.findDeepCoordIndex(h,g[1]),M=Math.max(_.index,x.index);return(_.index===0||x.index===0)&&M!==1&&(M+=1),{indexA:_,indexB:x,newIndex:M,indexPath:_.indexPath,parentPath:_.parentPath}}return null},_getRotatedRectangle(h,g,_,x){let M=He(x,h),$=He(x,g),J=_*Math.PI/180,ne=Math.cos(J),me=Math.sin(J),Ce=($.x-M.x)*ne+($.y-M.y)*me,Ye=($.y-M.y)*ne-($.x-M.x)*me,Ve=Ce*ne+M.x,mt=Ce*me+M.y,Mt=-Ye*me+M.x,Kt=Ye*ne+M.y,fn=ht(x,M),wn=ht(x,{x:Ve,y:mt}),rr=ht(x,$),qe=ht(x,{x:Mt,y:Kt});return[fn,wn,rr,qe]},pxRadiusToMeterRadius(h,g,_){let x=g.project(_),M=L.point(x.x+h,x.y);return g.distance(g.unproject(M),_)}},kn=Qt;L.PM=L.PM||{version:ql.version,Map:fs,Toolbar:xl,Draw:$i,Edit:qt,Utils:kn,Matrix:an,activeLang:"en",optIn:!1,initialize(h){this.addInitHooks(h)},setOptIn(h){this.optIn=!!h},addInitHooks(){function h(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(h);function g(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(g);function _(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(_);function x(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(x);function M(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(M);function $(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook($);function J(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(J);function ne(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(ne);function me(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(me)},reInitLayer(h){h instanceof L.LayerGroup&&h.eachLayer(g=>{this.reInitLayer(g)}),h.pm||L.PM.optIn&&h.options.pmIgnore!==!1||h.options.pmIgnore||(h instanceof L.Map?h.pm=new L.PM.Map(h):h instanceof L.Marker?h.options.textMarker?(h.pm=new L.PM.Edit.Text(h),h.pm._initTextMarker(),h.pm._createTextMarker(!1)):h.pm=new L.PM.Edit.Marker(h):h instanceof L.Circle?h.pm=new L.PM.Edit.Circle(h):h instanceof L.CircleMarker?h.pm=new L.PM.Edit.CircleMarker(h):h instanceof L.Rectangle?h.pm=new L.PM.Edit.Rectangle(h):h instanceof L.Polygon?h.pm=new L.PM.Edit.Polygon(h):h instanceof L.Polyline?h.pm=new L.PM.Edit.Line(h):h instanceof L.LayerGroup?h.pm=new L.PM.Edit.LayerGroup(h):h instanceof L.ImageOverlay&&(h.pm=new L.PM.Edit.ImageOverlay(h)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(h){let g=this._map.mouseEventToLayerPoint(h),_,x;for(let M=this._drawFirst;M;M=M.next)_=M.layer,_.options.interactive&&_._containsPoint(g)&&(!(h.type==="click"||h.type==="preclick")||!this._map._draggableMoved(_))&&(x=_);x&&(L.DomEvent.fakeStop(h),this._fireEvent([x],h))}}),L.PM.initialize()})();var u$={exports:{}};(function(t){(function(e){var n;n=pn,t.exports=e(n)})(function(e){return e.Polyline._flat=e.LineUtil.isFlat||e.Polyline._flat||function(n){return!e.Util.isArray(n[0])||typeof n[0][0]!="object"&&typeof n[0][0]<"u"},e.GeometryUtil=e.extend(e.GeometryUtil||{},{distance:function(n,r,i){return n.latLngToLayerPoint(r).distanceTo(n.latLngToLayerPoint(i))},distanceSegment:function(n,r,i,s){var o=n.latLngToLayerPoint(r),a=n.latLngToLayerPoint(i),l=n.latLngToLayerPoint(s);return e.LineUtil.pointToSegmentDistance(o,a,l)},readableDistance:function(n,r){var i=r!=="imperial",s;return i?n>1e3?s=(n/1e3).toFixed(2)+" km":s=n.toFixed(1)+" m":(n*=1.09361,n>1760?s=(n/1760).toFixed(2)+" miles":s=n.toFixed(1)+" yd"),s},belongsSegment:function(n,r,i,s){s=s===void 0?.2:s;var o=r.distanceTo(i),a=r.distanceTo(n)+n.distanceTo(i)-o;return a/o<s},length:function(n){var r=e.GeometryUtil.accumulatedLengths(n);return r.length>0?r[r.length-1]:0},accumulatedLengths:function(n){if(typeof n.getLatLngs=="function"&&(n=n.getLatLngs()),n.length===0)return[];for(var r=0,i=[0],s=0,o=n.length-1;s<o;s++)r+=n[s].distanceTo(n[s+1]),i.push(r);return i},closestOnSegment:function(n,r,i,s){var o=n.getMaxZoom();o===1/0&&(o=n.getZoom());var a=n.project(r,o),l=n.project(i,o),c=n.project(s,o),f=e.LineUtil.closestPointOnSegment(a,l,c);return n.unproject(f,o)},closestOnCircle:function(n,r){const i=n.getLatLng(),s=n.getRadius(),o=typeof s=="number"?s:s.radius,a=r.lng,l=r.lat,c=i.lng,f=i.lat,p=a-c,v=l-f,m=Math.sqrt(p*p+v*v),C=c+p/m*o,S=f+v/m*o;return new e.LatLng(S,C)},closest:function(n,r,i,s){var o,a=1/0,l=null,c,f,p,v;if(r instanceof Array)if(r[0]instanceof Array&&typeof r[0][0]!="number"){for(c=0;c<r.length;c++)v=e.GeometryUtil.closest(n,r[c],i,s),v&&v.distance<a&&(a=v.distance,l=v);return l}else if(r[0]instanceof e.LatLng||typeof r[0][0]=="number"||typeof r[0].lat=="number")r=e.polyline(r);else return l;if(!(r instanceof e.Polyline))return l;if(o=JSON.parse(JSON.stringify(r.getLatLngs().slice(0))),r instanceof e.Polygon){var m=function(N){if(e.Polyline._flat(N))N.push(N[0]);else for(var T=0;T<N.length;T++)m(N[T])};m(o)}if(e.Polyline._flat(o)){if(s){for(c=0,f=o.length;c<f;c++){var C=o[c];p=e.GeometryUtil.distance(n,i,C),p<a&&(a=p,l=C,l.distance=p)}return l}for(c=0,f=o.length;c<f-1;c++){var S=o[c],I=o[c+1];p=e.GeometryUtil.distanceSegment(n,i,S,I),p<=a&&(a=p,l=e.GeometryUtil.closestOnSegment(n,i,S,I),l.distance=p)}return l}else{for(c=0;c<o.length;c++)v=e.GeometryUtil.closest(n,o[c],i,s),v.distance<a&&(a=v.distance,l=v);return l}},closestLayer:function(n,r,i){for(var s=1/0,o=null,a=null,l=1/0,c=0,f=r.length;c<f;c++){var p=r[c];if(p instanceof e.LayerGroup){var v=e.GeometryUtil.closestLayer(n,p.getLayers(),i);v.distance<s&&(s=v.distance,o=v)}else p instanceof e.Circle?(a=this.closestOnCircle(p,i),l=e.GeometryUtil.distance(n,i,a)):typeof p.getLatLng=="function"?(a=p.getLatLng(),l=e.GeometryUtil.distance(n,i,a)):(a=e.GeometryUtil.closest(n,p,i),a&&(l=a.distance)),l<s&&(s=l,o={layer:p,latlng:a,distance:l})}return o},nClosestLayers:function(n,r,i,s){if(s=typeof s=="number"?s:r.length,s<1||r.length<1)return null;for(var o=[],a,l,c=0,f=r.length;c<f;c++){var p=r[c];if(p instanceof e.LayerGroup){var v=e.GeometryUtil.closestLayer(n,p.getLayers(),i);o.push(v)}else p instanceof e.Circle?(l=this.closestOnCircle(p,i),a=e.GeometryUtil.distance(n,i,l)):typeof p.getLatLng=="function"?(l=p.getLatLng(),a=e.GeometryUtil.distance(n,i,l)):(l=e.GeometryUtil.closest(n,p,i),l&&(a=l.distance)),o.push({layer:p,latlng:l,distance:a})}return o.sort(function(m,C){return m.distance-C.distance}),o.length>s?o.slice(0,s):o},layersWithin:function(n,r,i,s){s=typeof s=="number"?s:1/0;for(var o=[],a=null,l=0,c=0,f=r.length;c<f;c++){var p=r[c];typeof p.getLatLng=="function"?(a=p.getLatLng(),l=e.GeometryUtil.distance(n,i,a)):(a=e.GeometryUtil.closest(n,p,i),a&&(l=a.distance)),a&&l<s&&o.push({layer:p,latlng:a,distance:l})}var v=o.sort(function(m,C){return m.distance-C.distance});return v},closestLayerSnap:function(n,r,i,s,o){s=typeof s=="number"?s:1/0,o=typeof o=="boolean"?o:!0;var a=e.GeometryUtil.closestLayer(n,r,i);if(!a||a.distance>s)return null;if(o&&typeof a.layer.getLatLngs=="function"){var l=e.GeometryUtil.closest(n,a.layer,a.latlng,!0);l.distance<s&&(a.latlng=l,a.distance=e.GeometryUtil.distance(n,l,i))}return a},interpolateOnPointSegment:function(n,r,i){return e.point(n.x*(1-i)+i*r.x,n.y*(1-i)+i*r.y)},interpolateOnLine:function(n,r,i){r=r instanceof e.Polyline?r.getLatLngs():r;var s=r.length;if(s<2)return null;if(i=Math.max(Math.min(i,1),0),i===0)return{latLng:r[0]instanceof e.LatLng?r[0]:e.latLng(r[0]),predecessor:-1};if(i==1)return{latLng:r[r.length-1]instanceof e.LatLng?r[r.length-1]:e.latLng(r[r.length-1]),predecessor:r.length-2};var o=n.getMaxZoom();o===1/0&&(o=n.getZoom());for(var a=[],l=0,c=0;c<s;c++)a[c]=n.project(r[c],o),c>0&&(l+=a[c-1].distanceTo(a[c]));for(var f=l*i,p=0,v=0,c=0;v<f;c++){var m=a[c],C=a[c+1];p=v,v+=m.distanceTo(C)}if(m==null&&C==null)var m=a[0],C=a[1],c=1;var S=v-p!==0?(f-p)/(v-p):0,I=e.GeometryUtil.interpolateOnPointSegment(m,C,S);return{latLng:n.unproject(I,o),predecessor:c-1}},locateOnLine:function(n,r,i){var s=r.getLatLngs();if(i.equals(s[0]))return 0;if(i.equals(s[s.length-1]))return 1;for(var o=e.GeometryUtil.closest(n,r,i,!1),a=e.GeometryUtil.accumulatedLengths(s),l=a[a.length-1],c=0,f=!1,p=0,v=s.length-1;p<v;p++){var m=s[p],C=s[p+1];if(c=a[p],e.GeometryUtil.belongsSegment(o,m,C,.001)){c+=m.distanceTo(o),f=!0;break}}if(!f)throw"Could not interpolate "+i.toString()+" within "+r.toString();return c/l},reverse:function(n){return e.polyline(n.getLatLngs().slice(0).reverse())},extract:function(n,r,i,s){if(i>s)return e.GeometryUtil.extract(n,e.GeometryUtil.reverse(r),1-i,1-s);i=Math.max(Math.min(i,1),0),s=Math.max(Math.min(s,1),0);var o=r.getLatLngs(),a=e.GeometryUtil.interpolateOnLine(n,r,i),l=e.GeometryUtil.interpolateOnLine(n,r,s);if(i==s){var c=e.GeometryUtil.interpolateOnLine(n,r,s);return[c.latLng]}a.predecessor==-1&&(a.predecessor=0),l.predecessor==-1&&(l.predecessor=0);var f=o.slice(a.predecessor+1,l.predecessor+1);return f.unshift(a.latLng),f.push(l.latLng),f},isBefore:function(n,r){if(!r)return!1;var i=n.getLatLngs(),s=r.getLatLngs();return i[i.length-1].equals(s[0])},isAfter:function(n,r){if(!r)return!1;var i=n.getLatLngs(),s=r.getLatLngs();return i[0].equals(s[s.length-1])},startsAtExtremity:function(n,r){if(!r)return!1;var i=n.getLatLngs(),s=r.getLatLngs(),o=i[0];return o.equals(s[0])||o.equals(s[s.length-1])},computeAngle:function(n,r){return Math.atan2(r.y-n.y,r.x-n.x)*180/Math.PI},computeSlope:function(n,r){var i=(r.y-n.y)/(r.x-n.x),s=n.y-i*n.x;return{a:i,b:s}},rotatePoint:function(n,r,i,s){var o=n.getMaxZoom();o===1/0&&(o=n.getZoom());var a=i*Math.PI/180,l=n.project(r,o),c=n.project(s,o),f=Math.cos(a)*(l.x-c.x)-Math.sin(a)*(l.y-c.y)+c.x,p=Math.sin(a)*(l.x-c.x)+Math.cos(a)*(l.y-c.y)+c.y;return n.unproject(new e.Point(f,p),o)},bearing:function(n,r){var i=Math.PI/180,s=n.lat*i,o=r.lat*i,a=n.lng*i,l=r.lng*i,c=Math.sin(l-a)*Math.cos(o),f=Math.cos(s)*Math.sin(o)-Math.sin(s)*Math.cos(o)*Math.cos(l-a),p=(Math.atan2(c,f)*180/Math.PI+360)%360;return p>=180?p-360:p},destination:function(n,r,i){r=(r+360)%360;var s=Math.PI/180,o=180/Math.PI,a=e.CRS.Earth.R,l=n.lng*s,c=n.lat*s,f=r*s,p=Math.sin(c),v=Math.cos(c),m=Math.cos(i/a),C=Math.sin(i/a),S=Math.asin(p*m+v*C*Math.cos(f)),I=l+Math.atan2(Math.sin(f)*C*v,m-p*Math.sin(S));return I=I*o,I=I>180?I-360:I<-180?I+360:I,e.latLng([S*o,I])},angle:function(n,r,i){var s=n.latLngToContainerPoint(r),o=n.latLngToContainerPoint(i),a=Math.atan2(o.y-s.y,o.x-s.x)*180/Math.PI+90;return a+=a<0?360:0,a},destinationOnSegment:function(n,r,i,s){var o=e.GeometryUtil.angle(n,r,i),a=e.GeometryUtil.destination(r,o,s);return e.GeometryUtil.closestOnSegment(n,a,r,i)}}),e.GeometryUtil})})(u$);L.Map.mergeOptions({almostOver:!0,almostDistance:25,almostSamplingPeriod:50,almostOnMouseMove:!0});L.Handler.AlmostOver=L.Handler.extend({includes:L.Evented||L.Mixin.Events,initialize:function(t){this._map=t,this._layers=[],this._previous=null,this._marker=null,this._buffer=0,this.__mouseMoveSampling=function(){var e=new Date;return function(n){var r=new Date,i=r-e<this._map.options.almostSamplingPeriod;i||this._layers.length===0||(e=r,this._map.fire("mousemovesample",{latlng:n.latlng}))}}()},addHooks:function(){this._map.options.almostOnMouseMove&&(this._map.on("mousemove",this.__mouseMoveSampling,this),this._map.on("mousemovesample",this._onMouseMove,this)),this._map.on("click dblclick",this._onMouseClick,this),this._map;function t(){this._buffer=this._map.layerPointToLatLng([0,0]).lat-this._map.layerPointToLatLng([this._map.options.almostDistance,this._map.options.almostDistance]).lat}this._map.on("viewreset zoomend",t,this),this._map.whenReady(t,this)},removeHooks:function(){this._map.off("mousemovesample"),this._map.off("mousemove",this.__mouseMoveSampling,this),this._map.off("click dblclick",this._onMouseClick,this)},addLayer:function(t){typeof t.eachLayer=="function"?t.eachLayer(function(e){this.addLayer(e)},this):(typeof this.indexLayer=="function"&&this.indexLayer(t),this._layers.push(t))},removeLayer:function(t){if(typeof t.eachLayer=="function")t.eachLayer(function(n){this.removeLayer(n)},this);else{typeof this.unindexLayer=="function"&&this.unindexLayer(t);var e=this._layers.indexOf(t);0<=e&&this._layers.splice(e,1)}this._previous=null},getClosest:function(t){var e=L.GeometryUtil.closestLayerSnap,n=this._map.options.almostDistance,r=[];return typeof this.searchBuffer=="function"?r=this.searchBuffer(t,this._buffer):r=this._layers,e(this._map,r,t,n,!1)},_onMouseMove:function(t){var e=this.getClosest(t.latlng);e?(this._previous?L.stamp(this._previous.layer)!=L.stamp(e.layer)&&(this._map.fire("almost:out",{layer:this._previous.layer}),this._map.fire("almost:over",{layer:e.layer,latlng:e.latlng})):this._map.fire("almost:over",{layer:e.layer,latlng:e.latlng}),this._map.fire("almost:move",{layer:e.layer,latlng:e.latlng})):this._previous&&this._map.fire("almost:out",{layer:this._previous.layer}),this._previous=e},_onMouseClick:function(t){var e=this.getClosest(t.latlng);e&&this._map.fire("almost:"+t.type,{layer:e.layer,latlng:e.latlng})}});L.LayerIndexMixin!==void 0&&L.Handler.AlmostOver.include(L.LayerIndexMixin);L.Map.addInitHook("addHandler","almostOver",L.Handler.AlmostOver);const Tl=t=>{document.querySelectorAll(".drawing-help-message").forEach(r=>r.remove());const n=pn.DomUtil.create("div","drawing-help-message");return n.innerHTML=t,n.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(n),n},Ma=(t,e="m",n="")=>{let r,i;return e==="m"?t>=1e4?(r=(t/1e4).toFixed(2),i="ha"):(r=t.toFixed(2),i="m"):e==="m"?t>=1e3?(r=(t/1e3).toFixed(2),i="km"):(r=t.toFixed(2),i="m"):(r=t.toFixed(2),i=e),n?`${n}: ${r} ${i}`:`${r} ${i}`},c$=(t,e)=>{let n;return function(...r){window.clearTimeout(n),n=window.setTimeout(()=>t.apply(this,r),e)}},jd=(t,e)=>{let n=0;return function(...r){const i=Date.now();if(!(i-n<e))return n=i,t.apply(this,r)}};function h$(){const t=bt(null),e=bt(null),n=bt(null),r=bt(null),i=bt(""),s=bt(null),o=bt(!1);bt(null);const a=()=>{s.value=null,n.value&&n.value.clearLayers(),r.value&&r.value.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(k=>k.remove()),document.querySelectorAll(".drawing-help-message").forEach(k=>k.remove())};window.addEventListener("clearControlPoints",a),Ru(()=>{window.removeEventListener("clearControlPoints",a),t.value&&(t.value.remove(),t.value=null)});const l=(k,U)=>{const H=pn.DomUtil.create("div","measure-tooltip");if(H.innerHTML=U,H.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(H),t.value){const ue=t.value.latLngToContainerPoint(k);H.style.left=`${ue.x+10}px`,H.style.top=`${ue.y-25}px`}return H},c=jd((k,U,H)=>{if(k&&(k.innerHTML=H,t.value)){const ue=t.value.latLngToContainerPoint(U);k.style.left=`${ue.x+10}px`,k.style.top=`${ue.y-25}px`}},100),f=(k,U,H)=>{k.on("mouseover",()=>{const ue=l(k.getLatLng(),H());k.measureDiv=ue}),k.on("mousemove",ue=>{k.measureDiv&&t.value&&c(k.measureDiv,ue.latlng,H())}),k.on("mouseout",()=>{k.measureDiv&&(k.measureDiv.remove(),k.measureDiv=void 0)})};let p=[];const v=()=>{var k;p.cleanup&&p.cleanup(),n.value&&n.value.clearLayers(),p=[],(k=r.value)==null||k.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(U=>U.remove())},m=(k,U="#2563EB")=>{const H=typeof window<"u"&&window.innerWidth<768,ue=pn.circleMarker(k,{radius:H?14:6,color:U,fillColor:U,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return n.value&&n.value.addLayer(ue),ue},C=(k,U)=>{var ue,_e,Ie,ee,te,oe;const H={type:U,style:k.options||{}};try{if(k instanceof pn.Polygon)try{const ve=k.getLatLngs()[0].map(pe=>[pe.lng,pe.lat]);ve.push(ve[0]);const ye=zc([ve]);H.surface=Gh(ye),H.perimeter=bj(a0(ve),{units:"meters"})}catch(ge){console.warn("Erreur lors du calcul des proprits du polygone:",ge),H.surface=0,H.perimeter=0}else if(k instanceof pn.Polyline&&!(k instanceof pn.Polygon))try{const ge=k.getLatLngs();let ve=0;for(let ye=1;ye<ge.length;ye++)ve+=ge[ye].distanceTo(ge[ye-1]);H.length=ve}catch(ge){console.warn("Erreur lors du calcul de la longueur de la ligne:",ge),H.length=0}H.style={...H.style,color:((ue=k.options)==null?void 0:ue.color)||"#3388ff",weight:((_e=k.options)==null?void 0:_e.weight)||3,opacity:((Ie=k.options)==null?void 0:Ie.opacity)||1,fillColor:((ee=k.options)==null?void 0:ee.fillColor)||"#3388ff",fillOpacity:((te=k.options)==null?void 0:te.fillOpacity)||.2,dashArray:((oe=k.options)==null?void 0:oe.dashArray)||""}}catch(ge){console.error("Erreur lors du calcul des proprits de la forme:",ge),H.style=H.style||{color:"#3388ff",weight:3,opacity:1,fillColor:"#3388ff",fillOpacity:.2,dashArray:""}}return H},S=()=>{if(!t.value||!t.value.almostOver||!e.value)return;e.value.getLayers().filter(U=>U instanceof _s||U instanceof pn.Polyline&&!(U instanceof pn.Polygon)||U instanceof Fl||U instanceof al).forEach(U=>{var H;(H=t.value)==null||H.almostOver.addLayer(U)})},I=(k,U,H)=>{const ue={almostOnMouseMove:!0,zoomAnimation:!0,fadeAnimation:!0,markerZoomAnimation:!0},_e=pn.map(k,ue).setView(U,H);t.value=_e,pn.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:5}).addTo(_e);const Ie=new pn.FeatureGroup;return Ie.addTo(_e),e.value=Ie,_e.almostOver?_e.almostOver.options.tolerance=25:console.warn("Leaflet.AlmostOver plugin not loaded properly"),n.value=pn.featureGroup().addTo(_e),r.value=pn.featureGroup().addTo(_e),_e.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:Ie,snapLayers:[Ie,r.value],templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),_e.whenReady(()=>{t.value&&t.value.almostOver&&e.value&&setTimeout(S,100)}),_e.on("pm:drawstart",ee=>{o.value=!0,ee.shape==="Circle"&&i.value==="Semicircle"&&(_e.getContainer().style.cursor="crosshair")}),_e.on("pm:drawend",()=>{o.value=!1,_e.getContainer().style.cursor="",s.value&&Tl("Cliquez sur la forme pour afficher les points de contrle")}),_e.on("pm:create",K),Ie.on("click",ee=>{var oe,ge,ve;pn.DomEvent.stopPropagation(ee);const te=ee.layer;te.name&&!((oe=te.properties)!=null&&oe.name)?(te.properties||(te.properties={}),te.properties.name=te.name):(ge=te.properties)!=null&&ge.name&&!te.name&&(te.name=te.properties.name),(ve=r.value)==null||ve.clearLayers(),v(),s.value=te,te instanceof pn.Polygon?B(te):te instanceof _s||te instanceof pn.Polyline?O(te):te instanceof al&&q(te)}),_e.on("pm:edit",ee=>{var oe;const te=ee.layer;if(te){const ge=((oe=te.properties)==null?void 0:oe.type)||"unknown";ce(te,ge),te instanceof pn.Polygon?B(te):te instanceof _s?(te.updateProperties(),ce(te,"Line"),O(te)):te instanceof pn.Polyline?O(te):te instanceof al&&(te.updateProperties(),q(te))}}),_e.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(ee=>ee.remove()),Tl("Dplacez la forme  l'endroit souhait")}),_e.on("pm:dragend",ee=>{var oe;const te=ee.layer;if(te){const ge=((oe=te.properties)==null?void 0:oe.type)||"unknown";te instanceof _s?(te.updateProperties(),ce(te,"Line"),O(te)):ce(te,ge)}setTimeout(()=>{Tl("Cliquez sur la forme pour afficher les points de contrle")},100)}),_e.on("pm:remove",()=>{var ee;(ee=document.querySelector(".drawing-help-message"))==null||ee.remove()}),_e.on("pm:select",()=>{document.querySelectorAll(".drawing-help-message").forEach(ee=>ee.remove()),Tl("Utilisez les points de contrle pour modifier la forme")}),_e.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(ee=>ee.remove())}),_e.on("zoomstart",()=>{s.value&&(v(),s.value=null,document.querySelectorAll(".drawing-help-message").forEach(ee=>ee.remove()))}),_e.on("almost:over",function(ee){const oe=ee.layer;if(oe){if(s.value===oe)return;if(oe instanceof _s){const ge={...oe.options};oe._originalStyle=ge,oe.setStyle({weight:(ge.weight||3)+2,opacity:Math.min((ge.opacity||1)+.2,1)}),document.querySelectorAll(".drawing-help-message").forEach(ve=>ve.remove()),Tl("Cliquez pour slectionner cette ligne"),_e.getContainer()&&(_e.getContainer().style.cursor="pointer")}else if(oe instanceof Fl){const ge={...oe.options};oe._originalStyle=ge,oe.setStyle({weight:(ge.weight||3)+2,opacity:Math.min((ge.opacity||1)+.2,1),fillOpacity:Math.min((ge.fillOpacity||.2)+.1,.4)}),document.querySelectorAll(".drawing-help-message").forEach(ve=>ve.remove()),Tl("Cliquez pour slectionner ce polygone"),_e.getContainer()&&(_e.getContainer().style.cursor="pointer")}else if(oe instanceof al){const ge=oe.getElement();ge&&(ge.classList.add("geo-note-pulse"),ge.style.zIndex="1000",ge.style.visibility="visible",ge.style.display="flex",ge.style.opacity="1",ge.style.filter="drop-shadow(0 0 5px rgba(59, 130, 246, 0.7))"),document.querySelectorAll(".drawing-help-message").forEach(ve=>ve.remove()),Tl("Cliquez pour slectionner cette note"),_e.getContainer()&&(_e.getContainer().style.cursor="pointer")}}}),_e.on("almost:out",function(ee){const oe=ee.layer;if(oe){if(s.value===oe)return;if(oe instanceof _s&&oe._originalStyle)oe.setStyle(oe._originalStyle),oe._originalStyle=void 0;else if(oe instanceof Fl)oe._originalStyle&&(oe.setStyle(oe._originalStyle),oe._originalStyle=void 0);else if(oe instanceof al){const ge=oe.getElement();ge?(ge.classList.remove("geo-note-pulse"),ge.style.zIndex="",ge.style.filter="none",ge.style.opacity="1",ge.style.display="block",ge.style.visibility="visible",Array.from(ge.querySelectorAll("*")).forEach(ve=>{ve.style.visibility="visible",ve.style.display="block",ve.style.opacity="1"}),setTimeout(()=>{try{const ve=ge.getBoundingClientRect();(ve.width===0||ve.height===0)&&(console.warn("[almost:out] L'lment a une taille nulle aprs sortie, recration de l'icne"),oe.recreateIcon())}catch(ve){console.error("[almost:out] Erreur lors de la vrification de la taille:",ve),oe.recreateIcon()}},100)):(console.warn("[almost:out] lment DOM introuvable, recration de l'icne"),oe.recreateIcon())}(!s.value||s.value&&s.value!==oe)&&document.querySelectorAll(".drawing-help-message").forEach(ge=>ge.remove()),_e.getContainer()&&!document.querySelectorAll(".geo-note-pulse").length&&!document.querySelectorAll(".line-hover-effect").length&&(_e.getContainer().style.cursor="")}}),_e.on("almost:click",function(ee){var ge,ve;const oe=ee.layer;oe&&s.value===oe||(s.value&&v(),oe&&oe instanceof _s?(s.value=oe,(ge=r.value)==null||ge.clearLayers(),v(),O(oe),Tl("Utilisez les points de contrle pour modifier la ligne")):oe&&oe instanceof Fl?(s.value=oe,(ve=r.value)==null||ve.clearLayers(),v(),B(oe),Tl("Utilisez les points de contrle pour modifier le polygone")):oe&&oe instanceof al&&(s.value=oe,oe.editNote()))}),Ie.on("layeradd",function(ee){_e.almostOver&&(ee.layer instanceof _s||ee.layer instanceof pn.Polyline&&!(ee.layer instanceof pn.Polygon)||ee.layer instanceof Fl||ee.layer instanceof al)&&_e.almostOver.addLayer(ee.layer)}),Ie.on("layerremove",function(ee){_e.almostOver&&(ee.layer instanceof _s||ee.layer instanceof pn.Polyline&&!(ee.layer instanceof pn.Polygon)||ee.layer instanceof Fl||ee.layer instanceof al)&&_e.almostOver.removeLayer(ee.layer)}),_e},N=()=>{if(!(!t.value||!e.value||!e.value.getLayers().length))try{const k=e.value.getBounds();if(k.isValid()){const U={zoomAnimation:t.value.options.zoomAnimation,fadeAnimation:t.value.options.fadeAnimation,markerZoomAnimation:t.value.options.markerZoomAnimation};t.value.options.zoomAnimation=!1,t.value.options.fadeAnimation=!1,t.value.options.markerZoomAnimation=!1,t.value.fitBounds(k,{padding:[50,50],maxZoom:18,animate:!1,duration:0,noMoveStart:!0}),t.value.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{try{t.value&&(t.value.options.fadeAnimation=U.fadeAnimation),setTimeout(()=>{try{t.value&&(t.value.options.zoomAnimation=U.zoomAnimation,t.value.options.markerZoomAnimation=U.markerZoomAnimation)}catch(H){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",H)}},500)}catch(H){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",H)}},500)}}catch(k){if(console.warn("[useMapDrawing] Error adjusting view:",k),t.value)try{t.value.options.zoomAnimation=!0,t.value.options.fadeAnimation=!0,t.value.options.markerZoomAnimation=!0,t.value.invalidateSize({animate:!1,pan:!1})}catch(U){console.error("[useMapDrawing] Erreur lors de la restauration aprs chec:",U)}}},T=k=>{var H;if(!t.value)return;document.querySelectorAll(".drawing-help-message").forEach(ue=>ue.remove());try{const ue=t.value.pm;ue.globalEditModeEnabled()&&ue.disableGlobalEditMode(),ue.globalRemovalModeEnabled()&&ue.disableGlobalRemovalMode(),ue.disableDraw(),v(),(H=r.value)==null||H.clearLayers()}catch(ue){console.error("Error disabling modes:",ue)}if(window.dispatchEvent(new CustomEvent("tool:changed",{detail:{previousTool:i.value,newTool:k}})),i.value=k,!k){v(),S();return}let U=k;switch(k){case"Note":U="GeoNote";break;case"Polygon":U="Polygon";break;case"Line":U="Line";break;default:U=k}k=U,Z(),setTimeout(()=>{var ue,_e,Ie,ee,te,oe,ge;try{switch(k){case"Polygon":Tl("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(ue=t.value)==null||ue.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(_e=t.value)==null||_e.off("pm:create"),(Ie=t.value)==null||Ie.on("pm:create",ve=>{var ye,pe,fe;if(ve.shape==="Polygon"&&ve.layer){const $e=ve.layer.getLatLngs()[0];(ye=t.value)==null||ye.removeLayer(ve.layer),(pe=e.value)!=null&&pe.hasLayer(ve.layer)&&e.value.removeLayer(ve.layer);const Ne=new Fl($e,{color:"#3B82F6",weight:3,fillColor:"#3B82F6",fillOpacity:.2});e.value&&(e.value.addLayer(Ne),s.value=Ne,Ne.updateProperties()),(fe=t.value)==null||fe.pm.disableDraw(),Z()}});break;case"Line":Tl("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(ee=t.value)==null||ee.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(te=t.value)==null||te.off("pm:create"),(oe=t.value)==null||oe.on("pm:create",ve=>{var ye,pe,fe;if(ve.shape==="Line"&&ve.layer){const $e=ve.layer.getLatLngs();(ye=t.value)==null||ye.removeLayer(ve.layer),(pe=e.value)!=null&&pe.hasLayer(ve.layer)&&e.value.removeLayer(ve.layer);const Ne=new _s($e,{color:"#3B82F6",weight:3,opacity:.8});e.value&&(e.value.addLayer(Ne),s.value=Ne,Ne.updateProperties()),(fe=t.value)==null||fe.pm.disableDraw(),Z()}});break;case"GeoNote":if(Tl("Cliquez pour ajouter une note golocalise, double-cliquez pour diter"),t.value){const ve=async pe=>{if(!t.value||!e.value)return null;try{const fe=l0(),$e=new al(pe,{color:"#3B82F6",name:"Note golocalise",description:"",columnId:"1"});e.value.addLayer($e),s.value=$e,$e.updateProperties();try{const Ne=fe.currentMapId||void 0,ot=await $e.saveNote(Ne),le=$e._leaflet_id;return window.dispatchEvent(new CustomEvent("note:created",{detail:{geoNote:$e,leafletId:le,backendId:ot}})),$e.openPopup(),$e}catch(Ne){return console.error("[useMapDrawing] Erreur lors de la sauvegarde de la note:",Ne),Sh(async()=>{const{useNotificationStore:ot}=await Promise.resolve().then(()=>MB);return{useNotificationStore:ot}},void 0).then(({useNotificationStore:ot})=>{ot().error("Erreur lors de la cration de la note")}),null}}catch(fe){return console.error("[useMapDrawing] Erreur lors de la cration de la note:",fe),null}},ye=async pe=>{pn.DomEvent.stopPropagation(pe),pn.DomEvent.preventDefault(pe);const fe=await ve(pe.latlng);fe&&t.value&&(t.value.off("click",ye),e.value&&e.value.getLayers().forEach($e=>{if($e.off&&typeof $e.off=="function")try{$e.off("click")}catch(Ne){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",Ne)}}),T(""),window.dispatchEvent(new CustomEvent("geonote:select",{detail:{geoNote:fe,leafletId:fe._leaflet_id}})))};if(t.value.on("click",ye),e.value){const pe=async $e=>{pn.DomEvent.stopPropagation($e),pn.DomEvent.preventDefault($e);const Ne=await ve($e.latlng);return Ne&&t.value&&(t.value.off("click",ye),e.value&&e.value.getLayers().forEach(ot=>{if(ot.off&&typeof ot.off=="function")try{ot.off("click")}catch(le){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",le)}}),T(""),window.dispatchEvent(new CustomEvent("geonote:select",{detail:{geoNote:Ne,leafletId:Ne._leaflet_id}}))),!1};e.value.getLayers().forEach($e=>{$e.on("click",pe)});const fe=()=>{e.value&&e.value.getLayers().forEach($e=>{if($e.off&&typeof $e.off=="function")try{$e.off("click")}catch(Ne){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",Ne)}}),window.removeEventListener("tool:changed",fe)};window.addEventListener("tool:changed",fe)}}break;case"delete":Tl("Cliquez sur une forme pour la supprimer"),(ge=t.value)==null||ge.pm.enableGlobalRemovalMode();break}}catch(ve){console.error("[setDrawingTool] Erreur lors de la configuration de l'outil:",ve)}},100)},j=k=>{if(!s.value)return;const U=s.value;U.properties=U.properties||{},U.properties.style=U.properties.style||{},U.properties.style={...U.properties.style,...k};{const H={};k.fillColor&&(H.fillColor=k.fillColor),k.fillOpacity!==void 0&&(H.fillOpacity=k.fillOpacity),k.strokeColor&&(H.color=k.strokeColor),k.strokeOpacity!==void 0&&(H.opacity=k.strokeOpacity),k.strokeWidth!==void 0&&(H.weight=k.strokeWidth),k.dashArray&&(H.dashArray=k.dashArray),"setStyle"in U&&U.setStyle(H)}},W=k=>{if(!s.value){console.warn("[useMapDrawing] Cannot update properties: no shape selected");return}s.value.properties||(s.value.properties={}),s.value.properties.type,s.value.properties.category||(s.value.properties.category="forages"),s.value.properties.accessLevel||(s.value.properties.accessLevel="visitor"),s.value._dbId||(s.value._dbId=Date.now()+Math.floor(Math.random()*1e3));const U=s.value.properties.type,H=s.value.properties.category,ue="category"in k&&k.category!==H;if(Object.keys(k).forEach(Ie=>{Ie==="type"&&U||(s.value.properties[Ie]=k[Ie]),Ie==="name"&&(s.value.name=k[Ie])}),U&&(s.value.properties.type=U),H&&!ue&&(s.value.properties.category=H),s.value._dbId&&ue){const Ie=l0(),ee=Ie.elements.find(te=>te.id===s.value._dbId);if(ee){const te=ee;te.data||(te.data={}),te.data.category=s.value.properties.category,Ie.$patch({unsavedChanges:!0})}}const _e=new CustomEvent("shape:propertiesUpdated",{detail:{shape:s.value,properties:s.value.properties,categoryUpdated:ue}});window.dispatchEvent(_e)},X=k=>{s.value=null,fl(()=>{s.value=k})},ce=(k,U)=>{c$((ue,_e)=>{const Ie=C(ue,_e);ue.properties={...Ie},X(ue),ue.fire("properties:updated",{shape:ue,properties:ue.properties})},100)(k,U)},he=(k,U)=>pn.latLng((k.lat+U.lat)/2,(k.lng+U.lng)/2),O=k=>{if(!t.value||!e.value)return;v();const U=k.getLatLngs();if(!U||U.length===0){console.warn("Pas de points pour la ligne");return}let H=null;if(k instanceof _s){const ue=k.getCenter();H=m(ue,"#059669"),p.push(H),f(H,k,()=>{const _e=k.getLength()||0;return Ma(_e,"m","Longueur totale")}),H.on("mousedown",_e=>{if(!t.value)return;pn.DomEvent.stopPropagation(_e),t.value.dragging.disable();let Ie=!0;const ee=k.getLatLngs().map(ye=>pn.latLng(ye.lat,ye.lng)),te=_e.latlng;k instanceof _s&&(k.off("move:end"),k.off("vertex:moved"),k.off("latlngs:updated"),k.off("properties:updated")),p.forEach((ye,pe)=>{pe>0&&(ye.setStyle({opacity:0,fillOpacity:0}),ye.measureDiv&&(ye.measureDiv.style.display="none"))});const ge=jd(ye=>{if(!Ie)return;const pe=ye.latlng.lng-te.lng,fe=ye.latlng.lat-te.lat,$e=ee.map(Ne=>pn.latLng(Ne.lat+fe,Ne.lng+pe));pn.Polyline.prototype.setLatLngs.call(k,$e),H==null||H.setLatLng(ye.latlng)},16),ve=()=>{if(Ie=!1,!!t.value){if(t.value.off("mousemove",ge),document.removeEventListener("mouseup",ve),t.value.dragging.enable(),k instanceof _s){const ye=()=>{v(),O(k)};k.on("move:end",ye),k.on("vertex:moved",ye),k.on("latlngs:updated",ye),k.on("properties:updated",ye),k.updateProperties(),ce(k,"Line")}v(),O(k)}};t.value.on("mousemove",ge),document.addEventListener("mouseup",ve)})}if(U.forEach((ue,_e)=>{const Ie=m(ue,"#DC2626");p.push(Ie),f(Ie,k,()=>{if(k instanceof _s){const ee=k.getLength()||0,te=k.getLengthToVertex(_e);return[Ma(te,"m","Distance depuis le dbut"),Ma(ee,"m","Longueur totale")].join("<br>")}return""}),Ie.on("mousedown",ee=>{if(!t.value)return;pn.DomEvent.stopPropagation(ee),t.value.dragging.disable();let te=!0;k instanceof _s&&(k.off("move:end"),k.off("vertex:moved"),k.off("latlngs:updated"),k.off("properties:updated")),p.forEach((ve,ye)=>{ye!==_e+1&&(ve.setStyle({opacity:0,fillOpacity:0}),ve.measureDiv&&(ve.measureDiv.style.display="none"))});const oe=jd(ve=>{if(!te)return;const ye=k.getLatLngs();ye[_e]=ve.latlng,pn.Polyline.prototype.setLatLngs.call(k,ye),Ie.setLatLng(ve.latlng)},16),ge=()=>{if(te=!1,!!t.value){if(t.value.off("mousemove",oe),document.removeEventListener("mouseup",ge),t.value.dragging.enable(),k instanceof _s){const ve=()=>{v(),O(k)};k.on("move:end",ve),k.on("vertex:moved",ve),k.on("latlngs:updated",ve),k.on("properties:updated",ve),k.updateProperties(),ce(k,"Line")}v(),O(k)}};t.value.on("mousemove",oe),document.addEventListener("mouseup",ge)})}),U.length>=2)for(let ue=0;ue<U.length-1;ue++){const _e=U[ue],Ie=U[ue+1],ee=pn.latLng((_e.lat+Ie.lat)/2,(_e.lng+Ie.lng)/2),te=m(ee,"#2b6451");p.push(te),f(te,k,()=>{if(k instanceof _s){const oe=k.getSegmentLengthAt(ue),ge=k.getLength()||0,ve=k.getLengthToVertex(ue)+oe/2;return[Ma(oe,"m","Longueur du segment"),Ma(oe/2,"m","Demi-segment"),Ma(ve,"m","Distance depuis le dbut"),Ma(ge,"m","Longueur totale")].join("<br>")}return""})}if(k instanceof _s){const ue=()=>{v(),O(k)},_e=()=>{p.forEach((Ie,ee)=>{ee>0&&(Ie.setStyle({opacity:0,fillOpacity:0}),Ie.measureDiv&&(Ie.measureDiv.style.display="none"))})};k.on("move:start",_e),k.on("move:end",ue),k.on("vertex:moved",ue),k.on("latlngs:updated",ue),k.on("properties:updated",ue),p.cleanup=()=>{k.off("move:start",_e),k.off("move:end",ue),k.off("vertex:moved",ue),k.off("latlngs:updated",ue),k.off("properties:updated",ue)}}},B=k=>{if(!t.value||!e.value)return;v();const U=k.getLatLngs()[0],H=U.map(ge=>[ge.lng,ge.lat]);H.push(H[0]);const ue=zc([H]),_e=Gh(ue),Ie=U.reduce((ge,ve,ye)=>{const pe=U[(ye+1)%U.length];return ge+ve.distanceTo(pe)},0);let ee;if(typeof k.getCenter=="function")try{ee=k.getCenter()}catch(ge){console.warn("Erreur lors de la rcupration du centre du polygone via getCenter(), utilisation de la mthode alternative",ge);const ve=Ig(ue);ee=pn.latLng(ve.geometry.coordinates[1],ve.geometry.coordinates[0])}else{const ge=Ig(ue);ee=pn.latLng(ge.geometry.coordinates[1],ge.geometry.coordinates[0])}const te=m(ee,"#059669");p.push(te),f(te,k,()=>[Ma(Ie,"m","Primtre"),Ma(_e,"m","Surface")].join("<br>")),te.on("mousedown",ge=>{if(!t.value)return;pn.DomEvent.stopPropagation(ge),t.value.dragging.disable();let ve=!0;const ye=ge.latlng,pe=[...U];p.forEach((ot,le)=>{le>0&&ot.setStyle({opacity:0,fillOpacity:0})});const fe=jd(ot=>{if(!ve)return;const le=ot.latlng.lng-ye.lng,ae=ot.latlng.lat-ye.lat,de=pe.map(re=>pn.latLng(re.lat+ae,re.lng+le));pn.Polygon.prototype.setLatLngs.call(k,[de]),te.setLatLng(ot.latlng)},16),$e=ot=>{ve&&fe(ot)},Ne=()=>{if(ve=!1,!!t.value){if(t.value.off("mousemove",$e),document.removeEventListener("mouseup",Ne),t.value.dragging.enable(),k.properties){const ot=k.getLatLngs()[0],le=ot.map(de=>[de.lng,de.lat]);le.push(le[0]);const ae=zc([le]);k.properties.area=Gh(ae),k.properties.perimeter=ot.reduce((de,re,Ae)=>{const Ge=ot[(Ae+1)%ot.length];return de+re.distanceTo(Ge)},0),k.properties.surface=k.properties.area}v(),B(k),s.value=null,fl(()=>{s.value=k})}};t.value.on("mousemove",$e),document.addEventListener("mouseup",Ne)}),U.forEach((ge,ve)=>{const ye=m(ge,"#DC2626");p.push(ye),f(ye,k,()=>{const pe=U[(ve-1+U.length)%U.length],fe=U[(ve+1)%U.length],$e=ge.distanceTo(pe),Ne=ge.distanceTo(fe);return[Ma($e,"m","Distance au point prcdent"),Ma(Ne,"m","Distance au point suivant"),Ma(Ie,"m","Primtre total"),Ma(_e,"m","Surface")].join("<br>")}),ye.on("mousedown",pe=>{if(pn.DomEvent.stopPropagation(pe),!t.value)return;t.value.dragging.disable();let fe=!0;te&&(te.setStyle({opacity:0,fillOpacity:0}),te.measureDiv&&(te.measureDiv.style.display="none"));const $e=jd(le=>{if(!fe)return;U[ve]=le.latlng,pn.Polygon.prototype.setLatLngs.call(k,[U]),ye.setLatLng(le.latlng);const ae=p.slice(U.length+1),de=(ve-1+U.length)%U.length,re=ae[de];if(re){const Ge=U[de],tt=U[ve],at=pn.latLng((Ge.lat+tt.lat)/2,(Ge.lng+tt.lng)/2);re.setLatLng(at)}const Ae=ae[ve];if(Ae){const Ge=U[ve],tt=U[(ve+1)%U.length],at=pn.latLng((Ge.lat+tt.lat)/2,(Ge.lng+tt.lng)/2);Ae.setLatLng(at)}},16),Ne=le=>{fe&&$e(le)},ot=()=>{if(fe=!1,!!t.value){if(t.value.off("mousemove",Ne),document.removeEventListener("mouseup",ot),t.value.dragging.enable(),k.properties){const le=k.getLatLngs()[0].map(de=>[de.lng,de.lat]);le.push(le[0]);const ae=zc([le]);k.properties.area=Gh(ae),k.properties.perimeter=U.reduce((de,re,Ae)=>{const Ge=U[(Ae+1)%U.length];return de+re.distanceTo(Ge)},0),k.properties.surface=k.properties.area}v(),B(k),s.value=null,fl(()=>{s.value=k})}};t.value.on("mousemove",Ne),document.addEventListener("mouseup",ot)})}),(()=>{const ge=k.getLatLngs()[0];p.slice(ge.length+1).forEach(ye=>{n.value&&n.value.removeLayer(ye)}),p=p.slice(0,ge.length+1);const ve=new Array(ge.length);for(let ye=0;ye<ge.length;ye++){const pe=ge[ye],fe=ge[(ye+1)%ge.length];ve[ye]=he(pe,fe)}ve.forEach((ye,pe)=>{const fe=m(ye,"#2b6451");p.push(fe),f(fe,k,()=>{const $e=ge[pe],Ne=ge[(pe+1)%ge.length],ot=$e.distanceTo(Ne);return[Ma(ot,"m","Longueur du segment"),Ma(Ie,"m","Primtre total"),Ma(_e,"m","Surface")].join("<br>")}),fe.on("mousedown",$e=>{if(!t.value)return;pn.DomEvent.stopPropagation($e),t.value.dragging.disable();let Ne=!0;const ot=pe;te&&(te.setStyle({opacity:0,fillOpacity:0}),te.measureDiv&&(te.measureDiv.style.display="none"));const le=[...k.getLatLngs()[0]];le.splice((ot+1)%le.length,0,ye),k.setLatLngs([le]),v(),B(k);const ae=ot+1,de=1+ae,re=ae<p.length-1?p[de]:null;if(re){const Ae=tt=>{if(!Ne)return;const at=k.getLatLngs()[0];at[ae]=tt.latlng,k.setLatLngs([at]),re.setLatLng(tt.latlng);const ut=p.slice(1+at.length),gt=(ae-1+at.length)%at.length,$t=ae;if(ut[gt]){const Rt=at[gt],Gt=at[ae],ln=pn.latLng((Rt.lat+Gt.lat)/2,(Rt.lng+Gt.lng)/2);ut[gt].setLatLng(ln)}if(ut[$t]){const Rt=at[ae],Gt=at[(ae+1)%at.length],ln=pn.latLng((Rt.lat+Gt.lat)/2,(Rt.lng+Gt.lng)/2);ut[$t].setLatLng(ln)}},Ge=()=>{if(Ne=!1,!!t.value){if(t.value.off("mousemove",Ae),document.removeEventListener("mouseup",Ge),t.value.dragging.enable(),k.properties){const tt=k.getLatLngs()[0].map(ut=>[ut.lng,ut.lat]);tt.push(tt[0]);const at=zc([tt]);k.properties.area=Gh(at),k.properties.perimeter=k.getLatLngs()[0].reduce((ut,gt,$t,Rt)=>{const Gt=Rt[($t+1)%Rt.length];return ut+gt.distanceTo(Gt)},0)}v(),B(k),s.value=null,fl(()=>{s.value=k})}};t.value.on("mousemove",Ae),document.addEventListener("mouseup",Ge)}else t.value.dragging.enable(),v(),B(k)})})})()},q=k=>{if(!t.value||!e.value)return;v();const U=k.getLatLng(),H=m(U,"#059669");p.push(H),f(H,k,()=>`Position: ${U.lat.toFixed(6)}, ${U.lng.toFixed(6)}`),H.on("mousedown",ue=>{if(!t.value)return;pn.DomEvent.stopPropagation(ue),t.value.dragging.disable(),k.startMoving();let _e=!0;const ee=jd(oe=>{_e&&(H.setLatLng(oe.latlng),k.setLatLng(oe.latlng))},16),te=()=>{t.value&&(t.value.off("mousemove",ee),document.removeEventListener("mouseup",te),t.value.dragging.enable(),_e=!1,k.finishMoving(),k.updateProperties(),s.value=null,fl(()=>{s.value=k,v(),q(k)}))};t.value.on("mousemove",ee),document.addEventListener("mouseup",te)}),s.value=k},F=k=>{if(!(!t.value||!r.value)){r.value.clearLayers();try{if(k instanceof al){const U=k.getLatLng();if(U){const H=pn.circleMarker(U,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(H)}}else if(k instanceof Fl||k instanceof pn.Polygon){let U=[];if("getLatLngs"in k){const ue=k.getLatLngs();if(Array.isArray(ue)&&ue.length>0){const _e=ue[0];Array.isArray(_e)?U=_e:_e instanceof pn.LatLng&&(U=ue)}}let H=null;if(k instanceof Fl&&typeof k.getCenter=="function")H=k.getCenter();else if(U.length>0){const ue=U.map(ee=>[ee.lng,ee.lat]);ue.push(ue[0]);const _e=zc([ue]),Ie=Ig(_e);H=pn.latLng(Ie.geometry.coordinates[1],Ie.geometry.coordinates[0])}if(H){const ue=pn.circleMarker(H,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value&&r.value.addLayer(ue)}U.forEach(ue=>{if(ue){const _e=pn.circleMarker(ue,{radius:5,color:"#DC2626",fillColor:"#DC2626",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value&&r.value.addLayer(_e)}});for(let ue=0;ue<U.length;ue++){const _e=U[ue],Ie=U[(ue+1)%U.length];if(_e&&Ie){const ee=pn.latLng((_e.lat+Ie.lat)/2,(_e.lng+Ie.lng)/2),te=pn.circleMarker(ee,{radius:5,color:"#2563EB",fillColor:"#2563EB",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(te)}}}}catch(U){console.error("[generateTempControlPoints] Erreur lors de la gnration des points temporaires:",U)}}},R=k=>{const U=k.filter(Ie=>Ie?0>0:!1);if(U.length===0)return 0;const ue=U.map(Ie=>[Ie]).map((Ie,ee)=>{const te=Ie.map(pe=>{var fe;try{let $e;if(pe instanceof pn.Circle){const Ne=pe.getLatLng(),ot=pe.getRadius();$e=q9([Ne.lng,Ne.lat],ot/1e3,{units:"kilometers",steps:256});const le=Gh($e),ae=((fe=pe.properties)==null?void 0:fe.surface)||0;return $e}return null}catch($e){return console.error("[useMapDrawing] Erreur lors de la conversion en GeoJSON:",$e),null}}).filter(pe=>pe!==null);if(te.length===0)return 0;const oe=te.map(pe=>Gh(pe));let ge=0;for(let pe=0;pe<te.length;pe++)for(let fe=pe+1;fe<te.length;fe++)try{const $e=D9([te[pe],te[fe]]),Ne=pj($e);if(Ne){const ot=Gh(Ne);ge+=ot}}catch($e){console.error(`Erreur lors du calcul d'intersection entre les formes ${pe+1} et ${fe+1}:`,$e)}return oe.reduce((pe,fe)=>pe+fe,0)-ge});return Math.max(...ue)},K=k=>{var ue,_e,Ie,ee,te;const U=k.layer;(ue=e.value)==null||ue.addLayer(U);let H="unknown";if(U instanceof pn.Polygon?H="Polygon":U instanceof pn.Polyline&&!(U instanceof pn.Polygon)&&(H="Line"),U.properties=C(U,H),U.properties||(U.properties={}),U.properties.category||(U.properties.category="forages"),U.properties.accessLevel||(U.properties.accessLevel="visitor"),U._dbId=Date.now()+Math.floor(Math.random()*1e3),s.value=U,window.dispatchEvent(new CustomEvent("shape:created",{detail:{shape:U,type:H,properties:U.properties}})),U.on("mouseover",()=>{(!s.value||s.value!==U)&&F(U)}),U.on("mouseout",()=>{var oe;(!s.value||s.value!==U)&&((oe=r.value)==null||oe.clearLayers())}),U instanceof pn.Polygon){const oe=U.getLatLngs()[0],ge=new Fl([oe],{...U.options});ge.updateProperties(),(_e=e.value)==null||_e.removeLayer(U),(Ie=e.value)==null||Ie.addLayer(ge),s.value=ge,B(ge)}else if(U instanceof _s)O(U),t.value&&t.value.almostOver&&t.value.almostOver.addLayer(U);else if(U instanceof pn.Polyline&&!(U instanceof pn.Polygon)){const oe=U.getLatLngs(),ge=new _s(oe,{...U.options});ge.updateProperties(),(ee=e.value)==null||ee.removeLayer(U),(te=e.value)==null||te.addLayer(ge),s.value=ge,O(ge),t.value&&t.value.almostOver&&t.value.almostOver.addLayer(ge)}Tl("Cliquez sur la forme pour afficher les points de contrle")},Z=()=>{t.value&&(t.value.off("pm:create"),t.value.on("pm:create",K))},Y=()=>{if(t.value&&t.value.almostOver){const k=t.value.almostOver.options.tolerance;return t.value.almostOver.options.tolerance=0,()=>{t.value&&t.value.almostOver&&(t.value.almostOver.options.tolerance=k)}}return()=>{}};return window.addEventListener("edit:start",()=>{const k=Y(),U=()=>{k(),window.removeEventListener("edit:end",U)};window.addEventListener("edit:end",U)}),{map:t,featureGroup:e,controlPointsGroup:n,tempControlPointsGroup:r,currentTool:i,selectedShape:s,isDrawing:o,initMap:I,setDrawingTool:T,updateShapeStyle:j,updateShapeProperties:W,adjustView:N,clearActiveControlPoints:v,calculateTotalCoverageArea:R,addLinesToAlmostOver:S}}const Wi=Symbol("newer"),Ko=Symbol("older");class f${constructor(e,n){typeof e!="number"&&(n=e,e=0),this.size=0,this.limit=e,this.oldest=this.newest=void 0,this._keymap=new Map,n&&(this.assign(n),e<1&&(this.limit=this.size))}_markEntryAsUsed(e){e!==this.newest&&(e[Wi]&&(e===this.oldest&&(this.oldest=e[Wi]),e[Wi][Ko]=e[Ko]),e[Ko]&&(e[Ko][Wi]=e[Wi]),e[Wi]=void 0,e[Ko]=this.newest,this.newest&&(this.newest[Wi]=e),this.newest=e)}assign(e){let n,r=this.limit||Number.MAX_VALUE;this._keymap.clear();let i=e[Symbol.iterator]();for(let s=i.next();!s.done;s=i.next()){let o=new r5(s.value[0],s.value[1]);if(this._keymap.set(o.key,o),n?(n[Wi]=o,o[Ko]=n):this.oldest=o,n=o,r--==0)throw new Error("overflow")}this.newest=n,this.size=this._keymap.size}get(e){var n=this._keymap.get(e);if(n)return this._markEntryAsUsed(n),n.value}set(e,n){var r=this._keymap.get(e);return r?(r.value=n,this._markEntryAsUsed(r),this):(this._keymap.set(e,r=new r5(e,n)),this.newest?(this.newest[Wi]=r,r[Ko]=this.newest):this.oldest=r,this.newest=r,++this.size,this.size>this.limit&&this.shift(),this)}shift(){var e=this.oldest;if(e)return this.oldest[Wi]?(this.oldest=this.oldest[Wi],this.oldest[Ko]=void 0):(this.oldest=void 0,this.newest=void 0),e[Wi]=e[Ko]=void 0,this._keymap.delete(e.key),--this.size,[e.key,e.value]}find(e){let n=this._keymap.get(e);return n?n.value:void 0}has(e){return this._keymap.has(e)}delete(e){var n=this._keymap.get(e);if(n)return this._keymap.delete(n.key),n[Wi]&&n[Ko]?(n[Ko][Wi]=n[Wi],n[Wi][Ko]=n[Ko]):n[Wi]?(n[Wi][Ko]=void 0,this.oldest=n[Wi]):n[Ko]?(n[Ko][Wi]=void 0,this.newest=n[Ko]):this.oldest=this.newest=void 0,this.size--,n.value}clear(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()}keys(){return new P_(this.oldest)}values(){return new k_(this.oldest)}entries(){return this}[Symbol.iterator](){return new E_(this.oldest)}forEach(e,n){typeof n!="object"&&(n=this);let r=this.oldest;for(;r;)e.call(n,r.value,r.key,this),r=r[Wi]}toJSON(){for(var e=new Array(this.size),n=0,r=this.oldest;r;)e[n++]={key:r.key,value:r.value},r=r[Wi];return e}toString(){for(var e="",n=this.oldest;n;)e+=String(n.key)+":"+n.value,n=n[Wi],n&&(e+=" < ");return e}}function r5(t,e){this.key=t,this.value=e,this[Wi]=void 0,this[Ko]=void 0}function E_(t){this.entry=t}E_.prototype[Symbol.iterator]=function(){return this};E_.prototype.next=function(){let t=this.entry;return t?(this.entry=t[Wi],{done:!1,value:[t.key,t.value]}):{done:!0,value:void 0}};function P_(t){this.entry=t}P_.prototype[Symbol.iterator]=function(){return this};P_.prototype.next=function(){let t=this.entry;return t?(this.entry=t[Wi],{done:!1,value:t.key}):{done:!0,value:void 0}};function k_(t){this.entry=t}k_.prototype[Symbol.iterator]=function(){return this};k_.prototype.next=function(){let t=this.entry;return t?(this.entry=t[Wi],{done:!1,value:t.value}):{done:!0,value:void 0}};function d$(t,e){let n=0,r=null;r=setInterval(function(){if(n>=20)throw clearInterval(r),new Error("window.google not found after 10 seconds");window.google&&window.google.maps&&window.google.maps.Map&&(clearInterval(r),t.call(e)),++n},500)}L.GridLayer.GoogleMutant=L.GridLayer.extend({options:{maxZoom:21,type:"roadmap",maxNativeZoom:21},initialize:function(t){L.GridLayer.prototype.initialize.call(this,t),this._tileCallbacks={},this._lru=new f$(100),this._imagesPerTile=1,this._boundOnMutatedImage=this._onMutatedImage.bind(this)},onAdd:function(t){L.GridLayer.prototype.onAdd.call(this,t),this._initMutantContainer(),this._logoContainer&&t._controlCorners.bottomleft.appendChild(this._logoContainer),this._attributionContainer&&t._controlCorners.bottomright.appendChild(this._attributionContainer),d$(()=>{this._map&&(this._initMutant(),google.maps.event.addListenerOnce(this._mutant,"idle",()=>{this._map&&(this._checkZoomLevels(),this._mutantIsReady=!0)}))})},onRemove:function(t){L.GridLayer.prototype.onRemove.call(this,t),this._observer.disconnect(),t._container.removeChild(this._mutantContainer),this._logoContainer&&L.DomUtil.remove(this._logoContainer),this._attributionContainer&&L.DomUtil.remove(this._attributionContainer),this._mutant&&google.maps.event.clearListeners(this._mutant,"idle")},addGoogleLayer:function(t,e){return this._subLayers||(this._subLayers={}),this.whenReady(()=>{var n=google.maps[t],r=new n(e);r.setMap(this._mutant),this._subLayers[t]=r}),this},removeGoogleLayer:function(t){return this.whenReady(()=>{var e=this._subLayers&&this._subLayers[t];e&&(e.setMap(null),delete this._subLayers[t])}),this},_initMutantContainer:function(){this._mutantContainer||(this._mutantContainer=L.DomUtil.create("div","leaflet-google-mutant leaflet-top leaflet-left"),this._mutantContainer.id="_MutantContainer_"+L.Util.stamp(this._mutantContainer),this._mutantContainer.style.pointerEvents="none",this._mutantContainer.style.visibility="hidden",L.DomEvent.off(this._mutantContainer)),this._map.getContainer().appendChild(this._mutantContainer),this.setOpacity(this.options.opacity);const t=this._mutantContainer.style;this._map.options.zoomSnap<1?(t.width="180%",t.height="180%"):(t.width="100%",t.height="100%"),t.zIndex=-1,this._attachObserver(this._mutantContainer)},_initMutant:function(){if(!this._mutant){var t={center:{lat:0,lng:0},zoom:0,tilt:0,mapTypeId:this.options.type,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,styles:this.options.styles||[],backgroundColor:"transparent"};this.options.mapId!=null&&(t.mapId=this.options.mapId);var e=new google.maps.Map(this._mutantContainer,t);this._mutant=e,this._update(),this.fire("spawned",{mapObject:e}),this._waitControls(),this.once("controls_ready",this._setupAttribution)}},_attachObserver:function(e){this._observer||(this._observer=new MutationObserver(this._onMutations.bind(this))),this._observer.observe(e,{childList:!0,subtree:!0}),Array.prototype.forEach.call(e.querySelectorAll("img"),this._boundOnMutatedImage)},_waitControls:function(){const t=setInterval(()=>{const e=this._mutant.__gm.layoutManager;if(!e)return;clearInterval(t);let n;Object.keys(e).forEach(function(r){const i=e[r];i.get&&i.get(1)instanceof Node&&(n=i)}),this.fire("controls_ready",{positions:n})},50)},_setupAttribution:function(t){if(!this._map)return;const e=google.maps.ControlPosition,n=this._attributionContainer=t.positions.get(e.BOTTOM_RIGHT);L.DomUtil.addClass(n,"leaflet-control leaflet-control-attribution"),L.DomEvent.disableClickPropagation(n),n.style.height="14px",this._map._controlCorners.bottomright.appendChild(n),this._logoContainer=t.positions.get(e.BOTTOM_LEFT),this._logoContainer.style.pointerEvents="auto",this._map._controlCorners.bottomleft.appendChild(this._logoContainer)},_onMutations:function(e){for(var n=0;n<e.length;++n)for(var r=e[n],i=0;i<r.addedNodes.length;++i){var s=r.addedNodes[i];s instanceof HTMLImageElement?this._onMutatedImage(s):s instanceof HTMLElement&&Array.prototype.forEach.call(s.querySelectorAll("img"),this._boundOnMutatedImage)}},_roadRegexp:/!1i(\d+)!2i(\d+)!3i(\d+|VinaFnapurmBegrtn)!/,_satRegexp:/x=(\d+)&y=(\d+)&z=(\d+|VinaFnapurmBegrtn)/,_onMutatedImage:function(e){let n,r=e.src.match(this._roadRegexp),i=0;if(r?(n={z:r[1],x:r[2],y:r[3]},this._imagesPerTile>1&&(e.style.zIndex=1,i=1)):(r=e.src.match(this._satRegexp),r&&(n={x:r[1],y:r[2],z:r[3]}),i=0),n){var s=this._tileCoordsToKey(n);e.style.position="absolute";var o=s+"/"+i;this._lru.set(o,e),o in this._tileCallbacks&&this._tileCallbacks[o]&&(this._tileCallbacks[o].forEach(a=>a(e)),delete this._tileCallbacks[o])}},createTile:function(t,e){const n=this._tileCoordsToKey(t),r=L.DomUtil.create("div");r.style.textAlign="left",r.dataset.pending=this._imagesPerTile,e=e.bind(this,null,r);for(var i=0;i<this._imagesPerTile;++i){const s=n+"/"+i,o=this._lru.get(s);o?(r.appendChild(this._clone(o)),--r.dataset.pending):(this._tileCallbacks[s]=this._tileCallbacks[s]||[],this._tileCallbacks[s].push((function(a){return(function(l){a.appendChild(this._clone(l)),--a.dataset.pending,parseInt(a.dataset.pending)||e()}).bind(this)}).bind(this)(r)))}return parseInt(r.dataset.pending)||L.Util.requestAnimFrame(e),r},_clone:function(t){const e=t.cloneNode(!0);return e.style.visibility="visible",e},_checkZoomLevels:function(){const t=this._map.getZoom(),e=this._mutant.getZoom();!t||!e||(e!==t||e>this.options.maxNativeZoom)&&this._setMaxNativeZoom(e)},_setMaxNativeZoom:function(t){t!==this.options.maxNativeZoom&&(this.options.maxNativeZoom=t,this._resetView())},_update:function(t){if(this._mutant){t=t||this._map.getCenter();const e=new google.maps.LatLng(t.lat,t.lng),n=Math.round(this._map.getZoom()),r=this._mutant.getZoom();this._mutant.setCenter(e),n!==r&&(this._mutant.setZoom(n),this._mutantIsReady&&this._checkZoomLevels())}L.GridLayer.prototype._update.call(this,t)},whenReady:function(t,e){return this._mutant?t.call(e||this,{target:this}):this.on("spawned",t,e),this}});L.gridLayer.googleMutant=function(t){return new L.GridLayer.GoogleMutant(t)};let U1=!1,jf=null;function p$(){return U1?Promise.resolve():jf||(jf=new Promise(async(t,e)=>{var n;try{if(window.google&&window.google.maps){U1=!0,t();return}try{const r=await Z2.getGoogleMapsApiKey(),i=((n=r==null?void 0:r.data)==null?void 0:n.url)||"https://maps.googleapis.com/maps/api/js?libraries=places",s=document.createElement("script");s.type="text/javascript",s.src=i,s.async=!0,s.defer=!0,s.onload=()=>{U1=!0,t()},s.onerror=()=>{jf=null,e(new Error("Failed to load Google Maps API"))},document.head.appendChild(s)}catch(r){console.warn("Error loading Google Maps API:",r),jf=null,e(r)}}catch(r){jf=null,e(r)}}),jf)}function g$(){const t=bt(null),e=bt("Hybride"),n=bt(null),r=bt(!1),i={maxZoom:19,updateWhenZooming:!0,updateWhenIdle:!0,noWrap:!0,keepBuffer:2,maxNativeZoom:19,tileSize:256,zoomOffset:0,bounds:pn.latLngBounds(pn.latLng(41.333,-5.566),pn.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0,useCache:!0,priorityLevels:3},s={Hybride:pn.layerGroup([pn.gridLayer.googleMutant({type:"hybrid",maxZoom:i.maxZoom})]),Cadastre:pn.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{...i,attribution:"Cadastre - Carte  IGN/Geoportail",maxNativeZoom:18}),IGN:pn.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{...i,attribution:"Carte IGN  IGN/Geoportail",maxNativeZoom:18})},o=async()=>{try{await p$(),r.value=!0}catch(f){console.error("Failed to load Google Maps API:",f),r.value=!1,e.value==="Hybride"&&(e.value="IGN")}};return{map:t,currentBaseMap:e,baseMaps:s,initMap:async f=>{r.value||await o(),t.value=f,f.options.zoomSnap=.5,f.options.zoomDelta=.5,f.options.wheelPxPerZoomLevel=120,f.options.zoomAnimation=!0,f.options.fadeAnimation=!0,f.options.markerZoomAnimation=!0,f.options.preferCanvas=!0,f.options.renderer=pn.canvas(),f.options.minZoom=2,f.options.maxZoom=19,f.options.scrollWheelZoom=!0,f.options.doubleClickZoom=!0;const p=pn.latLngBounds(pn.latLng(-90,-180),pn.latLng(90,180));f.setMaxBounds(p),f.options.maxBoundsViscosity=1,f.options.trackResize=!0;let v=null;f.getZoom(),f.on("zoomstart",()=>{f.getZoom(),f.options.zoomAnimation=!1,f.options.markerZoomAnimation=!1}),f.on("zoomend",()=>{v&&clearTimeout(v),v=setTimeout(()=>{setTimeout(()=>{f.options.zoomAnimation=!0,f.options.markerZoomAnimation=!0,f.invalidateSize({animate:!1,pan:!1});const C=f.getBounds(),S=f.options.maxBounds;S&&!C.intersects(S)&&f.panInsideBounds(S,{animate:!1}),f.eachLayer(I=>{I.properties&&I.properties.type==="Note"&&typeof I.updatePosition=="function"&&I.updatePosition()})},250)},250)});const m=f._zoomAnimation;m&&(f._zoomAnimation=function(C){try{this._animatingZoom||m.call(this,C)}catch{console.warn("Animation de zoom interrompue, restauration de la vue..."),this._resetView(this.getCenter(),this.getZoom())}}),f.on("zoomanim",C=>{f.eachLayer(S=>{S.properties&&S.properties.type==="Note"&&typeof S.updatePositionDuringZoom=="function"&&S.updatePositionDuringZoom(C)})}),f&&(f.whenReady(()=>{const C=e.value;if(s[C]){if(n.value&&f.hasLayer(n.value))try{f.removeLayer(n.value)}catch(S){console.warn("Erreur lors de la suppression de la couche active prcdente:",S)}n.value=s[C];try{n.value.addTo(f)}catch(S){console.error(`Erreur lors de l'ajout de la couche ${C}:`,S)}}else console.warn(`Couche de base non disponible: ${C}`)}),f.on("baselayerchange",C=>{e.value=C.name,n.value=C.layer}))},changeBaseMap:async f=>{if(f==="Hybride"&&!r.value&&(await o(),!r.value)){console.warn("Cannot switch to Hybride: Google Maps API not loaded");return}if(!t.value||!s[f]){console.warn(`Impossible de changer la carte de base: ${t.value?"type de carte non disponible":"carte non initialise"}`);return}try{if(e.value===f)return;const p=t.value,v=p.getCenter(),m=p.getZoom();p.options.zoomAnimation=!1,p.options.fadeAnimation=!1,p.options.markerZoomAnimation=!1;const C=s[f];if(n.value&&p.hasLayer(n.value))try{p.removeLayer(n.value)}catch(S){console.warn("Erreur lors de la suppression de la couche active:",S)}try{C instanceof pn.LayerGroup,C.addTo(p)}catch(S){console.error("Erreur lors de l'ajout de la nouvelle couche:",S);try{p.hasLayer(C)&&p.removeLayer(C),C.addTo(p)}catch(I){throw console.error("chec de la rcupration:",I),new Error("Impossible d'ajouter la nouvelle couche")}}n.value=C,e.value=f;try{p.setView(v,m,{animate:!1,duration:0,noMoveStart:!0})}catch(S){console.warn("Erreur lors de la rinitialisation de la vue:",S)}try{p.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{p.eachLayer(S=>{S.properties&&S.properties.type==="Note"&&typeof S.updatePosition=="function"&&S.updatePosition()})},100)}catch(S){console.warn("Erreur lors du rafrachissement de la carte:",S)}setTimeout(()=>{p.options.zoomAnimation=!0,p.options.fadeAnimation=!0,p.options.markerZoomAnimation=!0},500)}catch(p){if(console.error("Erreur lors du changement de carte de base:",p),t.value)try{const v=t.value;v.eachLayer(C=>{(C instanceof pn.TileLayer||C instanceof pn.LayerGroup)&&v.removeLayer(C)});const m=s[f];m.addTo(v),n.value=m,e.value=f,v.options.zoomAnimation=!0,v.options.fadeAnimation=!0,v.options.markerZoomAnimation=!0,v.invalidateSize({animate:!1,pan:!1})}catch(v){console.error("Erreur lors de la rcupration aprs chec:",v)}}},cleanup:()=>{t.value&&(t.value.remove(),t.value=null),n.value&&(n.value=null)},isGoogleMapsLoaded:r}}const m$={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[3001] overflow-y-auto"},v$={class:"bg-white w-full h-full md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 relative overflow-y-auto"},y$={class:"p-4 md:p-6 pt-0 overflow-y-auto max-h-[calc(100vh-80px)] md:max-h-[calc(90vh-80px)]"},b$={key:0,class:"mb-4"},_$={key:0,class:"animate-pulse"},w$=["value"],x$={key:1,class:"mb-4"},L$={key:0,class:"animate-pulse"},C$=["disabled"],S$={value:null},E$=["value"],P$={key:2,class:"mb-4"},k$={key:0,class:"animate-pulse"},M$=["disabled"],A$={value:null},T$=["value"],O$={class:"mb-4"},D$={class:"mb-6"},I$={class:"flex justify-end space-x-3"},N$=["disabled"],B$={key:0},R$={key:1},bE=hs({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","salarieSelected","visiteurSelected"],setup(t,{expose:e,emit:n}){function r(K){return K?typeof K=="object"?K.id:K:null}function i(K){if(K===null)throw new Error("Invalid ID");return K}const s=t,o=n,a=eo(),l=My(),c=l0(),f=bt(!1),p=bt(null),v=bt([]),m=bt([]),C=bt([]),S=bt(null),I=bt(null),N=bt(!1),T=bt(!1),j=bt(!1),W=bt({nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),X=Hn(()=>{var K,Z,Y;return((K=a.user)==null?void 0:K.user_type)==="admin"?W.value.nom.trim()&&W.value.entreprise&&W.value.salarie:((Z=a.user)==null?void 0:Z.user_type)==="entreprise"?W.value.nom.trim()&&W.value.salarie:(((Y=a.user)==null?void 0:Y.user_type)==="salarie",W.value.nom.trim())});li(()=>W.value.entreprise,async K=>{if(!s.modelValue)return;W.value.salarie=null,W.value.visiteur=null,m.value=[];const Z=r(K);Z?await ce(Z):v.value=[]}),li(()=>W.value.salarie,async K=>{if(!s.modelValue)return;W.value.visiteur=null;const Z=r(K);Z?await he(Z):m.value=[]}),li(()=>s.modelValue,K=>{var Z,Y,k;K?((Z=a.user)==null?void 0:Z.user_type)==="admin"?F():((Y=a.user)==null?void 0:Y.user_type)==="entreprise"?ce(a.user.id):((k=a.user)==null?void 0:k.user_type)==="salarie"&&he(a.user.id):(W.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},S.value=null,I.value=null,m.value=[],v.value=[],C.value=[],p.value=null)});async function ce(K){N.value=!0;try{const Z=await da.getUsers({role:"SALARIE",entreprise:K});v.value=Z.data}catch(Z){console.error("[NewPlanModal] Error loading salaries:",Z),v.value=[]}finally{N.value=!1}}async function he(K){T.value=!0;try{const Z=await da.getUsers({role:"VISITEUR",salarie:K});m.value=Z.data}catch(Z){console.error("[NewPlanModal] Error loading visiteurs:",Z),m.value=[]}finally{T.value=!1}}async function O(K){s.modelValue&&(S.value=K,W.value.salarie=K.id,await he(K.id),o("salarieSelected",K))}function B(K){s.modelValue&&(I.value=K,W.value.visiteur=K.id,o("visiteurSelected",K))}function q(){o("update:modelValue",!1),W.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},S.value=null,I.value=null,m.value=[],p.value=null}async function F(){j.value=!0;try{const K=await a.fetchEnterprises();C.value=K}catch(K){console.error("[NewPlanModal] Error loading entreprises:",K),C.value=[]}finally{j.value=!1}}async function R(){var K,Z;p.value=null,f.value=!0;try{const Y={nom:W.value.nom.trim(),description:W.value.description.trim()},k=a.user;if(!k)throw new Error("User not found");if(k.user_type==="admin"){if(!W.value.entreprise||!W.value.salarie)throw new Error("Missing required fields");Y.entreprise=i(r(W.value.entreprise)),Y.salarie=i(r(W.value.salarie)),W.value.visiteur&&(Y.visiteur=W.value.visiteur)}else if(k.user_type==="entreprise"){if(!W.value.salarie)throw new Error("Missing required fields");Y.entreprise=k.id,Y.salarie=i(r(W.value.salarie)),W.value.visiteur&&(Y.visiteur=W.value.visiteur)}else if(k.user_type==="salarie"){if(!k.entreprise)throw new Error("Missing required fields");Y.entreprise=k.entreprise.id,Y.salarie=k.id,W.value.visiteur&&(Y.visiteur=W.value.visiteur)}else if(k.user_type==="visiteur"){if(!k.entreprise||!k.salarie)throw new Error("Missing required fields");Y.entreprise=k.entreprise.id,Y.salarie=k.salarie.id,Y.visiteur=k.id}l.clearCurrentPlan(),c.setCurrentPlan(null);const U=await l.createPlan(Y);o("created",U.id),q()}catch(Y){console.error("[NewPlanModal] Error creating plan:",Y),console.error("Response data:",(K=Y.response)==null?void 0:K.data);let k="Une erreur est survenue lors de la cration du plan";(Z=Y.response)!=null&&Z.data&&(typeof Y.response.data=="object"?k=Object.entries(Y.response.data).map(([U,H])=>Array.isArray(H)?`${U}: ${H.join(", ")}`:`${U}: ${H}`).join(`
`):typeof Y.response.data=="string"&&(k=Y.response.data)),p.value=k}finally{f.value=!1}}return e({salaries:v,visiteurs:m,selectedSalarie:S,selectedVisiteur:I,loadSalaries:ce,loadVisiteurs:he,selectSalarie:O,selectVisiteur:B}),(K,Z)=>{var Y,k,U,H;return K.modelValue?(Me(),De("div",m$,[E("div",v$,[E("div",{class:"flex justify-between items-center mb-4 sticky top-0 bg-white p-4 md:p-6 pb-4 border-b z-10"},[Z[6]||(Z[6]=E("h2",{class:"text-xl font-semibold text-gray-900"},"Crer un nouveau plan",-1)),E("button",{onClick:q,class:"text-gray-400 hover:text-gray-500"},Z[5]||(Z[5]=[E("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("div",y$,[dn(a).isAdmin?(Me(),De("div",b$,[Z[9]||(Z[9]=E("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Entreprise",-1)),j.value?(Me(),De("div",_$,Z[7]||(Z[7]=[E("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Dn((Me(),De("select",{key:1,"onUpdate:modelValue":Z[0]||(Z[0]=ue=>W.value.entreprise=ue),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[Z[8]||(Z[8]=E("option",{value:null},"Slectionnez une entreprise",-1)),(Me(!0),De(gn,null,Vn(C.value,ue=>(Me(),De("option",{key:ue.id,value:ue.id},At(dn(hl)(ue)),9,w$))),128))],512)),[[Li,W.value.entreprise]])])):Ht("",!0),((Y=dn(a).user)==null?void 0:Y.user_type)==="admin"||((k=dn(a).user)==null?void 0:k.user_type)==="entreprise"?(Me(),De("div",x$,[Z[11]||(Z[11]=E("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Salarie",-1)),N.value?(Me(),De("div",L$,Z[10]||(Z[10]=[E("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Dn((Me(),De("select",{key:1,id:"edit-salarie","onUpdate:modelValue":Z[1]||(Z[1]=ue=>W.value.salarie=ue),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:dn(a).isAdmin&&!W.value.entreprise},[E("option",S$,At(v.value.length?"Slectionnez un salarie":"Aucun salarie disponible"),1),(Me(!0),De(gn,null,Vn(v.value,ue=>(Me(),De("option",{key:ue.id,value:ue.id},At(dn(hl)(ue)),9,E$))),128))],8,C$)),[[Li,W.value.salarie]])])):Ht("",!0),((U=dn(a).user)==null?void 0:U.user_type)!=="visiteur"?(Me(),De("div",P$,[Z[13]||(Z[13]=E("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Visiteur",-1)),T.value?(Me(),De("div",k$,Z[12]||(Z[12]=[E("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Dn((Me(),De("select",{key:1,id:"edit-visiteur","onUpdate:modelValue":Z[2]||(Z[2]=ue=>W.value.visiteur=ue),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!m.value.length||((H=dn(a).user)==null?void 0:H.user_type)!=="salarie"&&!W.value.salarie},[E("option",A$,At(m.value.length?"Slectionnez un visiteur":"Aucun visiteur disponible"),1),(Me(!0),De(gn,null,Vn(m.value,ue=>(Me(),De("option",{key:ue.id,value:ue.id},At(dn(hl)(ue)),9,T$))),128))],8,M$)),[[Li,W.value.visiteur]])])):Ht("",!0),E("div",O$,[Z[14]||(Z[14]=E("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),Dn(E("input",{id:"edit-nom","onUpdate:modelValue":Z[3]||(Z[3]=ue=>W.value.nom=ue),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[ai,W.value.nom]])]),E("div",D$,[Z[15]||(Z[15]=E("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),Dn(E("textarea",{id:"edit-description","onUpdate:modelValue":Z[4]||(Z[4]=ue=>W.value.description=ue),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[ai,W.value.description]])]),E("div",I$,[E("button",{onClick:q,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),E("button",{onClick:R,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!X.value||f.value},[f.value?(Me(),De("span",B$,"Cration en cours...")):(Me(),De("span",R$,"Crer"))],8,N$)])])])])):Ht("",!0)}}});function Ri(t){"@babel/helpers - typeof";return Ri=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ri(t)}var ja=Uint8Array,fu=Uint16Array,M_=Int32Array,Ay=new ja([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ty=new ja([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),lb=new ja([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_E=function(t,e){for(var n=new fu(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new M_(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},wE=_E(Ay,2),xE=wE.b,ub=wE.r;xE[28]=258,ub[258]=28;var LE=_E(Ty,0),F$=LE.b,i5=LE.r,cb=new fu(32768);for(var ls=0;ls<32768;++ls){var qh=(ls&43690)>>1|(ls&21845)<<1;qh=(qh&52428)>>2|(qh&13107)<<2,qh=(qh&61680)>>4|(qh&3855)<<4,cb[ls]=((qh&65280)>>8|(qh&255)<<8)>>1}var qc=function(t,e,n){for(var r=t.length,i=0,s=new fu(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new fu(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new fu(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],f=e-t[i],p=o[t[i]-1]++<<f,v=p|(1<<f)-1;p<=v;++p)a[cb[p]>>l]=c}else for(a=new fu(r),i=0;i<r;++i)t[i]&&(a[i]=cb[o[t[i]-1]++]>>15-t[i]);return a},yf=new ja(288);for(var ls=0;ls<144;++ls)yf[ls]=8;for(var ls=144;ls<256;++ls)yf[ls]=9;for(var ls=256;ls<280;++ls)yf[ls]=7;for(var ls=280;ls<288;++ls)yf[ls]=8;var u0=new ja(32);for(var ls=0;ls<32;++ls)u0[ls]=5;var j$=qc(yf,9,0),z$=qc(yf,9,1),U$=qc(u0,5,0),$$=qc(u0,5,1),$1=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},ic=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},V1=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},A_=function(t){return(t+7)/8|0},CE=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new ja(t.subarray(e,n))},V$=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],lc=function(t,e,n){var r=new Error(e||V$[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,lc),!n)throw r;return r},H$=function(t,e,n,r){var i=t.length,s=0;if(!i||e.f&&!e.l)return n||new ja(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new ja(i*3));var c=function(Ne){var ot=n.length;if(Ne>ot){var le=new ja(Math.max(ot*2,Ne));le.set(n),n=le}},f=e.f||0,p=e.p||0,v=e.b||0,m=e.l,C=e.d,S=e.m,I=e.n,N=i*8;do{if(!m){f=ic(t,p,1);var T=ic(t,p+1,3);if(p+=3,T)if(T==1)m=z$,C=$$,S=9,I=5;else if(T==2){var ce=ic(t,p,31)+257,he=ic(t,p+10,15)+4,O=ce+ic(t,p+5,31)+1;p+=14;for(var B=new ja(O),q=new ja(19),F=0;F<he;++F)q[lb[F]]=ic(t,p+F*3,7);p+=he*3;for(var R=$1(q),K=(1<<R)-1,Z=qc(q,R,1),F=0;F<O;){var Y=Z[ic(t,p,K)];p+=Y&15;var j=Y>>4;if(j<16)B[F++]=j;else{var k=0,U=0;for(j==16?(U=3+ic(t,p,3),p+=2,k=B[F-1]):j==17?(U=3+ic(t,p,7),p+=3):j==18&&(U=11+ic(t,p,127),p+=7);U--;)B[F++]=k}}var H=B.subarray(0,ce),ue=B.subarray(ce);S=$1(H),I=$1(ue),m=qc(H,S,1),C=qc(ue,I,1)}else lc(1);else{var j=A_(p)+4,W=t[j-4]|t[j-3]<<8,X=j+W;if(X>i){l&&lc(0);break}a&&c(v+W),n.set(t.subarray(j,X),v),e.b=v+=W,e.p=p=X*8,e.f=f;continue}if(p>N){l&&lc(0);break}}a&&c(v+131072);for(var _e=(1<<S)-1,Ie=(1<<I)-1,ee=p;;ee=p){var k=m[V1(t,p)&_e],te=k>>4;if(p+=k&15,p>N){l&&lc(0);break}if(k||lc(2),te<256)n[v++]=te;else if(te==256){ee=p,m=null;break}else{var oe=te-254;if(te>264){var F=te-257,ge=Ay[F];oe=ic(t,p,(1<<ge)-1)+xE[F],p+=ge}var ve=C[V1(t,p)&Ie],ye=ve>>4;ve||lc(3),p+=ve&15;var ue=F$[ye];if(ye>3){var ge=Ty[ye];ue+=V1(t,p)&(1<<ge)-1,p+=ge}if(p>N){l&&lc(0);break}a&&c(v+131072);var pe=v+oe;if(v<ue){var fe=s-ue,$e=Math.min(ue,pe);for(fe+v<0&&lc(3);v<$e;++v)n[v]=r[fe+v]}for(;v<pe;++v)n[v]=n[v-ue]}}e.l=m,e.p=ee,e.b=v,e.f=f,m&&(f=1,e.m=S,e.d=C,e.n=I)}while(!f);return v!=n.length&&o?CE(n,0,v):n.subarray(0,v)},mh=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Yp=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},H1=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:EE,l:0};if(i==1){var o=new ja(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(X,ce){return X.f-ce.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,f=1,p=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};f!=i-1;)a=n[n[c].f<n[p].f?c++:p++],l=n[c!=f&&n[c].f<n[p].f?c++:p++],n[f++]={s:-1,f:a.f+l.f,l:a,r:l};for(var v=s[0].s,r=1;r<i;++r)s[r].s>v&&(v=s[r].s);var m=new fu(v+1),C=hb(n[f-1],m,0);if(C>e){var r=0,S=0,I=C-e,N=1<<I;for(s.sort(function(ce,he){return m[he.s]-m[ce.s]||ce.f-he.f});r<i;++r){var T=s[r].s;if(m[T]>e)S+=N-(1<<C-m[T]),m[T]=e;else break}for(S>>=I;S>0;){var j=s[r].s;m[j]<e?S-=1<<e-m[j]++-1:++r}for(;r>=0&&S;--r){var W=s[r].s;m[W]==e&&(--m[W],++S)}C=e}return{t:new ja(m),l:C}},hb=function(t,e,n){return t.s==-1?Math.max(hb(t.l,e,n+1),hb(t.r,e,n+1)):e[t.s]=n},s5=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new fu(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return{c:n.subarray(0,r),n:e}},Kp=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},SE=function(t,e,n){var r=n.length,i=A_(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},o5=function(t,e,n,r,i,s,o,a,l,c,f){mh(e,f++,n),++i[256];for(var p=H1(i,15),v=p.t,m=p.l,C=H1(s,15),S=C.t,I=C.l,N=s5(v),T=N.c,j=N.n,W=s5(S),X=W.c,ce=W.n,he=new fu(19),O=0;O<T.length;++O)++he[T[O]&31];for(var O=0;O<X.length;++O)++he[X[O]&31];for(var B=H1(he,7),q=B.t,F=B.l,R=19;R>4&&!q[lb[R-1]];--R);var K=c+5<<3,Z=Kp(i,yf)+Kp(s,u0)+o,Y=Kp(i,v)+Kp(s,S)+o+14+3*R+Kp(he,q)+2*he[16]+3*he[17]+7*he[18];if(l>=0&&K<=Z&&K<=Y)return SE(e,f,t.subarray(l,l+c));var k,U,H,ue;if(mh(e,f,1+(Y<Z)),f+=2,Y<Z){k=qc(v,m,0),U=v,H=qc(S,I,0),ue=S;var _e=qc(q,F,0);mh(e,f,j-257),mh(e,f+5,ce-1),mh(e,f+10,R-4),f+=14;for(var O=0;O<R;++O)mh(e,f+3*O,q[lb[O]]);f+=3*R;for(var Ie=[T,X],ee=0;ee<2;++ee)for(var te=Ie[ee],O=0;O<te.length;++O){var oe=te[O]&31;mh(e,f,_e[oe]),f+=q[oe],oe>15&&(mh(e,f,te[O]>>5&127),f+=te[O]>>12)}}else k=j$,U=yf,H=U$,ue=u0;for(var O=0;O<a;++O){var ge=r[O];if(ge>255){var oe=ge>>18&31;Yp(e,f,k[oe+257]),f+=U[oe+257],oe>7&&(mh(e,f,ge>>23&31),f+=Ay[oe]);var ve=ge&31;Yp(e,f,H[ve]),f+=ue[ve],ve>3&&(Yp(e,f,ge>>5&8191),f+=Ty[ve])}else Yp(e,f,k[ge]),f+=U[ge]}return Yp(e,f,k[256]),f+U[256]},G$=new M_([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),EE=new ja(0),W$=function(t,e,n,r,i,s){var o=s.z||t.length,a=new ja(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),c=s.l,f=(s.r||0)&7;if(e){f&&(l[0]=s.r>>3);for(var p=G$[e-1],v=p>>13,m=p&8191,C=(1<<n)-1,S=s.p||new fu(32768),I=s.h||new fu(C+1),N=Math.ceil(n/3),T=2*N,j=function(ae){return(t[ae]^t[ae+1]<<N^t[ae+2]<<T)&C},W=new M_(25e3),X=new fu(288),ce=new fu(32),he=0,O=0,B=s.i||0,q=0,F=s.w||0,R=0;B+2<o;++B){var K=j(B),Z=B&32767,Y=I[K];if(S[Z]=Y,I[K]=Z,F<=B){var k=o-B;if((he>7e3||q>24576)&&(k>423||!c)){f=o5(t,l,0,W,X,ce,O,q,R,B-R,f),q=he=O=0,R=B;for(var U=0;U<286;++U)X[U]=0;for(var U=0;U<30;++U)ce[U]=0}var H=2,ue=0,_e=m,Ie=Z-Y&32767;if(k>2&&K==j(B-Ie))for(var ee=Math.min(v,k)-1,te=Math.min(32767,B),oe=Math.min(258,k);Ie<=te&&--_e&&Z!=Y;){if(t[B+H]==t[B+H-Ie]){for(var ge=0;ge<oe&&t[B+ge]==t[B+ge-Ie];++ge);if(ge>H){if(H=ge,ue=Ie,ge>ee)break;for(var ve=Math.min(Ie,ge-2),ye=0,U=0;U<ve;++U){var pe=B-Ie+U&32767,fe=S[pe],$e=pe-fe&32767;$e>ye&&(ye=$e,Y=pe)}}}Z=Y,Y=S[Z],Ie+=Z-Y&32767}if(ue){W[q++]=268435456|ub[H]<<18|i5[ue];var Ne=ub[H]&31,ot=i5[ue]&31;O+=Ay[Ne]+Ty[ot],++X[257+Ne],++ce[ot],F=B+H,++he}else W[q++]=t[B],++X[t[B]]}}for(B=Math.max(B,F);B<o;++B)W[q++]=t[B],++X[t[B]];f=o5(t,l,c,W,X,ce,O,q,R,B-R,f),c||(s.r=f&7|l[f/8|0]<<3,f-=7,s.h=I,s.p=S,s.i=B,s.w=F)}else{for(var B=s.w||0;B<o+c;B+=65535){var le=B+65535;le>=o&&(l[f/8|0]=c,le=o),f=SE(l,f+1,t.subarray(B,le))}s.i=o}return CE(a,0,r+A_(f)+i)},PE=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},q$=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new ja(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return W$(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},kE=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},Y$=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=PE();i.p(e.dictionary),kE(t,2,i.d())}},K$=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&lc(6,"invalid zlib data"),(t[1]>>5&1)==1&&lc(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function fb(t,e){e||(e={});var n=PE();n.p(t);var r=q$(t,e,e.dictionary?6:2,4);return Y$(r,e),kE(r,r.length-4,n.d()),r}function Z$(t,e){return H$(t.subarray(K$(t),-4),{i:2},e,e)}var X$=typeof TextDecoder<"u"&&new TextDecoder,J$=0;try{X$.decode(EE,{stream:!0}),J$=1}catch{}var Lr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function G1(){Lr.console&&typeof Lr.console.log=="function"&&Lr.console.log.apply(Lr.console,arguments)}var qi={log:G1,warn:function(t){Lr.console&&(typeof Lr.console.warn=="function"?Lr.console.warn.apply(Lr.console,arguments):G1.call(null,arguments))},error:function(t){Lr.console&&(typeof Lr.console.error=="function"?Lr.console.error.apply(Lr.console,arguments):G1(t))}};function W1(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Wf(r.response,e,n)},r.onerror=function(){qi.error("could not download file")},r.send()}function a5(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function pm(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Ng,db,Wf=Lr.saveAs||((typeof window>"u"?"undefined":Ri(window))!=="object"||window!==Lr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Lr.URL||Lr.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?a5(i.href)?W1(t,e,n):pm(i,i.target="_blank"):pm(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){pm(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(a5(t))W1(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){pm(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Ri(s)!=="object"&&(qi.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return W1(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(Lr.HTMLElement)||Lr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Ri(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var f=a.result;f=o?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=f:location=f,r=null},a.readAsDataURL(t)}else{var l=Lr.URL||Lr.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function ME(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function q1(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=Aa(n,r,i,s,e[0],7,-680876936),s=Aa(s,n,r,i,e[1],12,-389564586),i=Aa(i,s,n,r,e[2],17,606105819),r=Aa(r,i,s,n,e[3],22,-1044525330),n=Aa(n,r,i,s,e[4],7,-176418897),s=Aa(s,n,r,i,e[5],12,1200080426),i=Aa(i,s,n,r,e[6],17,-1473231341),r=Aa(r,i,s,n,e[7],22,-45705983),n=Aa(n,r,i,s,e[8],7,1770035416),s=Aa(s,n,r,i,e[9],12,-1958414417),i=Aa(i,s,n,r,e[10],17,-42063),r=Aa(r,i,s,n,e[11],22,-1990404162),n=Aa(n,r,i,s,e[12],7,1804603682),s=Aa(s,n,r,i,e[13],12,-40341101),i=Aa(i,s,n,r,e[14],17,-1502002290),n=Ta(n,r=Aa(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Ta(s,n,r,i,e[6],9,-1069501632),i=Ta(i,s,n,r,e[11],14,643717713),r=Ta(r,i,s,n,e[0],20,-373897302),n=Ta(n,r,i,s,e[5],5,-701558691),s=Ta(s,n,r,i,e[10],9,38016083),i=Ta(i,s,n,r,e[15],14,-660478335),r=Ta(r,i,s,n,e[4],20,-405537848),n=Ta(n,r,i,s,e[9],5,568446438),s=Ta(s,n,r,i,e[14],9,-1019803690),i=Ta(i,s,n,r,e[3],14,-187363961),r=Ta(r,i,s,n,e[8],20,1163531501),n=Ta(n,r,i,s,e[13],5,-1444681467),s=Ta(s,n,r,i,e[2],9,-51403784),i=Ta(i,s,n,r,e[7],14,1735328473),n=Oa(n,r=Ta(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Oa(s,n,r,i,e[8],11,-2022574463),i=Oa(i,s,n,r,e[11],16,1839030562),r=Oa(r,i,s,n,e[14],23,-35309556),n=Oa(n,r,i,s,e[1],4,-1530992060),s=Oa(s,n,r,i,e[4],11,1272893353),i=Oa(i,s,n,r,e[7],16,-155497632),r=Oa(r,i,s,n,e[10],23,-1094730640),n=Oa(n,r,i,s,e[13],4,681279174),s=Oa(s,n,r,i,e[0],11,-358537222),i=Oa(i,s,n,r,e[3],16,-722521979),r=Oa(r,i,s,n,e[6],23,76029189),n=Oa(n,r,i,s,e[9],4,-640364487),s=Oa(s,n,r,i,e[12],11,-421815835),i=Oa(i,s,n,r,e[15],16,530742520),n=Da(n,r=Oa(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Da(s,n,r,i,e[7],10,1126891415),i=Da(i,s,n,r,e[14],15,-1416354905),r=Da(r,i,s,n,e[5],21,-57434055),n=Da(n,r,i,s,e[12],6,1700485571),s=Da(s,n,r,i,e[3],10,-1894986606),i=Da(i,s,n,r,e[10],15,-1051523),r=Da(r,i,s,n,e[1],21,-2054922799),n=Da(n,r,i,s,e[8],6,1873313359),s=Da(s,n,r,i,e[15],10,-30611744),i=Da(i,s,n,r,e[6],15,-1560198380),r=Da(r,i,s,n,e[13],21,1309151649),n=Da(n,r,i,s,e[4],6,-145523070),s=Da(s,n,r,i,e[11],10,-1120210379),i=Da(i,s,n,r,e[2],15,718787259),r=Da(r,i,s,n,e[9],21,-343485551),t[0]=of(n,t[0]),t[1]=of(r,t[1]),t[2]=of(i,t[2]),t[3]=of(s,t[3])}function Oy(t,e,n,r,i,s){return e=of(of(e,t),of(r,s)),of(e<<i|e>>>32-i,n)}function Aa(t,e,n,r,i,s,o){return Oy(e&n|~e&r,t,e,i,s,o)}function Ta(t,e,n,r,i,s,o){return Oy(e&r|n&~r,t,e,i,s,o)}function Oa(t,e,n,r,i,s,o){return Oy(e^n^r,t,e,i,s,o)}function Da(t,e,n,r,i,s,o){return Oy(n^(e|~r),t,e,i,s,o)}function AE(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)q1(r,Q$(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(q1(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,q1(r,i),r}function Q$(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}Ng=Lr.atob.bind(Lr),db=Lr.btoa.bind(Lr);var l5="0123456789abcdef".split("");function eV(t){for(var e="",n=0;n<4;n++)e+=l5[t>>8*n+4&15]+l5[t>>8*n&15];return e}function tV(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function pb(t){return AE(t).map(tV).join("")}var nV=function(t){for(var e=0;e<t.length;e++)t[e]=eV(t[e]);return t.join("")}(AE("hello"))!="5d41402abc4b2a76b9719d911017c592";function of(t,e){if(nV){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function gb(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var f=a[l];c=(c+f+o.charCodeAt(l))%256,a[l]=a[c],a[c]=f}n=t,r=a}else a=r;var p=e.length,v=0,m=0,C="";for(l=0;l<p;l++)m=(m+(f=a[v=(v+1)%256]))%256,a[v]=a[m],a[m]=f,o=a[(a[v]+a[m])%256],C+=String.fromCharCode(e.charCodeAt(l)^o);return C}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var u5={print:4,modify:8,copy:16,"annot-forms":32};function Jd(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(u5.perm!==void 0)throw new Error("Invalid permission: "+a);i+=u5[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=pb(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=gb(this.encryptionKey,this.padding)}function Qd(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function c5(t){if(Ri(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){Lr.console&&qi.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Rv(t){if(!(this instanceof Rv))return new Rv(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function TE(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Xf(t,e,n,r,i){if(!(this instanceof Xf))return new Xf(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,TE.call(this,r,i)}function np(t,e,n,r,i){if(!(this instanceof np))return new np(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,TE.call(this,r,i)}function xr(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,c="S",f=null;Ri(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(f=t.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var p=t.putOnlyUsedFonts||!1,v={},m={internal:{},__private__:{}};m.__private__.PubSub=c5;var C="1.3",S=m.__private__.getPdfVersion=function(){return C};m.__private__.setPdfVersion=function(z){C=z};var I={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return I};var N=m.__private__.getPageFormat=function(z){return I[z]};i=i||"a4";var T={COMPAT:"compat",ADVANCED:"advanced"},j=T.COMPAT;function W(){this.saveGraphicsState(),re(new Gn(et,0,0,-et,0,ba()*et).toString()+" cm"),this.setFontSize(this.getFontSize()/et),c="n",j=T.ADVANCED}function X(){this.restoreGraphicsState(),c="S",j=T.COMPAT}var ce=m.__private__.combineFontStyleAndFontWeight=function(z,we){if(z=="bold"&&we=="normal"||z=="bold"&&we==400||z=="normal"&&we=="italic"||z=="bold"&&we=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return we&&(z=we==400||we==="normal"?z==="italic"?"italic":"normal":we!=700&&we!=="bold"||z!=="normal"?(we==700?"bold":we)+""+z:"bold"),z};m.advancedAPI=function(z){var we=j===T.COMPAT;return we&&W.call(this),typeof z!="function"||(z(this),we&&X.call(this)),this},m.compatAPI=function(z){var we=j===T.ADVANCED;return we&&X.call(this),typeof z!="function"||(z(this),we&&W.call(this)),this},m.isAdvancedAPI=function(){return j===T.ADVANCED};var he,O=function(z){if(j!==T.ADVANCED)throw new Error(z+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},B=m.roundToPrecision=m.__private__.roundToPrecision=function(z,we){var We=e||we;if(isNaN(z)||isNaN(We))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return z.toFixed(We).replace(/0+$/,"")};he=m.hpf=m.__private__.hpf=typeof l=="number"?function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.hpf");return B(z,l)}:l==="smart"?function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.hpf");return B(z,z>-1&&z<1?16:5)}:function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.hpf");return B(z,16)};var q=m.f2=m.__private__.f2=function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.f2");return B(z,2)},F=m.__private__.f3=function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.f3");return B(z,3)},R=m.scale=m.__private__.scale=function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.scale");return j===T.COMPAT?z*et:j===T.ADVANCED?z:void 0},K=function(z){return j===T.COMPAT?ba()-z:j===T.ADVANCED?z:void 0},Z=function(z){return R(K(z))};m.__private__.setPrecision=m.setPrecision=function(z){typeof parseInt(z,10)=="number"&&(e=parseInt(z,10))};var Y,k="00000000000000000000000000000000",U=m.__private__.getFileId=function(){return k},H=m.__private__.setFileId=function(z){return k=z!==void 0&&/^[a-fA-F0-9]{32}$/.test(z)?z.toUpperCase():k.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(os=new Jd(f.userPermissions,f.userPassword,f.ownerPassword,k)),k};m.setFileId=function(z){return H(z),this},m.getFileId=function(){return U()};var ue=m.__private__.convertDateToPDFDate=function(z){var we=z.getTimezoneOffset(),We=we<0?"+":"-",lt=Math.floor(Math.abs(we/60)),xt=Math.abs(we%60),Ft=[We,oe(lt),"'",oe(xt),"'"].join("");return["D:",z.getFullYear(),oe(z.getMonth()+1),oe(z.getDate()),oe(z.getHours()),oe(z.getMinutes()),oe(z.getSeconds()),Ft].join("")},_e=m.__private__.convertPDFDateToDate=function(z){var we=parseInt(z.substr(2,4),10),We=parseInt(z.substr(6,2),10)-1,lt=parseInt(z.substr(8,2),10),xt=parseInt(z.substr(10,2),10),Ft=parseInt(z.substr(12,2),10),on=parseInt(z.substr(14,2),10);return new Date(we,We,lt,xt,Ft,on,0)},Ie=m.__private__.setCreationDate=function(z){var we;if(z===void 0&&(z=new Date),z instanceof Date)we=ue(z);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(z))throw new Error("Invalid argument passed to jsPDF.setCreationDate");we=z}return Y=we},ee=m.__private__.getCreationDate=function(z){var we=Y;return z==="jsDate"&&(we=_e(Y)),we};m.setCreationDate=function(z){return Ie(z),this},m.getCreationDate=function(z){return ee(z)};var te,oe=m.__private__.padd2=function(z){return("0"+parseInt(z)).slice(-2)},ge=m.__private__.padd2Hex=function(z){return("00"+(z=z.toString())).substr(z.length)},ve=0,ye=[],pe=[],fe=0,$e=[],Ne=[],ot=!1,le=pe,ae=function(){ve=0,fe=0,pe=[],ye=[],$e=[],Lt=Xt(),hn=Xt()};m.__private__.setCustomOutputDestination=function(z){ot=!0,le=z};var de=function(z){ot||(le=z)};m.__private__.resetCustomOutputDestination=function(){ot=!1,le=pe};var re=m.__private__.out=function(z){return z=z.toString(),fe+=z.length+1,le.push(z),le},Ae=m.__private__.write=function(z){return re(arguments.length===1?z.toString():Array.prototype.join.call(arguments," "))},Ge=m.__private__.getArrayBuffer=function(z){for(var we=z.length,We=new ArrayBuffer(we),lt=new Uint8Array(We);we--;)lt[we]=z.charCodeAt(we);return We},tt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return tt};var at=t.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(z){return at=j===T.ADVANCED?z/et:z,this};var ut,gt=m.__private__.getFontSize=m.getFontSize=function(){return j===T.COMPAT?at:at*et},$t=t.R2L||!1;m.__private__.setR2L=m.setR2L=function(z){return $t=z,this},m.__private__.getR2L=m.getR2L=function(){return $t};var Rt,Gt=m.__private__.setZoomMode=function(z){var we=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(z))ut=z;else if(isNaN(z)){if(we.indexOf(z)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+z+'" is not recognized.');ut=z}else ut=parseInt(z,10)};m.__private__.getZoomMode=function(){return ut};var ln,mn=m.__private__.setPageMode=function(z){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(z)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+z+'" is not recognized.');Rt=z};m.__private__.getPageMode=function(){return Rt};var yn=m.__private__.setLayoutMode=function(z){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(z)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+z+'" is not recognized.');ln=z};m.__private__.getLayoutMode=function(){return ln},m.__private__.setDisplayMode=m.setDisplayMode=function(z,we,We){return Gt(z),yn(we),mn(We),this};var Ze={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(z){if(Object.keys(Ze).indexOf(z)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ze[z]},m.__private__.getDocumentProperties=function(){return Ze},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(z){for(var we in Ze)Ze.hasOwnProperty(we)&&z[we]&&(Ze[we]=z[we]);return this},m.__private__.setDocumentProperty=function(z,we){if(Object.keys(Ze).indexOf(z)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ze[z]=we};var it,et,Bt,Zt,Sn,bn={},xn={},zn=[],vn={},tn={},un={},Xn={},nr=null,ur=0,Rn=[],Cr=new c5(m),Ki=t.hotfixes||[],Ci={},Us={},ss=[],Gn=function z(we,We,lt,xt,Ft,on){if(!(this instanceof z))return new z(we,We,lt,xt,Ft,on);isNaN(we)&&(we=1),isNaN(We)&&(We=0),isNaN(lt)&&(lt=0),isNaN(xt)&&(xt=1),isNaN(Ft)&&(Ft=0),isNaN(on)&&(on=0),this._matrix=[we,We,lt,xt,Ft,on]};Object.defineProperty(Gn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(z){this._matrix[0]=z}}),Object.defineProperty(Gn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(z){this._matrix[1]=z}}),Object.defineProperty(Gn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(z){this._matrix[2]=z}}),Object.defineProperty(Gn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(z){this._matrix[3]=z}}),Object.defineProperty(Gn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(z){this._matrix[4]=z}}),Object.defineProperty(Gn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(z){this._matrix[5]=z}}),Object.defineProperty(Gn.prototype,"a",{get:function(){return this._matrix[0]},set:function(z){this._matrix[0]=z}}),Object.defineProperty(Gn.prototype,"b",{get:function(){return this._matrix[1]},set:function(z){this._matrix[1]=z}}),Object.defineProperty(Gn.prototype,"c",{get:function(){return this._matrix[2]},set:function(z){this._matrix[2]=z}}),Object.defineProperty(Gn.prototype,"d",{get:function(){return this._matrix[3]},set:function(z){this._matrix[3]=z}}),Object.defineProperty(Gn.prototype,"e",{get:function(){return this._matrix[4]},set:function(z){this._matrix[4]=z}}),Object.defineProperty(Gn.prototype,"f",{get:function(){return this._matrix[5]},set:function(z){this._matrix[5]=z}}),Object.defineProperty(Gn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Gn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Gn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Gn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Gn.prototype.join=function(z){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(he).join(z)},Gn.prototype.multiply=function(z){var we=z.sx*this.sx+z.shy*this.shx,We=z.sx*this.shy+z.shy*this.sy,lt=z.shx*this.sx+z.sy*this.shx,xt=z.shx*this.shy+z.sy*this.sy,Ft=z.tx*this.sx+z.ty*this.shx+this.tx,on=z.tx*this.shy+z.ty*this.sy+this.ty;return new Gn(we,We,lt,xt,Ft,on)},Gn.prototype.decompose=function(){var z=this.sx,we=this.shy,We=this.shx,lt=this.sy,xt=this.tx,Ft=this.ty,on=Math.sqrt(z*z+we*we),Mn=(z/=on)*We+(we/=on)*lt;We-=z*Mn,lt-=we*Mn;var In=Math.sqrt(We*We+lt*lt);return Mn/=In,z*(lt/=In)<we*(We/=In)&&(z=-z,we=-we,Mn=-Mn,on=-on),{scale:new Gn(on,0,0,In,0,0),translate:new Gn(1,0,0,1,xt,Ft),rotate:new Gn(z,we,-we,z,0,0),skew:new Gn(1,0,Mn,1,0,0)}},Gn.prototype.toString=function(z){return this.join(" ")},Gn.prototype.inversed=function(){var z=this.sx,we=this.shy,We=this.shx,lt=this.sy,xt=this.tx,Ft=this.ty,on=1/(z*lt-we*We),Mn=lt*on,In=-we*on,Jn=-We*on,lr=z*on;return new Gn(Mn,In,Jn,lr,-Mn*xt-Jn*Ft,-In*xt-lr*Ft)},Gn.prototype.applyToPoint=function(z){var we=z.x*this.sx+z.y*this.shx+this.tx,We=z.x*this.shy+z.y*this.sy+this.ty;return new fs(we,We)},Gn.prototype.applyToRectangle=function(z){var we=this.applyToPoint(z),We=this.applyToPoint(new fs(z.x+z.w,z.y+z.h));return new $o(we.x,we.y,We.x-we.x,We.y-we.y)},Gn.prototype.clone=function(){var z=this.sx,we=this.shy,We=this.shx,lt=this.sy,xt=this.tx,Ft=this.ty;return new Gn(z,we,We,lt,xt,Ft)},m.Matrix=Gn;var Ot=m.matrixMult=function(z,we){return we.multiply(z)},Je=new Gn(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=Je;var Ut=function(z,we){if(!tn[z]){var We=(we instanceof Xf?"Sh":"P")+(Object.keys(vn).length+1).toString(10);we.id=We,tn[z]=We,vn[We]=we,Cr.publish("addPattern",we)}};m.ShadingPattern=Xf,m.TilingPattern=np,m.addShadingPattern=function(z,we){return O("addShadingPattern()"),Ut(z,we),this},m.beginTilingPattern=function(z){O("beginTilingPattern()"),Vo(z.boundingBox[0],z.boundingBox[1],z.boundingBox[2]-z.boundingBox[0],z.boundingBox[3]-z.boundingBox[1],z.matrix)},m.endTilingPattern=function(z,we){O("endTilingPattern()"),we.stream=Ne[te].join(`
`),Ut(z,we),Cr.publish("endTilingPattern",we),ss.pop().restore()};var _n=m.__private__.newObject=function(){var z=Xt();return Fn(z,!0),z},Xt=m.__private__.newObjectDeferred=function(){return ve++,ye[ve]=function(){return fe},ve},Fn=function(z,we){return we=typeof we=="boolean"&&we,ye[z]=fe,we&&re(z+" 0 obj"),z},Wt=m.__private__.newAdditionalObject=function(){var z={objId:Xt(),content:""};return $e.push(z),z},Lt=Xt(),hn=Xt(),Ln=m.__private__.decodeColorString=function(z){var we=z.split(" ");if(we.length!==2||we[1]!=="g"&&we[1]!=="G")we.length===5&&(we[4]==="k"||we[4]==="K")&&(we=[(1-we[0])*(1-we[3]),(1-we[1])*(1-we[3]),(1-we[2])*(1-we[3]),"r"]);else{var We=parseFloat(we[0]);we=[We,We,We,"r"]}for(var lt="#",xt=0;xt<3;xt++)lt+=("0"+Math.floor(255*parseFloat(we[xt])).toString(16)).slice(-2);return lt},On=m.__private__.encodeColorString=function(z){var we;typeof z=="string"&&(z={ch1:z});var We=z.ch1,lt=z.ch2,xt=z.ch3,Ft=z.ch4,on=z.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof We=="string"&&We.charAt(0)!=="#"){var Mn=new ME(We);if(Mn.ok)We=Mn.toHex();else if(!/^\d*\.?\d*$/.test(We))throw new Error('Invalid color "'+We+'" passed to jsPDF.encodeColorString.')}if(typeof We=="string"&&/^#[0-9A-Fa-f]{3}$/.test(We)&&(We="#"+We[1]+We[1]+We[2]+We[2]+We[3]+We[3]),typeof We=="string"&&/^#[0-9A-Fa-f]{6}$/.test(We)){var In=parseInt(We.substr(1),16);We=In>>16&255,lt=In>>8&255,xt=255&In}if(lt===void 0||Ft===void 0&&We===lt&&lt===xt)if(typeof We=="string")we=We+" "+on[0];else switch(z.precision){case 2:we=q(We/255)+" "+on[0];break;case 3:default:we=F(We/255)+" "+on[0]}else if(Ft===void 0||Ri(Ft)==="object"){if(Ft&&!isNaN(Ft.a)&&Ft.a===0)return we=["1.","1.","1.",on[1]].join(" ");if(typeof We=="string")we=[We,lt,xt,on[1]].join(" ");else switch(z.precision){case 2:we=[q(We/255),q(lt/255),q(xt/255),on[1]].join(" ");break;default:case 3:we=[F(We/255),F(lt/255),F(xt/255),on[1]].join(" ")}}else if(typeof We=="string")we=[We,lt,xt,Ft,on[2]].join(" ");else switch(z.precision){case 2:we=[q(We),q(lt),q(xt),q(Ft),on[2]].join(" ");break;case 3:default:we=[F(We),F(lt),F(xt),F(Ft),on[2]].join(" ")}return we},Wn=m.__private__.getFilters=function(){return o},ar=m.__private__.putStream=function(z){var we=(z=z||{}).data||"",We=z.filters||Wn(),lt=z.alreadyAppliedFilters||[],xt=z.addLength1||!1,Ft=we.length,on=z.objectId,Mn=function(Vi){return Vi};if(f!==null&&on===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(Mn=os.encryptor(on,0));var In={};We===!0&&(We=["FlateEncode"]);var Jn=z.additionalKeyValues||[],lr=(In=xr.API.processDataByFilters!==void 0?xr.API.processDataByFilters(we,We):{data:we,reverseChain:[]}).reverseChain+(Array.isArray(lt)?lt.join(" "):lt.toString());if(In.data.length!==0&&(Jn.push({key:"Length",value:In.data.length}),xt===!0&&Jn.push({key:"Length1",value:Ft})),lr.length!=0)if(lr.split("/").length-1==1)Jn.push({key:"Filter",value:lr});else{Jn.push({key:"Filter",value:"["+lr+"]"});for(var Er=0;Er<Jn.length;Er+=1)if(Jn[Er].key==="DecodeParms"){for(var wi=[],Zr=0;Zr<In.reverseChain.split("/").length-1;Zr+=1)wi.push("null");wi.push(Jn[Er].value),Jn[Er].value="["+wi.join(" ")+"]"}}re("<<");for(var ri=0;ri<Jn.length;ri++)re("/"+Jn[ri].key+" "+Jn[ri].value);re(">>"),In.data.length!==0&&(re("stream"),re(Mn(In.data)),re("endstream"))},Xr=m.__private__.putPage=function(z){var we=z.number,We=z.data,lt=z.objId,xt=z.contentsObjId;Fn(lt,!0),re("<</Type /Page"),re("/Parent "+z.rootDictionaryObjId+" 0 R"),re("/Resources "+z.resourceDictionaryObjId+" 0 R"),re("/MediaBox ["+parseFloat(he(z.mediaBox.bottomLeftX))+" "+parseFloat(he(z.mediaBox.bottomLeftY))+" "+he(z.mediaBox.topRightX)+" "+he(z.mediaBox.topRightY)+"]"),z.cropBox!==null&&re("/CropBox ["+he(z.cropBox.bottomLeftX)+" "+he(z.cropBox.bottomLeftY)+" "+he(z.cropBox.topRightX)+" "+he(z.cropBox.topRightY)+"]"),z.bleedBox!==null&&re("/BleedBox ["+he(z.bleedBox.bottomLeftX)+" "+he(z.bleedBox.bottomLeftY)+" "+he(z.bleedBox.topRightX)+" "+he(z.bleedBox.topRightY)+"]"),z.trimBox!==null&&re("/TrimBox ["+he(z.trimBox.bottomLeftX)+" "+he(z.trimBox.bottomLeftY)+" "+he(z.trimBox.topRightX)+" "+he(z.trimBox.topRightY)+"]"),z.artBox!==null&&re("/ArtBox ["+he(z.artBox.bottomLeftX)+" "+he(z.artBox.bottomLeftY)+" "+he(z.artBox.topRightX)+" "+he(z.artBox.topRightY)+"]"),typeof z.userUnit=="number"&&z.userUnit!==1&&re("/UserUnit "+z.userUnit),Cr.publish("putPage",{objId:lt,pageContext:Rn[we],pageNumber:we,page:We}),re("/Contents "+xt+" 0 R"),re(">>"),re("endobj");var Ft=We.join(`
`);return j===T.ADVANCED&&(Ft+=`
Q`),Fn(xt,!0),ar({data:Ft,filters:Wn(),objectId:xt}),re("endobj"),lt},sr=m.__private__.putPages=function(){var z,we,We=[];for(z=1;z<=ur;z++)Rn[z].objId=Xt(),Rn[z].contentsObjId=Xt();for(z=1;z<=ur;z++)We.push(Xr({number:z,data:Ne[z],objId:Rn[z].objId,contentsObjId:Rn[z].contentsObjId,mediaBox:Rn[z].mediaBox,cropBox:Rn[z].cropBox,bleedBox:Rn[z].bleedBox,trimBox:Rn[z].trimBox,artBox:Rn[z].artBox,userUnit:Rn[z].userUnit,rootDictionaryObjId:Lt,resourceDictionaryObjId:hn}));Fn(Lt,!0),re("<</Type /Pages");var lt="/Kids [";for(we=0;we<ur;we++)lt+=We[we]+" 0 R ";re(lt+"]"),re("/Count "+ur),re(">>"),re("endobj"),Cr.publish("postPutPages")},Fi=function(z){Cr.publish("putFont",{font:z,out:re,newObject:_n,putStream:ar}),z.isAlreadyPutted!==!0&&(z.objectNumber=_n(),re("<<"),re("/Type /Font"),re("/BaseFont /"+Qd(z.postScriptName)),re("/Subtype /Type1"),typeof z.encoding=="string"&&re("/Encoding /"+z.encoding),re("/FirstChar 32"),re("/LastChar 255"),re(">>"),re("endobj"))},Gr=function(){for(var z in bn)bn.hasOwnProperty(z)&&(p===!1||p===!0&&v.hasOwnProperty(z))&&Fi(bn[z])},_o=function(z){z.objectNumber=_n();var we=[];we.push({key:"Type",value:"/XObject"}),we.push({key:"Subtype",value:"/Form"}),we.push({key:"BBox",value:"["+[he(z.x),he(z.y),he(z.x+z.width),he(z.y+z.height)].join(" ")+"]"}),we.push({key:"Matrix",value:"["+z.matrix.toString()+"]"});var We=z.pages[1].join(`
`);ar({data:We,additionalKeyValues:we,objectId:z.objectNumber}),re("endobj")},ir=function(){for(var z in Ci)Ci.hasOwnProperty(z)&&_o(Ci[z])},gr=function(z,we){var We,lt=[],xt=1/(we-1);for(We=0;We<1;We+=xt)lt.push(We);if(lt.push(1),z[0].offset!=0){var Ft={offset:0,color:z[0].color};z.unshift(Ft)}if(z[z.length-1].offset!=1){var on={offset:1,color:z[z.length-1].color};z.push(on)}for(var Mn="",In=0,Jn=0;Jn<lt.length;Jn++){for(We=lt[Jn];We>z[In+1].offset;)In++;var lr=z[In].offset,Er=(We-lr)/(z[In+1].offset-lr),wi=z[In].color,Zr=z[In+1].color;Mn+=ge(Math.round((1-Er)*wi[0]+Er*Zr[0]).toString(16))+ge(Math.round((1-Er)*wi[1]+Er*Zr[1]).toString(16))+ge(Math.round((1-Er)*wi[2]+Er*Zr[2]).toString(16))}return Mn.trim()},Ls=function(z,we){we||(we=21);var We=_n(),lt=gr(z.colors,we),xt=[];xt.push({key:"FunctionType",value:"0"}),xt.push({key:"Domain",value:"[0.0 1.0]"}),xt.push({key:"Size",value:"["+we+"]"}),xt.push({key:"BitsPerSample",value:"8"}),xt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),xt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ar({data:lt,additionalKeyValues:xt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:We}),re("endobj"),z.objectNumber=_n(),re("<< /ShadingType "+z.type),re("/ColorSpace /DeviceRGB");var Ft="/Coords ["+he(parseFloat(z.coords[0]))+" "+he(parseFloat(z.coords[1]))+" ";z.type===2?Ft+=he(parseFloat(z.coords[2]))+" "+he(parseFloat(z.coords[3])):Ft+=he(parseFloat(z.coords[2]))+" "+he(parseFloat(z.coords[3]))+" "+he(parseFloat(z.coords[4]))+" "+he(parseFloat(z.coords[5])),re(Ft+="]"),z.matrix&&re("/Matrix ["+z.matrix.toString()+"]"),re("/Function "+We+" 0 R"),re("/Extend [true true]"),re(">>"),re("endobj")},Ha=function(z,we){var We=Xt(),lt=_n();we.push({resourcesOid:We,objectOid:lt}),z.objectNumber=lt;var xt=[];xt.push({key:"Type",value:"/Pattern"}),xt.push({key:"PatternType",value:"1"}),xt.push({key:"PaintType",value:"1"}),xt.push({key:"TilingType",value:"1"}),xt.push({key:"BBox",value:"["+z.boundingBox.map(he).join(" ")+"]"}),xt.push({key:"XStep",value:he(z.xStep)}),xt.push({key:"YStep",value:he(z.yStep)}),xt.push({key:"Resources",value:We+" 0 R"}),z.matrix&&xt.push({key:"Matrix",value:"["+z.matrix.toString()+"]"}),ar({data:z.stream,additionalKeyValues:xt,objectId:z.objectNumber}),re("endobj")},vu=function(z){var we;for(we in vn)vn.hasOwnProperty(we)&&(vn[we]instanceof Xf?Ls(vn[we]):vn[we]instanceof np&&Ha(vn[we],z))},_c=function(z){for(var we in z.objectNumber=_n(),re("<<"),z)switch(we){case"opacity":re("/ca "+q(z[we]));break;case"stroke-opacity":re("/CA "+q(z[we]))}re(">>"),re("endobj")},wc=function(){var z;for(z in un)un.hasOwnProperty(z)&&_c(un[z])},gl=function(){for(var z in re("/XObject <<"),Ci)Ci.hasOwnProperty(z)&&Ci[z].objectNumber>=0&&re("/"+z+" "+Ci[z].objectNumber+" 0 R");Cr.publish("putXobjectDict"),re(">>")},ml=function(){os.oid=_n(),re("<<"),re("/Filter /Standard"),re("/V "+os.v),re("/R "+os.r),re("/U <"+os.toHexString(os.U)+">"),re("/O <"+os.toHexString(os.O)+">"),re("/P "+os.P),re(">>"),re("endobj")},$u=function(){for(var z in re("/Font <<"),bn)bn.hasOwnProperty(z)&&(p===!1||p===!0&&v.hasOwnProperty(z))&&re("/"+z+" "+bn[z].objectNumber+" 0 R");re(">>")},xc=function(){if(Object.keys(vn).length>0){for(var z in re("/Shading <<"),vn)vn.hasOwnProperty(z)&&vn[z]instanceof Xf&&vn[z].objectNumber>=0&&re("/"+z+" "+vn[z].objectNumber+" 0 R");Cr.publish("putShadingPatternDict"),re(">>")}},Mo=function(z){if(Object.keys(vn).length>0){for(var we in re("/Pattern <<"),vn)vn.hasOwnProperty(we)&&vn[we]instanceof m.TilingPattern&&vn[we].objectNumber>=0&&vn[we].objectNumber<z&&re("/"+we+" "+vn[we].objectNumber+" 0 R");Cr.publish("putTilingPatternDict"),re(">>")}},Wr=function(){if(Object.keys(un).length>0){var z;for(z in re("/ExtGState <<"),un)un.hasOwnProperty(z)&&un[z].objectNumber>=0&&re("/"+z+" "+un[z].objectNumber+" 0 R");Cr.publish("putGStateDict"),re(">>")}},fr=function(z){Fn(z.resourcesOid,!0),re("<<"),re("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),$u(),xc(),Mo(z.objectOid),Wr(),gl(),re(">>"),re("endobj")},Ga=function(){var z=[];Gr(),wc(),ir(),vu(z),Cr.publish("putResources"),z.forEach(fr),fr({resourcesOid:hn,objectOid:Number.MAX_SAFE_INTEGER}),Cr.publish("postPutResources")},ga=function(){Cr.publish("putAdditionalObjects");for(var z=0;z<$e.length;z++){var we=$e[z];Fn(we.objId,!0),re(we.content),re("endobj")}Cr.publish("postPutAdditionalObjects")},Ro=function(z){xn[z.fontName]=xn[z.fontName]||{},xn[z.fontName][z.fontStyle]=z.id},ql=function(z,we,We,lt,xt){var Ft={id:"F"+(Object.keys(bn).length+1).toString(10),postScriptName:z,fontName:we,fontStyle:We,encoding:lt,isStandardFont:xt||!1,metadata:{}};return Cr.publish("addFont",{font:Ft,instance:this}),bn[Ft.id]=Ft,Ro(Ft),Ft.id},mr=function(z){for(var we=0,We=tt.length;we<We;we++){var lt=ql.call(this,z[we][0],z[we][1],z[we][2],tt[we][3],!0);p===!1&&(v[lt]=!0);var xt=z[we][0].split("-");Ro({id:lt,fontName:xt[0],fontStyle:xt[1]||""})}Cr.publish("addFonts",{fonts:bn,dictionary:xn})},qr=function(z){return z.foo=function(){try{return z.apply(this,arguments)}catch(lt){var we=lt.stack||"";~we.indexOf(" at ")&&(we=we.split(" at ")[1]);var We="Error in function "+we.split(`
`)[0].split("<")[0]+": "+lt.message;if(!Lr.console)throw new Error(We);Lr.console.error(We,lt),Lr.alert&&alert(We)}},z.foo.bar=z,z.foo},Wa=function(z,we){var We,lt,xt,Ft,on,Mn,In,Jn,lr;if(xt=(we=we||{}).sourceEncoding||"Unicode",on=we.outputEncoding,(we.autoencode||on)&&bn[it].metadata&&bn[it].metadata[xt]&&bn[it].metadata[xt].encoding&&(Ft=bn[it].metadata[xt].encoding,!on&&bn[it].encoding&&(on=bn[it].encoding),!on&&Ft.codePages&&(on=Ft.codePages[0]),typeof on=="string"&&(on=Ft[on]),on)){for(In=!1,Mn=[],We=0,lt=z.length;We<lt;We++)(Jn=on[z.charCodeAt(We)])?Mn.push(String.fromCharCode(Jn)):Mn.push(z[We]),Mn[We].charCodeAt(0)>>8&&(In=!0);z=Mn.join("")}for(We=z.length;In===void 0&&We!==0;)z.charCodeAt(We-1)>>8&&(In=!0),We--;if(!In)return z;for(Mn=we.noBOM?[]:[254,255],We=0,lt=z.length;We<lt;We++){if((lr=(Jn=z.charCodeAt(We))>>8)>>8)throw new Error("Character at position "+We+" of string '"+z+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Mn.push(lr),Mn.push(Jn-(lr<<8))}return String.fromCharCode.apply(void 0,Mn)},Cs=m.__private__.pdfEscape=m.pdfEscape=function(z,we){return Wa(z,we).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ss=m.__private__.beginPage=function(z){Ne[++ur]=[],Rn[ur]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(z[0]),topRightY:Number(z[1])}},ma(ur),de(Ne[te])},Vu=function(z,we){var We,lt,xt;switch(n=we||n,typeof z=="string"&&(We=N(z.toLowerCase()),Array.isArray(We)&&(lt=We[0],xt=We[1])),Array.isArray(z)&&(lt=z[0]*et,xt=z[1]*et),isNaN(lt)&&(lt=i[0],xt=i[1]),(lt>14400||xt>14400)&&(qi.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),lt=Math.min(14400,lt),xt=Math.min(14400,xt)),i=[lt,xt],n.substr(0,1)){case"l":xt>lt&&(i=[xt,lt]);break;case"p":lt>xt&&(i=[xt,lt])}Ss(i),Xl(_u),re(Si),eu!==0&&re(eu+" J"),ti!==0&&re(ti+" j"),Cr.publish("addPage",{pageNumber:ur})},vl=function(z){z>0&&z<=ur&&(Ne.splice(z,1),Rn.splice(z,1),ur--,te>ur&&(te=ur),this.setPage(te))},ma=function(z){z>0&&z<=ur&&(te=z)},Di=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return Ne.length-1},Fo=function(z,we,We){var lt,xt=void 0;return We=We||{},z=z!==void 0?z:bn[it].fontName,we=we!==void 0?we:bn[it].fontStyle,lt=z.toLowerCase(),xn[lt]!==void 0&&xn[lt][we]!==void 0?xt=xn[lt][we]:xn[z]!==void 0&&xn[z][we]!==void 0?xt=xn[z][we]:We.disableWarning===!1&&qi.warn("Unable to look up font label for font '"+z+"', '"+we+"'. Refer to getFontList() for available fonts."),xt||We.noFallback||(xt=xn.times[we])==null&&(xt=xn.times.normal),xt},qa=m.__private__.putInfo=function(){var z=_n(),we=function(lt){return lt};for(var We in f!==null&&(we=os.encryptor(z,0)),re("<<"),re("/Producer ("+Cs(we("jsPDF "+xr.version))+")"),Ze)Ze.hasOwnProperty(We)&&Ze[We]&&re("/"+We.substr(0,1).toUpperCase()+We.substr(1)+" ("+Cs(we(Ze[We]))+")");re("/CreationDate ("+Cs(we(Y))+")"),re(">>"),re("endobj")},wo=m.__private__.putCatalog=function(z){var we=(z=z||{}).rootDictionaryObjId||Lt;switch(_n(),re("<<"),re("/Type /Catalog"),re("/Pages "+we+" 0 R"),ut||(ut="fullwidth"),ut){case"fullwidth":re("/OpenAction [3 0 R /FitH null]");break;case"fullheight":re("/OpenAction [3 0 R /FitV null]");break;case"fullpage":re("/OpenAction [3 0 R /Fit]");break;case"original":re("/OpenAction [3 0 R /XYZ null null 1]");break;default:var We=""+ut;We.substr(We.length-1)==="%"&&(ut=parseInt(ut)/100),typeof ut=="number"&&re("/OpenAction [3 0 R /XYZ null null "+q(ut)+"]")}switch(ln||(ln="continuous"),ln){case"continuous":re("/PageLayout /OneColumn");break;case"single":re("/PageLayout /SinglePage");break;case"two":case"twoleft":re("/PageLayout /TwoColumnLeft");break;case"tworight":re("/PageLayout /TwoColumnRight")}Rt&&re("/PageMode /"+Rt),Cr.publish("putCatalog"),re(">>"),re("endobj")},yu=m.__private__.putTrailer=function(){re("trailer"),re("<<"),re("/Size "+(ve+1)),re("/Root "+ve+" 0 R"),re("/Info "+(ve-1)+" 0 R"),f!==null&&re("/Encrypt "+os.oid+" 0 R"),re("/ID [ <"+k+"> <"+k+"> ]"),re(">>")},Ya=m.__private__.putHeader=function(){re("%PDF-"+C),re("%")},Hu=m.__private__.putXRef=function(){var z="0000000000";re("xref"),re("0 "+(ve+1)),re("0000000000 65535 f ");for(var we=1;we<=ve;we++)typeof ye[we]=="function"?re((z+ye[we]()).slice(-10)+" 00000 n "):ye[we]!==void 0?re((z+ye[we]).slice(-10)+" 00000 n "):re("0000000000 00000 n ")},jo=m.__private__.buildDocument=function(){ae(),de(pe),Cr.publish("buildDocument"),Ya(),sr(),ga(),Ga(),f!==null&&ml(),qa(),wo();var z=fe;return Hu(),yu(),re("startxref"),re(""+z),re("%%EOF"),de(Ne[te]),pe.join(`
`)},va=m.__private__.getBlob=function(z){return new Blob([Ge(z)],{type:"application/pdf"})},Ka=m.output=m.__private__.output=qr(function(z,we){switch(typeof(we=we||{})=="string"?we={filename:we}:we.filename=we.filename||"generated.pdf",z){case void 0:return jo();case"save":m.save(we.filename);break;case"arraybuffer":return Ge(jo());case"blob":return va(jo());case"bloburi":case"bloburl":if(Lr.URL!==void 0&&typeof Lr.URL.createObjectURL=="function")return Lr.URL&&Lr.URL.createObjectURL(va(jo()))||void 0;qi.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var We="",lt=jo();try{We=db(lt)}catch{We=db(unescape(encodeURIComponent(lt)))}return"data:application/pdf;filename="+we.filename+";base64,"+We;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Lr)==="[object Window]"){var xt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ft=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';we.pdfObjectUrl&&(xt=we.pdfObjectUrl,Ft="");var on='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+xt+'"'+Ft+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(we)+");<\/script></body></html>",Mn=Lr.open();return Mn!==null&&Mn.document.write(on),Mn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Lr)==="[object Window]"){var In='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(we.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+we.filename+'" width="500px" height="400px" /></body></html>',Jn=Lr.open();if(Jn!==null){Jn.document.write(In);var lr=this;Jn.document.documentElement.querySelector("#pdfViewer").onload=function(){Jn.document.title=we.filename,Jn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(lr.output("bloburl"))}}return Jn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Lr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Er='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",we)+'"></iframe></body></html>',wi=Lr.open();if(wi!==null&&(wi.document.write(Er),wi.document.title=we.filename),wi||typeof safari>"u")return wi;break;case"datauri":case"dataurl":return Lr.document.location.href=this.output("datauristring",we);default:return null}}),Yl=function(z){return Array.isArray(Ki)===!0&&Ki.indexOf(z)>-1};switch(r){case"pt":et=1;break;case"mm":et=72/25.4;break;case"cm":et=72/2.54;break;case"in":et=72;break;case"px":et=Yl("px_scaling")==1?.75:96/72;break;case"pc":case"em":et=12;break;case"ex":et=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);et=r}var os=null;Ie(),H();var Lc=function(z){return f!==null?os.encryptor(z,0):function(we){return we}},bu=m.__private__.getPageInfo=m.getPageInfo=function(z){if(isNaN(z)||z%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Rn[z].objId,pageNumber:z,pageContext:Rn[z]}},cr=m.__private__.getPageInfoByObjId=function(z){if(isNaN(z)||z%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var we in Rn)if(Rn[we].objId===z)break;return bu(we)},vr=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Rn[te].objId,pageNumber:te,pageContext:Rn[te]}};m.addPage=function(){return Vu.apply(this,arguments),this},m.setPage=function(){return ma.apply(this,arguments),de.call(this,Ne[te]),this},m.insertPage=function(z){return this.addPage(),this.movePage(te,z),this},m.movePage=function(z,we){var We,lt;if(z>we){We=Ne[z],lt=Rn[z];for(var xt=z;xt>we;xt--)Ne[xt]=Ne[xt-1],Rn[xt]=Rn[xt-1];Ne[we]=We,Rn[we]=lt,this.setPage(we)}else if(z<we){We=Ne[z],lt=Rn[z];for(var Ft=z;Ft<we;Ft++)Ne[Ft]=Ne[Ft+1],Rn[Ft]=Rn[Ft+1];Ne[we]=We,Rn[we]=lt,this.setPage(we)}return this},m.deletePage=function(){return vl.apply(this,arguments),this},m.__private__.text=m.text=function(z,we,We,lt,xt){var Ft,on,Mn,In,Jn,lr,Er,wi,Zr,ri=(lt=lt||{}).scope||this;if(typeof z=="number"&&typeof we=="number"&&(typeof We=="string"||Array.isArray(We))){var Vi=We;We=we,we=z,z=Vi}if(arguments[3]instanceof Gn?(O("The transform parameter of text() with a Matrix value"),Zr=xt):(Mn=arguments[4],In=arguments[5],Ri(Er=arguments[3])==="object"&&Er!==null||(typeof Mn=="string"&&(In=Mn,Mn=null),typeof Er=="string"&&(In=Er,Er=null),typeof Er=="number"&&(Mn=Er,Er=null),lt={flags:Er,angle:Mn,align:In})),isNaN(we)||isNaN(We)||z==null)throw new Error("Invalid arguments passed to jsPDF.text");if(z.length===0)return ri;var Zi="",Lo=!1,Pr=typeof lt.lineHeightFactor=="number"?lt.lineHeightFactor:Zl,Es=ri.internal.scaleFactor;function Cl(si){return si=si.split("	").join(Array(lt.TabLen||9).join(" ")),Cs(si,Er)}function $s(si){for(var hi,Hi=si.concat(),vi=[],Eo=Hi.length;Eo--;)typeof(hi=Hi.shift())=="string"?vi.push(hi):Array.isArray(si)&&(hi.length===1||hi[1]===void 0&&hi[2]===void 0)?vi.push(hi[0]):vi.push([hi[0],hi[1],hi[2]]);return vi}function Lu(si,hi){var Hi;if(typeof si=="string")Hi=hi(si)[0];else if(Array.isArray(si)){for(var vi,Eo,io=si.concat(),To=[],Yu=io.length;Yu--;)typeof(vi=io.shift())=="string"?To.push(hi(vi)[0]):Array.isArray(vi)&&typeof vi[0]=="string"&&(Eo=hi(vi[0],vi[1],vi[2]),To.push([Eo[0],Eo[1],Eo[2]]));Hi=To}return Hi}var ta=!1,qu=!0;if(typeof z=="string")ta=!0;else if(Array.isArray(z)){var Ja=z.concat();on=[];for(var Qa,Xi=Ja.length;Xi--;)(typeof(Qa=Ja.shift())!="string"||Array.isArray(Qa)&&typeof Qa[0]!="string")&&(qu=!1);ta=qu}if(ta===!1)throw new Error('Type of text must be string or Array. "'+z+'" is not recognized.');typeof z=="string"&&(z=z.match(/[\r?\n]/)?z.split(/\r\n|\r|\n/g):[z]);var na=at/ri.internal.scaleFactor,Co=na*(Pr-1);switch(lt.baseline){case"bottom":We-=Co;break;case"top":We+=na-Co;break;case"hanging":We+=na-2*Co;break;case"middle":We+=na/2-Co}if((lr=lt.maxWidth||0)>0&&(typeof z=="string"?z=ri.splitTextToSize(z,lr):Object.prototype.toString.call(z)==="[object Array]"&&(z=z.reduce(function(si,hi){return si.concat(ri.splitTextToSize(hi,lr))},[]))),Ft={text:z,x:we,y:We,options:lt,mutex:{pdfEscape:Cs,activeFontKey:it,fonts:bn,activeFontSize:at}},Cr.publish("preProcessText",Ft),z=Ft.text,Mn=(lt=Ft.options).angle,!(Zr instanceof Gn)&&Mn&&typeof Mn=="number"){Mn*=Math.PI/180,lt.rotationDirection===0&&(Mn=-Mn),j===T.ADVANCED&&(Mn=-Mn);var ro=Math.cos(Mn),Sl=Math.sin(Mn);Zr=new Gn(ro,Sl,-Sl,ro,0,0)}else Mn&&Mn instanceof Gn&&(Zr=Mn);j!==T.ADVANCED||Zr||(Zr=Je),(Jn=lt.charSpace||Ql)!==void 0&&(Zi+=he(R(Jn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(wi=lt.horizontalScale)!==void 0&&(Zi+=he(100*wi)+` Tz
`),lt.lang;var Ps=-1,Vs=lt.renderingMode!==void 0?lt.renderingMode:lt.stroke,Hs=ri.internal.getCurrentPageInfo().pageContext;switch(Vs){case 0:case!1:case"fill":Ps=0;break;case 1:case!0:case"stroke":Ps=1;break;case 2:case"fillThenStroke":Ps=2;break;case 3:case"invisible":Ps=3;break;case 4:case"fillAndAddForClipping":Ps=4;break;case 5:case"strokeAndAddPathForClipping":Ps=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ps=6;break;case 7:case"addToPathForClipping":Ps=7}var Ec=Hs.usedRenderingMode!==void 0?Hs.usedRenderingMode:-1;Ps!==-1?Zi+=Ps+` Tr
`:Ec!==-1&&(Zi+=`0 Tr
`),Ps!==-1&&(Hs.usedRenderingMode=Ps),In=lt.align||"left";var as,_a=at*Pr,ks=ri.internal.pageSize.getWidth(),Ms=bn[it];Jn=lt.charSpace||Ql,lr=lt.maxWidth||0,Er=Object.assign({autoencode:!0,noBOM:!0},lt.flags);var wa=[],xa=function(si){return ri.getStringUnitWidth(si,{font:Ms,charSpace:Jn,fontSize:at,doKerning:!1})*at/Es};if(Object.prototype.toString.call(z)==="[object Array]"){var As;on=$s(z),In!=="left"&&(as=on.map(xa));var ds,ra=0;if(In==="right"){we-=as[0],z=[],Xi=on.length;for(var So=0;So<Xi;So++)So===0?(ds=er(we),As=Ui(We)):(ds=R(ra-as[So]),As=-_a),z.push([on[So],ds,As]),ra=as[So]}else if(In==="center"){we-=as[0]/2,z=[],Xi=on.length;for(var Ts=0;Ts<Xi;Ts++)Ts===0?(ds=er(we),As=Ui(We)):(ds=R((ra-as[Ts])/2),As=-_a),z.push([on[Ts],ds,As]),ra=as[Ts]}else if(In==="left"){z=[],Xi=on.length;for(var yt=0;yt<Xi;yt++)z.push(on[yt])}else if(In==="justify"&&Ms.encoding==="Identity-H"){z=[],Xi=on.length,lr=lr!==0?lr:ks;for(var Vt=0,kt=0;kt<Xi;kt++)if(As=kt===0?Ui(We):-_a,ds=kt===0?er(we):Vt,kt<Xi-1){var Pn=R((lr-as[kt])/(on[kt].split(" ").length-1)),Un=on[kt].split(" ");z.push([Un[0]+" ",ds,As]),Vt=0;for(var hr=1;hr<Un.length;hr++){var Ei=(xa(Un[hr-1]+" "+Un[hr])-xa(Un[hr]))*Es+Pn;hr==Un.length-1?z.push([Un[hr],Ei,0]):z.push([Un[hr]+" ",Ei,0]),Vt-=Ei}}else z.push([on[kt],ds,As]);z.push(["",Vt,0])}else{if(In!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(z=[],Xi=on.length,lr=lr!==0?lr:ks,kt=0;kt<Xi;kt++)As=kt===0?Ui(We):-_a,ds=kt===0?er(we):0,kt<Xi-1?wa.push(he(R((lr-as[kt])/(on[kt].split(" ").length-1)))):wa.push(0),z.push([on[kt],ds,As])}}var ii=typeof lt.R2L=="boolean"?lt.R2L:$t;ii===!0&&(z=Lu(z,function(si,hi,Hi){return[si.split("").reverse().join(""),hi,Hi]})),Ft={text:z,x:we,y:We,options:lt,mutex:{pdfEscape:Cs,activeFontKey:it,fonts:bn,activeFontSize:at}},Cr.publish("postProcessText",Ft),z=Ft.text,Lo=Ft.mutex.isHex||!1;var nu=bn[it].encoding;nu!=="WinAnsiEncoding"&&nu!=="StandardEncoding"||(z=Lu(z,function(si,hi,Hi){return[Cl(si),hi,Hi]})),on=$s(z),z=[];for(var Gs,Pi,ia,La=0,sa=1,oa=Array.isArray(on[0])?sa:La,aa="",Nr=function(si,hi,Hi){var vi="";return Hi instanceof Gn?(Hi=typeof lt.angle=="number"?Ot(Hi,new Gn(1,0,0,1,si,hi)):Ot(new Gn(1,0,0,1,si,hi),Hi),j===T.ADVANCED&&(Hi=Ot(new Gn(1,0,0,-1,0,0),Hi)),vi=Hi.join(" ")+` Tm
`):vi=he(si)+" "+he(hi)+` Td
`,vi},Ho=0;Ho<on.length;Ho++){switch(aa="",oa){case sa:ia=(Lo?"<":"(")+on[Ho][0]+(Lo?">":")"),Gs=parseFloat(on[Ho][1]),Pi=parseFloat(on[Ho][2]);break;case La:ia=(Lo?"<":"(")+on[Ho]+(Lo?">":")"),Gs=er(we),Pi=Ui(We)}wa!==void 0&&wa[Ho]!==void 0&&(aa=wa[Ho]+` Tw
`),Ho===0?z.push(aa+Nr(Gs,Pi,Zr)+ia):oa===La?z.push(aa+ia):oa===sa&&z.push(aa+Nr(Gs,Pi,Zr)+ia)}z=oa===La?z.join(` Tj
T* `):z.join(` Tj
`),z+=` Tj
`;var ps=`BT
/`;return ps+=it+" "+at+` Tf
`,ps+=he(at*Pr)+` TL
`,ps+=ea+`
`,ps+=Zi,ps+=z,re(ps+="ET"),v[it]=!0,ri};var zo=m.__private__.clip=m.clip=function(z){return re(z==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return zo("evenodd")},m.__private__.discardPath=m.discardPath=function(){return re("n"),this};var $r=m.__private__.isValidStyle=function(z){var we=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(z)!==-1&&(we=!0),we};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(z){return $r(z)&&(c=z),this};var Gu=m.__private__.getStyle=m.getStyle=function(z){var we=c;switch(z){case"D":case"S":we="S";break;case"F":we="f";break;case"FD":case"DF":we="B";break;case"f":case"f*":case"B":case"B*":we=z}return we},yl=m.close=function(){return re("h"),this};m.stroke=function(){return re("S"),this},m.fill=function(z){return bl("f",z),this},m.fillEvenOdd=function(z){return bl("f*",z),this},m.fillStroke=function(z){return bl("B",z),this},m.fillStrokeEvenOdd=function(z){return bl("B*",z),this};var bl=function(z,we){Ri(we)==="object"?Wu(we,z):re(z)},Uo=function(z){z===null||j===T.ADVANCED&&z===void 0||(z=Gu(z),re(z))};function Za(z,we,We,lt,xt){var Ft=new np(we||this.boundingBox,We||this.xStep,lt||this.yStep,this.gState,xt||this.matrix);Ft.stream=this.stream;var on=z+"$$"+this.cloneIndex+++"$$";return Ut(on,Ft),Ft}var Wu=function(z,we){var We=tn[z.key],lt=vn[We];if(lt instanceof Xf)re("q"),re(Kl(we)),lt.gState&&m.setGState(lt.gState),re(z.matrix.toString()+" cm"),re("/"+We+" sh"),re("Q");else if(lt instanceof np){var xt=new Gn(1,0,0,-1,0,ba());z.matrix&&(xt=xt.multiply(z.matrix||Je),We=Za.call(lt,z.key,z.boundingBox,z.xStep,z.yStep,xt).id),re("q"),re("/Pattern cs"),re("/"+We+" scn"),lt.gState&&m.setGState(lt.gState),re(we),re("Q")}},Kl=function(z){switch(z){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},dr=m.moveTo=function(z,we){return re(he(R(z))+" "+he(Z(we))+" m"),this},Ar=m.lineTo=function(z,we){return re(he(R(z))+" "+he(Z(we))+" l"),this},Xa=m.curveTo=function(z,we,We,lt,xt,Ft){return re([he(R(z)),he(Z(we)),he(R(We)),he(Z(lt)),he(R(xt)),he(Z(Ft)),"c"].join(" ")),this};m.__private__.line=m.line=function(z,we,We,lt,xt){if(isNaN(z)||isNaN(we)||isNaN(We)||isNaN(lt)||!$r(xt))throw new Error("Invalid arguments passed to jsPDF.line");return j===T.COMPAT?this.lines([[We-z,lt-we]],z,we,[1,1],xt||"S"):this.lines([[We-z,lt-we]],z,we,[1,1]).stroke()},m.__private__.lines=m.lines=function(z,we,We,lt,xt,Ft){var on,Mn,In,Jn,lr,Er,wi,Zr,ri,Vi,Zi,Lo;if(typeof z=="number"&&(Lo=We,We=we,we=z,z=Lo),lt=lt||[1,1],Ft=Ft||!1,isNaN(we)||isNaN(We)||!Array.isArray(z)||!Array.isArray(lt)||!$r(xt)||typeof Ft!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(dr(we,We),on=lt[0],Mn=lt[1],Jn=z.length,Vi=we,Zi=We,In=0;In<Jn;In++)(lr=z[In]).length===2?(Vi=lr[0]*on+Vi,Zi=lr[1]*Mn+Zi,Ar(Vi,Zi)):(Er=lr[0]*on+Vi,wi=lr[1]*Mn+Zi,Zr=lr[2]*on+Vi,ri=lr[3]*Mn+Zi,Vi=lr[4]*on+Vi,Zi=lr[5]*Mn+Zi,Xa(Er,wi,Zr,ri,Vi,Zi));return Ft&&yl(),Uo(xt),this},m.path=function(z){for(var we=0;we<z.length;we++){var We=z[we],lt=We.c;switch(We.op){case"m":dr(lt[0],lt[1]);break;case"l":Ar(lt[0],lt[1]);break;case"c":Xa.apply(this,lt);break;case"h":yl()}}return this},m.__private__.rect=m.rect=function(z,we,We,lt,xt){if(isNaN(z)||isNaN(we)||isNaN(We)||isNaN(lt)||!$r(xt))throw new Error("Invalid arguments passed to jsPDF.rect");return j===T.COMPAT&&(lt=-lt),re([he(R(z)),he(Z(we)),he(R(We)),he(R(lt)),"re"].join(" ")),Uo(xt),this},m.__private__.triangle=m.triangle=function(z,we,We,lt,xt,Ft,on){if(isNaN(z)||isNaN(we)||isNaN(We)||isNaN(lt)||isNaN(xt)||isNaN(Ft)||!$r(on))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[We-z,lt-we],[xt-We,Ft-lt],[z-xt,we-Ft]],z,we,[1,1],on,!0),this},m.__private__.roundedRect=m.roundedRect=function(z,we,We,lt,xt,Ft,on){if(isNaN(z)||isNaN(we)||isNaN(We)||isNaN(lt)||isNaN(xt)||isNaN(Ft)||!$r(on))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Mn=4/3*(Math.SQRT2-1);return xt=Math.min(xt,.5*We),Ft=Math.min(Ft,.5*lt),this.lines([[We-2*xt,0],[xt*Mn,0,xt,Ft-Ft*Mn,xt,Ft],[0,lt-2*Ft],[0,Ft*Mn,-xt*Mn,Ft,-xt,Ft],[2*xt-We,0],[-xt*Mn,0,-xt,-Ft*Mn,-xt,-Ft],[0,2*Ft-lt],[0,-Ft*Mn,xt*Mn,-Ft,xt,-Ft]],z+xt,we,[1,1],on,!0),this},m.__private__.ellipse=m.ellipse=function(z,we,We,lt,xt){if(isNaN(z)||isNaN(we)||isNaN(We)||isNaN(lt)||!$r(xt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ft=4/3*(Math.SQRT2-1)*We,on=4/3*(Math.SQRT2-1)*lt;return dr(z+We,we),Xa(z+We,we-on,z+Ft,we-lt,z,we-lt),Xa(z-Ft,we-lt,z-We,we-on,z-We,we),Xa(z-We,we+on,z-Ft,we+lt,z,we+lt),Xa(z+Ft,we+lt,z+We,we+on,z+We,we),Uo(xt),this},m.__private__.circle=m.circle=function(z,we,We,lt){if(isNaN(z)||isNaN(we)||isNaN(We)||!$r(lt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(z,we,We,We,lt)},m.setFont=function(z,we,We){return We&&(we=ce(we,We)),it=Fo(z,we,{disableWarning:!1}),this};var Cc=m.__private__.getFont=m.getFont=function(){return bn[Fo.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var z,we,We={};for(z in xn)if(xn.hasOwnProperty(z))for(we in We[z]=[],xn[z])xn[z].hasOwnProperty(we)&&We[z].push(we);return We},m.addFont=function(z,we,We,lt,xt){var Ft=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ft.indexOf(arguments[3])!==-1?xt=arguments[3]:arguments[3]&&Ft.indexOf(arguments[3])==-1&&(We=ce(We,lt)),xt=xt||"Identity-H",ql.call(this,z,we,We,xt)};var Zl,_u=t.lineWidth||.200025,_l=m.__private__.getLineWidth=m.getLineWidth=function(){return _u},Xl=m.__private__.setLineWidth=m.setLineWidth=function(z){return _u=z,re(he(R(z))+" w"),this};m.__private__.setLineDash=xr.API.setLineDash=xr.API.setLineDashPattern=function(z,we){if(z=z||[],we=we||0,isNaN(we)||!Array.isArray(z))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return z=z.map(function(We){return he(R(We))}).join(" "),we=he(R(we)),re("["+z+"] "+we+" d"),this};var wu=m.__private__.getLineHeight=m.getLineHeight=function(){return at*Zl};m.__private__.getLineHeight=m.getLineHeight=function(){return at*Zl};var Ir=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(z){return typeof(z=z||1.15)=="number"&&(Zl=z),this},zi=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return Zl};Ir(t.lineHeight);var er=m.__private__.getHorizontalCoordinate=function(z){return R(z)},Ui=m.__private__.getVerticalCoordinate=function(z){return j===T.ADVANCED?z:Rn[te].mediaBox.topRightY-Rn[te].mediaBox.bottomLeftY-R(z)},wl=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(z){return he(er(z))},ya=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(z){return he(Ui(z))},Si=t.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Ln(Si)},m.__private__.setStrokeColor=m.setDrawColor=function(z,we,We,lt){return Si=On({ch1:z,ch2:we,ch3:We,ch4:lt,pdfColorType:"draw",precision:2}),re(Si),this};var xu=t.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Ln(xu)},m.__private__.setFillColor=m.setFillColor=function(z,we,We,lt){return xu=On({ch1:z,ch2:we,ch3:We,ch4:lt,pdfColorType:"fill",precision:2}),re(xu),this};var ea=t.textColor||"0 g",Jl=m.__private__.getTextColor=m.getTextColor=function(){return Ln(ea)};m.__private__.setTextColor=m.setTextColor=function(z,we,We,lt){return ea=On({ch1:z,ch2:we,ch3:We,ch4:lt,pdfColorType:"text",precision:3}),this};var Ql=t.charSpace,Ao=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(Ql||0)};m.__private__.setCharSpace=m.setCharSpace=function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ql=z,this};var eu=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(z){var we=m.CapJoinStyles[z];if(we===void 0)throw new Error("Line cap style of '"+z+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return eu=we,re(we+" J"),this};var ti=0;m.__private__.setLineJoin=m.setLineJoin=function(z){var we=m.CapJoinStyles[z];if(we===void 0)throw new Error("Line join style of '"+z+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ti=we,re(we+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(z){if(z=z||0,isNaN(z))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return re(he(R(z))+" M"),this},m.GState=Rv,m.setGState=function(z){(z=typeof z=="string"?un[Xn[z]]:Sc(null,z)).equals(nr)||(re("/"+z.id+" gs"),nr=z)};var Sc=function(z,we){if(!z||!Xn[z]){var We=!1;for(var lt in un)if(un.hasOwnProperty(lt)&&un[lt].equals(we)){We=!0;break}if(We)we=un[lt];else{var xt="GS"+(Object.keys(un).length+1).toString(10);un[xt]=we,we.id=xt}return z&&(Xn[z]=we.id),Cr.publish("addGState",we),we}};m.addGState=function(z,we){return Sc(z,we),this},m.saveGraphicsState=function(){return re("q"),zn.push({key:it,size:at,color:ea}),this},m.restoreGraphicsState=function(){re("Q");var z=zn.pop();return it=z.key,at=z.size,ea=z.color,nr=null,this},m.setCurrentTransformationMatrix=function(z){return re(z.toString()+" cm"),this},m.comment=function(z){return re("#"+z),this};var fs=function(z,we){var We=z||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return We},set:function(Ft){isNaN(Ft)||(We=parseFloat(Ft))}});var lt=we||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return lt},set:function(Ft){isNaN(Ft)||(lt=parseFloat(Ft))}});var xt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return xt},set:function(Ft){xt=Ft.toString()}}),this},$o=function(z,we,We,lt){fs.call(this,z,we),this.type="rect";var xt=We||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return xt},set:function(on){isNaN(on)||(xt=parseFloat(on))}});var Ft=lt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ft},set:function(on){isNaN(on)||(Ft=parseFloat(on))}}),this},tu=function(){this.page=ur,this.currentPage=te,this.pages=Ne.slice(0),this.pagesContext=Rn.slice(0),this.x=Bt,this.y=Zt,this.matrix=Sn,this.width=ni(te),this.height=ba(te),this.outputDestination=le,this.id="",this.objectNumber=-1};tu.prototype.restore=function(){ur=this.page,te=this.currentPage,Rn=this.pagesContext,Ne=this.pages,Bt=this.x,Zt=this.y,Sn=this.matrix,xo(te,this.width),$i(te,this.height),le=this.outputDestination};var Vo=function(z,we,We,lt,xt){ss.push(new tu),ur=te=0,Ne=[],Bt=z,Zt=we,Sn=xt,Ss([We,lt])},xl=function(z){if(Us[z])ss.pop().restore();else{var we=new tu,We="Xo"+(Object.keys(Ci).length+1).toString(10);we.id=We,Us[z]=We,Ci[We]=we,Cr.publish("addFormObject",we),ss.pop().restore()}};for(var Ll in m.beginFormObject=function(z,we,We,lt,xt){return Vo(z,we,We,lt,xt),this},m.endFormObject=function(z){return xl(z),this},m.doFormObject=function(z,we){var We=Ci[Us[z]];return re("q"),re(we.toString()+" cm"),re("/"+We.id+" Do"),re("Q"),this},m.getFormObject=function(z){var we=Ci[Us[z]];return{x:we.x,y:we.y,width:we.width,height:we.height,matrix:we.matrix}},m.save=function(z,we){return z=z||"generated.pdf",(we=we||{}).returnPromise=we.returnPromise||!1,we.returnPromise===!1?(Wf(va(jo()),z),typeof Wf.unload=="function"&&Lr.setTimeout&&setTimeout(Wf.unload,911),this):new Promise(function(We,lt){try{var xt=Wf(va(jo()),z);typeof Wf.unload=="function"&&Lr.setTimeout&&setTimeout(Wf.unload,911),We(xt)}catch(Ft){lt(Ft.message)}})},xr.API)xr.API.hasOwnProperty(Ll)&&(Ll==="events"&&xr.API.events.length?function(z,we){var We,lt,xt;for(xt=we.length-1;xt!==-1;xt--)We=we[xt][0],lt=we[xt][1],z.subscribe.apply(z,[We].concat(typeof lt=="function"?[lt]:lt))}(Cr,xr.API.events):m[Ll]=xr.API[Ll]);var ni=m.getPageWidth=function(z){return(Rn[z=z||te].mediaBox.topRightX-Rn[z].mediaBox.bottomLeftX)/et},xo=m.setPageWidth=function(z,we){Rn[z].mediaBox.topRightX=we*et+Rn[z].mediaBox.bottomLeftX},ba=m.getPageHeight=function(z){return(Rn[z=z||te].mediaBox.topRightY-Rn[z].mediaBox.bottomLeftY)/et},$i=m.setPageHeight=function(z,we){Rn[z].mediaBox.topRightY=we*et+Rn[z].mediaBox.bottomLeftY};return m.internal={pdfEscape:Cs,getStyle:Gu,getFont:Cc,getFontSize:gt,getCharSpace:Ao,getTextColor:Jl,getLineHeight:wu,getLineHeightFactor:zi,getLineWidth:_l,write:Ae,getHorizontalCoordinate:er,getVerticalCoordinate:Ui,getCoordinateString:wl,getVerticalCoordinateString:ya,collections:{},newObject:_n,newAdditionalObject:Wt,newObjectDeferred:Xt,newObjectDeferredBegin:Fn,getFilters:Wn,putStream:ar,events:Cr,scaleFactor:et,pageSize:{getWidth:function(){return ni(te)},setWidth:function(z){xo(te,z)},getHeight:function(){return ba(te)},setHeight:function(z){$i(te,z)}},encryptionOptions:f,encryption:os,getEncryptor:Lc,output:Ka,getNumberOfPages:Di,pages:Ne,out:re,f2:q,f3:F,getPageInfo:bu,getPageInfoByObjId:cr,getCurrentPageInfo:vr,getPDFVersion:S,Point:fs,Rectangle:$o,Matrix:Gn,hasHotfix:Yl},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return ni(te)},set:function(z){xo(te,z)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return ba(te)},set:function(z){$i(te,z)},enumerable:!0,configurable:!0}),mr.call(m,tt),it="F1",Vu(i,n),Cr.publish("initialized"),m}Jd.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Jd.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Jd.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Jd.prototype.processOwnerPassword=function(t,e){return gb(pb(e).substr(0,5),t)},Jd.prototype.encryptor=function(t,e){var n=pb(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return gb(n,r)}},Rv.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Ri(t)!==Ri(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},xr.API={events:[]},xr.version="2.5.2";var Zs=xr.API,T_=1,md=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},zd=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Or=function(t){return t.toFixed(2)},Yh=function(t){return t.toFixed(5)};Zs.__acroform__={};var Wl=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},h5=function(t){return t*T_},Ic=function(t){var e=new DE,n=$n.internal.getHeight(t)||0,r=$n.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Or(r)),Number(Or(n))],e},rV=Zs.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},iV=Zs.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},sV=Zs.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},fo=Zs.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return sV(t,e-1)},po=Zs.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return rV(t,e-1)},go=Zs.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return iV(t,e-1)},oV=Zs.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(Or(l.lowerLeft_X)),Number(Or(l.lowerLeft_Y)),Number(Or(l.upperRight_X)),Number(Or(l.upperRight_Y))]},aV=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=mb(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Or(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Ic(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},mb=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(F){return F.split(`
`)}):i.map(function(F){return[F]});var s=n,o=$n.internal.getHeight(t)||0;o=o<0?-o:o;var a=$n.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(F,R,K){if(F+1<i.length){var Z=R+" "+i[F+1][0];return gm(Z,t,K).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var c,f,p=gm("3",t,s).height,v=t.multiline?o-s:(o-p)/2,m=v+=2,C=0,S=0,I=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+gm(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var N="",T=0,j=0;j<i.length;j++)if(i.hasOwnProperty(j)){var W=!1;if(i[j].length!==1&&I!==i[j].length-1){if((p+2)*(T+2)+2>o)continue e;N+=i[j][I],W=!0,S=j,j--}else{N=(N+=i[j][I]+" ").substr(N.length-1)==" "?N.substr(0,N.length-1):N;var X=parseInt(j),ce=l(X,N,s),he=j>=i.length-1;if(ce&&!he){N+=" ",I=0;continue}if(ce||he){if(he)S=X;else if(t.multiline&&(p+2)*(T+2)+2>o)continue e}else{if(!t.multiline||(p+2)*(T+2)+2>o)continue e;S=X}}for(var O="",B=C;B<=S;B++){var q=i[B];if(t.multiline){if(B===S){O+=q[I]+" ",I=(I+1)%q.length;continue}if(B===C){O+=q[q.length-1]+" ";continue}}O+=q[0]+" "}switch(O=O.substr(O.length-1)==" "?O.substr(0,O.length-1):O,f=gm(O,t,s).width,t.textAlign){case"right":c=a-f-2;break;case"center":c=(a-f)/2;break;case"left":default:c=2}e+=Or(c)+" "+Or(m)+` Td
`,e+="("+md(O)+`) Tj
`,e+=-Or(c)+` 0 Td
`,m=-(s+2),f=0,C=W?S:S+1,T++,N=""}break}return r.text=e,r.fontSize=s,r},gm=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},lV={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},uV=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},cV=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),Ri(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},hV=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(yc.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(lV)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");T_=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new IE,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&uV(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=oV(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=$n.createDefaultAppearanceStream(a),Ri(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var f=aV(a);l.push({key:"AP",value:"<</N "+f+">>"}),i.internal.acroformPlugin.xForms.push(f)}if(a.appearanceStreamContent){var p="";for(var v in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(v)){var m=a.appearanceStreamContent[v];if(p+="/"+v+" ",p+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var C=m[o];typeof C=="function"&&(C=C.call(i,a)),p+="/"+o+" "+C+" ",i.internal.acroformPlugin.xForms.indexOf(C)>=0||i.internal.acroformPlugin.xForms.push(C)}}else typeof(C=m)=="function"&&(C=C.call(i,a)),p+="/"+o+" "+C,i.internal.acroformPlugin.xForms.indexOf(C)>=0||i.internal.acroformPlugin.xForms.push(C);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&cV(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},OE=Zs.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),Ri(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+md(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Y1=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+md(r(t))+")"},Gc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Gc.prototype.toString=function(){return this.objId+" 0 R"},Gc.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Gc.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:OE(i,this.objId,this.scope)}):i instanceof Gc?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var DE=function(){Gc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Wl(DE,Gc);var IE=function(){Gc.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+md(n(t))+")"}},set:function(n){t=n}})};Wl(IE,Gc);var yc=function t(){Gc.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute F supplied.');e=N}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!fo(e,3)},set:function(N){N?this.F=po(e,3):this.F=go(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute Ff supplied.');n=N}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(N){r=N!==void 0?N:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(N){r[0]=N}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(N){r[1]=N}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(N){r[2]=N}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(N){r[3]=N}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(N){switch(N){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=N;break;default:throw new Error('Invalid value "'+N+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Fv)return;s="FieldObject"+t.FieldNum++}var N=function(T){return T};return this.scope&&(N=this.scope.internal.getEncryptor(this.objId)),"("+md(N(s))+")"},set:function(N){s=N.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(N){s=N}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(N){o=N}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(N){a=N}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(N){l=N}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/T_:c},set:function(N){c=N}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(N){f=N}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Fv||this instanceof id))return Y1(p,this.objId,this.scope)},set:function(N){N=N.toString(),p=N}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Zo?v:Y1(v,this.objId,this.scope)},set:function(N){N=N.toString(),v=this instanceof Zo?N:N.substr(0,1)==="("?zd(N.substr(1,N.length-2)):zd(N)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Zo?zd(v.substr(1,v.length-1)):v},set:function(N){N=N.toString(),v=this instanceof Zo?"/"+N:N}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(N){this.V=N}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Zo?m:Y1(m,this.objId,this.scope)},set:function(N){N=N.toString(),m=this instanceof Zo?N:N.substr(0,1)==="("?zd(N.substr(1,N.length-2)):zd(N)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Zo?zd(m.substr(1,m.length-1)):m},set:function(N){N=N.toString(),m=this instanceof Zo?"/"+N:N}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var C,S=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return S},set:function(N){N=!!N,S=N}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(C)return C},set:function(N){C=N}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,1)},set:function(N){N?this.Ff=po(this.Ff,1):this.Ff=go(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,2)},set:function(N){N?this.Ff=po(this.Ff,2):this.Ff=go(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,3)},set:function(N){N?this.Ff=po(this.Ff,3):this.Ff=go(this.Ff,3)}});var I=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(I!==null)return I},set:function(N){if([0,1,2].indexOf(N)===-1)throw new Error('Invalid value "'+N+'" for attribute Q supplied.');I=N}}),Object.defineProperty(this,"textAlign",{get:function(){var N;switch(I){case 0:default:N="left";break;case 1:N="center";break;case 2:N="right"}return N},configurable:!0,enumerable:!0,set:function(N){switch(N){case"right":case 2:I=2;break;case"center":case 1:I=1;break;case"left":case 0:default:I=0}}})};Wl(yc,Gc);var cp=function(){yc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return OE(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,c=[];l=o.exec(s);)c.push(l[a]);return c}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,18)},set:function(n){n?this.Ff=po(this.Ff,18):this.Ff=go(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=po(this.Ff,19):this.Ff=go(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,20)},set:function(n){n?(this.Ff=po(this.Ff,20),e.sort()):this.Ff=go(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,22)},set:function(n){n?this.Ff=po(this.Ff,22):this.Ff=go(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,23)},set:function(n){n?this.Ff=po(this.Ff,23):this.Ff=go(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,27)},set:function(n){n?this.Ff=po(this.Ff,27):this.Ff=go(this.Ff,27)}}),this.hasAppearanceStream=!1};Wl(cp,yc);var hp=function(){cp.call(this),this.fontName="helvetica",this.combo=!1};Wl(hp,cp);var fp=function(){hp.call(this),this.combo=!0};Wl(fp,hp);var Xm=function(){fp.call(this),this.edit=!0};Wl(Xm,fp);var Zo=function(){yc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,15)},set:function(n){n?this.Ff=po(this.Ff,15):this.Ff=go(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,16)},set:function(n){n?this.Ff=po(this.Ff,16):this.Ff=go(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,17)},set:function(n){n?this.Ff=po(this.Ff,17):this.Ff=go(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,26)},set:function(n){n?this.Ff=po(this.Ff,26):this.Ff=go(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+md(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Ri(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Wl(Zo,yc);var Jm=function(){Zo.call(this),this.pushButton=!0};Wl(Jm,Zo);var dp=function(){Zo.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Wl(dp,Zo);var Fv=function(){var t,e;yc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+md(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Ri(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=$n.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Wl(Fv,yc),dp.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},dp.prototype.createOption=function(t){var e=new Fv;return e.Parent=this,e.optionName=t,this.Kids.push(e),fV.call(this.scope,e),e};var Qm=function(){Zo.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=$n.CheckBox.createAppearanceStream()};Wl(Qm,Zo);var id=function(){yc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,13)},set:function(e){e?this.Ff=po(this.Ff,13):this.Ff=go(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,21)},set:function(e){e?this.Ff=po(this.Ff,21):this.Ff=go(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,23)},set:function(e){e?this.Ff=po(this.Ff,23):this.Ff=go(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,24)},set:function(e){e?this.Ff=po(this.Ff,24):this.Ff=go(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,25)},set:function(e){e?this.Ff=po(this.Ff,25):this.Ff=go(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,26)},set:function(e){e?this.Ff=po(this.Ff,26):this.Ff=go(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Wl(id,yc);var ev=function(){id.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!fo(this.Ff,14)},set:function(t){t?this.Ff=po(this.Ff,14):this.Ff=go(this.Ff,14)}}),this.password=!0};Wl(ev,id);var $n={CheckBox:{createAppearanceStream:function(){return{N:{On:$n.CheckBox.YesNormal},D:{On:$n.CheckBox.YesPushDown,Off:$n.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Ic(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=mb(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Or($n.internal.getWidth(t))+" "+Or($n.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Or(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Ic(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=$n.internal.getHeight(t),o=$n.internal.getWidth(t),a=mb(t,t.caption);return i.push("1 g"),i.push("0 0 "+Or(o)+" "+Or(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Or(o-1)+" "+Or(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Or(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Ic(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Or($n.internal.getWidth(t))+" "+Or($n.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:$n.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=$n.RadioButton.Circle.YesNormal,e.D[t]=$n.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Ic(t);e.scope=t.scope;var n=[],r=$n.internal.getWidth(t)<=$n.internal.getHeight(t)?$n.internal.getWidth(t)/4:$n.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=$n.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Yh($n.internal.getWidth(t)/2)+" "+Yh($n.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Ic(t);e.scope=t.scope;var n=[],r=$n.internal.getWidth(t)<=$n.internal.getHeight(t)?$n.internal.getWidth(t)/4:$n.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*$n.internal.Bezier_C).toFixed(5)),o=Number((r*$n.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Yh($n.internal.getWidth(t)/2)+" "+Yh($n.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Yh($n.internal.getWidth(t)/2)+" "+Yh($n.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Ic(t);e.scope=t.scope;var n=[],r=$n.internal.getWidth(t)<=$n.internal.getHeight(t)?$n.internal.getWidth(t)/4:$n.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*$n.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Yh($n.internal.getWidth(t)/2)+" "+Yh($n.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:$n.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=$n.RadioButton.Cross.YesNormal,e.D[t]=$n.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Ic(t);e.scope=t.scope;var n=[],r=$n.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Or($n.internal.getWidth(t)-2)+" "+Or($n.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Or(r.x1.x)+" "+Or(r.x1.y)+" m"),n.push(Or(r.x2.x)+" "+Or(r.x2.y)+" l"),n.push(Or(r.x4.x)+" "+Or(r.x4.y)+" m"),n.push(Or(r.x3.x)+" "+Or(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Ic(t);e.scope=t.scope;var n=$n.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Or($n.internal.getWidth(t))+" "+Or($n.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Or($n.internal.getWidth(t)-2)+" "+Or($n.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Or(n.x1.x)+" "+Or(n.x1.y)+" m"),r.push(Or(n.x2.x)+" "+Or(n.x2.y)+" l"),r.push(Or(n.x4.x)+" "+Or(n.x4.y)+" m"),r.push(Or(n.x3.x)+" "+Or(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Ic(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Or($n.internal.getWidth(t))+" "+Or($n.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};$n.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=$n.internal.getWidth(t),n=$n.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},$n.internal.getWidth=function(t){var e=0;return Ri(t)==="object"&&(e=h5(t.Rect[2])),e},$n.internal.getHeight=function(t){var e=0;return Ri(t)==="object"&&(e=h5(t.Rect[3])),e};var fV=Zs.addField=function(t){if(hV(this,t),!(t instanceof yc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Zs.AcroFormChoiceField=cp,Zs.AcroFormListBox=hp,Zs.AcroFormComboBox=fp,Zs.AcroFormEditBox=Xm,Zs.AcroFormButton=Zo,Zs.AcroFormPushButton=Jm,Zs.AcroFormRadioButton=dp,Zs.AcroFormCheckBox=Qm,Zs.AcroFormTextField=id,Zs.AcroFormPasswordField=ev,Zs.AcroFormAppearance=$n,Zs.AcroForm={ChoiceField:cp,ListBox:hp,ComboBox:fp,EditBox:Xm,Button:Zo,PushButton:Jm,RadioButton:dp,CheckBox:Qm,TextField:id,PasswordField:ev,Appearance:$n},xr.AcroForm={ChoiceField:cp,ListBox:hp,ComboBox:fp,EditBox:Xm,Button:Zo,PushButton:Jm,RadioButton:dp,CheckBox:Qm,TextField:id,PasswordField:ev,Appearance:$n};xr.AcroForm;function NE(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(F,R){var K,Z,Y,k,U,H=e;if((R=R||e)==="RGBA"||F.data!==void 0&&F.data instanceof Uint8ClampedArray&&"height"in F&&"width"in F)return"RGBA";if(ce(F))for(U in n)for(Y=n[U],K=0;K<Y.length;K+=1){for(k=!0,Z=0;Z<Y[K].length;Z+=1)if(Y[K][Z]!==void 0&&Y[K][Z]!==F[Z]){k=!1;break}if(k===!0){H=U;break}}else for(U in n)for(Y=n[U],K=0;K<Y.length;K+=1){for(k=!0,Z=0;Z<Y[K].length;Z+=1)if(Y[K][Z]!==void 0&&Y[K][Z]!==F.charCodeAt(Z)){k=!1;break}if(k===!0){H=U;break}}return H===e&&R!==e&&(H=R),H},i=function F(R){for(var K=this.internal.write,Z=this.internal.putStream,Y=(0,this.internal.getFilters)();Y.indexOf("FlateEncode")!==-1;)Y.splice(Y.indexOf("FlateEncode"),1);R.objectId=this.internal.newObject();var k=[];if(k.push({key:"Type",value:"/XObject"}),k.push({key:"Subtype",value:"/Image"}),k.push({key:"Width",value:R.width}),k.push({key:"Height",value:R.height}),R.colorSpace===I.INDEXED?k.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(R.palette.length/3-1)+" "+("sMask"in R&&R.sMask!==void 0?R.objectId+2:R.objectId+1)+" 0 R]"}):(k.push({key:"ColorSpace",value:"/"+R.colorSpace}),R.colorSpace===I.DEVICE_CMYK&&k.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),k.push({key:"BitsPerComponent",value:R.bitsPerComponent}),"decodeParameters"in R&&R.decodeParameters!==void 0&&k.push({key:"DecodeParms",value:"<<"+R.decodeParameters+">>"}),"transparency"in R&&Array.isArray(R.transparency)){for(var U="",H=0,ue=R.transparency.length;H<ue;H++)U+=R.transparency[H]+" "+R.transparency[H]+" ";k.push({key:"Mask",value:"["+U+"]"})}R.sMask!==void 0&&k.push({key:"SMask",value:R.objectId+1+" 0 R"});var _e=R.filter!==void 0?["/"+R.filter]:void 0;if(Z({data:R.data,additionalKeyValues:k,alreadyAppliedFilters:_e,objectId:R.objectId}),K("endobj"),"sMask"in R&&R.sMask!==void 0){var Ie="/Predictor "+R.predictor+" /Colors 1 /BitsPerComponent "+R.bitsPerComponent+" /Columns "+R.width,ee={width:R.width,height:R.height,colorSpace:"DeviceGray",bitsPerComponent:R.bitsPerComponent,decodeParameters:Ie,data:R.sMask};"filter"in R&&(ee.filter=R.filter),F.call(this,ee)}if(R.colorSpace===I.INDEXED){var te=this.internal.newObject();Z({data:O(new Uint8Array(R.palette)),objectId:te}),K("endobj")}},s=function(){var F=this.internal.collections.addImage_images;for(var R in F)i.call(this,F[R])},o=function(){var F,R=this.internal.collections.addImage_images,K=this.internal.write;for(var Z in R)K("/I"+(F=R[Z]).index,F.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var F=this.internal.collections.addImage_images;return a.call(this),F},c=function(){return Object.keys(this.internal.collections.addImage_images).length},f=function(F){return typeof t["process"+F.toUpperCase()]=="function"},p=function(F){return Ri(F)==="object"&&F.nodeType===1},v=function(F,R){if(F.nodeName==="IMG"&&F.hasAttribute("src")){var K=""+F.getAttribute("src");if(K.indexOf("data:image/")===0)return Ng(unescape(K).split("base64,").pop());var Z=t.loadFile(K,!0);if(Z!==void 0)return Z}if(F.nodeName==="CANVAS"){if(F.width===0||F.height===0)throw new Error("Given canvas must have data. Canvas width: "+F.width+", height: "+F.height);var Y;switch(R){case"PNG":Y="image/png";break;case"WEBP":Y="image/webp";break;case"JPEG":case"JPG":default:Y="image/jpeg"}return Ng(F.toDataURL(Y,1).split("base64,").pop())}},m=function(F){var R=this.internal.collections.addImage_images;if(R){for(var K in R)if(F===R[K].alias)return R[K]}},C=function(F,R,K){return F||R||(F=-96,R=-96),F<0&&(F=-1*K.width*72/F/this.internal.scaleFactor),R<0&&(R=-1*K.height*72/R/this.internal.scaleFactor),F===0&&(F=R*K.width/K.height),R===0&&(R=F*K.height/K.width),[F,R]},S=function(F,R,K,Z,Y,k){var U=C.call(this,K,Z,Y),H=this.internal.getCoordinateString,ue=this.internal.getVerticalCoordinateString,_e=l.call(this);if(K=U[0],Z=U[1],_e[Y.index]=Y,k){k*=Math.PI/180;var Ie=Math.cos(k),ee=Math.sin(k),te=function(ge){return ge.toFixed(4)},oe=[te(Ie),te(ee),te(-1*ee),te(Ie),0,0,"cm"]}this.internal.write("q"),k?(this.internal.write([1,"0","0",1,H(F),ue(R+Z),"cm"].join(" ")),this.internal.write(oe.join(" ")),this.internal.write([H(K),"0","0",H(Z),"0","0","cm"].join(" "))):this.internal.write([H(K),"0","0",H(Z),H(F),ue(R+Z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Y.index+" Do"),this.internal.write("Q")},I=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var N=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},T=t.__addimage__.sHashCode=function(F){var R,K,Z=0;if(typeof F=="string")for(K=F.length,R=0;R<K;R++)Z=(Z<<5)-Z+F.charCodeAt(R),Z|=0;else if(ce(F))for(K=F.byteLength/2,R=0;R<K;R++)Z=(Z<<5)-Z+F[R],Z|=0;return Z},j=t.__addimage__.validateStringAsBase64=function(F){(F=F||"").toString().trim();var R=!0;return F.length===0&&(R=!1),F.length%4!=0&&(R=!1),/^[A-Za-z0-9+/]+$/.test(F.substr(0,F.length-2))===!1&&(R=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(F.substr(-2))===!1&&(R=!1),R},W=t.__addimage__.extractImageFromDataUrl=function(F){var R=(F=F||"").split("base64,"),K=null;if(R.length===2){var Z=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(R[0]);Array.isArray(Z)&&(K={mimeType:Z[1],charset:Z[2],data:R[1]})}return K},X=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(F){return X()&&F instanceof ArrayBuffer};var ce=t.__addimage__.isArrayBufferView=function(F){return X()&&typeof Uint32Array<"u"&&(F instanceof Int8Array||F instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&F instanceof Uint8ClampedArray||F instanceof Int16Array||F instanceof Uint16Array||F instanceof Int32Array||F instanceof Uint32Array||F instanceof Float32Array||F instanceof Float64Array)},he=t.__addimage__.binaryStringToUint8Array=function(F){for(var R=F.length,K=new Uint8Array(R),Z=0;Z<R;Z++)K[Z]=F.charCodeAt(Z);return K},O=t.__addimage__.arrayBufferToBinaryString=function(F){for(var R="",K=ce(F)?F:new Uint8Array(F),Z=0;Z<K.length;Z+=8192)R+=String.fromCharCode.apply(null,K.subarray(Z,Z+8192));return R};t.addImage=function(){var F,R,K,Z,Y,k,U,H,ue;if(typeof arguments[1]=="number"?(R=e,K=arguments[1],Z=arguments[2],Y=arguments[3],k=arguments[4],U=arguments[5],H=arguments[6],ue=arguments[7]):(R=arguments[1],K=arguments[2],Z=arguments[3],Y=arguments[4],k=arguments[5],U=arguments[6],H=arguments[7],ue=arguments[8]),Ri(F=arguments[0])==="object"&&!p(F)&&"imageData"in F){var _e=F;F=_e.imageData,R=_e.format||R||e,K=_e.x||K||0,Z=_e.y||Z||0,Y=_e.w||_e.width||Y,k=_e.h||_e.height||k,U=_e.alias||U,H=_e.compression||H,ue=_e.rotation||_e.angle||ue}var Ie=this.internal.getFilters();if(H===void 0&&Ie.indexOf("FlateEncode")!==-1&&(H="SLOW"),isNaN(K)||isNaN(Z))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var ee=B.call(this,F,R,U,H);return S.call(this,K,Z,Y,k,ee,ue),this};var B=function(F,R,K,Z){var Y,k,U;if(typeof F=="string"&&r(F)===e){F=unescape(F);var H=q(F,!1);(H!==""||(H=t.loadFile(F,!0))!==void 0)&&(F=H)}if(p(F)&&(F=v(F,R)),R=r(F,R),!f(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(((U=K)==null||U.length===0)&&(K=function(ue){return typeof ue=="string"||ce(ue)?T(ue):ce(ue.data)?T(ue.data):null}(F)),(Y=m.call(this,K))||(X()&&(F instanceof Uint8Array||R==="RGBA"||(k=F,F=he(F))),Y=this["process"+R.toUpperCase()](F,c.call(this),K,function(ue){return ue&&typeof ue=="string"&&(ue=ue.toUpperCase()),ue in t.image_compression?ue:N.NONE}(Z),k)),!Y)throw new Error("An unknown error occurred whilst processing the image.");return Y},q=t.__addimage__.convertBase64ToBinaryString=function(F,R){var K;R=typeof R!="boolean"||R;var Z,Y="";if(typeof F=="string"){Z=(K=W(F))!==null?K.data:F;try{Y=Ng(Z)}catch(k){if(R)throw j(Z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+k.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Y};t.getImageProperties=function(F){var R,K,Z="";if(p(F)&&(F=v(F)),typeof F=="string"&&r(F)===e&&((Z=q(F,!1))===""&&(Z=t.loadFile(F)||""),F=Z),K=r(F),!f(K))throw new Error("addImage does not support files of type '"+K+"', please ensure that a plugin for '"+K+"' support is added.");if(!X()||F instanceof Uint8Array||(F=he(F)),!(R=this["process"+K.toUpperCase()](F)))throw new Error("An unknown error occurred whilst processing the image");return R.fileType=K,R}})(xr.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};xr.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,f=!1,p=0;p<c.length&&!f;p++)switch((r=c[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var v=0;v<c.length;v++){r=c[v];var m=this.internal.pdfEscape,C=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var S=this.internal.newAdditionalObject(),I=this.internal.newAdditionalObject(),N=this.internal.getEncryptor(S.objId),T=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+m(N(r.contents))+")",s+=" /Popup "+I.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+m(N(T))+") >>",S.content=s;var j=S.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+j,r.open&&(s+=" /Open true"),s+=" >>",I.content=s,this.internal.write(S.objId,"0 R",I.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var W=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(C(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+W+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var X=this.annotations._nameMap[r.options.name];r.options.pageNumber=X.page,r.options.top=X.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(C(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var ce=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+ce+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var f=this.splitTextToSize(n,a).length;o=Math.ceil(c*f)}else a=l,o=c;return this.text(n,r,i,s),i+=.2*c,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-c,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(xr.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(S){return e[S.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(S){return typeof S=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(S)},a=t.__arabicParser__.isArabicEndLetter=function(S){return o(S)&&s(S)&&e[S.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(S){return o(S)&&i.indexOf(S.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(S){return o(S)&&s(S)&&e[S.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(S){return o(S)&&s(S)&&e[S.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(S){return o(S)&&s(S)&&e[S.charCodeAt(0)].length>=3};var f=t.__arabicParser__.arabicLetterHasMedialForm=function(S){return o(S)&&s(S)&&e[S.charCodeAt(0)].length==4},p=t.__arabicParser__.resolveLigatures=function(S){var I=0,N=n,T="",j=0;for(I=0;I<S.length;I+=1)N[S.charCodeAt(I)]!==void 0?(j++,typeof(N=N[S.charCodeAt(I)])=="number"&&(T+=String.fromCharCode(N),N=n,j=0),I===S.length-1&&(N=n,T+=S.charAt(I-(j-1)),I-=j-1,j=0)):(N=n,T+=S.charAt(I-j),I-=j,j=0);return T};t.__arabicParser__.isArabicDiacritic=function(S){return S!==void 0&&r[S.charCodeAt(0)]!==void 0};var v=t.__arabicParser__.getCorrectForm=function(S,I,N){return o(S)?s(S)===!1?-1:!c(S)||!o(I)&&!o(N)||!o(N)&&a(I)||a(S)&&!o(I)||a(S)&&l(I)||a(S)&&a(I)?0:f(S)&&o(I)&&!a(I)&&o(N)&&c(N)?3:a(S)||!o(N)?1:2:-1},m=function(S){var I=0,N=0,T=0,j="",W="",X="",ce=(S=S||"").split("\\s+"),he=[];for(I=0;I<ce.length;I+=1){for(he.push(""),N=0;N<ce[I].length;N+=1)j=ce[I][N],W=ce[I][N-1],X=ce[I][N+1],o(j)?(T=v(j,W,X),he[I]+=T!==-1?String.fromCharCode(e[j.charCodeAt(0)][T]):j):he[I]+=j;he[I]=p(he[I])}return he.join(" ")},C=t.__arabicParser__.processArabic=t.processArabic=function(){var S,I=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,N=[];if(Array.isArray(I)){var T=0;for(N=[],T=0;T<I.length;T+=1)Array.isArray(I[T])?N.push([m(I[T][0]),I[T][1],I[T][2]]):N.push([m(I[T])]);S=N}else S=m(I);return typeof arguments[0]=="string"?S:(arguments[0].text=S,arguments[0])};t.events.push(["preProcessText",C])}(xr.API),xr.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(xr.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(S){l=S}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(S){c=S}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(S){f=S}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(S){p=S}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(S){v=S}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(S){m=S}});var C=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return C},set:function(S){C=S}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var f=(c=c||{}).fontSize||this.getFontSize(),p=c.font||this.getFont(),v=c.scaleFactor||this.internal.scaleFactor,m=0,C=0,S=0,I=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var N=c.maxWidth;N>0?typeof l=="string"?l=this.splitTextToSize(l,N):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(j,W){return j.concat(I.splitTextToSize(W,N))},[])):l=Array.isArray(l)?l:[l];for(var T=0;T<l.length;T++)m<(S=this.getStringUnitWidth(l[T],{font:p})*f)&&(m=S);return m!==0&&(C=l.length),{w:m/=v,h:Math.max((C*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/v,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,v=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,m&&v&&(this.printHeaderRow(l.lineNumber,!0),l.y+=v[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-f,l.y+f,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+f,{align:"center",baseline:"top",maxWidth:l.width-f-f}):this.text(l.text,l.x+f,l.y+f,{align:"left",baseline:"top",maxWidth:l.width-f-f})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,f,p,v){if(r.call(this),!f)throw new Error("No data for PDF table.");var m,C,S,I,N=[],T=[],j=[],W={},X={},ce=[],he=[],O=(v=v||{}).autoSize||!1,B=v.printHeaders!==!1,q=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,F=v.margins||Object.assign({width:this.getPageWidth()},e),R=typeof v.padding=="number"?v.padding:3,K=v.headerBackgroundColor||"#c8c8c8",Z=v.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=B,this.internal.__cell__.margins=F,this.internal.__cell__.table_font_size=q,this.internal.__cell__.padding=R,this.internal.__cell__.headerBackgroundColor=K,this.internal.__cell__.headerTextColor=Z,this.setFontSize(q),p==null)T=N=Object.keys(f[0]),j=N.map(function(){return"left"});else if(Array.isArray(p)&&Ri(p[0])==="object")for(N=p.map(function(_e){return _e.name}),T=p.map(function(_e){return _e.prompt||_e.name||""}),j=p.map(function(_e){return _e.align||"left"}),m=0;m<p.length;m+=1)X[p[m].name]=p[m].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(T=N=p,j=N.map(function(){return"left"}));if(O||Array.isArray(p)&&typeof p[0]=="string")for(m=0;m<N.length;m+=1){for(W[I=N[m]]=f.map(function(_e){return _e[I]}),this.setFont(void 0,"bold"),ce.push(this.getTextDimensions(T[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),C=W[I],this.setFont(void 0,"normal"),S=0;S<C.length;S+=1)ce.push(this.getTextDimensions(C[S],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);X[I]=Math.max.apply(null,ce)+R+R,ce=[]}if(B){var Y={};for(m=0;m<N.length;m+=1)Y[N[m]]={},Y[N[m]].text=T[m],Y[N[m]].align=j[m];var k=a.call(this,Y,X);he=N.map(function(_e){return new s(l,c,X[_e],k,Y[_e].text,void 0,Y[_e].align)}),this.setTableHeaderRow(he),this.printHeaderRow(1,!1)}var U=p.reduce(function(_e,Ie){return _e[Ie.name]=Ie.align,_e},{});for(m=0;m<f.length;m+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:m,data:f[m]},this);var H=a.call(this,f[m],X);for(S=0;S<N.length;S+=1){var ue=f[m][N[S]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:m,col:S,data:ue},this),o.call(this,new s(l,c,X[N[S]],H,ue,m+2,U[N[S]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var f=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(l).map(function(m){var C=l[m];return this.splitTextToSize(C.hasOwnProperty("text")?C.text:C,c[m]-f-f)},this).map(function(m){return this.getLineHeightFactor()*m.length*p/v+f+f},this).reduce(function(m,C){return Math.max(m,C)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){f=this.internal.__cell__.tableHeaderRow[m].clone(),c&&(f.y=this.internal.__cell__.margins.top||0,v.push(f)),f.lineNumber=l;var C=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,f),this.setTextColor(C)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),n=!1}}(xr.API);var BE={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},RE=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],vb=NE(RE),FE=[100,200,300,400,500,600,700,800,900],dV=NE(FE);function yb(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return BE[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof vb[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function f5(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var pV={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},d5={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function p5(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function gV(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},pV,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=yb(e[a])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+p5(s)+"' and default family '"+r+"'.");if(o=function(l,c){if(c[l])return c[l];var f=vb[l],p=f<=vb.normal?-1:1,v=f5(c,RE,f,p);if(!v)throw new Error("Could not find a matching font-stretch value for "+l);return v}(s.stretch,o),o=function(l,c){if(c[l])return c[l];for(var f=BE[l],p=0;p<f.length;++p)if(c[f[p]])return c[f[p]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var f=dV[l],p=f5(c,FE,f,l<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+l);return p}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+p5(s)+"'.");return o}function g5(t){return t.trimLeft()}function mV(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function vV(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var mm,m5,v5,K1=["times"];(function(t){var e,n,r,i,s,o,a,l,c,f=function(ee){return ee=ee||{},this.isStrokeTransparent=ee.isStrokeTransparent||!1,this.strokeOpacity=ee.strokeOpacity||1,this.strokeStyle=ee.strokeStyle||"#000000",this.fillStyle=ee.fillStyle||"#000000",this.isFillTransparent=ee.isFillTransparent||!1,this.fillOpacity=ee.fillOpacity||1,this.font=ee.font||"10px sans-serif",this.textBaseline=ee.textBaseline||"alphabetic",this.textAlign=ee.textAlign||"left",this.lineWidth=ee.lineWidth||1,this.lineJoin=ee.lineJoin||"miter",this.lineCap=ee.lineCap||"butt",this.path=ee.path||[],this.transform=ee.transform!==void 0?ee.transform.clone():new l,this.globalCompositeOperation=ee.globalCompositeOperation||"normal",this.globalAlpha=ee.globalAlpha||1,this.clip_path=ee.clip_path||[],this.currentPoint=ee.currentPoint||new o,this.miterLimit=ee.miterLimit||10,this.lastPoint=ee.lastPoint||new o,this.lineDashOffset=ee.lineDashOffset||0,this.lineDash=ee.lineDash||[],this.margin=ee.margin||[0,0,0,0],this.prevPageLastElemOffset=ee.prevPageLastElemOffset||0,this.ignoreClearRect=typeof ee.ignoreClearRect!="boolean"||ee.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new f}]);var p=function(ee){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var te=ee;Object.defineProperty(this,"pdf",{get:function(){return te}});var oe=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return oe},set:function(de){oe=!!de}});var ge=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ge},set:function(de){ge=!!de}});var ve=0;Object.defineProperty(this,"posX",{get:function(){return ve},set:function(de){isNaN(de)||(ve=de)}});var ye=0;Object.defineProperty(this,"posY",{get:function(){return ye},set:function(de){isNaN(de)||(ye=de)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(de){var re;typeof de=="number"?re=[de,de,de,de]:((re=new Array(4))[0]=de[0],re[1]=de.length>=2?de[1]:re[0],re[2]=de.length>=3?de[2]:re[0],re[3]=de.length>=4?de[3]:re[1]),c.margin=re}});var pe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return pe},set:function(de){pe=de}});var fe=0;Object.defineProperty(this,"lastBreak",{get:function(){return fe},set:function(de){fe=de}});var $e=[];Object.defineProperty(this,"pageBreaks",{get:function(){return $e},set:function(de){$e=de}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(de){de instanceof f&&(c=de)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(de){c.path=de}});var Ne=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ne},set:function(de){Ne=de}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(de){var re;re=v(de),this.ctx.fillStyle=re.style,this.ctx.isFillTransparent=re.a===0,this.ctx.fillOpacity=re.a,this.pdf.setFillColor(re.r,re.g,re.b,{a:re.a}),this.pdf.setTextColor(re.r,re.g,re.b,{a:re.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(de){var re=v(de);this.ctx.strokeStyle=re.style,this.ctx.isStrokeTransparent=re.a===0,this.ctx.strokeOpacity=re.a,re.a===0?this.pdf.setDrawColor(255,255,255):(re.a,this.pdf.setDrawColor(re.r,re.g,re.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(de){["butt","round","square"].indexOf(de)!==-1&&(this.ctx.lineCap=de,this.pdf.setLineCap(de))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(de){isNaN(de)||(this.ctx.lineWidth=de,this.pdf.setLineWidth(de))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(de){["bevel","round","miter"].indexOf(de)!==-1&&(this.ctx.lineJoin=de,this.pdf.setLineJoin(de))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(de){isNaN(de)||(this.ctx.miterLimit=de,this.pdf.setMiterLimit(de))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(de){this.ctx.textBaseline=de}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(de){["right","end","center","left","start"].indexOf(de)!==-1&&(this.ctx.textAlign=de)}});var ot=null;function le(de,re){if(ot===null){var Ae=function(Ge){var tt=[];return Object.keys(Ge).forEach(function(at){Ge[at].forEach(function(ut){var gt=null;switch(ut){case"bold":gt={family:at,weight:"bold"};break;case"italic":gt={family:at,style:"italic"};break;case"bolditalic":gt={family:at,weight:"bold",style:"italic"};break;case"":case"normal":gt={family:at}}gt!==null&&(gt.ref={name:at,style:ut},tt.push(gt))})}),tt}(de.getFontList());ot=function(Ge){for(var tt={},at=0;at<Ge.length;++at){var ut=yb(Ge[at]),gt=ut.family,$t=ut.stretch,Rt=ut.style,Gt=ut.weight;tt[gt]=tt[gt]||{},tt[gt][$t]=tt[gt][$t]||{},tt[gt][$t][Rt]=tt[gt][$t][Rt]||{},tt[gt][$t][Rt][Gt]=ut}return tt}(Ae.concat(re))}return ot}var ae=null;Object.defineProperty(this,"fontFaces",{get:function(){return ae},set:function(de){ot=null,ae=de}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(de){var re;if(this.ctx.font=de,(re=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(de))!==null){var Ae=re[1],Ge=(re[2],re[3]),tt=re[4],at=(re[5],re[6]),ut=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(tt)[2];tt=Math.floor(ut==="px"?parseFloat(tt)*this.pdf.internal.scaleFactor:ut==="em"?parseFloat(tt)*this.pdf.getFontSize():parseFloat(tt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(tt);var gt=function(Ze){var it,et,Bt=[],Zt=Ze.trim();if(Zt==="")return K1;if(Zt in d5)return[d5[Zt]];for(;Zt!=="";){switch(et=null,it=(Zt=g5(Zt)).charAt(0)){case'"':case"'":et=mV(Zt.substring(1),it);break;default:et=vV(Zt)}if(et===null||(Bt.push(et[0]),(Zt=g5(et[1]))!==""&&Zt.charAt(0)!==","))return K1;Zt=Zt.replace(/^,/,"")}return Bt}(at);if(this.fontFaces){var $t=gV(le(this.pdf,this.fontFaces),gt.map(function(Ze){return{family:Ze,stretch:"normal",weight:Ge,style:Ae}}));this.pdf.setFont($t.ref.name,$t.ref.style)}else{var Rt="";(Ge==="bold"||parseInt(Ge,10)>=700||Ae==="bold")&&(Rt="bold"),Ae==="italic"&&(Rt+="italic"),Rt.length===0&&(Rt="normal");for(var Gt="",ln={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},mn=0;mn<gt.length;mn++){if(this.pdf.internal.getFont(gt[mn],Rt,{noFallback:!0,disableWarning:!0})!==void 0){Gt=gt[mn];break}if(Rt==="bolditalic"&&this.pdf.internal.getFont(gt[mn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Gt=gt[mn],Rt="bold";else if(this.pdf.internal.getFont(gt[mn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Gt=gt[mn],Rt="normal";break}}if(Gt===""){for(var yn=0;yn<gt.length;yn++)if(ln[gt[yn]]){Gt=ln[gt[yn]];break}}Gt=Gt===""?"Times":Gt,this.pdf.setFont(Gt,Rt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(de){this.ctx.globalCompositeOperation=de}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(de){this.ctx.globalAlpha=de}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(de){this.ctx.lineDashOffset=de,Ie.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(de){this.ctx.lineDash=de,Ie.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(de){this.ctx.ignoreClearRect=!!de}})};p.prototype.setLineDash=function(ee){this.lineDash=ee},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){W.call(this,"fill",!1)},p.prototype.stroke=function(){W.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(ee,te){if(isNaN(ee)||isNaN(te))throw qi.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var oe=this.ctx.transform.applyToPoint(new o(ee,te));this.path.push({type:"mt",x:oe.x,y:oe.y}),this.ctx.lastPoint=new o(ee,te)},p.prototype.closePath=function(){var ee=new o(0,0),te=0;for(te=this.path.length-1;te!==-1;te--)if(this.path[te].type==="begin"&&Ri(this.path[te+1])==="object"&&typeof this.path[te+1].x=="number"){ee=new o(this.path[te+1].x,this.path[te+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(ee.x,ee.y)},p.prototype.lineTo=function(ee,te){if(isNaN(ee)||isNaN(te))throw qi.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var oe=this.ctx.transform.applyToPoint(new o(ee,te));this.path.push({type:"lt",x:oe.x,y:oe.y}),this.ctx.lastPoint=new o(oe.x,oe.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),W.call(this,null,!0)},p.prototype.quadraticCurveTo=function(ee,te,oe,ge){if(isNaN(oe)||isNaN(ge)||isNaN(ee)||isNaN(te))throw qi.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ve=this.ctx.transform.applyToPoint(new o(oe,ge)),ye=this.ctx.transform.applyToPoint(new o(ee,te));this.path.push({type:"qct",x1:ye.x,y1:ye.y,x:ve.x,y:ve.y}),this.ctx.lastPoint=new o(ve.x,ve.y)},p.prototype.bezierCurveTo=function(ee,te,oe,ge,ve,ye){if(isNaN(ve)||isNaN(ye)||isNaN(ee)||isNaN(te)||isNaN(oe)||isNaN(ge))throw qi.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var pe=this.ctx.transform.applyToPoint(new o(ve,ye)),fe=this.ctx.transform.applyToPoint(new o(ee,te)),$e=this.ctx.transform.applyToPoint(new o(oe,ge));this.path.push({type:"bct",x1:fe.x,y1:fe.y,x2:$e.x,y2:$e.y,x:pe.x,y:pe.y}),this.ctx.lastPoint=new o(pe.x,pe.y)},p.prototype.arc=function(ee,te,oe,ge,ve,ye){if(isNaN(ee)||isNaN(te)||isNaN(oe)||isNaN(ge)||isNaN(ve))throw qi.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ye=!!ye,!this.ctx.transform.isIdentity){var pe=this.ctx.transform.applyToPoint(new o(ee,te));ee=pe.x,te=pe.y;var fe=this.ctx.transform.applyToPoint(new o(0,oe)),$e=this.ctx.transform.applyToPoint(new o(0,0));oe=Math.sqrt(Math.pow(fe.x-$e.x,2)+Math.pow(fe.y-$e.y,2))}Math.abs(ve-ge)>=2*Math.PI&&(ge=0,ve=2*Math.PI),this.path.push({type:"arc",x:ee,y:te,radius:oe,startAngle:ge,endAngle:ve,counterclockwise:ye})},p.prototype.arcTo=function(ee,te,oe,ge,ve){throw new Error("arcTo not implemented.")},p.prototype.rect=function(ee,te,oe,ge){if(isNaN(ee)||isNaN(te)||isNaN(oe)||isNaN(ge))throw qi.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ee,te),this.lineTo(ee+oe,te),this.lineTo(ee+oe,te+ge),this.lineTo(ee,te+ge),this.lineTo(ee,te),this.lineTo(ee+oe,te),this.lineTo(ee,te)},p.prototype.fillRect=function(ee,te,oe,ge){if(isNaN(ee)||isNaN(te)||isNaN(oe)||isNaN(ge))throw qi.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var ve={};this.lineCap!=="butt"&&(ve.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ve.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ee,te,oe,ge),this.fill(),ve.hasOwnProperty("lineCap")&&(this.lineCap=ve.lineCap),ve.hasOwnProperty("lineJoin")&&(this.lineJoin=ve.lineJoin)}},p.prototype.strokeRect=function(ee,te,oe,ge){if(isNaN(ee)||isNaN(te)||isNaN(oe)||isNaN(ge))throw qi.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");C.call(this)||(this.beginPath(),this.rect(ee,te,oe,ge),this.stroke())},p.prototype.clearRect=function(ee,te,oe,ge){if(isNaN(ee)||isNaN(te)||isNaN(oe)||isNaN(ge))throw qi.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ee,te,oe,ge))},p.prototype.save=function(ee){ee=typeof ee!="boolean"||ee;for(var te=this.pdf.internal.getCurrentPageInfo().pageNumber,oe=0;oe<this.pdf.internal.getNumberOfPages();oe++)this.pdf.setPage(oe+1),this.pdf.internal.out("q");if(this.pdf.setPage(te),ee){this.ctx.fontSize=this.pdf.internal.getFontSize();var ge=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ge}},p.prototype.restore=function(ee){ee=typeof ee!="boolean"||ee;for(var te=this.pdf.internal.getCurrentPageInfo().pageNumber,oe=0;oe<this.pdf.internal.getNumberOfPages();oe++)this.pdf.setPage(oe+1),this.pdf.internal.out("Q");this.pdf.setPage(te),ee&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(ee){var te,oe,ge,ve;if(ee.isCanvasGradient===!0&&(ee=ee.getColor()),!ee)return{r:0,g:0,b:0,a:0,style:ee};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ee))te=0,oe=0,ge=0,ve=0;else{var ye=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ee);if(ye!==null)te=parseInt(ye[1]),oe=parseInt(ye[2]),ge=parseInt(ye[3]),ve=1;else if((ye=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ee))!==null)te=parseInt(ye[1]),oe=parseInt(ye[2]),ge=parseInt(ye[3]),ve=parseFloat(ye[4]);else{if(ve=1,typeof ee=="string"&&ee.charAt(0)!=="#"){var pe=new ME(ee);ee=pe.ok?pe.toHex():"#000000"}ee.length===4?(te=ee.substring(1,2),te+=te,oe=ee.substring(2,3),oe+=oe,ge=ee.substring(3,4),ge+=ge):(te=ee.substring(1,3),oe=ee.substring(3,5),ge=ee.substring(5,7)),te=parseInt(te,16),oe=parseInt(oe,16),ge=parseInt(ge,16)}}return{r:te,g:oe,b:ge,a:ve,style:ee}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},C=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(ee,te,oe,ge){if(isNaN(te)||isNaN(oe)||typeof ee!="string")throw qi.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ge=isNaN(ge)?void 0:ge,!m.call(this)){var ve=H(this.ctx.transform.rotation),ye=this.ctx.transform.scaleX;R.call(this,{text:ee,x:te,y:oe,scale:ye,angle:ve,align:this.textAlign,maxWidth:ge})}},p.prototype.strokeText=function(ee,te,oe,ge){if(isNaN(te)||isNaN(oe)||typeof ee!="string")throw qi.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!C.call(this)){ge=isNaN(ge)?void 0:ge;var ve=H(this.ctx.transform.rotation),ye=this.ctx.transform.scaleX;R.call(this,{text:ee,x:te,y:oe,scale:ye,renderingMode:"stroke",angle:ve,align:this.textAlign,maxWidth:ge})}},p.prototype.measureText=function(ee){if(typeof ee!="string")throw qi.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var te=this.pdf,oe=this.pdf.internal.scaleFactor,ge=te.internal.getFontSize(),ve=te.getStringUnitWidth(ee)*ge/te.internal.scaleFactor,ye=function(pe){var fe=(pe=pe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return fe}}),this};return new ye({width:ve*=Math.round(96*oe/72*1e4)/1e4})},p.prototype.scale=function(ee,te){if(isNaN(ee)||isNaN(te))throw qi.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var oe=new l(ee,0,0,te,0,0);this.ctx.transform=this.ctx.transform.multiply(oe)},p.prototype.rotate=function(ee){if(isNaN(ee))throw qi.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var te=new l(Math.cos(ee),Math.sin(ee),-Math.sin(ee),Math.cos(ee),0,0);this.ctx.transform=this.ctx.transform.multiply(te)},p.prototype.translate=function(ee,te){if(isNaN(ee)||isNaN(te))throw qi.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var oe=new l(1,0,0,1,ee,te);this.ctx.transform=this.ctx.transform.multiply(oe)},p.prototype.transform=function(ee,te,oe,ge,ve,ye){if(isNaN(ee)||isNaN(te)||isNaN(oe)||isNaN(ge)||isNaN(ve)||isNaN(ye))throw qi.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var pe=new l(ee,te,oe,ge,ve,ye);this.ctx.transform=this.ctx.transform.multiply(pe)},p.prototype.setTransform=function(ee,te,oe,ge,ve,ye){ee=isNaN(ee)?1:ee,te=isNaN(te)?0:te,oe=isNaN(oe)?0:oe,ge=isNaN(ge)?1:ge,ve=isNaN(ve)?0:ve,ye=isNaN(ye)?0:ye,this.ctx.transform=new l(ee,te,oe,ge,ve,ye)};var S=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(ee,te,oe,ge,ve,ye,pe,fe,$e){var Ne=this.pdf.getImageProperties(ee),ot=1,le=1,ae=1,de=1;ge!==void 0&&fe!==void 0&&(ae=fe/ge,de=$e/ve,ot=Ne.width/ge*fe/ge,le=Ne.height/ve*$e/ve),ye===void 0&&(ye=te,pe=oe,te=0,oe=0),ge!==void 0&&fe===void 0&&(fe=ge,$e=ve),ge===void 0&&fe===void 0&&(fe=Ne.width,$e=Ne.height);for(var re,Ae=this.ctx.transform.decompose(),Ge=H(Ae.rotate.shx),tt=new l,at=(tt=(tt=(tt=tt.multiply(Ae.translate)).multiply(Ae.skew)).multiply(Ae.scale)).applyToRectangle(new a(ye-te*ae,pe-oe*de,ge*ot,ve*le)),ut=I.call(this,at),gt=[],$t=0;$t<ut.length;$t+=1)gt.indexOf(ut[$t])===-1&&gt.push(ut[$t]);if(j(gt),this.autoPaging)for(var Rt=gt[0],Gt=gt[gt.length-1],ln=Rt;ln<Gt+1;ln++){this.pdf.setPage(ln);var mn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],yn=ln===1?this.posY+this.margin[0]:this.margin[0],Ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],it=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],et=ln===1?0:Ze+(ln-2)*it;if(this.ctx.clip_path.length!==0){var Bt=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(re,this.posX+this.margin[3],-et+yn+this.ctx.prevPageLastElemOffset),X.call(this,"fill",!0),this.path=Bt}var Zt=JSON.parse(JSON.stringify(at));Zt=T([Zt],this.posX+this.margin[3],-et+yn+this.ctx.prevPageLastElemOffset)[0];var Sn=(ln>Rt||ln<Gt)&&S.call(this);Sn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],mn,it,null).clip().discardPath()),this.pdf.addImage(ee,"JPEG",Zt.x,Zt.y,Zt.w,Zt.h,null,null,Ge),Sn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(ee,"JPEG",at.x,at.y,at.w,at.h,null,null,Ge)};var I=function(ee,te,oe){var ge=[];te=te||this.pdf.internal.pageSize.width,oe=oe||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ve=this.posY+this.ctx.prevPageLastElemOffset;switch(ee.type){default:case"mt":case"lt":ge.push(Math.floor((ee.y+ve)/oe)+1);break;case"arc":ge.push(Math.floor((ee.y+ve-ee.radius)/oe)+1),ge.push(Math.floor((ee.y+ve+ee.radius)/oe)+1);break;case"qct":var ye=ue(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ee.x1,ee.y1,ee.x,ee.y);ge.push(Math.floor((ye.y+ve)/oe)+1),ge.push(Math.floor((ye.y+ye.h+ve)/oe)+1);break;case"bct":var pe=_e(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ee.x1,ee.y1,ee.x2,ee.y2,ee.x,ee.y);ge.push(Math.floor((pe.y+ve)/oe)+1),ge.push(Math.floor((pe.y+pe.h+ve)/oe)+1);break;case"rect":ge.push(Math.floor((ee.y+ve)/oe)+1),ge.push(Math.floor((ee.y+ee.h+ve)/oe)+1)}for(var fe=0;fe<ge.length;fe+=1)for(;this.pdf.internal.getNumberOfPages()<ge[fe];)N.call(this);return ge},N=function(){var ee=this.fillStyle,te=this.strokeStyle,oe=this.font,ge=this.lineCap,ve=this.lineWidth,ye=this.lineJoin;this.pdf.addPage(),this.fillStyle=ee,this.strokeStyle=te,this.font=oe,this.lineCap=ge,this.lineWidth=ve,this.lineJoin=ye},T=function(ee,te,oe){for(var ge=0;ge<ee.length;ge++)switch(ee[ge].type){case"bct":ee[ge].x2+=te,ee[ge].y2+=oe;case"qct":ee[ge].x1+=te,ee[ge].y1+=oe;case"mt":case"lt":case"arc":default:ee[ge].x+=te,ee[ge].y+=oe}return ee},j=function(ee){return ee.sort(function(te,oe){return te-oe})},W=function(ee,te){for(var oe,ge,ve=this.fillStyle,ye=this.strokeStyle,pe=this.lineCap,fe=this.lineWidth,$e=Math.abs(fe*this.ctx.transform.scaleX),Ne=this.lineJoin,ot=JSON.parse(JSON.stringify(this.path)),le=JSON.parse(JSON.stringify(this.path)),ae=[],de=0;de<le.length;de++)if(le[de].x!==void 0)for(var re=I.call(this,le[de]),Ae=0;Ae<re.length;Ae+=1)ae.indexOf(re[Ae])===-1&&ae.push(re[Ae]);for(var Ge=0;Ge<ae.length;Ge++)for(;this.pdf.internal.getNumberOfPages()<ae[Ge];)N.call(this);if(j(ae),this.autoPaging)for(var tt=ae[0],at=ae[ae.length-1],ut=tt;ut<at+1;ut++){this.pdf.setPage(ut),this.fillStyle=ve,this.strokeStyle=ye,this.lineCap=pe,this.lineWidth=$e,this.lineJoin=Ne;var gt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],$t=ut===1?this.posY+this.margin[0]:this.margin[0],Rt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Gt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ln=ut===1?0:Rt+(ut-2)*Gt;if(this.ctx.clip_path.length!==0){var mn=this.path;oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(oe,this.posX+this.margin[3],-ln+$t+this.ctx.prevPageLastElemOffset),X.call(this,ee,!0),this.path=mn}if(ge=JSON.parse(JSON.stringify(ot)),this.path=T(ge,this.posX+this.margin[3],-ln+$t+this.ctx.prevPageLastElemOffset),te===!1||ut===0){var yn=(ut>tt||ut<at)&&S.call(this);yn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],gt,Gt,null).clip().discardPath()),X.call(this,ee,te),yn&&this.pdf.restoreGraphicsState()}this.lineWidth=fe}else this.lineWidth=$e,X.call(this,ee,te),this.lineWidth=fe;this.path=ot},X=function(ee,te){if((ee!=="stroke"||te||!C.call(this))&&(ee==="stroke"||te||!m.call(this))){for(var oe,ge,ve=[],ye=this.path,pe=0;pe<ye.length;pe++){var fe=ye[pe];switch(fe.type){case"begin":ve.push({begin:!0});break;case"close":ve.push({close:!0});break;case"mt":ve.push({start:fe,deltas:[],abs:[]});break;case"lt":var $e=ve.length;if(ye[pe-1]&&!isNaN(ye[pe-1].x)&&(oe=[fe.x-ye[pe-1].x,fe.y-ye[pe-1].y],$e>0)){for(;$e>=0;$e--)if(ve[$e-1].close!==!0&&ve[$e-1].begin!==!0){ve[$e-1].deltas.push(oe),ve[$e-1].abs.push(fe);break}}break;case"bct":oe=[fe.x1-ye[pe-1].x,fe.y1-ye[pe-1].y,fe.x2-ye[pe-1].x,fe.y2-ye[pe-1].y,fe.x-ye[pe-1].x,fe.y-ye[pe-1].y],ve[ve.length-1].deltas.push(oe);break;case"qct":var Ne=ye[pe-1].x+2/3*(fe.x1-ye[pe-1].x),ot=ye[pe-1].y+2/3*(fe.y1-ye[pe-1].y),le=fe.x+2/3*(fe.x1-fe.x),ae=fe.y+2/3*(fe.y1-fe.y),de=fe.x,re=fe.y;oe=[Ne-ye[pe-1].x,ot-ye[pe-1].y,le-ye[pe-1].x,ae-ye[pe-1].y,de-ye[pe-1].x,re-ye[pe-1].y],ve[ve.length-1].deltas.push(oe);break;case"arc":ve.push({deltas:[],abs:[],arc:!0}),Array.isArray(ve[ve.length-1].abs)&&ve[ve.length-1].abs.push(fe)}}ge=te?null:ee==="stroke"?"stroke":"fill";for(var Ae=!1,Ge=0;Ge<ve.length;Ge++)if(ve[Ge].arc)for(var tt=ve[Ge].abs,at=0;at<tt.length;at++){var ut=tt[at];ut.type==="arc"?O.call(this,ut.x,ut.y,ut.radius,ut.startAngle,ut.endAngle,ut.counterclockwise,void 0,te,!Ae):K.call(this,ut.x,ut.y),Ae=!0}else if(ve[Ge].close===!0)this.pdf.internal.out("h"),Ae=!1;else if(ve[Ge].begin!==!0){var gt=ve[Ge].start.x,$t=ve[Ge].start.y;Z.call(this,ve[Ge].deltas,gt,$t),Ae=!0}ge&&B.call(this,ge),te&&q.call(this)}},ce=function(ee){var te=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,oe=te*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ee-oe;case"top":return ee+te-oe;case"hanging":return ee+te-2*oe;case"middle":return ee+te/2-oe;case"ideographic":return ee;case"alphabetic":default:return ee}},he=function(ee){return ee+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var ee=function(){};return ee.colorStops=[],ee.addColorStop=function(te,oe){this.colorStops.push([te,oe])},ee.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},ee.isCanvasGradient=!0,ee},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var O=function(ee,te,oe,ge,ve,ye,pe,fe,$e){for(var Ne=k.call(this,oe,ge,ve,ye),ot=0;ot<Ne.length;ot++){var le=Ne[ot];ot===0&&($e?F.call(this,le.x1+ee,le.y1+te):K.call(this,le.x1+ee,le.y1+te)),Y.call(this,ee,te,le.x2,le.y2,le.x3,le.y3,le.x4,le.y4)}fe?q.call(this):B.call(this,pe)},B=function(ee){switch(ee){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},q=function(){this.pdf.clip(),this.pdf.discardPath()},F=function(ee,te){this.pdf.internal.out(n(ee)+" "+r(te)+" m")},R=function(ee){var te;switch(ee.align){case"right":case"end":te="right";break;case"center":te="center";break;case"left":case"start":default:te="left"}var oe=this.pdf.getTextDimensions(ee.text),ge=ce.call(this,ee.y),ve=he.call(this,ge)-oe.h,ye=this.ctx.transform.applyToPoint(new o(ee.x,ge)),pe=this.ctx.transform.decompose(),fe=new l;fe=(fe=(fe=fe.multiply(pe.translate)).multiply(pe.skew)).multiply(pe.scale);for(var $e,Ne,ot,le=this.ctx.transform.applyToRectangle(new a(ee.x,ge,oe.w,oe.h)),ae=fe.applyToRectangle(new a(ee.x,ve,oe.w,oe.h)),de=I.call(this,ae),re=[],Ae=0;Ae<de.length;Ae+=1)re.indexOf(de[Ae])===-1&&re.push(de[Ae]);if(j(re),this.autoPaging)for(var Ge=re[0],tt=re[re.length-1],at=Ge;at<tt+1;at++){this.pdf.setPage(at);var ut=at===1?this.posY+this.margin[0]:this.margin[0],gt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$t=this.pdf.internal.pageSize.height-this.margin[2],Rt=$t-this.margin[0],Gt=this.pdf.internal.pageSize.width-this.margin[1],ln=Gt-this.margin[3],mn=at===1?0:gt+(at-2)*Rt;if(this.ctx.clip_path.length!==0){var yn=this.path;$e=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T($e,this.posX+this.margin[3],-1*mn+ut),X.call(this,"fill",!0),this.path=yn}var Ze=T([JSON.parse(JSON.stringify(ae))],this.posX+this.margin[3],-mn+ut+this.ctx.prevPageLastElemOffset)[0];ee.scale>=.01&&(Ne=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ne*ee.scale),ot=this.lineWidth,this.lineWidth=ot*ee.scale);var it=this.autoPaging!=="text";if(it||Ze.y+Ze.h<=$t){if(it||Ze.y>=ut&&Ze.x<=Gt){var et=it?ee.text:this.pdf.splitTextToSize(ee.text,ee.maxWidth||Gt-Ze.x)[0],Bt=T([JSON.parse(JSON.stringify(le))],this.posX+this.margin[3],-mn+ut+this.ctx.prevPageLastElemOffset)[0],Zt=it&&(at>Ge||at<tt)&&S.call(this);Zt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ln,Rt,null).clip().discardPath()),this.pdf.text(et,Bt.x,Bt.y,{angle:ee.angle,align:te,renderingMode:ee.renderingMode}),Zt&&this.pdf.restoreGraphicsState()}}else Ze.y<$t&&(this.ctx.prevPageLastElemOffset+=$t-Ze.y);ee.scale>=.01&&(this.pdf.setFontSize(Ne),this.lineWidth=ot)}else ee.scale>=.01&&(Ne=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ne*ee.scale),ot=this.lineWidth,this.lineWidth=ot*ee.scale),this.pdf.text(ee.text,ye.x+this.posX,ye.y+this.posY,{angle:ee.angle,align:te,renderingMode:ee.renderingMode,maxWidth:ee.maxWidth}),ee.scale>=.01&&(this.pdf.setFontSize(Ne),this.lineWidth=ot)},K=function(ee,te,oe,ge){oe=oe||0,ge=ge||0,this.pdf.internal.out(n(ee+oe)+" "+r(te+ge)+" l")},Z=function(ee,te,oe){return this.pdf.lines(ee,te,oe,null,null)},Y=function(ee,te,oe,ge,ve,ye,pe,fe){this.pdf.internal.out([e(i(oe+ee)),e(s(ge+te)),e(i(ve+ee)),e(s(ye+te)),e(i(pe+ee)),e(s(fe+te)),"c"].join(" "))},k=function(ee,te,oe,ge){for(var ve=2*Math.PI,ye=Math.PI/2;te>oe;)te-=ve;var pe=Math.abs(oe-te);pe<ve&&ge&&(pe=ve-pe);for(var fe=[],$e=ge?-1:1,Ne=te;pe>1e-5;){var ot=Ne+$e*Math.min(pe,ye);fe.push(U.call(this,ee,Ne,ot)),pe-=Math.abs(ot-Ne),Ne=ot}return fe},U=function(ee,te,oe){var ge=(oe-te)/2,ve=ee*Math.cos(ge),ye=ee*Math.sin(ge),pe=ve,fe=-ye,$e=pe*pe+fe*fe,Ne=$e+pe*ve+fe*ye,ot=4/3*(Math.sqrt(2*$e*Ne)-Ne)/(pe*ye-fe*ve),le=pe-ot*fe,ae=fe+ot*pe,de=le,re=-ae,Ae=ge+te,Ge=Math.cos(Ae),tt=Math.sin(Ae);return{x1:ee*Math.cos(te),y1:ee*Math.sin(te),x2:le*Ge-ae*tt,y2:le*tt+ae*Ge,x3:de*Ge-re*tt,y3:de*tt+re*Ge,x4:ee*Math.cos(oe),y4:ee*Math.sin(oe)}},H=function(ee){return 180*ee/Math.PI},ue=function(ee,te,oe,ge,ve,ye){var pe=ee+.5*(oe-ee),fe=te+.5*(ge-te),$e=ve+.5*(oe-ve),Ne=ye+.5*(ge-ye),ot=Math.min(ee,ve,pe,$e),le=Math.max(ee,ve,pe,$e),ae=Math.min(te,ye,fe,Ne),de=Math.max(te,ye,fe,Ne);return new a(ot,ae,le-ot,de-ae)},_e=function(ee,te,oe,ge,ve,ye,pe,fe){var $e,Ne,ot,le,ae,de,re,Ae,Ge,tt,at,ut,gt,$t,Rt=oe-ee,Gt=ge-te,ln=ve-oe,mn=ye-ge,yn=pe-ve,Ze=fe-ye;for(Ne=0;Ne<41;Ne++)Ge=(re=(ot=ee+($e=Ne/40)*Rt)+$e*((ae=oe+$e*ln)-ot))+$e*(ae+$e*(ve+$e*yn-ae)-re),tt=(Ae=(le=te+$e*Gt)+$e*((de=ge+$e*mn)-le))+$e*(de+$e*(ye+$e*Ze-de)-Ae),Ne==0?(at=Ge,ut=tt,gt=Ge,$t=tt):(at=Math.min(at,Ge),ut=Math.min(ut,tt),gt=Math.max(gt,Ge),$t=Math.max($t,tt));return new a(Math.round(at),Math.round(ut),Math.round(gt-at),Math.round($t-ut))},Ie=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ee,te,oe=(ee=this.ctx.lineDash,te=this.ctx.lineDashOffset,JSON.stringify({lineDash:ee,lineDashOffset:te}));this.prevLineDash!==oe&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=oe)}}})(xr.API),function(t){var e=function(s){var o,a,l,c,f,p,v,m,C,S;for(a=[],l=0,c=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;c>l;l+=4)(f=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(p=(f=((f=((f=((f=(f-(S=f%85))/85)-(C=f%85))/85)-(m=f%85))/85)-(v=f%85))/85)%85,a.push(p+33,v+33,m+33,C+33,S+33)):a.push(122);return function(I,N){for(var T=N;T>0;T--)I.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(s){var o,a,l,c,f,p=String,v="length",m=255,C="charCodeAt",S="slice",I="replace";for(s[S](-2),s=s[S](0,-2)[I](/\s/g,"")[I]("z","!!!!!"),l=[],c=0,f=(s+=o="uuuuu"[S](s[v]%5||5))[v];f>c;c+=5)a=52200625*(s[C](c)-33)+614125*(s[C](c+1)-33)+7225*(s[C](c+2)-33)+85*(s[C](c+3)-33)+(s[C](c+4)-33),l.push(m&a>>24,m&a>>16,m&a>>8,m&a);return function(N,T){for(var j=T;j>0;j--)N.pop()}(l,o[v]),p.fromCharCode.apply(p,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=fb(o)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(s,o){var a=0,l=s||"",c=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(f){return("0"+f.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(xr.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,f){var p=new XMLHttpRequest,v=0,m=function(C){var S=C.length,I=[],N=String.fromCharCode;for(v=0;v<S;v+=1)I.push(N(255&C.charCodeAt(v)));return I.join("")};if(p.open("GET",l,!c),p.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(p.onload=function(){p.status===200?f(m(this.responseText)):f(void 0)}),p.send(null),c&&p.status===200)return m(p.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(xr.API),function(t){function e(){return(Lr.html2canvas?Promise.resolve(Lr.html2canvas):Sh(()=>import("./html2canvas.esm.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(Lr.DOMPurify?Promise.resolve(Lr.DOMPurify):Sh(()=>import("./purify.es.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=Ri(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),c=o.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(c,f){for(var p=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),v=c.firstChild;v;v=v.nextSibling)f!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||p.appendChild(l(v,f));return c.nodeType===1&&(c.nodeName==="CANVAS"?(p.width=c.width,p.height=c.height,p.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(p.value=c.value),p.addEventListener("load",function(){p.scrollTop=c.scrollTop,p.scrollLeft=c.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var v=0;v<c.length;++v){var m=c[v],C=m.src.find(function(S){return S.format==="truetype"});C&&l.addFont(C.url,m.ref.name,m.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,l.context2d.save(!0),a(this.prop.container,p)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(o=o||xr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,c){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,c){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(c,f){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(p){return l.updateProgress(null,c),p}).then(c,f).then(function(p){return l.updateProgress(1),p})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),f=l.call(c,o,a);return s.convert(f,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,xr.getPageSize=function(o,a,l){if(Ri(o)==="object"){var c=o;o=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var f,p=(""+l).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+a}var m,C=0,S=0;if(v.hasOwnProperty(p))C=v[p][1]/f,S=v[p][0]/f;else try{C=l[1],S=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",S>C&&(m=S,S=C,C=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",C>S&&(m=S,S=C,C=m)}return{width:S,height:C,unit:a,k:f,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(yb):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(xr.API),xr.API.addJS=function(t){return v5=t,this.internal.events.subscribe("postPutResources",function(){mm=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(mm+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),m5=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+v5+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){mm!==void 0&&m5!==void 0&&this.internal.out("/Names <</JavaScript "+mm+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,f=[];for(s=0;s<c;s++){var p=n.internal.newObject();f.push(p);var v=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var m=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<f.length;s++)n.internal.write("(page_"+(s+1)+")"+f[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+m+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(xr.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,c=this.decode.DCT_DECODE,f=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(p){for(var v,m=256*p.charCodeAt(4)+p.charCodeAt(5),C=p.length,S={width:0,height:0,numcomponents:1},I=4;I<C;I+=2){if(I+=m,e.indexOf(p.charCodeAt(I+1))!==-1){v=256*p.charCodeAt(I+5)+p.charCodeAt(I+6),S={width:256*p.charCodeAt(I+7)+p.charCodeAt(I+8),height:v,numcomponents:p.charCodeAt(I+9)};break}m=256*p.charCodeAt(I+2)+p.charCodeAt(I+3)}return S}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}f={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return f}}(xr.API);var Ud,vm,y5,b5,_5,yV=function(){var t,e,n;function r(s){var o,a,l,c,f,p,v,m,C,S,I,N,T,j;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(o=this.readUInt32(),C=(function(){var W,X;for(X=[],W=0;W<4;++W)X.push(String.fromCharCode(this.data[this.pos++]));return X}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),c=this.readUInt16()||100,p.delay=1e3*f/c,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(C==="fdAT"&&(this.pos+=4,o-=4),s=(p!=null?p.data:void 0)||this.imgData,N=0;0<=o?N<o:N>o;0<=o?++N:--N)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((S=l-this.transparency.indexed.length)>0)for(T=0;0<=S?T<S:T>S;0<=S?++T:--T)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":v=(I=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,I.slice(0,v)),this.text[m]=String.fromCharCode.apply(String,I.slice(v+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(j=this.colorType)===4||j===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,c=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function f(p,v,m,C){var S,I,N,T,j,W,X,ce,he,O,B,q,F,R,K,Z,Y,k,U,H,ue,_e=Math.ceil((c.width-p)/m),Ie=Math.ceil((c.height-v)/C),ee=c.width==_e&&c.height==Ie;for(R=o*_e,q=ee?a:new Uint8Array(R*Ie),W=s.length,F=0,I=0;F<Ie&&l<W;){switch(s[l++]){case 0:for(T=Y=0;Y<R;T=Y+=1)q[I++]=s[l++];break;case 1:for(T=k=0;k<R;T=k+=1)S=s[l++],j=T<o?0:q[I-o],q[I++]=(S+j)%256;break;case 2:for(T=U=0;U<R;T=U+=1)S=s[l++],N=(T-T%o)/o,K=F&&q[(F-1)*R+N*o+T%o],q[I++]=(K+S)%256;break;case 3:for(T=H=0;H<R;T=H+=1)S=s[l++],N=(T-T%o)/o,j=T<o?0:q[I-o],K=F&&q[(F-1)*R+N*o+T%o],q[I++]=(S+Math.floor((j+K)/2))%256;break;case 4:for(T=ue=0;ue<R;T=ue+=1)S=s[l++],N=(T-T%o)/o,j=T<o?0:q[I-o],F===0?K=Z=0:(K=q[(F-1)*R+N*o+T%o],Z=N&&q[(F-1)*R+(N-1)*o+T%o]),X=j+K-Z,ce=Math.abs(X-j),O=Math.abs(X-K),B=Math.abs(X-Z),he=ce<=O&&ce<=B?j:O<=B?K:Z,q[I++]=(S+he)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!ee){var te=((v+F*C)*c.width+p)*o,oe=F*R;for(T=0;T<_e;T+=1){for(var ge=0;ge<o;ge+=1)a[te++]=q[oe++];te+=(m-1)*o}}F++}}return s=Z$(s),c.interlaceMethod==1?(f(0,0,8,8),f(4,0,8,8),f(0,4,4,8),f(2,0,4,4),f(0,2,2,4),f(1,0,2,2),f(0,1,1,2)):f(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,c,f,p,v,m;for(a=this.palette,f=this.transparency.indexed||[],c=new Uint8Array((f.length||0)+a.length),l=0,s=0,o=p=0,v=a.length;p<v;o=p+=3)c[l++]=a[o],c[l++]=a[o+1],c[l++]=a[o+2],c[l++]=(m=f[s++])!=null?m:255;return c},r.prototype.copyToImageData=function(s,o){var a,l,c,f,p,v,m,C,S,I,N;if(l=this.colors,S=null,a=this.hasAlphaChannel,this.palette.length&&(S=(N=this._decodedPalette)!=null?N:this._decodedPalette=this.decodePalette(),l=4,a=!0),C=(c=s.data||s).length,p=S||o,f=v=0,l===1)for(;f<C;)m=S?4*o[f/4]:v,I=p[m++],c[f++]=I,c[f++]=I,c[f++]=I,c[f++]=a?p[m++]:255,v=m;else for(;f<C;)m=S?4*o[f/4]:v,c[f++]=p[m++],c[f++]=p[m++],c[f++]=p[m++],c[f++]=a?p[m++]:255,v=m},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(Lr)==="[object Window]"){try{e=Lr.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var o;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,c,f,p,v,m;if(this.animation){for(m=[],a=f=0,p=(v=this.animation.frames).length;f<p;a=++f)o=v[a],l=s.createImageData(o.width,o.height),c=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,c),o.imageData=l,m.push(o.image=t(l));return m}},r.prototype.renderFrame=function(s,o){var a,l,c;return a=(l=this.animation.frames)[o],c=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?s.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&s.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,c,f,p,v=this;return a=0,p=this.animation,c=p.numFrames,l=p.frames,f=p.numPlays,(o=function(){var m,C;if(m=a++%c,C=l[m],v.renderFrame(s,m),c>1&&a/c<f)return v.animation._timeout=setTimeout(o,C.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function bV(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var c=!0,f=[],p=0,v=null,m=0,C=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,C=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((F=t[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var S=t[e++];p=t[e++]|t[e++]<<8,v=t[e++],!(1&S)&&(v=null),m=S>>2&7,e++;break;case 254:for(;;){if(!((F=t[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var I=t[e++]|t[e++]<<8,N=t[e++]|t[e++]<<8,T=t[e++]|t[e++]<<8,j=t[e++]|t[e++]<<8,W=t[e++],X=W>>6&1,ce=1<<(7&W)+1,he=a,O=l,B=!1;W>>7&&(B=!0,he=e,O=ce,e+=3*ce);var q=e;for(e++;;){var F;if(!((F=t[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}f.push({x:I,y:N,width:T,height:j,has_local_palette:B,palette_offset:he,palette_size:O,data_offset:q,data_length:e-q,transparent_index:v,interlaced:!!X,delay:p,disposal:m});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return C},this.frameInfo=function(R){if(R<0||R>=f.length)throw new Error("Frame index out of range.");return f[R]},this.decodeAndBlitFrameBGRA=function(R,K){var Z=this.frameInfo(R),Y=Z.width*Z.height,k=new Uint8Array(Y);w5(t,Z.data_offset,k,Y);var U=Z.palette_offset,H=Z.transparent_index;H===null&&(H=256);var ue=Z.width,_e=n-ue,Ie=ue,ee=4*(Z.y*n+Z.x),te=4*((Z.y+Z.height)*n+Z.x),oe=ee,ge=4*_e;Z.interlaced===!0&&(ge+=4*n*7);for(var ve=8,ye=0,pe=k.length;ye<pe;++ye){var fe=k[ye];if(Ie===0&&(Ie=ue,(oe+=ge)>=te&&(ge=4*_e+4*n*(ve-1),oe=ee+(ue+_e)*(ve<<1),ve>>=1)),fe===H)oe+=4;else{var $e=t[U+3*fe],Ne=t[U+3*fe+1],ot=t[U+3*fe+2];K[oe++]=ot,K[oe++]=Ne,K[oe++]=$e,K[oe++]=255}--Ie}},this.decodeAndBlitFrameRGBA=function(R,K){var Z=this.frameInfo(R),Y=Z.width*Z.height,k=new Uint8Array(Y);w5(t,Z.data_offset,k,Y);var U=Z.palette_offset,H=Z.transparent_index;H===null&&(H=256);var ue=Z.width,_e=n-ue,Ie=ue,ee=4*(Z.y*n+Z.x),te=4*((Z.y+Z.height)*n+Z.x),oe=ee,ge=4*_e;Z.interlaced===!0&&(ge+=4*n*7);for(var ve=8,ye=0,pe=k.length;ye<pe;++ye){var fe=k[ye];if(Ie===0&&(Ie=ue,(oe+=ge)>=te&&(ge=4*_e+4*n*(ve-1),oe=ee+(ue+_e)*(ve<<1),ve>>=1)),fe===H)oe+=4;else{var $e=t[U+3*fe],Ne=t[U+3*fe+1],ot=t[U+3*fe+2];K[oe++]=$e,K[oe++]=Ne,K[oe++]=ot,K[oe++]=255}--Ie}}}function w5(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,c=(1<<l)-1,f=0,p=0,v=0,m=t[e++],C=new Int32Array(4096),S=null;;){for(;f<16&&m!==0;)p|=t[e++]<<f,f+=8,m===1?m=t[e++]:--m;if(f<l)break;var I=p&c;if(p>>=l,f-=l,I!==s){if(I===o)break;for(var N=I<a?I:S,T=0,j=N;j>s;)j=C[j]>>8,++T;var W=j;if(v+T+(N!==I?1:0)>r)return void qi.log("Warning, gif stream longer than expected.");n[v++]=W;var X=v+=T;for(N!==I&&(n[v++]=W),j=N;T--;)j=C[j],n[--X]=255&j,j>>=8;S!==null&&a<4096&&(C[a++]=S<<8|W,a>=c+1&&l<12&&(++l,c=c<<1|1)),S=I}else a=o+1,c=(1<<(l=i+1))-1,S=null}return v!==r&&qi.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Z1(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),f=new Array(64),p=new Array(65535),v=new Array(65535),m=new Array(64),C=new Array(64),S=[],I=0,N=7,T=new Array(64),j=new Array(64),W=new Array(64),X=new Array(256),ce=new Array(2048),he=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],O=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],q=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],F=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],R=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],K=[0,1,2,3,4,5,6,7,8,9,10,11],Z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Y=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function k(ee,te){for(var oe=0,ge=0,ve=new Array,ye=1;ye<=16;ye++){for(var pe=1;pe<=ee[ye];pe++)ve[te[ge]]=[],ve[te[ge]][0]=oe,ve[te[ge]][1]=ye,ge++,oe++;oe*=2}return ve}function U(ee){for(var te=ee[0],oe=ee[1]-1;oe>=0;)te&1<<oe&&(I|=1<<N),oe--,--N<0&&(I==255?(H(255),H(0)):H(I),N=7,I=0)}function H(ee){S.push(ee)}function ue(ee){H(ee>>8&255),H(255&ee)}function _e(ee,te,oe,ge,ve){for(var ye,pe=ve[0],fe=ve[240],$e=function(tt,at){var ut,gt,$t,Rt,Gt,ln,mn,yn,Ze,it,et=0;for(Ze=0;Ze<8;++Ze){ut=tt[et],gt=tt[et+1],$t=tt[et+2],Rt=tt[et+3],Gt=tt[et+4],ln=tt[et+5],mn=tt[et+6];var Bt=ut+(yn=tt[et+7]),Zt=ut-yn,Sn=gt+mn,bn=gt-mn,xn=$t+ln,zn=$t-ln,vn=Rt+Gt,tn=Rt-Gt,un=Bt+vn,Xn=Bt-vn,nr=Sn+xn,ur=Sn-xn;tt[et]=un+nr,tt[et+4]=un-nr;var Rn=.707106781*(ur+Xn);tt[et+2]=Xn+Rn,tt[et+6]=Xn-Rn;var Cr=.382683433*((un=tn+zn)-(ur=bn+Zt)),Ki=.5411961*un+Cr,Ci=1.306562965*ur+Cr,Us=.707106781*(nr=zn+bn),ss=Zt+Us,Gn=Zt-Us;tt[et+5]=Gn+Ki,tt[et+3]=Gn-Ki,tt[et+1]=ss+Ci,tt[et+7]=ss-Ci,et+=8}for(et=0,Ze=0;Ze<8;++Ze){ut=tt[et],gt=tt[et+8],$t=tt[et+16],Rt=tt[et+24],Gt=tt[et+32],ln=tt[et+40],mn=tt[et+48];var Ot=ut+(yn=tt[et+56]),Je=ut-yn,Ut=gt+mn,_n=gt-mn,Xt=$t+ln,Fn=$t-ln,Wt=Rt+Gt,Lt=Rt-Gt,hn=Ot+Wt,Ln=Ot-Wt,On=Ut+Xt,Wn=Ut-Xt;tt[et]=hn+On,tt[et+32]=hn-On;var ar=.707106781*(Wn+Ln);tt[et+16]=Ln+ar,tt[et+48]=Ln-ar;var Xr=.382683433*((hn=Lt+Fn)-(Wn=_n+Je)),sr=.5411961*hn+Xr,Fi=1.306562965*Wn+Xr,Gr=.707106781*(On=Fn+_n),_o=Je+Gr,ir=Je-Gr;tt[et+40]=ir+sr,tt[et+24]=ir-sr,tt[et+8]=_o+Fi,tt[et+56]=_o-Fi,et++}for(Ze=0;Ze<64;++Ze)it=tt[Ze]*at[Ze],m[Ze]=it>0?it+.5|0:it-.5|0;return m}(ee,te),Ne=0;Ne<64;++Ne)C[he[Ne]]=$e[Ne];var ot=C[0]-oe;oe=C[0],ot==0?U(ge[0]):(U(ge[v[ye=32767+ot]]),U(p[ye]));for(var le=63;le>0&&C[le]==0;)le--;if(le==0)return U(pe),oe;for(var ae,de=1;de<=le;){for(var re=de;C[de]==0&&de<=le;)++de;var Ae=de-re;if(Ae>=16){ae=Ae>>4;for(var Ge=1;Ge<=ae;++Ge)U(fe);Ae&=15}ye=32767+C[de],U(ve[(Ae<<4)+v[ye]]),U(p[ye]),de++}return le!=63&&U(pe),oe}function Ie(ee){ee=Math.min(Math.max(ee,1),100),s!=ee&&(function(te){for(var oe=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ge=0;ge<64;ge++){var ve=o((oe[ge]*te+50)/100);ve=Math.min(Math.max(ve,1),255),a[he[ge]]=ve}for(var ye=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],pe=0;pe<64;pe++){var fe=o((ye[pe]*te+50)/100);fe=Math.min(Math.max(fe,1),255),l[he[pe]]=fe}for(var $e=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ne=0,ot=0;ot<8;ot++)for(var le=0;le<8;le++)c[Ne]=1/(a[he[Ne]]*$e[ot]*$e[le]*8),f[Ne]=1/(l[he[Ne]]*$e[ot]*$e[le]*8),Ne++}(ee<50?Math.floor(5e3/ee):Math.floor(200-2*ee)),s=ee)}this.encode=function(ee,te){te&&Ie(te),S=new Array,I=0,N=7,ue(65496),ue(65504),ue(16),H(74),H(70),H(73),H(70),H(0),H(1),H(1),H(0),ue(1),ue(1),H(0),H(0),function(){ue(65499),ue(132),H(0);for(var gt=0;gt<64;gt++)H(a[gt]);H(1);for(var $t=0;$t<64;$t++)H(l[$t])}(),function(gt,$t){ue(65472),ue(17),H(8),ue($t),ue(gt),H(3),H(1),H(17),H(0),H(2),H(17),H(1),H(3),H(17),H(1)}(ee.width,ee.height),function(){ue(65476),ue(418),H(0);for(var gt=0;gt<16;gt++)H(O[gt+1]);for(var $t=0;$t<=11;$t++)H(B[$t]);H(16);for(var Rt=0;Rt<16;Rt++)H(q[Rt+1]);for(var Gt=0;Gt<=161;Gt++)H(F[Gt]);H(1);for(var ln=0;ln<16;ln++)H(R[ln+1]);for(var mn=0;mn<=11;mn++)H(K[mn]);H(17);for(var yn=0;yn<16;yn++)H(Z[yn+1]);for(var Ze=0;Ze<=161;Ze++)H(Y[Ze])}(),ue(65498),ue(12),H(3),H(1),H(0),H(2),H(17),H(3),H(17),H(0),H(63),H(0);var oe=0,ge=0,ve=0;I=0,N=7,this.encode.displayName="_encode_";for(var ye,pe,fe,$e,Ne,ot,le,ae,de,re=ee.data,Ae=ee.width,Ge=ee.height,tt=4*Ae,at=0;at<Ge;){for(ye=0;ye<tt;){for(Ne=tt*at+ye,le=-1,ae=0,de=0;de<64;de++)ot=Ne+(ae=de>>3)*tt+(le=4*(7&de)),at+ae>=Ge&&(ot-=tt*(at+1+ae-Ge)),ye+le>=tt&&(ot-=ye+le-tt+4),pe=re[ot++],fe=re[ot++],$e=re[ot++],T[de]=(ce[pe]+ce[fe+256>>0]+ce[$e+512>>0]>>16)-128,j[de]=(ce[pe+768>>0]+ce[fe+1024>>0]+ce[$e+1280>>0]>>16)-128,W[de]=(ce[pe+1280>>0]+ce[fe+1536>>0]+ce[$e+1792>>0]>>16)-128;oe=_e(T,c,oe,e,r),ge=_e(j,f,ge,n,i),ve=_e(W,f,ve,n,i),ye+=32}at+=8}if(N>=0){var ut=[];ut[1]=N+1,ut[0]=(1<<N+1)-1,U(ut)}return ue(65497),new Uint8Array(S)},t=t||50,function(){for(var ee=String.fromCharCode,te=0;te<256;te++)X[te]=ee(te)}(),e=k(O,B),n=k(R,K),r=k(q,F),i=k(Z,Y),function(){for(var ee=1,te=2,oe=1;oe<=15;oe++){for(var ge=ee;ge<te;ge++)v[32767+ge]=oe,p[32767+ge]=[],p[32767+ge][1]=oe,p[32767+ge][0]=ge;for(var ve=-(te-1);ve<=-ee;ve++)v[32767+ve]=oe,p[32767+ve]=[],p[32767+ve][1]=oe,p[32767+ve][0]=te-1+ve;ee<<=1,te<<=1}}(),function(){for(var ee=0;ee<256;ee++)ce[ee]=19595*ee,ce[ee+256>>0]=38470*ee,ce[ee+512>>0]=7471*ee+32768,ce[ee+768>>0]=-11059*ee,ce[ee+1024>>0]=-21709*ee,ce[ee+1280>>0]=32768*ee+8421375,ce[ee+1536>>0]=-27439*ee,ce[ee+1792>>0]=-5329*ee}(),Ie(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function sc(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function x5(t){function e(O){if(!O)throw Error("assert :P")}function n(O,B,q){for(var F=0;4>F;F++)if(O[B+F]!=q.charCodeAt(F))return!0;return!1}function r(O,B,q,F,R){for(var K=0;K<R;K++)O[B+K]=q[F+K]}function i(O,B,q,F){for(var R=0;R<F;R++)O[B+R]=q}function s(O){return new Int32Array(O)}function o(O,B){for(var q=[],F=0;F<O;F++)q.push(new B);return q}function a(O,B){var q=[];return function F(R,K,Z){for(var Y=Z[K],k=0;k<Y&&(R.push(Z.length>K+1?[]:new B),!(Z.length<K+1));k++)F(R[k],K+1,Z)}(q,0,O),q}var l=function(){var O=this;function B(w,A){for(var G=1<<A-1>>>0;w&G;)G>>>=1;return G?(w&G-1)+G:w}function q(w,A,G,se,xe){e(!(se%G));do w[A+(se-=G)]=xe;while(0<se)}function F(w,A,G,se,xe){if(e(2328>=xe),512>=xe)var Ee=s(512);else if((Ee=s(xe))==null)return 0;return function(ke,Te,Be,He,ht,Dt){var It,wt,qt=Te,zt=1<<Be,ft=s(16),vt=s(16);for(e(ht!=0),e(He!=null),e(ke!=null),e(0<Be),wt=0;wt<ht;++wt){if(15<He[wt])return 0;++ft[He[wt]]}if(ft[0]==ht)return 0;for(vt[1]=0,It=1;15>It;++It){if(ft[It]>1<<It)return 0;vt[It+1]=vt[It]+ft[It]}for(wt=0;wt<ht;++wt)It=He[wt],0<He[wt]&&(Dt[vt[It]++]=wt);if(vt[15]==1)return(He=new R).g=0,He.value=Dt[0],q(ke,qt,1,zt,He),zt;var Jt,an=-1,Qt=zt-1,kn=0,Cn=1,Yn=1,h=1<<Be;for(wt=0,It=1,ht=2;It<=Be;++It,ht<<=1){if(Cn+=Yn<<=1,0>(Yn-=ft[It]))return 0;for(;0<ft[It];--ft[It])(He=new R).g=It,He.value=Dt[wt++],q(ke,qt+kn,ht,h,He),kn=B(kn,It)}for(It=Be+1,ht=2;15>=It;++It,ht<<=1){if(Cn+=Yn<<=1,0>(Yn-=ft[It]))return 0;for(;0<ft[It];--ft[It]){if(He=new R,(kn&Qt)!=an){for(qt+=h,Jt=1<<(an=It)-Be;15>an&&!(0>=(Jt-=ft[an]));)++an,Jt<<=1;zt+=h=1<<(Jt=an-Be),ke[Te+(an=kn&Qt)].g=Jt+Be,ke[Te+an].value=qt-Te-an}He.g=It-Be,He.value=Dt[wt++],q(ke,qt+(kn>>Be),ht,h,He),kn=B(kn,It)}}return Cn!=2*vt[15]-1?0:zt}(w,A,G,se,xe,Ee)}function R(){this.value=this.g=0}function K(){this.value=this.g=0}function Z(){this.G=o(5,R),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Xi,K)}function Y(w,A,G,se){e(w!=null),e(A!=null),e(2147483648>se),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=A,w.pa=G,w.Jd=A,w.Yc=G+se,w.Zc=4<=se?G+se-4+1:G,ye(w)}function k(w,A){for(var G=0;0<A--;)G|=fe(w,128)<<A;return G}function U(w,A){var G=k(w,A);return pe(w)?-G:G}function H(w,A,G,se){var xe,Ee=0;for(e(w!=null),e(A!=null),e(4294967288>se),w.Sb=se,w.Ra=0,w.u=0,w.h=0,4<se&&(se=4),xe=0;xe<se;++xe)Ee+=A[G+xe]<<8*xe;w.Ra=Ee,w.bb=se,w.oa=A,w.pa=G}function ue(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<ro-8>>>0,++w.bb,w.u-=8;oe(w)&&(w.h=1,w.u=0)}function _e(w,A){if(e(0<=A),!w.h&&A<=Co){var G=te(w)&na[A];return w.u+=A,ue(w),G}return w.h=1,w.u=0}function Ie(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ee(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function te(w){return w.Ra>>>(w.u&ro-1)>>>0}function oe(w){return e(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>ro}function ge(w,A){w.u=A,w.h=oe(w)}function ve(w){w.u>=Sl&&(e(w.u>=Sl),ue(w))}function ye(w){e(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(e(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function pe(w){return k(w,1)}function fe(w,A){var G=w.Ca;0>w.b&&ye(w);var se=w.b,xe=G*A>>>8,Ee=(w.I>>>se>xe)+0;for(Ee?(G-=xe,w.I-=xe+1<<se>>>0):G=xe+1,se=G,xe=0;256<=se;)xe+=8,se>>=8;return se=7^xe+Ps[se],w.b-=se,w.Ca=(G<<se)-1,Ee}function $e(w,A,G){w[A+0]=G>>24&255,w[A+1]=G>>16&255,w[A+2]=G>>8&255,w[A+3]=G>>0&255}function Ne(w,A){return w[A+0]<<0|w[A+1]<<8}function ot(w,A){return Ne(w,A)|w[A+2]<<16}function le(w,A){return Ne(w,A)|Ne(w,A+2)<<16}function ae(w,A){var G=1<<A;return e(w!=null),e(0<A),w.X=s(G),w.X==null?0:(w.Mb=32-A,w.Xa=A,1)}function de(w,A){e(w!=null),e(A!=null),e(w.Xa==A.Xa),r(A.X,0,w.X,0,1<<A.Xa)}function re(){this.X=[],this.Xa=this.Mb=0}function Ae(w,A,G,se){e(G!=null),e(se!=null);var xe=G[0],Ee=se[0];return xe==0&&(xe=(w*Ee+A/2)/A),Ee==0&&(Ee=(A*xe+w/2)/w),0>=xe||0>=Ee?0:(G[0]=xe,se[0]=Ee,1)}function Ge(w,A){return w+(1<<A)-1>>>A}function tt(w,A){return((4278255360&w)+(4278255360&A)>>>0&4278255360)+((16711935&w)+(16711935&A)>>>0&16711935)>>>0}function at(w,A){O[A]=function(G,se,xe,Ee,ke,Te,Be){var He;for(He=0;He<ke;++He){var ht=O[w](Te[Be+He-1],xe,Ee+He);Te[Be+He]=tt(G[se+He],ht)}}}function ut(){this.ud=this.hd=this.jd=0}function gt(w,A){return((4278124286&(w^A))>>>1)+(w&A)>>>0}function $t(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function Rt(w,A){return $t(w+(w-A+.5>>1))}function Gt(w,A,G){return Math.abs(A-G)-Math.abs(w-G)}function ln(w,A,G,se,xe,Ee,ke){for(se=Ee[ke-1],G=0;G<xe;++G)Ee[ke+G]=se=tt(w[A+G],se)}function mn(w,A,G,se,xe){var Ee;for(Ee=0;Ee<G;++Ee){var ke=w[A+Ee],Te=ke>>8&255,Be=16711935&(Be=(Be=16711935&ke)+((Te<<16)+Te));se[xe+Ee]=(4278255360&ke)+Be>>>0}}function yn(w,A){A.jd=w>>0&255,A.hd=w>>8&255,A.ud=w>>16&255}function Ze(w,A,G,se,xe,Ee){var ke;for(ke=0;ke<se;++ke){var Te=A[G+ke],Be=Te>>>8,He=Te,ht=255&(ht=(ht=Te>>>16)+((w.jd<<24>>24)*(Be<<24>>24)>>>5));He=255&(He=(He=He+((w.hd<<24>>24)*(Be<<24>>24)>>>5))+((w.ud<<24>>24)*(ht<<24>>24)>>>5)),xe[Ee+ke]=(4278255360&Te)+(ht<<16)+He}}function it(w,A,G,se,xe){O[A]=function(Ee,ke,Te,Be,He,ht,Dt,It,wt){for(Be=Dt;Be<It;++Be)for(Dt=0;Dt<wt;++Dt)He[ht++]=xe(Te[se(Ee[ke++])])},O[w]=function(Ee,ke,Te,Be,He,ht,Dt){var It=8>>Ee.b,wt=Ee.Ea,qt=Ee.K[0],zt=Ee.w;if(8>It)for(Ee=(1<<Ee.b)-1,zt=(1<<It)-1;ke<Te;++ke){var ft,vt=0;for(ft=0;ft<wt;++ft)ft&Ee||(vt=se(Be[He++])),ht[Dt++]=xe(qt[vt&zt]),vt>>=It}else O["VP8LMapColor"+G](Be,He,qt,zt,ht,Dt,ke,Te,wt)}}function et(w,A,G,se,xe){for(G=A+G;A<G;){var Ee=w[A++];se[xe++]=Ee>>16&255,se[xe++]=Ee>>8&255,se[xe++]=Ee>>0&255}}function Bt(w,A,G,se,xe){for(G=A+G;A<G;){var Ee=w[A++];se[xe++]=Ee>>16&255,se[xe++]=Ee>>8&255,se[xe++]=Ee>>0&255,se[xe++]=Ee>>24&255}}function Zt(w,A,G,se,xe){for(G=A+G;A<G;){var Ee=(ke=w[A++])>>16&240|ke>>12&15,ke=ke>>0&240|ke>>28&15;se[xe++]=Ee,se[xe++]=ke}}function Sn(w,A,G,se,xe){for(G=A+G;A<G;){var Ee=(ke=w[A++])>>16&248|ke>>13&7,ke=ke>>5&224|ke>>3&31;se[xe++]=Ee,se[xe++]=ke}}function bn(w,A,G,se,xe){for(G=A+G;A<G;){var Ee=w[A++];se[xe++]=Ee>>0&255,se[xe++]=Ee>>8&255,se[xe++]=Ee>>16&255}}function xn(w,A,G,se,xe,Ee){if(Ee==0)for(G=A+G;A<G;)$e(se,((Ee=w[A++])[0]>>24|Ee[1]>>8&65280|Ee[2]<<8&16711680|Ee[3]<<24)>>>0),xe+=32;else r(se,xe,w,A,G)}function zn(w,A){O[A][0]=O[w+"0"],O[A][1]=O[w+"1"],O[A][2]=O[w+"2"],O[A][3]=O[w+"3"],O[A][4]=O[w+"4"],O[A][5]=O[w+"5"],O[A][6]=O[w+"6"],O[A][7]=O[w+"7"],O[A][8]=O[w+"8"],O[A][9]=O[w+"9"],O[A][10]=O[w+"10"],O[A][11]=O[w+"11"],O[A][12]=O[w+"12"],O[A][13]=O[w+"13"],O[A][14]=O[w+"0"],O[A][15]=O[w+"0"]}function vn(w){return w==gs||w==ms||w==Wo||w==u}function tn(){this.eb=[],this.size=this.A=this.fb=0}function un(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Xn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new tn,this.f.kb=new un,this.sd=null}function nr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ur(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Rn(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function Cr(w,A){var G=w.T,se=A.ba.f.RGBA,xe=se.eb,Ee=se.fb+w.ka*se.A,ke=Ds[A.ba.S],Te=w.y,Be=w.O,He=w.f,ht=w.N,Dt=w.ea,It=w.W,wt=A.cc,qt=A.dc,zt=A.Mc,ft=A.Nc,vt=w.ka,Jt=w.ka+w.T,an=w.U,Qt=an+1>>1;for(vt==0?ke(Te,Be,null,null,He,ht,Dt,It,He,ht,Dt,It,xe,Ee,null,null,an):(ke(A.ec,A.fc,Te,Be,wt,qt,zt,ft,He,ht,Dt,It,xe,Ee-se.A,xe,Ee,an),++G);vt+2<Jt;vt+=2)wt=He,qt=ht,zt=Dt,ft=It,ht+=w.Rc,It+=w.Rc,Ee+=2*se.A,ke(Te,(Be+=2*w.fa)-w.fa,Te,Be,wt,qt,zt,ft,He,ht,Dt,It,xe,Ee-se.A,xe,Ee,an);return Be+=w.fa,w.j+Jt<w.o?(r(A.ec,A.fc,Te,Be,an),r(A.cc,A.dc,He,ht,Qt),r(A.Mc,A.Nc,Dt,It,Qt),G--):1&Jt||ke(Te,Be,null,null,He,ht,Dt,It,He,ht,Dt,It,xe,Ee+se.A,null,null,an),G}function Ki(w,A,G){var se=w.F,xe=[w.J];if(se!=null){var Ee=w.U,ke=A.ba.S,Te=ke==Go||ke==Wo;A=A.ba.f.RGBA;var Be=[0],He=w.ka;Be[0]=w.T,w.Kb&&(He==0?--Be[0]:(--He,xe[0]-=w.width),w.j+w.ka+w.T==w.o&&(Be[0]=w.o-w.j-He));var ht=A.eb;He=A.fb+He*A.A,w=hi(se,xe[0],w.width,Ee,Be,ht,He+(Te?0:3),A.A),e(G==Be),w&&vn(ke)&&ps(ht,He,Te,Ee,Be,A.A)}return 0}function Ci(w){var A=w.ma,G=A.ba.S,se=11>G,xe=G==or||G==Sa||G==Go||G==Ws||G==12||vn(G);if(A.memory=null,A.Ib=null,A.Jb=null,A.Nd=null,!qu(A.Oa,w,xe?11:12))return 0;if(xe&&vn(G)&&on(),w.da)alert("todo:use_scaling");else{if(se){if(A.Ib=Rn,w.Kb){if(G=w.U+1>>1,A.memory=s(w.U+2*G),A.memory==null)return 0;A.ec=A.memory,A.fc=0,A.cc=A.ec,A.dc=A.fc+w.U,A.Mc=A.cc,A.Nc=A.dc+G,A.Ib=Cr,on()}}else alert("todo:EmitYUV");xe&&(A.Jb=Ki,se&&xt())}if(se&&!Pc){for(w=0;256>w;++w)Fh[w]=89858*(w-128)+el>>Rh,jh[w]=-22014*(w-128)+el,Dp[w]=-45773*(w-128),ru[w]=113618*(w-128)+el>>Rh;for(w=rh;w<Pf;++w)A=76283*(w-16)+el>>Rh,zh[w-rh]=Pr(A,255),wd[w-rh]=Pr(A+8>>4,15);Pc=1}return 1}function Us(w){var A=w.ma,G=w.U,se=w.T;return e(!(1&w.ka)),0>=G||0>=se?0:(G=A.Ib(w,A),A.Jb!=null&&A.Jb(w,A,G),A.Dc+=G,1)}function ss(w){w.ma.memory=null}function Gn(w,A,G,se){return _e(w,8)!=47?0:(A[0]=_e(w,14)+1,G[0]=_e(w,14)+1,se[0]=_e(w,1),_e(w,3)!=0?0:!w.h)}function Ot(w,A){if(4>w)return w+1;var G=w-2>>1;return(2+(1&w)<<G)+_e(A,G)+1}function Je(w,A){return 120<A?A-120:1<=(G=((G=nt[A-1])>>4)*w+(8-(15&G)))?G:1;var G}function Ut(w,A,G){var se=te(G),xe=w[A+=255&se].g-8;return 0<xe&&(ge(G,G.u+8),se=te(G),A+=w[A].value,A+=se&(1<<xe)-1),ge(G,G.u+w[A].g),w[A].value}function _n(w,A,G){return G.g+=w.g,G.value+=w.value<<A>>>0,e(8>=G.g),w.g}function Xt(w,A,G){var se=w.xc;return e((A=se==0?0:w.vc[w.md*(G>>se)+(A>>se)])<w.Wb),w.Ya[A]}function Fn(w,A,G,se){var xe=w.ab,Ee=w.c*A,ke=w.C;A=ke+A;var Te=G,Be=se;for(se=w.Ta,G=w.Ua;0<xe--;){var He=w.gc[xe],ht=ke,Dt=A,It=Te,wt=Be,qt=(Be=se,Te=G,He.Ea);switch(e(ht<Dt),e(Dt<=He.nc),He.hc){case 2:Ec(It,wt,(Dt-ht)*qt,Be,Te);break;case 0:var zt=ht,ft=Dt,vt=Be,Jt=Te,an=(h=He).Ea;zt==0&&(Vs(It,wt,null,null,1,vt,Jt),ln(It,wt+1,0,0,an-1,vt,Jt+1),wt+=an,Jt+=an,++zt);for(var Qt=1<<h.b,kn=Qt-1,Cn=Ge(an,h.b),Yn=h.K,h=h.w+(zt>>h.b)*Cn;zt<ft;){var g=Yn,_=h,x=1;for(Hs(It,wt,vt,Jt-an,1,vt,Jt);x<an;){var M=(x&~kn)+Qt;M>an&&(M=an),(0,wa[g[_++]>>8&15])(It,wt+ +x,vt,Jt+x-an,M-x,vt,Jt+x),x=M}wt+=an,Jt+=an,++zt&kn||(h+=Cn)}Dt!=He.nc&&r(Be,Te-qt,Be,Te+(Dt-ht-1)*qt,qt);break;case 1:for(qt=It,ft=wt,an=(It=He.Ea)-(Jt=It&~(vt=(wt=1<<He.b)-1)),zt=Ge(It,He.b),Qt=He.K,He=He.w+(ht>>He.b)*zt;ht<Dt;){for(kn=Qt,Cn=He,Yn=new ut,h=ft+Jt,g=ft+It;ft<h;)yn(kn[Cn++],Yn),xa(Yn,qt,ft,wt,Be,Te),ft+=wt,Te+=wt;ft<g&&(yn(kn[Cn++],Yn),xa(Yn,qt,ft,an,Be,Te),ft+=an,Te+=an),++ht&vt||(He+=zt)}break;case 3:if(It==Be&&wt==Te&&0<He.b){for(ft=Be,It=qt=Te+(Dt-ht)*qt-(Jt=(Dt-ht)*Ge(He.Ea,He.b)),wt=Be,vt=Te,zt=[],Jt=(an=Jt)-1;0<=Jt;--Jt)zt[Jt]=wt[vt+Jt];for(Jt=an-1;0<=Jt;--Jt)ft[It+Jt]=zt[Jt];as(He,ht,Dt,Be,qt,Be,Te)}else as(He,ht,Dt,It,wt,Be,Te)}Te=se,Be=G}Be!=G&&r(se,G,Te,Be,Ee)}function Wt(w,A){var G=w.V,se=w.Ba+w.c*w.C,xe=A-w.C;if(e(A<=w.l.o),e(16>=xe),0<xe){var Ee=w.l,ke=w.Ta,Te=w.Ua,Be=Ee.width;if(Fn(w,xe,G,se),xe=Te=[Te],e((G=w.C)<(se=A)),e(Ee.v<Ee.va),se>Ee.o&&(se=Ee.o),G<Ee.j){var He=Ee.j-G;G=Ee.j,xe[0]+=He*Be}if(G>=se?G=0:(xe[0]+=4*Ee.v,Ee.ka=G-Ee.j,Ee.U=Ee.va-Ee.v,Ee.T=se-G,G=1),G){if(Te=Te[0],11>(G=w.ca).S){var ht=G.f.RGBA,Dt=(se=G.S,xe=Ee.U,Ee=Ee.T,He=ht.eb,ht.A),It=Ee;for(ht=ht.fb+w.Ma*ht.A;0<It--;){var wt=ke,qt=Te,zt=xe,ft=He,vt=ht;switch(se){case so:As(wt,qt,zt,ft,vt);break;case or:ds(wt,qt,zt,ft,vt);break;case gs:ds(wt,qt,zt,ft,vt),ps(ft,vt,0,zt,1,0);break;case Ca:Ts(wt,qt,zt,ft,vt);break;case Sa:xn(wt,qt,zt,ft,vt,1);break;case ms:xn(wt,qt,zt,ft,vt,1),ps(ft,vt,0,zt,1,0);break;case Go:xn(wt,qt,zt,ft,vt,0);break;case Wo:xn(wt,qt,zt,ft,vt,0),ps(ft,vt,1,zt,1,0);break;case Ws:ra(wt,qt,zt,ft,vt);break;case u:ra(wt,qt,zt,ft,vt),si(ft,vt,zt,1,0);break;case th:So(wt,qt,zt,ft,vt);break;default:e(0)}Te+=Be,ht+=Dt}w.Ma+=Ee}else alert("todo:EmitRescaledRowsYUVA");e(w.Ma<=G.height)}}w.C=A,e(w.C<=w.i)}function Lt(w){var A;if(0<w.ua)return 0;for(A=0;A<w.Wb;++A){var G=w.Ya[A].G,se=w.Ya[A].H;if(0<G[1][se[1]+0].g||0<G[2][se[2]+0].g||0<G[3][se[3]+0].g)return 0}return 1}function hn(w,A,G,se,xe,Ee){if(w.Z!=0){var ke=w.qd,Te=w.rd;for(e(Jr[w.Z]!=null);A<G;++A)Jr[w.Z](ke,Te,se,xe,se,xe,Ee),ke=se,Te=xe,xe+=Ee;w.qd=ke,w.rd=Te}}function Ln(w,A){var G=w.l.ma,se=G.Z==0||G.Z==1?w.l.j:w.C;if(se=w.C<se?se:w.C,e(A<=w.l.o),A>se){var xe=w.l.width,Ee=G.ca,ke=G.tb+xe*se,Te=w.V,Be=w.Ba+w.c*se,He=w.gc;e(w.ab==1),e(He[0].hc==3),ks(He[0],se,A,Te,Be,Ee,ke),hn(G,se,A,Ee,ke,xe)}w.C=w.Ma=A}function On(w,A,G,se,xe,Ee,ke){var Te=w.$/se,Be=w.$%se,He=w.m,ht=w.s,Dt=G+w.$,It=Dt;xe=G+se*xe;var wt=G+se*Ee,qt=280+ht.ua,zt=w.Pb?Te:16777216,ft=0<ht.ua?ht.Wa:null,vt=ht.wc,Jt=Dt<wt?Xt(ht,Be,Te):null;e(w.C<Ee),e(wt<=xe);var an=!1;e:for(;;){for(;an||Dt<wt;){var Qt=0;if(Te>=zt){var kn=Dt-G;e((zt=w).Pb),zt.wd=zt.m,zt.xd=kn,0<zt.s.ua&&de(zt.s.Wa,zt.s.vb),zt=Te+jt}if(Be&vt||(Jt=Xt(ht,Be,Te)),e(Jt!=null),Jt.Qb&&(A[Dt]=Jt.qb,an=!0),!an)if(ve(He),Jt.jc){Qt=He,kn=A;var Cn=Dt,Yn=Jt.pd[te(Qt)&Xi-1];e(Jt.jc),256>Yn.g?(ge(Qt,Qt.u+Yn.g),kn[Cn]=Yn.value,Qt=0):(ge(Qt,Qt.u+Yn.g-256),e(256<=Yn.value),Qt=Yn.value),Qt==0&&(an=!0)}else Qt=Ut(Jt.G[0],Jt.H[0],He);if(He.h)break;if(an||256>Qt){if(!an)if(Jt.nd)A[Dt]=(Jt.qb|Qt<<8)>>>0;else{if(ve(He),an=Ut(Jt.G[1],Jt.H[1],He),ve(He),kn=Ut(Jt.G[2],Jt.H[2],He),Cn=Ut(Jt.G[3],Jt.H[3],He),He.h)break;A[Dt]=(Cn<<24|an<<16|Qt<<8|kn)>>>0}if(an=!1,++Dt,++Be>=se&&(Be=0,++Te,ke!=null&&Te<=Ee&&!(Te%16)&&ke(w,Te),ft!=null))for(;It<Dt;)Qt=A[It++],ft.X[(506832829*Qt&4294967295)>>>ft.Mb]=Qt}else if(280>Qt){if(Qt=Ot(Qt-256,He),kn=Ut(Jt.G[4],Jt.H[4],He),ve(He),kn=Je(se,kn=Ot(kn,He)),He.h)break;if(Dt-G<kn||xe-Dt<Qt)break e;for(Cn=0;Cn<Qt;++Cn)A[Dt+Cn]=A[Dt+Cn-kn];for(Dt+=Qt,Be+=Qt;Be>=se;)Be-=se,++Te,ke!=null&&Te<=Ee&&!(Te%16)&&ke(w,Te);if(e(Dt<=xe),Be&vt&&(Jt=Xt(ht,Be,Te)),ft!=null)for(;It<Dt;)Qt=A[It++],ft.X[(506832829*Qt&4294967295)>>>ft.Mb]=Qt}else{if(!(Qt<qt))break e;for(an=Qt-280,e(ft!=null);It<Dt;)Qt=A[It++],ft.X[(506832829*Qt&4294967295)>>>ft.Mb]=Qt;Qt=Dt,e(!(an>>>(kn=ft).Xa)),A[Qt]=kn.X[an],an=!0}an||e(He.h==oe(He))}if(w.Pb&&He.h&&Dt<xe)e(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&de(w.s.vb,w.s.Wa);else{if(He.h)break e;ke!=null&&ke(w,Te>Ee?Ee:Te),w.a=0,w.$=Dt-G}return 1}return w.a=3,0}function Wn(w){e(w!=null),w.vc=null,w.yc=null,w.Ya=null;var A=w.Wa;A!=null&&(A.X=null),w.vb=null,e(w!=null)}function ar(){var w=new xl;return w==null?null:(w.a=0,w.xb=Cu,zn("Predictor","VP8LPredictors"),zn("Predictor","VP8LPredictors_C"),zn("PredictorAdd","VP8LPredictorsAdd"),zn("PredictorAdd","VP8LPredictorsAdd_C"),Ec=mn,xa=Ze,As=et,ds=Bt,ra=Zt,So=Sn,Ts=bn,O.VP8LMapColor32b=_a,O.VP8LMapColor8b=Ms,w)}function Xr(w,A,G,se,xe){var Ee=1,ke=[w],Te=[A],Be=se.m,He=se.s,ht=null,Dt=0;e:for(;;){if(G)for(;Ee&&_e(Be,1);){var It=ke,wt=Te,qt=se,zt=1,ft=qt.m,vt=qt.gc[qt.ab],Jt=_e(ft,2);if(qt.Oc&1<<Jt)Ee=0;else{switch(qt.Oc|=1<<Jt,vt.hc=Jt,vt.Ea=It[0],vt.nc=wt[0],vt.K=[null],++qt.ab,e(4>=qt.ab),Jt){case 0:case 1:vt.b=_e(ft,3)+2,zt=Xr(Ge(vt.Ea,vt.b),Ge(vt.nc,vt.b),0,qt,vt.K),vt.K=vt.K[0];break;case 3:var an,Qt=_e(ft,8)+1,kn=16<Qt?0:4<Qt?1:2<Qt?2:3;if(It[0]=Ge(vt.Ea,kn),vt.b=kn,an=zt=Xr(Qt,1,0,qt,vt.K)){var Cn,Yn=Qt,h=vt,g=1<<(8>>h.b),_=s(g);if(_==null)an=0;else{var x=h.K[0],M=h.w;for(_[0]=h.K[0][0],Cn=1;Cn<1*Yn;++Cn)_[Cn]=tt(x[M+Cn],_[Cn-1]);for(;Cn<4*g;++Cn)_[Cn]=0;h.K[0]=null,h.K[0]=_,an=1}}zt=an;break;case 2:break;default:e(0)}Ee=zt}}if(ke=ke[0],Te=Te[0],Ee&&_e(Be,1)&&!(Ee=1<=(Dt=_e(Be,4))&&11>=Dt)){se.a=3;break e}var $;if($=Ee)t:{var J,ne,me,Ce=se,Ye=ke,Ve=Te,mt=Dt,Mt=G,Kt=Ce.m,fn=Ce.s,wn=[null],rr=1,qe=0,Xe=Pt[mt];n:for(;;){if(Mt&&_e(Kt,1)){var ct=_e(Kt,3)+2,Nt=Ge(Ye,ct),_t=Ge(Ve,ct),Tt=Nt*_t;if(!Xr(Nt,_t,0,Ce,wn))break n;for(wn=wn[0],fn.xc=ct,J=0;J<Tt;++J){var be=wn[J]>>8&65535;wn[J]=be,be>=rr&&(rr=be+1)}}if(Kt.h)break n;for(ne=0;5>ne;++ne){var Pe=V[ne];!ne&&0<mt&&(Pe+=1<<mt),qe<Pe&&(qe=Pe)}var Fe=o(rr*Xe,R),Re=rr,ze=o(Re,Z);if(ze==null)var Ue=null;else e(65536>=Re),Ue=ze;var rt=s(qe);if(Ue==null||rt==null||Fe==null){Ce.a=1;break n}var st=Fe;for(J=me=0;J<rr;++J){var dt=Ue[J],Ct=dt.G,St=dt.H,en=0,Nn=1,jn=0;for(ne=0;5>ne;++ne){Pe=V[ne],Ct[ne]=st,St[ne]=me,!ne&&0<mt&&(Pe+=1<<mt);i:{var Kn,Qr=Pe,fi=Ce,Br=rt,yi=st,lo=me,Zu=0,ca=fi.m,kf=_e(ca,1);if(i(Br,0,0,Qr),kf){var tl=_e(ca,1)+1,kc=_e(ca,1),ha=_e(ca,kc==0?1:8);Br[ha]=1,tl==2&&(Br[ha=_e(ca,8)]=1);var Is=1}else{var Gi=s(19),Ed=_e(ca,4)+4;if(19<Ed){fi.a=3;var Mf=0;break i}for(Kn=0;Kn<Ed;++Kn)Gi[Se[Kn]]=_e(ca,3);var Af=void 0,Tf=void 0,Pd=fi,Vr=Gi,kd=Qr,D0=Br,ih=0,Xu=Pd.m,I0=8,N0=o(128,R);r:for(;F(N0,0,7,Vr,19);){if(_e(Xu,1)){var El=2+2*_e(Xu,3);if((Af=2+_e(Xu,El))>kd)break r}else Af=kd;for(Tf=0;Tf<kd&&Af--;){ve(Xu);var B0=N0[0+(127&te(Xu))];ge(Xu,Xu.u+B0.g);var Ju=B0.value;if(16>Ju)D0[Tf++]=Ju,Ju!=0&&(I0=Ju);else{var Ip=Ju==16,Np=Ju-16,R0=P[Np],Pa=_e(Xu,y[Np])+R0;if(Tf+Pa>kd)break r;for(var Mc=Ip?I0:0;0<Pa--;)D0[Tf++]=Mc}}ih=1;break r}ih||(Pd.a=3),Is=ih}(Is=Is&&!ca.h)&&(Zu=F(yi,lo,8,Br,Qr)),Is&&Zu!=0?Mf=Zu:(fi.a=3,Mf=0)}if(Mf==0)break n;if(Nn&&ie[ne]==1&&(Nn=st[me].g==0),en+=st[me].g,me+=Mf,3>=ne){var sh,Md=rt[0];for(sh=1;sh<Pe;++sh)rt[sh]>Md&&(Md=rt[sh]);jn+=Md}}if(dt.nd=Nn,dt.Qb=0,Nn&&(dt.qb=(Ct[3][St[3]+0].value<<24|Ct[1][St[1]+0].value<<16|Ct[2][St[2]+0].value)>>>0,en==0&&256>Ct[0][St[0]+0].value&&(dt.Qb=1,dt.qb+=Ct[0][St[0]+0].value<<8)),dt.jc=!dt.Qb&&6>jn,dt.jc){var oh,Su=dt;for(oh=0;oh<Xi;++oh){var Eu=oh,Qu=Su.pd[Eu],Uh=Su.G[0][Su.H[0]+Eu];256<=Uh.value?(Qu.g=Uh.g+256,Qu.value=Uh.value):(Qu.g=0,Qu.value=0,Eu>>=_n(Uh,8,Qu),Eu>>=_n(Su.G[1][Su.H[1]+Eu],16,Qu),Eu>>=_n(Su.G[2][Su.H[2]+Eu],0,Qu),_n(Su.G[3][Su.H[3]+Eu],24,Qu))}}}fn.vc=wn,fn.Wb=rr,fn.Ya=Ue,fn.yc=Fe,$=1;break t}$=0}if(!(Ee=$)){se.a=3;break e}if(0<Dt){if(He.ua=1<<Dt,!ae(He.Wa,Dt)){se.a=1,Ee=0;break e}}else He.ua=0;var Of=se,ec=ke,Uy=Te,Pu=Of.s,Ad=Pu.xc;if(Of.c=ec,Of.i=Uy,Pu.md=Ge(ec,Ad),Pu.wc=Ad==0?-1:(1<<Ad)-1,G){se.xb=Ef;break e}if((ht=s(ke*Te))==null){se.a=1,Ee=0;break e}Ee=(Ee=On(se,ht,0,ke,Te,Te,null))&&!Be.h;break e}return Ee?(xe!=null?xe[0]=ht:(e(ht==null),e(G)),se.$=0,G||Wn(He)):Wn(He),Ee}function sr(w,A){var G=w.c*w.i,se=G+A+16*A;return e(w.c<=A),w.V=s(se),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+G+A,1)}function Fi(w,A){var G=w.C,se=A-G,xe=w.V,Ee=w.Ba+w.c*G;for(e(A<=w.l.o);0<se;){var ke=16<se?16:se,Te=w.l.ma,Be=w.l.width,He=Be*ke,ht=Te.ca,Dt=Te.tb+Be*G,It=w.Ta,wt=w.Ua;Fn(w,ke,xe,Ee),Hi(It,wt,ht,Dt,He),hn(Te,G,G+ke,ht,Dt,Be),se-=ke,xe+=ke*w.c,G+=ke}e(G==A),w.C=w.Ma=A}function Gr(){this.ub=this.yd=this.td=this.Rb=0}function _o(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ir(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function gr(){this.Yb=function(){var w=[];return function A(G,se,xe){for(var Ee=xe[se],ke=0;ke<Ee&&(G.push(xe.length>se+1?[]:0),!(xe.length<se+1));ke++)A(G[ke],se+1,xe)}(w,0,[3,11]),w}()}function Ls(){this.jb=s(3),this.Wc=a([4,8],gr),this.Xc=a([4,17],gr)}function Ha(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function vu(){this.ld=this.La=this.dd=this.tc=0}function _c(){this.Na=this.la=0}function wc(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function gl(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ml(){this.uc=this.M=this.Nb=0,this.wa=Array(new vu),this.Y=0,this.ya=Array(new gl),this.aa=0,this.l=new Mo}function $u(){this.y=s(16),this.f=s(8),this.ea=s(8)}function xc(){this.cb=this.a=0,this.sc="",this.m=new Ie,this.Od=new Gr,this.Kc=new _o,this.ed=new Ha,this.Qa=new ir,this.Ic=this.$c=this.Aa=0,this.D=new ml,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Ie),this.ia=0,this.pb=o(4,wc),this.Pa=new Ls,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new $u),this.Hd=0,this.rb=Array(new _c),this.sb=0,this.wa=Array(new vu),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new gl),this.L=this.aa=0,this.gd=a([4,2],vu),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Mo(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Wr(){var w=new xc;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,qn||(qn=Ro)),w}function fr(w,A,G){return w.a==0&&(w.a=A,w.sc=G,w.cb=0),0}function Ga(w,A,G){return 3<=G&&w[A+0]==157&&w[A+1]==1&&w[A+2]==42}function ga(w,A){if(w==null)return 0;if(w.a=0,w.sc="OK",A==null)return fr(w,2,"null VP8Io passed to VP8GetHeaders()");var G=A.data,se=A.w,xe=A.ha;if(4>xe)return fr(w,7,"Truncated header.");var Ee=G[se+0]|G[se+1]<<8|G[se+2]<<16,ke=w.Od;if(ke.Rb=!(1&Ee),ke.td=Ee>>1&7,ke.yd=Ee>>4&1,ke.ub=Ee>>5,3<ke.td)return fr(w,3,"Incorrect keyframe parameters.");if(!ke.yd)return fr(w,4,"Frame not displayable.");se+=3,xe-=3;var Te=w.Kc;if(ke.Rb){if(7>xe)return fr(w,7,"cannot parse picture header");if(!Ga(G,se,xe))return fr(w,3,"Bad code word");Te.c=16383&(G[se+4]<<8|G[se+3]),Te.Td=G[se+4]>>6,Te.i=16383&(G[se+6]<<8|G[se+5]),Te.Ud=G[se+6]>>6,se+=7,xe-=7,w.za=Te.c+15>>4,w.Ub=Te.i+15>>4,A.width=Te.c,A.height=Te.i,A.Da=0,A.j=0,A.v=0,A.va=A.width,A.o=A.height,A.da=0,A.ib=A.width,A.hb=A.height,A.U=A.width,A.T=A.height,i((Ee=w.Pa).jb,0,255,Ee.jb.length),e((Ee=w.Qa)!=null),Ee.Cb=0,Ee.Bb=0,Ee.Fb=1,i(Ee.Zb,0,0,Ee.Zb.length),i(Ee.Lb,0,0,Ee.Lb)}if(ke.ub>xe)return fr(w,7,"bad partition length");Y(Ee=w.m,G,se,ke.ub),se+=ke.ub,xe-=ke.ub,ke.Rb&&(Te.Ld=pe(Ee),Te.Kd=pe(Ee)),Te=w.Qa;var Be,He=w.Pa;if(e(Ee!=null),e(Te!=null),Te.Cb=pe(Ee),Te.Cb){if(Te.Bb=pe(Ee),pe(Ee)){for(Te.Fb=pe(Ee),Be=0;4>Be;++Be)Te.Zb[Be]=pe(Ee)?U(Ee,7):0;for(Be=0;4>Be;++Be)Te.Lb[Be]=pe(Ee)?U(Ee,6):0}if(Te.Bb)for(Be=0;3>Be;++Be)He.jb[Be]=pe(Ee)?k(Ee,8):255}else Te.Bb=0;if(Ee.Ka)return fr(w,3,"cannot parse segment header");if((Te=w.ed).zd=pe(Ee),Te.Tb=k(Ee,6),Te.wb=k(Ee,3),Te.Pc=pe(Ee),Te.Pc&&pe(Ee)){for(He=0;4>He;++He)pe(Ee)&&(Te.vd[He]=U(Ee,6));for(He=0;4>He;++He)pe(Ee)&&(Te.od[He]=U(Ee,6))}if(w.L=Te.Tb==0?0:Te.zd?1:2,Ee.Ka)return fr(w,3,"cannot parse filter header");var ht=xe;if(xe=Be=se,se=Be+ht,Te=ht,w.Xb=(1<<k(w.m,2))-1,ht<3*(He=w.Xb))G=7;else{for(Be+=3*He,Te-=3*He,ht=0;ht<He;++ht){var Dt=G[xe+0]|G[xe+1]<<8|G[xe+2]<<16;Dt>Te&&(Dt=Te),Y(w.Jc[+ht],G,Be,Dt),Be+=Dt,Te-=Dt,xe+=3}Y(w.Jc[+He],G,Be,Te),G=Be<se?0:5}if(G!=0)return fr(w,G,"cannot parse partitions");for(G=k(Be=w.m,7),xe=pe(Be)?U(Be,4):0,se=pe(Be)?U(Be,4):0,Te=pe(Be)?U(Be,4):0,He=pe(Be)?U(Be,4):0,Be=pe(Be)?U(Be,4):0,ht=w.Qa,Dt=0;4>Dt;++Dt){if(ht.Cb){var It=ht.Zb[Dt];ht.Fb||(It+=G)}else{if(0<Dt){w.pb[Dt]=w.pb[0];continue}It=G}var wt=w.pb[Dt];wt.Sc[0]=nn[Pr(It+xe,127)],wt.Sc[1]=An[Pr(It+0,127)],wt.Eb[0]=2*nn[Pr(It+se,127)],wt.Eb[1]=101581*An[Pr(It+Te,127)]>>16,8>wt.Eb[1]&&(wt.Eb[1]=8),wt.Qc[0]=nn[Pr(It+He,117)],wt.Qc[1]=An[Pr(It+Be,127)],wt.lc=It+Be}if(!ke.Rb)return fr(w,4,"Not a key frame.");for(pe(Ee),ke=w.Pa,G=0;4>G;++G){for(xe=0;8>xe;++xe)for(se=0;3>se;++se)for(Te=0;11>Te;++Te)He=fe(Ee,oo[G][xe][se][Te])?k(Ee,8):vs[G][xe][se][Te],ke.Wc[G][xe].Yb[se][Te]=He;for(xe=0;17>xe;++xe)ke.Xc[G][xe]=ke.Wc[G][nh[xe]]}return w.kc=pe(Ee),w.kc&&(w.Bd=k(Ee,8)),w.cb=1}function Ro(w,A,G,se,xe,Ee,ke){var Te=A[xe].Yb[G];for(G=0;16>xe;++xe){if(!fe(w,Te[G+0]))return xe;for(;!fe(w,Te[G+1]);)if(Te=A[++xe].Yb[0],G=0,xe==16)return 16;var Be=A[xe+1].Yb;if(fe(w,Te[G+2])){var He=w,ht=0;if(fe(He,(It=Te)[(Dt=G)+3]))if(fe(He,It[Dt+6])){for(Te=0,Dt=2*(ht=fe(He,It[Dt+8]))+(It=fe(He,It[Dt+9+ht])),ht=0,It=Sr[Dt];It[Te];++Te)ht+=ht+fe(He,It[Te]);ht+=3+(8<<Dt)}else fe(He,It[Dt+7])?(ht=7+2*fe(He,165),ht+=fe(He,145)):ht=5+fe(He,159);else ht=fe(He,It[Dt+4])?3+fe(He,It[Dt+5]):2;Te=Be[2]}else ht=1,Te=Be[1];Be=ke+Qi[xe],0>(He=w).b&&ye(He);var Dt,It=He.b,wt=(Dt=He.Ca>>1)-(He.I>>It)>>31;--He.b,He.Ca+=wt,He.Ca|=1,He.I-=(Dt+1&wt)<<It,Ee[Be]=((ht^wt)-wt)*se[(0<xe)+0]}return 16}function ql(w){var A=w.rb[w.sb-1];A.la=0,A.Na=0,i(w.zc,0,0,w.zc.length),w.ja=0}function mr(w,A){if(w==null)return 0;if(A==null)return fr(w,2,"NULL VP8Io parameter in VP8Decode().");if(!w.cb&&!ga(w,A))return 0;if(e(w.cb),A.ac==null||A.ac(A)){A.ob&&(w.L=0);var G=Ea[w.L];if(w.L==2?(w.yb=0,w.zb=0):(w.yb=A.v-G>>4,w.zb=A.j-G>>4,0>w.yb&&(w.yb=0),0>w.zb&&(w.zb=0)),w.Va=A.o+15+G>>4,w.Hb=A.va+15+G>>4,w.Hb>w.za&&(w.Hb=w.za),w.Va>w.Ub&&(w.Va=w.Ub),0<w.L){var se=w.ed;for(G=0;4>G;++G){var xe;if(w.Qa.Cb){var Ee=w.Qa.Lb[G];w.Qa.Fb||(Ee+=se.Tb)}else Ee=se.Tb;for(xe=0;1>=xe;++xe){var ke=w.gd[G][xe],Te=Ee;if(se.Pc&&(Te+=se.vd[0],xe&&(Te+=se.od[0])),0<(Te=0>Te?0:63<Te?63:Te)){var Be=Te;0<se.wb&&(Be=4<se.wb?Be>>2:Be>>1)>9-se.wb&&(Be=9-se.wb),1>Be&&(Be=1),ke.dd=Be,ke.tc=2*Te+Be,ke.ld=40<=Te?2:15<=Te?1:0}else ke.tc=0;ke.La=xe}}}G=0}else fr(w,6,"Frame setup failed"),G=w.a;if(G=G==0){if(G){w.$c=0,0<w.Aa||(w.Ic=Cd);e:{G=w.Ic,se=4*(Be=w.za);var He=32*Be,ht=Be+1,Dt=0<w.L?Be*(0<w.Aa?2:1):0,It=(w.Aa==2?2:1)*Be;if((ke=se+832+(xe=3*(16*G+Ea[w.L])/2*He)+(Ee=w.Fa!=null&&0<w.Fa.length?w.Kc.c*w.Kc.i:0))!=ke)G=0;else{if(ke>w.Vb){if(w.Vb=0,w.Ec=s(ke),w.Fc=0,w.Ec==null){G=fr(w,1,"no memory during frame initialization.");break e}w.Vb=ke}ke=w.Ec,Te=w.Fc,w.Ac=ke,w.Bc=Te,Te+=se,w.Gd=o(He,$u),w.Hd=0,w.rb=o(ht+1,_c),w.sb=1,w.wa=Dt?o(Dt,vu):null,w.Y=0,w.D.Nb=0,w.D.wa=w.wa,w.D.Y=w.Y,0<w.Aa&&(w.D.Y+=Be),e(!0),w.oc=ke,w.pc=Te,Te+=832,w.ya=o(It,gl),w.aa=0,w.D.ya=w.ya,w.D.aa=w.aa,w.Aa==2&&(w.D.aa+=Be),w.R=16*Be,w.B=8*Be,Be=(He=Ea[w.L])*w.R,He=He/2*w.B,w.sa=ke,w.ta=Te+Be,w.qa=w.sa,w.ra=w.ta+16*G*w.R+He,w.Ha=w.qa,w.Ia=w.ra+8*G*w.B+He,w.$c=0,Te+=xe,w.mb=Ee?ke:null,w.nb=Ee?Te:null,e(Te+Ee<=w.Fc+w.Vb),ql(w),i(w.Ac,w.Bc,0,se),G=1}}if(G){if(A.ka=0,A.y=w.sa,A.O=w.ta,A.f=w.qa,A.N=w.ra,A.ea=w.Ha,A.Vd=w.Ia,A.fa=w.R,A.Rc=w.B,A.F=null,A.J=0,!Yu){for(G=-255;255>=G;++G)vi[255+G]=0>G?-G:G;for(G=-1020;1020>=G;++G)Eo[1020+G]=-128>G?-128:127<G?127:G;for(G=-112;112>=G;++G)io[112+G]=-16>G?-16:15<G?15:G;for(G=-255;510>=G;++G)To[255+G]=0>G?0:255<G?255:G;Yu=1}yt=qa,Vt=vl,Pn=ma,Un=Di,hr=Fo,kt=Vu,Ei=xu,ii=ea,nu=Ao,Gs=eu,Pi=Jl,ia=Ql,La=ti,sa=Sc,oa=zi,aa=er,Nr=Ui,Ho=wl,qo[0]=$r,qo[1]=yu,qo[2]=vr,qo[3]=zo,qo[4]=Gu,qo[5]=bl,qo[6]=yl,qo[7]=Uo,qo[8]=Wu,qo[9]=Za,ua[0]=Yl,ua[1]=Hu,ua[2]=jo,ua[3]=va,ua[4]=os,ua[5]=Lc,ua[6]=bu,Oo[0]=Xa,Oo[1]=Ya,Oo[2]=Kl,Oo[3]=dr,Oo[4]=Zl,Oo[5]=Cc,Oo[6]=_u,G=1}else G=0}G&&(G=function(wt,qt){for(wt.M=0;wt.M<wt.Va;++wt.M){var zt,ft=wt.Jc[wt.M&wt.Xb],vt=wt.m,Jt=wt;for(zt=0;zt<Jt.za;++zt){var an=vt,Qt=Jt,kn=Qt.Ac,Cn=Qt.Bc+4*zt,Yn=Qt.zc,h=Qt.ya[Qt.aa+zt];if(Qt.Qa.Bb?h.$b=fe(an,Qt.Pa.jb[0])?2+fe(an,Qt.Pa.jb[2]):fe(an,Qt.Pa.jb[1]):h.$b=0,Qt.kc&&(h.Ad=fe(an,Qt.Bd)),h.Za=!fe(an,145)+0,h.Za){var g=h.Ob,_=0;for(Qt=0;4>Qt;++Qt){var x,M=Yn[0+Qt];for(x=0;4>x;++x){M=ki[kn[Cn+x]][M];for(var $=Ii[fe(an,M[0])];0<$;)$=Ii[2*$+fe(an,M[$])];M=-$,kn[Cn+x]=M}r(g,_,kn,Cn,4),_+=4,Yn[0+Qt]=M}}else M=fe(an,156)?fe(an,128)?1:3:fe(an,163)?2:0,h.Ob[0]=M,i(kn,Cn,M,4),i(Yn,0,M,4);h.Dd=fe(an,142)?fe(an,114)?fe(an,183)?1:3:2:0}if(Jt.m.Ka)return fr(wt,7,"Premature end-of-partition0 encountered.");for(;wt.ja<wt.za;++wt.ja){if(Jt=ft,an=(vt=wt).rb[vt.sb-1],kn=vt.rb[vt.sb+vt.ja],zt=vt.ya[vt.aa+vt.ja],Cn=vt.kc?zt.Ad:0)an.la=kn.la=0,zt.Za||(an.Na=kn.Na=0),zt.Hc=0,zt.Gc=0,zt.ia=0;else{var J,ne;if(an=kn,kn=Jt,Cn=vt.Pa.Xc,Yn=vt.ya[vt.aa+vt.ja],h=vt.pb[Yn.$b],Qt=Yn.ad,g=0,_=vt.rb[vt.sb-1],M=x=0,i(Qt,g,0,384),Yn.Za)var me=0,Ce=Cn[3];else{$=s(16);var Ye=an.Na+_.Na;if(Ye=qn(kn,Cn[1],Ye,h.Eb,0,$,0),an.Na=_.Na=(0<Ye)+0,1<Ye)yt($,0,Qt,g);else{var Ve=$[0]+3>>3;for($=0;256>$;$+=16)Qt[g+$]=Ve}me=1,Ce=Cn[0]}var mt=15&an.la,Mt=15&_.la;for($=0;4>$;++$){var Kt=1&Mt;for(Ve=ne=0;4>Ve;++Ve)mt=mt>>1|(Kt=(Ye=qn(kn,Ce,Ye=Kt+(1&mt),h.Sc,me,Qt,g))>me)<<7,ne=ne<<2|(3<Ye?3:1<Ye?2:Qt[g+0]!=0),g+=16;mt>>=4,Mt=Mt>>1|Kt<<7,x=(x<<8|ne)>>>0}for(Ce=mt,me=Mt>>4,J=0;4>J;J+=2){for(ne=0,mt=an.la>>4+J,Mt=_.la>>4+J,$=0;2>$;++$){for(Kt=1&Mt,Ve=0;2>Ve;++Ve)Ye=Kt+(1&mt),mt=mt>>1|(Kt=0<(Ye=qn(kn,Cn[2],Ye,h.Qc,0,Qt,g)))<<3,ne=ne<<2|(3<Ye?3:1<Ye?2:Qt[g+0]!=0),g+=16;mt>>=2,Mt=Mt>>1|Kt<<5}M|=ne<<4*J,Ce|=mt<<4<<J,me|=(240&Mt)<<J}an.la=Ce,_.la=me,Yn.Hc=x,Yn.Gc=M,Yn.ia=43690&M?0:h.ia,Cn=!(x|M)}if(0<vt.L&&(vt.wa[vt.Y+vt.ja]=vt.gd[zt.$b][zt.Za],vt.wa[vt.Y+vt.ja].La|=!Cn),Jt.Ka)return fr(wt,7,"Premature end-of-file encountered.")}if(ql(wt),vt=qt,Jt=1,zt=(ft=wt).D,an=0<ft.L&&ft.M>=ft.zb&&ft.M<=ft.Va,ft.Aa==0)e:{if(zt.M=ft.M,zt.uc=an,Lu(ft,zt),Jt=1,zt=(ne=ft.D).Nb,an=(M=Ea[ft.L])*ft.R,kn=M/2*ft.B,$=16*zt*ft.R,Ve=8*zt*ft.B,Cn=ft.sa,Yn=ft.ta-an+$,h=ft.qa,Qt=ft.ra-kn+Ve,g=ft.Ha,_=ft.Ia-kn+Ve,Mt=(mt=ne.M)==0,x=mt>=ft.Va-1,ft.Aa==2&&Lu(ft,ne),ne.uc)for(Kt=(Ye=ft).D.M,e(Ye.D.uc),ne=Ye.yb;ne<Ye.Hb;++ne){me=ne,Ce=Kt;var fn=(wn=(Pe=Ye).D).Nb;J=Pe.R;var wn=wn.wa[wn.Y+me],rr=Pe.sa,qe=Pe.ta+16*fn*J+16*me,Xe=wn.dd,ct=wn.tc;if(ct!=0)if(e(3<=ct),Pe.L==1)0<me&&aa(rr,qe,J,ct+4),wn.La&&Ho(rr,qe,J,ct),0<Ce&&oa(rr,qe,J,ct+4),wn.La&&Nr(rr,qe,J,ct);else{var Nt=Pe.B,_t=Pe.qa,Tt=Pe.ra+8*fn*Nt+8*me,be=Pe.Ha,Pe=Pe.Ia+8*fn*Nt+8*me;fn=wn.ld,0<me&&(ii(rr,qe,J,ct+4,Xe,fn),Gs(_t,Tt,be,Pe,Nt,ct+4,Xe,fn)),wn.La&&(ia(rr,qe,J,ct,Xe,fn),sa(_t,Tt,be,Pe,Nt,ct,Xe,fn)),0<Ce&&(Ei(rr,qe,J,ct+4,Xe,fn),nu(_t,Tt,be,Pe,Nt,ct+4,Xe,fn)),wn.La&&(Pi(rr,qe,J,ct,Xe,fn),La(_t,Tt,be,Pe,Nt,ct,Xe,fn))}}if(ft.ia&&alert("todo:DitherRow"),vt.put!=null){if(ne=16*mt,mt=16*(mt+1),Mt?(vt.y=ft.sa,vt.O=ft.ta+$,vt.f=ft.qa,vt.N=ft.ra+Ve,vt.ea=ft.Ha,vt.W=ft.Ia+Ve):(ne-=M,vt.y=Cn,vt.O=Yn,vt.f=h,vt.N=Qt,vt.ea=g,vt.W=_),x||(mt-=M),mt>vt.o&&(mt=vt.o),vt.F=null,vt.J=null,ft.Fa!=null&&0<ft.Fa.length&&ne<mt&&(vt.J=$i(ft,vt,ne,mt-ne),vt.F=ft.mb,vt.F==null&&vt.F.length==0)){Jt=fr(ft,3,"Could not decode alpha data.");break e}ne<vt.j&&(M=vt.j-ne,ne=vt.j,e(!(1&M)),vt.O+=ft.R*M,vt.N+=ft.B*(M>>1),vt.W+=ft.B*(M>>1),vt.F!=null&&(vt.J+=vt.width*M)),ne<mt&&(vt.O+=vt.v,vt.N+=vt.v>>1,vt.W+=vt.v>>1,vt.F!=null&&(vt.J+=vt.v),vt.ka=ne-vt.j,vt.U=vt.va-vt.v,vt.T=mt-ne,Jt=vt.put(vt))}zt+1!=ft.Ic||x||(r(ft.sa,ft.ta-an,Cn,Yn+16*ft.R,an),r(ft.qa,ft.ra-kn,h,Qt+8*ft.B,kn),r(ft.Ha,ft.Ia-kn,g,_+8*ft.B,kn))}if(!Jt)return fr(wt,6,"Output aborted.")}return 1}(w,A)),A.bc!=null&&A.bc(A),G&=1}return G?(w.cb=0,G):0}function qr(w,A,G,se,xe){xe=w[A+G+32*se]+(xe>>3),w[A+G+32*se]=-256&xe?0>xe?0:255:xe}function Wa(w,A,G,se,xe,Ee){qr(w,A,0,G,se+xe),qr(w,A,1,G,se+Ee),qr(w,A,2,G,se-Ee),qr(w,A,3,G,se-xe)}function Cs(w){return(20091*w>>16)+w}function Ss(w,A,G,se){var xe,Ee=0,ke=s(16);for(xe=0;4>xe;++xe){var Te=w[A+0]+w[A+8],Be=w[A+0]-w[A+8],He=(35468*w[A+4]>>16)-Cs(w[A+12]),ht=Cs(w[A+4])+(35468*w[A+12]>>16);ke[Ee+0]=Te+ht,ke[Ee+1]=Be+He,ke[Ee+2]=Be-He,ke[Ee+3]=Te-ht,Ee+=4,A++}for(xe=Ee=0;4>xe;++xe)Te=(w=ke[Ee+0]+4)+ke[Ee+8],Be=w-ke[Ee+8],He=(35468*ke[Ee+4]>>16)-Cs(ke[Ee+12]),qr(G,se,0,0,Te+(ht=Cs(ke[Ee+4])+(35468*ke[Ee+12]>>16))),qr(G,se,1,0,Be+He),qr(G,se,2,0,Be-He),qr(G,se,3,0,Te-ht),Ee++,se+=32}function Vu(w,A,G,se){var xe=w[A+0]+4,Ee=35468*w[A+4]>>16,ke=Cs(w[A+4]),Te=35468*w[A+1]>>16;Wa(G,se,0,xe+ke,w=Cs(w[A+1]),Te),Wa(G,se,1,xe+Ee,w,Te),Wa(G,se,2,xe-Ee,w,Te),Wa(G,se,3,xe-ke,w,Te)}function vl(w,A,G,se,xe){Ss(w,A,G,se),xe&&Ss(w,A+16,G,se+4)}function ma(w,A,G,se){Vt(w,A+0,G,se,1),Vt(w,A+32,G,se+128,1)}function Di(w,A,G,se){var xe;for(w=w[A+0]+4,xe=0;4>xe;++xe)for(A=0;4>A;++A)qr(G,se,A,xe,w)}function Fo(w,A,G,se){w[A+0]&&Un(w,A+0,G,se),w[A+16]&&Un(w,A+16,G,se+4),w[A+32]&&Un(w,A+32,G,se+128),w[A+48]&&Un(w,A+48,G,se+128+4)}function qa(w,A,G,se){var xe,Ee=s(16);for(xe=0;4>xe;++xe){var ke=w[A+0+xe]+w[A+12+xe],Te=w[A+4+xe]+w[A+8+xe],Be=w[A+4+xe]-w[A+8+xe],He=w[A+0+xe]-w[A+12+xe];Ee[0+xe]=ke+Te,Ee[8+xe]=ke-Te,Ee[4+xe]=He+Be,Ee[12+xe]=He-Be}for(xe=0;4>xe;++xe)ke=(w=Ee[0+4*xe]+3)+Ee[3+4*xe],Te=Ee[1+4*xe]+Ee[2+4*xe],Be=Ee[1+4*xe]-Ee[2+4*xe],He=w-Ee[3+4*xe],G[se+0]=ke+Te>>3,G[se+16]=He+Be>>3,G[se+32]=ke-Te>>3,G[se+48]=He-Be>>3,se+=64}function wo(w,A,G){var se,xe=A-32,Ee=mi,ke=255-w[xe-1];for(se=0;se<G;++se){var Te,Be=Ee,He=ke+w[A-1];for(Te=0;Te<G;++Te)w[A+Te]=Be[He+w[xe+Te]];A+=32}}function yu(w,A){wo(w,A,4)}function Ya(w,A){wo(w,A,8)}function Hu(w,A){wo(w,A,16)}function jo(w,A){var G;for(G=0;16>G;++G)r(w,A+32*G,w,A-32,16)}function va(w,A){var G;for(G=16;0<G;--G)i(w,A,w[A-1],16),A+=32}function Ka(w,A,G){var se;for(se=0;16>se;++se)i(A,G+32*se,w,16)}function Yl(w,A){var G,se=16;for(G=0;16>G;++G)se+=w[A-1+32*G]+w[A+G-32];Ka(se>>5,w,A)}function os(w,A){var G,se=8;for(G=0;16>G;++G)se+=w[A-1+32*G];Ka(se>>4,w,A)}function Lc(w,A){var G,se=8;for(G=0;16>G;++G)se+=w[A+G-32];Ka(se>>4,w,A)}function bu(w,A){Ka(128,w,A)}function cr(w,A,G){return w+2*A+G+2>>2}function vr(w,A){var G,se=A-32;for(se=new Uint8Array([cr(w[se-1],w[se+0],w[se+1]),cr(w[se+0],w[se+1],w[se+2]),cr(w[se+1],w[se+2],w[se+3]),cr(w[se+2],w[se+3],w[se+4])]),G=0;4>G;++G)r(w,A+32*G,se,0,se.length)}function zo(w,A){var G=w[A-1],se=w[A-1+32],xe=w[A-1+64],Ee=w[A-1+96];$e(w,A+0,16843009*cr(w[A-1-32],G,se)),$e(w,A+32,16843009*cr(G,se,xe)),$e(w,A+64,16843009*cr(se,xe,Ee)),$e(w,A+96,16843009*cr(xe,Ee,Ee))}function $r(w,A){var G,se=4;for(G=0;4>G;++G)se+=w[A+G-32]+w[A-1+32*G];for(se>>=3,G=0;4>G;++G)i(w,A+32*G,se,4)}function Gu(w,A){var G=w[A-1+0],se=w[A-1+32],xe=w[A-1+64],Ee=w[A-1-32],ke=w[A+0-32],Te=w[A+1-32],Be=w[A+2-32],He=w[A+3-32];w[A+0+96]=cr(se,xe,w[A-1+96]),w[A+1+96]=w[A+0+64]=cr(G,se,xe),w[A+2+96]=w[A+1+64]=w[A+0+32]=cr(Ee,G,se),w[A+3+96]=w[A+2+64]=w[A+1+32]=w[A+0+0]=cr(ke,Ee,G),w[A+3+64]=w[A+2+32]=w[A+1+0]=cr(Te,ke,Ee),w[A+3+32]=w[A+2+0]=cr(Be,Te,ke),w[A+3+0]=cr(He,Be,Te)}function yl(w,A){var G=w[A+1-32],se=w[A+2-32],xe=w[A+3-32],Ee=w[A+4-32],ke=w[A+5-32],Te=w[A+6-32],Be=w[A+7-32];w[A+0+0]=cr(w[A+0-32],G,se),w[A+1+0]=w[A+0+32]=cr(G,se,xe),w[A+2+0]=w[A+1+32]=w[A+0+64]=cr(se,xe,Ee),w[A+3+0]=w[A+2+32]=w[A+1+64]=w[A+0+96]=cr(xe,Ee,ke),w[A+3+32]=w[A+2+64]=w[A+1+96]=cr(Ee,ke,Te),w[A+3+64]=w[A+2+96]=cr(ke,Te,Be),w[A+3+96]=cr(Te,Be,Be)}function bl(w,A){var G=w[A-1+0],se=w[A-1+32],xe=w[A-1+64],Ee=w[A-1-32],ke=w[A+0-32],Te=w[A+1-32],Be=w[A+2-32],He=w[A+3-32];w[A+0+0]=w[A+1+64]=Ee+ke+1>>1,w[A+1+0]=w[A+2+64]=ke+Te+1>>1,w[A+2+0]=w[A+3+64]=Te+Be+1>>1,w[A+3+0]=Be+He+1>>1,w[A+0+96]=cr(xe,se,G),w[A+0+64]=cr(se,G,Ee),w[A+0+32]=w[A+1+96]=cr(G,Ee,ke),w[A+1+32]=w[A+2+96]=cr(Ee,ke,Te),w[A+2+32]=w[A+3+96]=cr(ke,Te,Be),w[A+3+32]=cr(Te,Be,He)}function Uo(w,A){var G=w[A+0-32],se=w[A+1-32],xe=w[A+2-32],Ee=w[A+3-32],ke=w[A+4-32],Te=w[A+5-32],Be=w[A+6-32],He=w[A+7-32];w[A+0+0]=G+se+1>>1,w[A+1+0]=w[A+0+64]=se+xe+1>>1,w[A+2+0]=w[A+1+64]=xe+Ee+1>>1,w[A+3+0]=w[A+2+64]=Ee+ke+1>>1,w[A+0+32]=cr(G,se,xe),w[A+1+32]=w[A+0+96]=cr(se,xe,Ee),w[A+2+32]=w[A+1+96]=cr(xe,Ee,ke),w[A+3+32]=w[A+2+96]=cr(Ee,ke,Te),w[A+3+64]=cr(ke,Te,Be),w[A+3+96]=cr(Te,Be,He)}function Za(w,A){var G=w[A-1+0],se=w[A-1+32],xe=w[A-1+64],Ee=w[A-1+96];w[A+0+0]=G+se+1>>1,w[A+2+0]=w[A+0+32]=se+xe+1>>1,w[A+2+32]=w[A+0+64]=xe+Ee+1>>1,w[A+1+0]=cr(G,se,xe),w[A+3+0]=w[A+1+32]=cr(se,xe,Ee),w[A+3+32]=w[A+1+64]=cr(xe,Ee,Ee),w[A+3+64]=w[A+2+64]=w[A+0+96]=w[A+1+96]=w[A+2+96]=w[A+3+96]=Ee}function Wu(w,A){var G=w[A-1+0],se=w[A-1+32],xe=w[A-1+64],Ee=w[A-1+96],ke=w[A-1-32],Te=w[A+0-32],Be=w[A+1-32],He=w[A+2-32];w[A+0+0]=w[A+2+32]=G+ke+1>>1,w[A+0+32]=w[A+2+64]=se+G+1>>1,w[A+0+64]=w[A+2+96]=xe+se+1>>1,w[A+0+96]=Ee+xe+1>>1,w[A+3+0]=cr(Te,Be,He),w[A+2+0]=cr(ke,Te,Be),w[A+1+0]=w[A+3+32]=cr(G,ke,Te),w[A+1+32]=w[A+3+64]=cr(se,G,ke),w[A+1+64]=w[A+3+96]=cr(xe,se,G),w[A+1+96]=cr(Ee,xe,se)}function Kl(w,A){var G;for(G=0;8>G;++G)r(w,A+32*G,w,A-32,8)}function dr(w,A){var G;for(G=0;8>G;++G)i(w,A,w[A-1],8),A+=32}function Ar(w,A,G){var se;for(se=0;8>se;++se)i(A,G+32*se,w,8)}function Xa(w,A){var G,se=8;for(G=0;8>G;++G)se+=w[A+G-32]+w[A-1+32*G];Ar(se>>4,w,A)}function Cc(w,A){var G,se=4;for(G=0;8>G;++G)se+=w[A+G-32];Ar(se>>3,w,A)}function Zl(w,A){var G,se=4;for(G=0;8>G;++G)se+=w[A-1+32*G];Ar(se>>3,w,A)}function _u(w,A){Ar(128,w,A)}function _l(w,A,G){var se=w[A-G],xe=w[A+0],Ee=3*(xe-se)+la[1020+w[A-2*G]-w[A+G]],ke=Ji[112+(Ee+4>>3)];w[A-G]=mi[255+se+Ji[112+(Ee+3>>3)]],w[A+0]=mi[255+xe-ke]}function Xl(w,A,G,se){var xe=w[A+0],Ee=w[A+G];return Os[255+w[A-2*G]-w[A-G]]>se||Os[255+Ee-xe]>se}function wu(w,A,G,se){return 4*Os[255+w[A-G]-w[A+0]]+Os[255+w[A-2*G]-w[A+G]]<=se}function Ir(w,A,G,se,xe){var Ee=w[A-3*G],ke=w[A-2*G],Te=w[A-G],Be=w[A+0],He=w[A+G],ht=w[A+2*G],Dt=w[A+3*G];return 4*Os[255+Te-Be]+Os[255+ke-He]>se?0:Os[255+w[A-4*G]-Ee]<=xe&&Os[255+Ee-ke]<=xe&&Os[255+ke-Te]<=xe&&Os[255+Dt-ht]<=xe&&Os[255+ht-He]<=xe&&Os[255+He-Be]<=xe}function zi(w,A,G,se){var xe=2*se+1;for(se=0;16>se;++se)wu(w,A+se,G,xe)&&_l(w,A+se,G)}function er(w,A,G,se){var xe=2*se+1;for(se=0;16>se;++se)wu(w,A+se*G,1,xe)&&_l(w,A+se*G,1)}function Ui(w,A,G,se){var xe;for(xe=3;0<xe;--xe)zi(w,A+=4*G,G,se)}function wl(w,A,G,se){var xe;for(xe=3;0<xe;--xe)er(w,A+=4,G,se)}function ya(w,A,G,se,xe,Ee,ke,Te){for(Ee=2*Ee+1;0<xe--;){if(Ir(w,A,G,Ee,ke))if(Xl(w,A,G,Te))_l(w,A,G);else{var Be=w,He=A,ht=G,Dt=Be[He-2*ht],It=Be[He-ht],wt=Be[He+0],qt=Be[He+ht],zt=Be[He+2*ht],ft=27*(Jt=la[1020+3*(wt-It)+la[1020+Dt-qt]])+63>>7,vt=18*Jt+63>>7,Jt=9*Jt+63>>7;Be[He-3*ht]=mi[255+Be[He-3*ht]+Jt],Be[He-2*ht]=mi[255+Dt+vt],Be[He-ht]=mi[255+It+ft],Be[He+0]=mi[255+wt-ft],Be[He+ht]=mi[255+qt-vt],Be[He+2*ht]=mi[255+zt-Jt]}A+=se}}function Si(w,A,G,se,xe,Ee,ke,Te){for(Ee=2*Ee+1;0<xe--;){if(Ir(w,A,G,Ee,ke))if(Xl(w,A,G,Te))_l(w,A,G);else{var Be=w,He=A,ht=G,Dt=Be[He-ht],It=Be[He+0],wt=Be[He+ht],qt=Ji[112+((zt=3*(It-Dt))+4>>3)],zt=Ji[112+(zt+3>>3)],ft=qt+1>>1;Be[He-2*ht]=mi[255+Be[He-2*ht]+ft],Be[He-ht]=mi[255+Dt+zt],Be[He+0]=mi[255+It-qt],Be[He+ht]=mi[255+wt-ft]}A+=se}}function xu(w,A,G,se,xe,Ee){ya(w,A,G,1,16,se,xe,Ee)}function ea(w,A,G,se,xe,Ee){ya(w,A,1,G,16,se,xe,Ee)}function Jl(w,A,G,se,xe,Ee){var ke;for(ke=3;0<ke;--ke)Si(w,A+=4*G,G,1,16,se,xe,Ee)}function Ql(w,A,G,se,xe,Ee){var ke;for(ke=3;0<ke;--ke)Si(w,A+=4,1,G,16,se,xe,Ee)}function Ao(w,A,G,se,xe,Ee,ke,Te){ya(w,A,xe,1,8,Ee,ke,Te),ya(G,se,xe,1,8,Ee,ke,Te)}function eu(w,A,G,se,xe,Ee,ke,Te){ya(w,A,1,xe,8,Ee,ke,Te),ya(G,se,1,xe,8,Ee,ke,Te)}function ti(w,A,G,se,xe,Ee,ke,Te){Si(w,A+4*xe,xe,1,8,Ee,ke,Te),Si(G,se+4*xe,xe,1,8,Ee,ke,Te)}function Sc(w,A,G,se,xe,Ee,ke,Te){Si(w,A+4,1,xe,8,Ee,ke,Te),Si(G,se+4,1,xe,8,Ee,ke,Te)}function fs(){this.ba=new Xn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ur,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function $o(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function tu(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Vo(){this.ua=0,this.Wa=new re,this.vb=new re,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Z,this.yc=new R}function xl(){this.xb=this.a=0,this.l=new Mo,this.ca=new Xn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ee,this.Pb=0,this.wd=new ee,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Vo,this.ab=0,this.gc=o(4,tu),this.Oc=0}function Ll(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Mo,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ni(w,A,G,se,xe,Ee,ke){for(w=w==null?0:w[A+0],A=0;A<ke;++A)xe[Ee+A]=w+G[se+A]&255,w=xe[Ee+A]}function xo(w,A,G,se,xe,Ee,ke){var Te;if(w==null)ni(null,null,G,se,xe,Ee,ke);else for(Te=0;Te<ke;++Te)xe[Ee+Te]=w[A+Te]+G[se+Te]&255}function ba(w,A,G,se,xe,Ee,ke){if(w==null)ni(null,null,G,se,xe,Ee,ke);else{var Te,Be=w[A+0],He=Be,ht=Be;for(Te=0;Te<ke;++Te)He=ht+(Be=w[A+Te])-He,ht=G[se+Te]+(-256&He?0>He?0:255:He)&255,He=Be,xe[Ee+Te]=ht}}function $i(w,A,G,se){var xe=A.width,Ee=A.o;if(e(w!=null&&A!=null),0>G||0>=se||G+se>Ee)return null;if(!w.Cc){if(w.ga==null){var ke;if(w.ga=new Ll,(ke=w.ga==null)||(ke=A.width*A.o,e(w.Gb.length==0),w.Gb=s(ke),w.Uc=0,w.Gb==null?ke=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,ke=1),ke=!ke),!ke){ke=w.ga;var Te=w.Fa,Be=w.P,He=w.qc,ht=w.mb,Dt=w.nb,It=Be+1,wt=He-1,qt=ke.l;if(e(Te!=null&&ht!=null&&A!=null),Jr[0]=null,Jr[1]=ni,Jr[2]=xo,Jr[3]=ba,ke.ca=ht,ke.tb=Dt,ke.c=A.width,ke.i=A.height,e(0<ke.c&&0<ke.i),1>=He)A=0;else if(ke.$a=Te[Be+0]>>0&3,ke.Z=Te[Be+0]>>2&3,ke.Lc=Te[Be+0]>>4&3,Be=Te[Be+0]>>6&3,0>ke.$a||1<ke.$a||4<=ke.Z||1<ke.Lc||Be)A=0;else if(qt.put=Us,qt.ac=Ci,qt.bc=ss,qt.ma=ke,qt.width=A.width,qt.height=A.height,qt.Da=A.Da,qt.v=A.v,qt.va=A.va,qt.j=A.j,qt.o=A.o,ke.$a)e:{e(ke.$a==1),A=ar();t:for(;;){if(A==null){A=0;break e}if(e(ke!=null),ke.mc=A,A.c=ke.c,A.i=ke.i,A.l=ke.l,A.l.ma=ke,A.l.width=ke.c,A.l.height=ke.i,A.a=0,H(A.m,Te,It,wt),!Xr(ke.c,ke.i,1,A,null)||(A.ab==1&&A.gc[0].hc==3&&Lt(A.s)?(ke.ic=1,Te=A.c*A.i,A.Ta=null,A.Ua=0,A.V=s(Te),A.Ba=0,A.V==null?(A.a=1,A=0):A=1):(ke.ic=0,A=sr(A,ke.c)),!A))break t;A=1;break e}ke.mc=null,A=0}else A=wt>=ke.c*ke.i;ke=!A}if(ke)return null;w.ga.Lc!=1?w.Ga=0:se=Ee-G}e(w.ga!=null),e(G+se<=Ee);e:{if(A=(Te=w.ga).c,Ee=Te.l.o,Te.$a==0){if(It=w.rc,wt=w.Vc,qt=w.Fa,Be=w.P+1+G*A,He=w.mb,ht=w.nb+G*A,e(Be<=w.P+w.qc),Te.Z!=0)for(e(Jr[Te.Z]!=null),ke=0;ke<se;++ke)Jr[Te.Z](It,wt,qt,Be,He,ht,A),It=He,wt=ht,ht+=A,Be+=A;else for(ke=0;ke<se;++ke)r(He,ht,qt,Be,A),It=He,wt=ht,ht+=A,Be+=A;w.rc=It,w.Vc=wt}else{if(e(Te.mc!=null),A=G+se,e((ke=Te.mc)!=null),e(A<=ke.i),ke.C>=A)A=1;else if(Te.ic||xt(),Te.ic){Te=ke.V,It=ke.Ba,wt=ke.c;var zt=ke.i,ft=(qt=1,Be=ke.$/wt,He=ke.$%wt,ht=ke.m,Dt=ke.s,ke.$),vt=wt*zt,Jt=wt*A,an=Dt.wc,Qt=ft<Jt?Xt(Dt,He,Be):null;e(ft<=vt),e(A<=zt),e(Lt(Dt));t:for(;;){for(;!ht.h&&ft<Jt;){if(He&an||(Qt=Xt(Dt,He,Be)),e(Qt!=null),ve(ht),256>(zt=Ut(Qt.G[0],Qt.H[0],ht)))Te[It+ft]=zt,++ft,++He>=wt&&(He=0,++Be<=A&&!(Be%16)&&Ln(ke,Be));else{if(!(280>zt)){qt=0;break t}zt=Ot(zt-256,ht);var kn,Cn=Ut(Qt.G[4],Qt.H[4],ht);if(ve(ht),!(ft>=(Cn=Je(wt,Cn=Ot(Cn,ht)))&&vt-ft>=zt)){qt=0;break t}for(kn=0;kn<zt;++kn)Te[It+ft+kn]=Te[It+ft+kn-Cn];for(ft+=zt,He+=zt;He>=wt;)He-=wt,++Be<=A&&!(Be%16)&&Ln(ke,Be);ft<Jt&&He&an&&(Qt=Xt(Dt,He,Be))}e(ht.h==oe(ht))}Ln(ke,Be>A?A:Be);break t}!qt||ht.h&&ft<vt?(qt=0,ke.a=ht.h?5:3):ke.$=ft,A=qt}else A=On(ke,ke.V,ke.Ba,ke.c,ke.i,A,Fi);if(!A){se=0;break e}}G+se>=Ee&&(w.Cc=1),se=1}if(!se)return null;if(w.Cc&&((se=w.ga)!=null&&(se.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+G*xe}function z(w,A,G,se,xe,Ee){for(;0<xe--;){var ke,Te=w,Be=A+(G?1:0),He=w,ht=A+(G?0:3);for(ke=0;ke<se;++ke){var Dt=He[ht+4*ke];Dt!=255&&(Dt*=32897,Te[Be+4*ke+0]=Te[Be+4*ke+0]*Dt>>23,Te[Be+4*ke+1]=Te[Be+4*ke+1]*Dt>>23,Te[Be+4*ke+2]=Te[Be+4*ke+2]*Dt>>23)}A+=Ee}}function we(w,A,G,se,xe){for(;0<se--;){var Ee;for(Ee=0;Ee<G;++Ee){var ke=w[A+2*Ee+0],Te=15&(He=w[A+2*Ee+1]),Be=4369*Te,He=(240&He|He>>4)*Be>>16;w[A+2*Ee+0]=(240&ke|ke>>4)*Be>>16&240|(15&ke|ke<<4)*Be>>16>>4&15,w[A+2*Ee+1]=240&He|Te}A+=xe}}function We(w,A,G,se,xe,Ee,ke,Te){var Be,He,ht=255;for(He=0;He<xe;++He){for(Be=0;Be<se;++Be){var Dt=w[A+Be];Ee[ke+4*Be]=Dt,ht&=Dt}A+=G,ke+=Te}return ht!=255}function lt(w,A,G,se,xe){var Ee;for(Ee=0;Ee<xe;++Ee)G[se+Ee]=w[A+Ee]>>8}function xt(){ps=z,si=we,hi=We,Hi=lt}function Ft(w,A,G){O[w]=function(se,xe,Ee,ke,Te,Be,He,ht,Dt,It,wt,qt,zt,ft,vt,Jt,an){var Qt,kn=an-1>>1,Cn=Te[Be+0]|He[ht+0]<<16,Yn=Dt[It+0]|wt[qt+0]<<16;e(se!=null);var h=3*Cn+Yn+131074>>2;for(A(se[xe+0],255&h,h>>16,zt,ft),Ee!=null&&(h=3*Yn+Cn+131074>>2,A(Ee[ke+0],255&h,h>>16,vt,Jt)),Qt=1;Qt<=kn;++Qt){var g=Te[Be+Qt]|He[ht+Qt]<<16,_=Dt[It+Qt]|wt[qt+Qt]<<16,x=Cn+g+Yn+_+524296,M=x+2*(g+Yn)>>3;h=M+Cn>>1,Cn=(x=x+2*(Cn+_)>>3)+g>>1,A(se[xe+2*Qt-1],255&h,h>>16,zt,ft+(2*Qt-1)*G),A(se[xe+2*Qt-0],255&Cn,Cn>>16,zt,ft+(2*Qt-0)*G),Ee!=null&&(h=x+Yn>>1,Cn=M+_>>1,A(Ee[ke+2*Qt-1],255&h,h>>16,vt,Jt+(2*Qt-1)*G),A(Ee[ke+2*Qt+0],255&Cn,Cn>>16,vt,Jt+(2*Qt+0)*G)),Cn=g,Yn=_}1&an||(h=3*Cn+Yn+131074>>2,A(se[xe+an-1],255&h,h>>16,zt,ft+(an-1)*G),Ee!=null&&(h=3*Yn+Cn+131074>>2,A(Ee[ke+an-1],255&h,h>>16,vt,Jt+(an-1)*G)))}}function on(){Ds[so]=Oe,Ds[or]=Ku,Ds[Ca]=ao,Ds[Sa]=ys,Ds[Go]=kr,Ds[Ws]=Bh,Ds[th]=_d,Ds[gs]=Ku,Ds[ms]=ys,Ds[Wo]=kr,Ds[u]=Bh}function Mn(w){return w&-16384?0>w?0:255:w>>Op}function In(w,A){return Mn((19077*w>>8)+(26149*A>>8)-14234)}function Jn(w,A,G){return Mn((19077*w>>8)-(6419*A>>8)-(13320*G>>8)+8708)}function lr(w,A){return Mn((19077*w>>8)+(33050*A>>8)-17685)}function Er(w,A,G,se,xe){se[xe+0]=In(w,G),se[xe+1]=Jn(w,A,G),se[xe+2]=lr(w,A)}function wi(w,A,G,se,xe){se[xe+0]=lr(w,A),se[xe+1]=Jn(w,A,G),se[xe+2]=In(w,G)}function Zr(w,A,G,se,xe){var Ee=Jn(w,A,G);A=Ee<<3&224|lr(w,A)>>3,se[xe+0]=248&In(w,G)|Ee>>5,se[xe+1]=A}function ri(w,A,G,se,xe){var Ee=240&lr(w,A)|15;se[xe+0]=240&In(w,G)|Jn(w,A,G)>>4,se[xe+1]=Ee}function Vi(w,A,G,se,xe){se[xe+0]=255,Er(w,A,G,se,xe+1)}function Zi(w,A,G,se,xe){wi(w,A,G,se,xe),se[xe+3]=255}function Lo(w,A,G,se,xe){Er(w,A,G,se,xe),se[xe+3]=255}function Pr(w,A){return 0>w?0:w>A?A:w}function Es(w,A,G){O[w]=function(se,xe,Ee,ke,Te,Be,He,ht,Dt){for(var It=ht+(-2&Dt)*G;ht!=It;)A(se[xe+0],Ee[ke+0],Te[Be+0],He,ht),A(se[xe+1],Ee[ke+0],Te[Be+0],He,ht+G),xe+=2,++ke,++Be,ht+=2*G;1&Dt&&A(se[xe+0],Ee[ke+0],Te[Be+0],He,ht)}}function Cl(w,A,G){return G==0?w==0?A==0?6:5:A==0?4:0:G}function $s(w,A,G,se,xe){switch(w>>>30){case 3:Vt(A,G,se,xe,0);break;case 2:kt(A,G,se,xe);break;case 1:Un(A,G,se,xe)}}function Lu(w,A){var G,se,xe=A.M,Ee=A.Nb,ke=w.oc,Te=w.pc+40,Be=w.oc,He=w.pc+584,ht=w.oc,Dt=w.pc+600;for(G=0;16>G;++G)ke[Te+32*G-1]=129;for(G=0;8>G;++G)Be[He+32*G-1]=129,ht[Dt+32*G-1]=129;for(0<xe?ke[Te-1-32]=Be[He-1-32]=ht[Dt-1-32]=129:(i(ke,Te-32-1,127,21),i(Be,He-32-1,127,9),i(ht,Dt-32-1,127,9)),se=0;se<w.za;++se){var It=A.ya[A.aa+se];if(0<se){for(G=-1;16>G;++G)r(ke,Te+32*G-4,ke,Te+32*G+12,4);for(G=-1;8>G;++G)r(Be,He+32*G-4,Be,He+32*G+4,4),r(ht,Dt+32*G-4,ht,Dt+32*G+4,4)}var wt=w.Gd,qt=w.Hd+se,zt=It.ad,ft=It.Hc;if(0<xe&&(r(ke,Te-32,wt[qt].y,0,16),r(Be,He-32,wt[qt].f,0,8),r(ht,Dt-32,wt[qt].ea,0,8)),It.Za){var vt=ke,Jt=Te-32+16;for(0<xe&&(se>=w.za-1?i(vt,Jt,wt[qt].y[15],4):r(vt,Jt,wt[qt+1].y,0,4)),G=0;4>G;G++)vt[Jt+128+G]=vt[Jt+256+G]=vt[Jt+384+G]=vt[Jt+0+G];for(G=0;16>G;++G,ft<<=2)vt=ke,Jt=Te+xd[G],qo[It.Ob[G]](vt,Jt),$s(ft,zt,16*+G,vt,Jt)}else if(vt=Cl(se,xe,It.Ob[0]),ua[vt](ke,Te),ft!=0)for(G=0;16>G;++G,ft<<=2)$s(ft,zt,16*+G,ke,Te+xd[G]);for(G=It.Gc,vt=Cl(se,xe,It.Dd),Oo[vt](Be,He),Oo[vt](ht,Dt),ft=zt,vt=Be,Jt=He,255&(It=G>>0)&&(170&It?Pn(ft,256,vt,Jt):hr(ft,256,vt,Jt)),It=ht,ft=Dt,255&(G>>=8)&&(170&G?Pn(zt,320,It,ft):hr(zt,320,It,ft)),xe<w.Ub-1&&(r(wt[qt].y,0,ke,Te+480,16),r(wt[qt].f,0,Be,He+224,8),r(wt[qt].ea,0,ht,Dt+224,8)),G=8*Ee*w.B,wt=w.sa,qt=w.ta+16*se+16*Ee*w.R,zt=w.qa,It=w.ra+8*se+G,ft=w.Ha,vt=w.Ia+8*se+G,G=0;16>G;++G)r(wt,qt+G*w.R,ke,Te+32*G,16);for(G=0;8>G;++G)r(zt,It+G*w.B,Be,He+32*G,8),r(ft,vt+G*w.B,ht,Dt+32*G,8)}}function ta(w,A,G,se,xe,Ee,ke,Te,Be){var He=[0],ht=[0],Dt=0,It=Be!=null?Be.kd:0,wt=Be??new $o;if(w==null||12>G)return 7;wt.data=w,wt.w=A,wt.ha=G,A=[A],G=[G],wt.gb=[wt.gb];e:{var qt=A,zt=G,ft=wt.gb;if(e(w!=null),e(zt!=null),e(ft!=null),ft[0]=0,12<=zt[0]&&!n(w,qt[0],"RIFF")){if(n(w,qt[0]+8,"WEBP")){ft=3;break e}var vt=le(w,qt[0]+4);if(12>vt||4294967286<vt){ft=3;break e}if(It&&vt>zt[0]-8){ft=7;break e}ft[0]=vt,qt[0]+=12,zt[0]-=12}ft=0}if(ft!=0)return ft;for(vt=0<wt.gb[0],G=G[0];;){e:{var Jt=w;zt=A,ft=G;var an=He,Qt=ht,kn=qt=[0];if((h=Dt=[Dt])[0]=0,8>ft[0])ft=7;else{if(!n(Jt,zt[0],"VP8X")){if(le(Jt,zt[0]+4)!=10){ft=3;break e}if(18>ft[0]){ft=7;break e}var Cn=le(Jt,zt[0]+8),Yn=1+ot(Jt,zt[0]+12);if(2147483648<=Yn*(Jt=1+ot(Jt,zt[0]+15))){ft=3;break e}kn!=null&&(kn[0]=Cn),an!=null&&(an[0]=Yn),Qt!=null&&(Qt[0]=Jt),zt[0]+=18,ft[0]-=18,h[0]=1}ft=0}}if(Dt=Dt[0],qt=qt[0],ft!=0)return ft;if(zt=!!(2&qt),!vt&&Dt)return 3;if(Ee!=null&&(Ee[0]=!!(16&qt)),ke!=null&&(ke[0]=zt),Te!=null&&(Te[0]=0),ke=He[0],qt=ht[0],Dt&&zt&&Be==null){ft=0;break}if(4>G){ft=7;break}if(vt&&Dt||!vt&&!Dt&&!n(w,A[0],"ALPH")){G=[G],wt.na=[wt.na],wt.P=[wt.P],wt.Sa=[wt.Sa];e:{Cn=w,ft=A,vt=G;var h=wt.gb;an=wt.na,Qt=wt.P,kn=wt.Sa,Yn=22,e(Cn!=null),e(vt!=null),Jt=ft[0];var g=vt[0];for(e(an!=null),e(kn!=null),an[0]=null,Qt[0]=null,kn[0]=0;;){if(ft[0]=Jt,vt[0]=g,8>g){ft=7;break e}var _=le(Cn,Jt+4);if(4294967286<_){ft=3;break e}var x=8+_+1&-2;if(Yn+=x,0<h&&Yn>h){ft=3;break e}if(!n(Cn,Jt,"VP8 ")||!n(Cn,Jt,"VP8L")){ft=0;break e}if(g[0]<x){ft=7;break e}n(Cn,Jt,"ALPH")||(an[0]=Cn,Qt[0]=Jt+8,kn[0]=_),Jt+=x,g-=x}}if(G=G[0],wt.na=wt.na[0],wt.P=wt.P[0],wt.Sa=wt.Sa[0],ft!=0)break}G=[G],wt.Ja=[wt.Ja],wt.xa=[wt.xa];e:if(h=w,ft=A,vt=G,an=wt.gb[0],Qt=wt.Ja,kn=wt.xa,Cn=ft[0],Jt=!n(h,Cn,"VP8 "),Yn=!n(h,Cn,"VP8L"),e(h!=null),e(vt!=null),e(Qt!=null),e(kn!=null),8>vt[0])ft=7;else{if(Jt||Yn){if(h=le(h,Cn+4),12<=an&&h>an-12){ft=3;break e}if(It&&h>vt[0]-8){ft=7;break e}Qt[0]=h,ft[0]+=8,vt[0]-=8,kn[0]=Yn}else kn[0]=5<=vt[0]&&h[Cn+0]==47&&!(h[Cn+4]>>5),Qt[0]=vt[0];ft=0}if(G=G[0],wt.Ja=wt.Ja[0],wt.xa=wt.xa[0],A=A[0],ft!=0)break;if(4294967286<wt.Ja)return 3;if(Te==null||zt||(Te[0]=wt.xa?2:1),ke=[ke],qt=[qt],wt.xa){if(5>G){ft=7;break}Te=ke,It=qt,zt=Ee,w==null||5>G?w=0:5<=G&&w[A+0]==47&&!(w[A+4]>>5)?(vt=[0],h=[0],an=[0],H(Qt=new ee,w,A,G),Gn(Qt,vt,h,an)?(Te!=null&&(Te[0]=vt[0]),It!=null&&(It[0]=h[0]),zt!=null&&(zt[0]=an[0]),w=1):w=0):w=0}else{if(10>G){ft=7;break}Te=qt,w==null||10>G||!Ga(w,A+3,G-3)?w=0:(It=w[A+0]|w[A+1]<<8|w[A+2]<<16,zt=16383&(w[A+7]<<8|w[A+6]),w=16383&(w[A+9]<<8|w[A+8]),1&It||3<(It>>1&7)||!(It>>4&1)||It>>5>=wt.Ja||!zt||!w?w=0:(ke&&(ke[0]=zt),Te&&(Te[0]=w),w=1))}if(!w||(ke=ke[0],qt=qt[0],Dt&&(He[0]!=ke||ht[0]!=qt)))return 3;Be!=null&&(Be[0]=wt,Be.offset=A-Be.w,e(4294967286>A-Be.w),e(Be.offset==Be.ha-G));break}return ft==0||ft==7&&Dt&&Be==null?(Ee!=null&&(Ee[0]|=wt.na!=null&&0<wt.na.length),se!=null&&(se[0]=ke),xe!=null&&(xe[0]=qt),0):ft}function qu(w,A,G){var se=A.width,xe=A.height,Ee=0,ke=0,Te=se,Be=xe;if(A.Da=w!=null&&0<w.Da,A.Da&&(Te=w.cd,Be=w.bd,Ee=w.v,ke=w.j,11>G||(Ee&=-2,ke&=-2),0>Ee||0>ke||0>=Te||0>=Be||Ee+Te>se||ke+Be>xe))return 0;if(A.v=Ee,A.j=ke,A.va=Ee+Te,A.o=ke+Be,A.U=Te,A.T=Be,A.da=w!=null&&0<w.da,A.da){if(!Ae(Te,Be,G=[w.ib],Ee=[w.hb]))return 0;A.ib=G[0],A.hb=Ee[0]}return A.ob=w!=null&&w.ob,A.Kb=w==null||!w.Sd,A.da&&(A.ob=A.ib<3*se/4&&A.hb<3*xe/4,A.Kb=0),1}function Ja(w){if(w==null)return 2;if(11>w.S){var A=w.f.RGBA;A.fb+=(w.height-1)*A.A,A.A=-A.A}else A=w.f.kb,w=w.height,A.O+=(w-1)*A.fa,A.fa=-A.fa,A.N+=(w-1>>1)*A.Ab,A.Ab=-A.Ab,A.W+=(w-1>>1)*A.Db,A.Db=-A.Db,A.F!=null&&(A.J+=(w-1)*A.lb,A.lb=-A.lb);return 0}function Qa(w,A,G,se){if(se==null||0>=w||0>=A)return 2;if(G!=null){if(G.Da){var xe=G.cd,Ee=G.bd,ke=-2&G.v,Te=-2&G.j;if(0>ke||0>Te||0>=xe||0>=Ee||ke+xe>w||Te+Ee>A)return 2;w=xe,A=Ee}if(G.da){if(!Ae(w,A,xe=[G.ib],Ee=[G.hb]))return 2;w=xe[0],A=Ee[0]}}se.width=w,se.height=A;e:{var Be=se.width,He=se.height;if(w=se.S,0>=Be||0>=He||!(w>=so&&13>w))w=2;else{if(0>=se.Rd&&se.sd==null){ke=Ee=xe=A=0;var ht=(Te=Be*Sd[w])*He;if(11>w||(Ee=(He+1)/2*(A=(Be+1)/2),w==12&&(ke=(xe=Be)*He)),(He=s(ht+2*Ee+ke))==null){w=1;break e}se.sd=He,11>w?((Be=se.f.RGBA).eb=He,Be.fb=0,Be.A=Te,Be.size=ht):((Be=se.f.kb).y=He,Be.O=0,Be.fa=Te,Be.Fd=ht,Be.f=He,Be.N=0+ht,Be.Ab=A,Be.Cd=Ee,Be.ea=He,Be.W=0+ht+Ee,Be.Db=A,Be.Ed=Ee,w==12&&(Be.F=He,Be.J=0+ht+2*Ee),Be.Tc=ke,Be.lb=xe)}if(A=1,xe=se.S,Ee=se.width,ke=se.height,xe>=so&&13>xe)if(11>xe)w=se.f.RGBA,A&=(Te=Math.abs(w.A))*(ke-1)+Ee<=w.size,A&=Te>=Ee*Sd[xe],A&=w.eb!=null;else{w=se.f.kb,Te=(Ee+1)/2,ht=(ke+1)/2,Be=Math.abs(w.fa),He=Math.abs(w.Ab);var Dt=Math.abs(w.Db),It=Math.abs(w.lb),wt=It*(ke-1)+Ee;A&=Be*(ke-1)+Ee<=w.Fd,A&=He*(ht-1)+Te<=w.Cd,A=(A&=Dt*(ht-1)+Te<=w.Ed)&Be>=Ee&He>=Te&Dt>=Te,A&=w.y!=null,A&=w.f!=null,A&=w.ea!=null,xe==12&&(A&=It>=Ee,A&=wt<=w.Tc,A&=w.F!=null)}else A=0;w=A?0:2}}return w!=0||G!=null&&G.fd&&(w=Ja(se)),w}var Xi=64,na=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Co=24,ro=32,Sl=8,Ps=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];at("Predictor0","PredictorAdd0"),O.Predictor0=function(){return 4278190080},O.Predictor1=function(w){return w},O.Predictor2=function(w,A,G){return A[G+0]},O.Predictor3=function(w,A,G){return A[G+1]},O.Predictor4=function(w,A,G){return A[G-1]},O.Predictor5=function(w,A,G){return gt(gt(w,A[G+1]),A[G+0])},O.Predictor6=function(w,A,G){return gt(w,A[G-1])},O.Predictor7=function(w,A,G){return gt(w,A[G+0])},O.Predictor8=function(w,A,G){return gt(A[G-1],A[G+0])},O.Predictor9=function(w,A,G){return gt(A[G+0],A[G+1])},O.Predictor10=function(w,A,G){return gt(gt(w,A[G-1]),gt(A[G+0],A[G+1]))},O.Predictor11=function(w,A,G){var se=A[G+0];return 0>=Gt(se>>24&255,w>>24&255,(A=A[G-1])>>24&255)+Gt(se>>16&255,w>>16&255,A>>16&255)+Gt(se>>8&255,w>>8&255,A>>8&255)+Gt(255&se,255&w,255&A)?se:w},O.Predictor12=function(w,A,G){var se=A[G+0];return($t((w>>24&255)+(se>>24&255)-((A=A[G-1])>>24&255))<<24|$t((w>>16&255)+(se>>16&255)-(A>>16&255))<<16|$t((w>>8&255)+(se>>8&255)-(A>>8&255))<<8|$t((255&w)+(255&se)-(255&A)))>>>0},O.Predictor13=function(w,A,G){var se=A[G-1];return(Rt((w=gt(w,A[G+0]))>>24&255,se>>24&255)<<24|Rt(w>>16&255,se>>16&255)<<16|Rt(w>>8&255,se>>8&255)<<8|Rt(w>>0&255,se>>0&255))>>>0};var Vs=O.PredictorAdd0;O.PredictorAdd1=ln,at("Predictor2","PredictorAdd2"),at("Predictor3","PredictorAdd3"),at("Predictor4","PredictorAdd4"),at("Predictor5","PredictorAdd5"),at("Predictor6","PredictorAdd6"),at("Predictor7","PredictorAdd7"),at("Predictor8","PredictorAdd8"),at("Predictor9","PredictorAdd9"),at("Predictor10","PredictorAdd10"),at("Predictor11","PredictorAdd11"),at("Predictor12","PredictorAdd12"),at("Predictor13","PredictorAdd13");var Hs=O.PredictorAdd2;it("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),it("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var Ec,as=O.ColorIndexInverseTransform,_a=O.MapARGB,ks=O.VP8LColorIndexInverseTransformAlpha,Ms=O.MapAlpha,wa=O.VP8LPredictorsAdd=[];wa.length=16,(O.VP8LPredictors=[]).length=16,(O.VP8LPredictorsAdd_C=[]).length=16,(O.VP8LPredictors_C=[]).length=16;var xa,As,ds,ra,So,Ts,yt,Vt,kt,Pn,Un,hr,Ei,ii,nu,Gs,Pi,ia,La,sa,oa,aa,Nr,Ho,ps,si,hi,Hi,vi=s(511),Eo=s(2041),io=s(225),To=s(767),Yu=0,la=Eo,Ji=io,mi=To,Os=vi,so=0,or=1,Ca=2,Sa=3,Go=4,Ws=5,th=6,gs=7,ms=8,Wo=9,u=10,y=[2,3,7],P=[3,3,11],V=[280,256,256,256,40],ie=[0,1,1,1,0],Se=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],nt=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Pt=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],jt=8,nn=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],An=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],qn=null,Sr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Qi=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Ii=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],vs=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ki=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],oo=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],nh=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ua=[],qo=[],Oo=[],Ef=1,Cu=2,Jr=[],Ds=[];Ft("UpsampleRgbLinePair",Er,3),Ft("UpsampleBgrLinePair",wi,3),Ft("UpsampleRgbaLinePair",Lo,4),Ft("UpsampleBgraLinePair",Zi,4),Ft("UpsampleArgbLinePair",Vi,4),Ft("UpsampleRgba4444LinePair",ri,2),Ft("UpsampleRgb565LinePair",Zr,2);var Oe=O.UpsampleRgbLinePair,ao=O.UpsampleBgrLinePair,Ku=O.UpsampleRgbaLinePair,ys=O.UpsampleBgraLinePair,kr=O.UpsampleArgbLinePair,Bh=O.UpsampleRgba4444LinePair,_d=O.UpsampleRgb565LinePair,Rh=16,el=1<<Rh-1,rh=-227,Pf=482,Op=6,Pc=0,Fh=s(256),ru=s(256),Dp=s(256),jh=s(256),zh=s(Pf-rh),wd=s(Pf-rh);Es("YuvToRgbRow",Er,3),Es("YuvToBgrRow",wi,3),Es("YuvToRgbaRow",Lo,4),Es("YuvToBgraRow",Zi,4),Es("YuvToArgbRow",Vi,4),Es("YuvToRgba4444Row",ri,2),Es("YuvToRgb565Row",Zr,2);var xd=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ea=[0,2,8],Ld=[8,7,6,4,4,2,2,2,1,1,1,1],Cd=1;this.WebPDecodeRGBA=function(w,A,G,se,xe){var Ee=or,ke=new fs,Te=new Xn;ke.ba=Te,Te.S=Ee,Te.width=[Te.width],Te.height=[Te.height];var Be=Te.width,He=Te.height,ht=new nr;if(ht==null||w==null)var Dt=2;else e(ht!=null),Dt=ta(w,A,G,ht.width,ht.height,ht.Pd,ht.Qd,ht.format,null);if(Dt!=0?Be=0:(Be!=null&&(Be[0]=ht.width[0]),He!=null&&(He[0]=ht.height[0]),Be=1),Be){Te.width=Te.width[0],Te.height=Te.height[0],se!=null&&(se[0]=Te.width),xe!=null&&(xe[0]=Te.height);e:{if(se=new Mo,(xe=new $o).data=w,xe.w=A,xe.ha=G,xe.kd=1,A=[0],e(xe!=null),((w=ta(xe.data,xe.w,xe.ha,null,null,null,A,null,xe))==0||w==7)&&A[0]&&(w=4),(A=w)==0){if(e(ke!=null),se.data=xe.data,se.w=xe.w+xe.offset,se.ha=xe.ha-xe.offset,se.put=Us,se.ac=Ci,se.bc=ss,se.ma=ke,xe.xa){if((w=ar())==null){ke=1;break e}if(function(It,wt){var qt=[0],zt=[0],ft=[0];t:for(;;){if(It==null)return 0;if(wt==null)return It.a=2,0;if(It.l=wt,It.a=0,H(It.m,wt.data,wt.w,wt.ha),!Gn(It.m,qt,zt,ft)){It.a=3;break t}if(It.xb=Cu,wt.width=qt[0],wt.height=zt[0],!Xr(qt[0],zt[0],1,It,null))break t;return 1}return e(It.a!=0),0}(w,se)){if(se=(A=Qa(se.width,se.height,ke.Oa,ke.ba))==0){t:{se=w;n:for(;;){if(se==null){se=0;break t}if(e(se.s.yc!=null),e(se.s.Ya!=null),e(0<se.s.Wb),e((G=se.l)!=null),e((xe=G.ma)!=null),se.xb!=0){if(se.ca=xe.ba,se.tb=xe.tb,e(se.ca!=null),!qu(xe.Oa,G,Sa)){se.a=2;break n}if(!sr(se,G.width)||G.da)break n;if((G.da||vn(se.ca.S))&&xt(),11>se.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),se.ca.f.kb.F!=null&&xt()),se.Pb&&0<se.s.ua&&se.s.vb.X==null&&!ae(se.s.vb,se.s.Wa.Xa)){se.a=1;break n}se.xb=0}if(!On(se,se.V,se.Ba,se.c,se.i,G.o,Wt))break n;xe.Dc=se.Ma,se=1;break t}e(se.a!=0),se=0}se=!se}se&&(A=w.a)}else A=w.a}else{if((w=new Wr)==null){ke=1;break e}if(w.Fa=xe.na,w.P=xe.P,w.qc=xe.Sa,ga(w,se)){if((A=Qa(se.width,se.height,ke.Oa,ke.ba))==0){if(w.Aa=0,G=ke.Oa,e((xe=w)!=null),G!=null){if(0<(Be=0>(Be=G.Md)?0:100<Be?255:255*Be/100)){for(He=ht=0;4>He;++He)12>(Dt=xe.pb[He]).lc&&(Dt.ia=Be*Ld[0>Dt.lc?0:Dt.lc]>>3),ht|=Dt.ia;ht&&(alert("todo:VP8InitRandom"),xe.ia=1)}xe.Ga=G.Id,100<xe.Ga?xe.Ga=100:0>xe.Ga&&(xe.Ga=0)}mr(w,se)||(A=w.a)}}else A=w.a}A==0&&ke.Oa!=null&&ke.Oa.fd&&(A=Ja(ke.ba))}ke=A}Ee=ke!=0?null:11>Ee?Te.f.RGBA.eb:Te.f.kb.y}else Ee=null;return Ee};var Sd=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(O,B){for(var q="",F=0;F<4;F++)q+=String.fromCharCode(O[B++]);return q}function f(O,B){return(O[B+0]<<0|O[B+1]<<8|O[B+2]<<16)>>>0}function p(O,B){return(O[B+0]<<0|O[B+1]<<8|O[B+2]<<16|O[B+3]<<24)>>>0}new l;var v=[0],m=[0],C=[],S=new l,I=t,N=function(O,B){var q={},F=0,R=!1,K=0,Z=0;if(q.frames=[],!function(te,oe,ge,ve){for(var ye=0;ye<ve;ye++)if(te[oe+ye]!=ge.charCodeAt(ye))return!0;return!1}(O,B,"RIFF",4)){var Y,k;for(p(O,B+=4),B+=8;B<O.length;){var U=c(O,B),H=p(O,B+=4);B+=4;var ue=H+(1&H);switch(U){case"VP8 ":case"VP8L":q.frames[F]===void 0&&(q.frames[F]={}),(ee=q.frames[F]).src_off=R?Z:B-8,ee.src_size=K+H+8,F++,R&&(R=!1,K=0,Z=0);break;case"VP8X":(ee=q.header={}).feature_flags=O[B];var _e=B+4;ee.canvas_width=1+f(O,_e),_e+=3,ee.canvas_height=1+f(O,_e),_e+=3;break;case"ALPH":R=!0,K=ue+8,Z=B-8;break;case"ANIM":(ee=q.header).bgcolor=p(O,B),_e=B+4,ee.loop_count=(Y=O)[(k=_e)+0]<<0|Y[k+1]<<8,_e+=2;break;case"ANMF":var Ie,ee;(ee=q.frames[F]={}).offset_x=2*f(O,B),B+=3,ee.offset_y=2*f(O,B),B+=3,ee.width=1+f(O,B),B+=3,ee.height=1+f(O,B),B+=3,ee.duration=f(O,B),B+=3,Ie=O[B++],ee.dispose=1&Ie,ee.blend=Ie>>1&1}U!="ANMF"&&(B+=ue)}return q}}(I,0);N.response=I,N.rgbaoutput=!0,N.dataurl=!1;var T=N.header?N.header:null,j=N.frames?N.frames:null;if(T){T.loop_counter=T.loop_count,v=[T.canvas_height],m=[T.canvas_width];for(var W=0;W<j.length&&j[W].blend!=0;W++);}var X=j[0],ce=S.WebPDecodeRGBA(I,X.src_off,X.src_size,m,v);X.rgba=ce,X.imgwidth=m[0],X.imgheight=v[0];for(var he=0;he<m[0]*v[0]*4;he++)C[he]=ce[he];return this.width=m,this.height=v,this.data=C,this}(function(t){var e=function(){return typeof fb=="function"},n=function(v,m,C,S){var I=4,N=o;switch(S){case t.image_compression.FAST:I=1,N=s;break;case t.image_compression.MEDIUM:I=6,N=a;break;case t.image_compression.SLOW:I=9,N=l}v=r(v,m,C,N);var T=fb(v,{level:I});return t.__addimage__.arrayBufferToBinaryString(T)},r=function(v,m,C,S){for(var I,N,T,j=v.length/m,W=new Uint8Array(v.length+j),X=f(),ce=0;ce<j;ce+=1){if(T=ce*m,I=v.subarray(T,T+m),S)W.set(S(I,C,N),T+ce);else{for(var he,O=X.length,B=[];he<O;he+=1)B[he]=X[he](I,C,N);var q=p(B.concat());W.set(B[q],T+ce)}N=I}return W},i=function(v){var m=Array.apply([],v);return m.unshift(0),m},s=function(v,m){var C,S=[],I=v.length;S[0]=1;for(var N=0;N<I;N+=1)C=v[N-m]||0,S[N+1]=v[N]-C+256&255;return S},o=function(v,m,C){var S,I=[],N=v.length;I[0]=2;for(var T=0;T<N;T+=1)S=C&&C[T]||0,I[T+1]=v[T]-S+256&255;return I},a=function(v,m,C){var S,I,N=[],T=v.length;N[0]=3;for(var j=0;j<T;j+=1)S=v[j-m]||0,I=C&&C[j]||0,N[j+1]=v[j]+256-(S+I>>>1)&255;return N},l=function(v,m,C){var S,I,N,T,j=[],W=v.length;j[0]=4;for(var X=0;X<W;X+=1)S=v[X-m]||0,I=C&&C[X]||0,N=C&&C[X-m]||0,T=c(S,I,N),j[X+1]=v[X]-T+256&255;return j},c=function(v,m,C){if(v===m&&m===C)return v;var S=Math.abs(m-C),I=Math.abs(v-C),N=Math.abs(v+m-C-C);return S<=I&&S<=N?v:I<=N?m:C},f=function(){return[i,s,o,a,l]},p=function(v){var m=v.map(function(C){return C.reduce(function(S,I){return S+Math.abs(I)},0)});return m.indexOf(Math.min.apply(null,m))};t.processPNG=function(v,m,C,S){var I,N,T,j,W,X,ce,he,O,B,q,F,R,K,Z,Y=this.decode.FLATE_DECODE,k="";if(this.__addimage__.isArrayBuffer(v)&&(v=new Uint8Array(v)),this.__addimage__.isArrayBufferView(v)){if(v=(T=new yV(v)).imgData,N=T.bits,I=T.colorSpace,W=T.colors,[4,6].indexOf(T.colorType)!==-1){if(T.bits===8){O=(he=T.pixelBitlength==32?new Uint32Array(T.decodePixels().buffer):T.pixelBitlength==16?new Uint16Array(T.decodePixels().buffer):new Uint8Array(T.decodePixels().buffer)).length,q=new Uint8Array(O*T.colors),B=new Uint8Array(O);var U,H=T.pixelBitlength-T.bits;for(K=0,Z=0;K<O;K++){for(R=he[K],U=0;U<H;)q[Z++]=R>>>U&255,U+=T.bits;B[K]=R>>>U&255}}if(T.bits===16){O=(he=new Uint32Array(T.decodePixels().buffer)).length,q=new Uint8Array(O*(32/T.pixelBitlength)*T.colors),B=new Uint8Array(O*(32/T.pixelBitlength)),F=T.colors>1,K=0,Z=0;for(var ue=0;K<O;)R=he[K++],q[Z++]=R>>>0&255,F&&(q[Z++]=R>>>16&255,R=he[K++],q[Z++]=R>>>0&255),B[ue++]=R>>>16&255;N=8}S!==t.image_compression.NONE&&e()?(v=n(q,T.width*T.colors,T.colors,S),ce=n(B,T.width,1,S)):(v=q,ce=B,Y=void 0)}if(T.colorType===3&&(I=this.color_spaces.INDEXED,X=T.palette,T.transparency.indexed)){var _e=T.transparency.indexed,Ie=0;for(K=0,O=_e.length;K<O;++K)Ie+=_e[K];if((Ie/=255)===O-1&&_e.indexOf(0)!==-1)j=[_e.indexOf(0)];else if(Ie!==O){for(he=T.decodePixels(),B=new Uint8Array(he.length),K=0,O=he.length;K<O;K++)B[K]=_e[he[K]];ce=n(B,T.width,1)}}var ee=function(te){var oe;switch(te){case t.image_compression.FAST:oe=11;break;case t.image_compression.MEDIUM:oe=13;break;case t.image_compression.SLOW:oe=14;break;default:oe=12}return oe}(S);return Y===this.decode.FLATE_DECODE&&(k="/Predictor "+ee+" "),k+="/Colors "+W+" /BitsPerComponent "+N+" /Columns "+T.width,(this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),(ce&&this.__addimage__.isArrayBuffer(ce)||this.__addimage__.isArrayBufferView(ce))&&(ce=this.__addimage__.arrayBufferToBinaryString(ce)),{alias:C,data:v,index:m,filter:Y,decodeParameters:k,transparency:j,palette:X,sMask:ce,predictor:ee,width:T.width,height:T.height,bitsPerComponent:N,colorSpace:I}}}})(xr.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new bV(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},f=new Z1(100).encode(c,100);return t.processJPEG.call(this,f,n,r,i)},t.processGIF87A=t.processGIF89A}(xr.API),sc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},sc.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){qi.log("bit decode error:"+n)}},sc.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},sc.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},sc.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},sc.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,f=r*this.width*4+4*i;this.data[f]=l,this.data[f+1]=a,this.data[f+2]=o,this.data[f+3]=c}this.pos+=t}},sc.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/e*255|0,f=i*this.width*4+4*s;this.data[f]=c,this.data[f+1]=l,this.data[f+2]=a,this.data[f+3]=255}this.pos+=t}},sc.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},sc.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},sc.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new sc(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new Z1(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(xr.API),x5.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new x5(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new Z1(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(xr.API),xr.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var f=r[c],p=r[c+1],v=r[c+2],m=r[c+3];s[a++]=f,s[a++]=p,s[a++]=v,o[l++]=m}var C=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:C,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},xr.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ud=xr.API,vm=Ud.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,f=c.fof?c.fof:1,p=e.doKerning!==!1,v=0,m=t.length,C=0,S=a[0]||l,I=[];for(n=0;n<m;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?I.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(v=p&&Ri(c[r])==="object"&&!isNaN(parseInt(c[r][C],10))?c[r][C]/f:0,I.push((a[r]||S)/l+v)),C=r;return I},y5=Ud.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Ud.processArabic&&(t=Ud.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:vm.apply(this,arguments).reduce(function(s,o){return s+o},0)},b5=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},_5=function(t,e,n){n||(n={});var r,i,s,o,a,l,c,f=[],p=[f],v=n.textIndent||0,m=0,C=0,S=t.split(" "),I=vm.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?S[0].length+2:n.lineIndent||0){var N=Array(l).join(" "),T=[];S.map(function(W){(W=W.split(/\s*\n/)).length>1?T=T.concat(W.map(function(X,ce){return(ce&&X.length?`
`:"")+X})):T.push(W[0])}),S=T,l=y5.apply(this,[N,n])}for(s=0,o=S.length;s<o;s++){var j=0;if(r=S[s],l&&r[0]==`
`&&(r=r.substr(1),j=1),v+m+(C=(i=vm.apply(this,[r,n])).reduce(function(W,X){return W+X},0))>e||j){if(C>e){for(a=b5.apply(this,[r,i,e-(v+m),e]),f.push(a.shift()),f=[a.pop()];a.length;)p.push([a.shift()]);C=i.slice(r.length-(f[0]?f[0].length:0)).reduce(function(W,X){return W+X},0)}else f=[r];p.push(f),v=C+l,m=I}else f.push(r),v+=m+C,m=I}return c=l?function(W,X){return(X?N:"")+W.join(" ")}:function(W){return W.join(" ")},p.map(c)},Ud.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var p=this.internal.getFont(f.fontName,f.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(_5.apply(this,[r[a],o,s]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(p){return"0x"+parseInt(p,10).toString(16)},o=t.__fontmetrics__.compress=function(p){var v,m,C,S,I=["{"];for(var N in p){if(v=p[N],isNaN(parseInt(N,10))?m="'"+N+"'":(N=parseInt(N,10),m=(m=s(N).slice(2)).slice(0,-1)+r[m.slice(-1)]),typeof v=="number")v<0?(C=s(v).slice(3),S="-"):(C=s(v).slice(2),S=""),C=S+C.slice(0,-1)+r[C.slice(-1)];else{if(Ri(v)!=="object")throw new Error("Don't know what to do with value type "+Ri(v)+".");C=o(v)}I.push(m+C)}return I.push("}"),I.join("")},a=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,m,C,S,I={},N=1,T=I,j=[],W="",X="",ce=p.length-1,he=1;he<ce;he+=1)(S=p[he])=="'"?v?(C=v.join(""),v=void 0):v=[]:v?v.push(S):S=="{"?(j.push([T,C]),T={},C=void 0):S=="}"?((m=j.pop())[0][m[1]]=T,C=void 0,T=m[0]):S=="-"?N=-1:C===void 0?n.hasOwnProperty(S)?(W+=n[S],C=parseInt(W,16)*N,N=1,W=""):W+=S:n.hasOwnProperty(S)?(X+=n[S],T[C]=parseInt(X,16)*N,N=1,C=void 0,X=""):X+=S;return I},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},f={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var v=p.font,m=f.Unicode[v.postScriptName];m&&(v.metadata.Unicode={},v.metadata.Unicode.widths=m.widths,v.metadata.Unicode.kerning=m.kerning);var C=c.Unicode[v.postScriptName];C&&(v.metadata.Unicode.encoding=C,v.encoding=C.codePages[0])}])}(xr.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Ng(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(xr),function(t){function e(){return(Lr.canvg?Promise.resolve(Lr.canvg):Sh(()=>import("./index.es.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}xr.API.addSvgAsImage=function(n,r,i,s,o,a,l,c){if(isNaN(r)||isNaN(i))throw qi.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw qi.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=s,f.height=o;var p=f.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,f.width,f.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return e().then(function(C){return C.fromString(p,n,v)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(C){return C.render(v)}).then(function(){m.addImage(f.toDataURL("image/jpeg",1),r,i,s,o,l,c)})}}(),xr.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},xr.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,f=0,p=0;function v(C,S){var I,N=!1;for(I=0;I<C.length;I+=1)C[I]===S&&(N=!0);return N}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var m=a.length;for(p=0;p<m;p+=1)n[a[p]].value=n[a[p]].defaultValue,n[a[p]].explicitSet=!1}if(Ri(t)==="object"){for(i in t)if(s=t[i],v(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&v(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(c=0;c<s.length;c+=1)if(r=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(f=0;f<s[c].length;f+=1)typeof s[c][f]!="number"&&(r=!1);r===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var C,S=[];for(C in n)n[C].explicitSet===!0&&(n[C].type==="name"?S.push("/"+C+" /"+n[C].value):S.push("/"+C+" "+n[C].value));S.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+S.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(xr.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],f=[""],p=0,v=s.length;p<v;++p){if(a=o.metadata.characterToGlyph(s.charCodeAt(p)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(p),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return f.join("");a=a.toString(16),f.push(c[4-a.length],a)}return f.join("")},r=function(s){var o,a,l,c,f,p,v;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,v=(a=Object.keys(s).sort(function(m,C){return m-C})).length;p<v;p++)o=a[p],l.length>=100&&(f+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(c=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(f+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),f+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,f=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var p=a.metadata.Unicode.widths,v=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),m="",C=0;C<v.length;C++)m+=String.fromCharCode(v[C]);var S=c();f({data:m,addLength1:!0,objectId:S}),l("endobj");var I=c();f({data:r(a.metadata.toUnicode),addLength1:!0,objectId:I}),l("endobj");var N=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Qd(a.fontName)),l("/FontFile2 "+S+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var T=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Qd(a.fontName)),l("/FontDescriptor "+N+" 0 R"),l("/W "+t.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+I+" 0 R"),l("/BaseFont /"+Qd(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+T+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,f=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var p=a.metadata.rawData,v="",m=0;m<p.length;m++)v+=String.fromCharCode(p[m]);var C=c();f({data:v,addLength1:!0,objectId:C}),l("endobj");var S=c();f({data:r(a.metadata.toUnicode),addLength1:!0,objectId:S}),l("endobj");var I=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+C+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+Qd(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var N=0;N<a.metadata.hmtx.widths.length;N++)a.metadata.hmtx.widths[N]=parseInt(a.metadata.hmtx.widths[N]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+S+" 0 R/BaseFont/"+Qd(a.fontName)+"/FontDescriptor "+I+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,c=s.y,f=s.options||{},p=s.mutex||{},v=p.pdfEscape,m=p.activeFontKey,C=p.fonts,S=m,I="",N=0,T="",j=C[S].encoding;if(C[S].encoding!=="Identity-H")return{text:a,x:l,y:c,options:f,mutex:p};for(T=a,S=m,Array.isArray(a)&&(T=a[0]),N=0;N<T.length;N+=1)C[S].metadata.hasOwnProperty("cmap")&&(o=C[S].metadata.cmap.unicode.codeMap[T[N].charCodeAt(0)]),o||T[N].charCodeAt(0)<256&&C[S].metadata.hasOwnProperty("Unicode")?I+=T[N]:I+="";var W="";return parseInt(S.slice(1))<14||j==="WinAnsiEncoding"?W=v(I,S).split("").map(function(X){return X.charCodeAt(0).toString(16)}).join(""):j==="Identity-H"&&(W=n(I,C[S])),p.isHex=!0,{text:W,x:l,y:c,options:f,mutex:p}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([i(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(i(Object.assign({},l,{text:o[c]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(xr),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(xr.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,c,f,p=e,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],C={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},S={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},I=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],N=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),T=!1,j=0;this.__bidiEngine__={};var W=function(F){var R=F.charCodeAt(),K=R>>8,Z=S[K];return Z!==void 0?p[256*Z+(255&R)]:K===252||K===253?"AL":N.test(K)?"L":K===8?"R":"N"},X=function(F){for(var R,K=0;K<F.length;K++){if((R=W(F.charAt(K)))==="L")return!1;if(R==="R")return!0}return!1},ce=function(F,R,K,Z){var Y,k,U,H,ue=R[Z];switch(ue){case"L":case"R":T=!1;break;case"N":case"AN":break;case"EN":T&&(ue="AN");break;case"AL":T=!0,ue="R";break;case"WS":ue="N";break;case"CS":Z<1||Z+1>=R.length||(Y=K[Z-1])!=="EN"&&Y!=="AN"||(k=R[Z+1])!=="EN"&&k!=="AN"?ue="N":T&&(k="AN"),ue=k===Y?k:"N";break;case"ES":ue=(Y=Z>0?K[Z-1]:"B")==="EN"&&Z+1<R.length&&R[Z+1]==="EN"?"EN":"N";break;case"ET":if(Z>0&&K[Z-1]==="EN"){ue="EN";break}if(T){ue="N";break}for(U=Z+1,H=R.length;U<H&&R[U]==="ET";)U++;ue=U<H&&R[U]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(H=R.length,U=Z+1;U<H&&R[U]==="NSM";)U++;if(U<H){var _e=F[Z],Ie=_e>=1425&&_e<=2303||_e===64286;if(Y=R[U],Ie&&(Y==="R"||Y==="AL")){ue="R";break}}}ue=Z<1||(Y=R[Z-1])==="B"?"N":K[Z-1];break;case"B":T=!1,i=!0,ue=j;break;case"S":s=!0,ue="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":T=!1;break;case"BN":ue="N"}return ue},he=function(F,R,K){var Z=F.split("");return K&&O(Z,K,{hiLevel:j}),Z.reverse(),R&&R.reverse(),Z.join("")},O=function(F,R,K){var Z,Y,k,U,H,ue=-1,_e=F.length,Ie=0,ee=[],te=j?m:v,oe=[];for(T=!1,i=!1,s=!1,Y=0;Y<_e;Y++)oe[Y]=W(F[Y]);for(k=0;k<_e;k++){if(H=Ie,ee[k]=ce(F,oe,ee,k),Z=240&(Ie=te[H][C[ee[k]]]),Ie&=15,R[k]=U=te[Ie][5],Z>0)if(Z===16){for(Y=ue;Y<k;Y++)R[Y]=1;ue=-1}else ue=-1;if(te[Ie][6])ue===-1&&(ue=k);else if(ue>-1){for(Y=ue;Y<k;Y++)R[Y]=U;ue=-1}oe[k]==="B"&&(R[k]=0),K.hiLevel|=U}s&&function(ge,ve,ye){for(var pe=0;pe<ye;pe++)if(ge[pe]==="S"){ve[pe]=j;for(var fe=pe-1;fe>=0&&ge[fe]==="WS";fe--)ve[fe]=j}}(oe,R,_e)},B=function(F,R,K,Z,Y){if(!(Y.hiLevel<F)){if(F===1&&j===1&&!i)return R.reverse(),void(K&&K.reverse());for(var k,U,H,ue,_e=R.length,Ie=0;Ie<_e;){if(Z[Ie]>=F){for(H=Ie+1;H<_e&&Z[H]>=F;)H++;for(ue=Ie,U=H-1;ue<U;ue++,U--)k=R[ue],R[ue]=R[U],R[U]=k,K&&(k=K[ue],K[ue]=K[U],K[U]=k);Ie=H}Ie++}}},q=function(F,R,K){var Z=F.split(""),Y={hiLevel:j};return K||(K=[]),O(Z,K,Y),function(k,U,H){if(H.hiLevel!==0&&f)for(var ue,_e=0;_e<k.length;_e++)U[_e]===1&&(ue=I.indexOf(k[_e]))>=0&&(k[_e]=I[ue+1])}(Z,K,Y),B(2,Z,R,K,Y),B(1,Z,R,K,Y),Z.join("")};return this.__bidiEngine__.doBidiReorder=function(F,R,K){if(function(Y,k){if(k)for(var U=0;U<Y.length;U++)k[U]=U;a===void 0&&(a=X(Y)),c===void 0&&(c=X(Y))}(F,R),o||!l||c)if(o&&l&&a^c)j=a?1:0,F=he(F,R,K);else if(!o&&l&&c)j=a?1:0,F=q(F,R,K),F=he(F,R);else if(!o||a||l||c){if(o&&!l&&a^c)F=he(F,R),a?(j=0,F=q(F,R,K)):(j=1,F=q(F,R,K),F=he(F,R));else if(o&&a&&!l&&c)j=1,F=q(F,R,K),F=he(F,R);else if(!o&&!l&&a^c){var Z=f;a?(j=1,F=q(F,R,K),j=0,f=!1,F=q(F,R,K),f=Z):(j=0,F=q(F,R,K),F=he(F,R),j=1,f=!1,F=q(F,R,K),f=Z,F=he(F,R))}}else j=0,F=q(F,R,K);else j=a?1:0,F=q(F,R,K);return F},this.__bidiEngine__.setOptions=function(F){F&&(o=F.isInputVisual,l=F.isOutputVisual,a=F.isInputRtl,c=F.isOutputRtl,f=F.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(xr),xr.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new bf(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new IV(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new _V(this.contents),this.head=new xV(this),this.name=new PV(this),this.cmap=new jE(this),this.toUnicode={},this.hhea=new LV(this),this.maxp=new kV(this),this.hmtx=new MV(this),this.post=new SV(this),this.os2=new CV(this),this.loca=new DV(this),this.glyf=new AV(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var bc,bf=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),_V=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,c,f,p,v,m,C,S;for(S in m=Object.keys(n).length,l=Math.log(2),p=16*Math.floor(Math.log(m)/l),o=Math.floor(p/l),f=16*m-p,(i=new bf).writeInt(this.scalarType),i.writeShort(m),i.writeShort(p),i.writeShort(o),i.writeShort(f),s=16*m,c=i.pos+s,a=null,C=[],n)for(v=n[S],i.writeString(S),i.writeInt(t(v)),i.writeInt(c),i.writeInt(v.length),C=C.concat(v),S==="head"&&(a=c),c+=v.length;c%4;)C.push(0),c++;return i.write(C),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=zE.call(n);n.length%4;)n.push(0);for(s=new bf(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),wV={}.hasOwnProperty,eh=function(t,e){for(var n in e)wV.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};bc=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var xV=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eh(e,bc),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new bf).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),L5=function(){function t(e,n){var r,i,s,o,a,l,c,f,p,v,m,C,S,I,N,T,j;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(m=e.readUInt16(),v=m/2,e.pos+=6,s=function(){var W,X;for(X=[],l=W=0;0<=v?W<v:W>v;l=0<=v?++W:--W)X.push(e.readUInt16());return X}(),e.pos+=2,S=function(){var W,X;for(X=[],l=W=0;0<=v?W<v:W>v;l=0<=v?++W:--W)X.push(e.readUInt16());return X}(),c=function(){var W,X;for(X=[],l=W=0;0<=v?W<v:W>v;l=0<=v?++W:--W)X.push(e.readUInt16());return X}(),f=function(){var W,X;for(X=[],l=W=0;0<=v?W<v:W>v;l=0<=v?++W:--W)X.push(e.readUInt16());return X}(),i=(this.length-e.pos+this.offset)/2,a=function(){var W,X;for(X=[],l=W=0;0<=i?W<i:W>i;l=0<=i?++W:--W)X.push(e.readUInt16());return X}(),l=N=0,j=s.length;N<j;l=++N)for(I=s[l],r=T=C=S[l];C<=I?T<=I:T>=I;r=C<=I?++T:--T)f[l]===0?o=r+c[l]:(o=a[f[l]/2+(r-C)-(v-l)]||0)!==0&&(o+=c[l]),this.codeMap[r]=65535&o}e.pos=p}return t.encode=function(e,n){var r,i,s,o,a,l,c,f,p,v,m,C,S,I,N,T,j,W,X,ce,he,O,B,q,F,R,K,Z,Y,k,U,H,ue,_e,Ie,ee,te,oe,ge,ve,ye,pe,fe,$e,Ne,ot;switch(Z=new bf,o=Object.keys(e).sort(function(le,ae){return le-ae}),n){case"macroman":for(S=0,I=function(){var le=[];for(C=0;C<256;++C)le.push(0);return le}(),T={0:0},s={},Y=0,ue=o.length;Y<ue;Y++)T[fe=e[i=o[Y]]]==null&&(T[fe]=++S),s[i]={old:e[i],new:T[e[i]]},I[i]=T[e[i]];return Z.writeUInt16(1),Z.writeUInt16(0),Z.writeUInt32(12),Z.writeUInt16(0),Z.writeUInt16(262),Z.writeUInt16(0),Z.write(I),{charMap:s,subtable:Z.data,maxGlyphID:S+1};case"unicode":for(R=[],p=[],j=0,T={},r={},N=c=null,k=0,_e=o.length;k<_e;k++)T[X=e[i=o[k]]]==null&&(T[X]=++j),r[i]={old:X,new:T[X]},a=T[X]-i,N!=null&&a===c||(N&&p.push(N),R.push(i),c=a),N=i;for(N&&p.push(N),p.push(65535),R.push(65535),q=2*(B=R.length),O=2*Math.pow(Math.log(B)/Math.LN2,2),v=Math.log(O/2)/Math.LN2,he=2*B-O,l=[],ce=[],m=[],C=U=0,Ie=R.length;U<Ie;C=++U){if(F=R[C],f=p[C],F===65535){l.push(0),ce.push(0);break}if(F-(K=r[F].new)>=32768)for(l.push(0),ce.push(2*(m.length+B-C)),i=H=F;F<=f?H<=f:H>=f;i=F<=f?++H:--H)m.push(r[i].new);else l.push(K-F),ce.push(0)}for(Z.writeUInt16(3),Z.writeUInt16(1),Z.writeUInt32(12),Z.writeUInt16(4),Z.writeUInt16(16+8*B+2*m.length),Z.writeUInt16(0),Z.writeUInt16(q),Z.writeUInt16(O),Z.writeUInt16(v),Z.writeUInt16(he),ye=0,ee=p.length;ye<ee;ye++)i=p[ye],Z.writeUInt16(i);for(Z.writeUInt16(0),pe=0,te=R.length;pe<te;pe++)i=R[pe],Z.writeUInt16(i);for($e=0,oe=l.length;$e<oe;$e++)a=l[$e],Z.writeUInt16(a);for(Ne=0,ge=ce.length;Ne<ge;Ne++)W=ce[Ne],Z.writeUInt16(W);for(ot=0,ve=m.length;ot<ve;ot++)S=m[ot],Z.writeUInt16(S);return{charMap:r,subtable:Z.data,maxGlyphID:j+1}}},t}(),jE=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eh(e,bc),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new L5(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=L5.encode(n,r),(s=new bf).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),LV=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eh(e,bc),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),CV=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eh(e,bc),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),SV=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eh(e,bc),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,c;for(c=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)c.push(n.readUInt32());return c}).call(this)}},e}(),EV=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},PV=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eh(e,bc),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,o,a,l,c,f,p,v,m;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},o=p=0,v=i.length;p<v;o=++p)s=i[o],n.pos=s.offset,f=n.readString(s.length),a=new EV(f,s),c[m=s.nameID]==null&&(c[m]=[]),c[s.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),kV=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eh(e,bc),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),MV=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eh(e,bc),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,o,a,l,c;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var f,p;for(p=[],r=f=0;0<=s?f<s:f>s;r=0<=s?++f:--f)p.push(n.readInt16());return p}(),this.widths=(function(){var f,p,v,m;for(m=[],f=0,p=(v=this.metrics).length;f<p;f++)o=v[f],m.push(o.advance);return m}).call(this),i=this.widths[this.widths.length-1],c=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)c.push(this.widths.push(i));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),zE=[].slice,AV=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eh(e,bc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,o,a,l,c,f,p,v;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(l=new bf(r.read(s))).readShort(),f=l.readShort(),v=l.readShort(),c=l.readShort(),p=l.readShort(),this.cache[n]=a===-1?new OV(l,f,v,c,p):new TV(l,a,f,v,c,p),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,o,a,l,c;for(a=[],o=[],l=0,c=r.length;l<c;l++)s=n[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),TV=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),OV=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new bf(zE.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),DV=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eh(e,bc),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(n.readUInt32());return o}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(s+=c)}for(var f=new Array(4*i.length),p=0;p<i.length;++p)f[4*p+3]=255&i[p],f[4*p+2]=(65280&i[p])>>8,f[4*p+1]=(16711680&i[p])>>16,f[4*p]=(4278190080&i[p])>>24;return f},e}(),IV=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,c,f,p,v,m,C,S,I,N;for(i in r=jE.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),m={0:0},N=r.charMap)m[(l=N[i]).old]=l.new;for(C in v=r.maxGlyphID,o)C in m||(m[C]=v++);return f=function(T){var j,W;for(j in W={},T)W[T[j]]=j;return W}(m),p=Object.keys(f).sort(function(T,j){return T-j}),S=function(){var T,j,W;for(W=[],T=0,j=p.length;T<j;T++)a=p[T],W.push(f[a]);return W}(),s=this.font.glyf.encode(o,S,m),c=this.font.loca.encode(s.offsets,S),I={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(I["OS/2"]=this.font.os2.raw()),this.font.directory.encode(I)},t}();xr.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)r=n[a],c.push(e.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();var jv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */jv.exports;(function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,f="__lodash_placeholder__",p=1,v=2,m=4,C=1,S=2,I=1,N=2,T=4,j=8,W=16,X=32,ce=64,he=128,O=256,B=512,q=30,F="...",R=800,K=16,Z=1,Y=2,k=3,U=1/0,H=9007199254740991,ue=17976931348623157e292,_e=NaN,Ie=4294967295,ee=Ie-1,te=Ie>>>1,oe=[["ary",he],["bind",I],["bindKey",N],["curry",j],["curryRight",W],["flip",B],["partial",X],["partialRight",ce],["rearg",O]],ge="[object Arguments]",ve="[object Array]",ye="[object AsyncFunction]",pe="[object Boolean]",fe="[object Date]",$e="[object DOMException]",Ne="[object Error]",ot="[object Function]",le="[object GeneratorFunction]",ae="[object Map]",de="[object Number]",re="[object Null]",Ae="[object Object]",Ge="[object Promise]",tt="[object Proxy]",at="[object RegExp]",ut="[object Set]",gt="[object String]",$t="[object Symbol]",Rt="[object Undefined]",Gt="[object WeakMap]",ln="[object WeakSet]",mn="[object ArrayBuffer]",yn="[object DataView]",Ze="[object Float32Array]",it="[object Float64Array]",et="[object Int8Array]",Bt="[object Int16Array]",Zt="[object Int32Array]",Sn="[object Uint8Array]",bn="[object Uint8ClampedArray]",xn="[object Uint16Array]",zn="[object Uint32Array]",vn=/\b__p \+= '';/g,tn=/\b(__p \+=) '' \+/g,un=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Xn=/&(?:amp|lt|gt|quot|#39);/g,nr=/[&<>"']/g,ur=RegExp(Xn.source),Rn=RegExp(nr.source),Cr=/<%-([\s\S]+?)%>/g,Ki=/<%([\s\S]+?)%>/g,Ci=/<%=([\s\S]+?)%>/g,Us=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ss=/^\w*$/,Gn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ot=/[\\^$.*+?()[\]{}|]/g,Je=RegExp(Ot.source),Ut=/^\s+/,_n=/\s/,Xt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Fn=/\{\n\/\* \[wrapped with (.+)\] \*/,Wt=/,? & /,Lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,hn=/[()=,{}\[\]\/\s]/,Ln=/\\(\\)?/g,On=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Wn=/\w*$/,ar=/^[-+]0x[0-9a-f]+$/i,Xr=/^0b[01]+$/i,sr=/^\[object .+?Constructor\]$/,Fi=/^0o[0-7]+$/i,Gr=/^(?:0|[1-9]\d*)$/,_o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ir=/($^)/,gr=/['\n\r\u2028\u2029\\]/g,Ls="\\ud800-\\udfff",Ha="\\u0300-\\u036f",vu="\\ufe20-\\ufe2f",_c="\\u20d0-\\u20ff",wc=Ha+vu+_c,gl="\\u2700-\\u27bf",ml="a-z\\xdf-\\xf6\\xf8-\\xff",$u="\\xac\\xb1\\xd7\\xf7",xc="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Mo="\\u2000-\\u206f",Wr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",fr="A-Z\\xc0-\\xd6\\xd8-\\xde",Ga="\\ufe0e\\ufe0f",ga=$u+xc+Mo+Wr,Ro="[']",ql="["+Ls+"]",mr="["+ga+"]",qr="["+wc+"]",Wa="\\d+",Cs="["+gl+"]",Ss="["+ml+"]",Vu="[^"+Ls+ga+Wa+gl+ml+fr+"]",vl="\\ud83c[\\udffb-\\udfff]",ma="(?:"+qr+"|"+vl+")",Di="[^"+Ls+"]",Fo="(?:\\ud83c[\\udde6-\\uddff]){2}",qa="[\\ud800-\\udbff][\\udc00-\\udfff]",wo="["+fr+"]",yu="\\u200d",Ya="(?:"+Ss+"|"+Vu+")",Hu="(?:"+wo+"|"+Vu+")",jo="(?:"+Ro+"(?:d|ll|m|re|s|t|ve))?",va="(?:"+Ro+"(?:D|LL|M|RE|S|T|VE))?",Ka=ma+"?",Yl="["+Ga+"]?",os="(?:"+yu+"(?:"+[Di,Fo,qa].join("|")+")"+Yl+Ka+")*",Lc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",bu="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",cr=Yl+Ka+os,vr="(?:"+[Cs,Fo,qa].join("|")+")"+cr,zo="(?:"+[Di+qr+"?",qr,Fo,qa,ql].join("|")+")",$r=RegExp(Ro,"g"),Gu=RegExp(qr,"g"),yl=RegExp(vl+"(?="+vl+")|"+zo+cr,"g"),bl=RegExp([wo+"?"+Ss+"+"+jo+"(?="+[mr,wo,"$"].join("|")+")",Hu+"+"+va+"(?="+[mr,wo+Ya,"$"].join("|")+")",wo+"?"+Ya+"+"+jo,wo+"+"+va,bu,Lc,Wa,vr].join("|"),"g"),Uo=RegExp("["+yu+Ls+wc+Ga+"]"),Za=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Wu=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Kl=-1,dr={};dr[Ze]=dr[it]=dr[et]=dr[Bt]=dr[Zt]=dr[Sn]=dr[bn]=dr[xn]=dr[zn]=!0,dr[ge]=dr[ve]=dr[mn]=dr[pe]=dr[yn]=dr[fe]=dr[Ne]=dr[ot]=dr[ae]=dr[de]=dr[Ae]=dr[at]=dr[ut]=dr[gt]=dr[Gt]=!1;var Ar={};Ar[ge]=Ar[ve]=Ar[mn]=Ar[yn]=Ar[pe]=Ar[fe]=Ar[Ze]=Ar[it]=Ar[et]=Ar[Bt]=Ar[Zt]=Ar[ae]=Ar[de]=Ar[Ae]=Ar[at]=Ar[ut]=Ar[gt]=Ar[$t]=Ar[Sn]=Ar[bn]=Ar[xn]=Ar[zn]=!0,Ar[Ne]=Ar[ot]=Ar[Gt]=!1;var Xa={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Cc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Zl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},_u={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},_l=parseFloat,Xl=parseInt,wu=typeof Jo=="object"&&Jo&&Jo.Object===Object&&Jo,Ir=typeof self=="object"&&self&&self.Object===Object&&self,zi=wu||Ir||Function("return this")(),er=e&&!e.nodeType&&e,Ui=er&&!0&&t&&!t.nodeType&&t,wl=Ui&&Ui.exports===er,ya=wl&&wu.process,Si=function(){try{var yt=Ui&&Ui.require&&Ui.require("util").types;return yt||ya&&ya.binding&&ya.binding("util")}catch{}}(),xu=Si&&Si.isArrayBuffer,ea=Si&&Si.isDate,Jl=Si&&Si.isMap,Ql=Si&&Si.isRegExp,Ao=Si&&Si.isSet,eu=Si&&Si.isTypedArray;function ti(yt,Vt,kt){switch(kt.length){case 0:return yt.call(Vt);case 1:return yt.call(Vt,kt[0]);case 2:return yt.call(Vt,kt[0],kt[1]);case 3:return yt.call(Vt,kt[0],kt[1],kt[2])}return yt.apply(Vt,kt)}function Sc(yt,Vt,kt,Pn){for(var Un=-1,hr=yt==null?0:yt.length;++Un<hr;){var Ei=yt[Un];Vt(Pn,Ei,kt(Ei),yt)}return Pn}function fs(yt,Vt){for(var kt=-1,Pn=yt==null?0:yt.length;++kt<Pn&&Vt(yt[kt],kt,yt)!==!1;);return yt}function $o(yt,Vt){for(var kt=yt==null?0:yt.length;kt--&&Vt(yt[kt],kt,yt)!==!1;);return yt}function tu(yt,Vt){for(var kt=-1,Pn=yt==null?0:yt.length;++kt<Pn;)if(!Vt(yt[kt],kt,yt))return!1;return!0}function Vo(yt,Vt){for(var kt=-1,Pn=yt==null?0:yt.length,Un=0,hr=[];++kt<Pn;){var Ei=yt[kt];Vt(Ei,kt,yt)&&(hr[Un++]=Ei)}return hr}function xl(yt,Vt){var kt=yt==null?0:yt.length;return!!kt&&on(yt,Vt,0)>-1}function Ll(yt,Vt,kt){for(var Pn=-1,Un=yt==null?0:yt.length;++Pn<Un;)if(kt(Vt,yt[Pn]))return!0;return!1}function ni(yt,Vt){for(var kt=-1,Pn=yt==null?0:yt.length,Un=Array(Pn);++kt<Pn;)Un[kt]=Vt(yt[kt],kt,yt);return Un}function xo(yt,Vt){for(var kt=-1,Pn=Vt.length,Un=yt.length;++kt<Pn;)yt[Un+kt]=Vt[kt];return yt}function ba(yt,Vt,kt,Pn){var Un=-1,hr=yt==null?0:yt.length;for(Pn&&hr&&(kt=yt[++Un]);++Un<hr;)kt=Vt(kt,yt[Un],Un,yt);return kt}function $i(yt,Vt,kt,Pn){var Un=yt==null?0:yt.length;for(Pn&&Un&&(kt=yt[--Un]);Un--;)kt=Vt(kt,yt[Un],Un,yt);return kt}function z(yt,Vt){for(var kt=-1,Pn=yt==null?0:yt.length;++kt<Pn;)if(Vt(yt[kt],kt,yt))return!0;return!1}var we=lr("length");function We(yt){return yt.split("")}function lt(yt){return yt.match(Lt)||[]}function xt(yt,Vt,kt){var Pn;return kt(yt,function(Un,hr,Ei){if(Vt(Un,hr,Ei))return Pn=hr,!1}),Pn}function Ft(yt,Vt,kt,Pn){for(var Un=yt.length,hr=kt+(Pn?1:-1);Pn?hr--:++hr<Un;)if(Vt(yt[hr],hr,yt))return hr;return-1}function on(yt,Vt,kt){return Vt===Vt?as(yt,Vt,kt):Ft(yt,In,kt)}function Mn(yt,Vt,kt,Pn){for(var Un=kt-1,hr=yt.length;++Un<hr;)if(Pn(yt[Un],Vt))return Un;return-1}function In(yt){return yt!==yt}function Jn(yt,Vt){var kt=yt==null?0:yt.length;return kt?ri(yt,Vt)/kt:_e}function lr(yt){return function(Vt){return Vt==null?n:Vt[yt]}}function Er(yt){return function(Vt){return yt==null?n:yt[Vt]}}function wi(yt,Vt,kt,Pn,Un){return Un(yt,function(hr,Ei,ii){kt=Pn?(Pn=!1,hr):Vt(kt,hr,Ei,ii)}),kt}function Zr(yt,Vt){var kt=yt.length;for(yt.sort(Vt);kt--;)yt[kt]=yt[kt].value;return yt}function ri(yt,Vt){for(var kt,Pn=-1,Un=yt.length;++Pn<Un;){var hr=Vt(yt[Pn]);hr!==n&&(kt=kt===n?hr:kt+hr)}return kt}function Vi(yt,Vt){for(var kt=-1,Pn=Array(yt);++kt<yt;)Pn[kt]=Vt(kt);return Pn}function Zi(yt,Vt){return ni(Vt,function(kt){return[kt,yt[kt]]})}function Lo(yt){return yt&&yt.slice(0,wa(yt)+1).replace(Ut,"")}function Pr(yt){return function(Vt){return yt(Vt)}}function Es(yt,Vt){return ni(Vt,function(kt){return yt[kt]})}function Cl(yt,Vt){return yt.has(Vt)}function $s(yt,Vt){for(var kt=-1,Pn=yt.length;++kt<Pn&&on(Vt,yt[kt],0)>-1;);return kt}function Lu(yt,Vt){for(var kt=yt.length;kt--&&on(Vt,yt[kt],0)>-1;);return kt}function ta(yt,Vt){for(var kt=yt.length,Pn=0;kt--;)yt[kt]===Vt&&++Pn;return Pn}var qu=Er(Xa),Ja=Er(Cc);function Qa(yt){return"\\"+_u[yt]}function Xi(yt,Vt){return yt==null?n:yt[Vt]}function na(yt){return Uo.test(yt)}function Co(yt){return Za.test(yt)}function ro(yt){for(var Vt,kt=[];!(Vt=yt.next()).done;)kt.push(Vt.value);return kt}function Sl(yt){var Vt=-1,kt=Array(yt.size);return yt.forEach(function(Pn,Un){kt[++Vt]=[Un,Pn]}),kt}function Ps(yt,Vt){return function(kt){return yt(Vt(kt))}}function Vs(yt,Vt){for(var kt=-1,Pn=yt.length,Un=0,hr=[];++kt<Pn;){var Ei=yt[kt];(Ei===Vt||Ei===f)&&(yt[kt]=f,hr[Un++]=kt)}return hr}function Hs(yt){var Vt=-1,kt=Array(yt.size);return yt.forEach(function(Pn){kt[++Vt]=Pn}),kt}function Ec(yt){var Vt=-1,kt=Array(yt.size);return yt.forEach(function(Pn){kt[++Vt]=[Pn,Pn]}),kt}function as(yt,Vt,kt){for(var Pn=kt-1,Un=yt.length;++Pn<Un;)if(yt[Pn]===Vt)return Pn;return-1}function _a(yt,Vt,kt){for(var Pn=kt+1;Pn--;)if(yt[Pn]===Vt)return Pn;return Pn}function ks(yt){return na(yt)?As(yt):we(yt)}function Ms(yt){return na(yt)?ds(yt):We(yt)}function wa(yt){for(var Vt=yt.length;Vt--&&_n.test(yt.charAt(Vt)););return Vt}var xa=Er(Zl);function As(yt){for(var Vt=yl.lastIndex=0;yl.test(yt);)++Vt;return Vt}function ds(yt){return yt.match(yl)||[]}function ra(yt){return yt.match(bl)||[]}var So=function yt(Vt){Vt=Vt==null?zi:Ts.defaults(zi.Object(),Vt,Ts.pick(zi,Wu));var kt=Vt.Array,Pn=Vt.Date,Un=Vt.Error,hr=Vt.Function,Ei=Vt.Math,ii=Vt.Object,nu=Vt.RegExp,Gs=Vt.String,Pi=Vt.TypeError,ia=kt.prototype,La=hr.prototype,sa=ii.prototype,oa=Vt["__core-js_shared__"],aa=La.toString,Nr=sa.hasOwnProperty,Ho=0,ps=function(){var d=/[^.]+$/.exec(oa&&oa.keys&&oa.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}(),si=sa.toString,hi=aa.call(ii),Hi=zi._,vi=nu("^"+aa.call(Nr).replace(Ot,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Eo=wl?Vt.Buffer:n,io=Vt.Symbol,To=Vt.Uint8Array,Yu=Eo?Eo.allocUnsafe:n,la=Ps(ii.getPrototypeOf,ii),Ji=ii.create,mi=sa.propertyIsEnumerable,Os=ia.splice,so=io?io.isConcatSpreadable:n,or=io?io.iterator:n,Ca=io?io.toStringTag:n,Sa=function(){try{var d=Df(ii,"defineProperty");return d({},"",{}),d}catch{}}(),Go=Vt.clearTimeout!==zi.clearTimeout&&Vt.clearTimeout,Ws=Pn&&Pn.now!==zi.Date.now&&Pn.now,th=Vt.setTimeout!==zi.setTimeout&&Vt.setTimeout,gs=Ei.ceil,ms=Ei.floor,Wo=ii.getOwnPropertySymbols,u=Eo?Eo.isBuffer:n,y=Vt.isFinite,P=ia.join,V=Ps(ii.keys,ii),ie=Ei.max,Se=Ei.min,nt=Pn.now,Pt=Vt.parseInt,jt=Ei.random,nn=ia.reverse,An=Df(Vt,"DataView"),qn=Df(Vt,"Map"),Sr=Df(Vt,"Promise"),Qi=Df(Vt,"Set"),Ii=Df(Vt,"WeakMap"),vs=Df(ii,"create"),ki=Ii&&new Ii,oo={},nh=If(An),ua=If(qn),qo=If(Sr),Oo=If(Qi),Ef=If(Ii),Cu=io?io.prototype:n,Jr=Cu?Cu.valueOf:n,Ds=Cu?Cu.toString:n;function Oe(d){if(qs(d)&&!Rr(d)&&!(d instanceof kr)){if(d instanceof ys)return d;if(Nr.call(d,"__wrapped__"))return Iw(d)}return new ys(d)}var ao=function(){function d(){}return function(b){if(!Ns(b))return{};if(Ji)return Ji(b);d.prototype=b;var D=new d;return d.prototype=n,D}}();function Ku(){}function ys(d,b){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=n}Oe.templateSettings={escape:Cr,evaluate:Ki,interpolate:Ci,variable:"",imports:{_:Oe}},Oe.prototype=Ku.prototype,Oe.prototype.constructor=Oe,ys.prototype=ao(Ku.prototype),ys.prototype.constructor=ys;function kr(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ie,this.__views__=[]}function Bh(){var d=new kr(this.__wrapped__);return d.__actions__=Pl(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=Pl(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=Pl(this.__views__),d}function _d(){if(this.__filtered__){var d=new kr(this);d.__dir__=-1,d.__filtered__=!0}else d=this.clone(),d.__dir__*=-1;return d}function Rh(){var d=this.__wrapped__.value(),b=this.__dir__,D=Rr(d),Q=b<0,Le=D?d.length:0,je=Dk(0,Le,this.__views__),Qe=je.start,pt=je.end,Et=pt-Qe,rn=Q?pt:Qe-1,sn=this.__iteratees__,cn=sn.length,Bn=0,tr=Se(Et,this.__takeCount__);if(!D||!Q&&Le==Et&&tr==Et)return Su(d,this.__actions__);var yr=[];e:for(;Et--&&Bn<tr;){rn+=b;for(var Yr=-1,br=d[rn];++Yr<cn;){var oi=sn[Yr],di=oi.iteratee,su=oi.type,rl=di(br);if(su==Y)br=rl;else if(!rl){if(su==Z)continue e;break e}}yr[Bn++]=br}return yr}kr.prototype=ao(Ku.prototype),kr.prototype.constructor=kr;function el(d){var b=-1,D=d==null?0:d.length;for(this.clear();++b<D;){var Q=d[b];this.set(Q[0],Q[1])}}function rh(){this.__data__=vs?vs(null):{},this.size=0}function Pf(d){var b=this.has(d)&&delete this.__data__[d];return this.size-=b?1:0,b}function Op(d){var b=this.__data__;if(vs){var D=b[d];return D===l?n:D}return Nr.call(b,d)?b[d]:n}function Pc(d){var b=this.__data__;return vs?b[d]!==n:Nr.call(b,d)}function Fh(d,b){var D=this.__data__;return this.size+=this.has(d)?0:1,D[d]=vs&&b===n?l:b,this}el.prototype.clear=rh,el.prototype.delete=Pf,el.prototype.get=Op,el.prototype.has=Pc,el.prototype.set=Fh;function ru(d){var b=-1,D=d==null?0:d.length;for(this.clear();++b<D;){var Q=d[b];this.set(Q[0],Q[1])}}function Dp(){this.__data__=[],this.size=0}function jh(d){var b=this.__data__,D=vt(b,d);if(D<0)return!1;var Q=b.length-1;return D==Q?b.pop():Os.call(b,D,1),--this.size,!0}function zh(d){var b=this.__data__,D=vt(b,d);return D<0?n:b[D][1]}function wd(d){return vt(this.__data__,d)>-1}function xd(d,b){var D=this.__data__,Q=vt(D,d);return Q<0?(++this.size,D.push([d,b])):D[Q][1]=b,this}ru.prototype.clear=Dp,ru.prototype.delete=jh,ru.prototype.get=zh,ru.prototype.has=wd,ru.prototype.set=xd;function Ea(d){var b=-1,D=d==null?0:d.length;for(this.clear();++b<D;){var Q=d[b];this.set(Q[0],Q[1])}}function Ld(){this.size=0,this.__data__={hash:new el,map:new(qn||ru),string:new el}}function Cd(d){var b=H0(this,d).delete(d);return this.size-=b?1:0,b}function Sd(d){return H0(this,d).get(d)}function w(d){return H0(this,d).has(d)}function A(d,b){var D=H0(this,d),Q=D.size;return D.set(d,b),this.size+=D.size==Q?0:1,this}Ea.prototype.clear=Ld,Ea.prototype.delete=Cd,Ea.prototype.get=Sd,Ea.prototype.has=w,Ea.prototype.set=A;function G(d){var b=-1,D=d==null?0:d.length;for(this.__data__=new Ea;++b<D;)this.add(d[b])}function se(d){return this.__data__.set(d,l),this}function xe(d){return this.__data__.has(d)}G.prototype.add=G.prototype.push=se,G.prototype.has=xe;function Ee(d){var b=this.__data__=new ru(d);this.size=b.size}function ke(){this.__data__=new ru,this.size=0}function Te(d){var b=this.__data__,D=b.delete(d);return this.size=b.size,D}function Be(d){return this.__data__.get(d)}function He(d){return this.__data__.has(d)}function ht(d,b){var D=this.__data__;if(D instanceof ru){var Q=D.__data__;if(!qn||Q.length<i-1)return Q.push([d,b]),this.size=++D.size,this;D=this.__data__=new Ea(Q)}return D.set(d,b),this.size=D.size,this}Ee.prototype.clear=ke,Ee.prototype.delete=Te,Ee.prototype.get=Be,Ee.prototype.has=He,Ee.prototype.set=ht;function Dt(d,b){var D=Rr(d),Q=!D&&Nf(d),Le=!D&&!Q&&$h(d),je=!D&&!Q&&!Le&&Id(d),Qe=D||Q||Le||je,pt=Qe?Vi(d.length,Gs):[],Et=pt.length;for(var rn in d)(b||Nr.call(d,rn))&&!(Qe&&(rn=="length"||Le&&(rn=="offset"||rn=="parent")||je&&(rn=="buffer"||rn=="byteLength"||rn=="byteOffset")||uh(rn,Et)))&&pt.push(rn);return pt}function It(d){var b=d.length;return b?d[Af(0,b-1)]:n}function wt(d,b){return G0(Pl(d),Yn(b,0,d.length))}function qt(d){return G0(Pl(d))}function zt(d,b,D){(D!==n&&!tc(d[b],D)||D===n&&!(b in d))&&kn(d,b,D)}function ft(d,b,D){var Q=d[b];(!(Nr.call(d,b)&&tc(Q,D))||D===n&&!(b in d))&&kn(d,b,D)}function vt(d,b){for(var D=d.length;D--;)if(tc(d[D][0],b))return D;return-1}function Jt(d,b,D,Q){return $(d,function(Le,je,Qe){b(Q,Le,D(Le),Qe)}),Q}function an(d,b){return d&&Ac(b,Yo(b),d)}function Qt(d,b){return d&&Ac(b,Ml(b),d)}function kn(d,b,D){b=="__proto__"&&Sa?Sa(d,b,{configurable:!0,enumerable:!0,value:D,writable:!0}):d[b]=D}function Cn(d,b){for(var D=-1,Q=b.length,Le=kt(Q),je=d==null;++D<Q;)Le[D]=je?n:o1(d,b[D]);return Le}function Yn(d,b,D){return d===d&&(D!==n&&(d=d<=D?d:D),b!==n&&(d=d>=b?d:b)),d}function h(d,b,D,Q,Le,je){var Qe,pt=b&p,Et=b&v,rn=b&m;if(D&&(Qe=Le?D(d,Q,Le,je):D(d)),Qe!==n)return Qe;if(!Ns(d))return d;var sn=Rr(d);if(sn){if(Qe=Nk(d),!pt)return Pl(d,Qe)}else{var cn=ka(d),Bn=cn==ot||cn==le;if($h(d))return ow(d,pt);if(cn==Ae||cn==ge||Bn&&!Le){if(Qe=Et||Bn?{}:Sw(d),!pt)return Et?Ck(d,Qt(Qe,d)):Lk(d,an(Qe,d))}else{if(!Ar[cn])return Le?d:{};Qe=Bk(d,cn,pt)}}je||(je=new Ee);var tr=je.get(d);if(tr)return tr;je.set(d,Qe),ex(d)?d.forEach(function(br){Qe.add(h(br,b,D,br,d,je))}):Jw(d)&&d.forEach(function(br,oi){Qe.set(oi,h(br,b,D,oi,d,je))});var yr=rn?Et?Wy:Gy:Et?Ml:Yo,Yr=sn?n:yr(d);return fs(Yr||d,function(br,oi){Yr&&(oi=br,br=d[oi]),ft(Qe,oi,h(br,b,D,oi,d,je))}),Qe}function g(d){var b=Yo(d);return function(D){return _(D,d,b)}}function _(d,b,D){var Q=D.length;if(d==null)return!Q;for(d=ii(d);Q--;){var Le=D[Q],je=b[Le],Qe=d[Le];if(Qe===n&&!(Le in d)||!je(Qe))return!1}return!0}function x(d,b,D){if(typeof d!="function")throw new Pi(o);return Fp(function(){d.apply(n,D)},b)}function M(d,b,D,Q){var Le=-1,je=xl,Qe=!0,pt=d.length,Et=[],rn=b.length;if(!pt)return Et;D&&(b=ni(b,Pr(D))),Q?(je=Ll,Qe=!1):b.length>=i&&(je=Cl,Qe=!1,b=new G(b));e:for(;++Le<pt;){var sn=d[Le],cn=D==null?sn:D(sn);if(sn=Q||sn!==0?sn:0,Qe&&cn===cn){for(var Bn=rn;Bn--;)if(b[Bn]===cn)continue e;Et.push(sn)}else je(b,cn,Q)||Et.push(sn)}return Et}var $=hw(Kt),J=hw(fn,!0);function ne(d,b){var D=!0;return $(d,function(Q,Le,je){return D=!!b(Q,Le,je),D}),D}function me(d,b,D){for(var Q=-1,Le=d.length;++Q<Le;){var je=d[Q],Qe=b(je);if(Qe!=null&&(pt===n?Qe===Qe&&!iu(Qe):D(Qe,pt)))var pt=Qe,Et=je}return Et}function Ce(d,b,D,Q){var Le=d.length;for(D=Hr(D),D<0&&(D=-D>Le?0:Le+D),Q=Q===n||Q>Le?Le:Hr(Q),Q<0&&(Q+=Le),Q=D>Q?0:nx(Q);D<Q;)d[D++]=b;return d}function Ye(d,b){var D=[];return $(d,function(Q,Le,je){b(Q,Le,je)&&D.push(Q)}),D}function Ve(d,b,D,Q,Le){var je=-1,Qe=d.length;for(D||(D=Fk),Le||(Le=[]);++je<Qe;){var pt=d[je];b>0&&D(pt)?b>1?Ve(pt,b-1,D,Q,Le):xo(Le,pt):Q||(Le[Le.length]=pt)}return Le}var mt=fw(),Mt=fw(!0);function Kt(d,b){return d&&mt(d,b,Yo)}function fn(d,b){return d&&Mt(d,b,Yo)}function wn(d,b){return Vo(b,function(D){return ch(d[D])})}function rr(d,b){b=ec(b,d);for(var D=0,Q=b.length;d!=null&&D<Q;)d=d[Tc(b[D++])];return D&&D==Q?d:n}function qe(d,b,D){var Q=b(d);return Rr(d)?Q:xo(Q,D(d))}function Xe(d){return d==null?d===n?Rt:re:Ca&&Ca in ii(d)?Ok(d):Gk(d)}function ct(d,b){return d>b}function Nt(d,b){return d!=null&&Nr.call(d,b)}function _t(d,b){return d!=null&&b in ii(d)}function Tt(d,b,D){return d>=Se(b,D)&&d<ie(b,D)}function be(d,b,D){for(var Q=D?Ll:xl,Le=d[0].length,je=d.length,Qe=je,pt=kt(je),Et=1/0,rn=[];Qe--;){var sn=d[Qe];Qe&&b&&(sn=ni(sn,Pr(b))),Et=Se(sn.length,Et),pt[Qe]=!D&&(b||Le>=120&&sn.length>=120)?new G(Qe&&sn):n}sn=d[0];var cn=-1,Bn=pt[0];e:for(;++cn<Le&&rn.length<Et;){var tr=sn[cn],yr=b?b(tr):tr;if(tr=D||tr!==0?tr:0,!(Bn?Cl(Bn,yr):Q(rn,yr,D))){for(Qe=je;--Qe;){var Yr=pt[Qe];if(!(Yr?Cl(Yr,yr):Q(d[Qe],yr,D)))continue e}Bn&&Bn.push(yr),rn.push(tr)}}return rn}function Pe(d,b,D,Q){return Kt(d,function(Le,je,Qe){b(Q,D(Le),je,Qe)}),Q}function Fe(d,b,D){b=ec(b,d),d=Mw(d,b);var Q=d==null?d:d[Tc(ku(b))];return Q==null?n:ti(Q,d,D)}function Re(d){return qs(d)&&Xe(d)==ge}function ze(d){return qs(d)&&Xe(d)==mn}function Ue(d){return qs(d)&&Xe(d)==fe}function rt(d,b,D,Q,Le){return d===b?!0:d==null||b==null||!qs(d)&&!qs(b)?d!==d&&b!==b:st(d,b,D,Q,rt,Le)}function st(d,b,D,Q,Le,je){var Qe=Rr(d),pt=Rr(b),Et=Qe?ve:ka(d),rn=pt?ve:ka(b);Et=Et==ge?Ae:Et,rn=rn==ge?Ae:rn;var sn=Et==Ae,cn=rn==Ae,Bn=Et==rn;if(Bn&&$h(d)){if(!$h(b))return!1;Qe=!0,sn=!1}if(Bn&&!sn)return je||(je=new Ee),Qe||Id(d)?xw(d,b,D,Q,Le,je):Ak(d,b,Et,D,Q,Le,je);if(!(D&C)){var tr=sn&&Nr.call(d,"__wrapped__"),yr=cn&&Nr.call(b,"__wrapped__");if(tr||yr){var Yr=tr?d.value():d,br=yr?b.value():b;return je||(je=new Ee),Le(Yr,br,D,Q,je)}}return Bn?(je||(je=new Ee),Tk(d,b,D,Q,Le,je)):!1}function dt(d){return qs(d)&&ka(d)==ae}function Ct(d,b,D,Q){var Le=D.length,je=Le,Qe=!Q;if(d==null)return!je;for(d=ii(d);Le--;){var pt=D[Le];if(Qe&&pt[2]?pt[1]!==d[pt[0]]:!(pt[0]in d))return!1}for(;++Le<je;){pt=D[Le];var Et=pt[0],rn=d[Et],sn=pt[1];if(Qe&&pt[2]){if(rn===n&&!(Et in d))return!1}else{var cn=new Ee;if(Q)var Bn=Q(rn,sn,Et,d,b,cn);if(!(Bn===n?rt(sn,rn,C|S,Q,cn):Bn))return!1}}return!0}function St(d){if(!Ns(d)||zk(d))return!1;var b=ch(d)?vi:sr;return b.test(If(d))}function en(d){return qs(d)&&Xe(d)==at}function Nn(d){return qs(d)&&ka(d)==ut}function jn(d){return qs(d)&&X0(d.length)&&!!dr[Xe(d)]}function Kn(d){return typeof d=="function"?d:d==null?Al:typeof d=="object"?Rr(d)?Zu(d[0],d[1]):lo(d):dx(d)}function Qr(d){if(!Rp(d))return V(d);var b=[];for(var D in ii(d))Nr.call(d,D)&&D!="constructor"&&b.push(D);return b}function fi(d){if(!Ns(d))return Hk(d);var b=Rp(d),D=[];for(var Q in d)Q=="constructor"&&(b||!Nr.call(d,Q))||D.push(Q);return D}function Br(d,b){return d<b}function yi(d,b){var D=-1,Q=kl(d)?kt(d.length):[];return $(d,function(Le,je,Qe){Q[++D]=b(Le,je,Qe)}),Q}function lo(d){var b=Yy(d);return b.length==1&&b[0][2]?Pw(b[0][0],b[0][1]):function(D){return D===d||Ct(D,d,b)}}function Zu(d,b){return Zy(d)&&Ew(b)?Pw(Tc(d),b):function(D){var Q=o1(D,d);return Q===n&&Q===b?a1(D,d):rt(b,Q,C|S)}}function ca(d,b,D,Q,Le){d!==b&&mt(b,function(je,Qe){if(Le||(Le=new Ee),Ns(je))kf(d,b,Qe,D,ca,Q,Le);else{var pt=Q?Q(Jy(d,Qe),je,Qe+"",d,b,Le):n;pt===n&&(pt=je),zt(d,Qe,pt)}},Ml)}function kf(d,b,D,Q,Le,je,Qe){var pt=Jy(d,D),Et=Jy(b,D),rn=Qe.get(Et);if(rn){zt(d,D,rn);return}var sn=je?je(pt,Et,D+"",d,b,Qe):n,cn=sn===n;if(cn){var Bn=Rr(Et),tr=!Bn&&$h(Et),yr=!Bn&&!tr&&Id(Et);sn=Et,Bn||tr||yr?Rr(pt)?sn=pt:uo(pt)?sn=Pl(pt):tr?(cn=!1,sn=ow(Et,!0)):yr?(cn=!1,sn=aw(Et,!0)):sn=[]:jp(Et)||Nf(Et)?(sn=pt,Nf(pt)?sn=rx(pt):(!Ns(pt)||ch(pt))&&(sn=Sw(Et))):cn=!1}cn&&(Qe.set(Et,sn),Le(sn,Et,Q,je,Qe),Qe.delete(Et)),zt(d,D,sn)}function tl(d,b){var D=d.length;if(D)return b+=b<0?D:0,uh(b,D)?d[b]:n}function kc(d,b,D){b.length?b=ni(b,function(je){return Rr(je)?function(Qe){return rr(Qe,je.length===1?je[0]:je)}:je}):b=[Al];var Q=-1;b=ni(b,Pr(pr()));var Le=yi(d,function(je,Qe,pt){var Et=ni(b,function(rn){return rn(je)});return{criteria:Et,index:++Q,value:je}});return Zr(Le,function(je,Qe){return xk(je,Qe,D)})}function ha(d,b){return Is(d,b,function(D,Q){return a1(d,Q)})}function Is(d,b,D){for(var Q=-1,Le=b.length,je={};++Q<Le;){var Qe=b[Q],pt=rr(d,Qe);D(pt,Qe)&&ih(je,ec(Qe,d),pt)}return je}function Gi(d){return function(b){return rr(b,d)}}function Ed(d,b,D,Q){var Le=Q?Mn:on,je=-1,Qe=b.length,pt=d;for(d===b&&(b=Pl(b)),D&&(pt=ni(d,Pr(D)));++je<Qe;)for(var Et=0,rn=b[je],sn=D?D(rn):rn;(Et=Le(pt,sn,Et,Q))>-1;)pt!==d&&Os.call(pt,Et,1),Os.call(d,Et,1);return d}function Mf(d,b){for(var D=d?b.length:0,Q=D-1;D--;){var Le=b[D];if(D==Q||Le!==je){var je=Le;uh(Le)?Os.call(d,Le,1):sh(d,Le)}}return d}function Af(d,b){return d+ms(jt()*(b-d+1))}function Tf(d,b,D,Q){for(var Le=-1,je=ie(gs((b-d)/(D||1)),0),Qe=kt(je);je--;)Qe[Q?je:++Le]=d,d+=D;return Qe}function Pd(d,b){var D="";if(!d||b<1||b>H)return D;do b%2&&(D+=d),b=ms(b/2),b&&(d+=d);while(b);return D}function Vr(d,b){return Qy(kw(d,b,Al),d+"")}function kd(d){return It(Nd(d))}function D0(d,b){var D=Nd(d);return G0(D,Yn(b,0,D.length))}function ih(d,b,D,Q){if(!Ns(d))return d;b=ec(b,d);for(var Le=-1,je=b.length,Qe=je-1,pt=d;pt!=null&&++Le<je;){var Et=Tc(b[Le]),rn=D;if(Et==="__proto__"||Et==="constructor"||Et==="prototype")return d;if(Le!=Qe){var sn=pt[Et];rn=Q?Q(sn,Et,pt):n,rn===n&&(rn=Ns(sn)?sn:uh(b[Le+1])?[]:{})}ft(pt,Et,rn),pt=pt[Et]}return d}var Xu=ki?function(d,b){return ki.set(d,b),d}:Al,I0=Sa?function(d,b){return Sa(d,"toString",{configurable:!0,enumerable:!1,value:u1(b),writable:!0})}:Al;function N0(d){return G0(Nd(d))}function El(d,b,D){var Q=-1,Le=d.length;b<0&&(b=-b>Le?0:Le+b),D=D>Le?Le:D,D<0&&(D+=Le),Le=b>D?0:D-b>>>0,b>>>=0;for(var je=kt(Le);++Q<Le;)je[Q]=d[Q+b];return je}function B0(d,b){var D;return $(d,function(Q,Le,je){return D=b(Q,Le,je),!D}),!!D}function Ju(d,b,D){var Q=0,Le=d==null?Q:d.length;if(typeof b=="number"&&b===b&&Le<=te){for(;Q<Le;){var je=Q+Le>>>1,Qe=d[je];Qe!==null&&!iu(Qe)&&(D?Qe<=b:Qe<b)?Q=je+1:Le=je}return Le}return Ip(d,b,Al,D)}function Ip(d,b,D,Q){var Le=0,je=d==null?0:d.length;if(je===0)return 0;b=D(b);for(var Qe=b!==b,pt=b===null,Et=iu(b),rn=b===n;Le<je;){var sn=ms((Le+je)/2),cn=D(d[sn]),Bn=cn!==n,tr=cn===null,yr=cn===cn,Yr=iu(cn);if(Qe)var br=Q||yr;else rn?br=yr&&(Q||Bn):pt?br=yr&&Bn&&(Q||!tr):Et?br=yr&&Bn&&!tr&&(Q||!Yr):tr||Yr?br=!1:br=Q?cn<=b:cn<b;br?Le=sn+1:je=sn}return Se(je,ee)}function Np(d,b){for(var D=-1,Q=d.length,Le=0,je=[];++D<Q;){var Qe=d[D],pt=b?b(Qe):Qe;if(!D||!tc(pt,Et)){var Et=pt;je[Le++]=Qe===0?0:Qe}}return je}function R0(d){return typeof d=="number"?d:iu(d)?_e:+d}function Pa(d){if(typeof d=="string")return d;if(Rr(d))return ni(d,Pa)+"";if(iu(d))return Ds?Ds.call(d):"";var b=d+"";return b=="0"&&1/d==-1/0?"-0":b}function Mc(d,b,D){var Q=-1,Le=xl,je=d.length,Qe=!0,pt=[],Et=pt;if(D)Qe=!1,Le=Ll;else if(je>=i){var rn=b?null:kk(d);if(rn)return Hs(rn);Qe=!1,Le=Cl,Et=new G}else Et=b?[]:pt;e:for(;++Q<je;){var sn=d[Q],cn=b?b(sn):sn;if(sn=D||sn!==0?sn:0,Qe&&cn===cn){for(var Bn=Et.length;Bn--;)if(Et[Bn]===cn)continue e;b&&Et.push(cn),pt.push(sn)}else Le(Et,cn,D)||(Et!==pt&&Et.push(cn),pt.push(sn))}return pt}function sh(d,b){return b=ec(b,d),d=Mw(d,b),d==null||delete d[Tc(ku(b))]}function Md(d,b,D,Q){return ih(d,b,D(rr(d,b)),Q)}function oh(d,b,D,Q){for(var Le=d.length,je=Q?Le:-1;(Q?je--:++je<Le)&&b(d[je],je,d););return D?El(d,Q?0:je,Q?je+1:Le):El(d,Q?je+1:0,Q?Le:je)}function Su(d,b){var D=d;return D instanceof kr&&(D=D.value()),ba(b,function(Q,Le){return Le.func.apply(Le.thisArg,xo([Q],Le.args))},D)}function Eu(d,b,D){var Q=d.length;if(Q<2)return Q?Mc(d[0]):[];for(var Le=-1,je=kt(Q);++Le<Q;)for(var Qe=d[Le],pt=-1;++pt<Q;)pt!=Le&&(je[Le]=M(je[Le]||Qe,d[pt],b,D));return Mc(Ve(je,1),b,D)}function Qu(d,b,D){for(var Q=-1,Le=d.length,je=b.length,Qe={};++Q<Le;){var pt=Q<je?b[Q]:n;D(Qe,d[Q],pt)}return Qe}function Uh(d){return uo(d)?d:[]}function Of(d){return typeof d=="function"?d:Al}function ec(d,b){return Rr(d)?d:Zy(d,b)?[d]:Dw(Ti(d))}var Uy=Vr;function Pu(d,b,D){var Q=d.length;return D=D===n?Q:D,!b&&D>=Q?d:El(d,b,D)}var Ad=Go||function(d){return zi.clearTimeout(d)};function ow(d,b){if(b)return d.slice();var D=d.length,Q=Yu?Yu(D):new d.constructor(D);return d.copy(Q),Q}function $y(d){var b=new d.constructor(d.byteLength);return new To(b).set(new To(d)),b}function bk(d,b){var D=b?$y(d.buffer):d.buffer;return new d.constructor(D,d.byteOffset,d.byteLength)}function _k(d){var b=new d.constructor(d.source,Wn.exec(d));return b.lastIndex=d.lastIndex,b}function wk(d){return Jr?ii(Jr.call(d)):{}}function aw(d,b){var D=b?$y(d.buffer):d.buffer;return new d.constructor(D,d.byteOffset,d.length)}function lw(d,b){if(d!==b){var D=d!==n,Q=d===null,Le=d===d,je=iu(d),Qe=b!==n,pt=b===null,Et=b===b,rn=iu(b);if(!pt&&!rn&&!je&&d>b||je&&Qe&&Et&&!pt&&!rn||Q&&Qe&&Et||!D&&Et||!Le)return 1;if(!Q&&!je&&!rn&&d<b||rn&&D&&Le&&!Q&&!je||pt&&D&&Le||!Qe&&Le||!Et)return-1}return 0}function xk(d,b,D){for(var Q=-1,Le=d.criteria,je=b.criteria,Qe=Le.length,pt=D.length;++Q<Qe;){var Et=lw(Le[Q],je[Q]);if(Et){if(Q>=pt)return Et;var rn=D[Q];return Et*(rn=="desc"?-1:1)}}return d.index-b.index}function uw(d,b,D,Q){for(var Le=-1,je=d.length,Qe=D.length,pt=-1,Et=b.length,rn=ie(je-Qe,0),sn=kt(Et+rn),cn=!Q;++pt<Et;)sn[pt]=b[pt];for(;++Le<Qe;)(cn||Le<je)&&(sn[D[Le]]=d[Le]);for(;rn--;)sn[pt++]=d[Le++];return sn}function cw(d,b,D,Q){for(var Le=-1,je=d.length,Qe=-1,pt=D.length,Et=-1,rn=b.length,sn=ie(je-pt,0),cn=kt(sn+rn),Bn=!Q;++Le<sn;)cn[Le]=d[Le];for(var tr=Le;++Et<rn;)cn[tr+Et]=b[Et];for(;++Qe<pt;)(Bn||Le<je)&&(cn[tr+D[Qe]]=d[Le++]);return cn}function Pl(d,b){var D=-1,Q=d.length;for(b||(b=kt(Q));++D<Q;)b[D]=d[D];return b}function Ac(d,b,D,Q){var Le=!D;D||(D={});for(var je=-1,Qe=b.length;++je<Qe;){var pt=b[je],Et=Q?Q(D[pt],d[pt],pt,D,d):n;Et===n&&(Et=d[pt]),Le?kn(D,pt,Et):ft(D,pt,Et)}return D}function Lk(d,b){return Ac(d,Ky(d),b)}function Ck(d,b){return Ac(d,Lw(d),b)}function F0(d,b){return function(D,Q){var Le=Rr(D)?Sc:Jt,je=b?b():{};return Le(D,d,pr(Q,2),je)}}function Td(d){return Vr(function(b,D){var Q=-1,Le=D.length,je=Le>1?D[Le-1]:n,Qe=Le>2?D[2]:n;for(je=d.length>3&&typeof je=="function"?(Le--,je):n,Qe&&nl(D[0],D[1],Qe)&&(je=Le<3?n:je,Le=1),b=ii(b);++Q<Le;){var pt=D[Q];pt&&d(b,pt,Q,je)}return b})}function hw(d,b){return function(D,Q){if(D==null)return D;if(!kl(D))return d(D,Q);for(var Le=D.length,je=b?Le:-1,Qe=ii(D);(b?je--:++je<Le)&&Q(Qe[je],je,Qe)!==!1;);return D}}function fw(d){return function(b,D,Q){for(var Le=-1,je=ii(b),Qe=Q(b),pt=Qe.length;pt--;){var Et=Qe[d?pt:++Le];if(D(je[Et],Et,je)===!1)break}return b}}function Sk(d,b,D){var Q=b&I,Le=Bp(d);function je(){var Qe=this&&this!==zi&&this instanceof je?Le:d;return Qe.apply(Q?D:this,arguments)}return je}function dw(d){return function(b){b=Ti(b);var D=na(b)?Ms(b):n,Q=D?D[0]:b.charAt(0),Le=D?Pu(D,1).join(""):b.slice(1);return Q[d]()+Le}}function Od(d){return function(b){return ba(hx(cx(b).replace($r,"")),d,"")}}function Bp(d){return function(){var b=arguments;switch(b.length){case 0:return new d;case 1:return new d(b[0]);case 2:return new d(b[0],b[1]);case 3:return new d(b[0],b[1],b[2]);case 4:return new d(b[0],b[1],b[2],b[3]);case 5:return new d(b[0],b[1],b[2],b[3],b[4]);case 6:return new d(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new d(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var D=ao(d.prototype),Q=d.apply(D,b);return Ns(Q)?Q:D}}function Ek(d,b,D){var Q=Bp(d);function Le(){for(var je=arguments.length,Qe=kt(je),pt=je,Et=Dd(Le);pt--;)Qe[pt]=arguments[pt];var rn=je<3&&Qe[0]!==Et&&Qe[je-1]!==Et?[]:Vs(Qe,Et);if(je-=rn.length,je<D)return yw(d,b,j0,Le.placeholder,n,Qe,rn,n,n,D-je);var sn=this&&this!==zi&&this instanceof Le?Q:d;return ti(sn,this,Qe)}return Le}function pw(d){return function(b,D,Q){var Le=ii(b);if(!kl(b)){var je=pr(D,3);b=Yo(b),D=function(pt){return je(Le[pt],pt,Le)}}var Qe=d(b,D,Q);return Qe>-1?Le[je?b[Qe]:Qe]:n}}function gw(d){return lh(function(b){var D=b.length,Q=D,Le=ys.prototype.thru;for(d&&b.reverse();Q--;){var je=b[Q];if(typeof je!="function")throw new Pi(o);if(Le&&!Qe&&V0(je)=="wrapper")var Qe=new ys([],!0)}for(Q=Qe?Q:D;++Q<D;){je=b[Q];var pt=V0(je),Et=pt=="wrapper"?qy(je):n;Et&&Xy(Et[0])&&Et[1]==(he|j|X|O)&&!Et[4].length&&Et[9]==1?Qe=Qe[V0(Et[0])].apply(Qe,Et[3]):Qe=je.length==1&&Xy(je)?Qe[pt]():Qe.thru(je)}return function(){var rn=arguments,sn=rn[0];if(Qe&&rn.length==1&&Rr(sn))return Qe.plant(sn).value();for(var cn=0,Bn=D?b[cn].apply(this,rn):sn;++cn<D;)Bn=b[cn].call(this,Bn);return Bn}})}function j0(d,b,D,Q,Le,je,Qe,pt,Et,rn){var sn=b&he,cn=b&I,Bn=b&N,tr=b&(j|W),yr=b&B,Yr=Bn?n:Bp(d);function br(){for(var oi=arguments.length,di=kt(oi),su=oi;su--;)di[su]=arguments[su];if(tr)var rl=Dd(br),ou=ta(di,rl);if(Q&&(di=uw(di,Q,Le,tr)),je&&(di=cw(di,je,Qe,tr)),oi-=ou,tr&&oi<rn){var co=Vs(di,rl);return yw(d,b,j0,br.placeholder,D,di,co,pt,Et,rn-oi)}var nc=cn?D:this,fh=Bn?nc[d]:d;return oi=di.length,pt?di=Wk(di,pt):yr&&oi>1&&di.reverse(),sn&&Et<oi&&(di.length=Et),this&&this!==zi&&this instanceof br&&(fh=Yr||Bp(fh)),fh.apply(nc,di)}return br}function mw(d,b){return function(D,Q){return Pe(D,d,b(Q),{})}}function z0(d,b){return function(D,Q){var Le;if(D===n&&Q===n)return b;if(D!==n&&(Le=D),Q!==n){if(Le===n)return Q;typeof D=="string"||typeof Q=="string"?(D=Pa(D),Q=Pa(Q)):(D=R0(D),Q=R0(Q)),Le=d(D,Q)}return Le}}function Vy(d){return lh(function(b){return b=ni(b,Pr(pr())),Vr(function(D){var Q=this;return d(b,function(Le){return ti(Le,Q,D)})})})}function U0(d,b){b=b===n?" ":Pa(b);var D=b.length;if(D<2)return D?Pd(b,d):b;var Q=Pd(b,gs(d/ks(b)));return na(b)?Pu(Ms(Q),0,d).join(""):Q.slice(0,d)}function Pk(d,b,D,Q){var Le=b&I,je=Bp(d);function Qe(){for(var pt=-1,Et=arguments.length,rn=-1,sn=Q.length,cn=kt(sn+Et),Bn=this&&this!==zi&&this instanceof Qe?je:d;++rn<sn;)cn[rn]=Q[rn];for(;Et--;)cn[rn++]=arguments[++pt];return ti(Bn,Le?D:this,cn)}return Qe}function vw(d){return function(b,D,Q){return Q&&typeof Q!="number"&&nl(b,D,Q)&&(D=Q=n),b=hh(b),D===n?(D=b,b=0):D=hh(D),Q=Q===n?b<D?1:-1:hh(Q),Tf(b,D,Q,d)}}function $0(d){return function(b,D){return typeof b=="string"&&typeof D=="string"||(b=Mu(b),D=Mu(D)),d(b,D)}}function yw(d,b,D,Q,Le,je,Qe,pt,Et,rn){var sn=b&j,cn=sn?Qe:n,Bn=sn?n:Qe,tr=sn?je:n,yr=sn?n:je;b|=sn?X:ce,b&=~(sn?ce:X),b&T||(b&=-4);var Yr=[d,b,Le,tr,cn,yr,Bn,pt,Et,rn],br=D.apply(n,Yr);return Xy(d)&&Aw(br,Yr),br.placeholder=Q,Tw(br,d,b)}function Hy(d){var b=Ei[d];return function(D,Q){if(D=Mu(D),Q=Q==null?0:Se(Hr(Q),292),Q&&y(D)){var Le=(Ti(D)+"e").split("e"),je=b(Le[0]+"e"+(+Le[1]+Q));return Le=(Ti(je)+"e").split("e"),+(Le[0]+"e"+(+Le[1]-Q))}return b(D)}}var kk=Qi&&1/Hs(new Qi([,-0]))[1]==U?function(d){return new Qi(d)}:f1;function bw(d){return function(b){var D=ka(b);return D==ae?Sl(b):D==ut?Ec(b):Zi(b,d(b))}}function ah(d,b,D,Q,Le,je,Qe,pt){var Et=b&N;if(!Et&&typeof d!="function")throw new Pi(o);var rn=Q?Q.length:0;if(rn||(b&=-97,Q=Le=n),Qe=Qe===n?Qe:ie(Hr(Qe),0),pt=pt===n?pt:Hr(pt),rn-=Le?Le.length:0,b&ce){var sn=Q,cn=Le;Q=Le=n}var Bn=Et?n:qy(d),tr=[d,b,D,Q,Le,sn,cn,je,Qe,pt];if(Bn&&Vk(tr,Bn),d=tr[0],b=tr[1],D=tr[2],Q=tr[3],Le=tr[4],pt=tr[9]=tr[9]===n?Et?0:d.length:ie(tr[9]-rn,0),!pt&&b&(j|W)&&(b&=-25),!b||b==I)var yr=Sk(d,b,D);else b==j||b==W?yr=Ek(d,b,pt):(b==X||b==(I|X))&&!Le.length?yr=Pk(d,b,D,Q):yr=j0.apply(n,tr);var Yr=Bn?Xu:Aw;return Tw(Yr(yr,tr),d,b)}function _w(d,b,D,Q){return d===n||tc(d,sa[D])&&!Nr.call(Q,D)?b:d}function ww(d,b,D,Q,Le,je){return Ns(d)&&Ns(b)&&(je.set(b,d),ca(d,b,n,ww,je),je.delete(b)),d}function Mk(d){return jp(d)?n:d}function xw(d,b,D,Q,Le,je){var Qe=D&C,pt=d.length,Et=b.length;if(pt!=Et&&!(Qe&&Et>pt))return!1;var rn=je.get(d),sn=je.get(b);if(rn&&sn)return rn==b&&sn==d;var cn=-1,Bn=!0,tr=D&S?new G:n;for(je.set(d,b),je.set(b,d);++cn<pt;){var yr=d[cn],Yr=b[cn];if(Q)var br=Qe?Q(Yr,yr,cn,b,d,je):Q(yr,Yr,cn,d,b,je);if(br!==n){if(br)continue;Bn=!1;break}if(tr){if(!z(b,function(oi,di){if(!Cl(tr,di)&&(yr===oi||Le(yr,oi,D,Q,je)))return tr.push(di)})){Bn=!1;break}}else if(!(yr===Yr||Le(yr,Yr,D,Q,je))){Bn=!1;break}}return je.delete(d),je.delete(b),Bn}function Ak(d,b,D,Q,Le,je,Qe){switch(D){case yn:if(d.byteLength!=b.byteLength||d.byteOffset!=b.byteOffset)return!1;d=d.buffer,b=b.buffer;case mn:return!(d.byteLength!=b.byteLength||!je(new To(d),new To(b)));case pe:case fe:case de:return tc(+d,+b);case Ne:return d.name==b.name&&d.message==b.message;case at:case gt:return d==b+"";case ae:var pt=Sl;case ut:var Et=Q&C;if(pt||(pt=Hs),d.size!=b.size&&!Et)return!1;var rn=Qe.get(d);if(rn)return rn==b;Q|=S,Qe.set(d,b);var sn=xw(pt(d),pt(b),Q,Le,je,Qe);return Qe.delete(d),sn;case $t:if(Jr)return Jr.call(d)==Jr.call(b)}return!1}function Tk(d,b,D,Q,Le,je){var Qe=D&C,pt=Gy(d),Et=pt.length,rn=Gy(b),sn=rn.length;if(Et!=sn&&!Qe)return!1;for(var cn=Et;cn--;){var Bn=pt[cn];if(!(Qe?Bn in b:Nr.call(b,Bn)))return!1}var tr=je.get(d),yr=je.get(b);if(tr&&yr)return tr==b&&yr==d;var Yr=!0;je.set(d,b),je.set(b,d);for(var br=Qe;++cn<Et;){Bn=pt[cn];var oi=d[Bn],di=b[Bn];if(Q)var su=Qe?Q(di,oi,Bn,b,d,je):Q(oi,di,Bn,d,b,je);if(!(su===n?oi===di||Le(oi,di,D,Q,je):su)){Yr=!1;break}br||(br=Bn=="constructor")}if(Yr&&!br){var rl=d.constructor,ou=b.constructor;rl!=ou&&"constructor"in d&&"constructor"in b&&!(typeof rl=="function"&&rl instanceof rl&&typeof ou=="function"&&ou instanceof ou)&&(Yr=!1)}return je.delete(d),je.delete(b),Yr}function lh(d){return Qy(kw(d,n,Rw),d+"")}function Gy(d){return qe(d,Yo,Ky)}function Wy(d){return qe(d,Ml,Lw)}var qy=ki?function(d){return ki.get(d)}:f1;function V0(d){for(var b=d.name+"",D=oo[b],Q=Nr.call(oo,b)?D.length:0;Q--;){var Le=D[Q],je=Le.func;if(je==null||je==d)return Le.name}return b}function Dd(d){var b=Nr.call(Oe,"placeholder")?Oe:d;return b.placeholder}function pr(){var d=Oe.iteratee||c1;return d=d===c1?Kn:d,arguments.length?d(arguments[0],arguments[1]):d}function H0(d,b){var D=d.__data__;return jk(b)?D[typeof b=="string"?"string":"hash"]:D.map}function Yy(d){for(var b=Yo(d),D=b.length;D--;){var Q=b[D],Le=d[Q];b[D]=[Q,Le,Ew(Le)]}return b}function Df(d,b){var D=Xi(d,b);return St(D)?D:n}function Ok(d){var b=Nr.call(d,Ca),D=d[Ca];try{d[Ca]=n;var Q=!0}catch{}var Le=si.call(d);return Q&&(b?d[Ca]=D:delete d[Ca]),Le}var Ky=Wo?function(d){return d==null?[]:(d=ii(d),Vo(Wo(d),function(b){return mi.call(d,b)}))}:d1,Lw=Wo?function(d){for(var b=[];d;)xo(b,Ky(d)),d=la(d);return b}:d1,ka=Xe;(An&&ka(new An(new ArrayBuffer(1)))!=yn||qn&&ka(new qn)!=ae||Sr&&ka(Sr.resolve())!=Ge||Qi&&ka(new Qi)!=ut||Ii&&ka(new Ii)!=Gt)&&(ka=function(d){var b=Xe(d),D=b==Ae?d.constructor:n,Q=D?If(D):"";if(Q)switch(Q){case nh:return yn;case ua:return ae;case qo:return Ge;case Oo:return ut;case Ef:return Gt}return b});function Dk(d,b,D){for(var Q=-1,Le=D.length;++Q<Le;){var je=D[Q],Qe=je.size;switch(je.type){case"drop":d+=Qe;break;case"dropRight":b-=Qe;break;case"take":b=Se(b,d+Qe);break;case"takeRight":d=ie(d,b-Qe);break}}return{start:d,end:b}}function Ik(d){var b=d.match(Fn);return b?b[1].split(Wt):[]}function Cw(d,b,D){b=ec(b,d);for(var Q=-1,Le=b.length,je=!1;++Q<Le;){var Qe=Tc(b[Q]);if(!(je=d!=null&&D(d,Qe)))break;d=d[Qe]}return je||++Q!=Le?je:(Le=d==null?0:d.length,!!Le&&X0(Le)&&uh(Qe,Le)&&(Rr(d)||Nf(d)))}function Nk(d){var b=d.length,D=new d.constructor(b);return b&&typeof d[0]=="string"&&Nr.call(d,"index")&&(D.index=d.index,D.input=d.input),D}function Sw(d){return typeof d.constructor=="function"&&!Rp(d)?ao(la(d)):{}}function Bk(d,b,D){var Q=d.constructor;switch(b){case mn:return $y(d);case pe:case fe:return new Q(+d);case yn:return bk(d,D);case Ze:case it:case et:case Bt:case Zt:case Sn:case bn:case xn:case zn:return aw(d,D);case ae:return new Q;case de:case gt:return new Q(d);case at:return _k(d);case ut:return new Q;case $t:return wk(d)}}function Rk(d,b){var D=b.length;if(!D)return d;var Q=D-1;return b[Q]=(D>1?"& ":"")+b[Q],b=b.join(D>2?", ":" "),d.replace(Xt,`{
/* [wrapped with `+b+`] */
`)}function Fk(d){return Rr(d)||Nf(d)||!!(so&&d&&d[so])}function uh(d,b){var D=typeof d;return b=b??H,!!b&&(D=="number"||D!="symbol"&&Gr.test(d))&&d>-1&&d%1==0&&d<b}function nl(d,b,D){if(!Ns(D))return!1;var Q=typeof b;return(Q=="number"?kl(D)&&uh(b,D.length):Q=="string"&&b in D)?tc(D[b],d):!1}function Zy(d,b){if(Rr(d))return!1;var D=typeof d;return D=="number"||D=="symbol"||D=="boolean"||d==null||iu(d)?!0:ss.test(d)||!Us.test(d)||b!=null&&d in ii(b)}function jk(d){var b=typeof d;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?d!=="__proto__":d===null}function Xy(d){var b=V0(d),D=Oe[b];if(typeof D!="function"||!(b in kr.prototype))return!1;if(d===D)return!0;var Q=qy(D);return!!Q&&d===Q[0]}function zk(d){return!!ps&&ps in d}var Uk=oa?ch:p1;function Rp(d){var b=d&&d.constructor,D=typeof b=="function"&&b.prototype||sa;return d===D}function Ew(d){return d===d&&!Ns(d)}function Pw(d,b){return function(D){return D==null?!1:D[d]===b&&(b!==n||d in ii(D))}}function $k(d){var b=K0(d,function(Q){return D.size===c&&D.clear(),Q}),D=b.cache;return b}function Vk(d,b){var D=d[1],Q=b[1],Le=D|Q,je=Le<(I|N|he),Qe=Q==he&&D==j||Q==he&&D==O&&d[7].length<=b[8]||Q==(he|O)&&b[7].length<=b[8]&&D==j;if(!(je||Qe))return d;Q&I&&(d[2]=b[2],Le|=D&I?0:T);var pt=b[3];if(pt){var Et=d[3];d[3]=Et?uw(Et,pt,b[4]):pt,d[4]=Et?Vs(d[3],f):b[4]}return pt=b[5],pt&&(Et=d[5],d[5]=Et?cw(Et,pt,b[6]):pt,d[6]=Et?Vs(d[5],f):b[6]),pt=b[7],pt&&(d[7]=pt),Q&he&&(d[8]=d[8]==null?b[8]:Se(d[8],b[8])),d[9]==null&&(d[9]=b[9]),d[0]=b[0],d[1]=Le,d}function Hk(d){var b=[];if(d!=null)for(var D in ii(d))b.push(D);return b}function Gk(d){return si.call(d)}function kw(d,b,D){return b=ie(b===n?d.length-1:b,0),function(){for(var Q=arguments,Le=-1,je=ie(Q.length-b,0),Qe=kt(je);++Le<je;)Qe[Le]=Q[b+Le];Le=-1;for(var pt=kt(b+1);++Le<b;)pt[Le]=Q[Le];return pt[b]=D(Qe),ti(d,this,pt)}}function Mw(d,b){return b.length<2?d:rr(d,El(b,0,-1))}function Wk(d,b){for(var D=d.length,Q=Se(b.length,D),Le=Pl(d);Q--;){var je=b[Q];d[Q]=uh(je,D)?Le[je]:n}return d}function Jy(d,b){if(!(b==="constructor"&&typeof d[b]=="function")&&b!="__proto__")return d[b]}var Aw=Ow(Xu),Fp=th||function(d,b){return zi.setTimeout(d,b)},Qy=Ow(I0);function Tw(d,b,D){var Q=b+"";return Qy(d,Rk(Q,qk(Ik(Q),D)))}function Ow(d){var b=0,D=0;return function(){var Q=nt(),Le=K-(Q-D);if(D=Q,Le>0){if(++b>=R)return arguments[0]}else b=0;return d.apply(n,arguments)}}function G0(d,b){var D=-1,Q=d.length,Le=Q-1;for(b=b===n?Q:b;++D<b;){var je=Af(D,Le),Qe=d[je];d[je]=d[D],d[D]=Qe}return d.length=b,d}var Dw=$k(function(d){var b=[];return d.charCodeAt(0)===46&&b.push(""),d.replace(Gn,function(D,Q,Le,je){b.push(Le?je.replace(Ln,"$1"):Q||D)}),b});function Tc(d){if(typeof d=="string"||iu(d))return d;var b=d+"";return b=="0"&&1/d==-1/0?"-0":b}function If(d){if(d!=null){try{return aa.call(d)}catch{}try{return d+""}catch{}}return""}function qk(d,b){return fs(oe,function(D){var Q="_."+D[0];b&D[1]&&!xl(d,Q)&&d.push(Q)}),d.sort()}function Iw(d){if(d instanceof kr)return d.clone();var b=new ys(d.__wrapped__,d.__chain__);return b.__actions__=Pl(d.__actions__),b.__index__=d.__index__,b.__values__=d.__values__,b}function Yk(d,b,D){(D?nl(d,b,D):b===n)?b=1:b=ie(Hr(b),0);var Q=d==null?0:d.length;if(!Q||b<1)return[];for(var Le=0,je=0,Qe=kt(gs(Q/b));Le<Q;)Qe[je++]=El(d,Le,Le+=b);return Qe}function Kk(d){for(var b=-1,D=d==null?0:d.length,Q=0,Le=[];++b<D;){var je=d[b];je&&(Le[Q++]=je)}return Le}function Zk(){var d=arguments.length;if(!d)return[];for(var b=kt(d-1),D=arguments[0],Q=d;Q--;)b[Q-1]=arguments[Q];return xo(Rr(D)?Pl(D):[D],Ve(b,1))}var Xk=Vr(function(d,b){return uo(d)?M(d,Ve(b,1,uo,!0)):[]}),Jk=Vr(function(d,b){var D=ku(b);return uo(D)&&(D=n),uo(d)?M(d,Ve(b,1,uo,!0),pr(D,2)):[]}),Qk=Vr(function(d,b){var D=ku(b);return uo(D)&&(D=n),uo(d)?M(d,Ve(b,1,uo,!0),n,D):[]});function eM(d,b,D){var Q=d==null?0:d.length;return Q?(b=D||b===n?1:Hr(b),El(d,b<0?0:b,Q)):[]}function tM(d,b,D){var Q=d==null?0:d.length;return Q?(b=D||b===n?1:Hr(b),b=Q-b,El(d,0,b<0?0:b)):[]}function nM(d,b){return d&&d.length?oh(d,pr(b,3),!0,!0):[]}function rM(d,b){return d&&d.length?oh(d,pr(b,3),!0):[]}function iM(d,b,D,Q){var Le=d==null?0:d.length;return Le?(D&&typeof D!="number"&&nl(d,b,D)&&(D=0,Q=Le),Ce(d,b,D,Q)):[]}function Nw(d,b,D){var Q=d==null?0:d.length;if(!Q)return-1;var Le=D==null?0:Hr(D);return Le<0&&(Le=ie(Q+Le,0)),Ft(d,pr(b,3),Le)}function Bw(d,b,D){var Q=d==null?0:d.length;if(!Q)return-1;var Le=Q-1;return D!==n&&(Le=Hr(D),Le=D<0?ie(Q+Le,0):Se(Le,Q-1)),Ft(d,pr(b,3),Le,!0)}function Rw(d){var b=d==null?0:d.length;return b?Ve(d,1):[]}function sM(d){var b=d==null?0:d.length;return b?Ve(d,U):[]}function oM(d,b){var D=d==null?0:d.length;return D?(b=b===n?1:Hr(b),Ve(d,b)):[]}function aM(d){for(var b=-1,D=d==null?0:d.length,Q={};++b<D;){var Le=d[b];Q[Le[0]]=Le[1]}return Q}function Fw(d){return d&&d.length?d[0]:n}function lM(d,b,D){var Q=d==null?0:d.length;if(!Q)return-1;var Le=D==null?0:Hr(D);return Le<0&&(Le=ie(Q+Le,0)),on(d,b,Le)}function uM(d){var b=d==null?0:d.length;return b?El(d,0,-1):[]}var cM=Vr(function(d){var b=ni(d,Uh);return b.length&&b[0]===d[0]?be(b):[]}),hM=Vr(function(d){var b=ku(d),D=ni(d,Uh);return b===ku(D)?b=n:D.pop(),D.length&&D[0]===d[0]?be(D,pr(b,2)):[]}),fM=Vr(function(d){var b=ku(d),D=ni(d,Uh);return b=typeof b=="function"?b:n,b&&D.pop(),D.length&&D[0]===d[0]?be(D,n,b):[]});function dM(d,b){return d==null?"":P.call(d,b)}function ku(d){var b=d==null?0:d.length;return b?d[b-1]:n}function pM(d,b,D){var Q=d==null?0:d.length;if(!Q)return-1;var Le=Q;return D!==n&&(Le=Hr(D),Le=Le<0?ie(Q+Le,0):Se(Le,Q-1)),b===b?_a(d,b,Le):Ft(d,In,Le,!0)}function gM(d,b){return d&&d.length?tl(d,Hr(b)):n}var mM=Vr(jw);function jw(d,b){return d&&d.length&&b&&b.length?Ed(d,b):d}function vM(d,b,D){return d&&d.length&&b&&b.length?Ed(d,b,pr(D,2)):d}function yM(d,b,D){return d&&d.length&&b&&b.length?Ed(d,b,n,D):d}var bM=lh(function(d,b){var D=d==null?0:d.length,Q=Cn(d,b);return Mf(d,ni(b,function(Le){return uh(Le,D)?+Le:Le}).sort(lw)),Q});function _M(d,b){var D=[];if(!(d&&d.length))return D;var Q=-1,Le=[],je=d.length;for(b=pr(b,3);++Q<je;){var Qe=d[Q];b(Qe,Q,d)&&(D.push(Qe),Le.push(Q))}return Mf(d,Le),D}function e1(d){return d==null?d:nn.call(d)}function wM(d,b,D){var Q=d==null?0:d.length;return Q?(D&&typeof D!="number"&&nl(d,b,D)?(b=0,D=Q):(b=b==null?0:Hr(b),D=D===n?Q:Hr(D)),El(d,b,D)):[]}function xM(d,b){return Ju(d,b)}function LM(d,b,D){return Ip(d,b,pr(D,2))}function CM(d,b){var D=d==null?0:d.length;if(D){var Q=Ju(d,b);if(Q<D&&tc(d[Q],b))return Q}return-1}function SM(d,b){return Ju(d,b,!0)}function EM(d,b,D){return Ip(d,b,pr(D,2),!0)}function PM(d,b){var D=d==null?0:d.length;if(D){var Q=Ju(d,b,!0)-1;if(tc(d[Q],b))return Q}return-1}function kM(d){return d&&d.length?Np(d):[]}function MM(d,b){return d&&d.length?Np(d,pr(b,2)):[]}function AM(d){var b=d==null?0:d.length;return b?El(d,1,b):[]}function TM(d,b,D){return d&&d.length?(b=D||b===n?1:Hr(b),El(d,0,b<0?0:b)):[]}function OM(d,b,D){var Q=d==null?0:d.length;return Q?(b=D||b===n?1:Hr(b),b=Q-b,El(d,b<0?0:b,Q)):[]}function DM(d,b){return d&&d.length?oh(d,pr(b,3),!1,!0):[]}function IM(d,b){return d&&d.length?oh(d,pr(b,3)):[]}var NM=Vr(function(d){return Mc(Ve(d,1,uo,!0))}),BM=Vr(function(d){var b=ku(d);return uo(b)&&(b=n),Mc(Ve(d,1,uo,!0),pr(b,2))}),RM=Vr(function(d){var b=ku(d);return b=typeof b=="function"?b:n,Mc(Ve(d,1,uo,!0),n,b)});function FM(d){return d&&d.length?Mc(d):[]}function jM(d,b){return d&&d.length?Mc(d,pr(b,2)):[]}function zM(d,b){return b=typeof b=="function"?b:n,d&&d.length?Mc(d,n,b):[]}function t1(d){if(!(d&&d.length))return[];var b=0;return d=Vo(d,function(D){if(uo(D))return b=ie(D.length,b),!0}),Vi(b,function(D){return ni(d,lr(D))})}function zw(d,b){if(!(d&&d.length))return[];var D=t1(d);return b==null?D:ni(D,function(Q){return ti(b,n,Q)})}var UM=Vr(function(d,b){return uo(d)?M(d,b):[]}),$M=Vr(function(d){return Eu(Vo(d,uo))}),VM=Vr(function(d){var b=ku(d);return uo(b)&&(b=n),Eu(Vo(d,uo),pr(b,2))}),HM=Vr(function(d){var b=ku(d);return b=typeof b=="function"?b:n,Eu(Vo(d,uo),n,b)}),GM=Vr(t1);function WM(d,b){return Qu(d||[],b||[],ft)}function qM(d,b){return Qu(d||[],b||[],ih)}var YM=Vr(function(d){var b=d.length,D=b>1?d[b-1]:n;return D=typeof D=="function"?(d.pop(),D):n,zw(d,D)});function Uw(d){var b=Oe(d);return b.__chain__=!0,b}function KM(d,b){return b(d),d}function W0(d,b){return b(d)}var ZM=lh(function(d){var b=d.length,D=b?d[0]:0,Q=this.__wrapped__,Le=function(je){return Cn(je,d)};return b>1||this.__actions__.length||!(Q instanceof kr)||!uh(D)?this.thru(Le):(Q=Q.slice(D,+D+(b?1:0)),Q.__actions__.push({func:W0,args:[Le],thisArg:n}),new ys(Q,this.__chain__).thru(function(je){return b&&!je.length&&je.push(n),je}))});function XM(){return Uw(this)}function JM(){return new ys(this.value(),this.__chain__)}function QM(){this.__values__===n&&(this.__values__=tx(this.value()));var d=this.__index__>=this.__values__.length,b=d?n:this.__values__[this.__index__++];return{done:d,value:b}}function eA(){return this}function tA(d){for(var b,D=this;D instanceof Ku;){var Q=Iw(D);Q.__index__=0,Q.__values__=n,b?Le.__wrapped__=Q:b=Q;var Le=Q;D=D.__wrapped__}return Le.__wrapped__=d,b}function nA(){var d=this.__wrapped__;if(d instanceof kr){var b=d;return this.__actions__.length&&(b=new kr(this)),b=b.reverse(),b.__actions__.push({func:W0,args:[e1],thisArg:n}),new ys(b,this.__chain__)}return this.thru(e1)}function rA(){return Su(this.__wrapped__,this.__actions__)}var iA=F0(function(d,b,D){Nr.call(d,D)?++d[D]:kn(d,D,1)});function sA(d,b,D){var Q=Rr(d)?tu:ne;return D&&nl(d,b,D)&&(b=n),Q(d,pr(b,3))}function oA(d,b){var D=Rr(d)?Vo:Ye;return D(d,pr(b,3))}var aA=pw(Nw),lA=pw(Bw);function uA(d,b){return Ve(q0(d,b),1)}function cA(d,b){return Ve(q0(d,b),U)}function hA(d,b,D){return D=D===n?1:Hr(D),Ve(q0(d,b),D)}function $w(d,b){var D=Rr(d)?fs:$;return D(d,pr(b,3))}function Vw(d,b){var D=Rr(d)?$o:J;return D(d,pr(b,3))}var fA=F0(function(d,b,D){Nr.call(d,D)?d[D].push(b):kn(d,D,[b])});function dA(d,b,D,Q){d=kl(d)?d:Nd(d),D=D&&!Q?Hr(D):0;var Le=d.length;return D<0&&(D=ie(Le+D,0)),J0(d)?D<=Le&&d.indexOf(b,D)>-1:!!Le&&on(d,b,D)>-1}var pA=Vr(function(d,b,D){var Q=-1,Le=typeof b=="function",je=kl(d)?kt(d.length):[];return $(d,function(Qe){je[++Q]=Le?ti(b,Qe,D):Fe(Qe,b,D)}),je}),gA=F0(function(d,b,D){kn(d,D,b)});function q0(d,b){var D=Rr(d)?ni:yi;return D(d,pr(b,3))}function mA(d,b,D,Q){return d==null?[]:(Rr(b)||(b=b==null?[]:[b]),D=Q?n:D,Rr(D)||(D=D==null?[]:[D]),kc(d,b,D))}var vA=F0(function(d,b,D){d[D?0:1].push(b)},function(){return[[],[]]});function yA(d,b,D){var Q=Rr(d)?ba:wi,Le=arguments.length<3;return Q(d,pr(b,4),D,Le,$)}function bA(d,b,D){var Q=Rr(d)?$i:wi,Le=arguments.length<3;return Q(d,pr(b,4),D,Le,J)}function _A(d,b){var D=Rr(d)?Vo:Ye;return D(d,Z0(pr(b,3)))}function wA(d){var b=Rr(d)?It:kd;return b(d)}function xA(d,b,D){(D?nl(d,b,D):b===n)?b=1:b=Hr(b);var Q=Rr(d)?wt:D0;return Q(d,b)}function LA(d){var b=Rr(d)?qt:N0;return b(d)}function CA(d){if(d==null)return 0;if(kl(d))return J0(d)?ks(d):d.length;var b=ka(d);return b==ae||b==ut?d.size:Qr(d).length}function SA(d,b,D){var Q=Rr(d)?z:B0;return D&&nl(d,b,D)&&(b=n),Q(d,pr(b,3))}var EA=Vr(function(d,b){if(d==null)return[];var D=b.length;return D>1&&nl(d,b[0],b[1])?b=[]:D>2&&nl(b[0],b[1],b[2])&&(b=[b[0]]),kc(d,Ve(b,1),[])}),Y0=Ws||function(){return zi.Date.now()};function PA(d,b){if(typeof b!="function")throw new Pi(o);return d=Hr(d),function(){if(--d<1)return b.apply(this,arguments)}}function Hw(d,b,D){return b=D?n:b,b=d&&b==null?d.length:b,ah(d,he,n,n,n,n,b)}function Gw(d,b){var D;if(typeof b!="function")throw new Pi(o);return d=Hr(d),function(){return--d>0&&(D=b.apply(this,arguments)),d<=1&&(b=n),D}}var n1=Vr(function(d,b,D){var Q=I;if(D.length){var Le=Vs(D,Dd(n1));Q|=X}return ah(d,Q,b,D,Le)}),Ww=Vr(function(d,b,D){var Q=I|N;if(D.length){var Le=Vs(D,Dd(Ww));Q|=X}return ah(b,Q,d,D,Le)});function qw(d,b,D){b=D?n:b;var Q=ah(d,j,n,n,n,n,n,b);return Q.placeholder=qw.placeholder,Q}function Yw(d,b,D){b=D?n:b;var Q=ah(d,W,n,n,n,n,n,b);return Q.placeholder=Yw.placeholder,Q}function Kw(d,b,D){var Q,Le,je,Qe,pt,Et,rn=0,sn=!1,cn=!1,Bn=!0;if(typeof d!="function")throw new Pi(o);b=Mu(b)||0,Ns(D)&&(sn=!!D.leading,cn="maxWait"in D,je=cn?ie(Mu(D.maxWait)||0,b):je,Bn="trailing"in D?!!D.trailing:Bn);function tr(co){var nc=Q,fh=Le;return Q=Le=n,rn=co,Qe=d.apply(fh,nc),Qe}function yr(co){return rn=co,pt=Fp(oi,b),sn?tr(co):Qe}function Yr(co){var nc=co-Et,fh=co-rn,px=b-nc;return cn?Se(px,je-fh):px}function br(co){var nc=co-Et,fh=co-rn;return Et===n||nc>=b||nc<0||cn&&fh>=je}function oi(){var co=Y0();if(br(co))return di(co);pt=Fp(oi,Yr(co))}function di(co){return pt=n,Bn&&Q?tr(co):(Q=Le=n,Qe)}function su(){pt!==n&&Ad(pt),rn=0,Q=Et=Le=pt=n}function rl(){return pt===n?Qe:di(Y0())}function ou(){var co=Y0(),nc=br(co);if(Q=arguments,Le=this,Et=co,nc){if(pt===n)return yr(Et);if(cn)return Ad(pt),pt=Fp(oi,b),tr(Et)}return pt===n&&(pt=Fp(oi,b)),Qe}return ou.cancel=su,ou.flush=rl,ou}var kA=Vr(function(d,b){return x(d,1,b)}),MA=Vr(function(d,b,D){return x(d,Mu(b)||0,D)});function AA(d){return ah(d,B)}function K0(d,b){if(typeof d!="function"||b!=null&&typeof b!="function")throw new Pi(o);var D=function(){var Q=arguments,Le=b?b.apply(this,Q):Q[0],je=D.cache;if(je.has(Le))return je.get(Le);var Qe=d.apply(this,Q);return D.cache=je.set(Le,Qe)||je,Qe};return D.cache=new(K0.Cache||Ea),D}K0.Cache=Ea;function Z0(d){if(typeof d!="function")throw new Pi(o);return function(){var b=arguments;switch(b.length){case 0:return!d.call(this);case 1:return!d.call(this,b[0]);case 2:return!d.call(this,b[0],b[1]);case 3:return!d.call(this,b[0],b[1],b[2])}return!d.apply(this,b)}}function TA(d){return Gw(2,d)}var OA=Uy(function(d,b){b=b.length==1&&Rr(b[0])?ni(b[0],Pr(pr())):ni(Ve(b,1),Pr(pr()));var D=b.length;return Vr(function(Q){for(var Le=-1,je=Se(Q.length,D);++Le<je;)Q[Le]=b[Le].call(this,Q[Le]);return ti(d,this,Q)})}),r1=Vr(function(d,b){var D=Vs(b,Dd(r1));return ah(d,X,n,b,D)}),Zw=Vr(function(d,b){var D=Vs(b,Dd(Zw));return ah(d,ce,n,b,D)}),DA=lh(function(d,b){return ah(d,O,n,n,n,b)});function IA(d,b){if(typeof d!="function")throw new Pi(o);return b=b===n?b:Hr(b),Vr(d,b)}function NA(d,b){if(typeof d!="function")throw new Pi(o);return b=b==null?0:ie(Hr(b),0),Vr(function(D){var Q=D[b],Le=Pu(D,0,b);return Q&&xo(Le,Q),ti(d,this,Le)})}function BA(d,b,D){var Q=!0,Le=!0;if(typeof d!="function")throw new Pi(o);return Ns(D)&&(Q="leading"in D?!!D.leading:Q,Le="trailing"in D?!!D.trailing:Le),Kw(d,b,{leading:Q,maxWait:b,trailing:Le})}function RA(d){return Hw(d,1)}function FA(d,b){return r1(Of(b),d)}function jA(){if(!arguments.length)return[];var d=arguments[0];return Rr(d)?d:[d]}function zA(d){return h(d,m)}function UA(d,b){return b=typeof b=="function"?b:n,h(d,m,b)}function $A(d){return h(d,p|m)}function VA(d,b){return b=typeof b=="function"?b:n,h(d,p|m,b)}function HA(d,b){return b==null||_(d,b,Yo(b))}function tc(d,b){return d===b||d!==d&&b!==b}var GA=$0(ct),WA=$0(function(d,b){return d>=b}),Nf=Re(function(){return arguments}())?Re:function(d){return qs(d)&&Nr.call(d,"callee")&&!mi.call(d,"callee")},Rr=kt.isArray,qA=xu?Pr(xu):ze;function kl(d){return d!=null&&X0(d.length)&&!ch(d)}function uo(d){return qs(d)&&kl(d)}function YA(d){return d===!0||d===!1||qs(d)&&Xe(d)==pe}var $h=u||p1,KA=ea?Pr(ea):Ue;function ZA(d){return qs(d)&&d.nodeType===1&&!jp(d)}function XA(d){if(d==null)return!0;if(kl(d)&&(Rr(d)||typeof d=="string"||typeof d.splice=="function"||$h(d)||Id(d)||Nf(d)))return!d.length;var b=ka(d);if(b==ae||b==ut)return!d.size;if(Rp(d))return!Qr(d).length;for(var D in d)if(Nr.call(d,D))return!1;return!0}function JA(d,b){return rt(d,b)}function QA(d,b,D){D=typeof D=="function"?D:n;var Q=D?D(d,b):n;return Q===n?rt(d,b,n,D):!!Q}function i1(d){if(!qs(d))return!1;var b=Xe(d);return b==Ne||b==$e||typeof d.message=="string"&&typeof d.name=="string"&&!jp(d)}function e6(d){return typeof d=="number"&&y(d)}function ch(d){if(!Ns(d))return!1;var b=Xe(d);return b==ot||b==le||b==ye||b==tt}function Xw(d){return typeof d=="number"&&d==Hr(d)}function X0(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=H}function Ns(d){var b=typeof d;return d!=null&&(b=="object"||b=="function")}function qs(d){return d!=null&&typeof d=="object"}var Jw=Jl?Pr(Jl):dt;function t6(d,b){return d===b||Ct(d,b,Yy(b))}function n6(d,b,D){return D=typeof D=="function"?D:n,Ct(d,b,Yy(b),D)}function r6(d){return Qw(d)&&d!=+d}function i6(d){if(Uk(d))throw new Un(s);return St(d)}function s6(d){return d===null}function o6(d){return d==null}function Qw(d){return typeof d=="number"||qs(d)&&Xe(d)==de}function jp(d){if(!qs(d)||Xe(d)!=Ae)return!1;var b=la(d);if(b===null)return!0;var D=Nr.call(b,"constructor")&&b.constructor;return typeof D=="function"&&D instanceof D&&aa.call(D)==hi}var s1=Ql?Pr(Ql):en;function a6(d){return Xw(d)&&d>=-9007199254740991&&d<=H}var ex=Ao?Pr(Ao):Nn;function J0(d){return typeof d=="string"||!Rr(d)&&qs(d)&&Xe(d)==gt}function iu(d){return typeof d=="symbol"||qs(d)&&Xe(d)==$t}var Id=eu?Pr(eu):jn;function l6(d){return d===n}function u6(d){return qs(d)&&ka(d)==Gt}function c6(d){return qs(d)&&Xe(d)==ln}var h6=$0(Br),f6=$0(function(d,b){return d<=b});function tx(d){if(!d)return[];if(kl(d))return J0(d)?Ms(d):Pl(d);if(or&&d[or])return ro(d[or]());var b=ka(d),D=b==ae?Sl:b==ut?Hs:Nd;return D(d)}function hh(d){if(!d)return d===0?d:0;if(d=Mu(d),d===U||d===-1/0){var b=d<0?-1:1;return b*ue}return d===d?d:0}function Hr(d){var b=hh(d),D=b%1;return b===b?D?b-D:b:0}function nx(d){return d?Yn(Hr(d),0,Ie):0}function Mu(d){if(typeof d=="number")return d;if(iu(d))return _e;if(Ns(d)){var b=typeof d.valueOf=="function"?d.valueOf():d;d=Ns(b)?b+"":b}if(typeof d!="string")return d===0?d:+d;d=Lo(d);var D=Xr.test(d);return D||Fi.test(d)?Xl(d.slice(2),D?2:8):ar.test(d)?_e:+d}function rx(d){return Ac(d,Ml(d))}function d6(d){return d?Yn(Hr(d),-9007199254740991,H):d===0?d:0}function Ti(d){return d==null?"":Pa(d)}var p6=Td(function(d,b){if(Rp(b)||kl(b)){Ac(b,Yo(b),d);return}for(var D in b)Nr.call(b,D)&&ft(d,D,b[D])}),ix=Td(function(d,b){Ac(b,Ml(b),d)}),Q0=Td(function(d,b,D,Q){Ac(b,Ml(b),d,Q)}),g6=Td(function(d,b,D,Q){Ac(b,Yo(b),d,Q)}),m6=lh(Cn);function v6(d,b){var D=ao(d);return b==null?D:an(D,b)}var y6=Vr(function(d,b){d=ii(d);var D=-1,Q=b.length,Le=Q>2?b[2]:n;for(Le&&nl(b[0],b[1],Le)&&(Q=1);++D<Q;)for(var je=b[D],Qe=Ml(je),pt=-1,Et=Qe.length;++pt<Et;){var rn=Qe[pt],sn=d[rn];(sn===n||tc(sn,sa[rn])&&!Nr.call(d,rn))&&(d[rn]=je[rn])}return d}),b6=Vr(function(d){return d.push(n,ww),ti(sx,n,d)});function _6(d,b){return xt(d,pr(b,3),Kt)}function w6(d,b){return xt(d,pr(b,3),fn)}function x6(d,b){return d==null?d:mt(d,pr(b,3),Ml)}function L6(d,b){return d==null?d:Mt(d,pr(b,3),Ml)}function C6(d,b){return d&&Kt(d,pr(b,3))}function S6(d,b){return d&&fn(d,pr(b,3))}function E6(d){return d==null?[]:wn(d,Yo(d))}function P6(d){return d==null?[]:wn(d,Ml(d))}function o1(d,b,D){var Q=d==null?n:rr(d,b);return Q===n?D:Q}function k6(d,b){return d!=null&&Cw(d,b,Nt)}function a1(d,b){return d!=null&&Cw(d,b,_t)}var M6=mw(function(d,b,D){b!=null&&typeof b.toString!="function"&&(b=si.call(b)),d[b]=D},u1(Al)),A6=mw(function(d,b,D){b!=null&&typeof b.toString!="function"&&(b=si.call(b)),Nr.call(d,b)?d[b].push(D):d[b]=[D]},pr),T6=Vr(Fe);function Yo(d){return kl(d)?Dt(d):Qr(d)}function Ml(d){return kl(d)?Dt(d,!0):fi(d)}function O6(d,b){var D={};return b=pr(b,3),Kt(d,function(Q,Le,je){kn(D,b(Q,Le,je),Q)}),D}function D6(d,b){var D={};return b=pr(b,3),Kt(d,function(Q,Le,je){kn(D,Le,b(Q,Le,je))}),D}var I6=Td(function(d,b,D){ca(d,b,D)}),sx=Td(function(d,b,D,Q){ca(d,b,D,Q)}),N6=lh(function(d,b){var D={};if(d==null)return D;var Q=!1;b=ni(b,function(je){return je=ec(je,d),Q||(Q=je.length>1),je}),Ac(d,Wy(d),D),Q&&(D=h(D,p|v|m,Mk));for(var Le=b.length;Le--;)sh(D,b[Le]);return D});function B6(d,b){return ox(d,Z0(pr(b)))}var R6=lh(function(d,b){return d==null?{}:ha(d,b)});function ox(d,b){if(d==null)return{};var D=ni(Wy(d),function(Q){return[Q]});return b=pr(b),Is(d,D,function(Q,Le){return b(Q,Le[0])})}function F6(d,b,D){b=ec(b,d);var Q=-1,Le=b.length;for(Le||(Le=1,d=n);++Q<Le;){var je=d==null?n:d[Tc(b[Q])];je===n&&(Q=Le,je=D),d=ch(je)?je.call(d):je}return d}function j6(d,b,D){return d==null?d:ih(d,b,D)}function z6(d,b,D,Q){return Q=typeof Q=="function"?Q:n,d==null?d:ih(d,b,D,Q)}var ax=bw(Yo),lx=bw(Ml);function U6(d,b,D){var Q=Rr(d),Le=Q||$h(d)||Id(d);if(b=pr(b,4),D==null){var je=d&&d.constructor;Le?D=Q?new je:[]:Ns(d)?D=ch(je)?ao(la(d)):{}:D={}}return(Le?fs:Kt)(d,function(Qe,pt,Et){return b(D,Qe,pt,Et)}),D}function $6(d,b){return d==null?!0:sh(d,b)}function V6(d,b,D){return d==null?d:Md(d,b,Of(D))}function H6(d,b,D,Q){return Q=typeof Q=="function"?Q:n,d==null?d:Md(d,b,Of(D),Q)}function Nd(d){return d==null?[]:Es(d,Yo(d))}function G6(d){return d==null?[]:Es(d,Ml(d))}function W6(d,b,D){return D===n&&(D=b,b=n),D!==n&&(D=Mu(D),D=D===D?D:0),b!==n&&(b=Mu(b),b=b===b?b:0),Yn(Mu(d),b,D)}function q6(d,b,D){return b=hh(b),D===n?(D=b,b=0):D=hh(D),d=Mu(d),Tt(d,b,D)}function Y6(d,b,D){if(D&&typeof D!="boolean"&&nl(d,b,D)&&(b=D=n),D===n&&(typeof b=="boolean"?(D=b,b=n):typeof d=="boolean"&&(D=d,d=n)),d===n&&b===n?(d=0,b=1):(d=hh(d),b===n?(b=d,d=0):b=hh(b)),d>b){var Q=d;d=b,b=Q}if(D||d%1||b%1){var Le=jt();return Se(d+Le*(b-d+_l("1e-"+((Le+"").length-1))),b)}return Af(d,b)}var K6=Od(function(d,b,D){return b=b.toLowerCase(),d+(D?ux(b):b)});function ux(d){return l1(Ti(d).toLowerCase())}function cx(d){return d=Ti(d),d&&d.replace(_o,qu).replace(Gu,"")}function Z6(d,b,D){d=Ti(d),b=Pa(b);var Q=d.length;D=D===n?Q:Yn(Hr(D),0,Q);var Le=D;return D-=b.length,D>=0&&d.slice(D,Le)==b}function X6(d){return d=Ti(d),d&&Rn.test(d)?d.replace(nr,Ja):d}function J6(d){return d=Ti(d),d&&Je.test(d)?d.replace(Ot,"\\$&"):d}var Q6=Od(function(d,b,D){return d+(D?"-":"")+b.toLowerCase()}),eT=Od(function(d,b,D){return d+(D?" ":"")+b.toLowerCase()}),tT=dw("toLowerCase");function nT(d,b,D){d=Ti(d),b=Hr(b);var Q=b?ks(d):0;if(!b||Q>=b)return d;var Le=(b-Q)/2;return U0(ms(Le),D)+d+U0(gs(Le),D)}function rT(d,b,D){d=Ti(d),b=Hr(b);var Q=b?ks(d):0;return b&&Q<b?d+U0(b-Q,D):d}function iT(d,b,D){d=Ti(d),b=Hr(b);var Q=b?ks(d):0;return b&&Q<b?U0(b-Q,D)+d:d}function sT(d,b,D){return D||b==null?b=0:b&&(b=+b),Pt(Ti(d).replace(Ut,""),b||0)}function oT(d,b,D){return(D?nl(d,b,D):b===n)?b=1:b=Hr(b),Pd(Ti(d),b)}function aT(){var d=arguments,b=Ti(d[0]);return d.length<3?b:b.replace(d[1],d[2])}var lT=Od(function(d,b,D){return d+(D?"_":"")+b.toLowerCase()});function uT(d,b,D){return D&&typeof D!="number"&&nl(d,b,D)&&(b=D=n),D=D===n?Ie:D>>>0,D?(d=Ti(d),d&&(typeof b=="string"||b!=null&&!s1(b))&&(b=Pa(b),!b&&na(d))?Pu(Ms(d),0,D):d.split(b,D)):[]}var cT=Od(function(d,b,D){return d+(D?" ":"")+l1(b)});function hT(d,b,D){return d=Ti(d),D=D==null?0:Yn(Hr(D),0,d.length),b=Pa(b),d.slice(D,D+b.length)==b}function fT(d,b,D){var Q=Oe.templateSettings;D&&nl(d,b,D)&&(b=n),d=Ti(d),b=Q0({},b,Q,_w);var Le=Q0({},b.imports,Q.imports,_w),je=Yo(Le),Qe=Es(Le,je),pt,Et,rn=0,sn=b.interpolate||ir,cn="__p += '",Bn=nu((b.escape||ir).source+"|"+sn.source+"|"+(sn===Ci?On:ir).source+"|"+(b.evaluate||ir).source+"|$","g"),tr="//# sourceURL="+(Nr.call(b,"sourceURL")?(b.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Kl+"]")+`
`;d.replace(Bn,function(br,oi,di,su,rl,ou){return di||(di=su),cn+=d.slice(rn,ou).replace(gr,Qa),oi&&(pt=!0,cn+=`' +
__e(`+oi+`) +
'`),rl&&(Et=!0,cn+=`';
`+rl+`;
__p += '`),di&&(cn+=`' +
((__t = (`+di+`)) == null ? '' : __t) +
'`),rn=ou+br.length,br}),cn+=`';
`;var yr=Nr.call(b,"variable")&&b.variable;if(!yr)cn=`with (obj) {
`+cn+`
}
`;else if(hn.test(yr))throw new Un(a);cn=(Et?cn.replace(vn,""):cn).replace(tn,"$1").replace(un,"$1;"),cn="function("+(yr||"obj")+`) {
`+(yr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(pt?", __e = _.escape":"")+(Et?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+cn+`return __p
}`;var Yr=fx(function(){return hr(je,tr+"return "+cn).apply(n,Qe)});if(Yr.source=cn,i1(Yr))throw Yr;return Yr}function dT(d){return Ti(d).toLowerCase()}function pT(d){return Ti(d).toUpperCase()}function gT(d,b,D){if(d=Ti(d),d&&(D||b===n))return Lo(d);if(!d||!(b=Pa(b)))return d;var Q=Ms(d),Le=Ms(b),je=$s(Q,Le),Qe=Lu(Q,Le)+1;return Pu(Q,je,Qe).join("")}function mT(d,b,D){if(d=Ti(d),d&&(D||b===n))return d.slice(0,wa(d)+1);if(!d||!(b=Pa(b)))return d;var Q=Ms(d),Le=Lu(Q,Ms(b))+1;return Pu(Q,0,Le).join("")}function vT(d,b,D){if(d=Ti(d),d&&(D||b===n))return d.replace(Ut,"");if(!d||!(b=Pa(b)))return d;var Q=Ms(d),Le=$s(Q,Ms(b));return Pu(Q,Le).join("")}function yT(d,b){var D=q,Q=F;if(Ns(b)){var Le="separator"in b?b.separator:Le;D="length"in b?Hr(b.length):D,Q="omission"in b?Pa(b.omission):Q}d=Ti(d);var je=d.length;if(na(d)){var Qe=Ms(d);je=Qe.length}if(D>=je)return d;var pt=D-ks(Q);if(pt<1)return Q;var Et=Qe?Pu(Qe,0,pt).join(""):d.slice(0,pt);if(Le===n)return Et+Q;if(Qe&&(pt+=Et.length-pt),s1(Le)){if(d.slice(pt).search(Le)){var rn,sn=Et;for(Le.global||(Le=nu(Le.source,Ti(Wn.exec(Le))+"g")),Le.lastIndex=0;rn=Le.exec(sn);)var cn=rn.index;Et=Et.slice(0,cn===n?pt:cn)}}else if(d.indexOf(Pa(Le),pt)!=pt){var Bn=Et.lastIndexOf(Le);Bn>-1&&(Et=Et.slice(0,Bn))}return Et+Q}function bT(d){return d=Ti(d),d&&ur.test(d)?d.replace(Xn,xa):d}var _T=Od(function(d,b,D){return d+(D?" ":"")+b.toUpperCase()}),l1=dw("toUpperCase");function hx(d,b,D){return d=Ti(d),b=D?n:b,b===n?Co(d)?ra(d):lt(d):d.match(b)||[]}var fx=Vr(function(d,b){try{return ti(d,n,b)}catch(D){return i1(D)?D:new Un(D)}}),wT=lh(function(d,b){return fs(b,function(D){D=Tc(D),kn(d,D,n1(d[D],d))}),d});function xT(d){var b=d==null?0:d.length,D=pr();return d=b?ni(d,function(Q){if(typeof Q[1]!="function")throw new Pi(o);return[D(Q[0]),Q[1]]}):[],Vr(function(Q){for(var Le=-1;++Le<b;){var je=d[Le];if(ti(je[0],this,Q))return ti(je[1],this,Q)}})}function LT(d){return g(h(d,p))}function u1(d){return function(){return d}}function CT(d,b){return d==null||d!==d?b:d}var ST=gw(),ET=gw(!0);function Al(d){return d}function c1(d){return Kn(typeof d=="function"?d:h(d,p))}function PT(d){return lo(h(d,p))}function kT(d,b){return Zu(d,h(b,p))}var MT=Vr(function(d,b){return function(D){return Fe(D,d,b)}}),AT=Vr(function(d,b){return function(D){return Fe(d,D,b)}});function h1(d,b,D){var Q=Yo(b),Le=wn(b,Q);D==null&&!(Ns(b)&&(Le.length||!Q.length))&&(D=b,b=d,d=this,Le=wn(b,Yo(b)));var je=!(Ns(D)&&"chain"in D)||!!D.chain,Qe=ch(d);return fs(Le,function(pt){var Et=b[pt];d[pt]=Et,Qe&&(d.prototype[pt]=function(){var rn=this.__chain__;if(je||rn){var sn=d(this.__wrapped__),cn=sn.__actions__=Pl(this.__actions__);return cn.push({func:Et,args:arguments,thisArg:d}),sn.__chain__=rn,sn}return Et.apply(d,xo([this.value()],arguments))})}),d}function TT(){return zi._===this&&(zi._=Hi),this}function f1(){}function OT(d){return d=Hr(d),Vr(function(b){return tl(b,d)})}var DT=Vy(ni),IT=Vy(tu),NT=Vy(z);function dx(d){return Zy(d)?lr(Tc(d)):Gi(d)}function BT(d){return function(b){return d==null?n:rr(d,b)}}var RT=vw(),FT=vw(!0);function d1(){return[]}function p1(){return!1}function jT(){return{}}function zT(){return""}function UT(){return!0}function $T(d,b){if(d=Hr(d),d<1||d>H)return[];var D=Ie,Q=Se(d,Ie);b=pr(b),d-=Ie;for(var Le=Vi(Q,b);++D<d;)b(D);return Le}function VT(d){return Rr(d)?ni(d,Tc):iu(d)?[d]:Pl(Dw(Ti(d)))}function HT(d){var b=++Ho;return Ti(d)+b}var GT=z0(function(d,b){return d+b},0),WT=Hy("ceil"),qT=z0(function(d,b){return d/b},1),YT=Hy("floor");function KT(d){return d&&d.length?me(d,Al,ct):n}function ZT(d,b){return d&&d.length?me(d,pr(b,2),ct):n}function XT(d){return Jn(d,Al)}function JT(d,b){return Jn(d,pr(b,2))}function QT(d){return d&&d.length?me(d,Al,Br):n}function e8(d,b){return d&&d.length?me(d,pr(b,2),Br):n}var t8=z0(function(d,b){return d*b},1),n8=Hy("round"),r8=z0(function(d,b){return d-b},0);function i8(d){return d&&d.length?ri(d,Al):0}function s8(d,b){return d&&d.length?ri(d,pr(b,2)):0}return Oe.after=PA,Oe.ary=Hw,Oe.assign=p6,Oe.assignIn=ix,Oe.assignInWith=Q0,Oe.assignWith=g6,Oe.at=m6,Oe.before=Gw,Oe.bind=n1,Oe.bindAll=wT,Oe.bindKey=Ww,Oe.castArray=jA,Oe.chain=Uw,Oe.chunk=Yk,Oe.compact=Kk,Oe.concat=Zk,Oe.cond=xT,Oe.conforms=LT,Oe.constant=u1,Oe.countBy=iA,Oe.create=v6,Oe.curry=qw,Oe.curryRight=Yw,Oe.debounce=Kw,Oe.defaults=y6,Oe.defaultsDeep=b6,Oe.defer=kA,Oe.delay=MA,Oe.difference=Xk,Oe.differenceBy=Jk,Oe.differenceWith=Qk,Oe.drop=eM,Oe.dropRight=tM,Oe.dropRightWhile=nM,Oe.dropWhile=rM,Oe.fill=iM,Oe.filter=oA,Oe.flatMap=uA,Oe.flatMapDeep=cA,Oe.flatMapDepth=hA,Oe.flatten=Rw,Oe.flattenDeep=sM,Oe.flattenDepth=oM,Oe.flip=AA,Oe.flow=ST,Oe.flowRight=ET,Oe.fromPairs=aM,Oe.functions=E6,Oe.functionsIn=P6,Oe.groupBy=fA,Oe.initial=uM,Oe.intersection=cM,Oe.intersectionBy=hM,Oe.intersectionWith=fM,Oe.invert=M6,Oe.invertBy=A6,Oe.invokeMap=pA,Oe.iteratee=c1,Oe.keyBy=gA,Oe.keys=Yo,Oe.keysIn=Ml,Oe.map=q0,Oe.mapKeys=O6,Oe.mapValues=D6,Oe.matches=PT,Oe.matchesProperty=kT,Oe.memoize=K0,Oe.merge=I6,Oe.mergeWith=sx,Oe.method=MT,Oe.methodOf=AT,Oe.mixin=h1,Oe.negate=Z0,Oe.nthArg=OT,Oe.omit=N6,Oe.omitBy=B6,Oe.once=TA,Oe.orderBy=mA,Oe.over=DT,Oe.overArgs=OA,Oe.overEvery=IT,Oe.overSome=NT,Oe.partial=r1,Oe.partialRight=Zw,Oe.partition=vA,Oe.pick=R6,Oe.pickBy=ox,Oe.property=dx,Oe.propertyOf=BT,Oe.pull=mM,Oe.pullAll=jw,Oe.pullAllBy=vM,Oe.pullAllWith=yM,Oe.pullAt=bM,Oe.range=RT,Oe.rangeRight=FT,Oe.rearg=DA,Oe.reject=_A,Oe.remove=_M,Oe.rest=IA,Oe.reverse=e1,Oe.sampleSize=xA,Oe.set=j6,Oe.setWith=z6,Oe.shuffle=LA,Oe.slice=wM,Oe.sortBy=EA,Oe.sortedUniq=kM,Oe.sortedUniqBy=MM,Oe.split=uT,Oe.spread=NA,Oe.tail=AM,Oe.take=TM,Oe.takeRight=OM,Oe.takeRightWhile=DM,Oe.takeWhile=IM,Oe.tap=KM,Oe.throttle=BA,Oe.thru=W0,Oe.toArray=tx,Oe.toPairs=ax,Oe.toPairsIn=lx,Oe.toPath=VT,Oe.toPlainObject=rx,Oe.transform=U6,Oe.unary=RA,Oe.union=NM,Oe.unionBy=BM,Oe.unionWith=RM,Oe.uniq=FM,Oe.uniqBy=jM,Oe.uniqWith=zM,Oe.unset=$6,Oe.unzip=t1,Oe.unzipWith=zw,Oe.update=V6,Oe.updateWith=H6,Oe.values=Nd,Oe.valuesIn=G6,Oe.without=UM,Oe.words=hx,Oe.wrap=FA,Oe.xor=$M,Oe.xorBy=VM,Oe.xorWith=HM,Oe.zip=GM,Oe.zipObject=WM,Oe.zipObjectDeep=qM,Oe.zipWith=YM,Oe.entries=ax,Oe.entriesIn=lx,Oe.extend=ix,Oe.extendWith=Q0,h1(Oe,Oe),Oe.add=GT,Oe.attempt=fx,Oe.camelCase=K6,Oe.capitalize=ux,Oe.ceil=WT,Oe.clamp=W6,Oe.clone=zA,Oe.cloneDeep=$A,Oe.cloneDeepWith=VA,Oe.cloneWith=UA,Oe.conformsTo=HA,Oe.deburr=cx,Oe.defaultTo=CT,Oe.divide=qT,Oe.endsWith=Z6,Oe.eq=tc,Oe.escape=X6,Oe.escapeRegExp=J6,Oe.every=sA,Oe.find=aA,Oe.findIndex=Nw,Oe.findKey=_6,Oe.findLast=lA,Oe.findLastIndex=Bw,Oe.findLastKey=w6,Oe.floor=YT,Oe.forEach=$w,Oe.forEachRight=Vw,Oe.forIn=x6,Oe.forInRight=L6,Oe.forOwn=C6,Oe.forOwnRight=S6,Oe.get=o1,Oe.gt=GA,Oe.gte=WA,Oe.has=k6,Oe.hasIn=a1,Oe.head=Fw,Oe.identity=Al,Oe.includes=dA,Oe.indexOf=lM,Oe.inRange=q6,Oe.invoke=T6,Oe.isArguments=Nf,Oe.isArray=Rr,Oe.isArrayBuffer=qA,Oe.isArrayLike=kl,Oe.isArrayLikeObject=uo,Oe.isBoolean=YA,Oe.isBuffer=$h,Oe.isDate=KA,Oe.isElement=ZA,Oe.isEmpty=XA,Oe.isEqual=JA,Oe.isEqualWith=QA,Oe.isError=i1,Oe.isFinite=e6,Oe.isFunction=ch,Oe.isInteger=Xw,Oe.isLength=X0,Oe.isMap=Jw,Oe.isMatch=t6,Oe.isMatchWith=n6,Oe.isNaN=r6,Oe.isNative=i6,Oe.isNil=o6,Oe.isNull=s6,Oe.isNumber=Qw,Oe.isObject=Ns,Oe.isObjectLike=qs,Oe.isPlainObject=jp,Oe.isRegExp=s1,Oe.isSafeInteger=a6,Oe.isSet=ex,Oe.isString=J0,Oe.isSymbol=iu,Oe.isTypedArray=Id,Oe.isUndefined=l6,Oe.isWeakMap=u6,Oe.isWeakSet=c6,Oe.join=dM,Oe.kebabCase=Q6,Oe.last=ku,Oe.lastIndexOf=pM,Oe.lowerCase=eT,Oe.lowerFirst=tT,Oe.lt=h6,Oe.lte=f6,Oe.max=KT,Oe.maxBy=ZT,Oe.mean=XT,Oe.meanBy=JT,Oe.min=QT,Oe.minBy=e8,Oe.stubArray=d1,Oe.stubFalse=p1,Oe.stubObject=jT,Oe.stubString=zT,Oe.stubTrue=UT,Oe.multiply=t8,Oe.nth=gM,Oe.noConflict=TT,Oe.noop=f1,Oe.now=Y0,Oe.pad=nT,Oe.padEnd=rT,Oe.padStart=iT,Oe.parseInt=sT,Oe.random=Y6,Oe.reduce=yA,Oe.reduceRight=bA,Oe.repeat=oT,Oe.replace=aT,Oe.result=F6,Oe.round=n8,Oe.runInContext=yt,Oe.sample=wA,Oe.size=CA,Oe.snakeCase=lT,Oe.some=SA,Oe.sortedIndex=xM,Oe.sortedIndexBy=LM,Oe.sortedIndexOf=CM,Oe.sortedLastIndex=SM,Oe.sortedLastIndexBy=EM,Oe.sortedLastIndexOf=PM,Oe.startCase=cT,Oe.startsWith=hT,Oe.subtract=r8,Oe.sum=i8,Oe.sumBy=s8,Oe.template=fT,Oe.times=$T,Oe.toFinite=hh,Oe.toInteger=Hr,Oe.toLength=nx,Oe.toLower=dT,Oe.toNumber=Mu,Oe.toSafeInteger=d6,Oe.toString=Ti,Oe.toUpper=pT,Oe.trim=gT,Oe.trimEnd=mT,Oe.trimStart=vT,Oe.truncate=yT,Oe.unescape=bT,Oe.uniqueId=HT,Oe.upperCase=_T,Oe.upperFirst=l1,Oe.each=$w,Oe.eachRight=Vw,Oe.first=Fw,h1(Oe,function(){var d={};return Kt(Oe,function(b,D){Nr.call(Oe.prototype,D)||(d[D]=b)}),d}(),{chain:!1}),Oe.VERSION=r,fs(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){Oe[d].placeholder=Oe}),fs(["drop","take"],function(d,b){kr.prototype[d]=function(D){D=D===n?1:ie(Hr(D),0);var Q=this.__filtered__&&!b?new kr(this):this.clone();return Q.__filtered__?Q.__takeCount__=Se(D,Q.__takeCount__):Q.__views__.push({size:Se(D,Ie),type:d+(Q.__dir__<0?"Right":"")}),Q},kr.prototype[d+"Right"]=function(D){return this.reverse()[d](D).reverse()}}),fs(["filter","map","takeWhile"],function(d,b){var D=b+1,Q=D==Z||D==k;kr.prototype[d]=function(Le){var je=this.clone();return je.__iteratees__.push({iteratee:pr(Le,3),type:D}),je.__filtered__=je.__filtered__||Q,je}}),fs(["head","last"],function(d,b){var D="take"+(b?"Right":"");kr.prototype[d]=function(){return this[D](1).value()[0]}}),fs(["initial","tail"],function(d,b){var D="drop"+(b?"":"Right");kr.prototype[d]=function(){return this.__filtered__?new kr(this):this[D](1)}}),kr.prototype.compact=function(){return this.filter(Al)},kr.prototype.find=function(d){return this.filter(d).head()},kr.prototype.findLast=function(d){return this.reverse().find(d)},kr.prototype.invokeMap=Vr(function(d,b){return typeof d=="function"?new kr(this):this.map(function(D){return Fe(D,d,b)})}),kr.prototype.reject=function(d){return this.filter(Z0(pr(d)))},kr.prototype.slice=function(d,b){d=Hr(d);var D=this;return D.__filtered__&&(d>0||b<0)?new kr(D):(d<0?D=D.takeRight(-d):d&&(D=D.drop(d)),b!==n&&(b=Hr(b),D=b<0?D.dropRight(-b):D.take(b-d)),D)},kr.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},kr.prototype.toArray=function(){return this.take(Ie)},Kt(kr.prototype,function(d,b){var D=/^(?:filter|find|map|reject)|While$/.test(b),Q=/^(?:head|last)$/.test(b),Le=Oe[Q?"take"+(b=="last"?"Right":""):b],je=Q||/^find/.test(b);Le&&(Oe.prototype[b]=function(){var Qe=this.__wrapped__,pt=Q?[1]:arguments,Et=Qe instanceof kr,rn=pt[0],sn=Et||Rr(Qe),cn=function(oi){var di=Le.apply(Oe,xo([oi],pt));return Q&&Bn?di[0]:di};sn&&D&&typeof rn=="function"&&rn.length!=1&&(Et=sn=!1);var Bn=this.__chain__,tr=!!this.__actions__.length,yr=je&&!Bn,Yr=Et&&!tr;if(!je&&sn){Qe=Yr?Qe:new kr(this);var br=d.apply(Qe,pt);return br.__actions__.push({func:W0,args:[cn],thisArg:n}),new ys(br,Bn)}return yr&&Yr?d.apply(this,pt):(br=this.thru(cn),yr?Q?br.value()[0]:br.value():br)})}),fs(["pop","push","shift","sort","splice","unshift"],function(d){var b=ia[d],D=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",Q=/^(?:pop|shift)$/.test(d);Oe.prototype[d]=function(){var Le=arguments;if(Q&&!this.__chain__){var je=this.value();return b.apply(Rr(je)?je:[],Le)}return this[D](function(Qe){return b.apply(Rr(Qe)?Qe:[],Le)})}}),Kt(kr.prototype,function(d,b){var D=Oe[b];if(D){var Q=D.name+"";Nr.call(oo,Q)||(oo[Q]=[]),oo[Q].push({name:b,func:D})}}),oo[j0(n,N).name]=[{name:"wrapper",func:n}],kr.prototype.clone=Bh,kr.prototype.reverse=_d,kr.prototype.value=Rh,Oe.prototype.at=ZM,Oe.prototype.chain=XM,Oe.prototype.commit=JM,Oe.prototype.next=QM,Oe.prototype.plant=tA,Oe.prototype.reverse=nA,Oe.prototype.toJSON=Oe.prototype.valueOf=Oe.prototype.value=rA,Oe.prototype.first=Oe.prototype.head,or&&(Oe.prototype[or]=eA),Oe},Ts=So();Ui?((Ui.exports=Ts)._=Ts,er._=Ts):zi._=Ts}).call(Jo)})(jv,jv.exports);var NV=jv.exports;const BV={class:"h-full flex"},RV={class:"flex-1 relative"},FV={key:0,class:"absolute inset-0 bg-black/30 backdrop-blur-sm z-[2000] flex items-center justify-center"},jV={key:1,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[3000]"},zV={class:"text-center max-w-lg mx-auto p-8"},UV={class:"space-y-4"},$V={class:"map-parent"},VV={class:"map-content flex flex-col h-full"},HV={class:"flex-1 flex flex-col md:flex-row relative"},GV={class:"flex-1 relative"},WV={key:0,class:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 z-50"},qV={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center z-[9999] p-4 overflow-y-auto"},YV={class:"bg-white rounded-lg p-6 max-w-2xl w-full my-8 relative"},KV={class:"flex justify-between items-center mb-4 sticky top-0 bg-white pb-4 border-b"},ZV={class:"overflow-y-auto max-h-[calc(100vh-12rem)]"},XV={key:0,class:"space-y-4"},JV={key:0,class:"space-y-2"},QV={class:"grid grid-cols-1 gap-2"},eH=["onClick"],tH={class:"font-medium text-gray-900"},nH={key:1,class:"space-y-2"},rH={class:"flex items-center mb-4"},iH={class:"text-sm text-gray-600"},sH={class:"grid grid-cols-1 gap-2"},oH=["onClick"],aH={class:"font-medium text-gray-900"},lH={key:2,class:"space-y-2"},uH={class:"flex items-center mb-4"},cH={class:"text-sm text-gray-600"},hH={class:"grid grid-cols-1 gap-2"},fH={key:0,class:"text-center py-4"},dH=["onClick"],pH={class:"font-medium text-gray-900"},gH={key:3,class:"space-y-2"},mH={class:"flex items-center mb-4"},vH={class:"text-sm text-gray-600"},yH={class:"grid grid-cols-1 gap-2"},bH=["onClick"],_H={class:"font-medium text-gray-900"},wH={class:"text-sm text-gray-500"},xH={class:"text-xs text-gray-400 mt-1"},LH=["onClick"],CH={key:1,class:"space-y-4"},SH={key:0,class:"space-y-2"},EH={class:"grid grid-cols-1 gap-2"},PH={key:0,class:"text-center py-8"},kH=["onClick"],MH={class:"font-medium text-gray-900"},AH={key:1,class:"space-y-2"},TH={class:"flex items-center mb-4"},OH={class:"text-sm text-gray-600"},DH={class:"grid grid-cols-1 gap-2"},IH=["onClick"],NH={class:"font-medium text-gray-900"},BH={class:"text-sm text-gray-500"},RH={class:"text-xs text-gray-400 mt-1"},FH=["onClick"],jH={key:2,class:"space-y-4"},zH={key:0,class:"space-y-2"},UH={class:"grid grid-cols-1 gap-2"},$H=["onClick"],VH={class:"font-medium text-gray-900"},HH={key:1,class:"space-y-2"},GH={class:"flex items-center mb-4"},WH={class:"text-sm text-gray-600"},qH={class:"grid grid-cols-1 gap-2"},YH={key:0,class:"text-center py-4"},KH=["onClick"],ZH={class:"font-medium text-gray-900"},XH={key:2,class:"space-y-2"},JH={class:"flex items-center mb-4"},QH={class:"text-sm text-gray-600"},eG={class:"grid grid-cols-1 gap-2"},tG=["onClick"],nG={class:"font-medium text-gray-900"},rG={class:"text-sm text-gray-500"},iG={class:"text-xs text-gray-400 mt-1"},sG=["onClick"],oG={key:3,class:"space-y-4"},aG={key:0,class:"text-center py-8"},lG={key:1,class:"space-y-2"},uG=["onClick"],cG={class:"font-medium text-gray-900"},hG={class:"text-sm text-gray-500"},fG={class:"text-xs text-gray-400 mt-1"},dG=["onClick"],pG={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4"},gG={class:"bg-white rounded-lg p-6 max-w-md w-full shadow-xl"},mG={class:"text-center mb-4"},vG={class:"mt-2 text-gray-600"},C5=hs({__name:"MapView",emits:["shape-selected"],setup(t,{emit:e}){const n=kB(),r=bt(null),i=bt(!1),s=My(),o=l0(),a=hd(),l=Gl(),c=bt([]),f=bt({planId:n.query.planId?parseInt(n.query.planId):null,noteId:n.query.noteId?parseInt(n.query.noteId):null,lat:n.query.lat?parseFloat(n.query.lat):null,lng:n.query.lng?parseFloat(n.query.lng):null,tool:n.query.tool||null}),{currentTool:p,selectedShape:v,map:m,initMap:C,setDrawingTool:S,updateShapeStyle:I,updateShapeProperties:N,featureGroup:T,adjustView:j,clearActiveControlPoints:W,isDrawing:X}=h$(),{initMap:ce,changeBaseMap:he}=g$(),O=bt(!1),B=bt(!1),q=bt(!1),F=bt(!1),R=bt(null),K=bt(null),Z=bt(null),Y=bt(!1),k=bt(null),U=eo(),H=bt([]),ue=bt([]),_e=bt([]),Ie=bt(null),ee=bt(null),te=bt(null),oe=bt(!1),ge=bt(!1),ve=bt(!1),ye=bt(null),pe=Hn(()=>U.isSalarie||Ie.value?ue.value:[]),fe=Hn(()=>{if(!v.value)return null;const Ot=v.value.properties||{};let Je="unknown";Ot.type?Je=Ot.type:v.value instanceof Fl||v.value instanceof pn.Polygon?Je="Polygon":(v.value instanceof _s||v.value instanceof pn.Polyline&&!(v.value instanceof pn.Polygon))&&(Je="Line"),Ot.type||(v.value.properties||(v.value.properties={}),v.value.properties.type=Je);let Ut;if(Ot.style&&Ot.style.name)Ut=Ot.style.name;else if(Ot.name)Ut=Ot.name;else if(v.value.name)Ut=v.value.name;else{const Fn=Object.getOwnPropertyDescriptor(v.value,"name");Fn&&Fn.value&&(Ut=Fn.value);const Wt=["_name","displayName","title"];for(const Lt of Wt)if(v.value[Lt]){Ut=v.value[Lt];break}}Ut&&(v.value.properties||(v.value.properties={}),v.value.properties.name=Ut,v.value.properties.style||(v.value.properties.style={}),v.value.properties.style.name=Ut,v.value.name=Ut,typeof v.value.setName=="function"&&v.value.setName(Ut)),v.value.properties.category||(v.value.properties.category="forages"),v.value.properties.accessLevel||(v.value.properties.accessLevel="visitor");const _n={...Ot,type:Je,name:Ut||v.value.name||Ot.name||void 0,category:v.value.properties.category||"forages",accessLevel:v.value.properties.accessLevel||"visitor"};return{type:Je,properties:_n,layer:v.value,options:v.value.options||{}}});function $e(Ot){const Je=Ot.getCenter(),Ut=Ot.getZoom(),_n={lat:Je.lat,lng:Je.lng,zoom:Ut};document.cookie=`mapState=${JSON.stringify(_n)};max-age=2592000;path=/`}function Ne(){const Je=document.cookie.split(";").find(Ut=>Ut.trim().startsWith("mapState="));if(Je)try{return JSON.parse(Je.split("=")[1])}catch(Ut){return console.error("Erreur lors de la lecture du cookie de position:",Ut),null}return null}zs(async()=>{var Ot,Je;window.addEventListener("resize",Gn);try{if(await s.fetchPlans(),(U.isAdmin||U.isEntreprise)&&await Zt(),U.isEntreprise){oe.value=!0;try{const hn=await En.get("/users/",{params:{role:"SALARIE",entreprise:(Ot=U.user)==null?void 0:Ot.id}});H.value=hn.data}catch(hn){console.error("Error loading salaries:",hn),H.value=[]}finally{oe.value=!1}}if(U.isSalarie){ge.value=!0;try{const hn=await U.fetchSalarieVisiteurs(((Je=U.user)==null?void 0:Je.id)||0);ue.value=Array.isArray(hn)?hn:[hn]}catch(hn){console.error("Error loading clients:",hn)}finally{ge.value=!1}}const Ut=Ne(),_n=Ut?[Ut.lat,Ut.lng]:[46.603354,1.888334],Xt=(Ut==null?void 0:Ut.zoom)??6;if(r.value&&!m.value){const hn=C(r.value,_n,Xt);hn.pm.setLang("fr"),hn.pm.addControls({rotateMode:!1}),ce(hn),hn.on("moveend",()=>{$e(hn)}),window.addEventListener("map-set-location",Ln=>{if(hn&&Ln.detail){const{lat:On,lng:Wn,zoom:ar}=Ln.detail;hn.flyTo([On,Wn],ar,{duration:1.5,easeLinearity:.25})}}),T.value&&(T.value.on("layeradd",Ln=>{const On=Ln.layer;On&&On._leaflet_id&&c.value.findIndex(ar=>ar.layer&&ar.layer._leaflet_id===On._leaflet_id)===-1&&c.value.push({layer:On,id:On._dbId||On._leaflet_id})}),T.value.on("layerremove",Ln=>{const On=Ln.layer;if(On&&On._leaflet_id&&!On._dbId&&(!On.properties||On.properties&&!On.properties.type)){const ar=c.value.findIndex(Xr=>Xr.layer&&Xr.layer._leaflet_id===On._leaflet_id);ar!==-1&&c.value.splice(ar,1)}}))}if(f.value.planId)try{await Ae(f.value.planId);const hn=document.querySelector(".map-parent");hn instanceof HTMLElement&&(hn.style.display="block"),f.value.lat&&f.value.lng&&m.value&&m.value.flyTo([f.value.lat,f.value.lng],30),f.value.noteId&&T.value&&setTimeout(()=>{var On;const Ln=((On=T.value)==null?void 0:On.getLayers())||[];for(const Wn of Ln)if(Wn._dbId===f.value.noteId||Wn.id===f.value.noteId){if(typeof Wn.fire=="function"&&Wn.fire("click"),typeof Wn.bringToFront=="function"&&Wn.bringToFront(),m.value){const ar=typeof Wn.getLatLng=="function"?Wn.getLatLng():[f.value.lat,f.value.lng];m.value.flyTo(ar,18)}break}},1e3),f.value.tool&&S(f.value.tool)}catch(hn){console.error("[MapView][onMounted] Erreur chargement plan depuis URL:",hn),await Fn()}else await Fn();async function Fn(){const hn=localStorage.getItem("lastPlanId");if(hn)try{await Ae(parseInt(hn));const Ln=document.querySelector(".map-parent");Ln instanceof HTMLElement&&(Ln.style.display="block")}catch(Ln){console.error("[MapView][loadLastPlan] Erreur chargement dernier plan:",Ln),R.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),de(),localStorage.removeItem("lastPlanId")}else R.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),de()}window.addEventListener("shape:created",hn=>{const{shape:Ln,type:On,properties:Wn}=hn.detail;o.addElement(Ln),S("")}),window.addEventListener("geonote:savePlan",()=>{Ge()}),window.addEventListener("geonote:select",hn=>{if(hn.detail&&hn.detail.geoNote){const Ln=hn.detail.geoNote;v.value=Ln,fl(()=>{})}}),window.addEventListener("categoriesReactivated",hn=>{Rn()}),window.addEventListener("shapeTypesReactivated",hn=>{Rn()});const Wt=hn=>{if(!hn||!hn.note){console.error("[MapView] Erreur: e.note est undefined ou null",hn);return}const Ln=hn.note;K.value={id:Ln.id,title:Ln.title||Ln.name,description:Ln.description,location:Ln.location,columnId:Ln.columnId||a.getDefaultColumn.id,accessLevel:Ln.accessLevel,style:Ln.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:Ln.createdAt||new Date().toISOString(),updatedAt:Ln.updatedAt||new Date().toISOString(),comments:Ln.comments||[],photos:Ln.photos||[]},q.value=!0},Lt=hn=>{if(!hn.detail||!hn.detail.note){console.error("[MapView] Erreur: event.detail.note est undefined ou null",hn);return}const Ln=hn.detail.note;let Wn=hn.detail.backendId||Ln.backendId;if(!Wn){const ar=c.value.find(Xr=>Xr.layer===hn.detail.source);Wn=ar?ar.id:Ln.id}K.value={id:Wn,leafletId:Ln.id,title:Ln.title||Ln.name,description:Ln.description,location:Ln.location,columnId:Ln.columnId||a.getDefaultColumn.id,accessLevel:Ln.accessLevel,style:Ln.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:Ln.createdAt||new Date().toISOString(),updatedAt:Ln.updatedAt||new Date().toISOString(),comments:Ln.comments||[],photos:Ln.photos||[]},q.value=!0};window.addEventListener("geonote:edit",Lt),T.value&&(T.value.off("note:edit"),T.value.on("note:edit",Wt))}catch(Ut){console.error("Error during component mount:",Ut),R.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),de(),localStorage.removeItem("lastPlanId")}}),li(()=>o.hasUnsavedChanges,Ot=>{Ot&&R.value&&(s.markUnsavedChanges(),Ge())});let ot;zs(()=>{ot=setInterval(()=>{o.hasUnsavedChanges&&R.value&&Ge()},6e4)}),Ru(()=>{clearInterval(ot)}),li(()=>s.plans,Ot=>{B.value&&te.value},{deep:!0}),li(()=>o.filters,(Ot,Je)=>{if(Je){const Ut=JSON.stringify(Je.accessLevels)!==JSON.stringify(Ot.accessLevels),_n=JSON.stringify(Je.categories)!==JSON.stringify(Ot.categories),Xt=JSON.stringify(Je.shapeTypes)!==JSON.stringify(Ot.shapeTypes);(Ut||_n||Xt)&&Rn()}else Rn()},{deep:!0});const le=Ot=>{Rn()};zs(()=>{window.addEventListener("filtersChanged",le)}),Ru(()=>{window.removeEventListener("filtersChanged",le)}),li(()=>o.getFilteredElements,(Ot,Je)=>{Rn()},{deep:!0}),li(m,async Ot=>{var Je;Ot&&s.currentPlan&&!((Je=T.value)!=null&&Je.getLayers().length)&&(de(),await o.loadPlanElements(s.currentPlan.id))}),li(()=>s.currentPlan,async(Ot,Je)=>{if((Ot==null?void 0:Ot.id)!==(Je==null?void 0:Je.id))try{if(Ot){R.value=Ot;const Ut=document.querySelector(".map-parent");Ut instanceof HTMLElement&&(Ut.style.display="block")}else{R.value=null,de();const Ut=document.querySelector(".map-parent");Ut instanceof HTMLElement&&(Ut.style.display="none")}}catch(Ut){console.error("[MapView][watch currentPlan] ERREUR:",Ut),R.value=null,de()}},{immediate:!0}),Cf(()=>{m.value&&m.value.off("moveend"),window.removeEventListener("resize",Gn),window.removeEventListener("shape:created",()=>{})});function ae(){i.value=!i.value}function de(){T.value&&(T.value.eachLayer(Ot=>{var Je;((Je=Ot.properties)==null?void 0:Je.type)==="Note"&&typeof Ot.resetPlanSaveState=="function"&&Ot.resetPlanSaveState()}),T.value.clearLayers()),c.value=[],W(),v.value=null,p.value=""}async function re(Ot){try{de(),await o.loadPlanElements(Ot);const Je=s.getPlanById(Ot);if(Je){R.value=Je,s.setCurrentPlan(Je),o.setCurrentPlan(Je.id),localStorage.setItem("lastPlanId",Je.id.toString());try{const _n=(await Xo.getNotesByPlan(Ot)).data,Xt=hd();m.value&&T.value&&_n.forEach(Fn=>{try{if(Xt.addNote({...Fn,id:Fn.id,columnId:Fn.column,accessLevel:Fn.access_level}),Fn.location&&Fn.location.type==="Point"&&Array.isArray(Fn.location.coordinates)&&Fn.location.coordinates.length===2){const Wt=al.fromBackendData({name:Fn.title,description:Fn.description,location:Fn.location,columnId:Fn.column,accessLevel:Fn.access_level,style:Fn.style||{color:Fn.color||"#3B82F6",weight:2,opacity:1,fillColor:Fn.color||"#3B82F6",fillOpacity:.6,radius:8},category:Fn.category||"forages",comments:Fn.comments||[],photos:Fn.photos||[]});Wt._dbId=Fn.id,T.value.addLayer(Wt),c.value.push({id:Fn.id,type:"Note",layer:Wt,properties:Wt.properties})}}catch(Wt){console.error("[MapView][refreshMapWithPlan] Erreur lors de l'ajout de la note golocalise:",Wt)}})}catch(Ut){console.error("[MapView][refreshMapWithPlan] Erreur lors du chargement des notes golocalises:",Ut)}if(m.value&&T.value){const Ut=o.getCurrentElements.reduce((Wt,Lt)=>(Wt[Lt.type_forme]||(Wt[Lt.type_forme]=[]),Wt[Lt.type_forme].push(Lt),Wt),{}),_n=["Note","Polygon","Line"],Xt=Object.keys(Ut).sort((Wt,Lt)=>{const hn=_n.indexOf(Wt),Ln=_n.indexOf(Lt);return(hn===-1?999:hn)-(Ln===-1?999:Ln)}),Fn=Wt=>{switch(Wt){case"Note":return 20;case"Line":return 10;case"Polygon":return 5;default:return 10}};for(const Wt of Xt){const Lt=Ut[Wt],hn=Fn(Wt);for(let Ln=0;Ln<Lt.length;Ln+=hn){const On=Lt.slice(Ln,Ln+hn);await Promise.all(On.map(async Wn=>{var Xr;if(!T.value||!Wn.data)return;let ar=null;switch(Wn.type_forme){case"Polygon":{const sr=Wn.data;if(sr.points&&sr.points.length>0){const Fi=sr.points.map(Gr=>pn.latLng(Gr[1],Gr[0]));ar=new Fl(Fi,sr.style),sr.name&&(ar.properties={name:sr.name},ar.name=sr.name)}break}case"Line":{const sr=Wn.data;if(sr.points&&sr.points.length>0){const Fi=sr.points.map(Gr=>pn.latLng(Gr[1],Gr[0]));ar=new _s(Fi,sr.style),sr.name&&(ar.properties={name:sr.name},ar.name=sr.name)}break}case"Note":{const sr=Wn.data;if(sr.location&&Array.isArray(sr.location)&&sr.location.length===2||sr.location&&typeof sr.location=="object"&&sr.location.type==="Point"&&Array.isArray(sr.location.coordinates)&&sr.location.coordinates.length===2)try{sr.category||(sr.category="forages"),sr.accessLevel||(sr.accessLevel="private");const Gr=al.fromBackendData(sr);Gr._dbId=Wn.id,ar=Gr}catch(Gr){console.error("[MapView][refreshMapWithPlan] Erreur lors de la cration de la Note:",Gr)}else console.error("[MapView][refreshMapWithPlan] Donnes invalides pour Note:",sr);break}}ar&&(ar._dbId=Wn.id,(Xr=T.value)==null||Xr.addLayer(ar),c.value.push({id:Wn.id,type:Wn.type_forme,layer:ar,properties:ar.properties}))})),await new Promise(Wn=>requestAnimationFrame(()=>setTimeout(Wn,0)))}}setTimeout(()=>{j(),m.value&&m.value.invalidateSize({animate:!1,pan:!1})},100)}}else console.error(`Plan ${Ot} introuvable aprs chargement`);B.value=!1}catch(Je){throw console.error("Erreur lors du rafrachissement de la carte:",Je),Je}}async function Ae(Ot){var Je;try{if(!s.getPlanById(Ot))try{await En.get(`/plans/${Ot}/`)}catch(_n){throw((Je=_n.response)==null?void 0:Je.status)===404&&(console.warn("[MapView][loadPlan] Plan non trouv - conservation de lastPlanId pour fallback"),R.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),de()),_n}await re(Ot),B.value=!1,mn()}catch(Ut){throw console.error("Erreur lors du chargement du plan:",Ut),R.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),de(),Ut}}async function Ge(){var Ot;if(!Y.value){if(!R.value||!T.value){console.warn("Aucun plan actif ou groupe de formes  sauvegarder");return}Y.value=!0,k.value="saving";try{const Je=[],Ut=new Set(o.getCurrentElements.filter(Lt=>Lt.id!==void 0).map(Lt=>Lt.id)),_n=new Set;T.value.eachLayer(Lt=>{var Wn,ar,Xr,sr,Fi,Gr,_o;let hn,Ln;const On={color:Lt.options.color||"#2b6451",weight:Lt.options.weight||3,opacity:Lt.options.opacity||1,fillColor:Lt.options.fillColor||"#2b6451",fillOpacity:Lt.options.fillOpacity||.2,dashArray:Lt.options.dashArray||""};if(Lt instanceof pn.Polyline&&!(Lt instanceof pn.Polygon)){hn="Line";const ir=Lt.getLatLngs(),gr=((Wn=Lt.properties)==null?void 0:Wn.category)||"forages",Ls=((ar=Lt.properties)==null?void 0:ar.accessLevel)||"visitor";Ln={points:ir.map(Ha=>[Ha.lng,Ha.lat]),name:((Xr=Lt.properties)==null?void 0:Xr.name)||"",category:gr,accessLevel:Ls,style:{...On,_accessLevel:Ls,accessLevel:Ls}}}else if(Lt instanceof pn.Polygon){hn="Polygon";const ir=Lt.getLatLngs()[0],gr=((sr=Lt.properties)==null?void 0:sr.category)||"forages",Ls=((Fi=Lt.properties)==null?void 0:Fi.accessLevel)||"visitor";Ln={points:ir.map(Ha=>[Ha.lng,Ha.lat]),name:((Gr=Lt.properties)==null?void 0:Gr.name)||"",category:gr,accessLevel:Ls,style:{...On,_accessLevel:Ls,accessLevel:Ls}}}else if(((_o=Lt.properties)==null?void 0:_o.type)==="Note"){const ir=Lt;if(ir._dbId&&typeof ir._dbId=="number"&&_n.add(ir._dbId),typeof ir.saveNote=="function")try{if(ir.properties&&(ir.properties.style||(ir.properties.style={}),ir.properties.accessLevel&&(ir.properties.style._accessLevel=ir.properties.accessLevel,ir.properties.style.accessLevel=ir.properties.accessLevel),ir.properties.style.color)){const gr=ir.properties.style.color;ir.properties.style.color=gr,ir.properties.style.fillColor=gr}R.value&&R.value.id?ir.saveNote(R.value.id):ir.saveNote()}catch(gr){console.error("[savePlan] Erreur lors de la sauvegarde de la note:",gr)}else console.warn("[savePlan] La note ne possde pas de mthode saveNote");hn=void 0,Ln=void 0}if(hn&&Ln){let ir=Lt._elementId;Lt._dbId&&(ir=Lt._dbId,typeof ir=="number"&&_n.add(ir)),Je.push({id:ir,type_forme:hn,data:Ln})}});const Xt=Array.from(Ut).filter(Lt=>!_n.has(Lt)),Fn=Je.filter(Lt=>!Lt.id||!Xt.includes(Lt.id));o.elements=Fn;const Wt=await o.saveToPlan(R.value.id,{elementsToDelete:Xt});if(Wt&&((Ot=R.value)!=null&&Ot.id)){const Lt=R.value.id;R.value={...R.value,...Wt},s.updatePlanDetails(Lt,Wt)}k.value="success",T.value&&T.value.eachLayer(Lt=>{var hn;((hn=Lt.properties)==null?void 0:hn.type)==="Note"&&typeof Lt.resetPlanSaveState=="function"&&Lt.resetPlanSaveState()}),setTimeout(()=>{k.value=null},3e3)}catch(Je){console.error("Erreur lors de la sauvegarde du plan:",Je),k.value=null}finally{Y.value=!1}}}Ru(()=>{U.user||Rt(),s.clearCurrentPlan(),o.clearCurrentPlan(),T.value&&T.value.off("note:edit"),window.removeEventListener("geonote:edit",()=>{}),window.removeEventListener("categoriesReactivated",()=>{}),window.removeEventListener("shapeTypesReactivated",()=>{}),window.removeEventListener("shape:created",()=>{}),window.removeEventListener("map-set-location",()=>{})});function tt(Ot){var Je;if(N(Ot),v.value&&((Je=v.value.properties)==null?void 0:Je.type)==="Note")if(typeof v.value.saveNote=="function")try{if(Ot.category&&(v.value.properties.category=Ot.category),Ot.accessLevel&&(v.value.properties.accessLevel=Ot.accessLevel,v.value.properties.style||(v.value.properties.style={}),v.value.properties.style._accessLevel=Ot.accessLevel,v.value.properties.style.accessLevel=Ot.accessLevel),v.value.properties.style&&v.value.properties.style.color){const Ut=v.value.properties.style.color;v.value.properties.style.color=Ut,v.value.properties.style.fillColor=Ut}R.value&&R.value.id?v.value.saveNote(R.value.id):v.value.saveNote(),v.value.bindPopup&&v.value.createPopupContent&&v.value.bindPopup(v.value.createPopupContent())}catch(Ut){console.error("[MapView][updateShapeProperties] Erreur lors de la sauvegarde de la note:",Ut)}else console.warn("[MapView][updateShapeProperties] La note ne possde pas de mthode saveNote");else if(Ot.category&&v.value&&v.value._dbId){const Ut=v.value._dbId,_n=o.elements.find(Xt=>Xt.id===Ut);if(_n){const Xt=_n;Xt.data||(Xt.data={}),Xt.data.category=Ot.category,o.$patch({unsavedChanges:!0})}}}function at(Ot){try{const Je=new Date(Ot);return isNaN(Je.getTime())?(console.error("Date invalide reue:",Ot),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(Je)}catch(Je){return console.error("Erreur lors du formatage de la date:",Je),"Date invalide"}}const ut=()=>{T.value&&j()},gt=async()=>{var Ot;if(v.value&&T.value){const Je=v.value._leaflet_id,Ut=v.value._dbId;if(((Ot=v.value.properties)==null?void 0:Ot.type)==="Note"&&Ut)try{await Xo.deleteNote(Ut),a.removeNote(Ut),l.success("Note supprime avec succs")}catch(Xt){console.error(`[MapView][deleteSelectedShape] Erreur lors de la suppression de la note ${Ut} du backend:`,Xt),l.error("Erreur lors de la suppression de la note")}S(""),T.value.removeLayer(v.value),c.value=c.value.filter(Xt=>Xt.layer&&Xt.layer._leaflet_id!==Je),v.value=null}};async function $t(Ot){await s.fetchPlans();const Je=s.getPlanById(Ot);Je?(localStorage.setItem("lastPlanId",Ot.toString()),R.value=Je,s.setCurrentPlan(Je),o.setCurrentPlan(Je.id),O.value=!1,mn()):console.error(`Plan ${Ot} introuvable aprs cration! Vrifiez les permissions.`)}li(Ie,async Ot=>{var Je;if(Ot&&((Je=U.user)==null?void 0:Je.user_type)==="admin"){ge.value=!0;try{const Ut=await U.fetchSalarieVisiteurs(Ot.id);ue.value=Array.isArray(Ut)?Ut:[Ut]}catch(Ut){console.error("[MapView][watch selectedSalarie] Error:",Ut),ue.value=[]}finally{ge.value=!1}}});function Rt(){localStorage.removeItem("lastPlanId")}const Gt=bt(!1),ln=NV.debounce(()=>{m.value&&fl(()=>{var Ot;try{if(m.value&&m.value.getContainer()&&document.body.contains(m.value.getContainer())){if(m.value.invalidateSize({animate:!1}),(Ot=T.value)!=null&&Ot.getLayers().length)try{j()}catch(Je){console.warn("[invalidateMapSize] Erreur lors de l'ajustement de la vue:",Je)}}else console.warn("[invalidateMapSize] Carte non valide pour l'invalidation")}catch(Je){console.warn("[invalidateMapSize] Erreur lors de l'invalidation de la taille de la carte:",Je)}})},250);function mn(){ln()}li(R,(Ot,Je)=>{Ot&&Ot.id!==(Je==null?void 0:Je.id)&&fl(()=>{mn()})});const yn=bt(null),Ze=bt(!1),it=bt([]),et=Hn(()=>yn.value?H.value.filter(Je=>{var Xt;const Ut=Je.entreprise;return(typeof Ut=="object"&&Ut!==null?Ut.id:Ut)===((Xt=yn.value)==null?void 0:Xt.id)}):[]);function Bt(Ot){if(!Ot)return"";const Je=Ot.first_name||"",Ut=Ot.last_name?Ot.last_name.toUpperCase():"",_n=Ot.company_name||Ot.role||"";return`${Je} ${Ut} (${_n})`}async function Zt(){Ze.value=!0;try{const Ot=await En.get("/users/",{params:{role:"ENTREPRISE"}});it.value=Ot.data}catch(Ot){console.error("[MapView] Error loading entreprises:",Ot),it.value=[]}finally{Ze.value=!1}}async function Sn(Ot){yn.value=Ot,oe.value=!0;try{const Je=await En.get("/users/",{params:{role:"SALARIE",entreprise:Ot.id}});H.value=Je.data}catch(Je){console.error("[MapView] Error loading salaries for entreprise:",Je),H.value=[]}finally{oe.value=!1}}function bn(){yn.value=null,Ie.value=null,te.value=null,H.value=[],ue.value=[],_e.value=[]}function xn(){Ie.value=null,te.value=null,ue.value=[],_e.value=[]}function zn(){te.value=null,_e.value=[]}async function vn(Ot){var Je;Ie.value=Ot,ge.value=!0;try{const Ut={role:"VISITEUR",salarie:Ot.id};U.isEntreprise?Ut.entreprise=(Je=U.user)==null?void 0:Je.id:yn.value&&(Ut.entreprise=yn.value.id);const _n=await En.get("/users/",{params:Ut});Array.isArray(_n.data)?(ue.value=_n.data,_n.data.forEach((Xt,Fn)=>{})):(console.warn("Format de rponse inattendu:",_n.data),ue.value=[]),ue.value.length===0&&console.warn("Aucun visiteur trouv pour ce salarie")}catch(Ut){if(console.error("ERREUR lors du chargement des visiteurs:",Ut),Ut&&typeof Ut=="object"&&"response"in Ut){const _n=Ut;console.error("Dtails de l'erreur:",{status:_n.response.status,data:_n.response.data})}ue.value=[]}finally{ge.value=!1}}function tn(){q.value=!1,K.value=null}function un(Ot){Z.value=Ot,F.value=!0}async function Xn(){var Ot,Je,Ut;if((Ot=Z.value)!=null&&Ot.id)try{const _n=Z.value.id,Xt={selectedClient:te.value,selectedSalarie:Ie.value,isNoVisiteurView:te.value&&te.value.id===-1};if(await s.deletePlan(_n),F.value=!1,Z.value=null,await new Promise(Fn=>setTimeout(Fn,50)),Xt.isNoVisiteurView)await Ci();else if(Xt.selectedClient){const Fn={visiteur:Xt.selectedClient.id};Xt.selectedSalarie&&(Fn.salarie=Xt.selectedSalarie.id),U.isEntreprise?Fn.entreprise=(Je=U.user)==null?void 0:Je.id:yn.value&&(Fn.entreprise=yn.value.id);const Wt=await En.get("/plans/",{params:Fn});_e.value=Wt.data}else await s.fetchPlans();((Ut=R.value)==null?void 0:Ut.id)===_n&&(R.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),de(),localStorage.removeItem("lastPlanId"))}catch(_n){console.error("Erreur lors de la suppression du plan:",_n),alert("Une erreur est survenue lors de la suppression du plan"),F.value=!1,Z.value=null}}function nr(){F.value=!1,Z.value=null}function ur(Ot){o.updateFilters(Ot),Rn(),setTimeout(()=>{Rn()},100)}function Rn(){if(!T.value)return;const Ot=[];c.value.forEach((Wt,Lt)=>{Wt.layer&&!Wt.id&&(!Wt.layer.properties||Wt.layer.properties&&!Wt.layer.properties.type)&&Ot.push(Lt)});for(let Wt=Ot.length-1;Wt>=0;Wt--)c.value.splice(Ot[Wt],1);({...o.filters.accessLevels},{...o.filters.categories}),{...o.filters.shapeTypes},o.elements.length,o.elements.map(Wt=>({id:Wt.id,type_forme:Wt.type_forme}));const Je=o.getFilteredElements,Ut=T.value.getLayers();Ut.map(Wt=>({_leaflet_id:Wt._leaflet_id,_dbId:Wt._dbId,hasProperties:!!Wt.properties,propertyType:Wt.properties?Wt.properties.type:null,category:Wt.properties?Wt.properties.category:null}));const _n=new Map;c.value.forEach(Wt=>{Wt.layer&&Wt.id&&_n.set(Wt.id,Wt.layer)});const Xt=new Map;Ut.forEach(Wt=>{Wt._dbId&&Xt.set(Wt,Wt._dbId)});const Fn=new Set(Je.map(Wt=>Wt.id));Array.from(Fn),Ut.forEach(Wt=>{const Lt=Wt._dbId;if(Wt._leaflet_id,!Lt){if(!Wt.properties)return;Wt._dbId=Date.now()+Math.floor(Math.random()*1e3)}const hn=Wt.properties||{},Ln=hn.type||Wt.type_forme||"";let On=hn.category;if(Wt._dbId){const ir=o.elements.find(gr=>gr.id===Wt._dbId);if(ir){const gr=ir.data;gr&&gr.category&&(On!==gr.category&&(On=gr.category),Wt.properties||(Wt.properties={}),Wt.properties.category=On)}}On||(On="default");const Wn=hn.accessLevel||"visitor";let ar=!1;Ln?ar=Ln in o.filters.shapeTypes&&o.filters.shapeTypes[Ln]===!0:ar=o.filters.shapeTypes.Polygon===!0;let Xr=!1;On&&On in o.filters.categories?Xr=o.filters.categories[On]===!0:Xr=o.filters.categories.forages===!0;let sr=!1;const Fi={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let Gr="visitor";Fi.company?Gr="company":Fi.employee?Gr="employee":Fi.visitor&&(Gr="visitor"),Gr==="company"?sr=!0:Gr==="employee"?sr=Wn==="employee"||Wn==="visitor":Gr==="visitor"&&(sr=Wn==="visitor"),ar&&Xr&&sr?T.value.hasLayer(Wt)||(On&&On!=="default"&&(!Wt.properties||!Wt.properties.category)&&(Wt.properties||(Wt.properties={}),Wt.properties.category=On),T.value.addLayer(Wt)):T.value.hasLayer(Wt)&&T.value.removeLayer(Wt)}),c.value.forEach(Wt=>{if(!Wt.layer)return;const Lt=Wt.layer;if(Lt._leaflet_id,Lt._dbId,T.value.hasLayer(Lt))return;const hn=Lt.properties||{},Ln=hn.type||Lt.type_forme||"";let On=null;if(Lt._dbId){const ir=o.elements.find(gr=>gr.id===Lt._dbId);if(ir){const gr=ir.data;gr&&gr.category&&(On=gr.category)}}!On&&hn.category&&(On=hn.category),On||(On="default");const Wn=hn.accessLevel||"visitor";if(Lt.properties||(Lt.properties={}),On&&On!=="default"&&(Lt.properties.category=On,Lt._dbId)){const ir=o.elements.find(gr=>gr.id===Lt._dbId);if(ir){const gr=ir;gr.data||(gr.data={}),gr.data.category!==On&&(gr.data.category=On,o.$patch({unsavedChanges:!0}))}}Lt.properties.accessLevel||(Lt.properties.accessLevel="visitor");let ar=!1;Ln?ar=Ln in o.filters.shapeTypes&&o.filters.shapeTypes[Ln]===!0:ar=o.filters.shapeTypes.Polygon===!0;let Xr=!1;if(On)if(On in o.filters.categories)Xr=o.filters.categories[On]===!0;else if(mE().getUniqueCategories.includes(On)){const Ls={...o.filters.categories};Ls[On]=!0,o.updateFilters({categories:Ls}),Xr=!0}else Xr=o.filters.categories.forages===!0;else Xr=o.filters.categories.forages===!0;let sr=!1;const Fi={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let Gr="visitor";if(Fi.company?Gr="company":Fi.employee?Gr="employee":Fi.visitor&&(Gr="visitor"),Gr==="company"?sr=!0:Gr==="employee"?sr=Wn==="employee"||Wn==="visitor":Gr==="visitor"&&(sr=Wn==="visitor"),ar&&Xr&&sr){if(On&&On!=="default"&&(Lt.properties||(Lt.properties={}),Lt.properties.category=On,Lt._dbId)){const ir=o.elements.find(gr=>gr.id===Lt._dbId);if(ir){const gr=ir;gr.data||(gr.data={}),gr.data.category!==On&&(gr.data.category=On,o.$patch({unsavedChanges:!0}))}}T.value.addLayer(Lt)}})}function Cr(Ot){if(T.value){const Ut=T.value.getLayers().find(_n=>_n._leaflet_id===Ot.id);Ut&&(Ut.properties.name=Ot.title,Ut.properties.description=Ot.description,Ut.properties.columnId=Ot.columnId,Ut.properties.accessLevel=Ot.accessLevel,Ut.properties.category||(Ut.properties.category="forages"),Ut.setNoteStyle({color:Ot.style.color,fillColor:Ot.style.fillColor,weight:Ot.style.weight,fillOpacity:Ot.style.fillOpacity,radius:Ot.style.radius}),Ut.closePopup(),Ut.unbindPopup(),Ut.bindPopup(Ut.createPopupContent()),a.notes.find(Xt=>Xt.id===Ot.id)?a.updateNote(Ot.id,{title:Ot.title,description:Ot.description,columnId:Ot.columnId,accessLevel:Ot.accessLevel,style:Ot.style,updatedAt:new Date().toISOString()}):a.addNote({title:Ot.title,description:Ot.description,location:[Ot.location[0],Ot.location[1]],columnId:Ot.columnId||"1",style:Ot.style,accessLevel:Ot.accessLevel}))}l.success("Note enregistre avec succs")}async function Ki(Ot){var Je;te.value=Ot,ve.value=!0;try{const Ut={visiteur:Ot.id};U.isEntreprise?Ut.entreprise=(Je=U.user)==null?void 0:Je.id:yn.value&&(Ut.entreprise=yn.value.id),Ie.value&&(Ut.salarie=Ie.value.id);const _n=await En.get("/plans/",{params:Ut});_e.value=_n.data}catch(Ut){console.error("[MapView] Error loading client plans:",Ut),_e.value=[]}finally{ve.value=!1}}async function Ci(){var Je;const Ot={id:-1,username:"sans_visiteur",first_name:"Sans",last_name:"Visiteur",company_name:"",role:"VISITEUR",display_name:"Plans sans visiteur"};te.value=Ot,ve.value=!0;try{const Ut={visiteur_null:!0};U.isEntreprise?Ut.entreprise=(Je=U.user)==null?void 0:Je.id:yn.value&&(Ut.entreprise=yn.value.id),Ie.value&&(Ut.salarie=Ie.value.id);const _n=await En.get("/plans/",{params:Ut});_e.value=_n.data}catch(Ut){console.error("[MapView] Error loading plans without visiteur:",Ut),_e.value=[]}finally{ve.value=!1}}async function Us(){var Ot;if(Ie.value=null,te.value=null,_e.value=[],U.isEntreprise){oe.value=!0;try{const Je=await En.get("/users/",{params:{role:"SALARIE",entreprise:(Ot=U.user)==null?void 0:Ot.id}});H.value=Je.data}catch(Je){console.error("[MapView][openLoadPlanModal] Erreur lors du chargement des salaris:",Je),H.value=[]}finally{oe.value=!1}}B.value=!0}const ss=bt(window.innerWidth<768);function Gn(){ss.value,ss.value=window.innerWidth<768}return(Ot,Je)=>{var Ut,_n,Xt,Fn,Wt;return Me(),De(gn,null,[E("div",BV,[E("div",RV,[Gt.value?(Me(),De("div",FV,Je[8]||(Je[8]=[dl('<div class="bg-white/90 rounded-2xl p-8 max-w-md shadow-2xl border border-gray-100"><div class="flex flex-col items-center"><div class="relative w-24 h-24 mb-6"><div class="absolute inset-0 border-4 border-primary-200 rounded-full"></div><div class="absolute inset-0 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"></div><div class="absolute inset-2 border-2 border-primary-400/30 rounded-full animate-pulse"></div><div class="absolute inset-0 flex items-center justify-center"><svg class="w-8 h-8 text-primary-600 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div><h3 class="text-xl font-semibold text-gray-900 mb-2"> Gnration de la synthse </h3><div class="space-y-2 text-center"><p class="text-primary-600 font-medium"> Capture des formes en cours... </p><p class="text-sm text-gray-500"> Nous optimisons la qualit de vos captures pour un rendu parfait </p></div></div></div>',1)]))):Ht("",!0),R.value?Ht("",!0):(Me(),De("div",jV,[E("div",zV,[Je[11]||(Je[11]=dl('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+O9+'" alt="TagMap Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur TagMap</h1><p class="text-gray-600 mb-8">Pour commencer  dessiner, vous devez d&#39;abord crer un nouveau plan ou charger un plan existant.</p>',3)),E("div",UV,[E("button",{onClick:Je[0]||(Je[0]=Lt=>O.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Je[9]||(Je[9]=[E("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Mr(" Crer un nouveau plan ")])),E("button",{onClick:Us,class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Je[10]||(Je[10]=[E("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),Mr(" Charger un plan existant ")]))])])])),Dn(E("div",$V,[E("div",VV,[R.value&&!Gt.value?(Me(),ho(aU,{key:0,"last-save":(Ut=R.value)!=null&&Ut.date_modification?new Date(R.value.date_modification):void 0,"plan-name":(_n=R.value)==null?void 0:_n.nom,"plan-description":(Xt=R.value)==null?void 0:Xt.description,"save-status":k.value,onChangeMapType:dn(he),onCreateNewPlan:Je[1]||(Je[1]=Lt=>O.value=!0),onLoadPlan:Us,onSavePlan:Ge,onAdjustView:ut,class:"flex-shrink-0"},null,8,["last-save","plan-name","plan-description","save-status","onChangeMapType"])):Ht("",!0),E("div",HV,[i.value&&R.value&&!Gt.value?(Me(),De("div",{key:0,onClick:ae,class:"md:hidden fixed inset-0 bg-black/30 z-[1800] transition-opacity duration-300"})):Ht("",!0),E("div",GV,[E("div",{ref_key:"mapContainer",ref:r,class:"absolute inset-0 z-[1000]"},null,512)]),R.value&&!Gt.value?(Me(),De(gn,{key:1},[ss.value?(Me(),ho(Zd,{key:0,to:"body"},[Kr(n5,{show:i.value,"onUpdate:show":Je[2]||(Je[2]=Lt=>i.value=Lt),"selected-tool":dn(p),"selected-shape":fe.value,"is-drawing":dn(X),onToolSelected:dn(S),onFilterChange:ur,onDeleteShape:gt,onPropertiesUpdate:tt,onStyleUpdate:dn(I),class:"md:w-80 md:flex-shrink-0"},null,8,["show","selected-tool","selected-shape","is-drawing","onToolSelected","onStyleUpdate"])])):(Me(),ho(n5,{key:1,show:i.value,"onUpdate:show":Je[3]||(Je[3]=Lt=>i.value=Lt),"selected-tool":dn(p),"selected-shape":fe.value,"is-drawing":dn(X),onToolSelected:dn(S),onFilterChange:ur,onDeleteShape:gt,onPropertiesUpdate:tt,onStyleUpdate:dn(I),class:"md:w-80 md:flex-shrink-0"},null,8,["show","selected-tool","selected-shape","is-drawing","onToolSelected","onStyleUpdate"]))],64)):Ht("",!0),R.value&&!Gt.value?(Me(),De("div",{key:2,class:"md:hidden fixed left-0 right-0 z-[1900] bg-white py-3 px-3 shadow-lg border-t border-gray-200 flex items-center justify-between cursor-pointer",style:{height:"var(--mobile-bottom-toolbar-height)",bottom:"0"},onClick:ae},Je[12]||(Je[12]=[dl('<div class="flex items-center w-full justify-center"><div class="flex items-center space-x-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg><span class="text-sm text-gray-500 font-medium">Outils</span></div></div>',1)]))):Ht("",!0)])]),Gt.value?(Me(),De("div",WV,Je[13]||(Je[13]=[dl('<div class="text-center"><div class="mb-4"><svg class="animate-spin h-10 w-10 mx-auto text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div><p class="text-lg font-medium text-gray-900">Gnration de la synthse en cours...</p><p class="text-sm text-gray-500 mt-2">Veuillez patienter pendant que nous analysons votre plan.</p></div>',1)]))):Ht("",!0)],512),[[v_,R.value]]),(Me(),ho(Zd,{to:"body"},[Kr(bE,{ref_key:"newPlanModalRef",ref:ye,modelValue:O.value,"onUpdate:modelValue":Je[4]||(Je[4]=Lt=>O.value=Lt),onCreated:$t,onSalarieSelected:Je[5]||(Je[5]=Lt=>Ie.value=Lt),onVisiteurSelected:Je[6]||(Je[6]=Lt=>ee.value=Lt)},null,8,["modelValue"])])),(Me(),ho(Zd,{to:"body"},[B.value?(Me(),De("div",qV,[E("div",YV,[E("div",KV,[Je[15]||(Je[15]=E("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),E("button",{onClick:Je[7]||(Je[7]=Lt=>B.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},Je[14]||(Je[14]=[E("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("div",ZV,[dn(U).isAdmin?(Me(),De("div",XV,[yn.value?Ie.value?te.value?(Me(),De("div",gH,[E("div",mH,[E("button",{onClick:zn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Je[31]||(Je[31]=[E("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Mr(" Retour  la liste des clients ")])),Je[32]||(Je[32]=E("span",{class:"mx-2 text-gray-400"},"|",-1)),E("span",vH,At(Bt(te.value)),1)]),Je[34]||(Je[34]=E("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),E("div",yH,[ve.value?(Me(),De(gn,{key:0},Vn(3,Lt=>E("div",{key:Lt,class:"animate-pulse"},Je[33]||(Je[33]=[E("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[E("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),E("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),E("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Me(!0),De(gn,{key:1},Vn(_e.value,Lt=>(Me(),De("div",{key:Lt.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[E("button",{onClick:hn=>Ae(Lt.id),class:"w-full text-left"},[E("div",_H,At(Lt.nom),1),E("div",wH,At(Lt.description),1),E("div",xH," Modifi le "+At(at(Lt.date_modification)),1)],8,bH),dn(U).isAdmin||dn(U).isEntreprise?(Me(),De("button",{key:0,onClick:pl(hn=>un(Lt),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,LH)):Ht("",!0)]))),128))])])):(Me(),De("div",lH,[E("div",uH,[E("button",{onClick:xn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Je[24]||(Je[24]=[E("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Mr(" Retour  la liste des salaries ")])),Je[25]||(Je[25]=E("span",{class:"mx-2 text-gray-400"},"|",-1)),E("span",cH,At(Bt(Ie.value)),1)]),Je[30]||(Je[30]=E("h3",{class:"font-medium text-gray-700"},"Slectionnez un visiteur",-1)),E("div",hH,[E("button",{onClick:Ci,class:"flex items-center p-3 text-left bg-primary-50 hover:bg-primary-100 rounded-lg border border-primary-200 transition-colors duration-200"},Je[26]||(Je[26]=[E("div",null,[E("div",{class:"font-medium text-primary-700"},"Plans sans visiteur"),E("div",{class:"text-xs text-primary-600"},"Afficher les plans crs sans visiteur associ")],-1),E("svg",{class:"w-5 h-5 ml-auto text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),ge.value?(Me(),De(gn,{key:0},Vn(3,Lt=>E("div",{key:Lt,class:"animate-pulse"},Je[27]||(Je[27]=[E("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[E("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),E("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Me(),De(gn,{key:1},[pe.value.length===0?(Me(),De("div",fH,Je[28]||(Je[28]=[E("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouv pour ce salarie",-1),E("div",{class:"text-sm text-gray-400"},` Vous pouvez utiliser l'option "Plans sans visiteur" ci-dessus `,-1)]))):(Me(!0),De(gn,{key:1},Vn(pe.value,Lt=>(Me(),De("button",{key:Lt.id,onClick:hn=>Ki(Lt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[E("div",null,[E("div",pH,At(Bt(Lt)),1)]),Je[29]||(Je[29]=E("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,dH))),128))],64))])])):(Me(),De("div",nH,[E("div",rH,[E("button",{onClick:bn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Je[19]||(Je[19]=[E("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Mr(" Retour  la liste des entreprises ")])),Je[20]||(Je[20]=E("span",{class:"mx-2 text-gray-400"},"|",-1)),E("span",iH,At(Bt(yn.value)),1)]),Je[23]||(Je[23]=E("h3",{class:"font-medium text-gray-700"},"Slectionnez un salarie",-1)),E("div",sH,[oe.value?(Me(),De(gn,{key:0},Vn(3,Lt=>E("div",{key:Lt,class:"animate-pulse"},Je[21]||(Je[21]=[E("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[E("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),E("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Me(!0),De(gn,{key:1},Vn(et.value,Lt=>(Me(),De("button",{key:Lt.id,onClick:hn=>vn(Lt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[E("div",null,[E("div",aH,At(Bt(Lt)),1)]),Je[22]||(Je[22]=E("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,oH))),128))])])):(Me(),De("div",JV,[Je[18]||(Je[18]=E("h3",{class:"font-medium text-gray-700"},"Slectionnez une entreprise",-1)),E("div",QV,[Ze.value?(Me(),De(gn,{key:0},Vn(3,Lt=>E("div",{key:Lt,class:"animate-pulse"},Je[16]||(Je[16]=[E("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[E("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),E("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Me(!0),De(gn,{key:1},Vn(it.value,Lt=>(Me(),De("button",{key:Lt.id,onClick:hn=>Sn(Lt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[E("div",null,[E("div",tH,At(Bt(Lt)),1)]),Je[17]||(Je[17]=E("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,eH))),128))])]))])):dn(U).isSalarie?(Me(),De("div",CH,[te.value?(Me(),De("div",AH,[E("div",TH,[E("button",{onClick:zn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Je[39]||(Je[39]=[E("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Mr(" Retour  la liste des clients ")])),Je[40]||(Je[40]=E("span",{class:"mx-2 text-gray-400"},"|",-1)),E("span",OH,At(Bt(te.value)),1)]),Je[42]||(Je[42]=E("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),E("div",DH,[ve.value?(Me(),De(gn,{key:0},Vn(3,Lt=>E("div",{key:Lt,class:"animate-pulse"},Je[41]||(Je[41]=[E("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[E("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),E("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),E("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Me(!0),De(gn,{key:1},Vn(_e.value,Lt=>(Me(),De("div",{key:Lt.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[E("button",{onClick:hn=>Ae(Lt.id),class:"w-full text-left"},[E("div",NH,At(Lt.nom),1),E("div",BH,At(Lt.description),1),E("div",RH," Modifi le "+At(at(Lt.date_modification)),1)],8,IH),dn(U).isAdmin||dn(U).isEntreprise?(Me(),De("button",{key:0,onClick:pl(hn=>un(Lt),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,FH)):Ht("",!0)]))),128))])])):(Me(),De("div",SH,[Je[38]||(Je[38]=E("h3",{class:"font-medium text-gray-700"},"Slectionnez un visiteur",-1)),E("div",EH,[ge.value?(Me(),De(gn,{key:0},Vn(3,Lt=>E("div",{key:Lt,class:"animate-pulse"},Je[35]||(Je[35]=[E("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[E("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),E("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Me(),De(gn,{key:1},[pe.value.length===0?(Me(),De("div",PH,Je[36]||(Je[36]=[E("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouv pour ce salarie",-1),E("div",{class:"text-sm text-gray-400"}," Veuillez vrifier que des visiteurs ont t assigns  ce salarie ",-1)]))):(Me(!0),De(gn,{key:1},Vn(pe.value,Lt=>(Me(),De("button",{key:Lt.id,onClick:hn=>Ki(Lt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[E("div",null,[E("div",MH,At(Bt(Lt)),1)]),Je[37]||(Je[37]=E("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,kH))),128))],64))])]))])):dn(U).isEntreprise?(Me(),De("div",jH,[Ie.value?te.value?(Me(),De("div",XH,[E("div",JH,[E("button",{onClick:zn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Je[53]||(Je[53]=[E("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Mr(" Retour  la liste des visiteurs ")])),Je[54]||(Je[54]=E("span",{class:"mx-2 text-gray-400"},"|",-1)),E("span",QH,At(Bt(te.value)),1)]),Je[56]||(Je[56]=E("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),E("div",eG,[ve.value?(Me(),De(gn,{key:0},Vn(3,Lt=>E("div",{key:Lt,class:"animate-pulse"},Je[55]||(Je[55]=[E("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[E("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),E("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),E("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Me(!0),De(gn,{key:1},Vn(_e.value,Lt=>(Me(),De("div",{key:Lt.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[E("button",{onClick:hn=>Ae(Lt.id),class:"w-full text-left"},[E("div",nG,At(Lt.nom),1),E("div",rG,At(Lt.description),1),E("div",iG," Modifi le "+At(at(Lt.date_modification)),1)],8,tG),dn(U).isAdmin||dn(U).isEntreprise?(Me(),De("button",{key:0,onClick:pl(hn=>un(Lt),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,sG)):Ht("",!0)]))),128))])])):(Me(),De("div",HH,[E("div",GH,[E("button",{onClick:xn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Je[46]||(Je[46]=[E("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Mr(" Retour  la liste des salaris ")])),Je[47]||(Je[47]=E("span",{class:"mx-2 text-gray-400"},"|",-1)),E("span",WH,At(Bt(Ie.value)),1)]),Je[52]||(Je[52]=E("h3",{class:"font-medium text-gray-700"},"Slectionnez un visiteur",-1)),E("div",qH,[E("button",{onClick:Ci,class:"flex items-center p-3 text-left bg-primary-50 hover:bg-primary-100 rounded-lg border border-primary-200 transition-colors duration-200"},Je[48]||(Je[48]=[E("div",null,[E("div",{class:"font-medium text-primary-700"},"Plans sans visiteur"),E("div",{class:"text-xs text-primary-600"},"Afficher les plans crs sans visiteur associ")],-1),E("svg",{class:"w-5 h-5 ml-auto text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),ge.value?(Me(),De(gn,{key:0},Vn(3,Lt=>E("div",{key:Lt,class:"animate-pulse"},Je[49]||(Je[49]=[E("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[E("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),E("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Me(),De(gn,{key:1},[pe.value.length===0?(Me(),De("div",YH,Je[50]||(Je[50]=[E("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouv pour ce salari",-1),E("div",{class:"text-sm text-gray-400"},` Vous pouvez utiliser l'option "Plans sans visiteur" ci-dessus `,-1)]))):(Me(!0),De(gn,{key:1},Vn(pe.value,Lt=>(Me(),De("button",{key:Lt.id,onClick:hn=>Ki(Lt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[E("div",null,[E("div",ZH,At(Bt(Lt)),1)]),Je[51]||(Je[51]=E("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,KH))),128))],64))])])):(Me(),De("div",zH,[Je[45]||(Je[45]=E("h3",{class:"font-medium text-gray-700"},"Slectionnez un salari",-1)),E("div",UH,[oe.value?(Me(),De(gn,{key:0},Vn(3,Lt=>E("div",{key:Lt,class:"animate-pulse"},Je[43]||(Je[43]=[E("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[E("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),E("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Me(!0),De(gn,{key:1},Vn(H.value,Lt=>(Me(),De("button",{key:Lt.id,onClick:hn=>vn(Lt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[E("div",null,[E("div",VH,At(Bt(Lt)),1)]),Je[44]||(Je[44]=E("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,$H))),128))])]))])):(Me(),De("div",oG,[dn(s).plans.length===0?(Me(),De("div",aG,Je[57]||(Je[57]=[E("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(Me(),De("div",lG,[(Me(!0),De(gn,null,Vn(dn(s).plans,Lt=>(Me(),De("div",{key:Lt.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[E("button",{onClick:hn=>Ae(Lt.id),class:"w-full text-left"},[E("div",cG,At(Lt.nom),1),E("div",hG,At(Lt.description),1),E("div",fG," Modifi le "+At(at(Lt.date_modification)),1)],8,uG),dn(U).isAdmin||dn(U).isEntreprise?(Me(),De("button",{key:0,onClick:pl(hn=>un(Lt),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,dG)):Ht("",!0)]))),128))]))]))])])])):Ht("",!0)])),(Me(),ho(Zd,{to:"body"},[F.value?(Me(),De("div",pG,[E("div",gG,[E("div",mG,[Je[58]||(Je[58]=E("svg",{class:"h-12 w-12 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),Je[59]||(Je[59]=E("h3",{class:"text-xl font-semibold text-gray-900"},"Supprimer le plan",-1)),E("p",vG,' tes-vous sr de vouloir supprimer le plan "'+At(Z.value?Z.value.nom:"")+'" ? Cette action est irrversible. ',1)]),E("div",{class:"flex justify-center space-x-4"},[E("button",{onClick:nr,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-300"}," Annuler "),E("button",{onClick:Xn,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500"}," Supprimer ")])])])):Ht("",!0)]))])]),(Me(),ho(Zd,{to:"body"},[q.value?(Me(),ho(vE,{key:0,note:K.value,"is-new-note":!((Fn=K.value)!=null&&Fn.id),location:(Wt=K.value)==null?void 0:Wt.location,onClose:tn,onSave:Cr},null,8,["note","is-new-note","location"])):Ht("",!0)]))],64)}}}),yG={class:"fixed inset-0 z-[3001] overflow-y-auto"},bG={class:"flex items-center justify-center min-h-screen w-full p-0"},_G={class:"relative bg-white w-full h-full max-h-full overflow-y-auto md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},wG={class:"p-4 md:p-6"},xG={class:"flex justify-between items-center mb-4 border-b pb-4"},LG={class:"text-xl font-semibold text-gray-900",id:"modal-headline"},CG={class:"mt-4"},SG={key:0,class:"mb-4 rounded-md bg-red-50 p-4"},EG={class:"flex"},PG={class:"ml-3"},kG={class:"text-sm font-medium text-red-800"},MG={key:0},AG={key:1},TG=["value"],OG={key:2},DG={key:3},IG=["value"],NG={key:4,class:"bg-blue-50 p-3 rounded-md mb-4"},BG={class:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-2"},RG={key:0,class:"mt-2 text-sm text-red-600"},FG={key:0,class:"mt-2 text-sm text-red-600"},jG={key:5},zG={class:"flex items-center"},UG={key:6,class:"border-t pt-4 mt-4"},$G={class:"mb-4"},VG={class:"mb-4"},HG={key:7},GG={key:8},WG={key:0,class:"mt-2 text-sm text-red-600"},qG={class:"flex justify-end space-x-3"},YG=["disabled"],KG={key:0,class:"mr-2"},ZG=hs({__name:"UserFormModal",props:{user:{type:Object,default:()=>({})},salaries:{type:Array,default:()=>[]},entreprises:{type:Array,default:()=>[]},isAdmin:{type:Boolean,default:!1},isEntreprise:{type:Boolean,default:!1},currentSalarie:{type:String,default:void 0},currentEntreprise:{type:String,default:void 0},apiErrors:{type:Array,default:()=>[]},refreshKey:{type:Number,default:0}},emits:["close","save","refresh"],setup(t,{emit:e}){const n=t,r=e,i=bt(!1),s=bt(""),o=bt(""),a=bt(""),l=bt(""),c=bt(""),f=mu({id:void 0,first_name:"",last_name:"",username:"",email:"",password:"",company_name:"",role:n.isEntreprise?"SALARIE":n.isAdmin?"ADMIN":"VISITEUR",salarie:null,entreprise:null,is_active:!0,storage_quota:50,storage_used:0,ecowitt_api_key:"",ecowitt_application_key:""});zs(()=>{var v;(v=n.user)!=null&&v.id?(f.id=n.user.id,f.first_name=n.user.first_name||"",f.last_name=n.user.last_name||"",f.username=n.user.username||"",f.email=n.user.email||"",f.company_name=n.user.company_name||"",f.role=n.user.role||"VISITEUR",f.is_active=n.user.is_active??!0,f.ecowitt_api_key=n.user.ecowitt_api_key||"",f.ecowitt_application_key=n.user.ecowitt_application_key||"",f.storage_quota=n.user.storage_quota||50,f.storage_used=n.user.storage_used||0,n.user.salarie?typeof n.user.salarie=="object"?f.salarie=n.user.salarie.id:f.salarie=n.user.salarie:n.user.salarie_id?f.salarie=n.user.salarie_id:n.currentSalarie&&(f.salarie=parseInt(n.currentSalarie)),n.user.entreprise?typeof n.user.entreprise=="object"?f.entreprise=n.user.entreprise.id:f.entreprise=n.user.entreprise:n.user.entreprise_id?f.entreprise=n.user.entreprise_id:n.currentEntreprise&&(f.entreprise=parseInt(n.currentEntreprise))):(n.currentSalarie&&(f.salarie=parseInt(n.currentSalarie)),n.currentEntreprise&&(f.entreprise=parseInt(n.currentEntreprise)),n.isEntreprise?f.role="SALARIE":n.isAdmin||(f.role="VISITEUR"))}),t0(()=>{f.role==="ADMIN"||f.role==="ENTREPRISE"?(f.salarie=null,f.entreprise=null):f.role==="SALARIE"&&(f.salarie=null,n.isEntreprise&&n.currentEntreprise&&(f.entreprise=parseInt(n.currentEntreprise)))}),t0(()=>{s.value="",o.value="",a.value="",l.value="",n.apiErrors&&n.apiErrors.length>0&&n.apiErrors.forEach(v=>{switch(v.field){case"email":s.value=v.message;break;case"username":o.value=v.message;break;case"password":a.value=v.message;break;case"non_field_error":default:l.value=v.message;break}})});async function p(){s.value="",o.value="",a.value="",l.value="";let v=!0;if(f.id||(f.password!==c.value?(a.value="Les mots de passe ne correspondent pas",v=!1):f.password.length<8&&(a.value="Le mot de passe doit contenir au moins 8 caractres",v=!1)),!!v){i.value=!0;try{const m={...f};f.id&&delete m.password,n.isEntreprise&&["SALARIE","VISITEUR"].includes(f.role)&&(m.entreprise_id=n.currentEntreprise?parseInt(n.currentEntreprise):void 0),m.salarie&&(m.salarie_id=m.salarie,delete m.salarie),n.currentSalarie&&f.role==="VISITEUR"&&(m.salarie_id=parseInt(n.currentSalarie)),await r("save",m),r("refresh")}catch(m){console.error("Erreur locale:",m)}finally{i.value=!1}}}return(v,m)=>(Me(),De("div",yG,[E("div",bG,[m[43]||(m[43]=E("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[E("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),E("div",_G,[E("div",null,[E("div",wG,[E("div",xG,[E("h3",LG,At(t.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),E("button",{type:"button",onClick:m[0]||(m[0]=C=>v.$emit("close")),class:"text-gray-400 hover:text-gray-500"},m[16]||(m[16]=[E("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("div",CG,[l.value?(Me(),De("div",SG,[E("div",EG,[m[17]||(m[17]=E("div",{class:"flex-shrink-0"},[E("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),E("div",PG,[E("h3",kG,At(l.value),1)])])])):Ht("",!0),E("form",{onSubmit:pl(p,["prevent"]),class:"space-y-6"},[t.isAdmin?(Me(),De("div",MG,[m[19]||(m[19]=E("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),Dn(E("select",{id:"role","onUpdate:modelValue":m[1]||(m[1]=C=>f.role=C),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},m[18]||(m[18]=[E("option",{value:"ADMIN"},"Administrateur",-1),E("option",{value:"ENTREPRISE"},"Entreprise",-1),E("option",{value:"SALARIE"},"Salarie",-1),E("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[Li,f.role]])])):Ht("",!0),t.isAdmin&&f.role==="SALARIE"?(Me(),De("div",AG,[m[21]||(m[21]=E("label",{for:"entreprise",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Dn(E("select",{id:"entreprise","onUpdate:modelValue":m[2]||(m[2]=C=>f.entreprise=C),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},[m[20]||(m[20]=E("option",{value:null},"-- Slectionner une entreprise --",-1)),(Me(!0),De(gn,null,Vn(t.entreprises,C=>(Me(),De("option",{key:C.id,value:C.id},At(C.first_name)+" "+At(C.last_name)+" ("+At(C.company_name||"Entreprise")+") ",9,TG))),128))],512),[[Li,f.entreprise]])])):Ht("",!0),t.isEntreprise&&!f.id?(Me(),De("div",OG,[m[23]||(m[23]=E("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),Dn(E("select",{id:"role","onUpdate:modelValue":m[3]||(m[3]=C=>f.role=C),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},m[22]||(m[22]=[E("option",{value:"SALARIE"},"Salarie",-1),E("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[Li,f.role]])])):Ht("",!0),(t.isAdmin||t.isEntreprise)&&f.role==="VISITEUR"&&!t.currentSalarie?(Me(),De("div",DG,[m[25]||(m[25]=E("label",{for:"salarie",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),Dn(E("select",{id:"salarie","onUpdate:modelValue":m[4]||(m[4]=C=>f.salarie=C),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},[m[24]||(m[24]=E("option",{value:null},"-- Slectionner un salarie --",-1)),(Me(!0),De(gn,null,Vn(t.salaries,C=>(Me(),De("option",{key:C.id,value:C.id},At(C.first_name)+" "+At(C.last_name)+" ("+At(C.company_name||"Salarie")+") ",9,IG))),128))],512),[[Li,f.salarie]])])):Ht("",!0),t.currentSalarie&&!t.isAdmin&&!t.isEntreprise?(Me(),De("div",NG,m[26]||(m[26]=[dl('<div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-blue-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div><div class="ml-3"><p class="text-sm text-blue-700"> Vous tes en train de crer un visiteur qui sera automatiquement associ  votre compte. </p></div></div>',1)]))):Ht("",!0),E("div",BG,[E("div",null,[m[27]||(m[27]=E("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prnom",-1)),Dn(E("input",{type:"text",id:"first_name","onUpdate:modelValue":m[5]||(m[5]=C=>f.first_name=C),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ai,f.first_name]])]),E("div",null,[m[28]||(m[28]=E("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),Dn(E("input",{type:"text",id:"last_name","onUpdate:modelValue":m[6]||(m[6]=C=>f.last_name=C),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ai,f.last_name]])])]),E("div",null,[m[29]||(m[29]=E("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),Dn(E("input",{type:"email",id:"email","onUpdate:modelValue":m[7]||(m[7]=C=>f.email=C),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ai,f.email]]),s.value?(Me(),De("div",RG,At(s.value),1)):Ht("",!0)]),E("div",null,[m[30]||(m[30]=E("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),Dn(E("input",{type:"text",id:"username","onUpdate:modelValue":m[8]||(m[8]=C=>f.username=C),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ai,f.username]]),o.value?(Me(),De("div",FG,At(o.value),1)):Ht("",!0)]),E("div",null,[m[31]||(m[31]=E("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Dn(E("input",{type:"text",id:"company_name","onUpdate:modelValue":m[9]||(m[9]=C=>f.company_name=C),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ai,f.company_name]])]),f.role==="ENTREPRISE"||f.role==="SALARIE"?(Me(),De("div",jG,[m[33]||(m[33]=E("label",{for:"storage_quota",class:"block text-sm font-medium text-gray-700"},"Quota de stockage (MB)",-1)),E("div",zG,[Dn(E("input",{type:"number",id:"storage_quota","onUpdate:modelValue":m[10]||(m[10]=C=>f.storage_quota=C),min:"1",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ai,f.storage_quota]]),m[32]||(m[32]=E("span",{class:"ml-2 text-sm text-gray-500"},"MB",-1))]),m[34]||(m[34]=E("p",{class:"mt-1 text-sm text-gray-500"},"Espace de stockage maximum pour les photos des notes",-1))])):Ht("",!0),f.role==="ENTREPRISE"?(Me(),De("div",UG,[m[39]||(m[39]=E("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Configuration API",-1)),E("div",$G,[m[35]||(m[35]=E("label",{for:"ecowitt_api_key",class:"block text-sm font-medium text-gray-700"},"Cl API Ecowitt",-1)),Dn(E("input",{type:"text",id:"ecowitt_api_key","onUpdate:modelValue":m[11]||(m[11]=C=>f.ecowitt_api_key=C),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Entrez la cl API Ecowitt"},null,512),[[ai,f.ecowitt_api_key]]),m[36]||(m[36]=E("p",{class:"mt-1 text-sm text-gray-500"},"Cl API pour accder aux services mto Ecowitt",-1))]),E("div",VG,[m[37]||(m[37]=E("label",{for:"ecowitt_application_key",class:"block text-sm font-medium text-gray-700"},"Cl d'application Ecowitt",-1)),Dn(E("input",{type:"text",id:"ecowitt_application_key","onUpdate:modelValue":m[12]||(m[12]=C=>f.ecowitt_application_key=C),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Entrez la cl d'application Ecowitt"},null,512),[[ai,f.ecowitt_application_key]]),m[38]||(m[38]=E("p",{class:"mt-1 text-sm text-gray-500"},"Cl d'application pour accder aux services mto Ecowitt",-1))])])):Ht("",!0),f.id?Ht("",!0):(Me(),De("div",HG,[m[40]||(m[40]=E("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),Dn(E("input",{type:"password",id:"password","onUpdate:modelValue":m[13]||(m[13]=C=>f.password=C),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ai,f.password]])])),f.id?Ht("",!0):(Me(),De("div",GG,[m[41]||(m[41]=E("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),Dn(E("input",{type:"password",id:"password_confirm","onUpdate:modelValue":m[14]||(m[14]=C=>c.value=C),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ai,c.value]]),a.value?(Me(),De("div",WG,At(a.value),1)):Ht("",!0)])),E("div",qG,[E("button",{type:"button",onClick:m[15]||(m[15]=C=>v.$emit("close")),class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Annuler "),E("button",{type:"submit",disabled:i.value,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[i.value?(Me(),De("span",KG,m[42]||(m[42]=[E("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[E("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),E("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):Ht("",!0),Mr(" "+At(f.id?"Enregistrer":"Crer"),1)],8,YG)])],32)])])])])])]))}}),XG={class:"fixed inset-0 z-[3001] overflow-y-auto"},JG={class:"flex items-center justify-center min-h-screen w-full"},QG={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},eW={class:"p-4 md:p-6"},tW={class:"flex items-start"},nW={class:"ml-4 flex-1"},rW={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},iW={class:"mt-2"},sW={class:"text-sm text-gray-500"},oW={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3"},UE=hs({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(t){return(e,n)=>(Me(),De("div",XG,[E("div",JG,[n[3]||(n[3]=E("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[E("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),E("div",QG,[E("div",eW,[E("div",tW,[n[2]||(n[2]=E("div",{class:"flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[E("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),E("div",nW,[E("h3",rW,At(t.title),1),E("div",iW,[E("p",sW,At(t.message),1)])])]),E("div",oW,[E("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm",onClick:n[0]||(n[0]=r=>e.$emit("confirm"))}," Confirmer "),E("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm",onClick:n[1]||(n[1]=r=>e.$emit("cancel"))}," Annuler ")])])])])]))}}),aW={class:"min-h-full bg-gray-50"},lW={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},uW={class:"flex justify-between items-center mb-8"},cW={class:"text-3xl font-extrabold text-gray-900"},hW={key:0},fW={key:1},dW={key:2},pW={key:0},gW={key:1},mW={key:2},vW={class:"bg-white shadow rounded-lg mb-6 p-4"},yW={class:"space-y-4"},bW={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},_W={key:0},wW={key:0,value:"ADMIN"},xW={key:1,value:"ENTREPRISE"},LW={key:1},CW=["value"],SW={key:2},EW=["value"],PW={class:"w-full"},kW={class:"bg-white shadow rounded-lg"},MW={class:"overflow-x-auto"},AW={class:"min-w-full divide-y divide-gray-200"},TW={class:"bg-gray-50"},OW={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},DW={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},IW={class:"bg-white divide-y divide-gray-200"},NW={key:0,class:"animate-pulse"},BW={key:1},RW={class:"px-6 py-4 whitespace-nowrap"},FW={class:"flex items-center"},jW={class:"flex-shrink-0 h-10 w-10"},zW={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},UW={class:"text-primary-600 font-medium"},$W={class:"ml-4"},VW={class:"text-sm font-medium text-gray-900"},HW={class:"text-sm text-gray-500"},GW={class:"px-6 py-4 whitespace-nowrap"},WW={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},qW={key:0,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},YW={key:1,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},KW={class:"px-6 py-4 whitespace-nowrap"},ZW={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},XW=["onClick"],JW=["onClick"],QW={key:0,class:"fixed inset-0 z-[3001] overflow-y-auto"},eq=hs({__name:"UserListView",setup(t){const e=eo(),n=Gl(),r=bt([]),i=bt([]),s=bt([]),o=bt(!1),a=bt(!1),l=bt(null),c=bt(null),f=bt(!0),p=bt([]),v=mu({role:"",search:"",salarie:"",entreprise:""}),m=Hn(()=>e.isAdmin),C=Hn(()=>e.isEntreprise),S=Hn(()=>e.isSalarie),I=Hn(()=>m.value?r.value.filter(F=>F.role==="SALARIE"):C.value?r.value.filter(F=>{var R,K;return F.role==="SALARIE"&&((R=F.entreprise)==null?void 0:R.id)===((K=e.user)==null?void 0:K.id)}):[]),N=Hn(()=>{let F=r.value;if(C.value&&(F=F.filter(R=>{var K,Z,Y,k,U;return R.role==="SALARIE"?((K=R.entreprise)==null?void 0:K.id)===((Z=e.user)==null?void 0:Z.id):R.role==="VISITEUR"?((k=(Y=R.salarie)==null?void 0:Y.entreprise)==null?void 0:k.id)===((U=e.user)==null?void 0:U.id):!1})),S.value&&(F=F.filter(R=>{var K,Z;return R.role==="VISITEUR"&&(R.salarie_id===((K=e.user)==null?void 0:K.id)||R.salarie&&R.salarie.id===((Z=e.user)==null?void 0:Z.id))})),(m.value||C.value)&&(v.role&&(F=F.filter(R=>R.role===v.role)),v.salarie&&(F=F.filter(R=>{var Z;const K=((Z=R.salarie)==null?void 0:Z.id)||R.salarie_id;return(K==null?void 0:K.toString())===v.salarie.toString()})),v.entreprise&&m.value&&(F=F.filter(R=>{var K,Z,Y,k,U;return R.role==="SALARIE"?((Z=(K=R.entreprise)==null?void 0:K.id)==null?void 0:Z.toString())===v.entreprise.toString():R.role==="VISITEUR"?((U=(k=(Y=R.salarie)==null?void 0:Y.entreprise)==null?void 0:k.id)==null?void 0:U.toString())===v.entreprise.toString():!1}))),v.search){const R=v.search.toLowerCase();F=F.filter(K=>{var Z,Y,k,U;return((Z=K.username)==null?void 0:Z.toLowerCase().includes(R))||((Y=K.email)==null?void 0:Y.toLowerCase().includes(R))||((k=K.first_name)==null?void 0:k.toLowerCase().includes(R))||((U=K.last_name)==null?void 0:U.toLowerCase().includes(R))||K.company_name&&K.company_name.toLowerCase().includes(R)})}return F});zs(async()=>{await T(),await j()});async function T(){var F,R,K;f.value=!0;try{if(m.value)r.value=await e.fetchUsers();else if(C.value){const[Z,Y]=await Promise.all([qm({role:"SALARIE",entrepriseId:(F=e.user)==null?void 0:F.id}),qm({role:"VISITEUR",entrepriseId:(R=e.user)==null?void 0:R.id})]);r.value=[...Z,...Y]}else S.value&&(r.value=await qm({role:"VISITEUR",salarieId:(K=e.user)==null?void 0:K.id,includeDetails:!0}))}catch(Z){console.error("Error fetching users:",Z),n.error("Erreur lors du chargement des utilisateurs")}finally{f.value=!1}}async function j(){var F,R;m.value?(s.value=await e.fetchEnterprises(),i.value=await e.fetchEntrepriseSalaries(((F=e.user)==null?void 0:F.id)||0)):C.value&&(i.value=await e.fetchEntrepriseSalaries(((R=e.user)==null?void 0:R.id)||0))}function W(){l.value=null,p.value=[],o.value=!0}function X(){o.value=!1,l.value=null,p.value=[]}function ce(F){l.value=F,p.value=[],o.value=!0}function he(F){c.value=F,a.value=!0}function O(F){return!!(m.value||C.value&&(F.role==="SALARIE"||F.role==="VISITEUR")||S.value&&F.role==="VISITEUR")}async function B(F){var R;try{p.value=[],l.value?(await e.updateUser(l.value.id,F),n.success("Utilisateur mis  jour avec succs")):(await e.createUser(F),n.success("Utilisateur cr avec succs")),o.value=!1,await T()}catch(K){(R=K.response)!=null&&R.data?p.value=bN(K.response.data):n.showError("Une erreur est survenue")}}async function q(){if(c.value)try{await e.deleteUser(c.value.id),n.showSuccess("Utilisateur supprim avec succs"),a.value=!1,await T()}catch{n.showError("Erreur lors de la suppression de l'utilisateur")}}return(F,R)=>{var K,Z,Y,k;return Me(),De("div",aW,[E("div",lW,[E("div",uW,[E("h1",cW,[m.value?(Me(),De("span",hW,"Gestion des utilisateurs")):C.value?(Me(),De("span",fW,"Gestion des salaries et visiteurs")):S.value?(Me(),De("span",dW,"Gestion des visiteurs")):Ht("",!0)]),E("button",{onClick:W,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[R[5]||(R[5]=E("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),m.value?(Me(),De("span",pW,"Nouvel utilisateur")):C.value?(Me(),De("span",gW,"Nouveau salarie/visiteur")):S.value?(Me(),De("span",mW,"Nouvel visiteur")):Ht("",!0)])]),E("div",vW,[E("div",yW,[E("div",bW,[m.value||C.value?(Me(),De("div",_W,[R[9]||(R[9]=E("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rle",-1)),Dn(E("select",{id:"role-filter","onUpdate:modelValue":R[0]||(R[0]=U=>v.role=U),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[R[6]||(R[6]=E("option",{value:""},"Tous les rles",-1)),m.value?(Me(),De("option",wW,"Administrateur")):Ht("",!0),m.value?(Me(),De("option",xW,"Entreprise")):Ht("",!0),R[7]||(R[7]=E("option",{value:"SALARIE"},"Salarie",-1)),R[8]||(R[8]=E("option",{value:"VISITEUR"},"Visiteur",-1))],512),[[Li,v.role]])])):Ht("",!0),m.value?(Me(),De("div",LW,[R[11]||(R[11]=E("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Dn(E("select",{id:"entreprise-filter","onUpdate:modelValue":R[1]||(R[1]=U=>v.entreprise=U),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[R[10]||(R[10]=E("option",{value:""},"Toutes les entreprises",-1)),(Me(!0),De(gn,null,Vn(s.value,U=>(Me(),De("option",{key:U.id,value:U.id},At(dn(hl)(U)),9,CW))),128))],512),[[Li,v.entreprise]])])):Ht("",!0),m.value||C.value?(Me(),De("div",SW,[R[13]||(R[13]=E("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),Dn(E("select",{id:"salarie-filter","onUpdate:modelValue":R[2]||(R[2]=U=>v.salarie=U),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[R[12]||(R[12]=E("option",{value:""},"Tous les salaries",-1)),(Me(!0),De(gn,null,Vn(I.value,U=>(Me(),De("option",{key:U.id,value:U.id},At(dn(hl)(U)),9,EW))),128))],512),[[Li,v.salarie]])])):Ht("",!0)]),E("div",PW,[R[14]||(R[14]=E("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),Dn(E("input",{type:"text",id:"search","onUpdate:modelValue":R[3]||(R[3]=U=>v.search=U),placeholder:"Rechercher par nom, email, entreprise...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[ai,v.search]])])])]),E("div",kW,[E("div",MW,[E("table",AW,[E("thead",TW,[E("tr",null,[R[15]||(R[15]=E("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Utilisateur ",-1)),R[16]||(R[16]=E("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rle ",-1)),R[17]||(R[17]=E("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),m.value||C.value?(Me(),De("th",OW," Entreprise ")):Ht("",!0),m.value||C.value?(Me(),De("th",DW," Salarie ")):Ht("",!0),R[18]||(R[18]=E("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),R[19]||(R[19]=E("th",{scope:"col",class:"relative px-6 py-3"},[E("span",{class:"sr-only"},"Actions")],-1))])]),E("tbody",IW,[f.value?(Me(),De("tr",NW,R[20]||(R[20]=[E("td",{colspan:"7",class:"py-4 px-6"},[E("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):N.value.length===0?(Me(),De("tr",BW,R[21]||(R[21]=[E("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun utilisateur trouv ",-1)]))):Ht("",!0),(Me(!0),De(gn,null,Vn(N.value,U=>{var H;return Me(),De("tr",{key:U.id},[E("td",RW,[E("div",FW,[E("div",jW,[E("div",zW,[E("span",UW,At(dn(wN)(U.first_name,U.last_name)),1)])]),E("div",$W,[E("div",VW,At(dn(hl)(U)),1),E("div",HW,At(U.username),1)])])]),E("td",GW,[E("span",{class:bi(dn(CN)())},At(dn(LN)(U.role)),3)]),E("td",WW,At(U.email),1),m.value||C.value?(Me(),De("td",qW,[U.role==="ENTREPRISE"?(Me(),De(gn,{key:0},[Mr(" - ")],64)):U.role==="SALARIE"?(Me(),De(gn,{key:1},[Mr(At(U.entreprise?dn(hl)(U.entreprise):"Non assign"),1)],64)):U.role==="VISITEUR"?(Me(),De(gn,{key:2},[Mr(At((H=U.salarie)!=null&&H.entreprise?dn(hl)(U.salarie.entreprise):"Non assign"),1)],64)):(Me(),De(gn,{key:3},[Mr(" - ")],64))])):Ht("",!0),m.value||C.value?(Me(),De("td",YW,[U.role==="ENTREPRISE"||U.role==="ADMIN"?(Me(),De(gn,{key:0},[Mr(" - ")],64)):U.role==="SALARIE"?(Me(),De(gn,{key:1},[Mr(" - ")],64)):(Me(),De(gn,{key:2},[Mr(At(U.salarie?dn(hl)(U.salarie):"Non assign"),1)],64))])):Ht("",!0),E("td",KW,[E("span",{class:bi(dn(SN)(U.is_active))},At(U.is_active?"Actif":"Inactif"),3)]),E("td",ZW,[E("button",{onClick:ue=>ce(U),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,XW),O(U)?(Me(),De("button",{key:0,onClick:ue=>he(U),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,JW)):Ht("",!0)])])}),128))])])])])]),o.value?(Me(),De("div",QW,[Kr(ZG,{user:l.value,salaries:i.value,entreprises:s.value,"is-admin":m.value,"is-entreprise":C.value,"current-salarie":S.value?(Z=(K=dn(e).user)==null?void 0:K.id)==null?void 0:Z.toString():void 0,"current-entreprise":C.value?(k=(Y=dn(e).user)==null?void 0:Y.id)==null?void 0:k.toString():void 0,"api-errors":p.value,onClose:X,onSave:B},null,8,["user","salaries","entreprises","is-admin","is-entreprise","current-salarie","current-entreprise","api-errors"])])):Ht("",!0),a.value?(Me(),ho(UE,{key:1,title:"Supprimer l'utilisateur",message:"tes-vous sr de vouloir supprimer cet utilisateur ? Cette action est irrversible.",onConfirm:q,onCancel:R[4]||(R[4]=U=>a.value=!1)})):Ht("",!0)])}}}),tq={class:"h-full bg-gray-50"},nq={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},rq={class:"sm:flex sm:items-center"},iq={class:"sm:flex-auto"},sq={class:"text-2xl font-semibold text-gray-900"},oq={class:"mt-2 text-sm text-gray-700"},aq={key:0,class:"mt-8"},lq={class:"mb-6"},uq=["value"],cq={class:"mb-6"},hq={value:null},fq=["value"],dq={key:0,class:"mb-6"},pq={value:null},gq=["value"],mq={key:1,class:"mt-8"},vq={class:"mb-6"},yq=["value"],bq={class:"mt-8"},_q={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},wq={class:"overflow-x-auto"},xq={class:"min-w-full divide-y divide-gray-300"},Lq={class:"bg-gray-50"},Cq={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"},Sq={class:"ml-2 flex-none rounded"},Eq={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},Pq={class:"ml-2 flex-none rounded"},kq={class:"divide-y divide-gray-200 bg-white"},Mq={key:0},Aq={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},Tq={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},Oq={class:"px-3 py-4 text-sm text-gray-900"},Dq={key:0,class:"flex items-center"},Iq={class:"h-8 w-8 flex-shrink-0"},Nq={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},Bq={class:"text-primary-700 font-medium text-sm"},Rq={class:"ml-3"},Fq={class:"font-medium"},jq={key:1,class:"text-gray-500"},zq={class:"px-3 py-4 text-sm text-gray-900"},Uq={key:0,class:"flex items-center"},$q={class:"h-8 w-8 flex-shrink-0"},Vq={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},Hq={class:"text-primary-700 font-medium text-sm"},Gq={class:"ml-3"},Wq={class:"font-medium"},qq={key:1,class:"text-gray-500"},Yq={class:"px-3 py-4 text-sm text-gray-900"},Kq={key:0,class:"flex items-center"},Zq={class:"h-8 w-8 flex-shrink-0"},Xq={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},Jq={class:"text-primary-700 font-medium text-sm"},Qq={class:"ml-3"},eY={class:"font-medium"},tY={key:1,class:"text-gray-500"},nY={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},rY={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},iY=["onClick"],sY=["onClick"],oY=["onClick"],aY={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},lY={class:"bg-white rounded-lg p-6 max-w-md w-full"},uY={class:"flex justify-between items-center mb-4"},cY=["disabled"],hY=["disabled"],fY={key:0,class:"space-y-4"},dY={key:0},pY=["disabled"],gY=["value"],mY=["disabled"],vY=["value"],yY={key:0,class:"mt-1 text-sm text-gray-500"},bY=["disabled"],_Y=["value"],wY={key:0,class:"mt-1 text-sm text-gray-500"},xY={key:1,class:"mt-4 bg-red-50 p-4 rounded-md"},LY={class:"flex"},CY={class:"ml-3"},SY={class:"text-sm font-medium text-red-800"},EY={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},PY=["disabled"],kY={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},MY=hs({__name:"PlansView",setup(t){const e=S0(),n=My(),r=eo(),i=bt([]),s=bt([]),o=bt([]),a=bt([]),l=bt(!1),c=bt(!1),f=bt(!1),p=bt(null),v=bt({nom:"",description:"",client:null}),m=bt({id:0,nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),C=bt(!1),S=bt(null),I=bt(null),N=bt(null),T=bt("date_modification"),j=bt("desc"),W=bt(null),X=Hn(()=>I.value?a.value.filter(pe=>typeof pe.salarie=="object"&&pe.salarie?pe.salarie.id===I.value:pe.salarie===I.value||pe.salarie_id===I.value):a.value),ce=Hn(()=>{let pe=i.value;return r.isAdmin?(W.value&&(pe=pe.filter($e=>{var Ne;return typeof $e.entreprise=="object"?((Ne=$e.entreprise)==null?void 0:Ne.id)===W.value:$e.entreprise===W.value})),I.value&&(pe=pe.filter($e=>{var Ne;return typeof $e.salarie=="object"?((Ne=$e.salarie)==null?void 0:Ne.id)===I.value:$e.salarie===I.value}),N.value&&(pe=pe.filter($e=>{var Ne;return typeof $e.visiteur=="object"?((Ne=$e.visiteur)==null?void 0:Ne.id)===N.value:$e.visiteur===N.value})))):r.isSalarie&&(pe=pe.filter($e=>{var Ne,ot,le;return typeof $e.salarie=="object"?((Ne=$e.salarie)==null?void 0:Ne.id)===((ot=r.user)==null?void 0:ot.id):$e.salarie===((le=r.user)==null?void 0:le.id)}),N.value&&(pe=pe.filter($e=>{var Ne;return typeof $e.visiteur=="object"?((Ne=$e.visiteur)==null?void 0:Ne.id)===N.value:$e.visiteur===N.value}))),[...pe].sort(($e,Ne)=>{if(T.value==="nom")return j.value==="asc"?$e.nom.localeCompare(Ne.nom):Ne.nom.localeCompare($e.nom);{const ot=new Date($e[T.value]).getTime(),le=new Date(Ne[T.value]).getTime();return j.value==="asc"?ot-le:le-ot}})}),he=Hn(()=>r.isAdmin?{title:"Tous les plans",description:"Liste complte des plans",plans:i.value}:r.isSalarie?{title:"Plans des visiteurs",description:"Plans o vous tes assign comme salarie",plans:i.value.filter(pe=>{var fe,$e,Ne;return typeof pe.salarie=="object"?((fe=pe.salarie)==null?void 0:fe.id)===(($e=r.user)==null?void 0:$e.id):pe.salarie===((Ne=r.user)==null?void 0:Ne.id)})}:{title:"Mes plans",description:"Plans qui vous sont assigns ou que vous avez crs",plans:i.value.filter(pe=>{var Ne,ot,le,ae;const fe=pe.createur.id===((Ne=r.user)==null?void 0:Ne.id);let $e=!1;return typeof pe.visiteur=="object"?$e=((ot=pe.visiteur)==null?void 0:ot.id)===((le=r.user)==null?void 0:le.id):$e=pe.visiteur===((ae=r.user)==null?void 0:ae.id),$e||fe})}),O=Hn(()=>W.value?s.value.filter(pe=>{var fe;return typeof pe.entreprise=="object"?((fe=pe.entreprise)==null?void 0:fe.id)===W.value:pe.entreprise_id===W.value}):s.value),B=Hn(()=>m.value.entreprise?s.value.filter(pe=>{var fe;return typeof pe.entreprise=="object"?((fe=pe.entreprise)==null?void 0:fe.id)===m.value.entreprise:pe.entreprise_id===m.value.entreprise}):[]),q=Hn(()=>!m.value.entreprise||!m.value.salarie?[]:a.value.filter(pe=>typeof pe.salarie=="object"&&pe.salarie?pe.salarie.id===m.value.salarie:pe.salarie===m.value.salarie||pe.salarie_id===m.value.salarie));zs(async()=>{var pe;await F(),r.isAdmin?await R():r.isSalarie&&await Z(((pe=r.user)==null?void 0:pe.id)||0)});async function F(){try{const pe=await n.fetchPlansWithDetails();i.value=pe.data}catch(pe){console.error("Erreur lors du chargement des plans:",pe)}}async function R(){try{o.value=await r.fetchEnterprises()}catch(pe){console.error("Erreur lors du chargement des entreprises:",pe)}}async function K(pe){try{if(pe===void 0){const fe=await r.fetchUsersByRole({role:"SALARIE"});s.value=fe}else s.value=await r.fetchEntrepriseSalaries(pe)}catch(fe){console.error("Erreur lors du chargement des salaries:",fe)}}async function Z(pe){try{const fe=await qm({role:"VISITEUR",salarieId:pe});a.value=fe.map($e=>({...$e,salarie_id:pe}))}catch(fe){console.error("Erreur lors du chargement des visiteurs:",fe)}}function Y(){l.value=!0,v.value={nom:"",description:"",client:null}}async function k(pe){try{n.setCurrentPlan(pe),localStorage.setItem("lastPlanId",pe.id.toString()),await e.push("/")}catch(fe){console.error("[PlansView][editPlan] ERREUR:",fe),fe instanceof Error&&console.error("[PlansView][editPlan] Stack trace:",fe.stack),alert("Une erreur est survenue lors du chargement du plan")}}async function U(pe){pe!=null&&pe.id&&(p.value=pe,f.value=!0)}async function H(){var pe,fe;if((pe=p.value)!=null&&pe.id)try{await n.deletePlan(p.value.id),await F(),((fe=n.currentPlan)==null?void 0:fe.id)===p.value.id&&n.clearCurrentPlan()}catch($e){console.error("Erreur lors de la suppression du plan:",$e),alert("Une erreur est survenue lors de la suppression du plan")}finally{f.value=!1,p.value=null}}function ue(){f.value=!1,p.value=null}function _e(pe){return new Date(pe).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function Ie(pe){if(!pe)return"";const fe=pe.first_name||"",$e=pe.last_name||"";return(fe.charAt(0)+$e.charAt(0)).toUpperCase()}async function ee(pe){C.value=!0,S.value=null;try{r.isAdmin&&!o.value.length&&await R();const fe=typeof pe.entreprise=="object"&&pe.entreprise?pe.entreprise.id:pe.entreprise,$e=typeof pe.salarie=="object"&&pe.salarie?pe.salarie.id:pe.salarie,Ne=typeof pe.visiteur=="object"&&pe.visiteur?pe.visiteur.id:pe.visiteur;m.value={id:pe.id,nom:pe.nom,description:pe.description,entreprise:fe||null,salarie:$e||null,visiteur:Ne||null},fe&&await K(fe),$e&&await Z($e),c.value=!0}catch(fe){console.error("Erreur lors de l'ouverture du modal:",fe),S.value="Erreur lors du chargement des donnes"}finally{C.value=!1}}async function te(){var pe,fe,$e,Ne,ot;S.value=null,C.value=!0;try{if(!m.value.nom.trim())throw new Error("Le nom du plan est requis");if(m.value.visiteur&&!m.value.salarie)throw new Error("Un salarie doit tre slectionn pour assigner un visiteur");if(m.value.salarie&&!m.value.entreprise)throw new Error("Une entreprise doit tre slectionne pour assigner un salarie");await n.updatePlanDetails(m.value.id,{nom:m.value.nom.trim(),description:m.value.description.trim(),entreprise_id:m.value.entreprise,salarie_id:m.value.salarie,visiteur_id:m.value.visiteur})&&(c.value=!1,await F())}catch(le){if(console.error("Erreur lors de la mise  jour du plan:",le),(fe=(pe=le.response)==null?void 0:pe.data)!=null&&fe.detail)S.value=le.response.data.detail;else if((Ne=($e=le.response)==null?void 0:$e.data)!=null&&Ne.non_field_errors)S.value=le.response.data.non_field_errors[0];else if((ot=le.response)!=null&&ot.data){const ae=Object.entries(le.response.data).map(([de,re])=>`${de}: ${Array.isArray(re)?re[0]:re}`);S.value=ae.join(`
`)}else S.value=le.message||"Une erreur est survenue lors de la mise  jour du plan"}finally{C.value=!1}}li(()=>W.value,async pe=>{I.value=null,N.value=null,pe?await K(pe):await K()}),li(()=>I.value,async pe=>{N.value=null,pe&&await Z(pe)}),li(()=>m.value.entreprise,async pe=>{pe===null?(m.value.salarie=null,m.value.visiteur=null):await K(pe)}),li(()=>m.value.salarie,async pe=>{m.value.visiteur=null,pe&&await Z(pe)});function oe(pe){var ot,le,ae;const fe=r.user;if(!fe)return!1;if(fe.user_type==="admin")return!0;if(fe.user_type==="entreprise")return typeof pe.entreprise=="object"?((ot=pe.entreprise)==null?void 0:ot.id)===fe.id:pe.entreprise===fe.id;if(fe.user_type==="salarie")return typeof pe.salarie=="object"?((le=pe.salarie)==null?void 0:le.id)===fe.id:pe.salarie===fe.id;const $e=pe.createur.id===fe.id;let Ne=!1;return typeof pe.visiteur=="object"?Ne=((ae=pe.visiteur)==null?void 0:ae.id)===fe.id:Ne=pe.visiteur===fe.id,Ne||$e}async function ge(pe){await F(),localStorage.setItem("lastPlanId",pe.toString()),e.push("/")}function ve(pe){T.value===pe?j.value=j.value==="asc"?"desc":"asc":(T.value=pe,j.value="desc")}function ye(pe){return pe?hl(pe):""}return(pe,fe)=>{var $e;return Me(),De("div",tq,[E("div",nq,[E("div",rq,[E("div",iq,[E("h1",sq,At(he.value.title),1),E("p",oq,At(he.value.description),1)]),E("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[E("button",{onClick:Y,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),dn(r).isAdmin?(Me(),De("div",aq,[E("div",lq,[fe[15]||(fe[15]=E("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par entreprise",-1)),Dn(E("select",{id:"entreprise-filter","onUpdate:modelValue":fe[0]||(fe[0]=Ne=>W.value=Ne),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[fe[14]||(fe[14]=E("option",{value:null},"Toutes les entreprises",-1)),(Me(!0),De(gn,null,Vn(o.value,Ne=>(Me(),De("option",{key:Ne.id,value:Ne.id},At(ye(Ne)),9,uq))),128))],512),[[Li,W.value]])]),E("div",cq,[fe[16]||(fe[16]=E("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par salarie",-1)),Dn(E("select",{id:"salarie-filter","onUpdate:modelValue":fe[1]||(fe[1]=Ne=>I.value=Ne),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[E("option",hq,At(O.value.length?"Tous les salaries":"Aucun salarie disponible"),1),(Me(!0),De(gn,null,Vn(O.value,Ne=>(Me(),De("option",{key:Ne.id,value:Ne.id},At(ye(Ne)),9,fq))),128))],512),[[Li,I.value]])]),I.value?(Me(),De("div",dq,[fe[17]||(fe[17]=E("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),Dn(E("select",{id:"visiteur-filter","onUpdate:modelValue":fe[2]||(fe[2]=Ne=>N.value=Ne),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[E("option",pq,At(X.value.length?"Tous les visiteurs":"Aucun visiteur disponible"),1),(Me(!0),De(gn,null,Vn(X.value,Ne=>(Me(),De("option",{key:Ne.id,value:Ne.id},At(ye(Ne)),9,gq))),128))],512),[[Li,N.value]])])):Ht("",!0)])):dn(r).isSalarie?(Me(),De("div",mq,[E("div",vq,[fe[19]||(fe[19]=E("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),Dn(E("select",{id:"visiteur-filter","onUpdate:modelValue":fe[3]||(fe[3]=Ne=>N.value=Ne),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[fe[18]||(fe[18]=E("option",{value:null},"Tous les visiteurs",-1)),(Me(!0),De(gn,null,Vn(a.value,Ne=>(Me(),De("option",{key:Ne.id,value:Ne.id},At(ye(Ne)),9,yq))),128))],512),[[Li,N.value]])])])):Ht("",!0),E("div",bq,[E("div",_q,[E("div",wq,[E("table",xq,[E("thead",Lq,[E("tr",null,[E("th",Cq,[E("button",{onClick:fe[4]||(fe[4]=Ne=>ve("nom")),class:"group inline-flex items-center"},[fe[21]||(fe[21]=Mr(" Nom ")),E("span",Sq,[(Me(),De("svg",{class:bi(["h-5 w-5",{"text-gray-900":T.value==="nom","text-gray-400":T.value!=="nom","rotate-180":T.value==="nom"&&j.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},fe[20]||(fe[20]=[E("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),fe[24]||(fe[24]=E("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),fe[25]||(fe[25]=E("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise ",-1)),fe[26]||(fe[26]=E("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Salarie ",-1)),fe[27]||(fe[27]=E("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Visiteur ",-1)),E("th",Eq,[E("button",{onClick:fe[5]||(fe[5]=Ne=>ve("date_modification")),class:"group inline-flex items-center"},[fe[23]||(fe[23]=Mr(" Dernire modification ")),E("span",Pq,[(Me(),De("svg",{class:bi(["h-5 w-5",{"text-gray-900":T.value==="date_modification","text-gray-400":T.value!=="date_modification","rotate-180":T.value==="date_modification"&&j.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},fe[22]||(fe[22]=[E("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),fe[28]||(fe[28]=E("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[E("span",{class:"sr-only"},"Actions")],-1))])]),E("tbody",kq,[ce.value.length===0?(Me(),De("tr",Mq,fe[29]||(fe[29]=[E("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun plan disponible ",-1)]))):Ht("",!0),(Me(!0),De(gn,null,Vn(ce.value,Ne=>(Me(),De("tr",{key:Ne.id,class:"hover:bg-gray-50"},[E("td",Aq,At(Ne.nom),1),E("td",Tq,At(Ne.description||"-"),1),E("td",Oq,[Ne.entreprise&&typeof Ne.entreprise=="object"?(Me(),De("div",Dq,[E("div",Iq,[E("div",Nq,[E("span",Bq,At(Ie(Ne.entreprise)),1)])]),E("div",Rq,[E("div",Fq,At(dn(hl)(Ne.entreprise)),1)])])):(Me(),De("div",jq," Non assign "))]),E("td",zq,[Ne.salarie&&typeof Ne.salarie=="object"?(Me(),De("div",Uq,[E("div",$q,[E("div",Vq,[E("span",Hq,At(Ie(Ne.salarie)),1)])]),E("div",Gq,[E("div",Wq,At(dn(hl)(Ne.salarie)),1)])])):(Me(),De("div",qq," Non assign "))]),E("td",Yq,[Ne.visiteur&&typeof Ne.visiteur=="object"?(Me(),De("div",Kq,[E("div",Zq,[E("div",Xq,[E("span",Jq,At(Ie(Ne.visiteur)),1)])]),E("div",Qq,[E("div",eY,At(dn(hl)(Ne.visiteur)),1)])])):(Me(),De("div",tY," Non assign "))]),E("td",nY,At(_e(Ne.date_modification)),1),E("td",rY,[E("button",{onClick:ot=>k(Ne),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,iY),E("button",{onClick:ot=>ee(Ne),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,sY),oe(Ne)?(Me(),De("button",{key:0,onClick:ot=>U(Ne),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,oY)):Ht("",!0)])]))),128))])])])])]),Kr(bE,{modelValue:l.value,"onUpdate:modelValue":fe[6]||(fe[6]=Ne=>l.value=Ne),salaries:s.value,clients:a.value,onCreated:ge},null,8,["modelValue","salaries","clients"]),c.value?(Me(),De("div",aY,[E("div",lY,[E("div",uY,[fe[31]||(fe[31]=E("h2",{class:"text-xl font-semibold text-gray-900"},"Modifier le plan",-1)),E("button",{onClick:fe[7]||(fe[7]=Ne=>c.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},fe[30]||(fe[30]=[E("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("form",{onSubmit:pl(te,["prevent"]),class:"space-y-4"},[E("div",null,[fe[32]||(fe[32]=E("label",{for:"edit-nom",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),Dn(E("input",{type:"text",id:"edit-nom","onUpdate:modelValue":fe[8]||(fe[8]=Ne=>m.value.nom=Ne),disabled:C.value,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",required:""},null,8,cY),[[ai,m.value.nom]])]),E("div",null,[fe[33]||(fe[33]=E("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),Dn(E("textarea",{id:"edit-description","onUpdate:modelValue":fe[9]||(fe[9]=Ne=>m.value.description=Ne),disabled:C.value,rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"},null,8,hY),[[ai,m.value.description]])]),dn(r).isAdmin||(($e=dn(r).user)==null?void 0:$e.user_type)==="entreprise"?(Me(),De("div",fY,[dn(r).isAdmin?(Me(),De("div",dY,[fe[35]||(fe[35]=E("label",{for:"edit-entreprise",class:"block text-sm font-medium text-gray-700"}," Entreprise ",-1)),Dn(E("select",{id:"edit-entreprise","onUpdate:modelValue":fe[10]||(fe[10]=Ne=>m.value.entreprise=Ne),disabled:C.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[fe[34]||(fe[34]=E("option",{value:null},"Slectionner une entreprise",-1)),(Me(!0),De(gn,null,Vn(o.value,Ne=>(Me(),De("option",{key:Ne.id,value:Ne.id},At(ye(Ne)),9,gY))),128))],8,pY),[[Li,m.value.entreprise]])])):Ht("",!0),E("div",null,[fe[37]||(fe[37]=E("label",{for:"edit-salarie",class:"block text-sm font-medium text-gray-700"}," Salarie ",-1)),Dn(E("select",{id:"edit-salarie","onUpdate:modelValue":fe[11]||(fe[11]=Ne=>m.value.salarie=Ne),disabled:dn(r).isAdmin&&!m.value.entreprise||C.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[fe[36]||(fe[36]=E("option",{value:null},"Slectionner un salarie",-1)),(Me(!0),De(gn,null,Vn(B.value,Ne=>(Me(),De("option",{key:Ne.id,value:Ne.id},At(ye(Ne)),9,vY))),128))],8,mY),[[Li,m.value.salarie]]),dn(r).isAdmin&&!m.value.entreprise?(Me(),De("p",yY," Veuillez d'abord slectionner une entreprise ")):Ht("",!0)]),E("div",null,[fe[39]||(fe[39]=E("label",{for:"edit-visiteur",class:"block text-sm font-medium text-gray-700"}," Visiteur ",-1)),Dn(E("select",{id:"edit-visiteur","onUpdate:modelValue":fe[12]||(fe[12]=Ne=>m.value.visiteur=Ne),disabled:!m.value.salarie||C.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[fe[38]||(fe[38]=E("option",{value:null},"Slectionner un visiteur",-1)),(Me(!0),De(gn,null,Vn(q.value,Ne=>(Me(),De("option",{key:Ne.id,value:Ne.id},At(ye(Ne)),9,_Y))),128))],8,bY),[[Li,m.value.visiteur]]),m.value.salarie?Ht("",!0):(Me(),De("p",wY," Veuillez d'abord slectionner un salarie "))])])):Ht("",!0),S.value?(Me(),De("div",xY,[E("div",LY,[fe[40]||(fe[40]=E("div",{class:"flex-shrink-0"},[E("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),E("div",CY,[E("p",SY,At(S.value),1)])])])):Ht("",!0),E("div",EY,[E("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:fe[13]||(fe[13]=Ne=>c.value=!1)}," Annuler "),E("button",{type:"submit",disabled:C.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm disabled:opacity-50"},[C.value?(Me(),De("svg",kY,fe[41]||(fe[41]=[E("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),E("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Ht("",!0),Mr(" "+At(C.value?"Enregistrement...":"Enregistrer"),1)],8,PY)])],32)])])):Ht("",!0),f.value?(Me(),ho(UE,{key:3,title:"Supprimer le plan",message:"tes-vous sr de vouloir supprimer ce plan ? Cette action est irrversible.",onConfirm:H,onCancel:ue})):Ht("",!0)])])}}});var $E={exports:{}};const AY=QS(RI);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function S5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S5(Object(n),!0).forEach(function(r){TY(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tv(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?tv=function(e){return typeof e}:tv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tv(t)}function TY(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zu(){return zu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zu.apply(this,arguments)}function OY(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function DY(t,e){if(t==null)return{};var n=OY(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function IY(t){return NY(t)||BY(t)||RY(t)||FY()}function NY(t){if(Array.isArray(t))return bb(t)}function BY(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function RY(t,e){if(t){if(typeof t=="string")return bb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bb(t,e)}}function bb(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function FY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var jY="1.14.0";function Mh(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Ih=Mh(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),E0=Mh(/Edge/i),E5=Mh(/firefox/i),Bg=Mh(/safari/i)&&!Mh(/chrome/i)&&!Mh(/android/i),VE=Mh(/iP(ad|od|hone)/i),zY=Mh(/chrome/i)&&Mh(/android/i),HE={capture:!1,passive:!1};function ui(t,e,n){t.addEventListener(e,n,!Ih&&HE)}function ei(t,e,n){t.removeEventListener(e,n,!Ih&&HE)}function zv(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function UY(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function uc(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&zv(t,e):zv(t,e))||r&&t===n)return t;if(t===n)break}while(t=UY(t))}return null}var P5=/\s+/g;function Rs(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(P5," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(P5," ")}}function Qn(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function sd(t,e){var n="";if(typeof t=="string")n=t;else do{var r=Qn(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function GE(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,s=r.length;if(n)for(;i<s;i++)n(r[i],i);return r}return[]}function Yc(){var t=document.scrollingElement;return t||document.documentElement}function ws(t,e,n,r,i){if(!(!t.getBoundingClientRect&&t!==window)){var s,o,a,l,c,f,p;if(t!==window&&t.parentNode&&t!==Yc()?(s=t.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,c=s.right,f=s.height,p=s.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,f=window.innerHeight,p=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!Ih))do if(i&&i.getBoundingClientRect&&(Qn(i,"transform")!=="none"||n&&Qn(i,"position")!=="static")){var v=i.getBoundingClientRect();o-=v.top+parseInt(Qn(i,"border-top-width")),a-=v.left+parseInt(Qn(i,"border-left-width")),l=o+s.height,c=a+s.width;break}while(i=i.parentNode);if(r&&t!==window){var m=sd(i||t),C=m&&m.a,S=m&&m.d;m&&(o/=S,a/=C,p/=C,f/=S,l=o+f,c=a+p)}return{top:o,left:a,bottom:l,right:c,width:p,height:f}}}function k5(t,e,n){for(var r=af(t,!0),i=ws(t)[e];r;){var s=ws(r)[n],o=void 0;if(o=i>=s,!o)return r;if(r===Yc())break;r=af(r,!1)}return!1}function xp(t,e,n,r){for(var i=0,s=0,o=t.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==wr.ghost&&(r||o[s]!==wr.dragged)&&uc(o[s],n.draggable,t,!1)){if(i===e)return o[s];i++}s++}return null}function O_(t,e){for(var n=t.lastElementChild;n&&(n===wr.ghost||Qn(n,"display")==="none"||e&&!zv(n,e));)n=n.previousElementSibling;return n||null}function Xs(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==wr.clone&&(!e||zv(t,e))&&n++;return n}function M5(t){var e=0,n=0,r=Yc();if(t)do{var i=sd(t),s=i.a,o=i.d;e+=t.scrollLeft*s,n+=t.scrollTop*o}while(t!==r&&(t=t.parentNode));return[e,n]}function $Y(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function af(t,e){if(!t||!t.getBoundingClientRect)return Yc();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=Qn(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Yc();if(r||e)return n;r=!0}}while(n=n.parentNode);return Yc()}function VY(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function X1(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Rg;function WE(t,e){return function(){if(!Rg){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),Rg=setTimeout(function(){Rg=void 0},e)}}}function HY(){clearTimeout(Rg),Rg=void 0}function qE(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function D_(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function A5(t,e){Qn(t,"position","absolute"),Qn(t,"top",e.top),Qn(t,"left",e.left),Qn(t,"width",e.width),Qn(t,"height",e.height)}function J1(t){Qn(t,"position",""),Qn(t,"top",""),Qn(t,"left",""),Qn(t,"width",""),Qn(t,"height","")}var za="Sortable"+new Date().getTime();function GY(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(Qn(i,"display")==="none"||i===wr.ghost)){t.push({target:i,rect:ws(i)});var s=Xc({},t[t.length-1].rect);if(i.thisAnimationDuration){var o=sd(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice($Y(t,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;t.forEach(function(a){var l=0,c=a.target,f=c.fromRect,p=ws(c),v=c.prevFromRect,m=c.prevToRect,C=a.rect,S=sd(c,!0);S&&(p.top-=S.f,p.left-=S.e),c.toRect=p,c.thisAnimationDuration&&X1(v,p)&&!X1(f,p)&&(C.top-p.top)/(C.left-p.left)===(f.top-p.top)/(f.left-p.left)&&(l=qY(C,v,m,i.options)),X1(p,f)||(c.prevFromRect=f,c.prevToRect=p,l||(l=i.options.animation),i.animate(c,C,p,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),t=[]},animate:function(r,i,s,o){if(o){Qn(r,"transition",""),Qn(r,"transform","");var a=sd(this.el),l=a&&a.a,c=a&&a.d,f=(i.left-s.left)/(l||1),p=(i.top-s.top)/(c||1);r.animatingX=!!f,r.animatingY=!!p,Qn(r,"transform","translate3d("+f+"px,"+p+"px,0)"),this.forRepaintDummy=WY(r),Qn(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),Qn(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){Qn(r,"transition",""),Qn(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function WY(t){return t.offsetWidth}function qY(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var $d=[],Q1={initializeByDefault:!0},P0={mount:function(e){for(var n in Q1)Q1.hasOwnProperty(n)&&!(n in e)&&(e[n]=Q1[n]);$d.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),$d.push(e)},pluginEvent:function(e,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=e+"Global";$d.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][s]&&n[o.pluginName][s](Xc({sortable:n},r)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](Xc({sortable:n},r)))})},initializePlugins:function(e,n,r,i){$d.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,n,e.options);c.sortable=e,c.options=e.options,e[l]=c,zu(r,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,n){var r={};return $d.forEach(function(i){typeof i.eventProperties=="function"&&zu(r,i.eventProperties.call(n[i.pluginName],e))}),r},modifyOption:function(e,n,r){var i;return $d.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(i=s.optionListeners[n].call(e[s.pluginName],r))}),i}};function dg(t){var e=t.sortable,n=t.rootEl,r=t.name,i=t.targetEl,s=t.cloneEl,o=t.toEl,a=t.fromEl,l=t.oldIndex,c=t.newIndex,f=t.oldDraggableIndex,p=t.newDraggableIndex,v=t.originalEvent,m=t.putSortable,C=t.extraEventProperties;if(e=e||n&&n[za],!!e){var S,I=e.options,N="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Ih&&!E0?S=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(S=document.createEvent("Event"),S.initEvent(r,!0,!0)),S.to=o||n,S.from=a||n,S.item=i||n,S.clone=s,S.oldIndex=l,S.newIndex=c,S.oldDraggableIndex=f,S.newDraggableIndex=p,S.originalEvent=v,S.pullMode=m?m.lastPutMode:void 0;var T=Xc(Xc({},C),P0.getEventProperties(r,e));for(var j in T)S[j]=T[j];n&&n.dispatchEvent(S),I[N]&&I[N].call(e,S)}}var YY=["evt"],Ol=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=DY(r,YY);P0.pluginEvent.bind(wr)(e,n,Xc({dragEl:Tn,parentEl:Ys,ghostEl:jr,rootEl:bs,nextEl:qf,lastDownEl:nv,cloneEl:Ks,cloneHidden:sf,dragStarted:pg,putSortable:fa,activeSortable:wr.active,originalEvent:i,oldIndex:rp,oldDraggableIndex:Fg,newIndex:uu,newDraggableIndex:rf,hideGhostForTarget:XE,unhideGhostForTarget:JE,cloneNowHidden:function(){sf=!0},cloneNowShown:function(){sf=!1},dispatchSortableEvent:function(a){sl({sortable:n,name:a,originalEvent:i})}},s))};function sl(t){dg(Xc({putSortable:fa,cloneEl:Ks,targetEl:Tn,rootEl:bs,oldIndex:rp,oldDraggableIndex:Fg,newIndex:uu,newDraggableIndex:rf},t))}var Tn,Ys,jr,bs,qf,nv,Ks,sf,rp,uu,Fg,rf,ym,fa,ep=!1,Uv=!1,$v=[],zf,oc,e2,t2,T5,O5,pg,Vd,jg,zg=!1,bm=!1,rv,Ia,n2=[],_b=!1,Vv=[],Dy=typeof document<"u",_m=VE,D5=E0||Ih?"cssFloat":"float",KY=Dy&&!zY&&!VE&&"draggable"in document.createElement("div"),YE=function(){if(Dy){if(Ih)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),KE=function(e,n){var r=Qn(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=xp(e,0,n),o=xp(e,1,n),a=s&&Qn(s),l=o&&Qn(o),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+ws(s).width,f=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+ws(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var p=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===p)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=i&&r[D5]==="none"||o&&r[D5]==="none"&&c+f>i)?"vertical":"horizontal"},ZY=function(e,n,r){var i=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,a=r?n.left:n.top,l=r?n.right:n.bottom,c=r?n.width:n.height;return i===a||s===l||i+o/2===a+c/2},XY=function(e,n){var r;return $v.some(function(i){var s=i[za].options.emptyInsertThreshold;if(!(!s||O_(i))){var o=ws(i),a=e>=o.left-s&&e<=o.right+s,l=n>=o.top-s&&n<=o.bottom+s;if(a&&l)return r=i}}),r},ZE=function(e){function n(s,o){return function(a,l,c,f){var p=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||p))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return n(s(a,l,c,f),o)(a,l,c,f);var v=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===v||s.join&&s.indexOf(v)>-1}}var r={},i=e.group;(!i||tv(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,e.group=r},XE=function(){!YE&&jr&&Qn(jr,"display","none")},JE=function(){!YE&&jr&&Qn(jr,"display","")};Dy&&document.addEventListener("click",function(t){if(Uv)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Uv=!1,!1},!0);var Uf=function(e){if(Tn){e=e.touches?e.touches[0]:e;var n=XY(e.clientX,e.clientY);if(n){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[za]._onDragOver(r)}}},JY=function(e){Tn&&Tn.parentNode[za]._isOutsideThisEl(e.target)};function wr(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=zu({},e),t[za]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return KE(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:wr.supportPointer!==!1&&"PointerEvent"in window&&!Bg,emptyInsertThreshold:5};P0.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);ZE(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:KY,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?ui(t,"pointerdown",this._onTapStart):(ui(t,"mousedown",this._onTapStart),ui(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(ui(t,"dragover",this),ui(t,"dragenter",this)),$v.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),zu(this,GY())}wr.prototype={constructor:wr,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Vd=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,Tn):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,r=this.el,i=this.options,s=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,f=i.filter;if(oK(r),!Tn&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Bg&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=uc(l,i.draggable,r,!1),!(l&&l.animated)&&nv!==l)){if(rp=Xs(l),Fg=Xs(l,i.draggable),typeof f=="function"){if(f.call(this,e,l,this)){sl({sortable:n,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),Ol("filter",n,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(f&&(f=f.split(",").some(function(p){if(p=uc(c,p.trim(),r,!1),p)return sl({sortable:n,rootEl:p,name:"filter",targetEl:l,fromEl:r,toEl:r}),Ol("filter",n,{evt:e}),!0}),f)){s&&e.cancelable&&e.preventDefault();return}i.handle&&!uc(c,i.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,n,r){var i=this,s=i.el,o=i.options,a=s.ownerDocument,l;if(r&&!Tn&&r.parentNode===s){var c=ws(r);if(bs=s,Tn=r,Ys=Tn.parentNode,qf=Tn.nextSibling,nv=r,ym=o.group,wr.dragged=Tn,zf={target:Tn,clientX:(n||e).clientX,clientY:(n||e).clientY},T5=zf.clientX-c.left,O5=zf.clientY-c.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,Tn.style["will-change"]="all",l=function(){if(Ol("delayEnded",i,{evt:e}),wr.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!E5&&i.nativeDraggable&&(Tn.draggable=!0),i._triggerDragStart(e,n),sl({sortable:i,name:"choose",originalEvent:e}),Rs(Tn,o.chosenClass,!0)},o.ignore.split(",").forEach(function(f){GE(Tn,f.trim(),r2)}),ui(a,"dragover",Uf),ui(a,"mousemove",Uf),ui(a,"touchmove",Uf),ui(a,"mouseup",i._onDrop),ui(a,"touchend",i._onDrop),ui(a,"touchcancel",i._onDrop),E5&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Tn.draggable=!0),Ol("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(E0||Ih))){if(wr.eventCanceled){this._onDrop();return}ui(a,"mouseup",i._disableDelayedDrag),ui(a,"touchend",i._disableDelayedDrag),ui(a,"touchcancel",i._disableDelayedDrag),ui(a,"mousemove",i._delayedDragTouchMoveHandler),ui(a,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&ui(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Tn&&r2(Tn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;ei(e,"mouseup",this._disableDelayedDrag),ei(e,"touchend",this._disableDelayedDrag),ei(e,"touchcancel",this._disableDelayedDrag),ei(e,"mousemove",this._delayedDragTouchMoveHandler),ei(e,"touchmove",this._delayedDragTouchMoveHandler),ei(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?ui(document,"pointermove",this._onTouchMove):n?ui(document,"touchmove",this._onTouchMove):ui(document,"mousemove",this._onTouchMove):(ui(Tn,"dragend",this),ui(bs,"dragstart",this._onDragStart));try{document.selection?iv(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(ep=!1,bs&&Tn){Ol("dragStarted",this,{evt:n}),this.nativeDraggable&&ui(document,"dragover",JY);var r=this.options;!e&&Rs(Tn,r.dragClass,!1),Rs(Tn,r.ghostClass,!0),wr.active=this,e&&this._appendGhost(),sl({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(oc){this._lastX=oc.clientX,this._lastY=oc.clientY,XE();for(var e=document.elementFromPoint(oc.clientX,oc.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(oc.clientX,oc.clientY),e!==n);)n=e;if(Tn.parentNode[za]._isOutsideThisEl(e),n)do{if(n[za]){var r=void 0;if(r=n[za]._onDragOver({clientX:oc.clientX,clientY:oc.clientY,target:e,rootEl:n}),r&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);JE()}},_onTouchMove:function(e){if(zf){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,s=e.touches?e.touches[0]:e,o=jr&&sd(jr,!0),a=jr&&o&&o.a,l=jr&&o&&o.d,c=_m&&Ia&&M5(Ia),f=(s.clientX-zf.clientX+i.x)/(a||1)+(c?c[0]-n2[0]:0)/(a||1),p=(s.clientY-zf.clientY+i.y)/(l||1)+(c?c[1]-n2[1]:0)/(l||1);if(!wr.active&&!ep){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(jr){o?(o.e+=f-(e2||0),o.f+=p-(t2||0)):o={a:1,b:0,c:0,d:1,e:f,f:p};var v="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");Qn(jr,"webkitTransform",v),Qn(jr,"mozTransform",v),Qn(jr,"msTransform",v),Qn(jr,"transform",v),e2=f,t2=p,oc=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!jr){var e=this.options.fallbackOnBody?document.body:bs,n=ws(Tn,!0,_m,!0,e),r=this.options;if(_m){for(Ia=e;Qn(Ia,"position")==="static"&&Qn(Ia,"transform")==="none"&&Ia!==document;)Ia=Ia.parentNode;Ia!==document.body&&Ia!==document.documentElement?(Ia===document&&(Ia=Yc()),n.top+=Ia.scrollTop,n.left+=Ia.scrollLeft):Ia=Yc(),n2=M5(Ia)}jr=Tn.cloneNode(!0),Rs(jr,r.ghostClass,!1),Rs(jr,r.fallbackClass,!0),Rs(jr,r.dragClass,!0),Qn(jr,"transition",""),Qn(jr,"transform",""),Qn(jr,"box-sizing","border-box"),Qn(jr,"margin",0),Qn(jr,"top",n.top),Qn(jr,"left",n.left),Qn(jr,"width",n.width),Qn(jr,"height",n.height),Qn(jr,"opacity","0.8"),Qn(jr,"position",_m?"absolute":"fixed"),Qn(jr,"zIndex","100000"),Qn(jr,"pointerEvents","none"),wr.ghost=jr,e.appendChild(jr),Qn(jr,"transform-origin",T5/parseInt(jr.style.width)*100+"% "+O5/parseInt(jr.style.height)*100+"%")}},_onDragStart:function(e,n){var r=this,i=e.dataTransfer,s=r.options;if(Ol("dragStart",this,{evt:e}),wr.eventCanceled){this._onDrop();return}Ol("setupClone",this),wr.eventCanceled||(Ks=D_(Tn),Ks.draggable=!1,Ks.style["will-change"]="",this._hideClone(),Rs(Ks,this.options.chosenClass,!1),wr.clone=Ks),r.cloneId=iv(function(){Ol("clone",r),!wr.eventCanceled&&(r.options.removeCloneOnHide||bs.insertBefore(Ks,Tn),r._hideClone(),sl({sortable:r,name:"clone"}))}),!n&&Rs(Tn,s.dragClass,!0),n?(Uv=!0,r._loopId=setInterval(r._emulateDragOver,50)):(ei(document,"mouseup",r._onDrop),ei(document,"touchend",r._onDrop),ei(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,Tn)),ui(document,"drop",r),Qn(Tn,"transform","translateZ(0)")),ep=!0,r._dragStartId=iv(r._dragStarted.bind(r,n,e)),ui(document,"selectstart",r),pg=!0,Bg&&Qn(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,r=e.target,i,s,o,a=this.options,l=a.group,c=wr.active,f=ym===l,p=a.sort,v=fa||c,m,C=this,S=!1;if(_b)return;function I(H,ue){Ol(H,C,Xc({evt:e,isOwner:f,axis:m?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:p,fromSortable:v,target:r,completed:T,onMove:function(Ie,ee){return wm(bs,n,Tn,i,Ie,ws(Ie),e,ee)},changed:j},ue))}function N(){I("dragOverAnimationCapture"),C.captureAnimationState(),C!==v&&v.captureAnimationState()}function T(H){return I("dragOverCompleted",{insertion:H}),H&&(f?c._hideClone():c._showClone(C),C!==v&&(Rs(Tn,fa?fa.options.ghostClass:c.options.ghostClass,!1),Rs(Tn,a.ghostClass,!0)),fa!==C&&C!==wr.active?fa=C:C===wr.active&&fa&&(fa=null),v===C&&(C._ignoreWhileAnimating=r),C.animateAll(function(){I("dragOverAnimationComplete"),C._ignoreWhileAnimating=null}),C!==v&&(v.animateAll(),v._ignoreWhileAnimating=null)),(r===Tn&&!Tn.animated||r===n&&!r.animated)&&(Vd=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(Tn.parentNode[za]._isOutsideThisEl(e.target),!H&&Uf(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),S=!0}function j(){uu=Xs(Tn),rf=Xs(Tn,a.draggable),sl({sortable:C,name:"change",toEl:n,newIndex:uu,newDraggableIndex:rf,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=uc(r,a.draggable,n,!0),I("dragOver"),wr.eventCanceled)return S;if(Tn.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||C._ignoreWhileAnimating===r)return T(!1);if(Uv=!1,c&&!a.disabled&&(f?p||(o=Ys!==bs):fa===this||(this.lastPutMode=ym.checkPull(this,c,Tn,e))&&l.checkPut(this,c,Tn,e))){if(m=this._getDirection(e,r)==="vertical",i=ws(Tn),I("dragOverValid"),wr.eventCanceled)return S;if(o)return Ys=bs,N(),this._hideClone(),I("revert"),wr.eventCanceled||(qf?bs.insertBefore(Tn,qf):bs.appendChild(Tn)),T(!0);var W=O_(n,a.draggable);if(!W||nK(e,m,this)&&!W.animated){if(W===Tn)return T(!1);if(W&&n===e.target&&(r=W),r&&(s=ws(r)),wm(bs,n,Tn,i,r,s,e,!!r)!==!1)return N(),n.appendChild(Tn),Ys=n,j(),T(!0)}else if(W&&tK(e,m,this)){var X=xp(n,0,a,!0);if(X===Tn)return T(!1);if(r=X,s=ws(r),wm(bs,n,Tn,i,r,s,e,!1)!==!1)return N(),n.insertBefore(Tn,X),Ys=n,j(),T(!0)}else if(r.parentNode===n){s=ws(r);var ce=0,he,O=Tn.parentNode!==n,B=!ZY(Tn.animated&&Tn.toRect||i,r.animated&&r.toRect||s,m),q=m?"top":"left",F=k5(r,"top","top")||k5(Tn,"top","top"),R=F?F.scrollTop:void 0;Vd!==r&&(he=s[q],zg=!1,bm=!B&&a.invertSwap||O),ce=rK(e,r,s,m,B?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,bm,Vd===r);var K;if(ce!==0){var Z=Xs(Tn);do Z-=ce,K=Ys.children[Z];while(K&&(Qn(K,"display")==="none"||K===jr))}if(ce===0||K===r)return T(!1);Vd=r,jg=ce;var Y=r.nextElementSibling,k=!1;k=ce===1;var U=wm(bs,n,Tn,i,r,s,e,k);if(U!==!1)return(U===1||U===-1)&&(k=U===1),_b=!0,setTimeout(eK,30),N(),k&&!Y?n.appendChild(Tn):r.parentNode.insertBefore(Tn,k?Y:r),F&&qE(F,0,R-F.scrollTop),Ys=Tn.parentNode,he!==void 0&&!bm&&(rv=Math.abs(he-ws(r)[q])),j(),T(!0)}if(n.contains(Tn))return T(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){ei(document,"mousemove",this._onTouchMove),ei(document,"touchmove",this._onTouchMove),ei(document,"pointermove",this._onTouchMove),ei(document,"dragover",Uf),ei(document,"mousemove",Uf),ei(document,"touchmove",Uf)},_offUpEvents:function(){var e=this.el.ownerDocument;ei(e,"mouseup",this._onDrop),ei(e,"touchend",this._onDrop),ei(e,"pointerup",this._onDrop),ei(e,"touchcancel",this._onDrop),ei(document,"selectstart",this)},_onDrop:function(e){var n=this.el,r=this.options;if(uu=Xs(Tn),rf=Xs(Tn,r.draggable),Ol("drop",this,{evt:e}),Ys=Tn&&Tn.parentNode,uu=Xs(Tn),rf=Xs(Tn,r.draggable),wr.eventCanceled){this._nulling();return}ep=!1,bm=!1,zg=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),wb(this.cloneId),wb(this._dragStartId),this.nativeDraggable&&(ei(document,"drop",this),ei(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Bg&&Qn(document.body,"user-select",""),Qn(Tn,"transform",""),e&&(pg&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),jr&&jr.parentNode&&jr.parentNode.removeChild(jr),(bs===Ys||fa&&fa.lastPutMode!=="clone")&&Ks&&Ks.parentNode&&Ks.parentNode.removeChild(Ks),Tn&&(this.nativeDraggable&&ei(Tn,"dragend",this),r2(Tn),Tn.style["will-change"]="",pg&&!ep&&Rs(Tn,fa?fa.options.ghostClass:this.options.ghostClass,!1),Rs(Tn,this.options.chosenClass,!1),sl({sortable:this,name:"unchoose",toEl:Ys,newIndex:null,newDraggableIndex:null,originalEvent:e}),bs!==Ys?(uu>=0&&(sl({rootEl:Ys,name:"add",toEl:Ys,fromEl:bs,originalEvent:e}),sl({sortable:this,name:"remove",toEl:Ys,originalEvent:e}),sl({rootEl:Ys,name:"sort",toEl:Ys,fromEl:bs,originalEvent:e}),sl({sortable:this,name:"sort",toEl:Ys,originalEvent:e})),fa&&fa.save()):uu!==rp&&uu>=0&&(sl({sortable:this,name:"update",toEl:Ys,originalEvent:e}),sl({sortable:this,name:"sort",toEl:Ys,originalEvent:e})),wr.active&&((uu==null||uu===-1)&&(uu=rp,rf=Fg),sl({sortable:this,name:"end",toEl:Ys,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Ol("nulling",this),bs=Tn=Ys=jr=qf=Ks=nv=sf=zf=oc=pg=uu=rf=rp=Fg=Vd=jg=fa=ym=wr.dragged=wr.ghost=wr.clone=wr.active=null,Vv.forEach(function(e){e.checked=!0}),Vv.length=e2=t2=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Tn&&(this._onDragOver(e),QY(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)n=r[i],uc(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||sK(n));return e},sort:function(e,n){var r={},i=this.el;this.toArray().forEach(function(s,o){var a=i.children[o];uc(a,this.options.draggable,i,!1)&&(r[s]=a)},this),n&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return uc(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var r=this.options;if(n===void 0)return r[e];var i=P0.modifyOption(this,e,n);typeof i<"u"?r[e]=i:r[e]=n,e==="group"&&ZE(r)},destroy:function(){Ol("destroy",this);var e=this.el;e[za]=null,ei(e,"mousedown",this._onTapStart),ei(e,"touchstart",this._onTapStart),ei(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(ei(e,"dragover",this),ei(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),$v.splice($v.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!sf){if(Ol("hideClone",this),wr.eventCanceled)return;Qn(Ks,"display","none"),this.options.removeCloneOnHide&&Ks.parentNode&&Ks.parentNode.removeChild(Ks),sf=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(sf){if(Ol("showClone",this),wr.eventCanceled)return;Tn.parentNode==bs&&!this.options.group.revertClone?bs.insertBefore(Ks,Tn):qf?bs.insertBefore(Ks,qf):bs.appendChild(Ks),this.options.group.revertClone&&this.animate(Tn,Ks),Qn(Ks,"display",""),sf=!1}}};function QY(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function wm(t,e,n,r,i,s,o,a){var l,c=t[za],f=c.options.onMove,p;return window.CustomEvent&&!Ih&&!E0?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=r,l.related=i||e,l.relatedRect=s||ws(e),l.willInsertAfter=a,l.originalEvent=o,t.dispatchEvent(l),f&&(p=f.call(c,l,o)),p}function r2(t){t.draggable=!1}function eK(){_b=!1}function tK(t,e,n){var r=ws(xp(n.el,0,n.options,!0)),i=10;return e?t.clientX<r.left-i||t.clientY<r.top&&t.clientX<r.right:t.clientY<r.top-i||t.clientY<r.bottom&&t.clientX<r.left}function nK(t,e,n){var r=ws(O_(n.el,n.options.draggable)),i=10;return e?t.clientX>r.right+i||t.clientX<=r.right&&t.clientY>r.bottom&&t.clientX>=r.left:t.clientX>r.right&&t.clientY>r.top||t.clientX<=r.right&&t.clientY>r.bottom+i}function rK(t,e,n,r,i,s,o,a){var l=r?t.clientY:t.clientX,c=r?n.height:n.width,f=r?n.top:n.left,p=r?n.bottom:n.right,v=!1;if(!o){if(a&&rv<c*i){if(!zg&&(jg===1?l>f+c*s/2:l<p-c*s/2)&&(zg=!0),zg)v=!0;else if(jg===1?l<f+rv:l>p-rv)return-jg}else if(l>f+c*(1-i)/2&&l<p-c*(1-i)/2)return iK(e)}return v=v||o,v&&(l<f+c*s/2||l>p-c*s/2)?l>f+c/2?1:-1:0}function iK(t){return Xs(Tn)<Xs(t)?1:-1}function sK(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function oK(t){Vv.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&Vv.push(r)}}function iv(t){return setTimeout(t,0)}function wb(t){return clearTimeout(t)}Dy&&ui(document,"touchmove",function(t){(wr.active||ep)&&t.cancelable&&t.preventDefault()});wr.utils={on:ui,off:ei,css:Qn,find:GE,is:function(e,n){return!!uc(e,n,e,!1)},extend:VY,throttle:WE,closest:uc,toggleClass:Rs,clone:D_,index:Xs,nextTick:iv,cancelNextTick:wb,detectDirection:KE,getChild:xp};wr.get=function(t){return t[za]};wr.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(wr.utils=Xc(Xc({},wr.utils),r.utils)),P0.mount(r)})};wr.create=function(t,e){return new wr(t,e)};wr.version=jY;var Po=[],gg,xb,Lb=!1,i2,s2,Hv,mg;function aK(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?ui(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ui(document,"pointermove",this._handleFallbackAutoScroll):r.touches?ui(document,"touchmove",this._handleFallbackAutoScroll):ui(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?ei(document,"dragover",this._handleAutoScroll):(ei(document,"pointermove",this._handleFallbackAutoScroll),ei(document,"touchmove",this._handleFallbackAutoScroll),ei(document,"mousemove",this._handleFallbackAutoScroll)),I5(),sv(),HY()},nulling:function(){Hv=xb=gg=Lb=mg=i2=s2=null,Po.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,s=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(s,o);if(Hv=n,r||this.options.forceAutoScrollFallback||E0||Ih||Bg){o2(n,this.options,a,r);var l=af(a,!0);Lb&&(!mg||s!==i2||o!==s2)&&(mg&&I5(),mg=setInterval(function(){var c=af(document.elementFromPoint(s,o),!0);c!==l&&(l=c,sv()),o2(n,i.options,c,r)},10),i2=s,s2=o)}else{if(!this.options.bubbleScroll||af(a,!0)===Yc()){sv();return}o2(n,this.options,af(a,!1),!1)}}},zu(t,{pluginName:"scroll",initializeByDefault:!0})}function sv(){Po.forEach(function(t){clearInterval(t.pid)}),Po=[]}function I5(){clearInterval(mg)}var o2=WE(function(t,e,n,r){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=Yc(),c=!1,f;xb!==n&&(xb=n,sv(),gg=e.scroll,f=e.scrollFn,gg===!0&&(gg=af(n,!0)));var p=0,v=gg;do{var m=v,C=ws(m),S=C.top,I=C.bottom,N=C.left,T=C.right,j=C.width,W=C.height,X=void 0,ce=void 0,he=m.scrollWidth,O=m.scrollHeight,B=Qn(m),q=m.scrollLeft,F=m.scrollTop;m===l?(X=j<he&&(B.overflowX==="auto"||B.overflowX==="scroll"||B.overflowX==="visible"),ce=W<O&&(B.overflowY==="auto"||B.overflowY==="scroll"||B.overflowY==="visible")):(X=j<he&&(B.overflowX==="auto"||B.overflowX==="scroll"),ce=W<O&&(B.overflowY==="auto"||B.overflowY==="scroll"));var R=X&&(Math.abs(T-i)<=o&&q+j<he)-(Math.abs(N-i)<=o&&!!q),K=ce&&(Math.abs(I-s)<=o&&F+W<O)-(Math.abs(S-s)<=o&&!!F);if(!Po[p])for(var Z=0;Z<=p;Z++)Po[Z]||(Po[Z]={});(Po[p].vx!=R||Po[p].vy!=K||Po[p].el!==m)&&(Po[p].el=m,Po[p].vx=R,Po[p].vy=K,clearInterval(Po[p].pid),(R!=0||K!=0)&&(c=!0,Po[p].pid=setInterval((function(){r&&this.layer===0&&wr.active._onTouchMove(Hv);var Y=Po[this.layer].vy?Po[this.layer].vy*a:0,k=Po[this.layer].vx?Po[this.layer].vx*a:0;typeof f=="function"&&f.call(wr.dragged.parentNode[za],k,Y,t,Hv,Po[this.layer].el)!=="continue"||qE(Po[this.layer].el,k,Y)}).bind({layer:p}),24))),p++}while(e.bubbleScroll&&v!==l&&(v=af(v,!1)));Lb=c}},30),QE=function(e){var n=e.originalEvent,r=e.putSortable,i=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var c=r||s;a();var f=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,p=document.elementFromPoint(f.clientX,f.clientY);l(),c&&!c.el.contains(p)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function I_(){}I_.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=xp(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:QE};zu(I_,{pluginName:"revertOnSpill"});function N_(){}N_.prototype={onSpill:function(e){var n=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:QE};zu(N_,{pluginName:"removeOnSpill"});var Ou;function lK(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(n){var r=n.dragEl;Ou=r},dragOverValid:function(n){var r=n.completed,i=n.target,s=n.onMove,o=n.activeSortable,a=n.changed,l=n.cancel;if(o.options.swap){var c=this.sortable.el,f=this.options;if(i&&i!==c){var p=Ou;s(i)!==!1?(Rs(i,f.swapClass,!0),Ou=i):Ou=null,p&&p!==Ou&&Rs(p,f.swapClass,!1)}a(),r(!0),l()}},drop:function(n){var r=n.activeSortable,i=n.putSortable,s=n.dragEl,o=i||this.sortable,a=this.options;Ou&&Rs(Ou,a.swapClass,!1),Ou&&(a.swap||i&&i.options.swap)&&s!==Ou&&(o.captureAnimationState(),o!==r&&r.captureAnimationState(),uK(s,Ou),o.animateAll(),o!==r&&r.animateAll())},nulling:function(){Ou=null}},zu(t,{pluginName:"swap",eventProperties:function(){return{swapItem:Ou}}})}function uK(t,e){var n=t.parentNode,r=e.parentNode,i,s;!n||!r||n.isEqualNode(e)||r.isEqualNode(t)||(i=Xs(t),s=Xs(e),n.isEqualNode(r)&&i<s&&s++,n.insertBefore(e,n.children[i]),r.insertBefore(t,r.children[s]))}var Tr=[],lu=[],Zp,ac,Xp=!1,Dl=!1,Hd=!1,es,Jp,xm;function cK(){function t(e){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));e.options.supportPointer?ui(document,"pointerup",this._deselectMultiDrag):(ui(document,"mouseup",this._deselectMultiDrag),ui(document,"touchend",this._deselectMultiDrag)),ui(document,"keydown",this._checkKeyDown),ui(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(i,s){var o="";Tr.length&&ac===e?Tr.forEach(function(a,l){o+=(l?", ":"")+a.textContent}):o=s.textContent,i.setData("Text",o)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var r=n.dragEl;es=r},delayEnded:function(){this.isMultiDrag=~Tr.indexOf(es)},setupClone:function(n){var r=n.sortable,i=n.cancel;if(this.isMultiDrag){for(var s=0;s<Tr.length;s++)lu.push(D_(Tr[s])),lu[s].sortableIndex=Tr[s].sortableIndex,lu[s].draggable=!1,lu[s].style["will-change"]="",Rs(lu[s],this.options.selectedClass,!1),Tr[s]===es&&Rs(lu[s],this.options.chosenClass,!1);r._hideClone(),i()}},clone:function(n){var r=n.sortable,i=n.rootEl,s=n.dispatchSortableEvent,o=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Tr.length&&ac===r&&(N5(!0,i),s("clone"),o()))},showClone:function(n){var r=n.cloneNowShown,i=n.rootEl,s=n.cancel;this.isMultiDrag&&(N5(!1,i),lu.forEach(function(o){Qn(o,"display","")}),r(),xm=!1,s())},hideClone:function(n){var r=this;n.sortable;var i=n.cloneNowHidden,s=n.cancel;this.isMultiDrag&&(lu.forEach(function(o){Qn(o,"display","none"),r.options.removeCloneOnHide&&o.parentNode&&o.parentNode.removeChild(o)}),i(),xm=!0,s())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&ac&&ac.multiDrag._deselectMultiDrag(),Tr.forEach(function(r){r.sortableIndex=Xs(r)}),Tr=Tr.sort(function(r,i){return r.sortableIndex-i.sortableIndex}),Hd=!0},dragStarted:function(n){var r=this,i=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){Tr.forEach(function(o){o!==es&&Qn(o,"position","absolute")});var s=ws(es,!1,!0,!0);Tr.forEach(function(o){o!==es&&A5(o,s)}),Dl=!0,Xp=!0}i.animateAll(function(){Dl=!1,Xp=!1,r.options.animation&&Tr.forEach(function(o){J1(o)}),r.options.sort&&Lm()})}},dragOver:function(n){var r=n.target,i=n.completed,s=n.cancel;Dl&&~Tr.indexOf(r)&&(i(!1),s())},revert:function(n){var r=n.fromSortable,i=n.rootEl,s=n.sortable,o=n.dragRect;Tr.length>1&&(Tr.forEach(function(a){s.addAnimationState({target:a,rect:Dl?ws(a):o}),J1(a),a.fromRect=o,r.removeAnimationState(a)}),Dl=!1,hK(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(n){var r=n.sortable,i=n.isOwner,s=n.insertion,o=n.activeSortable,a=n.parentEl,l=n.putSortable,c=this.options;if(s){if(i&&o._hideClone(),Xp=!1,c.animation&&Tr.length>1&&(Dl||!i&&!o.options.sort&&!l)){var f=ws(es,!1,!0,!0);Tr.forEach(function(v){v!==es&&(A5(v,f),a.appendChild(v))}),Dl=!0}if(!i)if(Dl||Lm(),Tr.length>1){var p=xm;o._showClone(r),o.options.animation&&!xm&&p&&lu.forEach(function(v){o.addAnimationState({target:v,rect:Jp}),v.fromRect=Jp,v.thisAnimationDuration=null})}else o._showClone(r)}},dragOverAnimationCapture:function(n){var r=n.dragRect,i=n.isOwner,s=n.activeSortable;if(Tr.forEach(function(a){a.thisAnimationDuration=null}),s.options.animation&&!i&&s.multiDrag.isMultiDrag){Jp=zu({},r);var o=sd(es,!0);Jp.top-=o.f,Jp.left-=o.e}},dragOverAnimationComplete:function(){Dl&&(Dl=!1,Lm())},drop:function(n){var r=n.originalEvent,i=n.rootEl,s=n.parentEl,o=n.sortable,a=n.dispatchSortableEvent,l=n.oldIndex,c=n.putSortable,f=c||this.sortable;if(r){var p=this.options,v=s.children;if(!Hd)if(p.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Rs(es,p.selectedClass,!~Tr.indexOf(es)),~Tr.indexOf(es))Tr.splice(Tr.indexOf(es),1),Zp=null,dg({sortable:o,rootEl:i,name:"deselect",targetEl:es});else{if(Tr.push(es),dg({sortable:o,rootEl:i,name:"select",targetEl:es}),r.shiftKey&&Zp&&o.el.contains(Zp)){var m=Xs(Zp),C=Xs(es);if(~m&&~C&&m!==C){var S,I;for(C>m?(I=m,S=C):(I=C,S=m+1);I<S;I++)~Tr.indexOf(v[I])||(Rs(v[I],p.selectedClass,!0),Tr.push(v[I]),dg({sortable:o,rootEl:i,name:"select",targetEl:v[I]}))}}else Zp=es;ac=f}if(Hd&&this.isMultiDrag){if(Dl=!1,(s[za].options.sort||s!==i)&&Tr.length>1){var N=ws(es),T=Xs(es,":not(."+this.options.selectedClass+")");if(!Xp&&p.animation&&(es.thisAnimationDuration=null),f.captureAnimationState(),!Xp&&(p.animation&&(es.fromRect=N,Tr.forEach(function(W){if(W.thisAnimationDuration=null,W!==es){var X=Dl?ws(W):N;W.fromRect=X,f.addAnimationState({target:W,rect:X})}})),Lm(),Tr.forEach(function(W){v[T]?s.insertBefore(W,v[T]):s.appendChild(W),T++}),l===Xs(es))){var j=!1;Tr.forEach(function(W){if(W.sortableIndex!==Xs(W)){j=!0;return}}),j&&a("update")}Tr.forEach(function(W){J1(W)}),f.animateAll()}ac=f}(i===s||c&&c.lastPutMode!=="clone")&&lu.forEach(function(W){W.parentNode&&W.parentNode.removeChild(W)})}},nullingGlobal:function(){this.isMultiDrag=Hd=!1,lu.length=0},destroyGlobal:function(){this._deselectMultiDrag(),ei(document,"pointerup",this._deselectMultiDrag),ei(document,"mouseup",this._deselectMultiDrag),ei(document,"touchend",this._deselectMultiDrag),ei(document,"keydown",this._checkKeyDown),ei(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof Hd<"u"&&Hd)&&ac===this.sortable&&!(n&&uc(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;Tr.length;){var r=Tr[0];Rs(r,this.options.selectedClass,!1),Tr.shift(),dg({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},zu(t,{pluginName:"multiDrag",utils:{select:function(n){var r=n.parentNode[za];!r||!r.options.multiDrag||~Tr.indexOf(n)||(ac&&ac!==r&&(ac.multiDrag._deselectMultiDrag(),ac=r),Rs(n,r.options.selectedClass,!0),Tr.push(n))},deselect:function(n){var r=n.parentNode[za],i=Tr.indexOf(n);!r||!r.options.multiDrag||!~i||(Rs(n,r.options.selectedClass,!1),Tr.splice(i,1))}},eventProperties:function(){var n=this,r=[],i=[];return Tr.forEach(function(s){r.push({multiDragElement:s,index:s.sortableIndex});var o;Dl&&s!==es?o=-1:Dl?o=Xs(s,":not(."+n.options.selectedClass+")"):o=Xs(s),i.push({multiDragElement:s,index:o})}),{items:IY(Tr),clones:[].concat(lu),oldIndicies:r,newIndicies:i}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function hK(t,e){Tr.forEach(function(n,r){var i=e.children[n.sortableIndex+(t?Number(r):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function N5(t,e){lu.forEach(function(n,r){var i=e.children[n.sortableIndex+(t?Number(r):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function Lm(){Tr.forEach(function(t){t!==es&&t.parentNode&&t.parentNode.removeChild(t)})}wr.mount(new aK);wr.mount(N_,I_);const fK=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:cK,Sortable:wr,Swap:lK,default:wr},Symbol.toStringTag,{value:"Module"})),dK=QS(fK);(function(t,e){(function(r,i){t.exports=i(AY,dK)})(typeof self<"u"?self:Jo,function(n,r){return function(i){var s={};function o(a){if(s[a])return s[a].exports;var l=s[a]={i:a,l:!1,exports:{}};return i[a].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=i,o.c=s,o.d=function(a,l,c){o.o(a,l)||Object.defineProperty(a,l,{enumerable:!0,get:c})},o.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,l){if(l&1&&(a=o(a)),l&8||l&4&&typeof a=="object"&&a&&a.__esModule)return a;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:a}),l&2&&typeof a!="string")for(var f in a)o.d(c,f,(function(p){return a[p]}).bind(null,f));return c},o.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(l,"a",l),l},o.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},o.p="",o(o.s="fb15")}({"00ee":function(i,s,o){var a=o("b622"),l=a("toStringTag"),c={};c[l]="z",i.exports=String(c)==="[object z]"},"0366":function(i,s,o){var a=o("1c0b");i.exports=function(l,c,f){if(a(l),c===void 0)return l;switch(f){case 0:return function(){return l.call(c)};case 1:return function(p){return l.call(c,p)};case 2:return function(p,v){return l.call(c,p,v)};case 3:return function(p,v,m){return l.call(c,p,v,m)}}return function(){return l.apply(c,arguments)}}},"057f":function(i,s,o){var a=o("fc6a"),l=o("241c").f,c={}.toString,f=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],p=function(v){try{return l(v)}catch{return f.slice()}};i.exports.f=function(m){return f&&c.call(m)=="[object Window]"?p(m):l(a(m))}},"06cf":function(i,s,o){var a=o("83ab"),l=o("d1e7"),c=o("5c6c"),f=o("fc6a"),p=o("c04e"),v=o("5135"),m=o("0cfb"),C=Object.getOwnPropertyDescriptor;s.f=a?C:function(I,N){if(I=f(I),N=p(N,!0),m)try{return C(I,N)}catch{}if(v(I,N))return c(!l.f.call(I,N),I[N])}},"0cfb":function(i,s,o){var a=o("83ab"),l=o("d039"),c=o("cc12");i.exports=!a&&!l(function(){return Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(i,s,o){var a=o("23e7"),l=o("d58f").left,c=o("a640"),f=o("ae40"),p=c("reduce"),v=f("reduce",{1:0});a({target:"Array",proto:!0,forced:!p||!v},{reduce:function(C){return l(this,C,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(i,s,o){var a=o("c6b6"),l=o("9263");i.exports=function(c,f){var p=c.exec;if(typeof p=="function"){var v=p.call(c,f);if(typeof v!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return v}if(a(c)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(c,f)}},"159b":function(i,s,o){var a=o("da84"),l=o("fdbc"),c=o("17c2"),f=o("9112");for(var p in l){var v=a[p],m=v&&v.prototype;if(m&&m.forEach!==c)try{f(m,"forEach",c)}catch{m.forEach=c}}},"17c2":function(i,s,o){var a=o("b727").forEach,l=o("a640"),c=o("ae40"),f=l("forEach"),p=c("forEach");i.exports=!f||!p?function(m){return a(this,m,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(i,s,o){var a=o("d066");i.exports=a("document","documentElement")},"1c0b":function(i,s){i.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},"1c7e":function(i,s,o){var a=o("b622"),l=a("iterator"),c=!1;try{var f=0,p={next:function(){return{done:!!f++}},return:function(){c=!0}};p[l]=function(){return this},Array.from(p,function(){throw 2})}catch{}i.exports=function(v,m){if(!m&&!c)return!1;var C=!1;try{var S={};S[l]=function(){return{next:function(){return{done:C=!0}}}},v(S)}catch{}return C}},"1d80":function(i,s){i.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},"1dde":function(i,s,o){var a=o("d039"),l=o("b622"),c=o("2d00"),f=l("species");i.exports=function(p){return c>=51||!a(function(){var v=[],m=v.constructor={};return m[f]=function(){return{foo:1}},v[p](Boolean).foo!==1})}},"23cb":function(i,s,o){var a=o("a691"),l=Math.max,c=Math.min;i.exports=function(f,p){var v=a(f);return v<0?l(v+p,0):c(v,p)}},"23e7":function(i,s,o){var a=o("da84"),l=o("06cf").f,c=o("9112"),f=o("6eeb"),p=o("ce4e"),v=o("e893"),m=o("94ca");i.exports=function(C,S){var I=C.target,N=C.global,T=C.stat,j,W,X,ce,he,O;if(N?W=a:T?W=a[I]||p(I,{}):W=(a[I]||{}).prototype,W)for(X in S){if(he=S[X],C.noTargetGet?(O=l(W,X),ce=O&&O.value):ce=W[X],j=m(N?X:I+(T?".":"#")+X,C.forced),!j&&ce!==void 0){if(typeof he==typeof ce)continue;v(he,ce)}(C.sham||ce&&ce.sham)&&c(he,"sham",!0),f(W,X,he,C)}}},"241c":function(i,s,o){var a=o("ca84"),l=o("7839"),c=l.concat("length","prototype");s.f=Object.getOwnPropertyNames||function(p){return a(p,c)}},"25f0":function(i,s,o){var a=o("6eeb"),l=o("825a"),c=o("d039"),f=o("ad6d"),p="toString",v=RegExp.prototype,m=v[p],C=c(function(){return m.call({source:"a",flags:"b"})!="/a/b"}),S=m.name!=p;(C||S)&&a(RegExp.prototype,p,function(){var N=l(this),T=String(N.source),j=N.flags,W=String(j===void 0&&N instanceof RegExp&&!("flags"in v)?f.call(N):j);return"/"+T+"/"+W},{unsafe:!0})},"2ca0":function(i,s,o){var a=o("23e7"),l=o("06cf").f,c=o("50c4"),f=o("5a34"),p=o("1d80"),v=o("ab13"),m=o("c430"),C="".startsWith,S=Math.min,I=v("startsWith"),N=!m&&!I&&!!function(){var T=l(String.prototype,"startsWith");return T&&!T.writable}();a({target:"String",proto:!0,forced:!N&&!I},{startsWith:function(j){var W=String(p(this));f(j);var X=c(S(arguments.length>1?arguments[1]:void 0,W.length)),ce=String(j);return C?C.call(W,ce,X):W.slice(X,X+ce.length)===ce}})},"2d00":function(i,s,o){var a=o("da84"),l=o("342f"),c=a.process,f=c&&c.versions,p=f&&f.v8,v,m;p?(v=p.split("."),m=v[0]+v[1]):l&&(v=l.match(/Edge\/(\d+)/),(!v||v[1]>=74)&&(v=l.match(/Chrome\/(\d+)/),v&&(m=v[1]))),i.exports=m&&+m},"342f":function(i,s,o){var a=o("d066");i.exports=a("navigator","userAgent")||""},"35a1":function(i,s,o){var a=o("f5df"),l=o("3f8c"),c=o("b622"),f=c("iterator");i.exports=function(p){if(p!=null)return p[f]||p["@@iterator"]||l[a(p)]}},"37e8":function(i,s,o){var a=o("83ab"),l=o("9bf2"),c=o("825a"),f=o("df75");i.exports=a?Object.defineProperties:function(v,m){c(v);for(var C=f(m),S=C.length,I=0,N;S>I;)l.f(v,N=C[I++],m[N]);return v}},"3bbe":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(i,s,o){var a=o("6547").charAt,l=o("69f3"),c=o("7dd0"),f="String Iterator",p=l.set,v=l.getterFor(f);c(String,"String",function(m){p(this,{type:f,string:String(m),index:0})},function(){var C=v(this),S=C.string,I=C.index,N;return I>=S.length?{value:void 0,done:!0}:(N=a(S,I),C.index+=N.length,{value:N,done:!1})})},"3f8c":function(i,s){i.exports={}},4160:function(i,s,o){var a=o("23e7"),l=o("17c2");a({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(i,s,o){var a=o("da84");i.exports=a},"44ad":function(i,s,o){var a=o("d039"),l=o("c6b6"),c="".split;i.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(f){return l(f)=="String"?c.call(f,""):Object(f)}:Object},"44d2":function(i,s,o){var a=o("b622"),l=o("7c73"),c=o("9bf2"),f=a("unscopables"),p=Array.prototype;p[f]==null&&c.f(p,f,{configurable:!0,value:l(null)}),i.exports=function(v){p[f][v]=!0}},"44e7":function(i,s,o){var a=o("861d"),l=o("c6b6"),c=o("b622"),f=c("match");i.exports=function(p){var v;return a(p)&&((v=p[f])!==void 0?!!v:l(p)=="RegExp")}},4930:function(i,s,o){var a=o("d039");i.exports=!!Object.getOwnPropertySymbols&&!a(function(){return!String(Symbol())})},"4d64":function(i,s,o){var a=o("fc6a"),l=o("50c4"),c=o("23cb"),f=function(p){return function(v,m,C){var S=a(v),I=l(S.length),N=c(C,I),T;if(p&&m!=m){for(;I>N;)if(T=S[N++],T!=T)return!0}else for(;I>N;N++)if((p||N in S)&&S[N]===m)return p||N||0;return!p&&-1}};i.exports={includes:f(!0),indexOf:f(!1)}},"4de4":function(i,s,o){var a=o("23e7"),l=o("b727").filter,c=o("1dde"),f=o("ae40"),p=c("filter"),v=f("filter");a({target:"Array",proto:!0,forced:!p||!v},{filter:function(C){return l(this,C,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(i,s,o){var a=o("0366"),l=o("7b0b"),c=o("9bdd"),f=o("e95a"),p=o("50c4"),v=o("8418"),m=o("35a1");i.exports=function(S){var I=l(S),N=typeof this=="function"?this:Array,T=arguments.length,j=T>1?arguments[1]:void 0,W=j!==void 0,X=m(I),ce=0,he,O,B,q,F,R;if(W&&(j=a(j,T>2?arguments[2]:void 0,2)),X!=null&&!(N==Array&&f(X)))for(q=X.call(I),F=q.next,O=new N;!(B=F.call(q)).done;ce++)R=W?c(q,j,[B.value,ce],!0):B.value,v(O,ce,R);else for(he=p(I.length),O=new N(he);he>ce;ce++)R=W?j(I[ce],ce):I[ce],v(O,ce,R);return O.length=ce,O}},"4fad":function(i,s,o){var a=o("23e7"),l=o("6f53").entries;a({target:"Object",stat:!0},{entries:function(f){return l(f)}})},"50c4":function(i,s,o){var a=o("a691"),l=Math.min;i.exports=function(c){return c>0?l(a(c),9007199254740991):0}},5135:function(i,s){var o={}.hasOwnProperty;i.exports=function(a,l){return o.call(a,l)}},5319:function(i,s,o){var a=o("d784"),l=o("825a"),c=o("7b0b"),f=o("50c4"),p=o("a691"),v=o("1d80"),m=o("8aa5"),C=o("14c3"),S=Math.max,I=Math.min,N=Math.floor,T=/\$([$&'`]|\d\d?|<[^>]*>)/g,j=/\$([$&'`]|\d\d?)/g,W=function(X){return X===void 0?X:String(X)};a("replace",2,function(X,ce,he,O){var B=O.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,q=O.REPLACE_KEEPS_$0,F=B?"$":"$0";return[function(Z,Y){var k=v(this),U=Z==null?void 0:Z[X];return U!==void 0?U.call(Z,k,Y):ce.call(String(k),Z,Y)},function(K,Z){if(!B&&q||typeof Z=="string"&&Z.indexOf(F)===-1){var Y=he(ce,K,this,Z);if(Y.done)return Y.value}var k=l(K),U=String(this),H=typeof Z=="function";H||(Z=String(Z));var ue=k.global;if(ue){var _e=k.unicode;k.lastIndex=0}for(var Ie=[];;){var ee=C(k,U);if(ee===null||(Ie.push(ee),!ue))break;var te=String(ee[0]);te===""&&(k.lastIndex=m(U,f(k.lastIndex),_e))}for(var oe="",ge=0,ve=0;ve<Ie.length;ve++){ee=Ie[ve];for(var ye=String(ee[0]),pe=S(I(p(ee.index),U.length),0),fe=[],$e=1;$e<ee.length;$e++)fe.push(W(ee[$e]));var Ne=ee.groups;if(H){var ot=[ye].concat(fe,pe,U);Ne!==void 0&&ot.push(Ne);var le=String(Z.apply(void 0,ot))}else le=R(ye,U,pe,fe,Ne,Z);pe>=ge&&(oe+=U.slice(ge,pe)+le,ge=pe+ye.length)}return oe+U.slice(ge)}];function R(K,Z,Y,k,U,H){var ue=Y+K.length,_e=k.length,Ie=j;return U!==void 0&&(U=c(U),Ie=T),ce.call(H,Ie,function(ee,te){var oe;switch(te.charAt(0)){case"$":return"$";case"&":return K;case"`":return Z.slice(0,Y);case"'":return Z.slice(ue);case"<":oe=U[te.slice(1,-1)];break;default:var ge=+te;if(ge===0)return ee;if(ge>_e){var ve=N(ge/10);return ve===0?ee:ve<=_e?k[ve-1]===void 0?te.charAt(1):k[ve-1]+te.charAt(1):ee}oe=k[ge-1]}return oe===void 0?"":oe})}})},5692:function(i,s,o){var a=o("c430"),l=o("c6cd");(i.exports=function(c,f){return l[c]||(l[c]=f!==void 0?f:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(i,s,o){var a=o("d066"),l=o("241c"),c=o("7418"),f=o("825a");i.exports=a("Reflect","ownKeys")||function(v){var m=l.f(f(v)),C=c.f;return C?m.concat(C(v)):m}},"5a34":function(i,s,o){var a=o("44e7");i.exports=function(l){if(a(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(i,s){i.exports=function(o,a){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:a}}},"5db7":function(i,s,o){var a=o("23e7"),l=o("a2bf"),c=o("7b0b"),f=o("50c4"),p=o("1c0b"),v=o("65f0");a({target:"Array",proto:!0},{flatMap:function(C){var S=c(this),I=f(S.length),N;return p(C),N=v(S,0),N.length=l(N,S,S,I,0,1,C,arguments.length>1?arguments[1]:void 0),N}})},6547:function(i,s,o){var a=o("a691"),l=o("1d80"),c=function(f){return function(p,v){var m=String(l(p)),C=a(v),S=m.length,I,N;return C<0||C>=S?f?"":void 0:(I=m.charCodeAt(C),I<55296||I>56319||C+1===S||(N=m.charCodeAt(C+1))<56320||N>57343?f?m.charAt(C):I:f?m.slice(C,C+2):(I-55296<<10)+(N-56320)+65536)}};i.exports={codeAt:c(!1),charAt:c(!0)}},"65f0":function(i,s,o){var a=o("861d"),l=o("e8b5"),c=o("b622"),f=c("species");i.exports=function(p,v){var m;return l(p)&&(m=p.constructor,typeof m=="function"&&(m===Array||l(m.prototype))?m=void 0:a(m)&&(m=m[f],m===null&&(m=void 0))),new(m===void 0?Array:m)(v===0?0:v)}},"69f3":function(i,s,o){var a=o("7f9a"),l=o("da84"),c=o("861d"),f=o("9112"),p=o("5135"),v=o("f772"),m=o("d012"),C=l.WeakMap,S,I,N,T=function(B){return N(B)?I(B):S(B,{})},j=function(B){return function(q){var F;if(!c(q)||(F=I(q)).type!==B)throw TypeError("Incompatible receiver, "+B+" required");return F}};if(a){var W=new C,X=W.get,ce=W.has,he=W.set;S=function(B,q){return he.call(W,B,q),q},I=function(B){return X.call(W,B)||{}},N=function(B){return ce.call(W,B)}}else{var O=v("state");m[O]=!0,S=function(B,q){return f(B,O,q),q},I=function(B){return p(B,O)?B[O]:{}},N=function(B){return p(B,O)}}i.exports={set:S,get:I,has:N,enforce:T,getterFor:j}},"6eeb":function(i,s,o){var a=o("da84"),l=o("9112"),c=o("5135"),f=o("ce4e"),p=o("8925"),v=o("69f3"),m=v.get,C=v.enforce,S=String(String).split("String");(i.exports=function(I,N,T,j){var W=j?!!j.unsafe:!1,X=j?!!j.enumerable:!1,ce=j?!!j.noTargetGet:!1;if(typeof T=="function"&&(typeof N=="string"&&!c(T,"name")&&l(T,"name",N),C(T).source=S.join(typeof N=="string"?N:"")),I===a){X?I[N]=T:f(N,T);return}else W?!ce&&I[N]&&(X=!0):delete I[N];X?I[N]=T:l(I,N,T)})(Function.prototype,"toString",function(){return typeof this=="function"&&m(this).source||p(this)})},"6f53":function(i,s,o){var a=o("83ab"),l=o("df75"),c=o("fc6a"),f=o("d1e7").f,p=function(v){return function(m){for(var C=c(m),S=l(C),I=S.length,N=0,T=[],j;I>N;)j=S[N++],(!a||f.call(C,j))&&T.push(v?[j,C[j]]:C[j]);return T}};i.exports={entries:p(!0),values:p(!1)}},"73d9":function(i,s,o){var a=o("44d2");a("flatMap")},7418:function(i,s){s.f=Object.getOwnPropertySymbols},"746f":function(i,s,o){var a=o("428f"),l=o("5135"),c=o("e538"),f=o("9bf2").f;i.exports=function(p){var v=a.Symbol||(a.Symbol={});l(v,p)||f(v,p,{value:c.f(p)})}},7839:function(i,s){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(i,s,o){var a=o("1d80");i.exports=function(l){return Object(a(l))}},"7c73":function(i,s,o){var a=o("825a"),l=o("37e8"),c=o("7839"),f=o("d012"),p=o("1be4"),v=o("cc12"),m=o("f772"),C=">",S="<",I="prototype",N="script",T=m("IE_PROTO"),j=function(){},W=function(B){return S+N+C+B+S+"/"+N+C},X=function(B){B.write(W("")),B.close();var q=B.parentWindow.Object;return B=null,q},ce=function(){var B=v("iframe"),q="java"+N+":",F;return B.style.display="none",p.appendChild(B),B.src=String(q),F=B.contentWindow.document,F.open(),F.write(W("document.F=Object")),F.close(),F.F},he,O=function(){try{he=document.domain&&new ActiveXObject("htmlfile")}catch{}O=he?X(he):ce();for(var B=c.length;B--;)delete O[I][c[B]];return O()};f[T]=!0,i.exports=Object.create||function(q,F){var R;return q!==null?(j[I]=a(q),R=new j,j[I]=null,R[T]=q):R=O(),F===void 0?R:l(R,F)}},"7dd0":function(i,s,o){var a=o("23e7"),l=o("9ed3"),c=o("e163"),f=o("d2bb"),p=o("d44e"),v=o("9112"),m=o("6eeb"),C=o("b622"),S=o("c430"),I=o("3f8c"),N=o("ae93"),T=N.IteratorPrototype,j=N.BUGGY_SAFARI_ITERATORS,W=C("iterator"),X="keys",ce="values",he="entries",O=function(){return this};i.exports=function(B,q,F,R,K,Z,Y){l(F,q,R);var k=function(ve){if(ve===K&&Ie)return Ie;if(!j&&ve in ue)return ue[ve];switch(ve){case X:return function(){return new F(this,ve)};case ce:return function(){return new F(this,ve)};case he:return function(){return new F(this,ve)}}return function(){return new F(this)}},U=q+" Iterator",H=!1,ue=B.prototype,_e=ue[W]||ue["@@iterator"]||K&&ue[K],Ie=!j&&_e||k(K),ee=q=="Array"&&ue.entries||_e,te,oe,ge;if(ee&&(te=c(ee.call(new B)),T!==Object.prototype&&te.next&&(!S&&c(te)!==T&&(f?f(te,T):typeof te[W]!="function"&&v(te,W,O)),p(te,U,!0,!0),S&&(I[U]=O))),K==ce&&_e&&_e.name!==ce&&(H=!0,Ie=function(){return _e.call(this)}),(!S||Y)&&ue[W]!==Ie&&v(ue,W,Ie),I[q]=Ie,K)if(oe={values:k(ce),keys:Z?Ie:k(X),entries:k(he)},Y)for(ge in oe)(j||H||!(ge in ue))&&m(ue,ge,oe[ge]);else a({target:q,proto:!0,forced:j||H},oe);return oe}},"7f9a":function(i,s,o){var a=o("da84"),l=o("8925"),c=a.WeakMap;i.exports=typeof c=="function"&&/native code/.test(l(c))},"825a":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(i,s,o){var a=o("d039");i.exports=!a(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(i,s,o){var a=o("c04e"),l=o("9bf2"),c=o("5c6c");i.exports=function(f,p,v){var m=a(p);m in f?l.f(f,m,c(0,v)):f[m]=v}},"861d":function(i,s){i.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},8875:function(i,s,o){var a,l,c;(function(f,p){l=[],a=p,c=typeof a=="function"?a.apply(s,l):a,c!==void 0&&(i.exports=c)})(typeof self<"u"?self:this,function(){function f(){var p=Object.getOwnPropertyDescriptor(document,"currentScript");if(!p&&"currentScript"in document&&document.currentScript||p&&p.get!==f&&document.currentScript)return document.currentScript;try{throw new Error}catch(he){var v=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,m=/@([^@]*):(\d+):(\d+)\s*$/ig,C=v.exec(he.stack)||m.exec(he.stack),S=C&&C[1]||!1,I=C&&C[2]||!1,N=document.location.href.replace(document.location.hash,""),T,j,W,X=document.getElementsByTagName("script");S===N&&(T=document.documentElement.outerHTML,j=new RegExp("(?:[^\\n]+?\\n){0,"+(I-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),W=T.replace(j,"$1").trim());for(var ce=0;ce<X.length;ce++)if(X[ce].readyState==="interactive"||X[ce].src===S||S===N&&X[ce].innerHTML&&X[ce].innerHTML.trim()===W)return X[ce];return null}}return f})},8925:function(i,s,o){var a=o("c6cd"),l=Function.toString;typeof a.inspectSource!="function"&&(a.inspectSource=function(c){return l.call(c)}),i.exports=a.inspectSource},"8aa5":function(i,s,o){var a=o("6547").charAt;i.exports=function(l,c,f){return c+(f?a(l,c).length:1)}},"8bbf":function(i,s){i.exports=n},"90e3":function(i,s){var o=0,a=Math.random();i.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++o+a).toString(36)}},9112:function(i,s,o){var a=o("83ab"),l=o("9bf2"),c=o("5c6c");i.exports=a?function(f,p,v){return l.f(f,p,c(1,v))}:function(f,p,v){return f[p]=v,f}},9263:function(i,s,o){var a=o("ad6d"),l=o("9f7f"),c=RegExp.prototype.exec,f=String.prototype.replace,p=c,v=function(){var I=/a/,N=/b*/g;return c.call(I,"a"),c.call(N,"a"),I.lastIndex!==0||N.lastIndex!==0}(),m=l.UNSUPPORTED_Y||l.BROKEN_CARET,C=/()??/.exec("")[1]!==void 0,S=v||C||m;S&&(p=function(N){var T=this,j,W,X,ce,he=m&&T.sticky,O=a.call(T),B=T.source,q=0,F=N;return he&&(O=O.replace("y",""),O.indexOf("g")===-1&&(O+="g"),F=String(N).slice(T.lastIndex),T.lastIndex>0&&(!T.multiline||T.multiline&&N[T.lastIndex-1]!==`
`)&&(B="(?: "+B+")",F=" "+F,q++),W=new RegExp("^(?:"+B+")",O)),C&&(W=new RegExp("^"+B+"$(?!\\s)",O)),v&&(j=T.lastIndex),X=c.call(he?W:T,F),he?X?(X.input=X.input.slice(q),X[0]=X[0].slice(q),X.index=T.lastIndex,T.lastIndex+=X[0].length):T.lastIndex=0:v&&X&&(T.lastIndex=T.global?X.index+X[0].length:j),C&&X&&X.length>1&&f.call(X[0],W,function(){for(ce=1;ce<arguments.length-2;ce++)arguments[ce]===void 0&&(X[ce]=void 0)}),X}),i.exports=p},"94ca":function(i,s,o){var a=o("d039"),l=/#|\.prototype\./,c=function(C,S){var I=p[f(C)];return I==m?!0:I==v?!1:typeof S=="function"?a(S):!!S},f=c.normalize=function(C){return String(C).replace(l,".").toLowerCase()},p=c.data={},v=c.NATIVE="N",m=c.POLYFILL="P";i.exports=c},"99af":function(i,s,o){var a=o("23e7"),l=o("d039"),c=o("e8b5"),f=o("861d"),p=o("7b0b"),v=o("50c4"),m=o("8418"),C=o("65f0"),S=o("1dde"),I=o("b622"),N=o("2d00"),T=I("isConcatSpreadable"),j=9007199254740991,W="Maximum allowed index exceeded",X=N>=51||!l(function(){var B=[];return B[T]=!1,B.concat()[0]!==B}),ce=S("concat"),he=function(B){if(!f(B))return!1;var q=B[T];return q!==void 0?!!q:c(B)},O=!X||!ce;a({target:"Array",proto:!0,forced:O},{concat:function(q){var F=p(this),R=C(F,0),K=0,Z,Y,k,U,H;for(Z=-1,k=arguments.length;Z<k;Z++)if(H=Z===-1?F:arguments[Z],he(H)){if(U=v(H.length),K+U>j)throw TypeError(W);for(Y=0;Y<U;Y++,K++)Y in H&&m(R,K,H[Y])}else{if(K>=j)throw TypeError(W);m(R,K++,H)}return R.length=K,R}})},"9bdd":function(i,s,o){var a=o("825a");i.exports=function(l,c,f,p){try{return p?c(a(f)[0],f[1]):c(f)}catch(m){var v=l.return;throw v!==void 0&&a(v.call(l)),m}}},"9bf2":function(i,s,o){var a=o("83ab"),l=o("0cfb"),c=o("825a"),f=o("c04e"),p=Object.defineProperty;s.f=a?p:function(m,C,S){if(c(m),C=f(C,!0),c(S),l)try{return p(m,C,S)}catch{}if("get"in S||"set"in S)throw TypeError("Accessors not supported");return"value"in S&&(m[C]=S.value),m}},"9ed3":function(i,s,o){var a=o("ae93").IteratorPrototype,l=o("7c73"),c=o("5c6c"),f=o("d44e"),p=o("3f8c"),v=function(){return this};i.exports=function(m,C,S){var I=C+" Iterator";return m.prototype=l(a,{next:c(1,S)}),f(m,I,!1,!0),p[I]=v,m}},"9f7f":function(i,s,o){var a=o("d039");function l(c,f){return RegExp(c,f)}s.UNSUPPORTED_Y=a(function(){var c=l("a","y");return c.lastIndex=2,c.exec("abcd")!=null}),s.BROKEN_CARET=a(function(){var c=l("^r","gy");return c.lastIndex=2,c.exec("str")!=null})},a2bf:function(i,s,o){var a=o("e8b5"),l=o("50c4"),c=o("0366"),f=function(p,v,m,C,S,I,N,T){for(var j=S,W=0,X=N?c(N,T,3):!1,ce;W<C;){if(W in m){if(ce=X?X(m[W],W,v):m[W],I>0&&a(ce))j=f(p,v,ce,l(ce.length),j,I-1)-1;else{if(j>=9007199254740991)throw TypeError("Exceed the acceptable array length");p[j]=ce}j++}W++}return j};i.exports=f},a352:function(i,s){i.exports=r},a434:function(i,s,o){var a=o("23e7"),l=o("23cb"),c=o("a691"),f=o("50c4"),p=o("7b0b"),v=o("65f0"),m=o("8418"),C=o("1dde"),S=o("ae40"),I=C("splice"),N=S("splice",{ACCESSORS:!0,0:0,1:2}),T=Math.max,j=Math.min,W=9007199254740991,X="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!I||!N},{splice:function(he,O){var B=p(this),q=f(B.length),F=l(he,q),R=arguments.length,K,Z,Y,k,U,H;if(R===0?K=Z=0:R===1?(K=0,Z=q-F):(K=R-2,Z=j(T(c(O),0),q-F)),q+K-Z>W)throw TypeError(X);for(Y=v(B,Z),k=0;k<Z;k++)U=F+k,U in B&&m(Y,k,B[U]);if(Y.length=Z,K<Z){for(k=F;k<q-Z;k++)U=k+Z,H=k+K,U in B?B[H]=B[U]:delete B[H];for(k=q;k>q-Z+K;k--)delete B[k-1]}else if(K>Z)for(k=q-Z;k>F;k--)U=k+Z-1,H=k+K-1,U in B?B[H]=B[U]:delete B[H];for(k=0;k<K;k++)B[k+F]=arguments[k+2];return B.length=q-Z+K,Y}})},a4d3:function(i,s,o){var a=o("23e7"),l=o("da84"),c=o("d066"),f=o("c430"),p=o("83ab"),v=o("4930"),m=o("fdbf"),C=o("d039"),S=o("5135"),I=o("e8b5"),N=o("861d"),T=o("825a"),j=o("7b0b"),W=o("fc6a"),X=o("c04e"),ce=o("5c6c"),he=o("7c73"),O=o("df75"),B=o("241c"),q=o("057f"),F=o("7418"),R=o("06cf"),K=o("9bf2"),Z=o("d1e7"),Y=o("9112"),k=o("6eeb"),U=o("5692"),H=o("f772"),ue=o("d012"),_e=o("90e3"),Ie=o("b622"),ee=o("e538"),te=o("746f"),oe=o("d44e"),ge=o("69f3"),ve=o("b727").forEach,ye=H("hidden"),pe="Symbol",fe="prototype",$e=Ie("toPrimitive"),Ne=ge.set,ot=ge.getterFor(pe),le=Object[fe],ae=l.Symbol,de=c("JSON","stringify"),re=R.f,Ae=K.f,Ge=q.f,tt=Z.f,at=U("symbols"),ut=U("op-symbols"),gt=U("string-to-symbol-registry"),$t=U("symbol-to-string-registry"),Rt=U("wks"),Gt=l.QObject,ln=!Gt||!Gt[fe]||!Gt[fe].findChild,mn=p&&C(function(){return he(Ae({},"a",{get:function(){return Ae(this,"a",{value:7}).a}})).a!=7})?function(vn,tn,un){var Xn=re(le,tn);Xn&&delete le[tn],Ae(vn,tn,un),Xn&&vn!==le&&Ae(le,tn,Xn)}:Ae,yn=function(vn,tn){var un=at[vn]=he(ae[fe]);return Ne(un,{type:pe,tag:vn,description:tn}),p||(un.description=tn),un},Ze=m?function(vn){return typeof vn=="symbol"}:function(vn){return Object(vn)instanceof ae},it=function(tn,un,Xn){tn===le&&it(ut,un,Xn),T(tn);var nr=X(un,!0);return T(Xn),S(at,nr)?(Xn.enumerable?(S(tn,ye)&&tn[ye][nr]&&(tn[ye][nr]=!1),Xn=he(Xn,{enumerable:ce(0,!1)})):(S(tn,ye)||Ae(tn,ye,ce(1,{})),tn[ye][nr]=!0),mn(tn,nr,Xn)):Ae(tn,nr,Xn)},et=function(tn,un){T(tn);var Xn=W(un),nr=O(Xn).concat(xn(Xn));return ve(nr,function(ur){(!p||Zt.call(Xn,ur))&&it(tn,ur,Xn[ur])}),tn},Bt=function(tn,un){return un===void 0?he(tn):et(he(tn),un)},Zt=function(tn){var un=X(tn,!0),Xn=tt.call(this,un);return this===le&&S(at,un)&&!S(ut,un)?!1:Xn||!S(this,un)||!S(at,un)||S(this,ye)&&this[ye][un]?Xn:!0},Sn=function(tn,un){var Xn=W(tn),nr=X(un,!0);if(!(Xn===le&&S(at,nr)&&!S(ut,nr))){var ur=re(Xn,nr);return ur&&S(at,nr)&&!(S(Xn,ye)&&Xn[ye][nr])&&(ur.enumerable=!0),ur}},bn=function(tn){var un=Ge(W(tn)),Xn=[];return ve(un,function(nr){!S(at,nr)&&!S(ue,nr)&&Xn.push(nr)}),Xn},xn=function(tn){var un=tn===le,Xn=Ge(un?ut:W(tn)),nr=[];return ve(Xn,function(ur){S(at,ur)&&(!un||S(le,ur))&&nr.push(at[ur])}),nr};if(v||(ae=function(){if(this instanceof ae)throw TypeError("Symbol is not a constructor");var tn=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),un=_e(tn),Xn=function(nr){this===le&&Xn.call(ut,nr),S(this,ye)&&S(this[ye],un)&&(this[ye][un]=!1),mn(this,un,ce(1,nr))};return p&&ln&&mn(le,un,{configurable:!0,set:Xn}),yn(un,tn)},k(ae[fe],"toString",function(){return ot(this).tag}),k(ae,"withoutSetter",function(vn){return yn(_e(vn),vn)}),Z.f=Zt,K.f=it,R.f=Sn,B.f=q.f=bn,F.f=xn,ee.f=function(vn){return yn(Ie(vn),vn)},p&&(Ae(ae[fe],"description",{configurable:!0,get:function(){return ot(this).description}}),f||k(le,"propertyIsEnumerable",Zt,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!v,sham:!v},{Symbol:ae}),ve(O(Rt),function(vn){te(vn)}),a({target:pe,stat:!0,forced:!v},{for:function(vn){var tn=String(vn);if(S(gt,tn))return gt[tn];var un=ae(tn);return gt[tn]=un,$t[un]=tn,un},keyFor:function(tn){if(!Ze(tn))throw TypeError(tn+" is not a symbol");if(S($t,tn))return $t[tn]},useSetter:function(){ln=!0},useSimple:function(){ln=!1}}),a({target:"Object",stat:!0,forced:!v,sham:!p},{create:Bt,defineProperty:it,defineProperties:et,getOwnPropertyDescriptor:Sn}),a({target:"Object",stat:!0,forced:!v},{getOwnPropertyNames:bn,getOwnPropertySymbols:xn}),a({target:"Object",stat:!0,forced:C(function(){F.f(1)})},{getOwnPropertySymbols:function(tn){return F.f(j(tn))}}),de){var zn=!v||C(function(){var vn=ae();return de([vn])!="[null]"||de({a:vn})!="{}"||de(Object(vn))!="{}"});a({target:"JSON",stat:!0,forced:zn},{stringify:function(tn,un,Xn){for(var nr=[tn],ur=1,Rn;arguments.length>ur;)nr.push(arguments[ur++]);if(Rn=un,!(!N(un)&&tn===void 0||Ze(tn)))return I(un)||(un=function(Cr,Ki){if(typeof Rn=="function"&&(Ki=Rn.call(this,Cr,Ki)),!Ze(Ki))return Ki}),nr[1]=un,de.apply(null,nr)}})}ae[fe][$e]||Y(ae[fe],$e,ae[fe].valueOf),oe(ae,pe),ue[ye]=!0},a630:function(i,s,o){var a=o("23e7"),l=o("4df4"),c=o("1c7e"),f=!c(function(p){Array.from(p)});a({target:"Array",stat:!0,forced:f},{from:l})},a640:function(i,s,o){var a=o("d039");i.exports=function(l,c){var f=[][l];return!!f&&a(function(){f.call(null,c||function(){throw 1},1)})}},a691:function(i,s){var o=Math.ceil,a=Math.floor;i.exports=function(l){return isNaN(l=+l)?0:(l>0?a:o)(l)}},ab13:function(i,s,o){var a=o("b622"),l=a("match");i.exports=function(c){var f=/./;try{"/./"[c](f)}catch{try{return f[l]=!1,"/./"[c](f)}catch{}}return!1}},ac1f:function(i,s,o){var a=o("23e7"),l=o("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(i,s,o){var a=o("825a");i.exports=function(){var l=a(this),c="";return l.global&&(c+="g"),l.ignoreCase&&(c+="i"),l.multiline&&(c+="m"),l.dotAll&&(c+="s"),l.unicode&&(c+="u"),l.sticky&&(c+="y"),c}},ae40:function(i,s,o){var a=o("83ab"),l=o("d039"),c=o("5135"),f=Object.defineProperty,p={},v=function(m){throw m};i.exports=function(m,C){if(c(p,m))return p[m];C||(C={});var S=[][m],I=c(C,"ACCESSORS")?C.ACCESSORS:!1,N=c(C,0)?C[0]:v,T=c(C,1)?C[1]:void 0;return p[m]=!!S&&!l(function(){if(I&&!a)return!0;var j={length:-1};I?f(j,1,{enumerable:!0,get:v}):j[1]=1,S.call(j,N,T)})}},ae93:function(i,s,o){var a=o("e163"),l=o("9112"),c=o("5135"),f=o("b622"),p=o("c430"),v=f("iterator"),m=!1,C=function(){return this},S,I,N;[].keys&&(N=[].keys(),"next"in N?(I=a(a(N)),I!==Object.prototype&&(S=I)):m=!0),S==null&&(S={}),!p&&!c(S,v)&&l(S,v,C),i.exports={IteratorPrototype:S,BUGGY_SAFARI_ITERATORS:m}},b041:function(i,s,o){var a=o("00ee"),l=o("f5df");i.exports=a?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(i,s,o){var a=o("83ab"),l=o("9bf2").f,c=Function.prototype,f=c.toString,p=/^\s*function ([^ (]*)/,v="name";a&&!(v in c)&&l(c,v,{configurable:!0,get:function(){try{return f.call(this).match(p)[1]}catch{return""}}})},b622:function(i,s,o){var a=o("da84"),l=o("5692"),c=o("5135"),f=o("90e3"),p=o("4930"),v=o("fdbf"),m=l("wks"),C=a.Symbol,S=v?C:C&&C.withoutSetter||f;i.exports=function(I){return c(m,I)||(p&&c(C,I)?m[I]=C[I]:m[I]=S("Symbol."+I)),m[I]}},b64b:function(i,s,o){var a=o("23e7"),l=o("7b0b"),c=o("df75"),f=o("d039"),p=f(function(){c(1)});a({target:"Object",stat:!0,forced:p},{keys:function(m){return c(l(m))}})},b727:function(i,s,o){var a=o("0366"),l=o("44ad"),c=o("7b0b"),f=o("50c4"),p=o("65f0"),v=[].push,m=function(C){var S=C==1,I=C==2,N=C==3,T=C==4,j=C==6,W=C==5||j;return function(X,ce,he,O){for(var B=c(X),q=l(B),F=a(ce,he,3),R=f(q.length),K=0,Z=O||p,Y=S?Z(X,R):I?Z(X,0):void 0,k,U;R>K;K++)if((W||K in q)&&(k=q[K],U=F(k,K,B),C)){if(S)Y[K]=U;else if(U)switch(C){case 3:return!0;case 5:return k;case 6:return K;case 2:v.call(Y,k)}else if(T)return!1}return j?-1:N||T?T:Y}};i.exports={forEach:m(0),map:m(1),filter:m(2),some:m(3),every:m(4),find:m(5),findIndex:m(6)}},c04e:function(i,s,o){var a=o("861d");i.exports=function(l,c){if(!a(l))return l;var f,p;if(c&&typeof(f=l.toString)=="function"&&!a(p=f.call(l))||typeof(f=l.valueOf)=="function"&&!a(p=f.call(l))||!c&&typeof(f=l.toString)=="function"&&!a(p=f.call(l)))return p;throw TypeError("Can't convert object to primitive value")}},c430:function(i,s){i.exports=!1},c6b6:function(i,s){var o={}.toString;i.exports=function(a){return o.call(a).slice(8,-1)}},c6cd:function(i,s,o){var a=o("da84"),l=o("ce4e"),c="__core-js_shared__",f=a[c]||l(c,{});i.exports=f},c740:function(i,s,o){var a=o("23e7"),l=o("b727").findIndex,c=o("44d2"),f=o("ae40"),p="findIndex",v=!0,m=f(p);p in[]&&Array(1)[p](function(){v=!1}),a({target:"Array",proto:!0,forced:v||!m},{findIndex:function(S){return l(this,S,arguments.length>1?arguments[1]:void 0)}}),c(p)},c8ba:function(i,s){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}i.exports=o},c975:function(i,s,o){var a=o("23e7"),l=o("4d64").indexOf,c=o("a640"),f=o("ae40"),p=[].indexOf,v=!!p&&1/[1].indexOf(1,-0)<0,m=c("indexOf"),C=f("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:v||!m||!C},{indexOf:function(I){return v?p.apply(this,arguments)||0:l(this,I,arguments.length>1?arguments[1]:void 0)}})},ca84:function(i,s,o){var a=o("5135"),l=o("fc6a"),c=o("4d64").indexOf,f=o("d012");i.exports=function(p,v){var m=l(p),C=0,S=[],I;for(I in m)!a(f,I)&&a(m,I)&&S.push(I);for(;v.length>C;)a(m,I=v[C++])&&(~c(S,I)||S.push(I));return S}},caad:function(i,s,o){var a=o("23e7"),l=o("4d64").includes,c=o("44d2"),f=o("ae40"),p=f("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:!p},{includes:function(m){return l(this,m,arguments.length>1?arguments[1]:void 0)}}),c("includes")},cc12:function(i,s,o){var a=o("da84"),l=o("861d"),c=a.document,f=l(c)&&l(c.createElement);i.exports=function(p){return f?c.createElement(p):{}}},ce4e:function(i,s,o){var a=o("da84"),l=o("9112");i.exports=function(c,f){try{l(a,c,f)}catch{a[c]=f}return f}},d012:function(i,s){i.exports={}},d039:function(i,s){i.exports=function(o){try{return!!o()}catch{return!0}}},d066:function(i,s,o){var a=o("428f"),l=o("da84"),c=function(f){return typeof f=="function"?f:void 0};i.exports=function(f,p){return arguments.length<2?c(a[f])||c(l[f]):a[f]&&a[f][p]||l[f]&&l[f][p]}},d1e7:function(i,s,o){var a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,c=l&&!a.call({1:2},1);s.f=c?function(p){var v=l(this,p);return!!v&&v.enumerable}:a},d28b:function(i,s,o){var a=o("746f");a("iterator")},d2bb:function(i,s,o){var a=o("825a"),l=o("3bbe");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var c=!1,f={},p;try{p=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,p.call(f,[]),c=f instanceof Array}catch{}return function(m,C){return a(m),l(C),c?p.call(m,C):m.__proto__=C,m}}():void 0)},d3b7:function(i,s,o){var a=o("00ee"),l=o("6eeb"),c=o("b041");a||l(Object.prototype,"toString",c,{unsafe:!0})},d44e:function(i,s,o){var a=o("9bf2").f,l=o("5135"),c=o("b622"),f=c("toStringTag");i.exports=function(p,v,m){p&&!l(p=m?p:p.prototype,f)&&a(p,f,{configurable:!0,value:v})}},d58f:function(i,s,o){var a=o("1c0b"),l=o("7b0b"),c=o("44ad"),f=o("50c4"),p=function(v){return function(m,C,S,I){a(C);var N=l(m),T=c(N),j=f(N.length),W=v?j-1:0,X=v?-1:1;if(S<2)for(;;){if(W in T){I=T[W],W+=X;break}if(W+=X,v?W<0:j<=W)throw TypeError("Reduce of empty array with no initial value")}for(;v?W>=0:j>W;W+=X)W in T&&(I=C(I,T[W],W,N));return I}};i.exports={left:p(!1),right:p(!0)}},d784:function(i,s,o){o("ac1f");var a=o("6eeb"),l=o("d039"),c=o("b622"),f=o("9263"),p=o("9112"),v=c("species"),m=!l(function(){var T=/./;return T.exec=function(){var j=[];return j.groups={a:"7"},j},"".replace(T,"$<a>")!=="7"}),C=function(){return"a".replace(/./,"$0")==="$0"}(),S=c("replace"),I=function(){return/./[S]?/./[S]("a","$0")==="":!1}(),N=!l(function(){var T=/(?:)/,j=T.exec;T.exec=function(){return j.apply(this,arguments)};var W="ab".split(T);return W.length!==2||W[0]!=="a"||W[1]!=="b"});i.exports=function(T,j,W,X){var ce=c(T),he=!l(function(){var K={};return K[ce]=function(){return 7},""[T](K)!=7}),O=he&&!l(function(){var K=!1,Z=/a/;return T==="split"&&(Z={},Z.constructor={},Z.constructor[v]=function(){return Z},Z.flags="",Z[ce]=/./[ce]),Z.exec=function(){return K=!0,null},Z[ce](""),!K});if(!he||!O||T==="replace"&&!(m&&C&&!I)||T==="split"&&!N){var B=/./[ce],q=W(ce,""[T],function(K,Z,Y,k,U){return Z.exec===f?he&&!U?{done:!0,value:B.call(Z,Y,k)}:{done:!0,value:K.call(Y,Z,k)}:{done:!1}},{REPLACE_KEEPS_$0:C,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:I}),F=q[0],R=q[1];a(String.prototype,T,F),a(RegExp.prototype,ce,j==2?function(K,Z){return R.call(K,this,Z)}:function(K){return R.call(K,this)})}X&&p(RegExp.prototype[ce],"sham",!0)}},d81d:function(i,s,o){var a=o("23e7"),l=o("b727").map,c=o("1dde"),f=o("ae40"),p=c("map"),v=f("map");a({target:"Array",proto:!0,forced:!p||!v},{map:function(C){return l(this,C,arguments.length>1?arguments[1]:void 0)}})},da84:function(i,s,o){(function(a){var l=function(c){return c&&c.Math==Math&&c};i.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof a=="object"&&a)||Function("return this")()}).call(this,o("c8ba"))},dbb4:function(i,s,o){var a=o("23e7"),l=o("83ab"),c=o("56ef"),f=o("fc6a"),p=o("06cf"),v=o("8418");a({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(C){for(var S=f(C),I=p.f,N=c(S),T={},j=0,W,X;N.length>j;)X=I(S,W=N[j++]),X!==void 0&&v(T,W,X);return T}})},dbf1:function(i,s,o){(function(a){o.d(s,"a",function(){return c});function l(){return typeof window<"u"?window.console:a.console}var c=l()}).call(this,o("c8ba"))},ddb0:function(i,s,o){var a=o("da84"),l=o("fdbc"),c=o("e260"),f=o("9112"),p=o("b622"),v=p("iterator"),m=p("toStringTag"),C=c.values;for(var S in l){var I=a[S],N=I&&I.prototype;if(N){if(N[v]!==C)try{f(N,v,C)}catch{N[v]=C}if(N[m]||f(N,m,S),l[S]){for(var T in c)if(N[T]!==c[T])try{f(N,T,c[T])}catch{N[T]=c[T]}}}}},df75:function(i,s,o){var a=o("ca84"),l=o("7839");i.exports=Object.keys||function(f){return a(f,l)}},e01a:function(i,s,o){var a=o("23e7"),l=o("83ab"),c=o("da84"),f=o("5135"),p=o("861d"),v=o("9bf2").f,m=o("e893"),C=c.Symbol;if(l&&typeof C=="function"&&(!("description"in C.prototype)||C().description!==void 0)){var S={},I=function(){var ce=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),he=this instanceof I?new C(ce):ce===void 0?C():C(ce);return ce===""&&(S[he]=!0),he};m(I,C);var N=I.prototype=C.prototype;N.constructor=I;var T=N.toString,j=String(C("test"))=="Symbol(test)",W=/^Symbol\((.*)\)[^)]+$/;v(N,"description",{configurable:!0,get:function(){var ce=p(this)?this.valueOf():this,he=T.call(ce);if(f(S,ce))return"";var O=j?he.slice(7,-1):he.replace(W,"$1");return O===""?void 0:O}}),a({global:!0,forced:!0},{Symbol:I})}},e163:function(i,s,o){var a=o("5135"),l=o("7b0b"),c=o("f772"),f=o("e177"),p=c("IE_PROTO"),v=Object.prototype;i.exports=f?Object.getPrototypeOf:function(m){return m=l(m),a(m,p)?m[p]:typeof m.constructor=="function"&&m instanceof m.constructor?m.constructor.prototype:m instanceof Object?v:null}},e177:function(i,s,o){var a=o("d039");i.exports=!a(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(i,s,o){var a=o("fc6a"),l=o("44d2"),c=o("3f8c"),f=o("69f3"),p=o("7dd0"),v="Array Iterator",m=f.set,C=f.getterFor(v);i.exports=p(Array,"Array",function(S,I){m(this,{type:v,target:a(S),index:0,kind:I})},function(){var S=C(this),I=S.target,N=S.kind,T=S.index++;return!I||T>=I.length?(S.target=void 0,{value:void 0,done:!0}):N=="keys"?{value:T,done:!1}:N=="values"?{value:I[T],done:!1}:{value:[T,I[T]],done:!1}},"values"),c.Arguments=c.Array,l("keys"),l("values"),l("entries")},e439:function(i,s,o){var a=o("23e7"),l=o("d039"),c=o("fc6a"),f=o("06cf").f,p=o("83ab"),v=l(function(){f(1)}),m=!p||v;a({target:"Object",stat:!0,forced:m,sham:!p},{getOwnPropertyDescriptor:function(S,I){return f(c(S),I)}})},e538:function(i,s,o){var a=o("b622");s.f=a},e893:function(i,s,o){var a=o("5135"),l=o("56ef"),c=o("06cf"),f=o("9bf2");i.exports=function(p,v){for(var m=l(v),C=f.f,S=c.f,I=0;I<m.length;I++){var N=m[I];a(p,N)||C(p,N,S(v,N))}}},e8b5:function(i,s,o){var a=o("c6b6");i.exports=Array.isArray||function(c){return a(c)=="Array"}},e95a:function(i,s,o){var a=o("b622"),l=o("3f8c"),c=a("iterator"),f=Array.prototype;i.exports=function(p){return p!==void 0&&(l.Array===p||f[c]===p)}},f5df:function(i,s,o){var a=o("00ee"),l=o("c6b6"),c=o("b622"),f=c("toStringTag"),p=l(function(){return arguments}())=="Arguments",v=function(m,C){try{return m[C]}catch{}};i.exports=a?l:function(m){var C,S,I;return m===void 0?"Undefined":m===null?"Null":typeof(S=v(C=Object(m),f))=="string"?S:p?l(C):(I=l(C))=="Object"&&typeof C.callee=="function"?"Arguments":I}},f772:function(i,s,o){var a=o("5692"),l=o("90e3"),c=a("keys");i.exports=function(f){return c[f]||(c[f]=l(f))}},fb15:function(i,s,o){if(o.r(s),typeof window<"u"){var a=window.document.currentScript;{var l=o("8875");a=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var c=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);c&&(o.p=c[1])}o("99af"),o("4de4"),o("4160"),o("c975"),o("d81d"),o("a434"),o("159b"),o("a4d3"),o("e439"),o("dbb4"),o("b64b");function f(Ze,it,et){return it in Ze?Object.defineProperty(Ze,it,{value:et,enumerable:!0,configurable:!0,writable:!0}):Ze[it]=et,Ze}function p(Ze,it){var et=Object.keys(Ze);if(Object.getOwnPropertySymbols){var Bt=Object.getOwnPropertySymbols(Ze);it&&(Bt=Bt.filter(function(Zt){return Object.getOwnPropertyDescriptor(Ze,Zt).enumerable})),et.push.apply(et,Bt)}return et}function v(Ze){for(var it=1;it<arguments.length;it++){var et=arguments[it]!=null?arguments[it]:{};it%2?p(Object(et),!0).forEach(function(Bt){f(Ze,Bt,et[Bt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ze,Object.getOwnPropertyDescriptors(et)):p(Object(et)).forEach(function(Bt){Object.defineProperty(Ze,Bt,Object.getOwnPropertyDescriptor(et,Bt))})}return Ze}function m(Ze){if(Array.isArray(Ze))return Ze}o("e01a"),o("d28b"),o("e260"),o("d3b7"),o("3ca3"),o("ddb0");function C(Ze,it){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Ze)))){var et=[],Bt=!0,Zt=!1,Sn=void 0;try{for(var bn=Ze[Symbol.iterator](),xn;!(Bt=(xn=bn.next()).done)&&(et.push(xn.value),!(it&&et.length===it));Bt=!0);}catch(zn){Zt=!0,Sn=zn}finally{try{!Bt&&bn.return!=null&&bn.return()}finally{if(Zt)throw Sn}}return et}}o("a630"),o("fb6a"),o("b0c0"),o("25f0");function S(Ze,it){(it==null||it>Ze.length)&&(it=Ze.length);for(var et=0,Bt=new Array(it);et<it;et++)Bt[et]=Ze[et];return Bt}function I(Ze,it){if(Ze){if(typeof Ze=="string")return S(Ze,it);var et=Object.prototype.toString.call(Ze).slice(8,-1);if(et==="Object"&&Ze.constructor&&(et=Ze.constructor.name),et==="Map"||et==="Set")return Array.from(Ze);if(et==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(et))return S(Ze,it)}}function N(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T(Ze,it){return m(Ze)||C(Ze,it)||I(Ze,it)||N()}function j(Ze){if(Array.isArray(Ze))return S(Ze)}function W(Ze){if(typeof Symbol<"u"&&Symbol.iterator in Object(Ze))return Array.from(Ze)}function X(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ce(Ze){return j(Ze)||W(Ze)||I(Ze)||X()}var he=o("a352"),O=o.n(he);function B(Ze){Ze.parentElement!==null&&Ze.parentElement.removeChild(Ze)}function q(Ze,it,et){var Bt=et===0?Ze.children[0]:Ze.children[et-1].nextSibling;Ze.insertBefore(it,Bt)}var F=o("dbf1");o("13d5"),o("4fad"),o("ac1f"),o("5319");function R(Ze){var it=Object.create(null);return function(Bt){var Zt=it[Bt];return Zt||(it[Bt]=Ze(Bt))}}var K=/-(\w)/g,Z=R(function(Ze){return Ze.replace(K,function(it,et){return et.toUpperCase()})});o("5db7"),o("73d9");var Y=["Start","Add","Remove","Update","End"],k=["Choose","Unchoose","Sort","Filter","Clone"],U=["Move"],H=[U,Y,k].flatMap(function(Ze){return Ze}).map(function(Ze){return"on".concat(Ze)}),ue={manage:U,manageAndEmit:Y,emit:k};function _e(Ze){return H.indexOf(Ze)!==-1}o("caad"),o("2ca0");var Ie=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function ee(Ze){return Ie.includes(Ze)}function te(Ze){return["transition-group","TransitionGroup"].includes(Ze)}function oe(Ze){return["id","class","role","style"].includes(Ze)||Ze.startsWith("data-")||Ze.startsWith("aria-")||Ze.startsWith("on")}function ge(Ze){return Ze.reduce(function(it,et){var Bt=T(et,2),Zt=Bt[0],Sn=Bt[1];return it[Zt]=Sn,it},{})}function ve(Ze){var it=Ze.$attrs,et=Ze.componentData,Bt=et===void 0?{}:et,Zt=ge(Object.entries(it).filter(function(Sn){var bn=T(Sn,2),xn=bn[0];return bn[1],oe(xn)}));return v(v({},Zt),Bt)}function ye(Ze){var it=Ze.$attrs,et=Ze.callBackBuilder,Bt=ge(pe(it));Object.entries(et).forEach(function(Sn){var bn=T(Sn,2),xn=bn[0],zn=bn[1];ue[xn].forEach(function(vn){Bt["on".concat(vn)]=zn(vn)})});var Zt="[data-draggable]".concat(Bt.draggable||"");return v(v({},Bt),{},{draggable:Zt})}function pe(Ze){return Object.entries(Ze).filter(function(it){var et=T(it,2),Bt=et[0];return et[1],!oe(Bt)}).map(function(it){var et=T(it,2),Bt=et[0],Zt=et[1];return[Z(Bt),Zt]}).filter(function(it){var et=T(it,2),Bt=et[0];return et[1],!_e(Bt)})}o("c740");function fe(Ze,it){if(!(Ze instanceof it))throw new TypeError("Cannot call a class as a function")}function $e(Ze,it){for(var et=0;et<it.length;et++){var Bt=it[et];Bt.enumerable=Bt.enumerable||!1,Bt.configurable=!0,"value"in Bt&&(Bt.writable=!0),Object.defineProperty(Ze,Bt.key,Bt)}}function Ne(Ze,it,et){return it&&$e(Ze.prototype,it),Ze}var ot=function(it){var et=it.el;return et},le=function(it,et){return it.__draggable_context=et},ae=function(it){return it.__draggable_context},de=function(){function Ze(it){var et=it.nodes,Bt=et.header,Zt=et.default,Sn=et.footer,bn=it.root,xn=it.realList;fe(this,Ze),this.defaultNodes=Zt,this.children=[].concat(ce(Bt),ce(Zt),ce(Sn)),this.externalComponent=bn.externalComponent,this.rootTransition=bn.transition,this.tag=bn.tag,this.realList=xn}return Ne(Ze,[{key:"render",value:function(et,Bt){var Zt=this.tag,Sn=this.children,bn=this._isRootComponent,xn=bn?{default:function(){return Sn}}:Sn;return et(Zt,Bt,xn)}},{key:"updated",value:function(){var et=this.defaultNodes,Bt=this.realList;et.forEach(function(Zt,Sn){le(ot(Zt),{element:Bt[Sn],index:Sn})})}},{key:"getUnderlyingVm",value:function(et){return ae(et)}},{key:"getVmIndexFromDomIndex",value:function(et,Bt){var Zt=this.defaultNodes,Sn=Zt.length,bn=Bt.children,xn=bn.item(et);if(xn===null)return Sn;var zn=ae(xn);if(zn)return zn.index;if(Sn===0)return 0;var vn=ot(Zt[0]),tn=ce(bn).findIndex(function(un){return un===vn});return et<tn?0:Sn}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),Ze}(),re=o("8bbf");function Ae(Ze,it){var et=Ze[it];return et?et():[]}function Ge(Ze){var it=Ze.$slots,et=Ze.realList,Bt=Ze.getKey,Zt=et||[],Sn=["header","footer"].map(function(un){return Ae(it,un)}),bn=T(Sn,2),xn=bn[0],zn=bn[1],vn=it.item;if(!vn)throw new Error("draggable element must have an item slot");var tn=Zt.flatMap(function(un,Xn){return vn({element:un,index:Xn}).map(function(nr){return nr.key=Bt(un),nr.props=v(v({},nr.props||{}),{},{"data-draggable":!0}),nr})});if(tn.length!==Zt.length)throw new Error("Item slot must have only one child");return{header:xn,footer:zn,default:tn}}function tt(Ze){var it=te(Ze),et=!ee(Ze)&&!it;return{transition:it,externalComponent:et,tag:et?Object(re.resolveComponent)(Ze):it?re.TransitionGroup:Ze}}function at(Ze){var it=Ze.$slots,et=Ze.tag,Bt=Ze.realList,Zt=Ze.getKey,Sn=Ge({$slots:it,realList:Bt,getKey:Zt}),bn=tt(et);return new de({nodes:Sn,root:bn,realList:Bt})}function ut(Ze,it){var et=this;Object(re.nextTick)(function(){return et.$emit(Ze.toLowerCase(),it)})}function gt(Ze){var it=this;return function(et,Bt){if(it.realList!==null)return it["onDrag".concat(Ze)](et,Bt)}}function $t(Ze){var it=this,et=gt.call(this,Ze);return function(Bt,Zt){et.call(it,Bt,Zt),ut.call(it,Ze,Bt)}}var Rt=null,Gt={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(it){return it}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},ln=["update:modelValue","change"].concat(ce([].concat(ce(ue.manageAndEmit),ce(ue.emit)).map(function(Ze){return Ze.toLowerCase()}))),mn=Object(re.defineComponent)({name:"draggable",inheritAttrs:!1,props:Gt,emits:ln,data:function(){return{error:!1}},render:function(){try{this.error=!1;var it=this.$slots,et=this.$attrs,Bt=this.tag,Zt=this.componentData,Sn=this.realList,bn=this.getKey,xn=at({$slots:it,tag:Bt,realList:Sn,getKey:bn});this.componentStructure=xn;var zn=ve({$attrs:et,componentData:Zt});return xn.render(re.h,zn)}catch(vn){return this.error=!0,Object(re.h)("pre",{style:{color:"red"}},vn.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&F.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var it=this;if(!this.error){var et=this.$attrs,Bt=this.$el,Zt=this.componentStructure;Zt.updated();var Sn=ye({$attrs:et,callBackBuilder:{manageAndEmit:function(zn){return $t.call(it,zn)},emit:function(zn){return ut.bind(it,zn)},manage:function(zn){return gt.call(it,zn)}}}),bn=Bt.nodeType===1?Bt:Bt.parentElement;this._sortable=new O.a(bn,Sn),this.targetDomElement=bn,bn.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var it=this.list;return it||this.modelValue},getKey:function(){var it=this.itemKey;return typeof it=="function"?it:function(et){return et[it]}}},watch:{$attrs:{handler:function(it){var et=this._sortable;et&&pe(it).forEach(function(Bt){var Zt=T(Bt,2),Sn=Zt[0],bn=Zt[1];et.option(Sn,bn)})},deep:!0}},methods:{getUnderlyingVm:function(it){return this.componentStructure.getUnderlyingVm(it)||null},getUnderlyingPotencialDraggableComponent:function(it){return it.__draggable_component__},emitChanges:function(it){var et=this;Object(re.nextTick)(function(){return et.$emit("change",it)})},alterList:function(it){if(this.list){it(this.list);return}var et=ce(this.modelValue);it(et),this.$emit("update:modelValue",et)},spliceList:function(){var it=arguments,et=function(Zt){return Zt.splice.apply(Zt,ce(it))};this.alterList(et)},updatePosition:function(it,et){var Bt=function(Sn){return Sn.splice(et,0,Sn.splice(it,1)[0])};this.alterList(Bt)},getRelatedContextFromMoveEvent:function(it){var et=it.to,Bt=it.related,Zt=this.getUnderlyingPotencialDraggableComponent(et);if(!Zt)return{component:Zt};var Sn=Zt.realList,bn={list:Sn,component:Zt};if(et!==Bt&&Sn){var xn=Zt.getUnderlyingVm(Bt)||{};return v(v({},xn),bn)}return bn},getVmIndexFromDomIndex:function(it){return this.componentStructure.getVmIndexFromDomIndex(it,this.targetDomElement)},onDragStart:function(it){this.context=this.getUnderlyingVm(it.item),it.item._underlying_vm_=this.clone(this.context.element),Rt=it.item},onDragAdd:function(it){var et=it.item._underlying_vm_;if(et!==void 0){B(it.item);var Bt=this.getVmIndexFromDomIndex(it.newIndex);this.spliceList(Bt,0,et);var Zt={element:et,newIndex:Bt};this.emitChanges({added:Zt})}},onDragRemove:function(it){if(q(this.$el,it.item,it.oldIndex),it.pullMode==="clone"){B(it.clone);return}var et=this.context,Bt=et.index,Zt=et.element;this.spliceList(Bt,1);var Sn={element:Zt,oldIndex:Bt};this.emitChanges({removed:Sn})},onDragUpdate:function(it){B(it.item),q(it.from,it.item,it.oldIndex);var et=this.context.index,Bt=this.getVmIndexFromDomIndex(it.newIndex);this.updatePosition(et,Bt);var Zt={element:this.context.element,oldIndex:et,newIndex:Bt};this.emitChanges({moved:Zt})},computeFutureIndex:function(it,et){if(!it.element)return 0;var Bt=ce(et.to.children).filter(function(xn){return xn.style.display!=="none"}),Zt=Bt.indexOf(et.related),Sn=it.component.getVmIndexFromDomIndex(Zt),bn=Bt.indexOf(Rt)!==-1;return bn||!et.willInsertAfter?Sn:Sn+1},onDragMove:function(it,et){var Bt=this.move,Zt=this.realList;if(!Bt||!Zt)return!0;var Sn=this.getRelatedContextFromMoveEvent(it),bn=this.computeFutureIndex(Sn,it),xn=v(v({},this.context),{},{futureIndex:bn}),zn=v(v({},it),{},{relatedContext:Sn,draggedContext:xn});return Bt(zn,et)},onDragEnd:function(){Rt=null}}}),yn=mn;s.default=yn},fb6a:function(i,s,o){var a=o("23e7"),l=o("861d"),c=o("e8b5"),f=o("23cb"),p=o("50c4"),v=o("fc6a"),m=o("8418"),C=o("b622"),S=o("1dde"),I=o("ae40"),N=S("slice"),T=I("slice",{ACCESSORS:!0,0:0,1:2}),j=C("species"),W=[].slice,X=Math.max;a({target:"Array",proto:!0,forced:!N||!T},{slice:function(he,O){var B=v(this),q=p(B.length),F=f(he,q),R=f(O===void 0?q:O,q),K,Z,Y;if(c(B)&&(K=B.constructor,typeof K=="function"&&(K===Array||c(K.prototype))?K=void 0:l(K)&&(K=K[j],K===null&&(K=void 0)),K===Array||K===void 0))return W.call(B,F,R);for(Z=new(K===void 0?Array:K)(X(R-F,0)),Y=0;F<R;F++,Y++)F in B&&m(Z,Y,B[F]);return Z.length=Y,Z}})},fc6a:function(i,s,o){var a=o("44ad"),l=o("1d80");i.exports=function(c){return a(l(c))}},fdbc:function(i,s){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(i,s,o){var a=o("4930");i.exports=a&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})($E);var pK=$E.exports;const gK=S_(pK),mK={class:"min-h-full bg-gray-50"},vK={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},yK={class:"sm:flex sm:items-center"},bK={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},_K={key:0,class:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10"},wK={class:"mt-6 bg-white shadow rounded-lg p-4"},xK={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},LK=["value"],CK={key:0,class:"mt-6 p-6 text-center bg-white shadow rounded-lg"},SK={key:1,class:"mt-6 pb-4"},EK={key:0,class:"p-6 text-center bg-white shadow rounded-lg mb-4"},PK={key:1,class:"md:flex md:space-x-4 md:overflow-x-auto gap-4 grid grid-cols-1"},kK={class:"bg-white rounded-lg shadow overflow-hidden"},MK={class:"flex items-center"},AK={class:"flex items-center"},TK={class:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full"},OK={class:"p-2"},DK={class:"min-h-[100px] draggable-container"},IK={class:"note-container"},NK={class:"bg-white rounded-md shadow-sm border border-gray-200 overflow-hidden"},BK={class:"flex items-center"},RK={key:0,class:"h-4 w-4 mr-2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},FK={class:"text-sm font-medium text-gray-900 truncate"},jK={class:"px-3 py-2"},zK={class:"text-sm text-gray-500 line-clamp-2"},UK={class:"px-3 py-2 bg-gray-50 border-t border-gray-100 flex items-center space-x-2"},$K={class:"text-xs text-gray-500"},VK={key:0,class:"text-xs text-gray-700"},HK={class:"flex space-x-1 ml-auto"},GK={key:0,class:"text-xs text-primary-500 flex items-center mr-1",title:"Note golocalise"},WK={key:1,class:"text-xs text-gray-400 flex items-center mr-1",title:"Note simple"},qK=["onClick"],YK=["onClick"],KK=["onClick"],ZK=["onClick"],XK={key:0,class:"fixed z-[3001] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},JK={class:"flex items-center justify-center min-h-screen w-full"},QK={class:"relative bg-white w-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden mx-auto my-auto"},eZ={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3 p-4 md:px-6"},tZ=hs({__name:"NotesView",setup(t){const e=bt([]),n=S0(),r=Gl(),i=hd(),s=eo(),o=bt(!0),a=bt(!1),l=bt(!1),c=bt(null),f=bt(null),p=bt("info"),v=bt(window.innerWidth<768),m=()=>{v.value=window.innerWidth<768},C=Hn(()=>i.getSortedColumns),S=[{id:xi.PRIVATE,title:"Priv",description:"Visible uniquement par vous"},{id:xi.COMPANY,title:"Entreprise",description:"Visible uniquement par l'entreprise"},{id:xi.EMPLOYEE,title:"Salaris",description:"Visible par l'entreprise et ses salaris"},{id:xi.VISITOR,title:"Visiteurs",description:"Visible par tous (entreprise, salaris et visiteurs)"}],I=mu({search:"",date:"",accessLevel:""});function N(te){if(!te)return"Date non dfinie";try{const oe=new Date(te);return isNaN(oe.getTime())?(console.warn("[safeFormatDate] Date invalide:",te),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(oe)}catch(oe){return console.error("[safeFormatDate] Erreur lors du formatage de la date:",oe),"Date invalide"}}function T(te){if(!te)return null;try{const oe=new Date(te);return isNaN(oe.getTime())?(console.warn("[safeDate] Date invalide:",te),null):oe}catch(oe){return console.error("[safeDate] Erreur lors de la cration de la date:",oe),null}}function j(te){return N(te)}const W=Hn(()=>{let te=i.getAccessibleNotes;if(I.search){const oe=I.search.toLowerCase();te=te.filter(ge=>ge.title.toLowerCase().includes(oe)||ge.description.toLowerCase().includes(oe))}if(I.accessLevel&&(te=te.filter(oe=>oe.accessLevel===I.accessLevel)),I.date){const oe=new Date;oe.setHours(0,0,0,0);const ge=new Date(oe);ge.setDate(oe.getDate()-oe.getDay());const ve=new Date(oe.getFullYear(),oe.getMonth(),1);te=te.filter(ye=>{const pe=T(ye.createdAt);return pe?I.date==="today"?pe>=oe:I.date==="week"?pe>=ge:I.date==="month"?pe>=ve:!0:!1})}return te}),X=Hn(()=>te=>W.value.filter(oe=>oe.columnId===te));function ce(te){if(te==null)return"Non dfini";switch(te){case xi.PRIVATE:return"Priv";case xi.COMPANY:return"Entreprise";case xi.EMPLOYEE:return"Salaris";case xi.VISITOR:return"Visiteurs";default:return"Non dfini"}}function he(te){if(te==null)return"#9CA3AF";switch(te){case xi.PRIVATE:return"#9CA3AF";case xi.COMPANY:return"#EF4444";case xi.EMPLOYEE:return"#F59E0B";case xi.VISITOR:return"#10B981";default:return"#6B7280"}}zs(()=>{O().catch(te=>{console.error("[NotesView] Erreur lors du chargement des donnes:",te),r.error("Erreur lors du chargement des donnes")}),document.addEventListener("click",ee),window.addEventListener("resize",m)});async function O(){var te;try{if(o.value=!0,await i.loadColumns(),s.isAdmin)try{const fe=await da.getEntreprises();e.value=fe.data}catch(fe){console.error("[NotesView][loadInitialData] Erreur chargement entreprises:",fe)}const oe={};!s.isAdmin&&((te=s.user)!=null&&te.enterprise_id)&&(oe.enterprise_id=s.user.enterprise_id);const ge=await Xo.getNotes(oe);ge.data.length>0?ge.data.forEach((fe,$e)=>{}):console.warn("[NotesView][loadInitialData] Aucune note reue du backend!");const ve=i.columns.map(fe=>fe.id),ye=ge.data.filter(fe=>{const $e=(fe.column||fe.column_id||"").toString();return $e===""||!ve.includes($e)});if(ye.length>0){console.warn(`[NotesView][loadInitialData] ${ye.length} notes avec des colonnes invalides:`,ye);for(const fe of ye)try{await Xo.updateNote(fe.id,{column:"2"})}catch($e){console.error(`[NotesView][loadInitialData] Erreur lors de l'assignation de la note ${fe.id}  la colonne  faire:`,$e)}}const pe=ge.data.map(fe=>{let $e;if(s.isAdmin&&fe.enterprise_id!=null)if(fe.enterprise_name)$e=fe.enterprise_name;else{const Ne=e.value.find(ot=>ot.id===fe.enterprise_id);$e=Ne?hl(Ne):void 0}return{id:fe.id,title:fe.title,description:fe.description,location:fe.location,columnId:(fe.column||fe.column_id||"2").toString(),access_level:fe.access_level,style:fe.style||{},comments:fe.comments||[],photos:fe.photos||[],order:fe.order||0,createdAt:fe.created_at,updatedAt:fe.updated_at,enterprise_id:fe.enterprise_id,enterprise_name:$e}});i.notes.length=0,pe.forEach(fe=>{i.addNote(fe)});for(const fe of i.columns){const $e=i.getNotesByColumn(fe.id);$e.length>0&&$e.forEach(Ne=>{})}}catch(oe){console.error("[NotesView][loadInitialData] Erreur:",oe),r.error("Erreur lors du chargement des donnes")}finally{o.value=!1}}function B(){n.push({path:"/",query:{tool:"Note"}})}async function q(te){if(!te.location){r.warning("Cette note n'est pas golocalise");return}try{const ve=(await Xo.getNote(te.id)).data.plan;n.push({path:"/",query:{lat:Array.isArray(te.location)?te.location[0].toString():te.location.coordinates[1].toString(),lng:Array.isArray(te.location)?te.location[1].toString():te.location.coordinates[0].toString(),noteId:te.id.toString(),planId:ve?ve.toString():void 0}})}catch(oe){console.error("[NotesView][viewOnMap] Erreur lors de la rcupration des dtails de la note:",oe),r.error("Erreur lors de l'ouverture de la note sur la carte")}}function F(te){if(!te.location){r.warning("Cette note n'est pas golocalise");return}let oe,ge;Array.isArray(te.location)?(oe=te.location[0],ge=te.location[1]):(oe=te.location.coordinates[1],ge=te.location.coordinates[0]);const ve=`https://www.google.com/maps/dir/?api=1&destination=${oe},${ge}`;window.open(ve,"_blank")}function R(te){f.value=JSON.parse(JSON.stringify(te)),p.value="info",l.value=!0}async function K(te){var ge,ve;let oe=te.enterprise_id;if(oe==null&&(s.isAdmin?oe=null:s.isEntreprise&&s.user?oe=s.user.id:s.isSalarie&&((ge=s.user)!=null&&ge.enterprise_id)?oe=s.user.enterprise_id:s.isVisiteur&&s.user?oe=s.user.enterprise_id??null:!s.isAdmin&&((ve=s.user)!=null&&ve.enterprise_id)&&(oe=s.user.enterprise_id),oe!==null&&te.id&&i.updateNote(te.id,{enterprise_id:oe})),oe!==null&&te.id){const ye=i.notes.findIndex(pe=>pe.id===te.id);if(ye!==-1&&!te.enterprise_name){const pe=e.value.find(fe=>fe.id===oe);pe&&(i.notes[ye].enterprise_name=hl(pe))}}}function Z(te){c.value=te,a.value=!0}async function Y(){if(c.value)try{try{await Xo.deleteNote(c.value.id)}catch(te){if(!(te.response&&te.response.status===404))throw te}i.removeNote(c.value.id),r.success("Note supprime avec succs")}catch(te){console.error("Erreur lors de la suppression de la note:",te),r.error("Erreur lors de la suppression de la note")}finally{a.value=!1,c.value=null}}async function k(te,oe){try{if(te.added){const{element:ge}=te.added,ve=typeof ge=="object"&&ge.id?ge.id:null;if(!ve)throw console.error("[NotesView][onDragChange] ID de note invalide:",ge),new Error("ID de note invalide");i.moveNote(ve,oe);const pe=X.value(oe).map($e=>$e.id);i.reorderNotes(oe,pe);const fe=i.getColumnById(oe);r.success(`Note dplace vers ${(fe==null?void 0:fe.title)||"une autre colonne"}`),await U(ve,{columnId:oe})}if(te.moved){const ge=X.value(oe),ve=ge.map(ye=>ye.id);i.reorderNotes(oe,ve),r.success("Ordre des notes mis  jour");for(const[ye,pe]of ge.entries())await U(pe.id,{order:ye})}}catch(ge){console.error("[NotesView][onDragChange] Erreur:",ge),r.error("Une erreur est survenue lors du dplacement de la note")}}async function U(te,oe){try{const ge=i.notes.find(pe=>pe.id===te);if(!ge){console.error("[NotesView][updateNoteInBackend] Note non trouve:",te);return}const ve={...oe};if(oe.columnId){const pe=i.getColumnById(oe.columnId);pe?(ve.column=pe.id,delete ve.columnId,delete ve.column_id):console.warn(`[NotesView][updateNoteInBackend] Colonne non trouve: ${oe.columnId}`)}const ye={...ge,...ve,updatedAt:new Date().toISOString()};await Xo.updateNote(te,ye)}catch(ge){throw console.error("[NotesView][updateNoteInBackend] Erreur:",ge),ge}}function H(){var oe;let te=null;s.isAdmin?te=null:s.isEntreprise&&s.user?te=s.user.id:s.isSalarie&&((oe=s.user)!=null&&oe.enterprise_id)?te=s.user.enterprise_id:s.isVisiteur&&s.user&&(te=s.user.enterprise_id??null),f.value={id:"",title:"Nouvelle note",description:"",location:null,columnId:i.getDefaultColumn.id,accessLevel:xi.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:[],photos:[],enterprise_id:te},l.value=!0,p.value="info"}const ue=bt(null),_e=bt(!1);function Ie(){_e.value=!_e.value}function ee(te){ue.value&&!ue.value.contains(te.target)&&(_e.value=!1)}return zs(()=>{document.addEventListener("click",ee),window.addEventListener("resize",m)}),Cf(()=>{document.removeEventListener("click",ee),window.removeEventListener("resize",m)}),(te,oe)=>{var ge,ve;return Me(),De("div",mK,[E("div",vK,[E("div",yK,[oe[6]||(oe[6]=E("div",{class:"sm:flex-auto"},[E("h1",{class:"text-2xl font-semibold text-gray-900"},"Notes"),E("p",{class:"mt-2 text-sm text-gray-700"}," Liste de toutes vos notes. ")],-1)),E("div",bK,[E("div",{class:"relative",ref_key:"dropdownRef",ref:ue},[E("button",{onClick:Ie,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"},oe[5]||(oe[5]=[Mr(" Crer "),E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])),_e.value?(Me(),De("div",_K,[E("div",{class:"py-1"},[E("button",{onClick:H,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note simple "),E("button",{onClick:B,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note golocalise ")])])):Ht("",!0)],512)])]),E("div",wK,[E("div",xK,[E("div",null,[oe[7]||(oe[7]=E("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),Dn(E("input",{type:"text",id:"search","onUpdate:modelValue":oe[0]||(oe[0]=ye=>I.search=ye),placeholder:"Rechercher par titre ou description...",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[ai,I.search]])]),E("div",null,[oe[9]||(oe[9]=E("label",{for:"date",class:"block text-sm font-medium text-gray-700"},"Date",-1)),Dn(E("select",{id:"date","onUpdate:modelValue":oe[1]||(oe[1]=ye=>I.date=ye),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},oe[8]||(oe[8]=[E("option",{value:""},"Toutes les dates",-1),E("option",{value:"today"},"Aujourd'hui",-1),E("option",{value:"week"},"Cette semaine",-1),E("option",{value:"month"},"Ce mois",-1)]),512),[[Li,I.date]])]),E("div",null,[oe[11]||(oe[11]=E("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accs",-1)),Dn(E("select",{id:"accessLevel","onUpdate:modelValue":oe[2]||(oe[2]=ye=>I.accessLevel=ye),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[oe[10]||(oe[10]=E("option",{value:""},"Tous les niveaux",-1)),(Me(),De(gn,null,Vn(S,ye=>E("option",{key:ye.id,value:ye.id},At(ye.title),9,LK)),64))],512),[[Li,I.accessLevel]])])])]),o.value?(Me(),De("div",CK,oe[12]||(oe[12]=[E("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1),E("p",{class:"mt-2 text-sm text-gray-500"},"Chargement des notes...",-1)]))):(Me(),De("div",SK,[W.value.length===0?(Me(),De("div",EK,oe[13]||(oe[13]=[E("p",{class:"text-sm text-gray-500"},"Aucune note trouve",-1)]))):Ht("",!0),W.value.length>0?(Me(),De("div",PK,[(Me(!0),De(gn,null,Vn(C.value,ye=>(Me(),De("div",{key:ye.id,class:"column-wrapper md:w-80 md:flex-shrink-0 mb-4 md:mb-0"},[E("div",kK,[E("div",{class:"p-3 flex items-center justify-between no-select",style:Vl({backgroundColor:ye.color+"20",borderBottom:"2px solid "+ye.color})},[E("div",MK,[E("h3",{class:"text-sm font-semibold",style:Vl({color:ye.color})},At(ye.title),5)]),E("div",AK,[E("span",TK,At(X.value(ye.id).length),1)])],4),E("div",OK,[E("div",DK,[Kr(dn(gK),{list:X.value(ye.id),class:"space-y-2 empty-column-drop-zone",group:"notes","item-key":"id",handle:v.value?null:".note-drag-handle",onChange:pe=>k(pe,ye.id),animation:150,"ghost-class":"ghost-card","chosen-class":"chosen","drag-class":"dragging",disabled:v.value},{item:Ul(({element:pe})=>[E("div",IK,[E("div",NK,[E("div",{class:bi(["p-3 flex items-center justify-between",{"note-drag-handle cursor-move":!v.value,"no-select":!0}])},[E("div",BK,[v.value?Ht("",!0):(Me(),De("svg",RK,oe[14]||(oe[14]=[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"},null,-1)]))),E("h4",FK,At(pe.title),1)]),E("div",null,[E("span",{class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:Vl({backgroundColor:he(pe.accessLevel)+"20",color:he(pe.accessLevel)})},At(ce(pe.accessLevel)||"Non dfini"),5)])],2),E("div",jK,[E("p",zK,At(pe.description||"Aucune description"),1)]),E("div",UK,[E("span",$K,At(pe.updatedAt?j(pe.updatedAt):pe.createdAt?j(pe.createdAt):"Date non dfinie"),1),dn(s).isAdmin?(Me(),De("span",VK,At(pe.enterprise_name||"Non assigne"),1)):Ht("",!0),E("div",HK,[pe.location?(Me(),De("span",GK,oe[15]||(oe[15]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]))):(Me(),De("span",WK,oe[16]||(oe[16]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)]))),pe.location?(Me(),De(gn,{key:2},[E("button",{onClick:fe=>F(pe),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Ouvrir dans Google Maps"},oe[17]||(oe[17]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]),8,qK),E("button",{onClick:fe=>q(pe),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Voir sur la carte"},oe[18]||(oe[18]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1)]),8,YK)],64)):Ht("",!0),E("button",{onClick:fe=>R(pe),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"diter la note"},oe[19]||(oe[19]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,KK),E("button",{onClick:fe=>Z(pe),class:"p-1 text-gray-400 hover:text-red-500 focus:outline-none",title:"Supprimer la note"},oe[20]||(oe[20]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,ZK)])])])])]),"empty-content":Ul(()=>oe[21]||(oe[21]=[E("div",{class:"p-4 text-center text-gray-400 text-sm italic"}," Aucune note dans cette colonne ",-1)])),_:2},1032,["list","handle","onChange","disabled"])])])])]))),128))])):Ht("",!0)]))]),a.value?(Me(),De("div",XK,[E("div",JK,[oe[23]||(oe[23]=E("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),E("div",QK,[oe[22]||(oe[22]=dl('<div class="p-4 md:p-6" data-v-7ba248b2><div class="flex items-start" data-v-7ba248b2><div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100" data-v-7ba248b2><svg class="h-6 w-6 text-red-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-v-7ba248b2><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-7ba248b2></path></svg></div><div class="ml-4 flex-1" data-v-7ba248b2><h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title" data-v-7ba248b2> Supprimer la note </h3><div class="mt-2" data-v-7ba248b2><p class="text-sm text-gray-500" data-v-7ba248b2> tes-vous sr de vouloir supprimer cette note ? Cette action est irrversible. </p></div></div></div></div>',1)),E("div",eZ,[E("button",{onClick:Y,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm"}," Supprimer "),E("button",{onClick:oe[3]||(oe[3]=ye=>a.value=!1),type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm"}," Annuler ")])])])])):Ht("",!0),l.value?(Me(),ho(vE,{key:1,note:f.value,"is-new-note":!((ge=f.value)!=null&&ge.id),location:(ve=f.value)==null?void 0:ve.location,onClose:oe[4]||(oe[4]=ye=>l.value=!1),onSave:K},null,8,["note","is-new-note","location"])):Ht("",!0)])}}}),nZ=Qc(tZ,[["__scopeId","data-v-7ba248b2"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function k0(t){return t+.5|0}const lf=(t,e,n)=>Math.max(Math.min(t,n),e);function vg(t){return lf(k0(t*2.55),0,255)}function pf(t){return lf(k0(t*255),0,255)}function wh(t){return lf(k0(t/2.55)/100,0,1)}function B5(t){return lf(k0(t*100),0,100)}const Du={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Cb=[..."0123456789ABCDEF"],rZ=t=>Cb[t&15],iZ=t=>Cb[(t&240)>>4]+Cb[t&15],Cm=t=>(t&240)>>4===(t&15),sZ=t=>Cm(t.r)&&Cm(t.g)&&Cm(t.b)&&Cm(t.a);function oZ(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Du[t[1]]*17,g:255&Du[t[2]]*17,b:255&Du[t[3]]*17,a:e===5?Du[t[4]]*17:255}:(e===7||e===9)&&(n={r:Du[t[1]]<<4|Du[t[2]],g:Du[t[3]]<<4|Du[t[4]],b:Du[t[5]]<<4|Du[t[6]],a:e===9?Du[t[7]]<<4|Du[t[8]]:255})),n}const aZ=(t,e)=>t<255?e(t):"";function lZ(t){var e=sZ(t)?rZ:iZ;return t?"#"+e(t.r)+e(t.g)+e(t.b)+aZ(t.a,e):void 0}const uZ=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function eP(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function cZ(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function hZ(t,e,n){const r=eP(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function fZ(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function B_(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,f;return s!==o&&(f=s-o,c=a>.5?f/(2-s-o):f/(s+o),l=fZ(n,r,i,f,s),l=l*60+.5),[l|0,c||0,a]}function R_(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(pf)}function F_(t,e,n){return R_(eP,t,e,n)}function dZ(t,e,n){return R_(hZ,t,e,n)}function pZ(t,e,n){return R_(cZ,t,e,n)}function tP(t){return(t%360+360)%360}function gZ(t){const e=uZ.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?vg(+e[5]):pf(+e[5]));const i=tP(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=dZ(i,s,o):e[1]==="hsv"?r=pZ(i,s,o):r=F_(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function mZ(t,e){var n=B_(t);n[0]=tP(n[0]+e),n=F_(n),t.r=n[0],t.g=n[1],t.b=n[2]}function vZ(t){if(!t)return;const e=B_(t),n=e[0],r=B5(e[1]),i=B5(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${wh(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const R5={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},F5={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function yZ(){const t={},e=Object.keys(F5),n=Object.keys(R5);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,R5[s]);s=parseInt(F5[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let Sm;function bZ(t){Sm||(Sm=yZ(),Sm.transparent=[0,0,0,0]);const e=Sm[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const _Z=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function wZ(t){const e=_Z.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?vg(o):lf(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?vg(r):lf(r,0,255)),i=255&(e[4]?vg(i):lf(i,0,255)),s=255&(e[6]?vg(s):lf(s,0,255)),{r,g:i,b:s,a:n}}}function xZ(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${wh(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const a2=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Gd=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function LZ(t,e,n){const r=Gd(wh(t.r)),i=Gd(wh(t.g)),s=Gd(wh(t.b));return{r:pf(a2(r+n*(Gd(wh(e.r))-r))),g:pf(a2(i+n*(Gd(wh(e.g))-i))),b:pf(a2(s+n*(Gd(wh(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Em(t,e,n){if(t){let r=B_(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=F_(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function nP(t,e){return t&&Object.assign(e||{},t)}function j5(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=pf(t[3]))):(e=nP(t,{r:0,g:0,b:0,a:1}),e.a=pf(e.a)),e}function CZ(t){return t.charAt(0)==="r"?wZ(t):gZ(t)}class c0{constructor(e){if(e instanceof c0)return e;const n=typeof e;let r;n==="object"?r=j5(e):n==="string"&&(r=oZ(e)||bZ(e)||CZ(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=nP(this._rgb);return e&&(e.a=wh(e.a)),e}set rgb(e){this._rgb=j5(e)}rgbString(){return this._valid?xZ(this._rgb):void 0}hexString(){return this._valid?lZ(this._rgb):void 0}hslString(){return this._valid?vZ(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=LZ(this._rgb,e._rgb,n)),this}clone(){return new c0(this.rgb)}alpha(e){return this._rgb.a=pf(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=k0(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Em(this._rgb,2,e),this}darken(e){return Em(this._rgb,2,-e),this}saturate(e){return Em(this._rgb,1,e),this}desaturate(e){return Em(this._rgb,1,-e),this}rotate(e){return mZ(this._rgb,e),this}}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function vh(){}const SZ=(()=>{let t=0;return()=>t++})();function _i(t){return t===null||typeof t>"u"}function xs(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ci(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Js(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function cu(t,e){return Js(t)?t:e}function Ur(t,e){return typeof t>"u"?e:t}const EZ=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,rP=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function rs(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Bi(t,e,n,r){let i,s,o;if(xs(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(ci(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function Gv(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function Wv(t){if(xs(t))return t.map(Wv);if(ci(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=Wv(t[n[i]]);return e}return t}function iP(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function PZ(t,e,n,r){if(!iP(t))return;const i=e[t],s=n[t];ci(i)&&ci(s)?h0(i,s,r):e[t]=Wv(s)}function h0(t,e,n){const r=xs(e)?e:[e],i=r.length;if(!ci(t))return t;n=n||{};const s=n.merger||PZ;let o;for(let a=0;a<i;++a){if(o=r[a],!ci(o))continue;const l=Object.keys(o);for(let c=0,f=l.length;c<f;++c)s(l[c],t,o,n)}return t}function Ug(t,e){return h0(t,e,{merger:kZ})}function kZ(t,e,n){if(!iP(t))return;const r=e[t],i=n[t];ci(r)&&ci(i)?Ug(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Wv(i))}const z5={"":t=>t,x:t=>t.x,y:t=>t.y};function MZ(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function AZ(t){const e=MZ(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function _f(t,e){return(z5[e]||(z5[e]=AZ(e)))(t)}function j_(t){return t.charAt(0).toUpperCase()+t.slice(1)}const f0=t=>typeof t<"u",wf=t=>typeof t=="function",U5=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function TZ(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const cs=Math.PI,us=2*cs,OZ=us+cs,qv=Number.POSITIVE_INFINITY,DZ=cs/180,mo=cs/2,$f=cs/4,$5=cs*2/3,uf=Math.log10,Kc=Math.sign;function $g(t,e,n){return Math.abs(t-e)<n}function V5(t){const e=Math.round(t);t=$g(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(uf(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function IZ(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function Lp(t){return!isNaN(parseFloat(t))&&isFinite(t)}function NZ(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function sP(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function fc(t){return t*(cs/180)}function z_(t){return t*(180/cs)}function H5(t){if(!Js(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function oP(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*cs&&(s+=us),{angle:s,distance:i}}function Sb(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function BZ(t,e){return(t-e+OZ)%us-cs}function hu(t){return(t%us+us)%us}function d0(t,e,n,r){const i=hu(t),s=hu(e),o=hu(n),a=hu(s-i),l=hu(o-i),c=hu(i-s),f=hu(i-o);return i===s||i===o||r&&s===o||a>l&&c<f}function Qo(t,e,n){return Math.max(e,Math.min(n,t))}function RZ(t){return Qo(t,-32768,32767)}function Eh(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function U_(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const Ph=(t,e,n,r)=>U_(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),FZ=(t,e,n)=>U_(t,n,r=>t[r][e]>=n);function jZ(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const aP=["push","pop","shift","splice","unshift"];function zZ(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),aP.forEach(n=>{const r="_onData"+j_(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function G5(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(aP.forEach(s=>{delete t[s]}),delete t._chartjs)}function lP(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const uP=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function cP(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,uP.call(window,()=>{r=!1,t.apply(e,n)}))}}function UZ(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const $_=t=>t==="start"?"left":t==="end"?"right":"center",Na=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,$Z=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function hP(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:f,minDefined:p,maxDefined:v}=o.getUserBounds();p&&(i=Qo(Math.min(Ph(a,l,c).lo,n?r:Ph(e,l,o.getPixelForValue(c)).lo),0,r-1)),v?s=Qo(Math.max(Ph(a,o.axis,f,!0).hi+1,n?0:Ph(e,l,o.getPixelForValue(f),!0).hi+1),i,r)-i:s=r-i}return{start:i,count:s}}function fP(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const Pm=t=>t===0||t===1,W5=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*us/n)),q5=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*us/n)+1,Vg={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*mo)+1,easeOutSine:t=>Math.sin(t*mo),easeInOutSine:t=>-.5*(Math.cos(cs*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Pm(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Pm(t)?t:W5(t,.075,.3),easeOutElastic:t=>Pm(t)?t:q5(t,.075,.3),easeInOutElastic(t){return Pm(t)?t:t<.5?.5*W5(t*2,.1125,.45):.5+.5*q5(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Vg.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Vg.easeInBounce(t*2)*.5:Vg.easeOutBounce(t*2-1)*.5+.5};function V_(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Y5(t){return V_(t)?t:new c0(t)}function l2(t){return V_(t)?t:new c0(t).saturate(.5).darken(.1).hexString()}const VZ=["x","y","borderWidth","radius","tension"],HZ=["color","borderColor","backgroundColor"];function GZ(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:HZ},numbers:{type:"number",properties:VZ}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function WZ(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const K5=new Map;function qZ(t,e){e=e||{};const n=t+JSON.stringify(e);let r=K5.get(n);return r||(r=new Intl.NumberFormat(t,e),K5.set(n,r)),r}function M0(t,e,n){return qZ(e,n).format(t)}const dP={values(t){return xs(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=YZ(t,n)}const o=uf(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),M0(t,r,l)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(uf(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?dP.numeric.call(this,t,e,n):""}};function YZ(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Iy={formatters:dP};function KZ(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Iy.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const fd=Object.create(null),Eb=Object.create(null);function Hg(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function u2(t,e,n){return typeof e=="string"?h0(Hg(t,e),n):h0(Hg(t,""),e)}class ZZ{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>l2(i.backgroundColor),this.hoverBorderColor=(r,i)=>l2(i.borderColor),this.hoverColor=(r,i)=>l2(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return u2(this,e,n)}get(e){return Hg(this,e)}describe(e,n){return u2(Eb,e,n)}override(e,n){return u2(fd,e,n)}route(e,n,r,i){const s=Hg(this,e),o=Hg(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return ci(l)?Object.assign({},c,l):Ur(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Qs=new ZZ({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[GZ,WZ,KZ]);function XZ(t){return!t||_i(t.size)||_i(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Yv(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function JZ(t,e,n,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,f,p,v;for(l=0;l<a;l++)if(p=n[l],p!=null&&!xs(p))o=Yv(t,i,s,o,p);else if(xs(p))for(c=0,f=p.length;c<f;c++)v=p[c],v!=null&&!xs(v)&&(o=Yv(t,i,s,o,v));t.restore();const m=s.length/2;if(m>n.length){for(l=0;l<m;l++)delete i[s[l]];s.splice(0,m)}return o}function Vf(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function Z5(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function Pb(t,e,n,r){pP(t,e,n,r,null)}function pP(t,e,n,r,i){let s,o,a,l,c,f,p,v;const m=e.pointStyle,C=e.rotation,S=e.radius;let I=(C||0)*DZ;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(I),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(S)||S<=0)){switch(t.beginPath(),m){default:i?t.ellipse(n,r,i/2,S,0,0,us):t.arc(n,r,S,0,us),t.closePath();break;case"triangle":f=i?i/2:S,t.moveTo(n+Math.sin(I)*f,r-Math.cos(I)*S),I+=$5,t.lineTo(n+Math.sin(I)*f,r-Math.cos(I)*S),I+=$5,t.lineTo(n+Math.sin(I)*f,r-Math.cos(I)*S),t.closePath();break;case"rectRounded":c=S*.516,l=S-c,o=Math.cos(I+$f)*l,p=Math.cos(I+$f)*(i?i/2-c:l),a=Math.sin(I+$f)*l,v=Math.sin(I+$f)*(i?i/2-c:l),t.arc(n-p,r-a,c,I-cs,I-mo),t.arc(n+v,r-o,c,I-mo,I),t.arc(n+p,r+a,c,I,I+mo),t.arc(n-v,r+o,c,I+mo,I+cs),t.closePath();break;case"rect":if(!C){l=Math.SQRT1_2*S,f=i?i/2:l,t.rect(n-f,r-l,2*f,2*l);break}I+=$f;case"rectRot":p=Math.cos(I)*(i?i/2:S),o=Math.cos(I)*S,a=Math.sin(I)*S,v=Math.sin(I)*(i?i/2:S),t.moveTo(n-p,r-a),t.lineTo(n+v,r-o),t.lineTo(n+p,r+a),t.lineTo(n-v,r+o),t.closePath();break;case"crossRot":I+=$f;case"cross":p=Math.cos(I)*(i?i/2:S),o=Math.cos(I)*S,a=Math.sin(I)*S,v=Math.sin(I)*(i?i/2:S),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+v,r-o),t.lineTo(n-v,r+o);break;case"star":p=Math.cos(I)*(i?i/2:S),o=Math.cos(I)*S,a=Math.sin(I)*S,v=Math.sin(I)*(i?i/2:S),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+v,r-o),t.lineTo(n-v,r+o),I+=$f,p=Math.cos(I)*(i?i/2:S),o=Math.cos(I)*S,a=Math.sin(I)*S,v=Math.sin(I)*(i?i/2:S),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+v,r-o),t.lineTo(n-v,r+o);break;case"line":o=i?i/2:Math.cos(I)*S,a=Math.sin(I)*S,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(I)*(i?i/2:S),r+Math.sin(I)*S);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function kh(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Ny(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function By(t){t.restore()}function QZ(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function eX(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function tX(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),_i(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function nX(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,f=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,f),t.lineTo(a,f),t.stroke()}}function rX(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function dd(t,e,n,r,i,s={}){const o=xs(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,tX(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&rX(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),_i(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),nX(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function p0(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*cs,cs,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,cs,mo,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,mo,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-mo,!0),t.lineTo(n+o.topLeft,r)}const iX=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,sX=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function oX(t,e){const n=(""+t).match(iX);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const aX=t=>+t||0;function H_(t,e){const n={},r=ci(e),i=r?Object.keys(e):e,s=ci(t)?r?o=>Ur(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=aX(s(o));return n}function gP(t){return H_(t,{top:"y",right:"x",bottom:"y",left:"x"})}function od(t){return H_(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Va(t){const e=gP(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Bo(t,e){t=t||{},e=e||Qs.font;let n=Ur(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=Ur(t.style,e.style);r&&!(""+r).match(sX)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:Ur(t.family,e.family),lineHeight:oX(Ur(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:Ur(t.weight,e.weight),string:""};return i.string=XZ(i),i}function yg(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function lX(t,e,n){const{min:r,max:i}=t,s=rP(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function Sf(t,e){return Object.assign(Object.create(t),e)}function G_(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=bP("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>G_([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return vP(a,l,()=>mX(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return J5(a).includes(l)},ownKeys(a){return J5(a)},set(a,l,c){const f=a._storage||(a._storage=i());return a[l]=f[l]=c,delete a._keys,!0}})}function Cp(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:mP(t,r),setContext:s=>Cp(t,s,n,r),override:s=>Cp(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return vP(s,o,()=>cX(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function mP(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:wf(n)?n:()=>n,isIndexable:wf(r)?r:()=>r}}const uX=(t,e)=>t?t+j_(e):e,W_=(t,e)=>ci(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function vP(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const r=n();return t[e]=r,r}function cX(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return wf(a)&&o.isScriptable(e)&&(a=hX(e,a,t,n)),xs(a)&&a.length&&(a=fX(e,a,t,o.isIndexable)),W_(e,a)&&(a=Cp(a,i,s&&s[e],o)),a}function hX(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),W_(t,l)&&(l=q_(i._scopes,i,t,l)),l}function fX(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(ci(e[0])){const l=e,c=i._scopes.filter(f=>f!==l);e=[];for(const f of l){const p=q_(c,i,t,f);e.push(Cp(p,s,o&&o[t],a))}}return e}function yP(t,e,n){return wf(t)?t(e,n):t}const dX=(t,e)=>t===!0?e:typeof t=="string"?_f(e,t):void 0;function pX(t,e,n,r,i){for(const s of e){const o=dX(n,s);if(o){t.add(o);const a=yP(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function q_(t,e,n,r){const i=e._rootScopes,s=yP(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=X5(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=X5(a,o,s,l,r),l===null)?!1:G_(Array.from(a),[""],i,s,()=>gX(e,n,r))}function X5(t,e,n,r,i){for(;n;)n=pX(t,e,n,r,i);return n}function gX(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return xs(i)&&ci(n)?n:i||{}}function mX(t,e,n,r){let i;for(const s of e)if(i=bP(uX(s,t),n),typeof i<"u")return W_(t,i)?q_(n,r,t,i):i}function bP(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function J5(t){let e=t._keys;return e||(e=t._keys=vX(t._scopes)),e}function vX(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function _P(t,e,n,r){const{iScale:i}=t,{key:s="r"}=this._parsing,o=new Array(r);let a,l,c,f;for(a=0,l=r;a<l;++a)c=a+n,f=e[c],o[a]={r:i.parse(_f(f,s),c)};return o}const yX=Number.EPSILON||1e-14,Sp=(t,e)=>e<t.length&&!t[e].skip&&t[e],wP=t=>t==="x"?"y":"x";function bX(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=Sb(s,i),l=Sb(o,s);let c=a/(a+l),f=l/(a+l);c=isNaN(c)?0:c,f=isNaN(f)?0:f;const p=r*c,v=r*f;return{previous:{x:s.x-p*(o.x-i.x),y:s.y-p*(o.y-i.y)},next:{x:s.x+v*(o.x-i.x),y:s.y+v*(o.y-i.y)}}}function _X(t,e,n){const r=t.length;let i,s,o,a,l,c=Sp(t,0);for(let f=0;f<r-1;++f)if(l=c,c=Sp(t,f+1),!(!l||!c)){if($g(e[f],0,yX)){n[f]=n[f+1]=0;continue}i=n[f]/e[f],s=n[f+1]/e[f],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[f]=i*o*e[f],n[f+1]=s*o*e[f])}}function wX(t,e,n="x"){const r=wP(n),i=t.length;let s,o,a,l=Sp(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=Sp(t,c+1),!a)continue;const f=a[n],p=a[r];o&&(s=(f-o[n])/3,a[`cp1${n}`]=f-s,a[`cp1${r}`]=p-s*e[c]),l&&(s=(l[n]-f)/3,a[`cp2${n}`]=f+s,a[`cp2${r}`]=p+s*e[c])}}function xX(t,e="x"){const n=wP(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=Sp(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=Sp(t,o+1),!!l){if(c){const f=c[e]-l[e];i[o]=f!==0?(c[n]-l[n])/f:0}s[o]=a?c?Kc(i[o-1])!==Kc(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}_X(t,i,s),wX(t,s,e)}function km(t,e,n){return Math.max(Math.min(t,n),e)}function LX(t,e){let n,r,i,s,o,a=kh(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&kh(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=km(i.cp1x,e.left,e.right),i.cp1y=km(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=km(i.cp2x,e.left,e.right),i.cp2y=km(i.cp2y,e.top,e.bottom)))}function CX(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")xX(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=bX(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&LX(t,n)}function Y_(){return typeof window<"u"&&typeof document<"u"}function K_(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Kv(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Ry=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function SX(t,e){return Ry(t).getPropertyValue(e)}const EX=["top","right","bottom","left"];function ad(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=EX[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const PX=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function kX(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(PX(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Yf(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=Ry(n),s=i.boxSizing==="border-box",o=ad(i,"padding"),a=ad(i,"border","width"),{x:l,y:c,box:f}=kX(t,n),p=o.left+(f&&a.left),v=o.top+(f&&a.top);let{width:m,height:C}=e;return s&&(m-=o.width+a.width,C-=o.height+a.height),{x:Math.round((l-p)/m*n.width/r),y:Math.round((c-v)/C*n.height/r)}}function MX(t,e,n){let r,i;if(e===void 0||n===void 0){const s=K_(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Ry(s),l=ad(a,"border","width"),c=ad(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=Kv(a.maxWidth,s,"clientWidth"),i=Kv(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||qv,maxHeight:i||qv}}const Mm=t=>Math.round(t*10)/10;function AX(t,e,n,r){const i=Ry(t),s=ad(i,"margin"),o=Kv(i.maxWidth,t,"clientWidth")||qv,a=Kv(i.maxHeight,t,"clientHeight")||qv,l=MX(t,e,n);let{width:c,height:f}=l;if(i.boxSizing==="content-box"){const v=ad(i,"border","width"),m=ad(i,"padding");c-=m.width+v.width,f-=m.height+v.height}return c=Math.max(0,c-s.width),f=Math.max(0,r?c/r:f-s.height),c=Mm(Math.min(c,o,l.maxWidth)),f=Mm(Math.min(f,a,l.maxHeight)),c&&!f&&(f=Mm(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&f>l.height&&(f=l.height,c=Mm(Math.floor(f*r))),{width:c,height:f}}function Q5(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const TX=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Y_()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function e3(t,e){const n=SX(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Kf(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function OX(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function DX(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Kf(t,i,n),a=Kf(i,s,n),l=Kf(s,e,n),c=Kf(o,a,n),f=Kf(a,l,n);return Kf(c,f,n)}const IX=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},NX=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function pp(t,e,n){return t?IX(e,n):NX()}function xP(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function LP(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function CP(t){return t==="angle"?{between:d0,compare:BZ,normalize:hu}:{between:Eh,compare:(e,n)=>e-n,normalize:e=>e}}function t3({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function BX(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=CP(r),l=e.length;let{start:c,end:f,loop:p}=t,v,m;if(p){for(c+=l,f+=l,v=0,m=l;v<m&&o(a(e[c%l][r]),i,s);++v)c--,f--;c%=l,f%=l}return f<c&&(f+=l),{start:c,end:f,loop:p,style:t.style}}function SP(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=CP(r),{start:f,end:p,loop:v,style:m}=BX(t,e,n),C=[];let S=!1,I=null,N,T,j;const W=()=>l(i,j,N)&&a(i,j)!==0,X=()=>a(s,N)===0||l(s,j,N),ce=()=>S||W(),he=()=>!S||X();for(let O=f,B=f;O<=p;++O)T=e[O%o],!T.skip&&(N=c(T[r]),N!==j&&(S=l(N,i,s),I===null&&ce()&&(I=a(N,i)===0?O:B),I!==null&&he()&&(C.push(t3({start:I,end:O,loop:v,count:o,style:m})),I=null),B=O,j=N));return I!==null&&C.push(t3({start:I,end:p,loop:v,count:o,style:m})),C}function EP(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=SP(r[i],t.points,e);s.length&&n.push(...s)}return n}function RX(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function FX(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function jX(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=RX(n,i,s,r);if(r===!0)return n3(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return n3(t,FX(n,o,l,c),n,e)}function n3(t,e,n,r){return!r||!r.setContext||!n?e:zX(t,e,n,r)}function zX(t,e,n,r){const i=t._chart.getContext(),s=r3(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let f=s,p=e[0].start,v=p;function m(C,S,I,N){const T=a?-1:1;if(C!==S){for(C+=l;n[C%l].skip;)C-=T;for(;n[S%l].skip;)S+=T;C%l!==S%l&&(c.push({start:C%l,end:S%l,loop:I,style:N}),f=N,p=S%l)}}for(const C of e){p=a?p:C.start;let S=n[p%l],I;for(v=p+1;v<=C.end;v++){const N=n[v%l];I=r3(r.setContext(Sf(i,{type:"segment",p0:S,p1:N,p0DataIndex:(v-1)%l,p1DataIndex:v%l,datasetIndex:o}))),UX(I,f)&&m(p,v-1,C.loop,f),S=N,f=I}p<v-1&&m(p,v-1,C.loop,f)}return c}function r3(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function UX(t,e){if(!e)return!1;const n=[],r=function(i,s){return V_(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class $X{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=uP.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var yh=new $X;const i3="transparent",VX={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=Y5(t||i3),i=r.valid&&Y5(e||i3);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class HX{constructor(e,n,r,i){const s=n[r];i=yg([e.to,i,s,e.from]);const o=yg([e.from,s,i]);this._active=!0,this._fn=e.fn||VX[e.type||typeof o],this._easing=Vg[e.easing]||Vg.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=yg([e.to,n,i,e.from]),this._from=yg([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class PP{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ci(e))return;const n=Object.keys(Qs.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!ci(s))return;const o={};for(const a of n)o[a]=s[a];(xs(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=WX(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&GX(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const f=n[c];let p=s[c];const v=r.get(c);if(p)if(v&&p.active()){p.update(v,f,a);continue}else p.cancel();if(!v||!v.duration){e[c]=f;continue}s[c]=p=new HX(v,e,c,f),i.push(p)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return yh.add(this._chart,r),!0}}function GX(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function WX(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function s3(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function qX(t,e,n){if(n===!1)return!1;const r=s3(t,n),i=s3(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function YX(t){let e,n,r,i;return ci(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function kP(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function o3(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e!==null){for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(r.all)continue;break}c=t.values[l],Js(c)&&(s||e===0||Kc(e)===Kc(c))&&(e+=c)}return e}}function KX(t){const e=Object.keys(t),n=new Array(e.length);let r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r],n[r]={x:s,y:t[s]};return n}function a3(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function ZX(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function XX(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function JX(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function l3(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function u3(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,f=ZX(s,o,r),p=e.length;let v;for(let m=0;m<p;++m){const C=e[m],{[l]:S,[c]:I}=C,N=C._stacks||(C._stacks={});v=N[c]=JX(i,f,S),v[a]=I,v._top=l3(v,o,!0,r.type),v._bottom=l3(v,o,!1,r.type);const T=v._visualValues||(v._visualValues={});T[a]=I}}function c2(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function QX(t,e){return Sf(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function eJ(t,e,n){return Sf(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Qp(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const h2=t=>t==="reset"||t==="none",c3=(t,e)=>e?t:Object.assign({},t),tJ=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:kP(n,!0),values:null};class pc{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=a3(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Qp(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(p,v,m,C)=>p==="x"?v:p==="r"?C:m,s=n.xAxisID=Ur(r.xAxisID,c2(e,"x")),o=n.yAxisID=Ur(r.yAxisID,c2(e,"y")),a=n.rAxisID=Ur(r.rAxisID,c2(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),f=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(f)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&G5(this._data,this),e._stacked&&Qp(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(ci(n))this._data=KX(n);else if(r!==n){if(r){G5(r,this);const i=this._cachedMeta;Qp(i),i._parsed=[]}n&&Object.isExtensible(n)&&zZ(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=a3(n.vScale,n),n.stack!==r.stack&&(i=!0,Qp(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&u3(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],f,p,v;if(this._parsing===!1)r._parsed=i,r._sorted=!0,v=i;else{xs(i[e])?v=this.parseArrayData(r,i,e,n):ci(i[e])?v=this.parseObjectData(r,i,e,n):v=this.parsePrimitiveData(r,i,e,n);const m=()=>p[a]===null||c&&p[a]<c[a];for(f=0;f<n;++f)r._parsed[f+e]=p=v[f],l&&(m()&&(l=!1),c=p);r._sorted=l}o&&u3(this,v)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),f=s===o,p=new Array(i);let v,m,C;for(v=0,m=i;v<m;++v)C=v+r,p[v]={[a]:f||s.parse(c[C],C),[l]:o.parse(n[C],C)};return p}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,f,p;for(l=0,c=i;l<c;++l)f=l+r,p=n[f],a[l]={x:s.parse(p[0],f),y:o.parse(p[1],f)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let f,p,v,m;for(f=0,p=i;f<p;++f)v=f+r,m=n[v],c[f]={x:s.parse(_f(m,a),v),y:o.parse(_f(m,l),v)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:kP(i,!0),values:n._stacks[e.axis]._visualValues};return o3(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=o3(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=tJ(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:f,max:p}=XX(a);let v,m;function C(){m=i[v];const S=m[a.axis];return!Js(m[e.axis])||f>S||p<S}for(v=0;v<o&&!(!C()&&(this.updateRangeFromParsed(c,e,m,l),s));++v);if(s){for(v=o-1;v>=0;--v)if(!C()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],Js(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=YX(Ur(this.options.clip,qX(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let f;for(r.dataset&&r.dataset.draw(e,s,a,l),f=a;f<a+l;++f){const p=i[f];p.hidden||(p.active&&c?o.push(p):p.draw(e,s))}for(f=0;f<o.length;++f)o[f].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=eJ(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=QX(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&f0(r);if(a)return c3(a,l);const c=this.chart.config,f=c.datasetElementScopeKeys(this._type,e),p=i?[`${e}Hover`,"hover",e,""]:[e,""],v=c.getOptionScopes(this.getDataset(),f),m=Object.keys(Qs.elements[e]),C=()=>this.getContext(r,i,n),S=c.resolveNamedOptions(v,m,C,p);return S.$shared&&(S.$shared=l,s[o]=Object.freeze(c3(S,l))),S}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const f=this.chart.config,p=f.datasetAnimationScopeKeys(this._type,n),v=f.getOptionScopes(this.getDataset(),p);l=f.createResolver(v,this.getContext(e,r,n))}const c=new PP(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||h2(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){h2(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!h2(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&Qp(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Ke(pc,"defaults",{}),Ke(pc,"datasetElementType",null),Ke(pc,"dataElementType",null);function nJ(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=lP(r.sort((i,s)=>i-s))}return t._cache.$bar}function rJ(t){const e=t.iScale,n=nJ(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(f0(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function iJ(t,e,n,r){const i=n.barThickness;let s,o;return _i(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function sJ(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function oJ(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function MP(t,e,n,r){return xs(t)?oJ(t,e,n,r):e[n.axis]=n.parse(t,r),e}function h3(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,f,p,v;for(c=n,f=n+r;c<f;++c)v=e[c],p={},p[i.axis]=a||i.parse(o[c],c),l.push(MP(v,p,s,c));return l}function f2(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function aJ(t,e,n){return t!==0?Kc(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function lJ(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function uJ(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:f}=lJ(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=f:(s[f3(f,o,a,l)]=!0,i=c)),s[f3(i,o,a,l)]=!0,t.borderSkipped=s}function f3(t,e,n,r){return r?(t=cJ(t,e,n),t=d3(t,n,e)):t=d3(t,e,n),t}function cJ(t,e,n){return t===e?n:t===n?e:t}function d3(t,e,n){return t==="start"?e:t==="end"?n:t}function hJ(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class ov extends pc{parsePrimitiveData(e,n,r,i){return h3(e,n,r,i)}parseArrayData(e,n,r,i){return h3(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,f=o.axis==="x"?a:l,p=[];let v,m,C,S;for(v=r,m=r+i;v<m;++v)S=n[v],C={},C[s.axis]=s.parse(_f(S,c),v),p.push(MP(_f(S,f),C,o,v));return p}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=f2(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),f=this._getRuler(),{sharedOptions:p,includeOptions:v}=this._getSharedOptions(n,i);for(let m=n;m<n+r;m++){const C=this.getParsed(m),S=s||_i(C[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),I=this._calculateBarIndexPixels(m,f),N=(C._stacks||{})[a.axis],T={horizontal:c,base:S.base,enableBorderRadius:!N||f2(C._custom)||o===N._top||o===N._bottom,x:c?S.head:I.center,y:c?I.center:S.head,height:c?I.size:Math.abs(S.size),width:c?Math.abs(S.size):I.size};v&&(T.options=p||this.resolveDataElementOptions(m,e[m].active?"active":i));const j=T.options||e[m].options;uJ(T,j,N,o),hJ(T,j,f.ratio),this.updateElement(e[m],m,T,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),s=r.options.stacked,o=[],a=l=>{const c=l.controller.getParsed(n),f=c&&c[l.vScale.axis];if(_i(f)||isNaN(f))return!0};for(const l of i)if(!(n!==void 0&&a(l))&&((s===!1||o.indexOf(l.stack)===-1||s===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||rJ(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,f=f2(c);let p=l[n.axis],v=0,m=r?this.applyStack(n,l,r):p,C,S;m!==p&&(v=m-p,m=p),f&&(p=c.barStart,m=c.barEnd-c.barStart,p!==0&&Kc(p)!==Kc(c.barEnd)&&(v=0),v+=p);const I=!_i(s)&&!f?s:v;let N=n.getPixelForValue(I);if(this.chart.getDataVisibility(e)?C=n.getPixelForValue(v+m):C=N,S=C-N,Math.abs(S)<o){S=aJ(S,n,a)*o,p===a&&(N-=S/2);const T=n.getPixelForDecimal(0),j=n.getPixelForDecimal(1),W=Math.min(T,j),X=Math.max(T,j);N=Math.max(Math.min(N,X),W),C=N+S,r&&!f&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(C)-n.getValueForPixel(N))}if(N===n.getPixelForValue(a)){const T=Kc(S)*n.getLineWidthForValue(a)/2;N+=T,S-=T}return{size:S,base:N,head:C,center:C+S/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=Ur(i.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(e):n.stackCount,f=i.barThickness==="flex"?sJ(e,n,i,c):iJ(e,n,i,c),p=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=f.start+f.chunk*p+f.chunk/2,l=Math.min(o,f.chunk*f.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&r[s].draw(this._ctx)}}Ke(ov,"id","bar"),Ke(ov,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Ke(ov,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class av extends pc{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,r,i){const s=super.parsePrimitiveData(e,n,r,i);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+r).radius;return s}parseArrayData(e,n,r,i){const s=super.parseArrayData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=Ur(a[2],this.resolveDataElementOptions(o+r).radius)}return s}parseObjectData(e,n,r,i){const s=super.parseObjectData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=Ur(a&&a.r&&+a.r,this.resolveDataElementOptions(o+r).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:r[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,i),f=o.axis,p=a.axis;for(let v=n;v<n+r;v++){const m=e[v],C=!s&&this.getParsed(v),S={},I=S[f]=s?o.getPixelForDecimal(.5):o.getPixelForValue(C[f]),N=S[p]=s?a.getBasePixel():a.getPixelForValue(C[p]);S.skip=isNaN(I)||isNaN(N),c&&(S.options=l||this.resolveDataElementOptions(v,m.active?"active":i),s&&(S.options.radius=0)),this.updateElement(m,v,S,i)}}resolveDataElementOptions(e,n){const r=this.getParsed(e);let i=super.resolveDataElementOptions(e,n);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return n!=="active"&&(i.radius=0),i.radius+=Ur(r&&r._custom,s),i}}Ke(av,"id","bubble"),Ke(av,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Ke(av,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function fJ(t,e,n){let r=1,i=1,s=0,o=0;if(e<us){const a=t,l=a+e,c=Math.cos(a),f=Math.sin(a),p=Math.cos(l),v=Math.sin(l),m=(j,W,X)=>d0(j,a,l,!0)?1:Math.max(W,W*n,X,X*n),C=(j,W,X)=>d0(j,a,l,!0)?-1:Math.min(W,W*n,X,X*n),S=m(0,c,p),I=m(mo,f,v),N=C(cs,c,p),T=C(cs+mo,f,v);r=(S-N)/2,i=(I-T)/2,s=-(S+N)/2,o=-(I+T)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class Qf extends pc{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(ci(r[e])){const{key:l="value"}=this._parsing;s=c=>+_f(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return fc(this.options.rotation-90)}_getCircumference(){return fc(this.options.circumference)}_getRotationExtents(){let e=us,n=-us;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(EZ(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:f,rotation:p}=this._getRotationExtents(),{ratioX:v,ratioY:m,offsetX:C,offsetY:S}=fJ(p,f,l),I=(r.width-o)/v,N=(r.height-o)/m,T=Math.max(Math.min(I,N)/2,0),j=rP(this.options.radius,T),W=Math.max(j*l,0),X=(j-W)/this._getVisibleDatasetWeightTotal();this.offsetX=C*j,this.offsetY=S*j,i.total=this.calculateTotal(),this.outerRadius=j-X*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-X*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/us)}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,f=(a.left+a.right)/2,p=(a.top+a.bottom)/2,v=s&&c.animateScale,m=v?0:this.innerRadius,C=v?0:this.outerRadius,{sharedOptions:S,includeOptions:I}=this._getSharedOptions(n,i);let N=this._getRotation(),T;for(T=0;T<n;++T)N+=this._circumference(T,s);for(T=n;T<n+r;++T){const j=this._circumference(T,s),W=e[T],X={x:f+this.offsetX,y:p+this.offsetY,startAngle:N,endAngle:N+j,circumference:j,outerRadius:C,innerRadius:m};I&&(X.options=S||this.resolveDataElementOptions(T,W.active?"active":i)),N+=j,this.updateElement(W,T,X,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?us*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=M0(n._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,s,o,a,l;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(Ur(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Ke(Qf,"id","doughnut"),Ke(Qf,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Ke(Qf,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Ke(Qf,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class lv extends pc{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=hP(n,i,o);this._drawStart=a,this._drawCount=l,fP(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(n,i),v=o.axis,m=a.axis,{spanGaps:C,segment:S}=this.options,I=Lp(C)?C:Number.POSITIVE_INFINITY,N=this.chart._animationsDisabled||s||i==="none",T=n+r,j=e.length;let W=n>0&&this.getParsed(n-1);for(let X=0;X<j;++X){const ce=e[X],he=N?ce:{};if(X<n||X>=T){he.skip=!0;continue}const O=this.getParsed(X),B=_i(O[m]),q=he[v]=o.getPixelForValue(O[v],X),F=he[m]=s||B?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,O,l):O[m],X);he.skip=isNaN(q)||isNaN(F)||B,he.stop=X>0&&Math.abs(O[v]-W[v])>I,S&&(he.parsed=O,he.raw=c.data[X]),p&&(he.options=f||this.resolveDataElementOptions(X,ce.active?"active":i)),N||this.updateElement(ce,X,he,i),W=O}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Ke(lv,"id","line"),Ke(lv,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Ke(lv,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Gg extends pc{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=M0(n._parsed[e].r,r.options.locale);return{label:i[e]||"",value:s}}parseObjectData(e,n,r,i){return _P.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,r=e.options,i=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(i/2,0),o=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,f=c.xCenter,p=c.yCenter,v=c.getIndexAngle(0)-.5*cs;let m=v,C;const S=360/this.countVisibleElements();for(C=0;C<n;++C)m+=this._computeAngle(C,i,S);for(C=n;C<n+r;C++){const I=e[C];let N=m,T=m+this._computeAngle(C,i,S),j=o.getDataVisibility(C)?c.getDistanceFromCenterForValue(this.getParsed(C).r):0;m=T,s&&(l.animateScale&&(j=0),l.animateRotate&&(N=T=v));const W={x:f,y:p,innerRadius:0,outerRadius:j,startAngle:N,endAngle:T,options:this.resolveDataElementOptions(C,I.active?"active":i)};this.updateElement(I,C,W,i)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((r,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&n++}),n}_computeAngle(e,n,r){return this.chart.getDataVisibility(e)?fc(this.resolveDataElementOptions(e,n).angle||r):0}}Ke(Gg,"id","polarArea"),Ke(Gg,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Ke(Gg,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class kb extends Qf{}Ke(kb,"id","pie"),Ke(kb,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class uv extends pc{getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,i){return _P.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta,r=n.dataset,i=n.data||[],s=n.iScale.getLabels();if(r.points=i,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===i.length,options:o};this.updateElement(r,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,n,r,i){const s=this._cachedMeta.rScale,o=i==="reset";for(let a=n;a<n+r;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":i),f=s.getPointPositionForValue(a,this.getParsed(a).r),p=o?s.xCenter:f.x,v=o?s.yCenter:f.y,m={x:p,y:v,angle:f.angle,skip:isNaN(p)||isNaN(v),options:c};this.updateElement(l,a,m,i)}}}Ke(uv,"id","radar"),Ke(uv,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Ke(uv,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class cv extends pc{getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:r[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:r=[]}=n,i=this.chart._animationsDisabled;let{start:s,count:o}=hP(n,r,i);if(this._drawStart=s,this._drawCount=o,fP(n)&&(s=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=r;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(r,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,f=this.resolveDataElementOptions(n,i),p=this.getSharedOptions(f),v=this.includeOptions(i,p),m=o.axis,C=a.axis,{spanGaps:S,segment:I}=this.options,N=Lp(S)?S:Number.POSITIVE_INFINITY,T=this.chart._animationsDisabled||s||i==="none";let j=n>0&&this.getParsed(n-1);for(let W=n;W<n+r;++W){const X=e[W],ce=this.getParsed(W),he=T?X:{},O=_i(ce[C]),B=he[m]=o.getPixelForValue(ce[m],W),q=he[C]=s||O?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,ce,l):ce[C],W);he.skip=isNaN(B)||isNaN(q)||O,he.stop=W>0&&Math.abs(ce[m]-j[m])>N,I&&(he.parsed=ce,he.raw=c.data[W]),v&&(he.options=p||this.resolveDataElementOptions(W,X.active?"active":i)),T||this.updateElement(X,W,he,i),j=ce}this.updateSharedOptions(p,i,f)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const r=e.dataset,i=r.options&&r.options.borderWidth||0;if(!n.length)return i;const s=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,s,o)/2}}Ke(cv,"id","scatter"),Ke(cv,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Ke(cv,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var dJ=Object.freeze({__proto__:null,BarController:ov,BubbleController:av,DoughnutController:Qf,LineController:lv,PieController:kb,PolarAreaController:Gg,RadarController:uv,ScatterController:cv});function Hf(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Z_{constructor(e){Ke(this,"options");this.options=e||{}}static override(e){Object.assign(Z_.prototype,e)}init(){}formats(){return Hf()}parse(){return Hf()}format(){return Hf()}add(){return Hf()}diff(){return Hf()}startOf(){return Hf()}endOf(){return Hf()}}var AP={_date:Z_};function pJ(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?FZ:Ph;if(r){if(i._sharedOptions){const c=s[0],f=typeof c.getRange=="function"&&c.getRange(e);if(f){const p=l(s,e,n-f),v=l(s,e,n+f);return{lo:p.lo,hi:v.hi}}}}else return l(s,e,n)}return{lo:0,hi:s.length-1}}function Fy(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:f}=s[a],{lo:p,hi:v}=pJ(s[a],e,o,i);for(let m=p;m<=v;++m){const C=f[m];C.skip||r(C,c,m)}}}function gJ(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function d2(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||Fy(t,n,e,function(a,l,c){!i&&!kh(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function mJ(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:f}=o.getProps(["startAngle","endAngle"],r),{angle:p}=oP(o,{x:e.x,y:e.y});d0(p,c,f)&&i.push({element:o,datasetIndex:a,index:l})}return Fy(t,n,e,s),i}function vJ(t,e,n,r,i,s){let o=[];const a=gJ(n);let l=Number.POSITIVE_INFINITY;function c(f,p,v){const m=f.inRange(e.x,e.y,i);if(r&&!m)return;const C=f.getCenterPoint(i);if(!(!!s||t.isPointInArea(C))&&!m)return;const I=a(e,C);I<l?(o=[{element:f,datasetIndex:p,index:v}],l=I):I===l&&o.push({element:f,datasetIndex:p,index:v})}return Fy(t,n,e,c),o}function p2(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?mJ(t,e,n,i):vJ(t,e,n,r,i,s)}function p3(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Fy(t,n,e,(l,c,f)=>{l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:f}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var yJ={modes:{index(t,e,n,r){const i=Yf(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?d2(t,i,s,r,o):p2(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const f=a[0].index,p=c.data[f];p&&!p.skip&&l.push({element:p,datasetIndex:c.index,index:f})}),l):[]},dataset(t,e,n,r){const i=Yf(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?d2(t,i,s,r,o):p2(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let f=0;f<c.length;++f)a.push({element:c[f],datasetIndex:l,index:f})}return a},point(t,e,n,r){const i=Yf(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return d2(t,i,s,r,o)},nearest(t,e,n,r){const i=Yf(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return p2(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=Yf(e,t);return p3(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=Yf(e,t);return p3(t,i,"y",n.intersect,r)}}};const TP=["left","top","right","bottom"];function eg(t,e){return t.filter(n=>n.pos===e)}function g3(t,e){return t.filter(n=>TP.indexOf(n.pos)===-1&&n.box.axis===e)}function tg(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function bJ(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function _J(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!TP.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function wJ(t,e){const n=_J(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],f=c&&a.stackWeight/c.weight;a.horizontal?(a.width=f?f*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=f?f*i:l&&e.availableHeight)}return n}function xJ(t){const e=bJ(t),n=tg(e.filter(c=>c.box.fullSize),!0),r=tg(eg(e,"left"),!0),i=tg(eg(e,"right")),s=tg(eg(e,"top"),!0),o=tg(eg(e,"bottom")),a=g3(e,"x"),l=g3(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:eg(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function m3(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function OP(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function LJ(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!ci(i)){n.size&&(t[i]-=n.size);const p=r[n.stack]||{size:0,count:1};p.size=Math.max(p.size,n.horizontal?s.height:s.width),n.size=p.size/p.count,t[i]+=n.size}s.getPadding&&OP(o,s.getPadding());const a=Math.max(0,e.outerWidth-m3(o,t,"left","right")),l=Math.max(0,e.outerHeight-m3(o,t,"top","bottom")),c=a!==t.w,f=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:f}:{same:f,other:c}}function CJ(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function SJ(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function bg(t,e,n,r){const i=[];let s,o,a,l,c,f;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,SJ(a.horizontal,e));const{same:p,other:v}=LJ(e,n,a,r);c|=p&&i.length,f=f||v,l.fullSize||i.push(a)}return c&&bg(i,e,n,r)||f}function Am(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function v3(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},f=a.stackWeight/c.weight||1;if(a.horizontal){const p=e.w*f,v=c.size||l.height;f0(c.start)&&(o=c.start),l.fullSize?Am(l,i.left,o,n.outerWidth-i.right-i.left,v):Am(l,e.left+c.placed,o,p,v),c.start=o,c.placed+=p,o=l.bottom}else{const p=e.h*f,v=c.size||l.width;f0(c.start)&&(s=c.start),l.fullSize?Am(l,s,i.top,v,n.outerHeight-i.bottom-i.top):Am(l,s,e.top+c.placed,v,p),c.start=s,c.placed+=p,s=l.right}}e.x=s,e.y=o}var $a={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=Va(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=xJ(t.boxes),l=a.vertical,c=a.horizontal;Bi(t.boxes,S=>{typeof S.beforeLayout=="function"&&S.beforeLayout()});const f=l.reduce((S,I)=>I.box.options&&I.box.options.display===!1?S:S+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/f,hBoxMaxHeight:o/2}),v=Object.assign({},i);OP(v,Va(r));const m=Object.assign({maxPadding:v,w:s,h:o,x:i.left,y:i.top},i),C=wJ(l.concat(c),p);bg(a.fullSize,m,p,C),bg(l,m,p,C),bg(c,m,p,C)&&bg(l,m,p,C),CJ(m),v3(a.leftAndTop,m,p,C),m.x+=m.w,m.y+=m.h,v3(a.rightAndBottom,m,p,C),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Bi(a.chartArea,S=>{const I=S.box;Object.assign(I,t.chartArea),I.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class DP{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class EJ extends DP{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const hv="$chartjs",PJ={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},y3=t=>t===null||t==="";function kJ(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[hv]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",y3(i)){const s=e3(t,"width");s!==void 0&&(t.width=s)}if(y3(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=e3(t,"height");s!==void 0&&(t.height=s)}return t}const IP=TX?{passive:!0}:!1;function MJ(t,e,n){t.addEventListener(e,n,IP)}function AJ(t,e,n){t.canvas.removeEventListener(e,n,IP)}function TJ(t,e){const n=PJ[t.type]||t.type,{x:r,y:i}=Yf(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function Zv(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function OJ(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Zv(a.addedNodes,r),o=o&&!Zv(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function DJ(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Zv(a.removedNodes,r),o=o&&!Zv(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const g0=new Map;let b3=0;function NP(){const t=window.devicePixelRatio;t!==b3&&(b3=t,g0.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function IJ(t,e){g0.size||window.addEventListener("resize",NP),g0.set(t,e)}function NJ(t){g0.delete(t),g0.size||window.removeEventListener("resize",NP)}function BJ(t,e,n){const r=t.canvas,i=r&&K_(r);if(!i)return;const s=cP((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,f=l.contentRect.height;c===0&&f===0||s(c,f)});return o.observe(i),IJ(t,s),o}function g2(t,e,n){n&&n.disconnect(),e==="resize"&&NJ(t)}function RJ(t,e,n){const r=t.canvas,i=cP(s=>{t.ctx!==null&&n(TJ(s,t))},t);return MJ(r,e,i),i}class FJ extends DP{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(kJ(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[hv])return!1;const r=n[hv].initial;["height","width"].forEach(s=>{const o=r[s];_i(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[hv],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:OJ,detach:DJ,resize:BJ}[n]||RJ;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:g2,detach:g2,resize:g2}[n]||AJ)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return AX(e,n,r,i)}isAttached(e){const n=K_(e);return!!(n&&n.isConnected)}}function jJ(t){return!Y_()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?EJ:FJ}var jm;let Nh=(jm=class{constructor(){Ke(this,"x");Ke(this,"y");Ke(this,"active",!1);Ke(this,"options");Ke(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Lp(this.x)&&Lp(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},Ke(jm,"defaults",{}),Ke(jm,"defaultRoutes"),jm);function zJ(t,e){const n=t.options.ticks,r=UJ(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?VJ(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return HJ(e,c,s,o/i),c;const f=$J(s,e,i);if(o>0){let p,v;const m=o>1?Math.round((l-a)/(o-1)):null;for(Tm(e,c,f,_i(m)?0:a-m,a),p=0,v=o-1;p<v;p++)Tm(e,c,f,s[p],s[p+1]);return Tm(e,c,f,l,_i(m)?e.length:l+m),c}return Tm(e,c,f),c}function UJ(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function $J(t,e,n){const r=GJ(t),i=e.length/n;if(!r)return Math.max(i,1);const s=IZ(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function VJ(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function HJ(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function Tm(t,e,n,r,i){const s=Ur(r,0),o=Math.min(Ur(i,t.length),t.length);let a=0,l,c,f;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),f=s;f<0;)a++,f=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===f&&(e.push(t[c]),a++,f=Math.round(s+a*n))}function GJ(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const WJ=t=>t==="left"?"right":t==="right"?"left":t,_3=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,w3=(t,e)=>Math.min(e||t,t);function x3(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function qJ(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function YJ(t,e){Bi(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function ng(t){return t.drawTicks?t.tickLength:0}function L3(t,e){if(!t.display)return 0;const n=Bo(t.font,e),r=Va(t.padding);return(xs(t.text)?t.text.length:1)*n.lineHeight+r.height}function KJ(t,e){return Sf(t,{scale:e,type:"scale"})}function ZJ(t,e,n){return Sf(t,{tick:n,index:e,type:"tick"})}function XJ(t,e,n){let r=$_(t);return(n&&e!=="right"||!n&&e==="right")&&(r=WJ(r)),r}function JJ(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:f}=l;let p=0,v,m,C;const S=o-i,I=a-s;if(t.isHorizontal()){if(m=Na(r,s,a),ci(n)){const N=Object.keys(n)[0],T=n[N];C=f[N].getPixelForValue(T)+S-e}else n==="center"?C=(c.bottom+c.top)/2+S-e:C=_3(t,n,e);v=a-s}else{if(ci(n)){const N=Object.keys(n)[0],T=n[N];m=f[N].getPixelForValue(T)-I+e}else n==="center"?m=(c.left+c.right)/2-I+e:m=_3(t,n,e);C=Na(r,o,i),p=n==="left"?-mo:mo}return{titleX:m,titleY:C,maxWidth:v,rotation:p}}class vd extends Nh{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=cu(e,Number.POSITIVE_INFINITY),n=cu(n,Number.NEGATIVE_INFINITY),r=cu(r,Number.POSITIVE_INFINITY),i=cu(i,Number.NEGATIVE_INFINITY),{min:cu(e,r),max:cu(n,i),minDefined:Js(e),maxDefined:Js(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:cu(n,cu(r,n)),max:cu(r,cu(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){rs(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=lX(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?x3(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=zJ(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){rs(this.options.afterUpdate,[this])}beforeSetDimensions(){rs(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){rs(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),rs(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){rs(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=rs(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){rs(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){rs(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=w3(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const f=this._getLabelSizes(),p=f.widest.width,v=f.highest.height,m=Qo(this.chart.width-p,0,this.maxWidth);a=e.offset?this.maxWidth/r:m/(r-1),p+6>a&&(a=m/(r-(e.offset?.5:1)),l=this.maxHeight-ng(e.grid)-n.padding-L3(e.title,this.chart.options.font),c=Math.sqrt(p*p+v*v),o=z_(Math.min(Math.asin(Qo((f.highest.height+6)/a,-1,1)),Math.asin(Qo(l/c,-1,1))-Math.asin(Qo(v/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){rs(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){rs(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=L3(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=ng(s)+l):(e.height=this.maxHeight,e.width=ng(s)+l),r.display&&this.ticks.length){const{first:c,last:f,widest:p,highest:v}=this._getLabelSizes(),m=r.padding*2,C=fc(this.labelRotation),S=Math.cos(C),I=Math.sin(C);if(a){const N=r.mirror?0:I*p.width+S*v.height;e.height=Math.min(this.maxHeight,e.height+N+m)}else{const N=r.mirror?0:S*p.width+I*v.height;e.width=Math.min(this.maxWidth,e.width+N+m)}this._calculatePadding(c,f,I,S)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const f=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let v=0,m=0;l?c?(v=i*e.width,m=r*n.height):(v=r*e.height,m=i*n.width):s==="start"?m=n.width:s==="end"?v=e.width:s!=="inner"&&(v=e.width/2,m=n.width/2),this.paddingLeft=Math.max((v-f+o)*this.width/(this.width-f),0),this.paddingRight=Math.max((m-p+o)*this.width/(this.width-p),0)}else{let f=n.height/2,p=e.height/2;s==="start"?(f=0,p=e.height):s==="end"&&(f=n.height,p=0),this.paddingTop=f+o,this.paddingBottom=p+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){rs(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)_i(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=x3(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/w3(n,r));let c=0,f=0,p,v,m,C,S,I,N,T,j,W,X;for(p=0;p<n;p+=l){if(C=e[p].label,S=this._resolveTickFontOptions(p),i.font=I=S.string,N=s[I]=s[I]||{data:{},gc:[]},T=S.lineHeight,j=W=0,!_i(C)&&!xs(C))j=Yv(i,N.data,N.gc,j,C),W=T;else if(xs(C))for(v=0,m=C.length;v<m;++v)X=C[v],!_i(X)&&!xs(X)&&(j=Yv(i,N.data,N.gc,j,X),W+=T);o.push(j),a.push(W),c=Math.max(j,c),f=Math.max(W,f)}YJ(s,n);const ce=o.indexOf(c),he=a.indexOf(f),O=B=>({width:o[B]||0,height:a[B]||0});return{first:O(0),last:O(n-1),widest:O(ce),highest:O(he),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return RZ(this._alignToPixels?Vf(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=ZJ(this.getContext(),e,r))}return this.$context||(this.$context=KJ(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=fc(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),p=this.ticks.length+(l?1:0),v=ng(s),m=[],C=a.setContext(this.getContext()),S=C.display?C.width:0,I=S/2,N=function(k){return Vf(r,k,S)};let T,j,W,X,ce,he,O,B,q,F,R,K;if(o==="top")T=N(this.bottom),he=this.bottom-v,B=T-I,F=N(e.top)+I,K=e.bottom;else if(o==="bottom")T=N(this.top),F=e.top,K=N(e.bottom)-I,he=T+I,B=this.top+v;else if(o==="left")T=N(this.right),ce=this.right-v,O=T-I,q=N(e.left)+I,R=e.right;else if(o==="right")T=N(this.left),q=e.left,R=N(e.right)-I,ce=T+I,O=this.left+v;else if(n==="x"){if(o==="center")T=N((e.top+e.bottom)/2+.5);else if(ci(o)){const k=Object.keys(o)[0],U=o[k];T=N(this.chart.scales[k].getPixelForValue(U))}F=e.top,K=e.bottom,he=T+I,B=he+v}else if(n==="y"){if(o==="center")T=N((e.left+e.right)/2);else if(ci(o)){const k=Object.keys(o)[0],U=o[k];T=N(this.chart.scales[k].getPixelForValue(U))}ce=T-I,O=ce-v,q=e.left,R=e.right}const Z=Ur(i.ticks.maxTicksLimit,p),Y=Math.max(1,Math.ceil(p/Z));for(j=0;j<p;j+=Y){const k=this.getContext(j),U=s.setContext(k),H=a.setContext(k),ue=U.lineWidth,_e=U.color,Ie=H.dash||[],ee=H.dashOffset,te=U.tickWidth,oe=U.tickColor,ge=U.tickBorderDash||[],ve=U.tickBorderDashOffset;W=qJ(this,j,l),W!==void 0&&(X=Vf(r,W,ue),c?ce=O=q=R=X:he=B=F=K=X,m.push({tx1:ce,ty1:he,tx2:O,ty2:B,x1:q,y1:F,x2:R,y2:K,width:ue,color:_e,borderDash:Ie,borderDashOffset:ee,tickWidth:te,tickColor:oe,tickBorderDash:ge,tickBorderDashOffset:ve}))}return this._ticksLength=p,this._borderValue=T,m}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:f,mirror:p}=s,v=ng(r.grid),m=v+f,C=p?-f:m,S=-fc(this.labelRotation),I=[];let N,T,j,W,X,ce,he,O,B,q,F,R,K="middle";if(i==="top")ce=this.bottom-C,he=this._getXAxisLabelAlignment();else if(i==="bottom")ce=this.top+C,he=this._getXAxisLabelAlignment();else if(i==="left"){const Y=this._getYAxisLabelAlignment(v);he=Y.textAlign,X=Y.x}else if(i==="right"){const Y=this._getYAxisLabelAlignment(v);he=Y.textAlign,X=Y.x}else if(n==="x"){if(i==="center")ce=(e.top+e.bottom)/2+m;else if(ci(i)){const Y=Object.keys(i)[0],k=i[Y];ce=this.chart.scales[Y].getPixelForValue(k)+m}he=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")X=(e.left+e.right)/2-m;else if(ci(i)){const Y=Object.keys(i)[0],k=i[Y];X=this.chart.scales[Y].getPixelForValue(k)}he=this._getYAxisLabelAlignment(v).textAlign}n==="y"&&(l==="start"?K="top":l==="end"&&(K="bottom"));const Z=this._getLabelSizes();for(N=0,T=a.length;N<T;++N){j=a[N],W=j.label;const Y=s.setContext(this.getContext(N));O=this.getPixelForTick(N)+s.labelOffset,B=this._resolveTickFontOptions(N),q=B.lineHeight,F=xs(W)?W.length:1;const k=F/2,U=Y.color,H=Y.textStrokeColor,ue=Y.textStrokeWidth;let _e=he;o?(X=O,he==="inner"&&(N===T-1?_e=this.options.reverse?"left":"right":N===0?_e=this.options.reverse?"right":"left":_e="center"),i==="top"?c==="near"||S!==0?R=-F*q+q/2:c==="center"?R=-Z.highest.height/2-k*q+q:R=-Z.highest.height+q/2:c==="near"||S!==0?R=q/2:c==="center"?R=Z.highest.height/2-k*q:R=Z.highest.height-F*q,p&&(R*=-1),S!==0&&!Y.showLabelBackdrop&&(X+=q/2*Math.sin(S))):(ce=O,R=(1-F)*q/2);let Ie;if(Y.showLabelBackdrop){const ee=Va(Y.backdropPadding),te=Z.heights[N],oe=Z.widths[N];let ge=R-ee.top,ve=0-ee.left;switch(K){case"middle":ge-=te/2;break;case"bottom":ge-=te;break}switch(he){case"center":ve-=oe/2;break;case"right":ve-=oe;break;case"inner":N===T-1?ve-=oe:N>0&&(ve-=oe/2);break}Ie={left:ve,top:ge,width:oe+ee.width,height:te+ee.height,color:Y.backdropColor}}I.push({label:W,font:B,textOffset:R,options:{rotation:S,color:U,strokeColor:H,strokeWidth:ue,textAlign:_e,textBaseline:K,translation:[X,ce],backdrop:Ie}})}return I}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-fc(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,f;return n==="left"?i?(f=this.right+s,r==="near"?c="left":r==="center"?(c="center",f+=l/2):(c="right",f+=l)):(f=this.right-a,r==="near"?c="right":r==="center"?(c="center",f-=l/2):(c="left",f=this.left)):n==="right"?i?(f=this.left+s,r==="near"?c="right":r==="center"?(c="center",f-=l/2):(c="left",f-=l)):(f=this.left+a,r==="near"?c="left":r==="center"?(c="center",f+=l/2):(c="right",f=this.right)):c="right",{textAlign:c,x:f}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,f)=>{!f.width||!f.color||(r.save(),r.lineWidth=f.width,r.strokeStyle=f.color,r.setLineDash(f.borderDash||[]),r.lineDashOffset=f.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,f,p,v;this.isHorizontal()?(c=Vf(e,this.left,o)-o/2,f=Vf(e,this.right,a)+a/2,p=v=l):(p=Vf(e,this.top,o)-o/2,v=Vf(e,this.bottom,a)+a/2,c=f=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,p),n.lineTo(f,v),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Ny(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,f=o.textOffset;dd(r,c,0,f,l,a)}i&&By(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=Bo(r.font),o=Va(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||ci(n)?(l+=o.bottom,xs(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:f,maxWidth:p,rotation:v}=JJ(this,l,n,a);dd(e,r.text,0,0,s,{color:r.color,maxWidth:p,rotation:v,textAlign:XJ(a,n,i),textBaseline:"middle",translation:[c,f]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=Ur(e.grid&&e.grid.z,-1),i=Ur(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==vd.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Bo(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Om{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;tQ(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,QJ(e,o,r),this.override&&Qs.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in Qs[i]&&(delete Qs[i][r],this.override&&delete fd[r])}}function QJ(t,e,n){const r=h0(Object.create(null),[n?Qs.get(n):{},Qs.get(e),t.defaults]);Qs.set(e,r),t.defaultRoutes&&eQ(e,t.defaultRoutes),t.descriptors&&Qs.describe(e,t.descriptors)}function eQ(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Qs.route(s,i,l,a)})}function tQ(t){return"id"in t&&"defaults"in t}class nQ{constructor(){this.controllers=new Om(pc,"datasets",!0),this.elements=new Om(Nh,"elements"),this.plugins=new Om(Object,"plugins"),this.scales=new Om(vd,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):Bi(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=j_(e);rs(r["before"+i],[],r),n[e](r),rs(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Rc=new nQ;class rQ{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(rs(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){_i(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=Ur(r.options&&r.options.plugins,{}),s=iQ(r);return i===!1&&!n?[]:oQ(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function iQ(t){const e={},n=[],r=Object.keys(Rc.plugins.items);for(let s=0;s<r.length;s++)n.push(Rc.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function sQ(t,e){return!e&&t===!1?null:t===!0?{}:t}function oQ(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=sQ(r[l],i);c!==null&&s.push({plugin:a,options:aQ(t.config,{plugin:a,local:n[l]},c,o)})}return s}function aQ(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Mb(t,e){const n=Qs.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function lQ(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function uQ(t,e){return t===e?"_index_":"_value_"}function C3(t){if(t==="x"||t==="y"||t==="r")return t}function cQ(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Ab(t,...e){if(C3(t))return t;for(const n of e){const r=n.axis||cQ(n.position)||t.length>1&&C3(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function S3(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function hQ(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return S3(t,"x",n[0])||S3(t,"y",n[0])}return{}}function fQ(t,e){const n=fd[t.type]||{scales:{}},r=e.scales||{},i=Mb(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!ci(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Ab(o,a,hQ(o,t),Qs.scales[a.type]),c=uQ(l,i),f=n.scales||{};s[o]=Ug(Object.create(null),[{axis:l},a,f[l],f[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Mb(a,e),f=(fd[a]||{}).scales||{};Object.keys(f).forEach(p=>{const v=lQ(p,l),m=o[v+"AxisID"]||v;s[m]=s[m]||Object.create(null),Ug(s[m],[{axis:v},r[m],f[p]])})}),Object.keys(s).forEach(o=>{const a=s[o];Ug(a,[Qs.scales[a.type],Qs.scale])}),s}function BP(t){const e=t.options||(t.options={});e.plugins=Ur(e.plugins,{}),e.scales=fQ(t,e)}function RP(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function dQ(t){return t=t||{},t.data=RP(t.data),BP(t),t}const E3=new Map,FP=new Set;function Dm(t,e){let n=E3.get(t);return n||(n=e(),E3.set(t,n),FP.add(n)),n}const rg=(t,e,n)=>{const r=_f(e,n);r!==void 0&&t.add(r)};class pQ{constructor(e){this._config=dQ(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=RP(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),BP(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Dm(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Dm(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Dm(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return Dm(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(f=>{e&&(l.add(e),f.forEach(p=>rg(l,e,p))),f.forEach(p=>rg(l,i,p)),f.forEach(p=>rg(l,fd[s]||{},p)),f.forEach(p=>rg(l,Qs,p)),f.forEach(p=>rg(l,Eb,p))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),FP.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,fd[n]||{},Qs.datasets[n]||{},{type:n},Qs,Eb]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=P3(this._resolverCache,e,i);let l=o;if(mQ(o,n)){s.$shared=!1,r=wf(r)?r():r;const c=this.createResolver(e,r,a);l=Cp(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=P3(this._resolverCache,e,r);return ci(n)?Cp(s,n,void 0,i):s}}function P3(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:G_(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const gQ=t=>ci(t)&&Object.getOwnPropertyNames(t).some(e=>wf(t[e]));function mQ(t,e){const{isScriptable:n,isIndexable:r}=mP(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(wf(a)||gQ(a))||o&&xs(a))return!0}return!1}var vQ="4.4.1";const yQ=["top","bottom","left","right","chartArea"];function k3(t,e){return t==="top"||t==="bottom"||yQ.indexOf(t)===-1&&e==="x"}function M3(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function A3(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),rs(n&&n.onComplete,[t],e)}function bQ(t){const e=t.chart,n=e.options.animation;rs(n&&n.onProgress,[t],e)}function jP(t){return Y_()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const fv={},T3=t=>{const e=jP(t);return Object.values(fv).filter(n=>n.canvas===e).pop()};function _Q(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function wQ(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}function Im(t,e,n){return t.options.clip?t[n]:e[n]}function xQ(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Im(n,e,"left"),right:Im(n,e,"right"),top:Im(r,e,"top"),bottom:Im(r,e,"bottom")}:e}class Uc{static register(...e){Rc.add(...e),O3()}static unregister(...e){Rc.remove(...e),O3()}constructor(e,n){const r=this.config=new pQ(n),i=jP(e),s=T3(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||jJ(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,f=l&&l.width;if(this.id=SZ(),this.ctx=a,this.canvas=l,this.width=f,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new rQ,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=UZ(p=>this.update(p),o.resizeDelay||0),this._dataChanges=[],fv[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}yh.listen(this,"complete",A3),yh.listen(this,"progress",bQ),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return _i(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Rc}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Q5(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Z5(this.canvas,this.ctx),this}stop(){return yh.stop(this),this}resize(e,n){yh.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Q5(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),rs(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Bi(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Ab(o,a),c=l==="r",f=l==="x";return{options:a,dposition:c?"chartArea":f?"bottom":"left",dtype:c?"radialLinear":f?"category":"linear"}}))),Bi(s,o=>{const a=o.options,l=a.id,c=Ab(l,a),f=Ur(a.type,o.dtype);(a.position===void 0||k3(a.position,c)!==k3(o.dposition))&&(a.position=o.dposition),i[l]=!0;let p=null;if(l in r&&r[l].type===f)p=r[l];else{const v=Rc.getScale(f);p=new v({id:l,type:f,ctx:this.ctx,chart:this}),r[p.id]=p}p.init(a,e)}),Bi(i,(o,a)=>{o||delete r[a]}),Bi(r,o=>{$a.configure(this,o,o.options),$a.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(M3("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||Mb(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Rc.getController(a),{datasetElementType:c,dataElementType:f}=Qs.datasets[a];Object.assign(l,{dataElementType:Rc.getElement(f),datasetElementType:c&&Rc.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Bi(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,f=this.data.datasets.length;c<f;c++){const{controller:p}=this.getDatasetMeta(c),v=!i&&s.indexOf(p)===-1;p.buildOrUpdateElements(v),o=Math.max(+p.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||Bi(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(M3("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Bi(this.scales,e=>{$a.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!U5(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;_Q(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!U5(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;$a.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Bi(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,wf(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(yh.has(this)?this.attached&&!yh.running(this)&&yh.start(this):(this.draw(),A3({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resize(r,i),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r=e._clip,i=!r.disabled,s=xQ(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&Ny(n,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),e.controller.draw(),i&&By(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return kh(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=yJ.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Sf(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);f0(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),yh.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Z5(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete fv[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Bi(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Bi(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Bi(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Gv(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(f=>!c.some(p=>f.datasetIndex===p.datasetIndex&&f.index===p.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=TZ(e),c=wQ(e,this._lastEvent,r,l);r&&(this._lastEvent=null,rs(s.onHover,[e,a,this],this),l&&rs(s.onClick,[e,a,this],this));const f=!Gv(a,i);return(f||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,f}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}}Ke(Uc,"defaults",Qs),Ke(Uc,"instances",fv),Ke(Uc,"overrides",fd),Ke(Uc,"registry",Rc),Ke(Uc,"version",vQ),Ke(Uc,"getChart",T3);function O3(){return Bi(Uc.instances,t=>t._plugins.invalidate())}function LQ(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(s,o,a,r-c,n+c),l>i?(c=i/l,t.arc(s,o,l,n+c,r-c,!0)):t.arc(s,o,i,n+mo,r-mo),t.closePath(),t.clip()}function CQ(t){return H_(t,["outerStart","outerEnd","innerStart","innerEnd"])}function SQ(t,e,n,r){const i=CQ(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,r*e/2),a=l=>{const c=(n-Math.min(s,l))*r/2;return Qo(l,0,Math.min(s,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Qo(i.innerStart,0,o),innerEnd:Qo(i.innerEnd,0,o)}}function Wd(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function Xv(t,e,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:f}=e,p=Math.max(e.outerRadius+r+n-c,0),v=f>0?f+r+n+c:0;let m=0;const C=i-l;if(r){const Y=f>0?f-r:0,k=p>0?p-r:0,U=(Y+k)/2,H=U!==0?C*U/(U+r):C;m=(C-H)/2}const S=Math.max(.001,C*p-n/cs)/p,I=(C-S)/2,N=l+I+m,T=i-I-m,{outerStart:j,outerEnd:W,innerStart:X,innerEnd:ce}=SQ(e,v,p,T-N),he=p-j,O=p-W,B=N+j/he,q=T-W/O,F=v+X,R=v+ce,K=N+X/F,Z=T-ce/R;if(t.beginPath(),s){const Y=(B+q)/2;if(t.arc(o,a,p,B,Y),t.arc(o,a,p,Y,q),W>0){const ue=Wd(O,q,o,a);t.arc(ue.x,ue.y,W,q,T+mo)}const k=Wd(R,T,o,a);if(t.lineTo(k.x,k.y),ce>0){const ue=Wd(R,Z,o,a);t.arc(ue.x,ue.y,ce,T+mo,Z+Math.PI)}const U=(T-ce/v+(N+X/v))/2;if(t.arc(o,a,v,T-ce/v,U,!0),t.arc(o,a,v,U,N+X/v,!0),X>0){const ue=Wd(F,K,o,a);t.arc(ue.x,ue.y,X,K+Math.PI,N-mo)}const H=Wd(he,N,o,a);if(t.lineTo(H.x,H.y),j>0){const ue=Wd(he,B,o,a);t.arc(ue.x,ue.y,j,N-mo,B)}}else{t.moveTo(o,a);const Y=Math.cos(B)*p+o,k=Math.sin(B)*p+a;t.lineTo(Y,k);const U=Math.cos(q)*p+o,H=Math.sin(q)*p+a;t.lineTo(U,H)}t.closePath()}function EQ(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){Xv(t,e,n,r,l,i);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%us||us))}return Xv(t,e,n,r,l,i),t.fill(),l}function PQ(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:f,borderDash:p,borderDashOffset:v}=l,m=l.borderAlign==="inner";if(!c)return;t.setLineDash(p||[]),t.lineDashOffset=v,m?(t.lineWidth=c*2,t.lineJoin=f||"round"):(t.lineWidth=c,t.lineJoin=f||"bevel");let C=e.endAngle;if(s){Xv(t,e,n,r,C,i);for(let S=0;S<s;++S)t.stroke();isNaN(a)||(C=o+(a%us||us))}m&&LQ(t,e,C),s||(Xv(t,e,n,r,C,i),t.stroke())}class _g extends Nh{constructor(n){super();Ke(this,"circumference");Ke(this,"endAngle");Ke(this,"fullCircles");Ke(this,"innerRadius");Ke(this,"outerRadius");Ke(this,"pixelMargin");Ke(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.getProps(["x","y"],i),{angle:o,distance:a}=oP(s,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:f,outerRadius:p,circumference:v}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),m=(this.options.spacing+this.options.borderWidth)/2,S=Ur(v,c-l)>=us||d0(o,l,c),I=Eh(a,f+m,p+m);return S&&I}getCenterPoint(n){const{x:r,y:i,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:f}=this.options,p=(s+o)/2,v=(a+l+f+c)/2;return{x:r+Math.cos(p)*v,y:i+Math.sin(p)*v}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:i}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>us?Math.floor(i/us):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(cs,i||0)),f=s*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,EQ(n,this,f,o,a),PQ(n,this,f,o,a),n.restore()}}Ke(_g,"id","arc"),Ke(_g,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Ke(_g,"defaultRoutes",{backgroundColor:"backgroundColor"}),Ke(_g,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function zP(t,e,n=e){t.lineCap=Ur(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Ur(n.borderDash,e.borderDash)),t.lineDashOffset=Ur(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Ur(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Ur(n.borderWidth,e.borderWidth),t.strokeStyle=Ur(n.borderColor,e.borderColor)}function kQ(t,e,n){t.lineTo(n.x,n.y)}function MQ(t){return t.stepped?QZ:t.tension||t.cubicInterpolationMode==="monotone"?eX:kQ}function UP(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),f=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!f?r+c-l:c-l}}function AQ(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=UP(i,n,r),f=MQ(s);let{move:p=!0,reverse:v}=r||{},m,C,S;for(m=0;m<=c;++m)C=i[(a+(v?c-m:m))%o],!C.skip&&(p?(t.moveTo(C.x,C.y),p=!1):f(t,S,C,v,s.stepped),S=C);return l&&(C=i[(a+(v?c:0))%o],f(t,S,C,v,s.stepped)),!!l}function TQ(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=UP(i,n,r),{move:l=!0,reverse:c}=r||{};let f=0,p=0,v,m,C,S,I,N;const T=W=>(o+(c?a-W:W))%s,j=()=>{S!==I&&(t.lineTo(f,I),t.lineTo(f,S),t.lineTo(f,N))};for(l&&(m=i[T(0)],t.moveTo(m.x,m.y)),v=0;v<=a;++v){if(m=i[T(v)],m.skip)continue;const W=m.x,X=m.y,ce=W|0;ce===C?(X<S?S=X:X>I&&(I=X),f=(p*f+W)/++p):(j(),t.lineTo(W,X),C=ce,p=0,S=I=X),N=X}j()}function Tb(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?TQ:AQ}function OQ(t){return t.stepped?OX:t.tension||t.cubicInterpolationMode==="monotone"?DX:Kf}function DQ(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),zP(t,e.options),t.stroke(i)}function IQ(t,e,n,r){const{segments:i,options:s}=e,o=Tb(e);for(const a of i)zP(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const NQ=typeof Path2D=="function";function BQ(t,e,n,r){NQ&&!e.options.segment?DQ(t,e,n,r):IQ(t,e,n,r)}class cf extends Nh{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;CX(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=jX(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=EP(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=OQ(r);let c,f;for(c=0,f=o.length;c<f;++c){const{start:p,end:v}=o[c],m=s[p],C=s[v];if(m===C){a.push(m);continue}const S=Math.abs((i-m[n])/(C[n]-m[n])),I=l(m,C,S,r.stepped);I[n]=e[n],a.push(I)}return a.length===1?a[0]:a}pathSegment(e,n,r){return Tb(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=Tb(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),BQ(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Ke(cf,"id","line"),Ke(cf,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Ke(cf,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Ke(cf,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function D3(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class dv extends Nh{constructor(n){super();Ke(this,"parsed");Ke(this,"skip");Ke(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return D3(this,n,"x",r)}inYRange(n,r){return D3(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!kh(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,Pb(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Ke(dv,"id","point"),Ke(dv,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Ke(dv,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function $P(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,f,p;return t.horizontal?(p=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-p,f=r+p):(p=s/2,a=n-p,l=n+p,c=Math.min(r,i),f=Math.max(r,i)),{left:a,top:c,right:l,bottom:f}}function hf(t,e,n,r){return t?0:Qo(e,n,r)}function RQ(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=gP(r);return{t:hf(i.top,s.top,0,n),r:hf(i.right,s.right,0,e),b:hf(i.bottom,s.bottom,0,n),l:hf(i.left,s.left,0,e)}}function FQ(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=od(i),o=Math.min(e,n),a=t.borderSkipped,l=r||ci(i);return{topLeft:hf(!l||a.top||a.left,s.topLeft,0,o),topRight:hf(!l||a.top||a.right,s.topRight,0,o),bottomLeft:hf(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:hf(!l||a.bottom||a.right,s.bottomRight,0,o)}}function jQ(t){const e=$P(t),n=e.right-e.left,r=e.bottom-e.top,i=RQ(t,n/2,r/2),s=FQ(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function m2(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&$P(t,r);return a&&(i||Eh(e,a.left,a.right))&&(s||Eh(n,a.top,a.bottom))}function zQ(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function UQ(t,e){t.rect(e.x,e.y,e.w,e.h)}function v2(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class pv extends Nh{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=jQ(this),a=zQ(o.radius)?p0:UQ;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,v2(o,n,s)),e.clip(),a(e,v2(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,v2(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return m2(this,e,n,r)}inXRange(e,n){return m2(this,e,null,n)}inYRange(e,n){return m2(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Ke(pv,"id","bar"),Ke(pv,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Ke(pv,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var $Q=Object.freeze({__proto__:null,ArcElement:_g,BarElement:pv,LineElement:cf,PointElement:dv});const Ob=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],I3=Ob.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function VP(t){return Ob[t%Ob.length]}function HP(t){return I3[t%I3.length]}function VQ(t,e){return t.borderColor=VP(e),t.backgroundColor=HP(e),++e}function HQ(t,e){return t.backgroundColor=t.data.map(()=>VP(e++)),e}function GQ(t,e){return t.backgroundColor=t.data.map(()=>HP(e++)),e}function WQ(t){let e=0;return(n,r)=>{const i=t.getDatasetMeta(r).controller;i instanceof Qf?e=HQ(n,e):i instanceof Gg?e=GQ(n,e):i&&(e=VQ(n,e))}}function N3(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function qQ(t){return t&&(t.borderColor||t.backgroundColor)}var YQ={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=t.config,{elements:s}=i;if(!n.forceOverride&&(N3(r)||qQ(i)||s&&N3(s)))return;const o=WQ(t);r.forEach(o)}};function KQ(t,e,n,r,i){const s=i.samples||r;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let f=e,p,v,m,C,S;for(o[l++]=t[f],p=0;p<s-2;p++){let I=0,N=0,T;const j=Math.floor((p+1)*a)+1+e,W=Math.min(Math.floor((p+2)*a)+1,n)+e,X=W-j;for(T=j;T<W;T++)I+=t[T].x,N+=t[T].y;I/=X,N/=X;const ce=Math.floor(p*a)+1+e,he=Math.min(Math.floor((p+1)*a)+1,n)+e,{x:O,y:B}=t[f];for(m=C=-1,T=ce;T<he;T++)C=.5*Math.abs((O-I)*(t[T].y-B)-(O-t[T].x)*(N-B)),C>m&&(m=C,v=t[T],S=T);o[l++]=v,f=S}return o[l++]=t[c],o}function ZQ(t,e,n,r){let i=0,s=0,o,a,l,c,f,p,v,m,C,S;const I=[],N=e+n-1,T=t[e].x,W=t[N].x-T;for(o=e;o<e+n;++o){a=t[o],l=(a.x-T)/W*r,c=a.y;const X=l|0;if(X===f)c<C?(C=c,p=o):c>S&&(S=c,v=o),i=(s*i+a.x)/++s;else{const ce=o-1;if(!_i(p)&&!_i(v)){const he=Math.min(p,v),O=Math.max(p,v);he!==m&&he!==ce&&I.push({...t[he],x:i}),O!==m&&O!==ce&&I.push({...t[O],x:i})}o>0&&ce!==m&&I.push(t[ce]),I.push(a),f=X,s=0,C=S=c,p=v=m=o}}return I}function GP(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function B3(t){t.data.datasets.forEach(e=>{GP(e)})}function XQ(t,e){const n=e.length;let r=0,i;const{iScale:s}=t,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(r=Qo(Ph(e,s.axis,o).lo,0,n-1)),c?i=Qo(Ph(e,s.axis,a).hi+1,r,n)-r:i=n-r,{start:r,count:i}}var JQ={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){B3(t);return}const r=t.width;t.data.datasets.forEach((i,s)=>{const{_data:o,indexAxis:a}=i,l=t.getDatasetMeta(s),c=o||i.data;if(yg([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const f=t.scales[l.xAxisID];if(f.type!=="linear"&&f.type!=="time"||t.options.parsing)return;let{start:p,count:v}=XQ(l,c);const m=n.threshold||4*r;if(v<=m){GP(i);return}_i(o)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(S){this._data=S}}));let C;switch(n.algorithm){case"lttb":C=KQ(c,p,v,r,n);break;case"min-max":C=ZQ(c,p,v,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}i._decimated=C})},destroy(t){B3(t)}};function QQ(t,e,n){const r=t.segments,i=t.points,s=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=X_(l,c,i);const f=Db(n,i[l],i[c],a.loop);if(!e.segments){o.push({source:a,target:f,start:i[l],end:i[c]});continue}const p=EP(e,f);for(const v of p){const m=Db(n,s[v.start],s[v.end],v.loop),C=SP(a,i,m);for(const S of C)o.push({source:S,target:v,start:{[n]:R3(f,m,"start",Math.max)},end:{[n]:R3(f,m,"end",Math.min)}})}}return o}function Db(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=hu(i),s=hu(s)),{property:t,start:i,end:s}}function eee(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=X_(o,a,i);const l=i[o],c=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function X_(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function R3(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function WP(t,e){let n=[],r=!1;return xs(t)?(r=!0,n=t):n=eee(t,e),n.length?new cf({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function F3(t){return t&&t.fill!==!1}function tee(t,e,n){let i=t[e].fill;const s=[e];let o;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!Js(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function nee(t,e,n){const r=oee(t);if(ci(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return Js(i)&&Math.floor(i)===i?ree(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function ree(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function iee(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:ci(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function see(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:ci(t)?r=t.value:r=e.getBaseValue(),r}function oee(t){const e=t.options,n=e.fill;let r=Ur(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function aee(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=lee(e,n);a.push(WP({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const c=s[l];for(let f=c.start;f<=c.end;f++)uee(i,o[f],a)}return new cf({points:i,options:{}})}function lee(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function uee(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:l}=cee(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function cee(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const f=s[c],p=o[f.start][n],v=o[f.end][n];if(Eh(i,p,v)){a=i===p,l=i===v;break}}return{first:a,last:l,point:r}}class qP{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:s,radius:o}=this;return n=n||{start:0,end:us},e.arc(i,s,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function hee(t){const{chart:e,fill:n,line:r}=t;if(Js(n))return fee(e,n);if(n==="stack")return aee(t);if(n==="shape")return!0;const i=dee(t);return i instanceof qP?i:WP(i,r)}function fee(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function dee(t){return(t.scale||{}).getPointPositionForValue?gee(t):pee(t)}function pee(t){const{scale:e={},fill:n}=t,r=iee(n,e);if(Js(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function gee(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=see(n,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new qP({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}function y2(t,e,n){const r=hee(e),{line:i,scale:s,axis:o}=e,a=i.options,l=a.fill,c=a.backgroundColor,{above:f=c,below:p=c}=l||{};r&&i.points.length&&(Ny(t,n),mee(t,{line:i,target:r,above:f,below:p,area:n,scale:s,axis:o}),By(t))}function mee(t,e){const{line:n,target:r,above:i,below:s,area:o,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),l==="x"&&s!==i&&(j3(t,r,o.top),z3(t,{line:n,target:r,color:i,scale:a,property:l}),t.restore(),t.save(),j3(t,r,o.bottom)),z3(t,{line:n,target:r,color:s,scale:a,property:l}),t.restore()}function j3(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,f=i[l],p=i[X_(l,c,i)];s?(t.moveTo(f.x,f.y),s=!1):(t.lineTo(f.x,n),t.lineTo(f.x,f.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(p.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function z3(t,e){const{line:n,target:r,property:i,color:s,scale:o}=e,a=QQ(n,r,i);for(const{source:l,target:c,start:f,end:p}of a){const{style:{backgroundColor:v=s}={}}=l,m=r!==!0;t.save(),t.fillStyle=v,vee(t,o,m&&Db(i,f,p)),t.beginPath();const C=!!n.pathSegment(t,l);let S;if(m){C?t.closePath():U3(t,r,p,i);const I=!!r.pathSegment(t,c,{move:C,reverse:!0});S=C&&I,S||U3(t,r,f,i)}t.closePath(),t.fill(S?"evenodd":"nonzero"),t.restore()}}function vee(t,e,n){const{top:r,bottom:i}=e.chart.chartArea,{property:s,start:o,end:a}=n||{};s==="x"&&(t.beginPath(),t.rect(o,r,a-o,i-r),t.clip())}function U3(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var yee={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof cf&&(l={visible:t.isDatasetVisible(o),index:o,fill:nee(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=tee(i,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&y2(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;F3(s)&&y2(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!F3(r)||n.drawTime!=="beforeDatasetDraw"||y2(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const $3=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},bee=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class V3 extends Nh{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=rs(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=Bo(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=$3(r,s);let c,f;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,f=this._fitRows(o,s,a,l)+10):(f=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(f,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],f=i+a;let p=e;s.textAlign="left",s.textBaseline="middle";let v=-1,m=-f;return this.legendItems.forEach((C,S)=>{const I=r+n/2+s.measureText(C.text).width;(S===0||c[c.length-1]+I+2*a>o)&&(p+=f,c[c.length-(S>0?0:1)]=0,m+=f,v++),l[S]={left:0,top:m,row:v,width:I,height:i},c[c.length-1]+=I+a}),p}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],f=o-e;let p=a,v=0,m=0,C=0,S=0;return this.legendItems.forEach((I,N)=>{const{itemWidth:T,itemHeight:j}=_ee(r,n,s,I,i);N>0&&m+j+2*a>f&&(p+=v+a,c.push({width:v,height:m}),C+=v+a,S++,v=m=0),l[N]={left:C,top:m,col:S,width:T,height:j},v=Math.max(v,T),m+=j+a}),p+=v,c.push({width:v,height:m}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=pp(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Na(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Na(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=Na(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Na(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Ny(e,this),this._draw(),By(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=Qs.color,l=pp(e.rtl,this.left,this.width),c=Bo(o.font),{padding:f}=o,p=c.size,v=p/2;let m;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:C,boxHeight:S,itemHeight:I}=$3(o,p),N=function(ce,he,O){if(isNaN(C)||C<=0||isNaN(S)||S<0)return;i.save();const B=Ur(O.lineWidth,1);if(i.fillStyle=Ur(O.fillStyle,a),i.lineCap=Ur(O.lineCap,"butt"),i.lineDashOffset=Ur(O.lineDashOffset,0),i.lineJoin=Ur(O.lineJoin,"miter"),i.lineWidth=B,i.strokeStyle=Ur(O.strokeStyle,a),i.setLineDash(Ur(O.lineDash,[])),o.usePointStyle){const q={radius:S*Math.SQRT2/2,pointStyle:O.pointStyle,rotation:O.rotation,borderWidth:B},F=l.xPlus(ce,C/2),R=he+v;pP(i,q,F,R,o.pointStyleWidth&&C)}else{const q=he+Math.max((p-S)/2,0),F=l.leftForLtr(ce,C),R=od(O.borderRadius);i.beginPath(),Object.values(R).some(K=>K!==0)?p0(i,{x:F,y:q,w:C,h:S,radius:R}):i.rect(F,q,C,S),i.fill(),B!==0&&i.stroke()}i.restore()},T=function(ce,he,O){dd(i,O.text,ce,he+I/2,c,{strikethrough:O.hidden,textAlign:l.textAlign(O.textAlign)})},j=this.isHorizontal(),W=this._computeTitleHeight();j?m={x:Na(s,this.left+f,this.right-r[0]),y:this.top+f+W,line:0}:m={x:this.left+f,y:Na(s,this.top+W+f,this.bottom-n[0].height),line:0},xP(this.ctx,e.textDirection);const X=I+f;this.legendItems.forEach((ce,he)=>{i.strokeStyle=ce.fontColor,i.fillStyle=ce.fontColor;const O=i.measureText(ce.text).width,B=l.textAlign(ce.textAlign||(ce.textAlign=o.textAlign)),q=C+v+O;let F=m.x,R=m.y;l.setWidth(this.width),j?he>0&&F+q+f>this.right&&(R=m.y+=X,m.line++,F=m.x=Na(s,this.left+f,this.right-r[m.line])):he>0&&R+X>this.bottom&&(F=m.x=F+n[m.line].width+f,m.line++,R=m.y=Na(s,this.top+W+f,this.bottom-n[m.line].height));const K=l.x(F);if(N(K,R,ce),F=$Z(B,F+C+v,j?F+q:this.right,e.rtl),T(l.x(F),R,ce),j)m.x+=q+f;else if(typeof ce.text!="string"){const Z=c.lineHeight;m.y+=YP(ce,Z)+f}else m.y+=X}),LP(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Bo(n.font),i=Va(n.padding);if(!n.display)return;const s=pp(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let f,p=this.left,v=this.width;if(this.isHorizontal())v=Math.max(...this.lineWidths),f=this.top+c,p=Na(e.align,p,this.right-v);else{const C=this.columnSizes.reduce((S,I)=>Math.max(S,I.height),0);f=c+Na(e.align,this.top,this.bottom-C-e.labels.padding-this._computeTitleHeight())}const m=Na(a,p,p+v);o.textAlign=s.textAlign($_(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,dd(o,n.text,m,f,r)}_computeTitleHeight(){const e=this.options.title,n=Bo(e.font),r=Va(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(Eh(e,this.left,this.right)&&Eh(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Eh(e,i.left,i.left+i.width)&&Eh(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!Lee(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=bee(i,r);i&&!s&&rs(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&rs(n.onHover,[e,r,this],this)}else r&&rs(n.onClick,[e,r,this],this)}}function _ee(t,e,n,r,i){const s=wee(r,t,e,n),o=xee(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function wee(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function xee(t,e,n){let r=t;return typeof e.text!="string"&&(r=YP(e,n)),r}function YP(t,e){const n=t.text?t.text.length:0;return e*n}function Lee(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Cee={id:"legend",_element:V3,start(t,e,n){const r=t.legend=new V3({ctx:t.ctx,options:n,chart:t});$a.configure(t,r,n),$a.addBox(t,r)},stop(t){$a.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;$a.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),f=Va(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(f.width+f.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class J_ extends Nh{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=xs(r.text)?r.text.length:1;this._padding=Va(r.padding);const s=i*Bo(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,f,p;return this.isHorizontal()?(f=Na(a,r,s),p=n+e,c=s-r):(o.position==="left"?(f=r+e,p=Na(a,i,n),l=cs*-.5):(f=s-e,p=Na(a,n,i),l=cs*.5),c=i-n),{titleX:f,titleY:p,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=Bo(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);dd(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:$_(n.align),textBaseline:"middle",translation:[o,a]})}}function See(t,e){const n=new J_({ctx:t.ctx,options:e,chart:t});$a.configure(t,n,e),$a.addBox(t,n),t.titleBlock=n}var Eee={id:"title",_element:J_,start(t,e,n){See(t,n)},stop(t){const e=t.titleBlock;$a.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;$a.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Nm=new WeakMap;var Pee={id:"subtitle",start(t,e,n){const r=new J_({ctx:t.ctx,options:n,chart:t});$a.configure(t,r,n),$a.addBox(t,r),Nm.set(t,r)},stop(t){$a.removeBox(t,Nm.get(t)),Nm.delete(t)},beforeUpdate(t,e,n){const r=Nm.get(t);$a.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const wg={average(t){if(!t.length)return!1;let e,n,r=0,i=0,s=0;for(e=0,n=t.length;e<n;++e){const o=t[e].element;if(o&&o.hasValue()){const a=o.tooltipPosition();r+=a.x,i+=a.y,++s}}return{x:r/s,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),f=Sb(e,c);f<i&&(i=f,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function Nc(t,e){return e&&(xs(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function bh(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function kee(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function H3(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Bo(e.bodyFont),c=Bo(e.titleFont),f=Bo(e.footerFont),p=s.length,v=i.length,m=r.length,C=Va(e.padding);let S=C.height,I=0,N=r.reduce((W,X)=>W+X.before.length+X.lines.length+X.after.length,0);if(N+=t.beforeBody.length+t.afterBody.length,p&&(S+=p*c.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),N){const W=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;S+=m*W+(N-m)*l.lineHeight+(N-1)*e.bodySpacing}v&&(S+=e.footerMarginTop+v*f.lineHeight+(v-1)*e.footerSpacing);let T=0;const j=function(W){I=Math.max(I,n.measureText(W).width+T)};return n.save(),n.font=c.string,Bi(t.title,j),n.font=l.string,Bi(t.beforeBody.concat(t.afterBody),j),T=e.displayColors?o+2+e.boxPadding:0,Bi(r,W=>{Bi(W.before,j),Bi(W.lines,j),Bi(W.after,j)}),T=0,n.font=f.string,Bi(t.footer,j),n.restore(),I+=C.width,{width:I,height:S}}function Mee(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function Aee(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function Tee(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),Aee(c,t,e,n)&&(c="center"),c}function G3(t,e,n){const r=n.yAlign||e.yAlign||Mee(t,n);return{xAlign:n.xAlign||e.xAlign||Tee(t,e,n,r),yAlign:r}}function Oee(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function Dee(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function W3(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:f,topRight:p,bottomLeft:v,bottomRight:m}=od(o);let C=Oee(e,a);const S=Dee(e,l,c);return l==="center"?a==="left"?C+=c:a==="right"&&(C-=c):a==="left"?C-=Math.max(f,v)+i:a==="right"&&(C+=Math.max(p,m)+i),{x:Qo(C,0,r.width-e.width),y:Qo(S,0,r.height-e.height)}}function Bm(t,e,n){const r=Va(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function q3(t){return Nc([],bh(t))}function Iee(t,e,n){return Sf(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Y3(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const KP={beforeTitle:vh,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:vh,beforeBody:vh,beforeLabel:vh,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return _i(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:vh,afterBody:vh,beforeFooter:vh,footer:vh,afterFooter:vh};function Il(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?KP[e].call(n,r):i}class Ib extends Nh{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new PP(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=Iee(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=Il(r,"beforeTitle",this,e),s=Il(r,"title",this,e),o=Il(r,"afterTitle",this,e);let a=[];return a=Nc(a,bh(i)),a=Nc(a,bh(s)),a=Nc(a,bh(o)),a}getBeforeBody(e,n){return q3(Il(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return Bi(e,s=>{const o={before:[],lines:[],after:[]},a=Y3(r,s);Nc(o.before,bh(Il(a,"beforeLabel",this,s))),Nc(o.lines,Il(a,"label",this,s)),Nc(o.after,bh(Il(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return q3(Il(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=Il(r,"beforeFooter",this,e),s=Il(r,"footer",this,e),o=Il(r,"afterFooter",this,e);let a=[];return a=Nc(a,bh(i)),a=Nc(a,bh(s)),a=Nc(a,bh(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(kee(this.chart,n[l]));return e.filter&&(a=a.filter((f,p,v)=>e.filter(f,p,v,r))),e.itemSort&&(a=a.sort((f,p)=>e.itemSort(f,p,r))),Bi(a,f=>{const p=Y3(e.callbacks,f);i.push(Il(p,"labelColor",this,f)),s.push(Il(p,"labelPointStyle",this,f)),o.push(Il(p,"labelTextColor",this,f))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=wg[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=H3(this,r),c=Object.assign({},a,l),f=G3(this.chart,r,c),p=W3(r,c,f,this.chart);this.xAlign=f.xAlign,this.yAlign=f.yAlign,s={opacity:1,x:p.x,y:p.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:f,bottomRight:p}=od(a),{x:v,y:m}=e,{width:C,height:S}=n;let I,N,T,j,W,X;return s==="center"?(W=m+S/2,i==="left"?(I=v,N=I-o,j=W+o,X=W-o):(I=v+C,N=I+o,j=W-o,X=W+o),T=I):(i==="left"?N=v+Math.max(l,f)+o:i==="right"?N=v+C-Math.max(c,p)-o:N=this.caretX,s==="top"?(j=m,W=j-o,I=N-o,T=N+o):(j=m+S,W=j+o,I=N+o,T=N-o),X=j),{x1:I,x2:N,x3:T,y1:j,y2:W,y3:X}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=pp(r.rtl,this.x,this.width);for(e.x=Bm(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=Bo(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,f=Bo(s.bodyFont),p=Bm(this,"left",s),v=i.x(p),m=l<f.lineHeight?(f.lineHeight-l)/2:0,C=n.y+m;if(s.usePointStyle){const S={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},I=i.leftForLtr(v,c)+c/2,N=C+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Pb(e,S,I,N),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Pb(e,S,I,N)}else{e.lineWidth=ci(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const S=i.leftForLtr(v,c),I=i.leftForLtr(i.xPlus(v,1),c-2),N=od(o.borderRadius);Object.values(N).some(T=>T!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,p0(e,{x:S,y:C,w:c,h:l,radius:N}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),p0(e,{x:I,y:C+1,w:c-2,h:l-2,radius:N}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(S,C,c,l),e.strokeRect(S,C,c,l),e.fillStyle=o.backgroundColor,e.fillRect(I,C+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:f}=r,p=Bo(r.bodyFont);let v=p.lineHeight,m=0;const C=pp(r.rtl,this.x,this.width),S=function(O){n.fillText(O,C.x(e.x+m),e.y+v/2),e.y+=v+s},I=C.textAlign(o);let N,T,j,W,X,ce,he;for(n.textAlign=o,n.textBaseline="middle",n.font=p.string,e.x=Bm(this,I,r),n.fillStyle=r.bodyColor,Bi(this.beforeBody,S),m=a&&I!=="right"?o==="center"?c/2+f:c+2+f:0,W=0,ce=i.length;W<ce;++W){for(N=i[W],T=this.labelTextColors[W],n.fillStyle=T,Bi(N.before,S),j=N.lines,a&&j.length&&(this._drawColorBox(n,e,W,C,r),v=Math.max(p.lineHeight,l)),X=0,he=j.length;X<he;++X)S(j[X]),v=p.lineHeight;Bi(N.after,S)}m=0,v=p.lineHeight,Bi(this.afterBody,S),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=pp(r.rtl,this.x,this.width);for(e.x=Bm(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=Bo(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:f}=r,{topLeft:p,topRight:v,bottomLeft:m,bottomRight:C}=od(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+p,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-v,l),n.quadraticCurveTo(a+c,l,a+c,l+v),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+f-C),n.quadraticCurveTo(a+c,l+f,a+c-C,l+f),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+m,l+f),n.quadraticCurveTo(a,l+f,a,l+f-m),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+p),n.quadraticCurveTo(a,l,a+p,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=wg[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=H3(this,e),l=Object.assign({},o,this._size),c=G3(n,e,l),f=W3(e,l,c,n);(i._to!==f.x||s._to!==f.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,f))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Va(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),xP(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),LP(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!Gv(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!Gv(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=wg[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}Ke(Ib,"positioners",wg);var Nee={id:"tooltip",_element:Ib,positioners:wg,afterInit(t,e,n){n&&(t.tooltip=new Ib({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:KP},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Bee=Object.freeze({__proto__:null,Colors:YQ,Decimation:JQ,Filler:yee,Legend:Cee,SubTitle:Pee,Title:Eee,Tooltip:Nee});const Ree=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function Fee(t,e,n,r){const i=t.indexOf(e);if(i===-1)return Ree(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const jee=(t,e)=>t===null?null:Qo(Math.round(t),0,e);function K3(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Nb extends vd{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(_i(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:Fee(r,e,Ur(n,e),this._addedLabels),jee(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return K3.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Ke(Nb,"id","category"),Ke(Nb,"defaults",{ticks:{callback:K3}});function zee(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:f,maxDigits:p,includeBounds:v}=t,m=s||1,C=f-1,{min:S,max:I}=e,N=!_i(o),T=!_i(a),j=!_i(c),W=(I-S)/(p+1);let X=V5((I-S)/C/m)*m,ce,he,O,B;if(X<1e-14&&!N&&!T)return[{value:S},{value:I}];B=Math.ceil(I/X)-Math.floor(S/X),B>C&&(X=V5(B*X/C/m)*m),_i(l)||(ce=Math.pow(10,l),X=Math.ceil(X*ce)/ce),i==="ticks"?(he=Math.floor(S/X)*X,O=Math.ceil(I/X)*X):(he=S,O=I),N&&T&&s&&NZ((a-o)/s,X/1e3)?(B=Math.round(Math.min((a-o)/X,f)),X=(a-o)/B,he=o,O=a):j?(he=N?o:he,O=T?a:O,B=c-1,X=(O-he)/B):(B=(O-he)/X,$g(B,Math.round(B),X/1e3)?B=Math.round(B):B=Math.ceil(B));const q=Math.max(H5(X),H5(he));ce=Math.pow(10,_i(l)?q:l),he=Math.round(he*ce)/ce,O=Math.round(O*ce)/ce;let F=0;for(N&&(v&&he!==o?(n.push({value:o}),he<o&&F++,$g(Math.round((he+F*X)*ce)/ce,o,Z3(o,W,t))&&F++):he<o&&F++);F<B;++F){const R=Math.round((he+F*X)*ce)/ce;if(T&&R>a)break;n.push({value:R})}return T&&v&&O!==a?n.length&&$g(n[n.length-1].value,a,Z3(a,W,t))?n[n.length-1].value=a:n.push({value:a}):(!T||O===a)&&n.push({value:O}),n}function Z3(t,e,{horizontal:n,minRotation:r}){const i=fc(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class Jv extends vd{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return _i(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=Kc(i),c=Kc(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=zee(i,s);return e.bounds==="ticks"&&sP(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return M0(e,this.chart.options.locale,this.options.ticks.format)}}class Bb extends Jv{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Js(e)?e:0,this.max=Js(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=fc(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Ke(Bb,"id","linear"),Ke(Bb,"defaults",{ticks:{callback:Iy.formatters.numeric}});const m0=t=>Math.floor(uf(t)),Gf=(t,e)=>Math.pow(10,m0(t)+e);function X3(t){return t/Math.pow(10,m0(t))===1}function J3(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function Uee(t,e){const n=e-t;let r=m0(n);for(;J3(t,e,r)>10;)r++;for(;J3(t,e,r)<10;)r--;return Math.min(r,m0(t))}function $ee(t,{min:e,max:n}){e=cu(t.min,e);const r=[],i=m0(e);let s=Uee(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=i>s?Math.pow(10,i):0,c=Math.round((e-l)*o)/o,f=Math.floor((e-l)/a/10)*a*10;let p=Math.floor((c-f)/Math.pow(10,s)),v=cu(t.min,Math.round((l+f+p*Math.pow(10,s))*o)/o);for(;v<n;)r.push({value:v,major:X3(v),significand:p}),p>=10?p=p<15?15:20:p++,p>=20&&(s++,p=2,o=s>=0?1:o),v=Math.round((l+f+p*Math.pow(10,s))*o)/o;const m=cu(t.max,v);return r.push({value:m,major:X3(m),significand:p}),r}class Rb extends vd{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const r=Jv.prototype.parse.apply(this,[e,n]);if(r===0){this._zero=!0;return}return Js(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Js(e)?Math.max(0,e):null,this.max=Js(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Js(this._userMin)&&(this.min=e===Gf(this.min,0)?Gf(this.min,-1):Gf(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let r=this.min,i=this.max;const s=a=>r=e?r:a,o=a=>i=n?i:a;r===i&&(r<=0?(s(1),o(10)):(s(Gf(r,-1)),o(Gf(i,1)))),r<=0&&s(Gf(i,-1)),i<=0&&o(Gf(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},r=$ee(n,this);return e.bounds==="ticks"&&sP(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":M0(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=uf(e),this._valueRange=uf(this.max)-uf(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(uf(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}Ke(Rb,"id","logarithmic"),Ke(Rb,"defaults",{ticks:{callback:Iy.formatters.logarithmic,major:{enabled:!0}}});function Fb(t){const e=t.ticks;if(e.display&&t.display){const n=Va(e.backdropPadding);return Ur(e.font&&e.font.size,Qs.font.size)+n.height}return 0}function Vee(t,e,n){return n=xs(n)?n:[n],{w:JZ(t,e.string,n),h:n.length*e.lineHeight}}function Q3(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function Hee(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?cs/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));i[l]=c.padding;const f=t.getPointPosition(l,t.drawingArea+i[l],a),p=Bo(c.font),v=Vee(t.ctx,p,t._pointLabels[l]);r[l]=v;const m=hu(t.getIndexAngle(l)+a),C=Math.round(z_(m)),S=Q3(C,f.x,v.w,0,180),I=Q3(C,f.y,v.h,90,270);Gee(n,e,m,S,I)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=Yee(t,r,i)}function Gee(t,e,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function Wee(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,r+i+o,s),c=Math.round(z_(hu(l.angle+mo))),f=Xee(l.y,a.h,c),p=Kee(c),v=Zee(l.x,a.w,p);return{visible:!0,x:l.x,y:f,textAlign:p,left:v,top:f,right:v+a.w,bottom:f+a.h}}function qee(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:s}=t;return!(kh({x:n,y:r},e)||kh({x:n,y:s},e)||kh({x:i,y:r},e)||kh({x:i,y:s},e))}function Yee(t,e,n){const r=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:Fb(s)/2,additionalAngle:o?cs/i:0};let c;for(let f=0;f<i;f++){l.padding=n[f],l.size=e[f];const p=Wee(t,f,l);r.push(p),a==="auto"&&(p.visible=qee(p,c),p.visible&&(c=p))}return r}function Kee(t){return t===0||t===180?"center":t<180?"left":"right"}function Zee(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function Xee(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function Jee(t,e,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=e;if(!_i(a)){const l=od(e.borderRadius),c=Va(e.backdropPadding);t.fillStyle=a;const f=r-c.left,p=i-c.top,v=s-r+c.width,m=o-i+c.height;Object.values(l).some(C=>C!==0)?(t.beginPath(),p0(t,{x:f,y:p,w:v,h:m,radius:l}),t.fill()):t.fillRect(f,p,v,m)}}function Qee(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const s=t._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(t.getPointLabelContext(i));Jee(n,o,s);const a=Bo(o.font),{x:l,y:c,textAlign:f}=s;dd(n,t._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:f,textBaseline:"middle"})}}function ZP(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,us);else{let s=t.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=t.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function ete(t,e,n,r,i){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash),s.lineDashOffset=i.dashOffset,s.beginPath(),ZP(t,n,o,r),s.closePath(),s.stroke(),s.restore())}function tte(t,e,n){return Sf(t,{label:n,index:e,type:"pointLabel"})}class xg extends Jv{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Va(Fb(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=Js(e)&&!isNaN(e)?e:0,this.max=Js(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Fb(this.options))}generateTickLabels(e){Jv.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{const i=rs(this.options.pointLabels.callback,[n,r],this);return i||i===0?i:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?Hee(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,i))}getIndexAngle(e){const n=us/(this._pointLabels.length||1),r=this.options.startAngle||0;return hu(e*n+fc(r))}getDistanceFromCenterForValue(e){if(_i(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(_i(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const r=n[e];return tte(this.getContext(),e,r)}}getPointPosition(e,n,r=0){const i=this.getIndexAngle(e)-mo+r;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:n,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),ZP(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:r,grid:i,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&Qee(this,o),i.display&&this.ticks.forEach((f,p)=>{if(p!==0){l=this.getDistanceFromCenterForValue(f.value);const v=this.getContext(p),m=i.setContext(v),C=s.setContext(v);ete(this,m,l,o,C)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const f=r.setContext(this.getPointLabelContext(a)),{color:p,lineWidth:v}=f;!v||!p||(e.lineWidth=v,e.strokeStyle=p,e.setLineDash(f.borderDash),e.lineDashOffset=f.borderDashOffset,l=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!n.reverse)return;const c=r.setContext(this.getContext(l)),f=Bo(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=f.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const p=Va(c.backdropPadding);e.fillRect(-o/2-p.left,-s-f.size/2-p.top,o+p.width,f.size+p.height)}dd(e,a.label,0,-s,f,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}Ke(xg,"id","radialLinear"),Ke(xg,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Iy.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),Ke(xg,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Ke(xg,"descriptors",{angleLines:{_fallback:"grid"}});const jy={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},$l=Object.keys(jy);function eL(t,e){return t-e}function tL(t,e){if(_i(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Js(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(Lp(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function nL(t,e,n,r){const i=$l.length;for(let s=$l.indexOf(t);s<i-1;++s){const o=jy[$l[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return $l[s]}return $l[i-1]}function nte(t,e,n,r,i){for(let s=$l.length-1;s>=$l.indexOf(n);s--){const o=$l[s];if(jy[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return $l[n?$l.indexOf(n):0]}function rte(t){for(let e=$l.indexOf(t)+1,n=$l.length;e<n;++e)if(jy[$l[e]].common)return $l[e]}function rL(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=U_(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function ite(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function iL(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:ite(t,r,i,n)}class v0 extends vd{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new AP._date(e.adapters.date);i.init(n),Ug(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:tL(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Js(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=Js(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=jZ(i,s,o);return this._unit=n.unit||(r.autoSkip?nL(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):nte(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:rte(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),iL(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Qo(n,0,o),r=Qo(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||nL(s.minUnit,n,r,this._getLabelCapacity(n)),a=Ur(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=Lp(l)||l===!0,f={};let p=n,v,m;if(c&&(p=+e.startOf(p,"isoWeek",l)),p=+e.startOf(p,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const C=i.ticks.source==="data"&&this.getDataTimestamps();for(v=p,m=0;v<r;v=+e.add(v,a,o),m++)rL(f,v,C);return(v===r||i.bounds==="ticks"||m===1)&&rL(f,v,C),Object.keys(f).sort(eL).map(S=>+S)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return rs(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,f=l&&a[l],p=c&&a[c],v=r[n],m=c&&p&&v&&v.major;return this._adapter.format(e,i||(m?p:f))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=fc(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,iL(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(tL(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return lP(e.sort(eL))}}Ke(v0,"id","time"),Ke(v0,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Rm(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=Ph(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=Ph(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class jb extends v0{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Rm(n,this.min),this._tableRange=Rm(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,f;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)f=i[o+1],l=i[o-1],c=i[o],Math.round((f+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Rm(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return Rm(this._table,r*this._tableRange+this._minPos,!0)}}Ke(jb,"id","timeseries"),Ke(jb,"defaults",v0.defaults);var ste=Object.freeze({__proto__:null,CategoryScale:Nb,LinearScale:Bb,LogarithmicScale:Rb,RadialLinearScale:xg,TimeScale:v0,TimeSeriesScale:jb});const ote=[dJ,$Q,Bee,ste];Uc.register(...ote);const XP=6048e5,ate=864e5,A0=6e4,T0=36e5,lte=1e3,sL=Symbol.for("constructDateFrom");function to(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&sL in t?t[sL](e):t instanceof Date?new t.constructor(e):new Date(e)}function Dr(t,e){return to(e||t,t)}function zy(t,e,n){const r=Dr(t,n==null?void 0:n.in);return isNaN(e)?to((n==null?void 0:n.in)||t,NaN):(e&&r.setDate(r.getDate()+e),r)}function Q_(t,e,n){const r=Dr(t,n==null?void 0:n.in);if(isNaN(e))return to(t,NaN);if(!e)return r;const i=r.getDate(),s=to(t,r.getTime());s.setMonth(r.getMonth()+e+1,0);const o=s.getDate();return i>=o?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function ew(t,e,n){return to(t,+Dr(t)+e)}function ute(t,e,n){return ew(t,e*T0)}let cte={};function yd(){return cte}function Jc(t,e){var a,l,c,f;const n=yd(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((f=(c=n.locale)==null?void 0:c.options)==null?void 0:f.weekStartsOn)??0,i=Dr(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Ep(t,e){return Jc(t,{...e,weekStartsOn:1})}function JP(t,e){const n=Dr(t,e==null?void 0:e.in),r=n.getFullYear(),i=to(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=Ep(i),o=to(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=Ep(o);return n.getTime()>=s.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function Qv(t){const e=Dr(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function bd(t,...e){const n=to.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function zb(t,e){const n=Dr(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function QP(t,e,n){const[r,i]=bd(n==null?void 0:n.in,t,e),s=zb(r),o=zb(i),a=+s-Qv(s),l=+o-Qv(o);return Math.round((a-l)/ate)}function hte(t,e){const n=JP(t,e),r=to(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Ep(r)}function fte(t,e,n){const r=Dr(t,n==null?void 0:n.in);return r.setTime(r.getTime()+e*A0),r}function dte(t,e,n){return Q_(t,e*3,n)}function pte(t,e,n){return ew(t,e*1e3)}function gte(t,e,n){return zy(t,e*7,n)}function mte(t,e,n){return Q_(t,e*12,n)}function Wg(t,e){const n=+Dr(t)-+Dr(e);return n<0?-1:n>0?1:n}function vte(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function ek(t){return!(!vte(t)&&typeof t!="number"||isNaN(+Dr(t)))}function yte(t,e,n){const[r,i]=bd(n==null?void 0:n.in,t,e),s=r.getFullYear()-i.getFullYear(),o=r.getMonth()-i.getMonth();return s*12+o}function bte(t,e,n){const[r,i]=bd(n==null?void 0:n.in,t,e);return r.getFullYear()-i.getFullYear()}function tk(t,e,n){const[r,i]=bd(n==null?void 0:n.in,t,e),s=oL(r,i),o=Math.abs(QP(r,i));r.setDate(r.getDate()-s*o);const a=+(oL(r,i)===-s),l=s*(o-a);return l===0?0:l}function oL(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function O0(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function _te(t,e,n){const[r,i]=bd(n==null?void 0:n.in,t,e),s=(+r-+i)/T0;return O0(n==null?void 0:n.roundingMethod)(s)}function tw(t,e){return+Dr(t)-+Dr(e)}function wte(t,e,n){const r=tw(t,e)/A0;return O0(n==null?void 0:n.roundingMethod)(r)}function nk(t,e){const n=Dr(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}function rk(t,e){const n=Dr(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function xte(t,e){const n=Dr(t,e==null?void 0:e.in);return+nk(n,e)==+rk(n,e)}function ik(t,e,n){const[r,i,s]=bd(n==null?void 0:n.in,t,t,e),o=Wg(i,s),a=Math.abs(yte(i,s));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*a);let l=Wg(i,s)===-o;xte(r)&&a===1&&Wg(r,s)===1&&(l=!1);const c=o*(a-+l);return c===0?0:c}function Lte(t,e,n){const r=ik(t,e,n)/3;return O0(n==null?void 0:n.roundingMethod)(r)}function Cte(t,e,n){const r=tw(t,e)/1e3;return O0(n==null?void 0:n.roundingMethod)(r)}function Ste(t,e,n){const r=tk(t,e,n)/7;return O0(n==null?void 0:n.roundingMethod)(r)}function Ete(t,e,n){const[r,i]=bd(n==null?void 0:n.in,t,e),s=Wg(r,i),o=Math.abs(bte(r,i));r.setFullYear(1584),i.setFullYear(1584);const a=Wg(r,i)===-s,l=s*(o-+a);return l===0?0:l}function Pte(t,e){const n=Dr(t,e==null?void 0:e.in),r=n.getMonth(),i=r-r%3;return n.setMonth(i,1),n.setHours(0,0,0,0),n}function kte(t,e){const n=Dr(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function Mte(t,e){const n=Dr(t,e==null?void 0:e.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function sk(t,e){const n=Dr(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Ate(t,e){const n=Dr(t,e==null?void 0:e.in);return n.setMinutes(59,59,999),n}function Tte(t,e){var a,l;const n=yd(),r=n.weekStartsOn??((l=(a=n.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??0,i=Dr(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function Ote(t,e){const n=Dr(t,e==null?void 0:e.in);return n.setSeconds(59,999),n}function Dte(t,e){const n=Dr(t,e==null?void 0:e.in),r=n.getMonth(),i=r-r%3+3;return n.setMonth(i,0),n.setHours(23,59,59,999),n}function Ite(t,e){const n=Dr(t,e==null?void 0:e.in);return n.setMilliseconds(999),n}const Nte={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Bte=(t,e,n)=>{let r;const i=Nte[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function b2(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Rte={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Fte={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},jte={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},zte={date:b2({formats:Rte,defaultWidth:"full"}),time:b2({formats:Fte,defaultWidth:"full"}),dateTime:b2({formats:jte,defaultWidth:"full"})},Ute={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},$te=(t,e,n,r)=>Ute[t];function ig(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const Vte={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Hte={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Gte={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Wte={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},qte={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Yte={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Kte=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Zte={ordinalNumber:Kte,era:ig({values:Vte,defaultWidth:"wide"}),quarter:ig({values:Hte,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ig({values:Gte,defaultWidth:"wide"}),day:ig({values:Wte,defaultWidth:"wide"}),dayPeriod:ig({values:qte,defaultWidth:"wide",formattingValues:Yte,defaultFormattingWidth:"wide"})};function sg(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?Jte(a,p=>p.test(o)):Xte(a,p=>p.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const f=e.slice(o.length);return{value:c,rest:f}}}function Xte(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Jte(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Qte(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const ene=/^(\d+)(th|st|nd|rd)?/i,tne=/\d+/i,nne={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},rne={any:[/^b/i,/^(a|c)/i]},ine={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},sne={any:[/1/i,/2/i,/3/i,/4/i]},one={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ane={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},lne={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},une={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},cne={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},hne={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},fne={ordinalNumber:Qte({matchPattern:ene,parsePattern:tne,valueCallback:t=>parseInt(t,10)}),era:sg({matchPatterns:nne,defaultMatchWidth:"wide",parsePatterns:rne,defaultParseWidth:"any"}),quarter:sg({matchPatterns:ine,defaultMatchWidth:"wide",parsePatterns:sne,defaultParseWidth:"any",valueCallback:t=>t+1}),month:sg({matchPatterns:one,defaultMatchWidth:"wide",parsePatterns:ane,defaultParseWidth:"any"}),day:sg({matchPatterns:lne,defaultMatchWidth:"wide",parsePatterns:une,defaultParseWidth:"any"}),dayPeriod:sg({matchPatterns:cne,defaultMatchWidth:"any",parsePatterns:hne,defaultParseWidth:"any"})},ok={code:"en-US",formatDistance:Bte,formatLong:zte,formatRelative:$te,localize:Zte,match:fne,options:{weekStartsOn:0,firstWeekContainsDate:1}};function dne(t,e){const n=Dr(t,e==null?void 0:e.in);return QP(n,sk(n))+1}function ak(t,e){const n=Dr(t,e==null?void 0:e.in),r=+Ep(n)-+hte(n);return Math.round(r/XP)+1}function nw(t,e){var f,p,v,m;const n=Dr(t,e==null?void 0:e.in),r=n.getFullYear(),i=yd(),s=(e==null?void 0:e.firstWeekContainsDate)??((p=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((m=(v=i.locale)==null?void 0:v.options)==null?void 0:m.firstWeekContainsDate)??1,o=to((e==null?void 0:e.in)||t,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=Jc(o,e),l=to((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=Jc(l,e);return+n>=+a?r+1:+n>=+c?r:r-1}function pne(t,e){var a,l,c,f;const n=yd(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(c=n.locale)==null?void 0:c.options)==null?void 0:f.firstWeekContainsDate)??1,i=nw(t,e),s=to((e==null?void 0:e.in)||t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),Jc(s,e)}function lk(t,e){const n=Dr(t,e==null?void 0:e.in),r=+Jc(n,e)-+pne(n,e);return Math.round(r/XP)+1}function Ni(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Kh={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Ni(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Ni(n+1,2)},d(t,e){return Ni(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Ni(t.getHours()%12||12,e.length)},H(t,e){return Ni(t.getHours(),e.length)},m(t,e){return Ni(t.getMinutes(),e.length)},s(t,e){return Ni(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Ni(i,e.length)}},qd={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},aL={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Kh.y(t,e)},Y:function(t,e,n,r){const i=nw(t,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return Ni(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):Ni(s,e.length)},R:function(t,e){const n=JP(t);return Ni(n,e.length)},u:function(t,e){const n=t.getFullYear();return Ni(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Ni(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Ni(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Kh.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Ni(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=lk(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Ni(i,e.length)},I:function(t,e,n){const r=ak(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Ni(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Kh.d(t,e)},D:function(t,e,n){const r=dne(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ni(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Ni(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Ni(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Ni(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=qd.noon:r===0?i=qd.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=qd.evening:r>=12?i=qd.afternoon:r>=4?i=qd.morning:i=qd.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Kh.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Kh.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ni(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ni(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Kh.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Kh.s(t,e)},S:function(t,e){return Kh.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return uL(r);case"XXXX":case"XX":return Zf(r);case"XXXXX":case"XXX":default:return Zf(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return uL(r);case"xxxx":case"xx":return Zf(r);case"xxxxx":case"xxx":default:return Zf(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+lL(r,":");case"OOOO":default:return"GMT"+Zf(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+lL(r,":");case"zzzz":default:return"GMT"+Zf(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return Ni(r,e.length)},T:function(t,e,n){return Ni(+t,e.length)}};function lL(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+Ni(s,2)}function uL(t,e){return t%60===0?(t>0?"-":"+")+Ni(Math.abs(t)/60,2):Zf(t,e)}function Zf(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Ni(Math.trunc(r/60),2),s=Ni(r%60,2);return n+i+e+s}const cL=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},uk=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},gne=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return cL(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",cL(r,e)).replace("{{time}}",uk(i,e))},Ub={p:uk,P:gne},mne=/^D+$/,vne=/^Y+$/,yne=["D","DD","YY","YYYY"];function ck(t){return mne.test(t)}function hk(t){return vne.test(t)}function $b(t,e,n){const r=bne(t,e,n);if(console.warn(r),yne.includes(t))throw new RangeError(r)}function bne(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const _ne=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,wne=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,xne=/^'([^]*?)'?$/,Lne=/''/g,Cne=/[a-zA-Z]/;function Sne(t,e,n){var f,p,v,m,C,S,I,N;const r=yd(),i=(n==null?void 0:n.locale)??r.locale??ok,s=(n==null?void 0:n.firstWeekContainsDate)??((p=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(v=r.locale)==null?void 0:v.options)==null?void 0:m.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((S=(C=n==null?void 0:n.locale)==null?void 0:C.options)==null?void 0:S.weekStartsOn)??r.weekStartsOn??((N=(I=r.locale)==null?void 0:I.options)==null?void 0:N.weekStartsOn)??0,a=Dr(t,n==null?void 0:n.in);if(!ek(a))throw new RangeError("Invalid time value");let l=e.match(wne).map(T=>{const j=T[0];if(j==="p"||j==="P"){const W=Ub[j];return W(T,i.formatLong)}return T}).join("").match(_ne).map(T=>{if(T==="''")return{isToken:!1,value:"'"};const j=T[0];if(j==="'")return{isToken:!1,value:Ene(T)};if(aL[j])return{isToken:!0,value:T};if(j.match(Cne))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");return{isToken:!1,value:T}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(T=>{if(!T.isToken)return T.value;const j=T.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&hk(j)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&ck(j))&&$b(j,e,String(t));const W=aL[j[0]];return W(a,j,i.localize,c)}).join("")}function Ene(t){const e=t.match(xne);return e?e[1].replace(Lne,"'"):t}function Pne(){return Object.assign({},yd())}function kne(t,e){const n=Dr(t,e==null?void 0:e.in).getDay();return n===0?7:n}function Mne(t,e){const n=Ane(e)?new e(0):to(e,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}function Ane(t){var e;return typeof t=="function"&&((e=t.prototype)==null?void 0:e.constructor)===t}const Tne=10;class fk{constructor(){Ke(this,"subPriority",0)}validate(e,n){return!0}}class One extends fk{constructor(e,n,r,i,s){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=i,s&&(this.subPriority=s)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class Dne extends fk{constructor(n,r){super();Ke(this,"priority",Tne);Ke(this,"subPriority",-1);this.context=n||(i=>to(r,i))}set(n,r){return r.timestampIsSet?n:to(n,Mne(n,this.context))}}class Ai{run(e,n,r,i){const s=this.parse(e,n,r,i);return s?{setter:new One(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,n,r){return!0}}class Ine extends Ai{constructor(){super(...arguments);Ke(this,"priority",140);Ke(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"});case"GGGGG":return i.era(n,{width:"narrow"});case"GGGG":default:return i.era(n,{width:"wide"})||i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"})}}set(n,r,i){return r.era=i,n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}const vo={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},$c={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function yo(t,e){return t&&{value:e(t.value),rest:t.rest}}function Fs(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function Vc(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,i=n[2]?parseInt(n[2],10):0,s=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(i*T0+s*A0+o*lte),rest:e.slice(n[0].length)}}function dk(t){return Fs(vo.anyDigitsSigned,t)}function no(t,e){switch(t){case 1:return Fs(vo.singleDigit,e);case 2:return Fs(vo.twoDigits,e);case 3:return Fs(vo.threeDigits,e);case 4:return Fs(vo.fourDigits,e);default:return Fs(new RegExp("^\\d{1,"+t+"}"),e)}}function ey(t,e){switch(t){case 1:return Fs(vo.singleDigitSigned,e);case 2:return Fs(vo.twoDigitsSigned,e);case 3:return Fs(vo.threeDigitsSigned,e);case 4:return Fs(vo.fourDigitsSigned,e);default:return Fs(new RegExp("^-?\\d{1,"+t+"}"),e)}}function rw(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function pk(t,e){const n=e>0,r=n?e:1-e;let i;if(r<=50)i=t||100;else{const s=r+50,o=Math.trunc(s/100)*100,a=t>=s%100;i=t+o-(a?100:0)}return n?i:1-i}function gk(t){return t%400===0||t%4===0&&t%100!==0}class Nne extends Ai{constructor(){super(...arguments);Ke(this,"priority",130);Ke(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,i){const s=o=>({year:o,isTwoDigitYear:r==="yy"});switch(r){case"y":return yo(no(4,n),s);case"yo":return yo(i.ordinalNumber(n,{unit:"year"}),s);default:return yo(no(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i){const s=n.getFullYear();if(i.isTwoDigitYear){const a=pk(i.year,s);return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}const o=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(o,0,1),n.setHours(0,0,0,0),n}}class Bne extends Ai{constructor(){super(...arguments);Ke(this,"priority",130);Ke(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,i){const s=o=>({year:o,isTwoDigitYear:r==="YY"});switch(r){case"Y":return yo(no(4,n),s);case"Yo":return yo(i.ordinalNumber(n,{unit:"year"}),s);default:return yo(no(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i,s){const o=nw(n,s);if(i.isTwoDigitYear){const l=pk(i.year,o);return n.setFullYear(l,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),Jc(n,s)}const a=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(a,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),Jc(n,s)}}class Rne extends Ai{constructor(){super(...arguments);Ke(this,"priority",130);Ke(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return ey(r==="R"?4:r.length,n)}set(n,r,i){const s=to(n,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),Ep(s)}}class Fne extends Ai{constructor(){super(...arguments);Ke(this,"priority",130);Ke(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return ey(r==="u"?4:r.length,n)}set(n,r,i){return n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}class jne extends Ai{constructor(){super(...arguments);Ke(this,"priority",120);Ke(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"Q":case"QQ":return no(r.length,n);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(n,{width:"wide",context:"formatting"})||i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class zne extends Ai{constructor(){super(...arguments);Ke(this,"priority",120);Ke(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"q":case"qq":return no(r.length,n);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(n,{width:"wide",context:"standalone"})||i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class Une extends Ai{constructor(){super(...arguments);Ke(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);Ke(this,"priority",110)}parse(n,r,i){const s=o=>o-1;switch(r){case"M":return yo(Fs(vo.month,n),s);case"MM":return yo(no(2,n),s);case"Mo":return yo(i.ordinalNumber(n,{unit:"month"}),s);case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(n,{width:"wide",context:"formatting"})||i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}class $ne extends Ai{constructor(){super(...arguments);Ke(this,"priority",110);Ke(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,i){const s=o=>o-1;switch(r){case"L":return yo(Fs(vo.month,n),s);case"LL":return yo(no(2,n),s);case"Lo":return yo(i.ordinalNumber(n,{unit:"month"}),s);case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(n,{width:"wide",context:"standalone"})||i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}function Vne(t,e,n){const r=Dr(t,n==null?void 0:n.in),i=lk(r,n)-e;return r.setDate(r.getDate()-i*7),Dr(r,n==null?void 0:n.in)}class Hne extends Ai{constructor(){super(...arguments);Ke(this,"priority",100);Ke(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,i){switch(r){case"w":return Fs(vo.week,n);case"wo":return i.ordinalNumber(n,{unit:"week"});default:return no(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i,s){return Jc(Vne(n,i,s),s)}}function Gne(t,e,n){const r=Dr(t,n==null?void 0:n.in),i=ak(r,n)-e;return r.setDate(r.getDate()-i*7),r}class Wne extends Ai{constructor(){super(...arguments);Ke(this,"priority",100);Ke(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,i){switch(r){case"I":return Fs(vo.week,n);case"Io":return i.ordinalNumber(n,{unit:"week"});default:return no(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i){return Ep(Gne(n,i))}}const qne=[31,28,31,30,31,30,31,31,30,31,30,31],Yne=[31,29,31,30,31,30,31,31,30,31,30,31];class Kne extends Ai{constructor(){super(...arguments);Ke(this,"priority",90);Ke(this,"subPriority",1);Ke(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"d":return Fs(vo.date,n);case"do":return i.ordinalNumber(n,{unit:"date"});default:return no(r.length,n)}}validate(n,r){const i=n.getFullYear(),s=gk(i),o=n.getMonth();return s?r>=1&&r<=Yne[o]:r>=1&&r<=qne[o]}set(n,r,i){return n.setDate(i),n.setHours(0,0,0,0),n}}class Zne extends Ai{constructor(){super(...arguments);Ke(this,"priority",90);Ke(this,"subpriority",1);Ke(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,i){switch(r){case"D":case"DD":return Fs(vo.dayOfYear,n);case"Do":return i.ordinalNumber(n,{unit:"date"});default:return no(r.length,n)}}validate(n,r){const i=n.getFullYear();return gk(i)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,i){return n.setMonth(0,i),n.setHours(0,0,0,0),n}}function iw(t,e,n){var p,v,m,C;const r=yd(),i=(n==null?void 0:n.weekStartsOn)??((v=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((C=(m=r.locale)==null?void 0:m.options)==null?void 0:C.weekStartsOn)??0,s=Dr(t,n==null?void 0:n.in),o=s.getDay(),l=(e%7+7)%7,c=7-i,f=e<0||e>6?e-(o+c)%7:(l+c)%7-(o+c)%7;return zy(s,f,n)}class Xne extends Ai{constructor(){super(...arguments);Ke(this,"priority",90);Ke(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=iw(n,i,s),n.setHours(0,0,0,0),n}}class Jne extends Ai{constructor(){super(...arguments);Ke(this,"priority",90);Ke(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return yo(no(r.length,n),o);case"eo":return yo(i.ordinalNumber(n,{unit:"day"}),o);case"eee":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeeee":return i.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=iw(n,i,s),n.setHours(0,0,0,0),n}}class Qne extends Ai{constructor(){super(...arguments);Ke(this,"priority",90);Ke(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return yo(no(r.length,n),o);case"co":return yo(i.ordinalNumber(n,{unit:"day"}),o);case"ccc":return i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"ccccc":return i.day(n,{width:"narrow",context:"standalone"});case"cccccc":return i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(n,{width:"wide",context:"standalone"})||i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=iw(n,i,s),n.setHours(0,0,0,0),n}}function ere(t,e,n){const r=Dr(t,n==null?void 0:n.in),i=kne(r,n),s=e-i;return zy(r,s,n)}class tre extends Ai{constructor(){super(...arguments);Ke(this,"priority",90);Ke(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,i){const s=o=>o===0?7:o;switch(r){case"i":case"ii":return no(r.length,n);case"io":return i.ordinalNumber(n,{unit:"day"});case"iii":return yo(i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiii":return yo(i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiiii":return yo(i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiii":default:return yo(i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s)}}validate(n,r){return r>=1&&r<=7}set(n,r,i){return n=ere(n,i),n.setHours(0,0,0,0),n}}class nre extends Ai{constructor(){super(...arguments);Ke(this,"priority",80);Ke(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(rw(i),0,0,0),n}}class rre extends Ai{constructor(){super(...arguments);Ke(this,"priority",80);Ke(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(rw(i),0,0,0),n}}class ire extends Ai{constructor(){super(...arguments);Ke(this,"priority",80);Ke(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(rw(i),0,0,0),n}}class sre extends Ai{constructor(){super(...arguments);Ke(this,"priority",70);Ke(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,i){switch(r){case"h":return Fs(vo.hour12h,n);case"ho":return i.ordinalNumber(n,{unit:"hour"});default:return no(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,i){const s=n.getHours()>=12;return s&&i<12?n.setHours(i+12,0,0,0):!s&&i===12?n.setHours(0,0,0,0):n.setHours(i,0,0,0),n}}class ore extends Ai{constructor(){super(...arguments);Ke(this,"priority",70);Ke(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,i){switch(r){case"H":return Fs(vo.hour23h,n);case"Ho":return i.ordinalNumber(n,{unit:"hour"});default:return no(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,i){return n.setHours(i,0,0,0),n}}class are extends Ai{constructor(){super(...arguments);Ke(this,"priority",70);Ke(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,i){switch(r){case"K":return Fs(vo.hour11h,n);case"Ko":return i.ordinalNumber(n,{unit:"hour"});default:return no(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.getHours()>=12&&i<12?n.setHours(i+12,0,0,0):n.setHours(i,0,0,0),n}}class lre extends Ai{constructor(){super(...arguments);Ke(this,"priority",70);Ke(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,i){switch(r){case"k":return Fs(vo.hour24h,n);case"ko":return i.ordinalNumber(n,{unit:"hour"});default:return no(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,i){const s=i<=24?i%24:i;return n.setHours(s,0,0,0),n}}class ure extends Ai{constructor(){super(...arguments);Ke(this,"priority",60);Ke(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"m":return Fs(vo.minute,n);case"mo":return i.ordinalNumber(n,{unit:"minute"});default:return no(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setMinutes(i,0,0),n}}class cre extends Ai{constructor(){super(...arguments);Ke(this,"priority",50);Ke(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"s":return Fs(vo.second,n);case"so":return i.ordinalNumber(n,{unit:"second"});default:return no(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setSeconds(i,0),n}}class hre extends Ai{constructor(){super(...arguments);Ke(this,"priority",30);Ke(this,"incompatibleTokens",["t","T"])}parse(n,r){const i=s=>Math.trunc(s*Math.pow(10,-r.length+3));return yo(no(r.length,n),i)}set(n,r,i){return n.setMilliseconds(i),n}}class fre extends Ai{constructor(){super(...arguments);Ke(this,"priority",10);Ke(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return Vc($c.basicOptionalMinutes,n);case"XX":return Vc($c.basic,n);case"XXXX":return Vc($c.basicOptionalSeconds,n);case"XXXXX":return Vc($c.extendedOptionalSeconds,n);case"XXX":default:return Vc($c.extended,n)}}set(n,r,i){return r.timestampIsSet?n:to(n,n.getTime()-Qv(n)-i)}}class dre extends Ai{constructor(){super(...arguments);Ke(this,"priority",10);Ke(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return Vc($c.basicOptionalMinutes,n);case"xx":return Vc($c.basic,n);case"xxxx":return Vc($c.basicOptionalSeconds,n);case"xxxxx":return Vc($c.extendedOptionalSeconds,n);case"xxx":default:return Vc($c.extended,n)}}set(n,r,i){return r.timestampIsSet?n:to(n,n.getTime()-Qv(n)-i)}}class pre extends Ai{constructor(){super(...arguments);Ke(this,"priority",40);Ke(this,"incompatibleTokens","*")}parse(n){return dk(n)}set(n,r,i){return[to(n,i*1e3),{timestampIsSet:!0}]}}class gre extends Ai{constructor(){super(...arguments);Ke(this,"priority",20);Ke(this,"incompatibleTokens","*")}parse(n){return dk(n)}set(n,r,i){return[to(n,i),{timestampIsSet:!0}]}}const mre={G:new Ine,y:new Nne,Y:new Bne,R:new Rne,u:new Fne,Q:new jne,q:new zne,M:new Une,L:new $ne,w:new Hne,I:new Wne,d:new Kne,D:new Zne,E:new Xne,e:new Jne,c:new Qne,i:new tre,a:new nre,b:new rre,B:new ire,h:new sre,H:new ore,K:new are,k:new lre,m:new ure,s:new cre,S:new hre,X:new fre,x:new dre,t:new pre,T:new gre},vre=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,yre=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,bre=/^'([^]*?)'?$/,_re=/''/g,wre=/\S/,xre=/[a-zA-Z]/;function Lre(t,e,n,r){var I,N,T,j,W,X,ce,he;const i=()=>to((r==null?void 0:r.in)||n,NaN),s=Pne(),o=(r==null?void 0:r.locale)??s.locale??ok,a=(r==null?void 0:r.firstWeekContainsDate)??((N=(I=r==null?void 0:r.locale)==null?void 0:I.options)==null?void 0:N.firstWeekContainsDate)??s.firstWeekContainsDate??((j=(T=s.locale)==null?void 0:T.options)==null?void 0:j.firstWeekContainsDate)??1,l=(r==null?void 0:r.weekStartsOn)??((X=(W=r==null?void 0:r.locale)==null?void 0:W.options)==null?void 0:X.weekStartsOn)??s.weekStartsOn??((he=(ce=s.locale)==null?void 0:ce.options)==null?void 0:he.weekStartsOn)??0;if(!e)return t?i():Dr(n,r==null?void 0:r.in);const c={firstWeekContainsDate:a,weekStartsOn:l,locale:o},f=[new Dne(r==null?void 0:r.in,n)],p=e.match(yre).map(O=>{const B=O[0];if(B in Ub){const q=Ub[B];return q(O,o.formatLong)}return O}).join("").match(vre),v=[];for(let O of p){!(r!=null&&r.useAdditionalWeekYearTokens)&&hk(O)&&$b(O,e,t),!(r!=null&&r.useAdditionalDayOfYearTokens)&&ck(O)&&$b(O,e,t);const B=O[0],q=mre[B];if(q){const{incompatibleTokens:F}=q;if(Array.isArray(F)){const K=v.find(Z=>F.includes(Z.token)||Z.token===B);if(K)throw new RangeError(`The format string mustn't contain \`${K.fullToken}\` and \`${O}\` at the same time`)}else if(q.incompatibleTokens==="*"&&v.length>0)throw new RangeError(`The format string mustn't contain \`${O}\` and any other token at the same time`);v.push({token:B,fullToken:O});const R=q.run(t,O,o.match,c);if(!R)return i();f.push(R.setter),t=R.rest}else{if(B.match(xre))throw new RangeError("Format string contains an unescaped latin alphabet character `"+B+"`");if(O==="''"?O="'":B==="'"&&(O=Cre(O)),t.indexOf(O)===0)t=t.slice(O.length);else return i()}}if(t.length>0&&wre.test(t))return i();const m=f.map(O=>O.priority).sort((O,B)=>B-O).filter((O,B,q)=>q.indexOf(O)===B).map(O=>f.filter(B=>B.priority===O).sort((B,q)=>q.subPriority-B.subPriority)).map(O=>O[0]);let C=Dr(n,r==null?void 0:r.in);if(isNaN(+C))return i();const S={};for(const O of m){if(!O.validate(C,c))return i();const B=O.set(C,S,c);Array.isArray(B)?(C=B[0],Object.assign(S,B[1])):C=B}return C}function Cre(t){return t.match(bre)[1].replace(_re,"'")}function Sre(t,e){const n=Dr(t,e==null?void 0:e.in);return n.setMinutes(0,0,0),n}function Ere(t,e){const n=Dr(t,e==null?void 0:e.in);return n.setSeconds(0,0),n}function Pre(t,e){const n=Dr(t,e==null?void 0:e.in);return n.setMilliseconds(0),n}function kre(t,e){const n=()=>to(e==null?void 0:e.in,NaN),r=(e==null?void 0:e.additionalDigits)??2,i=Ore(t);let s;if(i.date){const c=Dre(i.date,r);s=Ire(c.restDateString,c.year)}if(!s||isNaN(+s))return n();const o=+s;let a=0,l;if(i.time&&(a=Nre(i.time),isNaN(a)))return n();if(i.timezone){if(l=Bre(i.timezone),isNaN(l))return n()}else{const c=new Date(o+a),f=Dr(0,e==null?void 0:e.in);return f.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),f.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),f}return Dr(o+a+l,e==null?void 0:e.in)}const Fm={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Mre=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Are=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Tre=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Ore(t){const e={},n=t.split(Fm.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],Fm.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Fm.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const i=Fm.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function Dre(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((r[1]||r[2]).length)}}function Ire(t,e){if(e===null)return new Date(NaN);const n=t.match(Mre);if(!n)return new Date(NaN);const r=!!n[4],i=og(n[1]),s=og(n[2])-1,o=og(n[3]),a=og(n[4]),l=og(n[5])-1;if(r)return Ure(e,a,l)?Rre(e,a,l):new Date(NaN);{const c=new Date(0);return!jre(e,s,o)||!zre(e,i)?new Date(NaN):(c.setUTCFullYear(e,s,Math.max(i,o)),c)}}function og(t){return t?parseInt(t):1}function Nre(t){const e=t.match(Are);if(!e)return NaN;const n=_2(e[1]),r=_2(e[2]),i=_2(e[3]);return $re(n,r,i)?n*T0+r*A0+i*1e3:NaN}function _2(t){return t&&parseFloat(t.replace(",","."))||0}function Bre(t){if(t==="Z")return 0;const e=t.match(Tre);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return Vre(r,i)?n*(r*T0+i*A0):NaN}function Rre(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const i=r.getUTCDay()||7,s=(e-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const Fre=[31,null,31,30,31,30,31,31,30,31,30,31];function mk(t){return t%400===0||t%4===0&&t%100!==0}function jre(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(Fre[e]||(mk(t)?29:28))}function zre(t,e){return e>=1&&e<=(mk(t)?366:365)}function Ure(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function $re(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function Vre(t,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const Hre={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};AP._date.override({_id:"date-fns",formats:function(){return Hre},parse:function(t,e){if(t===null||typeof t>"u")return null;const n=typeof t;return n==="number"||t instanceof Date?t=Dr(t):n==="string"&&(typeof e=="string"?t=Lre(t,e,new Date,this.options):t=kre(t,this.options)),ek(t)?t.getTime():null},format:function(t,e){return Sne(t,e,this.options)},add:function(t,e,n){switch(n){case"millisecond":return ew(t,e);case"second":return pte(t,e);case"minute":return fte(t,e);case"hour":return ute(t,e);case"day":return zy(t,e);case"week":return gte(t,e);case"month":return Q_(t,e);case"quarter":return dte(t,e);case"year":return mte(t,e);default:return t}},diff:function(t,e,n){switch(n){case"millisecond":return tw(t,e);case"second":return Cte(t,e);case"minute":return wte(t,e);case"hour":return _te(t,e);case"day":return tk(t,e);case"week":return Ste(t,e);case"month":return ik(t,e);case"quarter":return Lte(t,e);case"year":return Ete(t,e);default:return 0}},startOf:function(t,e,n){switch(e){case"second":return Pre(t);case"minute":return Ere(t);case"hour":return Sre(t);case"day":return zb(t);case"week":return Jc(t);case"isoWeek":return Jc(t,{weekStartsOn:+n});case"month":return kte(t);case"quarter":return Pte(t);case"year":return sk(t);default:return t}},endOf:function(t,e){switch(e){case"second":return Ite(t);case"minute":return Ote(t);case"hour":return Ate(t);case"day":return nk(t);case"week":return Tte(t);case"month":return rk(t);case"quarter":return Dte(t);case"year":return Mte(t);default:return t}}});const Gre={class:"container mx-auto px-4 py-8 min-h-full"},Wre={class:"mb-8"},qre={key:0,class:"mb-6"},Yre={class:"flex gap-4"},Kre=["disabled"],Zre={key:0,value:""},Xre=["value"],Jre={key:1,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md"},Qre={class:"flex"},eie={class:"ml-3"},tie={class:"text-sm font-medium text-red-800"},nie={key:2,class:"mb-6 p-6 bg-gray-100 border border-gray-300 rounded-md text-center"},rie={class:"flex flex-col items-center"},iie={class:"text-gray-600 mb-4"},sie={key:0,class:"mt-2"},oie={key:3,class:"mb-6"},aie={class:"flex gap-4"},lie=["disabled"],uie={key:0,value:""},cie={key:1,value:""},hie=["value"],fie=["disabled"],die={key:0,class:"mt-4 bg-white rounded-lg shadow-md p-4"},pie={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm"},gie={class:"font-medium"},mie={class:"font-medium"},vie={class:"font-medium"},yie={class:"text-gray-500"},bie={class:"font-medium"},_ie={class:"font-medium"},wie={class:"font-medium"},xie={class:"md:col-span-2 lg:col-span-3 flex items-center"},Lie=["href"],Cie={key:4,class:"mb-6"},Sie={class:"border-b border-gray-200"},Eie={class:"-mb-px flex space-x-8","aria-label":"Tabs"},Pie=["onClick"],kie={key:5,class:"mb-8"},Mie={class:"flex justify-between items-center mb-4"},Aie={class:"text-sm text-gray-600"},Tie={key:0,class:"flex items-center"},Oie={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Die={class:"bg-white rounded-lg shadow-md p-6"},Iie={class:"text-4xl font-bold text-primary-600 mb-2"},Nie={class:"text-sm text-gray-600"},Bie={class:"bg-white rounded-lg shadow-md p-6"},Rie={class:"text-4xl font-bold text-primary-600 mb-2"},Fie={class:"mt-4"},jie={class:"w-full bg-gray-200 rounded-full h-2.5"},zie={class:"bg-white rounded-lg shadow-md p-6"},Uie={class:"text-4xl font-bold text-primary-600 mb-2"},$ie={class:"text-sm text-gray-600"},Vie={class:"bg-white rounded-lg shadow-md p-6"},Hie={class:"text-4xl font-bold text-primary-600 mb-2"},Gie={class:"text-sm text-gray-600"},Wie={class:"bg-white rounded-lg shadow-md p-6"},qie={class:"text-4xl font-bold text-primary-600 mb-2"},Yie={class:"text-sm text-gray-600"},Kie={class:"bg-white rounded-lg shadow-md p-6"},Zie={class:"text-4xl font-bold text-primary-600 mb-2"},Xie={class:"text-sm text-gray-600"},Jie={key:6,class:"mb-8"},Qie={class:"flex justify-between items-center mb-4"},ese={class:"text-sm text-gray-600"},tse={class:"flex items-center"},nse={key:0,class:"flex items-center mr-3"},rse=["disabled"],ise={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},sse={key:0,class:"md:col-span-2 grid grid-cols-2 gap-4"},ose=["value"],ase={key:0,class:"mt-1 text-sm text-red-600"},lse={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},use={class:"bg-white rounded-lg shadow-md p-6"},cse={class:"chart-container"},hse={class:"bg-white rounded-lg shadow-md p-6"},fse={class:"chart-container"},dse={class:"bg-white rounded-lg shadow-md p-6"},pse={class:"chart-container"},gse={class:"bg-white rounded-lg shadow-md p-6"},mse={class:"chart-container"},vse={class:"bg-white rounded-lg shadow-md p-6"},yse={class:"chart-container"},bse={class:"bg-white rounded-lg shadow-md p-6"},_se={class:"chart-container"},wse=hs({__name:"MeteoView",setup(t){const e=Gl(),n=eo(),r=bt({}),i=bt(new Date),s=bt(""),o=bt([]),a=bt(""),l=bt([]),c=bt(null),f=bt(""),p=bt(""),v=bt(!1);Hn(()=>{var de;return((de=n.user)==null?void 0:de.user_type)||""});const m=Hn(()=>n.isAdmin);let C=null;const S=Hn(()=>!a.value||!o.value.length?null:o.value.find(de=>de.mac===a.value));function I(de){return de?de.latitude&&de.longitude&&de.latitude!==0&&de.longitude!==0:!1}function N(de){return I(de)?`${de.latitude.toFixed(6)}, ${de.longitude.toFixed(6)}`:""}function T(de){if(!I(de))return"#";const re=de.latitude,Ae=de.longitude,Ge=encodeURIComponent(de.name||"Station mto");return`https://www.google.com/maps/search/?api=1&query=${re},${Ae}&query_place_id=${Ge}`}async function j(){try{f.value="";const de={};m.value&&c.value&&(de.entreprise=c.value);const re=await O1.getDevices(de);let Ae=[];if(re.data&&re.data.devices&&Array.isArray(re.data.devices)&&re.data.devices.length>0&&typeof re.data.devices[1]=="string"){let Ge=re.data.devices[1];f.value=Ge,console.warn("[fetchDevices] Message d'erreur API reu:",f.value);return}if(re.data&&re.data.devices&&Array.isArray(re.data.devices))Ae=re.data.devices;else if(Array.isArray(re.data))Ae=re.data;else if(typeof re.data=="object"&&re.data!==null){for(const Ge in re.data)if(Array.isArray(re.data[Ge])){Ae=re.data[Ge];break}}o.value=Ae.filter(Ge=>Ge!==null&&typeof Ge=="object").map(Ge=>{var at,ut;const tt=Ge.mac||Ge.imei;return{id:Ge.id,name:Ge.name||`Station ${tt}`,mac:tt,model:((at=Ge.stationtype)==null?void 0:at.split("_")[0])||"Inconnu",firmware_version:(ut=Ge.stationtype)!=null&&ut.includes("_V")?Ge.stationtype.split("_V")[1]:"1.0",timezone:Ge.date_zone_id||"UTC",created_at:Ge.createtime?new Date(Ge.createtime*1e3).toISOString():new Date().toISOString(),latitude:Ge.latitude||0,longitude:Ge.longitude||0}}),o.value.length>0?a.value=o.value[0].mac:(console.warn("[fetchDevices] Aucun appareil disponible"),r.value={})}catch(de){console.error("[fetchDevices] Erreur lors de la rcupration des appareils:",de),de.response&&de.response.data&&de.response.data.error?f.value=de.response.data.error:(f.value="Erreur lors de la rcupration des stations mto",e.error("Erreur lors de la rcupration des stations mto")),o.value=[],a.value="",r.value={}}}async function W(){try{if(!a.value){console.warn("[fetchWeatherData] Aucun appareil slectionn");return}f.value="",v.value=!0;const de={mac:a.value};m.value&&c.value&&(de.entreprise=c.value);const re=await O1.getRealTimeData(de);let Ae;re.data&&"data"in re.data?Ae=re.data.data:re.data&&("outdoor"in re.data||"indoor"in re.data)?Ae=re.data:(Ae={},console.warn("[fetchWeatherData] Format de rponse non reconnu")),r.value=Ae,i.value=new Date,s.value=new Date().toLocaleString(),f.value=""}catch(de){console.error("[fetchWeatherData] Erreur lors de la rcupration des donnes mto:",de),de.response&&de.response.data&&de.response.data.error?f.value=de.response.data.error:(f.value="Erreur lors de la rcupration des donnes mto",e.error("Erreur lors de la rcupration des donnes mto")),r.value={}}finally{v.value=!1}}function X(de){if(de==null)return"0";const re=typeof de=="string"?parseFloat(de):de;return isNaN(re)?"0":((re-32)*5/9).toFixed(1)}function ce(de){if(de==null)return"0";const re=typeof de=="string"?parseFloat(de):de;return isNaN(re)?"0":(re*1.60934).toFixed(1)}function he(de){if(de==null)return"0";const re=typeof de=="string"?parseFloat(de):de;return isNaN(re)?"0":(re*25.4).toFixed(1)}function O(de){if(de==null)return"0";const re=typeof de=="string"?parseFloat(de):de;return isNaN(re)?"0":(re*33.8639).toFixed(1)}function B(de){if(!de)return"N/A";const re=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSO","SO","OSO","O","ONO","NO","NNO"],Ae=Math.round(de/22.5)%16;return re[Ae]}function q(de){return de?de>0?"En hausse":"En baisse":"Stable"}async function F(){if(m.value)try{const de=await da.getUsers({role:"ENTREPRISE"});l.value=de.data,l.value.length>0&&!c.value&&(c.value=l.value[0].id)}catch(de){console.error("Erreur lors de la rcupration des entreprises:",de),e.error("Erreur lors de la rcupration des entreprises")}}async function R(){try{o.value=[],a.value="",r.value={},f.value="",Object.values(pe).forEach(de=>{try{de.destroy()}catch(re){console.error("Erreur lors de la destruction d'un graphique:",re)}}),pe={},await j()}catch(de){console.error("Erreur lors de la rcupration des appareils avec l'entreprise:",de),e.error("Erreur lors du changement d'entreprise")}}const K=[{id:"realtime",name:"Temps rel"},{id:"history",name:"Historique"}],Z=bt("realtime"),Y=bt("today"),k=bt("5min"),U=bt(""),H=bt(""),ue=()=>{const de=new Date,re=new Date(de);re.setDate(de.getDate()-1),U.value=re.toISOString().split("T")[0],H.value=re.toISOString().split("T")[0]},_e=[{value:"5min",label:"5 minutes",maxDays:1,maxPastDays:90},{value:"30min",label:"30 minutes",maxDays:7,maxPastDays:365},{value:"4hour",label:"4 heures",maxDays:31,maxPastDays:730},{value:"1day",label:"1 jour",maxDays:365,maxPastDays:1460}],Ie=Hn(()=>{const de=fe(),re=new Date(de.start),Ae=new Date(de.end);Ae.setHours(23,59,59,999);const Ge=Math.abs(Ae.getTime()-re.getTime()),tt=Math.ceil(Ge/(1e3*60*60*24)),ut=Math.abs(new Date().getTime()-re.getTime()),gt=Math.ceil(ut/(1e3*60*60*24));return _e.filter($t=>tt<=$t.maxDays&&gt<=$t.maxPastDays)});li(Y,de=>{de==="custom"&&ue(),!Ie.value.some(Ae=>Ae.value===k.value)&&Ie.value.length>0&&(k.value=Ie.value[0].value)}),li([U,H],()=>{Y.value==="custom"&&!Ie.value.some(re=>re.value===k.value)&&Ie.value.length>0&&(k.value=Ie.value[0].value)});const ee=bt(null),te=bt(null),oe=bt(null),ge=bt(null),ve=bt(null),ye=bt(null);let pe={};const fe=()=>{let de=new Date,re=new Date;switch(Y.value){case"today":de.setHours(0,0,0,0);break;case"yesterday":de.setDate(de.getDate()-1),de.setHours(0,0,0,0),re.setDate(re.getDate()-1),re.setHours(23,59,59,999);break;case"week":de.setDate(de.getDate()-7);break;case"month":de.setDate(de.getDate()-30);break;case"custom":de=new Date(U.value),re=new Date(H.value);break}return{start:de.toISOString().split("T")[0],end:re.toISOString().split("T")[0]}},$e=async()=>{try{if(Ne.value)return;if(Ne.value=!0,Ie.value.length===0){e.warning("Aucun intervalle disponible pour cette priode"),Ne.value=!1;return}Ie.value.some(Ge=>Ge.value===k.value)||(k.value=Ie.value[0].value);const re=fe(),Ae={mac:a.value,start_date:re.start,end_date:re.end,cycle_type:k.value};m.value&&c.value&&(Ae.entreprise=c.value);try{const tt=(await O1.getHistoryData(Ae)).data,at=[{type:"temp",ref:ee},{type:"humidity",ref:te},{type:"pressure",ref:oe},{type:"wind",ref:ge},{type:"rain",ref:ve},{type:"solar",ref:ye}];for(const ut of at)if(ut.ref.value){const gt=ae(tt,ut.type);ot(ut.type,ut.ref.value,gt)}s.value=new Date().toLocaleString()}catch(Ge){console.error("[updateAllCharts] Erreur lors de la rcupration des donnes:",Ge),e.error("Erreur lors de la rcupration des donnes historiques")}finally{Ne.value=!1}}catch(de){console.error("[updateAllCharts] Erreur lors de la mise  jour des graphiques:",de),e.error("Erreur lors de la mise  jour des graphiques"),Ne.value=!1}},Ne=bt(!1),ot=(de,re,Ae)=>{try{if(pe[de]&&(pe[de].destroy(),delete pe[de]),!Ae.datasets||!Ae.datasets.length){console.warn(`[updateChart] Pas de datasets pour ${de}`),pe[de]=new Uc(re,{type:"line",data:{labels:[],datasets:[]},options:{plugins:{title:{display:!0,text:"Aucune donne disponible"}}}});return}let Ge="hour";k.value==="5min"||k.value==="30min"?Ge="hour":(k.value==="4hour"||k.value==="1day")&&(Ge="day");const tt=fe(),at=new Date(tt.start),ut=new Date(tt.end);ut.setHours(23,59,59,999);const gt={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1,callbacks:{title:function($t){return $t.length>0?new Date($t[0].parsed.x).toLocaleString():""}}}},scales:{x:{type:"time",time:{unit:Ge,displayFormats:{hour:"HH:mm",day:"dd/MM",week:"dd/MM",month:"MM/yyyy"}},min:at.getTime(),max:ut.getTime(),title:{display:!0,text:"Date/Heure"}},y:{beginAtZero:!0,title:{display:!0,text:le(de)},ticks:{callback:function($t){const Rt=typeof $t=="string"?parseFloat($t):$t;switch(de){case"temp":return Rt.toFixed(1)+"C";case"humidity":return Rt.toFixed(0)+"%";case"pressure":return Rt.toFixed(0)+" hPa";case"wind":case"rain":return Rt.toFixed(1)+(de==="wind"?" km/h":" mm");case"solar":return Rt.toFixed(0)+" W/m";default:return Rt}}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}};pe[de]=new Uc(re,{type:"line",data:{datasets:Ae.datasets||[]},options:gt})}catch(Ge){console.error(`[updateChart] Erreur lors de la mise  jour du graphique ${de}:`,Ge)}},le=de=>{switch(de){case"temp":return"Temprature (C)";case"humidity":return"Humidit (%)";case"pressure":return"Pression (hPa)";case"wind":return"Vitesse (km/h)";case"rain":return"Prcipitations (mm)";case"solar":return"Rayonnement (W/m)";default:return""}},ae=(de,re)=>{var at,ut,gt,$t,Rt,Gt,ln,mn,yn,Ze,it,et,Bt,Zt,Sn,bn,xn,zn,vn;if(!de)return console.warn(`[formatHistoryDataForChart] Pas de donnes pour ${re}`),null;let Ae;if("data"in de)Ae=de.data;else if(re in de)Ae=de;else return console.warn(`[formatHistoryDataForChart] Structure de donnes non reconnue pour ${re}`),null;const Ge=[],tt=(tn,un,Xn,nr)=>{if(!Array.isArray(tn)){console.warn(`[formatHistoryDataForChart] Les donnes pour ${un} ne sont pas un tableau`);return}const ur=tn.map(Rn=>{const Cr=parseFloat(String(Rn.value));return{x:Rn.time,y:nr?nr(Cr):Cr}}).filter(Rn=>!isNaN(Rn.y));ur.length>0&&Ge.push({label:un,data:ur,borderColor:Xn,fill:!1,tension:.4})};switch(re){case"temp":(ut=(at=Ae.outdoor)==null?void 0:at.temperature)!=null&&ut.list?tt(Object.entries(Ae.outdoor.temperature.list).map(([tn,un])=>({time:parseInt(tn)*1e3,value:un})),"Temprature","#FF6384",tn=>(tn-32)*5/9):(gt=Ae.outdoor)!=null&&gt.temperature&&tt(Ae.outdoor.temperature,"Temprature","#FF6384",tn=>(tn-32)*5/9);break;case"humidity":(Rt=($t=Ae.outdoor)==null?void 0:$t.humidity)!=null&&Rt.list?tt(Object.entries(Ae.outdoor.humidity.list).map(([tn,un])=>({time:parseInt(tn)*1e3,value:un})),"Humidit","#36A2EB"):(Gt=Ae.outdoor)!=null&&Gt.humidity&&tt(Ae.outdoor.humidity,"Humidit","#36A2EB");break;case"pressure":(mn=(ln=Ae.pressure)==null?void 0:ln.absolute)!=null&&mn.list?tt(Object.entries(Ae.pressure.absolute.list).map(([tn,un])=>({time:parseInt(tn)*1e3,value:un})),"Pression","#4BC0C0",tn=>tn*33.8639):(yn=Ae.pressure)!=null&&yn.absolute&&tt(Ae.pressure.absolute,"Pression","#4BC0C0",tn=>tn*33.8639);break;case"wind":(it=(Ze=Ae.wind)==null?void 0:Ze.wind_speed)!=null&&it.list?(tt(Object.entries(Ae.wind.wind_speed.list).map(([tn,un])=>({time:parseInt(tn)*1e3,value:un})),"Vitesse du vent","#FFCE56",tn=>tn*1.60934),(et=Ae.wind.wind_gust)!=null&&et.list&&tt(Object.entries(Ae.wind.wind_gust.list).map(([tn,un])=>({time:parseInt(tn)*1e3,value:un})),"Rafales","#FF9F40",tn=>tn*1.60934)):(Bt=Ae.wind)!=null&&Bt.wind_speed&&(tt(Ae.wind.wind_speed,"Vitesse du vent","#FFCE56",tn=>tn*1.60934),Ae.wind.wind_gust&&tt(Ae.wind.wind_gust,"Rafales","#FF9F40",tn=>tn*1.60934));break;case"rain":(Sn=(Zt=Ae.rainfall)==null?void 0:Zt.daily)!=null&&Sn.list?tt(Object.entries(Ae.rainfall.daily.list).map(([tn,un])=>({time:parseInt(tn)*1e3,value:un})),"Prcipitations journalires","#9966FF",tn=>tn*25.4):(bn=Ae.rainfall)!=null&&bn.daily&&tt(Ae.rainfall.daily,"Prcipitations journalires","#9966FF",tn=>tn*25.4);break;case"solar":(zn=(xn=Ae.solar_and_uvi)==null?void 0:xn.solar)!=null&&zn.list?tt(Object.entries(Ae.solar_and_uvi.solar.list).map(([tn,un])=>({time:parseInt(tn)*1e3,value:un})),"Rayonnement solaire","#FF9F40"):(vn=Ae.solar_and_uvi)!=null&&vn.solar&&tt(Ae.solar_and_uvi.solar,"Rayonnement solaire","#FF9F40");break}return{datasets:Ge}};return Ru(()=>{Object.values(pe).forEach(de=>de.destroy())}),li([Y,k,U,H],()=>{Z.value==="history"&&a.value&&$e()}),zs(async()=>{const de=[];m.value&&de.push(F()),await Promise.all(de),await j(),C=window.setInterval(W,5*60*1e3)}),li(c,async de=>{m.value&&await j()}),li(a,de=>{de?(W(),Z.value==="history"&&$e()):r.value={}}),li(Z,de=>{de==="history"&&a.value&&$e()}),Ru(()=>{C&&clearInterval(C)}),(de,re)=>{var Ge,tt,at,ut,gt,$t,Rt,Gt,ln,mn,yn,Ze,it,et,Bt,Zt,Sn,bn,xn,zn,vn,tn,un,Xn,nr,ur,Rn,Cr,Ki,Ci,Us,ss,Gn,Ot,Je,Ut,_n,Xt,Fn;const Ae=c_("router-link");return Me(),De("div",Gre,[E("div",Wre,[re[41]||(re[41]=E("h1",{class:"text-3xl font-bold mb-4"},"Mto",-1)),m.value?(Me(),De("div",qre,[re[6]||(re[6]=E("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Slectionner une entreprise ",-1)),E("div",Yre,[Dn(E("select",{"onUpdate:modelValue":re[0]||(re[0]=Wt=>c.value=Wt),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:!l.value.length,onChange:R},[l.value.length?Ht("",!0):(Me(),De("option",Zre,"Chargement des entreprises...")),(Me(!0),De(gn,null,Vn(l.value,Wt=>(Me(),De("option",{key:Wt.id,value:Wt.id},At(Wt.company_name||`${Wt.first_name} ${Wt.last_name}`),9,Xre))),128))],40,Kre),[[Li,c.value]])])])):Ht("",!0),f.value?(Me(),De("div",Jre,[E("div",Qre,[re[7]||(re[7]=E("div",{class:"flex-shrink-0"},[E("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),E("div",eie,[E("h3",tie,At(f.value),1)])])])):Ht("",!0),f.value&&(f.value.includes("cls API")||f.value.includes("Ecowitt"))?(Me(),De("div",nie,[E("div",rie,[re[9]||(re[9]=E("svg",{class:"h-12 w-12 text-gray-400 mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})],-1)),re[10]||(re[10]=E("h2",{class:"text-xl font-bold text-gray-700 mb-2"},"Configuration requise",-1)),E("p",iie,At(f.value),1),f.value.includes("ajouter dans la gestion")?(Me(),De("div",sie,[Kr(Ae,{to:"/users",class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},{default:Ul(()=>re[8]||(re[8]=[Mr(" Configurer les cls API ")])),_:1})])):Ht("",!0)])])):Ht("",!0),!f.value||!(f.value.includes("cls API")||f.value.includes("Ecowitt"))?(Me(),De("div",oie,[re[19]||(re[19]=E("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Slectionner une station ",-1)),E("div",aie,[Dn(E("select",{"onUpdate:modelValue":re[1]||(re[1]=Wt=>a.value=Wt),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:!!(!o.value.length||f.value)},[!o.value.length&&!f.value?(Me(),De("option",uie,"Chargement des stations...")):Ht("",!0),f.value?(Me(),De("option",cie,"Aucune station disponible")):Ht("",!0),(Me(!0),De(gn,null,Vn(o.value,Wt=>(Me(),De("option",{key:Wt.mac,value:Wt.mac},At(Wt.name)+" ("+At(Wt.model)+" - v"+At(Wt.firmware_version)+") ",9,hie))),128))],8,lie),[[Li,a.value]]),E("button",{onClick:W,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",disabled:!!(!a.value||f.value)}," Actualiser ",8,fie)]),S.value?(Me(),De("div",die,[re[18]||(re[18]=E("h3",{class:"text-lg font-semibold mb-2"},"Informations sur la station",-1)),E("div",pie,[E("div",null,[re[11]||(re[11]=E("span",{class:"text-gray-500"},"Modle:",-1)),E("p",gie,At(S.value.model),1)]),E("div",null,[re[12]||(re[12]=E("span",{class:"text-gray-500"},"Version:",-1)),E("p",mie,At(S.value.firmware_version),1)]),E("div",null,[re[13]||(re[13]=E("span",{class:"text-gray-500"},"ID:",-1)),E("p",vie,At(S.value.id),1)]),E("div",null,[E("span",yie,At((Ge=S.value.mac)!=null&&Ge.includes(":")?"MAC:":"IMEI:"),1),E("p",bie,At(S.value.mac),1)]),E("div",null,[re[14]||(re[14]=E("span",{class:"text-gray-500"},"Fuseau horaire:",-1)),E("p",_ie,At(S.value.timezone),1)]),E("div",null,[re[15]||(re[15]=E("span",{class:"text-gray-500"},"Installation:",-1)),E("p",wie,At(new Date(S.value.created_at).toLocaleDateString()),1)]),E("div",xie,[re[17]||(re[17]=E("span",{class:"text-gray-500 mr-2"},"Position:",-1)),I(S.value)?(Me(),De("a",{key:0,href:T(S.value),target:"_blank",class:"text-primary-600 hover:text-primary-800 flex items-center",title:"Ouvrir dans Google Maps"},[re[16]||(re[16]=E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1)),Mr(" "+At(N(S.value)),1)],8,Lie)):Ht("",!0)])])])):Ht("",!0)])):Ht("",!0),!f.value||!(f.value.includes("cls API")||f.value.includes("Ecowitt"))?(Me(),De("div",Cie,[E("div",Sie,[E("nav",Eie,[(Me(),De(gn,null,Vn(K,Wt=>E("button",{key:Wt.id,onClick:Lt=>Z.value=Wt.id,class:bi([Z.value===Wt.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])},At(Wt.name),11,Pie)),64))])])])):Ht("",!0),(!f.value||!(f.value.includes("cls API")||f.value.includes("Ecowitt")))&&Z.value==="realtime"?(Me(),De("div",kie,[E("div",Mie,[E("p",Aie," Dernire mise  jour : "+At(i.value?new Date(i.value).toLocaleString():"Jamais"),1),v.value?(Me(),De("div",Tie,re[20]||(re[20]=[E("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-primary-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[E("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),E("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),E("span",{class:"text-primary-600"},"Chargement des donnes...",-1)]))):Ht("",!0)]),E("div",Oie,[E("div",Die,[re[21]||(re[21]=E("h2",{class:"text-xl font-semibold mb-4"},"Temprature Extrieure",-1)),E("div",Iie,At(X((at=(tt=r.value.outdoor)==null?void 0:tt.temperature)==null?void 0:at.value))+"C ",1),E("div",Nie," Min: "+At(X(((gt=(ut=r.value.outdoor)==null?void 0:ut.temperature)==null?void 0:gt.min)||"0"))+"C Max: "+At(X(((Rt=($t=r.value.outdoor)==null?void 0:$t.temperature)==null?void 0:Rt.max)||"0"))+"C ",1)]),E("div",Bie,[re[22]||(re[22]=E("h2",{class:"text-xl font-semibold mb-4"},"Humidit",-1)),E("div",Rie,At(((ln=(Gt=r.value.outdoor)==null?void 0:Gt.humidity)==null?void 0:ln.value)||"0")+"% ",1),E("div",Fie,[E("div",jie,[E("div",{class:"bg-primary-600 h-2.5 rounded-full",style:Vl({width:`${((yn=(mn=r.value.outdoor)==null?void 0:mn.humidity)==null?void 0:yn.value)||0}%`})},null,4)])])]),E("div",zie,[re[23]||(re[23]=E("h2",{class:"text-xl font-semibold mb-4"},"Pression Atmosphrique",-1)),E("div",Uie,At(O((it=(Ze=r.value.pressure)==null?void 0:Ze.absolute)==null?void 0:it.value))+" hPa ",1),E("div",$ie," Tendance: "+At(q((Bt=(et=r.value.pressure)==null?void 0:et.absolute)==null?void 0:Bt.trend)),1)]),E("div",Vie,[re[25]||(re[25]=E("h2",{class:"text-xl font-semibold mb-4"},"Vent",-1)),E("div",Hie,At(ce(((Sn=(Zt=r.value.wind)==null?void 0:Zt.speed)==null?void 0:Sn.value)||((xn=(bn=r.value.wind)==null?void 0:bn.wind_speed)==null?void 0:xn.value)))+" km/h ",1),E("div",Gie,[Mr(" Direction: "+At(B(((vn=(zn=r.value.wind)==null?void 0:zn.direction)==null?void 0:vn.value)||((un=(tn=r.value.wind)==null?void 0:tn.wind_direction)==null?void 0:un.value)))+" ",1),re[24]||(re[24]=E("br",null,null,-1)),Mr(" Rafales: "+At(ce(((nr=(Xn=r.value.wind)==null?void 0:Xn.gust)==null?void 0:nr.value)||((Rn=(ur=r.value.wind)==null?void 0:ur.wind_gust)==null?void 0:Rn.value)))+" km/h ",1)])]),E("div",Wie,[re[27]||(re[27]=E("h2",{class:"text-xl font-semibold mb-4"},"Prcipitations",-1)),E("div",qie,At(he((Ki=(Cr=r.value.rainfall)==null?void 0:Cr.daily)==null?void 0:Ki.value))+" mm ",1),E("div",Yie,[Mr(" Taux: "+At(he(((Us=(Ci=r.value.rainfall)==null?void 0:Ci.rate)==null?void 0:Us.value)||((Gn=(ss=r.value.rainfall)==null?void 0:ss.rain_rate)==null?void 0:Gn.value)))+" mm/h ",1),re[26]||(re[26]=E("br",null,null,-1)),Mr(" Mensuel: "+At(he((Je=(Ot=r.value.rainfall)==null?void 0:Ot.monthly)==null?void 0:Je.value))+" mm ",1)])]),E("div",Kie,[re[28]||(re[28]=E("h2",{class:"text-xl font-semibold mb-4"},"Rayonnement",-1)),E("div",Zie,At(((_n=(Ut=r.value.solar_and_uvi)==null?void 0:Ut.solar)==null?void 0:_n.value)||"0")+" W/m ",1),E("div",Xie," UV: "+At(((Fn=(Xt=r.value.solar_and_uvi)==null?void 0:Xt.uvi)==null?void 0:Fn.value)||"0"),1)])])])):(!f.value||!(f.value.includes("cls API")||f.value.includes("Ecowitt")))&&Z.value==="history"?(Me(),De("div",Jie,[E("div",Qie,[E("p",ese," Dernire mise  jour : "+At(s.value?s.value:"Jamais"),1),E("div",tse,[Ne.value?(Me(),De("div",nse,re[29]||(re[29]=[E("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-primary-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[E("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),E("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),E("span",{class:"text-sm text-primary-600"},"Chargement des donnes...",-1)]))):Ht("",!0),E("button",{onClick:$e,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",disabled:!a.value||Ne.value}," Actualiser ",8,rse)])]),E("div",ise,[E("div",null,[re[31]||(re[31]=E("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Priode ",-1)),Dn(E("select",{"onUpdate:modelValue":re[2]||(re[2]=Wt=>Y.value=Wt),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},re[30]||(re[30]=[dl('<option value="today" data-v-b026e497>Aujourd&#39;hui</option><option value="yesterday" data-v-b026e497>Hier</option><option value="week" data-v-b026e497>7 derniers jours</option><option value="month" data-v-b026e497>30 derniers jours</option><option value="custom" data-v-b026e497>Priode personnalise</option>',5)]),512),[[Li,Y.value]])]),Y.value==="custom"?(Me(),De("div",sse,[E("div",null,[re[32]||(re[32]=E("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de dbut ",-1)),Dn(E("input",{type:"date","onUpdate:modelValue":re[3]||(re[3]=Wt=>U.value=Wt),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},null,512),[[ai,U.value]])]),E("div",null,[re[33]||(re[33]=E("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de fin ",-1)),Dn(E("input",{type:"date","onUpdate:modelValue":re[4]||(re[4]=Wt=>H.value=Wt),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},null,512),[[ai,H.value]])])])):Ht("",!0),E("div",null,[re[34]||(re[34]=E("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Intervalle ",-1)),Dn(E("select",{"onUpdate:modelValue":re[5]||(re[5]=Wt=>k.value=Wt),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},[(Me(!0),De(gn,null,Vn(Ie.value,Wt=>(Me(),De("option",{key:Wt.value,value:Wt.value},At(Wt.label),9,ose))),128))],512),[[Li,k.value]]),p.value?(Me(),De("div",ase,At(p.value),1)):Ht("",!0)])]),E("div",lse,[E("div",use,[re[35]||(re[35]=E("h3",{class:"text-lg font-semibold mb-4"},"Temprature",-1)),E("div",cse,[E("canvas",{ref_key:"tempChart",ref:ee},null,512)])]),E("div",hse,[re[36]||(re[36]=E("h3",{class:"text-lg font-semibold mb-4"},"Humidit",-1)),E("div",fse,[E("canvas",{ref_key:"humidityChart",ref:te},null,512)])]),E("div",dse,[re[37]||(re[37]=E("h3",{class:"text-lg font-semibold mb-4"},"Pression",-1)),E("div",pse,[E("canvas",{ref_key:"pressureChart",ref:oe},null,512)])]),E("div",gse,[re[38]||(re[38]=E("h3",{class:"text-lg font-semibold mb-4"},"Vent",-1)),E("div",mse,[E("canvas",{ref_key:"windChart",ref:ge},null,512)])]),E("div",vse,[re[39]||(re[39]=E("h3",{class:"text-lg font-semibold mb-4"},"Prcipitations",-1)),E("div",yse,[E("canvas",{ref_key:"rainChart",ref:ve},null,512)])]),E("div",bse,[re[40]||(re[40]=E("h3",{class:"text-lg font-semibold mb-4"},"Rayonnement",-1)),E("div",_se,[E("canvas",{ref_key:"solarChart",ref:ye},null,512)])])])])):Ht("",!0)])])}}}),xse=Qc(wse,[["__scopeId","data-v-b026e497"]]),Lse={class:"settings-page max-w-xl mx-auto py-10 px-4 min-h-full"},Cse={key:0,class:"mb-6"},Sse={key:1,class:"bg-red-50 border-l-4 border-red-500 p-4 mb-6"},Ese={class:"flex"},Pse={class:"ml-3"},kse={class:"text-sm text-red-700"},Mse={class:"bg-white shadow rounded-lg p-6"},Ase=["disabled"],Tse=["disabled"],Ose={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Dse={key:0,class:"text-green-600 mt-2"},Ise=hs({__name:"ParametresView",setup(t){const e=bt(""),n=bt(""),r=bt(!1),i=bt("");zs(async()=>{await s()});async function s(){r.value=!0,i.value="";try{const a=await Z2.getGoogleMapsApiKey();a.data&&a.data.key_status==="configured"?e.value="":e.value=""}catch(a){console.error("Erreur lors de la rcupration de la cl API:",a),i.value="Impossible de rcuprer la cl API. Veuillez ressayer plus tard."}finally{r.value=!1}}async function o(){if(!e.value){i.value="La cl API est requise.";return}r.value=!0,i.value="",n.value="";try{await Z2.setGoogleMapsApiKey(e.value),n.value="Cl API sauvegarde avec succs.",setTimeout(()=>{n.value=""},3e3)}catch(a){console.error("Erreur lors de la sauvegarde de la cl API:",a),i.value="Impossible de sauvegarder la cl API. Veuillez ressayer plus tard."}finally{r.value=!1}}return(a,l)=>(Me(),De("div",Lse,[l[6]||(l[6]=E("h1",{class:"text-2xl font-bold mb-6"},"Paramtres de l'application",-1)),r.value?(Me(),De("div",Cse,l[1]||(l[1]=[dl('<div class="animate-pulse flex space-x-4" data-v-097ea248><div class="flex-1 space-y-4 py-1" data-v-097ea248><div class="h-4 bg-gray-200 rounded w-3/4" data-v-097ea248></div><div class="space-y-2" data-v-097ea248><div class="h-4 bg-gray-200 rounded" data-v-097ea248></div><div class="h-4 bg-gray-200 rounded w-5/6" data-v-097ea248></div></div></div></div>',1)]))):Ht("",!0),i.value?(Me(),De("div",Sse,[E("div",Ese,[l[2]||(l[2]=E("div",{class:"flex-shrink-0"},[E("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),E("div",Pse,[E("p",kse,At(i.value),1)])])])):Ht("",!0),E("div",Mse,[E("form",{onSubmit:pl(o,["prevent"]),class:"space-y-4"},[E("div",null,[l[3]||(l[3]=E("label",{for:"google-maps-api-key",class:"block text-sm font-medium text-gray-700"},"Cl API Google Maps",-1)),Dn(E("input",{id:"google-maps-api-key","onUpdate:modelValue":l[0]||(l[0]=c=>e.value=c),type:"password",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre cl API Google Maps",autocomplete:"off",disabled:r.value},null,8,Ase),[[ai,e.value]])]),E("button",{type:"submit",class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",disabled:r.value},[r.value?(Me(),De("svg",Ose,l[4]||(l[4]=[E("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),E("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Ht("",!0),l[5]||(l[5]=Mr(" Sauvegarder "))],8,Tse),n.value?(Me(),De("p",Dse,At(n.value),1)):Ht("",!0)],32)])]))}}),Nse=Qc(Ise,[["__scopeId","data-v-097ea248"]]),vk=EB({history:rB("/"),routes:[{path:"/",name:"home",component:C5,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"],isMapRoute:!0}},{path:"/meteo",name:"meteo",component:xse,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/plans",name:"plans",component:MY,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/users",name:"users",component:eq,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie"]}},{path:"/profile",name:"profile",component:()=>Sh(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/login",name:"login",component:T9,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>Sh(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>Sh(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:QF,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/notes",name:"notes",component:nZ,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/map",name:"map",component:C5,meta:{requiresAuth:!0,isMapRoute:!0}},{path:"/parametres",name:"parametres",component:Nse,meta:{requiresAuth:!0,allowedRoles:["admin"]}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>Sh(()=>import("./NotFoundView.js"),[])}]});vk.beforeEach(async(t,e,n)=>{var a,l;const r=eo();if(!r.initialized)try{await r.initialize(window.INITIAL_STATE)}catch(c){console.error("Error initializing auth store:",c)}const i=r.isAuthenticated,s=(a=r.user)==null?void 0:a.must_change_password,o=(l=r.user)==null?void 0:l.user_type;if(t.meta.requiresAuth&&!i){n("/login");return}if(i&&s&&t.name!=="changePassword"){n({name:"changePassword"});return}if(t.name==="changePassword"&&!s){n({name:"home"});return}if(t.meta.allowedRoles&&o&&!t.meta.allowedRoles.includes(o)){n({name:"home"});return}if(t.meta.requiresGuest&&i){n({name:"home"});return}n()});function Bse(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t;let a,l;const c=async(p=!0)=>{await l};async function f(){if("serviceWorker"in navigator){if(a=await Sh(async()=>{const{Workbox:p}=await import("./workbox-window.prod.es5.js");return{Workbox:p}},[]).then(({Workbox:p})=>new p("/static/frontend/sw.js",{scope:"/static/frontend/",type:"classic"})).catch(p=>{o==null||o(p)}),!a)return;a.addEventListener("activated",p=>{(p.isUpdate||p.isExternal)&&window.location.reload()}),a.addEventListener("installed",p=>{p.isUpdate||r==null||r()}),a.register({immediate:e}).then(p=>{s?s("/static/frontend/sw.js",p):i==null||i(p)}).catch(p=>{o==null||o(p)})}}return l=f(),c}const sw=Mv(TF),yk=FI();sw.use(yk);sw.use(vk);const Rse=eo(yk);window.INITIAL_STATE&&Rse.initialize(window.INITIAL_STATE);sw.mount("#app");Bse({immediate:!0,onRegistered(t){},onRegisterError(t){console.error("Erreur d'enregistrement du SW:",t)},onOfflineReady(){}});export{Ri as _,mu as a,E as b,De as c,hs as d,Ht as e,dn as f,Mr as g,Dn as h,Me as i,dl as j,Kr as k,Ul as l,c_ as m,bi as n,zs as o,kB as p,S0 as q,bt as r,Jo as s,At as t,eo as u,ai as v,pl as w,S_ as x};

var RC=Object.defineProperty;var FC=(e,t,n)=>t in e?RC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var $t=(e,t,n)=>FC(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Eg(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const ci={},$f=[],cu=()=>{},jC=()=>!1,Sp=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),T1=e=>e.startsWith("onUpdate:"),Xi=Object.assign,B1=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},zC=Object.prototype.hasOwnProperty,Ci=(e,t)=>zC.call(e,t),qn=Array.isArray,Vf=e=>ld(e)==="[object Map]",rf=e=>ld(e)==="[object Set]",T2=e=>ld(e)==="[object Date]",UC=e=>ld(e)==="[object RegExp]",vr=e=>typeof e=="function",io=e=>typeof e=="string",zu=e=>typeof e=="symbol",Ii=e=>e!==null&&typeof e=="object",O1=e=>(Ii(e)||vr(e))&&vr(e.then)&&vr(e.catch),t4=Object.prototype.toString,ld=e=>t4.call(e),$C=e=>ld(e).slice(8,-1),Cg=e=>ld(e)==="[object Object]",N1=e=>io(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Hf=Eg(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Pg=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},VC=/-(\w)/g,ca=Pg(e=>e.replace(VC,(t,n)=>n?n.toUpperCase():"")),HC=/\B([A-Z])/g,_l=Pg(e=>e.replace(HC,"-$1").toLowerCase()),Ep=Pg(e=>e.charAt(0).toUpperCase()+e.slice(1)),Gd=Pg(e=>e?`on${Ep(e)}`:""),Xa=(e,t)=>!Object.is(e,t),Gf=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},n4=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},W0=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Z0=e=>{const t=io(e)?Number(e):NaN;return isNaN(t)?e:t};let B2;const Ag=()=>B2||(B2=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),GC="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",qC=Eg(GC);function Ya(e){if(qn(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=io(r)?YC(r):Ya(r);if(i)for(const s in i)t[s]=i[s]}return t}else if(io(e)||Ii(e))return e}const WC=/;(?![^(]*\))/g,ZC=/:([^]+)/,KC=/\/\*[^]*?\*\//g;function YC(e){const t={};return e.replace(KC,"").split(WC).forEach(n=>{if(n){const r=n.split(ZC);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Yi(e){let t="";if(io(e))t=e;else if(qn(e))for(let n=0;n<e.length;n++){const r=Yi(e[n]);r&&(t+=r+" ")}else if(Ii(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function XC(e){if(!e)return null;let{class:t,style:n}=e;return t&&!io(t)&&(e.class=Yi(t)),n&&(e.style=Ya(n)),e}const JC="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",QC=Eg(JC);function r4(e){return!!e||e===""}function eP(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=ph(e[r],t[r]);return n}function ph(e,t){if(e===t)return!0;let n=T2(e),r=T2(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=zu(e),r=zu(t),n||r)return e===t;if(n=qn(e),r=qn(t),n||r)return n&&r?eP(e,t):!1;if(n=Ii(e),r=Ii(t),n||r){if(!n||!r)return!1;const i=Object.keys(e).length,s=Object.keys(t).length;if(i!==s)return!1;for(const o in e){const u=e.hasOwnProperty(o),h=t.hasOwnProperty(o);if(u&&!h||!u&&h||!ph(e[o],t[o]))return!1}}return String(e)===String(t)}function Mg(e,t){return e.findIndex(n=>ph(n,t))}const i4=e=>!!(e&&e.__v_isRef===!0),Zt=e=>io(e)?e:e==null?"":qn(e)||Ii(e)&&(e.toString===t4||!vr(e.toString))?i4(e)?Zt(e.value):JSON.stringify(e,o4,2):String(e),o4=(e,t)=>i4(t)?o4(e,t.value):Vf(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i],s)=>(n[Nm(r,s)+" =>"]=i,n),{})}:rf(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Nm(n))}:zu(t)?Nm(t):Ii(t)&&!qn(t)&&!Cg(t)?String(t):t,Nm=(e,t="")=>{var n;return zu(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ka;class D1{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ka,!t&&Ka&&(this.index=(Ka.scopes||(Ka.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Ka;try{return Ka=this,t()}finally{Ka=n}}}on(){Ka=this}off(){Ka=this.parent}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function I1(e){return new D1(e)}function R1(){return Ka}function s4(e,t=!1){Ka&&Ka.cleanups.push(e)}let ro;const Dm=new WeakSet;class up{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ka&&Ka.active&&Ka.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Dm.has(this)&&(Dm.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||l4(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,O2(this),u4(this);const t=ro,n=ju;ro=this,ju=!0;try{return this.fn()}finally{c4(this),ro=t,ju=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)z1(t);this.deps=this.depsTail=void 0,O2(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Dm.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Sv(this)&&this.run()}get dirty(){return Sv(this)}}let a4=0,qd,Wd;function l4(e,t=!1){if(e.flags|=8,t){e.next=Wd,Wd=e;return}e.next=qd,qd=e}function F1(){a4++}function j1(){if(--a4>0)return;if(Wd){let t=Wd;for(Wd=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;qd;){let t=qd;for(qd=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function u4(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function c4(e){let t,n=e.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),z1(r),tP(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}e.deps=t,e.depsTail=n}function Sv(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(h4(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function h4(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===cp))return;e.globalVersion=cp;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!Sv(e)){e.flags&=-3;return}const n=ro,r=ju;ro=e,ju=!0;try{u4(e);const i=e.fn(e._value);(t.version===0||Xa(i,e._value))&&(e._value=i,t.version++)}catch(i){throw t.version++,i}finally{ro=n,ju=r,c4(e),e.flags&=-3}}function z1(e,t=!1){const{dep:n,prevSub:r,nextSub:i}=e;if(r&&(r.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)z1(s,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function tP(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}function nP(e,t){e.effect instanceof up&&(e=e.effect.fn);const n=new up(e);t&&Xi(n,t);try{n.run()}catch(i){throw n.stop(),i}const r=n.run.bind(n);return r.effect=n,r}function rP(e){e.effect.stop()}let ju=!0;const f4=[];function _h(){f4.push(ju),ju=!1}function bh(){const e=f4.pop();ju=e===void 0?!0:e}function O2(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=ro;ro=void 0;try{t()}finally{ro=n}}}let cp=0;class iP{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class kg{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!ro||!ju||ro===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==ro)n=this.activeLink=new iP(ro,this),ro.deps?(n.prevDep=ro.depsTail,ro.depsTail.nextDep=n,ro.depsTail=n):ro.deps=ro.depsTail=n,d4(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=ro.depsTail,n.nextDep=void 0,ro.depsTail.nextDep=n,ro.depsTail=n,ro.deps===n&&(ro.deps=r)}return n}trigger(t){this.version++,cp++,this.notify(t)}notify(t){F1();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{j1()}}}function d4(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)d4(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const K0=new WeakMap,Gh=Symbol(""),Ev=Symbol(""),hp=Symbol("");function Ma(e,t,n){if(ju&&ro){let r=K0.get(e);r||K0.set(e,r=new Map);let i=r.get(n);i||(r.set(n,i=new kg),i.map=r,i.key=n),i.track()}}function Oc(e,t,n,r,i,s){const o=K0.get(e);if(!o){cp++;return}const u=h=>{h&&h.trigger()};if(F1(),t==="clear")o.forEach(u);else{const h=qn(e),d=h&&N1(n);if(h&&n==="length"){const v=Number(r);o.forEach((y,x)=>{(x==="length"||x===hp||!zu(x)&&x>=v)&&u(y)})}else switch((n!==void 0||o.has(void 0))&&u(o.get(n)),d&&u(o.get(hp)),t){case"add":h?d&&u(o.get("length")):(u(o.get(Gh)),Vf(e)&&u(o.get(Ev)));break;case"delete":h||(u(o.get(Gh)),Vf(e)&&u(o.get(Ev)));break;case"set":Vf(e)&&u(o.get(Gh));break}}j1()}function oP(e,t){const n=K0.get(e);return n&&n.get(t)}function Lf(e){const t=ui(e);return t===e?t:(Ma(t,"iterate",hp),Vl(e)?t:t.map(ka))}function Tg(e){return Ma(e=ui(e),"iterate",hp),e}const sP={__proto__:null,[Symbol.iterator](){return Im(this,Symbol.iterator,ka)},concat(...e){return Lf(this).concat(...e.map(t=>qn(t)?Lf(t):t))},entries(){return Im(this,"entries",e=>(e[1]=ka(e[1]),e))},every(e,t){return Ac(this,"every",e,t,void 0,arguments)},filter(e,t){return Ac(this,"filter",e,t,n=>n.map(ka),arguments)},find(e,t){return Ac(this,"find",e,t,ka,arguments)},findIndex(e,t){return Ac(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ac(this,"findLast",e,t,ka,arguments)},findLastIndex(e,t){return Ac(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ac(this,"forEach",e,t,void 0,arguments)},includes(...e){return Rm(this,"includes",e)},indexOf(...e){return Rm(this,"indexOf",e)},join(e){return Lf(this).join(e)},lastIndexOf(...e){return Rm(this,"lastIndexOf",e)},map(e,t){return Ac(this,"map",e,t,void 0,arguments)},pop(){return xd(this,"pop")},push(...e){return xd(this,"push",e)},reduce(e,...t){return N2(this,"reduce",e,t)},reduceRight(e,...t){return N2(this,"reduceRight",e,t)},shift(){return xd(this,"shift")},some(e,t){return Ac(this,"some",e,t,void 0,arguments)},splice(...e){return xd(this,"splice",e)},toReversed(){return Lf(this).toReversed()},toSorted(e){return Lf(this).toSorted(e)},toSpliced(...e){return Lf(this).toSpliced(...e)},unshift(...e){return xd(this,"unshift",e)},values(){return Im(this,"values",ka)}};function Im(e,t,n){const r=Tg(e),i=r[t]();return r!==e&&!Vl(e)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=n(s.value)),s}),i}const aP=Array.prototype;function Ac(e,t,n,r,i,s){const o=Tg(e),u=o!==e&&!Vl(e),h=o[t];if(h!==aP[t]){const y=h.apply(e,s);return u?ka(y):y}let d=n;o!==e&&(u?d=function(y,x){return n.call(this,ka(y),x,e)}:n.length>2&&(d=function(y,x){return n.call(this,y,x,e)}));const v=h.call(o,d,r);return u&&i?i(v):v}function N2(e,t,n,r){const i=Tg(e);let s=n;return i!==e&&(Vl(e)?n.length>3&&(s=function(o,u,h){return n.call(this,o,u,h,e)}):s=function(o,u,h){return n.call(this,o,ka(u),h,e)}),i[t](s,...r)}function Rm(e,t,n){const r=ui(e);Ma(r,"iterate",hp);const i=r[t](...n);return(i===-1||i===!1)&&Ng(n[0])?(n[0]=ui(n[0]),r[t](...n)):i}function xd(e,t,n=[]){_h(),F1();const r=ui(e)[t].apply(e,n);return j1(),bh(),r}const lP=Eg("__proto__,__v_isRef,__isVue"),p4=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(zu));function uP(e){zu(e)||(e=String(e));const t=ui(this);return Ma(t,"has",e),t.hasOwnProperty(e)}class g4{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?w4:b4:s?_4:y4).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=qn(t);if(!i){let h;if(o&&(h=sP[n]))return h;if(n==="hasOwnProperty")return uP}const u=Reflect.get(t,n,Fo(t)?t:r);return(zu(n)?p4.has(n):lP(n))||(i||Ma(t,"get",n),s)?u:Fo(u)?o&&N1(n)?u:u.value:Ii(u)?i?Nu(u):gu(u):u}}class m4 extends g4{constructor(t=!1){super(!1,t)}set(t,n,r,i){let s=t[n];if(!this._isShallow){const h=gh(s);if(!Vl(r)&&!gh(r)&&(s=ui(s),r=ui(r)),!qn(t)&&Fo(s)&&!Fo(r))return h?!1:(s.value=r,!0)}const o=qn(t)&&N1(n)?Number(n)<t.length:Ci(t,n),u=Reflect.set(t,n,r,Fo(t)?t:i);return t===ui(i)&&(o?Xa(r,s)&&Oc(t,"set",n,r):Oc(t,"add",n,r)),u}deleteProperty(t,n){const r=Ci(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&r&&Oc(t,"delete",n,void 0),i}has(t,n){const r=Reflect.has(t,n);return(!zu(n)||!p4.has(n))&&Ma(t,"has",n),r}ownKeys(t){return Ma(t,"iterate",qn(t)?"length":Gh),Reflect.ownKeys(t)}}class v4 extends g4{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const cP=new m4,hP=new v4,fP=new m4(!0),dP=new v4(!0),Cv=e=>e,n0=e=>Reflect.getPrototypeOf(e);function pP(e,t,n){return function(...r){const i=this.__v_raw,s=ui(i),o=Vf(s),u=e==="entries"||e===Symbol.iterator&&o,h=e==="keys"&&o,d=i[e](...r),v=n?Cv:t?Pv:ka;return!t&&Ma(s,"iterate",h?Ev:Gh),{next(){const{value:y,done:x}=d.next();return x?{value:y,done:x}:{value:u?[v(y[0]),v(y[1])]:v(y),done:x}},[Symbol.iterator](){return this}}}}function r0(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function gP(e,t){const n={get(i){const s=this.__v_raw,o=ui(s),u=ui(i);e||(Xa(i,u)&&Ma(o,"get",i),Ma(o,"get",u));const{has:h}=n0(o),d=t?Cv:e?Pv:ka;if(h.call(o,i))return d(s.get(i));if(h.call(o,u))return d(s.get(u));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!e&&Ma(ui(i),"iterate",Gh),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=ui(s),u=ui(i);return e||(Xa(i,u)&&Ma(o,"has",i),Ma(o,"has",u)),i===u?s.has(i):s.has(i)||s.has(u)},forEach(i,s){const o=this,u=o.__v_raw,h=ui(u),d=t?Cv:e?Pv:ka;return!e&&Ma(h,"iterate",Gh),u.forEach((v,y)=>i.call(s,d(v),d(y),o))}};return Xi(n,e?{add:r0("add"),set:r0("set"),delete:r0("delete"),clear:r0("clear")}:{add(i){!t&&!Vl(i)&&!gh(i)&&(i=ui(i));const s=ui(this);return n0(s).has.call(s,i)||(s.add(i),Oc(s,"add",i,i)),this},set(i,s){!t&&!Vl(s)&&!gh(s)&&(s=ui(s));const o=ui(this),{has:u,get:h}=n0(o);let d=u.call(o,i);d||(i=ui(i),d=u.call(o,i));const v=h.call(o,i);return o.set(i,s),d?Xa(s,v)&&Oc(o,"set",i,s):Oc(o,"add",i,s),this},delete(i){const s=ui(this),{has:o,get:u}=n0(s);let h=o.call(s,i);h||(i=ui(i),h=o.call(s,i)),u&&u.call(s,i);const d=s.delete(i);return h&&Oc(s,"delete",i,void 0),d},clear(){const i=ui(this),s=i.size!==0,o=i.clear();return s&&Oc(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=pP(i,e,t)}),n}function Bg(e,t){const n=gP(e,t);return(r,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(Ci(n,i)&&i in r?n:r,i,s)}const mP={get:Bg(!1,!1)},vP={get:Bg(!1,!0)},yP={get:Bg(!0,!1)},_P={get:Bg(!0,!0)},y4=new WeakMap,_4=new WeakMap,b4=new WeakMap,w4=new WeakMap;function bP(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function wP(e){return e.__v_skip||!Object.isExtensible(e)?0:bP($C(e))}function gu(e){return gh(e)?e:Og(e,!1,cP,mP,y4)}function U1(e){return Og(e,!1,fP,vP,_4)}function Nu(e){return Og(e,!0,hP,yP,b4)}function xP(e){return Og(e,!0,dP,_P,w4)}function Og(e,t,n,r,i){if(!Ii(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=i.get(e);if(s)return s;const o=wP(e);if(o===0)return e;const u=new Proxy(e,o===2?r:n);return i.set(e,u),u}function cc(e){return gh(e)?cc(e.__v_raw):!!(e&&e.__v_isReactive)}function gh(e){return!!(e&&e.__v_isReadonly)}function Vl(e){return!!(e&&e.__v_isShallow)}function Ng(e){return e?!!e.__v_raw:!1}function ui(e){const t=e&&e.__v_raw;return t?ui(t):e}function Dg(e){return!Ci(e,"__v_skip")&&Object.isExtensible(e)&&n4(e,"__v_skip",!0),e}const ka=e=>Ii(e)?gu(e):e,Pv=e=>Ii(e)?Nu(e):e;function Fo(e){return e?e.__v_isRef===!0:!1}function Gt(e){return x4(e,!1)}function $1(e){return x4(e,!0)}function x4(e,t){return Fo(e)?e:new LP(e,t)}class LP{constructor(t,n){this.dep=new kg,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:ui(t),this._value=n?t:ka(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||Vl(t)||gh(t);t=r?t:ui(t),Xa(t,n)&&(this._rawValue=t,this._value=r?t:ka(t),this.dep.trigger())}}function SP(e){e.dep&&e.dep.trigger()}function zn(e){return Fo(e)?e.value:e}function EP(e){return vr(e)?e():zn(e)}const CP={get:(e,t,n)=>t==="__v_raw"?e:zn(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return Fo(i)&&!Fo(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function V1(e){return cc(e)?e:new Proxy(e,CP)}class PP{constructor(t){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new kg,{get:r,set:i}=t(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(t){this._set(t)}}function L4(e){return new PP(e)}function S4(e){const t=qn(e)?new Array(e.length):{};for(const n in e)t[n]=E4(e,n);return t}class AP{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return oP(ui(this._object),this._key)}}class MP{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function kP(e,t,n){return Fo(e)?e:vr(e)?new MP(e):Ii(e)&&arguments.length>1?E4(e,t,n):Gt(e)}function E4(e,t,n){const r=e[t];return Fo(r)?r:new AP(e,t,n)}class TP{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new kg(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=cp-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&ro!==this)return l4(this,!0),!0}get value(){const t=this.dep.track();return h4(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function BP(e,t,n=!1){let r,i;return vr(e)?r=e:(r=e.get,i=e.set),new TP(r,i,n)}const OP={GET:"get",HAS:"has",ITERATE:"iterate"},NP={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},i0={},Y0=new WeakMap;let nh;function DP(){return nh}function C4(e,t=!1,n=nh){if(n){let r=Y0.get(n);r||Y0.set(n,r=[]),r.push(e)}}function IP(e,t,n=ci){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:u,call:h}=n,d=J=>i?J:Vl(J)||i===!1||i===0?Nc(J,1):Nc(J);let v,y,x,_,P=!1,T=!1;if(Fo(e)?(y=()=>e.value,P=Vl(e)):cc(e)?(y=()=>d(e),P=!0):qn(e)?(T=!0,P=e.some(J=>cc(J)||Vl(J)),y=()=>e.map(J=>{if(Fo(J))return J.value;if(cc(J))return d(J);if(vr(J))return h?h(J,2):J()})):vr(e)?t?y=h?()=>h(e,2):e:y=()=>{if(x){_h();try{x()}finally{bh()}}const J=nh;nh=v;try{return h?h(e,3,[_]):e(_)}finally{nh=J}}:y=cu,t&&i){const J=y,le=i===!0?1/0:i;y=()=>Nc(J(),le)}const U=R1(),N=()=>{v.stop(),U&&U.active&&B1(U.effects,v)};if(s&&t){const J=t;t=(...le)=>{J(...le),N()}}let j=T?new Array(e.length).fill(i0):i0;const Z=J=>{if(!(!(v.flags&1)||!v.dirty&&!J))if(t){const le=v.run();if(i||P||(T?le.some((he,Le)=>Xa(he,j[Le])):Xa(le,j))){x&&x();const he=nh;nh=v;try{const Le=[le,j===i0?void 0:T&&j[0]===i0?[]:j,_];h?h(t,3,Le):t(...Le),j=le}finally{nh=he}}}else v.run()};return u&&u(Z),v=new up(y),v.scheduler=o?()=>o(Z,!1):Z,_=J=>C4(J,!1,v),x=v.onStop=()=>{const J=Y0.get(v);if(J){if(h)h(J,4);else for(const le of J)le();Y0.delete(v)}},t?r?Z(!0):j=v.run():o?o(Z.bind(null,!0),!0):v.run(),N.pause=v.pause.bind(v),N.resume=v.resume.bind(v),N.stop=N,N}function Nc(e,t=1/0,n){if(t<=0||!Ii(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Fo(e))Nc(e.value,t,n);else if(qn(e))for(let r=0;r<e.length;r++)Nc(e[r],t,n);else if(rf(e)||Vf(e))e.forEach(r=>{Nc(r,t,n)});else if(Cg(e)){for(const r in e)Nc(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Nc(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const P4=[];function RP(e){P4.push(e)}function FP(){P4.pop()}function jP(e,t){}const zP={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},UP={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function ud(e,t,n,r){try{return r?e(...r):e()}catch(i){of(i,t,n)}}function du(e,t,n,r){if(vr(e)){const i=ud(e,t,n,r);return i&&O1(i)&&i.catch(s=>{of(s,t,n)}),i}if(qn(e)){const i=[];for(let s=0;s<e.length;s++)i.push(du(e[s],t,n,r));return i}}function of(e,t,n,r=!0){const i=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||ci;if(t){let u=t.parent;const h=t.proxy,d=`https://vuejs.org/error-reference/#runtime-${n}`;for(;u;){const v=u.ec;if(v){for(let y=0;y<v.length;y++)if(v[y](e,h,d)===!1)return}u=u.parent}if(s){_h(),ud(s,null,10,[e,h,d]),bh();return}}$P(e,n,i,r,o)}function $P(e,t,n,r=!0,i=!1){if(i)throw e;console.error(e)}const Ja=[];let oc=-1;const qf=[];let rh=null,Bf=0;const A4=Promise.resolve();let X0=null;function qs(e){const t=X0||A4;return e?t.then(this?e.bind(this):e):t}function VP(e){let t=oc+1,n=Ja.length;for(;t<n;){const r=t+n>>>1,i=Ja[r],s=dp(i);s<e||s===e&&i.flags&2?t=r+1:n=r}return t}function H1(e){if(!(e.flags&1)){const t=dp(e),n=Ja[Ja.length-1];!n||!(e.flags&2)&&t>=dp(n)?Ja.push(e):Ja.splice(VP(t),0,e),e.flags|=1,M4()}}function M4(){X0||(X0=A4.then(k4))}function fp(e){qn(e)?qf.push(...e):rh&&e.id===-1?rh.splice(Bf+1,0,e):e.flags&1||(qf.push(e),e.flags|=1),M4()}function D2(e,t,n=oc+1){for(;n<Ja.length;n++){const r=Ja[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;Ja.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function J0(e){if(qf.length){const t=[...new Set(qf)].sort((n,r)=>dp(n)-dp(r));if(qf.length=0,rh){rh.push(...t);return}for(rh=t,Bf=0;Bf<rh.length;Bf++){const n=rh[Bf];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}rh=null,Bf=0}}const dp=e=>e.id==null?e.flags&2?-1:1/0:e.id;function k4(e){try{for(oc=0;oc<Ja.length;oc++){const t=Ja[oc];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ud(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;oc<Ja.length;oc++){const t=Ja[oc];t&&(t.flags&=-2)}oc=-1,Ja.length=0,J0(),X0=null,(Ja.length||qf.length)&&k4()}}let Of,o0=[];function T4(e,t){var n,r;Of=e,Of?(Of.enabled=!0,o0.forEach(({event:i,args:s})=>Of.emit(i,...s)),o0=[]):typeof window<"u"&&window.HTMLElement&&!((r=(n=window.navigator)==null?void 0:n.userAgent)!=null&&r.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{T4(s,t)}),setTimeout(()=>{Of||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,o0=[])},3e3)):o0=[]}let Os=null,Ig=null;function pp(e){const t=Os;return Os=e,Ig=e&&e.type.__scopeId||null,t}function HP(e){Ig=e}function GP(){Ig=null}const qP=e=>Ul;function Ul(e,t=Os,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&Dv(-1);const s=pp(t);let o;try{o=e(...i)}finally{pp(s),r._d&&Dv(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Zn(e,t){if(Os===null)return e;const n=Ap(Os),r=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[s,o,u,h=ci]=t[i];s&&(vr(s)&&(s={mounted:s,updated:s}),s.deep&&Nc(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:u,modifiers:h}))}return e}function sc(e,t,n,r){const i=e.dirs,s=t&&t.dirs;for(let o=0;o<i.length;o++){const u=i[o];s&&(u.oldValue=s[o].value);let h=u.dir[r];h&&(_h(),du(h,n,8,[e.el,u,e,t]),bh())}}const B4=Symbol("_vte"),O4=e=>e.__isTeleport,Zd=e=>e&&(e.disabled||e.disabled===""),I2=e=>e&&(e.defer||e.defer===""),R2=e=>typeof SVGElement<"u"&&e instanceof SVGElement,F2=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Av=(e,t)=>{const n=e&&e.to;return io(n)?t?t(n):null:n},N4={name:"Teleport",__isTeleport:!0,process(e,t,n,r,i,s,o,u,h,d){const{mc:v,pc:y,pbc:x,o:{insert:_,querySelector:P,createText:T,createComment:U}}=d,N=Zd(t.props);let{shapeFlag:j,children:Z,dynamicChildren:J}=t;if(e==null){const le=t.el=T(""),he=t.anchor=T("");_(le,n,r),_(he,n,r);const Le=(F,Y)=>{j&16&&(i&&i.isCE&&(i.ce._teleportTarget=F),v(Z,F,Y,i,s,o,u,h))},V=()=>{const F=t.target=Av(t.props,P),Y=D4(F,t,T,_);F&&(o!=="svg"&&R2(F)?o="svg":o!=="mathml"&&F2(F)&&(o="mathml"),N||(Le(F,Y),P0(t,!1)))};N&&(Le(n,he),P0(t,!0)),I2(t.props)?Ts(()=>{V(),t.el.__isMounted=!0},s):V()}else{if(I2(t.props)&&!e.el.__isMounted){Ts(()=>{N4.process(e,t,n,r,i,s,o,u,h,d),delete e.el.__isMounted},s);return}t.el=e.el,t.targetStart=e.targetStart;const le=t.anchor=e.anchor,he=t.target=e.target,Le=t.targetAnchor=e.targetAnchor,V=Zd(e.props),F=V?n:he,Y=V?le:Le;if(o==="svg"||R2(he)?o="svg":(o==="mathml"||F2(he))&&(o="mathml"),J?(x(e.dynamicChildren,J,F,i,s,o,u),ey(e,t,!0)):h||y(e,t,F,Y,i,s,o,u,!1),N)V?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):s0(t,n,le,d,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const $=t.target=Av(t.props,P);$&&s0(t,$,null,d,0)}else V&&s0(t,he,Le,d,1);P0(t,N)}},remove(e,t,n,{um:r,o:{remove:i}},s){const{shapeFlag:o,children:u,anchor:h,targetStart:d,targetAnchor:v,target:y,props:x}=e;if(y&&(i(d),i(v)),s&&i(h),o&16){const _=s||!Zd(x);for(let P=0;P<u.length;P++){const T=u[P];r(T,t,n,_,!!T.dynamicChildren)}}},move:s0,hydrate:WP};function s0(e,t,n,{o:{insert:r},m:i},s=2){s===0&&r(e.targetAnchor,t,n);const{el:o,anchor:u,shapeFlag:h,children:d,props:v}=e,y=s===2;if(y&&r(o,t,n),(!y||Zd(v))&&h&16)for(let x=0;x<d.length;x++)i(d[x],t,n,2);y&&r(u,t,n)}function WP(e,t,n,r,i,s,{o:{nextSibling:o,parentNode:u,querySelector:h,insert:d,createText:v}},y){const x=t.target=Av(t.props,h);if(x){const _=Zd(t.props),P=x._lpa||x.firstChild;if(t.shapeFlag&16)if(_)t.anchor=y(o(e),t,u(e),n,r,i,s),t.targetStart=P,t.targetAnchor=P&&o(P);else{t.anchor=o(e);let T=P;for(;T;){if(T&&T.nodeType===8){if(T.data==="teleport start anchor")t.targetStart=T;else if(T.data==="teleport anchor"){t.targetAnchor=T,x._lpa=t.targetAnchor&&o(t.targetAnchor);break}}T=o(T)}t.targetAnchor||D4(x,t,v,d),y(P&&o(P),t,x,n,r,i,s)}P0(t,_)}return t.anchor&&o(t.anchor)}const C0=N4;function P0(e,t){const n=e.ctx;if(n&&n.ut){let r,i;for(t?(r=e.el,i=e.anchor):(r=e.targetStart,i=e.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function D4(e,t,n,r){const i=t.targetStart=n(""),s=t.targetAnchor=n("");return i[B4]=s,e&&(r(i,e),r(s,e)),s}const ih=Symbol("_leaveCb"),a0=Symbol("_enterCb");function G1(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ia(()=>{e.isMounted=!0}),cd(()=>{e.isUnmounting=!0}),e}const ru=[Function,Array],q1={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ru,onEnter:ru,onAfterEnter:ru,onEnterCancelled:ru,onBeforeLeave:ru,onLeave:ru,onAfterLeave:ru,onLeaveCancelled:ru,onBeforeAppear:ru,onAppear:ru,onAfterAppear:ru,onAppearCancelled:ru},I4=e=>{const t=e.subTree;return t.component?I4(t.component):t},ZP={name:"BaseTransition",props:q1,setup(e,{slots:t}){const n=mu(),r=G1();return()=>{const i=t.default&&Rg(t.default(),!0);if(!i||!i.length)return;const s=R4(i),o=ui(e),{mode:u}=o;if(r.isLeaving)return Fm(s);const h=j2(s);if(!h)return Fm(s);let d=ed(h,o,r,n,y=>d=y);h.type!==xs&&Rc(h,d);let v=n.subTree&&j2(n.subTree);if(v&&v.type!==xs&&!Ru(h,v)&&I4(n).type!==xs){let y=ed(v,o,r,n);if(Rc(v,y),u==="out-in"&&h.type!==xs)return r.isLeaving=!0,y.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete y.afterLeave,v=void 0},Fm(s);u==="in-out"&&h.type!==xs?y.delayLeave=(x,_,P)=>{const T=j4(r,v);T[String(v.key)]=v,x[ih]=()=>{_(),x[ih]=void 0,delete d.delayedLeave,v=void 0},d.delayedLeave=()=>{P(),delete d.delayedLeave,v=void 0}}:v=void 0}else v&&(v=void 0);return s}}};function R4(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==xs){t=n;break}}return t}const F4=ZP;function j4(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function ed(e,t,n,r,i){const{appear:s,mode:o,persisted:u=!1,onBeforeEnter:h,onEnter:d,onAfterEnter:v,onEnterCancelled:y,onBeforeLeave:x,onLeave:_,onAfterLeave:P,onLeaveCancelled:T,onBeforeAppear:U,onAppear:N,onAfterAppear:j,onAppearCancelled:Z}=t,J=String(e.key),le=j4(n,e),he=(F,Y)=>{F&&du(F,r,9,Y)},Le=(F,Y)=>{const $=Y[1];he(F,Y),qn(F)?F.every(D=>D.length<=1)&&$():F.length<=1&&$()},V={mode:o,persisted:u,beforeEnter(F){let Y=h;if(!n.isMounted)if(s)Y=U||h;else return;F[ih]&&F[ih](!0);const $=le[J];$&&Ru(e,$)&&$.el[ih]&&$.el[ih](),he(Y,[F])},enter(F){let Y=d,$=v,D=y;if(!n.isMounted)if(s)Y=N||d,$=j||v,D=Z||y;else return;let k=!1;const I=F[a0]=W=>{k||(k=!0,W?he(D,[F]):he($,[F]),V.delayedLeave&&V.delayedLeave(),F[a0]=void 0)};Y?Le(Y,[F,I]):I()},leave(F,Y){const $=String(e.key);if(F[a0]&&F[a0](!0),n.isUnmounting)return Y();he(x,[F]);let D=!1;const k=F[ih]=I=>{D||(D=!0,Y(),I?he(T,[F]):he(P,[F]),F[ih]=void 0,le[$]===e&&delete le[$])};le[$]=e,_?Le(_,[F,k]):k()},clone(F){const Y=ed(F,t,n,r,i);return i&&i(Y),Y}};return V}function Fm(e){if(Cp(e))return e=dc(e),e.children=null,e}function j2(e){if(!Cp(e))return O4(e.type)&&e.children?R4(e.children):e;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&vr(n.default))return n.default()}}function Rc(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Rc(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Rg(e,t=!1,n){let r=[],i=0;for(let s=0;s<e.length;s++){let o=e[s];const u=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===On?(o.patchFlag&128&&i++,r=r.concat(Rg(o.children,t,u))):(t||o.type!==xs)&&r.push(u!=null?dc(o,{key:u}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Ns(e,t){return vr(e)?Xi({name:e.name},t,{setup:e}):e}function KP(){const e=mu();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function W1(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function YP(e){const t=mu(),n=$1(null);if(t){const i=t.refs===ci?t.refs={}:t.refs;Object.defineProperty(i,e,{enumerable:!0,get:()=>n.value,set:s=>n.value=s})}return n}function gp(e,t,n,r,i=!1){if(qn(e)){e.forEach((P,T)=>gp(P,t&&(qn(t)?t[T]:t),n,r,i));return}if(hh(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&gp(e,t,n,r.component.subTree);return}const s=r.shapeFlag&4?Ap(r.component):r.el,o=i?null:s,{i:u,r:h}=e,d=t&&t.r,v=u.refs===ci?u.refs={}:u.refs,y=u.setupState,x=ui(y),_=y===ci?()=>!1:P=>Ci(x,P);if(d!=null&&d!==h&&(io(d)?(v[d]=null,_(d)&&(y[d]=null)):Fo(d)&&(d.value=null)),vr(h))ud(h,u,12,[o,v]);else{const P=io(h),T=Fo(h);if(P||T){const U=()=>{if(e.f){const N=P?_(h)?y[h]:v[h]:h.value;i?qn(N)&&B1(N,s):qn(N)?N.includes(s)||N.push(s):P?(v[h]=[s],_(h)&&(y[h]=v[h])):(h.value=[s],e.k&&(v[e.k]=h.value))}else P?(v[h]=o,_(h)&&(y[h]=o)):T&&(h.value=o,e.k&&(v[e.k]=o))};o?(U.id=-1,Ts(U,n)):U()}}}let z2=!1;const Sf=()=>{z2||(console.error("Hydration completed but contains mismatches."),z2=!0)},XP=e=>e.namespaceURI.includes("svg")&&e.tagName!=="foreignObject",JP=e=>e.namespaceURI.includes("MathML"),l0=e=>{if(e.nodeType===1){if(XP(e))return"svg";if(JP(e))return"mathml"}},jf=e=>e.nodeType===8;function QP(e){const{mt:t,p:n,o:{patchProp:r,createText:i,nextSibling:s,parentNode:o,remove:u,insert:h,createComment:d}}=e,v=(Z,J)=>{if(!J.hasChildNodes()){n(null,Z,J),J0(),J._vnode=Z;return}y(J.firstChild,Z,null,null,null),J0(),J._vnode=Z},y=(Z,J,le,he,Le,V=!1)=>{V=V||!!J.dynamicChildren;const F=jf(Z)&&Z.data==="[",Y=()=>T(Z,J,le,he,Le,F),{type:$,ref:D,shapeFlag:k,patchFlag:I}=J;let W=Z.nodeType;J.el=Z,I===-2&&(V=!1,J.dynamicChildren=null);let G=null;switch($){case fh:W!==3?J.children===""?(h(J.el=i(""),o(Z),Z),G=Z):G=Y():(Z.data!==J.children&&(Sf(),Z.data=J.children),G=s(Z));break;case xs:j(Z)?(G=s(Z),N(J.el=Z.content.firstChild,Z,le)):W!==8||F?G=Y():G=s(Z);break;case Wh:if(F&&(Z=s(Z),W=Z.nodeType),W===1||W===3){G=Z;const K=!J.children.length;for(let q=0;q<J.staticCount;q++)K&&(J.children+=G.nodeType===1?G.outerHTML:G.data),q===J.staticCount-1&&(J.anchor=G),G=s(G);return F?s(G):G}else Y();break;case On:F?G=P(Z,J,le,he,Le,V):G=Y();break;default:if(k&1)(W!==1||J.type.toLowerCase()!==Z.tagName.toLowerCase())&&!j(Z)?G=Y():G=x(Z,J,le,he,Le,V);else if(k&6){J.slotScopeIds=Le;const K=o(Z);if(F?G=U(Z):jf(Z)&&Z.data==="teleport start"?G=U(Z,Z.data,"teleport end"):G=s(Z),t(J,K,null,le,he,l0(K),V),hh(J)&&!J.type.__asyncResolved){let q;F?(q=qr(On),q.anchor=G?G.previousSibling:K.lastChild):q=Z.nodeType===3?Mi(""):qr("div"),q.el=Z,J.component.subTree=q}}else k&64?W!==8?G=Y():G=J.type.hydrate(Z,J,le,he,Le,V,e,_):k&128&&(G=J.type.hydrate(Z,J,le,he,l0(o(Z)),Le,V,e,y))}return D!=null&&gp(D,null,he,J),G},x=(Z,J,le,he,Le,V)=>{V=V||!!J.dynamicChildren;const{type:F,props:Y,patchFlag:$,shapeFlag:D,dirs:k,transition:I}=J,W=F==="input"||F==="option";if(W||$!==-1){k&&sc(J,null,le,"created");let G=!1;if(j(Z)){G=dw(null,I)&&le&&le.vnode.props&&le.vnode.props.appear;const q=Z.content.firstChild;G&&I.beforeEnter(q),N(q,Z,le),J.el=Z=q}if(D&16&&!(Y&&(Y.innerHTML||Y.textContent))){let q=_(Z.firstChild,J,Z,le,he,Le,V);for(;q;){u0(Z,1)||Sf();const ve=q;q=q.nextSibling,u(ve)}}else if(D&8){let q=J.children;q[0]===`
`&&(Z.tagName==="PRE"||Z.tagName==="TEXTAREA")&&(q=q.slice(1)),Z.textContent!==q&&(u0(Z,0)||Sf(),Z.textContent=J.children)}if(Y){if(W||!V||$&48){const q=Z.tagName.includes("-");for(const ve in Y)(W&&(ve.endsWith("value")||ve==="indeterminate")||Sp(ve)&&!Hf(ve)||ve[0]==="."||q)&&r(Z,ve,null,Y[ve],void 0,le)}else if(Y.onClick)r(Z,"onClick",null,Y.onClick,void 0,le);else if($&4&&cc(Y.style))for(const q in Y.style)Y.style[q]}let K;(K=Y&&Y.onVnodeBeforeMount)&&ml(K,le,J),k&&sc(J,null,le,"beforeMount"),((K=Y&&Y.onVnodeMounted)||k||G)&&xw(()=>{K&&ml(K,le,J),G&&I.enter(Z),k&&sc(J,null,le,"mounted")},he)}return Z.nextSibling},_=(Z,J,le,he,Le,V,F)=>{F=F||!!J.dynamicChildren;const Y=J.children,$=Y.length;for(let D=0;D<$;D++){const k=F?Y[D]:Y[D]=yl(Y[D]),I=k.type===fh;Z?(I&&!F&&D+1<$&&yl(Y[D+1]).type===fh&&(h(i(Z.data.slice(k.children.length)),le,s(Z)),Z.data=k.children),Z=y(Z,k,he,Le,V,F)):I&&!k.children?h(k.el=i(""),le):(u0(le,1)||Sf(),n(null,k,le,null,he,Le,l0(le),V))}return Z},P=(Z,J,le,he,Le,V)=>{const{slotScopeIds:F}=J;F&&(Le=Le?Le.concat(F):F);const Y=o(Z),$=_(s(Z),J,Y,le,he,Le,V);return $&&jf($)&&$.data==="]"?s(J.anchor=$):(Sf(),h(J.anchor=d("]"),Y,$),$)},T=(Z,J,le,he,Le,V)=>{if(u0(Z.parentElement,1)||Sf(),J.el=null,V){const $=U(Z);for(;;){const D=s(Z);if(D&&D!==$)u(D);else break}}const F=s(Z),Y=o(Z);return u(Z),n(null,J,Y,F,le,he,l0(Y),Le),le&&(le.vnode.el=J.el,Ug(le,J.el)),F},U=(Z,J="[",le="]")=>{let he=0;for(;Z;)if(Z=s(Z),Z&&jf(Z)&&(Z.data===J&&he++,Z.data===le)){if(he===0)return s(Z);he--}return Z},N=(Z,J,le)=>{const he=J.parentNode;he&&he.replaceChild(Z,J);let Le=le;for(;Le;)Le.vnode.el===J&&(Le.vnode.el=Le.subTree.el=Z),Le=Le.parent},j=Z=>Z.nodeType===1&&Z.tagName==="TEMPLATE";return[v,y]}const U2="data-allow-mismatch",eA={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function u0(e,t){if(t===0||t===1)for(;e&&!e.hasAttribute(U2);)e=e.parentElement;const n=e&&e.getAttribute(U2);if(n==null)return!1;if(n==="")return!0;{const r=n.split(",");return t===0&&r.includes("children")?!0:n.split(",").includes(eA[t])}}const tA=Ag().requestIdleCallback||(e=>setTimeout(e,1)),nA=Ag().cancelIdleCallback||(e=>clearTimeout(e)),rA=(e=1e4)=>t=>{const n=tA(t,{timeout:e});return()=>nA(n)};function iA(e){const{top:t,left:n,bottom:r,right:i}=e.getBoundingClientRect(),{innerHeight:s,innerWidth:o}=window;return(t>0&&t<s||r>0&&r<s)&&(n>0&&n<o||i>0&&i<o)}const oA=e=>(t,n)=>{const r=new IntersectionObserver(i=>{for(const s of i)if(s.isIntersecting){r.disconnect(),t();break}},e);return n(i=>{if(i instanceof Element){if(iA(i))return t(),r.disconnect(),!1;r.observe(i)}}),()=>r.disconnect()},sA=e=>t=>{if(e){const n=matchMedia(e);if(n.matches)t();else return n.addEventListener("change",t,{once:!0}),()=>n.removeEventListener("change",t)}},aA=(e=[])=>(t,n)=>{io(e)&&(e=[e]);let r=!1;const i=o=>{r||(r=!0,s(),t(),o.target.dispatchEvent(new o.constructor(o.type,o)))},s=()=>{n(o=>{for(const u of e)o.removeEventListener(u,i)})};return n(o=>{for(const u of e)o.addEventListener(u,i,{once:!0})}),s};function lA(e,t){if(jf(e)&&e.data==="["){let n=1,r=e.nextSibling;for(;r;){if(r.nodeType===1){if(t(r)===!1)break}else if(jf(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else t(e)}const hh=e=>!!e.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function uA(e){vr(e)&&(e={loader:e});const{loader:t,loadingComponent:n,errorComponent:r,delay:i=200,hydrate:s,timeout:o,suspensible:u=!0,onError:h}=e;let d=null,v,y=0;const x=()=>(y++,d=null,_()),_=()=>{let P;return d||(P=d=t().catch(T=>{if(T=T instanceof Error?T:new Error(String(T)),h)return new Promise((U,N)=>{h(T,()=>U(x()),()=>N(T),y+1)});throw T}).then(T=>P!==d&&d?d:(T&&(T.__esModule||T[Symbol.toStringTag]==="Module")&&(T=T.default),v=T,T)))};return Ns({name:"AsyncComponentWrapper",__asyncLoader:_,__asyncHydrate(P,T,U){const N=s?()=>{const j=s(U,Z=>lA(P,Z));j&&(T.bum||(T.bum=[])).push(j)}:U;v?N():_().then(()=>!T.isUnmounted&&N())},get __asyncResolved(){return v},setup(){const P=Bs;if(W1(P),v)return()=>jm(v,P);const T=Z=>{d=null,of(Z,P,13,!r)};if(u&&P.suspense||td)return _().then(Z=>()=>jm(Z,P)).catch(Z=>(T(Z),()=>r?qr(r,{error:Z}):null));const U=Gt(!1),N=Gt(),j=Gt(!!i);return i&&setTimeout(()=>{j.value=!1},i),o!=null&&setTimeout(()=>{if(!U.value&&!N.value){const Z=new Error(`Async component timed out after ${o}ms.`);T(Z),N.value=Z}},o),_().then(()=>{U.value=!0,P.parent&&Cp(P.parent.vnode)&&P.parent.update()}).catch(Z=>{T(Z),N.value=Z}),()=>{if(U.value&&v)return jm(v,P);if(N.value&&r)return qr(r,{error:N.value});if(n&&!j.value)return qr(n)}}})}function jm(e,t){const{ref:n,props:r,children:i,ce:s}=t.vnode,o=qr(e,r,i);return o.ref=n,o.ce=s,delete t.vnode.ce,o}const Cp=e=>e.type.__isKeepAlive,cA={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=mu(),r=n.ctx;if(!r.renderer)return()=>{const j=t.default&&t.default();return j&&j.length===1?j[0]:j};const i=new Map,s=new Set;let o=null;const u=n.suspense,{renderer:{p:h,m:d,um:v,o:{createElement:y}}}=r,x=y("div");r.activate=(j,Z,J,le,he)=>{const Le=j.component;d(j,Z,J,0,u),h(Le.vnode,j,Z,J,Le,u,le,j.slotScopeIds,he),Ts(()=>{Le.isDeactivated=!1,Le.a&&Gf(Le.a);const V=j.props&&j.props.onVnodeMounted;V&&ml(V,Le.parent,j)},u)},r.deactivate=j=>{const Z=j.component;eg(Z.m),eg(Z.a),d(j,x,null,1,u),Ts(()=>{Z.da&&Gf(Z.da);const J=j.props&&j.props.onVnodeUnmounted;J&&ml(J,Z.parent,j),Z.isDeactivated=!0},u)};function _(j){zm(j),v(j,n,u,!0)}function P(j){i.forEach((Z,J)=>{const le=zv(Z.type);le&&!j(le)&&T(J)})}function T(j){const Z=i.get(j);Z&&(!o||!Ru(Z,o))?_(Z):o&&zm(o),i.delete(j),s.delete(j)}hs(()=>[e.include,e.exclude],([j,Z])=>{j&&P(J=>Dd(j,J)),Z&&P(J=>!Dd(Z,J))},{flush:"post",deep:!0});let U=null;const N=()=>{U!=null&&(tg(n.subTree.type)?Ts(()=>{i.set(U,c0(n.subTree))},n.subTree.suspense):i.set(U,c0(n.subTree)))};return Ia(N),jg(N),cd(()=>{i.forEach(j=>{const{subTree:Z,suspense:J}=n,le=c0(Z);if(j.type===le.type&&j.key===le.key){zm(le);const he=le.component.da;he&&Ts(he,J);return}_(j)})}),()=>{if(U=null,!t.default)return o=null;const j=t.default(),Z=j[0];if(j.length>1)return o=null,j;if(!Fc(Z)||!(Z.shapeFlag&4)&&!(Z.shapeFlag&128))return o=null,Z;let J=c0(Z);if(J.type===xs)return o=null,J;const le=J.type,he=zv(hh(J)?J.type.__asyncResolved||{}:le),{include:Le,exclude:V,max:F}=e;if(Le&&(!he||!Dd(Le,he))||V&&he&&Dd(V,he))return J.shapeFlag&=-257,o=J,Z;const Y=J.key==null?le:J.key,$=i.get(Y);return J.el&&(J=dc(J),Z.shapeFlag&128&&(Z.ssContent=J)),U=Y,$?(J.el=$.el,J.component=$.component,J.transition&&Rc(J,J.transition),J.shapeFlag|=512,s.delete(Y),s.add(Y)):(s.add(Y),F&&s.size>parseInt(F,10)&&T(s.values().next().value)),J.shapeFlag|=256,o=J,tg(Z.type)?Z:J}}},hA=cA;function Dd(e,t){return qn(e)?e.some(n=>Dd(n,t)):io(e)?e.split(",").includes(t):UC(e)?(e.lastIndex=0,e.test(t)):!1}function z4(e,t){$4(e,"a",t)}function U4(e,t){$4(e,"da",t)}function $4(e,t,n=Bs){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Fg(t,r,n),n){let i=n.parent;for(;i&&i.parent;)Cp(i.parent.vnode)&&fA(r,t,n,i),i=i.parent}}function fA(e,t,n,r){const i=Fg(t,e,r,!0);wh(()=>{B1(r[t],i)},n)}function zm(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function c0(e){return e.shapeFlag&128?e.ssContent:e}function Fg(e,t,n=Bs,r=!1){if(n){const i=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...o)=>{_h();const u=Qh(n),h=du(t,n,e,o);return u(),bh(),h});return r?i.unshift(s):i.push(s),s}}const zc=e=>(t,n=Bs)=>{(!td||e==="sp")&&Fg(e,(...r)=>t(...r),n)},V4=zc("bm"),Ia=zc("m"),Z1=zc("bu"),jg=zc("u"),cd=zc("bum"),wh=zc("um"),H4=zc("sp"),G4=zc("rtg"),q4=zc("rtc");function W4(e,t=Bs){Fg("ec",e,t)}const K1="components",dA="directives";function Z4(e,t){return Y1(K1,e,!0,t)||e}const K4=Symbol.for("v-ndc");function pA(e){return io(e)?Y1(K1,e,!1)||e:e||K4}function gA(e){return Y1(dA,e)}function Y1(e,t,n=!0,r=!1){const i=Os||Bs;if(i){const s=i.type;if(e===K1){const u=zv(s,!1);if(u&&(u===t||u===ca(t)||u===Ep(ca(t))))return s}const o=$2(i[e]||s[e],t)||$2(i.appContext[e],t);return!o&&r?s:o}}function $2(e,t){return e&&(e[t]||e[ca(t)]||e[Ep(ca(t))])}function Sr(e,t,n,r){let i;const s=n&&n[r],o=qn(e);if(o||io(e)){const u=o&&cc(e);let h=!1;u&&(h=!Vl(e),e=Tg(e)),i=new Array(e.length);for(let d=0,v=e.length;d<v;d++)i[d]=t(h?ka(e[d]):e[d],d,void 0,s&&s[d])}else if(typeof e=="number"){i=new Array(e);for(let u=0;u<e;u++)i[u]=t(u+1,u,void 0,s&&s[u])}else if(Ii(e))if(e[Symbol.iterator])i=Array.from(e,(u,h)=>t(u,h,void 0,s&&s[h]));else{const u=Object.keys(e);i=new Array(u.length);for(let h=0,d=u.length;h<d;h++){const v=u[h];i[h]=t(e[v],v,h,s&&s[h])}}else i=[];return n&&(n[r]=i),i}function Y4(e,t){for(let n=0;n<t.length;n++){const r=t[n];if(qn(r))for(let i=0;i<r.length;i++)e[r[i].name]=r[i].fn;else r&&(e[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return e}function mA(e,t,n={},r,i){if(Os.ce||Os.parent&&hh(Os.parent)&&Os.parent.ce)return t!=="default"&&(n.name=t),Je(),hu(On,null,[qr("slot",n,r&&r())],64);let s=e[t];s&&s._c&&(s._d=!1),Je();const o=s&&X1(s(n)),u=n.key||o&&o.key,h=hu(On,{key:(u&&!zu(u)?u:`_${t}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&e._===1?64:-2);return!i&&h.scopeId&&(h.slotScopeIds=[h.scopeId+"-s"]),s&&s._c&&(s._d=!0),h}function X1(e){return e.some(t=>Fc(t)?!(t.type===xs||t.type===On&&!X1(t.children)):!0)?e:null}function vA(e,t){const n={};for(const r in e)n[t&&/[A-Z]/.test(r)?`on:${r}`:Gd(r)]=e[r];return n}const Mv=e=>e?Mw(e)?Ap(e):Mv(e.parent):null,Kd=Xi(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Mv(e.parent),$root:e=>Mv(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>J1(e),$forceUpdate:e=>e.f||(e.f=()=>{H1(e.update)}),$nextTick:e=>e.n||(e.n=qs.bind(e.proxy)),$watch:e=>WA.bind(e)}),Um=(e,t)=>e!==ci&&!e.__isScriptSetup&&Ci(e,t),kv={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:u,appContext:h}=e;let d;if(t[0]!=="$"){const _=o[t];if(_!==void 0)switch(_){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return s[t]}else{if(Um(r,t))return o[t]=1,r[t];if(i!==ci&&Ci(i,t))return o[t]=2,i[t];if((d=e.propsOptions[0])&&Ci(d,t))return o[t]=3,s[t];if(n!==ci&&Ci(n,t))return o[t]=4,n[t];Tv&&(o[t]=0)}}const v=Kd[t];let y,x;if(v)return t==="$attrs"&&Ma(e.attrs,"get",""),v(e);if((y=u.__cssModules)&&(y=y[t]))return y;if(n!==ci&&Ci(n,t))return o[t]=4,n[t];if(x=h.config.globalProperties,Ci(x,t))return x[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:s}=e;return Um(i,t)?(i[t]=n,!0):r!==ci&&Ci(r,t)?(r[t]=n,!0):Ci(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let u;return!!n[o]||e!==ci&&Ci(e,o)||Um(t,o)||(u=s[0])&&Ci(u,o)||Ci(r,o)||Ci(Kd,o)||Ci(i.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Ci(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}},yA=Xi({},kv,{get(e,t){if(t!==Symbol.unscopables)return kv.get(e,t,e)},has(e,t){return t[0]!=="_"&&!qC(t)}});function _A(){return null}function bA(){return null}function wA(e){}function xA(e){}function LA(){return null}function SA(){}function EA(e,t){return null}function CA(){return X4().slots}function PA(){return X4().attrs}function X4(){const e=mu();return e.setupContext||(e.setupContext=Bw(e))}function mp(e){return qn(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}function AA(e,t){const n=mp(e);for(const r in t){if(r.startsWith("__skip"))continue;let i=n[r];i?qn(i)||vr(i)?i=n[r]={type:i,default:t[r]}:i.default=t[r]:i===null&&(i=n[r]={default:t[r]}),i&&t[`__skip_${r}`]&&(i.skipFactory=!0)}return n}function MA(e,t){return!e||!t?e||t:qn(e)&&qn(t)?e.concat(t):Xi({},mp(e),mp(t))}function kA(e,t){const n={};for(const r in e)t.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>e[r]});return n}function TA(e){const t=mu();let n=e();return Rv(),O1(n)&&(n=n.catch(r=>{throw Qh(t),r})),[n,()=>Qh(t)]}let Tv=!0;function BA(e){const t=J1(e),n=e.proxy,r=e.ctx;Tv=!1,t.beforeCreate&&V2(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:o,watch:u,provide:h,inject:d,created:v,beforeMount:y,mounted:x,beforeUpdate:_,updated:P,activated:T,deactivated:U,beforeDestroy:N,beforeUnmount:j,destroyed:Z,unmounted:J,render:le,renderTracked:he,renderTriggered:Le,errorCaptured:V,serverPrefetch:F,expose:Y,inheritAttrs:$,components:D,directives:k,filters:I}=t;if(d&&OA(d,r,null),o)for(const K in o){const q=o[K];vr(q)&&(r[K]=q.bind(n))}if(i){const K=i.call(n,n);Ii(K)&&(e.data=gu(K))}if(Tv=!0,s)for(const K in s){const q=s[K],ve=vr(q)?q.bind(n,n):vr(q.get)?q.get.bind(n,n):cu,Ce=!vr(q)&&vr(q.set)?q.set.bind(n):cu,Xe=ir({get:ve,set:Ce});Object.defineProperty(r,K,{enumerable:!0,configurable:!0,get:()=>Xe.value,set:B=>Xe.value=B})}if(u)for(const K in u)J4(u[K],r,n,K);if(h){const K=vr(h)?h.call(n):h;Reflect.ownKeys(K).forEach(q=>{Yd(q,K[q])})}v&&V2(v,e,"c");function G(K,q){qn(q)?q.forEach(ve=>K(ve.bind(n))):q&&K(q.bind(n))}if(G(V4,y),G(Ia,x),G(Z1,_),G(jg,P),G(z4,T),G(U4,U),G(W4,V),G(q4,he),G(G4,Le),G(cd,j),G(wh,J),G(H4,F),qn(Y))if(Y.length){const K=e.exposed||(e.exposed={});Y.forEach(q=>{Object.defineProperty(K,q,{get:()=>n[q],set:ve=>n[q]=ve})})}else e.exposed||(e.exposed={});le&&e.render===cu&&(e.render=le),$!=null&&(e.inheritAttrs=$),D&&(e.components=D),k&&(e.directives=k),F&&W1(e)}function OA(e,t,n=cu){qn(e)&&(e=Bv(e));for(const r in e){const i=e[r];let s;Ii(i)?"default"in i?s=Hl(i.from||r,i.default,!0):s=Hl(i.from||r):s=Hl(i),Fo(s)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[r]=s}}function V2(e,t,n){du(qn(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function J4(e,t,n,r){let i=r.includes(".")?yw(n,r):()=>n[r];if(io(e)){const s=t[e];vr(s)&&hs(i,s)}else if(vr(e))hs(i,e.bind(n));else if(Ii(e))if(qn(e))e.forEach(s=>J4(s,t,n,r));else{const s=vr(e.handler)?e.handler.bind(n):t[e.handler];vr(s)&&hs(i,s,e)}}function J1(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,u=s.get(t);let h;return u?h=u:!i.length&&!n&&!r?h=t:(h={},i.length&&i.forEach(d=>Q0(h,d,o,!0)),Q0(h,t,o)),Ii(t)&&s.set(t,h),h}function Q0(e,t,n,r=!1){const{mixins:i,extends:s}=t;s&&Q0(e,s,n,!0),i&&i.forEach(o=>Q0(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const u=NA[o]||n&&n[o];e[o]=u?u(e[o],t[o]):t[o]}return e}const NA={data:H2,props:G2,emits:G2,methods:Id,computed:Id,beforeCreate:Ga,created:Ga,beforeMount:Ga,mounted:Ga,beforeUpdate:Ga,updated:Ga,beforeDestroy:Ga,beforeUnmount:Ga,destroyed:Ga,unmounted:Ga,activated:Ga,deactivated:Ga,errorCaptured:Ga,serverPrefetch:Ga,components:Id,directives:Id,watch:IA,provide:H2,inject:DA};function H2(e,t){return t?e?function(){return Xi(vr(e)?e.call(this,this):e,vr(t)?t.call(this,this):t)}:t:e}function DA(e,t){return Id(Bv(e),Bv(t))}function Bv(e){if(qn(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Ga(e,t){return e?[...new Set([].concat(e,t))]:t}function Id(e,t){return e?Xi(Object.create(null),e,t):t}function G2(e,t){return e?qn(e)&&qn(t)?[...new Set([...e,...t])]:Xi(Object.create(null),mp(e),mp(t??{})):t}function IA(e,t){if(!e)return t;if(!t)return e;const n=Xi(Object.create(null),e);for(const r in t)n[r]=Ga(e[r],t[r]);return n}function Q4(){return{app:null,config:{isNativeTag:jC,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let RA=0;function FA(e,t){return function(r,i=null){vr(r)||(r=Xi({},r)),i!=null&&!Ii(i)&&(i=null);const s=Q4(),o=new WeakSet,u=[];let h=!1;const d=s.app={_uid:RA++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:Nw,get config(){return s.config},set config(v){},use(v,...y){return o.has(v)||(v&&vr(v.install)?(o.add(v),v.install(d,...y)):vr(v)&&(o.add(v),v(d,...y))),d},mixin(v){return s.mixins.includes(v)||s.mixins.push(v),d},component(v,y){return y?(s.components[v]=y,d):s.components[v]},directive(v,y){return y?(s.directives[v]=y,d):s.directives[v]},mount(v,y,x){if(!h){const _=d._ceVNode||qr(r,i);return _.appContext=s,x===!0?x="svg":x===!1&&(x=void 0),y&&t?t(_,v):e(_,v,x),h=!0,d._container=v,v.__vue_app__=d,Ap(_.component)}},onUnmount(v){u.push(v)},unmount(){h&&(du(u,d._instance,16),e(null,d._container),delete d._container.__vue_app__)},provide(v,y){return s.provides[v]=y,d},runWithContext(v){const y=qh;qh=d;try{return v()}finally{qh=y}}};return d}}let qh=null;function Yd(e,t){if(Bs){let n=Bs.provides;const r=Bs.parent&&Bs.parent.provides;r===n&&(n=Bs.provides=Object.create(r)),n[e]=t}}function Hl(e,t,n=!1){const r=Bs||Os;if(r||qh){const i=qh?qh._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&vr(t)?t.call(r&&r.proxy):t}}function ew(){return!!(Bs||Os||qh)}const tw={},nw=()=>Object.create(tw),rw=e=>Object.getPrototypeOf(e)===tw;function jA(e,t,n,r=!1){const i={},s=nw();e.propsDefaults=Object.create(null),iw(e,t,i,s);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);n?e.props=r?i:U1(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function zA(e,t,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=e,u=ui(i),[h]=e.propsOptions;let d=!1;if((r||o>0)&&!(o&16)){if(o&8){const v=e.vnode.dynamicProps;for(let y=0;y<v.length;y++){let x=v[y];if(zg(e.emitsOptions,x))continue;const _=t[x];if(h)if(Ci(s,x))_!==s[x]&&(s[x]=_,d=!0);else{const P=ca(x);i[P]=Ov(h,u,P,_,e,!1)}else _!==s[x]&&(s[x]=_,d=!0)}}}else{iw(e,t,i,s)&&(d=!0);let v;for(const y in u)(!t||!Ci(t,y)&&((v=_l(y))===y||!Ci(t,v)))&&(h?n&&(n[y]!==void 0||n[v]!==void 0)&&(i[y]=Ov(h,u,y,void 0,e,!0)):delete i[y]);if(s!==u)for(const y in s)(!t||!Ci(t,y))&&(delete s[y],d=!0)}d&&Oc(e.attrs,"set","")}function iw(e,t,n,r){const[i,s]=e.propsOptions;let o=!1,u;if(t)for(let h in t){if(Hf(h))continue;const d=t[h];let v;i&&Ci(i,v=ca(h))?!s||!s.includes(v)?n[v]=d:(u||(u={}))[v]=d:zg(e.emitsOptions,h)||(!(h in r)||d!==r[h])&&(r[h]=d,o=!0)}if(s){const h=ui(n),d=u||ci;for(let v=0;v<s.length;v++){const y=s[v];n[y]=Ov(i,h,y,d[y],e,!Ci(d,y))}}return o}function Ov(e,t,n,r,i,s){const o=e[n];if(o!=null){const u=Ci(o,"default");if(u&&r===void 0){const h=o.default;if(o.type!==Function&&!o.skipFactory&&vr(h)){const{propsDefaults:d}=i;if(n in d)r=d[n];else{const v=Qh(i);r=d[n]=h.call(null,t),v()}}else r=h;i.ce&&i.ce._setProp(n,r)}o[0]&&(s&&!u?r=!1:o[1]&&(r===""||r===_l(n))&&(r=!0))}return r}const UA=new WeakMap;function ow(e,t,n=!1){const r=n?UA:t.propsCache,i=r.get(e);if(i)return i;const s=e.props,o={},u=[];let h=!1;if(!vr(e)){const v=y=>{h=!0;const[x,_]=ow(y,t,!0);Xi(o,x),_&&u.push(..._)};!n&&t.mixins.length&&t.mixins.forEach(v),e.extends&&v(e.extends),e.mixins&&e.mixins.forEach(v)}if(!s&&!h)return Ii(e)&&r.set(e,$f),$f;if(qn(s))for(let v=0;v<s.length;v++){const y=ca(s[v]);q2(y)&&(o[y]=ci)}else if(s)for(const v in s){const y=ca(v);if(q2(y)){const x=s[v],_=o[y]=qn(x)||vr(x)?{type:x}:Xi({},x),P=_.type;let T=!1,U=!0;if(qn(P))for(let N=0;N<P.length;++N){const j=P[N],Z=vr(j)&&j.name;if(Z==="Boolean"){T=!0;break}else Z==="String"&&(U=!1)}else T=vr(P)&&P.name==="Boolean";_[0]=T,_[1]=U,(T||Ci(_,"default"))&&u.push(y)}}const d=[o,u];return Ii(e)&&r.set(e,d),d}function q2(e){return e[0]!=="$"&&!Hf(e)}const sw=e=>e[0]==="_"||e==="$stable",Q1=e=>qn(e)?e.map(yl):[yl(e)],$A=(e,t,n)=>{if(t._n)return t;const r=Ul((...i)=>Q1(t(...i)),n);return r._c=!1,r},aw=(e,t,n)=>{const r=e._ctx;for(const i in e){if(sw(i))continue;const s=e[i];if(vr(s))t[i]=$A(i,s,r);else if(s!=null){const o=Q1(s);t[i]=()=>o}}},lw=(e,t)=>{const n=Q1(t);e.slots.default=()=>n},uw=(e,t,n)=>{for(const r in t)(n||r!=="_")&&(e[r]=t[r])},VA=(e,t,n)=>{const r=e.slots=nw();if(e.vnode.shapeFlag&32){const i=t._;i?(uw(r,t,n),n&&n4(r,"_",i,!0)):aw(t,r)}else t&&lw(e,t)},HA=(e,t,n)=>{const{vnode:r,slots:i}=e;let s=!0,o=ci;if(r.shapeFlag&32){const u=t._;u?n&&u===1?s=!1:uw(i,t,n):(s=!t.$stable,aw(t,i)),o=t}else t&&(lw(e,t),o={default:1});if(s)for(const u in i)!sw(u)&&o[u]==null&&delete i[u]},Ts=xw;function cw(e){return fw(e)}function hw(e){return fw(e,QP)}function fw(e,t){const n=Ag();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:u,createComment:h,setText:d,setElementText:v,parentNode:y,nextSibling:x,setScopeId:_=cu,insertStaticContent:P}=e,T=(oe,me,pe,de=null,ze=null,Ke=null,Ge=void 0,Qe=null,Ve=!!me.dynamicChildren)=>{if(oe===me)return;oe&&!Ru(oe,me)&&(de=fe(oe),B(oe,ze,Ke,!0),oe=null),me.patchFlag===-2&&(Ve=!1,me.dynamicChildren=null);const{type:ot,ref:At,shapeFlag:Et}=me;switch(ot){case fh:U(oe,me,pe,de);break;case xs:N(oe,me,pe,de);break;case Wh:oe==null&&j(me,pe,de,Ge);break;case On:D(oe,me,pe,de,ze,Ke,Ge,Qe,Ve);break;default:Et&1?le(oe,me,pe,de,ze,Ke,Ge,Qe,Ve):Et&6?k(oe,me,pe,de,ze,Ke,Ge,Qe,Ve):(Et&64||Et&128)&&ot.process(oe,me,pe,de,ze,Ke,Ge,Qe,Ve,Re)}At!=null&&ze&&gp(At,oe&&oe.ref,Ke,me||oe,!me)},U=(oe,me,pe,de)=>{if(oe==null)r(me.el=u(me.children),pe,de);else{const ze=me.el=oe.el;me.children!==oe.children&&d(ze,me.children)}},N=(oe,me,pe,de)=>{oe==null?r(me.el=h(me.children||""),pe,de):me.el=oe.el},j=(oe,me,pe,de)=>{[oe.el,oe.anchor]=P(oe.children,me,pe,de,oe.el,oe.anchor)},Z=({el:oe,anchor:me},pe,de)=>{let ze;for(;oe&&oe!==me;)ze=x(oe),r(oe,pe,de),oe=ze;r(me,pe,de)},J=({el:oe,anchor:me})=>{let pe;for(;oe&&oe!==me;)pe=x(oe),i(oe),oe=pe;i(me)},le=(oe,me,pe,de,ze,Ke,Ge,Qe,Ve)=>{me.type==="svg"?Ge="svg":me.type==="math"&&(Ge="mathml"),oe==null?he(me,pe,de,ze,Ke,Ge,Qe,Ve):F(oe,me,ze,Ke,Ge,Qe,Ve)},he=(oe,me,pe,de,ze,Ke,Ge,Qe)=>{let Ve,ot;const{props:At,shapeFlag:Et,transition:zt,dirs:Kt}=oe;if(Ve=oe.el=o(oe.type,Ke,At&&At.is,At),Et&8?v(Ve,oe.children):Et&16&&V(oe.children,Ve,null,de,ze,$m(oe,Ke),Ge,Qe),Kt&&sc(oe,null,de,"created"),Le(Ve,oe,oe.scopeId,Ge,de),At){for(const mn in At)mn!=="value"&&!Hf(mn)&&s(Ve,mn,null,At[mn],Ke,de);"value"in At&&s(Ve,"value",null,At.value,Ke),(ot=At.onVnodeBeforeMount)&&ml(ot,de,oe)}Kt&&sc(oe,null,de,"beforeMount");const dn=dw(ze,zt);dn&&zt.beforeEnter(Ve),r(Ve,me,pe),((ot=At&&At.onVnodeMounted)||dn||Kt)&&Ts(()=>{ot&&ml(ot,de,oe),dn&&zt.enter(Ve),Kt&&sc(oe,null,de,"mounted")},ze)},Le=(oe,me,pe,de,ze)=>{if(pe&&_(oe,pe),de)for(let Ke=0;Ke<de.length;Ke++)_(oe,de[Ke]);if(ze){let Ke=ze.subTree;if(me===Ke||tg(Ke.type)&&(Ke.ssContent===me||Ke.ssFallback===me)){const Ge=ze.vnode;Le(oe,Ge,Ge.scopeId,Ge.slotScopeIds,ze.parent)}}},V=(oe,me,pe,de,ze,Ke,Ge,Qe,Ve=0)=>{for(let ot=Ve;ot<oe.length;ot++){const At=oe[ot]=Qe?oh(oe[ot]):yl(oe[ot]);T(null,At,me,pe,de,ze,Ke,Ge,Qe)}},F=(oe,me,pe,de,ze,Ke,Ge)=>{const Qe=me.el=oe.el;let{patchFlag:Ve,dynamicChildren:ot,dirs:At}=me;Ve|=oe.patchFlag&16;const Et=oe.props||ci,zt=me.props||ci;let Kt;if(pe&&Bh(pe,!1),(Kt=zt.onVnodeBeforeUpdate)&&ml(Kt,pe,me,oe),At&&sc(me,oe,pe,"beforeUpdate"),pe&&Bh(pe,!0),(Et.innerHTML&&zt.innerHTML==null||Et.textContent&&zt.textContent==null)&&v(Qe,""),ot?Y(oe.dynamicChildren,ot,Qe,pe,de,$m(me,ze),Ke):Ge||q(oe,me,Qe,null,pe,de,$m(me,ze),Ke,!1),Ve>0){if(Ve&16)$(Qe,Et,zt,pe,ze);else if(Ve&2&&Et.class!==zt.class&&s(Qe,"class",null,zt.class,ze),Ve&4&&s(Qe,"style",Et.style,zt.style,ze),Ve&8){const dn=me.dynamicProps;for(let mn=0;mn<dn.length;mn++){const et=dn[mn],st=Et[et],rt=zt[et];(rt!==st||et==="value")&&s(Qe,et,st,rt,ze,pe)}}Ve&1&&oe.children!==me.children&&v(Qe,me.children)}else!Ge&&ot==null&&$(Qe,Et,zt,pe,ze);((Kt=zt.onVnodeUpdated)||At)&&Ts(()=>{Kt&&ml(Kt,pe,me,oe),At&&sc(me,oe,pe,"updated")},de)},Y=(oe,me,pe,de,ze,Ke,Ge)=>{for(let Qe=0;Qe<me.length;Qe++){const Ve=oe[Qe],ot=me[Qe],At=Ve.el&&(Ve.type===On||!Ru(Ve,ot)||Ve.shapeFlag&70)?y(Ve.el):pe;T(Ve,ot,At,null,de,ze,Ke,Ge,!0)}},$=(oe,me,pe,de,ze)=>{if(me!==pe){if(me!==ci)for(const Ke in me)!Hf(Ke)&&!(Ke in pe)&&s(oe,Ke,me[Ke],null,ze,de);for(const Ke in pe){if(Hf(Ke))continue;const Ge=pe[Ke],Qe=me[Ke];Ge!==Qe&&Ke!=="value"&&s(oe,Ke,Qe,Ge,ze,de)}"value"in pe&&s(oe,"value",me.value,pe.value,ze)}},D=(oe,me,pe,de,ze,Ke,Ge,Qe,Ve)=>{const ot=me.el=oe?oe.el:u(""),At=me.anchor=oe?oe.anchor:u("");let{patchFlag:Et,dynamicChildren:zt,slotScopeIds:Kt}=me;Kt&&(Qe=Qe?Qe.concat(Kt):Kt),oe==null?(r(ot,pe,de),r(At,pe,de),V(me.children||[],pe,At,ze,Ke,Ge,Qe,Ve)):Et>0&&Et&64&&zt&&oe.dynamicChildren?(Y(oe.dynamicChildren,zt,pe,ze,Ke,Ge,Qe),(me.key!=null||ze&&me===ze.subTree)&&ey(oe,me,!0)):q(oe,me,pe,At,ze,Ke,Ge,Qe,Ve)},k=(oe,me,pe,de,ze,Ke,Ge,Qe,Ve)=>{me.slotScopeIds=Qe,oe==null?me.shapeFlag&512?ze.ctx.activate(me,pe,de,Ge,Ve):I(me,pe,de,ze,Ke,Ge,Ve):W(oe,me,Ve)},I=(oe,me,pe,de,ze,Ke,Ge)=>{const Qe=oe.component=Aw(oe,de,ze);if(Cp(oe)&&(Qe.ctx.renderer=Re),kw(Qe,!1,Ge),Qe.asyncDep){if(ze&&ze.registerDep(Qe,G,Ge),!oe.el){const Ve=Qe.subTree=qr(xs);N(null,Ve,me,pe)}}else G(Qe,oe,me,pe,ze,Ke,Ge)},W=(oe,me,pe)=>{const de=me.component=oe.component;if(QA(oe,me,pe))if(de.asyncDep&&!de.asyncResolved){K(de,me,pe);return}else de.next=me,de.update();else me.el=oe.el,de.vnode=me},G=(oe,me,pe,de,ze,Ke,Ge)=>{const Qe=()=>{if(oe.isMounted){let{next:Et,bu:zt,u:Kt,parent:dn,vnode:mn}=oe;{const Xt=pw(oe);if(Xt){Et&&(Et.el=mn.el,K(oe,Et,Ge)),Xt.asyncDep.then(()=>{oe.isUnmounted||Qe()});return}}let et=Et,st;Bh(oe,!1),Et?(Et.el=mn.el,K(oe,Et,Ge)):Et=mn,zt&&Gf(zt),(st=Et.props&&Et.props.onVnodeBeforeUpdate)&&ml(st,dn,Et,mn),Bh(oe,!0);const rt=A0(oe),Vt=oe.subTree;oe.subTree=rt,T(Vt,rt,y(Vt.el),fe(Vt),oe,ze,Ke),Et.el=rt.el,et===null&&Ug(oe,rt.el),Kt&&Ts(Kt,ze),(st=Et.props&&Et.props.onVnodeUpdated)&&Ts(()=>ml(st,dn,Et,mn),ze)}else{let Et;const{el:zt,props:Kt}=me,{bm:dn,m:mn,parent:et,root:st,type:rt}=oe,Vt=hh(me);if(Bh(oe,!1),dn&&Gf(dn),!Vt&&(Et=Kt&&Kt.onVnodeBeforeMount)&&ml(Et,et,me),Bh(oe,!0),zt&&Ze){const Xt=()=>{oe.subTree=A0(oe),Ze(zt,oe.subTree,oe,ze,null)};Vt&&rt.__asyncHydrate?rt.__asyncHydrate(zt,oe,Xt):Xt()}else{st.ce&&st.ce._injectChildStyle(rt);const Xt=oe.subTree=A0(oe);T(null,Xt,pe,de,oe,ze,Ke),me.el=Xt.el}if(mn&&Ts(mn,ze),!Vt&&(Et=Kt&&Kt.onVnodeMounted)){const Xt=me;Ts(()=>ml(Et,et,Xt),ze)}(me.shapeFlag&256||et&&hh(et.vnode)&&et.vnode.shapeFlag&256)&&oe.a&&Ts(oe.a,ze),oe.isMounted=!0,me=pe=de=null}};oe.scope.on();const Ve=oe.effect=new up(Qe);oe.scope.off();const ot=oe.update=Ve.run.bind(Ve),At=oe.job=Ve.runIfDirty.bind(Ve);At.i=oe,At.id=oe.uid,Ve.scheduler=()=>H1(At),Bh(oe,!0),ot()},K=(oe,me,pe)=>{me.component=oe;const de=oe.vnode.props;oe.vnode=me,oe.next=null,zA(oe,me.props,de,pe),HA(oe,me.children,pe),_h(),D2(oe),bh()},q=(oe,me,pe,de,ze,Ke,Ge,Qe,Ve=!1)=>{const ot=oe&&oe.children,At=oe?oe.shapeFlag:0,Et=me.children,{patchFlag:zt,shapeFlag:Kt}=me;if(zt>0){if(zt&128){Ce(ot,Et,pe,de,ze,Ke,Ge,Qe,Ve);return}else if(zt&256){ve(ot,Et,pe,de,ze,Ke,Ge,Qe,Ve);return}}Kt&8?(At&16&&we(ot,ze,Ke),Et!==ot&&v(pe,Et)):At&16?Kt&16?Ce(ot,Et,pe,de,ze,Ke,Ge,Qe,Ve):we(ot,ze,Ke,!0):(At&8&&v(pe,""),Kt&16&&V(Et,pe,de,ze,Ke,Ge,Qe,Ve))},ve=(oe,me,pe,de,ze,Ke,Ge,Qe,Ve)=>{oe=oe||$f,me=me||$f;const ot=oe.length,At=me.length,Et=Math.min(ot,At);let zt;for(zt=0;zt<Et;zt++){const Kt=me[zt]=Ve?oh(me[zt]):yl(me[zt]);T(oe[zt],Kt,pe,null,ze,Ke,Ge,Qe,Ve)}ot>At?we(oe,ze,Ke,!0,!1,Et):V(me,pe,de,ze,Ke,Ge,Qe,Ve,Et)},Ce=(oe,me,pe,de,ze,Ke,Ge,Qe,Ve)=>{let ot=0;const At=me.length;let Et=oe.length-1,zt=At-1;for(;ot<=Et&&ot<=zt;){const Kt=oe[ot],dn=me[ot]=Ve?oh(me[ot]):yl(me[ot]);if(Ru(Kt,dn))T(Kt,dn,pe,null,ze,Ke,Ge,Qe,Ve);else break;ot++}for(;ot<=Et&&ot<=zt;){const Kt=oe[Et],dn=me[zt]=Ve?oh(me[zt]):yl(me[zt]);if(Ru(Kt,dn))T(Kt,dn,pe,null,ze,Ke,Ge,Qe,Ve);else break;Et--,zt--}if(ot>Et){if(ot<=zt){const Kt=zt+1,dn=Kt<At?me[Kt].el:de;for(;ot<=zt;)T(null,me[ot]=Ve?oh(me[ot]):yl(me[ot]),pe,dn,ze,Ke,Ge,Qe,Ve),ot++}}else if(ot>zt)for(;ot<=Et;)B(oe[ot],ze,Ke,!0),ot++;else{const Kt=ot,dn=ot,mn=new Map;for(ot=dn;ot<=zt;ot++){const Dt=me[ot]=Ve?oh(me[ot]):yl(me[ot]);Dt.key!=null&&mn.set(Dt.key,ot)}let et,st=0;const rt=zt-dn+1;let Vt=!1,Xt=0;const ft=new Array(rt);for(ot=0;ot<rt;ot++)ft[ot]=0;for(ot=Kt;ot<=Et;ot++){const Dt=oe[ot];if(st>=rt){B(Dt,ze,Ke,!0);continue}let gn;if(Dt.key!=null)gn=mn.get(Dt.key);else for(et=dn;et<=zt;et++)if(ft[et-dn]===0&&Ru(Dt,me[et])){gn=et;break}gn===void 0?B(Dt,ze,Ke,!0):(ft[gn-dn]=ot+1,gn>=Xt?Xt=gn:Vt=!0,T(Dt,me[gn],pe,null,ze,Ke,Ge,Qe,Ve),st++)}const Ue=Vt?GA(ft):$f;for(et=Ue.length-1,ot=rt-1;ot>=0;ot--){const Dt=dn+ot,gn=me[Dt],un=Dt+1<At?me[Dt+1].el:de;ft[ot]===0?T(null,gn,pe,un,ze,Ke,Ge,Qe,Ve):Vt&&(et<0||ot!==Ue[et]?Xe(gn,pe,un,2):et--)}}},Xe=(oe,me,pe,de,ze=null)=>{const{el:Ke,type:Ge,transition:Qe,children:Ve,shapeFlag:ot}=oe;if(ot&6){Xe(oe.component.subTree,me,pe,de);return}if(ot&128){oe.suspense.move(me,pe,de);return}if(ot&64){Ge.move(oe,me,pe,Re);return}if(Ge===On){r(Ke,me,pe);for(let Et=0;Et<Ve.length;Et++)Xe(Ve[Et],me,pe,de);r(oe.anchor,me,pe);return}if(Ge===Wh){Z(oe,me,pe);return}if(de!==2&&ot&1&&Qe)if(de===0)Qe.beforeEnter(Ke),r(Ke,me,pe),Ts(()=>Qe.enter(Ke),ze);else{const{leave:Et,delayLeave:zt,afterLeave:Kt}=Qe,dn=()=>r(Ke,me,pe),mn=()=>{Et(Ke,()=>{dn(),Kt&&Kt()})};zt?zt(Ke,dn,mn):mn()}else r(Ke,me,pe)},B=(oe,me,pe,de=!1,ze=!1)=>{const{type:Ke,props:Ge,ref:Qe,children:Ve,dynamicChildren:ot,shapeFlag:At,patchFlag:Et,dirs:zt,cacheIndex:Kt}=oe;if(Et===-2&&(ze=!1),Qe!=null&&gp(Qe,null,pe,oe,!0),Kt!=null&&(me.renderCache[Kt]=void 0),At&256){me.ctx.deactivate(oe);return}const dn=At&1&&zt,mn=!hh(oe);let et;if(mn&&(et=Ge&&Ge.onVnodeBeforeUnmount)&&ml(et,me,oe),At&6)ae(oe.component,pe,de);else{if(At&128){oe.suspense.unmount(pe,de);return}dn&&sc(oe,null,me,"beforeUnmount"),At&64?oe.type.remove(oe,me,pe,Re,de):ot&&!ot.hasOnce&&(Ke!==On||Et>0&&Et&64)?we(ot,me,pe,!1,!0):(Ke===On&&Et&384||!ze&&At&16)&&we(Ve,me,pe),de&&te(oe)}(mn&&(et=Ge&&Ge.onVnodeUnmounted)||dn)&&Ts(()=>{et&&ml(et,me,oe),dn&&sc(oe,null,me,"unmounted")},pe)},te=oe=>{const{type:me,el:pe,anchor:de,transition:ze}=oe;if(me===On){se(pe,de);return}if(me===Wh){J(oe);return}const Ke=()=>{i(pe),ze&&!ze.persisted&&ze.afterLeave&&ze.afterLeave()};if(oe.shapeFlag&1&&ze&&!ze.persisted){const{leave:Ge,delayLeave:Qe}=ze,Ve=()=>Ge(pe,Ke);Qe?Qe(oe.el,Ke,Ve):Ve()}else Ke()},se=(oe,me)=>{let pe;for(;oe!==me;)pe=x(oe),i(oe),oe=pe;i(me)},ae=(oe,me,pe)=>{const{bum:de,scope:ze,job:Ke,subTree:Ge,um:Qe,m:Ve,a:ot}=oe;eg(Ve),eg(ot),de&&Gf(de),ze.stop(),Ke&&(Ke.flags|=8,B(Ge,oe,me,pe)),Qe&&Ts(Qe,me),Ts(()=>{oe.isUnmounted=!0},me),me&&me.pendingBranch&&!me.isUnmounted&&oe.asyncDep&&!oe.asyncResolved&&oe.suspenseId===me.pendingId&&(me.deps--,me.deps===0&&me.resolve())},we=(oe,me,pe,de=!1,ze=!1,Ke=0)=>{for(let Ge=Ke;Ge<oe.length;Ge++)B(oe[Ge],me,pe,de,ze)},fe=oe=>{if(oe.shapeFlag&6)return fe(oe.component.subTree);if(oe.shapeFlag&128)return oe.suspense.next();const me=x(oe.anchor||oe.el),pe=me&&me[B4];return pe?x(pe):me};let Q=!1;const ue=(oe,me,pe)=>{oe==null?me._vnode&&B(me._vnode,null,null,!0):T(me._vnode||null,oe,me,null,null,null,pe),me._vnode=oe,Q||(Q=!0,D2(),J0(),Q=!1)},Re={p:T,um:B,m:Xe,r:te,mt:I,mc:V,pc:q,pbc:Y,n:fe,o:e};let Me,Ze;return t&&([Me,Ze]=t(Re)),{render:ue,hydrate:Me,createApp:FA(ue,Me)}}function $m({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Bh({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function dw(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function ey(e,t,n=!1){const r=e.children,i=t.children;if(qn(r)&&qn(i))for(let s=0;s<r.length;s++){const o=r[s];let u=i[s];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=i[s]=oh(i[s]),u.el=o.el),!n&&u.patchFlag!==-2&&ey(o,u)),u.type===fh&&(u.el=o.el)}}function GA(e){const t=e.slice(),n=[0];let r,i,s,o,u;const h=e.length;for(r=0;r<h;r++){const d=e[r];if(d!==0){if(i=n[n.length-1],e[i]<d){t[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)u=s+o>>1,e[n[u]]<d?s=u+1:o=u;d<e[n[s]]&&(s>0&&(t[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=t[o];return n}function pw(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:pw(t)}function eg(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const gw=Symbol.for("v-scx"),mw=()=>Hl(gw);function vp(e,t){return Pp(e,null,t)}function qA(e,t){return Pp(e,null,{flush:"post"})}function vw(e,t){return Pp(e,null,{flush:"sync"})}function hs(e,t,n){return Pp(e,t,n)}function Pp(e,t,n=ci){const{immediate:r,deep:i,flush:s,once:o}=n,u=Xi({},n),h=t&&r||!t&&s!=="post";let d;if(td){if(s==="sync"){const _=mw();d=_.__watcherHandles||(_.__watcherHandles=[])}else if(!h){const _=()=>{};return _.stop=cu,_.resume=cu,_.pause=cu,_}}const v=Bs;u.call=(_,P,T)=>du(_,v,P,T);let y=!1;s==="post"?u.scheduler=_=>{Ts(_,v&&v.suspense)}:s!=="sync"&&(y=!0,u.scheduler=(_,P)=>{P?_():H1(_)}),u.augmentJob=_=>{t&&(_.flags|=4),y&&(_.flags|=2,v&&(_.id=v.uid,_.i=v))};const x=IP(e,t,u);return td&&(d?d.push(x):h&&x()),x}function WA(e,t,n){const r=this.proxy,i=io(e)?e.includes(".")?yw(r,e):()=>r[e]:e.bind(r,r);let s;vr(t)?s=t:(s=t.handler,n=t);const o=Qh(this),u=Pp(i,s.bind(r),n);return o(),u}function yw(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function ZA(e,t,n=ci){const r=mu(),i=ca(t),s=_l(t),o=_w(e,i),u=L4((h,d)=>{let v,y=ci,x;return vw(()=>{const _=e[i];Xa(v,_)&&(v=_,d())}),{get(){return h(),n.get?n.get(v):v},set(_){const P=n.set?n.set(_):_;if(!Xa(P,v)&&!(y!==ci&&Xa(_,y)))return;const T=r.vnode.props;T&&(t in T||i in T||s in T)&&(`onUpdate:${t}`in T||`onUpdate:${i}`in T||`onUpdate:${s}`in T)||(v=_,d()),r.emit(`update:${t}`,P),Xa(_,P)&&Xa(_,y)&&!Xa(P,x)&&d(),y=_,x=P}}});return u[Symbol.iterator]=()=>{let h=0;return{next(){return h<2?{value:h++?o||ci:u,done:!1}:{done:!0}}}},u}const _w=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${ca(t)}Modifiers`]||e[`${_l(t)}Modifiers`];function KA(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||ci;let i=n;const s=t.startsWith("update:"),o=s&&_w(r,t.slice(7));o&&(o.trim&&(i=n.map(v=>io(v)?v.trim():v)),o.number&&(i=n.map(W0)));let u,h=r[u=Gd(t)]||r[u=Gd(ca(t))];!h&&s&&(h=r[u=Gd(_l(t))]),h&&du(h,e,6,i);const d=r[u+"Once"];if(d){if(!e.emitted)e.emitted={};else if(e.emitted[u])return;e.emitted[u]=!0,du(d,e,6,i)}}function bw(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const s=e.emits;let o={},u=!1;if(!vr(e)){const h=d=>{const v=bw(d,t,!0);v&&(u=!0,Xi(o,v))};!n&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}return!s&&!u?(Ii(e)&&r.set(e,null),null):(qn(s)?s.forEach(h=>o[h]=null):Xi(o,s),Ii(e)&&r.set(e,o),o)}function zg(e,t){return!e||!Sp(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ci(e,t[0].toLowerCase()+t.slice(1))||Ci(e,_l(t))||Ci(e,t))}function A0(e){const{type:t,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:u,emit:h,render:d,renderCache:v,props:y,data:x,setupState:_,ctx:P,inheritAttrs:T}=e,U=pp(e);let N,j;try{if(n.shapeFlag&4){const J=i||r,le=J;N=yl(d.call(le,J,v,y,_,x,P)),j=u}else{const J=t;N=yl(J.length>1?J(y,{attrs:u,slots:o,emit:h}):J(y,null)),j=t.props?u:XA(u)}}catch(J){Xd.length=0,of(J,e,1),N=qr(xs)}let Z=N;if(j&&T!==!1){const J=Object.keys(j),{shapeFlag:le}=Z;J.length&&le&7&&(s&&J.some(T1)&&(j=JA(j,s)),Z=dc(Z,j,!1,!0))}return n.dirs&&(Z=dc(Z,null,!1,!0),Z.dirs=Z.dirs?Z.dirs.concat(n.dirs):n.dirs),n.transition&&Rc(Z,n.transition),N=Z,pp(U),N}function YA(e,t=!0){let n;for(let r=0;r<e.length;r++){const i=e[r];if(Fc(i)){if(i.type!==xs||i.children==="v-if"){if(n)return;n=i}}else return}return n}const XA=e=>{let t;for(const n in e)(n==="class"||n==="style"||Sp(n))&&((t||(t={}))[n]=e[n]);return t},JA=(e,t)=>{const n={};for(const r in e)(!T1(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function QA(e,t,n){const{props:r,children:i,component:s}=e,{props:o,children:u,patchFlag:h}=t,d=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&h>=0){if(h&1024)return!0;if(h&16)return r?W2(r,o,d):!!o;if(h&8){const v=t.dynamicProps;for(let y=0;y<v.length;y++){const x=v[y];if(o[x]!==r[x]&&!zg(d,x))return!0}}}else return(i||u)&&(!u||!u.$stable)?!0:r===o?!1:r?o?W2(r,o,d):!0:!!o;return!1}function W2(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(t[s]!==e[s]&&!zg(n,s))return!0}return!1}function Ug({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const tg=e=>e.__isSuspense;let Nv=0;const e6={name:"Suspense",__isSuspense:!0,process(e,t,n,r,i,s,o,u,h,d){if(e==null)n6(t,n,r,i,s,o,u,h,d);else{if(s&&s.deps>0&&!e.suspense.isInFallback){t.suspense=e.suspense,t.suspense.vnode=t,t.el=e.el;return}r6(e,t,n,r,i,o,u,h,d)}},hydrate:i6,normalize:o6},t6=e6;function yp(e,t){const n=e.props&&e.props[t];vr(n)&&n()}function n6(e,t,n,r,i,s,o,u,h){const{p:d,o:{createElement:v}}=h,y=v("div"),x=e.suspense=ww(e,i,r,t,y,n,s,o,u,h);d(null,x.pendingBranch=e.ssContent,y,null,r,x,s,o),x.deps>0?(yp(e,"onPending"),yp(e,"onFallback"),d(null,e.ssFallback,t,n,r,null,s,o),Wf(x,e.ssFallback)):x.resolve(!1,!0)}function r6(e,t,n,r,i,s,o,u,{p:h,um:d,o:{createElement:v}}){const y=t.suspense=e.suspense;y.vnode=t,t.el=e.el;const x=t.ssContent,_=t.ssFallback,{activeBranch:P,pendingBranch:T,isInFallback:U,isHydrating:N}=y;if(T)y.pendingBranch=x,Ru(x,T)?(h(T,x,y.hiddenContainer,null,i,y,s,o,u),y.deps<=0?y.resolve():U&&(N||(h(P,_,n,r,i,null,s,o,u),Wf(y,_)))):(y.pendingId=Nv++,N?(y.isHydrating=!1,y.activeBranch=T):d(T,i,y),y.deps=0,y.effects.length=0,y.hiddenContainer=v("div"),U?(h(null,x,y.hiddenContainer,null,i,y,s,o,u),y.deps<=0?y.resolve():(h(P,_,n,r,i,null,s,o,u),Wf(y,_))):P&&Ru(x,P)?(h(P,x,n,r,i,y,s,o,u),y.resolve(!0)):(h(null,x,y.hiddenContainer,null,i,y,s,o,u),y.deps<=0&&y.resolve()));else if(P&&Ru(x,P))h(P,x,n,r,i,y,s,o,u),Wf(y,x);else if(yp(t,"onPending"),y.pendingBranch=x,x.shapeFlag&512?y.pendingId=x.component.suspenseId:y.pendingId=Nv++,h(null,x,y.hiddenContainer,null,i,y,s,o,u),y.deps<=0)y.resolve();else{const{timeout:j,pendingId:Z}=y;j>0?setTimeout(()=>{y.pendingId===Z&&y.fallback(_)},j):j===0&&y.fallback(_)}}function ww(e,t,n,r,i,s,o,u,h,d,v=!1){const{p:y,m:x,um:_,n:P,o:{parentNode:T,remove:U}}=d;let N;const j=s6(e);j&&t&&t.pendingBranch&&(N=t.pendingId,t.deps++);const Z=e.props?Z0(e.props.timeout):void 0,J=s,le={vnode:e,parent:t,parentComponent:n,namespace:o,container:r,hiddenContainer:i,deps:0,pendingId:Nv++,timeout:typeof Z=="number"?Z:-1,activeBranch:null,pendingBranch:null,isInFallback:!v,isHydrating:v,isUnmounted:!1,effects:[],resolve(he=!1,Le=!1){const{vnode:V,activeBranch:F,pendingBranch:Y,pendingId:$,effects:D,parentComponent:k,container:I}=le;let W=!1;le.isHydrating?le.isHydrating=!1:he||(W=F&&Y.transition&&Y.transition.mode==="out-in",W&&(F.transition.afterLeave=()=>{$===le.pendingId&&(x(Y,I,s===J?P(F):s,0),fp(D))}),F&&(T(F.el)===I&&(s=P(F)),_(F,k,le,!0)),W||x(Y,I,s,0)),Wf(le,Y),le.pendingBranch=null,le.isInFallback=!1;let G=le.parent,K=!1;for(;G;){if(G.pendingBranch){G.effects.push(...D),K=!0;break}G=G.parent}!K&&!W&&fp(D),le.effects=[],j&&t&&t.pendingBranch&&N===t.pendingId&&(t.deps--,t.deps===0&&!Le&&t.resolve()),yp(V,"onResolve")},fallback(he){if(!le.pendingBranch)return;const{vnode:Le,activeBranch:V,parentComponent:F,container:Y,namespace:$}=le;yp(Le,"onFallback");const D=P(V),k=()=>{le.isInFallback&&(y(null,he,Y,D,F,null,$,u,h),Wf(le,he))},I=he.transition&&he.transition.mode==="out-in";I&&(V.transition.afterLeave=k),le.isInFallback=!0,_(V,F,null,!0),I||k()},move(he,Le,V){le.activeBranch&&x(le.activeBranch,he,Le,V),le.container=he},next(){return le.activeBranch&&P(le.activeBranch)},registerDep(he,Le,V){const F=!!le.pendingBranch;F&&le.deps++;const Y=he.vnode.el;he.asyncDep.catch($=>{of($,he,0)}).then($=>{if(he.isUnmounted||le.isUnmounted||le.pendingId!==he.suspenseId)return;he.asyncResolved=!0;const{vnode:D}=he;Fv(he,$,!1),Y&&(D.el=Y);const k=!Y&&he.subTree.el;Le(he,D,T(Y||he.subTree.el),Y?null:P(he.subTree),le,o,V),k&&U(k),Ug(he,D.el),F&&--le.deps===0&&le.resolve()})},unmount(he,Le){le.isUnmounted=!0,le.activeBranch&&_(le.activeBranch,n,he,Le),le.pendingBranch&&_(le.pendingBranch,n,he,Le)}};return le}function i6(e,t,n,r,i,s,o,u,h){const d=t.suspense=ww(t,r,n,e.parentNode,document.createElement("div"),null,i,s,o,u,!0),v=h(e,d.pendingBranch=t.ssContent,n,d,s,o);return d.deps===0&&d.resolve(!1,!0),v}function o6(e){const{shapeFlag:t,children:n}=e,r=t&32;e.ssContent=Z2(r?n.default:n),e.ssFallback=r?Z2(n.fallback):qr(xs)}function Z2(e){let t;if(vr(e)){const n=Jh&&e._c;n&&(e._d=!1,Je()),e=e(),n&&(e._d=!0,t=Na,Lw())}return qn(e)&&(e=YA(e)),e=yl(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(n=>n!==e)),e}function xw(e,t){t&&t.pendingBranch?qn(e)?t.effects.push(...e):t.effects.push(e):fp(e)}function Wf(e,t){e.activeBranch=t;const{vnode:n,parentComponent:r}=e;let i=t.el;for(;!i&&t.component;)t=t.component.subTree,i=t.el;n.el=i,r&&r.subTree===n&&(r.vnode.el=i,Ug(r,i))}function s6(e){const t=e.props&&e.props.suspensible;return t!=null&&t!==!1}const On=Symbol.for("v-fgt"),fh=Symbol.for("v-txt"),xs=Symbol.for("v-cmt"),Wh=Symbol.for("v-stc"),Xd=[];let Na=null;function Je(e=!1){Xd.push(Na=e?null:[])}function Lw(){Xd.pop(),Na=Xd[Xd.length-1]||null}let Jh=1;function Dv(e,t=!1){Jh+=e,e<0&&Na&&t&&(Na.hasOnce=!0)}function Sw(e){return e.dynamicChildren=Jh>0?Na||$f:null,Lw(),Jh>0&&Na&&Na.push(e),e}function tt(e,t,n,r,i,s){return Sw(M(e,t,n,r,i,s,!0))}function hu(e,t,n,r,i){return Sw(qr(e,t,n,r,i,!0))}function Fc(e){return e?e.__v_isVNode===!0:!1}function Ru(e,t){return e.type===t.type&&e.key===t.key}function a6(e){}const Ew=({key:e})=>e??null,M0=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?io(e)||Fo(e)||vr(e)?{i:Os,r:e,k:t,f:!!n}:e:null);function M(e,t=null,n=null,r=0,i=null,s=e===On?0:1,o=!1,u=!1){const h={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ew(t),ref:t&&M0(t),scopeId:Ig,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Os};return u?(ty(h,n),s&128&&e.normalize(h)):n&&(h.shapeFlag|=io(n)?8:16),Jh>0&&!o&&Na&&(h.patchFlag>0||s&6)&&h.patchFlag!==32&&Na.push(h),h}const qr=l6;function l6(e,t=null,n=null,r=0,i=null,s=!1){if((!e||e===K4)&&(e=xs),Fc(e)){const u=dc(e,t,!0);return n&&ty(u,n),Jh>0&&!s&&Na&&(u.shapeFlag&6?Na[Na.indexOf(e)]=u:Na.push(u)),u.patchFlag=-2,u}if(g6(e)&&(e=e.__vccOpts),t){t=Cw(t);let{class:u,style:h}=t;u&&!io(u)&&(t.class=Yi(u)),Ii(h)&&(Ng(h)&&!qn(h)&&(h=Xi({},h)),t.style=Ya(h))}const o=io(e)?1:tg(e)?128:O4(e)?64:Ii(e)?4:vr(e)?2:0;return M(e,t,n,r,i,o,s,!0)}function Cw(e){return e?Ng(e)||rw(e)?Xi({},e):e:null}function dc(e,t,n=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:u,transition:h}=e,d=t?Pw(i||{},t):i,v={__v_isVNode:!0,__v_skip:!0,type:e.type,props:d,key:d&&Ew(d),ref:t&&t.ref?n&&s?qn(s)?s.concat(M0(t)):[s,M0(t)]:M0(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:u,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==On?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:h,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&dc(e.ssContent),ssFallback:e.ssFallback&&dc(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return h&&r&&Rc(v,h.clone(v)),v}function Mi(e=" ",t=0){return qr(fh,null,e,t)}function Zh(e,t){const n=qr(Wh,null,e);return n.staticCount=t,n}function xn(e="",t=!1){return t?(Je(),hu(xs,null,e)):qr(xs,null,e)}function yl(e){return e==null||typeof e=="boolean"?qr(xs):qn(e)?qr(On,null,e.slice()):Fc(e)?oh(e):qr(fh,null,String(e))}function oh(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:dc(e)}function ty(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(qn(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),ty(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!rw(t)?t._ctx=Os:i===3&&Os&&(Os.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else vr(t)?(t={default:t,_ctx:Os},n=32):(t=String(t),r&64?(n=16,t=[Mi(t)]):n=8);e.children=t,e.shapeFlag|=n}function Pw(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=Yi([t.class,r.class]));else if(i==="style")t.style=Ya([t.style,r.style]);else if(Sp(i)){const s=t[i],o=r[i];o&&s!==o&&!(qn(s)&&s.includes(o))&&(t[i]=s?[].concat(s,o):o)}else i!==""&&(t[i]=r[i])}return t}function ml(e,t,n,r=null){du(e,t,7,[n,r])}const u6=Q4();let c6=0;function Aw(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||u6,s={uid:c6++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new D1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ow(r,i),emitsOptions:bw(r,i),emit:null,emitted:null,propsDefaults:ci,inheritAttrs:r.inheritAttrs,ctx:ci,data:ci,props:ci,attrs:ci,slots:ci,refs:ci,setupState:ci,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=KA.bind(null,s),e.ce&&e.ce(s),s}let Bs=null;const mu=()=>Bs||Os;let ng,Iv;{const e=Ag(),t=(n,r)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};ng=t("__VUE_INSTANCE_SETTERS__",n=>Bs=n),Iv=t("__VUE_SSR_SETTERS__",n=>td=n)}const Qh=e=>{const t=Bs;return ng(e),e.scope.on(),()=>{e.scope.off(),ng(t)}},Rv=()=>{Bs&&Bs.scope.off(),ng(null)};function Mw(e){return e.vnode.shapeFlag&4}let td=!1;function kw(e,t=!1,n=!1){t&&Iv(t);const{props:r,children:i}=e.vnode,s=Mw(e);jA(e,r,s,t),VA(e,i,n);const o=s?h6(e,t):void 0;return t&&Iv(!1),o}function h6(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,kv);const{setup:r}=n;if(r){_h();const i=e.setupContext=r.length>1?Bw(e):null,s=Qh(e),o=ud(r,e,0,[e.props,i]),u=O1(o);if(bh(),s(),(u||e.sp)&&!hh(e)&&W1(e),u){if(o.then(Rv,Rv),t)return o.then(h=>{Fv(e,h,t)}).catch(h=>{of(h,e,0)});e.asyncDep=o}else Fv(e,o,t)}else Tw(e,t)}function Fv(e,t,n){vr(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ii(t)&&(e.setupState=V1(t)),Tw(e,n)}let rg,jv;function f6(e){rg=e,jv=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,yA))}}const d6=()=>!rg;function Tw(e,t,n){const r=e.type;if(!e.render){if(!t&&rg&&!r.render){const i=r.template||J1(e).template;if(i){const{isCustomElement:s,compilerOptions:o}=e.appContext.config,{delimiters:u,compilerOptions:h}=r,d=Xi(Xi({isCustomElement:s,delimiters:u},o),h);r.render=rg(i,d)}}e.render=r.render||cu,jv&&jv(e)}{const i=Qh(e);_h();try{BA(e)}finally{bh(),i()}}}const p6={get(e,t){return Ma(e,"get",""),e[t]}};function Bw(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,p6),slots:e.slots,emit:e.emit,expose:t}}function Ap(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(V1(Dg(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Kd)return Kd[n](e)},has(t,n){return n in t||n in Kd}})):e.proxy}function zv(e,t=!0){return vr(e)?e.displayName||e.name:e.name||t&&e.__name}function g6(e){return vr(e)&&"__vccOpts"in e}const ir=(e,t)=>BP(e,t,td);function $g(e,t,n){const r=arguments.length;return r===2?Ii(t)&&!qn(t)?Fc(t)?qr(e,null,[t]):qr(e,t):qr(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Fc(n)&&(n=[n]),qr(e,t,n))}function m6(){}function v6(e,t,n,r){const i=n[r];if(i&&Ow(i,e))return i;const s=t();return s.memo=e.slice(),s.cacheIndex=r,n[r]=s}function Ow(e,t){const n=e.memo;if(n.length!=t.length)return!1;for(let r=0;r<n.length;r++)if(Xa(n[r],t[r]))return!1;return Jh>0&&Na&&Na.push(e),!0}const Nw="3.5.13",y6=cu,_6=UP,b6=Of,w6=T4,x6={createComponentInstance:Aw,setupComponent:kw,renderComponentRoot:A0,setCurrentRenderingInstance:pp,isVNode:Fc,normalizeVNode:yl,getComponentPublicInstance:Ap,ensureValidVNode:X1,pushWarningContext:RP,popWarningContext:FP},L6=x6,S6=null,E6=null,C6=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Uv;const K2=typeof window<"u"&&window.trustedTypes;if(K2)try{Uv=K2.createPolicy("vue",{createHTML:e=>e})}catch{}const Dw=Uv?e=>Uv.createHTML(e):e=>e,P6="http://www.w3.org/2000/svg",A6="http://www.w3.org/1998/Math/MathML",Bc=typeof document<"u"?document:null,Y2=Bc&&Bc.createElement("template"),M6={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t==="svg"?Bc.createElementNS(P6,e):t==="mathml"?Bc.createElementNS(A6,e):n?Bc.createElement(e,{is:n}):Bc.createElement(e);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>Bc.createTextNode(e),createComment:e=>Bc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Bc.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,s){const o=n?n.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{Y2.innerHTML=Dw(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const u=Y2.content;if(r==="svg"||r==="mathml"){const h=u.firstChild;for(;h.firstChild;)u.appendChild(h.firstChild);u.removeChild(h)}t.insertBefore(u,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Kc="transition",Ld="animation",nd=Symbol("_vtc"),Iw={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Rw=Xi({},q1,Iw),k6=e=>(e.displayName="Transition",e.props=Rw,e),$v=k6((e,{slots:t})=>$g(F4,Fw(e),t)),Oh=(e,t=[])=>{qn(e)?e.forEach(n=>n(...t)):e&&e(...t)},X2=e=>e?qn(e)?e.some(t=>t.length>1):e.length>1:!1;function Fw(e){const t={};for(const D in e)D in Iw||(t[D]=e[D]);if(e.css===!1)return t;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:u=`${n}-enter-to`,appearFromClass:h=s,appearActiveClass:d=o,appearToClass:v=u,leaveFromClass:y=`${n}-leave-from`,leaveActiveClass:x=`${n}-leave-active`,leaveToClass:_=`${n}-leave-to`}=e,P=T6(i),T=P&&P[0],U=P&&P[1],{onBeforeEnter:N,onEnter:j,onEnterCancelled:Z,onLeave:J,onLeaveCancelled:le,onBeforeAppear:he=N,onAppear:Le=j,onAppearCancelled:V=Z}=t,F=(D,k,I,W)=>{D._enterCancelled=W,eh(D,k?v:u),eh(D,k?d:o),I&&I()},Y=(D,k)=>{D._isLeaving=!1,eh(D,y),eh(D,_),eh(D,x),k&&k()},$=D=>(k,I)=>{const W=D?Le:j,G=()=>F(k,D,I);Oh(W,[k,G]),J2(()=>{eh(k,D?h:s),rc(k,D?v:u),X2(W)||Q2(k,r,T,G)})};return Xi(t,{onBeforeEnter(D){Oh(N,[D]),rc(D,s),rc(D,o)},onBeforeAppear(D){Oh(he,[D]),rc(D,h),rc(D,d)},onEnter:$(!1),onAppear:$(!0),onLeave(D,k){D._isLeaving=!0;const I=()=>Y(D,k);rc(D,y),D._enterCancelled?(rc(D,x),Vv()):(Vv(),rc(D,x)),J2(()=>{D._isLeaving&&(eh(D,y),rc(D,_),X2(J)||Q2(D,r,U,I))}),Oh(J,[D,I])},onEnterCancelled(D){F(D,!1,void 0,!0),Oh(Z,[D])},onAppearCancelled(D){F(D,!0,void 0,!0),Oh(V,[D])},onLeaveCancelled(D){Y(D),Oh(le,[D])}})}function T6(e){if(e==null)return null;if(Ii(e))return[Vm(e.enter),Vm(e.leave)];{const t=Vm(e);return[t,t]}}function Vm(e){return Z0(e)}function rc(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[nd]||(e[nd]=new Set)).add(t)}function eh(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const n=e[nd];n&&(n.delete(t),n.size||(e[nd]=void 0))}function J2(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let B6=0;function Q2(e,t,n,r){const i=e._endId=++B6,s=()=>{i===e._endId&&r()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:u,propCount:h}=jw(e,t);if(!o)return r();const d=o+"end";let v=0;const y=()=>{e.removeEventListener(d,x),s()},x=_=>{_.target===e&&++v>=h&&y()};setTimeout(()=>{v<h&&y()},u+1),e.addEventListener(d,x)}function jw(e,t){const n=window.getComputedStyle(e),r=P=>(n[P]||"").split(", "),i=r(`${Kc}Delay`),s=r(`${Kc}Duration`),o=e_(i,s),u=r(`${Ld}Delay`),h=r(`${Ld}Duration`),d=e_(u,h);let v=null,y=0,x=0;t===Kc?o>0&&(v=Kc,y=o,x=s.length):t===Ld?d>0&&(v=Ld,y=d,x=h.length):(y=Math.max(o,d),v=y>0?o>d?Kc:Ld:null,x=v?v===Kc?s.length:h.length:0);const _=v===Kc&&/\b(transform|all)(,|$)/.test(r(`${Kc}Property`).toString());return{type:v,timeout:y,propCount:x,hasTransform:_}}function e_(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,r)=>t_(n)+t_(e[r])))}function t_(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Vv(){return document.body.offsetHeight}function O6(e,t,n){const r=e[nd];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const ig=Symbol("_vod"),zw=Symbol("_vsh"),Zf={beforeMount(e,{value:t},{transition:n}){e[ig]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Sd(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),Sd(e,!0),r.enter(e)):r.leave(e,()=>{Sd(e,!1)}):Sd(e,t))},beforeUnmount(e,{value:t}){Sd(e,t)}};function Sd(e,t){e.style.display=t?e[ig]:"none",e[zw]=!t}function N6(){Zf.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const Uw=Symbol("");function D6(e){const t=mu();if(!t)return;const n=t.ut=(i=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(s=>og(s,i))},r=()=>{const i=e(t.proxy);t.ce?og(t.ce,i):Hv(t.subTree,i),n(i)};Z1(()=>{fp(r)}),Ia(()=>{hs(r,cu,{flush:"post"});const i=new MutationObserver(r);i.observe(t.subTree.el.parentNode,{childList:!0}),wh(()=>i.disconnect())})}function Hv(e,t){if(e.shapeFlag&128){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{Hv(n.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)og(e.el,t);else if(e.type===On)e.children.forEach(n=>Hv(n,t));else if(e.type===Wh){let{el:n,anchor:r}=e;for(;n&&(og(n,t),n!==r);)n=n.nextSibling}}function og(e,t){if(e.nodeType===1){const n=e.style;let r="";for(const i in t)n.setProperty(`--${i}`,t[i]),r+=`--${i}: ${t[i]};`;n[Uw]=r}}const I6=/(^|;)\s*display\s*:/;function R6(e,t,n){const r=e.style,i=io(n);let s=!1;if(n&&!i){if(t)if(io(t))for(const o of t.split(";")){const u=o.slice(0,o.indexOf(":")).trim();n[u]==null&&k0(r,u,"")}else for(const o in t)n[o]==null&&k0(r,o,"");for(const o in n)o==="display"&&(s=!0),k0(r,o,n[o])}else if(i){if(t!==n){const o=r[Uw];o&&(n+=";"+o),r.cssText=n,s=I6.test(n)}}else t&&e.removeAttribute("style");ig in e&&(e[ig]=s?r.display:"",e[zw]&&(r.display="none"))}const n_=/\s*!important$/;function k0(e,t,n){if(qn(n))n.forEach(r=>k0(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=F6(e,t);n_.test(n)?e.setProperty(_l(r),n.replace(n_,""),"important"):e[r]=n}}const r_=["Webkit","Moz","ms"],Hm={};function F6(e,t){const n=Hm[t];if(n)return n;let r=ca(t);if(r!=="filter"&&r in e)return Hm[t]=r;r=Ep(r);for(let i=0;i<r_.length;i++){const s=r_[i]+r;if(s in e)return Hm[t]=s}return t}const i_="http://www.w3.org/1999/xlink";function o_(e,t,n,r,i,s=QC(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(i_,t.slice(6,t.length)):e.setAttributeNS(i_,t,n):n==null||s&&!r4(n)?e.removeAttribute(t):e.setAttribute(t,s?"":zu(n)?String(n):n)}function s_(e,t,n,r,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Dw(n):n);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const u=s==="OPTION"?e.getAttribute("value")||"":e.value,h=n==null?e.type==="checkbox"?"on":"":String(n);(u!==h||!("_value"in e))&&(e.value=h),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const u=typeof e[t];u==="boolean"?n=r4(n):n==null&&u==="string"?(n="",o=!0):u==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(i||t)}function Dc(e,t,n,r){e.addEventListener(t,n,r)}function j6(e,t,n,r){e.removeEventListener(t,n,r)}const a_=Symbol("_vei");function z6(e,t,n,r,i=null){const s=e[a_]||(e[a_]={}),o=s[t];if(r&&o)o.value=r;else{const[u,h]=U6(t);if(r){const d=s[t]=H6(r,i);Dc(e,u,d,h)}else o&&(j6(e,u,o,h),s[t]=void 0)}}const l_=/(?:Once|Passive|Capture)$/;function U6(e){let t;if(l_.test(e)){t={};let r;for(;r=e.match(l_);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):_l(e.slice(2)),t]}let Gm=0;const $6=Promise.resolve(),V6=()=>Gm||($6.then(()=>Gm=0),Gm=Date.now());function H6(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;du(G6(r,n.value),t,5,[r])};return n.value=e,n.attached=V6(),n}function G6(e,t){if(qn(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const u_=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,q6=(e,t,n,r,i,s)=>{const o=i==="svg";t==="class"?O6(e,r,o):t==="style"?R6(e,n,r):Sp(t)?T1(t)||z6(e,t,n,r,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):W6(e,t,r,o))?(s_(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&o_(e,t,r,o,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!io(r))?s_(e,ca(t),r,s,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),o_(e,t,r,o))};function W6(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&u_(t)&&vr(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return u_(t)&&io(n)?!1:t in e}const c_={};/*! #__NO_SIDE_EFFECTS__ */function $w(e,t,n){const r=Ns(e,t);Cg(r)&&Xi(r,t);class i extends Vg{constructor(o){super(r,o,n)}}return i.def=r,i}/*! #__NO_SIDE_EFFECTS__ */const Z6=(e,t)=>$w(e,t,Jw),K6=typeof HTMLElement<"u"?HTMLElement:class{};class Vg extends K6{constructor(t,n={},r=ag){super(),this._def=t,this._props=n,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==ag?this._root=this.shadowRoot:t.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let t=this;for(;t=t&&(t.parentNode||t.host);)if(t instanceof Vg){this._parent=t;break}this._instance||(this._resolved?(this._setParent(),this._update()):t&&t._pendingResolve?this._pendingResolve=t._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(t=this._parent){t&&(this._instance.parent=t._instance,this._instance.provides=t._instance.provides)}disconnectedCallback(){this._connected=!1,qs(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const i of r)this._setAttr(i.attributeName)}),this._ob.observe(this,{attributes:!0});const t=(r,i=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:s,styles:o}=r;let u;if(s&&!qn(s))for(const h in s){const d=s[h];(d===Number||d&&d.type===Number)&&(h in this._props&&(this._props[h]=Z0(this._props[h])),(u||(u=Object.create(null)))[ca(h)]=!0)}this._numberProps=u,i&&this._resolveProps(r),this.shadowRoot&&this._applyStyles(o),this._mount(r)},n=this._def.__asyncLoader;n?this._pendingResolve=n().then(r=>t(this._def=r,!0)):t(this._def)}_mount(t){this._app=this._createApp(t),t.configureApp&&t.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const n=this._instance&&this._instance.exposed;if(n)for(const r in n)Ci(this,r)||Object.defineProperty(this,r,{get:()=>zn(n[r])})}_resolveProps(t){const{props:n}=t,r=qn(n)?n:Object.keys(n||{});for(const i of Object.keys(this))i[0]!=="_"&&r.includes(i)&&this._setProp(i,this[i]);for(const i of r.map(ca))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(s){this._setProp(i,s,!0,!0)}})}_setAttr(t){if(t.startsWith("data-v-"))return;const n=this.hasAttribute(t);let r=n?this.getAttribute(t):c_;const i=ca(t);n&&this._numberProps&&this._numberProps[i]&&(r=Z0(r)),this._setProp(i,r,!1,!0)}_getProp(t){return this._props[t]}_setProp(t,n,r=!0,i=!1){if(n!==this._props[t]&&(n===c_?delete this._props[t]:(this._props[t]=n,t==="key"&&this._app&&(this._app._ceVNode.key=n)),i&&this._instance&&this._update(),r)){const s=this._ob;s&&s.disconnect(),n===!0?this.setAttribute(_l(t),""):typeof n=="string"||typeof n=="number"?this.setAttribute(_l(t),n+""):n||this.removeAttribute(_l(t)),s&&s.observe(this,{attributes:!0})}}_update(){Xw(this._createVNode(),this._root)}_createVNode(){const t={};this.shadowRoot||(t.onVnodeMounted=t.onVnodeUpdated=this._renderSlots.bind(this));const n=qr(this._def,Xi(t,this._props));return this._instance||(n.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const i=(s,o)=>{this.dispatchEvent(new CustomEvent(s,Cg(o[0])?Xi({detail:o},o[0]):{detail:o}))};r.emit=(s,...o)=>{i(s,o),_l(s)!==s&&i(_l(s),o)},this._setParent()}),n}_applyStyles(t,n){if(!t)return;if(n){if(n===this._def||this._styleChildren.has(n))return;this._styleChildren.add(n)}const r=this._nonce;for(let i=t.length-1;i>=0;i--){const s=document.createElement("style");r&&s.setAttribute("nonce",r),s.textContent=t[i],this.shadowRoot.prepend(s)}}_parseSlots(){const t=this._slots={};let n;for(;n=this.firstChild;){const r=n.nodeType===1&&n.getAttribute("slot")||"default";(t[r]||(t[r]=[])).push(n),this.removeChild(n)}}_renderSlots(){const t=(this._teleportTarget||this).querySelectorAll("slot"),n=this._instance.type.__scopeId;for(let r=0;r<t.length;r++){const i=t[r],s=i.getAttribute("name")||"default",o=this._slots[s],u=i.parentNode;if(o)for(const h of o){if(n&&h.nodeType===1){const d=n+"-s",v=document.createTreeWalker(h,1);h.setAttribute(d,"");let y;for(;y=v.nextNode();)y.setAttribute(d,"")}u.insertBefore(h,i)}else for(;i.firstChild;)u.insertBefore(i.firstChild,i);u.removeChild(i)}}_injectChildStyle(t){this._applyStyles(t.styles,t)}_removeChildStyle(t){}}function Vw(e){const t=mu(),n=t&&t.ce;return n||null}function Y6(){const e=Vw();return e&&e.shadowRoot}function X6(e="$style"){{const t=mu();if(!t)return ci;const n=t.type.__cssModules;if(!n)return ci;const r=n[e];return r||ci}}const Hw=new WeakMap,Gw=new WeakMap,sg=Symbol("_moveCb"),h_=Symbol("_enterCb"),J6=e=>(delete e.props.mode,e),Q6=J6({name:"TransitionGroup",props:Xi({},Rw,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=mu(),r=G1();let i,s;return jg(()=>{if(!i.length)return;const o=e.moveClass||`${e.name||"v"}-move`;if(!iM(i[0].el,n.vnode.el,o))return;i.forEach(tM),i.forEach(nM);const u=i.filter(rM);Vv(),u.forEach(h=>{const d=h.el,v=d.style;rc(d,o),v.transform=v.webkitTransform=v.transitionDuration="";const y=d[sg]=x=>{x&&x.target!==d||(!x||/transform$/.test(x.propertyName))&&(d.removeEventListener("transitionend",y),d[sg]=null,eh(d,o))};d.addEventListener("transitionend",y)})}),()=>{const o=ui(e),u=Fw(o);let h=o.tag||On;if(i=[],s)for(let d=0;d<s.length;d++){const v=s[d];v.el&&v.el instanceof Element&&(i.push(v),Rc(v,ed(v,u,r,n)),Hw.set(v,v.el.getBoundingClientRect()))}s=t.default?Rg(t.default()):[];for(let d=0;d<s.length;d++){const v=s[d];v.key!=null&&Rc(v,ed(v,u,r,n))}return qr(h,null,s)}}}),eM=Q6;function tM(e){const t=e.el;t[sg]&&t[sg](),t[h_]&&t[h_]()}function nM(e){Gw.set(e,e.el.getBoundingClientRect())}function rM(e){const t=Hw.get(e),n=Gw.get(e),r=t.left-n.left,i=t.top-n.top;if(r||i){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",e}}function iM(e,t,n){const r=e.cloneNode(),i=e[nd];i&&i.forEach(u=>{u.split(/\s+/).forEach(h=>h&&r.classList.remove(h))}),n.split(/\s+/).forEach(u=>u&&r.classList.add(u)),r.style.display="none";const s=t.nodeType===1?t:t.parentNode;s.appendChild(r);const{hasTransform:o}=jw(r);return s.removeChild(r),o}const mh=e=>{const t=e.props["onUpdate:modelValue"]||!1;return qn(t)?n=>Gf(t,n):t};function oM(e){e.target.composing=!0}function f_(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const fu=Symbol("_assign"),Kr={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e[fu]=mh(i);const s=r||i.props&&i.props.type==="number";Dc(e,t?"change":"input",o=>{if(o.target.composing)return;let u=e.value;n&&(u=u.trim()),s&&(u=W0(u)),e[fu](u)}),n&&Dc(e,"change",()=>{e.value=e.value.trim()}),t||(Dc(e,"compositionstart",oM),Dc(e,"compositionend",f_),Dc(e,"change",f_))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:i,number:s}},o){if(e[fu]=mh(o),e.composing)return;const u=(s||e.type==="number")&&!/^0\d/.test(e.value)?W0(e.value):e.value,h=t??"";u!==h&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||i&&e.value.trim()===h)||(e.value=h))}},Hg={deep:!0,created(e,t,n){e[fu]=mh(n),Dc(e,"change",()=>{const r=e._modelValue,i=rd(e),s=e.checked,o=e[fu];if(qn(r)){const u=Mg(r,i),h=u!==-1;if(s&&!h)o(r.concat(i));else if(!s&&h){const d=[...r];d.splice(u,1),o(d)}}else if(rf(r)){const u=new Set(r);s?u.add(i):u.delete(i),o(u)}else o(qw(e,s))})},mounted:d_,beforeUpdate(e,t,n){e[fu]=mh(n),d_(e,t,n)}};function d_(e,{value:t,oldValue:n},r){e._modelValue=t;let i;if(qn(t))i=Mg(t,r.props.value)>-1;else if(rf(t))i=t.has(r.props.value);else{if(t===n)return;i=ph(t,qw(e,!0))}e.checked!==i&&(e.checked=i)}const ny={created(e,{value:t},n){e.checked=ph(t,n.props.value),e[fu]=mh(n),Dc(e,"change",()=>{e[fu](rd(e))})},beforeUpdate(e,{value:t,oldValue:n},r){e[fu]=mh(r),t!==n&&(e.checked=ph(t,r.props.value))}},Jo={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const i=rf(t);Dc(e,"change",()=>{const s=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?W0(rd(o)):rd(o));e[fu](e.multiple?i?new Set(s):s:s[0]),e._assigning=!0,qs(()=>{e._assigning=!1})}),e[fu]=mh(r)},mounted(e,{value:t}){p_(e,t)},beforeUpdate(e,t,n){e[fu]=mh(n)},updated(e,{value:t}){e._assigning||p_(e,t)}};function p_(e,t){const n=e.multiple,r=qn(t);if(!(n&&!r&&!rf(t))){for(let i=0,s=e.options.length;i<s;i++){const o=e.options[i],u=rd(o);if(n)if(r){const h=typeof u;h==="string"||h==="number"?o.selected=t.some(d=>String(d)===String(u)):o.selected=Mg(t,u)>-1}else o.selected=t.has(u);else if(ph(rd(o),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function rd(e){return"_value"in e?e._value:e.value}function qw(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const ry={created(e,t,n){h0(e,t,n,null,"created")},mounted(e,t,n){h0(e,t,n,null,"mounted")},beforeUpdate(e,t,n,r){h0(e,t,n,r,"beforeUpdate")},updated(e,t,n,r){h0(e,t,n,r,"updated")}};function Ww(e,t){switch(e){case"SELECT":return Jo;case"TEXTAREA":return Kr;default:switch(t){case"checkbox":return Hg;case"radio":return ny;default:return Kr}}}function h0(e,t,n,r,i){const o=Ww(e.tagName,n.props&&n.props.type)[i];o&&o(e,t,n,r)}function sM(){Kr.getSSRProps=({value:e})=>({value:e}),ny.getSSRProps=({value:e},t)=>{if(t.props&&ph(t.props.value,e))return{checked:!0}},Hg.getSSRProps=({value:e},t)=>{if(qn(e)){if(t.props&&Mg(e,t.props.value)>-1)return{checked:!0}}else if(rf(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}},ry.getSSRProps=(e,t)=>{if(typeof t.type!="string")return;const n=Ww(t.type.toUpperCase(),t.props&&t.props.type);if(n.getSSRProps)return n.getSSRProps(e,t)}}const aM=["ctrl","shift","alt","meta"],lM={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>aM.some(n=>e[`${n}Key`]&&!t.includes(n))},ef=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(i,...s)=>{for(let o=0;o<t.length;o++){const u=lM[t[o]];if(u&&u(i,t))return}return e(i,...s)})},uM={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},cM=(e,t)=>{const n=e._withKeys||(e._withKeys={}),r=t.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const s=_l(i.key);if(t.some(o=>o===s||uM[o]===s))return e(i)})},Zw=Xi({patchProp:q6},M6);let Jd,g_=!1;function Kw(){return Jd||(Jd=cw(Zw))}function Yw(){return Jd=g_?Jd:hw(Zw),g_=!0,Jd}const Xw=(...e)=>{Kw().render(...e)},hM=(...e)=>{Yw().hydrate(...e)},ag=(...e)=>{const t=Kw().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=e5(r);if(!i)return;const s=t._component;!vr(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,Qw(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t},Jw=(...e)=>{const t=Yw().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=e5(r);if(i)return n(i,!0,Qw(i))},t};function Qw(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function e5(e){return io(e)?document.querySelector(e):e}let m_=!1;const fM=()=>{m_||(m_=!0,sM(),N6())};/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const dM=()=>{},pM=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:F4,BaseTransitionPropsValidators:q1,Comment:xs,DeprecationTypes:C6,EffectScope:D1,ErrorCodes:zP,ErrorTypeStrings:_6,Fragment:On,KeepAlive:hA,ReactiveEffect:up,Static:Wh,Suspense:t6,Teleport:C0,Text:fh,TrackOpTypes:OP,Transition:$v,TransitionGroup:eM,TriggerOpTypes:NP,VueElement:Vg,assertNumber:jP,callWithAsyncErrorHandling:du,callWithErrorHandling:ud,camelize:ca,capitalize:Ep,cloneVNode:dc,compatUtils:E6,compile:dM,computed:ir,createApp:ag,createBlock:hu,createCommentVNode:xn,createElementBlock:tt,createElementVNode:M,createHydrationRenderer:hw,createPropsRestProxy:kA,createRenderer:cw,createSSRApp:Jw,createSlots:Y4,createStaticVNode:Zh,createTextVNode:Mi,createVNode:qr,customRef:L4,defineAsyncComponent:uA,defineComponent:Ns,defineCustomElement:$w,defineEmits:bA,defineExpose:wA,defineModel:SA,defineOptions:xA,defineProps:_A,defineSSRCustomElement:Z6,defineSlots:LA,devtools:b6,effect:nP,effectScope:I1,getCurrentInstance:mu,getCurrentScope:R1,getCurrentWatcher:DP,getTransitionRawChildren:Rg,guardReactiveProps:Cw,h:$g,handleError:of,hasInjectionContext:ew,hydrate:hM,hydrateOnIdle:rA,hydrateOnInteraction:aA,hydrateOnMediaQuery:sA,hydrateOnVisible:oA,initCustomFormatter:m6,initDirectivesForSSR:fM,inject:Hl,isMemoSame:Ow,isProxy:Ng,isReactive:cc,isReadonly:gh,isRef:Fo,isRuntimeOnly:d6,isShallow:Vl,isVNode:Fc,markRaw:Dg,mergeDefaults:AA,mergeModels:MA,mergeProps:Pw,nextTick:qs,normalizeClass:Yi,normalizeProps:XC,normalizeStyle:Ya,onActivated:z4,onBeforeMount:V4,onBeforeUnmount:cd,onBeforeUpdate:Z1,onDeactivated:U4,onErrorCaptured:W4,onMounted:Ia,onRenderTracked:q4,onRenderTriggered:G4,onScopeDispose:s4,onServerPrefetch:H4,onUnmounted:wh,onUpdated:jg,onWatcherCleanup:C4,openBlock:Je,popScopeId:GP,provide:Yd,proxyRefs:V1,pushScopeId:HP,queuePostFlushCb:fp,reactive:gu,readonly:Nu,ref:Gt,registerRuntimeCompiler:f6,render:Xw,renderList:Sr,renderSlot:mA,resolveComponent:Z4,resolveDirective:gA,resolveDynamicComponent:pA,resolveFilter:S6,resolveTransitionHooks:ed,setBlockTracking:Dv,setDevtoolsHook:w6,setTransitionHooks:Rc,shallowReactive:U1,shallowReadonly:xP,shallowRef:$1,ssrContextKey:gw,ssrUtils:L6,stop:rP,toDisplayString:Zt,toHandlerKey:Gd,toHandlers:vA,toRaw:ui,toRef:kP,toRefs:S4,toValue:EP,transformVNodeArgs:a6,triggerRef:SP,unref:zn,useAttrs:PA,useCssModule:X6,useCssVars:D6,useHost:Vw,useId:KP,useModel:ZA,useSSRContext:mw,useShadowRoot:Y6,useSlots:CA,useTemplateRef:YP,useTransitionState:G1,vModelCheckbox:Hg,vModelDynamic:ry,vModelRadio:ny,vModelSelect:Jo,vModelText:Kr,vShow:Zf,version:Nw,warn:y6,watch:hs,watchEffect:vp,watchPostEffect:qA,watchSyncEffect:vw,withAsyncContext:TA,withCtx:Ul,withDefaults:EA,withDirectives:Zn,withKeys:cM,withMemo:v6,withModifiers:ef,withScopeId:qP},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let t5;const Gg=e=>t5=e,n5=Symbol();function Gv(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Qd;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Qd||(Qd={}));function gM(){const e=I1(!0),t=e.run(()=>Gt({}));let n=[],r=[];const i=Dg({install(s){Gg(i),i._a=s,s.provide(n5,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return this._a?n.push(s):r.push(s),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}const r5=()=>{};function v_(e,t,n,r=r5){e.push(t);const i=()=>{const s=e.indexOf(t);s>-1&&(e.splice(s,1),r())};return!n&&R1()&&s4(i),i}function Ef(e,...t){e.slice().forEach(n=>{n(...t)})}const mM=e=>e(),y_=Symbol(),qm=Symbol();function qv(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,r)=>e.set(r,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],i=e[n];Gv(i)&&Gv(r)&&e.hasOwnProperty(n)&&!Fo(r)&&!cc(r)?e[n]=qv(i,r):e[n]=r}return e}const vM=Symbol();function yM(e){return!Gv(e)||!e.hasOwnProperty(vM)}const{assign:th}=Object;function _M(e){return!!(Fo(e)&&e.effect)}function bM(e,t,n,r){const{state:i,actions:s,getters:o}=t,u=n.state.value[e];let h;function d(){u||(n.state.value[e]=i?i():{});const v=S4(n.state.value[e]);return th(v,s,Object.keys(o||{}).reduce((y,x)=>(y[x]=Dg(ir(()=>{Gg(n);const _=n._s.get(e);return o[x].call(_,_)})),y),{}))}return h=i5(e,d,t,n,r,!0),h}function i5(e,t,n={},r,i,s){let o;const u=th({actions:{}},n),h={deep:!0};let d,v,y=[],x=[],_;const P=r.state.value[e];!s&&!P&&(r.state.value[e]={}),Gt({});let T;function U(V){let F;d=v=!1,typeof V=="function"?(V(r.state.value[e]),F={type:Qd.patchFunction,storeId:e,events:_}):(qv(r.state.value[e],V),F={type:Qd.patchObject,payload:V,storeId:e,events:_});const Y=T=Symbol();qs().then(()=>{T===Y&&(d=!0)}),v=!0,Ef(y,F,r.state.value[e])}const N=s?function(){const{state:F}=n,Y=F?F():{};this.$patch($=>{th($,Y)})}:r5;function j(){o.stop(),y=[],x=[],r._s.delete(e)}const Z=(V,F="")=>{if(y_ in V)return V[qm]=F,V;const Y=function(){Gg(r);const $=Array.from(arguments),D=[],k=[];function I(K){D.push(K)}function W(K){k.push(K)}Ef(x,{args:$,name:Y[qm],store:le,after:I,onError:W});let G;try{G=V.apply(this&&this.$id===e?this:le,$)}catch(K){throw Ef(k,K),K}return G instanceof Promise?G.then(K=>(Ef(D,K),K)).catch(K=>(Ef(k,K),Promise.reject(K))):(Ef(D,G),G)};return Y[y_]=!0,Y[qm]=F,Y},J={_p:r,$id:e,$onAction:v_.bind(null,x),$patch:U,$reset:N,$subscribe(V,F={}){const Y=v_(y,V,F.detached,()=>$()),$=o.run(()=>hs(()=>r.state.value[e],D=>{(F.flush==="sync"?v:d)&&V({storeId:e,type:Qd.direct,events:_},D)},th({},h,F)));return Y},$dispose:j},le=gu(J);r._s.set(e,le);const Le=(r._a&&r._a.runWithContext||mM)(()=>r._e.run(()=>(o=I1()).run(()=>t({action:Z}))));for(const V in Le){const F=Le[V];if(Fo(F)&&!_M(F)||cc(F))s||(P&&yM(F)&&(Fo(F)?F.value=P[V]:qv(F,P[V])),r.state.value[e][V]=F);else if(typeof F=="function"){const Y=Z(F,V);Le[V]=Y,u.actions[V]=F}}return th(le,Le),th(ui(le),Le),Object.defineProperty(le,"$state",{get:()=>r.state.value[e],set:V=>{U(F=>{th(F,V)})}}),r._p.forEach(V=>{th(le,o.run(()=>V({store:le,app:r._a,pinia:r,options:u})))}),P&&s&&n.hydrate&&n.hydrate(le.$state,P),d=!0,v=!0,le}/*! #__NO_SIDE_EFFECTS__ */function Mp(e,t,n){let r,i;const s=typeof t=="function";typeof e=="string"?(r=e,i=s?n:t):(i=e,r=e.id);function o(u,h){const d=ew();return u=u||(d?Hl(n5,null):null),u&&Gg(u),u=t5,u._s.has(r)||(s?i5(r,t,i,u):bM(r,i,u)),u._s.get(r)}return o.$id=r,o}function o5(e,t){return function(){return e.apply(t,arguments)}}const{toString:wM}=Object.prototype,{getPrototypeOf:iy}=Object,qg=(e=>t=>{const n=wM.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Vu=e=>(e=e.toLowerCase(),t=>qg(t)===e),Wg=e=>t=>typeof t===e,{isArray:hd}=Array,_p=Wg("undefined");function xM(e){return e!==null&&!_p(e)&&e.constructor!==null&&!_p(e.constructor)&&Gl(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const s5=Vu("ArrayBuffer");function LM(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&s5(e.buffer),t}const SM=Wg("string"),Gl=Wg("function"),a5=Wg("number"),Zg=e=>e!==null&&typeof e=="object",EM=e=>e===!0||e===!1,T0=e=>{if(qg(e)!=="object")return!1;const t=iy(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},CM=Vu("Date"),PM=Vu("File"),AM=Vu("Blob"),MM=Vu("FileList"),kM=e=>Zg(e)&&Gl(e.pipe),TM=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Gl(e.append)&&((t=qg(e))==="formdata"||t==="object"&&Gl(e.toString)&&e.toString()==="[object FormData]"))},BM=Vu("URLSearchParams"),[OM,NM,DM,IM]=["ReadableStream","Request","Response","Headers"].map(Vu),RM=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function kp(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),hd(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const s=n?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;let u;for(r=0;r<o;r++)u=s[r],t.call(null,e[u],u,e)}}function l5(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const Uh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,u5=e=>!_p(e)&&e!==Uh;function Wv(){const{caseless:e}=u5(this)&&this||{},t={},n=(r,i)=>{const s=e&&l5(t,i)||i;T0(t[s])&&T0(r)?t[s]=Wv(t[s],r):T0(r)?t[s]=Wv({},r):hd(r)?t[s]=r.slice():t[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&kp(arguments[r],n);return t}const FM=(e,t,n,{allOwnKeys:r}={})=>(kp(t,(i,s)=>{n&&Gl(i)?e[s]=o5(i,n):e[s]=i},{allOwnKeys:r}),e),jM=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),zM=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},UM=(e,t,n,r)=>{let i,s,o;const u={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],(!r||r(o,e,t))&&!u[o]&&(t[o]=e[o],u[o]=!0);e=n!==!1&&iy(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},$M=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},VM=e=>{if(!e)return null;if(hd(e))return e;let t=e.length;if(!a5(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},HM=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&iy(Uint8Array)),GM=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=r.next())&&!i.done;){const s=i.value;t.call(e,s[0],s[1])}},qM=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},WM=Vu("HTMLFormElement"),ZM=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),__=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),KM=Vu("RegExp"),c5=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};kp(n,(i,s)=>{let o;(o=t(i,s,e))!==!1&&(r[s]=o||i)}),Object.defineProperties(e,r)},YM=e=>{c5(e,(t,n)=>{if(Gl(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Gl(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},XM=(e,t)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return hd(e)?r(e):r(String(e).split(t)),n},JM=()=>{},QM=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function ek(e){return!!(e&&Gl(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const tk=e=>{const t=new Array(10),n=(r,i)=>{if(Zg(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[i]=r;const s=hd(r)?[]:{};return kp(r,(o,u)=>{const h=n(o,i+1);!_p(h)&&(s[u]=h)}),t[i]=void 0,s}}return r};return n(e,0)},nk=Vu("AsyncFunction"),rk=e=>e&&(Zg(e)||Gl(e))&&Gl(e.then)&&Gl(e.catch),h5=((e,t)=>e?setImmediate:t?((n,r)=>(Uh.addEventListener("message",({source:i,data:s})=>{i===Uh&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Uh.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Gl(Uh.postMessage)),ik=typeof queueMicrotask<"u"?queueMicrotask.bind(Uh):typeof process<"u"&&process.nextTick||h5,Wt={isArray:hd,isArrayBuffer:s5,isBuffer:xM,isFormData:TM,isArrayBufferView:LM,isString:SM,isNumber:a5,isBoolean:EM,isObject:Zg,isPlainObject:T0,isReadableStream:OM,isRequest:NM,isResponse:DM,isHeaders:IM,isUndefined:_p,isDate:CM,isFile:PM,isBlob:AM,isRegExp:KM,isFunction:Gl,isStream:kM,isURLSearchParams:BM,isTypedArray:HM,isFileList:MM,forEach:kp,merge:Wv,extend:FM,trim:RM,stripBOM:jM,inherits:zM,toFlatObject:UM,kindOf:qg,kindOfTest:Vu,endsWith:$M,toArray:VM,forEachEntry:GM,matchAll:qM,isHTMLForm:WM,hasOwnProperty:__,hasOwnProp:__,reduceDescriptors:c5,freezeMethods:YM,toObjectSet:XM,toCamelCase:ZM,noop:JM,toFiniteNumber:QM,findKey:l5,global:Uh,isContextDefined:u5,isSpecCompliantForm:ek,toJSONObject:tk,isAsyncFn:nk,isThenable:rk,setImmediate:h5,asap:ik};function Ur(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Wt.inherits(Ur,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Wt.toJSONObject(this.config),code:this.code,status:this.status}}});const f5=Ur.prototype,d5={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{d5[e]={value:e}});Object.defineProperties(Ur,d5);Object.defineProperty(f5,"isAxiosError",{value:!0});Ur.from=(e,t,n,r,i,s)=>{const o=Object.create(f5);return Wt.toFlatObject(e,o,function(h){return h!==Error.prototype},u=>u!=="isAxiosError"),Ur.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const ok=null;function Zv(e){return Wt.isPlainObject(e)||Wt.isArray(e)}function p5(e){return Wt.endsWith(e,"[]")?e.slice(0,-2):e}function b_(e,t,n){return e?e.concat(t).map(function(i,s){return i=p5(i),!n&&s?"["+i+"]":i}).join(n?".":""):t}function sk(e){return Wt.isArray(e)&&!e.some(Zv)}const ak=Wt.toFlatObject(Wt,{},null,function(t){return/^is[A-Z]/.test(t)});function Kg(e,t,n){if(!Wt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Wt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,U){return!Wt.isUndefined(U[T])});const r=n.metaTokens,i=n.visitor||v,s=n.dots,o=n.indexes,h=(n.Blob||typeof Blob<"u"&&Blob)&&Wt.isSpecCompliantForm(t);if(!Wt.isFunction(i))throw new TypeError("visitor must be a function");function d(P){if(P===null)return"";if(Wt.isDate(P))return P.toISOString();if(!h&&Wt.isBlob(P))throw new Ur("Blob is not supported. Use a Buffer instead.");return Wt.isArrayBuffer(P)||Wt.isTypedArray(P)?h&&typeof Blob=="function"?new Blob([P]):Buffer.from(P):P}function v(P,T,U){let N=P;if(P&&!U&&typeof P=="object"){if(Wt.endsWith(T,"{}"))T=r?T:T.slice(0,-2),P=JSON.stringify(P);else if(Wt.isArray(P)&&sk(P)||(Wt.isFileList(P)||Wt.endsWith(T,"[]"))&&(N=Wt.toArray(P)))return T=p5(T),N.forEach(function(Z,J){!(Wt.isUndefined(Z)||Z===null)&&t.append(o===!0?b_([T],J,s):o===null?T:T+"[]",d(Z))}),!1}return Zv(P)?!0:(t.append(b_(U,T,s),d(P)),!1)}const y=[],x=Object.assign(ak,{defaultVisitor:v,convertValue:d,isVisitable:Zv});function _(P,T){if(!Wt.isUndefined(P)){if(y.indexOf(P)!==-1)throw Error("Circular reference detected in "+T.join("."));y.push(P),Wt.forEach(P,function(N,j){(!(Wt.isUndefined(N)||N===null)&&i.call(t,N,Wt.isString(j)?j.trim():j,T,x))===!0&&_(N,T?T.concat(j):[j])}),y.pop()}}if(!Wt.isObject(e))throw new TypeError("data must be an object");return _(e),t}function w_(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function oy(e,t){this._pairs=[],e&&Kg(e,this,t)}const g5=oy.prototype;g5.append=function(t,n){this._pairs.push([t,n])};g5.toString=function(t){const n=t?function(r){return t.call(this,r,w_)}:w_;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function lk(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function m5(e,t,n){if(!t)return e;const r=n&&n.encode||lk;Wt.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(t,n):s=Wt.isURLSearchParams(t)?t.toString():new oy(t,n).toString(r),s){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class x_{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Wt.forEach(this.handlers,function(r){r!==null&&t(r)})}}const v5={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},uk=typeof URLSearchParams<"u"?URLSearchParams:oy,ck=typeof FormData<"u"?FormData:null,hk=typeof Blob<"u"?Blob:null,fk={isBrowser:!0,classes:{URLSearchParams:uk,FormData:ck,Blob:hk},protocols:["http","https","file","blob","url","data"]},sy=typeof window<"u"&&typeof document<"u",Kv=typeof navigator=="object"&&navigator||void 0,dk=sy&&(!Kv||["ReactNative","NativeScript","NS"].indexOf(Kv.product)<0),pk=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",gk=sy&&window.location.href||"http://localhost",mk=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:sy,hasStandardBrowserEnv:dk,hasStandardBrowserWebWorkerEnv:pk,navigator:Kv,origin:gk},Symbol.toStringTag,{value:"Module"})),Ta={...mk,...fk};function vk(e,t){return Kg(e,new Ta.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Ta.isNode&&Wt.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function yk(e){return Wt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function _k(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}function y5(e){function t(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const u=Number.isFinite(+o),h=s>=n.length;return o=!o&&Wt.isArray(i)?i.length:o,h?(Wt.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!u):((!i[o]||!Wt.isObject(i[o]))&&(i[o]=[]),t(n,r,i[o],s)&&Wt.isArray(i[o])&&(i[o]=_k(i[o])),!u)}if(Wt.isFormData(e)&&Wt.isFunction(e.entries)){const n={};return Wt.forEachEntry(e,(r,i)=>{t(yk(r),i,n,0)}),n}return null}function bk(e,t,n){if(Wt.isString(e))try{return(t||JSON.parse)(e),Wt.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Tp={transitional:v5,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Wt.isObject(t);if(s&&Wt.isHTMLForm(t)&&(t=new FormData(t)),Wt.isFormData(t))return i?JSON.stringify(y5(t)):t;if(Wt.isArrayBuffer(t)||Wt.isBuffer(t)||Wt.isStream(t)||Wt.isFile(t)||Wt.isBlob(t)||Wt.isReadableStream(t))return t;if(Wt.isArrayBufferView(t))return t.buffer;if(Wt.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let u;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return vk(t,this.formSerializer).toString();if((u=Wt.isFileList(t))||r.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return Kg(u?{"files[]":t}:t,h&&new h,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),bk(t)):t}],transformResponse:[function(t){const n=this.transitional||Tp.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Wt.isResponse(t)||Wt.isReadableStream(t))return t;if(t&&Wt.isString(t)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(u){if(o)throw u.name==="SyntaxError"?Ur.from(u,Ur.ERR_BAD_RESPONSE,this,null,this.response):u}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ta.classes.FormData,Blob:Ta.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Wt.forEach(["delete","get","head","post","put","patch"],e=>{Tp.headers[e]={}});const wk=Wt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),xk=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||t[n]&&wk[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},L_=Symbol("internals");function Ed(e){return e&&String(e).trim().toLowerCase()}function B0(e){return e===!1||e==null?e:Wt.isArray(e)?e.map(B0):String(e)}function Lk(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const Sk=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Wm(e,t,n,r,i){if(Wt.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!Wt.isString(t)){if(Wt.isString(r))return t.indexOf(r)!==-1;if(Wt.isRegExp(r))return r.test(t)}}function Ek(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function Ck(e,t){const n=Wt.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,s,o){return this[r].call(this,t,i,s,o)},configurable:!0})})}let bl=class{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function s(u,h,d){const v=Ed(h);if(!v)throw new Error("header name must be a non-empty string");const y=Wt.findKey(i,v);(!y||i[y]===void 0||d===!0||d===void 0&&i[y]!==!1)&&(i[y||h]=B0(u))}const o=(u,h)=>Wt.forEach(u,(d,v)=>s(d,v,h));if(Wt.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(Wt.isString(t)&&(t=t.trim())&&!Sk(t))o(xk(t),n);else if(Wt.isHeaders(t))for(const[u,h]of t.entries())s(h,u,r);else t!=null&&s(n,t,r);return this}get(t,n){if(t=Ed(t),t){const r=Wt.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return Lk(i);if(Wt.isFunction(n))return n.call(this,i,r);if(Wt.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Ed(t),t){const r=Wt.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Wm(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function s(o){if(o=Ed(o),o){const u=Wt.findKey(r,o);u&&(!n||Wm(r,r[u],u,n))&&(delete r[u],i=!0)}}return Wt.isArray(t)?t.forEach(s):s(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!t||Wm(this,this[s],s,t,!0))&&(delete this[s],i=!0)}return i}normalize(t){const n=this,r={};return Wt.forEach(this,(i,s)=>{const o=Wt.findKey(r,s);if(o){n[o]=B0(i),delete n[s];return}const u=t?Ek(s):String(s).trim();u!==s&&delete n[s],n[u]=B0(i),r[u]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Wt.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&Wt.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[L_]=this[L_]={accessors:{}}).accessors,i=this.prototype;function s(o){const u=Ed(o);r[u]||(Ck(i,o),r[u]=!0)}return Wt.isArray(t)?t.forEach(s):s(t),this}};bl.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Wt.reduceDescriptors(bl.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});Wt.freezeMethods(bl);function Zm(e,t){const n=this||Tp,r=t||n,i=bl.from(r.headers);let s=r.data;return Wt.forEach(e,function(u){s=u.call(n,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function _5(e){return!!(e&&e.__CANCEL__)}function fd(e,t,n){Ur.call(this,e??"canceled",Ur.ERR_CANCELED,t,n),this.name="CanceledError"}Wt.inherits(fd,Ur,{__CANCEL__:!0});function b5(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new Ur("Request failed with status code "+n.status,[Ur.ERR_BAD_REQUEST,Ur.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Pk(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Ak(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,s=0,o;return t=t!==void 0?t:1e3,function(h){const d=Date.now(),v=r[s];o||(o=d),n[i]=h,r[i]=d;let y=s,x=0;for(;y!==i;)x+=n[y++],y=y%e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),d-o<t)return;const _=v&&d-v;return _?Math.round(x*1e3/_):void 0}}function Mk(e,t){let n=0,r=1e3/t,i,s;const o=(d,v=Date.now())=>{n=v,i=null,s&&(clearTimeout(s),s=null),e.apply(null,d)};return[(...d)=>{const v=Date.now(),y=v-n;y>=r?o(d,v):(i=d,s||(s=setTimeout(()=>{s=null,o(i)},r-y)))},()=>i&&o(i)]}const lg=(e,t,n=3)=>{let r=0;const i=Ak(50,250);return Mk(s=>{const o=s.loaded,u=s.lengthComputable?s.total:void 0,h=o-r,d=i(h),v=o<=u;r=o;const y={loaded:o,total:u,progress:u?o/u:void 0,bytes:h,rate:d||void 0,estimated:d&&u&&v?(u-o)/d:void 0,event:s,lengthComputable:u!=null,[t?"download":"upload"]:!0};e(y)},n)},S_=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},E_=e=>(...t)=>Wt.asap(()=>e(...t)),kk=Ta.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Ta.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Ta.origin),Ta.navigator&&/(msie|trident)/i.test(Ta.navigator.userAgent)):()=>!0,Tk=Ta.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const o=[e+"="+encodeURIComponent(t)];Wt.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Wt.isString(r)&&o.push("path="+r),Wt.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Bk(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Ok(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function w5(e,t,n){let r=!Bk(t);return e&&(r||n==!1)?Ok(e,t):t}const C_=e=>e instanceof bl?{...e}:e;function tf(e,t){t=t||{};const n={};function r(d,v,y,x){return Wt.isPlainObject(d)&&Wt.isPlainObject(v)?Wt.merge.call({caseless:x},d,v):Wt.isPlainObject(v)?Wt.merge({},v):Wt.isArray(v)?v.slice():v}function i(d,v,y,x){if(Wt.isUndefined(v)){if(!Wt.isUndefined(d))return r(void 0,d,y,x)}else return r(d,v,y,x)}function s(d,v){if(!Wt.isUndefined(v))return r(void 0,v)}function o(d,v){if(Wt.isUndefined(v)){if(!Wt.isUndefined(d))return r(void 0,d)}else return r(void 0,v)}function u(d,v,y){if(y in t)return r(d,v);if(y in e)return r(void 0,d)}const h={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u,headers:(d,v,y)=>i(C_(d),C_(v),y,!0)};return Wt.forEach(Object.keys(Object.assign({},e,t)),function(v){const y=h[v]||i,x=y(e[v],t[v],v);Wt.isUndefined(x)&&y!==u||(n[v]=x)}),n}const x5=e=>{const t=tf({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:u}=t;t.headers=o=bl.from(o),t.url=m5(w5(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),u&&o.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let h;if(Wt.isFormData(n)){if(Ta.hasStandardBrowserEnv||Ta.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((h=o.getContentType())!==!1){const[d,...v]=h?h.split(";").map(y=>y.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...v].join("; "))}}if(Ta.hasStandardBrowserEnv&&(r&&Wt.isFunction(r)&&(r=r(t)),r||r!==!1&&kk(t.url))){const d=i&&s&&Tk.read(s);d&&o.set(i,d)}return t},Nk=typeof XMLHttpRequest<"u",Dk=Nk&&function(e){return new Promise(function(n,r){const i=x5(e);let s=i.data;const o=bl.from(i.headers).normalize();let{responseType:u,onUploadProgress:h,onDownloadProgress:d}=i,v,y,x,_,P;function T(){_&&_(),P&&P(),i.cancelToken&&i.cancelToken.unsubscribe(v),i.signal&&i.signal.removeEventListener("abort",v)}let U=new XMLHttpRequest;U.open(i.method.toUpperCase(),i.url,!0),U.timeout=i.timeout;function N(){if(!U)return;const Z=bl.from("getAllResponseHeaders"in U&&U.getAllResponseHeaders()),le={data:!u||u==="text"||u==="json"?U.responseText:U.response,status:U.status,statusText:U.statusText,headers:Z,config:e,request:U};b5(function(Le){n(Le),T()},function(Le){r(Le),T()},le),U=null}"onloadend"in U?U.onloadend=N:U.onreadystatechange=function(){!U||U.readyState!==4||U.status===0&&!(U.responseURL&&U.responseURL.indexOf("file:")===0)||setTimeout(N)},U.onabort=function(){U&&(r(new Ur("Request aborted",Ur.ECONNABORTED,e,U)),U=null)},U.onerror=function(){r(new Ur("Network Error",Ur.ERR_NETWORK,e,U)),U=null},U.ontimeout=function(){let J=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const le=i.transitional||v5;i.timeoutErrorMessage&&(J=i.timeoutErrorMessage),r(new Ur(J,le.clarifyTimeoutError?Ur.ETIMEDOUT:Ur.ECONNABORTED,e,U)),U=null},s===void 0&&o.setContentType(null),"setRequestHeader"in U&&Wt.forEach(o.toJSON(),function(J,le){U.setRequestHeader(le,J)}),Wt.isUndefined(i.withCredentials)||(U.withCredentials=!!i.withCredentials),u&&u!=="json"&&(U.responseType=i.responseType),d&&([x,P]=lg(d,!0),U.addEventListener("progress",x)),h&&U.upload&&([y,_]=lg(h),U.upload.addEventListener("progress",y),U.upload.addEventListener("loadend",_)),(i.cancelToken||i.signal)&&(v=Z=>{U&&(r(!Z||Z.type?new fd(null,e,U):Z),U.abort(),U=null)},i.cancelToken&&i.cancelToken.subscribe(v),i.signal&&(i.signal.aborted?v():i.signal.addEventListener("abort",v)));const j=Pk(i.url);if(j&&Ta.protocols.indexOf(j)===-1){r(new Ur("Unsupported protocol "+j+":",Ur.ERR_BAD_REQUEST,e));return}U.send(s||null)})},Ik=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,i;const s=function(d){if(!i){i=!0,u();const v=d instanceof Error?d:this.reason;r.abort(v instanceof Ur?v:new fd(v instanceof Error?v.message:v))}};let o=t&&setTimeout(()=>{o=null,s(new Ur(`timeout ${t} of ms exceeded`,Ur.ETIMEDOUT))},t);const u=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(s):d.removeEventListener("abort",s)}),e=null)};e.forEach(d=>d.addEventListener("abort",s));const{signal:h}=r;return h.unsubscribe=()=>Wt.asap(u),h}},Rk=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},Fk=async function*(e,t){for await(const n of jk(e))yield*Rk(n,t)},jk=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},P_=(e,t,n,r)=>{const i=Fk(e,t);let s=0,o,u=h=>{o||(o=!0,r&&r(h))};return new ReadableStream({async pull(h){try{const{done:d,value:v}=await i.next();if(d){u(),h.close();return}let y=v.byteLength;if(n){let x=s+=y;n(x)}h.enqueue(new Uint8Array(v))}catch(d){throw u(d),d}},cancel(h){return u(h),i.return()}},{highWaterMark:2})},Yg=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",L5=Yg&&typeof ReadableStream=="function",zk=Yg&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),S5=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Uk=L5&&S5(()=>{let e=!1;const t=new Request(Ta.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),A_=64*1024,Yv=L5&&S5(()=>Wt.isReadableStream(new Response("").body)),ug={stream:Yv&&(e=>e.body)};Yg&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!ug[t]&&(ug[t]=Wt.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new Ur(`Response type '${t}' is not supported`,Ur.ERR_NOT_SUPPORT,r)})})})(new Response);const $k=async e=>{if(e==null)return 0;if(Wt.isBlob(e))return e.size;if(Wt.isSpecCompliantForm(e))return(await new Request(Ta.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Wt.isArrayBufferView(e)||Wt.isArrayBuffer(e))return e.byteLength;if(Wt.isURLSearchParams(e)&&(e=e+""),Wt.isString(e))return(await zk(e)).byteLength},Vk=async(e,t)=>{const n=Wt.toFiniteNumber(e.getContentLength());return n??$k(t)},Hk=Yg&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:u,onUploadProgress:h,responseType:d,headers:v,withCredentials:y="same-origin",fetchOptions:x}=x5(e);d=d?(d+"").toLowerCase():"text";let _=Ik([i,s&&s.toAbortSignal()],o),P;const T=_&&_.unsubscribe&&(()=>{_.unsubscribe()});let U;try{if(h&&Uk&&n!=="get"&&n!=="head"&&(U=await Vk(v,r))!==0){let le=new Request(t,{method:"POST",body:r,duplex:"half"}),he;if(Wt.isFormData(r)&&(he=le.headers.get("content-type"))&&v.setContentType(he),le.body){const[Le,V]=S_(U,lg(E_(h)));r=P_(le.body,A_,Le,V)}}Wt.isString(y)||(y=y?"include":"omit");const N="credentials"in Request.prototype;P=new Request(t,{...x,signal:_,method:n.toUpperCase(),headers:v.normalize().toJSON(),body:r,duplex:"half",credentials:N?y:void 0});let j=await fetch(P);const Z=Yv&&(d==="stream"||d==="response");if(Yv&&(u||Z&&T)){const le={};["status","statusText","headers"].forEach(F=>{le[F]=j[F]});const he=Wt.toFiniteNumber(j.headers.get("content-length")),[Le,V]=u&&S_(he,lg(E_(u),!0))||[];j=new Response(P_(j.body,A_,Le,()=>{V&&V(),T&&T()}),le)}d=d||"text";let J=await ug[Wt.findKey(ug,d)||"text"](j,e);return!Z&&T&&T(),await new Promise((le,he)=>{b5(le,he,{data:J,headers:bl.from(j.headers),status:j.status,statusText:j.statusText,config:e,request:P})})}catch(N){throw T&&T(),N&&N.name==="TypeError"&&/fetch/i.test(N.message)?Object.assign(new Ur("Network Error",Ur.ERR_NETWORK,e,P),{cause:N.cause||N}):Ur.from(N,N&&N.code,e,P)}}),Xv={http:ok,xhr:Dk,fetch:Hk};Wt.forEach(Xv,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const M_=e=>`- ${e}`,Gk=e=>Wt.isFunction(e)||e===null||e===!1,E5={getAdapter:e=>{e=Wt.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){n=e[s];let o;if(r=n,!Gk(n)&&(r=Xv[(o=String(n)).toLowerCase()],r===void 0))throw new Ur(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([u,h])=>`adapter ${u} `+(h===!1?"is not supported by the environment":"is not available in the build"));let o=t?s.length>1?`since :
`+s.map(M_).join(`
`):" "+M_(s[0]):"as no adapter specified";throw new Ur("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Xv};function Km(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new fd(null,e)}function k_(e){return Km(e),e.headers=bl.from(e.headers),e.data=Zm.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),E5.getAdapter(e.adapter||Tp.adapter)(e).then(function(r){return Km(e),r.data=Zm.call(e,e.transformResponse,r),r.headers=bl.from(r.headers),r},function(r){return _5(r)||(Km(e),r&&r.response&&(r.response.data=Zm.call(e,e.transformResponse,r.response),r.response.headers=bl.from(r.response.headers))),Promise.reject(r)})}const C5="1.8.4",Xg={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Xg[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const T_={};Xg.transitional=function(t,n,r){function i(s,o){return"[Axios v"+C5+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,u)=>{if(t===!1)throw new Ur(i(o," has been removed"+(n?" in "+n:"")),Ur.ERR_DEPRECATED);return n&&!T_[o]&&(T_[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,o,u):!0}};Xg.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function qk(e,t,n){if(typeof e!="object")throw new Ur("options must be an object",Ur.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=t[s];if(o){const u=e[s],h=u===void 0||o(u,s,e);if(h!==!0)throw new Ur("option "+s+" must be "+h,Ur.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ur("Unknown option "+s,Ur.ERR_BAD_OPTION)}}const O0={assertOptions:qk,validators:Xg},tc=O0.validators;let Kh=class{constructor(t){this.defaults=t,this.interceptors={request:new x_,response:new x_}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=tf(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&O0.assertOptions(r,{silentJSONParsing:tc.transitional(tc.boolean),forcedJSONParsing:tc.transitional(tc.boolean),clarifyTimeoutError:tc.transitional(tc.boolean)},!1),i!=null&&(Wt.isFunction(i)?n.paramsSerializer={serialize:i}:O0.assertOptions(i,{encode:tc.function,serialize:tc.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),O0.assertOptions(n,{baseUrl:tc.spelling("baseURL"),withXsrfToken:tc.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Wt.merge(s.common,s[n.method]);s&&Wt.forEach(["delete","get","head","post","put","patch","common"],P=>{delete s[P]}),n.headers=bl.concat(o,s);const u=[];let h=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(n)===!1||(h=h&&T.synchronous,u.unshift(T.fulfilled,T.rejected))});const d=[];this.interceptors.response.forEach(function(T){d.push(T.fulfilled,T.rejected)});let v,y=0,x;if(!h){const P=[k_.bind(this),void 0];for(P.unshift.apply(P,u),P.push.apply(P,d),x=P.length,v=Promise.resolve(n);y<x;)v=v.then(P[y++],P[y++]);return v}x=u.length;let _=n;for(y=0;y<x;){const P=u[y++],T=u[y++];try{_=P(_)}catch(U){T.call(this,U);break}}try{v=k_.call(this,_)}catch(P){return Promise.reject(P)}for(y=0,x=d.length;y<x;)v=v.then(d[y++],d[y++]);return v}getUri(t){t=tf(this.defaults,t);const n=w5(t.baseURL,t.url,t.allowAbsoluteUrls);return m5(n,t.params,t.paramsSerializer)}};Wt.forEach(["delete","get","head","options"],function(t){Kh.prototype[t]=function(n,r){return this.request(tf(r||{},{method:t,url:n,data:(r||{}).data}))}});Wt.forEach(["post","put","patch"],function(t){function n(r){return function(s,o,u){return this.request(tf(u||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Kh.prototype[t]=n(),Kh.prototype[t+"Form"]=n(!0)});let Wk=class P5{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(u=>{r.subscribe(u),s=u}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},t(function(s,o,u){r.reason||(r.reason=new fd(s,o,u),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new P5(function(i){t=i}),cancel:t}}};function Zk(e){return function(n){return e.apply(null,n)}}function Kk(e){return Wt.isObject(e)&&e.isAxiosError===!0}const Jv={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Jv).forEach(([e,t])=>{Jv[t]=e});function A5(e){const t=new Kh(e),n=o5(Kh.prototype.request,t);return Wt.extend(n,Kh.prototype,t,{allOwnKeys:!0}),Wt.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return A5(tf(e,i))},n}const fs=A5(Tp);fs.Axios=Kh;fs.CanceledError=fd;fs.CancelToken=Wk;fs.isCancel=_5;fs.VERSION=C5;fs.toFormData=Kg;fs.AxiosError=Ur;fs.Cancel=fs.CanceledError;fs.all=function(t){return Promise.all(t)};fs.spread=Zk;fs.isAxiosError=Kk;fs.mergeConfig=tf;fs.AxiosHeaders=bl;fs.formToJSON=e=>y5(Wt.isHTMLForm(e)?new FormData(e):e);fs.getAdapter=E5.getAdapter;fs.HttpStatusCode=Jv;fs.default=fs;const{Axios:D$,AxiosError:I$,CanceledError:R$,isCancel:F$,CancelToken:j$,VERSION:z$,all:U$,Cancel:$$,isAxiosError:V$,spread:H$,toFormData:G$,AxiosHeaders:q$,HttpStatusCode:W$,formToJSON:Z$,getAdapter:K$,mergeConfig:Y$}=fs,pn=gu({measures:[],longTasks:[],memorySnapshots:[],framesPerSecond:0,lastFpsUpdate:0,frameCount:0,isRecording:!1,isEnabled:!1,startTime:0,currentOperation:null,operationStack:[],operationHistory:[]});let dh=null,$h=null;const Yk=1e3;function Jg(){if(pn.isEnabled){pn.isRecording=!0,pn.startTime=performance.now(),pn.frameCount=0,pn.lastFpsUpdate=performance.now();try{window.PerformanceObserver&&PerformanceObserver.supportedEntryTypes.includes("longtask")&&(dh=new PerformanceObserver(e=>{e.getEntries().forEach(n=>{pn.longTasks.push({duration:n.duration,startTime:n.startTime,name:n.name,component:Uu()})})}),dh.observe({entryTypes:["longtask"]}))}catch(e){console.warn("PerformanceObserver pour longues tches non support",e)}Xk(),ay()}}function cg(){pn.isRecording=!1,dh&&(dh.disconnect(),dh=null),B5()}function Qv(){dh&&(dh.disconnect(),dh=null),B5(),pn.measures=[],pn.longTasks=[],pn.memorySnapshots=[],pn.operationHistory=[],pn.frameCount=0,pn.framesPerSecond=0,pn.lastFpsUpdate=0,pn.isEnabled&&Jg()}function M5(e,t,n){if(!pn.isEnabled||!pn.isRecording)return()=>{};const r=performance.now(),i=pn.currentOperation;return pn.currentOperation=e,pn.operationStack.push(e),()=>{const s=performance.now()-r;pn.operationStack.pop(),pn.currentOperation=pn.operationStack[pn.operationStack.length-1]||null,pn.measures.push({name:e,startTime:r,duration:s,component:t||Uu(),info:n,parentOperation:i||void 0}),s>10&&pn.operationHistory.push({operation:e,component:t||Uu()||"unknown",durationMs:s,timestamp:Date.now()})}}async function k5(e,t,n,r){if(!pn.isEnabled||!pn.isRecording)return t();const i=performance.now(),s=pn.currentOperation;pn.currentOperation=e,pn.operationStack.push(e);try{return await t()}finally{const o=performance.now()-i;pn.operationStack.pop(),pn.currentOperation=pn.operationStack[pn.operationStack.length-1]||null,pn.measures.push({name:e,startTime:i,duration:o,component:n||Uu(),info:r,parentOperation:s||void 0}),o>10&&pn.operationHistory.push({operation:e,component:n||Uu()||"unknown",durationMs:o,timestamp:Date.now()})}}function T5(e,t,n,r){if(!pn.isEnabled||!pn.isRecording)return t();const i=performance.now(),s=pn.currentOperation;pn.currentOperation=e,pn.operationStack.push(e);try{return t()}finally{const o=performance.now()-i;pn.operationStack.pop(),pn.currentOperation=pn.operationStack[pn.operationStack.length-1]||null,pn.measures.push({name:e,startTime:i,duration:o,component:n||Uu(),info:r,parentOperation:s||void 0}),o>10&&pn.operationHistory.push({operation:e,component:n||Uu()||"unknown",durationMs:o,timestamp:Date.now()})}}function ay(){!pn.isEnabled||!pn.isRecording||(performance.memory?pn.memorySnapshots.push({jsHeapSizeLimit:performance.memory.jsHeapSizeLimit,totalJSHeapSize:performance.memory.totalJSHeapSize,usedJSHeapSize:performance.memory.usedJSHeapSize,timestamp:performance.now()}):pn.memorySnapshots.push({timestamp:performance.now()}))}function Xk(){$h!==null&&cancelAnimationFrame($h),pn.frameCount=0,pn.lastFpsUpdate=performance.now();function e(){pn.frameCount++;const t=performance.now();t-pn.lastFpsUpdate>=Yk&&(pn.framesPerSecond=Math.round(pn.frameCount*1e3/(t-pn.lastFpsUpdate)),pn.frameCount=0,pn.lastFpsUpdate=t),pn.isRecording&&($h=requestAnimationFrame(e))}$h=requestAnimationFrame(e)}function B5(){$h!==null&&(cancelAnimationFrame($h),$h=null)}function Uu(){return""}function e1(e){pn.isEnabled=e,e&&!pn.isRecording?Jg():!e&&pn.isRecording&&cg()}function O5(e,t,n){return(...r)=>{if(!pn.isEnabled||!pn.isRecording)return e(...r);const i=performance.now();try{return e(...r)}finally{const s=performance.now()-i;pn.measures.push({name:t,startTime:i,duration:s,component:n||Uu(),info:{args:r}}),s>10&&pn.operationHistory.push({operation:t,component:n||Uu()||"unknown",durationMs:s,timestamp:Date.now()})}}}function N5(e,t,n){return async(...r)=>{if(!pn.isEnabled||!pn.isRecording)return await e(...r);const i=performance.now();try{return await e(...r)}finally{const s=performance.now()-i;pn.measures.push({name:t,startTime:i,duration:s,component:n||Uu(),info:{args:r}}),s>10&&pn.operationHistory.push({operation:t,component:n||Uu()||"unknown",durationMs:s,timestamp:Date.now()})}}}function Jk(e,t){const n=pn.measures.filter(o=>o.startTime>=e&&o.startTime+o.duration<=t),r=new Map,i=[];n.forEach(o=>{o.parentOperation?(r.has(o.parentOperation)||r.set(o.parentOperation,[]),r.get(o.parentOperation).push(o)):i.push(o)});function s(o){const u=r.get(o.name)||[];return{operation:o.name,duration:o.duration,component:o.component,children:u.sort((h,d)=>d.duration-h.duration).map(h=>s(h))}}return i.sort((o,u)=>u.duration-o.duration).map(o=>s(o))}function t1(e,t){const n=e||pn.startTime,r=t||performance.now(),i=Jk(n,r),s=r-n,o=new Map;function u(d){const v=o.get(d.operation)||{duration:0,component:d.component};v.duration+=d.duration,o.set(d.operation,v),d.children.forEach(y=>u(y))}i.forEach(d=>u(d));const h=Array.from(o.entries()).map(([d,{duration:v,component:y}])=>({operation:d,duration:v,component:y,impact:v/s*100})).sort((d,v)=>v.impact-d.impact).slice(0,10);return{criticalPaths:i,totalTime:s,bottlenecks:h}}function dd(){const e=Gt(!1);Ia(()=>{try{const r=new URL(window.location.href).searchParams.get("perf")==="true";e.value=r,e1(r),Qv()}catch(n){console.warn("Erreur lors de la vrification du paramtre perf:",n),e.value=!1,e1(!1)}}),wh(()=>{pn.isRecording&&cg()});const t=(n,r)=>{if(!pn.isEnabled||!pn.isRecording)return null;const i=pn.measures.find(d=>d.name===n&&d.startTime===r);if(!i)return null;const s=i.startTime+i.duration,o=pn.measures.filter(d=>d.startTime>=i.startTime&&d.startTime<=s&&d!==i),u=pn.longTasks.filter(d=>d.startTime>=i.startTime&&d.startTime<=s),h=pn.memorySnapshots.filter(d=>d.timestamp>=i.startTime&&d.timestamp<=s);return{operation:{name:i.name,component:i.component,startTime:i.startTime,duration:i.duration,info:i.info},context:{relatedOperations:o.map(d=>({name:d.name,component:d.component,startTime:d.startTime-i.startTime,duration:d.duration,info:d.info})),longTasks:u.map(d=>({duration:d.duration,startTime:d.startTime-i.startTime,name:d.name,component:d.component})),memorySnapshots:h.map(d=>({...d,timestamp:d.timestamp-i.startTime}))},summary:{totalRelatedOperations:o.length,totalLongTasks:u.length,maxLongTaskDuration:Math.max(...u.map(d=>d.duration),0),memoryDelta:h.length>1?(h[h.length-1].usedJSHeapSize||0)-(h[0].usedJSHeapSize||0):0}}};return{isEnabled:Nu(Gt(pn.isEnabled)),isQueryParamEnabled:Nu(e),isRecording:Nu(Gt(pn.isRecording)),measures:Nu(Gt(pn.measures)),longTasks:Nu(Gt(pn.longTasks)),memorySnapshots:Nu(Gt(pn.memorySnapshots)),framesPerSecond:Nu(Gt(pn.framesPerSecond)),operationHistory:Nu(Gt(pn.operationHistory)),startRecording:Jg,stopRecording:cg,clearRecording:Qv,startMeasure:M5,measure:T5,measureAsync:k5,captureMemorySnapshot:ay,createPerformanceTracker:O5,createAsyncPerformanceTracker:N5,getOperationDetails:t,getSlowOperations:()=>!pn.isEnabled||!pn.isRecording?[]:[...pn.measures].sort((n,r)=>r.duration-n.duration).slice(0,10),getLongTasks:()=>!pn.isEnabled||!pn.isRecording?[]:[...pn.longTasks].sort((n,r)=>r.duration-n.duration),getPerformanceReport:()=>{if(!pn.isEnabled||!pn.isRecording)return null;const n=t1();return{totalMeasures:pn.measures.length,totalLongTasks:pn.longTasks.length,slowestOperations:[...pn.measures].sort((r,i)=>i.duration-r.duration).slice(0,10),averageFps:pn.framesPerSecond,memoryUsage:pn.memorySnapshots.length>0?pn.memorySnapshots[pn.memorySnapshots.length-1]:null,operationsByComponent:Qk(pn.measures),criticalPaths:n.criticalPaths,bottlenecks:n.bottlenecks,recordingDuration:pn.isRecording?performance.now()-pn.startTime:null}},analyzeCriticalPaths:t1}}function Qk(e){if(!pn.isEnabled||!pn.isRecording)return{};const t={};return e.forEach(n=>{const r=n.component||"unknown";t[r]||(t[r]={totalTime:0,callCount:0,operations:{}}),t[r].totalTime+=n.duration,t[r].callCount++,t[r].operations[n.name]||(t[r].operations[n.name]={totalTime:0,callCount:0}),t[r].operations[n.name].totalTime+=n.duration,t[r].operations[n.name].callCount++}),t}const on={startRecording:Jg,stopRecording:cg,clearRecording:Qv,startMeasure:M5,measure:T5,measureAsync:k5,captureMemorySnapshot:ay,createPerformanceTracker:O5,createAsyncPerformanceTracker:N5,setEnabled:e1,analyzeCriticalPaths:t1},er=fs.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0}),ws=dd();function D5(e){var r;const n=`; ${document.cookie}`.split(`; ${e}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}er.interceptors.request.use(async e=>{const t=ws.startMeasure("api_request_interceptor","ApiService");try{const n=D5("access_token");return n&&(e.headers.Authorization=`Bearer ${n}`),console.log("Request config:",{url:e.url,method:e.method,headers:e.headers,withCredentials:e.withCredentials}),e}finally{t()}},e=>(console.error("Request interceptor error:",e),Promise.reject(e)));er.interceptors.response.use(e=>e,async e=>{var r,i;const t=ws.startMeasure("api_response_interceptor","ApiService"),n=e.config;try{if(((r=e.response)==null?void 0:r.status)===401&&!n._retry&&!((i=n.url)!=null&&i.includes("/token/refresh/"))){n._retry=!0;const s=Da();try{await ws.measureAsync("token_refresh",()=>s.refreshToken(),"ApiService");const o=D5("access_token");if(o)return n.headers.Authorization=`Bearer ${o}`,er(n)}catch(o){return await s.logout(),window.location.pathname!=="/login"&&(window.location.href="/login"),Promise.reject(o)}}return Promise.reject(e)}finally{t()}});function eT(e){var n;const t=[];if((n=e.response)!=null&&n.data){const r=e.response.data;typeof r=="object"&&!Array.isArray(r)?Object.entries(r).forEach(([i,s])=>{Array.isArray(s)?s.forEach(o=>{t.push({field:i,message:o})}):typeof s=="string"&&t.push({field:i,message:s})}):typeof r=="string"?t.push({field:"non_field_error",message:r}):r.detail&&t.push({field:"non_field_error",message:r.detail})}else e.message&&t.push({field:"non_field_error",message:`Erreur de connexion: ${e.message}`});return t.length===0&&t.push({field:"non_field_error",message:"Une erreur inconnue s'est produite"}),t}async function N0(e){console.log("[fetchUsersByHierarchy] Rcupration des utilisateurs:",e);const t={role:e.role};e.entrepriseId&&(t.entreprise=e.entrepriseId),e.salarieId&&(t.salarie=e.salarieId),e.includeDetails&&(t.include_plans=!0),e.search&&(t.search=e.search),console.log("[fetchUsersByHierarchy] Filtres appliqus:",t);try{const n=await vl.getUsers(t);return console.log(`[fetchUsersByHierarchy] Rsultat (${n.data.length} utilisateurs):`,n.data),n.data}catch(n){throw console.error("[fetchUsersByHierarchy] Erreur lors de la rcupration des utilisateurs:",n),n}}const vl={async getUsers(e={}){const t=ws.startMeasure("get_users","UserService");try{return await ws.measureAsync("get_users_request",()=>er.get("/users/",{params:e}),"UserService")}finally{t()}},async getUser(e){return await er.get(`/users/${e}/`)},async createUser(e){return await er.post("/users/",e)},async updateUser(e,t){return await er.patch(`/users/${e}/`,t)},async deleteUser(e){return await er.delete(`/users/${e}/`)},async getEntreprises(){return await er.get("/users/",{params:{role:"ENTREPRISE"}})},async getSalaries(e){const t={role:"SALARIE"};return e&&(t.entreprise=e),await er.get("/users/",{params:t})},async getSalarieVisiteurs(e){return await er.get("/users/",{params:{role:"VISITEUR",salarie:e}})},async getEntrepriseVisiteurs(e){return await er.get("/users/",{params:{role:"VISITEUR",entreprise:e}})},async getUsersByHierarchy(e){const t=ws.startMeasure("get_users_hierarchy","UserService");try{const n=ws.measure("prepare_hierarchy_filters",()=>{const r={role:e.role};return e.entrepriseId&&(r.entreprise=e.entrepriseId),e.salarieId&&(r.salarie=e.salarieId),e.includeDetails&&(r.include_plans=!0),e.search&&(r.search=e.search),r},"UserService");return await ws.measureAsync("get_users_hierarchy_request",()=>er.get("/users/",{params:n}),"UserService")}finally{t()}},async getEntrepriseSalaries(e){return await er.get("/users/",{params:{role:"SALARIE",entreprise:e}})},async getVisiteurs(e,t){const n={role:"VISITEUR"};return e&&(n.salarie=e),t&&(n.entreprise=t),await er.get("/users/",{params:n})},async assignEntrepriseToSalarie(e,t){return await er.patch(`/users/${e}/`,{entreprise:t})},async assignSalarieToVisiteur(e,t){return await er.patch(`/users/${e}/`,{salarie:t})},formatLogoFileName(e){return ws.measure("format_logo_filename",()=>{var i;const t=new Date().getTime(),n=((i=e.name.split(".").pop())==null?void 0:i.toLowerCase())||"";return`${e.name.split(".")[0].toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}-${t}.${n}`},"UserService")},async uploadLogo(e){const t=ws.startMeasure("upload_logo","UserService");try{const n=new FormData,r=this.formatLogoFileName(e),i=new File([e],r,{type:e.type});return n.append("logo",i),await ws.measureAsync("upload_logo_request",()=>er.post("/users/upload_logo/",n,{headers:{"Content-Type":"multipart/form-data"}}),"UserService")}finally{t()}}},f0={async getPlans(){const e=ws.startMeasure("get_plans","IrrigationService");try{return await ws.measureAsync("get_plans_request",()=>er.get("/plans/"),"IrrigationService")}finally{e()}},async createPlan(e){const t=ws.startMeasure("create_plan","IrrigationService");try{const n=ws.measure("format_plan_data",()=>({...e,entreprise:e.entreprise?typeof e.entreprise=="object"&&"id"in e.entreprise?e.entreprise.id:Number(e.entreprise):null,salarie:e.salarie?typeof e.salarie=="object"&&"id"in e.salarie?e.salarie.id:Number(e.salarie):null,visiteur:e.visiteur?typeof e.visiteur=="object"&&"id"in e.visiteur?e.visiteur.id:Number(e.visiteur):null}),"IrrigationService");return await ws.measureAsync("create_plan_request",()=>er.post("/plans/",n),"IrrigationService")}finally{t()}},async updatePlan(e,t){const n=ws.startMeasure("update_plan","IrrigationService");try{return await ws.measureAsync("update_plan_request",()=>er.put(`/plans/${e}/`,t),"IrrigationService")}finally{n()}},async deletePlan(e){const t=ws.startMeasure("delete_plan","IrrigationService");try{return await ws.measureAsync("delete_plan_request",()=>er.delete(`/plans/${e}/`),"IrrigationService")}finally{t()}},async getVisiteurPlans(e){return await er.get("/plans/",{params:{visiteur:e}})},async createPlanForVisiteur(e){return await er.post("/plans/",e)},async getEntreprisePlans(e){return await er.get("/plans/",{params:{entreprise:e}})},async getSalariePlans(e){return await er.get("/plans/",{params:{salarie:e}})},async createPlanForSalarie(e,t){const n={...e,salarie:t};return await er.post("/plans/",n)},async createPlanForEntreprise(e,t){const n={...e,entreprise:t};return await er.post("/plans/",n)}};er.defaults.baseURL="/api";er.defaults.headers.common["Content-Type"]="application/json";er.defaults.withCredentials=!0;function bp(e){var r;const n=`; ${document.cookie}`.split(`; ${e}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}er.interceptors.request.use(e=>{const t=bp("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>(console.error("Request interceptor error:",e),Promise.reject(e)));er.interceptors.response.use(e=>e,async e=>{var r,i;const t=Da(),n=e.config;if(((r=e.response)==null?void 0:r.status)===401&&!n._retry&&!((i=n.url)!=null&&i.includes("/token/refresh/"))){n._retry=!0;try{if(!bp("access_token"))throw new Error("No token available");await t.refreshToken();const o=bp("access_token");if(o)return n.headers.Authorization=`Bearer ${o}`,er(n)}catch(s){console.error("Token refresh failed:",s),await t.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(e)});function tT(e,t,n=1){const r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);const i=`expires=${r.toUTCString()}`;document.cookie=`${e}=${t};${i};path=/;secure;samesite=Strict`}function zl(e){if(!e)return"-";const t=e.first_name||"",n=e.last_name?e.last_name.toUpperCase():"",r=`${t} ${n}`.trim(),i=e.company_name||e.role||"";return!r&&!i?"-":r?i?`${r} (${i})`:r:`(${i})`}function nT(e="",t=""){return`${(e==null?void 0:e.charAt(0))||""}${(t==null?void 0:t.charAt(0))||""}`.toUpperCase()}const rT={ADMIN:"Administrateur",ENTREPRISE:"Entreprise",SALARIE:"Salarie",VISITEUR:"Visiteur"};function iT(e){return rT[e]||e}function oT(){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function sT(e){return e?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}async function aT({role:e,entrepriseId:t,salarieId:n,includeDetails:r=!1}){const i={role:e};return t&&(i.entreprise=t),n&&(i.salarie=n),r&&(i.include_plans=!0),(await vl.getUsers(i)).data}const Da=Mp("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,enterprises:[],employees:[],visitors:[]}),getters:{isAdmin:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="admin"},isEntreprise:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="entreprise"},isSalarie:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="salarie"},isVisiteur:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="visiteur"},currentUser:e=>e.user,hasEnterprise:e=>{var t;return!!((t=e.user)!=null&&t.enterprise_id)},hasEmployee:e=>{var t;return!!((t=e.user)!=null&&t.employee_id)}},actions:{async initialize(e){if(!e){const n=await this.restoreSession();return this.initialized=!0,n}if(e.isAuthenticated&&e.user)return this.user=e.user,this.isAuthenticated=!0,this.mustChangePassword=e.user.must_change_password||!1,this.initialized=!0,!0;const t=await this.restoreSession();return this.initialized=!0,t},async restoreSession(){try{if(!bp("access_token"))return this.isAuthenticated=!1,this.user=null,!1;const t=await er.post("/token/refresh/");return t.data.user?(this.user=t.data.user,this.isAuthenticated=!0,this.mustChangePassword=t.data.user.must_change_password||!1,!0):(await this.fetchUserProfile(),!0)}catch(e){return console.error("Failed to restore session:",e),this.isAuthenticated=!1,this.user=null,!1}},async login(e,t){var n,r,i;try{const s=await er.post("/token/",{username:e,password:t});if(!s.data.access)throw new Error("Token d'accs non reu");document.cookie=`access_token=${s.data.access}; path=/; secure; samesite=Strict`;const o=await this.fetchUserProfile();return this.user=o,this.isAuthenticated=!0,!0}catch(s){throw this.isAuthenticated=!1,this.user=null,((n=s.response)==null?void 0:n.status)===401?new Error("Identifiants incorrects"):(i=(r=s.response)==null?void 0:r.data)!=null&&i.detail?new Error(s.response.data.detail):s}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const e=await er.get("/users/me/");return this.user=e.data,this.isAuthenticated=!0,this.mustChangePassword=e.data.must_change_password||!1,e.data}catch(e){throw this.isAuthenticated=!1,this.user=null,e}},async changePassword(e,t){try{const n=await er.post("/users/change_password/",{old_password:e,password:t});return this.user={...this.user,must_change_password:!1},n.data}catch(n){throw console.error("Password change error:",n),n}},async refreshToken(){var e,t;try{if(!bp("refresh_token"))throw new Error("No refresh token available");const r=await er.post("/token/refresh/",{},{withCredentials:!0,_retry:!0}),{access:i}=r.data;if(!i)throw new Error("No access token received");return tT("access_token",i,1),this.isAuthenticated=!0,i}catch(n){throw console.error("Error refreshing token:",{status:(e=n.response)==null?void 0:e.status,data:(t=n.response)==null?void 0:t.data}),this.isAuthenticated=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",n}},async fetchUsers(e={}){this.loading=!0;try{return(await vl.getUsers(e)).data}catch(t){throw this.error="Erreur lors de la rcupration des utilisateurs",t}finally{this.loading=!1}},async fetchEnterprises(){this.loading=!0;try{const e=await vl.getUsers({role:"ENTREPRISE"});return this.enterprises=e.data,this.enterprises}catch(e){throw this.error="Erreur lors de la rcupration des entreprises",e}finally{this.loading=!1}},async fetchEnterpriseEmployees(e){this.loading=!0;try{const t=await vl.getUsers({role:"SALARIE",entreprise:e});return this.employees=t.data,this.employees}catch(t){throw this.error="Erreur lors de la rcupration des salaries",t}finally{this.loading=!1}},async fetchEnterpriseVisitors(e){this.loading=!0;try{const t=await vl.getUsers({role:"VISITEUR",entreprise:e});return this.visitors=t.data,this.visitors}catch(t){throw this.error="Erreur lors de la rcupration des visiteurs",t}finally{this.loading=!1}},async createUser(e){this.loading=!0;try{return(await vl.createUser(e)).data}catch(t){throw this.error="Erreur lors de la cration de l'utilisateur",t}finally{this.loading=!1}},async updateUser(e,t){this.loading=!0;try{return(await vl.updateUser(e,t)).data}catch(n){throw this.error="Erreur lors de la mise  jour de l'utilisateur",n}finally{this.loading=!1}},async deleteUser(e){this.loading=!0;try{return await vl.deleteUser(e),!0}catch(t){throw this.error="Erreur lors de la suppression de l'utilisateur",t}finally{this.loading=!1}},async fetchEnterprisesLegacy(){this.loading=!0;try{const e=await er.get("/users/",{params:{role:"entreprise"}});this.enterprises=e.data}catch(e){throw this.error="Erreur lors de la rcupration des entreprises",e}finally{this.loading=!1}},async setEnterprise(e,t){this.loading=!0;try{await er.patch(`/users/${e}/`,{enterprise:t}),this.user&&this.user.id===e&&(this.user.enterprise_id=t)}catch(n){throw this.error="Erreur lors de la mise  jour de l'entreprise",n}finally{this.loading=!1}},async updateUserRole(e,t){this.loading=!0;try{const n=await er.patch(`/users/${e}/`,{role:t});return this.user&&this.user.id===e&&(this.user.user_type=t),n.data}catch(n){throw this.error="Erreur lors de la mise  jour du rle",n}finally{this.loading=!1}},async updateUserEmail(e){var t;this.loading=!0;try{const n=await er.patch(`/users/${(t=this.user)==null?void 0:t.id}/`,{email:e});return this.user&&(this.user.email=e),n.data}catch(n){throw this.error="Erreur lors de la mise  jour de l'email",n}finally{this.loading=!1}},async uploadLogo(e){this.loading=!0;try{const t=await vl.uploadLogo(e);return this.user&&t.data.logo&&(this.user.logo=t.data.logo),t.data}catch(t){throw this.error="Erreur lors du tlversement du logo",t}finally{this.loading=!1}},checkAccess(e){return this.user?e.includes(this.user.user_type):!1},async fetchUsersByRole(e){this.loading=!0;try{return await aT(e)}catch(t){throw console.error(`Error fetching ${e.role}:`,t),t}finally{this.loading=!1}},async fetchEntrepriseSalaries(e){this.loading=!0;try{return(await vl.getUsers({role:"SALARIE",entreprise:e})).data}catch(t){throw this.error="Erreur lors de la rcupration des salaries",t}finally{this.loading=!1}},async fetchSalarieVisiteurs(e){this.loading=!0;try{return(await vl.getUsers({role:"VISITEUR",salarie:e})).data}catch(t){throw this.error="Erreur lors de la rcupration des visiteurs",t}finally{this.loading=!1}}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Nf=typeof document<"u";function I5(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function lT(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&I5(e.default)}const Ai=Object.assign;function Ym(e,t){const n={};for(const r in t){const i=t[r];n[r]=$u(i)?i.map(e):e(i)}return n}const ep=()=>{},$u=Array.isArray,R5=/#/g,uT=/&/g,cT=/\//g,hT=/=/g,fT=/\?/g,F5=/\+/g,dT=/%5B/g,pT=/%5D/g,j5=/%5E/g,gT=/%60/g,z5=/%7B/g,mT=/%7C/g,U5=/%7D/g,vT=/%20/g;function ly(e){return encodeURI(""+e).replace(mT,"|").replace(dT,"[").replace(pT,"]")}function yT(e){return ly(e).replace(z5,"{").replace(U5,"}").replace(j5,"^")}function n1(e){return ly(e).replace(F5,"%2B").replace(vT,"+").replace(R5,"%23").replace(uT,"%26").replace(gT,"`").replace(z5,"{").replace(U5,"}").replace(j5,"^")}function _T(e){return n1(e).replace(hT,"%3D")}function bT(e){return ly(e).replace(R5,"%23").replace(fT,"%3F")}function wT(e){return e==null?"":bT(e).replace(cT,"%2F")}function wp(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const xT=/\/$/,LT=e=>e.replace(xT,"");function Xm(e,t,n="/"){let r,i={},s="",o="";const u=t.indexOf("#");let h=t.indexOf("?");return u<h&&u>=0&&(h=-1),h>-1&&(r=t.slice(0,h),s=t.slice(h+1,u>-1?u:t.length),i=e(s)),u>-1&&(r=r||t.slice(0,u),o=t.slice(u,t.length)),r=PT(r??t,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:wp(o)}}function ST(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function B_(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function ET(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&id(t.matched[r],n.matched[i])&&$5(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function id(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function $5(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!CT(e[n],t[n]))return!1;return!0}function CT(e,t){return $u(e)?O_(e,t):$u(t)?O_(t,e):e===t}function O_(e,t){return $u(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function PT(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,u;for(o=0;o<r.length;o++)if(u=r[o],u!==".")if(u==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const Yc={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var xp;(function(e){e.pop="pop",e.push="push"})(xp||(xp={}));var tp;(function(e){e.back="back",e.forward="forward",e.unknown=""})(tp||(tp={}));function AT(e){if(!e)if(Nf){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),LT(e)}const MT=/^[^#]+#/;function kT(e,t){return e.replace(MT,"#")+t}function TT(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const Qg=()=>({left:window.scrollX,top:window.scrollY});function BT(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=TT(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function N_(e,t){return(history.state?history.state.position-t:-1)+e}const r1=new Map;function OT(e,t){r1.set(e,t)}function NT(e){const t=r1.get(e);return r1.delete(e),t}let DT=()=>location.protocol+"//"+location.host;function V5(e,t){const{pathname:n,search:r,hash:i}=t,s=e.indexOf("#");if(s>-1){let u=i.includes(e.slice(s))?e.slice(s).length:1,h=i.slice(u);return h[0]!=="/"&&(h="/"+h),B_(h,"")}return B_(n,e)+r+i}function IT(e,t,n,r){let i=[],s=[],o=null;const u=({state:x})=>{const _=V5(e,location),P=n.value,T=t.value;let U=0;if(x){if(n.value=_,t.value=x,o&&o===P){o=null;return}U=T?x.position-T.position:0}else r(_);i.forEach(N=>{N(n.value,P,{delta:U,type:xp.pop,direction:U?U>0?tp.forward:tp.back:tp.unknown})})};function h(){o=n.value}function d(x){i.push(x);const _=()=>{const P=i.indexOf(x);P>-1&&i.splice(P,1)};return s.push(_),_}function v(){const{history:x}=window;x.state&&x.replaceState(Ai({},x.state,{scroll:Qg()}),"")}function y(){for(const x of s)x();s=[],window.removeEventListener("popstate",u),window.removeEventListener("beforeunload",v)}return window.addEventListener("popstate",u),window.addEventListener("beforeunload",v,{passive:!0}),{pauseListeners:h,listen:d,destroy:y}}function D_(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?Qg():null}}function RT(e){const{history:t,location:n}=window,r={value:V5(e,n)},i={value:t.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(h,d,v){const y=e.indexOf("#"),x=y>-1?(n.host&&document.querySelector("base")?e:e.slice(y))+h:DT()+e+h;try{t[v?"replaceState":"pushState"](d,"",x),i.value=d}catch(_){console.error(_),n[v?"replace":"assign"](x)}}function o(h,d){const v=Ai({},t.state,D_(i.value.back,h,i.value.forward,!0),d,{position:i.value.position});s(h,v,!0),r.value=h}function u(h,d){const v=Ai({},i.value,t.state,{forward:h,scroll:Qg()});s(v.current,v,!0);const y=Ai({},D_(r.value,h,null),{position:v.position+1},d);s(h,y,!1),r.value=h}return{location:r,state:i,push:u,replace:o}}function FT(e){e=AT(e);const t=RT(e),n=IT(e,t.state,t.location,t.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=Ai({location:"",base:e,go:r,createHref:kT.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function jT(e){return typeof e=="string"||e&&typeof e=="object"}function H5(e){return typeof e=="string"||typeof e=="symbol"}const G5=Symbol("");var I_;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(I_||(I_={}));function od(e,t){return Ai(new Error,{type:e,[G5]:!0},t)}function Mc(e,t){return e instanceof Error&&G5 in e&&(t==null||!!(e.type&t))}const R_="[^/]+?",zT={sensitive:!1,strict:!1,start:!0,end:!0},UT=/[.+*?^${}()[\]/\\]/g;function $T(e,t){const n=Ai({},zT,t),r=[];let i=n.start?"^":"";const s=[];for(const d of e){const v=d.length?[]:[90];n.strict&&!d.length&&(i+="/");for(let y=0;y<d.length;y++){const x=d[y];let _=40+(n.sensitive?.25:0);if(x.type===0)y||(i+="/"),i+=x.value.replace(UT,"\\$&"),_+=40;else if(x.type===1){const{value:P,repeatable:T,optional:U,regexp:N}=x;s.push({name:P,repeatable:T,optional:U});const j=N||R_;if(j!==R_){_+=10;try{new RegExp(`(${j})`)}catch(J){throw new Error(`Invalid custom RegExp for param "${P}" (${j}): `+J.message)}}let Z=T?`((?:${j})(?:/(?:${j}))*)`:`(${j})`;y||(Z=U&&d.length<2?`(?:/${Z})`:"/"+Z),U&&(Z+="?"),i+=Z,_+=20,U&&(_+=-8),T&&(_+=-20),j===".*"&&(_+=-50)}v.push(_)}r.push(v)}if(n.strict&&n.end){const d=r.length-1;r[d][r[d].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function u(d){const v=d.match(o),y={};if(!v)return null;for(let x=1;x<v.length;x++){const _=v[x]||"",P=s[x-1];y[P.name]=_&&P.repeatable?_.split("/"):_}return y}function h(d){let v="",y=!1;for(const x of e){(!y||!v.endsWith("/"))&&(v+="/"),y=!1;for(const _ of x)if(_.type===0)v+=_.value;else if(_.type===1){const{value:P,repeatable:T,optional:U}=_,N=P in d?d[P]:"";if($u(N)&&!T)throw new Error(`Provided param "${P}" is an array but it is not repeatable (* or + modifiers)`);const j=$u(N)?N.join("/"):N;if(!j)if(U)x.length<2&&(v.endsWith("/")?v=v.slice(0,-1):y=!0);else throw new Error(`Missing required param "${P}"`);v+=j}}return v||"/"}return{re:o,score:r,keys:s,parse:u,stringify:h}}function VT(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function q5(e,t){let n=0;const r=e.score,i=t.score;for(;n<r.length&&n<i.length;){const s=VT(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(F_(r))return 1;if(F_(i))return-1}return i.length-r.length}function F_(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const HT={type:0,value:""},GT=/[a-zA-Z0-9_]/;function qT(e){if(!e)return[[]];if(e==="/")return[[HT]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(_){throw new Error(`ERR (${n})/"${d}": ${_}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let u=0,h,d="",v="";function y(){d&&(n===0?s.push({type:0,value:d}):n===1||n===2||n===3?(s.length>1&&(h==="*"||h==="+")&&t(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:d,regexp:v,repeatable:h==="*"||h==="+",optional:h==="*"||h==="?"})):t("Invalid state to consume buffer"),d="")}function x(){d+=h}for(;u<e.length;){if(h=e[u++],h==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:h==="/"?(d&&y(),o()):h===":"?(y(),n=1):x();break;case 4:x(),n=r;break;case 1:h==="("?n=2:GT.test(h)?x():(y(),n=0,h!=="*"&&h!=="?"&&h!=="+"&&u--);break;case 2:h===")"?v[v.length-1]=="\\"?v=v.slice(0,-1)+h:n=3:v+=h;break;case 3:y(),n=0,h!=="*"&&h!=="?"&&h!=="+"&&u--,v="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${d}"`),y(),o(),i}function WT(e,t,n){const r=$T(qT(e.path),n),i=Ai(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function ZT(e,t){const n=[],r=new Map;t=$_({strict:!1,end:!0,sensitive:!1},t);function i(y){return r.get(y)}function s(y,x,_){const P=!_,T=z_(y);T.aliasOf=_&&_.record;const U=$_(t,y),N=[T];if("alias"in y){const J=typeof y.alias=="string"?[y.alias]:y.alias;for(const le of J)N.push(z_(Ai({},T,{components:_?_.record.components:T.components,path:le,aliasOf:_?_.record:T})))}let j,Z;for(const J of N){const{path:le}=J;if(x&&le[0]!=="/"){const he=x.record.path,Le=he[he.length-1]==="/"?"":"/";J.path=x.record.path+(le&&Le+le)}if(j=WT(J,x,U),_?_.alias.push(j):(Z=Z||j,Z!==j&&Z.alias.push(j),P&&y.name&&!U_(j)&&o(y.name)),W5(j)&&h(j),T.children){const he=T.children;for(let Le=0;Le<he.length;Le++)s(he[Le],j,_&&_.children[Le])}_=_||j}return Z?()=>{o(Z)}:ep}function o(y){if(H5(y)){const x=r.get(y);x&&(r.delete(y),n.splice(n.indexOf(x),1),x.children.forEach(o),x.alias.forEach(o))}else{const x=n.indexOf(y);x>-1&&(n.splice(x,1),y.record.name&&r.delete(y.record.name),y.children.forEach(o),y.alias.forEach(o))}}function u(){return n}function h(y){const x=XT(y,n);n.splice(x,0,y),y.record.name&&!U_(y)&&r.set(y.record.name,y)}function d(y,x){let _,P={},T,U;if("name"in y&&y.name){if(_=r.get(y.name),!_)throw od(1,{location:y});U=_.record.name,P=Ai(j_(x.params,_.keys.filter(Z=>!Z.optional).concat(_.parent?_.parent.keys.filter(Z=>Z.optional):[]).map(Z=>Z.name)),y.params&&j_(y.params,_.keys.map(Z=>Z.name))),T=_.stringify(P)}else if(y.path!=null)T=y.path,_=n.find(Z=>Z.re.test(T)),_&&(P=_.parse(T),U=_.record.name);else{if(_=x.name?r.get(x.name):n.find(Z=>Z.re.test(x.path)),!_)throw od(1,{location:y,currentLocation:x});U=_.record.name,P=Ai({},x.params,y.params),T=_.stringify(P)}const N=[];let j=_;for(;j;)N.unshift(j.record),j=j.parent;return{name:U,path:T,params:P,matched:N,meta:YT(N)}}e.forEach(y=>s(y));function v(){n.length=0,r.clear()}return{addRoute:s,resolve:d,removeRoute:o,clearRoutes:v,getRoutes:u,getRecordMatcher:i}}function j_(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function z_(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:KT(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function KT(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function U_(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function YT(e){return e.reduce((t,n)=>Ai(t,n.meta),{})}function $_(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function XT(e,t){let n=0,r=t.length;for(;n!==r;){const s=n+r>>1;q5(e,t[s])<0?r=s:n=s+1}const i=JT(e);return i&&(r=t.lastIndexOf(i,r-1)),r}function JT(e){let t=e;for(;t=t.parent;)if(W5(t)&&q5(e,t)===0)return t}function W5({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function QT(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(F5," "),o=s.indexOf("="),u=wp(o<0?s:s.slice(0,o)),h=o<0?null:wp(s.slice(o+1));if(u in t){let d=t[u];$u(d)||(d=t[u]=[d]),d.push(h)}else t[u]=h}return t}function V_(e){let t="";for(let n in e){const r=e[n];if(n=_T(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}($u(r)?r.map(s=>s&&n1(s)):[r&&n1(r)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+n,s!=null&&(t+="="+s))})}return t}function e8(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=$u(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return t}const t8=Symbol(""),H_=Symbol(""),em=Symbol(""),uy=Symbol(""),i1=Symbol("");function Cd(){let e=[];function t(r){return e.push(r),()=>{const i=e.indexOf(r);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function sh(e,t,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((u,h)=>{const d=x=>{x===!1?h(od(4,{from:n,to:t})):x instanceof Error?h(x):jT(x)?h(od(2,{from:t,to:x})):(o&&r.enterCallbacks[i]===o&&typeof x=="function"&&o.push(x),u())},v=s(()=>e.call(r&&r.instances[i],t,n,d));let y=Promise.resolve(v);e.length<3&&(y=y.then(d)),y.catch(x=>h(x))})}function Jm(e,t,n,r,i=s=>s()){const s=[];for(const o of e)for(const u in o.components){let h=o.components[u];if(!(t!=="beforeRouteEnter"&&!o.instances[u]))if(I5(h)){const v=(h.__vccOpts||h)[t];v&&s.push(sh(v,n,r,o,u,i))}else{let d=h();s.push(()=>d.then(v=>{if(!v)throw new Error(`Couldn't resolve component "${u}" at "${o.path}"`);const y=lT(v)?v.default:v;o.mods[u]=v,o.components[u]=y;const _=(y.__vccOpts||y)[t];return _&&sh(_,n,r,o,u,i)()}))}}return s}function G_(e){const t=Hl(em),n=Hl(uy),r=ir(()=>{const h=zn(e.to);return t.resolve(h)}),i=ir(()=>{const{matched:h}=r.value,{length:d}=h,v=h[d-1],y=n.matched;if(!v||!y.length)return-1;const x=y.findIndex(id.bind(null,v));if(x>-1)return x;const _=q_(h[d-2]);return d>1&&q_(v)===_&&y[y.length-1].path!==_?y.findIndex(id.bind(null,h[d-2])):x}),s=ir(()=>i.value>-1&&o8(n.params,r.value.params)),o=ir(()=>i.value>-1&&i.value===n.matched.length-1&&$5(n.params,r.value.params));function u(h={}){if(i8(h)){const d=t[zn(e.replace)?"replace":"push"](zn(e.to)).catch(ep);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:r,href:ir(()=>r.value.href),isActive:s,isExactActive:o,navigate:u}}function n8(e){return e.length===1?e[0]:e}const r8=Ns({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:G_,setup(e,{slots:t}){const n=gu(G_(e)),{options:r}=Hl(em),i=ir(()=>({[W_(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[W_(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=t.default&&n8(t.default(n));return e.custom?s:$g("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),Rd=r8;function i8(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function o8(e,t){for(const n in t){const r=t[n],i=e[n];if(typeof r=="string"){if(r!==i)return!1}else if(!$u(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function q_(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const W_=(e,t,n)=>e??t??n,s8=Ns({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=Hl(i1),i=ir(()=>e.route||r.value),s=Hl(H_,0),o=ir(()=>{let d=zn(s);const{matched:v}=i.value;let y;for(;(y=v[d])&&!y.components;)d++;return d}),u=ir(()=>i.value.matched[o.value]);Yd(H_,ir(()=>o.value+1)),Yd(t8,u),Yd(i1,i);const h=Gt();return hs(()=>[h.value,u.value,e.name],([d,v,y],[x,_,P])=>{v&&(v.instances[y]=d,_&&_!==v&&d&&d===x&&(v.leaveGuards.size||(v.leaveGuards=_.leaveGuards),v.updateGuards.size||(v.updateGuards=_.updateGuards))),d&&v&&(!_||!id(v,_)||!x)&&(v.enterCallbacks[y]||[]).forEach(T=>T(d))},{flush:"post"}),()=>{const d=i.value,v=e.name,y=u.value,x=y&&y.components[v];if(!x)return Z_(n.default,{Component:x,route:d});const _=y.props[v],P=_?_===!0?d.params:typeof _=="function"?_(d):_:null,U=$g(x,Ai({},P,t,{onVnodeUnmounted:N=>{N.component.isUnmounted&&(y.instances[v]=null)},ref:h}));return Z_(n.default,{Component:U,route:d})||U}}});function Z_(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Z5=s8;function a8(e){const t=ZT(e.routes,e),n=e.parseQuery||QT,r=e.stringifyQuery||V_,i=e.history,s=Cd(),o=Cd(),u=Cd(),h=$1(Yc);let d=Yc;Nf&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const v=Ym.bind(null,fe=>""+fe),y=Ym.bind(null,wT),x=Ym.bind(null,wp);function _(fe,Q){let ue,Re;return H5(fe)?(ue=t.getRecordMatcher(fe),Re=Q):Re=fe,t.addRoute(Re,ue)}function P(fe){const Q=t.getRecordMatcher(fe);Q&&t.removeRoute(Q)}function T(){return t.getRoutes().map(fe=>fe.record)}function U(fe){return!!t.getRecordMatcher(fe)}function N(fe,Q){if(Q=Ai({},Q||h.value),typeof fe=="string"){const me=Xm(n,fe,Q.path),pe=t.resolve({path:me.path},Q),de=i.createHref(me.fullPath);return Ai(me,pe,{params:x(pe.params),hash:wp(me.hash),redirectedFrom:void 0,href:de})}let ue;if(fe.path!=null)ue=Ai({},fe,{path:Xm(n,fe.path,Q.path).path});else{const me=Ai({},fe.params);for(const pe in me)me[pe]==null&&delete me[pe];ue=Ai({},fe,{params:y(me)}),Q.params=y(Q.params)}const Re=t.resolve(ue,Q),Me=fe.hash||"";Re.params=v(x(Re.params));const Ze=ST(r,Ai({},fe,{hash:yT(Me),path:Re.path})),oe=i.createHref(Ze);return Ai({fullPath:Ze,hash:Me,query:r===V_?e8(fe.query):fe.query||{}},Re,{redirectedFrom:void 0,href:oe})}function j(fe){return typeof fe=="string"?Xm(n,fe,h.value.path):Ai({},fe)}function Z(fe,Q){if(d!==fe)return od(8,{from:Q,to:fe})}function J(fe){return Le(fe)}function le(fe){return J(Ai(j(fe),{replace:!0}))}function he(fe){const Q=fe.matched[fe.matched.length-1];if(Q&&Q.redirect){const{redirect:ue}=Q;let Re=typeof ue=="function"?ue(fe):ue;return typeof Re=="string"&&(Re=Re.includes("?")||Re.includes("#")?Re=j(Re):{path:Re},Re.params={}),Ai({query:fe.query,hash:fe.hash,params:Re.path!=null?{}:fe.params},Re)}}function Le(fe,Q){const ue=d=N(fe),Re=h.value,Me=fe.state,Ze=fe.force,oe=fe.replace===!0,me=he(ue);if(me)return Le(Ai(j(me),{state:typeof me=="object"?Ai({},Me,me.state):Me,force:Ze,replace:oe}),Q||ue);const pe=ue;pe.redirectedFrom=Q;let de;return!Ze&&ET(r,Re,ue)&&(de=od(16,{to:pe,from:Re}),Xe(Re,Re,!0,!1)),(de?Promise.resolve(de):Y(pe,Re)).catch(ze=>Mc(ze)?Mc(ze,2)?ze:Ce(ze):q(ze,pe,Re)).then(ze=>{if(ze){if(Mc(ze,2))return Le(Ai({replace:oe},j(ze.to),{state:typeof ze.to=="object"?Ai({},Me,ze.to.state):Me,force:Ze}),Q||pe)}else ze=D(pe,Re,!0,oe,Me);return $(pe,Re,ze),ze})}function V(fe,Q){const ue=Z(fe,Q);return ue?Promise.reject(ue):Promise.resolve()}function F(fe){const Q=se.values().next().value;return Q&&typeof Q.runWithContext=="function"?Q.runWithContext(fe):fe()}function Y(fe,Q){let ue;const[Re,Me,Ze]=l8(fe,Q);ue=Jm(Re.reverse(),"beforeRouteLeave",fe,Q);for(const me of Re)me.leaveGuards.forEach(pe=>{ue.push(sh(pe,fe,Q))});const oe=V.bind(null,fe,Q);return ue.push(oe),we(ue).then(()=>{ue=[];for(const me of s.list())ue.push(sh(me,fe,Q));return ue.push(oe),we(ue)}).then(()=>{ue=Jm(Me,"beforeRouteUpdate",fe,Q);for(const me of Me)me.updateGuards.forEach(pe=>{ue.push(sh(pe,fe,Q))});return ue.push(oe),we(ue)}).then(()=>{ue=[];for(const me of Ze)if(me.beforeEnter)if($u(me.beforeEnter))for(const pe of me.beforeEnter)ue.push(sh(pe,fe,Q));else ue.push(sh(me.beforeEnter,fe,Q));return ue.push(oe),we(ue)}).then(()=>(fe.matched.forEach(me=>me.enterCallbacks={}),ue=Jm(Ze,"beforeRouteEnter",fe,Q,F),ue.push(oe),we(ue))).then(()=>{ue=[];for(const me of o.list())ue.push(sh(me,fe,Q));return ue.push(oe),we(ue)}).catch(me=>Mc(me,8)?me:Promise.reject(me))}function $(fe,Q,ue){u.list().forEach(Re=>F(()=>Re(fe,Q,ue)))}function D(fe,Q,ue,Re,Me){const Ze=Z(fe,Q);if(Ze)return Ze;const oe=Q===Yc,me=Nf?history.state:{};ue&&(Re||oe?i.replace(fe.fullPath,Ai({scroll:oe&&me&&me.scroll},Me)):i.push(fe.fullPath,Me)),h.value=fe,Xe(fe,Q,ue,oe),Ce()}let k;function I(){k||(k=i.listen((fe,Q,ue)=>{if(!ae.listening)return;const Re=N(fe),Me=he(Re);if(Me){Le(Ai(Me,{replace:!0,force:!0}),Re).catch(ep);return}d=Re;const Ze=h.value;Nf&&OT(N_(Ze.fullPath,ue.delta),Qg()),Y(Re,Ze).catch(oe=>Mc(oe,12)?oe:Mc(oe,2)?(Le(Ai(j(oe.to),{force:!0}),Re).then(me=>{Mc(me,20)&&!ue.delta&&ue.type===xp.pop&&i.go(-1,!1)}).catch(ep),Promise.reject()):(ue.delta&&i.go(-ue.delta,!1),q(oe,Re,Ze))).then(oe=>{oe=oe||D(Re,Ze,!1),oe&&(ue.delta&&!Mc(oe,8)?i.go(-ue.delta,!1):ue.type===xp.pop&&Mc(oe,20)&&i.go(-1,!1)),$(Re,Ze,oe)}).catch(ep)}))}let W=Cd(),G=Cd(),K;function q(fe,Q,ue){Ce(fe);const Re=G.list();return Re.length?Re.forEach(Me=>Me(fe,Q,ue)):console.error(fe),Promise.reject(fe)}function ve(){return K&&h.value!==Yc?Promise.resolve():new Promise((fe,Q)=>{W.add([fe,Q])})}function Ce(fe){return K||(K=!fe,I(),W.list().forEach(([Q,ue])=>fe?ue(fe):Q()),W.reset()),fe}function Xe(fe,Q,ue,Re){const{scrollBehavior:Me}=e;if(!Nf||!Me)return Promise.resolve();const Ze=!ue&&NT(N_(fe.fullPath,0))||(Re||!ue)&&history.state&&history.state.scroll||null;return qs().then(()=>Me(fe,Q,Ze)).then(oe=>oe&&BT(oe)).catch(oe=>q(oe,fe,Q))}const B=fe=>i.go(fe);let te;const se=new Set,ae={currentRoute:h,listening:!0,addRoute:_,removeRoute:P,clearRoutes:t.clearRoutes,hasRoute:U,getRoutes:T,resolve:N,options:e,push:J,replace:le,go:B,back:()=>B(-1),forward:()=>B(1),beforeEach:s.add,beforeResolve:o.add,afterEach:u.add,onError:G.add,isReady:ve,install(fe){const Q=this;fe.component("RouterLink",Rd),fe.component("RouterView",Z5),fe.config.globalProperties.$router=Q,Object.defineProperty(fe.config.globalProperties,"$route",{enumerable:!0,get:()=>zn(h)}),Nf&&!te&&h.value===Yc&&(te=!0,J(i.location).catch(Me=>{}));const ue={};for(const Me in Yc)Object.defineProperty(ue,Me,{get:()=>h.value[Me],enumerable:!0});fe.provide(em,Q),fe.provide(uy,U1(ue)),fe.provide(i1,h);const Re=fe.unmount;se.add(fe),fe.unmount=function(){se.delete(fe),se.size<1&&(d=Yc,k&&k(),k=null,h.value=Yc,te=!1,K=!1),Re()}}};function we(fe){return fe.reduce((Q,ue)=>Q.then(()=>F(ue)),Promise.resolve())}return ae}function l8(e,t){const n=[],r=[],i=[],s=Math.max(t.matched.length,e.matched.length);for(let o=0;o<s;o++){const u=t.matched[o];u&&(e.matched.find(d=>id(d,u))?r.push(u):n.push(u));const h=e.matched[o];h&&(t.matched.find(d=>id(d,h))||i.push(h))}return[n,r,i]}function Bp(){return Hl(em)}function X$(e){return Hl(uy)}const Kf=Mp("notification",()=>{const e=Gt([]),t=Gt(0),n=Gt(null),r=ir(()=>[...e.value].sort((y,x)=>x.timestamp-y.timestamp));function i({type:y,message:x,duration:_=5e3}){const P=++t.value,T=Date.now(),U={id:P,type:y,message:x,duration:_,timestamp:T};return e.value.push(U),n.value=P,_>0&&setTimeout(()=>{d(P)},_),P}const s=(y,x=5e3)=>i({type:"success",message:y,duration:x}),o=(y,x=5e3)=>i({type:"error",message:y,duration:x}),u=(y,x=5e3)=>i({type:"info",message:y,duration:x}),h=(y,x=5e3)=>i({type:"warning",message:y,duration:x});function d(y){const x=e.value.findIndex(_=>_.id===y);x!==-1&&e.value.splice(x,1),n.value===y&&(n.value=null)}function v(){e.value=[],n.value=null}return{notifications:r,lastAddedId:n,addNotification:i,removeNotification:d,clearAll:v,success:s,error:o,info:u,warning:h}});var Zs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function K5(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}function u8(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Y5=u8,c8=typeof Zs=="object"&&Zs&&Zs.Object===Object&&Zs,h8=c8,f8=h8,d8=typeof self=="object"&&self&&self.Object===Object&&self,p8=f8||d8||Function("return this")(),X5=p8,g8=X5,m8=function(){return g8.Date.now()},v8=m8,y8=/\s/;function _8(e){for(var t=e.length;t--&&y8.test(e.charAt(t)););return t}var b8=_8,w8=b8,x8=/^\s+/;function L8(e){return e&&e.slice(0,w8(e)+1).replace(x8,"")}var S8=L8,E8=X5,C8=E8.Symbol,J5=C8,K_=J5,Q5=Object.prototype,P8=Q5.hasOwnProperty,A8=Q5.toString,Pd=K_?K_.toStringTag:void 0;function M8(e){var t=P8.call(e,Pd),n=e[Pd];try{e[Pd]=void 0;var r=!0}catch{}var i=A8.call(e);return r&&(t?e[Pd]=n:delete e[Pd]),i}var k8=M8,T8=Object.prototype,B8=T8.toString;function O8(e){return B8.call(e)}var N8=O8,Y_=J5,D8=k8,I8=N8,R8="[object Null]",F8="[object Undefined]",X_=Y_?Y_.toStringTag:void 0;function j8(e){return e==null?e===void 0?F8:R8:X_&&X_ in Object(e)?D8(e):I8(e)}var z8=j8;function U8(e){return e!=null&&typeof e=="object"}var $8=U8,V8=z8,H8=$8,G8="[object Symbol]";function q8(e){return typeof e=="symbol"||H8(e)&&V8(e)==G8}var W8=q8,Z8=S8,J_=Y5,K8=W8,Q_=NaN,Y8=/^[-+]0x[0-9a-f]+$/i,X8=/^0b[01]+$/i,J8=/^0o[0-7]+$/i,Q8=parseInt;function eB(e){if(typeof e=="number")return e;if(K8(e))return Q_;if(J_(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=J_(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Z8(e);var n=X8.test(e);return n||J8.test(e)?Q8(e.slice(2),n?2:8):Y8.test(e)?Q_:+e}var tB=eB,nB=Y5,Qm=v8,eb=tB,rB="Expected a function",iB=Math.max,oB=Math.min;function sB(e,t,n){var r,i,s,o,u,h,d=0,v=!1,y=!1,x=!0;if(typeof e!="function")throw new TypeError(rB);t=eb(t)||0,nB(n)&&(v=!!n.leading,y="maxWait"in n,s=y?iB(eb(n.maxWait)||0,t):s,x="trailing"in n?!!n.trailing:x);function _(he){var Le=r,V=i;return r=i=void 0,d=he,o=e.apply(V,Le),o}function P(he){return d=he,u=setTimeout(N,t),v?_(he):o}function T(he){var Le=he-h,V=he-d,F=t-Le;return y?oB(F,s-V):F}function U(he){var Le=he-h,V=he-d;return h===void 0||Le>=t||Le<0||y&&V>=s}function N(){var he=Qm();if(U(he))return j(he);u=setTimeout(N,T(he))}function j(he){return u=void 0,x&&r?_(he):(r=i=void 0,o)}function Z(){u!==void 0&&clearTimeout(u),d=0,r=h=i=u=void 0}function J(){return u===void 0?o:j(Qm())}function le(){var he=Qm(),Le=U(he);if(r=arguments,i=this,h=he,Le){if(u===void 0)return P(h);if(y)return clearTimeout(u),u=setTimeout(N,t),_(h)}return u===void 0&&(u=setTimeout(N,t)),o}return le.cancel=Z,le.flush=J,le}var aB=sB;const lB=cy(aB),uB={class:"relative w-full"},cB={key:0,class:"search-results w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},hB=["onClick"],tb=Ns({__name:"SearchBar",emits:["select-location"],setup(e,{emit:t}){const n=Gt(""),r=Gt([]),i=t,s=lB(async h=>{if(h.length<3){r.value=[];return}try{const v=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(h)}`)).json();r.value=v}catch(d){console.error("Erreur lors de la recherche d'adresse:",d),r.value=[]}},300);function o(){s(n.value)}function u(h){n.value=h.display_name,r.value=[],i("select-location",{lat:parseFloat(h.lat),lng:parseFloat(h.lon)})}return(h,d)=>(Je(),tt("div",uB,[Zn(M("input",{"onUpdate:modelValue":d[0]||(d[0]=v=>n.value=v),onInput:o,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[Kr,n.value]]),r.value.length>0?(Je(),tt("div",cB,[(Je(!0),tt(On,null,Sr(r.value,v=>(Je(),tt("div",{key:v.place_id,onClick:y=>u(v),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},Zt(v.display_name),9,hB))),128))])):xn("",!0)]))}}),fB={class:"perf-title"},dB={class:"perf-basic-stats"},pB={class:"perf-stat"},gB={class:"perf-stat"},mB={class:"perf-expand-btn"},vB={key:0,class:"perf-content"},yB={class:"perf-section"},_B={class:"perf-metrics"},bB={class:"perf-metric"},wB={class:"perf-metric-value"},xB={class:"perf-metric"},LB={class:"perf-metric-value"},SB={class:"perf-metric"},EB={class:"perf-metric-value"},CB={class:"perf-metric"},PB={class:"perf-metric-value"},AB={class:"perf-section"},MB={class:"perf-metrics"},kB={key:0,class:"perf-metric"},TB={class:"perf-metric-value"},BB={key:1,class:"perf-metric"},OB={class:"perf-metric-value"},NB={key:2,class:"perf-metric"},DB={class:"perf-metric-value"},IB={class:"perf-section"},RB={class:"perf-table"},FB={class:"perf-table-cell"},jB={class:"perf-table-cell"},zB={class:"perf-table-cell"},UB={class:"perf-table-cell"},$B=["onClick"],VB={key:0,class:"perf-empty"},HB=Ns({__name:"PerformancePanel",props:{position:{}},setup(e){const n=e.position||"bottom-left",r=Gt(!1),{isQueryParamEnabled:i,isRecording:s,measures:o,longTasks:u,memorySnapshots:h,framesPerSecond:d,operationHistory:v,startRecording:y,stopRecording:x,clearRecording:_,captureMemorySnapshot:P,getSlowOperations:T,getPerformanceReport:U,getOperationDetails:N}=dd(),j=ir(()=>{const D=U()??{totalMeasures:0,totalLongTasks:0,slowestOperations:[],averageFps:0,memoryUsage:null};return{totalMeasures:D.totalMeasures,totalLongTasks:D.totalLongTasks,averageDuration:D.slowestOperations.length>0?D.slowestOperations.reduce((k,I)=>k+I.duration,0)/D.slowestOperations.length:0,fps:D.averageFps,slowestOperations:D.slowestOperations,memoryUsage:D.memoryUsage}}),Z=ir(()=>(U()??{slowestOperations:[]}).slowestOperations.slice(0,5).map(k=>({operation:k.name,component:k.component||"unknown",durationMs:k.duration,timestamp:k.startTime}))),J=Gt(null);Ia(()=>{i.value&&(J.value=window.setInterval(()=>{P()},1e3))}),wh(()=>{J.value!==null&&clearInterval(J.value)});function le(D){return D===void 0?"N/A":D<1024?D+" B":D<1024*1024?(D/1024).toFixed(2)+" KB":D<1024*1024*1024?(D/(1024*1024)).toFixed(2)+" MB":(D/(1024*1024*1024)).toFixed(2)+" GB"}function he(D){return D.toFixed(2)}const Le=()=>{P()};function V(){const D=U(),k="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(D,null,2)),I=document.createElement("a");I.setAttribute("href",k),I.setAttribute("download","performance_report.json"),document.body.appendChild(I),I.click(),I.remove()}function F(){_(),Le()}function Y(){const D=U();navigator.clipboard.writeText(JSON.stringify(D,null,2)).then(()=>{alert("Donnes de performance copies dans le presse-papiers")}).catch(k=>{console.error("Erreur lors de la copie des donnes",k),alert("Erreur lors de la copie des donnes")})}async function $(D){const k=N(D.operation,D.timestamp);if(!k){alert("Impossible de trouver les dtails de cette opration");return}const I={operation:{...k.operation,startTimeRelative:"0ms",startTimeAbsolute:new Date(k.operation.startTime).toISOString()},context:{...k.context,relatedOperations:k.context.relatedOperations.map(W=>({...W,startTime:`+${W.startTime.toFixed(2)}ms`})),longTasks:k.context.longTasks.map(W=>({...W,startTime:`+${W.startTime.toFixed(2)}ms`})),memorySnapshots:k.context.memorySnapshots.map(W=>({...W,timestamp:`+${W.timestamp.toFixed(2)}ms`,usedJSHeapSize:W.usedJSHeapSize?le(W.usedJSHeapSize):"N/A",totalJSHeapSize:W.totalJSHeapSize?le(W.totalJSHeapSize):"N/A"}))},summary:{...k.summary,memoryDelta:le(k.summary.memoryDelta),maxLongTaskDuration:`${k.summary.maxLongTaskDuration.toFixed(2)}ms`}};try{await navigator.clipboard.writeText(JSON.stringify(I,null,2)),alert("Dtails de l'opration copis dans le presse-papiers")}catch(W){console.error("Erreur lors de la copie des dtails",W),alert("Erreur lors de la copie des dtails")}}return(D,k)=>{var I,W,G,K,q,ve;return zn(i)?(Je(),tt("div",{key:0,class:Yi(["performance-panel",`position-${zn(n)}`,{expanded:r.value}])},[M("div",{class:"perf-header",onClick:k[0]||(k[0]=Ce=>r.value=!r.value)},[M("div",fB,[M("div",{class:Yi(["perf-indicator",{active:zn(s)}])},null,2),k[1]||(k[1]=M("span",null,"Performance",-1))]),M("div",dB,[M("span",pB,Zt(j.value.fps)+" FPS",1),M("span",gB,Zt(he(j.value.averageDuration))+"ms",1)]),M("button",mB,Zt(r.value?"":""),1)]),r.value?(Je(),tt("div",vB,[M("div",yB,[k[6]||(k[6]=M("h3",null,"Mtriques gnrales",-1)),M("div",_B,[M("div",bB,[k[2]||(k[2]=M("span",{class:"perf-metric-label"},"Mesures",-1)),M("span",wB,Zt(j.value.totalMeasures),1)]),M("div",xB,[k[3]||(k[3]=M("span",{class:"perf-metric-label"},"Tches longues",-1)),M("span",LB,Zt(j.value.totalLongTasks),1)]),M("div",SB,[k[4]||(k[4]=M("span",{class:"perf-metric-label"},"Dure moyenne",-1)),M("span",EB,Zt(he(j.value.averageDuration))+"ms",1)]),M("div",CB,[k[5]||(k[5]=M("span",{class:"perf-metric-label"},"FPS",-1)),M("span",PB,Zt(j.value.fps),1)])])]),M("div",AB,[k[10]||(k[10]=M("h3",null,"Mmoire",-1)),M("div",MB,[((I=j.value.memoryUsage)==null?void 0:I.usedJSHeapSize)!==void 0?(Je(),tt("div",kB,[k[7]||(k[7]=M("span",{class:"perf-metric-label"},"Utilise",-1)),M("span",TB,Zt(le((W=j.value.memoryUsage)==null?void 0:W.usedJSHeapSize)),1)])):xn("",!0),((G=j.value.memoryUsage)==null?void 0:G.totalJSHeapSize)!==void 0?(Je(),tt("div",BB,[k[8]||(k[8]=M("span",{class:"perf-metric-label"},"Totale",-1)),M("span",OB,Zt(le((K=j.value.memoryUsage)==null?void 0:K.totalJSHeapSize)),1)])):xn("",!0),((q=j.value.memoryUsage)==null?void 0:q.jsHeapSizeLimit)!==void 0?(Je(),tt("div",NB,[k[9]||(k[9]=M("span",{class:"perf-metric-label"},"Limite",-1)),M("span",DB,Zt(le((ve=j.value.memoryUsage)==null?void 0:ve.jsHeapSizeLimit)),1)])):xn("",!0)])]),M("div",IB,[k[13]||(k[13]=M("h3",null,"Oprations les plus lentes",-1)),M("div",RB,[k[12]||(k[12]=Zh('<div class="perf-table-header" data-v-fefe39b0><div class="perf-table-cell" data-v-fefe39b0>Opration</div><div class="perf-table-cell" data-v-fefe39b0>Composant</div><div class="perf-table-cell" data-v-fefe39b0>Dure</div><div class="perf-table-cell" data-v-fefe39b0>Actions</div></div>',1)),(Je(!0),tt(On,null,Sr(Z.value,Ce=>(Je(),tt("div",{class:"perf-table-row",key:Ce.timestamp},[M("div",FB,Zt(Ce.operation),1),M("div",jB,Zt(Ce.component),1),M("div",zB,Zt(he(Ce.durationMs))+"ms",1),M("div",UB,[M("button",{onClick:Xe=>$(Ce),class:"perf-action-button",title:"Copier les dtails"},k[11]||(k[11]=[M("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]),8,$B)])]))),128)),Z.value.length===0?(Je(),tt("div",VB," Aucune opration enregistre ")):xn("",!0)])]),M("div",{class:"perf-actions"},[M("button",{onClick:F,class:"perf-button"}," Rinitialiser "),M("button",{onClick:V,class:"perf-button"}," Tlcharger "),M("button",{onClick:Y,class:"perf-button"}," Copier ")])])):xn("",!0)],2)):xn("",!0)}}}),tm=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},GB=tm(HB,[["__scopeId","data-v-fefe39b0"]]),qB={class:"h-screen flex flex-col"},WB={key:0,class:"bg-white shadow-sm z-[2000] flex-shrink-0"},ZB={class:"mx-auto px-4 sm:px-6 lg:px-8"},KB={class:"flex h-16 items-center justify-between"},YB={class:"flex items-center"},XB={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},JB={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},QB={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},e7={class:"hidden md:flex md:ml-6 space-x-8"},t7={key:0,class:"hidden md:block flex-1 mx-8"},n7={key:1,class:"flex-1"},r7={class:"flex items-center space-x-2 md:space-x-4"},i7={key:0,class:"hidden md:flex items-center justify-center p-2 text-amber-500 hover:text-amber-600 rounded-full hover:bg-amber-50 focus:outline-none focus:ring-2 focus:ring-amber-400",title:"Performance active"},o7={class:"relative"},s7={class:"px-4 py-2 border-b border-gray-100 flex justify-between items-center"},a7={class:"flex items-center justify-between w-full"},l7={class:"flex items-center space-x-3"},u7={class:"max-h-72 overflow-y-auto"},c7={key:0,class:"px-4 py-3 text-sm text-gray-500 text-center"},h7={class:"flex items-start"},f7={class:"flex-shrink-0 mr-3"},d7={key:0,class:"h-6 w-6 md:h-5 md:w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor"},p7={key:1,class:"h-6 w-6 md:h-5 md:w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},g7={key:2,class:"h-6 w-6 md:h-5 md:w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},m7={key:3,class:"h-6 w-6 md:h-5 md:w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor"},v7={class:"flex-1"},y7={class:"text-sm md:text-sm text-gray-800"},_7=["onClick"],b7={class:"relative"},w7={class:"hidden md:flex flex-col items-end"},x7={class:"text-sm font-medium text-gray-700"},L7={key:0,class:"text-xs text-gray-500"},S7=["src","alt"],E7={class:"md:hidden px-4 py-2 border-b border-gray-100 flex justify-between items-center"},C7={class:"text-sm font-semibold text-gray-700"},P7={class:"text-xs text-gray-500"},A7={key:0,class:"md:hidden bg-white border-t border-gray-200"},M7={class:"space-y-1 px-2 pb-3 pt-2"},k7={key:0,class:"px-4 py-3 border-t border-gray-200"},T7=Ns({__name:"App",setup(e){const t=Bp(),n=Da(),r=Kf(),{isQueryParamEnabled:i}=dd(),s=Gt(!1),o=Gt(!1),u=Gt(!1),h=Gt(!1),d=Gt(null),v=Gt(!1),y=Gt(!1),x=Gt(null),_=Gt("13px"),P=Gt("65px");function T(){y.value=window.innerWidth<768}Ia(()=>{T(),window.addEventListener("resize",T),window.addEventListener("resize",U)}),cd(()=>{window.removeEventListener("resize",T),window.removeEventListener("resize",U)});function U(){if(!x.value)return;const k=x.value.getBoundingClientRect();_.value=`${k.top+window.scrollY+5}px`;const I=k.left+k.width/2;P.value=`${window.innerWidth-I-22}px`}const N=ir(()=>{const k=n.user;if(!k)return"";const I=`${k.first_name} ${k.last_name.toUpperCase()}`;return k.company_name?`${I} (${k.company_name})`:I}),j=ir(()=>{var I;switch((I=n.user)==null?void 0:I.user_type){case"admin":return"Accs administrateur";case"entreprise":return"Accs entreprise";case"salarie":return"Accs salarie";case"visiteur":return"Accs visiteur";default:return""}}),Z=ir(()=>{var k;return((k=n.user)==null?void 0:k.user_type)==="admin"}),J=ir(()=>n.isAuthenticated),le=[{name:"Carte",to:"/"},{name:"Notes",to:"/notes"}],he=ir(()=>{var I;if(!J.value)return[];const k=[...le];return(Z.value||((I=n.user)==null?void 0:I.user_type)==="entreprise")&&k.push({name:"Utilisateurs",to:"/users"}),k}),Le=ir(()=>J.value?[{name:"Mon profil",to:"/profile"}]:[]);async function V(){try{await n.logout(),t.push("/login")}catch(k){console.error("Erreur lors de la dconnexion:",k)}}function F(k){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:k.lat,lng:k.lng,zoom:16}}))}Ia(async()=>{console.log("App mounted, checking auth...");try{if(localStorage.getItem("token")){console.log("Token found, checking auth..."),await n.checkAuth(),await n.fetchUserProfile();const I=localStorage.getItem("lastPlanId");I&&window.dispatchEvent(new CustomEvent("load-last-plan",{detail:{planId:I}}))}else console.log("No token found")}catch(k){console.error("Auth check error:",k),t.push("/login")}});const Y=ir(()=>{const k="TagMap";if(!J.value)return`${k} - Connexion`;const I=t.currentRoute.value,G={home:"Carte",notes:"Notes",users:"Utilisateurs",profile:"Mon profil",changePassword:"Changement de mot de passe",map:"Carte"}[I.name]||"";return G?`${k} - ${G}`:k});hs(Y,k=>{document.title=k},{immediate:!0});const $=ir(()=>r.notifications.length);function D(){r.clearAll(),u.value=!1}return vp(()=>{if(r.lastAddedId!==null){const k=r.notifications.find(I=>I.id===r.lastAddedId);k&&qs(()=>{U(),h.value=!0,d.value={id:k.id,message:k.message,type:k.type},requestAnimationFrame(()=>{setTimeout(()=>{v.value=!0,setTimeout(()=>{v.value=!1,setTimeout(()=>{var I;((I=d.value)==null?void 0:I.id)===k.id&&(d.value=null,h.value=!1)},300)},4e3)},50)})})}}),(k,I)=>{var W;return Je(),tt("div",qB,[J.value?(Je(),tt("header",WB,[M("nav",ZB,[M("div",KB,[M("div",YB,[M("button",{onClick:I[0]||(I[0]=G=>o.value=!o.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 md:hidden"},[I[7]||(I[7]=M("span",{class:"sr-only"},"Ouvrir le menu",-1)),(Je(),tt("svg",XB,[o.value?(Je(),tt("path",QB)):(Je(),tt("path",JB))]))]),qr(zn(Rd),{to:"/",class:"text-xl font-semibold text-primary-600 truncate ml-2 md:ml-0"},{default:Ul(()=>I[8]||(I[8]=[M("span",{class:"md:inline hidden"},"TagMap",-1),M("span",{class:"md:hidden inline"},"TM",-1)])),_:1}),M("div",e7,[(Je(!0),tt(On,null,Sr(he.value,G=>(Je(),hu(zn(Rd),{key:G.name,to:G.to,class:Yi(["text-sm font-medium transition-colors duration-200",[k.$route.path===G.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Ul(()=>[Mi(Zt(G.name),1)]),_:2},1032,["to","class"]))),128))])]),k.$route.path==="/"?(Je(),tt("div",t7,[qr(tb,{onSelectLocation:F})])):(Je(),tt("div",n7)),M("div",r7,[zn(i)?(Je(),tt("button",i7,I[9]||(I[9]=[M("span",{class:"sr-only"},"Performance",-1),M("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)]))):xn("",!0),M("div",o7,[M("button",{ref_key:"bellButtonRef",ref:x,onClick:I[1]||(I[1]=G=>u.value=!u.value),class:Yi(["relative flex items-center justify-center p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",{"animate-bell":h.value}])},I[10]||(I[10]=[M("span",{class:"sr-only"},"Voir les notifications",-1),M("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)]),2),u.value?(Je(),tt("div",{key:0,class:"absolute right-0 mt-2 md:w-80 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3000] md:right-0 right-0 left-0 md:left-auto",style:Ya(y.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[M("div",s7,[M("div",a7,[I[12]||(I[12]=M("h3",{class:"text-sm font-semibold text-gray-700"},"Notifications",-1)),M("div",l7,[$.value>0?(Je(),tt("button",{key:0,onClick:D,class:"text-xs text-primary-600 hover:text-primary-800"}," Tout effacer ")):xn("",!0),M("button",{onClick:I[2]||(I[2]=G=>u.value=!1),class:"md:hidden p-1 rounded-full hover:bg-gray-100"},I[11]||(I[11]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])]),M("div",u7,[$.value===0?(Je(),tt("div",c7," Aucune notification ")):xn("",!0),(Je(!0),tt(On,null,Sr(zn(r).notifications,G=>(Je(),tt("div",{key:G.id,class:"px-4 py-3 md:py-3 py-4 border-b border-gray-100 last:border-0 hover:bg-gray-50"},[M("div",h7,[M("div",f7,[G.type==="success"?(Je(),tt("svg",d7,I[13]||(I[13]=[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):G.type==="error"?(Je(),tt("svg",p7,I[14]||(I[14]=[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):G.type==="warning"?(Je(),tt("svg",g7,I[15]||(I[15]=[M("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):(Je(),tt("svg",m7,I[16]||(I[16]=[M("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])))]),M("div",v7,[M("p",y7,Zt(G.message),1),M("button",{onClick:K=>zn(r).removeNotification(G.id),class:"text-xs md:text-xs text-primary-600 hover:text-primary-800 mt-2 md:mt-1 py-1 md:py-0"}," Fermer ",8,_7)])])]))),128))])],4)):xn("",!0)]),M("div",b7,[M("button",{onClick:I[3]||(I[3]=G=>s.value=!s.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[M("div",w7,[M("span",x7,Zt(N.value),1),j.value?(Je(),tt("span",L7,Zt(j.value),1)):xn("",!0)]),M("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:((W=zn(n).user)==null?void 0:W.logo)||"https://ui-avatars.com/api/?name="+encodeURIComponent(N.value),alt:N.value},null,8,S7)]),s.value?(Je(),tt("div",{key:0,class:"absolute right-0 mt-2 md:w-48 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3000] md:right-0 right-0 left-0 md:left-auto",style:Ya(y.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[M("div",E7,[M("div",null,[M("div",C7,Zt(N.value),1),M("div",P7,Zt(j.value),1)]),M("button",{onClick:I[4]||(I[4]=G=>s.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},I[17]||(I[17]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),(Je(!0),tt(On,null,Sr(Le.value,G=>(Je(),hu(zn(Rd),{key:G.name,to:G.to,class:"block px-4 md:py-2 py-3 text-sm text-gray-700 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",onClick:I[5]||(I[5]=K=>s.value=!1)},{default:Ul(()=>[Mi(Zt(G.name),1)]),_:2},1032,["to"]))),128)),M("button",{onClick:V,class:"block w-full px-4 md:py-2 py-3 text-left text-sm text-red-600 hover:bg-gray-50 font-medium"}," Dconnexion ")],4)):xn("",!0)])])]),o.value?(Je(),tt("div",A7,[M("div",M7,[(Je(!0),tt(On,null,Sr(he.value,G=>(Je(),hu(zn(Rd),{key:G.name,to:G.to,class:Yi(["block px-3 py-2 rounded-md text-base font-medium",[k.$route.path===G.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:I[6]||(I[6]=K=>o.value=!1)},{default:Ul(()=>[Mi(Zt(G.name),1)]),_:2},1032,["to","class"]))),128))]),k.$route.path==="/"?(Je(),tt("div",k7,[qr(tb,{onSelectLocation:F})])):xn("",!0)])):xn("",!0)])])):xn("",!0),M("main",{class:Yi([k.$route.path==="/"&&!y.value?"overflow-hidden":"overflow-auto","flex-1 flex flex-col","md:h-[calc(100vh-64px)]"])},[qr(zn(Z5))],2),qr(GB,{position:"bottom-left"})])}}}),B7="modulepreload",O7=function(e){return"/static/frontend/"+e},nb={},Vh=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),u=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(h=>{if(h=O7(h),h in nb)return;nb[h]=!0;const d=h.endsWith(".css"),v=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${v}`))return;const y=document.createElement("link");if(y.rel=d?"stylesheet":B7,d||(y.as="script"),y.crossOrigin="",y.href=h,u&&y.setAttribute("nonce",u),document.head.appendChild(y),d)return new Promise((x,_)=>{y.addEventListener("load",x),y.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(o){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=o,window.dispatchEvent(u),!u.defaultPrevented)throw o}return i.then(o=>{for(const u of o||[])u.status==="rejected"&&s(u.reason);return t().catch(s)})},N7={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},D7={class:"max-w-md w-full space-y-8"},I7={class:"space-y-4"},R7={class:"mt-1"},F7={class:"mt-1"},j7={class:"mt-1"},z7={key:0,class:"rounded-md bg-red-50 p-4"},U7={class:"flex"},$7={class:"ml-3"},V7={class:"text-sm font-medium text-red-800"},H7={key:1,class:"rounded-md bg-yellow-50 p-4"},G7={class:"flex"},q7={class:"ml-3"},W7={class:"mt-2 text-sm text-yellow-700"},Z7={class:"list-disc pl-5 space-y-1"},K7=["disabled"],Y7={class:"absolute left-0 inset-y-0 flex items-center pl-3"},X7={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},J7={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Q7=Ns({__name:"ChangePasswordForm",setup(e){const t=Bp(),n=Da(),r=gu({oldPassword:"",newPassword:"",confirmPassword:""}),i=Gt(!1),s=Gt("");Ia(()=>{var d,v;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:n.isAuthenticated,userId:(d=n.user)==null?void 0:d.id,mustChangePassword:(v=n.user)==null?void 0:v.must_change_password})});const o=ir(()=>{const d=[];return r.newPassword&&r.newPassword.length<8&&d.push("Le nouveau mot de passe doit contenir au moins 8 caractres"),r.newPassword&&r.confirmPassword&&r.newPassword!==r.confirmPassword&&d.push("Les mots de passe ne correspondent pas"),d}),u=ir(()=>r.oldPassword.length>0&&r.newPassword.length>=8&&r.newPassword===r.confirmPassword);async function h(){var d,v,y,x,_,P,T,U;if(!u.value){s.value="Veuillez corriger les erreurs avant de continuer";return}if(!((d=n.user)!=null&&d.id)){s.value="Erreur : utilisateur non identifi";return}i.value=!0,s.value="";try{console.log("Submitting password change..."),await n.changePassword(r.oldPassword,r.newPassword),console.log("Password changed successfully"),t.push("/")}catch(N){console.error("Password change failed:",N),(y=(v=N.response)==null?void 0:v.data)!=null&&y.detail?s.value=N.response.data.detail:(_=(x=N.response)==null?void 0:x.data)!=null&&_.old_password?s.value=N.response.data.old_password[0]:(T=(P=N.response)==null?void 0:P.data)!=null&&T.password?s.value=N.response.data.password[0]:((U=N.response)==null?void 0:U.status)===401?(s.value="Session expire, veuillez vous reconnecter",await n.logout(),t.push("/login")):s.value="Une erreur est survenue lors du changement de mot de passe"}finally{i.value=!1}}return(d,v)=>(Je(),tt("div",N7,[M("div",D7,[v[12]||(v[12]=M("div",null,[M("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),M("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de scurit, vous devez changer votre mot de passe. ")],-1)),M("form",{class:"mt-8 space-y-6",onSubmit:ef(h,["prevent"])},[M("div",I7,[M("div",null,[v[3]||(v[3]=M("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),M("div",R7,[Zn(M("input",{id:"old-password","onUpdate:modelValue":v[0]||(v[0]=y=>r.oldPassword=y),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[Kr,r.oldPassword]])])]),M("div",null,[v[4]||(v[4]=M("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),M("div",F7,[Zn(M("input",{id:"new-password","onUpdate:modelValue":v[1]||(v[1]=y=>r.newPassword=y),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[Kr,r.newPassword]])]),v[5]||(v[5]=M("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractres ",-1))]),M("div",null,[v[6]||(v[6]=M("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),M("div",j7,[Zn(M("input",{id:"confirm-password","onUpdate:modelValue":v[2]||(v[2]=y=>r.confirmPassword=y),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[Kr,r.confirmPassword]])])])]),s.value?(Je(),tt("div",z7,[M("div",U7,[v[7]||(v[7]=M("div",{class:"flex-shrink-0"},[M("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),M("div",$7,[M("h3",V7,Zt(s.value),1)])])])):xn("",!0),o.value.length>0?(Je(),tt("div",H7,[M("div",G7,[v[9]||(v[9]=M("div",{class:"flex-shrink-0"},[M("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),M("div",q7,[v[8]||(v[8]=M("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),M("div",W7,[M("ul",Z7,[(Je(!0),tt(On,null,Sr(o.value,(y,x)=>(Je(),tt("li",{key:x},Zt(y),1))),128))])])])])])):xn("",!0),M("div",null,[M("button",{type:"submit",disabled:i.value||!u.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[M("span",Y7,[i.value?(Je(),tt("svg",J7,v[11]||(v[11]=[M("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),M("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Je(),tt("svg",X7,v[10]||(v[10]=[M("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),Mi(" "+Zt(i.value?"Modification en cours...":"Changer le mot de passe"),1)],8,K7)])],32)])]))}}),o1="/static/frontend/assets/logo.svg",eO={class:"min-h-screen bg-white from-blue-50 to-white flex flex-col justify-center py-12 sm:px-6 lg:px-8"},tO={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},nO={class:"bg-white py-8 px-6 shadow-lg rounded-md sm:px-10"},rO={key:0,class:"rounded-md bg-red-50 p-4"},iO={class:"flex"},oO={class:"ml-3"},sO={class:"text-sm font-medium text-red-800"},aO={class:"mt-1"},lO={class:"mt-1 relative"},uO=["type"],cO={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},hO={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},fO={class:"flex items-center justify-between"},dO={class:"flex items-center"},pO={class:"text-sm"},gO=["disabled"],mO={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},vO=Ns({__name:"LoginView",setup(e){const t=Bp(),n=Da(),r=Gt(!1),i=Gt(null),s=Gt(!1),o=gu({username:"",password:"",rememberMe:!1});Ia(async()=>{var h;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE);try{if((h=window.INITIAL_STATE)!=null&&h.isAuthenticated){console.log("User is authenticated, redirecting to home"),t.push("/");return}await n.restoreSession()&&(console.log("Session restored, redirecting to home"),t.push("/"))}catch(d){console.error("Error during initialization:",d),i.value=null}});async function u(){var h,d,v,y,x,_,P,T,U;r.value=!0,i.value=null;try{if(!o.username||!o.password){i.value="Veuillez remplir tous les champs";return}await n.login(o.username,o.password),(h=n.user)!=null&&h.must_change_password?t.push("/change-password"):t.push("/")}catch(N){console.error("Login error:",N),((d=N==null?void 0:N.response)==null?void 0:d.status)===500?i.value="Le service est temporairement indisponible. Veuillez ressayer dans quelques instants.":((v=N==null?void 0:N.response)==null?void 0:v.status)===401||((y=N==null?void 0:N.response)==null?void 0:y.status)===403?i.value="Identifiants incorrects. Veuillez vrifier votre nom d'utilisateur et mot de passe.":(_=(x=N==null?void 0:N.response)==null?void 0:x.data)!=null&&_.detail?i.value=N.response.data.detail:(U=(T=(P=N==null?void 0:N.response)==null?void 0:P.data)==null?void 0:T.non_field_errors)!=null&&U[0]?i.value=N.response.data.non_field_errors[0]:(N==null?void 0:N.message)==="Network Error"?i.value="Impossible de se connecter au serveur. Veuillez vrifier votre connexion internet.":i.value="Une erreur est survenue lors de la connexion. Veuillez ressayer."}finally{r.value=!1}}return(h,d)=>{const v=Z4("router-link");return Je(),tt("div",eO,[d[12]||(d[12]=M("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[M("img",{src:o1,alt:"TagMap Logo",class:"mx-auto h-40 w-auto transition-transform duration-300 hover:scale-110"}),M("h2",{class:"mt-2 text-center text-3xl font-bold text-gray-800"}," TagMap "),M("p",{class:"mt-2 text-center text-sm text-gray-600"}," Connectez-vous pour accder  votre espace ")],-1)),M("div",tO,[M("div",nO,[M("form",{class:"space-y-6",onSubmit:ef(u,["prevent"])},[i.value?(Je(),tt("div",rO,[M("div",iO,[d[4]||(d[4]=M("div",{class:"flex-shrink-0"},[M("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),M("div",oO,[M("h3",sO,Zt(i.value),1)])])])):xn("",!0),M("div",null,[d[5]||(d[5]=M("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),M("div",aO,[Zn(M("input",{id:"username","onUpdate:modelValue":d[0]||(d[0]=y=>o.username=y),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[Kr,o.username]])])]),M("div",null,[d[8]||(d[8]=M("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),M("div",lO,[Zn(M("input",{id:"password","onUpdate:modelValue":d[1]||(d[1]=y=>o.password=y),type:s.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,uO),[[ry,o.password]]),M("button",{type:"button",onClick:d[2]||(d[2]=y=>s.value=!s.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[s.value?(Je(),tt("svg",cO,d[6]||(d[6]=[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(Je(),tt("svg",hO,d[7]||(d[7]=[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),M("div",fO,[M("div",dO,[Zn(M("input",{id:"remember-me","onUpdate:modelValue":d[3]||(d[3]=y=>o.rememberMe=y),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[Hg,o.rememberMe]]),d[9]||(d[9]=M("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),M("div",pO,[qr(v,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Ul(()=>d[10]||(d[10]=[Mi(" Mot de passe oubli ? ")])),_:1})])]),M("div",null,[M("button",{type:"submit",disabled:r.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[r.value?(Je(),tt("svg",mO,d[11]||(d[11]=[M("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),M("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):xn("",!0),Mi(" "+Zt(r.value?"Connexion en cours...":"Se connecter"),1)],8,gO)])],32)])])])}}});var s1={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,r){r(t)})(Zs,function(n){var r="1.9.4";function i(a){var p,S,z,re;for(S=1,z=arguments.length;S<z;S++){re=arguments[S];for(p in re)a[p]=re[p]}return a}var s=Object.create||function(){function a(){}return function(p){return a.prototype=p,new a}}();function o(a,p){var S=Array.prototype.slice;if(a.bind)return a.bind.apply(a,S.call(arguments,1));var z=S.call(arguments,2);return function(){return a.apply(p,z.length?z.concat(S.call(arguments)):arguments)}}var u=0;function h(a){return"_leaflet_id"in a||(a._leaflet_id=++u),a._leaflet_id}function d(a,p,S){var z,re,Se,at;return at=function(){z=!1,re&&(Se.apply(S,re),re=!1)},Se=function(){z?re=arguments:(a.apply(S,arguments),setTimeout(at,p),z=!0)},Se}function v(a,p,S){var z=p[1],re=p[0],Se=z-re;return a===z&&S?a:((a-re)%Se+Se)%Se+re}function y(){return!1}function x(a,p){if(p===!1)return a;var S=Math.pow(10,p===void 0?6:p);return Math.round(a*S)/S}function _(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function P(a){return _(a).split(/\s+/)}function T(a,p){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?s(a.options):{});for(var S in p)a.options[S]=p[S];return a.options}function U(a,p,S){var z=[];for(var re in a)z.push(encodeURIComponent(S?re.toUpperCase():re)+"="+encodeURIComponent(a[re]));return(!p||p.indexOf("?")===-1?"?":"&")+z.join("&")}var N=/\{ *([\w_ -]+) *\}/g;function j(a,p){return a.replace(N,function(S,z){var re=p[z];if(re===void 0)throw new Error("No value provided for variable "+S);return typeof re=="function"&&(re=re(p)),re})}var Z=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function J(a,p){for(var S=0;S<a.length;S++)if(a[S]===p)return S;return-1}var le="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function he(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var Le=0;function V(a){var p=+new Date,S=Math.max(0,16-(p-Le));return Le=p+S,window.setTimeout(a,S)}var F=window.requestAnimationFrame||he("RequestAnimationFrame")||V,Y=window.cancelAnimationFrame||he("CancelAnimationFrame")||he("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function $(a,p,S){if(S&&F===V)a.call(p);else return F.call(window,o(a,p))}function D(a){a&&Y.call(window,a)}var k={__proto__:null,extend:i,create:s,bind:o,get lastId(){return u},stamp:h,throttle:d,wrapNum:v,falseFn:y,formatNum:x,trim:_,splitWords:P,setOptions:T,getParamString:U,template:j,isArray:Z,indexOf:J,emptyImageUrl:le,requestFn:F,cancelFn:Y,requestAnimFrame:$,cancelAnimFrame:D};function I(){}I.extend=function(a){var p=function(){T(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},S=p.__super__=this.prototype,z=s(S);z.constructor=p,p.prototype=z;for(var re in this)Object.prototype.hasOwnProperty.call(this,re)&&re!=="prototype"&&re!=="__super__"&&(p[re]=this[re]);return a.statics&&i(p,a.statics),a.includes&&(W(a.includes),i.apply(null,[z].concat(a.includes))),i(z,a),delete z.statics,delete z.includes,z.options&&(z.options=S.options?s(S.options):{},i(z.options,a.options)),z._initHooks=[],z.callInitHooks=function(){if(!this._initHooksCalled){S.callInitHooks&&S.callInitHooks.call(this),this._initHooksCalled=!0;for(var Se=0,at=z._initHooks.length;Se<at;Se++)z._initHooks[Se].call(this)}},p},I.include=function(a){var p=this.prototype.options;return i(this.prototype,a),a.options&&(this.prototype.options=p,this.mergeOptions(a.options)),this},I.mergeOptions=function(a){return i(this.prototype.options,a),this},I.addInitHook=function(a){var p=Array.prototype.slice.call(arguments,1),S=typeof a=="function"?a:function(){this[a].apply(this,p)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(S),this};function W(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=Z(a)?a:[a];for(var p=0;p<a.length;p++)a[p]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var G={on:function(a,p,S){if(typeof a=="object")for(var z in a)this._on(z,a[z],p);else{a=P(a);for(var re=0,Se=a.length;re<Se;re++)this._on(a[re],p,S)}return this},off:function(a,p,S){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var z in a)this._off(z,a[z],p);else{a=P(a);for(var re=arguments.length===1,Se=0,at=a.length;Se<at;Se++)re?this._off(a[Se]):this._off(a[Se],p,S)}return this},_on:function(a,p,S,z){if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}if(this._listens(a,p,S)===!1){S===this&&(S=void 0);var re={fn:p,ctx:S};z&&(re.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(re)}},_off:function(a,p,S){var z,re,Se;if(this._events&&(z=this._events[a],!!z)){if(arguments.length===1){if(this._firingCount)for(re=0,Se=z.length;re<Se;re++)z[re].fn=y;delete this._events[a];return}if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}var at=this._listens(a,p,S);if(at!==!1){var Pt=z[at];this._firingCount&&(Pt.fn=y,this._events[a]=z=z.slice()),z.splice(at,1)}}},fire:function(a,p,S){if(!this.listens(a,S))return this;var z=i({},p,{type:a,target:this,sourceTarget:p&&p.sourceTarget||this});if(this._events){var re=this._events[a];if(re){this._firingCount=this._firingCount+1||1;for(var Se=0,at=re.length;Se<at;Se++){var Pt=re[Se],Ft=Pt.fn;Pt.once&&this.off(a,Ft,Pt.ctx),Ft.call(Pt.ctx||this,z)}this._firingCount--}}return S&&this._propagateEvent(z),this},listens:function(a,p,S,z){typeof a!="string"&&console.warn('"string" type argument expected');var re=p;typeof p!="function"&&(z=!!p,re=void 0,S=void 0);var Se=this._events&&this._events[a];if(Se&&Se.length&&this._listens(a,re,S)!==!1)return!0;if(z){for(var at in this._eventParents)if(this._eventParents[at].listens(a,p,S,z))return!0}return!1},_listens:function(a,p,S){if(!this._events)return!1;var z=this._events[a]||[];if(!p)return!!z.length;S===this&&(S=void 0);for(var re=0,Se=z.length;re<Se;re++)if(z[re].fn===p&&z[re].ctx===S)return re;return!1},once:function(a,p,S){if(typeof a=="object")for(var z in a)this._on(z,a[z],p,!0);else{a=P(a);for(var re=0,Se=a.length;re<Se;re++)this._on(a[re],p,S,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[h(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[h(a)],this},_propagateEvent:function(a){for(var p in this._eventParents)this._eventParents[p].fire(a.type,i({layer:a.target,propagatedFrom:a.target},a),!0)}};G.addEventListener=G.on,G.removeEventListener=G.clearAllEventListeners=G.off,G.addOneTimeEventListener=G.once,G.fireEvent=G.fire,G.hasEventListeners=G.listens;var K=I.extend(G);function q(a,p,S){this.x=S?Math.round(a):a,this.y=S?Math.round(p):p}var ve=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};q.prototype={clone:function(){return new q(this.x,this.y)},add:function(a){return this.clone()._add(Ce(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(Ce(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new q(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new q(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ve(this.x),this.y=ve(this.y),this},distanceTo:function(a){a=Ce(a);var p=a.x-this.x,S=a.y-this.y;return Math.sqrt(p*p+S*S)},equals:function(a){return a=Ce(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=Ce(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function Ce(a,p,S){return a instanceof q?a:Z(a)?new q(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new q(a.x,a.y):new q(a,p,S)}function Xe(a,p){if(a)for(var S=p?[a,p]:a,z=0,re=S.length;z<re;z++)this.extend(S[z])}Xe.prototype={extend:function(a){var p,S;if(!a)return this;if(a instanceof q||typeof a[0]=="number"||"x"in a)p=S=Ce(a);else if(a=B(a),p=a.min,S=a.max,!p||!S)return this;return!this.min&&!this.max?(this.min=p.clone(),this.max=S.clone()):(this.min.x=Math.min(p.x,this.min.x),this.max.x=Math.max(S.x,this.max.x),this.min.y=Math.min(p.y,this.min.y),this.max.y=Math.max(S.y,this.max.y)),this},getCenter:function(a){return Ce((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return Ce(this.min.x,this.max.y)},getTopRight:function(){return Ce(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var p,S;return typeof a[0]=="number"||a instanceof q?a=Ce(a):a=B(a),a instanceof Xe?(p=a.min,S=a.max):p=S=a,p.x>=this.min.x&&S.x<=this.max.x&&p.y>=this.min.y&&S.y<=this.max.y},intersects:function(a){a=B(a);var p=this.min,S=this.max,z=a.min,re=a.max,Se=re.x>=p.x&&z.x<=S.x,at=re.y>=p.y&&z.y<=S.y;return Se&&at},overlaps:function(a){a=B(a);var p=this.min,S=this.max,z=a.min,re=a.max,Se=re.x>p.x&&z.x<S.x,at=re.y>p.y&&z.y<S.y;return Se&&at},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var p=this.min,S=this.max,z=Math.abs(p.x-S.x)*a,re=Math.abs(p.y-S.y)*a;return B(Ce(p.x-z,p.y-re),Ce(S.x+z,S.y+re))},equals:function(a){return a?(a=B(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function B(a,p){return!a||a instanceof Xe?a:new Xe(a,p)}function te(a,p){if(a)for(var S=p?[a,p]:a,z=0,re=S.length;z<re;z++)this.extend(S[z])}te.prototype={extend:function(a){var p=this._southWest,S=this._northEast,z,re;if(a instanceof ae)z=a,re=a;else if(a instanceof te){if(z=a._southWest,re=a._northEast,!z||!re)return this}else return a?this.extend(we(a)||se(a)):this;return!p&&!S?(this._southWest=new ae(z.lat,z.lng),this._northEast=new ae(re.lat,re.lng)):(p.lat=Math.min(z.lat,p.lat),p.lng=Math.min(z.lng,p.lng),S.lat=Math.max(re.lat,S.lat),S.lng=Math.max(re.lng,S.lng)),this},pad:function(a){var p=this._southWest,S=this._northEast,z=Math.abs(p.lat-S.lat)*a,re=Math.abs(p.lng-S.lng)*a;return new te(new ae(p.lat-z,p.lng-re),new ae(S.lat+z,S.lng+re))},getCenter:function(){return new ae((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ae(this.getNorth(),this.getWest())},getSouthEast:function(){return new ae(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof ae||"lat"in a?a=we(a):a=se(a);var p=this._southWest,S=this._northEast,z,re;return a instanceof te?(z=a.getSouthWest(),re=a.getNorthEast()):z=re=a,z.lat>=p.lat&&re.lat<=S.lat&&z.lng>=p.lng&&re.lng<=S.lng},intersects:function(a){a=se(a);var p=this._southWest,S=this._northEast,z=a.getSouthWest(),re=a.getNorthEast(),Se=re.lat>=p.lat&&z.lat<=S.lat,at=re.lng>=p.lng&&z.lng<=S.lng;return Se&&at},overlaps:function(a){a=se(a);var p=this._southWest,S=this._northEast,z=a.getSouthWest(),re=a.getNorthEast(),Se=re.lat>p.lat&&z.lat<S.lat,at=re.lng>p.lng&&z.lng<S.lng;return Se&&at},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,p){return a?(a=se(a),this._southWest.equals(a.getSouthWest(),p)&&this._northEast.equals(a.getNorthEast(),p)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function se(a,p){return a instanceof te?a:new te(a,p)}function ae(a,p,S){if(isNaN(a)||isNaN(p))throw new Error("Invalid LatLng object: ("+a+", "+p+")");this.lat=+a,this.lng=+p,S!==void 0&&(this.alt=+S)}ae.prototype={equals:function(a,p){if(!a)return!1;a=we(a);var S=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return S<=(p===void 0?1e-9:p)},toString:function(a){return"LatLng("+x(this.lat,a)+", "+x(this.lng,a)+")"},distanceTo:function(a){return Q.distance(this,we(a))},wrap:function(){return Q.wrapLatLng(this)},toBounds:function(a){var p=180*a/40075017,S=p/Math.cos(Math.PI/180*this.lat);return se([this.lat-p,this.lng-S],[this.lat+p,this.lng+S])},clone:function(){return new ae(this.lat,this.lng,this.alt)}};function we(a,p,S){return a instanceof ae?a:Z(a)&&typeof a[0]!="object"?a.length===3?new ae(a[0],a[1],a[2]):a.length===2?new ae(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new ae(a.lat,"lng"in a?a.lng:a.lon,a.alt):p===void 0?null:new ae(a,p,S)}var fe={latLngToPoint:function(a,p){var S=this.projection.project(a),z=this.scale(p);return this.transformation._transform(S,z)},pointToLatLng:function(a,p){var S=this.scale(p),z=this.transformation.untransform(a,S);return this.projection.unproject(z)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var p=this.projection.bounds,S=this.scale(a),z=this.transformation.transform(p.min,S),re=this.transformation.transform(p.max,S);return new Xe(z,re)},infinite:!1,wrapLatLng:function(a){var p=this.wrapLng?v(a.lng,this.wrapLng,!0):a.lng,S=this.wrapLat?v(a.lat,this.wrapLat,!0):a.lat,z=a.alt;return new ae(S,p,z)},wrapLatLngBounds:function(a){var p=a.getCenter(),S=this.wrapLatLng(p),z=p.lat-S.lat,re=p.lng-S.lng;if(z===0&&re===0)return a;var Se=a.getSouthWest(),at=a.getNorthEast(),Pt=new ae(Se.lat-z,Se.lng-re),Ft=new ae(at.lat-z,at.lng-re);return new te(Pt,Ft)}},Q=i({},fe,{wrapLng:[-180,180],R:6371e3,distance:function(a,p){var S=Math.PI/180,z=a.lat*S,re=p.lat*S,Se=Math.sin((p.lat-a.lat)*S/2),at=Math.sin((p.lng-a.lng)*S/2),Pt=Se*Se+Math.cos(z)*Math.cos(re)*at*at,Ft=2*Math.atan2(Math.sqrt(Pt),Math.sqrt(1-Pt));return this.R*Ft}}),ue=6378137,Re={R:ue,MAX_LATITUDE:85.0511287798,project:function(a){var p=Math.PI/180,S=this.MAX_LATITUDE,z=Math.max(Math.min(S,a.lat),-S),re=Math.sin(z*p);return new q(this.R*a.lng*p,this.R*Math.log((1+re)/(1-re))/2)},unproject:function(a){var p=180/Math.PI;return new ae((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*p,a.x*p/this.R)},bounds:function(){var a=ue*Math.PI;return new Xe([-a,-a],[a,a])}()};function Me(a,p,S,z){if(Z(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=p,this._c=S,this._d=z}Me.prototype={transform:function(a,p){return this._transform(a.clone(),p)},_transform:function(a,p){return p=p||1,a.x=p*(this._a*a.x+this._b),a.y=p*(this._c*a.y+this._d),a},untransform:function(a,p){return p=p||1,new q((a.x/p-this._b)/this._a,(a.y/p-this._d)/this._c)}};function Ze(a,p,S,z){return new Me(a,p,S,z)}var oe=i({},Q,{code:"EPSG:3857",projection:Re,transformation:function(){var a=.5/(Math.PI*Re.R);return Ze(a,.5,-a,.5)}()}),me=i({},oe,{code:"EPSG:900913"});function pe(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function de(a,p){var S="",z,re,Se,at,Pt,Ft;for(z=0,Se=a.length;z<Se;z++){for(Pt=a[z],re=0,at=Pt.length;re<at;re++)Ft=Pt[re],S+=(re?"L":"M")+Ft.x+" "+Ft.y;S+=p?bn.svg?"z":"x":""}return S||"M0 0"}var ze=document.documentElement.style,Ke="ActiveXObject"in window,Ge=Ke&&!document.addEventListener,Qe="msLaunchUri"in navigator&&!("documentMode"in document),Ve=Wn("webkit"),ot=Wn("android"),At=Wn("android 2")||Wn("android 3"),Et=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),zt=ot&&Wn("Google")&&Et<537&&!("AudioNode"in window),Kt=!!window.opera,dn=!Qe&&Wn("chrome"),mn=Wn("gecko")&&!Ve&&!Kt&&!Ke,et=!dn&&Wn("safari"),st=Wn("phantom"),rt="OTransition"in ze,Vt=navigator.platform.indexOf("Win")===0,Xt=Ke&&"transition"in ze,ft="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!At,Ue="MozPerspective"in ze,Dt=!window.L_DISABLE_3D&&(Xt||ft||Ue)&&!rt&&!st,gn=typeof orientation<"u"||Wn("mobile"),un=gn&&Ve,Qt=gn&&ft,Ye=!window.PointerEvent&&window.MSPointerEvent,vn=!!(window.PointerEvent||Ye),Sn="ontouchstart"in window||!!window.TouchEvent,ln=!window.L_NO_TOUCH&&(Sn||vn),wn=gn&&Kt,ur=gn&&mn,En=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,rr=function(){var a=!1;try{var p=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",y,p),window.removeEventListener("testPassiveEventSupport",y,p)}catch{}return a}(),Wr=function(){return!!document.createElement("canvas").getContext}(),ki=!!(document.createElementNS&&pe("svg").createSVGRect),Fn=!!ki&&function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),oo=!ki&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var p=a.firstChild;return p.style.behavior="url(#default#VML)",p&&typeof p.adj=="object"}catch{return!1}}(),jo=navigator.platform.indexOf("Mac")===0,fi=navigator.platform.indexOf("Linux")===0;function Wn(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var bn={ie:Ke,ielt9:Ge,edge:Qe,webkit:Ve,android:ot,android23:At,androidStock:zt,opera:Kt,chrome:dn,gecko:mn,safari:et,phantom:st,opera12:rt,win:Vt,ie3d:Xt,webkit3d:ft,gecko3d:Ue,any3d:Dt,mobile:gn,mobileWebkit:un,mobileWebkit3d:Qt,msPointer:Ye,pointer:vn,touch:ln,touchNative:Sn,mobileOpera:wn,mobileGecko:ur,retina:En,passiveEvents:rr,canvas:Wr,svg:ki,vml:oo,inlineSvg:Fn,mac:jo,linux:fi},tr=bn.msPointer?"MSPointerDown":"pointerdown",hn=bn.msPointer?"MSPointerMove":"pointermove",xo=bn.msPointer?"MSPointerUp":"pointerup",_i=bn.msPointer?"MSPointerCancel":"pointercancel",bi={touchstart:tr,touchmove:hn,touchend:xo,touchcancel:_i},di={touchstart:pi,touchmove:Fi,touchend:Fi,touchcancel:Fi},Ri={},Lo=!1;function yr(a,p,S){return p==="touchstart"&&Mn(),di[p]?(S=di[p].bind(this,S),a.addEventListener(bi[p],S,!1),S):(console.warn("wrong event specified:",p),y)}function ds(a,p,S){if(!bi[p]){console.warn("wrong event specified:",p);return}a.removeEventListener(bi[p],S,!1)}function xl(a){Ri[a.pointerId]=a}function Ds(a){Ri[a.pointerId]&&(Ri[a.pointerId]=a)}function jr(a){delete Ri[a.pointerId]}function Mn(){Lo||(document.addEventListener(tr,xl,!0),document.addEventListener(hn,Ds,!0),document.addEventListener(xo,jr,!0),document.addEventListener(_i,jr,!0),Lo=!0)}function Fi(a,p){if(p.pointerType!==(p.MSPOINTER_TYPE_MOUSE||"mouse")){p.touches=[];for(var S in Ri)p.touches.push(Ri[S]);p.changedTouches=[p],a(p)}}function pi(a,p){p.MSPOINTER_TYPE_TOUCH&&p.pointerType===p.MSPOINTER_TYPE_TOUCH&&cr(p),Fi(a,p)}function ji(a){var p={},S,z;for(z in a)S=a[z],p[z]=S&&S.bind?S.bind(a):S;return a=p,p.type="dblclick",p.detail=2,p.isTrusted=!1,p._simulated=!0,p}var Ni=200;function ps(a,p){a.addEventListener("dblclick",p);var S=0,z;function re(Se){if(Se.detail!==1){z=Se.detail;return}if(!(Se.pointerType==="mouse"||Se.sourceCapabilities&&!Se.sourceCapabilities.firesTouchEvents)){var at=Fa(Se);if(!(at.some(function(Ft){return Ft instanceof HTMLLabelElement&&Ft.attributes.for})&&!at.some(function(Ft){return Ft instanceof HTMLInputElement||Ft instanceof HTMLSelectElement}))){var Pt=Date.now();Pt-S<=Ni?(z++,z===2&&p(ji(Se))):z=1,S=Pt}}}return a.addEventListener("click",re),{dblclick:p,simDblclick:re}}function Ls(a,p){a.removeEventListener("dblclick",p.dblclick),a.removeEventListener("click",p.simDblclick)}var wr=Eo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ss=Eo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ti=Ss==="webkitTransition"||Ss==="OTransition"?Ss+"End":"transitionend";function zo(a){return typeof a=="string"?document.getElementById(a):a}function xr(a,p){var S=a.style[p]||a.currentStyle&&a.currentStyle[p];if((!S||S==="auto")&&document.defaultView){var z=document.defaultView.getComputedStyle(a,null);S=z?z[p]:null}return S==="auto"?null:S}function sn(a,p,S){var z=document.createElement(a);return z.className=p||"",S&&S.appendChild(z),z}function jt(a){var p=a.parentNode;p&&p.removeChild(a)}function Cr(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function Di(a){var p=a.parentNode;p&&p.lastChild!==a&&p.appendChild(a)}function zi(a){var p=a.parentNode;p&&p.firstChild!==a&&p.insertBefore(a,p.firstChild)}function Es(a,p){if(a.classList!==void 0)return a.classList.contains(p);var S=fr(a);return S.length>0&&new RegExp("(^|\\s)"+p+"(\\s|$)").test(S)}function sr(a,p){if(a.classList!==void 0)for(var S=P(p),z=0,re=S.length;z<re;z++)a.classList.add(S[z]);else if(!Es(a,p)){var Se=fr(a);Is(a,(Se?Se+" ":"")+p)}}function Lr(a,p){a.classList!==void 0?a.classList.remove(p):Is(a,_((" "+fr(a)+" ").replace(" "+p+" "," ")))}function Is(a,p){a.className.baseVal===void 0?a.className=p:a.className.baseVal=p}function fr(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function Ui(a,p){"opacity"in a.style?a.style.opacity=p:"filter"in a.style&&So(a,p)}function So(a,p){var S=!1,z="DXImageTransform.Microsoft.Alpha";try{S=a.filters.item(z)}catch{if(p===1)return}p=Math.round(p*100),S?(S.Enabled=p!==100,S.Opacity=p):a.style.filter+=" progid:"+z+"(opacity="+p+")"}function Eo(a){for(var p=document.documentElement.style,S=0;S<a.length;S++)if(a[S]in p)return a[S];return!1}function so(a,p,S){var z=p||new q(0,0);a.style[wr]=(bn.ie3d?"translate("+z.x+"px,"+z.y+"px)":"translate3d("+z.x+"px,"+z.y+"px,0)")+(S?" scale("+S+")":"")}function vi(a,p){a._leaflet_pos=p,bn.any3d?so(a,p):(a.style.left=p.x+"px",a.style.top=p.y+"px")}function Qo(a){return a._leaflet_pos||new q(0,0)}var Ks,co,ha;if("onselectstart"in document)Ks=function(){dr(window,"selectstart",cr)},co=function(){$r(window,"selectstart",cr)};else{var Cs=Eo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ks=function(){if(Cs){var a=document.documentElement.style;ha=a[Cs],a[Cs]="none"}},co=function(){Cs&&(document.documentElement.style[Cs]=ha,ha=void 0)}}function Ll(){dr(window,"dragstart",cr)}function Or(){$r(window,"dragstart",cr)}var ho,$i;function Sl(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(ao(),ho=a,$i=a.style.outlineStyle,a.style.outlineStyle="none",dr(window,"keydown",ao))}function ao(){ho&&(ho.style.outlineStyle=$i,ho=void 0,$i=void 0,$r(window,"keydown",ao))}function qu(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function ql(a){var p=a.getBoundingClientRect();return{x:p.width/a.offsetWidth||1,y:p.height/a.offsetHeight||1,boundingClientRect:p}}var ar={__proto__:null,TRANSFORM:wr,TRANSITION:Ss,TRANSITION_END:Ti,get:zo,getStyle:xr,create:sn,remove:jt,empty:Cr,toFront:Di,toBack:zi,hasClass:Es,addClass:sr,removeClass:Lr,setClass:Is,getClass:fr,setOpacity:Ui,testProp:Eo,setTransform:so,setPosition:vi,getPosition:Qo,get disableTextSelection(){return Ks},get enableTextSelection(){return co},disableImageDrag:Ll,enableImageDrag:Or,preventOutline:Sl,restoreOutline:ao,getSizedParentNode:qu,getScale:ql};function dr(a,p,S,z){if(p&&typeof p=="object")for(var re in p)el(a,re,p[re],S);else{p=P(p);for(var Se=0,at=p.length;Se<at;Se++)el(a,p[Se],S,z)}return this}var Rs="_leaflet_events";function $r(a,p,S,z){if(arguments.length===1)vu(a),delete a[Rs];else if(p&&typeof p=="object")for(var re in p)Fs(a,re,p[re],S);else if(p=P(p),arguments.length===2)vu(a,function(Pt){return J(p,Pt)!==-1});else for(var Se=0,at=p.length;Se<at;Se++)Fs(a,p[Se],S,z);return this}function vu(a,p){for(var S in a[Rs]){var z=S.split(/\d/)[0];(!p||p(z))&&Fs(a,z,null,null,S)}}var Qa={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function el(a,p,S,z){var re=p+h(S)+(z?"_"+h(z):"");if(a[Rs]&&a[Rs][re])return this;var Se=function(Pt){return S.call(z||a,Pt||window.event)},at=Se;!bn.touchNative&&bn.pointer&&p.indexOf("touch")===0?Se=yr(a,p,Se):bn.touch&&p==="dblclick"?Se=ps(a,Se):"addEventListener"in a?p==="touchstart"||p==="touchmove"||p==="wheel"||p==="mousewheel"?a.addEventListener(Qa[p]||p,Se,bn.passiveEvents?{passive:!1}:!1):p==="mouseenter"||p==="mouseleave"?(Se=function(Pt){Pt=Pt||window.event,tl(a,Pt)&&at(Pt)},a.addEventListener(Qa[p],Se,!1)):a.addEventListener(p,at,!1):a.attachEvent("on"+p,Se),a[Rs]=a[Rs]||{},a[Rs][re]=Se}function Fs(a,p,S,z,re){re=re||p+h(S)+(z?"_"+h(z):"");var Se=a[Rs]&&a[Rs][re];if(!Se)return this;!bn.touchNative&&bn.pointer&&p.indexOf("touch")===0?ds(a,p,Se):bn.touch&&p==="dblclick"?Ls(a,Se):"removeEventListener"in a?a.removeEventListener(Qa[p]||p,Se,!1):a.detachEvent("on"+p,Se),a[Rs][re]=null}function Ra(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function yu(a){return el(a,"wheel",Ra),this}function El(a){return dr(a,"mousedown touchstart dblclick contextmenu",Ra),a._leaflet_disable_click=!0,this}function cr(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function kr(a){return cr(a),Ra(a),this}function Fa(a){if(a.composedPath)return a.composedPath();for(var p=[],S=a.target;S;)p.push(S),S=S.parentNode;return p}function Wu(a,p){if(!p)return new q(a.clientX,a.clientY);var S=ql(p),z=S.boundingClientRect;return new q((a.clientX-z.left)/S.x-p.clientLeft,(a.clientY-z.top)/S.y-p.clientTop)}var Cl=bn.linux&&bn.chrome?window.devicePixelRatio:bn.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Wl(a){return bn.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/Cl:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function tl(a,p){var S=p.relatedTarget;if(!S)return!0;try{for(;S&&S!==a;)S=S.parentNode}catch{return!1}return S!==a}var Pl={__proto__:null,on:dr,off:$r,stopPropagation:Ra,disableScrollPropagation:yu,disableClickPropagation:El,preventDefault:cr,stop:kr,getPropagationPath:Fa,getMousePosition:Wu,getWheelDelta:Wl,isExternalTarget:tl,addListener:dr,removeListener:$r},Zl=K.extend({run:function(a,p,S,z){this.stop(),this._el=a,this._inProgress=!0,this._duration=S||.25,this._easeOutPower=1/Math.max(z||.5,.2),this._startPos=Qo(a),this._offset=p.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=$(this._animate,this),this._step()},_step:function(a){var p=+new Date-this._startTime,S=this._duration*1e3;p<S?this._runFrame(this._easeOut(p/S),a):(this._runFrame(1),this._complete())},_runFrame:function(a,p){var S=this._startPos.add(this._offset.multiplyBy(a));p&&S._round(),vi(this._el,S),this.fire("step")},_complete:function(){D(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),Nr=K.extend({options:{crs:oe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,p){p=T(this,p),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),p.maxBounds&&this.setMaxBounds(p.maxBounds),p.zoom!==void 0&&(this._zoom=this._limitZoom(p.zoom)),p.center&&p.zoom!==void 0&&this.setView(we(p.center),p.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ss&&bn.any3d&&!bn.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),dr(this._proxy,Ti,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,p,S){if(p=p===void 0?this._zoom:this._limitZoom(p),a=this._limitCenter(we(a),p,this.options.maxBounds),S=S||{},this._stop(),this._loaded&&!S.reset&&S!==!0){S.animate!==void 0&&(S.zoom=i({animate:S.animate},S.zoom),S.pan=i({animate:S.animate,duration:S.duration},S.pan));var z=this._zoom!==p?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,p,S.zoom):this._tryAnimatedPan(a,S.pan);if(z)return clearTimeout(this._sizeTimer),this}return this._resetView(a,p,S.pan&&S.pan.noMoveStart),this},setZoom:function(a,p){return this._loaded?this.setView(this.getCenter(),a,{zoom:p}):(this._zoom=a,this)},zoomIn:function(a,p){return a=a||(bn.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,p)},zoomOut:function(a,p){return a=a||(bn.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,p)},setZoomAround:function(a,p,S){var z=this.getZoomScale(p),re=this.getSize().divideBy(2),Se=a instanceof q?a:this.latLngToContainerPoint(a),at=Se.subtract(re).multiplyBy(1-1/z),Pt=this.containerPointToLatLng(re.add(at));return this.setView(Pt,p,{zoom:S})},_getBoundsCenterZoom:function(a,p){p=p||{},a=a.getBounds?a.getBounds():se(a);var S=Ce(p.paddingTopLeft||p.padding||[0,0]),z=Ce(p.paddingBottomRight||p.padding||[0,0]),re=this.getBoundsZoom(a,!1,S.add(z));if(re=typeof p.maxZoom=="number"?Math.min(p.maxZoom,re):re,re===1/0)return{center:a.getCenter(),zoom:re};var Se=z.subtract(S).divideBy(2),at=this.project(a.getSouthWest(),re),Pt=this.project(a.getNorthEast(),re),Ft=this.unproject(at.add(Pt).divideBy(2).add(Se),re);return{center:Ft,zoom:re}},fitBounds:function(a,p){if(a=se(a),!a.isValid())throw new Error("Bounds are not valid.");var S=this._getBoundsCenterZoom(a,p);return this.setView(S.center,S.zoom,p)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,p){return this.setView(a,this._zoom,{pan:p})},panBy:function(a,p){if(a=Ce(a).round(),p=p||{},!a.x&&!a.y)return this.fire("moveend");if(p.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Zl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),p.noMoveStart||this.fire("movestart"),p.animate!==!1){sr(this._mapPane,"leaflet-pan-anim");var S=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,S,p.duration||.25,p.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,p,S){if(S=S||{},S.animate===!1||!bn.any3d)return this.setView(a,p,S);this._stop();var z=this.project(this.getCenter()),re=this.project(a),Se=this.getSize(),at=this._zoom;a=we(a),p=p===void 0?at:p;var Pt=Math.max(Se.x,Se.y),Ft=Pt*this.getZoomScale(at,p),nn=re.distanceTo(z)||1,Tn=1.42,Vn=Tn*Tn;function Er(Yr){var Oo=Yr?-1:1,Te=Yr?Ft:Pt,is=Ft*Ft-Pt*Pt+Oo*Vn*Vn*nn*nn,wu=2*Te*Vn*nn,_o=is/wu,Mr=Math.sqrt(_o*_o+1)-_o,$c=Mr<1e-9?-18:Math.log(Mr);return $c}function to(Yr){return(Math.exp(Yr)-Math.exp(-Yr))/2}function Bi(Yr){return(Math.exp(Yr)+Math.exp(-Yr))/2}function yo(Yr){return to(Yr)/Bi(Yr)}var Si=Er(0);function rs(Yr){return Pt*(Bi(Si)/Bi(Si+Tn*Yr))}function vc(Yr){return Pt*(Bi(Si)*yo(Si+Tn*Yr)-to(Si))/Vn}function oa(Yr){return 1-Math.pow(1-Yr,1.5)}var Hs=Date.now(),Ms=(Er(1)-Si)/Tn,xh=S.duration?1e3*S.duration:1e3*Ms*.8;function Xl(){var Yr=(Date.now()-Hs)/xh,Oo=oa(Yr)*Ms;Yr<=1?(this._flyToFrame=$(Xl,this),this._move(this.unproject(z.add(re.subtract(z).multiplyBy(vc(Oo)/nn)),at),this.getScaleZoom(Pt/rs(Oo),at),{flyTo:!0})):this._move(a,p)._moveEnd(!0)}return this._moveStart(!0,S.noMoveStart),Xl.call(this),this},flyToBounds:function(a,p){var S=this._getBoundsCenterZoom(a,p);return this.flyTo(S.center,S.zoom,p)},setMaxBounds:function(a){return a=se(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var p=this.options.minZoom;return this.options.minZoom=a,this._loaded&&p!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var p=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&p!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,p){this._enforcingBounds=!0;var S=this.getCenter(),z=this._limitCenter(S,this._zoom,se(a));return S.equals(z)||this.panTo(z,p),this._enforcingBounds=!1,this},panInside:function(a,p){p=p||{};var S=Ce(p.paddingTopLeft||p.padding||[0,0]),z=Ce(p.paddingBottomRight||p.padding||[0,0]),re=this.project(this.getCenter()),Se=this.project(a),at=this.getPixelBounds(),Pt=B([at.min.add(S),at.max.subtract(z)]),Ft=Pt.getSize();if(!Pt.contains(Se)){this._enforcingBounds=!0;var nn=Se.subtract(Pt.getCenter()),Tn=Pt.extend(Se).getSize().subtract(Ft);re.x+=nn.x<0?-Tn.x:Tn.x,re.y+=nn.y<0?-Tn.y:Tn.y,this.panTo(this.unproject(re),p),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=i({animate:!1,pan:!0},a===!0?{animate:!0}:a);var p=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var S=this.getSize(),z=p.divideBy(2).round(),re=S.divideBy(2).round(),Se=z.subtract(re);return!Se.x&&!Se.y?this:(a.animate&&a.pan?this.panBy(Se):(a.pan&&this._rawPanBy(Se),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:p,newSize:S}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=i({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var p=o(this._handleGeolocationResponse,this),S=o(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(p,S,a):navigator.geolocation.getCurrentPosition(p,S,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var p=a.code,S=a.message||(p===1?"permission denied":p===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:p,message:"Geolocation error: "+S+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var p=a.coords.latitude,S=a.coords.longitude,z=new ae(p,S),re=z.toBounds(a.coords.accuracy*2),Se=this._locateOptions;if(Se.setView){var at=this.getBoundsZoom(re);this.setView(z,Se.maxZoom?Math.min(at,Se.maxZoom):at)}var Pt={latlng:z,bounds:re,timestamp:a.timestamp};for(var Ft in a.coords)typeof a.coords[Ft]=="number"&&(Pt[Ft]=a.coords[Ft]);this.fire("locationfound",Pt)}},addHandler:function(a,p){if(!p)return this;var S=this[a]=new p(this);return this._handlers.push(S),this.options[a]&&S.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),jt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(D(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)jt(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,p){var S="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),z=sn("div",S,p||this._mapPane);return a&&(this._panes[a]=z),z},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),p=this.unproject(a.getBottomLeft()),S=this.unproject(a.getTopRight());return new te(p,S)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,p,S){a=se(a),S=Ce(S||[0,0]);var z=this.getZoom()||0,re=this.getMinZoom(),Se=this.getMaxZoom(),at=a.getNorthWest(),Pt=a.getSouthEast(),Ft=this.getSize().subtract(S),nn=B(this.project(Pt,z),this.project(at,z)).getSize(),Tn=bn.any3d?this.options.zoomSnap:1,Vn=Ft.x/nn.x,Er=Ft.y/nn.y,to=p?Math.max(Vn,Er):Math.min(Vn,Er);return z=this.getScaleZoom(to,z),Tn&&(z=Math.round(z/(Tn/100))*(Tn/100),z=p?Math.ceil(z/Tn)*Tn:Math.floor(z/Tn)*Tn),Math.max(re,Math.min(Se,z))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,p){var S=this._getTopLeftPoint(a,p);return new Xe(S,S.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,p){var S=this.options.crs;return p=p===void 0?this._zoom:p,S.scale(a)/S.scale(p)},getScaleZoom:function(a,p){var S=this.options.crs;p=p===void 0?this._zoom:p;var z=S.zoom(a*S.scale(p));return isNaN(z)?1/0:z},project:function(a,p){return p=p===void 0?this._zoom:p,this.options.crs.latLngToPoint(we(a),p)},unproject:function(a,p){return p=p===void 0?this._zoom:p,this.options.crs.pointToLatLng(Ce(a),p)},layerPointToLatLng:function(a){var p=Ce(a).add(this.getPixelOrigin());return this.unproject(p)},latLngToLayerPoint:function(a){var p=this.project(we(a))._round();return p._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(we(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(se(a))},distance:function(a,p){return this.options.crs.distance(we(a),we(p))},containerPointToLayerPoint:function(a){return Ce(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return Ce(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var p=this.containerPointToLayerPoint(Ce(a));return this.layerPointToLatLng(p)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(we(a)))},mouseEventToContainerPoint:function(a){return Wu(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var p=this._container=zo(a);if(p){if(p._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");dr(p,"scroll",this._onScroll,this),this._containerId=h(p)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&bn.any3d,sr(a,"leaflet-container"+(bn.touch?" leaflet-touch":"")+(bn.retina?" leaflet-retina":"")+(bn.ielt9?" leaflet-oldie":"")+(bn.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var p=xr(a,"position");p!=="absolute"&&p!=="relative"&&p!=="fixed"&&p!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),vi(this._mapPane,new q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(sr(a.markerPane,"leaflet-zoom-hide"),sr(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,p,S){vi(this._mapPane,new q(0,0));var z=!this._loaded;this._loaded=!0,p=this._limitZoom(p),this.fire("viewprereset");var re=this._zoom!==p;this._moveStart(re,S)._move(a,p)._moveEnd(re),this.fire("viewreset"),z&&this.fire("load")},_moveStart:function(a,p){return a&&this.fire("zoomstart"),p||this.fire("movestart"),this},_move:function(a,p,S,z){p===void 0&&(p=this._zoom);var re=this._zoom!==p;return this._zoom=p,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),z?S&&S.pinch&&this.fire("zoom",S):((re||S&&S.pinch)&&this.fire("zoom",S),this.fire("move",S)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return D(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){vi(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[h(this._container)]=this;var p=a?$r:dr;p(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&p(window,"resize",this._onResize,this),bn.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){D(this._resizeRequest),this._resizeRequest=$(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,p){for(var S=[],z,re=p==="mouseout"||p==="mouseover",Se=a.target||a.srcElement,at=!1;Se;){if(z=this._targets[h(Se)],z&&(p==="click"||p==="preclick")&&this._draggableMoved(z)){at=!0;break}if(z&&z.listens(p,!0)&&(re&&!tl(Se,a)||(S.push(z),re))||Se===this._container)break;Se=Se.parentNode}return!S.length&&!at&&!re&&this.listens(p,!0)&&(S=[this]),S},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var p=a.target||a.srcElement;if(!(!this._loaded||p._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(p))){var S=a.type;S==="mousedown"&&Sl(p),this._fireDOMEvent(a,S)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,p,S){if(a.type==="click"){var z=i({},a);z.type="preclick",this._fireDOMEvent(z,z.type,S)}var re=this._findEventTargets(a,p);if(S){for(var Se=[],at=0;at<S.length;at++)S[at].listens(p,!0)&&Se.push(S[at]);re=Se.concat(re)}if(re.length){p==="contextmenu"&&cr(a);var Pt=re[0],Ft={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var nn=Pt.getLatLng&&(!Pt._radius||Pt._radius<=10);Ft.containerPoint=nn?this.latLngToContainerPoint(Pt.getLatLng()):this.mouseEventToContainerPoint(a),Ft.layerPoint=this.containerPointToLayerPoint(Ft.containerPoint),Ft.latlng=nn?Pt.getLatLng():this.layerPointToLatLng(Ft.layerPoint)}for(at=0;at<re.length;at++)if(re[at].fire(p,Ft,!0),Ft.originalEvent._stopped||re[at].options.bubblingMouseEvents===!1&&J(this._mouseEvents,p)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,p=this._handlers.length;a<p;a++)this._handlers[a].disable()},whenReady:function(a,p){return this._loaded?a.call(p||this,{target:this}):this.on("load",a,p),this},_getMapPanePos:function(){return Qo(this._mapPane)||new q(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,p){var S=a&&p!==void 0?this._getNewPixelOrigin(a,p):this.getPixelOrigin();return S.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,p){var S=this.getSize()._divideBy(2);return this.project(a,p)._subtract(S)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,p,S){var z=this._getNewPixelOrigin(S,p);return this.project(a,p)._subtract(z)},_latLngBoundsToNewLayerBounds:function(a,p,S){var z=this._getNewPixelOrigin(S,p);return B([this.project(a.getSouthWest(),p)._subtract(z),this.project(a.getNorthWest(),p)._subtract(z),this.project(a.getSouthEast(),p)._subtract(z),this.project(a.getNorthEast(),p)._subtract(z)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,p,S){if(!S)return a;var z=this.project(a,p),re=this.getSize().divideBy(2),Se=new Xe(z.subtract(re),z.add(re)),at=this._getBoundsOffset(Se,S,p);return Math.abs(at.x)<=1&&Math.abs(at.y)<=1?a:this.unproject(z.add(at),p)},_limitOffset:function(a,p){if(!p)return a;var S=this.getPixelBounds(),z=new Xe(S.min.add(a),S.max.add(a));return a.add(this._getBoundsOffset(z,p))},_getBoundsOffset:function(a,p,S){var z=B(this.project(p.getNorthEast(),S),this.project(p.getSouthWest(),S)),re=z.min.subtract(a.min),Se=z.max.subtract(a.max),at=this._rebound(re.x,-Se.x),Pt=this._rebound(re.y,-Se.y);return new q(at,Pt)},_rebound:function(a,p){return a+p>0?Math.round(a-p)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(p))},_limitZoom:function(a){var p=this.getMinZoom(),S=this.getMaxZoom(),z=bn.any3d?this.options.zoomSnap:1;return z&&(a=Math.round(a/z)*z),Math.max(p,Math.min(S,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Lr(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,p){var S=this._getCenterOffset(a)._trunc();return(p&&p.animate)!==!0&&!this.getSize().contains(S)?!1:(this.panBy(S,p),!0)},_createAnimProxy:function(){var a=this._proxy=sn("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(p){var S=wr,z=this._proxy.style[S];so(this._proxy,this.project(p.center,p.zoom),this.getZoomScale(p.zoom,1)),z===this._proxy.style[S]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){jt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),p=this.getZoom();so(this._proxy,this.project(a,p),this.getZoomScale(p,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,p,S){if(this._animatingZoom)return!0;if(S=S||{},!this._zoomAnimated||S.animate===!1||this._nothingToAnimate()||Math.abs(p-this._zoom)>this.options.zoomAnimationThreshold)return!1;var z=this.getZoomScale(p),re=this._getCenterOffset(a)._divideBy(1-1/z);return S.animate!==!0&&!this.getSize().contains(re)?!1:($(function(){this._moveStart(!0,S.noMoveStart||!1)._animateZoom(a,p,!0)},this),!0)},_animateZoom:function(a,p,S,z){this._mapPane&&(S&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=p,sr(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:p,noUpdate:z}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Lr(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Vi(a,p){return new Nr(a,p)}var Xn=I.extend({options:{position:"topright"},initialize:function(a){T(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var p=this._map;return p&&p.removeControl(this),this.options.position=a,p&&p.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var p=this._container=this.onAdd(a),S=this.getPosition(),z=a._controlCorners[S];return sr(p,"leaflet-control"),S.indexOf("bottom")!==-1?z.insertBefore(p,z.firstChild):z.appendChild(p),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(jt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),Hi=function(a){return new Xn(a)};Nr.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},p="leaflet-",S=this._controlContainer=sn("div",p+"control-container",this._container);function z(re,Se){var at=p+re+" "+p+Se;a[re+Se]=sn("div",at,S)}z("top","left"),z("top","right"),z("bottom","left"),z("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)jt(this._controlCorners[a]);jt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var nl=Xn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,p,S,z){return S<z?-1:z<S?1:0}},initialize:function(a,p,S){T(this,S),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var z in a)this._addLayer(a[z],z);for(z in p)this._addLayer(p[z],z,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var p=0;p<this._layers.length;p++)this._layers[p].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return Xn.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,p){return this._addLayer(a,p),this._map?this._update():this},addOverlay:function(a,p){return this._addLayer(a,p,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var p=this._getLayer(h(a));return p&&this._layers.splice(this._layers.indexOf(p),1),this._map?this._update():this},expand:function(){sr(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(sr(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):Lr(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Lr(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",p=this._container=sn("div",a),S=this.options.collapsed;p.setAttribute("aria-haspopup",!0),El(p),yu(p);var z=this._section=sn("section",a+"-list");S&&(this._map.on("click",this.collapse,this),dr(p,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var re=this._layersLink=sn("a",a+"-toggle",p);re.href="#",re.title="Layers",re.setAttribute("role","button"),dr(re,{keydown:function(Se){Se.keyCode===13&&this._expandSafely()},click:function(Se){cr(Se),this._expandSafely()}},this),S||this.expand(),this._baseLayersList=sn("div",a+"-base",z),this._separator=sn("div",a+"-separator",z),this._overlaysList=sn("div",a+"-overlays",z),p.appendChild(z)},_getLayer:function(a){for(var p=0;p<this._layers.length;p++)if(this._layers[p]&&h(this._layers[p].layer)===a)return this._layers[p]},_addLayer:function(a,p,S){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:p,overlay:S}),this.options.sortLayers&&this._layers.sort(o(function(z,re){return this.options.sortFunction(z.layer,re.layer,z.name,re.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Cr(this._baseLayersList),Cr(this._overlaysList),this._layerControlInputs=[];var a,p,S,z,re=0;for(S=0;S<this._layers.length;S++)z=this._layers[S],this._addItem(z),p=p||z.overlay,a=a||!z.overlay,re+=z.overlay?0:1;return this.options.hideSingleBase&&(a=a&&re>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=p&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var p=this._getLayer(h(a.target)),S=p.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;S&&this._map.fire(S,p)},_createRadioElement:function(a,p){var S='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(p?' checked="checked"':"")+"/>",z=document.createElement("div");return z.innerHTML=S,z.firstChild},_addItem:function(a){var p=document.createElement("label"),S=this._map.hasLayer(a.layer),z;a.overlay?(z=document.createElement("input"),z.type="checkbox",z.className="leaflet-control-layers-selector",z.defaultChecked=S):z=this._createRadioElement("leaflet-base-layers_"+h(this),S),this._layerControlInputs.push(z),z.layerId=h(a.layer),dr(z,"click",this._onInputClick,this);var re=document.createElement("span");re.innerHTML=" "+a.name;var Se=document.createElement("span");p.appendChild(Se),Se.appendChild(z),Se.appendChild(re);var at=a.overlay?this._overlaysList:this._baseLayersList;return at.appendChild(p),this._checkDisabledLayers(),p},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,p,S,z=[],re=[];this._handlingClick=!0;for(var Se=a.length-1;Se>=0;Se--)p=a[Se],S=this._getLayer(p.layerId).layer,p.checked?z.push(S):p.checked||re.push(S);for(Se=0;Se<re.length;Se++)this._map.hasLayer(re[Se])&&this._map.removeLayer(re[Se]);for(Se=0;Se<z.length;Se++)this._map.hasLayer(z[Se])||this._map.addLayer(z[Se]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,p,S,z=this._map.getZoom(),re=a.length-1;re>=0;re--)p=a[re],S=this._getLayer(p.layerId).layer,p.disabled=S.options.minZoom!==void 0&&z<S.options.minZoom||S.options.maxZoom!==void 0&&z>S.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,dr(a,"click",cr),this.expand();var p=this;setTimeout(function(){$r(a,"click",cr),p._preventClick=!1})}}),fa=function(a,p,S){return new nl(a,p,S)},wi=Xn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var p="leaflet-control-zoom",S=sn("div",p+" leaflet-bar"),z=this.options;return this._zoomInButton=this._createButton(z.zoomInText,z.zoomInTitle,p+"-in",S,this._zoomIn),this._zoomOutButton=this._createButton(z.zoomOutText,z.zoomOutTitle,p+"-out",S,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),S},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,p,S,z,re){var Se=sn("a",S,z);return Se.innerHTML=a,Se.href="#",Se.title=p,Se.setAttribute("role","button"),Se.setAttribute("aria-label",p),El(Se),dr(Se,"click",kr),dr(Se,"click",re,this),dr(Se,"click",this._refocusOnMap,this),Se},_updateDisabled:function(){var a=this._map,p="leaflet-disabled";Lr(this._zoomInButton,p),Lr(this._zoomOutButton,p),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(sr(this._zoomOutButton,p),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(sr(this._zoomInButton,p),this._zoomInButton.setAttribute("aria-disabled","true"))}});Nr.mergeOptions({zoomControl:!0}),Nr.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new wi,this.addControl(this.zoomControl))});var Kl=function(a){return new wi(a)},Ys=Xn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var p="leaflet-control-scale",S=sn("div",p),z=this.options;return this._addScales(z,p+"-line",S),a.on(z.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),S},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,p,S){a.metric&&(this._mScale=sn("div",p,S)),a.imperial&&(this._iScale=sn("div",p,S))},_update:function(){var a=this._map,p=a.getSize().y/2,S=a.distance(a.containerPointToLatLng([0,p]),a.containerPointToLatLng([this.options.maxWidth,p]));this._updateScales(S)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var p=this._getRoundNum(a),S=p<1e3?p+" m":p/1e3+" km";this._updateScale(this._mScale,S,p/a)},_updateImperial:function(a){var p=a*3.2808399,S,z,re;p>5280?(S=p/5280,z=this._getRoundNum(S),this._updateScale(this._iScale,z+" mi",z/S)):(re=this._getRoundNum(p),this._updateScale(this._iScale,re+" ft",re/p))},_updateScale:function(a,p,S){a.style.width=Math.round(this.options.maxWidth*S)+"px",a.innerHTML=p},_getRoundNum:function(a){var p=Math.pow(10,(Math.floor(a)+"").length-1),S=a/p;return S=S>=10?10:S>=5?5:S>=3?3:S>=2?2:1,p*S}}),Al=function(a){return new Ys(a)},Ml='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ps=Xn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(bn.inlineSvg?Ml+" ":"")+"Leaflet</a>"},initialize:function(a){T(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=sn("div","leaflet-control-attribution"),El(this._container);for(var p in a._layers)a._layers[p].getAttribution&&this.addAttribution(a._layers[p].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var p in this._attributions)this._attributions[p]&&a.push(p);var S=[];this.options.prefix&&S.push(this.options.prefix),a.length&&S.push(a.join(", ")),this._container.innerHTML=S.join(' <span aria-hidden="true">|</span> ')}}});Nr.mergeOptions({attributionControl:!0}),Nr.addInitHook(function(){this.options.attributionControl&&new Ps().addTo(this)});var kl=function(a){return new Ps(a)};Xn.Layers=nl,Xn.Zoom=wi,Xn.Scale=Ys,Xn.Attribution=Ps,Hi.layers=fa,Hi.zoom=Kl,Hi.scale=Al,Hi.attribution=kl;var Qr=I.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Qr.addTo=function(a,p){return a.addHandler(p,this),this};var Zu={Events:G},fo=bn.touch?"touchstart mousedown":"mousedown",js=K.extend({options:{clickTolerance:3},initialize:function(a,p,S,z){T(this,z),this._element=a,this._dragStartTarget=p||a,this._preventOutline=S},enable:function(){this._enabled||(dr(this._dragStartTarget,fo,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(js._dragging===this&&this.finishDrag(!0),$r(this._dragStartTarget,fo,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!Es(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){js._dragging===this&&this.finishDrag();return}if(!(js._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(js._dragging=this,this._preventOutline&&Sl(this._element),Ll(),Ks(),!this._moving)){this.fire("down");var p=a.touches?a.touches[0]:a,S=qu(this._element);this._startPoint=new q(p.clientX,p.clientY),this._startPos=Qo(this._element),this._parentScale=ql(S);var z=a.type==="mousedown";dr(document,z?"mousemove":"touchmove",this._onMove,this),dr(document,z?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var p=a.touches&&a.touches.length===1?a.touches[0]:a,S=new q(p.clientX,p.clientY)._subtract(this._startPoint);!S.x&&!S.y||Math.abs(S.x)+Math.abs(S.y)<this.options.clickTolerance||(S.x/=this._parentScale.x,S.y/=this._parentScale.y,cr(a),this._moved||(this.fire("dragstart"),this._moved=!0,sr(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),sr(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(S),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),vi(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){Lr(document.body,"leaflet-dragging"),this._lastTarget&&(Lr(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),$r(document,"mousemove touchmove",this._onMove,this),$r(document,"mouseup touchend touchcancel",this._onUp,this),Or(),co();var p=this._moved&&this._moving;this._moving=!1,js._dragging=!1,p&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function Tl(a,p,S){var z,re=[1,4,2,8],Se,at,Pt,Ft,nn,Tn,Vn,Er;for(Se=0,Tn=a.length;Se<Tn;Se++)a[Se]._code=It(a[Se],p);for(Pt=0;Pt<4;Pt++){for(Vn=re[Pt],z=[],Se=0,Tn=a.length,at=Tn-1;Se<Tn;at=Se++)Ft=a[Se],nn=a[at],Ft._code&Vn?nn._code&Vn||(Er=xt(nn,Ft,Vn,p,S),Er._code=It(Er,p),z.push(Er)):(nn._code&Vn&&(Er=xt(nn,Ft,Vn,p,S),Er._code=It(Er,p),z.push(Er)),z.push(Ft));a=z}return a}function zs(a,p){var S,z,re,Se,at,Pt,Ft,nn,Tn;if(!a||a.length===0)throw new Error("latlngs not passed");Nn(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Vn=we([0,0]),Er=se(a),to=Er.getNorthWest().distanceTo(Er.getSouthWest())*Er.getNorthEast().distanceTo(Er.getNorthWest());to<1700&&(Vn=rl(a));var Bi=a.length,yo=[];for(S=0;S<Bi;S++){var Si=we(a[S]);yo.push(p.project(we([Si.lat-Vn.lat,Si.lng-Vn.lng])))}for(Pt=Ft=nn=0,S=0,z=Bi-1;S<Bi;z=S++)re=yo[S],Se=yo[z],at=re.y*Se.x-Se.y*re.x,Ft+=(re.x+Se.x)*at,nn+=(re.y+Se.y)*at,Pt+=at*3;Pt===0?Tn=yo[0]:Tn=[Ft/Pt,nn/Pt];var rs=p.unproject(Ce(Tn));return we([rs.lat+Vn.lat,rs.lng+Vn.lng])}function rl(a){for(var p=0,S=0,z=0,re=0;re<a.length;re++){var Se=we(a[re]);p+=Se.lat,S+=Se.lng,z++}return we([p/z,S/z])}var il={__proto__:null,clipPolygon:Tl,polygonCenter:zs,centroid:rl};function ei(a,p){if(!p||!a.length)return a.slice();var S=p*p;return a=ye(a,S),a=Gi(a,S),a}function gs(a,p,S){return Math.sqrt(kn(a,p,S,!0))}function da(a,p,S){return kn(a,p,S)}function Gi(a,p){var S=a.length,z=typeof Uint8Array<"u"?Uint8Array:Array,re=new z(S);re[0]=re[S-1]=1,O(a,re,p,0,S-1);var Se,at=[];for(Se=0;Se<S;Se++)re[Se]&&at.push(a[Se]);return at}function O(a,p,S,z,re){var Se=0,at,Pt,Ft;for(Pt=z+1;Pt<=re-1;Pt++)Ft=kn(a[Pt],a[z],a[re],!0),Ft>Se&&(at=Pt,Se=Ft);Se>S&&(p[at]=1,O(a,p,S,z,at),O(a,p,S,at,re))}function ye(a,p){for(var S=[a[0]],z=1,re=0,Se=a.length;z<Se;z++)cn(a[z],a[re])>p&&(S.push(a[z]),re=z);return re<Se-1&&S.push(a[Se-1]),S}var He;function ct(a,p,S,z,re){var Se=z?He:It(a,S),at=It(p,S),Pt,Ft,nn;for(He=at;;){if(!(Se|at))return[a,p];if(Se&at)return!1;Pt=Se||at,Ft=xt(a,p,Pt,S,re),nn=It(Ft,S),Pt===Se?(a=Ft,Se=nn):(p=Ft,at=nn)}}function xt(a,p,S,z,re){var Se=p.x-a.x,at=p.y-a.y,Pt=z.min,Ft=z.max,nn,Tn;return S&8?(nn=a.x+Se*(Ft.y-a.y)/at,Tn=Ft.y):S&4?(nn=a.x+Se*(Pt.y-a.y)/at,Tn=Pt.y):S&2?(nn=Ft.x,Tn=a.y+at*(Ft.x-a.x)/Se):S&1&&(nn=Pt.x,Tn=a.y+at*(Pt.x-a.x)/Se),new q(nn,Tn,re)}function It(a,p){var S=0;return a.x<p.min.x?S|=1:a.x>p.max.x&&(S|=2),a.y<p.min.y?S|=4:a.y>p.max.y&&(S|=8),S}function cn(a,p){var S=p.x-a.x,z=p.y-a.y;return S*S+z*z}function kn(a,p,S,z){var re=p.x,Se=p.y,at=S.x-re,Pt=S.y-Se,Ft=at*at+Pt*Pt,nn;return Ft>0&&(nn=((a.x-re)*at+(a.y-Se)*Pt)/Ft,nn>1?(re=S.x,Se=S.y):nn>0&&(re+=at*nn,Se+=Pt*nn)),at=a.x-re,Pt=a.y-Se,z?at*at+Pt*Pt:new q(re,Se)}function Nn(a){return!Z(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function Kn(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Nn(a)}function or(a,p){var S,z,re,Se,at,Pt,Ft,nn;if(!a||a.length===0)throw new Error("latlngs not passed");Nn(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Tn=we([0,0]),Vn=se(a),Er=Vn.getNorthWest().distanceTo(Vn.getSouthWest())*Vn.getNorthEast().distanceTo(Vn.getNorthWest());Er<1700&&(Tn=rl(a));var to=a.length,Bi=[];for(S=0;S<to;S++){var yo=we(a[S]);Bi.push(p.project(we([yo.lat-Tn.lat,yo.lng-Tn.lng])))}for(S=0,z=0;S<to-1;S++)z+=Bi[S].distanceTo(Bi[S+1])/2;if(z===0)nn=Bi[0];else for(S=0,Se=0;S<to-1;S++)if(at=Bi[S],Pt=Bi[S+1],re=at.distanceTo(Pt),Se+=re,Se>z){Ft=(Se-z)/re,nn=[Pt.x-Ft*(Pt.x-at.x),Pt.y-Ft*(Pt.y-at.y)];break}var Si=p.unproject(Ce(nn));return we([Si.lat+Tn.lat,Si.lng+Tn.lng])}var Pr={__proto__:null,simplify:ei,pointToSegmentDistance:gs,closestPointOnSegment:da,clipSegment:ct,_getEdgeIntersection:xt,_getBitCode:It,_sqClosestPointOnSegment:kn,isFlat:Nn,_flat:Kn,polylineCenter:or},yi={project:function(a){return new q(a.lng,a.lat)},unproject:function(a){return new ae(a.y,a.x)},bounds:new Xe([-180,-90],[180,90])},Zr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Xe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var p=Math.PI/180,S=this.R,z=a.lat*p,re=this.R_MINOR/S,Se=Math.sqrt(1-re*re),at=Se*Math.sin(z),Pt=Math.tan(Math.PI/4-z/2)/Math.pow((1-at)/(1+at),Se/2);return z=-S*Math.log(Math.max(Pt,1e-10)),new q(a.lng*p*S,z)},unproject:function(a){for(var p=180/Math.PI,S=this.R,z=this.R_MINOR/S,re=Math.sqrt(1-z*z),Se=Math.exp(-a.y/S),at=Math.PI/2-2*Math.atan(Se),Pt=0,Ft=.1,nn;Pt<15&&Math.abs(Ft)>1e-7;Pt++)nn=re*Math.sin(at),nn=Math.pow((1-nn)/(1+nn),re/2),Ft=Math.PI/2-2*Math.atan(Se*nn)-at,at+=Ft;return new ae(at*p,a.x*p/S)}},ti={__proto__:null,LonLat:yi,Mercator:Zr,SphericalMercator:Re},qi=i({},Q,{code:"EPSG:3395",projection:Zr,transformation:function(){var a=.5/(Math.PI*Zr.R);return Ze(a,.5,-a,.5)}()}),Ji=i({},Q,{code:"EPSG:4326",projection:yi,transformation:Ze(1/180,1,-1/180,.5)}),ms=i({},fe,{projection:yi,transformation:Ze(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,p){var S=p.lng-a.lng,z=p.lat-a.lat;return Math.sqrt(S*S+z*z)},infinite:!0});fe.Earth=Q,fe.EPSG3395=qi,fe.EPSG3857=oe,fe.EPSG900913=me,fe.EPSG4326=Ji,fe.Simple=ms;var Ar=K.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[h(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[h(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var p=a.target;if(p.hasLayer(this)){if(this._map=p,this._zoomAnimated=p._zoomAnimated,this.getEvents){var S=this.getEvents();p.on(S,this),this.once("remove",function(){p.off(S,this)},this)}this.onAdd(p),this.fire("add"),p.fire("layeradd",{layer:this})}}});Nr.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var p=h(a);return this._layers[p]?this:(this._layers[p]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var p=h(a);return this._layers[p]?(this._loaded&&a.onRemove(this),delete this._layers[p],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return h(a)in this._layers},eachLayer:function(a,p){for(var S in this._layers)a.call(p,this._layers[S]);return this},_addLayers:function(a){a=a?Z(a)?a:[a]:[];for(var p=0,S=a.length;p<S;p++)this.addLayer(a[p])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[h(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var p=h(a);this._zoomBoundLayers[p]&&(delete this._zoomBoundLayers[p],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,p=-1/0,S=this._getZoomSpan();for(var z in this._zoomBoundLayers){var re=this._zoomBoundLayers[z].options;a=re.minZoom===void 0?a:Math.min(a,re.minZoom),p=re.maxZoom===void 0?p:Math.max(p,re.maxZoom)}this._layersMaxZoom=p===-1/0?void 0:p,this._layersMinZoom=a===1/0?void 0:a,S!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Co=Ar.extend({initialize:function(a,p){T(this,p),this._layers={};var S,z;if(a)for(S=0,z=a.length;S<z;S++)this.addLayer(a[S])},addLayer:function(a){var p=this.getLayerId(a);return this._layers[p]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var p=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[p]&&this._map.removeLayer(this._layers[p]),delete this._layers[p],this},hasLayer:function(a){var p=typeof a=="number"?a:this.getLayerId(a);return p in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var p=Array.prototype.slice.call(arguments,1),S,z;for(S in this._layers)z=this._layers[S],z[a]&&z[a].apply(z,p);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,p){for(var S in this._layers)a.call(p,this._layers[S]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return h(a)}}),ol=function(a,p){return new Co(a,p)},Uo=Co.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),Co.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),Co.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new te;for(var p in this._layers){var S=this._layers[p];a.extend(S.getBounds?S.getBounds():S.getLatLng())}return a}}),Yl=function(a,p){return new Uo(a,p)},Xs=I.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){T(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,p){var S=this._getIconUrl(a);if(!S){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var z=this._createImg(S,p&&p.tagName==="IMG"?p:null);return this._setIconStyles(z,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(z.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),z},_setIconStyles:function(a,p){var S=this.options,z=S[p+"Size"];typeof z=="number"&&(z=[z,z]);var re=Ce(z),Se=Ce(p==="shadow"&&S.shadowAnchor||S.iconAnchor||re&&re.divideBy(2,!0));a.className="leaflet-marker-"+p+" "+(S.className||""),Se&&(a.style.marginLeft=-Se.x+"px",a.style.marginTop=-Se.y+"px"),re&&(a.style.width=re.x+"px",a.style.height=re.y+"px")},_createImg:function(a,p){return p=p||document.createElement("img"),p.src=a,p},_getIconUrl:function(a){return bn.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function _u(a){return new Xs(a)}var ja=Xs.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof ja.imagePath!="string"&&(ja.imagePath=this._detectIconPath()),(this.options.imagePath||ja.imagePath)+Xs.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var p=function(S,z,re){var Se=z.exec(S);return Se&&Se[re]};return a=p(a,/^url\((['"])?(.+)\1\)$/,2),a&&p(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=sn("div","leaflet-default-icon-path",document.body),p=xr(a,"background-image")||xr(a,"backgroundImage");if(document.body.removeChild(a),p=this._stripUrl(p),p)return p;var S=document.querySelector('link[href$="leaflet.css"]');return S?S.href.substring(0,S.href.length-11-1):""}}),za=Qr.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new js(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),sr(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Lr(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var p=this._marker,S=p._map,z=this._marker.options.autoPanSpeed,re=this._marker.options.autoPanPadding,Se=Qo(p._icon),at=S.getPixelBounds(),Pt=S.getPixelOrigin(),Ft=B(at.min._subtract(Pt).add(re),at.max._subtract(Pt).subtract(re));if(!Ft.contains(Se)){var nn=Ce((Math.max(Ft.max.x,Se.x)-Ft.max.x)/(at.max.x-Ft.max.x)-(Math.min(Ft.min.x,Se.x)-Ft.min.x)/(at.min.x-Ft.min.x),(Math.max(Ft.max.y,Se.y)-Ft.max.y)/(at.max.y-Ft.max.y)-(Math.min(Ft.min.y,Se.y)-Ft.min.y)/(at.min.y-Ft.min.y)).multiplyBy(z);S.panBy(nn,{animate:!1}),this._draggable._newPos._add(nn),this._draggable._startPos._add(nn),vi(p._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=$(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(D(this._panRequest),this._panRequest=$(this._adjustPan.bind(this,a)))},_onDrag:function(a){var p=this._marker,S=p._shadow,z=Qo(p._icon),re=p._map.layerPointToLatLng(z);S&&vi(S,z),p._latlng=re,a.latlng=re,a.oldLatLng=this._oldLatLng,p.fire("move",a).fire("drag",a)},_onDragEnd:function(a){D(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),Qi=Ar.extend({options:{icon:new ja,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,p){T(this,p),this._latlng=we(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var p=this._latlng;return this._latlng=we(a),this.update(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,p="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),S=a.icon.createIcon(this._icon),z=!1;S!==this._icon&&(this._icon&&this._removeIcon(),z=!0,a.title&&(S.title=a.title),S.tagName==="IMG"&&(S.alt=a.alt||"")),sr(S,p),a.keyboard&&(S.tabIndex="0",S.setAttribute("role","button")),this._icon=S,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&dr(S,"focus",this._panOnFocus,this);var re=a.icon.createShadow(this._shadow),Se=!1;re!==this._shadow&&(this._removeShadow(),Se=!0),re&&(sr(re,p),re.alt=""),this._shadow=re,a.opacity<1&&this._updateOpacity(),z&&this.getPane().appendChild(this._icon),this._initInteraction(),re&&Se&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&$r(this._icon,"focus",this._panOnFocus,this),jt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&jt(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&vi(this._icon,a),this._shadow&&vi(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var p=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(p)},_initInteraction:function(){if(this.options.interactive&&(sr(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),za)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new za(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&Ui(this._icon,a),this._shadow&&Ui(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var p=this.options.icon.options,S=p.iconSize?Ce(p.iconSize):Ce(0,0),z=p.iconAnchor?Ce(p.iconAnchor):Ce(0,0);a.panInside(this._latlng,{paddingTopLeft:z,paddingBottomRight:S.subtract(z)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Js(a,p){return new Qi(a,p)}var vs=Ar.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return T(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),es=vs.extend({options:{fill:!0,radius:10},initialize:function(a,p){T(this,p),this._latlng=we(a),this._radius=this.options.radius},setLatLng:function(a){var p=this._latlng;return this._latlng=we(a),this.redraw(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var p=a&&a.radius||this._radius;return vs.prototype.setStyle.call(this,a),this.setRadius(p),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,p=this._radiusY||a,S=this._clickTolerance(),z=[a+S,p+S];this._pxBounds=new Xe(this._point.subtract(z),this._point.add(z))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function sl(a,p){return new es(a,p)}var Po=es.extend({initialize:function(a,p,S){if(typeof p=="number"&&(p=i({},S,{radius:p})),T(this,p),this._latlng=we(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new te(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:vs.prototype.setStyle,_project:function(){var a=this._latlng.lng,p=this._latlng.lat,S=this._map,z=S.options.crs;if(z.distance===Q.distance){var re=Math.PI/180,Se=this._mRadius/Q.R/re,at=S.project([p+Se,a]),Pt=S.project([p-Se,a]),Ft=at.add(Pt).divideBy(2),nn=S.unproject(Ft).lat,Tn=Math.acos((Math.cos(Se*re)-Math.sin(p*re)*Math.sin(nn*re))/(Math.cos(p*re)*Math.cos(nn*re)))/re;(isNaN(Tn)||Tn===0)&&(Tn=Se/Math.cos(Math.PI/180*p)),this._point=Ft.subtract(S.getPixelOrigin()),this._radius=isNaN(Tn)?0:Ft.x-S.project([nn,a-Tn]).x,this._radiusY=Ft.y-at.y}else{var Vn=z.unproject(z.project(this._latlng).subtract([this._mRadius,0]));this._point=S.latLngToLayerPoint(this._latlng),this._radius=this._point.x-S.latLngToLayerPoint(Vn).x}this._updateBounds()}});function $o(a,p,S){return new Po(a,p,S)}var Vo=vs.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,p){T(this,p),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var p=1/0,S=null,z=kn,re,Se,at=0,Pt=this._parts.length;at<Pt;at++)for(var Ft=this._parts[at],nn=1,Tn=Ft.length;nn<Tn;nn++){re=Ft[nn-1],Se=Ft[nn];var Vn=z(a,re,Se,!0);Vn<p&&(p=Vn,S=z(a,re,Se))}return S&&(S.distance=Math.sqrt(p)),S},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return or(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,p){return p=p||this._defaultShape(),a=we(a),p.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new te,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return Nn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var p=[],S=Nn(a),z=0,re=a.length;z<re;z++)S?(p[z]=we(a[z]),this._bounds.extend(p[z])):p[z]=this._convertLatLngs(a[z]);return p},_project:function(){var a=new Xe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),p=new q(a,a);this._rawPxBounds&&(this._pxBounds=new Xe([this._rawPxBounds.min.subtract(p),this._rawPxBounds.max.add(p)]))},_projectLatlngs:function(a,p,S){var z=a[0]instanceof ae,re=a.length,Se,at;if(z){for(at=[],Se=0;Se<re;Se++)at[Se]=this._map.latLngToLayerPoint(a[Se]),S.extend(at[Se]);p.push(at)}else for(Se=0;Se<re;Se++)this._projectLatlngs(a[Se],p,S)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var p=this._parts,S,z,re,Se,at,Pt,Ft;for(S=0,re=0,Se=this._rings.length;S<Se;S++)for(Ft=this._rings[S],z=0,at=Ft.length;z<at-1;z++)Pt=ct(Ft[z],Ft[z+1],a,z,!0),Pt&&(p[re]=p[re]||[],p[re].push(Pt[0]),(Pt[1]!==Ft[z+1]||z===at-2)&&(p[re].push(Pt[1]),re++))}},_simplifyPoints:function(){for(var a=this._parts,p=this.options.smoothFactor,S=0,z=a.length;S<z;S++)a[S]=ei(a[S],p)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,p){var S,z,re,Se,at,Pt,Ft=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(S=0,Se=this._parts.length;S<Se;S++)for(Pt=this._parts[S],z=0,at=Pt.length,re=at-1;z<at;re=z++)if(!(!p&&z===0)&&gs(a,Pt[re],Pt[z])<=Ft)return!0;return!1}});function Ku(a,p){return new Vo(a,p)}Vo._flat=Kn;var lo=Vo.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return zs(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var p=Vo.prototype._convertLatLngs.call(this,a),S=p.length;return S>=2&&p[0]instanceof ae&&p[0].equals(p[S-1])&&p.pop(),p},_setLatLngs:function(a){Vo.prototype._setLatLngs.call(this,a),Nn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Nn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,p=this.options.weight,S=new q(p,p);if(a=new Xe(a.min.subtract(S),a.max.add(S)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var z=0,re=this._rings.length,Se;z<re;z++)Se=Tl(this._rings[z],a,!0),Se.length&&this._parts.push(Se)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var p=!1,S,z,re,Se,at,Pt,Ft,nn;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(Se=0,Ft=this._parts.length;Se<Ft;Se++)for(S=this._parts[Se],at=0,nn=S.length,Pt=nn-1;at<nn;Pt=at++)z=S[at],re=S[Pt],z.y>a.y!=re.y>a.y&&a.x<(re.x-z.x)*(a.y-z.y)/(re.y-z.y)+z.x&&(p=!p);return p||Vo.prototype._containsPoint.call(this,a,!0)}});function pa(a,p){return new lo(a,p)}var Ao=Uo.extend({initialize:function(a,p){T(this,p),this._layers={},a&&this.addData(a)},addData:function(a){var p=Z(a)?a:a.features,S,z,re;if(p){for(S=0,z=p.length;S<z;S++)re=p[S],(re.geometries||re.geometry||re.features||re.coordinates)&&this.addData(re);return this}var Se=this.options;if(Se.filter&&!Se.filter(a))return this;var at=Mo(a,Se);return at?(at.feature=To(a),at.defaultOptions=at.options,this.resetStyle(at),Se.onEachFeature&&Se.onEachFeature(a,at),this.addLayer(at)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=i({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(p){this._setLayerStyle(p,a)},this)},_setLayerStyle:function(a,p){a.setStyle&&(typeof p=="function"&&(p=p(a.feature)),a.setStyle(p))}});function Mo(a,p){var S=a.type==="Feature"?a.geometry:a,z=S?S.coordinates:null,re=[],Se=p&&p.pointToLayer,at=p&&p.coordsToLatLng||ma,Pt,Ft,nn,Tn;if(!z&&!S)return null;switch(S.type){case"Point":return Pt=at(z),ga(Se,a,Pt,p);case"MultiPoint":for(nn=0,Tn=z.length;nn<Tn;nn++)Pt=at(z[nn]),re.push(ga(Se,a,Pt,p));return new Uo(re);case"LineString":case"MultiLineString":return Ft=ko(z,S.type==="LineString"?0:1,at),new Vo(Ft,p);case"Polygon":case"MultiPolygon":return Ft=ko(z,S.type==="Polygon"?1:2,at),new lo(Ft,p);case"GeometryCollection":for(nn=0,Tn=S.geometries.length;nn<Tn;nn++){var Vn=Mo({geometry:S.geometries[nn],type:"Feature",properties:a.properties},p);Vn&&re.push(Vn)}return new Uo(re);case"FeatureCollection":for(nn=0,Tn=S.features.length;nn<Tn;nn++){var Er=Mo(S.features[nn],p);Er&&re.push(Er)}return new Uo(re);default:throw new Error("Invalid GeoJSON object.")}}function ga(a,p,S,z){return a?a(p,S):new Qi(S,z&&z.markersInheritOptions&&z)}function ma(a){return new ae(a[1],a[0],a[2])}function ko(a,p,S){for(var z=[],re=0,Se=a.length,at;re<Se;re++)at=p?ko(a[re],p-1,S):(S||ma)(a[re]),z.push(at);return z}function po(a,p){return a=we(a),a.alt!==void 0?[x(a.lng,p),x(a.lat,p),x(a.alt,p)]:[x(a.lng,p),x(a.lat,p)]}function Qs(a,p,S,z){for(var re=[],Se=0,at=a.length;Se<at;Se++)re.push(p?Qs(a[Se],Nn(a[Se])?0:p-1,S,z):po(a[Se],z));return!p&&S&&re.length>0&&re.push(re[0].slice()),re}function ys(a,p){return a.feature?i({},a.feature,{geometry:p}):To(p)}function To(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var _t={toGeoJSON:function(a){return ys(this,{type:"Point",coordinates:po(this.getLatLng(),a)})}};Qi.include(_t),Po.include(_t),es.include(_t),Vo.include({toGeoJSON:function(a){var p=!Nn(this._latlngs),S=Qs(this._latlngs,p?1:0,!1,a);return ys(this,{type:(p?"Multi":"")+"LineString",coordinates:S})}}),lo.include({toGeoJSON:function(a){var p=!Nn(this._latlngs),S=p&&!Nn(this._latlngs[0]),z=Qs(this._latlngs,S?2:p?1:0,!0,a);return p||(z=[z]),ys(this,{type:(S?"Multi":"")+"Polygon",coordinates:z})}}),Co.include({toMultiPoint:function(a){var p=[];return this.eachLayer(function(S){p.push(S.toGeoJSON(a).geometry.coordinates)}),ys(this,{type:"MultiPoint",coordinates:p})},toGeoJSON:function(a){var p=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(p==="MultiPoint")return this.toMultiPoint(a);var S=p==="GeometryCollection",z=[];return this.eachLayer(function(re){if(re.toGeoJSON){var Se=re.toGeoJSON(a);if(S)z.push(Se.geometry);else{var at=To(Se);at.type==="FeatureCollection"?z.push.apply(z,at.features):z.push(at)}}}),S?ys(this,{geometries:z,type:"GeometryCollection"}):{type:"FeatureCollection",features:z}}});function Ht(a,p){return new Ao(a,p)}var Mt=Ht,Pn=Ar.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,p,S){this._url=a,this._bounds=se(p),T(this,S)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(sr(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){jt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&Di(this._image),this},bringToBack:function(){return this._map&&zi(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=se(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",p=this._image=a?this._url:sn("img");if(sr(p,"leaflet-image-layer"),this._zoomAnimated&&sr(p,"leaflet-zoom-animated"),this.options.className&&sr(p,this.options.className),p.onselectstart=y,p.onmousemove=y,p.onload=o(this.fire,this,"load"),p.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=p.src;return}p.src=this._url,p.alt=this.options.alt},_animateZoom:function(a){var p=this._map.getZoomScale(a.zoom),S=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;so(this._image,S,p)},_reset:function(){var a=this._image,p=new Xe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),S=p.getSize();vi(a,p.min),a.style.width=S.x+"px",a.style.height=S.y+"px"},_updateOpacity:function(){Ui(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),Un=function(a,p,S){return new Pn(a,p,S)},lr=Pn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",p=this._image=a?this._url:sn("video");if(sr(p,"leaflet-image-layer"),this._zoomAnimated&&sr(p,"leaflet-zoom-animated"),this.options.className&&sr(p,this.options.className),p.onselectstart=y,p.onmousemove=y,p.onloadeddata=o(this.fire,this,"load"),a){for(var S=p.getElementsByTagName("source"),z=[],re=0;re<S.length;re++)z.push(S[re].src);this._url=S.length>0?z:[p.src];return}Z(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(p.style,"objectFit")&&(p.style.objectFit="fill"),p.autoplay=!!this.options.autoplay,p.loop=!!this.options.loop,p.muted=!!this.options.muted,p.playsInline=!!this.options.playsInline;for(var Se=0;Se<this._url.length;Se++){var at=sn("source");at.src=this._url[Se],p.appendChild(at)}}});function xi(a,p,S){return new lr(a,p,S)}var ni=Pn.extend({_initImage:function(){var a=this._image=this._url;sr(a,"leaflet-image-layer"),this._zoomAnimated&&sr(a,"leaflet-zoom-animated"),this.options.className&&sr(a,this.options.className),a.onselectstart=y,a.onmousemove=y}});function Bl(a,p,S){return new ni(a,p,S)}var Ho=Ar.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,p){a&&(a instanceof ae||Z(a))?(this._latlng=we(a),T(this,p)):(T(this,a),this._source=p),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&Ui(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&Ui(this._container,1),this.bringToFront(),this.options.interactive&&(sr(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(Ui(this._container,0),this._removeTimeout=setTimeout(o(jt,void 0,this._container),200)):jt(this._container),this.options.interactive&&(Lr(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=we(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Di(this._container),this},bringToBack:function(){return this._map&&zi(this._container),this},_prepareOpen:function(a){var p=this._source;if(!p._map)return!1;if(p instanceof Uo){p=null;var S=this._source._layers;for(var z in S)if(S[z]._map){p=S[z];break}if(!p)return!1;this._source=p}if(!a)if(p.getCenter)a=p.getCenter();else if(p.getLatLng)a=p.getLatLng();else if(p.getBounds)a=p.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,p=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof p=="string")a.innerHTML=p;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(p)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),p=Ce(this.options.offset),S=this._getAnchor();this._zoomAnimated?vi(this._container,a.add(S)):p=p.add(a).add(S);var z=this._containerBottom=-p.y,re=this._containerLeft=-Math.round(this._containerWidth/2)+p.x;this._container.style.bottom=z+"px",this._container.style.left=re+"px"}},_getAnchor:function(){return[0,0]}});Nr.include({_initOverlay:function(a,p,S,z){var re=p;return re instanceof a||(re=new a(z).setContent(p)),S&&re.setLatLng(S),re}}),Ar.include({_initOverlay:function(a,p,S,z){var re=S;return re instanceof a?(T(re,z),re._source=this):(re=p&&!z?p:new a(z,this),re.setContent(S)),re}});var Li=Ho.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,Ho.prototype.openOn.call(this,a)},onAdd:function(a){Ho.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof vs||this._source.on("preclick",Ra))},onRemove:function(a){Ho.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof vs||this._source.off("preclick",Ra))},getEvents:function(){var a=Ho.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",p=this._container=sn("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),S=this._wrapper=sn("div",a+"-content-wrapper",p);if(this._contentNode=sn("div",a+"-content",S),El(p),yu(this._contentNode),dr(p,"contextmenu",Ra),this._tipContainer=sn("div",a+"-tip-container",p),this._tip=sn("div",a+"-tip",this._tipContainer),this.options.closeButton){var z=this._closeButton=sn("a",a+"-close-button",p);z.setAttribute("role","button"),z.setAttribute("aria-label","Close popup"),z.href="#close",z.innerHTML='<span aria-hidden="true">&#215;</span>',dr(z,"click",function(re){cr(re),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,p=a.style;p.width="",p.whiteSpace="nowrap";var S=a.offsetWidth;S=Math.min(S,this.options.maxWidth),S=Math.max(S,this.options.minWidth),p.width=S+1+"px",p.whiteSpace="",p.height="";var z=a.offsetHeight,re=this.options.maxHeight,Se="leaflet-popup-scrolled";re&&z>re?(p.height=re+"px",sr(a,Se)):Lr(a,Se),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var p=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),S=this._getAnchor();vi(this._container,p.add(S))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,p=parseInt(xr(this._container,"marginBottom"),10)||0,S=this._container.offsetHeight+p,z=this._containerWidth,re=new q(this._containerLeft,-S-this._containerBottom);re._add(Qo(this._container));var Se=a.layerPointToContainerPoint(re),at=Ce(this.options.autoPanPadding),Pt=Ce(this.options.autoPanPaddingTopLeft||at),Ft=Ce(this.options.autoPanPaddingBottomRight||at),nn=a.getSize(),Tn=0,Vn=0;Se.x+z+Ft.x>nn.x&&(Tn=Se.x+z-nn.x+Ft.x),Se.x-Tn-Pt.x<0&&(Tn=Se.x-Pt.x),Se.y+S+Ft.y>nn.y&&(Vn=Se.y+S-nn.y+Ft.y),Se.y-Vn-Pt.y<0&&(Vn=Se.y-Pt.y),(Tn||Vn)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([Tn,Vn]))}},_getAnchor:function(){return Ce(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ea=function(a,p){return new Li(a,p)};Nr.mergeOptions({closePopupOnClick:!0}),Nr.include({openPopup:function(a,p,S){return this._initOverlay(Li,a,p,S).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),Ar.include({bindPopup:function(a,p){return this._popup=this._initOverlay(Li,this._popup,a,p),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof Uo||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){kr(a);var p=a.layer||a.target;if(this._popup._source===p&&!(p instanceof vs)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=p,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var va=Ho.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){Ho.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){Ho.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=Ho.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",p=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=sn("div",p),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var p,S,z=this._map,re=this._container,Se=z.latLngToContainerPoint(z.getCenter()),at=z.layerPointToContainerPoint(a),Pt=this.options.direction,Ft=re.offsetWidth,nn=re.offsetHeight,Tn=Ce(this.options.offset),Vn=this._getAnchor();Pt==="top"?(p=Ft/2,S=nn):Pt==="bottom"?(p=Ft/2,S=0):Pt==="center"?(p=Ft/2,S=nn/2):Pt==="right"?(p=0,S=nn/2):Pt==="left"?(p=Ft,S=nn/2):at.x<Se.x?(Pt="right",p=0,S=nn/2):(Pt="left",p=Ft+(Tn.x+Vn.x)*2,S=nn/2),a=a.subtract(Ce(p,S,!0)).add(Tn).add(Vn),Lr(re,"leaflet-tooltip-right"),Lr(re,"leaflet-tooltip-left"),Lr(re,"leaflet-tooltip-top"),Lr(re,"leaflet-tooltip-bottom"),sr(re,"leaflet-tooltip-"+Pt),vi(re,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&Ui(this._container,a)},_animateZoom:function(a){var p=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(p)},_getAnchor:function(){return Ce(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ta=function(a,p){return new va(a,p)};Nr.include({openTooltip:function(a,p,S){return this._initOverlay(va,a,p,S).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),Ar.include({bindTooltip:function(a,p){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(va,this._tooltip,a,p),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var p=a?"off":"on",S={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?S.add=this._openTooltip:(S.mouseover=this._openTooltip,S.mouseout=this.closeTooltip,S.click=this._openTooltip,this._map?this._addFocusListeners():S.add=this._addFocusListeners),this._tooltip.options.sticky&&(S.mousemove=this._moveTooltip),this[p](S),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof Uo||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var p=typeof a.getElement=="function"&&a.getElement();p&&(dr(p,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),dr(p,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var p=typeof a.getElement=="function"&&a.getElement();p&&p.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var p=this;this._map.once("moveend",function(){p._openOnceFlag=!1,p._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var p=a.latlng,S,z;this._tooltip.options.sticky&&a.originalEvent&&(S=this._map.mouseEventToContainerPoint(a.originalEvent),z=this._map.containerPointToLayerPoint(S),p=this._map.layerPointToLatLng(z)),this._tooltip.setLatLng(p)}});var na=Xs.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var p=a&&a.tagName==="DIV"?a:document.createElement("div"),S=this.options;if(S.html instanceof Element?(Cr(p),p.appendChild(S.html)):p.innerHTML=S.html!==!1?S.html:"",S.bgPos){var z=Ce(S.bgPos);p.style.backgroundPosition=-z.x+"px "+-z.y+"px"}return this._setIconStyles(p,"icon"),p},createShadow:function(){return null}});function ra(a){return new na(a)}Xs.Default=ja;var Dr=Ar.extend({options:{tileSize:256,opacity:1,updateWhenIdle:bn.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){T(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),jt(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Di(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(zi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof q?a:new q(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var p=this.getPane().children,S=-a(-1/0,1/0),z=0,re=p.length,Se;z<re;z++)Se=p[z].style.zIndex,p[z]!==this._container&&Se&&(S=a(S,+Se));isFinite(S)&&(this.options.zIndex=S+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!bn.ielt9){Ui(this._container,this.options.opacity);var a=+new Date,p=!1,S=!1;for(var z in this._tiles){var re=this._tiles[z];if(!(!re.current||!re.loaded)){var Se=Math.min(1,(a-re.loaded)/200);Ui(re.el,Se),Se<1?p=!0:(re.active?S=!0:this._onOpaqueTile(re),re.active=!0)}}S&&!this._noPrune&&this._pruneTiles(),p&&(D(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=sn("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,p=this.options.maxZoom;if(a!==void 0){for(var S in this._levels)S=Number(S),this._levels[S].el.children.length||S===a?(this._levels[S].el.style.zIndex=p-Math.abs(a-S),this._onUpdateLevel(S)):(jt(this._levels[S].el),this._removeTilesAtZoom(S),this._onRemoveLevel(S),delete this._levels[S]);var z=this._levels[a],re=this._map;return z||(z=this._levels[a]={},z.el=sn("div","leaflet-tile-container leaflet-zoom-animated",this._container),z.el.style.zIndex=p,z.origin=re.project(re.unproject(re.getPixelOrigin()),a).round(),z.zoom=a,this._setZoomTransform(z,re.getCenter(),re.getZoom()),y(z.el.offsetWidth),this._onCreateLevel(z)),this._level=z,z}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var a,p,S=this._map.getZoom();if(S>this.options.maxZoom||S<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)p=this._tiles[a],p.retain=p.current;for(a in this._tiles)if(p=this._tiles[a],p.current&&!p.active){var z=p.coords;this._retainParent(z.x,z.y,z.z,z.z-5)||this._retainChildren(z.x,z.y,z.z,z.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var p in this._tiles)this._tiles[p].coords.z===a&&this._removeTile(p)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)jt(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,p,S,z){var re=Math.floor(a/2),Se=Math.floor(p/2),at=S-1,Pt=new q(+re,+Se);Pt.z=+at;var Ft=this._tileCoordsToKey(Pt),nn=this._tiles[Ft];return nn&&nn.active?(nn.retain=!0,!0):(nn&&nn.loaded&&(nn.retain=!0),at>z?this._retainParent(re,Se,at,z):!1)},_retainChildren:function(a,p,S,z){for(var re=2*a;re<2*a+2;re++)for(var Se=2*p;Se<2*p+2;Se++){var at=new q(re,Se);at.z=S+1;var Pt=this._tileCoordsToKey(at),Ft=this._tiles[Pt];if(Ft&&Ft.active){Ft.retain=!0;continue}else Ft&&Ft.loaded&&(Ft.retain=!0);S+1<z&&this._retainChildren(re,Se,S+1,z)}},_resetView:function(a){var p=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),p,p)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var p=this.options;return p.minNativeZoom!==void 0&&a<p.minNativeZoom?p.minNativeZoom:p.maxNativeZoom!==void 0&&p.maxNativeZoom<a?p.maxNativeZoom:a},_setView:function(a,p,S,z){var re=Math.round(p);this.options.maxZoom!==void 0&&re>this.options.maxZoom||this.options.minZoom!==void 0&&re<this.options.minZoom?re=void 0:re=this._clampZoom(re);var Se=this.options.updateWhenZooming&&re!==this._tileZoom;(!z||Se)&&(this._tileZoom=re,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),re!==void 0&&this._update(a),S||this._pruneTiles(),this._noPrune=!!S),this._setZoomTransforms(a,p)},_setZoomTransforms:function(a,p){for(var S in this._levels)this._setZoomTransform(this._levels[S],a,p)},_setZoomTransform:function(a,p,S){var z=this._map.getZoomScale(S,a.zoom),re=a.origin.multiplyBy(z).subtract(this._map._getNewPixelOrigin(p,S)).round();bn.any3d?so(a.el,re,z):vi(a.el,re)},_resetGrid:function(){var a=this._map,p=a.options.crs,S=this._tileSize=this.getTileSize(),z=this._tileZoom,re=this._map.getPixelWorldBounds(this._tileZoom);re&&(this._globalTileRange=this._pxBoundsToTileRange(re)),this._wrapX=p.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,p.wrapLng[0]],z).x/S.x),Math.ceil(a.project([0,p.wrapLng[1]],z).x/S.y)],this._wrapY=p.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([p.wrapLat[0],0],z).y/S.x),Math.ceil(a.project([p.wrapLat[1],0],z).y/S.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var p=this._map,S=p._animatingZoom?Math.max(p._animateToZoom,p.getZoom()):p.getZoom(),z=p.getZoomScale(S,this._tileZoom),re=p.project(a,this._tileZoom).floor(),Se=p.getSize().divideBy(z*2);return new Xe(re.subtract(Se),re.add(Se))},_update:function(a){var p=this._map;if(p){var S=this._clampZoom(p.getZoom());if(a===void 0&&(a=p.getCenter()),this._tileZoom!==void 0){var z=this._getTiledPixelBounds(a),re=this._pxBoundsToTileRange(z),Se=re.getCenter(),at=[],Pt=this.options.keepBuffer,Ft=new Xe(re.getBottomLeft().subtract([Pt,-Pt]),re.getTopRight().add([Pt,-Pt]));if(!(isFinite(re.min.x)&&isFinite(re.min.y)&&isFinite(re.max.x)&&isFinite(re.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var nn in this._tiles){var Tn=this._tiles[nn].coords;(Tn.z!==this._tileZoom||!Ft.contains(new q(Tn.x,Tn.y)))&&(this._tiles[nn].current=!1)}if(Math.abs(S-this._tileZoom)>1){this._setView(a,S);return}for(var Vn=re.min.y;Vn<=re.max.y;Vn++)for(var Er=re.min.x;Er<=re.max.x;Er++){var to=new q(Er,Vn);if(to.z=this._tileZoom,!!this._isValidTile(to)){var Bi=this._tiles[this._tileCoordsToKey(to)];Bi?Bi.current=!0:at.push(to)}}if(at.sort(function(Si,rs){return Si.distanceTo(Se)-rs.distanceTo(Se)}),at.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var yo=document.createDocumentFragment();for(Er=0;Er<at.length;Er++)this._addTile(at[Er],yo);this._level.el.appendChild(yo)}}}},_isValidTile:function(a){var p=this._map.options.crs;if(!p.infinite){var S=this._globalTileRange;if(!p.wrapLng&&(a.x<S.min.x||a.x>S.max.x)||!p.wrapLat&&(a.y<S.min.y||a.y>S.max.y))return!1}if(!this.options.bounds)return!0;var z=this._tileCoordsToBounds(a);return se(this.options.bounds).overlaps(z)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var p=this._map,S=this.getTileSize(),z=a.scaleBy(S),re=z.add(S),Se=p.unproject(z,a.z),at=p.unproject(re,a.z);return[Se,at]},_tileCoordsToBounds:function(a){var p=this._tileCoordsToNwSe(a),S=new te(p[0],p[1]);return this.options.noWrap||(S=this._map.wrapLatLngBounds(S)),S},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var p=a.split(":"),S=new q(+p[0],+p[1]);return S.z=+p[2],S},_removeTile:function(a){var p=this._tiles[a];p&&(jt(p.el),delete this._tiles[a],this.fire("tileunload",{tile:p.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){sr(a,"leaflet-tile");var p=this.getTileSize();a.style.width=p.x+"px",a.style.height=p.y+"px",a.onselectstart=y,a.onmousemove=y,bn.ielt9&&this.options.opacity<1&&Ui(a,this.options.opacity)},_addTile:function(a,p){var S=this._getTilePos(a),z=this._tileCoordsToKey(a),re=this.createTile(this._wrapCoords(a),o(this._tileReady,this,a));this._initTile(re),this.createTile.length<2&&$(o(this._tileReady,this,a,null,re)),vi(re,S),this._tiles[z]={el:re,coords:a,current:!0},p.appendChild(re),this.fire("tileloadstart",{tile:re,coords:a})},_tileReady:function(a,p,S){p&&this.fire("tileerror",{error:p,tile:S,coords:a});var z=this._tileCoordsToKey(a);S=this._tiles[z],S&&(S.loaded=+new Date,this._map._fadeAnimated?(Ui(S.el,0),D(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this)):(S.active=!0,this._pruneTiles()),p||(sr(S.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:S.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),bn.ielt9||!this._map._fadeAnimated?$(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var p=new q(this._wrapX?v(a.x,this._wrapX):a.x,this._wrapY?v(a.y,this._wrapY):a.y);return p.z=a.z,p},_pxBoundsToTileRange:function(a){var p=this.getTileSize();return new Xe(a.min.unscaleBy(p).floor(),a.max.unscaleBy(p).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function Us(a){return new Dr(a)}var go=Dr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,p){this._url=a,p=T(this,p),p.detectRetina&&bn.retina&&p.maxZoom>0?(p.tileSize=Math.floor(p.tileSize/2),p.zoomReverse?(p.zoomOffset--,p.minZoom=Math.min(p.maxZoom,p.minZoom+1)):(p.zoomOffset++,p.maxZoom=Math.max(p.minZoom,p.maxZoom-1)),p.minZoom=Math.max(0,p.minZoom)):p.zoomReverse?p.minZoom=Math.min(p.maxZoom,p.minZoom):p.maxZoom=Math.max(p.minZoom,p.maxZoom),typeof p.subdomains=="string"&&(p.subdomains=p.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,p){return this._url===a&&p===void 0&&(p=!0),this._url=a,p||this.redraw(),this},createTile:function(a,p){var S=document.createElement("img");return dr(S,"load",o(this._tileOnLoad,this,p,S)),dr(S,"error",o(this._tileOnError,this,p,S)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(S.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(S.referrerPolicy=this.options.referrerPolicy),S.alt="",S.src=this.getTileUrl(a),S},getTileUrl:function(a){var p={r:bn.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var S=this._globalTileRange.max.y-a.y;this.options.tms&&(p.y=S),p["-y"]=S}return j(this._url,i(p,this.options))},_tileOnLoad:function(a,p){bn.ielt9?setTimeout(o(a,this,null,p),0):a(null,p)},_tileOnError:function(a,p,S){var z=this.options.errorTileUrl;z&&p.getAttribute("src")!==z&&(p.src=z),a(S,p)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,p=this.options.maxZoom,S=this.options.zoomReverse,z=this.options.zoomOffset;return S&&(a=p-a),a+z},_getSubdomain:function(a){var p=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[p]},_abortLoading:function(){var a,p;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(p=this._tiles[a].el,p.onload=y,p.onerror=y,!p.complete)){p.src=le;var S=this._tiles[a].coords;jt(p),delete this._tiles[a],this.fire("tileabort",{tile:p,coords:S})}},_removeTile:function(a){var p=this._tiles[a];if(p)return p.el.setAttribute("src",le),Dr.prototype._removeTile.call(this,a)},_tileReady:function(a,p,S){if(!(!this._map||S&&S.getAttribute("src")===le))return Dr.prototype._tileReady.call(this,a,p,S)}});function ri(a,p){return new go(a,p)}var si=go.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,p){this._url=a;var S=i({},this.defaultWmsParams);for(var z in p)z in this.options||(S[z]=p[z]);p=T(this,p);var re=p.detectRetina&&bn.retina?2:1,Se=this.getTileSize();S.width=Se.x*re,S.height=Se.y*re,this.wmsParams=S},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var p=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[p]=this._crs.code,go.prototype.onAdd.call(this,a)},getTileUrl:function(a){var p=this._tileCoordsToNwSe(a),S=this._crs,z=B(S.project(p[0]),S.project(p[1])),re=z.min,Se=z.max,at=(this._wmsVersion>=1.3&&this._crs===Ji?[re.y,re.x,Se.y,Se.x]:[re.x,re.y,Se.x,Se.y]).join(","),Pt=go.prototype.getTileUrl.call(this,a);return Pt+U(this.wmsParams,Pt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+at},setParams:function(a,p){return i(this.wmsParams,a),p||this.redraw(),this}});function Wi(a,p){return new si(a,p)}go.WMS=si,ri.wms=Wi;var gi=Ar.extend({options:{padding:.1},initialize:function(a){T(this,a),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),sr(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,p){var S=this._map.getZoomScale(p,this._zoom),z=this._map.getSize().multiplyBy(.5+this.options.padding),re=this._map.project(this._center,p),Se=z.multiplyBy(-S).add(re).subtract(this._map._getNewPixelOrigin(a,p));bn.any3d?so(this._container,Se,S):vi(this._container,Se)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,p=this._map.getSize(),S=this._map.containerPointToLayerPoint(p.multiplyBy(-a)).round();this._bounds=new Xe(S,S.add(p.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),_s=gi.extend({options:{tolerance:0},getEvents:function(){var a=gi.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){gi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");dr(a,"mousemove",this._onMouseMove,this),dr(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),dr(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){D(this._redrawRequest),delete this._ctx,jt(this._container),$r(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var p in this._layers)a=this._layers[p],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){gi.prototype._update.call(this);var a=this._bounds,p=this._container,S=a.getSize(),z=bn.retina?2:1;vi(p,a.min),p.width=z*S.x,p.height=z*S.y,p.style.width=S.x+"px",p.style.height=S.y+"px",bn.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){gi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[h(a)]=a;var p=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=p),this._drawLast=p,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var p=a._order,S=p.next,z=p.prev;S?S.prev=z:this._drawLast=z,z?z.next=S:this._drawFirst=S,delete a._order,delete this._layers[h(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var p=a.options.dashArray.split(/[, ]+/),S=[],z,re;for(re=0;re<p.length;re++){if(z=Number(p[re]),isNaN(z))return;S.push(z)}a.options._dashArray=S}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||$(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var p=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Xe,this._redrawBounds.extend(a._pxBounds.min.subtract([p,p])),this._redrawBounds.extend(a._pxBounds.max.add([p,p]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var p=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,p.x,p.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,p=this._redrawBounds;if(this._ctx.save(),p){var S=p.getSize();this._ctx.beginPath(),this._ctx.rect(p.min.x,p.min.y,S.x,S.y),this._ctx.clip()}this._drawing=!0;for(var z=this._drawFirst;z;z=z.next)a=z.layer,(!p||a._pxBounds&&a._pxBounds.intersects(p))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,p){if(this._drawing){var S,z,re,Se,at=a._parts,Pt=at.length,Ft=this._ctx;if(Pt){for(Ft.beginPath(),S=0;S<Pt;S++){for(z=0,re=at[S].length;z<re;z++)Se=at[S][z],Ft[z?"lineTo":"moveTo"](Se.x,Se.y);p&&Ft.closePath()}this._fillStroke(Ft,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var p=a._point,S=this._ctx,z=Math.max(Math.round(a._radius),1),re=(Math.max(Math.round(a._radiusY),1)||z)/z;re!==1&&(S.save(),S.scale(1,re)),S.beginPath(),S.arc(p.x,p.y/re,z,0,Math.PI*2,!1),re!==1&&S.restore(),this._fillStroke(S,a)}},_fillStroke:function(a,p){var S=p.options;S.fill&&(a.globalAlpha=S.fillOpacity,a.fillStyle=S.fillColor||S.color,a.fill(S.fillRule||"evenodd")),S.stroke&&S.weight!==0&&(a.setLineDash&&a.setLineDash(p.options&&p.options._dashArray||[]),a.globalAlpha=S.opacity,a.lineWidth=S.weight,a.strokeStyle=S.color,a.lineCap=S.lineCap,a.lineJoin=S.lineJoin,a.stroke())},_onClick:function(a){for(var p=this._map.mouseEventToLayerPoint(a),S,z,re=this._drawFirst;re;re=re.next)S=re.layer,S.options.interactive&&S._containsPoint(p)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(S))&&(z=S);this._fireEvent(z?[z]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var p=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,p)}},_handleMouseOut:function(a){var p=this._hoveredLayer;p&&(Lr(this._container,"leaflet-interactive"),this._fireEvent([p],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,p){if(!this._mouseHoverThrottled){for(var S,z,re=this._drawFirst;re;re=re.next)S=re.layer,S.options.interactive&&S._containsPoint(p)&&(z=S);z!==this._hoveredLayer&&(this._handleMouseOut(a),z&&(sr(this._container,"leaflet-interactive"),this._fireEvent([z],a,"mouseover"),this._hoveredLayer=z)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,p,S){this._map._fireDOMEvent(p,S||p.type,a)},_bringToFront:function(a){var p=a._order;if(p){var S=p.next,z=p.prev;if(S)S.prev=z;else return;z?z.next=S:S&&(this._drawFirst=S),p.prev=this._drawLast,this._drawLast.next=p,p.next=null,this._drawLast=p,this._requestRedraw(a)}},_bringToBack:function(a){var p=a._order;if(p){var S=p.next,z=p.prev;if(z)z.next=S;else return;S?S.prev=z:z&&(this._drawLast=z),p.prev=null,p.next=this._drawFirst,this._drawFirst.prev=p,this._drawFirst=p,this._requestRedraw(a)}}});function ts(a){return bn.canvas?new _s(a):null}var As=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),bu={_initContainer:function(){this._container=sn("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(gi.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var p=a._container=As("shape");sr(p,"leaflet-vml-shape "+(this.options.className||"")),p.coordsize="1 1",a._path=As("path"),p.appendChild(a._path),this._updateStyle(a),this._layers[h(a)]=a},_addPath:function(a){var p=a._container;this._container.appendChild(p),a.options.interactive&&a.addInteractiveTarget(p)},_removePath:function(a){var p=a._container;jt(p),a.removeInteractiveTarget(p),delete this._layers[h(a)]},_updateStyle:function(a){var p=a._stroke,S=a._fill,z=a.options,re=a._container;re.stroked=!!z.stroke,re.filled=!!z.fill,z.stroke?(p||(p=a._stroke=As("stroke")),re.appendChild(p),p.weight=z.weight+"px",p.color=z.color,p.opacity=z.opacity,z.dashArray?p.dashStyle=Z(z.dashArray)?z.dashArray.join(" "):z.dashArray.replace(/( *, *)/g," "):p.dashStyle="",p.endcap=z.lineCap.replace("butt","flat"),p.joinstyle=z.lineJoin):p&&(re.removeChild(p),a._stroke=null),z.fill?(S||(S=a._fill=As("fill")),re.appendChild(S),S.color=z.fillColor||z.color,S.opacity=z.fillOpacity):S&&(re.removeChild(S),a._fill=null)},_updateCircle:function(a){var p=a._point.round(),S=Math.round(a._radius),z=Math.round(a._radiusY||S);this._setPath(a,a._empty()?"M0 0":"AL "+p.x+","+p.y+" "+S+","+z+" 0,"+65535*360)},_setPath:function(a,p){a._path.v=p},_bringToFront:function(a){Di(a._container)},_bringToBack:function(a){zi(a._container)}},ia=bn.vml?As:pe,eo=gi.extend({_initContainer:function(){this._container=ia("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ia("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){jt(this._container),$r(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){gi.prototype._update.call(this);var a=this._bounds,p=a.getSize(),S=this._container;(!this._svgSize||!this._svgSize.equals(p))&&(this._svgSize=p,S.setAttribute("width",p.x),S.setAttribute("height",p.y)),vi(S,a.min),S.setAttribute("viewBox",[a.min.x,a.min.y,p.x,p.y].join(" ")),this.fire("update")}},_initPath:function(a){var p=a._path=ia("path");a.options.className&&sr(p,a.options.className),a.options.interactive&&sr(p,"leaflet-interactive"),this._updateStyle(a),this._layers[h(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){jt(a._path),a.removeInteractiveTarget(a._path),delete this._layers[h(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var p=a._path,S=a.options;p&&(S.stroke?(p.setAttribute("stroke",S.color),p.setAttribute("stroke-opacity",S.opacity),p.setAttribute("stroke-width",S.weight),p.setAttribute("stroke-linecap",S.lineCap),p.setAttribute("stroke-linejoin",S.lineJoin),S.dashArray?p.setAttribute("stroke-dasharray",S.dashArray):p.removeAttribute("stroke-dasharray"),S.dashOffset?p.setAttribute("stroke-dashoffset",S.dashOffset):p.removeAttribute("stroke-dashoffset")):p.setAttribute("stroke","none"),S.fill?(p.setAttribute("fill",S.fillColor||S.color),p.setAttribute("fill-opacity",S.fillOpacity),p.setAttribute("fill-rule",S.fillRule||"evenodd")):p.setAttribute("fill","none"))},_updatePoly:function(a,p){this._setPath(a,de(a._parts,p))},_updateCircle:function(a){var p=a._point,S=Math.max(Math.round(a._radius),1),z=Math.max(Math.round(a._radiusY),1)||S,re="a"+S+","+z+" 0 1,0 ",Se=a._empty()?"M0 0":"M"+(p.x-S)+","+p.y+re+S*2+",0 "+re+-S*2+",0 ";this._setPath(a,Se)},_setPath:function(a,p){a._path.setAttribute("d",p)},_bringToFront:function(a){Di(a._path)},_bringToBack:function(a){zi(a._path)}});bn.vml&&eo.include(bu);function hi(a){return bn.svg||bn.vml?new eo(a):null}Nr.include({getRenderer:function(a){var p=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return p||(p=this._renderer=this._createRenderer()),this.hasLayer(p)||this.addLayer(p),p},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var p=this._paneRenderers[a];return p===void 0&&(p=this._createRenderer({pane:a}),this._paneRenderers[a]=p),p},_createRenderer:function(a){return this.options.preferCanvas&&ts(a)||hi(a)}});var Bo=lo.extend({initialize:function(a,p){lo.prototype.initialize.call(this,this._boundsToLatLngs(a),p)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=se(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function ns(a,p){return new Bo(a,p)}eo.create=ia,eo.pointsToPath=de,Ao.geometryToLayer=Mo,Ao.coordsToLatLng=ma,Ao.coordsToLatLngs=ko,Ao.latLngToCoords=po,Ao.latLngsToCoords=Qs,Ao.getFeature=ys,Ao.asFeature=To,Nr.mergeOptions({boxZoom:!0});var nr=Qr.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){dr(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){$r(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){jt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ks(),Ll(),this._startPoint=this._map.mouseEventToContainerPoint(a),dr(document,{contextmenu:kr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=sn("div","leaflet-zoom-box",this._container),sr(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var p=new Xe(this._point,this._startPoint),S=p.getSize();vi(this._box,p.min),this._box.style.width=S.x+"px",this._box.style.height=S.y+"px"},_finish:function(){this._moved&&(jt(this._box),Lr(this._container,"leaflet-crosshair")),co(),Or(),$r(document,{contextmenu:kr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var p=new te(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(p).fire("boxzoomend",{boxZoomBounds:p})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Nr.addInitHook("addHandler","boxZoom",nr),Nr.mergeOptions({doubleClickZoom:!0});var ya=Qr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var p=this._map,S=p.getZoom(),z=p.options.zoomDelta,re=a.originalEvent.shiftKey?S-z:S+z;p.options.doubleClickZoom==="center"?p.setZoom(re):p.setZoomAround(a.containerPoint,re)}});Nr.addInitHook("addHandler","doubleClickZoom",ya),Nr.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var _a=Qr.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new js(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}sr(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Lr(this._map._container,"leaflet-grab"),Lr(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var p=se(this._map.options.maxBounds);this._offsetLimit=B(this._map.latLngToContainerPoint(p.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(p.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var p=this._lastTime=+new Date,S=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(S),this._times.push(p),this._prunePositions(p)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),p=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=p.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,p){return a-(a-p)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),p=this._offsetLimit;a.x<p.min.x&&(a.x=this._viscousLimit(a.x,p.min.x)),a.y<p.min.y&&(a.y=this._viscousLimit(a.y,p.min.y)),a.x>p.max.x&&(a.x=this._viscousLimit(a.x,p.max.x)),a.y>p.max.y&&(a.y=this._viscousLimit(a.y,p.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,p=Math.round(a/2),S=this._initialWorldOffset,z=this._draggable._newPos.x,re=(z-p+S)%a+p-S,Se=(z+p+S)%a-p-S,at=Math.abs(re+S)<Math.abs(Se+S)?re:Se;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=at},_onDragEnd:function(a){var p=this._map,S=p.options,z=!S.inertia||a.noInertia||this._times.length<2;if(p.fire("dragend",a),z)p.fire("moveend");else{this._prunePositions(+new Date);var re=this._lastPos.subtract(this._positions[0]),Se=(this._lastTime-this._times[0])/1e3,at=S.easeLinearity,Pt=re.multiplyBy(at/Se),Ft=Pt.distanceTo([0,0]),nn=Math.min(S.inertiaMaxSpeed,Ft),Tn=Pt.multiplyBy(nn/Ft),Vn=nn/(S.inertiaDeceleration*at),Er=Tn.multiplyBy(-Vn/2).round();!Er.x&&!Er.y?p.fire("moveend"):(Er=p._limitOffset(Er,p.options.maxBounds),$(function(){p.panBy(Er,{duration:Vn,easeLinearity:at,noMoveStart:!0,animate:!0})}))}}});Nr.addInitHook("addHandler","dragging",_a),Nr.mergeOptions({keyboard:!0,keyboardPanDelta:80});var $s=Qr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),dr(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),$r(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,p=document.documentElement,S=a.scrollTop||p.scrollTop,z=a.scrollLeft||p.scrollLeft;this._map._container.focus(),window.scrollTo(z,S)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var p=this._panKeys={},S=this.keyCodes,z,re;for(z=0,re=S.left.length;z<re;z++)p[S.left[z]]=[-1*a,0];for(z=0,re=S.right.length;z<re;z++)p[S.right[z]]=[a,0];for(z=0,re=S.down.length;z<re;z++)p[S.down[z]]=[0,a];for(z=0,re=S.up.length;z<re;z++)p[S.up[z]]=[0,-1*a]},_setZoomDelta:function(a){var p=this._zoomKeys={},S=this.keyCodes,z,re;for(z=0,re=S.zoomIn.length;z<re;z++)p[S.zoomIn[z]]=a;for(z=0,re=S.zoomOut.length;z<re;z++)p[S.zoomOut[z]]=-a},_addHooks:function(){dr(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){$r(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var p=a.keyCode,S=this._map,z;if(p in this._panKeys){if(!S._panAnim||!S._panAnim._inProgress)if(z=this._panKeys[p],a.shiftKey&&(z=Ce(z).multiplyBy(3)),S.options.maxBounds&&(z=S._limitOffset(Ce(z),S.options.maxBounds)),S.options.worldCopyJump){var re=S.wrapLatLng(S.unproject(S.project(S.getCenter()).add(z)));S.panTo(re)}else S.panBy(z)}else if(p in this._zoomKeys)S.setZoom(S.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[p]);else if(p===27&&S._popup&&S._popup.options.closeOnEscapeKey)S.closePopup();else return;kr(a)}}});Nr.addInitHook("addHandler","keyboard",$s),Nr.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Go=Qr.extend({addHooks:function(){dr(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){$r(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var p=Wl(a),S=this._map.options.wheelDebounceTime;this._delta+=p,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var z=Math.max(S-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),z),kr(a)},_performZoom:function(){var a=this._map,p=a.getZoom(),S=this._map.options.zoomSnap||0;a._stop();var z=this._delta/(this._map.options.wheelPxPerZoomLevel*4),re=4*Math.log(2/(1+Math.exp(-Math.abs(z))))/Math.LN2,Se=S?Math.ceil(re/S)*S:re,at=a._limitZoom(p+(this._delta>0?Se:-Se))-p;this._delta=0,this._startTime=null,at&&(a.options.scrollWheelZoom==="center"?a.setZoom(p+at):a.setZoomAround(this._lastMousePos,p+at))}});Nr.addInitHook("addHandler","scrollWheelZoom",Go);var mc=600;Nr.mergeOptions({tapHold:bn.touchNative&&bn.safari&&bn.mobile,tapTolerance:15});var mo=Qr.extend({addHooks:function(){dr(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){$r(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var p=a.touches[0];this._startPos=this._newPos=new q(p.clientX,p.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(dr(document,"touchend",cr),dr(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",p))},this),mc),dr(document,"touchend touchcancel contextmenu",this._cancel,this),dr(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){$r(document,"touchend",cr),$r(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),$r(document,"touchend touchcancel contextmenu",this._cancel,this),$r(document,"touchmove",this._onMove,this)},_onMove:function(a){var p=a.touches[0];this._newPos=new q(p.clientX,p.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,p){var S=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:p.screenX,screenY:p.screenY,clientX:p.clientX,clientY:p.clientY});S._simulated=!0,p.target.dispatchEvent(S)}});Nr.addInitHook("addHandler","tapHold",mo),Nr.mergeOptions({touchZoom:bn.touch,bounceAtZoomLimits:!0});var vo=Qr.extend({addHooks:function(){sr(this._map._container,"leaflet-touch-zoom"),dr(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Lr(this._map._container,"leaflet-touch-zoom"),$r(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var p=this._map;if(!(!a.touches||a.touches.length!==2||p._animatingZoom||this._zooming)){var S=p.mouseEventToContainerPoint(a.touches[0]),z=p.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=p.getSize()._divideBy(2),this._startLatLng=p.containerPointToLatLng(this._centerPoint),p.options.touchZoom!=="center"&&(this._pinchStartLatLng=p.containerPointToLatLng(S.add(z)._divideBy(2))),this._startDist=S.distanceTo(z),this._startZoom=p.getZoom(),this._moved=!1,this._zooming=!0,p._stop(),dr(document,"touchmove",this._onTouchMove,this),dr(document,"touchend touchcancel",this._onTouchEnd,this),cr(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var p=this._map,S=p.mouseEventToContainerPoint(a.touches[0]),z=p.mouseEventToContainerPoint(a.touches[1]),re=S.distanceTo(z)/this._startDist;if(this._zoom=p.getScaleZoom(re,this._startZoom),!p.options.bounceAtZoomLimits&&(this._zoom<p.getMinZoom()&&re<1||this._zoom>p.getMaxZoom()&&re>1)&&(this._zoom=p._limitZoom(this._zoom)),p.options.touchZoom==="center"){if(this._center=this._startLatLng,re===1)return}else{var Se=S._add(z)._divideBy(2)._subtract(this._centerPoint);if(re===1&&Se.x===0&&Se.y===0)return;this._center=p.unproject(p.project(this._pinchStartLatLng,this._zoom).subtract(Se),this._zoom)}this._moved||(p._moveStart(!0,!1),this._moved=!0),D(this._animRequest);var at=o(p._move,p,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=$(at,this,!0),cr(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,D(this._animRequest),$r(document,"touchmove",this._onTouchMove,this),$r(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Nr.addInitHook("addHandler","touchZoom",vo),Nr.BoxZoom=nr,Nr.DoubleClickZoom=ya,Nr.Drag=_a,Nr.Keyboard=$s,Nr.ScrollWheelZoom=Go,Nr.TapHold=mo,Nr.TouchZoom=vo,n.Bounds=Xe,n.Browser=bn,n.CRS=fe,n.Canvas=_s,n.Circle=Po,n.CircleMarker=es,n.Class=I,n.Control=Xn,n.DivIcon=na,n.DivOverlay=Ho,n.DomEvent=Pl,n.DomUtil=ar,n.Draggable=js,n.Evented=K,n.FeatureGroup=Uo,n.GeoJSON=Ao,n.GridLayer=Dr,n.Handler=Qr,n.Icon=Xs,n.ImageOverlay=Pn,n.LatLng=ae,n.LatLngBounds=te,n.Layer=Ar,n.LayerGroup=Co,n.LineUtil=Pr,n.Map=Nr,n.Marker=Qi,n.Mixin=Zu,n.Path=vs,n.Point=q,n.PolyUtil=il,n.Polygon=lo,n.Polyline=Vo,n.Popup=Li,n.PosAnimation=Zl,n.Projection=ti,n.Rectangle=Bo,n.Renderer=gi,n.SVG=eo,n.SVGOverlay=ni,n.TileLayer=go,n.Tooltip=va,n.Transformation=Me,n.Util=k,n.VideoOverlay=lr,n.bind=o,n.bounds=B,n.canvas=ts,n.circle=$o,n.circleMarker=sl,n.control=Hi,n.divIcon=ra,n.extend=i,n.featureGroup=Yl,n.geoJSON=Ht,n.geoJson=Mt,n.gridLayer=Us,n.icon=_u,n.imageOverlay=Un,n.latLng=we,n.latLngBounds=se,n.layerGroup=ol,n.map=Vi,n.marker=Js,n.point=Ce,n.polygon=pa,n.polyline=Ku,n.popup=ea,n.rectangle=ns,n.setOptions=T,n.stamp=h,n.svg=hi,n.svgOverlay=Bl,n.tileLayer=ri,n.tooltip=ta,n.transformation=Ze,n.version=r,n.videoOverlay=xi;var Vs=window.L;n.noConflict=function(){return window.L=Vs,this},window.L=n})})(s1,s1.exports);var Rt=s1.exports;const Rn=cy(Rt);var rb={exports:{}};(function(e,t){(function(n,r){r(t)})(Zs,function(n){var r=typeof window<"u"?window:typeof Zs<"u"?Zs:typeof self<"u"?self:{};function i(d,v){return d(v={exports:{}},v.exports),v.exports}var s=i(function(d,v){(function(y){const x={escape:function(W){return W.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:_,mimeType:function(W){return W=_(W).toLowerCase(),function(){var G="application/font-woff",K="image/jpeg";return{woff:G,woff2:G,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:K,jpeg:K,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[W]||""},dataAsUrl:function(W,G){return`data:${G};base64,`+W},isDataUrl:function(W){return W.search(/^(data:)/)!==-1},canvasToBlob:function(W){return W.toBlob?new Promise(function(K){W.toBlob(K)}):(G=W,new Promise(function(K){const q=Le(G.toDataURL().split(",")[1]);var ve=q.length;const Ce=new Uint8Array(ve);for(let Xe=0;Xe<ve;Xe++)Ce[Xe]=q.charCodeAt(Xe);K(new Blob([Ce],{type:"image/png"}))}));var G},resolveUrl:function(W,G){const K=document.implementation.createHTMLDocument(),q=K.createElement("base"),ve=(K.head.appendChild(q),K.createElement("a"));return K.body.appendChild(ve),q.href=G,ve.href=W,ve.href},getAndEncode:function(W){let G=le.impl.urlCache.find(function(K){return K.url===W});return G||(G={url:W,promise:null},le.impl.urlCache.push(G)),G.promise===null&&(le.impl.options.cacheBust&&(W+=(/\?/.test(W)?"&":"?")+new Date().getTime()),G.promise=new Promise(function(K){const q=le.impl.options.httpTimeout,ve=new XMLHttpRequest;let Ce;var Xe;function B(te){console.error(te),K("")}ve.onreadystatechange=function(){if(ve.readyState===4)if(ve.status!==200)Ce?K(Ce):B(`cannot fetch resource: ${W}, status: `+ve.status);else{const te=new FileReader;te.onloadend=function(){var se=te.result.split(/,/)[1];K(se)},te.readAsDataURL(ve.response)}},ve.ontimeout=function(){Ce?K(Ce):B(`timeout of ${q}ms occured while fetching resource: `+W)},ve.responseType="blob",ve.timeout=q,le.impl.options.useCredentials&&(ve.withCredentials=!0),ve.open("GET",W,!0),ve.send(),le.impl.options.imagePlaceholder&&(Xe=le.impl.options.imagePlaceholder.split(/,/))&&Xe[1]&&(Ce=Xe[1])})),G.promise},uid:function(){let W=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+W++}}(),delay:function(W){return function(G){return new Promise(function(K){setTimeout(function(){K(G)},W)})}},asArray:function(W){const G=[],K=W.length;for(let q=0;q<K;q++)G.push(W[q]);return G},escapeXhtml:function(W){return W.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(W){return W!=="data:,"?new Promise(function(G,K){const q=new Image;le.impl.options.useCredentials&&(q.crossOrigin="use-credentials"),q.onload=function(){G(q)},q.onerror=K,q.src=W}):Promise.resolve()},width:function(W){var G=P(W,"border-left-width"),K=P(W,"border-right-width");return W.scrollWidth+G+K},height:function(W){var G=P(W,"border-top-width"),K=P(W,"border-bottom-width");return W.scrollHeight+G+K}};function _(W){return(W=/\.([^\.\/]*?)(\?|$)/g.exec(W))?W[1]:""}function P(W,G){const K=he(W).getPropertyValue(G);return parseFloat(K.replace("px",""))}const T=function(){const W=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(ve,Ce,Xe){return G(ve)?Promise.resolve(ve).then(K).then(function(B){let te=Promise.resolve(ve);return B.forEach(function(se){te=te.then(function(ae){return q(ae,se,Ce,Xe)})}),te}):Promise.resolve(ve)},shouldProcess:G,impl:{readUrls:K,inline:q}};function G(ve){return ve.search(W)!==-1}function K(ve){const Ce=[];for(var Xe;(Xe=W.exec(ve))!==null;)Ce.push(Xe[1]);return Ce.filter(function(B){return!x.isDataUrl(B)})}function q(ve,Ce,Xe,B){return Promise.resolve(Ce).then(function(te){return Xe?x.resolveUrl(te,Xe):te}).then(B||x.getAndEncode).then(function(te){return x.dataAsUrl(te,x.mimeType(Ce))}).then(function(te){return ve.replace((se=Ce,new RegExp(`(url\\(['"]?)(${x.escape(se)})(['"]?\\))`,"g")),`$1${te}$3`);var se})}}(),U={resolveAll:function(){return N().then(function(W){return Promise.all(W.map(function(G){return G.resolve()}))}).then(function(W){return W.join(`
`)})},impl:{readAll:N}};function N(){return Promise.resolve(x.asArray(document.styleSheets)).then(function(G){const K=[];return G.forEach(function(q){if(Object.getPrototypeOf(q).hasOwnProperty("cssRules"))try{x.asArray(q.cssRules||[]).forEach(K.push.bind(K))}catch(ve){console.log("Error while reading CSS rules from "+q.href,ve.toString())}}),K}).then(function(G){return G.filter(function(K){return K.type===CSSRule.FONT_FACE_RULE}).filter(function(K){return T.shouldProcess(K.style.getPropertyValue("src"))})}).then(function(G){return G.map(W)});function W(G){return{resolve:function(){var K=(G.parentStyleSheet||{}).href;return T.inlineAll(G.cssText,K)},src:function(){return G.style.getPropertyValue("src")}}}}const j={inlineAll:function W(G){return G instanceof Element?function(K){const q=K.style.getPropertyValue("background");return q?T.inlineAll(q).then(function(ve){K.style.setProperty("background",ve,q)}).then(function(){return K}):Promise.resolve(K)}(G).then(function(){return G instanceof HTMLImageElement?Z(G).inline():Promise.all(x.asArray(G.childNodes).map(function(K){return W(K)}))}):Promise.resolve(G)},impl:{newImage:Z}};function Z(W){return{inline:function(G){return x.isDataUrl(W.src)?Promise.resolve():Promise.resolve(W.src).then(G||x.getAndEncode).then(function(K){return x.dataAsUrl(K,x.mimeType(W.src))}).then(function(K){return new Promise(function(q){W.onload=q,W.onerror=q,W.src=K})})}}}const J={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},le={toSvg:V,toPng:function(W,G){return(G=G||{}).raster=!0,F(W,G).then(function(K){return K.toDataURL()})},toJpeg:function(W,G){return(G=G||{}).raster=!0,F(W,G).then(function(K){return K.toDataURL("image/jpeg",G.quality||1)})},toBlob:function(W,G){return(G=G||{}).raster=!0,F(W,G).then(x.canvasToBlob)},toPixelData:function(W,G){return(G=G||{}).raster=!0,F(W,G).then(function(K){return K.getContext("2d").getImageData(0,0,x.width(W),x.height(W)).data})},toCanvas:function(W,G){return(G=G||{}).raster=!0,F(W,G||{})},impl:{fontFaces:U,images:j,util:x,inliner:T,urlCache:[],options:{}}},he=(d.exports=le,y.getComputedStyle||window.getComputedStyle),Le=y.atob||window.atob;function V(W,G){var K=G=G||{};return K.imagePlaceholder===void 0?le.impl.options.imagePlaceholder=J.imagePlaceholder:le.impl.options.imagePlaceholder=K.imagePlaceholder,K.cacheBust===void 0?le.impl.options.cacheBust=J.cacheBust:le.impl.options.cacheBust=K.cacheBust,K.useCredentials===void 0?le.impl.options.useCredentials=J.useCredentials:le.impl.options.useCredentials=K.useCredentials,Promise.resolve(W).then(function(q){return function ve(Ce,Xe,B,te,se=null){return B||!Xe||Xe(Ce)?Promise.resolve(Ce).then(function(ae){return ae instanceof HTMLCanvasElement?x.makeImage(ae.toDataURL()):ae.nodeName==="IFRAME"?html2canvas(ae.contentDocument.body).then(we=>we.toDataURL()).then(x.makeImage):ae.cloneNode(!1)}).then(function(ae){return function(we,fe){const Q=we.childNodes;return Q.length===0?Promise.resolve(fe):function(ue,Re){const Me=he(we);let Ze=Promise.resolve();return Re.forEach(function(oe){Ze=Ze.then(function(){return ve(oe,Xe,!1,te,Me)}).then(function(me){me&&ue.appendChild(me)})}),Ze}(fe,x.asArray(Q)).then(function(){return fe})}(Ce,ae)}).then(function(ae){return function(we,fe,Q){return fe instanceof Element?Promise.resolve().then(function(){(function(ue,Re){const Me=he(ue);Me.cssText?(Re.style.cssText=Me.cssText,function(Ze,oe){oe.font=Ze.font,oe.fontFamily=Ze.fontFamily,oe.fontFeatureSettings=Ze.fontFeatureSettings,oe.fontKerning=Ze.fontKerning,oe.fontSize=Ze.fontSize,oe.fontStretch=Ze.fontStretch,oe.fontStyle=Ze.fontStyle,oe.fontVariant=Ze.fontVariant,oe.fontVariantCaps=Ze.fontVariantCaps,oe.fontVariantEastAsian=Ze.fontVariantEastAsian,oe.fontVariantLigatures=Ze.fontVariantLigatures,oe.fontVariantNumeric=Ze.fontVariantNumeric,oe.fontVariationSettings=Ze.fontVariationSettings,oe.fontWeight=Ze.fontWeight}(Me,Re.style)):(Q?function(Ze,oe,me,pe){const de=me.style,ze=Ze.style;for(var Ke of oe){var Ge=oe.getPropertyValue(Ke),Qe=ze.getPropertyValue(Ke),Ve=(ze.setProperty(Ke,pe?"initial":"unset"),oe.getPropertyValue(Ke));Ve!==Ge?de.setProperty(Ke,Ge):de.removeProperty(Ke),ze.setProperty(Ke,Qe)}}(ue,Me,Re,B):function(Ze,oe,me){const pe=function(ze){if(I[ze])return I[ze];k||((k=document.createElement("iframe")).style.visibility="hidden",k.style.position="fixed",document.body.appendChild(k),k.contentWindow.document.write('<!DOCTYPE html><meta charset="UTF-8"><title>sandbox</title><body>'));const Ke=document.createElement(ze),Ge=(k.contentWindow.document.body.appendChild(Ke),Ke.textContent=".",k.contentWindow.getComputedStyle(Ke)),Qe={};return x.asArray(Ge).forEach(function(Ve){Qe[Ve]=Ve==="width"||Ve==="height"?"auto":Ge.getPropertyValue(Ve)}),k.contentWindow.document.body.removeChild(Ke),I[ze]=Qe}(me.tagName),de=me.style;x.asArray(Ze).forEach(function(ze){var Ke=Ze.getPropertyValue(ze);(Ke!==pe[ze]||oe&&Ke!==oe.getPropertyValue(ze))&&de.setProperty(ze,Ke,Ze.getPropertyPriority(ze))})}(Me,se,Re),B&&(["inset-block","inset-block-start","inset-block-end"].forEach(Ze=>Re.style.removeProperty(Ze)),["left","right","top","bottom"].forEach(Ze=>{Re.style.getPropertyValue(Ze)&&Re.style.setProperty(Ze,"0px")})))})(we,fe)}).then(function(){[":before",":after"].forEach(function(ue){(function(Re){const Me=he(we,Re),Ze=Me.getPropertyValue("content");if(Ze!==""&&Ze!=="none"){const oe=x.uid(),me=fe.getAttribute("class"),pe=(me&&fe.setAttribute("class",me+" "+oe),document.createElement("style"));pe.appendChild(function(){const de=`.${oe}:`+Re,ze=(Me.cssText?function(){return`${Me.cssText} content: ${Me.getPropertyValue("content")};`}:function(){return x.asArray(Me).map(function(Ke){return Ke+": "+Me.getPropertyValue(Ke)+(Me.getPropertyPriority(Ke)?" !important":"")}).join("; ")+";"})();return document.createTextNode(de+`{${ze}}`)}()),fe.appendChild(pe)}})(ue)})}).then(function(){we instanceof HTMLTextAreaElement&&(fe.innerHTML=we.value),we instanceof HTMLInputElement&&fe.setAttribute("value",we.value)}).then(function(){fe instanceof SVGElement&&(fe.setAttribute("xmlns","http://www.w3.org/2000/svg"),fe instanceof SVGRectElement&&["width","height"].forEach(function(ue){const Re=fe.getAttribute(ue);Re&&fe.style.setProperty(ue,Re)}))}).then(function(){return fe}):fe}(Ce,ae,te)}):Promise.resolve()}(q,G.filter,!0,!G.raster)}).then(Y).then($).then(function(q){G.bgcolor&&(q.style.backgroundColor=G.bgcolor),G.width&&(q.style.width=G.width+"px"),G.height&&(q.style.height=G.height+"px"),G.style&&Object.keys(G.style).forEach(function(Ce){q.style[Ce]=G.style[Ce]});let ve=null;return typeof G.onclone=="function"&&(ve=G.onclone(q)),Promise.resolve(ve).then(function(){return q})}).then(function(q){return q=q,ve=G.width||x.width(W),Ce=G.height||x.height(W),Promise.resolve(q).then(function(Xe){return Xe.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(Xe)}).then(x.escapeXhtml).then(function(Xe){return`<foreignObject x="0" y="0" width="100%" height="100%">${Xe}</foreignObject>`}).then(function(Xe){return`<svg xmlns="http://www.w3.org/2000/svg" width="${ve}" height="${Ce}">${Xe}</svg>`}).then(function(Xe){return"data:image/svg+xml;charset=utf-8,"+Xe});var ve,Ce}).then(function(q){return le.impl.urlCache=[],q})}function F(W,G){return V(W,G).then(x.makeImage).then(x.delay(0)).then(function(K){var q=typeof G.scale!="number"?1:G.scale;const ve=function(Xe,B){const te=document.createElement("canvas");if(te.width=(G.width||x.width(Xe))*B,te.height=(G.height||x.height(Xe))*B,G.bgcolor){const se=te.getContext("2d");se.fillStyle=G.bgcolor,se.fillRect(0,0,te.width,te.height)}return te}(W,q),Ce=ve.getContext("2d");return Ce.mozImageSmoothingEnabled=!1,Ce.msImageSmoothingEnabled=!1,Ce.imageSmoothingEnabled=!1,K&&(Ce.scale(q,q),Ce.drawImage(K,0,0)),k&&(document.body.removeChild(k),k=null,D&&clearTimeout(D),D=setTimeout(()=>{D=null,I={}},2e4)),ve})}function Y(W){return U.resolveAll().then(function(G){const K=document.createElement("style");return W.appendChild(K),K.appendChild(document.createTextNode(G)),W})}function $(W){return j.inlineAll(W).then(function(){return W})}let D=null,k=null,I={}})(r)}),o=i(function(d,v){(function(){function y(U,N,j){var Z=new XMLHttpRequest;Z.open("GET",U),Z.responseType="blob",Z.onload=function(){T(Z.response,N,j)},Z.onerror=function(){console.error("could not download file")},Z.send()}function x(U){var N=new XMLHttpRequest;N.open("HEAD",U,!1);try{N.send()}catch{}return 200<=N.status&&299>=N.status}function _(U){try{U.dispatchEvent(new MouseEvent("click"))}catch{var N=document.createEvent("MouseEvents");N.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),U.dispatchEvent(N)}}var P=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof r=="object"&&r.global===r?r:void 0,T=P.saveAs||(typeof window!="object"||window!==P?function(){}:"download"in HTMLAnchorElement.prototype?function(U,N,j){var Z=P.URL||P.webkitURL,J=document.createElement("a");N=N||U.name||"download",J.download=N,J.rel="noopener",typeof U=="string"?(J.href=U,J.origin===location.origin?_(J):x(J.href)?y(U,N,j):_(J,J.target="_blank")):(J.href=Z.createObjectURL(U),setTimeout(function(){Z.revokeObjectURL(J.href)},4e4),setTimeout(function(){_(J)},0))}:"msSaveOrOpenBlob"in navigator?function(U,N,j){if(N=N||U.name||"download",typeof U!="string")navigator.msSaveOrOpenBlob(function(J,le){return le===void 0?le={autoBom:!1}:typeof le!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),le={autoBom:!le}),le.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(J.type)?new Blob(["\uFEFF",J],{type:J.type}):J}(U,j),N);else if(x(U))y(U,N,j);else{var Z=document.createElement("a");Z.href=U,Z.target="_blank",setTimeout(function(){_(Z)})}}:function(U,N,j,Z){if((Z=Z||open("","_blank"))&&(Z.document.title=Z.document.body.innerText="downloading..."),typeof U=="string")return y(U,N,j);var J=U.type==="application/octet-stream",le=/constructor/i.test(P.HTMLElement)||P.safari,he=/CriOS\/[\d]+/.test(navigator.userAgent);if((he||J&&le)&&typeof FileReader=="object"){var Le=new FileReader;Le.onloadend=function(){var Y=Le.result;Y=he?Y:Y.replace(/^data:[^;]*;/,"data:attachment/file;"),Z?Z.location.href=Y:location=Y,Z=null},Le.readAsDataURL(U)}else{var V=P.URL||P.webkitURL,F=V.createObjectURL(U);Z?Z.location=F:location.href=F,Z=null,setTimeout(function(){V.revokeObjectURL(F)},4e4)}});P.saveAs=T.saveAs=T,d.exports=T})()}),u=L.Control.extend({options:{cropImageByInnerWH:!0,hidden:!1,domtoimageOptions:{},position:"topleft",screenName:"screen",iconUrl:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+",hideElementsWithSelectors:[".leaflet-control-container"],onCropBorderSize:2,caption:null,captionFontSize:15,captionFont:"Arial",captionColor:"black",captionBgColor:"white",captionOffset:5,mimeType:"image/png",debugMode:!1,preventDownload:!1,onPixelDataFail:function(d){var v=d.node,y=d.error;return console.warn("Map node is very big "+v.scrollWidth+"x"+v.scrollHeight),console.warn(`Add function: SimpleMapScreenshoter({
              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {
                 // Solutions:
                 // decrease size of map
                 // or decrease zoom level
                 // or remove elements with big distanses
                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap
                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)
              }
            })`),Promise.reject(y)}},onAdd:function(){return this._container=L.DomUtil.create("div","leaflet-control-simpleMapScreenshoter"),this._link=null,this._screenState={status:1,promise:null},this.options.hidden===!1&&this._addScreenBtn(),this._onUserStartInteractWithMap=this._onUserStartInteractWithMap.bind(this),this._onUserEndInteractWithMap=this._onUserEndInteractWithMap.bind(this),this._map.on("zoomstart",this._onUserStartInteractWithMap),this._map.on("move",this._onUserStartInteractWithMap),this._map.on("zoomend",this._onUserEndInteractWithMap),this._map.on("moveend",this._onUserEndInteractWithMap),this._container},takeScreen:function(){var d=this,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"blob",y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},x={};for(var _ in this.options)y.hasOwnProperty(_)?x[_]=y[_]:x[_]=this.options[_];return this._screenState.status===2?this._screenState.promise:(this._map.fire("simpleMapScreenshoter.takeScreen"),this._screenState.status=2,this._setElementsVisible(!1),this._screenState.promise=this._waitEndOfInteractions().then(function(){return d._getPixelData(x)}).then(function(P){return d._setElementsVisible(!0),d._toCanvas(P,x)}).then(function(P){return v==="image"?d._canvasToImage(P,x):v==="canvas"?P:d._canvasToBlob(P,x)}).then(function(P){return d._screenState.status=1,d._map.fire("simpleMapScreenshoter.done"),P}).catch(function(P){return d._setElementsVisible(!0),d._screenState.status=1,d._map.fire("simpleMapScreenshoter.error",{e:P}),Promise.reject(P)}),this._screenState.promise)},_setElementsVisible:function(){var d=this,v=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.hideElementsWithSelectors.forEach(function(y){var x=d._map._container.querySelectorAll(y),_=!0,P=!1,T=void 0;try{for(var U,N=x[Symbol.iterator]();!(_=(U=N.next()).done);_=!0)U.value.style.opacity=v===!1?0:1}catch(j){P=!0,T=j}finally{try{!_&&N.return&&N.return()}finally{if(P)throw T}}})},_canvasToImage:function(d,v){var y=v.mimeType,x=d.toDataURL(y);return x.indexOf("base64")===-1?Promise.reject(new Error("Base64 image generation error")):Promise.resolve(x)},_canvasToBlob:function(d,v){var y=v.mimeType;return new Promise(function(x,_){d.toBlob(function(P){x(P)},y)})},_toCanvas:function(d,v){var y=v.captionOffset,x=v.caption,_=v.captionFontSize,P=v.captionFont,T=v.captionColor,U=v.captionBgColor,N=this._node,j=N.screenHeight,Z=N.screenWidth,J=document.createElement("canvas");J.width=Z,J.height=j;for(var le=J.getContext("2d"),he=le.createImageData(Z,j),Le=0;Le<d.length;++Le)he.data[Le]=d[Le];le.putImageData(he,0,0),he=null;var V=document.createElement("canvas"),F=V.getContext("2d"),Y=0,$=0,D=j,k=Z;if(this.options.cropImageByInnerWH===!0){for(var I=[],W=0,G=0;G<j;++G){W=0;for(var K=0;K<Z;++K)d[4*G*Z+4*K+4]===0&&W++;W===Z&&I.push(G)}var q=this._getMinAndMaxOnValuesBreak(I);Y=q.min;for(var ve=Z,Ce=q.max,Xe=[],B=0,te=$;te<ve;++te){B=0;for(var se=0;se<j;++se)d[4*se*Z+4*te+4]===0&&B++;B===j&&Xe.push(te)}var ae=this._getMinAndMaxOnValuesBreak(Xe);$=ae.min,ve=ae.max,($===0&&ve===0||ve===null)&&(ve=Z),(Y===0&&Ce===0||Ce===null)&&(Ce=j),this.options.debugMode===!0&&(console.log("emptyYLine",I),console.log("minMaxY",q),console.log("emptyXLine",Xe),console.log("minMaxX",ae),console.log("debugX",{}),console.log("debugY",{})),Y===0&&Ce===j&&$===0&&ve===Z||(Y+=this.options.onCropBorderSize,Ce-=this.options.onCropBorderSize,$+=this.options.onCropBorderSize,ve-=this.options.onCropBorderSize),D=Ce-Y,k=ve-$,V.width=k,V.height=D}else V.width=k,V.height=D;var we=null;return x&&(we=typeof x=="function"?x.call(this):x),we!==null&&(V.height=V.height+(y+_+y),F.beginPath(),F.rect(0,0,V.width,V.height),F.fillStyle=U,F.fill(),F.save()),F.drawImage(J,$,Y,k,D,0,0,k,D),we!==null&&(F.font=_+"px "+P,F.fillStyle=T,F.fillText(we,y,D+y+_)),Promise.resolve(V)},_getMinAndMaxOnValuesBreak:function(d){for(var v=0,y=0,x=!1,_=1;_<d.length;_++){if(d[_]-1!==d[_-1]){y=d[_],x=!0;break}v=d[_]}return x===!1&&d[0]>1?(v=0,y=d[0]):x===!1&&(v=d[d.length-1]||0,y=null),{min:v,max:y}},_getPixelData:function(d){var v=this,y=d.domtoimageOptions,x=y===void 0?{}:y;return this._getPixelDataOfNormalMap(x).catch(function(_){return console.warn("May be map size very big on that zoom level, we have error:",_.toString()),console.warn("You can manually hide map elements with large distances between them for fix that warn"),v._getPixelDataOfBigMap(x)})},_getPixelDataOfNormalMap:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=this._map.getContainer();return this._node={node:v,screenHeight:v.scrollHeight,screenWidth:v.scrollWidth},s.toPixelData(v,d)},_getPixelDataOfBigMap:function(){var d=this,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=this._map.getContainer(),x=this._map.getPane("mapPane");x.style.width=2*y.clientWidth+"px",x.style.height=2*y.clientHeight+"px",x.style.overflow="hidden";var _=function(){x.style.width="initial",x.style.height="initial",x.style.overflow="initial"};return this._node={node:y,screenHeight:y.scrollHeight,screenWidth:y.scrollWidth},s.toPixelData(y,v).then(function(P){return _(),P}).catch(function(P){return _(),y.scrollHeight>=4e3||y.scrollWidth>=4e3?d.options.onPixelDataFail({plugin:d,node:y,mapPane:x,error:P,domtoimageOptions:v}):Promise.reject(P)})},_addScreenBtn:function(){this._link=L.DomUtil.create("a","leaflet-control-simpleMapScreenshoter-btn",this._container),this._addCss(),L.DomEvent.addListener(this._link,"click",this._onScreenBtn,this),L.DomEvent.disableClickPropagation(this._link)},_addCss:function(){var d=`
    .leaflet-control-simpleMapScreenshoter{
       border: 2px solid rgba(0,0,0,0.2);
       background-clip: padding-box;
    }
    .leaflet-control-simpleMapScreenshoter a{
       background-color: #fff;
       border-bottom: 1px solid #ccc;
       width: 30px;
       height: 30px;
       line-height: 30px;
       display: block;
       text-align: center;
       text-decoration: none;
       color: black;
       overflow: hidden;
       border-radius: 2px;
       background-image: url('`+this.options.iconUrl+`');
       background-position: 46% 41%;
       background-repeat: no-repeat;
       background-size: 63%;
    }
    .leaflet-control-simpleMapScreenshoter a:hover{
       cursor: pointer;
    }
    `,v=document.head||document.getElementsByTagName("head")[0],y=document.createElement("style");y.appendChild(document.createTextNode(d)),v.appendChild(y)},_onScreenBtn:function(){var d=this;this._map.fire("simpleMapScreenshoter.click"),this.options.preventDownload||this.takeScreen().then(function(v){var y=typeof d.options.screenName=="function"?d.options.screenName.call(d):d.options.screenName;o.saveAs(v,y+".png")}).catch(function(v){d._map.fire("simpleMapScreenshoter.error",{e:v})})},_onUserStartInteractWithMap:function(){this._interaction=!0},_onUserEndInteractWithMap:function(){this._interaction=!1},_waitEndOfInteractions:function(){var d=this;return new Promise(function(v){var y=setInterval(function(){d._interaction||(v(),clearInterval(y))},100)})}}),h=(L.Control.SimpleMapScreenshoter=u,L.simpleMapScreenshoter=function(d){return new L.Control.SimpleMapScreenshoter(d)},u);n.default=h,n.SimpleMapScreenshoter=u,Object.defineProperty(n,"__esModule",{value:!0})})})(rb,rb.exports);const yO={class:"h-full flex flex-col bg-white overflow-y-auto"},_O={class:"p-2 border-b border-gray-200"},bO={class:"grid grid-cols-4 gap-1.5"},wO=["onClick","title"],xO=["innerHTML"],LO={key:0,class:"flex-1 overflow-y-auto"},SO={class:"p-3 border-b border-gray-200"},EO={class:"p-3"},CO={class:"grid grid-cols-6 gap-2 mb-4"},PO=["onClick","title"],AO={key:0,class:"space-y-4"},MO={class:"flex items-center gap-4"},kO={class:"flex items-center gap-2"},TO={class:"flex items-center gap-4"},BO=["value"],OO={key:0,class:"flex items-center gap-4"},NO={class:"flex items-center gap-2"},DO={key:1,class:"space-y-4"},IO={class:"flex items-center gap-4"},RO={class:"flex items-center gap-2"},FO={class:"flex items-center gap-4"},jO={class:"flex items-center gap-2"},zO={class:"p-3 border-t border-gray-200 mt-2"},UO={class:"p-3"},$O={key:0},VO={class:"mb-4"},HO={class:"grid grid-cols-1 gap-4"},GO={key:0,class:"space-y-1"},qO={class:"flex justify-between items-center"},WO={class:"text-sm font-medium text-gray-500"},ZO={class:"flex justify-between items-center"},KO={class:"text-sm font-medium text-gray-500"},YO={class:"text-sm font-medium text-gray-500"},XO={class:"flex flex-col space-y-2 w-full"},JO={class:"flex justify-between items-center"},QO={class:"text-sm font-medium text-gray-500 ml-2"},eN={class:"flex justify-between items-center"},tN={class:"text-sm font-medium text-gray-500 ml-2"},nN={class:"flex justify-between items-center"},rN={class:"text-sm font-medium text-gray-500 ml-2"},iN={class:"flex justify-between items-center"},oN={class:"text-sm font-medium text-gray-500 ml-2"},sN={class:"flex justify-between items-center"},aN={class:"text-sm font-medium text-gray-500 ml-2"},lN={ref:"elevationProfileContainer",class:"elevation-profile-container w-full h-48 bg-gray-50 rounded border border-gray-200 relative mt-4"},uN={ref:"elevationCanvas"},cN={key:3,class:"space-y-1"},hN={key:1,class:"text-center text-sm text-gray-500"},fN={key:0,class:"p-3 border-t border-gray-200"},dN={class:"mt-3"},pN={class:"mb-4"},gN={class:"grid grid-cols-2 gap-2"},mN={class:"grid grid-cols-2 gap-2"},vN=Ns({__name:"DrawingTools",props:{currentTool:{type:String,default:""},selectedShape:{type:Object,default:null},allLayers:{type:Array,default:()=>[]}},emits:["tool-change","style-update","properties-update","delete-shape"],setup(e,{emit:t}){const n=e,r=[{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"ElevationLine",label:"Profil altimtrique"},{type:"Note",label:"Note golocalise"}],i=D=>{switch(D){case"Polygon":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5l16 0l0 14l-16 0l0 -14z"/></svg>';case"Line":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 20l16 -16"/></svg>';case"ElevationLine":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 20h18l-3-3l-4 4l-4-7l-4 4l-3-3"/></svg>';case"Note":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/></svg>';default:return""}},s=Gt({style:!0,properties:!0,samplePoints:!0,circleSections:!0}),o=Gt("#3B82F6"),u=Gt(2),h=Gt("solid"),d=Gt("#3B82F6"),v=Gt(.2),y=Gt(!0),x=Gt(""),_=Gt({radius:4,color:"#3B82F6",fillOpacity:.6,weight:2}),P=Gt({radius:6,color:"#EF4444",fillOpacity:.8,weight:2}),T=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],U=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointills"}],N=ir(()=>n.selectedShape&&n.selectedShape.properties||null),j=D=>{s.value[D]=!s.value[D]},Z=D=>{o.value=D,d.value=D,J({strokeColor:D,fillColor:D})},J=D=>{n.selectedShape&&$("style-update",D)},le=()=>{n.selectedShape&&$("properties-update",{name:x.value})},he=()=>{var D;!n.selectedShape||((D=N.value)==null?void 0:D.type)!=="ElevationLine"||$("style-update",{samplePointStyle:_.value})},Le=()=>{var D;!n.selectedShape||((D=N.value)==null?void 0:D.type)!=="ElevationLine"||$("style-update",{minMaxPointStyle:P.value})},V=D=>`${Math.round(D)} m`,F=D=>D>=1e4?`${(D/1e4).toFixed(2)} ha`:`${Math.round(D)} m`,Y=D=>`${D.toFixed(1)}%`,$=t;return vp(()=>{var D,k;if(n.selectedShape){const I=n.selectedShape.options||{};o.value=I.color||"#3B82F6",u.value=I.weight||3,h.value=I.dashArray?"dashed":"solid",d.value=I.fillColor||"#3B82F6",v.value=I.fillOpacity||.2,y.value=((D=n.selectedShape.properties)==null?void 0:D.type)!=="Line",x.value=((k=n.selectedShape.properties)==null?void 0:k.name)||""}}),(D,k)=>(Je(),tt("div",yO,[k[61]||(k[61]=M("div",{class:"p-3 bg-gray-50 border-b border-gray-200 flex justify-between items-center md:flex hidden"},[M("h3",{class:"text-sm font-semibold text-gray-700"},"Outils de dessin")],-1)),M("div",_O,[M("div",bO,[(Je(!0),tt(On,null,Sr(r.filter(I=>I.type!=="delete"),I=>(Je(),tt("button",{key:I.type,class:Yi(["flex items-center justify-center p-2 rounded-md border",{"bg-blue-50 border-blue-300 text-blue-700 shadow-sm":e.currentTool===I.type}]),onClick:W=>D.$emit("tool-change",e.currentTool===I.type?"":I.type),title:I.label},[M("span",{class:"icon",innerHTML:i(I.type)},null,8,xO)],10,wO))),128))]),e.selectedShape?(Je(),tt("button",{key:0,class:Yi(["w-full mt-2 p-2 rounded-md border border-red-200 bg-red-50 text-red-600 hover:bg-red-100 flex items-center justify-center",{"bg-red-100":e.currentTool==="delete"}]),onClick:k[0]||(k[0]=I=>D.$emit("delete-shape")),title:"Supprimer la forme"},k[30]||(k[30]=[M("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),M("span",{class:"text-sm"},"Supprimer",-1)]),2)):xn("",!0)]),e.selectedShape&&N.value?(Je(),tt("div",LO,[M("div",SO,[M("button",{class:"flex items-center justify-between w-full text-sm font-semibold text-gray-700",onClick:k[1]||(k[1]=I=>j("style"))},[k[32]||(k[32]=M("span",null,"Style",-1)),(Je(),tt("svg",{class:Yi(["w-4 h-4",{"rotate-180":!s.value.style}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},k[31]||(k[31]=[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))])]),Zn(M("div",EO,[M("div",CO,[(Je(),tt(On,null,Sr(T,I=>M("button",{key:I,class:"w-8 h-8 rounded-full",style:Ya({backgroundColor:I}),onClick:W=>Z(I),title:I},null,12,PO)),64))]),N.value.type!=="TextRectangle"?(Je(),tt("div",AO,[M("div",MO,[k[33]||(k[33]=M("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),M("div",kO,[Zn(M("input",{type:"color","onUpdate:modelValue":k[2]||(k[2]=I=>o.value=I),class:"w-16 h-8 rounded border",onChange:k[3]||(k[3]=I=>J({strokeColor:o.value})),title:"Couleur du contour"},null,544),[[Kr,o.value]]),Zn(M("input",{type:"range","onUpdate:modelValue":k[4]||(k[4]=I=>u.value=I),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:k[5]||(k[5]=I=>J({strokeWidth:u.value})),title:"paisseur du contour"},null,544),[[Kr,u.value]])])]),M("div",TO,[k[34]||(k[34]=M("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Style",-1)),Zn(M("select",{"onUpdate:modelValue":k[6]||(k[6]=I=>h.value=I),class:"w-full rounded border",onChange:k[7]||(k[7]=I=>J({strokeStyle:h.value}))},[(Je(),tt(On,null,Sr(U,I=>M("option",{key:I.value,value:I.value},Zt(I.label),9,BO)),64))],544),[[Jo,h.value]])]),y.value?(Je(),tt("div",OO,[k[35]||(k[35]=M("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),M("div",NO,[Zn(M("input",{type:"color","onUpdate:modelValue":k[8]||(k[8]=I=>d.value=I),class:"w-16 h-8 rounded border",onChange:k[9]||(k[9]=I=>J({fillColor:d.value})),title:"Couleur de remplissage"},null,544),[[Kr,d.value]]),Zn(M("input",{type:"range","onUpdate:modelValue":k[10]||(k[10]=I=>v.value=I),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:k[11]||(k[11]=I=>J({fillOpacity:v.value})),title:"Opacit du remplissage"},null,544),[[Kr,v.value]])])])):xn("",!0)])):xn("",!0),N.value.type==="TextRectangle"?(Je(),tt("div",DO,[M("div",IO,[k[36]||(k[36]=M("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),M("div",RO,[Zn(M("input",{type:"color","onUpdate:modelValue":k[12]||(k[12]=I=>o.value=I),class:"w-16 h-8 rounded border",onChange:k[13]||(k[13]=I=>J({strokeColor:o.value})),title:"Couleur du contour"},null,544),[[Kr,o.value]]),Zn(M("input",{type:"range","onUpdate:modelValue":k[14]||(k[14]=I=>u.value=I),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:k[15]||(k[15]=I=>J({strokeWidth:u.value})),title:"paisseur du contour"},null,544),[[Kr,u.value]])])]),M("div",FO,[k[37]||(k[37]=M("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),M("div",jO,[Zn(M("input",{type:"color","onUpdate:modelValue":k[16]||(k[16]=I=>d.value=I),class:"w-16 h-8 rounded border",onChange:k[17]||(k[17]=I=>J({fillColor:d.value})),title:"Couleur de remplissage"},null,544),[[Kr,d.value]]),Zn(M("input",{type:"range","onUpdate:modelValue":k[18]||(k[18]=I=>v.value=I),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:k[19]||(k[19]=I=>J({fillOpacity:v.value})),title:"Opacit du remplissage"},null,544),[[Kr,v.value]])])])])):xn("",!0)],512),[[Zf,!s.value.style]]),M("div",zO,[M("button",{class:"flex items-center justify-between w-full text-sm font-semibold text-gray-700",onClick:k[20]||(k[20]=I=>j("properties"))},[k[39]||(k[39]=M("span",null,"Proprits",-1)),(Je(),tt("svg",{class:Yi(["w-4 h-4",{"rotate-180":!s.value.properties}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},k[38]||(k[38]=[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),Zn(M("div",UO,[N.value?(Je(),tt("div",$O,[M("div",VO,[k[40]||(k[40]=M("label",{for:"shapeName",class:"block text-sm font-medium text-gray-700 mb-1"},"Nom de la forme",-1)),Zn(M("input",{type:"text",id:"shapeName","onUpdate:modelValue":k[21]||(k[21]=I=>x.value=I),onChange:le,placeholder:"Donnez un nom  cette forme",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},null,544),[[Kr,x.value]])]),M("div",HO,[N.value.type==="Polygon"?(Je(),tt("div",GO,[M("div",qO,[k[41]||(k[41]=M("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),M("span",WO,Zt(F(N.value.surface||0)),1)]),M("div",ZO,[k[42]||(k[42]=M("span",{class:"text-sm font-semibold text-gray-700"},"Primtre :",-1)),M("span",KO,Zt(V(N.value.perimeter||0)),1)])])):N.value.type==="Line"?(Je(),tt(On,{key:1},[k[43]||(k[43]=M("span",{class:"text-sm font-semibold text-gray-700"},"Longueur :",-1)),M("span",YO,Zt(V(N.value.length||0)),1)],64)):N.value.type==="ElevationLine"?(Je(),tt(On,{key:2},[M("div",XO,[M("div",JO,[k[44]||(k[44]=M("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Distance totale :",-1)),M("span",QO,Zt(V(N.value.length||0)),1)]),M("div",eN,[k[45]||(k[45]=M("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Dnivel + :",-1)),M("span",tN,Zt(V(N.value.elevationGain||0)),1)]),M("div",nN,[k[46]||(k[46]=M("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Dnivel - :",-1)),M("span",rN,Zt(V(N.value.elevationLoss||0)),1)]),M("div",iN,[k[47]||(k[47]=M("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Pente moy. :",-1)),M("span",oN,Zt(Y(N.value.averageSlope||0)),1)]),M("div",sN,[k[48]||(k[48]=M("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Pente max :",-1)),M("span",aN,Zt(Y(N.value.maxSlope||0)),1)])]),M("div",lN,[M("canvas",uN,null,512)],512)],64)):N.value.type==="Note"?(Je(),tt("div",cN,k[49]||(k[49]=[M("div",{class:"flex justify-between items-center"},[M("span",{class:"text-sm font-semibold text-gray-700"},"Type :"),M("span",{class:"text-sm font-medium text-gray-500"},"Note golocalise")],-1)]))):xn("",!0)])])):(Je(),tt("div",hN," Aucune proprit disponible "))],512),[[Zf,!s.value.properties]])]),e.selectedShape&&N.value&&N.value.type==="ElevationLine"?(Je(),tt("div",fN,[M("button",{class:"flex items-center justify-between w-full text-sm font-semibold text-gray-700",onClick:k[22]||(k[22]=I=>j("samplePoints"))},[k[51]||(k[51]=M("span",null,"Points d'chantillonnage",-1)),(Je(),tt("svg",{class:Yi(["w-4 h-4",{"rotate-180":!s.value.samplePoints}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},k[50]||(k[50]=[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),Zn(M("div",dN,[M("div",pN,[k[56]||(k[56]=M("h4",{class:"text-sm font-semibold mb-2"},"Points normaux",-1)),M("div",gN,[M("div",null,[k[52]||(k[52]=M("label",{class:"text-xs text-gray-600"},"Taille",-1)),Zn(M("input",{type:"number","onUpdate:modelValue":k[23]||(k[23]=I=>_.value.radius=I),min:"2",max:"10",step:"1",class:"w-full px-2 py-1 border rounded",onChange:he},null,544),[[Kr,_.value.radius]])]),M("div",null,[k[53]||(k[53]=M("label",{class:"text-xs text-gray-600"},"Couleur",-1)),Zn(M("input",{type:"color","onUpdate:modelValue":k[24]||(k[24]=I=>_.value.color=I),class:"w-full h-8 px-1 border rounded",onChange:he},null,544),[[Kr,_.value.color]])]),M("div",null,[k[54]||(k[54]=M("label",{class:"text-xs text-gray-600"},"Opacit",-1)),Zn(M("input",{type:"range","onUpdate:modelValue":k[25]||(k[25]=I=>_.value.fillOpacity=I),min:"0",max:"1",step:"0.1",class:"w-full",onChange:he},null,544),[[Kr,_.value.fillOpacity]])]),M("div",null,[k[55]||(k[55]=M("label",{class:"text-xs text-gray-600"},"Bordure",-1)),Zn(M("input",{type:"number","onUpdate:modelValue":k[26]||(k[26]=I=>_.value.weight=I),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:he},null,544),[[Kr,_.value.weight]])])])]),M("div",null,[k[60]||(k[60]=M("h4",{class:"text-sm font-semibold mb-2"},"Points min/max",-1)),M("div",mN,[M("div",null,[k[57]||(k[57]=M("label",{class:"text-xs text-gray-600"},"Taille",-1)),Zn(M("input",{type:"number","onUpdate:modelValue":k[27]||(k[27]=I=>P.value.radius=I),min:"4",max:"12",step:"1",class:"w-full px-2 py-1 border rounded",onChange:Le},null,544),[[Kr,P.value.radius]])]),M("div",null,[k[58]||(k[58]=M("label",{class:"text-xs text-gray-600"},"Bordure",-1)),Zn(M("input",{type:"number","onUpdate:modelValue":k[28]||(k[28]=I=>P.value.weight=I),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:Le},null,544),[[Kr,P.value.weight]])]),M("div",null,[k[59]||(k[59]=M("label",{class:"text-xs text-gray-600"},"Opacit",-1)),Zn(M("input",{type:"range","onUpdate:modelValue":k[29]||(k[29]=I=>P.value.fillOpacity=I),min:"0",max:"1",step:"0.1",class:"w-full",onChange:Le},null,544),[[Kr,P.value.fillOpacity]])])])])],512),[[Zf,!s.value.samplePoints]])])):xn("",!0)])):xn("",!0)]))}}),yN=tm(vN,[["__scopeId","data-v-94a2d196"]]),_N={class:"map-toolbar w-full"},bN={class:"hidden md:flex items-center space-x-2"},wN={class:"dropdown"},xN={class:"dropdown-menu"},LN=["onClick"],SN={key:0,class:"border-l pl-2 flex-1"},EN={class:"flex items-center"},CN={class:"plan-info"},PN={class:"plan-name"},AN={key:0,class:"plan-description"},MN={class:"border-l pl-2 ml-auto"},kN={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},TN={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},BN={key:"saving"},ON={key:"success",class:"save-success-text"},NN={key:"default"},DN={class:"md:hidden"},IN={class:"flex justify-between items-center"},RN={key:0,class:"truncate mx-2 text-sm font-medium"},FN={key:0,class:"mobile-menu mt-0 bg-white shadow-lg p-4 z-[2000] fixed left-0 right-0 w-full"},jN={class:"flex justify-between items-center mb-3 border-b pb-2"},zN={class:"flex flex-col space-y-4"},UN={key:0,class:"flex flex-col pb-3 border-b"},$N={class:"text-sm font-semibold text-gray-800"},VN={key:0,class:"text-xs text-gray-600 mt-1"},HN={class:"flex flex-col"},GN={class:"grid grid-cols-3 gap-2"},qN=["onClick"],WN={key:0,class:"animate-spin h-4 w-4 mr-2 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ZN={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},KN={key:"saving"},YN={key:"success",class:"save-success-text"},XN={key:"default"},JN=Ns({__name:"MapToolbar",props:{lastSave:{},planName:{},planDescription:{},saveStatus:{}},emits:["change-map-type","create-new-plan","load-plan","save-plan","adjust-view","generate-summary"],setup(e,{emit:t}){const n=t,r=e,i=Gt("Hybride"),s=Gt(!1),o=U=>{const N=U.currentTarget,j=N.nextElementSibling;if(j&&j.classList.contains("dropdown-menu")){const Z=N.getBoundingClientRect();j.style.top=`${Z.bottom}px`,j.style.left=`${Z.left}px`}},u={Hybride:"Hybride",Cadastre:"Cadastre",IGN:"IGN"},h=ir(()=>r.lastSave?new Date(r.lastSave).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Jamais"),d=U=>{i.value=U,n("change-map-type",U),T()},v=()=>{n("create-new-plan"),T()},y=()=>{n("load-plan"),T()},x=()=>{n("save-plan"),T()},_=()=>{n("adjust-view"),T()},P=()=>{n("generate-summary"),T()},T=()=>{s.value=!1};return(U,N)=>(Je(),tt("div",_N,[M("div",bN,[M("div",wN,[M("button",{class:"btn-toolbar dropdown-toggle",onMouseover:o},[N[2]||(N[2]=M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M12 1.586l-4 4V17h8V5.586l-4-4zM2 17V9.276l4-3.638V17H2zM2 8.162V3h4.5L12 8.5V17H6V5.638L2 8.162z","clip-rule":"evenodd"})],-1)),M("span",null,Zt(u[i.value]),1)],32),M("div",xN,[(Je(),tt(On,null,Sr(u,(j,Z)=>M("button",{key:Z,class:Yi(["dropdown-item",{active:Z===i.value}]),onClick:J=>d(Z)},Zt(j),11,LN)),64))])]),U.planName?(Je(),tt("div",SN,[M("div",EN,[M("div",CN,[M("h2",PN,Zt(U.planName),1),U.planDescription?(Je(),tt("p",AN,Zt(U.planDescription),1)):xn("",!0)])])])):xn("",!0),M("div",{class:"border-l pl-2"},[M("div",{class:"flex items-center space-x-1"},[M("button",{onClick:v,class:"btn-toolbar",title:"Nouveau plan"},N[3]||(N[3]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),M("span",{class:"hidden lg:inline ml-1"},"Nouveau",-1)])),M("button",{onClick:y,class:"btn-toolbar",title:"Charger un plan"},N[4]||(N[4]=[Zh('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" data-v-6319d8e0><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" data-v-6319d8e0></path><path d="M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z" data-v-6319d8e0></path><path fill-rule="evenodd" d="M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z" clip-rule="evenodd" data-v-6319d8e0></path></svg><span class="hidden lg:inline ml-1" data-v-6319d8e0>Charger</span>',2)])),M("button",{onClick:x,class:"btn-toolbar",title:"Enregistrer le plan"},N[5]||(N[5]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1),M("span",{class:"hidden lg:inline ml-1"},"Enregistrer",-1)]))])]),M("div",{class:"border-l pl-2"},[M("div",{class:"flex items-center space-x-1"},[M("button",{onClick:_,class:"btn-toolbar",title:"Ajuster la vue"},N[6]||(N[6]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),M("span",{class:"hidden lg:inline ml-1"},"Ajuster",-1)])),M("button",{onClick:P,class:"btn-toolbar",title:"Gnrer une synthse"},N[7]||(N[7]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),M("span",{class:"hidden lg:inline ml-1"},"Synthse",-1)]))])]),M("div",MN,[M("div",{class:Yi(["text-xs hidden lg:flex items-center",{"text-gray-500":!U.saveStatus,"text-primary-600 font-medium":U.saveStatus==="success","text-blue-600 font-medium":U.saveStatus==="saving"}])},[U.saveStatus==="saving"?(Je(),tt("svg",kN,N[8]||(N[8]=[M("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),M("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):xn("",!0),U.saveStatus==="success"?(Je(),tt("svg",TN,N[9]||(N[9]=[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):xn("",!0),qr($v,{name:"fade-slide",mode:"out-in"},{default:Ul(()=>[U.saveStatus==="saving"?(Je(),tt("span",BN," Sauvegarde en cours... ")):U.saveStatus==="success"?(Je(),tt("span",ON," Sauvegarde russie ! ")):(Je(),tt("span",NN," Dernire modification : "+Zt(h.value),1))]),_:1})],2)])]),M("div",DN,[M("div",IN,[M("button",{onClick:N[0]||(N[0]=j=>s.value=!s.value),class:"p-2 rounded-md border bg-white shadow-sm"},N[10]||(N[10]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1)])),U.planName?(Je(),tt("div",RN,Zt(U.planName),1)):xn("",!0),M("div",{class:"flex space-x-2"},[M("button",{onClick:v,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},N[11]||(N[11]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1)])),M("button",{onClick:x,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},N[12]||(N[12]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1)])),M("button",{onClick:_,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},N[13]||(N[13]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)]))])]),s.value?(Je(),tt("div",FN,[M("div",jN,[N[15]||(N[15]=M("h3",{class:"text-base font-semibold text-gray-800"},"Menu",-1)),M("button",{onClick:N[1]||(N[1]=j=>s.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},N[14]||(N[14]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),M("div",zN,[U.planName?(Je(),tt("div",UN,[M("h3",$N,Zt(U.planName),1),U.planDescription?(Je(),tt("p",VN,Zt(U.planDescription),1)):xn("",!0)])):xn("",!0),M("div",HN,[N[16]||(N[16]=M("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Type de carte",-1)),M("div",GN,[(Je(),tt(On,null,Sr(u,(j,Z)=>M("button",{key:Z,class:Yi(["px-3 py-2 text-sm rounded-md border shadow-sm",{"bg-blue-50 border-blue-300 text-blue-700 font-medium":Z===i.value}]),onClick:J=>d(Z)},Zt(j),11,qN)),64))])]),M("div",{class:"flex flex-col"},[N[20]||(N[20]=M("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Outils de plan",-1)),M("div",{class:"grid grid-cols-3 gap-2"},[M("button",{onClick:v,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},N[17]||(N[17]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),Mi(" Nouveau ")])),M("button",{onClick:y,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},N[18]||(N[18]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"}),M("path",{d:"M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z"}),M("path",{"fill-rule":"evenodd",d:"M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),Mi(" Charger ")])),M("button",{onClick:P,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},N[19]||(N[19]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),Mi(" Synthse ")]))])]),M("div",{class:Yi(["text-sm text-center pt-3 border-t flex items-center justify-center space-x-1 mt-2",{"text-gray-500":!U.saveStatus,"text-primary-600 font-medium":U.saveStatus==="success","text-blue-600 font-medium":U.saveStatus==="saving"}])},[U.saveStatus==="saving"?(Je(),tt("svg",WN,N[21]||(N[21]=[M("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),M("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):xn("",!0),U.saveStatus==="success"?(Je(),tt("svg",ZN,N[22]||(N[22]=[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):xn("",!0),qr($v,{name:"fade-slide",mode:"out-in"},{default:Ul(()=>[U.saveStatus==="saving"?(Je(),tt("span",KN," Sauvegarde en cours... ")):U.saveStatus==="success"?(Je(),tt("span",YN," Sauvegarde russie ! ")):(Je(),tt("span",XN," Dernire modification : "+Zt(h.value),1))]),_:1})],2)])])):xn("",!0)])]))}}),QN=tm(JN,[["__scopeId","data-v-6319d8e0"]]);(()=>{var Cn,Hn;var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,o=(l,f)=>()=>(f||l((f={exports:{}}).exports,f),f.exports),u=(l,f,m,w)=>{if(f&&typeof f=="object"||typeof f=="function")for(let E of r(f))!s.call(l,E)&&E!==m&&t(l,E,{get:()=>f[E],enumerable:!(w=n(f,E))||w.enumerable});return l},h=(l,f,m)=>(m=l!=null?e(i(l)):{},u(f||!l||!l.__esModule?t(m,"default",{value:l,enumerable:!0}):m,l)),d=o((l,f)=>{function m(){this.__data__=[],this.size=0}f.exports=m}),v=o((l,f)=>{function m(w,E){return w===E||w!==w&&E!==E}f.exports=m}),y=o((l,f)=>{var m=v();function w(E,R){for(var X=E.length;X--;)if(m(E[X][0],R))return X;return-1}f.exports=w}),x=o((l,f)=>{var m=y(),w=Array.prototype,E=w.splice;function R(X){var ne=this.__data__,ce=m(ne,X);if(ce<0)return!1;var xe=ne.length-1;return ce==xe?ne.pop():E.call(ne,ce,1),--this.size,!0}f.exports=R}),_=o((l,f)=>{var m=y();function w(E){var R=this.__data__,X=m(R,E);return X<0?void 0:R[X][1]}f.exports=w}),P=o((l,f)=>{var m=y();function w(E){return m(this.__data__,E)>-1}f.exports=w}),T=o((l,f)=>{var m=y();function w(E,R){var X=this.__data__,ne=m(X,E);return ne<0?(++this.size,X.push([E,R])):X[ne][1]=R,this}f.exports=w}),U=o((l,f)=>{var m=d(),w=x(),E=_(),R=P(),X=T();function ne(ce){var xe=-1,We=ce==null?0:ce.length;for(this.clear();++xe<We;){var je=ce[xe];this.set(je[0],je[1])}}ne.prototype.clear=m,ne.prototype.delete=w,ne.prototype.get=E,ne.prototype.has=R,ne.prototype.set=X,f.exports=ne}),N=o((l,f)=>{var m=U();function w(){this.__data__=new m,this.size=0}f.exports=w}),j=o((l,f)=>{function m(w){var E=this.__data__,R=E.delete(w);return this.size=E.size,R}f.exports=m}),Z=o((l,f)=>{function m(w){return this.__data__.get(w)}f.exports=m}),J=o((l,f)=>{function m(w){return this.__data__.has(w)}f.exports=m}),le=o((l,f)=>{var m=typeof Zs=="object"&&Zs&&Zs.Object===Object&&Zs;f.exports=m}),he=o((l,f)=>{var m=le(),w=typeof self=="object"&&self&&self.Object===Object&&self,E=m||w||Function("return this")();f.exports=E}),Le=o((l,f)=>{var m=he(),w=m.Symbol;f.exports=w}),V=o((l,f)=>{var m=Le(),w=Object.prototype,E=w.hasOwnProperty,R=w.toString,X=m?m.toStringTag:void 0;function ne(ce){var xe=E.call(ce,X),We=ce[X];try{ce[X]=void 0;var je=!0}catch{}var vt=R.call(ce);return je&&(xe?ce[X]=We:delete ce[X]),vt}f.exports=ne}),F=o((l,f)=>{var m=Object.prototype,w=m.toString;function E(R){return w.call(R)}f.exports=E}),Y=o((l,f)=>{var m=Le(),w=V(),E=F(),R="[object Null]",X="[object Undefined]",ne=m?m.toStringTag:void 0;function ce(xe){return xe==null?xe===void 0?X:R:ne&&ne in Object(xe)?w(xe):E(xe)}f.exports=ce}),$=o((l,f)=>{function m(w){var E=typeof w;return w!=null&&(E=="object"||E=="function")}f.exports=m}),D=o((l,f)=>{var m=Y(),w=$(),E="[object AsyncFunction]",R="[object Function]",X="[object GeneratorFunction]",ne="[object Proxy]";function ce(xe){if(!w(xe))return!1;var We=m(xe);return We==R||We==X||We==E||We==ne}f.exports=ce}),k=o((l,f)=>{var m=he(),w=m["__core-js_shared__"];f.exports=w}),I=o((l,f)=>{var m=k(),w=function(){var R=/[^.]+$/.exec(m&&m.keys&&m.keys.IE_PROTO||"");return R?"Symbol(src)_1."+R:""}();function E(R){return!!w&&w in R}f.exports=E}),W=o((l,f)=>{var m=Function.prototype,w=m.toString;function E(R){if(R!=null){try{return w.call(R)}catch{}try{return R+""}catch{}}return""}f.exports=E}),G=o((l,f)=>{var m=D(),w=I(),E=$(),R=W(),X=/[\\^$.*+?()[\]{}|]/g,ne=/^\[object .+?Constructor\]$/,ce=Function.prototype,xe=Object.prototype,We=ce.toString,je=xe.hasOwnProperty,vt=RegExp("^"+We.call(je).replace(X,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function kt(Yt){if(!E(Yt)||w(Yt))return!1;var _n=m(Yt)?vt:ne;return _n.test(R(Yt))}f.exports=kt}),K=o((l,f)=>{function m(w,E){return w==null?void 0:w[E]}f.exports=m}),q=o((l,f)=>{var m=G(),w=K();function E(R,X){var ne=w(R,X);return m(ne)?ne:void 0}f.exports=E}),ve=o((l,f)=>{var m=q(),w=he(),E=m(w,"Map");f.exports=E}),Ce=o((l,f)=>{var m=q(),w=m(Object,"create");f.exports=w}),Xe=o((l,f)=>{var m=Ce();function w(){this.__data__=m?m(null):{},this.size=0}f.exports=w}),B=o((l,f)=>{function m(w){var E=this.has(w)&&delete this.__data__[w];return this.size-=E?1:0,E}f.exports=m}),te=o((l,f)=>{var m=Ce(),w="__lodash_hash_undefined__",E=Object.prototype,R=E.hasOwnProperty;function X(ne){var ce=this.__data__;if(m){var xe=ce[ne];return xe===w?void 0:xe}return R.call(ce,ne)?ce[ne]:void 0}f.exports=X}),se=o((l,f)=>{var m=Ce(),w=Object.prototype,E=w.hasOwnProperty;function R(X){var ne=this.__data__;return m?ne[X]!==void 0:E.call(ne,X)}f.exports=R}),ae=o((l,f)=>{var m=Ce(),w="__lodash_hash_undefined__";function E(R,X){var ne=this.__data__;return this.size+=this.has(R)?0:1,ne[R]=m&&X===void 0?w:X,this}f.exports=E}),we=o((l,f)=>{var m=Xe(),w=B(),E=te(),R=se(),X=ae();function ne(ce){var xe=-1,We=ce==null?0:ce.length;for(this.clear();++xe<We;){var je=ce[xe];this.set(je[0],je[1])}}ne.prototype.clear=m,ne.prototype.delete=w,ne.prototype.get=E,ne.prototype.has=R,ne.prototype.set=X,f.exports=ne}),fe=o((l,f)=>{var m=we(),w=U(),E=ve();function R(){this.size=0,this.__data__={hash:new m,map:new(E||w),string:new m}}f.exports=R}),Q=o((l,f)=>{function m(w){var E=typeof w;return E=="string"||E=="number"||E=="symbol"||E=="boolean"?w!=="__proto__":w===null}f.exports=m}),ue=o((l,f)=>{var m=Q();function w(E,R){var X=E.__data__;return m(R)?X[typeof R=="string"?"string":"hash"]:X.map}f.exports=w}),Re=o((l,f)=>{var m=ue();function w(E){var R=m(this,E).delete(E);return this.size-=R?1:0,R}f.exports=w}),Me=o((l,f)=>{var m=ue();function w(E){return m(this,E).get(E)}f.exports=w}),Ze=o((l,f)=>{var m=ue();function w(E){return m(this,E).has(E)}f.exports=w}),oe=o((l,f)=>{var m=ue();function w(E,R){var X=m(this,E),ne=X.size;return X.set(E,R),this.size+=X.size==ne?0:1,this}f.exports=w}),me=o((l,f)=>{var m=fe(),w=Re(),E=Me(),R=Ze(),X=oe();function ne(ce){var xe=-1,We=ce==null?0:ce.length;for(this.clear();++xe<We;){var je=ce[xe];this.set(je[0],je[1])}}ne.prototype.clear=m,ne.prototype.delete=w,ne.prototype.get=E,ne.prototype.has=R,ne.prototype.set=X,f.exports=ne}),pe=o((l,f)=>{var m=U(),w=ve(),E=me(),R=200;function X(ne,ce){var xe=this.__data__;if(xe instanceof m){var We=xe.__data__;if(!w||We.length<R-1)return We.push([ne,ce]),this.size=++xe.size,this;xe=this.__data__=new E(We)}return xe.set(ne,ce),this.size=xe.size,this}f.exports=X}),de=o((l,f)=>{var m=U(),w=N(),E=j(),R=Z(),X=J(),ne=pe();function ce(xe){var We=this.__data__=new m(xe);this.size=We.size}ce.prototype.clear=w,ce.prototype.delete=E,ce.prototype.get=R,ce.prototype.has=X,ce.prototype.set=ne,f.exports=ce}),ze=o((l,f)=>{var m=q(),w=function(){try{var E=m(Object,"defineProperty");return E({},"",{}),E}catch{}}();f.exports=w}),Ke=o((l,f)=>{var m=ze();function w(E,R,X){R=="__proto__"&&m?m(E,R,{configurable:!0,enumerable:!0,value:X,writable:!0}):E[R]=X}f.exports=w}),Ge=o((l,f)=>{var m=Ke(),w=v();function E(R,X,ne){(ne!==void 0&&!w(R[X],ne)||ne===void 0&&!(X in R))&&m(R,X,ne)}f.exports=E}),Qe=o((l,f)=>{function m(w){return function(E,R,X){for(var ne=-1,ce=Object(E),xe=X(E),We=xe.length;We--;){var je=xe[w?We:++ne];if(R(ce[je],je,ce)===!1)break}return E}}f.exports=m}),Ve=o((l,f)=>{var m=Qe(),w=m();f.exports=w}),ot=o((l,f)=>{var m=he(),w=typeof l=="object"&&l&&!l.nodeType&&l,E=w&&typeof f=="object"&&f&&!f.nodeType&&f,R=E&&E.exports===w,X=R?m.Buffer:void 0,ne=X?X.allocUnsafe:void 0;function ce(xe,We){if(We)return xe.slice();var je=xe.length,vt=ne?ne(je):new xe.constructor(je);return xe.copy(vt),vt}f.exports=ce}),At=o((l,f)=>{var m=he(),w=m.Uint8Array;f.exports=w}),Et=o((l,f)=>{var m=At();function w(E){var R=new E.constructor(E.byteLength);return new m(R).set(new m(E)),R}f.exports=w}),zt=o((l,f)=>{var m=Et();function w(E,R){var X=R?m(E.buffer):E.buffer;return new E.constructor(X,E.byteOffset,E.length)}f.exports=w}),Kt=o((l,f)=>{function m(w,E){var R=-1,X=w.length;for(E||(E=Array(X));++R<X;)E[R]=w[R];return E}f.exports=m}),dn=o((l,f)=>{var m=$(),w=Object.create,E=function(){function R(){}return function(X){if(!m(X))return{};if(w)return w(X);R.prototype=X;var ne=new R;return R.prototype=void 0,ne}}();f.exports=E}),mn=o((l,f)=>{function m(w,E){return function(R){return w(E(R))}}f.exports=m}),et=o((l,f)=>{var m=mn(),w=m(Object.getPrototypeOf,Object);f.exports=w}),st=o((l,f)=>{var m=Object.prototype;function w(E){var R=E&&E.constructor,X=typeof R=="function"&&R.prototype||m;return E===X}f.exports=w}),rt=o((l,f)=>{var m=dn(),w=et(),E=st();function R(X){return typeof X.constructor=="function"&&!E(X)?m(w(X)):{}}f.exports=R}),Vt=o((l,f)=>{function m(w){return w!=null&&typeof w=="object"}f.exports=m}),Xt=o((l,f)=>{var m=Y(),w=Vt(),E="[object Arguments]";function R(X){return w(X)&&m(X)==E}f.exports=R}),ft=o((l,f)=>{var m=Xt(),w=Vt(),E=Object.prototype,R=E.hasOwnProperty,X=E.propertyIsEnumerable,ne=m(function(){return arguments}())?m:function(ce){return w(ce)&&R.call(ce,"callee")&&!X.call(ce,"callee")};f.exports=ne}),Ue=o((l,f)=>{var m=Array.isArray;f.exports=m}),Dt=o((l,f)=>{var m=9007199254740991;function w(E){return typeof E=="number"&&E>-1&&E%1==0&&E<=m}f.exports=w}),gn=o((l,f)=>{var m=D(),w=Dt();function E(R){return R!=null&&w(R.length)&&!m(R)}f.exports=E}),un=o((l,f)=>{var m=gn(),w=Vt();function E(R){return w(R)&&m(R)}f.exports=E}),Qt=o((l,f)=>{function m(){return!1}f.exports=m}),Ye=o((l,f)=>{var m=he(),w=Qt(),E=typeof l=="object"&&l&&!l.nodeType&&l,R=E&&typeof f=="object"&&f&&!f.nodeType&&f,X=R&&R.exports===E,ne=X?m.Buffer:void 0,ce=ne?ne.isBuffer:void 0,xe=ce||w;f.exports=xe}),vn=o((l,f)=>{var m=Y(),w=et(),E=Vt(),R="[object Object]",X=Function.prototype,ne=Object.prototype,ce=X.toString,xe=ne.hasOwnProperty,We=ce.call(Object);function je(vt){if(!E(vt)||m(vt)!=R)return!1;var kt=w(vt);if(kt===null)return!0;var Yt=xe.call(kt,"constructor")&&kt.constructor;return typeof Yt=="function"&&Yt instanceof Yt&&ce.call(Yt)==We}f.exports=je}),Sn=o((l,f)=>{var m=Y(),w=Dt(),E=Vt(),R="[object Arguments]",X="[object Array]",ne="[object Boolean]",ce="[object Date]",xe="[object Error]",We="[object Function]",je="[object Map]",vt="[object Number]",kt="[object Object]",Yt="[object RegExp]",_n="[object Set]",Ln="[object String]",Qn="[object WeakMap]",qe="[object ArrayBuffer]",nt="[object DataView]",ht="[object Float32Array]",Nt="[object Float64Array]",bt="[object Int8Array]",Tt="[object Int16Array]",ge="[object Int32Array]",Pe="[object Uint8Array]",Ne="[object Uint8ClampedArray]",Oe="[object Uint16Array]",Ie="[object Uint32Array]",Fe={};Fe[ht]=Fe[Nt]=Fe[bt]=Fe[Tt]=Fe[ge]=Fe[Pe]=Fe[Ne]=Fe[Oe]=Fe[Ie]=!0,Fe[R]=Fe[X]=Fe[qe]=Fe[ne]=Fe[nt]=Fe[ce]=Fe[xe]=Fe[We]=Fe[je]=Fe[vt]=Fe[kt]=Fe[Yt]=Fe[_n]=Fe[Ln]=Fe[Qn]=!1;function lt(ut){return E(ut)&&w(ut.length)&&!!Fe[m(ut)]}f.exports=lt}),ln=o((l,f)=>{function m(w){return function(E){return w(E)}}f.exports=m}),wn=o((l,f)=>{var m=le(),w=typeof l=="object"&&l&&!l.nodeType&&l,E=w&&typeof f=="object"&&f&&!f.nodeType&&f,R=E&&E.exports===w,X=R&&m.process,ne=function(){try{var ce=E&&E.require&&E.require("util").types;return ce||X&&X.binding&&X.binding("util")}catch{}}();f.exports=ne}),ur=o((l,f)=>{var m=Sn(),w=ln(),E=wn(),R=E&&E.isTypedArray,X=R?w(R):m;f.exports=X}),En=o((l,f)=>{function m(w,E){if(!(E==="constructor"&&typeof w[E]=="function")&&E!="__proto__")return w[E]}f.exports=m}),rr=o((l,f)=>{var m=Ke(),w=v(),E=Object.prototype,R=E.hasOwnProperty;function X(ne,ce,xe){var We=ne[ce];(!(R.call(ne,ce)&&w(We,xe))||xe===void 0&&!(ce in ne))&&m(ne,ce,xe)}f.exports=X}),Wr=o((l,f)=>{var m=rr(),w=Ke();function E(R,X,ne,ce){var xe=!ne;ne||(ne={});for(var We=-1,je=X.length;++We<je;){var vt=X[We],kt=ce?ce(ne[vt],R[vt],vt,ne,R):void 0;kt===void 0&&(kt=R[vt]),xe?w(ne,vt,kt):m(ne,vt,kt)}return ne}f.exports=E}),ki=o((l,f)=>{function m(w,E){for(var R=-1,X=Array(w);++R<w;)X[R]=E(R);return X}f.exports=m}),Fn=o((l,f)=>{var m=9007199254740991,w=/^(?:0|[1-9]\d*)$/;function E(R,X){var ne=typeof R;return X=X??m,!!X&&(ne=="number"||ne!="symbol"&&w.test(R))&&R>-1&&R%1==0&&R<X}f.exports=E}),oo=o((l,f)=>{var m=ki(),w=ft(),E=Ue(),R=Ye(),X=Fn(),ne=ur(),ce=Object.prototype,xe=ce.hasOwnProperty;function We(je,vt){var kt=E(je),Yt=!kt&&w(je),_n=!kt&&!Yt&&R(je),Ln=!kt&&!Yt&&!_n&&ne(je),Qn=kt||Yt||_n||Ln,qe=Qn?m(je.length,String):[],nt=qe.length;for(var ht in je)(vt||xe.call(je,ht))&&!(Qn&&(ht=="length"||_n&&(ht=="offset"||ht=="parent")||Ln&&(ht=="buffer"||ht=="byteLength"||ht=="byteOffset")||X(ht,nt)))&&qe.push(ht);return qe}f.exports=We}),jo=o((l,f)=>{function m(w){var E=[];if(w!=null)for(var R in Object(w))E.push(R);return E}f.exports=m}),fi=o((l,f)=>{var m=$(),w=st(),E=jo(),R=Object.prototype,X=R.hasOwnProperty;function ne(ce){if(!m(ce))return E(ce);var xe=w(ce),We=[];for(var je in ce)je=="constructor"&&(xe||!X.call(ce,je))||We.push(je);return We}f.exports=ne}),Wn=o((l,f)=>{var m=oo(),w=fi(),E=gn();function R(X){return E(X)?m(X,!0):w(X)}f.exports=R}),bn=o((l,f)=>{var m=Wr(),w=Wn();function E(R){return m(R,w(R))}f.exports=E}),tr=o((l,f)=>{var m=Ge(),w=ot(),E=zt(),R=Kt(),X=rt(),ne=ft(),ce=Ue(),xe=un(),We=Ye(),je=D(),vt=$(),kt=vn(),Yt=ur(),_n=En(),Ln=bn();function Qn(qe,nt,ht,Nt,bt,Tt,ge){var Pe=_n(qe,ht),Ne=_n(nt,ht),Oe=ge.get(Ne);if(Oe){m(qe,ht,Oe);return}var Ie=Tt?Tt(Pe,Ne,ht+"",qe,nt,ge):void 0,Fe=Ie===void 0;if(Fe){var lt=ce(Ne),ut=!lt&&We(Ne),gt=!lt&&!ut&&Yt(Ne);Ie=Ne,lt||ut||gt?ce(Pe)?Ie=Pe:xe(Pe)?Ie=R(Pe):ut?(Fe=!1,Ie=w(Ne,!0)):gt?(Fe=!1,Ie=E(Ne,!0)):Ie=[]:kt(Ne)||ne(Ne)?(Ie=Pe,ne(Pe)?Ie=Ln(Pe):(!vt(Pe)||je(Pe))&&(Ie=X(Ne))):Fe=!1}Fe&&(ge.set(Ne,Ie),bt(Ie,Ne,Nt,Tt,ge),ge.delete(Ne)),m(qe,ht,Ie)}f.exports=Qn}),hn=o((l,f)=>{var m=de(),w=Ge(),E=Ve(),R=tr(),X=$(),ne=Wn(),ce=En();function xe(We,je,vt,kt,Yt){We!==je&&E(je,function(_n,Ln){if(Yt||(Yt=new m),X(_n))R(We,je,Ln,vt,xe,kt,Yt);else{var Qn=kt?kt(ce(We,Ln),_n,Ln+"",We,je,Yt):void 0;Qn===void 0&&(Qn=_n),w(We,Ln,Qn)}},ne)}f.exports=xe}),xo=o((l,f)=>{function m(w){return w}f.exports=m}),_i=o((l,f)=>{function m(w,E,R){switch(R.length){case 0:return w.call(E);case 1:return w.call(E,R[0]);case 2:return w.call(E,R[0],R[1]);case 3:return w.call(E,R[0],R[1],R[2])}return w.apply(E,R)}f.exports=m}),bi=o((l,f)=>{var m=_i(),w=Math.max;function E(R,X,ne){return X=w(X===void 0?R.length-1:X,0),function(){for(var ce=arguments,xe=-1,We=w(ce.length-X,0),je=Array(We);++xe<We;)je[xe]=ce[X+xe];xe=-1;for(var vt=Array(X+1);++xe<X;)vt[xe]=ce[xe];return vt[X]=ne(je),m(R,this,vt)}}f.exports=E}),di=o((l,f)=>{function m(w){return function(){return w}}f.exports=m}),Ri=o((l,f)=>{var m=di(),w=ze(),E=xo(),R=w?function(X,ne){return w(X,"toString",{configurable:!0,enumerable:!1,value:m(ne),writable:!0})}:E;f.exports=R}),Lo=o((l,f)=>{var m=800,w=16,E=Date.now;function R(X){var ne=0,ce=0;return function(){var xe=E(),We=w-(xe-ce);if(ce=xe,We>0){if(++ne>=m)return arguments[0]}else ne=0;return X.apply(void 0,arguments)}}f.exports=R}),yr=o((l,f)=>{var m=Ri(),w=Lo(),E=w(m);f.exports=E}),ds=o((l,f)=>{var m=xo(),w=bi(),E=yr();function R(X,ne){return E(w(X,ne,m),X+"")}f.exports=R}),xl=o((l,f)=>{var m=v(),w=gn(),E=Fn(),R=$();function X(ne,ce,xe){if(!R(xe))return!1;var We=typeof ce;return(We=="number"?w(xe)&&E(ce,xe.length):We=="string"&&ce in xe)?m(xe[ce],ne):!1}f.exports=X}),Ds=o((l,f)=>{var m=ds(),w=xl();function E(R){return m(function(X,ne){var ce=-1,xe=ne.length,We=xe>1?ne[xe-1]:void 0,je=xe>2?ne[2]:void 0;for(We=R.length>3&&typeof We=="function"?(xe--,We):void 0,je&&w(ne[0],ne[1],je)&&(We=xe<3?void 0:We,xe=1),X=Object(X);++ce<xe;){var vt=ne[ce];vt&&R(X,vt,ce,We)}return X})}f.exports=E}),jr=o((l,f)=>{var m=hn(),w=Ds(),E=w(function(R,X,ne){m(R,X,ne)});f.exports=E}),Mn=o((l,f)=>{var m=Y(),w=Vt(),E="[object Symbol]";function R(X){return typeof X=="symbol"||w(X)&&m(X)==E}f.exports=R}),Fi=o((l,f)=>{var m=Ue(),w=Mn(),E=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,R=/^\w*$/;function X(ne,ce){if(m(ne))return!1;var xe=typeof ne;return xe=="number"||xe=="symbol"||xe=="boolean"||ne==null||w(ne)?!0:R.test(ne)||!E.test(ne)||ce!=null&&ne in Object(ce)}f.exports=X}),pi=o((l,f)=>{var m=me(),w="Expected a function";function E(R,X){if(typeof R!="function"||X!=null&&typeof X!="function")throw new TypeError(w);var ne=function(){var ce=arguments,xe=X?X.apply(this,ce):ce[0],We=ne.cache;if(We.has(xe))return We.get(xe);var je=R.apply(this,ce);return ne.cache=We.set(xe,je)||We,je};return ne.cache=new(E.Cache||m),ne}E.Cache=m,f.exports=E}),ji=o((l,f)=>{var m=pi(),w=500;function E(R){var X=m(R,function(ce){return ne.size===w&&ne.clear(),ce}),ne=X.cache;return X}f.exports=E}),Ni=o((l,f)=>{var m=ji(),w=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,E=/\\(\\)?/g,R=m(function(X){var ne=[];return X.charCodeAt(0)===46&&ne.push(""),X.replace(w,function(ce,xe,We,je){ne.push(We?je.replace(E,"$1"):xe||ce)}),ne});f.exports=R}),ps=o((l,f)=>{function m(w,E){for(var R=-1,X=w==null?0:w.length,ne=Array(X);++R<X;)ne[R]=E(w[R],R,w);return ne}f.exports=m}),Ls=o((l,f)=>{var m=Le(),w=ps(),E=Ue(),R=Mn(),X=m?m.prototype:void 0,ne=X?X.toString:void 0;function ce(xe){if(typeof xe=="string")return xe;if(E(xe))return w(xe,ce)+"";if(R(xe))return ne?ne.call(xe):"";var We=xe+"";return We=="0"&&1/xe==-1/0?"-0":We}f.exports=ce}),wr=o((l,f)=>{var m=Ls();function w(E){return E==null?"":m(E)}f.exports=w}),Ss=o((l,f)=>{var m=Ue(),w=Fi(),E=Ni(),R=wr();function X(ne,ce){return m(ne)?ne:w(ne,ce)?[ne]:E(R(ne))}f.exports=X}),Ti=o((l,f)=>{var m=Mn();function w(E){if(typeof E=="string"||m(E))return E;var R=E+"";return R=="0"&&1/E==-1/0?"-0":R}f.exports=w}),zo=o((l,f)=>{var m=Ss(),w=Ti();function E(R,X){X=m(X,R);for(var ne=0,ce=X.length;R!=null&&ne<ce;)R=R[w(X[ne++])];return ne&&ne==ce?R:void 0}f.exports=E}),xr=o((l,f)=>{var m=zo();function w(E,R,X){var ne=E==null?void 0:m(E,R);return ne===void 0?X:ne}f.exports=w}),sn=o((l,f)=>{(function(m,w){typeof l=="object"&&typeof f<"u"?f.exports=w():(m=m||self).RBush=w()})(l,function(){function m(qe,nt,ht,Nt,bt){(function Tt(ge,Pe,Ne,Oe,Ie){for(;Oe>Ne;){if(Oe-Ne>600){var Fe=Oe-Ne+1,lt=Pe-Ne+1,ut=Math.log(Fe),gt=.5*Math.exp(2*ut/3),Lt=.5*Math.sqrt(ut*gt*(Fe-gt)/Fe)*(lt-Fe/2<0?-1:1),St=Math.max(Ne,Math.floor(Pe-lt*gt/Fe+Lt)),tn=Math.min(Oe,Math.floor(Pe+(Fe-lt)*gt/Fe+Lt));Tt(ge,Pe,St,tn,Ie)}var Dn=ge[Pe],jn=Ne,Gn=Oe;for(w(ge,Ne,Pe),Ie(ge[Oe],Dn)>0&&w(ge,Ne,Oe);jn<Gn;){for(w(ge,jn,Gn),jn++,Gn--;Ie(ge[jn],Dn)<0;)jn++;for(;Ie(ge[Gn],Dn)>0;)Gn--}Ie(ge[Ne],Dn)===0?w(ge,Ne,Gn):w(ge,++Gn,Oe),Gn<=Pe&&(Ne=Gn+1),Pe<=Gn&&(Oe=Gn-1)}})(qe,nt,ht||0,Nt||qe.length-1,bt||E)}function w(qe,nt,ht){var Nt=qe[nt];qe[nt]=qe[ht],qe[ht]=Nt}function E(qe,nt){return qe<nt?-1:qe>nt?1:0}var R=function(qe){qe===void 0&&(qe=9),this._maxEntries=Math.max(4,qe),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function X(qe,nt,ht){if(!ht)return nt.indexOf(qe);for(var Nt=0;Nt<nt.length;Nt++)if(ht(qe,nt[Nt]))return Nt;return-1}function ne(qe,nt){ce(qe,0,qe.children.length,nt,qe)}function ce(qe,nt,ht,Nt,bt){bt||(bt=Ln(null)),bt.minX=1/0,bt.minY=1/0,bt.maxX=-1/0,bt.maxY=-1/0;for(var Tt=nt;Tt<ht;Tt++){var ge=qe.children[Tt];xe(bt,qe.leaf?Nt(ge):ge)}return bt}function xe(qe,nt){return qe.minX=Math.min(qe.minX,nt.minX),qe.minY=Math.min(qe.minY,nt.minY),qe.maxX=Math.max(qe.maxX,nt.maxX),qe.maxY=Math.max(qe.maxY,nt.maxY),qe}function We(qe,nt){return qe.minX-nt.minX}function je(qe,nt){return qe.minY-nt.minY}function vt(qe){return(qe.maxX-qe.minX)*(qe.maxY-qe.minY)}function kt(qe){return qe.maxX-qe.minX+(qe.maxY-qe.minY)}function Yt(qe,nt){return qe.minX<=nt.minX&&qe.minY<=nt.minY&&nt.maxX<=qe.maxX&&nt.maxY<=qe.maxY}function _n(qe,nt){return nt.minX<=qe.maxX&&nt.minY<=qe.maxY&&nt.maxX>=qe.minX&&nt.maxY>=qe.minY}function Ln(qe){return{children:qe,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Qn(qe,nt,ht,Nt,bt){for(var Tt=[nt,ht];Tt.length;)if(!((ht=Tt.pop())-(nt=Tt.pop())<=Nt)){var ge=nt+Math.ceil((ht-nt)/Nt/2)*Nt;m(qe,ge,nt,ht,bt),Tt.push(nt,ge,ge,ht)}}return R.prototype.all=function(){return this._all(this.data,[])},R.prototype.search=function(qe){var nt=this.data,ht=[];if(!_n(qe,nt))return ht;for(var Nt=this.toBBox,bt=[];nt;){for(var Tt=0;Tt<nt.children.length;Tt++){var ge=nt.children[Tt],Pe=nt.leaf?Nt(ge):ge;_n(qe,Pe)&&(nt.leaf?ht.push(ge):Yt(qe,Pe)?this._all(ge,ht):bt.push(ge))}nt=bt.pop()}return ht},R.prototype.collides=function(qe){var nt=this.data;if(!_n(qe,nt))return!1;for(var ht=[];nt;){for(var Nt=0;Nt<nt.children.length;Nt++){var bt=nt.children[Nt],Tt=nt.leaf?this.toBBox(bt):bt;if(_n(qe,Tt)){if(nt.leaf||Yt(qe,Tt))return!0;ht.push(bt)}}nt=ht.pop()}return!1},R.prototype.load=function(qe){if(!qe||!qe.length)return this;if(qe.length<this._minEntries){for(var nt=0;nt<qe.length;nt++)this.insert(qe[nt]);return this}var ht=this._build(qe.slice(),0,qe.length-1,0);if(this.data.children.length)if(this.data.height===ht.height)this._splitRoot(this.data,ht);else{if(this.data.height<ht.height){var Nt=this.data;this.data=ht,ht=Nt}this._insert(ht,this.data.height-ht.height-1,!0)}else this.data=ht;return this},R.prototype.insert=function(qe){return qe&&this._insert(qe,this.data.height-1),this},R.prototype.clear=function(){return this.data=Ln([]),this},R.prototype.remove=function(qe,nt){if(!qe)return this;for(var ht,Nt,bt,Tt=this.data,ge=this.toBBox(qe),Pe=[],Ne=[];Tt||Pe.length;){if(Tt||(Tt=Pe.pop(),Nt=Pe[Pe.length-1],ht=Ne.pop(),bt=!0),Tt.leaf){var Oe=X(qe,Tt.children,nt);if(Oe!==-1)return Tt.children.splice(Oe,1),Pe.push(Tt),this._condense(Pe),this}bt||Tt.leaf||!Yt(Tt,ge)?Nt?(ht++,Tt=Nt.children[ht],bt=!1):Tt=null:(Pe.push(Tt),Ne.push(ht),ht=0,Nt=Tt,Tt=Tt.children[0])}return this},R.prototype.toBBox=function(qe){return qe},R.prototype.compareMinX=function(qe,nt){return qe.minX-nt.minX},R.prototype.compareMinY=function(qe,nt){return qe.minY-nt.minY},R.prototype.toJSON=function(){return this.data},R.prototype.fromJSON=function(qe){return this.data=qe,this},R.prototype._all=function(qe,nt){for(var ht=[];qe;)qe.leaf?nt.push.apply(nt,qe.children):ht.push.apply(ht,qe.children),qe=ht.pop();return nt},R.prototype._build=function(qe,nt,ht,Nt){var bt,Tt=ht-nt+1,ge=this._maxEntries;if(Tt<=ge)return ne(bt=Ln(qe.slice(nt,ht+1)),this.toBBox),bt;Nt||(Nt=Math.ceil(Math.log(Tt)/Math.log(ge)),ge=Math.ceil(Tt/Math.pow(ge,Nt-1))),(bt=Ln([])).leaf=!1,bt.height=Nt;var Pe=Math.ceil(Tt/ge),Ne=Pe*Math.ceil(Math.sqrt(ge));Qn(qe,nt,ht,Ne,this.compareMinX);for(var Oe=nt;Oe<=ht;Oe+=Ne){var Ie=Math.min(Oe+Ne-1,ht);Qn(qe,Oe,Ie,Pe,this.compareMinY);for(var Fe=Oe;Fe<=Ie;Fe+=Pe){var lt=Math.min(Fe+Pe-1,Ie);bt.children.push(this._build(qe,Fe,lt,Nt-1))}}return ne(bt,this.toBBox),bt},R.prototype._chooseSubtree=function(qe,nt,ht,Nt){for(;Nt.push(nt),!nt.leaf&&Nt.length-1!==ht;){for(var bt=1/0,Tt=1/0,ge=void 0,Pe=0;Pe<nt.children.length;Pe++){var Ne=nt.children[Pe],Oe=vt(Ne),Ie=(Fe=qe,lt=Ne,(Math.max(lt.maxX,Fe.maxX)-Math.min(lt.minX,Fe.minX))*(Math.max(lt.maxY,Fe.maxY)-Math.min(lt.minY,Fe.minY))-Oe);Ie<Tt?(Tt=Ie,bt=Oe<bt?Oe:bt,ge=Ne):Ie===Tt&&Oe<bt&&(bt=Oe,ge=Ne)}nt=ge||nt.children[0]}var Fe,lt;return nt},R.prototype._insert=function(qe,nt,ht){var Nt=ht?qe:this.toBBox(qe),bt=[],Tt=this._chooseSubtree(Nt,this.data,nt,bt);for(Tt.children.push(qe),xe(Tt,Nt);nt>=0&&bt[nt].children.length>this._maxEntries;)this._split(bt,nt),nt--;this._adjustParentBBoxes(Nt,bt,nt)},R.prototype._split=function(qe,nt){var ht=qe[nt],Nt=ht.children.length,bt=this._minEntries;this._chooseSplitAxis(ht,bt,Nt);var Tt=this._chooseSplitIndex(ht,bt,Nt),ge=Ln(ht.children.splice(Tt,ht.children.length-Tt));ge.height=ht.height,ge.leaf=ht.leaf,ne(ht,this.toBBox),ne(ge,this.toBBox),nt?qe[nt-1].children.push(ge):this._splitRoot(ht,ge)},R.prototype._splitRoot=function(qe,nt){this.data=Ln([qe,nt]),this.data.height=qe.height+1,this.data.leaf=!1,ne(this.data,this.toBBox)},R.prototype._chooseSplitIndex=function(qe,nt,ht){for(var Nt,bt,Tt,ge,Pe,Ne,Oe,Ie=1/0,Fe=1/0,lt=nt;lt<=ht-nt;lt++){var ut=ce(qe,0,lt,this.toBBox),gt=ce(qe,lt,ht,this.toBBox),Lt=(bt=ut,Tt=gt,ge=void 0,Pe=void 0,Ne=void 0,Oe=void 0,ge=Math.max(bt.minX,Tt.minX),Pe=Math.max(bt.minY,Tt.minY),Ne=Math.min(bt.maxX,Tt.maxX),Oe=Math.min(bt.maxY,Tt.maxY),Math.max(0,Ne-ge)*Math.max(0,Oe-Pe)),St=vt(ut)+vt(gt);Lt<Ie?(Ie=Lt,Nt=lt,Fe=St<Fe?St:Fe):Lt===Ie&&St<Fe&&(Fe=St,Nt=lt)}return Nt||ht-nt},R.prototype._chooseSplitAxis=function(qe,nt,ht){var Nt=qe.leaf?this.compareMinX:We,bt=qe.leaf?this.compareMinY:je;this._allDistMargin(qe,nt,ht,Nt)<this._allDistMargin(qe,nt,ht,bt)&&qe.children.sort(Nt)},R.prototype._allDistMargin=function(qe,nt,ht,Nt){qe.children.sort(Nt);for(var bt=this.toBBox,Tt=ce(qe,0,nt,bt),ge=ce(qe,ht-nt,ht,bt),Pe=kt(Tt)+kt(ge),Ne=nt;Ne<ht-nt;Ne++){var Oe=qe.children[Ne];xe(Tt,qe.leaf?bt(Oe):Oe),Pe+=kt(Tt)}for(var Ie=ht-nt-1;Ie>=nt;Ie--){var Fe=qe.children[Ie];xe(ge,qe.leaf?bt(Fe):Fe),Pe+=kt(ge)}return Pe},R.prototype._adjustParentBBoxes=function(qe,nt,ht){for(var Nt=ht;Nt>=0;Nt--)xe(nt[Nt],qe)},R.prototype._condense=function(qe){for(var nt=qe.length-1,ht=void 0;nt>=0;nt--)qe[nt].children.length===0?nt>0?(ht=qe[nt-1].children).splice(ht.indexOf(qe[nt]),1):this.clear():ne(qe[nt],this.toBBox)},R})}),jt=o(l=>{Object.defineProperty(l,"__esModule",{value:!0}),l.earthRadius=63710088e-1,l.factors={centimeters:l.earthRadius*100,centimetres:l.earthRadius*100,degrees:l.earthRadius/111325,feet:l.earthRadius*3.28084,inches:l.earthRadius*39.37,kilometers:l.earthRadius/1e3,kilometres:l.earthRadius/1e3,meters:l.earthRadius,metres:l.earthRadius,miles:l.earthRadius/1609.344,millimeters:l.earthRadius*1e3,millimetres:l.earthRadius*1e3,nauticalmiles:l.earthRadius/1852,radians:1,yards:l.earthRadius*1.0936},l.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/l.earthRadius,yards:1.0936133},l.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function f(Oe,Ie,Fe){Fe===void 0&&(Fe={});var lt={type:"Feature"};return(Fe.id===0||Fe.id)&&(lt.id=Fe.id),Fe.bbox&&(lt.bbox=Fe.bbox),lt.properties=Ie||{},lt.geometry=Oe,lt}l.feature=f;function m(Oe,Ie,Fe){switch(Oe){case"Point":return w(Ie).geometry;case"LineString":return ne(Ie).geometry;case"Polygon":return R(Ie).geometry;case"MultiPoint":return je(Ie).geometry;case"MultiLineString":return We(Ie).geometry;case"MultiPolygon":return vt(Ie).geometry;default:throw new Error(Oe+" is invalid")}}l.geometry=m;function w(Oe,Ie,Fe){if(Fe===void 0&&(Fe={}),!Oe)throw new Error("coordinates is required");if(!Array.isArray(Oe))throw new Error("coordinates must be an Array");if(Oe.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Tt(Oe[0])||!Tt(Oe[1]))throw new Error("coordinates must contain numbers");var lt={type:"Point",coordinates:Oe};return f(lt,Ie,Fe)}l.point=w;function E(Oe,Ie,Fe){return Fe===void 0&&(Fe={}),xe(Oe.map(function(lt){return w(lt,Ie)}),Fe)}l.points=E;function R(Oe,Ie,Fe){Fe===void 0&&(Fe={});for(var lt=0,ut=Oe;lt<ut.length;lt++){var gt=ut[lt];if(gt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Lt=0;Lt<gt[gt.length-1].length;Lt++)if(gt[gt.length-1][Lt]!==gt[0][Lt])throw new Error("First and last Position are not equivalent.")}var St={type:"Polygon",coordinates:Oe};return f(St,Ie,Fe)}l.polygon=R;function X(Oe,Ie,Fe){return Fe===void 0&&(Fe={}),xe(Oe.map(function(lt){return R(lt,Ie)}),Fe)}l.polygons=X;function ne(Oe,Ie,Fe){if(Fe===void 0&&(Fe={}),Oe.length<2)throw new Error("coordinates must be an array of two or more positions");var lt={type:"LineString",coordinates:Oe};return f(lt,Ie,Fe)}l.lineString=ne;function ce(Oe,Ie,Fe){return Fe===void 0&&(Fe={}),xe(Oe.map(function(lt){return ne(lt,Ie)}),Fe)}l.lineStrings=ce;function xe(Oe,Ie){Ie===void 0&&(Ie={});var Fe={type:"FeatureCollection"};return Ie.id&&(Fe.id=Ie.id),Ie.bbox&&(Fe.bbox=Ie.bbox),Fe.features=Oe,Fe}l.featureCollection=xe;function We(Oe,Ie,Fe){Fe===void 0&&(Fe={});var lt={type:"MultiLineString",coordinates:Oe};return f(lt,Ie,Fe)}l.multiLineString=We;function je(Oe,Ie,Fe){Fe===void 0&&(Fe={});var lt={type:"MultiPoint",coordinates:Oe};return f(lt,Ie,Fe)}l.multiPoint=je;function vt(Oe,Ie,Fe){Fe===void 0&&(Fe={});var lt={type:"MultiPolygon",coordinates:Oe};return f(lt,Ie,Fe)}l.multiPolygon=vt;function kt(Oe,Ie,Fe){Fe===void 0&&(Fe={});var lt={type:"GeometryCollection",geometries:Oe};return f(lt,Ie,Fe)}l.geometryCollection=kt;function Yt(Oe,Ie){if(Ie===void 0&&(Ie=0),Ie&&!(Ie>=0))throw new Error("precision must be a positive number");var Fe=Math.pow(10,Ie||0);return Math.round(Oe*Fe)/Fe}l.round=Yt;function _n(Oe,Ie){Ie===void 0&&(Ie="kilometers");var Fe=l.factors[Ie];if(!Fe)throw new Error(Ie+" units is invalid");return Oe*Fe}l.radiansToLength=_n;function Ln(Oe,Ie){Ie===void 0&&(Ie="kilometers");var Fe=l.factors[Ie];if(!Fe)throw new Error(Ie+" units is invalid");return Oe/Fe}l.lengthToRadians=Ln;function Qn(Oe,Ie){return nt(Ln(Oe,Ie))}l.lengthToDegrees=Qn;function qe(Oe){var Ie=Oe%360;return Ie<0&&(Ie+=360),Ie}l.bearingToAzimuth=qe;function nt(Oe){var Ie=Oe%(2*Math.PI);return Ie*180/Math.PI}l.radiansToDegrees=nt;function ht(Oe){var Ie=Oe%360;return Ie*Math.PI/180}l.degreesToRadians=ht;function Nt(Oe,Ie,Fe){if(Ie===void 0&&(Ie="kilometers"),Fe===void 0&&(Fe="kilometers"),!(Oe>=0))throw new Error("length must be a positive number");return _n(Ln(Oe,Ie),Fe)}l.convertLength=Nt;function bt(Oe,Ie,Fe){if(Ie===void 0&&(Ie="meters"),Fe===void 0&&(Fe="kilometers"),!(Oe>=0))throw new Error("area must be a positive number");var lt=l.areaFactors[Ie];if(!lt)throw new Error("invalid original units");var ut=l.areaFactors[Fe];if(!ut)throw new Error("invalid final units");return Oe/lt*ut}l.convertArea=bt;function Tt(Oe){return!isNaN(Oe)&&Oe!==null&&!Array.isArray(Oe)}l.isNumber=Tt;function ge(Oe){return!!Oe&&Oe.constructor===Object}l.isObject=ge;function Pe(Oe){if(!Oe)throw new Error("bbox is required");if(!Array.isArray(Oe))throw new Error("bbox must be an Array");if(Oe.length!==4&&Oe.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");Oe.forEach(function(Ie){if(!Tt(Ie))throw new Error("bbox must only contain numbers")})}l.validateBBox=Pe;function Ne(Oe){if(!Oe)throw new Error("id is required");if(["string","number"].indexOf(typeof Oe)===-1)throw new Error("id must be a number or a string")}l.validateId=Ne}),Cr=o(l=>{Object.defineProperty(l,"__esModule",{value:!0});var f=jt();function m(nt,ht,Nt){if(nt!==null)for(var bt,Tt,ge,Pe,Ne,Oe,Ie,Fe=0,lt=0,ut,gt=nt.type,Lt=gt==="FeatureCollection",St=gt==="Feature",tn=Lt?nt.features.length:1,Dn=0;Dn<tn;Dn++){Ie=Lt?nt.features[Dn].geometry:St?nt.geometry:nt,ut=Ie?Ie.type==="GeometryCollection":!1,Ne=ut?Ie.geometries.length:1;for(var jn=0;jn<Ne;jn++){var Gn=0,Xr=0;if(Pe=ut?Ie.geometries[jn]:Ie,Pe!==null){Oe=Pe.coordinates;var ai=Pe.type;switch(Fe=Nt&&(ai==="Polygon"||ai==="MultiPolygon")?1:0,ai){case null:break;case"Point":if(ht(Oe,lt,Dn,Gn,Xr)===!1)return!1;lt++,Gn++;break;case"LineString":case"MultiPoint":for(bt=0;bt<Oe.length;bt++){if(ht(Oe[bt],lt,Dn,Gn,Xr)===!1)return!1;lt++,ai==="MultiPoint"&&Gn++}ai==="LineString"&&Gn++;break;case"Polygon":case"MultiLineString":for(bt=0;bt<Oe.length;bt++){for(Tt=0;Tt<Oe[bt].length-Fe;Tt++){if(ht(Oe[bt][Tt],lt,Dn,Gn,Xr)===!1)return!1;lt++}ai==="MultiLineString"&&Gn++,ai==="Polygon"&&Xr++}ai==="Polygon"&&Gn++;break;case"MultiPolygon":for(bt=0;bt<Oe.length;bt++){for(Xr=0,Tt=0;Tt<Oe[bt].length;Tt++){for(ge=0;ge<Oe[bt][Tt].length-Fe;ge++){if(ht(Oe[bt][Tt][ge],lt,Dn,Gn,Xr)===!1)return!1;lt++}Xr++}Gn++}break;case"GeometryCollection":for(bt=0;bt<Pe.geometries.length;bt++)if(m(Pe.geometries[bt],ht,Nt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function w(nt,ht,Nt,bt){var Tt=Nt;return m(nt,function(ge,Pe,Ne,Oe,Ie){Pe===0&&Nt===void 0?Tt=ge:Tt=ht(Tt,ge,Pe,Ne,Oe,Ie)},bt),Tt}function E(nt,ht){var Nt;switch(nt.type){case"FeatureCollection":for(Nt=0;Nt<nt.features.length&&ht(nt.features[Nt].properties,Nt)!==!1;Nt++);break;case"Feature":ht(nt.properties,0);break}}function R(nt,ht,Nt){var bt=Nt;return E(nt,function(Tt,ge){ge===0&&Nt===void 0?bt=Tt:bt=ht(bt,Tt,ge)}),bt}function X(nt,ht){if(nt.type==="Feature")ht(nt,0);else if(nt.type==="FeatureCollection")for(var Nt=0;Nt<nt.features.length&&ht(nt.features[Nt],Nt)!==!1;Nt++);}function ne(nt,ht,Nt){var bt=Nt;return X(nt,function(Tt,ge){ge===0&&Nt===void 0?bt=Tt:bt=ht(bt,Tt,ge)}),bt}function ce(nt){var ht=[];return m(nt,function(Nt){ht.push(Nt)}),ht}function xe(nt,ht){var Nt,bt,Tt,ge,Pe,Ne,Oe,Ie,Fe,lt,ut=0,gt=nt.type==="FeatureCollection",Lt=nt.type==="Feature",St=gt?nt.features.length:1;for(Nt=0;Nt<St;Nt++){for(Ne=gt?nt.features[Nt].geometry:Lt?nt.geometry:nt,Ie=gt?nt.features[Nt].properties:Lt?nt.properties:{},Fe=gt?nt.features[Nt].bbox:Lt?nt.bbox:void 0,lt=gt?nt.features[Nt].id:Lt?nt.id:void 0,Oe=Ne?Ne.type==="GeometryCollection":!1,Pe=Oe?Ne.geometries.length:1,Tt=0;Tt<Pe;Tt++){if(ge=Oe?Ne.geometries[Tt]:Ne,ge===null){if(ht(null,ut,Ie,Fe,lt)===!1)return!1;continue}switch(ge.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(ht(ge,ut,Ie,Fe,lt)===!1)return!1;break}case"GeometryCollection":{for(bt=0;bt<ge.geometries.length;bt++)if(ht(ge.geometries[bt],ut,Ie,Fe,lt)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}ut++}}function We(nt,ht,Nt){var bt=Nt;return xe(nt,function(Tt,ge,Pe,Ne,Oe){ge===0&&Nt===void 0?bt=Tt:bt=ht(bt,Tt,ge,Pe,Ne,Oe)}),bt}function je(nt,ht){xe(nt,function(Nt,bt,Tt,ge,Pe){var Ne=Nt===null?null:Nt.type;switch(Ne){case null:case"Point":case"LineString":case"Polygon":return ht(f.feature(Nt,Tt,{bbox:ge,id:Pe}),bt,0)===!1?!1:void 0}var Oe;switch(Ne){case"MultiPoint":Oe="Point";break;case"MultiLineString":Oe="LineString";break;case"MultiPolygon":Oe="Polygon";break}for(var Ie=0;Ie<Nt.coordinates.length;Ie++){var Fe=Nt.coordinates[Ie],lt={type:Oe,coordinates:Fe};if(ht(f.feature(lt,Tt),bt,Ie)===!1)return!1}})}function vt(nt,ht,Nt){var bt=Nt;return je(nt,function(Tt,ge,Pe){ge===0&&Pe===0&&Nt===void 0?bt=Tt:bt=ht(bt,Tt,ge,Pe)}),bt}function kt(nt,ht){je(nt,function(Nt,bt,Tt){var ge=0;if(Nt.geometry){var Pe=Nt.geometry.type;if(!(Pe==="Point"||Pe==="MultiPoint")){var Ne,Oe=0,Ie=0,Fe=0;if(m(Nt,function(lt,ut,gt,Lt,St){if(Ne===void 0||bt>Oe||Lt>Ie||St>Fe){Ne=lt,Oe=bt,Ie=Lt,Fe=St,ge=0;return}var tn=f.lineString([Ne,lt],Nt.properties);if(ht(tn,bt,Tt,St,ge)===!1)return!1;ge++,Ne=lt})===!1)return!1}}})}function Yt(nt,ht,Nt){var bt=Nt,Tt=!1;return kt(nt,function(ge,Pe,Ne,Oe,Ie){Tt===!1&&Nt===void 0?bt=ge:bt=ht(bt,ge,Pe,Ne,Oe,Ie),Tt=!0}),bt}function _n(nt,ht){if(!nt)throw new Error("geojson is required");je(nt,function(Nt,bt,Tt){if(Nt.geometry!==null){var ge=Nt.geometry.type,Pe=Nt.geometry.coordinates;switch(ge){case"LineString":if(ht(Nt,bt,Tt,0,0)===!1)return!1;break;case"Polygon":for(var Ne=0;Ne<Pe.length;Ne++)if(ht(f.lineString(Pe[Ne],Nt.properties),bt,Tt,Ne)===!1)return!1;break}}})}function Ln(nt,ht,Nt){var bt=Nt;return _n(nt,function(Tt,ge,Pe,Ne){ge===0&&Nt===void 0?bt=Tt:bt=ht(bt,Tt,ge,Pe,Ne)}),bt}function Qn(nt,ht){if(ht=ht||{},!f.isObject(ht))throw new Error("options is invalid");var Nt=ht.featureIndex||0,bt=ht.multiFeatureIndex||0,Tt=ht.geometryIndex||0,ge=ht.segmentIndex||0,Pe=ht.properties,Ne;switch(nt.type){case"FeatureCollection":Nt<0&&(Nt=nt.features.length+Nt),Pe=Pe||nt.features[Nt].properties,Ne=nt.features[Nt].geometry;break;case"Feature":Pe=Pe||nt.properties,Ne=nt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Ne=nt;break;default:throw new Error("geojson is invalid")}if(Ne===null)return null;var Oe=Ne.coordinates;switch(Ne.type){case"Point":case"MultiPoint":return null;case"LineString":return ge<0&&(ge=Oe.length+ge-1),f.lineString([Oe[ge],Oe[ge+1]],Pe,ht);case"Polygon":return Tt<0&&(Tt=Oe.length+Tt),ge<0&&(ge=Oe[Tt].length+ge-1),f.lineString([Oe[Tt][ge],Oe[Tt][ge+1]],Pe,ht);case"MultiLineString":return bt<0&&(bt=Oe.length+bt),ge<0&&(ge=Oe[bt].length+ge-1),f.lineString([Oe[bt][ge],Oe[bt][ge+1]],Pe,ht);case"MultiPolygon":return bt<0&&(bt=Oe.length+bt),Tt<0&&(Tt=Oe[bt].length+Tt),ge<0&&(ge=Oe[bt][Tt].length-ge-1),f.lineString([Oe[bt][Tt][ge],Oe[bt][Tt][ge+1]],Pe,ht)}throw new Error("geojson is invalid")}function qe(nt,ht){if(ht=ht||{},!f.isObject(ht))throw new Error("options is invalid");var Nt=ht.featureIndex||0,bt=ht.multiFeatureIndex||0,Tt=ht.geometryIndex||0,ge=ht.coordIndex||0,Pe=ht.properties,Ne;switch(nt.type){case"FeatureCollection":Nt<0&&(Nt=nt.features.length+Nt),Pe=Pe||nt.features[Nt].properties,Ne=nt.features[Nt].geometry;break;case"Feature":Pe=Pe||nt.properties,Ne=nt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Ne=nt;break;default:throw new Error("geojson is invalid")}if(Ne===null)return null;var Oe=Ne.coordinates;switch(Ne.type){case"Point":return f.point(Oe,Pe,ht);case"MultiPoint":return bt<0&&(bt=Oe.length+bt),f.point(Oe[bt],Pe,ht);case"LineString":return ge<0&&(ge=Oe.length+ge),f.point(Oe[ge],Pe,ht);case"Polygon":return Tt<0&&(Tt=Oe.length+Tt),ge<0&&(ge=Oe[Tt].length+ge),f.point(Oe[Tt][ge],Pe,ht);case"MultiLineString":return bt<0&&(bt=Oe.length+bt),ge<0&&(ge=Oe[bt].length+ge),f.point(Oe[bt][ge],Pe,ht);case"MultiPolygon":return bt<0&&(bt=Oe.length+bt),Tt<0&&(Tt=Oe[bt].length+Tt),ge<0&&(ge=Oe[bt][Tt].length-ge),f.point(Oe[bt][Tt][ge],Pe,ht)}throw new Error("geojson is invalid")}l.coordAll=ce,l.coordEach=m,l.coordReduce=w,l.featureEach=X,l.featureReduce=ne,l.findPoint=qe,l.findSegment=Qn,l.flattenEach=je,l.flattenReduce=vt,l.geomEach=xe,l.geomReduce=We,l.lineEach=_n,l.lineReduce=Ln,l.propEach=E,l.propReduce=R,l.segmentEach=kt,l.segmentReduce=Yt}),Di=o(l=>{Object.defineProperty(l,"__esModule",{value:!0});var f=Cr();function m(w){var E=[1/0,1/0,-1/0,-1/0];return f.coordEach(w,function(R){E[0]>R[0]&&(E[0]=R[0]),E[1]>R[1]&&(E[1]=R[1]),E[2]<R[0]&&(E[2]=R[0]),E[3]<R[1]&&(E[3]=R[1])}),E}m.default=m,l.default=m}),zi=o((l,f)=>{var m=sn(),w=jt(),E=Cr(),R=Di().default,X=E.featureEach;E.coordEach,w.polygon;var ne=w.featureCollection;function ce(xe){var We=new m(xe);return We.insert=function(je){if(je.type!=="Feature")throw new Error("invalid feature");return je.bbox=je.bbox?je.bbox:R(je),m.prototype.insert.call(this,je)},We.load=function(je){var vt=[];return Array.isArray(je)?je.forEach(function(kt){if(kt.type!=="Feature")throw new Error("invalid features");kt.bbox=kt.bbox?kt.bbox:R(kt),vt.push(kt)}):X(je,function(kt){if(kt.type!=="Feature")throw new Error("invalid features");kt.bbox=kt.bbox?kt.bbox:R(kt),vt.push(kt)}),m.prototype.load.call(this,vt)},We.remove=function(je,vt){if(je.type!=="Feature")throw new Error("invalid feature");return je.bbox=je.bbox?je.bbox:R(je),m.prototype.remove.call(this,je,vt)},We.clear=function(){return m.prototype.clear.call(this)},We.search=function(je){var vt=m.prototype.search.call(this,this.toBBox(je));return ne(vt)},We.collides=function(je){return m.prototype.collides.call(this,this.toBBox(je))},We.all=function(){var je=m.prototype.all.call(this);return ne(je)},We.toJSON=function(){return m.prototype.toJSON.call(this)},We.fromJSON=function(je){return m.prototype.fromJSON.call(this,je)},We.toBBox=function(je){var vt;if(je.bbox)vt=je.bbox;else if(Array.isArray(je)&&je.length===4)vt=je;else if(Array.isArray(je)&&je.length===6)vt=[je[0],je[1],je[3],je[4]];else if(je.type==="Feature")vt=R(je);else if(je.type==="FeatureCollection")vt=R(je);else throw new Error("invalid geojson");return{minX:vt[0],minY:vt[1],maxX:vt[2],maxY:vt[3]}},We}f.exports=ce,f.exports.default=ce});Array.prototype.findIndex=Array.prototype.findIndex||function(l){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof l!="function")throw new TypeError("callback must be a function");for(var f=Object(this),m=f.length>>>0,w=arguments[1],E=0;E<m;E++)if(l.call(w,f[E],E,f))return E;return-1},Array.prototype.find=Array.prototype.find||function(l){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof l!="function")throw new TypeError("callback must be a function");for(var f=Object(this),m=f.length>>>0,w=arguments[1],E=0;E<m;E++){var R=f[E];if(l.call(w,R,E,f))return R}},typeof Object.assign!="function"&&(Object.assign=function(l){if(l==null)throw new TypeError("Cannot convert undefined or null to object");l=Object(l);for(var f=1;f<arguments.length;f++){var m=arguments[f];if(m!=null)for(var w in m)Object.prototype.hasOwnProperty.call(m,w)&&(l[w]=m[w])}return l}),function(l){l.forEach(function(f){f.hasOwnProperty("remove")||Object.defineProperty(f,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(l,f){if(this==null)throw new TypeError('"this" is null or not defined');var m=Object(this),w=m.length>>>0;if(w===0)return!1;var E=f|0,R=Math.max(E>=0?E:w-Math.abs(E),0);function X(ne,ce){return ne===ce||typeof ne=="number"&&typeof ce=="number"&&isNaN(ne)&&isNaN(ce)}for(;R<w;){if(X(m[R],l))return!0;R++}return!1}});var Es={version:"2.18.3"},sr=h(jr()),Lr={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},Is={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex lschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer lschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Lnge",segmentLength:"Segment Lnge",area:"Flche",radius:"Radius",perimeter:"Umfang",height:"Hhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},fr={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},Ui={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},So={tooltips:{placeMarker:"Adaug un punct",firstVertex:"Apas aici pentru a aduga primul Vertex",continueLine:"Apas aici pentru a continua desenul",finishLine:"Apas pe orice obiect pentru a finisa desenul",finishPoly:"Apas pe primul obiect pentru a finisa",finishRect:"Apas pentru a finisa",startCircle:"Apas pentru a desena un cerc",finishCircle:"Apas pentru a finisa un cerc",placeCircleMarker:"Adaug un punct"},actions:{finish:"Termin",cancel:"Anuleaz",removeLastVertex:"terge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaug o bulin",drawPolyButton:"Deseneaz un poligon",drawLineButton:"Deseneaz o linie",drawCircleButton:"Deseneaz un cerc",drawRectButton:"Deseneaz un dreptunghi",editButton:"Editeaz straturile",dragButton:"Mut straturile",cutButton:"Taie straturile",deleteButton:"terge straturile",drawCircleMarkerButton:"Deseneaz marcatorul cercului",snappingButton:"Fixai marcatorul glisat pe alte straturi i vrfuri",pinningButton:"Fixai vrfurile partajate mpreun",rotateButton:"Rotii stratul"}},Eo={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:"     ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" "}},so={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vrtice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del crculo",finishCircle:"Presiona para finalizar el crculo",placeCircleMarker:"Presiona para colocar un marcador de crculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar ltimo vrtice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polgono",drawLineButton:"Dibujar Lnea",drawCircleButton:"Dibujar Crculo",drawRectButton:"Dibujar Rectngulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Crculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vrtices",pinningButton:"Fijar juntos los vrtices compartidos",rotateButton:"Rotar capa"}},vi={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beindigen",finishPoly:"Klik op het eerst punt om te beindigen",finishRect:"Klik om te beindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},Qo={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer  dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"diter des calques",dragButton:"Dplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"pingler ensemble les sommets partags",rotateButton:"Tourner des calques"}},Ks={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},co={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},ha={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vrtice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do crculo",finishCircle:"Clique para finalizar o crculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover ltimo vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},Cs={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vrtice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do crculo",finishCircle:"Clique para terminar o crculo",placeCircleMarker:"Clique para colocar marcador de crculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover ltimo Vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},Ll={tooltips:{placeMarker:"Kliknij, aby umieci znacznik",firstVertex:"Kliknij, aby umieci pierwszy wierzchoek",continueLine:"Kliknij, aby kontynuowa rysowanie",finishLine:"Kliknij dowolny istniejcy znacznik, aby zakoczy",finishPoly:"Kliknij pierwszy znacznik, aby zakoczy",finishRect:"Kliknij, aby zakoczy",startCircle:"Kliknij, aby umieci rodek okrgu",finishCircle:"Kliknij, aby zakoczy okrg",placeCircleMarker:"Kliknij, aby umieci znacznik okrgu",placeText:"Kliknij, aby umieci tekst"},actions:{finish:"Zakocz",cancel:"Anuluj",removeLastVertex:"Usu ostatni wierzchoek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokt",drawLineButton:"Rysuj lini",drawCircleButton:"Rysuj okrg",drawRectButton:"Rysuj prostokt",editButton:"Edytuj warstwy",dragButton:"Przecignij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usu warstwy",drawCircleMarkerButton:"Rysuj znacznik okrgy",snappingButton:"Przycignij przenoszony znacznik do innych warstw i wierzchokw",pinningButton:"Przypnij wsplne wierzchoki razem",rotateButton:"Obr warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne ledzenie linii"},measurements:{totalLength:"Dugo",segmentLength:"Dugo odcinka",area:"Obszar",radius:"Promie",perimeter:"Obwd",height:"Wysoko",width:"Szeroko",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},Or={tooltips:{placeMarker:"Klicka fr att placera markr",firstVertex:"Klicka fr att placera frsta hrnet",continueLine:"Klicka fr att fortstta rita",finishLine:"Klicka p en existerande punkt fr att slutfra",finishPoly:"Klicka p den frsta punkten fr att slutfra",finishRect:"Klicka fr att slutfra",startCircle:"Klicka fr att placera cirkelns centrum",finishCircle:"Klicka fr att slutfra cirkeln",placeCircleMarker:"Klicka fr att placera cirkelmarkr"},actions:{finish:"Slutfr",cancel:"Avbryt",removeLastVertex:"Ta bort sista hrnet"},buttonTitles:{drawMarkerButton:"Rita Markr",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkr",snappingButton:"Snpp dra markren till andra lager och hrn",pinningButton:"Fst delade hrn tillsammans",rotateButton:"Rotera lagret"}},ho={tooltips:{placeMarker:"     ",firstVertex:"       ",continueLine:"      ",finishLine:"        ",finishPoly:"       ",finishRect:"    ",startCircle:"      ",finishCircle:"      ",placeCircleMarker:"      "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"        ",pinningButton:"   ",rotateButton:"  "}},$i={tooltips:{placeMarker:"Kattintson a jell elhelyezshez",firstVertex:"Kattintson az els pont elhelyezshez",continueLine:"Kattintson a kvetkez pont elhelyezshez",finishLine:"A befejezshez kattintson egy meglv pontra",finishPoly:"A befejezshez kattintson az els pontra",finishRect:"Kattintson a befejezshez",startCircle:"Kattintson a kr kzppontjnak elhelyezshez",finishCircle:"Kattintson a kr befejezshez",placeCircleMarker:"Kattintson a krjell elhelyezshez"},actions:{finish:"Befejezs",cancel:"Mgse",removeLastVertex:"Utols pont eltvoltsa"},buttonTitles:{drawMarkerButton:"Jell rajzolsa",drawPolyButton:"Poligon rajzolsa",drawLineButton:"Vonal rajzolsa",drawCircleButton:"Kr rajzolsa",drawRectButton:"Ngyzet rajzolsa",editButton:"Elemek szerkesztse",dragButton:"Elemek mozgatsa",cutButton:"Elemek vgsa",deleteButton:"Elemek trlse",drawCircleMarkerButton:"Kr jell rajzolsa",snappingButton:"Kapcsolja a jelltt msik elemhez vagy ponthoz",pinningButton:"Kzs pontok sszektse",rotateButton:"Flia elforgatsa"}},Sl={tooltips:{placeMarker:"Tryk for at placere en markr",firstVertex:"Tryk for at placere det frste punkt",continueLine:"Tryk for at fortstte linjen",finishLine:"Tryk p et eksisterende punkt for at afslutte",finishPoly:"Tryk p det frste punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkr"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markr",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Trk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkr",snappingButton:"Fastgr trukket markr til andre elementer",pinningButton:"Sammenlg delte elementer",rotateButton:"Roter laget"}},ao={tooltips:{placeMarker:"Klikk for  plassere punkt",firstVertex:"Klikk for  plassere frste punkt",continueLine:"Klikk for  tegne videre",finishLine:"Klikk p et eksisterende punkt for  fullfre",finishPoly:"Klikk frste punkt for  fullfre",finishRect:"Klikk for  fullfre",startCircle:"Klikk for  sette sirkel midtpunkt",finishCircle:"Klikk for  fullfre sirkel",placeCircleMarker:"Klikk for  plassere sirkel",placeText:"Klikk for  plassere tekst"},actions:{finish:"Fullfr",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotr objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalr objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Omrde",radius:"Radius",perimeter:"Omriss",height:"Hyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkr"}},qu={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"   ",finishLine:"      ",finishPoly:"     ",finishRect:"  ",startCircle:"    ",finishCircle:"    ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"      ",rotateButton:" ",drawTextButton:" ",scaleButton:"",autoTracingButton:" "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},ql={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:" -    ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"'   ",rotateButton:" "}},ar={tooltips:{placeMarker:"areti yerletirmek iin tklayn",firstVertex:"lk tepe noktasn yerletirmek iin tklayn",continueLine:"izime devam etmek iin tklayn",finishLine:"Bitirmek iin mevcut herhangi bir iaretiyi tklayn",finishPoly:"Bitirmek iin ilk iaretiyi tklayn",finishRect:"Bitirmek iin tklayn",startCircle:"Daire merkezine yerletirmek iin tklayn",finishCircle:"Daireyi bitirmek iin tklayn",placeCircleMarker:"Daire iaretisi yerletirmek iin tklayn"},actions:{finish:"Bitir",cancel:"ptal",removeLastVertex:"Son keyi kaldr"},buttonTitles:{drawMarkerButton:"izim aretisi",drawPolyButton:"okgenler iz",drawLineButton:"oklu izgi iz",drawCircleButton:"ember iz",drawRectButton:"Dikdrtgen iz",editButton:"Katmanlar dzenle",dragButton:"Katmanlar srkle",cutButton:"Katmanlar kes",deleteButton:"Katmanlar kaldr",drawCircleMarkerButton:"Daire iaretisi iz",snappingButton:"Srklenen iaretiyi dier katmanlara ve kelere yaptr",pinningButton:"Paylalan keleri birbirine sabitle",rotateButton:"Katman dndr"}},dr={tooltips:{placeMarker:"Kliknutm vytvote znaku",firstVertex:"Kliknutm vytvote prvn objekt",continueLine:"Kliknutm pokraujte v kreslen",finishLine:"Kliknut na libovolnou existujc znaku pro dokonen",finishPoly:"Vyberte prvn bod pro dokonen",finishRect:"Kliknte pro dokonen",startCircle:"Kliknutm pidejte sted kruhu",finishCircle:",   ",placeCircleMarker:"Kliknutm nastavte polomr"},actions:{finish:"Dokonit",cancel:"Zruit",removeLastVertex:"Zruit posledn akci"},buttonTitles:{drawMarkerButton:"Pidat znaku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit kivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdlnk",editButton:"Upravit vrstvu",dragButton:"Peneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Pidat kruhovou znaku",snappingButton:"Navzat tanou znaku k dalm vrstvm a vrcholm",pinningButton:"Spojit spolen body dohromady",rotateButton:"Otote vrstvu"}},Rs={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:"",placeText:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:"",drawTextButton:""}},$r={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtmist",finishLine:"Klikkaa olemassa olevaa merkki lopettaaksesi",finishPoly:"Klikkaa ensimmist merkki lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrn keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrn",placeCircleMarker:"Klikkaa asettaaksesi ympyrmerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirr merkkej",drawPolyButton:"Piirr monikulmioita",drawLineButton:"Piirr viivoja",drawCircleButton:"Piirr ympyr",drawRectButton:"Piirr neliskulmioita",editButton:"Muokkaa",dragButton:"Siirr",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirr ympyrmerkki",snappingButton:"Kiinnit siirrettv merkki toisiin muotoihin",pinningButton:"Kiinnit jaetut muodot yhteen",rotateButton:"Knn",drawTextButton:"Piirr teksti"}},vu={tooltips:{placeMarker:"  ",firstVertex:"   ",continueLine:"  ",finishLine:"   ",finishPoly:"   ",finishRect:" ",startCircle:"    ",finishCircle:"  ",placeCircleMarker:"   ",placeText:"  "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" ",drawTextButton:" "}},Qa={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"    ",finishLine:"    ",finishPoly:"    ",finishRect:"  ",startCircle:"    ",finishCircle:"   ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:" ",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:"  ",cutButton:"  ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"     ",pinningButton:"   ",rotateButton:" ",drawTextButton:" ",scaleButton:"  ",autoTracingButton:"  "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},el=Cs,Fs={en:Lr,de:Is,it:fr,id:Ui,ro:So,ru:Eo,es:so,nl:vi,fr:Qo,pt:el,pt_br:ha,pt_pt:Cs,zh:Ks,zh_tw:co,pl:Ll,sv:Or,el:ho,hu:$i,da:Sl,no:ao,fa:qu,ua:ql,tr:ar,cz:dr,ja:Rs,fi:$r,ko:vu,ky:Qa},Ra={_globalEditModeEnabled:!1,enableGlobalEditMode(l){let f={...l};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(m=>{this._isRelevantForEdit(m)&&m.pm.enable(f)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(l=>{l.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(l=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(l)},handleLayerAdditionInGlobalEditMode(){let l=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let f in l){let m=l[f];this._isRelevantForEdit(m)&&m.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:l}){this._addedLayersEdit[L.stamp(l)]=l},_isRelevantForEdit(l){return l.pm&&!(l instanceof L.LayerGroup)&&(!L.PM.optIn&&!l.options.pmIgnore||L.PM.optIn&&l.options.pmIgnore===!1)&&!l._pmTempLayer&&l.pm.options.allowEditing}},yu=Ra,El={_globalDragModeEnabled:!1,enableGlobalDragMode(){let l=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},l.forEach(f=>{this._isRelevantForDrag(f)&&f.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let l=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,l.forEach(f=>{f.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let l=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let f in l){let m=l[f];this._isRelevantForDrag(m)&&m.pm.enableLayerDrag()}},_layerAddedDrag({layer:l}){this._addedLayersDrag[L.stamp(l)]=l},_isRelevantForDrag(l){return l.pm&&!(l instanceof L.LayerGroup)&&(!L.PM.optIn&&!l.options.pmIgnore||L.PM.optIn&&l.options.pmIgnore===!1)&&!l._pmTempLayer&&l.pm.options.draggable}},cr=El,kr={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(l=>{this._isRelevantForRemoval(l)&&(l.pm.enabled()&&l.pm.disable(),l.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(l=>{l.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(l){let f=l.target;this._isRelevantForRemoval(f)&&!f.pm.dragging()&&(f.removeFrom(this.map.pm._getContainingLayer()),f.remove(),f instanceof L.LayerGroup?(this._fireRemoveLayerGroup(f),this._fireRemoveLayerGroup(this.map,f)):(f.pm._fireRemove(f),f.pm._fireRemove(this.map,f)))},_isRelevantForRemoval(l){return l.pm&&!(l instanceof L.LayerGroup)&&(!L.PM.optIn&&!l.options.pmIgnore||L.PM.optIn&&l.options.pmIgnore===!1)&&!l._pmTempLayer&&l.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let l=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let f in l){let m=l[f];this._isRelevantForRemoval(m)&&(m.pm.enabled()&&m.pm.disable(),m.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:l}){this._addedLayersRemoval[L.stamp(l)]=l}},Fa=kr,Wu={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(l=>l instanceof L.Polyline).forEach(l=>{this._isRelevantForRotate(l)&&l.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(l=>l instanceof L.Polyline).forEach(l=>{l.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(l){return l.pm&&l instanceof L.Polyline&&!(l instanceof L.LayerGroup)&&(!L.PM.optIn&&!l.options.pmIgnore||L.PM.optIn&&l.options.pmIgnore===!1)&&!l._pmTempLayer&&l.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let l=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let f in l){let m=l[f];this._isRelevantForRemoval(m)&&m.pm.enableRotate()}},_layerAddedRotate({layer:l}){this._addedLayersRotate[L.stamp(l)]=l}},Cl=Wu,Wl=h(jr()),tl={_fireDrawStart(l="Draw",f={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},l,f)},_fireDrawEnd(l="Draw",f={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},l,f)},_fireCreate(l,f="Draw",m={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:l,layer:l},f,m)},_fireCenterPlaced(l="Draw",f={}){let m=l==="Draw"?this._layer:void 0,w=l!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:m,layer:w,latlng:this._layer.getLatLng()},l,f)},_fireCut(l,f,m,w="Draw",E={}){this.__fire(l,"pm:cut",{shape:this._shape,layer:f,originalLayer:m},w,E)},_fireEdit(l=this._layer,f="Edit",m={}){this.__fire(l,"pm:edit",{layer:this._layer,shape:this.getShape()},f,m)},_fireEnable(l="Edit",f={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},l,f)},_fireDisable(l="Edit",f={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},l,f)},_fireUpdate(l="Edit",f={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},l,f)},_fireMarkerDragStart(l,f=void 0,m="Edit",w={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:l,shape:this.getShape(),indexPath:f},m,w)},_fireMarkerDrag(l,f=void 0,m="Edit",w={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:l,shape:this.getShape(),indexPath:f},m,w)},_fireMarkerDragEnd(l,f=void 0,m=void 0,w="Edit",E={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:l,shape:this.getShape(),indexPath:f,intersectionReset:m},w,E)},_fireDragStart(l="Edit",f={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},l,f)},_fireDrag(l,f="Edit",m={}){this.__fire(this._layer,"pm:drag",{...l,shape:this.getShape()},f,m)},_fireDragEnd(l="Edit",f={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},l,f)},_fireDragEnable(l="Edit",f={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},l,f)},_fireDragDisable(l="Edit",f={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},l,f)},_fireRemove(l,f=l,m="Edit",w={}){this.__fire(l,"pm:remove",{layer:f,shape:this.getShape()},m,w)},_fireVertexAdded(l,f,m,w="Edit",E={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:l,indexPath:f,latlng:m,shape:this.getShape()},w,E)},_fireVertexRemoved(l,f,m="Edit",w={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:l,indexPath:f,shape:this.getShape()},m,w)},_fireVertexClick(l,f,m="Edit",w={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:l,indexPath:f,shape:this.getShape()},m,w)},_fireIntersect(l,f=this._layer,m="Edit",w={}){this.__fire(f,"pm:intersect",{layer:this._layer,intersection:l,shape:this.getShape()},m,w)},_fireLayerReset(l,f,m="Edit",w={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:l,indexPath:f,shape:this.getShape()},m,w)},_fireChange(l,f="Edit",m={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:l,shape:this.getShape()},f,m)},_fireTextChange(l,f="Edit",m={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:l,shape:this.getShape()},f,m)},_fireTextFocus(l="Edit",f={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},l,f)},_fireTextBlur(l="Edit",f={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},l,f)},_fireSnapDrag(l,f,m="Snapping",w={}){this.__fire(l,"pm:snapdrag",f,m,w)},_fireSnap(l,f,m="Snapping",w={}){this.__fire(l,"pm:snap",f,m,w)},_fireUnsnap(l,f,m="Snapping",w={}){this.__fire(l,"pm:unsnap",f,m,w)},_fireRotationEnable(l,f,m="Rotation",w={}){this.__fire(l,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},m,w)},_fireRotationDisable(l,f="Rotation",m={}){this.__fire(l,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},f,m)},_fireRotationStart(l,f,m="Rotation",w={}){this.__fire(l,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:f},m,w)},_fireRotation(l,f,m,w=this._rotationLayer,E="Rotation",R={}){this.__fire(l,"pm:rotate",{layer:w,helpLayer:this._layer,startAngle:this._startAngle,angle:w.pm.getAngle(),angleDiff:f,oldLatLngs:m,newLatLngs:w.getLatLngs()},E,R)},_fireRotationEnd(l,f,m,w="Rotation",E={}){this.__fire(l,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:f,angle:this._rotationLayer.pm.getAngle(),originLatLngs:m,newLatLngs:this._rotationLayer.getLatLngs()},w,E)},_fireActionClick(l,f,m,w="Toolbar",E={}){this.__fire(this._map,"pm:actionclick",{text:l.text,action:l,btnName:f,button:m},w,E)},_fireButtonClick(l,f,m="Toolbar",w={}){this.__fire(this._map,"pm:buttonclick",{btnName:l,button:f},m,w)},_fireLangChange(l,f,m,w,E="Global",R={}){this.__fire(this.map,"pm:langchange",{oldLang:l,activeLang:f,fallback:m,translations:w},E,R)},_fireGlobalDragModeToggled(l,f="Global",m={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:l,map:this.map},f,m)},_fireGlobalEditModeToggled(l,f="Global",m={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:l,map:this.map},f,m)},_fireGlobalRemovalModeToggled(l,f="Global",m={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:l,map:this.map},f,m)},_fireGlobalCutModeToggled(l="Global",f={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},l,f)},_fireGlobalDrawModeToggled(l="Global",f={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},l,f)},_fireGlobalRotateModeToggled(l="Global",f={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},l,f)},_fireRemoveLayerGroup(l,f=l,m="Edit",w={}){this.__fire(l,"pm:remove",{layer:f,shape:void 0},m,w)},_fireKeyeventEvent(l,f,m,w="Global",E={}){this.__fire(this.map,"pm:keyevent",{event:l,eventType:f,focusOn:m},w,E)},__fire(l,f,m,w,E={}){m=(0,Wl.default)(m,E,{source:w}),L.PM.Utils._fireEvent(l,f,m)}},Pl=tl,Zl=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(l){this.map=l,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),l.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(l){let f="document";this.map.getContainer().contains(l.target)&&(f="map");let m={event:l,eventType:l.type,focusOn:f};this._lastEvents[l.type]=m,this._lastEvents.current=m,this.map.pm._fireKeyeventEvent(l,l.type,f)},_onBlur(l){l.altKey=!1;let f={event:l,eventType:l.type,focusOn:"document"};this._lastEvents[l.type]=f,this._lastEvents.current=f},getLastKeyEvent(l="current"){return this._lastEvents[l]},isShiftKeyPressed(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.shiftKey},isAltKeyPressed(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.altKey},isCtrlKeyPressed(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.ctrlKey},isMetaKeyPressed(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.metaKey},getPressedKey(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.key}}),Nr=Zl,Vi=h(xr());function Xn(l){let f=L.PM.activeLang;return(0,Vi.default)(Fs[f],l)||(0,Vi.default)(Fs.en,l)||l}function Hi(l){for(let f=0;f<l.length;f+=1){let m=l[f];if(Array.isArray(m)){if(Hi(m))return!0}else if(m!=null&&m!=="")return!0}return!1}function nl(l){return l.reduce((f,m)=>{if(m.length!==0){let w=Array.isArray(m)?nl(m):m;Array.isArray(w)?w.length!==0&&f.push(w):f.push(w)}return f},[])}function fa(l,f,m){let w={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:E,b:R,f:X}=w,ne=l.lng,ce=l.lat,xe=m,We=Math.PI,je=f*We/180,vt=Math.sin(je),kt=Math.cos(je),Yt=(1-X)*Math.tan(ce*We/180),_n=1/Math.sqrt(1+Yt*Yt),Ln=Yt*_n,Qn=Math.atan2(Yt,kt),qe=_n*vt,nt=1-qe*qe,ht=nt*(E*E-R*R)/(R*R),Nt=1+ht/16384*(4096+ht*(-768+ht*(320-175*ht))),bt=ht/1024*(256+ht*(-128+ht*(74-47*ht))),Tt=xe/(R*Nt),ge=2*Math.PI,Pe,Ne,Oe;for(;Math.abs(Tt-ge)>1e-12;){Pe=Math.cos(2*Qn+Tt),Ne=Math.sin(Tt),Oe=Math.cos(Tt);let tn=bt*Ne*(Pe+bt/4*(Oe*(-1+2*Pe*Pe)-bt/6*Pe*(-3+4*Ne*Ne)*(-3+4*Pe*Pe)));ge=Tt,Tt=xe/(R*Nt)+tn}let Ie=Ln*Ne-_n*Oe*kt,Fe=Math.atan2(Ln*Oe+_n*Ne*kt,(1-X)*Math.sqrt(qe*qe+Ie*Ie)),lt=Math.atan2(Ne*vt,_n*Oe-Ln*Ne*kt),ut=X/16*nt*(4+X*(4-3*nt)),gt=lt-(1-ut)*X*qe*(Tt+ut*Ne*(Pe+ut*Oe*(-1+2*Pe*Pe))),Lt=ne+gt*180/We,St=Fe*180/We;return L.latLng(Lt,St)}function wi(l,f,m,w,E=!0){let R,X,ne,ce=[];for(let xe=0;xe<m;xe+=1){if(E)R=xe*360/m+w,X=fa(l,R,f),ne=L.latLng(X.lng,X.lat);else{let We=l.lat+Math.cos(2*xe*Math.PI/m)*f,je=l.lng+Math.sin(2*xe*Math.PI/m)*f;ne=L.latLng(We,je)}ce.push(ne)}return ce}function Kl(l,f,m){f=(f+360)%360;let w=Math.PI/180,E=180/Math.PI,{R}=L.CRS.Earth,X=l.lng*w,ne=l.lat*w,ce=f*w,xe=Math.sin(ne),We=Math.cos(ne),je=Math.cos(m/R),vt=Math.sin(m/R),kt=Math.asin(xe*je+We*vt*Math.cos(ce)),Yt=X+Math.atan2(Math.sin(ce)*vt*We,je-xe*Math.sin(kt));Yt*=E;let _n=Yt-360,Ln=Yt<-180?Yt+360:Yt;return Yt=Yt>180?_n:Ln,L.latLng([kt*E,Yt])}function Ys(l,f,m){let w=l.latLngToContainerPoint(f),E=l.latLngToContainerPoint(m),R=Math.atan2(E.y-w.y,E.x-w.x)*180/Math.PI+90;return R+=R<0?360:0,R}function Al(l,f,m,w){let E=Ys(l,f,m);return Kl(f,E,w)}function Ml(l,f,m="asc"){if(!f||Object.keys(f).length===0)return(ce,xe)=>ce-xe;let w=Object.keys(f),E,R=w.length-1,X={};for(;R>=0;)E=w[R],X[E.toLowerCase()]=f[E],R-=1;function ne(ce){if(ce instanceof L.Marker)return"Marker";if(ce instanceof L.Circle)return"Circle";if(ce instanceof L.CircleMarker)return"CircleMarker";if(ce instanceof L.Rectangle)return"Rectangle";if(ce instanceof L.Polygon)return"Polygon";if(ce instanceof L.Polyline)return"Line"}return(ce,xe)=>{let We,je;if(We=ne(ce.layer).toLowerCase(),je=ne(xe.layer).toLowerCase(),!We||!je)return 0;let vt=We in X?X[We]:Number.MAX_SAFE_INTEGER,kt=je in X?X[je]:Number.MAX_SAFE_INTEGER,Yt=0;return vt<kt?Yt=-1:vt>kt&&(Yt=1),m==="desc"?Yt*-1:Yt}}function Ps(l,f=l.getLatLngs()){return l instanceof L.Polygon?L.polygon(f).getLatLngs():L.polyline(f).getLatLngs()}function kl(l,f){var m,w,E,R;if((w=(m=f.options.crs)==null?void 0:m.projection)!=null&&w.MAX_LATITUDE){let X=(R=(E=f.options.crs)==null?void 0:E.projection)==null?void 0:R.MAX_LATITUDE;l.lat=Math.max(Math.min(X,l.lat),-X)}return l}function Qr(l){return l.options.renderer||l._map&&(l._map._getPaneRenderer(l.options.pane)||l._map.options.renderer||l._map._renderer)||l._renderer}var Zu=L.Class.extend({includes:[yu,cr,Fa,Cl,Pl],initialize(l){this.map=l,this.Draw=new L.PM.Draw(l),this.Toolbar=new L.PM.Toolbar(l),this.Keyboard=Nr(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(l)},setLang(l="en",f,m="en"){if(l=l.trim().toLowerCase(),!/^[a-z]{2}$/.test(l)){let E=l.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(E){let R=[`${E[1]}_${E[2]}`,`${E[1]}`];for(let X of R)if(Fs[X]){l=X;break}}}let w=L.PM.activeLang;f&&(Fs[l]=(0,sr.default)(Fs[m],f)),L.PM.activeLang=l,this.map.pm.Toolbar.reinit(),this._fireLangChange(w,l,m,Fs[l])},addControls(l){this.Toolbar.addControls(l)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(l="Polygon",f){l==="Poly"&&(l="Polygon"),this.Draw.enable(l,f)},disableDraw(l="Polygon"){l==="Poly"&&(l="Polygon"),this.Draw.disable(l)},setPathOptions(l,f={}){let m=f.ignoreShapes||[],w=f.merge||!1;this.map.pm.Draw.shapes.forEach(E=>{m.indexOf(E)===-1&&this.map.pm.Draw[E].setPathOptions(l,w)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(l){let f=(0,sr.default)(this.globalOptions,l);f.editable&&(f.resizeableCircleMarker=f.editable,delete f.editable);let m=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!f.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),m=!0);let w=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!f.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),w=!0),this.map.pm.Draw.shapes.forEach(E=>{this.map.pm.Draw[E].setOptions(f)}),m&&this.map.pm.Draw.CircleMarker.enable(),w&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(E=>{E.pm.setOptions(f)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=f,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(l=>{l.pm.enabled()&&l.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(l){return this.Draw.Cut.enable(l)},toggleGlobalCutMode(l){return this.Draw.Cut.toggle(l)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(l=!1){let f=L.PM.Utils.findLayers(this.map);if(!l)return f;let m=L.featureGroup();return m._pmTempLayer=!0,f.forEach(w=>{m.addLayer(w)}),m},getGeomanDrawLayers(l=!1){let f=L.PM.Utils.findLayers(this.map).filter(w=>w._drawnByGeoman===!0);if(!l)return f;let m=L.featureGroup();return m._pmTempLayer=!0,f.forEach(w=>{m.addLayer(w)}),m},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(l){this._touchEventCounter===0&&(L.DomEvent.on(l,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(l,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(l){this._touchEventCounter===1&&(L.DomEvent.off(l,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(l,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(l){Qr(this.map)._onMouseMove(this._createMouseEvent("mousemove",l))},_canvasTouchClick(l){let f="";l.type==="touchstart"||l.type==="pointerdown"?f="mousedown":(l.type==="touchend"||l.type==="pointerup"||l.type==="touchcancel"||l.type==="pointercancel")&&(f="mouseup"),f&&Qr(this.map)._onClick(this._createMouseEvent(f,l))},_createMouseEvent(l,f){let m,w=f.touches[0]||f.changedTouches[0];try{m=new MouseEvent(l,{bubbles:f.bubbles,cancelable:f.cancelable,view:f.view,detail:w.detail,screenX:w.screenX,screenY:w.screenY,clientX:w.clientX,clientY:w.clientY,ctrlKey:f.ctrlKey,altKey:f.altKey,shiftKey:f.shiftKey,metaKey:f.metaKey,button:f.button,relatedTarget:f.relatedTarget})}catch{m=document.createEvent("MouseEvents"),m.initMouseEvent(l,f.bubbles,f.cancelable,f.view,w.detail,w.screenX,w.screenY,w.clientX,w.clientY,f.ctrlKey,f.altKey,f.shiftKey,f.metaKey,f.button,f.relatedTarget)}return m}}),fo=Zu,js=L.Control.extend({includes:[Pl],options:{position:"topleft",disableByOtherButtons:!0},initialize(l){this._button=L.Util.extend({},this.options,l)},onAdd(l){return this._map=l,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let l=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),l?l.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(l){return typeof l=="boolean"?this._button.toggleStatus=l:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(l){l&&l.preventDefault(),!this._button.disabled&&(this._button.onClick(l,{button:this,event:l}),this._clicked(l),this._button.afterClick(l,{button:this,event:l}))},_makeButton(l){let f=this.options.position.indexOf("right")>-1?"pos-right":"",m=L.DomUtil.create("div",`button-container  ${f}`,this._container);l.title&&m.setAttribute("title",l.title);let w=L.DomUtil.create("a","leaflet-buttons-control-button",m);w.setAttribute("role","button"),w.setAttribute("tabindex","0"),w.href="#";let E=L.DomUtil.create("div",`leaflet-pm-actions-container ${f}`,m),R=l.actions,X={cancel:{text:Xn("actions.cancel"),title:Xn("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:Xn("actions.finish"),title:Xn("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:Xn("actions.removeLastVertex"),title:Xn("actions.removeLastVertex"),onClick(){this._map.pm.Draw[l.jsClass]._removeLastVertex()}},finish:{text:Xn("actions.finish"),title:Xn("actions.finish"),onClick(ce){this._map.pm.Draw[l.jsClass]._finishShape(ce)}}};l._preparedActions=R.map(ce=>{let xe=typeof ce=="string"?ce:ce.name,We;if(X[xe])We=X[xe];else if(ce.text)We=ce;else return We;let je=L.DomUtil.create("a",`leaflet-pm-action ${f} action-${xe}`,E);if(je.setAttribute("role","button"),je.setAttribute("tabindex","0"),je.href="#",We.title&&(je.title=We.title),je.innerHTML=We.text,L.DomEvent.disableClickPropagation(je),L.DomEvent.on(je,"click",L.DomEvent.stop),We._node=je,!l.disabled&&We.onClick){let vt=kt=>{kt.preventDefault();let Yt="",{buttons:_n}=this._map.pm.Toolbar;for(let Ln in _n)if(_n[Ln]._button===l){Yt=Ln;break}this._fireActionClick(We,Yt,l)};L.DomEvent.addListener(je,"click",vt,this),L.DomEvent.addListener(je,"click",We.onClick,this),L.DomEvent.addListener(je,"click",()=>this._updateActiveAction(l))}return We}),this._updateActiveAction(l),l.toggleStatus&&L.DomUtil.addClass(m,"active");let ne=L.DomUtil.create("div","control-icon",w);return l.iconUrl&&ne.setAttribute("src",l.iconUrl),l.className&&L.DomUtil.addClass(ne,l.className),L.DomEvent.disableClickPropagation(w),L.DomEvent.on(w,"click",L.DomEvent.stop),l.disabled||(L.DomEvent.addListener(w,"click",this._onBtnClick,this),L.DomEvent.addListener(w,"click",this._triggerClick,this)),l.disabled&&(L.DomUtil.addClass(w,"pm-disabled"),w.setAttribute("aria-disabled","true")),m},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let l="",{buttons:f}=this._map.pm.Toolbar;for(let m in f)if(f[m]._button===this._button){l=m;break}this._fireButtonClick(l,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let l="pm-disabled",f=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(f,l),f.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(f,l),f.setAttribute("aria-disabled","false"))},_updateActiveAction(l){var f;(f=l._preparedActions)==null||f.forEach(m=>{m!=null&&m._node&&(m.isActive&&m.isActive.call(this)?L.DomUtil.addClass(m._node,"active-action"):L.DomUtil.removeClass(m._node,"active-action"))})}}),Tl=js;L.Control.PMButton=Tl;var zs=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(l){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(l)},reinit(){let l=this.isVisible;this.removeControls(),this._defineButtons(),l&&this.addControls()},init(l){this.map=l,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(l){let f=`${l}Container`;return this[f]||(this[f]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${l} leaflet-bar leaflet-control`)),this[f]},getButtons(){return this.buttons},addControls(l=this.options){typeof l.editPolygon<"u"&&(l.editMode=l.editPolygon),typeof l.deleteLayer<"u"&&(l.removalMode=l.deleteLayer),L.Util.setOptions(this,l),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let l=this.getButtons(),f={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let m in l){let w=l[m];L.Util.setOptions(w,{className:f.geomanIcons[m]})}},removeControls(){let l=this.getButtons();for(let f in l)l[f].remove();this.isVisible=!1},toggleControls(l=this.options){this.isVisible?this.removeControls():this.addControls(l)},_addButton(l,f){return this.buttons[l]=f,this.options[l]=!!this.options[l]||!1,this.buttons[l]},triggerClickOnToggledButtons(l){for(let f in this.buttons){let m=this.buttons[f];m._button.disableByOtherButtons&&m!==l&&m.toggled()&&m._triggerClick()}},toggleButton(l,f,m=!0){l==="editPolygon"&&(l="editMode"),l==="deleteLayer"&&(l="removalMode");let w=l;return m&&this.triggerClickOnToggledButtons(this.buttons[w]),this.buttons[w]?this.buttons[w].toggle(f):!1},_defineButtons(){let l={className:"control-icon leaflet-pm-icon-marker",title:Xn("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(vt,kt)=>{this.map.pm.Draw[kt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},f={title:Xn("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(vt,kt)=>{this.map.pm.Draw[kt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},m={className:"control-icon leaflet-pm-icon-polyline",title:Xn("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(vt,kt)=>{this.map.pm.Draw[kt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},w={title:Xn("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(vt,kt)=>{this.map.pm.Draw[kt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},E={title:Xn("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(vt,kt)=>{this.map.pm.Draw[kt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},R={title:Xn("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(vt,kt)=>{this.map.pm.Draw[kt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},X={title:Xn("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},ne={title:Xn("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},ce={title:Xn("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(vt,kt)=>{this.map.pm.Draw[kt.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},xe={title:Xn("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},We={title:Xn("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},je={className:"control-icon leaflet-pm-icon-text",title:Xn("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(vt,kt)=>{this.map.pm.Draw[kt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(l)),this._addButton("drawPolyline",new L.Control.PMButton(m)),this._addButton("drawRectangle",new L.Control.PMButton(R)),this._addButton("drawPolygon",new L.Control.PMButton(f)),this._addButton("drawCircle",new L.Control.PMButton(w)),this._addButton("drawCircleMarker",new L.Control.PMButton(E)),this._addButton("drawText",new L.Control.PMButton(je)),this._addButton("editMode",new L.Control.PMButton(X)),this._addButton("dragMode",new L.Control.PMButton(ne)),this._addButton("cutPolygon",new L.Control.PMButton(ce)),this._addButton("removalMode",new L.Control.PMButton(xe)),this._addButton("rotateMode",new L.Control.PMButton(We))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let l=this.getButtons(),f=[];this.options.drawControls===!1&&(f=f.concat(Object.keys(l).filter(m=>!l[m]._button.tool))),this.options.editControls===!1&&(f=f.concat(Object.keys(l).filter(m=>l[m]._button.tool==="edit"))),this.options.optionsControls===!1&&(f=f.concat(Object.keys(l).filter(m=>l[m]._button.tool==="options"))),this.options.customControls===!1&&(f=f.concat(Object.keys(l).filter(m=>l[m]._button.tool==="custom")));for(let m in l)if(this.options[m]&&f.indexOf(m)===-1){let w=l[m]._button.tool;w||(w="draw"),l[m].setPosition(this._getBtnPosition(w)),l[m].addTo(this.map)}},_getBtnPosition(l){return this.options.positions&&this.options.positions[l]?this.options.positions[l]:this.options.position},setBlockPosition(l,f){this.options.positions[l]=f,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(l,f){if(f)typeof f!="object"&&(f={name:f});else throw new TypeError("Button has no name");let m=this._btnNameMapping(l);if(!f.name)throw new TypeError("Button has no name");if(this.buttons[f.name])throw new TypeError("Button with this name already exists");let w=this.map.pm.Draw.createNewDrawInstance(f.name,m);f={...this.buttons[m]._button,...f};let E=this.createCustomControl(f);return{drawInstance:w,control:E}},createCustomControl(l){if(!l.name)throw new TypeError("Button has no name");if(this.buttons[l.name])throw new TypeError("Button with this name already exists");l.onClick||(l.onClick=()=>{}),l.afterClick||(l.afterClick=()=>{}),l.toggle!==!1&&(l.toggle=!0),l.block&&(l.block=l.block.toLowerCase()),(!l.block||l.block==="draw")&&(l.block=""),l.className?l.className.indexOf("control-icon")===-1&&(l.className=`control-icon ${l.className}`):l.className="control-icon";let f={tool:l.block,className:l.className,title:l.title||"",jsClass:l.name,onClick:l.onClick,afterClick:l.afterClick,doToggle:l.toggle,toggleStatus:!1,disableOtherButtons:l.disableOtherButtons??!0,disableByOtherButtons:l.disableByOtherButtons??!0,cssToggle:l.toggle,position:this.options.position,actions:l.actions||[],disabled:!!l.disabled};this.options[l.name]!==!1&&(this.options[l.name]=!0);let m=this._addButton(l.name,new L.Control.PMButton(f));return this.changeControlOrder(),m},controlExists(l){return!!this.getButton(l)},getButton(l){return this.getButtons()[l]},getButtonsInBlock(l){let f={};if(l)for(let m in this.getButtons()){let w=this.getButtons()[m];(w._button.tool===l||l==="draw"&&!w._button.tool)&&(f[m]=w)}return f},changeControlOrder(l=[]){let f=this._shapeMapping(),m=[];l.forEach(R=>{f[R]?m.push(f[R]):m.push(R)});let w=this.getButtons(),E={};m.forEach(R=>{w[R]&&(E[R]=w[R])}),Object.keys(w).filter(R=>!w[R]._button.tool||w[R]._button.tool==="draw").forEach(R=>{m.indexOf(R)===-1&&(E[R]=w[R])}),Object.keys(w).filter(R=>w[R]._button.tool==="edit").forEach(R=>{m.indexOf(R)===-1&&(E[R]=w[R])}),Object.keys(w).filter(R=>w[R]._button.tool==="options").forEach(R=>{m.indexOf(R)===-1&&(E[R]=w[R])}),Object.keys(w).filter(R=>w[R]._button.tool==="custom").forEach(R=>{m.indexOf(R)===-1&&(E[R]=w[R])}),Object.keys(w).forEach(R=>{m.indexOf(R)===-1&&(E[R]=w[R])}),this.map.pm.Toolbar.buttons=E,this._showHideButtons()},getControlOrder(){let l=this.getButtons(),f=[];for(let m in l)f.push(m);return f},changeActionsOfControl(l,f){let m=this._btnNameMapping(l);if(!m)throw new TypeError("No name passed");if(!f)throw new TypeError("No actions passed");if(!this.buttons[m])throw new TypeError("Button with this name not exists");this.buttons[m]._button.actions=f,this.changeControlOrder()},setButtonDisabled(l,f){let m=this._btnNameMapping(l);f?this.buttons[m].disable():this.buttons[m].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(l){let f=this._shapeMapping();return f[l]?f[l]:l}}),rl=zs,il=h(jr()),ei={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(l){l.forEach(f=>{if(Array.isArray(f)){this._assignEvents(f);return}f.off("drag",this._handleSnapping,this),f.on("drag",this._handleSnapping,this),f.off("dragend",this._cleanupSnapping,this),f.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(l){if(l){let f=l.target;f._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(f=>{f.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(l){var ne,ce,xe;let f=l.target;if(f._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((ne=l==null?void 0:l.originalEvent)==null?void 0:ne.altKey)||((xe=(ce=this._map)==null?void 0:ce.pm)==null?void 0:xe.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let m=this._calcClosestLayer(f.getLatLng(),this._snapList);if(Object.keys(m).length===0)return!1;let w=m.layer instanceof L.Marker||m.layer instanceof L.CircleMarker||!this.options.snapSegment,E;w?E=m.latlng:E=this._checkPrioritiySnapping(m);let R=this.options.snapDistance,X={marker:f,shape:this._shape,snapLatLng:E,segment:m.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:m.layer,distance:m.distance};if(this._fireSnapDrag(X.marker,X),this._fireSnapDrag(this._layer,X),m.distance<R){f._orgLatLng=f.getLatLng(),f.setLatLng(E),f._snapped=!0,f._snapInfo=X;let We=()=>{this._snapLatLng=E,this._fireSnap(f,X),this._fireSnap(this._layer,X)},je=this._snapLatLng||{},vt=E||{};(je.lat!==vt.lat||je.lng!==vt.lng)&&We()}else this._snapLatLng&&(this._unsnap(X),f._snapped=!1,f._snapInfo=void 0,this._fireUnsnap(X.marker,X),this._fireUnsnap(this._layer,X));return!0},_createSnapList(){let l=[],f=[],m=this._map;m.off("layerremove",this._handleSnapLayerRemoval,this),m.on("layerremove",this._handleSnapLayerRemoval,this),m.eachLayer(w=>{if((w instanceof L.Polyline||w instanceof L.Marker||w instanceof L.CircleMarker||w instanceof L.ImageOverlay)&&w.options.snapIgnore!==!0){if(w.options.snapIgnore===void 0&&(!L.PM.optIn&&w.options.pmIgnore===!0||L.PM.optIn&&w.options.pmIgnore!==!1))return;(w instanceof L.Circle||w instanceof L.CircleMarker)&&w.pm&&w.pm._hiddenPolyCircle?l.push(w.pm._hiddenPolyCircle):w instanceof L.ImageOverlay&&(w=L.rectangle(w.getBounds())),l.push(w);let E=L.polyline([],{color:"red",pmIgnore:!0});E._pmTempLayer=!0,f.push(E),(w instanceof L.Circle||w instanceof L.CircleMarker)&&f.push(E)}}),l=l.filter(w=>this._layer!==w),l=l.filter(w=>w._latlng||w._latlngs&&Hi(w._latlngs)),l=l.filter(w=>!w._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let w=L.polyline([],{color:"red",pmIgnore:!0});w._pmTempLayer=!0,f.push(w)}),this._snapList=l.concat(this._otherSnapLayers)):this._snapList=l,this.debugIndicatorLines=f},_handleSnapLayerRemoval({layer:l}){if(!l._leaflet_id)return;let f=this._snapList.findIndex(m=>m._leaflet_id===l._leaflet_id);f>-1&&this._snapList.splice(f,1)},_calcClosestLayer(l,f){return this._calcClosestLayers(l,f,1)[0]},_calcClosestLayers(l,f,m=1){let w=[],E={};f.forEach((X,ne)=>{var xe;if(X._parentCopy&&X._parentCopy===this._layer||((xe=X.getLatLngs)==null?void 0:xe.call(X).flat(5).length)<2)return;let ce=this._calcLayerDistances(l,X);if(ce.distance=Math.floor(ce.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[ne]){let We=L.polyline([],{color:"red",pmIgnore:!0});We._pmTempLayer=!0,this.debugIndicatorLines[ne]=We}this.debugIndicatorLines[ne].setLatLngs([l,ce.latlng])}m===1&&(E.distance===void 0||ce.distance-5<=E.distance)?(ce.distance+5<E.distance&&(w=[]),E=ce,E.layer=X,w.push(E)):m!==1&&(E={},E=ce,E.layer=X,w.push(E))}),m!==1&&(w=w.sort((X,ne)=>X.distance-ne.distance)),m===-1&&(m=w.length);let R=this._getClosestLayerByPriority(w,m);return L.Util.isArray(R)?R:[R]},_calcLayerDistances(l,f){let m=this._map,w=f instanceof L.Marker||f instanceof L.CircleMarker,E=f instanceof L.Polygon,R=l;if(w){let X=f.getLatLng();return{latlng:{...X},distance:this._getDistance(m,X,R)}}return this._calcLatLngDistances(R,f.getLatLngs(),m,E)},_calcLatLngDistances(l,f,m,w=!1){let E,R,X,ne=ce=>{ce.forEach((xe,We)=>{if(Array.isArray(xe)){ne(xe);return}if(this.options.snapSegment){let je=xe,vt;w?vt=We+1===ce.length?0:We+1:vt=We+1===ce.length?void 0:We+1;let kt=ce[vt];if(kt){let Yt=this._getDistanceToSegment(m,l,je,kt);(R===void 0||Yt<R)&&(R=Yt,X=[je,kt])}}else{let je=this._getDistance(m,l,xe);(R===void 0||je<R)&&(R=je,E=xe)}})};return ne(f),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(m,l,X[0],X[1])},segment:X,distance:R}:{latlng:E,distance:R}},_getClosestLayerByPriority(l,f=1){l=l.sort((X,ne)=>X._leaflet_id-ne._leaflet_id);let m=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],w=this._map.pm.globalOptions.snappingOrder||[],E=0,R={};return w.concat(m).forEach(X=>{R[X]||(E+=1,R[X]=E)}),l.sort(Ml("instanceofShape",R)),f===1?l[0]||{}:l.slice(0,f)},_checkPrioritiySnapping(l){let f=this._map,m=l.segment[0],w=l.segment[1],E=l.latlng,R=E;if(this.options.snapVertex){let X=this._getDistance(f,m,E),ne=this._getDistance(f,w,E),ce=X<ne?m:w,xe=X<ne?X:ne;if(this.options.snapMiddle){let je=L.PM.Utils.calcMiddleLatLng(f,m,w),vt=this._getDistance(f,je,E);vt<X&&vt<ne&&(ce=je,xe=vt)}let We=this.options.snapDistance;xe<We&&(R=ce)}return{...R}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(l,f,m,w){let E=l.getMaxZoom();E===1/0&&(E=l.getZoom());let R=l.project(f,E),X=l.project(m,E),ne=l.project(w,E),ce=L.LineUtil.closestPointOnSegment(R,X,ne);return l.unproject(ce,E)},_getDistanceToSegment(l,f,m,w){let E=l.latLngToContainerPoint(f),R=l.latLngToContainerPoint(m),X=l.latLngToContainerPoint(w);return L.LineUtil.pointToSegmentDistance(E,R,X)},_getDistance(l,f,m){return l.latLngToContainerPoint(f).distanceTo(l.latLngToContainerPoint(m))}},gs=ei,da=L.Class.extend({includes:[gs,Pl],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(l){L.Util.setOptions(this,l),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(l){let f=new L.Icon.Default;f.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=f,this._map=l,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(m=>{this[m]=new L.PM.Draw[m](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(l,f=!1){f?this.options.pathOptions=(0,il.default)(this.options.pathOptions,l):this.options.pathOptions=l},getShapes(){return this.shapes},getShape(){return this._shape},enable(l,f){if(!l)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[l].enable(f)},disable(){this.shapes.forEach(l=>{this[l].disable()})},addControls(){this.shapes.forEach(l=>{this[l].addButton()})},getActiveShape(){let l;return this.shapes.forEach(f=>{this[f]._enabled&&(l=f)}),l},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let l=[];this._map.eachLayer(f=>{(f instanceof L.Polyline||f instanceof L.Marker||f instanceof L.Circle||f instanceof L.CircleMarker||f instanceof L.ImageOverlay)&&(f._pmTempLayer||l.push(f))}),this._enabled?l.forEach(f=>{L.PM.Utils.disablePopup(f)}):l.forEach(f=>{L.PM.Utils.enablePopup(f)})},createNewDrawInstance(l,f){let m=this._getShapeFromBtnName(f);if(this[l])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[m])throw new TypeError(`There is no class L.PM.Draw.${m}`);return this[l]=new L.PM.Draw[m](this._map),this[l].toolbarButtonName=l,this[l]._shape=l,this.shapes.push(l),this[f]&&this[l].setOptions(this[f].options),this[l].setOptions(this[l].options),this[l]},_getShapeFromBtnName(l){let f={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return f[l]?f[l]:this[l]?this[l]._shape:l},_finishLayer(l){l.pm&&(l.pm.setOptions(this.options),l.pm._shape=this._shape,l.pm._map=this._map),this._addDrawnLayerProp(l)},_addDrawnLayerProp(l){l._drawnByGeoman=!0},_setPane(l,f){f==="layerPane"?l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":f==="vertexPane"?l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":f==="markerPane"&&(l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),Gi=da;Gi.Marker=Gi.extend({initialize(l){this._map=l,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(l){L.Util.setOptions(this,l),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(Xn("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(f=>{this.isRelevantMarker(f)&&f.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(l=>{this.isRelevantMarker(l)&&l.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},isRelevantMarker(l){return l instanceof L.Marker&&l.pm&&!l._pmTempLayer&&!l.pm._initTextMarker},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this.options.snappable){let f=l;f.target=this._hintMarker,this._handleSnapping(f)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(l){if(!l.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let f=this._hintMarker.getLatLng(),m=new L.Marker(f,this.options.markerStyle);this._setPane(m,"markerPane"),this._finishLayer(m),m.pm||(m.options.draggable=!1),m.addTo(this._map.pm._getContainingLayer()),m.pm&&this.options.markerEditable?m.pm.enable():m.dragging&&m.dragging.disable(),this._fireCreate(m),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var l,f;(l=this.options.markerStyle)!=null&&l.icon&&((f=this._hintMarker)==null||f.setIcon(this.options.markerStyle.icon))}});var O=63710088e-1,ye={centimeters:O*100,centimetres:O*100,degrees:O/111325,feet:O*3.28084,inches:O*39.37,kilometers:O/1e3,kilometres:O/1e3,meters:O,metres:O,miles:O/1609.344,millimeters:O*1e3,millimetres:O*1e3,nauticalmiles:O/1852,radians:1,yards:O*1.0936};function He(l,f,m){m===void 0&&(m={});var w={type:"Feature"};return(m.id===0||m.id)&&(w.id=m.id),m.bbox&&(w.bbox=m.bbox),w.properties=f||{},w.geometry=l,w}function ct(l,f,m){if(m===void 0&&(m={}),!l)throw new Error("coordinates is required");if(!Array.isArray(l))throw new Error("coordinates must be an Array");if(l.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!or(l[0])||!or(l[1]))throw new Error("coordinates must contain numbers");var w={type:"Point",coordinates:l};return He(w,f,m)}function xt(l,f,m){if(m===void 0&&(m={}),l.length<2)throw new Error("coordinates must be an array of two or more positions");var w={type:"LineString",coordinates:l};return He(w,f,m)}function It(l,f){f===void 0&&(f={});var m={type:"FeatureCollection"};return f.id&&(m.id=f.id),f.bbox&&(m.bbox=f.bbox),m.features=l,m}function cn(l,f){f===void 0&&(f="kilometers");var m=ye[f];if(!m)throw new Error(f+" units is invalid");return l*m}function kn(l,f){f===void 0&&(f="kilometers");var m=ye[f];if(!m)throw new Error(f+" units is invalid");return l/m}function Nn(l){var f=l%(2*Math.PI);return f*180/Math.PI}function Kn(l){var f=l%360;return f*Math.PI/180}function or(l){return!isNaN(l)&&l!==null&&!Array.isArray(l)}function Pr(l){var f,m,w={type:"FeatureCollection",features:[]};if(l.type==="Feature"?m=l.geometry:m=l,m.type==="LineString")f=[m.coordinates];else if(m.type==="MultiLineString")f=m.coordinates;else if(m.type==="MultiPolygon")f=[].concat.apply([],m.coordinates);else if(m.type==="Polygon")f=m.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return f.forEach(function(E){f.forEach(function(R){for(var X=0;X<E.length-1;X++)for(var ne=X;ne<R.length-1;ne++)if(!(E===R&&(Math.abs(X-ne)===1||X===0&&ne===E.length-2&&E[X][0]===E[E.length-1][0]&&E[X][1]===E[E.length-1][1]))){var ce=yi(E[X][0],E[X][1],E[X+1][0],E[X+1][1],R[ne][0],R[ne][1],R[ne+1][0],R[ne+1][1]);ce&&w.features.push(ct([ce[0],ce[1]]))}})}),w}function yi(l,f,m,w,E,R,X,ne){var ce,xe,We,je,vt,kt={x:null,y:null,onLine1:!1,onLine2:!1};return ce=(ne-R)*(m-l)-(X-E)*(w-f),ce===0?kt.x!==null&&kt.y!==null?kt:!1:(xe=f-R,We=l-E,je=(X-E)*xe-(ne-R)*We,vt=(m-l)*xe-(w-f)*We,xe=je/ce,We=vt/ce,kt.x=l+xe*(m-l),kt.y=f+xe*(w-f),xe>=0&&xe<=1&&(kt.onLine1=!0),We>=0&&We<=1&&(kt.onLine2=!0),kt.onLine1&&kt.onLine2?[kt.x,kt.y]:!1)}Gi.Line=Gi.extend({initialize(l){this._map=l,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(l){L.Util.setOptions(this,l),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Xn("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},_syncHintLine(){let l=this._layer.getLatLngs();if(l.length>0){let f=l[l.length-1];this._hintline.setLatLngs([f,this._hintMarker.getLatLng()])}},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this.options.snappable){let m=l;m.target=this._hintMarker,this._handleSnapping(m)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let f=this._layer._defaultShape().slice();f.push(this._hintMarker.getLatLng()),this._change(f)},hasSelfIntersection(){return Pr(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(l,f){let m=L.polyline(this._layer.getLatLngs());l&&(f||(f=this._hintMarker.getLatLng()),m.addLatLng(f));let w=Pr(m.toGeoJSON(15));this._doesSelfIntersect=w.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(w,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(l){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,l.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let f=this._hintMarker.getLatLng(),m=this._layer.getLatLngs(),w=m[m.length-1];if(f.equals(m[0])||m.length>0&&f.equals(w)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:f,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(f);let E=this._createMarker(f);this._setTooltipText(),this._setHintLineAfterNewVertex(f),this._fireVertexAdded(E,void 0,f,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(l)},_setHintLineAfterNewVertex(l){this._hintline.setLatLngs([l,l])},_removeLastVertex(){let l=this._markers;if(l.length<=1){this.disable();return}let f=this._layer.getLatLngs(),m=l[l.length-1],{indexPath:w}=L.PM.Utils.findDeepMarkerIndex(l,m);l.pop(),this._layerGroup.removeLayer(m);let E=l[l.length-1],R=f.indexOf(E.getLatLng());f=f.slice(0,R+1),this._layer.setLatLngs(f),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(m,w,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let l=this._layer.getLatLngs();if(l.length<=1)return;let f=L.polyline(l,this.options.pathOptions);this._setPane(f,"layerPane"),this._finishLayer(f),f.addTo(this._map.pm._getContainingLayer()),this._fireCreate(f),this.options.snappable&&this._cleanupSnapping();let m=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(m))},_createMarker(l){let f=new L.Marker(l,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(f,"vertexPane"),f._pmTempLayer=!0,this._layerGroup.addLayer(f),this._markers.push(f),f.on("click",this._finishShape,this),f},_setTooltipText(){let{length:l}=this._layer.getLatLngs().flat(),f="";l<=1?f=Xn("tooltips.continueLine"):f=Xn("tooltips.finishLine"),this._hintMarker.setTooltipContent(f)},_change(l){this._fireChange(l,"Draw")},setStyle(){var l,f;(l=this._layer)==null||l.setStyle(this.options.templineStyle),(f=this._hintline)==null||f.setStyle(this.options.hintlineStyle)}}),Gi.Polygon=Gi.Line.extend({initialize(l){this._map=l,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(l){L.PM.Draw.Line.prototype.enable.call(this,l),this._layer.pm._shape="Polygon"},_createMarker(l){let f=new L.Marker(l,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(f,"vertexPane"),f._pmTempLayer=!0,this._layerGroup.addLayer(f),this._markers.push(f),this._layer.getLatLngs().flat().length===1?(f.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(f)-1,this.options.snappable&&this._cleanupSnapping()):f.on("click",()=>1),f},_setTooltipText(){let{length:l}=this._layer.getLatLngs().flat(),f="";l<=2?f=Xn("tooltips.continueLine"):f=Xn("tooltips.finishPoly"),this._hintMarker.setTooltipContent(f)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let l=this._layer.getLatLngs();if(l.length<=2)return;let f=L.polygon(l,this.options.pathOptions);this._setPane(f,"layerPane"),this._finishLayer(f),f.addTo(this._map.pm._getContainingLayer()),this._fireCreate(f),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let m=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(m))}}),Gi.Rectangle=Gi.extend({initialize(l){this._map=l,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(l){if(L.Util.setOptions(this,l),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Xn("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let f=0;f<2;f+=1){let m=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(m,"vertexPane"),m._pmTempLayer=!0,this._layerGroup.addLayer(m),this._styleMarkers.push(m)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},_placeStartingMarkers(l){this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let f=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(f),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(m=>{L.DomUtil.addClass(m._icon,"visible"),m.setLatLng(f)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(Xn("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let l=this._startMarker.getLatLng();l&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([l,l]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this.options.snappable){let m=l;m.target=this._hintMarker,this._handleSnapping(m)}let f=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(f,"Draw")},_syncRectangleSize(){let l=kl(this._startMarker.getLatLng(),this._map),f=kl(this._hintMarker.getLatLng(),this._map),m=L.PM.Utils._getRotatedRectangle(l,f,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(m),this.options.cursorMarker&&this._styleMarkers){let w=[];m.forEach(E=>{!E.equals(l,1e-8)&&!E.equals(f,1e-8)&&w.push(E)}),w.forEach((E,R)=>{try{this._styleMarkers[R].setLatLng(E)}catch{}})}},_findCorners(){let l=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(l[0],l[2],this.options.rectangleAngle||0,this._map)},_finishShape(l){this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let f=this._hintMarker.getLatLng(),m=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||m.equals(f))return;let w=L.rectangle([m,f],this.options.pathOptions);if(this.options.rectangleAngle){let R=L.PM.Utils._getRotatedRectangle(m,f,this.options.rectangleAngle||0,this._map);w.setLatLngs(R),w.pm&&w.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(w,"layerPane"),this._finishLayer(w),w.addTo(this._map.pm._getContainingLayer()),this._fireCreate(w);let E=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(E))},setStyle(){var l;(l=this._layer)==null||l.setStyle(this.options.pathOptions)}}),Gi.CircleMarker=Gi.extend({initialize(l){this._map=l,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(l){if(L.Util.setOptions(this,l),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let f={};L.extend(f,this.options.templineStyle),f.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),f),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Xn("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(Xn("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(l=>{this.isRelevantMarker(l)&&l.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(l=>{this.isRelevantMarker(l)&&l.pm.disable()})},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},_placeCenterMarker(l){this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let f=this._hintMarker.getLatLng();this._centerMarker.setLatLng(f),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let l=this._centerMarker.getLatLng();l&&(this._layer.setLatLng(l),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(Xn("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let l=this._centerMarker.getLatLng(),f=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([l,f])},_syncCircleRadius(){let l=this._centerMarker.getLatLng(),f=this._hintMarker.getLatLng(),m=this._distanceCalculation(l,f);this.options[this._minRadiusOption]&&m<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&m>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(m)},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let m=l;m.target=this._hintMarker,this._handleSnapping(m)}this._handleHintMarkerSnapping();let f=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(f,"Draw")},isRelevantMarker(l){return l instanceof L.CircleMarker&&!(l instanceof L.Circle)&&l.pm&&!l._pmTempLayer},_createMarker(l){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!l.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let f=this._hintMarker.getLatLng(),m=new this._BaseCircleClass(f,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(m,"layerPane"),this._finishLayer(m),m.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(m),this._fireCreate(m),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(l){l.pm&&this.options.markerEditable&&l.pm.enable()},_finishShape(l){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let f=this._centerMarker.getLatLng(),m=this._defaultRadius;if(this.options[this._editableOption]){let X=this._hintMarker.getLatLng();m=this._distanceCalculation(f,X),this.options[this._minRadiusOption]&&m<this.options[this._minRadiusOption]?m=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&m>this.options[this._maxRadiusOption]&&(m=this.options[this._maxRadiusOption])}let w={...this.options.pathOptions,radius:m},E=new this._BaseCircleClass(f,w);this._setPane(E,"layerPane"),this._finishLayer(E),E.addTo(this._map.pm._getContainingLayer()),E.pm&&E.pm._updateHiddenPolyCircle(),this._fireCreate(E);let R=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(R))},_getNewDestinationOfHintMarker(){let l=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return l;let f=this._centerMarker.getLatLng(),m=this._distanceCalculation(f,l);this.options[this._minRadiusOption]&&m<this.options[this._minRadiusOption]?l=Al(this._map,f,l,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&m>this.options[this._maxRadiusOption]&&(l=Al(this._map,f,l,this._getMaxDistanceInMeter()))}return l},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let l=this._centerMarker.getLatLng(),f=this._hintMarker.getLatLng(),m=this._distanceCalculation(l,f);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&m<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&m>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var f,m;let l={};L.extend(l,this.options.templineStyle),this.options[this._editableOption]&&(l.radius=0),(f=this._layer)==null||f.setStyle(l),(m=this._hintline)==null||m.setStyle(this.options.hintlineStyle)},_distanceCalculation(l,f){return this._map.project(l).distanceTo(this._map.project(f))}}),Gi.Circle=Gi.CircleMarker.extend({initialize(l){this._map=l,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(l,f){return this._map.distance(l,f)}});function Zr(l){if(!l)throw new Error("coord is required");if(!Array.isArray(l)){if(l.type==="Feature"&&l.geometry!==null&&l.geometry.type==="Point")return l.geometry.coordinates;if(l.type==="Point")return l.coordinates}if(Array.isArray(l)&&l.length>=2&&!Array.isArray(l[0])&&!Array.isArray(l[1]))return l;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ti(l){if(Array.isArray(l))return l;if(l.type==="Feature"){if(l.geometry!==null)return l.geometry.coordinates}else if(l.coordinates)return l.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function qi(l){return l.type==="Feature"?l.geometry:l}function Ji(l,f){return l.type==="FeatureCollection"?"FeatureCollection":l.type==="GeometryCollection"?"GeometryCollection":l.type==="Feature"&&l.geometry!==null?l.geometry.type:l.type}function ms(l,f,m){if(l!==null)for(var w,E,R,X,ne,ce,xe,We=0,je=0,vt,kt=l.type,Yt=kt==="FeatureCollection",_n=kt==="Feature",Ln=Yt?l.features.length:1,Qn=0;Qn<Ln;Qn++){xe=Yt?l.features[Qn].geometry:_n?l.geometry:l,vt=xe?xe.type==="GeometryCollection":!1,ne=vt?xe.geometries.length:1;for(var qe=0;qe<ne;qe++){var nt=0,ht=0;if(X=vt?xe.geometries[qe]:xe,X!==null){ce=X.coordinates;var Nt=X.type;switch(We=0,Nt){case null:break;case"Point":if(f(ce,je,Qn,nt,ht)===!1)return!1;je++,nt++;break;case"LineString":case"MultiPoint":for(w=0;w<ce.length;w++){if(f(ce[w],je,Qn,nt,ht)===!1)return!1;je++,Nt==="MultiPoint"&&nt++}Nt==="LineString"&&nt++;break;case"Polygon":case"MultiLineString":for(w=0;w<ce.length;w++){for(E=0;E<ce[w].length-We;E++){if(f(ce[w][E],je,Qn,nt,ht)===!1)return!1;je++}Nt==="MultiLineString"&&nt++,Nt==="Polygon"&&ht++}Nt==="Polygon"&&nt++;break;case"MultiPolygon":for(w=0;w<ce.length;w++){for(ht=0,E=0;E<ce[w].length;E++){for(R=0;R<ce[w][E].length-We;R++){if(f(ce[w][E][R],je,Qn,nt,ht)===!1)return!1;je++}ht++}nt++}break;case"GeometryCollection":for(w=0;w<X.geometries.length;w++)if(ms(X.geometries[w],f)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Ar(l,f){if(l.type==="Feature")f(l,0);else if(l.type==="FeatureCollection")for(var m=0;m<l.features.length&&f(l.features[m],m)!==!1;m++);}function Co(l,f,m){var w=m;return Ar(l,function(E,R){R===0&&m===void 0?w=E:w=f(w,E,R)}),w}function ol(l,f){var m,w,E,R,X,ne,ce,xe,We,je,vt=0,kt=l.type==="FeatureCollection",Yt=l.type==="Feature",_n=kt?l.features.length:1;for(m=0;m<_n;m++){for(ne=kt?l.features[m].geometry:Yt?l.geometry:l,xe=kt?l.features[m].properties:Yt?l.properties:{},We=kt?l.features[m].bbox:Yt?l.bbox:void 0,je=kt?l.features[m].id:Yt?l.id:void 0,ce=ne?ne.type==="GeometryCollection":!1,X=ce?ne.geometries.length:1,E=0;E<X;E++){if(R=ce?ne.geometries[E]:ne,R===null){if(f(null,vt,xe,We,je)===!1)return!1;continue}switch(R.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(f(R,vt,xe,We,je)===!1)return!1;break}case"GeometryCollection":{for(w=0;w<R.geometries.length;w++)if(f(R.geometries[w],vt,xe,We,je)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}vt++}}function Uo(l,f){ol(l,function(m,w,E,R,X){var ne=m===null?null:m.type;switch(ne){case null:case"Point":case"LineString":case"Polygon":return f(He(m,E,{bbox:R,id:X}),w,0)===!1?!1:void 0}var ce;switch(ne){case"MultiPoint":ce="Point";break;case"MultiLineString":ce="LineString";break;case"MultiPolygon":ce="Polygon";break}for(var xe=0;xe<m.coordinates.length;xe++){var We=m.coordinates[xe],je={type:ce,coordinates:We};if(f(He(je,E),w,xe)===!1)return!1}})}function Yl(l){if(!l)throw new Error("geojson is required");var f=[];return Uo(l,function(m){Xs(m,f)}),It(f)}function Xs(l,f){var m=[],w=l.geometry;if(w!==null){switch(w.type){case"Polygon":m=ti(w);break;case"LineString":m=[ti(w)]}m.forEach(function(E){var R=_u(E,l.properties);R.forEach(function(X){X.id=f.length,f.push(X)})})}}function _u(l,f){var m=[];return l.reduce(function(w,E){var R=xt([w,E],f);return R.bbox=ja(w,E),m.push(R),E}),m}function ja(l,f){var m=l[0],w=l[1],E=f[0],R=f[1],X=m<E?m:E,ne=w<R?w:R,ce=m>E?m:E,xe=w>R?w:R;return[X,ne,ce,xe]}var za=Yl,Qi=h(zi(),1);function Js(l,f){var m={},w=[];if(l.type==="LineString"&&(l=He(l)),f.type==="LineString"&&(f=He(f)),l.type==="Feature"&&f.type==="Feature"&&l.geometry!==null&&f.geometry!==null&&l.geometry.type==="LineString"&&f.geometry.type==="LineString"&&l.geometry.coordinates.length===2&&f.geometry.coordinates.length===2){var E=vs(l,f);return E&&w.push(E),It(w)}var R=(0,Qi.default)();return R.load(za(f)),Ar(za(l),function(X){Ar(R.search(X),function(ne){var ce=vs(X,ne);if(ce){var xe=ti(ce).join(",");m[xe]||(m[xe]=!0,w.push(ce))}})}),It(w)}function vs(l,f){var m=ti(l),w=ti(f);if(m.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(w.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var E=m[0][0],R=m[0][1],X=m[1][0],ne=m[1][1],ce=w[0][0],xe=w[0][1],We=w[1][0],je=w[1][1],vt=(je-xe)*(X-E)-(We-ce)*(ne-R),kt=(We-ce)*(R-xe)-(je-xe)*(E-ce),Yt=(X-E)*(R-xe)-(ne-R)*(E-ce);if(vt===0)return null;var _n=kt/vt,Ln=Yt/vt;if(_n>=0&&_n<=1&&Ln>=0&&Ln<=1){var Qn=E+_n*(X-E),qe=R+_n*(ne-R);return ct([Qn,qe])}return null}var es=Js,sl=h(zi(),1);function Po(l,f,m){m===void 0&&(m={});var w=Zr(l),E=Zr(f),R=Kn(E[1]-w[1]),X=Kn(E[0]-w[0]),ne=Kn(w[1]),ce=Kn(E[1]),xe=Math.pow(Math.sin(R/2),2)+Math.pow(Math.sin(X/2),2)*Math.cos(ne)*Math.cos(ce);return cn(2*Math.atan2(Math.sqrt(xe),Math.sqrt(1-xe)),m.units)}var $o=Po;function Vo(l){var f=l[0],m=l[1],w=l[2],E=l[3],R=$o(l.slice(0,2),[w,m]),X=$o(l.slice(0,2),[f,E]);if(R>=X){var ne=(m+E)/2;return[f,ne-(w-f)/2,w,ne+(w-f)/2]}else{var ce=(f+w)/2;return[ce-(E-m)/2,m,ce+(E-m)/2,E]}}var Ku=Vo;function lo(l){var f=[1/0,1/0,-1/0,-1/0];return ms(l,function(m){f[0]>m[0]&&(f[0]=m[0]),f[1]>m[1]&&(f[1]=m[1]),f[2]<m[0]&&(f[2]=m[0]),f[3]<m[1]&&(f[3]=m[1])}),f}lo.default=lo;var pa=lo;function Ao(l,f){f===void 0&&(f={});var m=f.precision,w=f.coordinates,E=f.mutate;if(m=m==null||isNaN(m)?6:m,w=w==null||isNaN(w)?3:w,!l)throw new Error("<geojson> is required");if(typeof m!="number")throw new Error("<precision> must be a number");if(typeof w!="number")throw new Error("<coordinates> must be a number");(E===!1||E===void 0)&&(l=JSON.parse(JSON.stringify(l)));var R=Math.pow(10,m);return ms(l,function(X){Mo(X,R,w)}),l}function Mo(l,f,m){l.length>m&&l.splice(m,l.length);for(var w=0;w<l.length;w++)l[w]=Math.round(l[w]*f)/f;return l}var ga=Ao;function ma(l,f,m){if(m===void 0&&(m={}),m.final===!0)return ko(l,f);var w=Zr(l),E=Zr(f),R=Kn(w[0]),X=Kn(E[0]),ne=Kn(w[1]),ce=Kn(E[1]),xe=Math.sin(X-R)*Math.cos(ce),We=Math.cos(ne)*Math.sin(ce)-Math.sin(ne)*Math.cos(ce)*Math.cos(X-R);return Nn(Math.atan2(xe,We))}function ko(l,f){var m=ma(f,l);return m=(m+180)%360,m}function po(l,f,m,w){w===void 0&&(w={});var E=Zr(l),R=Kn(E[0]),X=Kn(E[1]),ne=Kn(m),ce=kn(f,w.units),xe=Math.asin(Math.sin(X)*Math.cos(ce)+Math.cos(X)*Math.sin(ce)*Math.cos(ne)),We=R+Math.atan2(Math.sin(ne)*Math.sin(ce)*Math.cos(X),Math.cos(ce)-Math.sin(X)*Math.sin(xe)),je=Nn(We),vt=Nn(xe);return ct([je,vt],w.properties)}function Qs(l,f,m){m===void 0&&(m={});var w=ct([1/0,1/0],{dist:1/0}),E=0;return Uo(l,function(R){for(var X=ti(R),ne=0;ne<X.length-1;ne++){var ce=ct(X[ne]);ce.properties.dist=$o(f,ce,m);var xe=ct(X[ne+1]);xe.properties.dist=$o(f,xe,m);var We=$o(ce,xe,m),je=Math.max(ce.properties.dist,xe.properties.dist),vt=ma(ce,xe),kt=po(f,je,vt+90,m),Yt=po(f,je,vt-90,m),_n=es(xt([kt.geometry.coordinates,Yt.geometry.coordinates]),xt([ce.geometry.coordinates,xe.geometry.coordinates])),Ln=null;_n.features.length>0&&(Ln=_n.features[0],Ln.properties.dist=$o(f,Ln,m),Ln.properties.location=E+$o(ce,Ln,m)),ce.properties.dist<w.properties.dist&&(w=ce,w.properties.index=ne,w.properties.location=E),xe.properties.dist<w.properties.dist&&(w=xe,w.properties.index=ne+1,w.properties.location=E+We),Ln&&Ln.properties.dist<w.properties.dist&&(w=Ln,w.properties.index=ne),E+=We}}),w}var ys=Qs;function To(l,f){if(!l)throw new Error("line is required");if(!f)throw new Error("splitter is required");var m=Ji(l),w=Ji(f);if(m!=="LineString")throw new Error("line must be LineString");if(w==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(w==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var E=ga(f,{precision:7});switch(w){case"Point":return Ht(l,E);case"MultiPoint":return _t(l,E);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return _t(l,es(l,E))}}function _t(l,f){var m=[],w=(0,sl.default)();return Uo(f,function(E){if(m.forEach(function(ne,ce){ne.id=ce}),!m.length)m=Ht(l,E).features,m.forEach(function(ne){ne.bbox||(ne.bbox=Ku(pa(ne)))}),w.load(It(m));else{var R=w.search(E);if(R.features.length){var X=Mt(E,R);m=m.filter(function(ne){return ne.id!==X.id}),w.remove(X),Ar(Ht(X,E),function(ne){m.push(ne),w.insert(ne)})}}}),It(m)}function Ht(l,f){var m=[],w=ti(l)[0],E=ti(l)[l.geometry.coordinates.length-1];if(Pn(w,Zr(f))||Pn(E,Zr(f)))return It([l]);var R=(0,sl.default)(),X=za(l);R.load(X);var ne=R.search(f);if(!ne.features.length)return It([l]);var ce=Mt(f,ne),xe=[w],We=Co(X,function(je,vt,kt){var Yt=ti(vt)[1],_n=Zr(f);return kt===ce.id?(je.push(_n),m.push(xt(je)),Pn(_n,Yt)?[_n]:[_n,Yt]):(je.push(Yt),je)},xe);return We.length>1&&m.push(xt(We)),It(m)}function Mt(l,f){if(!f.features.length)throw new Error("lines must contain features");if(f.features.length===1)return f.features[0];var m,w=1/0;return Ar(f,function(E){var R=ys(E,l),X=R.properties.dist;X<w&&(m=E,w=X)}),m}function Pn(l,f){return l[0]===f[0]&&l[1]===f[1]}var Un=To;function lr(l,f,m){if(m===void 0&&(m={}),!l)throw new Error("point is required");if(!f)throw new Error("polygon is required");var w=Zr(l),E=qi(f),R=E.type,X=f.bbox,ne=E.coordinates;if(X&&ni(w,X)===!1)return!1;R==="Polygon"&&(ne=[ne]);for(var ce=!1,xe=0;xe<ne.length&&!ce;xe++)if(xi(w,ne[xe][0],m.ignoreBoundary)){for(var We=!1,je=1;je<ne[xe].length&&!We;)xi(w,ne[xe][je],!m.ignoreBoundary)&&(We=!0),je++;We||(ce=!0)}return ce}function xi(l,f,m){var w=!1;f[0][0]===f[f.length-1][0]&&f[0][1]===f[f.length-1][1]&&(f=f.slice(0,f.length-1));for(var E=0,R=f.length-1;E<f.length;R=E++){var X=f[E][0],ne=f[E][1],ce=f[R][0],xe=f[R][1],We=l[1]*(X-ce)+ne*(ce-l[0])+xe*(l[0]-X)===0&&(X-l[0])*(ce-l[0])<=0&&(ne-l[1])*(xe-l[1])<=0;if(We)return!m;var je=ne>l[1]!=xe>l[1]&&l[0]<(ce-X)*(l[1]-ne)/(xe-ne)+X;je&&(w=!w)}return w}function ni(l,f){return f[0]<=l[0]&&f[1]<=l[1]&&f[2]>=l[0]&&f[3]>=l[1]}function Bl(l,f,m){m===void 0&&(m={});for(var w=Zr(l),E=ti(f),R=0;R<E.length-1;R++){var X=!1;if(m.ignoreEndVertices&&(R===0&&(X="start"),R===E.length-2&&(X="end"),R===0&&R+1===E.length-1&&(X="both")),Ho(E[R],E[R+1],w,X,typeof m.epsilon>"u"?null:m.epsilon))return!0}return!1}function Ho(l,f,m,w,E){var R=m[0],X=m[1],ne=l[0],ce=l[1],xe=f[0],We=f[1],je=m[0]-ne,vt=m[1]-ce,kt=xe-ne,Yt=We-ce,_n=je*Yt-vt*kt;if(E!==null){if(Math.abs(_n)>E)return!1}else if(_n!==0)return!1;if(w){if(w==="start")return Math.abs(kt)>=Math.abs(Yt)?kt>0?ne<R&&R<=xe:xe<=R&&R<ne:Yt>0?ce<X&&X<=We:We<=X&&X<ce;if(w==="end")return Math.abs(kt)>=Math.abs(Yt)?kt>0?ne<=R&&R<xe:xe<R&&R<=ne:Yt>0?ce<=X&&X<We:We<X&&X<=ce;if(w==="both")return Math.abs(kt)>=Math.abs(Yt)?kt>0?ne<R&&R<xe:xe<R&&R<ne:Yt>0?ce<X&&X<We:We<X&&X<ce}else return Math.abs(kt)>=Math.abs(Yt)?kt>0?ne<=R&&R<=xe:xe<=R&&R<=ne:Yt>0?ce<=X&&X<=We:We<=X&&X<=ce;return!1}var Li=Bl;function ea(l,f){var m=qi(l),w=qi(f),E=m.type,R=w.type,X=m.coordinates,ne=w.coordinates;switch(E){case"Point":switch(R){case"Point":return si(X,ne);default:throw new Error("feature2 "+R+" geometry not supported")}case"MultiPoint":switch(R){case"Point":return va(m,w);case"MultiPoint":return ta(m,w);default:throw new Error("feature2 "+R+" geometry not supported")}case"LineString":switch(R){case"Point":return Li(w,m,{ignoreEndVertices:!0});case"LineString":return Dr(m,w);case"MultiPoint":return na(m,w);default:throw new Error("feature2 "+R+" geometry not supported")}case"Polygon":switch(R){case"Point":return lr(w,m,{ignoreBoundary:!0});case"LineString":return Us(m,w);case"Polygon":return go(m,w);case"MultiPoint":return ra(m,w);default:throw new Error("feature2 "+R+" geometry not supported")}default:throw new Error("feature1 "+E+" geometry not supported")}}function va(l,f){var m,w=!1;for(m=0;m<l.coordinates.length;m++)if(si(l.coordinates[m],f.coordinates)){w=!0;break}return w}function ta(l,f){for(var m=0,w=f.coordinates;m<w.length;m++){for(var E=w[m],R=!1,X=0,ne=l.coordinates;X<ne.length;X++){var ce=ne[X];if(si(E,ce)){R=!0;break}}if(!R)return!1}return!0}function na(l,f){for(var m=!1,w=0,E=f.coordinates;w<E.length;w++){var R=E[w];if(Li(R,l,{ignoreEndVertices:!0})&&(m=!0),!Li(R,l))return!1}return!!m}function ra(l,f){for(var m=0,w=f.coordinates;m<w.length;m++){var E=w[m];if(!lr(E,l,{ignoreBoundary:!0}))return!1}return!0}function Dr(l,f){for(var m=!1,w=0,E=f.coordinates;w<E.length;w++){var R=E[w];if(Li({type:"Point",coordinates:R},l,{ignoreEndVertices:!0})&&(m=!0),!Li({type:"Point",coordinates:R},l,{ignoreEndVertices:!1}))return!1}return m}function Us(l,f){var m=!1,w=0,E=pa(l),R=pa(f);if(!ri(E,R))return!1;for(w;w<f.coordinates.length-1;w++){var X=Wi(f.coordinates[w],f.coordinates[w+1]);if(lr({type:"Point",coordinates:X},l,{ignoreBoundary:!0})){m=!0;break}}return m}function go(l,f){if(l.type==="Feature"&&l.geometry===null||f.type==="Feature"&&f.geometry===null)return!1;var m=pa(l),w=pa(f);if(!ri(m,w))return!1;for(var E=qi(f).coordinates,R=0,X=E;R<X.length;R++)for(var ne=X[R],ce=0,xe=ne;ce<xe.length;ce++){var We=xe[ce];if(!lr(We,l))return!1}return!0}function ri(l,f){return!(l[0]>f[0]||l[2]<f[2]||l[1]>f[1]||l[3]<f[3])}function si(l,f){return l[0]===f[0]&&l[1]===f[1]}function Wi(l,f){return[(l[0]+f[0])/2,(l[1]+f[1])/2]}var gi=h(xr()),_s=l=>()=>l,ts=l=>{let f=l?(m,w)=>w.minus(m).abs().isLessThanOrEqualTo(l):_s(!1);return(m,w)=>f(m,w)?0:m.comparedTo(w)};function As(l){let f=l?(m,w,E,R,X)=>m.exponentiatedBy(2).isLessThanOrEqualTo(R.minus(w).exponentiatedBy(2).plus(X.minus(E).exponentiatedBy(2)).times(l)):_s(!1);return(m,w,E)=>{let R=m.x,X=m.y,ne=E.x,ce=E.y,xe=X.minus(ce).times(w.x.minus(ne)).minus(R.minus(ne).times(w.y.minus(ce)));return f(xe,R,X,ne,ce)?0:xe.comparedTo(0)}}var bu=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,ia=Math.ceil,eo=Math.floor,hi="[BigNumber Error] ",Bo=hi+"Number primitive has more than 15 significant digits: ",ns=1e14,nr=14,ya=9007199254740991,_a=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],$s=1e7,Go=1e9;function mc(l){var f,m,w,E=qe.prototype={constructor:qe,toString:null,valueOf:null},R=new qe(1),X=20,ne=4,ce=-7,xe=21,We=-1e7,je=1e7,vt=!1,kt=1,Yt=0,_n={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},Ln="0123456789abcdefghijklmnopqrstuvwxyz",Qn=!0;function qe(ge,Pe){var Ne,Oe,Ie,Fe,lt,ut,gt,Lt,St=this;if(!(St instanceof qe))return new qe(ge,Pe);if(Pe==null){if(ge&&ge._isBigNumber===!0){St.s=ge.s,!ge.c||ge.e>je?St.c=St.e=null:ge.e<We?St.c=[St.e=0]:(St.e=ge.e,St.c=ge.c.slice());return}if((ut=typeof ge=="number")&&ge*0==0){if(St.s=1/ge<0?(ge=-ge,-1):1,ge===~~ge){for(Fe=0,lt=ge;lt>=10;lt/=10,Fe++);Fe>je?St.c=St.e=null:(St.e=Fe,St.c=[ge]);return}Lt=String(ge)}else{if(!bu.test(Lt=String(ge)))return w(St,Lt,ut);St.s=Lt.charCodeAt(0)==45?(Lt=Lt.slice(1),-1):1}(Fe=Lt.indexOf("."))>-1&&(Lt=Lt.replace(".","")),(lt=Lt.search(/e/i))>0?(Fe<0&&(Fe=lt),Fe+=+Lt.slice(lt+1),Lt=Lt.substring(0,lt)):Fe<0&&(Fe=Lt.length)}else{if(a(Pe,2,Ln.length,"Base"),Pe==10&&Qn)return St=new qe(ge),bt(St,X+St.e+1,ne);if(Lt=String(ge),ut=typeof ge=="number"){if(ge*0!=0)return w(St,Lt,ut,Pe);if(St.s=1/ge<0?(Lt=Lt.slice(1),-1):1,qe.DEBUG&&Lt.replace(/^0\.0*|\./,"").length>15)throw Error(Bo+ge)}else St.s=Lt.charCodeAt(0)===45?(Lt=Lt.slice(1),-1):1;for(Ne=Ln.slice(0,Pe),Fe=lt=0,gt=Lt.length;lt<gt;lt++)if(Ne.indexOf(Oe=Lt.charAt(lt))<0){if(Oe=="."){if(lt>Fe){Fe=gt;continue}}else if(!Ie&&(Lt==Lt.toUpperCase()&&(Lt=Lt.toLowerCase())||Lt==Lt.toLowerCase()&&(Lt=Lt.toUpperCase()))){Ie=!0,lt=-1,Fe=0;continue}return w(St,String(ge),ut,Pe)}ut=!1,Lt=m(Lt,Pe,10,St.s),(Fe=Lt.indexOf("."))>-1?Lt=Lt.replace(".",""):Fe=Lt.length}for(lt=0;Lt.charCodeAt(lt)===48;lt++);for(gt=Lt.length;Lt.charCodeAt(--gt)===48;);if(Lt=Lt.slice(lt,++gt)){if(gt-=lt,ut&&qe.DEBUG&&gt>15&&(ge>ya||ge!==eo(ge)))throw Error(Bo+St.s*ge);if((Fe=Fe-lt-1)>je)St.c=St.e=null;else if(Fe<We)St.c=[St.e=0];else{if(St.e=Fe,St.c=[],lt=(Fe+1)%nr,Fe<0&&(lt+=nr),lt<gt){for(lt&&St.c.push(+Lt.slice(0,lt)),gt-=nr;lt<gt;)St.c.push(+Lt.slice(lt,lt+=nr));lt=nr-(Lt=Lt.slice(lt)).length}else lt-=gt;for(;lt--;Lt+="0");St.c.push(+Lt)}}else St.c=[St.e=0]}qe.clone=mc,qe.ROUND_UP=0,qe.ROUND_DOWN=1,qe.ROUND_CEIL=2,qe.ROUND_FLOOR=3,qe.ROUND_HALF_UP=4,qe.ROUND_HALF_DOWN=5,qe.ROUND_HALF_EVEN=6,qe.ROUND_HALF_CEIL=7,qe.ROUND_HALF_FLOOR=8,qe.EUCLID=9,qe.config=qe.set=function(ge){var Pe,Ne;if(ge!=null)if(typeof ge=="object"){if(ge.hasOwnProperty(Pe="DECIMAL_PLACES")&&(Ne=ge[Pe],a(Ne,0,Go,Pe),X=Ne),ge.hasOwnProperty(Pe="ROUNDING_MODE")&&(Ne=ge[Pe],a(Ne,0,8,Pe),ne=Ne),ge.hasOwnProperty(Pe="EXPONENTIAL_AT")&&(Ne=ge[Pe],Ne&&Ne.pop?(a(Ne[0],-1e9,0,Pe),a(Ne[1],0,Go,Pe),ce=Ne[0],xe=Ne[1]):(a(Ne,-1e9,Go,Pe),ce=-(xe=Ne<0?-Ne:Ne))),ge.hasOwnProperty(Pe="RANGE"))if(Ne=ge[Pe],Ne&&Ne.pop)a(Ne[0],-1e9,-1,Pe),a(Ne[1],1,Go,Pe),We=Ne[0],je=Ne[1];else if(a(Ne,-1e9,Go,Pe),Ne)We=-(je=Ne<0?-Ne:Ne);else throw Error(hi+Pe+" cannot be zero: "+Ne);if(ge.hasOwnProperty(Pe="CRYPTO"))if(Ne=ge[Pe],Ne===!!Ne)if(Ne)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))vt=Ne;else throw vt=!Ne,Error(hi+"crypto unavailable");else vt=Ne;else throw Error(hi+Pe+" not true or false: "+Ne);if(ge.hasOwnProperty(Pe="MODULO_MODE")&&(Ne=ge[Pe],a(Ne,0,9,Pe),kt=Ne),ge.hasOwnProperty(Pe="POW_PRECISION")&&(Ne=ge[Pe],a(Ne,0,Go,Pe),Yt=Ne),ge.hasOwnProperty(Pe="FORMAT"))if(Ne=ge[Pe],typeof Ne=="object")_n=Ne;else throw Error(hi+Pe+" not an object: "+Ne);if(ge.hasOwnProperty(Pe="ALPHABET"))if(Ne=ge[Pe],typeof Ne=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(Ne))Qn=Ne.slice(0,10)=="0123456789",Ln=Ne;else throw Error(hi+Pe+" invalid: "+Ne)}else throw Error(hi+"Object expected: "+ge);return{DECIMAL_PLACES:X,ROUNDING_MODE:ne,EXPONENTIAL_AT:[ce,xe],RANGE:[We,je],CRYPTO:vt,MODULO_MODE:kt,POW_PRECISION:Yt,FORMAT:_n,ALPHABET:Ln}},qe.isBigNumber=function(ge){if(!ge||ge._isBigNumber!==!0)return!1;if(!qe.DEBUG)return!0;var Pe,Ne,Oe=ge.c,Ie=ge.e,Fe=ge.s;e:if({}.toString.call(Oe)=="[object Array]"){if((Fe===1||Fe===-1)&&Ie>=-1e9&&Ie<=Go&&Ie===eo(Ie)){if(Oe[0]===0){if(Ie===0&&Oe.length===1)return!0;break e}if(Pe=(Ie+1)%nr,Pe<1&&(Pe+=nr),String(Oe[0]).length==Pe){for(Pe=0;Pe<Oe.length;Pe++)if(Ne=Oe[Pe],Ne<0||Ne>=ns||Ne!==eo(Ne))break e;if(Ne!==0)return!0}}}else if(Oe===null&&Ie===null&&(Fe===null||Fe===1||Fe===-1))return!0;throw Error(hi+"Invalid BigNumber: "+ge)},qe.maximum=qe.max=function(){return ht(arguments,-1)},qe.minimum=qe.min=function(){return ht(arguments,1)},qe.random=function(){var ge=9007199254740992,Pe=Math.random()*ge&2097151?function(){return eo(Math.random()*ge)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(Ne){var Oe,Ie,Fe,lt,ut,gt=0,Lt=[],St=new qe(R);if(Ne==null?Ne=X:a(Ne,0,Go),lt=ia(Ne/nr),vt)if(crypto.getRandomValues){for(Oe=crypto.getRandomValues(new Uint32Array(lt*=2));gt<lt;)ut=Oe[gt]*131072+(Oe[gt+1]>>>11),ut>=9e15?(Ie=crypto.getRandomValues(new Uint32Array(2)),Oe[gt]=Ie[0],Oe[gt+1]=Ie[1]):(Lt.push(ut%1e14),gt+=2);gt=lt/2}else if(crypto.randomBytes){for(Oe=crypto.randomBytes(lt*=7);gt<lt;)ut=(Oe[gt]&31)*281474976710656+Oe[gt+1]*1099511627776+Oe[gt+2]*4294967296+Oe[gt+3]*16777216+(Oe[gt+4]<<16)+(Oe[gt+5]<<8)+Oe[gt+6],ut>=9e15?crypto.randomBytes(7).copy(Oe,gt):(Lt.push(ut%1e14),gt+=7);gt=lt/7}else throw vt=!1,Error(hi+"crypto unavailable");if(!vt)for(;gt<lt;)ut=Pe(),ut<9e15&&(Lt[gt++]=ut%1e14);for(lt=Lt[--gt],Ne%=nr,lt&&Ne&&(ut=_a[nr-Ne],Lt[gt]=eo(lt/ut)*ut);Lt[gt]===0;Lt.pop(),gt--);if(gt<0)Lt=[Fe=0];else{for(Fe=-1;Lt[0]===0;Lt.splice(0,1),Fe-=nr);for(gt=1,ut=Lt[0];ut>=10;ut/=10,gt++);gt<nr&&(Fe-=nr-gt)}return St.e=Fe,St.c=Lt,St}}(),qe.sum=function(){for(var ge=1,Pe=arguments,Ne=new qe(Pe[0]);ge<Pe.length;)Ne=Ne.plus(Pe[ge++]);return Ne},m=function(){var ge="0123456789";function Pe(Ne,Oe,Ie,Fe){for(var lt,ut=[0],gt,Lt=0,St=Ne.length;Lt<St;){for(gt=ut.length;gt--;ut[gt]*=Oe);for(ut[0]+=Fe.indexOf(Ne.charAt(Lt++)),lt=0;lt<ut.length;lt++)ut[lt]>Ie-1&&(ut[lt+1]==null&&(ut[lt+1]=0),ut[lt+1]+=ut[lt]/Ie|0,ut[lt]%=Ie)}return ut.reverse()}return function(Ne,Oe,Ie,Fe,lt){var ut,gt,Lt,St,tn,Dn,jn,Gn,Xr=Ne.indexOf("."),ai=X,Ir=ne;for(Xr>=0&&(St=Yt,Yt=0,Ne=Ne.replace(".",""),Gn=new qe(Oe),Dn=Gn.pow(Ne.length-Xr),Yt=St,Gn.c=Pe(z(vo(Dn.c),Dn.e,"0"),10,Ie,ge),Gn.e=Gn.c.length),jn=Pe(Ne,Oe,Ie,lt?(ut=Ln,ge):(ut=ge,Ln)),Lt=St=jn.length;jn[--St]==0;jn.pop());if(!jn[0])return ut.charAt(0);if(Xr<0?--Lt:(Dn.c=jn,Dn.e=Lt,Dn.s=Fe,Dn=f(Dn,Gn,ai,Ir,Ie),jn=Dn.c,tn=Dn.r,Lt=Dn.e),gt=Lt+ai+1,Xr=jn[gt],St=Ie/2,tn=tn||gt<0||jn[gt+1]!=null,tn=Ir<4?(Xr!=null||tn)&&(Ir==0||Ir==(Dn.s<0?3:2)):Xr>St||Xr==St&&(Ir==4||tn||Ir==6&&jn[gt-1]&1||Ir==(Dn.s<0?8:7)),gt<1||!jn[0])Ne=tn?z(ut.charAt(1),-ai,ut.charAt(0)):ut.charAt(0);else{if(jn.length=gt,tn)for(--Ie;++jn[--gt]>Ie;)jn[gt]=0,gt||(++Lt,jn=[1].concat(jn));for(St=jn.length;!jn[--St];);for(Xr=0,Ne="";Xr<=St;Ne+=ut.charAt(jn[Xr++]));Ne=z(Ne,Lt,ut.charAt(0))}return Ne}}(),f=function(){function ge(Oe,Ie,Fe){var lt,ut,gt,Lt,St=0,tn=Oe.length,Dn=Ie%$s,jn=Ie/$s|0;for(Oe=Oe.slice();tn--;)gt=Oe[tn]%$s,Lt=Oe[tn]/$s|0,lt=jn*gt+Lt*Dn,ut=Dn*gt+lt%$s*$s+St,St=(ut/Fe|0)+(lt/$s|0)+jn*Lt,Oe[tn]=ut%Fe;return St&&(Oe=[St].concat(Oe)),Oe}function Pe(Oe,Ie,Fe,lt){var ut,gt;if(Fe!=lt)gt=Fe>lt?1:-1;else for(ut=gt=0;ut<Fe;ut++)if(Oe[ut]!=Ie[ut]){gt=Oe[ut]>Ie[ut]?1:-1;break}return gt}function Ne(Oe,Ie,Fe,lt){for(var ut=0;Fe--;)Oe[Fe]-=ut,ut=Oe[Fe]<Ie[Fe]?1:0,Oe[Fe]=ut*lt+Oe[Fe]-Ie[Fe];for(;!Oe[0]&&Oe.length>1;Oe.splice(0,1));}return function(Oe,Ie,Fe,lt,ut){var gt,Lt,St,tn,Dn,jn,Gn,Xr,ai,Ir,mi,os,xu,sa,Sh,$a,Xu,aa=Oe.s==Ie.s?1:-1,No=Oe.c,Zi=Ie.c;if(!No||!No[0]||!Zi||!Zi[0])return new qe(!Oe.s||!Ie.s||(No?Zi&&No[0]==Zi[0]:!Zi)?NaN:No&&No[0]==0||!Zi?aa*0:aa/0);for(Xr=new qe(aa),ai=Xr.c=[],Lt=Oe.e-Ie.e,aa=Fe+Lt+1,ut||(ut=ns,Lt=mo(Oe.e/nr)-mo(Ie.e/nr),aa=aa/nr|0),St=0;Zi[St]==(No[St]||0);St++);if(Zi[St]>(No[St]||0)&&Lt--,aa<0)ai.push(1),tn=!0;else{for(sa=No.length,$a=Zi.length,St=0,aa+=2,Dn=eo(ut/(Zi[0]+1)),Dn>1&&(Zi=ge(Zi,Dn,ut),No=ge(No,Dn,ut),$a=Zi.length,sa=No.length),xu=$a,Ir=No.slice(0,$a),mi=Ir.length;mi<$a;Ir[mi++]=0);Xu=Zi.slice(),Xu=[0].concat(Xu),Sh=Zi[0],Zi[1]>=ut/2&&Sh++;do{if(Dn=0,gt=Pe(Zi,Ir,$a,mi),gt<0){if(os=Ir[0],$a!=mi&&(os=os*ut+(Ir[1]||0)),Dn=eo(os/Sh),Dn>1)for(Dn>=ut&&(Dn=ut-1),jn=ge(Zi,Dn,ut),Gn=jn.length,mi=Ir.length;Pe(jn,Ir,Gn,mi)==1;)Dn--,Ne(jn,$a<Gn?Xu:Zi,Gn,ut),Gn=jn.length,gt=1;else Dn==0&&(gt=Dn=1),jn=Zi.slice(),Gn=jn.length;if(Gn<mi&&(jn=[0].concat(jn)),Ne(Ir,jn,mi,ut),mi=Ir.length,gt==-1)for(;Pe(Zi,Ir,$a,mi)<1;)Dn++,Ne(Ir,$a<mi?Xu:Zi,mi,ut),mi=Ir.length}else gt===0&&(Dn++,Ir=[0]);ai[St++]=Dn,Ir[0]?Ir[mi++]=No[xu]||0:(Ir=[No[xu]],mi=1)}while((xu++<sa||Ir[0]!=null)&&aa--);tn=Ir[0]!=null,ai[0]||ai.splice(0,1)}if(ut==ns){for(St=1,aa=ai[0];aa>=10;aa/=10,St++);bt(Xr,Fe+(Xr.e=St+Lt*nr-1)+1,lt,tn)}else Xr.e=Lt,Xr.r=+tn;return Xr}}();function nt(ge,Pe,Ne,Oe){var Ie,Fe,lt,ut,gt;if(Ne==null?Ne=ne:a(Ne,0,8),!ge.c)return ge.toString();if(Ie=ge.c[0],lt=ge.e,Pe==null)gt=vo(ge.c),gt=Oe==1||Oe==2&&(lt<=ce||lt>=xe)?S(gt,lt):z(gt,lt,"0");else if(ge=bt(new qe(ge),Pe,Ne),Fe=ge.e,gt=vo(ge.c),ut=gt.length,Oe==1||Oe==2&&(Pe<=Fe||Fe<=ce)){for(;ut<Pe;gt+="0",ut++);gt=S(gt,Fe)}else if(Pe-=lt,gt=z(gt,Fe,"0"),Fe+1>ut){if(--Pe>0)for(gt+=".";Pe--;gt+="0");}else if(Pe+=Fe-ut,Pe>0)for(Fe+1==ut&&(gt+=".");Pe--;gt+="0");return ge.s<0&&Ie?"-"+gt:gt}function ht(ge,Pe){for(var Ne,Oe,Ie=1,Fe=new qe(ge[0]);Ie<ge.length;Ie++)Oe=new qe(ge[Ie]),(!Oe.s||(Ne=Vs(Fe,Oe))===Pe||Ne===0&&Fe.s===Pe)&&(Fe=Oe);return Fe}function Nt(ge,Pe,Ne){for(var Oe=1,Ie=Pe.length;!Pe[--Ie];Pe.pop());for(Ie=Pe[0];Ie>=10;Ie/=10,Oe++);return(Ne=Oe+Ne*nr-1)>je?ge.c=ge.e=null:Ne<We?ge.c=[ge.e=0]:(ge.e=Ne,ge.c=Pe),ge}w=function(){var ge=/^(-?)0([xbo])(?=\w[\w.]*$)/i,Pe=/^([^.]+)\.$/,Ne=/^\.([^.]+)$/,Oe=/^-?(Infinity|NaN)$/,Ie=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(Fe,lt,ut,gt){var Lt,St=ut?lt:lt.replace(Ie,"");if(Oe.test(St))Fe.s=isNaN(St)?null:St<0?-1:1;else{if(!ut&&(St=St.replace(ge,function(tn,Dn,jn){return Lt=(jn=jn.toLowerCase())=="x"?16:jn=="b"?2:8,!gt||gt==Lt?Dn:tn}),gt&&(Lt=gt,St=St.replace(Pe,"$1").replace(Ne,"0.$1")),lt!=St))return new qe(St,Lt);if(qe.DEBUG)throw Error(hi+"Not a"+(gt?" base "+gt:"")+" number: "+lt);Fe.s=null}Fe.c=Fe.e=null}}();function bt(ge,Pe,Ne,Oe){var Ie,Fe,lt,ut,gt,Lt,St,tn=ge.c,Dn=_a;if(tn){e:{for(Ie=1,ut=tn[0];ut>=10;ut/=10,Ie++);if(Fe=Pe-Ie,Fe<0)Fe+=nr,lt=Pe,gt=tn[Lt=0],St=eo(gt/Dn[Ie-lt-1]%10);else if(Lt=ia((Fe+1)/nr),Lt>=tn.length)if(Oe){for(;tn.length<=Lt;tn.push(0));gt=St=0,Ie=1,Fe%=nr,lt=Fe-nr+1}else break e;else{for(gt=ut=tn[Lt],Ie=1;ut>=10;ut/=10,Ie++);Fe%=nr,lt=Fe-nr+Ie,St=lt<0?0:eo(gt/Dn[Ie-lt-1]%10)}if(Oe=Oe||Pe<0||tn[Lt+1]!=null||(lt<0?gt:gt%Dn[Ie-lt-1]),Oe=Ne<4?(St||Oe)&&(Ne==0||Ne==(ge.s<0?3:2)):St>5||St==5&&(Ne==4||Oe||Ne==6&&(Fe>0?lt>0?gt/Dn[Ie-lt]:0:tn[Lt-1])%10&1||Ne==(ge.s<0?8:7)),Pe<1||!tn[0])return tn.length=0,Oe?(Pe-=ge.e+1,tn[0]=Dn[(nr-Pe%nr)%nr],ge.e=-Pe||0):tn[0]=ge.e=0,ge;if(Fe==0?(tn.length=Lt,ut=1,Lt--):(tn.length=Lt+1,ut=Dn[nr-Fe],tn[Lt]=lt>0?eo(gt/Dn[Ie-lt]%Dn[lt])*ut:0),Oe)for(;;)if(Lt==0){for(Fe=1,lt=tn[0];lt>=10;lt/=10,Fe++);for(lt=tn[0]+=ut,ut=1;lt>=10;lt/=10,ut++);Fe!=ut&&(ge.e++,tn[0]==ns&&(tn[0]=1));break}else{if(tn[Lt]+=ut,tn[Lt]!=ns)break;tn[Lt--]=0,ut=1}for(Fe=tn.length;tn[--Fe]===0;tn.pop());}ge.e>je?ge.c=ge.e=null:ge.e<We&&(ge.c=[ge.e=0])}return ge}function Tt(ge){var Pe,Ne=ge.e;return Ne===null?ge.toString():(Pe=vo(ge.c),Pe=Ne<=ce||Ne>=xe?S(Pe,Ne):z(Pe,Ne,"0"),ge.s<0?"-"+Pe:Pe)}return E.absoluteValue=E.abs=function(){var ge=new qe(this);return ge.s<0&&(ge.s=1),ge},E.comparedTo=function(ge,Pe){return Vs(this,new qe(ge,Pe))},E.decimalPlaces=E.dp=function(ge,Pe){var Ne,Oe,Ie,Fe=this;if(ge!=null)return a(ge,0,Go),Pe==null?Pe=ne:a(Pe,0,8),bt(new qe(Fe),ge+Fe.e+1,Pe);if(!(Ne=Fe.c))return null;if(Oe=((Ie=Ne.length-1)-mo(this.e/nr))*nr,Ie=Ne[Ie])for(;Ie%10==0;Ie/=10,Oe--);return Oe<0&&(Oe=0),Oe},E.dividedBy=E.div=function(ge,Pe){return f(this,new qe(ge,Pe),X,ne)},E.dividedToIntegerBy=E.idiv=function(ge,Pe){return f(this,new qe(ge,Pe),0,1)},E.exponentiatedBy=E.pow=function(ge,Pe){var Ne,Oe,Ie,Fe,lt,ut,gt,Lt,St,tn=this;if(ge=new qe(ge),ge.c&&!ge.isInteger())throw Error(hi+"Exponent not an integer: "+Tt(ge));if(Pe!=null&&(Pe=new qe(Pe)),ut=ge.e>14,!tn.c||!tn.c[0]||tn.c[0]==1&&!tn.e&&tn.c.length==1||!ge.c||!ge.c[0])return St=new qe(Math.pow(+Tt(tn),ut?ge.s*(2-p(ge)):+Tt(ge))),Pe?St.mod(Pe):St;if(gt=ge.s<0,Pe){if(Pe.c?!Pe.c[0]:!Pe.s)return new qe(NaN);Oe=!gt&&tn.isInteger()&&Pe.isInteger(),Oe&&(tn=tn.mod(Pe))}else{if(ge.e>9&&(tn.e>0||tn.e<-1||(tn.e==0?tn.c[0]>1||ut&&tn.c[1]>=24e7:tn.c[0]<8e13||ut&&tn.c[0]<=9999975e7)))return Fe=tn.s<0&&p(ge)?-0:0,tn.e>-1&&(Fe=1/Fe),new qe(gt?1/Fe:Fe);Yt&&(Fe=ia(Yt/nr+2))}for(ut?(Ne=new qe(.5),gt&&(ge.s=1),Lt=p(ge)):(Ie=Math.abs(+Tt(ge)),Lt=Ie%2),St=new qe(R);;){if(Lt){if(St=St.times(tn),!St.c)break;Fe?St.c.length>Fe&&(St.c.length=Fe):Oe&&(St=St.mod(Pe))}if(Ie){if(Ie=eo(Ie/2),Ie===0)break;Lt=Ie%2}else if(ge=ge.times(Ne),bt(ge,ge.e+1,1),ge.e>14)Lt=p(ge);else{if(Ie=+Tt(ge),Ie===0)break;Lt=Ie%2}tn=tn.times(tn),Fe?tn.c&&tn.c.length>Fe&&(tn.c.length=Fe):Oe&&(tn=tn.mod(Pe))}return Oe?St:(gt&&(St=R.div(St)),Pe?St.mod(Pe):Fe?bt(St,Yt,ne,lt):St)},E.integerValue=function(ge){var Pe=new qe(this);return ge==null?ge=ne:a(ge,0,8),bt(Pe,Pe.e+1,ge)},E.isEqualTo=E.eq=function(ge,Pe){return Vs(this,new qe(ge,Pe))===0},E.isFinite=function(){return!!this.c},E.isGreaterThan=E.gt=function(ge,Pe){return Vs(this,new qe(ge,Pe))>0},E.isGreaterThanOrEqualTo=E.gte=function(ge,Pe){return(Pe=Vs(this,new qe(ge,Pe)))===1||Pe===0},E.isInteger=function(){return!!this.c&&mo(this.e/nr)>this.c.length-2},E.isLessThan=E.lt=function(ge,Pe){return Vs(this,new qe(ge,Pe))<0},E.isLessThanOrEqualTo=E.lte=function(ge,Pe){return(Pe=Vs(this,new qe(ge,Pe)))===-1||Pe===0},E.isNaN=function(){return!this.s},E.isNegative=function(){return this.s<0},E.isPositive=function(){return this.s>0},E.isZero=function(){return!!this.c&&this.c[0]==0},E.minus=function(ge,Pe){var Ne,Oe,Ie,Fe,lt=this,ut=lt.s;if(ge=new qe(ge,Pe),Pe=ge.s,!ut||!Pe)return new qe(NaN);if(ut!=Pe)return ge.s=-Pe,lt.plus(ge);var gt=lt.e/nr,Lt=ge.e/nr,St=lt.c,tn=ge.c;if(!gt||!Lt){if(!St||!tn)return St?(ge.s=-Pe,ge):new qe(tn?lt:NaN);if(!St[0]||!tn[0])return tn[0]?(ge.s=-Pe,ge):new qe(St[0]?lt:ne==3?-0:0)}if(gt=mo(gt),Lt=mo(Lt),St=St.slice(),ut=gt-Lt){for((Fe=ut<0)?(ut=-ut,Ie=St):(Lt=gt,Ie=tn),Ie.reverse(),Pe=ut;Pe--;Ie.push(0));Ie.reverse()}else for(Oe=(Fe=(ut=St.length)<(Pe=tn.length))?ut:Pe,ut=Pe=0;Pe<Oe;Pe++)if(St[Pe]!=tn[Pe]){Fe=St[Pe]<tn[Pe];break}if(Fe&&(Ie=St,St=tn,tn=Ie,ge.s=-ge.s),Pe=(Oe=tn.length)-(Ne=St.length),Pe>0)for(;Pe--;St[Ne++]=0);for(Pe=ns-1;Oe>ut;){if(St[--Oe]<tn[Oe]){for(Ne=Oe;Ne&&!St[--Ne];St[Ne]=Pe);--St[Ne],St[Oe]+=ns}St[Oe]-=tn[Oe]}for(;St[0]==0;St.splice(0,1),--Lt);return St[0]?Nt(ge,St,Lt):(ge.s=ne==3?-1:1,ge.c=[ge.e=0],ge)},E.modulo=E.mod=function(ge,Pe){var Ne,Oe,Ie=this;return ge=new qe(ge,Pe),!Ie.c||!ge.s||ge.c&&!ge.c[0]?new qe(NaN):!ge.c||Ie.c&&!Ie.c[0]?new qe(Ie):(kt==9?(Oe=ge.s,ge.s=1,Ne=f(Ie,ge,0,3),ge.s=Oe,Ne.s*=Oe):Ne=f(Ie,ge,0,kt),ge=Ie.minus(Ne.times(ge)),!ge.c[0]&&kt==1&&(ge.s=Ie.s),ge)},E.multipliedBy=E.times=function(ge,Pe){var Ne,Oe,Ie,Fe,lt,ut,gt,Lt,St,tn,Dn,jn,Gn,Xr,ai,Ir=this,mi=Ir.c,os=(ge=new qe(ge,Pe)).c;if(!mi||!os||!mi[0]||!os[0])return!Ir.s||!ge.s||mi&&!mi[0]&&!os||os&&!os[0]&&!mi?ge.c=ge.e=ge.s=null:(ge.s*=Ir.s,!mi||!os?ge.c=ge.e=null:(ge.c=[0],ge.e=0)),ge;for(Oe=mo(Ir.e/nr)+mo(ge.e/nr),ge.s*=Ir.s,gt=mi.length,tn=os.length,gt<tn&&(Gn=mi,mi=os,os=Gn,Ie=gt,gt=tn,tn=Ie),Ie=gt+tn,Gn=[];Ie--;Gn.push(0));for(Xr=ns,ai=$s,Ie=tn;--Ie>=0;){for(Ne=0,Dn=os[Ie]%ai,jn=os[Ie]/ai|0,lt=gt,Fe=Ie+lt;Fe>Ie;)Lt=mi[--lt]%ai,St=mi[lt]/ai|0,ut=jn*Lt+St*Dn,Lt=Dn*Lt+ut%ai*ai+Gn[Fe]+Ne,Ne=(Lt/Xr|0)+(ut/ai|0)+jn*St,Gn[Fe--]=Lt%Xr;Gn[Fe]=Ne}return Ne?++Oe:Gn.splice(0,1),Nt(ge,Gn,Oe)},E.negated=function(){var ge=new qe(this);return ge.s=-ge.s||null,ge},E.plus=function(ge,Pe){var Ne,Oe=this,Ie=Oe.s;if(ge=new qe(ge,Pe),Pe=ge.s,!Ie||!Pe)return new qe(NaN);if(Ie!=Pe)return ge.s=-Pe,Oe.minus(ge);var Fe=Oe.e/nr,lt=ge.e/nr,ut=Oe.c,gt=ge.c;if(!Fe||!lt){if(!ut||!gt)return new qe(Ie/0);if(!ut[0]||!gt[0])return gt[0]?ge:new qe(ut[0]?Oe:Ie*0)}if(Fe=mo(Fe),lt=mo(lt),ut=ut.slice(),Ie=Fe-lt){for(Ie>0?(lt=Fe,Ne=gt):(Ie=-Ie,Ne=ut),Ne.reverse();Ie--;Ne.push(0));Ne.reverse()}for(Ie=ut.length,Pe=gt.length,Ie-Pe<0&&(Ne=gt,gt=ut,ut=Ne,Pe=Ie),Ie=0;Pe;)Ie=(ut[--Pe]=ut[Pe]+gt[Pe]+Ie)/ns|0,ut[Pe]=ns===ut[Pe]?0:ut[Pe]%ns;return Ie&&(ut=[Ie].concat(ut),++lt),Nt(ge,ut,lt)},E.precision=E.sd=function(ge,Pe){var Ne,Oe,Ie,Fe=this;if(ge!=null&&ge!==!!ge)return a(ge,1,Go),Pe==null?Pe=ne:a(Pe,0,8),bt(new qe(Fe),ge,Pe);if(!(Ne=Fe.c))return null;if(Ie=Ne.length-1,Oe=Ie*nr+1,Ie=Ne[Ie]){for(;Ie%10==0;Ie/=10,Oe--);for(Ie=Ne[0];Ie>=10;Ie/=10,Oe++);}return ge&&Fe.e+1>Oe&&(Oe=Fe.e+1),Oe},E.shiftedBy=function(ge){return a(ge,-9007199254740991,ya),this.times("1e"+ge)},E.squareRoot=E.sqrt=function(){var ge,Pe,Ne,Oe,Ie,Fe=this,lt=Fe.c,ut=Fe.s,gt=Fe.e,Lt=X+4,St=new qe("0.5");if(ut!==1||!lt||!lt[0])return new qe(!ut||ut<0&&(!lt||lt[0])?NaN:lt?Fe:1/0);if(ut=Math.sqrt(+Tt(Fe)),ut==0||ut==1/0?(Pe=vo(lt),(Pe.length+gt)%2==0&&(Pe+="0"),ut=Math.sqrt(+Pe),gt=mo((gt+1)/2)-(gt<0||gt%2),ut==1/0?Pe="5e"+gt:(Pe=ut.toExponential(),Pe=Pe.slice(0,Pe.indexOf("e")+1)+gt),Ne=new qe(Pe)):Ne=new qe(ut+""),Ne.c[0]){for(gt=Ne.e,ut=gt+Lt,ut<3&&(ut=0);;)if(Ie=Ne,Ne=St.times(Ie.plus(f(Fe,Ie,Lt,1))),vo(Ie.c).slice(0,ut)===(Pe=vo(Ne.c)).slice(0,ut))if(Ne.e<gt&&--ut,Pe=Pe.slice(ut-3,ut+1),Pe=="9999"||!Oe&&Pe=="4999"){if(!Oe&&(bt(Ie,Ie.e+X+2,0),Ie.times(Ie).eq(Fe))){Ne=Ie;break}Lt+=4,ut+=4,Oe=1}else{(!+Pe||!+Pe.slice(1)&&Pe.charAt(0)=="5")&&(bt(Ne,Ne.e+X+2,1),ge=!Ne.times(Ne).eq(Fe));break}}return bt(Ne,Ne.e+X+1,ne,ge)},E.toExponential=function(ge,Pe){return ge!=null&&(a(ge,0,Go),ge++),nt(this,ge,Pe,1)},E.toFixed=function(ge,Pe){return ge!=null&&(a(ge,0,Go),ge=ge+this.e+1),nt(this,ge,Pe)},E.toFormat=function(ge,Pe,Ne){var Oe,Ie=this;if(Ne==null)ge!=null&&Pe&&typeof Pe=="object"?(Ne=Pe,Pe=null):ge&&typeof ge=="object"?(Ne=ge,ge=Pe=null):Ne=_n;else if(typeof Ne!="object")throw Error(hi+"Argument not an object: "+Ne);if(Oe=Ie.toFixed(ge,Pe),Ie.c){var Fe,lt=Oe.split("."),ut=+Ne.groupSize,gt=+Ne.secondaryGroupSize,Lt=Ne.groupSeparator||"",St=lt[0],tn=lt[1],Dn=Ie.s<0,jn=Dn?St.slice(1):St,Gn=jn.length;if(gt&&(Fe=ut,ut=gt,gt=Fe,Gn-=Fe),ut>0&&Gn>0){for(Fe=Gn%ut||ut,St=jn.substr(0,Fe);Fe<Gn;Fe+=ut)St+=Lt+jn.substr(Fe,ut);gt>0&&(St+=Lt+jn.slice(Fe)),Dn&&(St="-"+St)}Oe=tn?St+(Ne.decimalSeparator||"")+((gt=+Ne.fractionGroupSize)?tn.replace(new RegExp("\\d{"+gt+"}\\B","g"),"$&"+(Ne.fractionGroupSeparator||"")):tn):St}return(Ne.prefix||"")+Oe+(Ne.suffix||"")},E.toFraction=function(ge){var Pe,Ne,Oe,Ie,Fe,lt,ut,gt,Lt,St,tn,Dn,jn=this,Gn=jn.c;if(ge!=null&&(ut=new qe(ge),!ut.isInteger()&&(ut.c||ut.s!==1)||ut.lt(R)))throw Error(hi+"Argument "+(ut.isInteger()?"out of range: ":"not an integer: ")+Tt(ut));if(!Gn)return new qe(jn);for(Pe=new qe(R),Lt=Ne=new qe(R),Oe=gt=new qe(R),Dn=vo(Gn),Fe=Pe.e=Dn.length-jn.e-1,Pe.c[0]=_a[(lt=Fe%nr)<0?nr+lt:lt],ge=!ge||ut.comparedTo(Pe)>0?Fe>0?Pe:Lt:ut,lt=je,je=1/0,ut=new qe(Dn),gt.c[0]=0;St=f(ut,Pe,0,1),Ie=Ne.plus(St.times(Oe)),Ie.comparedTo(ge)!=1;)Ne=Oe,Oe=Ie,Lt=gt.plus(St.times(Ie=Lt)),gt=Ie,Pe=ut.minus(St.times(Ie=Pe)),ut=Ie;return Ie=f(ge.minus(Ne),Oe,0,1),gt=gt.plus(Ie.times(Lt)),Ne=Ne.plus(Ie.times(Oe)),gt.s=Lt.s=jn.s,Fe=Fe*2,tn=f(Lt,Oe,Fe,ne).minus(jn).abs().comparedTo(f(gt,Ne,Fe,ne).minus(jn).abs())<1?[Lt,Oe]:[gt,Ne],je=lt,tn},E.toNumber=function(){return+Tt(this)},E.toPrecision=function(ge,Pe){return ge!=null&&a(ge,1,Go),nt(this,ge,Pe,2)},E.toString=function(ge){var Pe,Ne=this,Oe=Ne.s,Ie=Ne.e;return Ie===null?Oe?(Pe="Infinity",Oe<0&&(Pe="-"+Pe)):Pe="NaN":(ge==null?Pe=Ie<=ce||Ie>=xe?S(vo(Ne.c),Ie):z(vo(Ne.c),Ie,"0"):ge===10&&Qn?(Ne=bt(new qe(Ne),X+Ie+1,ne),Pe=z(vo(Ne.c),Ne.e,"0")):(a(ge,2,Ln.length,"Base"),Pe=m(z(vo(Ne.c),Ie,"0"),10,ge,Oe,!0)),Oe<0&&Ne.c[0]&&(Pe="-"+Pe)),Pe},E.valueOf=E.toJSON=function(){return Tt(this)},E._isBigNumber=!0,E[Symbol.toStringTag]="BigNumber",E[Symbol.for("nodejs.util.inspect.custom")]=E.valueOf,l!=null&&qe.set(l),qe}function mo(l){var f=l|0;return l>0||l===f?f:f-1}function vo(l){for(var f,m,w=1,E=l.length,R=l[0]+"";w<E;){for(f=l[w++]+"",m=nr-f.length;m--;f="0"+f);R+=f}for(E=R.length;R.charCodeAt(--E)===48;);return R.slice(0,E+1||1)}function Vs(l,f){var m,w,E=l.c,R=f.c,X=l.s,ne=f.s,ce=l.e,xe=f.e;if(!X||!ne)return null;if(m=E&&!E[0],w=R&&!R[0],m||w)return m?w?0:-ne:X;if(X!=ne)return X;if(m=X<0,w=ce==xe,!E||!R)return w?0:!E^m?1:-1;if(!w)return ce>xe^m?1:-1;for(ne=(ce=E.length)<(xe=R.length)?ce:xe,X=0;X<ne;X++)if(E[X]!=R[X])return E[X]>R[X]^m?1:-1;return ce==xe?0:ce>xe^m?1:-1}function a(l,f,m,w){if(l<f||l>m||l!==eo(l))throw Error(hi+(w||"Argument")+(typeof l=="number"?l<f||l>m?" out of range: ":" not an integer: ":" not a primitive number: ")+String(l))}function p(l){var f=l.c.length-1;return mo(l.e/nr)==f&&l.c[f]%2!=0}function S(l,f){return(l.length>1?l.charAt(0)+"."+l.slice(1):l)+(f<0?"e":"e+")+f}function z(l,f,m){var w,E;if(f<0){for(E=m+".";++f;E+=m);l=E+l}else if(w=l.length,++f>w){for(E=m,f-=w;--f;E+=m);l+=E}else f<w&&(l=l.slice(0,f)+"."+l.slice(f));return l}var re=mc(),Se=re,at=class{constructor(l){$t(this,"key");$t(this,"left",null);$t(this,"right",null);this.key=l}},Pt=class extends at{constructor(l){super(l)}},Ft=class{constructor(){$t(this,"size",0);$t(this,"modificationCount",0);$t(this,"splayCount",0)}splay(l){let f=this.root;if(f==null)return this.compare(l,l),-1;let m=null,w=null,E=null,R=null,X=f,ne=this.compare,ce;for(;;)if(ce=ne(X.key,l),ce>0){let xe=X.left;if(xe==null||(ce=ne(xe.key,l),ce>0&&(X.left=xe.right,xe.right=X,X=xe,xe=X.left,xe==null)))break;m==null?w=X:m.left=X,m=X,X=xe}else if(ce<0){let xe=X.right;if(xe==null||(ce=ne(xe.key,l),ce<0&&(X.right=xe.left,xe.left=X,X=xe,xe=X.right,xe==null)))break;E==null?R=X:E.right=X,E=X,X=xe}else break;return E!=null&&(E.right=X.left,X.left=R),m!=null&&(m.left=X.right,X.right=w),this.root!==X&&(this.root=X,this.splayCount++),ce}splayMin(l){let f=l,m=f.left;for(;m!=null;){let w=m;f.left=w.right,w.right=f,f=w,m=f.left}return f}splayMax(l){let f=l,m=f.right;for(;m!=null;){let w=m;f.right=w.left,w.left=f,f=w,m=f.right}return f}_delete(l){if(this.root==null||this.splay(l)!=0)return null;let f=this.root,m=f,w=f.left;if(this.size--,w==null)this.root=f.right;else{let E=f.right;f=this.splayMax(w),f.right=E,this.root=f}return this.modificationCount++,m}addNewRoot(l,f){this.size++,this.modificationCount++;let m=this.root;if(m==null){this.root=l;return}f<0?(l.left=m,l.right=m.right,m.right=null):(l.right=m,l.left=m.left,m.left=null),this.root=l}_first(){let l=this.root;return l==null?null:(this.root=this.splayMin(l),this.root)}_last(){let l=this.root;return l==null?null:(this.root=this.splayMax(l),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(l){return this.validKey(l)&&this.splay(l)==0}defaultCompare(){return(l,f)=>l<f?-1:l>f?1:0}wrap(){return{getRoot:()=>this.root,setRoot:l=>{this.root=l},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:l=>{this.splayCount=l},splay:l=>this.splay(l),has:l=>this.has(l)}}},nn=class Fd extends Ft{constructor(m,w){super();$t(this,"root",null);$t(this,"compare");$t(this,"validKey");$t(this,Cn,"[object Set]");this.compare=m??this.defaultCompare(),this.validKey=w??(E=>E!=null&&E!=null)}delete(m){return this.validKey(m)?this._delete(m)!=null:!1}deleteAll(m){for(let w of m)this.delete(w)}forEach(m){let w=this[Symbol.iterator](),E;for(;E=w.next(),!E.done;)m(E.value,E.value,this)}add(m){let w=this.splay(m);return w!=0&&this.addNewRoot(new Pt(m),w),this}addAndReturn(m){let w=this.splay(m);return w!=0&&this.addNewRoot(new Pt(m),w),this.root.key}addAll(m){for(let w of m)this.add(w)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(m){if(m==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(m)<0)return this.root.key;let w=this.root.left;if(w==null)return null;let E=w.right;for(;E!=null;)w=E,E=w.right;return w.key}firstAfter(m){if(m==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(m)>0)return this.root.key;let w=this.root.right;if(w==null)return null;let E=w.left;for(;E!=null;)w=E,E=w.left;return w.key}retainAll(m){let w=new Fd(this.compare,this.validKey),E=this.modificationCount;for(let R of m){if(E!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(R)&&this.splay(R)==0&&w.add(this.root.key)}w.size!=this.size&&(this.root=w.root,this.size=w.size,this.modificationCount++)}lookup(m){return!this.validKey(m)||this.splay(m)!=0?null:this.root.key}intersection(m){let w=new Fd(this.compare,this.validKey);for(let E of this)m.has(E)&&w.add(E);return w}difference(m){let w=new Fd(this.compare,this.validKey);for(let E of this)m.has(E)||w.add(E);return w}union(m){let w=this.clone();return w.addAll(m),w}clone(){let m=new Fd(this.compare,this.validKey);return m.size=this.size,m.root=this.copyNode(this.root),m}copyNode(m){if(m==null)return null;function w(R,X){let ne,ce;do{if(ne=R.left,ce=R.right,ne!=null){let xe=new Pt(ne.key);X.left=xe,w(ne,xe)}if(ce!=null){let xe=new Pt(ce.key);X.right=xe,R=ce,X=xe}}while(ce!=null)}let E=new Pt(m.key);return w(m,E),E}toSet(){return this.clone()}entries(){return new Er(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(Hn=Symbol.iterator,Cn=Symbol.toStringTag,Hn)](){return new Vn(this.wrap())}},Tn=class{constructor(l){$t(this,"tree");$t(this,"path",new Array);$t(this,"modificationCount",null);$t(this,"splayCount");this.tree=l,this.splayCount=l.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let l=this.path[this.path.length-1];return this.getValue(l)}rebuildPath(l){this.path.splice(0,this.path.length),this.tree.splay(l),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(l){for(;l!=null;)this.path.push(l),l=l.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let m=this.tree.getRoot();for(;m!=null;)this.path.push(m),m=m.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let l=this.path[this.path.length-1],f=l.right;if(f!=null){for(;f!=null;)this.path.push(f),f=f.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===l;)l=this.path.pop();return this.path.length>0}},Vn=class extends Tn{getValue(l){return l.key}},Er=class extends Tn{getValue(l){return[l.key,l.key]}},to=l=>l,Bi=l=>{if(l){let f=new nn(ts(l)),m=new nn(ts(l)),w=(R,X)=>X.addAndReturn(R),E=R=>({x:w(R.x,f),y:w(R.y,m)});return E({x:new Se(0),y:new Se(0)}),E}return to},yo=l=>({set:f=>{Si=yo(f)},reset:()=>yo(l),compare:ts(l),snap:Bi(l),orient:As(l)}),Si=yo(),rs=(l,f)=>l.ll.x.isLessThanOrEqualTo(f.x)&&f.x.isLessThanOrEqualTo(l.ur.x)&&l.ll.y.isLessThanOrEqualTo(f.y)&&f.y.isLessThanOrEqualTo(l.ur.y),vc=(l,f)=>{if(f.ur.x.isLessThan(l.ll.x)||l.ur.x.isLessThan(f.ll.x)||f.ur.y.isLessThan(l.ll.y)||l.ur.y.isLessThan(f.ll.y))return null;let m=l.ll.x.isLessThan(f.ll.x)?f.ll.x:l.ll.x,w=l.ur.x.isLessThan(f.ur.x)?l.ur.x:f.ur.x,E=l.ll.y.isLessThan(f.ll.y)?f.ll.y:l.ll.y,R=l.ur.y.isLessThan(f.ur.y)?l.ur.y:f.ur.y;return{ll:{x:m,y:E},ur:{x:w,y:R}}},oa=(l,f)=>l.x.times(f.y).minus(l.y.times(f.x)),Hs=(l,f)=>l.x.times(f.x).plus(l.y.times(f.y)),Ms=l=>Hs(l,l).sqrt(),xh=(l,f,m)=>{let w={x:f.x.minus(l.x),y:f.y.minus(l.y)},E={x:m.x.minus(l.x),y:m.y.minus(l.y)};return oa(E,w).div(Ms(E)).div(Ms(w))},Xl=(l,f,m)=>{let w={x:f.x.minus(l.x),y:f.y.minus(l.y)},E={x:m.x.minus(l.x),y:m.y.minus(l.y)};return Hs(E,w).div(Ms(E)).div(Ms(w))},Yr=(l,f,m)=>f.y.isZero()?null:{x:l.x.plus(f.x.div(f.y).times(m.minus(l.y))),y:m},Oo=(l,f,m)=>f.x.isZero()?null:{x:m,y:l.y.plus(f.y.div(f.x).times(m.minus(l.x)))},Te=(l,f,m,w)=>{if(f.x.isZero())return Oo(m,w,l.x);if(w.x.isZero())return Oo(l,f,m.x);if(f.y.isZero())return Yr(m,w,l.y);if(w.y.isZero())return Yr(l,f,m.y);let E=oa(f,w);if(E.isZero())return null;let R={x:m.x.minus(l.x),y:m.y.minus(l.y)},X=oa(R,f).div(E),ne=oa(R,w).div(E),ce=l.x.plus(ne.times(f.x)),xe=m.x.plus(X.times(w.x)),We=l.y.plus(ne.times(f.y)),je=m.y.plus(X.times(w.y)),vt=ce.plus(xe).div(2),kt=We.plus(je).div(2);return{x:vt,y:kt}},is=class e3{constructor(f,m){$t(this,"point");$t(this,"isLeft");$t(this,"segment");$t(this,"otherSE");$t(this,"consumedBy");f.events===void 0?f.events=[this]:f.events.push(this),this.point=f,this.isLeft=m}static compare(f,m){let w=e3.comparePoints(f.point,m.point);return w!==0?w:(f.point!==m.point&&f.link(m),f.isLeft!==m.isLeft?f.isLeft?1:-1:_o.compare(f.segment,m.segment))}static comparePoints(f,m){return f.x.isLessThan(m.x)?-1:f.x.isGreaterThan(m.x)?1:f.y.isLessThan(m.y)?-1:f.y.isGreaterThan(m.y)?1:0}link(f){if(f.point===this.point)throw new Error("Tried to link already linked events");let m=f.point.events;for(let w=0,E=m.length;w<E;w++){let R=m[w];this.point.events.push(R),R.point=this.point}this.checkForConsuming()}checkForConsuming(){let f=this.point.events.length;for(let m=0;m<f;m++){let w=this.point.events[m];if(w.segment.consumedBy===void 0)for(let E=m+1;E<f;E++){let R=this.point.events[E];R.consumedBy===void 0&&w.otherSE.point.events===R.otherSE.point.events&&w.segment.consume(R.segment)}}}getAvailableLinkedEvents(){let f=[];for(let m=0,w=this.point.events.length;m<w;m++){let E=this.point.events[m];E!==this&&!E.segment.ringOut&&E.segment.isInResult()&&f.push(E)}return f}getLeftmostComparator(f){let m=new Map,w=E=>{let R=E.otherSE;m.set(E,{sine:xh(this.point,f.point,R.point),cosine:Xl(this.point,f.point,R.point)})};return(E,R)=>{m.has(E)||w(E),m.has(R)||w(R);let{sine:X,cosine:ne}=m.get(E),{sine:ce,cosine:xe}=m.get(R);return X.isGreaterThanOrEqualTo(0)&&ce.isGreaterThanOrEqualTo(0)?ne.isLessThan(xe)?1:ne.isGreaterThan(xe)?-1:0:X.isLessThan(0)&&ce.isLessThan(0)?ne.isLessThan(xe)?-1:ne.isGreaterThan(xe)?1:0:ce.isLessThan(X)?-1:ce.isGreaterThan(X)?1:0}}},wu=0,_o=class D0{constructor(f,m,w,E){$t(this,"id");$t(this,"leftSE");$t(this,"rightSE");$t(this,"rings");$t(this,"windings");$t(this,"ringOut");$t(this,"consumedBy");$t(this,"prev");$t(this,"_prevInResult");$t(this,"_beforeState");$t(this,"_afterState");$t(this,"_isInResult");this.id=++wu,this.leftSE=f,f.segment=this,f.otherSE=m,this.rightSE=m,m.segment=this,m.otherSE=f,this.rings=w,this.windings=E}static compare(f,m){let w=f.leftSE.point.x,E=m.leftSE.point.x,R=f.rightSE.point.x,X=m.rightSE.point.x;if(X.isLessThan(w))return 1;if(R.isLessThan(E))return-1;let ne=f.leftSE.point.y,ce=m.leftSE.point.y,xe=f.rightSE.point.y,We=m.rightSE.point.y;if(w.isLessThan(E)){if(ce.isLessThan(ne)&&ce.isLessThan(xe))return 1;if(ce.isGreaterThan(ne)&&ce.isGreaterThan(xe))return-1;let je=f.comparePoint(m.leftSE.point);if(je<0)return 1;if(je>0)return-1;let vt=m.comparePoint(f.rightSE.point);return vt!==0?vt:-1}if(w.isGreaterThan(E)){if(ne.isLessThan(ce)&&ne.isLessThan(We))return-1;if(ne.isGreaterThan(ce)&&ne.isGreaterThan(We))return 1;let je=m.comparePoint(f.leftSE.point);if(je!==0)return je;let vt=f.comparePoint(m.rightSE.point);return vt<0?1:vt>0?-1:1}if(ne.isLessThan(ce))return-1;if(ne.isGreaterThan(ce))return 1;if(R.isLessThan(X)){let je=m.comparePoint(f.rightSE.point);if(je!==0)return je}if(R.isGreaterThan(X)){let je=f.comparePoint(m.rightSE.point);if(je<0)return 1;if(je>0)return-1}if(!R.eq(X)){let je=xe.minus(ne),vt=R.minus(w),kt=We.minus(ce),Yt=X.minus(E);if(je.isGreaterThan(vt)&&kt.isLessThan(Yt))return 1;if(je.isLessThan(vt)&&kt.isGreaterThan(Yt))return-1}return R.isGreaterThan(X)?1:R.isLessThan(X)||xe.isLessThan(We)?-1:xe.isGreaterThan(We)?1:f.id<m.id?-1:f.id>m.id?1:0}static fromRing(f,m,w){let E,R,X,ne=is.comparePoints(f,m);if(ne<0)E=f,R=m,X=1;else if(ne>0)E=m,R=f,X=-1;else throw new Error(`Tried to create degenerate segment at [${f.x}, ${f.y}]`);let ce=new is(E,!0),xe=new is(R,!1);return new D0(ce,xe,[w],[X])}replaceRightSE(f){this.rightSE=f,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let f=this.leftSE.point.y,m=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:f.isLessThan(m)?f:m},ur:{x:this.rightSE.point.x,y:f.isGreaterThan(m)?f:m}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(f){return f.x.eq(this.leftSE.point.x)&&f.y.eq(this.leftSE.point.y)||f.x.eq(this.rightSE.point.x)&&f.y.eq(this.rightSE.point.y)}comparePoint(f){return Si.orient(this.leftSE.point,f,this.rightSE.point)}getIntersection(f){let m=this.bbox(),w=f.bbox(),E=vc(m,w);if(E===null)return null;let R=this.leftSE.point,X=this.rightSE.point,ne=f.leftSE.point,ce=f.rightSE.point,xe=rs(m,ne)&&this.comparePoint(ne)===0,We=rs(w,R)&&f.comparePoint(R)===0,je=rs(m,ce)&&this.comparePoint(ce)===0,vt=rs(w,X)&&f.comparePoint(X)===0;if(We&&xe)return vt&&!je?X:!vt&&je?ce:null;if(We)return je&&R.x.eq(ce.x)&&R.y.eq(ce.y)?null:R;if(xe)return vt&&X.x.eq(ne.x)&&X.y.eq(ne.y)?null:ne;if(vt&&je)return null;if(vt)return X;if(je)return ce;let kt=Te(R,this.vector(),ne,f.vector());return kt===null||!rs(E,kt)?null:Si.snap(kt)}split(f){let m=[],w=f.events!==void 0,E=new is(f,!0),R=new is(f,!1),X=this.rightSE;this.replaceRightSE(R),m.push(R),m.push(E);let ne=new D0(E,X,this.rings.slice(),this.windings.slice());return is.comparePoints(ne.leftSE.point,ne.rightSE.point)>0&&ne.swapEvents(),is.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),w&&(E.checkForConsuming(),R.checkForConsuming()),m}swapEvents(){let f=this.rightSE;this.rightSE=this.leftSE,this.leftSE=f,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let m=0,w=this.windings.length;m<w;m++)this.windings[m]*=-1}consume(f){let m=this,w=f;for(;m.consumedBy;)m=m.consumedBy;for(;w.consumedBy;)w=w.consumedBy;let E=D0.compare(m,w);if(E!==0){if(E>0){let R=m;m=w,w=R}if(m.prev===w){let R=m;m=w,w=R}for(let R=0,X=w.rings.length;R<X;R++){let ne=w.rings[R],ce=w.windings[R],xe=m.rings.indexOf(ne);xe===-1?(m.rings.push(ne),m.windings.push(ce)):m.windings[xe]+=ce}w.rings=null,w.windings=null,w.consumedBy=m,w.leftSE.consumedBy=m.leftSE,w.rightSE.consumedBy=m.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let f=this.prev.consumedBy||this.prev;this._beforeState=f.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let f=this.beforeState();this._afterState={rings:f.rings.slice(0),windings:f.windings.slice(0),multiPolys:[]};let m=this._afterState.rings,w=this._afterState.windings,E=this._afterState.multiPolys;for(let ne=0,ce=this.rings.length;ne<ce;ne++){let xe=this.rings[ne],We=this.windings[ne],je=m.indexOf(xe);je===-1?(m.push(xe),w.push(We)):w[je]+=We}let R=[],X=[];for(let ne=0,ce=m.length;ne<ce;ne++){if(w[ne]===0)continue;let xe=m[ne],We=xe.poly;if(X.indexOf(We)===-1)if(xe.isExterior)R.push(We);else{X.indexOf(We)===-1&&X.push(We);let je=R.indexOf(xe.poly);je!==-1&&R.splice(je,1)}}for(let ne=0,ce=R.length;ne<ce;ne++){let xe=R[ne].multiPoly;E.indexOf(xe)===-1&&E.push(xe)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let f=this.beforeState().multiPolys,m=this.afterState().multiPolys;switch(Hc.type){case"union":{let w=f.length===0,E=m.length===0;this._isInResult=w!==E;break}case"intersection":{let w,E;f.length<m.length?(w=f.length,E=m.length):(w=m.length,E=f.length),this._isInResult=E===Hc.numMultiPolys&&w<E;break}case"xor":{let w=Math.abs(f.length-m.length);this._isInResult=w%2===1;break}case"difference":{let w=E=>E.length===1&&E[0].isSubject;this._isInResult=w(f)!==w(m);break}}return this._isInResult}},Mr=class{constructor(l,f,m){$t(this,"poly");$t(this,"isExterior");$t(this,"segments");$t(this,"bbox");if(!Array.isArray(l)||l.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=f,this.isExterior=m,this.segments=[],typeof l[0][0]!="number"||typeof l[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let w=Si.snap({x:new Se(l[0][0]),y:new Se(l[0][1])});this.bbox={ll:{x:w.x,y:w.y},ur:{x:w.x,y:w.y}};let E=w;for(let R=1,X=l.length;R<X;R++){if(typeof l[R][0]!="number"||typeof l[R][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let ne=Si.snap({x:new Se(l[R][0]),y:new Se(l[R][1])});ne.x.eq(E.x)&&ne.y.eq(E.y)||(this.segments.push(_o.fromRing(E,ne,this)),ne.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=ne.x),ne.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=ne.y),ne.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=ne.x),ne.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=ne.y),E=ne)}(!w.x.eq(E.x)||!w.y.eq(E.y))&&this.segments.push(_o.fromRing(E,w,this))}getSweepEvents(){let l=[];for(let f=0,m=this.segments.length;f<m;f++){let w=this.segments[f];l.push(w.leftSE),l.push(w.rightSE)}return l}},$c=class{constructor(l,f){$t(this,"multiPoly");$t(this,"exteriorRing");$t(this,"interiorRings");$t(this,"bbox");if(!Array.isArray(l))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Mr(l[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let m=1,w=l.length;m<w;m++){let E=new Mr(l[m],this,!1);E.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=E.bbox.ll.x),E.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=E.bbox.ll.y),E.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=E.bbox.ur.x),E.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=E.bbox.ur.y),this.interiorRings.push(E)}this.multiPoly=f}getSweepEvents(){let l=this.exteriorRing.getSweepEvents();for(let f=0,m=this.interiorRings.length;f<m;f++){let w=this.interiorRings[f].getSweepEvents();for(let E=0,R=w.length;E<R;E++)l.push(w[E])}return l}},af=class{constructor(l,f){$t(this,"isSubject");$t(this,"polys");$t(this,"bbox");if(!Array.isArray(l))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof l[0][0][0]=="number"&&(l=[l])}catch{}this.polys=[],this.bbox={ll:{x:new Se(Number.POSITIVE_INFINITY),y:new Se(Number.POSITIVE_INFINITY)},ur:{x:new Se(Number.NEGATIVE_INFINITY),y:new Se(Number.NEGATIVE_INFINITY)}};for(let m=0,w=l.length;m<w;m++){let E=new $c(l[m],this);E.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=E.bbox.ll.x),E.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=E.bbox.ll.y),E.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=E.bbox.ur.x),E.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=E.bbox.ur.y),this.polys.push(E)}this.isSubject=f}getSweepEvents(){let l=[];for(let f=0,m=this.polys.length;f<m;f++){let w=this.polys[f].getSweepEvents();for(let E=0,R=w.length;E<R;E++)l.push(w[E])}return l}},Vc=class a1{constructor(f){$t(this,"events");$t(this,"poly");$t(this,"_isExteriorRing");$t(this,"_enclosingRing");this.events=f;for(let m=0,w=f.length;m<w;m++)f[m].segment.ringOut=this;this.poly=null}static factory(f){let m=[];for(let w=0,E=f.length;w<E;w++){let R=f[w];if(!R.isInResult()||R.ringOut)continue;let X=null,ne=R.leftSE,ce=R.rightSE,xe=[ne],We=ne.point,je=[];for(;X=ne,ne=ce,xe.push(ne),ne.point!==We;)for(;;){let vt=ne.getAvailableLinkedEvents();if(vt.length===0){let _n=xe[0].point,Ln=xe[xe.length-1].point;throw new Error(`Unable to complete output ring starting at [${_n.x}, ${_n.y}]. Last matching segment found ends at [${Ln.x}, ${Ln.y}].`)}if(vt.length===1){ce=vt[0].otherSE;break}let kt=null;for(let _n=0,Ln=je.length;_n<Ln;_n++)if(je[_n].point===ne.point){kt=_n;break}if(kt!==null){let _n=je.splice(kt)[0],Ln=xe.splice(_n.index);Ln.unshift(Ln[0].otherSE),m.push(new a1(Ln.reverse()));continue}je.push({index:xe.length,point:ne.point});let Yt=ne.getLeftmostComparator(X);ce=vt.sort(Yt)[0].otherSE;break}m.push(new a1(xe))}return m}getGeom(){let f=this.events[0].point,m=[f];for(let xe=1,We=this.events.length-1;xe<We;xe++){let je=this.events[xe].point,vt=this.events[xe+1].point;Si.orient(je,f,vt)!==0&&(m.push(je),f=je)}if(m.length===1)return null;let w=m[0],E=m[1];Si.orient(w,f,E)===0&&m.shift(),m.push(m[0]);let R=this.isExteriorRing()?1:-1,X=this.isExteriorRing()?0:m.length-1,ne=this.isExteriorRing()?m.length:-1,ce=[];for(let xe=X;xe!=ne;xe+=R)ce.push([m[xe].x.toNumber(),m[xe].y.toNumber()]);return ce}isExteriorRing(){if(this._isExteriorRing===void 0){let f=this.enclosingRing();this._isExteriorRing=f?!f.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var E,R;let f=this.events[0];for(let X=1,ne=this.events.length;X<ne;X++){let ce=this.events[X];is.compare(f,ce)>0&&(f=ce)}let m=f.segment.prevInResult(),w=m?m.prevInResult():null;for(;;){if(!m)return null;if(!w)return m.ringOut;if(w.ringOut!==m.ringOut)return((E=w.ringOut)==null?void 0:E.enclosingRing())!==m.ringOut?m.ringOut:(R=m.ringOut)==null?void 0:R.enclosingRing();m=w.prevInResult(),w=m?m.prevInResult():null}}},Ua=class{constructor(l){$t(this,"exteriorRing");$t(this,"interiorRings");this.exteriorRing=l,l.poly=this,this.interiorRings=[]}addInterior(l){this.interiorRings.push(l),l.poly=this}getGeom(){let l=this.exteriorRing.getGeom();if(l===null)return null;let f=[l];for(let m=0,w=this.interiorRings.length;m<w;m++){let E=this.interiorRings[m].getGeom();E!==null&&f.push(E)}return f}},yc=class{constructor(l){$t(this,"rings");$t(this,"polys");this.rings=l,this.polys=this._composePolys(l)}getGeom(){let l=[];for(let f=0,m=this.polys.length;f<m;f++){let w=this.polys[f].getGeom();w!==null&&l.push(w)}return l}_composePolys(l){var m;let f=[];for(let w=0,E=l.length;w<E;w++){let R=l[w];if(!R.poly)if(R.isExteriorRing())f.push(new Ua(R));else{let X=R.enclosingRing();X!=null&&X.poly||f.push(new Ua(X)),(m=X==null?void 0:X.poly)==null||m.addInterior(R)}}return f}},Lh=class{constructor(l,f=_o.compare){$t(this,"queue");$t(this,"tree");$t(this,"segments");this.queue=l,this.tree=new nn(f),this.segments=[]}process(l){let f=l.segment,m=[];if(l.consumedBy)return l.isLeft?this.queue.delete(l.otherSE):this.tree.delete(f),m;l.isLeft&&this.tree.add(f);let w=f,E=f;do w=this.tree.lastBefore(w);while(w!=null&&w.consumedBy!=null);do E=this.tree.firstAfter(E);while(E!=null&&E.consumedBy!=null);if(l.isLeft){let R=null;if(w){let ne=w.getIntersection(f);if(ne!==null&&(f.isAnEndpoint(ne)||(R=ne),!w.isAnEndpoint(ne))){let ce=this._splitSafely(w,ne);for(let xe=0,We=ce.length;xe<We;xe++)m.push(ce[xe])}}let X=null;if(E){let ne=E.getIntersection(f);if(ne!==null&&(f.isAnEndpoint(ne)||(X=ne),!E.isAnEndpoint(ne))){let ce=this._splitSafely(E,ne);for(let xe=0,We=ce.length;xe<We;xe++)m.push(ce[xe])}}if(R!==null||X!==null){let ne=null;R===null?ne=X:X===null?ne=R:ne=is.comparePoints(R,X)<=0?R:X,this.queue.delete(f.rightSE),m.push(f.rightSE);let ce=f.split(ne);for(let xe=0,We=ce.length;xe<We;xe++)m.push(ce[xe])}m.length>0?(this.tree.delete(f),m.push(l)):(this.segments.push(f),f.prev=w)}else{if(w&&E){let R=w.getIntersection(E);if(R!==null){if(!w.isAnEndpoint(R)){let X=this._splitSafely(w,R);for(let ne=0,ce=X.length;ne<ce;ne++)m.push(X[ne])}if(!E.isAnEndpoint(R)){let X=this._splitSafely(E,R);for(let ne=0,ce=X.length;ne<ce;ne++)m.push(X[ne])}}}this.tree.delete(f)}return m}_splitSafely(l,f){this.tree.delete(l);let m=l.rightSE;this.queue.delete(m);let w=l.split(f);return w.push(m),l.consumedBy===void 0&&this.tree.add(l),w}},pd=class{constructor(){$t(this,"type");$t(this,"numMultiPolys")}run(l,f,m){Yu.type=l;let w=[new af(f,!0)];for(let ce=0,xe=m.length;ce<xe;ce++)w.push(new af(m[ce],!1));if(Yu.numMultiPolys=w.length,Yu.type==="difference"){let ce=w[0],xe=1;for(;xe<w.length;)vc(w[xe].bbox,ce.bbox)!==null?xe++:w.splice(xe,1)}if(Yu.type==="intersection")for(let ce=0,xe=w.length;ce<xe;ce++){let We=w[ce];for(let je=ce+1,vt=w.length;je<vt;je++)if(vc(We.bbox,w[je].bbox)===null)return[]}let E=new nn(is.compare);for(let ce=0,xe=w.length;ce<xe;ce++){let We=w[ce].getSweepEvents();for(let je=0,vt=We.length;je<vt;je++)E.add(We[je])}let R=new Lh(E),X=null;for(E.size!=0&&(X=E.first(),E.delete(X));X;){let ce=R.process(X);for(let xe=0,We=ce.length;xe<We;xe++){let je=ce[xe];je.consumedBy===void 0&&E.add(je)}E.size!=0?(X=E.first(),E.delete(X)):X=null}Si.reset();let ne=Vc.factory(R.segments);return new yc(ne).getGeom()}},Yu=new pd,Hc=Yu,Ol=(l,...f)=>Hc.run("intersection",l,f),gd=(l,...f)=>Hc.run("difference",l,f);Si.set;function Gc(l){let f={type:"Feature"};return f.geometry=l,f}function qc(l){return l.type==="Feature"?l.geometry:l}function lf(l){return l&&l.geometry&&l.geometry.coordinates?l.geometry.coordinates:l}function uf(l){return Gc({type:"LineString",coordinates:l})}function ba(l){return Gc({type:"MultiLineString",coordinates:l})}function cf(l){return Gc({type:"Polygon",coordinates:l})}function hf(l){return Gc({type:"MultiPolygon",coordinates:l})}function ff(l,f){let m=qc(l),w=qc(f),E=Ol(m.coordinates,w.coordinates);return E.length===0?null:E.length===1?cf(E[0]):hf(E)}function b(l,f){let m=qc(l),w=qc(f),E=gd(m.coordinates,w.coordinates);return E.length===0?null:E.length===1?cf(E[0]):hf(E)}function C(l){return Array.isArray(l)?1+C(l[0]):-1}function H(l){l instanceof L.Polyline&&(l=l.toGeoJSON(15));let f=lf(l),m=C(f),w=[];return m>1?f.forEach(E=>{w.push(uf(E))}):w.push(l),w}function ie(l){let f=[];return l.eachLayer(m=>{f.push(lf(m.toGeoJSON(15)))}),ba(f)}Gi.Cut=Gi.Polygon.extend({initialize(l){this._map=l,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let l=this._layer.getLatLngs();if(l.length<=2)return;let f=L.polygon(l,this.options.pathOptions);f._latlngInfos=this._layer._latlngInfo,this.cut(f),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:w,originalLayer:E})=>{this._fireCut(E,w,E),this._fireCut(this._map,w,E),E.pm._fireEdit()}),this._editedLayers=[];let m=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(m))},cut(l){let f=this._map._layers,m=l._latlngInfos||[];Object.keys(f).map(w=>f[w]).filter(w=>w.pm).filter(w=>!w._pmTempLayer).filter(w=>!L.PM.optIn&&!w.options.pmIgnore||L.PM.optIn&&w.options.pmIgnore===!1).filter(w=>w instanceof L.Polyline).filter(w=>w!==l).filter(w=>w.pm.options.allowCutting).filter(w=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(w)>-1:!0).filter(w=>!this._layerGroup.hasLayer(w)).filter(w=>{try{let E=!!es(l.toGeoJSON(15),w.toGeoJSON(15)).features.length>0;return E||w instanceof L.Polyline&&!(w instanceof L.Polygon)?E:!!ff(l.toGeoJSON(15),w.toGeoJSON(15))}catch{return w instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(w=>{let E;if(w instanceof L.Polygon){E=L.polygon(w.getLatLngs());let ce=E.getLatLngs();m.forEach(xe=>{if(xe&&xe.snapInfo){let{latlng:We}=xe,je=this._calcClosestLayer(We,[E]);if(je&&je.segment&&je.distance<this.options.snapDistance){let{segment:vt}=je;if(vt&&vt.length===2){let{indexPath:kt,parentPath:Yt,newIndex:_n}=L.PM.Utils._getIndexFromSegment(ce,vt);(kt.length>1?(0,gi.default)(ce,Yt):ce).splice(_n,0,We)}}}})}else E=w;let R=this._cutLayer(l,E),X=L.geoJSON(R,w.options);X.getLayers().length===1&&([X]=X.getLayers()),this._setPane(X,"layerPane");let ne=X.addTo(this._map.pm._getContainingLayer());if(ne.pm.enable(w.pm.options),ne.pm.disable(),w._pmTempLayer=!0,l._pmTempLayer=!0,w.remove(),w.removeFrom(this._map.pm._getContainingLayer()),l.remove(),l.removeFrom(this._map.pm._getContainingLayer()),ne.getLayers&&ne.getLayers().length===0&&this._map.pm.removeLayer({target:ne}),ne instanceof L.LayerGroup?(ne.eachLayer(ce=>{this._addDrawnLayerProp(ce)}),this._addDrawnLayerProp(ne)):this._addDrawnLayerProp(ne),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let ce=this.options.layersToCut.indexOf(w);ce>-1&&this.options.layersToCut.splice(ce,1)}this._editedLayers.push({layer:ne,originalLayer:w})})},_cutLayer(l,f){let m=L.geoJSON(),w;if(f instanceof L.Polygon)w=b(f.toGeoJSON(15),l.toGeoJSON(15));else{let E=H(f);E.forEach(R=>{let X=Un(R,l.toGeoJSON(15)),ne;X&&X.features.length>0?ne=L.geoJSON(X):ne=L.geoJSON(R),ne.getLayers().forEach(ce=>{ea(l.toGeoJSON(15),ce.toGeoJSON(15))||ce.addTo(m)})}),E.length>1?w=ie(m):w=m.toGeoJSON(15)}return w},_change:L.Util.falseFn}),Gi.Text=Gi.extend({initialize(l){this._map=l,this._shape="Text",this.toolbarButtonName="drawText"},enable(l){L.Util.setOptions(this,l),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Xn("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var l;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(l=this._hintMarker)==null||l.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this.options.snappable){let f=l;f.target=this._hintMarker,this._handleSnapping(f)}},_createMarker(l){var E,R,X,ne;if(!l.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let f=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(E=this.options.textOptions)==null?void 0:E.className){let ce=this.options.textOptions.className.split(" ");this.textArea.classList.add(...ce)}let m=this._createTextIcon(this.textArea),w=new L.Marker(f,{textMarker:!0,_textMarkerOverPM:!0,icon:m});if(this._setPane(w,"markerPane"),this._finishLayer(w),w.pm||(w.options.draggable=!1),w.addTo(this._map.pm._getContainingLayer()),w.pm){w.pm.textArea=this.textArea,L.setOptions(w.pm,{removeIfEmpty:((R=this.options.textOptions)==null?void 0:R.removeIfEmpty)??!0});let ce=((X=this.options.textOptions)==null?void 0:X.focusAfterDraw)??!0;w.pm._createTextMarker(ce),(ne=this.options.textOptions)!=null&&ne.text&&w.pm.setText(this.options.textOptions.text)}this._fireCreate(w),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(l){this.enable(),this._hintMarker.setLatLng(l.latlng)},_createTextArea(){let l=document.createElement("textarea");return l.readOnly=!0,l.classList.add("pm-textarea","pm-disabled"),l},_createTextIcon(l){return L.divIcon({className:"pm-text-marker",html:l})}});var _e={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,Qr(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let l=this._getDOMElem();l&&(Qr(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(l)):L.DomEvent.on(l,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,Qr(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let l=this._getDOMElem();l&&(Qr(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(l)):L.DomEvent.off(l,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(l){let f=l.touches?l.touches[0]:l,m={originalEvent:f,target:this._layer};return m.containerPoint=this._map.mouseEventToContainerPoint(f),m.latlng=this._map.containerPointToLatLng(m.containerPoint),this._dragMixinOnMouseDown(m),!1},_simulateMouseMoveEvent(l){let f=l.touches?l.touches[0]:l,m={originalEvent:f,target:this._layer};return m.containerPoint=this._map.mouseEventToContainerPoint(f),m.latlng=this._map.containerPointToLatLng(m.containerPoint),this._dragMixinOnMouseMove(m),!1},_simulateMouseUpEvent(l){let f={originalEvent:l.touches?l.touches[0]:l,target:this._layer};return l.type.indexOf("touch")===-1&&(f.containerPoint=this._map.mouseEventToContainerPoint(l),f.latlng=this._map.containerPointToLatLng(f.containerPoint)),this._dragMixinOnMouseUp(f),!1},_dragMixinOnMouseDown(l){if(l.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(l);let f=l._fromLayerSync,m=this._syncLayers("_dragMixinOnMouseDown",l);if(this._layer instanceof L.Marker&&(this.options.snappable&&!f&&!m?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let w="resizeableCircleMarker";this._layer instanceof L.Circle&&(w="resizeableCircle"),this.options.snappable&&!f&&!m?this._layer.pm.options[w]||this._initSnappableMarkersDrag():this._layer.pm.options[w]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=l.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(l){this._overwriteEventIfItComesFromMarker(l);let f=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",l),this._dragging||(this._dragging=!0,L.DomUtil.addClass(f,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=l.latlng),this._onLayerDrag(l),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(l){let f=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",l),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,f&&L.DomUtil.removeClass(f,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(l){let{latlng:f}=l,m={lat:f.lat-this._tempDragCoord.lat,lng:f.lng-this._tempDragCoord.lng},w=E=>E.map(R=>{if(Array.isArray(R))return w(R);let X={lat:R.lat+m.lat,lng:R.lng+m.lng};return(R.alt||R.alt===0)&&(X.alt=R.alt),X});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let E=w([this._layer.getLatLng()]);this._layer.setLatLng(E[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let E=this._layer.getLatLng();this._layer._snapped&&(E=this._layer._orgLatLng);let R=w([E]);this._layer.setLatLng(R[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let E=w([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(E),this._fireChange(this._layer.getBounds(),"Edit")}else{let E=w(this._layer.getLatLngs());this._layer.setLatLngs(E),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=f,l.layer=this._layer,this._fireDrag(l)},addDraggingClass(){let l=this._getDOMElem();l&&L.DomUtil.addClass(l,"leaflet-pm-draggable")},removeDraggingClass(){let l=this._getDOMElem();l&&L.DomUtil.removeClass(l,"leaflet-pm-draggable")},_getDOMElem(){let l=null;return this._layer._path?l=this._layer._path:this._layer._renderer&&this._layer._renderer._container?l=this._layer._renderer._container:this._layer._image?l=this._layer._image:this._layer._icon&&(l=this._layer._icon),l},_overwriteEventIfItComesFromMarker(l){l.target.getLatLng&&(!l.target._radius||l.target._radius<=10)&&(l.containerPoint=this._map.mouseEventToContainerPoint(l.originalEvent),l.latlng=this._map.containerPointToLatLng(l.containerPoint))},_syncLayers(l,f){if(this.enabled())return!1;if(!f._fromLayerSync&&this._layer===f.target&&this.options.syncLayersOnDrag){f._fromLayerSync=!0;let m=[];if(L.Util.isArray(this.options.syncLayersOnDrag))m=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(w=>{w instanceof L.LayerGroup&&(m=m.concat(w.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let w in this._parentLayerGroup){let E=this._parentLayerGroup[w];E.pm&&(m=E.pm.getLayers(!0))}return L.Util.isArray(m)&&m.length>0&&(m=m.filter(w=>!!w.pm).filter(w=>!!w.pm.options.draggable),m.forEach(w=>{w!==this._layer&&w.pm[l]&&(w._snapped=!1,w.pm[l](f))})),m.length>0}return!1},_stopDOMImageDrag(l){return l.preventDefault(),!1}},Ee=_e,Ae=h(xr());function ke(l,f,m,w){return m.unproject(f.transform(m.project(l,w)),w)}function Be(l,f,m){let w=m.getMaxZoom();if(w===1/0&&(w=m.getZoom()),L.Util.isArray(l)){let E=[];return l.forEach(R=>{E.push(Be(R,f,m))}),E}return l instanceof L.LatLng?ke(l,f,m,w):null}function $e(l,f){f instanceof L.Layer&&(f=f.getLatLng());let m=l.getMaxZoom();return m===1/0&&(m=l.getZoom()),l.project(f,m)}function dt(l,f){let m=l.getMaxZoom();return m===1/0&&(m=l.getZoom()),l.unproject(f,m)}var Bt={_onRotateStart(l){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=$e(this._map,this._rotationOriginLatLng),this._rotationStartPoint=$e(this._map,l.target.getLatLng()),this._initialRotateLatLng=Ps(this._layer),this._startAngle=this.getAngle();let f=Ps(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,f),this._fireRotationStart(this._map,f)},_onRotate(l){let f=$e(this._map,l.target.getLatLng()),m=this._rotationStartPoint,w=this._rotationOriginPoint,E=Math.atan2(f.y-w.y,f.x-w.x)-Math.atan2(m.y-w.y,m.x-w.x);this._layer.setLatLngs(this._rotateLayer(E,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let R=this;function X(We,je=[],vt=-1){if(vt>-1&&je.push(vt),L.Util.isArray(We[0]))We.forEach((kt,Yt)=>X(kt,je.slice(),Yt));else{let kt=je.length>0?(0,Ae.default)(R._markers,je):R._markers[0];We.forEach((Yt,_n)=>{kt[_n].setLatLng(Yt)})}}X(this._layer.getLatLngs());let ne=Ps(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(E,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let ce=E*180/Math.PI;ce=ce<0?ce+360:ce;let xe=ce+this._startAngle;this._setAngle(xe),this._rotationLayer.pm._setAngle(xe),this._fireRotation(this._rotationLayer,ce,ne),this._fireRotation(this._map,ce,ne),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let l=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let f=Ps(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Ps(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,l,f),this._fireRotationEnd(this._map,l,f),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(l,f,m,w,E){let R=$e(E,m);return this._matrix=w.clone().rotate(l,R).flip(),Be(f,this._matrix,E)},_setAngle(l){l=l<0?l+360:l,this._angle=l%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let l=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),f=l.getCenter();return l.removeFrom(this._layer._map),f},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(Ys(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let l={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),l),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Ps(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(l){let f=this.getAngle(),m=this._layer.getLatLngs(),w=l*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(w,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+l),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(w,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let E=this.getAngle()-f;E=E<0?E+360:E,this._startAngle=f,this._fireRotation(this._layer,E,m,this._layer),this._fireRotation(this._map||this._layer._map,E,m,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(l){let f=l-this.getAngle();this.rotateLayer(f)},getAngle(){return this._angle||0},setInitAngle(l){this._setAngle(l)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(l){this._rotationCenter=l,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(l)}},Ot=Bt,wt=L.Class.extend({includes:[Ee,gs,Ot,Pl],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(l){L.Util.setOptions(this,l)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(l,f){f==="layerPane"?l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":f==="vertexPane"?l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":f==="markerPane"&&(l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(l,f){let m=f.target,w={layer:this._layer,marker:m,event:f},E="";return l==="move"?E="moveVertexValidation":l==="add"?E="addVertexValidation":l==="remove"&&(E="removeVertexValidation"),this.options[E]&&typeof this.options[E]=="function"&&!this.options[E](w)?(l==="move"&&(m._cancelDragEventChain=m.getLatLng()),!1):(m._cancelDragEventChain=null,!0)},_vertexValidationDrag(l){return l._cancelDragEventChain?(l._latlng=l._cancelDragEventChain,l.update(),!1):!0},_vertexValidationDragEnd(l){return l._cancelDragEventChain?(l._cancelDragEventChain=null,!1):!0}}),qt=wt;qt.LayerGroup=L.Class.extend({initialize(l){this._layerGroup=l,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(w=>this._initLayer(w));let f=w=>{if(w.layer._pmTempLayer)return;this._layers=this.getLayers();let E=this._layers.filter(R=>!R.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in R.pm._parentLayerGroup));E.forEach(R=>{this._initLayer(R)}),E.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(f,100,this),this),this._layerGroup.on("layerremove",w=>{this._removeLayerFromGroup(w.target)},this);let m=w=>{w.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(m,100,this),this)},enable(l,f=[]){f.length===0&&(this._layers=this.getLayers()),this._options=l,this._layers.forEach(m=>{m instanceof L.LayerGroup?f.indexOf(m._leaflet_id)===-1&&(f.push(m._leaflet_id),m.pm.enable(l,f)):m.pm.enable(l)})},disable(l=[]){l.length===0&&(this._layers=this.getLayers()),this._layers.forEach(f=>{f instanceof L.LayerGroup?l.indexOf(f._leaflet_id)===-1&&(l.push(f._leaflet_id),f.pm.disable(l)):f.pm.disable()})},enabled(l=[]){return l.length===0&&(this._layers=this.getLayers()),!!this._layers.find(f=>f instanceof L.LayerGroup?l.indexOf(f._leaflet_id)===-1?(l.push(f._leaflet_id),f.pm.enabled(l)):!1:f.pm.enabled())},toggleEdit(l,f=[]){f.length===0&&(this._layers=this.getLayers()),this._options=l,this._layers.forEach(m=>{m instanceof L.LayerGroup?f.indexOf(m._leaflet_id)===-1&&(f.push(m._leaflet_id),m.pm.toggleEdit(l,f)):m.pm.toggleEdit(l)})},_initLayer(l){let f=L.Util.stamp(this._layerGroup);l.pm._parentLayerGroup||(l.pm._parentLayerGroup={}),l.pm._parentLayerGroup[f]=this._layerGroup},_removeLayerFromGroup(l){if(l.pm&&l.pm._layerGroup){let f=L.Util.stamp(this._layerGroup);delete l.pm._layerGroup[f]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(l=>l.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var l;return this._map||((l=this._layers.find(f=>!!f._map))==null?void 0:l._map)||null},getLayers(l=!1,f=!0,m=!0,w=[]){let E=[];return l?this._layerGroup.getLayers().forEach(R=>{E.push(R),R instanceof L.LayerGroup&&w.indexOf(R._leaflet_id)===-1&&(w.push(R._leaflet_id),E=E.concat(R.pm.getLayers(!0,!0,!0,w)))}):E=this._layerGroup.getLayers(),m&&(E=E.filter(R=>!(R instanceof L.LayerGroup))),f&&(E=E.filter(R=>!!R.pm),E=E.filter(R=>!R._pmTempLayer),E=E.filter(R=>!L.PM.optIn&&!R.options.pmIgnore||L.PM.optIn&&R.options.pmIgnore===!1)),E},setOptions(l,f=[]){f.length===0&&(this._layers=this.getLayers()),this.options=l,this._layers.forEach(m=>{m.pm&&(m instanceof L.LayerGroup?f.indexOf(m._leaflet_id)===-1&&(f.push(m._leaflet_id),m.pm.setOptions(l,f)):m.pm.setOptions(l))})}}),qt.Marker=qt.extend({_shape:"Marker",initialize(l){this._layer=l,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(l={draggable:!0}){if(L.Util.setOptions(this,l),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(l){this.enabled()?this.disable():this.enable(l)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(l){let f=l.target;f.remove(),this._fireRemove(f),this._fireRemove(this._map,f)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let l=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,l.off("pm:drag",this._handleSnapping,this),l.on("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.on("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this),l.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let l=this._layer;l.off("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this)}});var Ut=h(xr()),pt={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let l=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=l.filter((f,m,w)=>w.indexOf(f)===m)},_removeFromCache(l){let f=this.markerCache.indexOf(l);f>-1&&this.markerCache.splice(f,1)},renderLimits(l){this.markerCache.forEach(f=>{l.includes(f)?this._markerGroup.addLayer(f):this._markerGroup.removeLayer(f)})},applyLimitFilters({latlng:l={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let f=[...this._filterClosestMarkers(l)];this.renderLimits(f)},_filterClosestMarkers(l){let f=[...this.markerCache],m=this.options.limitMarkersToCount;return m===-1?f:(f.sort((w,E)=>{let R=w._latlng.distanceTo(l),X=E._latlng.distanceTo(l);return R-X}),f.filter((w,E)=>m>-1?E<m:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(l){this._preventRenderMarkers=!!l}},yt=pt;qt.Line=qt.extend({includes:[yt],_shape:"Line",initialize(l){this._layer=l,this._enabled=!1},enable(l){if(L.Util.setOptions(this,l),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let l=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(l,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(l){return this.enabled()?this.disable():this.enable(l),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let l=this._map,f=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(l),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let m=w=>{if(Array.isArray(w[0]))return w.map(m,this);let E=w.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&w.map((R,X)=>{let ne=this.isPolygon()?(X+1)%w.length:X+1;return this._createMiddleMarker(E[X],E[ne])}),E};this._markers=m(f),this.filterMarkerGroup(),l.addLayer(this._markerGroup)},_createMarker(l){let f=new L.Marker(l,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(f,"vertexPane"),f._pmTempLayer=!0,this.options.rotate?(f.on("dragstart",this._onRotateStart,this),f.on("drag",this._onRotate,this),f.on("dragend",this._onRotateEnd,this)):(f.on("click",this._onVertexClick,this),f.on("dragstart",this._onMarkerDragStart,this),f.on("move",this._onMarkerDrag,this),f.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||f.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(f),f},_createMiddleMarker(l,f){if(!l||!f)return!1;let m=L.PM.Utils.calcMiddleLatLng(this._map,l.getLatLng(),f.getLatLng()),w=this._createMarker(m),E=L.divIcon({className:"marker-icon marker-icon-middle"});return w.setIcon(E),w.leftM=l,w.rightM=f,l._middleMarkerNext=w,f._middleMarkerPrev=w,w.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),w.on("movestart",this._onMiddleMarkerMoveStart,this),w},_onMiddleMarkerClick(l){let f=l.target;if(!this._vertexValidation("add",l))return;let m=L.divIcon({className:"marker-icon"});f.setIcon(m),this._addMarker(f,f.leftM,f.rightM)},_onMiddleMarkerMoveStart(l){let f=l.target;if(f.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",l)){f.on("move",this._onMiddleMarkerMovePrevent,this);return}f._dragging=!0,this._addMarker(f,f.leftM,f.rightM)},_onMiddleMarkerMovePrevent(l){let f=l.target;this._vertexValidationDrag(f)},_onMiddleMarkerMoveEnd(l){let f=l.target;if(f.off("move",this._onMiddleMarkerMovePrevent,this),f.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(f))return;let m=L.divIcon({className:"marker-icon"});f.setIcon(m),setTimeout(()=>{delete f._dragging},100)},_addMarker(l,f,m){l.off("movestart",this._onMiddleMarkerMoveStart,this),l.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let w=l.getLatLng(),E=this._layer._latlngs;delete l.leftM,delete l.rightM;let{indexPath:R,index:X,parentPath:ne}=L.PM.Utils.findDeepMarkerIndex(this._markers,f),ce=R.length>1?(0,Ut.default)(E,ne):E,xe=R.length>1?(0,Ut.default)(this._markers,ne):this._markers;ce.splice(X+1,0,w),xe.splice(X+1,0,l),this._layer.setLatLngs(E),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(f,l),this._createMiddleMarker(l,m)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(l,L.PM.Utils.findDeepMarkerIndex(this._markers,l).indexPath,w),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return Pr(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(l){let f=this._layer,m,w;if(this.options.allowSelfIntersection?m=!1:(w=Pr(this._layer.toGeoJSON(15)),m=w.features.length>0),m){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return m;l?this._flashLayer():(f.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(w)}else f.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return m},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(l,f){l.forEach(m=>{Array.isArray(m)?this._updateDisabledMarkerStyle(m,f):m._icon&&(f&&!this._checkMarkerAllowedToDrag(m)?L.DomUtil.addClass(m._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(m._icon,"vertexmarker-disabled"))})},_removeMarker(l){let f=l.target;if(!this._vertexValidation("remove",l))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=Ps(this._layer,this._layer.getLatLngs()));let m=this._layer.getLatLngs(),{indexPath:w,index:E,parentPath:R}=L.PM.Utils.findDeepMarkerIndex(this._markers,f);if(!w)return;let X=w.length>1?(0,Ut.default)(m,R):m,ne=w.length>1?(0,Ut.default)(this._markers,R):this._markers,ce=R[R.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!ce&&(X.length<=2||this.isPolygon()&&X.length<=3)){this._flashLayer();return}X.splice(E,1),this._layer.setLatLngs(m),this.isPolygon()&&X.length<=2&&X.splice(0,X.length);let xe=!1;if(X.length<=1&&(X.splice(0,X.length),R.length>1&&w.length>1&&(m=nl(m)),this._layer.setLatLngs(m),this._initMarkers(),xe=!0),Hi(m)||this._layer.remove(),m=nl(m),this._layer.setLatLngs(m),this._markers=nl(this._markers),!xe&&(ne=w.length>1?(0,Ut.default)(this._markers,R):this._markers,f._middleMarkerPrev&&(this._markerGroup.removeLayer(f._middleMarkerPrev),this._removeFromCache(f._middleMarkerPrev)),f._middleMarkerNext&&(this._markerGroup.removeLayer(f._middleMarkerNext),this._removeFromCache(f._middleMarkerNext)),this._markerGroup.removeLayer(f),this._removeFromCache(f),ne)){let We,je;if(this.isPolygon()?(We=(E+1)%ne.length,je=(E+(ne.length-1))%ne.length):(je=E-1<0?void 0:E-1,We=E+1>=ne.length?void 0:E+1),We!==je){let vt=ne[je],kt=ne[We];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(vt,kt)}ne.splice(E,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(f,w),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(l){let f=this._layer.getLatLngs(),m=l.getLatLng(),{indexPath:w,index:E,parentPath:R}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);(w.length>1?(0,Ut.default)(f,R):f).splice(E,1,m),this._layer.setLatLngs(f)},_getNeighborMarkers(l){let{indexPath:f,index:m,parentPath:w}=L.PM.Utils.findDeepMarkerIndex(this._markers,l),E=f.length>1?(0,Ut.default)(this._markers,w):this._markers,R=(m+1)%E.length,X=(m+(E.length-1))%E.length,ne=E[X],ce=E[R];return{prevMarker:ne,nextMarker:ce}},_checkMarkerAllowedToDrag(l){let{prevMarker:f,nextMarker:m}=this._getNeighborMarkers(l),w=L.polyline([f.getLatLng(),l.getLatLng()]),E=L.polyline([l.getLatLng(),m.getLatLng()]),R=es(this._layer.toGeoJSON(15),w.toGeoJSON(15)).features.length,X=es(this._layer.toGeoJSON(15),E.toGeoJSON(15)).features.length;return l.getLatLng()===this._markers[0][0].getLatLng()?X+=1:l.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(R+=1),!(R<=2&&X<=2)},_onMarkerDragStart(l){let f=l.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",l))return;let{indexPath:m}=L.PM.Utils.findDeepMarkerIndex(this._markers,f);this._fireMarkerDragStart(l,m),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Ps(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(f):this._markerAllowedToDrag=null},_onMarkerDrag(l){let f=l.target;if(!this._vertexValidationDrag(f))return;let{indexPath:m,index:w,parentPath:E}=L.PM.Utils.findDeepMarkerIndex(this._markers,f);if(!m)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(f);let R=m.length>1?(0,Ut.default)(this._markers,E):this._markers,X=(w+1)%R.length,ne=(w+(R.length-1))%R.length,ce=f.getLatLng(),xe=R[ne].getLatLng(),We=R[X].getLatLng();if(f._middleMarkerNext){let je=L.PM.Utils.calcMiddleLatLng(this._map,ce,We);f._middleMarkerNext.setLatLng(je)}if(f._middleMarkerPrev){let je=L.PM.Utils.calcMiddleLatLng(this._map,ce,xe);f._middleMarkerPrev.setLatLng(je)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(l,m),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(l){let f=l.target;if(!this._vertexValidationDragEnd(f))return;let{indexPath:m}=L.PM.Utils.findDeepMarkerIndex(this._markers,f),w=!this.options.allowSelfIntersection&&this.hasSelfIntersection();w&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(w=!1);let E=!this.options.allowSelfIntersection&&w;if(this._fireMarkerDragEnd(l,m,E),E){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(l,m);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(l){let f=l.target;if(f._dragging)return;let{indexPath:m}=L.PM.Utils.findDeepMarkerIndex(this._markers,f);this._fireVertexClick(l,m)}}),qt.Polygon=qt.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(l){let{prevMarker:f,nextMarker:m}=this._getNeighborMarkers(l),w=L.polyline([f.getLatLng(),l.getLatLng()]),E=L.polyline([l.getLatLng(),m.getLatLng()]),R=es(this._layer.toGeoJSON(15),w.toGeoJSON(15)).features.length,X=es(this._layer.toGeoJSON(15),E.toGeoJSON(15)).features.length;return!(R<=2&&X<=2)}}),qt.Rectangle=qt.Polygon.extend({_shape:"Rectangle",_initMarkers(){let l=this._map,f=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,l.addLayer(this._markerGroup),this._markers=[],this._markers[0]=f.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((m,w)=>{let E=this._cornerMarkers.find(R=>R._index===w);E&&E.setLatLng(m)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(l,f){let m=new L.Marker(l,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(m,"vertexPane"),m._origLatLng=l,m._index=f,m._pmTempLayer=!0,m.on("click",this._onVertexClick,this),this._markerGroup.addLayer(m),m},_addMarkerEvents(){this._markers[0].forEach(l=>{l.on("dragstart",this._onMarkerDragStart,this),l.on("drag",this._onMarkerDrag,this),l.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||l.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(l){if(!this._vertexValidation("move",l))return;let f=l.target,m=this._cornerMarkers;f._oppositeCornerLatLng=m.find(E=>E._index===(f._index+2)%4).getLatLng(),f._snapped=!1;let{indexPath:w}=L.PM.Utils.findDeepMarkerIndex(this._markers,f);this._fireMarkerDragStart(l,w)},_onMarkerDrag(l){let f=l.target;if(!this._vertexValidationDrag(f)||f._index===void 0)return;this._adjustRectangleForMarkerMove(f);let{indexPath:m}=L.PM.Utils.findDeepMarkerIndex(this._markers,f);this._fireMarkerDrag(l,m),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(l){let f=l.target;if(!this._vertexValidationDragEnd(f))return;this._cornerMarkers.forEach(w=>{delete w._oppositeCornerLatLng});let{indexPath:m}=L.PM.Utils.findDeepMarkerIndex(this._markers,f);this._fireMarkerDragEnd(l,m),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(l){L.extend(l._origLatLng,l._latlng);let f=L.PM.Utils._getRotatedRectangle(l.getLatLng(),l._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(f),this._adjustAllMarkers(l),this._layer.redraw()},_adjustAllMarkers(l){let f=this._layer.getLatLngs()[0];if(f&&f.length!==4&&f.length>0)f.forEach((m,w)=>{this._cornerMarkers[w].setLatLng(m)}),this._cornerMarkers.slice(f.length).forEach(m=>{m.setLatLng(f[0])});else if(!f||!f.length)console.error("The layer has no LatLngs");else{let m=f.findIndex(w=>l.getLatLng().equals(w));m>-1?(this._cornerMarkers[(l._index+1)%4].setLatLng(f[(m+1)%4]),this._cornerMarkers[(l._index+2)%4].setLatLng(f[(m+2)%4]),this._cornerMarkers[(l._index+3)%4].setLatLng(f[(m+3)%4])):this._cornerMarkers.forEach(w=>{w.setLatLng(f[w._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(Ys(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let l=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(l[0],l[2],this.getAngle(),this._map||this)}}),qt.CircleMarker=qt.extend({_shape:"CircleMarker",initialize(l){this._layer=l,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(l={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,l),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(l){this.enabled()?this.disable():this.enable(l)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let l=this._map;this._helperLayers&&(this._helperLayers.removeFrom(l),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(l);let f=this._layer.getLatLng(),m=this._layer._radius,w=this._getLatLngOnCircle(f,m);this._centerMarker=this._createCenterMarker(f),this._outerMarker=this._createOuterMarker(w),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(l,f){let m=this._map.project(l),w=L.point(m.x+f,m.y);return this._map.unproject(w)},_createHintLine(l,f){let m=l.getLatLng(),w=f.getLatLng();this._hintline=L.polyline([m,w],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(l){let f=this._createMarker(l);return this.options.draggable?(L.DomUtil.addClass(f._icon,"leaflet-pm-draggable"),f.on("move",this._moveCircle,this)):f.dragging.disable(),f},_createOuterMarker(l){let f=this._createMarker(l);return f.on("drag",this._resizeCircle,this),f},_createMarker(l){let f=new L.Marker(l,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(f,"vertexPane"),f._origLatLng=l,f._pmTempLayer=!0,f.on("dragstart",this._onMarkerDragStart,this),f.on("drag",this._onMarkerDrag,this),f.on("dragend",this._onMarkerDragEnd,this),f.on("click",this._onVertexClick,this),this._helperLayers.addLayer(f),f},_moveCircle(l){if(l.target._cancelDragEventChain)return;let f=this._centerMarker.getLatLng();this._layer.setLatLng(f);let m=this._layer._radius,w=this._getLatLngOnCircle(f,m);this._outerMarker._latlng=w,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let l=this._layer.getLatLng(),f=this._layer._radius,m=this._getLatLngOnCircle(l,f);this._outerMarker.setLatLng(m),this._centerMarker.setLatLng(l),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let l=this._centerMarker.getLatLng(),f=this._outerMarker.getLatLng(),m=this._distanceCalculation(l,f);this.options[this._minRadiusOption]&&m<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&m>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(m),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let l=this._centerMarker.getLatLng(),f=this._outerMarker.getLatLng();this._hintline.setLatLngs([l,f])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(l){this._vertexValidation("move",l)&&this._fireMarkerDragStart(l)},_onMarkerDrag(l){let f=l.target;f instanceof L.Marker&&!this._vertexValidationDrag(f)||this._fireMarkerDrag(l)},_onMarkerDragEnd(l){this._extedingMarkerDragEnd();let f=l.target;this._vertexValidationDragEnd(f)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(l))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let l=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,l.off("pm:drag",this._handleSnapping,this),l.on("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.on("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this),l.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let l=this._layer;l.off("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let l=this._layer._map||this._map;if(l){let f=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),l,this._layer.getLatLng()),m=L.circle(this._layer.getLatLng(),this._layer.options);m.setRadius(f);let w=l&&l.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(m,200,!w).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(m,200,!w),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let l=this._centerMarker.getLatLng(),f=this._outerMarker.getLatLng(),m=this._distanceCalculation(l,f);return this.options[this._minRadiusOption]&&m<this.options[this._minRadiusOption]?f=Al(this._map,l,f,this._getMinDistanceInMeter(l)):this.options[this._maxRadiusOption]&&m>this.options[this._maxRadiusOption]&&(f=Al(this._map,l,f,this._getMaxDistanceInMeter(l))),f},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let l=this._centerMarker.getLatLng(),f=this._outerMarker.getLatLng(),m=this._distanceCalculation(l,f);this.options[this._minRadiusOption]&&m<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&m>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(l,f){return this._map.project(l).distanceTo(this._map.project(f))},_getMinDistanceInMeter(l){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,l)},_getMaxDistanceInMeter(l){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,l)},_onVertexClick(l){l.target._dragging||this._fireVertexClick(l,void 0)}}),qt.Circle=qt.CircleMarker.extend({_shape:"Circle",initialize(l){this._layer=l,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(l){L.PM.Edit.CircleMarker.prototype.enable.call(this,l||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let l=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(l,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let l=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!l).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!l),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(l,f){return this._map.distance(l,f)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(l){l.target._dragging||this._fireVertexClick(l,void 0)}}),qt.ImageOverlay=qt.extend({_shape:"ImageOverlay",initialize(l){this._layer=l,this._enabled=!1},toggleEdit(l){this.enabled()?this.disable():this.enable(l)},enabled(){return this._enabled},enable(l={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,l),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let l=this._layer.getBounds(),f=l.getNorthWest(),m=l.getNorthEast(),w=l.getSouthEast(),E=l.getSouthWest();return[f,m,w,E]}}),qt.Text=qt.extend({_shape:"Text",initialize(l){this._layer=l,this._enabled=!1},enable(l){if(L.Util.setOptions(this,l),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let l=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),l.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(l){this.enabled()?this.disable():this.enable(l)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let l=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,l.off("pm:drag",this._handleSnapping,this),l.on("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.on("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this),l.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let l=this._layer;l.off("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let l=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,f=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${l}px`,this.textArea.style.width=`${f}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(l){l.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(l={}){let f=this._hasFocus;this._hasFocus=l.type==="focus",!f!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(l){l&&(this.textArea.value=l),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let f=this.options.className.split(" ");this.textArea.classList.add(...f)}let l=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(l),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(l=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),l===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(l){l.preventDefault()}});var Jt=function(l,f,m,w,E,R){this._matrix=[l,f,m,w,E,R]};Jt.init=()=>new L.PM.Matrix(1,0,0,1,0,0),Jt.prototype={transform(l){return this._transform(l.clone())},_transform(l){let f=this._matrix,{x:m,y:w}=l;return l.x=f[0]*m+f[1]*w+f[4],l.y=f[2]*m+f[3]*w+f[5],l},untransform(l){let f=this._matrix;return new L.Point((l.x/f[0]-f[4])/f[0],(l.y/f[2]-f[5])/f[2])},clone(){let l=this._matrix;return new L.PM.Matrix(l[0],l[1],l[2],l[3],l[4],l[5])},translate(l){if(l===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let f,m;return typeof l=="number"?(f=l,m=l):(f=l.x,m=l.y),this._add(1,0,0,1,f,m)},scale(l,f){if(l===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let m,w;return f=f||L.point(0,0),typeof l=="number"?(m=l,w=l):(m=l.x,w=l.y),this._add(m,0,0,w,f.x,f.y)._add(1,0,0,1,-f.x,-f.y)},rotate(l,f){let m=Math.cos(l),w=Math.sin(l);return f=f||new L.Point(0,0),this._add(m,w,-w,m,f.x,f.y)._add(1,0,0,1,-f.x,-f.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(l,f,m,w,E,R){let X=[[],[],[]],ne=this._matrix,ce=[[ne[0],ne[2],ne[4]],[ne[1],ne[3],ne[5]],[0,0,1]],xe=[[l,m,E],[f,w,R],[0,0,1]],We;l&&l instanceof L.PM.Matrix&&(ne=l._matrix,xe=[[ne[0],ne[2],ne[4]],[ne[1],ne[3],ne[5]],[0,0,1]]);for(let je=0;je<3;je+=1)for(let vt=0;vt<3;vt+=1){We=0;for(let kt=0;kt<3;kt+=1)We+=ce[je][kt]*xe[kt][vt];X[je][vt]=We}return this._matrix=[X[0][0],X[1][0],X[0][1],X[1][1],X[0][2],X[1][2]],this}};var fn=Jt,en={calcMiddleLatLng(l,f,m){let w=l.project(f),E=l.project(m);return l.unproject(w._add(E)._divideBy(2))},findLayers(l){let f=[];return l.eachLayer(m=>{(m instanceof L.Polyline||m instanceof L.Marker||m instanceof L.Circle||m instanceof L.CircleMarker||m instanceof L.ImageOverlay)&&f.push(m)}),f=f.filter(m=>!!m.pm),f=f.filter(m=>!m._pmTempLayer),f=f.filter(m=>!L.PM.optIn&&!m.options.pmIgnore||L.PM.optIn&&m.options.pmIgnore===!1),f},circleToPolygon(l,f=60,m=!0){let w=l.getLatLng(),E=l.getRadius(),R=wi(w,E,f,0,m),X=[];for(let ne=0;ne<R.length;ne+=1){let ce=[R[ne].lat,R[ne].lng];X.push(ce)}return L.polygon(X,l.options)},disablePopup(l){l.getPopup()&&(l._tempPopupCopy=l.getPopup(),l.unbindPopup())},enablePopup(l){l._tempPopupCopy&&(l.bindPopup(l._tempPopupCopy),delete l._tempPopupCopy)},_fireEvent(l,f,m,w=!1){l.fire(f,m,w);let{groups:E}=this.getAllParentGroups(l);E.forEach(R=>{R.fire(f,m,w)})},getAllParentGroups(l){let f=[],m=[],w=E=>{for(let R in E._eventParents)if(f.indexOf(R)===-1){f.push(R);let X=E._eventParents[R];m.push(X),w(X)}};return!l._pmLastGroupFetch||!l._pmLastGroupFetch.time||new Date().getTime()-l._pmLastGroupFetch.time>1e3?(w(l),l._pmLastGroupFetch={time:new Date().getTime(),groups:m,groupIds:f},{groupIds:f,groups:m}):{groups:l._pmLastGroupFetch.groups,groupIds:l._pmLastGroupFetch.groupIds}},createGeodesicPolygon:wi,getTranslation:Xn,findDeepCoordIndex(l,f,m=!0){let w,E=X=>(ne,ce)=>{let xe=X.concat(ce);if(m){if(ne.lat&&ne.lat===f.lat&&ne.lng===f.lng)return w=xe,!0}else if(ne.lat&&L.latLng(ne).equals(f))return w=xe,!0;return Array.isArray(ne)&&ne.some(E(xe))};l.some(E([]));let R={};return w&&(R={indexPath:w,index:w[w.length-1],parentPath:w.slice(0,w.length-1)}),R},findDeepMarkerIndex(l,f){let m,w=R=>(X,ne)=>{let ce=R.concat(ne);return X._leaflet_id===f._leaflet_id?(m=ce,!0):Array.isArray(X)&&X.some(w(ce))};l.some(w([]));let E={};return m&&(E={indexPath:m,index:m[m.length-1],parentPath:m.slice(0,m.length-1)}),E},_getIndexFromSegment(l,f){if(f&&f.length===2){let m=this.findDeepCoordIndex(l,f[0]),w=this.findDeepCoordIndex(l,f[1]),E=Math.max(m.index,w.index);return(m.index===0||w.index===0)&&E!==1&&(E+=1),{indexA:m,indexB:w,newIndex:E,indexPath:m.indexPath,parentPath:m.parentPath}}return null},_getRotatedRectangle(l,f,m,w){let E=$e(w,l),R=$e(w,f),X=m*Math.PI/180,ne=Math.cos(X),ce=Math.sin(X),xe=(R.x-E.x)*ne+(R.y-E.y)*ce,We=(R.y-E.y)*ne-(R.x-E.x)*ce,je=xe*ne+E.x,vt=xe*ce+E.y,kt=-We*ce+E.x,Yt=We*ne+E.y,_n=dt(w,E),Ln=dt(w,{x:je,y:vt}),Qn=dt(w,R),qe=dt(w,{x:kt,y:Yt});return[_n,Ln,Qn,qe]},pxRadiusToMeterRadius(l,f,m){let w=f.project(m),E=L.point(w.x+l,w.y);return f.distance(f.unproject(E),m)}},An=en;L.PM=L.PM||{version:Es.version,Map:fo,Toolbar:rl,Draw:Gi,Edit:qt,Utils:An,Matrix:fn,activeLang:"en",optIn:!1,initialize(l){this.addInitHooks(l)},setOptIn(l){this.optIn=!!l},addInitHooks(){function l(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(l);function f(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(f);function m(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(m);function w(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(w);function E(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(E);function R(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(R);function X(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(X);function ne(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(ne);function ce(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(ce)},reInitLayer(l){l instanceof L.LayerGroup&&l.eachLayer(f=>{this.reInitLayer(f)}),l.pm||L.PM.optIn&&l.options.pmIgnore!==!1||l.options.pmIgnore||(l instanceof L.Map?l.pm=new L.PM.Map(l):l instanceof L.Marker?l.options.textMarker?(l.pm=new L.PM.Edit.Text(l),l.pm._initTextMarker(),l.pm._createTextMarker(!1)):l.pm=new L.PM.Edit.Marker(l):l instanceof L.Circle?l.pm=new L.PM.Edit.Circle(l):l instanceof L.CircleMarker?l.pm=new L.PM.Edit.CircleMarker(l):l instanceof L.Rectangle?l.pm=new L.PM.Edit.Rectangle(l):l instanceof L.Polygon?l.pm=new L.PM.Edit.Polygon(l):l instanceof L.Polyline?l.pm=new L.PM.Edit.Line(l):l instanceof L.LayerGroup?l.pm=new L.PM.Edit.LayerGroup(l):l instanceof L.ImageOverlay&&(l.pm=new L.PM.Edit.ImageOverlay(l)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(l){let f=this._map.mouseEventToLayerPoint(l),m,w;for(let E=this._drawFirst;E;E=E.next)m=E.layer,m.options.interactive&&m._containsPoint(f)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(m))&&(w=m);w&&(L.DomEvent.fakeStop(l),this._fireEvent([w],l))}}),L.PM.initialize()})();class Df extends Rn.Circle{constructor(n,r){const i=r.radius||10;super(n,i,r);$t(this,"properties");$t(this,"angleCache",new Map);$t(this,"lastCenter");$t(this,"lastCenterCosLat");$t(this,"_pendingNameUpdate",!1);$t(this,"_nameUpdateTimeout",null);on.measure("Circle.constructor.init",()=>{this.properties={type:"Circle",style:{name:r.name||""}},requestAnimationFrame(()=>{this.updateProperties()}),this.on("add",()=>{requestAnimationFrame(()=>{this.updateProperties()})})},"Circle")}updateProperties(){on.measure("Circle.updateProperties",()=>{var u,h,d,v;const n=this.getRadius(),r=this.getLatLng(),i=((h=(u=this.properties)==null?void 0:u.style)==null?void 0:h.name)||"",s=((d=this.properties)==null?void 0:d.style)||{},o={type:"Circle",radius:n,diameter:n*2,surface:Math.PI*Math.pow(n,2),perimeter:2*Math.PI*n,center:{lat:r.lat,lng:r.lng},style:{...s,color:this.options.color||"#3388ff",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#3388ff",fillOpacity:this.options.fillOpacity||.2,dashArray:((v=this.options)==null?void 0:v.dashArray)||"",name:i}};JSON.stringify(this.properties)!==JSON.stringify(o)&&(this.properties=o,this.fire("properties:updated",{shape:this,properties:this.properties}))},"Circle")}setName(n){on.measure("Circle.setName",()=>{var r,i;((i=(r=this.properties)==null?void 0:r.style)==null?void 0:i.name)!==n&&(this.properties.style||(this.properties.style={}),this.properties.style.name=n,!this._pendingNameUpdate&&(this._pendingNameUpdate=!0,this._nameUpdateTimeout&&clearTimeout(this._nameUpdateTimeout),this._nameUpdateTimeout=setTimeout(()=>{this._pendingNameUpdate=!1,this._nameUpdateTimeout=null,this.fire("properties:updated",{shape:this,properties:this.properties})},100)))},"Circle")}getName(){return on.measure("Circle.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""},"Circle")}setRadius(n){return on.measure("Circle.setRadius",()=>(super.setRadius(n),this.updateProperties(),this),"Circle")}setLatLng(n){return on.measure("Circle.setLatLng",()=>(super.setLatLng(n),this.updateProperties(),this),"Circle")}calculatePointOnCircle(n){return on.measure("Circle.calculatePointOnCircle",()=>{const r=this.getLatLng(),i=this.getRadius();let s=this.angleCache.get(n);if(!s){const o=n*Math.PI/180;s={sin:Math.sin(o),cos:Math.cos(o)},this.angleCache.set(n,s)}return(!this.lastCenter||!this.lastCenter.equals(r))&&(this.lastCenter=r,this.lastCenterCosLat=Math.cos(r.lat*Math.PI/180)),Rn.latLng(r.lat+i/111319.9*s.sin,r.lng+i/(111319.9*this.lastCenterCosLat)*s.cos)},"Circle")}getCardinalPoints(){return on.measure("Circle.getCardinalPoints",()=>[0,45,90,135,180,225,270,315].map(n=>this.calculatePointOnCircle(n)),"Circle")}calculateAngleFromPoint(n){return on.measure("Circle.calculateAngleFromPoint",()=>{const r=this.getLatLng(),i=n.lng-r.lng,s=n.lat-r.lat;let o=Math.atan2(s,i)*180/Math.PI;return o<0&&(o+=360),o},"Circle")}resizeFromControlPoint(n){on.measure("Circle.resizeFromControlPoint",()=>{const i=this.getLatLng().distanceTo(n);i>0&&super.setRadius(i)},"Circle")}clearCache(){this.angleCache.clear(),this.lastCenter=void 0,this.lastCenterCosLat=void 0}}var Wa=63710088e-1,t3={centimeters:Wa*100,centimetres:Wa*100,degrees:360/(2*Math.PI),feet:Wa*3.28084,inches:Wa*39.37,kilometers:Wa/1e3,kilometres:Wa/1e3,meters:Wa,metres:Wa,miles:Wa/1609.344,millimeters:Wa*1e3,millimetres:Wa*1e3,nauticalmiles:Wa/1852,radians:1,yards:Wa*1.0936};function sd(e,t,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function hg(e,t,n={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ib(e[0])||!ib(e[1]))throw new Error("coordinates must contain numbers");return sd({type:"Point",coordinates:e},t,n)}function lu(e,t,n={}){for(const i of e){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<i[i.length-1].length;s++)if(i[i.length-1][s]!==i[0][s])throw new Error("First and last Position are not equivalent.")}return sd({type:"Polygon",coordinates:e},t,n)}function uu(e,t,n={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return sd({type:"LineString",coordinates:e},t,n)}function eD(e,t={}){const n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function tD(e,t,n={}){return sd({type:"MultiPolygon",coordinates:e},t,n)}function nD(e,t="kilometers"){const n=t3[t];if(!n)throw new Error(t+" units is invalid");return e*n}function rD(e,t="kilometers"){const n=t3[t];if(!n)throw new Error(t+" units is invalid");return e/n}function l1(e){return e%(2*Math.PI)*180/Math.PI}function Fu(e){return e%360*Math.PI/180}function ib(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function ob(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function hy(e,t,n={}){var r=ob(e),i=ob(t),s=Fu(i[1]-r[1]),o=Fu(i[0]-r[0]),u=Fu(r[1]),h=Fu(i[1]),d=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(u)*Math.cos(h);return nD(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)),n.units)}var ev=hy;function iD(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function fy(e,t,n,r={}){const i=iD(e),s=Fu(i[0]),o=Fu(i[1]),u=Fu(n),h=rD(t,r.units),d=Math.asin(Math.sin(o)*Math.cos(h)+Math.cos(o)*Math.sin(h)*Math.cos(u)),v=s+Math.atan2(Math.sin(u)*Math.sin(h)*Math.cos(o),Math.cos(h)-Math.sin(o)*Math.sin(d)),y=l1(v),x=l1(d);return hg([y,x],r.properties)}var sb=fy,fg={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */fg.exports;(function(e,t){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",u="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",d=500,v="__lodash_placeholder__",y=1,x=2,_=4,P=1,T=2,U=1,N=2,j=4,Z=8,J=16,le=32,he=64,Le=128,V=256,F=512,Y=30,$="...",D=800,k=16,I=1,W=2,G=3,K=1/0,q=9007199254740991,ve=17976931348623157e292,Ce=NaN,Xe=4294967295,B=Xe-1,te=Xe>>>1,se=[["ary",Le],["bind",U],["bindKey",N],["curry",Z],["curryRight",J],["flip",F],["partial",le],["partialRight",he],["rearg",V]],ae="[object Arguments]",we="[object Array]",fe="[object AsyncFunction]",Q="[object Boolean]",ue="[object Date]",Re="[object DOMException]",Me="[object Error]",Ze="[object Function]",oe="[object GeneratorFunction]",me="[object Map]",pe="[object Number]",de="[object Null]",ze="[object Object]",Ke="[object Promise]",Ge="[object Proxy]",Qe="[object RegExp]",Ve="[object Set]",ot="[object String]",At="[object Symbol]",Et="[object Undefined]",zt="[object WeakMap]",Kt="[object WeakSet]",dn="[object ArrayBuffer]",mn="[object DataView]",et="[object Float32Array]",st="[object Float64Array]",rt="[object Int8Array]",Vt="[object Int16Array]",Xt="[object Int32Array]",ft="[object Uint8Array]",Ue="[object Uint8ClampedArray]",Dt="[object Uint16Array]",gn="[object Uint32Array]",un=/\b__p \+= '';/g,Qt=/\b(__p \+=) '' \+/g,Ye=/(__e\(.*?\)|\b__t\)) \+\n'';/g,vn=/&(?:amp|lt|gt|quot|#39);/g,Sn=/[&<>"']/g,ln=RegExp(vn.source),wn=RegExp(Sn.source),ur=/<%-([\s\S]+?)%>/g,En=/<%([\s\S]+?)%>/g,rr=/<%=([\s\S]+?)%>/g,Wr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ki=/^\w*$/,Fn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,oo=/[\\^$.*+?()[\]{}|]/g,jo=RegExp(oo.source),fi=/^\s+/,Wn=/\s/,bn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,tr=/\{\n\/\* \[wrapped with (.+)\] \*/,hn=/,? & /,xo=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,_i=/[()=,{}\[\]\/\s]/,bi=/\\(\\)?/g,di=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ri=/\w*$/,Lo=/^[-+]0x[0-9a-f]+$/i,yr=/^0b[01]+$/i,ds=/^\[object .+?Constructor\]$/,xl=/^0o[0-7]+$/i,Ds=/^(?:0|[1-9]\d*)$/,jr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Mn=/($^)/,Fi=/['\n\r\u2028\u2029\\]/g,pi="\\ud800-\\udfff",ji="\\u0300-\\u036f",Ni="\\ufe20-\\ufe2f",ps="\\u20d0-\\u20ff",Ls=ji+Ni+ps,wr="\\u2700-\\u27bf",Ss="a-z\\xdf-\\xf6\\xf8-\\xff",Ti="\\xac\\xb1\\xd7\\xf7",zo="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",xr="\\u2000-\\u206f",sn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",jt="A-Z\\xc0-\\xd6\\xd8-\\xde",Cr="\\ufe0e\\ufe0f",Di=Ti+zo+xr+sn,zi="[']",Es="["+pi+"]",sr="["+Di+"]",Lr="["+Ls+"]",Is="\\d+",fr="["+wr+"]",Ui="["+Ss+"]",So="[^"+pi+Di+Is+wr+Ss+jt+"]",Eo="\\ud83c[\\udffb-\\udfff]",so="(?:"+Lr+"|"+Eo+")",vi="[^"+pi+"]",Qo="(?:\\ud83c[\\udde6-\\uddff]){2}",Ks="[\\ud800-\\udbff][\\udc00-\\udfff]",co="["+jt+"]",ha="\\u200d",Cs="(?:"+Ui+"|"+So+")",Ll="(?:"+co+"|"+So+")",Or="(?:"+zi+"(?:d|ll|m|re|s|t|ve))?",ho="(?:"+zi+"(?:D|LL|M|RE|S|T|VE))?",$i=so+"?",Sl="["+Cr+"]?",ao="(?:"+ha+"(?:"+[vi,Qo,Ks].join("|")+")"+Sl+$i+")*",qu="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ql="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ar=Sl+$i+ao,dr="(?:"+[fr,Qo,Ks].join("|")+")"+ar,Rs="(?:"+[vi+Lr+"?",Lr,Qo,Ks,Es].join("|")+")",$r=RegExp(zi,"g"),vu=RegExp(Lr,"g"),Qa=RegExp(Eo+"(?="+Eo+")|"+Rs+ar,"g"),el=RegExp([co+"?"+Ui+"+"+Or+"(?="+[sr,co,"$"].join("|")+")",Ll+"+"+ho+"(?="+[sr,co+Cs,"$"].join("|")+")",co+"?"+Cs+"+"+Or,co+"+"+ho,ql,qu,Is,dr].join("|"),"g"),Fs=RegExp("["+ha+pi+Ls+Cr+"]"),Ra=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,yu=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],El=-1,cr={};cr[et]=cr[st]=cr[rt]=cr[Vt]=cr[Xt]=cr[ft]=cr[Ue]=cr[Dt]=cr[gn]=!0,cr[ae]=cr[we]=cr[dn]=cr[Q]=cr[mn]=cr[ue]=cr[Me]=cr[Ze]=cr[me]=cr[pe]=cr[ze]=cr[Qe]=cr[Ve]=cr[ot]=cr[zt]=!1;var kr={};kr[ae]=kr[we]=kr[dn]=kr[mn]=kr[Q]=kr[ue]=kr[et]=kr[st]=kr[rt]=kr[Vt]=kr[Xt]=kr[me]=kr[pe]=kr[ze]=kr[Qe]=kr[Ve]=kr[ot]=kr[At]=kr[ft]=kr[Ue]=kr[Dt]=kr[gn]=!0,kr[Me]=kr[Ze]=kr[zt]=!1;var Fa={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Wu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Cl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Wl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},tl=parseFloat,Pl=parseInt,Zl=typeof Zs=="object"&&Zs&&Zs.Object===Object&&Zs,Nr=typeof self=="object"&&self&&self.Object===Object&&self,Vi=Zl||Nr||Function("return this")(),Xn=t&&!t.nodeType&&t,Hi=Xn&&!0&&e&&!e.nodeType&&e,nl=Hi&&Hi.exports===Xn,fa=nl&&Zl.process,wi=function(){try{var _t=Hi&&Hi.require&&Hi.require("util").types;return _t||fa&&fa.binding&&fa.binding("util")}catch{}}(),Kl=wi&&wi.isArrayBuffer,Ys=wi&&wi.isDate,Al=wi&&wi.isMap,Ml=wi&&wi.isRegExp,Ps=wi&&wi.isSet,kl=wi&&wi.isTypedArray;function Qr(_t,Ht,Mt){switch(Mt.length){case 0:return _t.call(Ht);case 1:return _t.call(Ht,Mt[0]);case 2:return _t.call(Ht,Mt[0],Mt[1]);case 3:return _t.call(Ht,Mt[0],Mt[1],Mt[2])}return _t.apply(Ht,Mt)}function Zu(_t,Ht,Mt,Pn){for(var Un=-1,lr=_t==null?0:_t.length;++Un<lr;){var xi=_t[Un];Ht(Pn,xi,Mt(xi),_t)}return Pn}function fo(_t,Ht){for(var Mt=-1,Pn=_t==null?0:_t.length;++Mt<Pn&&Ht(_t[Mt],Mt,_t)!==!1;);return _t}function js(_t,Ht){for(var Mt=_t==null?0:_t.length;Mt--&&Ht(_t[Mt],Mt,_t)!==!1;);return _t}function Tl(_t,Ht){for(var Mt=-1,Pn=_t==null?0:_t.length;++Mt<Pn;)if(!Ht(_t[Mt],Mt,_t))return!1;return!0}function zs(_t,Ht){for(var Mt=-1,Pn=_t==null?0:_t.length,Un=0,lr=[];++Mt<Pn;){var xi=_t[Mt];Ht(xi,Mt,_t)&&(lr[Un++]=xi)}return lr}function rl(_t,Ht){var Mt=_t==null?0:_t.length;return!!Mt&&cn(_t,Ht,0)>-1}function il(_t,Ht,Mt){for(var Pn=-1,Un=_t==null?0:_t.length;++Pn<Un;)if(Mt(Ht,_t[Pn]))return!0;return!1}function ei(_t,Ht){for(var Mt=-1,Pn=_t==null?0:_t.length,Un=Array(Pn);++Mt<Pn;)Un[Mt]=Ht(_t[Mt],Mt,_t);return Un}function gs(_t,Ht){for(var Mt=-1,Pn=Ht.length,Un=_t.length;++Mt<Pn;)_t[Un+Mt]=Ht[Mt];return _t}function da(_t,Ht,Mt,Pn){var Un=-1,lr=_t==null?0:_t.length;for(Pn&&lr&&(Mt=_t[++Un]);++Un<lr;)Mt=Ht(Mt,_t[Un],Un,_t);return Mt}function Gi(_t,Ht,Mt,Pn){var Un=_t==null?0:_t.length;for(Pn&&Un&&(Mt=_t[--Un]);Un--;)Mt=Ht(Mt,_t[Un],Un,_t);return Mt}function O(_t,Ht){for(var Mt=-1,Pn=_t==null?0:_t.length;++Mt<Pn;)if(Ht(_t[Mt],Mt,_t))return!0;return!1}var ye=or("length");function He(_t){return _t.split("")}function ct(_t){return _t.match(xo)||[]}function xt(_t,Ht,Mt){var Pn;return Mt(_t,function(Un,lr,xi){if(Ht(Un,lr,xi))return Pn=lr,!1}),Pn}function It(_t,Ht,Mt,Pn){for(var Un=_t.length,lr=Mt+(Pn?1:-1);Pn?lr--:++lr<Un;)if(Ht(_t[lr],lr,_t))return lr;return-1}function cn(_t,Ht,Mt){return Ht===Ht?lo(_t,Ht,Mt):It(_t,Nn,Mt)}function kn(_t,Ht,Mt,Pn){for(var Un=Mt-1,lr=_t.length;++Un<lr;)if(Pn(_t[Un],Ht))return Un;return-1}function Nn(_t){return _t!==_t}function Kn(_t,Ht){var Mt=_t==null?0:_t.length;return Mt?ti(_t,Ht)/Mt:Ce}function or(_t){return function(Ht){return Ht==null?n:Ht[_t]}}function Pr(_t){return function(Ht){return _t==null?n:_t[Ht]}}function yi(_t,Ht,Mt,Pn,Un){return Un(_t,function(lr,xi,ni){Mt=Pn?(Pn=!1,lr):Ht(Mt,lr,xi,ni)}),Mt}function Zr(_t,Ht){var Mt=_t.length;for(_t.sort(Ht);Mt--;)_t[Mt]=_t[Mt].value;return _t}function ti(_t,Ht){for(var Mt,Pn=-1,Un=_t.length;++Pn<Un;){var lr=Ht(_t[Pn]);lr!==n&&(Mt=Mt===n?lr:Mt+lr)}return Mt}function qi(_t,Ht){for(var Mt=-1,Pn=Array(_t);++Mt<_t;)Pn[Mt]=Ht(Mt);return Pn}function Ji(_t,Ht){return ei(Ht,function(Mt){return[Mt,_t[Mt]]})}function ms(_t){return _t&&_t.slice(0,ga(_t)+1).replace(fi,"")}function Ar(_t){return function(Ht){return _t(Ht)}}function Co(_t,Ht){return ei(Ht,function(Mt){return _t[Mt]})}function ol(_t,Ht){return _t.has(Ht)}function Uo(_t,Ht){for(var Mt=-1,Pn=_t.length;++Mt<Pn&&cn(Ht,_t[Mt],0)>-1;);return Mt}function Yl(_t,Ht){for(var Mt=_t.length;Mt--&&cn(Ht,_t[Mt],0)>-1;);return Mt}function Xs(_t,Ht){for(var Mt=_t.length,Pn=0;Mt--;)_t[Mt]===Ht&&++Pn;return Pn}var _u=Pr(Fa),ja=Pr(Wu);function za(_t){return"\\"+Wl[_t]}function Qi(_t,Ht){return _t==null?n:_t[Ht]}function Js(_t){return Fs.test(_t)}function vs(_t){return Ra.test(_t)}function es(_t){for(var Ht,Mt=[];!(Ht=_t.next()).done;)Mt.push(Ht.value);return Mt}function sl(_t){var Ht=-1,Mt=Array(_t.size);return _t.forEach(function(Pn,Un){Mt[++Ht]=[Un,Pn]}),Mt}function Po(_t,Ht){return function(Mt){return _t(Ht(Mt))}}function $o(_t,Ht){for(var Mt=-1,Pn=_t.length,Un=0,lr=[];++Mt<Pn;){var xi=_t[Mt];(xi===Ht||xi===v)&&(_t[Mt]=v,lr[Un++]=Mt)}return lr}function Vo(_t){var Ht=-1,Mt=Array(_t.size);return _t.forEach(function(Pn){Mt[++Ht]=Pn}),Mt}function Ku(_t){var Ht=-1,Mt=Array(_t.size);return _t.forEach(function(Pn){Mt[++Ht]=[Pn,Pn]}),Mt}function lo(_t,Ht,Mt){for(var Pn=Mt-1,Un=_t.length;++Pn<Un;)if(_t[Pn]===Ht)return Pn;return-1}function pa(_t,Ht,Mt){for(var Pn=Mt+1;Pn--;)if(_t[Pn]===Ht)return Pn;return Pn}function Ao(_t){return Js(_t)?ko(_t):ye(_t)}function Mo(_t){return Js(_t)?po(_t):He(_t)}function ga(_t){for(var Ht=_t.length;Ht--&&Wn.test(_t.charAt(Ht)););return Ht}var ma=Pr(Cl);function ko(_t){for(var Ht=Qa.lastIndex=0;Qa.test(_t);)++Ht;return Ht}function po(_t){return _t.match(Qa)||[]}function Qs(_t){return _t.match(el)||[]}var ys=function _t(Ht){Ht=Ht==null?Vi:To.defaults(Vi.Object(),Ht,To.pick(Vi,yu));var Mt=Ht.Array,Pn=Ht.Date,Un=Ht.Error,lr=Ht.Function,xi=Ht.Math,ni=Ht.Object,Bl=Ht.RegExp,Ho=Ht.String,Li=Ht.TypeError,ea=Mt.prototype,va=lr.prototype,ta=ni.prototype,na=Ht["__core-js_shared__"],ra=va.toString,Dr=ta.hasOwnProperty,Us=0,go=function(){var c=/[^.]+$/.exec(na&&na.keys&&na.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),ri=ta.toString,si=ra.call(ni),Wi=Vi._,gi=Bl("^"+ra.call(Dr).replace(oo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_s=nl?Ht.Buffer:n,ts=Ht.Symbol,As=Ht.Uint8Array,bu=_s?_s.allocUnsafe:n,ia=Po(ni.getPrototypeOf,ni),eo=ni.create,hi=ta.propertyIsEnumerable,Bo=ea.splice,ns=ts?ts.isConcatSpreadable:n,nr=ts?ts.iterator:n,ya=ts?ts.toStringTag:n,_a=function(){try{var c=Mh(ni,"defineProperty");return c({},"",{}),c}catch{}}(),$s=Ht.clearTimeout!==Vi.clearTimeout&&Ht.clearTimeout,Go=Pn&&Pn.now!==Vi.Date.now&&Pn.now,mc=Ht.setTimeout!==Vi.setTimeout&&Ht.setTimeout,mo=xi.ceil,vo=xi.floor,Vs=ni.getOwnPropertySymbols,a=_s?_s.isBuffer:n,p=Ht.isFinite,S=ea.join,z=Po(ni.keys,ni),re=xi.max,Se=xi.min,at=Pn.now,Pt=Ht.parseInt,Ft=xi.random,nn=ea.reverse,Tn=Mh(Ht,"DataView"),Vn=Mh(Ht,"Map"),Er=Mh(Ht,"Promise"),to=Mh(Ht,"Set"),Bi=Mh(Ht,"WeakMap"),yo=Mh(ni,"create"),Si=Bi&&new Bi,rs={},vc=kh(Tn),oa=kh(Vn),Hs=kh(Er),Ms=kh(to),xh=kh(Bi),Xl=ts?ts.prototype:n,Yr=Xl?Xl.valueOf:n,Oo=Xl?Xl.toString:n;function Te(c){if(qo(c)&&!Rr(c)&&!(c instanceof Mr)){if(c instanceof _o)return c;if(Dr.call(c,"__wrapped__"))return Yy(c)}return new _o(c)}var is=function(){function c(){}return function(g){if(!Do(g))return{};if(eo)return eo(g);c.prototype=g;var A=new c;return c.prototype=n,A}}();function wu(){}function _o(c,g){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!g,this.__index__=0,this.__values__=n}Te.templateSettings={escape:ur,evaluate:En,interpolate:rr,variable:"",imports:{_:Te}},Te.prototype=wu.prototype,Te.prototype.constructor=Te,_o.prototype=is(wu.prototype),_o.prototype.constructor=_o;function Mr(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Xe,this.__views__=[]}function $c(){var c=new Mr(this.__wrapped__);return c.__actions__=ll(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=ll(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=ll(this.__views__),c}function af(){if(this.__filtered__){var c=new Mr(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function Vc(){var c=this.__wrapped__.value(),g=this.__dir__,A=Rr(c),ee=g<0,be=A?c.length:0,De=cx(0,be,this.__views__),it=De.start,mt=De.end,Ct=mt-it,rn=ee?mt:it-1,an=this.__iteratees__,yn=an.length,In=0,Jn=Se(Ct,this.__takeCount__);if(!A||!ee&&be==Ct&&Jn==Ct)return Jl(c,this.__actions__);var pr=[];e:for(;Ct--&&In<Jn;){rn+=g;for(var Gr=-1,gr=c[rn];++Gr<yn;){var ii=an[Gr],li=ii.iteratee,Dl=ii.type,Ha=li(gr);if(Dl==W)gr=Ha;else if(!Ha){if(Dl==I)continue e;break e}}pr[In++]=gr}return pr}Mr.prototype=is(wu.prototype),Mr.prototype.constructor=Mr;function Ua(c){var g=-1,A=c==null?0:c.length;for(this.clear();++g<A;){var ee=c[g];this.set(ee[0],ee[1])}}function yc(){this.__data__=yo?yo(null):{},this.size=0}function Lh(c){var g=this.has(c)&&delete this.__data__[c];return this.size-=g?1:0,g}function pd(c){var g=this.__data__;if(yo){var A=g[c];return A===h?n:A}return Dr.call(g,c)?g[c]:n}function Yu(c){var g=this.__data__;return yo?g[c]!==n:Dr.call(g,c)}function Hc(c,g){var A=this.__data__;return this.size+=this.has(c)?0:1,A[c]=yo&&g===n?h:g,this}Ua.prototype.clear=yc,Ua.prototype.delete=Lh,Ua.prototype.get=pd,Ua.prototype.has=Yu,Ua.prototype.set=Hc;function Ol(c){var g=-1,A=c==null?0:c.length;for(this.clear();++g<A;){var ee=c[g];this.set(ee[0],ee[1])}}function gd(){this.__data__=[],this.size=0}function Gc(c){var g=this.__data__,A=yt(g,c);if(A<0)return!1;var ee=g.length-1;return A==ee?g.pop():Bo.call(g,A,1),--this.size,!0}function qc(c){var g=this.__data__,A=yt(g,c);return A<0?n:g[A][1]}function lf(c){return yt(this.__data__,c)>-1}function uf(c,g){var A=this.__data__,ee=yt(A,c);return ee<0?(++this.size,A.push([c,g])):A[ee][1]=g,this}Ol.prototype.clear=gd,Ol.prototype.delete=Gc,Ol.prototype.get=qc,Ol.prototype.has=lf,Ol.prototype.set=uf;function ba(c){var g=-1,A=c==null?0:c.length;for(this.clear();++g<A;){var ee=c[g];this.set(ee[0],ee[1])}}function cf(){this.size=0,this.__data__={hash:new Ua,map:new(Vn||Ol),string:new Ua}}function hf(c){var g=qp(this,c).delete(c);return this.size-=g?1:0,g}function ff(c){return qp(this,c).get(c)}function b(c){return qp(this,c).has(c)}function C(c,g){var A=qp(this,c),ee=A.size;return A.set(c,g),this.size+=A.size==ee?0:1,this}ba.prototype.clear=cf,ba.prototype.delete=hf,ba.prototype.get=ff,ba.prototype.has=b,ba.prototype.set=C;function H(c){var g=-1,A=c==null?0:c.length;for(this.__data__=new ba;++g<A;)this.add(c[g])}function ie(c){return this.__data__.set(c,h),this}function _e(c){return this.__data__.has(c)}H.prototype.add=H.prototype.push=ie,H.prototype.has=_e;function Ee(c){var g=this.__data__=new Ol(c);this.size=g.size}function Ae(){this.__data__=new Ol,this.size=0}function ke(c){var g=this.__data__,A=g.delete(c);return this.size=g.size,A}function Be(c){return this.__data__.get(c)}function $e(c){return this.__data__.has(c)}function dt(c,g){var A=this.__data__;if(A instanceof Ol){var ee=A.__data__;if(!Vn||ee.length<i-1)return ee.push([c,g]),this.size=++A.size,this;A=this.__data__=new ba(ee)}return A.set(c,g),this.size=A.size,this}Ee.prototype.clear=Ae,Ee.prototype.delete=ke,Ee.prototype.get=Be,Ee.prototype.has=$e,Ee.prototype.set=dt;function Bt(c,g){var A=Rr(c),ee=!A&&Th(c),be=!A&&!ee&&Zc(c),De=!A&&!ee&&!be&&wf(c),it=A||ee||be||De,mt=it?qi(c.length,Ho):[],Ct=mt.length;for(var rn in c)(g||Dr.call(c,rn))&&!(it&&(rn=="length"||be&&(rn=="offset"||rn=="parent")||De&&(rn=="buffer"||rn=="byteLength"||rn=="byteOffset")||Sc(rn,Ct)))&&mt.push(rn);return mt}function Ot(c){var g=c.length;return g?c[Ch(0,g-1)]:n}function wt(c,g){return Wp(ll(c),Hn(g,0,c.length))}function qt(c){return Wp(ll(c))}function Ut(c,g,A){(A!==n&&!Pu(c[g],A)||A===n&&!(g in c))&&An(c,g,A)}function pt(c,g,A){var ee=c[g];(!(Dr.call(c,g)&&Pu(ee,A))||A===n&&!(g in c))&&An(c,g,A)}function yt(c,g){for(var A=c.length;A--;)if(Pu(c[A][0],g))return A;return-1}function Jt(c,g,A,ee){return R(c,function(be,De,it){g(ee,be,A(be),it)}),ee}function fn(c,g){return c&&Qu(g,Gs(g),c)}function en(c,g){return c&&Qu(g,cl(g),c)}function An(c,g,A){g=="__proto__"&&_a?_a(c,g,{configurable:!0,enumerable:!0,value:A,writable:!0}):c[g]=A}function Cn(c,g){for(var A=-1,ee=g.length,be=Mt(ee),De=c==null;++A<ee;)be[A]=De?n:Em(c,g[A]);return be}function Hn(c,g,A){return c===c&&(A!==n&&(c=c<=A?c:A),g!==n&&(c=c>=g?c:g)),c}function l(c,g,A,ee,be,De){var it,mt=g&y,Ct=g&x,rn=g&_;if(A&&(it=be?A(c,ee,be,De):A(c)),it!==n)return it;if(!Do(c))return c;var an=Rr(c);if(an){if(it=fx(c),!mt)return ll(c,it)}else{var yn=xa(c),In=yn==Ze||yn==oe;if(Zc(c))return xy(c,mt);if(yn==ze||yn==ae||In&&!be){if(it=Ct||In?{}:Uy(c),!mt)return Ct?tx(c,en(it,c)):ex(c,fn(it,c))}else{if(!kr[yn])return be?c:{};it=dx(c,yn,mt)}}De||(De=new Ee);var Jn=De.get(c);if(Jn)return Jn;De.set(c,it),m2(c)?c.forEach(function(gr){it.add(l(gr,g,A,gr,c,De))}):p2(c)&&c.forEach(function(gr,ii){it.set(ii,l(gr,g,A,ii,c,De))});var pr=rn?Ct?hm:cm:Ct?cl:Gs,Gr=an?n:pr(c);return fo(Gr||c,function(gr,ii){Gr&&(ii=gr,gr=c[ii]),pt(it,ii,l(gr,g,A,ii,c,De))}),it}function f(c){var g=Gs(c);return function(A){return m(A,c,g)}}function m(c,g,A){var ee=A.length;if(c==null)return!ee;for(c=ni(c);ee--;){var be=A[ee],De=g[be],it=c[be];if(it===n&&!(be in c)||!De(it))return!1}return!0}function w(c,g,A){if(typeof c!="function")throw new Li(o);return bd(function(){c.apply(n,A)},g)}function E(c,g,A,ee){var be=-1,De=rl,it=!0,mt=c.length,Ct=[],rn=g.length;if(!mt)return Ct;A&&(g=ei(g,Ar(A))),ee?(De=il,it=!1):g.length>=i&&(De=ol,it=!1,g=new H(g));e:for(;++be<mt;){var an=c[be],yn=A==null?an:A(an);if(an=ee||an!==0?an:0,it&&yn===yn){for(var In=rn;In--;)if(g[In]===yn)continue e;Ct.push(an)}else De(g,yn,ee)||Ct.push(an)}return Ct}var R=Py(Yt),X=Py(_n,!0);function ne(c,g){var A=!0;return R(c,function(ee,be,De){return A=!!g(ee,be,De),A}),A}function ce(c,g,A){for(var ee=-1,be=c.length;++ee<be;){var De=c[ee],it=g(De);if(it!=null&&(mt===n?it===it&&!Nl(it):A(it,mt)))var mt=it,Ct=De}return Ct}function xe(c,g,A,ee){var be=c.length;for(A=Hr(A),A<0&&(A=-A>be?0:be+A),ee=ee===n||ee>be?be:Hr(ee),ee<0&&(ee+=be),ee=A>ee?0:y2(ee);A<ee;)c[A++]=g;return c}function We(c,g){var A=[];return R(c,function(ee,be,De){g(ee,be,De)&&A.push(ee)}),A}function je(c,g,A,ee,be){var De=-1,it=c.length;for(A||(A=gx),be||(be=[]);++De<it;){var mt=c[De];g>0&&A(mt)?g>1?je(mt,g-1,A,ee,be):gs(be,mt):ee||(be[be.length]=mt)}return be}var vt=Ay(),kt=Ay(!0);function Yt(c,g){return c&&vt(c,g,Gs)}function _n(c,g){return c&&kt(c,g,Gs)}function Ln(c,g){return zs(g,function(A){return Ec(c[A])})}function Qn(c,g){g=Cu(g,c);for(var A=0,ee=g.length;c!=null&&A<ee;)c=c[ec(g[A++])];return A&&A==ee?c:n}function qe(c,g,A){var ee=g(c);return Rr(c)?ee:gs(ee,A(c))}function nt(c){return c==null?c===n?Et:de:ya&&ya in ni(c)?ux(c):xx(c)}function ht(c,g){return c>g}function Nt(c,g){return c!=null&&Dr.call(c,g)}function bt(c,g){return c!=null&&g in ni(c)}function Tt(c,g,A){return c>=Se(g,A)&&c<re(g,A)}function ge(c,g,A){for(var ee=A?il:rl,be=c[0].length,De=c.length,it=De,mt=Mt(De),Ct=1/0,rn=[];it--;){var an=c[it];it&&g&&(an=ei(an,Ar(g))),Ct=Se(an.length,Ct),mt[it]=!A&&(g||be>=120&&an.length>=120)?new H(it&&an):n}an=c[0];var yn=-1,In=mt[0];e:for(;++yn<be&&rn.length<Ct;){var Jn=an[yn],pr=g?g(Jn):Jn;if(Jn=A||Jn!==0?Jn:0,!(In?ol(In,pr):ee(rn,pr,A))){for(it=De;--it;){var Gr=mt[it];if(!(Gr?ol(Gr,pr):ee(c[it],pr,A)))continue e}In&&In.push(pr),rn.push(Jn)}}return rn}function Pe(c,g,A,ee){return Yt(c,function(be,De,it){g(ee,A(be),De,it)}),ee}function Ne(c,g,A){g=Cu(g,c),c=Gy(c,g);var ee=c==null?c:c[ec(tu(g))];return ee==null?n:Qr(ee,c,A)}function Oe(c){return qo(c)&&nt(c)==ae}function Ie(c){return qo(c)&&nt(c)==dn}function Fe(c){return qo(c)&&nt(c)==ue}function lt(c,g,A,ee,be){return c===g?!0:c==null||g==null||!qo(c)&&!qo(g)?c!==c&&g!==g:ut(c,g,A,ee,lt,be)}function ut(c,g,A,ee,be,De){var it=Rr(c),mt=Rr(g),Ct=it?we:xa(c),rn=mt?we:xa(g);Ct=Ct==ae?ze:Ct,rn=rn==ae?ze:rn;var an=Ct==ze,yn=rn==ze,In=Ct==rn;if(In&&Zc(c)){if(!Zc(g))return!1;it=!0,an=!1}if(In&&!an)return De||(De=new Ee),it||wf(c)?Fy(c,g,A,ee,be,De):ax(c,g,Ct,A,ee,be,De);if(!(A&P)){var Jn=an&&Dr.call(c,"__wrapped__"),pr=yn&&Dr.call(g,"__wrapped__");if(Jn||pr){var Gr=Jn?c.value():c,gr=pr?g.value():g;return De||(De=new Ee),be(Gr,gr,A,ee,De)}}return In?(De||(De=new Ee),lx(c,g,A,ee,be,De)):!1}function gt(c){return qo(c)&&xa(c)==me}function Lt(c,g,A,ee){var be=A.length,De=be,it=!ee;if(c==null)return!De;for(c=ni(c);be--;){var mt=A[be];if(it&&mt[2]?mt[1]!==c[mt[0]]:!(mt[0]in c))return!1}for(;++be<De;){mt=A[be];var Ct=mt[0],rn=c[Ct],an=mt[1];if(it&&mt[2]){if(rn===n&&!(Ct in c))return!1}else{var yn=new Ee;if(ee)var In=ee(rn,an,Ct,c,g,yn);if(!(In===n?lt(an,rn,P|T,ee,yn):In))return!1}}return!0}function St(c){if(!Do(c)||vx(c))return!1;var g=Ec(c)?gi:ds;return g.test(kh(c))}function tn(c){return qo(c)&&nt(c)==Qe}function Dn(c){return qo(c)&&xa(c)==Ve}function jn(c){return qo(c)&&Qp(c.length)&&!!cr[nt(c)]}function Gn(c){return typeof c=="function"?c:c==null?hl:typeof c=="object"?Rr(c)?xu(c[0],c[1]):os(c):M2(c)}function Xr(c){if(!_d(c))return z(c);var g=[];for(var A in ni(c))Dr.call(c,A)&&A!="constructor"&&g.push(A);return g}function ai(c){if(!Do(c))return wx(c);var g=_d(c),A=[];for(var ee in c)ee=="constructor"&&(g||!Dr.call(c,ee))||A.push(ee);return A}function Ir(c,g){return c<g}function mi(c,g){var A=-1,ee=ul(c)?Mt(c.length):[];return R(c,function(be,De,it){ee[++A]=g(be,De,it)}),ee}function os(c){var g=dm(c);return g.length==1&&g[0][2]?Vy(g[0][0],g[0][1]):function(A){return A===c||Lt(A,c,g)}}function xu(c,g){return gm(c)&&$y(g)?Vy(ec(c),g):function(A){var ee=Em(A,c);return ee===n&&ee===g?Cm(A,c):lt(g,ee,P|T)}}function sa(c,g,A,ee,be){c!==g&&vt(g,function(De,it){if(be||(be=new Ee),Do(De))Sh(c,g,it,A,sa,ee,be);else{var mt=ee?ee(vm(c,it),De,it+"",c,g,be):n;mt===n&&(mt=De),Ut(c,it,mt)}},cl)}function Sh(c,g,A,ee,be,De,it){var mt=vm(c,A),Ct=vm(g,A),rn=it.get(Ct);if(rn){Ut(c,A,rn);return}var an=De?De(mt,Ct,A+"",c,g,it):n,yn=an===n;if(yn){var In=Rr(Ct),Jn=!In&&Zc(Ct),pr=!In&&!Jn&&wf(Ct);an=Ct,In||Jn||pr?Rr(mt)?an=mt:ss(mt)?an=ll(mt):Jn?(yn=!1,an=xy(Ct,!0)):pr?(yn=!1,an=Ly(Ct,!0)):an=[]:wd(Ct)||Th(Ct)?(an=mt,Th(mt)?an=_2(mt):(!Do(mt)||Ec(mt))&&(an=Uy(Ct))):yn=!1}yn&&(it.set(Ct,an),be(an,Ct,ee,De,it),it.delete(Ct)),Ut(c,A,an)}function $a(c,g){var A=c.length;if(A)return g+=g<0?A:0,Sc(g,A)?c[g]:n}function Xu(c,g,A){g.length?g=ei(g,function(De){return Rr(De)?function(it){return Qn(it,De.length===1?De[0]:De)}:De}):g=[hl];var ee=-1;g=ei(g,Ar(hr()));var be=mi(c,function(De,it,mt){var Ct=ei(g,function(rn){return rn(De)});return{criteria:Ct,index:++ee,value:De}});return Zr(be,function(De,it){return Q3(De,it,A)})}function aa(c,g){return No(c,g,function(A,ee){return Cm(c,ee)})}function No(c,g,A){for(var ee=-1,be=g.length,De={};++ee<be;){var it=g[ee],mt=Qn(c,it);A(mt,it)&&_c(De,Cu(it,c),mt)}return De}function Zi(c){return function(g){return Qn(g,c)}}function df(c,g,A,ee){var be=ee?kn:cn,De=-1,it=g.length,mt=c;for(c===g&&(g=ll(g)),A&&(mt=ei(c,Ar(A)));++De<it;)for(var Ct=0,rn=g[De],an=A?A(rn):rn;(Ct=be(mt,an,Ct,ee))>-1;)mt!==c&&Bo.call(mt,Ct,1),Bo.call(c,Ct,1);return c}function Eh(c,g){for(var A=c?g.length:0,ee=A-1;A--;){var be=g[A];if(A==ee||be!==De){var De=be;Sc(be)?Bo.call(c,be,1):bc(c,be)}}return c}function Ch(c,g){return c+vo(Ft()*(g-c+1))}function Ph(c,g,A,ee){for(var be=-1,De=re(mo((g-c)/(A||1)),0),it=Mt(De);De--;)it[ee?De:++be]=c,c+=A;return it}function pf(c,g){var A="";if(!c||g<1||g>q)return A;do g%2&&(A+=c),g=vo(g/2),g&&(c+=c);while(g);return A}function Vr(c,g){return ym(Hy(c,g,hl),c+"")}function gf(c){return Ot(xf(c))}function Dp(c,g){var A=xf(c);return Wp(A,Hn(g,0,A.length))}function _c(c,g,A,ee){if(!Do(c))return c;g=Cu(g,c);for(var be=-1,De=g.length,it=De-1,mt=c;mt!=null&&++be<De;){var Ct=ec(g[be]),rn=A;if(Ct==="__proto__"||Ct==="constructor"||Ct==="prototype")return c;if(be!=it){var an=mt[Ct];rn=ee?ee(an,Ct,mt):n,rn===n&&(rn=Do(an)?an:Sc(g[be+1])?[]:{})}pt(mt,Ct,rn),mt=mt[Ct]}return c}var Lu=Si?function(c,g){return Si.set(c,g),c}:hl,Ip=_a?function(c,g){return _a(c,"toString",{configurable:!0,enumerable:!1,value:Am(g),writable:!0})}:hl;function Rp(c){return Wp(xf(c))}function al(c,g,A){var ee=-1,be=c.length;g<0&&(g=-g>be?0:be+g),A=A>be?be:A,A<0&&(A+=be),be=g>A?0:A-g>>>0,g>>>=0;for(var De=Mt(be);++ee<be;)De[ee]=c[ee+g];return De}function Fp(c,g){var A;return R(c,function(ee,be,De){return A=g(ee,be,De),!A}),!!A}function Su(c,g,A){var ee=0,be=c==null?ee:c.length;if(typeof g=="number"&&g===g&&be<=te){for(;ee<be;){var De=ee+be>>>1,it=c[De];it!==null&&!Nl(it)&&(A?it<=g:it<g)?ee=De+1:be=De}return be}return md(c,g,hl,A)}function md(c,g,A,ee){var be=0,De=c==null?0:c.length;if(De===0)return 0;g=A(g);for(var it=g!==g,mt=g===null,Ct=Nl(g),rn=g===n;be<De;){var an=vo((be+De)/2),yn=A(c[an]),In=yn!==n,Jn=yn===null,pr=yn===yn,Gr=Nl(yn);if(it)var gr=ee||pr;else rn?gr=pr&&(ee||In):mt?gr=pr&&In&&(ee||!Jn):Ct?gr=pr&&In&&!Jn&&(ee||!Gr):Jn||Gr?gr=!1:gr=ee?yn<=g:yn<g;gr?be=an+1:De=an}return Se(De,B)}function vd(c,g){for(var A=-1,ee=c.length,be=0,De=[];++A<ee;){var it=c[A],mt=g?g(it):it;if(!A||!Pu(mt,Ct)){var Ct=mt;De[be++]=it===0?0:it}}return De}function jp(c){return typeof c=="number"?c:Nl(c)?Ce:+c}function wa(c){if(typeof c=="string")return c;if(Rr(c))return ei(c,wa)+"";if(Nl(c))return Oo?Oo.call(c):"";var g=c+"";return g=="0"&&1/c==-1/0?"-0":g}function Ju(c,g,A){var ee=-1,be=rl,De=c.length,it=!0,mt=[],Ct=mt;if(A)it=!1,be=il;else if(De>=i){var rn=g?null:ox(c);if(rn)return Vo(rn);it=!1,be=ol,Ct=new H}else Ct=g?[]:mt;e:for(;++ee<De;){var an=c[ee],yn=g?g(an):an;if(an=A||an!==0?an:0,it&&yn===yn){for(var In=Ct.length;In--;)if(Ct[In]===yn)continue e;g&&Ct.push(yn),mt.push(an)}else be(Ct,yn,A)||(Ct!==mt&&Ct.push(yn),mt.push(an))}return mt}function bc(c,g){return g=Cu(g,c),c=Gy(c,g),c==null||delete c[ec(tu(g))]}function mf(c,g,A,ee){return _c(c,g,A(Qn(c,g)),ee)}function wc(c,g,A,ee){for(var be=c.length,De=ee?be:-1;(ee?De--:++De<be)&&g(c[De],De,c););return A?al(c,ee?0:De,ee?De+1:be):al(c,ee?De+1:0,ee?be:De)}function Jl(c,g){var A=c;return A instanceof Mr&&(A=A.value()),da(g,function(ee,be){return be.func.apply(be.thisArg,gs([ee],be.args))},A)}function Ql(c,g,A){var ee=c.length;if(ee<2)return ee?Ju(c[0]):[];for(var be=-1,De=Mt(ee);++be<ee;)for(var it=c[be],mt=-1;++mt<ee;)mt!=be&&(De[be]=E(De[be]||it,c[mt],g,A));return Ju(je(De,1),g,A)}function Eu(c,g,A){for(var ee=-1,be=c.length,De=g.length,it={};++ee<be;){var mt=ee<De?g[ee]:n;A(it,c[ee],mt)}return it}function Wc(c){return ss(c)?c:[]}function Ah(c){return typeof c=="function"?c:hl}function Cu(c,g){return Rr(c)?c:gm(c,g)?[c]:Ky(Pi(c))}var sm=Vr;function eu(c,g,A){var ee=c.length;return A=A===n?ee:A,!g&&A>=ee?c:al(c,g,A)}var vf=$s||function(c){return Vi.clearTimeout(c)};function xy(c,g){if(g)return c.slice();var A=c.length,ee=bu?bu(A):new c.constructor(A);return c.copy(ee),ee}function am(c){var g=new c.constructor(c.byteLength);return new As(g).set(new As(c)),g}function Y3(c,g){var A=g?am(c.buffer):c.buffer;return new c.constructor(A,c.byteOffset,c.byteLength)}function X3(c){var g=new c.constructor(c.source,Ri.exec(c));return g.lastIndex=c.lastIndex,g}function J3(c){return Yr?ni(Yr.call(c)):{}}function Ly(c,g){var A=g?am(c.buffer):c.buffer;return new c.constructor(A,c.byteOffset,c.length)}function Sy(c,g){if(c!==g){var A=c!==n,ee=c===null,be=c===c,De=Nl(c),it=g!==n,mt=g===null,Ct=g===g,rn=Nl(g);if(!mt&&!rn&&!De&&c>g||De&&it&&Ct&&!mt&&!rn||ee&&it&&Ct||!A&&Ct||!be)return 1;if(!ee&&!De&&!rn&&c<g||rn&&A&&be&&!ee&&!De||mt&&A&&be||!it&&be||!Ct)return-1}return 0}function Q3(c,g,A){for(var ee=-1,be=c.criteria,De=g.criteria,it=be.length,mt=A.length;++ee<it;){var Ct=Sy(be[ee],De[ee]);if(Ct){if(ee>=mt)return Ct;var rn=A[ee];return Ct*(rn=="desc"?-1:1)}}return c.index-g.index}function Ey(c,g,A,ee){for(var be=-1,De=c.length,it=A.length,mt=-1,Ct=g.length,rn=re(De-it,0),an=Mt(Ct+rn),yn=!ee;++mt<Ct;)an[mt]=g[mt];for(;++be<it;)(yn||be<De)&&(an[A[be]]=c[be]);for(;rn--;)an[mt++]=c[be++];return an}function Cy(c,g,A,ee){for(var be=-1,De=c.length,it=-1,mt=A.length,Ct=-1,rn=g.length,an=re(De-mt,0),yn=Mt(an+rn),In=!ee;++be<an;)yn[be]=c[be];for(var Jn=be;++Ct<rn;)yn[Jn+Ct]=g[Ct];for(;++it<mt;)(In||be<De)&&(yn[Jn+A[it]]=c[be++]);return yn}function ll(c,g){var A=-1,ee=c.length;for(g||(g=Mt(ee));++A<ee;)g[A]=c[A];return g}function Qu(c,g,A,ee){var be=!A;A||(A={});for(var De=-1,it=g.length;++De<it;){var mt=g[De],Ct=ee?ee(A[mt],c[mt],mt,A,c):n;Ct===n&&(Ct=c[mt]),be?An(A,mt,Ct):pt(A,mt,Ct)}return A}function ex(c,g){return Qu(c,pm(c),g)}function tx(c,g){return Qu(c,jy(c),g)}function zp(c,g){return function(A,ee){var be=Rr(A)?Zu:Jt,De=g?g():{};return be(A,c,hr(ee,2),De)}}function yf(c){return Vr(function(g,A){var ee=-1,be=A.length,De=be>1?A[be-1]:n,it=be>2?A[2]:n;for(De=c.length>3&&typeof De=="function"?(be--,De):n,it&&Va(A[0],A[1],it)&&(De=be<3?n:De,be=1),g=ni(g);++ee<be;){var mt=A[ee];mt&&c(g,mt,ee,De)}return g})}function Py(c,g){return function(A,ee){if(A==null)return A;if(!ul(A))return c(A,ee);for(var be=A.length,De=g?be:-1,it=ni(A);(g?De--:++De<be)&&ee(it[De],De,it)!==!1;);return A}}function Ay(c){return function(g,A,ee){for(var be=-1,De=ni(g),it=ee(g),mt=it.length;mt--;){var Ct=it[c?mt:++be];if(A(De[Ct],Ct,De)===!1)break}return g}}function nx(c,g,A){var ee=g&U,be=yd(c);function De(){var it=this&&this!==Vi&&this instanceof De?be:c;return it.apply(ee?A:this,arguments)}return De}function My(c){return function(g){g=Pi(g);var A=Js(g)?Mo(g):n,ee=A?A[0]:g.charAt(0),be=A?eu(A,1).join(""):g.slice(1);return ee[c]()+be}}function _f(c){return function(g){return da(P2(C2(g).replace($r,"")),c,"")}}function yd(c){return function(){var g=arguments;switch(g.length){case 0:return new c;case 1:return new c(g[0]);case 2:return new c(g[0],g[1]);case 3:return new c(g[0],g[1],g[2]);case 4:return new c(g[0],g[1],g[2],g[3]);case 5:return new c(g[0],g[1],g[2],g[3],g[4]);case 6:return new c(g[0],g[1],g[2],g[3],g[4],g[5]);case 7:return new c(g[0],g[1],g[2],g[3],g[4],g[5],g[6])}var A=is(c.prototype),ee=c.apply(A,g);return Do(ee)?ee:A}}function rx(c,g,A){var ee=yd(c);function be(){for(var De=arguments.length,it=Mt(De),mt=De,Ct=bf(be);mt--;)it[mt]=arguments[mt];var rn=De<3&&it[0]!==Ct&&it[De-1]!==Ct?[]:$o(it,Ct);if(De-=rn.length,De<A)return Ny(c,g,Up,be.placeholder,n,it,rn,n,n,A-De);var an=this&&this!==Vi&&this instanceof be?ee:c;return Qr(an,this,it)}return be}function ky(c){return function(g,A,ee){var be=ni(g);if(!ul(g)){var De=hr(A,3);g=Gs(g),A=function(mt){return De(be[mt],mt,be)}}var it=c(g,A,ee);return it>-1?be[De?g[it]:it]:n}}function Ty(c){return Lc(function(g){var A=g.length,ee=A,be=_o.prototype.thru;for(c&&g.reverse();ee--;){var De=g[ee];if(typeof De!="function")throw new Li(o);if(be&&!it&&Gp(De)=="wrapper")var it=new _o([],!0)}for(ee=it?ee:A;++ee<A;){De=g[ee];var mt=Gp(De),Ct=mt=="wrapper"?fm(De):n;Ct&&mm(Ct[0])&&Ct[1]==(Le|Z|le|V)&&!Ct[4].length&&Ct[9]==1?it=it[Gp(Ct[0])].apply(it,Ct[3]):it=De.length==1&&mm(De)?it[mt]():it.thru(De)}return function(){var rn=arguments,an=rn[0];if(it&&rn.length==1&&Rr(an))return it.plant(an).value();for(var yn=0,In=A?g[yn].apply(this,rn):an;++yn<A;)In=g[yn].call(this,In);return In}})}function Up(c,g,A,ee,be,De,it,mt,Ct,rn){var an=g&Le,yn=g&U,In=g&N,Jn=g&(Z|J),pr=g&F,Gr=In?n:yd(c);function gr(){for(var ii=arguments.length,li=Mt(ii),Dl=ii;Dl--;)li[Dl]=arguments[Dl];if(Jn)var Ha=bf(gr),Il=Xs(li,Ha);if(ee&&(li=Ey(li,ee,be,Jn)),De&&(li=Cy(li,De,it,Jn)),ii-=Il,Jn&&ii<rn){var as=$o(li,Ha);return Ny(c,g,Up,gr.placeholder,A,li,as,mt,Ct,rn-ii)}var Au=yn?A:this,Pc=In?Au[c]:c;return ii=li.length,mt?li=Lx(li,mt):pr&&ii>1&&li.reverse(),an&&Ct<ii&&(li.length=Ct),this&&this!==Vi&&this instanceof gr&&(Pc=Gr||yd(Pc)),Pc.apply(Au,li)}return gr}function By(c,g){return function(A,ee){return Pe(A,c,g(ee),{})}}function $p(c,g){return function(A,ee){var be;if(A===n&&ee===n)return g;if(A!==n&&(be=A),ee!==n){if(be===n)return ee;typeof A=="string"||typeof ee=="string"?(A=wa(A),ee=wa(ee)):(A=jp(A),ee=jp(ee)),be=c(A,ee)}return be}}function lm(c){return Lc(function(g){return g=ei(g,Ar(hr())),Vr(function(A){var ee=this;return c(g,function(be){return Qr(be,ee,A)})})})}function Vp(c,g){g=g===n?" ":wa(g);var A=g.length;if(A<2)return A?pf(g,c):g;var ee=pf(g,mo(c/Ao(g)));return Js(g)?eu(Mo(ee),0,c).join(""):ee.slice(0,c)}function ix(c,g,A,ee){var be=g&U,De=yd(c);function it(){for(var mt=-1,Ct=arguments.length,rn=-1,an=ee.length,yn=Mt(an+Ct),In=this&&this!==Vi&&this instanceof it?De:c;++rn<an;)yn[rn]=ee[rn];for(;Ct--;)yn[rn++]=arguments[++mt];return Qr(In,be?A:this,yn)}return it}function Oy(c){return function(g,A,ee){return ee&&typeof ee!="number"&&Va(g,A,ee)&&(A=ee=n),g=Cc(g),A===n?(A=g,g=0):A=Cc(A),ee=ee===n?g<A?1:-1:Cc(ee),Ph(g,A,ee,c)}}function Hp(c){return function(g,A){return typeof g=="string"&&typeof A=="string"||(g=nu(g),A=nu(A)),c(g,A)}}function Ny(c,g,A,ee,be,De,it,mt,Ct,rn){var an=g&Z,yn=an?it:n,In=an?n:it,Jn=an?De:n,pr=an?n:De;g|=an?le:he,g&=~(an?he:le),g&j||(g&=-4);var Gr=[c,g,be,Jn,yn,pr,In,mt,Ct,rn],gr=A.apply(n,Gr);return mm(c)&&qy(gr,Gr),gr.placeholder=ee,Wy(gr,c,g)}function um(c){var g=xi[c];return function(A,ee){if(A=nu(A),ee=ee==null?0:Se(Hr(ee),292),ee&&p(A)){var be=(Pi(A)+"e").split("e"),De=g(be[0]+"e"+(+be[1]+ee));return be=(Pi(De)+"e").split("e"),+(be[0]+"e"+(+be[1]-ee))}return g(A)}}var ox=to&&1/Vo(new to([,-0]))[1]==K?function(c){return new to(c)}:Tm;function Dy(c){return function(g){var A=xa(g);return A==me?sl(g):A==Ve?Ku(g):Ji(g,c(g))}}function xc(c,g,A,ee,be,De,it,mt){var Ct=g&N;if(!Ct&&typeof c!="function")throw new Li(o);var rn=ee?ee.length:0;if(rn||(g&=-97,ee=be=n),it=it===n?it:re(Hr(it),0),mt=mt===n?mt:Hr(mt),rn-=be?be.length:0,g&he){var an=ee,yn=be;ee=be=n}var In=Ct?n:fm(c),Jn=[c,g,A,ee,be,an,yn,De,it,mt];if(In&&bx(Jn,In),c=Jn[0],g=Jn[1],A=Jn[2],ee=Jn[3],be=Jn[4],mt=Jn[9]=Jn[9]===n?Ct?0:c.length:re(Jn[9]-rn,0),!mt&&g&(Z|J)&&(g&=-25),!g||g==U)var pr=nx(c,g,A);else g==Z||g==J?pr=rx(c,g,mt):(g==le||g==(U|le))&&!be.length?pr=ix(c,g,A,ee):pr=Up.apply(n,Jn);var Gr=In?Lu:qy;return Wy(Gr(pr,Jn),c,g)}function Iy(c,g,A,ee){return c===n||Pu(c,ta[A])&&!Dr.call(ee,A)?g:c}function Ry(c,g,A,ee,be,De){return Do(c)&&Do(g)&&(De.set(g,c),sa(c,g,n,Ry,De),De.delete(g)),c}function sx(c){return wd(c)?n:c}function Fy(c,g,A,ee,be,De){var it=A&P,mt=c.length,Ct=g.length;if(mt!=Ct&&!(it&&Ct>mt))return!1;var rn=De.get(c),an=De.get(g);if(rn&&an)return rn==g&&an==c;var yn=-1,In=!0,Jn=A&T?new H:n;for(De.set(c,g),De.set(g,c);++yn<mt;){var pr=c[yn],Gr=g[yn];if(ee)var gr=it?ee(Gr,pr,yn,g,c,De):ee(pr,Gr,yn,c,g,De);if(gr!==n){if(gr)continue;In=!1;break}if(Jn){if(!O(g,function(ii,li){if(!ol(Jn,li)&&(pr===ii||be(pr,ii,A,ee,De)))return Jn.push(li)})){In=!1;break}}else if(!(pr===Gr||be(pr,Gr,A,ee,De))){In=!1;break}}return De.delete(c),De.delete(g),In}function ax(c,g,A,ee,be,De,it){switch(A){case mn:if(c.byteLength!=g.byteLength||c.byteOffset!=g.byteOffset)return!1;c=c.buffer,g=g.buffer;case dn:return!(c.byteLength!=g.byteLength||!De(new As(c),new As(g)));case Q:case ue:case pe:return Pu(+c,+g);case Me:return c.name==g.name&&c.message==g.message;case Qe:case ot:return c==g+"";case me:var mt=sl;case Ve:var Ct=ee&P;if(mt||(mt=Vo),c.size!=g.size&&!Ct)return!1;var rn=it.get(c);if(rn)return rn==g;ee|=T,it.set(c,g);var an=Fy(mt(c),mt(g),ee,be,De,it);return it.delete(c),an;case At:if(Yr)return Yr.call(c)==Yr.call(g)}return!1}function lx(c,g,A,ee,be,De){var it=A&P,mt=cm(c),Ct=mt.length,rn=cm(g),an=rn.length;if(Ct!=an&&!it)return!1;for(var yn=Ct;yn--;){var In=mt[yn];if(!(it?In in g:Dr.call(g,In)))return!1}var Jn=De.get(c),pr=De.get(g);if(Jn&&pr)return Jn==g&&pr==c;var Gr=!0;De.set(c,g),De.set(g,c);for(var gr=it;++yn<Ct;){In=mt[yn];var ii=c[In],li=g[In];if(ee)var Dl=it?ee(li,ii,In,g,c,De):ee(ii,li,In,c,g,De);if(!(Dl===n?ii===li||be(ii,li,A,ee,De):Dl)){Gr=!1;break}gr||(gr=In=="constructor")}if(Gr&&!gr){var Ha=c.constructor,Il=g.constructor;Ha!=Il&&"constructor"in c&&"constructor"in g&&!(typeof Ha=="function"&&Ha instanceof Ha&&typeof Il=="function"&&Il instanceof Il)&&(Gr=!1)}return De.delete(c),De.delete(g),Gr}function Lc(c){return ym(Hy(c,n,Qy),c+"")}function cm(c){return qe(c,Gs,pm)}function hm(c){return qe(c,cl,jy)}var fm=Si?function(c){return Si.get(c)}:Tm;function Gp(c){for(var g=c.name+"",A=rs[g],ee=Dr.call(rs,g)?A.length:0;ee--;){var be=A[ee],De=be.func;if(De==null||De==c)return be.name}return g}function bf(c){var g=Dr.call(Te,"placeholder")?Te:c;return g.placeholder}function hr(){var c=Te.iteratee||Mm;return c=c===Mm?Gn:c,arguments.length?c(arguments[0],arguments[1]):c}function qp(c,g){var A=c.__data__;return mx(g)?A[typeof g=="string"?"string":"hash"]:A.map}function dm(c){for(var g=Gs(c),A=g.length;A--;){var ee=g[A],be=c[ee];g[A]=[ee,be,$y(be)]}return g}function Mh(c,g){var A=Qi(c,g);return St(A)?A:n}function ux(c){var g=Dr.call(c,ya),A=c[ya];try{c[ya]=n;var ee=!0}catch{}var be=ri.call(c);return ee&&(g?c[ya]=A:delete c[ya]),be}var pm=Vs?function(c){return c==null?[]:(c=ni(c),zs(Vs(c),function(g){return hi.call(c,g)}))}:Bm,jy=Vs?function(c){for(var g=[];c;)gs(g,pm(c)),c=ia(c);return g}:Bm,xa=nt;(Tn&&xa(new Tn(new ArrayBuffer(1)))!=mn||Vn&&xa(new Vn)!=me||Er&&xa(Er.resolve())!=Ke||to&&xa(new to)!=Ve||Bi&&xa(new Bi)!=zt)&&(xa=function(c){var g=nt(c),A=g==ze?c.constructor:n,ee=A?kh(A):"";if(ee)switch(ee){case vc:return mn;case oa:return me;case Hs:return Ke;case Ms:return Ve;case xh:return zt}return g});function cx(c,g,A){for(var ee=-1,be=A.length;++ee<be;){var De=A[ee],it=De.size;switch(De.type){case"drop":c+=it;break;case"dropRight":g-=it;break;case"take":g=Se(g,c+it);break;case"takeRight":c=re(c,g-it);break}}return{start:c,end:g}}function hx(c){var g=c.match(tr);return g?g[1].split(hn):[]}function zy(c,g,A){g=Cu(g,c);for(var ee=-1,be=g.length,De=!1;++ee<be;){var it=ec(g[ee]);if(!(De=c!=null&&A(c,it)))break;c=c[it]}return De||++ee!=be?De:(be=c==null?0:c.length,!!be&&Qp(be)&&Sc(it,be)&&(Rr(c)||Th(c)))}function fx(c){var g=c.length,A=new c.constructor(g);return g&&typeof c[0]=="string"&&Dr.call(c,"index")&&(A.index=c.index,A.input=c.input),A}function Uy(c){return typeof c.constructor=="function"&&!_d(c)?is(ia(c)):{}}function dx(c,g,A){var ee=c.constructor;switch(g){case dn:return am(c);case Q:case ue:return new ee(+c);case mn:return Y3(c,A);case et:case st:case rt:case Vt:case Xt:case ft:case Ue:case Dt:case gn:return Ly(c,A);case me:return new ee;case pe:case ot:return new ee(c);case Qe:return X3(c);case Ve:return new ee;case At:return J3(c)}}function px(c,g){var A=g.length;if(!A)return c;var ee=A-1;return g[ee]=(A>1?"& ":"")+g[ee],g=g.join(A>2?", ":" "),c.replace(bn,`{
/* [wrapped with `+g+`] */
`)}function gx(c){return Rr(c)||Th(c)||!!(ns&&c&&c[ns])}function Sc(c,g){var A=typeof c;return g=g??q,!!g&&(A=="number"||A!="symbol"&&Ds.test(c))&&c>-1&&c%1==0&&c<g}function Va(c,g,A){if(!Do(A))return!1;var ee=typeof g;return(ee=="number"?ul(A)&&Sc(g,A.length):ee=="string"&&g in A)?Pu(A[g],c):!1}function gm(c,g){if(Rr(c))return!1;var A=typeof c;return A=="number"||A=="symbol"||A=="boolean"||c==null||Nl(c)?!0:ki.test(c)||!Wr.test(c)||g!=null&&c in ni(g)}function mx(c){var g=typeof c;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?c!=="__proto__":c===null}function mm(c){var g=Gp(c),A=Te[g];if(typeof A!="function"||!(g in Mr.prototype))return!1;if(c===A)return!0;var ee=fm(A);return!!ee&&c===ee[0]}function vx(c){return!!go&&go in c}var yx=na?Ec:Om;function _d(c){var g=c&&c.constructor,A=typeof g=="function"&&g.prototype||ta;return c===A}function $y(c){return c===c&&!Do(c)}function Vy(c,g){return function(A){return A==null?!1:A[c]===g&&(g!==n||c in ni(A))}}function _x(c){var g=Xp(c,function(ee){return A.size===d&&A.clear(),ee}),A=g.cache;return g}function bx(c,g){var A=c[1],ee=g[1],be=A|ee,De=be<(U|N|Le),it=ee==Le&&A==Z||ee==Le&&A==V&&c[7].length<=g[8]||ee==(Le|V)&&g[7].length<=g[8]&&A==Z;if(!(De||it))return c;ee&U&&(c[2]=g[2],be|=A&U?0:j);var mt=g[3];if(mt){var Ct=c[3];c[3]=Ct?Ey(Ct,mt,g[4]):mt,c[4]=Ct?$o(c[3],v):g[4]}return mt=g[5],mt&&(Ct=c[5],c[5]=Ct?Cy(Ct,mt,g[6]):mt,c[6]=Ct?$o(c[5],v):g[6]),mt=g[7],mt&&(c[7]=mt),ee&Le&&(c[8]=c[8]==null?g[8]:Se(c[8],g[8])),c[9]==null&&(c[9]=g[9]),c[0]=g[0],c[1]=be,c}function wx(c){var g=[];if(c!=null)for(var A in ni(c))g.push(A);return g}function xx(c){return ri.call(c)}function Hy(c,g,A){return g=re(g===n?c.length-1:g,0),function(){for(var ee=arguments,be=-1,De=re(ee.length-g,0),it=Mt(De);++be<De;)it[be]=ee[g+be];be=-1;for(var mt=Mt(g+1);++be<g;)mt[be]=ee[be];return mt[g]=A(it),Qr(c,this,mt)}}function Gy(c,g){return g.length<2?c:Qn(c,al(g,0,-1))}function Lx(c,g){for(var A=c.length,ee=Se(g.length,A),be=ll(c);ee--;){var De=g[ee];c[ee]=Sc(De,A)?be[De]:n}return c}function vm(c,g){if(!(g==="constructor"&&typeof c[g]=="function")&&g!="__proto__")return c[g]}var qy=Zy(Lu),bd=mc||function(c,g){return Vi.setTimeout(c,g)},ym=Zy(Ip);function Wy(c,g,A){var ee=g+"";return ym(c,px(ee,Sx(hx(ee),A)))}function Zy(c){var g=0,A=0;return function(){var ee=at(),be=k-(ee-A);if(A=ee,be>0){if(++g>=D)return arguments[0]}else g=0;return c.apply(n,arguments)}}function Wp(c,g){var A=-1,ee=c.length,be=ee-1;for(g=g===n?ee:g;++A<g;){var De=Ch(A,be),it=c[De];c[De]=c[A],c[A]=it}return c.length=g,c}var Ky=_x(function(c){var g=[];return c.charCodeAt(0)===46&&g.push(""),c.replace(Fn,function(A,ee,be,De){g.push(be?De.replace(bi,"$1"):ee||A)}),g});function ec(c){if(typeof c=="string"||Nl(c))return c;var g=c+"";return g=="0"&&1/c==-1/0?"-0":g}function kh(c){if(c!=null){try{return ra.call(c)}catch{}try{return c+""}catch{}}return""}function Sx(c,g){return fo(se,function(A){var ee="_."+A[0];g&A[1]&&!rl(c,ee)&&c.push(ee)}),c.sort()}function Yy(c){if(c instanceof Mr)return c.clone();var g=new _o(c.__wrapped__,c.__chain__);return g.__actions__=ll(c.__actions__),g.__index__=c.__index__,g.__values__=c.__values__,g}function Ex(c,g,A){(A?Va(c,g,A):g===n)?g=1:g=re(Hr(g),0);var ee=c==null?0:c.length;if(!ee||g<1)return[];for(var be=0,De=0,it=Mt(mo(ee/g));be<ee;)it[De++]=al(c,be,be+=g);return it}function Cx(c){for(var g=-1,A=c==null?0:c.length,ee=0,be=[];++g<A;){var De=c[g];De&&(be[ee++]=De)}return be}function Px(){var c=arguments.length;if(!c)return[];for(var g=Mt(c-1),A=arguments[0],ee=c;ee--;)g[ee-1]=arguments[ee];return gs(Rr(A)?ll(A):[A],je(g,1))}var Ax=Vr(function(c,g){return ss(c)?E(c,je(g,1,ss,!0)):[]}),Mx=Vr(function(c,g){var A=tu(g);return ss(A)&&(A=n),ss(c)?E(c,je(g,1,ss,!0),hr(A,2)):[]}),kx=Vr(function(c,g){var A=tu(g);return ss(A)&&(A=n),ss(c)?E(c,je(g,1,ss,!0),n,A):[]});function Tx(c,g,A){var ee=c==null?0:c.length;return ee?(g=A||g===n?1:Hr(g),al(c,g<0?0:g,ee)):[]}function Bx(c,g,A){var ee=c==null?0:c.length;return ee?(g=A||g===n?1:Hr(g),g=ee-g,al(c,0,g<0?0:g)):[]}function Ox(c,g){return c&&c.length?wc(c,hr(g,3),!0,!0):[]}function Nx(c,g){return c&&c.length?wc(c,hr(g,3),!0):[]}function Dx(c,g,A,ee){var be=c==null?0:c.length;return be?(A&&typeof A!="number"&&Va(c,g,A)&&(A=0,ee=be),xe(c,g,A,ee)):[]}function Xy(c,g,A){var ee=c==null?0:c.length;if(!ee)return-1;var be=A==null?0:Hr(A);return be<0&&(be=re(ee+be,0)),It(c,hr(g,3),be)}function Jy(c,g,A){var ee=c==null?0:c.length;if(!ee)return-1;var be=ee-1;return A!==n&&(be=Hr(A),be=A<0?re(ee+be,0):Se(be,ee-1)),It(c,hr(g,3),be,!0)}function Qy(c){var g=c==null?0:c.length;return g?je(c,1):[]}function Ix(c){var g=c==null?0:c.length;return g?je(c,K):[]}function Rx(c,g){var A=c==null?0:c.length;return A?(g=g===n?1:Hr(g),je(c,g)):[]}function Fx(c){for(var g=-1,A=c==null?0:c.length,ee={};++g<A;){var be=c[g];ee[be[0]]=be[1]}return ee}function e2(c){return c&&c.length?c[0]:n}function jx(c,g,A){var ee=c==null?0:c.length;if(!ee)return-1;var be=A==null?0:Hr(A);return be<0&&(be=re(ee+be,0)),cn(c,g,be)}function zx(c){var g=c==null?0:c.length;return g?al(c,0,-1):[]}var Ux=Vr(function(c){var g=ei(c,Wc);return g.length&&g[0]===c[0]?ge(g):[]}),$x=Vr(function(c){var g=tu(c),A=ei(c,Wc);return g===tu(A)?g=n:A.pop(),A.length&&A[0]===c[0]?ge(A,hr(g,2)):[]}),Vx=Vr(function(c){var g=tu(c),A=ei(c,Wc);return g=typeof g=="function"?g:n,g&&A.pop(),A.length&&A[0]===c[0]?ge(A,n,g):[]});function Hx(c,g){return c==null?"":S.call(c,g)}function tu(c){var g=c==null?0:c.length;return g?c[g-1]:n}function Gx(c,g,A){var ee=c==null?0:c.length;if(!ee)return-1;var be=ee;return A!==n&&(be=Hr(A),be=be<0?re(ee+be,0):Se(be,ee-1)),g===g?pa(c,g,be):It(c,Nn,be,!0)}function qx(c,g){return c&&c.length?$a(c,Hr(g)):n}var Wx=Vr(t2);function t2(c,g){return c&&c.length&&g&&g.length?df(c,g):c}function Zx(c,g,A){return c&&c.length&&g&&g.length?df(c,g,hr(A,2)):c}function Kx(c,g,A){return c&&c.length&&g&&g.length?df(c,g,n,A):c}var Yx=Lc(function(c,g){var A=c==null?0:c.length,ee=Cn(c,g);return Eh(c,ei(g,function(be){return Sc(be,A)?+be:be}).sort(Sy)),ee});function Xx(c,g){var A=[];if(!(c&&c.length))return A;var ee=-1,be=[],De=c.length;for(g=hr(g,3);++ee<De;){var it=c[ee];g(it,ee,c)&&(A.push(it),be.push(ee))}return Eh(c,be),A}function _m(c){return c==null?c:nn.call(c)}function Jx(c,g,A){var ee=c==null?0:c.length;return ee?(A&&typeof A!="number"&&Va(c,g,A)?(g=0,A=ee):(g=g==null?0:Hr(g),A=A===n?ee:Hr(A)),al(c,g,A)):[]}function Qx(c,g){return Su(c,g)}function eL(c,g,A){return md(c,g,hr(A,2))}function tL(c,g){var A=c==null?0:c.length;if(A){var ee=Su(c,g);if(ee<A&&Pu(c[ee],g))return ee}return-1}function nL(c,g){return Su(c,g,!0)}function rL(c,g,A){return md(c,g,hr(A,2),!0)}function iL(c,g){var A=c==null?0:c.length;if(A){var ee=Su(c,g,!0)-1;if(Pu(c[ee],g))return ee}return-1}function oL(c){return c&&c.length?vd(c):[]}function sL(c,g){return c&&c.length?vd(c,hr(g,2)):[]}function aL(c){var g=c==null?0:c.length;return g?al(c,1,g):[]}function lL(c,g,A){return c&&c.length?(g=A||g===n?1:Hr(g),al(c,0,g<0?0:g)):[]}function uL(c,g,A){var ee=c==null?0:c.length;return ee?(g=A||g===n?1:Hr(g),g=ee-g,al(c,g<0?0:g,ee)):[]}function cL(c,g){return c&&c.length?wc(c,hr(g,3),!1,!0):[]}function hL(c,g){return c&&c.length?wc(c,hr(g,3)):[]}var fL=Vr(function(c){return Ju(je(c,1,ss,!0))}),dL=Vr(function(c){var g=tu(c);return ss(g)&&(g=n),Ju(je(c,1,ss,!0),hr(g,2))}),pL=Vr(function(c){var g=tu(c);return g=typeof g=="function"?g:n,Ju(je(c,1,ss,!0),n,g)});function gL(c){return c&&c.length?Ju(c):[]}function mL(c,g){return c&&c.length?Ju(c,hr(g,2)):[]}function vL(c,g){return g=typeof g=="function"?g:n,c&&c.length?Ju(c,n,g):[]}function bm(c){if(!(c&&c.length))return[];var g=0;return c=zs(c,function(A){if(ss(A))return g=re(A.length,g),!0}),qi(g,function(A){return ei(c,or(A))})}function n2(c,g){if(!(c&&c.length))return[];var A=bm(c);return g==null?A:ei(A,function(ee){return Qr(g,n,ee)})}var yL=Vr(function(c,g){return ss(c)?E(c,g):[]}),_L=Vr(function(c){return Ql(zs(c,ss))}),bL=Vr(function(c){var g=tu(c);return ss(g)&&(g=n),Ql(zs(c,ss),hr(g,2))}),wL=Vr(function(c){var g=tu(c);return g=typeof g=="function"?g:n,Ql(zs(c,ss),n,g)}),xL=Vr(bm);function LL(c,g){return Eu(c||[],g||[],pt)}function SL(c,g){return Eu(c||[],g||[],_c)}var EL=Vr(function(c){var g=c.length,A=g>1?c[g-1]:n;return A=typeof A=="function"?(c.pop(),A):n,n2(c,A)});function r2(c){var g=Te(c);return g.__chain__=!0,g}function CL(c,g){return g(c),c}function Zp(c,g){return g(c)}var PL=Lc(function(c){var g=c.length,A=g?c[0]:0,ee=this.__wrapped__,be=function(De){return Cn(De,c)};return g>1||this.__actions__.length||!(ee instanceof Mr)||!Sc(A)?this.thru(be):(ee=ee.slice(A,+A+(g?1:0)),ee.__actions__.push({func:Zp,args:[be],thisArg:n}),new _o(ee,this.__chain__).thru(function(De){return g&&!De.length&&De.push(n),De}))});function AL(){return r2(this)}function ML(){return new _o(this.value(),this.__chain__)}function kL(){this.__values__===n&&(this.__values__=v2(this.value()));var c=this.__index__>=this.__values__.length,g=c?n:this.__values__[this.__index__++];return{done:c,value:g}}function TL(){return this}function BL(c){for(var g,A=this;A instanceof wu;){var ee=Yy(A);ee.__index__=0,ee.__values__=n,g?be.__wrapped__=ee:g=ee;var be=ee;A=A.__wrapped__}return be.__wrapped__=c,g}function OL(){var c=this.__wrapped__;if(c instanceof Mr){var g=c;return this.__actions__.length&&(g=new Mr(this)),g=g.reverse(),g.__actions__.push({func:Zp,args:[_m],thisArg:n}),new _o(g,this.__chain__)}return this.thru(_m)}function NL(){return Jl(this.__wrapped__,this.__actions__)}var DL=zp(function(c,g,A){Dr.call(c,A)?++c[A]:An(c,A,1)});function IL(c,g,A){var ee=Rr(c)?Tl:ne;return A&&Va(c,g,A)&&(g=n),ee(c,hr(g,3))}function RL(c,g){var A=Rr(c)?zs:We;return A(c,hr(g,3))}var FL=ky(Xy),jL=ky(Jy);function zL(c,g){return je(Kp(c,g),1)}function UL(c,g){return je(Kp(c,g),K)}function $L(c,g,A){return A=A===n?1:Hr(A),je(Kp(c,g),A)}function i2(c,g){var A=Rr(c)?fo:R;return A(c,hr(g,3))}function o2(c,g){var A=Rr(c)?js:X;return A(c,hr(g,3))}var VL=zp(function(c,g,A){Dr.call(c,A)?c[A].push(g):An(c,A,[g])});function HL(c,g,A,ee){c=ul(c)?c:xf(c),A=A&&!ee?Hr(A):0;var be=c.length;return A<0&&(A=re(be+A,0)),e0(c)?A<=be&&c.indexOf(g,A)>-1:!!be&&cn(c,g,A)>-1}var GL=Vr(function(c,g,A){var ee=-1,be=typeof g=="function",De=ul(c)?Mt(c.length):[];return R(c,function(it){De[++ee]=be?Qr(g,it,A):Ne(it,g,A)}),De}),qL=zp(function(c,g,A){An(c,A,g)});function Kp(c,g){var A=Rr(c)?ei:mi;return A(c,hr(g,3))}function WL(c,g,A,ee){return c==null?[]:(Rr(g)||(g=g==null?[]:[g]),A=ee?n:A,Rr(A)||(A=A==null?[]:[A]),Xu(c,g,A))}var ZL=zp(function(c,g,A){c[A?0:1].push(g)},function(){return[[],[]]});function KL(c,g,A){var ee=Rr(c)?da:yi,be=arguments.length<3;return ee(c,hr(g,4),A,be,R)}function YL(c,g,A){var ee=Rr(c)?Gi:yi,be=arguments.length<3;return ee(c,hr(g,4),A,be,X)}function XL(c,g){var A=Rr(c)?zs:We;return A(c,Jp(hr(g,3)))}function JL(c){var g=Rr(c)?Ot:gf;return g(c)}function QL(c,g,A){(A?Va(c,g,A):g===n)?g=1:g=Hr(g);var ee=Rr(c)?wt:Dp;return ee(c,g)}function eS(c){var g=Rr(c)?qt:Rp;return g(c)}function tS(c){if(c==null)return 0;if(ul(c))return e0(c)?Ao(c):c.length;var g=xa(c);return g==me||g==Ve?c.size:Xr(c).length}function nS(c,g,A){var ee=Rr(c)?O:Fp;return A&&Va(c,g,A)&&(g=n),ee(c,hr(g,3))}var rS=Vr(function(c,g){if(c==null)return[];var A=g.length;return A>1&&Va(c,g[0],g[1])?g=[]:A>2&&Va(g[0],g[1],g[2])&&(g=[g[0]]),Xu(c,je(g,1),[])}),Yp=Go||function(){return Vi.Date.now()};function iS(c,g){if(typeof g!="function")throw new Li(o);return c=Hr(c),function(){if(--c<1)return g.apply(this,arguments)}}function s2(c,g,A){return g=A?n:g,g=c&&g==null?c.length:g,xc(c,Le,n,n,n,n,g)}function a2(c,g){var A;if(typeof g!="function")throw new Li(o);return c=Hr(c),function(){return--c>0&&(A=g.apply(this,arguments)),c<=1&&(g=n),A}}var wm=Vr(function(c,g,A){var ee=U;if(A.length){var be=$o(A,bf(wm));ee|=le}return xc(c,ee,g,A,be)}),l2=Vr(function(c,g,A){var ee=U|N;if(A.length){var be=$o(A,bf(l2));ee|=le}return xc(g,ee,c,A,be)});function u2(c,g,A){g=A?n:g;var ee=xc(c,Z,n,n,n,n,n,g);return ee.placeholder=u2.placeholder,ee}function c2(c,g,A){g=A?n:g;var ee=xc(c,J,n,n,n,n,n,g);return ee.placeholder=c2.placeholder,ee}function h2(c,g,A){var ee,be,De,it,mt,Ct,rn=0,an=!1,yn=!1,In=!0;if(typeof c!="function")throw new Li(o);g=nu(g)||0,Do(A)&&(an=!!A.leading,yn="maxWait"in A,De=yn?re(nu(A.maxWait)||0,g):De,In="trailing"in A?!!A.trailing:In);function Jn(as){var Au=ee,Pc=be;return ee=be=n,rn=as,it=c.apply(Pc,Au),it}function pr(as){return rn=as,mt=bd(ii,g),an?Jn(as):it}function Gr(as){var Au=as-Ct,Pc=as-rn,k2=g-Au;return yn?Se(k2,De-Pc):k2}function gr(as){var Au=as-Ct,Pc=as-rn;return Ct===n||Au>=g||Au<0||yn&&Pc>=De}function ii(){var as=Yp();if(gr(as))return li(as);mt=bd(ii,Gr(as))}function li(as){return mt=n,In&&ee?Jn(as):(ee=be=n,it)}function Dl(){mt!==n&&vf(mt),rn=0,ee=Ct=be=mt=n}function Ha(){return mt===n?it:li(Yp())}function Il(){var as=Yp(),Au=gr(as);if(ee=arguments,be=this,Ct=as,Au){if(mt===n)return pr(Ct);if(yn)return vf(mt),mt=bd(ii,g),Jn(Ct)}return mt===n&&(mt=bd(ii,g)),it}return Il.cancel=Dl,Il.flush=Ha,Il}var oS=Vr(function(c,g){return w(c,1,g)}),sS=Vr(function(c,g,A){return w(c,nu(g)||0,A)});function aS(c){return xc(c,F)}function Xp(c,g){if(typeof c!="function"||g!=null&&typeof g!="function")throw new Li(o);var A=function(){var ee=arguments,be=g?g.apply(this,ee):ee[0],De=A.cache;if(De.has(be))return De.get(be);var it=c.apply(this,ee);return A.cache=De.set(be,it)||De,it};return A.cache=new(Xp.Cache||ba),A}Xp.Cache=ba;function Jp(c){if(typeof c!="function")throw new Li(o);return function(){var g=arguments;switch(g.length){case 0:return!c.call(this);case 1:return!c.call(this,g[0]);case 2:return!c.call(this,g[0],g[1]);case 3:return!c.call(this,g[0],g[1],g[2])}return!c.apply(this,g)}}function lS(c){return a2(2,c)}var uS=sm(function(c,g){g=g.length==1&&Rr(g[0])?ei(g[0],Ar(hr())):ei(je(g,1),Ar(hr()));var A=g.length;return Vr(function(ee){for(var be=-1,De=Se(ee.length,A);++be<De;)ee[be]=g[be].call(this,ee[be]);return Qr(c,this,ee)})}),xm=Vr(function(c,g){var A=$o(g,bf(xm));return xc(c,le,n,g,A)}),f2=Vr(function(c,g){var A=$o(g,bf(f2));return xc(c,he,n,g,A)}),cS=Lc(function(c,g){return xc(c,V,n,n,n,g)});function hS(c,g){if(typeof c!="function")throw new Li(o);return g=g===n?g:Hr(g),Vr(c,g)}function fS(c,g){if(typeof c!="function")throw new Li(o);return g=g==null?0:re(Hr(g),0),Vr(function(A){var ee=A[g],be=eu(A,0,g);return ee&&gs(be,ee),Qr(c,this,be)})}function dS(c,g,A){var ee=!0,be=!0;if(typeof c!="function")throw new Li(o);return Do(A)&&(ee="leading"in A?!!A.leading:ee,be="trailing"in A?!!A.trailing:be),h2(c,g,{leading:ee,maxWait:g,trailing:be})}function pS(c){return s2(c,1)}function gS(c,g){return xm(Ah(g),c)}function mS(){if(!arguments.length)return[];var c=arguments[0];return Rr(c)?c:[c]}function vS(c){return l(c,_)}function yS(c,g){return g=typeof g=="function"?g:n,l(c,_,g)}function _S(c){return l(c,y|_)}function bS(c,g){return g=typeof g=="function"?g:n,l(c,y|_,g)}function wS(c,g){return g==null||m(c,g,Gs(g))}function Pu(c,g){return c===g||c!==c&&g!==g}var xS=Hp(ht),LS=Hp(function(c,g){return c>=g}),Th=Oe(function(){return arguments}())?Oe:function(c){return qo(c)&&Dr.call(c,"callee")&&!hi.call(c,"callee")},Rr=Mt.isArray,SS=Kl?Ar(Kl):Ie;function ul(c){return c!=null&&Qp(c.length)&&!Ec(c)}function ss(c){return qo(c)&&ul(c)}function ES(c){return c===!0||c===!1||qo(c)&&nt(c)==Q}var Zc=a||Om,CS=Ys?Ar(Ys):Fe;function PS(c){return qo(c)&&c.nodeType===1&&!wd(c)}function AS(c){if(c==null)return!0;if(ul(c)&&(Rr(c)||typeof c=="string"||typeof c.splice=="function"||Zc(c)||wf(c)||Th(c)))return!c.length;var g=xa(c);if(g==me||g==Ve)return!c.size;if(_d(c))return!Xr(c).length;for(var A in c)if(Dr.call(c,A))return!1;return!0}function MS(c,g){return lt(c,g)}function kS(c,g,A){A=typeof A=="function"?A:n;var ee=A?A(c,g):n;return ee===n?lt(c,g,n,A):!!ee}function Lm(c){if(!qo(c))return!1;var g=nt(c);return g==Me||g==Re||typeof c.message=="string"&&typeof c.name=="string"&&!wd(c)}function TS(c){return typeof c=="number"&&p(c)}function Ec(c){if(!Do(c))return!1;var g=nt(c);return g==Ze||g==oe||g==fe||g==Ge}function d2(c){return typeof c=="number"&&c==Hr(c)}function Qp(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=q}function Do(c){var g=typeof c;return c!=null&&(g=="object"||g=="function")}function qo(c){return c!=null&&typeof c=="object"}var p2=Al?Ar(Al):gt;function BS(c,g){return c===g||Lt(c,g,dm(g))}function OS(c,g,A){return A=typeof A=="function"?A:n,Lt(c,g,dm(g),A)}function NS(c){return g2(c)&&c!=+c}function DS(c){if(yx(c))throw new Un(s);return St(c)}function IS(c){return c===null}function RS(c){return c==null}function g2(c){return typeof c=="number"||qo(c)&&nt(c)==pe}function wd(c){if(!qo(c)||nt(c)!=ze)return!1;var g=ia(c);if(g===null)return!0;var A=Dr.call(g,"constructor")&&g.constructor;return typeof A=="function"&&A instanceof A&&ra.call(A)==si}var Sm=Ml?Ar(Ml):tn;function FS(c){return d2(c)&&c>=-9007199254740991&&c<=q}var m2=Ps?Ar(Ps):Dn;function e0(c){return typeof c=="string"||!Rr(c)&&qo(c)&&nt(c)==ot}function Nl(c){return typeof c=="symbol"||qo(c)&&nt(c)==At}var wf=kl?Ar(kl):jn;function jS(c){return c===n}function zS(c){return qo(c)&&xa(c)==zt}function US(c){return qo(c)&&nt(c)==Kt}var $S=Hp(Ir),VS=Hp(function(c,g){return c<=g});function v2(c){if(!c)return[];if(ul(c))return e0(c)?Mo(c):ll(c);if(nr&&c[nr])return es(c[nr]());var g=xa(c),A=g==me?sl:g==Ve?Vo:xf;return A(c)}function Cc(c){if(!c)return c===0?c:0;if(c=nu(c),c===K||c===-1/0){var g=c<0?-1:1;return g*ve}return c===c?c:0}function Hr(c){var g=Cc(c),A=g%1;return g===g?A?g-A:g:0}function y2(c){return c?Hn(Hr(c),0,Xe):0}function nu(c){if(typeof c=="number")return c;if(Nl(c))return Ce;if(Do(c)){var g=typeof c.valueOf=="function"?c.valueOf():c;c=Do(g)?g+"":g}if(typeof c!="string")return c===0?c:+c;c=ms(c);var A=yr.test(c);return A||xl.test(c)?Pl(c.slice(2),A?2:8):Lo.test(c)?Ce:+c}function _2(c){return Qu(c,cl(c))}function HS(c){return c?Hn(Hr(c),-9007199254740991,q):c===0?c:0}function Pi(c){return c==null?"":wa(c)}var GS=yf(function(c,g){if(_d(g)||ul(g)){Qu(g,Gs(g),c);return}for(var A in g)Dr.call(g,A)&&pt(c,A,g[A])}),b2=yf(function(c,g){Qu(g,cl(g),c)}),t0=yf(function(c,g,A,ee){Qu(g,cl(g),c,ee)}),qS=yf(function(c,g,A,ee){Qu(g,Gs(g),c,ee)}),WS=Lc(Cn);function ZS(c,g){var A=is(c);return g==null?A:fn(A,g)}var KS=Vr(function(c,g){c=ni(c);var A=-1,ee=g.length,be=ee>2?g[2]:n;for(be&&Va(g[0],g[1],be)&&(ee=1);++A<ee;)for(var De=g[A],it=cl(De),mt=-1,Ct=it.length;++mt<Ct;){var rn=it[mt],an=c[rn];(an===n||Pu(an,ta[rn])&&!Dr.call(c,rn))&&(c[rn]=De[rn])}return c}),YS=Vr(function(c){return c.push(n,Ry),Qr(w2,n,c)});function XS(c,g){return xt(c,hr(g,3),Yt)}function JS(c,g){return xt(c,hr(g,3),_n)}function QS(c,g){return c==null?c:vt(c,hr(g,3),cl)}function eE(c,g){return c==null?c:kt(c,hr(g,3),cl)}function tE(c,g){return c&&Yt(c,hr(g,3))}function nE(c,g){return c&&_n(c,hr(g,3))}function rE(c){return c==null?[]:Ln(c,Gs(c))}function iE(c){return c==null?[]:Ln(c,cl(c))}function Em(c,g,A){var ee=c==null?n:Qn(c,g);return ee===n?A:ee}function oE(c,g){return c!=null&&zy(c,g,Nt)}function Cm(c,g){return c!=null&&zy(c,g,bt)}var sE=By(function(c,g,A){g!=null&&typeof g.toString!="function"&&(g=ri.call(g)),c[g]=A},Am(hl)),aE=By(function(c,g,A){g!=null&&typeof g.toString!="function"&&(g=ri.call(g)),Dr.call(c,g)?c[g].push(A):c[g]=[A]},hr),lE=Vr(Ne);function Gs(c){return ul(c)?Bt(c):Xr(c)}function cl(c){return ul(c)?Bt(c,!0):ai(c)}function uE(c,g){var A={};return g=hr(g,3),Yt(c,function(ee,be,De){An(A,g(ee,be,De),ee)}),A}function cE(c,g){var A={};return g=hr(g,3),Yt(c,function(ee,be,De){An(A,be,g(ee,be,De))}),A}var hE=yf(function(c,g,A){sa(c,g,A)}),w2=yf(function(c,g,A,ee){sa(c,g,A,ee)}),fE=Lc(function(c,g){var A={};if(c==null)return A;var ee=!1;g=ei(g,function(De){return De=Cu(De,c),ee||(ee=De.length>1),De}),Qu(c,hm(c),A),ee&&(A=l(A,y|x|_,sx));for(var be=g.length;be--;)bc(A,g[be]);return A});function dE(c,g){return x2(c,Jp(hr(g)))}var pE=Lc(function(c,g){return c==null?{}:aa(c,g)});function x2(c,g){if(c==null)return{};var A=ei(hm(c),function(ee){return[ee]});return g=hr(g),No(c,A,function(ee,be){return g(ee,be[0])})}function gE(c,g,A){g=Cu(g,c);var ee=-1,be=g.length;for(be||(be=1,c=n);++ee<be;){var De=c==null?n:c[ec(g[ee])];De===n&&(ee=be,De=A),c=Ec(De)?De.call(c):De}return c}function mE(c,g,A){return c==null?c:_c(c,g,A)}function vE(c,g,A,ee){return ee=typeof ee=="function"?ee:n,c==null?c:_c(c,g,A,ee)}var L2=Dy(Gs),S2=Dy(cl);function yE(c,g,A){var ee=Rr(c),be=ee||Zc(c)||wf(c);if(g=hr(g,4),A==null){var De=c&&c.constructor;be?A=ee?new De:[]:Do(c)?A=Ec(De)?is(ia(c)):{}:A={}}return(be?fo:Yt)(c,function(it,mt,Ct){return g(A,it,mt,Ct)}),A}function _E(c,g){return c==null?!0:bc(c,g)}function bE(c,g,A){return c==null?c:mf(c,g,Ah(A))}function wE(c,g,A,ee){return ee=typeof ee=="function"?ee:n,c==null?c:mf(c,g,Ah(A),ee)}function xf(c){return c==null?[]:Co(c,Gs(c))}function xE(c){return c==null?[]:Co(c,cl(c))}function LE(c,g,A){return A===n&&(A=g,g=n),A!==n&&(A=nu(A),A=A===A?A:0),g!==n&&(g=nu(g),g=g===g?g:0),Hn(nu(c),g,A)}function SE(c,g,A){return g=Cc(g),A===n?(A=g,g=0):A=Cc(A),c=nu(c),Tt(c,g,A)}function EE(c,g,A){if(A&&typeof A!="boolean"&&Va(c,g,A)&&(g=A=n),A===n&&(typeof g=="boolean"?(A=g,g=n):typeof c=="boolean"&&(A=c,c=n)),c===n&&g===n?(c=0,g=1):(c=Cc(c),g===n?(g=c,c=0):g=Cc(g)),c>g){var ee=c;c=g,g=ee}if(A||c%1||g%1){var be=Ft();return Se(c+be*(g-c+tl("1e-"+((be+"").length-1))),g)}return Ch(c,g)}var CE=_f(function(c,g,A){return g=g.toLowerCase(),c+(A?E2(g):g)});function E2(c){return Pm(Pi(c).toLowerCase())}function C2(c){return c=Pi(c),c&&c.replace(jr,_u).replace(vu,"")}function PE(c,g,A){c=Pi(c),g=wa(g);var ee=c.length;A=A===n?ee:Hn(Hr(A),0,ee);var be=A;return A-=g.length,A>=0&&c.slice(A,be)==g}function AE(c){return c=Pi(c),c&&wn.test(c)?c.replace(Sn,ja):c}function ME(c){return c=Pi(c),c&&jo.test(c)?c.replace(oo,"\\$&"):c}var kE=_f(function(c,g,A){return c+(A?"-":"")+g.toLowerCase()}),TE=_f(function(c,g,A){return c+(A?" ":"")+g.toLowerCase()}),BE=My("toLowerCase");function OE(c,g,A){c=Pi(c),g=Hr(g);var ee=g?Ao(c):0;if(!g||ee>=g)return c;var be=(g-ee)/2;return Vp(vo(be),A)+c+Vp(mo(be),A)}function NE(c,g,A){c=Pi(c),g=Hr(g);var ee=g?Ao(c):0;return g&&ee<g?c+Vp(g-ee,A):c}function DE(c,g,A){c=Pi(c),g=Hr(g);var ee=g?Ao(c):0;return g&&ee<g?Vp(g-ee,A)+c:c}function IE(c,g,A){return A||g==null?g=0:g&&(g=+g),Pt(Pi(c).replace(fi,""),g||0)}function RE(c,g,A){return(A?Va(c,g,A):g===n)?g=1:g=Hr(g),pf(Pi(c),g)}function FE(){var c=arguments,g=Pi(c[0]);return c.length<3?g:g.replace(c[1],c[2])}var jE=_f(function(c,g,A){return c+(A?"_":"")+g.toLowerCase()});function zE(c,g,A){return A&&typeof A!="number"&&Va(c,g,A)&&(g=A=n),A=A===n?Xe:A>>>0,A?(c=Pi(c),c&&(typeof g=="string"||g!=null&&!Sm(g))&&(g=wa(g),!g&&Js(c))?eu(Mo(c),0,A):c.split(g,A)):[]}var UE=_f(function(c,g,A){return c+(A?" ":"")+Pm(g)});function $E(c,g,A){return c=Pi(c),A=A==null?0:Hn(Hr(A),0,c.length),g=wa(g),c.slice(A,A+g.length)==g}function VE(c,g,A){var ee=Te.templateSettings;A&&Va(c,g,A)&&(g=n),c=Pi(c),g=t0({},g,ee,Iy);var be=t0({},g.imports,ee.imports,Iy),De=Gs(be),it=Co(be,De),mt,Ct,rn=0,an=g.interpolate||Mn,yn="__p += '",In=Bl((g.escape||Mn).source+"|"+an.source+"|"+(an===rr?di:Mn).source+"|"+(g.evaluate||Mn).source+"|$","g"),Jn="//# sourceURL="+(Dr.call(g,"sourceURL")?(g.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++El+"]")+`
`;c.replace(In,function(gr,ii,li,Dl,Ha,Il){return li||(li=Dl),yn+=c.slice(rn,Il).replace(Fi,za),ii&&(mt=!0,yn+=`' +
__e(`+ii+`) +
'`),Ha&&(Ct=!0,yn+=`';
`+Ha+`;
__p += '`),li&&(yn+=`' +
((__t = (`+li+`)) == null ? '' : __t) +
'`),rn=Il+gr.length,gr}),yn+=`';
`;var pr=Dr.call(g,"variable")&&g.variable;if(!pr)yn=`with (obj) {
`+yn+`
}
`;else if(_i.test(pr))throw new Un(u);yn=(Ct?yn.replace(un,""):yn).replace(Qt,"$1").replace(Ye,"$1;"),yn="function("+(pr||"obj")+`) {
`+(pr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(mt?", __e = _.escape":"")+(Ct?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+yn+`return __p
}`;var Gr=A2(function(){return lr(De,Jn+"return "+yn).apply(n,it)});if(Gr.source=yn,Lm(Gr))throw Gr;return Gr}function HE(c){return Pi(c).toLowerCase()}function GE(c){return Pi(c).toUpperCase()}function qE(c,g,A){if(c=Pi(c),c&&(A||g===n))return ms(c);if(!c||!(g=wa(g)))return c;var ee=Mo(c),be=Mo(g),De=Uo(ee,be),it=Yl(ee,be)+1;return eu(ee,De,it).join("")}function WE(c,g,A){if(c=Pi(c),c&&(A||g===n))return c.slice(0,ga(c)+1);if(!c||!(g=wa(g)))return c;var ee=Mo(c),be=Yl(ee,Mo(g))+1;return eu(ee,0,be).join("")}function ZE(c,g,A){if(c=Pi(c),c&&(A||g===n))return c.replace(fi,"");if(!c||!(g=wa(g)))return c;var ee=Mo(c),be=Uo(ee,Mo(g));return eu(ee,be).join("")}function KE(c,g){var A=Y,ee=$;if(Do(g)){var be="separator"in g?g.separator:be;A="length"in g?Hr(g.length):A,ee="omission"in g?wa(g.omission):ee}c=Pi(c);var De=c.length;if(Js(c)){var it=Mo(c);De=it.length}if(A>=De)return c;var mt=A-Ao(ee);if(mt<1)return ee;var Ct=it?eu(it,0,mt).join(""):c.slice(0,mt);if(be===n)return Ct+ee;if(it&&(mt+=Ct.length-mt),Sm(be)){if(c.slice(mt).search(be)){var rn,an=Ct;for(be.global||(be=Bl(be.source,Pi(Ri.exec(be))+"g")),be.lastIndex=0;rn=be.exec(an);)var yn=rn.index;Ct=Ct.slice(0,yn===n?mt:yn)}}else if(c.indexOf(wa(be),mt)!=mt){var In=Ct.lastIndexOf(be);In>-1&&(Ct=Ct.slice(0,In))}return Ct+ee}function YE(c){return c=Pi(c),c&&ln.test(c)?c.replace(vn,ma):c}var XE=_f(function(c,g,A){return c+(A?" ":"")+g.toUpperCase()}),Pm=My("toUpperCase");function P2(c,g,A){return c=Pi(c),g=A?n:g,g===n?vs(c)?Qs(c):ct(c):c.match(g)||[]}var A2=Vr(function(c,g){try{return Qr(c,n,g)}catch(A){return Lm(A)?A:new Un(A)}}),JE=Lc(function(c,g){return fo(g,function(A){A=ec(A),An(c,A,wm(c[A],c))}),c});function QE(c){var g=c==null?0:c.length,A=hr();return c=g?ei(c,function(ee){if(typeof ee[1]!="function")throw new Li(o);return[A(ee[0]),ee[1]]}):[],Vr(function(ee){for(var be=-1;++be<g;){var De=c[be];if(Qr(De[0],this,ee))return Qr(De[1],this,ee)}})}function eC(c){return f(l(c,y))}function Am(c){return function(){return c}}function tC(c,g){return c==null||c!==c?g:c}var nC=Ty(),rC=Ty(!0);function hl(c){return c}function Mm(c){return Gn(typeof c=="function"?c:l(c,y))}function iC(c){return os(l(c,y))}function oC(c,g){return xu(c,l(g,y))}var sC=Vr(function(c,g){return function(A){return Ne(A,c,g)}}),aC=Vr(function(c,g){return function(A){return Ne(c,A,g)}});function km(c,g,A){var ee=Gs(g),be=Ln(g,ee);A==null&&!(Do(g)&&(be.length||!ee.length))&&(A=g,g=c,c=this,be=Ln(g,Gs(g)));var De=!(Do(A)&&"chain"in A)||!!A.chain,it=Ec(c);return fo(be,function(mt){var Ct=g[mt];c[mt]=Ct,it&&(c.prototype[mt]=function(){var rn=this.__chain__;if(De||rn){var an=c(this.__wrapped__),yn=an.__actions__=ll(this.__actions__);return yn.push({func:Ct,args:arguments,thisArg:c}),an.__chain__=rn,an}return Ct.apply(c,gs([this.value()],arguments))})}),c}function lC(){return Vi._===this&&(Vi._=Wi),this}function Tm(){}function uC(c){return c=Hr(c),Vr(function(g){return $a(g,c)})}var cC=lm(ei),hC=lm(Tl),fC=lm(O);function M2(c){return gm(c)?or(ec(c)):Zi(c)}function dC(c){return function(g){return c==null?n:Qn(c,g)}}var pC=Oy(),gC=Oy(!0);function Bm(){return[]}function Om(){return!1}function mC(){return{}}function vC(){return""}function yC(){return!0}function _C(c,g){if(c=Hr(c),c<1||c>q)return[];var A=Xe,ee=Se(c,Xe);g=hr(g),c-=Xe;for(var be=qi(ee,g);++A<c;)g(A);return be}function bC(c){return Rr(c)?ei(c,ec):Nl(c)?[c]:ll(Ky(Pi(c)))}function wC(c){var g=++Us;return Pi(c)+g}var xC=$p(function(c,g){return c+g},0),LC=um("ceil"),SC=$p(function(c,g){return c/g},1),EC=um("floor");function CC(c){return c&&c.length?ce(c,hl,ht):n}function PC(c,g){return c&&c.length?ce(c,hr(g,2),ht):n}function AC(c){return Kn(c,hl)}function MC(c,g){return Kn(c,hr(g,2))}function kC(c){return c&&c.length?ce(c,hl,Ir):n}function TC(c,g){return c&&c.length?ce(c,hr(g,2),Ir):n}var BC=$p(function(c,g){return c*g},1),OC=um("round"),NC=$p(function(c,g){return c-g},0);function DC(c){return c&&c.length?ti(c,hl):0}function IC(c,g){return c&&c.length?ti(c,hr(g,2)):0}return Te.after=iS,Te.ary=s2,Te.assign=GS,Te.assignIn=b2,Te.assignInWith=t0,Te.assignWith=qS,Te.at=WS,Te.before=a2,Te.bind=wm,Te.bindAll=JE,Te.bindKey=l2,Te.castArray=mS,Te.chain=r2,Te.chunk=Ex,Te.compact=Cx,Te.concat=Px,Te.cond=QE,Te.conforms=eC,Te.constant=Am,Te.countBy=DL,Te.create=ZS,Te.curry=u2,Te.curryRight=c2,Te.debounce=h2,Te.defaults=KS,Te.defaultsDeep=YS,Te.defer=oS,Te.delay=sS,Te.difference=Ax,Te.differenceBy=Mx,Te.differenceWith=kx,Te.drop=Tx,Te.dropRight=Bx,Te.dropRightWhile=Ox,Te.dropWhile=Nx,Te.fill=Dx,Te.filter=RL,Te.flatMap=zL,Te.flatMapDeep=UL,Te.flatMapDepth=$L,Te.flatten=Qy,Te.flattenDeep=Ix,Te.flattenDepth=Rx,Te.flip=aS,Te.flow=nC,Te.flowRight=rC,Te.fromPairs=Fx,Te.functions=rE,Te.functionsIn=iE,Te.groupBy=VL,Te.initial=zx,Te.intersection=Ux,Te.intersectionBy=$x,Te.intersectionWith=Vx,Te.invert=sE,Te.invertBy=aE,Te.invokeMap=GL,Te.iteratee=Mm,Te.keyBy=qL,Te.keys=Gs,Te.keysIn=cl,Te.map=Kp,Te.mapKeys=uE,Te.mapValues=cE,Te.matches=iC,Te.matchesProperty=oC,Te.memoize=Xp,Te.merge=hE,Te.mergeWith=w2,Te.method=sC,Te.methodOf=aC,Te.mixin=km,Te.negate=Jp,Te.nthArg=uC,Te.omit=fE,Te.omitBy=dE,Te.once=lS,Te.orderBy=WL,Te.over=cC,Te.overArgs=uS,Te.overEvery=hC,Te.overSome=fC,Te.partial=xm,Te.partialRight=f2,Te.partition=ZL,Te.pick=pE,Te.pickBy=x2,Te.property=M2,Te.propertyOf=dC,Te.pull=Wx,Te.pullAll=t2,Te.pullAllBy=Zx,Te.pullAllWith=Kx,Te.pullAt=Yx,Te.range=pC,Te.rangeRight=gC,Te.rearg=cS,Te.reject=XL,Te.remove=Xx,Te.rest=hS,Te.reverse=_m,Te.sampleSize=QL,Te.set=mE,Te.setWith=vE,Te.shuffle=eS,Te.slice=Jx,Te.sortBy=rS,Te.sortedUniq=oL,Te.sortedUniqBy=sL,Te.split=zE,Te.spread=fS,Te.tail=aL,Te.take=lL,Te.takeRight=uL,Te.takeRightWhile=cL,Te.takeWhile=hL,Te.tap=CL,Te.throttle=dS,Te.thru=Zp,Te.toArray=v2,Te.toPairs=L2,Te.toPairsIn=S2,Te.toPath=bC,Te.toPlainObject=_2,Te.transform=yE,Te.unary=pS,Te.union=fL,Te.unionBy=dL,Te.unionWith=pL,Te.uniq=gL,Te.uniqBy=mL,Te.uniqWith=vL,Te.unset=_E,Te.unzip=bm,Te.unzipWith=n2,Te.update=bE,Te.updateWith=wE,Te.values=xf,Te.valuesIn=xE,Te.without=yL,Te.words=P2,Te.wrap=gS,Te.xor=_L,Te.xorBy=bL,Te.xorWith=wL,Te.zip=xL,Te.zipObject=LL,Te.zipObjectDeep=SL,Te.zipWith=EL,Te.entries=L2,Te.entriesIn=S2,Te.extend=b2,Te.extendWith=t0,km(Te,Te),Te.add=xC,Te.attempt=A2,Te.camelCase=CE,Te.capitalize=E2,Te.ceil=LC,Te.clamp=LE,Te.clone=vS,Te.cloneDeep=_S,Te.cloneDeepWith=bS,Te.cloneWith=yS,Te.conformsTo=wS,Te.deburr=C2,Te.defaultTo=tC,Te.divide=SC,Te.endsWith=PE,Te.eq=Pu,Te.escape=AE,Te.escapeRegExp=ME,Te.every=IL,Te.find=FL,Te.findIndex=Xy,Te.findKey=XS,Te.findLast=jL,Te.findLastIndex=Jy,Te.findLastKey=JS,Te.floor=EC,Te.forEach=i2,Te.forEachRight=o2,Te.forIn=QS,Te.forInRight=eE,Te.forOwn=tE,Te.forOwnRight=nE,Te.get=Em,Te.gt=xS,Te.gte=LS,Te.has=oE,Te.hasIn=Cm,Te.head=e2,Te.identity=hl,Te.includes=HL,Te.indexOf=jx,Te.inRange=SE,Te.invoke=lE,Te.isArguments=Th,Te.isArray=Rr,Te.isArrayBuffer=SS,Te.isArrayLike=ul,Te.isArrayLikeObject=ss,Te.isBoolean=ES,Te.isBuffer=Zc,Te.isDate=CS,Te.isElement=PS,Te.isEmpty=AS,Te.isEqual=MS,Te.isEqualWith=kS,Te.isError=Lm,Te.isFinite=TS,Te.isFunction=Ec,Te.isInteger=d2,Te.isLength=Qp,Te.isMap=p2,Te.isMatch=BS,Te.isMatchWith=OS,Te.isNaN=NS,Te.isNative=DS,Te.isNil=RS,Te.isNull=IS,Te.isNumber=g2,Te.isObject=Do,Te.isObjectLike=qo,Te.isPlainObject=wd,Te.isRegExp=Sm,Te.isSafeInteger=FS,Te.isSet=m2,Te.isString=e0,Te.isSymbol=Nl,Te.isTypedArray=wf,Te.isUndefined=jS,Te.isWeakMap=zS,Te.isWeakSet=US,Te.join=Hx,Te.kebabCase=kE,Te.last=tu,Te.lastIndexOf=Gx,Te.lowerCase=TE,Te.lowerFirst=BE,Te.lt=$S,Te.lte=VS,Te.max=CC,Te.maxBy=PC,Te.mean=AC,Te.meanBy=MC,Te.min=kC,Te.minBy=TC,Te.stubArray=Bm,Te.stubFalse=Om,Te.stubObject=mC,Te.stubString=vC,Te.stubTrue=yC,Te.multiply=BC,Te.nth=qx,Te.noConflict=lC,Te.noop=Tm,Te.now=Yp,Te.pad=OE,Te.padEnd=NE,Te.padStart=DE,Te.parseInt=IE,Te.random=EE,Te.reduce=KL,Te.reduceRight=YL,Te.repeat=RE,Te.replace=FE,Te.result=gE,Te.round=OC,Te.runInContext=_t,Te.sample=JL,Te.size=tS,Te.snakeCase=jE,Te.some=nS,Te.sortedIndex=Qx,Te.sortedIndexBy=eL,Te.sortedIndexOf=tL,Te.sortedLastIndex=nL,Te.sortedLastIndexBy=rL,Te.sortedLastIndexOf=iL,Te.startCase=UE,Te.startsWith=$E,Te.subtract=NC,Te.sum=DC,Te.sumBy=IC,Te.template=VE,Te.times=_C,Te.toFinite=Cc,Te.toInteger=Hr,Te.toLength=y2,Te.toLower=HE,Te.toNumber=nu,Te.toSafeInteger=HS,Te.toString=Pi,Te.toUpper=GE,Te.trim=qE,Te.trimEnd=WE,Te.trimStart=ZE,Te.truncate=KE,Te.unescape=YE,Te.uniqueId=wC,Te.upperCase=XE,Te.upperFirst=Pm,Te.each=i2,Te.eachRight=o2,Te.first=e2,km(Te,function(){var c={};return Yt(Te,function(g,A){Dr.call(Te.prototype,A)||(c[A]=g)}),c}(),{chain:!1}),Te.VERSION=r,fo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){Te[c].placeholder=Te}),fo(["drop","take"],function(c,g){Mr.prototype[c]=function(A){A=A===n?1:re(Hr(A),0);var ee=this.__filtered__&&!g?new Mr(this):this.clone();return ee.__filtered__?ee.__takeCount__=Se(A,ee.__takeCount__):ee.__views__.push({size:Se(A,Xe),type:c+(ee.__dir__<0?"Right":"")}),ee},Mr.prototype[c+"Right"]=function(A){return this.reverse()[c](A).reverse()}}),fo(["filter","map","takeWhile"],function(c,g){var A=g+1,ee=A==I||A==G;Mr.prototype[c]=function(be){var De=this.clone();return De.__iteratees__.push({iteratee:hr(be,3),type:A}),De.__filtered__=De.__filtered__||ee,De}}),fo(["head","last"],function(c,g){var A="take"+(g?"Right":"");Mr.prototype[c]=function(){return this[A](1).value()[0]}}),fo(["initial","tail"],function(c,g){var A="drop"+(g?"":"Right");Mr.prototype[c]=function(){return this.__filtered__?new Mr(this):this[A](1)}}),Mr.prototype.compact=function(){return this.filter(hl)},Mr.prototype.find=function(c){return this.filter(c).head()},Mr.prototype.findLast=function(c){return this.reverse().find(c)},Mr.prototype.invokeMap=Vr(function(c,g){return typeof c=="function"?new Mr(this):this.map(function(A){return Ne(A,c,g)})}),Mr.prototype.reject=function(c){return this.filter(Jp(hr(c)))},Mr.prototype.slice=function(c,g){c=Hr(c);var A=this;return A.__filtered__&&(c>0||g<0)?new Mr(A):(c<0?A=A.takeRight(-c):c&&(A=A.drop(c)),g!==n&&(g=Hr(g),A=g<0?A.dropRight(-g):A.take(g-c)),A)},Mr.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},Mr.prototype.toArray=function(){return this.take(Xe)},Yt(Mr.prototype,function(c,g){var A=/^(?:filter|find|map|reject)|While$/.test(g),ee=/^(?:head|last)$/.test(g),be=Te[ee?"take"+(g=="last"?"Right":""):g],De=ee||/^find/.test(g);be&&(Te.prototype[g]=function(){var it=this.__wrapped__,mt=ee?[1]:arguments,Ct=it instanceof Mr,rn=mt[0],an=Ct||Rr(it),yn=function(ii){var li=be.apply(Te,gs([ii],mt));return ee&&In?li[0]:li};an&&A&&typeof rn=="function"&&rn.length!=1&&(Ct=an=!1);var In=this.__chain__,Jn=!!this.__actions__.length,pr=De&&!In,Gr=Ct&&!Jn;if(!De&&an){it=Gr?it:new Mr(this);var gr=c.apply(it,mt);return gr.__actions__.push({func:Zp,args:[yn],thisArg:n}),new _o(gr,In)}return pr&&Gr?c.apply(this,mt):(gr=this.thru(yn),pr?ee?gr.value()[0]:gr.value():gr)})}),fo(["pop","push","shift","sort","splice","unshift"],function(c){var g=ea[c],A=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",ee=/^(?:pop|shift)$/.test(c);Te.prototype[c]=function(){var be=arguments;if(ee&&!this.__chain__){var De=this.value();return g.apply(Rr(De)?De:[],be)}return this[A](function(it){return g.apply(Rr(it)?it:[],be)})}}),Yt(Mr.prototype,function(c,g){var A=Te[g];if(A){var ee=A.name+"";Dr.call(rs,ee)||(rs[ee]=[]),rs[ee].push({name:g,func:A})}}),rs[Up(n,N).name]=[{name:"wrapper",func:n}],Mr.prototype.clone=$c,Mr.prototype.reverse=af,Mr.prototype.value=Vc,Te.prototype.at=PL,Te.prototype.chain=AL,Te.prototype.commit=ML,Te.prototype.next=kL,Te.prototype.plant=BL,Te.prototype.reverse=OL,Te.prototype.toJSON=Te.prototype.valueOf=Te.prototype.value=NL,Te.prototype.first=Te.prototype.head,nr&&(Te.prototype[nr]=TL),Te},To=ys();Hi?((Hi.exports=To)._=To,Xn._=To):Vi._=To}).call(Zs)})(fg,fg.exports);var n3=fg.exports;class Aa extends Rn.Polygon{constructor(n,r={}){super([],{...r,pmIgnore:!1,interactive:!0});$t(this,"_width");$t(this,"_height");$t(this,"_center");$t(this,"_rotation");$t(this,"_isMapReady",!1);$t(this,"properties");$t(this,"_helperPoints",{corners:[],midPoints:[]});$t(this,"_throttledUpdateProperties");const i=n instanceof Rn.LatLngBounds?n:Rn.latLngBounds(n);if(this._center=i.getCenter(),this._rotation=0,console.log("[Rectangle][constructor] Initialisation avec options:",{bounds:i,center:this._center,hasExplicitDimensions:!!(r.width&&r.height),width:r.width,height:r.height}),r.width&&r.height)this._width=r.width,this._height=r.height,console.log("[Rectangle][constructor] Utilisation des dimensions explicites:",{width:this._width,height:this._height});else{const s=i.getSouthWest(),o=i.getNorthEast();this._width=on.measure("Rectangle.constructor.calculateWidth",()=>{const u=ev([s.lng,s.lat],[o.lng,s.lat],{units:"meters"});return Math.max(u,1)}),this._height=on.measure("Rectangle.constructor.calculateHeight",()=>{const u=ev([s.lng,s.lat],[s.lng,o.lat],{units:"meters"});return Math.max(u,1)}),console.log("[Rectangle][constructor] Dimensions calcules depuis bounds:",{width:this._width,height:this._height})}(this._width<1||this._height<1)&&this._getPixelsPerMeter()>0&&(this._width=Math.max(this._width,1),this._height=Math.max(this._height,1),this._updatePolygonCoordinates()),this.properties=on.measure("Rectangle.constructor.initProperties",()=>({type:"Rectangle",style:{...r,name:r.name||""},rotation:this._rotation})),this._throttledUpdateProperties=on.measure("Rectangle.constructor.initThrottle",()=>n3.throttle(()=>{this.updateProperties()},100)),this.on("add",()=>{this._isMapReady=!0,this._updatePolygonCoordinates(),this.updateProperties()}),this.on("remove",()=>{this._isMapReady=!1})}_updatePolygonCoordinates(){on.measure("Rectangle._updatePolygonCoordinates",()=>{if(!this._isMapReady||!this._map)return;console.log("[Rectangle][_updatePolygonCoordinates] Dbut mise  jour avec:",{width:this._width,height:this._height,center:this._center,rotation:this._rotation}),this._width=Math.max(this._width,1),this._height=Math.max(this._height,1);const n=this._width/2,r=this._height/2,i=sb([this._center.lng,this._center.lat],r,0,{units:"meters"}).geometry.coordinates,s=sb([this._center.lng,this._center.lat],n,90,{units:"meters"}).geometry.coordinates,o=Math.abs(i[1]-this._center.lat)*2,u=Math.abs(s[0]-this._center.lng)*2,h=[Rn.latLng(this._center.lat+o/2,this._center.lng-u/2),Rn.latLng(this._center.lat+o/2,this._center.lng+u/2),Rn.latLng(this._center.lat-o/2,this._center.lng+u/2),Rn.latLng(this._center.lat-o/2,this._center.lng-u/2)];if(this._rotation===0){this.setLatLngs(h);return}const d=this._map.latLngToContainerPoint(this._center),v=h.map(U=>this._map.latLngToContainerPoint(U)),y=-this._rotation*Math.PI/180,x=Math.cos(y),_=Math.sin(y),T=v.map(U=>{const N=U.x-d.x,j=U.y-d.y;return Rn.point(d.x+(N*x-j*_),d.y+(N*_+j*x))}).map(U=>this._map.containerPointToLatLng(U));console.log("[Rectangle][_updatePolygonCoordinates] Rsultat final:",{corners:T,dimensions:{width:this._width,height:this._height}}),this.setLatLngs(T),this.fire("coordinates:updated",{corners:T,center:this._center,rotation:this._rotation,dimensions:{width:this._width,height:this._height}})})}_getPixelsPerMeter(){return on.measure("Rectangle._getPixelsPerMeter",()=>{if(!this._isMapReady||!this._map)return 1;const n=Math.max(this._width/1e3,1e-4),r=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(Rn.latLng(this._center.lat,this._center.lng+n)).x-r.x,o=ev([this._center.lng,this._center.lat],[this._center.lng+n,this._center.lat],{units:"meters"}),u=Math.abs(s/o);return isNaN(u)||u<=0?(console.warn("[Rectangle][_getPixelsPerMeter] Ratio invalide, utilisation de la valeur par dfaut"),1):u})}getRotatedCorners(){return on.measure("Rectangle.getRotatedCorners",()=>{try{const n=this.getLatLngs();if(!n||!Array.isArray(n)||n.length===0){const r=this._width/2,i=this._height/2;return[Rn.latLng(this._center.lat+i,this._center.lng-r),Rn.latLng(this._center.lat+i,this._center.lng+r),Rn.latLng(this._center.lat-i,this._center.lng+r),Rn.latLng(this._center.lat-i,this._center.lng-r)]}return n[0]}catch(n){console.warn("Error in getRotatedCorners:",n);const r=this._width/2,i=this._height/2;return[Rn.latLng(this._center.lat+i,this._center.lng-r),Rn.latLng(this._center.lat+i,this._center.lng+r),Rn.latLng(this._center.lat-i,this._center.lng+r),Rn.latLng(this._center.lat-i,this._center.lng-r)]}})}getMidPoints(){return on.measure("Rectangle.getMidPoints",()=>{try{const n=this.getRotatedCorners();if(!n||n.length<4){const i=this._width/2,s=this._height/2;return[Rn.latLng(this._center.lat+s,this._center.lng),Rn.latLng(this._center.lat,this._center.lng+i),Rn.latLng(this._center.lat-s,this._center.lng),Rn.latLng(this._center.lat,this._center.lng-i)]}if(!n.every(i=>i&&typeof i.lat=="number"&&typeof i.lng=="number"))throw new Error("Invalid corner coordinates");return[this._getMidPoint(n[3],n[0]),this._getMidPoint(n[0],n[1]),this._getMidPoint(n[1],n[2]),this._getMidPoint(n[2],n[3])]}catch(n){console.warn("Error in getMidPoints:",n);const r=this._width/2,i=this._height/2;return[Rn.latLng(this._center.lat+i,this._center.lng),Rn.latLng(this._center.lat,this._center.lng+r),Rn.latLng(this._center.lat-i,this._center.lng),Rn.latLng(this._center.lat,this._center.lng-r)]}})}_getMidPoint(n,r){return on.measure("Rectangle._getMidPoint",()=>{if(!n||!r||typeof n.lat!="number"||typeof n.lng!="number"||typeof r.lat!="number"||typeof r.lng!="number")throw new Error("Invalid points for midpoint calculation");return Rn.latLng((n.lat+r.lat)/2,(n.lng+r.lng)/2)})}getCenter(){return on.measure("Rectangle.getCenter",()=>this._center)}setCenter(n){on.measure("Rectangle.setCenter",()=>{this._center=n,this._updatePolygonCoordinates(),this.updateProperties(),this.updateHelperPointPositions()})}getRotation(){return on.measure("Rectangle.getRotation",()=>this._rotation)}setRotation(n,r=!1){on.measure("Rectangle.setRotation",()=>{this._rotation=(n%360+360)%360,this._updatePolygonCoordinates(),r&&this.updateProperties(),this.updateHelperPointPositions(),this.fire("rotation:updated",{angle:this._rotation,corners:this.getRotatedCorners(),center:this._center})})}finalizeRotation(){on.measure("Rectangle.finalizeRotation",()=>{this.updateProperties()})}getDimensions(){return on.measure("Rectangle.getDimensions",()=>({width:this._width,height:this._height}))}setDimensions(n,r){on.measure("Rectangle.setDimensions",()=>{console.log("[Rectangle][setDimensions] Dbut de la mise  jour des dimensions:",{oldWidth:this._width,oldHeight:this._height,newWidth:n,newHeight:r}),this._width=n,this._height=r,console.log("[Rectangle][setDimensions] Mise  jour des coordonnes du polygone"),this._updatePolygonCoordinates(),console.log("[Rectangle][setDimensions] Mise  jour des proprits"),this.updateProperties(),console.log("[Rectangle][setDimensions] mission de l'vnement dimensions:updated"),this.fire("dimensions:updated",{width:this._width,height:this._height,corners:this.getRotatedCorners(),center:this._center}),this.updateHelperPointPositions()})}resizeFromCorner(n,r){on.measure("Rectangle.resizeFromCorner",()=>{if(!(!this._isMapReady||!this._map))try{const i=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(r),o=s.x-i.x,u=s.y-i.y,h=-this._rotation*Math.PI/180,d=Math.cos(h),v=Math.sin(h),y=o*d-u*v,x=o*v+u*d,_=this._getPixelsPerMeter(),P=n===0||n===3?-1:1,T=n===0||n===1?1:-1,U=Math.max(Math.abs(y*2)/_,1),N=Math.max(Math.abs(x*2)/_,1),j=U*_/2,Z=N*_/2,J=P*j*d-T*Z*v,le=P*j*v+T*Z*d,he=Rn.point(s.x-J,s.y-le),Le=this._map.containerPointToLatLng(he),Y=[Rn.point(he.x-j,he.y+Z),Rn.point(he.x+j,he.y+Z),Rn.point(he.x+j,he.y-Z),Rn.point(he.x-j,he.y-Z)].map($=>{const D=$.x-he.x,k=$.y-he.y;return Rn.point(he.x+(D*d-k*v),he.y+(D*v+k*d))}).map($=>this._map.containerPointToLatLng($));this._width=U,this._height=N,this._center=Le,this.setLatLngs(Y),this.fire("coordinates:updated",{corners:Y,center:this._center,rotation:this._rotation})}catch(i){console.warn("Error in resizeFromCorner:",i)}})}resizeFromSide(n,r){on.measure("Rectangle.resizeFromSide",()=>{if(!this._isMapReady||!this._map)return;const i=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(r),o=s.x-i.x,u=s.y-i.y,h=-this._rotation*Math.PI/180,d=Math.cos(h),v=Math.sin(h),y=o*d-u*v,x=o*v+u*d,_=this._getPixelsPerMeter();n%2===0?this._height=Math.abs(x*2)/_:this._width=Math.abs(y*2)/_,this._updatePolygonCoordinates(),this.updateProperties()})}moveFromCenter(n){on.measure("Rectangle.moveFromCenter",()=>{this._center=n,this._updatePolygonCoordinates(),this.updateProperties()})}updateProperties(){on.measure("Rectangle.updateProperties",()=>{var i,s,o;const n=this.getRotatedCorners(),r=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"";this.properties={...this.properties,width:this._width,height:this._height,surface:this._width*this._height,perimeter:2*(this._width+this._height),center:this._center,corners:n,midPoints:this.getMidPoints(),rotation:this._rotation,style:{...this.options,color:this.options.color||"#3388ff",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#3388ff",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:r}},this.fire("properties:updated",{shape:this,properties:this.properties,corners:n,midPoints:this.getMidPoints()})})}setName(n){on.measure("Rectangle.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return on.measure("Rectangle.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}generateHelperPoints(n,r="rgba(220, 38, 38, 0.5)",i="rgba(37, 99, 235, 0.5)"){on.measure("Rectangle.generateHelperPoints",()=>{this.clearHelperPoints();const s=this.getRotatedCorners(),o=this.getMidPoints();this._helperPoints.corners=s.map(u=>Rn.circleMarker(u,{radius:5,color:r,fillColor:r,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-corner",pmIgnore:!0,interactive:!1}).addTo(n)),this._helperPoints.midPoints=o.map(u=>Rn.circleMarker(u,{radius:5,color:i,fillColor:i,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-midpoint",pmIgnore:!0,interactive:!1}).addTo(n))})}clearHelperPoints(){on.measure("Rectangle.clearHelperPoints",()=>{this._helperPoints.corners.forEach(n=>{if(n&&n.remove)try{n.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de coin:",r)}}),this._helperPoints.midPoints.forEach(n=>{if(n&&n.remove)try{n.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de milieu:",r)}}),this._helperPoints.corners=[],this._helperPoints.midPoints=[]})}updateHelperPointPositions(){on.measure("Rectangle.updateHelperPointPositions",()=>{if(this._helperPoints.corners.length===0&&this._helperPoints.midPoints.length===0)return;const n=this.getRotatedCorners(),r=this.getMidPoints();n.forEach((i,s)=>{this._helperPoints.corners[s]&&this._helperPoints.corners[s].setLatLng(i)}),r.forEach((i,s)=>{this._helperPoints.midPoints[s]&&this._helperPoints.midPoints[s].setLatLng(i)})})}findClosestHelperPoint(n){return on.measure("Rectangle.findClosestHelperPoint",()=>{const r=this.getRotatedCorners(),i=this.getMidPoints(),s=[...r,...i];if(s.length===0)return null;let o=s[0],u=n.distanceTo(o);for(let h=1;h<s.length;h++){const d=n.distanceTo(s[h]);d<u&&(u=d,o=s[h])}return o})}toggleHelperPoints(n,r,i,s){on.measure("Rectangle.toggleHelperPoints",()=>{r&&n?this.generateHelperPoints(n,i,s):this.clearHelperPoints()})}containsPoint(n){return on.measure("Rectangle.containsPoint",()=>{const r=this.getRotatedCorners();if(r.length!==4)return!1;let i=!1;for(let s=0,o=r.length-1;s<r.length;o=s++){const u=r[s].lng,h=r[s].lat,d=r[o].lng,v=r[o].lat;h>n.lat!=v>n.lat&&n.lng<(d-u)*(n.lat-h)/(v-h)+u&&(i=!i)}return i})}}function ab(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function oD(e){return e.type==="Feature"?e.geometry:e}function r3(e,t,n={}){if(n.final===!0)return sD(e,t);const r=ab(e),i=ab(t),s=Fu(r[0]),o=Fu(i[0]),u=Fu(r[1]),h=Fu(i[1]),d=Math.sin(o-s)*Math.cos(h),v=Math.cos(u)*Math.sin(h)-Math.sin(u)*Math.cos(h)*Math.cos(o-s);return l1(Math.atan2(d,v))}function sD(e,t){let n=r3(t,e);return n=(n+180)%360,n}function aD(e,t,n={}){const i=oD(e).coordinates;let s=0;for(let o=0;o<i.length&&!(t>=s&&o===i.length-1);o++)if(s>=t){const u=t-s;if(u){const h=r3(i[o],i[o-1])-180;return fy(i[o],u,h,n)}else return hg(i[o])}else s+=hy(i[o],i[o+1],n);return hg(i[i.length-1])}var u1=aD;function lD(e,t){var n,r,i,s,o,u,h,d,v,y,x=0,_=e.type==="FeatureCollection",P=e.type==="Feature",T=_?e.features.length:1;for(n=0;n<T;n++){for(u=_?e.features[n].geometry:P?e.geometry:e,d=_?e.features[n].properties:P?e.properties:{},v=_?e.features[n].bbox:P?e.bbox:void 0,y=_?e.features[n].id:P?e.id:void 0,h=u?u.type==="GeometryCollection":!1,o=h?u.geometries.length:1,i=0;i<o;i++){if(s=h?u.geometries[i]:u,s===null){if(t(null,x,d,v,y)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(s,x,d,v,y)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(t(s.geometries[r],x,d,v,y)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}x++}}function uD(e,t,n){var r=n;return lD(e,function(i,s,o,u,h){s===0&&n===void 0?r=i:r=t(r,i,s,o,u,h)}),r}function i3(e){return uD(e,(t,n)=>t+cD(n),0)}function cD(e){let t=0,n;switch(e.type){case"Polygon":return lb(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)t+=lb(e.coordinates[n]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function lb(e){let t=0;if(e&&e.length>0){t+=Math.abs(ub(e[0]));for(let n=1;n<e.length;n++)t-=Math.abs(ub(e[n]))}return t}var hD=Wa*Wa/2,tv=Math.PI/180;function ub(e){const t=e.length-1;if(t<=2)return 0;let n=0,r=0;for(;r<t;){const i=e[r],s=e[r+1===t?0:r+1],o=e[r+2>=t?(r+2)%t:r+2],u=i[0]*tv,h=s[1]*tv,d=o[0]*tv;n+=(d-u)*Math.sin(h),r++}return n*hD}var nc=i3;function o3(e,t,n){if(e!==null)for(var r,i,s,o,u,h,d,v=0,y=0,x,_=e.type,P=_==="FeatureCollection",T=_==="Feature",U=P?e.features.length:1,N=0;N<U;N++){d=P?e.features[N].geometry:T?e.geometry:e,x=d?d.type==="GeometryCollection":!1,u=x?d.geometries.length:1;for(var j=0;j<u;j++){var Z=0,J=0;if(o=x?d.geometries[j]:d,o!==null){h=o.coordinates;var le=o.type;switch(v=le==="Polygon"||le==="MultiPolygon"?1:0,le){case null:break;case"Point":if(t(h,y,N,Z,J)===!1)return!1;y++,Z++;break;case"LineString":case"MultiPoint":for(r=0;r<h.length;r++){if(t(h[r],y,N,Z,J)===!1)return!1;y++,le==="MultiPoint"&&Z++}le==="LineString"&&Z++;break;case"Polygon":case"MultiLineString":for(r=0;r<h.length;r++){for(i=0;i<h[r].length-v;i++){if(t(h[r][i],y,N,Z,J)===!1)return!1;y++}le==="MultiLineString"&&Z++,le==="Polygon"&&J++}le==="Polygon"&&Z++;break;case"MultiPolygon":for(r=0;r<h.length;r++){for(J=0,i=0;i<h[r].length;i++){for(s=0;s<h[r][i].length-v;s++){if(t(h[r][i][s],y,N,Z,J)===!1)return!1;y++}J++}Z++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(o3(o.geometries[r],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function fD(e,t={}){let n=0,r=0,i=0;return o3(e,function(s){n+=s[0],r+=s[1],i++}),hg([n/i,r/i],t.properties)}var np=fD;function dD(e,t,n={}){const r=n.steps||64,i=n.properties?n.properties:!Array.isArray(e)&&e.type==="Feature"&&e.properties?e.properties:{},s=[];for(let o=0;o<r;o++)s.push(fy(e,t,o*-360/r,n).geometry.coordinates);return s.push(s[0]),lu([s],i)}var pD=dD,gD=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,nv=Math.ceil,su=Math.floor,gl="[BigNumber Error] ",cb=gl+"Number primitive has more than 15 significant digits: ",Mu=1e14,Fr=14,hb=9007199254740991,rv=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Xc=1e7,Rl=1e9;function s3(e){var t,n,r,i=j.prototype={constructor:j,toString:null,valueOf:null},s=new j(1),o=20,u=4,h=-7,d=21,v=-1e7,y=1e7,x=!1,_=1,P=0,T={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},U="0123456789abcdefghijklmnopqrstuvwxyz",N=!0;function j(V,F){var Y,$,D,k,I,W,G,K,q=this;if(!(q instanceof j))return new j(V,F);if(F==null){if(V&&V._isBigNumber===!0){q.s=V.s,!V.c||V.e>y?q.c=q.e=null:V.e<v?q.c=[q.e=0]:(q.e=V.e,q.c=V.c.slice());return}if((W=typeof V=="number")&&V*0==0){if(q.s=1/V<0?(V=-V,-1):1,V===~~V){for(k=0,I=V;I>=10;I/=10,k++);k>y?q.c=q.e=null:(q.e=k,q.c=[V]);return}K=String(V)}else{if(!gD.test(K=String(V)))return r(q,K,W);q.s=K.charCodeAt(0)==45?(K=K.slice(1),-1):1}(k=K.indexOf("."))>-1&&(K=K.replace(".","")),(I=K.search(/e/i))>0?(k<0&&(k=I),k+=+K.slice(I+1),K=K.substring(0,I)):k<0&&(k=K.length)}else{if(Io(F,2,U.length,"Base"),F==10&&N)return q=new j(V),he(q,o+q.e+1,u);if(K=String(V),W=typeof V=="number"){if(V*0!=0)return r(q,K,W,F);if(q.s=1/V<0?(K=K.slice(1),-1):1,j.DEBUG&&K.replace(/^0\.0*|\./,"").length>15)throw Error(cb+V)}else q.s=K.charCodeAt(0)===45?(K=K.slice(1),-1):1;for(Y=U.slice(0,F),k=I=0,G=K.length;I<G;I++)if(Y.indexOf($=K.charAt(I))<0){if($=="."){if(I>k){k=G;continue}}else if(!D&&(K==K.toUpperCase()&&(K=K.toLowerCase())||K==K.toLowerCase()&&(K=K.toUpperCase()))){D=!0,I=-1,k=0;continue}return r(q,String(V),W,F)}W=!1,K=n(K,F,10,q.s),(k=K.indexOf("."))>-1?K=K.replace(".",""):k=K.length}for(I=0;K.charCodeAt(I)===48;I++);for(G=K.length;K.charCodeAt(--G)===48;);if(K=K.slice(I,++G)){if(G-=I,W&&j.DEBUG&&G>15&&(V>hb||V!==su(V)))throw Error(cb+q.s*V);if((k=k-I-1)>y)q.c=q.e=null;else if(k<v)q.c=[q.e=0];else{if(q.e=k,q.c=[],I=(k+1)%Fr,k<0&&(I+=Fr),I<G){for(I&&q.c.push(+K.slice(0,I)),G-=Fr;I<G;)q.c.push(+K.slice(I,I+=Fr));I=Fr-(K=K.slice(I)).length}else I-=G;for(;I--;K+="0");q.c.push(+K)}}else q.c=[q.e=0]}j.clone=s3,j.ROUND_UP=0,j.ROUND_DOWN=1,j.ROUND_CEIL=2,j.ROUND_FLOOR=3,j.ROUND_HALF_UP=4,j.ROUND_HALF_DOWN=5,j.ROUND_HALF_EVEN=6,j.ROUND_HALF_CEIL=7,j.ROUND_HALF_FLOOR=8,j.EUCLID=9,j.config=j.set=function(V){var F,Y;if(V!=null)if(typeof V=="object"){if(V.hasOwnProperty(F="DECIMAL_PLACES")&&(Y=V[F],Io(Y,0,Rl,F),o=Y),V.hasOwnProperty(F="ROUNDING_MODE")&&(Y=V[F],Io(Y,0,8,F),u=Y),V.hasOwnProperty(F="EXPONENTIAL_AT")&&(Y=V[F],Y&&Y.pop?(Io(Y[0],-1e9,0,F),Io(Y[1],0,Rl,F),h=Y[0],d=Y[1]):(Io(Y,-1e9,Rl,F),h=-(d=Y<0?-Y:Y))),V.hasOwnProperty(F="RANGE"))if(Y=V[F],Y&&Y.pop)Io(Y[0],-1e9,-1,F),Io(Y[1],1,Rl,F),v=Y[0],y=Y[1];else if(Io(Y,-1e9,Rl,F),Y)v=-(y=Y<0?-Y:Y);else throw Error(gl+F+" cannot be zero: "+Y);if(V.hasOwnProperty(F="CRYPTO"))if(Y=V[F],Y===!!Y)if(Y)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))x=Y;else throw x=!Y,Error(gl+"crypto unavailable");else x=Y;else throw Error(gl+F+" not true or false: "+Y);if(V.hasOwnProperty(F="MODULO_MODE")&&(Y=V[F],Io(Y,0,9,F),_=Y),V.hasOwnProperty(F="POW_PRECISION")&&(Y=V[F],Io(Y,0,Rl,F),P=Y),V.hasOwnProperty(F="FORMAT"))if(Y=V[F],typeof Y=="object")T=Y;else throw Error(gl+F+" not an object: "+Y);if(V.hasOwnProperty(F="ALPHABET"))if(Y=V[F],typeof Y=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(Y))N=Y.slice(0,10)=="0123456789",U=Y;else throw Error(gl+F+" invalid: "+Y)}else throw Error(gl+"Object expected: "+V);return{DECIMAL_PLACES:o,ROUNDING_MODE:u,EXPONENTIAL_AT:[h,d],RANGE:[v,y],CRYPTO:x,MODULO_MODE:_,POW_PRECISION:P,FORMAT:T,ALPHABET:U}},j.isBigNumber=function(V){if(!V||V._isBigNumber!==!0)return!1;if(!j.DEBUG)return!0;var F,Y,$=V.c,D=V.e,k=V.s;e:if({}.toString.call($)=="[object Array]"){if((k===1||k===-1)&&D>=-1e9&&D<=Rl&&D===su(D)){if($[0]===0){if(D===0&&$.length===1)return!0;break e}if(F=(D+1)%Fr,F<1&&(F+=Fr),String($[0]).length==F){for(F=0;F<$.length;F++)if(Y=$[F],Y<0||Y>=Mu||Y!==su(Y))break e;if(Y!==0)return!0}}}else if($===null&&D===null&&(k===null||k===1||k===-1))return!0;throw Error(gl+"Invalid BigNumber: "+V)},j.maximum=j.max=function(){return J(arguments,-1)},j.minimum=j.min=function(){return J(arguments,1)},j.random=function(){var V=9007199254740992,F=Math.random()*V&2097151?function(){return su(Math.random()*V)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(Y){var $,D,k,I,W,G=0,K=[],q=new j(s);if(Y==null?Y=o:Io(Y,0,Rl),I=nv(Y/Fr),x)if(crypto.getRandomValues){for($=crypto.getRandomValues(new Uint32Array(I*=2));G<I;)W=$[G]*131072+($[G+1]>>>11),W>=9e15?(D=crypto.getRandomValues(new Uint32Array(2)),$[G]=D[0],$[G+1]=D[1]):(K.push(W%1e14),G+=2);G=I/2}else if(crypto.randomBytes){for($=crypto.randomBytes(I*=7);G<I;)W=($[G]&31)*281474976710656+$[G+1]*1099511627776+$[G+2]*4294967296+$[G+3]*16777216+($[G+4]<<16)+($[G+5]<<8)+$[G+6],W>=9e15?crypto.randomBytes(7).copy($,G):(K.push(W%1e14),G+=7);G=I/7}else throw x=!1,Error(gl+"crypto unavailable");if(!x)for(;G<I;)W=F(),W<9e15&&(K[G++]=W%1e14);for(I=K[--G],Y%=Fr,I&&Y&&(W=rv[Fr-Y],K[G]=su(I/W)*W);K[G]===0;K.pop(),G--);if(G<0)K=[k=0];else{for(k=-1;K[0]===0;K.splice(0,1),k-=Fr);for(G=1,W=K[0];W>=10;W/=10,G++);G<Fr&&(k-=Fr-G)}return q.e=k,q.c=K,q}}(),j.sum=function(){for(var V=1,F=arguments,Y=new j(F[0]);V<F.length;)Y=Y.plus(F[V++]);return Y},n=function(){var V="0123456789";function F(Y,$,D,k){for(var I,W=[0],G,K=0,q=Y.length;K<q;){for(G=W.length;G--;W[G]*=$);for(W[0]+=k.indexOf(Y.charAt(K++)),I=0;I<W.length;I++)W[I]>D-1&&(W[I+1]==null&&(W[I+1]=0),W[I+1]+=W[I]/D|0,W[I]%=D)}return W.reverse()}return function(Y,$,D,k,I){var W,G,K,q,ve,Ce,Xe,B,te=Y.indexOf("."),se=o,ae=u;for(te>=0&&(q=P,P=0,Y=Y.replace(".",""),B=new j($),Ce=B.pow(Y.length-te),P=q,B.c=F(kc(iu(Ce.c),Ce.e,"0"),10,D,V),B.e=B.c.length),Xe=F(Y,$,D,I?(W=U,V):(W=V,U)),K=q=Xe.length;Xe[--q]==0;Xe.pop());if(!Xe[0])return W.charAt(0);if(te<0?--K:(Ce.c=Xe,Ce.e=K,Ce.s=k,Ce=t(Ce,B,se,ae,D),Xe=Ce.c,ve=Ce.r,K=Ce.e),G=K+se+1,te=Xe[G],q=D/2,ve=ve||G<0||Xe[G+1]!=null,ve=ae<4?(te!=null||ve)&&(ae==0||ae==(Ce.s<0?3:2)):te>q||te==q&&(ae==4||ve||ae==6&&Xe[G-1]&1||ae==(Ce.s<0?8:7)),G<1||!Xe[0])Y=ve?kc(W.charAt(1),-se,W.charAt(0)):W.charAt(0);else{if(Xe.length=G,ve)for(--D;++Xe[--G]>D;)Xe[G]=0,G||(++K,Xe=[1].concat(Xe));for(q=Xe.length;!Xe[--q];);for(te=0,Y="";te<=q;Y+=W.charAt(Xe[te++]));Y=kc(Y,K,W.charAt(0))}return Y}}(),t=function(){function V($,D,k){var I,W,G,K,q=0,ve=$.length,Ce=D%Xc,Xe=D/Xc|0;for($=$.slice();ve--;)G=$[ve]%Xc,K=$[ve]/Xc|0,I=Xe*G+K*Ce,W=Ce*G+I%Xc*Xc+q,q=(W/k|0)+(I/Xc|0)+Xe*K,$[ve]=W%k;return q&&($=[q].concat($)),$}function F($,D,k,I){var W,G;if(k!=I)G=k>I?1:-1;else for(W=G=0;W<k;W++)if($[W]!=D[W]){G=$[W]>D[W]?1:-1;break}return G}function Y($,D,k,I){for(var W=0;k--;)$[k]-=W,W=$[k]<D[k]?1:0,$[k]=W*I+$[k]-D[k];for(;!$[0]&&$.length>1;$.splice(0,1));}return function($,D,k,I,W){var G,K,q,ve,Ce,Xe,B,te,se,ae,we,fe,Q,ue,Re,Me,Ze,oe=$.s==D.s?1:-1,me=$.c,pe=D.c;if(!me||!me[0]||!pe||!pe[0])return new j(!$.s||!D.s||(me?pe&&me[0]==pe[0]:!pe)?NaN:me&&me[0]==0||!pe?oe*0:oe/0);for(te=new j(oe),se=te.c=[],K=$.e-D.e,oe=k+K+1,W||(W=Mu,K=au($.e/Fr)-au(D.e/Fr),oe=oe/Fr|0),q=0;pe[q]==(me[q]||0);q++);if(pe[q]>(me[q]||0)&&K--,oe<0)se.push(1),ve=!0;else{for(ue=me.length,Me=pe.length,q=0,oe+=2,Ce=su(W/(pe[0]+1)),Ce>1&&(pe=V(pe,Ce,W),me=V(me,Ce,W),Me=pe.length,ue=me.length),Q=Me,ae=me.slice(0,Me),we=ae.length;we<Me;ae[we++]=0);Ze=pe.slice(),Ze=[0].concat(Ze),Re=pe[0],pe[1]>=W/2&&Re++;do{if(Ce=0,G=F(pe,ae,Me,we),G<0){if(fe=ae[0],Me!=we&&(fe=fe*W+(ae[1]||0)),Ce=su(fe/Re),Ce>1)for(Ce>=W&&(Ce=W-1),Xe=V(pe,Ce,W),B=Xe.length,we=ae.length;F(Xe,ae,B,we)==1;)Ce--,Y(Xe,Me<B?Ze:pe,B,W),B=Xe.length,G=1;else Ce==0&&(G=Ce=1),Xe=pe.slice(),B=Xe.length;if(B<we&&(Xe=[0].concat(Xe)),Y(ae,Xe,we,W),we=ae.length,G==-1)for(;F(pe,ae,Me,we)<1;)Ce++,Y(ae,Me<we?Ze:pe,we,W),we=ae.length}else G===0&&(Ce++,ae=[0]);se[q++]=Ce,ae[0]?ae[we++]=me[Q]||0:(ae=[me[Q]],we=1)}while((Q++<ue||ae[0]!=null)&&oe--);ve=ae[0]!=null,se[0]||se.splice(0,1)}if(W==Mu){for(q=1,oe=se[0];oe>=10;oe/=10,q++);he(te,k+(te.e=q+K*Fr-1)+1,I,ve)}else te.e=K,te.r=+ve;return te}}();function Z(V,F,Y,$){var D,k,I,W,G;if(Y==null?Y=u:Io(Y,0,8),!V.c)return V.toString();if(D=V.c[0],I=V.e,F==null)G=iu(V.c),G=$==1||$==2&&(I<=h||I>=d)?p0(G,I):kc(G,I,"0");else if(V=he(new j(V),F,Y),k=V.e,G=iu(V.c),W=G.length,$==1||$==2&&(F<=k||k<=h)){for(;W<F;G+="0",W++);G=p0(G,k)}else if(F-=I,G=kc(G,k,"0"),k+1>W){if(--F>0)for(G+=".";F--;G+="0");}else if(F+=k-W,F>0)for(k+1==W&&(G+=".");F--;G+="0");return V.s<0&&D?"-"+G:G}function J(V,F){for(var Y,$,D=1,k=new j(V[0]);D<V.length;D++)$=new j(V[D]),(!$.s||(Y=Nh(k,$))===F||Y===0&&k.s===F)&&(k=$);return k}function le(V,F,Y){for(var $=1,D=F.length;!F[--D];F.pop());for(D=F[0];D>=10;D/=10,$++);return(Y=$+Y*Fr-1)>y?V.c=V.e=null:Y<v?V.c=[V.e=0]:(V.e=Y,V.c=F),V}r=function(){var V=/^(-?)0([xbo])(?=\w[\w.]*$)/i,F=/^([^.]+)\.$/,Y=/^\.([^.]+)$/,$=/^-?(Infinity|NaN)$/,D=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(k,I,W,G){var K,q=W?I:I.replace(D,"");if($.test(q))k.s=isNaN(q)?null:q<0?-1:1;else{if(!W&&(q=q.replace(V,function(ve,Ce,Xe){return K=(Xe=Xe.toLowerCase())=="x"?16:Xe=="b"?2:8,!G||G==K?Ce:ve}),G&&(K=G,q=q.replace(F,"$1").replace(Y,"0.$1")),I!=q))return new j(q,K);if(j.DEBUG)throw Error(gl+"Not a"+(G?" base "+G:"")+" number: "+I);k.s=null}k.c=k.e=null}}();function he(V,F,Y,$){var D,k,I,W,G,K,q,ve=V.c,Ce=rv;if(ve){e:{for(D=1,W=ve[0];W>=10;W/=10,D++);if(k=F-D,k<0)k+=Fr,I=F,G=ve[K=0],q=su(G/Ce[D-I-1]%10);else if(K=nv((k+1)/Fr),K>=ve.length)if($){for(;ve.length<=K;ve.push(0));G=q=0,D=1,k%=Fr,I=k-Fr+1}else break e;else{for(G=W=ve[K],D=1;W>=10;W/=10,D++);k%=Fr,I=k-Fr+D,q=I<0?0:su(G/Ce[D-I-1]%10)}if($=$||F<0||ve[K+1]!=null||(I<0?G:G%Ce[D-I-1]),$=Y<4?(q||$)&&(Y==0||Y==(V.s<0?3:2)):q>5||q==5&&(Y==4||$||Y==6&&(k>0?I>0?G/Ce[D-I]:0:ve[K-1])%10&1||Y==(V.s<0?8:7)),F<1||!ve[0])return ve.length=0,$?(F-=V.e+1,ve[0]=Ce[(Fr-F%Fr)%Fr],V.e=-F||0):ve[0]=V.e=0,V;if(k==0?(ve.length=K,W=1,K--):(ve.length=K+1,W=Ce[Fr-k],ve[K]=I>0?su(G/Ce[D-I]%Ce[I])*W:0),$)for(;;)if(K==0){for(k=1,I=ve[0];I>=10;I/=10,k++);for(I=ve[0]+=W,W=1;I>=10;I/=10,W++);k!=W&&(V.e++,ve[0]==Mu&&(ve[0]=1));break}else{if(ve[K]+=W,ve[K]!=Mu)break;ve[K--]=0,W=1}for(k=ve.length;ve[--k]===0;ve.pop());}V.e>y?V.c=V.e=null:V.e<v&&(V.c=[V.e=0])}return V}function Le(V){var F,Y=V.e;return Y===null?V.toString():(F=iu(V.c),F=Y<=h||Y>=d?p0(F,Y):kc(F,Y,"0"),V.s<0?"-"+F:F)}return i.absoluteValue=i.abs=function(){var V=new j(this);return V.s<0&&(V.s=1),V},i.comparedTo=function(V,F){return Nh(this,new j(V,F))},i.decimalPlaces=i.dp=function(V,F){var Y,$,D,k=this;if(V!=null)return Io(V,0,Rl),F==null?F=u:Io(F,0,8),he(new j(k),V+k.e+1,F);if(!(Y=k.c))return null;if($=((D=Y.length-1)-au(this.e/Fr))*Fr,D=Y[D])for(;D%10==0;D/=10,$--);return $<0&&($=0),$},i.dividedBy=i.div=function(V,F){return t(this,new j(V,F),o,u)},i.dividedToIntegerBy=i.idiv=function(V,F){return t(this,new j(V,F),0,1)},i.exponentiatedBy=i.pow=function(V,F){var Y,$,D,k,I,W,G,K,q,ve=this;if(V=new j(V),V.c&&!V.isInteger())throw Error(gl+"Exponent not an integer: "+Le(V));if(F!=null&&(F=new j(F)),W=V.e>14,!ve.c||!ve.c[0]||ve.c[0]==1&&!ve.e&&ve.c.length==1||!V.c||!V.c[0])return q=new j(Math.pow(+Le(ve),W?V.s*(2-d0(V)):+Le(V))),F?q.mod(F):q;if(G=V.s<0,F){if(F.c?!F.c[0]:!F.s)return new j(NaN);$=!G&&ve.isInteger()&&F.isInteger(),$&&(ve=ve.mod(F))}else{if(V.e>9&&(ve.e>0||ve.e<-1||(ve.e==0?ve.c[0]>1||W&&ve.c[1]>=24e7:ve.c[0]<8e13||W&&ve.c[0]<=9999975e7)))return k=ve.s<0&&d0(V)?-0:0,ve.e>-1&&(k=1/k),new j(G?1/k:k);P&&(k=nv(P/Fr+2))}for(W?(Y=new j(.5),G&&(V.s=1),K=d0(V)):(D=Math.abs(+Le(V)),K=D%2),q=new j(s);;){if(K){if(q=q.times(ve),!q.c)break;k?q.c.length>k&&(q.c.length=k):$&&(q=q.mod(F))}if(D){if(D=su(D/2),D===0)break;K=D%2}else if(V=V.times(Y),he(V,V.e+1,1),V.e>14)K=d0(V);else{if(D=+Le(V),D===0)break;K=D%2}ve=ve.times(ve),k?ve.c&&ve.c.length>k&&(ve.c.length=k):$&&(ve=ve.mod(F))}return $?q:(G&&(q=s.div(q)),F?q.mod(F):k?he(q,P,u,I):q)},i.integerValue=function(V){var F=new j(this);return V==null?V=u:Io(V,0,8),he(F,F.e+1,V)},i.isEqualTo=i.eq=function(V,F){return Nh(this,new j(V,F))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(V,F){return Nh(this,new j(V,F))>0},i.isGreaterThanOrEqualTo=i.gte=function(V,F){return(F=Nh(this,new j(V,F)))===1||F===0},i.isInteger=function(){return!!this.c&&au(this.e/Fr)>this.c.length-2},i.isLessThan=i.lt=function(V,F){return Nh(this,new j(V,F))<0},i.isLessThanOrEqualTo=i.lte=function(V,F){return(F=Nh(this,new j(V,F)))===-1||F===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(V,F){var Y,$,D,k,I=this,W=I.s;if(V=new j(V,F),F=V.s,!W||!F)return new j(NaN);if(W!=F)return V.s=-F,I.plus(V);var G=I.e/Fr,K=V.e/Fr,q=I.c,ve=V.c;if(!G||!K){if(!q||!ve)return q?(V.s=-F,V):new j(ve?I:NaN);if(!q[0]||!ve[0])return ve[0]?(V.s=-F,V):new j(q[0]?I:u==3?-0:0)}if(G=au(G),K=au(K),q=q.slice(),W=G-K){for((k=W<0)?(W=-W,D=q):(K=G,D=ve),D.reverse(),F=W;F--;D.push(0));D.reverse()}else for($=(k=(W=q.length)<(F=ve.length))?W:F,W=F=0;F<$;F++)if(q[F]!=ve[F]){k=q[F]<ve[F];break}if(k&&(D=q,q=ve,ve=D,V.s=-V.s),F=($=ve.length)-(Y=q.length),F>0)for(;F--;q[Y++]=0);for(F=Mu-1;$>W;){if(q[--$]<ve[$]){for(Y=$;Y&&!q[--Y];q[Y]=F);--q[Y],q[$]+=Mu}q[$]-=ve[$]}for(;q[0]==0;q.splice(0,1),--K);return q[0]?le(V,q,K):(V.s=u==3?-1:1,V.c=[V.e=0],V)},i.modulo=i.mod=function(V,F){var Y,$,D=this;return V=new j(V,F),!D.c||!V.s||V.c&&!V.c[0]?new j(NaN):!V.c||D.c&&!D.c[0]?new j(D):(_==9?($=V.s,V.s=1,Y=t(D,V,0,3),V.s=$,Y.s*=$):Y=t(D,V,0,_),V=D.minus(Y.times(V)),!V.c[0]&&_==1&&(V.s=D.s),V)},i.multipliedBy=i.times=function(V,F){var Y,$,D,k,I,W,G,K,q,ve,Ce,Xe,B,te,se,ae=this,we=ae.c,fe=(V=new j(V,F)).c;if(!we||!fe||!we[0]||!fe[0])return!ae.s||!V.s||we&&!we[0]&&!fe||fe&&!fe[0]&&!we?V.c=V.e=V.s=null:(V.s*=ae.s,!we||!fe?V.c=V.e=null:(V.c=[0],V.e=0)),V;for($=au(ae.e/Fr)+au(V.e/Fr),V.s*=ae.s,G=we.length,ve=fe.length,G<ve&&(B=we,we=fe,fe=B,D=G,G=ve,ve=D),D=G+ve,B=[];D--;B.push(0));for(te=Mu,se=Xc,D=ve;--D>=0;){for(Y=0,Ce=fe[D]%se,Xe=fe[D]/se|0,I=G,k=D+I;k>D;)K=we[--I]%se,q=we[I]/se|0,W=Xe*K+q*Ce,K=Ce*K+W%se*se+B[k]+Y,Y=(K/te|0)+(W/se|0)+Xe*q,B[k--]=K%te;B[k]=Y}return Y?++$:B.splice(0,1),le(V,B,$)},i.negated=function(){var V=new j(this);return V.s=-V.s||null,V},i.plus=function(V,F){var Y,$=this,D=$.s;if(V=new j(V,F),F=V.s,!D||!F)return new j(NaN);if(D!=F)return V.s=-F,$.minus(V);var k=$.e/Fr,I=V.e/Fr,W=$.c,G=V.c;if(!k||!I){if(!W||!G)return new j(D/0);if(!W[0]||!G[0])return G[0]?V:new j(W[0]?$:D*0)}if(k=au(k),I=au(I),W=W.slice(),D=k-I){for(D>0?(I=k,Y=G):(D=-D,Y=W),Y.reverse();D--;Y.push(0));Y.reverse()}for(D=W.length,F=G.length,D-F<0&&(Y=G,G=W,W=Y,F=D),D=0;F;)D=(W[--F]=W[F]+G[F]+D)/Mu|0,W[F]=Mu===W[F]?0:W[F]%Mu;return D&&(W=[D].concat(W),++I),le(V,W,I)},i.precision=i.sd=function(V,F){var Y,$,D,k=this;if(V!=null&&V!==!!V)return Io(V,1,Rl),F==null?F=u:Io(F,0,8),he(new j(k),V,F);if(!(Y=k.c))return null;if(D=Y.length-1,$=D*Fr+1,D=Y[D]){for(;D%10==0;D/=10,$--);for(D=Y[0];D>=10;D/=10,$++);}return V&&k.e+1>$&&($=k.e+1),$},i.shiftedBy=function(V){return Io(V,-9007199254740991,hb),this.times("1e"+V)},i.squareRoot=i.sqrt=function(){var V,F,Y,$,D,k=this,I=k.c,W=k.s,G=k.e,K=o+4,q=new j("0.5");if(W!==1||!I||!I[0])return new j(!W||W<0&&(!I||I[0])?NaN:I?k:1/0);if(W=Math.sqrt(+Le(k)),W==0||W==1/0?(F=iu(I),(F.length+G)%2==0&&(F+="0"),W=Math.sqrt(+F),G=au((G+1)/2)-(G<0||G%2),W==1/0?F="5e"+G:(F=W.toExponential(),F=F.slice(0,F.indexOf("e")+1)+G),Y=new j(F)):Y=new j(W+""),Y.c[0]){for(G=Y.e,W=G+K,W<3&&(W=0);;)if(D=Y,Y=q.times(D.plus(t(k,D,K,1))),iu(D.c).slice(0,W)===(F=iu(Y.c)).slice(0,W))if(Y.e<G&&--W,F=F.slice(W-3,W+1),F=="9999"||!$&&F=="4999"){if(!$&&(he(D,D.e+o+2,0),D.times(D).eq(k))){Y=D;break}K+=4,W+=4,$=1}else{(!+F||!+F.slice(1)&&F.charAt(0)=="5")&&(he(Y,Y.e+o+2,1),V=!Y.times(Y).eq(k));break}}return he(Y,Y.e+o+1,u,V)},i.toExponential=function(V,F){return V!=null&&(Io(V,0,Rl),V++),Z(this,V,F,1)},i.toFixed=function(V,F){return V!=null&&(Io(V,0,Rl),V=V+this.e+1),Z(this,V,F)},i.toFormat=function(V,F,Y){var $,D=this;if(Y==null)V!=null&&F&&typeof F=="object"?(Y=F,F=null):V&&typeof V=="object"?(Y=V,V=F=null):Y=T;else if(typeof Y!="object")throw Error(gl+"Argument not an object: "+Y);if($=D.toFixed(V,F),D.c){var k,I=$.split("."),W=+Y.groupSize,G=+Y.secondaryGroupSize,K=Y.groupSeparator||"",q=I[0],ve=I[1],Ce=D.s<0,Xe=Ce?q.slice(1):q,B=Xe.length;if(G&&(k=W,W=G,G=k,B-=k),W>0&&B>0){for(k=B%W||W,q=Xe.substr(0,k);k<B;k+=W)q+=K+Xe.substr(k,W);G>0&&(q+=K+Xe.slice(k)),Ce&&(q="-"+q)}$=ve?q+(Y.decimalSeparator||"")+((G=+Y.fractionGroupSize)?ve.replace(new RegExp("\\d{"+G+"}\\B","g"),"$&"+(Y.fractionGroupSeparator||"")):ve):q}return(Y.prefix||"")+$+(Y.suffix||"")},i.toFraction=function(V){var F,Y,$,D,k,I,W,G,K,q,ve,Ce,Xe=this,B=Xe.c;if(V!=null&&(W=new j(V),!W.isInteger()&&(W.c||W.s!==1)||W.lt(s)))throw Error(gl+"Argument "+(W.isInteger()?"out of range: ":"not an integer: ")+Le(W));if(!B)return new j(Xe);for(F=new j(s),K=Y=new j(s),$=G=new j(s),Ce=iu(B),k=F.e=Ce.length-Xe.e-1,F.c[0]=rv[(I=k%Fr)<0?Fr+I:I],V=!V||W.comparedTo(F)>0?k>0?F:K:W,I=y,y=1/0,W=new j(Ce),G.c[0]=0;q=t(W,F,0,1),D=Y.plus(q.times($)),D.comparedTo(V)!=1;)Y=$,$=D,K=G.plus(q.times(D=K)),G=D,F=W.minus(q.times(D=F)),W=D;return D=t(V.minus(Y),$,0,1),G=G.plus(D.times(K)),Y=Y.plus(D.times($)),G.s=K.s=Xe.s,k=k*2,ve=t(K,$,k,u).minus(Xe).abs().comparedTo(t(G,Y,k,u).minus(Xe).abs())<1?[K,$]:[G,Y],y=I,ve},i.toNumber=function(){return+Le(this)},i.toPrecision=function(V,F){return V!=null&&Io(V,1,Rl),Z(this,V,F,2)},i.toString=function(V){var F,Y=this,$=Y.s,D=Y.e;return D===null?$?(F="Infinity",$<0&&(F="-"+F)):F="NaN":(V==null?F=D<=h||D>=d?p0(iu(Y.c),D):kc(iu(Y.c),D,"0"):V===10&&N?(Y=he(new j(Y),o+D+1,u),F=kc(iu(Y.c),Y.e,"0")):(Io(V,2,U.length,"Base"),F=n(kc(iu(Y.c),D,"0"),10,V,$,!0)),$<0&&Y.c[0]&&(F="-"+F)),F},i.valueOf=i.toJSON=function(){return Le(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,e!=null&&j.set(e),j}function au(e){var t=e|0;return e>0||e===t?t:t-1}function iu(e){for(var t,n,r=1,i=e.length,s=e[0]+"";r<i;){for(t=e[r++]+"",n=Fr-t.length;n--;t="0"+t);s+=t}for(i=s.length;s.charCodeAt(--i)===48;);return s.slice(0,i+1||1)}function Nh(e,t){var n,r,i=e.c,s=t.c,o=e.s,u=t.s,h=e.e,d=t.e;if(!o||!u)return null;if(n=i&&!i[0],r=s&&!s[0],n||r)return n?r?0:-u:o;if(o!=u)return o;if(n=o<0,r=h==d,!i||!s)return r?0:!i^n?1:-1;if(!r)return h>d^n?1:-1;for(u=(h=i.length)<(d=s.length)?h:d,o=0;o<u;o++)if(i[o]!=s[o])return i[o]>s[o]^n?1:-1;return h==d?0:h>d^n?1:-1}function Io(e,t,n,r){if(e<t||e>n||e!==su(e))throw Error(gl+(r||"Argument")+(typeof e=="number"?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function d0(e){var t=e.c.length-1;return au(e.e/Fr)==t&&e.c[t]%2!=0}function p0(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function kc(e,t,n){var r,i;if(t<0){for(i=n+".";++t;i+=n);e=i+e}else if(r=e.length,++t>r){for(i=n,t-=r;--t;i+=n);e+=i}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}var lc=s3(),mD=class{constructor(e){$t(this,"key");$t(this,"left",null);$t(this,"right",null);this.key=e}},Ad=class extends mD{constructor(e){super(e)}},vD=class{constructor(){$t(this,"size",0);$t(this,"modificationCount",0);$t(this,"splayCount",0)}splay(e){const t=this.root;if(t==null)return this.compare(e,e),-1;let n=null,r=null,i=null,s=null,o=t;const u=this.compare;let h;for(;;)if(h=u(o.key,e),h>0){let d=o.left;if(d==null||(h=u(d.key,e),h>0&&(o.left=d.right,d.right=o,o=d,d=o.left,d==null)))break;n==null?r=o:n.left=o,n=o,o=d}else if(h<0){let d=o.right;if(d==null||(h=u(d.key,e),h<0&&(o.right=d.left,d.left=o,o=d,d=o.right,d==null)))break;i==null?s=o:i.right=o,i=o,o=d}else break;return i!=null&&(i.right=o.left,o.left=s),n!=null&&(n.left=o.right,o.right=r),this.root!==o&&(this.root=o,this.splayCount++),h}splayMin(e){let t=e,n=t.left;for(;n!=null;){const r=n;t.left=r.right,r.right=t,t=r,n=t.left}return t}splayMax(e){let t=e,n=t.right;for(;n!=null;){const r=n;t.right=r.left,r.left=t,t=r,n=t.right}return t}_delete(e){if(this.root==null||this.splay(e)!=0)return null;let n=this.root;const r=n,i=n.left;if(this.size--,i==null)this.root=n.right;else{const s=n.right;n=this.splayMax(i),n.right=s,this.root=n}return this.modificationCount++,r}addNewRoot(e,t){this.size++,this.modificationCount++;const n=this.root;if(n==null){this.root=e;return}t<0?(e.left=n,e.right=n.right,n.right=null):(e.right=n,e.left=n.left,n.left=null),this.root=e}_first(){const e=this.root;return e==null?null:(this.root=this.splayMin(e),this.root)}_last(){const e=this.root;return e==null?null:(this.root=this.splayMax(e),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(e){return this.validKey(e)&&this.splay(e)==0}defaultCompare(){return(e,t)=>e<t?-1:e>t?1:0}wrap(){return{getRoot:()=>this.root,setRoot:e=>{this.root=e},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:e=>{this.splayCount=e},splay:e=>this.splay(e),has:e=>this.has(e)}}},Qb,e4,dg=class jd extends vD{constructor(n,r){super();$t(this,"root",null);$t(this,"compare");$t(this,"validKey");$t(this,Qb,"[object Set]");this.compare=n??this.defaultCompare(),this.validKey=r??(i=>i!=null&&i!=null)}delete(n){return this.validKey(n)?this._delete(n)!=null:!1}deleteAll(n){for(const r of n)this.delete(r)}forEach(n){const r=this[Symbol.iterator]();let i;for(;i=r.next(),!i.done;)n(i.value,i.value,this)}add(n){const r=this.splay(n);return r!=0&&this.addNewRoot(new Ad(n),r),this}addAndReturn(n){const r=this.splay(n);return r!=0&&this.addNewRoot(new Ad(n),r),this.root.key}addAll(n){for(const r of n)this.add(r)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(n){if(n==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(n)<0)return this.root.key;let i=this.root.left;if(i==null)return null;let s=i.right;for(;s!=null;)i=s,s=i.right;return i.key}firstAfter(n){if(n==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(n)>0)return this.root.key;let i=this.root.right;if(i==null)return null;let s=i.left;for(;s!=null;)i=s,s=i.left;return i.key}retainAll(n){const r=new jd(this.compare,this.validKey),i=this.modificationCount;for(const s of n){if(i!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(s)&&this.splay(s)==0&&r.add(this.root.key)}r.size!=this.size&&(this.root=r.root,this.size=r.size,this.modificationCount++)}lookup(n){return!this.validKey(n)||this.splay(n)!=0?null:this.root.key}intersection(n){const r=new jd(this.compare,this.validKey);for(const i of this)n.has(i)&&r.add(i);return r}difference(n){const r=new jd(this.compare,this.validKey);for(const i of this)n.has(i)||r.add(i);return r}union(n){const r=this.clone();return r.addAll(n),r}clone(){const n=new jd(this.compare,this.validKey);return n.size=this.size,n.root=this.copyNode(this.root),n}copyNode(n){if(n==null)return null;function r(s,o){let u,h;do{if(u=s.left,h=s.right,u!=null){const d=new Ad(u.key);o.left=d,r(u,d)}if(h!=null){const d=new Ad(h.key);o.right=d,s=h,o=d}}while(h!=null)}const i=new Ad(n.key);return r(n,i),i}toSet(){return this.clone()}entries(){return new _D(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(e4=Symbol.iterator,Qb=Symbol.toStringTag,e4)](){return new yD(this.wrap())}},a3=class{constructor(e){$t(this,"tree");$t(this,"path",new Array);$t(this,"modificationCount",null);$t(this,"splayCount");this.tree=e,this.splayCount=e.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;const e=this.path[this.path.length-1];return this.getValue(e)}rebuildPath(e){this.path.splice(0,this.path.length),this.tree.splay(e),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(e){for(;e!=null;)this.path.push(e),e=e.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let n=this.tree.getRoot();for(;n!=null;)this.path.push(n),n=n.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let e=this.path[this.path.length-1],t=e.right;if(t!=null){for(;t!=null;)this.path.push(t),t=t.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===e;)e=this.path.pop();return this.path.length>0}},yD=class extends a3{getValue(e){return e.key}},_D=class extends a3{getValue(e){return[e.key,e.key]}},l3=e=>()=>e,c1=e=>{const t=e?(n,r)=>r.minus(n).abs().isLessThanOrEqualTo(e):l3(!1);return(n,r)=>t(n,r)?0:n.comparedTo(r)};function bD(e){const t=e?(n,r,i,s,o)=>n.exponentiatedBy(2).isLessThanOrEqualTo(s.minus(r).exponentiatedBy(2).plus(o.minus(i).exponentiatedBy(2)).times(e)):l3(!1);return(n,r,i)=>{const s=n.x,o=n.y,u=i.x,h=i.y,d=o.minus(h).times(r.x.minus(u)).minus(s.minus(u).times(r.y.minus(h)));return t(d,s,o,u,h)?0:d.comparedTo(0)}}var wD=e=>e,xD=e=>{if(e){const t=new dg(c1(e)),n=new dg(c1(e)),r=(s,o)=>o.addAndReturn(s),i=s=>({x:r(s.x,t),y:r(s.y,n)});return i({x:new lc(0),y:new lc(0)}),i}return wD},h1=e=>({set:t=>{jc=h1(t)},reset:()=>h1(e),compare:c1(e),snap:xD(e),orient:bD(e)}),jc=h1(),Md=(e,t)=>e.ll.x.isLessThanOrEqualTo(t.x)&&t.x.isLessThanOrEqualTo(e.ur.x)&&e.ll.y.isLessThanOrEqualTo(t.y)&&t.y.isLessThanOrEqualTo(e.ur.y),f1=(e,t)=>{if(t.ur.x.isLessThan(e.ll.x)||e.ur.x.isLessThan(t.ll.x)||t.ur.y.isLessThan(e.ll.y)||e.ur.y.isLessThan(t.ll.y))return null;const n=e.ll.x.isLessThan(t.ll.x)?t.ll.x:e.ll.x,r=e.ur.x.isLessThan(t.ur.x)?e.ur.x:t.ur.x,i=e.ll.y.isLessThan(t.ll.y)?t.ll.y:e.ll.y,s=e.ur.y.isLessThan(t.ur.y)?e.ur.y:t.ur.y;return{ll:{x:n,y:i},ur:{x:r,y:s}}},I0=(e,t)=>e.x.times(t.y).minus(e.y.times(t.x)),u3=(e,t)=>e.x.times(t.x).plus(e.y.times(t.y)),pg=e=>u3(e,e).sqrt(),LD=(e,t,n)=>{const r={x:t.x.minus(e.x),y:t.y.minus(e.y)},i={x:n.x.minus(e.x),y:n.y.minus(e.y)};return I0(i,r).div(pg(i)).div(pg(r))},SD=(e,t,n)=>{const r={x:t.x.minus(e.x),y:t.y.minus(e.y)},i={x:n.x.minus(e.x),y:n.y.minus(e.y)};return u3(i,r).div(pg(i)).div(pg(r))},fb=(e,t,n)=>t.y.isZero()?null:{x:e.x.plus(t.x.div(t.y).times(n.minus(e.y))),y:n},db=(e,t,n)=>t.x.isZero()?null:{x:n,y:e.y.plus(t.y.div(t.x).times(n.minus(e.x)))},ED=(e,t,n,r)=>{if(t.x.isZero())return db(n,r,e.x);if(r.x.isZero())return db(e,t,n.x);if(t.y.isZero())return fb(n,r,e.y);if(r.y.isZero())return fb(e,t,n.y);const i=I0(t,r);if(i.isZero())return null;const s={x:n.x.minus(e.x),y:n.y.minus(e.y)},o=I0(s,t).div(i),u=I0(s,r).div(i),h=e.x.plus(u.times(t.x)),d=n.x.plus(o.times(r.x)),v=e.y.plus(u.times(t.y)),y=n.y.plus(o.times(r.y)),x=h.plus(d).div(2),_=v.plus(y).div(2);return{x,y:_}},ac=class c3{constructor(t,n){$t(this,"point");$t(this,"isLeft");$t(this,"segment");$t(this,"otherSE");$t(this,"consumedBy");t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=n}static compare(t,n){const r=c3.comparePoints(t.point,n.point);return r!==0?r:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:gg.compare(t.segment,n.segment))}static comparePoints(t,n){return t.x.isLessThan(n.x)?-1:t.x.isGreaterThan(n.x)?1:t.y.isLessThan(n.y)?-1:t.y.isGreaterThan(n.y)?1:0}link(t){if(t.point===this.point)throw new Error("Tried to link already linked events");const n=t.point.events;for(let r=0,i=n.length;r<i;r++){const s=n[r];this.point.events.push(s),s.point=this.point}this.checkForConsuming()}checkForConsuming(){const t=this.point.events.length;for(let n=0;n<t;n++){const r=this.point.events[n];if(r.segment.consumedBy===void 0)for(let i=n+1;i<t;i++){const s=this.point.events[i];s.consumedBy===void 0&&r.otherSE.point.events===s.otherSE.point.events&&r.segment.consume(s.segment)}}}getAvailableLinkedEvents(){const t=[];for(let n=0,r=this.point.events.length;n<r;n++){const i=this.point.events[n];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&t.push(i)}return t}getLeftmostComparator(t){const n=new Map,r=i=>{const s=i.otherSE;n.set(i,{sine:LD(this.point,t.point,s.point),cosine:SD(this.point,t.point,s.point)})};return(i,s)=>{n.has(i)||r(i),n.has(s)||r(s);const{sine:o,cosine:u}=n.get(i),{sine:h,cosine:d}=n.get(s);return o.isGreaterThanOrEqualTo(0)&&h.isGreaterThanOrEqualTo(0)?u.isLessThan(d)?1:u.isGreaterThan(d)?-1:0:o.isLessThan(0)&&h.isLessThan(0)?u.isLessThan(d)?-1:u.isGreaterThan(d)?1:0:h.isLessThan(o)?-1:h.isGreaterThan(o)?1:0}}},CD=class d1{constructor(t){$t(this,"events");$t(this,"poly");$t(this,"_isExteriorRing");$t(this,"_enclosingRing");this.events=t;for(let n=0,r=t.length;n<r;n++)t[n].segment.ringOut=this;this.poly=null}static factory(t){const n=[];for(let r=0,i=t.length;r<i;r++){const s=t[r];if(!s.isInResult()||s.ringOut)continue;let o=null,u=s.leftSE,h=s.rightSE;const d=[u],v=u.point,y=[];for(;o=u,u=h,d.push(u),u.point!==v;)for(;;){const x=u.getAvailableLinkedEvents();if(x.length===0){const T=d[0].point,U=d[d.length-1].point;throw new Error(`Unable to complete output ring starting at [${T.x}, ${T.y}]. Last matching segment found ends at [${U.x}, ${U.y}].`)}if(x.length===1){h=x[0].otherSE;break}let _=null;for(let T=0,U=y.length;T<U;T++)if(y[T].point===u.point){_=T;break}if(_!==null){const T=y.splice(_)[0],U=d.splice(T.index);U.unshift(U[0].otherSE),n.push(new d1(U.reverse()));continue}y.push({index:d.length,point:u.point});const P=u.getLeftmostComparator(o);h=x.sort(P)[0].otherSE;break}n.push(new d1(d))}return n}getGeom(){let t=this.events[0].point;const n=[t];for(let d=1,v=this.events.length-1;d<v;d++){const y=this.events[d].point,x=this.events[d+1].point;jc.orient(y,t,x)!==0&&(n.push(y),t=y)}if(n.length===1)return null;const r=n[0],i=n[1];jc.orient(r,t,i)===0&&n.shift(),n.push(n[0]);const s=this.isExteriorRing()?1:-1,o=this.isExteriorRing()?0:n.length-1,u=this.isExteriorRing()?n.length:-1,h=[];for(let d=o;d!=u;d+=s)h.push([n[d].x.toNumber(),n[d].y.toNumber()]);return h}isExteriorRing(){if(this._isExteriorRing===void 0){const t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var i,s;let t=this.events[0];for(let o=1,u=this.events.length;o<u;o++){const h=this.events[o];ac.compare(t,h)>0&&(t=h)}let n=t.segment.prevInResult(),r=n?n.prevInResult():null;for(;;){if(!n)return null;if(!r)return n.ringOut;if(r.ringOut!==n.ringOut)return((i=r.ringOut)==null?void 0:i.enclosingRing())!==n.ringOut?n.ringOut:(s=n.ringOut)==null?void 0:s.enclosingRing();n=r.prevInResult(),r=n?n.prevInResult():null}}},pb=class{constructor(e){$t(this,"exteriorRing");$t(this,"interiorRings");this.exteriorRing=e,e.poly=this,this.interiorRings=[]}addInterior(e){this.interiorRings.push(e),e.poly=this}getGeom(){const e=this.exteriorRing.getGeom();if(e===null)return null;const t=[e];for(let n=0,r=this.interiorRings.length;n<r;n++){const i=this.interiorRings[n].getGeom();i!==null&&t.push(i)}return t}},PD=class{constructor(e){$t(this,"rings");$t(this,"polys");this.rings=e,this.polys=this._composePolys(e)}getGeom(){const e=[];for(let t=0,n=this.polys.length;t<n;t++){const r=this.polys[t].getGeom();r!==null&&e.push(r)}return e}_composePolys(e){var n;const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];if(!s.poly)if(s.isExteriorRing())t.push(new pb(s));else{const o=s.enclosingRing();o!=null&&o.poly||t.push(new pb(o)),(n=o==null?void 0:o.poly)==null||n.addInterior(s)}}return t}},AD=class{constructor(e,t=gg.compare){$t(this,"queue");$t(this,"tree");$t(this,"segments");this.queue=e,this.tree=new dg(t),this.segments=[]}process(e){const t=e.segment,n=[];if(e.consumedBy)return e.isLeft?this.queue.delete(e.otherSE):this.tree.delete(t),n;e.isLeft&&this.tree.add(t);let r=t,i=t;do r=this.tree.lastBefore(r);while(r!=null&&r.consumedBy!=null);do i=this.tree.firstAfter(i);while(i!=null&&i.consumedBy!=null);if(e.isLeft){let s=null;if(r){const u=r.getIntersection(t);if(u!==null&&(t.isAnEndpoint(u)||(s=u),!r.isAnEndpoint(u))){const h=this._splitSafely(r,u);for(let d=0,v=h.length;d<v;d++)n.push(h[d])}}let o=null;if(i){const u=i.getIntersection(t);if(u!==null&&(t.isAnEndpoint(u)||(o=u),!i.isAnEndpoint(u))){const h=this._splitSafely(i,u);for(let d=0,v=h.length;d<v;d++)n.push(h[d])}}if(s!==null||o!==null){let u=null;s===null?u=o:o===null?u=s:u=ac.comparePoints(s,o)<=0?s:o,this.queue.delete(t.rightSE),n.push(t.rightSE);const h=t.split(u);for(let d=0,v=h.length;d<v;d++)n.push(h[d])}n.length>0?(this.tree.delete(t),n.push(e)):(this.segments.push(t),t.prev=r)}else{if(r&&i){const s=r.getIntersection(i);if(s!==null){if(!r.isAnEndpoint(s)){const o=this._splitSafely(r,s);for(let u=0,h=o.length;u<h;u++)n.push(o[u])}if(!i.isAnEndpoint(s)){const o=this._splitSafely(i,s);for(let u=0,h=o.length;u<h;u++)n.push(o[u])}}}this.tree.delete(t)}return n}_splitSafely(e,t){this.tree.delete(e);const n=e.rightSE;this.queue.delete(n);const r=e.split(t);return r.push(n),e.consumedBy===void 0&&this.tree.add(e),r}},MD=class{constructor(){$t(this,"type");$t(this,"numMultiPolys")}run(e,t,n){zd.type=e;const r=[new mb(t,!0)];for(let d=0,v=n.length;d<v;d++)r.push(new mb(n[d],!1));if(zd.numMultiPolys=r.length,zd.type==="difference"){const d=r[0];let v=1;for(;v<r.length;)f1(r[v].bbox,d.bbox)!==null?v++:r.splice(v,1)}if(zd.type==="intersection")for(let d=0,v=r.length;d<v;d++){const y=r[d];for(let x=d+1,_=r.length;x<_;x++)if(f1(y.bbox,r[x].bbox)===null)return[]}const i=new dg(ac.compare);for(let d=0,v=r.length;d<v;d++){const y=r[d].getSweepEvents();for(let x=0,_=y.length;x<_;x++)i.add(y[x])}const s=new AD(i);let o=null;for(i.size!=0&&(o=i.first(),i.delete(o));o;){const d=s.process(o);for(let v=0,y=d.length;v<y;v++){const x=d[v];x.consumedBy===void 0&&i.add(x)}i.size!=0?(o=i.first(),i.delete(o)):o=null}jc.reset();const u=CD.factory(s.segments);return new PD(u).getGeom()}},zd=new MD,p1=zd,kD=0,gg=class R0{constructor(t,n,r,i){$t(this,"id");$t(this,"leftSE");$t(this,"rightSE");$t(this,"rings");$t(this,"windings");$t(this,"ringOut");$t(this,"consumedBy");$t(this,"prev");$t(this,"_prevInResult");$t(this,"_beforeState");$t(this,"_afterState");$t(this,"_isInResult");this.id=++kD,this.leftSE=t,t.segment=this,t.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=t,this.rings=r,this.windings=i}static compare(t,n){const r=t.leftSE.point.x,i=n.leftSE.point.x,s=t.rightSE.point.x,o=n.rightSE.point.x;if(o.isLessThan(r))return 1;if(s.isLessThan(i))return-1;const u=t.leftSE.point.y,h=n.leftSE.point.y,d=t.rightSE.point.y,v=n.rightSE.point.y;if(r.isLessThan(i)){if(h.isLessThan(u)&&h.isLessThan(d))return 1;if(h.isGreaterThan(u)&&h.isGreaterThan(d))return-1;const y=t.comparePoint(n.leftSE.point);if(y<0)return 1;if(y>0)return-1;const x=n.comparePoint(t.rightSE.point);return x!==0?x:-1}if(r.isGreaterThan(i)){if(u.isLessThan(h)&&u.isLessThan(v))return-1;if(u.isGreaterThan(h)&&u.isGreaterThan(v))return 1;const y=n.comparePoint(t.leftSE.point);if(y!==0)return y;const x=t.comparePoint(n.rightSE.point);return x<0?1:x>0?-1:1}if(u.isLessThan(h))return-1;if(u.isGreaterThan(h))return 1;if(s.isLessThan(o)){const y=n.comparePoint(t.rightSE.point);if(y!==0)return y}if(s.isGreaterThan(o)){const y=t.comparePoint(n.rightSE.point);if(y<0)return 1;if(y>0)return-1}if(!s.eq(o)){const y=d.minus(u),x=s.minus(r),_=v.minus(h),P=o.minus(i);if(y.isGreaterThan(x)&&_.isLessThan(P))return 1;if(y.isLessThan(x)&&_.isGreaterThan(P))return-1}return s.isGreaterThan(o)?1:s.isLessThan(o)||d.isLessThan(v)?-1:d.isGreaterThan(v)?1:t.id<n.id?-1:t.id>n.id?1:0}static fromRing(t,n,r){let i,s,o;const u=ac.comparePoints(t,n);if(u<0)i=t,s=n,o=1;else if(u>0)i=n,s=t,o=-1;else throw new Error(`Tried to create degenerate segment at [${t.x}, ${t.y}]`);const h=new ac(i,!0),d=new ac(s,!1);return new R0(h,d,[r],[o])}replaceRightSE(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const t=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t.isLessThan(n)?t:n},ur:{x:this.rightSE.point.x,y:t.isGreaterThan(n)?t:n}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(t){return t.x.eq(this.leftSE.point.x)&&t.y.eq(this.leftSE.point.y)||t.x.eq(this.rightSE.point.x)&&t.y.eq(this.rightSE.point.y)}comparePoint(t){return jc.orient(this.leftSE.point,t,this.rightSE.point)}getIntersection(t){const n=this.bbox(),r=t.bbox(),i=f1(n,r);if(i===null)return null;const s=this.leftSE.point,o=this.rightSE.point,u=t.leftSE.point,h=t.rightSE.point,d=Md(n,u)&&this.comparePoint(u)===0,v=Md(r,s)&&t.comparePoint(s)===0,y=Md(n,h)&&this.comparePoint(h)===0,x=Md(r,o)&&t.comparePoint(o)===0;if(v&&d)return x&&!y?o:!x&&y?h:null;if(v)return y&&s.x.eq(h.x)&&s.y.eq(h.y)?null:s;if(d)return x&&o.x.eq(u.x)&&o.y.eq(u.y)?null:u;if(x&&y)return null;if(x)return o;if(y)return h;const _=ED(s,this.vector(),u,t.vector());return _===null||!Md(i,_)?null:jc.snap(_)}split(t){const n=[],r=t.events!==void 0,i=new ac(t,!0),s=new ac(t,!1),o=this.rightSE;this.replaceRightSE(s),n.push(s),n.push(i);const u=new R0(i,o,this.rings.slice(),this.windings.slice());return ac.comparePoints(u.leftSE.point,u.rightSE.point)>0&&u.swapEvents(),ac.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),s.checkForConsuming()),n}swapEvents(){const t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let n=0,r=this.windings.length;n<r;n++)this.windings[n]*=-1}consume(t){let n=this,r=t;for(;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;const i=R0.compare(n,r);if(i!==0){if(i>0){const s=n;n=r,r=s}if(n.prev===r){const s=n;n=r,r=s}for(let s=0,o=r.rings.length;s<o;s++){const u=r.rings[s],h=r.windings[s],d=n.rings.indexOf(u);d===-1?(n.rings.push(u),n.windings.push(h)):n.windings[d]+=h}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};const n=this._afterState.rings,r=this._afterState.windings,i=this._afterState.multiPolys;for(let u=0,h=this.rings.length;u<h;u++){const d=this.rings[u],v=this.windings[u],y=n.indexOf(d);y===-1?(n.push(d),r.push(v)):r[y]+=v}const s=[],o=[];for(let u=0,h=n.length;u<h;u++){if(r[u]===0)continue;const d=n[u],v=d.poly;if(o.indexOf(v)===-1)if(d.isExterior)s.push(v);else{o.indexOf(v)===-1&&o.push(v);const y=s.indexOf(d.poly);y!==-1&&s.splice(y,1)}}for(let u=0,h=s.length;u<h;u++){const d=s[u].multiPoly;i.indexOf(d)===-1&&i.push(d)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const t=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(p1.type){case"union":{const r=t.length===0,i=n.length===0;this._isInResult=r!==i;break}case"intersection":{let r,i;t.length<n.length?(r=t.length,i=n.length):(r=n.length,i=t.length),this._isInResult=i===p1.numMultiPolys&&r<i;break}case"xor":{const r=Math.abs(t.length-n.length);this._isInResult=r%2===1;break}case"difference":{const r=i=>i.length===1&&i[0].isSubject;this._isInResult=r(t)!==r(n);break}}return this._isInResult}},gb=class{constructor(e,t,n){$t(this,"poly");$t(this,"isExterior");$t(this,"segments");$t(this,"bbox");if(!Array.isArray(e)||e.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=t,this.isExterior=n,this.segments=[],typeof e[0][0]!="number"||typeof e[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const r=jc.snap({x:new lc(e[0][0]),y:new lc(e[0][1])});this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};let i=r;for(let s=1,o=e.length;s<o;s++){if(typeof e[s][0]!="number"||typeof e[s][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const u=jc.snap({x:new lc(e[s][0]),y:new lc(e[s][1])});u.x.eq(i.x)&&u.y.eq(i.y)||(this.segments.push(gg.fromRing(i,u,this)),u.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=u.x),u.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=u.y),u.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=u.x),u.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=u.y),i=u)}(!r.x.eq(i.x)||!r.y.eq(i.y))&&this.segments.push(gg.fromRing(i,r,this))}getSweepEvents(){const e=[];for(let t=0,n=this.segments.length;t<n;t++){const r=this.segments[t];e.push(r.leftSE),e.push(r.rightSE)}return e}},TD=class{constructor(e,t){$t(this,"multiPoly");$t(this,"exteriorRing");$t(this,"interiorRings");$t(this,"bbox");if(!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new gb(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let n=1,r=e.length;n<r;n++){const i=new gb(e[n],this,!1);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.interiorRings.push(i)}this.multiPoly=t}getSweepEvents(){const e=this.exteriorRing.getSweepEvents();for(let t=0,n=this.interiorRings.length;t<n;t++){const r=this.interiorRings[t].getSweepEvents();for(let i=0,s=r.length;i<s;i++)e.push(r[i])}return e}},mb=class{constructor(e,t){$t(this,"isSubject");$t(this,"polys");$t(this,"bbox");if(!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof e[0][0][0]=="number"&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:new lc(Number.POSITIVE_INFINITY),y:new lc(Number.POSITIVE_INFINITY)},ur:{x:new lc(Number.NEGATIVE_INFINITY),y:new lc(Number.NEGATIVE_INFINITY)}};for(let n=0,r=e.length;n<r;n++){const i=new TD(e[n],this);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.polys.push(i)}this.isSubject=t}getSweepEvents(){const e=[];for(let t=0,n=this.polys.length;t<n;t++){const r=this.polys[t].getSweepEvents();for(let i=0,s=r.length;i<s;i++)e.push(r[i])}return e}},BD=(e,...t)=>p1.run("intersection",e,t);jc.set;function OD(e,t){var n,r,i,s,o,u,h,d,v,y,x=0,_=e.type==="FeatureCollection",P=e.type==="Feature",T=_?e.features.length:1;for(n=0;n<T;n++){for(u=_?e.features[n].geometry:P?e.geometry:e,d=_?e.features[n].properties:P?e.properties:{},v=_?e.features[n].bbox:P?e.bbox:void 0,y=_?e.features[n].id:P?e.id:void 0,h=u?u.type==="GeometryCollection":!1,o=h?u.geometries.length:1,i=0;i<o;i++){if(s=h?u.geometries[i]:u,s===null){if(t(null,x,d,v,y)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(s,x,d,v,y)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(t(s.geometries[r],x,d,v,y)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}x++}}function ND(e,t={}){const n=[];if(OD(e,i=>{n.push(i.coordinates)}),n.length<2)throw new Error("Must specify at least 2 geometries");const r=BD(n[0],...n.slice(1));return r.length===0?null:r.length===1?lu(r[0],t.properties):tD(r,t.properties)}var DD=ND;function h3(e,t,n){if(e!==null)for(var r,i,s,o,u,h,d,v=0,y=0,x,_=e.type,P=_==="FeatureCollection",T=_==="Feature",U=P?e.features.length:1,N=0;N<U;N++){d=P?e.features[N].geometry:T?e.geometry:e,x=d?d.type==="GeometryCollection":!1,u=x?d.geometries.length:1;for(var j=0;j<u;j++){var Z=0,J=0;if(o=x?d.geometries[j]:d,o!==null){h=o.coordinates;var le=o.type;switch(v=0,le){case null:break;case"Point":if(t(h,y,N,Z,J)===!1)return!1;y++,Z++;break;case"LineString":case"MultiPoint":for(r=0;r<h.length;r++){if(t(h[r],y,N,Z,J)===!1)return!1;y++,le==="MultiPoint"&&Z++}le==="LineString"&&Z++;break;case"Polygon":case"MultiLineString":for(r=0;r<h.length;r++){for(i=0;i<h[r].length-v;i++){if(t(h[r][i],y,N,Z,J)===!1)return!1;y++}le==="MultiLineString"&&Z++,le==="Polygon"&&J++}le==="Polygon"&&Z++;break;case"MultiPolygon":for(r=0;r<h.length;r++){for(J=0,i=0;i<h[r].length;i++){for(s=0;s<h[r][i].length-v;s++){if(t(h[r][i][s],y,N,Z,J)===!1)return!1;y++}J++}Z++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(h3(o.geometries[r],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function ID(e,t){var n,r,i,s,o,u,h,d,v,y,x=0,_=e.type==="FeatureCollection",P=e.type==="Feature",T=_?e.features.length:1;for(n=0;n<T;n++){for(u=_?e.features[n].geometry:P?e.geometry:e,d=_?e.features[n].properties:P?e.properties:{},v=_?e.features[n].bbox:P?e.bbox:void 0,y=_?e.features[n].id:P?e.id:void 0,h=u?u.type==="GeometryCollection":!1,o=h?u.geometries.length:1,i=0;i<o;i++){if(s=h?u.geometries[i]:u,s===null){if(t(null,x,d,v,y)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(s,x,d,v,y)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(t(s.geometries[r],x,d,v,y)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}x++}}function RD(e,t){ID(e,function(n,r,i,s,o){var u=n===null?null:n.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return t(sd(n,i,{bbox:s,id:o}),r,0)===!1?!1:void 0}var h;switch(u){case"MultiPoint":h="Point";break;case"MultiLineString":h="LineString";break;case"MultiPolygon":h="Polygon";break}for(var d=0;d<n.coordinates.length;d++){var v=n.coordinates[d],y={type:h,coordinates:v};if(t(sd(y,i),r,d)===!1)return!1}})}function FD(e,t){RD(e,function(n,r,i){var s=0;if(n.geometry){var o=n.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var u,h=0,d=0,v=0;if(h3(n,function(y,x,_,P,T){if(u===void 0||r>h||P>d||T>v){u=y,h=r,d=P,v=T,s=0;return}var U=uu([u,y],n.properties);if(t(U,r,i,T,s)===!1)return!1;s++,u=y})===!1)return!1}}})}function jD(e,t,n){var r=n,i=!1;return FD(e,function(s,o,u,h,d){i===!1&&n===void 0?r=s:r=t(r,s,o,u,h,d),i=!0}),r}function mg(e,t={}){return jD(e,(n,r)=>{const i=r.geometry.coordinates;return n+hy(i[0],i[1],t)},0)}var Dh=mg;class ks extends Rn.Polyline{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});$t(this,"properties");$t(this,"cachedProperties",{});$t(this,"needsUpdate",!0);this.properties=on.measure("Line.constructor.initProperties",()=>({type:"Line",style:{...r||{},name:r.name||""}})),this.updateProperties(),this.on("add",()=>{this.updateProperties()})}updateProperties(){on.measure("Line.updateProperties",()=>{var i,s,o;const n=this.getLatLngs();if(!n||n.length<2){console.warn("Line has less than 2 points, cannot calculate properties");return}const r=n.map(u=>[u.lng,u.lat]);try{const u=uu(r),h=mg(u,{units:"meters"});let d;if(n.length===2)d=Rn.latLng((n[0].lat+n[1].lat)/2,(n[0].lng+n[1].lng)/2);else{const x=u1(u,h/2,{units:"meters"});d=Rn.latLng(x.geometry.coordinates[1],x.geometry.coordinates[0])}const v=10,y=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"";this.properties={type:"Line",length:h,coordinates:n.map(x=>({lat:x.lat,lng:x.lng})),center:{lat:d.lat,lng:d.lng},vertices:n.length,surfaceInfluence:h*v,dimensions:{width:v},style:{...this.options,color:this.options.color||"#3388ff",weight:this.options.weight||3,opacity:this.options.opacity||1,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:y}},this.cachedProperties.length=h,this.cachedProperties.center=d,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.needsUpdate=!1,this.fire("properties:updated",{shape:this,properties:this.properties})}catch(u){console.error("Failed to calculate line properties",u)}})}setName(n){on.measure("Line.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return on.measure("Line.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}invalidateCache(){on.measure("Line.invalidateCache",()=>{this.needsUpdate=!0,this.cachedProperties={}})}setLatLngs(n){return super.setLatLngs(n),this.needsUpdate=!0,this.cachedProperties={},this.fire("latlngs:updated",{latlngs:this.getLatLngs()}),this}getMidPoints(){return on.measure("Line.getMidPoints",()=>{if(!this.needsUpdate&&this.cachedProperties.midPoints)return this.cachedProperties.midPoints;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];if(!s||!o){console.warn("Points invalides dtects pour le segment",i);continue}r.push(Rn.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return this.cachedProperties.midPoints=r,r})}getMidPointAt(n){return on.measure("Line.getMidPointAt",()=>{const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return null;const i=r[n],s=r[n+1];return!i||!s?(console.warn("Points invalides pour calcul du midpoint au segment",n),null):Rn.latLng((i.lat+s.lat)/2,(i.lng+s.lng)/2)})}moveVertex(n,r,i=!1){on.measure("Line.moveVertex",()=>{const s=this.getLatLngs();n>=0&&n<s.length&&(s[n]=r,this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("vertex:moved",{index:n,latlng:r,allPoints:s}),i&&this.updateProperties())})}addVertex(n,r,i=!1){on.measure("Line.addVertex",()=>{const s=this.getLatLngs();n>=0&&n<s.length-1&&(s.splice(n+1,0,r),Rn.Polyline.prototype.setLatLngs.call(this,s),this.needsUpdate=!0,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.cachedProperties.center=void 0,this.cachedProperties.length=void 0,i&&this.updateProperties())})}move(n,r=!0){return on.measure("Line.move",()=>{this.fire("move:start");const i=this.getLatLngs(),s=i.map(o=>Rn.latLng(o.lat+n.lat,o.lng+n.lng));return this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("move",{delta:n,newPositions:s,oldPositions:i}),r&&(this.updateProperties(),this.fire("properties:updated",{shape:this,properties:this.properties}),this.fire("move:end")),this})}getCenter(){return on.measure("Line.getCenter",()=>{if(!this.needsUpdate&&this.cachedProperties.center)return this.cachedProperties.center;const n=this.getLatLngs();if(n.length<2)return n[0]||new Rn.LatLng(0,0);try{const r=n.map(h=>[h.lng,h.lat]),i=uu(r),s=mg(i,{units:"meters"}),o=u1(i,s/2,{units:"meters"}),u=Rn.latLng(o.geometry.coordinates[1],o.geometry.coordinates[0]);return this.cachedProperties.center=u,u}catch(r){console.warn("Error calculating line center with turf.js, using simple method",r);const i=n.reduce((u,h)=>u+h.lat,0)/n.length,s=n.reduce((u,h)=>u+h.lng,0)/n.length,o=new Rn.LatLng(i,s);return this.cachedProperties.center=o,o}})}getSegmentLengths(){return on.measure("Line.getSegmentLengths",()=>{if(!this.needsUpdate&&this.cachedProperties.segmentLengths)return this.cachedProperties.segmentLengths;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];r.push(s.distanceTo(o))}return this.cachedProperties.segmentLengths=r,r})}getSegmentLengthAt(n){return on.measure("Line.getSegmentLengthAt",()=>{const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return 0;const i=r[n],s=r[n+1];return i.distanceTo(s)})}getLengthToVertex(n){return on.measure("Line.getLengthToVertex",()=>{const r=this.getLatLngs();let i=0;if(n<=0||r.length<2)return 0;for(let s=0;s<Math.min(n,r.length-1);s++)i+=r[s].distanceTo(r[s+1]);return i})}getLength(){return on.measure("Line.getLength",()=>{if(!this.needsUpdate&&this.cachedProperties.length)return this.cachedProperties.length;const n=this.getLatLngs();let r=0;for(let i=0;i<n.length-1;i++)r+=n[i].distanceTo(n[i+1]);return this.cachedProperties.length=r,r})}}class Hh extends Rn.Polygon{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});$t(this,"properties");this.properties=on.measure("Polygon.constructor.initProperties",()=>({type:"Polygon",style:{color:r.color||"#3388ff",weight:r.weight||3,opacity:r.opacity||1,fillColor:r.fillColor||"#3388ff",fillOpacity:r.fillOpacity||.2,dashArray:r.dashArray||"",name:r.name||""}})),this.updateProperties(),this.on({add:()=>this.updateProperties(),edit:()=>this.updateProperties(),drag:()=>this.updateProperties()})}updateProperties(){on.measure("Polygon.updateProperties",()=>{var n,r,i;try{const s=this.getLatLngs()[0];if(!s||s.length<3){console.warn("Polygon has less than 3 points, cannot calculate properties");return}const o=s.map(_=>[_.lng,_.lat]);o.push(o[0]);const u=lu([o]),h=i3(u),d=mg(uu([...o]),{units:"meters"}),v=np(u),y=Rn.latLng(v.geometry.coordinates[1],v.geometry.coordinates[0]),x=((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||"";this.properties={type:"Polygon",coordinates:s.map(_=>({lat:_.lat,lng:_.lng})),surface:h,perimeter:d,center:{lat:y.lat,lng:y.lng},vertices:s.length,style:{...this.options,color:this.options.color||"#3388ff",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#3388ff",fillOpacity:this.options.fillOpacity||.2,dashArray:((i=this.options)==null?void 0:i.dashArray)||"",name:x}},this.fire("properties:updated",{shape:this,properties:this.properties})}catch(s){console.error("Failed to calculate polygon properties",s)}})}setName(n){on.measure("Polygon.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return on.measure("Polygon.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}setLatLngs(n){return on.measure("Polygon.setLatLngs",()=>(super.setLatLngs(n),this.updateProperties(),this))}getMidPoints(){return on.measure("Polygon.getMidPoints",()=>{const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let i=0;i<n.length;i++){const s=n[i],o=n[(i+1)%n.length];r.push(Rn.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return r})}moveVertex(n,r){on.measure("Polygon.moveVertex",()=>{const i=this.getLatLngs()[0];n>=0&&n<i.length&&(i[n]=r,Rn.Polygon.prototype.setLatLngs.call(this,[i]))})}addVertex(n,r){on.measure("Polygon.addVertex",()=>{const i=this.getLatLngs()[0];n>=0&&n<i.length&&(i.splice((n+1)%i.length,0,r),Rn.Polygon.prototype.setLatLngs.call(this,[i]))})}move(n){return on.measure("Polygon.move",()=>{const i=this.getLatLngs()[0].map(s=>Rn.latLng(s.lat+n.lat,s.lng+n.lng));return Rn.Polygon.prototype.setLatLngs.call(this,[i]),this})}getCenter(){return on.measure("Polygon.getCenter",()=>{const n=this.getLatLngs()[0];if(!n||n.length===0)return new Rn.LatLng(0,0);try{const r=n.filter(d=>d&&typeof d.lat=="number"&&typeof d.lng=="number"&&!isNaN(d.lat)&&!isNaN(d.lng)&&Math.abs(d.lat)<=90&&Math.abs(d.lng)<=180);if(r.length===0)return console.warn("Aucun point valide dans le polygone pour calculer le centre"),new Rn.LatLng(0,0);const i=r.map(d=>[d.lng,d.lat]);i.push(i[0]);const s=lu([i]),o=np(s),u=o.geometry.coordinates[1],h=o.geometry.coordinates[0];if(typeof u!="number"||typeof h!="number"||isNaN(u)||isNaN(h)||Math.abs(u)>90||Math.abs(h)>180)throw new Error("Centroid calcul invalide");return Rn.latLng(u,h)}catch(r){console.warn("Erreur lors du calcul du centrode avec turf.js, utilisation de la mthode simple",r);let i=0,s=0,o=0;for(const u of n)u&&typeof u.lat=="number"&&typeof u.lng=="number"&&!isNaN(u.lat)&&!isNaN(u.lng)&&Math.abs(u.lat)<=90&&Math.abs(u.lng)<=180&&(i+=u.lat,s+=u.lng,o++);return o===0?(console.error("Impossible de calculer un centre valide pour le polygone"),new Rn.LatLng(0,0)):new Rn.LatLng(i/o,s/o)}})}getSegmentLengths(){return on.measure("Polygon.getSegmentLengths",()=>{const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let i=0;i<n.length;i++){const s=n[i],o=n[(i+1)%n.length];r.push(s.distanceTo(o))}return r})}}const Za=class Za extends ks{constructor(n,r={}){super(n,{...r,color:"#FF4500",weight:4,opacity:.8,interactive:!1,pmIgnore:!0});$t(this,"elevationData",[]);$t(this,"elevationProfile",null);$t(this,"elevationMarker",null);$t(this,"samplePoints",[]);$t(this,"sampleTooltips",[]);$t(this,"isZooming",!1);$t(this,"simpleLine",null);$t(this,"isDestroyed",!1);$t(this,"zoomAnimationTimeout",null);$t(this,"samplePointStyle",{radius:4,color:"#FF4500",fillColor:"#FF4500",fillOpacity:.6,weight:2,opacity:.8});$t(this,"minMaxPointStyle",{radius:6,weight:3,opacity:1,fillOpacity:1});this.properties=on.measure("ElevationLine.constructor.initProperties",()=>({...this.properties,type:"ElevationLine",style:{...this.properties.style||{},name:r.name||""},elevationProfile:null,maxElevation:0,minElevation:0,elevationGain:0,elevationLoss:0,dataSource:"pending",samplePointStyle:this.samplePointStyle,minMaxPointStyle:this.minMaxPointStyle})),this.setupEventListeners()}setupEventListeners(){on.measure("ElevationLine.setupEventListeners",()=>{this.on("move",()=>this.updateElevationProfile()),this.on("add",()=>{this._map&&(this._map.on("zoomstart",this.handleZoomStart,this),this._map.on("zoomend",this.handleZoomEnd,this),this._map.on("zoomanim",this._animateZoom,this))}),this.on("remove",()=>{this.cleanupEventListeners()})})}cleanupEventListeners(){this._map&&(this._map.off("zoomstart",this.handleZoomStart,this),this._map.off("zoomend",this.handleZoomEnd,this),this._map.off("zoomanim",this._animateZoom,this)),this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null)}_animateZoom(n){if(this.isDestroyed||!this._map||!this.getLatLngs().length){console.debug("[ElevationLine] Animation de zoom ignore - ligne dtruite ou carte non disponible");return}this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null);try{this.clearSamplePoints(),this.elevationMarker&&this.elevationMarker.remove();const r=this._path;r&&(r.style.display="none");const i=this.getLatLngs();if(i&&i.length>0&&this._map&&!this.isDestroyed&&(this.simpleLine?this.simpleLine.setLatLngs(i):this.simpleLine=Rn.polyline(i,{color:"#FF4500",weight:3,opacity:.6,smoothFactor:1,interactive:!1}).addTo(this._map),this.simpleLine&&this.simpleLine._path)){const s=this.simpleLine._path.style.transform;this.simpleLine._path.style.transform="",this.zoomAnimationTimeout=setTimeout(()=>{if(this.isDestroyed||!this._map){this.cleanup();return}try{this.simpleLine&&this.simpleLine._path&&(this.simpleLine._path.style.transform=s,this.simpleLine._path.style.display=""),r&&!this.isDestroyed&&(r.style.display=""),this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&(this.redraw(),this.showSamplePoints())}catch(o){console.warn("[ElevationLine] Erreur lors de la restauration aprs animation:",o),this.cleanup()}},300)}}catch(r){console.debug("[ElevationLine] Animation de zoom ignore:",r),this.zoomAnimationTimeout=setTimeout(()=>{if(this.isDestroyed||!this._map){this.cleanup();return}try{this._path&&(this._path.style.display=""),this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&(this.redraw(),this.showSamplePoints())}catch(i){console.error("[ElevationLine] Erreur lors de la restauration aprs animation:",i),this.cleanup()}},300)}}handleZoomStart(){this.isDestroyed||on.measure("ElevationLine.handleZoomStart",()=>{if(!(this.isZooming||!this._map)){this.isZooming=!0;try{this.clearSamplePoints(),this.elevationMarker&&this.elevationMarker.remove();const n=this._path;n&&(n.style.display="none"),this.isDestroyed||this.setStyle({opacity:.3})}catch(n){console.error("[ElevationLine] Error in handleZoomStart:",n),this.cleanup()}}})}handleZoomEnd(){this.isDestroyed||on.measure("ElevationLine.handleZoomEnd",()=>{if(!this._map){this.isZooming=!1;return}try{this.simpleLine&&this._map&&(this.simpleLine.remove(),this.simpleLine=null);const n=this._path;n&&(n.style.display=""),this.isDestroyed||this.setStyle({opacity:.8}),this.zoomAnimationTimeout&&clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=setTimeout(()=>{if(!(this.isDestroyed||!this._map))try{this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&(this.redraw(),this.showSamplePoints())}catch(r){console.warn("[ElevationLine] Erreur lors du redraw aprs zoom:",r),this.cleanup()}},50)}catch(n){console.error("[ElevationLine] Error in handleZoomEnd:",n)}finally{this.isZooming=!1}})}cleanup(){on.measure("ElevationLine.cleanup",()=>{if(this.isZooming=!1,this.clearSamplePoints(),this.hideElevationMarker(),this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null),this.simpleLine&&this._map){try{this.simpleLine.remove()}catch(r){console.error("[ElevationLine] Error removing simpleLine:",r)}this.simpleLine=null}if(this.elevationProfile){try{this.elevationProfile.remove()}catch(r){console.error("[ElevationLine] Error removing elevationProfile:",r)}this.elevationProfile=null}const n=this._path;n&&(n.style.display=""),!this.isDestroyed&&this._map&&this._map.hasLayer(this)&&this.setStyle({opacity:.8})})}calculateOptimalSampleCount(){return on.measure("ElevationLine.calculateOptimalSampleCount",()=>{const n=this.getLength(),r=Math.ceil(n/Za.SAMPLE_DISTANCE);return Math.min(Math.max(r,Za.MIN_SAMPLES),Za.MAX_SAMPLES)})}async fetchElevationData(n=0){return on.measure("ElevationLine.fetchElevationData",async()=>{if(this.getLatLngs().length===0)return;const i=this.getLength();let s="";const o=this.calculateOptimalSampleCount();console.log(`[ElevationLine] Using ${o} sample points for ${i.toFixed(0)}m line`);const u=[];for(let h=0;h<o;h++){const d=h/(o-1)*i,v=this.getPointAtDistance(d);v&&u.push(`${v.lat},${v.lng}`)}s=u.join("|");try{const h=await fetch(`${Za.API_URL}?locations=${s}`);if(!h.ok)throw new Error(`HTTP error ${h.status}`);const d=await h.json();if(!d.results||!Array.isArray(d.results))throw new Error("Invalid API response format");this.elevationData=d.results.map((v,y)=>({distance:y/(o-1)*i,elevation:v.elevation})),this.properties.dataSource="api"}catch(h){if(console.warn(`[ElevationLine] API fetch attempt ${n+1}/${Za.MAX_RETRIES} failed:`,h),n<Za.MAX_RETRIES)return await new Promise(d=>setTimeout(d,Za.RETRY_DELAY)),this.fetchElevationData(n+1);console.warn("[ElevationLine] All API attempts failed, falling back to simulation"),this.simulateElevationData(),this.properties.dataSource="simulation"}this.calculateElevationStatistics()})}simulateElevationData(){on.measure("ElevationLine.simulateElevationData",()=>{const n=this.getLength(),r=this.calculateOptimalSampleCount();this.elevationData=Array.from({length:r},(i,s)=>{const o=s/(r-1)*n,u=100+Math.sin(o/n*Math.PI*2)*50;return{distance:o,elevation:u}})})}calculateElevationStatistics(){on.measure("ElevationLine.calculateElevationStatistics",()=>{if(!this.elevationData.length)return;const n=this.elevationData.map(v=>v.elevation),r=n.length?Math.max(...n):0,i=n.length?Math.min(...n):0;let s=0,o=0,u=0,h=0,d=0;console.log("[ElevationLine][calculateElevationStatistics] Donnes brutes:",{elevationsCount:n.length,maxElevation:r,minElevation:i});for(let v=1;v<this.elevationData.length;v++){const y=this.elevationData[v-1],x=this.elevationData[v],_=x.elevation-y.elevation;_>0?s+=_:o+=Math.abs(_);const P=x.distance-y.distance;if(P>0){const T=_/P*100;u=Math.max(u,Math.abs(T)),h+=Math.abs(T),d++}}console.log("[ElevationLine][calculateElevationStatistics] Calculs intermdiaires:",{gain:s,loss:o,maxSlope:u,averageSlope:d>0?h/d:0}),this.properties={...this.properties,type:"ElevationLine",maxElevation:r,minElevation:i,elevationGain:s,elevationLoss:o,maxSlope:u,averageSlope:d>0?h/d:0,elevationData:this.elevationData,dataSource:this.properties.dataSource,length:this.getLength()},console.log("[ElevationLine][calculateElevationStatistics] Proprits mises  jour:",this.properties)})}showSamplePoints(){on.measure("ElevationLine.showSamplePoints",()=>{if(this.clearSamplePoints(),!this.elevationData.length)return;const n=this.elevationData.map(s=>s.elevation),r=Math.max(...n),i=Math.min(...n);this.elevationData.forEach(s=>{const o=this.getPointAtDistance(s.distance);if(!o)return;const u=s.elevation===i,h=s.elevation===r;let d={...this.samplePointStyle};u?d={...d,...this.minMaxPointStyle,color:"#DC2626",fillColor:"#DC2626"}:h&&(d={...d,...this.minMaxPointStyle,color:"#059669",fillColor:"#059669"});const v=Rn.circleMarker(o,d),y=Rn.tooltip({permanent:!1,direction:"top",className:"elevation-tooltip",offset:[0,-10]});let x=`
          Distance: ${this.formatDistance(s.distance)}<br>
          Altitude: ${this.formatElevation(s.elevation)}
        `;u&&(x+="<br><strong>Point le plus bas</strong>"),h&&(x+="<br><strong>Point le plus haut</strong>"),y.setContent(x),v.on("mouseover",()=>{v.setStyle({...d,radius:d.radius+2,fillOpacity:1}),v.bindTooltip(y).openTooltip()}),v.on("mouseout",()=>{v.setStyle(d),v.closeTooltip()}),this._map&&(v.addTo(this._map),this.samplePoints.push(v),this.sampleTooltips.push(y))})})}clearSamplePoints(){on.measure("ElevationLine.clearSamplePoints",()=>{this.samplePoints.forEach(n=>n.remove()),this.samplePoints=[],this.sampleTooltips.forEach(n=>n.remove()),this.sampleTooltips=[]})}formatDistance(n){return on.measure("ElevationLine.formatDistance",()=>n>=1e3?`${(n/1e3).toFixed(2)} km`:`${n.toFixed(0)} m`)}formatElevation(n){return on.measure("ElevationLine.formatElevation",()=>`${n.toFixed(0)} m`)}onAdd(n){return on.measure("ElevationLine.onAdd",()=>(super.onAdd(n),this.showSamplePoints(),this))}onRemove(n){return this.isDestroyed=!0,this.cleanupEventListeners(),this.cleanup(),super.onRemove(n)}async updateElevationProfile(){return on.measure("ElevationLine.updateElevationProfile",async()=>{try{if(this.properties.elevationData&&this.properties.dataSource==="restored"){this.elevationData=this.properties.elevationData,this.calculateElevationStatistics(),this._map&&this._map.hasLayer(this)&&this.showSamplePoints(),this.fire("elevation:updated",{shape:this,elevationData:this.elevationData,properties:this.properties});return}await this.fetchElevationData(),this.updateProperties(),this._map&&this._map.hasLayer(this)&&this.showSamplePoints(),this.fire("elevation:updated",{shape:this,elevationData:this.elevationData,properties:this.properties})}catch(n){console.error("[ElevationLine] Erreur lors de la mise  jour du profil d'lvation:",n),this.properties.dataSource="error"}})}updateProperties(){on.measure("ElevationLine.updateProperties",()=>{if(super.updateProperties(),this.elevationData&&this.elevationData.length>0){const n=this.elevationData.map(x=>x.elevation),r=Math.max(...n),i=Math.min(...n);let s=0,o=0,u=0,h=0,d=0;for(let x=1;x<this.elevationData.length;x++){const _=this.elevationData[x-1],P=this.elevationData[x],T=P.elevation-_.elevation;T>0?s+=T:o+=Math.abs(T);const U=P.distance-_.distance;if(U>0){const N=T/U*100;u=Math.max(u,Math.abs(N)),h+=Math.abs(N),d++}}const y=this.getLatLngs().map(x=>({lat:x.lat,lng:x.lng}));this.properties={...this.properties,type:"ElevationLine",coordinates:y,elevationData:this.elevationData.map(x=>({distance:x.distance,elevation:x.elevation})),maxElevation:r,minElevation:i,elevationGain:s,elevationLoss:o,maxSlope:u,averageSlope:d>0?h/d:0,dataSource:this.properties.dataSource||"api"},this.fire("properties:updated",{shape:this,properties:this.properties})}})}getElevationData(){return on.measure("ElevationLine.getElevationData",()=>this.elevationData)}showElevationAt(n){on.measure("ElevationLine.showElevationAt",()=>{if(!(!this.elevationData.length||!this._map))try{const r=this.elevationData.reduce((s,o)=>Math.abs(o.distance-n)<Math.abs(s.distance-n)?o:s),i=this.getPointAtDistance(n);if(!i)return;this.elevationMarker?(this.elevationMarker.setLatLng(i),this.elevationMarker.setTooltipContent(`Distance: ${this.formatDistance(r.distance)}<br>Altitude: ${this.formatElevation(r.elevation)}`)):(this.elevationMarker=Rn.circleMarker(i,{radius:6,color:"#FF4500",fillColor:"#FF4500",fillOpacity:1,weight:2,className:"elevation-marker"}),this.elevationMarker.bindTooltip(`Distance: ${this.formatDistance(r.distance)}<br>Altitude: ${this.formatElevation(r.elevation)}`,{permanent:!0,direction:"top",offset:[0,-10],className:"elevation-marker-tooltip"}),this._map&&this._map.hasLayer(this)&&this.elevationMarker.addTo(this._map)),this.fire("elevation:show",{distance:n,elevation:r.elevation,latLng:i})}catch(r){console.error("[ElevationLine] Erreur lors de l'affichage de l'lvation:",r),this.hideElevationMarker()}})}hideElevationMarker(){on.measure("ElevationLine.hideElevationMarker",()=>{this.elevationMarker&&(this.elevationMarker.remove(),this.elevationMarker=null)})}getPointAtDistance(n){return on.measure("ElevationLine.getPointAtDistance",()=>{try{const i=this.getLatLngs().map(u=>[u.lng,u.lat]),s=uu(i),o=u1(s,n,{units:"meters"});return Rn.latLng(o.geometry.coordinates[1],o.geometry.coordinates[0])}catch(r){return console.error("Error calculating point at distance",r),null}})}moveVertex(n,r,i=!1){on.measure("ElevationLine.moveVertex",()=>{super.moveVertex(n,r,!1),this.properties.type="ElevationLine",i&&this.updateElevationProfile()})}addVertex(n,r,i=!1){on.measure("ElevationLine.addVertex",()=>{console.warn("[ElevationLine] Tentative d'ajout de vertex ignore - non autoris pour un profil altimtrique")})}setLatLngs(n){return on.measure("ElevationLine.setLatLngs",()=>(super.setLatLngs(n),this.properties.type="ElevationLine",this.updateElevationProfile(),this))}move(n,r=!0){return on.measure("ElevationLine.move",()=>(super.move(n,!1),this.properties.type="ElevationLine",r&&this.updateElevationProfile(),this))}setSamplePointStyle(n){on.measure("ElevationLine.setSamplePointStyle",()=>{this.samplePointStyle={...this.samplePointStyle,...n},this.properties.samplePointStyle=this.samplePointStyle,this._map&&this.showSamplePoints()})}setMinMaxPointStyle(n){on.measure("ElevationLine.setMinMaxPointStyle",()=>{this.minMaxPointStyle={...this.minMaxPointStyle,...n},this.properties.minMaxPointStyle=this.minMaxPointStyle,this._map&&this.showSamplePoints()})}setName(n){on.measure("ElevationLine.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return on.measure("ElevationLine.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}};$t(Za,"API_URL","https://api.open-elevation.com/api/v1/lookup"),$t(Za,"RETRY_DELAY",2e3),$t(Za,"MAX_RETRIES",3),$t(Za,"SAMPLE_DISTANCE",100),$t(Za,"MIN_SAMPLES",10),$t(Za,"MAX_SAMPLES",50);let nf=Za;var g0,zD=new Uint8Array(16);function UD(){if(!g0&&(g0=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!g0))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return g0(zD)}const $D=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function VD(e){return typeof e=="string"&&$D.test(e)}var la=[];for(var iv=0;iv<256;++iv)la.push((iv+256).toString(16).substr(1));function HD(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(la[e[t+0]]+la[e[t+1]]+la[e[t+2]]+la[e[t+3]]+"-"+la[e[t+4]]+la[e[t+5]]+"-"+la[e[t+6]]+la[e[t+7]]+"-"+la[e[t+8]]+la[e[t+9]]+"-"+la[e[t+10]]+la[e[t+11]]+la[e[t+12]]+la[e[t+13]]+la[e[t+14]]+la[e[t+15]]).toLowerCase();if(!VD(n))throw TypeError("Stringified UUID is invalid");return n}function GD(e,t,n){e=e||{};var r=e.random||(e.rng||UD)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,HD(r)}var Ko=(e=>(e.PRIVATE="private",e.COMPANY="company",e.EMPLOYEE="employee",e.VISITOR="visitor",e))(Ko||{});const qD=Mp("notes",()=>{const e=Gt([{id:"a-faire",title:" faire",color:"#F59E0B",order:-1,isDefault:!0},{id:"en-cours",title:"En cours",color:"#3B82F6",order:0,isDefault:!0},{id:"termine",title:"Termin",color:"#10B981",order:1,isDefault:!0}]),t=Gt([{id:1,title:"Point d'irrigation principal",description:"Point de dpart du systme d'irrigation",location:[43.6047,1.4442],columnId:"en-cours",order:0,createdAt:"2023-05-15T10:30:00Z",updatedAt:"2023-05-15T10:30:00Z",accessLevel:"company",style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[{id:1,text:"Vrifier le dbit  cet endroit",createdAt:"2023-05-15T11:30:00Z",userId:1,userName:"Jean Dupont",userRole:"ENTREPRISE"},{id:2,text:"Dbit vrifi, tout est normal",createdAt:"2023-05-16T09:45:00Z",userId:2,userName:"Marie Martin",userRole:"SALARIE"}],photos:[{id:1,url:"https://via.placeholder.com/300x200?text=Photo+irrigation",createdAt:"2023-05-15T10:35:00Z",caption:"Vue du point d'irrigation"}]},{id:2,title:"Zone  problme",description:"Fuite dtecte dans cette zone",location:[43.6057,1.4452],columnId:"en-cours",order:1,createdAt:"2023-05-16T14:20:00Z",updatedAt:"2023-05-16T14:20:00Z",accessLevel:"employee",style:{color:"#EF4444",weight:2,opacity:1,fillColor:"#EF4444",fillOpacity:.6,radius:8},comments:[],photos:[]},{id:3,title:"Vanne de contrle",description:"Vanne principale pour le secteur nord",location:[43.6067,1.4462],columnId:"termine",order:0,createdAt:"2023-05-17T09:15:00Z",updatedAt:"2023-05-17T09:15:00Z",accessLevel:"visitor",style:{color:"#10B981",weight:2,opacity:1,fillColor:"#10B981",fillOpacity:.6,radius:8},comments:[],photos:[]}]),n=ir(()=>F=>e.value.find(Y=>Y.id===F)),r=ir(()=>F=>{const Y=e.value.find($=>$.id===F);return Y?Y.color:"#6B7280"}),i=ir(()=>F=>t.value.filter(Y=>Y.columnId===F).sort((Y,$)=>Y.order-$.order)),s=ir(()=>e.value.find(F=>F.isDefault)||e.value[0]),o=ir(()=>[...e.value].sort((F,Y)=>F.order-Y.order)),u=ir(()=>F=>{const Y=Da();if(!Y.user)return!1;if(Y.isAdmin)return!0;switch(F.accessLevel){case"private":return!0;case"company":return Y.isAdmin||Y.isEntreprise;case"employee":return Y.isAdmin||Y.isEntreprise||Y.isSalarie;case"visitor":return Y.isAdmin||Y.isEntreprise||Y.isSalarie||Y.isVisiteur;default:return!1}}),h=ir(()=>t.value.filter(F=>u.value(F))),d=ir(()=>F=>h.value.filter(Y=>Y.columnId===F).sort((Y,$)=>Y.order-$.order));function v(F,Y="#6B7280"){const $=e.value.reduce((D,k)=>Math.max(D,k.order),-1);e.value.push({id:GD(),title:F,color:Y,order:$+1})}function y(F,Y){const $=e.value.findIndex(D=>D.id===F);$!==-1&&(e.value[$]={...e.value[$],...Y})}function x(F){const Y=e.value.find(D=>D.id===F);if(!Y||Y.isDefault)return;const $=s.value;t.value.forEach(D=>{D.columnId===F&&(D.columnId=$.id)}),e.value=e.value.filter(D=>D.id!==F)}function _(F){F.forEach((Y,$)=>{const D=e.value.find(k=>k.id===Y);D&&(D.order=$)})}function P(F){const Y=t.value.length>0?Math.max(...t.value.map(W=>W.id))+1:1,$=new Date().toISOString(),D=t.value.filter(W=>W.columnId===F.columnId),k=D.length>0?Math.max(...D.map(W=>W.order))+1:0,I=F.accessLevel||"private";return t.value.push({...F,id:Y,order:k,accessLevel:I,createdAt:$,updatedAt:$}),Y}function T(F,Y){const $=t.value.findIndex(D=>D.id===F);if($!==-1){const D={...t.value[$],...Y,updatedAt:new Date().toISOString()};t.value[$]=D}}function U(F){t.value=t.value.filter(Y=>Y.id!==F)}function N(F,Y){const $=t.value.findIndex(D=>D.id===F);if($!==-1){const D=t.value[$];if(D.columnId!==Y){const I=t.value.filter(K=>K.columnId===Y),W=I.length>0?Math.max(...I.map(K=>K.order))+1:0,G={...D,columnId:Y,order:W,updatedAt:new Date().toISOString()};t.value[$]=G}else t.value[$]={...t.value[$],updatedAt:new Date().toISOString()}}}function j(F,Y){Y.forEach(($,D)=>{const k=t.value.findIndex(I=>I.id===$&&I.columnId===F);k!==-1&&(t.value[k]={...t.value[k],order:D,updatedAt:new Date().toISOString()})})}function Z(F){switch(F){case"private":return"Priv";case"company":return"Entreprise";case"employee":return"Salaris";case"visitor":return"Visiteurs";default:return"Inconnu"}}function J(F,Y){const $=t.value.findIndex(G=>G.id===F);if($===-1)return;const D=Da();if(!D.user||!D.isEntreprise&&!D.isAdmin)return;const k=t.value[$];k.comments||(k.comments=[]);const I=k.comments.length>0?Math.max(...k.comments.map(G=>G.id))+1:1,W={id:I,text:Y,createdAt:new Date().toISOString(),userId:D.user.id,userName:D.user.username,userRole:D.user.user_type};return k.comments.push(W),k.updatedAt=new Date().toISOString(),t.value[$]={...k},I}function le(F,Y){const $=t.value.findIndex(k=>k.id===F);if($===-1||!t.value[$].comments)return;const D=t.value[$];D.comments=D.comments.filter(k=>k.id!==Y),D.updatedAt=new Date().toISOString(),t.value[$]={...D}}function he(F,Y){const $=t.value.findIndex(W=>W.id===F);if($===-1)return;const D=t.value[$];D.photos||(D.photos=[]);const k=D.photos.length>0?Math.max(...D.photos.map(W=>W.id))+1:1,I={id:k,url:Y.url,caption:Y.caption,createdAt:new Date().toISOString()};return D.photos.push(I),D.updatedAt=new Date().toISOString(),t.value[$]={...D},k}function Le(F,Y){const $=t.value.findIndex(k=>k.id===F);if($===-1||!t.value[$].photos)return;const D=t.value[$];D.photos=D.photos.filter(k=>k.id!==Y),D.updatedAt=new Date().toISOString(),t.value[$]={...D}}function V(F,Y,$){const D=t.value.findIndex(W=>W.id===F);if(D===-1||!t.value[D].photos)return;const k=t.value[D],I=k.photos.findIndex(W=>W.id===Y);I!==-1&&(k.photos[I].caption=$,k.updatedAt=new Date().toISOString(),t.value[D]={...k})}return{columns:e,notes:t,getColumnById:n,getColumnColor:r,getNotesByColumn:i,getDefaultColumn:s,getSortedColumns:o,hasAccessToNote:u,getAccessibleNotes:h,getAccessibleNotesByColumn:d,getAccessLevelLabel:Z,addColumn:v,updateColumn:y,removeColumn:x,reorderColumns:_,addNote:P,updateNote:T,removeNote:U,moveNote:N,reorderNotes:j,addComment:J,removeComment:le,addPhoto:he,removePhoto:Le,updatePhotoCaption:V}});class WD extends Rt.CircleMarker{constructor(n,r={}){const i={radius:r.radius||8,color:r.color||"#3B82F6",weight:r.weight||2,fillColor:r.fillColor||"#3B82F6",fillOpacity:r.fillOpacity||.6};super(n,i);$t(this,"properties");this.properties={type:"Note",name:r.name||"Note golocalise",description:r.description||"Double-cliquez pour diter",columnId:r.columnId||"en-cours",accessLevel:r.accessLevel||Ko.PRIVATE,style:{color:i.color,weight:i.weight,fillColor:i.fillColor,fillOpacity:i.fillOpacity,radius:i.radius}},this.bindPopup(this.createPopupContent()),this.on("dblclick",this.onDoubleClick)}createPopupContent(){const n=document.createElement("div");n.className="geo-note-popup";const r=document.createElement("div");r.className="geo-note-title",r.textContent=this.properties.name,n.appendChild(r);const i=document.createElement("div");i.className="geo-note-column-badge",i.textContent=this.properties.columnId,i.style.backgroundColor=this.getColumnColor(this.properties.columnId),n.appendChild(i);const s=document.createElement("div");s.className="geo-note-access-badge",s.textContent=this.getAccessLevelLabel(this.properties.accessLevel),s.style.backgroundColor=this.getAccessLevelColor(this.properties.accessLevel),n.appendChild(s);const o=document.createElement("div");o.className="geo-note-description",o.textContent=this.properties.description,n.appendChild(o);const u=document.createElement("button");return u.className="geo-note-edit-button",u.textContent="diter",u.onclick=h=>{h.stopPropagation(),this.editNote()},n.appendChild(u),n}getColumnColor(n){return{"en-cours":"#3B82F6",termine:"#10B981"}[n]||"#6B7280"}getAccessLevelLabel(n){switch(n){case Ko.PRIVATE:return"Priv";case Ko.COMPANY:return"Entreprise";case Ko.EMPLOYEE:return"Salaris";case Ko.VISITOR:return"Visiteurs";default:return"Inconnu"}}getAccessLevelColor(n){switch(n){case Ko.PRIVATE:return"#9CA3AF";case Ko.COMPANY:return"#EF4444";case Ko.EMPLOYEE:return"#F59E0B";case Ko.VISITOR:return"#10B981";default:return"#6B7280"}}onDoubleClick(n){Rt.DomEvent.stopPropagation(n),this.editNote()}editNote(){const n=document.createElement("form");n.className="geo-note-edit-form";const r=document.createElement("label");r.textContent="Titre:",n.appendChild(r);const i=document.createElement("input");i.type="text",i.value=this.properties.name,n.appendChild(i);const s=document.createElement("label");s.textContent="Description:",n.appendChild(s);const o=document.createElement("textarea");o.value=this.properties.description,n.appendChild(o);const u=document.createElement("label");u.textContent="tat:",n.appendChild(u);const h=document.createElement("select");[{id:"en-cours",title:"En cours"},{id:"termine",title:"Termin"}].forEach(P=>{const T=document.createElement("option");T.value=P.id,T.textContent=P.title,T.selected=P.id===this.properties.columnId,h.appendChild(T)}),n.appendChild(h);const v=document.createElement("label");v.textContent="Niveau d'accs:",n.appendChild(v);const y=document.createElement("select");[{id:Ko.PRIVATE,title:"Priv"},{id:Ko.COMPANY,title:"Entreprise"},{id:Ko.EMPLOYEE,title:"Salaris"},{id:Ko.VISITOR,title:"Visiteurs"}].forEach(P=>{const T=document.createElement("option");T.value=P.id,T.textContent=P.title,T.selected=P.id===this.properties.accessLevel,y.appendChild(T)}),n.appendChild(y);const _=document.createElement("button");_.type="button",_.textContent="Enregistrer",_.onclick=()=>{this.properties.name=i.value,this.properties.description=o.value,this.properties.columnId=h.value,this.properties.accessLevel=y.value,this.updateProperties(),this.closePopup(),this.bindPopup(this.createPopupContent()),this.openPopup(),this.fire("note:updated",{id:this._leaflet_id,properties:this.properties})},n.appendChild(_),this.unbindPopup(),this.bindPopup(n),this.openPopup()}updateProperties(){this.properties.style={color:this.options.color,weight:this.options.weight,fillColor:this.options.fillColor,fillOpacity:this.options.fillOpacity,radius:this.options.radius}}setNoteStyle(n){n.color&&(this.options.color=n.color),n.weight&&(this.options.weight=n.weight),n.fillColor&&(this.options.fillColor=n.fillColor),n.fillOpacity!==void 0&&(this.options.fillOpacity=n.fillOpacity),n.radius&&(this.options.radius=n.radius),this.setStyle(this.options),this.updateProperties()}}const vg=(e,t)=>{if(!e||typeof e!="string"||!e.startsWith("#"))return`rgba(0, 0, 0, ${t})`;const n=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16);return`rgba(${n}, ${r}, ${i}, ${t})`},vb=(e,t)=>{e.style.fontSize=t.fontSize,e.style.color=t.color,e.style.backgroundColor=vg(t.backgroundColor,t.backgroundOpacity),t.hasBorder?e.style.border=`${t.borderWidth} solid ${vg(t.borderColor,t.borderOpacity)}`:e.style.border="none",e.style.padding=t.padding,e.style.borderRadius=t.borderRadius},fl=e=>{document.querySelectorAll(".drawing-help-message").forEach(r=>r.remove());const n=Rt.DomUtil.create("div","drawing-help-message");return n.innerHTML=e,n.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(n),n};function yb(e,t,n){const r=156543.03392*Math.cos(t*Math.PI/180)/Math.pow(2,n);return e/r}const Ei=(e,t="m",n="")=>{let r,i;return t==="m"?e>=1e4?(r=(e/1e4).toFixed(2),i="ha"):(r=e.toFixed(2),i="m"):t==="m"?e>=1e3?(r=(e/1e3).toFixed(2),i="km"):(r=e.toFixed(2),i="m"):(r=e.toFixed(2),i=t),n?`${n}: ${r} ${i}`:`${r} ${i}`},ZD=e=>({...e,clientX:e.clientX,clientY:e.clientY,button:e.button||0,buttons:e.buttons||0,altKey:e.altKey||!1}),KD=(e,t)=>{let n;return function(...r){window.clearTimeout(n),n=window.setTimeout(()=>e.apply(this,r),t)}},Cf=(e,t)=>{let n=0;return function(...r){const i=Date.now();if(!(i-n<t))return n=i,e.apply(this,r)}};function YD(){const e=Gt(null),t=Gt(null),n=Gt(null),r=Gt(null),i=Gt(""),s=Gt(null),o=Gt(!1),u=Gt(null);window.addEventListener("clearControlPoints",()=>{s.value=null,n.value&&n.value.clearLayers(),r.value&&r.value.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(B=>B.remove()),document.querySelectorAll(".drawing-help-message").forEach(B=>B.remove())}),wh(()=>{window.removeEventListener("clearControlPoints",()=>{}),e.value&&(e.value.remove(),e.value=null)});const h=(B,te="Double-cliquez pour diter")=>{const se={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0,rotation:0,physicalSize:2},ae=(de,ze)=>{var Ve;const Ke=((Ve=e.value)==null?void 0:Ve.getZoom())||14,Ge=B.lat,Qe=yb(ze.physicalSize,Ge,Ke);return`<div class="text-container" style="width:${Qe}px;height:${Qe}px;transform:rotate(${ze.rotation}deg)">
        <div class="text-annotation" style="font-size:${Qe*.2}px;color:${ze.color};background-color:${vg(ze.backgroundColor,ze.backgroundOpacity)};border:${ze.hasBorder?ze.borderWidth+" solid "+vg(ze.borderColor,ze.borderOpacity):"none"};padding:${ze.padding};border-radius:${ze.borderRadius}">${de}</div>
        <div class="text-controls"><div class="control-button rotate"></div><div class="control-button move"></div></div>
      </div>`},we=()=>{if(!e.value)return;const de=Q.getIcon(),ze={html:ae(Q.properties.text,Q.properties.style),className:de.options.className};Q.setIcon(Rt.divIcon(ze))},fe=Rt.divIcon({html:ae(te,se),className:"text-container",iconSize:[40,40],iconAnchor:[20,20]}),Q=Rt.marker(B,{icon:fe,draggable:!1,pmIgnore:!0});Q.properties={type:"text",text:te,style:{...se}},e.value&&(e.value.on("zoomend",we),Q.on("remove",()=>{var de;(de=e.value)==null||de.off("zoomend",we)})),we();let ue=!1,Re=!1,Me=0,Ze=0;const oe=de=>{if(!e.value)return;const ze=de.target;if(ze.classList.contains("rotate")){ue=!0;const Ke=Q.getLatLng(),Ge=e.value.mouseEventToLatLng(de);Me=Math.atan2(Ge.lat-Ke.lat,Ge.lng-Ke.lng)*180/Math.PI,Ze=Q.properties.style.rotation||0}else ze.classList.contains("move")&&(Re=!0);document.addEventListener("mousemove",me),document.addEventListener("mouseup",pe)},me=de=>{if(!(!Re||!e.value)){if(ue){const ze=Q.getLatLng(),Ke=e.value.mouseEventToLatLng(de),Ge=Math.atan2(Ke.lat-ze.lat,Ke.lng-ze.lng)*180/Math.PI,Qe=(Ze+(Ge-Me))%360;Q.properties.style.rotation=Qe;const Ve=Q.getIcon(),ot={html:ae(Q.properties.text,Q.properties.style),className:Ve.options.className};Q.setIcon(Rt.divIcon(ot))}else if(Re){const ze=ZD(de),Ke=e.value.mouseEventToLatLng(ze);Q.setLatLng(Ke)}}},pe=()=>{ue=!1,Re=!1,document.removeEventListener("mousemove",me),document.removeEventListener("mouseup",pe)};return Q.on("add",()=>{const de=Q.getElement();de&&de.querySelectorAll(".control-button").forEach(Ke=>{Ke.addEventListener("mousedown",oe)})}),Q.on("remove",()=>{const de=Q.getElement();de&&de.querySelectorAll(".control-button").forEach(Ke=>{Ke.removeEventListener("mousedown",oe)})}),Q.on("dblclick",de=>{var ot;Rt.DomEvent.stopPropagation(de);const ze=(ot=Q.getElement())==null?void 0:ot.querySelector(".text-annotation");if(!ze)return;ze.contentEditable="true",ze.focus(),ze.classList.add("editing");const Ke=window.getSelection(),Ge=document.createRange();Ge.selectNodeContents(ze),Ke==null||Ke.removeAllRanges(),Ke==null||Ke.addRange(Ge);const Qe=()=>{ze.contentEditable="false",ze.classList.remove("editing");const At=ze.innerText.trim();if(At){Q.properties.text=At;const Et=Q.getIcon(),zt={html:ae(At,Q.properties.style),className:Et.options.className};Q.setIcon(Rt.divIcon(zt))}ze.removeEventListener("blur",Qe),ze.removeEventListener("keydown",Ve)},Ve=At=>{At.key==="Enter"&&!At.shiftKey&&(At.preventDefault(),Qe())};ze.addEventListener("blur",Qe),ze.addEventListener("keydown",Ve)}),Q},d=(B,te)=>{const se=Rt.DomUtil.create("div","measure-tooltip");if(se.innerHTML=te,se.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(se),e.value){const ae=e.value.latLngToContainerPoint(B);se.style.left=`${ae.x+10}px`,se.style.top=`${ae.y-25}px`}return se},v=Cf((B,te,se)=>{if(B&&(B.innerHTML=se,e.value)){const ae=e.value.latLngToContainerPoint(te);B.style.left=`${ae.x+10}px`,B.style.top=`${ae.y-25}px`}},100),y=(B,te,se)=>{B.on("mouseover",()=>{const ae=d(B.getLatLng(),se());B.measureDiv=ae}),B.on("mousemove",ae=>{B.measureDiv&&e.value&&v(B.measureDiv,ae.latlng,se())}),B.on("mouseout",()=>{B.measureDiv&&(B.measureDiv.remove(),B.measureDiv=void 0)})};let x=[];const _=()=>{var B;x.cleanup&&x.cleanup(),n.value&&n.value.clearLayers(),x=[],(B=r.value)==null||B.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(te=>te.remove()),t.value&&t.value.getLayers().forEach(te=>{te instanceof Aa&&te.clearHelperPoints()})},P=(B,te="#2563EB")=>{const se=Rt.circleMarker(B,{radius:6,color:te,fillColor:te,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return n.value&&n.value.addLayer(se),se},T=(B,te)=>{var ae,we,fe,Q,ue,Re;console.log("Input layer:",{type:te,instanceof:{Circle:B instanceof Rt.Circle,Rectangle:B instanceof Rt.Rectangle,Polygon:B instanceof Rt.Polygon,Polyline:B instanceof Rt.Polyline,ElevationLine:B instanceof nf,Line:B instanceof ks},options:B.options});const se={type:te,style:B.options||{}};try{if(B instanceof Rt.Circle){const Me=B.getRadius();se.radius=Me,se.diameter=Me*2,se.surface=Math.PI*Math.pow(Me,2),se.perimeter=2*Math.PI*Me,se.center=B.getLatLng()}else if(B instanceof Rt.Rectangle){const Me=B.getBounds(),Ze=Me.getNorthEast(),oe=Me.getSouthWest(),me=uu([[oe.lng,oe.lat],[Ze.lng,oe.lat]]),pe=uu([[oe.lng,oe.lat],[oe.lng,Ze.lat]]),de=Dh(me,{units:"meters"}),ze=Dh(pe,{units:"meters"});se.width=de,se.height=ze,se.surface=de*ze,se.perimeter=2*(de+ze),se.dimensions={width:de,height:ze}}else if(B instanceof Rt.Polygon)try{const Ze=B.getLatLngs()[0].map(me=>[me.lng,me.lat]);Ze.push(Ze[0]);const oe=lu([Ze]);se.surface=nc(oe),se.perimeter=Dh(uu(Ze),{units:"meters"})}catch(Me){console.error("Erreur lors du calcul des proprits du polygone",Me)}else if(B instanceof Rt.Polyline&&!(B instanceof Rt.Polygon))try{const Me=B.getLatLngs();let Ze=0;for(let oe=1;oe<Me.length;oe++)Ze+=Me[oe].distanceTo(Me[oe-1]);se.length=Ze}catch(Me){console.error("Erreur lors du calcul de la longueur de la ligne",Me)}se.style={...se.style,color:((ae=B.options)==null?void 0:ae.color)||"#3388ff",weight:((we=B.options)==null?void 0:we.weight)||3,opacity:((fe=B.options)==null?void 0:fe.opacity)||1,fillColor:((Q=B.options)==null?void 0:Q.fillColor)||"#3388ff",fillOpacity:((ue=B.options)==null?void 0:ue.fillOpacity)||.2,dashArray:((Re=B.options)==null?void 0:Re.dashArray)||""}}catch(Me){console.error("Error calculating shape properties:",Me)}return se},U=(B,te=2)=>{var Q;if(!e.value){console.warn("Map is not available for text size update");return}const se=e.value.getZoom(),ae=B.getLatLng().lat,we=yb(te,ae,se),fe=(Q=B.getElement())==null?void 0:Q.querySelector(".text-annotation");fe&&(B.properties.style.fontSize=`${we}px`,B.properties.physicalWidth=te,B.properties.physicalHeight=te,vb(fe,B.properties.style))},N=(B,te,se)=>{const ae=Rt.map(B).setView(te,se);e.value=ae,Rt.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:5}).addTo(ae);const we=new Rt.FeatureGroup;return we.addTo(ae),t.value=we,n.value=Rt.featureGroup().addTo(ae),r.value=Rt.featureGroup().addTo(ae),ae.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:we,snapLayers:[we,r.value],templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),ae.on("pm:drawstart",fe=>{o.value=!0,fe.shape==="Circle"&&i.value==="Semicircle"&&(ae.getContainer().style.cursor="crosshair")}),ae.on("pm:drawend",()=>{o.value=!1,ae.getContainer().style.cursor="",s.value&&fl("Cliquez sur la forme pour afficher les points de contrle")}),ae.on("pm:create",Ce),we.on("click",fe=>{var ue,Re,Me,Ze,oe,me,pe,de,ze,Ke,Ge,Qe,Ve,ot,At;Rt.DomEvent.stopPropagation(fe);const Q=fe.layer;if(Q.name&&!((ue=Q.properties)!=null&&ue.name)?(Q.properties||(Q.properties={}),Q.properties.name=Q.name):(Re=Q.properties)!=null&&Re.name&&!Q.name&&(Q.name=Q.properties.name),console.log("[featureGroup click] tat du nom:",{directName:Q.name,propertiesName:(Me=Q.properties)==null?void 0:Me.name,fullProperties:Q.properties}),(Ze=r.value)==null||Ze.clearLayers(),_(),s.value=Q,Q instanceof Df)F(Q);else if(Q instanceof Rt.Circle){console.log("[useMapDrawing] Cration du cercle personnalis:",{propertyDescriptor:Object.getOwnPropertyDescriptor(Q,"name"),directName:Q.name,propertiesName:(oe=Q.properties)==null?void 0:oe.name,styleNameBeforeTransfer:(pe=(me=Q.properties)==null?void 0:me.style)==null?void 0:pe.name,nameIsEnumerable:Object.keys(Q).includes("name"),allProperties:Object.keys(Q.properties||{}),_dbId:Q._dbId});const Et=Q.name,zt=(de=Q.properties)==null?void 0:de.name,Kt=(Ke=(ze=Q.properties)==null?void 0:ze.style)==null?void 0:Ke.name,dn=Q._dbId,mn=new Df(Q.getLatLng(),{...Q.options,radius:Q.getRadius()});Q.properties?mn.properties={...Q.properties||{}}:mn.updateProperties();const et=Et||zt||Kt;et&&(mn.properties.name=et,mn.properties.style||(mn.properties.style={}),mn.properties.style.name=et,mn.name=et),dn&&(mn._dbId=dn),console.log("[useMapDrawing] Cercle aprs conversion:",{name:mn.name,propertiesName:mn.properties.name,stylePropertyName:(Ge=mn.properties.style)==null?void 0:Ge.name,allProperties:Object.keys(mn.properties||{})}),(Qe=t.value)==null||Qe.removeLayer(Q),(Ve=t.value)==null||Ve.addLayer(mn),s.value=mn,F(mn)}else if(Q instanceof Aa)Y(Q);else if(Q instanceof Rt.Rectangle){const Et=new Aa(Q.getBounds(),{...Q.options});Et.updateProperties(),(ot=t.value)==null||ot.removeLayer(Q),(At=t.value)==null||At.addLayer(Et),s.value=Et,Y(Et)}else Q instanceof Rt.Polygon?D(Q):(Q instanceof ks||Q instanceof Rt.Polyline)&&$(Q)}),ae.on("pm:edit",fe=>{var ue,Re,Me;console.log("[pm:edit] Dbut",{layer:fe.layer,currentProperties:fe.layer.properties});const Q=fe.layer;if(Q){const Ze=((ue=Q.properties)==null?void 0:ue.type)||"unknown";if(Le(Q,Ze),console.log("[pm:edit] Aprs updateLayerProperties",{updatedProperties:Q.properties,selectedShape:s.value}),Q instanceof Df)F(Q);else if(Q instanceof Aa)Y(Q);else if(Q instanceof Rt.Rectangle){const oe=new Aa(Q.getBounds(),{...Q.options});oe.updateProperties(),(Re=t.value)==null||Re.removeLayer(Q),(Me=t.value)==null||Me.addLayer(oe),s.value=oe,Y(oe)}else Q instanceof Rt.Polygon?D(Q):Q instanceof ks?(Q.updateProperties(),Le(Q,"Line"),$(Q)):Q instanceof Rt.Polyline&&$(Q)}}),ae.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(fe=>fe.remove()),fl("Dplacez la forme  l'endroit souhait")}),ae.on("pm:dragend",fe=>{var ue,Re,Me;console.log("[pm:dragend] Dbut",{layer:fe.layer,currentProperties:fe.layer.properties});const Q=fe.layer;if(Q){const Ze=((ue=Q.properties)==null?void 0:ue.type)||"unknown";if(Q instanceof Rt.Rectangle&&!(Q instanceof Aa)){const oe=new Aa(Q.getBounds(),{...Q.options});oe.updateProperties(),(Re=t.value)==null||Re.removeLayer(Q),(Me=t.value)==null||Me.addLayer(oe),s.value=oe,Y(oe)}else Q instanceof ks?(Q.updateProperties(),Le(Q,"Line"),$(Q)):Le(Q,Ze);console.log("[pm:dragend] Aprs updateLayerProperties",{updatedProperties:Q.properties,selectedShape:s.value})}setTimeout(()=>{fl("Cliquez sur la forme pour afficher les points de contrle")},100)}),ae.on("pm:remove",()=>{var fe;(fe=document.querySelector(".drawing-help-message"))==null||fe.remove()}),ae.on("pm:select",()=>{document.querySelectorAll(".drawing-help-message").forEach(fe=>fe.remove()),fl("Utilisez les points de contrle pour modifier la forme")}),ae.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(fe=>fe.remove())}),ae.on("zoomstart",()=>{s.value&&(_(),s.value=null,document.querySelectorAll(".drawing-help-message").forEach(fe=>fe.remove()))}),ae},j=()=>{if(!(!e.value||!t.value||!t.value.getLayers().length))try{const B=t.value.getBounds();if(B.isValid()){const te={zoomAnimation:e.value.options.zoomAnimation,fadeAnimation:e.value.options.fadeAnimation,markerZoomAnimation:e.value.options.markerZoomAnimation};e.value.options.zoomAnimation=!1,e.value.options.fadeAnimation=!1,e.value.options.markerZoomAnimation=!1,e.value.fitBounds(B,{padding:[50,50],maxZoom:18,animate:!1,duration:0,noMoveStart:!0}),e.value.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{try{e.value.options.fadeAnimation=te.fadeAnimation,setTimeout(()=>{try{e.value.options.zoomAnimation=te.zoomAnimation,e.value.options.markerZoomAnimation=te.markerZoomAnimation}catch(se){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",se)}},500)}catch(se){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",se)}},500)}}catch(B){if(console.warn("[useMapDrawing] Error adjusting view:",B),e.value)try{e.value.options.zoomAnimation=!0,e.value.options.fadeAnimation=!0,e.value.options.markerZoomAnimation=!0,e.value.invalidateSize({animate:!1,pan:!1})}catch(te){console.error("[useMapDrawing] Erreur lors de la restauration aprs chec:",te)}}},Z=B=>{var se;if(!e.value)return;document.querySelectorAll(".drawing-help-message").forEach(ae=>ae.remove());try{const ae=e.value.pm;ae.globalEditModeEnabled()&&ae.disableGlobalEditMode(),ae.globalRemovalModeEnabled()&&ae.disableGlobalRemovalMode(),ae.disableDraw(),_(),(se=r.value)==null||se.clearLayers()}catch(ae){console.error("Error disabling modes:",ae)}if(i.value=B,!B){_();return}let te=B;switch(B){case"Note":te="GeoNote";break;case"Polygon":te="Polygon";break;case"Line":te="Line";break;case"ElevationLine":te="ElevationLine";break;default:te=B}B=te,Xe(),setTimeout(()=>{var ae,we,fe,Q,ue,Re,Me,Ze,oe,me,pe,de,ze;try{switch(B){case"Polygon":fl("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(ae=e.value)==null||ae.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(we=e.value)==null||we.off("pm:create"),(fe=e.value)==null||fe.on("pm:create",Ge=>{var Qe,Ve,ot;if(Ge.shape==="Polygon"&&Ge.layer){const At=Ge.layer.getLatLngs()[0];(Qe=e.value)==null||Qe.removeLayer(Ge.layer),(Ve=t.value)!=null&&Ve.hasLayer(Ge.layer)&&t.value.removeLayer(Ge.layer);const Et=new Hh(At,{color:"#3B82F6",weight:3,fillColor:"#3B82F6",fillOpacity:.2});t.value&&(t.value.addLayer(Et),s.value=Et,Et.updateProperties()),(ot=e.value)==null||ot.pm.disableDraw(),Xe()}});break;case"Circle":t.value&&t.value.getLayers().filter(Qe=>Qe instanceof Aa).forEach(Qe=>{Qe.toggleHelperPoints(e.value,!0,"#DC2626","#2563EB")}),e.value.pm.setGlobalOptions({snapDistance:15,snapSegment:!0,snapVertices:!0,snapLayers:[t.value,r.value],snapMiddle:!0,snapIntersections:!0}),fl("Positionnez le centre du cercle. Points bleus : milieu des cts, Points rouges : sommets, Point vert : centre"),e.value.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Rectangle":fl("Cliquez et maintenez pour dessiner un rectangle, relchez pour terminer"),(Q=e.value)==null||Q.pm.enableDraw("Rectangle",{finishOn:"mouseup"});break;case"Polygon":fl("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(ue=e.value)==null||ue.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":fl("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(Re=e.value)==null||Re.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(Me=e.value)==null||Me.off("pm:create"),(Ze=e.value)==null||Ze.on("pm:create",Ge=>{var Qe,Ve,ot;if(Ge.shape==="Line"&&Ge.layer){const At=Ge.layer.getLatLngs();(Qe=e.value)==null||Qe.removeLayer(Ge.layer),(Ve=t.value)!=null&&Ve.hasLayer(Ge.layer)&&t.value.removeLayer(Ge.layer);const Et=new ks(At,{color:"#3B82F6",weight:3,opacity:.8});t.value&&(t.value.addLayer(Et),s.value=Et,Et.updateProperties()),(ot=e.value)==null||ot.pm.disableDraw(),Xe()}});break;case"Text":if(fl("Cliquez pour ajouter du texte, double-cliquez pour diter"),e.value){const Ge=Qe=>{if(!e.value||!t.value)return;const Ve=h(Qe.latlng);t.value.addLayer(Ve),s.value=Ve,e.value.off("click",Ge),Z("")};e.value.on("click",Ge)}break;case"GeoNote":if(fl("Cliquez pour ajouter une note golocalise, double-cliquez pour diter"),e.value){const Ge=Qe=>{if(!e.value||!t.value)return;const Ve=new WD(Qe.latlng,{radius:8,color:"#3B82F6",weight:2,fillColor:"#3B82F6",fillOpacity:.6,name:"Note golocalise",description:"Double-cliquez pour diter"});t.value.addLayer(Ve),s.value=Ve,Ve.updateProperties(),Ve.openPopup(),e.value.off("click",Ge),Z("")};e.value.on("click",Ge)}break;case"delete":fl("Cliquez sur une forme pour la supprimer"),(oe=e.value)==null||oe.pm.enableGlobalRemovalMode();break;case"ElevationLine":fl("Cliquez et maintenez pour tracer le profil altimtrique"),(me=e.value)==null||me.pm.enableDraw("Line",{finishOn:"mouseup",continueDrawing:!1,allowSelfIntersection:!1,templineStyle:{color:"#FF4500",weight:4,opacity:.8}}),(pe=e.value)==null||pe.pm.setGlobalOptions({continueDrawing:!1,finishOn:"mouseup",preventMarkerRemoval:!0,preventVertexEdit:!0,preventMarkerEdit:!0}),(de=e.value)==null||de.off("pm:create"),(ze=e.value)==null||ze.on("pm:create",async Ge=>{var Qe,Ve,ot;if(Ge.shape==="Line"&&Ge.layer){const At=Ge.layer.getLatLngs();(Qe=e.value)==null||Qe.removeLayer(Ge.layer),(Ve=t.value)!=null&&Ve.hasLayer(Ge.layer)&&t.value.removeLayer(Ge.layer);const Et=new nf(At,{color:"#FF4500",weight:4,opacity:.8,interactive:!1,pmIgnore:!0});if(t.value){t.value.addLayer(Et),s.value=Et,await Et.updateElevationProfile();const zt=T(Et,"ElevationLine");Object.assign(Et.properties,{...zt,...Et.properties,type:"ElevationLine",elevationData:Et.getElevationData()}),s.value=null,qs(()=>{s.value=Et})}(ot=e.value)==null||ot.pm.disableDraw(),i.value="",Xe()}});break}}catch(Ke){console.error("[setDrawingTool] Erreur lors de la configuration de l'outil:",Ke)}},100)},J=B=>{var se;if(!s.value)return;const te=s.value;if(te.properties=te.properties||{},te.properties.style=te.properties.style||{},te.properties.style={...te.properties.style,...B},te.properties.type==="text"){const ae=te.properties._textLayer,we=(se=ae==null?void 0:ae.getElement())==null?void 0:se.querySelector(".text-annotation");we&&vb(we,te.properties.style);const fe={color:B.borderColor||te.properties.style.borderColor,weight:parseInt(B.borderWidth||te.properties.style.borderWidth),opacity:B.borderOpacity??te.properties.style.borderOpacity};"setStyle"in te&&te.setStyle(fe)}else if(te.properties.type==="TextRectangle")console.log("[updateShapeStyle] TextRectangle supprim selon les exigences");else{const ae={};B.fillColor&&(ae.fillColor=B.fillColor),B.fillOpacity!==void 0&&(ae.fillOpacity=B.fillOpacity),B.strokeColor&&(ae.color=B.strokeColor),B.strokeOpacity!==void 0&&(ae.opacity=B.strokeOpacity),B.strokeWidth!==void 0&&(ae.weight=B.strokeWidth),B.dashArray&&(ae.dashArray=B.dashArray),"setStyle"in te&&te.setStyle(ae)}},le=B=>{var se,ae,we,fe;if(!s.value){console.warn("[useMapDrawing] Cannot update properties: no shape selected");return}if(console.log("[useMapDrawing] Updating shape properties",{before:s.value.properties,newProps:B,layerType:(se=s.value.properties)==null?void 0:se.type,beforeName:s.value.name,beforePropertiesName:(ae=s.value.properties)==null?void 0:ae.name,nameIsDirectProperty:"name"in s.value}),s.value.properties&&Object.keys(B).forEach(Q=>{s.value.properties[Q]=B[Q],Q==="name"&&(console.log(`[useMapDrawing] Setting name "${B[Q]}" directly on layer`),s.value.name=B[Q])}),console.log("[useMapDrawing] Updated shape properties",{after:s.value.properties,name:s.value.name,propertiesName:(we=s.value.properties)==null?void 0:we.name,allLayerKeys:Object.keys(s.value),allPropertiesKeys:Object.keys(s.value.properties||{})}),((fe=s.value.properties)==null?void 0:fe.type)==="Circle"){const Q=s.value,ue=Q.getRadius();Q.properties.radius=ue,Q.properties.diameter=ue*2,Q.properties.surface=Math.PI*ue*ue,Q.properties.perimeter=2*Math.PI*ue,B.name&&(console.log(`[useMapDrawing] Ensuring circle name "${B.name}" is set in multiple places`),Q.properties.name=B.name,Q.properties.style.name=B.name,Q.name=B.name,console.log("[useMapDrawing] Circle name verification:",{circleDirectName:Q.name,circlePropertiesName:Q.properties.name,nameIsEnumerable:Object.keys(Q).includes("name"),propertiesNameIsEnumerable:Object.keys(Q.properties).includes("name")}))}const te=new CustomEvent("shape:propertiesUpdated",{detail:{shape:s.value,properties:s.value.properties}});window.dispatchEvent(te)},he=B=>{console.log("[forceShapeUpdate] Dbut",{currentProperties:B.properties,selectedShapeRef:s.value}),s.value=null,qs(()=>{s.value=B,console.log("[forceShapeUpdate] Aprs mise  jour",{selectedShape:s.value,properties:s.value.properties})})},Le=(B,te)=>{console.log("[updateLayerProperties] Dbut",{layer:B,shapeType:te,currentProperties:B.properties}),KD((ae,we)=>{const fe=T(ae,we);console.log("[updateLayerProperties] Nouvelles proprits calcules",{newProperties:fe}),ae.properties={...fe},he(ae),ae.fire("properties:updated",{shape:ae,properties:ae.properties}),console.log("[updateLayerProperties] Fin",{finalProperties:ae.properties,selectedShape:s.value})},100)(B,te)},V=(B,te)=>Rt.latLng((B.lat+te.lat)/2,(B.lng+te.lng)/2),F=B=>{if(!e.value||!t.value)return;_();const te=B.getLatLng(),se=B.getRadius(),ae=P(te,"#059669");x.push(ae),y(ae,B,()=>[Ei(se,"m","Rayon"),Ei(se*2,"m","Diamtre"),Ei(Math.PI*Math.pow(se,2),"m","Surface")].join("<br>"));const we=[],fe=[0,45,90,135,180,225,270,315];fe.forEach(Q=>{const ue=B.calculatePointOnCircle(Q),Re=P(ue,"#2563EB");we.push(Re),x.push(Re),y(Re,B,()=>Ei(se,"m","Rayon")),Re.on("mousedown",Me=>{if(!e.value)return;Rt.DomEvent.stopPropagation(Me),e.value.dragging.disable();let Ze=!0;const oe=pe=>{Ze&&(B.resizeFromControlPoint(pe.latlng),we.forEach((de,ze)=>{const Ke=B.calculatePointOnCircle(fe[ze]);de.setLatLng(Ke)}),ae.setLatLng(B.getLatLng()),Re.measureDiv&&(Re.measureDiv.innerHTML=Ei(B.getRadius(),"m","Rayon")))},me=()=>{Ze=!1,e.value&&(e.value.off("mousemove",oe),document.removeEventListener("mouseup",me),e.value.dragging.enable(),B.updateProperties(),s.value=null,qs(()=>{s.value=B}),Le(B,"Circle"))};e.value.on("mousemove",oe),document.addEventListener("mouseup",me)})}),ae.on("mousedown",Q=>{if(!e.value)return;Rt.DomEvent.stopPropagation(Q),e.value.dragging.disable();let ue=!0;const Re=B.getLatLng(),Me=Q.latlng,Ze=me=>{if(!ue)return;const pe=me.latlng.lng-Me.lng,de=me.latlng.lat-Me.lat,ze=Rt.latLng(Re.lat+de,Re.lng+pe);Rt.Circle.prototype.setLatLng.call(B,ze),ae.setLatLng(ze),we.forEach((Ke,Ge)=>{const Qe=B.calculatePointOnCircle(fe[Ge]);Ke.setLatLng(Qe)}),ae.measureDiv&&(ae.measureDiv.innerHTML=[Ei(B.getRadius(),"m","Rayon"),Ei(B.getRadius()*2,"m","Diamtre"),Ei(Math.PI*Math.pow(B.getRadius(),2),"m","Surface")].join("<br>"))},oe=()=>{ue=!1,e.value&&(e.value.off("mousemove",Ze),document.removeEventListener("mouseup",oe),e.value.dragging.enable(),B.updateProperties(),s.value=null,qs(()=>{s.value=B}),Le(B,"Circle"))};e.value.on("mousemove",Ze),document.addEventListener("mouseup",oe)}),B.on("circle:resized",()=>{Le(B,"Circle")}),s.value=B},Y=B=>{var Ze;if(!e.value||!t.value)return;if(!(B instanceof Aa)){console.warn("La couche n'est pas une instance de Rectangle");return}const te=B;_();const se=te.getCenter(),ae=te.getRotatedCorners(),we=te.getMidPoints(),fe=P(se,"#059669");x.push(fe),y(fe,te,()=>{const{width:oe,height:me}=te.getDimensions(),pe=oe*me,de=te.getRotation();return[Ei(oe,"m","Largeur"),Ei(me,"m","Hauteur"),Ei(pe,"m","Surface"),`Rotation: ${de.toFixed(1)}`].join("<br>")});const Q=P(Rt.latLng(se.lat+(ae[0].lat-se.lat)*1.2,se.lng+(ae[0].lng-se.lng)*1.2),"#F97316");x.push(Q);const ue=Rt.polyline([se,Q.getLatLng()],{color:"#F97316",weight:1,opacity:.6,dashArray:"4",pmIgnore:!0});(Ze=n.value)==null||Ze.addLayer(ue);const Re=ae.map(oe=>{const me=P(oe,"#DC2626");return x.push(me),y(me,te,()=>{const{width:pe,height:de}=te.getDimensions();return[Ei(pe,"m","Largeur"),Ei(de,"m","Hauteur")].join("<br>")}),me}),Me=we.map((oe,me)=>{const pe=P(oe,"#2563EB");return x.push(pe),y(pe,te,()=>{const{width:de,height:ze}=te.getDimensions(),Ke=me%2===0?de:ze;return[Ei(Ke,"m","Longueur du ct"),Ei(Ke/2,"m","Distance au coin")].join("<br>")}),pe});fe.on("mousedown",oe=>{if(!e.value)return;Rt.DomEvent.stopPropagation(oe),e.value.dragging.disable();let me=!0;const pe=ze=>{if(!me)return;te.moveFromCenter(ze.latlng);const Ke=te.getRotatedCorners(),Ge=te.getMidPoints();Re.forEach((Ve,ot)=>Ve.setLatLng(Ke[ot])),Me.forEach((Ve,ot)=>Ve.setLatLng(Ge[ot])),fe.setLatLng(ze.latlng);const Qe=Rt.latLng(ze.latlng.lat+(Ke[0].lat-ze.latlng.lat)*1.2,ze.latlng.lng+(Ke[0].lng-ze.latlng.lng)*1.2);Q.setLatLng(Qe),ue.setLatLngs([ze.latlng,Qe])},de=()=>{me=!1,e.value&&(e.value.off("mousemove",pe),document.removeEventListener("mouseup",de),e.value.dragging.enable(),te.updateProperties(),s.value=null,qs(()=>{s.value=te}))};e.value.on("mousemove",pe),document.addEventListener("mouseup",de)}),Q.on("mousedown",oe=>{if(!e.value)return;Rt.DomEvent.stopPropagation(oe),e.value.dragging.disable();let me=!1;const pe=oe.latlng,de=te.getRotation(),ze=te.getCenter(),Ke=pe.lng-ze.lng,Ge=pe.lat-ze.lat,Qe=Math.atan2(Ge,Ke)*180/Math.PI;x.forEach(At=>{At!==Q&&(At.setStyle({opacity:0,fillOpacity:0}),At.measureDiv&&(At.measureDiv.style.display="none"))});const Ve=Cf(At=>{me||(me=!0);const Et=At.latlng.lng-ze.lng,zt=At.latlng.lat-ze.lat;let dn=Math.atan2(zt,Et)*180/Math.PI-Qe,mn=(de+dn)%360;mn<0&&(mn+=360),te.setRotation(mn,!1),Q.setLatLng(At.latlng),ue.setLatLngs([ze,At.latlng])},16),ot=()=>{e.value&&(e.value.off("mousemove",Ve),document.removeEventListener("mouseup",ot),e.value.dragging.enable(),me&&te.finalizeRotation(),s.value=null,qs(()=>{s.value=te,_(),Y(te)}))};e.value.on("mousemove",Ve),document.addEventListener("mouseup",ot)}),te.on("coordinates:updated",oe=>{const{corners:me,center:pe}=oe,de=te.getMidPoints();Re.forEach((Ke,Ge)=>Ke.setLatLng(me[Ge])),Me.forEach((Ke,Ge)=>Ke.setLatLng(de[Ge])),fe.setLatLng(pe);const ze=Rt.latLng(pe.lat+(me[0].lat-pe.lat)*1.2,pe.lng+(me[0].lng-pe.lng)*1.2);Q.setLatLng(ze),ue.setLatLngs([pe,ze])})},$=B=>{if(!e.value||!t.value)return;_();const te=B.getLatLngs();if(!te||te.length===0){console.warn("Pas de points pour la ligne");return}let se=null;if(B instanceof ks){const ae=B.getCenter();se=P(ae,"#059669"),x.push(se),y(se,B,()=>{const we=B.getLength()||0;return Ei(we,"m","Longueur totale")}),se.on("mousedown",we=>{if(!e.value)return;Rt.DomEvent.stopPropagation(we),e.value.dragging.disable();let fe=!0;const Q=B.getLatLngs().map(oe=>Rt.latLng(oe.lat,oe.lng)),ue=we.latlng;B instanceof ks&&(B.off("move:end"),B.off("vertex:moved"),B.off("latlngs:updated"),B.off("properties:updated")),x.forEach((oe,me)=>{me>0&&(oe.setStyle({opacity:0,fillOpacity:0}),oe.measureDiv&&(oe.measureDiv.style.display="none"))});const Me=Cf(oe=>{if(!fe)return;const me=oe.latlng.lng-ue.lng,pe=oe.latlng.lat-ue.lat,de=Q.map(ze=>Rt.latLng(ze.lat+pe,ze.lng+me));Rt.Polyline.prototype.setLatLngs.call(B,de),se==null||se.setLatLng(oe.latlng)},16),Ze=()=>{if(fe=!1,!!e.value){if(e.value.off("mousemove",Me),document.removeEventListener("mouseup",Ze),e.value.dragging.enable(),B instanceof ks){const oe=()=>{_(),$(B)};B.on("move:end",oe),B.on("vertex:moved",oe),B.on("latlngs:updated",oe),B.on("properties:updated",oe),B.updateProperties(),Le(B,"Line")}_(),$(B)}};e.value.on("mousemove",Me),document.addEventListener("mouseup",Ze)})}if(te.forEach((ae,we)=>{const fe=P(ae,"#DC2626");x.push(fe),y(fe,B,()=>{if(B instanceof ks){const Q=B.getLength()||0,ue=B.getLengthToVertex(we);return[Ei(ue,"m","Distance depuis le dbut"),Ei(Q,"m","Longueur totale")].join("<br>")}return""}),fe.on("mousedown",Q=>{if(!e.value)return;Rt.DomEvent.stopPropagation(Q),e.value.dragging.disable();let ue=!0;B instanceof ks&&(B.off("move:end"),B.off("vertex:moved"),B.off("latlngs:updated"),B.off("properties:updated")),x.forEach((Ze,oe)=>{oe!==we+1&&(Ze.setStyle({opacity:0,fillOpacity:0}),Ze.measureDiv&&(Ze.measureDiv.style.display="none"))});const Re=Cf(Ze=>{if(!ue)return;const oe=B.getLatLngs();oe[we]=Ze.latlng,Rt.Polyline.prototype.setLatLngs.call(B,oe),fe.setLatLng(Ze.latlng)},16),Me=()=>{if(ue=!1,!!e.value){if(e.value.off("mousemove",Re),document.removeEventListener("mouseup",Me),e.value.dragging.enable(),B instanceof ks){const Ze=()=>{_(),$(B)};B.on("move:end",Ze),B.on("vertex:moved",Ze),B.on("latlngs:updated",Ze),B.on("properties:updated",Ze),B.updateProperties(),Le(B,"Line")}_(),$(B)}};e.value.on("mousemove",Re),document.addEventListener("mouseup",Me)})}),te.length>=2)for(let ae=0;ae<te.length-1;ae++){const we=te[ae],fe=te[ae+1],Q=Rt.latLng((we.lat+fe.lat)/2,(we.lng+fe.lng)/2),ue=P(Q,"#2563EB");x.push(ue),y(ue,B,()=>{if(B instanceof ks){const Re=B.getSegmentLengthAt(ae),Me=B.getLength()||0,Ze=B.getLengthToVertex(ae)+Re/2;return[Ei(Re,"m","Longueur du segment"),Ei(Re/2,"m","Demi-segment"),Ei(Ze,"m","Distance depuis le dbut"),Ei(Me,"m","Longueur totale")].join("<br>")}return""})}if(B instanceof ks){const ae=()=>{_(),$(B)};B.on("move:start",()=>{x.forEach((we,fe)=>{fe>0&&(we.setStyle({opacity:0,fillOpacity:0}),we.measureDiv&&(we.measureDiv.style.display="none"))})}),B.on("move:end",ae),B.on("vertex:moved",ae),B.on("latlngs:updated",ae),B.on("properties:updated",ae),x.cleanup=()=>{B.off("move:start",()=>{}),B.off("move:end",ae),B.off("vertex:moved",ae),B.off("latlngs:updated",ae),B.off("properties:updated",ae)}}},D=B=>{if(!e.value||!t.value)return;_();const te=B.getLatLngs()[0],se=te.map(Me=>[Me.lng,Me.lat]);se.push(se[0]);const ae=lu([se]),we=nc(ae),fe=te.reduce((Me,Ze,oe)=>{const me=te[(oe+1)%te.length];return Me+Ze.distanceTo(me)},0);let Q;if(typeof B.getCenter=="function")try{Q=B.getCenter()}catch(Me){console.warn("Erreur lors de la rcupration du centre du polygone via getCenter(), utilisation de la mthode alternative",Me);const Ze=np(ae);Q=Rt.latLng(Ze.geometry.coordinates[1],Ze.geometry.coordinates[0])}else{const Me=np(ae);Q=Rt.latLng(Me.geometry.coordinates[1],Me.geometry.coordinates[0])}const ue=P(Q,"#059669");x.push(ue),y(ue,B,()=>[Ei(fe,"m","Primtre"),Ei(we,"m","Surface")].join("<br>")),ue.on("mousedown",Me=>{if(!e.value)return;Rt.DomEvent.stopPropagation(Me),e.value.dragging.disable();let Ze=!0;const oe=Me.latlng,me=[...te];x.forEach((Ke,Ge)=>{Ge>0&&Ke.setStyle({opacity:0,fillOpacity:0})});const pe=Cf(Ke=>{if(!Ze)return;const Ge=Ke.latlng.lng-oe.lng,Qe=Ke.latlng.lat-oe.lat,Ve=me.map(ot=>Rt.latLng(ot.lat+Qe,ot.lng+Ge));Rt.Polygon.prototype.setLatLngs.call(B,[Ve]),ue.setLatLng(Ke.latlng)},16),de=Ke=>{Ze&&pe(Ke)},ze=()=>{if(Ze=!1,!!e.value){if(e.value.off("mousemove",de),document.removeEventListener("mouseup",ze),e.value.dragging.enable(),B.properties){const Ke=B.getLatLngs()[0],Ge=Ke.map(Ve=>[Ve.lng,Ve.lat]);Ge.push(Ge[0]);const Qe=lu([Ge]);B.properties.area=nc(Qe),B.properties.perimeter=Ke.reduce((Ve,ot,At)=>{const Et=Ke[(At+1)%Ke.length];return Ve+ot.distanceTo(Et)},0),B.properties.surface=B.properties.area}_(),D(B),s.value=null,qs(()=>{s.value=B})}};e.value.on("mousemove",de),document.addEventListener("mouseup",ze)}),te.forEach((Me,Ze)=>{const oe=P(Me,"#DC2626");x.push(oe),y(oe,B,()=>{const me=te[(Ze-1+te.length)%te.length],pe=te[(Ze+1)%te.length],de=Me.distanceTo(me),ze=Me.distanceTo(pe);return[Ei(de,"m","Distance au point prcdent"),Ei(ze,"m","Distance au point suivant"),Ei(fe,"m","Primtre total"),Ei(we,"m","Surface")].join("<br>")}),oe.on("mousedown",me=>{if(Rt.DomEvent.stopPropagation(me),!e.value)return;e.value.dragging.disable();let pe=!0;ue&&(ue.setStyle({opacity:0,fillOpacity:0}),ue.measureDiv&&(ue.measureDiv.style.display="none"));const de=Cf(Ge=>{if(!pe)return;te[Ze]=Ge.latlng,Rt.Polygon.prototype.setLatLngs.call(B,[te]),oe.setLatLng(Ge.latlng);const Qe=x.slice(te.length+1),Ve=(Ze-1+te.length)%te.length,ot=Qe[Ve];if(ot){const Et=te[Ve],zt=te[Ze],Kt=Rt.latLng((Et.lat+zt.lat)/2,(Et.lng+zt.lng)/2);ot.setLatLng(Kt)}const At=Qe[Ze];if(At){const Et=te[Ze],zt=te[(Ze+1)%te.length],Kt=Rt.latLng((Et.lat+zt.lat)/2,(Et.lng+zt.lng)/2);At.setLatLng(Kt)}},16),ze=Ge=>{pe&&de(Ge)},Ke=()=>{if(pe=!1,!!e.value){if(e.value.off("mousemove",ze),document.removeEventListener("mouseup",Ke),e.value.dragging.enable(),B.properties){const Ge=B.getLatLngs()[0].map(Ve=>[Ve.lng,Ve.lat]);Ge.push(Ge[0]);const Qe=lu([Ge]);B.properties.area=nc(Qe),B.properties.perimeter=te.reduce((Ve,ot,At)=>{const Et=te[(At+1)%te.length];return Ve+ot.distanceTo(Et)},0),B.properties.surface=B.properties.area}_(),D(B),s.value=null,qs(()=>{s.value=B})}};e.value.on("mousemove",ze),document.addEventListener("mouseup",Ke)})}),(()=>{const Me=B.getLatLngs()[0];x.slice(Me.length+1).forEach(oe=>{n.value&&n.value.removeLayer(oe)}),x=x.slice(0,Me.length+1);const Ze=new Array(Me.length);for(let oe=0;oe<Me.length;oe++){const me=Me[oe],pe=Me[(oe+1)%Me.length];Ze[oe]=V(me,pe)}Ze.forEach((oe,me)=>{const pe=P(oe,"#2563EB");x.push(pe),y(pe,B,()=>{const de=Me[me],ze=Me[(me+1)%Me.length],Ke=de.distanceTo(ze);return[Ei(Ke,"m","Longueur du segment"),Ei(fe,"m","Primtre total"),Ei(we,"m","Surface")].join("<br>")}),pe.on("mousedown",de=>{if(!e.value)return;Rt.DomEvent.stopPropagation(de),e.value.dragging.disable();let ze=!0;const Ke=me;ue&&(ue.setStyle({opacity:0,fillOpacity:0}),ue.measureDiv&&(ue.measureDiv.style.display="none"));const Ge=[...B.getLatLngs()[0]];Ge.splice((Ke+1)%Ge.length,0,oe),B.setLatLngs([Ge]),_(),D(B);const Qe=Ke+1,Ve=1+Qe,ot=Qe<x.length-1?x[Ve]:null;if(ot){const At=zt=>{if(!ze)return;const Kt=B.getLatLngs()[0];Kt[Qe]=zt.latlng,B.setLatLngs([Kt]),ot.setLatLng(zt.latlng);const dn=x.slice(1+Kt.length),mn=(Qe-1+Kt.length)%Kt.length,et=Qe;if(dn[mn]){const st=Kt[mn],rt=Kt[Qe],Vt=Rt.latLng((st.lat+rt.lat)/2,(st.lng+rt.lng)/2);dn[mn].setLatLng(Vt)}if(dn[et]){const st=Kt[Qe],rt=Kt[(Qe+1)%Kt.length],Vt=Rt.latLng((st.lat+rt.lat)/2,(st.lng+rt.lng)/2);dn[et].setLatLng(Vt)}},Et=()=>{if(ze=!1,!!e.value){if(e.value.off("mousemove",At),document.removeEventListener("mouseup",Et),e.value.dragging.enable(),B.properties){const zt=B.getLatLngs()[0].map(dn=>[dn.lng,dn.lat]);zt.push(zt[0]);const Kt=lu([zt]);B.properties.area=nc(Kt),B.properties.perimeter=B.getLatLngs()[0].reduce((dn,mn,et,st)=>{const rt=st[(et+1)%st.length];return dn+mn.distanceTo(rt)},0)}_(),D(B),s.value=null,qs(()=>{s.value=B})}};e.value.on("mousemove",At),document.addEventListener("mouseup",Et)}else e.value.dragging.enable(),_(),D(B)})})})()},k=B=>{if(!(!e.value||!r.value)){console.log("[generateTempControlPoints] Gnration des points temporaires pour",{layerType:B.constructor.name,properties:B.properties}),r.value.clearLayers();try{if(B instanceof Aa)B.generateHelperPoints(e.value);else if(B instanceof Df){if("getLatLng"in B&&typeof B.getLatLng=="function"){const te=B.getLatLng();if(te){const se=Rt.circleMarker(te,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(se)}}}else if(B instanceof Hh||B instanceof Rt.Polygon){let te=[];if("getLatLngs"in B){const ae=B.getLatLngs();if(Array.isArray(ae)&&ae.length>0){const we=ae[0];Array.isArray(we)?te=we:we instanceof Rt.LatLng&&(te=ae)}}let se=null;if(B instanceof Hh&&typeof B.getCenter=="function")se=B.getCenter();else if(te.length>0){const ae=te.map(Q=>[Q.lng,Q.lat]);ae.push(ae[0]);const we=lu([ae]),fe=np(we);se=Rt.latLng(fe.geometry.coordinates[1],fe.geometry.coordinates[0])}if(se){const ae=Rt.circleMarker(se,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(ae)}te.forEach(ae=>{if(ae){const we=Rt.circleMarker(ae,{radius:5,color:"#DC2626",fillColor:"#DC2626",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(we)}});for(let ae=0;ae<te.length;ae++){const we=te[ae],fe=te[(ae+1)%te.length];if(we&&fe){const Q=Rt.latLng((we.lat+fe.lat)/2,(we.lng+fe.lng)/2),ue=Rt.circleMarker(Q,{radius:5,color:"#2563EB",fillColor:"#2563EB",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(ue)}}}console.log("[generateTempControlPoints] Points temporaires gnrs",{count:r.value.getLayers().length})}catch(te){console.error("[generateTempControlPoints] Erreur lors de la gnration des points temporaires:",te)}}},I=B=>{console.log("Nombre total de couches:",B.length);const te=B.filter(Q=>{var Me;if(!Q)return!1;let ue=0,Re={width:0,height:0};if(Q instanceof Rt.Circle){ue=Math.PI*Math.pow(Q.getRadius(),2);const Ze=Q.getRadius();console.log(`
Forme dtecte: Circle`),console.log(`- Surface propre: ${ue.toFixed(2)} m`),console.log(`- Rayon: ${Ze.toFixed(2)} m`),console.log("- Angle: Cercle complet (360)")}else if(Q instanceof Aa||Q instanceof Rt.Rectangle){const Ze=Q.getBounds(),oe=Ze.getSouthWest(),me=Ze.getNorthEast(),pe=uu([[oe.lng,oe.lat],[me.lng,oe.lat]]),de=uu([[oe.lng,oe.lat],[oe.lng,me.lat]]);Re.width=Dh(pe,{units:"meters"}),Re.height=Dh(de,{units:"meters"}),ue=Re.width*Re.height,console.log(`
Forme dtecte: Rectangle`),console.log(`- Surface propre: ${ue.toFixed(2)} m`),console.log(`- Largeur: ${Re.width.toFixed(2)} m`),console.log(`- Hauteur: ${Re.height.toFixed(2)} m`)}else if(((Me=Q.properties)==null?void 0:Me.type)==="Semicircle"){const Ze=Q.getStartAngle(),oe=Q.getStopAngle(),me=(oe-Ze+360)%360,pe=Q.getRadius();ue=Math.PI*Math.pow(pe,2)*me/360,console.log(`
Forme dtecte: Semicircle`),console.log(`- Surface propre: ${ue.toFixed(2)} m`),console.log(`- Rayon: ${pe.toFixed(2)} m`),console.log(`- Angle de dbut: ${Ze.toFixed(2)}`),console.log(`- Angle de fin: ${oe.toFixed(2)}`),console.log(`- Angle d'ouverture: ${me.toFixed(2)}`)}return ue>0});if(te.length===0)return 0;const se=new Set,ae=[];for(const Q of te)if(!se.has(Q)){const ue=K(te,Q);ue.length>0&&(ae.push(ue),ue.forEach(Re=>se.add(Re)))}console.log(`
Nombre de groupes de formes connectes: ${ae.length}`);const we=ae.map((Q,ue)=>{console.log(`
Calcul pour le groupe ${ue+1} (${Q.length} formes):`);const Re=Q.map(pe=>{var de,ze,Ke;try{let Ge;if(pe instanceof Rt.Circle){const Qe=pe.getLatLng(),Ve=pe.getRadius();Ge=pD([Qe.lng,Qe.lat],Ve/1e3,{units:"kilometers",steps:256});const ot=nc(Ge),At=((de=pe.properties)==null?void 0:de.surface)||0;return console.log(`
Conversion Cercle -> GeoJSON`),console.log(`- Rayon: ${Ve.toFixed(2)}m`),console.log(`- Surface proprit: ${At.toFixed(2)}m`),console.log(`- Surface GeoJSON: ${ot.toFixed(2)}m`),Ge}else if(pe instanceof Aa||pe instanceof Rt.Rectangle){const Qe=pe.getBounds(),Ve=Qe.getSouthWest(),ot=Qe.getNorthEast(),At=Rt.latLng(ot.lat,Ve.lng),Et=Rt.latLng(Ve.lat,ot.lng),zt=[[Ve.lng,Ve.lat],[Et.lng,Et.lat],[ot.lng,ot.lat],[At.lng,At.lat],[Ve.lng,Ve.lat]];Ge=lu([zt]);const Kt=nc(Ge),dn=uu([[Ve.lng,Ve.lat],[ot.lng,Ve.lat]]),mn=uu([[Ve.lng,Ve.lat],[Ve.lng,ot.lat]]),et=Dh(dn,{units:"meters"}),st=Dh(mn,{units:"meters"}),rt=et*st;return console.log(`
Conversion Rectangle -> GeoJSON`),console.log(`- Largeur: ${et.toFixed(2)}m`),console.log(`- Hauteur: ${st.toFixed(2)}m`),console.log(`- Surface thorique: ${rt.toFixed(2)}m`),console.log(`- Surface GeoJSON: ${Kt.toFixed(2)}m`),console.log(`- Diffrence: ${Math.abs(rt-Kt).toFixed(2)}m (${(Math.abs(rt-Kt)/rt*100).toFixed(2)}%)`),Ge}else if(((ze=pe.properties)==null?void 0:ze.type)==="Semicircle"){const Qe=pe.getCenter(),Ve=pe.getRadius(),ot=pe.getStartAngle(),At=pe.getStopAngle(),Et=[],zt=64;Et.push([Qe.lng,Qe.lat]);for(let mn=0;mn<=zt;mn++){const st=(ot+(At-ot+360)%360*mn/zt)*Math.PI/180,rt=Ve*Math.cos(st),Xt=Ve*Math.sin(st)/111319.9,ft=rt/(111319.9*Math.cos(Qe.lat*Math.PI/180));Et.push([Qe.lng+ft,Qe.lat+Xt])}Et.push([Qe.lng,Qe.lat]),Ge=lu([Et]);const Kt=nc(Ge),dn=((Ke=pe.properties)==null?void 0:Ke.surface)||0;return console.log(`
Conversion Semicircle -> GeoJSON`),console.log(`- Rayon: ${Ve.toFixed(2)}m`),console.log(`- Surface proprit: ${dn.toFixed(2)}m`),console.log(`- Surface GeoJSON: ${Kt.toFixed(2)}m`),console.log(`- Diffrence: ${Math.abs(dn-Kt).toFixed(2)}m (${(Math.abs(dn-Kt)/dn*100).toFixed(2)}%)`),Ge}return null}catch(Ge){return console.error("[useMapDrawing] Erreur lors de la conversion en GeoJSON:",Ge),null}}).filter(pe=>pe!==null);if(Re.length===0)return 0;const Me=Re.map(pe=>{const de=nc(pe);return console.log(`Surface individuelle: ${de.toFixed(2)}m`),de});let Ze=0;for(let pe=0;pe<Re.length;pe++)for(let de=pe+1;de<Re.length;de++)try{const ze=eD([Re[pe],Re[de]]),Ke=DD(ze);if(Ke){const Ge=nc(Ke);Ze+=Ge,console.log(`Intersection entre formes ${pe+1} et ${de+1}: ${Ge.toFixed(2)}m`)}}catch(ze){console.error(`Erreur lors du calcul d'intersection entre les formes ${pe+1} et ${de+1}:`,ze)}const oe=Me.reduce((pe,de)=>pe+de,0),me=oe-Ze;return console.log(`
Calcul de la surface d'irrigation pour le groupe ${ue+1}:`),console.log(`- Surface totale (somme): ${oe.toFixed(2)}m`),console.log(`- Surface d'intersection: ${Ze.toFixed(2)}m`),console.log(`- Surface d'irrigation finale: ${me.toFixed(2)}m`),me}),fe=Math.max(...we);return console.log(`
Surface d'irrigation maximale parmi les groupes: ${fe.toFixed(2)}m`),fe},W=()=>{u.value&&(e.value.removeLayer(u.value),u.value=null)},G=(B,te)=>{if(!e.value)return;W();const se=te?K(B,te):B;if(u.value||(u.value=Rt.layerGroup().addTo(e.value)),se.forEach(ae=>{var fe;const we=(fe=ae.properties)==null?void 0:fe.type;if(we==="Circle"||we==="Semicircle"){const Q=ae.getLatLng(),ue=ae.getRadius(),Re=Rt.circle(Q,{radius:ue,fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:Rt.canvas({padding:.5})}),Me=Rt.circle(Q,{radius:ue,fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:Rt.canvas({padding:.5})});u.value&&(u.value.addLayer(Me),u.value.addLayer(Re))}else if(we==="Rectangle"||we==="Polygon"){const Q=ae.getLatLngs(),ue=Rt.polygon(Q,{fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:Rt.canvas({padding:.5})}),Re=Rt.polygon(Q,{fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:Rt.canvas({padding:.5})});u.value&&(u.value.addLayer(Re),u.value.addLayer(ue))}}),te&&se.length>1&&e.value){const ae=Rt.latLngBounds([]);se.forEach(Q=>{Q.getBounds?ae.extend(Q.getBounds()):Q.getLatLng&&ae.extend(Q.getLatLng())});const we=ae.getCenter(),fe=Rt.tooltip({permanent:!0,direction:"center",className:"connected-group-tooltip"}).setContent("<div>Groupe connect</div>").setLatLng(we);u.value&&u.value.addLayer(Rt.marker(we,{opacity:0,interactive:!1}).bindTooltip(fe).openTooltip())}},K=(B,te)=>{if(!te)return[];const se=new Set,ae=[te],we=[te];for(te._leaflet_id!==void 0&&se.add(te._leaflet_id);ae.length>0;){const fe=ae.shift();for(const Q of B){if(Q===fe||se.has(Q._leaflet_id))continue;q(fe,Q)&&(we.push(Q),ae.push(Q),se.add(Q._leaflet_id))}}return we},q=(B,te)=>{let se=null,ae=null;if(B.getBounds&&typeof B.getBounds=="function")se=B.getBounds();else if(B.getLatLng&&B.getRadius){const we=B.getLatLng(),fe=B.getRadius();se=Rt.latLngBounds([we.lat-fe/111e3,we.lng-fe/(111e3*Math.cos(we.lat*Math.PI/180))],[we.lat+fe/111e3,we.lng+fe/(111e3*Math.cos(we.lat*Math.PI/180))])}if(te.getBounds&&typeof te.getBounds=="function")ae=te.getBounds();else if(te.getLatLng&&te.getRadius){const we=te.getLatLng(),fe=te.getRadius();ae=Rt.latLngBounds([we.lat-fe/111e3,we.lng-fe/(111e3*Math.cos(we.lat*Math.PI/180))],[we.lat+fe/111e3,we.lng+fe/(111e3*Math.cos(we.lat*Math.PI/180))])}return!(!se||!ae||!se.intersects(ae))},ve=(B,te)=>{var ae;const se=K(B,te);return se.length===1&&(ae=te.properties)!=null&&ae.surface?te.properties.surface:I(se)},Ce=B=>{var ae,we,fe,Q,ue,Re,Me,Ze,oe;const te=B.layer;(ae=t.value)==null||ae.addLayer(te);let se="unknown";if(te instanceof Rt.Circle?se=i.value==="Semicircle"?"Semicircle":"Circle":te instanceof Rt.Rectangle?se="Rectangle":te instanceof Rt.Polygon?se="Polygon":te instanceof Rt.Polyline&&!(te instanceof Rt.Polygon)&&(se="Line"),te.properties=T(te,se),s.value=te,console.log("[useMapDrawing] Input layer:",{type:se,instanceof:{Circle:te instanceof Rt.Circle,Rectangle:te instanceof Rt.Rectangle,Polygon:te instanceof Rt.Polygon,Polyline:te instanceof Rt.Polyline},options:te.options,properties:te.properties}),window.dispatchEvent(new CustomEvent("shape:created",{detail:{shape:te,type:se,properties:te.properties}})),te.on("mouseover",()=>{console.log("[mouseover] Survol de la forme",{type:se,isSelected:s.value===te}),(!s.value||s.value!==te)&&k(te)}),te.on("mouseout",()=>{var me;console.log("[mouseout] Sortie de la forme",{type:se,isSelected:s.value===te}),(!s.value||s.value!==te)&&((me=r.value)==null||me.clearLayers())}),se==="Semicircle")console.log("Conversion en demi-cercle dsactive selon les exigences");else if(se==="Circle"){(we=t.value)==null||we.removeLayer(te);const me=new Df(te.getLatLng(),{radius:te.getRadius(),...te.options});me.properties={...T(me,"Circle"),type:"Circle"},Object.defineProperty(me,"name",{value:me.properties.name,writable:!0,enumerable:!0,configurable:!0}),console.log("[useMapDrawing] Cration du cercle personnalis:",{propertyDescriptor:Object.getOwnPropertyDescriptor(me,"name"),directName:me.name,propertiesName:me.properties.name,nameIsEnumerable:Object.keys(me).includes("name"),allProperties:Object.keys(me.properties),allKeys:Object.keys(me)}),(fe=t.value)==null||fe.addLayer(me),s.value=me,F(me)}else if(se==="Rectangle"){(Q=t.value)==null||Q.removeLayer(te);const me=new Aa(te.getBounds(),{...te.options});me.updateProperties(),(ue=t.value)==null||ue.addLayer(me),s.value=me,Y(me)}else if(te instanceof Rt.Polygon){const me=te.getLatLngs()[0],pe=new Hh([me],{...te.options});pe.updateProperties(),(Re=t.value)==null||Re.removeLayer(te),(Me=t.value)==null||Me.addLayer(pe),s.value=pe,D(pe)}else if(te instanceof ks)$(te);else if(te instanceof Rt.Polyline&&!(te instanceof Rt.Polygon)){const me=te.getLatLngs(),pe=new ks(me,{...te.options});pe.updateProperties(),(Ze=t.value)==null||Ze.removeLayer(te),(oe=t.value)==null||oe.addLayer(pe),s.value=pe,$(pe)}fl("Cliquez sur la forme pour afficher les points de contrle")},Xe=()=>{e.value&&(e.value.off("pm:create"),e.value.on("pm:create",Ce))};return{map:e,featureGroup:t,controlPointsGroup:n,tempControlPointsGroup:r,currentTool:i,selectedShape:s,isDrawing:o,initMap:N,setDrawingTool:Z,updateShapeStyle:J,updateShapeProperties:le,updateTextFixedSize:U,adjustView:j,clearActiveControlPoints:_,calculateTotalCoverageArea:I,showCoverageOverlay:G,hideCoverageOverlay:W,calculateConnectedCoverageArea:ve,getConnectedShapes:K}}function XD(){const{isEnabled:e,startMeasure:t}=dd(),n=Gt(null),r=Gt(""),i=Gt("Hybride"),s=Gt(null),o=t("createBaseMaps","useMapState"),u={Hybride:Rt.layerGroup([Rt.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:19,tileSize:256,zoomOffset:0,bounds:Rt.latLngBounds(Rt.latLng(41.333,-5.566),Rt.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0,opacity:.6}),Rt.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:" Esri",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:20,tileSize:256,zoomOffset:0,bounds:Rt.latLngBounds(Rt.latLng(41.333,-5.566),Rt.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0,opacity:.6})]),Cadastre:Rt.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Cadastre - Carte  IGN/Geoportail",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:18,tileSize:256,zoomOffset:0,bounds:Rt.latLngBounds(Rt.latLng(41.333,-5.566),Rt.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0}),IGN:Rt.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Carte IGN  IGN/Geoportail",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:18,tileSize:256,zoomOffset:0,bounds:Rt.latLngBounds(Rt.latLng(41.333,-5.566),Rt.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0})};o();const h=on.createPerformanceTracker(x=>{on.measure("initMap:setOptions",()=>{n.value=x,x.options.zoomSnap=.25,x.options.zoomDelta=.25,x.options.wheelPxPerZoomLevel=100,x.options.zoomAnimation=!0,x.options.fadeAnimation=!0,x.options.markerZoomAnimation=!0,x.options.minZoom=2,x.options.maxZoom=19,x.options.scrollWheelZoom=!0,x.options.doubleClickZoom=!0;const _=Rt.latLngBounds(Rt.latLng(-90,-180),Rt.latLng(90,180));x.setMaxBounds(_),x.options.maxBoundsViscosity=1,x.options.trackResize=!0;let P=null;x.getZoom(),x.on("zoomstart",()=>{x.getZoom(),x.options.zoomAnimation=!1,x.options.markerZoomAnimation=!1}),x.on("zoomend",()=>{P&&clearTimeout(P),P=setTimeout(()=>{setTimeout(()=>{x.options.zoomAnimation=!0,x.options.markerZoomAnimation=!0,x.invalidateSize({animate:!1,pan:!1});const U=x.getBounds(),N=x.options.maxBounds;N&&!U.intersects(N)&&x.panInsideBounds(N,{animate:!1})},250)},250)});const T=x._zoomAnimation;T&&(x._zoomAnimation=function(U){try{this._animatingZoom||T.call(this,U)}catch{console.warn("Animation de zoom interrompue, restauration de la vue..."),this._resetView(this.getCenter(),this.getZoom())}})},"useMapState"),on.measure("initMap:addInitialLayer",()=>{x&&x.whenReady(()=>{const _=i.value;if(u[_]){if(console.log(`Initialisation de la couche de base: ${_}`),s.value&&x.hasLayer(s.value))try{x.removeLayer(s.value),console.log("Couche active prcdente supprime")}catch(P){console.warn("Erreur lors de la suppression de la couche active prcdente:",P)}s.value=u[_];try{s.value.addTo(x),console.log(`Couche ${_} ajoute  la carte`)}catch(P){console.error(`Erreur lors de l'ajout de la couche ${_}:`,P)}}else console.warn(`Couche de base non disponible: ${_}`)})},"useMapState"),x.on("baselayerchange",_=>{const P=t("baselayerchange","useMapState",{layer:_.name});i.value=_.name,s.value=_.layer,P()}),e.value&&(x.on("movestart",()=>{t("mapMove","useMapState",{startCenter:x.getCenter()})}),x.on("moveend",()=>{t("mapMoveEnd","useMapState",{endCenter:x.getCenter()})()}),x.on("tileloadstart",()=>{t("tileLoad","useMapState")}),x.on("tileload",()=>{t("tileLoadEnd","useMapState")()}))},"initMap","useMapState"),d=on.createAsyncPerformanceTracker(async x=>{if(!n.value||!u[x]){console.warn(`Impossible de changer la carte de base: ${n.value?"type de carte non disponible":"carte non initialise"}`);return}try{if(i.value===x)return;console.log(`Changement de carte: ${i.value} -> ${x}`);const _=n.value,P=_.getCenter(),T=_.getZoom();_.options.zoomAnimation=!1,_.options.fadeAnimation=!1,_.options.markerZoomAnimation=!1;const U=u[x];if(s.value&&_.hasLayer(s.value))try{_.removeLayer(s.value),console.log(`Couche prcdente ${i.value} supprime`)}catch(N){console.warn("Erreur lors de la suppression de la couche active:",N)}try{U instanceof Rt.LayerGroup,U.addTo(_),console.log(`Nouvelle couche ${x} ajoute`)}catch(N){console.error("Erreur lors de l'ajout de la nouvelle couche:",N);try{_.hasLayer(U)&&_.removeLayer(U),U.addTo(_),console.log(`Rcupration: couche ${x} rajoute`)}catch(j){throw console.error("chec de la rcupration:",j),new Error("Impossible d'ajouter la nouvelle couche")}}s.value=U,i.value=x;try{_.setView(P,T,{animate:!1,duration:0,noMoveStart:!0}),console.log(`Vue rinitialise: centre=${P}, zoom=${T}`)}catch(N){console.warn("Erreur lors de la rinitialisation de la vue:",N)}try{_.invalidateSize({animate:!1,pan:!1})}catch(N){console.warn("Erreur lors du rafrachissement de la carte:",N)}setTimeout(()=>{_.options.zoomAnimation=!0,_.options.fadeAnimation=!0,_.options.markerZoomAnimation=!0,console.log("Animations restaures")},500)}catch(_){if(console.error("Erreur lors du changement de carte de base:",_),n.value)try{const P=n.value;P.eachLayer(U=>{(U instanceof Rt.TileLayer||U instanceof Rt.LayerGroup)&&P.removeLayer(U)});const T=u[x];T.addTo(P),s.value=T,i.value=x,P.options.zoomAnimation=!0,P.options.fadeAnimation=!0,P.options.markerZoomAnimation=!0,P.invalidateSize({animate:!1,pan:!1}),console.log("Rcupration effectue aprs erreur")}catch(P){console.error("Erreur lors de la rcupration aprs chec:",P)}}},"changeBaseMap","useMapState"),v=on.createAsyncPerformanceTracker(async()=>{if(!(!n.value||!r.value))try{const x=await on.measureAsync("searchLocation:fetchData",async()=>await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(r.value)}`),"useMapState"),_=await on.measureAsync("searchLocation:parseResponse",async()=>await x.json(),"useMapState");_&&_.length>0&&on.measure("searchLocation:updateView",()=>{const{lat:P,lon:T}=_[0];n.value.setView([P,T],13,{animate:i.value!=="Cadastre"})},"useMapState")}catch(x){console.error("Erreur lors de la recherche de localisation:",x)}},"searchLocation","useMapState");return{map:n,searchQuery:r,currentBaseMap:i,baseMaps:u,initMap:h,searchLocation:v,changeBaseMap:d,cleanup:()=>{const x=t("cleanup","useMapState");n.value&&(n.value.remove(),n.value=null),s.value&&(s.value=null),x()},isPerformanceEnabled:e}}const dy=Mp("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[],performanceMonitor:dd()}),getters:{getPlanById:e=>t=>e.plans.find(n=>n.id===t),hasUnsavedChanges:e=>e.unsavedChanges,getCurrentPlanHistory:e=>e.planHistory},actions:{async fetchPlans(){var n,r;const e=this.performanceMonitor.startMeasure("fetchPlans","IrrigationStore"),t=Da();this.loading=!0;try{let i="/plans/";const s={};t.isSalarie?s.salarie=(n=t.user)==null?void 0:n.id:t.isVisiteur&&(s.visiteur=(r=t.user)==null?void 0:r.id);const o=await this.performanceMonitor.measureAsync("fetchPlans_apiCall",()=>er.get(i,{params:s}),"IrrigationStore");this.plans=o.data}catch(i){throw this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,e()}},async fetchPlansWithDetails(){var n,r;const e=this.performanceMonitor.startMeasure("fetchPlansWithDetails","IrrigationStore"),t=Da();this.loading=!0;try{let i="/plans/";const s={include_details:!0};t.isSalarie?s.salarie=(n=t.user)==null?void 0:n.id:t.isVisiteur&&(s.visiteur=(r=t.user)==null?void 0:r.id);const o=await this.performanceMonitor.measureAsync("fetchPlansWithDetails_apiCall",()=>er.get(i,{params:s}),"IrrigationStore"),u=this.performanceMonitor.measure("fetchPlansWithDetails_processResponse",()=>o.data.map(h=>({...h,entreprise:typeof h.entreprise=="object"?h.entreprise:null,salarie:typeof h.salarie=="object"?h.salarie:null,visiteur:typeof h.visiteur=="object"?h.visiteur:null})),"IrrigationStore");return this.plans=u,{data:u}}catch(i){throw console.error("[IrrigationStore] Error fetching plans:",i),this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,e()}},async fetchClientPlans(e){this.loading=!0;try{return(await f0.getVisiteurPlans(e)).data}catch(t){throw this.error="Erreur lors du chargement des plans du client",t}finally{this.loading=!1}},async createPlan(e){var r;const t=this.performanceMonitor.startMeasure("createPlan","IrrigationStore");this.clearCurrentPlan(),this.loading=!0;const n=Kf();try{const i=Da();((r=i.user)==null?void 0:r.user_type)==="visiteur"&&(e={...e,visiteur:i.user.id,salarie_id:i.user.enterprise_id,entreprise_id:i.user.enterprise_id});const s=this.performanceMonitor.measure("createPlan_formatData",()=>({...e,entreprise:e.entreprise?typeof e.entreprise=="object"&&e.entreprise&&"id"in e.entreprise?e.entreprise.id:Number(e.entreprise):null,salarie:e.salarie?typeof e.salarie=="object"&&e.salarie&&"id"in e.salarie?e.salarie.id:Number(e.salarie):null,visiteur:e.visiteur?typeof e.visiteur=="object"&&e.visiteur&&"id"in e.visiteur?e.visiteur.id:Number(e.visiteur):null}),"IrrigationStore"),o=await this.performanceMonitor.measureAsync("createPlan_apiCall",()=>f0.createPlan(s),"IrrigationStore");return this.plans.push(o.data),n.success(`Le plan "${o.data.nom}" a t cr avec succs`),o.data}catch(i){const s=i instanceof Error?i.message:String(i);throw console.error("Error creating plan:",s),this.error=s,n.error(`Erreur lors de la cration du plan : ${s}`),i}finally{this.loading=!1,t()}},async createPlanForClient(e,t){this.clearCurrentPlan(),this.loading=!0;try{const n={...e,visiteur:t},r=await f0.createPlanForVisiteur(n);return this.plans.push(r.data),r.data}catch(n){const r=n instanceof Error?n.message:String(n);throw console.error("Error creating plan for client:",r),this.error="Erreur lors de la cration du plan pour le client",n}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(e){const t=this.performanceMonitor.startMeasure("savePlan","IrrigationStore");if(!this.unsavedChanges){console.log("[IrrigationStore][savePlan] Aucun changement  sauvegarder"),t();return}this.loading=!0;try{const n=await this.performanceMonitor.measureAsync("savePlan_apiCall",()=>{var r;return er.patch(`/plans/${e}/`,{...this.currentPlan,version:((r=this.currentPlan)==null?void 0:r.version)||1})},"IrrigationStore");return this.performanceMonitor.measure("savePlan_updateState",()=>{var i;const r=this.plans.findIndex(s=>s.id===e);r!==-1&&(this.plans[r]=n.data),((i=this.currentPlan)==null?void 0:i.id)===e&&(this.currentPlan=n.data)},"IrrigationStore"),this.unsavedChanges=!1,n.data}catch(n){throw console.error("[IrrigationStore][savePlan] ERREUR:",n),this.error="Erreur lors de la sauvegarde du plan",n}finally{this.loading=!1,t()}},async updatePlanDetails(e,t){const n=this.performanceMonitor.startMeasure("updatePlanDetails","IrrigationStore"),r=Kf();try{const i=await this.performanceMonitor.measureAsync("updatePlanDetails_apiCall",()=>{const{visiteur_id:s,salarie_id:o,entreprise_id:u,...h}=t,d={...h};return s!==void 0&&(d.visiteur_id=s),o!==void 0&&(d.salarie_id=o),u!==void 0&&(d.entreprise_id=u),er.patch(`/plans/${e}/`,d)},"IrrigationStore");return this.performanceMonitor.measure("updatePlanDetails_updateState",()=>{this.currentPlan&&this.currentPlan.id===e&&(this.currentPlan={...this.currentPlan,...i.data});const s=this.plans.findIndex(o=>o.id===e);s!==-1&&(this.plans[s]={...this.plans[s],...i.data})},"IrrigationStore"),i.data}catch(i){throw console.error("Erreur lors de la mise  jour du plan:",i),r.error(`Erreur lors de la mise  jour du plan : ${i instanceof Error?i.message:String(i)}`),i}finally{n()}},async fetchPlanHistory(e){this.loading=!0;try{const t=await er.get(`/plans/${e}/historique/`);return this.planHistory=t.data,t.data}catch(t){throw this.error="Erreur lors de la rcupration de l'historique",t}finally{this.loading=!1}},async restorePlanVersion(e,t){var n;this.loading=!0;try{const r=await er.post(`/plans/${e}/restaurer/`,{version_id:t});((n=this.currentPlan)==null?void 0:n.id)===e&&(this.currentPlan=r.data);const i=this.plans.findIndex(s=>s.id===e);return i!==-1&&(this.plans[i]=r.data),r.data}catch(r){throw this.error="Erreur lors de la restauration de la version",r}finally{this.loading=!1}},setCurrentPlan(e){this.currentPlan=e,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.unsavedChanges=!1,this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(e){var n;this.loading=!0;const t=Kf();try{const r=this.plans.find(i=>i.id===e);await f0.deletePlan(e),this.plans=this.plans.filter(i=>i.id!==e),((n=this.currentPlan)==null?void 0:n.id)===e&&this.clearCurrentPlan(),t.success(`Le plan "${(r==null?void 0:r.nom)||""}" a t supprim avec succs`)}catch(r){throw this.error="Erreur lors de la suppression du plan",t.error(`Erreur lors de la suppression du plan : ${r instanceof Error?r.message:String(r)}`),r}finally{this.loading=!1}}}});function JD(e){return e&&Array.isArray(e.points)&&e.points.length>0&&Array.isArray(e.points[0])&&e.points[0].length===2}function QD(e){if(!e||typeof e!="object")return console.log("[DrawingStore] ElevationData invalide: pas un objet",{data:e}),!1;const t=Array.isArray(e.points)&&e.points.length>0&&Array.isArray(e.points[0])&&e.points[0].length===2,n=typeof e.style=="object"&&e.style!==null,r=!e.elevationData||Array.isArray(e.elevationData)&&e.elevationData.every(i=>typeof i=="object"&&"distance"in i&&"elevation"in i);return t&&n&&r}function eI(e){return e&&Array.isArray(e.points)&&e.points.length>0&&Array.isArray(e.points[0])&&e.points[0].length===2}function _b(e){var t,n,r,i,s,o,u,h,d,v,y,x,_,P,T,U,N,j,Z,J,le,he,Le,V,F,Y,$;if(console.log("[DrawingStore] Conversion de la forme en lment",{type:(t=e.properties)==null?void 0:t.type,name:(r=(n=e.properties)==null?void 0:n.style)==null?void 0:r.name,properties:e.properties}),((i=e.properties)==null?void 0:i.type)==="Note"){const D=e.getLatLng();return{type_forme:"Note",data:{points:[[D.lng,D.lat]],style:{color:((s=e.properties.style)==null?void 0:s.color)||"#3388ff",weight:((o=e.properties.style)==null?void 0:o.weight)||3,opacity:((u=e.properties.style)==null?void 0:u.opacity)||1,fillColor:((h=e.properties.style)==null?void 0:h.fillColor)||"#3388ff",fillOpacity:((d=e.properties.style)==null?void 0:d.fillOpacity)||.2,name:((v=e.properties.style)==null?void 0:v.name)||""}}}}if(e instanceof nf||((y=e.properties)==null?void 0:y.type)==="ElevationLine")return{type_forme:"ElevationLine",data:{points:e.getLatLngs().map(I=>[I.lng,I.lat]),style:{color:((x=e.properties.style)==null?void 0:x.color)||"#FF4500",weight:((_=e.properties.style)==null?void 0:_.weight)||4,opacity:((P=e.properties.style)==null?void 0:P.opacity)||.8,name:((T=e.properties.style)==null?void 0:T.name)||""},elevationData:e.properties.elevationData,minElevation:e.properties.minElevation,maxElevation:e.properties.maxElevation,elevationGain:e.properties.elevationGain,elevationLoss:e.properties.elevationLoss,averageSlope:e.properties.averageSlope,maxSlope:e.properties.maxSlope}};if(e instanceof Hh||((U=e.properties)==null?void 0:U.type)==="Polygon")return{type_forme:"Polygon",data:{points:e.getLatLngs()[0].map(I=>[I.lng,I.lat]),style:{color:((N=e.properties.style)==null?void 0:N.color)||"#3388ff",weight:((j=e.properties.style)==null?void 0:j.weight)||3,opacity:((Z=e.properties.style)==null?void 0:Z.opacity)||1,fillColor:((J=e.properties.style)==null?void 0:J.fillColor)||"#3388ff",fillOpacity:((le=e.properties.style)==null?void 0:le.fillOpacity)||.2,name:((he=e.properties.style)==null?void 0:he.name)||""}}};if(e instanceof ks||((Le=e.properties)==null?void 0:Le.type)==="Line")return{type_forme:"Line",data:{points:e.getLatLngs().map(I=>[I.lng,I.lat]),style:{color:((V=e.properties.style)==null?void 0:V.color)||"#3388ff",weight:((F=e.properties.style)==null?void 0:F.weight)||3,opacity:((Y=e.properties.style)==null?void 0:Y.opacity)||1,name:(($=e.properties.style)==null?void 0:$.name)||""}}};throw new Error("Type de forme non reconnu")}function tI(e){var t,n,r,i,s,o,u,h,d,v,y,x,_,P,T,U,N,j,Z,J,le,he,Le,V,F,Y,$,D,k,I,W,G;switch(console.log("[DrawingStore] Conversion de l'lment stock en forme",{element:e}),e.type_forme){case"Polygon":{const K=e.data;if(!JD(K))return console.error("[DrawingStore] Donnes invalides pour Polygon"),null;const q=K.points.map(Ce=>Rn.latLng(Ce[1],Ce[0])),ve=new Hh([q],{color:((t=K.style)==null?void 0:t.color)||"#3388ff",weight:((n=K.style)==null?void 0:n.weight)||3,opacity:((r=K.style)==null?void 0:r.opacity)||1,fillColor:((i=K.style)==null?void 0:i.fillColor)||"#3388ff",fillOpacity:((s=K.style)==null?void 0:s.fillOpacity)||.2,dashArray:((o=K.style)==null?void 0:o.dashArray)||"",name:((u=K.style)==null?void 0:u.name)||""});return ve.updateProperties(),ve}case"ElevationLine":{const K=e.data;if(!QD(K))return console.error("[DrawingStore] Donnes invalides pour ElevationLine"),null;const q=K.points.map(Ce=>Rn.latLng(Ce[1],Ce[0])),ve=new nf(q,{color:((h=K.style)==null?void 0:h.color)||"#FF4500",weight:((d=K.style)==null?void 0:d.weight)||4,opacity:((v=K.style)==null?void 0:v.opacity)||.8,name:((y=K.style)==null?void 0:y.name)||""});return ve.properties={type:"ElevationLine",style:{...K.style||{},name:((x=K.style)==null?void 0:x.name)||""},elevationData:K.elevationData,minElevation:K.minElevation,maxElevation:K.maxElevation,elevationGain:K.elevationGain,elevationLoss:K.elevationLoss,averageSlope:K.averageSlope,maxSlope:K.maxSlope,dataSource:"restored"},K.elevationData&&ve.updateElevationProfile(),console.log("[DrawingStore] ElevationLine restored:",{points:q.length,hasElevationData:!!K.elevationData,name:(_=K.style)==null?void 0:_.name,properties:ve.properties}),ve}case"Line":{const K=e.data;if(!eI(K))return console.error("[DrawingStore] Donnes invalides pour Ligne"),null;const q=K.points.map(Ce=>Rn.latLng(Ce[1],Ce[0])),ve=new ks(q,{...K.style||{},name:((P=K.style)==null?void 0:P.name)||""});return ve.updateProperties(),ve}case"Rectangle":{const K=e.data;if(console.log("[DrawingStore][convertStoredElementToShape] Restauration Rectangle:",{data:K,bounds:K.bounds,width:K.width,height:K.height,rotation:K.rotation}),!K.bounds)return console.error("[DrawingStore] Donnes de bounds manquantes pour Rectangle"),null;const q=new Rn.LatLngBounds(Rn.latLng(K.bounds.southWest[1],K.bounds.southWest[0]),Rn.latLng(K.bounds.northEast[1],K.bounds.northEast[0])),ve=new Aa(q,{color:((T=K.style)==null?void 0:T.color)||"#3388ff",weight:((U=K.style)==null?void 0:U.weight)||3,opacity:((N=K.style)==null?void 0:N.opacity)||1,fillColor:((j=K.style)==null?void 0:j.fillColor)||"#3388ff",fillOpacity:((Z=K.style)==null?void 0:Z.fillOpacity)||.2,dashArray:((J=K.style)==null?void 0:J.dashArray)||"",name:((le=K.style)==null?void 0:le.name)||"",width:K.width,height:K.height});return K.rotation&&ve.setRotation(K.rotation),console.log("[DrawingStore][convertStoredElementToShape] Rectangle restaur:",{bounds:ve.getBounds(),dimensions:ve.getDimensions(),properties:ve.properties}),ve}case"Circle":{console.log("[DrawingStore] Traitement d'un Circle  partir de l'API",{id:e.id,data:e.data,hasName:((Le=(he=e.data)==null?void 0:he.style)==null?void 0:Le.name)!==void 0,name:(F=(V=e.data)==null?void 0:V.style)==null?void 0:F.name});const K=e.data;if(!K.center||!K.radius)return console.error("[DrawingStore] Donnes invalides pour Circle"),null;const q=Rn.circle([K.center[1],K.center[0]],{color:((Y=K.style)==null?void 0:Y.color)||"#3388ff",weight:(($=K.style)==null?void 0:$.weight)||3,opacity:((D=K.style)==null?void 0:D.opacity)||1,fillColor:((k=K.style)==null?void 0:k.fillColor)||"#3388ff",fillOpacity:((I=K.style)==null?void 0:I.fillOpacity)||.2,dashArray:((W=K.style)==null?void 0:W.dashArray)||"",radius:K.radius});return q.properties={type:"Circle",radius:K.radius,diameter:K.radius*2,surface:Math.PI*K.radius*K.radius,perimeter:2*Math.PI*K.radius,style:{...K.style||{},name:((G=K.style)==null?void 0:G.name)||""}},console.log("[DrawingStore] Cercle cr:",{centerType:typeof K.center,center:K.center,radius:K.radius,style:q.properties.style,name:q.properties.style.name}),q}default:return console.warn("[DrawingStore] Type non gr pour la restauration:",e.type_forme),null}}const f3=Mp("drawing",{state:()=>({currentMapId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null,performanceMonitor:dd()}),getters:{hasUnsavedChanges:e=>e.unsavedChanges,getCurrentElements:e=>e.elements,getSelectedElement:e=>e.selectedElement,getCurrentTool:e=>e.currentTool,getCurrentStyle:e=>e.currentStyle,getLastUsedType:e=>e.lastUsedType},actions:{setCurrentPlan(e){window.dispatchEvent(new CustomEvent("clearControlPoints")),this.currentMapId=e,e===null&&this.clearElements(),this.selectedElement=null,this.unsavedChanges=!1,this.currentTool="",this.lastUsedType=null,this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2}},clearCurrentPlan(){(this.currentMapId!==null||this.elements.length>0)&&(this.currentMapId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null)},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.error=null},addElement(e){var n;const t=this.performanceMonitor.startMeasure("addElement","DrawingStore");try{if(console.log("[DrawingStore] Ajout d'un lment",{element:e,isLeafletLayer:e instanceof Rn.Layer,hasProperties:!!e.properties,properties:e.properties,type:(n=e.properties)==null?void 0:n.type}),e instanceof Rn.Layer&&e.properties){const r=this.performanceMonitor.measure("addElement_convert",()=>_b(e),"DrawingStore");console.log("[DrawingStore] lment converti avant ajout",{original:e,converted:r,type:r.type_forme,data:r.data}),this.elements.push(r)}else!e.type_forme&&this.lastUsedType&&(e.type_forme=this.lastUsedType),this.elements.push(e);this.unsavedChanges=!0}finally{t()}},updateElement(e){const t=this.elements.findIndex(n=>n.id===e.id);if(t!==-1){const n=this.elements[t].type_forme;this.elements[t]={...e,type_forme:n},this.unsavedChanges=!0}},removeElement(e){const t=this.elements.findIndex(n=>n.id===e);t!==-1&&(this.elements.splice(t,1),this.unsavedChanges=!0)},selectElement(e){this.selectedElement=e},setCurrentTool(e){this.currentTool=e,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(e)&&(this.lastUsedType=e)},setCurrentStyle(e){if(!e||Object.keys(e).length===0){this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2};return}this.currentStyle={...this.currentStyle,...e}},async loadPlanElements(e){const t=this.performanceMonitor.startMeasure("loadPlanElements","DrawingStore");if(this.currentMapId===e&&this.elements.length>0)return console.log(`[DrawingStore] Plan ${e} dj charg avec ${this.elements.length} lments`),t(),this.elements;this.loading=!0;try{console.log("[DrawingStore] Dbut du chargement du plan",{planId:e});const r=(await this.performanceMonitor.measureAsync("loadPlanElements_apiCall",()=>er.get(`/plans/${e}/`),"DrawingStore")).data;return console.log("[DrawingStore] Donnes du plan reues",{formes:r.formes,preferences:r.preferences}),r.formes&&Array.isArray(r.formes)&&r.formes.forEach((i,s)=>{var o,u,h;console.log(`[DrawingStore] Analyse dtaille forme ${s}:`,{id:i.id,type_forme:i.type_forme,hasData:!!i.data,dataKeys:i.data?Object.keys(i.data):[],name:(o=i.data)==null?void 0:o.name,hasName:i.data&&"name"in i.data,centerType:(u=i.data)!=null&&u.center?typeof i.data.center:"undefined",center:(h=i.data)==null?void 0:h.center})}),this.elements=r.formes.map(i=>{var s;if(console.log("[DrawingStore] Traitement de la forme stocke",{id:i.id,type_forme:i.type_forme,data:i.data}),i.type_forme)return console.log("[DrawingStore] Forme dj au format lment",{type_forme:i.type_forme,data:i.data,hasName:i.data&&"name"in i.data,name:(s=i.data)==null?void 0:s.name}),{id:i.id,type_forme:i.type_forme,data:i.data||{}};try{const o=tI(i);if(o)return console.log("[DrawingStore] Forme convertie avec succs",{originalType:i.type_forme,convertedType:o.type,properties:o.properties}),_b(o)}catch(o){console.error("[DrawingStore] Erreur lors de la conversion de la forme",{error:o,forme:i})}return console.warn("[DrawingStore] Utilisation de la forme sans conversion",{type_forme:i.type_forme,data:i.data}),i}),console.log(`[DrawingStore] Plan ${e} - Charg ${this.elements.length} lments`,{elements:this.elements.map(i=>({id:i.id,type_forme:i.type_forme}))}),this.currentMapId=e,this.unsavedChanges=!1,r.preferences&&(console.log("[DrawingStore] Chargement des prfrences",r.preferences),r.preferences.currentTool&&this.setCurrentTool(r.preferences.currentTool),r.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...r.preferences.currentStyle}),r.preferences.lastUsedType&&(this.lastUsedType=r.preferences.lastUsedType)),this.elements}catch(n){throw console.error("[DrawingStore] Erreur lors du chargement des lments:",n),this.error="Erreur lors du chargement des lments du plan",n}finally{this.loading=!1,t()}},async saveToPlan(e,t){const n=this.performanceMonitor.startMeasure("saveToPlan","DrawingStore");this.loading=!0;try{const r=e||this.currentMapId;if(console.log("[DrawingStore][saveToPlan] Dbut de la sauvegarde",{targetPlanId:r,currentPlanId:this.currentMapId,elementsCount:this.elements.length,elementsToDelete:t==null?void 0:t.elementsToDelete}),!r)throw new Error("Aucun plan slectionn pour la sauvegarde");const i=this.performanceMonitor.measure("saveToPlan_prepareElements",()=>this.elements.map(h=>({...h,type_forme:h.type_forme||this.lastUsedType})),"DrawingStore"),s=(t==null?void 0:t.elementsToDelete)||[],o=`/plans/${r}/save_with_elements/`,u=await this.performanceMonitor.measureAsync("saveToPlan_apiCall",()=>er.post(o,{formes:i,connexions:[],annotations:[],elementsToDelete:s,preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}}),"DrawingStore");return this.elements=this.performanceMonitor.measure("saveToPlan_processResponse",()=>u.data.formes.map(h=>({...h,type_forme:h.type_forme})),"DrawingStore"),this.unsavedChanges=!1,u.data}catch(r){throw console.error("[DrawingStore][saveToPlan] ERREUR:",r),console.error("[DrawingStore][saveToPlan] Stack trace:",r instanceof Error?r.stack:"No stack trace"),this.error="Erreur lors de la sauvegarde du plan",r}finally{this.loading=!1,n()}}}}),nI={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[3001] overflow-y-auto"},rI={class:"bg-white w-full h-full md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 relative overflow-y-auto"},iI={class:"p-4 md:p-6 pt-0 overflow-y-auto max-h-[calc(100vh-80px)] md:max-h-[calc(90vh-80px)]"},oI={key:0,class:"mb-4"},sI={key:0,class:"animate-pulse"},aI=["value"],lI={key:1,class:"mb-4"},uI={key:0,class:"animate-pulse"},cI=["disabled"],hI={value:null},fI=["value"],dI={key:2,class:"mb-4"},pI={key:0,class:"animate-pulse"},gI=["disabled"],mI={value:null},vI=["value"],yI={class:"mb-4"},_I={class:"mb-6"},bI={class:"flex justify-end space-x-3"},wI=["disabled"],xI={key:0},LI={key:1},d3=Ns({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","salarieSelected","visiteurSelected"],setup(e,{expose:t,emit:n}){function r(k){return k?typeof k=="object"?k.id:k:null}function i(k){if(k===null)throw new Error("Invalid ID");return k}const s=e,o=n,u=Da(),h=dy(),d=f3(),v=Gt(!1),y=Gt(null),x=Gt([]),_=Gt([]),P=Gt([]),T=Gt(null),U=Gt(null),N=Gt(!1),j=Gt(!1),Z=Gt(!1),J=Gt({nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),le=ir(()=>{var k,I,W;return((k=u.user)==null?void 0:k.user_type)==="admin"?J.value.nom.trim()&&J.value.entreprise&&J.value.salarie&&J.value.visiteur:((I=u.user)==null?void 0:I.user_type)==="entreprise"?J.value.nom.trim()&&J.value.salarie&&J.value.visiteur:((W=u.user)==null?void 0:W.user_type)==="salarie"?J.value.nom.trim()&&J.value.visiteur:J.value.nom.trim()});hs(()=>J.value.entreprise,async k=>{if(!s.modelValue)return;J.value.salarie=null,J.value.visiteur=null,_.value=[];const I=r(k);console.log("[NewPlanModal] Entreprise slectionne:",I),I?await he(I):x.value=[]}),hs(()=>J.value.salarie,async k=>{if(!s.modelValue)return;J.value.visiteur=null;const I=r(k);I?await Le(I):_.value=[]}),hs(()=>s.modelValue,k=>{var I,W,G;k?((I=u.user)==null?void 0:I.user_type)==="admin"?$():((W=u.user)==null?void 0:W.user_type)==="entreprise"?he(u.user.id):((G=u.user)==null?void 0:G.user_type)==="salarie"&&Le(u.user.id):(J.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},T.value=null,U.value=null,_.value=[],x.value=[],P.value=[],y.value=null)});async function he(k){N.value=!0;try{console.log("[NewPlanModal] Chargement des salaries pour entreprise:",k);const I=await vl.getUsers({role:"SALARIE",entreprise:k});console.log("[NewPlanModal] Rponse salaries:",I.data),x.value=I.data}catch(I){console.error("[NewPlanModal] Error loading salaries:",I),x.value=[]}finally{N.value=!1}}async function Le(k){j.value=!0;try{const I=await vl.getUsers({role:"VISITEUR",salarie:k});_.value=I.data}catch(I){console.error("[NewPlanModal] Error loading visiteurs:",I),_.value=[]}finally{j.value=!1}}async function V(k){s.modelValue&&(T.value=k,J.value.salarie=k.id,await Le(k.id),o("salarieSelected",k))}function F(k){s.modelValue&&(U.value=k,J.value.visiteur=k.id,o("visiteurSelected",k))}function Y(){o("update:modelValue",!1),J.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},T.value=null,U.value=null,_.value=[],y.value=null}async function $(){Z.value=!0;try{const k=await u.fetchEnterprises();P.value=k}catch(k){console.error("[NewPlanModal] Error loading entreprises:",k),P.value=[]}finally{Z.value=!1}}async function D(){var k,I;y.value=null,v.value=!0;try{const W={nom:J.value.nom.trim(),description:J.value.description.trim()},G=u.user;if(!G)throw new Error("User not found");if(G.user_type==="admin"){if(!J.value.entreprise||!J.value.salarie||!J.value.visiteur)throw new Error("Missing required fields");W.entreprise=i(r(J.value.entreprise)),W.salarie=i(r(J.value.salarie)),W.visiteur=J.value.visiteur}else if(G.user_type==="entreprise"){if(!J.value.salarie||!J.value.visiteur)throw new Error("Missing required fields");W.entreprise=G.id,W.salarie=i(r(J.value.salarie)),W.visiteur=J.value.visiteur}else if(G.user_type==="salarie"){if(!G.entreprise||!J.value.visiteur)throw new Error("Missing required fields");W.entreprise=G.entreprise.id,W.salarie=G.id,W.visiteur=J.value.visiteur}else if(G.user_type==="visiteur"){if(!G.entreprise||!G.salarie)throw new Error("Missing required fields");W.entreprise=G.entreprise.id,W.salarie=G.salarie.id,W.visiteur=G.id}console.log("Donnes du plan  crer:",W),h.clearCurrentPlan(),d.setCurrentPlan(null);const K=await h.createPlan(W);o("created",K.id),Y()}catch(W){console.error("[NewPlanModal] Error creating plan:",W),console.error("Response data:",(k=W.response)==null?void 0:k.data);let G="Une erreur est survenue lors de la cration du plan";(I=W.response)!=null&&I.data&&(typeof W.response.data=="object"?G=Object.entries(W.response.data).map(([K,q])=>Array.isArray(q)?`${K}: ${q.join(", ")}`:`${K}: ${q}`).join(`
`):typeof W.response.data=="string"&&(G=W.response.data)),y.value=G}finally{v.value=!1}}return t({salaries:x,visiteurs:_,selectedSalarie:T,selectedVisiteur:U,loadSalaries:he,loadVisiteurs:Le,selectSalarie:V,selectVisiteur:F}),(k,I)=>{var W,G,K,q;return k.modelValue?(Je(),tt("div",nI,[M("div",rI,[M("div",{class:"flex justify-between items-center mb-4 sticky top-0 bg-white p-4 md:p-6 pb-4 border-b z-10"},[I[6]||(I[6]=M("h2",{class:"text-xl font-semibold text-gray-900"},"Crer un nouveau plan",-1)),M("button",{onClick:Y,class:"text-gray-400 hover:text-gray-500"},I[5]||(I[5]=[M("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),M("div",iI,[zn(u).isAdmin?(Je(),tt("div",oI,[I[9]||(I[9]=M("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Entreprise",-1)),Z.value?(Je(),tt("div",sI,I[7]||(I[7]=[M("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Zn((Je(),tt("select",{key:1,"onUpdate:modelValue":I[0]||(I[0]=ve=>J.value.entreprise=ve),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[I[8]||(I[8]=M("option",{value:null},"Slectionnez une entreprise",-1)),(Je(!0),tt(On,null,Sr(P.value,ve=>(Je(),tt("option",{key:ve.id,value:ve.id},Zt(zn(zl)(ve)),9,aI))),128))],512)),[[Jo,J.value.entreprise]])])):xn("",!0),((W=zn(u).user)==null?void 0:W.user_type)==="admin"||((G=zn(u).user)==null?void 0:G.user_type)==="entreprise"?(Je(),tt("div",lI,[I[11]||(I[11]=M("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Salarie",-1)),N.value?(Je(),tt("div",uI,I[10]||(I[10]=[M("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Zn((Je(),tt("select",{key:1,id:"edit-salarie","onUpdate:modelValue":I[1]||(I[1]=ve=>J.value.salarie=ve),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:zn(u).isAdmin&&!J.value.entreprise},[M("option",hI,Zt(x.value.length?"Slectionnez un salarie":"Aucun salarie disponible"),1),(Je(!0),tt(On,null,Sr(x.value,ve=>(Je(),tt("option",{key:ve.id,value:ve.id},Zt(zn(zl)(ve)),9,fI))),128))],8,cI)),[[Jo,J.value.salarie]])])):xn("",!0),((K=zn(u).user)==null?void 0:K.user_type)!=="visiteur"?(Je(),tt("div",dI,[I[13]||(I[13]=M("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Visiteur",-1)),j.value?(Je(),tt("div",pI,I[12]||(I[12]=[M("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Zn((Je(),tt("select",{key:1,id:"edit-visiteur","onUpdate:modelValue":I[2]||(I[2]=ve=>J.value.visiteur=ve),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!_.value.length||((q=zn(u).user)==null?void 0:q.user_type)!=="salarie"&&!J.value.salarie},[M("option",mI,Zt(_.value.length?"Slectionnez un visiteur":"Aucun visiteur disponible"),1),(Je(!0),tt(On,null,Sr(_.value,ve=>(Je(),tt("option",{key:ve.id,value:ve.id},Zt(zn(zl)(ve)),9,vI))),128))],8,gI)),[[Jo,J.value.visiteur]])])):xn("",!0),M("div",yI,[I[14]||(I[14]=M("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),Zn(M("input",{id:"edit-nom","onUpdate:modelValue":I[3]||(I[3]=ve=>J.value.nom=ve),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[Kr,J.value.nom]])]),M("div",_I,[I[15]||(I[15]=M("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),Zn(M("textarea",{id:"edit-description","onUpdate:modelValue":I[4]||(I[4]=ve=>J.value.description=ve),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[Kr,J.value.description]])]),M("div",bI,[M("button",{onClick:Y,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),M("button",{onClick:D,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!le.value||v.value},[v.value?(Je(),tt("span",xI,"Cration en cours...")):(Je(),tt("span",LI,"Crer"))],8,wI)])])])])):xn("",!0)}}});function Oi(e){"@babel/helpers - typeof";return Oi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oi(e)}var Ba=Uint8Array,$l=Uint16Array,py=Int32Array,nm=new Ba([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),rm=new Ba([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),g1=new Ba([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),p3=function(e,t){for(var n=new $l(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var i=new py(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},g3=p3(nm,2),m3=g3.b,m1=g3.r;m3[28]=258,m1[258]=28;var v3=p3(rm,0),SI=v3.b,bb=v3.r,v1=new $l(32768);for(var uo=0;uo<32768;++uo){var Jc=(uo&43690)>>1|(uo&21845)<<1;Jc=(Jc&52428)>>2|(Jc&13107)<<2,Jc=(Jc&61680)>>4|(Jc&3855)<<4,v1[uo]=((Jc&65280)>>8|(Jc&255)<<8)>>1}var hc=function(e,t,n){for(var r=e.length,i=0,s=new $l(t);i<r;++i)e[i]&&++s[e[i]-1];var o=new $l(t);for(i=1;i<t;++i)o[i]=o[i-1]+s[i-1]<<1;var u;if(n){u=new $l(1<<t);var h=15-t;for(i=0;i<r;++i)if(e[i])for(var d=i<<4|e[i],v=t-e[i],y=o[e[i]-1]++<<v,x=y|(1<<v)-1;y<=x;++y)u[v1[y]>>h]=d}else for(u=new $l(r),i=0;i<r;++i)e[i]&&(u[i]=v1[o[e[i]-1]++]>>15-e[i]);return u},vh=new Ba(288);for(var uo=0;uo<144;++uo)vh[uo]=8;for(var uo=144;uo<256;++uo)vh[uo]=9;for(var uo=256;uo<280;++uo)vh[uo]=7;for(var uo=280;uo<288;++uo)vh[uo]=8;var Lp=new Ba(32);for(var uo=0;uo<32;++uo)Lp[uo]=5;var EI=hc(vh,9,0),CI=hc(vh,9,1),PI=hc(Lp,5,0),AI=hc(Lp,5,1),ov=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},ku=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},sv=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},gy=function(e){return(e+7)/8|0},y3=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new Ba(e.subarray(t,n))},MI=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Du=function(e,t,n){var r=new Error(t||MI[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,Du),!n)throw r;return r},kI=function(e,t,n,r){var i=e.length,s=0;if(!i||t.f&&!t.l)return n||new Ba(0);var o=!n,u=o||t.i!=2,h=t.i;o&&(n=new Ba(i*3));var d=function(Me){var Ze=n.length;if(Me>Ze){var oe=new Ba(Math.max(Ze*2,Me));oe.set(n),n=oe}},v=t.f||0,y=t.p||0,x=t.b||0,_=t.l,P=t.d,T=t.m,U=t.n,N=i*8;do{if(!_){v=ku(e,y,1);var j=ku(e,y+1,3);if(y+=3,j)if(j==1)_=CI,P=AI,T=9,U=5;else if(j==2){var he=ku(e,y,31)+257,Le=ku(e,y+10,15)+4,V=he+ku(e,y+5,31)+1;y+=14;for(var F=new Ba(V),Y=new Ba(19),$=0;$<Le;++$)Y[g1[$]]=ku(e,y+$*3,7);y+=Le*3;for(var D=ov(Y),k=(1<<D)-1,I=hc(Y,D,1),$=0;$<V;){var W=I[ku(e,y,k)];y+=W&15;var Z=W>>4;if(Z<16)F[$++]=Z;else{var G=0,K=0;for(Z==16?(K=3+ku(e,y,3),y+=2,G=F[$-1]):Z==17?(K=3+ku(e,y,7),y+=3):Z==18&&(K=11+ku(e,y,127),y+=7);K--;)F[$++]=G}}var q=F.subarray(0,he),ve=F.subarray(he);T=ov(q),U=ov(ve),_=hc(q,T,1),P=hc(ve,U,1)}else Du(1);else{var Z=gy(y)+4,J=e[Z-4]|e[Z-3]<<8,le=Z+J;if(le>i){h&&Du(0);break}u&&d(x+J),n.set(e.subarray(Z,le),x),t.b=x+=J,t.p=y=le*8,t.f=v;continue}if(y>N){h&&Du(0);break}}u&&d(x+131072);for(var Ce=(1<<T)-1,Xe=(1<<U)-1,B=y;;B=y){var G=_[sv(e,y)&Ce],te=G>>4;if(y+=G&15,y>N){h&&Du(0);break}if(G||Du(2),te<256)n[x++]=te;else if(te==256){B=y,_=null;break}else{var se=te-254;if(te>264){var $=te-257,ae=nm[$];se=ku(e,y,(1<<ae)-1)+m3[$],y+=ae}var we=P[sv(e,y)&Xe],fe=we>>4;we||Du(3),y+=we&15;var ve=SI[fe];if(fe>3){var ae=rm[fe];ve+=sv(e,y)&(1<<ae)-1,y+=ae}if(y>N){h&&Du(0);break}u&&d(x+131072);var Q=x+se;if(x<ve){var ue=s-ve,Re=Math.min(ve,Q);for(ue+x<0&&Du(3);x<Re;++x)n[x]=r[ue+x]}for(;x<Q;++x)n[x]=n[x-ve]}}t.l=_,t.p=B,t.b=x,t.f=v,_&&(v=1,t.m=T,t.d=P,t.n=U)}while(!v);return x!=n.length&&o?y3(n,0,x):n.subarray(0,x)},Tc=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},kd=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},av=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,s=n.slice();if(!i)return{t:b3,l:0};if(i==1){var o=new Ba(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(le,he){return le.f-he.f}),n.push({s:-1,f:25001});var u=n[0],h=n[1],d=0,v=1,y=2;for(n[0]={s:-1,f:u.f+h.f,l:u,r:h};v!=i-1;)u=n[n[d].f<n[y].f?d++:y++],h=n[d!=v&&n[d].f<n[y].f?d++:y++],n[v++]={s:-1,f:u.f+h.f,l:u,r:h};for(var x=s[0].s,r=1;r<i;++r)s[r].s>x&&(x=s[r].s);var _=new $l(x+1),P=y1(n[v-1],_,0);if(P>t){var r=0,T=0,U=P-t,N=1<<U;for(s.sort(function(he,Le){return _[Le.s]-_[he.s]||he.f-Le.f});r<i;++r){var j=s[r].s;if(_[j]>t)T+=N-(1<<P-_[j]),_[j]=t;else break}for(T>>=U;T>0;){var Z=s[r].s;_[Z]<t?T-=1<<t-_[Z]++-1:++r}for(;r>=0&&T;--r){var J=s[r].s;_[J]==t&&(--_[J],++T)}P=t}return{t:new Ba(_),l:P}},y1=function(e,t,n){return e.s==-1?Math.max(y1(e.l,t,n+1),y1(e.r,t,n+1)):t[e.s]=n},wb=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new $l(++t),r=0,i=e[0],s=1,o=function(h){n[r++]=h},u=1;u<=t;++u)if(e[u]==i&&u!=t)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=e[u]}return{c:n.subarray(0,r),n:t}},Td=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},_3=function(e,t,n){var r=n.length,i=gy(t+2);e[i]=r&255,e[i+1]=r>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var s=0;s<r;++s)e[i+s+4]=n[s];return(i+4+r)*8},xb=function(e,t,n,r,i,s,o,u,h,d,v){Tc(t,v++,n),++i[256];for(var y=av(i,15),x=y.t,_=y.l,P=av(s,15),T=P.t,U=P.l,N=wb(x),j=N.c,Z=N.n,J=wb(T),le=J.c,he=J.n,Le=new $l(19),V=0;V<j.length;++V)++Le[j[V]&31];for(var V=0;V<le.length;++V)++Le[le[V]&31];for(var F=av(Le,7),Y=F.t,$=F.l,D=19;D>4&&!Y[g1[D-1]];--D);var k=d+5<<3,I=Td(i,vh)+Td(s,Lp)+o,W=Td(i,x)+Td(s,T)+o+14+3*D+Td(Le,Y)+2*Le[16]+3*Le[17]+7*Le[18];if(h>=0&&k<=I&&k<=W)return _3(t,v,e.subarray(h,h+d));var G,K,q,ve;if(Tc(t,v,1+(W<I)),v+=2,W<I){G=hc(x,_,0),K=x,q=hc(T,U,0),ve=T;var Ce=hc(Y,$,0);Tc(t,v,Z-257),Tc(t,v+5,he-1),Tc(t,v+10,D-4),v+=14;for(var V=0;V<D;++V)Tc(t,v+3*V,Y[g1[V]]);v+=3*D;for(var Xe=[j,le],B=0;B<2;++B)for(var te=Xe[B],V=0;V<te.length;++V){var se=te[V]&31;Tc(t,v,Ce[se]),v+=Y[se],se>15&&(Tc(t,v,te[V]>>5&127),v+=te[V]>>12)}}else G=EI,K=vh,q=PI,ve=Lp;for(var V=0;V<u;++V){var ae=r[V];if(ae>255){var se=ae>>18&31;kd(t,v,G[se+257]),v+=K[se+257],se>7&&(Tc(t,v,ae>>23&31),v+=nm[se]);var we=ae&31;kd(t,v,q[we]),v+=ve[we],we>3&&(kd(t,v,ae>>5&8191),v+=rm[we])}else kd(t,v,G[ae]),v+=K[ae]}return kd(t,v,G[256]),v+K[256]},TI=new py([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),b3=new Ba(0),BI=function(e,t,n,r,i,s){var o=s.z||e.length,u=new Ba(r+o+5*(1+Math.ceil(o/7e3))+i),h=u.subarray(r,u.length-i),d=s.l,v=(s.r||0)&7;if(t){v&&(h[0]=s.r>>3);for(var y=TI[t-1],x=y>>13,_=y&8191,P=(1<<n)-1,T=s.p||new $l(32768),U=s.h||new $l(P+1),N=Math.ceil(n/3),j=2*N,Z=function(me){return(e[me]^e[me+1]<<N^e[me+2]<<j)&P},J=new py(25e3),le=new $l(288),he=new $l(32),Le=0,V=0,F=s.i||0,Y=0,$=s.w||0,D=0;F+2<o;++F){var k=Z(F),I=F&32767,W=U[k];if(T[I]=W,U[k]=I,$<=F){var G=o-F;if((Le>7e3||Y>24576)&&(G>423||!d)){v=xb(e,h,0,J,le,he,V,Y,D,F-D,v),Y=Le=V=0,D=F;for(var K=0;K<286;++K)le[K]=0;for(var K=0;K<30;++K)he[K]=0}var q=2,ve=0,Ce=_,Xe=I-W&32767;if(G>2&&k==Z(F-Xe))for(var B=Math.min(x,G)-1,te=Math.min(32767,F),se=Math.min(258,G);Xe<=te&&--Ce&&I!=W;){if(e[F+q]==e[F+q-Xe]){for(var ae=0;ae<se&&e[F+ae]==e[F+ae-Xe];++ae);if(ae>q){if(q=ae,ve=Xe,ae>B)break;for(var we=Math.min(Xe,ae-2),fe=0,K=0;K<we;++K){var Q=F-Xe+K&32767,ue=T[Q],Re=Q-ue&32767;Re>fe&&(fe=Re,W=Q)}}}I=W,W=T[I],Xe+=I-W&32767}if(ve){J[Y++]=268435456|m1[q]<<18|bb[ve];var Me=m1[q]&31,Ze=bb[ve]&31;V+=nm[Me]+rm[Ze],++le[257+Me],++he[Ze],$=F+q,++Le}else J[Y++]=e[F],++le[e[F]]}}for(F=Math.max(F,$);F<o;++F)J[Y++]=e[F],++le[e[F]];v=xb(e,h,d,J,le,he,V,Y,D,F-D,v),d||(s.r=v&7|h[v/8|0]<<3,v-=7,s.h=U,s.p=T,s.i=F,s.w=$)}else{for(var F=s.w||0;F<o+d;F+=65535){var oe=F+65535;oe>=o&&(h[v/8|0]=d,oe=o),v=_3(h,v+1,e.subarray(F,oe))}s.i=o}return y3(u,0,r+gy(v)+i)},w3=function(){var e=1,t=0;return{p:function(n){for(var r=e,i=t,s=n.length|0,o=0;o!=s;){for(var u=Math.min(o+2655,s);o<u;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}e=r,t=i},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},OI=function(e,t,n,r,i){if(!i&&(i={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),o=new Ba(s.length+e.length);o.set(s),o.set(e,s.length),e=o,i.w=s.length}return BI(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,i)},x3=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},NI=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=w3();i.p(t.dictionary),x3(e,2,i.d())}},DI=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Du(6,"invalid zlib data"),(e[1]>>5&1)==1&&Du(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function _1(e,t){t||(t={});var n=w3();n.p(e);var r=OI(e,t,t.dictionary?6:2,4);return NI(r,t),x3(r,r.length-4,n.d()),r}function II(e,t){return kI(e.subarray(DI(e),-4),{i:2},t,t)}var RI=typeof TextDecoder<"u"&&new TextDecoder,FI=0;try{RI.decode(b3,{stream:!0}),FI=1}catch{}var br=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function lv(){br.console&&typeof br.console.log=="function"&&br.console.log.apply(br.console,arguments)}var Ki={log:lv,warn:function(e){br.console&&(typeof br.console.warn=="function"?br.console.warn.apply(br.console,arguments):lv.call(null,arguments))},error:function(e){br.console&&(typeof br.console.error=="function"?br.console.error.apply(br.console,arguments):lv(e))}};function uv(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){Fh(r.response,t,n)},r.onerror=function(){Ki.error("could not download file")},r.send()}function Lb(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function m0(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var rp,b1,Fh=br.saveAs||((typeof window>"u"?"undefined":Oi(window))!=="object"||window!==br?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=br.URL||br.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?Lb(i.href)?uv(e,t,n):m0(i,i.target="_blank"):m0(i)):(i.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){m0(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(Lb(e))uv(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){m0(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Oi(s)!=="object"&&(Ki.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return uv(e,t,n);var i=e.type==="application/octet-stream",s=/constructor/i.test(br.HTMLElement)||br.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Oi(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var v=u.result;v=o?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=v:location=v,r=null},u.readAsDataURL(e)}else{var h=br.URL||br.webkitURL,d=h.createObjectURL(e);r?r.location=d:location.href=d,r=null,setTimeout(function(){h.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function L3(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(e);o&&(t=s(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),h=this.g.toString(16),d=this.b.toString(16);return u.length==1&&(u="0"+u),h.length==1&&(h="0"+h),d.length==1&&(d="0"+d),"#"+u+h+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function cv(e,t){var n=e[0],r=e[1],i=e[2],s=e[3];n=La(n,r,i,s,t[0],7,-680876936),s=La(s,n,r,i,t[1],12,-389564586),i=La(i,s,n,r,t[2],17,606105819),r=La(r,i,s,n,t[3],22,-1044525330),n=La(n,r,i,s,t[4],7,-176418897),s=La(s,n,r,i,t[5],12,1200080426),i=La(i,s,n,r,t[6],17,-1473231341),r=La(r,i,s,n,t[7],22,-45705983),n=La(n,r,i,s,t[8],7,1770035416),s=La(s,n,r,i,t[9],12,-1958414417),i=La(i,s,n,r,t[10],17,-42063),r=La(r,i,s,n,t[11],22,-1990404162),n=La(n,r,i,s,t[12],7,1804603682),s=La(s,n,r,i,t[13],12,-40341101),i=La(i,s,n,r,t[14],17,-1502002290),n=Sa(n,r=La(r,i,s,n,t[15],22,1236535329),i,s,t[1],5,-165796510),s=Sa(s,n,r,i,t[6],9,-1069501632),i=Sa(i,s,n,r,t[11],14,643717713),r=Sa(r,i,s,n,t[0],20,-373897302),n=Sa(n,r,i,s,t[5],5,-701558691),s=Sa(s,n,r,i,t[10],9,38016083),i=Sa(i,s,n,r,t[15],14,-660478335),r=Sa(r,i,s,n,t[4],20,-405537848),n=Sa(n,r,i,s,t[9],5,568446438),s=Sa(s,n,r,i,t[14],9,-1019803690),i=Sa(i,s,n,r,t[3],14,-187363961),r=Sa(r,i,s,n,t[8],20,1163531501),n=Sa(n,r,i,s,t[13],5,-1444681467),s=Sa(s,n,r,i,t[2],9,-51403784),i=Sa(i,s,n,r,t[7],14,1735328473),n=Ea(n,r=Sa(r,i,s,n,t[12],20,-1926607734),i,s,t[5],4,-378558),s=Ea(s,n,r,i,t[8],11,-2022574463),i=Ea(i,s,n,r,t[11],16,1839030562),r=Ea(r,i,s,n,t[14],23,-35309556),n=Ea(n,r,i,s,t[1],4,-1530992060),s=Ea(s,n,r,i,t[4],11,1272893353),i=Ea(i,s,n,r,t[7],16,-155497632),r=Ea(r,i,s,n,t[10],23,-1094730640),n=Ea(n,r,i,s,t[13],4,681279174),s=Ea(s,n,r,i,t[0],11,-358537222),i=Ea(i,s,n,r,t[3],16,-722521979),r=Ea(r,i,s,n,t[6],23,76029189),n=Ea(n,r,i,s,t[9],4,-640364487),s=Ea(s,n,r,i,t[12],11,-421815835),i=Ea(i,s,n,r,t[15],16,530742520),n=Ca(n,r=Ea(r,i,s,n,t[2],23,-995338651),i,s,t[0],6,-198630844),s=Ca(s,n,r,i,t[7],10,1126891415),i=Ca(i,s,n,r,t[14],15,-1416354905),r=Ca(r,i,s,n,t[5],21,-57434055),n=Ca(n,r,i,s,t[12],6,1700485571),s=Ca(s,n,r,i,t[3],10,-1894986606),i=Ca(i,s,n,r,t[10],15,-1051523),r=Ca(r,i,s,n,t[1],21,-2054922799),n=Ca(n,r,i,s,t[8],6,1873313359),s=Ca(s,n,r,i,t[15],10,-30611744),i=Ca(i,s,n,r,t[6],15,-1560198380),r=Ca(r,i,s,n,t[13],21,1309151649),n=Ca(n,r,i,s,t[4],6,-145523070),s=Ca(s,n,r,i,t[11],10,-1120210379),i=Ca(i,s,n,r,t[2],15,718787259),r=Ca(r,i,s,n,t[9],21,-343485551),e[0]=uh(n,e[0]),e[1]=uh(r,e[1]),e[2]=uh(i,e[2]),e[3]=uh(s,e[3])}function im(e,t,n,r,i,s){return t=uh(uh(t,e),uh(r,s)),uh(t<<i|t>>>32-i,n)}function La(e,t,n,r,i,s,o){return im(t&n|~t&r,e,t,i,s,o)}function Sa(e,t,n,r,i,s,o){return im(t&r|n&~r,e,t,i,s,o)}function Ea(e,t,n,r,i,s,o){return im(t^n^r,e,t,i,s,o)}function Ca(e,t,n,r,i,s,o){return im(n^(t|~r),e,t,i,s,o)}function S3(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)cv(r,jI(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(cv(r,i),t=0;t<16;t++)i[t]=0;return i[14]=8*n,cv(r,i),r}function jI(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}rp=br.atob.bind(br),b1=br.btoa.bind(br);var Sb="0123456789abcdef".split("");function zI(e){for(var t="",n=0;n<4;n++)t+=Sb[e>>8*n+4&15]+Sb[e>>8*n&15];return t}function UI(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function w1(e){return S3(e).map(UI).join("")}var $I=function(e){for(var t=0;t<e.length;t++)e[t]=zI(e[t]);return e.join("")}(S3("hello"))!="5d41402abc4b2a76b9719d911017c592";function uh(e,t){if($I){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function x1(e,t){var n,r,i,s;if(e!==n){for(var o=(i=e,s=1+(256/e.length>>0),new Array(s+1).join(i)),u=[],h=0;h<256;h++)u[h]=h;var d=0;for(h=0;h<256;h++){var v=u[h];d=(d+v+o.charCodeAt(h))%256,u[h]=u[d],u[d]=v}n=e,r=u}else u=r;var y=t.length,x=0,_=0,P="";for(h=0;h<y;h++)_=(_+(v=u[x=(x+1)%256]))%256,u[x]=u[_],u[_]=v,o=u[(u[x]+u[_])%256],P+=String.fromCharCode(t.charCodeAt(h)^o);return P}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Eb={print:4,modify:8,copy:16,"annot-forms":32};function If(e,t,n,r){this.v=1,this.r=2;var i=192;e.forEach(function(u){if(Eb.perm!==void 0)throw new Error("Invalid permission: "+u);i+=Eb[u]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(t+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=w1(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=x1(this.encryptionKey,this.padding)}function Rf(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var i=e.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?t+="#"+("0"+i.toString(16)).slice(-2):t+=e[r]}return t}function Cb(e){if(Oi(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var s=Math.random().toString(35);return t[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in t)if(t[r][n])return delete t[r][n],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in t[n]){var o=t[n][s];try{o[0].apply(e,r)}catch(u){br.console&&Ki.error("jsPDF PubSub Error",u.message,u)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function yg(e){if(!(this instanceof yg))return new yg(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function E3(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function zh(e,t,n,r,i){if(!(this instanceof zh))return new zh(e,t,n,r,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,E3.call(this,r,i)}function zf(e,t,n,r,i){if(!(this instanceof zf))return new zf(e,t,n,r,i);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,E3.call(this,r,i)}function mr(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],u=1,h=16,d="S",v=null;Oi(e=e||{})==="object"&&(n=e.orientation,r=e.unit||r,i=e.format||i,s=e.compress||e.compressPdf||s,(v=e.encryption||null)!==null&&(v.userPassword=v.userPassword||"",v.ownerPassword=v.ownerPassword||"",v.userPermissions=v.userPermissions||[]),u=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(h=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var y=e.putOnlyUsedFonts||!1,x={},_={internal:{},__private__:{}};_.__private__.PubSub=Cb;var P="1.3",T=_.__private__.getPdfVersion=function(){return P};_.__private__.setPdfVersion=function(O){P=O};var U={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};_.__private__.getPageFormats=function(){return U};var N=_.__private__.getPageFormat=function(O){return U[O]};i=i||"a4";var j={COMPAT:"compat",ADVANCED:"advanced"},Z=j.COMPAT;function J(){this.saveGraphicsState(),de(new Fn(rt,0,0,-rt,0,da()*rt).toString()+" cm"),this.setFontSize(this.getFontSize()/rt),d="n",Z=j.ADVANCED}function le(){this.restoreGraphicsState(),d="S",Z=j.COMPAT}var he=_.__private__.combineFontStyleAndFontWeight=function(O,ye){if(O=="bold"&&ye=="normal"||O=="bold"&&ye==400||O=="normal"&&ye=="italic"||O=="bold"&&ye=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ye&&(O=ye==400||ye==="normal"?O==="italic"?"italic":"normal":ye!=700&&ye!=="bold"||O!=="normal"?(ye==700?"bold":ye)+""+O:"bold"),O};_.advancedAPI=function(O){var ye=Z===j.COMPAT;return ye&&J.call(this),typeof O!="function"||(O(this),ye&&le.call(this)),this},_.compatAPI=function(O){var ye=Z===j.ADVANCED;return ye&&le.call(this),typeof O!="function"||(O(this),ye&&J.call(this)),this},_.isAdvancedAPI=function(){return Z===j.ADVANCED};var Le,V=function(O){if(Z!==j.ADVANCED)throw new Error(O+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},F=_.roundToPrecision=_.__private__.roundToPrecision=function(O,ye){var He=t||ye;if(isNaN(O)||isNaN(He))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return O.toFixed(He).replace(/0+$/,"")};Le=_.hpf=_.__private__.hpf=typeof h=="number"?function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.hpf");return F(O,h)}:h==="smart"?function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.hpf");return F(O,O>-1&&O<1?16:5)}:function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.hpf");return F(O,16)};var Y=_.f2=_.__private__.f2=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.f2");return F(O,2)},$=_.__private__.f3=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.f3");return F(O,3)},D=_.scale=_.__private__.scale=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.scale");return Z===j.COMPAT?O*rt:Z===j.ADVANCED?O:void 0},k=function(O){return Z===j.COMPAT?da()-O:Z===j.ADVANCED?O:void 0},I=function(O){return D(k(O))};_.__private__.setPrecision=_.setPrecision=function(O){typeof parseInt(O,10)=="number"&&(t=parseInt(O,10))};var W,G="00000000000000000000000000000000",K=_.__private__.getFileId=function(){return G},q=_.__private__.setFileId=function(O){return G=O!==void 0&&/^[a-fA-F0-9]{32}$/.test(O)?O.toUpperCase():G.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),v!==null&&(ao=new If(v.userPermissions,v.userPassword,v.ownerPassword,G)),G};_.setFileId=function(O){return q(O),this},_.getFileId=function(){return K()};var ve=_.__private__.convertDateToPDFDate=function(O){var ye=O.getTimezoneOffset(),He=ye<0?"+":"-",ct=Math.floor(Math.abs(ye/60)),xt=Math.abs(ye%60),It=[He,se(ct),"'",se(xt),"'"].join("");return["D:",O.getFullYear(),se(O.getMonth()+1),se(O.getDate()),se(O.getHours()),se(O.getMinutes()),se(O.getSeconds()),It].join("")},Ce=_.__private__.convertPDFDateToDate=function(O){var ye=parseInt(O.substr(2,4),10),He=parseInt(O.substr(6,2),10)-1,ct=parseInt(O.substr(8,2),10),xt=parseInt(O.substr(10,2),10),It=parseInt(O.substr(12,2),10),cn=parseInt(O.substr(14,2),10);return new Date(ye,He,ct,xt,It,cn,0)},Xe=_.__private__.setCreationDate=function(O){var ye;if(O===void 0&&(O=new Date),O instanceof Date)ye=ve(O);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(O))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ye=O}return W=ye},B=_.__private__.getCreationDate=function(O){var ye=W;return O==="jsDate"&&(ye=Ce(W)),ye};_.setCreationDate=function(O){return Xe(O),this},_.getCreationDate=function(O){return B(O)};var te,se=_.__private__.padd2=function(O){return("0"+parseInt(O)).slice(-2)},ae=_.__private__.padd2Hex=function(O){return("00"+(O=O.toString())).substr(O.length)},we=0,fe=[],Q=[],ue=0,Re=[],Me=[],Ze=!1,oe=Q,me=function(){we=0,ue=0,Q=[],fe=[],Re=[],xo=bn(),_i=bn()};_.__private__.setCustomOutputDestination=function(O){Ze=!0,oe=O};var pe=function(O){Ze||(oe=O)};_.__private__.resetCustomOutputDestination=function(){Ze=!1,oe=Q};var de=_.__private__.out=function(O){return O=O.toString(),ue+=O.length+1,oe.push(O),oe},ze=_.__private__.write=function(O){return de(arguments.length===1?O.toString():Array.prototype.join.call(arguments," "))},Ke=_.__private__.getArrayBuffer=function(O){for(var ye=O.length,He=new ArrayBuffer(ye),ct=new Uint8Array(He);ye--;)ct[ye]=O.charCodeAt(ye);return He},Ge=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];_.__private__.getStandardFonts=function(){return Ge};var Qe=e.fontSize||16;_.__private__.setFontSize=_.setFontSize=function(O){return Qe=Z===j.ADVANCED?O/rt:O,this};var Ve,ot=_.__private__.getFontSize=_.getFontSize=function(){return Z===j.COMPAT?Qe:Qe*rt},At=e.R2L||!1;_.__private__.setR2L=_.setR2L=function(O){return At=O,this},_.__private__.getR2L=_.getR2L=function(){return At};var Et,zt=_.__private__.setZoomMode=function(O){var ye=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(O))Ve=O;else if(isNaN(O)){if(ye.indexOf(O)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+O+'" is not recognized.');Ve=O}else Ve=parseInt(O,10)};_.__private__.getZoomMode=function(){return Ve};var Kt,dn=_.__private__.setPageMode=function(O){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(O)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+O+'" is not recognized.');Et=O};_.__private__.getPageMode=function(){return Et};var mn=_.__private__.setLayoutMode=function(O){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(O)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+O+'" is not recognized.');Kt=O};_.__private__.getLayoutMode=function(){return Kt},_.__private__.setDisplayMode=_.setDisplayMode=function(O,ye,He){return zt(O),mn(ye),dn(He),this};var et={title:"",subject:"",author:"",keywords:"",creator:""};_.__private__.getDocumentProperty=function(O){if(Object.keys(et).indexOf(O)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return et[O]},_.__private__.getDocumentProperties=function(){return et},_.__private__.setDocumentProperties=_.setProperties=_.setDocumentProperties=function(O){for(var ye in et)et.hasOwnProperty(ye)&&O[ye]&&(et[ye]=O[ye]);return this},_.__private__.setDocumentProperty=function(O,ye){if(Object.keys(et).indexOf(O)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return et[O]=ye};var st,rt,Vt,Xt,ft,Ue={},Dt={},gn=[],un={},Qt={},Ye={},vn={},Sn=null,ln=0,wn=[],ur=new Cb(_),En=e.hotfixes||[],rr={},Wr={},ki=[],Fn=function O(ye,He,ct,xt,It,cn){if(!(this instanceof O))return new O(ye,He,ct,xt,It,cn);isNaN(ye)&&(ye=1),isNaN(He)&&(He=0),isNaN(ct)&&(ct=0),isNaN(xt)&&(xt=1),isNaN(It)&&(It=0),isNaN(cn)&&(cn=0),this._matrix=[ye,He,ct,xt,It,cn]};Object.defineProperty(Fn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(O){this._matrix[0]=O}}),Object.defineProperty(Fn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(O){this._matrix[1]=O}}),Object.defineProperty(Fn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(O){this._matrix[2]=O}}),Object.defineProperty(Fn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(O){this._matrix[3]=O}}),Object.defineProperty(Fn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(O){this._matrix[4]=O}}),Object.defineProperty(Fn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(O){this._matrix[5]=O}}),Object.defineProperty(Fn.prototype,"a",{get:function(){return this._matrix[0]},set:function(O){this._matrix[0]=O}}),Object.defineProperty(Fn.prototype,"b",{get:function(){return this._matrix[1]},set:function(O){this._matrix[1]=O}}),Object.defineProperty(Fn.prototype,"c",{get:function(){return this._matrix[2]},set:function(O){this._matrix[2]=O}}),Object.defineProperty(Fn.prototype,"d",{get:function(){return this._matrix[3]},set:function(O){this._matrix[3]=O}}),Object.defineProperty(Fn.prototype,"e",{get:function(){return this._matrix[4]},set:function(O){this._matrix[4]=O}}),Object.defineProperty(Fn.prototype,"f",{get:function(){return this._matrix[5]},set:function(O){this._matrix[5]=O}}),Object.defineProperty(Fn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Fn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Fn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Fn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Fn.prototype.join=function(O){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Le).join(O)},Fn.prototype.multiply=function(O){var ye=O.sx*this.sx+O.shy*this.shx,He=O.sx*this.shy+O.shy*this.sy,ct=O.shx*this.sx+O.sy*this.shx,xt=O.shx*this.shy+O.sy*this.sy,It=O.tx*this.sx+O.ty*this.shx+this.tx,cn=O.tx*this.shy+O.ty*this.sy+this.ty;return new Fn(ye,He,ct,xt,It,cn)},Fn.prototype.decompose=function(){var O=this.sx,ye=this.shy,He=this.shx,ct=this.sy,xt=this.tx,It=this.ty,cn=Math.sqrt(O*O+ye*ye),kn=(O/=cn)*He+(ye/=cn)*ct;He-=O*kn,ct-=ye*kn;var Nn=Math.sqrt(He*He+ct*ct);return kn/=Nn,O*(ct/=Nn)<ye*(He/=Nn)&&(O=-O,ye=-ye,kn=-kn,cn=-cn),{scale:new Fn(cn,0,0,Nn,0,0),translate:new Fn(1,0,0,1,xt,It),rotate:new Fn(O,ye,-ye,O,0,0),skew:new Fn(1,0,kn,1,0,0)}},Fn.prototype.toString=function(O){return this.join(" ")},Fn.prototype.inversed=function(){var O=this.sx,ye=this.shy,He=this.shx,ct=this.sy,xt=this.tx,It=this.ty,cn=1/(O*ct-ye*He),kn=ct*cn,Nn=-ye*cn,Kn=-He*cn,or=O*cn;return new Fn(kn,Nn,Kn,or,-kn*xt-Kn*It,-Nn*xt-or*It)},Fn.prototype.applyToPoint=function(O){var ye=O.x*this.sx+O.y*this.shx+this.tx,He=O.x*this.shy+O.y*this.sy+this.ty;return new fo(ye,He)},Fn.prototype.applyToRectangle=function(O){var ye=this.applyToPoint(O),He=this.applyToPoint(new fo(O.x+O.w,O.y+O.h));return new js(ye.x,ye.y,He.x-ye.x,He.y-ye.y)},Fn.prototype.clone=function(){var O=this.sx,ye=this.shy,He=this.shx,ct=this.sy,xt=this.tx,It=this.ty;return new Fn(O,ye,He,ct,xt,It)},_.Matrix=Fn;var oo=_.matrixMult=function(O,ye){return ye.multiply(O)},jo=new Fn(1,0,0,1,0,0);_.unitMatrix=_.identityMatrix=jo;var fi=function(O,ye){if(!Qt[O]){var He=(ye instanceof zh?"Sh":"P")+(Object.keys(un).length+1).toString(10);ye.id=He,Qt[O]=He,un[He]=ye,ur.publish("addPattern",ye)}};_.ShadingPattern=zh,_.TilingPattern=zf,_.addShadingPattern=function(O,ye){return V("addShadingPattern()"),fi(O,ye),this},_.beginTilingPattern=function(O){V("beginTilingPattern()"),zs(O.boundingBox[0],O.boundingBox[1],O.boundingBox[2]-O.boundingBox[0],O.boundingBox[3]-O.boundingBox[1],O.matrix)},_.endTilingPattern=function(O,ye){V("endTilingPattern()"),ye.stream=Me[te].join(`
`),fi(O,ye),ur.publish("endTilingPattern",ye),ki.pop().restore()};var Wn=_.__private__.newObject=function(){var O=bn();return tr(O,!0),O},bn=_.__private__.newObjectDeferred=function(){return we++,fe[we]=function(){return ue},we},tr=function(O,ye){return ye=typeof ye=="boolean"&&ye,fe[O]=ue,ye&&de(O+" 0 obj"),O},hn=_.__private__.newAdditionalObject=function(){var O={objId:bn(),content:""};return Re.push(O),O},xo=bn(),_i=bn(),bi=_.__private__.decodeColorString=function(O){var ye=O.split(" ");if(ye.length!==2||ye[1]!=="g"&&ye[1]!=="G")ye.length===5&&(ye[4]==="k"||ye[4]==="K")&&(ye=[(1-ye[0])*(1-ye[3]),(1-ye[1])*(1-ye[3]),(1-ye[2])*(1-ye[3]),"r"]);else{var He=parseFloat(ye[0]);ye=[He,He,He,"r"]}for(var ct="#",xt=0;xt<3;xt++)ct+=("0"+Math.floor(255*parseFloat(ye[xt])).toString(16)).slice(-2);return ct},di=_.__private__.encodeColorString=function(O){var ye;typeof O=="string"&&(O={ch1:O});var He=O.ch1,ct=O.ch2,xt=O.ch3,It=O.ch4,cn=O.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof He=="string"&&He.charAt(0)!=="#"){var kn=new L3(He);if(kn.ok)He=kn.toHex();else if(!/^\d*\.?\d*$/.test(He))throw new Error('Invalid color "'+He+'" passed to jsPDF.encodeColorString.')}if(typeof He=="string"&&/^#[0-9A-Fa-f]{3}$/.test(He)&&(He="#"+He[1]+He[1]+He[2]+He[2]+He[3]+He[3]),typeof He=="string"&&/^#[0-9A-Fa-f]{6}$/.test(He)){var Nn=parseInt(He.substr(1),16);He=Nn>>16&255,ct=Nn>>8&255,xt=255&Nn}if(ct===void 0||It===void 0&&He===ct&&ct===xt)if(typeof He=="string")ye=He+" "+cn[0];else switch(O.precision){case 2:ye=Y(He/255)+" "+cn[0];break;case 3:default:ye=$(He/255)+" "+cn[0]}else if(It===void 0||Oi(It)==="object"){if(It&&!isNaN(It.a)&&It.a===0)return ye=["1.","1.","1.",cn[1]].join(" ");if(typeof He=="string")ye=[He,ct,xt,cn[1]].join(" ");else switch(O.precision){case 2:ye=[Y(He/255),Y(ct/255),Y(xt/255),cn[1]].join(" ");break;default:case 3:ye=[$(He/255),$(ct/255),$(xt/255),cn[1]].join(" ")}}else if(typeof He=="string")ye=[He,ct,xt,It,cn[2]].join(" ");else switch(O.precision){case 2:ye=[Y(He),Y(ct),Y(xt),Y(It),cn[2]].join(" ");break;case 3:default:ye=[$(He),$(ct),$(xt),$(It),cn[2]].join(" ")}return ye},Ri=_.__private__.getFilters=function(){return o},Lo=_.__private__.putStream=function(O){var ye=(O=O||{}).data||"",He=O.filters||Ri(),ct=O.alreadyAppliedFilters||[],xt=O.addLength1||!1,It=ye.length,cn=O.objectId,kn=function(qi){return qi};if(v!==null&&cn===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");v!==null&&(kn=ao.encryptor(cn,0));var Nn={};He===!0&&(He=["FlateEncode"]);var Kn=O.additionalKeyValues||[],or=(Nn=mr.API.processDataByFilters!==void 0?mr.API.processDataByFilters(ye,He):{data:ye,reverseChain:[]}).reverseChain+(Array.isArray(ct)?ct.join(" "):ct.toString());if(Nn.data.length!==0&&(Kn.push({key:"Length",value:Nn.data.length}),xt===!0&&Kn.push({key:"Length1",value:It})),or.length!=0)if(or.split("/").length-1==1)Kn.push({key:"Filter",value:or});else{Kn.push({key:"Filter",value:"["+or+"]"});for(var Pr=0;Pr<Kn.length;Pr+=1)if(Kn[Pr].key==="DecodeParms"){for(var yi=[],Zr=0;Zr<Nn.reverseChain.split("/").length-1;Zr+=1)yi.push("null");yi.push(Kn[Pr].value),Kn[Pr].value="["+yi.join(" ")+"]"}}de("<<");for(var ti=0;ti<Kn.length;ti++)de("/"+Kn[ti].key+" "+Kn[ti].value);de(">>"),Nn.data.length!==0&&(de("stream"),de(kn(Nn.data)),de("endstream"))},yr=_.__private__.putPage=function(O){var ye=O.number,He=O.data,ct=O.objId,xt=O.contentsObjId;tr(ct,!0),de("<</Type /Page"),de("/Parent "+O.rootDictionaryObjId+" 0 R"),de("/Resources "+O.resourceDictionaryObjId+" 0 R"),de("/MediaBox ["+parseFloat(Le(O.mediaBox.bottomLeftX))+" "+parseFloat(Le(O.mediaBox.bottomLeftY))+" "+Le(O.mediaBox.topRightX)+" "+Le(O.mediaBox.topRightY)+"]"),O.cropBox!==null&&de("/CropBox ["+Le(O.cropBox.bottomLeftX)+" "+Le(O.cropBox.bottomLeftY)+" "+Le(O.cropBox.topRightX)+" "+Le(O.cropBox.topRightY)+"]"),O.bleedBox!==null&&de("/BleedBox ["+Le(O.bleedBox.bottomLeftX)+" "+Le(O.bleedBox.bottomLeftY)+" "+Le(O.bleedBox.topRightX)+" "+Le(O.bleedBox.topRightY)+"]"),O.trimBox!==null&&de("/TrimBox ["+Le(O.trimBox.bottomLeftX)+" "+Le(O.trimBox.bottomLeftY)+" "+Le(O.trimBox.topRightX)+" "+Le(O.trimBox.topRightY)+"]"),O.artBox!==null&&de("/ArtBox ["+Le(O.artBox.bottomLeftX)+" "+Le(O.artBox.bottomLeftY)+" "+Le(O.artBox.topRightX)+" "+Le(O.artBox.topRightY)+"]"),typeof O.userUnit=="number"&&O.userUnit!==1&&de("/UserUnit "+O.userUnit),ur.publish("putPage",{objId:ct,pageContext:wn[ye],pageNumber:ye,page:He}),de("/Contents "+xt+" 0 R"),de(">>"),de("endobj");var It=He.join(`
`);return Z===j.ADVANCED&&(It+=`
Q`),tr(xt,!0),Lo({data:It,filters:Ri(),objectId:xt}),de("endobj"),ct},ds=_.__private__.putPages=function(){var O,ye,He=[];for(O=1;O<=ln;O++)wn[O].objId=bn(),wn[O].contentsObjId=bn();for(O=1;O<=ln;O++)He.push(yr({number:O,data:Me[O],objId:wn[O].objId,contentsObjId:wn[O].contentsObjId,mediaBox:wn[O].mediaBox,cropBox:wn[O].cropBox,bleedBox:wn[O].bleedBox,trimBox:wn[O].trimBox,artBox:wn[O].artBox,userUnit:wn[O].userUnit,rootDictionaryObjId:xo,resourceDictionaryObjId:_i}));tr(xo,!0),de("<</Type /Pages");var ct="/Kids [";for(ye=0;ye<ln;ye++)ct+=He[ye]+" 0 R ";de(ct+"]"),de("/Count "+ln),de(">>"),de("endobj"),ur.publish("postPutPages")},xl=function(O){ur.publish("putFont",{font:O,out:de,newObject:Wn,putStream:Lo}),O.isAlreadyPutted!==!0&&(O.objectNumber=Wn(),de("<<"),de("/Type /Font"),de("/BaseFont /"+Rf(O.postScriptName)),de("/Subtype /Type1"),typeof O.encoding=="string"&&de("/Encoding /"+O.encoding),de("/FirstChar 32"),de("/LastChar 255"),de(">>"),de("endobj"))},Ds=function(){for(var O in Ue)Ue.hasOwnProperty(O)&&(y===!1||y===!0&&x.hasOwnProperty(O))&&xl(Ue[O])},jr=function(O){O.objectNumber=Wn();var ye=[];ye.push({key:"Type",value:"/XObject"}),ye.push({key:"Subtype",value:"/Form"}),ye.push({key:"BBox",value:"["+[Le(O.x),Le(O.y),Le(O.x+O.width),Le(O.y+O.height)].join(" ")+"]"}),ye.push({key:"Matrix",value:"["+O.matrix.toString()+"]"});var He=O.pages[1].join(`
`);Lo({data:He,additionalKeyValues:ye,objectId:O.objectNumber}),de("endobj")},Mn=function(){for(var O in rr)rr.hasOwnProperty(O)&&jr(rr[O])},Fi=function(O,ye){var He,ct=[],xt=1/(ye-1);for(He=0;He<1;He+=xt)ct.push(He);if(ct.push(1),O[0].offset!=0){var It={offset:0,color:O[0].color};O.unshift(It)}if(O[O.length-1].offset!=1){var cn={offset:1,color:O[O.length-1].color};O.push(cn)}for(var kn="",Nn=0,Kn=0;Kn<ct.length;Kn++){for(He=ct[Kn];He>O[Nn+1].offset;)Nn++;var or=O[Nn].offset,Pr=(He-or)/(O[Nn+1].offset-or),yi=O[Nn].color,Zr=O[Nn+1].color;kn+=ae(Math.round((1-Pr)*yi[0]+Pr*Zr[0]).toString(16))+ae(Math.round((1-Pr)*yi[1]+Pr*Zr[1]).toString(16))+ae(Math.round((1-Pr)*yi[2]+Pr*Zr[2]).toString(16))}return kn.trim()},pi=function(O,ye){ye||(ye=21);var He=Wn(),ct=Fi(O.colors,ye),xt=[];xt.push({key:"FunctionType",value:"0"}),xt.push({key:"Domain",value:"[0.0 1.0]"}),xt.push({key:"Size",value:"["+ye+"]"}),xt.push({key:"BitsPerSample",value:"8"}),xt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),xt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Lo({data:ct,additionalKeyValues:xt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:He}),de("endobj"),O.objectNumber=Wn(),de("<< /ShadingType "+O.type),de("/ColorSpace /DeviceRGB");var It="/Coords ["+Le(parseFloat(O.coords[0]))+" "+Le(parseFloat(O.coords[1]))+" ";O.type===2?It+=Le(parseFloat(O.coords[2]))+" "+Le(parseFloat(O.coords[3])):It+=Le(parseFloat(O.coords[2]))+" "+Le(parseFloat(O.coords[3]))+" "+Le(parseFloat(O.coords[4]))+" "+Le(parseFloat(O.coords[5])),de(It+="]"),O.matrix&&de("/Matrix ["+O.matrix.toString()+"]"),de("/Function "+He+" 0 R"),de("/Extend [true true]"),de(">>"),de("endobj")},ji=function(O,ye){var He=bn(),ct=Wn();ye.push({resourcesOid:He,objectOid:ct}),O.objectNumber=ct;var xt=[];xt.push({key:"Type",value:"/Pattern"}),xt.push({key:"PatternType",value:"1"}),xt.push({key:"PaintType",value:"1"}),xt.push({key:"TilingType",value:"1"}),xt.push({key:"BBox",value:"["+O.boundingBox.map(Le).join(" ")+"]"}),xt.push({key:"XStep",value:Le(O.xStep)}),xt.push({key:"YStep",value:Le(O.yStep)}),xt.push({key:"Resources",value:He+" 0 R"}),O.matrix&&xt.push({key:"Matrix",value:"["+O.matrix.toString()+"]"}),Lo({data:O.stream,additionalKeyValues:xt,objectId:O.objectNumber}),de("endobj")},Ni=function(O){var ye;for(ye in un)un.hasOwnProperty(ye)&&(un[ye]instanceof zh?pi(un[ye]):un[ye]instanceof zf&&ji(un[ye],O))},ps=function(O){for(var ye in O.objectNumber=Wn(),de("<<"),O)switch(ye){case"opacity":de("/ca "+Y(O[ye]));break;case"stroke-opacity":de("/CA "+Y(O[ye]))}de(">>"),de("endobj")},Ls=function(){var O;for(O in Ye)Ye.hasOwnProperty(O)&&ps(Ye[O])},wr=function(){for(var O in de("/XObject <<"),rr)rr.hasOwnProperty(O)&&rr[O].objectNumber>=0&&de("/"+O+" "+rr[O].objectNumber+" 0 R");ur.publish("putXobjectDict"),de(">>")},Ss=function(){ao.oid=Wn(),de("<<"),de("/Filter /Standard"),de("/V "+ao.v),de("/R "+ao.r),de("/U <"+ao.toHexString(ao.U)+">"),de("/O <"+ao.toHexString(ao.O)+">"),de("/P "+ao.P),de(">>"),de("endobj")},Ti=function(){for(var O in de("/Font <<"),Ue)Ue.hasOwnProperty(O)&&(y===!1||y===!0&&x.hasOwnProperty(O))&&de("/"+O+" "+Ue[O].objectNumber+" 0 R");de(">>")},zo=function(){if(Object.keys(un).length>0){for(var O in de("/Shading <<"),un)un.hasOwnProperty(O)&&un[O]instanceof zh&&un[O].objectNumber>=0&&de("/"+O+" "+un[O].objectNumber+" 0 R");ur.publish("putShadingPatternDict"),de(">>")}},xr=function(O){if(Object.keys(un).length>0){for(var ye in de("/Pattern <<"),un)un.hasOwnProperty(ye)&&un[ye]instanceof _.TilingPattern&&un[ye].objectNumber>=0&&un[ye].objectNumber<O&&de("/"+ye+" "+un[ye].objectNumber+" 0 R");ur.publish("putTilingPatternDict"),de(">>")}},sn=function(){if(Object.keys(Ye).length>0){var O;for(O in de("/ExtGState <<"),Ye)Ye.hasOwnProperty(O)&&Ye[O].objectNumber>=0&&de("/"+O+" "+Ye[O].objectNumber+" 0 R");ur.publish("putGStateDict"),de(">>")}},jt=function(O){tr(O.resourcesOid,!0),de("<<"),de("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Ti(),zo(),xr(O.objectOid),sn(),wr(),de(">>"),de("endobj")},Cr=function(){var O=[];Ds(),Ls(),Mn(),Ni(O),ur.publish("putResources"),O.forEach(jt),jt({resourcesOid:_i,objectOid:Number.MAX_SAFE_INTEGER}),ur.publish("postPutResources")},Di=function(){ur.publish("putAdditionalObjects");for(var O=0;O<Re.length;O++){var ye=Re[O];tr(ye.objId,!0),de(ye.content),de("endobj")}ur.publish("postPutAdditionalObjects")},zi=function(O){Dt[O.fontName]=Dt[O.fontName]||{},Dt[O.fontName][O.fontStyle]=O.id},Es=function(O,ye,He,ct,xt){var It={id:"F"+(Object.keys(Ue).length+1).toString(10),postScriptName:O,fontName:ye,fontStyle:He,encoding:ct,isStandardFont:xt||!1,metadata:{}};return ur.publish("addFont",{font:It,instance:this}),Ue[It.id]=It,zi(It),It.id},sr=function(O){for(var ye=0,He=Ge.length;ye<He;ye++){var ct=Es.call(this,O[ye][0],O[ye][1],O[ye][2],Ge[ye][3],!0);y===!1&&(x[ct]=!0);var xt=O[ye][0].split("-");zi({id:ct,fontName:xt[0],fontStyle:xt[1]||""})}ur.publish("addFonts",{fonts:Ue,dictionary:Dt})},Lr=function(O){return O.foo=function(){try{return O.apply(this,arguments)}catch(ct){var ye=ct.stack||"";~ye.indexOf(" at ")&&(ye=ye.split(" at ")[1]);var He="Error in function "+ye.split(`
`)[0].split("<")[0]+": "+ct.message;if(!br.console)throw new Error(He);br.console.error(He,ct),br.alert&&alert(He)}},O.foo.bar=O,O.foo},Is=function(O,ye){var He,ct,xt,It,cn,kn,Nn,Kn,or;if(xt=(ye=ye||{}).sourceEncoding||"Unicode",cn=ye.outputEncoding,(ye.autoencode||cn)&&Ue[st].metadata&&Ue[st].metadata[xt]&&Ue[st].metadata[xt].encoding&&(It=Ue[st].metadata[xt].encoding,!cn&&Ue[st].encoding&&(cn=Ue[st].encoding),!cn&&It.codePages&&(cn=It.codePages[0]),typeof cn=="string"&&(cn=It[cn]),cn)){for(Nn=!1,kn=[],He=0,ct=O.length;He<ct;He++)(Kn=cn[O.charCodeAt(He)])?kn.push(String.fromCharCode(Kn)):kn.push(O[He]),kn[He].charCodeAt(0)>>8&&(Nn=!0);O=kn.join("")}for(He=O.length;Nn===void 0&&He!==0;)O.charCodeAt(He-1)>>8&&(Nn=!0),He--;if(!Nn)return O;for(kn=ye.noBOM?[]:[254,255],He=0,ct=O.length;He<ct;He++){if((or=(Kn=O.charCodeAt(He))>>8)>>8)throw new Error("Character at position "+He+" of string '"+O+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");kn.push(or),kn.push(Kn-(or<<8))}return String.fromCharCode.apply(void 0,kn)},fr=_.__private__.pdfEscape=_.pdfEscape=function(O,ye){return Is(O,ye).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ui=_.__private__.beginPage=function(O){Me[++ln]=[],wn[ln]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(O[0]),topRightY:Number(O[1])}},so(ln),pe(Me[te])},So=function(O,ye){var He,ct,xt;switch(n=ye||n,typeof O=="string"&&(He=N(O.toLowerCase()),Array.isArray(He)&&(ct=He[0],xt=He[1])),Array.isArray(O)&&(ct=O[0]*rt,xt=O[1]*rt),isNaN(ct)&&(ct=i[0],xt=i[1]),(ct>14400||xt>14400)&&(Ki.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ct=Math.min(14400,ct),xt=Math.min(14400,xt)),i=[ct,xt],n.substr(0,1)){case"l":xt>ct&&(i=[xt,ct]);break;case"p":ct>xt&&(i=[xt,ct])}Ui(i),Pl(Wl),de(wi),kl!==0&&de(kl+" J"),Qr!==0&&de(Qr+" j"),ur.publish("addPage",{pageNumber:ln})},Eo=function(O){O>0&&O<=ln&&(Me.splice(O,1),wn.splice(O,1),ln--,te>ln&&(te=ln),this.setPage(te))},so=function(O){O>0&&O<=ln&&(te=O)},vi=_.__private__.getNumberOfPages=_.getNumberOfPages=function(){return Me.length-1},Qo=function(O,ye,He){var ct,xt=void 0;return He=He||{},O=O!==void 0?O:Ue[st].fontName,ye=ye!==void 0?ye:Ue[st].fontStyle,ct=O.toLowerCase(),Dt[ct]!==void 0&&Dt[ct][ye]!==void 0?xt=Dt[ct][ye]:Dt[O]!==void 0&&Dt[O][ye]!==void 0?xt=Dt[O][ye]:He.disableWarning===!1&&Ki.warn("Unable to look up font label for font '"+O+"', '"+ye+"'. Refer to getFontList() for available fonts."),xt||He.noFallback||(xt=Dt.times[ye])==null&&(xt=Dt.times.normal),xt},Ks=_.__private__.putInfo=function(){var O=Wn(),ye=function(ct){return ct};for(var He in v!==null&&(ye=ao.encryptor(O,0)),de("<<"),de("/Producer ("+fr(ye("jsPDF "+mr.version))+")"),et)et.hasOwnProperty(He)&&et[He]&&de("/"+He.substr(0,1).toUpperCase()+He.substr(1)+" ("+fr(ye(et[He]))+")");de("/CreationDate ("+fr(ye(W))+")"),de(">>"),de("endobj")},co=_.__private__.putCatalog=function(O){var ye=(O=O||{}).rootDictionaryObjId||xo;switch(Wn(),de("<<"),de("/Type /Catalog"),de("/Pages "+ye+" 0 R"),Ve||(Ve="fullwidth"),Ve){case"fullwidth":de("/OpenAction [3 0 R /FitH null]");break;case"fullheight":de("/OpenAction [3 0 R /FitV null]");break;case"fullpage":de("/OpenAction [3 0 R /Fit]");break;case"original":de("/OpenAction [3 0 R /XYZ null null 1]");break;default:var He=""+Ve;He.substr(He.length-1)==="%"&&(Ve=parseInt(Ve)/100),typeof Ve=="number"&&de("/OpenAction [3 0 R /XYZ null null "+Y(Ve)+"]")}switch(Kt||(Kt="continuous"),Kt){case"continuous":de("/PageLayout /OneColumn");break;case"single":de("/PageLayout /SinglePage");break;case"two":case"twoleft":de("/PageLayout /TwoColumnLeft");break;case"tworight":de("/PageLayout /TwoColumnRight")}Et&&de("/PageMode /"+Et),ur.publish("putCatalog"),de(">>"),de("endobj")},ha=_.__private__.putTrailer=function(){de("trailer"),de("<<"),de("/Size "+(we+1)),de("/Root "+we+" 0 R"),de("/Info "+(we-1)+" 0 R"),v!==null&&de("/Encrypt "+ao.oid+" 0 R"),de("/ID [ <"+G+"> <"+G+"> ]"),de(">>")},Cs=_.__private__.putHeader=function(){de("%PDF-"+P),de("%")},Ll=_.__private__.putXRef=function(){var O="0000000000";de("xref"),de("0 "+(we+1)),de("0000000000 65535 f ");for(var ye=1;ye<=we;ye++)typeof fe[ye]=="function"?de((O+fe[ye]()).slice(-10)+" 00000 n "):fe[ye]!==void 0?de((O+fe[ye]).slice(-10)+" 00000 n "):de("0000000000 00000 n ")},Or=_.__private__.buildDocument=function(){me(),pe(Q),ur.publish("buildDocument"),Cs(),ds(),Di(),Cr(),v!==null&&Ss(),Ks(),co();var O=ue;return Ll(),ha(),de("startxref"),de(""+O),de("%%EOF"),pe(Me[te]),Q.join(`
`)},ho=_.__private__.getBlob=function(O){return new Blob([Ke(O)],{type:"application/pdf"})},$i=_.output=_.__private__.output=Lr(function(O,ye){switch(typeof(ye=ye||{})=="string"?ye={filename:ye}:ye.filename=ye.filename||"generated.pdf",O){case void 0:return Or();case"save":_.save(ye.filename);break;case"arraybuffer":return Ke(Or());case"blob":return ho(Or());case"bloburi":case"bloburl":if(br.URL!==void 0&&typeof br.URL.createObjectURL=="function")return br.URL&&br.URL.createObjectURL(ho(Or()))||void 0;Ki.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var He="",ct=Or();try{He=b1(ct)}catch{He=b1(unescape(encodeURIComponent(ct)))}return"data:application/pdf;filename="+ye.filename+";base64,"+He;case"pdfobjectnewwindow":if(Object.prototype.toString.call(br)==="[object Window]"){var xt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",It=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ye.pdfObjectUrl&&(xt=ye.pdfObjectUrl,It="");var cn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+xt+'"'+It+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ye)+");<\/script></body></html>",kn=br.open();return kn!==null&&kn.document.write(cn),kn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(br)==="[object Window]"){var Nn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ye.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ye.filename+'" width="500px" height="400px" /></body></html>',Kn=br.open();if(Kn!==null){Kn.document.write(Nn);var or=this;Kn.document.documentElement.querySelector("#pdfViewer").onload=function(){Kn.document.title=ye.filename,Kn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(or.output("bloburl"))}}return Kn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(br)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Pr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ye)+'"></iframe></body></html>',yi=br.open();if(yi!==null&&(yi.document.write(Pr),yi.document.title=ye.filename),yi||typeof safari>"u")return yi;break;case"datauri":case"dataurl":return br.document.location.href=this.output("datauristring",ye);default:return null}}),Sl=function(O){return Array.isArray(En)===!0&&En.indexOf(O)>-1};switch(r){case"pt":rt=1;break;case"mm":rt=72/25.4;break;case"cm":rt=72/2.54;break;case"in":rt=72;break;case"px":rt=Sl("px_scaling")==1?.75:96/72;break;case"pc":case"em":rt=12;break;case"ex":rt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);rt=r}var ao=null;Xe(),q();var qu=function(O){return v!==null?ao.encryptor(O,0):function(ye){return ye}},ql=_.__private__.getPageInfo=_.getPageInfo=function(O){if(isNaN(O)||O%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:wn[O].objId,pageNumber:O,pageContext:wn[O]}},ar=_.__private__.getPageInfoByObjId=function(O){if(isNaN(O)||O%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ye in wn)if(wn[ye].objId===O)break;return ql(ye)},dr=_.__private__.getCurrentPageInfo=_.getCurrentPageInfo=function(){return{objId:wn[te].objId,pageNumber:te,pageContext:wn[te]}};_.addPage=function(){return So.apply(this,arguments),this},_.setPage=function(){return so.apply(this,arguments),pe.call(this,Me[te]),this},_.insertPage=function(O){return this.addPage(),this.movePage(te,O),this},_.movePage=function(O,ye){var He,ct;if(O>ye){He=Me[O],ct=wn[O];for(var xt=O;xt>ye;xt--)Me[xt]=Me[xt-1],wn[xt]=wn[xt-1];Me[ye]=He,wn[ye]=ct,this.setPage(ye)}else if(O<ye){He=Me[O],ct=wn[O];for(var It=O;It<ye;It++)Me[It]=Me[It+1],wn[It]=wn[It+1];Me[ye]=He,wn[ye]=ct,this.setPage(ye)}return this},_.deletePage=function(){return Eo.apply(this,arguments),this},_.__private__.text=_.text=function(O,ye,He,ct,xt){var It,cn,kn,Nn,Kn,or,Pr,yi,Zr,ti=(ct=ct||{}).scope||this;if(typeof O=="number"&&typeof ye=="number"&&(typeof He=="string"||Array.isArray(He))){var qi=He;He=ye,ye=O,O=qi}if(arguments[3]instanceof Fn?(V("The transform parameter of text() with a Matrix value"),Zr=xt):(kn=arguments[4],Nn=arguments[5],Oi(Pr=arguments[3])==="object"&&Pr!==null||(typeof kn=="string"&&(Nn=kn,kn=null),typeof Pr=="string"&&(Nn=Pr,Pr=null),typeof Pr=="number"&&(kn=Pr,Pr=null),ct={flags:Pr,angle:kn,align:Nn})),isNaN(ye)||isNaN(He)||O==null)throw new Error("Invalid arguments passed to jsPDF.text");if(O.length===0)return ti;var Ji="",ms=!1,Ar=typeof ct.lineHeightFactor=="number"?ct.lineHeightFactor:Cl,Co=ti.internal.scaleFactor;function ol(ri){return ri=ri.split("	").join(Array(ct.TabLen||9).join(" ")),fr(ri,Pr)}function Uo(ri){for(var si,Wi=ri.concat(),gi=[],_s=Wi.length;_s--;)typeof(si=Wi.shift())=="string"?gi.push(si):Array.isArray(ri)&&(si.length===1||si[1]===void 0&&si[2]===void 0)?gi.push(si[0]):gi.push([si[0],si[1],si[2]]);return gi}function Yl(ri,si){var Wi;if(typeof ri=="string")Wi=si(ri)[0];else if(Array.isArray(ri)){for(var gi,_s,ts=ri.concat(),As=[],bu=ts.length;bu--;)typeof(gi=ts.shift())=="string"?As.push(si(gi)[0]):Array.isArray(gi)&&typeof gi[0]=="string"&&(_s=si(gi[0],gi[1],gi[2]),As.push([_s[0],_s[1],_s[2]]));Wi=As}return Wi}var Xs=!1,_u=!0;if(typeof O=="string")Xs=!0;else if(Array.isArray(O)){var ja=O.concat();cn=[];for(var za,Qi=ja.length;Qi--;)(typeof(za=ja.shift())!="string"||Array.isArray(za)&&typeof za[0]!="string")&&(_u=!1);Xs=_u}if(Xs===!1)throw new Error('Type of text must be string or Array. "'+O+'" is not recognized.');typeof O=="string"&&(O=O.match(/[\r?\n]/)?O.split(/\r\n|\r|\n/g):[O]);var Js=Qe/ti.internal.scaleFactor,vs=Js*(Ar-1);switch(ct.baseline){case"bottom":He-=vs;break;case"top":He+=Js-vs;break;case"hanging":He+=Js-2*vs;break;case"middle":He+=Js/2-vs}if((or=ct.maxWidth||0)>0&&(typeof O=="string"?O=ti.splitTextToSize(O,or):Object.prototype.toString.call(O)==="[object Array]"&&(O=O.reduce(function(ri,si){return ri.concat(ti.splitTextToSize(si,or))},[]))),It={text:O,x:ye,y:He,options:ct,mutex:{pdfEscape:fr,activeFontKey:st,fonts:Ue,activeFontSize:Qe}},ur.publish("preProcessText",It),O=It.text,kn=(ct=It.options).angle,!(Zr instanceof Fn)&&kn&&typeof kn=="number"){kn*=Math.PI/180,ct.rotationDirection===0&&(kn=-kn),Z===j.ADVANCED&&(kn=-kn);var es=Math.cos(kn),sl=Math.sin(kn);Zr=new Fn(es,sl,-sl,es,0,0)}else kn&&kn instanceof Fn&&(Zr=kn);Z!==j.ADVANCED||Zr||(Zr=jo),(Kn=ct.charSpace||Ml)!==void 0&&(Ji+=Le(D(Kn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(yi=ct.horizontalScale)!==void 0&&(Ji+=Le(100*yi)+` Tz
`),ct.lang;var Po=-1,$o=ct.renderingMode!==void 0?ct.renderingMode:ct.stroke,Vo=ti.internal.getCurrentPageInfo().pageContext;switch($o){case 0:case!1:case"fill":Po=0;break;case 1:case!0:case"stroke":Po=1;break;case 2:case"fillThenStroke":Po=2;break;case 3:case"invisible":Po=3;break;case 4:case"fillAndAddForClipping":Po=4;break;case 5:case"strokeAndAddPathForClipping":Po=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Po=6;break;case 7:case"addToPathForClipping":Po=7}var Ku=Vo.usedRenderingMode!==void 0?Vo.usedRenderingMode:-1;Po!==-1?Ji+=Po+` Tr
`:Ku!==-1&&(Ji+=`0 Tr
`),Po!==-1&&(Vo.usedRenderingMode=Po),Nn=ct.align||"left";var lo,pa=Qe*Ar,Ao=ti.internal.pageSize.getWidth(),Mo=Ue[st];Kn=ct.charSpace||Ml,or=ct.maxWidth||0,Pr=Object.assign({autoencode:!0,noBOM:!0},ct.flags);var ga=[],ma=function(ri){return ti.getStringUnitWidth(ri,{font:Mo,charSpace:Kn,fontSize:Qe,doKerning:!1})*Qe/Co};if(Object.prototype.toString.call(O)==="[object Array]"){var ko;cn=Uo(O),Nn!=="left"&&(lo=cn.map(ma));var po,Qs=0;if(Nn==="right"){ye-=lo[0],O=[],Qi=cn.length;for(var ys=0;ys<Qi;ys++)ys===0?(po=Xn(ye),ko=Hi(He)):(po=D(Qs-lo[ys]),ko=-pa),O.push([cn[ys],po,ko]),Qs=lo[ys]}else if(Nn==="center"){ye-=lo[0]/2,O=[],Qi=cn.length;for(var To=0;To<Qi;To++)To===0?(po=Xn(ye),ko=Hi(He)):(po=D((Qs-lo[To])/2),ko=-pa),O.push([cn[To],po,ko]),Qs=lo[To]}else if(Nn==="left"){O=[],Qi=cn.length;for(var _t=0;_t<Qi;_t++)O.push(cn[_t])}else if(Nn==="justify"&&Mo.encoding==="Identity-H"){O=[],Qi=cn.length,or=or!==0?or:Ao;for(var Ht=0,Mt=0;Mt<Qi;Mt++)if(ko=Mt===0?Hi(He):-pa,po=Mt===0?Xn(ye):Ht,Mt<Qi-1){var Pn=D((or-lo[Mt])/(cn[Mt].split(" ").length-1)),Un=cn[Mt].split(" ");O.push([Un[0]+" ",po,ko]),Ht=0;for(var lr=1;lr<Un.length;lr++){var xi=(ma(Un[lr-1]+" "+Un[lr])-ma(Un[lr]))*Co+Pn;lr==Un.length-1?O.push([Un[lr],xi,0]):O.push([Un[lr]+" ",xi,0]),Ht-=xi}}else O.push([cn[Mt],po,ko]);O.push(["",Ht,0])}else{if(Nn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(O=[],Qi=cn.length,or=or!==0?or:Ao,Mt=0;Mt<Qi;Mt++)ko=Mt===0?Hi(He):-pa,po=Mt===0?Xn(ye):0,Mt<Qi-1?ga.push(Le(D((or-lo[Mt])/(cn[Mt].split(" ").length-1)))):ga.push(0),O.push([cn[Mt],po,ko])}}var ni=typeof ct.R2L=="boolean"?ct.R2L:At;ni===!0&&(O=Yl(O,function(ri,si,Wi){return[ri.split("").reverse().join(""),si,Wi]})),It={text:O,x:ye,y:He,options:ct,mutex:{pdfEscape:fr,activeFontKey:st,fonts:Ue,activeFontSize:Qe}},ur.publish("postProcessText",It),O=It.text,ms=It.mutex.isHex||!1;var Bl=Ue[st].encoding;Bl!=="WinAnsiEncoding"&&Bl!=="StandardEncoding"||(O=Yl(O,function(ri,si,Wi){return[ol(ri),si,Wi]})),cn=Uo(O),O=[];for(var Ho,Li,ea,va=0,ta=1,na=Array.isArray(cn[0])?ta:va,ra="",Dr=function(ri,si,Wi){var gi="";return Wi instanceof Fn?(Wi=typeof ct.angle=="number"?oo(Wi,new Fn(1,0,0,1,ri,si)):oo(new Fn(1,0,0,1,ri,si),Wi),Z===j.ADVANCED&&(Wi=oo(new Fn(1,0,0,-1,0,0),Wi)),gi=Wi.join(" ")+` Tm
`):gi=Le(ri)+" "+Le(si)+` Td
`,gi},Us=0;Us<cn.length;Us++){switch(ra="",na){case ta:ea=(ms?"<":"(")+cn[Us][0]+(ms?">":")"),Ho=parseFloat(cn[Us][1]),Li=parseFloat(cn[Us][2]);break;case va:ea=(ms?"<":"(")+cn[Us]+(ms?">":")"),Ho=Xn(ye),Li=Hi(He)}ga!==void 0&&ga[Us]!==void 0&&(ra=ga[Us]+` Tw
`),Us===0?O.push(ra+Dr(Ho,Li,Zr)+ea):na===va?O.push(ra+ea):na===ta&&O.push(ra+Dr(Ho,Li,Zr)+ea)}O=na===va?O.join(` Tj
T* `):O.join(` Tj
`),O+=` Tj
`;var go=`BT
/`;return go+=st+" "+Qe+` Tf
`,go+=Le(Qe*Ar)+` TL
`,go+=Ys+`
`,go+=Ji,go+=O,de(go+="ET"),x[st]=!0,ti};var Rs=_.__private__.clip=_.clip=function(O){return de(O==="evenodd"?"W*":"W"),this};_.clipEvenOdd=function(){return Rs("evenodd")},_.__private__.discardPath=_.discardPath=function(){return de("n"),this};var $r=_.__private__.isValidStyle=function(O){var ye=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(O)!==-1&&(ye=!0),ye};_.__private__.setDefaultPathOperation=_.setDefaultPathOperation=function(O){return $r(O)&&(d=O),this};var vu=_.__private__.getStyle=_.getStyle=function(O){var ye=d;switch(O){case"D":case"S":ye="S";break;case"F":ye="f";break;case"FD":case"DF":ye="B";break;case"f":case"f*":case"B":case"B*":ye=O}return ye},Qa=_.close=function(){return de("h"),this};_.stroke=function(){return de("S"),this},_.fill=function(O){return el("f",O),this},_.fillEvenOdd=function(O){return el("f*",O),this},_.fillStroke=function(O){return el("B",O),this},_.fillStrokeEvenOdd=function(O){return el("B*",O),this};var el=function(O,ye){Oi(ye)==="object"?yu(ye,O):de(O)},Fs=function(O){O===null||Z===j.ADVANCED&&O===void 0||(O=vu(O),de(O))};function Ra(O,ye,He,ct,xt){var It=new zf(ye||this.boundingBox,He||this.xStep,ct||this.yStep,this.gState,xt||this.matrix);It.stream=this.stream;var cn=O+"$$"+this.cloneIndex+++"$$";return fi(cn,It),It}var yu=function(O,ye){var He=Qt[O.key],ct=un[He];if(ct instanceof zh)de("q"),de(El(ye)),ct.gState&&_.setGState(ct.gState),de(O.matrix.toString()+" cm"),de("/"+He+" sh"),de("Q");else if(ct instanceof zf){var xt=new Fn(1,0,0,-1,0,da());O.matrix&&(xt=xt.multiply(O.matrix||jo),He=Ra.call(ct,O.key,O.boundingBox,O.xStep,O.yStep,xt).id),de("q"),de("/Pattern cs"),de("/"+He+" scn"),ct.gState&&_.setGState(ct.gState),de(ye),de("Q")}},El=function(O){switch(O){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},cr=_.moveTo=function(O,ye){return de(Le(D(O))+" "+Le(I(ye))+" m"),this},kr=_.lineTo=function(O,ye){return de(Le(D(O))+" "+Le(I(ye))+" l"),this},Fa=_.curveTo=function(O,ye,He,ct,xt,It){return de([Le(D(O)),Le(I(ye)),Le(D(He)),Le(I(ct)),Le(D(xt)),Le(I(It)),"c"].join(" ")),this};_.__private__.line=_.line=function(O,ye,He,ct,xt){if(isNaN(O)||isNaN(ye)||isNaN(He)||isNaN(ct)||!$r(xt))throw new Error("Invalid arguments passed to jsPDF.line");return Z===j.COMPAT?this.lines([[He-O,ct-ye]],O,ye,[1,1],xt||"S"):this.lines([[He-O,ct-ye]],O,ye,[1,1]).stroke()},_.__private__.lines=_.lines=function(O,ye,He,ct,xt,It){var cn,kn,Nn,Kn,or,Pr,yi,Zr,ti,qi,Ji,ms;if(typeof O=="number"&&(ms=He,He=ye,ye=O,O=ms),ct=ct||[1,1],It=It||!1,isNaN(ye)||isNaN(He)||!Array.isArray(O)||!Array.isArray(ct)||!$r(xt)||typeof It!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(cr(ye,He),cn=ct[0],kn=ct[1],Kn=O.length,qi=ye,Ji=He,Nn=0;Nn<Kn;Nn++)(or=O[Nn]).length===2?(qi=or[0]*cn+qi,Ji=or[1]*kn+Ji,kr(qi,Ji)):(Pr=or[0]*cn+qi,yi=or[1]*kn+Ji,Zr=or[2]*cn+qi,ti=or[3]*kn+Ji,qi=or[4]*cn+qi,Ji=or[5]*kn+Ji,Fa(Pr,yi,Zr,ti,qi,Ji));return It&&Qa(),Fs(xt),this},_.path=function(O){for(var ye=0;ye<O.length;ye++){var He=O[ye],ct=He.c;switch(He.op){case"m":cr(ct[0],ct[1]);break;case"l":kr(ct[0],ct[1]);break;case"c":Fa.apply(this,ct);break;case"h":Qa()}}return this},_.__private__.rect=_.rect=function(O,ye,He,ct,xt){if(isNaN(O)||isNaN(ye)||isNaN(He)||isNaN(ct)||!$r(xt))throw new Error("Invalid arguments passed to jsPDF.rect");return Z===j.COMPAT&&(ct=-ct),de([Le(D(O)),Le(I(ye)),Le(D(He)),Le(D(ct)),"re"].join(" ")),Fs(xt),this},_.__private__.triangle=_.triangle=function(O,ye,He,ct,xt,It,cn){if(isNaN(O)||isNaN(ye)||isNaN(He)||isNaN(ct)||isNaN(xt)||isNaN(It)||!$r(cn))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[He-O,ct-ye],[xt-He,It-ct],[O-xt,ye-It]],O,ye,[1,1],cn,!0),this},_.__private__.roundedRect=_.roundedRect=function(O,ye,He,ct,xt,It,cn){if(isNaN(O)||isNaN(ye)||isNaN(He)||isNaN(ct)||isNaN(xt)||isNaN(It)||!$r(cn))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var kn=4/3*(Math.SQRT2-1);return xt=Math.min(xt,.5*He),It=Math.min(It,.5*ct),this.lines([[He-2*xt,0],[xt*kn,0,xt,It-It*kn,xt,It],[0,ct-2*It],[0,It*kn,-xt*kn,It,-xt,It],[2*xt-He,0],[-xt*kn,0,-xt,-It*kn,-xt,-It],[0,2*It-ct],[0,-It*kn,xt*kn,-It,xt,-It]],O+xt,ye,[1,1],cn,!0),this},_.__private__.ellipse=_.ellipse=function(O,ye,He,ct,xt){if(isNaN(O)||isNaN(ye)||isNaN(He)||isNaN(ct)||!$r(xt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var It=4/3*(Math.SQRT2-1)*He,cn=4/3*(Math.SQRT2-1)*ct;return cr(O+He,ye),Fa(O+He,ye-cn,O+It,ye-ct,O,ye-ct),Fa(O-It,ye-ct,O-He,ye-cn,O-He,ye),Fa(O-He,ye+cn,O-It,ye+ct,O,ye+ct),Fa(O+It,ye+ct,O+He,ye+cn,O+He,ye),Fs(xt),this},_.__private__.circle=_.circle=function(O,ye,He,ct){if(isNaN(O)||isNaN(ye)||isNaN(He)||!$r(ct))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(O,ye,He,He,ct)},_.setFont=function(O,ye,He){return He&&(ye=he(ye,He)),st=Qo(O,ye,{disableWarning:!1}),this};var Wu=_.__private__.getFont=_.getFont=function(){return Ue[Qo.apply(_,arguments)]};_.__private__.getFontList=_.getFontList=function(){var O,ye,He={};for(O in Dt)if(Dt.hasOwnProperty(O))for(ye in He[O]=[],Dt[O])Dt[O].hasOwnProperty(ye)&&He[O].push(ye);return He},_.addFont=function(O,ye,He,ct,xt){var It=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&It.indexOf(arguments[3])!==-1?xt=arguments[3]:arguments[3]&&It.indexOf(arguments[3])==-1&&(He=he(He,ct)),xt=xt||"Identity-H",Es.call(this,O,ye,He,xt)};var Cl,Wl=e.lineWidth||.200025,tl=_.__private__.getLineWidth=_.getLineWidth=function(){return Wl},Pl=_.__private__.setLineWidth=_.setLineWidth=function(O){return Wl=O,de(Le(D(O))+" w"),this};_.__private__.setLineDash=mr.API.setLineDash=mr.API.setLineDashPattern=function(O,ye){if(O=O||[],ye=ye||0,isNaN(ye)||!Array.isArray(O))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return O=O.map(function(He){return Le(D(He))}).join(" "),ye=Le(D(ye)),de("["+O+"] "+ye+" d"),this};var Zl=_.__private__.getLineHeight=_.getLineHeight=function(){return Qe*Cl};_.__private__.getLineHeight=_.getLineHeight=function(){return Qe*Cl};var Nr=_.__private__.setLineHeightFactor=_.setLineHeightFactor=function(O){return typeof(O=O||1.15)=="number"&&(Cl=O),this},Vi=_.__private__.getLineHeightFactor=_.getLineHeightFactor=function(){return Cl};Nr(e.lineHeight);var Xn=_.__private__.getHorizontalCoordinate=function(O){return D(O)},Hi=_.__private__.getVerticalCoordinate=function(O){return Z===j.ADVANCED?O:wn[te].mediaBox.topRightY-wn[te].mediaBox.bottomLeftY-D(O)},nl=_.__private__.getHorizontalCoordinateString=_.getHorizontalCoordinateString=function(O){return Le(Xn(O))},fa=_.__private__.getVerticalCoordinateString=_.getVerticalCoordinateString=function(O){return Le(Hi(O))},wi=e.strokeColor||"0 G";_.__private__.getStrokeColor=_.getDrawColor=function(){return bi(wi)},_.__private__.setStrokeColor=_.setDrawColor=function(O,ye,He,ct){return wi=di({ch1:O,ch2:ye,ch3:He,ch4:ct,pdfColorType:"draw",precision:2}),de(wi),this};var Kl=e.fillColor||"0 g";_.__private__.getFillColor=_.getFillColor=function(){return bi(Kl)},_.__private__.setFillColor=_.setFillColor=function(O,ye,He,ct){return Kl=di({ch1:O,ch2:ye,ch3:He,ch4:ct,pdfColorType:"fill",precision:2}),de(Kl),this};var Ys=e.textColor||"0 g",Al=_.__private__.getTextColor=_.getTextColor=function(){return bi(Ys)};_.__private__.setTextColor=_.setTextColor=function(O,ye,He,ct){return Ys=di({ch1:O,ch2:ye,ch3:He,ch4:ct,pdfColorType:"text",precision:3}),this};var Ml=e.charSpace,Ps=_.__private__.getCharSpace=_.getCharSpace=function(){return parseFloat(Ml||0)};_.__private__.setCharSpace=_.setCharSpace=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ml=O,this};var kl=0;_.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},_.__private__.setLineCap=_.setLineCap=function(O){var ye=_.CapJoinStyles[O];if(ye===void 0)throw new Error("Line cap style of '"+O+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return kl=ye,de(ye+" J"),this};var Qr=0;_.__private__.setLineJoin=_.setLineJoin=function(O){var ye=_.CapJoinStyles[O];if(ye===void 0)throw new Error("Line join style of '"+O+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Qr=ye,de(ye+" j"),this},_.__private__.setLineMiterLimit=_.__private__.setMiterLimit=_.setLineMiterLimit=_.setMiterLimit=function(O){if(O=O||0,isNaN(O))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return de(Le(D(O))+" M"),this},_.GState=yg,_.setGState=function(O){(O=typeof O=="string"?Ye[vn[O]]:Zu(null,O)).equals(Sn)||(de("/"+O.id+" gs"),Sn=O)};var Zu=function(O,ye){if(!O||!vn[O]){var He=!1;for(var ct in Ye)if(Ye.hasOwnProperty(ct)&&Ye[ct].equals(ye)){He=!0;break}if(He)ye=Ye[ct];else{var xt="GS"+(Object.keys(Ye).length+1).toString(10);Ye[xt]=ye,ye.id=xt}return O&&(vn[O]=ye.id),ur.publish("addGState",ye),ye}};_.addGState=function(O,ye){return Zu(O,ye),this},_.saveGraphicsState=function(){return de("q"),gn.push({key:st,size:Qe,color:Ys}),this},_.restoreGraphicsState=function(){de("Q");var O=gn.pop();return st=O.key,Qe=O.size,Ys=O.color,Sn=null,this},_.setCurrentTransformationMatrix=function(O){return de(O.toString()+" cm"),this},_.comment=function(O){return de("#"+O),this};var fo=function(O,ye){var He=O||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return He},set:function(It){isNaN(It)||(He=parseFloat(It))}});var ct=ye||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ct},set:function(It){isNaN(It)||(ct=parseFloat(It))}});var xt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return xt},set:function(It){xt=It.toString()}}),this},js=function(O,ye,He,ct){fo.call(this,O,ye),this.type="rect";var xt=He||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return xt},set:function(cn){isNaN(cn)||(xt=parseFloat(cn))}});var It=ct||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return It},set:function(cn){isNaN(cn)||(It=parseFloat(cn))}}),this},Tl=function(){this.page=ln,this.currentPage=te,this.pages=Me.slice(0),this.pagesContext=wn.slice(0),this.x=Vt,this.y=Xt,this.matrix=ft,this.width=ei(te),this.height=da(te),this.outputDestination=oe,this.id="",this.objectNumber=-1};Tl.prototype.restore=function(){ln=this.page,te=this.currentPage,wn=this.pagesContext,Me=this.pages,Vt=this.x,Xt=this.y,ft=this.matrix,gs(te,this.width),Gi(te,this.height),oe=this.outputDestination};var zs=function(O,ye,He,ct,xt){ki.push(new Tl),ln=te=0,Me=[],Vt=O,Xt=ye,ft=xt,Ui([He,ct])},rl=function(O){if(Wr[O])ki.pop().restore();else{var ye=new Tl,He="Xo"+(Object.keys(rr).length+1).toString(10);ye.id=He,Wr[O]=He,rr[He]=ye,ur.publish("addFormObject",ye),ki.pop().restore()}};for(var il in _.beginFormObject=function(O,ye,He,ct,xt){return zs(O,ye,He,ct,xt),this},_.endFormObject=function(O){return rl(O),this},_.doFormObject=function(O,ye){var He=rr[Wr[O]];return de("q"),de(ye.toString()+" cm"),de("/"+He.id+" Do"),de("Q"),this},_.getFormObject=function(O){var ye=rr[Wr[O]];return{x:ye.x,y:ye.y,width:ye.width,height:ye.height,matrix:ye.matrix}},_.save=function(O,ye){return O=O||"generated.pdf",(ye=ye||{}).returnPromise=ye.returnPromise||!1,ye.returnPromise===!1?(Fh(ho(Or()),O),typeof Fh.unload=="function"&&br.setTimeout&&setTimeout(Fh.unload,911),this):new Promise(function(He,ct){try{var xt=Fh(ho(Or()),O);typeof Fh.unload=="function"&&br.setTimeout&&setTimeout(Fh.unload,911),He(xt)}catch(It){ct(It.message)}})},mr.API)mr.API.hasOwnProperty(il)&&(il==="events"&&mr.API.events.length?function(O,ye){var He,ct,xt;for(xt=ye.length-1;xt!==-1;xt--)He=ye[xt][0],ct=ye[xt][1],O.subscribe.apply(O,[He].concat(typeof ct=="function"?[ct]:ct))}(ur,mr.API.events):_[il]=mr.API[il]);var ei=_.getPageWidth=function(O){return(wn[O=O||te].mediaBox.topRightX-wn[O].mediaBox.bottomLeftX)/rt},gs=_.setPageWidth=function(O,ye){wn[O].mediaBox.topRightX=ye*rt+wn[O].mediaBox.bottomLeftX},da=_.getPageHeight=function(O){return(wn[O=O||te].mediaBox.topRightY-wn[O].mediaBox.bottomLeftY)/rt},Gi=_.setPageHeight=function(O,ye){wn[O].mediaBox.topRightY=ye*rt+wn[O].mediaBox.bottomLeftY};return _.internal={pdfEscape:fr,getStyle:vu,getFont:Wu,getFontSize:ot,getCharSpace:Ps,getTextColor:Al,getLineHeight:Zl,getLineHeightFactor:Vi,getLineWidth:tl,write:ze,getHorizontalCoordinate:Xn,getVerticalCoordinate:Hi,getCoordinateString:nl,getVerticalCoordinateString:fa,collections:{},newObject:Wn,newAdditionalObject:hn,newObjectDeferred:bn,newObjectDeferredBegin:tr,getFilters:Ri,putStream:Lo,events:ur,scaleFactor:rt,pageSize:{getWidth:function(){return ei(te)},setWidth:function(O){gs(te,O)},getHeight:function(){return da(te)},setHeight:function(O){Gi(te,O)}},encryptionOptions:v,encryption:ao,getEncryptor:qu,output:$i,getNumberOfPages:vi,pages:Me,out:de,f2:Y,f3:$,getPageInfo:ql,getPageInfoByObjId:ar,getCurrentPageInfo:dr,getPDFVersion:T,Point:fo,Rectangle:js,Matrix:Fn,hasHotfix:Sl},Object.defineProperty(_.internal.pageSize,"width",{get:function(){return ei(te)},set:function(O){gs(te,O)},enumerable:!0,configurable:!0}),Object.defineProperty(_.internal.pageSize,"height",{get:function(){return da(te)},set:function(O){Gi(te,O)},enumerable:!0,configurable:!0}),sr.call(_,Ge),st="F1",So(i,n),ur.publish("initialized"),_}If.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},If.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},If.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},If.prototype.processOwnerPassword=function(e,t){return x1(w1(t).substr(0,5),e)},If.prototype.encryptor=function(e,t){var n=w1(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return x1(n,r)}},yg.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||Oi(e)!==Oi(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return r===0},mr.API={events:[]},mr.version="2.5.2";var Yo=mr.API,my=1,sf=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Pf=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Br=function(e){return e.toFixed(2)},Qc=function(e){return e.toFixed(5)};Yo.__acroform__={};var wl=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},Pb=function(e){return e*my},ic=function(e){var t=new P3,n=$n.internal.getHeight(e)||0,r=$n.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Br(r)),Number(Br(n))],t},VI=Yo.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},HI=Yo.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},GI=Yo.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},ls=Yo.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return GI(e,t-1)},us=Yo.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return VI(e,t-1)},cs=Yo.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return HI(e,t-1)},qI=Yo.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,i=e[0],s=e[1],o=e[2],u=e[3],h={};return h.lowerLeft_X=n(i)||0,h.lowerLeft_Y=r(s+u)||0,h.upperRight_X=n(i+o)||0,h.upperRight_Y=r(s)||0,[Number(Br(h.lowerLeft_X)),Number(Br(h.lowerLeft_Y)),Number(Br(h.upperRight_X)),Number(Br(h.upperRight_Y))]},WI=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=L1(e,n),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+Br(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=ic(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},L1=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function($){return $.split(`
`)}):i.map(function($){return[$]});var s=n,o=$n.internal.getHeight(e)||0;o=o<0?-o:o;var u=$n.internal.getWidth(e)||0;u=u<0?-u:u;var h=function($,D,k){if($+1<i.length){var I=D+" "+i[$+1][0];return v0(I,e,k).width<=u-4}return!1};s++;e:for(;s>0;){t="",s--;var d,v,y=v0("3",e,s).height,x=e.multiline?o-s:(o-y)/2,_=x+=2,P=0,T=0,U=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+v0(t,e,s=12).width+", FieldWidth:"+u+`
`;break}for(var N="",j=0,Z=0;Z<i.length;Z++)if(i.hasOwnProperty(Z)){var J=!1;if(i[Z].length!==1&&U!==i[Z].length-1){if((y+2)*(j+2)+2>o)continue e;N+=i[Z][U],J=!0,T=Z,Z--}else{N=(N+=i[Z][U]+" ").substr(N.length-1)==" "?N.substr(0,N.length-1):N;var le=parseInt(Z),he=h(le,N,s),Le=Z>=i.length-1;if(he&&!Le){N+=" ",U=0;continue}if(he||Le){if(Le)T=le;else if(e.multiline&&(y+2)*(j+2)+2>o)continue e}else{if(!e.multiline||(y+2)*(j+2)+2>o)continue e;T=le}}for(var V="",F=P;F<=T;F++){var Y=i[F];if(e.multiline){if(F===T){V+=Y[U]+" ",U=(U+1)%Y.length;continue}if(F===P){V+=Y[Y.length-1]+" ";continue}}V+=Y[0]+" "}switch(V=V.substr(V.length-1)==" "?V.substr(0,V.length-1):V,v=v0(V,e,s).width,e.textAlign){case"right":d=u-v-2;break;case"center":d=(u-v)/2;break;case"left":default:d=2}t+=Br(d)+" "+Br(_)+` Td
`,t+="("+sf(V)+`) Tj
`,t+=-Br(d)+` 0 Td
`,_=-(s+2),v=0,P=J?T:T+1,j++,N=""}break}return r.text=t,r.fontSize=s,r},v0=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},ZI={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},KI=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},YI=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,i=e[n];t.internal.newObjectDeferredBegin(i.objId,!0),Oi(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete e[r]}},XI=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Hu.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(ZI)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");my=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new A3,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&KI(s,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var u=r[o],h=[],d=u.Rect;if(u.Rect&&(u.Rect=qI(u.Rect,i)),i.internal.newObjectDeferredBegin(u.objId,!0),u.DA=$n.createDefaultAppearanceStream(u),Oi(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(h=u.getKeyValueListForStream()),u.Rect=d,u.hasAppearanceStream&&!u.appearanceStreamContent){var v=WI(u);h.push({key:"AP",value:"<</N "+v+">>"}),i.internal.acroformPlugin.xForms.push(v)}if(u.appearanceStreamContent){var y="";for(var x in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(x)){var _=u.appearanceStreamContent[x];if(y+="/"+x+" ",y+="<<",Object.keys(_).length>=1||Array.isArray(_)){for(var o in _)if(_.hasOwnProperty(o)){var P=_[o];typeof P=="function"&&(P=P.call(i,u)),y+="/"+o+" "+P+" ",i.internal.acroformPlugin.xForms.indexOf(P)>=0||i.internal.acroformPlugin.xForms.push(P)}}else typeof(P=_)=="function"&&(P=P.call(i,u)),y+="/"+o+" "+P,i.internal.acroformPlugin.xForms.indexOf(P)>=0||i.internal.acroformPlugin.xForms.push(P);y+=">>"}h.push({key:"AP",value:`<<
`+y+">>"})}i.internal.putStream({additionalKeyValues:h,objectId:u.objId}),i.internal.out("endobj")}s&&YI(i.internal.acroformPlugin.xForms,i)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},C3=Yo.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(o){return o};if(Array.isArray(e)){for(var i="[",s=0;s<e.length;s++)switch(s!==0&&(i+=" "),Oi(e[s])){case"boolean":case"number":case"object":i+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&n&&(r=n.internal.getEncryptor(t)),i+="("+sf(r(e[s].toString()))+")"):i+=e[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},hv=function(e,t,n){var r=function(i){return i};return t!==void 0&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),e="("+sf(r(e))+")"},uc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};uc.prototype.toString=function(){return this.objId+" 0 R"},uc.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},uc.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var r=t[n],i=this[r];i&&(Array.isArray(i)?e.push({key:r,value:C3(i,this.objId,this.scope)}):i instanceof uc?(i.scope=this.scope,e.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:r,value:i}))}return e};var P3=function(){uc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};wl(P3,uc);var A3=function(){uc.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+sf(n(e))+")"}},set:function(n){e=n}})};wl(A3,uc);var Hu=function e(){uc.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute F supplied.');t=N}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ls(t,3)},set:function(N){N?this.F=us(t,3):this.F=cs(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute Ff supplied.');n=N}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(N){r=N!==void 0?N:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(N){r[0]=N}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(N){r[1]=N}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(N){r[2]=N}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(N){r[3]=N}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(N){switch(N){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=N;break;default:throw new Error('Invalid value "'+N+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof _g)return;s="FieldObject"+e.FieldNum++}var N=function(j){return j};return this.scope&&(N=this.scope.internal.getEncryptor(this.objId)),"("+sf(N(s))+")"},set:function(N){s=N.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(N){s=N}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(N){o=N}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(N){u=N}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(N){h=N}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/my:d},set:function(N){d=N}});var v="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return v},set:function(N){v=N}});var y="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!y||this instanceof _g||this instanceof Yh))return hv(y,this.objId,this.scope)},set:function(N){N=N.toString(),y=N}});var x=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof Ws?x:hv(x,this.objId,this.scope)},set:function(N){N=N.toString(),x=this instanceof Ws?N:N.substr(0,1)==="("?Pf(N.substr(1,N.length-2)):Pf(N)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ws?Pf(x.substr(1,x.length-1)):x},set:function(N){N=N.toString(),x=this instanceof Ws?"/"+N:N}});var _=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(_)return _},set:function(N){this.V=N}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(_)return this instanceof Ws?_:hv(_,this.objId,this.scope)},set:function(N){N=N.toString(),_=this instanceof Ws?N:N.substr(0,1)==="("?Pf(N.substr(1,N.length-2)):Pf(N)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ws?Pf(_.substr(1,_.length-1)):_},set:function(N){N=N.toString(),_=this instanceof Ws?"/"+N:N}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var P,T=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return T},set:function(N){N=!!N,T=N}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(P)return P},set:function(N){P=N}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,1)},set:function(N){N?this.Ff=us(this.Ff,1):this.Ff=cs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,2)},set:function(N){N?this.Ff=us(this.Ff,2):this.Ff=cs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,3)},set:function(N){N?this.Ff=us(this.Ff,3):this.Ff=cs(this.Ff,3)}});var U=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(U!==null)return U},set:function(N){if([0,1,2].indexOf(N)===-1)throw new Error('Invalid value "'+N+'" for attribute Q supplied.');U=N}}),Object.defineProperty(this,"textAlign",{get:function(){var N;switch(U){case 0:default:N="left";break;case 1:N="center";break;case 2:N="right"}return N},configurable:!0,enumerable:!0,set:function(N){switch(N){case"right":case 2:U=2;break;case"center":case 1:U=1;break;case"left":case 0:default:U=0}}})};wl(Hu,uc);var Yf=function(){Hu.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return C3(t,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,u){u||(u=1);for(var h,d=[];h=o.exec(s);)d.push(h[u]);return d}(r,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,18)},set:function(n){n?this.Ff=us(this.Ff,18):this.Ff=cs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=us(this.Ff,19):this.Ff=cs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,20)},set:function(n){n?(this.Ff=us(this.Ff,20),t.sort()):this.Ff=cs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,22)},set:function(n){n?this.Ff=us(this.Ff,22):this.Ff=cs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,23)},set:function(n){n?this.Ff=us(this.Ff,23):this.Ff=cs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,27)},set:function(n){n?this.Ff=us(this.Ff,27):this.Ff=cs(this.Ff,27)}}),this.hasAppearanceStream=!1};wl(Yf,Hu);var Xf=function(){Yf.call(this),this.fontName="helvetica",this.combo=!1};wl(Xf,Yf);var Jf=function(){Xf.call(this),this.combo=!0};wl(Jf,Xf);var F0=function(){Jf.call(this),this.edit=!0};wl(F0,Jf);var Ws=function(){Hu.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,15)},set:function(n){n?this.Ff=us(this.Ff,15):this.Ff=cs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,16)},set:function(n){n?this.Ff=us(this.Ff,16):this.Ff=cs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,17)},set:function(n){n?this.Ff=us(this.Ff,17):this.Ff=cs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,26)},set:function(n){n?this.Ff=us(this.Ff,26):this.Ff=cs(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,i=[];for(r in i.push("<<"),t)i.push("/"+r+" ("+sf(n(t[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Oi(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};wl(Ws,Hu);var j0=function(){Ws.call(this),this.pushButton=!0};wl(j0,Ws);var Qf=function(){Ws.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};wl(Qf,Ws);var _g=function(){var e,t;Hu.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(u){return u};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+sf(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Oi(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=$n.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};wl(_g,Hu),Qf.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},Qf.prototype.createOption=function(e){var t=new _g;return t.Parent=this,t.optionName=e,this.Kids.push(t),JI.call(this.scope,t),t};var z0=function(){Ws.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=$n.CheckBox.createAppearanceStream()};wl(z0,Ws);var Yh=function(){Hu.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,13)},set:function(t){t?this.Ff=us(this.Ff,13):this.Ff=cs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,21)},set:function(t){t?this.Ff=us(this.Ff,21):this.Ff=cs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,23)},set:function(t){t?this.Ff=us(this.Ff,23):this.Ff=cs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,24)},set:function(t){t?this.Ff=us(this.Ff,24):this.Ff=cs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,25)},set:function(t){t?this.Ff=us(this.Ff,25):this.Ff=cs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,26)},set:function(t){t?this.Ff=us(this.Ff,26):this.Ff=cs(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};wl(Yh,Hu);var U0=function(){Yh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,14)},set:function(e){e?this.Ff=us(this.Ff,14):this.Ff=cs(this.Ff,14)}}),this.password=!0};wl(U0,Yh);var $n={CheckBox:{createAppearanceStream:function(){return{N:{On:$n.CheckBox.YesNormal},D:{On:$n.CheckBox.YesPushDown,Off:$n.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=ic(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),s=L1(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Br($n.internal.getWidth(e))+" "+Br($n.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Br(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=ic(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),i=[],s=$n.internal.getHeight(e),o=$n.internal.getWidth(e),u=L1(e,e.caption);return i.push("1 g"),i.push("0 0 "+Br(o)+" "+Br(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Br(o-1)+" "+Br(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Br(u.fontSize)+" Tf "+r),i.push(u.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=ic(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Br($n.internal.getWidth(e))+" "+Br($n.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:$n.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=$n.RadioButton.Circle.YesNormal,t.D[e]=$n.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=ic(e);t.scope=e.scope;var n=[],r=$n.internal.getWidth(e)<=$n.internal.getHeight(e)?$n.internal.getWidth(e)/4:$n.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=$n.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Qc($n.internal.getWidth(e)/2)+" "+Qc($n.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=ic(e);t.scope=e.scope;var n=[],r=$n.internal.getWidth(e)<=$n.internal.getHeight(e)?$n.internal.getWidth(e)/4:$n.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*$n.internal.Bezier_C).toFixed(5)),o=Number((r*$n.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Qc($n.internal.getWidth(e)/2)+" "+Qc($n.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Qc($n.internal.getWidth(e)/2)+" "+Qc($n.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=ic(e);t.scope=e.scope;var n=[],r=$n.internal.getWidth(e)<=$n.internal.getHeight(e)?$n.internal.getWidth(e)/4:$n.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*$n.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Qc($n.internal.getWidth(e)/2)+" "+Qc($n.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:$n.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=$n.RadioButton.Cross.YesNormal,t.D[e]=$n.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=ic(e);t.scope=e.scope;var n=[],r=$n.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Br($n.internal.getWidth(e)-2)+" "+Br($n.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Br(r.x1.x)+" "+Br(r.x1.y)+" m"),n.push(Br(r.x2.x)+" "+Br(r.x2.y)+" l"),n.push(Br(r.x4.x)+" "+Br(r.x4.y)+" m"),n.push(Br(r.x3.x)+" "+Br(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=ic(e);t.scope=e.scope;var n=$n.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+Br($n.internal.getWidth(e))+" "+Br($n.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Br($n.internal.getWidth(e)-2)+" "+Br($n.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Br(n.x1.x)+" "+Br(n.x1.y)+" m"),r.push(Br(n.x2.x)+" "+Br(n.x2.y)+" l"),r.push(Br(n.x4.x)+" "+Br(n.x4.y)+" m"),r.push(Br(n.x3.x)+" "+Br(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=ic(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Br($n.internal.getWidth(e))+" "+Br($n.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};$n.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=$n.internal.getWidth(e),n=$n.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},$n.internal.getWidth=function(e){var t=0;return Oi(e)==="object"&&(t=Pb(e.Rect[2])),t},$n.internal.getHeight=function(e){var t=0;return Oi(e)==="object"&&(t=Pb(e.Rect[3])),t};var JI=Yo.addField=function(e){if(XI(this,e),!(e instanceof Hu))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Yo.AcroFormChoiceField=Yf,Yo.AcroFormListBox=Xf,Yo.AcroFormComboBox=Jf,Yo.AcroFormEditBox=F0,Yo.AcroFormButton=Ws,Yo.AcroFormPushButton=j0,Yo.AcroFormRadioButton=Qf,Yo.AcroFormCheckBox=z0,Yo.AcroFormTextField=Yh,Yo.AcroFormPasswordField=U0,Yo.AcroFormAppearance=$n,Yo.AcroForm={ChoiceField:Yf,ListBox:Xf,ComboBox:Jf,EditBox:F0,Button:Ws,PushButton:j0,RadioButton:Qf,CheckBox:z0,TextField:Yh,PasswordField:U0,Appearance:$n},mr.AcroForm={ChoiceField:Yf,ListBox:Xf,ComboBox:Jf,EditBox:F0,Button:Ws,PushButton:j0,RadioButton:Qf,CheckBox:z0,TextField:Yh,PasswordField:U0,Appearance:$n};mr.AcroForm;function M3(e){return e.reduce(function(t,n,r){return t[n]=r,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function($,D){var k,I,W,G,K,q=t;if((D=D||t)==="RGBA"||$.data!==void 0&&$.data instanceof Uint8ClampedArray&&"height"in $&&"width"in $)return"RGBA";if(he($))for(K in n)for(W=n[K],k=0;k<W.length;k+=1){for(G=!0,I=0;I<W[k].length;I+=1)if(W[k][I]!==void 0&&W[k][I]!==$[I]){G=!1;break}if(G===!0){q=K;break}}else for(K in n)for(W=n[K],k=0;k<W.length;k+=1){for(G=!0,I=0;I<W[k].length;I+=1)if(W[k][I]!==void 0&&W[k][I]!==$.charCodeAt(I)){G=!1;break}if(G===!0){q=K;break}}return q===t&&D!==t&&(q=D),q},i=function $(D){for(var k=this.internal.write,I=this.internal.putStream,W=(0,this.internal.getFilters)();W.indexOf("FlateEncode")!==-1;)W.splice(W.indexOf("FlateEncode"),1);D.objectId=this.internal.newObject();var G=[];if(G.push({key:"Type",value:"/XObject"}),G.push({key:"Subtype",value:"/Image"}),G.push({key:"Width",value:D.width}),G.push({key:"Height",value:D.height}),D.colorSpace===U.INDEXED?G.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(D.palette.length/3-1)+" "+("sMask"in D&&D.sMask!==void 0?D.objectId+2:D.objectId+1)+" 0 R]"}):(G.push({key:"ColorSpace",value:"/"+D.colorSpace}),D.colorSpace===U.DEVICE_CMYK&&G.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),G.push({key:"BitsPerComponent",value:D.bitsPerComponent}),"decodeParameters"in D&&D.decodeParameters!==void 0&&G.push({key:"DecodeParms",value:"<<"+D.decodeParameters+">>"}),"transparency"in D&&Array.isArray(D.transparency)){for(var K="",q=0,ve=D.transparency.length;q<ve;q++)K+=D.transparency[q]+" "+D.transparency[q]+" ";G.push({key:"Mask",value:"["+K+"]"})}D.sMask!==void 0&&G.push({key:"SMask",value:D.objectId+1+" 0 R"});var Ce=D.filter!==void 0?["/"+D.filter]:void 0;if(I({data:D.data,additionalKeyValues:G,alreadyAppliedFilters:Ce,objectId:D.objectId}),k("endobj"),"sMask"in D&&D.sMask!==void 0){var Xe="/Predictor "+D.predictor+" /Colors 1 /BitsPerComponent "+D.bitsPerComponent+" /Columns "+D.width,B={width:D.width,height:D.height,colorSpace:"DeviceGray",bitsPerComponent:D.bitsPerComponent,decodeParameters:Xe,data:D.sMask};"filter"in D&&(B.filter=D.filter),$.call(this,B)}if(D.colorSpace===U.INDEXED){var te=this.internal.newObject();I({data:V(new Uint8Array(D.palette)),objectId:te}),k("endobj")}},s=function(){var $=this.internal.collections.addImage_images;for(var D in $)i.call(this,$[D])},o=function(){var $,D=this.internal.collections.addImage_images,k=this.internal.write;for(var I in D)k("/I"+($=D[I]).index,$.objectId,"0","R")},u=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},h=function(){var $=this.internal.collections.addImage_images;return u.call(this),$},d=function(){return Object.keys(this.internal.collections.addImage_images).length},v=function($){return typeof e["process"+$.toUpperCase()]=="function"},y=function($){return Oi($)==="object"&&$.nodeType===1},x=function($,D){if($.nodeName==="IMG"&&$.hasAttribute("src")){var k=""+$.getAttribute("src");if(k.indexOf("data:image/")===0)return rp(unescape(k).split("base64,").pop());var I=e.loadFile(k,!0);if(I!==void 0)return I}if($.nodeName==="CANVAS"){if($.width===0||$.height===0)throw new Error("Given canvas must have data. Canvas width: "+$.width+", height: "+$.height);var W;switch(D){case"PNG":W="image/png";break;case"WEBP":W="image/webp";break;case"JPEG":case"JPG":default:W="image/jpeg"}return rp($.toDataURL(W,1).split("base64,").pop())}},_=function($){var D=this.internal.collections.addImage_images;if(D){for(var k in D)if($===D[k].alias)return D[k]}},P=function($,D,k){return $||D||($=-96,D=-96),$<0&&($=-1*k.width*72/$/this.internal.scaleFactor),D<0&&(D=-1*k.height*72/D/this.internal.scaleFactor),$===0&&($=D*k.width/k.height),D===0&&(D=$*k.height/k.width),[$,D]},T=function($,D,k,I,W,G){var K=P.call(this,k,I,W),q=this.internal.getCoordinateString,ve=this.internal.getVerticalCoordinateString,Ce=h.call(this);if(k=K[0],I=K[1],Ce[W.index]=W,G){G*=Math.PI/180;var Xe=Math.cos(G),B=Math.sin(G),te=function(ae){return ae.toFixed(4)},se=[te(Xe),te(B),te(-1*B),te(Xe),0,0,"cm"]}this.internal.write("q"),G?(this.internal.write([1,"0","0",1,q($),ve(D+I),"cm"].join(" ")),this.internal.write(se.join(" ")),this.internal.write([q(k),"0","0",q(I),"0","0","cm"].join(" "))):this.internal.write([q(k),"0","0",q(I),q($),ve(D+I),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+W.index+" Do"),this.internal.write("Q")},U=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var N=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},j=e.__addimage__.sHashCode=function($){var D,k,I=0;if(typeof $=="string")for(k=$.length,D=0;D<k;D++)I=(I<<5)-I+$.charCodeAt(D),I|=0;else if(he($))for(k=$.byteLength/2,D=0;D<k;D++)I=(I<<5)-I+$[D],I|=0;return I},Z=e.__addimage__.validateStringAsBase64=function($){($=$||"").toString().trim();var D=!0;return $.length===0&&(D=!1),$.length%4!=0&&(D=!1),/^[A-Za-z0-9+/]+$/.test($.substr(0,$.length-2))===!1&&(D=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test($.substr(-2))===!1&&(D=!1),D},J=e.__addimage__.extractImageFromDataUrl=function($){var D=($=$||"").split("base64,"),k=null;if(D.length===2){var I=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(D[0]);Array.isArray(I)&&(k={mimeType:I[1],charset:I[2],data:D[1]})}return k},le=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function($){return le()&&$ instanceof ArrayBuffer};var he=e.__addimage__.isArrayBufferView=function($){return le()&&typeof Uint32Array<"u"&&($ instanceof Int8Array||$ instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&$ instanceof Uint8ClampedArray||$ instanceof Int16Array||$ instanceof Uint16Array||$ instanceof Int32Array||$ instanceof Uint32Array||$ instanceof Float32Array||$ instanceof Float64Array)},Le=e.__addimage__.binaryStringToUint8Array=function($){for(var D=$.length,k=new Uint8Array(D),I=0;I<D;I++)k[I]=$.charCodeAt(I);return k},V=e.__addimage__.arrayBufferToBinaryString=function($){for(var D="",k=he($)?$:new Uint8Array($),I=0;I<k.length;I+=8192)D+=String.fromCharCode.apply(null,k.subarray(I,I+8192));return D};e.addImage=function(){var $,D,k,I,W,G,K,q,ve;if(typeof arguments[1]=="number"?(D=t,k=arguments[1],I=arguments[2],W=arguments[3],G=arguments[4],K=arguments[5],q=arguments[6],ve=arguments[7]):(D=arguments[1],k=arguments[2],I=arguments[3],W=arguments[4],G=arguments[5],K=arguments[6],q=arguments[7],ve=arguments[8]),Oi($=arguments[0])==="object"&&!y($)&&"imageData"in $){var Ce=$;$=Ce.imageData,D=Ce.format||D||t,k=Ce.x||k||0,I=Ce.y||I||0,W=Ce.w||Ce.width||W,G=Ce.h||Ce.height||G,K=Ce.alias||K,q=Ce.compression||q,ve=Ce.rotation||Ce.angle||ve}var Xe=this.internal.getFilters();if(q===void 0&&Xe.indexOf("FlateEncode")!==-1&&(q="SLOW"),isNaN(k)||isNaN(I))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var B=F.call(this,$,D,K,q);return T.call(this,k,I,W,G,B,ve),this};var F=function($,D,k,I){var W,G,K;if(typeof $=="string"&&r($)===t){$=unescape($);var q=Y($,!1);(q!==""||(q=e.loadFile($,!0))!==void 0)&&($=q)}if(y($)&&($=x($,D)),D=r($,D),!v(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(((K=k)==null||K.length===0)&&(k=function(ve){return typeof ve=="string"||he(ve)?j(ve):he(ve.data)?j(ve.data):null}($)),(W=_.call(this,k))||(le()&&($ instanceof Uint8Array||D==="RGBA"||(G=$,$=Le($))),W=this["process"+D.toUpperCase()]($,d.call(this),k,function(ve){return ve&&typeof ve=="string"&&(ve=ve.toUpperCase()),ve in e.image_compression?ve:N.NONE}(I),G)),!W)throw new Error("An unknown error occurred whilst processing the image.");return W},Y=e.__addimage__.convertBase64ToBinaryString=function($,D){var k;D=typeof D!="boolean"||D;var I,W="";if(typeof $=="string"){I=(k=J($))!==null?k.data:$;try{W=rp(I)}catch(G){if(D)throw Z(I)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+G.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return W};e.getImageProperties=function($){var D,k,I="";if(y($)&&($=x($)),typeof $=="string"&&r($)===t&&((I=Y($,!1))===""&&(I=e.loadFile($)||""),$=I),k=r($),!v(k))throw new Error("addImage does not support files of type '"+k+"', please ensure that a plugin for '"+k+"' support is added.");if(!le()||$ instanceof Uint8Array||($=Le($)),!(D=this["process"+k.toUpperCase()]($)))throw new Error("An unknown error occurred whilst processing the image");return D.fileType=k,D}})(mr.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};mr.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(n.objId),d=n.pageContext.annotations,v=!1,y=0;y<d.length&&!v;y++)switch((r=d[y]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(v=!0);break;case"reference":case"text":case"freetext":v=!0}if(v!=0){this.internal.write("/Annots [");for(var x=0;x<d.length;x++){r=d[x];var _=this.internal.pdfEscape,P=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var T=this.internal.newAdditionalObject(),U=this.internal.newAdditionalObject(),N=this.internal.getEncryptor(T.objId),j=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+u(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y)+"] ")+"/Contents ("+_(N(r.contents))+")",s+=" /Popup "+U.objId+" 0 R",s+=" /P "+h.objId+" 0 R",s+=" /T ("+_(N(j))+") >>",T.content=s;var Z=T.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+u(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+u(r.bounds.y)+"] ")+" /Parent "+Z,r.open&&(s+=" /Open true"),s+=" >>",U.content=s,this.internal.write(T.objId,"0 R",U.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+u(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y+r.bounds.h)+"] ";var J=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+_(P(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+J+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var le=this.annotations._nameMap[r.options.name];r.options.pageNumber=le.page,r.options.top=le.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+_(P(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var he=u(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+he+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},e.link=function(n,r,i,s,o){var u=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:h(n),y:d(r),w:h(n+i),h:d(r+s)},options:o,type:"link"})},e.textWithLink=function(n,r,i,s){var o,u,h=this.getTextWidth(n),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){u=s.maxWidth;var v=this.splitTextToSize(n,u).length;o=Math.ceil(d*v)}else u=h,o=d;return this.text(n,r,i,s),i+=.2*d,s.align==="center"&&(r-=h/2),s.align==="right"&&(r-=h),this.link(r,i-d,u,o,s),h},e.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(mr.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(T){return t[T.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(T){return typeof T=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(T)},u=e.__arabicParser__.isArabicEndLetter=function(T){return o(T)&&s(T)&&t[T.charCodeAt(0)].length<=2},h=e.__arabicParser__.isArabicAlfLetter=function(T){return o(T)&&i.indexOf(T.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(T){return o(T)&&s(T)&&t[T.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(T){return o(T)&&s(T)&&t[T.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(T){return o(T)&&s(T)&&t[T.charCodeAt(0)].length>=3};var v=e.__arabicParser__.arabicLetterHasMedialForm=function(T){return o(T)&&s(T)&&t[T.charCodeAt(0)].length==4},y=e.__arabicParser__.resolveLigatures=function(T){var U=0,N=n,j="",Z=0;for(U=0;U<T.length;U+=1)N[T.charCodeAt(U)]!==void 0?(Z++,typeof(N=N[T.charCodeAt(U)])=="number"&&(j+=String.fromCharCode(N),N=n,Z=0),U===T.length-1&&(N=n,j+=T.charAt(U-(Z-1)),U-=Z-1,Z=0)):(N=n,j+=T.charAt(U-Z),U-=Z,Z=0);return j};e.__arabicParser__.isArabicDiacritic=function(T){return T!==void 0&&r[T.charCodeAt(0)]!==void 0};var x=e.__arabicParser__.getCorrectForm=function(T,U,N){return o(T)?s(T)===!1?-1:!d(T)||!o(U)&&!o(N)||!o(N)&&u(U)||u(T)&&!o(U)||u(T)&&h(U)||u(T)&&u(U)?0:v(T)&&o(U)&&!u(U)&&o(N)&&d(N)?3:u(T)||!o(N)?1:2:-1},_=function(T){var U=0,N=0,j=0,Z="",J="",le="",he=(T=T||"").split("\\s+"),Le=[];for(U=0;U<he.length;U+=1){for(Le.push(""),N=0;N<he[U].length;N+=1)Z=he[U][N],J=he[U][N-1],le=he[U][N+1],o(Z)?(j=x(Z,J,le),Le[U]+=j!==-1?String.fromCharCode(t[Z.charCodeAt(0)][j]):Z):Le[U]+=Z;Le[U]=y(Le[U])}return Le.join(" ")},P=e.__arabicParser__.processArabic=e.processArabic=function(){var T,U=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,N=[];if(Array.isArray(U)){var j=0;for(N=[],j=0;j<U.length;j+=1)Array.isArray(U[j])?N.push([_(U[j][0]),U[j][1],U[j][2]]):N.push([_(U[j])]);T=N}else T=_(U);return typeof arguments[0]=="string"?T:(arguments[0].text=T,arguments[0])};e.events.push(["preProcessText",P])}(mr.API),mr.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(u){n=u}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(u){r=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(u){i=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(u){s=u}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(u){o=u}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(mr.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(T){h=T}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(T){d=T}});var v=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return v},set:function(T){v=T}});var y=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return y},set:function(T){y=T}});var x=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return x},set:function(T){x=T}});var _=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return _},set:function(T){_=T}});var P=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return P},set:function(T){P=T}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(h){return r.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},e.getTextDimensions=function(h,d){r.call(this);var v=(d=d||{}).fontSize||this.getFontSize(),y=d.font||this.getFont(),x=d.scaleFactor||this.internal.scaleFactor,_=0,P=0,T=0,U=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var N=d.maxWidth;N>0?typeof h=="string"?h=this.splitTextToSize(h,N):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(Z,J){return Z.concat(U.splitTextToSize(J,N))},[])):h=Array.isArray(h)?h:[h];for(var j=0;j<h.length;j++)_<(T=this.getStringUnitWidth(h[j],{font:y})*v)&&(_=T);return _!==0&&(P=h.length),{w:_/=x,h:Math.max((P*v*this.getLineHeightFactor()-v*(this.getLineHeightFactor()-1))/x,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var h=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var h;h=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var d=this.internal.__cell__.lastCell,v=this.internal.__cell__.padding,y=this.internal.__cell__.margins||t,x=this.internal.__cell__.tableHeaderRow,_=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===h.lineNumber?(h.x=(d.x||0)+(d.width||0),h.y=d.y||0):d.y+d.height+h.height+y.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=y.top,_&&x&&(this.printHeaderRow(h.lineNumber,!0),h.y+=x[0].height)):h.y=d.y+d.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,n===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-v,h.y+v,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+v,{align:"center",baseline:"top",maxWidth:h.width-v-v}):this.text(h.text,h.x+v,h.y+v,{align:"left",baseline:"top",maxWidth:h.width-v-v})),this.internal.__cell__.lastCell=h,this};e.table=function(h,d,v,y,x){if(r.call(this),!v)throw new Error("No data for PDF table.");var _,P,T,U,N=[],j=[],Z=[],J={},le={},he=[],Le=[],V=(x=x||{}).autoSize||!1,F=x.printHeaders!==!1,Y=x.css&&x.css["font-size"]!==void 0?16*x.css["font-size"]:x.fontSize||12,$=x.margins||Object.assign({width:this.getPageWidth()},t),D=typeof x.padding=="number"?x.padding:3,k=x.headerBackgroundColor||"#c8c8c8",I=x.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=F,this.internal.__cell__.margins=$,this.internal.__cell__.table_font_size=Y,this.internal.__cell__.padding=D,this.internal.__cell__.headerBackgroundColor=k,this.internal.__cell__.headerTextColor=I,this.setFontSize(Y),y==null)j=N=Object.keys(v[0]),Z=N.map(function(){return"left"});else if(Array.isArray(y)&&Oi(y[0])==="object")for(N=y.map(function(Ce){return Ce.name}),j=y.map(function(Ce){return Ce.prompt||Ce.name||""}),Z=y.map(function(Ce){return Ce.align||"left"}),_=0;_<y.length;_+=1)le[y[_].name]=y[_].width*(19.049976/25.4);else Array.isArray(y)&&typeof y[0]=="string"&&(j=N=y,Z=N.map(function(){return"left"}));if(V||Array.isArray(y)&&typeof y[0]=="string")for(_=0;_<N.length;_+=1){for(J[U=N[_]]=v.map(function(Ce){return Ce[U]}),this.setFont(void 0,"bold"),he.push(this.getTextDimensions(j[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),P=J[U],this.setFont(void 0,"normal"),T=0;T<P.length;T+=1)he.push(this.getTextDimensions(P[T],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);le[U]=Math.max.apply(null,he)+D+D,he=[]}if(F){var W={};for(_=0;_<N.length;_+=1)W[N[_]]={},W[N[_]].text=j[_],W[N[_]].align=Z[_];var G=u.call(this,W,le);Le=N.map(function(Ce){return new s(h,d,le[Ce],G,W[Ce].text,void 0,W[Ce].align)}),this.setTableHeaderRow(Le),this.printHeaderRow(1,!1)}var K=y.reduce(function(Ce,Xe){return Ce[Xe.name]=Xe.align,Ce},{});for(_=0;_<v.length;_+=1){"rowStart"in x&&x.rowStart instanceof Function&&x.rowStart({row:_,data:v[_]},this);var q=u.call(this,v[_],le);for(T=0;T<N.length;T+=1){var ve=v[_][N[T]];"cellStart"in x&&x.cellStart instanceof Function&&x.cellStart({row:_,col:T,data:ve},this),o.call(this,new s(h,d,le[N[T]],q,ve,_+2,K[N[T]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=d,this};var u=function(h,d){var v=this.internal.__cell__.padding,y=this.internal.__cell__.table_font_size,x=this.internal.scaleFactor;return Object.keys(h).map(function(_){var P=h[_];return this.splitTextToSize(P.hasOwnProperty("text")?P.text:P,d[_]-v-v)},this).map(function(_){return this.getLineHeightFactor()*_.length*y/x+v+v},this).reduce(function(_,P){return Math.max(_,P)},0)};e.setTableHeaderRow=function(h){r.call(this),this.internal.__cell__.tableHeaderRow=h},e.printHeaderRow=function(h,d){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var v;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var y=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(y[0],y[1],y[2],y[3],void 0,-1)}this.setFont(void 0,"bold");for(var x=[],_=0;_<this.internal.__cell__.tableHeaderRow.length;_+=1){v=this.internal.__cell__.tableHeaderRow[_].clone(),d&&(v.y=this.internal.__cell__.margins.top||0,x.push(v)),v.lineNumber=h;var P=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,v),this.setTextColor(P)}x.length>0&&this.setTableHeaderRow(x),this.setFont(void 0,"normal"),n=!1}}(mr.API);var k3={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},T3=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],S1=M3(T3),B3=[100,200,300,400,500,600,700,800,900],QI=M3(B3);function E1(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return k3[s=s||"normal"]?s:"normal"}(e.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),i=function(s){return typeof S1[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,n,r].join(" ")}}}function Ab(e,t,n,r){var i;for(i=n;i>=0&&i<t.length;i+=r)if(e[t[i]])return e[t[i]];for(i=n;i>=0&&i<t.length;i-=r)if(e[t[i]])return e[t[i]]}var eR={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Mb={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function kb(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function tR(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},eR,n.genericFontFamilies||{}),s=null,o=null,u=0;u<t.length;++u)if(i[(s=E1(t[u])).family]&&(s.family=i[s.family]),e.hasOwnProperty(s.family)){o=e[s.family];break}if(!(o=o||e[r]))throw new Error("Could not find a font-family for the rule '"+kb(s)+"' and default family '"+r+"'.");if(o=function(h,d){if(d[h])return d[h];var v=S1[h],y=v<=S1.normal?-1:1,x=Ab(d,T3,v,y);if(!x)throw new Error("Could not find a matching font-stretch value for "+h);return x}(s.stretch,o),o=function(h,d){if(d[h])return d[h];for(var v=k3[h],y=0;y<v.length;++y)if(d[v[y]])return d[v[y]];throw new Error("Could not find a matching font-style for "+h)}(s.style,o),!(o=function(h,d){if(d[h])return d[h];if(h===400&&d[500])return d[500];if(h===500&&d[400])return d[400];var v=QI[h],y=Ab(d,B3,v,h<400?-1:1);if(!y)throw new Error("Could not find a matching font-weight for value "+h);return y}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+kb(s)+"'.");return o}function Tb(e){return e.trimLeft()}function nR(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function rR(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var y0,Bb,Ob,fv=["times"];(function(e){var t,n,r,i,s,o,u,h,d,v=function(B){return B=B||{},this.isStrokeTransparent=B.isStrokeTransparent||!1,this.strokeOpacity=B.strokeOpacity||1,this.strokeStyle=B.strokeStyle||"#000000",this.fillStyle=B.fillStyle||"#000000",this.isFillTransparent=B.isFillTransparent||!1,this.fillOpacity=B.fillOpacity||1,this.font=B.font||"10px sans-serif",this.textBaseline=B.textBaseline||"alphabetic",this.textAlign=B.textAlign||"left",this.lineWidth=B.lineWidth||1,this.lineJoin=B.lineJoin||"miter",this.lineCap=B.lineCap||"butt",this.path=B.path||[],this.transform=B.transform!==void 0?B.transform.clone():new h,this.globalCompositeOperation=B.globalCompositeOperation||"normal",this.globalAlpha=B.globalAlpha||1,this.clip_path=B.clip_path||[],this.currentPoint=B.currentPoint||new o,this.miterLimit=B.miterLimit||10,this.lastPoint=B.lastPoint||new o,this.lineDashOffset=B.lineDashOffset||0,this.lineDash=B.lineDash||[],this.margin=B.margin||[0,0,0,0],this.prevPageLastElemOffset=B.prevPageLastElemOffset||0,this.ignoreClearRect=typeof B.ignoreClearRect!="boolean"||B.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new y(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,u=this.internal.Rectangle,h=this.internal.Matrix,d=new v}]);var y=function(B){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var te=B;Object.defineProperty(this,"pdf",{get:function(){return te}});var se=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return se},set:function(pe){se=!!pe}});var ae=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ae},set:function(pe){ae=!!pe}});var we=0;Object.defineProperty(this,"posX",{get:function(){return we},set:function(pe){isNaN(pe)||(we=pe)}});var fe=0;Object.defineProperty(this,"posY",{get:function(){return fe},set:function(pe){isNaN(pe)||(fe=pe)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(pe){var de;typeof pe=="number"?de=[pe,pe,pe,pe]:((de=new Array(4))[0]=pe[0],de[1]=pe.length>=2?pe[1]:de[0],de[2]=pe.length>=3?pe[2]:de[0],de[3]=pe.length>=4?pe[3]:de[1]),d.margin=de}});var Q=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Q},set:function(pe){Q=pe}});var ue=0;Object.defineProperty(this,"lastBreak",{get:function(){return ue},set:function(pe){ue=pe}});var Re=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Re},set:function(pe){Re=pe}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(pe){pe instanceof v&&(d=pe)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(pe){d.path=pe}});var Me=[];Object.defineProperty(this,"ctxStack",{get:function(){return Me},set:function(pe){Me=pe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(pe){var de;de=x(pe),this.ctx.fillStyle=de.style,this.ctx.isFillTransparent=de.a===0,this.ctx.fillOpacity=de.a,this.pdf.setFillColor(de.r,de.g,de.b,{a:de.a}),this.pdf.setTextColor(de.r,de.g,de.b,{a:de.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(pe){var de=x(pe);this.ctx.strokeStyle=de.style,this.ctx.isStrokeTransparent=de.a===0,this.ctx.strokeOpacity=de.a,de.a===0?this.pdf.setDrawColor(255,255,255):(de.a,this.pdf.setDrawColor(de.r,de.g,de.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(pe){["butt","round","square"].indexOf(pe)!==-1&&(this.ctx.lineCap=pe,this.pdf.setLineCap(pe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(pe){isNaN(pe)||(this.ctx.lineWidth=pe,this.pdf.setLineWidth(pe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(pe){["bevel","round","miter"].indexOf(pe)!==-1&&(this.ctx.lineJoin=pe,this.pdf.setLineJoin(pe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(pe){isNaN(pe)||(this.ctx.miterLimit=pe,this.pdf.setMiterLimit(pe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(pe){this.ctx.textBaseline=pe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(pe){["right","end","center","left","start"].indexOf(pe)!==-1&&(this.ctx.textAlign=pe)}});var Ze=null;function oe(pe,de){if(Ze===null){var ze=function(Ke){var Ge=[];return Object.keys(Ke).forEach(function(Qe){Ke[Qe].forEach(function(Ve){var ot=null;switch(Ve){case"bold":ot={family:Qe,weight:"bold"};break;case"italic":ot={family:Qe,style:"italic"};break;case"bolditalic":ot={family:Qe,weight:"bold",style:"italic"};break;case"":case"normal":ot={family:Qe}}ot!==null&&(ot.ref={name:Qe,style:Ve},Ge.push(ot))})}),Ge}(pe.getFontList());Ze=function(Ke){for(var Ge={},Qe=0;Qe<Ke.length;++Qe){var Ve=E1(Ke[Qe]),ot=Ve.family,At=Ve.stretch,Et=Ve.style,zt=Ve.weight;Ge[ot]=Ge[ot]||{},Ge[ot][At]=Ge[ot][At]||{},Ge[ot][At][Et]=Ge[ot][At][Et]||{},Ge[ot][At][Et][zt]=Ve}return Ge}(ze.concat(de))}return Ze}var me=null;Object.defineProperty(this,"fontFaces",{get:function(){return me},set:function(pe){Ze=null,me=pe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(pe){var de;if(this.ctx.font=pe,(de=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(pe))!==null){var ze=de[1],Ke=(de[2],de[3]),Ge=de[4],Qe=(de[5],de[6]),Ve=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ge)[2];Ge=Math.floor(Ve==="px"?parseFloat(Ge)*this.pdf.internal.scaleFactor:Ve==="em"?parseFloat(Ge)*this.pdf.getFontSize():parseFloat(Ge)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ge);var ot=function(et){var st,rt,Vt=[],Xt=et.trim();if(Xt==="")return fv;if(Xt in Mb)return[Mb[Xt]];for(;Xt!=="";){switch(rt=null,st=(Xt=Tb(Xt)).charAt(0)){case'"':case"'":rt=nR(Xt.substring(1),st);break;default:rt=rR(Xt)}if(rt===null||(Vt.push(rt[0]),(Xt=Tb(rt[1]))!==""&&Xt.charAt(0)!==","))return fv;Xt=Xt.replace(/^,/,"")}return Vt}(Qe);if(this.fontFaces){var At=tR(oe(this.pdf,this.fontFaces),ot.map(function(et){return{family:et,stretch:"normal",weight:Ke,style:ze}}));this.pdf.setFont(At.ref.name,At.ref.style)}else{var Et="";(Ke==="bold"||parseInt(Ke,10)>=700||ze==="bold")&&(Et="bold"),ze==="italic"&&(Et+="italic"),Et.length===0&&(Et="normal");for(var zt="",Kt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},dn=0;dn<ot.length;dn++){if(this.pdf.internal.getFont(ot[dn],Et,{noFallback:!0,disableWarning:!0})!==void 0){zt=ot[dn];break}if(Et==="bolditalic"&&this.pdf.internal.getFont(ot[dn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)zt=ot[dn],Et="bold";else if(this.pdf.internal.getFont(ot[dn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){zt=ot[dn],Et="normal";break}}if(zt===""){for(var mn=0;mn<ot.length;mn++)if(Kt[ot[mn]]){zt=Kt[ot[mn]];break}}zt=zt===""?"Times":zt,this.pdf.setFont(zt,Et)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(pe){this.ctx.globalCompositeOperation=pe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(pe){this.ctx.globalAlpha=pe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(pe){this.ctx.lineDashOffset=pe,Xe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(pe){this.ctx.lineDash=pe,Xe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(pe){this.ctx.ignoreClearRect=!!pe}})};y.prototype.setLineDash=function(B){this.lineDash=B},y.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},y.prototype.fill=function(){J.call(this,"fill",!1)},y.prototype.stroke=function(){J.call(this,"stroke",!1)},y.prototype.beginPath=function(){this.path=[{type:"begin"}]},y.prototype.moveTo=function(B,te){if(isNaN(B)||isNaN(te))throw Ki.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var se=this.ctx.transform.applyToPoint(new o(B,te));this.path.push({type:"mt",x:se.x,y:se.y}),this.ctx.lastPoint=new o(B,te)},y.prototype.closePath=function(){var B=new o(0,0),te=0;for(te=this.path.length-1;te!==-1;te--)if(this.path[te].type==="begin"&&Oi(this.path[te+1])==="object"&&typeof this.path[te+1].x=="number"){B=new o(this.path[te+1].x,this.path[te+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(B.x,B.y)},y.prototype.lineTo=function(B,te){if(isNaN(B)||isNaN(te))throw Ki.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var se=this.ctx.transform.applyToPoint(new o(B,te));this.path.push({type:"lt",x:se.x,y:se.y}),this.ctx.lastPoint=new o(se.x,se.y)},y.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),J.call(this,null,!0)},y.prototype.quadraticCurveTo=function(B,te,se,ae){if(isNaN(se)||isNaN(ae)||isNaN(B)||isNaN(te))throw Ki.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var we=this.ctx.transform.applyToPoint(new o(se,ae)),fe=this.ctx.transform.applyToPoint(new o(B,te));this.path.push({type:"qct",x1:fe.x,y1:fe.y,x:we.x,y:we.y}),this.ctx.lastPoint=new o(we.x,we.y)},y.prototype.bezierCurveTo=function(B,te,se,ae,we,fe){if(isNaN(we)||isNaN(fe)||isNaN(B)||isNaN(te)||isNaN(se)||isNaN(ae))throw Ki.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Q=this.ctx.transform.applyToPoint(new o(we,fe)),ue=this.ctx.transform.applyToPoint(new o(B,te)),Re=this.ctx.transform.applyToPoint(new o(se,ae));this.path.push({type:"bct",x1:ue.x,y1:ue.y,x2:Re.x,y2:Re.y,x:Q.x,y:Q.y}),this.ctx.lastPoint=new o(Q.x,Q.y)},y.prototype.arc=function(B,te,se,ae,we,fe){if(isNaN(B)||isNaN(te)||isNaN(se)||isNaN(ae)||isNaN(we))throw Ki.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(fe=!!fe,!this.ctx.transform.isIdentity){var Q=this.ctx.transform.applyToPoint(new o(B,te));B=Q.x,te=Q.y;var ue=this.ctx.transform.applyToPoint(new o(0,se)),Re=this.ctx.transform.applyToPoint(new o(0,0));se=Math.sqrt(Math.pow(ue.x-Re.x,2)+Math.pow(ue.y-Re.y,2))}Math.abs(we-ae)>=2*Math.PI&&(ae=0,we=2*Math.PI),this.path.push({type:"arc",x:B,y:te,radius:se,startAngle:ae,endAngle:we,counterclockwise:fe})},y.prototype.arcTo=function(B,te,se,ae,we){throw new Error("arcTo not implemented.")},y.prototype.rect=function(B,te,se,ae){if(isNaN(B)||isNaN(te)||isNaN(se)||isNaN(ae))throw Ki.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(B,te),this.lineTo(B+se,te),this.lineTo(B+se,te+ae),this.lineTo(B,te+ae),this.lineTo(B,te),this.lineTo(B+se,te),this.lineTo(B,te)},y.prototype.fillRect=function(B,te,se,ae){if(isNaN(B)||isNaN(te)||isNaN(se)||isNaN(ae))throw Ki.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!_.call(this)){var we={};this.lineCap!=="butt"&&(we.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(we.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(B,te,se,ae),this.fill(),we.hasOwnProperty("lineCap")&&(this.lineCap=we.lineCap),we.hasOwnProperty("lineJoin")&&(this.lineJoin=we.lineJoin)}},y.prototype.strokeRect=function(B,te,se,ae){if(isNaN(B)||isNaN(te)||isNaN(se)||isNaN(ae))throw Ki.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");P.call(this)||(this.beginPath(),this.rect(B,te,se,ae),this.stroke())},y.prototype.clearRect=function(B,te,se,ae){if(isNaN(B)||isNaN(te)||isNaN(se)||isNaN(ae))throw Ki.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(B,te,se,ae))},y.prototype.save=function(B){B=typeof B!="boolean"||B;for(var te=this.pdf.internal.getCurrentPageInfo().pageNumber,se=0;se<this.pdf.internal.getNumberOfPages();se++)this.pdf.setPage(se+1),this.pdf.internal.out("q");if(this.pdf.setPage(te),B){this.ctx.fontSize=this.pdf.internal.getFontSize();var ae=new v(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ae}},y.prototype.restore=function(B){B=typeof B!="boolean"||B;for(var te=this.pdf.internal.getCurrentPageInfo().pageNumber,se=0;se<this.pdf.internal.getNumberOfPages();se++)this.pdf.setPage(se+1),this.pdf.internal.out("Q");this.pdf.setPage(te),B&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},y.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var x=function(B){var te,se,ae,we;if(B.isCanvasGradient===!0&&(B=B.getColor()),!B)return{r:0,g:0,b:0,a:0,style:B};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(B))te=0,se=0,ae=0,we=0;else{var fe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(B);if(fe!==null)te=parseInt(fe[1]),se=parseInt(fe[2]),ae=parseInt(fe[3]),we=1;else if((fe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(B))!==null)te=parseInt(fe[1]),se=parseInt(fe[2]),ae=parseInt(fe[3]),we=parseFloat(fe[4]);else{if(we=1,typeof B=="string"&&B.charAt(0)!=="#"){var Q=new L3(B);B=Q.ok?Q.toHex():"#000000"}B.length===4?(te=B.substring(1,2),te+=te,se=B.substring(2,3),se+=se,ae=B.substring(3,4),ae+=ae):(te=B.substring(1,3),se=B.substring(3,5),ae=B.substring(5,7)),te=parseInt(te,16),se=parseInt(se,16),ae=parseInt(ae,16)}}return{r:te,g:se,b:ae,a:we,style:B}},_=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},P=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};y.prototype.fillText=function(B,te,se,ae){if(isNaN(te)||isNaN(se)||typeof B!="string")throw Ki.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ae=isNaN(ae)?void 0:ae,!_.call(this)){var we=q(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;D.call(this,{text:B,x:te,y:se,scale:fe,angle:we,align:this.textAlign,maxWidth:ae})}},y.prototype.strokeText=function(B,te,se,ae){if(isNaN(te)||isNaN(se)||typeof B!="string")throw Ki.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!P.call(this)){ae=isNaN(ae)?void 0:ae;var we=q(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;D.call(this,{text:B,x:te,y:se,scale:fe,renderingMode:"stroke",angle:we,align:this.textAlign,maxWidth:ae})}},y.prototype.measureText=function(B){if(typeof B!="string")throw Ki.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var te=this.pdf,se=this.pdf.internal.scaleFactor,ae=te.internal.getFontSize(),we=te.getStringUnitWidth(B)*ae/te.internal.scaleFactor,fe=function(Q){var ue=(Q=Q||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ue}}),this};return new fe({width:we*=Math.round(96*se/72*1e4)/1e4})},y.prototype.scale=function(B,te){if(isNaN(B)||isNaN(te))throw Ki.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var se=new h(B,0,0,te,0,0);this.ctx.transform=this.ctx.transform.multiply(se)},y.prototype.rotate=function(B){if(isNaN(B))throw Ki.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var te=new h(Math.cos(B),Math.sin(B),-Math.sin(B),Math.cos(B),0,0);this.ctx.transform=this.ctx.transform.multiply(te)},y.prototype.translate=function(B,te){if(isNaN(B)||isNaN(te))throw Ki.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var se=new h(1,0,0,1,B,te);this.ctx.transform=this.ctx.transform.multiply(se)},y.prototype.transform=function(B,te,se,ae,we,fe){if(isNaN(B)||isNaN(te)||isNaN(se)||isNaN(ae)||isNaN(we)||isNaN(fe))throw Ki.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Q=new h(B,te,se,ae,we,fe);this.ctx.transform=this.ctx.transform.multiply(Q)},y.prototype.setTransform=function(B,te,se,ae,we,fe){B=isNaN(B)?1:B,te=isNaN(te)?0:te,se=isNaN(se)?0:se,ae=isNaN(ae)?1:ae,we=isNaN(we)?0:we,fe=isNaN(fe)?0:fe,this.ctx.transform=new h(B,te,se,ae,we,fe)};var T=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};y.prototype.drawImage=function(B,te,se,ae,we,fe,Q,ue,Re){var Me=this.pdf.getImageProperties(B),Ze=1,oe=1,me=1,pe=1;ae!==void 0&&ue!==void 0&&(me=ue/ae,pe=Re/we,Ze=Me.width/ae*ue/ae,oe=Me.height/we*Re/we),fe===void 0&&(fe=te,Q=se,te=0,se=0),ae!==void 0&&ue===void 0&&(ue=ae,Re=we),ae===void 0&&ue===void 0&&(ue=Me.width,Re=Me.height);for(var de,ze=this.ctx.transform.decompose(),Ke=q(ze.rotate.shx),Ge=new h,Qe=(Ge=(Ge=(Ge=Ge.multiply(ze.translate)).multiply(ze.skew)).multiply(ze.scale)).applyToRectangle(new u(fe-te*me,Q-se*pe,ae*Ze,we*oe)),Ve=U.call(this,Qe),ot=[],At=0;At<Ve.length;At+=1)ot.indexOf(Ve[At])===-1&&ot.push(Ve[At]);if(Z(ot),this.autoPaging)for(var Et=ot[0],zt=ot[ot.length-1],Kt=Et;Kt<zt+1;Kt++){this.pdf.setPage(Kt);var dn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],mn=Kt===1?this.posY+this.margin[0]:this.margin[0],et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],st=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],rt=Kt===1?0:et+(Kt-2)*st;if(this.ctx.clip_path.length!==0){var Vt=this.path;de=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(de,this.posX+this.margin[3],-rt+mn+this.ctx.prevPageLastElemOffset),le.call(this,"fill",!0),this.path=Vt}var Xt=JSON.parse(JSON.stringify(Qe));Xt=j([Xt],this.posX+this.margin[3],-rt+mn+this.ctx.prevPageLastElemOffset)[0];var ft=(Kt>Et||Kt<zt)&&T.call(this);ft&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],dn,st,null).clip().discardPath()),this.pdf.addImage(B,"JPEG",Xt.x,Xt.y,Xt.w,Xt.h,null,null,Ke),ft&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(B,"JPEG",Qe.x,Qe.y,Qe.w,Qe.h,null,null,Ke)};var U=function(B,te,se){var ae=[];te=te||this.pdf.internal.pageSize.width,se=se||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var we=this.posY+this.ctx.prevPageLastElemOffset;switch(B.type){default:case"mt":case"lt":ae.push(Math.floor((B.y+we)/se)+1);break;case"arc":ae.push(Math.floor((B.y+we-B.radius)/se)+1),ae.push(Math.floor((B.y+we+B.radius)/se)+1);break;case"qct":var fe=ve(this.ctx.lastPoint.x,this.ctx.lastPoint.y,B.x1,B.y1,B.x,B.y);ae.push(Math.floor((fe.y+we)/se)+1),ae.push(Math.floor((fe.y+fe.h+we)/se)+1);break;case"bct":var Q=Ce(this.ctx.lastPoint.x,this.ctx.lastPoint.y,B.x1,B.y1,B.x2,B.y2,B.x,B.y);ae.push(Math.floor((Q.y+we)/se)+1),ae.push(Math.floor((Q.y+Q.h+we)/se)+1);break;case"rect":ae.push(Math.floor((B.y+we)/se)+1),ae.push(Math.floor((B.y+B.h+we)/se)+1)}for(var ue=0;ue<ae.length;ue+=1)for(;this.pdf.internal.getNumberOfPages()<ae[ue];)N.call(this);return ae},N=function(){var B=this.fillStyle,te=this.strokeStyle,se=this.font,ae=this.lineCap,we=this.lineWidth,fe=this.lineJoin;this.pdf.addPage(),this.fillStyle=B,this.strokeStyle=te,this.font=se,this.lineCap=ae,this.lineWidth=we,this.lineJoin=fe},j=function(B,te,se){for(var ae=0;ae<B.length;ae++)switch(B[ae].type){case"bct":B[ae].x2+=te,B[ae].y2+=se;case"qct":B[ae].x1+=te,B[ae].y1+=se;case"mt":case"lt":case"arc":default:B[ae].x+=te,B[ae].y+=se}return B},Z=function(B){return B.sort(function(te,se){return te-se})},J=function(B,te){for(var se,ae,we=this.fillStyle,fe=this.strokeStyle,Q=this.lineCap,ue=this.lineWidth,Re=Math.abs(ue*this.ctx.transform.scaleX),Me=this.lineJoin,Ze=JSON.parse(JSON.stringify(this.path)),oe=JSON.parse(JSON.stringify(this.path)),me=[],pe=0;pe<oe.length;pe++)if(oe[pe].x!==void 0)for(var de=U.call(this,oe[pe]),ze=0;ze<de.length;ze+=1)me.indexOf(de[ze])===-1&&me.push(de[ze]);for(var Ke=0;Ke<me.length;Ke++)for(;this.pdf.internal.getNumberOfPages()<me[Ke];)N.call(this);if(Z(me),this.autoPaging)for(var Ge=me[0],Qe=me[me.length-1],Ve=Ge;Ve<Qe+1;Ve++){this.pdf.setPage(Ve),this.fillStyle=we,this.strokeStyle=fe,this.lineCap=Q,this.lineWidth=Re,this.lineJoin=Me;var ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],At=Ve===1?this.posY+this.margin[0]:this.margin[0],Et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],zt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Kt=Ve===1?0:Et+(Ve-2)*zt;if(this.ctx.clip_path.length!==0){var dn=this.path;se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(se,this.posX+this.margin[3],-Kt+At+this.ctx.prevPageLastElemOffset),le.call(this,B,!0),this.path=dn}if(ae=JSON.parse(JSON.stringify(Ze)),this.path=j(ae,this.posX+this.margin[3],-Kt+At+this.ctx.prevPageLastElemOffset),te===!1||Ve===0){var mn=(Ve>Ge||Ve<Qe)&&T.call(this);mn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ot,zt,null).clip().discardPath()),le.call(this,B,te),mn&&this.pdf.restoreGraphicsState()}this.lineWidth=ue}else this.lineWidth=Re,le.call(this,B,te),this.lineWidth=ue;this.path=Ze},le=function(B,te){if((B!=="stroke"||te||!P.call(this))&&(B==="stroke"||te||!_.call(this))){for(var se,ae,we=[],fe=this.path,Q=0;Q<fe.length;Q++){var ue=fe[Q];switch(ue.type){case"begin":we.push({begin:!0});break;case"close":we.push({close:!0});break;case"mt":we.push({start:ue,deltas:[],abs:[]});break;case"lt":var Re=we.length;if(fe[Q-1]&&!isNaN(fe[Q-1].x)&&(se=[ue.x-fe[Q-1].x,ue.y-fe[Q-1].y],Re>0)){for(;Re>=0;Re--)if(we[Re-1].close!==!0&&we[Re-1].begin!==!0){we[Re-1].deltas.push(se),we[Re-1].abs.push(ue);break}}break;case"bct":se=[ue.x1-fe[Q-1].x,ue.y1-fe[Q-1].y,ue.x2-fe[Q-1].x,ue.y2-fe[Q-1].y,ue.x-fe[Q-1].x,ue.y-fe[Q-1].y],we[we.length-1].deltas.push(se);break;case"qct":var Me=fe[Q-1].x+2/3*(ue.x1-fe[Q-1].x),Ze=fe[Q-1].y+2/3*(ue.y1-fe[Q-1].y),oe=ue.x+2/3*(ue.x1-ue.x),me=ue.y+2/3*(ue.y1-ue.y),pe=ue.x,de=ue.y;se=[Me-fe[Q-1].x,Ze-fe[Q-1].y,oe-fe[Q-1].x,me-fe[Q-1].y,pe-fe[Q-1].x,de-fe[Q-1].y],we[we.length-1].deltas.push(se);break;case"arc":we.push({deltas:[],abs:[],arc:!0}),Array.isArray(we[we.length-1].abs)&&we[we.length-1].abs.push(ue)}}ae=te?null:B==="stroke"?"stroke":"fill";for(var ze=!1,Ke=0;Ke<we.length;Ke++)if(we[Ke].arc)for(var Ge=we[Ke].abs,Qe=0;Qe<Ge.length;Qe++){var Ve=Ge[Qe];Ve.type==="arc"?V.call(this,Ve.x,Ve.y,Ve.radius,Ve.startAngle,Ve.endAngle,Ve.counterclockwise,void 0,te,!ze):k.call(this,Ve.x,Ve.y),ze=!0}else if(we[Ke].close===!0)this.pdf.internal.out("h"),ze=!1;else if(we[Ke].begin!==!0){var ot=we[Ke].start.x,At=we[Ke].start.y;I.call(this,we[Ke].deltas,ot,At),ze=!0}ae&&F.call(this,ae),te&&Y.call(this)}},he=function(B){var te=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,se=te*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return B-se;case"top":return B+te-se;case"hanging":return B+te-2*se;case"middle":return B+te/2-se;case"ideographic":return B;case"alphabetic":default:return B}},Le=function(B){return B+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};y.prototype.createLinearGradient=function(){var B=function(){};return B.colorStops=[],B.addColorStop=function(te,se){this.colorStops.push([te,se])},B.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},B.isCanvasGradient=!0,B},y.prototype.createPattern=function(){return this.createLinearGradient()},y.prototype.createRadialGradient=function(){return this.createLinearGradient()};var V=function(B,te,se,ae,we,fe,Q,ue,Re){for(var Me=G.call(this,se,ae,we,fe),Ze=0;Ze<Me.length;Ze++){var oe=Me[Ze];Ze===0&&(Re?$.call(this,oe.x1+B,oe.y1+te):k.call(this,oe.x1+B,oe.y1+te)),W.call(this,B,te,oe.x2,oe.y2,oe.x3,oe.y3,oe.x4,oe.y4)}ue?Y.call(this):F.call(this,Q)},F=function(B){switch(B){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Y=function(){this.pdf.clip(),this.pdf.discardPath()},$=function(B,te){this.pdf.internal.out(n(B)+" "+r(te)+" m")},D=function(B){var te;switch(B.align){case"right":case"end":te="right";break;case"center":te="center";break;case"left":case"start":default:te="left"}var se=this.pdf.getTextDimensions(B.text),ae=he.call(this,B.y),we=Le.call(this,ae)-se.h,fe=this.ctx.transform.applyToPoint(new o(B.x,ae)),Q=this.ctx.transform.decompose(),ue=new h;ue=(ue=(ue=ue.multiply(Q.translate)).multiply(Q.skew)).multiply(Q.scale);for(var Re,Me,Ze,oe=this.ctx.transform.applyToRectangle(new u(B.x,ae,se.w,se.h)),me=ue.applyToRectangle(new u(B.x,we,se.w,se.h)),pe=U.call(this,me),de=[],ze=0;ze<pe.length;ze+=1)de.indexOf(pe[ze])===-1&&de.push(pe[ze]);if(Z(de),this.autoPaging)for(var Ke=de[0],Ge=de[de.length-1],Qe=Ke;Qe<Ge+1;Qe++){this.pdf.setPage(Qe);var Ve=Qe===1?this.posY+this.margin[0]:this.margin[0],ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],At=this.pdf.internal.pageSize.height-this.margin[2],Et=At-this.margin[0],zt=this.pdf.internal.pageSize.width-this.margin[1],Kt=zt-this.margin[3],dn=Qe===1?0:ot+(Qe-2)*Et;if(this.ctx.clip_path.length!==0){var mn=this.path;Re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(Re,this.posX+this.margin[3],-1*dn+Ve),le.call(this,"fill",!0),this.path=mn}var et=j([JSON.parse(JSON.stringify(me))],this.posX+this.margin[3],-dn+Ve+this.ctx.prevPageLastElemOffset)[0];B.scale>=.01&&(Me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Me*B.scale),Ze=this.lineWidth,this.lineWidth=Ze*B.scale);var st=this.autoPaging!=="text";if(st||et.y+et.h<=At){if(st||et.y>=Ve&&et.x<=zt){var rt=st?B.text:this.pdf.splitTextToSize(B.text,B.maxWidth||zt-et.x)[0],Vt=j([JSON.parse(JSON.stringify(oe))],this.posX+this.margin[3],-dn+Ve+this.ctx.prevPageLastElemOffset)[0],Xt=st&&(Qe>Ke||Qe<Ge)&&T.call(this);Xt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Kt,Et,null).clip().discardPath()),this.pdf.text(rt,Vt.x,Vt.y,{angle:B.angle,align:te,renderingMode:B.renderingMode}),Xt&&this.pdf.restoreGraphicsState()}}else et.y<At&&(this.ctx.prevPageLastElemOffset+=At-et.y);B.scale>=.01&&(this.pdf.setFontSize(Me),this.lineWidth=Ze)}else B.scale>=.01&&(Me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Me*B.scale),Ze=this.lineWidth,this.lineWidth=Ze*B.scale),this.pdf.text(B.text,fe.x+this.posX,fe.y+this.posY,{angle:B.angle,align:te,renderingMode:B.renderingMode,maxWidth:B.maxWidth}),B.scale>=.01&&(this.pdf.setFontSize(Me),this.lineWidth=Ze)},k=function(B,te,se,ae){se=se||0,ae=ae||0,this.pdf.internal.out(n(B+se)+" "+r(te+ae)+" l")},I=function(B,te,se){return this.pdf.lines(B,te,se,null,null)},W=function(B,te,se,ae,we,fe,Q,ue){this.pdf.internal.out([t(i(se+B)),t(s(ae+te)),t(i(we+B)),t(s(fe+te)),t(i(Q+B)),t(s(ue+te)),"c"].join(" "))},G=function(B,te,se,ae){for(var we=2*Math.PI,fe=Math.PI/2;te>se;)te-=we;var Q=Math.abs(se-te);Q<we&&ae&&(Q=we-Q);for(var ue=[],Re=ae?-1:1,Me=te;Q>1e-5;){var Ze=Me+Re*Math.min(Q,fe);ue.push(K.call(this,B,Me,Ze)),Q-=Math.abs(Ze-Me),Me=Ze}return ue},K=function(B,te,se){var ae=(se-te)/2,we=B*Math.cos(ae),fe=B*Math.sin(ae),Q=we,ue=-fe,Re=Q*Q+ue*ue,Me=Re+Q*we+ue*fe,Ze=4/3*(Math.sqrt(2*Re*Me)-Me)/(Q*fe-ue*we),oe=Q-Ze*ue,me=ue+Ze*Q,pe=oe,de=-me,ze=ae+te,Ke=Math.cos(ze),Ge=Math.sin(ze);return{x1:B*Math.cos(te),y1:B*Math.sin(te),x2:oe*Ke-me*Ge,y2:oe*Ge+me*Ke,x3:pe*Ke-de*Ge,y3:pe*Ge+de*Ke,x4:B*Math.cos(se),y4:B*Math.sin(se)}},q=function(B){return 180*B/Math.PI},ve=function(B,te,se,ae,we,fe){var Q=B+.5*(se-B),ue=te+.5*(ae-te),Re=we+.5*(se-we),Me=fe+.5*(ae-fe),Ze=Math.min(B,we,Q,Re),oe=Math.max(B,we,Q,Re),me=Math.min(te,fe,ue,Me),pe=Math.max(te,fe,ue,Me);return new u(Ze,me,oe-Ze,pe-me)},Ce=function(B,te,se,ae,we,fe,Q,ue){var Re,Me,Ze,oe,me,pe,de,ze,Ke,Ge,Qe,Ve,ot,At,Et=se-B,zt=ae-te,Kt=we-se,dn=fe-ae,mn=Q-we,et=ue-fe;for(Me=0;Me<41;Me++)Ke=(de=(Ze=B+(Re=Me/40)*Et)+Re*((me=se+Re*Kt)-Ze))+Re*(me+Re*(we+Re*mn-me)-de),Ge=(ze=(oe=te+Re*zt)+Re*((pe=ae+Re*dn)-oe))+Re*(pe+Re*(fe+Re*et-pe)-ze),Me==0?(Qe=Ke,Ve=Ge,ot=Ke,At=Ge):(Qe=Math.min(Qe,Ke),Ve=Math.min(Ve,Ge),ot=Math.max(ot,Ke),At=Math.max(At,Ge));return new u(Math.round(Qe),Math.round(Ve),Math.round(ot-Qe),Math.round(At-Ve))},Xe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var B,te,se=(B=this.ctx.lineDash,te=this.ctx.lineDashOffset,JSON.stringify({lineDash:B,lineDashOffset:te}));this.prevLineDash!==se&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=se)}}})(mr.API),function(e){var t=function(s){var o,u,h,d,v,y,x,_,P,T;for(u=[],h=0,d=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;d>h;h+=4)(v=(s.charCodeAt(h)<<24)+(s.charCodeAt(h+1)<<16)+(s.charCodeAt(h+2)<<8)+s.charCodeAt(h+3))!==0?(y=(v=((v=((v=((v=(v-(T=v%85))/85)-(P=v%85))/85)-(_=v%85))/85)-(x=v%85))/85)%85,u.push(y+33,x+33,_+33,P+33,T+33)):u.push(122);return function(U,N){for(var j=N;j>0;j--)U.pop()}(u,o.length),String.fromCharCode.apply(String,u)+"~>"},n=function(s){var o,u,h,d,v,y=String,x="length",_=255,P="charCodeAt",T="slice",U="replace";for(s[T](-2),s=s[T](0,-2)[U](/\s/g,"")[U]("z","!!!!!"),h=[],d=0,v=(s+=o="uuuuu"[T](s[x]%5||5))[x];v>d;d+=5)u=52200625*(s[P](d)-33)+614125*(s[P](d+1)-33)+7225*(s[P](d+2)-33)+85*(s[P](d+3)-33)+(s[P](d+4)-33),h.push(_&u>>24,_&u>>16,_&u>>8,_&u);return function(N,j){for(var Z=j;Z>0;Z--)N.pop()}(h,o[x]),y.fromCharCode.apply(y,h)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var u="",h=0;h<s.length;h+=2)u+=String.fromCharCode("0x"+(s[h]+s[h+1]));return u},i=function(s){for(var o=new Uint8Array(s.length),u=s.length;u--;)o[u]=s.charCodeAt(u);return s=(o=_1(o)).reduce(function(h,d){return h+String.fromCharCode(d)},"")};e.processDataByFilters=function(s,o){var u=0,h=s||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),u=0;u<o.length;u+=1)switch(o[u]){case"ASCII85Decode":case"/ASCII85Decode":h=n(h),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":h=t(h),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":h=r(h),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":h=h.split("").map(function(v){return("0"+v.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":h=i(h),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[u]+'" is not implemented')}return{data:h,reverseChain:d.reverse().join(" ")}}}(mr.API),function(e){e.loadFile=function(t,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var u=void 0;try{u=function(h,d,v){var y=new XMLHttpRequest,x=0,_=function(P){var T=P.length,U=[],N=String.fromCharCode;for(x=0;x<T;x+=1)U.push(N(255&P.charCodeAt(x)));return U.join("")};if(y.open("GET",h,!d),y.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(y.onload=function(){y.status===200?v(_(this.responseText)):v(void 0)}),y.send(null),d&&y.status===200)return _(y.responseText)}(i,s,o)}catch{}return u}(t,n,r)},e.loadImageFile=e.loadFile}(mr.API),function(e){function t(){return(br.html2canvas?Promise.resolve(br.html2canvas):Vh(()=>import("./html2canvas.esm.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(br.DOMPurify?Promise.resolve(br.DOMPurify):Vh(()=>import("./purify.es.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var u=Oi(o);return u==="undefined"?"undefined":u==="string"||o instanceof String?"string":u==="number"||o instanceof Number?"number":u==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":u==="object"?"object":"unknown"},i=function(o,u){var h=document.createElement(o);for(var d in u.className&&(h.className=u.className),u.innerHTML&&u.dompurify&&(h.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)h.style[d]=u.style[d];return h},s=function o(u){var h=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),h);return d=(d=d.setProgress(1,o,1,[o])).set(u)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,u){return o.__proto__=u||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,u){return this.then(function(){switch(u=u||function(h){switch(r(h)){case"string":return"string";case"element":return h.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(h){return this.set({src:i("div",{innerHTML:o,dompurify:h})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=function h(d,v){for(var y=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),x=d.firstChild;x;x=x.nextSibling)v!==!0&&x.nodeType===1&&x.nodeName==="SCRIPT"||y.appendChild(h(x,v));return d.nodeType===1&&(d.nodeName==="CANVAS"?(y.width=d.width,y.height=d.height,y.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(y.value=d.value),y.addEventListener("load",function(){y.scrollTop=d.scrollTop,y.scrollLeft=d.scrollLeft},!0)),y}(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(u){var h=Object.assign({},this.opt.html2canvas);return delete h.onrendered,u(this.prop.container,h)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(u){var h=this.opt.jsPDF,d=this.opt.fontFaces,v=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,y=Object.assign({async:!0,allowTaint:!0,scale:v,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete y.onrendered,h.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,h.context2d.posX=this.opt.x,h.context2d.posY=this.opt.y,h.context2d.margin=this.opt.margin,h.context2d.fontFaces=d,d)for(var x=0;x<d.length;++x){var _=d[x],P=_.src.find(function(T){return T.format==="truetype"});P&&h.addFont(P.url,_.ref.name,_.ref.style)}return y.windowHeight=y.windowHeight||0,y.windowHeight=y.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):y.windowHeight,h.context2d.save(!0),u(this.prop.container,y)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,u,h){return(h=h||"pdf").toLowerCase()==="img"||h.toLowerCase()==="image"?this.outputImg(o,u):this.outputPdf(o,u)},s.prototype.outputPdf=function(o,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,u)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var u=Object.keys(o||{}).map(function(h){if(h in s.template.prop)return function(){this.prop[h]=o[h]};switch(h){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[h]=o[h]}}},this);return this.then(function(){return this.thenList(u)})},s.prototype.get=function(o,u){return this.then(function(){var h=o in s.template.prop?this.prop[o]:this.opt[o];return u?u(h):h})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function u(h,d){return Math.floor(h*d/72*96)}return this.then(function(){(o=o||mr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:u(o.inner.width,o.k),height:u(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,u,h,d){return o!=null&&(this.progress.val=o),u!=null&&(this.progress.state=u),h!=null&&(this.progress.n=h),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,u,h,d){return this.setProgress(o?this.progress.val+o:null,u||null,h?this.progress.n+h:null,d?this.progress.stack.concat(d):null)},s.prototype.then=function(o,u){var h=this;return this.thenCore(o,u,function(d,v){return h.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(y){return h.updateProgress(null,d),y}).then(d,v).then(function(y){return h.updateProgress(1),y})})},s.prototype.thenCore=function(o,u,h){h=h||Promise.prototype.then,o&&(o=o.bind(this)),u&&(u=u.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),v=h.call(d,o,u);return s.convert(v,this.__proto__)},s.prototype.thenExternal=function(o,u){return Promise.prototype.then.call(this,o,u)},s.prototype.thenList=function(o){var u=this;return o.forEach(function(h){u=u.thenCore(h)}),u},s.prototype.catch=function(o){o&&(o=o.bind(this));var u=Promise.prototype.catch.call(this,o);return s.convert(u,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,mr.getPageSize=function(o,u,h){if(Oi(o)==="object"){var d=o;o=d.orientation,u=d.unit||u,h=d.format||h}u=u||"mm",h=h||"a4",o=(""+(o||"P")).toLowerCase();var v,y=(""+h).toLowerCase(),x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":v=1;break;case"mm":v=72/25.4;break;case"cm":v=72/2.54;break;case"in":v=72;break;case"px":v=.75;break;case"pc":case"em":v=12;break;case"ex":v=6;break;default:throw"Invalid unit: "+u}var _,P=0,T=0;if(x.hasOwnProperty(y))P=x[y][1]/v,T=x[y][0]/v;else try{P=h[1],T=h[0]}catch{throw new Error("Invalid format: "+h)}if(o==="p"||o==="portrait")o="p",T>P&&(_=T,T=P,P=_);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",P>T&&(_=T,T=P,P=_)}return{width:T,height:P,unit:u,k:v,orientation:o}},e.html=function(o,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(E1):null;var h=new s(u);return u.worker?h:h.from(o).doCallback()}}(mr.API),mr.API.addJS=function(e){return Ob=e,this.internal.events.subscribe("postPutResources",function(){y0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(y0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Bb=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ob+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){y0!==void 0&&Bb!==void 0&&this.internal.out("/Names <</JavaScript "+y0+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],u=r.exec(o);if(u!=null){var h=u[1];n.internal.newObjectDeferredBegin(h,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,v=[];for(s=0;s<d;s++){var y=n.internal.newObject();v.push(y);var x=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+x.objId+" 0 R /XYZ null null null]>> endobj")}var _=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<v.length;s++)n.internal.write("(page_"+(s+1)+")"+v[s]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+_+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var u=this.count=this.count_r({count:0},o);if(u>0&&this.line("/Count "+u),o.options&&o.options.pageNumber){var h=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var d=0;d<r.children.length;d++)this.renderItems(r.children[d])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(mr.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,r,i,s,o,u){var h,d=this.decode.DCT_DECODE,v=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(h=function(y){for(var x,_=256*y.charCodeAt(4)+y.charCodeAt(5),P=y.length,T={width:0,height:0,numcomponents:1},U=4;U<P;U+=2){if(U+=_,t.indexOf(y.charCodeAt(U+1))!==-1){x=256*y.charCodeAt(U+5)+y.charCodeAt(U+6),T={width:256*y.charCodeAt(U+7)+y.charCodeAt(U+8),height:x,numcomponents:y.charCodeAt(U+9)};break}_=256*y.charCodeAt(U+2)+y.charCodeAt(U+3)}return T}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}v={data:n,width:h.width,height:h.height,colorSpace:u,bitsPerComponent:8,filter:d,index:r,alias:i}}return v}}(mr.API);var Af,_0,Nb,Db,Ib,iR=function(){var e,t,n;function r(s){var o,u,h,d,v,y,x,_,P,T,U,N,j,Z;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},y=null;;){switch(o=this.readUInt32(),P=(function(){var J,le;for(le=[],J=0;J<4;++J)le.push(String.fromCharCode(this.data[this.pos++]));return le}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":y&&this.animation.frames.push(y),this.pos+=4,y={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},v=this.readUInt16(),d=this.readUInt16()||100,y.delay=1e3*v/d,y.disposeOp=this.data[this.pos++],y.blendOp=this.data[this.pos++],y.data=[];break;case"IDAT":case"fdAT":for(P==="fdAT"&&(this.pos+=4,o-=4),s=(y!=null?y.data:void 0)||this.imgData,N=0;0<=o?N<o:N>o;0<=o?++N:--N)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(h=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>h)throw new Error("More transparent colors than palette size");if((T=h-this.transparency.indexed.length)>0)for(j=0;0<=T?j<T:j>T;0<=T?++j:--j)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":x=(U=this.read(o)).indexOf(0),_=String.fromCharCode.apply(String,U.slice(0,x)),this.text[_]=String.fromCharCode.apply(String,U.slice(x+1));break;case"IEND":return y&&this.animation.frames.push(y),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(Z=this.colorType)===4||Z===6,u=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*u,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,u;for(u=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)u.push(this.data[this.pos++]);return u},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,u=new Uint8Array(this.width*this.height*o),h=0,d=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function v(y,x,_,P){var T,U,N,j,Z,J,le,he,Le,V,F,Y,$,D,k,I,W,G,K,q,ve,Ce=Math.ceil((d.width-y)/_),Xe=Math.ceil((d.height-x)/P),B=d.width==Ce&&d.height==Xe;for(D=o*Ce,Y=B?u:new Uint8Array(D*Xe),J=s.length,$=0,U=0;$<Xe&&h<J;){switch(s[h++]){case 0:for(j=W=0;W<D;j=W+=1)Y[U++]=s[h++];break;case 1:for(j=G=0;G<D;j=G+=1)T=s[h++],Z=j<o?0:Y[U-o],Y[U++]=(T+Z)%256;break;case 2:for(j=K=0;K<D;j=K+=1)T=s[h++],N=(j-j%o)/o,k=$&&Y[($-1)*D+N*o+j%o],Y[U++]=(k+T)%256;break;case 3:for(j=q=0;q<D;j=q+=1)T=s[h++],N=(j-j%o)/o,Z=j<o?0:Y[U-o],k=$&&Y[($-1)*D+N*o+j%o],Y[U++]=(T+Math.floor((Z+k)/2))%256;break;case 4:for(j=ve=0;ve<D;j=ve+=1)T=s[h++],N=(j-j%o)/o,Z=j<o?0:Y[U-o],$===0?k=I=0:(k=Y[($-1)*D+N*o+j%o],I=N&&Y[($-1)*D+(N-1)*o+j%o]),le=Z+k-I,he=Math.abs(le-Z),V=Math.abs(le-k),F=Math.abs(le-I),Le=he<=V&&he<=F?Z:V<=F?k:I,Y[U++]=(T+Le)%256;break;default:throw new Error("Invalid filter algorithm: "+s[h-1])}if(!B){var te=((x+$*P)*d.width+y)*o,se=$*D;for(j=0;j<Ce;j+=1){for(var ae=0;ae<o;ae+=1)u[te++]=Y[se++];te+=(_-1)*o}}$++}}return s=II(s),d.interlaceMethod==1?(v(0,0,8,8),v(4,0,8,8),v(0,4,4,8),v(2,0,4,4),v(0,2,2,4),v(1,0,2,2),v(0,1,1,2)):v(0,0,1,1),u},r.prototype.decodePalette=function(){var s,o,u,h,d,v,y,x,_;for(u=this.palette,v=this.transparency.indexed||[],d=new Uint8Array((v.length||0)+u.length),h=0,s=0,o=y=0,x=u.length;y<x;o=y+=3)d[h++]=u[o],d[h++]=u[o+1],d[h++]=u[o+2],d[h++]=(_=v[s++])!=null?_:255;return d},r.prototype.copyToImageData=function(s,o){var u,h,d,v,y,x,_,P,T,U,N;if(h=this.colors,T=null,u=this.hasAlphaChannel,this.palette.length&&(T=(N=this._decodedPalette)!=null?N:this._decodedPalette=this.decodePalette(),h=4,u=!0),P=(d=s.data||s).length,y=T||o,v=x=0,h===1)for(;v<P;)_=T?4*o[v/4]:x,U=y[_++],d[v++]=U,d[v++]=U,d[v++]=U,d[v++]=u?y[_++]:255,x=_;else for(;v<P;)_=T?4*o[v/4]:x,d[v++]=y[_++],d[v++]=y[_++],d[v++]=y[_++],d[v++]=u?y[_++]:255,x=_},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(br)==="[object Window]"){try{t=br.document.createElement("canvas"),n=t.getContext("2d")}catch{return!1}return!0}return!1};return i(),e=function(s){var o;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,u,h,d,v,y,x,_;if(this.animation){for(_=[],u=v=0,y=(x=this.animation.frames).length;v<y;u=++v)o=x[u],h=s.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(h,d),o.imageData=h,_.push(o.image=e(h));return _}},r.prototype.renderFrame=function(s,o){var u,h,d;return u=(h=this.animation.frames)[o],d=h[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?s.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&s.putImageData(d.imageData,d.xOffset,d.yOffset),u.blendOp===0&&s.clearRect(u.xOffset,u.yOffset,u.width,u.height),s.drawImage(u.image,u.xOffset,u.yOffset)},r.prototype.animate=function(s){var o,u,h,d,v,y,x=this;return u=0,y=this.animation,d=y.numFrames,h=y.frames,v=y.numPlays,(o=function(){var _,P;if(_=u++%d,P=h[_],x.renderFrame(s,_),d>1&&u/d<v)return x.animation._timeout=setTimeout(o,P.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,u;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(u=o.createImageData(this.width,this.height),this.copyToImageData(u,this.decodePixels()),o.putImageData(u,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function oR(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,i=e[t++],s=i>>7,o=1<<(7&i)+1;e[t++],e[t++];var u=null,h=null;s&&(u=t,h=o,t+=3*o);var d=!0,v=[],y=0,x=null,_=0,P=null;for(this.width=n,this.height=r;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,P=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!(($=e[t++])>=0))throw Error("Invalid block size");if($===0)break;t+=$}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var T=e[t++];y=e[t++]|e[t++]<<8,x=e[t++],!(1&T)&&(x=null),_=T>>2&7,t++;break;case 254:for(;;){if(!(($=e[t++])>=0))throw Error("Invalid block size");if($===0)break;t+=$}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var U=e[t++]|e[t++]<<8,N=e[t++]|e[t++]<<8,j=e[t++]|e[t++]<<8,Z=e[t++]|e[t++]<<8,J=e[t++],le=J>>6&1,he=1<<(7&J)+1,Le=u,V=h,F=!1;J>>7&&(F=!0,Le=t,V=he,t+=3*he);var Y=t;for(t++;;){var $;if(!(($=e[t++])>=0))throw Error("Invalid block size");if($===0)break;t+=$}v.push({x:U,y:N,width:j,height:Z,has_local_palette:F,palette_offset:Le,palette_size:V,data_offset:Y,data_length:t-Y,transparent_index:x,interlaced:!!le,delay:y,disposal:_});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return v.length},this.loopCount=function(){return P},this.frameInfo=function(D){if(D<0||D>=v.length)throw new Error("Frame index out of range.");return v[D]},this.decodeAndBlitFrameBGRA=function(D,k){var I=this.frameInfo(D),W=I.width*I.height,G=new Uint8Array(W);Rb(e,I.data_offset,G,W);var K=I.palette_offset,q=I.transparent_index;q===null&&(q=256);var ve=I.width,Ce=n-ve,Xe=ve,B=4*(I.y*n+I.x),te=4*((I.y+I.height)*n+I.x),se=B,ae=4*Ce;I.interlaced===!0&&(ae+=4*n*7);for(var we=8,fe=0,Q=G.length;fe<Q;++fe){var ue=G[fe];if(Xe===0&&(Xe=ve,(se+=ae)>=te&&(ae=4*Ce+4*n*(we-1),se=B+(ve+Ce)*(we<<1),we>>=1)),ue===q)se+=4;else{var Re=e[K+3*ue],Me=e[K+3*ue+1],Ze=e[K+3*ue+2];k[se++]=Ze,k[se++]=Me,k[se++]=Re,k[se++]=255}--Xe}},this.decodeAndBlitFrameRGBA=function(D,k){var I=this.frameInfo(D),W=I.width*I.height,G=new Uint8Array(W);Rb(e,I.data_offset,G,W);var K=I.palette_offset,q=I.transparent_index;q===null&&(q=256);var ve=I.width,Ce=n-ve,Xe=ve,B=4*(I.y*n+I.x),te=4*((I.y+I.height)*n+I.x),se=B,ae=4*Ce;I.interlaced===!0&&(ae+=4*n*7);for(var we=8,fe=0,Q=G.length;fe<Q;++fe){var ue=G[fe];if(Xe===0&&(Xe=ve,(se+=ae)>=te&&(ae=4*Ce+4*n*(we-1),se=B+(ve+Ce)*(we<<1),we>>=1)),ue===q)se+=4;else{var Re=e[K+3*ue],Me=e[K+3*ue+1],Ze=e[K+3*ue+2];k[se++]=Re,k[se++]=Me,k[se++]=Ze,k[se++]=255}--Xe}}}function Rb(e,t,n,r){for(var i=e[t++],s=1<<i,o=s+1,u=o+1,h=i+1,d=(1<<h)-1,v=0,y=0,x=0,_=e[t++],P=new Int32Array(4096),T=null;;){for(;v<16&&_!==0;)y|=e[t++]<<v,v+=8,_===1?_=e[t++]:--_;if(v<h)break;var U=y&d;if(y>>=h,v-=h,U!==s){if(U===o)break;for(var N=U<u?U:T,j=0,Z=N;Z>s;)Z=P[Z]>>8,++j;var J=Z;if(x+j+(N!==U?1:0)>r)return void Ki.log("Warning, gif stream longer than expected.");n[x++]=J;var le=x+=j;for(N!==U&&(n[x++]=J),Z=N;j--;)Z=P[Z],n[--le]=255&Z,Z>>=8;T!==null&&u<4096&&(P[u++]=T<<8|J,u>=d+1&&h<12&&(++h,d=d<<1|1)),T=U}else u=o+1,d=(1<<(h=i+1))-1,T=null}return x!==r&&Ki.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function dv(e){var t,n,r,i,s,o=Math.floor,u=new Array(64),h=new Array(64),d=new Array(64),v=new Array(64),y=new Array(65535),x=new Array(65535),_=new Array(64),P=new Array(64),T=[],U=0,N=7,j=new Array(64),Z=new Array(64),J=new Array(64),le=new Array(256),he=new Array(2048),Le=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],V=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],Y=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],$=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],D=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],I=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],W=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function G(B,te){for(var se=0,ae=0,we=new Array,fe=1;fe<=16;fe++){for(var Q=1;Q<=B[fe];Q++)we[te[ae]]=[],we[te[ae]][0]=se,we[te[ae]][1]=fe,ae++,se++;se*=2}return we}function K(B){for(var te=B[0],se=B[1]-1;se>=0;)te&1<<se&&(U|=1<<N),se--,--N<0&&(U==255?(q(255),q(0)):q(U),N=7,U=0)}function q(B){T.push(B)}function ve(B){q(B>>8&255),q(255&B)}function Ce(B,te,se,ae,we){for(var fe,Q=we[0],ue=we[240],Re=function(Ge,Qe){var Ve,ot,At,Et,zt,Kt,dn,mn,et,st,rt=0;for(et=0;et<8;++et){Ve=Ge[rt],ot=Ge[rt+1],At=Ge[rt+2],Et=Ge[rt+3],zt=Ge[rt+4],Kt=Ge[rt+5],dn=Ge[rt+6];var Vt=Ve+(mn=Ge[rt+7]),Xt=Ve-mn,ft=ot+dn,Ue=ot-dn,Dt=At+Kt,gn=At-Kt,un=Et+zt,Qt=Et-zt,Ye=Vt+un,vn=Vt-un,Sn=ft+Dt,ln=ft-Dt;Ge[rt]=Ye+Sn,Ge[rt+4]=Ye-Sn;var wn=.707106781*(ln+vn);Ge[rt+2]=vn+wn,Ge[rt+6]=vn-wn;var ur=.382683433*((Ye=Qt+gn)-(ln=Ue+Xt)),En=.5411961*Ye+ur,rr=1.306562965*ln+ur,Wr=.707106781*(Sn=gn+Ue),ki=Xt+Wr,Fn=Xt-Wr;Ge[rt+5]=Fn+En,Ge[rt+3]=Fn-En,Ge[rt+1]=ki+rr,Ge[rt+7]=ki-rr,rt+=8}for(rt=0,et=0;et<8;++et){Ve=Ge[rt],ot=Ge[rt+8],At=Ge[rt+16],Et=Ge[rt+24],zt=Ge[rt+32],Kt=Ge[rt+40],dn=Ge[rt+48];var oo=Ve+(mn=Ge[rt+56]),jo=Ve-mn,fi=ot+dn,Wn=ot-dn,bn=At+Kt,tr=At-Kt,hn=Et+zt,xo=Et-zt,_i=oo+hn,bi=oo-hn,di=fi+bn,Ri=fi-bn;Ge[rt]=_i+di,Ge[rt+32]=_i-di;var Lo=.707106781*(Ri+bi);Ge[rt+16]=bi+Lo,Ge[rt+48]=bi-Lo;var yr=.382683433*((_i=xo+tr)-(Ri=Wn+jo)),ds=.5411961*_i+yr,xl=1.306562965*Ri+yr,Ds=.707106781*(di=tr+Wn),jr=jo+Ds,Mn=jo-Ds;Ge[rt+40]=Mn+ds,Ge[rt+24]=Mn-ds,Ge[rt+8]=jr+xl,Ge[rt+56]=jr-xl,rt++}for(et=0;et<64;++et)st=Ge[et]*Qe[et],_[et]=st>0?st+.5|0:st-.5|0;return _}(B,te),Me=0;Me<64;++Me)P[Le[Me]]=Re[Me];var Ze=P[0]-se;se=P[0],Ze==0?K(ae[0]):(K(ae[x[fe=32767+Ze]]),K(y[fe]));for(var oe=63;oe>0&&P[oe]==0;)oe--;if(oe==0)return K(Q),se;for(var me,pe=1;pe<=oe;){for(var de=pe;P[pe]==0&&pe<=oe;)++pe;var ze=pe-de;if(ze>=16){me=ze>>4;for(var Ke=1;Ke<=me;++Ke)K(ue);ze&=15}fe=32767+P[pe],K(we[(ze<<4)+x[fe]]),K(y[fe]),pe++}return oe!=63&&K(Q),se}function Xe(B){B=Math.min(Math.max(B,1),100),s!=B&&(function(te){for(var se=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ae=0;ae<64;ae++){var we=o((se[ae]*te+50)/100);we=Math.min(Math.max(we,1),255),u[Le[ae]]=we}for(var fe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Q=0;Q<64;Q++){var ue=o((fe[Q]*te+50)/100);ue=Math.min(Math.max(ue,1),255),h[Le[Q]]=ue}for(var Re=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Me=0,Ze=0;Ze<8;Ze++)for(var oe=0;oe<8;oe++)d[Me]=1/(u[Le[Me]]*Re[Ze]*Re[oe]*8),v[Me]=1/(h[Le[Me]]*Re[Ze]*Re[oe]*8),Me++}(B<50?Math.floor(5e3/B):Math.floor(200-2*B)),s=B)}this.encode=function(B,te){te&&Xe(te),T=new Array,U=0,N=7,ve(65496),ve(65504),ve(16),q(74),q(70),q(73),q(70),q(0),q(1),q(1),q(0),ve(1),ve(1),q(0),q(0),function(){ve(65499),ve(132),q(0);for(var ot=0;ot<64;ot++)q(u[ot]);q(1);for(var At=0;At<64;At++)q(h[At])}(),function(ot,At){ve(65472),ve(17),q(8),ve(At),ve(ot),q(3),q(1),q(17),q(0),q(2),q(17),q(1),q(3),q(17),q(1)}(B.width,B.height),function(){ve(65476),ve(418),q(0);for(var ot=0;ot<16;ot++)q(V[ot+1]);for(var At=0;At<=11;At++)q(F[At]);q(16);for(var Et=0;Et<16;Et++)q(Y[Et+1]);for(var zt=0;zt<=161;zt++)q($[zt]);q(1);for(var Kt=0;Kt<16;Kt++)q(D[Kt+1]);for(var dn=0;dn<=11;dn++)q(k[dn]);q(17);for(var mn=0;mn<16;mn++)q(I[mn+1]);for(var et=0;et<=161;et++)q(W[et])}(),ve(65498),ve(12),q(3),q(1),q(0),q(2),q(17),q(3),q(17),q(0),q(63),q(0);var se=0,ae=0,we=0;U=0,N=7,this.encode.displayName="_encode_";for(var fe,Q,ue,Re,Me,Ze,oe,me,pe,de=B.data,ze=B.width,Ke=B.height,Ge=4*ze,Qe=0;Qe<Ke;){for(fe=0;fe<Ge;){for(Me=Ge*Qe+fe,oe=-1,me=0,pe=0;pe<64;pe++)Ze=Me+(me=pe>>3)*Ge+(oe=4*(7&pe)),Qe+me>=Ke&&(Ze-=Ge*(Qe+1+me-Ke)),fe+oe>=Ge&&(Ze-=fe+oe-Ge+4),Q=de[Ze++],ue=de[Ze++],Re=de[Ze++],j[pe]=(he[Q]+he[ue+256>>0]+he[Re+512>>0]>>16)-128,Z[pe]=(he[Q+768>>0]+he[ue+1024>>0]+he[Re+1280>>0]>>16)-128,J[pe]=(he[Q+1280>>0]+he[ue+1536>>0]+he[Re+1792>>0]>>16)-128;se=Ce(j,d,se,t,r),ae=Ce(Z,v,ae,n,i),we=Ce(J,v,we,n,i),fe+=32}Qe+=8}if(N>=0){var Ve=[];Ve[1]=N+1,Ve[0]=(1<<N+1)-1,K(Ve)}return ve(65497),new Uint8Array(T)},e=e||50,function(){for(var B=String.fromCharCode,te=0;te<256;te++)le[te]=B(te)}(),t=G(V,F),n=G(D,k),r=G(Y,$),i=G(I,W),function(){for(var B=1,te=2,se=1;se<=15;se++){for(var ae=B;ae<te;ae++)x[32767+ae]=se,y[32767+ae]=[],y[32767+ae][1]=se,y[32767+ae][0]=ae;for(var we=-(te-1);we<=-B;we++)x[32767+we]=se,y[32767+we]=[],y[32767+we][1]=se,y[32767+we][0]=te-1+we;B<<=1,te<<=1}}(),function(){for(var B=0;B<256;B++)he[B]=19595*B,he[B+256>>0]=38470*B,he[B+512>>0]=7471*B+32768,he[B+768>>0]=-11059*B,he[B+1024>>0]=-21709*B,he[B+1280>>0]=32768*B+8421375,he[B+1536>>0]=-27439*B,he[B+1792>>0]=-5329*B}(),Xe(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Tu(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Fb(e){function t(V){if(!V)throw Error("assert :P")}function n(V,F,Y){for(var $=0;4>$;$++)if(V[F+$]!=Y.charCodeAt($))return!0;return!1}function r(V,F,Y,$,D){for(var k=0;k<D;k++)V[F+k]=Y[$+k]}function i(V,F,Y,$){for(var D=0;D<$;D++)V[F+D]=Y}function s(V){return new Int32Array(V)}function o(V,F){for(var Y=[],$=0;$<V;$++)Y.push(new F);return Y}function u(V,F){var Y=[];return function $(D,k,I){for(var W=I[k],G=0;G<W&&(D.push(I.length>k+1?[]:new F),!(I.length<k+1));G++)$(D[G],k+1,I)}(Y,0,V),Y}var h=function(){var V=this;function F(b,C){for(var H=1<<C-1>>>0;b&H;)H>>>=1;return H?(b&H-1)+H:b}function Y(b,C,H,ie,_e){t(!(ie%H));do b[C+(ie-=H)]=_e;while(0<ie)}function $(b,C,H,ie,_e){if(t(2328>=_e),512>=_e)var Ee=s(512);else if((Ee=s(_e))==null)return 0;return function(Ae,ke,Be,$e,dt,Bt){var Ot,wt,qt=ke,Ut=1<<Be,pt=s(16),yt=s(16);for(t(dt!=0),t($e!=null),t(Ae!=null),t(0<Be),wt=0;wt<dt;++wt){if(15<$e[wt])return 0;++pt[$e[wt]]}if(pt[0]==dt)return 0;for(yt[1]=0,Ot=1;15>Ot;++Ot){if(pt[Ot]>1<<Ot)return 0;yt[Ot+1]=yt[Ot]+pt[Ot]}for(wt=0;wt<dt;++wt)Ot=$e[wt],0<$e[wt]&&(Bt[yt[Ot]++]=wt);if(yt[15]==1)return($e=new D).g=0,$e.value=Bt[0],Y(Ae,qt,1,Ut,$e),Ut;var Jt,fn=-1,en=Ut-1,An=0,Cn=1,Hn=1,l=1<<Be;for(wt=0,Ot=1,dt=2;Ot<=Be;++Ot,dt<<=1){if(Cn+=Hn<<=1,0>(Hn-=pt[Ot]))return 0;for(;0<pt[Ot];--pt[Ot])($e=new D).g=Ot,$e.value=Bt[wt++],Y(Ae,qt+An,dt,l,$e),An=F(An,Ot)}for(Ot=Be+1,dt=2;15>=Ot;++Ot,dt<<=1){if(Cn+=Hn<<=1,0>(Hn-=pt[Ot]))return 0;for(;0<pt[Ot];--pt[Ot]){if($e=new D,(An&en)!=fn){for(qt+=l,Jt=1<<(fn=Ot)-Be;15>fn&&!(0>=(Jt-=pt[fn]));)++fn,Jt<<=1;Ut+=l=1<<(Jt=fn-Be),Ae[ke+(fn=An&en)].g=Jt+Be,Ae[ke+fn].value=qt-ke-fn}$e.g=Ot-Be,$e.value=Bt[wt++],Y(Ae,qt+(An>>Be),dt,l,$e),An=F(An,Ot)}}return Cn!=2*yt[15]-1?0:Ut}(b,C,H,ie,_e,Ee)}function D(){this.value=this.g=0}function k(){this.value=this.g=0}function I(){this.G=o(5,D),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Qi,k)}function W(b,C,H,ie){t(b!=null),t(C!=null),t(2147483648>ie),b.Ca=254,b.I=0,b.b=-8,b.Ka=0,b.oa=C,b.pa=H,b.Jd=C,b.Yc=H+ie,b.Zc=4<=ie?H+ie-4+1:H,fe(b)}function G(b,C){for(var H=0;0<C--;)H|=ue(b,128)<<C;return H}function K(b,C){var H=G(b,C);return Q(b)?-H:H}function q(b,C,H,ie){var _e,Ee=0;for(t(b!=null),t(C!=null),t(4294967288>ie),b.Sb=ie,b.Ra=0,b.u=0,b.h=0,4<ie&&(ie=4),_e=0;_e<ie;++_e)Ee+=C[H+_e]<<8*_e;b.Ra=Ee,b.bb=ie,b.oa=C,b.pa=H}function ve(b){for(;8<=b.u&&b.bb<b.Sb;)b.Ra>>>=8,b.Ra+=b.oa[b.pa+b.bb]<<es-8>>>0,++b.bb,b.u-=8;se(b)&&(b.h=1,b.u=0)}function Ce(b,C){if(t(0<=C),!b.h&&C<=vs){var H=te(b)&Js[C];return b.u+=C,ve(b),H}return b.h=1,b.u=0}function Xe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function B(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function te(b){return b.Ra>>>(b.u&es-1)>>>0}function se(b){return t(b.bb<=b.Sb),b.h||b.bb==b.Sb&&b.u>es}function ae(b,C){b.u=C,b.h=se(b)}function we(b){b.u>=sl&&(t(b.u>=sl),ve(b))}function fe(b){t(b!=null&&b.oa!=null),b.pa<b.Zc?(b.I=(b.oa[b.pa++]|b.I<<8)>>>0,b.b+=8):(t(b!=null&&b.oa!=null),b.pa<b.Yc?(b.b+=8,b.I=b.oa[b.pa++]|b.I<<8):b.Ka?b.b=0:(b.I<<=8,b.b+=8,b.Ka=1))}function Q(b){return G(b,1)}function ue(b,C){var H=b.Ca;0>b.b&&fe(b);var ie=b.b,_e=H*C>>>8,Ee=(b.I>>>ie>_e)+0;for(Ee?(H-=_e,b.I-=_e+1<<ie>>>0):H=_e+1,ie=H,_e=0;256<=ie;)_e+=8,ie>>=8;return ie=7^_e+Po[ie],b.b-=ie,b.Ca=(H<<ie)-1,Ee}function Re(b,C,H){b[C+0]=H>>24&255,b[C+1]=H>>16&255,b[C+2]=H>>8&255,b[C+3]=H>>0&255}function Me(b,C){return b[C+0]<<0|b[C+1]<<8}function Ze(b,C){return Me(b,C)|b[C+2]<<16}function oe(b,C){return Me(b,C)|Me(b,C+2)<<16}function me(b,C){var H=1<<C;return t(b!=null),t(0<C),b.X=s(H),b.X==null?0:(b.Mb=32-C,b.Xa=C,1)}function pe(b,C){t(b!=null),t(C!=null),t(b.Xa==C.Xa),r(C.X,0,b.X,0,1<<C.Xa)}function de(){this.X=[],this.Xa=this.Mb=0}function ze(b,C,H,ie){t(H!=null),t(ie!=null);var _e=H[0],Ee=ie[0];return _e==0&&(_e=(b*Ee+C/2)/C),Ee==0&&(Ee=(C*_e+b/2)/b),0>=_e||0>=Ee?0:(H[0]=_e,ie[0]=Ee,1)}function Ke(b,C){return b+(1<<C)-1>>>C}function Ge(b,C){return((4278255360&b)+(4278255360&C)>>>0&4278255360)+((16711935&b)+(16711935&C)>>>0&16711935)>>>0}function Qe(b,C){V[C]=function(H,ie,_e,Ee,Ae,ke,Be){var $e;for($e=0;$e<Ae;++$e){var dt=V[b](ke[Be+$e-1],_e,Ee+$e);ke[Be+$e]=Ge(H[ie+$e],dt)}}}function Ve(){this.ud=this.hd=this.jd=0}function ot(b,C){return((4278124286&(b^C))>>>1)+(b&C)>>>0}function At(b){return 0<=b&&256>b?b:0>b?0:255<b?255:void 0}function Et(b,C){return At(b+(b-C+.5>>1))}function zt(b,C,H){return Math.abs(C-H)-Math.abs(b-H)}function Kt(b,C,H,ie,_e,Ee,Ae){for(ie=Ee[Ae-1],H=0;H<_e;++H)Ee[Ae+H]=ie=Ge(b[C+H],ie)}function dn(b,C,H,ie,_e){var Ee;for(Ee=0;Ee<H;++Ee){var Ae=b[C+Ee],ke=Ae>>8&255,Be=16711935&(Be=(Be=16711935&Ae)+((ke<<16)+ke));ie[_e+Ee]=(4278255360&Ae)+Be>>>0}}function mn(b,C){C.jd=b>>0&255,C.hd=b>>8&255,C.ud=b>>16&255}function et(b,C,H,ie,_e,Ee){var Ae;for(Ae=0;Ae<ie;++Ae){var ke=C[H+Ae],Be=ke>>>8,$e=ke,dt=255&(dt=(dt=ke>>>16)+((b.jd<<24>>24)*(Be<<24>>24)>>>5));$e=255&($e=($e=$e+((b.hd<<24>>24)*(Be<<24>>24)>>>5))+((b.ud<<24>>24)*(dt<<24>>24)>>>5)),_e[Ee+Ae]=(4278255360&ke)+(dt<<16)+$e}}function st(b,C,H,ie,_e){V[C]=function(Ee,Ae,ke,Be,$e,dt,Bt,Ot,wt){for(Be=Bt;Be<Ot;++Be)for(Bt=0;Bt<wt;++Bt)$e[dt++]=_e(ke[ie(Ee[Ae++])])},V[b]=function(Ee,Ae,ke,Be,$e,dt,Bt){var Ot=8>>Ee.b,wt=Ee.Ea,qt=Ee.K[0],Ut=Ee.w;if(8>Ot)for(Ee=(1<<Ee.b)-1,Ut=(1<<Ot)-1;Ae<ke;++Ae){var pt,yt=0;for(pt=0;pt<wt;++pt)pt&Ee||(yt=ie(Be[$e++])),dt[Bt++]=_e(qt[yt&Ut]),yt>>=Ot}else V["VP8LMapColor"+H](Be,$e,qt,Ut,dt,Bt,Ae,ke,wt)}}function rt(b,C,H,ie,_e){for(H=C+H;C<H;){var Ee=b[C++];ie[_e++]=Ee>>16&255,ie[_e++]=Ee>>8&255,ie[_e++]=Ee>>0&255}}function Vt(b,C,H,ie,_e){for(H=C+H;C<H;){var Ee=b[C++];ie[_e++]=Ee>>16&255,ie[_e++]=Ee>>8&255,ie[_e++]=Ee>>0&255,ie[_e++]=Ee>>24&255}}function Xt(b,C,H,ie,_e){for(H=C+H;C<H;){var Ee=(Ae=b[C++])>>16&240|Ae>>12&15,Ae=Ae>>0&240|Ae>>28&15;ie[_e++]=Ee,ie[_e++]=Ae}}function ft(b,C,H,ie,_e){for(H=C+H;C<H;){var Ee=(Ae=b[C++])>>16&248|Ae>>13&7,Ae=Ae>>5&224|Ae>>3&31;ie[_e++]=Ee,ie[_e++]=Ae}}function Ue(b,C,H,ie,_e){for(H=C+H;C<H;){var Ee=b[C++];ie[_e++]=Ee>>0&255,ie[_e++]=Ee>>8&255,ie[_e++]=Ee>>16&255}}function Dt(b,C,H,ie,_e,Ee){if(Ee==0)for(H=C+H;C<H;)Re(ie,((Ee=b[C++])[0]>>24|Ee[1]>>8&65280|Ee[2]<<8&16711680|Ee[3]<<24)>>>0),_e+=32;else r(ie,_e,b,C,H)}function gn(b,C){V[C][0]=V[b+"0"],V[C][1]=V[b+"1"],V[C][2]=V[b+"2"],V[C][3]=V[b+"3"],V[C][4]=V[b+"4"],V[C][5]=V[b+"5"],V[C][6]=V[b+"6"],V[C][7]=V[b+"7"],V[C][8]=V[b+"8"],V[C][9]=V[b+"9"],V[C][10]=V[b+"10"],V[C][11]=V[b+"11"],V[C][12]=V[b+"12"],V[C][13]=V[b+"13"],V[C][14]=V[b+"0"],V[C][15]=V[b+"0"]}function un(b){return b==mo||b==vo||b==Vs||b==a}function Qt(){this.eb=[],this.size=this.A=this.fb=0}function Ye(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function vn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Qt,this.f.kb=new Ye,this.sd=null}function Sn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ln(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function wn(b){return alert("todo:WebPSamplerProcessPlane"),b.T}function ur(b,C){var H=b.T,ie=C.ba.f.RGBA,_e=ie.eb,Ee=ie.fb+b.ka*ie.A,Ae=Oo[C.ba.S],ke=b.y,Be=b.O,$e=b.f,dt=b.N,Bt=b.ea,Ot=b.W,wt=C.cc,qt=C.dc,Ut=C.Mc,pt=C.Nc,yt=b.ka,Jt=b.ka+b.T,fn=b.U,en=fn+1>>1;for(yt==0?Ae(ke,Be,null,null,$e,dt,Bt,Ot,$e,dt,Bt,Ot,_e,Ee,null,null,fn):(Ae(C.ec,C.fc,ke,Be,wt,qt,Ut,pt,$e,dt,Bt,Ot,_e,Ee-ie.A,_e,Ee,fn),++H);yt+2<Jt;yt+=2)wt=$e,qt=dt,Ut=Bt,pt=Ot,dt+=b.Rc,Ot+=b.Rc,Ee+=2*ie.A,Ae(ke,(Be+=2*b.fa)-b.fa,ke,Be,wt,qt,Ut,pt,$e,dt,Bt,Ot,_e,Ee-ie.A,_e,Ee,fn);return Be+=b.fa,b.j+Jt<b.o?(r(C.ec,C.fc,ke,Be,fn),r(C.cc,C.dc,$e,dt,en),r(C.Mc,C.Nc,Bt,Ot,en),H--):1&Jt||Ae(ke,Be,null,null,$e,dt,Bt,Ot,$e,dt,Bt,Ot,_e,Ee+ie.A,null,null,fn),H}function En(b,C,H){var ie=b.F,_e=[b.J];if(ie!=null){var Ee=b.U,Ae=C.ba.S,ke=Ae==$s||Ae==Vs;C=C.ba.f.RGBA;var Be=[0],$e=b.ka;Be[0]=b.T,b.Kb&&($e==0?--Be[0]:(--$e,_e[0]-=b.width),b.j+b.ka+b.T==b.o&&(Be[0]=b.o-b.j-$e));var dt=C.eb;$e=C.fb+$e*C.A,b=si(ie,_e[0],b.width,Ee,Be,dt,$e+(ke?0:3),C.A),t(H==Be),b&&un(Ae)&&go(dt,$e,ke,Ee,Be,C.A)}return 0}function rr(b){var C=b.ma,H=C.ba.S,ie=11>H,_e=H==nr||H==_a||H==$s||H==Go||H==12||un(H);if(C.memory=null,C.Ib=null,C.Jb=null,C.Nd=null,!_u(C.Oa,b,_e?11:12))return 0;if(_e&&un(H)&&cn(),b.da)alert("todo:use_scaling");else{if(ie){if(C.Ib=wn,b.Kb){if(H=b.U+1>>1,C.memory=s(b.U+2*H),C.memory==null)return 0;C.ec=C.memory,C.fc=0,C.cc=C.ec,C.dc=C.fc+b.U,C.Mc=C.cc,C.Nc=C.dc+H,C.Ib=ur,cn()}}else alert("todo:EmitYUV");_e&&(C.Jb=En,ie&&xt())}if(ie&&!Yu){for(b=0;256>b;++b)Hc[b]=89858*(b-128)+Ua>>Vc,Gc[b]=-22014*(b-128)+Ua,gd[b]=-45773*(b-128),Ol[b]=113618*(b-128)+Ua>>Vc;for(b=yc;b<Lh;++b)C=76283*(b-16)+Ua>>Vc,qc[b-yc]=Ar(C,255),lf[b-yc]=Ar(C+8>>4,15);Yu=1}return 1}function Wr(b){var C=b.ma,H=b.U,ie=b.T;return t(!(1&b.ka)),0>=H||0>=ie?0:(H=C.Ib(b,C),C.Jb!=null&&C.Jb(b,C,H),C.Dc+=H,1)}function ki(b){b.ma.memory=null}function Fn(b,C,H,ie){return Ce(b,8)!=47?0:(C[0]=Ce(b,14)+1,H[0]=Ce(b,14)+1,ie[0]=Ce(b,1),Ce(b,3)!=0?0:!b.h)}function oo(b,C){if(4>b)return b+1;var H=b-2>>1;return(2+(1&b)<<H)+Ce(C,H)+1}function jo(b,C){return 120<C?C-120:1<=(H=((H=at[C-1])>>4)*b+(8-(15&H)))?H:1;var H}function fi(b,C,H){var ie=te(H),_e=b[C+=255&ie].g-8;return 0<_e&&(ae(H,H.u+8),ie=te(H),C+=b[C].value,C+=ie&(1<<_e)-1),ae(H,H.u+b[C].g),b[C].value}function Wn(b,C,H){return H.g+=b.g,H.value+=b.value<<C>>>0,t(8>=H.g),b.g}function bn(b,C,H){var ie=b.xc;return t((C=ie==0?0:b.vc[b.md*(H>>ie)+(C>>ie)])<b.Wb),b.Ya[C]}function tr(b,C,H,ie){var _e=b.ab,Ee=b.c*C,Ae=b.C;C=Ae+C;var ke=H,Be=ie;for(ie=b.Ta,H=b.Ua;0<_e--;){var $e=b.gc[_e],dt=Ae,Bt=C,Ot=ke,wt=Be,qt=(Be=ie,ke=H,$e.Ea);switch(t(dt<Bt),t(Bt<=$e.nc),$e.hc){case 2:Ku(Ot,wt,(Bt-dt)*qt,Be,ke);break;case 0:var Ut=dt,pt=Bt,yt=Be,Jt=ke,fn=(l=$e).Ea;Ut==0&&($o(Ot,wt,null,null,1,yt,Jt),Kt(Ot,wt+1,0,0,fn-1,yt,Jt+1),wt+=fn,Jt+=fn,++Ut);for(var en=1<<l.b,An=en-1,Cn=Ke(fn,l.b),Hn=l.K,l=l.w+(Ut>>l.b)*Cn;Ut<pt;){var f=Hn,m=l,w=1;for(Vo(Ot,wt,yt,Jt-fn,1,yt,Jt);w<fn;){var E=(w&~An)+en;E>fn&&(E=fn),(0,ga[f[m++]>>8&15])(Ot,wt+ +w,yt,Jt+w-fn,E-w,yt,Jt+w),w=E}wt+=fn,Jt+=fn,++Ut&An||(l+=Cn)}Bt!=$e.nc&&r(Be,ke-qt,Be,ke+(Bt-dt-1)*qt,qt);break;case 1:for(qt=Ot,pt=wt,fn=(Ot=$e.Ea)-(Jt=Ot&~(yt=(wt=1<<$e.b)-1)),Ut=Ke(Ot,$e.b),en=$e.K,$e=$e.w+(dt>>$e.b)*Ut;dt<Bt;){for(An=en,Cn=$e,Hn=new Ve,l=pt+Jt,f=pt+Ot;pt<l;)mn(An[Cn++],Hn),ma(Hn,qt,pt,wt,Be,ke),pt+=wt,ke+=wt;pt<f&&(mn(An[Cn++],Hn),ma(Hn,qt,pt,fn,Be,ke),pt+=fn,ke+=fn),++dt&yt||($e+=Ut)}break;case 3:if(Ot==Be&&wt==ke&&0<$e.b){for(pt=Be,Ot=qt=ke+(Bt-dt)*qt-(Jt=(Bt-dt)*Ke($e.Ea,$e.b)),wt=Be,yt=ke,Ut=[],Jt=(fn=Jt)-1;0<=Jt;--Jt)Ut[Jt]=wt[yt+Jt];for(Jt=fn-1;0<=Jt;--Jt)pt[Ot+Jt]=Ut[Jt];lo($e,dt,Bt,Be,qt,Be,ke)}else lo($e,dt,Bt,Ot,wt,Be,ke)}ke=ie,Be=H}Be!=H&&r(ie,H,ke,Be,Ee)}function hn(b,C){var H=b.V,ie=b.Ba+b.c*b.C,_e=C-b.C;if(t(C<=b.l.o),t(16>=_e),0<_e){var Ee=b.l,Ae=b.Ta,ke=b.Ua,Be=Ee.width;if(tr(b,_e,H,ie),_e=ke=[ke],t((H=b.C)<(ie=C)),t(Ee.v<Ee.va),ie>Ee.o&&(ie=Ee.o),H<Ee.j){var $e=Ee.j-H;H=Ee.j,_e[0]+=$e*Be}if(H>=ie?H=0:(_e[0]+=4*Ee.v,Ee.ka=H-Ee.j,Ee.U=Ee.va-Ee.v,Ee.T=ie-H,H=1),H){if(ke=ke[0],11>(H=b.ca).S){var dt=H.f.RGBA,Bt=(ie=H.S,_e=Ee.U,Ee=Ee.T,$e=dt.eb,dt.A),Ot=Ee;for(dt=dt.fb+b.Ma*dt.A;0<Ot--;){var wt=Ae,qt=ke,Ut=_e,pt=$e,yt=dt;switch(ie){case ns:ko(wt,qt,Ut,pt,yt);break;case nr:po(wt,qt,Ut,pt,yt);break;case mo:po(wt,qt,Ut,pt,yt),go(pt,yt,0,Ut,1,0);break;case ya:To(wt,qt,Ut,pt,yt);break;case _a:Dt(wt,qt,Ut,pt,yt,1);break;case vo:Dt(wt,qt,Ut,pt,yt,1),go(pt,yt,0,Ut,1,0);break;case $s:Dt(wt,qt,Ut,pt,yt,0);break;case Vs:Dt(wt,qt,Ut,pt,yt,0),go(pt,yt,1,Ut,1,0);break;case Go:Qs(wt,qt,Ut,pt,yt);break;case a:Qs(wt,qt,Ut,pt,yt),ri(pt,yt,Ut,1,0);break;case mc:ys(wt,qt,Ut,pt,yt);break;default:t(0)}ke+=Be,dt+=Bt}b.Ma+=Ee}else alert("todo:EmitRescaledRowsYUVA");t(b.Ma<=H.height)}}b.C=C,t(b.C<=b.i)}function xo(b){var C;if(0<b.ua)return 0;for(C=0;C<b.Wb;++C){var H=b.Ya[C].G,ie=b.Ya[C].H;if(0<H[1][ie[1]+0].g||0<H[2][ie[2]+0].g||0<H[3][ie[3]+0].g)return 0}return 1}function _i(b,C,H,ie,_e,Ee){if(b.Z!=0){var Ae=b.qd,ke=b.rd;for(t(Yr[b.Z]!=null);C<H;++C)Yr[b.Z](Ae,ke,ie,_e,ie,_e,Ee),Ae=ie,ke=_e,_e+=Ee;b.qd=Ae,b.rd=ke}}function bi(b,C){var H=b.l.ma,ie=H.Z==0||H.Z==1?b.l.j:b.C;if(ie=b.C<ie?ie:b.C,t(C<=b.l.o),C>ie){var _e=b.l.width,Ee=H.ca,Ae=H.tb+_e*ie,ke=b.V,Be=b.Ba+b.c*ie,$e=b.gc;t(b.ab==1),t($e[0].hc==3),Ao($e[0],ie,C,ke,Be,Ee,Ae),_i(H,ie,C,Ee,Ae,_e)}b.C=b.Ma=C}function di(b,C,H,ie,_e,Ee,Ae){var ke=b.$/ie,Be=b.$%ie,$e=b.m,dt=b.s,Bt=H+b.$,Ot=Bt;_e=H+ie*_e;var wt=H+ie*Ee,qt=280+dt.ua,Ut=b.Pb?ke:16777216,pt=0<dt.ua?dt.Wa:null,yt=dt.wc,Jt=Bt<wt?bn(dt,Be,ke):null;t(b.C<Ee),t(wt<=_e);var fn=!1;e:for(;;){for(;fn||Bt<wt;){var en=0;if(ke>=Ut){var An=Bt-H;t((Ut=b).Pb),Ut.wd=Ut.m,Ut.xd=An,0<Ut.s.ua&&pe(Ut.s.Wa,Ut.s.vb),Ut=ke+Ft}if(Be&yt||(Jt=bn(dt,Be,ke)),t(Jt!=null),Jt.Qb&&(C[Bt]=Jt.qb,fn=!0),!fn)if(we($e),Jt.jc){en=$e,An=C;var Cn=Bt,Hn=Jt.pd[te(en)&Qi-1];t(Jt.jc),256>Hn.g?(ae(en,en.u+Hn.g),An[Cn]=Hn.value,en=0):(ae(en,en.u+Hn.g-256),t(256<=Hn.value),en=Hn.value),en==0&&(fn=!0)}else en=fi(Jt.G[0],Jt.H[0],$e);if($e.h)break;if(fn||256>en){if(!fn)if(Jt.nd)C[Bt]=(Jt.qb|en<<8)>>>0;else{if(we($e),fn=fi(Jt.G[1],Jt.H[1],$e),we($e),An=fi(Jt.G[2],Jt.H[2],$e),Cn=fi(Jt.G[3],Jt.H[3],$e),$e.h)break;C[Bt]=(Cn<<24|fn<<16|en<<8|An)>>>0}if(fn=!1,++Bt,++Be>=ie&&(Be=0,++ke,Ae!=null&&ke<=Ee&&!(ke%16)&&Ae(b,ke),pt!=null))for(;Ot<Bt;)en=C[Ot++],pt.X[(506832829*en&4294967295)>>>pt.Mb]=en}else if(280>en){if(en=oo(en-256,$e),An=fi(Jt.G[4],Jt.H[4],$e),we($e),An=jo(ie,An=oo(An,$e)),$e.h)break;if(Bt-H<An||_e-Bt<en)break e;for(Cn=0;Cn<en;++Cn)C[Bt+Cn]=C[Bt+Cn-An];for(Bt+=en,Be+=en;Be>=ie;)Be-=ie,++ke,Ae!=null&&ke<=Ee&&!(ke%16)&&Ae(b,ke);if(t(Bt<=_e),Be&yt&&(Jt=bn(dt,Be,ke)),pt!=null)for(;Ot<Bt;)en=C[Ot++],pt.X[(506832829*en&4294967295)>>>pt.Mb]=en}else{if(!(en<qt))break e;for(fn=en-280,t(pt!=null);Ot<Bt;)en=C[Ot++],pt.X[(506832829*en&4294967295)>>>pt.Mb]=en;en=Bt,t(!(fn>>>(An=pt).Xa)),C[en]=An.X[fn],fn=!0}fn||t($e.h==se($e))}if(b.Pb&&$e.h&&Bt<_e)t(b.m.h),b.a=5,b.m=b.wd,b.$=b.xd,0<b.s.ua&&pe(b.s.vb,b.s.Wa);else{if($e.h)break e;Ae!=null&&Ae(b,ke>Ee?Ee:ke),b.a=0,b.$=Bt-H}return 1}return b.a=3,0}function Ri(b){t(b!=null),b.vc=null,b.yc=null,b.Ya=null;var C=b.Wa;C!=null&&(C.X=null),b.vb=null,t(b!=null)}function Lo(){var b=new rl;return b==null?null:(b.a=0,b.xb=Xl,gn("Predictor","VP8LPredictors"),gn("Predictor","VP8LPredictors_C"),gn("PredictorAdd","VP8LPredictorsAdd"),gn("PredictorAdd","VP8LPredictorsAdd_C"),Ku=dn,ma=et,ko=rt,po=Vt,Qs=Xt,ys=ft,To=Ue,V.VP8LMapColor32b=pa,V.VP8LMapColor8b=Mo,b)}function yr(b,C,H,ie,_e){var Ee=1,Ae=[b],ke=[C],Be=ie.m,$e=ie.s,dt=null,Bt=0;e:for(;;){if(H)for(;Ee&&Ce(Be,1);){var Ot=Ae,wt=ke,qt=ie,Ut=1,pt=qt.m,yt=qt.gc[qt.ab],Jt=Ce(pt,2);if(qt.Oc&1<<Jt)Ee=0;else{switch(qt.Oc|=1<<Jt,yt.hc=Jt,yt.Ea=Ot[0],yt.nc=wt[0],yt.K=[null],++qt.ab,t(4>=qt.ab),Jt){case 0:case 1:yt.b=Ce(pt,3)+2,Ut=yr(Ke(yt.Ea,yt.b),Ke(yt.nc,yt.b),0,qt,yt.K),yt.K=yt.K[0];break;case 3:var fn,en=Ce(pt,8)+1,An=16<en?0:4<en?1:2<en?2:3;if(Ot[0]=Ke(yt.Ea,An),yt.b=An,fn=Ut=yr(en,1,0,qt,yt.K)){var Cn,Hn=en,l=yt,f=1<<(8>>l.b),m=s(f);if(m==null)fn=0;else{var w=l.K[0],E=l.w;for(m[0]=l.K[0][0],Cn=1;Cn<1*Hn;++Cn)m[Cn]=Ge(w[E+Cn],m[Cn-1]);for(;Cn<4*f;++Cn)m[Cn]=0;l.K[0]=null,l.K[0]=m,fn=1}}Ut=fn;break;case 2:break;default:t(0)}Ee=Ut}}if(Ae=Ae[0],ke=ke[0],Ee&&Ce(Be,1)&&!(Ee=1<=(Bt=Ce(Be,4))&&11>=Bt)){ie.a=3;break e}var R;if(R=Ee)t:{var X,ne,ce,xe=ie,We=Ae,je=ke,vt=Bt,kt=H,Yt=xe.m,_n=xe.s,Ln=[null],Qn=1,qe=0,nt=Pt[vt];n:for(;;){if(kt&&Ce(Yt,1)){var ht=Ce(Yt,3)+2,Nt=Ke(We,ht),bt=Ke(je,ht),Tt=Nt*bt;if(!yr(Nt,bt,0,xe,Ln))break n;for(Ln=Ln[0],_n.xc=ht,X=0;X<Tt;++X){var ge=Ln[X]>>8&65535;Ln[X]=ge,ge>=Qn&&(Qn=ge+1)}}if(Yt.h)break n;for(ne=0;5>ne;++ne){var Pe=z[ne];!ne&&0<vt&&(Pe+=1<<vt),qe<Pe&&(qe=Pe)}var Ne=o(Qn*nt,D),Oe=Qn,Ie=o(Oe,I);if(Ie==null)var Fe=null;else t(65536>=Oe),Fe=Ie;var lt=s(qe);if(Fe==null||lt==null||Ne==null){xe.a=1;break n}var ut=Ne;for(X=ce=0;X<Qn;++X){var gt=Fe[X],Lt=gt.G,St=gt.H,tn=0,Dn=1,jn=0;for(ne=0;5>ne;++ne){Pe=z[ne],Lt[ne]=ut,St[ne]=ce,!ne&&0<vt&&(Pe+=1<<vt);i:{var Gn,Xr=Pe,ai=xe,Ir=lt,mi=ut,os=ce,xu=0,sa=ai.m,Sh=Ce(sa,1);if(i(Ir,0,0,Xr),Sh){var $a=Ce(sa,1)+1,Xu=Ce(sa,1),aa=Ce(sa,Xu==0?1:8);Ir[aa]=1,$a==2&&(Ir[aa=Ce(sa,8)]=1);var No=1}else{var Zi=s(19),df=Ce(sa,4)+4;if(19<df){ai.a=3;var Eh=0;break i}for(Gn=0;Gn<df;++Gn)Zi[Se[Gn]]=Ce(sa,3);var Ch=void 0,Ph=void 0,pf=ai,Vr=Zi,gf=Xr,Dp=Ir,_c=0,Lu=pf.m,Ip=8,Rp=o(128,D);r:for(;$(Rp,0,7,Vr,19);){if(Ce(Lu,1)){var al=2+2*Ce(Lu,3);if((Ch=2+Ce(Lu,al))>gf)break r}else Ch=gf;for(Ph=0;Ph<gf&&Ch--;){we(Lu);var Fp=Rp[0+(127&te(Lu))];ae(Lu,Lu.u+Fp.g);var Su=Fp.value;if(16>Su)Dp[Ph++]=Su,Su!=0&&(Ip=Su);else{var md=Su==16,vd=Su-16,jp=S[vd],wa=Ce(Lu,p[vd])+jp;if(Ph+wa>gf)break r;for(var Ju=md?Ip:0;0<wa--;)Dp[Ph++]=Ju}}_c=1;break r}_c||(pf.a=3),No=_c}(No=No&&!sa.h)&&(xu=$(mi,os,8,Ir,Xr)),No&&xu!=0?Eh=xu:(ai.a=3,Eh=0)}if(Eh==0)break n;if(Dn&&re[ne]==1&&(Dn=ut[ce].g==0),tn+=ut[ce].g,ce+=Eh,3>=ne){var bc,mf=lt[0];for(bc=1;bc<Pe;++bc)lt[bc]>mf&&(mf=lt[bc]);jn+=mf}}if(gt.nd=Dn,gt.Qb=0,Dn&&(gt.qb=(Lt[3][St[3]+0].value<<24|Lt[1][St[1]+0].value<<16|Lt[2][St[2]+0].value)>>>0,tn==0&&256>Lt[0][St[0]+0].value&&(gt.Qb=1,gt.qb+=Lt[0][St[0]+0].value<<8)),gt.jc=!gt.Qb&&6>jn,gt.jc){var wc,Jl=gt;for(wc=0;wc<Qi;++wc){var Ql=wc,Eu=Jl.pd[Ql],Wc=Jl.G[0][Jl.H[0]+Ql];256<=Wc.value?(Eu.g=Wc.g+256,Eu.value=Wc.value):(Eu.g=0,Eu.value=0,Ql>>=Wn(Wc,8,Eu),Ql>>=Wn(Jl.G[1][Jl.H[1]+Ql],16,Eu),Ql>>=Wn(Jl.G[2][Jl.H[2]+Ql],0,Eu),Wn(Jl.G[3][Jl.H[3]+Ql],24,Eu))}}}_n.vc=Ln,_n.Wb=Qn,_n.Ya=Fe,_n.yc=Ne,R=1;break t}R=0}if(!(Ee=R)){ie.a=3;break e}if(0<Bt){if($e.ua=1<<Bt,!me($e.Wa,Bt)){ie.a=1,Ee=0;break e}}else $e.ua=0;var Ah=ie,Cu=Ae,sm=ke,eu=Ah.s,vf=eu.xc;if(Ah.c=Cu,Ah.i=sm,eu.md=Ke(Cu,vf),eu.wc=vf==0?-1:(1<<vf)-1,H){ie.xb=xh;break e}if((dt=s(Ae*ke))==null){ie.a=1,Ee=0;break e}Ee=(Ee=di(ie,dt,0,Ae,ke,ke,null))&&!Be.h;break e}return Ee?(_e!=null?_e[0]=dt:(t(dt==null),t(H)),ie.$=0,H||Ri($e)):Ri($e),Ee}function ds(b,C){var H=b.c*b.i,ie=H+C+16*C;return t(b.c<=C),b.V=s(ie),b.V==null?(b.Ta=null,b.Ua=0,b.a=1,0):(b.Ta=b.V,b.Ua=b.Ba+H+C,1)}function xl(b,C){var H=b.C,ie=C-H,_e=b.V,Ee=b.Ba+b.c*H;for(t(C<=b.l.o);0<ie;){var Ae=16<ie?16:ie,ke=b.l.ma,Be=b.l.width,$e=Be*Ae,dt=ke.ca,Bt=ke.tb+Be*H,Ot=b.Ta,wt=b.Ua;tr(b,Ae,_e,Ee),Wi(Ot,wt,dt,Bt,$e),_i(ke,H,H+Ae,dt,Bt,Be),ie-=Ae,_e+=Ae*b.c,H+=Ae}t(H==C),b.C=b.Ma=C}function Ds(){this.ub=this.yd=this.td=this.Rb=0}function jr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Mn(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Fi(){this.Yb=function(){var b=[];return function C(H,ie,_e){for(var Ee=_e[ie],Ae=0;Ae<Ee&&(H.push(_e.length>ie+1?[]:0),!(_e.length<ie+1));Ae++)C(H[Ae],ie+1,_e)}(b,0,[3,11]),b}()}function pi(){this.jb=s(3),this.Wc=u([4,8],Fi),this.Xc=u([4,17],Fi)}function ji(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Ni(){this.ld=this.La=this.dd=this.tc=0}function ps(){this.Na=this.la=0}function Ls(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function wr(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ss(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ni),this.Y=0,this.ya=Array(new wr),this.aa=0,this.l=new xr}function Ti(){this.y=s(16),this.f=s(8),this.ea=s(8)}function zo(){this.cb=this.a=0,this.sc="",this.m=new Xe,this.Od=new Ds,this.Kc=new jr,this.ed=new ji,this.Qa=new Mn,this.Ic=this.$c=this.Aa=0,this.D=new Ss,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Xe),this.ia=0,this.pb=o(4,Ls),this.Pa=new pi,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ti),this.Hd=0,this.rb=Array(new ps),this.sb=0,this.wa=Array(new Ni),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new wr),this.L=this.aa=0,this.gd=u([4,2],Ni),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function xr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function sn(){var b=new zo;return b!=null&&(b.a=0,b.sc="OK",b.cb=0,b.Xb=0,Vn||(Vn=zi)),b}function jt(b,C,H){return b.a==0&&(b.a=C,b.sc=H,b.cb=0),0}function Cr(b,C,H){return 3<=H&&b[C+0]==157&&b[C+1]==1&&b[C+2]==42}function Di(b,C){if(b==null)return 0;if(b.a=0,b.sc="OK",C==null)return jt(b,2,"null VP8Io passed to VP8GetHeaders()");var H=C.data,ie=C.w,_e=C.ha;if(4>_e)return jt(b,7,"Truncated header.");var Ee=H[ie+0]|H[ie+1]<<8|H[ie+2]<<16,Ae=b.Od;if(Ae.Rb=!(1&Ee),Ae.td=Ee>>1&7,Ae.yd=Ee>>4&1,Ae.ub=Ee>>5,3<Ae.td)return jt(b,3,"Incorrect keyframe parameters.");if(!Ae.yd)return jt(b,4,"Frame not displayable.");ie+=3,_e-=3;var ke=b.Kc;if(Ae.Rb){if(7>_e)return jt(b,7,"cannot parse picture header");if(!Cr(H,ie,_e))return jt(b,3,"Bad code word");ke.c=16383&(H[ie+4]<<8|H[ie+3]),ke.Td=H[ie+4]>>6,ke.i=16383&(H[ie+6]<<8|H[ie+5]),ke.Ud=H[ie+6]>>6,ie+=7,_e-=7,b.za=ke.c+15>>4,b.Ub=ke.i+15>>4,C.width=ke.c,C.height=ke.i,C.Da=0,C.j=0,C.v=0,C.va=C.width,C.o=C.height,C.da=0,C.ib=C.width,C.hb=C.height,C.U=C.width,C.T=C.height,i((Ee=b.Pa).jb,0,255,Ee.jb.length),t((Ee=b.Qa)!=null),Ee.Cb=0,Ee.Bb=0,Ee.Fb=1,i(Ee.Zb,0,0,Ee.Zb.length),i(Ee.Lb,0,0,Ee.Lb)}if(Ae.ub>_e)return jt(b,7,"bad partition length");W(Ee=b.m,H,ie,Ae.ub),ie+=Ae.ub,_e-=Ae.ub,Ae.Rb&&(ke.Ld=Q(Ee),ke.Kd=Q(Ee)),ke=b.Qa;var Be,$e=b.Pa;if(t(Ee!=null),t(ke!=null),ke.Cb=Q(Ee),ke.Cb){if(ke.Bb=Q(Ee),Q(Ee)){for(ke.Fb=Q(Ee),Be=0;4>Be;++Be)ke.Zb[Be]=Q(Ee)?K(Ee,7):0;for(Be=0;4>Be;++Be)ke.Lb[Be]=Q(Ee)?K(Ee,6):0}if(ke.Bb)for(Be=0;3>Be;++Be)$e.jb[Be]=Q(Ee)?G(Ee,8):255}else ke.Bb=0;if(Ee.Ka)return jt(b,3,"cannot parse segment header");if((ke=b.ed).zd=Q(Ee),ke.Tb=G(Ee,6),ke.wb=G(Ee,3),ke.Pc=Q(Ee),ke.Pc&&Q(Ee)){for($e=0;4>$e;++$e)Q(Ee)&&(ke.vd[$e]=K(Ee,6));for($e=0;4>$e;++$e)Q(Ee)&&(ke.od[$e]=K(Ee,6))}if(b.L=ke.Tb==0?0:ke.zd?1:2,Ee.Ka)return jt(b,3,"cannot parse filter header");var dt=_e;if(_e=Be=ie,ie=Be+dt,ke=dt,b.Xb=(1<<G(b.m,2))-1,dt<3*($e=b.Xb))H=7;else{for(Be+=3*$e,ke-=3*$e,dt=0;dt<$e;++dt){var Bt=H[_e+0]|H[_e+1]<<8|H[_e+2]<<16;Bt>ke&&(Bt=ke),W(b.Jc[+dt],H,Be,Bt),Be+=Bt,ke-=Bt,_e+=3}W(b.Jc[+$e],H,Be,ke),H=Be<ie?0:5}if(H!=0)return jt(b,H,"cannot parse partitions");for(H=G(Be=b.m,7),_e=Q(Be)?K(Be,4):0,ie=Q(Be)?K(Be,4):0,ke=Q(Be)?K(Be,4):0,$e=Q(Be)?K(Be,4):0,Be=Q(Be)?K(Be,4):0,dt=b.Qa,Bt=0;4>Bt;++Bt){if(dt.Cb){var Ot=dt.Zb[Bt];dt.Fb||(Ot+=H)}else{if(0<Bt){b.pb[Bt]=b.pb[0];continue}Ot=H}var wt=b.pb[Bt];wt.Sc[0]=nn[Ar(Ot+_e,127)],wt.Sc[1]=Tn[Ar(Ot+0,127)],wt.Eb[0]=2*nn[Ar(Ot+ie,127)],wt.Eb[1]=101581*Tn[Ar(Ot+ke,127)]>>16,8>wt.Eb[1]&&(wt.Eb[1]=8),wt.Qc[0]=nn[Ar(Ot+$e,117)],wt.Qc[1]=Tn[Ar(Ot+Be,127)],wt.lc=Ot+Be}if(!Ae.Rb)return jt(b,4,"Not a key frame.");for(Q(Ee),Ae=b.Pa,H=0;4>H;++H){for(_e=0;8>_e;++_e)for(ie=0;3>ie;++ie)for(ke=0;11>ke;++ke)$e=ue(Ee,rs[H][_e][ie][ke])?G(Ee,8):yo[H][_e][ie][ke],Ae.Wc[H][_e].Yb[ie][ke]=$e;for(_e=0;17>_e;++_e)Ae.Xc[H][_e]=Ae.Wc[H][vc[_e]]}return b.kc=Q(Ee),b.kc&&(b.Bd=G(Ee,8)),b.cb=1}function zi(b,C,H,ie,_e,Ee,Ae){var ke=C[_e].Yb[H];for(H=0;16>_e;++_e){if(!ue(b,ke[H+0]))return _e;for(;!ue(b,ke[H+1]);)if(ke=C[++_e].Yb[0],H=0,_e==16)return 16;var Be=C[_e+1].Yb;if(ue(b,ke[H+2])){var $e=b,dt=0;if(ue($e,(Ot=ke)[(Bt=H)+3]))if(ue($e,Ot[Bt+6])){for(ke=0,Bt=2*(dt=ue($e,Ot[Bt+8]))+(Ot=ue($e,Ot[Bt+9+dt])),dt=0,Ot=Er[Bt];Ot[ke];++ke)dt+=dt+ue($e,Ot[ke]);dt+=3+(8<<Bt)}else ue($e,Ot[Bt+7])?(dt=7+2*ue($e,165),dt+=ue($e,145)):dt=5+ue($e,159);else dt=ue($e,Ot[Bt+4])?3+ue($e,Ot[Bt+5]):2;ke=Be[2]}else dt=1,ke=Be[1];Be=Ae+to[_e],0>($e=b).b&&fe($e);var Bt,Ot=$e.b,wt=(Bt=$e.Ca>>1)-($e.I>>Ot)>>31;--$e.b,$e.Ca+=wt,$e.Ca|=1,$e.I-=(Bt+1&wt)<<Ot,Ee[Be]=((dt^wt)-wt)*ie[(0<_e)+0]}return 16}function Es(b){var C=b.rb[b.sb-1];C.la=0,C.Na=0,i(b.zc,0,0,b.zc.length),b.ja=0}function sr(b,C){if(b==null)return 0;if(C==null)return jt(b,2,"NULL VP8Io parameter in VP8Decode().");if(!b.cb&&!Di(b,C))return 0;if(t(b.cb),C.ac==null||C.ac(C)){C.ob&&(b.L=0);var H=ba[b.L];if(b.L==2?(b.yb=0,b.zb=0):(b.yb=C.v-H>>4,b.zb=C.j-H>>4,0>b.yb&&(b.yb=0),0>b.zb&&(b.zb=0)),b.Va=C.o+15+H>>4,b.Hb=C.va+15+H>>4,b.Hb>b.za&&(b.Hb=b.za),b.Va>b.Ub&&(b.Va=b.Ub),0<b.L){var ie=b.ed;for(H=0;4>H;++H){var _e;if(b.Qa.Cb){var Ee=b.Qa.Lb[H];b.Qa.Fb||(Ee+=ie.Tb)}else Ee=ie.Tb;for(_e=0;1>=_e;++_e){var Ae=b.gd[H][_e],ke=Ee;if(ie.Pc&&(ke+=ie.vd[0],_e&&(ke+=ie.od[0])),0<(ke=0>ke?0:63<ke?63:ke)){var Be=ke;0<ie.wb&&(Be=4<ie.wb?Be>>2:Be>>1)>9-ie.wb&&(Be=9-ie.wb),1>Be&&(Be=1),Ae.dd=Be,Ae.tc=2*ke+Be,Ae.ld=40<=ke?2:15<=ke?1:0}else Ae.tc=0;Ae.La=_e}}}H=0}else jt(b,6,"Frame setup failed"),H=b.a;if(H=H==0){if(H){b.$c=0,0<b.Aa||(b.Ic=hf);e:{H=b.Ic,ie=4*(Be=b.za);var $e=32*Be,dt=Be+1,Bt=0<b.L?Be*(0<b.Aa?2:1):0,Ot=(b.Aa==2?2:1)*Be;if((Ae=ie+832+(_e=3*(16*H+ba[b.L])/2*$e)+(Ee=b.Fa!=null&&0<b.Fa.length?b.Kc.c*b.Kc.i:0))!=Ae)H=0;else{if(Ae>b.Vb){if(b.Vb=0,b.Ec=s(Ae),b.Fc=0,b.Ec==null){H=jt(b,1,"no memory during frame initialization.");break e}b.Vb=Ae}Ae=b.Ec,ke=b.Fc,b.Ac=Ae,b.Bc=ke,ke+=ie,b.Gd=o($e,Ti),b.Hd=0,b.rb=o(dt+1,ps),b.sb=1,b.wa=Bt?o(Bt,Ni):null,b.Y=0,b.D.Nb=0,b.D.wa=b.wa,b.D.Y=b.Y,0<b.Aa&&(b.D.Y+=Be),t(!0),b.oc=Ae,b.pc=ke,ke+=832,b.ya=o(Ot,wr),b.aa=0,b.D.ya=b.ya,b.D.aa=b.aa,b.Aa==2&&(b.D.aa+=Be),b.R=16*Be,b.B=8*Be,Be=($e=ba[b.L])*b.R,$e=$e/2*b.B,b.sa=Ae,b.ta=ke+Be,b.qa=b.sa,b.ra=b.ta+16*H*b.R+$e,b.Ha=b.qa,b.Ia=b.ra+8*H*b.B+$e,b.$c=0,ke+=_e,b.mb=Ee?Ae:null,b.nb=Ee?ke:null,t(ke+Ee<=b.Fc+b.Vb),Es(b),i(b.Ac,b.Bc,0,ie),H=1}}if(H){if(C.ka=0,C.y=b.sa,C.O=b.ta,C.f=b.qa,C.N=b.ra,C.ea=b.Ha,C.Vd=b.Ia,C.fa=b.R,C.Rc=b.B,C.F=null,C.J=0,!bu){for(H=-255;255>=H;++H)gi[255+H]=0>H?-H:H;for(H=-1020;1020>=H;++H)_s[1020+H]=-128>H?-128:127<H?127:H;for(H=-112;112>=H;++H)ts[112+H]=-16>H?-16:15<H?15:H;for(H=-255;510>=H;++H)As[255+H]=0>H?0:255<H?255:H;bu=1}_t=Ks,Ht=Eo,Pn=so,Un=vi,lr=Qo,Mt=So,xi=Kl,ni=Ys,Bl=Ps,Ho=kl,Li=Al,ea=Ml,va=Qr,ta=Zu,na=Vi,ra=Xn,Dr=Hi,Us=nl,Hs[0]=$r,Hs[1]=ha,Hs[2]=dr,Hs[3]=Rs,Hs[4]=vu,Hs[5]=el,Hs[6]=Qa,Hs[7]=Fs,Hs[8]=yu,Hs[9]=Ra,oa[0]=Sl,oa[1]=Ll,oa[2]=Or,oa[3]=ho,oa[4]=ao,oa[5]=qu,oa[6]=ql,Ms[0]=Fa,Ms[1]=Cs,Ms[2]=El,Ms[3]=cr,Ms[4]=Cl,Ms[5]=Wu,Ms[6]=Wl,H=1}else H=0}H&&(H=function(wt,qt){for(wt.M=0;wt.M<wt.Va;++wt.M){var Ut,pt=wt.Jc[wt.M&wt.Xb],yt=wt.m,Jt=wt;for(Ut=0;Ut<Jt.za;++Ut){var fn=yt,en=Jt,An=en.Ac,Cn=en.Bc+4*Ut,Hn=en.zc,l=en.ya[en.aa+Ut];if(en.Qa.Bb?l.$b=ue(fn,en.Pa.jb[0])?2+ue(fn,en.Pa.jb[2]):ue(fn,en.Pa.jb[1]):l.$b=0,en.kc&&(l.Ad=ue(fn,en.Bd)),l.Za=!ue(fn,145)+0,l.Za){var f=l.Ob,m=0;for(en=0;4>en;++en){var w,E=Hn[0+en];for(w=0;4>w;++w){E=Si[An[Cn+w]][E];for(var R=Bi[ue(fn,E[0])];0<R;)R=Bi[2*R+ue(fn,E[R])];E=-R,An[Cn+w]=E}r(f,m,An,Cn,4),m+=4,Hn[0+en]=E}}else E=ue(fn,156)?ue(fn,128)?1:3:ue(fn,163)?2:0,l.Ob[0]=E,i(An,Cn,E,4),i(Hn,0,E,4);l.Dd=ue(fn,142)?ue(fn,114)?ue(fn,183)?1:3:2:0}if(Jt.m.Ka)return jt(wt,7,"Premature end-of-partition0 encountered.");for(;wt.ja<wt.za;++wt.ja){if(Jt=pt,fn=(yt=wt).rb[yt.sb-1],An=yt.rb[yt.sb+yt.ja],Ut=yt.ya[yt.aa+yt.ja],Cn=yt.kc?Ut.Ad:0)fn.la=An.la=0,Ut.Za||(fn.Na=An.Na=0),Ut.Hc=0,Ut.Gc=0,Ut.ia=0;else{var X,ne;if(fn=An,An=Jt,Cn=yt.Pa.Xc,Hn=yt.ya[yt.aa+yt.ja],l=yt.pb[Hn.$b],en=Hn.ad,f=0,m=yt.rb[yt.sb-1],E=w=0,i(en,f,0,384),Hn.Za)var ce=0,xe=Cn[3];else{R=s(16);var We=fn.Na+m.Na;if(We=Vn(An,Cn[1],We,l.Eb,0,R,0),fn.Na=m.Na=(0<We)+0,1<We)_t(R,0,en,f);else{var je=R[0]+3>>3;for(R=0;256>R;R+=16)en[f+R]=je}ce=1,xe=Cn[0]}var vt=15&fn.la,kt=15&m.la;for(R=0;4>R;++R){var Yt=1&kt;for(je=ne=0;4>je;++je)vt=vt>>1|(Yt=(We=Vn(An,xe,We=Yt+(1&vt),l.Sc,ce,en,f))>ce)<<7,ne=ne<<2|(3<We?3:1<We?2:en[f+0]!=0),f+=16;vt>>=4,kt=kt>>1|Yt<<7,w=(w<<8|ne)>>>0}for(xe=vt,ce=kt>>4,X=0;4>X;X+=2){for(ne=0,vt=fn.la>>4+X,kt=m.la>>4+X,R=0;2>R;++R){for(Yt=1&kt,je=0;2>je;++je)We=Yt+(1&vt),vt=vt>>1|(Yt=0<(We=Vn(An,Cn[2],We,l.Qc,0,en,f)))<<3,ne=ne<<2|(3<We?3:1<We?2:en[f+0]!=0),f+=16;vt>>=2,kt=kt>>1|Yt<<5}E|=ne<<4*X,xe|=vt<<4<<X,ce|=(240&kt)<<X}fn.la=xe,m.la=ce,Hn.Hc=w,Hn.Gc=E,Hn.ia=43690&E?0:l.ia,Cn=!(w|E)}if(0<yt.L&&(yt.wa[yt.Y+yt.ja]=yt.gd[Ut.$b][Ut.Za],yt.wa[yt.Y+yt.ja].La|=!Cn),Jt.Ka)return jt(wt,7,"Premature end-of-file encountered.")}if(Es(wt),yt=qt,Jt=1,Ut=(pt=wt).D,fn=0<pt.L&&pt.M>=pt.zb&&pt.M<=pt.Va,pt.Aa==0)e:{if(Ut.M=pt.M,Ut.uc=fn,Yl(pt,Ut),Jt=1,Ut=(ne=pt.D).Nb,fn=(E=ba[pt.L])*pt.R,An=E/2*pt.B,R=16*Ut*pt.R,je=8*Ut*pt.B,Cn=pt.sa,Hn=pt.ta-fn+R,l=pt.qa,en=pt.ra-An+je,f=pt.Ha,m=pt.Ia-An+je,kt=(vt=ne.M)==0,w=vt>=pt.Va-1,pt.Aa==2&&Yl(pt,ne),ne.uc)for(Yt=(We=pt).D.M,t(We.D.uc),ne=We.yb;ne<We.Hb;++ne){ce=ne,xe=Yt;var _n=(Ln=(Pe=We).D).Nb;X=Pe.R;var Ln=Ln.wa[Ln.Y+ce],Qn=Pe.sa,qe=Pe.ta+16*_n*X+16*ce,nt=Ln.dd,ht=Ln.tc;if(ht!=0)if(t(3<=ht),Pe.L==1)0<ce&&ra(Qn,qe,X,ht+4),Ln.La&&Us(Qn,qe,X,ht),0<xe&&na(Qn,qe,X,ht+4),Ln.La&&Dr(Qn,qe,X,ht);else{var Nt=Pe.B,bt=Pe.qa,Tt=Pe.ra+8*_n*Nt+8*ce,ge=Pe.Ha,Pe=Pe.Ia+8*_n*Nt+8*ce;_n=Ln.ld,0<ce&&(ni(Qn,qe,X,ht+4,nt,_n),Ho(bt,Tt,ge,Pe,Nt,ht+4,nt,_n)),Ln.La&&(ea(Qn,qe,X,ht,nt,_n),ta(bt,Tt,ge,Pe,Nt,ht,nt,_n)),0<xe&&(xi(Qn,qe,X,ht+4,nt,_n),Bl(bt,Tt,ge,Pe,Nt,ht+4,nt,_n)),Ln.La&&(Li(Qn,qe,X,ht,nt,_n),va(bt,Tt,ge,Pe,Nt,ht,nt,_n))}}if(pt.ia&&alert("todo:DitherRow"),yt.put!=null){if(ne=16*vt,vt=16*(vt+1),kt?(yt.y=pt.sa,yt.O=pt.ta+R,yt.f=pt.qa,yt.N=pt.ra+je,yt.ea=pt.Ha,yt.W=pt.Ia+je):(ne-=E,yt.y=Cn,yt.O=Hn,yt.f=l,yt.N=en,yt.ea=f,yt.W=m),w||(vt-=E),vt>yt.o&&(vt=yt.o),yt.F=null,yt.J=null,pt.Fa!=null&&0<pt.Fa.length&&ne<vt&&(yt.J=Gi(pt,yt,ne,vt-ne),yt.F=pt.mb,yt.F==null&&yt.F.length==0)){Jt=jt(pt,3,"Could not decode alpha data.");break e}ne<yt.j&&(E=yt.j-ne,ne=yt.j,t(!(1&E)),yt.O+=pt.R*E,yt.N+=pt.B*(E>>1),yt.W+=pt.B*(E>>1),yt.F!=null&&(yt.J+=yt.width*E)),ne<vt&&(yt.O+=yt.v,yt.N+=yt.v>>1,yt.W+=yt.v>>1,yt.F!=null&&(yt.J+=yt.v),yt.ka=ne-yt.j,yt.U=yt.va-yt.v,yt.T=vt-ne,Jt=yt.put(yt))}Ut+1!=pt.Ic||w||(r(pt.sa,pt.ta-fn,Cn,Hn+16*pt.R,fn),r(pt.qa,pt.ra-An,l,en+8*pt.B,An),r(pt.Ha,pt.Ia-An,f,m+8*pt.B,An))}if(!Jt)return jt(wt,6,"Output aborted.")}return 1}(b,C)),C.bc!=null&&C.bc(C),H&=1}return H?(b.cb=0,H):0}function Lr(b,C,H,ie,_e){_e=b[C+H+32*ie]+(_e>>3),b[C+H+32*ie]=-256&_e?0>_e?0:255:_e}function Is(b,C,H,ie,_e,Ee){Lr(b,C,0,H,ie+_e),Lr(b,C,1,H,ie+Ee),Lr(b,C,2,H,ie-Ee),Lr(b,C,3,H,ie-_e)}function fr(b){return(20091*b>>16)+b}function Ui(b,C,H,ie){var _e,Ee=0,Ae=s(16);for(_e=0;4>_e;++_e){var ke=b[C+0]+b[C+8],Be=b[C+0]-b[C+8],$e=(35468*b[C+4]>>16)-fr(b[C+12]),dt=fr(b[C+4])+(35468*b[C+12]>>16);Ae[Ee+0]=ke+dt,Ae[Ee+1]=Be+$e,Ae[Ee+2]=Be-$e,Ae[Ee+3]=ke-dt,Ee+=4,C++}for(_e=Ee=0;4>_e;++_e)ke=(b=Ae[Ee+0]+4)+Ae[Ee+8],Be=b-Ae[Ee+8],$e=(35468*Ae[Ee+4]>>16)-fr(Ae[Ee+12]),Lr(H,ie,0,0,ke+(dt=fr(Ae[Ee+4])+(35468*Ae[Ee+12]>>16))),Lr(H,ie,1,0,Be+$e),Lr(H,ie,2,0,Be-$e),Lr(H,ie,3,0,ke-dt),Ee++,ie+=32}function So(b,C,H,ie){var _e=b[C+0]+4,Ee=35468*b[C+4]>>16,Ae=fr(b[C+4]),ke=35468*b[C+1]>>16;Is(H,ie,0,_e+Ae,b=fr(b[C+1]),ke),Is(H,ie,1,_e+Ee,b,ke),Is(H,ie,2,_e-Ee,b,ke),Is(H,ie,3,_e-Ae,b,ke)}function Eo(b,C,H,ie,_e){Ui(b,C,H,ie),_e&&Ui(b,C+16,H,ie+4)}function so(b,C,H,ie){Ht(b,C+0,H,ie,1),Ht(b,C+32,H,ie+128,1)}function vi(b,C,H,ie){var _e;for(b=b[C+0]+4,_e=0;4>_e;++_e)for(C=0;4>C;++C)Lr(H,ie,C,_e,b)}function Qo(b,C,H,ie){b[C+0]&&Un(b,C+0,H,ie),b[C+16]&&Un(b,C+16,H,ie+4),b[C+32]&&Un(b,C+32,H,ie+128),b[C+48]&&Un(b,C+48,H,ie+128+4)}function Ks(b,C,H,ie){var _e,Ee=s(16);for(_e=0;4>_e;++_e){var Ae=b[C+0+_e]+b[C+12+_e],ke=b[C+4+_e]+b[C+8+_e],Be=b[C+4+_e]-b[C+8+_e],$e=b[C+0+_e]-b[C+12+_e];Ee[0+_e]=Ae+ke,Ee[8+_e]=Ae-ke,Ee[4+_e]=$e+Be,Ee[12+_e]=$e-Be}for(_e=0;4>_e;++_e)Ae=(b=Ee[0+4*_e]+3)+Ee[3+4*_e],ke=Ee[1+4*_e]+Ee[2+4*_e],Be=Ee[1+4*_e]-Ee[2+4*_e],$e=b-Ee[3+4*_e],H[ie+0]=Ae+ke>>3,H[ie+16]=$e+Be>>3,H[ie+32]=Ae-ke>>3,H[ie+48]=$e-Be>>3,ie+=64}function co(b,C,H){var ie,_e=C-32,Ee=hi,Ae=255-b[_e-1];for(ie=0;ie<H;++ie){var ke,Be=Ee,$e=Ae+b[C-1];for(ke=0;ke<H;++ke)b[C+ke]=Be[$e+b[_e+ke]];C+=32}}function ha(b,C){co(b,C,4)}function Cs(b,C){co(b,C,8)}function Ll(b,C){co(b,C,16)}function Or(b,C){var H;for(H=0;16>H;++H)r(b,C+32*H,b,C-32,16)}function ho(b,C){var H;for(H=16;0<H;--H)i(b,C,b[C-1],16),C+=32}function $i(b,C,H){var ie;for(ie=0;16>ie;++ie)i(C,H+32*ie,b,16)}function Sl(b,C){var H,ie=16;for(H=0;16>H;++H)ie+=b[C-1+32*H]+b[C+H-32];$i(ie>>5,b,C)}function ao(b,C){var H,ie=8;for(H=0;16>H;++H)ie+=b[C-1+32*H];$i(ie>>4,b,C)}function qu(b,C){var H,ie=8;for(H=0;16>H;++H)ie+=b[C+H-32];$i(ie>>4,b,C)}function ql(b,C){$i(128,b,C)}function ar(b,C,H){return b+2*C+H+2>>2}function dr(b,C){var H,ie=C-32;for(ie=new Uint8Array([ar(b[ie-1],b[ie+0],b[ie+1]),ar(b[ie+0],b[ie+1],b[ie+2]),ar(b[ie+1],b[ie+2],b[ie+3]),ar(b[ie+2],b[ie+3],b[ie+4])]),H=0;4>H;++H)r(b,C+32*H,ie,0,ie.length)}function Rs(b,C){var H=b[C-1],ie=b[C-1+32],_e=b[C-1+64],Ee=b[C-1+96];Re(b,C+0,16843009*ar(b[C-1-32],H,ie)),Re(b,C+32,16843009*ar(H,ie,_e)),Re(b,C+64,16843009*ar(ie,_e,Ee)),Re(b,C+96,16843009*ar(_e,Ee,Ee))}function $r(b,C){var H,ie=4;for(H=0;4>H;++H)ie+=b[C+H-32]+b[C-1+32*H];for(ie>>=3,H=0;4>H;++H)i(b,C+32*H,ie,4)}function vu(b,C){var H=b[C-1+0],ie=b[C-1+32],_e=b[C-1+64],Ee=b[C-1-32],Ae=b[C+0-32],ke=b[C+1-32],Be=b[C+2-32],$e=b[C+3-32];b[C+0+96]=ar(ie,_e,b[C-1+96]),b[C+1+96]=b[C+0+64]=ar(H,ie,_e),b[C+2+96]=b[C+1+64]=b[C+0+32]=ar(Ee,H,ie),b[C+3+96]=b[C+2+64]=b[C+1+32]=b[C+0+0]=ar(Ae,Ee,H),b[C+3+64]=b[C+2+32]=b[C+1+0]=ar(ke,Ae,Ee),b[C+3+32]=b[C+2+0]=ar(Be,ke,Ae),b[C+3+0]=ar($e,Be,ke)}function Qa(b,C){var H=b[C+1-32],ie=b[C+2-32],_e=b[C+3-32],Ee=b[C+4-32],Ae=b[C+5-32],ke=b[C+6-32],Be=b[C+7-32];b[C+0+0]=ar(b[C+0-32],H,ie),b[C+1+0]=b[C+0+32]=ar(H,ie,_e),b[C+2+0]=b[C+1+32]=b[C+0+64]=ar(ie,_e,Ee),b[C+3+0]=b[C+2+32]=b[C+1+64]=b[C+0+96]=ar(_e,Ee,Ae),b[C+3+32]=b[C+2+64]=b[C+1+96]=ar(Ee,Ae,ke),b[C+3+64]=b[C+2+96]=ar(Ae,ke,Be),b[C+3+96]=ar(ke,Be,Be)}function el(b,C){var H=b[C-1+0],ie=b[C-1+32],_e=b[C-1+64],Ee=b[C-1-32],Ae=b[C+0-32],ke=b[C+1-32],Be=b[C+2-32],$e=b[C+3-32];b[C+0+0]=b[C+1+64]=Ee+Ae+1>>1,b[C+1+0]=b[C+2+64]=Ae+ke+1>>1,b[C+2+0]=b[C+3+64]=ke+Be+1>>1,b[C+3+0]=Be+$e+1>>1,b[C+0+96]=ar(_e,ie,H),b[C+0+64]=ar(ie,H,Ee),b[C+0+32]=b[C+1+96]=ar(H,Ee,Ae),b[C+1+32]=b[C+2+96]=ar(Ee,Ae,ke),b[C+2+32]=b[C+3+96]=ar(Ae,ke,Be),b[C+3+32]=ar(ke,Be,$e)}function Fs(b,C){var H=b[C+0-32],ie=b[C+1-32],_e=b[C+2-32],Ee=b[C+3-32],Ae=b[C+4-32],ke=b[C+5-32],Be=b[C+6-32],$e=b[C+7-32];b[C+0+0]=H+ie+1>>1,b[C+1+0]=b[C+0+64]=ie+_e+1>>1,b[C+2+0]=b[C+1+64]=_e+Ee+1>>1,b[C+3+0]=b[C+2+64]=Ee+Ae+1>>1,b[C+0+32]=ar(H,ie,_e),b[C+1+32]=b[C+0+96]=ar(ie,_e,Ee),b[C+2+32]=b[C+1+96]=ar(_e,Ee,Ae),b[C+3+32]=b[C+2+96]=ar(Ee,Ae,ke),b[C+3+64]=ar(Ae,ke,Be),b[C+3+96]=ar(ke,Be,$e)}function Ra(b,C){var H=b[C-1+0],ie=b[C-1+32],_e=b[C-1+64],Ee=b[C-1+96];b[C+0+0]=H+ie+1>>1,b[C+2+0]=b[C+0+32]=ie+_e+1>>1,b[C+2+32]=b[C+0+64]=_e+Ee+1>>1,b[C+1+0]=ar(H,ie,_e),b[C+3+0]=b[C+1+32]=ar(ie,_e,Ee),b[C+3+32]=b[C+1+64]=ar(_e,Ee,Ee),b[C+3+64]=b[C+2+64]=b[C+0+96]=b[C+1+96]=b[C+2+96]=b[C+3+96]=Ee}function yu(b,C){var H=b[C-1+0],ie=b[C-1+32],_e=b[C-1+64],Ee=b[C-1+96],Ae=b[C-1-32],ke=b[C+0-32],Be=b[C+1-32],$e=b[C+2-32];b[C+0+0]=b[C+2+32]=H+Ae+1>>1,b[C+0+32]=b[C+2+64]=ie+H+1>>1,b[C+0+64]=b[C+2+96]=_e+ie+1>>1,b[C+0+96]=Ee+_e+1>>1,b[C+3+0]=ar(ke,Be,$e),b[C+2+0]=ar(Ae,ke,Be),b[C+1+0]=b[C+3+32]=ar(H,Ae,ke),b[C+1+32]=b[C+3+64]=ar(ie,H,Ae),b[C+1+64]=b[C+3+96]=ar(_e,ie,H),b[C+1+96]=ar(Ee,_e,ie)}function El(b,C){var H;for(H=0;8>H;++H)r(b,C+32*H,b,C-32,8)}function cr(b,C){var H;for(H=0;8>H;++H)i(b,C,b[C-1],8),C+=32}function kr(b,C,H){var ie;for(ie=0;8>ie;++ie)i(C,H+32*ie,b,8)}function Fa(b,C){var H,ie=8;for(H=0;8>H;++H)ie+=b[C+H-32]+b[C-1+32*H];kr(ie>>4,b,C)}function Wu(b,C){var H,ie=4;for(H=0;8>H;++H)ie+=b[C+H-32];kr(ie>>3,b,C)}function Cl(b,C){var H,ie=4;for(H=0;8>H;++H)ie+=b[C-1+32*H];kr(ie>>3,b,C)}function Wl(b,C){kr(128,b,C)}function tl(b,C,H){var ie=b[C-H],_e=b[C+0],Ee=3*(_e-ie)+ia[1020+b[C-2*H]-b[C+H]],Ae=eo[112+(Ee+4>>3)];b[C-H]=hi[255+ie+eo[112+(Ee+3>>3)]],b[C+0]=hi[255+_e-Ae]}function Pl(b,C,H,ie){var _e=b[C+0],Ee=b[C+H];return Bo[255+b[C-2*H]-b[C-H]]>ie||Bo[255+Ee-_e]>ie}function Zl(b,C,H,ie){return 4*Bo[255+b[C-H]-b[C+0]]+Bo[255+b[C-2*H]-b[C+H]]<=ie}function Nr(b,C,H,ie,_e){var Ee=b[C-3*H],Ae=b[C-2*H],ke=b[C-H],Be=b[C+0],$e=b[C+H],dt=b[C+2*H],Bt=b[C+3*H];return 4*Bo[255+ke-Be]+Bo[255+Ae-$e]>ie?0:Bo[255+b[C-4*H]-Ee]<=_e&&Bo[255+Ee-Ae]<=_e&&Bo[255+Ae-ke]<=_e&&Bo[255+Bt-dt]<=_e&&Bo[255+dt-$e]<=_e&&Bo[255+$e-Be]<=_e}function Vi(b,C,H,ie){var _e=2*ie+1;for(ie=0;16>ie;++ie)Zl(b,C+ie,H,_e)&&tl(b,C+ie,H)}function Xn(b,C,H,ie){var _e=2*ie+1;for(ie=0;16>ie;++ie)Zl(b,C+ie*H,1,_e)&&tl(b,C+ie*H,1)}function Hi(b,C,H,ie){var _e;for(_e=3;0<_e;--_e)Vi(b,C+=4*H,H,ie)}function nl(b,C,H,ie){var _e;for(_e=3;0<_e;--_e)Xn(b,C+=4,H,ie)}function fa(b,C,H,ie,_e,Ee,Ae,ke){for(Ee=2*Ee+1;0<_e--;){if(Nr(b,C,H,Ee,Ae))if(Pl(b,C,H,ke))tl(b,C,H);else{var Be=b,$e=C,dt=H,Bt=Be[$e-2*dt],Ot=Be[$e-dt],wt=Be[$e+0],qt=Be[$e+dt],Ut=Be[$e+2*dt],pt=27*(Jt=ia[1020+3*(wt-Ot)+ia[1020+Bt-qt]])+63>>7,yt=18*Jt+63>>7,Jt=9*Jt+63>>7;Be[$e-3*dt]=hi[255+Be[$e-3*dt]+Jt],Be[$e-2*dt]=hi[255+Bt+yt],Be[$e-dt]=hi[255+Ot+pt],Be[$e+0]=hi[255+wt-pt],Be[$e+dt]=hi[255+qt-yt],Be[$e+2*dt]=hi[255+Ut-Jt]}C+=ie}}function wi(b,C,H,ie,_e,Ee,Ae,ke){for(Ee=2*Ee+1;0<_e--;){if(Nr(b,C,H,Ee,Ae))if(Pl(b,C,H,ke))tl(b,C,H);else{var Be=b,$e=C,dt=H,Bt=Be[$e-dt],Ot=Be[$e+0],wt=Be[$e+dt],qt=eo[112+((Ut=3*(Ot-Bt))+4>>3)],Ut=eo[112+(Ut+3>>3)],pt=qt+1>>1;Be[$e-2*dt]=hi[255+Be[$e-2*dt]+pt],Be[$e-dt]=hi[255+Bt+Ut],Be[$e+0]=hi[255+Ot-qt],Be[$e+dt]=hi[255+wt-pt]}C+=ie}}function Kl(b,C,H,ie,_e,Ee){fa(b,C,H,1,16,ie,_e,Ee)}function Ys(b,C,H,ie,_e,Ee){fa(b,C,1,H,16,ie,_e,Ee)}function Al(b,C,H,ie,_e,Ee){var Ae;for(Ae=3;0<Ae;--Ae)wi(b,C+=4*H,H,1,16,ie,_e,Ee)}function Ml(b,C,H,ie,_e,Ee){var Ae;for(Ae=3;0<Ae;--Ae)wi(b,C+=4,1,H,16,ie,_e,Ee)}function Ps(b,C,H,ie,_e,Ee,Ae,ke){fa(b,C,_e,1,8,Ee,Ae,ke),fa(H,ie,_e,1,8,Ee,Ae,ke)}function kl(b,C,H,ie,_e,Ee,Ae,ke){fa(b,C,1,_e,8,Ee,Ae,ke),fa(H,ie,1,_e,8,Ee,Ae,ke)}function Qr(b,C,H,ie,_e,Ee,Ae,ke){wi(b,C+4*_e,_e,1,8,Ee,Ae,ke),wi(H,ie+4*_e,_e,1,8,Ee,Ae,ke)}function Zu(b,C,H,ie,_e,Ee,Ae,ke){wi(b,C+4,1,_e,8,Ee,Ae,ke),wi(H,ie+4,1,_e,8,Ee,Ae,ke)}function fo(){this.ba=new vn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ln,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function js(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Tl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function zs(){this.ua=0,this.Wa=new de,this.vb=new de,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new I,this.yc=new D}function rl(){this.xb=this.a=0,this.l=new xr,this.ca=new vn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new B,this.Pb=0,this.wd=new B,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new zs,this.ab=0,this.gc=o(4,Tl),this.Oc=0}function il(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new xr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ei(b,C,H,ie,_e,Ee,Ae){for(b=b==null?0:b[C+0],C=0;C<Ae;++C)_e[Ee+C]=b+H[ie+C]&255,b=_e[Ee+C]}function gs(b,C,H,ie,_e,Ee,Ae){var ke;if(b==null)ei(null,null,H,ie,_e,Ee,Ae);else for(ke=0;ke<Ae;++ke)_e[Ee+ke]=b[C+ke]+H[ie+ke]&255}function da(b,C,H,ie,_e,Ee,Ae){if(b==null)ei(null,null,H,ie,_e,Ee,Ae);else{var ke,Be=b[C+0],$e=Be,dt=Be;for(ke=0;ke<Ae;++ke)$e=dt+(Be=b[C+ke])-$e,dt=H[ie+ke]+(-256&$e?0>$e?0:255:$e)&255,$e=Be,_e[Ee+ke]=dt}}function Gi(b,C,H,ie){var _e=C.width,Ee=C.o;if(t(b!=null&&C!=null),0>H||0>=ie||H+ie>Ee)return null;if(!b.Cc){if(b.ga==null){var Ae;if(b.ga=new il,(Ae=b.ga==null)||(Ae=C.width*C.o,t(b.Gb.length==0),b.Gb=s(Ae),b.Uc=0,b.Gb==null?Ae=0:(b.mb=b.Gb,b.nb=b.Uc,b.rc=null,Ae=1),Ae=!Ae),!Ae){Ae=b.ga;var ke=b.Fa,Be=b.P,$e=b.qc,dt=b.mb,Bt=b.nb,Ot=Be+1,wt=$e-1,qt=Ae.l;if(t(ke!=null&&dt!=null&&C!=null),Yr[0]=null,Yr[1]=ei,Yr[2]=gs,Yr[3]=da,Ae.ca=dt,Ae.tb=Bt,Ae.c=C.width,Ae.i=C.height,t(0<Ae.c&&0<Ae.i),1>=$e)C=0;else if(Ae.$a=ke[Be+0]>>0&3,Ae.Z=ke[Be+0]>>2&3,Ae.Lc=ke[Be+0]>>4&3,Be=ke[Be+0]>>6&3,0>Ae.$a||1<Ae.$a||4<=Ae.Z||1<Ae.Lc||Be)C=0;else if(qt.put=Wr,qt.ac=rr,qt.bc=ki,qt.ma=Ae,qt.width=C.width,qt.height=C.height,qt.Da=C.Da,qt.v=C.v,qt.va=C.va,qt.j=C.j,qt.o=C.o,Ae.$a)e:{t(Ae.$a==1),C=Lo();t:for(;;){if(C==null){C=0;break e}if(t(Ae!=null),Ae.mc=C,C.c=Ae.c,C.i=Ae.i,C.l=Ae.l,C.l.ma=Ae,C.l.width=Ae.c,C.l.height=Ae.i,C.a=0,q(C.m,ke,Ot,wt),!yr(Ae.c,Ae.i,1,C,null)||(C.ab==1&&C.gc[0].hc==3&&xo(C.s)?(Ae.ic=1,ke=C.c*C.i,C.Ta=null,C.Ua=0,C.V=s(ke),C.Ba=0,C.V==null?(C.a=1,C=0):C=1):(Ae.ic=0,C=ds(C,Ae.c)),!C))break t;C=1;break e}Ae.mc=null,C=0}else C=wt>=Ae.c*Ae.i;Ae=!C}if(Ae)return null;b.ga.Lc!=1?b.Ga=0:ie=Ee-H}t(b.ga!=null),t(H+ie<=Ee);e:{if(C=(ke=b.ga).c,Ee=ke.l.o,ke.$a==0){if(Ot=b.rc,wt=b.Vc,qt=b.Fa,Be=b.P+1+H*C,$e=b.mb,dt=b.nb+H*C,t(Be<=b.P+b.qc),ke.Z!=0)for(t(Yr[ke.Z]!=null),Ae=0;Ae<ie;++Ae)Yr[ke.Z](Ot,wt,qt,Be,$e,dt,C),Ot=$e,wt=dt,dt+=C,Be+=C;else for(Ae=0;Ae<ie;++Ae)r($e,dt,qt,Be,C),Ot=$e,wt=dt,dt+=C,Be+=C;b.rc=Ot,b.Vc=wt}else{if(t(ke.mc!=null),C=H+ie,t((Ae=ke.mc)!=null),t(C<=Ae.i),Ae.C>=C)C=1;else if(ke.ic||xt(),ke.ic){ke=Ae.V,Ot=Ae.Ba,wt=Ae.c;var Ut=Ae.i,pt=(qt=1,Be=Ae.$/wt,$e=Ae.$%wt,dt=Ae.m,Bt=Ae.s,Ae.$),yt=wt*Ut,Jt=wt*C,fn=Bt.wc,en=pt<Jt?bn(Bt,$e,Be):null;t(pt<=yt),t(C<=Ut),t(xo(Bt));t:for(;;){for(;!dt.h&&pt<Jt;){if($e&fn||(en=bn(Bt,$e,Be)),t(en!=null),we(dt),256>(Ut=fi(en.G[0],en.H[0],dt)))ke[Ot+pt]=Ut,++pt,++$e>=wt&&($e=0,++Be<=C&&!(Be%16)&&bi(Ae,Be));else{if(!(280>Ut)){qt=0;break t}Ut=oo(Ut-256,dt);var An,Cn=fi(en.G[4],en.H[4],dt);if(we(dt),!(pt>=(Cn=jo(wt,Cn=oo(Cn,dt)))&&yt-pt>=Ut)){qt=0;break t}for(An=0;An<Ut;++An)ke[Ot+pt+An]=ke[Ot+pt+An-Cn];for(pt+=Ut,$e+=Ut;$e>=wt;)$e-=wt,++Be<=C&&!(Be%16)&&bi(Ae,Be);pt<Jt&&$e&fn&&(en=bn(Bt,$e,Be))}t(dt.h==se(dt))}bi(Ae,Be>C?C:Be);break t}!qt||dt.h&&pt<yt?(qt=0,Ae.a=dt.h?5:3):Ae.$=pt,C=qt}else C=di(Ae,Ae.V,Ae.Ba,Ae.c,Ae.i,C,xl);if(!C){ie=0;break e}}H+ie>=Ee&&(b.Cc=1),ie=1}if(!ie)return null;if(b.Cc&&((ie=b.ga)!=null&&(ie.mc=null),b.ga=null,0<b.Ga))return alert("todo:WebPDequantizeLevels"),null}return b.nb+H*_e}function O(b,C,H,ie,_e,Ee){for(;0<_e--;){var Ae,ke=b,Be=C+(H?1:0),$e=b,dt=C+(H?0:3);for(Ae=0;Ae<ie;++Ae){var Bt=$e[dt+4*Ae];Bt!=255&&(Bt*=32897,ke[Be+4*Ae+0]=ke[Be+4*Ae+0]*Bt>>23,ke[Be+4*Ae+1]=ke[Be+4*Ae+1]*Bt>>23,ke[Be+4*Ae+2]=ke[Be+4*Ae+2]*Bt>>23)}C+=Ee}}function ye(b,C,H,ie,_e){for(;0<ie--;){var Ee;for(Ee=0;Ee<H;++Ee){var Ae=b[C+2*Ee+0],ke=15&($e=b[C+2*Ee+1]),Be=4369*ke,$e=(240&$e|$e>>4)*Be>>16;b[C+2*Ee+0]=(240&Ae|Ae>>4)*Be>>16&240|(15&Ae|Ae<<4)*Be>>16>>4&15,b[C+2*Ee+1]=240&$e|ke}C+=_e}}function He(b,C,H,ie,_e,Ee,Ae,ke){var Be,$e,dt=255;for($e=0;$e<_e;++$e){for(Be=0;Be<ie;++Be){var Bt=b[C+Be];Ee[Ae+4*Be]=Bt,dt&=Bt}C+=H,Ae+=ke}return dt!=255}function ct(b,C,H,ie,_e){var Ee;for(Ee=0;Ee<_e;++Ee)H[ie+Ee]=b[C+Ee]>>8}function xt(){go=O,ri=ye,si=He,Wi=ct}function It(b,C,H){V[b]=function(ie,_e,Ee,Ae,ke,Be,$e,dt,Bt,Ot,wt,qt,Ut,pt,yt,Jt,fn){var en,An=fn-1>>1,Cn=ke[Be+0]|$e[dt+0]<<16,Hn=Bt[Ot+0]|wt[qt+0]<<16;t(ie!=null);var l=3*Cn+Hn+131074>>2;for(C(ie[_e+0],255&l,l>>16,Ut,pt),Ee!=null&&(l=3*Hn+Cn+131074>>2,C(Ee[Ae+0],255&l,l>>16,yt,Jt)),en=1;en<=An;++en){var f=ke[Be+en]|$e[dt+en]<<16,m=Bt[Ot+en]|wt[qt+en]<<16,w=Cn+f+Hn+m+524296,E=w+2*(f+Hn)>>3;l=E+Cn>>1,Cn=(w=w+2*(Cn+m)>>3)+f>>1,C(ie[_e+2*en-1],255&l,l>>16,Ut,pt+(2*en-1)*H),C(ie[_e+2*en-0],255&Cn,Cn>>16,Ut,pt+(2*en-0)*H),Ee!=null&&(l=w+Hn>>1,Cn=E+m>>1,C(Ee[Ae+2*en-1],255&l,l>>16,yt,Jt+(2*en-1)*H),C(Ee[Ae+2*en+0],255&Cn,Cn>>16,yt,Jt+(2*en+0)*H)),Cn=f,Hn=m}1&fn||(l=3*Cn+Hn+131074>>2,C(ie[_e+fn-1],255&l,l>>16,Ut,pt+(fn-1)*H),Ee!=null&&(l=3*Hn+Cn+131074>>2,C(Ee[Ae+fn-1],255&l,l>>16,yt,Jt+(fn-1)*H)))}}function cn(){Oo[ns]=Te,Oo[nr]=wu,Oo[ya]=is,Oo[_a]=_o,Oo[$s]=Mr,Oo[Go]=$c,Oo[mc]=af,Oo[mo]=wu,Oo[vo]=_o,Oo[Vs]=Mr,Oo[a]=$c}function kn(b){return b&-16384?0>b?0:255:b>>pd}function Nn(b,C){return kn((19077*b>>8)+(26149*C>>8)-14234)}function Kn(b,C,H){return kn((19077*b>>8)-(6419*C>>8)-(13320*H>>8)+8708)}function or(b,C){return kn((19077*b>>8)+(33050*C>>8)-17685)}function Pr(b,C,H,ie,_e){ie[_e+0]=Nn(b,H),ie[_e+1]=Kn(b,C,H),ie[_e+2]=or(b,C)}function yi(b,C,H,ie,_e){ie[_e+0]=or(b,C),ie[_e+1]=Kn(b,C,H),ie[_e+2]=Nn(b,H)}function Zr(b,C,H,ie,_e){var Ee=Kn(b,C,H);C=Ee<<3&224|or(b,C)>>3,ie[_e+0]=248&Nn(b,H)|Ee>>5,ie[_e+1]=C}function ti(b,C,H,ie,_e){var Ee=240&or(b,C)|15;ie[_e+0]=240&Nn(b,H)|Kn(b,C,H)>>4,ie[_e+1]=Ee}function qi(b,C,H,ie,_e){ie[_e+0]=255,Pr(b,C,H,ie,_e+1)}function Ji(b,C,H,ie,_e){yi(b,C,H,ie,_e),ie[_e+3]=255}function ms(b,C,H,ie,_e){Pr(b,C,H,ie,_e),ie[_e+3]=255}function Ar(b,C){return 0>b?0:b>C?C:b}function Co(b,C,H){V[b]=function(ie,_e,Ee,Ae,ke,Be,$e,dt,Bt){for(var Ot=dt+(-2&Bt)*H;dt!=Ot;)C(ie[_e+0],Ee[Ae+0],ke[Be+0],$e,dt),C(ie[_e+1],Ee[Ae+0],ke[Be+0],$e,dt+H),_e+=2,++Ae,++Be,dt+=2*H;1&Bt&&C(ie[_e+0],Ee[Ae+0],ke[Be+0],$e,dt)}}function ol(b,C,H){return H==0?b==0?C==0?6:5:C==0?4:0:H}function Uo(b,C,H,ie,_e){switch(b>>>30){case 3:Ht(C,H,ie,_e,0);break;case 2:Mt(C,H,ie,_e);break;case 1:Un(C,H,ie,_e)}}function Yl(b,C){var H,ie,_e=C.M,Ee=C.Nb,Ae=b.oc,ke=b.pc+40,Be=b.oc,$e=b.pc+584,dt=b.oc,Bt=b.pc+600;for(H=0;16>H;++H)Ae[ke+32*H-1]=129;for(H=0;8>H;++H)Be[$e+32*H-1]=129,dt[Bt+32*H-1]=129;for(0<_e?Ae[ke-1-32]=Be[$e-1-32]=dt[Bt-1-32]=129:(i(Ae,ke-32-1,127,21),i(Be,$e-32-1,127,9),i(dt,Bt-32-1,127,9)),ie=0;ie<b.za;++ie){var Ot=C.ya[C.aa+ie];if(0<ie){for(H=-1;16>H;++H)r(Ae,ke+32*H-4,Ae,ke+32*H+12,4);for(H=-1;8>H;++H)r(Be,$e+32*H-4,Be,$e+32*H+4,4),r(dt,Bt+32*H-4,dt,Bt+32*H+4,4)}var wt=b.Gd,qt=b.Hd+ie,Ut=Ot.ad,pt=Ot.Hc;if(0<_e&&(r(Ae,ke-32,wt[qt].y,0,16),r(Be,$e-32,wt[qt].f,0,8),r(dt,Bt-32,wt[qt].ea,0,8)),Ot.Za){var yt=Ae,Jt=ke-32+16;for(0<_e&&(ie>=b.za-1?i(yt,Jt,wt[qt].y[15],4):r(yt,Jt,wt[qt+1].y,0,4)),H=0;4>H;H++)yt[Jt+128+H]=yt[Jt+256+H]=yt[Jt+384+H]=yt[Jt+0+H];for(H=0;16>H;++H,pt<<=2)yt=Ae,Jt=ke+uf[H],Hs[Ot.Ob[H]](yt,Jt),Uo(pt,Ut,16*+H,yt,Jt)}else if(yt=ol(ie,_e,Ot.Ob[0]),oa[yt](Ae,ke),pt!=0)for(H=0;16>H;++H,pt<<=2)Uo(pt,Ut,16*+H,Ae,ke+uf[H]);for(H=Ot.Gc,yt=ol(ie,_e,Ot.Dd),Ms[yt](Be,$e),Ms[yt](dt,Bt),pt=Ut,yt=Be,Jt=$e,255&(Ot=H>>0)&&(170&Ot?Pn(pt,256,yt,Jt):lr(pt,256,yt,Jt)),Ot=dt,pt=Bt,255&(H>>=8)&&(170&H?Pn(Ut,320,Ot,pt):lr(Ut,320,Ot,pt)),_e<b.Ub-1&&(r(wt[qt].y,0,Ae,ke+480,16),r(wt[qt].f,0,Be,$e+224,8),r(wt[qt].ea,0,dt,Bt+224,8)),H=8*Ee*b.B,wt=b.sa,qt=b.ta+16*ie+16*Ee*b.R,Ut=b.qa,Ot=b.ra+8*ie+H,pt=b.Ha,yt=b.Ia+8*ie+H,H=0;16>H;++H)r(wt,qt+H*b.R,Ae,ke+32*H,16);for(H=0;8>H;++H)r(Ut,Ot+H*b.B,Be,$e+32*H,8),r(pt,yt+H*b.B,dt,Bt+32*H,8)}}function Xs(b,C,H,ie,_e,Ee,Ae,ke,Be){var $e=[0],dt=[0],Bt=0,Ot=Be!=null?Be.kd:0,wt=Be??new js;if(b==null||12>H)return 7;wt.data=b,wt.w=C,wt.ha=H,C=[C],H=[H],wt.gb=[wt.gb];e:{var qt=C,Ut=H,pt=wt.gb;if(t(b!=null),t(Ut!=null),t(pt!=null),pt[0]=0,12<=Ut[0]&&!n(b,qt[0],"RIFF")){if(n(b,qt[0]+8,"WEBP")){pt=3;break e}var yt=oe(b,qt[0]+4);if(12>yt||4294967286<yt){pt=3;break e}if(Ot&&yt>Ut[0]-8){pt=7;break e}pt[0]=yt,qt[0]+=12,Ut[0]-=12}pt=0}if(pt!=0)return pt;for(yt=0<wt.gb[0],H=H[0];;){e:{var Jt=b;Ut=C,pt=H;var fn=$e,en=dt,An=qt=[0];if((l=Bt=[Bt])[0]=0,8>pt[0])pt=7;else{if(!n(Jt,Ut[0],"VP8X")){if(oe(Jt,Ut[0]+4)!=10){pt=3;break e}if(18>pt[0]){pt=7;break e}var Cn=oe(Jt,Ut[0]+8),Hn=1+Ze(Jt,Ut[0]+12);if(2147483648<=Hn*(Jt=1+Ze(Jt,Ut[0]+15))){pt=3;break e}An!=null&&(An[0]=Cn),fn!=null&&(fn[0]=Hn),en!=null&&(en[0]=Jt),Ut[0]+=18,pt[0]-=18,l[0]=1}pt=0}}if(Bt=Bt[0],qt=qt[0],pt!=0)return pt;if(Ut=!!(2&qt),!yt&&Bt)return 3;if(Ee!=null&&(Ee[0]=!!(16&qt)),Ae!=null&&(Ae[0]=Ut),ke!=null&&(ke[0]=0),Ae=$e[0],qt=dt[0],Bt&&Ut&&Be==null){pt=0;break}if(4>H){pt=7;break}if(yt&&Bt||!yt&&!Bt&&!n(b,C[0],"ALPH")){H=[H],wt.na=[wt.na],wt.P=[wt.P],wt.Sa=[wt.Sa];e:{Cn=b,pt=C,yt=H;var l=wt.gb;fn=wt.na,en=wt.P,An=wt.Sa,Hn=22,t(Cn!=null),t(yt!=null),Jt=pt[0];var f=yt[0];for(t(fn!=null),t(An!=null),fn[0]=null,en[0]=null,An[0]=0;;){if(pt[0]=Jt,yt[0]=f,8>f){pt=7;break e}var m=oe(Cn,Jt+4);if(4294967286<m){pt=3;break e}var w=8+m+1&-2;if(Hn+=w,0<l&&Hn>l){pt=3;break e}if(!n(Cn,Jt,"VP8 ")||!n(Cn,Jt,"VP8L")){pt=0;break e}if(f[0]<w){pt=7;break e}n(Cn,Jt,"ALPH")||(fn[0]=Cn,en[0]=Jt+8,An[0]=m),Jt+=w,f-=w}}if(H=H[0],wt.na=wt.na[0],wt.P=wt.P[0],wt.Sa=wt.Sa[0],pt!=0)break}H=[H],wt.Ja=[wt.Ja],wt.xa=[wt.xa];e:if(l=b,pt=C,yt=H,fn=wt.gb[0],en=wt.Ja,An=wt.xa,Cn=pt[0],Jt=!n(l,Cn,"VP8 "),Hn=!n(l,Cn,"VP8L"),t(l!=null),t(yt!=null),t(en!=null),t(An!=null),8>yt[0])pt=7;else{if(Jt||Hn){if(l=oe(l,Cn+4),12<=fn&&l>fn-12){pt=3;break e}if(Ot&&l>yt[0]-8){pt=7;break e}en[0]=l,pt[0]+=8,yt[0]-=8,An[0]=Hn}else An[0]=5<=yt[0]&&l[Cn+0]==47&&!(l[Cn+4]>>5),en[0]=yt[0];pt=0}if(H=H[0],wt.Ja=wt.Ja[0],wt.xa=wt.xa[0],C=C[0],pt!=0)break;if(4294967286<wt.Ja)return 3;if(ke==null||Ut||(ke[0]=wt.xa?2:1),Ae=[Ae],qt=[qt],wt.xa){if(5>H){pt=7;break}ke=Ae,Ot=qt,Ut=Ee,b==null||5>H?b=0:5<=H&&b[C+0]==47&&!(b[C+4]>>5)?(yt=[0],l=[0],fn=[0],q(en=new B,b,C,H),Fn(en,yt,l,fn)?(ke!=null&&(ke[0]=yt[0]),Ot!=null&&(Ot[0]=l[0]),Ut!=null&&(Ut[0]=fn[0]),b=1):b=0):b=0}else{if(10>H){pt=7;break}ke=qt,b==null||10>H||!Cr(b,C+3,H-3)?b=0:(Ot=b[C+0]|b[C+1]<<8|b[C+2]<<16,Ut=16383&(b[C+7]<<8|b[C+6]),b=16383&(b[C+9]<<8|b[C+8]),1&Ot||3<(Ot>>1&7)||!(Ot>>4&1)||Ot>>5>=wt.Ja||!Ut||!b?b=0:(Ae&&(Ae[0]=Ut),ke&&(ke[0]=b),b=1))}if(!b||(Ae=Ae[0],qt=qt[0],Bt&&($e[0]!=Ae||dt[0]!=qt)))return 3;Be!=null&&(Be[0]=wt,Be.offset=C-Be.w,t(4294967286>C-Be.w),t(Be.offset==Be.ha-H));break}return pt==0||pt==7&&Bt&&Be==null?(Ee!=null&&(Ee[0]|=wt.na!=null&&0<wt.na.length),ie!=null&&(ie[0]=Ae),_e!=null&&(_e[0]=qt),0):pt}function _u(b,C,H){var ie=C.width,_e=C.height,Ee=0,Ae=0,ke=ie,Be=_e;if(C.Da=b!=null&&0<b.Da,C.Da&&(ke=b.cd,Be=b.bd,Ee=b.v,Ae=b.j,11>H||(Ee&=-2,Ae&=-2),0>Ee||0>Ae||0>=ke||0>=Be||Ee+ke>ie||Ae+Be>_e))return 0;if(C.v=Ee,C.j=Ae,C.va=Ee+ke,C.o=Ae+Be,C.U=ke,C.T=Be,C.da=b!=null&&0<b.da,C.da){if(!ze(ke,Be,H=[b.ib],Ee=[b.hb]))return 0;C.ib=H[0],C.hb=Ee[0]}return C.ob=b!=null&&b.ob,C.Kb=b==null||!b.Sd,C.da&&(C.ob=C.ib<3*ie/4&&C.hb<3*_e/4,C.Kb=0),1}function ja(b){if(b==null)return 2;if(11>b.S){var C=b.f.RGBA;C.fb+=(b.height-1)*C.A,C.A=-C.A}else C=b.f.kb,b=b.height,C.O+=(b-1)*C.fa,C.fa=-C.fa,C.N+=(b-1>>1)*C.Ab,C.Ab=-C.Ab,C.W+=(b-1>>1)*C.Db,C.Db=-C.Db,C.F!=null&&(C.J+=(b-1)*C.lb,C.lb=-C.lb);return 0}function za(b,C,H,ie){if(ie==null||0>=b||0>=C)return 2;if(H!=null){if(H.Da){var _e=H.cd,Ee=H.bd,Ae=-2&H.v,ke=-2&H.j;if(0>Ae||0>ke||0>=_e||0>=Ee||Ae+_e>b||ke+Ee>C)return 2;b=_e,C=Ee}if(H.da){if(!ze(b,C,_e=[H.ib],Ee=[H.hb]))return 2;b=_e[0],C=Ee[0]}}ie.width=b,ie.height=C;e:{var Be=ie.width,$e=ie.height;if(b=ie.S,0>=Be||0>=$e||!(b>=ns&&13>b))b=2;else{if(0>=ie.Rd&&ie.sd==null){Ae=Ee=_e=C=0;var dt=(ke=Be*ff[b])*$e;if(11>b||(Ee=($e+1)/2*(C=(Be+1)/2),b==12&&(Ae=(_e=Be)*$e)),($e=s(dt+2*Ee+Ae))==null){b=1;break e}ie.sd=$e,11>b?((Be=ie.f.RGBA).eb=$e,Be.fb=0,Be.A=ke,Be.size=dt):((Be=ie.f.kb).y=$e,Be.O=0,Be.fa=ke,Be.Fd=dt,Be.f=$e,Be.N=0+dt,Be.Ab=C,Be.Cd=Ee,Be.ea=$e,Be.W=0+dt+Ee,Be.Db=C,Be.Ed=Ee,b==12&&(Be.F=$e,Be.J=0+dt+2*Ee),Be.Tc=Ae,Be.lb=_e)}if(C=1,_e=ie.S,Ee=ie.width,Ae=ie.height,_e>=ns&&13>_e)if(11>_e)b=ie.f.RGBA,C&=(ke=Math.abs(b.A))*(Ae-1)+Ee<=b.size,C&=ke>=Ee*ff[_e],C&=b.eb!=null;else{b=ie.f.kb,ke=(Ee+1)/2,dt=(Ae+1)/2,Be=Math.abs(b.fa),$e=Math.abs(b.Ab);var Bt=Math.abs(b.Db),Ot=Math.abs(b.lb),wt=Ot*(Ae-1)+Ee;C&=Be*(Ae-1)+Ee<=b.Fd,C&=$e*(dt-1)+ke<=b.Cd,C=(C&=Bt*(dt-1)+ke<=b.Ed)&Be>=Ee&$e>=ke&Bt>=ke,C&=b.y!=null,C&=b.f!=null,C&=b.ea!=null,_e==12&&(C&=Ot>=Ee,C&=wt<=b.Tc,C&=b.F!=null)}else C=0;b=C?0:2}}return b!=0||H!=null&&H.fd&&(b=ja(ie)),b}var Qi=64,Js=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],vs=24,es=32,sl=8,Po=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Qe("Predictor0","PredictorAdd0"),V.Predictor0=function(){return 4278190080},V.Predictor1=function(b){return b},V.Predictor2=function(b,C,H){return C[H+0]},V.Predictor3=function(b,C,H){return C[H+1]},V.Predictor4=function(b,C,H){return C[H-1]},V.Predictor5=function(b,C,H){return ot(ot(b,C[H+1]),C[H+0])},V.Predictor6=function(b,C,H){return ot(b,C[H-1])},V.Predictor7=function(b,C,H){return ot(b,C[H+0])},V.Predictor8=function(b,C,H){return ot(C[H-1],C[H+0])},V.Predictor9=function(b,C,H){return ot(C[H+0],C[H+1])},V.Predictor10=function(b,C,H){return ot(ot(b,C[H-1]),ot(C[H+0],C[H+1]))},V.Predictor11=function(b,C,H){var ie=C[H+0];return 0>=zt(ie>>24&255,b>>24&255,(C=C[H-1])>>24&255)+zt(ie>>16&255,b>>16&255,C>>16&255)+zt(ie>>8&255,b>>8&255,C>>8&255)+zt(255&ie,255&b,255&C)?ie:b},V.Predictor12=function(b,C,H){var ie=C[H+0];return(At((b>>24&255)+(ie>>24&255)-((C=C[H-1])>>24&255))<<24|At((b>>16&255)+(ie>>16&255)-(C>>16&255))<<16|At((b>>8&255)+(ie>>8&255)-(C>>8&255))<<8|At((255&b)+(255&ie)-(255&C)))>>>0},V.Predictor13=function(b,C,H){var ie=C[H-1];return(Et((b=ot(b,C[H+0]))>>24&255,ie>>24&255)<<24|Et(b>>16&255,ie>>16&255)<<16|Et(b>>8&255,ie>>8&255)<<8|Et(b>>0&255,ie>>0&255))>>>0};var $o=V.PredictorAdd0;V.PredictorAdd1=Kt,Qe("Predictor2","PredictorAdd2"),Qe("Predictor3","PredictorAdd3"),Qe("Predictor4","PredictorAdd4"),Qe("Predictor5","PredictorAdd5"),Qe("Predictor6","PredictorAdd6"),Qe("Predictor7","PredictorAdd7"),Qe("Predictor8","PredictorAdd8"),Qe("Predictor9","PredictorAdd9"),Qe("Predictor10","PredictorAdd10"),Qe("Predictor11","PredictorAdd11"),Qe("Predictor12","PredictorAdd12"),Qe("Predictor13","PredictorAdd13");var Vo=V.PredictorAdd2;st("ColorIndexInverseTransform","MapARGB","32b",function(b){return b>>8&255},function(b){return b}),st("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(b){return b},function(b){return b>>8&255});var Ku,lo=V.ColorIndexInverseTransform,pa=V.MapARGB,Ao=V.VP8LColorIndexInverseTransformAlpha,Mo=V.MapAlpha,ga=V.VP8LPredictorsAdd=[];ga.length=16,(V.VP8LPredictors=[]).length=16,(V.VP8LPredictorsAdd_C=[]).length=16,(V.VP8LPredictors_C=[]).length=16;var ma,ko,po,Qs,ys,To,_t,Ht,Mt,Pn,Un,lr,xi,ni,Bl,Ho,Li,ea,va,ta,na,ra,Dr,Us,go,ri,si,Wi,gi=s(511),_s=s(2041),ts=s(225),As=s(767),bu=0,ia=_s,eo=ts,hi=As,Bo=gi,ns=0,nr=1,ya=2,_a=3,$s=4,Go=5,mc=6,mo=7,vo=8,Vs=9,a=10,p=[2,3,7],S=[3,3,11],z=[280,256,256,256,40],re=[0,1,1,1,0],Se=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],at=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Pt=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ft=8,nn=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Tn=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Vn=null,Er=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],to=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Bi=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],yo=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Si=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],rs=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],vc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],oa=[],Hs=[],Ms=[],xh=1,Xl=2,Yr=[],Oo=[];It("UpsampleRgbLinePair",Pr,3),It("UpsampleBgrLinePair",yi,3),It("UpsampleRgbaLinePair",ms,4),It("UpsampleBgraLinePair",Ji,4),It("UpsampleArgbLinePair",qi,4),It("UpsampleRgba4444LinePair",ti,2),It("UpsampleRgb565LinePair",Zr,2);var Te=V.UpsampleRgbLinePair,is=V.UpsampleBgrLinePair,wu=V.UpsampleRgbaLinePair,_o=V.UpsampleBgraLinePair,Mr=V.UpsampleArgbLinePair,$c=V.UpsampleRgba4444LinePair,af=V.UpsampleRgb565LinePair,Vc=16,Ua=1<<Vc-1,yc=-227,Lh=482,pd=6,Yu=0,Hc=s(256),Ol=s(256),gd=s(256),Gc=s(256),qc=s(Lh-yc),lf=s(Lh-yc);Co("YuvToRgbRow",Pr,3),Co("YuvToBgrRow",yi,3),Co("YuvToRgbaRow",ms,4),Co("YuvToBgraRow",Ji,4),Co("YuvToArgbRow",qi,4),Co("YuvToRgba4444Row",ti,2),Co("YuvToRgb565Row",Zr,2);var uf=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ba=[0,2,8],cf=[8,7,6,4,4,2,2,2,1,1,1,1],hf=1;this.WebPDecodeRGBA=function(b,C,H,ie,_e){var Ee=nr,Ae=new fo,ke=new vn;Ae.ba=ke,ke.S=Ee,ke.width=[ke.width],ke.height=[ke.height];var Be=ke.width,$e=ke.height,dt=new Sn;if(dt==null||b==null)var Bt=2;else t(dt!=null),Bt=Xs(b,C,H,dt.width,dt.height,dt.Pd,dt.Qd,dt.format,null);if(Bt!=0?Be=0:(Be!=null&&(Be[0]=dt.width[0]),$e!=null&&($e[0]=dt.height[0]),Be=1),Be){ke.width=ke.width[0],ke.height=ke.height[0],ie!=null&&(ie[0]=ke.width),_e!=null&&(_e[0]=ke.height);e:{if(ie=new xr,(_e=new js).data=b,_e.w=C,_e.ha=H,_e.kd=1,C=[0],t(_e!=null),((b=Xs(_e.data,_e.w,_e.ha,null,null,null,C,null,_e))==0||b==7)&&C[0]&&(b=4),(C=b)==0){if(t(Ae!=null),ie.data=_e.data,ie.w=_e.w+_e.offset,ie.ha=_e.ha-_e.offset,ie.put=Wr,ie.ac=rr,ie.bc=ki,ie.ma=Ae,_e.xa){if((b=Lo())==null){Ae=1;break e}if(function(Ot,wt){var qt=[0],Ut=[0],pt=[0];t:for(;;){if(Ot==null)return 0;if(wt==null)return Ot.a=2,0;if(Ot.l=wt,Ot.a=0,q(Ot.m,wt.data,wt.w,wt.ha),!Fn(Ot.m,qt,Ut,pt)){Ot.a=3;break t}if(Ot.xb=Xl,wt.width=qt[0],wt.height=Ut[0],!yr(qt[0],Ut[0],1,Ot,null))break t;return 1}return t(Ot.a!=0),0}(b,ie)){if(ie=(C=za(ie.width,ie.height,Ae.Oa,Ae.ba))==0){t:{ie=b;n:for(;;){if(ie==null){ie=0;break t}if(t(ie.s.yc!=null),t(ie.s.Ya!=null),t(0<ie.s.Wb),t((H=ie.l)!=null),t((_e=H.ma)!=null),ie.xb!=0){if(ie.ca=_e.ba,ie.tb=_e.tb,t(ie.ca!=null),!_u(_e.Oa,H,_a)){ie.a=2;break n}if(!ds(ie,H.width)||H.da)break n;if((H.da||un(ie.ca.S))&&xt(),11>ie.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ie.ca.f.kb.F!=null&&xt()),ie.Pb&&0<ie.s.ua&&ie.s.vb.X==null&&!me(ie.s.vb,ie.s.Wa.Xa)){ie.a=1;break n}ie.xb=0}if(!di(ie,ie.V,ie.Ba,ie.c,ie.i,H.o,hn))break n;_e.Dc=ie.Ma,ie=1;break t}t(ie.a!=0),ie=0}ie=!ie}ie&&(C=b.a)}else C=b.a}else{if((b=new sn)==null){Ae=1;break e}if(b.Fa=_e.na,b.P=_e.P,b.qc=_e.Sa,Di(b,ie)){if((C=za(ie.width,ie.height,Ae.Oa,Ae.ba))==0){if(b.Aa=0,H=Ae.Oa,t((_e=b)!=null),H!=null){if(0<(Be=0>(Be=H.Md)?0:100<Be?255:255*Be/100)){for($e=dt=0;4>$e;++$e)12>(Bt=_e.pb[$e]).lc&&(Bt.ia=Be*cf[0>Bt.lc?0:Bt.lc]>>3),dt|=Bt.ia;dt&&(alert("todo:VP8InitRandom"),_e.ia=1)}_e.Ga=H.Id,100<_e.Ga?_e.Ga=100:0>_e.Ga&&(_e.Ga=0)}sr(b,ie)||(C=b.a)}}else C=b.a}C==0&&Ae.Oa!=null&&Ae.Oa.fd&&(C=ja(Ae.ba))}Ae=C}Ee=Ae!=0?null:11>Ee?ke.f.RGBA.eb:ke.f.kb.y}else Ee=null;return Ee};var ff=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(V,F){for(var Y="",$=0;$<4;$++)Y+=String.fromCharCode(V[F++]);return Y}function v(V,F){return(V[F+0]<<0|V[F+1]<<8|V[F+2]<<16)>>>0}function y(V,F){return(V[F+0]<<0|V[F+1]<<8|V[F+2]<<16|V[F+3]<<24)>>>0}new h;var x=[0],_=[0],P=[],T=new h,U=e,N=function(V,F){var Y={},$=0,D=!1,k=0,I=0;if(Y.frames=[],!function(te,se,ae,we){for(var fe=0;fe<we;fe++)if(te[se+fe]!=ae.charCodeAt(fe))return!0;return!1}(V,F,"RIFF",4)){var W,G;for(y(V,F+=4),F+=8;F<V.length;){var K=d(V,F),q=y(V,F+=4);F+=4;var ve=q+(1&q);switch(K){case"VP8 ":case"VP8L":Y.frames[$]===void 0&&(Y.frames[$]={}),(B=Y.frames[$]).src_off=D?I:F-8,B.src_size=k+q+8,$++,D&&(D=!1,k=0,I=0);break;case"VP8X":(B=Y.header={}).feature_flags=V[F];var Ce=F+4;B.canvas_width=1+v(V,Ce),Ce+=3,B.canvas_height=1+v(V,Ce),Ce+=3;break;case"ALPH":D=!0,k=ve+8,I=F-8;break;case"ANIM":(B=Y.header).bgcolor=y(V,F),Ce=F+4,B.loop_count=(W=V)[(G=Ce)+0]<<0|W[G+1]<<8,Ce+=2;break;case"ANMF":var Xe,B;(B=Y.frames[$]={}).offset_x=2*v(V,F),F+=3,B.offset_y=2*v(V,F),F+=3,B.width=1+v(V,F),F+=3,B.height=1+v(V,F),F+=3,B.duration=v(V,F),F+=3,Xe=V[F++],B.dispose=1&Xe,B.blend=Xe>>1&1}K!="ANMF"&&(F+=ve)}return Y}}(U,0);N.response=U,N.rgbaoutput=!0,N.dataurl=!1;var j=N.header?N.header:null,Z=N.frames?N.frames:null;if(j){j.loop_counter=j.loop_count,x=[j.canvas_height],_=[j.canvas_width];for(var J=0;J<Z.length&&Z[J].blend!=0;J++);}var le=Z[0],he=T.WebPDecodeRGBA(U,le.src_off,le.src_size,_,x);le.rgba=he,le.imgwidth=_[0],le.imgheight=x[0];for(var Le=0;Le<_[0]*x[0]*4;Le++)P[Le]=he[Le];return this.width=_,this.height=x,this.data=P,this}(function(e){var t=function(){return typeof _1=="function"},n=function(x,_,P,T){var U=4,N=o;switch(T){case e.image_compression.FAST:U=1,N=s;break;case e.image_compression.MEDIUM:U=6,N=u;break;case e.image_compression.SLOW:U=9,N=h}x=r(x,_,P,N);var j=_1(x,{level:U});return e.__addimage__.arrayBufferToBinaryString(j)},r=function(x,_,P,T){for(var U,N,j,Z=x.length/_,J=new Uint8Array(x.length+Z),le=v(),he=0;he<Z;he+=1){if(j=he*_,U=x.subarray(j,j+_),T)J.set(T(U,P,N),j+he);else{for(var Le,V=le.length,F=[];Le<V;Le+=1)F[Le]=le[Le](U,P,N);var Y=y(F.concat());J.set(F[Y],j+he)}N=U}return J},i=function(x){var _=Array.apply([],x);return _.unshift(0),_},s=function(x,_){var P,T=[],U=x.length;T[0]=1;for(var N=0;N<U;N+=1)P=x[N-_]||0,T[N+1]=x[N]-P+256&255;return T},o=function(x,_,P){var T,U=[],N=x.length;U[0]=2;for(var j=0;j<N;j+=1)T=P&&P[j]||0,U[j+1]=x[j]-T+256&255;return U},u=function(x,_,P){var T,U,N=[],j=x.length;N[0]=3;for(var Z=0;Z<j;Z+=1)T=x[Z-_]||0,U=P&&P[Z]||0,N[Z+1]=x[Z]+256-(T+U>>>1)&255;return N},h=function(x,_,P){var T,U,N,j,Z=[],J=x.length;Z[0]=4;for(var le=0;le<J;le+=1)T=x[le-_]||0,U=P&&P[le]||0,N=P&&P[le-_]||0,j=d(T,U,N),Z[le+1]=x[le]-j+256&255;return Z},d=function(x,_,P){if(x===_&&_===P)return x;var T=Math.abs(_-P),U=Math.abs(x-P),N=Math.abs(x+_-P-P);return T<=U&&T<=N?x:U<=N?_:P},v=function(){return[i,s,o,u,h]},y=function(x){var _=x.map(function(P){return P.reduce(function(T,U){return T+Math.abs(U)},0)});return _.indexOf(Math.min.apply(null,_))};e.processPNG=function(x,_,P,T){var U,N,j,Z,J,le,he,Le,V,F,Y,$,D,k,I,W=this.decode.FLATE_DECODE,G="";if(this.__addimage__.isArrayBuffer(x)&&(x=new Uint8Array(x)),this.__addimage__.isArrayBufferView(x)){if(x=(j=new iR(x)).imgData,N=j.bits,U=j.colorSpace,J=j.colors,[4,6].indexOf(j.colorType)!==-1){if(j.bits===8){V=(Le=j.pixelBitlength==32?new Uint32Array(j.decodePixels().buffer):j.pixelBitlength==16?new Uint16Array(j.decodePixels().buffer):new Uint8Array(j.decodePixels().buffer)).length,Y=new Uint8Array(V*j.colors),F=new Uint8Array(V);var K,q=j.pixelBitlength-j.bits;for(k=0,I=0;k<V;k++){for(D=Le[k],K=0;K<q;)Y[I++]=D>>>K&255,K+=j.bits;F[k]=D>>>K&255}}if(j.bits===16){V=(Le=new Uint32Array(j.decodePixels().buffer)).length,Y=new Uint8Array(V*(32/j.pixelBitlength)*j.colors),F=new Uint8Array(V*(32/j.pixelBitlength)),$=j.colors>1,k=0,I=0;for(var ve=0;k<V;)D=Le[k++],Y[I++]=D>>>0&255,$&&(Y[I++]=D>>>16&255,D=Le[k++],Y[I++]=D>>>0&255),F[ve++]=D>>>16&255;N=8}T!==e.image_compression.NONE&&t()?(x=n(Y,j.width*j.colors,j.colors,T),he=n(F,j.width,1,T)):(x=Y,he=F,W=void 0)}if(j.colorType===3&&(U=this.color_spaces.INDEXED,le=j.palette,j.transparency.indexed)){var Ce=j.transparency.indexed,Xe=0;for(k=0,V=Ce.length;k<V;++k)Xe+=Ce[k];if((Xe/=255)===V-1&&Ce.indexOf(0)!==-1)Z=[Ce.indexOf(0)];else if(Xe!==V){for(Le=j.decodePixels(),F=new Uint8Array(Le.length),k=0,V=Le.length;k<V;k++)F[k]=Ce[Le[k]];he=n(F,j.width,1)}}var B=function(te){var se;switch(te){case e.image_compression.FAST:se=11;break;case e.image_compression.MEDIUM:se=13;break;case e.image_compression.SLOW:se=14;break;default:se=12}return se}(T);return W===this.decode.FLATE_DECODE&&(G="/Predictor "+B+" "),G+="/Colors "+J+" /BitsPerComponent "+N+" /Columns "+j.width,(this.__addimage__.isArrayBuffer(x)||this.__addimage__.isArrayBufferView(x))&&(x=this.__addimage__.arrayBufferToBinaryString(x)),(he&&this.__addimage__.isArrayBuffer(he)||this.__addimage__.isArrayBufferView(he))&&(he=this.__addimage__.arrayBufferToBinaryString(he)),{alias:P,data:x,index:_,filter:W,decodeParameters:G,transparency:Z,palette:le,sMask:he,predictor:B,width:j.width,height:j.height,bitsPerComponent:N,colorSpace:U}}}})(mr.API),function(e){e.processGIF89A=function(t,n,r,i){var s=new oR(t),o=s.width,u=s.height,h=[];s.decodeAndBlitFrameRGBA(0,h);var d={data:h,width:o,height:u},v=new dv(100).encode(d,100);return e.processJPEG.call(this,v,n,r,i)},e.processGIF87A=e.processGIF89A}(mr.API),Tu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Tu.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){Ki.log("bit decode error:"+n)}},Tu.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,u=0;u<8&&8*i+u<this.width;u++){var h=this.palette[s>>7-u&1];this.data[o+4*u]=h.blue,this.data[o+4*u+1]=h.green,this.data[o+4*u+2]=h.red,this.data[o+4*u+3]=255}n!==0&&(this.pos+=4-n)}},Tu.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,u=s>>4,h=15&s,d=this.palette[u];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*i+1>=this.width)break;d=this.palette[h],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Tu.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},Tu.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&t)/t*255|0,u=(s>>5&t)/t*255|0,h=(s>>10&t)/t*255|0,d=s>>15?255:0,v=r*this.width*4+4*i;this.data[v]=h,this.data[v+1]=u,this.data[v+2]=o,this.data[v+3]=d}this.pos+=e}},Tu.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(o&t)/t*255|0,h=(o>>5&n)/n*255|0,d=(o>>11)/t*255|0,v=i*this.width*4+4*s;this.data[v]=d,this.data[v+1]=h,this.data[v+2]=u,this.data[v+3]=255}this.pos+=e}},Tu.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Tu.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=t*this.width*4+4*n;this.data[u]=s,this.data[u+1]=i,this.data[u+2]=r,this.data[u+3]=o}},Tu.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,i){var s=new Tu(t,!1),o=s.width,u=s.height,h={data:s.getData(),width:o,height:u},d=new dv(100).encode(h,100);return e.processJPEG.call(this,d,n,r,i)}}(mr.API),Fb.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,i){var s=new Fb(t),o=s.width,u=s.height,h={data:s.getData(),width:o,height:u},d=new dv(100).encode(h,100);return e.processJPEG.call(this,d,n,r,i)}}(mr.API),mr.API.processRGBA=function(e,t,n){for(var r=e.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),u=0,h=0,d=0;d<i;d+=4){var v=r[d],y=r[d+1],x=r[d+2],_=r[d+3];s[u++]=v,s[u++]=y,s[u++]=x,o[h++]=_}var P=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:P,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},mr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Af=mr.API,_0=Af.getCharWidthsArray=function(e,t){var n,r,i=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),u=t.widths?t.widths:i.metadata.Unicode.widths,h=u.fof?u.fof:1,d=t.kerning?t.kerning:i.metadata.Unicode.kerning,v=d.fof?d.fof:1,y=t.doKerning!==!1,x=0,_=e.length,P=0,T=u[0]||h,U=[];for(n=0;n<_;n++)r=e.charCodeAt(n),typeof i.metadata.widthOfString=="function"?U.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(x=y&&Oi(d[r])==="object"&&!isNaN(parseInt(d[r][P],10))?d[r][P]/v:0,U.push((u[r]||T)/h+x)),P=r;return U},Nb=Af.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return Af.processArabic&&(e=Af.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,n,i)/n:_0.apply(this,arguments).reduce(function(s,o){return s+o},0)},Db=function(e,t,n,r){for(var i=[],s=0,o=e.length,u=0;s!==o&&u+t[s]<n;)u+=t[s],s++;i.push(e.slice(0,s));var h=s;for(u=0;s!==o;)u+t[s]>r&&(i.push(e.slice(h,s)),u=0,h=s),u+=t[s],s++;return h!==s&&i.push(e.slice(h,s)),i},Ib=function(e,t,n){n||(n={});var r,i,s,o,u,h,d,v=[],y=[v],x=n.textIndent||0,_=0,P=0,T=e.split(" "),U=_0.apply(this,[" ",n])[0];if(h=n.lineIndent===-1?T[0].length+2:n.lineIndent||0){var N=Array(h).join(" "),j=[];T.map(function(J){(J=J.split(/\s*\n/)).length>1?j=j.concat(J.map(function(le,he){return(he&&le.length?`
`:"")+le})):j.push(J[0])}),T=j,h=Nb.apply(this,[N,n])}for(s=0,o=T.length;s<o;s++){var Z=0;if(r=T[s],h&&r[0]==`
`&&(r=r.substr(1),Z=1),x+_+(P=(i=_0.apply(this,[r,n])).reduce(function(J,le){return J+le},0))>t||Z){if(P>t){for(u=Db.apply(this,[r,i,t-(x+_),t]),v.push(u.shift()),v=[u.pop()];u.length;)y.push([u.shift()]);P=i.slice(r.length-(v[0]?v[0].length:0)).reduce(function(J,le){return J+le},0)}else v=[r];y.push(v),x=P+h,_=U}else v.push(r),x+=_+P,_=U}return d=h?function(J,le){return(le?N:"")+J.join(" ")}:function(J){return J.join(" ")},y.map(d)},Af.splitTextToSize=function(e,t,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(v){if(v.widths&&v.kerning)return{widths:v.widths,kerning:v.kerning};var y=this.internal.getFont(v.fontName,v.fontStyle);return y.metadata.Unicode?{widths:y.metadata.Unicode.widths||{0:1},kerning:y.metadata.Unicode.kerning||{}}:{font:y.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var u,h,d=[];for(u=0,h=r.length;u<h;u++)d=d.concat(Ib.apply(this,[r[u],o,s]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},r={},i=0;i<t.length;i++)n[t[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=t[i];var s=function(y){return"0x"+parseInt(y,10).toString(16)},o=e.__fontmetrics__.compress=function(y){var x,_,P,T,U=["{"];for(var N in y){if(x=y[N],isNaN(parseInt(N,10))?_="'"+N+"'":(N=parseInt(N,10),_=(_=s(N).slice(2)).slice(0,-1)+r[_.slice(-1)]),typeof x=="number")x<0?(P=s(x).slice(3),T="-"):(P=s(x).slice(2),T=""),P=T+P.slice(0,-1)+r[P.slice(-1)];else{if(Oi(x)!=="object")throw new Error("Don't know what to do with value type "+Oi(x)+".");P=o(x)}U.push(_+P)}return U.push("}"),U.join("")},u=e.__fontmetrics__.uncompress=function(y){if(typeof y!="string")throw new Error("Invalid argument passed to uncompress.");for(var x,_,P,T,U={},N=1,j=U,Z=[],J="",le="",he=y.length-1,Le=1;Le<he;Le+=1)(T=y[Le])=="'"?x?(P=x.join(""),x=void 0):x=[]:x?x.push(T):T=="{"?(Z.push([j,P]),j={},P=void 0):T=="}"?((_=Z.pop())[0][_[1]]=j,P=void 0,j=_[0]):T=="-"?N=-1:P===void 0?n.hasOwnProperty(T)?(J+=n[T],P=parseInt(J,16)*N,N=1,J=""):J+=T:n.hasOwnProperty(T)?(le+=n[T],j[P]=parseInt(le,16)*N,N=1,P=void 0,le=""):le+=T;return U},h={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:h,"Courier-Bold":h,"Courier-BoldOblique":h,"Courier-Oblique":h,Helvetica:h,"Helvetica-Bold":h,"Helvetica-BoldOblique":h,"Helvetica-Oblique":h,"Times-Roman":h,"Times-Bold":h,"Times-BoldItalic":h,"Times-Italic":h}},v={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(y){var x=y.font,_=v.Unicode[x.postScriptName];_&&(x.metadata.Unicode={},x.metadata.Unicode.widths=_.widths,x.metadata.Unicode.kerning=_.kerning);var P=d.Unicode[x.postScriptName];P&&(x.metadata.Unicode.encoding=P,x.encoding=P.codePages[0])}])}(mr.API),function(e){var t=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};e.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,u){u=/^\x00\x01\x00\x00/.test(u)?t(u):t(rp(u)),o.metadata=e.API.TTFFont.open(u),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(mr),function(e){function t(){return(br.canvg?Promise.resolve(br.canvg):Vh(()=>import("./index.es.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}mr.API.addSvgAsImage=function(n,r,i,s,o,u,h,d){if(isNaN(r)||isNaN(i))throw Ki.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw Ki.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var v=document.createElement("canvas");v.width=s,v.height=o;var y=v.getContext("2d");y.fillStyle="#fff",y.fillRect(0,0,v.width,v.height);var x={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},_=this;return t().then(function(P){return P.fromString(y,n,x)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(P){return P.render(x)}).then(function(){_.addImage(v.toDataURL("image/jpeg",1),r,i,s,o,h,d)})}}(),mr.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(t,n);return this},mr.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(o),h=[],d=0,v=0,y=0;function x(P,T){var U,N=!1;for(U=0;U<P.length;U+=1)P[U]===T&&(N=!0);return N}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var _=u.length;for(y=0;y<_;y+=1)n[u[y]].value=n[u[y]].defaultValue,n[u[y]].explicitSet=!1}if(Oi(e)==="object"){for(i in e)if(s=e[i],x(u,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&x(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(d=0;d<s.length;d+=1)if(r=!0,s[d].length===1&&typeof s[d][0]=="number")h.push(String(s[d]-1));else if(s[d].length>1){for(v=0;v<s[d].length;v+=1)typeof s[d][v]!="number"&&(r=!1);r===!0&&h.push([s[d][0]-1,s[d][1]-1].join(" "))}n[i].value="["+h.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var P,T=[];for(P in n)n[P].explicitSet===!0&&(n[P].type==="name"?T.push("/"+P+" /"+n[P].value):T.push("/"+P+" "+n[P].value));T.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+T.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),d=s.length+o.length+u.length+i.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+u+h),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(mr.API),function(e){var t=e.API,n=t.pdfEscape16=function(s,o){for(var u,h=o.metadata.Unicode.widths,d=["","0","00","000","0000"],v=[""],y=0,x=s.length;y<x;++y){if(u=o.metadata.characterToGlyph(s.charCodeAt(y)),o.metadata.glyIdsUsed.push(u),o.metadata.toUnicode[u]=s.charCodeAt(y),h.indexOf(u)==-1&&(h.push(u),h.push([parseInt(o.metadata.widthOfGlyph(u),10)])),u=="0")return v.join("");u=u.toString(16),v.push(d[4-u.length],u)}return v.join("")},r=function(s){var o,u,h,d,v,y,x;for(v=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],y=0,x=(u=Object.keys(s).sort(function(_,P){return _-P})).length;y<x;y++)o=u[y],h.length>=100&&(v+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(d=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),h.push("<"+o+"><"+d+">"));return h.length&&(v+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),v+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(o){var u=o.font,h=o.out,d=o.newObject,v=o.putStream;if(u.metadata instanceof e.API.TTFFont&&u.encoding==="Identity-H"){for(var y=u.metadata.Unicode.widths,x=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),_="",P=0;P<x.length;P++)_+=String.fromCharCode(x[P]);var T=d();v({data:_,addLength1:!0,objectId:T}),h("endobj");var U=d();v({data:r(u.metadata.toUnicode),addLength1:!0,objectId:U}),h("endobj");var N=d();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+Rf(u.fontName)),h("/FontFile2 "+T+" 0 R"),h("/FontBBox "+e.API.PDFObject.convert(u.metadata.bbox)),h("/Flags "+u.metadata.flags),h("/StemV "+u.metadata.stemV),h("/ItalicAngle "+u.metadata.italicAngle),h("/Ascent "+u.metadata.ascender),h("/Descent "+u.metadata.decender),h("/CapHeight "+u.metadata.capHeight),h(">>"),h("endobj");var j=d();h("<<"),h("/Type /Font"),h("/BaseFont /"+Rf(u.fontName)),h("/FontDescriptor "+N+" 0 R"),h("/W "+e.API.PDFObject.convert(y)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+u.encoding+")"),h(">>"),h(">>"),h("endobj"),u.objectNumber=d(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+U+" 0 R"),h("/BaseFont /"+Rf(u.fontName)),h("/Encoding /"+u.encoding),h("/DescendantFonts ["+j+" 0 R]"),h(">>"),h("endobj"),u.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(o){var u=o.font,h=o.out,d=o.newObject,v=o.putStream;if(u.metadata instanceof e.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var y=u.metadata.rawData,x="",_=0;_<y.length;_++)x+=String.fromCharCode(y[_]);var P=d();v({data:x,addLength1:!0,objectId:P}),h("endobj");var T=d();v({data:r(u.metadata.toUnicode),addLength1:!0,objectId:T}),h("endobj");var U=d();h("<<"),h("/Descent "+u.metadata.decender),h("/CapHeight "+u.metadata.capHeight),h("/StemV "+u.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+P+" 0 R"),h("/Flags 96"),h("/FontBBox "+e.API.PDFObject.convert(u.metadata.bbox)),h("/FontName /"+Rf(u.fontName)),h("/ItalicAngle "+u.metadata.italicAngle),h("/Ascent "+u.metadata.ascender),h(">>"),h("endobj"),u.objectNumber=d();for(var N=0;N<u.metadata.hmtx.widths.length;N++)u.metadata.hmtx.widths[N]=parseInt(u.metadata.hmtx.widths[N]*(1e3/u.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+T+" 0 R/BaseFont/"+Rf(u.fontName)+"/FontDescriptor "+U+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),h("endobj"),u.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,u=s.text||"",h=s.x,d=s.y,v=s.options||{},y=s.mutex||{},x=y.pdfEscape,_=y.activeFontKey,P=y.fonts,T=_,U="",N=0,j="",Z=P[T].encoding;if(P[T].encoding!=="Identity-H")return{text:u,x:h,y:d,options:v,mutex:y};for(j=u,T=_,Array.isArray(u)&&(j=u[0]),N=0;N<j.length;N+=1)P[T].metadata.hasOwnProperty("cmap")&&(o=P[T].metadata.cmap.unicode.codeMap[j[N].charCodeAt(0)]),o||j[N].charCodeAt(0)<256&&P[T].metadata.hasOwnProperty("Unicode")?U+=j[N]:U+="";var J="";return parseInt(T.slice(1))<14||Z==="WinAnsiEncoding"?J=x(U,T).split("").map(function(le){return le.charCodeAt(0).toString(16)}).join(""):Z==="Identity-H"&&(J=n(U,P[T])),y.isHex=!0,{text:J,x:h,y:d,options:v,mutex:y}};t.events.push(["postProcessText",function(s){var o=s.text||"",u=[],h={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?u.push([i(Object.assign({},h,{text:o[d][0]})).text,o[d][1],o[d][2]]):u.push(i(Object.assign({},h,{text:o[d]})).text);s.text=u}else s.text=i(Object.assign({},h,{text:o})).text}])}(mr),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,r){return t.call(this),this.internal.vFS[n]=r,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(mr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var i,s,o,u,h,d,v,y=t,x=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],_=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],P={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},T={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},U=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],N=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),j=!1,Z=0;this.__bidiEngine__={};var J=function($){var D=$.charCodeAt(),k=D>>8,I=T[k];return I!==void 0?y[256*I+(255&D)]:k===252||k===253?"AL":N.test(k)?"L":k===8?"R":"N"},le=function($){for(var D,k=0;k<$.length;k++){if((D=J($.charAt(k)))==="L")return!1;if(D==="R")return!0}return!1},he=function($,D,k,I){var W,G,K,q,ve=D[I];switch(ve){case"L":case"R":j=!1;break;case"N":case"AN":break;case"EN":j&&(ve="AN");break;case"AL":j=!0,ve="R";break;case"WS":ve="N";break;case"CS":I<1||I+1>=D.length||(W=k[I-1])!=="EN"&&W!=="AN"||(G=D[I+1])!=="EN"&&G!=="AN"?ve="N":j&&(G="AN"),ve=G===W?G:"N";break;case"ES":ve=(W=I>0?k[I-1]:"B")==="EN"&&I+1<D.length&&D[I+1]==="EN"?"EN":"N";break;case"ET":if(I>0&&k[I-1]==="EN"){ve="EN";break}if(j){ve="N";break}for(K=I+1,q=D.length;K<q&&D[K]==="ET";)K++;ve=K<q&&D[K]==="EN"?"EN":"N";break;case"NSM":if(o&&!u){for(q=D.length,K=I+1;K<q&&D[K]==="NSM";)K++;if(K<q){var Ce=$[I],Xe=Ce>=1425&&Ce<=2303||Ce===64286;if(W=D[K],Xe&&(W==="R"||W==="AL")){ve="R";break}}}ve=I<1||(W=D[I-1])==="B"?"N":k[I-1];break;case"B":j=!1,i=!0,ve=Z;break;case"S":s=!0,ve="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":j=!1;break;case"BN":ve="N"}return ve},Le=function($,D,k){var I=$.split("");return k&&V(I,k,{hiLevel:Z}),I.reverse(),D&&D.reverse(),I.join("")},V=function($,D,k){var I,W,G,K,q,ve=-1,Ce=$.length,Xe=0,B=[],te=Z?_:x,se=[];for(j=!1,i=!1,s=!1,W=0;W<Ce;W++)se[W]=J($[W]);for(G=0;G<Ce;G++){if(q=Xe,B[G]=he($,se,B,G),I=240&(Xe=te[q][P[B[G]]]),Xe&=15,D[G]=K=te[Xe][5],I>0)if(I===16){for(W=ve;W<G;W++)D[W]=1;ve=-1}else ve=-1;if(te[Xe][6])ve===-1&&(ve=G);else if(ve>-1){for(W=ve;W<G;W++)D[W]=K;ve=-1}se[G]==="B"&&(D[G]=0),k.hiLevel|=K}s&&function(ae,we,fe){for(var Q=0;Q<fe;Q++)if(ae[Q]==="S"){we[Q]=Z;for(var ue=Q-1;ue>=0&&ae[ue]==="WS";ue--)we[ue]=Z}}(se,D,Ce)},F=function($,D,k,I,W){if(!(W.hiLevel<$)){if($===1&&Z===1&&!i)return D.reverse(),void(k&&k.reverse());for(var G,K,q,ve,Ce=D.length,Xe=0;Xe<Ce;){if(I[Xe]>=$){for(q=Xe+1;q<Ce&&I[q]>=$;)q++;for(ve=Xe,K=q-1;ve<K;ve++,K--)G=D[ve],D[ve]=D[K],D[K]=G,k&&(G=k[ve],k[ve]=k[K],k[K]=G);Xe=q}Xe++}}},Y=function($,D,k){var I=$.split(""),W={hiLevel:Z};return k||(k=[]),V(I,k,W),function(G,K,q){if(q.hiLevel!==0&&v)for(var ve,Ce=0;Ce<G.length;Ce++)K[Ce]===1&&(ve=U.indexOf(G[Ce]))>=0&&(G[Ce]=U[ve+1])}(I,k,W),F(2,I,D,k,W),F(1,I,D,k,W),I.join("")};return this.__bidiEngine__.doBidiReorder=function($,D,k){if(function(W,G){if(G)for(var K=0;K<W.length;K++)G[K]=K;u===void 0&&(u=le(W)),d===void 0&&(d=le(W))}($,D),o||!h||d)if(o&&h&&u^d)Z=u?1:0,$=Le($,D,k);else if(!o&&h&&d)Z=u?1:0,$=Y($,D,k),$=Le($,D);else if(!o||u||h||d){if(o&&!h&&u^d)$=Le($,D),u?(Z=0,$=Y($,D,k)):(Z=1,$=Y($,D,k),$=Le($,D));else if(o&&u&&!h&&d)Z=1,$=Y($,D,k),$=Le($,D);else if(!o&&!h&&u^d){var I=v;u?(Z=1,$=Y($,D,k),Z=0,v=!1,$=Y($,D,k),v=I):(Z=0,$=Y($,D,k),$=Le($,D),Z=1,v=!1,$=Y($,D,k),v=I,$=Le($,D))}}else Z=0,$=Y($,D,k);else Z=u?1:0,$=Y($,D,k);return $},this.__bidiEngine__.setOptions=function($){$&&(o=$.isInputVisual,h=$.isOutputVisual,u=$.isInputRtl,d=$.isOutputRtl,v=$.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var u=0;for(o=[],u=0;u<i.length;u+=1)Object.prototype.toString.call(i[u])==="[object Array]"?o.push([n.doBidiReorder(i[u][0]),i[u][1],i[u][2]]):o.push([n.doBidiReorder(i[u])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(mr),mr.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new yh(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new bR(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new sR(this.contents),this.head=new lR(this),this.name=new dR(this),this.cmap=new O3(this),this.toUnicode={},this.hhea=new uR(this),this.maxp=new pR(this),this.hmtx=new gR(this),this.post=new hR(this),this.os2=new cR(this),this.loca=new _R(this),this.glyf=new mR(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,u,h,d;for(d=[],o=0,u=(h=this.bbox).length;o<u;o++)t=h[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,r){var i,s,o,u;for(o=0,s=0,u=(t=""+t).length;0<=u?s<u:s>u;s=0<=u?++s:--s)i=t.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},e.prototype.lineHeight=function(t,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var Gu,yh=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,r;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var n,r,i;for(i=[],n=0,r=t.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(t.charCodeAt(n)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,r,i,s,o,u,h;return t=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),u=this.readByte(),h=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^u)+(255^h)+1):72057594037927940*t+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*u+h},e.prototype.writeLongLong=function(t){var n,r;return n=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,r;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push(this.readByte());return n},e.prototype.write=function(t){var n,r,i,s;for(s=[],r=0,i=t.length;r<i;r++)n=t[r],s.push(this.writeByte(n));return s},e}(),sR=function(){var e;function t(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(n){var r,i,s,o,u,h,d,v,y,x,_,P,T;for(T in _=Object.keys(n).length,h=Math.log(2),y=16*Math.floor(Math.log(_)/h),o=Math.floor(y/h),v=16*_-y,(i=new yh).writeInt(this.scalarType),i.writeShort(_),i.writeShort(y),i.writeShort(o),i.writeShort(v),s=16*_,d=i.pos+s,u=null,P=[],n)for(x=n[T],i.writeString(T),i.writeInt(e(x)),i.writeInt(d),i.writeInt(x.length),P=P.concat(x),T==="head"&&(u=d),d+=x.length;d%4;)P.push(0),d++;return i.write(P),r=2981146554-e(i.data),i.pos=u+8,i.writeUInt32(r),i.data},e=function(n){var r,i,s,o;for(n=N3.call(n);n.length%4;)n.push(0);for(s=new yh(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},t}(),aR={}.hasOwnProperty,gc=function(e,t){for(var n in t)aR.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};Gu=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var lR=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return gc(t,Gu),t.prototype.tag="head",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},t.prototype.encode=function(n){var r;return(r=new yh).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},t}(),jb=function(){function e(t,n){var r,i,s,o,u,h,d,v,y,x,_,P,T,U,N,j,Z;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),y=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=t.readByte();break;case 4:for(_=t.readUInt16(),x=_/2,t.pos+=6,s=function(){var J,le;for(le=[],h=J=0;0<=x?J<x:J>x;h=0<=x?++J:--J)le.push(t.readUInt16());return le}(),t.pos+=2,T=function(){var J,le;for(le=[],h=J=0;0<=x?J<x:J>x;h=0<=x?++J:--J)le.push(t.readUInt16());return le}(),d=function(){var J,le;for(le=[],h=J=0;0<=x?J<x:J>x;h=0<=x?++J:--J)le.push(t.readUInt16());return le}(),v=function(){var J,le;for(le=[],h=J=0;0<=x?J<x:J>x;h=0<=x?++J:--J)le.push(t.readUInt16());return le}(),i=(this.length-t.pos+this.offset)/2,u=function(){var J,le;for(le=[],h=J=0;0<=i?J<i:J>i;h=0<=i?++J:--J)le.push(t.readUInt16());return le}(),h=N=0,Z=s.length;N<Z;h=++N)for(U=s[h],r=j=P=T[h];P<=U?j<=U:j>=U;r=P<=U?++j:--j)v[h]===0?o=r+d[h]:(o=u[v[h]/2+(r-P)-(x-h)]||0)!==0&&(o+=d[h]),this.codeMap[r]=65535&o}t.pos=y}return e.encode=function(t,n){var r,i,s,o,u,h,d,v,y,x,_,P,T,U,N,j,Z,J,le,he,Le,V,F,Y,$,D,k,I,W,G,K,q,ve,Ce,Xe,B,te,se,ae,we,fe,Q,ue,Re,Me,Ze;switch(I=new yh,o=Object.keys(t).sort(function(oe,me){return oe-me}),n){case"macroman":for(T=0,U=function(){var oe=[];for(P=0;P<256;++P)oe.push(0);return oe}(),j={0:0},s={},W=0,ve=o.length;W<ve;W++)j[ue=t[i=o[W]]]==null&&(j[ue]=++T),s[i]={old:t[i],new:j[t[i]]},U[i]=j[t[i]];return I.writeUInt16(1),I.writeUInt16(0),I.writeUInt32(12),I.writeUInt16(0),I.writeUInt16(262),I.writeUInt16(0),I.write(U),{charMap:s,subtable:I.data,maxGlyphID:T+1};case"unicode":for(D=[],y=[],Z=0,j={},r={},N=d=null,G=0,Ce=o.length;G<Ce;G++)j[le=t[i=o[G]]]==null&&(j[le]=++Z),r[i]={old:le,new:j[le]},u=j[le]-i,N!=null&&u===d||(N&&y.push(N),D.push(i),d=u),N=i;for(N&&y.push(N),y.push(65535),D.push(65535),Y=2*(F=D.length),V=2*Math.pow(Math.log(F)/Math.LN2,2),x=Math.log(V/2)/Math.LN2,Le=2*F-V,h=[],he=[],_=[],P=K=0,Xe=D.length;K<Xe;P=++K){if($=D[P],v=y[P],$===65535){h.push(0),he.push(0);break}if($-(k=r[$].new)>=32768)for(h.push(0),he.push(2*(_.length+F-P)),i=q=$;$<=v?q<=v:q>=v;i=$<=v?++q:--q)_.push(r[i].new);else h.push(k-$),he.push(0)}for(I.writeUInt16(3),I.writeUInt16(1),I.writeUInt32(12),I.writeUInt16(4),I.writeUInt16(16+8*F+2*_.length),I.writeUInt16(0),I.writeUInt16(Y),I.writeUInt16(V),I.writeUInt16(x),I.writeUInt16(Le),fe=0,B=y.length;fe<B;fe++)i=y[fe],I.writeUInt16(i);for(I.writeUInt16(0),Q=0,te=D.length;Q<te;Q++)i=D[Q],I.writeUInt16(i);for(Re=0,se=h.length;Re<se;Re++)u=h[Re],I.writeUInt16(u);for(Me=0,ae=he.length;Me<ae;Me++)J=he[Me],I.writeUInt16(J);for(Ze=0,we=_.length;Ze<we;Ze++)T=_[Ze],I.writeUInt16(T);return{charMap:r,subtable:I.data,maxGlyphID:Z+1}}},e}(),O3=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return gc(t,Gu),t.prototype.tag="cmap",t.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new jb(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=jb.encode(n,r),(s=new yh).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},t}(),uR=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return gc(t,Gu),t.prototype.tag="hhea",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},t}(),cR=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return gc(t,Gu),t.prototype.tag="OS/2",t.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},t}(),hR=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return gc(t,Gu),t.prototype.tag="post",t.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var u,h,d;for(d=[],o=u=0,h=this.file.maxp.numGlyphs;0<=h?u<h:u>h;o=0<=h?++u:--u)d.push(n.readUInt32());return d}).call(this)}},t}(),fR=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},dR=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return gc(t,Gu),t.prototype.tag="name",t.prototype.parse=function(n){var r,i,s,o,u,h,d,v,y,x,_;for(n.pos=this.offset,n.readShort(),r=n.readShort(),h=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+h+n.readShort()});for(d={},o=y=0,x=i.length;y<x;o=++y)s=i[o],n.pos=s.offset,v=n.readString(s.length),u=new fR(v,s),d[_=s.nameID]==null&&(d[_]=[]),d[s.nameID].push(u);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t}(),pR=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return gc(t,Gu),t.prototype.tag="maxp",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},t}(),gR=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return gc(t,Gu),t.prototype.tag="hmtx",t.prototype.parse=function(n){var r,i,s,o,u,h,d;for(n.pos=this.offset,this.metrics=[],r=0,h=this.file.hhea.numberOfMetrics;0<=h?r<h:r>h;r=0<=h?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var v,y;for(y=[],r=v=0;0<=s?v<s:v>s;r=0<=s?++v:--v)y.push(n.readInt16());return y}(),this.widths=(function(){var v,y,x,_;for(_=[],v=0,y=(x=this.metrics).length;v<y;v++)o=x[v],_.push(o.advance);return _}).call(this),i=this.widths[this.widths.length-1],d=[],r=u=0;0<=s?u<s:u>s;r=0<=s?++u:--u)d.push(this.widths.push(i));return d},t.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},t}(),N3=[].slice,mR=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return gc(t,Gu),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(n){var r,i,s,o,u,h,d,v,y,x;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,u=(h=new yh(r.read(s))).readShort(),v=h.readShort(),x=h.readShort(),d=h.readShort(),y=h.readShort(),this.cache[n]=u===-1?new yR(h,v,x,d,y):new vR(h,u,v,x,d,y),this.cache[n]))},t.prototype.encode=function(n,r,i){var s,o,u,h,d;for(u=[],o=[],h=0,d=r.length;h<d;h++)s=n[r[h]],o.push(u.length),s&&(u=u.concat(s.encode(i)));return o.push(u.length),{table:u,offsets:o}},t}(),vR=function(){function e(t,n,r,i,s,o){this.raw=t,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),yR=function(){function e(t,n,r,i,s){var o,u;for(this.raw=t,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;u=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&u;)o.pos+=1&u?4:2,128&u?o.pos+=8:64&u?o.pos+=4:8&u&&(o.pos+=2)}return e.prototype.encode=function(){var t,n,r;for(n=new yh(N3.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),_R=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return gc(t,Gu),t.prototype.tag="loca",t.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(n.readUInt32());return o}).call(this)},t.prototype.indexOf=function(n){return this.offsets[n]},t.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},t.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,u=0;u<i.length;++u)if(i[u]=s,o<r.length&&r[o]==u){++o,i[u]=s;var h=this.offsets[u],d=this.offsets[u+1]-h;d>0&&(s+=d)}for(var v=new Array(4*i.length),y=0;y<i.length;++y)v[4*y+3]=255&i[y],v[4*y+2]=(65280&i[y])>>8,v[4*y+1]=(16711680&i[y])>>16,v[4*y]=(4278190080&i[y])>>24;return v},t}(),bR=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,t={},s=this.subset)r=s[n],t[n]=i[r];return t},e.prototype.glyphsFor=function(t){var n,r,i,s,o,u,h;for(i={},o=0,u=t.length;o<u;o++)i[s=t[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in h=this.glyphsFor(n))r=h[s],i[s]=r;return i},e.prototype.encode=function(t,n){var r,i,s,o,u,h,d,v,y,x,_,P,T,U,N;for(i in r=O3.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),_={0:0},N=r.charMap)_[(h=N[i]).old]=h.new;for(P in x=r.maxGlyphID,o)P in _||(_[P]=x++);return v=function(j){var Z,J;for(Z in J={},j)J[j[Z]]=Z;return J}(_),y=Object.keys(v).sort(function(j,Z){return j-Z}),T=function(){var j,Z,J;for(J=[],j=0,Z=y.length;j<Z;j++)u=y[j],J.push(v[u]);return J}(),s=this.font.glyf.encode(o,T,_),d=this.font.loca.encode(s.offsets,T),U={cmap:this.font.cmap.raw(),glyf:s.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(U["OS/2"]=this.font.os2.raw()),this.font.directory.encode(U)},e}();mr.API.PDFObject=function(){var e;function t(){}return e=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},t.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var u,h,d;for(d=[],u=0,h=n.length;u<h;u++)r=n[u],d.push(t.convert(r));return d}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+t.convert(o));return s.push(">>"),s.join(`
`)}return""+n},t}();const wR={class:"h-full flex"},xR={class:"flex-1 relative"},LR={key:0,class:"absolute inset-0 bg-black/30 backdrop-blur-sm z-[2000] flex items-center justify-center"},SR={key:1,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[3000]"},ER={class:"text-center max-w-lg mx-auto p-8"},CR={class:"space-y-4"},PR={class:"map-parent"},AR={key:0,class:"fixed top-16 left-0 right-0 z-[1500]"},MR={class:"map-content flex flex-col md:flex-row relative"},kR={class:"flex-1 relative"},TR={key:0,class:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 z-50"},BR={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center z-[9999] p-4 overflow-y-auto"},OR={class:"bg-white rounded-lg p-6 max-w-2xl w-full my-8 relative"},NR={class:"flex justify-between items-center mb-4 sticky top-0 bg-white pb-4 border-b"},DR={class:"overflow-y-auto max-h-[calc(100vh-12rem)]"},IR={key:0,class:"space-y-4"},RR={key:0,class:"space-y-2"},FR={class:"grid grid-cols-1 gap-2"},jR=["onClick"],zR={class:"font-medium text-gray-900"},UR={key:1,class:"space-y-2"},$R={class:"flex items-center mb-4"},VR={class:"text-sm text-gray-600"},HR={class:"grid grid-cols-1 gap-2"},GR=["onClick"],qR={class:"font-medium text-gray-900"},WR={key:2,class:"space-y-2"},ZR={class:"flex items-center mb-4"},KR={class:"text-sm text-gray-600"},YR={class:"grid grid-cols-1 gap-2"},XR={key:0,class:"text-center py-8"},JR=["onClick"],QR={class:"font-medium text-gray-900"},eF={key:3,class:"space-y-2"},tF={class:"flex items-center mb-4"},nF={class:"text-sm text-gray-600"},rF={class:"grid grid-cols-1 gap-2"},iF=["onClick"],oF={class:"font-medium text-gray-900"},sF={class:"text-sm text-gray-500"},aF={class:"text-xs text-gray-400 mt-1"},lF={key:1,class:"space-y-4"},uF={key:0,class:"space-y-2"},cF={class:"grid grid-cols-1 gap-2"},hF={key:0,class:"text-center py-8"},fF=["onClick"],dF={class:"font-medium text-gray-900"},pF={key:1,class:"space-y-2"},gF={class:"flex items-center mb-4"},mF={class:"text-sm text-gray-600"},vF={class:"grid grid-cols-1 gap-2"},yF=["onClick"],_F={class:"font-medium text-gray-900"},bF={class:"text-sm text-gray-500"},wF={class:"text-xs text-gray-400 mt-1"},xF={key:2,class:"space-y-4"},LF={key:3,class:"space-y-4"},SF={key:0,class:"text-center py-8"},EF={key:1,class:"space-y-2"},CF=["onClick"],PF={class:"font-medium text-gray-900"},AF={class:"text-sm text-gray-500"},MF={class:"text-xs text-gray-400 mt-1"},zb=Ns({__name:"MapView",emits:["shape-selected"],setup(e,{emit:t}){const n=Gt(null),r=Gt(!1),i=dy(),s=f3(),o=Gt([]),{currentTool:u,selectedShape:h,map:d,initMap:v,setDrawingTool:y,updateShapeStyle:x,updateShapeProperties:_,featureGroup:P,adjustView:T,clearActiveControlPoints:U,calculateConnectedCoverageArea:N}=YD(),{initMap:j,changeBaseMap:Z}=XD(),J=Gt(!1),le=Gt(!1),he=Gt(null),Le=Gt(!1),V=Gt(null),F=Da(),Y=Gt([]),$=Gt([]),D=Gt([]),k=Gt(null),I=Gt(null),W=Gt(null),G=Gt(!1),K=Gt(!1),q=Gt(!1),ve=Gt(null),Ce=ir(()=>{var ft,Ue;return console.log("[MapView][filteredClients] Computing with:",{userType:(ft=F.user)==null?void 0:ft.user_type,selectedSalarie:k.value,salarieVisiteurs:$.value,visiteurCount:((Ue=$.value)==null?void 0:Ue.length)||0}),F.isSalarie||k.value?$.value:[]}),Xe=ir(()=>{var un,Qt,Ye;if(!h.value)return null;console.log("[MapView][selectedShape] Initial layer state:",{layer:h.value,hasName:"name"in h.value,name:h.value.name,hasProperties:"properties"in h.value,propertiesName:(un=h.value.properties)==null?void 0:un.name,allLayerKeys:Object.keys(h.value),allPropertiesKeys:h.value.properties?Object.keys(h.value.properties):[],_leaflet_id:h.value._leaflet_id,_dbId:h.value._dbId,descriptor:Object.getOwnPropertyDescriptor(h.value,"name")});const ft=h.value.properties||{};let Ue;if(ft.style&&ft.style.name)Ue=ft.style.name,console.log("[MapView][selectedShape] Using name from style:",Ue);else if(ft.name)Ue=ft.name,console.log("[MapView][selectedShape] Using name from properties:",Ue);else if(h.value.name)Ue=h.value.name,console.log("[MapView][selectedShape] Using name from layer:",Ue);else{const vn=Object.getOwnPropertyDescriptor(h.value,"name");vn&&vn.value&&(Ue=vn.value,console.log("[MapView][selectedShape] Found name in non-enumerable layer property:",Ue));const Sn=["_name","displayName","title"];for(const ln of Sn)if(h.value[ln]){Ue=h.value[ln],console.log(`[MapView][selectedShape] Found name in ${ln}:`,Ue);break}}Ue&&(console.log(`[MapView][selectedShape] Ensuring name "${Ue}" is set everywhere`),h.value.properties||(h.value.properties={}),h.value.properties.name=Ue,h.value.properties.style||(h.value.properties.style={}),h.value.properties.style.name=Ue,h.value.name=Ue,typeof h.value.setName=="function"&&(h.value.setName(Ue),console.log(`[MapView][selectedShape] Used setName method to set name "${Ue}"`))),console.log("[MapView][selectedShape] Preparing properties for DrawingTools:",{type:ft.type,name:ft.name,foundName:Ue,hasNameProperty:"name"in ft,allPropertiesKeys:Object.keys(ft),layerId:h.value._leaflet_id,rawProperties:ft,layerName:h.value.name,layerPropertiesName:(Qt=h.value.properties)==null?void 0:Qt.name});const Dt={...ft,name:Ue||h.value.name||ft.name||void 0},gn={type:Dt.type||"unknown",properties:Dt,layer:h.value};return console.log("[MapView][selectedShape] Final shape object for DrawingTools:",{type:gn.type,hasName:"name"in gn.properties,name:gn.properties.name,layerName:gn.layer.name,layerPropertiesName:(Ye=gn.layer.properties)==null?void 0:Ye.name}),gn});function B(ft){const Ue=ft.getCenter(),Dt=ft.getZoom(),gn={lat:Ue.lat,lng:Ue.lng,zoom:Dt};document.cookie=`mapState=${JSON.stringify(gn)};max-age=2592000;path=/`}function te(){const Ue=document.cookie.split(";").find(Dt=>Dt.trim().startsWith("mapState="));if(Ue)try{return JSON.parse(Ue.split("=")[1])}catch(Dt){return console.error("Erreur lors de la lecture du cookie de position:",Dt),null}return null}Ia(async()=>{var ft,Ue;try{if(await i.fetchPlans(),(F.isAdmin||F.isEntreprise)&&await Kt(),F.isEntreprise){G.value=!0;try{const Ye=await er.get("/users/",{params:{role:"SALARIE",entreprise:(ft=F.user)==null?void 0:ft.id}});Y.value=Ye.data}catch(Ye){console.error("Error loading salaries:",Ye),Y.value=[]}finally{G.value=!1}}if(F.isSalarie){K.value=!0;try{const Ye=await F.fetchSalarieVisiteurs(((Ue=F.user)==null?void 0:Ue.id)||0);$.value=Array.isArray(Ye)?Ye:[Ye]}catch(Ye){console.error("Error loading clients:",Ye)}finally{K.value=!1}}const Dt=te(),gn=Dt?[Dt.lat,Dt.lng]:[46.603354,1.888334],un=(Dt==null?void 0:Dt.zoom)??6;if(n.value&&!d.value){const Ye=v(n.value,gn,un);Ye.pm.setLang("fr"),Ye.pm.addControls({rotateMode:!1}),j(Ye),Ye.on("moveend",()=>{B(Ye)}),window.addEventListener("map-set-location",vn=>{if(Ye&&vn.detail){const{lat:Sn,lng:ln,zoom:wn}=vn.detail;Ye.flyTo([Sn,ln],wn,{duration:1.5,easeLinearity:.25})}})}const Qt=localStorage.getItem("lastPlanId");if(Qt)try{console.log("[MapView][onMounted] Chargement immdiat du dernier plan:",Qt),await fe(parseInt(Qt));const Ye=document.querySelector(".map-parent");Ye instanceof HTMLElement&&(Ye.style.display="block")}catch(Ye){console.error("[MapView][onMounted] Erreur chargement dernier plan:",Ye),he.value=null,i.clearCurrentPlan(),s.clearCurrentPlan(),ae(),localStorage.removeItem("lastPlanId")}else console.log("[MapView][onMounted] Aucun dernier plan  charger"),he.value=null,i.clearCurrentPlan(),s.clearCurrentPlan(),ae();window.addEventListener("shape:created",Ye=>{const{shape:vn,type:Sn,properties:ln}=Ye.detail;console.log("[MapView] Nouvelle forme cre",{shape:vn,type:Sn,properties:ln}),s.addElement(vn),y("")})}catch(Dt){console.error("Error during component mount:",Dt),he.value=null,i.clearCurrentPlan(),s.clearCurrentPlan(),ae(),localStorage.removeItem("lastPlanId")}}),hs(()=>s.hasUnsavedChanges,ft=>{console.log("[MapView][watch drawingStore.hasUnsavedChanges]",ft),ft&&he.value&&i.markUnsavedChanges()}),hs(d,async ft=>{var Ue;console.log(`
[MapView][watch map] Nouvelle carte:`,!!ft),ft&&i.currentPlan&&!((Ue=P.value)!=null&&Ue.getLayers().length)&&(console.log("[MapView][watch map] Chargement initial des lments du plan:",i.currentPlan.id),ae(),await s.loadPlanElements(i.currentPlan.id))}),hs(()=>i.currentPlan,async(ft,Ue)=>{var Dt,gn,un;if((ft==null?void 0:ft.id)===(Ue==null?void 0:Ue.id)){console.log("[MapView][watch currentPlan] Plan identique, pas de rechargement ncessaire");return}console.log(`
[MapView][watch currentPlan] ====== CHANGEMENT DE PLAN ======`),console.log("[MapView][watch currentPlan] Nouveau plan:",ft==null?void 0:ft.id);try{if(ft){console.log("[MapView][watch currentPlan] Mise  jour du plan courant..."),he.value=ft;const Qt=document.querySelector(".map-parent");Qt instanceof HTMLElement&&(Qt.style.display="block"),console.log("[MapView][watch currentPlan] Plan mis  jour avec succs")}else{console.log("[MapView][watch currentPlan] Nettoyage du plan courant..."),he.value=null,ae();const Qt=document.querySelector(".map-parent");Qt instanceof HTMLElement&&(Qt.style.display="none")}}catch(Qt){console.error("[MapView][watch currentPlan] ERREUR:",Qt),he.value=null,ae()}console.log("[MapView][watch currentPlan] tat final:",{currentPlanId:(Dt=he.value)==null?void 0:Dt.id,storePlanId:(gn=i.currentPlan)==null?void 0:gn.id,mapVisible:d.value!==null,mapParentDisplay:(un=document.querySelector(".map-parent"))==null?void 0:un.getAttribute("style")}),console.log(`[MapView][watch currentPlan] ====== FIN CHANGEMENT ======
`)},{immediate:!0}),cd(()=>{d.value&&d.value.off("moveend"),window.removeEventListener("shape:created",()=>{})});function se(){r.value=!r.value}function ae(){P.value&&P.value.clearLayers(),o.value=[],U(),h.value=null,u.value=""}async function we(ft){return await on.measureAsync("refreshMapWithPlan",async()=>{try{on.measure("refreshMapWithPlan:clearMap",()=>{ae()},"MapView"),await on.measureAsync("refreshMapWithPlan:loadPlanElements",async()=>{await s.loadPlanElements(ft)},"MapView");const Ue=on.measure("refreshMapWithPlan:getPlanById",()=>i.getPlanById(ft),"MapView");Ue?(on.measure("refreshMapWithPlan:updateCurrentPlan",()=>{he.value=Ue,i.setCurrentPlan(Ue),s.setCurrentPlan(Ue.id),localStorage.setItem("lastPlanId",Ue.id.toString())},"MapView"),d.value&&P.value&&await on.measureAsync("refreshMapWithPlan:addShapesToMap",async()=>{console.log("[MapView][refreshMapWithPlan] lments disponibles:",{count:s.getCurrentElements.length,elements:s.getCurrentElements.map(Qt=>{var Ye;return{id:Qt.id,type:Qt.type_forme,hasName:Qt.data&&"name"in Qt.data,name:(Ye=Qt.data)==null?void 0:Ye.name}})});const Dt=s.getCurrentElements.reduce((Qt,Ye)=>(Qt[Ye.type_forme]||(Qt[Ye.type_forme]=[]),Qt[Ye.type_forme].push(Ye),Qt),{}),gn=10,un=Object.entries(Dt).map(async([Qt,Ye])=>{for(let vn=0;vn<Ye.length;vn+=gn){const Sn=Ye.slice(vn,vn+gn);await Promise.all(Sn.map(async ln=>{await on.measureAsync(`refreshMapWithPlan:createElement:${ln.type_forme}`,async()=>{var ur;if(!P.value||!ln.data)return;let wn=null;switch(ln.type_forme){case"Circle":{const En=ln.data;En.center&&En.radius&&(wn=new Df(Rt.latLng(En.center[1],En.center[0]),{...En.style,radius:En.radius}),En.name&&(wn.properties={type:"Circle",name:En.name,style:En.style,radius:En.radius,diameter:En.radius*2,surface:Math.PI*En.radius*En.radius,perimeter:2*Math.PI*En.radius},wn.name=En.name));break}case"Rectangle":{const En=ln.data;if(En.bounds){const rr=Rt.latLngBounds(Rt.latLng(En.bounds.southWest[1],En.bounds.southWest[0]),Rt.latLng(En.bounds.northEast[1],En.bounds.northEast[0]));wn=new Aa(rr,En.style),En.name&&(wn.properties={name:En.name},wn.name=En.name)}break}case"Polygon":{const En=ln.data;if(En.points&&En.points.length>0){const rr=En.points.map(Wr=>Rt.latLng(Wr[1],Wr[0]));wn=new Hh(rr,En.style),En.name&&(wn.properties={name:En.name},wn.name=En.name)}break}case"Line":{const En=ln.data;if(En.points&&En.points.length>0){const rr=En.points.map(Wr=>Rt.latLng(Wr[1],Wr[0]));wn=new ks(rr,En.style),En.name&&(wn.properties={name:En.name},wn.name=En.name)}break}case"ElevationLine":{const En=ln.data;if(En.points&&En.points.length>0){const rr=En.points.map(Wr=>Rt.latLng(Wr[1],Wr[0]));wn=new nf(rr,En.style),En.name&&(wn.properties={name:En.name,type:"ElevationLine",elevationData:En.elevationData,minElevation:En.minElevation,maxElevation:En.maxElevation,elevationGain:En.elevationGain,elevationLoss:En.elevationLoss,averageSlope:En.averageSlope,maxSlope:En.maxSlope},wn.name=En.name),En.elevationData&&(wn.elevationData=En.elevationData)}break}}wn&&(wn._dbId=ln.id,(ur=P.value)==null||ur.addLayer(wn),o.value.push({id:ln.id,type:ln.type_forme,layer:wn,properties:wn.properties}))},"MapView")})),await new Promise(ln=>setTimeout(ln,0))}});await Promise.all(un),on.measure("refreshMapWithPlan:adjustView",()=>{T()},"MapView")},"MapView"),console.log(`Plan ${ft} charg avec succs avec ${s.getCurrentElements.length} formes`)):console.error(`Plan ${ft} introuvable aprs chargement`),le.value=!1}catch(Ue){throw console.error("Erreur lors du rafrachissement de la carte:",Ue),Ue}},"MapView")}async function fe(ft){return await on.measureAsync("loadPlan",async()=>{var Ue;console.log(`
[MapView][loadPlan] ====== DBUT CHARGEMENT PLAN ======`),console.log("[MapView][loadPlan] Tentative de chargement du plan:",ft);try{const Dt=await on.measureAsync("loadPlan:getPlanFromStore",async()=>i.getPlanById(ft),"MapView");if(console.log("[MapView][loadPlan] Plan trouv dans le store:",!!Dt),!Dt){console.log("[MapView][loadPlan] Plan non trouv dans le store, vrification API...");try{await on.measureAsync("loadPlan:apiCheck",async()=>{await er.get(`/plans/${ft}/`)},"MapView")}catch(gn){throw((Ue=gn.response)==null?void 0:Ue.status)===404&&(console.warn("[MapView][loadPlan] Plan non trouv - Nettoyage du localStorage"),localStorage.removeItem("lastPlanId"),he.value=null,i.clearCurrentPlan(),s.clearCurrentPlan(),ae()),gn}}console.log("[MapView][loadPlan] Rafrachissement de la carte..."),await on.measureAsync("loadPlan:refreshMap",async()=>{await we(ft)},"MapView"),le.value=!1,console.log("[MapView][loadPlan] Invalidation de la taille de la carte..."),Qe(),console.log("[MapView][loadPlan] Plan charg avec succs:",{planId:ft,elementsCount:s.getCurrentElements.length})}catch(Dt){throw console.error("Erreur lors du chargement du plan:",Dt),on.measure("loadPlan:errorRecovery",()=>{he.value=null,i.clearCurrentPlan(),s.clearCurrentPlan(),ae(),localStorage.removeItem("lastPlanId")},"MapView"),Dt}},"MapView")}async function Q(){var ft;if(!he.value||!P.value){console.warn("Aucun plan actif ou groupe de formes  sauvegarder");return}Le.value=!0,V.value="saving";try{const Ue=[],Dt=new Set(s.getCurrentElements.filter(Ye=>Ye.id!==void 0).map(Ye=>Ye.id)),gn=new Set;console.log("[savePlan] Dbut de la sauvegarde",{featureGroupLayers:P.value.getLayers().length,existingIds:Array.from(Dt),currentElements:s.getCurrentElements}),P.value.eachLayer(Ye=>{var wn,ur,En,rr,Wr,ki,Fn,oo,jo,fi,Wn,bn;console.log("[savePlan] Traitement de la couche",{type:(wn=Ye.properties)==null?void 0:wn.type,name:(ur=Ye.properties)==null?void 0:ur.name,isPolygon:Ye instanceof Rt.Polygon,properties:Ye.properties});let vn,Sn;const ln={color:Ye.options.color||"#3388ff",weight:Ye.options.weight||3,opacity:Ye.options.opacity||1,fillColor:Ye.options.fillColor||"#3388ff",fillOpacity:Ye.options.fillOpacity||.2,dashArray:Ye.options.dashArray||""};if(Ye instanceof Aa){vn="Rectangle";const tr=Ye.getBounds();Sn={bounds:{southWest:[tr.getSouthWest().lng,tr.getSouthWest().lat],northEast:[tr.getNorthEast().lng,tr.getNorthEast().lat]},style:ln,name:((En=Ye.properties)==null?void 0:En.name)||"",rotation:Ye.getRotation(),width:Ye.getDimensions().width,height:Ye.getDimensions().height,center:[Ye.getCenter().lng,Ye.getCenter().lat]}}else if(Ye instanceof Rt.Circle)vn="Circle",Sn={center:[Ye.getLatLng().lng,Ye.getLatLng().lat],radius:Ye.getRadius(),name:((rr=Ye.properties)==null?void 0:rr.name)||"",style:ln};else if(Ye instanceof Rt.Rectangle){vn="Rectangle";const tr=Ye.getBounds();Sn={bounds:{southWest:[tr.getSouthWest().lng,tr.getSouthWest().lat],northEast:[tr.getNorthEast().lng,tr.getNorthEast().lat]},name:((Wr=Ye.properties)==null?void 0:Wr.name)||"",style:ln}}else Ye instanceof Rt.Polyline&&!(Ye instanceof Rt.Polygon)?((ki=Ye.properties)==null?void 0:ki.type)==="ElevationLine"?(vn="ElevationLine",Sn={points:Ye.getLatLngs().map(hn=>[hn.lng,hn.lat]),style:{...ln,color:((Fn=Ye.properties.style)==null?void 0:Fn.color)||"#FF4500",weight:((oo=Ye.properties.style)==null?void 0:oo.weight)||4,opacity:((jo=Ye.properties.style)==null?void 0:jo.opacity)||.8},name:((fi=Ye.properties)==null?void 0:fi.name)||"",elevationData:Ye.properties.elevationData,samplePointStyle:Ye.properties.samplePointStyle,minMaxPointStyle:Ye.properties.minMaxPointStyle,minElevation:Ye.properties.minElevation,maxElevation:Ye.properties.maxElevation,elevationGain:Ye.properties.elevationGain,elevationLoss:Ye.properties.elevationLoss,averageSlope:Ye.properties.averageSlope,maxSlope:Ye.properties.maxSlope}):(vn="Line",Sn={points:Ye.getLatLngs().map(hn=>[hn.lng,hn.lat]),name:((Wn=Ye.properties)==null?void 0:Wn.name)||"",style:ln}):Ye instanceof Rt.Polygon&&!(Ye instanceof Rt.Rectangle)&&(vn="Polygon",Sn={points:Ye.getLatLngs()[0].map(hn=>[hn.lng,hn.lat]),name:((bn=Ye.properties)==null?void 0:bn.name)||"",style:ln});if(vn&&Sn){let tr=Ye._elementId;Ye._dbId&&(tr=Ye._dbId,typeof tr=="number"&&gn.add(tr)),Ue.push({id:tr,type_forme:vn,data:Sn})}}),console.log("[savePlan] lments  sauvegarder",{totalElements:Ue.length,elements:Ue.map(Ye=>({type:Ye.type_forme,hasPoints:"points"in Ye.data,hasStyle:"style"in Ye.data}))});const un=Array.from(Dt).filter(Ye=>!gn.has(Ye));s.elements=Ue;const Qt=await s.saveToPlan(he.value.id,{elementsToDelete:un});if(Qt&&((ft=he.value)!=null&&ft.id)){const Ye=he.value.id;he.value={...he.value,...Qt},i.updatePlanDetails(Ye,Qt)}V.value="success",setTimeout(()=>{V.value=null},3e3)}catch(Ue){console.error("Erreur lors de la sauvegarde du plan:",Ue),V.value=null}finally{Le.value=!1}}wh(()=>{F.user||me(),i.clearCurrentPlan(),s.clearCurrentPlan()});function ue(ft){_(ft)}function Re(ft){try{const Ue=new Date(ft);return isNaN(Ue.getTime())?(console.error("Date invalide reue:",ft),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(Ue)}catch(Ue){return console.error("Erreur lors du formatage de la date:",Ue),"Date invalide"}}const Me=()=>{P.value&&T()},Ze=()=>{h.value&&P.value&&(y(""),P.value.removeLayer(h.value),h.value=null)};async function oe(ft){console.log(`onPlanCreated - Tentative de chargement du plan ${ft}`),await i.fetchPlans();const Ue=i.getPlanById(ft);Ue?(console.log(`Plan ${ft} trouv, chargement en cours...`),localStorage.setItem("lastPlanId",ft.toString()),he.value=Ue,i.setCurrentPlan(Ue),s.setCurrentPlan(Ue.id),J.value=!1,Qe(),console.log(`Plan ${ft} charg avec succs`)):console.error(`Plan ${ft} introuvable aprs cration! Vrifiez les permissions.`)}hs(k,async ft=>{var Ue;if(ft&&((Ue=F.user)==null?void 0:Ue.user_type)==="admin"){K.value=!0;try{const Dt=await F.fetchSalarieVisiteurs(ft.id);$.value=Array.isArray(Dt)?Dt:[Dt]}catch(Dt){console.error("[MapView][watch selectedSalarie] Error:",Dt),$.value=[]}finally{K.value=!1}}});function me(){localStorage.removeItem("lastPlanId")}function pe(ft,Ue="m"){return Ue==="m"?`${(ft/1e4).toFixed(2)} ha`:Ue==="m"?ft>=1e3?`${(ft/1e3).toFixed(2)} km`:`${ft.toFixed(2)} m`:`${ft.toFixed(2)} ${Ue}`}const de=Gt(!1);function ze(ft){return{Circle:"Cercle",Rectangle:"Rectangle",Semicircle:"Demi-cercle",Line:"Ligne",Polygon:"Polygone",TextRectangle:"Annotation",ElevationLine:"Profil altimtrique"}[ft]||ft}async function Ke(){var Ue,Dt,gn,un,Qt,Ye,vn,Sn,ln,wn;if(!he.value||!d.value||!P.value){console.error("[generateSynthesis] Plan, map ou featureGroup manquant");return}const ft=he.value;try{console.log("[generateSynthesis] Dbut de la gnration"),console.log("[generateSynthesis] Plan courant complet:",ft),await Q();let fi=ft;if(!ft.salarie_details&&!ft.entreprise_details&&!ft.client_details){console.log("[generateSynthesis] Dtails manquants, tentative de rcupration...");try{const yr=await er.get(`/plans/${ft.id}/`);yr.status===200&&(console.log("[generateSynthesis] Plan mis  jour:",yr.data),he.value={...ft,...yr.data},fi=yr.data,i.updatePlanDetails(ft.id,yr.data))}catch(yr){console.error("[generateSynthesis] Erreur lors de la rcupration des dtails:",yr)}}await new Promise(yr=>setTimeout(yr,1e3)),de.value=!0;const Wn=fi.salarie_details,bn=fi.client_details,tr=(Wn==null?void 0:Wn.entreprise_details)||fi.entreprise_details;console.log("[generateSynthesis] Dtails du plan utilis:",fi),console.log("[generateSynthesis] Dtails des utilisateurs:",{salarie:Wn?{id:Wn.id,nom:`${Wn.first_name} ${Wn.last_name}`,company:Wn.company_name,logo:Wn.logo}:null,entreprise:tr?{id:tr.id,nom:`${tr.first_name} ${tr.last_name}`,company:tr.company_name,logo:tr.logo}:null,client:bn?{id:bn.id,nom:`${bn.first_name} ${bn.last_name}`,company:bn.company_name}:null}),h.value&&(U(),h.value=null);const hn=new mr("l","mm","a4");console.log("[generateSynthesis] Chargement du logo de l'application");const xo=new Image;xo.src=o1,await new Promise(yr=>{xo.onload=()=>{console.log("[generateSynthesis] Logo application charg"),yr()},xo.onerror=ds=>{console.error("[generateSynthesis] Erreur chargement logo application:",ds),yr()}}),console.log("[generateSynthesis] Tentative de chargement du logo entreprise:",tr==null?void 0:tr.logo);let _i=null;tr!=null&&tr.logo&&(_i=new Image,_i.src=tr.logo,await new Promise(yr=>{_i?(_i.onload=()=>{console.log("[generateSynthesis] Logo entreprise charg avec succs"),yr()},_i.onerror=ds=>{console.error("[generateSynthesis] Erreur chargement logo entreprise:",ds),yr()}):yr()})),console.log("[generateSynthesis] Tentative de chargement du logo salarie:",Wn==null?void 0:Wn.logo);let bi=null;Wn!=null&&Wn.logo&&(bi=new Image,bi.src=Wn.logo,await new Promise(yr=>{bi?(bi.onload=()=>{console.log("[generateSynthesis] Logo salarie charg avec succs"),yr()},bi.onerror=ds=>{console.error("[generateSynthesis] Erreur chargement logo salarie:",ds),yr()}):yr()})),console.log("[generateSynthesis] Ajout des logos au PDF:",{logoApplication:!0,logoEntreprise:_i!==null,logoSalarie:bi!==null}),_i!==null&&hn.addImage(_i,"JPEG",148.5-40-30,20,40,40),hn.addImage(xo,"JPEG",148.5-40/2,20,40,40),bi!==null&&hn.addImage(bi,"JPEG",148.5+30,20,40,40),hn.setFontSize(24),hn.setTextColor(0),hn.text(ft.nom||"Sans titre",297/2,100,{align:"center"});let di=120;if(tr&&(hn.setFontSize(14),hn.setFont("helvetica","bold"),hn.text("Entreprise:",20,di),hn.setFont("helvetica","normal"),hn.text(`${tr.first_name} ${tr.last_name}${tr.company_name?` (${tr.company_name})`:""}`,20,di+6),di+=15),Wn&&(hn.setFontSize(14),hn.setFont("helvetica","bold"),hn.text("Salarie:",20,di),hn.setFont("helvetica","normal"),hn.text(`${Wn.first_name} ${Wn.last_name}${Wn.company_name?` (${Wn.company_name})`:""}`,20,di+6),di+=15),bn&&(hn.setFontSize(14),hn.setFont("helvetica","bold"),hn.text("Client:",20,di),hn.setFont("helvetica","normal"),hn.text(`${bn.first_name} ${bn.last_name}${bn.company_name?` (${bn.company_name})`:""}`,20,di+6),di+=15),ft.description){hn.setFont("helvetica","bold"),hn.text("Description:",20,di),hn.setFont("helvetica","normal");const yr=hn.splitTextToSize(ft.description,150);hn.text(yr,20,di+6),di+=8*yr.length+10}di=Math.min(di,180),hn.setFontSize(10),hn.setTextColor(100),hn.text(`Date de cration: ${Re(ft.date_creation)}`,20,190),hn.text(`Dernire modification: ${Re(ft.date_modification)}`,277,190,{align:"right"});const Ri=[];P.value.eachLayer(yr=>Ri.push(yr));const Lo=Rt.simpleMapScreenshoter({hideElementsWithSelectors:[".leaflet-control-container",".leaflet-pm-toolbar",".leaflet-grid-layer",".leaflet-grid-label"],preventDownload:!0}).addTo(d.value);await new Promise(yr=>setTimeout(yr,3e3));for(let yr=0;yr<Ri.length;yr++){hn.addPage(),hn.setFillColor(248,250,252),hn.setDrawColor(226,232,240),hn.rect(0,0,297,25,"F"),hn.setFontSize(10),hn.setTextColor(50,50,50),hn.setFont("helvetica","bold"),hn.text(ft.nom||"Sans titre",20,12);let Ds=297-20-(15*(1+(_i!==null?1:0)+(bi!==null?1:0))+5*(1+(_i!==null?1:0)));_i!==null&&(hn.addImage(_i,"JPEG",Ds,5,15,15),Ds+=20),hn.addImage(xo,"JPEG",Ds,5,15,15),Ds+=20,bi!==null&&hn.addImage(bi,"JPEG",Ds,5,15,15),hn.setDrawColor(200,200,200),hn.setLineWidth(.5),hn.line(0,25,297,25);const jr=Ri[yr],Mn=jr.properties;if(Mn){hn.setTextColor(0),hn.setFontSize(14),hn.setFont("helvetica","bold");const Fi=Mn.name||ze(Mn.type);let pi="";if(Mn.type!=="TextRectangle"){const Ni=N(Ri,jr);pi=Ni>0?` (surface totale d'irrigation : ${pe(Ni,"m")})`:""}const ji=`${Fi}${pi}`;hn.text(ji,20,35)}if(Mn&&Mn.type==="ElevationLine")try{const Fi=((Ue=jr.getBounds)==null?void 0:Ue.call(jr))||((Dt=jr.getLatLng)==null?void 0:Dt.call(jr));Fi&&d.value.fitBounds(Fi instanceof Rt.LatLng?Rt.latLngBounds([Fi]):Fi,{padding:[50,50]});try{const sn=((gn=jr.getBounds)==null?void 0:gn.call(jr))||((un=jr.getLatLng)==null?void 0:un.call(jr));if(!sn||!d.value)console.warn("[generateSynthesis] Bounds ou carte invalide");else{const jt=sn instanceof Rt.LatLng?Rt.latLngBounds([sn]):sn;jt&&jt.isValid&&jt.isValid()&&d.value.getContainer()&&document.body.contains(d.value.getContainer())&&d.value.fitBounds(jt,{padding:[50,50],animate:!1})}}catch(sn){console.warn("[generateSynthesis] Erreur lors de l'ajustement de la vue:",sn)}await new Promise(sn=>setTimeout(sn,2e3)),d.value.invalidateSize();try{d.value&&d.value.getContainer()&&document.body.contains(d.value.getContainer())?d.value.invalidateSize({animate:!1}):console.warn("[generateSynthesis] Carte non valide pour l'invalidation de taille")}catch(sn){console.warn("[generateSynthesis] Erreur lors de l'invalidation de la taille de la carte:",sn)}await new Promise(sn=>{const jt=()=>{var Es;const Cr=(Es=d.value)==null?void 0:Es.getContainer();if(!Cr){sn();return}const Di=Cr.querySelectorAll(".leaflet-tile-loaded");Cr.querySelectorAll(".leaflet-tile-loading").length===0&&Di.length>0?sn():setTimeout(jt,100)};jt()});const pi=await Lo.takeScreen("image"),ji=await new Promise((sn,jt)=>{const Cr=new Image;Cr.onload=()=>sn(Cr),Cr.onerror=Di=>jt(Di),Cr.src=pi}),Ni=40,ps=237/2,Ls=Math.min(70,ji.height*ps/ji.width);if(hn.addImage(ji,"PNG",20,Ni,ps,Ls),Mn.elevationData&&Mn.elevationData.length>0){const sn=document.createElement("canvas");sn.width=800,sn.height=400;const jt=sn.getContext("2d");if(jt){const Cr=Mn.elevationData,Di=Mn.minElevation,zi=Mn.maxElevation,sr=(zi-Di)*.05,Lr=Di-sr,Is=zi+sr,fr=40,Ui=sn.width-2*fr,So=sn.height-2*fr,Eo=Or=>fr+Or/Cr[Cr.length-1].distance*Ui,so=Or=>fr+So-(Or-Lr)/(Is-Lr)*So;jt.fillStyle="#f8fafc",jt.fillRect(0,0,sn.width,sn.height),jt.fillStyle="#334155",jt.font="bold 20px Arial",jt.textAlign="center",jt.fillText("Profil altimtrique",sn.width/2,25),jt.strokeStyle="#e2e8f0",jt.lineWidth=1,jt.beginPath(),jt.moveTo(fr,fr),jt.lineTo(fr,So+fr),jt.lineTo(Ui+fr,So+fr),jt.strokeStyle="#94a3b8",jt.stroke();const vi=5;for(let Or=0;Or<=vi;Or++){const ho=Lr+Or/vi*(Is-Lr),$i=so(ho);jt.beginPath(),jt.strokeStyle="#e2e8f0",jt.moveTo(fr,$i),jt.lineTo(Ui+fr,$i),jt.stroke(),jt.beginPath(),jt.strokeStyle="#94a3b8",jt.moveTo(fr-5,$i),jt.lineTo(fr,$i),jt.stroke(),jt.fillStyle="#64748b",jt.font="12px Arial",jt.textAlign="right",jt.fillText(`${Math.round(ho)}m`,fr-8,$i+4)}const Qo=5,Ks=Cr[Cr.length-1].distance;for(let Or=0;Or<=Qo;Or++){const ho=Or/Qo*Ks,$i=Eo(ho);jt.beginPath(),jt.strokeStyle="#e2e8f0",jt.moveTo($i,fr),jt.lineTo($i,So+fr),jt.stroke(),jt.beginPath(),jt.strokeStyle="#94a3b8",jt.moveTo($i,So+fr),jt.lineTo($i,So+fr+5),jt.stroke(),jt.fillStyle="#64748b",jt.font="12px Arial",jt.textAlign="center",jt.fillText(`${Math.round(ho)}m`,$i,So+fr+16)}const co=jt.createLinearGradient(0,fr,0,So+fr);co.addColorStop(0,"rgba(255, 69, 0, 0.8)"),co.addColorStop(1,"rgba(255, 69, 0, 0.2)"),jt.beginPath(),jt.moveTo(Eo(Cr[0].distance),so(Cr[0].elevation)),Cr.forEach((Or,ho)=>{ho>0&&jt.lineTo(Eo(Or.distance),so(Or.elevation))}),jt.strokeStyle="#FF4500",jt.lineWidth=2,jt.stroke(),jt.lineTo(Eo(Cr[Cr.length-1].distance),so(Lr)),jt.lineTo(Eo(Cr[0].distance),so(Lr)),jt.closePath(),jt.fillStyle=co,jt.fill(),Cr.forEach(Or=>{jt.beginPath(),jt.arc(Eo(Or.distance),so(Or.elevation),3,0,Math.PI*2),jt.fillStyle="#FF4500",jt.fill(),jt.strokeStyle="white",jt.lineWidth=1,jt.stroke()});let ha=0,Cs=0;for(let Or=0;Or<Cr.length;Or++)Cr[Or].elevation===Di&&(ha=Or),Cr[Or].elevation===zi&&(Cs=Or);jt.beginPath(),jt.arc(Eo(Cr[Cs].distance),so(Cr[Cs].elevation),6,0,Math.PI*2),jt.fillStyle="#059669",jt.fill(),jt.strokeStyle="white",jt.lineWidth=2,jt.stroke(),jt.beginPath(),jt.arc(Eo(Cr[ha].distance),so(Cr[ha].elevation),6,0,Math.PI*2),jt.fillStyle="#DC2626",jt.fill(),jt.strokeStyle="white",jt.lineWidth=2,jt.stroke(),jt.font="12px Arial",jt.fillStyle="#059669",jt.textAlign="left",jt.fillText(`Point haut: ${pe(zi,"m")}`,fr,So+fr+35),jt.fillStyle="#DC2626",jt.fillText(`Point bas: ${pe(Di,"m")}`,fr+200,So+fr+35);const Ll=sn.toDataURL("image/png");hn.addImage(Ll,"PNG",20+ps+20,Ni,ps,Ls)}}const wr=Ni+Ls+15;hn.setFillColor(248,250,252),hn.setDrawColor(226,232,240),hn.roundedRect(20,wr,257,50,3,3,"FD"),hn.setFont("helvetica","bold"),hn.setFontSize(12),hn.setTextColor(51,65,85),hn.text("Caractristiques",30,wr+10);const Ss=[{label:"Distance totale",value:pe(Mn.length||0)},{label:"Dnivel positif",value:pe(Mn.elevationGain||0,"m")},{label:"Dnivel ngatif",value:pe(Mn.elevationLoss||0,"m")}],Ti=[{label:"Pente moyenne",value:`${(Mn.averageSlope||0).toFixed(1)}%`},{label:"Pente maximale",value:`${(Mn.maxSlope||0).toFixed(1)}%`},{label:"Altitude min/max",value:`${pe(Mn.minElevation||0,"m")} / ${pe(Mn.maxElevation||0,"m")}`}];let zo=wr+20;hn.setFont("helvetica","normal"),hn.setFontSize(10),Ss.forEach(sn=>{hn.setTextColor(100,116,139),hn.text(sn.label,30,zo),hn.setTextColor(15,23,42),hn.setFont("helvetica","bold"),hn.text(sn.value,110,zo),hn.setFont("helvetica","normal"),zo+=9}),zo=wr+20;const xr=297/2;Ti.forEach(sn=>{hn.setTextColor(100,116,139),hn.text(sn.label,xr,zo),hn.setTextColor(15,23,42),hn.setFont("helvetica","bold"),hn.text(sn.value,xr+80,zo),hn.setFont("helvetica","normal"),zo+=9})}catch(Fi){console.error("[generateSynthesis] Erreur traitement profil altimtrique:",Fi)}else{const Fi=((Qt=jr.getBounds)==null?void 0:Qt.call(jr))||((Ye=jr.getLatLng)==null?void 0:Ye.call(jr));Fi&&d.value.fitBounds(Fi instanceof Rt.LatLng?Rt.latLngBounds([Fi]):Fi,{padding:[50,50]});try{const pi=((vn=jr.getBounds)==null?void 0:vn.call(jr))||((Sn=jr.getLatLng)==null?void 0:Sn.call(jr));if(!pi||!d.value)console.warn("[generateSynthesis] Bounds ou carte invalide");else{const ji=pi instanceof Rt.LatLng?Rt.latLngBounds([pi]):pi;ji&&ji.isValid&&ji.isValid()&&d.value.getContainer()&&document.body.contains(d.value.getContainer())&&d.value.fitBounds(ji,{padding:[50,50],animate:!1})}}catch(pi){console.warn("[generateSynthesis] Erreur lors de l'ajustement de la vue:",pi)}await new Promise(pi=>setTimeout(pi,2e3)),d.value.invalidateSize(),await new Promise(pi=>{const ji=()=>{var wr;const Ni=(wr=d.value)==null?void 0:wr.getContainer();if(!Ni){pi();return}const ps=Ni.querySelectorAll(".leaflet-tile-loaded");Ni.querySelectorAll(".leaflet-tile-loading").length===0&&ps.length>0?pi():setTimeout(ji,100)};ji()});try{const pi=await Lo.takeScreen("image"),ji=await new Promise((wr,Ss)=>{const Ti=new Image;Ti.onload=()=>wr(Ti),Ti.onerror=zo=>Ss(zo),Ti.src=pi}),Ni=45,ps=297*.6-30;let Ls=ji.height*ps/ji.width;if(Ls>210*.9&&(Ls=210*.9),hn.addImage(ji,"PNG",20,Ni,ps,Ls),Mn){let wr=function(jt,Cr,Di,zi,Es){hn.setTextColor(100,116,139),hn.setFont("helvetica","normal"),hn.text(jt,Di+10,zi),hn.setTextColor(15,23,42),hn.setFont("helvetica","bold"),hn.text(Cr,Di+Es-10,zi,{align:"right"})},Ti=0;if(Mn.type==="Circle")Ti=4;else if(Mn.type==="Rectangle")Ti=4;else if(Mn.type==="Line")Ti=1,(ln=Mn.dimensions)!=null&&ln.width&&Ti++,Mn.surfaceInfluence&&Ti++;else if(Mn.type==="Semicircle")Ti=6;else if(Mn.type==="Polygon")Ti=2;else if(Mn.type==="CircleWithSections"&&(Ti=3,Mn.sections&&Mn.sections.length>0)){const jt=Math.ceil(Mn.sections.length/3);Ti+=jt*3}const zo=Math.max(15+Ti*12+30,60),xr=297-188.2-20;hn.setFillColor(248,250,252),hn.setDrawColor(226,232,240),hn.roundedRect(188.2,Ni,xr,zo,3,3,"FD"),hn.setFont("helvetica","bold"),hn.setFontSize(12),hn.setTextColor(51,65,85),hn.text("Caractristiques",188.2+10,Ni+15);let sn=Ni+30;hn.setFontSize(10),Mn.type==="Circle"?(wr("Rayon",pe(Mn.radius),188.2,sn,xr),sn+=12,wr("Diamtre",pe(Mn.radius*2),188.2,sn,xr),sn+=12,wr("Surface",pe(Mn.surface,"m"),188.2,sn,xr),sn+=12,wr("Primtre",pe(Mn.perimeter),188.2,sn,xr)):Mn.type==="Rectangle"?(wr("Largeur",pe(Mn.width),188.2,sn,xr),sn+=12,wr("Hauteur",pe(Mn.height),188.2,sn,xr),sn+=12,wr("Surface",pe(Mn.surface,"m"),188.2,sn,xr),sn+=12,wr("Primtre",pe(Mn.perimeter),188.2,sn,xr)):Mn.type==="Line"?(wr("Longueur",pe(Mn.length),188.2,sn,xr),sn+=12,(wn=Mn.dimensions)!=null&&wn.width&&(wr("Largeur d'influence",pe(Mn.dimensions.width),188.2,sn,xr),sn+=12),Mn.surfaceInfluence&&wr("Surface d'influence",pe(Mn.surfaceInfluence,"m"),188.2,sn,xr)):Mn.type==="Semicircle"?(wr("Rayon",pe(Mn.radius),188.2,sn,xr),sn+=12,wr("Diamtre",pe(Mn.radius*2),188.2,sn,xr),sn+=12,wr("Surface",pe(Mn.surface,"m"),188.2,sn,xr),sn+=12,wr("Primtre",pe(Mn.perimeter),188.2,sn,xr),sn+=12,wr("Longueur d'arc",pe(Mn.arcLength),188.2,sn,xr),sn+=12,wr("Angle d'ouverture",`${Mn.openingAngle.toFixed(1)}`,188.2,sn,xr)):Mn.type==="Polygon"?(wr("Surface",pe(Mn.surface,"m"),188.2,sn,xr),sn+=12,wr("Primtre",pe(Mn.perimeter),188.2,sn,xr)):Mn.type==="CircleWithSections"&&(wr("Rayon",pe(Mn.radius),188.2,sn,xr),sn+=12,wr("Surface totale",pe(Mn.surface,"m"),188.2,sn,xr),sn+=12,wr("Primtre",pe(Mn.perimeter),188.2,sn,xr),sn+=20,Mn.sections&&Mn.sections.length>0&&(sn=Xt(Mn.sections,hn,188.2,sn,xr)))}}catch(pi){console.error(`[generateSynthesis] Erreur capture forme ${yr+1}:`,pi)}}}d.value.removeControl(Lo),hn.save(`synthese_${ft.nom}.pdf`)}catch(ur){console.error("[generateSynthesis] Erreur:",ur),alert("Une erreur est survenue lors de la gnration de la synthse. Veuillez ressayer.")}finally{de.value=!1}}const Ge=n3.debounce(()=>{const ft=on.startMeasure("invalidateMapSize","MapView");if(!d.value){ft();return}qs(()=>{on.measure("invalidateMapSize:nextTick",()=>{var Ue;try{if(d.value&&d.value.getContainer()&&document.body.contains(d.value.getContainer())){if(d.value.invalidateSize({animate:!1}),(Ue=P.value)!=null&&Ue.getLayers().length)try{T()}catch(Dt){console.warn("[invalidateMapSize] Erreur lors de l'ajustement de la vue:",Dt)}}else console.warn("[invalidateMapSize] Carte non valide pour l'invalidation")}catch(Dt){console.warn("[invalidateMapSize] Erreur lors de l'invalidation de la taille de la carte:",Dt)}ft()},"MapView")})},250);function Qe(){Ge()}hs(he,(ft,Ue)=>{ft&&ft.id!==(Ue==null?void 0:Ue.id)&&qs(()=>{Qe()})});const Ve=Gt(null),ot=Gt(!1),At=Gt([]),Et=ir(()=>{if(console.log("[MapView][filteredSalaries] Computing with:",{selectedEntreprise:Ve.value,salaries:Y.value,salariesLength:Y.value.length}),!Ve.value)return[];const ft=Y.value.filter(Ue=>{var un,Qt,Ye;const Dt=Ue.entreprise,gn=typeof Dt=="object"&&Dt!==null?Dt.id:Dt;return console.log("[MapView][filteredSalaries] Checking salarie:",{salarie:Ue,salarieEntreprise:Dt,salarieEntrepriseId:gn,selectedEntrepriseId:(un=Ve.value)==null?void 0:un.id,matches:gn===((Qt=Ve.value)==null?void 0:Qt.id)}),gn===((Ye=Ve.value)==null?void 0:Ye.id)});return console.log("[MapView][filteredSalaries] Filtered result:",ft),ft});function zt(ft){if(!ft)return"";const Ue=ft.first_name||"",Dt=ft.last_name?ft.last_name.toUpperCase():"",gn=ft.company_name||ft.role||"";return`${Ue} ${Dt} (${gn})`}async function Kt(){ot.value=!0;try{const ft=await er.get("/users/",{params:{role:"ENTREPRISE"}});At.value=ft.data}catch(ft){console.error("[MapView] Error loading entreprises:",ft),At.value=[]}finally{ot.value=!1}}async function dn(ft){console.log("[MapView][selectEntreprise] Slection de l'entreprise:",ft),Ve.value=ft,G.value=!0;try{console.log("[MapView][selectEntreprise] Envoi de la requte avec params:",{role:"SALARIE",entreprise:ft.id});const Ue=await er.get("/users/",{params:{role:"SALARIE",entreprise:ft.id}});console.log("[MapView][selectEntreprise] Rponse reue:",Ue.data),Y.value=Ue.data,console.log("[MapView][selectEntreprise] Salaries mis  jour:",Y.value)}catch(Ue){console.error("[MapView] Error loading salaries for entreprise:",Ue),Y.value=[]}finally{G.value=!1}}function mn(){Ve.value=null,k.value=null,W.value=null,Y.value=[],$.value=[],D.value=[]}function et(){k.value=null,W.value=null,$.value=[],D.value=[]}function st(){W.value=null,D.value=[]}async function rt(ft){var Ue,Dt,gn,un,Qt,Ye;console.log(`
[MapView][selectSalarie] ====== DBUT SLECTION SALARIE ======`),console.log("Informations du salarie:",{id:ft.id,username:ft.username,company:ft.company_name,role:ft.role}),console.log("Contexte utilisateur:",{userType:(Ue=F.user)==null?void 0:Ue.user_type,userId:(Dt=F.user)==null?void 0:Dt.id,userRole:(gn=F.user)==null?void 0:gn.role,selectedEntrepriseId:(un=Ve.value)==null?void 0:un.id}),k.value=ft,K.value=!0;try{const vn={role:"VISITEUR",salarie:ft.id};F.isEntreprise?(console.log("Ajout de l'ID de l'entreprise connecte:",(Qt=F.user)==null?void 0:Qt.id),vn.entreprise=(Ye=F.user)==null?void 0:Ye.id):Ve.value&&(console.log("Ajout de l'ID de l'entreprise slectionne:",Ve.value.id),vn.entreprise=Ve.value.id),console.log("Paramtres de la requte:",vn);const Sn=await er.get("/users/",{params:vn});console.log("Rponse reue du serveur:",{status:Sn.status,dataLength:Array.isArray(Sn.data)?Sn.data.length:"non-array",data:Sn.data}),Array.isArray(Sn.data)?($.value=Sn.data,console.log(`${Sn.data.length} visiteurs chargs`),Sn.data.forEach((ln,wn)=>{console.log(`Visiteur ${wn+1}:`,{id:ln.id,username:ln.username,company:ln.company_name,salarie:ln.salarie})})):(console.warn("Format de rponse inattendu:",Sn.data),$.value=[]),$.value.length===0&&console.warn("Aucun visiteur trouv pour ce salarie")}catch(vn){if(console.error("ERREUR lors du chargement des visiteurs:",vn),vn&&typeof vn=="object"&&"response"in vn){const Sn=vn;console.error("Dtails de l'erreur:",{status:Sn.response.status,data:Sn.response.data})}$.value=[]}finally{K.value=!1,console.log(`[MapView][selectSalarie] ====== FIN SLECTION SALARIE ======
`)}}async function Vt(ft){var Ue;W.value=ft,q.value=!0;try{const Dt={visiteur:ft.id};F.isEntreprise?Dt.entreprise=(Ue=F.user)==null?void 0:Ue.id:Ve.value&&(Dt.entreprise=Ve.value.id),k.value&&(Dt.salarie=k.value.id);const gn=await er.get("/plans/",{params:Dt});D.value=gn.data}catch(Dt){console.error("[MapView] Error loading client plans:",Dt),D.value=[]}finally{q.value=!1}}function Xt(ft,Ue,Dt,gn,un){if(!ft||ft.length===0)return gn;const Qt=[...ft].sort((rr,Wr)=>(Wr.surface||0)-(rr.surface||0)),Ye=un,vn=7,Sn=6,ln=2,wn=[{header:"Nom",width:.3,align:"left"},{header:"Surface",width:.2,align:"right"},{header:"Angles",width:.25,align:"right"},{header:"Rayon",width:.15,align:"right"},{header:"Type",width:.1,align:"center"}],ur=vn+Sn*Qt.length;Ue.setFillColor(248,250,252),Ue.setDrawColor(226,232,240),Ue.roundedRect(Dt,gn,Ye,ur+ln*2,2,2,"FD"),Ue.setFillColor(241,245,249),Ue.rect(Dt+ln,gn+ln,Ye-ln*2,vn,"F"),Ue.setFont("helvetica","bold"),Ue.setFontSize(7),Ue.setTextColor(51,65,85);let En=Dt+ln;return wn.forEach(rr=>{const Wr=rr.width*(Ye-ln*2);rr.align==="right"?Ue.text(rr.header,En+Wr-ln,gn+ln+5,{align:"right"}):rr.align==="center"?Ue.text(rr.header,En+Wr/2,gn+ln+5,{align:"center"}):Ue.text(rr.header,En+ln/2,gn+ln+5),En+=Wr}),Ue.setFont("helvetica","normal"),Ue.setFontSize(6.5),Ue.setTextColor(71,85,105),Qt.forEach((rr,Wr)=>{const ki=gn+vn+ln+Wr*Sn;Wr%2===0&&(Ue.setFillColor(250,252,254),Ue.rect(Dt+ln,ki,Ye-ln*2,Sn,"F"));let Fn=Dt+ln;const oo=rr.name||`Section ${Wr+1}`;Ue.text(oo,Fn+ln/2,ki+4),Fn+=wn[0].width*(Ye-ln*2);const jo=pe(rr.surface||0,"m");Ue.text(jo,Fn+wn[1].width*(Ye-ln*2)-ln,ki+4,{align:"right"}),Fn+=wn[1].width*(Ye-ln*2);const fi=rr.startAngle===0&&rr.endAngle===360?"Complet":`${rr.startAngle}-${rr.endAngle}`;Ue.text(fi,Fn+wn[2].width*(Ye-ln*2)-ln,ki+4,{align:"right"}),Fn+=wn[2].width*(Ye-ln*2);const Wn=pe(rr.radius||0);Ue.text(Wn,Fn+wn[3].width*(Ye-ln*2)-ln,ki+4,{align:"right"}),Fn+=wn[3].width*(Ye-ln*2);const bn=rr.startAngle===0&&rr.endAngle===360?"C":"P";Ue.text(bn,Fn+wn[4].width*(Ye-ln*2)/2,ki+4,{align:"center"})}),Ue.setDrawColor(226,232,240),Ue.setLineWidth(.05),Ue.line(Dt+ln,gn+vn+ln,Dt+Ye-ln,gn+vn+ln),gn+ur+ln*2}return(ft,Ue)=>{var Dt,gn,un,Qt;return Je(),tt("div",wR,[M("div",xR,[de.value?(Je(),tt("div",LR,Ue[8]||(Ue[8]=[Zh('<div class="bg-white/90 rounded-2xl p-8 max-w-md shadow-2xl border border-gray-100"><div class="flex flex-col items-center"><div class="relative w-24 h-24 mb-6"><div class="absolute inset-0 border-4 border-primary-200 rounded-full"></div><div class="absolute inset-0 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"></div><div class="absolute inset-2 border-2 border-primary-400/30 rounded-full animate-pulse"></div><div class="absolute inset-0 flex items-center justify-center"><svg class="w-8 h-8 text-primary-600 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div><h3 class="text-xl font-semibold text-gray-900 mb-2"> Gnration de la synthse </h3><div class="space-y-2 text-center"><p class="text-primary-600 font-medium"> Capture des formes en cours... </p><p class="text-sm text-gray-500"> Nous optimisons la qualit de vos captures pour un rendu parfait </p></div></div></div>',1)]))):xn("",!0),he.value?xn("",!0):(Je(),tt("div",SR,[M("div",ER,[Ue[11]||(Ue[11]=Zh('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+o1+'" alt="TagMap Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur TagMap</h1><p class="text-gray-600 mb-8">Pour commencer  dessiner, vous devez d&#39;abord crer un nouveau plan ou charger un plan existant.</p>',3)),M("div",CR,[M("button",{onClick:Ue[0]||(Ue[0]=Ye=>J.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Ue[9]||(Ue[9]=[M("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Mi(" Crer un nouveau plan ")])),M("button",{onClick:Ue[1]||(Ue[1]=Ye=>le.value=!0),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Ue[10]||(Ue[10]=[M("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),Mi(" Charger un plan existant ")]))])])])),Zn(M("div",PR,[(Je(),hu(C0,{to:"body"},[he.value&&!de.value?(Je(),tt("div",AR,[qr(QN,{"last-save":(Dt=he.value)!=null&&Dt.date_modification?new Date(he.value.date_modification):void 0,"plan-name":(gn=he.value)==null?void 0:gn.nom,"plan-description":(un=he.value)==null?void 0:un.description,"save-status":V.value,onChangeMapType:zn(Z),onCreateNewPlan:Ue[2]||(Ue[2]=Ye=>J.value=!0),onLoadPlan:Ue[3]||(Ue[3]=Ye=>le.value=!0),onSavePlan:Q,onAdjustView:Me,onGenerateSummary:Ke},null,8,["last-save","plan-name","plan-description","save-status","onChangeMapType"])])):xn("",!0)])),M("div",MR,[r.value&&he.value&&!de.value?(Je(),tt("div",{key:0,onClick:se,class:"md:hidden fixed inset-0 bg-black/30 z-[1999] transition-opacity duration-300"})):xn("",!0),he.value&&!de.value?(Je(),tt("div",{key:1,onClick:se,class:"md:hidden fixed bottom-0 left-0 right-0 z-[2500] bg-white py-2 px-3 shadow-lg border-t border-gray-200 flex items-center justify-between"},Ue[12]||(Ue[12]=[M("div",{class:"flex items-center"},[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 15l7-7 7 7"})])],-1)]))):xn("",!0),M("div",kR,[M("div",{ref_key:"mapContainer",ref:n,class:"absolute inset-0 z-[1000]"},null,512)]),he.value&&!de.value?(Je(),tt("div",{key:2,class:Yi([r.value?"translate-y-0":"translate-y-full md:translate-y-0","w-full md:w-64 bg-white border-t md:border-t-0 md:border-l border-gray-200 flex-shrink-0 z-[2000] transition-transform duration-300 ease-out","fixed md:relative bottom-0 md:bottom-auto right-0 md:top-0 h-[80%] md:h-auto rounded-t-xl md:rounded-none shadow-lg md:shadow-none overflow-y-auto"])},[M("div",{class:"md:hidden w-full flex justify-between items-center px-4 py-2 border-b border-gray-200"},[M("div",{class:"flex items-center"},[M("div",{onClick:se,class:"w-10 h-1.5 bg-gray-300 rounded-full cursor-pointer mr-3"})]),M("button",{onClick:se,class:"p-1.5 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors"},Ue[13]||(Ue[13]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),qr(yN,{"current-tool":zn(u),"selected-shape":Xe.value,"all-layers":((Qt=zn(P))==null?void 0:Qt.getLayers())||[],onToolChange:zn(y),onStyleUpdate:zn(x),onPropertiesUpdate:ue,onDeleteShape:Ze},null,8,["current-tool","selected-shape","all-layers","onToolChange","onStyleUpdate"])],2)):xn("",!0)]),de.value?(Je(),tt("div",TR,Ue[14]||(Ue[14]=[Zh('<div class="text-center"><div class="mb-4"><svg class="animate-spin h-10 w-10 mx-auto text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div><p class="text-lg font-medium text-gray-900">Gnration de la synthse en cours...</p><p class="text-sm text-gray-500 mt-2">Veuillez patienter pendant que nous analysons votre plan.</p></div>',1)]))):xn("",!0)],512),[[Zf,he.value]]),(Je(),hu(C0,{to:"body"},[qr(d3,{ref_key:"newPlanModalRef",ref:ve,modelValue:J.value,"onUpdate:modelValue":Ue[4]||(Ue[4]=Ye=>J.value=Ye),onCreated:oe,onSalarieSelected:Ue[5]||(Ue[5]=Ye=>k.value=Ye),onVisiteurSelected:Ue[6]||(Ue[6]=Ye=>I.value=Ye)},null,8,["modelValue"])])),(Je(),hu(C0,{to:"body"},[le.value?(Je(),tt("div",BR,[M("div",OR,[M("div",NR,[Ue[16]||(Ue[16]=M("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),M("button",{onClick:Ue[7]||(Ue[7]=Ye=>le.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},Ue[15]||(Ue[15]=[M("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),M("div",DR,[zn(F).isAdmin?(Je(),tt("div",IR,[Ve.value?k.value?W.value?(Je(),tt("div",eF,[M("div",tF,[M("button",{onClick:st,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Ue[31]||(Ue[31]=[M("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Mi(" Retour  la liste des clients ")])),Ue[32]||(Ue[32]=M("span",{class:"mx-2 text-gray-400"},"|",-1)),M("span",nF,Zt(zt(W.value)),1)]),Ue[34]||(Ue[34]=M("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),M("div",rF,[q.value?(Je(),tt(On,{key:0},Sr(3,Ye=>M("div",{key:Ye,class:"animate-pulse"},Ue[33]||(Ue[33]=[M("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[M("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),M("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),M("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Je(!0),tt(On,{key:1},Sr(D.value,Ye=>(Je(),tt("button",{key:Ye.id,onClick:vn=>fe(Ye.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[M("div",oF,Zt(Ye.nom),1),M("div",sF,Zt(Ye.description),1),M("div",aF," Modifi le "+Zt(Re(Ye.date_modification)),1)],8,iF))),128))])])):(Je(),tt("div",WR,[M("div",ZR,[M("button",{onClick:et,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Ue[25]||(Ue[25]=[M("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Mi(" Retour  la liste des salaries ")])),Ue[26]||(Ue[26]=M("span",{class:"mx-2 text-gray-400"},"|",-1)),M("span",KR,Zt(zt(k.value)),1)]),Ue[30]||(Ue[30]=M("h3",{class:"font-medium text-gray-700"},"Slectionnez un visiteur",-1)),M("div",YR,[K.value?(Je(),tt(On,{key:0},Sr(3,Ye=>M("div",{key:Ye,class:"animate-pulse"},Ue[27]||(Ue[27]=[M("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[M("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),M("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Je(),tt(On,{key:1},[Ce.value.length===0?(Je(),tt("div",XR,Ue[28]||(Ue[28]=[M("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouv pour ce salarie",-1),M("div",{class:"text-sm text-gray-400"}," Veuillez vrifier que des visiteurs ont t assigns  ce salarie ",-1)]))):(Je(!0),tt(On,{key:1},Sr(Ce.value,Ye=>(Je(),tt("button",{key:Ye.id,onClick:vn=>Vt(Ye),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[M("div",null,[M("div",QR,Zt(zt(Ye)),1)]),Ue[29]||(Ue[29]=M("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,JR))),128))],64))])])):(Je(),tt("div",UR,[M("div",$R,[M("button",{onClick:mn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Ue[20]||(Ue[20]=[M("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Mi(" Retour  la liste des entreprises ")])),Ue[21]||(Ue[21]=M("span",{class:"mx-2 text-gray-400"},"|",-1)),M("span",VR,Zt(zt(Ve.value)),1)]),Ue[24]||(Ue[24]=M("h3",{class:"font-medium text-gray-700"},"Slectionnez un salarie",-1)),M("div",HR,[G.value?(Je(),tt(On,{key:0},Sr(3,Ye=>M("div",{key:Ye,class:"animate-pulse"},Ue[22]||(Ue[22]=[M("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[M("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),M("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Je(!0),tt(On,{key:1},Sr(Et.value,Ye=>(Je(),tt("button",{key:Ye.id,onClick:vn=>rt(Ye),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[M("div",null,[M("div",qR,Zt(zt(Ye)),1)]),Ue[23]||(Ue[23]=M("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,GR))),128))])])):(Je(),tt("div",RR,[Ue[19]||(Ue[19]=M("h3",{class:"font-medium text-gray-700"},"Slectionnez une entreprise",-1)),M("div",FR,[ot.value?(Je(),tt(On,{key:0},Sr(3,Ye=>M("div",{key:Ye,class:"animate-pulse"},Ue[17]||(Ue[17]=[M("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[M("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),M("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Je(!0),tt(On,{key:1},Sr(At.value,Ye=>(Je(),tt("button",{key:Ye.id,onClick:vn=>dn(Ye),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[M("div",null,[M("div",zR,Zt(zt(Ye)),1)]),Ue[18]||(Ue[18]=M("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,jR))),128))])]))])):zn(F).isSalarie?(Je(),tt("div",lF,[W.value?(Je(),tt("div",pF,[M("div",gF,[M("button",{onClick:st,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Ue[39]||(Ue[39]=[M("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Mi(" Retour  la liste des clients ")])),Ue[40]||(Ue[40]=M("span",{class:"mx-2 text-gray-400"},"|",-1)),M("span",mF,Zt(zt(W.value)),1)]),Ue[42]||(Ue[42]=M("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),M("div",vF,[q.value?(Je(),tt(On,{key:0},Sr(3,Ye=>M("div",{key:Ye,class:"animate-pulse"},Ue[41]||(Ue[41]=[M("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[M("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),M("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),M("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Je(!0),tt(On,{key:1},Sr(D.value,Ye=>(Je(),tt("button",{key:Ye.id,onClick:vn=>fe(Ye.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[M("div",_F,Zt(Ye.nom),1),M("div",bF,Zt(Ye.description),1),M("div",wF," Modifi le "+Zt(Re(Ye.date_modification)),1)],8,yF))),128))])])):(Je(),tt("div",uF,[Ue[38]||(Ue[38]=M("h3",{class:"font-medium text-gray-700"},"Slectionnez un visiteur",-1)),M("div",cF,[K.value?(Je(),tt(On,{key:0},Sr(3,Ye=>M("div",{key:Ye,class:"animate-pulse"},Ue[35]||(Ue[35]=[M("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[M("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),M("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Je(),tt(On,{key:1},[Ce.value.length===0?(Je(),tt("div",hF,Ue[36]||(Ue[36]=[M("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouv pour ce salarie",-1),M("div",{class:"text-sm text-gray-400"}," Veuillez vrifier que des visiteurs ont t assigns  ce salarie ",-1)]))):(Je(!0),tt(On,{key:1},Sr(Ce.value,Ye=>(Je(),tt("button",{key:Ye.id,onClick:vn=>Vt(Ye),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[M("div",null,[M("div",dF,Zt(zt(Ye)),1)]),Ue[37]||(Ue[37]=M("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,fF))),128))],64))])]))])):zn(F).isEntreprise?(Je(),tt("div",xF,Zt(zn(F).isEntreprise?"...":""),1)):(Je(),tt("div",LF,[zn(i).plans.length===0?(Je(),tt("div",SF,Ue[43]||(Ue[43]=[M("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(Je(),tt("div",EF,[(Je(!0),tt(On,null,Sr(zn(i).plans,Ye=>(Je(),tt("button",{key:Ye.id,onClick:vn=>fe(Ye.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[M("div",PF,Zt(Ye.nom),1),M("div",AF,Zt(Ye.description),1),M("div",MF," Modifi le "+Zt(Re(Ye.date_modification)),1)],8,CF))),128))]))]))])])])):xn("",!0)]))])])}}}),kF={class:"fixed inset-0 z-[3001] overflow-y-auto"},TF={class:"flex items-center justify-center min-h-screen w-full p-0"},BF={class:"relative bg-white w-full h-full max-h-full overflow-y-auto md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},OF={class:"p-4 md:p-6"},NF={class:"flex justify-between items-center mb-4 border-b pb-4"},DF={class:"text-xl font-semibold text-gray-900",id:"modal-headline"},IF={class:"mt-4"},RF={key:0,class:"mb-4 rounded-md bg-red-50 p-4"},FF={class:"flex"},jF={class:"ml-3"},zF={class:"text-sm font-medium text-red-800"},UF={key:0},$F={key:1},VF=["value"],HF={key:2},GF={key:3},qF=["value"],WF={class:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-2"},ZF={key:0,class:"mt-2 text-sm text-red-600"},KF={key:0,class:"mt-2 text-sm text-red-600"},YF={key:4},XF={key:5},JF={key:0,class:"mt-2 text-sm text-red-600"},QF={class:"flex justify-end space-x-3"},e9=["disabled"],t9={key:0,class:"mr-2"},n9=Ns({__name:"UserFormModal",props:{user:{type:Object,default:()=>({})},salaries:{type:Array,default:()=>[]},entreprises:{type:Array,default:()=>[]},isAdmin:{type:Boolean,default:!1},isEntreprise:{type:Boolean,default:!1},currentSalarie:{type:String,default:void 0},currentEntreprise:{type:String,default:void 0},apiErrors:{type:Array,default:()=>[]},refreshKey:{type:Number,default:0}},emits:["close","save","refresh"],setup(e,{emit:t}){const n=e,r=t,i=Gt(!1),s=Gt(""),o=Gt(""),u=Gt(""),h=Gt(""),d=Gt(""),v=gu({id:void 0,first_name:"",last_name:"",username:"",email:"",password:"",company_name:"",role:n.isEntreprise?"SALARIE":n.isAdmin?"ADMIN":"VISITEUR",salarie:null,entreprise:null,is_active:!0});Ia(()=>{var x;(x=n.user)!=null&&x.id?(v.id=n.user.id,v.first_name=n.user.first_name||"",v.last_name=n.user.last_name||"",v.username=n.user.username||"",v.email=n.user.email||"",v.company_name=n.user.company_name||"",v.role=n.user.role||"VISITEUR",v.is_active=n.user.is_active??!0,n.user.salarie?typeof n.user.salarie=="object"?v.salarie=n.user.salarie.id:v.salarie=n.user.salarie:n.user.salarie_id?v.salarie=n.user.salarie_id:n.currentSalarie&&(v.salarie=parseInt(n.currentSalarie)),n.user.entreprise?typeof n.user.entreprise=="object"?v.entreprise=n.user.entreprise.id:v.entreprise=n.user.entreprise:n.user.entreprise_id?v.entreprise=n.user.entreprise_id:n.currentEntreprise&&(v.entreprise=parseInt(n.currentEntreprise))):(n.currentSalarie&&(v.salarie=parseInt(n.currentSalarie)),n.currentEntreprise&&(v.entreprise=parseInt(n.currentEntreprise)),n.isEntreprise?v.role="SALARIE":n.isAdmin||(v.role="VISITEUR"))}),vp(()=>{v.role==="ADMIN"||v.role==="ENTREPRISE"?(v.salarie=null,v.entreprise=null):v.role==="SALARIE"&&(v.salarie=null,n.isEntreprise&&n.currentEntreprise&&(v.entreprise=parseInt(n.currentEntreprise)))}),vp(()=>{s.value="",o.value="",u.value="",h.value="",n.apiErrors&&n.apiErrors.length>0&&n.apiErrors.forEach(x=>{switch(x.field){case"email":s.value=x.message;break;case"username":o.value=x.message;break;case"password":u.value=x.message;break;case"non_field_error":default:h.value=x.message;break}})});async function y(){s.value="",o.value="",u.value="",h.value="";let x=!0;if(v.id||(v.password!==d.value?(u.value="Les mots de passe ne correspondent pas",x=!1):v.password.length<8&&(u.value="Le mot de passe doit contenir au moins 8 caractres",x=!1)),!!x){i.value=!0;try{const _={...v};v.id&&delete _.password,n.isEntreprise&&["SALARIE","VISITEUR"].includes(v.role)&&(_.entreprise_id=n.currentEntreprise?parseInt(n.currentEntreprise):void 0),_.salarie&&(_.salarie_id=_.salarie,delete _.salarie),n.currentSalarie&&v.role==="VISITEUR"&&(_.salarie_id=parseInt(n.currentSalarie)),await r("save",_),r("refresh")}catch(_){console.error("Erreur locale:",_)}finally{i.value=!1}}}return(x,_)=>(Je(),tt("div",kF,[M("div",TF,[_[31]||(_[31]=M("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[M("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),M("div",BF,[M("div",null,[M("div",OF,[M("div",NF,[M("h3",DF,Zt(e.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),M("button",{type:"button",onClick:_[0]||(_[0]=P=>x.$emit("close")),class:"text-gray-400 hover:text-gray-500"},_[13]||(_[13]=[M("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),M("div",IF,[h.value?(Je(),tt("div",RF,[M("div",FF,[_[14]||(_[14]=M("div",{class:"flex-shrink-0"},[M("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),M("div",jF,[M("h3",zF,Zt(h.value),1)])])])):xn("",!0),M("form",{onSubmit:ef(y,["prevent"]),class:"space-y-6"},[e.isAdmin?(Je(),tt("div",UF,[_[16]||(_[16]=M("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),Zn(M("select",{id:"role","onUpdate:modelValue":_[1]||(_[1]=P=>v.role=P),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},_[15]||(_[15]=[M("option",{value:"ADMIN"},"Administrateur",-1),M("option",{value:"ENTREPRISE"},"Entreprise",-1),M("option",{value:"SALARIE"},"Salarie",-1),M("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[Jo,v.role]])])):xn("",!0),e.isAdmin&&v.role==="SALARIE"?(Je(),tt("div",$F,[_[18]||(_[18]=M("label",{for:"entreprise",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Zn(M("select",{id:"entreprise","onUpdate:modelValue":_[2]||(_[2]=P=>v.entreprise=P),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},[_[17]||(_[17]=M("option",{value:null},"-- Slectionner une entreprise --",-1)),(Je(!0),tt(On,null,Sr(e.entreprises,P=>(Je(),tt("option",{key:P.id,value:P.id},Zt(P.first_name)+" "+Zt(P.last_name)+" ("+Zt(P.company_name||"Entreprise")+") ",9,VF))),128))],512),[[Jo,v.entreprise]])])):xn("",!0),e.isEntreprise&&!v.id?(Je(),tt("div",HF,[_[20]||(_[20]=M("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),Zn(M("select",{id:"role","onUpdate:modelValue":_[3]||(_[3]=P=>v.role=P),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},_[19]||(_[19]=[M("option",{value:"SALARIE"},"Salarie",-1),M("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[Jo,v.role]])])):xn("",!0),(e.isAdmin||e.isEntreprise)&&v.role==="VISITEUR"&&!e.currentSalarie?(Je(),tt("div",GF,[_[22]||(_[22]=M("label",{for:"salarie",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),Zn(M("select",{id:"salarie","onUpdate:modelValue":_[4]||(_[4]=P=>v.salarie=P),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},[_[21]||(_[21]=M("option",{value:null},"-- Slectionner un salarie --",-1)),(Je(!0),tt(On,null,Sr(e.salaries,P=>(Je(),tt("option",{key:P.id,value:P.id},Zt(P.first_name)+" "+Zt(P.last_name)+" ("+Zt(P.company_name||"Salarie")+") ",9,qF))),128))],512),[[Jo,v.salarie]])])):xn("",!0),M("div",WF,[M("div",null,[_[23]||(_[23]=M("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prnom",-1)),Zn(M("input",{type:"text",id:"first_name","onUpdate:modelValue":_[5]||(_[5]=P=>v.first_name=P),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Kr,v.first_name]])]),M("div",null,[_[24]||(_[24]=M("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),Zn(M("input",{type:"text",id:"last_name","onUpdate:modelValue":_[6]||(_[6]=P=>v.last_name=P),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Kr,v.last_name]])])]),M("div",null,[_[25]||(_[25]=M("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),Zn(M("input",{type:"email",id:"email","onUpdate:modelValue":_[7]||(_[7]=P=>v.email=P),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Kr,v.email]]),s.value?(Je(),tt("div",ZF,Zt(s.value),1)):xn("",!0)]),M("div",null,[_[26]||(_[26]=M("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),Zn(M("input",{type:"text",id:"username","onUpdate:modelValue":_[8]||(_[8]=P=>v.username=P),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Kr,v.username]]),o.value?(Je(),tt("div",KF,Zt(o.value),1)):xn("",!0)]),M("div",null,[_[27]||(_[27]=M("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Zn(M("input",{type:"text",id:"company_name","onUpdate:modelValue":_[9]||(_[9]=P=>v.company_name=P),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Kr,v.company_name]])]),v.id?xn("",!0):(Je(),tt("div",YF,[_[28]||(_[28]=M("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),Zn(M("input",{type:"password",id:"password","onUpdate:modelValue":_[10]||(_[10]=P=>v.password=P),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Kr,v.password]])])),v.id?xn("",!0):(Je(),tt("div",XF,[_[29]||(_[29]=M("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),Zn(M("input",{type:"password",id:"password_confirm","onUpdate:modelValue":_[11]||(_[11]=P=>d.value=P),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Kr,d.value]]),u.value?(Je(),tt("div",JF,Zt(u.value),1)):xn("",!0)])),M("div",QF,[M("button",{type:"button",onClick:_[12]||(_[12]=P=>x.$emit("close")),class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Annuler "),M("button",{type:"submit",disabled:i.value,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[i.value?(Je(),tt("span",t9,_[30]||(_[30]=[M("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[M("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),M("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):xn("",!0),Mi(" "+Zt(v.id?"Enregistrer":"Crer"),1)],8,e9)])],32)])])])])])]))}}),r9={class:"fixed inset-0 z-[3001] overflow-y-auto"},i9={class:"flex items-center justify-center min-h-screen w-full"},o9={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},s9={class:"p-4 md:p-6"},a9={class:"flex items-start"},l9={class:"ml-4 flex-1"},u9={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},c9={class:"mt-2"},h9={class:"text-sm text-gray-500"},f9={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3"},D3=Ns({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(e){return(t,n)=>(Je(),tt("div",r9,[M("div",i9,[n[3]||(n[3]=M("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[M("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),M("div",o9,[M("div",s9,[M("div",a9,[n[2]||(n[2]=M("div",{class:"flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[M("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),M("div",l9,[M("h3",u9,Zt(e.title),1),M("div",c9,[M("p",h9,Zt(e.message),1)])])]),M("div",f9,[M("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm",onClick:n[0]||(n[0]=r=>t.$emit("confirm"))}," Confirmer "),M("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm",onClick:n[1]||(n[1]=r=>t.$emit("cancel"))}," Annuler ")])])])])]))}}),d9={class:"h-full bg-gray-50"},p9={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},g9={class:"flex justify-between items-center mb-8"},m9={class:"text-3xl font-extrabold text-gray-900"},v9={key:0},y9={key:1},_9={key:2},b9={key:0},w9={key:1},x9={key:2},L9={class:"bg-white shadow rounded-lg mb-6 p-4"},S9={class:"space-y-4"},E9={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},C9={key:0},P9={key:0,value:"ADMIN"},A9={key:1,value:"ENTREPRISE"},M9={key:1},k9=["value"],T9={key:2},B9=["value"],O9={class:"w-full"},N9={class:"bg-white shadow rounded-lg"},D9={class:"overflow-x-auto"},I9={class:"min-w-full divide-y divide-gray-200"},R9={class:"bg-gray-50"},F9={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},j9={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},z9={class:"bg-white divide-y divide-gray-200"},U9={key:0,class:"animate-pulse"},$9={key:1},V9={class:"px-6 py-4 whitespace-nowrap"},H9={class:"flex items-center"},G9={class:"flex-shrink-0 h-10 w-10"},q9={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},W9={class:"text-primary-600 font-medium"},Z9={class:"ml-4"},K9={class:"text-sm font-medium text-gray-900"},Y9={class:"text-sm text-gray-500"},X9={class:"px-6 py-4 whitespace-nowrap"},J9={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Q9={key:0,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ej={key:1,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},tj={class:"px-6 py-4 whitespace-nowrap"},nj={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},rj=["onClick"],ij=["onClick"],oj={key:0,class:"fixed inset-0 z-[3001] overflow-y-auto"},sj=Ns({__name:"UserListView",setup(e){const t=Da(),n=Kf(),r=Gt([]),i=Gt([]),s=Gt([]),o=Gt(!1),u=Gt(!1),h=Gt(null),d=Gt(null),v=Gt(!0),y=Gt([]),x=gu({role:"",search:"",salarie:"",entreprise:""}),_=ir(()=>t.isAdmin),P=ir(()=>t.isEntreprise),T=ir(()=>t.isSalarie),U=ir(()=>_.value?r.value.filter(I=>I.role==="SALARIE"):P.value?r.value.filter(I=>{var W,G;return I.role==="SALARIE"&&((W=I.entreprise)==null?void 0:W.id)===((G=t.user)==null?void 0:G.id)}):[]),N=ir(()=>{let I=r.value;if(P.value&&(I=I.filter(W=>{var G,K,q,ve,Ce;return W.role==="SALARIE"?((G=W.entreprise)==null?void 0:G.id)===((K=t.user)==null?void 0:K.id):W.role==="VISITEUR"?((ve=(q=W.salarie)==null?void 0:q.entreprise)==null?void 0:ve.id)===((Ce=t.user)==null?void 0:Ce.id):!1})),T.value&&(I=I.filter(W=>{var G,K;return W.role==="VISITEUR"&&(W.salarie_id===((G=t.user)==null?void 0:G.id)||W.salarie&&W.salarie.id===((K=t.user)==null?void 0:K.id))})),(_.value||P.value)&&(x.role&&(I=I.filter(W=>W.role===x.role)),x.salarie&&(I=I.filter(W=>{var K;const G=((K=W.salarie)==null?void 0:K.id)||W.salarie_id;return(G==null?void 0:G.toString())===x.salarie.toString()})),x.entreprise&&_.value&&(I=I.filter(W=>{var G,K,q,ve,Ce;return W.role==="SALARIE"?((K=(G=W.entreprise)==null?void 0:G.id)==null?void 0:K.toString())===x.entreprise.toString():W.role==="VISITEUR"?((Ce=(ve=(q=W.salarie)==null?void 0:q.entreprise)==null?void 0:ve.id)==null?void 0:Ce.toString())===x.entreprise.toString():!1}))),x.search){const W=x.search.toLowerCase();I=I.filter(G=>{var K,q,ve,Ce;return((K=G.username)==null?void 0:K.toLowerCase().includes(W))||((q=G.email)==null?void 0:q.toLowerCase().includes(W))||((ve=G.first_name)==null?void 0:ve.toLowerCase().includes(W))||((Ce=G.last_name)==null?void 0:Ce.toLowerCase().includes(W))||G.company_name&&G.company_name.toLowerCase().includes(W)})}return I});Ia(async()=>{await j(),await Z()});async function j(){var I,W,G;v.value=!0;try{if(_.value)r.value=await t.fetchUsers();else if(P.value){const[K,q]=await Promise.all([N0({role:"SALARIE",entrepriseId:(I=t.user)==null?void 0:I.id}),N0({role:"VISITEUR",entrepriseId:(W=t.user)==null?void 0:W.id})]);r.value=[...K,...q]}else T.value&&(r.value=await N0({role:"VISITEUR",salarieId:(G=t.user)==null?void 0:G.id,includeDetails:!0}),console.log("Visiteurs rcuprs:",r.value))}catch(K){console.error("Erreur lors de la rcupration des utilisateurs:",K),n.error("Erreur lors de la rcupration des utilisateurs")}finally{v.value=!1}}async function Z(){try{_.value?await Promise.all([J(),he()]):P.value&&await le()}catch(I){console.error("Erreur lors de la rcupration des dpendances:",I)}}async function J(){var I;try{_.value?i.value=await t.fetchUsersByRole({role:"SALARIE"}):P.value&&(i.value=await t.fetchEntrepriseSalaries((I=t.user)==null?void 0:I.id))}catch(W){console.error("Erreur lors de la rcupration des salaries:",W)}}async function le(){var I,W;if(!(!P.value||!((I=t.user)!=null&&I.id)))try{i.value=await t.fetchEntrepriseSalaries((W=t.user)==null?void 0:W.id)}catch(G){console.error("Erreur lors de la rcupration des salaries de l'entreprise:",G)}}async function he(){try{s.value=await t.fetchEnterprises()}catch(I){console.error("Erreur lors de la rcupration des entreprises:",I)}}function Le(){h.value=null,o.value=!0}function V(I){h.value={...I},o.value=!0}function F(){o.value=!1,h.value=null,y.value=[]}async function Y(I){var G,K,q,ve,Ce,Xe;y.value=[];const W=!!I.id;try{const B={...I};_.value?(B.entreprise&&typeof B.entreprise=="object"?B.entreprise_id=B.entreprise.id:typeof B.entreprise=="number"&&(B.entreprise_id=B.entreprise),B.salarie&&typeof B.salarie=="object"?B.salarie_id=B.salarie.id:typeof B.salarie=="number"&&(B.salarie_id=B.salarie)):P.value?(B.entreprise_id=(G=t.user)==null?void 0:G.id,B.role==="VISITEUR"&&(B.salarie&&typeof B.salarie=="object"?B.salarie_id=B.salarie.id:typeof B.salarie=="number"&&(B.salarie_id=B.salarie))):T.value&&(B.role="VISITEUR",B.salarie_id=(K=t.user)==null?void 0:K.id),B.role==="SALARIE"?((q=B.entreprise)!=null&&q.id?(B.entreprise_id=B.entreprise.id,delete B.entreprise):typeof B.entreprise=="number"&&(B.entreprise_id=B.entreprise,delete B.entreprise),delete B.salarie):B.role==="VISITEUR"&&((ve=B.salarie)!=null&&ve.id?(B.salarie_id=B.salarie.id,delete B.salarie):typeof B.salarie=="number"&&(B.salarie_id=B.salarie,delete B.salarie),delete B.entreprise,delete B.entreprise_id),W?(await t.updateUser(I.id,B),n.success("Utilisateur modifi avec succs")):(await t.createUser(B),n.success("Utilisateur cr avec succs")),await Promise.all([j(),Z()]),F()}catch(B){console.error("Error saving user:",((Ce=B.response)==null?void 0:Ce.data)||B),y.value=eT(B),n.error("Erreur lors de la sauvegarde de l'utilisateur");const te=((Xe=B.response)==null?void 0:Xe.data)||{};let se="";throw typeof te=="object"&&(se=Object.entries(te).map(([ae,we])=>Array.isArray(we)?`${ae}: ${we[0]}`:`${ae}: ${we}`).filter(ae=>ae).join(`
`)),se||(se="Une erreur est survenue lors de la sauvegarde"),new Error(se)}}function $(I){d.value=I,u.value=!0}async function D(){if(d.value)try{await t.deleteUser(d.value.id),n.success("Utilisateur supprim avec succs"),await Promise.all([j(),Z()]),u.value=!1,d.value=null}catch(I){throw console.error("Erreur lors de la suppression de l'utilisateur:",I),n.error("Erreur lors de la suppression de l'utilisateur"),I}}function k(I){var W,G,K,q,ve,Ce,Xe,B;return _.value?!0:P.value?I.role==="SALARIE"?((W=I.entreprise)==null?void 0:W.id)===((G=t.user)==null?void 0:G.id):I.role==="VISITEUR"?((q=(K=I.salarie)==null?void 0:K.entreprise)==null?void 0:q.id)===((ve=t.user)==null?void 0:ve.id):!1:T.value?I.role==="VISITEUR"&&(I.salarie_id===((Ce=t.user)==null?void 0:Ce.id)||((Xe=I.salarie)==null?void 0:Xe.id)===((B=t.user)==null?void 0:B.id)):!1}return(I,W)=>{var G,K,q,ve;return Je(),tt("div",d9,[M("div",p9,[M("div",g9,[M("h1",m9,[_.value?(Je(),tt("span",v9,"Gestion des utilisateurs")):P.value?(Je(),tt("span",y9,"Gestion des salaries et visiteurs")):T.value?(Je(),tt("span",_9,"Gestion des visiteurs")):xn("",!0)]),M("button",{onClick:Le,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[W[5]||(W[5]=M("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),_.value?(Je(),tt("span",b9,"Nouvel utilisateur")):P.value?(Je(),tt("span",w9,"Nouveau salarie/visiteur")):T.value?(Je(),tt("span",x9,"Nouvel visiteur")):xn("",!0)])]),M("div",L9,[M("div",S9,[M("div",E9,[_.value||P.value?(Je(),tt("div",C9,[W[9]||(W[9]=M("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rle",-1)),Zn(M("select",{id:"role-filter","onUpdate:modelValue":W[0]||(W[0]=Ce=>x.role=Ce),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[W[6]||(W[6]=M("option",{value:""},"Tous les rles",-1)),_.value?(Je(),tt("option",P9,"Administrateur")):xn("",!0),_.value?(Je(),tt("option",A9,"Entreprise")):xn("",!0),W[7]||(W[7]=M("option",{value:"SALARIE"},"Salarie",-1)),W[8]||(W[8]=M("option",{value:"VISITEUR"},"Visiteur",-1))],512),[[Jo,x.role]])])):xn("",!0),_.value?(Je(),tt("div",M9,[W[11]||(W[11]=M("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Zn(M("select",{id:"entreprise-filter","onUpdate:modelValue":W[1]||(W[1]=Ce=>x.entreprise=Ce),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[W[10]||(W[10]=M("option",{value:""},"Toutes les entreprises",-1)),(Je(!0),tt(On,null,Sr(s.value,Ce=>(Je(),tt("option",{key:Ce.id,value:Ce.id},Zt(zn(zl)(Ce)),9,k9))),128))],512),[[Jo,x.entreprise]])])):xn("",!0),_.value||P.value?(Je(),tt("div",T9,[W[13]||(W[13]=M("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),Zn(M("select",{id:"salarie-filter","onUpdate:modelValue":W[2]||(W[2]=Ce=>x.salarie=Ce),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[W[12]||(W[12]=M("option",{value:""},"Tous les salaries",-1)),(Je(!0),tt(On,null,Sr(U.value,Ce=>(Je(),tt("option",{key:Ce.id,value:Ce.id},Zt(zn(zl)(Ce)),9,B9))),128))],512),[[Jo,x.salarie]])])):xn("",!0)]),M("div",O9,[W[14]||(W[14]=M("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),Zn(M("input",{type:"text",id:"search","onUpdate:modelValue":W[3]||(W[3]=Ce=>x.search=Ce),placeholder:"Rechercher par nom, email, entreprise...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Kr,x.search]])])])]),M("div",N9,[M("div",D9,[M("table",I9,[M("thead",R9,[M("tr",null,[W[15]||(W[15]=M("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Utilisateur ",-1)),W[16]||(W[16]=M("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rle ",-1)),W[17]||(W[17]=M("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),_.value||P.value?(Je(),tt("th",F9," Entreprise ")):xn("",!0),_.value||P.value?(Je(),tt("th",j9," Salarie ")):xn("",!0),W[18]||(W[18]=M("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),W[19]||(W[19]=M("th",{scope:"col",class:"relative px-6 py-3"},[M("span",{class:"sr-only"},"Actions")],-1))])]),M("tbody",z9,[v.value?(Je(),tt("tr",U9,W[20]||(W[20]=[M("td",{colspan:"7",class:"py-4 px-6"},[M("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):N.value.length===0?(Je(),tt("tr",$9,W[21]||(W[21]=[M("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun utilisateur trouv ",-1)]))):xn("",!0),(Je(!0),tt(On,null,Sr(N.value,Ce=>{var Xe;return Je(),tt("tr",{key:Ce.id},[M("td",V9,[M("div",H9,[M("div",G9,[M("div",q9,[M("span",W9,Zt(zn(nT)(Ce.first_name,Ce.last_name)),1)])]),M("div",Z9,[M("div",K9,Zt(zn(zl)(Ce)),1),M("div",Y9,Zt(Ce.username),1)])])]),M("td",X9,[M("span",{class:Yi(zn(oT)())},Zt(zn(iT)(Ce.role)),3)]),M("td",J9,Zt(Ce.email),1),_.value||P.value?(Je(),tt("td",Q9,[Ce.role==="ENTREPRISE"?(Je(),tt(On,{key:0},[Mi(" - ")],64)):Ce.role==="SALARIE"?(Je(),tt(On,{key:1},[Mi(Zt(Ce.entreprise?zn(zl)(Ce.entreprise):"Non assign"),1)],64)):Ce.role==="VISITEUR"?(Je(),tt(On,{key:2},[Mi(Zt((Xe=Ce.salarie)!=null&&Xe.entreprise?zn(zl)(Ce.salarie.entreprise):"Non assign"),1)],64)):(Je(),tt(On,{key:3},[Mi(" - ")],64))])):xn("",!0),_.value||P.value?(Je(),tt("td",ej,[Ce.role==="ENTREPRISE"||Ce.role==="ADMIN"?(Je(),tt(On,{key:0},[Mi(" - ")],64)):Ce.role==="SALARIE"?(Je(),tt(On,{key:1},[Mi(" - ")],64)):(Je(),tt(On,{key:2},[Mi(Zt(Ce.salarie?zn(zl)(Ce.salarie):"Non assign"),1)],64))])):xn("",!0),M("td",tj,[M("span",{class:Yi(zn(sT)(Ce.is_active))},Zt(Ce.is_active?"Actif":"Inactif"),3)]),M("td",nj,[M("button",{onClick:B=>V(Ce),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,rj),k(Ce)?(Je(),tt("button",{key:0,onClick:B=>$(Ce),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,ij)):xn("",!0)])])}),128))])])])])]),o.value?(Je(),tt("div",oj,[qr(n9,{user:h.value,salaries:i.value,entreprises:s.value,"is-admin":_.value,"is-entreprise":P.value,"current-salarie":T.value?(K=(G=zn(t).user)==null?void 0:G.id)==null?void 0:K.toString():void 0,"current-entreprise":P.value?(ve=(q=zn(t).user)==null?void 0:q.id)==null?void 0:ve.toString():void 0,"api-errors":y.value,onClose:F,onSave:Y},null,8,["user","salaries","entreprises","is-admin","is-entreprise","current-salarie","current-entreprise","api-errors"])])):xn("",!0),u.value?(Je(),hu(D3,{key:1,title:"Supprimer l'utilisateur",message:"tes-vous sr de vouloir supprimer cet utilisateur ? Cette action est irrversible.",onConfirm:D,onCancel:W[4]||(W[4]=Ce=>u.value=!1)})):xn("",!0)])}}}),aj={class:"h-full bg-gray-50"},lj={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},uj={class:"sm:flex sm:items-center"},cj={class:"sm:flex-auto"},hj={class:"text-2xl font-semibold text-gray-900"},fj={class:"mt-2 text-sm text-gray-700"},dj={key:0,class:"mt-8"},pj={class:"mb-6"},gj=["value"],mj={class:"mb-6"},vj={value:null},yj=["value"],_j={key:0,class:"mb-6"},bj={value:null},wj=["value"],xj={key:1,class:"mt-8"},Lj={class:"mb-6"},Sj=["value"],Ej={class:"mt-8"},Cj={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},Pj={class:"overflow-x-auto"},Aj={class:"min-w-full divide-y divide-gray-300"},Mj={class:"bg-gray-50"},kj={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"},Tj={class:"ml-2 flex-none rounded"},Bj={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},Oj={class:"ml-2 flex-none rounded"},Nj={class:"divide-y divide-gray-200 bg-white"},Dj={key:0},Ij={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},Rj={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},Fj={class:"px-3 py-4 text-sm text-gray-900"},jj={key:0,class:"flex items-center"},zj={class:"h-8 w-8 flex-shrink-0"},Uj={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},$j={class:"text-primary-700 font-medium text-sm"},Vj={class:"ml-3"},Hj={class:"font-medium"},Gj={key:1,class:"text-gray-500"},qj={class:"px-3 py-4 text-sm text-gray-900"},Wj={key:0,class:"flex items-center"},Zj={class:"h-8 w-8 flex-shrink-0"},Kj={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},Yj={class:"text-primary-700 font-medium text-sm"},Xj={class:"ml-3"},Jj={class:"font-medium"},Qj={key:1,class:"text-gray-500"},ez={class:"px-3 py-4 text-sm text-gray-900"},tz={key:0,class:"flex items-center"},nz={class:"h-8 w-8 flex-shrink-0"},rz={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},iz={class:"text-primary-700 font-medium text-sm"},oz={class:"ml-3"},sz={class:"font-medium"},az={key:1,class:"text-gray-500"},lz={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},uz={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},cz=["onClick"],hz=["onClick"],fz=["onClick"],dz={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},pz={class:"bg-white rounded-lg p-6 max-w-md w-full"},gz={class:"flex justify-between items-center mb-4"},mz=["disabled"],vz=["disabled"],yz={key:0,class:"space-y-4"},_z={key:0},bz=["disabled"],wz=["value"],xz=["disabled"],Lz=["value"],Sz={key:0,class:"mt-1 text-sm text-gray-500"},Ez=["disabled"],Cz=["value"],Pz={key:0,class:"mt-1 text-sm text-gray-500"},Az={key:1,class:"mt-4 bg-red-50 p-4 rounded-md"},Mz={class:"flex"},kz={class:"ml-3"},Tz={class:"text-sm font-medium text-red-800"},Bz={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},Oz=["disabled"],Nz={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Dz=Ns({__name:"PlansView",setup(e){const t=Bp(),n=dy(),r=Da(),i=Gt([]),s=Gt([]),o=Gt([]),u=Gt([]),h=Gt(!1),d=Gt(!1),v=Gt(!1),y=Gt(null),x=Gt({nom:"",description:"",client:null}),_=Gt({id:0,nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),P=Gt(!1),T=Gt(null),U=Gt(null),N=Gt(null),j=Gt("date_modification"),Z=Gt("desc"),J=Gt(null),le=ir(()=>U.value?u.value.filter(Q=>typeof Q.salarie=="object"&&Q.salarie?Q.salarie.id===U.value:Q.salarie===U.value||Q.salarie_id===U.value):u.value),he=ir(()=>{let Q=i.value;console.log(`
[PlansView] Filtering plans:`,Q.map(Re=>({id:Re.id,entreprise:Re.entreprise,salarie:Re.salarie,visiteur:Re.visiteur}))),r.isAdmin?(J.value&&(Q=Q.filter(Re=>{var Me;return typeof Re.entreprise=="object"?((Me=Re.entreprise)==null?void 0:Me.id)===J.value:Re.entreprise===J.value})),U.value&&(Q=Q.filter(Re=>{var Me;return typeof Re.salarie=="object"?((Me=Re.salarie)==null?void 0:Me.id)===U.value:Re.salarie===U.value}),N.value&&(Q=Q.filter(Re=>{var Me;return typeof Re.visiteur=="object"?((Me=Re.visiteur)==null?void 0:Me.id)===N.value:Re.visiteur===N.value})))):r.isSalarie&&(Q=Q.filter(Re=>{var Me,Ze,oe;return typeof Re.salarie=="object"?((Me=Re.salarie)==null?void 0:Me.id)===((Ze=r.user)==null?void 0:Ze.id):Re.salarie===((oe=r.user)==null?void 0:oe.id)}),N.value&&(Q=Q.filter(Re=>{var Me;return typeof Re.visiteur=="object"?((Me=Re.visiteur)==null?void 0:Me.id)===N.value:Re.visiteur===N.value})));const ue=[...Q].sort((Re,Me)=>{if(j.value==="nom")return Z.value==="asc"?Re.nom.localeCompare(Me.nom):Me.nom.localeCompare(Re.nom);{const Ze=new Date(Re[j.value]).getTime(),oe=new Date(Me[j.value]).getTime();return Z.value==="asc"?Ze-oe:oe-Ze}});return console.log("[PlansView] Final filtered and sorted plans:",ue.map(Re=>({id:Re.id,entreprise:Re.entreprise,salarie:Re.salarie,visiteur:Re.visiteur}))),ue}),Le=ir(()=>r.isAdmin?{title:"Tous les plans",description:"Liste complte des plans",plans:i.value}:r.isSalarie?{title:"Plans des visiteurs",description:"Plans o vous tes assign comme salarie",plans:i.value.filter(Q=>{var ue,Re,Me;return typeof Q.salarie=="object"?((ue=Q.salarie)==null?void 0:ue.id)===((Re=r.user)==null?void 0:Re.id):Q.salarie===((Me=r.user)==null?void 0:Me.id)})}:{title:"Mes plans",description:"Plans qui vous sont assigns ou que vous avez crs",plans:i.value.filter(Q=>{var Me,Ze,oe,me;const ue=Q.createur.id===((Me=r.user)==null?void 0:Me.id);let Re=!1;return typeof Q.visiteur=="object"?Re=((Ze=Q.visiteur)==null?void 0:Ze.id)===((oe=r.user)==null?void 0:oe.id):Re=Q.visiteur===((me=r.user)==null?void 0:me.id),Re||ue})}),V=ir(()=>J.value?s.value.filter(Q=>{var ue;return typeof Q.entreprise=="object"?((ue=Q.entreprise)==null?void 0:ue.id)===J.value:Q.entreprise_id===J.value}):s.value),F=ir(()=>_.value.entreprise?s.value.filter(Q=>{var ue;return typeof Q.entreprise=="object"?((ue=Q.entreprise)==null?void 0:ue.id)===_.value.entreprise:Q.entreprise_id===_.value.entreprise}):[]),Y=ir(()=>!_.value.entreprise||!_.value.salarie?[]:u.value.filter(Q=>typeof Q.salarie=="object"&&Q.salarie?Q.salarie.id===_.value.salarie:Q.salarie===_.value.salarie||Q.salarie_id===_.value.salarie));Ia(async()=>{var Q;await $(),r.isAdmin?await D():r.isSalarie&&await I(((Q=r.user)==null?void 0:Q.id)||0)});async function $(){try{const Q=await n.fetchPlansWithDetails();i.value=Q.data}catch(Q){console.error("Erreur lors du chargement des plans:",Q)}}async function D(){try{console.log("Chargement des entreprises..."),o.value=await r.fetchEnterprises(),console.log("Entreprises charges:",o.value)}catch(Q){console.error("Erreur lors du chargement des entreprises:",Q)}}async function k(Q){try{if(console.log("Chargement des salaries pour l'entreprise:",Q),Q===void 0){const ue=await r.fetchUsersByRole({role:"SALARIE"});s.value=ue}else s.value=await r.fetchEntrepriseSalaries(Q);console.log("Salaries chargs:",s.value)}catch(ue){console.error("Erreur lors du chargement des salaries:",ue)}}async function I(Q){try{console.log("Chargement des visiteurs pour le salarie:",Q);const ue=await N0({role:"VISITEUR",salarieId:Q});u.value=ue.map(Re=>({...Re,salarie_id:Q})),console.log("Visiteurs chargs:",u.value)}catch(ue){console.error("Erreur lors du chargement des visiteurs:",ue)}}function W(){h.value=!0,x.value={nom:"",description:"",client:null}}async function G(Q){console.log(`
[PlansView][editPlan] ====== DBUT DITION PLAN ======`),console.log("[PlansView][editPlan] Plan reu:",{id:Q.id,nom:Q.nom,entreprise:Q.entreprise,salarie:Q.salarie,visiteur:Q.visiteur});try{console.log("[PlansView][editPlan] Dfinition du plan courant dans le store..."),n.setCurrentPlan(Q),console.log("[PlansView][editPlan] Sauvegarde de l'ID dans localStorage:",Q.id),localStorage.setItem("lastPlanId",Q.id.toString()),console.log("[PlansView][editPlan] Redirection vers la vue carte..."),await t.push("/"),console.log(`[PlansView][editPlan] ====== FIN DITION PLAN ======
`)}catch(ue){console.error("[PlansView][editPlan] ERREUR:",ue),ue instanceof Error&&console.error("[PlansView][editPlan] Stack trace:",ue.stack),alert("Une erreur est survenue lors du chargement du plan")}}async function K(Q){Q!=null&&Q.id&&(y.value=Q,v.value=!0)}async function q(){var Q,ue;if((Q=y.value)!=null&&Q.id)try{await n.deletePlan(y.value.id),await $(),((ue=n.currentPlan)==null?void 0:ue.id)===y.value.id&&n.clearCurrentPlan()}catch(Re){console.error("Erreur lors de la suppression du plan:",Re),alert("Une erreur est survenue lors de la suppression du plan")}finally{v.value=!1,y.value=null}}function ve(){v.value=!1,y.value=null}function Ce(Q){return new Date(Q).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function Xe(Q){if(!Q)return"";const ue=Q.first_name||"",Re=Q.last_name||"";return(ue.charAt(0)+Re.charAt(0)).toUpperCase()}async function B(Q){P.value=!0,T.value=null;try{r.isAdmin&&!o.value.length&&await D();const ue=typeof Q.entreprise=="object"&&Q.entreprise?Q.entreprise.id:Q.entreprise,Re=typeof Q.salarie=="object"&&Q.salarie?Q.salarie.id:Q.salarie,Me=typeof Q.visiteur=="object"&&Q.visiteur?Q.visiteur.id:Q.visiteur;_.value={id:Q.id,nom:Q.nom,description:Q.description,entreprise:ue||null,salarie:Re||null,visiteur:Me||null},ue&&await k(ue),Re&&await I(Re),d.value=!0}catch(ue){console.error("Erreur lors de l'ouverture du modal:",ue),T.value="Erreur lors du chargement des donnes"}finally{P.value=!1}}async function te(){var Q,ue,Re,Me,Ze;T.value=null,P.value=!0;try{if(!_.value.nom.trim())throw new Error("Le nom du plan est requis");if(_.value.visiteur&&!_.value.salarie)throw new Error("Un salarie doit tre slectionn pour assigner un visiteur");if(_.value.salarie&&!_.value.entreprise)throw new Error("Une entreprise doit tre slectionne pour assigner un salarie");console.log("Donnes envoyes pour la mise  jour:",{id:_.value.id,nom:_.value.nom.trim(),description:_.value.description.trim(),entreprise_id:_.value.entreprise,salarie_id:_.value.salarie,visiteur_id:_.value.visiteur});const oe=await n.updatePlanDetails(_.value.id,{nom:_.value.nom.trim(),description:_.value.description.trim(),entreprise_id:_.value.entreprise,salarie_id:_.value.salarie,visiteur_id:_.value.visiteur});console.log("Rponse de la mise  jour:",oe),oe&&(d.value=!1,await $())}catch(oe){if(console.error("Erreur lors de la mise  jour du plan:",oe),(ue=(Q=oe.response)==null?void 0:Q.data)!=null&&ue.detail)T.value=oe.response.data.detail;else if((Me=(Re=oe.response)==null?void 0:Re.data)!=null&&Me.non_field_errors)T.value=oe.response.data.non_field_errors[0];else if((Ze=oe.response)!=null&&Ze.data){const me=Object.entries(oe.response.data).map(([pe,de])=>`${pe}: ${Array.isArray(de)?de[0]:de}`);T.value=me.join(`
`)}else T.value=oe.message||"Une erreur est survenue lors de la mise  jour du plan"}finally{P.value=!1}}hs(()=>J.value,async Q=>{U.value=null,N.value=null,Q?await k(Q):await k()}),hs(()=>U.value,async Q=>{N.value=null,Q&&await I(Q)}),hs(()=>_.value.entreprise,async Q=>{Q===null?(_.value.salarie=null,_.value.visiteur=null):await k(Q)}),hs(()=>_.value.salarie,async Q=>{_.value.visiteur=null,Q&&await I(Q)});function se(Q){var Ze,oe,me;const ue=r.user;if(!ue)return!1;if(ue.user_type==="admin")return!0;if(ue.user_type==="entreprise")return typeof Q.entreprise=="object"?((Ze=Q.entreprise)==null?void 0:Ze.id)===ue.id:Q.entreprise===ue.id;if(ue.user_type==="salarie")return typeof Q.salarie=="object"?((oe=Q.salarie)==null?void 0:oe.id)===ue.id:Q.salarie===ue.id;const Re=Q.createur.id===ue.id;let Me=!1;return typeof Q.visiteur=="object"?Me=((me=Q.visiteur)==null?void 0:me.id)===ue.id:Me=Q.visiteur===ue.id,Me||Re}async function ae(Q){await $(),localStorage.setItem("lastPlanId",Q.toString()),console.log(`Plan ${Q} cr et dfini comme plan actif`),t.push("/")}function we(Q){j.value===Q?Z.value=Z.value==="asc"?"desc":"asc":(j.value=Q,Z.value="desc")}function fe(Q){return Q?zl(Q):""}return(Q,ue)=>{var Re;return Je(),tt("div",aj,[M("div",lj,[M("div",uj,[M("div",cj,[M("h1",hj,Zt(Le.value.title),1),M("p",fj,Zt(Le.value.description),1)]),M("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[M("button",{onClick:W,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),zn(r).isAdmin?(Je(),tt("div",dj,[M("div",pj,[ue[15]||(ue[15]=M("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par entreprise",-1)),Zn(M("select",{id:"entreprise-filter","onUpdate:modelValue":ue[0]||(ue[0]=Me=>J.value=Me),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[ue[14]||(ue[14]=M("option",{value:null},"Toutes les entreprises",-1)),(Je(!0),tt(On,null,Sr(o.value,Me=>(Je(),tt("option",{key:Me.id,value:Me.id},Zt(fe(Me)),9,gj))),128))],512),[[Jo,J.value]])]),M("div",mj,[ue[16]||(ue[16]=M("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par salarie",-1)),Zn(M("select",{id:"salarie-filter","onUpdate:modelValue":ue[1]||(ue[1]=Me=>U.value=Me),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[M("option",vj,Zt(V.value.length?"Tous les salaries":"Aucun salarie disponible"),1),(Je(!0),tt(On,null,Sr(V.value,Me=>(Je(),tt("option",{key:Me.id,value:Me.id},Zt(fe(Me)),9,yj))),128))],512),[[Jo,U.value]])]),U.value?(Je(),tt("div",_j,[ue[17]||(ue[17]=M("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),Zn(M("select",{id:"visiteur-filter","onUpdate:modelValue":ue[2]||(ue[2]=Me=>N.value=Me),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[M("option",bj,Zt(le.value.length?"Tous les visiteurs":"Aucun visiteur disponible"),1),(Je(!0),tt(On,null,Sr(le.value,Me=>(Je(),tt("option",{key:Me.id,value:Me.id},Zt(fe(Me)),9,wj))),128))],512),[[Jo,N.value]])])):xn("",!0)])):zn(r).isSalarie?(Je(),tt("div",xj,[M("div",Lj,[ue[19]||(ue[19]=M("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),Zn(M("select",{id:"visiteur-filter","onUpdate:modelValue":ue[3]||(ue[3]=Me=>N.value=Me),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[ue[18]||(ue[18]=M("option",{value:null},"Tous les visiteurs",-1)),(Je(!0),tt(On,null,Sr(u.value,Me=>(Je(),tt("option",{key:Me.id,value:Me.id},Zt(fe(Me)),9,Sj))),128))],512),[[Jo,N.value]])])])):xn("",!0),M("div",Ej,[M("div",Cj,[M("div",Pj,[M("table",Aj,[M("thead",Mj,[M("tr",null,[M("th",kj,[M("button",{onClick:ue[4]||(ue[4]=Me=>we("nom")),class:"group inline-flex items-center"},[ue[21]||(ue[21]=Mi(" Nom ")),M("span",Tj,[(Je(),tt("svg",{class:Yi(["h-5 w-5",{"text-gray-900":j.value==="nom","text-gray-400":j.value!=="nom","rotate-180":j.value==="nom"&&Z.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},ue[20]||(ue[20]=[M("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),ue[24]||(ue[24]=M("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),ue[25]||(ue[25]=M("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise ",-1)),ue[26]||(ue[26]=M("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Salarie ",-1)),ue[27]||(ue[27]=M("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Visiteur ",-1)),M("th",Bj,[M("button",{onClick:ue[5]||(ue[5]=Me=>we("date_modification")),class:"group inline-flex items-center"},[ue[23]||(ue[23]=Mi(" Dernire modification ")),M("span",Oj,[(Je(),tt("svg",{class:Yi(["h-5 w-5",{"text-gray-900":j.value==="date_modification","text-gray-400":j.value!=="date_modification","rotate-180":j.value==="date_modification"&&Z.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},ue[22]||(ue[22]=[M("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),ue[28]||(ue[28]=M("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[M("span",{class:"sr-only"},"Actions")],-1))])]),M("tbody",Nj,[he.value.length===0?(Je(),tt("tr",Dj,ue[29]||(ue[29]=[M("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun plan disponible ",-1)]))):xn("",!0),(Je(!0),tt(On,null,Sr(he.value,Me=>(Je(),tt("tr",{key:Me.id,class:"hover:bg-gray-50"},[M("td",Ij,Zt(Me.nom),1),M("td",Rj,Zt(Me.description||"-"),1),M("td",Fj,[Me.entreprise&&typeof Me.entreprise=="object"?(Je(),tt("div",jj,[M("div",zj,[M("div",Uj,[M("span",$j,Zt(Xe(Me.entreprise)),1)])]),M("div",Vj,[M("div",Hj,Zt(zn(zl)(Me.entreprise)),1)])])):(Je(),tt("div",Gj," Non assign "))]),M("td",qj,[Me.salarie&&typeof Me.salarie=="object"?(Je(),tt("div",Wj,[M("div",Zj,[M("div",Kj,[M("span",Yj,Zt(Xe(Me.salarie)),1)])]),M("div",Xj,[M("div",Jj,Zt(zn(zl)(Me.salarie)),1)])])):(Je(),tt("div",Qj," Non assign "))]),M("td",ez,[Me.visiteur&&typeof Me.visiteur=="object"?(Je(),tt("div",tz,[M("div",nz,[M("div",rz,[M("span",iz,Zt(Xe(Me.visiteur)),1)])]),M("div",oz,[M("div",sz,Zt(zn(zl)(Me.visiteur)),1)])])):(Je(),tt("div",az," Non assign "))]),M("td",lz,Zt(Ce(Me.date_modification)),1),M("td",uz,[M("button",{onClick:Ze=>G(Me),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,cz),M("button",{onClick:Ze=>B(Me),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,hz),se(Me)?(Je(),tt("button",{key:0,onClick:Ze=>K(Me),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,fz)):xn("",!0)])]))),128))])])])])]),qr(d3,{modelValue:h.value,"onUpdate:modelValue":ue[6]||(ue[6]=Me=>h.value=Me),salaries:s.value,clients:u.value,onCreated:ae},null,8,["modelValue","salaries","clients"]),d.value?(Je(),tt("div",dz,[M("div",pz,[M("div",gz,[ue[31]||(ue[31]=M("h2",{class:"text-xl font-semibold text-gray-900"},"Modifier le plan",-1)),M("button",{onClick:ue[7]||(ue[7]=Me=>d.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},ue[30]||(ue[30]=[M("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),M("form",{onSubmit:ef(te,["prevent"]),class:"space-y-4"},[M("div",null,[ue[32]||(ue[32]=M("label",{for:"edit-nom",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),Zn(M("input",{type:"text",id:"edit-nom","onUpdate:modelValue":ue[8]||(ue[8]=Me=>_.value.nom=Me),disabled:P.value,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",required:""},null,8,mz),[[Kr,_.value.nom]])]),M("div",null,[ue[33]||(ue[33]=M("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),Zn(M("textarea",{id:"edit-description","onUpdate:modelValue":ue[9]||(ue[9]=Me=>_.value.description=Me),disabled:P.value,rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"},null,8,vz),[[Kr,_.value.description]])]),zn(r).isAdmin||((Re=zn(r).user)==null?void 0:Re.user_type)==="entreprise"?(Je(),tt("div",yz,[zn(r).isAdmin?(Je(),tt("div",_z,[ue[35]||(ue[35]=M("label",{for:"edit-entreprise",class:"block text-sm font-medium text-gray-700"}," Entreprise ",-1)),Zn(M("select",{id:"edit-entreprise","onUpdate:modelValue":ue[10]||(ue[10]=Me=>_.value.entreprise=Me),disabled:P.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[ue[34]||(ue[34]=M("option",{value:null},"Slectionner une entreprise",-1)),(Je(!0),tt(On,null,Sr(o.value,Me=>(Je(),tt("option",{key:Me.id,value:Me.id},Zt(fe(Me)),9,wz))),128))],8,bz),[[Jo,_.value.entreprise]])])):xn("",!0),M("div",null,[ue[37]||(ue[37]=M("label",{for:"edit-salarie",class:"block text-sm font-medium text-gray-700"}," Salarie ",-1)),Zn(M("select",{id:"edit-salarie","onUpdate:modelValue":ue[11]||(ue[11]=Me=>_.value.salarie=Me),disabled:zn(r).isAdmin&&!_.value.entreprise||P.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[ue[36]||(ue[36]=M("option",{value:null},"Slectionner un salarie",-1)),(Je(!0),tt(On,null,Sr(F.value,Me=>(Je(),tt("option",{key:Me.id,value:Me.id},Zt(fe(Me)),9,Lz))),128))],8,xz),[[Jo,_.value.salarie]]),zn(r).isAdmin&&!_.value.entreprise?(Je(),tt("p",Sz," Veuillez d'abord slectionner une entreprise ")):xn("",!0)]),M("div",null,[ue[39]||(ue[39]=M("label",{for:"edit-visiteur",class:"block text-sm font-medium text-gray-700"}," Visiteur ",-1)),Zn(M("select",{id:"edit-visiteur","onUpdate:modelValue":ue[12]||(ue[12]=Me=>_.value.visiteur=Me),disabled:!_.value.salarie||P.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[ue[38]||(ue[38]=M("option",{value:null},"Slectionner un visiteur",-1)),(Je(!0),tt(On,null,Sr(Y.value,Me=>(Je(),tt("option",{key:Me.id,value:Me.id},Zt(fe(Me)),9,Cz))),128))],8,Ez),[[Jo,_.value.visiteur]]),_.value.salarie?xn("",!0):(Je(),tt("p",Pz," Veuillez d'abord slectionner un salarie "))])])):xn("",!0),T.value?(Je(),tt("div",Az,[M("div",Mz,[ue[40]||(ue[40]=M("div",{class:"flex-shrink-0"},[M("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),M("div",kz,[M("p",Tz,Zt(T.value),1)])])])):xn("",!0),M("div",Bz,[M("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:ue[13]||(ue[13]=Me=>d.value=!1)}," Annuler "),M("button",{type:"submit",disabled:P.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm disabled:opacity-50"},[P.value?(Je(),tt("svg",Nz,ue[41]||(ue[41]=[M("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),M("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):xn("",!0),Mi(" "+Zt(P.value?"Enregistrement...":"Enregistrer"),1)],8,Oz)])],32)])])):xn("",!0),v.value?(Je(),hu(D3,{key:3,title:"Supprimer le plan",message:"tes-vous sr de vouloir supprimer ce plan ? Cette action est irrversible.",onConfirm:q,onCancel:ve})):xn("",!0)])])}}});var I3={exports:{}};const Iz=K5(pM);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Ub(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function pc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ub(Object(n),!0).forEach(function(r){Rz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ub(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $0(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$0=function(t){return typeof t}:$0=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$0(e)}function Rz(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pu(){return pu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pu.apply(this,arguments)}function Fz(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function jz(e,t){if(e==null)return{};var n=Fz(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function zz(e){return Uz(e)||$z(e)||Vz(e)||Hz()}function Uz(e){if(Array.isArray(e))return C1(e)}function $z(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Vz(e,t){if(e){if(typeof e=="string")return C1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C1(e,t)}}function C1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Gz="1.14.0";function Ic(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Uc=Ic(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Op=Ic(/Edge/i),$b=Ic(/firefox/i),ip=Ic(/safari/i)&&!Ic(/chrome/i)&&!Ic(/android/i),R3=Ic(/iP(ad|od|hone)/i),qz=Ic(/chrome/i)&&Ic(/android/i),F3={capture:!1,passive:!1};function oi(e,t,n){e.addEventListener(t,n,!Uc&&F3)}function Jr(e,t,n){e.removeEventListener(t,n,!Uc&&F3)}function bg(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function Wz(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Iu(e,t,n,r){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&bg(e,t):bg(e,t))||r&&e===n)return e;if(e===n)break}while(e=Wz(e))}return null}var Vb=/\s+/g;function Ro(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(Vb," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(Vb," ")}}function Yn(e,t,n){var r=e&&e.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in r)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),r[t]=n+(typeof n=="string"?"":"px")}}function Xh(e,t){var n="";if(typeof e=="string")n=e;else do{var r=Yn(e,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function j3(e,t,n){if(e){var r=e.getElementsByTagName(t),i=0,s=r.length;if(n)for(;i<s;i++)n(r[i],i);return r}return[]}function fc(){var e=document.scrollingElement;return e||document.documentElement}function wo(e,t,n,r,i){if(!(!e.getBoundingClientRect&&e!==window)){var s,o,u,h,d,v,y;if(e!==window&&e.parentNode&&e!==fc()?(s=e.getBoundingClientRect(),o=s.top,u=s.left,h=s.bottom,d=s.right,v=s.height,y=s.width):(o=0,u=0,h=window.innerHeight,d=window.innerWidth,v=window.innerHeight,y=window.innerWidth),(t||n)&&e!==window&&(i=i||e.parentNode,!Uc))do if(i&&i.getBoundingClientRect&&(Yn(i,"transform")!=="none"||n&&Yn(i,"position")!=="static")){var x=i.getBoundingClientRect();o-=x.top+parseInt(Yn(i,"border-top-width")),u-=x.left+parseInt(Yn(i,"border-left-width")),h=o+s.height,d=u+s.width;break}while(i=i.parentNode);if(r&&e!==window){var _=Xh(i||e),P=_&&_.a,T=_&&_.d;_&&(o/=T,u/=P,y/=P,v/=T,h=o+v,d=u+y)}return{top:o,left:u,bottom:h,right:d,width:y,height:v}}}function Hb(e,t,n){for(var r=ch(e,!0),i=wo(e)[t];r;){var s=wo(r)[n],o=void 0;if(o=i>=s,!o)return r;if(r===fc())break;r=ch(r,!1)}return!1}function ad(e,t,n,r){for(var i=0,s=0,o=e.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==_r.ghost&&(r||o[s]!==_r.dragged)&&Iu(o[s],n.draggable,e,!1)){if(i===t)return o[s];i++}s++}return null}function vy(e,t){for(var n=e.lastElementChild;n&&(n===_r.ghost||Yn(n,"display")==="none"||t&&!bg(n,t));)n=n.previousElementSibling;return n||null}function Xo(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==_r.clone&&(!t||bg(e,t))&&n++;return n}function Gb(e){var t=0,n=0,r=fc();if(e)do{var i=Xh(e),s=i.a,o=i.d;t+=e.scrollLeft*s,n+=e.scrollTop*o}while(e!==r&&(e=e.parentNode));return[t,n]}function Zz(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n)}return-1}function ch(e,t){if(!e||!e.getBoundingClientRect)return fc();var n=e,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=Yn(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return fc();if(r||t)return n;r=!0}}while(n=n.parentNode);return fc()}function Kz(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function pv(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var op;function z3(e,t){return function(){if(!op){var n=arguments,r=this;n.length===1?e.call(r,n[0]):e.apply(r,n),op=setTimeout(function(){op=void 0},t)}}}function Yz(){clearTimeout(op),op=void 0}function U3(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function yy(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function qb(e,t){Yn(e,"position","absolute"),Yn(e,"top",t.top),Yn(e,"left",t.left),Yn(e,"width",t.width),Yn(e,"height",t.height)}function gv(e){Yn(e,"position",""),Yn(e,"top",""),Yn(e,"left",""),Yn(e,"width",""),Yn(e,"height","")}var Oa="Sortable"+new Date().getTime();function Xz(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(Yn(i,"display")==="none"||i===_r.ghost)){e.push({target:i,rect:wo(i)});var s=pc({},e[e.length-1].rect);if(i.thisAnimationDuration){var o=Xh(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){e.push(r)},removeAnimationState:function(r){e.splice(Zz(e,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(t),typeof r=="function"&&r();return}var s=!1,o=0;e.forEach(function(u){var h=0,d=u.target,v=d.fromRect,y=wo(d),x=d.prevFromRect,_=d.prevToRect,P=u.rect,T=Xh(d,!0);T&&(y.top-=T.f,y.left-=T.e),d.toRect=y,d.thisAnimationDuration&&pv(x,y)&&!pv(v,y)&&(P.top-y.top)/(P.left-y.left)===(v.top-y.top)/(v.left-y.left)&&(h=Qz(P,x,_,i.options)),pv(y,v)||(d.prevFromRect=v,d.prevToRect=y,h||(h=i.options.animation),i.animate(d,P,y,h)),h&&(s=!0,o=Math.max(o,h),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0,d.prevFromRect=null,d.fromRect=null,d.prevToRect=null,d.thisAnimationDuration=null},h),d.thisAnimationDuration=h)}),clearTimeout(t),s?t=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),e=[]},animate:function(r,i,s,o){if(o){Yn(r,"transition",""),Yn(r,"transform","");var u=Xh(this.el),h=u&&u.a,d=u&&u.d,v=(i.left-s.left)/(h||1),y=(i.top-s.top)/(d||1);r.animatingX=!!v,r.animatingY=!!y,Yn(r,"transform","translate3d("+v+"px,"+y+"px,0)"),this.forRepaintDummy=Jz(r),Yn(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),Yn(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){Yn(r,"transition",""),Yn(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function Jz(e){return e.offsetWidth}function Qz(e,t,n,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*r.animation}var Mf=[],mv={initializeByDefault:!0},Np={mount:function(t){for(var n in mv)mv.hasOwnProperty(n)&&!(n in t)&&(t[n]=mv[n]);Mf.forEach(function(r){if(r.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Mf.push(t)},pluginEvent:function(t,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=t+"Global";Mf.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][s]&&n[o.pluginName][s](pc({sortable:n},r)),n.options[o.pluginName]&&n[o.pluginName][t]&&n[o.pluginName][t](pc({sortable:n},r)))})},initializePlugins:function(t,n,r,i){Mf.forEach(function(u){var h=u.pluginName;if(!(!t.options[h]&&!u.initializeByDefault)){var d=new u(t,n,t.options);d.sortable=t,d.options=t.options,t[h]=d,pu(r,d.defaults)}});for(var s in t.options)if(t.options.hasOwnProperty(s)){var o=this.modifyOption(t,s,t.options[s]);typeof o<"u"&&(t.options[s]=o)}},getEventProperties:function(t,n){var r={};return Mf.forEach(function(i){typeof i.eventProperties=="function"&&pu(r,i.eventProperties.call(n[i.pluginName],t))}),r},modifyOption:function(t,n,r){var i;return Mf.forEach(function(s){t[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(i=s.optionListeners[n].call(t[s.pluginName],r))}),i}};function Ud(e){var t=e.sortable,n=e.rootEl,r=e.name,i=e.targetEl,s=e.cloneEl,o=e.toEl,u=e.fromEl,h=e.oldIndex,d=e.newIndex,v=e.oldDraggableIndex,y=e.newDraggableIndex,x=e.originalEvent,_=e.putSortable,P=e.extraEventProperties;if(t=t||n&&n[Oa],!!t){var T,U=t.options,N="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Uc&&!Op?T=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(T=document.createEvent("Event"),T.initEvent(r,!0,!0)),T.to=o||n,T.from=u||n,T.item=i||n,T.clone=s,T.oldIndex=h,T.newIndex=d,T.oldDraggableIndex=v,T.newDraggableIndex=y,T.originalEvent=x,T.pullMode=_?_.lastPutMode:void 0;var j=pc(pc({},P),Np.getEventProperties(r,t));for(var Z in j)T[Z]=j[Z];n&&n.dispatchEvent(T),U[N]&&U[N].call(t,T)}}var eU=["evt"],dl=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=jz(r,eU);Np.pluginEvent.bind(_r)(t,n,pc({dragEl:Bn,parentEl:Wo,ghostEl:zr,rootEl:bo,nextEl:jh,lastDownEl:V0,cloneEl:Zo,cloneHidden:lh,dragStarted:$d,putSortable:ua,activeSortable:_r.active,originalEvent:i,oldIndex:Uf,oldDraggableIndex:sp,newIndex:jl,newDraggableIndex:ah,hideGhostForTarget:G3,unhideGhostForTarget:q3,cloneNowHidden:function(){lh=!0},cloneNowShown:function(){lh=!1},dispatchSortableEvent:function(u){qa({sortable:n,name:u,originalEvent:i})}},s))};function qa(e){Ud(pc({putSortable:ua,cloneEl:Zo,targetEl:Bn,rootEl:bo,oldIndex:Uf,oldDraggableIndex:sp,newIndex:jl,newDraggableIndex:ah},e))}var Bn,Wo,zr,bo,jh,V0,Zo,lh,Uf,jl,sp,ah,b0,ua,Ff=!1,wg=!1,xg=[],Ih,Bu,vv,yv,Wb,Zb,$d,kf,ap,lp=!1,w0=!1,H0,Pa,_v=[],P1=!1,Lg=[],om=typeof document<"u",x0=R3,Kb=Op||Uc?"cssFloat":"float",tU=om&&!qz&&!R3&&"draggable"in document.createElement("div"),$3=function(){if(om){if(Uc)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),V3=function(t,n){var r=Yn(t),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=ad(t,0,n),o=ad(t,1,n),u=s&&Yn(s),h=o&&Yn(o),d=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+wo(s).width,v=h&&parseInt(h.marginLeft)+parseInt(h.marginRight)+wo(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&u.float&&u.float!=="none"){var y=u.float==="left"?"left":"right";return o&&(h.clear==="both"||h.clear===y)?"vertical":"horizontal"}return s&&(u.display==="block"||u.display==="flex"||u.display==="table"||u.display==="grid"||d>=i&&r[Kb]==="none"||o&&r[Kb]==="none"&&d+v>i)?"vertical":"horizontal"},nU=function(t,n,r){var i=r?t.left:t.top,s=r?t.right:t.bottom,o=r?t.width:t.height,u=r?n.left:n.top,h=r?n.right:n.bottom,d=r?n.width:n.height;return i===u||s===h||i+o/2===u+d/2},rU=function(t,n){var r;return xg.some(function(i){var s=i[Oa].options.emptyInsertThreshold;if(!(!s||vy(i))){var o=wo(i),u=t>=o.left-s&&t<=o.right+s,h=n>=o.top-s&&n<=o.bottom+s;if(u&&h)return r=i}}),r},H3=function(t){function n(s,o){return function(u,h,d,v){var y=u.options.group.name&&h.options.group.name&&u.options.group.name===h.options.group.name;if(s==null&&(o||y))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return n(s(u,h,d,v),o)(u,h,d,v);var x=(o?u:h).options.group.name;return s===!0||typeof s=="string"&&s===x||s.join&&s.indexOf(x)>-1}}var r={},i=t.group;(!i||$0(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,t.group=r},G3=function(){!$3&&zr&&Yn(zr,"display","none")},q3=function(){!$3&&zr&&Yn(zr,"display","")};om&&document.addEventListener("click",function(e){if(wg)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),wg=!1,!1},!0);var Rh=function(t){if(Bn){t=t.touches?t.touches[0]:t;var n=rU(t.clientX,t.clientY);if(n){var r={};for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[Oa]._onDragOver(r)}}},iU=function(t){Bn&&Bn.parentNode[Oa]._isOutsideThisEl(t.target)};function _r(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=pu({},t),e[Oa]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return V3(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,u){o.setData("Text",u.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:_r.supportPointer!==!1&&"PointerEvent"in window&&!ip,emptyInsertThreshold:5};Np.initializePlugins(this,e,n);for(var r in n)!(r in t)&&(t[r]=n[r]);H3(t);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=t.forceFallback?!1:tU,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?oi(e,"pointerdown",this._onTapStart):(oi(e,"mousedown",this._onTapStart),oi(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(oi(e,"dragover",this),oi(e,"dragenter",this)),xg.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),pu(this,Xz())}_r.prototype={constructor:_r,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(kf=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,Bn):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,r=this.el,i=this.options,s=i.preventOnFilter,o=t.type,u=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,h=(u||t).target,d=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||h,v=i.filter;if(fU(r),!Bn&&!(/mousedown|pointerdown/.test(o)&&t.button!==0||i.disabled)&&!d.isContentEditable&&!(!this.nativeDraggable&&ip&&h&&h.tagName.toUpperCase()==="SELECT")&&(h=Iu(h,i.draggable,r,!1),!(h&&h.animated)&&V0!==h)){if(Uf=Xo(h),sp=Xo(h,i.draggable),typeof v=="function"){if(v.call(this,t,h,this)){qa({sortable:n,rootEl:d,name:"filter",targetEl:h,toEl:r,fromEl:r}),dl("filter",n,{evt:t}),s&&t.cancelable&&t.preventDefault();return}}else if(v&&(v=v.split(",").some(function(y){if(y=Iu(d,y.trim(),r,!1),y)return qa({sortable:n,rootEl:y,name:"filter",targetEl:h,fromEl:r,toEl:r}),dl("filter",n,{evt:t}),!0}),v)){s&&t.cancelable&&t.preventDefault();return}i.handle&&!Iu(d,i.handle,r,!1)||this._prepareDragStart(t,u,h)}}},_prepareDragStart:function(t,n,r){var i=this,s=i.el,o=i.options,u=s.ownerDocument,h;if(r&&!Bn&&r.parentNode===s){var d=wo(r);if(bo=s,Bn=r,Wo=Bn.parentNode,jh=Bn.nextSibling,V0=r,b0=o.group,_r.dragged=Bn,Ih={target:Bn,clientX:(n||t).clientX,clientY:(n||t).clientY},Wb=Ih.clientX-d.left,Zb=Ih.clientY-d.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,Bn.style["will-change"]="all",h=function(){if(dl("delayEnded",i,{evt:t}),_r.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!$b&&i.nativeDraggable&&(Bn.draggable=!0),i._triggerDragStart(t,n),qa({sortable:i,name:"choose",originalEvent:t}),Ro(Bn,o.chosenClass,!0)},o.ignore.split(",").forEach(function(v){j3(Bn,v.trim(),bv)}),oi(u,"dragover",Rh),oi(u,"mousemove",Rh),oi(u,"touchmove",Rh),oi(u,"mouseup",i._onDrop),oi(u,"touchend",i._onDrop),oi(u,"touchcancel",i._onDrop),$b&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Bn.draggable=!0),dl("delayStart",this,{evt:t}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Op||Uc))){if(_r.eventCanceled){this._onDrop();return}oi(u,"mouseup",i._disableDelayedDrag),oi(u,"touchend",i._disableDelayedDrag),oi(u,"touchcancel",i._disableDelayedDrag),oi(u,"mousemove",i._delayedDragTouchMoveHandler),oi(u,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&oi(u,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(h,o.delay)}else h()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Bn&&bv(Bn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;Jr(t,"mouseup",this._disableDelayedDrag),Jr(t,"touchend",this._disableDelayedDrag),Jr(t,"touchcancel",this._disableDelayedDrag),Jr(t,"mousemove",this._delayedDragTouchMoveHandler),Jr(t,"touchmove",this._delayedDragTouchMoveHandler),Jr(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?oi(document,"pointermove",this._onTouchMove):n?oi(document,"touchmove",this._onTouchMove):oi(document,"mousemove",this._onTouchMove):(oi(Bn,"dragend",this),oi(bo,"dragstart",this._onDragStart));try{document.selection?G0(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(Ff=!1,bo&&Bn){dl("dragStarted",this,{evt:n}),this.nativeDraggable&&oi(document,"dragover",iU);var r=this.options;!t&&Ro(Bn,r.dragClass,!1),Ro(Bn,r.ghostClass,!0),_r.active=this,t&&this._appendGhost(),qa({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Bu){this._lastX=Bu.clientX,this._lastY=Bu.clientY,G3();for(var t=document.elementFromPoint(Bu.clientX,Bu.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Bu.clientX,Bu.clientY),t!==n);)n=t;if(Bn.parentNode[Oa]._isOutsideThisEl(t),n)do{if(n[Oa]){var r=void 0;if(r=n[Oa]._onDragOver({clientX:Bu.clientX,clientY:Bu.clientY,target:t,rootEl:n}),r&&!this.options.dragoverBubble)break}t=n}while(n=n.parentNode);q3()}},_onTouchMove:function(t){if(Ih){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,s=t.touches?t.touches[0]:t,o=zr&&Xh(zr,!0),u=zr&&o&&o.a,h=zr&&o&&o.d,d=x0&&Pa&&Gb(Pa),v=(s.clientX-Ih.clientX+i.x)/(u||1)+(d?d[0]-_v[0]:0)/(u||1),y=(s.clientY-Ih.clientY+i.y)/(h||1)+(d?d[1]-_v[1]:0)/(h||1);if(!_r.active&&!Ff){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(t,!0)}if(zr){o?(o.e+=v-(vv||0),o.f+=y-(yv||0)):o={a:1,b:0,c:0,d:1,e:v,f:y};var x="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");Yn(zr,"webkitTransform",x),Yn(zr,"mozTransform",x),Yn(zr,"msTransform",x),Yn(zr,"transform",x),vv=v,yv=y,Bu=s}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!zr){var t=this.options.fallbackOnBody?document.body:bo,n=wo(Bn,!0,x0,!0,t),r=this.options;if(x0){for(Pa=t;Yn(Pa,"position")==="static"&&Yn(Pa,"transform")==="none"&&Pa!==document;)Pa=Pa.parentNode;Pa!==document.body&&Pa!==document.documentElement?(Pa===document&&(Pa=fc()),n.top+=Pa.scrollTop,n.left+=Pa.scrollLeft):Pa=fc(),_v=Gb(Pa)}zr=Bn.cloneNode(!0),Ro(zr,r.ghostClass,!1),Ro(zr,r.fallbackClass,!0),Ro(zr,r.dragClass,!0),Yn(zr,"transition",""),Yn(zr,"transform",""),Yn(zr,"box-sizing","border-box"),Yn(zr,"margin",0),Yn(zr,"top",n.top),Yn(zr,"left",n.left),Yn(zr,"width",n.width),Yn(zr,"height",n.height),Yn(zr,"opacity","0.8"),Yn(zr,"position",x0?"absolute":"fixed"),Yn(zr,"zIndex","100000"),Yn(zr,"pointerEvents","none"),_r.ghost=zr,t.appendChild(zr),Yn(zr,"transform-origin",Wb/parseInt(zr.style.width)*100+"% "+Zb/parseInt(zr.style.height)*100+"%")}},_onDragStart:function(t,n){var r=this,i=t.dataTransfer,s=r.options;if(dl("dragStart",this,{evt:t}),_r.eventCanceled){this._onDrop();return}dl("setupClone",this),_r.eventCanceled||(Zo=yy(Bn),Zo.draggable=!1,Zo.style["will-change"]="",this._hideClone(),Ro(Zo,this.options.chosenClass,!1),_r.clone=Zo),r.cloneId=G0(function(){dl("clone",r),!_r.eventCanceled&&(r.options.removeCloneOnHide||bo.insertBefore(Zo,Bn),r._hideClone(),qa({sortable:r,name:"clone"}))}),!n&&Ro(Bn,s.dragClass,!0),n?(wg=!0,r._loopId=setInterval(r._emulateDragOver,50)):(Jr(document,"mouseup",r._onDrop),Jr(document,"touchend",r._onDrop),Jr(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,Bn)),oi(document,"drop",r),Yn(Bn,"transform","translateZ(0)")),Ff=!0,r._dragStartId=G0(r._dragStarted.bind(r,n,t)),oi(document,"selectstart",r),$d=!0,ip&&Yn(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,r=t.target,i,s,o,u=this.options,h=u.group,d=_r.active,v=b0===h,y=u.sort,x=ua||d,_,P=this,T=!1;if(P1)return;function U(q,ve){dl(q,P,pc({evt:t,isOwner:v,axis:_?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:y,fromSortable:x,target:r,completed:j,onMove:function(Xe,B){return L0(bo,n,Bn,i,Xe,wo(Xe),t,B)},changed:Z},ve))}function N(){U("dragOverAnimationCapture"),P.captureAnimationState(),P!==x&&x.captureAnimationState()}function j(q){return U("dragOverCompleted",{insertion:q}),q&&(v?d._hideClone():d._showClone(P),P!==x&&(Ro(Bn,ua?ua.options.ghostClass:d.options.ghostClass,!1),Ro(Bn,u.ghostClass,!0)),ua!==P&&P!==_r.active?ua=P:P===_r.active&&ua&&(ua=null),x===P&&(P._ignoreWhileAnimating=r),P.animateAll(function(){U("dragOverAnimationComplete"),P._ignoreWhileAnimating=null}),P!==x&&(x.animateAll(),x._ignoreWhileAnimating=null)),(r===Bn&&!Bn.animated||r===n&&!r.animated)&&(kf=null),!u.dragoverBubble&&!t.rootEl&&r!==document&&(Bn.parentNode[Oa]._isOutsideThisEl(t.target),!q&&Rh(t)),!u.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),T=!0}function Z(){jl=Xo(Bn),ah=Xo(Bn,u.draggable),qa({sortable:P,name:"change",toEl:n,newIndex:jl,newDraggableIndex:ah,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),r=Iu(r,u.draggable,n,!0),U("dragOver"),_r.eventCanceled)return T;if(Bn.contains(t.target)||r.animated&&r.animatingX&&r.animatingY||P._ignoreWhileAnimating===r)return j(!1);if(wg=!1,d&&!u.disabled&&(v?y||(o=Wo!==bo):ua===this||(this.lastPutMode=b0.checkPull(this,d,Bn,t))&&h.checkPut(this,d,Bn,t))){if(_=this._getDirection(t,r)==="vertical",i=wo(Bn),U("dragOverValid"),_r.eventCanceled)return T;if(o)return Wo=bo,N(),this._hideClone(),U("revert"),_r.eventCanceled||(jh?bo.insertBefore(Bn,jh):bo.appendChild(Bn)),j(!0);var J=vy(n,u.draggable);if(!J||lU(t,_,this)&&!J.animated){if(J===Bn)return j(!1);if(J&&n===t.target&&(r=J),r&&(s=wo(r)),L0(bo,n,Bn,i,r,s,t,!!r)!==!1)return N(),n.appendChild(Bn),Wo=n,Z(),j(!0)}else if(J&&aU(t,_,this)){var le=ad(n,0,u,!0);if(le===Bn)return j(!1);if(r=le,s=wo(r),L0(bo,n,Bn,i,r,s,t,!1)!==!1)return N(),n.insertBefore(Bn,le),Wo=n,Z(),j(!0)}else if(r.parentNode===n){s=wo(r);var he=0,Le,V=Bn.parentNode!==n,F=!nU(Bn.animated&&Bn.toRect||i,r.animated&&r.toRect||s,_),Y=_?"top":"left",$=Hb(r,"top","top")||Hb(Bn,"top","top"),D=$?$.scrollTop:void 0;kf!==r&&(Le=s[Y],lp=!1,w0=!F&&u.invertSwap||V),he=uU(t,r,s,_,F?1:u.swapThreshold,u.invertedSwapThreshold==null?u.swapThreshold:u.invertedSwapThreshold,w0,kf===r);var k;if(he!==0){var I=Xo(Bn);do I-=he,k=Wo.children[I];while(k&&(Yn(k,"display")==="none"||k===zr))}if(he===0||k===r)return j(!1);kf=r,ap=he;var W=r.nextElementSibling,G=!1;G=he===1;var K=L0(bo,n,Bn,i,r,s,t,G);if(K!==!1)return(K===1||K===-1)&&(G=K===1),P1=!0,setTimeout(sU,30),N(),G&&!W?n.appendChild(Bn):r.parentNode.insertBefore(Bn,G?W:r),$&&U3($,0,D-$.scrollTop),Wo=Bn.parentNode,Le!==void 0&&!w0&&(H0=Math.abs(Le-wo(r)[Y])),Z(),j(!0)}if(n.contains(Bn))return j(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Jr(document,"mousemove",this._onTouchMove),Jr(document,"touchmove",this._onTouchMove),Jr(document,"pointermove",this._onTouchMove),Jr(document,"dragover",Rh),Jr(document,"mousemove",Rh),Jr(document,"touchmove",Rh)},_offUpEvents:function(){var t=this.el.ownerDocument;Jr(t,"mouseup",this._onDrop),Jr(t,"touchend",this._onDrop),Jr(t,"pointerup",this._onDrop),Jr(t,"touchcancel",this._onDrop),Jr(document,"selectstart",this)},_onDrop:function(t){var n=this.el,r=this.options;if(jl=Xo(Bn),ah=Xo(Bn,r.draggable),dl("drop",this,{evt:t}),Wo=Bn&&Bn.parentNode,jl=Xo(Bn),ah=Xo(Bn,r.draggable),_r.eventCanceled){this._nulling();return}Ff=!1,w0=!1,lp=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),A1(this.cloneId),A1(this._dragStartId),this.nativeDraggable&&(Jr(document,"drop",this),Jr(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),ip&&Yn(document.body,"user-select",""),Yn(Bn,"transform",""),t&&($d&&(t.cancelable&&t.preventDefault(),!r.dropBubble&&t.stopPropagation()),zr&&zr.parentNode&&zr.parentNode.removeChild(zr),(bo===Wo||ua&&ua.lastPutMode!=="clone")&&Zo&&Zo.parentNode&&Zo.parentNode.removeChild(Zo),Bn&&(this.nativeDraggable&&Jr(Bn,"dragend",this),bv(Bn),Bn.style["will-change"]="",$d&&!Ff&&Ro(Bn,ua?ua.options.ghostClass:this.options.ghostClass,!1),Ro(Bn,this.options.chosenClass,!1),qa({sortable:this,name:"unchoose",toEl:Wo,newIndex:null,newDraggableIndex:null,originalEvent:t}),bo!==Wo?(jl>=0&&(qa({rootEl:Wo,name:"add",toEl:Wo,fromEl:bo,originalEvent:t}),qa({sortable:this,name:"remove",toEl:Wo,originalEvent:t}),qa({rootEl:Wo,name:"sort",toEl:Wo,fromEl:bo,originalEvent:t}),qa({sortable:this,name:"sort",toEl:Wo,originalEvent:t})),ua&&ua.save()):jl!==Uf&&jl>=0&&(qa({sortable:this,name:"update",toEl:Wo,originalEvent:t}),qa({sortable:this,name:"sort",toEl:Wo,originalEvent:t})),_r.active&&((jl==null||jl===-1)&&(jl=Uf,ah=sp),qa({sortable:this,name:"end",toEl:Wo,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){dl("nulling",this),bo=Bn=Wo=zr=jh=Zo=V0=lh=Ih=Bu=$d=jl=ah=Uf=sp=kf=ap=ua=b0=_r.dragged=_r.ghost=_r.clone=_r.active=null,Lg.forEach(function(t){t.checked=!0}),Lg.length=vv=yv=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":Bn&&(this._onDragOver(t),oU(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)n=r[i],Iu(n,o.draggable,this.el,!1)&&t.push(n.getAttribute(o.dataIdAttr)||hU(n));return t},sort:function(t,n){var r={},i=this.el;this.toArray().forEach(function(s,o){var u=i.children[o];Iu(u,this.options.draggable,i,!1)&&(r[s]=u)},this),n&&this.captureAnimationState(),t.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return Iu(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var r=this.options;if(n===void 0)return r[t];var i=Np.modifyOption(this,t,n);typeof i<"u"?r[t]=i:r[t]=n,t==="group"&&H3(r)},destroy:function(){dl("destroy",this);var t=this.el;t[Oa]=null,Jr(t,"mousedown",this._onTapStart),Jr(t,"touchstart",this._onTapStart),Jr(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Jr(t,"dragover",this),Jr(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),xg.splice(xg.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!lh){if(dl("hideClone",this),_r.eventCanceled)return;Yn(Zo,"display","none"),this.options.removeCloneOnHide&&Zo.parentNode&&Zo.parentNode.removeChild(Zo),lh=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(lh){if(dl("showClone",this),_r.eventCanceled)return;Bn.parentNode==bo&&!this.options.group.revertClone?bo.insertBefore(Zo,Bn):jh?bo.insertBefore(Zo,jh):bo.appendChild(Zo),this.options.group.revertClone&&this.animate(Bn,Zo),Yn(Zo,"display",""),lh=!1}}};function oU(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function L0(e,t,n,r,i,s,o,u){var h,d=e[Oa],v=d.options.onMove,y;return window.CustomEvent&&!Uc&&!Op?h=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(h=document.createEvent("Event"),h.initEvent("move",!0,!0)),h.to=t,h.from=e,h.dragged=n,h.draggedRect=r,h.related=i||t,h.relatedRect=s||wo(t),h.willInsertAfter=u,h.originalEvent=o,e.dispatchEvent(h),v&&(y=v.call(d,h,o)),y}function bv(e){e.draggable=!1}function sU(){P1=!1}function aU(e,t,n){var r=wo(ad(n.el,0,n.options,!0)),i=10;return t?e.clientX<r.left-i||e.clientY<r.top&&e.clientX<r.right:e.clientY<r.top-i||e.clientY<r.bottom&&e.clientX<r.left}function lU(e,t,n){var r=wo(vy(n.el,n.options.draggable)),i=10;return t?e.clientX>r.right+i||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+i}function uU(e,t,n,r,i,s,o,u){var h=r?e.clientY:e.clientX,d=r?n.height:n.width,v=r?n.top:n.left,y=r?n.bottom:n.right,x=!1;if(!o){if(u&&H0<d*i){if(!lp&&(ap===1?h>v+d*s/2:h<y-d*s/2)&&(lp=!0),lp)x=!0;else if(ap===1?h<v+H0:h>y-H0)return-ap}else if(h>v+d*(1-i)/2&&h<y-d*(1-i)/2)return cU(t)}return x=x||o,x&&(h<v+d*s/2||h>y-d*s/2)?h>v+d/2?1:-1:0}function cU(e){return Xo(Bn)<Xo(e)?1:-1}function hU(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function fU(e){Lg.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var r=t[n];r.checked&&Lg.push(r)}}function G0(e){return setTimeout(e,0)}function A1(e){return clearTimeout(e)}om&&oi(document,"touchmove",function(e){(_r.active||Ff)&&e.cancelable&&e.preventDefault()});_r.utils={on:oi,off:Jr,css:Yn,find:j3,is:function(t,n){return!!Iu(t,n,t,!1)},extend:Kz,throttle:z3,closest:Iu,toggleClass:Ro,clone:yy,index:Xo,nextTick:G0,cancelNextTick:A1,detectDirection:V3,getChild:ad};_r.get=function(e){return e[Oa]};_r.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(_r.utils=pc(pc({},_r.utils),r.utils)),Np.mount(r)})};_r.create=function(e,t){return new _r(e,t)};_r.version=Gz;var bs=[],Vd,M1,k1=!1,wv,xv,Sg,Hd;function dU(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?oi(document,"dragover",this._handleAutoScroll):this.options.supportPointer?oi(document,"pointermove",this._handleFallbackAutoScroll):r.touches?oi(document,"touchmove",this._handleFallbackAutoScroll):oi(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?Jr(document,"dragover",this._handleAutoScroll):(Jr(document,"pointermove",this._handleFallbackAutoScroll),Jr(document,"touchmove",this._handleFallbackAutoScroll),Jr(document,"mousemove",this._handleFallbackAutoScroll)),Yb(),q0(),Yz()},nulling:function(){Sg=M1=Vd=k1=Hd=wv=xv=null,bs.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,s=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,u=document.elementFromPoint(s,o);if(Sg=n,r||this.options.forceAutoScrollFallback||Op||Uc||ip){Lv(n,this.options,u,r);var h=ch(u,!0);k1&&(!Hd||s!==wv||o!==xv)&&(Hd&&Yb(),Hd=setInterval(function(){var d=ch(document.elementFromPoint(s,o),!0);d!==h&&(h=d,q0()),Lv(n,i.options,d,r)},10),wv=s,xv=o)}else{if(!this.options.bubbleScroll||ch(u,!0)===fc()){q0();return}Lv(n,this.options,ch(u,!1),!1)}}},pu(e,{pluginName:"scroll",initializeByDefault:!0})}function q0(){bs.forEach(function(e){clearInterval(e.pid)}),bs=[]}function Yb(){clearInterval(Hd)}var Lv=z3(function(e,t,n,r){if(t.scroll){var i=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,o=t.scrollSensitivity,u=t.scrollSpeed,h=fc(),d=!1,v;M1!==n&&(M1=n,q0(),Vd=t.scroll,v=t.scrollFn,Vd===!0&&(Vd=ch(n,!0)));var y=0,x=Vd;do{var _=x,P=wo(_),T=P.top,U=P.bottom,N=P.left,j=P.right,Z=P.width,J=P.height,le=void 0,he=void 0,Le=_.scrollWidth,V=_.scrollHeight,F=Yn(_),Y=_.scrollLeft,$=_.scrollTop;_===h?(le=Z<Le&&(F.overflowX==="auto"||F.overflowX==="scroll"||F.overflowX==="visible"),he=J<V&&(F.overflowY==="auto"||F.overflowY==="scroll"||F.overflowY==="visible")):(le=Z<Le&&(F.overflowX==="auto"||F.overflowX==="scroll"),he=J<V&&(F.overflowY==="auto"||F.overflowY==="scroll"));var D=le&&(Math.abs(j-i)<=o&&Y+Z<Le)-(Math.abs(N-i)<=o&&!!Y),k=he&&(Math.abs(U-s)<=o&&$+J<V)-(Math.abs(T-s)<=o&&!!$);if(!bs[y])for(var I=0;I<=y;I++)bs[I]||(bs[I]={});(bs[y].vx!=D||bs[y].vy!=k||bs[y].el!==_)&&(bs[y].el=_,bs[y].vx=D,bs[y].vy=k,clearInterval(bs[y].pid),(D!=0||k!=0)&&(d=!0,bs[y].pid=setInterval((function(){r&&this.layer===0&&_r.active._onTouchMove(Sg);var W=bs[this.layer].vy?bs[this.layer].vy*u:0,G=bs[this.layer].vx?bs[this.layer].vx*u:0;typeof v=="function"&&v.call(_r.dragged.parentNode[Oa],G,W,e,Sg,bs[this.layer].el)!=="continue"||U3(bs[this.layer].el,G,W)}).bind({layer:y}),24))),y++}while(t.bubbleScroll&&x!==h&&(x=ch(x,!1)));k1=d}},30),W3=function(t){var n=t.originalEvent,r=t.putSortable,i=t.dragEl,s=t.activeSortable,o=t.dispatchSortableEvent,u=t.hideGhostForTarget,h=t.unhideGhostForTarget;if(n){var d=r||s;u();var v=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,y=document.elementFromPoint(v.clientX,v.clientY);h(),d&&!d.el.contains(y)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function _y(){}_y.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,r=t.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=ad(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:W3};pu(_y,{pluginName:"revertOnSpill"});function by(){}by.prototype={onSpill:function(t){var n=t.dragEl,r=t.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:W3};pu(by,{pluginName:"removeOnSpill"});var ou;function pU(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(n){var r=n.dragEl;ou=r},dragOverValid:function(n){var r=n.completed,i=n.target,s=n.onMove,o=n.activeSortable,u=n.changed,h=n.cancel;if(o.options.swap){var d=this.sortable.el,v=this.options;if(i&&i!==d){var y=ou;s(i)!==!1?(Ro(i,v.swapClass,!0),ou=i):ou=null,y&&y!==ou&&Ro(y,v.swapClass,!1)}u(),r(!0),h()}},drop:function(n){var r=n.activeSortable,i=n.putSortable,s=n.dragEl,o=i||this.sortable,u=this.options;ou&&Ro(ou,u.swapClass,!1),ou&&(u.swap||i&&i.options.swap)&&s!==ou&&(o.captureAnimationState(),o!==r&&r.captureAnimationState(),gU(s,ou),o.animateAll(),o!==r&&r.animateAll())},nulling:function(){ou=null}},pu(e,{pluginName:"swap",eventProperties:function(){return{swapItem:ou}}})}function gU(e,t){var n=e.parentNode,r=t.parentNode,i,s;!n||!r||n.isEqualNode(t)||r.isEqualNode(e)||(i=Xo(e),s=Xo(t),n.isEqualNode(r)&&i<s&&s++,n.insertBefore(t,n.children[i]),r.insertBefore(e,r.children[s]))}var Tr=[],Fl=[],Bd,Ou,Od=!1,pl=!1,Tf=!1,no,Nd,S0;function mU(){function e(t){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));t.options.supportPointer?oi(document,"pointerup",this._deselectMultiDrag):(oi(document,"mouseup",this._deselectMultiDrag),oi(document,"touchend",this._deselectMultiDrag)),oi(document,"keydown",this._checkKeyDown),oi(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(i,s){var o="";Tr.length&&Ou===t?Tr.forEach(function(u,h){o+=(h?", ":"")+u.textContent}):o=s.textContent,i.setData("Text",o)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var r=n.dragEl;no=r},delayEnded:function(){this.isMultiDrag=~Tr.indexOf(no)},setupClone:function(n){var r=n.sortable,i=n.cancel;if(this.isMultiDrag){for(var s=0;s<Tr.length;s++)Fl.push(yy(Tr[s])),Fl[s].sortableIndex=Tr[s].sortableIndex,Fl[s].draggable=!1,Fl[s].style["will-change"]="",Ro(Fl[s],this.options.selectedClass,!1),Tr[s]===no&&Ro(Fl[s],this.options.chosenClass,!1);r._hideClone(),i()}},clone:function(n){var r=n.sortable,i=n.rootEl,s=n.dispatchSortableEvent,o=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Tr.length&&Ou===r&&(Xb(!0,i),s("clone"),o()))},showClone:function(n){var r=n.cloneNowShown,i=n.rootEl,s=n.cancel;this.isMultiDrag&&(Xb(!1,i),Fl.forEach(function(o){Yn(o,"display","")}),r(),S0=!1,s())},hideClone:function(n){var r=this;n.sortable;var i=n.cloneNowHidden,s=n.cancel;this.isMultiDrag&&(Fl.forEach(function(o){Yn(o,"display","none"),r.options.removeCloneOnHide&&o.parentNode&&o.parentNode.removeChild(o)}),i(),S0=!0,s())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&Ou&&Ou.multiDrag._deselectMultiDrag(),Tr.forEach(function(r){r.sortableIndex=Xo(r)}),Tr=Tr.sort(function(r,i){return r.sortableIndex-i.sortableIndex}),Tf=!0},dragStarted:function(n){var r=this,i=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){Tr.forEach(function(o){o!==no&&Yn(o,"position","absolute")});var s=wo(no,!1,!0,!0);Tr.forEach(function(o){o!==no&&qb(o,s)}),pl=!0,Od=!0}i.animateAll(function(){pl=!1,Od=!1,r.options.animation&&Tr.forEach(function(o){gv(o)}),r.options.sort&&E0()})}},dragOver:function(n){var r=n.target,i=n.completed,s=n.cancel;pl&&~Tr.indexOf(r)&&(i(!1),s())},revert:function(n){var r=n.fromSortable,i=n.rootEl,s=n.sortable,o=n.dragRect;Tr.length>1&&(Tr.forEach(function(u){s.addAnimationState({target:u,rect:pl?wo(u):o}),gv(u),u.fromRect=o,r.removeAnimationState(u)}),pl=!1,vU(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(n){var r=n.sortable,i=n.isOwner,s=n.insertion,o=n.activeSortable,u=n.parentEl,h=n.putSortable,d=this.options;if(s){if(i&&o._hideClone(),Od=!1,d.animation&&Tr.length>1&&(pl||!i&&!o.options.sort&&!h)){var v=wo(no,!1,!0,!0);Tr.forEach(function(x){x!==no&&(qb(x,v),u.appendChild(x))}),pl=!0}if(!i)if(pl||E0(),Tr.length>1){var y=S0;o._showClone(r),o.options.animation&&!S0&&y&&Fl.forEach(function(x){o.addAnimationState({target:x,rect:Nd}),x.fromRect=Nd,x.thisAnimationDuration=null})}else o._showClone(r)}},dragOverAnimationCapture:function(n){var r=n.dragRect,i=n.isOwner,s=n.activeSortable;if(Tr.forEach(function(u){u.thisAnimationDuration=null}),s.options.animation&&!i&&s.multiDrag.isMultiDrag){Nd=pu({},r);var o=Xh(no,!0);Nd.top-=o.f,Nd.left-=o.e}},dragOverAnimationComplete:function(){pl&&(pl=!1,E0())},drop:function(n){var r=n.originalEvent,i=n.rootEl,s=n.parentEl,o=n.sortable,u=n.dispatchSortableEvent,h=n.oldIndex,d=n.putSortable,v=d||this.sortable;if(r){var y=this.options,x=s.children;if(!Tf)if(y.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Ro(no,y.selectedClass,!~Tr.indexOf(no)),~Tr.indexOf(no))Tr.splice(Tr.indexOf(no),1),Bd=null,Ud({sortable:o,rootEl:i,name:"deselect",targetEl:no});else{if(Tr.push(no),Ud({sortable:o,rootEl:i,name:"select",targetEl:no}),r.shiftKey&&Bd&&o.el.contains(Bd)){var _=Xo(Bd),P=Xo(no);if(~_&&~P&&_!==P){var T,U;for(P>_?(U=_,T=P):(U=P,T=_+1);U<T;U++)~Tr.indexOf(x[U])||(Ro(x[U],y.selectedClass,!0),Tr.push(x[U]),Ud({sortable:o,rootEl:i,name:"select",targetEl:x[U]}))}}else Bd=no;Ou=v}if(Tf&&this.isMultiDrag){if(pl=!1,(s[Oa].options.sort||s!==i)&&Tr.length>1){var N=wo(no),j=Xo(no,":not(."+this.options.selectedClass+")");if(!Od&&y.animation&&(no.thisAnimationDuration=null),v.captureAnimationState(),!Od&&(y.animation&&(no.fromRect=N,Tr.forEach(function(J){if(J.thisAnimationDuration=null,J!==no){var le=pl?wo(J):N;J.fromRect=le,v.addAnimationState({target:J,rect:le})}})),E0(),Tr.forEach(function(J){x[j]?s.insertBefore(J,x[j]):s.appendChild(J),j++}),h===Xo(no))){var Z=!1;Tr.forEach(function(J){if(J.sortableIndex!==Xo(J)){Z=!0;return}}),Z&&u("update")}Tr.forEach(function(J){gv(J)}),v.animateAll()}Ou=v}(i===s||d&&d.lastPutMode!=="clone")&&Fl.forEach(function(J){J.parentNode&&J.parentNode.removeChild(J)})}},nullingGlobal:function(){this.isMultiDrag=Tf=!1,Fl.length=0},destroyGlobal:function(){this._deselectMultiDrag(),Jr(document,"pointerup",this._deselectMultiDrag),Jr(document,"mouseup",this._deselectMultiDrag),Jr(document,"touchend",this._deselectMultiDrag),Jr(document,"keydown",this._checkKeyDown),Jr(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof Tf<"u"&&Tf)&&Ou===this.sortable&&!(n&&Iu(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;Tr.length;){var r=Tr[0];Ro(r,this.options.selectedClass,!1),Tr.shift(),Ud({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},pu(e,{pluginName:"multiDrag",utils:{select:function(n){var r=n.parentNode[Oa];!r||!r.options.multiDrag||~Tr.indexOf(n)||(Ou&&Ou!==r&&(Ou.multiDrag._deselectMultiDrag(),Ou=r),Ro(n,r.options.selectedClass,!0),Tr.push(n))},deselect:function(n){var r=n.parentNode[Oa],i=Tr.indexOf(n);!r||!r.options.multiDrag||!~i||(Ro(n,r.options.selectedClass,!1),Tr.splice(i,1))}},eventProperties:function(){var n=this,r=[],i=[];return Tr.forEach(function(s){r.push({multiDragElement:s,index:s.sortableIndex});var o;pl&&s!==no?o=-1:pl?o=Xo(s,":not(."+n.options.selectedClass+")"):o=Xo(s),i.push({multiDragElement:s,index:o})}),{items:zz(Tr),clones:[].concat(Fl),oldIndicies:r,newIndicies:i}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function vU(e,t){Tr.forEach(function(n,r){var i=t.children[n.sortableIndex+(e?Number(r):0)];i?t.insertBefore(n,i):t.appendChild(n)})}function Xb(e,t){Fl.forEach(function(n,r){var i=t.children[n.sortableIndex+(e?Number(r):0)];i?t.insertBefore(n,i):t.appendChild(n)})}function E0(){Tr.forEach(function(e){e!==no&&e.parentNode&&e.parentNode.removeChild(e)})}_r.mount(new dU);_r.mount(by,_y);const yU=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:mU,Sortable:_r,Swap:pU,default:_r},Symbol.toStringTag,{value:"Module"})),_U=K5(yU);(function(e,t){(function(r,i){e.exports=i(Iz,_U)})(typeof self<"u"?self:Zs,function(n,r){return function(i){var s={};function o(u){if(s[u])return s[u].exports;var h=s[u]={i:u,l:!1,exports:{}};return i[u].call(h.exports,h,h.exports,o),h.l=!0,h.exports}return o.m=i,o.c=s,o.d=function(u,h,d){o.o(u,h)||Object.defineProperty(u,h,{enumerable:!0,get:d})},o.r=function(u){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},o.t=function(u,h){if(h&1&&(u=o(u)),h&8||h&4&&typeof u=="object"&&u&&u.__esModule)return u;var d=Object.create(null);if(o.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:u}),h&2&&typeof u!="string")for(var v in u)o.d(d,v,(function(y){return u[y]}).bind(null,v));return d},o.n=function(u){var h=u&&u.__esModule?function(){return u.default}:function(){return u};return o.d(h,"a",h),h},o.o=function(u,h){return Object.prototype.hasOwnProperty.call(u,h)},o.p="",o(o.s="fb15")}({"00ee":function(i,s,o){var u=o("b622"),h=u("toStringTag"),d={};d[h]="z",i.exports=String(d)==="[object z]"},"0366":function(i,s,o){var u=o("1c0b");i.exports=function(h,d,v){if(u(h),d===void 0)return h;switch(v){case 0:return function(){return h.call(d)};case 1:return function(y){return h.call(d,y)};case 2:return function(y,x){return h.call(d,y,x)};case 3:return function(y,x,_){return h.call(d,y,x,_)}}return function(){return h.apply(d,arguments)}}},"057f":function(i,s,o){var u=o("fc6a"),h=o("241c").f,d={}.toString,v=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],y=function(x){try{return h(x)}catch{return v.slice()}};i.exports.f=function(_){return v&&d.call(_)=="[object Window]"?y(_):h(u(_))}},"06cf":function(i,s,o){var u=o("83ab"),h=o("d1e7"),d=o("5c6c"),v=o("fc6a"),y=o("c04e"),x=o("5135"),_=o("0cfb"),P=Object.getOwnPropertyDescriptor;s.f=u?P:function(U,N){if(U=v(U),N=y(N,!0),_)try{return P(U,N)}catch{}if(x(U,N))return d(!h.f.call(U,N),U[N])}},"0cfb":function(i,s,o){var u=o("83ab"),h=o("d039"),d=o("cc12");i.exports=!u&&!h(function(){return Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(i,s,o){var u=o("23e7"),h=o("d58f").left,d=o("a640"),v=o("ae40"),y=d("reduce"),x=v("reduce",{1:0});u({target:"Array",proto:!0,forced:!y||!x},{reduce:function(P){return h(this,P,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(i,s,o){var u=o("c6b6"),h=o("9263");i.exports=function(d,v){var y=d.exec;if(typeof y=="function"){var x=y.call(d,v);if(typeof x!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return x}if(u(d)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return h.call(d,v)}},"159b":function(i,s,o){var u=o("da84"),h=o("fdbc"),d=o("17c2"),v=o("9112");for(var y in h){var x=u[y],_=x&&x.prototype;if(_&&_.forEach!==d)try{v(_,"forEach",d)}catch{_.forEach=d}}},"17c2":function(i,s,o){var u=o("b727").forEach,h=o("a640"),d=o("ae40"),v=h("forEach"),y=d("forEach");i.exports=!v||!y?function(_){return u(this,_,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(i,s,o){var u=o("d066");i.exports=u("document","documentElement")},"1c0b":function(i,s){i.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},"1c7e":function(i,s,o){var u=o("b622"),h=u("iterator"),d=!1;try{var v=0,y={next:function(){return{done:!!v++}},return:function(){d=!0}};y[h]=function(){return this},Array.from(y,function(){throw 2})}catch{}i.exports=function(x,_){if(!_&&!d)return!1;var P=!1;try{var T={};T[h]=function(){return{next:function(){return{done:P=!0}}}},x(T)}catch{}return P}},"1d80":function(i,s){i.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},"1dde":function(i,s,o){var u=o("d039"),h=o("b622"),d=o("2d00"),v=h("species");i.exports=function(y){return d>=51||!u(function(){var x=[],_=x.constructor={};return _[v]=function(){return{foo:1}},x[y](Boolean).foo!==1})}},"23cb":function(i,s,o){var u=o("a691"),h=Math.max,d=Math.min;i.exports=function(v,y){var x=u(v);return x<0?h(x+y,0):d(x,y)}},"23e7":function(i,s,o){var u=o("da84"),h=o("06cf").f,d=o("9112"),v=o("6eeb"),y=o("ce4e"),x=o("e893"),_=o("94ca");i.exports=function(P,T){var U=P.target,N=P.global,j=P.stat,Z,J,le,he,Le,V;if(N?J=u:j?J=u[U]||y(U,{}):J=(u[U]||{}).prototype,J)for(le in T){if(Le=T[le],P.noTargetGet?(V=h(J,le),he=V&&V.value):he=J[le],Z=_(N?le:U+(j?".":"#")+le,P.forced),!Z&&he!==void 0){if(typeof Le==typeof he)continue;x(Le,he)}(P.sham||he&&he.sham)&&d(Le,"sham",!0),v(J,le,Le,P)}}},"241c":function(i,s,o){var u=o("ca84"),h=o("7839"),d=h.concat("length","prototype");s.f=Object.getOwnPropertyNames||function(y){return u(y,d)}},"25f0":function(i,s,o){var u=o("6eeb"),h=o("825a"),d=o("d039"),v=o("ad6d"),y="toString",x=RegExp.prototype,_=x[y],P=d(function(){return _.call({source:"a",flags:"b"})!="/a/b"}),T=_.name!=y;(P||T)&&u(RegExp.prototype,y,function(){var N=h(this),j=String(N.source),Z=N.flags,J=String(Z===void 0&&N instanceof RegExp&&!("flags"in x)?v.call(N):Z);return"/"+j+"/"+J},{unsafe:!0})},"2ca0":function(i,s,o){var u=o("23e7"),h=o("06cf").f,d=o("50c4"),v=o("5a34"),y=o("1d80"),x=o("ab13"),_=o("c430"),P="".startsWith,T=Math.min,U=x("startsWith"),N=!_&&!U&&!!function(){var j=h(String.prototype,"startsWith");return j&&!j.writable}();u({target:"String",proto:!0,forced:!N&&!U},{startsWith:function(Z){var J=String(y(this));v(Z);var le=d(T(arguments.length>1?arguments[1]:void 0,J.length)),he=String(Z);return P?P.call(J,he,le):J.slice(le,le+he.length)===he}})},"2d00":function(i,s,o){var u=o("da84"),h=o("342f"),d=u.process,v=d&&d.versions,y=v&&v.v8,x,_;y?(x=y.split("."),_=x[0]+x[1]):h&&(x=h.match(/Edge\/(\d+)/),(!x||x[1]>=74)&&(x=h.match(/Chrome\/(\d+)/),x&&(_=x[1]))),i.exports=_&&+_},"342f":function(i,s,o){var u=o("d066");i.exports=u("navigator","userAgent")||""},"35a1":function(i,s,o){var u=o("f5df"),h=o("3f8c"),d=o("b622"),v=d("iterator");i.exports=function(y){if(y!=null)return y[v]||y["@@iterator"]||h[u(y)]}},"37e8":function(i,s,o){var u=o("83ab"),h=o("9bf2"),d=o("825a"),v=o("df75");i.exports=u?Object.defineProperties:function(x,_){d(x);for(var P=v(_),T=P.length,U=0,N;T>U;)h.f(x,N=P[U++],_[N]);return x}},"3bbe":function(i,s,o){var u=o("861d");i.exports=function(h){if(!u(h)&&h!==null)throw TypeError("Can't set "+String(h)+" as a prototype");return h}},"3ca3":function(i,s,o){var u=o("6547").charAt,h=o("69f3"),d=o("7dd0"),v="String Iterator",y=h.set,x=h.getterFor(v);d(String,"String",function(_){y(this,{type:v,string:String(_),index:0})},function(){var P=x(this),T=P.string,U=P.index,N;return U>=T.length?{value:void 0,done:!0}:(N=u(T,U),P.index+=N.length,{value:N,done:!1})})},"3f8c":function(i,s){i.exports={}},4160:function(i,s,o){var u=o("23e7"),h=o("17c2");u({target:"Array",proto:!0,forced:[].forEach!=h},{forEach:h})},"428f":function(i,s,o){var u=o("da84");i.exports=u},"44ad":function(i,s,o){var u=o("d039"),h=o("c6b6"),d="".split;i.exports=u(function(){return!Object("z").propertyIsEnumerable(0)})?function(v){return h(v)=="String"?d.call(v,""):Object(v)}:Object},"44d2":function(i,s,o){var u=o("b622"),h=o("7c73"),d=o("9bf2"),v=u("unscopables"),y=Array.prototype;y[v]==null&&d.f(y,v,{configurable:!0,value:h(null)}),i.exports=function(x){y[v][x]=!0}},"44e7":function(i,s,o){var u=o("861d"),h=o("c6b6"),d=o("b622"),v=d("match");i.exports=function(y){var x;return u(y)&&((x=y[v])!==void 0?!!x:h(y)=="RegExp")}},4930:function(i,s,o){var u=o("d039");i.exports=!!Object.getOwnPropertySymbols&&!u(function(){return!String(Symbol())})},"4d64":function(i,s,o){var u=o("fc6a"),h=o("50c4"),d=o("23cb"),v=function(y){return function(x,_,P){var T=u(x),U=h(T.length),N=d(P,U),j;if(y&&_!=_){for(;U>N;)if(j=T[N++],j!=j)return!0}else for(;U>N;N++)if((y||N in T)&&T[N]===_)return y||N||0;return!y&&-1}};i.exports={includes:v(!0),indexOf:v(!1)}},"4de4":function(i,s,o){var u=o("23e7"),h=o("b727").filter,d=o("1dde"),v=o("ae40"),y=d("filter"),x=v("filter");u({target:"Array",proto:!0,forced:!y||!x},{filter:function(P){return h(this,P,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(i,s,o){var u=o("0366"),h=o("7b0b"),d=o("9bdd"),v=o("e95a"),y=o("50c4"),x=o("8418"),_=o("35a1");i.exports=function(T){var U=h(T),N=typeof this=="function"?this:Array,j=arguments.length,Z=j>1?arguments[1]:void 0,J=Z!==void 0,le=_(U),he=0,Le,V,F,Y,$,D;if(J&&(Z=u(Z,j>2?arguments[2]:void 0,2)),le!=null&&!(N==Array&&v(le)))for(Y=le.call(U),$=Y.next,V=new N;!(F=$.call(Y)).done;he++)D=J?d(Y,Z,[F.value,he],!0):F.value,x(V,he,D);else for(Le=y(U.length),V=new N(Le);Le>he;he++)D=J?Z(U[he],he):U[he],x(V,he,D);return V.length=he,V}},"4fad":function(i,s,o){var u=o("23e7"),h=o("6f53").entries;u({target:"Object",stat:!0},{entries:function(v){return h(v)}})},"50c4":function(i,s,o){var u=o("a691"),h=Math.min;i.exports=function(d){return d>0?h(u(d),9007199254740991):0}},5135:function(i,s){var o={}.hasOwnProperty;i.exports=function(u,h){return o.call(u,h)}},5319:function(i,s,o){var u=o("d784"),h=o("825a"),d=o("7b0b"),v=o("50c4"),y=o("a691"),x=o("1d80"),_=o("8aa5"),P=o("14c3"),T=Math.max,U=Math.min,N=Math.floor,j=/\$([$&'`]|\d\d?|<[^>]*>)/g,Z=/\$([$&'`]|\d\d?)/g,J=function(le){return le===void 0?le:String(le)};u("replace",2,function(le,he,Le,V){var F=V.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,Y=V.REPLACE_KEEPS_$0,$=F?"$":"$0";return[function(I,W){var G=x(this),K=I==null?void 0:I[le];return K!==void 0?K.call(I,G,W):he.call(String(G),I,W)},function(k,I){if(!F&&Y||typeof I=="string"&&I.indexOf($)===-1){var W=Le(he,k,this,I);if(W.done)return W.value}var G=h(k),K=String(this),q=typeof I=="function";q||(I=String(I));var ve=G.global;if(ve){var Ce=G.unicode;G.lastIndex=0}for(var Xe=[];;){var B=P(G,K);if(B===null||(Xe.push(B),!ve))break;var te=String(B[0]);te===""&&(G.lastIndex=_(K,v(G.lastIndex),Ce))}for(var se="",ae=0,we=0;we<Xe.length;we++){B=Xe[we];for(var fe=String(B[0]),Q=T(U(y(B.index),K.length),0),ue=[],Re=1;Re<B.length;Re++)ue.push(J(B[Re]));var Me=B.groups;if(q){var Ze=[fe].concat(ue,Q,K);Me!==void 0&&Ze.push(Me);var oe=String(I.apply(void 0,Ze))}else oe=D(fe,K,Q,ue,Me,I);Q>=ae&&(se+=K.slice(ae,Q)+oe,ae=Q+fe.length)}return se+K.slice(ae)}];function D(k,I,W,G,K,q){var ve=W+k.length,Ce=G.length,Xe=Z;return K!==void 0&&(K=d(K),Xe=j),he.call(q,Xe,function(B,te){var se;switch(te.charAt(0)){case"$":return"$";case"&":return k;case"`":return I.slice(0,W);case"'":return I.slice(ve);case"<":se=K[te.slice(1,-1)];break;default:var ae=+te;if(ae===0)return B;if(ae>Ce){var we=N(ae/10);return we===0?B:we<=Ce?G[we-1]===void 0?te.charAt(1):G[we-1]+te.charAt(1):B}se=G[ae-1]}return se===void 0?"":se})}})},5692:function(i,s,o){var u=o("c430"),h=o("c6cd");(i.exports=function(d,v){return h[d]||(h[d]=v!==void 0?v:{})})("versions",[]).push({version:"3.6.5",mode:u?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(i,s,o){var u=o("d066"),h=o("241c"),d=o("7418"),v=o("825a");i.exports=u("Reflect","ownKeys")||function(x){var _=h.f(v(x)),P=d.f;return P?_.concat(P(x)):_}},"5a34":function(i,s,o){var u=o("44e7");i.exports=function(h){if(u(h))throw TypeError("The method doesn't accept regular expressions");return h}},"5c6c":function(i,s){i.exports=function(o,u){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:u}}},"5db7":function(i,s,o){var u=o("23e7"),h=o("a2bf"),d=o("7b0b"),v=o("50c4"),y=o("1c0b"),x=o("65f0");u({target:"Array",proto:!0},{flatMap:function(P){var T=d(this),U=v(T.length),N;return y(P),N=x(T,0),N.length=h(N,T,T,U,0,1,P,arguments.length>1?arguments[1]:void 0),N}})},6547:function(i,s,o){var u=o("a691"),h=o("1d80"),d=function(v){return function(y,x){var _=String(h(y)),P=u(x),T=_.length,U,N;return P<0||P>=T?v?"":void 0:(U=_.charCodeAt(P),U<55296||U>56319||P+1===T||(N=_.charCodeAt(P+1))<56320||N>57343?v?_.charAt(P):U:v?_.slice(P,P+2):(U-55296<<10)+(N-56320)+65536)}};i.exports={codeAt:d(!1),charAt:d(!0)}},"65f0":function(i,s,o){var u=o("861d"),h=o("e8b5"),d=o("b622"),v=d("species");i.exports=function(y,x){var _;return h(y)&&(_=y.constructor,typeof _=="function"&&(_===Array||h(_.prototype))?_=void 0:u(_)&&(_=_[v],_===null&&(_=void 0))),new(_===void 0?Array:_)(x===0?0:x)}},"69f3":function(i,s,o){var u=o("7f9a"),h=o("da84"),d=o("861d"),v=o("9112"),y=o("5135"),x=o("f772"),_=o("d012"),P=h.WeakMap,T,U,N,j=function(F){return N(F)?U(F):T(F,{})},Z=function(F){return function(Y){var $;if(!d(Y)||($=U(Y)).type!==F)throw TypeError("Incompatible receiver, "+F+" required");return $}};if(u){var J=new P,le=J.get,he=J.has,Le=J.set;T=function(F,Y){return Le.call(J,F,Y),Y},U=function(F){return le.call(J,F)||{}},N=function(F){return he.call(J,F)}}else{var V=x("state");_[V]=!0,T=function(F,Y){return v(F,V,Y),Y},U=function(F){return y(F,V)?F[V]:{}},N=function(F){return y(F,V)}}i.exports={set:T,get:U,has:N,enforce:j,getterFor:Z}},"6eeb":function(i,s,o){var u=o("da84"),h=o("9112"),d=o("5135"),v=o("ce4e"),y=o("8925"),x=o("69f3"),_=x.get,P=x.enforce,T=String(String).split("String");(i.exports=function(U,N,j,Z){var J=Z?!!Z.unsafe:!1,le=Z?!!Z.enumerable:!1,he=Z?!!Z.noTargetGet:!1;if(typeof j=="function"&&(typeof N=="string"&&!d(j,"name")&&h(j,"name",N),P(j).source=T.join(typeof N=="string"?N:"")),U===u){le?U[N]=j:v(N,j);return}else J?!he&&U[N]&&(le=!0):delete U[N];le?U[N]=j:h(U,N,j)})(Function.prototype,"toString",function(){return typeof this=="function"&&_(this).source||y(this)})},"6f53":function(i,s,o){var u=o("83ab"),h=o("df75"),d=o("fc6a"),v=o("d1e7").f,y=function(x){return function(_){for(var P=d(_),T=h(P),U=T.length,N=0,j=[],Z;U>N;)Z=T[N++],(!u||v.call(P,Z))&&j.push(x?[Z,P[Z]]:P[Z]);return j}};i.exports={entries:y(!0),values:y(!1)}},"73d9":function(i,s,o){var u=o("44d2");u("flatMap")},7418:function(i,s){s.f=Object.getOwnPropertySymbols},"746f":function(i,s,o){var u=o("428f"),h=o("5135"),d=o("e538"),v=o("9bf2").f;i.exports=function(y){var x=u.Symbol||(u.Symbol={});h(x,y)||v(x,y,{value:d.f(y)})}},7839:function(i,s){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(i,s,o){var u=o("1d80");i.exports=function(h){return Object(u(h))}},"7c73":function(i,s,o){var u=o("825a"),h=o("37e8"),d=o("7839"),v=o("d012"),y=o("1be4"),x=o("cc12"),_=o("f772"),P=">",T="<",U="prototype",N="script",j=_("IE_PROTO"),Z=function(){},J=function(F){return T+N+P+F+T+"/"+N+P},le=function(F){F.write(J("")),F.close();var Y=F.parentWindow.Object;return F=null,Y},he=function(){var F=x("iframe"),Y="java"+N+":",$;return F.style.display="none",y.appendChild(F),F.src=String(Y),$=F.contentWindow.document,$.open(),$.write(J("document.F=Object")),$.close(),$.F},Le,V=function(){try{Le=document.domain&&new ActiveXObject("htmlfile")}catch{}V=Le?le(Le):he();for(var F=d.length;F--;)delete V[U][d[F]];return V()};v[j]=!0,i.exports=Object.create||function(Y,$){var D;return Y!==null?(Z[U]=u(Y),D=new Z,Z[U]=null,D[j]=Y):D=V(),$===void 0?D:h(D,$)}},"7dd0":function(i,s,o){var u=o("23e7"),h=o("9ed3"),d=o("e163"),v=o("d2bb"),y=o("d44e"),x=o("9112"),_=o("6eeb"),P=o("b622"),T=o("c430"),U=o("3f8c"),N=o("ae93"),j=N.IteratorPrototype,Z=N.BUGGY_SAFARI_ITERATORS,J=P("iterator"),le="keys",he="values",Le="entries",V=function(){return this};i.exports=function(F,Y,$,D,k,I,W){h($,Y,D);var G=function(we){if(we===k&&Xe)return Xe;if(!Z&&we in ve)return ve[we];switch(we){case le:return function(){return new $(this,we)};case he:return function(){return new $(this,we)};case Le:return function(){return new $(this,we)}}return function(){return new $(this)}},K=Y+" Iterator",q=!1,ve=F.prototype,Ce=ve[J]||ve["@@iterator"]||k&&ve[k],Xe=!Z&&Ce||G(k),B=Y=="Array"&&ve.entries||Ce,te,se,ae;if(B&&(te=d(B.call(new F)),j!==Object.prototype&&te.next&&(!T&&d(te)!==j&&(v?v(te,j):typeof te[J]!="function"&&x(te,J,V)),y(te,K,!0,!0),T&&(U[K]=V))),k==he&&Ce&&Ce.name!==he&&(q=!0,Xe=function(){return Ce.call(this)}),(!T||W)&&ve[J]!==Xe&&x(ve,J,Xe),U[Y]=Xe,k)if(se={values:G(he),keys:I?Xe:G(le),entries:G(Le)},W)for(ae in se)(Z||q||!(ae in ve))&&_(ve,ae,se[ae]);else u({target:Y,proto:!0,forced:Z||q},se);return se}},"7f9a":function(i,s,o){var u=o("da84"),h=o("8925"),d=u.WeakMap;i.exports=typeof d=="function"&&/native code/.test(h(d))},"825a":function(i,s,o){var u=o("861d");i.exports=function(h){if(!u(h))throw TypeError(String(h)+" is not an object");return h}},"83ab":function(i,s,o){var u=o("d039");i.exports=!u(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(i,s,o){var u=o("c04e"),h=o("9bf2"),d=o("5c6c");i.exports=function(v,y,x){var _=u(y);_ in v?h.f(v,_,d(0,x)):v[_]=x}},"861d":function(i,s){i.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},8875:function(i,s,o){var u,h,d;(function(v,y){h=[],u=y,d=typeof u=="function"?u.apply(s,h):u,d!==void 0&&(i.exports=d)})(typeof self<"u"?self:this,function(){function v(){var y=Object.getOwnPropertyDescriptor(document,"currentScript");if(!y&&"currentScript"in document&&document.currentScript||y&&y.get!==v&&document.currentScript)return document.currentScript;try{throw new Error}catch(Le){var x=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,_=/@([^@]*):(\d+):(\d+)\s*$/ig,P=x.exec(Le.stack)||_.exec(Le.stack),T=P&&P[1]||!1,U=P&&P[2]||!1,N=document.location.href.replace(document.location.hash,""),j,Z,J,le=document.getElementsByTagName("script");T===N&&(j=document.documentElement.outerHTML,Z=new RegExp("(?:[^\\n]+?\\n){0,"+(U-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),J=j.replace(Z,"$1").trim());for(var he=0;he<le.length;he++)if(le[he].readyState==="interactive"||le[he].src===T||T===N&&le[he].innerHTML&&le[he].innerHTML.trim()===J)return le[he];return null}}return v})},8925:function(i,s,o){var u=o("c6cd"),h=Function.toString;typeof u.inspectSource!="function"&&(u.inspectSource=function(d){return h.call(d)}),i.exports=u.inspectSource},"8aa5":function(i,s,o){var u=o("6547").charAt;i.exports=function(h,d,v){return d+(v?u(h,d).length:1)}},"8bbf":function(i,s){i.exports=n},"90e3":function(i,s){var o=0,u=Math.random();i.exports=function(h){return"Symbol("+String(h===void 0?"":h)+")_"+(++o+u).toString(36)}},9112:function(i,s,o){var u=o("83ab"),h=o("9bf2"),d=o("5c6c");i.exports=u?function(v,y,x){return h.f(v,y,d(1,x))}:function(v,y,x){return v[y]=x,v}},9263:function(i,s,o){var u=o("ad6d"),h=o("9f7f"),d=RegExp.prototype.exec,v=String.prototype.replace,y=d,x=function(){var U=/a/,N=/b*/g;return d.call(U,"a"),d.call(N,"a"),U.lastIndex!==0||N.lastIndex!==0}(),_=h.UNSUPPORTED_Y||h.BROKEN_CARET,P=/()??/.exec("")[1]!==void 0,T=x||P||_;T&&(y=function(N){var j=this,Z,J,le,he,Le=_&&j.sticky,V=u.call(j),F=j.source,Y=0,$=N;return Le&&(V=V.replace("y",""),V.indexOf("g")===-1&&(V+="g"),$=String(N).slice(j.lastIndex),j.lastIndex>0&&(!j.multiline||j.multiline&&N[j.lastIndex-1]!==`
`)&&(F="(?: "+F+")",$=" "+$,Y++),J=new RegExp("^(?:"+F+")",V)),P&&(J=new RegExp("^"+F+"$(?!\\s)",V)),x&&(Z=j.lastIndex),le=d.call(Le?J:j,$),Le?le?(le.input=le.input.slice(Y),le[0]=le[0].slice(Y),le.index=j.lastIndex,j.lastIndex+=le[0].length):j.lastIndex=0:x&&le&&(j.lastIndex=j.global?le.index+le[0].length:Z),P&&le&&le.length>1&&v.call(le[0],J,function(){for(he=1;he<arguments.length-2;he++)arguments[he]===void 0&&(le[he]=void 0)}),le}),i.exports=y},"94ca":function(i,s,o){var u=o("d039"),h=/#|\.prototype\./,d=function(P,T){var U=y[v(P)];return U==_?!0:U==x?!1:typeof T=="function"?u(T):!!T},v=d.normalize=function(P){return String(P).replace(h,".").toLowerCase()},y=d.data={},x=d.NATIVE="N",_=d.POLYFILL="P";i.exports=d},"99af":function(i,s,o){var u=o("23e7"),h=o("d039"),d=o("e8b5"),v=o("861d"),y=o("7b0b"),x=o("50c4"),_=o("8418"),P=o("65f0"),T=o("1dde"),U=o("b622"),N=o("2d00"),j=U("isConcatSpreadable"),Z=9007199254740991,J="Maximum allowed index exceeded",le=N>=51||!h(function(){var F=[];return F[j]=!1,F.concat()[0]!==F}),he=T("concat"),Le=function(F){if(!v(F))return!1;var Y=F[j];return Y!==void 0?!!Y:d(F)},V=!le||!he;u({target:"Array",proto:!0,forced:V},{concat:function(Y){var $=y(this),D=P($,0),k=0,I,W,G,K,q;for(I=-1,G=arguments.length;I<G;I++)if(q=I===-1?$:arguments[I],Le(q)){if(K=x(q.length),k+K>Z)throw TypeError(J);for(W=0;W<K;W++,k++)W in q&&_(D,k,q[W])}else{if(k>=Z)throw TypeError(J);_(D,k++,q)}return D.length=k,D}})},"9bdd":function(i,s,o){var u=o("825a");i.exports=function(h,d,v,y){try{return y?d(u(v)[0],v[1]):d(v)}catch(_){var x=h.return;throw x!==void 0&&u(x.call(h)),_}}},"9bf2":function(i,s,o){var u=o("83ab"),h=o("0cfb"),d=o("825a"),v=o("c04e"),y=Object.defineProperty;s.f=u?y:function(_,P,T){if(d(_),P=v(P,!0),d(T),h)try{return y(_,P,T)}catch{}if("get"in T||"set"in T)throw TypeError("Accessors not supported");return"value"in T&&(_[P]=T.value),_}},"9ed3":function(i,s,o){var u=o("ae93").IteratorPrototype,h=o("7c73"),d=o("5c6c"),v=o("d44e"),y=o("3f8c"),x=function(){return this};i.exports=function(_,P,T){var U=P+" Iterator";return _.prototype=h(u,{next:d(1,T)}),v(_,U,!1,!0),y[U]=x,_}},"9f7f":function(i,s,o){var u=o("d039");function h(d,v){return RegExp(d,v)}s.UNSUPPORTED_Y=u(function(){var d=h("a","y");return d.lastIndex=2,d.exec("abcd")!=null}),s.BROKEN_CARET=u(function(){var d=h("^r","gy");return d.lastIndex=2,d.exec("str")!=null})},a2bf:function(i,s,o){var u=o("e8b5"),h=o("50c4"),d=o("0366"),v=function(y,x,_,P,T,U,N,j){for(var Z=T,J=0,le=N?d(N,j,3):!1,he;J<P;){if(J in _){if(he=le?le(_[J],J,x):_[J],U>0&&u(he))Z=v(y,x,he,h(he.length),Z,U-1)-1;else{if(Z>=9007199254740991)throw TypeError("Exceed the acceptable array length");y[Z]=he}Z++}J++}return Z};i.exports=v},a352:function(i,s){i.exports=r},a434:function(i,s,o){var u=o("23e7"),h=o("23cb"),d=o("a691"),v=o("50c4"),y=o("7b0b"),x=o("65f0"),_=o("8418"),P=o("1dde"),T=o("ae40"),U=P("splice"),N=T("splice",{ACCESSORS:!0,0:0,1:2}),j=Math.max,Z=Math.min,J=9007199254740991,le="Maximum allowed length exceeded";u({target:"Array",proto:!0,forced:!U||!N},{splice:function(Le,V){var F=y(this),Y=v(F.length),$=h(Le,Y),D=arguments.length,k,I,W,G,K,q;if(D===0?k=I=0:D===1?(k=0,I=Y-$):(k=D-2,I=Z(j(d(V),0),Y-$)),Y+k-I>J)throw TypeError(le);for(W=x(F,I),G=0;G<I;G++)K=$+G,K in F&&_(W,G,F[K]);if(W.length=I,k<I){for(G=$;G<Y-I;G++)K=G+I,q=G+k,K in F?F[q]=F[K]:delete F[q];for(G=Y;G>Y-I+k;G--)delete F[G-1]}else if(k>I)for(G=Y-I;G>$;G--)K=G+I-1,q=G+k-1,K in F?F[q]=F[K]:delete F[q];for(G=0;G<k;G++)F[G+$]=arguments[G+2];return F.length=Y-I+k,W}})},a4d3:function(i,s,o){var u=o("23e7"),h=o("da84"),d=o("d066"),v=o("c430"),y=o("83ab"),x=o("4930"),_=o("fdbf"),P=o("d039"),T=o("5135"),U=o("e8b5"),N=o("861d"),j=o("825a"),Z=o("7b0b"),J=o("fc6a"),le=o("c04e"),he=o("5c6c"),Le=o("7c73"),V=o("df75"),F=o("241c"),Y=o("057f"),$=o("7418"),D=o("06cf"),k=o("9bf2"),I=o("d1e7"),W=o("9112"),G=o("6eeb"),K=o("5692"),q=o("f772"),ve=o("d012"),Ce=o("90e3"),Xe=o("b622"),B=o("e538"),te=o("746f"),se=o("d44e"),ae=o("69f3"),we=o("b727").forEach,fe=q("hidden"),Q="Symbol",ue="prototype",Re=Xe("toPrimitive"),Me=ae.set,Ze=ae.getterFor(Q),oe=Object[ue],me=h.Symbol,pe=d("JSON","stringify"),de=D.f,ze=k.f,Ke=Y.f,Ge=I.f,Qe=K("symbols"),Ve=K("op-symbols"),ot=K("string-to-symbol-registry"),At=K("symbol-to-string-registry"),Et=K("wks"),zt=h.QObject,Kt=!zt||!zt[ue]||!zt[ue].findChild,dn=y&&P(function(){return Le(ze({},"a",{get:function(){return ze(this,"a",{value:7}).a}})).a!=7})?function(un,Qt,Ye){var vn=de(oe,Qt);vn&&delete oe[Qt],ze(un,Qt,Ye),vn&&un!==oe&&ze(oe,Qt,vn)}:ze,mn=function(un,Qt){var Ye=Qe[un]=Le(me[ue]);return Me(Ye,{type:Q,tag:un,description:Qt}),y||(Ye.description=Qt),Ye},et=_?function(un){return typeof un=="symbol"}:function(un){return Object(un)instanceof me},st=function(Qt,Ye,vn){Qt===oe&&st(Ve,Ye,vn),j(Qt);var Sn=le(Ye,!0);return j(vn),T(Qe,Sn)?(vn.enumerable?(T(Qt,fe)&&Qt[fe][Sn]&&(Qt[fe][Sn]=!1),vn=Le(vn,{enumerable:he(0,!1)})):(T(Qt,fe)||ze(Qt,fe,he(1,{})),Qt[fe][Sn]=!0),dn(Qt,Sn,vn)):ze(Qt,Sn,vn)},rt=function(Qt,Ye){j(Qt);var vn=J(Ye),Sn=V(vn).concat(Dt(vn));return we(Sn,function(ln){(!y||Xt.call(vn,ln))&&st(Qt,ln,vn[ln])}),Qt},Vt=function(Qt,Ye){return Ye===void 0?Le(Qt):rt(Le(Qt),Ye)},Xt=function(Qt){var Ye=le(Qt,!0),vn=Ge.call(this,Ye);return this===oe&&T(Qe,Ye)&&!T(Ve,Ye)?!1:vn||!T(this,Ye)||!T(Qe,Ye)||T(this,fe)&&this[fe][Ye]?vn:!0},ft=function(Qt,Ye){var vn=J(Qt),Sn=le(Ye,!0);if(!(vn===oe&&T(Qe,Sn)&&!T(Ve,Sn))){var ln=de(vn,Sn);return ln&&T(Qe,Sn)&&!(T(vn,fe)&&vn[fe][Sn])&&(ln.enumerable=!0),ln}},Ue=function(Qt){var Ye=Ke(J(Qt)),vn=[];return we(Ye,function(Sn){!T(Qe,Sn)&&!T(ve,Sn)&&vn.push(Sn)}),vn},Dt=function(Qt){var Ye=Qt===oe,vn=Ke(Ye?Ve:J(Qt)),Sn=[];return we(vn,function(ln){T(Qe,ln)&&(!Ye||T(oe,ln))&&Sn.push(Qe[ln])}),Sn};if(x||(me=function(){if(this instanceof me)throw TypeError("Symbol is not a constructor");var Qt=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),Ye=Ce(Qt),vn=function(Sn){this===oe&&vn.call(Ve,Sn),T(this,fe)&&T(this[fe],Ye)&&(this[fe][Ye]=!1),dn(this,Ye,he(1,Sn))};return y&&Kt&&dn(oe,Ye,{configurable:!0,set:vn}),mn(Ye,Qt)},G(me[ue],"toString",function(){return Ze(this).tag}),G(me,"withoutSetter",function(un){return mn(Ce(un),un)}),I.f=Xt,k.f=st,D.f=ft,F.f=Y.f=Ue,$.f=Dt,B.f=function(un){return mn(Xe(un),un)},y&&(ze(me[ue],"description",{configurable:!0,get:function(){return Ze(this).description}}),v||G(oe,"propertyIsEnumerable",Xt,{unsafe:!0}))),u({global:!0,wrap:!0,forced:!x,sham:!x},{Symbol:me}),we(V(Et),function(un){te(un)}),u({target:Q,stat:!0,forced:!x},{for:function(un){var Qt=String(un);if(T(ot,Qt))return ot[Qt];var Ye=me(Qt);return ot[Qt]=Ye,At[Ye]=Qt,Ye},keyFor:function(Qt){if(!et(Qt))throw TypeError(Qt+" is not a symbol");if(T(At,Qt))return At[Qt]},useSetter:function(){Kt=!0},useSimple:function(){Kt=!1}}),u({target:"Object",stat:!0,forced:!x,sham:!y},{create:Vt,defineProperty:st,defineProperties:rt,getOwnPropertyDescriptor:ft}),u({target:"Object",stat:!0,forced:!x},{getOwnPropertyNames:Ue,getOwnPropertySymbols:Dt}),u({target:"Object",stat:!0,forced:P(function(){$.f(1)})},{getOwnPropertySymbols:function(Qt){return $.f(Z(Qt))}}),pe){var gn=!x||P(function(){var un=me();return pe([un])!="[null]"||pe({a:un})!="{}"||pe(Object(un))!="{}"});u({target:"JSON",stat:!0,forced:gn},{stringify:function(Qt,Ye,vn){for(var Sn=[Qt],ln=1,wn;arguments.length>ln;)Sn.push(arguments[ln++]);if(wn=Ye,!(!N(Ye)&&Qt===void 0||et(Qt)))return U(Ye)||(Ye=function(ur,En){if(typeof wn=="function"&&(En=wn.call(this,ur,En)),!et(En))return En}),Sn[1]=Ye,pe.apply(null,Sn)}})}me[ue][Re]||W(me[ue],Re,me[ue].valueOf),se(me,Q),ve[fe]=!0},a630:function(i,s,o){var u=o("23e7"),h=o("4df4"),d=o("1c7e"),v=!d(function(y){Array.from(y)});u({target:"Array",stat:!0,forced:v},{from:h})},a640:function(i,s,o){var u=o("d039");i.exports=function(h,d){var v=[][h];return!!v&&u(function(){v.call(null,d||function(){throw 1},1)})}},a691:function(i,s){var o=Math.ceil,u=Math.floor;i.exports=function(h){return isNaN(h=+h)?0:(h>0?u:o)(h)}},ab13:function(i,s,o){var u=o("b622"),h=u("match");i.exports=function(d){var v=/./;try{"/./"[d](v)}catch{try{return v[h]=!1,"/./"[d](v)}catch{}}return!1}},ac1f:function(i,s,o){var u=o("23e7"),h=o("9263");u({target:"RegExp",proto:!0,forced:/./.exec!==h},{exec:h})},ad6d:function(i,s,o){var u=o("825a");i.exports=function(){var h=u(this),d="";return h.global&&(d+="g"),h.ignoreCase&&(d+="i"),h.multiline&&(d+="m"),h.dotAll&&(d+="s"),h.unicode&&(d+="u"),h.sticky&&(d+="y"),d}},ae40:function(i,s,o){var u=o("83ab"),h=o("d039"),d=o("5135"),v=Object.defineProperty,y={},x=function(_){throw _};i.exports=function(_,P){if(d(y,_))return y[_];P||(P={});var T=[][_],U=d(P,"ACCESSORS")?P.ACCESSORS:!1,N=d(P,0)?P[0]:x,j=d(P,1)?P[1]:void 0;return y[_]=!!T&&!h(function(){if(U&&!u)return!0;var Z={length:-1};U?v(Z,1,{enumerable:!0,get:x}):Z[1]=1,T.call(Z,N,j)})}},ae93:function(i,s,o){var u=o("e163"),h=o("9112"),d=o("5135"),v=o("b622"),y=o("c430"),x=v("iterator"),_=!1,P=function(){return this},T,U,N;[].keys&&(N=[].keys(),"next"in N?(U=u(u(N)),U!==Object.prototype&&(T=U)):_=!0),T==null&&(T={}),!y&&!d(T,x)&&h(T,x,P),i.exports={IteratorPrototype:T,BUGGY_SAFARI_ITERATORS:_}},b041:function(i,s,o){var u=o("00ee"),h=o("f5df");i.exports=u?{}.toString:function(){return"[object "+h(this)+"]"}},b0c0:function(i,s,o){var u=o("83ab"),h=o("9bf2").f,d=Function.prototype,v=d.toString,y=/^\s*function ([^ (]*)/,x="name";u&&!(x in d)&&h(d,x,{configurable:!0,get:function(){try{return v.call(this).match(y)[1]}catch{return""}}})},b622:function(i,s,o){var u=o("da84"),h=o("5692"),d=o("5135"),v=o("90e3"),y=o("4930"),x=o("fdbf"),_=h("wks"),P=u.Symbol,T=x?P:P&&P.withoutSetter||v;i.exports=function(U){return d(_,U)||(y&&d(P,U)?_[U]=P[U]:_[U]=T("Symbol."+U)),_[U]}},b64b:function(i,s,o){var u=o("23e7"),h=o("7b0b"),d=o("df75"),v=o("d039"),y=v(function(){d(1)});u({target:"Object",stat:!0,forced:y},{keys:function(_){return d(h(_))}})},b727:function(i,s,o){var u=o("0366"),h=o("44ad"),d=o("7b0b"),v=o("50c4"),y=o("65f0"),x=[].push,_=function(P){var T=P==1,U=P==2,N=P==3,j=P==4,Z=P==6,J=P==5||Z;return function(le,he,Le,V){for(var F=d(le),Y=h(F),$=u(he,Le,3),D=v(Y.length),k=0,I=V||y,W=T?I(le,D):U?I(le,0):void 0,G,K;D>k;k++)if((J||k in Y)&&(G=Y[k],K=$(G,k,F),P)){if(T)W[k]=K;else if(K)switch(P){case 3:return!0;case 5:return G;case 6:return k;case 2:x.call(W,G)}else if(j)return!1}return Z?-1:N||j?j:W}};i.exports={forEach:_(0),map:_(1),filter:_(2),some:_(3),every:_(4),find:_(5),findIndex:_(6)}},c04e:function(i,s,o){var u=o("861d");i.exports=function(h,d){if(!u(h))return h;var v,y;if(d&&typeof(v=h.toString)=="function"&&!u(y=v.call(h))||typeof(v=h.valueOf)=="function"&&!u(y=v.call(h))||!d&&typeof(v=h.toString)=="function"&&!u(y=v.call(h)))return y;throw TypeError("Can't convert object to primitive value")}},c430:function(i,s){i.exports=!1},c6b6:function(i,s){var o={}.toString;i.exports=function(u){return o.call(u).slice(8,-1)}},c6cd:function(i,s,o){var u=o("da84"),h=o("ce4e"),d="__core-js_shared__",v=u[d]||h(d,{});i.exports=v},c740:function(i,s,o){var u=o("23e7"),h=o("b727").findIndex,d=o("44d2"),v=o("ae40"),y="findIndex",x=!0,_=v(y);y in[]&&Array(1)[y](function(){x=!1}),u({target:"Array",proto:!0,forced:x||!_},{findIndex:function(T){return h(this,T,arguments.length>1?arguments[1]:void 0)}}),d(y)},c8ba:function(i,s){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}i.exports=o},c975:function(i,s,o){var u=o("23e7"),h=o("4d64").indexOf,d=o("a640"),v=o("ae40"),y=[].indexOf,x=!!y&&1/[1].indexOf(1,-0)<0,_=d("indexOf"),P=v("indexOf",{ACCESSORS:!0,1:0});u({target:"Array",proto:!0,forced:x||!_||!P},{indexOf:function(U){return x?y.apply(this,arguments)||0:h(this,U,arguments.length>1?arguments[1]:void 0)}})},ca84:function(i,s,o){var u=o("5135"),h=o("fc6a"),d=o("4d64").indexOf,v=o("d012");i.exports=function(y,x){var _=h(y),P=0,T=[],U;for(U in _)!u(v,U)&&u(_,U)&&T.push(U);for(;x.length>P;)u(_,U=x[P++])&&(~d(T,U)||T.push(U));return T}},caad:function(i,s,o){var u=o("23e7"),h=o("4d64").includes,d=o("44d2"),v=o("ae40"),y=v("indexOf",{ACCESSORS:!0,1:0});u({target:"Array",proto:!0,forced:!y},{includes:function(_){return h(this,_,arguments.length>1?arguments[1]:void 0)}}),d("includes")},cc12:function(i,s,o){var u=o("da84"),h=o("861d"),d=u.document,v=h(d)&&h(d.createElement);i.exports=function(y){return v?d.createElement(y):{}}},ce4e:function(i,s,o){var u=o("da84"),h=o("9112");i.exports=function(d,v){try{h(u,d,v)}catch{u[d]=v}return v}},d012:function(i,s){i.exports={}},d039:function(i,s){i.exports=function(o){try{return!!o()}catch{return!0}}},d066:function(i,s,o){var u=o("428f"),h=o("da84"),d=function(v){return typeof v=="function"?v:void 0};i.exports=function(v,y){return arguments.length<2?d(u[v])||d(h[v]):u[v]&&u[v][y]||h[v]&&h[v][y]}},d1e7:function(i,s,o){var u={}.propertyIsEnumerable,h=Object.getOwnPropertyDescriptor,d=h&&!u.call({1:2},1);s.f=d?function(y){var x=h(this,y);return!!x&&x.enumerable}:u},d28b:function(i,s,o){var u=o("746f");u("iterator")},d2bb:function(i,s,o){var u=o("825a"),h=o("3bbe");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var d=!1,v={},y;try{y=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,y.call(v,[]),d=v instanceof Array}catch{}return function(_,P){return u(_),h(P),d?y.call(_,P):_.__proto__=P,_}}():void 0)},d3b7:function(i,s,o){var u=o("00ee"),h=o("6eeb"),d=o("b041");u||h(Object.prototype,"toString",d,{unsafe:!0})},d44e:function(i,s,o){var u=o("9bf2").f,h=o("5135"),d=o("b622"),v=d("toStringTag");i.exports=function(y,x,_){y&&!h(y=_?y:y.prototype,v)&&u(y,v,{configurable:!0,value:x})}},d58f:function(i,s,o){var u=o("1c0b"),h=o("7b0b"),d=o("44ad"),v=o("50c4"),y=function(x){return function(_,P,T,U){u(P);var N=h(_),j=d(N),Z=v(N.length),J=x?Z-1:0,le=x?-1:1;if(T<2)for(;;){if(J in j){U=j[J],J+=le;break}if(J+=le,x?J<0:Z<=J)throw TypeError("Reduce of empty array with no initial value")}for(;x?J>=0:Z>J;J+=le)J in j&&(U=P(U,j[J],J,N));return U}};i.exports={left:y(!1),right:y(!0)}},d784:function(i,s,o){o("ac1f");var u=o("6eeb"),h=o("d039"),d=o("b622"),v=o("9263"),y=o("9112"),x=d("species"),_=!h(function(){var j=/./;return j.exec=function(){var Z=[];return Z.groups={a:"7"},Z},"".replace(j,"$<a>")!=="7"}),P=function(){return"a".replace(/./,"$0")==="$0"}(),T=d("replace"),U=function(){return/./[T]?/./[T]("a","$0")==="":!1}(),N=!h(function(){var j=/(?:)/,Z=j.exec;j.exec=function(){return Z.apply(this,arguments)};var J="ab".split(j);return J.length!==2||J[0]!=="a"||J[1]!=="b"});i.exports=function(j,Z,J,le){var he=d(j),Le=!h(function(){var k={};return k[he]=function(){return 7},""[j](k)!=7}),V=Le&&!h(function(){var k=!1,I=/a/;return j==="split"&&(I={},I.constructor={},I.constructor[x]=function(){return I},I.flags="",I[he]=/./[he]),I.exec=function(){return k=!0,null},I[he](""),!k});if(!Le||!V||j==="replace"&&!(_&&P&&!U)||j==="split"&&!N){var F=/./[he],Y=J(he,""[j],function(k,I,W,G,K){return I.exec===v?Le&&!K?{done:!0,value:F.call(I,W,G)}:{done:!0,value:k.call(W,I,G)}:{done:!1}},{REPLACE_KEEPS_$0:P,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:U}),$=Y[0],D=Y[1];u(String.prototype,j,$),u(RegExp.prototype,he,Z==2?function(k,I){return D.call(k,this,I)}:function(k){return D.call(k,this)})}le&&y(RegExp.prototype[he],"sham",!0)}},d81d:function(i,s,o){var u=o("23e7"),h=o("b727").map,d=o("1dde"),v=o("ae40"),y=d("map"),x=v("map");u({target:"Array",proto:!0,forced:!y||!x},{map:function(P){return h(this,P,arguments.length>1?arguments[1]:void 0)}})},da84:function(i,s,o){(function(u){var h=function(d){return d&&d.Math==Math&&d};i.exports=h(typeof globalThis=="object"&&globalThis)||h(typeof window=="object"&&window)||h(typeof self=="object"&&self)||h(typeof u=="object"&&u)||Function("return this")()}).call(this,o("c8ba"))},dbb4:function(i,s,o){var u=o("23e7"),h=o("83ab"),d=o("56ef"),v=o("fc6a"),y=o("06cf"),x=o("8418");u({target:"Object",stat:!0,sham:!h},{getOwnPropertyDescriptors:function(P){for(var T=v(P),U=y.f,N=d(T),j={},Z=0,J,le;N.length>Z;)le=U(T,J=N[Z++]),le!==void 0&&x(j,J,le);return j}})},dbf1:function(i,s,o){(function(u){o.d(s,"a",function(){return d});function h(){return typeof window<"u"?window.console:u.console}var d=h()}).call(this,o("c8ba"))},ddb0:function(i,s,o){var u=o("da84"),h=o("fdbc"),d=o("e260"),v=o("9112"),y=o("b622"),x=y("iterator"),_=y("toStringTag"),P=d.values;for(var T in h){var U=u[T],N=U&&U.prototype;if(N){if(N[x]!==P)try{v(N,x,P)}catch{N[x]=P}if(N[_]||v(N,_,T),h[T]){for(var j in d)if(N[j]!==d[j])try{v(N,j,d[j])}catch{N[j]=d[j]}}}}},df75:function(i,s,o){var u=o("ca84"),h=o("7839");i.exports=Object.keys||function(v){return u(v,h)}},e01a:function(i,s,o){var u=o("23e7"),h=o("83ab"),d=o("da84"),v=o("5135"),y=o("861d"),x=o("9bf2").f,_=o("e893"),P=d.Symbol;if(h&&typeof P=="function"&&(!("description"in P.prototype)||P().description!==void 0)){var T={},U=function(){var he=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),Le=this instanceof U?new P(he):he===void 0?P():P(he);return he===""&&(T[Le]=!0),Le};_(U,P);var N=U.prototype=P.prototype;N.constructor=U;var j=N.toString,Z=String(P("test"))=="Symbol(test)",J=/^Symbol\((.*)\)[^)]+$/;x(N,"description",{configurable:!0,get:function(){var he=y(this)?this.valueOf():this,Le=j.call(he);if(v(T,he))return"";var V=Z?Le.slice(7,-1):Le.replace(J,"$1");return V===""?void 0:V}}),u({global:!0,forced:!0},{Symbol:U})}},e163:function(i,s,o){var u=o("5135"),h=o("7b0b"),d=o("f772"),v=o("e177"),y=d("IE_PROTO"),x=Object.prototype;i.exports=v?Object.getPrototypeOf:function(_){return _=h(_),u(_,y)?_[y]:typeof _.constructor=="function"&&_ instanceof _.constructor?_.constructor.prototype:_ instanceof Object?x:null}},e177:function(i,s,o){var u=o("d039");i.exports=!u(function(){function h(){}return h.prototype.constructor=null,Object.getPrototypeOf(new h)!==h.prototype})},e260:function(i,s,o){var u=o("fc6a"),h=o("44d2"),d=o("3f8c"),v=o("69f3"),y=o("7dd0"),x="Array Iterator",_=v.set,P=v.getterFor(x);i.exports=y(Array,"Array",function(T,U){_(this,{type:x,target:u(T),index:0,kind:U})},function(){var T=P(this),U=T.target,N=T.kind,j=T.index++;return!U||j>=U.length?(T.target=void 0,{value:void 0,done:!0}):N=="keys"?{value:j,done:!1}:N=="values"?{value:U[j],done:!1}:{value:[j,U[j]],done:!1}},"values"),d.Arguments=d.Array,h("keys"),h("values"),h("entries")},e439:function(i,s,o){var u=o("23e7"),h=o("d039"),d=o("fc6a"),v=o("06cf").f,y=o("83ab"),x=h(function(){v(1)}),_=!y||x;u({target:"Object",stat:!0,forced:_,sham:!y},{getOwnPropertyDescriptor:function(T,U){return v(d(T),U)}})},e538:function(i,s,o){var u=o("b622");s.f=u},e893:function(i,s,o){var u=o("5135"),h=o("56ef"),d=o("06cf"),v=o("9bf2");i.exports=function(y,x){for(var _=h(x),P=v.f,T=d.f,U=0;U<_.length;U++){var N=_[U];u(y,N)||P(y,N,T(x,N))}}},e8b5:function(i,s,o){var u=o("c6b6");i.exports=Array.isArray||function(d){return u(d)=="Array"}},e95a:function(i,s,o){var u=o("b622"),h=o("3f8c"),d=u("iterator"),v=Array.prototype;i.exports=function(y){return y!==void 0&&(h.Array===y||v[d]===y)}},f5df:function(i,s,o){var u=o("00ee"),h=o("c6b6"),d=o("b622"),v=d("toStringTag"),y=h(function(){return arguments}())=="Arguments",x=function(_,P){try{return _[P]}catch{}};i.exports=u?h:function(_){var P,T,U;return _===void 0?"Undefined":_===null?"Null":typeof(T=x(P=Object(_),v))=="string"?T:y?h(P):(U=h(P))=="Object"&&typeof P.callee=="function"?"Arguments":U}},f772:function(i,s,o){var u=o("5692"),h=o("90e3"),d=u("keys");i.exports=function(v){return d[v]||(d[v]=h(v))}},fb15:function(i,s,o){if(o.r(s),typeof window<"u"){var u=window.document.currentScript;{var h=o("8875");u=h(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:h})}var d=u&&u.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);d&&(o.p=d[1])}o("99af"),o("4de4"),o("4160"),o("c975"),o("d81d"),o("a434"),o("159b"),o("a4d3"),o("e439"),o("dbb4"),o("b64b");function v(et,st,rt){return st in et?Object.defineProperty(et,st,{value:rt,enumerable:!0,configurable:!0,writable:!0}):et[st]=rt,et}function y(et,st){var rt=Object.keys(et);if(Object.getOwnPropertySymbols){var Vt=Object.getOwnPropertySymbols(et);st&&(Vt=Vt.filter(function(Xt){return Object.getOwnPropertyDescriptor(et,Xt).enumerable})),rt.push.apply(rt,Vt)}return rt}function x(et){for(var st=1;st<arguments.length;st++){var rt=arguments[st]!=null?arguments[st]:{};st%2?y(Object(rt),!0).forEach(function(Vt){v(et,Vt,rt[Vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(rt)):y(Object(rt)).forEach(function(Vt){Object.defineProperty(et,Vt,Object.getOwnPropertyDescriptor(rt,Vt))})}return et}function _(et){if(Array.isArray(et))return et}o("e01a"),o("d28b"),o("e260"),o("d3b7"),o("3ca3"),o("ddb0");function P(et,st){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(et)))){var rt=[],Vt=!0,Xt=!1,ft=void 0;try{for(var Ue=et[Symbol.iterator](),Dt;!(Vt=(Dt=Ue.next()).done)&&(rt.push(Dt.value),!(st&&rt.length===st));Vt=!0);}catch(gn){Xt=!0,ft=gn}finally{try{!Vt&&Ue.return!=null&&Ue.return()}finally{if(Xt)throw ft}}return rt}}o("a630"),o("fb6a"),o("b0c0"),o("25f0");function T(et,st){(st==null||st>et.length)&&(st=et.length);for(var rt=0,Vt=new Array(st);rt<st;rt++)Vt[rt]=et[rt];return Vt}function U(et,st){if(et){if(typeof et=="string")return T(et,st);var rt=Object.prototype.toString.call(et).slice(8,-1);if(rt==="Object"&&et.constructor&&(rt=et.constructor.name),rt==="Map"||rt==="Set")return Array.from(et);if(rt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rt))return T(et,st)}}function N(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j(et,st){return _(et)||P(et,st)||U(et,st)||N()}function Z(et){if(Array.isArray(et))return T(et)}function J(et){if(typeof Symbol<"u"&&Symbol.iterator in Object(et))return Array.from(et)}function le(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function he(et){return Z(et)||J(et)||U(et)||le()}var Le=o("a352"),V=o.n(Le);function F(et){et.parentElement!==null&&et.parentElement.removeChild(et)}function Y(et,st,rt){var Vt=rt===0?et.children[0]:et.children[rt-1].nextSibling;et.insertBefore(st,Vt)}var $=o("dbf1");o("13d5"),o("4fad"),o("ac1f"),o("5319");function D(et){var st=Object.create(null);return function(Vt){var Xt=st[Vt];return Xt||(st[Vt]=et(Vt))}}var k=/-(\w)/g,I=D(function(et){return et.replace(k,function(st,rt){return rt.toUpperCase()})});o("5db7"),o("73d9");var W=["Start","Add","Remove","Update","End"],G=["Choose","Unchoose","Sort","Filter","Clone"],K=["Move"],q=[K,W,G].flatMap(function(et){return et}).map(function(et){return"on".concat(et)}),ve={manage:K,manageAndEmit:W,emit:G};function Ce(et){return q.indexOf(et)!==-1}o("caad"),o("2ca0");var Xe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function B(et){return Xe.includes(et)}function te(et){return["transition-group","TransitionGroup"].includes(et)}function se(et){return["id","class","role","style"].includes(et)||et.startsWith("data-")||et.startsWith("aria-")||et.startsWith("on")}function ae(et){return et.reduce(function(st,rt){var Vt=j(rt,2),Xt=Vt[0],ft=Vt[1];return st[Xt]=ft,st},{})}function we(et){var st=et.$attrs,rt=et.componentData,Vt=rt===void 0?{}:rt,Xt=ae(Object.entries(st).filter(function(ft){var Ue=j(ft,2),Dt=Ue[0];return Ue[1],se(Dt)}));return x(x({},Xt),Vt)}function fe(et){var st=et.$attrs,rt=et.callBackBuilder,Vt=ae(Q(st));Object.entries(rt).forEach(function(ft){var Ue=j(ft,2),Dt=Ue[0],gn=Ue[1];ve[Dt].forEach(function(un){Vt["on".concat(un)]=gn(un)})});var Xt="[data-draggable]".concat(Vt.draggable||"");return x(x({},Vt),{},{draggable:Xt})}function Q(et){return Object.entries(et).filter(function(st){var rt=j(st,2),Vt=rt[0];return rt[1],!se(Vt)}).map(function(st){var rt=j(st,2),Vt=rt[0],Xt=rt[1];return[I(Vt),Xt]}).filter(function(st){var rt=j(st,2),Vt=rt[0];return rt[1],!Ce(Vt)})}o("c740");function ue(et,st){if(!(et instanceof st))throw new TypeError("Cannot call a class as a function")}function Re(et,st){for(var rt=0;rt<st.length;rt++){var Vt=st[rt];Vt.enumerable=Vt.enumerable||!1,Vt.configurable=!0,"value"in Vt&&(Vt.writable=!0),Object.defineProperty(et,Vt.key,Vt)}}function Me(et,st,rt){return st&&Re(et.prototype,st),et}var Ze=function(st){var rt=st.el;return rt},oe=function(st,rt){return st.__draggable_context=rt},me=function(st){return st.__draggable_context},pe=function(){function et(st){var rt=st.nodes,Vt=rt.header,Xt=rt.default,ft=rt.footer,Ue=st.root,Dt=st.realList;ue(this,et),this.defaultNodes=Xt,this.children=[].concat(he(Vt),he(Xt),he(ft)),this.externalComponent=Ue.externalComponent,this.rootTransition=Ue.transition,this.tag=Ue.tag,this.realList=Dt}return Me(et,[{key:"render",value:function(rt,Vt){var Xt=this.tag,ft=this.children,Ue=this._isRootComponent,Dt=Ue?{default:function(){return ft}}:ft;return rt(Xt,Vt,Dt)}},{key:"updated",value:function(){var rt=this.defaultNodes,Vt=this.realList;rt.forEach(function(Xt,ft){oe(Ze(Xt),{element:Vt[ft],index:ft})})}},{key:"getUnderlyingVm",value:function(rt){return me(rt)}},{key:"getVmIndexFromDomIndex",value:function(rt,Vt){var Xt=this.defaultNodes,ft=Xt.length,Ue=Vt.children,Dt=Ue.item(rt);if(Dt===null)return ft;var gn=me(Dt);if(gn)return gn.index;if(ft===0)return 0;var un=Ze(Xt[0]),Qt=he(Ue).findIndex(function(Ye){return Ye===un});return rt<Qt?0:ft}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),et}(),de=o("8bbf");function ze(et,st){var rt=et[st];return rt?rt():[]}function Ke(et){var st=et.$slots,rt=et.realList,Vt=et.getKey,Xt=rt||[],ft=["header","footer"].map(function(Ye){return ze(st,Ye)}),Ue=j(ft,2),Dt=Ue[0],gn=Ue[1],un=st.item;if(!un)throw new Error("draggable element must have an item slot");var Qt=Xt.flatMap(function(Ye,vn){return un({element:Ye,index:vn}).map(function(Sn){return Sn.key=Vt(Ye),Sn.props=x(x({},Sn.props||{}),{},{"data-draggable":!0}),Sn})});if(Qt.length!==Xt.length)throw new Error("Item slot must have only one child");return{header:Dt,footer:gn,default:Qt}}function Ge(et){var st=te(et),rt=!B(et)&&!st;return{transition:st,externalComponent:rt,tag:rt?Object(de.resolveComponent)(et):st?de.TransitionGroup:et}}function Qe(et){var st=et.$slots,rt=et.tag,Vt=et.realList,Xt=et.getKey,ft=Ke({$slots:st,realList:Vt,getKey:Xt}),Ue=Ge(rt);return new pe({nodes:ft,root:Ue,realList:Vt})}function Ve(et,st){var rt=this;Object(de.nextTick)(function(){return rt.$emit(et.toLowerCase(),st)})}function ot(et){var st=this;return function(rt,Vt){if(st.realList!==null)return st["onDrag".concat(et)](rt,Vt)}}function At(et){var st=this,rt=ot.call(this,et);return function(Vt,Xt){rt.call(st,Vt,Xt),Ve.call(st,et,Vt)}}var Et=null,zt={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(st){return st}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Kt=["update:modelValue","change"].concat(he([].concat(he(ve.manageAndEmit),he(ve.emit)).map(function(et){return et.toLowerCase()}))),dn=Object(de.defineComponent)({name:"draggable",inheritAttrs:!1,props:zt,emits:Kt,data:function(){return{error:!1}},render:function(){try{this.error=!1;var st=this.$slots,rt=this.$attrs,Vt=this.tag,Xt=this.componentData,ft=this.realList,Ue=this.getKey,Dt=Qe({$slots:st,tag:Vt,realList:ft,getKey:Ue});this.componentStructure=Dt;var gn=we({$attrs:rt,componentData:Xt});return Dt.render(de.h,gn)}catch(un){return this.error=!0,Object(de.h)("pre",{style:{color:"red"}},un.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&$.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var st=this;if(!this.error){var rt=this.$attrs,Vt=this.$el,Xt=this.componentStructure;Xt.updated();var ft=fe({$attrs:rt,callBackBuilder:{manageAndEmit:function(gn){return At.call(st,gn)},emit:function(gn){return Ve.bind(st,gn)},manage:function(gn){return ot.call(st,gn)}}}),Ue=Vt.nodeType===1?Vt:Vt.parentElement;this._sortable=new V.a(Ue,ft),this.targetDomElement=Ue,Ue.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var st=this.list;return st||this.modelValue},getKey:function(){var st=this.itemKey;return typeof st=="function"?st:function(rt){return rt[st]}}},watch:{$attrs:{handler:function(st){var rt=this._sortable;rt&&Q(st).forEach(function(Vt){var Xt=j(Vt,2),ft=Xt[0],Ue=Xt[1];rt.option(ft,Ue)})},deep:!0}},methods:{getUnderlyingVm:function(st){return this.componentStructure.getUnderlyingVm(st)||null},getUnderlyingPotencialDraggableComponent:function(st){return st.__draggable_component__},emitChanges:function(st){var rt=this;Object(de.nextTick)(function(){return rt.$emit("change",st)})},alterList:function(st){if(this.list){st(this.list);return}var rt=he(this.modelValue);st(rt),this.$emit("update:modelValue",rt)},spliceList:function(){var st=arguments,rt=function(Xt){return Xt.splice.apply(Xt,he(st))};this.alterList(rt)},updatePosition:function(st,rt){var Vt=function(ft){return ft.splice(rt,0,ft.splice(st,1)[0])};this.alterList(Vt)},getRelatedContextFromMoveEvent:function(st){var rt=st.to,Vt=st.related,Xt=this.getUnderlyingPotencialDraggableComponent(rt);if(!Xt)return{component:Xt};var ft=Xt.realList,Ue={list:ft,component:Xt};if(rt!==Vt&&ft){var Dt=Xt.getUnderlyingVm(Vt)||{};return x(x({},Dt),Ue)}return Ue},getVmIndexFromDomIndex:function(st){return this.componentStructure.getVmIndexFromDomIndex(st,this.targetDomElement)},onDragStart:function(st){this.context=this.getUnderlyingVm(st.item),st.item._underlying_vm_=this.clone(this.context.element),Et=st.item},onDragAdd:function(st){var rt=st.item._underlying_vm_;if(rt!==void 0){F(st.item);var Vt=this.getVmIndexFromDomIndex(st.newIndex);this.spliceList(Vt,0,rt);var Xt={element:rt,newIndex:Vt};this.emitChanges({added:Xt})}},onDragRemove:function(st){if(Y(this.$el,st.item,st.oldIndex),st.pullMode==="clone"){F(st.clone);return}var rt=this.context,Vt=rt.index,Xt=rt.element;this.spliceList(Vt,1);var ft={element:Xt,oldIndex:Vt};this.emitChanges({removed:ft})},onDragUpdate:function(st){F(st.item),Y(st.from,st.item,st.oldIndex);var rt=this.context.index,Vt=this.getVmIndexFromDomIndex(st.newIndex);this.updatePosition(rt,Vt);var Xt={element:this.context.element,oldIndex:rt,newIndex:Vt};this.emitChanges({moved:Xt})},computeFutureIndex:function(st,rt){if(!st.element)return 0;var Vt=he(rt.to.children).filter(function(Dt){return Dt.style.display!=="none"}),Xt=Vt.indexOf(rt.related),ft=st.component.getVmIndexFromDomIndex(Xt),Ue=Vt.indexOf(Et)!==-1;return Ue||!rt.willInsertAfter?ft:ft+1},onDragMove:function(st,rt){var Vt=this.move,Xt=this.realList;if(!Vt||!Xt)return!0;var ft=this.getRelatedContextFromMoveEvent(st),Ue=this.computeFutureIndex(ft,st),Dt=x(x({},this.context),{},{futureIndex:Ue}),gn=x(x({},st),{},{relatedContext:ft,draggedContext:Dt});return Vt(gn,rt)},onDragEnd:function(){Et=null}}}),mn=dn;s.default=mn},fb6a:function(i,s,o){var u=o("23e7"),h=o("861d"),d=o("e8b5"),v=o("23cb"),y=o("50c4"),x=o("fc6a"),_=o("8418"),P=o("b622"),T=o("1dde"),U=o("ae40"),N=T("slice"),j=U("slice",{ACCESSORS:!0,0:0,1:2}),Z=P("species"),J=[].slice,le=Math.max;u({target:"Array",proto:!0,forced:!N||!j},{slice:function(Le,V){var F=x(this),Y=y(F.length),$=v(Le,Y),D=v(V===void 0?Y:V,Y),k,I,W;if(d(F)&&(k=F.constructor,typeof k=="function"&&(k===Array||d(k.prototype))?k=void 0:h(k)&&(k=k[Z],k===null&&(k=void 0)),k===Array||k===void 0))return J.call(F,$,D);for(I=new(k===void 0?Array:k)(le(D-$,0)),W=0;$<D;$++,W++)$ in F&&_(I,W,F[$]);return I.length=W,I}})},fc6a:function(i,s,o){var u=o("44ad"),h=o("1d80");i.exports=function(d){return u(h(d))}},fdbc:function(i,s){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(i,s,o){var u=o("4930");i.exports=u&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(I3);var bU=I3.exports;const Jb=cy(bU),wU={class:"h-full bg-gray-50"},xU={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},LU={class:"mt-6 bg-white shadow rounded-lg p-4"},SU={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},EU=["value"],CU={class:"flex items-end"},PU={key:0,class:"mt-6 p-6 text-center bg-white shadow rounded-lg"},AU={key:1,class:"mt-6 p-6 text-center bg-white shadow rounded-lg"},MU={key:2,class:"mt-6 overflow-x-auto pb-4"},kU={class:"w-80 flex-shrink-0"},TU={class:"bg-white rounded-lg shadow overflow-hidden"},BU={class:"flex items-center"},OU={class:"flex items-center space-x-2"},NU={class:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full"},DU=["onClick"],IU=["data-column-id"],RU=["data-note-id"],FU={class:"flex items-start justify-between mb-2 drag-handle cursor-move"},jU={class:"flex items-center"},zU=["title"],UU={class:"flex space-x-1"},$U=["onClick"],VU=["onClick"],HU=["onClick"],GU=["title"],qU={class:"flex justify-between items-center text-xs text-gray-400"},WU={class:"flex space-x-1"},ZU=["title"],KU={key:0,class:"fixed z-[3001] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},YU={class:"flex items-center justify-center min-h-screen w-full"},XU={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden"},JU={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3 p-4 md:px-6"},QU={key:1,class:"fixed z-[3001] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},e$={class:"flex items-center justify-center min-h-screen w-full"},t$={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-2xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden"},n$={class:"p-4 md:p-6 flex-1 overflow-y-auto"},r$={class:"flex justify-between items-center mb-4 border-b pb-4"},i$={class:"text-xl font-semibold text-gray-900"},o$={class:"mb-4"},s$=["value"],a$={class:"mb-4"},l$=["value"],u$={class:"mb-4"},c$=["value"],h$=["value"],f$={class:"mb-4"},d$=["value"],p$=["value"],g$={class:"mb-4"},m$={class:"mt-1 flex space-x-2"},v$=["onClick"],y$={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},_$={key:2,class:"fixed z-[3001] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},b$={class:"flex items-center justify-center min-h-screen w-full"},w$={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden"},x$={class:"p-4 md:p-6 flex-1 overflow-y-auto"},L$={class:"flex justify-between items-center mb-4 border-b pb-4"},S$={class:"mb-4"},E$={class:"mb-4"},C$={class:"mt-1 flex space-x-2"},P$=["onClick"],A$={class:"p-4 md:px-6 border-t bg-gray-50 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3"},M$=Ns({__name:"NotesView",setup(e){const t=Bp(),n=Kf(),r=qD(),i=Gt(!0),s=Gt(!1),o=Gt(!1),u=Gt(!1),h=Gt(null),d=Gt(null),v=Gt(""),y=Gt("#6B7280"),x=ir({get:()=>r.getSortedColumns,set:K=>{const q=K.map(ve=>ve.id);r.reorderColumns(q)}}),_=[{id:Ko.PRIVATE,title:"Priv",description:"Visible uniquement par vous"},{id:Ko.COMPANY,title:"Entreprise",description:"Visible uniquement par l'entreprise"},{id:Ko.EMPLOYEE,title:"Salaris",description:"Visible par l'entreprise et ses salaris"},{id:Ko.VISITOR,title:"Visiteurs",description:"Visible par tous (entreprise, salaris et visiteurs)"}],P=gu({search:"",date:"",accessLevel:""}),T=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6B7280"],U=ir(()=>{let K=r.getAccessibleNotes;if(P.search){const q=P.search.toLowerCase();K=K.filter(ve=>ve.title.toLowerCase().includes(q)||ve.description.toLowerCase().includes(q))}if(P.accessLevel&&(K=K.filter(q=>q.accessLevel===P.accessLevel)),P.date){const q=new Date;q.setHours(0,0,0,0);const ve=new Date(q);ve.setDate(q.getDate()-q.getDay());const Ce=new Date(q.getFullYear(),q.getMonth(),1);K=K.filter(Xe=>{const B=new Date(Xe.createdAt);return P.date==="today"?B>=q:P.date==="week"?B>=ve:P.date==="month"?B>=Ce:!0})}return K}),N=ir(()=>K=>U.value.filter(q=>q.columnId===K).sort((q,ve)=>q.order-ve.order));function j(K){return r.getAccessLevelLabel(K)}function Z(K){switch(K){case Ko.PRIVATE:return"#9CA3AF";case Ko.COMPANY:return"#EF4444";case Ko.EMPLOYEE:return"#F59E0B";case Ko.VISITOR:return"#10B981";default:return"#6B7280"}}const J=ir(()=>r.getSortedColumns);Ia(async()=>{try{setTimeout(()=>{i.value=!1},500)}catch(K){console.error("Erreur lors du chargement des notes:",K),n.error("Erreur lors du chargement des notes"),i.value=!1}});function le(K){const q=new Date(K);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(q)}function he(){t.push({path:"/",query:{tool:"Note"}})}function Le(K){t.push({path:"/",query:{lat:K.location[0].toString(),lng:K.location[1].toString(),noteId:K.id.toString()}})}function V(K){d.value=JSON.parse(JSON.stringify(K)),o.value=!0}function F(K,q){if(!d.value)return;const ve=q.target;K==="title"||K==="description"||K==="columnId"?d.value[K]=ve.value:K==="accessLevel"&&(d.value.accessLevel=ve.value)}function Y(){d.value&&(r.updateNote(d.value.id,d.value),n.success("Note mise  jour avec succs"),o.value=!1)}function $(K){h.value=K,s.value=!0}function D(){h.value&&(r.removeNote(h.value.id),n.success("Note supprime avec succs"),s.value=!1,h.value=null)}function k(){v.value.trim()&&(r.addColumn(v.value.trim(),y.value),n.success("Colonne ajoute avec succs"),v.value="",y.value="#6B7280",u.value=!1)}function I(K){r.removeColumn(K),n.success("Colonne supprime avec succs")}function W(){n.success("Ordre des colonnes mis  jour")}function G(K,q){console.log("Drag change event:",K);try{if(K.added){const{element:ve}=K.added;r.moveNote(ve.id,q);const Xe=N.value(q).map(te=>te.id);r.reorderNotes(q,Xe);const B=r.getColumnById(q);n.success(`Note dplace vers ${(B==null?void 0:B.title)||"une autre colonne"}`)}if(K.moved){const Ce=N.value(q).map(Xe=>Xe.id);r.reorderNotes(q,Ce),n.success("Ordre des notes mis  jour")}K.removed}catch(ve){console.error("Erreur lors du drag and drop:",ve),n.error("Une erreur est survenue lors du dplacement de la note")}}return(K,q)=>{var ve,Ce,Xe,B,te;return Je(),tt(On,null,[M("div",wU,[M("div",xU,[M("div",{class:"sm:flex sm:items-center"},[q[15]||(q[15]=M("div",{class:"sm:flex-auto"},[M("h1",{class:"text-2xl font-semibold text-gray-900"},"Notes"),M("p",{class:"mt-2 text-sm text-gray-700"}," Liste de toutes vos notes. ")],-1)),M("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[M("button",{onClick:he,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Crer une note ")])]),M("div",LU,[M("div",SU,[M("div",null,[q[16]||(q[16]=M("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),Zn(M("input",{type:"text",id:"search","onUpdate:modelValue":q[0]||(q[0]=se=>P.search=se),placeholder:"Rechercher par titre ou description...",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Kr,P.search]])]),M("div",null,[q[18]||(q[18]=M("label",{for:"date",class:"block text-sm font-medium text-gray-700"},"Date",-1)),Zn(M("select",{id:"date","onUpdate:modelValue":q[1]||(q[1]=se=>P.date=se),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},q[17]||(q[17]=[M("option",{value:""},"Toutes les dates",-1),M("option",{value:"today"},"Aujourd'hui",-1),M("option",{value:"week"},"Cette semaine",-1),M("option",{value:"month"},"Ce mois",-1)]),512),[[Jo,P.date]])]),M("div",null,[q[20]||(q[20]=M("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accs",-1)),Zn(M("select",{id:"accessLevel","onUpdate:modelValue":q[2]||(q[2]=se=>P.accessLevel=se),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[q[19]||(q[19]=M("option",{value:""},"Tous les niveaux",-1)),(Je(),tt(On,null,Sr(_,se=>M("option",{key:se.id,value:se.id},Zt(se.title),9,EU)),64))],512),[[Jo,P.accessLevel]])]),M("div",CU,[M("button",{onClick:q[3]||(q[3]=se=>u.value=!0),class:"w-full inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},q[21]||(q[21]=[M("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),Mi(" Ajouter une colonne ")]))])])]),i.value?(Je(),tt("div",PU,q[22]||(q[22]=[M("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1),M("p",{class:"mt-2 text-sm text-gray-500"},"Chargement des notes...",-1)]))):U.value.length===0?(Je(),tt("div",AU,q[23]||(q[23]=[M("p",{class:"text-sm text-gray-500"},"Aucune note trouve",-1)]))):(Je(),tt("div",MU,[qr(zn(Jb),{modelValue:x.value,"onUpdate:modelValue":q[4]||(q[4]=se=>x.value=se),class:"flex space-x-4 min-w-max","item-key":"id",handle:".column-drag-handle",onEnd:W,animation:150},{item:Ul(({element:se})=>[M("div",kU,[M("div",TU,[M("div",{class:"p-3 flex items-center justify-between column-drag-handle cursor-move no-select",style:Ya({backgroundColor:se.color+"20",borderBottom:"2px solid "+se.color})},[M("div",BU,[q[24]||(q[24]=M("svg",{class:"h-4 w-4 mr-2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),M("h3",{class:"text-sm font-semibold",style:Ya({color:se.color})},Zt(se.title),5)]),M("div",OU,[M("span",NU,Zt(N.value(se.id).length),1),se.isDefault?xn("",!0):(Je(),tt("button",{key:0,onClick:ae=>I(se.id),class:"text-gray-400 hover:text-red-500 focus:outline-none",title:"Supprimer la colonne"},q[25]||(q[25]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,DU))])],4),M("div",{class:"p-2 max-h-[calc(100vh-250px)] overflow-y-auto","data-column-id":se.id},[qr(zn(Jb),{list:N.value(se.id),class:"min-h-[100px] draggable-container",group:"notes","item-key":"id",animation:150,"ghost-class":"ghost-card","drag-class":"dragging","chosen-class":"chosen",handle:".drag-handle",onChange:ae=>G(ae,se.id),"data-column-id":se.id,"force-fallback":!0},Y4({item:Ul(({element:ae})=>{var we;return[M("div",{class:"mb-2 p-3 bg-white border rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 no-select","data-note-id":ae.id},[M("div",FU,[M("div",jU,[M("div",{class:"h-8 w-8 rounded-full flex items-center justify-center mr-2",style:Ya({backgroundColor:ae.style.fillColor+"40",color:ae.style.color})},q[27]||(q[27]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]),4),M("h4",{class:"text-sm font-medium text-gray-900 truncate max-w-[180px]",title:ae.title},Zt(ae.title),9,zU)]),M("div",UU,[M("button",{onClick:fe=>Le(ae),class:"text-gray-400 hover:text-primary-600",title:"Voir sur la carte"},q[28]||(q[28]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1)]),8,$U),M("button",{onClick:fe=>V(ae),class:"text-gray-400 hover:text-primary-600",title:"Modifier"},q[29]||(q[29]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,VU),M("button",{onClick:fe=>$(ae),class:"text-gray-400 hover:text-red-600",title:"Supprimer"},q[30]||(q[30]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,HU)])]),M("p",{class:"text-xs text-gray-500 mb-2 line-clamp-2",title:ae.description},Zt(ae.description),9,GU),M("div",qU,[M("span",null,Zt(le(ae.createdAt)),1),M("div",WU,[M("span",{class:"px-2 py-1 rounded-full",style:Ya({backgroundColor:Z(ae.accessLevel)+"20",color:Z(ae.accessLevel)}),title:(we=_.find(fe=>fe.id===ae.accessLevel))==null?void 0:we.description},Zt(j(ae.accessLevel)),13,ZU),M("span",{class:"px-2 py-1 rounded-full",style:Ya({backgroundColor:se.color+"20",color:se.color})},Zt(se.title),5)])])],8,RU)]}),_:2},[N.value(se.id).length===0?{name:"header",fn:Ul(()=>[q[26]||(q[26]=M("div",{class:"p-4 text-center text-gray-400 text-sm italic"}," Aucune note dans cette colonne ",-1))]),key:"0"}:void 0]),1032,["list","onChange","data-column-id"])],8,IU)])])]),_:1},8,["modelValue"])]))])]),s.value?(Je(),tt("div",KU,[M("div",YU,[q[32]||(q[32]=M("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),M("div",XU,[q[31]||(q[31]=Zh('<div class="p-4 md:p-6" data-v-83c82c8b><div class="flex items-start" data-v-83c82c8b><div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100" data-v-83c82c8b><svg class="h-6 w-6 text-red-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-v-83c82c8b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-83c82c8b></path></svg></div><div class="ml-4 flex-1" data-v-83c82c8b><h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title" data-v-83c82c8b> Supprimer la note </h3><div class="mt-2" data-v-83c82c8b><p class="text-sm text-gray-500" data-v-83c82c8b> tes-vous sr de vouloir supprimer cette note ? Cette action est irrversible. </p></div></div></div></div>',1)),M("div",JU,[M("button",{onClick:D,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm"}," Supprimer "),M("button",{onClick:q[5]||(q[5]=se=>s.value=!1),type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm"}," Annuler ")])])])])):xn("",!0),o.value?(Je(),tt("div",QU,[M("div",e$,[q[40]||(q[40]=M("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),M("div",t$,[M("form",{onSubmit:ef(Y,["prevent"]),class:"h-full md:h-auto flex flex-col"},[M("div",n$,[M("div",r$,[M("h3",i$,Zt((ve=d.value)!=null&&ve.id?"Modifier la note":"Nouvelle note"),1),M("button",{type:"button",onClick:q[6]||(q[6]=se=>o.value=!1),class:"text-gray-400 hover:text-gray-500"},q[33]||(q[33]=[M("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),M("div",o$,[q[34]||(q[34]=M("label",{for:"title",class:"block text-sm font-medium text-gray-700"},"Titre",-1)),M("input",{type:"text",id:"title",value:((Ce=d.value)==null?void 0:Ce.title)||"",onInput:q[7]||(q[7]=se=>F("title",se)),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,40,s$)]),M("div",a$,[q[35]||(q[35]=M("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),M("textarea",{id:"description",value:((Xe=d.value)==null?void 0:Xe.description)||"",onInput:q[8]||(q[8]=se=>F("description",se)),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,40,l$)]),M("div",u$,[q[36]||(q[36]=M("label",{for:"column",class:"block text-sm font-medium text-gray-700"},"tat",-1)),M("select",{id:"column",value:((B=d.value)==null?void 0:B.columnId)||"",onChange:q[9]||(q[9]=se=>F("columnId",se)),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[(Je(!0),tt(On,null,Sr(J.value,se=>(Je(),tt("option",{key:se.id,value:se.id},Zt(se.title),9,h$))),128))],40,c$)]),M("div",f$,[q[37]||(q[37]=M("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accs",-1)),M("select",{id:"accessLevel",value:((te=d.value)==null?void 0:te.accessLevel)||"",onChange:q[10]||(q[10]=se=>F("accessLevel",se)),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[(Je(),tt(On,null,Sr(_,se=>M("option",{key:se.id,value:se.id},Zt(se.title)+" - "+Zt(se.description),9,p$)),64))],40,d$)]),M("div",g$,[q[38]||(q[38]=M("label",{class:"block text-sm font-medium text-gray-700"},"Couleur",-1)),M("div",m$,[(Je(),tt(On,null,Sr(T,se=>M("div",{key:se,class:Yi(["w-8 h-8 rounded-full cursor-pointer border-2",{"border-gray-400":!(d.value&&d.value.style&&d.value.style.color===se),"border-black":d.value&&d.value.style&&d.value.style.color===se}]),style:Ya({backgroundColor:se}),onClick:ae=>{d.value&&d.value.style&&(d.value.style.color=se,d.value.style.fillColor=se)}},null,14,v$)),64))])])]),M("div",y$,[q[39]||(q[39]=M("button",{type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:ml-3 sm:w-auto sm:text-sm"}," Enregistrer ",-1)),M("button",{onClick:q[11]||(q[11]=se=>o.value=!1),type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Annuler ")])],32)])])])):xn("",!0),u.value?(Je(),tt("div",_$,[M("div",b$,[q[46]||(q[46]=M("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),M("div",w$,[M("form",{onSubmit:ef(k,["prevent"]),class:"h-full md:h-auto flex flex-col"},[M("div",x$,[M("div",L$,[q[42]||(q[42]=M("h3",{class:"text-xl font-semibold text-gray-900"},"Ajouter une nouvelle colonne",-1)),M("button",{type:"button",onClick:q[12]||(q[12]=se=>u.value=!1),class:"text-gray-400 hover:text-gray-500"},q[41]||(q[41]=[M("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),M("div",S$,[q[43]||(q[43]=M("label",{for:"columnName",class:"block text-sm font-medium text-gray-700"},"Nom de la colonne",-1)),Zn(M("input",{type:"text",id:"columnName","onUpdate:modelValue":q[13]||(q[13]=se=>v.value=se),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Kr,v.value]])]),M("div",E$,[q[44]||(q[44]=M("label",{class:"block text-sm font-medium text-gray-700"},"Couleur",-1)),M("div",C$,[(Je(),tt(On,null,Sr(T,se=>M("div",{key:se,class:Yi(["w-8 h-8 rounded-full cursor-pointer border-2",{"border-gray-400":y.value!==se,"border-black":y.value===se}]),style:Ya({backgroundColor:se}),onClick:ae=>y.value=se},null,14,P$)),64))])])]),M("div",A$,[q[45]||(q[45]=M("button",{type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm"}," Ajouter ",-1)),M("button",{onClick:q[14]||(q[14]=se=>u.value=!1),type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm"}," Annuler ")])],32)])])])):xn("",!0)],64)}}}),k$=tm(M$,[["__scopeId","data-v-83c82c8b"]]),Z3=a8({history:FT("/"),routes:[{path:"/",name:"home",component:zb,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/plans",name:"plans",component:Dz,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/users",name:"users",component:sj,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie"]}},{path:"/profile",name:"profile",component:()=>Vh(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/login",name:"login",component:vO,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>Vh(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>Vh(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:Q7,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/notes",name:"notes",component:k$,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/map",name:"map",component:zb,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>Vh(()=>import("./NotFoundView.js"),[])}]});Z3.beforeEach(async(e,t,n)=>{var u,h;const r=Da();if(console.log("Route:",e.path,"Auth state:",{initialized:r.initialized,isAuthenticated:r.isAuthenticated,user:r.user}),!r.initialized)try{await r.initialize(window.INITIAL_STATE)}catch(d){console.error("Error initializing auth store:",d)}const i=r.isAuthenticated,s=(u=r.user)==null?void 0:u.must_change_password,o=(h=r.user)==null?void 0:h.user_type;if(e.meta.requiresAuth&&!i){n("/login");return}if(i&&s&&e.name!=="changePassword"){n({name:"changePassword"});return}if(e.name==="changePassword"&&!s){n({name:"home"});return}if(e.meta.allowedRoles&&o&&!e.meta.allowedRoles.includes(o)){n({name:"home"});return}if(e.meta.requiresGuest&&i){n({name:"home"});return}n()});const wy=ag(T7),K3=gM();wy.use(K3);wy.use(Z3);const T$=Da(K3);window.INITIAL_STATE&&T$.initialize(window.INITIAL_STATE);wy.mount("#app");export{Oi as _,gu as a,M as b,tt as c,Ns as d,xn as e,zn as f,Mi as g,Zn as h,Je as i,Zh as j,qr as k,Ul as l,Z4 as m,Yi as n,Ia as o,X$ as p,Bp as q,Gt as r,Zs as s,Zt as t,Da as u,Kr as v,ef as w,cy as x};

var jE=Object.defineProperty;var zE=(e,t,n)=>t in e?jE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ht=(e,t,n)=>zE(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Eg(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const ki={},Hh=[],pu=()=>{},$E=()=>!1,Sp=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),B1=e=>e.startsWith("onUpdate:"),os=Object.assign,N1=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},UE=Object.prototype.hasOwnProperty,Vi=(e,t)=>UE.call(e,t),Qn=Array.isArray,Gh=e=>ld(e)==="[object Map]",oh=e=>ld(e)==="[object Set]",B2=e=>ld(e)==="[object Date]",VE=e=>ld(e)==="[object RegExp]",kr=e=>typeof e=="function",ps=e=>typeof e=="string",Uu=e=>typeof e=="symbol",Ki=e=>e!==null&&typeof e=="object",O1=e=>(Ki(e)||kr(e))&&kr(e.then)&&kr(e.catch),rw=Object.prototype.toString,ld=e=>rw.call(e),HE=e=>ld(e).slice(8,-1),Pg=e=>ld(e)==="[object Object]",I1=e=>ps(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,qh=Eg(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Mg=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},GE=/-(\w)/g,pa=Mg(e=>e.replace(GE,(t,n)=>n?n.toUpperCase():"")),qE=/\B([A-Z])/g,Cl=Mg(e=>e.replace(qE,"-$1").toLowerCase()),Cp=Mg(e=>e.charAt(0).toUpperCase()+e.slice(1)),Gd=Mg(e=>e?`on${Cp(e)}`:""),el=(e,t)=>!Object.is(e,t),Wh=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},iw=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},Z0=e=>{const t=parseFloat(e);return isNaN(t)?e:t},K0=e=>{const t=ps(e)?Number(e):NaN;return isNaN(t)?e:t};let N2;const Ag=()=>N2||(N2=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),WE="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",ZE=Eg(WE);function tl(e){if(Qn(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=ps(r)?XE(r):tl(r);if(i)for(const o in i)t[o]=i[o]}return t}else if(ps(e)||Ki(e))return e}const KE=/;(?![^(]*\))/g,YE=/:([^]+)/,JE=/\/\*[^]*?\*\//g;function XE(e){const t={};return e.replace(JE,"").split(KE).forEach(n=>{if(n){const r=n.split(YE);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Ii(e){let t="";if(ps(e))t=e;else if(Qn(e))for(let n=0;n<e.length;n++){const r=Ii(e[n]);r&&(t+=r+" ")}else if(Ki(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function QE(e){if(!e)return null;let{class:t,style:n}=e;return t&&!ps(t)&&(e.class=Ii(t)),n&&(e.style=tl(n)),e}const eP="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",tP=Eg(eP);function sw(e){return!!e||e===""}function nP(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=wf(e[r],t[r]);return n}function wf(e,t){if(e===t)return!0;let n=B2(e),r=B2(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=Uu(e),r=Uu(t),n||r)return e===t;if(n=Qn(e),r=Qn(t),n||r)return n&&r?nP(e,t):!1;if(n=Ki(e),r=Ki(t),n||r){if(!n||!r)return!1;const i=Object.keys(e).length,o=Object.keys(t).length;if(i!==o)return!1;for(const s in e){const u=e.hasOwnProperty(s),f=t.hasOwnProperty(s);if(u&&!f||!u&&f||!wf(e[s],t[s]))return!1}}return String(e)===String(t)}function kg(e,t){return e.findIndex(n=>wf(n,t))}const ow=e=>!!(e&&e.__v_isRef===!0),Wt=e=>ps(e)?e:e==null?"":Qn(e)||Ki(e)&&(e.toString===rw||!kr(e.toString))?ow(e)?Wt(e.value):JSON.stringify(e,aw,2):String(e),aw=(e,t)=>ow(t)?aw(e,t.value):Gh(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i],o)=>(n[Im(r,o)+" =>"]=i,n),{})}:oh(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Im(n))}:Uu(t)?Im(t):Ki(t)&&!Qn(t)&&!Pg(t)?String(t):t,Im=(e,t="")=>{var n;return Uu(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Qa;class R1{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Qa,!t&&Qa&&(this.index=(Qa.scopes||(Qa.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Qa;try{return Qa=this,t()}finally{Qa=n}}}on(){Qa=this}off(){Qa=this.parent}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function F1(e){return new R1(e)}function j1(){return Qa}function lw(e,t=!1){Qa&&Qa.cleanups.push(e)}let ds;const Rm=new WeakSet;class up{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Qa&&Qa.active&&Qa.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Rm.has(this)&&(Rm.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||cw(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,O2(this),fw(this);const t=ds,n=$u;ds=this,$u=!0;try{return this.fn()}finally{hw(this),ds=t,$u=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)U1(t);this.deps=this.depsTail=void 0,O2(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Rm.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ev(this)&&this.run()}get dirty(){return Ev(this)}}let uw=0,qd,Wd;function cw(e,t=!1){if(e.flags|=8,t){e.next=Wd,Wd=e;return}e.next=qd,qd=e}function z1(){uw++}function $1(){if(--uw>0)return;if(Wd){let t=Wd;for(Wd=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;qd;){let t=qd;for(qd=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function fw(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function hw(e){let t,n=e.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),U1(r),rP(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}e.deps=t,e.depsTail=n}function Ev(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(dw(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function dw(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===cp))return;e.globalVersion=cp;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!Ev(e)){e.flags&=-3;return}const n=ds,r=$u;ds=e,$u=!0;try{fw(e);const i=e.fn(e._value);(t.version===0||el(i,e._value))&&(e._value=i,t.version++)}catch(i){throw t.version++,i}finally{ds=n,$u=r,hw(e),e.flags&=-3}}function U1(e,t=!1){const{dep:n,prevSub:r,nextSub:i}=e;if(r&&(r.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let o=n.computed.deps;o;o=o.nextDep)U1(o,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function rP(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}function iP(e,t){e.effect instanceof up&&(e=e.effect.fn);const n=new up(e);t&&os(n,t);try{n.run()}catch(i){throw n.stop(),i}const r=n.run.bind(n);return r.effect=n,r}function sP(e){e.effect.stop()}let $u=!0;const pw=[];function Pf(){pw.push($u),$u=!1}function Mf(){const e=pw.pop();$u=e===void 0?!0:e}function O2(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=ds;ds=void 0;try{t()}finally{ds=n}}}let cp=0;class oP{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Tg{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!ds||!$u||ds===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==ds)n=this.activeLink=new oP(ds,this),ds.deps?(n.prevDep=ds.depsTail,ds.depsTail.nextDep=n,ds.depsTail=n):ds.deps=ds.depsTail=n,gw(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=ds.depsTail,n.nextDep=void 0,ds.depsTail.nextDep=n,ds.depsTail=n,ds.deps===n&&(ds.deps=r)}return n}trigger(t){this.version++,cp++,this.notify(t)}notify(t){z1();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{$1()}}}function gw(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)gw(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Y0=new WeakMap,Jf=Symbol(""),Pv=Symbol(""),fp=Symbol("");function Na(e,t,n){if($u&&ds){let r=Y0.get(e);r||Y0.set(e,r=new Map);let i=r.get(n);i||(r.set(n,i=new Tg),i.map=r,i.key=n),i.track()}}function Rc(e,t,n,r,i,o){const s=Y0.get(e);if(!s){cp++;return}const u=f=>{f&&f.trigger()};if(z1(),t==="clear")s.forEach(u);else{const f=Qn(e),d=f&&I1(n);if(f&&n==="length"){const m=Number(r);s.forEach((y,w)=>{(w==="length"||w===fp||!Uu(w)&&w>=m)&&u(y)})}else switch((n!==void 0||s.has(void 0))&&u(s.get(n)),d&&u(s.get(fp)),t){case"add":f?d&&u(s.get("length")):(u(s.get(Jf)),Gh(e)&&u(s.get(Pv)));break;case"delete":f||(u(s.get(Jf)),Gh(e)&&u(s.get(Pv)));break;case"set":Gh(e)&&u(s.get(Jf));break}}$1()}function aP(e,t){const n=Y0.get(e);return n&&n.get(t)}function Ch(e){const t=Ai(e);return t===e?t:(Na(t,"iterate",fp),Wl(e)?t:t.map(Oa))}function Dg(e){return Na(e=Ai(e),"iterate",fp),e}const lP={__proto__:null,[Symbol.iterator](){return Fm(this,Symbol.iterator,Oa)},concat(...e){return Ch(this).concat(...e.map(t=>Qn(t)?Ch(t):t))},entries(){return Fm(this,"entries",e=>(e[1]=Oa(e[1]),e))},every(e,t){return Dc(this,"every",e,t,void 0,arguments)},filter(e,t){return Dc(this,"filter",e,t,n=>n.map(Oa),arguments)},find(e,t){return Dc(this,"find",e,t,Oa,arguments)},findIndex(e,t){return Dc(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Dc(this,"findLast",e,t,Oa,arguments)},findLastIndex(e,t){return Dc(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Dc(this,"forEach",e,t,void 0,arguments)},includes(...e){return jm(this,"includes",e)},indexOf(...e){return jm(this,"indexOf",e)},join(e){return Ch(this).join(e)},lastIndexOf(...e){return jm(this,"lastIndexOf",e)},map(e,t){return Dc(this,"map",e,t,void 0,arguments)},pop(){return xd(this,"pop")},push(...e){return xd(this,"push",e)},reduce(e,...t){return I2(this,"reduce",e,t)},reduceRight(e,...t){return I2(this,"reduceRight",e,t)},shift(){return xd(this,"shift")},some(e,t){return Dc(this,"some",e,t,void 0,arguments)},splice(...e){return xd(this,"splice",e)},toReversed(){return Ch(this).toReversed()},toSorted(e){return Ch(this).toSorted(e)},toSpliced(...e){return Ch(this).toSpliced(...e)},unshift(...e){return xd(this,"unshift",e)},values(){return Fm(this,"values",Oa)}};function Fm(e,t,n){const r=Dg(e),i=r[t]();return r!==e&&!Wl(e)&&(i._next=i.next,i.next=()=>{const o=i._next();return o.value&&(o.value=n(o.value)),o}),i}const uP=Array.prototype;function Dc(e,t,n,r,i,o){const s=Dg(e),u=s!==e&&!Wl(e),f=s[t];if(f!==uP[t]){const y=f.apply(e,o);return u?Oa(y):y}let d=n;s!==e&&(u?d=function(y,w){return n.call(this,Oa(y),w,e)}:n.length>2&&(d=function(y,w){return n.call(this,y,w,e)}));const m=f.call(s,d,r);return u&&i?i(m):m}function I2(e,t,n,r){const i=Dg(e);let o=n;return i!==e&&(Wl(e)?n.length>3&&(o=function(s,u,f){return n.call(this,s,u,f,e)}):o=function(s,u,f){return n.call(this,s,Oa(u),f,e)}),i[t](o,...r)}function jm(e,t,n){const r=Ai(e);Na(r,"iterate",fp);const i=r[t](...n);return(i===-1||i===!1)&&Og(n[0])?(n[0]=Ai(n[0]),r[t](...n)):i}function xd(e,t,n=[]){Pf(),z1();const r=Ai(e)[t].apply(e,n);return $1(),Mf(),r}const cP=Eg("__proto__,__v_isRef,__isVue"),mw=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Uu));function fP(e){Uu(e)||(e=String(e));const t=Ai(this);return Na(t,"has",e),t.hasOwnProperty(e)}class vw{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return o;if(n==="__v_raw")return r===(i?o?Lw:xw:o?ww:bw).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const s=Qn(t);if(!i){let f;if(s&&(f=lP[n]))return f;if(n==="hasOwnProperty")return fP}const u=Reflect.get(t,n,Zs(t)?t:r);return(Uu(n)?mw.has(n):cP(n))||(i||Na(t,"get",n),o)?u:Zs(u)?s&&I1(n)?u:u.value:Ki(u)?i?Iu(u):Yl(u):u}}class yw extends vw{constructor(t=!1){super(!1,t)}set(t,n,r,i){let o=t[n];if(!this._isShallow){const f=xf(o);if(!Wl(r)&&!xf(r)&&(o=Ai(o),r=Ai(r)),!Qn(t)&&Zs(o)&&!Zs(r))return f?!1:(o.value=r,!0)}const s=Qn(t)&&I1(n)?Number(n)<t.length:Vi(t,n),u=Reflect.set(t,n,r,Zs(t)?t:i);return t===Ai(i)&&(s?el(r,o)&&Rc(t,"set",n,r):Rc(t,"add",n,r)),u}deleteProperty(t,n){const r=Vi(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&r&&Rc(t,"delete",n,void 0),i}has(t,n){const r=Reflect.has(t,n);return(!Uu(n)||!mw.has(n))&&Na(t,"has",n),r}ownKeys(t){return Na(t,"iterate",Qn(t)?"length":Jf),Reflect.ownKeys(t)}}class _w extends vw{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const hP=new yw,dP=new _w,pP=new yw(!0),gP=new _w(!0),Mv=e=>e,r0=e=>Reflect.getPrototypeOf(e);function mP(e,t,n){return function(...r){const i=this.__v_raw,o=Ai(i),s=Gh(o),u=e==="entries"||e===Symbol.iterator&&s,f=e==="keys"&&s,d=i[e](...r),m=n?Mv:t?Av:Oa;return!t&&Na(o,"iterate",f?Pv:Jf),{next(){const{value:y,done:w}=d.next();return w?{value:y,done:w}:{value:u?[m(y[0]),m(y[1])]:m(y),done:w}},[Symbol.iterator](){return this}}}}function i0(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function vP(e,t){const n={get(i){const o=this.__v_raw,s=Ai(o),u=Ai(i);e||(el(i,u)&&Na(s,"get",i),Na(s,"get",u));const{has:f}=r0(s),d=t?Mv:e?Av:Oa;if(f.call(s,i))return d(o.get(i));if(f.call(s,u))return d(o.get(u));o!==s&&o.get(i)},get size(){const i=this.__v_raw;return!e&&Na(Ai(i),"iterate",Jf),Reflect.get(i,"size",i)},has(i){const o=this.__v_raw,s=Ai(o),u=Ai(i);return e||(el(i,u)&&Na(s,"has",i),Na(s,"has",u)),i===u?o.has(i):o.has(i)||o.has(u)},forEach(i,o){const s=this,u=s.__v_raw,f=Ai(u),d=t?Mv:e?Av:Oa;return!e&&Na(f,"iterate",Jf),u.forEach((m,y)=>i.call(o,d(m),d(y),s))}};return os(n,e?{add:i0("add"),set:i0("set"),delete:i0("delete"),clear:i0("clear")}:{add(i){!t&&!Wl(i)&&!xf(i)&&(i=Ai(i));const o=Ai(this);return r0(o).has.call(o,i)||(o.add(i),Rc(o,"add",i,i)),this},set(i,o){!t&&!Wl(o)&&!xf(o)&&(o=Ai(o));const s=Ai(this),{has:u,get:f}=r0(s);let d=u.call(s,i);d||(i=Ai(i),d=u.call(s,i));const m=f.call(s,i);return s.set(i,o),d?el(o,m)&&Rc(s,"set",i,o):Rc(s,"add",i,o),this},delete(i){const o=Ai(this),{has:s,get:u}=r0(o);let f=s.call(o,i);f||(i=Ai(i),f=s.call(o,i)),u&&u.call(o,i);const d=o.delete(i);return f&&Rc(o,"delete",i,void 0),d},clear(){const i=Ai(this),o=i.size!==0,s=i.clear();return o&&Rc(i,"clear",void 0,void 0),s}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=mP(i,e,t)}),n}function Bg(e,t){const n=vP(e,t);return(r,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(Vi(n,i)&&i in r?n:r,i,o)}const yP={get:Bg(!1,!1)},_P={get:Bg(!1,!0)},bP={get:Bg(!0,!1)},wP={get:Bg(!0,!0)},bw=new WeakMap,ww=new WeakMap,xw=new WeakMap,Lw=new WeakMap;function xP(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function LP(e){return e.__v_skip||!Object.isExtensible(e)?0:xP(HE(e))}function Yl(e){return xf(e)?e:Ng(e,!1,hP,yP,bw)}function V1(e){return Ng(e,!1,pP,_P,ww)}function Iu(e){return Ng(e,!0,dP,bP,xw)}function SP(e){return Ng(e,!0,gP,wP,Lw)}function Ng(e,t,n,r,i){if(!Ki(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const s=LP(e);if(s===0)return e;const u=new Proxy(e,s===2?r:n);return i.set(e,u),u}function hc(e){return xf(e)?hc(e.__v_raw):!!(e&&e.__v_isReactive)}function xf(e){return!!(e&&e.__v_isReadonly)}function Wl(e){return!!(e&&e.__v_isShallow)}function Og(e){return e?!!e.__v_raw:!1}function Ai(e){const t=e&&e.__v_raw;return t?Ai(t):e}function Ig(e){return!Vi(e,"__v_skip")&&Object.isExtensible(e)&&iw(e,"__v_skip",!0),e}const Oa=e=>Ki(e)?Yl(e):e,Av=e=>Ki(e)?Iu(e):e;function Zs(e){return e?e.__v_isRef===!0:!1}function Rt(e){return Sw(e,!1)}function H1(e){return Sw(e,!0)}function Sw(e,t){return Zs(e)?e:new CP(e,t)}class CP{constructor(t,n){this.dep=new Tg,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Ai(t),this._value=n?t:Oa(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||Wl(t)||xf(t);t=r?t:Ai(t),el(t,n)&&(this._rawValue=t,this._value=r?t:Oa(t),this.dep.trigger())}}function EP(e){e.dep&&e.dep.trigger()}function qn(e){return Zs(e)?e.value:e}function PP(e){return kr(e)?e():qn(e)}const MP={get:(e,t,n)=>t==="__v_raw"?e:qn(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return Zs(i)&&!Zs(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function G1(e){return hc(e)?e:new Proxy(e,MP)}class AP{constructor(t){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new Tg,{get:r,set:i}=t(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(t){this._set(t)}}function Cw(e){return new AP(e)}function Ew(e){const t=Qn(e)?new Array(e.length):{};for(const n in e)t[n]=Pw(e,n);return t}class kP{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return aP(Ai(this._object),this._key)}}class TP{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function DP(e,t,n){return Zs(e)?e:kr(e)?new TP(e):Ki(e)&&arguments.length>1?Pw(e,t,n):Rt(e)}function Pw(e,t,n){const r=e[t];return Zs(r)?r:new kP(e,t,n)}class BP{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Tg(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=cp-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&ds!==this)return cw(this,!0),!0}get value(){const t=this.dep.track();return dw(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function NP(e,t,n=!1){let r,i;return kr(e)?r=e:(r=e.get,i=e.set),new BP(r,i,n)}const OP={GET:"get",HAS:"has",ITERATE:"iterate"},IP={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},s0={},J0=new WeakMap;let lf;function RP(){return lf}function Mw(e,t=!1,n=lf){if(n){let r=J0.get(n);r||J0.set(n,r=[]),r.push(e)}}function FP(e,t,n=ki){const{immediate:r,deep:i,once:o,scheduler:s,augmentJob:u,call:f}=n,d=te=>i?te:Wl(te)||i===!1||i===0?Fc(te,1):Fc(te);let m,y,w,_,M=!1,k=!1;if(Zs(e)?(y=()=>e.value,M=Wl(e)):hc(e)?(y=()=>d(e),M=!0):Qn(e)?(k=!0,M=e.some(te=>hc(te)||Wl(te)),y=()=>e.map(te=>{if(Zs(te))return te.value;if(hc(te))return d(te);if(kr(te))return f?f(te,2):te()})):kr(e)?t?y=f?()=>f(e,2):e:y=()=>{if(w){Pf();try{w()}finally{Mf()}}const te=lf;lf=m;try{return f?f(e,3,[_]):e(_)}finally{lf=te}}:y=pu,t&&i){const te=y,ae=i===!0?1/0:i;y=()=>Fc(te(),ae)}const R=j1(),N=()=>{m.stop(),R&&R.active&&N1(R.effects,m)};if(o&&t){const te=t;t=(...ae)=>{te(...ae),N()}}let j=k?new Array(e.length).fill(s0):s0;const J=te=>{if(!(!(m.flags&1)||!m.dirty&&!te))if(t){const ae=m.run();if(i||M||(k?ae.some((le,xe)=>el(le,j[xe])):el(ae,j))){w&&w();const le=lf;lf=m;try{const xe=[ae,j===s0?void 0:k&&j[0]===s0?[]:j,_];f?f(t,3,xe):t(...xe),j=ae}finally{lf=le}}}else m.run()};return u&&u(J),m=new up(y),m.scheduler=s?()=>s(J,!1):J,_=te=>Mw(te,!1,m),w=m.onStop=()=>{const te=J0.get(m);if(te){if(f)f(te,4);else for(const ae of te)ae();J0.delete(m)}},t?r?J(!0):j=m.run():s?s(J.bind(null,!0),!0):m.run(),N.pause=m.pause.bind(m),N.resume=m.resume.bind(m),N.stop=N,N}function Fc(e,t=1/0,n){if(t<=0||!Ki(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Zs(e))Fc(e.value,t,n);else if(Qn(e))for(let r=0;r<e.length;r++)Fc(e[r],t,n);else if(oh(e)||Gh(e))e.forEach(r=>{Fc(r,t,n)});else if(Pg(e)){for(const r in e)Fc(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Fc(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Aw=[];function jP(e){Aw.push(e)}function zP(){Aw.pop()}function $P(e,t){}const UP={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},VP={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function ud(e,t,n,r){try{return r?e(...r):e()}catch(i){ah(i,t,n)}}function mu(e,t,n,r){if(kr(e)){const i=ud(e,t,n,r);return i&&O1(i)&&i.catch(o=>{ah(o,t,n)}),i}if(Qn(e)){const i=[];for(let o=0;o<e.length;o++)i.push(mu(e[o],t,n,r));return i}}function ah(e,t,n,r=!0){const i=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:s}=t&&t.appContext.config||ki;if(t){let u=t.parent;const f=t.proxy,d=`https://vuejs.org/error-reference/#runtime-${n}`;for(;u;){const m=u.ec;if(m){for(let y=0;y<m.length;y++)if(m[y](e,f,d)===!1)return}u=u.parent}if(o){Pf(),ud(o,null,10,[e,f,d]),Mf();return}}HP(e,n,i,r,s)}function HP(e,t,n,r=!0,i=!1){if(i)throw e;console.error(e)}const nl=[];let oc=-1;const Zh=[];let uf=null,Nh=0;const kw=Promise.resolve();let X0=null;function Ko(e){const t=X0||kw;return e?t.then(this?e.bind(this):e):t}function GP(e){let t=oc+1,n=nl.length;for(;t<n;){const r=t+n>>>1,i=nl[r],o=dp(i);o<e||o===e&&i.flags&2?t=r+1:n=r}return t}function q1(e){if(!(e.flags&1)){const t=dp(e),n=nl[nl.length-1];!n||!(e.flags&2)&&t>=dp(n)?nl.push(e):nl.splice(GP(t),0,e),e.flags|=1,Tw()}}function Tw(){X0||(X0=kw.then(Dw))}function hp(e){Qn(e)?Zh.push(...e):uf&&e.id===-1?uf.splice(Nh+1,0,e):e.flags&1||(Zh.push(e),e.flags|=1),Tw()}function R2(e,t,n=oc+1){for(;n<nl.length;n++){const r=nl[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;nl.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Q0(e){if(Zh.length){const t=[...new Set(Zh)].sort((n,r)=>dp(n)-dp(r));if(Zh.length=0,uf){uf.push(...t);return}for(uf=t,Nh=0;Nh<uf.length;Nh++){const n=uf[Nh];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}uf=null,Nh=0}}const dp=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Dw(e){try{for(oc=0;oc<nl.length;oc++){const t=nl[oc];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ud(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;oc<nl.length;oc++){const t=nl[oc];t&&(t.flags&=-2)}oc=-1,nl.length=0,Q0(),X0=null,(nl.length||Zh.length)&&Dw()}}let Oh,o0=[];function Bw(e,t){var n,r;Oh=e,Oh?(Oh.enabled=!0,o0.forEach(({event:i,args:o})=>Oh.emit(i,...o)),o0=[]):typeof window<"u"&&window.HTMLElement&&!((r=(n=window.navigator)==null?void 0:n.userAgent)!=null&&r.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(o=>{Bw(o,t)}),setTimeout(()=>{Oh||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,o0=[])},3e3)):o0=[]}let Ro=null,Rg=null;function pp(e){const t=Ro;return Ro=e,Rg=e&&e.type.__scopeId||null,t}function qP(e){Rg=e}function WP(){Rg=null}const ZP=e=>Gl;function Gl(e,t=Ro,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&Rv(-1);const o=pp(t);let s;try{s=e(...i)}finally{pp(o),r._d&&Rv(1)}return s};return r._n=!0,r._c=!0,r._d=!0,r}function In(e,t){if(Ro===null)return e;const n=Mp(Ro),r=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[o,s,u,f=ki]=t[i];o&&(kr(o)&&(o={mounted:o,updated:o}),o.deep&&Fc(s),r.push({dir:o,instance:n,value:s,oldValue:void 0,arg:u,modifiers:f}))}return e}function ac(e,t,n,r){const i=e.dirs,o=t&&t.dirs;for(let s=0;s<i.length;s++){const u=i[s];o&&(u.oldValue=o[s].value);let f=u.dir[r];f&&(Pf(),mu(f,n,8,[e.el,u,e,t]),Mf())}}const Nw=Symbol("_vte"),Ow=e=>e.__isTeleport,Zd=e=>e&&(e.disabled||e.disabled===""),F2=e=>e&&(e.defer||e.defer===""),j2=e=>typeof SVGElement<"u"&&e instanceof SVGElement,z2=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,kv=(e,t)=>{const n=e&&e.to;return ps(n)?t?t(n):null:n},Iw={name:"Teleport",__isTeleport:!0,process(e,t,n,r,i,o,s,u,f,d){const{mc:m,pc:y,pbc:w,o:{insert:_,querySelector:M,createText:k,createComment:R}}=d,N=Zd(t.props);let{shapeFlag:j,children:J,dynamicChildren:te}=t;if(e==null){const ae=t.el=k(""),le=t.anchor=k("");_(ae,n,r),_(le,n,r);const xe=(I,K)=>{j&16&&(i&&i.isCE&&(i.ce._teleportTarget=I),m(J,I,K,i,o,s,u,f))},G=()=>{const I=t.target=kv(t.props,M),K=Rw(I,t,k,_);I&&(s!=="svg"&&j2(I)?s="svg":s!=="mathml"&&z2(I)&&(s="mathml"),N||(xe(I,K),M0(t,!1)))};N&&(xe(n,le),M0(t,!0)),F2(t.props)?Oo(()=>{G(),t.el.__isMounted=!0},o):G()}else{if(F2(t.props)&&!e.el.__isMounted){Oo(()=>{Iw.process(e,t,n,r,i,o,s,u,f,d),delete e.el.__isMounted},o);return}t.el=e.el,t.targetStart=e.targetStart;const ae=t.anchor=e.anchor,le=t.target=e.target,xe=t.targetAnchor=e.targetAnchor,G=Zd(e.props),I=G?n:le,K=G?ae:xe;if(s==="svg"||j2(le)?s="svg":(s==="mathml"||z2(le))&&(s="mathml"),te?(w(e.dynamicChildren,te,I,i,o,s,u),ny(e,t,!0)):f||y(e,t,I,K,i,o,s,u,!1),N)G?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):a0(t,n,ae,d,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const $=t.target=kv(t.props,M);$&&a0(t,$,null,d,0)}else G&&a0(t,le,xe,d,1);M0(t,N)}},remove(e,t,n,{um:r,o:{remove:i}},o){const{shapeFlag:s,children:u,anchor:f,targetStart:d,targetAnchor:m,target:y,props:w}=e;if(y&&(i(d),i(m)),o&&i(f),s&16){const _=o||!Zd(w);for(let M=0;M<u.length;M++){const k=u[M];r(k,t,n,_,!!k.dynamicChildren)}}},move:a0,hydrate:KP};function a0(e,t,n,{o:{insert:r},m:i},o=2){o===0&&r(e.targetAnchor,t,n);const{el:s,anchor:u,shapeFlag:f,children:d,props:m}=e,y=o===2;if(y&&r(s,t,n),(!y||Zd(m))&&f&16)for(let w=0;w<d.length;w++)i(d[w],t,n,2);y&&r(u,t,n)}function KP(e,t,n,r,i,o,{o:{nextSibling:s,parentNode:u,querySelector:f,insert:d,createText:m}},y){const w=t.target=kv(t.props,f);if(w){const _=Zd(t.props),M=w._lpa||w.firstChild;if(t.shapeFlag&16)if(_)t.anchor=y(s(e),t,u(e),n,r,i,o),t.targetStart=M,t.targetAnchor=M&&s(M);else{t.anchor=s(e);let k=M;for(;k;){if(k&&k.nodeType===8){if(k.data==="teleport start anchor")t.targetStart=k;else if(k.data==="teleport anchor"){t.targetAnchor=k,w._lpa=t.targetAnchor&&s(t.targetAnchor);break}}k=s(k)}t.targetAnchor||Rw(w,t,m,d),y(M&&s(M),t,w,n,r,i,o)}M0(t,_)}return t.anchor&&s(t.anchor)}const P0=Iw;function M0(e,t){const n=e.ctx;if(n&&n.ut){let r,i;for(t?(r=e.el,i=e.anchor):(r=e.targetStart,i=e.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function Rw(e,t,n,r){const i=t.targetStart=n(""),o=t.targetAnchor=n("");return i[Nw]=o,e&&(r(i,e),r(o,e)),o}const cf=Symbol("_leaveCb"),l0=Symbol("_enterCb");function W1(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Fo(()=>{e.isMounted=!0}),cd(()=>{e.isUnmounting=!0}),e}const au=[Function,Array],Z1={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:au,onEnter:au,onAfterEnter:au,onEnterCancelled:au,onBeforeLeave:au,onLeave:au,onAfterLeave:au,onLeaveCancelled:au,onBeforeAppear:au,onAppear:au,onAfterAppear:au,onAppearCancelled:au},Fw=e=>{const t=e.subTree;return t.component?Fw(t.component):t},YP={name:"BaseTransition",props:Z1,setup(e,{slots:t}){const n=yu(),r=W1();return()=>{const i=t.default&&Fg(t.default(),!0);if(!i||!i.length)return;const o=jw(i),s=Ai(e),{mode:u}=s;if(r.isLeaving)return zm(o);const f=$2(o);if(!f)return zm(o);let d=ed(f,s,r,n,y=>d=y);f.type!==ko&&$c(f,d);let m=n.subTree&&$2(n.subTree);if(m&&m.type!==ko&&!ju(f,m)&&Fw(n).type!==ko){let y=ed(m,s,r,n);if($c(m,y),u==="out-in"&&f.type!==ko)return r.isLeaving=!0,y.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete y.afterLeave,m=void 0},zm(o);u==="in-out"&&f.type!==ko?y.delayLeave=(w,_,M)=>{const k=$w(r,m);k[String(m.key)]=m,w[cf]=()=>{_(),w[cf]=void 0,delete d.delayedLeave,m=void 0},d.delayedLeave=()=>{M(),delete d.delayedLeave,m=void 0}}:m=void 0}else m&&(m=void 0);return o}}};function jw(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==ko){t=n;break}}return t}const zw=YP;function $w(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function ed(e,t,n,r,i){const{appear:o,mode:s,persisted:u=!1,onBeforeEnter:f,onEnter:d,onAfterEnter:m,onEnterCancelled:y,onBeforeLeave:w,onLeave:_,onAfterLeave:M,onLeaveCancelled:k,onBeforeAppear:R,onAppear:N,onAfterAppear:j,onAppearCancelled:J}=t,te=String(e.key),ae=$w(n,e),le=(I,K)=>{I&&mu(I,r,9,K)},xe=(I,K)=>{const $=K[1];le(I,K),Qn(I)?I.every(O=>O.length<=1)&&$():I.length<=1&&$()},G={mode:s,persisted:u,beforeEnter(I){let K=f;if(!n.isMounted)if(o)K=R||f;else return;I[cf]&&I[cf](!0);const $=ae[te];$&&ju(e,$)&&$.el[cf]&&$.el[cf](),le(K,[I])},enter(I){let K=d,$=m,O=y;if(!n.isMounted)if(o)K=N||d,$=j||m,O=J||y;else return;let z=!1;const V=I[l0]=W=>{z||(z=!0,W?le(O,[I]):le($,[I]),G.delayedLeave&&G.delayedLeave(),I[l0]=void 0)};K?xe(K,[I,V]):V()},leave(I,K){const $=String(e.key);if(I[l0]&&I[l0](!0),n.isUnmounting)return K();le(w,[I]);let O=!1;const z=I[cf]=V=>{O||(O=!0,K(),V?le(k,[I]):le(M,[I]),I[cf]=void 0,ae[$]===e&&delete ae[$])};ae[$]=e,_?xe(_,[I,z]):z()},clone(I){const K=ed(I,t,n,r,i);return i&&i(K),K}};return G}function zm(e){if(Ep(e))return e=vc(e),e.children=null,e}function $2(e){if(!Ep(e))return Ow(e.type)&&e.children?jw(e.children):e;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&kr(n.default))return n.default()}}function $c(e,t){e.shapeFlag&6&&e.component?(e.transition=t,$c(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Fg(e,t=!1,n){let r=[],i=0;for(let o=0;o<e.length;o++){let s=e[o];const u=n==null?s.key:String(n)+String(s.key!=null?s.key:o);s.type===Rn?(s.patchFlag&128&&i++,r=r.concat(Fg(s.children,t,u))):(t||s.type!==ko)&&r.push(u!=null?vc(s,{key:u}):s)}if(i>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function oo(e,t){return kr(e)?os({name:e.name},t,{setup:e}):e}function JP(){const e=yu();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function K1(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function XP(e){const t=yu(),n=H1(null);if(t){const i=t.refs===ki?t.refs={}:t.refs;Object.defineProperty(i,e,{enumerable:!0,get:()=>n.value,set:o=>n.value=o})}return n}function gp(e,t,n,r,i=!1){if(Qn(e)){e.forEach((M,k)=>gp(M,t&&(Qn(t)?t[k]:t),n,r,i));return}if(yf(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&gp(e,t,n,r.component.subTree);return}const o=r.shapeFlag&4?Mp(r.component):r.el,s=i?null:o,{i:u,r:f}=e,d=t&&t.r,m=u.refs===ki?u.refs={}:u.refs,y=u.setupState,w=Ai(y),_=y===ki?()=>!1:M=>Vi(w,M);if(d!=null&&d!==f&&(ps(d)?(m[d]=null,_(d)&&(y[d]=null)):Zs(d)&&(d.value=null)),kr(f))ud(f,u,12,[s,m]);else{const M=ps(f),k=Zs(f);if(M||k){const R=()=>{if(e.f){const N=M?_(f)?y[f]:m[f]:f.value;i?Qn(N)&&N1(N,o):Qn(N)?N.includes(o)||N.push(o):M?(m[f]=[o],_(f)&&(y[f]=m[f])):(f.value=[o],e.k&&(m[e.k]=f.value))}else M?(m[f]=s,_(f)&&(y[f]=s)):k&&(f.value=s,e.k&&(m[e.k]=s))};s?(R.id=-1,Oo(R,n)):R()}}}let U2=!1;const Eh=()=>{U2||(console.error("Hydration completed but contains mismatches."),U2=!0)},QP=e=>e.namespaceURI.includes("svg")&&e.tagName!=="foreignObject",e6=e=>e.namespaceURI.includes("MathML"),u0=e=>{if(e.nodeType===1){if(QP(e))return"svg";if(e6(e))return"mathml"}},$h=e=>e.nodeType===8;function t6(e){const{mt:t,p:n,o:{patchProp:r,createText:i,nextSibling:o,parentNode:s,remove:u,insert:f,createComment:d}}=e,m=(J,te)=>{if(!te.hasChildNodes()){n(null,J,te),Q0(),te._vnode=J;return}y(te.firstChild,J,null,null,null),Q0(),te._vnode=J},y=(J,te,ae,le,xe,G=!1)=>{G=G||!!te.dynamicChildren;const I=$h(J)&&J.data==="[",K=()=>k(J,te,ae,le,xe,I),{type:$,ref:O,shapeFlag:z,patchFlag:V}=te;let W=J.nodeType;te.el=J,V===-2&&(G=!1,te.dynamicChildren=null);let q=null;switch($){case _f:W!==3?te.children===""?(f(te.el=i(""),s(J),J),q=J):q=K():(J.data!==te.children&&(Eh(),J.data=te.children),q=o(J));break;case ko:j(J)?(q=o(J),N(te.el=J.content.firstChild,J,ae)):W!==8||I?q=K():q=o(J);break;case Qf:if(I&&(J=o(J),W=J.nodeType),W===1||W===3){q=J;const X=!te.children.length;for(let Y=0;Y<te.staticCount;Y++)X&&(te.children+=q.nodeType===1?q.outerHTML:q.data),Y===te.staticCount-1&&(te.anchor=q),q=o(q);return I?o(q):q}else K();break;case Rn:I?q=M(J,te,ae,le,xe,G):q=K();break;default:if(z&1)(W!==1||te.type.toLowerCase()!==J.tagName.toLowerCase())&&!j(J)?q=K():q=w(J,te,ae,le,xe,G);else if(z&6){te.slotScopeIds=xe;const X=s(J);if(I?q=R(J):$h(J)&&J.data==="teleport start"?q=R(J,J.data,"teleport end"):q=o(J),t(te,X,null,ae,le,u0(X),G),yf(te)&&!te.type.__asyncResolved){let Y;I?(Y=ci(Rn),Y.anchor=q?q.previousSibling:X.lastChild):Y=J.nodeType===3?di(""):ci("div"),Y.el=J,te.component.subTree=Y}}else z&64?W!==8?q=K():q=te.type.hydrate(J,te,ae,le,xe,G,e,_):z&128&&(q=te.type.hydrate(J,te,ae,le,u0(s(J)),xe,G,e,y))}return O!=null&&gp(O,null,le,te),q},w=(J,te,ae,le,xe,G)=>{G=G||!!te.dynamicChildren;const{type:I,props:K,patchFlag:$,shapeFlag:O,dirs:z,transition:V}=te,W=I==="input"||I==="option";if(W||$!==-1){z&&ac(te,null,ae,"created");let q=!1;if(j(J)){q=g4(null,V)&&ae&&ae.vnode.props&&ae.vnode.props.appear;const Y=J.content.firstChild;q&&V.beforeEnter(Y),N(Y,J,ae),te.el=J=Y}if(O&16&&!(K&&(K.innerHTML||K.textContent))){let Y=_(J.firstChild,te,J,ae,le,xe,G);for(;Y;){c0(J,1)||Eh();const me=Y;Y=Y.nextSibling,u(me)}}else if(O&8){let Y=te.children;Y[0]===`
`&&(J.tagName==="PRE"||J.tagName==="TEXTAREA")&&(Y=Y.slice(1)),J.textContent!==Y&&(c0(J,0)||Eh(),J.textContent=te.children)}if(K){if(W||!G||$&48){const Y=J.tagName.includes("-");for(const me in K)(W&&(me.endsWith("value")||me==="indeterminate")||Sp(me)&&!qh(me)||me[0]==="."||Y)&&r(J,me,null,K[me],void 0,ae)}else if(K.onClick)r(J,"onClick",null,K.onClick,void 0,ae);else if($&4&&hc(K.style))for(const Y in K.style)K.style[Y]}let X;(X=K&&K.onVnodeBeforeMount)&&wl(X,ae,te),z&&ac(te,null,ae,"beforeMount"),((X=K&&K.onVnodeMounted)||z||q)&&S4(()=>{X&&wl(X,ae,te),q&&V.enter(J),z&&ac(te,null,ae,"mounted")},le)}return J.nextSibling},_=(J,te,ae,le,xe,G,I)=>{I=I||!!te.dynamicChildren;const K=te.children,$=K.length;for(let O=0;O<$;O++){const z=I?K[O]:K[O]=Sl(K[O]),V=z.type===_f;J?(V&&!I&&O+1<$&&Sl(K[O+1]).type===_f&&(f(i(J.data.slice(z.children.length)),ae,o(J)),J.data=z.children),J=y(J,z,le,xe,G,I)):V&&!z.children?f(z.el=i(""),ae):(c0(ae,1)||Eh(),n(null,z,ae,null,le,xe,u0(ae),G))}return J},M=(J,te,ae,le,xe,G)=>{const{slotScopeIds:I}=te;I&&(xe=xe?xe.concat(I):I);const K=s(J),$=_(o(J),te,K,ae,le,xe,G);return $&&$h($)&&$.data==="]"?o(te.anchor=$):(Eh(),f(te.anchor=d("]"),K,$),$)},k=(J,te,ae,le,xe,G)=>{if(c0(J.parentElement,1)||Eh(),te.el=null,G){const $=R(J);for(;;){const O=o(J);if(O&&O!==$)u(O);else break}}const I=o(J),K=s(J);return u(J),n(null,te,K,I,ae,le,u0(K),xe),ae&&(ae.vnode.el=te.el,Ug(ae,te.el)),I},R=(J,te="[",ae="]")=>{let le=0;for(;J;)if(J=o(J),J&&$h(J)&&(J.data===te&&le++,J.data===ae)){if(le===0)return o(J);le--}return J},N=(J,te,ae)=>{const le=te.parentNode;le&&le.replaceChild(J,te);let xe=ae;for(;xe;)xe.vnode.el===te&&(xe.vnode.el=xe.subTree.el=J),xe=xe.parent},j=J=>J.nodeType===1&&J.tagName==="TEMPLATE";return[m,y]}const V2="data-allow-mismatch",n6={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function c0(e,t){if(t===0||t===1)for(;e&&!e.hasAttribute(V2);)e=e.parentElement;const n=e&&e.getAttribute(V2);if(n==null)return!1;if(n==="")return!0;{const r=n.split(",");return t===0&&r.includes("children")?!0:n.split(",").includes(n6[t])}}const r6=Ag().requestIdleCallback||(e=>setTimeout(e,1)),i6=Ag().cancelIdleCallback||(e=>clearTimeout(e)),s6=(e=1e4)=>t=>{const n=r6(t,{timeout:e});return()=>i6(n)};function o6(e){const{top:t,left:n,bottom:r,right:i}=e.getBoundingClientRect(),{innerHeight:o,innerWidth:s}=window;return(t>0&&t<o||r>0&&r<o)&&(n>0&&n<s||i>0&&i<s)}const a6=e=>(t,n)=>{const r=new IntersectionObserver(i=>{for(const o of i)if(o.isIntersecting){r.disconnect(),t();break}},e);return n(i=>{if(i instanceof Element){if(o6(i))return t(),r.disconnect(),!1;r.observe(i)}}),()=>r.disconnect()},l6=e=>t=>{if(e){const n=matchMedia(e);if(n.matches)t();else return n.addEventListener("change",t,{once:!0}),()=>n.removeEventListener("change",t)}},u6=(e=[])=>(t,n)=>{ps(e)&&(e=[e]);let r=!1;const i=s=>{r||(r=!0,o(),t(),s.target.dispatchEvent(new s.constructor(s.type,s)))},o=()=>{n(s=>{for(const u of e)s.removeEventListener(u,i)})};return n(s=>{for(const u of e)s.addEventListener(u,i,{once:!0})}),o};function c6(e,t){if($h(e)&&e.data==="["){let n=1,r=e.nextSibling;for(;r;){if(r.nodeType===1){if(t(r)===!1)break}else if($h(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else t(e)}const yf=e=>!!e.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function f6(e){kr(e)&&(e={loader:e});const{loader:t,loadingComponent:n,errorComponent:r,delay:i=200,hydrate:o,timeout:s,suspensible:u=!0,onError:f}=e;let d=null,m,y=0;const w=()=>(y++,d=null,_()),_=()=>{let M;return d||(M=d=t().catch(k=>{if(k=k instanceof Error?k:new Error(String(k)),f)return new Promise((R,N)=>{f(k,()=>R(w()),()=>N(k),y+1)});throw k}).then(k=>M!==d&&d?d:(k&&(k.__esModule||k[Symbol.toStringTag]==="Module")&&(k=k.default),m=k,k)))};return oo({name:"AsyncComponentWrapper",__asyncLoader:_,__asyncHydrate(M,k,R){const N=o?()=>{const j=o(R,J=>c6(M,J));j&&(k.bum||(k.bum=[])).push(j)}:R;m?N():_().then(()=>!k.isUnmounted&&N())},get __asyncResolved(){return m},setup(){const M=Io;if(K1(M),m)return()=>$m(m,M);const k=J=>{d=null,ah(J,M,13,!r)};if(u&&M.suspense||td)return _().then(J=>()=>$m(J,M)).catch(J=>(k(J),()=>r?ci(r,{error:J}):null));const R=Rt(!1),N=Rt(),j=Rt(!!i);return i&&setTimeout(()=>{j.value=!1},i),s!=null&&setTimeout(()=>{if(!R.value&&!N.value){const J=new Error(`Async component timed out after ${s}ms.`);k(J),N.value=J}},s),_().then(()=>{R.value=!0,M.parent&&Ep(M.parent.vnode)&&M.parent.update()}).catch(J=>{k(J),N.value=J}),()=>{if(R.value&&m)return $m(m,M);if(N.value&&r)return ci(r,{error:N.value});if(n&&!j.value)return ci(n)}}})}function $m(e,t){const{ref:n,props:r,children:i,ce:o}=t.vnode,s=ci(e,r,i);return s.ref=n,s.ce=o,delete t.vnode.ce,s}const Ep=e=>e.type.__isKeepAlive,h6={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=yu(),r=n.ctx;if(!r.renderer)return()=>{const j=t.default&&t.default();return j&&j.length===1?j[0]:j};const i=new Map,o=new Set;let s=null;const u=n.suspense,{renderer:{p:f,m:d,um:m,o:{createElement:y}}}=r,w=y("div");r.activate=(j,J,te,ae,le)=>{const xe=j.component;d(j,J,te,0,u),f(xe.vnode,j,J,te,xe,u,ae,j.slotScopeIds,le),Oo(()=>{xe.isDeactivated=!1,xe.a&&Wh(xe.a);const G=j.props&&j.props.onVnodeMounted;G&&wl(G,xe.parent,j)},u)},r.deactivate=j=>{const J=j.component;tg(J.m),tg(J.a),d(j,w,null,1,u),Oo(()=>{J.da&&Wh(J.da);const te=j.props&&j.props.onVnodeUnmounted;te&&wl(te,J.parent,j),J.isDeactivated=!0},u)};function _(j){Um(j),m(j,n,u,!0)}function M(j){i.forEach((J,te)=>{const ae=Uv(J.type);ae&&!j(ae)&&k(te)})}function k(j){const J=i.get(j);J&&(!s||!ju(J,s))?_(J):s&&Um(s),i.delete(j),o.delete(j)}bs(()=>[e.include,e.exclude],([j,J])=>{j&&M(te=>Od(j,te)),J&&M(te=>!Od(J,te))},{flush:"post",deep:!0});let R=null;const N=()=>{R!=null&&(ng(n.subTree.type)?Oo(()=>{i.set(R,f0(n.subTree))},n.subTree.suspense):i.set(R,f0(n.subTree)))};return Fo(N),zg(N),cd(()=>{i.forEach(j=>{const{subTree:J,suspense:te}=n,ae=f0(J);if(j.type===ae.type&&j.key===ae.key){Um(ae);const le=ae.component.da;le&&Oo(le,te);return}_(j)})}),()=>{if(R=null,!t.default)return s=null;const j=t.default(),J=j[0];if(j.length>1)return s=null,j;if(!Uc(J)||!(J.shapeFlag&4)&&!(J.shapeFlag&128))return s=null,J;let te=f0(J);if(te.type===ko)return s=null,te;const ae=te.type,le=Uv(yf(te)?te.type.__asyncResolved||{}:ae),{include:xe,exclude:G,max:I}=e;if(xe&&(!le||!Od(xe,le))||G&&le&&Od(G,le))return te.shapeFlag&=-257,s=te,J;const K=te.key==null?ae:te.key,$=i.get(K);return te.el&&(te=vc(te),J.shapeFlag&128&&(J.ssContent=te)),R=K,$?(te.el=$.el,te.component=$.component,te.transition&&$c(te,te.transition),te.shapeFlag|=512,o.delete(K),o.add(K)):(o.add(K),I&&o.size>parseInt(I,10)&&k(o.values().next().value)),te.shapeFlag|=256,s=te,ng(J.type)?J:te}}},d6=h6;function Od(e,t){return Qn(e)?e.some(n=>Od(n,t)):ps(e)?e.split(",").includes(t):VE(e)?(e.lastIndex=0,e.test(t)):!1}function Uw(e,t){Hw(e,"a",t)}function Vw(e,t){Hw(e,"da",t)}function Hw(e,t,n=Io){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(jg(t,r,n),n){let i=n.parent;for(;i&&i.parent;)Ep(i.parent.vnode)&&p6(r,t,n,i),i=i.parent}}function p6(e,t,n,r){const i=jg(t,e,r,!0);mc(()=>{N1(r[t],i)},n)}function Um(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function f0(e){return e.shapeFlag&128?e.ssContent:e}function jg(e,t,n=Io,r=!1){if(n){const i=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...s)=>{Pf();const u=ih(n),f=mu(t,n,e,s);return u(),Mf(),f});return r?i.unshift(o):i.push(o),o}}const Gc=e=>(t,n=Io)=>{(!td||e==="sp")&&jg(e,(...r)=>t(...r),n)},Gw=Gc("bm"),Fo=Gc("m"),Y1=Gc("bu"),zg=Gc("u"),cd=Gc("bum"),mc=Gc("um"),qw=Gc("sp"),Ww=Gc("rtg"),Zw=Gc("rtc");function Kw(e,t=Io){jg("ec",e,t)}const J1="components",g6="directives";function Yw(e,t){return X1(J1,e,!0,t)||e}const Jw=Symbol.for("v-ndc");function m6(e){return ps(e)?X1(J1,e,!1)||e:e||Jw}function v6(e){return X1(g6,e)}function X1(e,t,n=!0,r=!1){const i=Ro||Io;if(i){const o=i.type;if(e===J1){const u=Uv(o,!1);if(u&&(u===t||u===pa(t)||u===Cp(pa(t))))return o}const s=H2(i[e]||o[e],t)||H2(i.appContext[e],t);return!s&&r?o:s}}function H2(e,t){return e&&(e[t]||e[pa(t)]||e[Cp(pa(t))])}function Nr(e,t,n,r){let i;const o=n&&n[r],s=Qn(e);if(s||ps(e)){const u=s&&hc(e);let f=!1;u&&(f=!Wl(e),e=Dg(e)),i=new Array(e.length);for(let d=0,m=e.length;d<m;d++)i[d]=t(f?Oa(e[d]):e[d],d,void 0,o&&o[d])}else if(typeof e=="number"){i=new Array(e);for(let u=0;u<e;u++)i[u]=t(u+1,u,void 0,o&&o[u])}else if(Ki(e))if(e[Symbol.iterator])i=Array.from(e,(u,f)=>t(u,f,void 0,o&&o[f]));else{const u=Object.keys(e);i=new Array(u.length);for(let f=0,d=u.length;f<d;f++){const m=u[f];i[f]=t(e[m],m,f,o&&o[f])}}else i=[];return n&&(n[r]=i),i}function Xw(e,t){for(let n=0;n<t.length;n++){const r=t[n];if(Qn(r))for(let i=0;i<r.length;i++)e[r[i].name]=r[i].fn;else r&&(e[r.name]=r.key?(...i)=>{const o=r.fn(...i);return o&&(o.key=r.key),o}:r.fn)}return e}function y6(e,t,n={},r,i){if(Ro.ce||Ro.parent&&yf(Ro.parent)&&Ro.parent.ce)return t!=="default"&&(n.name=t),Ue(),za(Rn,null,[ci("slot",n,r&&r())],64);let o=e[t];o&&o._c&&(o._d=!1),Ue();const s=o&&Q1(o(n)),u=n.key||s&&s.key,f=za(Rn,{key:(u&&!Uu(u)?u:`_${t}`)+(!s&&r?"_fb":"")},s||(r?r():[]),s&&e._===1?64:-2);return!i&&f.scopeId&&(f.slotScopeIds=[f.scopeId+"-s"]),o&&o._c&&(o._d=!0),f}function Q1(e){return e.some(t=>Uc(t)?!(t.type===ko||t.type===Rn&&!Q1(t.children)):!0)?e:null}function _6(e,t){const n={};for(const r in e)n[t&&/[A-Z]/.test(r)?`on:${r}`:Gd(r)]=e[r];return n}const Tv=e=>e?T4(e)?Mp(e):Tv(e.parent):null,Kd=os(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Tv(e.parent),$root:e=>Tv(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ey(e),$forceUpdate:e=>e.f||(e.f=()=>{q1(e.update)}),$nextTick:e=>e.n||(e.n=Ko.bind(e.proxy)),$watch:e=>K6.bind(e)}),Vm=(e,t)=>e!==ki&&!e.__isScriptSetup&&Vi(e,t),Dv={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:o,accessCache:s,type:u,appContext:f}=e;let d;if(t[0]!=="$"){const _=s[t];if(_!==void 0)switch(_){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return o[t]}else{if(Vm(r,t))return s[t]=1,r[t];if(i!==ki&&Vi(i,t))return s[t]=2,i[t];if((d=e.propsOptions[0])&&Vi(d,t))return s[t]=3,o[t];if(n!==ki&&Vi(n,t))return s[t]=4,n[t];Bv&&(s[t]=0)}}const m=Kd[t];let y,w;if(m)return t==="$attrs"&&Na(e.attrs,"get",""),m(e);if((y=u.__cssModules)&&(y=y[t]))return y;if(n!==ki&&Vi(n,t))return s[t]=4,n[t];if(w=f.config.globalProperties,Vi(w,t))return w[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:o}=e;return Vm(i,t)?(i[t]=n,!0):r!==ki&&Vi(r,t)?(r[t]=n,!0):Vi(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:o}},s){let u;return!!n[s]||e!==ki&&Vi(e,s)||Vm(t,s)||(u=o[0])&&Vi(u,s)||Vi(r,s)||Vi(Kd,s)||Vi(i.config.globalProperties,s)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Vi(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}},b6=os({},Dv,{get(e,t){if(t!==Symbol.unscopables)return Dv.get(e,t,e)},has(e,t){return t[0]!=="_"&&!ZE(t)}});function w6(){return null}function x6(){return null}function L6(e){}function S6(e){}function C6(){return null}function E6(){}function P6(e,t){return null}function M6(){return Qw().slots}function A6(){return Qw().attrs}function Qw(){const e=yu();return e.setupContext||(e.setupContext=N4(e))}function mp(e){return Qn(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}function k6(e,t){const n=mp(e);for(const r in t){if(r.startsWith("__skip"))continue;let i=n[r];i?Qn(i)||kr(i)?i=n[r]={type:i,default:t[r]}:i.default=t[r]:i===null&&(i=n[r]={default:t[r]}),i&&t[`__skip_${r}`]&&(i.skipFactory=!0)}return n}function T6(e,t){return!e||!t?e||t:Qn(e)&&Qn(t)?e.concat(t):os({},mp(e),mp(t))}function D6(e,t){const n={};for(const r in e)t.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>e[r]});return n}function B6(e){const t=yu();let n=e();return jv(),O1(n)&&(n=n.catch(r=>{throw ih(t),r})),[n,()=>ih(t)]}let Bv=!0;function N6(e){const t=ey(e),n=e.proxy,r=e.ctx;Bv=!1,t.beforeCreate&&G2(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:s,watch:u,provide:f,inject:d,created:m,beforeMount:y,mounted:w,beforeUpdate:_,updated:M,activated:k,deactivated:R,beforeDestroy:N,beforeUnmount:j,destroyed:J,unmounted:te,render:ae,renderTracked:le,renderTriggered:xe,errorCaptured:G,serverPrefetch:I,expose:K,inheritAttrs:$,components:O,directives:z,filters:V}=t;if(d&&O6(d,r,null),s)for(const X in s){const Y=s[X];kr(Y)&&(r[X]=Y.bind(n))}if(i){const X=i.call(n,n);Ki(X)&&(e.data=Yl(X))}if(Bv=!0,o)for(const X in o){const Y=o[X],me=kr(Y)?Y.bind(n,n):kr(Y.get)?Y.get.bind(n,n):pu,Se=!kr(Y)&&kr(Y.set)?Y.set.bind(n):pu,Re=gr({get:me,set:Se});Object.defineProperty(r,X,{enumerable:!0,configurable:!0,get:()=>Re.value,set:T=>Re.value=T})}if(u)for(const X in u)e4(u[X],r,n,X);if(f){const X=kr(f)?f.call(n):f;Reflect.ownKeys(X).forEach(Y=>{Yd(Y,X[Y])})}m&&G2(m,e,"c");function q(X,Y){Qn(Y)?Y.forEach(me=>X(me.bind(n))):Y&&X(Y.bind(n))}if(q(Gw,y),q(Fo,w),q(Y1,_),q(zg,M),q(Uw,k),q(Vw,R),q(Kw,G),q(Zw,le),q(Ww,xe),q(cd,j),q(mc,te),q(qw,I),Qn(K))if(K.length){const X=e.exposed||(e.exposed={});K.forEach(Y=>{Object.defineProperty(X,Y,{get:()=>n[Y],set:me=>n[Y]=me})})}else e.exposed||(e.exposed={});ae&&e.render===pu&&(e.render=ae),$!=null&&(e.inheritAttrs=$),O&&(e.components=O),z&&(e.directives=z),I&&K1(e)}function O6(e,t,n=pu){Qn(e)&&(e=Nv(e));for(const r in e){const i=e[r];let o;Ki(i)?"default"in i?o=Zl(i.from||r,i.default,!0):o=Zl(i.from||r):o=Zl(i),Zs(o)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:s=>o.value=s}):t[r]=o}}function G2(e,t,n){mu(Qn(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function e4(e,t,n,r){let i=r.includes(".")?b4(n,r):()=>n[r];if(ps(e)){const o=t[e];kr(o)&&bs(i,o)}else if(kr(e))bs(i,e.bind(n));else if(Ki(e))if(Qn(e))e.forEach(o=>e4(o,t,n,r));else{const o=kr(e.handler)?e.handler.bind(n):t[e.handler];kr(o)&&bs(i,o,e)}}function ey(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:s}}=e.appContext,u=o.get(t);let f;return u?f=u:!i.length&&!n&&!r?f=t:(f={},i.length&&i.forEach(d=>eg(f,d,s,!0)),eg(f,t,s)),Ki(t)&&o.set(t,f),f}function eg(e,t,n,r=!1){const{mixins:i,extends:o}=t;o&&eg(e,o,n,!0),i&&i.forEach(s=>eg(e,s,n,!0));for(const s in t)if(!(r&&s==="expose")){const u=I6[s]||n&&n[s];e[s]=u?u(e[s],t[s]):t[s]}return e}const I6={data:q2,props:W2,emits:W2,methods:Id,computed:Id,beforeCreate:Ka,created:Ka,beforeMount:Ka,mounted:Ka,beforeUpdate:Ka,updated:Ka,beforeDestroy:Ka,beforeUnmount:Ka,destroyed:Ka,unmounted:Ka,activated:Ka,deactivated:Ka,errorCaptured:Ka,serverPrefetch:Ka,components:Id,directives:Id,watch:F6,provide:q2,inject:R6};function q2(e,t){return t?e?function(){return os(kr(e)?e.call(this,this):e,kr(t)?t.call(this,this):t)}:t:e}function R6(e,t){return Id(Nv(e),Nv(t))}function Nv(e){if(Qn(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Ka(e,t){return e?[...new Set([].concat(e,t))]:t}function Id(e,t){return e?os(Object.create(null),e,t):t}function W2(e,t){return e?Qn(e)&&Qn(t)?[...new Set([...e,...t])]:os(Object.create(null),mp(e),mp(t??{})):t}function F6(e,t){if(!e)return t;if(!t)return e;const n=os(Object.create(null),e);for(const r in t)n[r]=Ka(e[r],t[r]);return n}function t4(){return{app:null,config:{isNativeTag:$E,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let j6=0;function z6(e,t){return function(r,i=null){kr(r)||(r=os({},r)),i!=null&&!Ki(i)&&(i=null);const o=t4(),s=new WeakSet,u=[];let f=!1;const d=o.app={_uid:j6++,_component:r,_props:i,_container:null,_context:o,_instance:null,version:I4,get config(){return o.config},set config(m){},use(m,...y){return s.has(m)||(m&&kr(m.install)?(s.add(m),m.install(d,...y)):kr(m)&&(s.add(m),m(d,...y))),d},mixin(m){return o.mixins.includes(m)||o.mixins.push(m),d},component(m,y){return y?(o.components[m]=y,d):o.components[m]},directive(m,y){return y?(o.directives[m]=y,d):o.directives[m]},mount(m,y,w){if(!f){const _=d._ceVNode||ci(r,i);return _.appContext=o,w===!0?w="svg":w===!1&&(w=void 0),y&&t?t(_,m):e(_,m,w),f=!0,d._container=m,m.__vue_app__=d,Mp(_.component)}},onUnmount(m){u.push(m)},unmount(){f&&(mu(u,d._instance,16),e(null,d._container),delete d._container.__vue_app__)},provide(m,y){return o.provides[m]=y,d},runWithContext(m){const y=Xf;Xf=d;try{return m()}finally{Xf=y}}};return d}}let Xf=null;function Yd(e,t){if(Io){let n=Io.provides;const r=Io.parent&&Io.parent.provides;r===n&&(n=Io.provides=Object.create(r)),n[e]=t}}function Zl(e,t,n=!1){const r=Io||Ro;if(r||Xf){const i=Xf?Xf._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&kr(t)?t.call(r&&r.proxy):t}}function n4(){return!!(Io||Ro||Xf)}const r4={},i4=()=>Object.create(r4),s4=e=>Object.getPrototypeOf(e)===r4;function $6(e,t,n,r=!1){const i={},o=i4();e.propsDefaults=Object.create(null),o4(e,t,i,o);for(const s in e.propsOptions[0])s in i||(i[s]=void 0);n?e.props=r?i:V1(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function U6(e,t,n,r){const{props:i,attrs:o,vnode:{patchFlag:s}}=e,u=Ai(i),[f]=e.propsOptions;let d=!1;if((r||s>0)&&!(s&16)){if(s&8){const m=e.vnode.dynamicProps;for(let y=0;y<m.length;y++){let w=m[y];if($g(e.emitsOptions,w))continue;const _=t[w];if(f)if(Vi(o,w))_!==o[w]&&(o[w]=_,d=!0);else{const M=pa(w);i[M]=Ov(f,u,M,_,e,!1)}else _!==o[w]&&(o[w]=_,d=!0)}}}else{o4(e,t,i,o)&&(d=!0);let m;for(const y in u)(!t||!Vi(t,y)&&((m=Cl(y))===y||!Vi(t,m)))&&(f?n&&(n[y]!==void 0||n[m]!==void 0)&&(i[y]=Ov(f,u,y,void 0,e,!0)):delete i[y]);if(o!==u)for(const y in o)(!t||!Vi(t,y))&&(delete o[y],d=!0)}d&&Rc(e.attrs,"set","")}function o4(e,t,n,r){const[i,o]=e.propsOptions;let s=!1,u;if(t)for(let f in t){if(qh(f))continue;const d=t[f];let m;i&&Vi(i,m=pa(f))?!o||!o.includes(m)?n[m]=d:(u||(u={}))[m]=d:$g(e.emitsOptions,f)||(!(f in r)||d!==r[f])&&(r[f]=d,s=!0)}if(o){const f=Ai(n),d=u||ki;for(let m=0;m<o.length;m++){const y=o[m];n[y]=Ov(i,f,y,d[y],e,!Vi(d,y))}}return s}function Ov(e,t,n,r,i,o){const s=e[n];if(s!=null){const u=Vi(s,"default");if(u&&r===void 0){const f=s.default;if(s.type!==Function&&!s.skipFactory&&kr(f)){const{propsDefaults:d}=i;if(n in d)r=d[n];else{const m=ih(i);r=d[n]=f.call(null,t),m()}}else r=f;i.ce&&i.ce._setProp(n,r)}s[0]&&(o&&!u?r=!1:s[1]&&(r===""||r===Cl(n))&&(r=!0))}return r}const V6=new WeakMap;function a4(e,t,n=!1){const r=n?V6:t.propsCache,i=r.get(e);if(i)return i;const o=e.props,s={},u=[];let f=!1;if(!kr(e)){const m=y=>{f=!0;const[w,_]=a4(y,t,!0);os(s,w),_&&u.push(..._)};!n&&t.mixins.length&&t.mixins.forEach(m),e.extends&&m(e.extends),e.mixins&&e.mixins.forEach(m)}if(!o&&!f)return Ki(e)&&r.set(e,Hh),Hh;if(Qn(o))for(let m=0;m<o.length;m++){const y=pa(o[m]);Z2(y)&&(s[y]=ki)}else if(o)for(const m in o){const y=pa(m);if(Z2(y)){const w=o[m],_=s[y]=Qn(w)||kr(w)?{type:w}:os({},w),M=_.type;let k=!1,R=!0;if(Qn(M))for(let N=0;N<M.length;++N){const j=M[N],J=kr(j)&&j.name;if(J==="Boolean"){k=!0;break}else J==="String"&&(R=!1)}else k=kr(M)&&M.name==="Boolean";_[0]=k,_[1]=R,(k||Vi(_,"default"))&&u.push(y)}}const d=[s,u];return Ki(e)&&r.set(e,d),d}function Z2(e){return e[0]!=="$"&&!qh(e)}const l4=e=>e[0]==="_"||e==="$stable",ty=e=>Qn(e)?e.map(Sl):[Sl(e)],H6=(e,t,n)=>{if(t._n)return t;const r=Gl((...i)=>ty(t(...i)),n);return r._c=!1,r},u4=(e,t,n)=>{const r=e._ctx;for(const i in e){if(l4(i))continue;const o=e[i];if(kr(o))t[i]=H6(i,o,r);else if(o!=null){const s=ty(o);t[i]=()=>s}}},c4=(e,t)=>{const n=ty(t);e.slots.default=()=>n},f4=(e,t,n)=>{for(const r in t)(n||r!=="_")&&(e[r]=t[r])},G6=(e,t,n)=>{const r=e.slots=i4();if(e.vnode.shapeFlag&32){const i=t._;i?(f4(r,t,n),n&&iw(r,"_",i,!0)):u4(t,r)}else t&&c4(e,t)},q6=(e,t,n)=>{const{vnode:r,slots:i}=e;let o=!0,s=ki;if(r.shapeFlag&32){const u=t._;u?n&&u===1?o=!1:f4(i,t,n):(o=!t.$stable,u4(t,i)),s=t}else t&&(c4(e,t),s={default:1});if(o)for(const u in i)!l4(u)&&s[u]==null&&delete i[u]},Oo=S4;function h4(e){return p4(e)}function d4(e){return p4(e,t6)}function p4(e,t){const n=Ag();n.__VUE__=!0;const{insert:r,remove:i,patchProp:o,createElement:s,createText:u,createComment:f,setText:d,setElementText:m,parentNode:y,nextSibling:w,setScopeId:_=pu,insertStaticContent:M}=e,k=(Z,de,ve,pe=null,$e=null,Qe=null,Ke=void 0,He=null,Xe=!!de.dynamicChildren)=>{if(Z===de)return;Z&&!ju(Z,de)&&(pe=oe(Z),T(Z,$e,Qe,!0),Z=null),de.patchFlag===-2&&(Xe=!1,de.dynamicChildren=null);const{type:st,ref:kt,shapeFlag:Ct}=de;switch(st){case _f:R(Z,de,ve,pe);break;case ko:N(Z,de,ve,pe);break;case Qf:Z==null&&j(de,ve,pe,Ke);break;case Rn:O(Z,de,ve,pe,$e,Qe,Ke,He,Xe);break;default:Ct&1?ae(Z,de,ve,pe,$e,Qe,Ke,He,Xe):Ct&6?z(Z,de,ve,pe,$e,Qe,Ke,He,Xe):(Ct&64||Ct&128)&&st.process(Z,de,ve,pe,$e,Qe,Ke,He,Xe,De)}kt!=null&&$e&&gp(kt,Z&&Z.ref,Qe,de||Z,!de)},R=(Z,de,ve,pe)=>{if(Z==null)r(de.el=u(de.children),ve,pe);else{const $e=de.el=Z.el;de.children!==Z.children&&d($e,de.children)}},N=(Z,de,ve,pe)=>{Z==null?r(de.el=f(de.children||""),ve,pe):de.el=Z.el},j=(Z,de,ve,pe)=>{[Z.el,Z.anchor]=M(Z.children,de,ve,pe,Z.el,Z.anchor)},J=({el:Z,anchor:de},ve,pe)=>{let $e;for(;Z&&Z!==de;)$e=w(Z),r(Z,ve,pe),Z=$e;r(de,ve,pe)},te=({el:Z,anchor:de})=>{let ve;for(;Z&&Z!==de;)ve=w(Z),i(Z),Z=ve;i(de)},ae=(Z,de,ve,pe,$e,Qe,Ke,He,Xe)=>{de.type==="svg"?Ke="svg":de.type==="math"&&(Ke="mathml"),Z==null?le(de,ve,pe,$e,Qe,Ke,He,Xe):I(Z,de,$e,Qe,Ke,He,Xe)},le=(Z,de,ve,pe,$e,Qe,Ke,He)=>{let Xe,st;const{props:kt,shapeFlag:Ct,transition:Ut,dirs:Gt}=Z;if(Xe=Z.el=s(Z.type,Qe,kt&&kt.is,kt),Ct&8?m(Xe,Z.children):Ct&16&&G(Z.children,Xe,null,pe,$e,Hm(Z,Qe),Ke,He),Gt&&ac(Z,null,pe,"created"),xe(Xe,Z,Z.scopeId,Ke,pe),kt){for(const pn in kt)pn!=="value"&&!qh(pn)&&o(Xe,pn,null,kt[pn],Qe,pe);"value"in kt&&o(Xe,"value",null,kt.value,Qe),(st=kt.onVnodeBeforeMount)&&wl(st,pe,Z)}Gt&&ac(Z,null,pe,"beforeMount");const fn=g4($e,Ut);fn&&Ut.beforeEnter(Xe),r(Xe,de,ve),((st=kt&&kt.onVnodeMounted)||fn||Gt)&&Oo(()=>{st&&wl(st,pe,Z),fn&&Ut.enter(Xe),Gt&&ac(Z,null,pe,"mounted")},$e)},xe=(Z,de,ve,pe,$e)=>{if(ve&&_(Z,ve),pe)for(let Qe=0;Qe<pe.length;Qe++)_(Z,pe[Qe]);if($e){let Qe=$e.subTree;if(de===Qe||ng(Qe.type)&&(Qe.ssContent===de||Qe.ssFallback===de)){const Ke=$e.vnode;xe(Z,Ke,Ke.scopeId,Ke.slotScopeIds,$e.parent)}}},G=(Z,de,ve,pe,$e,Qe,Ke,He,Xe=0)=>{for(let st=Xe;st<Z.length;st++){const kt=Z[st]=He?ff(Z[st]):Sl(Z[st]);k(null,kt,de,ve,pe,$e,Qe,Ke,He)}},I=(Z,de,ve,pe,$e,Qe,Ke)=>{const He=de.el=Z.el;let{patchFlag:Xe,dynamicChildren:st,dirs:kt}=de;Xe|=Z.patchFlag&16;const Ct=Z.props||ki,Ut=de.props||ki;let Gt;if(ve&&jf(ve,!1),(Gt=Ut.onVnodeBeforeUpdate)&&wl(Gt,ve,de,Z),kt&&ac(de,Z,ve,"beforeUpdate"),ve&&jf(ve,!0),(Ct.innerHTML&&Ut.innerHTML==null||Ct.textContent&&Ut.textContent==null)&&m(He,""),st?K(Z.dynamicChildren,st,He,ve,pe,Hm(de,$e),Qe):Ke||Y(Z,de,He,null,ve,pe,Hm(de,$e),Qe,!1),Xe>0){if(Xe&16)$(He,Ct,Ut,ve,$e);else if(Xe&2&&Ct.class!==Ut.class&&o(He,"class",null,Ut.class,$e),Xe&4&&o(He,"style",Ct.style,Ut.style,$e),Xe&8){const fn=de.dynamicProps;for(let pn=0;pn<fn.length;pn++){const et=fn[pn],it=Ct[et],nt=Ut[et];(nt!==it||et==="value")&&o(He,et,it,nt,$e,ve)}}Xe&1&&Z.children!==de.children&&m(He,de.children)}else!Ke&&st==null&&$(He,Ct,Ut,ve,$e);((Gt=Ut.onVnodeUpdated)||kt)&&Oo(()=>{Gt&&wl(Gt,ve,de,Z),kt&&ac(de,Z,ve,"updated")},pe)},K=(Z,de,ve,pe,$e,Qe,Ke)=>{for(let He=0;He<de.length;He++){const Xe=Z[He],st=de[He],kt=Xe.el&&(Xe.type===Rn||!ju(Xe,st)||Xe.shapeFlag&70)?y(Xe.el):ve;k(Xe,st,kt,null,pe,$e,Qe,Ke,!0)}},$=(Z,de,ve,pe,$e)=>{if(de!==ve){if(de!==ki)for(const Qe in de)!qh(Qe)&&!(Qe in ve)&&o(Z,Qe,de[Qe],null,$e,pe);for(const Qe in ve){if(qh(Qe))continue;const Ke=ve[Qe],He=de[Qe];Ke!==He&&Qe!=="value"&&o(Z,Qe,He,Ke,$e,pe)}"value"in ve&&o(Z,"value",de.value,ve.value,$e)}},O=(Z,de,ve,pe,$e,Qe,Ke,He,Xe)=>{const st=de.el=Z?Z.el:u(""),kt=de.anchor=Z?Z.anchor:u("");let{patchFlag:Ct,dynamicChildren:Ut,slotScopeIds:Gt}=de;Gt&&(He=He?He.concat(Gt):Gt),Z==null?(r(st,ve,pe),r(kt,ve,pe),G(de.children||[],ve,kt,$e,Qe,Ke,He,Xe)):Ct>0&&Ct&64&&Ut&&Z.dynamicChildren?(K(Z.dynamicChildren,Ut,ve,$e,Qe,Ke,He),(de.key!=null||$e&&de===$e.subTree)&&ny(Z,de,!0)):Y(Z,de,ve,kt,$e,Qe,Ke,He,Xe)},z=(Z,de,ve,pe,$e,Qe,Ke,He,Xe)=>{de.slotScopeIds=He,Z==null?de.shapeFlag&512?$e.ctx.activate(de,ve,pe,Ke,Xe):V(de,ve,pe,$e,Qe,Ke,Xe):W(Z,de,Xe)},V=(Z,de,ve,pe,$e,Qe,Ke)=>{const He=Z.component=k4(Z,pe,$e);if(Ep(Z)&&(He.ctx.renderer=De),D4(He,!1,Ke),He.asyncDep){if($e&&$e.registerDep(He,q,Ke),!Z.el){const Xe=He.subTree=ci(ko);N(null,Xe,de,ve)}}else q(He,Z,de,ve,$e,Qe,Ke)},W=(Z,de,ve)=>{const pe=de.component=Z.component;if(tM(Z,de,ve))if(pe.asyncDep&&!pe.asyncResolved){X(pe,de,ve);return}else pe.next=de,pe.update();else de.el=Z.el,pe.vnode=de},q=(Z,de,ve,pe,$e,Qe,Ke)=>{const He=()=>{if(Z.isMounted){let{next:Ct,bu:Ut,u:Gt,parent:fn,vnode:pn}=Z;{const Qt=m4(Z);if(Qt){Ct&&(Ct.el=pn.el,X(Z,Ct,Ke)),Qt.asyncDep.then(()=>{Z.isUnmounted||He()});return}}let et=Ct,it;jf(Z,!1),Ct?(Ct.el=pn.el,X(Z,Ct,Ke)):Ct=pn,Ut&&Wh(Ut),(it=Ct.props&&Ct.props.onVnodeBeforeUpdate)&&wl(it,fn,Ct,pn),jf(Z,!0);const nt=A0(Z),Vt=Z.subTree;Z.subTree=nt,k(Vt,nt,y(Vt.el),oe(Vt),Z,$e,Qe),Ct.el=nt.el,et===null&&Ug(Z,nt.el),Gt&&Oo(Gt,$e),(it=Ct.props&&Ct.props.onVnodeUpdated)&&Oo(()=>wl(it,fn,Ct,pn),$e)}else{let Ct;const{el:Ut,props:Gt}=de,{bm:fn,m:pn,parent:et,root:it,type:nt}=Z,Vt=yf(de);if(jf(Z,!1),fn&&Wh(fn),!Vt&&(Ct=Gt&&Gt.onVnodeBeforeMount)&&wl(Ct,et,de),jf(Z,!0),Ut&&We){const Qt=()=>{Z.subTree=A0(Z),We(Ut,Z.subTree,Z,$e,null)};Vt&&nt.__asyncHydrate?nt.__asyncHydrate(Ut,Z,Qt):Qt()}else{it.ce&&it.ce._injectChildStyle(nt);const Qt=Z.subTree=A0(Z);k(null,Qt,ve,pe,Z,$e,Qe),de.el=Qt.el}if(pn&&Oo(pn,$e),!Vt&&(Ct=Gt&&Gt.onVnodeMounted)){const Qt=de;Oo(()=>wl(Ct,et,Qt),$e)}(de.shapeFlag&256||et&&yf(et.vnode)&&et.vnode.shapeFlag&256)&&Z.a&&Oo(Z.a,$e),Z.isMounted=!0,de=ve=pe=null}};Z.scope.on();const Xe=Z.effect=new up(He);Z.scope.off();const st=Z.update=Xe.run.bind(Xe),kt=Z.job=Xe.runIfDirty.bind(Xe);kt.i=Z,kt.id=Z.uid,Xe.scheduler=()=>q1(kt),jf(Z,!0),st()},X=(Z,de,ve)=>{de.component=Z;const pe=Z.vnode.props;Z.vnode=de,Z.next=null,U6(Z,de.props,pe,ve),q6(Z,de.children,ve),Pf(),R2(Z),Mf()},Y=(Z,de,ve,pe,$e,Qe,Ke,He,Xe=!1)=>{const st=Z&&Z.children,kt=Z?Z.shapeFlag:0,Ct=de.children,{patchFlag:Ut,shapeFlag:Gt}=de;if(Ut>0){if(Ut&128){Se(st,Ct,ve,pe,$e,Qe,Ke,He,Xe);return}else if(Ut&256){me(st,Ct,ve,pe,$e,Qe,Ke,He,Xe);return}}Gt&8?(kt&16&&ye(st,$e,Qe),Ct!==st&&m(ve,Ct)):kt&16?Gt&16?Se(st,Ct,ve,pe,$e,Qe,Ke,He,Xe):ye(st,$e,Qe,!0):(kt&8&&m(ve,""),Gt&16&&G(Ct,ve,pe,$e,Qe,Ke,He,Xe))},me=(Z,de,ve,pe,$e,Qe,Ke,He,Xe)=>{Z=Z||Hh,de=de||Hh;const st=Z.length,kt=de.length,Ct=Math.min(st,kt);let Ut;for(Ut=0;Ut<Ct;Ut++){const Gt=de[Ut]=Xe?ff(de[Ut]):Sl(de[Ut]);k(Z[Ut],Gt,ve,null,$e,Qe,Ke,He,Xe)}st>kt?ye(Z,$e,Qe,!0,!1,Ct):G(de,ve,pe,$e,Qe,Ke,He,Xe,Ct)},Se=(Z,de,ve,pe,$e,Qe,Ke,He,Xe)=>{let st=0;const kt=de.length;let Ct=Z.length-1,Ut=kt-1;for(;st<=Ct&&st<=Ut;){const Gt=Z[st],fn=de[st]=Xe?ff(de[st]):Sl(de[st]);if(ju(Gt,fn))k(Gt,fn,ve,null,$e,Qe,Ke,He,Xe);else break;st++}for(;st<=Ct&&st<=Ut;){const Gt=Z[Ct],fn=de[Ut]=Xe?ff(de[Ut]):Sl(de[Ut]);if(ju(Gt,fn))k(Gt,fn,ve,null,$e,Qe,Ke,He,Xe);else break;Ct--,Ut--}if(st>Ct){if(st<=Ut){const Gt=Ut+1,fn=Gt<kt?de[Gt].el:pe;for(;st<=Ut;)k(null,de[st]=Xe?ff(de[st]):Sl(de[st]),ve,fn,$e,Qe,Ke,He,Xe),st++}}else if(st>Ut)for(;st<=Ct;)T(Z[st],$e,Qe,!0),st++;else{const Gt=st,fn=st,pn=new Map;for(st=fn;st<=Ut;st++){const An=de[st]=Xe?ff(de[st]):Sl(de[st]);An.key!=null&&pn.set(An.key,st)}let et,it=0;const nt=Ut-fn+1;let Vt=!1,Qt=0;const Nn=new Array(nt);for(st=0;st<nt;st++)Nn[st]=0;for(st=Gt;st<=Ct;st++){const An=Z[st];if(it>=nt){T(An,$e,Qe,!0);continue}let or;if(An.key!=null)or=pn.get(An.key);else for(et=fn;et<=Ut;et++)if(Nn[et-fn]===0&&ju(An,de[et])){or=et;break}or===void 0?T(An,$e,Qe,!0):(Nn[or-fn]=st+1,or>=Qt?Qt=or:Vt=!0,k(An,de[or],ve,null,$e,Qe,Ke,He,Xe),it++)}const wn=Vt?W6(Nn):Hh;for(et=wn.length-1,st=nt-1;st>=0;st--){const An=fn+st,or=de[An],xn=An+1<kt?de[An+1].el:pe;Nn[st]===0?k(null,or,ve,xn,$e,Qe,Ke,He,Xe):Vt&&(et<0||st!==wn[et]?Re(or,ve,xn,2):et--)}}},Re=(Z,de,ve,pe,$e=null)=>{const{el:Qe,type:Ke,transition:He,children:Xe,shapeFlag:st}=Z;if(st&6){Re(Z.component.subTree,de,ve,pe);return}if(st&128){Z.suspense.move(de,ve,pe);return}if(st&64){Ke.move(Z,de,ve,De);return}if(Ke===Rn){r(Qe,de,ve);for(let Ct=0;Ct<Xe.length;Ct++)Re(Xe[Ct],de,ve,pe);r(Z.anchor,de,ve);return}if(Ke===Qf){J(Z,de,ve);return}if(pe!==2&&st&1&&He)if(pe===0)He.beforeEnter(Qe),r(Qe,de,ve),Oo(()=>He.enter(Qe),$e);else{const{leave:Ct,delayLeave:Ut,afterLeave:Gt}=He,fn=()=>r(Qe,de,ve),pn=()=>{Ct(Qe,()=>{fn(),Gt&&Gt()})};Ut?Ut(Qe,fn,pn):pn()}else r(Qe,de,ve)},T=(Z,de,ve,pe=!1,$e=!1)=>{const{type:Qe,props:Ke,ref:He,children:Xe,dynamicChildren:st,shapeFlag:kt,patchFlag:Ct,dirs:Ut,cacheIndex:Gt}=Z;if(Ct===-2&&($e=!1),He!=null&&gp(He,null,ve,Z,!0),Gt!=null&&(de.renderCache[Gt]=void 0),kt&256){de.ctx.deactivate(Z);return}const fn=kt&1&&Ut,pn=!yf(Z);let et;if(pn&&(et=Ke&&Ke.onVnodeBeforeUnmount)&&wl(et,de,Z),kt&6)ce(Z.component,ve,pe);else{if(kt&128){Z.suspense.unmount(ve,pe);return}fn&&ac(Z,null,de,"beforeUnmount"),kt&64?Z.type.remove(Z,de,ve,De,pe):st&&!st.hasOnce&&(Qe!==Rn||Ct>0&&Ct&64)?ye(st,de,ve,!1,!0):(Qe===Rn&&Ct&384||!$e&&kt&16)&&ye(Xe,de,ve),pe&&ne(Z)}(pn&&(et=Ke&&Ke.onVnodeUnmounted)||fn)&&Oo(()=>{et&&wl(et,de,Z),fn&&ac(Z,null,de,"unmounted")},ve)},ne=Z=>{const{type:de,el:ve,anchor:pe,transition:$e}=Z;if(de===Rn){fe(ve,pe);return}if(de===Qf){te(Z);return}const Qe=()=>{i(ve),$e&&!$e.persisted&&$e.afterLeave&&$e.afterLeave()};if(Z.shapeFlag&1&&$e&&!$e.persisted){const{leave:Ke,delayLeave:He}=$e,Xe=()=>Ke(ve,Qe);He?He(Z.el,Qe,Xe):Xe()}else Qe()},fe=(Z,de)=>{let ve;for(;Z!==de;)ve=w(Z),i(Z),Z=ve;i(de)},ce=(Z,de,ve)=>{const{bum:pe,scope:$e,job:Qe,subTree:Ke,um:He,m:Xe,a:st}=Z;tg(Xe),tg(st),pe&&Wh(pe),$e.stop(),Qe&&(Qe.flags|=8,T(Ke,Z,de,ve)),He&&Oo(He,de),Oo(()=>{Z.isUnmounted=!0},de),de&&de.pendingBranch&&!de.isUnmounted&&Z.asyncDep&&!Z.asyncResolved&&Z.suspenseId===de.pendingId&&(de.deps--,de.deps===0&&de.resolve())},ye=(Z,de,ve,pe=!1,$e=!1,Qe=0)=>{for(let Ke=Qe;Ke<Z.length;Ke++)T(Z[Ke],de,ve,pe,$e)},oe=Z=>{if(Z.shapeFlag&6)return oe(Z.component.subTree);if(Z.shapeFlag&128)return Z.suspense.next();const de=w(Z.anchor||Z.el),ve=de&&de[Nw];return ve?w(ve):de};let B=!1;const ue=(Z,de,ve)=>{Z==null?de._vnode&&T(de._vnode,null,null,!0):k(de._vnode||null,Z,de,null,null,null,ve),de._vnode=Z,B||(B=!0,R2(),Q0(),B=!1)},De={p:k,um:T,m:Re,r:ne,mt:V,mc:G,pc:Y,pbc:K,n:oe,o:e};let Me,We;return t&&([Me,We]=t(De)),{render:ue,hydrate:Me,createApp:z6(ue,Me)}}function Hm({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function jf({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function g4(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function ny(e,t,n=!1){const r=e.children,i=t.children;if(Qn(r)&&Qn(i))for(let o=0;o<r.length;o++){const s=r[o];let u=i[o];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=i[o]=ff(i[o]),u.el=s.el),!n&&u.patchFlag!==-2&&ny(s,u)),u.type===_f&&(u.el=s.el)}}function W6(e){const t=e.slice(),n=[0];let r,i,o,s,u;const f=e.length;for(r=0;r<f;r++){const d=e[r];if(d!==0){if(i=n[n.length-1],e[i]<d){t[r]=i,n.push(r);continue}for(o=0,s=n.length-1;o<s;)u=o+s>>1,e[n[u]]<d?o=u+1:s=u;d<e[n[o]]&&(o>0&&(t[r]=n[o-1]),n[o]=r)}}for(o=n.length,s=n[o-1];o-- >0;)n[o]=s,s=t[s];return n}function m4(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:m4(t)}function tg(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const v4=Symbol.for("v-scx"),y4=()=>Zl(v4);function vp(e,t){return Pp(e,null,t)}function Z6(e,t){return Pp(e,null,{flush:"post"})}function _4(e,t){return Pp(e,null,{flush:"sync"})}function bs(e,t,n){return Pp(e,t,n)}function Pp(e,t,n=ki){const{immediate:r,deep:i,flush:o,once:s}=n,u=os({},n),f=t&&r||!t&&o!=="post";let d;if(td){if(o==="sync"){const _=y4();d=_.__watcherHandles||(_.__watcherHandles=[])}else if(!f){const _=()=>{};return _.stop=pu,_.resume=pu,_.pause=pu,_}}const m=Io;u.call=(_,M,k)=>mu(_,m,M,k);let y=!1;o==="post"?u.scheduler=_=>{Oo(_,m&&m.suspense)}:o!=="sync"&&(y=!0,u.scheduler=(_,M)=>{M?_():q1(_)}),u.augmentJob=_=>{t&&(_.flags|=4),y&&(_.flags|=2,m&&(_.id=m.uid,_.i=m))};const w=FP(e,t,u);return td&&(d?d.push(w):f&&w()),w}function K6(e,t,n){const r=this.proxy,i=ps(e)?e.includes(".")?b4(r,e):()=>r[e]:e.bind(r,r);let o;kr(t)?o=t:(o=t.handler,n=t);const s=ih(this),u=Pp(i,o.bind(r),n);return s(),u}function b4(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function Y6(e,t,n=ki){const r=yu(),i=pa(t),o=Cl(t),s=w4(e,i),u=Cw((f,d)=>{let m,y=ki,w;return _4(()=>{const _=e[i];el(m,_)&&(m=_,d())}),{get(){return f(),n.get?n.get(m):m},set(_){const M=n.set?n.set(_):_;if(!el(M,m)&&!(y!==ki&&el(_,y)))return;const k=r.vnode.props;k&&(t in k||i in k||o in k)&&(`onUpdate:${t}`in k||`onUpdate:${i}`in k||`onUpdate:${o}`in k)||(m=_,d()),r.emit(`update:${t}`,M),el(_,M)&&el(_,y)&&!el(M,w)&&d(),y=_,w=M}}});return u[Symbol.iterator]=()=>{let f=0;return{next(){return f<2?{value:f++?s||ki:u,done:!1}:{done:!0}}}},u}const w4=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${pa(t)}Modifiers`]||e[`${Cl(t)}Modifiers`];function J6(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||ki;let i=n;const o=t.startsWith("update:"),s=o&&w4(r,t.slice(7));s&&(s.trim&&(i=n.map(m=>ps(m)?m.trim():m)),s.number&&(i=n.map(Z0)));let u,f=r[u=Gd(t)]||r[u=Gd(pa(t))];!f&&o&&(f=r[u=Gd(Cl(t))]),f&&mu(f,e,6,i);const d=r[u+"Once"];if(d){if(!e.emitted)e.emitted={};else if(e.emitted[u])return;e.emitted[u]=!0,mu(d,e,6,i)}}function x4(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const o=e.emits;let s={},u=!1;if(!kr(e)){const f=d=>{const m=x4(d,t,!0);m&&(u=!0,os(s,m))};!n&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}return!o&&!u?(Ki(e)&&r.set(e,null),null):(Qn(o)?o.forEach(f=>s[f]=null):os(s,o),Ki(e)&&r.set(e,s),s)}function $g(e,t){return!e||!Sp(t)?!1:(t=t.slice(2).replace(/Once$/,""),Vi(e,t[0].toLowerCase()+t.slice(1))||Vi(e,Cl(t))||Vi(e,t))}function A0(e){const{type:t,vnode:n,proxy:r,withProxy:i,propsOptions:[o],slots:s,attrs:u,emit:f,render:d,renderCache:m,props:y,data:w,setupState:_,ctx:M,inheritAttrs:k}=e,R=pp(e);let N,j;try{if(n.shapeFlag&4){const te=i||r,ae=te;N=Sl(d.call(ae,te,m,y,_,w,M)),j=u}else{const te=t;N=Sl(te.length>1?te(y,{attrs:u,slots:s,emit:f}):te(y,null)),j=t.props?u:Q6(u)}}catch(te){Jd.length=0,ah(te,e,1),N=ci(ko)}let J=N;if(j&&k!==!1){const te=Object.keys(j),{shapeFlag:ae}=J;te.length&&ae&7&&(o&&te.some(B1)&&(j=eM(j,o)),J=vc(J,j,!1,!0))}return n.dirs&&(J=vc(J,null,!1,!0),J.dirs=J.dirs?J.dirs.concat(n.dirs):n.dirs),n.transition&&$c(J,n.transition),N=J,pp(R),N}function X6(e,t=!0){let n;for(let r=0;r<e.length;r++){const i=e[r];if(Uc(i)){if(i.type!==ko||i.children==="v-if"){if(n)return;n=i}}else return}return n}const Q6=e=>{let t;for(const n in e)(n==="class"||n==="style"||Sp(n))&&((t||(t={}))[n]=e[n]);return t},eM=(e,t)=>{const n={};for(const r in e)(!B1(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function tM(e,t,n){const{props:r,children:i,component:o}=e,{props:s,children:u,patchFlag:f}=t,d=o.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&f>=0){if(f&1024)return!0;if(f&16)return r?K2(r,s,d):!!s;if(f&8){const m=t.dynamicProps;for(let y=0;y<m.length;y++){const w=m[y];if(s[w]!==r[w]&&!$g(d,w))return!0}}}else return(i||u)&&(!u||!u.$stable)?!0:r===s?!1:r?s?K2(r,s,d):!0:!!s;return!1}function K2(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(t[o]!==e[o]&&!$g(n,o))return!0}return!1}function Ug({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const ng=e=>e.__isSuspense;let Iv=0;const nM={name:"Suspense",__isSuspense:!0,process(e,t,n,r,i,o,s,u,f,d){if(e==null)iM(t,n,r,i,o,s,u,f,d);else{if(o&&o.deps>0&&!e.suspense.isInFallback){t.suspense=e.suspense,t.suspense.vnode=t,t.el=e.el;return}sM(e,t,n,r,i,s,u,f,d)}},hydrate:oM,normalize:aM},rM=nM;function yp(e,t){const n=e.props&&e.props[t];kr(n)&&n()}function iM(e,t,n,r,i,o,s,u,f){const{p:d,o:{createElement:m}}=f,y=m("div"),w=e.suspense=L4(e,i,r,t,y,n,o,s,u,f);d(null,w.pendingBranch=e.ssContent,y,null,r,w,o,s),w.deps>0?(yp(e,"onPending"),yp(e,"onFallback"),d(null,e.ssFallback,t,n,r,null,o,s),Kh(w,e.ssFallback)):w.resolve(!1,!0)}function sM(e,t,n,r,i,o,s,u,{p:f,um:d,o:{createElement:m}}){const y=t.suspense=e.suspense;y.vnode=t,t.el=e.el;const w=t.ssContent,_=t.ssFallback,{activeBranch:M,pendingBranch:k,isInFallback:R,isHydrating:N}=y;if(k)y.pendingBranch=w,ju(w,k)?(f(k,w,y.hiddenContainer,null,i,y,o,s,u),y.deps<=0?y.resolve():R&&(N||(f(M,_,n,r,i,null,o,s,u),Kh(y,_)))):(y.pendingId=Iv++,N?(y.isHydrating=!1,y.activeBranch=k):d(k,i,y),y.deps=0,y.effects.length=0,y.hiddenContainer=m("div"),R?(f(null,w,y.hiddenContainer,null,i,y,o,s,u),y.deps<=0?y.resolve():(f(M,_,n,r,i,null,o,s,u),Kh(y,_))):M&&ju(w,M)?(f(M,w,n,r,i,y,o,s,u),y.resolve(!0)):(f(null,w,y.hiddenContainer,null,i,y,o,s,u),y.deps<=0&&y.resolve()));else if(M&&ju(w,M))f(M,w,n,r,i,y,o,s,u),Kh(y,w);else if(yp(t,"onPending"),y.pendingBranch=w,w.shapeFlag&512?y.pendingId=w.component.suspenseId:y.pendingId=Iv++,f(null,w,y.hiddenContainer,null,i,y,o,s,u),y.deps<=0)y.resolve();else{const{timeout:j,pendingId:J}=y;j>0?setTimeout(()=>{y.pendingId===J&&y.fallback(_)},j):j===0&&y.fallback(_)}}function L4(e,t,n,r,i,o,s,u,f,d,m=!1){const{p:y,m:w,um:_,n:M,o:{parentNode:k,remove:R}}=d;let N;const j=lM(e);j&&t&&t.pendingBranch&&(N=t.pendingId,t.deps++);const J=e.props?K0(e.props.timeout):void 0,te=o,ae={vnode:e,parent:t,parentComponent:n,namespace:s,container:r,hiddenContainer:i,deps:0,pendingId:Iv++,timeout:typeof J=="number"?J:-1,activeBranch:null,pendingBranch:null,isInFallback:!m,isHydrating:m,isUnmounted:!1,effects:[],resolve(le=!1,xe=!1){const{vnode:G,activeBranch:I,pendingBranch:K,pendingId:$,effects:O,parentComponent:z,container:V}=ae;let W=!1;ae.isHydrating?ae.isHydrating=!1:le||(W=I&&K.transition&&K.transition.mode==="out-in",W&&(I.transition.afterLeave=()=>{$===ae.pendingId&&(w(K,V,o===te?M(I):o,0),hp(O))}),I&&(k(I.el)===V&&(o=M(I)),_(I,z,ae,!0)),W||w(K,V,o,0)),Kh(ae,K),ae.pendingBranch=null,ae.isInFallback=!1;let q=ae.parent,X=!1;for(;q;){if(q.pendingBranch){q.effects.push(...O),X=!0;break}q=q.parent}!X&&!W&&hp(O),ae.effects=[],j&&t&&t.pendingBranch&&N===t.pendingId&&(t.deps--,t.deps===0&&!xe&&t.resolve()),yp(G,"onResolve")},fallback(le){if(!ae.pendingBranch)return;const{vnode:xe,activeBranch:G,parentComponent:I,container:K,namespace:$}=ae;yp(xe,"onFallback");const O=M(G),z=()=>{ae.isInFallback&&(y(null,le,K,O,I,null,$,u,f),Kh(ae,le))},V=le.transition&&le.transition.mode==="out-in";V&&(G.transition.afterLeave=z),ae.isInFallback=!0,_(G,I,null,!0),V||z()},move(le,xe,G){ae.activeBranch&&w(ae.activeBranch,le,xe,G),ae.container=le},next(){return ae.activeBranch&&M(ae.activeBranch)},registerDep(le,xe,G){const I=!!ae.pendingBranch;I&&ae.deps++;const K=le.vnode.el;le.asyncDep.catch($=>{ah($,le,0)}).then($=>{if(le.isUnmounted||ae.isUnmounted||ae.pendingId!==le.suspenseId)return;le.asyncResolved=!0;const{vnode:O}=le;zv(le,$,!1),K&&(O.el=K);const z=!K&&le.subTree.el;xe(le,O,k(K||le.subTree.el),K?null:M(le.subTree),ae,s,G),z&&R(z),Ug(le,O.el),I&&--ae.deps===0&&ae.resolve()})},unmount(le,xe){ae.isUnmounted=!0,ae.activeBranch&&_(ae.activeBranch,n,le,xe),ae.pendingBranch&&_(ae.pendingBranch,n,le,xe)}};return ae}function oM(e,t,n,r,i,o,s,u,f){const d=t.suspense=L4(t,r,n,e.parentNode,document.createElement("div"),null,i,o,s,u,!0),m=f(e,d.pendingBranch=t.ssContent,n,d,o,s);return d.deps===0&&d.resolve(!1,!0),m}function aM(e){const{shapeFlag:t,children:n}=e,r=t&32;e.ssContent=Y2(r?n.default:n),e.ssFallback=r?Y2(n.fallback):ci(ko)}function Y2(e){let t;if(kr(e)){const n=rh&&e._c;n&&(e._d=!1,Ue()),e=e(),n&&(e._d=!0,t=ja,C4())}return Qn(e)&&(e=X6(e)),e=Sl(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(n=>n!==e)),e}function S4(e,t){t&&t.pendingBranch?Qn(e)?t.effects.push(...e):t.effects.push(e):hp(e)}function Kh(e,t){e.activeBranch=t;const{vnode:n,parentComponent:r}=e;let i=t.el;for(;!i&&t.component;)t=t.component.subTree,i=t.el;n.el=i,r&&r.subTree===n&&(r.vnode.el=i,Ug(r,i))}function lM(e){const t=e.props&&e.props.suspensible;return t!=null&&t!==!1}const Rn=Symbol.for("v-fgt"),_f=Symbol.for("v-txt"),ko=Symbol.for("v-cmt"),Qf=Symbol.for("v-stc"),Jd=[];let ja=null;function Ue(e=!1){Jd.push(ja=e?null:[])}function C4(){Jd.pop(),ja=Jd[Jd.length-1]||null}let rh=1;function Rv(e,t=!1){rh+=e,e<0&&ja&&t&&(ja.hasOnce=!0)}function E4(e){return e.dynamicChildren=rh>0?ja||Hh:null,C4(),rh>0&&ja&&ja.push(e),e}function Ge(e,t,n,r,i,o){return E4(E(e,t,n,r,i,o,!0))}function za(e,t,n,r,i){return E4(ci(e,t,n,r,i,!0))}function Uc(e){return e?e.__v_isVNode===!0:!1}function ju(e,t){return e.type===t.type&&e.key===t.key}function uM(e){}const P4=({key:e})=>e??null,k0=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?ps(e)||Zs(e)||kr(e)?{i:Ro,r:e,k:t,f:!!n}:e:null);function E(e,t=null,n=null,r=0,i=null,o=e===Rn?0:1,s=!1,u=!1){const f={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&P4(t),ref:t&&k0(t),scopeId:Rg,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Ro};return u?(ry(f,n),o&128&&e.normalize(f)):n&&(f.shapeFlag|=ps(n)?8:16),rh>0&&!s&&ja&&(f.patchFlag>0||o&6)&&f.patchFlag!==32&&ja.push(f),f}const ci=cM;function cM(e,t=null,n=null,r=0,i=null,o=!1){if((!e||e===Jw)&&(e=ko),Uc(e)){const u=vc(e,t,!0);return n&&ry(u,n),rh>0&&!o&&ja&&(u.shapeFlag&6?ja[ja.indexOf(e)]=u:ja.push(u)),u.patchFlag=-2,u}if(vM(e)&&(e=e.__vccOpts),t){t=M4(t);let{class:u,style:f}=t;u&&!ps(u)&&(t.class=Ii(u)),Ki(f)&&(Og(f)&&!Qn(f)&&(f=os({},f)),t.style=tl(f))}const s=ps(e)?1:ng(e)?128:Ow(e)?64:Ki(e)?4:kr(e)?2:0;return E(e,t,n,r,i,s,o,!0)}function M4(e){return e?Og(e)||s4(e)?os({},e):e:null}function vc(e,t,n=!1,r=!1){const{props:i,ref:o,patchFlag:s,children:u,transition:f}=e,d=t?A4(i||{},t):i,m={__v_isVNode:!0,__v_skip:!0,type:e.type,props:d,key:d&&P4(d),ref:t&&t.ref?n&&o?Qn(o)?o.concat(k0(t)):[o,k0(t)]:k0(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:u,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Rn?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:f,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&vc(e.ssContent),ssFallback:e.ssFallback&&vc(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return f&&r&&$c(m,f.clone(m)),m}function di(e=" ",t=0){return ci(_f,null,e,t)}function uc(e,t){const n=ci(Qf,null,e);return n.staticCount=t,n}function un(e="",t=!1){return t?(Ue(),za(ko,null,e)):ci(ko,null,e)}function Sl(e){return e==null||typeof e=="boolean"?ci(ko):Qn(e)?ci(Rn,null,e.slice()):Uc(e)?ff(e):ci(_f,null,String(e))}function ff(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:vc(e)}function ry(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Qn(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),ry(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!s4(t)?t._ctx=Ro:i===3&&Ro&&(Ro.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else kr(t)?(t={default:t,_ctx:Ro},n=32):(t=String(t),r&64?(n=16,t=[di(t)]):n=8);e.children=t,e.shapeFlag|=n}function A4(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=Ii([t.class,r.class]));else if(i==="style")t.style=tl([t.style,r.style]);else if(Sp(i)){const o=t[i],s=r[i];s&&o!==s&&!(Qn(o)&&o.includes(s))&&(t[i]=o?[].concat(o,s):s)}else i!==""&&(t[i]=r[i])}return t}function wl(e,t,n,r=null){mu(e,t,7,[n,r])}const fM=t4();let hM=0;function k4(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||fM,o={uid:hM++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new R1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:a4(r,i),emitsOptions:x4(r,i),emit:null,emitted:null,propsDefaults:ki,inheritAttrs:r.inheritAttrs,ctx:ki,data:ki,props:ki,attrs:ki,slots:ki,refs:ki,setupState:ki,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=J6.bind(null,o),e.ce&&e.ce(o),o}let Io=null;const yu=()=>Io||Ro;let rg,Fv;{const e=Ag(),t=(n,r)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(r),o=>{i.length>1?i.forEach(s=>s(o)):i[0](o)}};rg=t("__VUE_INSTANCE_SETTERS__",n=>Io=n),Fv=t("__VUE_SSR_SETTERS__",n=>td=n)}const ih=e=>{const t=Io;return rg(e),e.scope.on(),()=>{e.scope.off(),rg(t)}},jv=()=>{Io&&Io.scope.off(),rg(null)};function T4(e){return e.vnode.shapeFlag&4}let td=!1;function D4(e,t=!1,n=!1){t&&Fv(t);const{props:r,children:i}=e.vnode,o=T4(e);$6(e,r,o,t),G6(e,i,n);const s=o?dM(e,t):void 0;return t&&Fv(!1),s}function dM(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Dv);const{setup:r}=n;if(r){Pf();const i=e.setupContext=r.length>1?N4(e):null,o=ih(e),s=ud(r,e,0,[e.props,i]),u=O1(s);if(Mf(),o(),(u||e.sp)&&!yf(e)&&K1(e),u){if(s.then(jv,jv),t)return s.then(f=>{zv(e,f,t)}).catch(f=>{ah(f,e,0)});e.asyncDep=s}else zv(e,s,t)}else B4(e,t)}function zv(e,t,n){kr(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ki(t)&&(e.setupState=G1(t)),B4(e,n)}let ig,$v;function pM(e){ig=e,$v=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,b6))}}const gM=()=>!ig;function B4(e,t,n){const r=e.type;if(!e.render){if(!t&&ig&&!r.render){const i=r.template||ey(e).template;if(i){const{isCustomElement:o,compilerOptions:s}=e.appContext.config,{delimiters:u,compilerOptions:f}=r,d=os(os({isCustomElement:o,delimiters:u},s),f);r.render=ig(i,d)}}e.render=r.render||pu,$v&&$v(e)}{const i=ih(e);Pf();try{N6(e)}finally{Mf(),i()}}}const mM={get(e,t){return Na(e,"get",""),e[t]}};function N4(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,mM),slots:e.slots,emit:e.emit,expose:t}}function Mp(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(G1(Ig(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Kd)return Kd[n](e)},has(t,n){return n in t||n in Kd}})):e.proxy}function Uv(e,t=!0){return kr(e)?e.displayName||e.name:e.name||t&&e.__name}function vM(e){return kr(e)&&"__vccOpts"in e}const gr=(e,t)=>NP(e,t,td);function Vg(e,t,n){const r=arguments.length;return r===2?Ki(t)&&!Qn(t)?Uc(t)?ci(e,null,[t]):ci(e,t):ci(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Uc(n)&&(n=[n]),ci(e,t,n))}function yM(){}function _M(e,t,n,r){const i=n[r];if(i&&O4(i,e))return i;const o=t();return o.memo=e.slice(),o.cacheIndex=r,n[r]=o}function O4(e,t){const n=e.memo;if(n.length!=t.length)return!1;for(let r=0;r<n.length;r++)if(el(n[r],t[r]))return!1;return rh>0&&ja&&ja.push(e),!0}const I4="3.5.13",bM=pu,wM=VP,xM=Oh,LM=Bw,SM={createComponentInstance:k4,setupComponent:D4,renderComponentRoot:A0,setCurrentRenderingInstance:pp,isVNode:Uc,normalizeVNode:Sl,getComponentPublicInstance:Mp,ensureValidVNode:Q1,pushWarningContext:jP,popWarningContext:zP},CM=SM,EM=null,PM=null,MM=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Vv;const J2=typeof window<"u"&&window.trustedTypes;if(J2)try{Vv=J2.createPolicy("vue",{createHTML:e=>e})}catch{}const R4=Vv?e=>Vv.createHTML(e):e=>e,AM="http://www.w3.org/2000/svg",kM="http://www.w3.org/1998/Math/MathML",Ic=typeof document<"u"?document:null,X2=Ic&&Ic.createElement("template"),TM={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t==="svg"?Ic.createElementNS(AM,e):t==="mathml"?Ic.createElementNS(kM,e):n?Ic.createElement(e,{is:n}):Ic.createElement(e);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>Ic.createTextNode(e),createComment:e=>Ic.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ic.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,o){const s=n?n.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===o||!(i=i.nextSibling)););else{X2.innerHTML=R4(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const u=X2.content;if(r==="svg"||r==="mathml"){const f=u.firstChild;for(;f.firstChild;)u.appendChild(f.firstChild);u.removeChild(f)}t.insertBefore(u,n)}return[s?s.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},ef="transition",Ld="animation",nd=Symbol("_vtc"),F4={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},j4=os({},Z1,F4),DM=e=>(e.displayName="Transition",e.props=j4,e),Hv=DM((e,{slots:t})=>Vg(zw,z4(e),t)),zf=(e,t=[])=>{Qn(e)?e.forEach(n=>n(...t)):e&&e(...t)},Q2=e=>e?Qn(e)?e.some(t=>t.length>1):e.length>1:!1;function z4(e){const t={};for(const O in e)O in F4||(t[O]=e[O]);if(e.css===!1)return t;const{name:n="v",type:r,duration:i,enterFromClass:o=`${n}-enter-from`,enterActiveClass:s=`${n}-enter-active`,enterToClass:u=`${n}-enter-to`,appearFromClass:f=o,appearActiveClass:d=s,appearToClass:m=u,leaveFromClass:y=`${n}-leave-from`,leaveActiveClass:w=`${n}-leave-active`,leaveToClass:_=`${n}-leave-to`}=e,M=BM(i),k=M&&M[0],R=M&&M[1],{onBeforeEnter:N,onEnter:j,onEnterCancelled:J,onLeave:te,onLeaveCancelled:ae,onBeforeAppear:le=N,onAppear:xe=j,onAppearCancelled:G=J}=t,I=(O,z,V,W)=>{O._enterCancelled=W,of(O,z?m:u),of(O,z?d:s),V&&V()},K=(O,z)=>{O._isLeaving=!1,of(O,y),of(O,_),of(O,w),z&&z()},$=O=>(z,V)=>{const W=O?xe:j,q=()=>I(z,O,V);zf(W,[z,q]),e_(()=>{of(z,O?f:o),ic(z,O?m:u),Q2(W)||t_(z,r,k,q)})};return os(t,{onBeforeEnter(O){zf(N,[O]),ic(O,o),ic(O,s)},onBeforeAppear(O){zf(le,[O]),ic(O,f),ic(O,d)},onEnter:$(!1),onAppear:$(!0),onLeave(O,z){O._isLeaving=!0;const V=()=>K(O,z);ic(O,y),O._enterCancelled?(ic(O,w),Gv()):(Gv(),ic(O,w)),e_(()=>{O._isLeaving&&(of(O,y),ic(O,_),Q2(te)||t_(O,r,R,V))}),zf(te,[O,V])},onEnterCancelled(O){I(O,!1,void 0,!0),zf(J,[O])},onAppearCancelled(O){I(O,!0,void 0,!0),zf(G,[O])},onLeaveCancelled(O){K(O),zf(ae,[O])}})}function BM(e){if(e==null)return null;if(Ki(e))return[Gm(e.enter),Gm(e.leave)];{const t=Gm(e);return[t,t]}}function Gm(e){return K0(e)}function ic(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[nd]||(e[nd]=new Set)).add(t)}function of(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const n=e[nd];n&&(n.delete(t),n.size||(e[nd]=void 0))}function e_(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let NM=0;function t_(e,t,n,r){const i=e._endId=++NM,o=()=>{i===e._endId&&r()};if(n!=null)return setTimeout(o,n);const{type:s,timeout:u,propCount:f}=$4(e,t);if(!s)return r();const d=s+"end";let m=0;const y=()=>{e.removeEventListener(d,w),o()},w=_=>{_.target===e&&++m>=f&&y()};setTimeout(()=>{m<f&&y()},u+1),e.addEventListener(d,w)}function $4(e,t){const n=window.getComputedStyle(e),r=M=>(n[M]||"").split(", "),i=r(`${ef}Delay`),o=r(`${ef}Duration`),s=n_(i,o),u=r(`${Ld}Delay`),f=r(`${Ld}Duration`),d=n_(u,f);let m=null,y=0,w=0;t===ef?s>0&&(m=ef,y=s,w=o.length):t===Ld?d>0&&(m=Ld,y=d,w=f.length):(y=Math.max(s,d),m=y>0?s>d?ef:Ld:null,w=m?m===ef?o.length:f.length:0);const _=m===ef&&/\b(transform|all)(,|$)/.test(r(`${ef}Property`).toString());return{type:m,timeout:y,propCount:w,hasTransform:_}}function n_(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,r)=>r_(n)+r_(e[r])))}function r_(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Gv(){return document.body.offsetHeight}function OM(e,t,n){const r=e[nd];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const sg=Symbol("_vod"),U4=Symbol("_vsh"),Hg={beforeMount(e,{value:t},{transition:n}){e[sg]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Sd(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),Sd(e,!0),r.enter(e)):r.leave(e,()=>{Sd(e,!1)}):Sd(e,t))},beforeUnmount(e,{value:t}){Sd(e,t)}};function Sd(e,t){e.style.display=t?e[sg]:"none",e[U4]=!t}function IM(){Hg.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const V4=Symbol("");function RM(e){const t=yu();if(!t)return;const n=t.ut=(i=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(o=>og(o,i))},r=()=>{const i=e(t.proxy);t.ce?og(t.ce,i):qv(t.subTree,i),n(i)};Y1(()=>{hp(r)}),Fo(()=>{bs(r,pu,{flush:"post"});const i=new MutationObserver(r);i.observe(t.subTree.el.parentNode,{childList:!0}),mc(()=>i.disconnect())})}function qv(e,t){if(e.shapeFlag&128){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{qv(n.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)og(e.el,t);else if(e.type===Rn)e.children.forEach(n=>qv(n,t));else if(e.type===Qf){let{el:n,anchor:r}=e;for(;n&&(og(n,t),n!==r);)n=n.nextSibling}}function og(e,t){if(e.nodeType===1){const n=e.style;let r="";for(const i in t)n.setProperty(`--${i}`,t[i]),r+=`--${i}: ${t[i]};`;n[V4]=r}}const FM=/(^|;)\s*display\s*:/;function jM(e,t,n){const r=e.style,i=ps(n);let o=!1;if(n&&!i){if(t)if(ps(t))for(const s of t.split(";")){const u=s.slice(0,s.indexOf(":")).trim();n[u]==null&&T0(r,u,"")}else for(const s in t)n[s]==null&&T0(r,s,"");for(const s in n)s==="display"&&(o=!0),T0(r,s,n[s])}else if(i){if(t!==n){const s=r[V4];s&&(n+=";"+s),r.cssText=n,o=FM.test(n)}}else t&&e.removeAttribute("style");sg in e&&(e[sg]=o?r.display:"",e[U4]&&(r.display="none"))}const i_=/\s*!important$/;function T0(e,t,n){if(Qn(n))n.forEach(r=>T0(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=zM(e,t);i_.test(n)?e.setProperty(Cl(r),n.replace(i_,""),"important"):e[r]=n}}const s_=["Webkit","Moz","ms"],qm={};function zM(e,t){const n=qm[t];if(n)return n;let r=pa(t);if(r!=="filter"&&r in e)return qm[t]=r;r=Cp(r);for(let i=0;i<s_.length;i++){const o=s_[i]+r;if(o in e)return qm[t]=o}return t}const o_="http://www.w3.org/1999/xlink";function a_(e,t,n,r,i,o=tP(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(o_,t.slice(6,t.length)):e.setAttributeNS(o_,t,n):n==null||o&&!sw(n)?e.removeAttribute(t):e.setAttribute(t,o?"":Uu(n)?String(n):n)}function l_(e,t,n,r,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?R4(n):n);return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const u=o==="OPTION"?e.getAttribute("value")||"":e.value,f=n==null?e.type==="checkbox"?"on":"":String(n);(u!==f||!("_value"in e))&&(e.value=f),n==null&&e.removeAttribute(t),e._value=n;return}let s=!1;if(n===""||n==null){const u=typeof e[t];u==="boolean"?n=sw(n):n==null&&u==="string"?(n="",s=!0):u==="number"&&(n=0,s=!0)}try{e[t]=n}catch{}s&&e.removeAttribute(i||t)}function jc(e,t,n,r){e.addEventListener(t,n,r)}function $M(e,t,n,r){e.removeEventListener(t,n,r)}const u_=Symbol("_vei");function UM(e,t,n,r,i=null){const o=e[u_]||(e[u_]={}),s=o[t];if(r&&s)s.value=r;else{const[u,f]=VM(t);if(r){const d=o[t]=qM(r,i);jc(e,u,d,f)}else s&&($M(e,u,s,f),o[t]=void 0)}}const c_=/(?:Once|Passive|Capture)$/;function VM(e){let t;if(c_.test(e)){t={};let r;for(;r=e.match(c_);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Cl(e.slice(2)),t]}let Wm=0;const HM=Promise.resolve(),GM=()=>Wm||(HM.then(()=>Wm=0),Wm=Date.now());function qM(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;mu(WM(r,n.value),t,5,[r])};return n.value=e,n.attached=GM(),n}function WM(e,t){if(Qn(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const f_=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,ZM=(e,t,n,r,i,o)=>{const s=i==="svg";t==="class"?OM(e,r,s):t==="style"?jM(e,n,r):Sp(t)?B1(t)||UM(e,t,n,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):KM(e,t,r,s))?(l_(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&a_(e,t,r,s,o,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!ps(r))?l_(e,pa(t),r,o,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),a_(e,t,r,s))};function KM(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&f_(t)&&kr(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return f_(t)&&ps(n)?!1:t in e}const h_={};/*! #__NO_SIDE_EFFECTS__ */function H4(e,t,n){const r=oo(e,t);Pg(r)&&os(r,t);class i extends Gg{constructor(s){super(r,s,n)}}return i.def=r,i}/*! #__NO_SIDE_EFFECTS__ */const YM=(e,t)=>H4(e,t,e5),JM=typeof HTMLElement<"u"?HTMLElement:class{};class Gg extends JM{constructor(t,n={},r=lg){super(),this._def=t,this._props=n,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==lg?this._root=this.shadowRoot:t.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let t=this;for(;t=t&&(t.parentNode||t.host);)if(t instanceof Gg){this._parent=t;break}this._instance||(this._resolved?(this._setParent(),this._update()):t&&t._pendingResolve?this._pendingResolve=t._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(t=this._parent){t&&(this._instance.parent=t._instance,this._instance.provides=t._instance.provides)}disconnectedCallback(){this._connected=!1,Ko(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const i of r)this._setAttr(i.attributeName)}),this._ob.observe(this,{attributes:!0});const t=(r,i=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:o,styles:s}=r;let u;if(o&&!Qn(o))for(const f in o){const d=o[f];(d===Number||d&&d.type===Number)&&(f in this._props&&(this._props[f]=K0(this._props[f])),(u||(u=Object.create(null)))[pa(f)]=!0)}this._numberProps=u,i&&this._resolveProps(r),this.shadowRoot&&this._applyStyles(s),this._mount(r)},n=this._def.__asyncLoader;n?this._pendingResolve=n().then(r=>t(this._def=r,!0)):t(this._def)}_mount(t){this._app=this._createApp(t),t.configureApp&&t.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const n=this._instance&&this._instance.exposed;if(n)for(const r in n)Vi(this,r)||Object.defineProperty(this,r,{get:()=>qn(n[r])})}_resolveProps(t){const{props:n}=t,r=Qn(n)?n:Object.keys(n||{});for(const i of Object.keys(this))i[0]!=="_"&&r.includes(i)&&this._setProp(i,this[i]);for(const i of r.map(pa))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(o){this._setProp(i,o,!0,!0)}})}_setAttr(t){if(t.startsWith("data-v-"))return;const n=this.hasAttribute(t);let r=n?this.getAttribute(t):h_;const i=pa(t);n&&this._numberProps&&this._numberProps[i]&&(r=K0(r)),this._setProp(i,r,!1,!0)}_getProp(t){return this._props[t]}_setProp(t,n,r=!0,i=!1){if(n!==this._props[t]&&(n===h_?delete this._props[t]:(this._props[t]=n,t==="key"&&this._app&&(this._app._ceVNode.key=n)),i&&this._instance&&this._update(),r)){const o=this._ob;o&&o.disconnect(),n===!0?this.setAttribute(Cl(t),""):typeof n=="string"||typeof n=="number"?this.setAttribute(Cl(t),n+""):n||this.removeAttribute(Cl(t)),o&&o.observe(this,{attributes:!0})}}_update(){Q4(this._createVNode(),this._root)}_createVNode(){const t={};this.shadowRoot||(t.onVnodeMounted=t.onVnodeUpdated=this._renderSlots.bind(this));const n=ci(this._def,os(t,this._props));return this._instance||(n.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const i=(o,s)=>{this.dispatchEvent(new CustomEvent(o,Pg(s[0])?os({detail:s},s[0]):{detail:s}))};r.emit=(o,...s)=>{i(o,s),Cl(o)!==o&&i(Cl(o),s)},this._setParent()}),n}_applyStyles(t,n){if(!t)return;if(n){if(n===this._def||this._styleChildren.has(n))return;this._styleChildren.add(n)}const r=this._nonce;for(let i=t.length-1;i>=0;i--){const o=document.createElement("style");r&&o.setAttribute("nonce",r),o.textContent=t[i],this.shadowRoot.prepend(o)}}_parseSlots(){const t=this._slots={};let n;for(;n=this.firstChild;){const r=n.nodeType===1&&n.getAttribute("slot")||"default";(t[r]||(t[r]=[])).push(n),this.removeChild(n)}}_renderSlots(){const t=(this._teleportTarget||this).querySelectorAll("slot"),n=this._instance.type.__scopeId;for(let r=0;r<t.length;r++){const i=t[r],o=i.getAttribute("name")||"default",s=this._slots[o],u=i.parentNode;if(s)for(const f of s){if(n&&f.nodeType===1){const d=n+"-s",m=document.createTreeWalker(f,1);f.setAttribute(d,"");let y;for(;y=m.nextNode();)y.setAttribute(d,"")}u.insertBefore(f,i)}else for(;i.firstChild;)u.insertBefore(i.firstChild,i);u.removeChild(i)}}_injectChildStyle(t){this._applyStyles(t.styles,t)}_removeChildStyle(t){}}function G4(e){const t=yu(),n=t&&t.ce;return n||null}function XM(){const e=G4();return e&&e.shadowRoot}function QM(e="$style"){{const t=yu();if(!t)return ki;const n=t.type.__cssModules;if(!n)return ki;const r=n[e];return r||ki}}const q4=new WeakMap,W4=new WeakMap,ag=Symbol("_moveCb"),d_=Symbol("_enterCb"),eA=e=>(delete e.props.mode,e),tA=eA({name:"TransitionGroup",props:os({},j4,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=yu(),r=W1();let i,o;return zg(()=>{if(!i.length)return;const s=e.moveClass||`${e.name||"v"}-move`;if(!oA(i[0].el,n.vnode.el,s))return;i.forEach(rA),i.forEach(iA);const u=i.filter(sA);Gv(),u.forEach(f=>{const d=f.el,m=d.style;ic(d,s),m.transform=m.webkitTransform=m.transitionDuration="";const y=d[ag]=w=>{w&&w.target!==d||(!w||/transform$/.test(w.propertyName))&&(d.removeEventListener("transitionend",y),d[ag]=null,of(d,s))};d.addEventListener("transitionend",y)})}),()=>{const s=Ai(e),u=z4(s);let f=s.tag||Rn;if(i=[],o)for(let d=0;d<o.length;d++){const m=o[d];m.el&&m.el instanceof Element&&(i.push(m),$c(m,ed(m,u,r,n)),q4.set(m,m.el.getBoundingClientRect()))}o=t.default?Fg(t.default()):[];for(let d=0;d<o.length;d++){const m=o[d];m.key!=null&&$c(m,ed(m,u,r,n))}return ci(f,null,o)}}}),nA=tA;function rA(e){const t=e.el;t[ag]&&t[ag](),t[d_]&&t[d_]()}function iA(e){W4.set(e,e.el.getBoundingClientRect())}function sA(e){const t=q4.get(e),n=W4.get(e),r=t.left-n.left,i=t.top-n.top;if(r||i){const o=e.el.style;return o.transform=o.webkitTransform=`translate(${r}px,${i}px)`,o.transitionDuration="0s",e}}function oA(e,t,n){const r=e.cloneNode(),i=e[nd];i&&i.forEach(u=>{u.split(/\s+/).forEach(f=>f&&r.classList.remove(f))}),n.split(/\s+/).forEach(u=>u&&r.classList.add(u)),r.style.display="none";const o=t.nodeType===1?t:t.parentNode;o.appendChild(r);const{hasTransform:s}=$4(r);return o.removeChild(r),s}const Lf=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Qn(t)?n=>Wh(t,n):t};function aA(e){e.target.composing=!0}function p_(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const gu=Symbol("_assign"),ei={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e[gu]=Lf(i);const o=r||i.props&&i.props.type==="number";jc(e,t?"change":"input",s=>{if(s.target.composing)return;let u=e.value;n&&(u=u.trim()),o&&(u=Z0(u)),e[gu](u)}),n&&jc(e,"change",()=>{e.value=e.value.trim()}),t||(jc(e,"compositionstart",aA),jc(e,"compositionend",p_),jc(e,"change",p_))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:i,number:o}},s){if(e[gu]=Lf(s),e.composing)return;const u=(o||e.type==="number")&&!/^0\d/.test(e.value)?Z0(e.value):e.value,f=t??"";u!==f&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||i&&e.value.trim()===f)||(e.value=f))}},xl={deep:!0,created(e,t,n){e[gu]=Lf(n),jc(e,"change",()=>{const r=e._modelValue,i=rd(e),o=e.checked,s=e[gu];if(Qn(r)){const u=kg(r,i),f=u!==-1;if(o&&!f)s(r.concat(i));else if(!o&&f){const d=[...r];d.splice(u,1),s(d)}}else if(oh(r)){const u=new Set(r);o?u.add(i):u.delete(i),s(u)}else s(Z4(e,o))})},mounted:g_,beforeUpdate(e,t,n){e[gu]=Lf(n),g_(e,t,n)}};function g_(e,{value:t,oldValue:n},r){e._modelValue=t;let i;if(Qn(t))i=kg(t,r.props.value)>-1;else if(oh(t))i=t.has(r.props.value);else{if(t===n)return;i=wf(t,Z4(e,!0))}e.checked!==i&&(e.checked=i)}const iy={created(e,{value:t},n){e.checked=wf(t,n.props.value),e[gu]=Lf(n),jc(e,"change",()=>{e[gu](rd(e))})},beforeUpdate(e,{value:t,oldValue:n},r){e[gu]=Lf(r),t!==n&&(e.checked=wf(t,r.props.value))}},ss={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const i=oh(t);jc(e,"change",()=>{const o=Array.prototype.filter.call(e.options,s=>s.selected).map(s=>n?Z0(rd(s)):rd(s));e[gu](e.multiple?i?new Set(o):o:o[0]),e._assigning=!0,Ko(()=>{e._assigning=!1})}),e[gu]=Lf(r)},mounted(e,{value:t}){m_(e,t)},beforeUpdate(e,t,n){e[gu]=Lf(n)},updated(e,{value:t}){e._assigning||m_(e,t)}};function m_(e,t){const n=e.multiple,r=Qn(t);if(!(n&&!r&&!oh(t))){for(let i=0,o=e.options.length;i<o;i++){const s=e.options[i],u=rd(s);if(n)if(r){const f=typeof u;f==="string"||f==="number"?s.selected=t.some(d=>String(d)===String(u)):s.selected=kg(t,u)>-1}else s.selected=t.has(u);else if(wf(rd(s),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function rd(e){return"_value"in e?e._value:e.value}function Z4(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const sy={created(e,t,n){h0(e,t,n,null,"created")},mounted(e,t,n){h0(e,t,n,null,"mounted")},beforeUpdate(e,t,n,r){h0(e,t,n,r,"beforeUpdate")},updated(e,t,n,r){h0(e,t,n,r,"updated")}};function K4(e,t){switch(e){case"SELECT":return ss;case"TEXTAREA":return ei;default:switch(t){case"checkbox":return xl;case"radio":return iy;default:return ei}}}function h0(e,t,n,r,i){const s=K4(e.tagName,n.props&&n.props.type)[i];s&&s(e,t,n,r)}function lA(){ei.getSSRProps=({value:e})=>({value:e}),iy.getSSRProps=({value:e},t)=>{if(t.props&&wf(t.props.value,e))return{checked:!0}},xl.getSSRProps=({value:e},t)=>{if(Qn(e)){if(t.props&&kg(e,t.props.value)>-1)return{checked:!0}}else if(oh(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}},sy.getSSRProps=(e,t)=>{if(typeof t.type!="string")return;const n=K4(t.type.toUpperCase(),t.props&&t.props.type);if(n.getSSRProps)return n.getSSRProps(e,t)}}const uA=["ctrl","shift","alt","meta"],cA={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>uA.some(n=>e[`${n}Key`]&&!t.includes(n))},Vc=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(i,...o)=>{for(let s=0;s<t.length;s++){const u=cA[t[s]];if(u&&u(i,t))return}return e(i,...o)})},fA={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},hA=(e,t)=>{const n=e._withKeys||(e._withKeys={}),r=t.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const o=Cl(i.key);if(t.some(s=>s===o||fA[s]===o))return e(i)})},Y4=os({patchProp:ZM},TM);let Xd,v_=!1;function J4(){return Xd||(Xd=h4(Y4))}function X4(){return Xd=v_?Xd:d4(Y4),v_=!0,Xd}const Q4=(...e)=>{J4().render(...e)},dA=(...e)=>{X4().hydrate(...e)},lg=(...e)=>{const t=J4().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=n5(r);if(!i)return;const o=t._component;!kr(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const s=n(i,!1,t5(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},t},e5=(...e)=>{const t=X4().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=n5(r);if(i)return n(i,!0,t5(i))},t};function t5(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function n5(e){return ps(e)?document.querySelector(e):e}let y_=!1;const pA=()=>{y_||(y_=!0,lA(),IM())};/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const gA=()=>{},mA=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:zw,BaseTransitionPropsValidators:Z1,Comment:ko,DeprecationTypes:MM,EffectScope:R1,ErrorCodes:UP,ErrorTypeStrings:wM,Fragment:Rn,KeepAlive:d6,ReactiveEffect:up,Static:Qf,Suspense:rM,Teleport:P0,Text:_f,TrackOpTypes:OP,Transition:Hv,TransitionGroup:nA,TriggerOpTypes:IP,VueElement:Gg,assertNumber:$P,callWithAsyncErrorHandling:mu,callWithErrorHandling:ud,camelize:pa,capitalize:Cp,cloneVNode:vc,compatUtils:PM,compile:gA,computed:gr,createApp:lg,createBlock:za,createCommentVNode:un,createElementBlock:Ge,createElementVNode:E,createHydrationRenderer:d4,createPropsRestProxy:D6,createRenderer:h4,createSSRApp:e5,createSlots:Xw,createStaticVNode:uc,createTextVNode:di,createVNode:ci,customRef:Cw,defineAsyncComponent:f6,defineComponent:oo,defineCustomElement:H4,defineEmits:x6,defineExpose:L6,defineModel:E6,defineOptions:S6,defineProps:w6,defineSSRCustomElement:YM,defineSlots:C6,devtools:xM,effect:iP,effectScope:F1,getCurrentInstance:yu,getCurrentScope:j1,getCurrentWatcher:RP,getTransitionRawChildren:Fg,guardReactiveProps:M4,h:Vg,handleError:ah,hasInjectionContext:n4,hydrate:dA,hydrateOnIdle:s6,hydrateOnInteraction:u6,hydrateOnMediaQuery:l6,hydrateOnVisible:a6,initCustomFormatter:yM,initDirectivesForSSR:pA,inject:Zl,isMemoSame:O4,isProxy:Og,isReactive:hc,isReadonly:xf,isRef:Zs,isRuntimeOnly:gM,isShallow:Wl,isVNode:Uc,markRaw:Ig,mergeDefaults:k6,mergeModels:T6,mergeProps:A4,nextTick:Ko,normalizeClass:Ii,normalizeProps:QE,normalizeStyle:tl,onActivated:Uw,onBeforeMount:Gw,onBeforeUnmount:cd,onBeforeUpdate:Y1,onDeactivated:Vw,onErrorCaptured:Kw,onMounted:Fo,onRenderTracked:Zw,onRenderTriggered:Ww,onScopeDispose:lw,onServerPrefetch:qw,onUnmounted:mc,onUpdated:zg,onWatcherCleanup:Mw,openBlock:Ue,popScopeId:WP,provide:Yd,proxyRefs:G1,pushScopeId:qP,queuePostFlushCb:hp,reactive:Yl,readonly:Iu,ref:Rt,registerRuntimeCompiler:pM,render:Q4,renderList:Nr,renderSlot:y6,resolveComponent:Yw,resolveDirective:v6,resolveDynamicComponent:m6,resolveFilter:EM,resolveTransitionHooks:ed,setBlockTracking:Rv,setDevtoolsHook:LM,setTransitionHooks:$c,shallowReactive:V1,shallowReadonly:SP,shallowRef:H1,ssrContextKey:v4,ssrUtils:CM,stop:sP,toDisplayString:Wt,toHandlerKey:Gd,toHandlers:_6,toRaw:Ai,toRef:DP,toRefs:Ew,toValue:PP,transformVNodeArgs:uM,triggerRef:EP,unref:qn,useAttrs:A6,useCssModule:QM,useCssVars:RM,useHost:G4,useId:JP,useModel:Y6,useSSRContext:y4,useShadowRoot:XM,useSlots:M6,useTemplateRef:XP,useTransitionState:W1,vModelCheckbox:xl,vModelDynamic:sy,vModelRadio:iy,vModelSelect:ss,vModelText:ei,vShow:Hg,version:I4,warn:bM,watch:bs,watchEffect:vp,watchPostEffect:Z6,watchSyncEffect:_4,withAsyncContext:B6,withCtx:Gl,withDefaults:P6,withDirectives:In,withKeys:hA,withMemo:_M,withModifiers:Vc,withScopeId:ZP},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let r5;const qg=e=>r5=e,i5=Symbol();function Wv(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Qd;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Qd||(Qd={}));function vA(){const e=F1(!0),t=e.run(()=>Rt({}));let n=[],r=[];const i=Ig({install(o){qg(i),i._a=o,o.provide(i5,i),o.config.globalProperties.$pinia=i,r.forEach(s=>n.push(s)),r=[]},use(o){return this._a?n.push(o):r.push(o),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}const s5=()=>{};function __(e,t,n,r=s5){e.push(t);const i=()=>{const o=e.indexOf(t);o>-1&&(e.splice(o,1),r())};return!n&&j1()&&lw(i),i}function Ph(e,...t){e.slice().forEach(n=>{n(...t)})}const yA=e=>e(),b_=Symbol(),Zm=Symbol();function Zv(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,r)=>e.set(r,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],i=e[n];Wv(i)&&Wv(r)&&e.hasOwnProperty(n)&&!Zs(r)&&!hc(r)?e[n]=Zv(i,r):e[n]=r}return e}const _A=Symbol();function bA(e){return!Wv(e)||!e.hasOwnProperty(_A)}const{assign:af}=Object;function wA(e){return!!(Zs(e)&&e.effect)}function xA(e,t,n,r){const{state:i,actions:o,getters:s}=t,u=n.state.value[e];let f;function d(){u||(n.state.value[e]=i?i():{});const m=Ew(n.state.value[e]);return af(m,o,Object.keys(s||{}).reduce((y,w)=>(y[w]=Ig(gr(()=>{qg(n);const _=n._s.get(e);return s[w].call(_,_)})),y),{}))}return f=o5(e,d,t,n,r,!0),f}function o5(e,t,n={},r,i,o){let s;const u=af({actions:{}},n),f={deep:!0};let d,m,y=[],w=[],_;const M=r.state.value[e];!o&&!M&&(r.state.value[e]={}),Rt({});let k;function R(G){let I;d=m=!1,typeof G=="function"?(G(r.state.value[e]),I={type:Qd.patchFunction,storeId:e,events:_}):(Zv(r.state.value[e],G),I={type:Qd.patchObject,payload:G,storeId:e,events:_});const K=k=Symbol();Ko().then(()=>{k===K&&(d=!0)}),m=!0,Ph(y,I,r.state.value[e])}const N=o?function(){const{state:I}=n,K=I?I():{};this.$patch($=>{af($,K)})}:s5;function j(){s.stop(),y=[],w=[],r._s.delete(e)}const J=(G,I="")=>{if(b_ in G)return G[Zm]=I,G;const K=function(){qg(r);const $=Array.from(arguments),O=[],z=[];function V(X){O.push(X)}function W(X){z.push(X)}Ph(w,{args:$,name:K[Zm],store:ae,after:V,onError:W});let q;try{q=G.apply(this&&this.$id===e?this:ae,$)}catch(X){throw Ph(z,X),X}return q instanceof Promise?q.then(X=>(Ph(O,X),X)).catch(X=>(Ph(z,X),Promise.reject(X))):(Ph(O,q),q)};return K[b_]=!0,K[Zm]=I,K},te={_p:r,$id:e,$onAction:__.bind(null,w),$patch:R,$reset:N,$subscribe(G,I={}){const K=__(y,G,I.detached,()=>$()),$=s.run(()=>bs(()=>r.state.value[e],O=>{(I.flush==="sync"?m:d)&&G({storeId:e,type:Qd.direct,events:_},O)},af({},f,I)));return K},$dispose:j},ae=Yl(te);r._s.set(e,ae);const xe=(r._a&&r._a.runWithContext||yA)(()=>r._e.run(()=>(s=F1()).run(()=>t({action:J}))));for(const G in xe){const I=xe[G];if(Zs(I)&&!wA(I)||hc(I))o||(M&&bA(I)&&(Zs(I)?I.value=M[G]:Zv(I,M[G])),r.state.value[e][G]=I);else if(typeof I=="function"){const K=J(I,G);xe[G]=K,u.actions[G]=I}}return af(ae,xe),af(Ai(ae),xe),Object.defineProperty(ae,"$state",{get:()=>r.state.value[e],set:G=>{R(I=>{af(I,G)})}}),r._p.forEach(G=>{af(ae,s.run(()=>G({store:ae,app:r._a,pinia:r,options:u})))}),M&&o&&n.hydrate&&n.hydrate(ae.$state,M),d=!0,m=!0,ae}/*! #__NO_SIDE_EFFECTS__ */function Ap(e,t,n){let r,i;const o=typeof t=="function";typeof e=="string"?(r=e,i=o?n:t):(i=e,r=e.id);function s(u,f){const d=n4();return u=u||(d?Zl(i5,null):null),u&&qg(u),u=r5,u._s.has(r)||(o?o5(r,t,i,u):xA(r,i,u)),u._s.get(r)}return s.$id=r,s}function a5(e,t){return function(){return e.apply(t,arguments)}}const{toString:LA}=Object.prototype,{getPrototypeOf:oy}=Object,Wg=(e=>t=>{const n=LA.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Gu=e=>(e=e.toLowerCase(),t=>Wg(t)===e),Zg=e=>t=>typeof t===e,{isArray:fd}=Array,_p=Zg("undefined");function SA(e){return e!==null&&!_p(e)&&e.constructor!==null&&!_p(e.constructor)&&Kl(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const l5=Gu("ArrayBuffer");function CA(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&l5(e.buffer),t}const EA=Zg("string"),Kl=Zg("function"),u5=Zg("number"),Kg=e=>e!==null&&typeof e=="object",PA=e=>e===!0||e===!1,D0=e=>{if(Wg(e)!=="object")return!1;const t=oy(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},MA=Gu("Date"),AA=Gu("File"),kA=Gu("Blob"),TA=Gu("FileList"),DA=e=>Kg(e)&&Kl(e.pipe),BA=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Kl(e.append)&&((t=Wg(e))==="formdata"||t==="object"&&Kl(e.toString)&&e.toString()==="[object FormData]"))},NA=Gu("URLSearchParams"),[OA,IA,RA,FA]=["ReadableStream","Request","Response","Headers"].map(Gu),jA=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function kp(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),fd(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const o=n?Object.getOwnPropertyNames(e):Object.keys(e),s=o.length;let u;for(r=0;r<s;r++)u=o[r],t.call(null,e[u],u,e)}}function c5(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const Zf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,f5=e=>!_p(e)&&e!==Zf;function Kv(){const{caseless:e}=f5(this)&&this||{},t={},n=(r,i)=>{const o=e&&c5(t,i)||i;D0(t[o])&&D0(r)?t[o]=Kv(t[o],r):D0(r)?t[o]=Kv({},r):fd(r)?t[o]=r.slice():t[o]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&kp(arguments[r],n);return t}const zA=(e,t,n,{allOwnKeys:r}={})=>(kp(t,(i,o)=>{n&&Kl(i)?e[o]=a5(i,n):e[o]=i},{allOwnKeys:r}),e),$A=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),UA=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},VA=(e,t,n,r)=>{let i,o,s;const u={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)s=i[o],(!r||r(s,e,t))&&!u[s]&&(t[s]=e[s],u[s]=!0);e=n!==!1&&oy(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},HA=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},GA=e=>{if(!e)return null;if(fd(e))return e;let t=e.length;if(!u5(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},qA=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&oy(Uint8Array)),WA=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=r.next())&&!i.done;){const o=i.value;t.call(e,o[0],o[1])}},ZA=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},KA=Gu("HTMLFormElement"),YA=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),w_=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),JA=Gu("RegExp"),h5=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};kp(n,(i,o)=>{let s;(s=t(i,o,e))!==!1&&(r[o]=s||i)}),Object.defineProperties(e,r)},XA=e=>{h5(e,(t,n)=>{if(Kl(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Kl(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},QA=(e,t)=>{const n={},r=i=>{i.forEach(o=>{n[o]=!0})};return fd(e)?r(e):r(String(e).split(t)),n},ek=()=>{},tk=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function nk(e){return!!(e&&Kl(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const rk=e=>{const t=new Array(10),n=(r,i)=>{if(Kg(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[i]=r;const o=fd(r)?[]:{};return kp(r,(s,u)=>{const f=n(s,i+1);!_p(f)&&(o[u]=f)}),t[i]=void 0,o}}return r};return n(e,0)},ik=Gu("AsyncFunction"),sk=e=>e&&(Kg(e)||Kl(e))&&Kl(e.then)&&Kl(e.catch),d5=((e,t)=>e?setImmediate:t?((n,r)=>(Zf.addEventListener("message",({source:i,data:o})=>{i===Zf&&o===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Zf.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Kl(Zf.postMessage)),ok=typeof queueMicrotask<"u"?queueMicrotask.bind(Zf):typeof process<"u"&&process.nextTick||d5,Kt={isArray:fd,isArrayBuffer:l5,isBuffer:SA,isFormData:BA,isArrayBufferView:CA,isString:EA,isNumber:u5,isBoolean:PA,isObject:Kg,isPlainObject:D0,isReadableStream:OA,isRequest:IA,isResponse:RA,isHeaders:FA,isUndefined:_p,isDate:MA,isFile:AA,isBlob:kA,isRegExp:JA,isFunction:Kl,isStream:DA,isURLSearchParams:NA,isTypedArray:qA,isFileList:TA,forEach:kp,merge:Kv,extend:zA,trim:jA,stripBOM:$A,inherits:UA,toFlatObject:VA,kindOf:Wg,kindOfTest:Gu,endsWith:HA,toArray:GA,forEachEntry:WA,matchAll:ZA,isHTMLForm:KA,hasOwnProperty:w_,hasOwnProp:w_,reduceDescriptors:h5,freezeMethods:XA,toObjectSet:QA,toCamelCase:YA,noop:ek,toFiniteNumber:tk,findKey:c5,global:Zf,isContextDefined:f5,isSpecCompliantForm:nk,toJSONObject:rk,isAsyncFn:ik,isThenable:sk,setImmediate:d5,asap:ok};function ni(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Kt.inherits(ni,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Kt.toJSONObject(this.config),code:this.code,status:this.status}}});const p5=ni.prototype,g5={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{g5[e]={value:e}});Object.defineProperties(ni,g5);Object.defineProperty(p5,"isAxiosError",{value:!0});ni.from=(e,t,n,r,i,o)=>{const s=Object.create(p5);return Kt.toFlatObject(e,s,function(f){return f!==Error.prototype},u=>u!=="isAxiosError"),ni.call(s,e.message,t,n,r,i),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};const ak=null;function Yv(e){return Kt.isPlainObject(e)||Kt.isArray(e)}function m5(e){return Kt.endsWith(e,"[]")?e.slice(0,-2):e}function x_(e,t,n){return e?e.concat(t).map(function(i,o){return i=m5(i),!n&&o?"["+i+"]":i}).join(n?".":""):t}function lk(e){return Kt.isArray(e)&&!e.some(Yv)}const uk=Kt.toFlatObject(Kt,{},null,function(t){return/^is[A-Z]/.test(t)});function Yg(e,t,n){if(!Kt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Kt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(k,R){return!Kt.isUndefined(R[k])});const r=n.metaTokens,i=n.visitor||m,o=n.dots,s=n.indexes,f=(n.Blob||typeof Blob<"u"&&Blob)&&Kt.isSpecCompliantForm(t);if(!Kt.isFunction(i))throw new TypeError("visitor must be a function");function d(M){if(M===null)return"";if(Kt.isDate(M))return M.toISOString();if(!f&&Kt.isBlob(M))throw new ni("Blob is not supported. Use a Buffer instead.");return Kt.isArrayBuffer(M)||Kt.isTypedArray(M)?f&&typeof Blob=="function"?new Blob([M]):Buffer.from(M):M}function m(M,k,R){let N=M;if(M&&!R&&typeof M=="object"){if(Kt.endsWith(k,"{}"))k=r?k:k.slice(0,-2),M=JSON.stringify(M);else if(Kt.isArray(M)&&lk(M)||(Kt.isFileList(M)||Kt.endsWith(k,"[]"))&&(N=Kt.toArray(M)))return k=m5(k),N.forEach(function(J,te){!(Kt.isUndefined(J)||J===null)&&t.append(s===!0?x_([k],te,o):s===null?k:k+"[]",d(J))}),!1}return Yv(M)?!0:(t.append(x_(R,k,o),d(M)),!1)}const y=[],w=Object.assign(uk,{defaultVisitor:m,convertValue:d,isVisitable:Yv});function _(M,k){if(!Kt.isUndefined(M)){if(y.indexOf(M)!==-1)throw Error("Circular reference detected in "+k.join("."));y.push(M),Kt.forEach(M,function(N,j){(!(Kt.isUndefined(N)||N===null)&&i.call(t,N,Kt.isString(j)?j.trim():j,k,w))===!0&&_(N,k?k.concat(j):[j])}),y.pop()}}if(!Kt.isObject(e))throw new TypeError("data must be an object");return _(e),t}function L_(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function ay(e,t){this._pairs=[],e&&Yg(e,this,t)}const v5=ay.prototype;v5.append=function(t,n){this._pairs.push([t,n])};v5.toString=function(t){const n=t?function(r){return t.call(this,r,L_)}:L_;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function ck(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function y5(e,t,n){if(!t)return e;const r=n&&n.encode||ck;Kt.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let o;if(i?o=i(t,n):o=Kt.isURLSearchParams(t)?t.toString():new ay(t,n).toString(r),o){const s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class S_{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Kt.forEach(this.handlers,function(r){r!==null&&t(r)})}}const _5={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},fk=typeof URLSearchParams<"u"?URLSearchParams:ay,hk=typeof FormData<"u"?FormData:null,dk=typeof Blob<"u"?Blob:null,pk={isBrowser:!0,classes:{URLSearchParams:fk,FormData:hk,Blob:dk},protocols:["http","https","file","blob","url","data"]},ly=typeof window<"u"&&typeof document<"u",Jv=typeof navigator=="object"&&navigator||void 0,gk=ly&&(!Jv||["ReactNative","NativeScript","NS"].indexOf(Jv.product)<0),mk=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",vk=ly&&window.location.href||"http://localhost",yk=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ly,hasStandardBrowserEnv:gk,hasStandardBrowserWebWorkerEnv:mk,navigator:Jv,origin:vk},Symbol.toStringTag,{value:"Module"})),Ia={...yk,...pk};function _k(e,t){return Yg(e,new Ia.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,o){return Ia.isNode&&Kt.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function bk(e){return Kt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function wk(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}function b5(e){function t(n,r,i,o){let s=n[o++];if(s==="__proto__")return!0;const u=Number.isFinite(+s),f=o>=n.length;return s=!s&&Kt.isArray(i)?i.length:s,f?(Kt.hasOwnProp(i,s)?i[s]=[i[s],r]:i[s]=r,!u):((!i[s]||!Kt.isObject(i[s]))&&(i[s]=[]),t(n,r,i[s],o)&&Kt.isArray(i[s])&&(i[s]=wk(i[s])),!u)}if(Kt.isFormData(e)&&Kt.isFunction(e.entries)){const n={};return Kt.forEachEntry(e,(r,i)=>{t(bk(r),i,n,0)}),n}return null}function xk(e,t,n){if(Kt.isString(e))try{return(t||JSON.parse)(e),Kt.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Tp={transitional:_5,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,o=Kt.isObject(t);if(o&&Kt.isHTMLForm(t)&&(t=new FormData(t)),Kt.isFormData(t))return i?JSON.stringify(b5(t)):t;if(Kt.isArrayBuffer(t)||Kt.isBuffer(t)||Kt.isStream(t)||Kt.isFile(t)||Kt.isBlob(t)||Kt.isReadableStream(t))return t;if(Kt.isArrayBufferView(t))return t.buffer;if(Kt.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let u;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return _k(t,this.formSerializer).toString();if((u=Kt.isFileList(t))||r.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return Yg(u?{"files[]":t}:t,f&&new f,this.formSerializer)}}return o||i?(n.setContentType("application/json",!1),xk(t)):t}],transformResponse:[function(t){const n=this.transitional||Tp.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Kt.isResponse(t)||Kt.isReadableStream(t))return t;if(t&&Kt.isString(t)&&(r&&!this.responseType||i)){const s=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(u){if(s)throw u.name==="SyntaxError"?ni.from(u,ni.ERR_BAD_RESPONSE,this,null,this.response):u}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ia.classes.FormData,Blob:Ia.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Kt.forEach(["delete","get","head","post","put","patch"],e=>{Tp.headers[e]={}});const Lk=Kt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Sk=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(s){i=s.indexOf(":"),n=s.substring(0,i).trim().toLowerCase(),r=s.substring(i+1).trim(),!(!n||t[n]&&Lk[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},C_=Symbol("internals");function Cd(e){return e&&String(e).trim().toLowerCase()}function B0(e){return e===!1||e==null?e:Kt.isArray(e)?e.map(B0):String(e)}function Ck(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const Ek=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Km(e,t,n,r,i){if(Kt.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!Kt.isString(t)){if(Kt.isString(r))return t.indexOf(r)!==-1;if(Kt.isRegExp(r))return r.test(t)}}function Pk(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function Mk(e,t){const n=Kt.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,o,s){return this[r].call(this,t,i,o,s)},configurable:!0})})}let El=class{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function o(u,f,d){const m=Cd(f);if(!m)throw new Error("header name must be a non-empty string");const y=Kt.findKey(i,m);(!y||i[y]===void 0||d===!0||d===void 0&&i[y]!==!1)&&(i[y||f]=B0(u))}const s=(u,f)=>Kt.forEach(u,(d,m)=>o(d,m,f));if(Kt.isPlainObject(t)||t instanceof this.constructor)s(t,n);else if(Kt.isString(t)&&(t=t.trim())&&!Ek(t))s(Sk(t),n);else if(Kt.isHeaders(t))for(const[u,f]of t.entries())o(f,u,r);else t!=null&&o(n,t,r);return this}get(t,n){if(t=Cd(t),t){const r=Kt.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return Ck(i);if(Kt.isFunction(n))return n.call(this,i,r);if(Kt.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Cd(t),t){const r=Kt.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Km(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function o(s){if(s=Cd(s),s){const u=Kt.findKey(r,s);u&&(!n||Km(r,r[u],u,n))&&(delete r[u],i=!0)}}return Kt.isArray(t)?t.forEach(o):o(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const o=n[r];(!t||Km(this,this[o],o,t,!0))&&(delete this[o],i=!0)}return i}normalize(t){const n=this,r={};return Kt.forEach(this,(i,o)=>{const s=Kt.findKey(r,o);if(s){n[s]=B0(i),delete n[o];return}const u=t?Pk(o):String(o).trim();u!==o&&delete n[o],n[u]=B0(i),r[u]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Kt.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&Kt.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[C_]=this[C_]={accessors:{}}).accessors,i=this.prototype;function o(s){const u=Cd(s);r[u]||(Mk(i,s),r[u]=!0)}return Kt.isArray(t)?t.forEach(o):o(t),this}};El.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Kt.reduceDescriptors(El.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});Kt.freezeMethods(El);function Ym(e,t){const n=this||Tp,r=t||n,i=El.from(r.headers);let o=r.data;return Kt.forEach(e,function(u){o=u.call(n,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function w5(e){return!!(e&&e.__CANCEL__)}function hd(e,t,n){ni.call(this,e??"canceled",ni.ERR_CANCELED,t,n),this.name="CanceledError"}Kt.inherits(hd,ni,{__CANCEL__:!0});function x5(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new ni("Request failed with status code "+n.status,[ni.ERR_BAD_REQUEST,ni.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Ak(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function kk(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,o=0,s;return t=t!==void 0?t:1e3,function(f){const d=Date.now(),m=r[o];s||(s=d),n[i]=f,r[i]=d;let y=o,w=0;for(;y!==i;)w+=n[y++],y=y%e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),d-s<t)return;const _=m&&d-m;return _?Math.round(w*1e3/_):void 0}}function Tk(e,t){let n=0,r=1e3/t,i,o;const s=(d,m=Date.now())=>{n=m,i=null,o&&(clearTimeout(o),o=null),e.apply(null,d)};return[(...d)=>{const m=Date.now(),y=m-n;y>=r?s(d,m):(i=d,o||(o=setTimeout(()=>{o=null,s(i)},r-y)))},()=>i&&s(i)]}const ug=(e,t,n=3)=>{let r=0;const i=kk(50,250);return Tk(o=>{const s=o.loaded,u=o.lengthComputable?o.total:void 0,f=s-r,d=i(f),m=s<=u;r=s;const y={loaded:s,total:u,progress:u?s/u:void 0,bytes:f,rate:d||void 0,estimated:d&&u&&m?(u-s)/d:void 0,event:o,lengthComputable:u!=null,[t?"download":"upload"]:!0};e(y)},n)},E_=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},P_=e=>(...t)=>Kt.asap(()=>e(...t)),Dk=Ia.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Ia.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Ia.origin),Ia.navigator&&/(msie|trident)/i.test(Ia.navigator.userAgent)):()=>!0,Bk=Ia.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const s=[e+"="+encodeURIComponent(t)];Kt.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),Kt.isString(r)&&s.push("path="+r),Kt.isString(i)&&s.push("domain="+i),o===!0&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Nk(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Ok(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function L5(e,t,n){let r=!Nk(t);return e&&(r||n==!1)?Ok(e,t):t}const M_=e=>e instanceof El?{...e}:e;function sh(e,t){t=t||{};const n={};function r(d,m,y,w){return Kt.isPlainObject(d)&&Kt.isPlainObject(m)?Kt.merge.call({caseless:w},d,m):Kt.isPlainObject(m)?Kt.merge({},m):Kt.isArray(m)?m.slice():m}function i(d,m,y,w){if(Kt.isUndefined(m)){if(!Kt.isUndefined(d))return r(void 0,d,y,w)}else return r(d,m,y,w)}function o(d,m){if(!Kt.isUndefined(m))return r(void 0,m)}function s(d,m){if(Kt.isUndefined(m)){if(!Kt.isUndefined(d))return r(void 0,d)}else return r(void 0,m)}function u(d,m,y){if(y in t)return r(d,m);if(y in e)return r(void 0,d)}const f={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:u,headers:(d,m,y)=>i(M_(d),M_(m),y,!0)};return Kt.forEach(Object.keys(Object.assign({},e,t)),function(m){const y=f[m]||i,w=y(e[m],t[m],m);Kt.isUndefined(w)&&y!==u||(n[m]=w)}),n}const S5=e=>{const t=sh({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:o,headers:s,auth:u}=t;t.headers=s=El.from(s),t.url=y5(L5(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),u&&s.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let f;if(Kt.isFormData(n)){if(Ia.hasStandardBrowserEnv||Ia.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((f=s.getContentType())!==!1){const[d,...m]=f?f.split(";").map(y=>y.trim()).filter(Boolean):[];s.setContentType([d||"multipart/form-data",...m].join("; "))}}if(Ia.hasStandardBrowserEnv&&(r&&Kt.isFunction(r)&&(r=r(t)),r||r!==!1&&Dk(t.url))){const d=i&&o&&Bk.read(o);d&&s.set(i,d)}return t},Ik=typeof XMLHttpRequest<"u",Rk=Ik&&function(e){return new Promise(function(n,r){const i=S5(e);let o=i.data;const s=El.from(i.headers).normalize();let{responseType:u,onUploadProgress:f,onDownloadProgress:d}=i,m,y,w,_,M;function k(){_&&_(),M&&M(),i.cancelToken&&i.cancelToken.unsubscribe(m),i.signal&&i.signal.removeEventListener("abort",m)}let R=new XMLHttpRequest;R.open(i.method.toUpperCase(),i.url,!0),R.timeout=i.timeout;function N(){if(!R)return;const J=El.from("getAllResponseHeaders"in R&&R.getAllResponseHeaders()),ae={data:!u||u==="text"||u==="json"?R.responseText:R.response,status:R.status,statusText:R.statusText,headers:J,config:e,request:R};x5(function(xe){n(xe),k()},function(xe){r(xe),k()},ae),R=null}"onloadend"in R?R.onloadend=N:R.onreadystatechange=function(){!R||R.readyState!==4||R.status===0&&!(R.responseURL&&R.responseURL.indexOf("file:")===0)||setTimeout(N)},R.onabort=function(){R&&(r(new ni("Request aborted",ni.ECONNABORTED,e,R)),R=null)},R.onerror=function(){r(new ni("Network Error",ni.ERR_NETWORK,e,R)),R=null},R.ontimeout=function(){let te=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const ae=i.transitional||_5;i.timeoutErrorMessage&&(te=i.timeoutErrorMessage),r(new ni(te,ae.clarifyTimeoutError?ni.ETIMEDOUT:ni.ECONNABORTED,e,R)),R=null},o===void 0&&s.setContentType(null),"setRequestHeader"in R&&Kt.forEach(s.toJSON(),function(te,ae){R.setRequestHeader(ae,te)}),Kt.isUndefined(i.withCredentials)||(R.withCredentials=!!i.withCredentials),u&&u!=="json"&&(R.responseType=i.responseType),d&&([w,M]=ug(d,!0),R.addEventListener("progress",w)),f&&R.upload&&([y,_]=ug(f),R.upload.addEventListener("progress",y),R.upload.addEventListener("loadend",_)),(i.cancelToken||i.signal)&&(m=J=>{R&&(r(!J||J.type?new hd(null,e,R):J),R.abort(),R=null)},i.cancelToken&&i.cancelToken.subscribe(m),i.signal&&(i.signal.aborted?m():i.signal.addEventListener("abort",m)));const j=Ak(i.url);if(j&&Ia.protocols.indexOf(j)===-1){r(new ni("Unsupported protocol "+j+":",ni.ERR_BAD_REQUEST,e));return}R.send(o||null)})},Fk=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,i;const o=function(d){if(!i){i=!0,u();const m=d instanceof Error?d:this.reason;r.abort(m instanceof ni?m:new hd(m instanceof Error?m.message:m))}};let s=t&&setTimeout(()=>{s=null,o(new ni(`timeout ${t} of ms exceeded`,ni.ETIMEDOUT))},t);const u=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(o):d.removeEventListener("abort",o)}),e=null)};e.forEach(d=>d.addEventListener("abort",o));const{signal:f}=r;return f.unsubscribe=()=>Kt.asap(u),f}},jk=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},zk=async function*(e,t){for await(const n of $k(e))yield*jk(n,t)},$k=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},A_=(e,t,n,r)=>{const i=zk(e,t);let o=0,s,u=f=>{s||(s=!0,r&&r(f))};return new ReadableStream({async pull(f){try{const{done:d,value:m}=await i.next();if(d){u(),f.close();return}let y=m.byteLength;if(n){let w=o+=y;n(w)}f.enqueue(new Uint8Array(m))}catch(d){throw u(d),d}},cancel(f){return u(f),i.return()}},{highWaterMark:2})},Jg=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",C5=Jg&&typeof ReadableStream=="function",Uk=Jg&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),E5=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Vk=C5&&E5(()=>{let e=!1;const t=new Request(Ia.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),k_=64*1024,Xv=C5&&E5(()=>Kt.isReadableStream(new Response("").body)),cg={stream:Xv&&(e=>e.body)};Jg&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!cg[t]&&(cg[t]=Kt.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new ni(`Response type '${t}' is not supported`,ni.ERR_NOT_SUPPORT,r)})})})(new Response);const Hk=async e=>{if(e==null)return 0;if(Kt.isBlob(e))return e.size;if(Kt.isSpecCompliantForm(e))return(await new Request(Ia.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Kt.isArrayBufferView(e)||Kt.isArrayBuffer(e))return e.byteLength;if(Kt.isURLSearchParams(e)&&(e=e+""),Kt.isString(e))return(await Uk(e)).byteLength},Gk=async(e,t)=>{const n=Kt.toFiniteNumber(e.getContentLength());return n??Hk(t)},qk=Jg&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:o,timeout:s,onDownloadProgress:u,onUploadProgress:f,responseType:d,headers:m,withCredentials:y="same-origin",fetchOptions:w}=S5(e);d=d?(d+"").toLowerCase():"text";let _=Fk([i,o&&o.toAbortSignal()],s),M;const k=_&&_.unsubscribe&&(()=>{_.unsubscribe()});let R;try{if(f&&Vk&&n!=="get"&&n!=="head"&&(R=await Gk(m,r))!==0){let ae=new Request(t,{method:"POST",body:r,duplex:"half"}),le;if(Kt.isFormData(r)&&(le=ae.headers.get("content-type"))&&m.setContentType(le),ae.body){const[xe,G]=E_(R,ug(P_(f)));r=A_(ae.body,k_,xe,G)}}Kt.isString(y)||(y=y?"include":"omit");const N="credentials"in Request.prototype;M=new Request(t,{...w,signal:_,method:n.toUpperCase(),headers:m.normalize().toJSON(),body:r,duplex:"half",credentials:N?y:void 0});let j=await fetch(M);const J=Xv&&(d==="stream"||d==="response");if(Xv&&(u||J&&k)){const ae={};["status","statusText","headers"].forEach(I=>{ae[I]=j[I]});const le=Kt.toFiniteNumber(j.headers.get("content-length")),[xe,G]=u&&E_(le,ug(P_(u),!0))||[];j=new Response(A_(j.body,k_,xe,()=>{G&&G(),k&&k()}),ae)}d=d||"text";let te=await cg[Kt.findKey(cg,d)||"text"](j,e);return!J&&k&&k(),await new Promise((ae,le)=>{x5(ae,le,{data:te,headers:El.from(j.headers),status:j.status,statusText:j.statusText,config:e,request:M})})}catch(N){throw k&&k(),N&&N.name==="TypeError"&&/fetch/i.test(N.message)?Object.assign(new ni("Network Error",ni.ERR_NETWORK,e,M),{cause:N.cause||N}):ni.from(N,N&&N.code,e,M)}}),Qv={http:ak,xhr:Rk,fetch:qk};Kt.forEach(Qv,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const T_=e=>`- ${e}`,Wk=e=>Kt.isFunction(e)||e===null||e===!1,P5={getAdapter:e=>{e=Kt.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){n=e[o];let s;if(r=n,!Wk(n)&&(r=Qv[(s=String(n)).toLowerCase()],r===void 0))throw new ni(`Unknown adapter '${s}'`);if(r)break;i[s||"#"+o]=r}if(!r){const o=Object.entries(i).map(([u,f])=>`adapter ${u} `+(f===!1?"is not supported by the environment":"is not available in the build"));let s=t?o.length>1?`since :
`+o.map(T_).join(`
`):" "+T_(o[0]):"as no adapter specified";throw new ni("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return r},adapters:Qv};function Jm(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new hd(null,e)}function D_(e){return Jm(e),e.headers=El.from(e.headers),e.data=Ym.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),P5.getAdapter(e.adapter||Tp.adapter)(e).then(function(r){return Jm(e),r.data=Ym.call(e,e.transformResponse,r),r.headers=El.from(r.headers),r},function(r){return w5(r)||(Jm(e),r&&r.response&&(r.response.data=Ym.call(e,e.transformResponse,r.response),r.response.headers=El.from(r.response.headers))),Promise.reject(r)})}const M5="1.8.4",Xg={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Xg[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const B_={};Xg.transitional=function(t,n,r){function i(o,s){return"[Axios v"+M5+"] Transitional option '"+o+"'"+s+(r?". "+r:"")}return(o,s,u)=>{if(t===!1)throw new ni(i(s," has been removed"+(n?" in "+n:"")),ni.ERR_DEPRECATED);return n&&!B_[s]&&(B_[s]=!0,console.warn(i(s," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,s,u):!0}};Xg.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function Zk(e,t,n){if(typeof e!="object")throw new ni("options must be an object",ni.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],s=t[o];if(s){const u=e[o],f=u===void 0||s(u,o,e);if(f!==!0)throw new ni("option "+o+" must be "+f,ni.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ni("Unknown option "+o,ni.ERR_BAD_OPTION)}}const N0={assertOptions:Zk,validators:Xg},nc=N0.validators;let eh=class{constructor(t){this.defaults=t,this.interceptors={request:new S_,response:new S_}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=sh(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:o}=n;r!==void 0&&N0.assertOptions(r,{silentJSONParsing:nc.transitional(nc.boolean),forcedJSONParsing:nc.transitional(nc.boolean),clarifyTimeoutError:nc.transitional(nc.boolean)},!1),i!=null&&(Kt.isFunction(i)?n.paramsSerializer={serialize:i}:N0.assertOptions(i,{encode:nc.function,serialize:nc.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),N0.assertOptions(n,{baseUrl:nc.spelling("baseURL"),withXsrfToken:nc.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let s=o&&Kt.merge(o.common,o[n.method]);o&&Kt.forEach(["delete","get","head","post","put","patch","common"],M=>{delete o[M]}),n.headers=El.concat(s,o);const u=[];let f=!0;this.interceptors.request.forEach(function(k){typeof k.runWhen=="function"&&k.runWhen(n)===!1||(f=f&&k.synchronous,u.unshift(k.fulfilled,k.rejected))});const d=[];this.interceptors.response.forEach(function(k){d.push(k.fulfilled,k.rejected)});let m,y=0,w;if(!f){const M=[D_.bind(this),void 0];for(M.unshift.apply(M,u),M.push.apply(M,d),w=M.length,m=Promise.resolve(n);y<w;)m=m.then(M[y++],M[y++]);return m}w=u.length;let _=n;for(y=0;y<w;){const M=u[y++],k=u[y++];try{_=M(_)}catch(R){k.call(this,R);break}}try{m=D_.call(this,_)}catch(M){return Promise.reject(M)}for(y=0,w=d.length;y<w;)m=m.then(d[y++],d[y++]);return m}getUri(t){t=sh(this.defaults,t);const n=L5(t.baseURL,t.url,t.allowAbsoluteUrls);return y5(n,t.params,t.paramsSerializer)}};Kt.forEach(["delete","get","head","options"],function(t){eh.prototype[t]=function(n,r){return this.request(sh(r||{},{method:t,url:n,data:(r||{}).data}))}});Kt.forEach(["post","put","patch"],function(t){function n(r){return function(o,s,u){return this.request(sh(u||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:s}))}}eh.prototype[t]=n(),eh.prototype[t+"Form"]=n(!0)});let Kk=class A5{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const s=new Promise(u=>{r.subscribe(u),o=u}).then(i);return s.cancel=function(){r.unsubscribe(o)},s},t(function(o,s,u){r.reason||(r.reason=new hd(o,s,u),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new A5(function(i){t=i}),cancel:t}}};function Yk(e){return function(n){return e.apply(null,n)}}function Jk(e){return Kt.isObject(e)&&e.isAxiosError===!0}const e1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(e1).forEach(([e,t])=>{e1[t]=e});function k5(e){const t=new eh(e),n=a5(eh.prototype.request,t);return Kt.extend(n,eh.prototype,t,{allOwnKeys:!0}),Kt.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return k5(sh(e,i))},n}const bo=k5(Tp);bo.Axios=eh;bo.CanceledError=hd;bo.CancelToken=Kk;bo.isCancel=w5;bo.VERSION=M5;bo.toFormData=Yg;bo.AxiosError=ni;bo.Cancel=bo.CanceledError;bo.all=function(t){return Promise.all(t)};bo.spread=Yk;bo.isAxiosError=Jk;bo.mergeConfig=sh;bo.AxiosHeaders=El;bo.formToJSON=e=>b5(Kt.isHTMLForm(e)?new FormData(e):e);bo.getAdapter=P5.getAdapter;bo.HttpStatusCode=e1;bo.default=bo;const{Axios:KV,AxiosError:YV,CanceledError:JV,isCancel:XV,CancelToken:QV,VERSION:eH,all:tH,Cancel:nH,isAxiosError:rH,spread:iH,toFormData:sH,AxiosHeaders:oH,HttpStatusCode:aH,formToJSON:lH,getAdapter:uH,mergeConfig:cH}=bo,gn=Yl({measures:[],longTasks:[],memorySnapshots:[],framesPerSecond:0,lastFpsUpdate:0,frameCount:0,isRecording:!1,isEnabled:!1,startTime:0,currentOperation:null,operationStack:[],operationHistory:[]});let bf=null,Kf=null;const Xk=1e3;function Qg(){if(gn.isEnabled){gn.isRecording=!0,gn.startTime=performance.now(),gn.frameCount=0,gn.lastFpsUpdate=performance.now();try{window.PerformanceObserver&&PerformanceObserver.supportedEntryTypes.includes("longtask")&&(bf=new PerformanceObserver(e=>{e.getEntries().forEach(n=>{gn.longTasks.push({duration:n.duration,startTime:n.startTime,name:n.name,component:Vu()})})}),bf.observe({entryTypes:["longtask"]}))}catch(e){console.warn("PerformanceObserver pour longues tâches non supporté",e)}Qk(),uy()}}function fg(){gn.isRecording=!1,bf&&(bf.disconnect(),bf=null),N5()}function t1(){bf&&(bf.disconnect(),bf=null),N5(),gn.measures=[],gn.longTasks=[],gn.memorySnapshots=[],gn.operationHistory=[],gn.frameCount=0,gn.framesPerSecond=0,gn.lastFpsUpdate=0,gn.isEnabled&&Qg()}function T5(e,t,n){if(!gn.isEnabled||!gn.isRecording)return()=>{};const r=performance.now(),i=gn.currentOperation;return gn.currentOperation=e,gn.operationStack.push(e),()=>{const o=performance.now()-r;gn.operationStack.pop(),gn.currentOperation=gn.operationStack[gn.operationStack.length-1]||null,gn.measures.push({name:e,startTime:r,duration:o,component:t||Vu(),info:n,parentOperation:i||void 0}),o>10&&gn.operationHistory.push({operation:e,component:t||Vu()||"unknown",durationMs:o,timestamp:Date.now()})}}async function D5(e,t,n,r){if(!gn.isEnabled||!gn.isRecording)return t();const i=performance.now(),o=gn.currentOperation;gn.currentOperation=e,gn.operationStack.push(e);try{return await t()}finally{const s=performance.now()-i;gn.operationStack.pop(),gn.currentOperation=gn.operationStack[gn.operationStack.length-1]||null,gn.measures.push({name:e,startTime:i,duration:s,component:n||Vu(),info:r,parentOperation:o||void 0}),s>10&&gn.operationHistory.push({operation:e,component:n||Vu()||"unknown",durationMs:s,timestamp:Date.now()})}}function B5(e,t,n,r){if(!gn.isEnabled||!gn.isRecording)return t();const i=performance.now(),o=gn.currentOperation;gn.currentOperation=e,gn.operationStack.push(e);try{return t()}finally{const s=performance.now()-i;gn.operationStack.pop(),gn.currentOperation=gn.operationStack[gn.operationStack.length-1]||null,gn.measures.push({name:e,startTime:i,duration:s,component:n||Vu(),info:r,parentOperation:o||void 0}),s>10&&gn.operationHistory.push({operation:e,component:n||Vu()||"unknown",durationMs:s,timestamp:Date.now()})}}function uy(){!gn.isEnabled||!gn.isRecording||(performance.memory?gn.memorySnapshots.push({jsHeapSizeLimit:performance.memory.jsHeapSizeLimit,totalJSHeapSize:performance.memory.totalJSHeapSize,usedJSHeapSize:performance.memory.usedJSHeapSize,timestamp:performance.now()}):gn.memorySnapshots.push({timestamp:performance.now()}))}function Qk(){Kf!==null&&cancelAnimationFrame(Kf),gn.frameCount=0,gn.lastFpsUpdate=performance.now();function e(){gn.frameCount++;const t=performance.now();t-gn.lastFpsUpdate>=Xk&&(gn.framesPerSecond=Math.round(gn.frameCount*1e3/(t-gn.lastFpsUpdate)),gn.frameCount=0,gn.lastFpsUpdate=t),gn.isRecording&&(Kf=requestAnimationFrame(e))}Kf=requestAnimationFrame(e)}function N5(){Kf!==null&&(cancelAnimationFrame(Kf),Kf=null)}function Vu(){return""}function n1(e){gn.isEnabled=e,e&&!gn.isRecording?Qg():!e&&gn.isRecording&&fg()}function O5(e,t,n){return(...r)=>{if(!gn.isEnabled||!gn.isRecording)return e(...r);const i=performance.now();try{return e(...r)}finally{const o=performance.now()-i;gn.measures.push({name:t,startTime:i,duration:o,component:n||Vu(),info:{args:r}}),o>10&&gn.operationHistory.push({operation:t,component:n||Vu()||"unknown",durationMs:o,timestamp:Date.now()})}}}function I5(e,t,n){return async(...r)=>{if(!gn.isEnabled||!gn.isRecording)return await e(...r);const i=performance.now();try{return await e(...r)}finally{const o=performance.now()-i;gn.measures.push({name:t,startTime:i,duration:o,component:n||Vu(),info:{args:r}}),o>10&&gn.operationHistory.push({operation:t,component:n||Vu()||"unknown",durationMs:o,timestamp:Date.now()})}}}function eT(e,t){const n=gn.measures.filter(s=>s.startTime>=e&&s.startTime+s.duration<=t),r=new Map,i=[];n.forEach(s=>{s.parentOperation?(r.has(s.parentOperation)||r.set(s.parentOperation,[]),r.get(s.parentOperation).push(s)):i.push(s)});function o(s){const u=r.get(s.name)||[];return{operation:s.name,duration:s.duration,component:s.component,children:u.sort((f,d)=>d.duration-f.duration).map(f=>o(f))}}return i.sort((s,u)=>u.duration-s.duration).map(s=>o(s))}function r1(e,t){const n=e||gn.startTime,r=t||performance.now(),i=eT(n,r),o=r-n,s=new Map;function u(d){const m=s.get(d.operation)||{duration:0,component:d.component};m.duration+=d.duration,s.set(d.operation,m),d.children.forEach(y=>u(y))}i.forEach(d=>u(d));const f=Array.from(s.entries()).map(([d,{duration:m,component:y}])=>({operation:d,duration:m,component:y,impact:m/o*100})).sort((d,m)=>m.impact-d.impact).slice(0,10);return{criticalPaths:i,totalTime:o,bottlenecks:f}}function dd(){const e=Rt(!1);Fo(()=>{try{const r=new URL(window.location.href).searchParams.get("perf")==="true";e.value=r,n1(r),t1()}catch(n){console.warn("Erreur lors de la vérification du paramètre perf:",n),e.value=!1,n1(!1)}}),mc(()=>{gn.isRecording&&fg()});const t=(n,r)=>{if(!gn.isEnabled||!gn.isRecording)return null;const i=gn.measures.find(d=>d.name===n&&d.startTime===r);if(!i)return null;const o=i.startTime+i.duration,s=gn.measures.filter(d=>d.startTime>=i.startTime&&d.startTime<=o&&d!==i),u=gn.longTasks.filter(d=>d.startTime>=i.startTime&&d.startTime<=o),f=gn.memorySnapshots.filter(d=>d.timestamp>=i.startTime&&d.timestamp<=o);return{operation:{name:i.name,component:i.component,startTime:i.startTime,duration:i.duration,info:i.info},context:{relatedOperations:s.map(d=>({name:d.name,component:d.component,startTime:d.startTime-i.startTime,duration:d.duration,info:d.info})),longTasks:u.map(d=>({duration:d.duration,startTime:d.startTime-i.startTime,name:d.name,component:d.component})),memorySnapshots:f.map(d=>({...d,timestamp:d.timestamp-i.startTime}))},summary:{totalRelatedOperations:s.length,totalLongTasks:u.length,maxLongTaskDuration:Math.max(...u.map(d=>d.duration),0),memoryDelta:f.length>1?(f[f.length-1].usedJSHeapSize||0)-(f[0].usedJSHeapSize||0):0}}};return{isEnabled:Iu(Rt(gn.isEnabled)),isQueryParamEnabled:Iu(e),isRecording:Iu(Rt(gn.isRecording)),measures:Iu(Rt(gn.measures)),longTasks:Iu(Rt(gn.longTasks)),memorySnapshots:Iu(Rt(gn.memorySnapshots)),framesPerSecond:Iu(Rt(gn.framesPerSecond)),operationHistory:Iu(Rt(gn.operationHistory)),startRecording:Qg,stopRecording:fg,clearRecording:t1,startMeasure:T5,measure:B5,measureAsync:D5,captureMemorySnapshot:uy,createPerformanceTracker:O5,createAsyncPerformanceTracker:I5,getOperationDetails:t,getSlowOperations:()=>!gn.isEnabled||!gn.isRecording?[]:[...gn.measures].sort((n,r)=>r.duration-n.duration).slice(0,10),getLongTasks:()=>!gn.isEnabled||!gn.isRecording?[]:[...gn.longTasks].sort((n,r)=>r.duration-n.duration),getPerformanceReport:()=>{if(!gn.isEnabled||!gn.isRecording)return null;const n=r1();return{totalMeasures:gn.measures.length,totalLongTasks:gn.longTasks.length,slowestOperations:[...gn.measures].sort((r,i)=>i.duration-r.duration).slice(0,10),averageFps:gn.framesPerSecond,memoryUsage:gn.memorySnapshots.length>0?gn.memorySnapshots[gn.memorySnapshots.length-1]:null,operationsByComponent:tT(gn.measures),criticalPaths:n.criticalPaths,bottlenecks:n.bottlenecks,recordingDuration:gn.isRecording?performance.now()-gn.startTime:null}},analyzeCriticalPaths:r1}}function tT(e){if(!gn.isEnabled||!gn.isRecording)return{};const t={};return e.forEach(n=>{const r=n.component||"unknown";t[r]||(t[r]={totalTime:0,callCount:0,operations:{}}),t[r].totalTime+=n.duration,t[r].callCount++,t[r].operations[n.name]||(t[r].operations[n.name]={totalTime:0,callCount:0}),t[r].operations[n.name].totalTime+=n.duration,t[r].operations[n.name].callCount++}),t}const dn={startRecording:Qg,stopRecording:fg,clearRecording:t1,startMeasure:T5,measure:B5,measureAsync:D5,captureMemorySnapshot:uy,createPerformanceTracker:O5,createAsyncPerformanceTracker:I5,setEnabled:n1,analyzeCriticalPaths:r1},hr=bo.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0}),Ao=dd();function R5(e){var r;const n=`; ${document.cookie}`.split(`; ${e}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}hr.interceptors.request.use(async e=>{const t=Ao.startMeasure("api_request_interceptor","ApiService");try{const n=R5("access_token");return n&&(e.headers.Authorization=`Bearer ${n}`),console.log("Request config:",{url:e.url,method:e.method,headers:e.headers,withCredentials:e.withCredentials}),e}finally{t()}},e=>(console.error("Request interceptor error:",e),Promise.reject(e)));hr.interceptors.response.use(e=>e,async e=>{var r,i;const t=Ao.startMeasure("api_response_interceptor","ApiService"),n=e.config;try{if(((r=e.response)==null?void 0:r.status)===401&&!n._retry&&!((i=n.url)!=null&&i.includes("/token/refresh/"))){n._retry=!0;const o=ga();try{await Ao.measureAsync("token_refresh",()=>o.refreshToken(),"ApiService");const s=R5("access_token");if(s)return n.headers.Authorization=`Bearer ${s}`,hr(n)}catch(s){return await o.logout(),window.location.pathname!=="/login"&&(window.location.href="/login"),Promise.reject(s)}}return Promise.reject(e)}finally{t()}});function nT(e){var n;const t=[];if((n=e.response)!=null&&n.data){const r=e.response.data;typeof r=="object"&&!Array.isArray(r)?Object.entries(r).forEach(([i,o])=>{Array.isArray(o)?o.forEach(s=>{t.push({field:i,message:s})}):typeof o=="string"&&t.push({field:i,message:o})}):typeof r=="string"?t.push({field:"non_field_error",message:r}):r.detail&&t.push({field:"non_field_error",message:r.detail})}else e.message&&t.push({field:"non_field_error",message:`Erreur de connexion: ${e.message}`});return t.length===0&&t.push({field:"non_field_error",message:"Une erreur inconnue s'est produite"}),t}async function O0(e){console.log("[fetchUsersByHierarchy] Récupération des utilisateurs:",e);const t={role:e.role};e.entrepriseId&&(t.entreprise=e.entrepriseId),e.salarieId&&(t.salarie=e.salarieId),e.includeDetails&&(t.include_plans=!0),e.search&&(t.search=e.search),console.log("[fetchUsersByHierarchy] Filtres appliqués:",t);try{const n=await Ll.getUsers(t);return console.log(`[fetchUsersByHierarchy] Résultat (${n.data.length} utilisateurs):`,n.data),n.data}catch(n){throw console.error("[fetchUsersByHierarchy] Erreur lors de la récupération des utilisateurs:",n),n}}const Ll={async getUsers(e={}){const t=Ao.startMeasure("get_users","UserService");try{return await Ao.measureAsync("get_users_request",()=>hr.get("/users/",{params:e}),"UserService")}finally{t()}},async getUser(e){return await hr.get(`/users/${e}/`)},async createUser(e){return await hr.post("/users/",e)},async updateUser(e,t){return await hr.patch(`/users/${e}/`,t)},async deleteUser(e){return await hr.delete(`/users/${e}/`)},async getEntreprises(){return await hr.get("/users/",{params:{role:"ENTREPRISE"}})},async getSalaries(e){const t={role:"SALARIE"};return e&&(t.entreprise=e),await hr.get("/users/",{params:t})},async getSalarieVisiteurs(e){return await hr.get("/users/",{params:{role:"VISITEUR",salarie:e}})},async getEntrepriseVisiteurs(e){return await hr.get("/users/",{params:{role:"VISITEUR",entreprise:e}})},async getUsersByHierarchy(e){const t=Ao.startMeasure("get_users_hierarchy","UserService");try{const n=Ao.measure("prepare_hierarchy_filters",()=>{const r={role:e.role};return e.entrepriseId&&(r.entreprise=e.entrepriseId),e.salarieId&&(r.salarie=e.salarieId),e.includeDetails&&(r.include_plans=!0),e.search&&(r.search=e.search),r},"UserService");return await Ao.measureAsync("get_users_hierarchy_request",()=>hr.get("/users/",{params:n}),"UserService")}finally{t()}},async getEntrepriseSalaries(e){return await hr.get("/users/",{params:{role:"SALARIE",entreprise:e}})},async getVisiteurs(e,t){const n={role:"VISITEUR"};return e&&(n.salarie=e),t&&(n.entreprise=t),await hr.get("/users/",{params:n})},async assignEntrepriseToSalarie(e,t){return await hr.patch(`/users/${e}/`,{entreprise:t})},async assignSalarieToVisiteur(e,t){return await hr.patch(`/users/${e}/`,{salarie:t})},formatLogoFileName(e){return Ao.measure("format_logo_filename",()=>{var i;const t=new Date().getTime(),n=((i=e.name.split(".").pop())==null?void 0:i.toLowerCase())||"";return`${e.name.split(".")[0].toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}-${t}.${n}`},"UserService")},async uploadLogo(e){const t=Ao.startMeasure("upload_logo","UserService");try{const n=new FormData,r=this.formatLogoFileName(e),i=new File([e],r,{type:e.type});return n.append("logo",i),await Ao.measureAsync("upload_logo_request",()=>hr.post("/users/upload_logo/",n,{headers:{"Content-Type":"multipart/form-data"}}),"UserService")}finally{t()}}},d0={async getPlans(){const e=Ao.startMeasure("get_plans","IrrigationService");try{return await Ao.measureAsync("get_plans_request",()=>hr.get("/plans/"),"IrrigationService")}finally{e()}},async createPlan(e){const t=Ao.startMeasure("create_plan","IrrigationService");try{const n=Ao.measure("format_plan_data",()=>({...e,entreprise:e.entreprise?typeof e.entreprise=="object"&&"id"in e.entreprise?e.entreprise.id:Number(e.entreprise):null,salarie:e.salarie?typeof e.salarie=="object"&&"id"in e.salarie?e.salarie.id:Number(e.salarie):null,visiteur:e.visiteur?typeof e.visiteur=="object"&&"id"in e.visiteur?e.visiteur.id:Number(e.visiteur):null}),"IrrigationService");return await Ao.measureAsync("create_plan_request",()=>hr.post("/plans/",n),"IrrigationService")}finally{t()}},async updatePlan(e,t){const n=Ao.startMeasure("update_plan","IrrigationService");try{return await Ao.measureAsync("update_plan_request",()=>hr.put(`/plans/${e}/`,t),"IrrigationService")}finally{n()}},async deletePlan(e){const t=Ao.startMeasure("delete_plan","IrrigationService");try{return await Ao.measureAsync("delete_plan_request",()=>hr.delete(`/plans/${e}/`),"IrrigationService")}finally{t()}},async getVisiteurPlans(e){return await hr.get("/plans/",{params:{visiteur:e}})},async createPlanForVisiteur(e){return await hr.post("/plans/",e)},async getEntreprisePlans(e){return await hr.get("/plans/",{params:{entreprise:e}})},async getSalariePlans(e){return await hr.get("/plans/",{params:{salarie:e}})},async createPlanForSalarie(e,t){const n={...e,salarie:t};return await hr.post("/plans/",n)},async createPlanForEntreprise(e,t){const n={...e,entreprise:t};return await hr.post("/plans/",n)}};hr.defaults.baseURL="/api";hr.defaults.headers.common["Content-Type"]="application/json";hr.defaults.withCredentials=!0;function bp(e){var r;const n=`; ${document.cookie}`.split(`; ${e}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}hr.interceptors.request.use(e=>{const t=bp("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>(console.error("Request interceptor error:",e),Promise.reject(e)));hr.interceptors.response.use(e=>e,async e=>{var r,i;const t=ga(),n=e.config;if(((r=e.response)==null?void 0:r.status)===401&&!n._retry&&!((i=n.url)!=null&&i.includes("/token/refresh/"))){n._retry=!0;try{if(!bp("access_token"))throw new Error("No token available");await t.refreshToken();const s=bp("access_token");if(s)return n.headers.Authorization=`Bearer ${s}`,hr(n)}catch(o){console.error("Token refresh failed:",o),await t.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(e)});function rT(e,t,n=1){const r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);const i=`expires=${r.toUTCString()}`;document.cookie=`${e}=${t};${i};path=/;secure;samesite=Strict`}function Hl(e){if(!e)return"-";const t=e.first_name||"",n=e.last_name?e.last_name.toUpperCase():"",r=`${t} ${n}`.trim(),i=e.company_name||e.role||"";return!r&&!i?"-":r?i?`${r} (${i})`:r:`(${i})`}function iT(e="",t=""){return`${(e==null?void 0:e.charAt(0))||""}${(t==null?void 0:t.charAt(0))||""}`.toUpperCase()}const sT={ADMIN:"Administrateur",ENTREPRISE:"Entreprise",SALARIE:"Salarie",VISITEUR:"Visiteur"};function oT(e){return sT[e]||e}function aT(){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function lT(e){return e?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}async function uT({role:e,entrepriseId:t,salarieId:n,includeDetails:r=!1}){const i={role:e};return t&&(i.entreprise=t),n&&(i.salarie=n),r&&(i.include_plans=!0),(await Ll.getUsers(i)).data}const ga=Ap("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,enterprises:[],employees:[],visitors:[]}),getters:{isAdmin:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="admin"},isEntreprise:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="entreprise"},isSalarie:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="salarie"},isVisiteur:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="visiteur"},currentUser:e=>e.user,hasEnterprise:e=>{var t;return!!((t=e.user)!=null&&t.enterprise_id)},hasEmployee:e=>{var t;return!!((t=e.user)!=null&&t.employee_id)}},actions:{async initialize(e){if(!e){const n=await this.restoreSession();return this.initialized=!0,n}if(e.isAuthenticated&&e.user)return this.user=e.user,this.isAuthenticated=!0,this.mustChangePassword=e.user.must_change_password||!1,this.initialized=!0,!0;const t=await this.restoreSession();return this.initialized=!0,t},async restoreSession(){try{if(!bp("access_token"))return this.isAuthenticated=!1,this.user=null,!1;const t=await hr.post("/token/refresh/");return t.data.user?(this.user=t.data.user,this.isAuthenticated=!0,this.mustChangePassword=t.data.user.must_change_password||!1,!0):(await this.fetchUserProfile(),!0)}catch(e){return console.error("Failed to restore session:",e),this.isAuthenticated=!1,this.user=null,!1}},async login(e,t){var n,r,i;try{const o=await hr.post("/token/",{username:e,password:t});if(!o.data.access)throw new Error("Token d'accès non reçu");document.cookie=`access_token=${o.data.access}; path=/; secure; samesite=Strict`;const s=await this.fetchUserProfile();return this.user=s,this.isAuthenticated=!0,!0}catch(o){throw this.isAuthenticated=!1,this.user=null,((n=o.response)==null?void 0:n.status)===401?new Error("Identifiants incorrects"):(i=(r=o.response)==null?void 0:r.data)!=null&&i.detail?new Error(o.response.data.detail):o}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const e=await hr.get("/users/me/");return this.user=e.data,this.isAuthenticated=!0,this.mustChangePassword=e.data.must_change_password||!1,e.data}catch(e){throw this.isAuthenticated=!1,this.user=null,e}},async changePassword(e,t){try{const n=await hr.post("/users/change_password/",{old_password:e,password:t});return this.user={...this.user,must_change_password:!1},n.data}catch(n){throw console.error("Password change error:",n),n}},async refreshToken(){var e,t;try{if(!bp("refresh_token"))throw new Error("No refresh token available");const r=await hr.post("/token/refresh/",{},{withCredentials:!0,_retry:!0}),{access:i}=r.data;if(!i)throw new Error("No access token received");return rT("access_token",i,1),this.isAuthenticated=!0,i}catch(n){throw console.error("Error refreshing token:",{status:(e=n.response)==null?void 0:e.status,data:(t=n.response)==null?void 0:t.data}),this.isAuthenticated=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",n}},async fetchUsers(e={}){this.loading=!0;try{return(await Ll.getUsers(e)).data}catch(t){throw this.error="Erreur lors de la récupération des utilisateurs",t}finally{this.loading=!1}},async fetchEnterprises(){this.loading=!0;try{const e=await Ll.getUsers({role:"ENTREPRISE"});return this.enterprises=e.data,this.enterprises}catch(e){throw this.error="Erreur lors de la récupération des entreprises",e}finally{this.loading=!1}},async fetchEnterpriseEmployees(e){this.loading=!0;try{const t=await Ll.getUsers({role:"SALARIE",entreprise:e});return this.employees=t.data,this.employees}catch(t){throw this.error="Erreur lors de la récupération des salaries",t}finally{this.loading=!1}},async fetchEnterpriseVisitors(e){this.loading=!0;try{const t=await Ll.getUsers({role:"VISITEUR",entreprise:e});return this.visitors=t.data,this.visitors}catch(t){throw this.error="Erreur lors de la récupération des visiteurs",t}finally{this.loading=!1}},async createUser(e){this.loading=!0;try{return(await Ll.createUser(e)).data}catch(t){throw this.error="Erreur lors de la création de l'utilisateur",t}finally{this.loading=!1}},async updateUser(e,t){this.loading=!0;try{return(await Ll.updateUser(e,t)).data}catch(n){throw this.error="Erreur lors de la mise à jour de l'utilisateur",n}finally{this.loading=!1}},async deleteUser(e){this.loading=!0;try{return await Ll.deleteUser(e),!0}catch(t){throw this.error="Erreur lors de la suppression de l'utilisateur",t}finally{this.loading=!1}},async fetchEnterprisesLegacy(){this.loading=!0;try{const e=await hr.get("/users/",{params:{role:"entreprise"}});this.enterprises=e.data}catch(e){throw this.error="Erreur lors de la récupération des entreprises",e}finally{this.loading=!1}},async setEnterprise(e,t){this.loading=!0;try{await hr.patch(`/users/${e}/`,{enterprise:t}),this.user&&this.user.id===e&&(this.user.enterprise_id=t)}catch(n){throw this.error="Erreur lors de la mise à jour de l'entreprise",n}finally{this.loading=!1}},async updateUserRole(e,t){this.loading=!0;try{const n=await hr.patch(`/users/${e}/`,{role:t});return this.user&&this.user.id===e&&(this.user.user_type=t),n.data}catch(n){throw this.error="Erreur lors de la mise à jour du rôle",n}finally{this.loading=!1}},async updateUserEmail(e){var t;this.loading=!0;try{const n=await hr.patch(`/users/${(t=this.user)==null?void 0:t.id}/`,{email:e});return this.user&&(this.user.email=e),n.data}catch(n){throw this.error="Erreur lors de la mise à jour de l'email",n}finally{this.loading=!1}},async uploadLogo(e){this.loading=!0;try{const t=await Ll.uploadLogo(e);return this.user&&t.data.logo&&(this.user.logo=t.data.logo),t.data}catch(t){throw this.error="Erreur lors du téléversement du logo",t}finally{this.loading=!1}},checkAccess(e){return this.user?e.includes(this.user.user_type):!1},async fetchUsersByRole(e){this.loading=!0;try{return await uT(e)}catch(t){throw console.error(`Error fetching ${e.role}:`,t),t}finally{this.loading=!1}},async fetchEntrepriseSalaries(e){this.loading=!0;try{return(await Ll.getUsers({role:"SALARIE",entreprise:e})).data}catch(t){throw this.error="Erreur lors de la récupération des salaries",t}finally{this.loading=!1}},async fetchSalarieVisiteurs(e){this.loading=!0;try{return(await Ll.getUsers({role:"VISITEUR",salarie:e})).data}catch(t){throw this.error="Erreur lors de la récupération des visiteurs",t}finally{this.loading=!1}}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Ih=typeof document<"u";function F5(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function cT(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&F5(e.default)}const Gi=Object.assign;function Xm(e,t){const n={};for(const r in t){const i=t[r];n[r]=Hu(i)?i.map(e):e(i)}return n}const ep=()=>{},Hu=Array.isArray,j5=/#/g,fT=/&/g,hT=/\//g,dT=/=/g,pT=/\?/g,z5=/\+/g,gT=/%5B/g,mT=/%5D/g,$5=/%5E/g,vT=/%60/g,U5=/%7B/g,yT=/%7C/g,V5=/%7D/g,_T=/%20/g;function cy(e){return encodeURI(""+e).replace(yT,"|").replace(gT,"[").replace(mT,"]")}function bT(e){return cy(e).replace(U5,"{").replace(V5,"}").replace($5,"^")}function i1(e){return cy(e).replace(z5,"%2B").replace(_T,"+").replace(j5,"%23").replace(fT,"%26").replace(vT,"`").replace(U5,"{").replace(V5,"}").replace($5,"^")}function wT(e){return i1(e).replace(dT,"%3D")}function xT(e){return cy(e).replace(j5,"%23").replace(pT,"%3F")}function LT(e){return e==null?"":xT(e).replace(hT,"%2F")}function wp(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const ST=/\/$/,CT=e=>e.replace(ST,"");function Qm(e,t,n="/"){let r,i={},o="",s="";const u=t.indexOf("#");let f=t.indexOf("?");return u<f&&u>=0&&(f=-1),f>-1&&(r=t.slice(0,f),o=t.slice(f+1,u>-1?u:t.length),i=e(o)),u>-1&&(r=r||t.slice(0,u),s=t.slice(u,t.length)),r=AT(r??t,n),{fullPath:r+(o&&"?")+o+s,path:r,query:i,hash:wp(s)}}function ET(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function N_(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function PT(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&id(t.matched[r],n.matched[i])&&H5(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function id(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function H5(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!MT(e[n],t[n]))return!1;return!0}function MT(e,t){return Hu(e)?O_(e,t):Hu(t)?O_(t,e):e===t}function O_(e,t){return Hu(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function AT(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let o=n.length-1,s,u;for(s=0;s<r.length;s++)if(u=r[s],u!==".")if(u==="..")o>1&&o--;else break;return n.slice(0,o).join("/")+"/"+r.slice(s).join("/")}const tf={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var xp;(function(e){e.pop="pop",e.push="push"})(xp||(xp={}));var tp;(function(e){e.back="back",e.forward="forward",e.unknown=""})(tp||(tp={}));function kT(e){if(!e)if(Ih){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),CT(e)}const TT=/^[^#]+#/;function DT(e,t){return e.replace(TT,"#")+t}function BT(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const em=()=>({left:window.scrollX,top:window.scrollY});function NT(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=BT(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function I_(e,t){return(history.state?history.state.position-t:-1)+e}const s1=new Map;function OT(e,t){s1.set(e,t)}function IT(e){const t=s1.get(e);return s1.delete(e),t}let RT=()=>location.protocol+"//"+location.host;function G5(e,t){const{pathname:n,search:r,hash:i}=t,o=e.indexOf("#");if(o>-1){let u=i.includes(e.slice(o))?e.slice(o).length:1,f=i.slice(u);return f[0]!=="/"&&(f="/"+f),N_(f,"")}return N_(n,e)+r+i}function FT(e,t,n,r){let i=[],o=[],s=null;const u=({state:w})=>{const _=G5(e,location),M=n.value,k=t.value;let R=0;if(w){if(n.value=_,t.value=w,s&&s===M){s=null;return}R=k?w.position-k.position:0}else r(_);i.forEach(N=>{N(n.value,M,{delta:R,type:xp.pop,direction:R?R>0?tp.forward:tp.back:tp.unknown})})};function f(){s=n.value}function d(w){i.push(w);const _=()=>{const M=i.indexOf(w);M>-1&&i.splice(M,1)};return o.push(_),_}function m(){const{history:w}=window;w.state&&w.replaceState(Gi({},w.state,{scroll:em()}),"")}function y(){for(const w of o)w();o=[],window.removeEventListener("popstate",u),window.removeEventListener("beforeunload",m)}return window.addEventListener("popstate",u),window.addEventListener("beforeunload",m,{passive:!0}),{pauseListeners:f,listen:d,destroy:y}}function R_(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?em():null}}function jT(e){const{history:t,location:n}=window,r={value:G5(e,n)},i={value:t.state};i.value||o(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(f,d,m){const y=e.indexOf("#"),w=y>-1?(n.host&&document.querySelector("base")?e:e.slice(y))+f:RT()+e+f;try{t[m?"replaceState":"pushState"](d,"",w),i.value=d}catch(_){console.error(_),n[m?"replace":"assign"](w)}}function s(f,d){const m=Gi({},t.state,R_(i.value.back,f,i.value.forward,!0),d,{position:i.value.position});o(f,m,!0),r.value=f}function u(f,d){const m=Gi({},i.value,t.state,{forward:f,scroll:em()});o(m.current,m,!0);const y=Gi({},R_(r.value,f,null),{position:m.position+1},d);o(f,y,!1),r.value=f}return{location:r,state:i,push:u,replace:s}}function zT(e){e=kT(e);const t=jT(e),n=FT(e,t.state,t.location,t.replace);function r(o,s=!0){s||n.pauseListeners(),history.go(o)}const i=Gi({location:"",base:e,go:r,createHref:DT.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function $T(e){return typeof e=="string"||e&&typeof e=="object"}function q5(e){return typeof e=="string"||typeof e=="symbol"}const W5=Symbol("");var F_;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(F_||(F_={}));function sd(e,t){return Gi(new Error,{type:e,[W5]:!0},t)}function Bc(e,t){return e instanceof Error&&W5 in e&&(t==null||!!(e.type&t))}const j_="[^/]+?",UT={sensitive:!1,strict:!1,start:!0,end:!0},VT=/[.+*?^${}()[\]/\\]/g;function HT(e,t){const n=Gi({},UT,t),r=[];let i=n.start?"^":"";const o=[];for(const d of e){const m=d.length?[]:[90];n.strict&&!d.length&&(i+="/");for(let y=0;y<d.length;y++){const w=d[y];let _=40+(n.sensitive?.25:0);if(w.type===0)y||(i+="/"),i+=w.value.replace(VT,"\\$&"),_+=40;else if(w.type===1){const{value:M,repeatable:k,optional:R,regexp:N}=w;o.push({name:M,repeatable:k,optional:R});const j=N||j_;if(j!==j_){_+=10;try{new RegExp(`(${j})`)}catch(te){throw new Error(`Invalid custom RegExp for param "${M}" (${j}): `+te.message)}}let J=k?`((?:${j})(?:/(?:${j}))*)`:`(${j})`;y||(J=R&&d.length<2?`(?:/${J})`:"/"+J),R&&(J+="?"),i+=J,_+=20,R&&(_+=-8),k&&(_+=-20),j===".*"&&(_+=-50)}m.push(_)}r.push(m)}if(n.strict&&n.end){const d=r.length-1;r[d][r[d].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const s=new RegExp(i,n.sensitive?"":"i");function u(d){const m=d.match(s),y={};if(!m)return null;for(let w=1;w<m.length;w++){const _=m[w]||"",M=o[w-1];y[M.name]=_&&M.repeatable?_.split("/"):_}return y}function f(d){let m="",y=!1;for(const w of e){(!y||!m.endsWith("/"))&&(m+="/"),y=!1;for(const _ of w)if(_.type===0)m+=_.value;else if(_.type===1){const{value:M,repeatable:k,optional:R}=_,N=M in d?d[M]:"";if(Hu(N)&&!k)throw new Error(`Provided param "${M}" is an array but it is not repeatable (* or + modifiers)`);const j=Hu(N)?N.join("/"):N;if(!j)if(R)w.length<2&&(m.endsWith("/")?m=m.slice(0,-1):y=!0);else throw new Error(`Missing required param "${M}"`);m+=j}}return m||"/"}return{re:s,score:r,keys:o,parse:u,stringify:f}}function GT(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Z5(e,t){let n=0;const r=e.score,i=t.score;for(;n<r.length&&n<i.length;){const o=GT(r[n],i[n]);if(o)return o;n++}if(Math.abs(i.length-r.length)===1){if(z_(r))return 1;if(z_(i))return-1}return i.length-r.length}function z_(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const qT={type:0,value:""},WT=/[a-zA-Z0-9_]/;function ZT(e){if(!e)return[[]];if(e==="/")return[[qT]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(_){throw new Error(`ERR (${n})/"${d}": ${_}`)}let n=0,r=n;const i=[];let o;function s(){o&&i.push(o),o=[]}let u=0,f,d="",m="";function y(){d&&(n===0?o.push({type:0,value:d}):n===1||n===2||n===3?(o.length>1&&(f==="*"||f==="+")&&t(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:d,regexp:m,repeatable:f==="*"||f==="+",optional:f==="*"||f==="?"})):t("Invalid state to consume buffer"),d="")}function w(){d+=f}for(;u<e.length;){if(f=e[u++],f==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:f==="/"?(d&&y(),s()):f===":"?(y(),n=1):w();break;case 4:w(),n=r;break;case 1:f==="("?n=2:WT.test(f)?w():(y(),n=0,f!=="*"&&f!=="?"&&f!=="+"&&u--);break;case 2:f===")"?m[m.length-1]=="\\"?m=m.slice(0,-1)+f:n=3:m+=f;break;case 3:y(),n=0,f!=="*"&&f!=="?"&&f!=="+"&&u--,m="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${d}"`),y(),s(),i}function KT(e,t,n){const r=HT(ZT(e.path),n),i=Gi(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function YT(e,t){const n=[],r=new Map;t=H_({strict:!1,end:!0,sensitive:!1},t);function i(y){return r.get(y)}function o(y,w,_){const M=!_,k=U_(y);k.aliasOf=_&&_.record;const R=H_(t,y),N=[k];if("alias"in y){const te=typeof y.alias=="string"?[y.alias]:y.alias;for(const ae of te)N.push(U_(Gi({},k,{components:_?_.record.components:k.components,path:ae,aliasOf:_?_.record:k})))}let j,J;for(const te of N){const{path:ae}=te;if(w&&ae[0]!=="/"){const le=w.record.path,xe=le[le.length-1]==="/"?"":"/";te.path=w.record.path+(ae&&xe+ae)}if(j=KT(te,w,R),_?_.alias.push(j):(J=J||j,J!==j&&J.alias.push(j),M&&y.name&&!V_(j)&&s(y.name)),K5(j)&&f(j),k.children){const le=k.children;for(let xe=0;xe<le.length;xe++)o(le[xe],j,_&&_.children[xe])}_=_||j}return J?()=>{s(J)}:ep}function s(y){if(q5(y)){const w=r.get(y);w&&(r.delete(y),n.splice(n.indexOf(w),1),w.children.forEach(s),w.alias.forEach(s))}else{const w=n.indexOf(y);w>-1&&(n.splice(w,1),y.record.name&&r.delete(y.record.name),y.children.forEach(s),y.alias.forEach(s))}}function u(){return n}function f(y){const w=QT(y,n);n.splice(w,0,y),y.record.name&&!V_(y)&&r.set(y.record.name,y)}function d(y,w){let _,M={},k,R;if("name"in y&&y.name){if(_=r.get(y.name),!_)throw sd(1,{location:y});R=_.record.name,M=Gi($_(w.params,_.keys.filter(J=>!J.optional).concat(_.parent?_.parent.keys.filter(J=>J.optional):[]).map(J=>J.name)),y.params&&$_(y.params,_.keys.map(J=>J.name))),k=_.stringify(M)}else if(y.path!=null)k=y.path,_=n.find(J=>J.re.test(k)),_&&(M=_.parse(k),R=_.record.name);else{if(_=w.name?r.get(w.name):n.find(J=>J.re.test(w.path)),!_)throw sd(1,{location:y,currentLocation:w});R=_.record.name,M=Gi({},w.params,y.params),k=_.stringify(M)}const N=[];let j=_;for(;j;)N.unshift(j.record),j=j.parent;return{name:R,path:k,params:M,matched:N,meta:XT(N)}}e.forEach(y=>o(y));function m(){n.length=0,r.clear()}return{addRoute:o,resolve:d,removeRoute:s,clearRoutes:m,getRoutes:u,getRecordMatcher:i}}function $_(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function U_(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:JT(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function JT(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function V_(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function XT(e){return e.reduce((t,n)=>Gi(t,n.meta),{})}function H_(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function QT(e,t){let n=0,r=t.length;for(;n!==r;){const o=n+r>>1;Z5(e,t[o])<0?r=o:n=o+1}const i=e8(e);return i&&(r=t.lastIndexOf(i,r-1)),r}function e8(e){let t=e;for(;t=t.parent;)if(K5(t)&&Z5(e,t)===0)return t}function K5({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function t8(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const o=r[i].replace(z5," "),s=o.indexOf("="),u=wp(s<0?o:o.slice(0,s)),f=s<0?null:wp(o.slice(s+1));if(u in t){let d=t[u];Hu(d)||(d=t[u]=[d]),d.push(f)}else t[u]=f}return t}function G_(e){let t="";for(let n in e){const r=e[n];if(n=wT(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Hu(r)?r.map(o=>o&&i1(o)):[r&&i1(r)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+n,o!=null&&(t+="="+o))})}return t}function n8(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Hu(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return t}const r8=Symbol(""),q_=Symbol(""),tm=Symbol(""),fy=Symbol(""),o1=Symbol("");function Ed(){let e=[];function t(r){return e.push(r),()=>{const i=e.indexOf(r);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function hf(e,t,n,r,i,o=s=>s()){const s=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((u,f)=>{const d=w=>{w===!1?f(sd(4,{from:n,to:t})):w instanceof Error?f(w):$T(w)?f(sd(2,{from:t,to:w})):(s&&r.enterCallbacks[i]===s&&typeof w=="function"&&s.push(w),u())},m=o(()=>e.call(r&&r.instances[i],t,n,d));let y=Promise.resolve(m);e.length<3&&(y=y.then(d)),y.catch(w=>f(w))})}function ev(e,t,n,r,i=o=>o()){const o=[];for(const s of e)for(const u in s.components){let f=s.components[u];if(!(t!=="beforeRouteEnter"&&!s.instances[u]))if(F5(f)){const m=(f.__vccOpts||f)[t];m&&o.push(hf(m,n,r,s,u,i))}else{let d=f();o.push(()=>d.then(m=>{if(!m)throw new Error(`Couldn't resolve component "${u}" at "${s.path}"`);const y=cT(m)?m.default:m;s.mods[u]=m,s.components[u]=y;const _=(y.__vccOpts||y)[t];return _&&hf(_,n,r,s,u,i)()}))}}return o}function W_(e){const t=Zl(tm),n=Zl(fy),r=gr(()=>{const f=qn(e.to);return t.resolve(f)}),i=gr(()=>{const{matched:f}=r.value,{length:d}=f,m=f[d-1],y=n.matched;if(!m||!y.length)return-1;const w=y.findIndex(id.bind(null,m));if(w>-1)return w;const _=Z_(f[d-2]);return d>1&&Z_(m)===_&&y[y.length-1].path!==_?y.findIndex(id.bind(null,f[d-2])):w}),o=gr(()=>i.value>-1&&a8(n.params,r.value.params)),s=gr(()=>i.value>-1&&i.value===n.matched.length-1&&H5(n.params,r.value.params));function u(f={}){if(o8(f)){const d=t[qn(e.replace)?"replace":"push"](qn(e.to)).catch(ep);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:r,href:gr(()=>r.value.href),isActive:o,isExactActive:s,navigate:u}}function i8(e){return e.length===1?e[0]:e}const s8=oo({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:W_,setup(e,{slots:t}){const n=Yl(W_(e)),{options:r}=Zl(tm),i=gr(()=>({[K_(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[K_(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const o=t.default&&i8(t.default(n));return e.custom?o:Vg("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},o)}}}),Rd=s8;function o8(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function a8(e,t){for(const n in t){const r=t[n],i=e[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Hu(i)||i.length!==r.length||r.some((o,s)=>o!==i[s]))return!1}return!0}function Z_(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const K_=(e,t,n)=>e??t??n,l8=oo({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=Zl(o1),i=gr(()=>e.route||r.value),o=Zl(q_,0),s=gr(()=>{let d=qn(o);const{matched:m}=i.value;let y;for(;(y=m[d])&&!y.components;)d++;return d}),u=gr(()=>i.value.matched[s.value]);Yd(q_,gr(()=>s.value+1)),Yd(r8,u),Yd(o1,i);const f=Rt();return bs(()=>[f.value,u.value,e.name],([d,m,y],[w,_,M])=>{m&&(m.instances[y]=d,_&&_!==m&&d&&d===w&&(m.leaveGuards.size||(m.leaveGuards=_.leaveGuards),m.updateGuards.size||(m.updateGuards=_.updateGuards))),d&&m&&(!_||!id(m,_)||!w)&&(m.enterCallbacks[y]||[]).forEach(k=>k(d))},{flush:"post"}),()=>{const d=i.value,m=e.name,y=u.value,w=y&&y.components[m];if(!w)return Y_(n.default,{Component:w,route:d});const _=y.props[m],M=_?_===!0?d.params:typeof _=="function"?_(d):_:null,R=Vg(w,Gi({},M,t,{onVnodeUnmounted:N=>{N.component.isUnmounted&&(y.instances[m]=null)},ref:f}));return Y_(n.default,{Component:R,route:d})||R}}});function Y_(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Y5=l8;function u8(e){const t=YT(e.routes,e),n=e.parseQuery||t8,r=e.stringifyQuery||G_,i=e.history,o=Ed(),s=Ed(),u=Ed(),f=H1(tf);let d=tf;Ih&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const m=Xm.bind(null,oe=>""+oe),y=Xm.bind(null,LT),w=Xm.bind(null,wp);function _(oe,B){let ue,De;return q5(oe)?(ue=t.getRecordMatcher(oe),De=B):De=oe,t.addRoute(De,ue)}function M(oe){const B=t.getRecordMatcher(oe);B&&t.removeRoute(B)}function k(){return t.getRoutes().map(oe=>oe.record)}function R(oe){return!!t.getRecordMatcher(oe)}function N(oe,B){if(B=Gi({},B||f.value),typeof oe=="string"){const de=Qm(n,oe,B.path),ve=t.resolve({path:de.path},B),pe=i.createHref(de.fullPath);return Gi(de,ve,{params:w(ve.params),hash:wp(de.hash),redirectedFrom:void 0,href:pe})}let ue;if(oe.path!=null)ue=Gi({},oe,{path:Qm(n,oe.path,B.path).path});else{const de=Gi({},oe.params);for(const ve in de)de[ve]==null&&delete de[ve];ue=Gi({},oe,{params:y(de)}),B.params=y(B.params)}const De=t.resolve(ue,B),Me=oe.hash||"";De.params=m(w(De.params));const We=ET(r,Gi({},oe,{hash:bT(Me),path:De.path})),Z=i.createHref(We);return Gi({fullPath:We,hash:Me,query:r===G_?n8(oe.query):oe.query||{}},De,{redirectedFrom:void 0,href:Z})}function j(oe){return typeof oe=="string"?Qm(n,oe,f.value.path):Gi({},oe)}function J(oe,B){if(d!==oe)return sd(8,{from:B,to:oe})}function te(oe){return xe(oe)}function ae(oe){return te(Gi(j(oe),{replace:!0}))}function le(oe){const B=oe.matched[oe.matched.length-1];if(B&&B.redirect){const{redirect:ue}=B;let De=typeof ue=="function"?ue(oe):ue;return typeof De=="string"&&(De=De.includes("?")||De.includes("#")?De=j(De):{path:De},De.params={}),Gi({query:oe.query,hash:oe.hash,params:De.path!=null?{}:oe.params},De)}}function xe(oe,B){const ue=d=N(oe),De=f.value,Me=oe.state,We=oe.force,Z=oe.replace===!0,de=le(ue);if(de)return xe(Gi(j(de),{state:typeof de=="object"?Gi({},Me,de.state):Me,force:We,replace:Z}),B||ue);const ve=ue;ve.redirectedFrom=B;let pe;return!We&&PT(r,De,ue)&&(pe=sd(16,{to:ve,from:De}),Re(De,De,!0,!1)),(pe?Promise.resolve(pe):K(ve,De)).catch($e=>Bc($e)?Bc($e,2)?$e:Se($e):Y($e,ve,De)).then($e=>{if($e){if(Bc($e,2))return xe(Gi({replace:Z},j($e.to),{state:typeof $e.to=="object"?Gi({},Me,$e.to.state):Me,force:We}),B||ve)}else $e=O(ve,De,!0,Z,Me);return $(ve,De,$e),$e})}function G(oe,B){const ue=J(oe,B);return ue?Promise.reject(ue):Promise.resolve()}function I(oe){const B=fe.values().next().value;return B&&typeof B.runWithContext=="function"?B.runWithContext(oe):oe()}function K(oe,B){let ue;const[De,Me,We]=c8(oe,B);ue=ev(De.reverse(),"beforeRouteLeave",oe,B);for(const de of De)de.leaveGuards.forEach(ve=>{ue.push(hf(ve,oe,B))});const Z=G.bind(null,oe,B);return ue.push(Z),ye(ue).then(()=>{ue=[];for(const de of o.list())ue.push(hf(de,oe,B));return ue.push(Z),ye(ue)}).then(()=>{ue=ev(Me,"beforeRouteUpdate",oe,B);for(const de of Me)de.updateGuards.forEach(ve=>{ue.push(hf(ve,oe,B))});return ue.push(Z),ye(ue)}).then(()=>{ue=[];for(const de of We)if(de.beforeEnter)if(Hu(de.beforeEnter))for(const ve of de.beforeEnter)ue.push(hf(ve,oe,B));else ue.push(hf(de.beforeEnter,oe,B));return ue.push(Z),ye(ue)}).then(()=>(oe.matched.forEach(de=>de.enterCallbacks={}),ue=ev(We,"beforeRouteEnter",oe,B,I),ue.push(Z),ye(ue))).then(()=>{ue=[];for(const de of s.list())ue.push(hf(de,oe,B));return ue.push(Z),ye(ue)}).catch(de=>Bc(de,8)?de:Promise.reject(de))}function $(oe,B,ue){u.list().forEach(De=>I(()=>De(oe,B,ue)))}function O(oe,B,ue,De,Me){const We=J(oe,B);if(We)return We;const Z=B===tf,de=Ih?history.state:{};ue&&(De||Z?i.replace(oe.fullPath,Gi({scroll:Z&&de&&de.scroll},Me)):i.push(oe.fullPath,Me)),f.value=oe,Re(oe,B,ue,Z),Se()}let z;function V(){z||(z=i.listen((oe,B,ue)=>{if(!ce.listening)return;const De=N(oe),Me=le(De);if(Me){xe(Gi(Me,{replace:!0,force:!0}),De).catch(ep);return}d=De;const We=f.value;Ih&&OT(I_(We.fullPath,ue.delta),em()),K(De,We).catch(Z=>Bc(Z,12)?Z:Bc(Z,2)?(xe(Gi(j(Z.to),{force:!0}),De).then(de=>{Bc(de,20)&&!ue.delta&&ue.type===xp.pop&&i.go(-1,!1)}).catch(ep),Promise.reject()):(ue.delta&&i.go(-ue.delta,!1),Y(Z,De,We))).then(Z=>{Z=Z||O(De,We,!1),Z&&(ue.delta&&!Bc(Z,8)?i.go(-ue.delta,!1):ue.type===xp.pop&&Bc(Z,20)&&i.go(-1,!1)),$(De,We,Z)}).catch(ep)}))}let W=Ed(),q=Ed(),X;function Y(oe,B,ue){Se(oe);const De=q.list();return De.length?De.forEach(Me=>Me(oe,B,ue)):console.error(oe),Promise.reject(oe)}function me(){return X&&f.value!==tf?Promise.resolve():new Promise((oe,B)=>{W.add([oe,B])})}function Se(oe){return X||(X=!oe,V(),W.list().forEach(([B,ue])=>oe?ue(oe):B()),W.reset()),oe}function Re(oe,B,ue,De){const{scrollBehavior:Me}=e;if(!Ih||!Me)return Promise.resolve();const We=!ue&&IT(I_(oe.fullPath,0))||(De||!ue)&&history.state&&history.state.scroll||null;return Ko().then(()=>Me(oe,B,We)).then(Z=>Z&&NT(Z)).catch(Z=>Y(Z,oe,B))}const T=oe=>i.go(oe);let ne;const fe=new Set,ce={currentRoute:f,listening:!0,addRoute:_,removeRoute:M,clearRoutes:t.clearRoutes,hasRoute:R,getRoutes:k,resolve:N,options:e,push:te,replace:ae,go:T,back:()=>T(-1),forward:()=>T(1),beforeEach:o.add,beforeResolve:s.add,afterEach:u.add,onError:q.add,isReady:me,install(oe){const B=this;oe.component("RouterLink",Rd),oe.component("RouterView",Y5),oe.config.globalProperties.$router=B,Object.defineProperty(oe.config.globalProperties,"$route",{enumerable:!0,get:()=>qn(f)}),Ih&&!ne&&f.value===tf&&(ne=!0,te(i.location).catch(Me=>{}));const ue={};for(const Me in tf)Object.defineProperty(ue,Me,{get:()=>f.value[Me],enumerable:!0});oe.provide(tm,B),oe.provide(fy,V1(ue)),oe.provide(o1,f);const De=oe.unmount;fe.add(oe),oe.unmount=function(){fe.delete(oe),fe.size<1&&(d=tf,z&&z(),z=null,f.value=tf,ne=!1,X=!1),De()}}};function ye(oe){return oe.reduce((B,ue)=>B.then(()=>I(ue)),Promise.resolve())}return ce}function c8(e,t){const n=[],r=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let s=0;s<o;s++){const u=t.matched[s];u&&(e.matched.find(d=>id(d,u))?r.push(u):n.push(u));const f=e.matched[s];f&&(t.matched.find(d=>id(d,f))||i.push(f))}return[n,r,i]}function Dp(){return Zl(tm)}function fH(e){return Zl(fy)}const dc=Ap("notification",()=>{const e=Rt([]),t=Rt(0),n=Rt(null),r=gr(()=>[...e.value].sort((y,w)=>w.timestamp-y.timestamp));function i({type:y,message:w,duration:_=5e3}){const M=++t.value,k=Date.now(),R={id:M,type:y,message:w,duration:_,timestamp:k};return e.value.push(R),n.value=M,_>0&&setTimeout(()=>{d(M)},_),M}const o=(y,w=5e3)=>i({type:"success",message:y,duration:w}),s=(y,w=5e3)=>i({type:"error",message:y,duration:w}),u=(y,w=5e3)=>i({type:"info",message:y,duration:w}),f=(y,w=5e3)=>i({type:"warning",message:y,duration:w});function d(y){const w=e.value.findIndex(_=>_.id===y);w!==-1&&e.value.splice(w,1),n.value===y&&(n.value=null)}function m(){e.value=[],n.value=null}return{notifications:r,lastAddedId:n,addNotification:i,removeNotification:d,clearAll:m,success:o,error:s,info:u,warning:f}});var Jo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function J5(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}function f8(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var X5=f8,h8=typeof Jo=="object"&&Jo&&Jo.Object===Object&&Jo,d8=h8,p8=d8,g8=typeof self=="object"&&self&&self.Object===Object&&self,m8=p8||g8||Function("return this")(),Q5=m8,v8=Q5,y8=function(){return v8.Date.now()},_8=y8,b8=/\s/;function w8(e){for(var t=e.length;t--&&b8.test(e.charAt(t)););return t}var x8=w8,L8=x8,S8=/^\s+/;function C8(e){return e&&e.slice(0,L8(e)+1).replace(S8,"")}var E8=C8,P8=Q5,M8=P8.Symbol,ex=M8,J_=ex,tx=Object.prototype,A8=tx.hasOwnProperty,k8=tx.toString,Pd=J_?J_.toStringTag:void 0;function T8(e){var t=A8.call(e,Pd),n=e[Pd];try{e[Pd]=void 0;var r=!0}catch{}var i=k8.call(e);return r&&(t?e[Pd]=n:delete e[Pd]),i}var D8=T8,B8=Object.prototype,N8=B8.toString;function O8(e){return N8.call(e)}var I8=O8,X_=ex,R8=D8,F8=I8,j8="[object Null]",z8="[object Undefined]",Q_=X_?X_.toStringTag:void 0;function $8(e){return e==null?e===void 0?z8:j8:Q_&&Q_ in Object(e)?R8(e):F8(e)}var U8=$8;function V8(e){return e!=null&&typeof e=="object"}var H8=V8,G8=U8,q8=H8,W8="[object Symbol]";function Z8(e){return typeof e=="symbol"||q8(e)&&G8(e)==W8}var K8=Z8,Y8=E8,eb=X5,J8=K8,tb=NaN,X8=/^[-+]0x[0-9a-f]+$/i,Q8=/^0b[01]+$/i,e7=/^0o[0-7]+$/i,t7=parseInt;function n7(e){if(typeof e=="number")return e;if(J8(e))return tb;if(eb(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=eb(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Y8(e);var n=Q8.test(e);return n||e7.test(e)?t7(e.slice(2),n?2:8):X8.test(e)?tb:+e}var r7=n7,i7=X5,tv=_8,nb=r7,s7="Expected a function",o7=Math.max,a7=Math.min;function l7(e,t,n){var r,i,o,s,u,f,d=0,m=!1,y=!1,w=!0;if(typeof e!="function")throw new TypeError(s7);t=nb(t)||0,i7(n)&&(m=!!n.leading,y="maxWait"in n,o=y?o7(nb(n.maxWait)||0,t):o,w="trailing"in n?!!n.trailing:w);function _(le){var xe=r,G=i;return r=i=void 0,d=le,s=e.apply(G,xe),s}function M(le){return d=le,u=setTimeout(N,t),m?_(le):s}function k(le){var xe=le-f,G=le-d,I=t-xe;return y?a7(I,o-G):I}function R(le){var xe=le-f,G=le-d;return f===void 0||xe>=t||xe<0||y&&G>=o}function N(){var le=tv();if(R(le))return j(le);u=setTimeout(N,k(le))}function j(le){return u=void 0,w&&r?_(le):(r=i=void 0,s)}function J(){u!==void 0&&clearTimeout(u),d=0,r=f=i=u=void 0}function te(){return u===void 0?s:j(tv())}function ae(){var le=tv(),xe=R(le);if(r=arguments,i=this,f=le,xe){if(u===void 0)return M(f);if(y)return clearTimeout(u),u=setTimeout(N,t),_(f)}return u===void 0&&(u=setTimeout(N,t)),s}return ae.cancel=J,ae.flush=te,ae}var u7=l7;const c7=hy(u7),f7={class:"relative w-full"},h7={key:0,class:"search-results w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},d7=["onClick"],rb=oo({__name:"SearchBar",emits:["select-location"],setup(e,{emit:t}){const n=Rt(""),r=Rt([]),i=t,o=c7(async f=>{if(f.length<3){r.value=[];return}try{const m=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(f)}`)).json();r.value=m}catch(d){console.error("Erreur lors de la recherche d'adresse:",d),r.value=[]}},300);function s(){o(n.value)}function u(f){n.value=f.display_name,r.value=[],i("select-location",{lat:parseFloat(f.lat),lng:parseFloat(f.lon)})}return(f,d)=>(Ue(),Ge("div",f7,[In(E("input",{"onUpdate:modelValue":d[0]||(d[0]=m=>n.value=m),onInput:s,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[ei,n.value]]),r.value.length>0?(Ue(),Ge("div",h7,[(Ue(!0),Ge(Rn,null,Nr(r.value,m=>(Ue(),Ge("div",{key:m.place_id,onClick:y=>u(m),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},Wt(m.display_name),9,d7))),128))])):un("",!0)]))}}),p7={class:"perf-title"},g7={class:"perf-basic-stats"},m7={class:"perf-stat"},v7={class:"perf-stat"},y7={class:"perf-expand-btn"},_7={key:0,class:"perf-content"},b7={class:"perf-section"},w7={class:"perf-metrics"},x7={class:"perf-metric"},L7={class:"perf-metric-value"},S7={class:"perf-metric"},C7={class:"perf-metric-value"},E7={class:"perf-metric"},P7={class:"perf-metric-value"},M7={class:"perf-metric"},A7={class:"perf-metric-value"},k7={class:"perf-section"},T7={class:"perf-metrics"},D7={key:0,class:"perf-metric"},B7={class:"perf-metric-value"},N7={key:1,class:"perf-metric"},O7={class:"perf-metric-value"},I7={key:2,class:"perf-metric"},R7={class:"perf-metric-value"},F7={class:"perf-section"},j7={class:"perf-table"},z7={class:"perf-table-cell"},$7={class:"perf-table-cell"},U7={class:"perf-table-cell"},V7={class:"perf-table-cell"},H7=["onClick"],G7={key:0,class:"perf-empty"},q7=oo({__name:"PerformancePanel",props:{position:{}},setup(e){const n=e.position||"bottom-left",r=Rt(!1),{isQueryParamEnabled:i,isRecording:o,measures:s,longTasks:u,memorySnapshots:f,framesPerSecond:d,operationHistory:m,startRecording:y,stopRecording:w,clearRecording:_,captureMemorySnapshot:M,getSlowOperations:k,getPerformanceReport:R,getOperationDetails:N}=dd(),j=gr(()=>{const O=R()??{totalMeasures:0,totalLongTasks:0,slowestOperations:[],averageFps:0,memoryUsage:null};return{totalMeasures:O.totalMeasures,totalLongTasks:O.totalLongTasks,averageDuration:O.slowestOperations.length>0?O.slowestOperations.reduce((z,V)=>z+V.duration,0)/O.slowestOperations.length:0,fps:O.averageFps,slowestOperations:O.slowestOperations,memoryUsage:O.memoryUsage}}),J=gr(()=>(R()??{slowestOperations:[]}).slowestOperations.slice(0,5).map(z=>({operation:z.name,component:z.component||"unknown",durationMs:z.duration,timestamp:z.startTime}))),te=Rt(null);Fo(()=>{i.value&&(te.value=window.setInterval(()=>{M()},1e3))}),mc(()=>{te.value!==null&&clearInterval(te.value)});function ae(O){return O===void 0?"N/A":O<1024?O+" B":O<1024*1024?(O/1024).toFixed(2)+" KB":O<1024*1024*1024?(O/(1024*1024)).toFixed(2)+" MB":(O/(1024*1024*1024)).toFixed(2)+" GB"}function le(O){return O.toFixed(2)}const xe=()=>{M()};function G(){const O=R(),z="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(O,null,2)),V=document.createElement("a");V.setAttribute("href",z),V.setAttribute("download","performance_report.json"),document.body.appendChild(V),V.click(),V.remove()}function I(){_(),xe()}function K(){const O=R();navigator.clipboard.writeText(JSON.stringify(O,null,2)).then(()=>{alert("Données de performance copiées dans le presse-papiers")}).catch(z=>{console.error("Erreur lors de la copie des données",z),alert("Erreur lors de la copie des données")})}async function $(O){const z=N(O.operation,O.timestamp);if(!z){alert("Impossible de trouver les détails de cette opération");return}const V={operation:{...z.operation,startTimeRelative:"0ms",startTimeAbsolute:new Date(z.operation.startTime).toISOString()},context:{...z.context,relatedOperations:z.context.relatedOperations.map(W=>({...W,startTime:`+${W.startTime.toFixed(2)}ms`})),longTasks:z.context.longTasks.map(W=>({...W,startTime:`+${W.startTime.toFixed(2)}ms`})),memorySnapshots:z.context.memorySnapshots.map(W=>({...W,timestamp:`+${W.timestamp.toFixed(2)}ms`,usedJSHeapSize:W.usedJSHeapSize?ae(W.usedJSHeapSize):"N/A",totalJSHeapSize:W.totalJSHeapSize?ae(W.totalJSHeapSize):"N/A"}))},summary:{...z.summary,memoryDelta:ae(z.summary.memoryDelta),maxLongTaskDuration:`${z.summary.maxLongTaskDuration.toFixed(2)}ms`}};try{await navigator.clipboard.writeText(JSON.stringify(V,null,2)),alert("Détails de l'opération copiés dans le presse-papiers")}catch(W){console.error("Erreur lors de la copie des détails",W),alert("Erreur lors de la copie des détails")}}return(O,z)=>{var V,W,q,X,Y,me;return qn(i)?(Ue(),Ge("div",{key:0,class:Ii(["performance-panel",`position-${qn(n)}`,{expanded:r.value}])},[E("div",{class:"perf-header",onClick:z[0]||(z[0]=Se=>r.value=!r.value)},[E("div",p7,[E("div",{class:Ii(["perf-indicator",{active:qn(o)}])},null,2),z[1]||(z[1]=E("span",null,"Performance",-1))]),E("div",g7,[E("span",m7,Wt(j.value.fps)+" FPS",1),E("span",v7,Wt(le(j.value.averageDuration))+"ms",1)]),E("button",y7,Wt(r.value?"▼":"▲"),1)]),r.value?(Ue(),Ge("div",_7,[E("div",b7,[z[6]||(z[6]=E("h3",null,"Métriques générales",-1)),E("div",w7,[E("div",x7,[z[2]||(z[2]=E("span",{class:"perf-metric-label"},"Mesures",-1)),E("span",L7,Wt(j.value.totalMeasures),1)]),E("div",S7,[z[3]||(z[3]=E("span",{class:"perf-metric-label"},"Tâches longues",-1)),E("span",C7,Wt(j.value.totalLongTasks),1)]),E("div",E7,[z[4]||(z[4]=E("span",{class:"perf-metric-label"},"Durée moyenne",-1)),E("span",P7,Wt(le(j.value.averageDuration))+"ms",1)]),E("div",M7,[z[5]||(z[5]=E("span",{class:"perf-metric-label"},"FPS",-1)),E("span",A7,Wt(j.value.fps),1)])])]),E("div",k7,[z[10]||(z[10]=E("h3",null,"Mémoire",-1)),E("div",T7,[((V=j.value.memoryUsage)==null?void 0:V.usedJSHeapSize)!==void 0?(Ue(),Ge("div",D7,[z[7]||(z[7]=E("span",{class:"perf-metric-label"},"Utilisée",-1)),E("span",B7,Wt(ae((W=j.value.memoryUsage)==null?void 0:W.usedJSHeapSize)),1)])):un("",!0),((q=j.value.memoryUsage)==null?void 0:q.totalJSHeapSize)!==void 0?(Ue(),Ge("div",N7,[z[8]||(z[8]=E("span",{class:"perf-metric-label"},"Totale",-1)),E("span",O7,Wt(ae((X=j.value.memoryUsage)==null?void 0:X.totalJSHeapSize)),1)])):un("",!0),((Y=j.value.memoryUsage)==null?void 0:Y.jsHeapSizeLimit)!==void 0?(Ue(),Ge("div",I7,[z[9]||(z[9]=E("span",{class:"perf-metric-label"},"Limite",-1)),E("span",R7,Wt(ae((me=j.value.memoryUsage)==null?void 0:me.jsHeapSizeLimit)),1)])):un("",!0)])]),E("div",F7,[z[13]||(z[13]=E("h3",null,"Opérations les plus lentes",-1)),E("div",j7,[z[12]||(z[12]=uc('<div class="perf-table-header" data-v-fefe39b0><div class="perf-table-cell" data-v-fefe39b0>Opération</div><div class="perf-table-cell" data-v-fefe39b0>Composant</div><div class="perf-table-cell" data-v-fefe39b0>Durée</div><div class="perf-table-cell" data-v-fefe39b0>Actions</div></div>',1)),(Ue(!0),Ge(Rn,null,Nr(J.value,Se=>(Ue(),Ge("div",{class:"perf-table-row",key:Se.timestamp},[E("div",z7,Wt(Se.operation),1),E("div",$7,Wt(Se.component),1),E("div",U7,Wt(le(Se.durationMs))+"ms",1),E("div",V7,[E("button",{onClick:Re=>$(Se),class:"perf-action-button",title:"Copier les détails"},z[11]||(z[11]=[E("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]),8,H7)])]))),128)),J.value.length===0?(Ue(),Ge("div",G7," Aucune opération enregistrée ")):un("",!0)])]),E("div",{class:"perf-actions"},[E("button",{onClick:I,class:"perf-button"}," Réinitialiser "),E("button",{onClick:G,class:"perf-button"}," Télécharger "),E("button",{onClick:K,class:"perf-button"}," Copier ")])])):un("",!0)],2)):un("",!0)}}}),nm=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},W7=nm(q7,[["__scopeId","data-v-fefe39b0"]]),Z7={class:"h-screen flex flex-col"},K7={key:0,class:"bg-white shadow-sm z-[2000] flex-shrink-0"},Y7={class:"mx-auto px-4 sm:px-6 lg:px-8"},J7={class:"flex h-16 items-center justify-between"},X7={class:"flex items-center"},Q7={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},eD={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},tD={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},nD={class:"hidden md:flex md:ml-6 space-x-8"},rD={key:0,class:"hidden md:block flex-1 mx-8"},iD={key:1,class:"flex-1"},sD={class:"flex items-center space-x-2 md:space-x-4"},oD={key:0,class:"hidden md:flex items-center justify-center p-2 text-amber-500 hover:text-amber-600 rounded-full hover:bg-amber-50 focus:outline-none focus:ring-2 focus:ring-amber-400",title:"Performance activée"},aD={class:"relative"},lD={class:"px-4 py-2 border-b border-gray-100 flex justify-between items-center"},uD={class:"flex items-center justify-between w-full"},cD={class:"flex items-center space-x-3"},fD={class:"max-h-72 overflow-y-auto"},hD={key:0,class:"px-4 py-3 text-sm text-gray-500 text-center"},dD={class:"flex items-start"},pD={class:"flex-shrink-0 mr-3"},gD={key:0,class:"h-6 w-6 md:h-5 md:w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor"},mD={key:1,class:"h-6 w-6 md:h-5 md:w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},vD={key:2,class:"h-6 w-6 md:h-5 md:w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},yD={key:3,class:"h-6 w-6 md:h-5 md:w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor"},_D={class:"flex-1"},bD={class:"text-sm md:text-sm text-gray-800"},wD=["onClick"],xD={class:"relative"},LD={class:"hidden md:flex flex-col items-end"},SD={class:"text-sm font-medium text-gray-700"},CD={key:0,class:"text-xs text-gray-500"},ED=["src","alt"],PD={class:"md:hidden px-4 py-2 border-b border-gray-100 flex justify-between items-center"},MD={class:"text-sm font-semibold text-gray-700"},AD={class:"text-xs text-gray-500"},kD={key:0,class:"md:hidden bg-white border-t border-gray-200"},TD={class:"space-y-1 px-2 pb-3 pt-2"},DD={key:0,class:"px-4 py-3 border-t border-gray-200"},BD=oo({__name:"App",setup(e){const t=Dp(),n=ga(),r=dc(),{isQueryParamEnabled:i}=dd(),o=Rt(!1),s=Rt(!1),u=Rt(!1),f=Rt(!1),d=Rt(null),m=Rt(!1),y=Rt(!1),w=Rt(null),_=Rt("13px"),M=Rt("65px");function k(){y.value=window.innerWidth<768}Fo(()=>{k(),window.addEventListener("resize",k),window.addEventListener("resize",R)}),cd(()=>{window.removeEventListener("resize",k),window.removeEventListener("resize",R)});function R(){if(!w.value)return;const z=w.value.getBoundingClientRect();_.value=`${z.top+window.scrollY+5}px`;const V=z.left+z.width/2;M.value=`${window.innerWidth-V-22}px`}const N=gr(()=>{const z=n.user;if(!z)return"";const V=`${z.first_name} ${z.last_name.toUpperCase()}`;return z.company_name?`${V} (${z.company_name})`:V}),j=gr(()=>{var V;switch((V=n.user)==null?void 0:V.user_type){case"admin":return"Accès administrateur";case"entreprise":return"Accès entreprise";case"salarie":return"Accès salarie";case"visiteur":return"Accès visiteur";default:return""}}),J=gr(()=>{var z;return((z=n.user)==null?void 0:z.user_type)==="admin"}),te=gr(()=>n.isAuthenticated),ae=[{name:"Carte",to:"/"},{name:"Notes",to:"/notes"}],le=gr(()=>{var V;if(!te.value)return[];const z=[...ae];return(J.value||((V=n.user)==null?void 0:V.user_type)==="entreprise")&&z.push({name:"Utilisateurs",to:"/users"}),z}),xe=gr(()=>te.value?[{name:"Mon profil",to:"/profile"}]:[]);async function G(){try{await n.logout(),t.push("/login")}catch(z){console.error("Erreur lors de la déconnexion:",z)}}function I(z){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:z.lat,lng:z.lng,zoom:16}}))}Fo(async()=>{console.log("App mounted, checking auth...");try{if(localStorage.getItem("token")){console.log("Token found, checking auth..."),await n.checkAuth(),await n.fetchUserProfile();const V=localStorage.getItem("lastPlanId");V&&window.dispatchEvent(new CustomEvent("load-last-plan",{detail:{planId:V}}))}else console.log("No token found")}catch(z){console.error("Auth check error:",z),t.push("/login")}});const K=gr(()=>{const z="TagMap";if(!te.value)return`${z} - Connexion`;const V=t.currentRoute.value,q={home:"Carte",notes:"Notes",users:"Utilisateurs",profile:"Mon profil",changePassword:"Changement de mot de passe",map:"Carte"}[V.name]||"";return q?`${z} - ${q}`:z});bs(K,z=>{document.title=z},{immediate:!0});const $=gr(()=>r.notifications.length);function O(){r.clearAll(),u.value=!1}return vp(()=>{if(r.lastAddedId!==null){const z=r.notifications.find(V=>V.id===r.lastAddedId);z&&Ko(()=>{R(),f.value=!0,d.value={id:z.id,message:z.message,type:z.type},requestAnimationFrame(()=>{setTimeout(()=>{m.value=!0,setTimeout(()=>{m.value=!1,setTimeout(()=>{var V;((V=d.value)==null?void 0:V.id)===z.id&&(d.value=null,f.value=!1)},300)},4e3)},50)})})}}),(z,V)=>{var W;return Ue(),Ge("div",Z7,[te.value?(Ue(),Ge("header",K7,[E("nav",Y7,[E("div",J7,[E("div",X7,[E("button",{onClick:V[0]||(V[0]=q=>s.value=!s.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 md:hidden"},[V[7]||(V[7]=E("span",{class:"sr-only"},"Ouvrir le menu",-1)),(Ue(),Ge("svg",Q7,[s.value?(Ue(),Ge("path",tD)):(Ue(),Ge("path",eD))]))]),ci(qn(Rd),{to:"/",class:"text-xl font-semibold text-primary-600 truncate ml-2 md:ml-0"},{default:Gl(()=>V[8]||(V[8]=[E("span",{class:"md:inline hidden"},"TagMap",-1),E("span",{class:"md:hidden inline"},"TM",-1)])),_:1}),E("div",nD,[(Ue(!0),Ge(Rn,null,Nr(le.value,q=>(Ue(),za(qn(Rd),{key:q.name,to:q.to,class:Ii(["text-sm font-medium transition-colors duration-200",[z.$route.path===q.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Gl(()=>[di(Wt(q.name),1)]),_:2},1032,["to","class"]))),128))])]),z.$route.path==="/"?(Ue(),Ge("div",rD,[ci(rb,{onSelectLocation:I})])):(Ue(),Ge("div",iD)),E("div",sD,[qn(i)?(Ue(),Ge("button",oD,V[9]||(V[9]=[E("span",{class:"sr-only"},"Performance",-1),E("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)]))):un("",!0),E("div",aD,[E("button",{ref_key:"bellButtonRef",ref:w,onClick:V[1]||(V[1]=q=>u.value=!u.value),class:Ii(["relative flex items-center justify-center p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",{"animate-bell":f.value}])},V[10]||(V[10]=[E("span",{class:"sr-only"},"Voir les notifications",-1),E("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)]),2),u.value?(Ue(),Ge("div",{key:0,class:"absolute right-0 mt-2 md:w-80 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3000] md:right-0 right-0 left-0 md:left-auto",style:tl(y.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[E("div",lD,[E("div",uD,[V[12]||(V[12]=E("h3",{class:"text-sm font-semibold text-gray-700"},"Notifications",-1)),E("div",cD,[$.value>0?(Ue(),Ge("button",{key:0,onClick:O,class:"text-xs text-primary-600 hover:text-primary-800"}," Tout effacer ")):un("",!0),E("button",{onClick:V[2]||(V[2]=q=>u.value=!1),class:"md:hidden p-1 rounded-full hover:bg-gray-100"},V[11]||(V[11]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])]),E("div",fD,[$.value===0?(Ue(),Ge("div",hD," Aucune notification ")):un("",!0),(Ue(!0),Ge(Rn,null,Nr(qn(r).notifications,q=>(Ue(),Ge("div",{key:q.id,class:"px-4 py-3 md:py-3 py-4 border-b border-gray-100 last:border-0 hover:bg-gray-50"},[E("div",dD,[E("div",pD,[q.type==="success"?(Ue(),Ge("svg",gD,V[13]||(V[13]=[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):q.type==="error"?(Ue(),Ge("svg",mD,V[14]||(V[14]=[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):q.type==="warning"?(Ue(),Ge("svg",vD,V[15]||(V[15]=[E("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):(Ue(),Ge("svg",yD,V[16]||(V[16]=[E("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])))]),E("div",_D,[E("p",bD,Wt(q.message),1),E("button",{onClick:X=>qn(r).removeNotification(q.id),class:"text-xs md:text-xs text-primary-600 hover:text-primary-800 mt-2 md:mt-1 py-1 md:py-0"}," Fermer ",8,wD)])])]))),128))])],4)):un("",!0)]),E("div",xD,[E("button",{onClick:V[3]||(V[3]=q=>o.value=!o.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[E("div",LD,[E("span",SD,Wt(N.value),1),j.value?(Ue(),Ge("span",CD,Wt(j.value),1)):un("",!0)]),E("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:((W=qn(n).user)==null?void 0:W.logo)||"https://ui-avatars.com/api/?name="+encodeURIComponent(N.value),alt:N.value},null,8,ED)]),o.value?(Ue(),Ge("div",{key:0,class:"absolute right-0 mt-2 md:w-48 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3000] md:right-0 right-0 left-0 md:left-auto",style:tl(y.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[E("div",PD,[E("div",null,[E("div",MD,Wt(N.value),1),E("div",AD,Wt(j.value),1)]),E("button",{onClick:V[4]||(V[4]=q=>o.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},V[17]||(V[17]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),(Ue(!0),Ge(Rn,null,Nr(xe.value,q=>(Ue(),za(qn(Rd),{key:q.name,to:q.to,class:"block px-4 md:py-2 py-3 text-sm text-gray-700 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",onClick:V[5]||(V[5]=X=>o.value=!1)},{default:Gl(()=>[di(Wt(q.name),1)]),_:2},1032,["to"]))),128)),E("button",{onClick:G,class:"block w-full px-4 md:py-2 py-3 text-left text-sm text-red-600 hover:bg-gray-50 font-medium"}," Déconnexion ")],4)):un("",!0)])])]),s.value?(Ue(),Ge("div",kD,[E("div",TD,[(Ue(!0),Ge(Rn,null,Nr(le.value,q=>(Ue(),za(qn(Rd),{key:q.name,to:q.to,class:Ii(["block px-3 py-2 rounded-md text-base font-medium",[z.$route.path===q.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:V[6]||(V[6]=X=>s.value=!1)},{default:Gl(()=>[di(Wt(q.name),1)]),_:2},1032,["to","class"]))),128))]),z.$route.path==="/"?(Ue(),Ge("div",DD,[ci(rb,{onSelectLocation:I})])):un("",!0)])):un("",!0)])])):un("",!0),E("main",{class:Ii([z.$route.path==="/"&&!y.value?"overflow-hidden":"overflow-auto","flex-1 flex flex-col","md:h-[calc(100vh-64px)]"])},[ci(qn(Y5))],2),ci(W7,{position:"bottom-left"})])}}}),ND="modulepreload",OD=function(e){return"/static/frontend/"+e},ib={},Yf=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),u=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(n.map(f=>{if(f=OD(f),f in ib)return;ib[f]=!0;const d=f.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${m}`))return;const y=document.createElement("link");if(y.rel=d?"stylesheet":ND,d||(y.as="script"),y.crossOrigin="",y.href=f,u&&y.setAttribute("nonce",u),document.head.appendChild(y),d)return new Promise((w,_)=>{y.addEventListener("load",w),y.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(s){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=s,window.dispatchEvent(u),!u.defaultPrevented)throw s}return i.then(s=>{for(const u of s||[])u.status==="rejected"&&o(u.reason);return t().catch(o)})},ID={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},RD={class:"max-w-md w-full space-y-8"},FD={class:"space-y-4"},jD={class:"mt-1"},zD={class:"mt-1"},$D={class:"mt-1"},UD={key:0,class:"rounded-md bg-red-50 p-4"},VD={class:"flex"},HD={class:"ml-3"},GD={class:"text-sm font-medium text-red-800"},qD={key:1,class:"rounded-md bg-yellow-50 p-4"},WD={class:"flex"},ZD={class:"ml-3"},KD={class:"mt-2 text-sm text-yellow-700"},YD={class:"list-disc pl-5 space-y-1"},JD=["disabled"],XD={class:"absolute left-0 inset-y-0 flex items-center pl-3"},QD={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},eB={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},tB=oo({__name:"ChangePasswordForm",setup(e){const t=Dp(),n=ga(),r=Yl({oldPassword:"",newPassword:"",confirmPassword:""}),i=Rt(!1),o=Rt("");Fo(()=>{var d,m;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:n.isAuthenticated,userId:(d=n.user)==null?void 0:d.id,mustChangePassword:(m=n.user)==null?void 0:m.must_change_password})});const s=gr(()=>{const d=[];return r.newPassword&&r.newPassword.length<8&&d.push("Le nouveau mot de passe doit contenir au moins 8 caractères"),r.newPassword&&r.confirmPassword&&r.newPassword!==r.confirmPassword&&d.push("Les mots de passe ne correspondent pas"),d}),u=gr(()=>r.oldPassword.length>0&&r.newPassword.length>=8&&r.newPassword===r.confirmPassword);async function f(){var d,m,y,w,_,M,k,R;if(!u.value){o.value="Veuillez corriger les erreurs avant de continuer";return}if(!((d=n.user)!=null&&d.id)){o.value="Erreur : utilisateur non identifié";return}i.value=!0,o.value="";try{console.log("Submitting password change..."),await n.changePassword(r.oldPassword,r.newPassword),console.log("Password changed successfully"),t.push("/")}catch(N){console.error("Password change failed:",N),(y=(m=N.response)==null?void 0:m.data)!=null&&y.detail?o.value=N.response.data.detail:(_=(w=N.response)==null?void 0:w.data)!=null&&_.old_password?o.value=N.response.data.old_password[0]:(k=(M=N.response)==null?void 0:M.data)!=null&&k.password?o.value=N.response.data.password[0]:((R=N.response)==null?void 0:R.status)===401?(o.value="Session expirée, veuillez vous reconnecter",await n.logout(),t.push("/login")):o.value="Une erreur est survenue lors du changement de mot de passe"}finally{i.value=!1}}return(d,m)=>(Ue(),Ge("div",ID,[E("div",RD,[m[12]||(m[12]=E("div",null,[E("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),E("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de sécurité, vous devez changer votre mot de passe. ")],-1)),E("form",{class:"mt-8 space-y-6",onSubmit:Vc(f,["prevent"])},[E("div",FD,[E("div",null,[m[3]||(m[3]=E("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),E("div",jD,[In(E("input",{id:"old-password","onUpdate:modelValue":m[0]||(m[0]=y=>r.oldPassword=y),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[ei,r.oldPassword]])])]),E("div",null,[m[4]||(m[4]=E("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),E("div",zD,[In(E("input",{id:"new-password","onUpdate:modelValue":m[1]||(m[1]=y=>r.newPassword=y),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[ei,r.newPassword]])]),m[5]||(m[5]=E("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractères ",-1))]),E("div",null,[m[6]||(m[6]=E("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),E("div",$D,[In(E("input",{id:"confirm-password","onUpdate:modelValue":m[2]||(m[2]=y=>r.confirmPassword=y),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[ei,r.confirmPassword]])])])]),o.value?(Ue(),Ge("div",UD,[E("div",VD,[m[7]||(m[7]=E("div",{class:"flex-shrink-0"},[E("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),E("div",HD,[E("h3",GD,Wt(o.value),1)])])])):un("",!0),s.value.length>0?(Ue(),Ge("div",qD,[E("div",WD,[m[9]||(m[9]=E("div",{class:"flex-shrink-0"},[E("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),E("div",ZD,[m[8]||(m[8]=E("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),E("div",KD,[E("ul",YD,[(Ue(!0),Ge(Rn,null,Nr(s.value,(y,w)=>(Ue(),Ge("li",{key:w},Wt(y),1))),128))])])])])])):un("",!0),E("div",null,[E("button",{type:"submit",disabled:i.value||!u.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[E("span",XD,[i.value?(Ue(),Ge("svg",eB,m[11]||(m[11]=[E("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),E("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Ue(),Ge("svg",QD,m[10]||(m[10]=[E("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),di(" "+Wt(i.value?"Modification en cours...":"Changer le mot de passe"),1)],8,JD)])],32)])]))}}),a1="/static/frontend/assets/logo.svg",nB={class:"min-h-screen bg-gradient-to-b from-blue-50 to-white py-12 sm:px-6 lg:px-8 overflow-auto relative"},rB={class:"container mx-auto"},iB={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},sB={class:"bg-white py-8 px-6 shadow-lg rounded-md sm:px-10"},oB={key:0,class:"rounded-md bg-red-50 p-4"},aB={class:"flex"},lB={class:"ml-3"},uB={class:"text-sm font-medium text-red-800"},cB={class:"mt-1"},fB={class:"mt-1 relative"},hB=["type"],dB={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},pB={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},gB={class:"flex items-center justify-between"},mB={class:"flex items-center"},vB={class:"text-sm"},yB=["disabled"],_B={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},bB=oo({__name:"LoginView",setup(e){const t=Dp(),n=ga(),r=Rt(!1),i=Rt(null),o=Rt(!1),s=Yl({username:"",password:"",rememberMe:!1});Fo(async()=>{var f;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE);try{if((f=window.INITIAL_STATE)!=null&&f.isAuthenticated){console.log("User is authenticated, redirecting to home"),t.push("/");return}await n.restoreSession()&&(console.log("Session restored, redirecting to home"),t.push("/"))}catch(d){console.error("Error during initialization:",d),i.value=null}});async function u(){var f,d,m,y,w,_,M,k,R;r.value=!0,i.value=null;try{if(!s.username||!s.password){i.value="Veuillez remplir tous les champs";return}await n.login(s.username,s.password),(f=n.user)!=null&&f.must_change_password?t.push("/change-password"):t.push("/")}catch(N){console.error("Login error:",N),((d=N==null?void 0:N.response)==null?void 0:d.status)===500?i.value="Le service est temporairement indisponible. Veuillez réessayer dans quelques instants.":((m=N==null?void 0:N.response)==null?void 0:m.status)===401||((y=N==null?void 0:N.response)==null?void 0:y.status)===403?i.value="Identifiants incorrects. Veuillez vérifier votre nom d'utilisateur et mot de passe.":(_=(w=N==null?void 0:N.response)==null?void 0:w.data)!=null&&_.detail?i.value=N.response.data.detail:(R=(k=(M=N==null?void 0:N.response)==null?void 0:M.data)==null?void 0:k.non_field_errors)!=null&&R[0]?i.value=N.response.data.non_field_errors[0]:(N==null?void 0:N.message)==="Network Error"?i.value="Impossible de se connecter au serveur. Veuillez vérifier votre connexion internet.":i.value="Une erreur est survenue lors de la connexion. Veuillez réessayer."}finally{r.value=!1}}return(f,d)=>{const m=Yw("router-link");return Ue(),Ge("div",nB,[E("div",rB,[d[12]||(d[12]=E("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[E("img",{src:a1,alt:"TagMap Logo",class:"mx-auto h-40 w-auto transition-transform duration-300 hover:scale-110"}),E("h2",{class:"mt-2 text-center text-3xl font-bold text-gray-800"}," TagMap "),E("p",{class:"mt-2 text-center text-sm text-gray-600"}," Solution innovante de cartographie et gestion de projets ")],-1)),E("div",iB,[E("div",sB,[E("form",{class:"space-y-6",onSubmit:Vc(u,["prevent"])},[i.value?(Ue(),Ge("div",oB,[E("div",aB,[d[4]||(d[4]=E("div",{class:"flex-shrink-0"},[E("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),E("div",lB,[E("h3",uB,Wt(i.value),1)])])])):un("",!0),E("div",null,[d[5]||(d[5]=E("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),E("div",cB,[In(E("input",{id:"username","onUpdate:modelValue":d[0]||(d[0]=y=>s.username=y),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[ei,s.username]])])]),E("div",null,[d[8]||(d[8]=E("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),E("div",fB,[In(E("input",{id:"password","onUpdate:modelValue":d[1]||(d[1]=y=>s.password=y),type:o.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,hB),[[sy,s.password]]),E("button",{type:"button",onClick:d[2]||(d[2]=y=>o.value=!o.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[o.value?(Ue(),Ge("svg",dB,d[6]||(d[6]=[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(Ue(),Ge("svg",pB,d[7]||(d[7]=[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),E("div",gB,[E("div",mB,[In(E("input",{id:"remember-me","onUpdate:modelValue":d[3]||(d[3]=y=>s.rememberMe=y),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[xl,s.rememberMe]]),d[9]||(d[9]=E("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),E("div",vB,[ci(m,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Gl(()=>d[10]||(d[10]=[di(" Mot de passe oublié ? ")])),_:1})])]),E("div",null,[E("button",{type:"submit",disabled:r.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[r.value?(Ue(),Ge("svg",_B,d[11]||(d[11]=[E("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),E("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):un("",!0),di(" "+Wt(r.value?"Connexion en cours...":"Se connecter"),1)],8,yB)])],32)])]),d[13]||(d[13]=uc('<div class="mt-16 pt-8 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><h2 class="text-center text-2xl font-bold text-gray-800 mb-8">Découvrez comment TagMap transforme vos projets </h2><div class="flex justify-center mb-10"><a href="/assets/plaquette-tagmap.pdf" target="_blank" class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-all duration-200"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Télécharger notre plaquette </a></div><div class="grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-3"><div class="bg-white overflow-hidden shadow-lg rounded-lg transition-all duration-300 hover:shadow-xl"><div class="p-6"><div class="flex items-center justify-center h-12 w-12 rounded-md bg-primary-500 text-white mb-5 mx-auto"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"></path></svg></div><h3 class="text-lg font-medium text-gray-900 text-center">Cartographie de précision</h3><p class="mt-3 text-base text-gray-600 text-center"> Créez des plans détaillés avec des mesures précises de surfaces, distances et élévations pour optimiser vos projets d&#39;irrigation et d&#39;aménagement. </p></div></div><div class="bg-white overflow-hidden shadow-lg rounded-lg transition-all duration-300 hover:shadow-xl"><div class="p-6"><div class="flex items-center justify-center h-12 w-12 rounded-md bg-primary-500 text-white mb-5 mx-auto"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div><h3 class="text-lg font-medium text-gray-900 text-center">Gestion collaborative</h3><p class="mt-3 text-base text-gray-600 text-center"> Partagez vos projets avec votre équipe et vos clients. Organisez vos notes géolocalisées et suivez l&#39;avancement des tâches en temps réel. </p></div></div></div><div class="mt-16 mb-16 bg-white overflow-hidden shadow-lg rounded-lg max-w-4xl mx-auto"><div class="p-8"><div class="flex items-center mb-6"><div class="h-12 w-12 rounded-full bg-primary-100 flex items-center justify-center text-primary-700 font-bold text-xl"> P</div><div class="ml-4"><h4 class="text-lg font-medium text-gray-900">Pierre Durand</h4><p class="text-sm text-gray-600">Directeur technique, Irrigation Pro</p></div></div><blockquote class="italic text-gray-700"> &quot;TagMap a révolutionné notre façon de concevoir et de suivre nos projets d&#39;irrigation. La précision des mesures et la facilité de collaboration entre nos équipes terrain et bureau ont considérablement amélioré notre efficacité.&quot; </blockquote></div></div><div class="h-16"></div></div>',1))])])}}});var l1={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,r){r(t)})(Jo,function(n){var r="1.9.4";function i(a){var p,S,U,ie;for(S=1,U=arguments.length;S<U;S++){ie=arguments[S];for(p in ie)a[p]=ie[p]}return a}var o=Object.create||function(){function a(){}return function(p){return a.prototype=p,new a}}();function s(a,p){var S=Array.prototype.slice;if(a.bind)return a.bind.apply(a,S.call(arguments,1));var U=S.call(arguments,2);return function(){return a.apply(p,U.length?U.concat(S.call(arguments)):arguments)}}var u=0;function f(a){return"_leaflet_id"in a||(a._leaflet_id=++u),a._leaflet_id}function d(a,p,S){var U,ie,Ce,ot;return ot=function(){U=!1,ie&&(Ce.apply(S,ie),ie=!1)},Ce=function(){U?ie=arguments:(a.apply(S,arguments),setTimeout(ot,p),U=!0)},Ce}function m(a,p,S){var U=p[1],ie=p[0],Ce=U-ie;return a===U&&S?a:((a-ie)%Ce+Ce)%Ce+ie}function y(){return!1}function w(a,p){if(p===!1)return a;var S=Math.pow(10,p===void 0?6:p);return Math.round(a*S)/S}function _(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function M(a){return _(a).split(/\s+/)}function k(a,p){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?o(a.options):{});for(var S in p)a.options[S]=p[S];return a.options}function R(a,p,S){var U=[];for(var ie in a)U.push(encodeURIComponent(S?ie.toUpperCase():ie)+"="+encodeURIComponent(a[ie]));return(!p||p.indexOf("?")===-1?"?":"&")+U.join("&")}var N=/\{ *([\w_ -]+) *\}/g;function j(a,p){return a.replace(N,function(S,U){var ie=p[U];if(ie===void 0)throw new Error("No value provided for variable "+S);return typeof ie=="function"&&(ie=ie(p)),ie})}var J=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function te(a,p){for(var S=0;S<a.length;S++)if(a[S]===p)return S;return-1}var ae="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function le(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var xe=0;function G(a){var p=+new Date,S=Math.max(0,16-(p-xe));return xe=p+S,window.setTimeout(a,S)}var I=window.requestAnimationFrame||le("RequestAnimationFrame")||G,K=window.cancelAnimationFrame||le("CancelAnimationFrame")||le("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function $(a,p,S){if(S&&I===G)a.call(p);else return I.call(window,s(a,p))}function O(a){a&&K.call(window,a)}var z={__proto__:null,extend:i,create:o,bind:s,get lastId(){return u},stamp:f,throttle:d,wrapNum:m,falseFn:y,formatNum:w,trim:_,splitWords:M,setOptions:k,getParamString:R,template:j,isArray:J,indexOf:te,emptyImageUrl:ae,requestFn:I,cancelFn:K,requestAnimFrame:$,cancelAnimFrame:O};function V(){}V.extend=function(a){var p=function(){k(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},S=p.__super__=this.prototype,U=o(S);U.constructor=p,p.prototype=U;for(var ie in this)Object.prototype.hasOwnProperty.call(this,ie)&&ie!=="prototype"&&ie!=="__super__"&&(p[ie]=this[ie]);return a.statics&&i(p,a.statics),a.includes&&(W(a.includes),i.apply(null,[U].concat(a.includes))),i(U,a),delete U.statics,delete U.includes,U.options&&(U.options=S.options?o(S.options):{},i(U.options,a.options)),U._initHooks=[],U.callInitHooks=function(){if(!this._initHooksCalled){S.callInitHooks&&S.callInitHooks.call(this),this._initHooksCalled=!0;for(var Ce=0,ot=U._initHooks.length;Ce<ot;Ce++)U._initHooks[Ce].call(this)}},p},V.include=function(a){var p=this.prototype.options;return i(this.prototype,a),a.options&&(this.prototype.options=p,this.mergeOptions(a.options)),this},V.mergeOptions=function(a){return i(this.prototype.options,a),this},V.addInitHook=function(a){var p=Array.prototype.slice.call(arguments,1),S=typeof a=="function"?a:function(){this[a].apply(this,p)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(S),this};function W(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=J(a)?a:[a];for(var p=0;p<a.length;p++)a[p]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var q={on:function(a,p,S){if(typeof a=="object")for(var U in a)this._on(U,a[U],p);else{a=M(a);for(var ie=0,Ce=a.length;ie<Ce;ie++)this._on(a[ie],p,S)}return this},off:function(a,p,S){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var U in a)this._off(U,a[U],p);else{a=M(a);for(var ie=arguments.length===1,Ce=0,ot=a.length;Ce<ot;Ce++)ie?this._off(a[Ce]):this._off(a[Ce],p,S)}return this},_on:function(a,p,S,U){if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}if(this._listens(a,p,S)===!1){S===this&&(S=void 0);var ie={fn:p,ctx:S};U&&(ie.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(ie)}},_off:function(a,p,S){var U,ie,Ce;if(this._events&&(U=this._events[a],!!U)){if(arguments.length===1){if(this._firingCount)for(ie=0,Ce=U.length;ie<Ce;ie++)U[ie].fn=y;delete this._events[a];return}if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}var ot=this._listens(a,p,S);if(ot!==!1){var Pt=U[ot];this._firingCount&&(Pt.fn=y,this._events[a]=U=U.slice()),U.splice(ot,1)}}},fire:function(a,p,S){if(!this.listens(a,S))return this;var U=i({},p,{type:a,target:this,sourceTarget:p&&p.sourceTarget||this});if(this._events){var ie=this._events[a];if(ie){this._firingCount=this._firingCount+1||1;for(var Ce=0,ot=ie.length;Ce<ot;Ce++){var Pt=ie[Ce],zt=Pt.fn;Pt.once&&this.off(a,zt,Pt.ctx),zt.call(Pt.ctx||this,U)}this._firingCount--}}return S&&this._propagateEvent(U),this},listens:function(a,p,S,U){typeof a!="string"&&console.warn('"string" type argument expected');var ie=p;typeof p!="function"&&(U=!!p,ie=void 0,S=void 0);var Ce=this._events&&this._events[a];if(Ce&&Ce.length&&this._listens(a,ie,S)!==!1)return!0;if(U){for(var ot in this._eventParents)if(this._eventParents[ot].listens(a,p,S,U))return!0}return!1},_listens:function(a,p,S){if(!this._events)return!1;var U=this._events[a]||[];if(!p)return!!U.length;S===this&&(S=void 0);for(var ie=0,Ce=U.length;ie<Ce;ie++)if(U[ie].fn===p&&U[ie].ctx===S)return ie;return!1},once:function(a,p,S){if(typeof a=="object")for(var U in a)this._on(U,a[U],p,!0);else{a=M(a);for(var ie=0,Ce=a.length;ie<Ce;ie++)this._on(a[ie],p,S,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[f(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[f(a)],this},_propagateEvent:function(a){for(var p in this._eventParents)this._eventParents[p].fire(a.type,i({layer:a.target,propagatedFrom:a.target},a),!0)}};q.addEventListener=q.on,q.removeEventListener=q.clearAllEventListeners=q.off,q.addOneTimeEventListener=q.once,q.fireEvent=q.fire,q.hasEventListeners=q.listens;var X=V.extend(q);function Y(a,p,S){this.x=S?Math.round(a):a,this.y=S?Math.round(p):p}var me=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};Y.prototype={clone:function(){return new Y(this.x,this.y)},add:function(a){return this.clone()._add(Se(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(Se(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new Y(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new Y(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=me(this.x),this.y=me(this.y),this},distanceTo:function(a){a=Se(a);var p=a.x-this.x,S=a.y-this.y;return Math.sqrt(p*p+S*S)},equals:function(a){return a=Se(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=Se(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+w(this.x)+", "+w(this.y)+")"}};function Se(a,p,S){return a instanceof Y?a:J(a)?new Y(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new Y(a.x,a.y):new Y(a,p,S)}function Re(a,p){if(a)for(var S=p?[a,p]:a,U=0,ie=S.length;U<ie;U++)this.extend(S[U])}Re.prototype={extend:function(a){var p,S;if(!a)return this;if(a instanceof Y||typeof a[0]=="number"||"x"in a)p=S=Se(a);else if(a=T(a),p=a.min,S=a.max,!p||!S)return this;return!this.min&&!this.max?(this.min=p.clone(),this.max=S.clone()):(this.min.x=Math.min(p.x,this.min.x),this.max.x=Math.max(S.x,this.max.x),this.min.y=Math.min(p.y,this.min.y),this.max.y=Math.max(S.y,this.max.y)),this},getCenter:function(a){return Se((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return Se(this.min.x,this.max.y)},getTopRight:function(){return Se(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var p,S;return typeof a[0]=="number"||a instanceof Y?a=Se(a):a=T(a),a instanceof Re?(p=a.min,S=a.max):p=S=a,p.x>=this.min.x&&S.x<=this.max.x&&p.y>=this.min.y&&S.y<=this.max.y},intersects:function(a){a=T(a);var p=this.min,S=this.max,U=a.min,ie=a.max,Ce=ie.x>=p.x&&U.x<=S.x,ot=ie.y>=p.y&&U.y<=S.y;return Ce&&ot},overlaps:function(a){a=T(a);var p=this.min,S=this.max,U=a.min,ie=a.max,Ce=ie.x>p.x&&U.x<S.x,ot=ie.y>p.y&&U.y<S.y;return Ce&&ot},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var p=this.min,S=this.max,U=Math.abs(p.x-S.x)*a,ie=Math.abs(p.y-S.y)*a;return T(Se(p.x-U,p.y-ie),Se(S.x+U,S.y+ie))},equals:function(a){return a?(a=T(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function T(a,p){return!a||a instanceof Re?a:new Re(a,p)}function ne(a,p){if(a)for(var S=p?[a,p]:a,U=0,ie=S.length;U<ie;U++)this.extend(S[U])}ne.prototype={extend:function(a){var p=this._southWest,S=this._northEast,U,ie;if(a instanceof ce)U=a,ie=a;else if(a instanceof ne){if(U=a._southWest,ie=a._northEast,!U||!ie)return this}else return a?this.extend(ye(a)||fe(a)):this;return!p&&!S?(this._southWest=new ce(U.lat,U.lng),this._northEast=new ce(ie.lat,ie.lng)):(p.lat=Math.min(U.lat,p.lat),p.lng=Math.min(U.lng,p.lng),S.lat=Math.max(ie.lat,S.lat),S.lng=Math.max(ie.lng,S.lng)),this},pad:function(a){var p=this._southWest,S=this._northEast,U=Math.abs(p.lat-S.lat)*a,ie=Math.abs(p.lng-S.lng)*a;return new ne(new ce(p.lat-U,p.lng-ie),new ce(S.lat+U,S.lng+ie))},getCenter:function(){return new ce((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ce(this.getNorth(),this.getWest())},getSouthEast:function(){return new ce(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof ce||"lat"in a?a=ye(a):a=fe(a);var p=this._southWest,S=this._northEast,U,ie;return a instanceof ne?(U=a.getSouthWest(),ie=a.getNorthEast()):U=ie=a,U.lat>=p.lat&&ie.lat<=S.lat&&U.lng>=p.lng&&ie.lng<=S.lng},intersects:function(a){a=fe(a);var p=this._southWest,S=this._northEast,U=a.getSouthWest(),ie=a.getNorthEast(),Ce=ie.lat>=p.lat&&U.lat<=S.lat,ot=ie.lng>=p.lng&&U.lng<=S.lng;return Ce&&ot},overlaps:function(a){a=fe(a);var p=this._southWest,S=this._northEast,U=a.getSouthWest(),ie=a.getNorthEast(),Ce=ie.lat>p.lat&&U.lat<S.lat,ot=ie.lng>p.lng&&U.lng<S.lng;return Ce&&ot},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,p){return a?(a=fe(a),this._southWest.equals(a.getSouthWest(),p)&&this._northEast.equals(a.getNorthEast(),p)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function fe(a,p){return a instanceof ne?a:new ne(a,p)}function ce(a,p,S){if(isNaN(a)||isNaN(p))throw new Error("Invalid LatLng object: ("+a+", "+p+")");this.lat=+a,this.lng=+p,S!==void 0&&(this.alt=+S)}ce.prototype={equals:function(a,p){if(!a)return!1;a=ye(a);var S=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return S<=(p===void 0?1e-9:p)},toString:function(a){return"LatLng("+w(this.lat,a)+", "+w(this.lng,a)+")"},distanceTo:function(a){return B.distance(this,ye(a))},wrap:function(){return B.wrapLatLng(this)},toBounds:function(a){var p=180*a/40075017,S=p/Math.cos(Math.PI/180*this.lat);return fe([this.lat-p,this.lng-S],[this.lat+p,this.lng+S])},clone:function(){return new ce(this.lat,this.lng,this.alt)}};function ye(a,p,S){return a instanceof ce?a:J(a)&&typeof a[0]!="object"?a.length===3?new ce(a[0],a[1],a[2]):a.length===2?new ce(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new ce(a.lat,"lng"in a?a.lng:a.lon,a.alt):p===void 0?null:new ce(a,p,S)}var oe={latLngToPoint:function(a,p){var S=this.projection.project(a),U=this.scale(p);return this.transformation._transform(S,U)},pointToLatLng:function(a,p){var S=this.scale(p),U=this.transformation.untransform(a,S);return this.projection.unproject(U)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var p=this.projection.bounds,S=this.scale(a),U=this.transformation.transform(p.min,S),ie=this.transformation.transform(p.max,S);return new Re(U,ie)},infinite:!1,wrapLatLng:function(a){var p=this.wrapLng?m(a.lng,this.wrapLng,!0):a.lng,S=this.wrapLat?m(a.lat,this.wrapLat,!0):a.lat,U=a.alt;return new ce(S,p,U)},wrapLatLngBounds:function(a){var p=a.getCenter(),S=this.wrapLatLng(p),U=p.lat-S.lat,ie=p.lng-S.lng;if(U===0&&ie===0)return a;var Ce=a.getSouthWest(),ot=a.getNorthEast(),Pt=new ce(Ce.lat-U,Ce.lng-ie),zt=new ce(ot.lat-U,ot.lng-ie);return new ne(Pt,zt)}},B=i({},oe,{wrapLng:[-180,180],R:6371e3,distance:function(a,p){var S=Math.PI/180,U=a.lat*S,ie=p.lat*S,Ce=Math.sin((p.lat-a.lat)*S/2),ot=Math.sin((p.lng-a.lng)*S/2),Pt=Ce*Ce+Math.cos(U)*Math.cos(ie)*ot*ot,zt=2*Math.atan2(Math.sqrt(Pt),Math.sqrt(1-Pt));return this.R*zt}}),ue=6378137,De={R:ue,MAX_LATITUDE:85.0511287798,project:function(a){var p=Math.PI/180,S=this.MAX_LATITUDE,U=Math.max(Math.min(S,a.lat),-S),ie=Math.sin(U*p);return new Y(this.R*a.lng*p,this.R*Math.log((1+ie)/(1-ie))/2)},unproject:function(a){var p=180/Math.PI;return new ce((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*p,a.x*p/this.R)},bounds:function(){var a=ue*Math.PI;return new Re([-a,-a],[a,a])}()};function Me(a,p,S,U){if(J(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=p,this._c=S,this._d=U}Me.prototype={transform:function(a,p){return this._transform(a.clone(),p)},_transform:function(a,p){return p=p||1,a.x=p*(this._a*a.x+this._b),a.y=p*(this._c*a.y+this._d),a},untransform:function(a,p){return p=p||1,new Y((a.x/p-this._b)/this._a,(a.y/p-this._d)/this._c)}};function We(a,p,S,U){return new Me(a,p,S,U)}var Z=i({},B,{code:"EPSG:3857",projection:De,transformation:function(){var a=.5/(Math.PI*De.R);return We(a,.5,-a,.5)}()}),de=i({},Z,{code:"EPSG:900913"});function ve(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function pe(a,p){var S="",U,ie,Ce,ot,Pt,zt;for(U=0,Ce=a.length;U<Ce;U++){for(Pt=a[U],ie=0,ot=Pt.length;ie<ot;ie++)zt=Pt[ie],S+=(ie?"L":"M")+zt.x+" "+zt.y;S+=p?ct.svg?"z":"x":""}return S||"M0 0"}var $e=document.documentElement.style,Qe="ActiveXObject"in window,Ke=Qe&&!document.addEventListener,He="msLaunchUri"in navigator&&!("documentMode"in document),Xe=mr("webkit"),st=mr("android"),kt=mr("android 2")||mr("android 3"),Ct=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ut=st&&mr("Google")&&Ct<537&&!("AudioNode"in window),Gt=!!window.opera,fn=!He&&mr("chrome"),pn=mr("gecko")&&!Xe&&!Gt&&!Qe,et=!fn&&mr("safari"),it=mr("phantom"),nt="OTransition"in $e,Vt=navigator.platform.indexOf("Win")===0,Qt=Qe&&"transition"in $e,Nn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!kt,wn="MozPerspective"in $e,An=!window.L_DISABLE_3D&&(Qt||Nn||wn)&&!nt&&!it,or=typeof orientation<"u"||mr("mobile"),xn=or&&Xe,En=or&&Nn,Cn=!window.PointerEvent&&window.MSPointerEvent,cr=!!(window.PointerEvent||Cn),yr="ontouchstart"in window||!!window.TouchEvent,mt=!window.L_NO_TOUCH&&(yr||cr),qe=or&&Gt,Ft=or&&pn,kn=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ar=function(){var a=!1;try{var p=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",y,p),window.removeEventListener("testPassiveEventSupport",y,p)}catch{}return a}(),Wn=function(){return!!document.createElement("canvas").getContext}(),Xt=!!(document.createElementNS&&ve("svg").createSVGRect),vn=!!Xt&&function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),It=!Xt&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var p=a.firstChild;return p.style.behavior="url(#default#VML)",p&&typeof p.adj=="object"}catch{return!1}}(),Yt=navigator.platform.indexOf("Mac")===0,Ln=navigator.platform.indexOf("Linux")===0;function mr(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var ct={ie:Qe,ielt9:Ke,edge:He,webkit:Xe,android:st,android23:kt,androidStock:Ut,opera:Gt,chrome:fn,gecko:pn,safari:et,phantom:it,opera12:nt,win:Vt,ie3d:Qt,webkit3d:Nn,gecko3d:wn,any3d:An,mobile:or,mobileWebkit:xn,mobileWebkit3d:En,msPointer:Cn,pointer:cr,touch:mt,touchNative:yr,mobileOpera:qe,mobileGecko:Ft,retina:kn,passiveEvents:ar,canvas:Wn,svg:Xt,vml:It,inlineSvg:vn,mac:Yt,linux:Ln},On=ct.msPointer?"MSPointerDown":"pointerdown",xr=ct.msPointer?"MSPointerMove":"pointermove",Ti=ct.msPointer?"MSPointerUp":"pointerup",Ir=ct.msPointer?"MSPointerCancel":"pointercancel",Er={touchstart:On,touchmove:xr,touchend:Ti,touchcancel:Ir},lr={touchstart:Fr,touchmove:ai,touchend:ai,touchcancel:ai},Vr={},rr=!1;function Or(a,p,S){return p==="touchstart"&&Si(),lr[p]?(S=lr[p].bind(this,S),a.addEventListener(Er[p],S,!1),S):(console.warn("wrong event specified:",p),y)}function er(a,p,S){if(!Er[p]){console.warn("wrong event specified:",p);return}a.removeEventListener(Er[p],S,!1)}function en(a){Vr[a.pointerId]=a}function qi(a){Vr[a.pointerId]&&(Vr[a.pointerId]=a)}function Di(a){delete Vr[a.pointerId]}function Si(){rr||(document.addEventListener(On,en,!0),document.addEventListener(xr,qi,!0),document.addEventListener(Ti,Di,!0),document.addEventListener(Ir,Di,!0),rr=!0)}function ai(a,p){if(p.pointerType!==(p.MSPOINTER_TYPE_MOUSE||"mouse")){p.touches=[];for(var S in Vr)p.touches.push(Vr[S]);p.changedTouches=[p],a(p)}}function Fr(a,p){p.MSPOINTER_TYPE_TOUCH&&p.pointerType===p.MSPOINTER_TYPE_TOUCH&&Sr(p),ai(a,p)}function Ml(a){var p={},S,U;for(U in a)S=a[U],p[U]=S&&S.bind?S.bind(a):S;return a=p,p.type="dblclick",p.detail=2,p.isTrusted=!1,p._simulated=!0,p}var jr=200;function Xo(a,p){a.addEventListener("dblclick",p);var S=0,U;function ie(Ce){if(Ce.detail!==1){U=Ce.detail;return}if(!(Ce.pointerType==="mouse"||Ce.sourceCapabilities&&!Ce.sourceCapabilities.firesTouchEvents)){var ot=Ua(Ce);if(!(ot.some(function(zt){return zt instanceof HTMLLabelElement&&zt.attributes.for})&&!ot.some(function(zt){return zt instanceof HTMLInputElement||zt instanceof HTMLSelectElement}))){var Pt=Date.now();Pt-S<=jr?(U++,U===2&&p(Ml(Ce))):U=1,S=Pt}}}return a.addEventListener("click",ie),{dblclick:p,simDblclick:ie}}function _u(a,p){a.removeEventListener("dblclick",p.dblclick),a.removeEventListener("click",p.simDblclick)}var wo=as(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ri=as(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Fn=ri==="webkitTransition"||ri==="OTransition"?ri+"End":"transitionend";function xs(a){return typeof a=="string"?document.getElementById(a):a}function li(a,p){var S=a.style[p]||a.currentStyle&&a.currentStyle[p];if((!S||S==="auto")&&document.defaultView){var U=document.defaultView.getComputedStyle(a,null);S=U?U[p]:null}return S==="auto"?null:S}function fr(a,p,S){var U=document.createElement(a);return U.className=p||"",S&&S.appendChild(U),U}function Gn(a){var p=a.parentNode;p&&p.removeChild(a)}function gs(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function ms(a){var p=a.parentNode;p&&p.lastChild!==a&&p.appendChild(a)}function Lr(a){var p=a.parentNode;p&&p.firstChild!==a&&p.insertBefore(a,p.firstChild)}function jo(a,p){if(a.classList!==void 0)return a.classList.contains(p);var S=_n(a);return S.length>0&&new RegExp("(^|\\s)"+p+"(\\s|$)").test(S)}function Vn(a,p){if(a.classList!==void 0)for(var S=M(p),U=0,ie=S.length;U<ie;U++)a.classList.add(S[U]);else if(!jo(a,p)){var Ce=_n(a);Wr(a,(Ce?Ce+" ":"")+p)}}function _r(a,p){a.classList!==void 0?a.classList.remove(p):Wr(a,_((" "+_n(a)+" ").replace(" "+p+" "," ")))}function Wr(a,p){a.className.baseVal===void 0?a.className=p:a.className.baseVal=p}function _n(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function nn(a,p){"opacity"in a.style?a.style.opacity=p:"filter"in a.style&&ii(a,p)}function ii(a,p){var S=!1,U="DXImageTransform.Microsoft.Alpha";try{S=a.filters.item(U)}catch{if(p===1)return}p=Math.round(p*100),S?(S.Enabled=p!==100,S.Opacity=p):a.style.filter+=" progid:"+U+"(opacity="+p+")"}function as(a){for(var p=document.documentElement.style,S=0;S<a.length;S++)if(a[S]in p)return a[S];return!1}function vs(a,p,S){var U=p||new Y(0,0);a.style[wo]=(ct.ie3d?"translate("+U.x+"px,"+U.y+"px)":"translate3d("+U.x+"px,"+U.y+"px,0)")+(S?" scale("+S+")":"")}function Ci(a,p){a._leaflet_pos=p,ct.any3d?vs(a,p):(a.style.left=p.x+"px",a.style.top=p.y+"px")}function ao(a){return a._leaflet_pos||new Y(0,0)}var Ks,Bs,fi;if("onselectstart"in document)Ks=function(){br(window,"selectstart",Sr)},Bs=function(){Tr(window,"selectstart",Sr)};else{var To=as(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ks=function(){if(To){var a=document.documentElement.style;fi=a[To],a[To]="none"}},Bs=function(){To&&(document.documentElement.style[To]=fi,fi=void 0)}}function Ns(){br(window,"dragstart",Sr)}function Yi(){Tr(window,"dragstart",Sr)}var ys,zo;function ma(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(Ji(),ys=a,zo=a.style.outlineStyle,a.style.outlineStyle="none",br(window,"keydown",Ji))}function Ji(){ys&&(ys.style.outlineStyle=zo,ys=void 0,zo=void 0,Tr(window,"keydown",Ji))}function rl(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function va(a){var p=a.getBoundingClientRect();return{x:p.width/a.offsetWidth||1,y:p.height/a.offsetHeight||1,boundingClientRect:p}}var pr={__proto__:null,TRANSFORM:wo,TRANSITION:ri,TRANSITION_END:Fn,get:xs,getStyle:li,create:fr,remove:Gn,empty:gs,toFront:ms,toBack:Lr,hasClass:jo,addClass:Vn,removeClass:_r,setClass:Wr,getClass:_n,setOpacity:nn,testProp:as,setTransform:vs,setPosition:Ci,getPosition:ao,get disableTextSelection(){return Ks},get enableTextSelection(){return Bs},disableImageDrag:Ns,enableImageDrag:Yi,preventOutline:ma,restoreOutline:Ji,getSizedParentNode:rl,getScale:va};function br(a,p,S,U){if(p&&typeof p=="object")for(var ie in p)sl(a,ie,p[ie],S);else{p=M(p);for(var Ce=0,ot=p.length;Ce<ot;Ce++)sl(a,p[Ce],S,U)}return this}var Zr="_leaflet_events";function Tr(a,p,S,U){if(arguments.length===1)Os(a),delete a[Zr];else if(p&&typeof p=="object")for(var ie in p)$o(a,ie,p[ie],S);else if(p=M(p),arguments.length===2)Os(a,function(Pt){return te(p,Pt)!==-1});else for(var Ce=0,ot=p.length;Ce<ot;Ce++)$o(a,p[Ce],S,U);return this}function Os(a,p){for(var S in a[Zr]){var U=S.split(/\d/)[0];(!p||p(U))&&$o(a,U,null,null,S)}}var il={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function sl(a,p,S,U){var ie=p+f(S)+(U?"_"+f(U):"");if(a[Zr]&&a[Zr][ie])return this;var Ce=function(Pt){return S.call(U||a,Pt||window.event)},ot=Ce;!ct.touchNative&&ct.pointer&&p.indexOf("touch")===0?Ce=Or(a,p,Ce):ct.touch&&p==="dblclick"?Ce=Xo(a,Ce):"addEventListener"in a?p==="touchstart"||p==="touchmove"||p==="wheel"||p==="mousewheel"?a.addEventListener(il[p]||p,Ce,ct.passiveEvents?{passive:!1}:!1):p==="mouseenter"||p==="mouseleave"?(Ce=function(Pt){Pt=Pt||window.event,ol(a,Pt)&&ot(Pt)},a.addEventListener(il[p],Ce,!1)):a.addEventListener(p,ot,!1):a.attachEvent("on"+p,Ce),a[Zr]=a[Zr]||{},a[Zr][ie]=Ce}function $o(a,p,S,U,ie){ie=ie||p+f(S)+(U?"_"+f(U):"");var Ce=a[Zr]&&a[Zr][ie];if(!Ce)return this;!ct.touchNative&&ct.pointer&&p.indexOf("touch")===0?er(a,p,Ce):ct.touch&&p==="dblclick"?_u(a,Ce):"removeEventListener"in a?a.removeEventListener(il[p]||p,Ce,!1):a.detachEvent("on"+p,Ce),a[Zr][ie]=null}function $a(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function bu(a){return sl(a,"wheel",$a),this}function Al(a){return br(a,"mousedown touchstart dblclick contextmenu",$a),a._leaflet_disable_click=!0,this}function Sr(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function Hr(a){return Sr(a),$a(a),this}function Ua(a){if(a.composedPath)return a.composedPath();for(var p=[],S=a.target;S;)p.push(S),S=S.parentNode;return p}function Zu(a,p){if(!p)return new Y(a.clientX,a.clientY);var S=va(p),U=S.boundingClientRect;return new Y((a.clientX-U.left)/S.x-p.clientLeft,(a.clientY-U.top)/S.y-p.clientTop)}var kl=ct.linux&&ct.chrome?window.devicePixelRatio:ct.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Jl(a){return ct.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/kl:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function ol(a,p){var S=p.relatedTarget;if(!S)return!0;try{for(;S&&S!==a;)S=S.parentNode}catch{return!1}return S!==a}var Tl={__proto__:null,on:br,off:Tr,stopPropagation:$a,disableScrollPropagation:bu,disableClickPropagation:Al,preventDefault:Sr,stop:Hr,getPropagationPath:Ua,getMousePosition:Zu,getWheelDelta:Jl,isExternalTarget:ol,addListener:br,removeListener:Tr},Xl=X.extend({run:function(a,p,S,U){this.stop(),this._el=a,this._inProgress=!0,this._duration=S||.25,this._easeOutPower=1/Math.max(U||.5,.2),this._startPos=ao(a),this._offset=p.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=$(this._animate,this),this._step()},_step:function(a){var p=+new Date-this._startTime,S=this._duration*1e3;p<S?this._runFrame(this._easeOut(p/S),a):(this._runFrame(1),this._complete())},_runFrame:function(a,p){var S=this._startPos.add(this._offset.multiplyBy(a));p&&S._round(),Ci(this._el,S),this.fire("step")},_complete:function(){O(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),Kr=X.extend({options:{crs:Z,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,p){p=k(this,p),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=s(this._onResize,this),this._initEvents(),p.maxBounds&&this.setMaxBounds(p.maxBounds),p.zoom!==void 0&&(this._zoom=this._limitZoom(p.zoom)),p.center&&p.zoom!==void 0&&this.setView(ye(p.center),p.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ri&&ct.any3d&&!ct.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),br(this._proxy,Fn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,p,S){if(p=p===void 0?this._zoom:this._limitZoom(p),a=this._limitCenter(ye(a),p,this.options.maxBounds),S=S||{},this._stop(),this._loaded&&!S.reset&&S!==!0){S.animate!==void 0&&(S.zoom=i({animate:S.animate},S.zoom),S.pan=i({animate:S.animate,duration:S.duration},S.pan));var U=this._zoom!==p?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,p,S.zoom):this._tryAnimatedPan(a,S.pan);if(U)return clearTimeout(this._sizeTimer),this}return this._resetView(a,p,S.pan&&S.pan.noMoveStart),this},setZoom:function(a,p){return this._loaded?this.setView(this.getCenter(),a,{zoom:p}):(this._zoom=a,this)},zoomIn:function(a,p){return a=a||(ct.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,p)},zoomOut:function(a,p){return a=a||(ct.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,p)},setZoomAround:function(a,p,S){var U=this.getZoomScale(p),ie=this.getSize().divideBy(2),Ce=a instanceof Y?a:this.latLngToContainerPoint(a),ot=Ce.subtract(ie).multiplyBy(1-1/U),Pt=this.containerPointToLatLng(ie.add(ot));return this.setView(Pt,p,{zoom:S})},_getBoundsCenterZoom:function(a,p){p=p||{},a=a.getBounds?a.getBounds():fe(a);var S=Se(p.paddingTopLeft||p.padding||[0,0]),U=Se(p.paddingBottomRight||p.padding||[0,0]),ie=this.getBoundsZoom(a,!1,S.add(U));if(ie=typeof p.maxZoom=="number"?Math.min(p.maxZoom,ie):ie,ie===1/0)return{center:a.getCenter(),zoom:ie};var Ce=U.subtract(S).divideBy(2),ot=this.project(a.getSouthWest(),ie),Pt=this.project(a.getNorthEast(),ie),zt=this.unproject(ot.add(Pt).divideBy(2).add(Ce),ie);return{center:zt,zoom:ie}},fitBounds:function(a,p){if(a=fe(a),!a.isValid())throw new Error("Bounds are not valid.");var S=this._getBoundsCenterZoom(a,p);return this.setView(S.center,S.zoom,p)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,p){return this.setView(a,this._zoom,{pan:p})},panBy:function(a,p){if(a=Se(a).round(),p=p||{},!a.x&&!a.y)return this.fire("moveend");if(p.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Xl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),p.noMoveStart||this.fire("movestart"),p.animate!==!1){Vn(this._mapPane,"leaflet-pan-anim");var S=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,S,p.duration||.25,p.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,p,S){if(S=S||{},S.animate===!1||!ct.any3d)return this.setView(a,p,S);this._stop();var U=this.project(this.getCenter()),ie=this.project(a),Ce=this.getSize(),ot=this._zoom;a=ye(a),p=p===void 0?ot:p;var Pt=Math.max(Ce.x,Ce.y),zt=Pt*this.getZoomScale(ot,p),on=ie.distanceTo(U)||1,Dn=1.42,Yn=Dn*Dn;function Rr(pi){var Vs=pi?-1:1,Te=pi?zt:Pt,ho=zt*zt-Pt*Pt+Vs*Yn*Yn*on*on,Lu=2*Te*Yn*on,As=ho/Lu,Ur=Math.sqrt(As*As+1)-As,Wc=Ur<1e-9?-18:Math.log(Ur);return Wc}function fs(pi){return(Math.exp(pi)-Math.exp(-pi))/2}function Wi(pi){return(Math.exp(pi)+Math.exp(-pi))/2}function Ms(pi){return fs(pi)/Wi(pi)}var $i=Rr(0);function fo(pi){return Pt*(Wi($i)/Wi($i+Dn*pi))}function wc(pi){return Pt*(Wi($i)*Ms($i+Dn*pi)-fs($i))/Yn}function la(pi){return 1-Math.pow(1-pi,1.5)}var Wo=Date.now(),No=(Rr(1)-$i)/Dn,Af=S.duration?1e3*S.duration:1e3*No*.8;function tu(){var pi=(Date.now()-Wo)/Af,Vs=la(pi)*No;pi<=1?(this._flyToFrame=$(tu,this),this._move(this.unproject(U.add(ie.subtract(U).multiplyBy(wc(Vs)/on)),ot),this.getScaleZoom(Pt/fo(Vs),ot),{flyTo:!0})):this._move(a,p)._moveEnd(!0)}return this._moveStart(!0,S.noMoveStart),tu.call(this),this},flyToBounds:function(a,p){var S=this._getBoundsCenterZoom(a,p);return this.flyTo(S.center,S.zoom,p)},setMaxBounds:function(a){return a=fe(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var p=this.options.minZoom;return this.options.minZoom=a,this._loaded&&p!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var p=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&p!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,p){this._enforcingBounds=!0;var S=this.getCenter(),U=this._limitCenter(S,this._zoom,fe(a));return S.equals(U)||this.panTo(U,p),this._enforcingBounds=!1,this},panInside:function(a,p){p=p||{};var S=Se(p.paddingTopLeft||p.padding||[0,0]),U=Se(p.paddingBottomRight||p.padding||[0,0]),ie=this.project(this.getCenter()),Ce=this.project(a),ot=this.getPixelBounds(),Pt=T([ot.min.add(S),ot.max.subtract(U)]),zt=Pt.getSize();if(!Pt.contains(Ce)){this._enforcingBounds=!0;var on=Ce.subtract(Pt.getCenter()),Dn=Pt.extend(Ce).getSize().subtract(zt);ie.x+=on.x<0?-Dn.x:Dn.x,ie.y+=on.y<0?-Dn.y:Dn.y,this.panTo(this.unproject(ie),p),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=i({animate:!1,pan:!0},a===!0?{animate:!0}:a);var p=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var S=this.getSize(),U=p.divideBy(2).round(),ie=S.divideBy(2).round(),Ce=U.subtract(ie);return!Ce.x&&!Ce.y?this:(a.animate&&a.pan?this.panBy(Ce):(a.pan&&this._rawPanBy(Ce),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(s(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:p,newSize:S}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=i({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var p=s(this._handleGeolocationResponse,this),S=s(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(p,S,a):navigator.geolocation.getCurrentPosition(p,S,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var p=a.code,S=a.message||(p===1?"permission denied":p===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:p,message:"Geolocation error: "+S+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var p=a.coords.latitude,S=a.coords.longitude,U=new ce(p,S),ie=U.toBounds(a.coords.accuracy*2),Ce=this._locateOptions;if(Ce.setView){var ot=this.getBoundsZoom(ie);this.setView(U,Ce.maxZoom?Math.min(ot,Ce.maxZoom):ot)}var Pt={latlng:U,bounds:ie,timestamp:a.timestamp};for(var zt in a.coords)typeof a.coords[zt]=="number"&&(Pt[zt]=a.coords[zt]);this.fire("locationfound",Pt)}},addHandler:function(a,p){if(!p)return this;var S=this[a]=new p(this);return this._handlers.push(S),this.options[a]&&S.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Gn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(O(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)Gn(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,p){var S="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),U=fr("div",S,p||this._mapPane);return a&&(this._panes[a]=U),U},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),p=this.unproject(a.getBottomLeft()),S=this.unproject(a.getTopRight());return new ne(p,S)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,p,S){a=fe(a),S=Se(S||[0,0]);var U=this.getZoom()||0,ie=this.getMinZoom(),Ce=this.getMaxZoom(),ot=a.getNorthWest(),Pt=a.getSouthEast(),zt=this.getSize().subtract(S),on=T(this.project(Pt,U),this.project(ot,U)).getSize(),Dn=ct.any3d?this.options.zoomSnap:1,Yn=zt.x/on.x,Rr=zt.y/on.y,fs=p?Math.max(Yn,Rr):Math.min(Yn,Rr);return U=this.getScaleZoom(fs,U),Dn&&(U=Math.round(U/(Dn/100))*(Dn/100),U=p?Math.ceil(U/Dn)*Dn:Math.floor(U/Dn)*Dn),Math.max(ie,Math.min(Ce,U))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Y(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,p){var S=this._getTopLeftPoint(a,p);return new Re(S,S.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,p){var S=this.options.crs;return p=p===void 0?this._zoom:p,S.scale(a)/S.scale(p)},getScaleZoom:function(a,p){var S=this.options.crs;p=p===void 0?this._zoom:p;var U=S.zoom(a*S.scale(p));return isNaN(U)?1/0:U},project:function(a,p){return p=p===void 0?this._zoom:p,this.options.crs.latLngToPoint(ye(a),p)},unproject:function(a,p){return p=p===void 0?this._zoom:p,this.options.crs.pointToLatLng(Se(a),p)},layerPointToLatLng:function(a){var p=Se(a).add(this.getPixelOrigin());return this.unproject(p)},latLngToLayerPoint:function(a){var p=this.project(ye(a))._round();return p._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(ye(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(fe(a))},distance:function(a,p){return this.options.crs.distance(ye(a),ye(p))},containerPointToLayerPoint:function(a){return Se(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return Se(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var p=this.containerPointToLayerPoint(Se(a));return this.layerPointToLatLng(p)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ye(a)))},mouseEventToContainerPoint:function(a){return Zu(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var p=this._container=xs(a);if(p){if(p._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");br(p,"scroll",this._onScroll,this),this._containerId=f(p)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&ct.any3d,Vn(a,"leaflet-container"+(ct.touch?" leaflet-touch":"")+(ct.retina?" leaflet-retina":"")+(ct.ielt9?" leaflet-oldie":"")+(ct.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var p=li(a,"position");p!=="absolute"&&p!=="relative"&&p!=="fixed"&&p!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ci(this._mapPane,new Y(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Vn(a.markerPane,"leaflet-zoom-hide"),Vn(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,p,S){Ci(this._mapPane,new Y(0,0));var U=!this._loaded;this._loaded=!0,p=this._limitZoom(p),this.fire("viewprereset");var ie=this._zoom!==p;this._moveStart(ie,S)._move(a,p)._moveEnd(ie),this.fire("viewreset"),U&&this.fire("load")},_moveStart:function(a,p){return a&&this.fire("zoomstart"),p||this.fire("movestart"),this},_move:function(a,p,S,U){p===void 0&&(p=this._zoom);var ie=this._zoom!==p;return this._zoom=p,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),U?S&&S.pinch&&this.fire("zoom",S):((ie||S&&S.pinch)&&this.fire("zoom",S),this.fire("move",S)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return O(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){Ci(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[f(this._container)]=this;var p=a?Tr:br;p(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&p(window,"resize",this._onResize,this),ct.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){O(this._resizeRequest),this._resizeRequest=$(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,p){for(var S=[],U,ie=p==="mouseout"||p==="mouseover",Ce=a.target||a.srcElement,ot=!1;Ce;){if(U=this._targets[f(Ce)],U&&(p==="click"||p==="preclick")&&this._draggableMoved(U)){ot=!0;break}if(U&&U.listens(p,!0)&&(ie&&!ol(Ce,a)||(S.push(U),ie))||Ce===this._container)break;Ce=Ce.parentNode}return!S.length&&!ot&&!ie&&this.listens(p,!0)&&(S=[this]),S},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var p=a.target||a.srcElement;if(!(!this._loaded||p._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(p))){var S=a.type;S==="mousedown"&&ma(p),this._fireDOMEvent(a,S)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,p,S){if(a.type==="click"){var U=i({},a);U.type="preclick",this._fireDOMEvent(U,U.type,S)}var ie=this._findEventTargets(a,p);if(S){for(var Ce=[],ot=0;ot<S.length;ot++)S[ot].listens(p,!0)&&Ce.push(S[ot]);ie=Ce.concat(ie)}if(ie.length){p==="contextmenu"&&Sr(a);var Pt=ie[0],zt={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var on=Pt.getLatLng&&(!Pt._radius||Pt._radius<=10);zt.containerPoint=on?this.latLngToContainerPoint(Pt.getLatLng()):this.mouseEventToContainerPoint(a),zt.layerPoint=this.containerPointToLayerPoint(zt.containerPoint),zt.latlng=on?Pt.getLatLng():this.layerPointToLatLng(zt.layerPoint)}for(ot=0;ot<ie.length;ot++)if(ie[ot].fire(p,zt,!0),zt.originalEvent._stopped||ie[ot].options.bubblingMouseEvents===!1&&te(this._mouseEvents,p)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,p=this._handlers.length;a<p;a++)this._handlers[a].disable()},whenReady:function(a,p){return this._loaded?a.call(p||this,{target:this}):this.on("load",a,p),this},_getMapPanePos:function(){return ao(this._mapPane)||new Y(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,p){var S=a&&p!==void 0?this._getNewPixelOrigin(a,p):this.getPixelOrigin();return S.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,p){var S=this.getSize()._divideBy(2);return this.project(a,p)._subtract(S)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,p,S){var U=this._getNewPixelOrigin(S,p);return this.project(a,p)._subtract(U)},_latLngBoundsToNewLayerBounds:function(a,p,S){var U=this._getNewPixelOrigin(S,p);return T([this.project(a.getSouthWest(),p)._subtract(U),this.project(a.getNorthWest(),p)._subtract(U),this.project(a.getSouthEast(),p)._subtract(U),this.project(a.getNorthEast(),p)._subtract(U)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,p,S){if(!S)return a;var U=this.project(a,p),ie=this.getSize().divideBy(2),Ce=new Re(U.subtract(ie),U.add(ie)),ot=this._getBoundsOffset(Ce,S,p);return Math.abs(ot.x)<=1&&Math.abs(ot.y)<=1?a:this.unproject(U.add(ot),p)},_limitOffset:function(a,p){if(!p)return a;var S=this.getPixelBounds(),U=new Re(S.min.add(a),S.max.add(a));return a.add(this._getBoundsOffset(U,p))},_getBoundsOffset:function(a,p,S){var U=T(this.project(p.getNorthEast(),S),this.project(p.getSouthWest(),S)),ie=U.min.subtract(a.min),Ce=U.max.subtract(a.max),ot=this._rebound(ie.x,-Ce.x),Pt=this._rebound(ie.y,-Ce.y);return new Y(ot,Pt)},_rebound:function(a,p){return a+p>0?Math.round(a-p)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(p))},_limitZoom:function(a){var p=this.getMinZoom(),S=this.getMaxZoom(),U=ct.any3d?this.options.zoomSnap:1;return U&&(a=Math.round(a/U)*U),Math.max(p,Math.min(S,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){_r(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,p){var S=this._getCenterOffset(a)._trunc();return(p&&p.animate)!==!0&&!this.getSize().contains(S)?!1:(this.panBy(S,p),!0)},_createAnimProxy:function(){var a=this._proxy=fr("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(p){var S=wo,U=this._proxy.style[S];vs(this._proxy,this.project(p.center,p.zoom),this.getZoomScale(p.zoom,1)),U===this._proxy.style[S]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Gn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),p=this.getZoom();vs(this._proxy,this.project(a,p),this.getZoomScale(p,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,p,S){if(this._animatingZoom)return!0;if(S=S||{},!this._zoomAnimated||S.animate===!1||this._nothingToAnimate()||Math.abs(p-this._zoom)>this.options.zoomAnimationThreshold)return!1;var U=this.getZoomScale(p),ie=this._getCenterOffset(a)._divideBy(1-1/U);return S.animate!==!0&&!this.getSize().contains(ie)?!1:($(function(){this._moveStart(!0,S.noMoveStart||!1)._animateZoom(a,p,!0)},this),!0)},_animateZoom:function(a,p,S,U){this._mapPane&&(S&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=p,Vn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:p,noUpdate:U}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(s(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&_r(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Xi(a,p){return new Kr(a,p)}var ir=V.extend({options:{position:"topright"},initialize:function(a){k(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var p=this._map;return p&&p.removeControl(this),this.options.position=a,p&&p.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var p=this._container=this.onAdd(a),S=this.getPosition(),U=a._controlCorners[S];return Vn(p,"leaflet-control"),S.indexOf("bottom")!==-1?U.insertBefore(p,U.firstChild):U.appendChild(p),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Gn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),Qi=function(a){return new ir(a)};Kr.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},p="leaflet-",S=this._controlContainer=fr("div",p+"control-container",this._container);function U(ie,Ce){var ot=p+ie+" "+p+Ce;a[ie+Ce]=fr("div",ot,S)}U("top","left"),U("top","right"),U("bottom","left"),U("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)Gn(this._controlCorners[a]);Gn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var al=ir.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,p,S,U){return S<U?-1:U<S?1:0}},initialize:function(a,p,S){k(this,S),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var U in a)this._addLayer(a[U],U);for(U in p)this._addLayer(p[U],U,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var p=0;p<this._layers.length;p++)this._layers[p].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return ir.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,p){return this._addLayer(a,p),this._map?this._update():this},addOverlay:function(a,p){return this._addLayer(a,p,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var p=this._getLayer(f(a));return p&&this._layers.splice(this._layers.indexOf(p),1),this._map?this._update():this},expand:function(){Vn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(Vn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):_r(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return _r(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",p=this._container=fr("div",a),S=this.options.collapsed;p.setAttribute("aria-haspopup",!0),Al(p),bu(p);var U=this._section=fr("section",a+"-list");S&&(this._map.on("click",this.collapse,this),br(p,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var ie=this._layersLink=fr("a",a+"-toggle",p);ie.href="#",ie.title="Layers",ie.setAttribute("role","button"),br(ie,{keydown:function(Ce){Ce.keyCode===13&&this._expandSafely()},click:function(Ce){Sr(Ce),this._expandSafely()}},this),S||this.expand(),this._baseLayersList=fr("div",a+"-base",U),this._separator=fr("div",a+"-separator",U),this._overlaysList=fr("div",a+"-overlays",U),p.appendChild(U)},_getLayer:function(a){for(var p=0;p<this._layers.length;p++)if(this._layers[p]&&f(this._layers[p].layer)===a)return this._layers[p]},_addLayer:function(a,p,S){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:p,overlay:S}),this.options.sortLayers&&this._layers.sort(s(function(U,ie){return this.options.sortFunction(U.layer,ie.layer,U.name,ie.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;gs(this._baseLayersList),gs(this._overlaysList),this._layerControlInputs=[];var a,p,S,U,ie=0;for(S=0;S<this._layers.length;S++)U=this._layers[S],this._addItem(U),p=p||U.overlay,a=a||!U.overlay,ie+=U.overlay?0:1;return this.options.hideSingleBase&&(a=a&&ie>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=p&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var p=this._getLayer(f(a.target)),S=p.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;S&&this._map.fire(S,p)},_createRadioElement:function(a,p){var S='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(p?' checked="checked"':"")+"/>",U=document.createElement("div");return U.innerHTML=S,U.firstChild},_addItem:function(a){var p=document.createElement("label"),S=this._map.hasLayer(a.layer),U;a.overlay?(U=document.createElement("input"),U.type="checkbox",U.className="leaflet-control-layers-selector",U.defaultChecked=S):U=this._createRadioElement("leaflet-base-layers_"+f(this),S),this._layerControlInputs.push(U),U.layerId=f(a.layer),br(U,"click",this._onInputClick,this);var ie=document.createElement("span");ie.innerHTML=" "+a.name;var Ce=document.createElement("span");p.appendChild(Ce),Ce.appendChild(U),Ce.appendChild(ie);var ot=a.overlay?this._overlaysList:this._baseLayersList;return ot.appendChild(p),this._checkDisabledLayers(),p},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,p,S,U=[],ie=[];this._handlingClick=!0;for(var Ce=a.length-1;Ce>=0;Ce--)p=a[Ce],S=this._getLayer(p.layerId).layer,p.checked?U.push(S):p.checked||ie.push(S);for(Ce=0;Ce<ie.length;Ce++)this._map.hasLayer(ie[Ce])&&this._map.removeLayer(ie[Ce]);for(Ce=0;Ce<U.length;Ce++)this._map.hasLayer(U[Ce])||this._map.addLayer(U[Ce]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,p,S,U=this._map.getZoom(),ie=a.length-1;ie>=0;ie--)p=a[ie],S=this._getLayer(p.layerId).layer,p.disabled=S.options.minZoom!==void 0&&U<S.options.minZoom||S.options.maxZoom!==void 0&&U>S.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,br(a,"click",Sr),this.expand();var p=this;setTimeout(function(){Tr(a,"click",Sr),p._preventClick=!1})}}),ya=function(a,p,S){return new al(a,p,S)},Fi=ir.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var p="leaflet-control-zoom",S=fr("div",p+" leaflet-bar"),U=this.options;return this._zoomInButton=this._createButton(U.zoomInText,U.zoomInTitle,p+"-in",S,this._zoomIn),this._zoomOutButton=this._createButton(U.zoomOutText,U.zoomOutTitle,p+"-out",S,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),S},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,p,S,U,ie){var Ce=fr("a",S,U);return Ce.innerHTML=a,Ce.href="#",Ce.title=p,Ce.setAttribute("role","button"),Ce.setAttribute("aria-label",p),Al(Ce),br(Ce,"click",Hr),br(Ce,"click",ie,this),br(Ce,"click",this._refocusOnMap,this),Ce},_updateDisabled:function(){var a=this._map,p="leaflet-disabled";_r(this._zoomInButton,p),_r(this._zoomOutButton,p),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(Vn(this._zoomOutButton,p),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(Vn(this._zoomInButton,p),this._zoomInButton.setAttribute("aria-disabled","true"))}});Kr.mergeOptions({zoomControl:!0}),Kr.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Fi,this.addControl(this.zoomControl))});var Ql=function(a){return new Fi(a)},Qo=ir.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var p="leaflet-control-scale",S=fr("div",p),U=this.options;return this._addScales(U,p+"-line",S),a.on(U.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),S},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,p,S){a.metric&&(this._mScale=fr("div",p,S)),a.imperial&&(this._iScale=fr("div",p,S))},_update:function(){var a=this._map,p=a.getSize().y/2,S=a.distance(a.containerPointToLatLng([0,p]),a.containerPointToLatLng([this.options.maxWidth,p]));this._updateScales(S)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var p=this._getRoundNum(a),S=p<1e3?p+" m":p/1e3+" km";this._updateScale(this._mScale,S,p/a)},_updateImperial:function(a){var p=a*3.2808399,S,U,ie;p>5280?(S=p/5280,U=this._getRoundNum(S),this._updateScale(this._iScale,U+" mi",U/S)):(ie=this._getRoundNum(p),this._updateScale(this._iScale,ie+" ft",ie/p))},_updateScale:function(a,p,S){a.style.width=Math.round(this.options.maxWidth*S)+"px",a.innerHTML=p},_getRoundNum:function(a){var p=Math.pow(10,(Math.floor(a)+"").length-1),S=a/p;return S=S>=10?10:S>=5?5:S>=3?3:S>=2?2:1,p*S}}),Dl=function(a){return new Qo(a)},Bl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Do=ir.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ct.inlineSvg?Bl+" ":"")+"Leaflet</a>"},initialize:function(a){k(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=fr("div","leaflet-control-attribution"),Al(this._container);for(var p in a._layers)a._layers[p].getAttribution&&this.addAttribution(a._layers[p].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var p in this._attributions)this._attributions[p]&&a.push(p);var S=[];this.options.prefix&&S.push(this.options.prefix),a.length&&S.push(a.join(", ")),this._container.innerHTML=S.join(' <span aria-hidden="true">|</span> ')}}});Kr.mergeOptions({attributionControl:!0}),Kr.addInitHook(function(){this.options.attributionControl&&new Do().addTo(this)});var Nl=function(a){return new Do(a)};ir.Layers=al,ir.Zoom=Fi,ir.Scale=Qo,ir.Attribution=Do,Qi.layers=ya,Qi.zoom=Ql,Qi.scale=Dl,Qi.attribution=Nl;var vi=V.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});vi.addTo=function(a,p){return a.addHandler(p,this),this};var Ku={Events:q},Ls=ct.touch?"touchstart mousedown":"mousedown",Uo=X.extend({options:{clickTolerance:3},initialize:function(a,p,S,U){k(this,U),this._element=a,this._dragStartTarget=p||a,this._preventOutline=S},enable:function(){this._enabled||(br(this._dragStartTarget,Ls,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Uo._dragging===this&&this.finishDrag(!0),Tr(this._dragStartTarget,Ls,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!jo(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){Uo._dragging===this&&this.finishDrag();return}if(!(Uo._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(Uo._dragging=this,this._preventOutline&&ma(this._element),Ns(),Ks(),!this._moving)){this.fire("down");var p=a.touches?a.touches[0]:a,S=rl(this._element);this._startPoint=new Y(p.clientX,p.clientY),this._startPos=ao(this._element),this._parentScale=va(S);var U=a.type==="mousedown";br(document,U?"mousemove":"touchmove",this._onMove,this),br(document,U?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var p=a.touches&&a.touches.length===1?a.touches[0]:a,S=new Y(p.clientX,p.clientY)._subtract(this._startPoint);!S.x&&!S.y||Math.abs(S.x)+Math.abs(S.y)<this.options.clickTolerance||(S.x/=this._parentScale.x,S.y/=this._parentScale.y,Sr(a),this._moved||(this.fire("dragstart"),this._moved=!0,Vn(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Vn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(S),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),Ci(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){_r(document.body,"leaflet-dragging"),this._lastTarget&&(_r(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Tr(document,"mousemove touchmove",this._onMove,this),Tr(document,"mouseup touchend touchcancel",this._onUp,this),Yi(),Bs();var p=this._moved&&this._moving;this._moving=!1,Uo._dragging=!1,p&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function Ol(a,p,S){var U,ie=[1,4,2,8],Ce,ot,Pt,zt,on,Dn,Yn,Rr;for(Ce=0,Dn=a.length;Ce<Dn;Ce++)a[Ce]._code=jt(a[Ce],p);for(Pt=0;Pt<4;Pt++){for(Yn=ie[Pt],U=[],Ce=0,Dn=a.length,ot=Dn-1;Ce<Dn;ot=Ce++)zt=a[Ce],on=a[ot],zt._code&Yn?on._code&Yn||(Rr=xt(on,zt,Yn,p,S),Rr._code=jt(Rr,p),U.push(Rr)):(on._code&Yn&&(Rr=xt(on,zt,Yn,p,S),Rr._code=jt(Rr,p),U.push(Rr)),U.push(zt));a=U}return a}function Vo(a,p){var S,U,ie,Ce,ot,Pt,zt,on,Dn;if(!a||a.length===0)throw new Error("latlngs not passed");jn(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Yn=ye([0,0]),Rr=fe(a),fs=Rr.getNorthWest().distanceTo(Rr.getSouthWest())*Rr.getNorthEast().distanceTo(Rr.getNorthWest());fs<1700&&(Yn=ll(a));var Wi=a.length,Ms=[];for(S=0;S<Wi;S++){var $i=ye(a[S]);Ms.push(p.project(ye([$i.lat-Yn.lat,$i.lng-Yn.lng])))}for(Pt=zt=on=0,S=0,U=Wi-1;S<Wi;U=S++)ie=Ms[S],Ce=Ms[U],ot=ie.y*Ce.x-Ce.y*ie.x,zt+=(ie.x+Ce.x)*ot,on+=(ie.y+Ce.y)*ot,Pt+=ot*3;Pt===0?Dn=Ms[0]:Dn=[zt/Pt,on/Pt];var fo=p.unproject(Se(Dn));return ye([fo.lat+Yn.lat,fo.lng+Yn.lng])}function ll(a){for(var p=0,S=0,U=0,ie=0;ie<a.length;ie++){var Ce=ye(a[ie]);p+=Ce.lat,S+=Ce.lng,U++}return ye([p/U,S/U])}var ul={__proto__:null,clipPolygon:Ol,polygonCenter:Vo,centroid:ll};function yi(a,p){if(!p||!a.length)return a.slice();var S=p*p;return a=_e(a,S),a=es(a,S),a}function xo(a,p,S){return Math.sqrt(Tn(a,p,S,!0))}function _a(a,p,S){return Tn(a,p,S)}function es(a,p){var S=a.length,U=typeof Uint8Array<"u"?Uint8Array:Array,ie=new U(S);ie[0]=ie[S-1]=1,D(a,ie,p,0,S-1);var Ce,ot=[];for(Ce=0;Ce<S;Ce++)ie[Ce]&&ot.push(a[Ce]);return ot}function D(a,p,S,U,ie){var Ce=0,ot,Pt,zt;for(Pt=U+1;Pt<=ie-1;Pt++)zt=Tn(a[Pt],a[U],a[ie],!0),zt>Ce&&(ot=Pt,Ce=zt);Ce>S&&(p[ot]=1,D(a,p,S,U,ot),D(a,p,S,ot,ie))}function _e(a,p){for(var S=[a[0]],U=1,ie=0,Ce=a.length;U<Ce;U++)cn(a[U],a[ie])>p&&(S.push(a[U]),ie=U);return ie<Ce-1&&S.push(a[Ce-1]),S}var Ze;function ut(a,p,S,U,ie){var Ce=U?Ze:jt(a,S),ot=jt(p,S),Pt,zt,on;for(Ze=ot;;){if(!(Ce|ot))return[a,p];if(Ce&ot)return!1;Pt=Ce||ot,zt=xt(a,p,Pt,S,ie),on=jt(zt,S),Pt===Ce?(a=zt,Ce=on):(p=zt,ot=on)}}function xt(a,p,S,U,ie){var Ce=p.x-a.x,ot=p.y-a.y,Pt=U.min,zt=U.max,on,Dn;return S&8?(on=a.x+Ce*(zt.y-a.y)/ot,Dn=zt.y):S&4?(on=a.x+Ce*(Pt.y-a.y)/ot,Dn=Pt.y):S&2?(on=zt.x,Dn=a.y+ot*(zt.x-a.x)/Ce):S&1&&(on=Pt.x,Dn=a.y+ot*(Pt.x-a.x)/Ce),new Y(on,Dn,ie)}function jt(a,p){var S=0;return a.x<p.min.x?S|=1:a.x>p.max.x&&(S|=2),a.y<p.min.y?S|=4:a.y>p.max.y&&(S|=8),S}function cn(a,p){var S=p.x-a.x,U=p.y-a.y;return S*S+U*U}function Tn(a,p,S,U){var ie=p.x,Ce=p.y,ot=S.x-ie,Pt=S.y-Ce,zt=ot*ot+Pt*Pt,on;return zt>0&&(on=((a.x-ie)*ot+(a.y-Ce)*Pt)/zt,on>1?(ie=S.x,Ce=S.y):on>0&&(ie+=ot*on,Ce+=Pt*on)),ot=a.x-ie,Pt=a.y-Ce,U?ot*ot+Pt*Pt:new Y(ie,Ce)}function jn(a){return!J(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function tr(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),jn(a)}function vr(a,p){var S,U,ie,Ce,ot,Pt,zt,on;if(!a||a.length===0)throw new Error("latlngs not passed");jn(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Dn=ye([0,0]),Yn=fe(a),Rr=Yn.getNorthWest().distanceTo(Yn.getSouthWest())*Yn.getNorthEast().distanceTo(Yn.getNorthWest());Rr<1700&&(Dn=ll(a));var fs=a.length,Wi=[];for(S=0;S<fs;S++){var Ms=ye(a[S]);Wi.push(p.project(ye([Ms.lat-Dn.lat,Ms.lng-Dn.lng])))}for(S=0,U=0;S<fs-1;S++)U+=Wi[S].distanceTo(Wi[S+1])/2;if(U===0)on=Wi[0];else for(S=0,Ce=0;S<fs-1;S++)if(ot=Wi[S],Pt=Wi[S+1],ie=ot.distanceTo(Pt),Ce+=ie,Ce>U){zt=(Ce-U)/ie,on=[Pt.x-zt*(Pt.x-ot.x),Pt.y-zt*(Pt.y-ot.y)];break}var $i=p.unproject(Se(on));return ye([$i.lat+Dn.lat,$i.lng+Dn.lng])}var zr={__proto__:null,simplify:yi,pointToSegmentDistance:xo,closestPointOnSegment:_a,clipSegment:ut,_getEdgeIntersection:xt,_getBitCode:jt,_sqClosestPointOnSegment:Tn,isFlat:jn,_flat:tr,polylineCenter:vr},Ri={project:function(a){return new Y(a.lng,a.lat)},unproject:function(a){return new ce(a.y,a.x)},bounds:new Re([-180,-90],[180,90])},hi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Re([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var p=Math.PI/180,S=this.R,U=a.lat*p,ie=this.R_MINOR/S,Ce=Math.sqrt(1-ie*ie),ot=Ce*Math.sin(U),Pt=Math.tan(Math.PI/4-U/2)/Math.pow((1-ot)/(1+ot),Ce/2);return U=-S*Math.log(Math.max(Pt,1e-10)),new Y(a.lng*p*S,U)},unproject:function(a){for(var p=180/Math.PI,S=this.R,U=this.R_MINOR/S,ie=Math.sqrt(1-U*U),Ce=Math.exp(-a.y/S),ot=Math.PI/2-2*Math.atan(Ce),Pt=0,zt=.1,on;Pt<15&&Math.abs(zt)>1e-7;Pt++)on=ie*Math.sin(ot),on=Math.pow((1-on)/(1+on),ie/2),zt=Math.PI/2-2*Math.atan(Ce*on)-ot,ot+=zt;return new ce(ot*p,a.x*p/S)}},_i={__proto__:null,LonLat:Ri,Mercator:hi,SphericalMercator:De},ts=i({},B,{code:"EPSG:3395",projection:hi,transformation:function(){var a=.5/(Math.PI*hi.R);return We(a,.5,-a,.5)}()}),ls=i({},B,{code:"EPSG:4326",projection:Ri,transformation:We(1/180,1,-1/180,.5)}),Lo=i({},oe,{projection:Ri,transformation:We(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,p){var S=p.lng-a.lng,U=p.lat-a.lat;return Math.sqrt(S*S+U*U)},infinite:!0});oe.Earth=B,oe.EPSG3395=ts,oe.EPSG3857=Z,oe.EPSG900913=de,oe.EPSG4326=ls,oe.Simple=Lo;var $r=X.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[f(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[f(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var p=a.target;if(p.hasLayer(this)){if(this._map=p,this._zoomAnimated=p._zoomAnimated,this.getEvents){var S=this.getEvents();p.on(S,this),this.once("remove",function(){p.off(S,this)},this)}this.onAdd(p),this.fire("add"),p.fire("layeradd",{layer:this})}}});Kr.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var p=f(a);return this._layers[p]?this:(this._layers[p]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var p=f(a);return this._layers[p]?(this._loaded&&a.onRemove(this),delete this._layers[p],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return f(a)in this._layers},eachLayer:function(a,p){for(var S in this._layers)a.call(p,this._layers[S]);return this},_addLayers:function(a){a=a?J(a)?a:[a]:[];for(var p=0,S=a.length;p<S;p++)this.addLayer(a[p])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[f(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var p=f(a);this._zoomBoundLayers[p]&&(delete this._zoomBoundLayers[p],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,p=-1/0,S=this._getZoomSpan();for(var U in this._zoomBoundLayers){var ie=this._zoomBoundLayers[U].options;a=ie.minZoom===void 0?a:Math.min(a,ie.minZoom),p=ie.maxZoom===void 0?p:Math.max(p,ie.maxZoom)}this._layersMaxZoom=p===-1/0?void 0:p,this._layersMinZoom=a===1/0?void 0:a,S!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Is=$r.extend({initialize:function(a,p){k(this,p),this._layers={};var S,U;if(a)for(S=0,U=a.length;S<U;S++)this.addLayer(a[S])},addLayer:function(a){var p=this.getLayerId(a);return this._layers[p]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var p=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[p]&&this._map.removeLayer(this._layers[p]),delete this._layers[p],this},hasLayer:function(a){var p=typeof a=="number"?a:this.getLayerId(a);return p in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var p=Array.prototype.slice.call(arguments,1),S,U;for(S in this._layers)U=this._layers[S],U[a]&&U[a].apply(U,p);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,p){for(var S in this._layers)a.call(p,this._layers[S]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return f(a)}}),cl=function(a,p){return new Is(a,p)},Ys=Is.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),Is.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),Is.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new ne;for(var p in this._layers){var S=this._layers[p];a.extend(S.getBounds?S.getBounds():S.getLatLng())}return a}}),eu=function(a,p){return new Ys(a,p)},ea=V.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){k(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,p){var S=this._getIconUrl(a);if(!S){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var U=this._createImg(S,p&&p.tagName==="IMG"?p:null);return this._setIconStyles(U,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(U.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),U},_setIconStyles:function(a,p){var S=this.options,U=S[p+"Size"];typeof U=="number"&&(U=[U,U]);var ie=Se(U),Ce=Se(p==="shadow"&&S.shadowAnchor||S.iconAnchor||ie&&ie.divideBy(2,!0));a.className="leaflet-marker-"+p+" "+(S.className||""),Ce&&(a.style.marginLeft=-Ce.x+"px",a.style.marginTop=-Ce.y+"px"),ie&&(a.style.width=ie.x+"px",a.style.height=ie.y+"px")},_createImg:function(a,p){return p=p||document.createElement("img"),p.src=a,p},_getIconUrl:function(a){return ct.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function wu(a){return new ea(a)}var Va=ea.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof Va.imagePath!="string"&&(Va.imagePath=this._detectIconPath()),(this.options.imagePath||Va.imagePath)+ea.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var p=function(S,U,ie){var Ce=U.exec(S);return Ce&&Ce[ie]};return a=p(a,/^url\((['"])?(.+)\1\)$/,2),a&&p(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=fr("div","leaflet-default-icon-path",document.body),p=li(a,"background-image")||li(a,"backgroundImage");if(document.body.removeChild(a),p=this._stripUrl(p),p)return p;var S=document.querySelector('link[href$="leaflet.css"]');return S?S.href.substring(0,S.href.length-11-1):""}}),Ha=vi.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new Uo(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Vn(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&_r(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var p=this._marker,S=p._map,U=this._marker.options.autoPanSpeed,ie=this._marker.options.autoPanPadding,Ce=ao(p._icon),ot=S.getPixelBounds(),Pt=S.getPixelOrigin(),zt=T(ot.min._subtract(Pt).add(ie),ot.max._subtract(Pt).subtract(ie));if(!zt.contains(Ce)){var on=Se((Math.max(zt.max.x,Ce.x)-zt.max.x)/(ot.max.x-zt.max.x)-(Math.min(zt.min.x,Ce.x)-zt.min.x)/(ot.min.x-zt.min.x),(Math.max(zt.max.y,Ce.y)-zt.max.y)/(ot.max.y-zt.max.y)-(Math.min(zt.min.y,Ce.y)-zt.min.y)/(ot.min.y-zt.min.y)).multiplyBy(U);S.panBy(on,{animate:!1}),this._draggable._newPos._add(on),this._draggable._startPos._add(on),Ci(p._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=$(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(O(this._panRequest),this._panRequest=$(this._adjustPan.bind(this,a)))},_onDrag:function(a){var p=this._marker,S=p._shadow,U=ao(p._icon),ie=p._map.layerPointToLatLng(U);S&&Ci(S,U),p._latlng=ie,a.latlng=ie,a.oldLatLng=this._oldLatLng,p.fire("move",a).fire("drag",a)},_onDragEnd:function(a){O(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),us=$r.extend({options:{icon:new Va,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,p){k(this,p),this._latlng=ye(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var p=this._latlng;return this._latlng=ye(a),this.update(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,p="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),S=a.icon.createIcon(this._icon),U=!1;S!==this._icon&&(this._icon&&this._removeIcon(),U=!0,a.title&&(S.title=a.title),S.tagName==="IMG"&&(S.alt=a.alt||"")),Vn(S,p),a.keyboard&&(S.tabIndex="0",S.setAttribute("role","button")),this._icon=S,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&br(S,"focus",this._panOnFocus,this);var ie=a.icon.createShadow(this._shadow),Ce=!1;ie!==this._shadow&&(this._removeShadow(),Ce=!0),ie&&(Vn(ie,p),ie.alt=""),this._shadow=ie,a.opacity<1&&this._updateOpacity(),U&&this.getPane().appendChild(this._icon),this._initInteraction(),ie&&Ce&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Tr(this._icon,"focus",this._panOnFocus,this),Gn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Gn(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&Ci(this._icon,a),this._shadow&&Ci(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var p=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(p)},_initInteraction:function(){if(this.options.interactive&&(Vn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ha)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ha(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&nn(this._icon,a),this._shadow&&nn(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var p=this.options.icon.options,S=p.iconSize?Se(p.iconSize):Se(0,0),U=p.iconAnchor?Se(p.iconAnchor):Se(0,0);a.panInside(this._latlng,{paddingTopLeft:U,paddingBottomRight:S.subtract(U)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ta(a,p){return new us(a,p)}var So=$r.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return k(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),lo=So.extend({options:{fill:!0,radius:10},initialize:function(a,p){k(this,p),this._latlng=ye(a),this._radius=this.options.radius},setLatLng:function(a){var p=this._latlng;return this._latlng=ye(a),this.redraw(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var p=a&&a.radius||this._radius;return So.prototype.setStyle.call(this,a),this.setRadius(p),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,p=this._radiusY||a,S=this._clickTolerance(),U=[a+S,p+S];this._pxBounds=new Re(this._point.subtract(U),this._point.add(U))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function fl(a,p){return new lo(a,p)}var Rs=lo.extend({initialize:function(a,p,S){if(typeof p=="number"&&(p=i({},S,{radius:p})),k(this,p),this._latlng=ye(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new ne(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:So.prototype.setStyle,_project:function(){var a=this._latlng.lng,p=this._latlng.lat,S=this._map,U=S.options.crs;if(U.distance===B.distance){var ie=Math.PI/180,Ce=this._mRadius/B.R/ie,ot=S.project([p+Ce,a]),Pt=S.project([p-Ce,a]),zt=ot.add(Pt).divideBy(2),on=S.unproject(zt).lat,Dn=Math.acos((Math.cos(Ce*ie)-Math.sin(p*ie)*Math.sin(on*ie))/(Math.cos(p*ie)*Math.cos(on*ie)))/ie;(isNaN(Dn)||Dn===0)&&(Dn=Ce/Math.cos(Math.PI/180*p)),this._point=zt.subtract(S.getPixelOrigin()),this._radius=isNaN(Dn)?0:zt.x-S.project([on,a-Dn]).x,this._radiusY=zt.y-ot.y}else{var Yn=U.unproject(U.project(this._latlng).subtract([this._mRadius,0]));this._point=S.latLngToLayerPoint(this._latlng),this._radius=this._point.x-S.latLngToLayerPoint(Yn).x}this._updateBounds()}});function Js(a,p,S){return new Rs(a,p,S)}var Xs=So.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,p){k(this,p),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var p=1/0,S=null,U=Tn,ie,Ce,ot=0,Pt=this._parts.length;ot<Pt;ot++)for(var zt=this._parts[ot],on=1,Dn=zt.length;on<Dn;on++){ie=zt[on-1],Ce=zt[on];var Yn=U(a,ie,Ce,!0);Yn<p&&(p=Yn,S=U(a,ie,Ce))}return S&&(S.distance=Math.sqrt(p)),S},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return vr(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,p){return p=p||this._defaultShape(),a=ye(a),p.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new ne,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return jn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var p=[],S=jn(a),U=0,ie=a.length;U<ie;U++)S?(p[U]=ye(a[U]),this._bounds.extend(p[U])):p[U]=this._convertLatLngs(a[U]);return p},_project:function(){var a=new Re;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),p=new Y(a,a);this._rawPxBounds&&(this._pxBounds=new Re([this._rawPxBounds.min.subtract(p),this._rawPxBounds.max.add(p)]))},_projectLatlngs:function(a,p,S){var U=a[0]instanceof ce,ie=a.length,Ce,ot;if(U){for(ot=[],Ce=0;Ce<ie;Ce++)ot[Ce]=this._map.latLngToLayerPoint(a[Ce]),S.extend(ot[Ce]);p.push(ot)}else for(Ce=0;Ce<ie;Ce++)this._projectLatlngs(a[Ce],p,S)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var p=this._parts,S,U,ie,Ce,ot,Pt,zt;for(S=0,ie=0,Ce=this._rings.length;S<Ce;S++)for(zt=this._rings[S],U=0,ot=zt.length;U<ot-1;U++)Pt=ut(zt[U],zt[U+1],a,U,!0),Pt&&(p[ie]=p[ie]||[],p[ie].push(Pt[0]),(Pt[1]!==zt[U+1]||U===ot-2)&&(p[ie].push(Pt[1]),ie++))}},_simplifyPoints:function(){for(var a=this._parts,p=this.options.smoothFactor,S=0,U=a.length;S<U;S++)a[S]=yi(a[S],p)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,p){var S,U,ie,Ce,ot,Pt,zt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(S=0,Ce=this._parts.length;S<Ce;S++)for(Pt=this._parts[S],U=0,ot=Pt.length,ie=ot-1;U<ot;ie=U++)if(!(!p&&U===0)&&xo(a,Pt[ie],Pt[U])<=zt)return!0;return!1}});function Yu(a,p){return new Xs(a,p)}Xs._flat=tr;var _s=Xs.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Vo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var p=Xs.prototype._convertLatLngs.call(this,a),S=p.length;return S>=2&&p[0]instanceof ce&&p[0].equals(p[S-1])&&p.pop(),p},_setLatLngs:function(a){Xs.prototype._setLatLngs.call(this,a),jn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return jn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,p=this.options.weight,S=new Y(p,p);if(a=new Re(a.min.subtract(S),a.max.add(S)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var U=0,ie=this._rings.length,Ce;U<ie;U++)Ce=Ol(this._rings[U],a,!0),Ce.length&&this._parts.push(Ce)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var p=!1,S,U,ie,Ce,ot,Pt,zt,on;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(Ce=0,zt=this._parts.length;Ce<zt;Ce++)for(S=this._parts[Ce],ot=0,on=S.length,Pt=on-1;ot<on;Pt=ot++)U=S[ot],ie=S[Pt],U.y>a.y!=ie.y>a.y&&a.x<(ie.x-U.x)*(a.y-U.y)/(ie.y-U.y)+U.x&&(p=!p);return p||Xs.prototype._containsPoint.call(this,a,!0)}});function ba(a,p){return new _s(a,p)}var Fs=Ys.extend({initialize:function(a,p){k(this,p),this._layers={},a&&this.addData(a)},addData:function(a){var p=J(a)?a:a.features,S,U,ie;if(p){for(S=0,U=p.length;S<U;S++)ie=p[S],(ie.geometries||ie.geometry||ie.features||ie.coordinates)&&this.addData(ie);return this}var Ce=this.options;if(Ce.filter&&!Ce.filter(a))return this;var ot=js(a,Ce);return ot?(ot.feature=$s(a),ot.defaultOptions=ot.options,this.resetStyle(ot),Ce.onEachFeature&&Ce.onEachFeature(a,ot),this.addLayer(ot)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=i({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(p){this._setLayerStyle(p,a)},this)},_setLayerStyle:function(a,p){a.setStyle&&(typeof p=="function"&&(p=p(a.feature)),a.setStyle(p))}});function js(a,p){var S=a.type==="Feature"?a.geometry:a,U=S?S.coordinates:null,ie=[],Ce=p&&p.pointToLayer,ot=p&&p.coordsToLatLng||xa,Pt,zt,on,Dn;if(!U&&!S)return null;switch(S.type){case"Point":return Pt=ot(U),wa(Ce,a,Pt,p);case"MultiPoint":for(on=0,Dn=U.length;on<Dn;on++)Pt=ot(U[on]),ie.push(wa(Ce,a,Pt,p));return new Ys(ie);case"LineString":case"MultiLineString":return zt=zs(U,S.type==="LineString"?0:1,ot),new Xs(zt,p);case"Polygon":case"MultiPolygon":return zt=zs(U,S.type==="Polygon"?1:2,ot),new _s(zt,p);case"GeometryCollection":for(on=0,Dn=S.geometries.length;on<Dn;on++){var Yn=js({geometry:S.geometries[on],type:"Feature",properties:a.properties},p);Yn&&ie.push(Yn)}return new Ys(ie);case"FeatureCollection":for(on=0,Dn=S.features.length;on<Dn;on++){var Rr=js(S.features[on],p);Rr&&ie.push(Rr)}return new Ys(ie);default:throw new Error("Invalid GeoJSON object.")}}function wa(a,p,S,U){return a?a(p,S):new us(S,U&&U.markersInheritOptions&&U)}function xa(a){return new ce(a[1],a[0],a[2])}function zs(a,p,S){for(var U=[],ie=0,Ce=a.length,ot;ie<Ce;ie++)ot=p?zs(a[ie],p-1,S):(S||xa)(a[ie]),U.push(ot);return U}function Ss(a,p){return a=ye(a),a.alt!==void 0?[w(a.lng,p),w(a.lat,p),w(a.alt,p)]:[w(a.lng,p),w(a.lat,p)]}function na(a,p,S,U){for(var ie=[],Ce=0,ot=a.length;Ce<ot;Ce++)ie.push(p?na(a[Ce],jn(a[Ce])?0:p-1,S,U):Ss(a[Ce],U));return!p&&S&&ie.length>0&&ie.push(ie[0].slice()),ie}function Co(a,p){return a.feature?i({},a.feature,{geometry:p}):$s(p)}function $s(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var _t={toGeoJSON:function(a){return Co(this,{type:"Point",coordinates:Ss(this.getLatLng(),a)})}};us.include(_t),Rs.include(_t),lo.include(_t),Xs.include({toGeoJSON:function(a){var p=!jn(this._latlngs),S=na(this._latlngs,p?1:0,!1,a);return Co(this,{type:(p?"Multi":"")+"LineString",coordinates:S})}}),_s.include({toGeoJSON:function(a){var p=!jn(this._latlngs),S=p&&!jn(this._latlngs[0]),U=na(this._latlngs,S?2:p?1:0,!0,a);return p||(U=[U]),Co(this,{type:(S?"Multi":"")+"Polygon",coordinates:U})}}),Is.include({toMultiPoint:function(a){var p=[];return this.eachLayer(function(S){p.push(S.toGeoJSON(a).geometry.coordinates)}),Co(this,{type:"MultiPoint",coordinates:p})},toGeoJSON:function(a){var p=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(p==="MultiPoint")return this.toMultiPoint(a);var S=p==="GeometryCollection",U=[];return this.eachLayer(function(ie){if(ie.toGeoJSON){var Ce=ie.toGeoJSON(a);if(S)U.push(Ce.geometry);else{var ot=$s(Ce);ot.type==="FeatureCollection"?U.push.apply(U,ot.features):U.push(ot)}}}),S?Co(this,{geometries:U,type:"GeometryCollection"}):{type:"FeatureCollection",features:U}}});function qt(a,p){return new Fs(a,p)}var Mt=qt,Pn=$r.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,p,S){this._url=a,this._bounds=fe(p),k(this,S)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Vn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Gn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&ms(this._image),this},bringToBack:function(){return this._map&&Lr(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=fe(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",p=this._image=a?this._url:fr("img");if(Vn(p,"leaflet-image-layer"),this._zoomAnimated&&Vn(p,"leaflet-zoom-animated"),this.options.className&&Vn(p,this.options.className),p.onselectstart=y,p.onmousemove=y,p.onload=s(this.fire,this,"load"),p.onerror=s(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=p.src;return}p.src=this._url,p.alt=this.options.alt},_animateZoom:function(a){var p=this._map.getZoomScale(a.zoom),S=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;vs(this._image,S,p)},_reset:function(){var a=this._image,p=new Re(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),S=p.getSize();Ci(a,p.min),a.style.width=S.x+"px",a.style.height=S.y+"px"},_updateOpacity:function(){nn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),Zn=function(a,p,S){return new Pn(a,p,S)},wr=Pn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",p=this._image=a?this._url:fr("video");if(Vn(p,"leaflet-image-layer"),this._zoomAnimated&&Vn(p,"leaflet-zoom-animated"),this.options.className&&Vn(p,this.options.className),p.onselectstart=y,p.onmousemove=y,p.onloadeddata=s(this.fire,this,"load"),a){for(var S=p.getElementsByTagName("source"),U=[],ie=0;ie<S.length;ie++)U.push(S[ie].src);this._url=S.length>0?U:[p.src];return}J(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(p.style,"objectFit")&&(p.style.objectFit="fill"),p.autoplay=!!this.options.autoplay,p.loop=!!this.options.loop,p.muted=!!this.options.muted,p.playsInline=!!this.options.playsInline;for(var Ce=0;Ce<this._url.length;Ce++){var ot=fr("source");ot.src=this._url[Ce],p.appendChild(ot)}}});function ji(a,p,S){return new wr(a,p,S)}var bi=Pn.extend({_initImage:function(){var a=this._image=this._url;Vn(a,"leaflet-image-layer"),this._zoomAnimated&&Vn(a,"leaflet-zoom-animated"),this.options.className&&Vn(a,this.options.className),a.onselectstart=y,a.onmousemove=y}});function Il(a,p,S){return new bi(a,p,S)}var Qs=$r.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,p){a&&(a instanceof ce||J(a))?(this._latlng=ye(a),k(this,p)):(k(this,a),this._source=p),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&nn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&nn(this._container,1),this.bringToFront(),this.options.interactive&&(Vn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(nn(this._container,0),this._removeTimeout=setTimeout(s(Gn,void 0,this._container),200)):Gn(this._container),this.options.interactive&&(_r(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=ye(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ms(this._container),this},bringToBack:function(){return this._map&&Lr(this._container),this},_prepareOpen:function(a){var p=this._source;if(!p._map)return!1;if(p instanceof Ys){p=null;var S=this._source._layers;for(var U in S)if(S[U]._map){p=S[U];break}if(!p)return!1;this._source=p}if(!a)if(p.getCenter)a=p.getCenter();else if(p.getLatLng)a=p.getLatLng();else if(p.getBounds)a=p.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,p=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof p=="string")a.innerHTML=p;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(p)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),p=Se(this.options.offset),S=this._getAnchor();this._zoomAnimated?Ci(this._container,a.add(S)):p=p.add(a).add(S);var U=this._containerBottom=-p.y,ie=this._containerLeft=-Math.round(this._containerWidth/2)+p.x;this._container.style.bottom=U+"px",this._container.style.left=ie+"px"}},_getAnchor:function(){return[0,0]}});Kr.include({_initOverlay:function(a,p,S,U){var ie=p;return ie instanceof a||(ie=new a(U).setContent(p)),S&&ie.setLatLng(S),ie}}),$r.include({_initOverlay:function(a,p,S,U){var ie=S;return ie instanceof a?(k(ie,U),ie._source=this):(ie=p&&!U?p:new a(U,this),ie.setContent(S)),ie}});var zi=Qs.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,Qs.prototype.openOn.call(this,a)},onAdd:function(a){Qs.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof So||this._source.on("preclick",$a))},onRemove:function(a){Qs.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof So||this._source.off("preclick",$a))},getEvents:function(){var a=Qs.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",p=this._container=fr("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),S=this._wrapper=fr("div",a+"-content-wrapper",p);if(this._contentNode=fr("div",a+"-content",S),Al(p),bu(this._contentNode),br(p,"contextmenu",$a),this._tipContainer=fr("div",a+"-tip-container",p),this._tip=fr("div",a+"-tip",this._tipContainer),this.options.closeButton){var U=this._closeButton=fr("a",a+"-close-button",p);U.setAttribute("role","button"),U.setAttribute("aria-label","Close popup"),U.href="#close",U.innerHTML='<span aria-hidden="true">&#215;</span>',br(U,"click",function(ie){Sr(ie),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,p=a.style;p.width="",p.whiteSpace="nowrap";var S=a.offsetWidth;S=Math.min(S,this.options.maxWidth),S=Math.max(S,this.options.minWidth),p.width=S+1+"px",p.whiteSpace="",p.height="";var U=a.offsetHeight,ie=this.options.maxHeight,Ce="leaflet-popup-scrolled";ie&&U>ie?(p.height=ie+"px",Vn(a,Ce)):_r(a,Ce),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var p=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),S=this._getAnchor();Ci(this._container,p.add(S))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,p=parseInt(li(this._container,"marginBottom"),10)||0,S=this._container.offsetHeight+p,U=this._containerWidth,ie=new Y(this._containerLeft,-S-this._containerBottom);ie._add(ao(this._container));var Ce=a.layerPointToContainerPoint(ie),ot=Se(this.options.autoPanPadding),Pt=Se(this.options.autoPanPaddingTopLeft||ot),zt=Se(this.options.autoPanPaddingBottomRight||ot),on=a.getSize(),Dn=0,Yn=0;Ce.x+U+zt.x>on.x&&(Dn=Ce.x+U-on.x+zt.x),Ce.x-Dn-Pt.x<0&&(Dn=Ce.x-Pt.x),Ce.y+S+zt.y>on.y&&(Yn=Ce.y+S-on.y+zt.y),Ce.y-Yn-Pt.y<0&&(Yn=Ce.y-Pt.y),(Dn||Yn)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([Dn,Yn]))}},_getAnchor:function(){return Se(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ra=function(a,p){return new zi(a,p)};Kr.mergeOptions({closePopupOnClick:!0}),Kr.include({openPopup:function(a,p,S){return this._initOverlay(zi,a,p,S).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),$r.include({bindPopup:function(a,p){return this._popup=this._initOverlay(zi,this._popup,a,p),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof Ys||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){Hr(a);var p=a.layer||a.target;if(this._popup._source===p&&!(p instanceof So)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=p,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var La=Qs.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){Qs.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){Qs.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=Qs.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",p=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=fr("div",p),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var p,S,U=this._map,ie=this._container,Ce=U.latLngToContainerPoint(U.getCenter()),ot=U.layerPointToContainerPoint(a),Pt=this.options.direction,zt=ie.offsetWidth,on=ie.offsetHeight,Dn=Se(this.options.offset),Yn=this._getAnchor();Pt==="top"?(p=zt/2,S=on):Pt==="bottom"?(p=zt/2,S=0):Pt==="center"?(p=zt/2,S=on/2):Pt==="right"?(p=0,S=on/2):Pt==="left"?(p=zt,S=on/2):ot.x<Ce.x?(Pt="right",p=0,S=on/2):(Pt="left",p=zt+(Dn.x+Yn.x)*2,S=on/2),a=a.subtract(Se(p,S,!0)).add(Dn).add(Yn),_r(ie,"leaflet-tooltip-right"),_r(ie,"leaflet-tooltip-left"),_r(ie,"leaflet-tooltip-top"),_r(ie,"leaflet-tooltip-bottom"),Vn(ie,"leaflet-tooltip-"+Pt),Ci(ie,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&nn(this._container,a)},_animateZoom:function(a){var p=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(p)},_getAnchor:function(){return Se(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ia=function(a,p){return new La(a,p)};Kr.include({openTooltip:function(a,p,S){return this._initOverlay(La,a,p,S).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),$r.include({bindTooltip:function(a,p){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(La,this._tooltip,a,p),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var p=a?"off":"on",S={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?S.add=this._openTooltip:(S.mouseover=this._openTooltip,S.mouseout=this.closeTooltip,S.click=this._openTooltip,this._map?this._addFocusListeners():S.add=this._addFocusListeners),this._tooltip.options.sticky&&(S.mousemove=this._moveTooltip),this[p](S),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof Ys||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var p=typeof a.getElement=="function"&&a.getElement();p&&(br(p,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),br(p,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var p=typeof a.getElement=="function"&&a.getElement();p&&p.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var p=this;this._map.once("moveend",function(){p._openOnceFlag=!1,p._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var p=a.latlng,S,U;this._tooltip.options.sticky&&a.originalEvent&&(S=this._map.mouseEventToContainerPoint(a.originalEvent),U=this._map.containerPointToLayerPoint(S),p=this._map.layerPointToLatLng(U)),this._tooltip.setLatLng(p)}});var sa=ea.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var p=a&&a.tagName==="DIV"?a:document.createElement("div"),S=this.options;if(S.html instanceof Element?(gs(p),p.appendChild(S.html)):p.innerHTML=S.html!==!1?S.html:"",S.bgPos){var U=Se(S.bgPos);p.style.backgroundPosition=-U.x+"px "+-U.y+"px"}return this._setIconStyles(p,"icon"),p},createShadow:function(){return null}});function oa(a){return new sa(a)}ea.Default=Va;var Yr=$r.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ct.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){k(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),Gn(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ms(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Lr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof Y?a:new Y(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var p=this.getPane().children,S=-a(-1/0,1/0),U=0,ie=p.length,Ce;U<ie;U++)Ce=p[U].style.zIndex,p[U]!==this._container&&Ce&&(S=a(S,+Ce));isFinite(S)&&(this.options.zIndex=S+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ct.ielt9){nn(this._container,this.options.opacity);var a=+new Date,p=!1,S=!1;for(var U in this._tiles){var ie=this._tiles[U];if(!(!ie.current||!ie.loaded)){var Ce=Math.min(1,(a-ie.loaded)/200);nn(ie.el,Ce),Ce<1?p=!0:(ie.active?S=!0:this._onOpaqueTile(ie),ie.active=!0)}}S&&!this._noPrune&&this._pruneTiles(),p&&(O(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=fr("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,p=this.options.maxZoom;if(a!==void 0){for(var S in this._levels)S=Number(S),this._levels[S].el.children.length||S===a?(this._levels[S].el.style.zIndex=p-Math.abs(a-S),this._onUpdateLevel(S)):(Gn(this._levels[S].el),this._removeTilesAtZoom(S),this._onRemoveLevel(S),delete this._levels[S]);var U=this._levels[a],ie=this._map;return U||(U=this._levels[a]={},U.el=fr("div","leaflet-tile-container leaflet-zoom-animated",this._container),U.el.style.zIndex=p,U.origin=ie.project(ie.unproject(ie.getPixelOrigin()),a).round(),U.zoom=a,this._setZoomTransform(U,ie.getCenter(),ie.getZoom()),y(U.el.offsetWidth),this._onCreateLevel(U)),this._level=U,U}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var a,p,S=this._map.getZoom();if(S>this.options.maxZoom||S<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)p=this._tiles[a],p.retain=p.current;for(a in this._tiles)if(p=this._tiles[a],p.current&&!p.active){var U=p.coords;this._retainParent(U.x,U.y,U.z,U.z-5)||this._retainChildren(U.x,U.y,U.z,U.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var p in this._tiles)this._tiles[p].coords.z===a&&this._removeTile(p)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)Gn(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,p,S,U){var ie=Math.floor(a/2),Ce=Math.floor(p/2),ot=S-1,Pt=new Y(+ie,+Ce);Pt.z=+ot;var zt=this._tileCoordsToKey(Pt),on=this._tiles[zt];return on&&on.active?(on.retain=!0,!0):(on&&on.loaded&&(on.retain=!0),ot>U?this._retainParent(ie,Ce,ot,U):!1)},_retainChildren:function(a,p,S,U){for(var ie=2*a;ie<2*a+2;ie++)for(var Ce=2*p;Ce<2*p+2;Ce++){var ot=new Y(ie,Ce);ot.z=S+1;var Pt=this._tileCoordsToKey(ot),zt=this._tiles[Pt];if(zt&&zt.active){zt.retain=!0;continue}else zt&&zt.loaded&&(zt.retain=!0);S+1<U&&this._retainChildren(ie,Ce,S+1,U)}},_resetView:function(a){var p=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),p,p)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var p=this.options;return p.minNativeZoom!==void 0&&a<p.minNativeZoom?p.minNativeZoom:p.maxNativeZoom!==void 0&&p.maxNativeZoom<a?p.maxNativeZoom:a},_setView:function(a,p,S,U){var ie=Math.round(p);this.options.maxZoom!==void 0&&ie>this.options.maxZoom||this.options.minZoom!==void 0&&ie<this.options.minZoom?ie=void 0:ie=this._clampZoom(ie);var Ce=this.options.updateWhenZooming&&ie!==this._tileZoom;(!U||Ce)&&(this._tileZoom=ie,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),ie!==void 0&&this._update(a),S||this._pruneTiles(),this._noPrune=!!S),this._setZoomTransforms(a,p)},_setZoomTransforms:function(a,p){for(var S in this._levels)this._setZoomTransform(this._levels[S],a,p)},_setZoomTransform:function(a,p,S){var U=this._map.getZoomScale(S,a.zoom),ie=a.origin.multiplyBy(U).subtract(this._map._getNewPixelOrigin(p,S)).round();ct.any3d?vs(a.el,ie,U):Ci(a.el,ie)},_resetGrid:function(){var a=this._map,p=a.options.crs,S=this._tileSize=this.getTileSize(),U=this._tileZoom,ie=this._map.getPixelWorldBounds(this._tileZoom);ie&&(this._globalTileRange=this._pxBoundsToTileRange(ie)),this._wrapX=p.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,p.wrapLng[0]],U).x/S.x),Math.ceil(a.project([0,p.wrapLng[1]],U).x/S.y)],this._wrapY=p.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([p.wrapLat[0],0],U).y/S.x),Math.ceil(a.project([p.wrapLat[1],0],U).y/S.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var p=this._map,S=p._animatingZoom?Math.max(p._animateToZoom,p.getZoom()):p.getZoom(),U=p.getZoomScale(S,this._tileZoom),ie=p.project(a,this._tileZoom).floor(),Ce=p.getSize().divideBy(U*2);return new Re(ie.subtract(Ce),ie.add(Ce))},_update:function(a){var p=this._map;if(p){var S=this._clampZoom(p.getZoom());if(a===void 0&&(a=p.getCenter()),this._tileZoom!==void 0){var U=this._getTiledPixelBounds(a),ie=this._pxBoundsToTileRange(U),Ce=ie.getCenter(),ot=[],Pt=this.options.keepBuffer,zt=new Re(ie.getBottomLeft().subtract([Pt,-Pt]),ie.getTopRight().add([Pt,-Pt]));if(!(isFinite(ie.min.x)&&isFinite(ie.min.y)&&isFinite(ie.max.x)&&isFinite(ie.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var on in this._tiles){var Dn=this._tiles[on].coords;(Dn.z!==this._tileZoom||!zt.contains(new Y(Dn.x,Dn.y)))&&(this._tiles[on].current=!1)}if(Math.abs(S-this._tileZoom)>1){this._setView(a,S);return}for(var Yn=ie.min.y;Yn<=ie.max.y;Yn++)for(var Rr=ie.min.x;Rr<=ie.max.x;Rr++){var fs=new Y(Rr,Yn);if(fs.z=this._tileZoom,!!this._isValidTile(fs)){var Wi=this._tiles[this._tileCoordsToKey(fs)];Wi?Wi.current=!0:ot.push(fs)}}if(ot.sort(function($i,fo){return $i.distanceTo(Ce)-fo.distanceTo(Ce)}),ot.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ms=document.createDocumentFragment();for(Rr=0;Rr<ot.length;Rr++)this._addTile(ot[Rr],Ms);this._level.el.appendChild(Ms)}}}},_isValidTile:function(a){var p=this._map.options.crs;if(!p.infinite){var S=this._globalTileRange;if(!p.wrapLng&&(a.x<S.min.x||a.x>S.max.x)||!p.wrapLat&&(a.y<S.min.y||a.y>S.max.y))return!1}if(!this.options.bounds)return!0;var U=this._tileCoordsToBounds(a);return fe(this.options.bounds).overlaps(U)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var p=this._map,S=this.getTileSize(),U=a.scaleBy(S),ie=U.add(S),Ce=p.unproject(U,a.z),ot=p.unproject(ie,a.z);return[Ce,ot]},_tileCoordsToBounds:function(a){var p=this._tileCoordsToNwSe(a),S=new ne(p[0],p[1]);return this.options.noWrap||(S=this._map.wrapLatLngBounds(S)),S},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var p=a.split(":"),S=new Y(+p[0],+p[1]);return S.z=+p[2],S},_removeTile:function(a){var p=this._tiles[a];p&&(Gn(p.el),delete this._tiles[a],this.fire("tileunload",{tile:p.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){Vn(a,"leaflet-tile");var p=this.getTileSize();a.style.width=p.x+"px",a.style.height=p.y+"px",a.onselectstart=y,a.onmousemove=y,ct.ielt9&&this.options.opacity<1&&nn(a,this.options.opacity)},_addTile:function(a,p){var S=this._getTilePos(a),U=this._tileCoordsToKey(a),ie=this.createTile(this._wrapCoords(a),s(this._tileReady,this,a));this._initTile(ie),this.createTile.length<2&&$(s(this._tileReady,this,a,null,ie)),Ci(ie,S),this._tiles[U]={el:ie,coords:a,current:!0},p.appendChild(ie),this.fire("tileloadstart",{tile:ie,coords:a})},_tileReady:function(a,p,S){p&&this.fire("tileerror",{error:p,tile:S,coords:a});var U=this._tileCoordsToKey(a);S=this._tiles[U],S&&(S.loaded=+new Date,this._map._fadeAnimated?(nn(S.el,0),O(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this)):(S.active=!0,this._pruneTiles()),p||(Vn(S.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:S.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ct.ielt9||!this._map._fadeAnimated?$(this._pruneTiles,this):setTimeout(s(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var p=new Y(this._wrapX?m(a.x,this._wrapX):a.x,this._wrapY?m(a.y,this._wrapY):a.y);return p.z=a.z,p},_pxBoundsToTileRange:function(a){var p=this.getTileSize();return new Re(a.min.unscaleBy(p).floor(),a.max.unscaleBy(p).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function Ho(a){return new Yr(a)}var Cs=Yr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,p){this._url=a,p=k(this,p),p.detectRetina&&ct.retina&&p.maxZoom>0?(p.tileSize=Math.floor(p.tileSize/2),p.zoomReverse?(p.zoomOffset--,p.minZoom=Math.min(p.maxZoom,p.minZoom+1)):(p.zoomOffset++,p.maxZoom=Math.max(p.minZoom,p.maxZoom-1)),p.minZoom=Math.max(0,p.minZoom)):p.zoomReverse?p.minZoom=Math.min(p.maxZoom,p.minZoom):p.maxZoom=Math.max(p.minZoom,p.maxZoom),typeof p.subdomains=="string"&&(p.subdomains=p.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,p){return this._url===a&&p===void 0&&(p=!0),this._url=a,p||this.redraw(),this},createTile:function(a,p){var S=document.createElement("img");return br(S,"load",s(this._tileOnLoad,this,p,S)),br(S,"error",s(this._tileOnError,this,p,S)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(S.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(S.referrerPolicy=this.options.referrerPolicy),S.alt="",S.src=this.getTileUrl(a),S},getTileUrl:function(a){var p={r:ct.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var S=this._globalTileRange.max.y-a.y;this.options.tms&&(p.y=S),p["-y"]=S}return j(this._url,i(p,this.options))},_tileOnLoad:function(a,p){ct.ielt9?setTimeout(s(a,this,null,p),0):a(null,p)},_tileOnError:function(a,p,S){var U=this.options.errorTileUrl;U&&p.getAttribute("src")!==U&&(p.src=U),a(S,p)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,p=this.options.maxZoom,S=this.options.zoomReverse,U=this.options.zoomOffset;return S&&(a=p-a),a+U},_getSubdomain:function(a){var p=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[p]},_abortLoading:function(){var a,p;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(p=this._tiles[a].el,p.onload=y,p.onerror=y,!p.complete)){p.src=ae;var S=this._tiles[a].coords;Gn(p),delete this._tiles[a],this.fire("tileabort",{tile:p,coords:S})}},_removeTile:function(a){var p=this._tiles[a];if(p)return p.el.setAttribute("src",ae),Yr.prototype._removeTile.call(this,a)},_tileReady:function(a,p,S){if(!(!this._map||S&&S.getAttribute("src")===ae))return Yr.prototype._tileReady.call(this,a,p,S)}});function wi(a,p){return new Cs(a,p)}var Ei=Cs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,p){this._url=a;var S=i({},this.defaultWmsParams);for(var U in p)U in this.options||(S[U]=p[U]);p=k(this,p);var ie=p.detectRetina&&ct.retina?2:1,Ce=this.getTileSize();S.width=Ce.x*ie,S.height=Ce.y*ie,this.wmsParams=S},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var p=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[p]=this._crs.code,Cs.prototype.onAdd.call(this,a)},getTileUrl:function(a){var p=this._tileCoordsToNwSe(a),S=this._crs,U=T(S.project(p[0]),S.project(p[1])),ie=U.min,Ce=U.max,ot=(this._wmsVersion>=1.3&&this._crs===ls?[ie.y,ie.x,Ce.y,Ce.x]:[ie.x,ie.y,Ce.x,Ce.y]).join(","),Pt=Cs.prototype.getTileUrl.call(this,a);return Pt+R(this.wmsParams,Pt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ot},setParams:function(a,p){return i(this.wmsParams,a),p||this.redraw(),this}});function ns(a,p){return new Ei(a,p)}Cs.WMS=Ei,wi.wms=ns;var Ni=$r.extend({options:{padding:.1},initialize:function(a){k(this,a),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Vn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,p){var S=this._map.getZoomScale(p,this._zoom),U=this._map.getSize().multiplyBy(.5+this.options.padding),ie=this._map.project(this._center,p),Ce=U.multiplyBy(-S).add(ie).subtract(this._map._getNewPixelOrigin(a,p));ct.any3d?vs(this._container,Ce,S):Ci(this._container,Ce)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,p=this._map.getSize(),S=this._map.containerPointToLayerPoint(p.multiplyBy(-a)).round();this._bounds=new Re(S,S.add(p.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Eo=Ni.extend({options:{tolerance:0},getEvents:function(){var a=Ni.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ni.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");br(a,"mousemove",this._onMouseMove,this),br(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),br(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){O(this._redrawRequest),delete this._ctx,Gn(this._container),Tr(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var p in this._layers)a=this._layers[p],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ni.prototype._update.call(this);var a=this._bounds,p=this._container,S=a.getSize(),U=ct.retina?2:1;Ci(p,a.min),p.width=U*S.x,p.height=U*S.y,p.style.width=S.x+"px",p.style.height=S.y+"px",ct.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){Ni.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[f(a)]=a;var p=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=p),this._drawLast=p,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var p=a._order,S=p.next,U=p.prev;S?S.prev=U:this._drawLast=U,U?U.next=S:this._drawFirst=S,delete a._order,delete this._layers[f(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var p=a.options.dashArray.split(/[, ]+/),S=[],U,ie;for(ie=0;ie<p.length;ie++){if(U=Number(p[ie]),isNaN(U))return;S.push(U)}a.options._dashArray=S}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||$(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var p=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Re,this._redrawBounds.extend(a._pxBounds.min.subtract([p,p])),this._redrawBounds.extend(a._pxBounds.max.add([p,p]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var p=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,p.x,p.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,p=this._redrawBounds;if(this._ctx.save(),p){var S=p.getSize();this._ctx.beginPath(),this._ctx.rect(p.min.x,p.min.y,S.x,S.y),this._ctx.clip()}this._drawing=!0;for(var U=this._drawFirst;U;U=U.next)a=U.layer,(!p||a._pxBounds&&a._pxBounds.intersects(p))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,p){if(this._drawing){var S,U,ie,Ce,ot=a._parts,Pt=ot.length,zt=this._ctx;if(Pt){for(zt.beginPath(),S=0;S<Pt;S++){for(U=0,ie=ot[S].length;U<ie;U++)Ce=ot[S][U],zt[U?"lineTo":"moveTo"](Ce.x,Ce.y);p&&zt.closePath()}this._fillStroke(zt,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var p=a._point,S=this._ctx,U=Math.max(Math.round(a._radius),1),ie=(Math.max(Math.round(a._radiusY),1)||U)/U;ie!==1&&(S.save(),S.scale(1,ie)),S.beginPath(),S.arc(p.x,p.y/ie,U,0,Math.PI*2,!1),ie!==1&&S.restore(),this._fillStroke(S,a)}},_fillStroke:function(a,p){var S=p.options;S.fill&&(a.globalAlpha=S.fillOpacity,a.fillStyle=S.fillColor||S.color,a.fill(S.fillRule||"evenodd")),S.stroke&&S.weight!==0&&(a.setLineDash&&a.setLineDash(p.options&&p.options._dashArray||[]),a.globalAlpha=S.opacity,a.lineWidth=S.weight,a.strokeStyle=S.color,a.lineCap=S.lineCap,a.lineJoin=S.lineJoin,a.stroke())},_onClick:function(a){for(var p=this._map.mouseEventToLayerPoint(a),S,U,ie=this._drawFirst;ie;ie=ie.next)S=ie.layer,S.options.interactive&&S._containsPoint(p)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(S))&&(U=S);this._fireEvent(U?[U]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var p=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,p)}},_handleMouseOut:function(a){var p=this._hoveredLayer;p&&(_r(this._container,"leaflet-interactive"),this._fireEvent([p],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,p){if(!this._mouseHoverThrottled){for(var S,U,ie=this._drawFirst;ie;ie=ie.next)S=ie.layer,S.options.interactive&&S._containsPoint(p)&&(U=S);U!==this._hoveredLayer&&(this._handleMouseOut(a),U&&(Vn(this._container,"leaflet-interactive"),this._fireEvent([U],a,"mouseover"),this._hoveredLayer=U)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(s(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,p,S){this._map._fireDOMEvent(p,S||p.type,a)},_bringToFront:function(a){var p=a._order;if(p){var S=p.next,U=p.prev;if(S)S.prev=U;else return;U?U.next=S:S&&(this._drawFirst=S),p.prev=this._drawLast,this._drawLast.next=p,p.next=null,this._drawLast=p,this._requestRedraw(a)}},_bringToBack:function(a){var p=a._order;if(p){var S=p.next,U=p.prev;if(U)U.next=S;else return;S?S.prev=U:U&&(this._drawLast=U),p.prev=null,p.next=this._drawFirst,this._drawFirst.prev=p,this._drawFirst=p,this._requestRedraw(a)}}});function uo(a){return ct.canvas?new Eo(a):null}var Bo=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),xu={_initContainer:function(){this._container=fr("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ni.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var p=a._container=Bo("shape");Vn(p,"leaflet-vml-shape "+(this.options.className||"")),p.coordsize="1 1",a._path=Bo("path"),p.appendChild(a._path),this._updateStyle(a),this._layers[f(a)]=a},_addPath:function(a){var p=a._container;this._container.appendChild(p),a.options.interactive&&a.addInteractiveTarget(p)},_removePath:function(a){var p=a._container;Gn(p),a.removeInteractiveTarget(p),delete this._layers[f(a)]},_updateStyle:function(a){var p=a._stroke,S=a._fill,U=a.options,ie=a._container;ie.stroked=!!U.stroke,ie.filled=!!U.fill,U.stroke?(p||(p=a._stroke=Bo("stroke")),ie.appendChild(p),p.weight=U.weight+"px",p.color=U.color,p.opacity=U.opacity,U.dashArray?p.dashStyle=J(U.dashArray)?U.dashArray.join(" "):U.dashArray.replace(/( *, *)/g," "):p.dashStyle="",p.endcap=U.lineCap.replace("butt","flat"),p.joinstyle=U.lineJoin):p&&(ie.removeChild(p),a._stroke=null),U.fill?(S||(S=a._fill=Bo("fill")),ie.appendChild(S),S.color=U.fillColor||U.color,S.opacity=U.fillOpacity):S&&(ie.removeChild(S),a._fill=null)},_updateCircle:function(a){var p=a._point.round(),S=Math.round(a._radius),U=Math.round(a._radiusY||S);this._setPath(a,a._empty()?"M0 0":"AL "+p.x+","+p.y+" "+S+","+U+" 0,"+65535*360)},_setPath:function(a,p){a._path.v=p},_bringToFront:function(a){ms(a._container)},_bringToBack:function(a){Lr(a._container)}},aa=ct.vml?Bo:ve,cs=Ni.extend({_initContainer:function(){this._container=aa("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=aa("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Gn(this._container),Tr(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ni.prototype._update.call(this);var a=this._bounds,p=a.getSize(),S=this._container;(!this._svgSize||!this._svgSize.equals(p))&&(this._svgSize=p,S.setAttribute("width",p.x),S.setAttribute("height",p.y)),Ci(S,a.min),S.setAttribute("viewBox",[a.min.x,a.min.y,p.x,p.y].join(" ")),this.fire("update")}},_initPath:function(a){var p=a._path=aa("path");a.options.className&&Vn(p,a.options.className),a.options.interactive&&Vn(p,"leaflet-interactive"),this._updateStyle(a),this._layers[f(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){Gn(a._path),a.removeInteractiveTarget(a._path),delete this._layers[f(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var p=a._path,S=a.options;p&&(S.stroke?(p.setAttribute("stroke",S.color),p.setAttribute("stroke-opacity",S.opacity),p.setAttribute("stroke-width",S.weight),p.setAttribute("stroke-linecap",S.lineCap),p.setAttribute("stroke-linejoin",S.lineJoin),S.dashArray?p.setAttribute("stroke-dasharray",S.dashArray):p.removeAttribute("stroke-dasharray"),S.dashOffset?p.setAttribute("stroke-dashoffset",S.dashOffset):p.removeAttribute("stroke-dashoffset")):p.setAttribute("stroke","none"),S.fill?(p.setAttribute("fill",S.fillColor||S.color),p.setAttribute("fill-opacity",S.fillOpacity),p.setAttribute("fill-rule",S.fillRule||"evenodd")):p.setAttribute("fill","none"))},_updatePoly:function(a,p){this._setPath(a,pe(a._parts,p))},_updateCircle:function(a){var p=a._point,S=Math.max(Math.round(a._radius),1),U=Math.max(Math.round(a._radiusY),1)||S,ie="a"+S+","+U+" 0 1,0 ",Ce=a._empty()?"M0 0":"M"+(p.x-S)+","+p.y+ie+S*2+",0 "+ie+-S*2+",0 ";this._setPath(a,Ce)},_setPath:function(a,p){a._path.setAttribute("d",p)},_bringToFront:function(a){ms(a._path)},_bringToBack:function(a){Lr(a._path)}});ct.vml&&cs.include(xu);function Bi(a){return ct.svg||ct.vml?new cs(a):null}Kr.include({getRenderer:function(a){var p=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return p||(p=this._renderer=this._createRenderer()),this.hasLayer(p)||this.addLayer(p),p},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var p=this._paneRenderers[a];return p===void 0&&(p=this._createRenderer({pane:a}),this._paneRenderers[a]=p),p},_createRenderer:function(a){return this.options.preferCanvas&&uo(a)||Bi(a)}});var Us=_s.extend({initialize:function(a,p){_s.prototype.initialize.call(this,this._boundsToLatLngs(a),p)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=fe(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function co(a,p){return new Us(a,p)}cs.create=aa,cs.pointsToPath=pe,Fs.geometryToLayer=js,Fs.coordsToLatLng=xa,Fs.coordsToLatLngs=zs,Fs.latLngToCoords=Ss,Fs.latLngsToCoords=na,Fs.getFeature=Co,Fs.asFeature=$s,Kr.mergeOptions({boxZoom:!0});var dr=vi.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){br(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Tr(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Gn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ks(),Ns(),this._startPoint=this._map.mouseEventToContainerPoint(a),br(document,{contextmenu:Hr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=fr("div","leaflet-zoom-box",this._container),Vn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var p=new Re(this._point,this._startPoint),S=p.getSize();Ci(this._box,p.min),this._box.style.width=S.x+"px",this._box.style.height=S.y+"px"},_finish:function(){this._moved&&(Gn(this._box),_r(this._container,"leaflet-crosshair")),Bs(),Yi(),Tr(document,{contextmenu:Hr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(s(this._resetState,this),0);var p=new ne(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(p).fire("boxzoomend",{boxZoomBounds:p})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Kr.addInitHook("addHandler","boxZoom",dr),Kr.mergeOptions({doubleClickZoom:!0});var Sa=vi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var p=this._map,S=p.getZoom(),U=p.options.zoomDelta,ie=a.originalEvent.shiftKey?S-U:S+U;p.options.doubleClickZoom==="center"?p.setZoom(ie):p.setZoomAround(a.containerPoint,ie)}});Kr.addInitHook("addHandler","doubleClickZoom",Sa),Kr.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ca=vi.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new Uo(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}Vn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){_r(this._map._container,"leaflet-grab"),_r(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var p=fe(this._map.options.maxBounds);this._offsetLimit=T(this._map.latLngToContainerPoint(p.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(p.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var p=this._lastTime=+new Date,S=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(S),this._times.push(p),this._prunePositions(p)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),p=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=p.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,p){return a-(a-p)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),p=this._offsetLimit;a.x<p.min.x&&(a.x=this._viscousLimit(a.x,p.min.x)),a.y<p.min.y&&(a.y=this._viscousLimit(a.y,p.min.y)),a.x>p.max.x&&(a.x=this._viscousLimit(a.x,p.max.x)),a.y>p.max.y&&(a.y=this._viscousLimit(a.y,p.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,p=Math.round(a/2),S=this._initialWorldOffset,U=this._draggable._newPos.x,ie=(U-p+S)%a+p-S,Ce=(U+p+S)%a-p-S,ot=Math.abs(ie+S)<Math.abs(Ce+S)?ie:Ce;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ot},_onDragEnd:function(a){var p=this._map,S=p.options,U=!S.inertia||a.noInertia||this._times.length<2;if(p.fire("dragend",a),U)p.fire("moveend");else{this._prunePositions(+new Date);var ie=this._lastPos.subtract(this._positions[0]),Ce=(this._lastTime-this._times[0])/1e3,ot=S.easeLinearity,Pt=ie.multiplyBy(ot/Ce),zt=Pt.distanceTo([0,0]),on=Math.min(S.inertiaMaxSpeed,zt),Dn=Pt.multiplyBy(on/zt),Yn=on/(S.inertiaDeceleration*ot),Rr=Dn.multiplyBy(-Yn/2).round();!Rr.x&&!Rr.y?p.fire("moveend"):(Rr=p._limitOffset(Rr,p.options.maxBounds),$(function(){p.panBy(Rr,{duration:Yn,easeLinearity:ot,noMoveStart:!0,animate:!0})}))}}});Kr.addInitHook("addHandler","dragging",Ca),Kr.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Go=vi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),br(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Tr(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,p=document.documentElement,S=a.scrollTop||p.scrollTop,U=a.scrollLeft||p.scrollLeft;this._map._container.focus(),window.scrollTo(U,S)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var p=this._panKeys={},S=this.keyCodes,U,ie;for(U=0,ie=S.left.length;U<ie;U++)p[S.left[U]]=[-1*a,0];for(U=0,ie=S.right.length;U<ie;U++)p[S.right[U]]=[a,0];for(U=0,ie=S.down.length;U<ie;U++)p[S.down[U]]=[0,a];for(U=0,ie=S.up.length;U<ie;U++)p[S.up[U]]=[0,-1*a]},_setZoomDelta:function(a){var p=this._zoomKeys={},S=this.keyCodes,U,ie;for(U=0,ie=S.zoomIn.length;U<ie;U++)p[S.zoomIn[U]]=a;for(U=0,ie=S.zoomOut.length;U<ie;U++)p[S.zoomOut[U]]=-a},_addHooks:function(){br(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Tr(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var p=a.keyCode,S=this._map,U;if(p in this._panKeys){if(!S._panAnim||!S._panAnim._inProgress)if(U=this._panKeys[p],a.shiftKey&&(U=Se(U).multiplyBy(3)),S.options.maxBounds&&(U=S._limitOffset(Se(U),S.options.maxBounds)),S.options.worldCopyJump){var ie=S.wrapLatLng(S.unproject(S.project(S.getCenter()).add(U)));S.panTo(ie)}else S.panBy(U)}else if(p in this._zoomKeys)S.setZoom(S.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[p]);else if(p===27&&S._popup&&S._popup.options.closeOnEscapeKey)S.closePopup();else return;Hr(a)}}});Kr.addInitHook("addHandler","keyboard",Go),Kr.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var eo=vi.extend({addHooks:function(){br(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Tr(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var p=Jl(a),S=this._map.options.wheelDebounceTime;this._delta+=p,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var U=Math.max(S-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(s(this._performZoom,this),U),Hr(a)},_performZoom:function(){var a=this._map,p=a.getZoom(),S=this._map.options.zoomSnap||0;a._stop();var U=this._delta/(this._map.options.wheelPxPerZoomLevel*4),ie=4*Math.log(2/(1+Math.exp(-Math.abs(U))))/Math.LN2,Ce=S?Math.ceil(ie/S)*S:ie,ot=a._limitZoom(p+(this._delta>0?Ce:-Ce))-p;this._delta=0,this._startTime=null,ot&&(a.options.scrollWheelZoom==="center"?a.setZoom(p+ot):a.setZoomAround(this._lastMousePos,p+ot))}});Kr.addInitHook("addHandler","scrollWheelZoom",eo);var bc=600;Kr.mergeOptions({tapHold:ct.touchNative&&ct.safari&&ct.mobile,tapTolerance:15});var Es=vi.extend({addHooks:function(){br(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Tr(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var p=a.touches[0];this._startPos=this._newPos=new Y(p.clientX,p.clientY),this._holdTimeout=setTimeout(s(function(){this._cancel(),this._isTapValid()&&(br(document,"touchend",Sr),br(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",p))},this),bc),br(document,"touchend touchcancel contextmenu",this._cancel,this),br(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){Tr(document,"touchend",Sr),Tr(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),Tr(document,"touchend touchcancel contextmenu",this._cancel,this),Tr(document,"touchmove",this._onMove,this)},_onMove:function(a){var p=a.touches[0];this._newPos=new Y(p.clientX,p.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,p){var S=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:p.screenX,screenY:p.screenY,clientX:p.clientX,clientY:p.clientY});S._simulated=!0,p.target.dispatchEvent(S)}});Kr.addInitHook("addHandler","tapHold",Es),Kr.mergeOptions({touchZoom:ct.touch,bounceAtZoomLimits:!0});var Ps=vi.extend({addHooks:function(){Vn(this._map._container,"leaflet-touch-zoom"),br(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){_r(this._map._container,"leaflet-touch-zoom"),Tr(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var p=this._map;if(!(!a.touches||a.touches.length!==2||p._animatingZoom||this._zooming)){var S=p.mouseEventToContainerPoint(a.touches[0]),U=p.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=p.getSize()._divideBy(2),this._startLatLng=p.containerPointToLatLng(this._centerPoint),p.options.touchZoom!=="center"&&(this._pinchStartLatLng=p.containerPointToLatLng(S.add(U)._divideBy(2))),this._startDist=S.distanceTo(U),this._startZoom=p.getZoom(),this._moved=!1,this._zooming=!0,p._stop(),br(document,"touchmove",this._onTouchMove,this),br(document,"touchend touchcancel",this._onTouchEnd,this),Sr(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var p=this._map,S=p.mouseEventToContainerPoint(a.touches[0]),U=p.mouseEventToContainerPoint(a.touches[1]),ie=S.distanceTo(U)/this._startDist;if(this._zoom=p.getScaleZoom(ie,this._startZoom),!p.options.bounceAtZoomLimits&&(this._zoom<p.getMinZoom()&&ie<1||this._zoom>p.getMaxZoom()&&ie>1)&&(this._zoom=p._limitZoom(this._zoom)),p.options.touchZoom==="center"){if(this._center=this._startLatLng,ie===1)return}else{var Ce=S._add(U)._divideBy(2)._subtract(this._centerPoint);if(ie===1&&Ce.x===0&&Ce.y===0)return;this._center=p.unproject(p.project(this._pinchStartLatLng,this._zoom).subtract(Ce),this._zoom)}this._moved||(p._moveStart(!0,!1),this._moved=!0),O(this._animRequest);var ot=s(p._move,p,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=$(ot,this,!0),Sr(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,O(this._animRequest),Tr(document,"touchmove",this._onTouchMove,this),Tr(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Kr.addInitHook("addHandler","touchZoom",Ps),Kr.BoxZoom=dr,Kr.DoubleClickZoom=Sa,Kr.Drag=Ca,Kr.Keyboard=Go,Kr.ScrollWheelZoom=eo,Kr.TapHold=Es,Kr.TouchZoom=Ps,n.Bounds=Re,n.Browser=ct,n.CRS=oe,n.Canvas=Eo,n.Circle=Rs,n.CircleMarker=lo,n.Class=V,n.Control=ir,n.DivIcon=sa,n.DivOverlay=Qs,n.DomEvent=Tl,n.DomUtil=pr,n.Draggable=Uo,n.Evented=X,n.FeatureGroup=Ys,n.GeoJSON=Fs,n.GridLayer=Yr,n.Handler=vi,n.Icon=ea,n.ImageOverlay=Pn,n.LatLng=ce,n.LatLngBounds=ne,n.Layer=$r,n.LayerGroup=Is,n.LineUtil=zr,n.Map=Kr,n.Marker=us,n.Mixin=Ku,n.Path=So,n.Point=Y,n.PolyUtil=ul,n.Polygon=_s,n.Polyline=Xs,n.Popup=zi,n.PosAnimation=Xl,n.Projection=_i,n.Rectangle=Us,n.Renderer=Ni,n.SVG=cs,n.SVGOverlay=bi,n.TileLayer=Cs,n.Tooltip=La,n.Transformation=Me,n.Util=z,n.VideoOverlay=wr,n.bind=s,n.bounds=T,n.canvas=uo,n.circle=Js,n.circleMarker=fl,n.control=Qi,n.divIcon=oa,n.extend=i,n.featureGroup=eu,n.geoJSON=qt,n.geoJson=Mt,n.gridLayer=Ho,n.icon=wu,n.imageOverlay=Zn,n.latLng=ye,n.latLngBounds=fe,n.layerGroup=cl,n.map=Xi,n.marker=ta,n.point=Se,n.polygon=ba,n.polyline=Yu,n.popup=ra,n.rectangle=co,n.setOptions=k,n.stamp=f,n.svg=Bi,n.svgOverlay=Il,n.tileLayer=wi,n.tooltip=ia,n.transformation=We,n.version=r,n.videoOverlay=ji;var qo=window.L;n.noConflict=function(){return window.L=qo,this},window.L=n})})(l1,l1.exports);var Ot=l1.exports;const Un=hy(Ot);var sb={exports:{}};(function(e,t){(function(n,r){r(t)})(Jo,function(n){var r=typeof window<"u"?window:typeof Jo<"u"?Jo:typeof self<"u"?self:{};function i(d,m){return d(m={exports:{}},m.exports),m.exports}var o=i(function(d,m){(function(y){const w={escape:function(W){return W.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:_,mimeType:function(W){return W=_(W).toLowerCase(),function(){var q="application/font-woff",X="image/jpeg";return{woff:q,woff2:q,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:X,jpeg:X,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[W]||""},dataAsUrl:function(W,q){return`data:${q};base64,`+W},isDataUrl:function(W){return W.search(/^(data:)/)!==-1},canvasToBlob:function(W){return W.toBlob?new Promise(function(X){W.toBlob(X)}):(q=W,new Promise(function(X){const Y=xe(q.toDataURL().split(",")[1]);var me=Y.length;const Se=new Uint8Array(me);for(let Re=0;Re<me;Re++)Se[Re]=Y.charCodeAt(Re);X(new Blob([Se],{type:"image/png"}))}));var q},resolveUrl:function(W,q){const X=document.implementation.createHTMLDocument(),Y=X.createElement("base"),me=(X.head.appendChild(Y),X.createElement("a"));return X.body.appendChild(me),Y.href=q,me.href=W,me.href},getAndEncode:function(W){let q=ae.impl.urlCache.find(function(X){return X.url===W});return q||(q={url:W,promise:null},ae.impl.urlCache.push(q)),q.promise===null&&(ae.impl.options.cacheBust&&(W+=(/\?/.test(W)?"&":"?")+new Date().getTime()),q.promise=new Promise(function(X){const Y=ae.impl.options.httpTimeout,me=new XMLHttpRequest;let Se;var Re;function T(ne){console.error(ne),X("")}me.onreadystatechange=function(){if(me.readyState===4)if(me.status!==200)Se?X(Se):T(`cannot fetch resource: ${W}, status: `+me.status);else{const ne=new FileReader;ne.onloadend=function(){var fe=ne.result.split(/,/)[1];X(fe)},ne.readAsDataURL(me.response)}},me.ontimeout=function(){Se?X(Se):T(`timeout of ${Y}ms occured while fetching resource: `+W)},me.responseType="blob",me.timeout=Y,ae.impl.options.useCredentials&&(me.withCredentials=!0),me.open("GET",W,!0),me.send(),ae.impl.options.imagePlaceholder&&(Re=ae.impl.options.imagePlaceholder.split(/,/))&&Re[1]&&(Se=Re[1])})),q.promise},uid:function(){let W=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+W++}}(),delay:function(W){return function(q){return new Promise(function(X){setTimeout(function(){X(q)},W)})}},asArray:function(W){const q=[],X=W.length;for(let Y=0;Y<X;Y++)q.push(W[Y]);return q},escapeXhtml:function(W){return W.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(W){return W!=="data:,"?new Promise(function(q,X){const Y=new Image;ae.impl.options.useCredentials&&(Y.crossOrigin="use-credentials"),Y.onload=function(){q(Y)},Y.onerror=X,Y.src=W}):Promise.resolve()},width:function(W){var q=M(W,"border-left-width"),X=M(W,"border-right-width");return W.scrollWidth+q+X},height:function(W){var q=M(W,"border-top-width"),X=M(W,"border-bottom-width");return W.scrollHeight+q+X}};function _(W){return(W=/\.([^\.\/]*?)(\?|$)/g.exec(W))?W[1]:""}function M(W,q){const X=le(W).getPropertyValue(q);return parseFloat(X.replace("px",""))}const k=function(){const W=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(me,Se,Re){return q(me)?Promise.resolve(me).then(X).then(function(T){let ne=Promise.resolve(me);return T.forEach(function(fe){ne=ne.then(function(ce){return Y(ce,fe,Se,Re)})}),ne}):Promise.resolve(me)},shouldProcess:q,impl:{readUrls:X,inline:Y}};function q(me){return me.search(W)!==-1}function X(me){const Se=[];for(var Re;(Re=W.exec(me))!==null;)Se.push(Re[1]);return Se.filter(function(T){return!w.isDataUrl(T)})}function Y(me,Se,Re,T){return Promise.resolve(Se).then(function(ne){return Re?w.resolveUrl(ne,Re):ne}).then(T||w.getAndEncode).then(function(ne){return w.dataAsUrl(ne,w.mimeType(Se))}).then(function(ne){return me.replace((fe=Se,new RegExp(`(url\\(['"]?)(${w.escape(fe)})(['"]?\\))`,"g")),`$1${ne}$3`);var fe})}}(),R={resolveAll:function(){return N().then(function(W){return Promise.all(W.map(function(q){return q.resolve()}))}).then(function(W){return W.join(`
`)})},impl:{readAll:N}};function N(){return Promise.resolve(w.asArray(document.styleSheets)).then(function(q){const X=[];return q.forEach(function(Y){if(Object.getPrototypeOf(Y).hasOwnProperty("cssRules"))try{w.asArray(Y.cssRules||[]).forEach(X.push.bind(X))}catch(me){console.log("Error while reading CSS rules from "+Y.href,me.toString())}}),X}).then(function(q){return q.filter(function(X){return X.type===CSSRule.FONT_FACE_RULE}).filter(function(X){return k.shouldProcess(X.style.getPropertyValue("src"))})}).then(function(q){return q.map(W)});function W(q){return{resolve:function(){var X=(q.parentStyleSheet||{}).href;return k.inlineAll(q.cssText,X)},src:function(){return q.style.getPropertyValue("src")}}}}const j={inlineAll:function W(q){return q instanceof Element?function(X){const Y=X.style.getPropertyValue("background");return Y?k.inlineAll(Y).then(function(me){X.style.setProperty("background",me,Y)}).then(function(){return X}):Promise.resolve(X)}(q).then(function(){return q instanceof HTMLImageElement?J(q).inline():Promise.all(w.asArray(q.childNodes).map(function(X){return W(X)}))}):Promise.resolve(q)},impl:{newImage:J}};function J(W){return{inline:function(q){return w.isDataUrl(W.src)?Promise.resolve():Promise.resolve(W.src).then(q||w.getAndEncode).then(function(X){return w.dataAsUrl(X,w.mimeType(W.src))}).then(function(X){return new Promise(function(Y){W.onload=Y,W.onerror=Y,W.src=X})})}}}const te={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},ae={toSvg:G,toPng:function(W,q){return(q=q||{}).raster=!0,I(W,q).then(function(X){return X.toDataURL()})},toJpeg:function(W,q){return(q=q||{}).raster=!0,I(W,q).then(function(X){return X.toDataURL("image/jpeg",q.quality||1)})},toBlob:function(W,q){return(q=q||{}).raster=!0,I(W,q).then(w.canvasToBlob)},toPixelData:function(W,q){return(q=q||{}).raster=!0,I(W,q).then(function(X){return X.getContext("2d").getImageData(0,0,w.width(W),w.height(W)).data})},toCanvas:function(W,q){return(q=q||{}).raster=!0,I(W,q||{})},impl:{fontFaces:R,images:j,util:w,inliner:k,urlCache:[],options:{}}},le=(d.exports=ae,y.getComputedStyle||window.getComputedStyle),xe=y.atob||window.atob;function G(W,q){var X=q=q||{};return X.imagePlaceholder===void 0?ae.impl.options.imagePlaceholder=te.imagePlaceholder:ae.impl.options.imagePlaceholder=X.imagePlaceholder,X.cacheBust===void 0?ae.impl.options.cacheBust=te.cacheBust:ae.impl.options.cacheBust=X.cacheBust,X.useCredentials===void 0?ae.impl.options.useCredentials=te.useCredentials:ae.impl.options.useCredentials=X.useCredentials,Promise.resolve(W).then(function(Y){return function me(Se,Re,T,ne,fe=null){return T||!Re||Re(Se)?Promise.resolve(Se).then(function(ce){return ce instanceof HTMLCanvasElement?w.makeImage(ce.toDataURL()):ce.nodeName==="IFRAME"?html2canvas(ce.contentDocument.body).then(ye=>ye.toDataURL()).then(w.makeImage):ce.cloneNode(!1)}).then(function(ce){return function(ye,oe){const B=ye.childNodes;return B.length===0?Promise.resolve(oe):function(ue,De){const Me=le(ye);let We=Promise.resolve();return De.forEach(function(Z){We=We.then(function(){return me(Z,Re,!1,ne,Me)}).then(function(de){de&&ue.appendChild(de)})}),We}(oe,w.asArray(B)).then(function(){return oe})}(Se,ce)}).then(function(ce){return function(ye,oe,B){return oe instanceof Element?Promise.resolve().then(function(){(function(ue,De){const Me=le(ue);Me.cssText?(De.style.cssText=Me.cssText,function(We,Z){Z.font=We.font,Z.fontFamily=We.fontFamily,Z.fontFeatureSettings=We.fontFeatureSettings,Z.fontKerning=We.fontKerning,Z.fontSize=We.fontSize,Z.fontStretch=We.fontStretch,Z.fontStyle=We.fontStyle,Z.fontVariant=We.fontVariant,Z.fontVariantCaps=We.fontVariantCaps,Z.fontVariantEastAsian=We.fontVariantEastAsian,Z.fontVariantLigatures=We.fontVariantLigatures,Z.fontVariantNumeric=We.fontVariantNumeric,Z.fontVariationSettings=We.fontVariationSettings,Z.fontWeight=We.fontWeight}(Me,De.style)):(B?function(We,Z,de,ve){const pe=de.style,$e=We.style;for(var Qe of Z){var Ke=Z.getPropertyValue(Qe),He=$e.getPropertyValue(Qe),Xe=($e.setProperty(Qe,ve?"initial":"unset"),Z.getPropertyValue(Qe));Xe!==Ke?pe.setProperty(Qe,Ke):pe.removeProperty(Qe),$e.setProperty(Qe,He)}}(ue,Me,De,T):function(We,Z,de){const ve=function($e){if(V[$e])return V[$e];z||((z=document.createElement("iframe")).style.visibility="hidden",z.style.position="fixed",document.body.appendChild(z),z.contentWindow.document.write('<!DOCTYPE html><meta charset="UTF-8"><title>sandbox</title><body>'));const Qe=document.createElement($e),Ke=(z.contentWindow.document.body.appendChild(Qe),Qe.textContent=".",z.contentWindow.getComputedStyle(Qe)),He={};return w.asArray(Ke).forEach(function(Xe){He[Xe]=Xe==="width"||Xe==="height"?"auto":Ke.getPropertyValue(Xe)}),z.contentWindow.document.body.removeChild(Qe),V[$e]=He}(de.tagName),pe=de.style;w.asArray(We).forEach(function($e){var Qe=We.getPropertyValue($e);(Qe!==ve[$e]||Z&&Qe!==Z.getPropertyValue($e))&&pe.setProperty($e,Qe,We.getPropertyPriority($e))})}(Me,fe,De),T&&(["inset-block","inset-block-start","inset-block-end"].forEach(We=>De.style.removeProperty(We)),["left","right","top","bottom"].forEach(We=>{De.style.getPropertyValue(We)&&De.style.setProperty(We,"0px")})))})(ye,oe)}).then(function(){[":before",":after"].forEach(function(ue){(function(De){const Me=le(ye,De),We=Me.getPropertyValue("content");if(We!==""&&We!=="none"){const Z=w.uid(),de=oe.getAttribute("class"),ve=(de&&oe.setAttribute("class",de+" "+Z),document.createElement("style"));ve.appendChild(function(){const pe=`.${Z}:`+De,$e=(Me.cssText?function(){return`${Me.cssText} content: ${Me.getPropertyValue("content")};`}:function(){return w.asArray(Me).map(function(Qe){return Qe+": "+Me.getPropertyValue(Qe)+(Me.getPropertyPriority(Qe)?" !important":"")}).join("; ")+";"})();return document.createTextNode(pe+`{${$e}}`)}()),oe.appendChild(ve)}})(ue)})}).then(function(){ye instanceof HTMLTextAreaElement&&(oe.innerHTML=ye.value),ye instanceof HTMLInputElement&&oe.setAttribute("value",ye.value)}).then(function(){oe instanceof SVGElement&&(oe.setAttribute("xmlns","http://www.w3.org/2000/svg"),oe instanceof SVGRectElement&&["width","height"].forEach(function(ue){const De=oe.getAttribute(ue);De&&oe.style.setProperty(ue,De)}))}).then(function(){return oe}):oe}(Se,ce,ne)}):Promise.resolve()}(Y,q.filter,!0,!q.raster)}).then(K).then($).then(function(Y){q.bgcolor&&(Y.style.backgroundColor=q.bgcolor),q.width&&(Y.style.width=q.width+"px"),q.height&&(Y.style.height=q.height+"px"),q.style&&Object.keys(q.style).forEach(function(Se){Y.style[Se]=q.style[Se]});let me=null;return typeof q.onclone=="function"&&(me=q.onclone(Y)),Promise.resolve(me).then(function(){return Y})}).then(function(Y){return Y=Y,me=q.width||w.width(W),Se=q.height||w.height(W),Promise.resolve(Y).then(function(Re){return Re.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(Re)}).then(w.escapeXhtml).then(function(Re){return`<foreignObject x="0" y="0" width="100%" height="100%">${Re}</foreignObject>`}).then(function(Re){return`<svg xmlns="http://www.w3.org/2000/svg" width="${me}" height="${Se}">${Re}</svg>`}).then(function(Re){return"data:image/svg+xml;charset=utf-8,"+Re});var me,Se}).then(function(Y){return ae.impl.urlCache=[],Y})}function I(W,q){return G(W,q).then(w.makeImage).then(w.delay(0)).then(function(X){var Y=typeof q.scale!="number"?1:q.scale;const me=function(Re,T){const ne=document.createElement("canvas");if(ne.width=(q.width||w.width(Re))*T,ne.height=(q.height||w.height(Re))*T,q.bgcolor){const fe=ne.getContext("2d");fe.fillStyle=q.bgcolor,fe.fillRect(0,0,ne.width,ne.height)}return ne}(W,Y),Se=me.getContext("2d");return Se.mozImageSmoothingEnabled=!1,Se.msImageSmoothingEnabled=!1,Se.imageSmoothingEnabled=!1,X&&(Se.scale(Y,Y),Se.drawImage(X,0,0)),z&&(document.body.removeChild(z),z=null,O&&clearTimeout(O),O=setTimeout(()=>{O=null,V={}},2e4)),me})}function K(W){return R.resolveAll().then(function(q){const X=document.createElement("style");return W.appendChild(X),X.appendChild(document.createTextNode(q)),W})}function $(W){return j.inlineAll(W).then(function(){return W})}let O=null,z=null,V={}})(r)}),s=i(function(d,m){(function(){function y(R,N,j){var J=new XMLHttpRequest;J.open("GET",R),J.responseType="blob",J.onload=function(){k(J.response,N,j)},J.onerror=function(){console.error("could not download file")},J.send()}function w(R){var N=new XMLHttpRequest;N.open("HEAD",R,!1);try{N.send()}catch{}return 200<=N.status&&299>=N.status}function _(R){try{R.dispatchEvent(new MouseEvent("click"))}catch{var N=document.createEvent("MouseEvents");N.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),R.dispatchEvent(N)}}var M=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof r=="object"&&r.global===r?r:void 0,k=M.saveAs||(typeof window!="object"||window!==M?function(){}:"download"in HTMLAnchorElement.prototype?function(R,N,j){var J=M.URL||M.webkitURL,te=document.createElement("a");N=N||R.name||"download",te.download=N,te.rel="noopener",typeof R=="string"?(te.href=R,te.origin===location.origin?_(te):w(te.href)?y(R,N,j):_(te,te.target="_blank")):(te.href=J.createObjectURL(R),setTimeout(function(){J.revokeObjectURL(te.href)},4e4),setTimeout(function(){_(te)},0))}:"msSaveOrOpenBlob"in navigator?function(R,N,j){if(N=N||R.name||"download",typeof R!="string")navigator.msSaveOrOpenBlob(function(te,ae){return ae===void 0?ae={autoBom:!1}:typeof ae!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),ae={autoBom:!ae}),ae.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(te.type)?new Blob(["\uFEFF",te],{type:te.type}):te}(R,j),N);else if(w(R))y(R,N,j);else{var J=document.createElement("a");J.href=R,J.target="_blank",setTimeout(function(){_(J)})}}:function(R,N,j,J){if((J=J||open("","_blank"))&&(J.document.title=J.document.body.innerText="downloading..."),typeof R=="string")return y(R,N,j);var te=R.type==="application/octet-stream",ae=/constructor/i.test(M.HTMLElement)||M.safari,le=/CriOS\/[\d]+/.test(navigator.userAgent);if((le||te&&ae)&&typeof FileReader=="object"){var xe=new FileReader;xe.onloadend=function(){var K=xe.result;K=le?K:K.replace(/^data:[^;]*;/,"data:attachment/file;"),J?J.location.href=K:location=K,J=null},xe.readAsDataURL(R)}else{var G=M.URL||M.webkitURL,I=G.createObjectURL(R);J?J.location=I:location.href=I,J=null,setTimeout(function(){G.revokeObjectURL(I)},4e4)}});M.saveAs=k.saveAs=k,d.exports=k})()}),u=L.Control.extend({options:{cropImageByInnerWH:!0,hidden:!1,domtoimageOptions:{},position:"topleft",screenName:"screen",iconUrl:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+",hideElementsWithSelectors:[".leaflet-control-container"],onCropBorderSize:2,caption:null,captionFontSize:15,captionFont:"Arial",captionColor:"black",captionBgColor:"white",captionOffset:5,mimeType:"image/png",debugMode:!1,preventDownload:!1,onPixelDataFail:function(d){var m=d.node,y=d.error;return console.warn("Map node is very big "+m.scrollWidth+"x"+m.scrollHeight),console.warn(`Add function: SimpleMapScreenshoter({
              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {
                 // Solutions:
                 // decrease size of map
                 // or decrease zoom level
                 // or remove elements with big distanses
                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap
                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)
              }
            })`),Promise.reject(y)}},onAdd:function(){return this._container=L.DomUtil.create("div","leaflet-control-simpleMapScreenshoter"),this._link=null,this._screenState={status:1,promise:null},this.options.hidden===!1&&this._addScreenBtn(),this._onUserStartInteractWithMap=this._onUserStartInteractWithMap.bind(this),this._onUserEndInteractWithMap=this._onUserEndInteractWithMap.bind(this),this._map.on("zoomstart",this._onUserStartInteractWithMap),this._map.on("move",this._onUserStartInteractWithMap),this._map.on("zoomend",this._onUserEndInteractWithMap),this._map.on("moveend",this._onUserEndInteractWithMap),this._container},takeScreen:function(){var d=this,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"blob",y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},w={};for(var _ in this.options)y.hasOwnProperty(_)?w[_]=y[_]:w[_]=this.options[_];return this._screenState.status===2?this._screenState.promise:(this._map.fire("simpleMapScreenshoter.takeScreen"),this._screenState.status=2,this._setElementsVisible(!1),this._screenState.promise=this._waitEndOfInteractions().then(function(){return d._getPixelData(w)}).then(function(M){return d._setElementsVisible(!0),d._toCanvas(M,w)}).then(function(M){return m==="image"?d._canvasToImage(M,w):m==="canvas"?M:d._canvasToBlob(M,w)}).then(function(M){return d._screenState.status=1,d._map.fire("simpleMapScreenshoter.done"),M}).catch(function(M){return d._setElementsVisible(!0),d._screenState.status=1,d._map.fire("simpleMapScreenshoter.error",{e:M}),Promise.reject(M)}),this._screenState.promise)},_setElementsVisible:function(){var d=this,m=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.hideElementsWithSelectors.forEach(function(y){var w=d._map._container.querySelectorAll(y),_=!0,M=!1,k=void 0;try{for(var R,N=w[Symbol.iterator]();!(_=(R=N.next()).done);_=!0)R.value.style.opacity=m===!1?0:1}catch(j){M=!0,k=j}finally{try{!_&&N.return&&N.return()}finally{if(M)throw k}}})},_canvasToImage:function(d,m){var y=m.mimeType,w=d.toDataURL(y);return w.indexOf("base64")===-1?Promise.reject(new Error("Base64 image generation error")):Promise.resolve(w)},_canvasToBlob:function(d,m){var y=m.mimeType;return new Promise(function(w,_){d.toBlob(function(M){w(M)},y)})},_toCanvas:function(d,m){var y=m.captionOffset,w=m.caption,_=m.captionFontSize,M=m.captionFont,k=m.captionColor,R=m.captionBgColor,N=this._node,j=N.screenHeight,J=N.screenWidth,te=document.createElement("canvas");te.width=J,te.height=j;for(var ae=te.getContext("2d"),le=ae.createImageData(J,j),xe=0;xe<d.length;++xe)le.data[xe]=d[xe];ae.putImageData(le,0,0),le=null;var G=document.createElement("canvas"),I=G.getContext("2d"),K=0,$=0,O=j,z=J;if(this.options.cropImageByInnerWH===!0){for(var V=[],W=0,q=0;q<j;++q){W=0;for(var X=0;X<J;++X)d[4*q*J+4*X+4]===0&&W++;W===J&&V.push(q)}var Y=this._getMinAndMaxOnValuesBreak(V);K=Y.min;for(var me=J,Se=Y.max,Re=[],T=0,ne=$;ne<me;++ne){T=0;for(var fe=0;fe<j;++fe)d[4*fe*J+4*ne+4]===0&&T++;T===j&&Re.push(ne)}var ce=this._getMinAndMaxOnValuesBreak(Re);$=ce.min,me=ce.max,($===0&&me===0||me===null)&&(me=J),(K===0&&Se===0||Se===null)&&(Se=j),this.options.debugMode===!0&&(console.log("emptyYLine",V),console.log("minMaxY",Y),console.log("emptyXLine",Re),console.log("minMaxX",ce),console.log("debugX",{}),console.log("debugY",{})),K===0&&Se===j&&$===0&&me===J||(K+=this.options.onCropBorderSize,Se-=this.options.onCropBorderSize,$+=this.options.onCropBorderSize,me-=this.options.onCropBorderSize),O=Se-K,z=me-$,G.width=z,G.height=O}else G.width=z,G.height=O;var ye=null;return w&&(ye=typeof w=="function"?w.call(this):w),ye!==null&&(G.height=G.height+(y+_+y),I.beginPath(),I.rect(0,0,G.width,G.height),I.fillStyle=R,I.fill(),I.save()),I.drawImage(te,$,K,z,O,0,0,z,O),ye!==null&&(I.font=_+"px "+M,I.fillStyle=k,I.fillText(ye,y,O+y+_)),Promise.resolve(G)},_getMinAndMaxOnValuesBreak:function(d){for(var m=0,y=0,w=!1,_=1;_<d.length;_++){if(d[_]-1!==d[_-1]){y=d[_],w=!0;break}m=d[_]}return w===!1&&d[0]>1?(m=0,y=d[0]):w===!1&&(m=d[d.length-1]||0,y=null),{min:m,max:y}},_getPixelData:function(d){var m=this,y=d.domtoimageOptions,w=y===void 0?{}:y;return this._getPixelDataOfNormalMap(w).catch(function(_){return console.warn("May be map size very big on that zoom level, we have error:",_.toString()),console.warn("You can manually hide map elements with large distances between them for fix that warn"),m._getPixelDataOfBigMap(w)})},_getPixelDataOfNormalMap:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=this._map.getContainer();return this._node={node:m,screenHeight:m.scrollHeight,screenWidth:m.scrollWidth},o.toPixelData(m,d)},_getPixelDataOfBigMap:function(){var d=this,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=this._map.getContainer(),w=this._map.getPane("mapPane");w.style.width=2*y.clientWidth+"px",w.style.height=2*y.clientHeight+"px",w.style.overflow="hidden";var _=function(){w.style.width="initial",w.style.height="initial",w.style.overflow="initial"};return this._node={node:y,screenHeight:y.scrollHeight,screenWidth:y.scrollWidth},o.toPixelData(y,m).then(function(M){return _(),M}).catch(function(M){return _(),y.scrollHeight>=4e3||y.scrollWidth>=4e3?d.options.onPixelDataFail({plugin:d,node:y,mapPane:w,error:M,domtoimageOptions:m}):Promise.reject(M)})},_addScreenBtn:function(){this._link=L.DomUtil.create("a","leaflet-control-simpleMapScreenshoter-btn",this._container),this._addCss(),L.DomEvent.addListener(this._link,"click",this._onScreenBtn,this),L.DomEvent.disableClickPropagation(this._link)},_addCss:function(){var d=`
    .leaflet-control-simpleMapScreenshoter{
       border: 2px solid rgba(0,0,0,0.2);
       background-clip: padding-box;
    }
    .leaflet-control-simpleMapScreenshoter a{
       background-color: #fff;
       border-bottom: 1px solid #ccc;
       width: 30px;
       height: 30px;
       line-height: 30px;
       display: block;
       text-align: center;
       text-decoration: none;
       color: black;
       overflow: hidden;
       border-radius: 2px;
       background-image: url('`+this.options.iconUrl+`');
       background-position: 46% 41%;
       background-repeat: no-repeat;
       background-size: 63%;
    }
    .leaflet-control-simpleMapScreenshoter a:hover{
       cursor: pointer;
    }
    `,m=document.head||document.getElementsByTagName("head")[0],y=document.createElement("style");y.appendChild(document.createTextNode(d)),m.appendChild(y)},_onScreenBtn:function(){var d=this;this._map.fire("simpleMapScreenshoter.click"),this.options.preventDownload||this.takeScreen().then(function(m){var y=typeof d.options.screenName=="function"?d.options.screenName.call(d):d.options.screenName;s.saveAs(m,y+".png")}).catch(function(m){d._map.fire("simpleMapScreenshoter.error",{e:m})})},_onUserStartInteractWithMap:function(){this._interaction=!0},_onUserEndInteractWithMap:function(){this._interaction=!1},_waitEndOfInteractions:function(){var d=this;return new Promise(function(m){var y=setInterval(function(){d._interaction||(m(),clearInterval(y))},100)})}}),f=(L.Control.SimpleMapScreenshoter=u,L.simpleMapScreenshoter=function(d){return new L.Control.SimpleMapScreenshoter(d)},u);n.default=f,n.SimpleMapScreenshoter=u,Object.defineProperty(n,"__esModule",{value:!0})})})(sb,sb.exports);var Ja=63710088e-1,nx={centimeters:Ja*100,centimetres:Ja*100,degrees:360/(2*Math.PI),feet:Ja*3.28084,inches:Ja*39.37,kilometers:Ja/1e3,kilometres:Ja/1e3,meters:Ja,metres:Ja,miles:Ja/1609.344,millimeters:Ja*1e3,millimetres:Ja*1e3,nauticalmiles:Ja/1852,radians:1,yards:Ja*1.0936};function od(e,t,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function hg(e,t,n={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ob(e[0])||!ob(e[1]))throw new Error("coordinates must contain numbers");return od({type:"Point",coordinates:e},t,n)}function hu(e,t,n={}){for(const i of e){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let o=0;o<i[i.length-1].length;o++)if(i[i.length-1][o]!==i[0][o])throw new Error("First and last Position are not equivalent.")}return od({type:"Polygon",coordinates:e},t,n)}function du(e,t,n={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return od({type:"LineString",coordinates:e},t,n)}function wB(e,t={}){const n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function xB(e,t,n={}){return od({type:"MultiPolygon",coordinates:e},t,n)}function LB(e,t="kilometers"){const n=nx[t];if(!n)throw new Error(t+" units is invalid");return e*n}function SB(e,t="kilometers"){const n=nx[t];if(!n)throw new Error(t+" units is invalid");return e/n}function u1(e){return e%(2*Math.PI)*180/Math.PI}function zu(e){return e%360*Math.PI/180}function ob(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function ab(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function CB(e){return e.type==="Feature"?e.geometry:e}function rx(e,t,n={}){if(n.final===!0)return EB(e,t);const r=ab(e),i=ab(t),o=zu(r[0]),s=zu(i[0]),u=zu(r[1]),f=zu(i[1]),d=Math.sin(s-o)*Math.cos(f),m=Math.cos(u)*Math.sin(f)-Math.sin(u)*Math.cos(f)*Math.cos(s-o);return u1(Math.atan2(d,m))}function EB(e,t){let n=rx(t,e);return n=(n+180)%360,n}function PB(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function dy(e,t,n,r={}){const i=PB(e),o=zu(i[0]),s=zu(i[1]),u=zu(n),f=SB(t,r.units),d=Math.asin(Math.sin(s)*Math.cos(f)+Math.cos(s)*Math.sin(f)*Math.cos(u)),m=o+Math.atan2(Math.sin(u)*Math.sin(f)*Math.cos(s),Math.cos(f)-Math.sin(s)*Math.sin(d)),y=u1(m),w=u1(d);return hg([y,w],r.properties)}var lb=dy;function ub(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function py(e,t,n={}){var r=ub(e),i=ub(t),o=zu(i[1]-r[1]),s=zu(i[0]-r[0]),u=zu(r[1]),f=zu(i[1]),d=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(u)*Math.cos(f);return LB(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)),n.units)}var nv=py;function MB(e,t,n={}){const i=CB(e).coordinates;let o=0;for(let s=0;s<i.length&&!(t>=o&&s===i.length-1);s++)if(o>=t){const u=t-o;if(u){const f=rx(i[s],i[s-1])-180;return dy(i[s],u,f,n)}else return hg(i[s])}else o+=py(i[s],i[s+1],n);return hg(i[i.length-1])}var c1=MB;function AB(e,t){var n,r,i,o,s,u,f,d,m,y,w=0,_=e.type==="FeatureCollection",M=e.type==="Feature",k=_?e.features.length:1;for(n=0;n<k;n++){for(u=_?e.features[n].geometry:M?e.geometry:e,d=_?e.features[n].properties:M?e.properties:{},m=_?e.features[n].bbox:M?e.bbox:void 0,y=_?e.features[n].id:M?e.id:void 0,f=u?u.type==="GeometryCollection":!1,s=f?u.geometries.length:1,i=0;i<s;i++){if(o=f?u.geometries[i]:u,o===null){if(t(null,w,d,m,y)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(o,w,d,m,y)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<o.geometries.length;r++)if(t(o.geometries[r],w,d,m,y)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}w++}}function kB(e,t,n){var r=n;return AB(e,function(i,o,s,u,f){o===0&&n===void 0?r=i:r=t(r,i,o,s,u,f)}),r}function ix(e){return kB(e,(t,n)=>t+TB(n),0)}function TB(e){let t=0,n;switch(e.type){case"Polygon":return cb(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)t+=cb(e.coordinates[n]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function cb(e){let t=0;if(e&&e.length>0){t+=Math.abs(fb(e[0]));for(let n=1;n<e.length;n++)t-=Math.abs(fb(e[n]))}return t}var DB=Ja*Ja/2,rv=Math.PI/180;function fb(e){const t=e.length-1;if(t<=2)return 0;let n=0,r=0;for(;r<t;){const i=e[r],o=e[r+1===t?0:r+1],s=e[r+2>=t?(r+2)%t:r+2],u=i[0]*rv,f=o[1]*rv,d=s[0]*rv;n+=(d-u)*Math.sin(f),r++}return n*DB}var rc=ix;function sx(e,t,n){if(e!==null)for(var r,i,o,s,u,f,d,m=0,y=0,w,_=e.type,M=_==="FeatureCollection",k=_==="Feature",R=M?e.features.length:1,N=0;N<R;N++){d=M?e.features[N].geometry:k?e.geometry:e,w=d?d.type==="GeometryCollection":!1,u=w?d.geometries.length:1;for(var j=0;j<u;j++){var J=0,te=0;if(s=w?d.geometries[j]:d,s!==null){f=s.coordinates;var ae=s.type;switch(m=ae==="Polygon"||ae==="MultiPolygon"?1:0,ae){case null:break;case"Point":if(t(f,y,N,J,te)===!1)return!1;y++,J++;break;case"LineString":case"MultiPoint":for(r=0;r<f.length;r++){if(t(f[r],y,N,J,te)===!1)return!1;y++,ae==="MultiPoint"&&J++}ae==="LineString"&&J++;break;case"Polygon":case"MultiLineString":for(r=0;r<f.length;r++){for(i=0;i<f[r].length-m;i++){if(t(f[r][i],y,N,J,te)===!1)return!1;y++}ae==="MultiLineString"&&J++,ae==="Polygon"&&te++}ae==="Polygon"&&J++;break;case"MultiPolygon":for(r=0;r<f.length;r++){for(te=0,i=0;i<f[r].length;i++){for(o=0;o<f[r][i].length-m;o++){if(t(f[r][i][o],y,N,J,te)===!1)return!1;y++}te++}J++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(sx(s.geometries[r],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function BB(e,t={}){let n=0,r=0,i=0;return sx(e,function(o){n+=o[0],r+=o[1],i++}),hg([n/i,r/i],t.properties)}var np=BB;function NB(e,t,n={}){const r=n.steps||64,i=n.properties?n.properties:!Array.isArray(e)&&e.type==="Feature"&&e.properties?e.properties:{},o=[];for(let s=0;s<r;s++)o.push(dy(e,t,s*-360/r,n).geometry.coordinates);return o.push(o[0]),hu([o],i)}var OB=NB,IB=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,iv=Math.ceil,cu=Math.floor,bl="[BigNumber Error] ",hb=bl+"Number primitive has more than 15 significant digits: ",Tu=1e14,Qr=14,db=9007199254740991,sv=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],nf=1e7,$l=1e9;function ox(e){var t,n,r,i=j.prototype={constructor:j,toString:null,valueOf:null},o=new j(1),s=20,u=4,f=-7,d=21,m=-1e7,y=1e7,w=!1,_=1,M=0,k={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},R="0123456789abcdefghijklmnopqrstuvwxyz",N=!0;function j(G,I){var K,$,O,z,V,W,q,X,Y=this;if(!(Y instanceof j))return new j(G,I);if(I==null){if(G&&G._isBigNumber===!0){Y.s=G.s,!G.c||G.e>y?Y.c=Y.e=null:G.e<m?Y.c=[Y.e=0]:(Y.e=G.e,Y.c=G.c.slice());return}if((W=typeof G=="number")&&G*0==0){if(Y.s=1/G<0?(G=-G,-1):1,G===~~G){for(z=0,V=G;V>=10;V/=10,z++);z>y?Y.c=Y.e=null:(Y.e=z,Y.c=[G]);return}X=String(G)}else{if(!IB.test(X=String(G)))return r(Y,X,W);Y.s=X.charCodeAt(0)==45?(X=X.slice(1),-1):1}(z=X.indexOf("."))>-1&&(X=X.replace(".","")),(V=X.search(/e/i))>0?(z<0&&(z=V),z+=+X.slice(V+1),X=X.substring(0,V)):z<0&&(z=X.length)}else{if(qs(I,2,R.length,"Base"),I==10&&N)return Y=new j(G),le(Y,s+Y.e+1,u);if(X=String(G),W=typeof G=="number"){if(G*0!=0)return r(Y,X,W,I);if(Y.s=1/G<0?(X=X.slice(1),-1):1,j.DEBUG&&X.replace(/^0\.0*|\./,"").length>15)throw Error(hb+G)}else Y.s=X.charCodeAt(0)===45?(X=X.slice(1),-1):1;for(K=R.slice(0,I),z=V=0,q=X.length;V<q;V++)if(K.indexOf($=X.charAt(V))<0){if($=="."){if(V>z){z=q;continue}}else if(!O&&(X==X.toUpperCase()&&(X=X.toLowerCase())||X==X.toLowerCase()&&(X=X.toUpperCase()))){O=!0,V=-1,z=0;continue}return r(Y,String(G),W,I)}W=!1,X=n(X,I,10,Y.s),(z=X.indexOf("."))>-1?X=X.replace(".",""):z=X.length}for(V=0;X.charCodeAt(V)===48;V++);for(q=X.length;X.charCodeAt(--q)===48;);if(X=X.slice(V,++q)){if(q-=V,W&&j.DEBUG&&q>15&&(G>db||G!==cu(G)))throw Error(hb+Y.s*G);if((z=z-V-1)>y)Y.c=Y.e=null;else if(z<m)Y.c=[Y.e=0];else{if(Y.e=z,Y.c=[],V=(z+1)%Qr,z<0&&(V+=Qr),V<q){for(V&&Y.c.push(+X.slice(0,V)),q-=Qr;V<q;)Y.c.push(+X.slice(V,V+=Qr));V=Qr-(X=X.slice(V)).length}else V-=q;for(;V--;X+="0");Y.c.push(+X)}}else Y.c=[Y.e=0]}j.clone=ox,j.ROUND_UP=0,j.ROUND_DOWN=1,j.ROUND_CEIL=2,j.ROUND_FLOOR=3,j.ROUND_HALF_UP=4,j.ROUND_HALF_DOWN=5,j.ROUND_HALF_EVEN=6,j.ROUND_HALF_CEIL=7,j.ROUND_HALF_FLOOR=8,j.EUCLID=9,j.config=j.set=function(G){var I,K;if(G!=null)if(typeof G=="object"){if(G.hasOwnProperty(I="DECIMAL_PLACES")&&(K=G[I],qs(K,0,$l,I),s=K),G.hasOwnProperty(I="ROUNDING_MODE")&&(K=G[I],qs(K,0,8,I),u=K),G.hasOwnProperty(I="EXPONENTIAL_AT")&&(K=G[I],K&&K.pop?(qs(K[0],-1e9,0,I),qs(K[1],0,$l,I),f=K[0],d=K[1]):(qs(K,-1e9,$l,I),f=-(d=K<0?-K:K))),G.hasOwnProperty(I="RANGE"))if(K=G[I],K&&K.pop)qs(K[0],-1e9,-1,I),qs(K[1],1,$l,I),m=K[0],y=K[1];else if(qs(K,-1e9,$l,I),K)m=-(y=K<0?-K:K);else throw Error(bl+I+" cannot be zero: "+K);if(G.hasOwnProperty(I="CRYPTO"))if(K=G[I],K===!!K)if(K)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))w=K;else throw w=!K,Error(bl+"crypto unavailable");else w=K;else throw Error(bl+I+" not true or false: "+K);if(G.hasOwnProperty(I="MODULO_MODE")&&(K=G[I],qs(K,0,9,I),_=K),G.hasOwnProperty(I="POW_PRECISION")&&(K=G[I],qs(K,0,$l,I),M=K),G.hasOwnProperty(I="FORMAT"))if(K=G[I],typeof K=="object")k=K;else throw Error(bl+I+" not an object: "+K);if(G.hasOwnProperty(I="ALPHABET"))if(K=G[I],typeof K=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(K))N=K.slice(0,10)=="0123456789",R=K;else throw Error(bl+I+" invalid: "+K)}else throw Error(bl+"Object expected: "+G);return{DECIMAL_PLACES:s,ROUNDING_MODE:u,EXPONENTIAL_AT:[f,d],RANGE:[m,y],CRYPTO:w,MODULO_MODE:_,POW_PRECISION:M,FORMAT:k,ALPHABET:R}},j.isBigNumber=function(G){if(!G||G._isBigNumber!==!0)return!1;if(!j.DEBUG)return!0;var I,K,$=G.c,O=G.e,z=G.s;e:if({}.toString.call($)=="[object Array]"){if((z===1||z===-1)&&O>=-1e9&&O<=$l&&O===cu(O)){if($[0]===0){if(O===0&&$.length===1)return!0;break e}if(I=(O+1)%Qr,I<1&&(I+=Qr),String($[0]).length==I){for(I=0;I<$.length;I++)if(K=$[I],K<0||K>=Tu||K!==cu(K))break e;if(K!==0)return!0}}}else if($===null&&O===null&&(z===null||z===1||z===-1))return!0;throw Error(bl+"Invalid BigNumber: "+G)},j.maximum=j.max=function(){return te(arguments,-1)},j.minimum=j.min=function(){return te(arguments,1)},j.random=function(){var G=9007199254740992,I=Math.random()*G&2097151?function(){return cu(Math.random()*G)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(K){var $,O,z,V,W,q=0,X=[],Y=new j(o);if(K==null?K=s:qs(K,0,$l),V=iv(K/Qr),w)if(crypto.getRandomValues){for($=crypto.getRandomValues(new Uint32Array(V*=2));q<V;)W=$[q]*131072+($[q+1]>>>11),W>=9e15?(O=crypto.getRandomValues(new Uint32Array(2)),$[q]=O[0],$[q+1]=O[1]):(X.push(W%1e14),q+=2);q=V/2}else if(crypto.randomBytes){for($=crypto.randomBytes(V*=7);q<V;)W=($[q]&31)*281474976710656+$[q+1]*1099511627776+$[q+2]*4294967296+$[q+3]*16777216+($[q+4]<<16)+($[q+5]<<8)+$[q+6],W>=9e15?crypto.randomBytes(7).copy($,q):(X.push(W%1e14),q+=7);q=V/7}else throw w=!1,Error(bl+"crypto unavailable");if(!w)for(;q<V;)W=I(),W<9e15&&(X[q++]=W%1e14);for(V=X[--q],K%=Qr,V&&K&&(W=sv[Qr-K],X[q]=cu(V/W)*W);X[q]===0;X.pop(),q--);if(q<0)X=[z=0];else{for(z=-1;X[0]===0;X.splice(0,1),z-=Qr);for(q=1,W=X[0];W>=10;W/=10,q++);q<Qr&&(z-=Qr-q)}return Y.e=z,Y.c=X,Y}}(),j.sum=function(){for(var G=1,I=arguments,K=new j(I[0]);G<I.length;)K=K.plus(I[G++]);return K},n=function(){var G="0123456789";function I(K,$,O,z){for(var V,W=[0],q,X=0,Y=K.length;X<Y;){for(q=W.length;q--;W[q]*=$);for(W[0]+=z.indexOf(K.charAt(X++)),V=0;V<W.length;V++)W[V]>O-1&&(W[V+1]==null&&(W[V+1]=0),W[V+1]+=W[V]/O|0,W[V]%=O)}return W.reverse()}return function(K,$,O,z,V){var W,q,X,Y,me,Se,Re,T,ne=K.indexOf("."),fe=s,ce=u;for(ne>=0&&(Y=M,M=0,K=K.replace(".",""),T=new j($),Se=T.pow(K.length-ne),M=Y,T.c=I(Nc(lu(Se.c),Se.e,"0"),10,O,G),T.e=T.c.length),Re=I(K,$,O,V?(W=R,G):(W=G,R)),X=Y=Re.length;Re[--Y]==0;Re.pop());if(!Re[0])return W.charAt(0);if(ne<0?--X:(Se.c=Re,Se.e=X,Se.s=z,Se=t(Se,T,fe,ce,O),Re=Se.c,me=Se.r,X=Se.e),q=X+fe+1,ne=Re[q],Y=O/2,me=me||q<0||Re[q+1]!=null,me=ce<4?(ne!=null||me)&&(ce==0||ce==(Se.s<0?3:2)):ne>Y||ne==Y&&(ce==4||me||ce==6&&Re[q-1]&1||ce==(Se.s<0?8:7)),q<1||!Re[0])K=me?Nc(W.charAt(1),-fe,W.charAt(0)):W.charAt(0);else{if(Re.length=q,me)for(--O;++Re[--q]>O;)Re[q]=0,q||(++X,Re=[1].concat(Re));for(Y=Re.length;!Re[--Y];);for(ne=0,K="";ne<=Y;K+=W.charAt(Re[ne++]));K=Nc(K,X,W.charAt(0))}return K}}(),t=function(){function G($,O,z){var V,W,q,X,Y=0,me=$.length,Se=O%nf,Re=O/nf|0;for($=$.slice();me--;)q=$[me]%nf,X=$[me]/nf|0,V=Re*q+X*Se,W=Se*q+V%nf*nf+Y,Y=(W/z|0)+(V/nf|0)+Re*X,$[me]=W%z;return Y&&($=[Y].concat($)),$}function I($,O,z,V){var W,q;if(z!=V)q=z>V?1:-1;else for(W=q=0;W<z;W++)if($[W]!=O[W]){q=$[W]>O[W]?1:-1;break}return q}function K($,O,z,V){for(var W=0;z--;)$[z]-=W,W=$[z]<O[z]?1:0,$[z]=W*V+$[z]-O[z];for(;!$[0]&&$.length>1;$.splice(0,1));}return function($,O,z,V,W){var q,X,Y,me,Se,Re,T,ne,fe,ce,ye,oe,B,ue,De,Me,We,Z=$.s==O.s?1:-1,de=$.c,ve=O.c;if(!de||!de[0]||!ve||!ve[0])return new j(!$.s||!O.s||(de?ve&&de[0]==ve[0]:!ve)?NaN:de&&de[0]==0||!ve?Z*0:Z/0);for(ne=new j(Z),fe=ne.c=[],X=$.e-O.e,Z=z+X+1,W||(W=Tu,X=fu($.e/Qr)-fu(O.e/Qr),Z=Z/Qr|0),Y=0;ve[Y]==(de[Y]||0);Y++);if(ve[Y]>(de[Y]||0)&&X--,Z<0)fe.push(1),me=!0;else{for(ue=de.length,Me=ve.length,Y=0,Z+=2,Se=cu(W/(ve[0]+1)),Se>1&&(ve=G(ve,Se,W),de=G(de,Se,W),Me=ve.length,ue=de.length),B=Me,ce=de.slice(0,Me),ye=ce.length;ye<Me;ce[ye++]=0);We=ve.slice(),We=[0].concat(We),De=ve[0],ve[1]>=W/2&&De++;do{if(Se=0,q=I(ve,ce,Me,ye),q<0){if(oe=ce[0],Me!=ye&&(oe=oe*W+(ce[1]||0)),Se=cu(oe/De),Se>1)for(Se>=W&&(Se=W-1),Re=G(ve,Se,W),T=Re.length,ye=ce.length;I(Re,ce,T,ye)==1;)Se--,K(Re,Me<T?We:ve,T,W),T=Re.length,q=1;else Se==0&&(q=Se=1),Re=ve.slice(),T=Re.length;if(T<ye&&(Re=[0].concat(Re)),K(ce,Re,ye,W),ye=ce.length,q==-1)for(;I(ve,ce,Me,ye)<1;)Se++,K(ce,Me<ye?We:ve,ye,W),ye=ce.length}else q===0&&(Se++,ce=[0]);fe[Y++]=Se,ce[0]?ce[ye++]=de[B]||0:(ce=[de[B]],ye=1)}while((B++<ue||ce[0]!=null)&&Z--);me=ce[0]!=null,fe[0]||fe.splice(0,1)}if(W==Tu){for(Y=1,Z=fe[0];Z>=10;Z/=10,Y++);le(ne,z+(ne.e=Y+X*Qr-1)+1,V,me)}else ne.e=X,ne.r=+me;return ne}}();function J(G,I,K,$){var O,z,V,W,q;if(K==null?K=u:qs(K,0,8),!G.c)return G.toString();if(O=G.c[0],V=G.e,I==null)q=lu(G.c),q=$==1||$==2&&(V<=f||V>=d)?g0(q,V):Nc(q,V,"0");else if(G=le(new j(G),I,K),z=G.e,q=lu(G.c),W=q.length,$==1||$==2&&(I<=z||z<=f)){for(;W<I;q+="0",W++);q=g0(q,z)}else if(I-=V,q=Nc(q,z,"0"),z+1>W){if(--I>0)for(q+=".";I--;q+="0");}else if(I+=z-W,I>0)for(z+1==W&&(q+=".");I--;q+="0");return G.s<0&&O?"-"+q:q}function te(G,I){for(var K,$,O=1,z=new j(G[0]);O<G.length;O++)$=new j(G[O]),(!$.s||(K=$f(z,$))===I||K===0&&z.s===I)&&(z=$);return z}function ae(G,I,K){for(var $=1,O=I.length;!I[--O];I.pop());for(O=I[0];O>=10;O/=10,$++);return(K=$+K*Qr-1)>y?G.c=G.e=null:K<m?G.c=[G.e=0]:(G.e=K,G.c=I),G}r=function(){var G=/^(-?)0([xbo])(?=\w[\w.]*$)/i,I=/^([^.]+)\.$/,K=/^\.([^.]+)$/,$=/^-?(Infinity|NaN)$/,O=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(z,V,W,q){var X,Y=W?V:V.replace(O,"");if($.test(Y))z.s=isNaN(Y)?null:Y<0?-1:1;else{if(!W&&(Y=Y.replace(G,function(me,Se,Re){return X=(Re=Re.toLowerCase())=="x"?16:Re=="b"?2:8,!q||q==X?Se:me}),q&&(X=q,Y=Y.replace(I,"$1").replace(K,"0.$1")),V!=Y))return new j(Y,X);if(j.DEBUG)throw Error(bl+"Not a"+(q?" base "+q:"")+" number: "+V);z.s=null}z.c=z.e=null}}();function le(G,I,K,$){var O,z,V,W,q,X,Y,me=G.c,Se=sv;if(me){e:{for(O=1,W=me[0];W>=10;W/=10,O++);if(z=I-O,z<0)z+=Qr,V=I,q=me[X=0],Y=cu(q/Se[O-V-1]%10);else if(X=iv((z+1)/Qr),X>=me.length)if($){for(;me.length<=X;me.push(0));q=Y=0,O=1,z%=Qr,V=z-Qr+1}else break e;else{for(q=W=me[X],O=1;W>=10;W/=10,O++);z%=Qr,V=z-Qr+O,Y=V<0?0:cu(q/Se[O-V-1]%10)}if($=$||I<0||me[X+1]!=null||(V<0?q:q%Se[O-V-1]),$=K<4?(Y||$)&&(K==0||K==(G.s<0?3:2)):Y>5||Y==5&&(K==4||$||K==6&&(z>0?V>0?q/Se[O-V]:0:me[X-1])%10&1||K==(G.s<0?8:7)),I<1||!me[0])return me.length=0,$?(I-=G.e+1,me[0]=Se[(Qr-I%Qr)%Qr],G.e=-I||0):me[0]=G.e=0,G;if(z==0?(me.length=X,W=1,X--):(me.length=X+1,W=Se[Qr-z],me[X]=V>0?cu(q/Se[O-V]%Se[V])*W:0),$)for(;;)if(X==0){for(z=1,V=me[0];V>=10;V/=10,z++);for(V=me[0]+=W,W=1;V>=10;V/=10,W++);z!=W&&(G.e++,me[0]==Tu&&(me[0]=1));break}else{if(me[X]+=W,me[X]!=Tu)break;me[X--]=0,W=1}for(z=me.length;me[--z]===0;me.pop());}G.e>y?G.c=G.e=null:G.e<m&&(G.c=[G.e=0])}return G}function xe(G){var I,K=G.e;return K===null?G.toString():(I=lu(G.c),I=K<=f||K>=d?g0(I,K):Nc(I,K,"0"),G.s<0?"-"+I:I)}return i.absoluteValue=i.abs=function(){var G=new j(this);return G.s<0&&(G.s=1),G},i.comparedTo=function(G,I){return $f(this,new j(G,I))},i.decimalPlaces=i.dp=function(G,I){var K,$,O,z=this;if(G!=null)return qs(G,0,$l),I==null?I=u:qs(I,0,8),le(new j(z),G+z.e+1,I);if(!(K=z.c))return null;if($=((O=K.length-1)-fu(this.e/Qr))*Qr,O=K[O])for(;O%10==0;O/=10,$--);return $<0&&($=0),$},i.dividedBy=i.div=function(G,I){return t(this,new j(G,I),s,u)},i.dividedToIntegerBy=i.idiv=function(G,I){return t(this,new j(G,I),0,1)},i.exponentiatedBy=i.pow=function(G,I){var K,$,O,z,V,W,q,X,Y,me=this;if(G=new j(G),G.c&&!G.isInteger())throw Error(bl+"Exponent not an integer: "+xe(G));if(I!=null&&(I=new j(I)),W=G.e>14,!me.c||!me.c[0]||me.c[0]==1&&!me.e&&me.c.length==1||!G.c||!G.c[0])return Y=new j(Math.pow(+xe(me),W?G.s*(2-p0(G)):+xe(G))),I?Y.mod(I):Y;if(q=G.s<0,I){if(I.c?!I.c[0]:!I.s)return new j(NaN);$=!q&&me.isInteger()&&I.isInteger(),$&&(me=me.mod(I))}else{if(G.e>9&&(me.e>0||me.e<-1||(me.e==0?me.c[0]>1||W&&me.c[1]>=24e7:me.c[0]<8e13||W&&me.c[0]<=9999975e7)))return z=me.s<0&&p0(G)?-0:0,me.e>-1&&(z=1/z),new j(q?1/z:z);M&&(z=iv(M/Qr+2))}for(W?(K=new j(.5),q&&(G.s=1),X=p0(G)):(O=Math.abs(+xe(G)),X=O%2),Y=new j(o);;){if(X){if(Y=Y.times(me),!Y.c)break;z?Y.c.length>z&&(Y.c.length=z):$&&(Y=Y.mod(I))}if(O){if(O=cu(O/2),O===0)break;X=O%2}else if(G=G.times(K),le(G,G.e+1,1),G.e>14)X=p0(G);else{if(O=+xe(G),O===0)break;X=O%2}me=me.times(me),z?me.c&&me.c.length>z&&(me.c.length=z):$&&(me=me.mod(I))}return $?Y:(q&&(Y=o.div(Y)),I?Y.mod(I):z?le(Y,M,u,V):Y)},i.integerValue=function(G){var I=new j(this);return G==null?G=u:qs(G,0,8),le(I,I.e+1,G)},i.isEqualTo=i.eq=function(G,I){return $f(this,new j(G,I))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(G,I){return $f(this,new j(G,I))>0},i.isGreaterThanOrEqualTo=i.gte=function(G,I){return(I=$f(this,new j(G,I)))===1||I===0},i.isInteger=function(){return!!this.c&&fu(this.e/Qr)>this.c.length-2},i.isLessThan=i.lt=function(G,I){return $f(this,new j(G,I))<0},i.isLessThanOrEqualTo=i.lte=function(G,I){return(I=$f(this,new j(G,I)))===-1||I===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(G,I){var K,$,O,z,V=this,W=V.s;if(G=new j(G,I),I=G.s,!W||!I)return new j(NaN);if(W!=I)return G.s=-I,V.plus(G);var q=V.e/Qr,X=G.e/Qr,Y=V.c,me=G.c;if(!q||!X){if(!Y||!me)return Y?(G.s=-I,G):new j(me?V:NaN);if(!Y[0]||!me[0])return me[0]?(G.s=-I,G):new j(Y[0]?V:u==3?-0:0)}if(q=fu(q),X=fu(X),Y=Y.slice(),W=q-X){for((z=W<0)?(W=-W,O=Y):(X=q,O=me),O.reverse(),I=W;I--;O.push(0));O.reverse()}else for($=(z=(W=Y.length)<(I=me.length))?W:I,W=I=0;I<$;I++)if(Y[I]!=me[I]){z=Y[I]<me[I];break}if(z&&(O=Y,Y=me,me=O,G.s=-G.s),I=($=me.length)-(K=Y.length),I>0)for(;I--;Y[K++]=0);for(I=Tu-1;$>W;){if(Y[--$]<me[$]){for(K=$;K&&!Y[--K];Y[K]=I);--Y[K],Y[$]+=Tu}Y[$]-=me[$]}for(;Y[0]==0;Y.splice(0,1),--X);return Y[0]?ae(G,Y,X):(G.s=u==3?-1:1,G.c=[G.e=0],G)},i.modulo=i.mod=function(G,I){var K,$,O=this;return G=new j(G,I),!O.c||!G.s||G.c&&!G.c[0]?new j(NaN):!G.c||O.c&&!O.c[0]?new j(O):(_==9?($=G.s,G.s=1,K=t(O,G,0,3),G.s=$,K.s*=$):K=t(O,G,0,_),G=O.minus(K.times(G)),!G.c[0]&&_==1&&(G.s=O.s),G)},i.multipliedBy=i.times=function(G,I){var K,$,O,z,V,W,q,X,Y,me,Se,Re,T,ne,fe,ce=this,ye=ce.c,oe=(G=new j(G,I)).c;if(!ye||!oe||!ye[0]||!oe[0])return!ce.s||!G.s||ye&&!ye[0]&&!oe||oe&&!oe[0]&&!ye?G.c=G.e=G.s=null:(G.s*=ce.s,!ye||!oe?G.c=G.e=null:(G.c=[0],G.e=0)),G;for($=fu(ce.e/Qr)+fu(G.e/Qr),G.s*=ce.s,q=ye.length,me=oe.length,q<me&&(T=ye,ye=oe,oe=T,O=q,q=me,me=O),O=q+me,T=[];O--;T.push(0));for(ne=Tu,fe=nf,O=me;--O>=0;){for(K=0,Se=oe[O]%fe,Re=oe[O]/fe|0,V=q,z=O+V;z>O;)X=ye[--V]%fe,Y=ye[V]/fe|0,W=Re*X+Y*Se,X=Se*X+W%fe*fe+T[z]+K,K=(X/ne|0)+(W/fe|0)+Re*Y,T[z--]=X%ne;T[z]=K}return K?++$:T.splice(0,1),ae(G,T,$)},i.negated=function(){var G=new j(this);return G.s=-G.s||null,G},i.plus=function(G,I){var K,$=this,O=$.s;if(G=new j(G,I),I=G.s,!O||!I)return new j(NaN);if(O!=I)return G.s=-I,$.minus(G);var z=$.e/Qr,V=G.e/Qr,W=$.c,q=G.c;if(!z||!V){if(!W||!q)return new j(O/0);if(!W[0]||!q[0])return q[0]?G:new j(W[0]?$:O*0)}if(z=fu(z),V=fu(V),W=W.slice(),O=z-V){for(O>0?(V=z,K=q):(O=-O,K=W),K.reverse();O--;K.push(0));K.reverse()}for(O=W.length,I=q.length,O-I<0&&(K=q,q=W,W=K,I=O),O=0;I;)O=(W[--I]=W[I]+q[I]+O)/Tu|0,W[I]=Tu===W[I]?0:W[I]%Tu;return O&&(W=[O].concat(W),++V),ae(G,W,V)},i.precision=i.sd=function(G,I){var K,$,O,z=this;if(G!=null&&G!==!!G)return qs(G,1,$l),I==null?I=u:qs(I,0,8),le(new j(z),G,I);if(!(K=z.c))return null;if(O=K.length-1,$=O*Qr+1,O=K[O]){for(;O%10==0;O/=10,$--);for(O=K[0];O>=10;O/=10,$++);}return G&&z.e+1>$&&($=z.e+1),$},i.shiftedBy=function(G){return qs(G,-9007199254740991,db),this.times("1e"+G)},i.squareRoot=i.sqrt=function(){var G,I,K,$,O,z=this,V=z.c,W=z.s,q=z.e,X=s+4,Y=new j("0.5");if(W!==1||!V||!V[0])return new j(!W||W<0&&(!V||V[0])?NaN:V?z:1/0);if(W=Math.sqrt(+xe(z)),W==0||W==1/0?(I=lu(V),(I.length+q)%2==0&&(I+="0"),W=Math.sqrt(+I),q=fu((q+1)/2)-(q<0||q%2),W==1/0?I="5e"+q:(I=W.toExponential(),I=I.slice(0,I.indexOf("e")+1)+q),K=new j(I)):K=new j(W+""),K.c[0]){for(q=K.e,W=q+X,W<3&&(W=0);;)if(O=K,K=Y.times(O.plus(t(z,O,X,1))),lu(O.c).slice(0,W)===(I=lu(K.c)).slice(0,W))if(K.e<q&&--W,I=I.slice(W-3,W+1),I=="9999"||!$&&I=="4999"){if(!$&&(le(O,O.e+s+2,0),O.times(O).eq(z))){K=O;break}X+=4,W+=4,$=1}else{(!+I||!+I.slice(1)&&I.charAt(0)=="5")&&(le(K,K.e+s+2,1),G=!K.times(K).eq(z));break}}return le(K,K.e+s+1,u,G)},i.toExponential=function(G,I){return G!=null&&(qs(G,0,$l),G++),J(this,G,I,1)},i.toFixed=function(G,I){return G!=null&&(qs(G,0,$l),G=G+this.e+1),J(this,G,I)},i.toFormat=function(G,I,K){var $,O=this;if(K==null)G!=null&&I&&typeof I=="object"?(K=I,I=null):G&&typeof G=="object"?(K=G,G=I=null):K=k;else if(typeof K!="object")throw Error(bl+"Argument not an object: "+K);if($=O.toFixed(G,I),O.c){var z,V=$.split("."),W=+K.groupSize,q=+K.secondaryGroupSize,X=K.groupSeparator||"",Y=V[0],me=V[1],Se=O.s<0,Re=Se?Y.slice(1):Y,T=Re.length;if(q&&(z=W,W=q,q=z,T-=z),W>0&&T>0){for(z=T%W||W,Y=Re.substr(0,z);z<T;z+=W)Y+=X+Re.substr(z,W);q>0&&(Y+=X+Re.slice(z)),Se&&(Y="-"+Y)}$=me?Y+(K.decimalSeparator||"")+((q=+K.fractionGroupSize)?me.replace(new RegExp("\\d{"+q+"}\\B","g"),"$&"+(K.fractionGroupSeparator||"")):me):Y}return(K.prefix||"")+$+(K.suffix||"")},i.toFraction=function(G){var I,K,$,O,z,V,W,q,X,Y,me,Se,Re=this,T=Re.c;if(G!=null&&(W=new j(G),!W.isInteger()&&(W.c||W.s!==1)||W.lt(o)))throw Error(bl+"Argument "+(W.isInteger()?"out of range: ":"not an integer: ")+xe(W));if(!T)return new j(Re);for(I=new j(o),X=K=new j(o),$=q=new j(o),Se=lu(T),z=I.e=Se.length-Re.e-1,I.c[0]=sv[(V=z%Qr)<0?Qr+V:V],G=!G||W.comparedTo(I)>0?z>0?I:X:W,V=y,y=1/0,W=new j(Se),q.c[0]=0;Y=t(W,I,0,1),O=K.plus(Y.times($)),O.comparedTo(G)!=1;)K=$,$=O,X=q.plus(Y.times(O=X)),q=O,I=W.minus(Y.times(O=I)),W=O;return O=t(G.minus(K),$,0,1),q=q.plus(O.times(X)),K=K.plus(O.times($)),q.s=X.s=Re.s,z=z*2,me=t(X,$,z,u).minus(Re).abs().comparedTo(t(q,K,z,u).minus(Re).abs())<1?[X,$]:[q,K],y=V,me},i.toNumber=function(){return+xe(this)},i.toPrecision=function(G,I){return G!=null&&qs(G,1,$l),J(this,G,I,2)},i.toString=function(G){var I,K=this,$=K.s,O=K.e;return O===null?$?(I="Infinity",$<0&&(I="-"+I)):I="NaN":(G==null?I=O<=f||O>=d?g0(lu(K.c),O):Nc(lu(K.c),O,"0"):G===10&&N?(K=le(new j(K),s+O+1,u),I=Nc(lu(K.c),K.e,"0")):(qs(G,2,R.length,"Base"),I=n(Nc(lu(K.c),O,"0"),10,G,$,!0)),$<0&&K.c[0]&&(I="-"+I)),I},i.valueOf=i.toJSON=function(){return xe(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,e!=null&&j.set(e),j}function fu(e){var t=e|0;return e>0||e===t?t:t-1}function lu(e){for(var t,n,r=1,i=e.length,o=e[0]+"";r<i;){for(t=e[r++]+"",n=Qr-t.length;n--;t="0"+t);o+=t}for(i=o.length;o.charCodeAt(--i)===48;);return o.slice(0,i+1||1)}function $f(e,t){var n,r,i=e.c,o=t.c,s=e.s,u=t.s,f=e.e,d=t.e;if(!s||!u)return null;if(n=i&&!i[0],r=o&&!o[0],n||r)return n?r?0:-u:s;if(s!=u)return s;if(n=s<0,r=f==d,!i||!o)return r?0:!i^n?1:-1;if(!r)return f>d^n?1:-1;for(u=(f=i.length)<(d=o.length)?f:d,s=0;s<u;s++)if(i[s]!=o[s])return i[s]>o[s]^n?1:-1;return f==d?0:f>d^n?1:-1}function qs(e,t,n,r){if(e<t||e>n||e!==cu(e))throw Error(bl+(r||"Argument")+(typeof e=="number"?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function p0(e){var t=e.c.length-1;return fu(e.e/Qr)==t&&e.c[t]%2!=0}function g0(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function Nc(e,t,n){var r,i;if(t<0){for(i=n+".";++t;i+=n);e=i+e}else if(r=e.length,++t>r){for(i=n,t-=r;--t;i+=n);e+=i}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}var cc=ox(),RB=class{constructor(e){Ht(this,"key");Ht(this,"left",null);Ht(this,"right",null);this.key=e}},Md=class extends RB{constructor(e){super(e)}},FB=class{constructor(){Ht(this,"size",0);Ht(this,"modificationCount",0);Ht(this,"splayCount",0)}splay(e){const t=this.root;if(t==null)return this.compare(e,e),-1;let n=null,r=null,i=null,o=null,s=t;const u=this.compare;let f;for(;;)if(f=u(s.key,e),f>0){let d=s.left;if(d==null||(f=u(d.key,e),f>0&&(s.left=d.right,d.right=s,s=d,d=s.left,d==null)))break;n==null?r=s:n.left=s,n=s,s=d}else if(f<0){let d=s.right;if(d==null||(f=u(d.key,e),f<0&&(s.right=d.left,d.left=s,s=d,d=s.right,d==null)))break;i==null?o=s:i.right=s,i=s,s=d}else break;return i!=null&&(i.right=s.left,s.left=o),n!=null&&(n.left=s.right,s.right=r),this.root!==s&&(this.root=s,this.splayCount++),f}splayMin(e){let t=e,n=t.left;for(;n!=null;){const r=n;t.left=r.right,r.right=t,t=r,n=t.left}return t}splayMax(e){let t=e,n=t.right;for(;n!=null;){const r=n;t.right=r.left,r.left=t,t=r,n=t.right}return t}_delete(e){if(this.root==null||this.splay(e)!=0)return null;let n=this.root;const r=n,i=n.left;if(this.size--,i==null)this.root=n.right;else{const o=n.right;n=this.splayMax(i),n.right=o,this.root=n}return this.modificationCount++,r}addNewRoot(e,t){this.size++,this.modificationCount++;const n=this.root;if(n==null){this.root=e;return}t<0?(e.left=n,e.right=n.right,n.right=null):(e.right=n,e.left=n.left,n.left=null),this.root=e}_first(){const e=this.root;return e==null?null:(this.root=this.splayMin(e),this.root)}_last(){const e=this.root;return e==null?null:(this.root=this.splayMax(e),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(e){return this.validKey(e)&&this.splay(e)==0}defaultCompare(){return(e,t)=>e<t?-1:e>t?1:0}wrap(){return{getRoot:()=>this.root,setRoot:e=>{this.root=e},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:e=>{this.splayCount=e},splay:e=>this.splay(e),has:e=>this.has(e)}}},tw,nw,dg=class Fd extends FB{constructor(n,r){super();Ht(this,"root",null);Ht(this,"compare");Ht(this,"validKey");Ht(this,tw,"[object Set]");this.compare=n??this.defaultCompare(),this.validKey=r??(i=>i!=null&&i!=null)}delete(n){return this.validKey(n)?this._delete(n)!=null:!1}deleteAll(n){for(const r of n)this.delete(r)}forEach(n){const r=this[Symbol.iterator]();let i;for(;i=r.next(),!i.done;)n(i.value,i.value,this)}add(n){const r=this.splay(n);return r!=0&&this.addNewRoot(new Md(n),r),this}addAndReturn(n){const r=this.splay(n);return r!=0&&this.addNewRoot(new Md(n),r),this.root.key}addAll(n){for(const r of n)this.add(r)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(n){if(n==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(n)<0)return this.root.key;let i=this.root.left;if(i==null)return null;let o=i.right;for(;o!=null;)i=o,o=i.right;return i.key}firstAfter(n){if(n==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(n)>0)return this.root.key;let i=this.root.right;if(i==null)return null;let o=i.left;for(;o!=null;)i=o,o=i.left;return i.key}retainAll(n){const r=new Fd(this.compare,this.validKey),i=this.modificationCount;for(const o of n){if(i!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(o)&&this.splay(o)==0&&r.add(this.root.key)}r.size!=this.size&&(this.root=r.root,this.size=r.size,this.modificationCount++)}lookup(n){return!this.validKey(n)||this.splay(n)!=0?null:this.root.key}intersection(n){const r=new Fd(this.compare,this.validKey);for(const i of this)n.has(i)&&r.add(i);return r}difference(n){const r=new Fd(this.compare,this.validKey);for(const i of this)n.has(i)||r.add(i);return r}union(n){const r=this.clone();return r.addAll(n),r}clone(){const n=new Fd(this.compare,this.validKey);return n.size=this.size,n.root=this.copyNode(this.root),n}copyNode(n){if(n==null)return null;function r(o,s){let u,f;do{if(u=o.left,f=o.right,u!=null){const d=new Md(u.key);s.left=d,r(u,d)}if(f!=null){const d=new Md(f.key);s.right=d,o=f,s=d}}while(f!=null)}const i=new Md(n.key);return r(n,i),i}toSet(){return this.clone()}entries(){return new zB(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(nw=Symbol.iterator,tw=Symbol.toStringTag,nw)](){return new jB(this.wrap())}},ax=class{constructor(e){Ht(this,"tree");Ht(this,"path",new Array);Ht(this,"modificationCount",null);Ht(this,"splayCount");this.tree=e,this.splayCount=e.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;const e=this.path[this.path.length-1];return this.getValue(e)}rebuildPath(e){this.path.splice(0,this.path.length),this.tree.splay(e),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(e){for(;e!=null;)this.path.push(e),e=e.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let n=this.tree.getRoot();for(;n!=null;)this.path.push(n),n=n.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let e=this.path[this.path.length-1],t=e.right;if(t!=null){for(;t!=null;)this.path.push(t),t=t.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===e;)e=this.path.pop();return this.path.length>0}},jB=class extends ax{getValue(e){return e.key}},zB=class extends ax{getValue(e){return[e.key,e.key]}},lx=e=>()=>e,f1=e=>{const t=e?(n,r)=>r.minus(n).abs().isLessThanOrEqualTo(e):lx(!1);return(n,r)=>t(n,r)?0:n.comparedTo(r)};function $B(e){const t=e?(n,r,i,o,s)=>n.exponentiatedBy(2).isLessThanOrEqualTo(o.minus(r).exponentiatedBy(2).plus(s.minus(i).exponentiatedBy(2)).times(e)):lx(!1);return(n,r,i)=>{const o=n.x,s=n.y,u=i.x,f=i.y,d=s.minus(f).times(r.x.minus(u)).minus(o.minus(u).times(r.y.minus(f)));return t(d,o,s,u,f)?0:d.comparedTo(0)}}var UB=e=>e,VB=e=>{if(e){const t=new dg(f1(e)),n=new dg(f1(e)),r=(o,s)=>s.addAndReturn(o),i=o=>({x:r(o.x,t),y:r(o.y,n)});return i({x:new cc(0),y:new cc(0)}),i}return UB},h1=e=>({set:t=>{Hc=h1(t)},reset:()=>h1(e),compare:f1(e),snap:VB(e),orient:$B(e)}),Hc=h1(),Ad=(e,t)=>e.ll.x.isLessThanOrEqualTo(t.x)&&t.x.isLessThanOrEqualTo(e.ur.x)&&e.ll.y.isLessThanOrEqualTo(t.y)&&t.y.isLessThanOrEqualTo(e.ur.y),d1=(e,t)=>{if(t.ur.x.isLessThan(e.ll.x)||e.ur.x.isLessThan(t.ll.x)||t.ur.y.isLessThan(e.ll.y)||e.ur.y.isLessThan(t.ll.y))return null;const n=e.ll.x.isLessThan(t.ll.x)?t.ll.x:e.ll.x,r=e.ur.x.isLessThan(t.ur.x)?e.ur.x:t.ur.x,i=e.ll.y.isLessThan(t.ll.y)?t.ll.y:e.ll.y,o=e.ur.y.isLessThan(t.ur.y)?e.ur.y:t.ur.y;return{ll:{x:n,y:i},ur:{x:r,y:o}}},I0=(e,t)=>e.x.times(t.y).minus(e.y.times(t.x)),ux=(e,t)=>e.x.times(t.x).plus(e.y.times(t.y)),pg=e=>ux(e,e).sqrt(),HB=(e,t,n)=>{const r={x:t.x.minus(e.x),y:t.y.minus(e.y)},i={x:n.x.minus(e.x),y:n.y.minus(e.y)};return I0(i,r).div(pg(i)).div(pg(r))},GB=(e,t,n)=>{const r={x:t.x.minus(e.x),y:t.y.minus(e.y)},i={x:n.x.minus(e.x),y:n.y.minus(e.y)};return ux(i,r).div(pg(i)).div(pg(r))},pb=(e,t,n)=>t.y.isZero()?null:{x:e.x.plus(t.x.div(t.y).times(n.minus(e.y))),y:n},gb=(e,t,n)=>t.x.isZero()?null:{x:n,y:e.y.plus(t.y.div(t.x).times(n.minus(e.x)))},qB=(e,t,n,r)=>{if(t.x.isZero())return gb(n,r,e.x);if(r.x.isZero())return gb(e,t,n.x);if(t.y.isZero())return pb(n,r,e.y);if(r.y.isZero())return pb(e,t,n.y);const i=I0(t,r);if(i.isZero())return null;const o={x:n.x.minus(e.x),y:n.y.minus(e.y)},s=I0(o,t).div(i),u=I0(o,r).div(i),f=e.x.plus(u.times(t.x)),d=n.x.plus(s.times(r.x)),m=e.y.plus(u.times(t.y)),y=n.y.plus(s.times(r.y)),w=f.plus(d).div(2),_=m.plus(y).div(2);return{x:w,y:_}},lc=class cx{constructor(t,n){Ht(this,"point");Ht(this,"isLeft");Ht(this,"segment");Ht(this,"otherSE");Ht(this,"consumedBy");t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=n}static compare(t,n){const r=cx.comparePoints(t.point,n.point);return r!==0?r:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:gg.compare(t.segment,n.segment))}static comparePoints(t,n){return t.x.isLessThan(n.x)?-1:t.x.isGreaterThan(n.x)?1:t.y.isLessThan(n.y)?-1:t.y.isGreaterThan(n.y)?1:0}link(t){if(t.point===this.point)throw new Error("Tried to link already linked events");const n=t.point.events;for(let r=0,i=n.length;r<i;r++){const o=n[r];this.point.events.push(o),o.point=this.point}this.checkForConsuming()}checkForConsuming(){const t=this.point.events.length;for(let n=0;n<t;n++){const r=this.point.events[n];if(r.segment.consumedBy===void 0)for(let i=n+1;i<t;i++){const o=this.point.events[i];o.consumedBy===void 0&&r.otherSE.point.events===o.otherSE.point.events&&r.segment.consume(o.segment)}}}getAvailableLinkedEvents(){const t=[];for(let n=0,r=this.point.events.length;n<r;n++){const i=this.point.events[n];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&t.push(i)}return t}getLeftmostComparator(t){const n=new Map,r=i=>{const o=i.otherSE;n.set(i,{sine:HB(this.point,t.point,o.point),cosine:GB(this.point,t.point,o.point)})};return(i,o)=>{n.has(i)||r(i),n.has(o)||r(o);const{sine:s,cosine:u}=n.get(i),{sine:f,cosine:d}=n.get(o);return s.isGreaterThanOrEqualTo(0)&&f.isGreaterThanOrEqualTo(0)?u.isLessThan(d)?1:u.isGreaterThan(d)?-1:0:s.isLessThan(0)&&f.isLessThan(0)?u.isLessThan(d)?-1:u.isGreaterThan(d)?1:0:f.isLessThan(s)?-1:f.isGreaterThan(s)?1:0}}},WB=class p1{constructor(t){Ht(this,"events");Ht(this,"poly");Ht(this,"_isExteriorRing");Ht(this,"_enclosingRing");this.events=t;for(let n=0,r=t.length;n<r;n++)t[n].segment.ringOut=this;this.poly=null}static factory(t){const n=[];for(let r=0,i=t.length;r<i;r++){const o=t[r];if(!o.isInResult()||o.ringOut)continue;let s=null,u=o.leftSE,f=o.rightSE;const d=[u],m=u.point,y=[];for(;s=u,u=f,d.push(u),u.point!==m;)for(;;){const w=u.getAvailableLinkedEvents();if(w.length===0){const k=d[0].point,R=d[d.length-1].point;throw new Error(`Unable to complete output ring starting at [${k.x}, ${k.y}]. Last matching segment found ends at [${R.x}, ${R.y}].`)}if(w.length===1){f=w[0].otherSE;break}let _=null;for(let k=0,R=y.length;k<R;k++)if(y[k].point===u.point){_=k;break}if(_!==null){const k=y.splice(_)[0],R=d.splice(k.index);R.unshift(R[0].otherSE),n.push(new p1(R.reverse()));continue}y.push({index:d.length,point:u.point});const M=u.getLeftmostComparator(s);f=w.sort(M)[0].otherSE;break}n.push(new p1(d))}return n}getGeom(){let t=this.events[0].point;const n=[t];for(let d=1,m=this.events.length-1;d<m;d++){const y=this.events[d].point,w=this.events[d+1].point;Hc.orient(y,t,w)!==0&&(n.push(y),t=y)}if(n.length===1)return null;const r=n[0],i=n[1];Hc.orient(r,t,i)===0&&n.shift(),n.push(n[0]);const o=this.isExteriorRing()?1:-1,s=this.isExteriorRing()?0:n.length-1,u=this.isExteriorRing()?n.length:-1,f=[];for(let d=s;d!=u;d+=o)f.push([n[d].x.toNumber(),n[d].y.toNumber()]);return f}isExteriorRing(){if(this._isExteriorRing===void 0){const t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var i,o;let t=this.events[0];for(let s=1,u=this.events.length;s<u;s++){const f=this.events[s];lc.compare(t,f)>0&&(t=f)}let n=t.segment.prevInResult(),r=n?n.prevInResult():null;for(;;){if(!n)return null;if(!r)return n.ringOut;if(r.ringOut!==n.ringOut)return((i=r.ringOut)==null?void 0:i.enclosingRing())!==n.ringOut?n.ringOut:(o=n.ringOut)==null?void 0:o.enclosingRing();n=r.prevInResult(),r=n?n.prevInResult():null}}},mb=class{constructor(e){Ht(this,"exteriorRing");Ht(this,"interiorRings");this.exteriorRing=e,e.poly=this,this.interiorRings=[]}addInterior(e){this.interiorRings.push(e),e.poly=this}getGeom(){const e=this.exteriorRing.getGeom();if(e===null)return null;const t=[e];for(let n=0,r=this.interiorRings.length;n<r;n++){const i=this.interiorRings[n].getGeom();i!==null&&t.push(i)}return t}},ZB=class{constructor(e){Ht(this,"rings");Ht(this,"polys");this.rings=e,this.polys=this._composePolys(e)}getGeom(){const e=[];for(let t=0,n=this.polys.length;t<n;t++){const r=this.polys[t].getGeom();r!==null&&e.push(r)}return e}_composePolys(e){var n;const t=[];for(let r=0,i=e.length;r<i;r++){const o=e[r];if(!o.poly)if(o.isExteriorRing())t.push(new mb(o));else{const s=o.enclosingRing();s!=null&&s.poly||t.push(new mb(s)),(n=s==null?void 0:s.poly)==null||n.addInterior(o)}}return t}},KB=class{constructor(e,t=gg.compare){Ht(this,"queue");Ht(this,"tree");Ht(this,"segments");this.queue=e,this.tree=new dg(t),this.segments=[]}process(e){const t=e.segment,n=[];if(e.consumedBy)return e.isLeft?this.queue.delete(e.otherSE):this.tree.delete(t),n;e.isLeft&&this.tree.add(t);let r=t,i=t;do r=this.tree.lastBefore(r);while(r!=null&&r.consumedBy!=null);do i=this.tree.firstAfter(i);while(i!=null&&i.consumedBy!=null);if(e.isLeft){let o=null;if(r){const u=r.getIntersection(t);if(u!==null&&(t.isAnEndpoint(u)||(o=u),!r.isAnEndpoint(u))){const f=this._splitSafely(r,u);for(let d=0,m=f.length;d<m;d++)n.push(f[d])}}let s=null;if(i){const u=i.getIntersection(t);if(u!==null&&(t.isAnEndpoint(u)||(s=u),!i.isAnEndpoint(u))){const f=this._splitSafely(i,u);for(let d=0,m=f.length;d<m;d++)n.push(f[d])}}if(o!==null||s!==null){let u=null;o===null?u=s:s===null?u=o:u=lc.comparePoints(o,s)<=0?o:s,this.queue.delete(t.rightSE),n.push(t.rightSE);const f=t.split(u);for(let d=0,m=f.length;d<m;d++)n.push(f[d])}n.length>0?(this.tree.delete(t),n.push(e)):(this.segments.push(t),t.prev=r)}else{if(r&&i){const o=r.getIntersection(i);if(o!==null){if(!r.isAnEndpoint(o)){const s=this._splitSafely(r,o);for(let u=0,f=s.length;u<f;u++)n.push(s[u])}if(!i.isAnEndpoint(o)){const s=this._splitSafely(i,o);for(let u=0,f=s.length;u<f;u++)n.push(s[u])}}}this.tree.delete(t)}return n}_splitSafely(e,t){this.tree.delete(e);const n=e.rightSE;this.queue.delete(n);const r=e.split(t);return r.push(n),e.consumedBy===void 0&&this.tree.add(e),r}},YB=class{constructor(){Ht(this,"type");Ht(this,"numMultiPolys")}run(e,t,n){jd.type=e;const r=[new yb(t,!0)];for(let d=0,m=n.length;d<m;d++)r.push(new yb(n[d],!1));if(jd.numMultiPolys=r.length,jd.type==="difference"){const d=r[0];let m=1;for(;m<r.length;)d1(r[m].bbox,d.bbox)!==null?m++:r.splice(m,1)}if(jd.type==="intersection")for(let d=0,m=r.length;d<m;d++){const y=r[d];for(let w=d+1,_=r.length;w<_;w++)if(d1(y.bbox,r[w].bbox)===null)return[]}const i=new dg(lc.compare);for(let d=0,m=r.length;d<m;d++){const y=r[d].getSweepEvents();for(let w=0,_=y.length;w<_;w++)i.add(y[w])}const o=new KB(i);let s=null;for(i.size!=0&&(s=i.first(),i.delete(s));s;){const d=o.process(s);for(let m=0,y=d.length;m<y;m++){const w=d[m];w.consumedBy===void 0&&i.add(w)}i.size!=0?(s=i.first(),i.delete(s)):s=null}Hc.reset();const u=WB.factory(o.segments);return new ZB(u).getGeom()}},jd=new YB,g1=jd,JB=0,gg=class R0{constructor(t,n,r,i){Ht(this,"id");Ht(this,"leftSE");Ht(this,"rightSE");Ht(this,"rings");Ht(this,"windings");Ht(this,"ringOut");Ht(this,"consumedBy");Ht(this,"prev");Ht(this,"_prevInResult");Ht(this,"_beforeState");Ht(this,"_afterState");Ht(this,"_isInResult");this.id=++JB,this.leftSE=t,t.segment=this,t.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=t,this.rings=r,this.windings=i}static compare(t,n){const r=t.leftSE.point.x,i=n.leftSE.point.x,o=t.rightSE.point.x,s=n.rightSE.point.x;if(s.isLessThan(r))return 1;if(o.isLessThan(i))return-1;const u=t.leftSE.point.y,f=n.leftSE.point.y,d=t.rightSE.point.y,m=n.rightSE.point.y;if(r.isLessThan(i)){if(f.isLessThan(u)&&f.isLessThan(d))return 1;if(f.isGreaterThan(u)&&f.isGreaterThan(d))return-1;const y=t.comparePoint(n.leftSE.point);if(y<0)return 1;if(y>0)return-1;const w=n.comparePoint(t.rightSE.point);return w!==0?w:-1}if(r.isGreaterThan(i)){if(u.isLessThan(f)&&u.isLessThan(m))return-1;if(u.isGreaterThan(f)&&u.isGreaterThan(m))return 1;const y=n.comparePoint(t.leftSE.point);if(y!==0)return y;const w=t.comparePoint(n.rightSE.point);return w<0?1:w>0?-1:1}if(u.isLessThan(f))return-1;if(u.isGreaterThan(f))return 1;if(o.isLessThan(s)){const y=n.comparePoint(t.rightSE.point);if(y!==0)return y}if(o.isGreaterThan(s)){const y=t.comparePoint(n.rightSE.point);if(y<0)return 1;if(y>0)return-1}if(!o.eq(s)){const y=d.minus(u),w=o.minus(r),_=m.minus(f),M=s.minus(i);if(y.isGreaterThan(w)&&_.isLessThan(M))return 1;if(y.isLessThan(w)&&_.isGreaterThan(M))return-1}return o.isGreaterThan(s)?1:o.isLessThan(s)||d.isLessThan(m)?-1:d.isGreaterThan(m)?1:t.id<n.id?-1:t.id>n.id?1:0}static fromRing(t,n,r){let i,o,s;const u=lc.comparePoints(t,n);if(u<0)i=t,o=n,s=1;else if(u>0)i=n,o=t,s=-1;else throw new Error(`Tried to create degenerate segment at [${t.x}, ${t.y}]`);const f=new lc(i,!0),d=new lc(o,!1);return new R0(f,d,[r],[s])}replaceRightSE(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const t=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t.isLessThan(n)?t:n},ur:{x:this.rightSE.point.x,y:t.isGreaterThan(n)?t:n}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(t){return t.x.eq(this.leftSE.point.x)&&t.y.eq(this.leftSE.point.y)||t.x.eq(this.rightSE.point.x)&&t.y.eq(this.rightSE.point.y)}comparePoint(t){return Hc.orient(this.leftSE.point,t,this.rightSE.point)}getIntersection(t){const n=this.bbox(),r=t.bbox(),i=d1(n,r);if(i===null)return null;const o=this.leftSE.point,s=this.rightSE.point,u=t.leftSE.point,f=t.rightSE.point,d=Ad(n,u)&&this.comparePoint(u)===0,m=Ad(r,o)&&t.comparePoint(o)===0,y=Ad(n,f)&&this.comparePoint(f)===0,w=Ad(r,s)&&t.comparePoint(s)===0;if(m&&d)return w&&!y?s:!w&&y?f:null;if(m)return y&&o.x.eq(f.x)&&o.y.eq(f.y)?null:o;if(d)return w&&s.x.eq(u.x)&&s.y.eq(u.y)?null:u;if(w&&y)return null;if(w)return s;if(y)return f;const _=qB(o,this.vector(),u,t.vector());return _===null||!Ad(i,_)?null:Hc.snap(_)}split(t){const n=[],r=t.events!==void 0,i=new lc(t,!0),o=new lc(t,!1),s=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);const u=new R0(i,s,this.rings.slice(),this.windings.slice());return lc.comparePoints(u.leftSE.point,u.rightSE.point)>0&&u.swapEvents(),lc.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}swapEvents(){const t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let n=0,r=this.windings.length;n<r;n++)this.windings[n]*=-1}consume(t){let n=this,r=t;for(;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;const i=R0.compare(n,r);if(i!==0){if(i>0){const o=n;n=r,r=o}if(n.prev===r){const o=n;n=r,r=o}for(let o=0,s=r.rings.length;o<s;o++){const u=r.rings[o],f=r.windings[o],d=n.rings.indexOf(u);d===-1?(n.rings.push(u),n.windings.push(f)):n.windings[d]+=f}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};const n=this._afterState.rings,r=this._afterState.windings,i=this._afterState.multiPolys;for(let u=0,f=this.rings.length;u<f;u++){const d=this.rings[u],m=this.windings[u],y=n.indexOf(d);y===-1?(n.push(d),r.push(m)):r[y]+=m}const o=[],s=[];for(let u=0,f=n.length;u<f;u++){if(r[u]===0)continue;const d=n[u],m=d.poly;if(s.indexOf(m)===-1)if(d.isExterior)o.push(m);else{s.indexOf(m)===-1&&s.push(m);const y=o.indexOf(d.poly);y!==-1&&o.splice(y,1)}}for(let u=0,f=o.length;u<f;u++){const d=o[u].multiPoly;i.indexOf(d)===-1&&i.push(d)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const t=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(g1.type){case"union":{const r=t.length===0,i=n.length===0;this._isInResult=r!==i;break}case"intersection":{let r,i;t.length<n.length?(r=t.length,i=n.length):(r=n.length,i=t.length),this._isInResult=i===g1.numMultiPolys&&r<i;break}case"xor":{const r=Math.abs(t.length-n.length);this._isInResult=r%2===1;break}case"difference":{const r=i=>i.length===1&&i[0].isSubject;this._isInResult=r(t)!==r(n);break}}return this._isInResult}},vb=class{constructor(e,t,n){Ht(this,"poly");Ht(this,"isExterior");Ht(this,"segments");Ht(this,"bbox");if(!Array.isArray(e)||e.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=t,this.isExterior=n,this.segments=[],typeof e[0][0]!="number"||typeof e[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const r=Hc.snap({x:new cc(e[0][0]),y:new cc(e[0][1])});this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};let i=r;for(let o=1,s=e.length;o<s;o++){if(typeof e[o][0]!="number"||typeof e[o][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const u=Hc.snap({x:new cc(e[o][0]),y:new cc(e[o][1])});u.x.eq(i.x)&&u.y.eq(i.y)||(this.segments.push(gg.fromRing(i,u,this)),u.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=u.x),u.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=u.y),u.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=u.x),u.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=u.y),i=u)}(!r.x.eq(i.x)||!r.y.eq(i.y))&&this.segments.push(gg.fromRing(i,r,this))}getSweepEvents(){const e=[];for(let t=0,n=this.segments.length;t<n;t++){const r=this.segments[t];e.push(r.leftSE),e.push(r.rightSE)}return e}},XB=class{constructor(e,t){Ht(this,"multiPoly");Ht(this,"exteriorRing");Ht(this,"interiorRings");Ht(this,"bbox");if(!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new vb(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let n=1,r=e.length;n<r;n++){const i=new vb(e[n],this,!1);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.interiorRings.push(i)}this.multiPoly=t}getSweepEvents(){const e=this.exteriorRing.getSweepEvents();for(let t=0,n=this.interiorRings.length;t<n;t++){const r=this.interiorRings[t].getSweepEvents();for(let i=0,o=r.length;i<o;i++)e.push(r[i])}return e}},yb=class{constructor(e,t){Ht(this,"isSubject");Ht(this,"polys");Ht(this,"bbox");if(!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof e[0][0][0]=="number"&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:new cc(Number.POSITIVE_INFINITY),y:new cc(Number.POSITIVE_INFINITY)},ur:{x:new cc(Number.NEGATIVE_INFINITY),y:new cc(Number.NEGATIVE_INFINITY)}};for(let n=0,r=e.length;n<r;n++){const i=new XB(e[n],this);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.polys.push(i)}this.isSubject=t}getSweepEvents(){const e=[];for(let t=0,n=this.polys.length;t<n;t++){const r=this.polys[t].getSweepEvents();for(let i=0,o=r.length;i<o;i++)e.push(r[i])}return e}},QB=(e,...t)=>g1.run("intersection",e,t);Hc.set;function eN(e,t){var n,r,i,o,s,u,f,d,m,y,w=0,_=e.type==="FeatureCollection",M=e.type==="Feature",k=_?e.features.length:1;for(n=0;n<k;n++){for(u=_?e.features[n].geometry:M?e.geometry:e,d=_?e.features[n].properties:M?e.properties:{},m=_?e.features[n].bbox:M?e.bbox:void 0,y=_?e.features[n].id:M?e.id:void 0,f=u?u.type==="GeometryCollection":!1,s=f?u.geometries.length:1,i=0;i<s;i++){if(o=f?u.geometries[i]:u,o===null){if(t(null,w,d,m,y)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(o,w,d,m,y)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<o.geometries.length;r++)if(t(o.geometries[r],w,d,m,y)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}w++}}function tN(e,t={}){const n=[];if(eN(e,i=>{n.push(i.coordinates)}),n.length<2)throw new Error("Must specify at least 2 geometries");const r=QB(n[0],...n.slice(1));return r.length===0?null:r.length===1?hu(r[0],t.properties):xB(r,t.properties)}var nN=tN;function fx(e,t,n){if(e!==null)for(var r,i,o,s,u,f,d,m=0,y=0,w,_=e.type,M=_==="FeatureCollection",k=_==="Feature",R=M?e.features.length:1,N=0;N<R;N++){d=M?e.features[N].geometry:k?e.geometry:e,w=d?d.type==="GeometryCollection":!1,u=w?d.geometries.length:1;for(var j=0;j<u;j++){var J=0,te=0;if(s=w?d.geometries[j]:d,s!==null){f=s.coordinates;var ae=s.type;switch(m=0,ae){case null:break;case"Point":if(t(f,y,N,J,te)===!1)return!1;y++,J++;break;case"LineString":case"MultiPoint":for(r=0;r<f.length;r++){if(t(f[r],y,N,J,te)===!1)return!1;y++,ae==="MultiPoint"&&J++}ae==="LineString"&&J++;break;case"Polygon":case"MultiLineString":for(r=0;r<f.length;r++){for(i=0;i<f[r].length-m;i++){if(t(f[r][i],y,N,J,te)===!1)return!1;y++}ae==="MultiLineString"&&J++,ae==="Polygon"&&te++}ae==="Polygon"&&J++;break;case"MultiPolygon":for(r=0;r<f.length;r++){for(te=0,i=0;i<f[r].length;i++){for(o=0;o<f[r][i].length-m;o++){if(t(f[r][i][o],y,N,J,te)===!1)return!1;y++}te++}J++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(fx(s.geometries[r],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function rN(e,t){var n,r,i,o,s,u,f,d,m,y,w=0,_=e.type==="FeatureCollection",M=e.type==="Feature",k=_?e.features.length:1;for(n=0;n<k;n++){for(u=_?e.features[n].geometry:M?e.geometry:e,d=_?e.features[n].properties:M?e.properties:{},m=_?e.features[n].bbox:M?e.bbox:void 0,y=_?e.features[n].id:M?e.id:void 0,f=u?u.type==="GeometryCollection":!1,s=f?u.geometries.length:1,i=0;i<s;i++){if(o=f?u.geometries[i]:u,o===null){if(t(null,w,d,m,y)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(o,w,d,m,y)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<o.geometries.length;r++)if(t(o.geometries[r],w,d,m,y)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}w++}}function iN(e,t){rN(e,function(n,r,i,o,s){var u=n===null?null:n.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return t(od(n,i,{bbox:o,id:s}),r,0)===!1?!1:void 0}var f;switch(u){case"MultiPoint":f="Point";break;case"MultiLineString":f="LineString";break;case"MultiPolygon":f="Polygon";break}for(var d=0;d<n.coordinates.length;d++){var m=n.coordinates[d],y={type:f,coordinates:m};if(t(od(y,i),r,d)===!1)return!1}})}function sN(e,t){iN(e,function(n,r,i){var o=0;if(n.geometry){var s=n.geometry.type;if(!(s==="Point"||s==="MultiPoint")){var u,f=0,d=0,m=0;if(fx(n,function(y,w,_,M,k){if(u===void 0||r>f||M>d||k>m){u=y,f=r,d=M,m=k,o=0;return}var R=du([u,y],n.properties);if(t(R,r,i,k,o)===!1)return!1;o++,u=y})===!1)return!1}}})}function oN(e,t,n){var r=n,i=!1;return sN(e,function(o,s,u,f,d){i===!1&&n===void 0?r=o:r=t(r,o,s,u,f,d),i=!0}),r}function mg(e,t={}){return oN(e,(n,r)=>{const i=r.geometry.coordinates;return n+py(i[0],i[1],t)},0)}var Uf=mg;class gf extends Un.Polygon{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});Ht(this,"properties");this.properties=dn.measure("Polygon.constructor.initProperties",()=>({type:"Polygon",style:{color:r.color||"#2b6451",weight:r.weight||3,opacity:r.opacity||1,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity||.2,dashArray:r.dashArray||"",name:r.name||""}})),this.updateProperties(),this.on({add:()=>this.updateProperties(),edit:()=>this.updateProperties(),drag:()=>this.updateProperties()})}updateProperties(){dn.measure("Polygon.updateProperties",()=>{var n,r,i;try{const o=this.getLatLngs()[0];if(!o||o.length<3){console.warn("Polygon has less than 3 points, cannot calculate properties");return}const s=o.map(_=>[_.lng,_.lat]);s.push(s[0]);const u=hu([s]),f=ix(u),d=mg(du([...s]),{units:"meters"}),m=np(u),y=Un.latLng(m.geometry.coordinates[1],m.geometry.coordinates[0]),w=((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||"";this.properties={type:"Polygon",coordinates:o.map(_=>({lat:_.lat,lng:_.lng})),surface:f,perimeter:d,center:{lat:y.lat,lng:y.lng},vertices:o.length,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((i=this.options)==null?void 0:i.dashArray)||"",name:w}},this.fire("properties:updated",{shape:this,properties:this.properties})}catch(o){console.error("Failed to calculate polygon properties",o)}})}setName(n){dn.measure("Polygon.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return dn.measure("Polygon.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}setLatLngs(n){return dn.measure("Polygon.setLatLngs",()=>(super.setLatLngs(n),this.updateProperties(),this))}getMidPoints(){return dn.measure("Polygon.getMidPoints",()=>{const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let i=0;i<n.length;i++){const o=n[i],s=n[(i+1)%n.length];r.push(Un.latLng((o.lat+s.lat)/2,(o.lng+s.lng)/2))}return r})}moveVertex(n,r){dn.measure("Polygon.moveVertex",()=>{const i=this.getLatLngs()[0];n>=0&&n<i.length&&(i[n]=r,Un.Polygon.prototype.setLatLngs.call(this,[i]))})}addVertex(n,r){dn.measure("Polygon.addVertex",()=>{const i=this.getLatLngs()[0];n>=0&&n<i.length&&(i.splice((n+1)%i.length,0,r),Un.Polygon.prototype.setLatLngs.call(this,[i]))})}move(n){return dn.measure("Polygon.move",()=>{const i=this.getLatLngs()[0].map(o=>Un.latLng(o.lat+n.lat,o.lng+n.lng));return Un.Polygon.prototype.setLatLngs.call(this,[i]),this})}getCenter(){return dn.measure("Polygon.getCenter",()=>{const n=this.getLatLngs()[0];if(!n||n.length===0)return new Un.LatLng(0,0);try{const r=n.filter(d=>d&&typeof d.lat=="number"&&typeof d.lng=="number"&&!isNaN(d.lat)&&!isNaN(d.lng)&&Math.abs(d.lat)<=90&&Math.abs(d.lng)<=180);if(r.length===0)return console.warn("Aucun point valide dans le polygone pour calculer le centre"),new Un.LatLng(0,0);const i=r.map(d=>[d.lng,d.lat]);i.push(i[0]);const o=hu([i]),s=np(o),u=s.geometry.coordinates[1],f=s.geometry.coordinates[0];if(typeof u!="number"||typeof f!="number"||isNaN(u)||isNaN(f)||Math.abs(u)>90||Math.abs(f)>180)throw new Error("Centroid calculé invalide");return Un.latLng(u,f)}catch(r){console.warn("Erreur lors du calcul du centroïde avec turf.js, utilisation de la méthode simple",r);let i=0,o=0,s=0;for(const u of n)u&&typeof u.lat=="number"&&typeof u.lng=="number"&&!isNaN(u.lat)&&!isNaN(u.lng)&&Math.abs(u.lat)<=90&&Math.abs(u.lng)<=180&&(i+=u.lat,o+=u.lng,s++);return s===0?(console.error("Impossible de calculer un centre valide pour le polygone"),new Un.LatLng(0,0)):new Un.LatLng(i/s,o/s)}})}getSegmentLengths(){return dn.measure("Polygon.getSegmentLengths",()=>{const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let i=0;i<n.length;i++){const o=n[i],s=n[(i+1)%n.length];r.push(o.distanceTo(s))}return r})}}class Mo extends Un.Polyline{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});Ht(this,"properties");Ht(this,"cachedProperties",{});Ht(this,"needsUpdate",!0);this.properties=dn.measure("Line.constructor.initProperties",()=>({type:"Line",style:{...r||{},name:r.name||""}})),this.updateProperties(),this.on("add",()=>{this.updateProperties()})}updateProperties(){dn.measure("Line.updateProperties",()=>{var i,o,s;const n=this.getLatLngs();if(!n||n.length<2){console.warn("Line has less than 2 points, cannot calculate properties");return}const r=n.map(u=>[u.lng,u.lat]);try{const u=du(r),f=mg(u,{units:"meters"});let d;if(n.length===2)d=Un.latLng((n[0].lat+n[1].lat)/2,(n[0].lng+n[1].lng)/2);else{const w=c1(u,f/2,{units:"meters"});d=Un.latLng(w.geometry.coordinates[1],w.geometry.coordinates[0])}const m=10,y=((o=(i=this.properties)==null?void 0:i.style)==null?void 0:o.name)||"";this.properties={type:"Line",length:f,coordinates:n.map(w=>({lat:w.lat,lng:w.lng})),center:{lat:d.lat,lng:d.lng},vertices:n.length,surfaceInfluence:f*m,dimensions:{width:m},style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,dashArray:((s=this.options)==null?void 0:s.dashArray)||"",name:y}},this.cachedProperties.length=f,this.cachedProperties.center=d,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.needsUpdate=!1,this.fire("properties:updated",{shape:this,properties:this.properties})}catch(u){console.error("Failed to calculate line properties",u)}})}setName(n){dn.measure("Line.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return dn.measure("Line.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}invalidateCache(){dn.measure("Line.invalidateCache",()=>{this.needsUpdate=!0,this.cachedProperties={}})}setLatLngs(n){return super.setLatLngs(n),this.needsUpdate=!0,this.cachedProperties={},this.fire("latlngs:updated",{latlngs:this.getLatLngs()}),this}getMidPoints(){return dn.measure("Line.getMidPoints",()=>{if(!this.needsUpdate&&this.cachedProperties.midPoints)return this.cachedProperties.midPoints;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let i=0;i<n.length-1;i++){const o=n[i],s=n[i+1];if(!o||!s){console.warn("Points invalides détectés pour le segment",i);continue}r.push(Un.latLng((o.lat+s.lat)/2,(o.lng+s.lng)/2))}return this.cachedProperties.midPoints=r,r})}getMidPointAt(n){return dn.measure("Line.getMidPointAt",()=>{const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return null;const i=r[n],o=r[n+1];return!i||!o?(console.warn("Points invalides pour calcul du midpoint au segment",n),null):Un.latLng((i.lat+o.lat)/2,(i.lng+o.lng)/2)})}moveVertex(n,r,i=!1){dn.measure("Line.moveVertex",()=>{const o=this.getLatLngs();n>=0&&n<o.length&&(o[n]=r,this.setLatLngs(o),this.needsUpdate=!0,this.cachedProperties={},this.fire("vertex:moved",{index:n,latlng:r,allPoints:o}),i&&this.updateProperties())})}addVertex(n,r,i=!1){dn.measure("Line.addVertex",()=>{const o=this.getLatLngs();n>=0&&n<o.length-1&&(o.splice(n+1,0,r),Un.Polyline.prototype.setLatLngs.call(this,o),this.needsUpdate=!0,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.cachedProperties.center=void 0,this.cachedProperties.length=void 0,i&&this.updateProperties())})}move(n,r=!0){return dn.measure("Line.move",()=>{this.fire("move:start");const i=this.getLatLngs(),o=i.map(s=>Un.latLng(s.lat+n.lat,s.lng+n.lng));return this.setLatLngs(o),this.needsUpdate=!0,this.cachedProperties={},this.fire("move",{delta:n,newPositions:o,oldPositions:i}),r&&(this.updateProperties(),this.fire("properties:updated",{shape:this,properties:this.properties}),this.fire("move:end")),this})}getCenter(){return dn.measure("Line.getCenter",()=>{if(!this.needsUpdate&&this.cachedProperties.center)return this.cachedProperties.center;const n=this.getLatLngs();if(n.length<2)return n[0]||new Un.LatLng(0,0);try{const r=n.map(f=>[f.lng,f.lat]),i=du(r),o=mg(i,{units:"meters"}),s=c1(i,o/2,{units:"meters"}),u=Un.latLng(s.geometry.coordinates[1],s.geometry.coordinates[0]);return this.cachedProperties.center=u,u}catch(r){console.warn("Error calculating line center with turf.js, using simple method",r);const i=n.reduce((u,f)=>u+f.lat,0)/n.length,o=n.reduce((u,f)=>u+f.lng,0)/n.length,s=new Un.LatLng(i,o);return this.cachedProperties.center=s,s}})}getSegmentLengths(){return dn.measure("Line.getSegmentLengths",()=>{if(!this.needsUpdate&&this.cachedProperties.segmentLengths)return this.cachedProperties.segmentLengths;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let i=0;i<n.length-1;i++){const o=n[i],s=n[i+1];r.push(o.distanceTo(s))}return this.cachedProperties.segmentLengths=r,r})}getSegmentLengthAt(n){return dn.measure("Line.getSegmentLengthAt",()=>{const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return 0;const i=r[n],o=r[n+1];return i.distanceTo(o)})}getLengthToVertex(n){return dn.measure("Line.getLengthToVertex",()=>{const r=this.getLatLngs();let i=0;if(n<=0||r.length<2)return 0;for(let o=0;o<Math.min(n,r.length-1);o++)i+=r[o].distanceTo(r[o+1]);return i})}getLength(){return dn.measure("Line.getLength",()=>{if(!this.needsUpdate&&this.cachedProperties.length)return this.cachedProperties.length;const n=this.getLatLngs();let r=0;for(let i=0;i<n.length-1;i++)r+=n[i].distanceTo(n[i+1]);return this.cachedProperties.length=r,r})}}const Xa=class Xa extends Mo{constructor(n,r={}){super(n,{...r,color:"#FF4500",weight:4,opacity:.8,interactive:!1,pmIgnore:!0});Ht(this,"elevationData",[]);Ht(this,"elevationProfile",null);Ht(this,"elevationMarker",null);Ht(this,"isZooming",!1);Ht(this,"simpleLine",null);Ht(this,"isDestroyed",!1);Ht(this,"zoomAnimationTimeout",null);this.properties=dn.measure("ElevationLine.constructor.initProperties",()=>({...this.properties,type:"ElevationLine",style:{...this.properties.style||{},name:r.name||""},elevationProfile:null,maxElevation:0,minElevation:0,elevationGain:0,elevationLoss:0,dataSource:"pending"})),this.setupEventListeners()}setupEventListeners(){dn.measure("ElevationLine.setupEventListeners",()=>{this.on("move",()=>this.updateElevationProfile()),this.on("add",()=>{this._map&&(this._map.on("zoomstart",this.handleZoomStart,this),this._map.on("zoomend",this.handleZoomEnd,this),this._map.on("zoomanim",this._animateZoom,this))}),this.on("remove",()=>{this.cleanupEventListeners()})})}cleanupEventListeners(){this._map&&(this._map.off("zoomstart",this.handleZoomStart,this),this._map.off("zoomend",this.handleZoomEnd,this),this._map.off("zoomanim",this._animateZoom,this)),this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null)}_animateZoom(n){if(this.isDestroyed||!this._map||!this.getLatLngs().length){console.debug("[ElevationLine] Animation de zoom ignorée - ligne détruite ou carte non disponible");return}this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null);try{this.elevationMarker&&this.elevationMarker.remove();const r=this._path;r&&(r.style.display="none");const i=this.getLatLngs();if(i&&i.length>0&&this._map&&!this.isDestroyed){if(!this._map.getContainer()){console.debug("[ElevationLine] Carte non valide pendant l'animation de zoom");return}if(this.simpleLine?this.simpleLine.setLatLngs(i):(this.simpleLine=Un.polyline(i,{color:"#FF4500",weight:3,opacity:.6,smoothFactor:1,interactive:!1}),this._map&&this._map.getContainer()&&this.simpleLine.addTo(this._map)),this.simpleLine&&this.simpleLine._path){const o=this.simpleLine._path.style.transform;this.simpleLine._path.style.transform="",this.zoomAnimationTimeout=setTimeout(()=>{if(this.isDestroyed||!this._map||!this._map.getContainer()){this.cleanup();return}try{this.simpleLine&&this.simpleLine._path&&(this.simpleLine._path.style.transform=o,this.simpleLine._path.style.display=""),r&&!this.isDestroyed&&(r.style.display=""),this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&this.redraw()}catch(s){console.warn("[ElevationLine] Erreur lors de la restauration après animation:",s),this.cleanup()}},300)}}}catch(r){console.debug("[ElevationLine] Animation de zoom ignorée:",r),this.zoomAnimationTimeout=setTimeout(()=>{if(this.isDestroyed||!this._map||!this._map.getContainer()){this.cleanup();return}try{this._path&&(this._path.style.display=""),this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&this.redraw()}catch(i){console.error("[ElevationLine] Erreur lors de la restauration après animation:",i),this.cleanup()}},300)}}handleZoomStart(){this.isDestroyed||dn.measure("ElevationLine.handleZoomStart",()=>{if(!(this.isZooming||!this._map)){this.isZooming=!0;try{this.elevationMarker&&this.elevationMarker.remove();const n=this._path;n&&(n.style.display="none"),this.isDestroyed||this.setStyle({opacity:.3})}catch(n){console.error("[ElevationLine] Error in handleZoomStart:",n),this.cleanup()}}})}handleZoomEnd(){this.isDestroyed||dn.measure("ElevationLine.handleZoomEnd",()=>{if(!this._map){this.isZooming=!1;return}try{this.simpleLine&&this._map&&(this.simpleLine.remove(),this.simpleLine=null);const n=this._path;n&&(n.style.display=""),this.isDestroyed||this.setStyle({opacity:.8}),this.zoomAnimationTimeout&&clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=setTimeout(()=>{if(!(this.isDestroyed||!this._map))try{this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&this.redraw()}catch(r){console.warn("[ElevationLine] Erreur lors du redraw après zoom:",r),this.cleanup()}},50)}catch(n){console.error("[ElevationLine] Error in handleZoomEnd:",n)}finally{this.isZooming=!1}})}cleanup(){dn.measure("ElevationLine.cleanup",()=>{if(this.isZooming=!1,this.hideElevationMarker(),this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null),this.simpleLine&&this._map){try{this.simpleLine.remove()}catch(r){console.error("[ElevationLine] Error removing simpleLine:",r)}this.simpleLine=null}if(this.elevationProfile){try{this.elevationProfile.remove()}catch(r){console.error("[ElevationLine] Error removing elevationProfile:",r)}this.elevationProfile=null}const n=this._path;n&&(n.style.display=""),!this.isDestroyed&&this._map&&this._map.hasLayer(this)&&this.setStyle({opacity:.8})})}calculateOptimalSampleCount(){return dn.measure("ElevationLine.calculateOptimalSampleCount",()=>{const n=this.getLength(),r=Math.ceil(n/Xa.SAMPLE_DISTANCE);return Math.min(Math.max(r,Xa.MIN_SAMPLES),Xa.MAX_SAMPLES)})}async fetchElevationData(n=0){return dn.measure("ElevationLine.fetchElevationData",async()=>{if(this.getLatLngs().length===0)return;const i=this.getLength();let o="";const s=this.calculateOptimalSampleCount();console.log(`[ElevationLine] Using ${s} sample points for ${i.toFixed(0)}m line`);const u=[];for(let f=0;f<s;f++){const d=f/(s-1)*i,m=this.getPointAtDistance(d);m&&u.push(`${m.lat},${m.lng}`)}o=u.join("|");try{const f=await fetch(`${Xa.API_URL}?locations=${o}`);if(!f.ok)throw new Error(`HTTP error ${f.status}`);const d=await f.json();if(!d.results||!Array.isArray(d.results))throw new Error("Invalid API response format");this.elevationData=d.results.map((m,y)=>({distance:y/(s-1)*i,elevation:m.elevation})),this.properties.dataSource="api"}catch(f){if(console.warn(`[ElevationLine] API fetch attempt ${n+1}/${Xa.MAX_RETRIES} failed:`,f),n<Xa.MAX_RETRIES)return await new Promise(d=>setTimeout(d,Xa.RETRY_DELAY)),this.fetchElevationData(n+1);console.warn("[ElevationLine] All API attempts failed, falling back to simulation"),this.simulateElevationData(),this.properties.dataSource="simulation"}this.calculateElevationStatistics()})}simulateElevationData(){dn.measure("ElevationLine.simulateElevationData",()=>{const n=this.getLength(),r=this.calculateOptimalSampleCount();this.elevationData=Array.from({length:r},(i,o)=>{const s=o/(r-1)*n,u=100+Math.sin(s/n*Math.PI*2)*50;return{distance:s,elevation:u}})})}calculateElevationStatistics(){dn.measure("ElevationLine.calculateElevationStatistics",()=>{if(!this.elevationData.length)return;const n=this.elevationData.map(m=>m.elevation),r=n.length?Math.max(...n):0,i=n.length?Math.min(...n):0;let o=0,s=0,u=0,f=0,d=0;console.log("[ElevationLine][calculateElevationStatistics] Données brutes:",{elevationsCount:n.length,maxElevation:r,minElevation:i});for(let m=1;m<this.elevationData.length;m++){const y=this.elevationData[m-1],w=this.elevationData[m],_=w.elevation-y.elevation;_>0?o+=_:s+=Math.abs(_);const M=w.distance-y.distance;if(M>0){const k=_/M*100;u=Math.max(u,Math.abs(k)),f+=Math.abs(k),d++}}console.log("[ElevationLine][calculateElevationStatistics] Calculs intermédiaires:",{gain:o,loss:s,maxSlope:u,averageSlope:d>0?f/d:0}),this.properties={...this.properties,type:"ElevationLine",maxElevation:r,minElevation:i,elevationGain:o,elevationLoss:s,maxSlope:u,averageSlope:d>0?f/d:0,elevationData:this.elevationData,dataSource:this.properties.dataSource,length:this.getLength()},console.log("[ElevationLine][calculateElevationStatistics] Propriétés mises à jour:",this.properties)})}showElevationAt(n){dn.measure("ElevationLine.showElevationAt",()=>{if(!(!this.elevationData.length||!this._map))try{const r=this.elevationData.reduce((o,s)=>Math.abs(s.distance-n)<Math.abs(o.distance-n)?s:o),i=this.getPointAtDistance(n);if(!i)return;this.elevationMarker?(this.elevationMarker.setLatLng(i),this.elevationMarker.setTooltipContent(`Distance: ${this.formatDistance(r.distance)}<br>Altitude: ${this.formatElevation(r.elevation)}`)):(this.elevationMarker=Un.circleMarker(i,{radius:6,color:"#FF4500",fillColor:"#FF4500",fillOpacity:1,weight:2,className:"elevation-marker"}),this.elevationMarker.bindTooltip(`Distance: ${this.formatDistance(r.distance)}<br>Altitude: ${this.formatElevation(r.elevation)}`,{permanent:!0,direction:"top",offset:[0,-10],className:"elevation-marker-tooltip"}),this._map&&this._map.hasLayer(this)&&this.elevationMarker.addTo(this._map)),this.fire("elevation:show",{distance:n,elevation:r.elevation,latLng:i})}catch(r){console.error("[ElevationLine] Erreur lors de l'affichage de l'élévation:",r),this.hideElevationMarker()}})}hideElevationMarker(){dn.measure("ElevationLine.hideElevationMarker",()=>{this.elevationMarker&&(this.elevationMarker.remove(),this.elevationMarker=null)})}getPointAtDistance(n){return dn.measure("ElevationLine.getPointAtDistance",()=>{try{const i=this.getLatLngs().map(u=>[u.lng,u.lat]),o=du(i),s=c1(o,n,{units:"meters"});return Un.latLng(s.geometry.coordinates[1],s.geometry.coordinates[0])}catch(r){return console.error("Error calculating point at distance",r),null}})}moveVertex(n,r,i=!1){dn.measure("ElevationLine.moveVertex",()=>{super.moveVertex(n,r,!1),this.properties.type="ElevationLine",i&&this.updateElevationProfile()})}addVertex(n,r,i=!1){dn.measure("ElevationLine.addVertex",()=>{console.warn("[ElevationLine] Tentative d'ajout de vertex ignorée - non autorisé pour un profil altimétrique")})}setLatLngs(n){return dn.measure("ElevationLine.setLatLngs",()=>(super.setLatLngs(n),this.properties.type="ElevationLine",this.updateElevationProfile(),this))}move(n,r=!0){return dn.measure("ElevationLine.move",()=>(super.move(n,!1),this.properties.type="ElevationLine",r&&this.updateElevationProfile(),this))}setName(n){dn.measure("ElevationLine.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return dn.measure("ElevationLine.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}formatDistance(n){return dn.measure("ElevationLine.formatDistance",()=>n>=1e3?`${(n/1e3).toFixed(2)} km`:`${n.toFixed(0)} m`)}formatElevation(n){return dn.measure("ElevationLine.formatElevation",()=>`${n.toFixed(0)} m`)}onAdd(n){return dn.measure("ElevationLine.onAdd",()=>(super.onAdd(n),this))}onRemove(n){return this.isDestroyed=!0,this.cleanupEventListeners(),this.cleanup(),super.onRemove(n)}async updateElevationProfile(){return dn.measure("ElevationLine.updateElevationProfile",async()=>{try{if(this.properties.elevationData&&this.properties.dataSource==="restored"){this.elevationData=this.properties.elevationData,this.calculateElevationStatistics(),this._map&&this._map.hasLayer(this)&&this.redraw(),this.fire("elevation:updated",{shape:this,elevationData:this.elevationData,properties:this.properties});return}await this.fetchElevationData(),this.updateProperties(),this._map&&this._map.hasLayer(this)&&this.redraw(),this.fire("elevation:updated",{shape:this,elevationData:this.elevationData,properties:this.properties})}catch(n){console.error("[ElevationLine] Erreur lors de la mise à jour du profil d'élévation:",n),this.properties.dataSource="error"}})}updateProperties(){dn.measure("ElevationLine.updateProperties",()=>{if(super.updateProperties(),this.elevationData&&this.elevationData.length>0){const n=this.elevationData.map(w=>w.elevation),r=Math.max(...n),i=Math.min(...n);let o=0,s=0,u=0,f=0,d=0;for(let w=1;w<this.elevationData.length;w++){const _=this.elevationData[w-1],M=this.elevationData[w],k=M.elevation-_.elevation;k>0?o+=k:s+=Math.abs(k);const R=M.distance-_.distance;if(R>0){const N=k/R*100;u=Math.max(u,Math.abs(N)),f+=Math.abs(N),d++}}const y=this.getLatLngs().map(w=>({lat:w.lat,lng:w.lng}));this.properties={...this.properties,type:"ElevationLine",coordinates:y,elevationData:this.elevationData.map(w=>({distance:w.distance,elevation:w.elevation})),maxElevation:r,minElevation:i,elevationGain:o,elevationLoss:s,maxSlope:u,averageSlope:d>0?f/d:0,dataSource:this.properties.dataSource||"api"},this.fire("properties:updated",{shape:this,properties:this.properties})}})}getElevationData(){return dn.measure("ElevationLine.getElevationData",()=>this.elevationData)}};Ht(Xa,"API_URL","https://api.open-elevation.com/api/v1/lookup"),Ht(Xa,"RETRY_DELAY",2e3),Ht(Xa,"MAX_RETRIES",3),Ht(Xa,"SAMPLE_DISTANCE",100),Ht(Xa,"MIN_SAMPLES",10),Ht(Xa,"MAX_SAMPLES",50);let Sf=Xa;var vg={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */vg.exports;(function(e,t){(function(){var n,r="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",u="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",d=500,m="__lodash_placeholder__",y=1,w=2,_=4,M=1,k=2,R=1,N=2,j=4,J=8,te=16,ae=32,le=64,xe=128,G=256,I=512,K=30,$="...",O=800,z=16,V=1,W=2,q=3,X=1/0,Y=9007199254740991,me=17976931348623157e292,Se=NaN,Re=4294967295,T=Re-1,ne=Re>>>1,fe=[["ary",xe],["bind",R],["bindKey",N],["curry",J],["curryRight",te],["flip",I],["partial",ae],["partialRight",le],["rearg",G]],ce="[object Arguments]",ye="[object Array]",oe="[object AsyncFunction]",B="[object Boolean]",ue="[object Date]",De="[object DOMException]",Me="[object Error]",We="[object Function]",Z="[object GeneratorFunction]",de="[object Map]",ve="[object Number]",pe="[object Null]",$e="[object Object]",Qe="[object Promise]",Ke="[object Proxy]",He="[object RegExp]",Xe="[object Set]",st="[object String]",kt="[object Symbol]",Ct="[object Undefined]",Ut="[object WeakMap]",Gt="[object WeakSet]",fn="[object ArrayBuffer]",pn="[object DataView]",et="[object Float32Array]",it="[object Float64Array]",nt="[object Int8Array]",Vt="[object Int16Array]",Qt="[object Int32Array]",Nn="[object Uint8Array]",wn="[object Uint8ClampedArray]",An="[object Uint16Array]",or="[object Uint32Array]",xn=/\b__p \+= '';/g,En=/\b(__p \+=) '' \+/g,Cn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,cr=/&(?:amp|lt|gt|quot|#39);/g,yr=/[&<>"']/g,mt=RegExp(cr.source),qe=RegExp(yr.source),Ft=/<%-([\s\S]+?)%>/g,kn=/<%([\s\S]+?)%>/g,ar=/<%=([\s\S]+?)%>/g,Wn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xt=/^\w*$/,vn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,It=/[\\^$.*+?()[\]{}|]/g,Yt=RegExp(It.source),Ln=/^\s+/,mr=/\s/,ct=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,On=/\{\n\/\* \[wrapped with (.+)\] \*/,xr=/,? & /,Ti=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ir=/[()=,{}\[\]\/\s]/,Er=/\\(\\)?/g,lr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Vr=/\w*$/,rr=/^[-+]0x[0-9a-f]+$/i,Or=/^0b[01]+$/i,er=/^\[object .+?Constructor\]$/,en=/^0o[0-7]+$/i,qi=/^(?:0|[1-9]\d*)$/,Di=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Si=/($^)/,ai=/['\n\r\u2028\u2029\\]/g,Fr="\\ud800-\\udfff",Ml="\\u0300-\\u036f",jr="\\ufe20-\\ufe2f",Xo="\\u20d0-\\u20ff",_u=Ml+jr+Xo,wo="\\u2700-\\u27bf",ri="a-z\\xdf-\\xf6\\xf8-\\xff",Fn="\\xac\\xb1\\xd7\\xf7",xs="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",li="\\u2000-\\u206f",fr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Gn="A-Z\\xc0-\\xd6\\xd8-\\xde",gs="\\ufe0e\\ufe0f",ms=Fn+xs+li+fr,Lr="['’]",jo="["+Fr+"]",Vn="["+ms+"]",_r="["+_u+"]",Wr="\\d+",_n="["+wo+"]",nn="["+ri+"]",ii="[^"+Fr+ms+Wr+wo+ri+Gn+"]",as="\\ud83c[\\udffb-\\udfff]",vs="(?:"+_r+"|"+as+")",Ci="[^"+Fr+"]",ao="(?:\\ud83c[\\udde6-\\uddff]){2}",Ks="[\\ud800-\\udbff][\\udc00-\\udfff]",Bs="["+Gn+"]",fi="\\u200d",To="(?:"+nn+"|"+ii+")",Ns="(?:"+Bs+"|"+ii+")",Yi="(?:"+Lr+"(?:d|ll|m|re|s|t|ve))?",ys="(?:"+Lr+"(?:D|LL|M|RE|S|T|VE))?",zo=vs+"?",ma="["+gs+"]?",Ji="(?:"+fi+"(?:"+[Ci,ao,Ks].join("|")+")"+ma+zo+")*",rl="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",va="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",pr=ma+zo+Ji,br="(?:"+[_n,ao,Ks].join("|")+")"+pr,Zr="(?:"+[Ci+_r+"?",_r,ao,Ks,jo].join("|")+")",Tr=RegExp(Lr,"g"),Os=RegExp(_r,"g"),il=RegExp(as+"(?="+as+")|"+Zr+pr,"g"),sl=RegExp([Bs+"?"+nn+"+"+Yi+"(?="+[Vn,Bs,"$"].join("|")+")",Ns+"+"+ys+"(?="+[Vn,Bs+To,"$"].join("|")+")",Bs+"?"+To+"+"+Yi,Bs+"+"+ys,va,rl,Wr,br].join("|"),"g"),$o=RegExp("["+fi+Fr+_u+gs+"]"),$a=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,bu=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Al=-1,Sr={};Sr[et]=Sr[it]=Sr[nt]=Sr[Vt]=Sr[Qt]=Sr[Nn]=Sr[wn]=Sr[An]=Sr[or]=!0,Sr[ce]=Sr[ye]=Sr[fn]=Sr[B]=Sr[pn]=Sr[ue]=Sr[Me]=Sr[We]=Sr[de]=Sr[ve]=Sr[$e]=Sr[He]=Sr[Xe]=Sr[st]=Sr[Ut]=!1;var Hr={};Hr[ce]=Hr[ye]=Hr[fn]=Hr[pn]=Hr[B]=Hr[ue]=Hr[et]=Hr[it]=Hr[nt]=Hr[Vt]=Hr[Qt]=Hr[de]=Hr[ve]=Hr[$e]=Hr[He]=Hr[Xe]=Hr[st]=Hr[kt]=Hr[Nn]=Hr[wn]=Hr[An]=Hr[or]=!0,Hr[Me]=Hr[We]=Hr[Ut]=!1;var Ua={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Zu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},kl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Jl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ol=parseFloat,Tl=parseInt,Xl=typeof Jo=="object"&&Jo&&Jo.Object===Object&&Jo,Kr=typeof self=="object"&&self&&self.Object===Object&&self,Xi=Xl||Kr||Function("return this")(),ir=t&&!t.nodeType&&t,Qi=ir&&!0&&e&&!e.nodeType&&e,al=Qi&&Qi.exports===ir,ya=al&&Xl.process,Fi=function(){try{var _t=Qi&&Qi.require&&Qi.require("util").types;return _t||ya&&ya.binding&&ya.binding("util")}catch{}}(),Ql=Fi&&Fi.isArrayBuffer,Qo=Fi&&Fi.isDate,Dl=Fi&&Fi.isMap,Bl=Fi&&Fi.isRegExp,Do=Fi&&Fi.isSet,Nl=Fi&&Fi.isTypedArray;function vi(_t,qt,Mt){switch(Mt.length){case 0:return _t.call(qt);case 1:return _t.call(qt,Mt[0]);case 2:return _t.call(qt,Mt[0],Mt[1]);case 3:return _t.call(qt,Mt[0],Mt[1],Mt[2])}return _t.apply(qt,Mt)}function Ku(_t,qt,Mt,Pn){for(var Zn=-1,wr=_t==null?0:_t.length;++Zn<wr;){var ji=_t[Zn];qt(Pn,ji,Mt(ji),_t)}return Pn}function Ls(_t,qt){for(var Mt=-1,Pn=_t==null?0:_t.length;++Mt<Pn&&qt(_t[Mt],Mt,_t)!==!1;);return _t}function Uo(_t,qt){for(var Mt=_t==null?0:_t.length;Mt--&&qt(_t[Mt],Mt,_t)!==!1;);return _t}function Ol(_t,qt){for(var Mt=-1,Pn=_t==null?0:_t.length;++Mt<Pn;)if(!qt(_t[Mt],Mt,_t))return!1;return!0}function Vo(_t,qt){for(var Mt=-1,Pn=_t==null?0:_t.length,Zn=0,wr=[];++Mt<Pn;){var ji=_t[Mt];qt(ji,Mt,_t)&&(wr[Zn++]=ji)}return wr}function ll(_t,qt){var Mt=_t==null?0:_t.length;return!!Mt&&cn(_t,qt,0)>-1}function ul(_t,qt,Mt){for(var Pn=-1,Zn=_t==null?0:_t.length;++Pn<Zn;)if(Mt(qt,_t[Pn]))return!0;return!1}function yi(_t,qt){for(var Mt=-1,Pn=_t==null?0:_t.length,Zn=Array(Pn);++Mt<Pn;)Zn[Mt]=qt(_t[Mt],Mt,_t);return Zn}function xo(_t,qt){for(var Mt=-1,Pn=qt.length,Zn=_t.length;++Mt<Pn;)_t[Zn+Mt]=qt[Mt];return _t}function _a(_t,qt,Mt,Pn){var Zn=-1,wr=_t==null?0:_t.length;for(Pn&&wr&&(Mt=_t[++Zn]);++Zn<wr;)Mt=qt(Mt,_t[Zn],Zn,_t);return Mt}function es(_t,qt,Mt,Pn){var Zn=_t==null?0:_t.length;for(Pn&&Zn&&(Mt=_t[--Zn]);Zn--;)Mt=qt(Mt,_t[Zn],Zn,_t);return Mt}function D(_t,qt){for(var Mt=-1,Pn=_t==null?0:_t.length;++Mt<Pn;)if(qt(_t[Mt],Mt,_t))return!0;return!1}var _e=vr("length");function Ze(_t){return _t.split("")}function ut(_t){return _t.match(Ti)||[]}function xt(_t,qt,Mt){var Pn;return Mt(_t,function(Zn,wr,ji){if(qt(Zn,wr,ji))return Pn=wr,!1}),Pn}function jt(_t,qt,Mt,Pn){for(var Zn=_t.length,wr=Mt+(Pn?1:-1);Pn?wr--:++wr<Zn;)if(qt(_t[wr],wr,_t))return wr;return-1}function cn(_t,qt,Mt){return qt===qt?_s(_t,qt,Mt):jt(_t,jn,Mt)}function Tn(_t,qt,Mt,Pn){for(var Zn=Mt-1,wr=_t.length;++Zn<wr;)if(Pn(_t[Zn],qt))return Zn;return-1}function jn(_t){return _t!==_t}function tr(_t,qt){var Mt=_t==null?0:_t.length;return Mt?_i(_t,qt)/Mt:Se}function vr(_t){return function(qt){return qt==null?n:qt[_t]}}function zr(_t){return function(qt){return _t==null?n:_t[qt]}}function Ri(_t,qt,Mt,Pn,Zn){return Zn(_t,function(wr,ji,bi){Mt=Pn?(Pn=!1,wr):qt(Mt,wr,ji,bi)}),Mt}function hi(_t,qt){var Mt=_t.length;for(_t.sort(qt);Mt--;)_t[Mt]=_t[Mt].value;return _t}function _i(_t,qt){for(var Mt,Pn=-1,Zn=_t.length;++Pn<Zn;){var wr=qt(_t[Pn]);wr!==n&&(Mt=Mt===n?wr:Mt+wr)}return Mt}function ts(_t,qt){for(var Mt=-1,Pn=Array(_t);++Mt<_t;)Pn[Mt]=qt(Mt);return Pn}function ls(_t,qt){return yi(qt,function(Mt){return[Mt,_t[Mt]]})}function Lo(_t){return _t&&_t.slice(0,wa(_t)+1).replace(Ln,"")}function $r(_t){return function(qt){return _t(qt)}}function Is(_t,qt){return yi(qt,function(Mt){return _t[Mt]})}function cl(_t,qt){return _t.has(qt)}function Ys(_t,qt){for(var Mt=-1,Pn=_t.length;++Mt<Pn&&cn(qt,_t[Mt],0)>-1;);return Mt}function eu(_t,qt){for(var Mt=_t.length;Mt--&&cn(qt,_t[Mt],0)>-1;);return Mt}function ea(_t,qt){for(var Mt=_t.length,Pn=0;Mt--;)_t[Mt]===qt&&++Pn;return Pn}var wu=zr(Ua),Va=zr(Zu);function Ha(_t){return"\\"+Jl[_t]}function us(_t,qt){return _t==null?n:_t[qt]}function ta(_t){return $o.test(_t)}function So(_t){return $a.test(_t)}function lo(_t){for(var qt,Mt=[];!(qt=_t.next()).done;)Mt.push(qt.value);return Mt}function fl(_t){var qt=-1,Mt=Array(_t.size);return _t.forEach(function(Pn,Zn){Mt[++qt]=[Zn,Pn]}),Mt}function Rs(_t,qt){return function(Mt){return _t(qt(Mt))}}function Js(_t,qt){for(var Mt=-1,Pn=_t.length,Zn=0,wr=[];++Mt<Pn;){var ji=_t[Mt];(ji===qt||ji===m)&&(_t[Mt]=m,wr[Zn++]=Mt)}return wr}function Xs(_t){var qt=-1,Mt=Array(_t.size);return _t.forEach(function(Pn){Mt[++qt]=Pn}),Mt}function Yu(_t){var qt=-1,Mt=Array(_t.size);return _t.forEach(function(Pn){Mt[++qt]=[Pn,Pn]}),Mt}function _s(_t,qt,Mt){for(var Pn=Mt-1,Zn=_t.length;++Pn<Zn;)if(_t[Pn]===qt)return Pn;return-1}function ba(_t,qt,Mt){for(var Pn=Mt+1;Pn--;)if(_t[Pn]===qt)return Pn;return Pn}function Fs(_t){return ta(_t)?zs(_t):_e(_t)}function js(_t){return ta(_t)?Ss(_t):Ze(_t)}function wa(_t){for(var qt=_t.length;qt--&&mr.test(_t.charAt(qt)););return qt}var xa=zr(kl);function zs(_t){for(var qt=il.lastIndex=0;il.test(_t);)++qt;return qt}function Ss(_t){return _t.match(il)||[]}function na(_t){return _t.match(sl)||[]}var Co=function _t(qt){qt=qt==null?Xi:$s.defaults(Xi.Object(),qt,$s.pick(Xi,bu));var Mt=qt.Array,Pn=qt.Date,Zn=qt.Error,wr=qt.Function,ji=qt.Math,bi=qt.Object,Il=qt.RegExp,Qs=qt.String,zi=qt.TypeError,ra=Mt.prototype,La=wr.prototype,ia=bi.prototype,sa=qt["__core-js_shared__"],oa=La.toString,Yr=ia.hasOwnProperty,Ho=0,Cs=function(){var c=/[^.]+$/.exec(sa&&sa.keys&&sa.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),wi=ia.toString,Ei=oa.call(bi),ns=Xi._,Ni=Il("^"+oa.call(Yr).replace(It,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Eo=al?qt.Buffer:n,uo=qt.Symbol,Bo=qt.Uint8Array,xu=Eo?Eo.allocUnsafe:n,aa=Rs(bi.getPrototypeOf,bi),cs=bi.create,Bi=ia.propertyIsEnumerable,Us=ra.splice,co=uo?uo.isConcatSpreadable:n,dr=uo?uo.iterator:n,Sa=uo?uo.toStringTag:n,Ca=function(){try{var c=If(bi,"defineProperty");return c({},"",{}),c}catch{}}(),Go=qt.clearTimeout!==Xi.clearTimeout&&qt.clearTimeout,eo=Pn&&Pn.now!==Xi.Date.now&&Pn.now,bc=qt.setTimeout!==Xi.setTimeout&&qt.setTimeout,Es=ji.ceil,Ps=ji.floor,qo=bi.getOwnPropertySymbols,a=Eo?Eo.isBuffer:n,p=qt.isFinite,S=ra.join,U=Rs(bi.keys,bi),ie=ji.max,Ce=ji.min,ot=Pn.now,Pt=qt.parseInt,zt=ji.random,on=ra.reverse,Dn=If(qt,"DataView"),Yn=If(qt,"Map"),Rr=If(qt,"Promise"),fs=If(qt,"Set"),Wi=If(qt,"WeakMap"),Ms=If(bi,"create"),$i=Wi&&new Wi,fo={},wc=Rf(Dn),la=Rf(Yn),Wo=Rf(Rr),No=Rf(fs),Af=Rf(Wi),tu=uo?uo.prototype:n,pi=tu?tu.valueOf:n,Vs=tu?tu.toString:n;function Te(c){if(to(c)&&!Xr(c)&&!(c instanceof Ur)){if(c instanceof As)return c;if(Yr.call(c,"__wrapped__"))return Xy(c)}return new As(c)}var ho=function(){function c(){}return function(g){if(!Gs(g))return{};if(cs)return cs(g);c.prototype=g;var A=new c;return c.prototype=n,A}}();function Lu(){}function As(c,g){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!g,this.__index__=0,this.__values__=n}Te.templateSettings={escape:Ft,evaluate:kn,interpolate:ar,variable:"",imports:{_:Te}},Te.prototype=Lu.prototype,Te.prototype.constructor=Te,As.prototype=ho(Lu.prototype),As.prototype.constructor=As;function Ur(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Re,this.__views__=[]}function Wc(){var c=new Ur(this.__wrapped__);return c.__actions__=dl(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=dl(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=dl(this.__views__),c}function uh(){if(this.__filtered__){var c=new Ur(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function Zc(){var c=this.__wrapped__.value(),g=this.__dir__,A=Xr(c),ee=g<0,we=A?c.length:0,Ie=h3(0,we,this.__views__),rt=Ie.start,gt=Ie.end,Et=gt-rt,an=ee?gt:rt-1,ln=this.__iteratees__,mn=ln.length,$n=0,sr=Ce(Et,this.__takeCount__);if(!A||!ee&&we==Et&&sr==Et)return nu(c,this.__actions__);var Pr=[];e:for(;Et--&&$n<sr;){an+=g;for(var ui=-1,Mr=c[an];++ui<mn;){var xi=ln[ui],Mi=xi.iteratee,jl=xi.type,Za=Mi(Mr);if(jl==W)Mr=Za;else if(!Za){if(jl==V)continue e;break e}}Pr[$n++]=Mr}return Pr}Ur.prototype=ho(Lu.prototype),Ur.prototype.constructor=Ur;function Ga(c){var g=-1,A=c==null?0:c.length;for(this.clear();++g<A;){var ee=c[g];this.set(ee[0],ee[1])}}function xc(){this.__data__=Ms?Ms(null):{},this.size=0}function kf(c){var g=this.has(c)&&delete this.__data__[c];return this.size-=g?1:0,g}function pd(c){var g=this.__data__;if(Ms){var A=g[c];return A===f?n:A}return Yr.call(g,c)?g[c]:n}function Ju(c){var g=this.__data__;return Ms?g[c]!==n:Yr.call(g,c)}function Kc(c,g){var A=this.__data__;return this.size+=this.has(c)?0:1,A[c]=Ms&&g===n?f:g,this}Ga.prototype.clear=xc,Ga.prototype.delete=kf,Ga.prototype.get=pd,Ga.prototype.has=Ju,Ga.prototype.set=Kc;function Rl(c){var g=-1,A=c==null?0:c.length;for(this.clear();++g<A;){var ee=c[g];this.set(ee[0],ee[1])}}function gd(){this.__data__=[],this.size=0}function Yc(c){var g=this.__data__,A=yt(g,c);if(A<0)return!1;var ee=g.length-1;return A==ee?g.pop():Us.call(g,A,1),--this.size,!0}function Jc(c){var g=this.__data__,A=yt(g,c);return A<0?n:g[A][1]}function ch(c){return yt(this.__data__,c)>-1}function fh(c,g){var A=this.__data__,ee=yt(A,c);return ee<0?(++this.size,A.push([c,g])):A[ee][1]=g,this}Rl.prototype.clear=gd,Rl.prototype.delete=Yc,Rl.prototype.get=Jc,Rl.prototype.has=ch,Rl.prototype.set=fh;function Ea(c){var g=-1,A=c==null?0:c.length;for(this.clear();++g<A;){var ee=c[g];this.set(ee[0],ee[1])}}function hh(){this.size=0,this.__data__={hash:new Ga,map:new(Yn||Rl),string:new Ga}}function dh(c){var g=Wp(this,c).delete(c);return this.size-=g?1:0,g}function ph(c){return Wp(this,c).get(c)}function b(c){return Wp(this,c).has(c)}function P(c,g){var A=Wp(this,c),ee=A.size;return A.set(c,g),this.size+=A.size==ee?0:1,this}Ea.prototype.clear=hh,Ea.prototype.delete=dh,Ea.prototype.get=ph,Ea.prototype.has=b,Ea.prototype.set=P;function H(c){var g=-1,A=c==null?0:c.length;for(this.__data__=new Ea;++g<A;)this.add(c[g])}function se(c){return this.__data__.set(c,f),this}function be(c){return this.__data__.has(c)}H.prototype.add=H.prototype.push=se,H.prototype.has=be;function Ee(c){var g=this.__data__=new Rl(c);this.size=g.size}function Ae(){this.__data__=new Rl,this.size=0}function ke(c){var g=this.__data__,A=g.delete(c);return this.size=g.size,A}function Be(c){return this.__data__.get(c)}function Ve(c){return this.__data__.has(c)}function ht(c,g){var A=this.__data__;if(A instanceof Rl){var ee=A.__data__;if(!Yn||ee.length<i-1)return ee.push([c,g]),this.size=++A.size,this;A=this.__data__=new Ea(ee)}return A.set(c,g),this.size=A.size,this}Ee.prototype.clear=Ae,Ee.prototype.delete=ke,Ee.prototype.get=Be,Ee.prototype.has=Ve,Ee.prototype.set=ht;function Dt(c,g){var A=Xr(c),ee=!A&&Ff(c),we=!A&&!ee&&Qc(c),Ie=!A&&!ee&&!we&&Lh(c),rt=A||ee||we||Ie,gt=rt?ts(c.length,Qs):[],Et=gt.length;for(var an in c)(g||Yr.call(c,an))&&!(rt&&(an=="length"||we&&(an=="offset"||an=="parent")||Ie&&(an=="buffer"||an=="byteLength"||an=="byteOffset")||Mc(an,Et)))&&gt.push(an);return gt}function Bt(c){var g=c.length;return g?c[Bf(0,g-1)]:n}function wt(c,g){return Zp(dl(c),Jn(g,0,c.length))}function Zt(c){return Zp(dl(c))}function $t(c,g,A){(A!==n&&!Au(c[g],A)||A===n&&!(g in c))&&Mn(c,g,A)}function dt(c,g,A){var ee=c[g];(!(Yr.call(c,g)&&Au(ee,A))||A===n&&!(g in c))&&Mn(c,g,A)}function yt(c,g){for(var A=c.length;A--;)if(Au(c[A][0],g))return A;return-1}function tn(c,g,A,ee){return F(c,function(we,Ie,rt){g(ee,we,A(we),rt)}),ee}function hn(c,g){return c&&ec(g,Zo(g),c)}function rn(c,g){return c&&ec(g,gl(g),c)}function Mn(c,g,A){g=="__proto__"&&Ca?Ca(c,g,{configurable:!0,enumerable:!0,value:A,writable:!0}):c[g]=A}function Sn(c,g){for(var A=-1,ee=g.length,we=Mt(ee),Ie=c==null;++A<ee;)we[A]=Ie?n:Pm(c,g[A]);return we}function Jn(c,g,A){return c===c&&(A!==n&&(c=c<=A?c:A),g!==n&&(c=c>=g?c:g)),c}function l(c,g,A,ee,we,Ie){var rt,gt=g&y,Et=g&w,an=g&_;if(A&&(rt=we?A(c,ee,we,Ie):A(c)),rt!==n)return rt;if(!Gs(c))return c;var ln=Xr(c);if(ln){if(rt=p3(c),!gt)return dl(c,rt)}else{var mn=Ma(c),$n=mn==We||mn==Z;if(Qc(c))return Sy(c,gt);if(mn==$e||mn==ce||$n&&!we){if(rt=Et||$n?{}:Vy(c),!gt)return Et?r3(c,rn(rt,c)):n3(c,hn(rt,c))}else{if(!Hr[mn])return we?c:{};rt=g3(c,mn,gt)}}Ie||(Ie=new Ee);var sr=Ie.get(c);if(sr)return sr;Ie.set(c,rt),y2(c)?c.forEach(function(Mr){rt.add(l(Mr,g,A,Mr,c,Ie))}):m2(c)&&c.forEach(function(Mr,xi){rt.set(xi,l(Mr,g,A,xi,c,Ie))});var Pr=an?Et?dm:hm:Et?gl:Zo,ui=ln?n:Pr(c);return Ls(ui||c,function(Mr,xi){ui&&(xi=Mr,Mr=c[xi]),dt(rt,xi,l(Mr,g,A,xi,c,Ie))}),rt}function h(c){var g=Zo(c);return function(A){return v(A,c,g)}}function v(c,g,A){var ee=A.length;if(c==null)return!ee;for(c=bi(c);ee--;){var we=A[ee],Ie=g[we],rt=c[we];if(rt===n&&!(we in c)||!Ie(rt))return!1}return!0}function x(c,g,A){if(typeof c!="function")throw new zi(s);return bd(function(){c.apply(n,A)},g)}function C(c,g,A,ee){var we=-1,Ie=ll,rt=!0,gt=c.length,Et=[],an=g.length;if(!gt)return Et;A&&(g=yi(g,$r(A))),ee?(Ie=ul,rt=!1):g.length>=i&&(Ie=cl,rt=!1,g=new H(g));e:for(;++we<gt;){var ln=c[we],mn=A==null?ln:A(ln);if(ln=ee||ln!==0?ln:0,rt&&mn===mn){for(var $n=an;$n--;)if(g[$n]===mn)continue e;Et.push(ln)}else Ie(g,mn,ee)||Et.push(ln)}return Et}var F=Ay(Jt),Q=Ay(yn,!0);function re(c,g){var A=!0;return F(c,function(ee,we,Ie){return A=!!g(ee,we,Ie),A}),A}function he(c,g,A){for(var ee=-1,we=c.length;++ee<we;){var Ie=c[ee],rt=g(Ie);if(rt!=null&&(gt===n?rt===rt&&!Fl(rt):A(rt,gt)))var gt=rt,Et=Ie}return Et}function Le(c,g,A,ee){var we=c.length;for(A=oi(A),A<0&&(A=-A>we?0:we+A),ee=ee===n||ee>we?we:oi(ee),ee<0&&(ee+=we),ee=A>ee?0:b2(ee);A<ee;)c[A++]=g;return c}function Je(c,g){var A=[];return F(c,function(ee,we,Ie){g(ee,we,Ie)&&A.push(ee)}),A}function ze(c,g,A,ee,we){var Ie=-1,rt=c.length;for(A||(A=v3),we||(we=[]);++Ie<rt;){var gt=c[Ie];g>0&&A(gt)?g>1?ze(gt,g-1,A,ee,we):xo(we,gt):ee||(we[we.length]=gt)}return we}var vt=ky(),At=ky(!0);function Jt(c,g){return c&&vt(c,g,Zo)}function yn(c,g){return c&&At(c,g,Zo)}function bn(c,g){return Vo(g,function(A){return Ac(c[A])})}function ur(c,g){g=Mu(g,c);for(var A=0,ee=g.length;c!=null&&A<ee;)c=c[tc(g[A++])];return A&&A==ee?c:n}function Ye(c,g,A){var ee=g(c);return Xr(c)?ee:xo(ee,A(c))}function tt(c){return c==null?c===n?Ct:pe:Sa&&Sa in bi(c)?f3(c):S3(c)}function ft(c,g){return c>g}function Nt(c,g){return c!=null&&Yr.call(c,g)}function bt(c,g){return c!=null&&g in bi(c)}function Tt(c,g,A){return c>=Ce(g,A)&&c<ie(g,A)}function ge(c,g,A){for(var ee=A?ul:ll,we=c[0].length,Ie=c.length,rt=Ie,gt=Mt(Ie),Et=1/0,an=[];rt--;){var ln=c[rt];rt&&g&&(ln=yi(ln,$r(g))),Et=Ce(ln.length,Et),gt[rt]=!A&&(g||we>=120&&ln.length>=120)?new H(rt&&ln):n}ln=c[0];var mn=-1,$n=gt[0];e:for(;++mn<we&&an.length<Et;){var sr=ln[mn],Pr=g?g(sr):sr;if(sr=A||sr!==0?sr:0,!($n?cl($n,Pr):ee(an,Pr,A))){for(rt=Ie;--rt;){var ui=gt[rt];if(!(ui?cl(ui,Pr):ee(c[rt],Pr,A)))continue e}$n&&$n.push(Pr),an.push(sr)}}return an}function Pe(c,g,A,ee){return Jt(c,function(we,Ie,rt){g(ee,A(we),Ie,rt)}),ee}function Oe(c,g,A){g=Mu(g,c),c=Wy(c,g);var ee=c==null?c:c[tc(su(g))];return ee==null?n:vi(ee,c,A)}function Ne(c){return to(c)&&tt(c)==ce}function Fe(c){return to(c)&&tt(c)==fn}function je(c){return to(c)&&tt(c)==ue}function at(c,g,A,ee,we){return c===g?!0:c==null||g==null||!to(c)&&!to(g)?c!==c&&g!==g:lt(c,g,A,ee,at,we)}function lt(c,g,A,ee,we,Ie){var rt=Xr(c),gt=Xr(g),Et=rt?ye:Ma(c),an=gt?ye:Ma(g);Et=Et==ce?$e:Et,an=an==ce?$e:an;var ln=Et==$e,mn=an==$e,$n=Et==an;if($n&&Qc(c)){if(!Qc(g))return!1;rt=!0,ln=!1}if($n&&!ln)return Ie||(Ie=new Ee),rt||Lh(c)?zy(c,g,A,ee,we,Ie):u3(c,g,Et,A,ee,we,Ie);if(!(A&M)){var sr=ln&&Yr.call(c,"__wrapped__"),Pr=mn&&Yr.call(g,"__wrapped__");if(sr||Pr){var ui=sr?c.value():c,Mr=Pr?g.value():g;return Ie||(Ie=new Ee),we(ui,Mr,A,ee,Ie)}}return $n?(Ie||(Ie=new Ee),c3(c,g,A,ee,we,Ie)):!1}function pt(c){return to(c)&&Ma(c)==de}function Lt(c,g,A,ee){var we=A.length,Ie=we,rt=!ee;if(c==null)return!Ie;for(c=bi(c);we--;){var gt=A[we];if(rt&&gt[2]?gt[1]!==c[gt[0]]:!(gt[0]in c))return!1}for(;++we<Ie;){gt=A[we];var Et=gt[0],an=c[Et],ln=gt[1];if(rt&&gt[2]){if(an===n&&!(Et in c))return!1}else{var mn=new Ee;if(ee)var $n=ee(an,ln,Et,c,g,mn);if(!($n===n?at(ln,an,M|k,ee,mn):$n))return!1}}return!0}function St(c){if(!Gs(c)||_3(c))return!1;var g=Ac(c)?Ni:er;return g.test(Rf(c))}function sn(c){return to(c)&&tt(c)==He}function zn(c){return to(c)&&Ma(c)==Xe}function Hn(c){return to(c)&&e0(c.length)&&!!Sr[tt(c)]}function Xn(c){return typeof c=="function"?c:c==null?ml:typeof c=="object"?Xr(c)?Su(c[0],c[1]):po(c):T2(c)}function gi(c){if(!_d(c))return U(c);var g=[];for(var A in bi(c))Yr.call(c,A)&&A!="constructor"&&g.push(A);return g}function Pi(c){if(!Gs(c))return L3(c);var g=_d(c),A=[];for(var ee in c)ee=="constructor"&&(g||!Yr.call(c,ee))||A.push(ee);return A}function Jr(c,g){return c<g}function Oi(c,g){var A=-1,ee=pl(c)?Mt(c.length):[];return F(c,function(we,Ie,rt){ee[++A]=g(we,Ie,rt)}),ee}function po(c){var g=gm(c);return g.length==1&&g[0][2]?Gy(g[0][0],g[0][1]):function(A){return A===c||Lt(A,c,g)}}function Su(c,g){return vm(c)&&Hy(g)?Gy(tc(c),g):function(A){var ee=Pm(A,c);return ee===n&&ee===g?Mm(A,c):at(g,ee,M|k)}}function ua(c,g,A,ee,we){c!==g&&vt(g,function(Ie,rt){if(we||(we=new Ee),Gs(Ie))Tf(c,g,rt,A,ua,ee,we);else{var gt=ee?ee(_m(c,rt),Ie,rt+"",c,g,we):n;gt===n&&(gt=Ie),$t(c,rt,gt)}},gl)}function Tf(c,g,A,ee,we,Ie,rt){var gt=_m(c,A),Et=_m(g,A),an=rt.get(Et);if(an){$t(c,A,an);return}var ln=Ie?Ie(gt,Et,A+"",c,g,rt):n,mn=ln===n;if(mn){var $n=Xr(Et),sr=!$n&&Qc(Et),Pr=!$n&&!sr&&Lh(Et);ln=Et,$n||sr||Pr?Xr(gt)?ln=gt:go(gt)?ln=dl(gt):sr?(mn=!1,ln=Sy(Et,!0)):Pr?(mn=!1,ln=Cy(Et,!0)):ln=[]:wd(Et)||Ff(Et)?(ln=gt,Ff(gt)?ln=w2(gt):(!Gs(gt)||Ac(gt))&&(ln=Vy(Et))):mn=!1}mn&&(rt.set(Et,ln),we(ln,Et,ee,Ie,rt),rt.delete(Et)),$t(c,A,ln)}function qa(c,g){var A=c.length;if(A)return g+=g<0?A:0,Mc(g,A)?c[g]:n}function Xu(c,g,A){g.length?g=yi(g,function(Ie){return Xr(Ie)?function(rt){return ur(rt,Ie.length===1?Ie[0]:Ie)}:Ie}):g=[ml];var ee=-1;g=yi(g,$r(Cr()));var we=Oi(c,function(Ie,rt,gt){var Et=yi(g,function(an){return an(Ie)});return{criteria:Et,index:++ee,value:Ie}});return hi(we,function(Ie,rt){return t3(Ie,rt,A)})}function ca(c,g){return Hs(c,g,function(A,ee){return Mm(c,ee)})}function Hs(c,g,A){for(var ee=-1,we=g.length,Ie={};++ee<we;){var rt=g[ee],gt=ur(c,rt);A(gt,rt)&&Lc(Ie,Mu(rt,c),gt)}return Ie}function rs(c){return function(g){return ur(g,c)}}function gh(c,g,A,ee){var we=ee?Tn:cn,Ie=-1,rt=g.length,gt=c;for(c===g&&(g=dl(g)),A&&(gt=yi(c,$r(A)));++Ie<rt;)for(var Et=0,an=g[Ie],ln=A?A(an):an;(Et=we(gt,ln,Et,ee))>-1;)gt!==c&&Us.call(gt,Et,1),Us.call(c,Et,1);return c}function Df(c,g){for(var A=c?g.length:0,ee=A-1;A--;){var we=g[A];if(A==ee||we!==Ie){var Ie=we;Mc(we)?Us.call(c,we,1):Sc(c,we)}}return c}function Bf(c,g){return c+Ps(zt()*(g-c+1))}function Nf(c,g,A,ee){for(var we=-1,Ie=ie(Es((g-c)/(A||1)),0),rt=Mt(Ie);Ie--;)rt[ee?Ie:++we]=c,c+=A;return rt}function mh(c,g){var A="";if(!c||g<1||g>Y)return A;do g%2&&(A+=c),g=Ps(g/2),g&&(c+=c);while(g);return A}function si(c,g){return bm(qy(c,g,ml),c+"")}function vh(c){return Bt(Sh(c))}function Ip(c,g){var A=Sh(c);return Zp(A,Jn(g,0,A.length))}function Lc(c,g,A,ee){if(!Gs(c))return c;g=Mu(g,c);for(var we=-1,Ie=g.length,rt=Ie-1,gt=c;gt!=null&&++we<Ie;){var Et=tc(g[we]),an=A;if(Et==="__proto__"||Et==="constructor"||Et==="prototype")return c;if(we!=rt){var ln=gt[Et];an=ee?ee(ln,Et,gt):n,an===n&&(an=Gs(ln)?ln:Mc(g[we+1])?[]:{})}dt(gt,Et,an),gt=gt[Et]}return c}var Cu=$i?function(c,g){return $i.set(c,g),c}:ml,Rp=Ca?function(c,g){return Ca(c,"toString",{configurable:!0,enumerable:!1,value:km(g),writable:!0})}:ml;function Fp(c){return Zp(Sh(c))}function hl(c,g,A){var ee=-1,we=c.length;g<0&&(g=-g>we?0:we+g),A=A>we?we:A,A<0&&(A+=we),we=g>A?0:A-g>>>0,g>>>=0;for(var Ie=Mt(we);++ee<we;)Ie[ee]=c[ee+g];return Ie}function jp(c,g){var A;return F(c,function(ee,we,Ie){return A=g(ee,we,Ie),!A}),!!A}function Eu(c,g,A){var ee=0,we=c==null?ee:c.length;if(typeof g=="number"&&g===g&&we<=ne){for(;ee<we;){var Ie=ee+we>>>1,rt=c[Ie];rt!==null&&!Fl(rt)&&(A?rt<=g:rt<g)?ee=Ie+1:we=Ie}return we}return md(c,g,ml,A)}function md(c,g,A,ee){var we=0,Ie=c==null?0:c.length;if(Ie===0)return 0;g=A(g);for(var rt=g!==g,gt=g===null,Et=Fl(g),an=g===n;we<Ie;){var ln=Ps((we+Ie)/2),mn=A(c[ln]),$n=mn!==n,sr=mn===null,Pr=mn===mn,ui=Fl(mn);if(rt)var Mr=ee||Pr;else an?Mr=Pr&&(ee||$n):gt?Mr=Pr&&$n&&(ee||!sr):Et?Mr=Pr&&$n&&!sr&&(ee||!ui):sr||ui?Mr=!1:Mr=ee?mn<=g:mn<g;Mr?we=ln+1:Ie=ln}return Ce(Ie,T)}function vd(c,g){for(var A=-1,ee=c.length,we=0,Ie=[];++A<ee;){var rt=c[A],gt=g?g(rt):rt;if(!A||!Au(gt,Et)){var Et=gt;Ie[we++]=rt===0?0:rt}}return Ie}function zp(c){return typeof c=="number"?c:Fl(c)?Se:+c}function Pa(c){if(typeof c=="string")return c;if(Xr(c))return yi(c,Pa)+"";if(Fl(c))return Vs?Vs.call(c):"";var g=c+"";return g=="0"&&1/c==-1/0?"-0":g}function Qu(c,g,A){var ee=-1,we=ll,Ie=c.length,rt=!0,gt=[],Et=gt;if(A)rt=!1,we=ul;else if(Ie>=i){var an=g?null:a3(c);if(an)return Xs(an);rt=!1,we=cl,Et=new H}else Et=g?[]:gt;e:for(;++ee<Ie;){var ln=c[ee],mn=g?g(ln):ln;if(ln=A||ln!==0?ln:0,rt&&mn===mn){for(var $n=Et.length;$n--;)if(Et[$n]===mn)continue e;g&&Et.push(mn),gt.push(ln)}else we(Et,mn,A)||(Et!==gt&&Et.push(mn),gt.push(ln))}return gt}function Sc(c,g){return g=Mu(g,c),c=Wy(c,g),c==null||delete c[tc(su(g))]}function yh(c,g,A,ee){return Lc(c,g,A(ur(c,g)),ee)}function Cc(c,g,A,ee){for(var we=c.length,Ie=ee?we:-1;(ee?Ie--:++Ie<we)&&g(c[Ie],Ie,c););return A?hl(c,ee?0:Ie,ee?Ie+1:we):hl(c,ee?Ie+1:0,ee?we:Ie)}function nu(c,g){var A=c;return A instanceof Ur&&(A=A.value()),_a(g,function(ee,we){return we.func.apply(we.thisArg,xo([ee],we.args))},A)}function ru(c,g,A){var ee=c.length;if(ee<2)return ee?Qu(c[0]):[];for(var we=-1,Ie=Mt(ee);++we<ee;)for(var rt=c[we],gt=-1;++gt<ee;)gt!=we&&(Ie[we]=C(Ie[we]||rt,c[gt],g,A));return Qu(ze(Ie,1),g,A)}function Pu(c,g,A){for(var ee=-1,we=c.length,Ie=g.length,rt={};++ee<we;){var gt=ee<Ie?g[ee]:n;A(rt,c[ee],gt)}return rt}function Xc(c){return go(c)?c:[]}function Of(c){return typeof c=="function"?c:ml}function Mu(c,g){return Xr(c)?c:vm(c,g)?[c]:Jy(Hi(c))}var lm=si;function iu(c,g,A){var ee=c.length;return A=A===n?ee:A,!g&&A>=ee?c:hl(c,g,A)}var _h=Go||function(c){return Xi.clearTimeout(c)};function Sy(c,g){if(g)return c.slice();var A=c.length,ee=xu?xu(A):new c.constructor(A);return c.copy(ee),ee}function um(c){var g=new c.constructor(c.byteLength);return new Bo(g).set(new Bo(c)),g}function Xx(c,g){var A=g?um(c.buffer):c.buffer;return new c.constructor(A,c.byteOffset,c.byteLength)}function Qx(c){var g=new c.constructor(c.source,Vr.exec(c));return g.lastIndex=c.lastIndex,g}function e3(c){return pi?bi(pi.call(c)):{}}function Cy(c,g){var A=g?um(c.buffer):c.buffer;return new c.constructor(A,c.byteOffset,c.length)}function Ey(c,g){if(c!==g){var A=c!==n,ee=c===null,we=c===c,Ie=Fl(c),rt=g!==n,gt=g===null,Et=g===g,an=Fl(g);if(!gt&&!an&&!Ie&&c>g||Ie&&rt&&Et&&!gt&&!an||ee&&rt&&Et||!A&&Et||!we)return 1;if(!ee&&!Ie&&!an&&c<g||an&&A&&we&&!ee&&!Ie||gt&&A&&we||!rt&&we||!Et)return-1}return 0}function t3(c,g,A){for(var ee=-1,we=c.criteria,Ie=g.criteria,rt=we.length,gt=A.length;++ee<rt;){var Et=Ey(we[ee],Ie[ee]);if(Et){if(ee>=gt)return Et;var an=A[ee];return Et*(an=="desc"?-1:1)}}return c.index-g.index}function Py(c,g,A,ee){for(var we=-1,Ie=c.length,rt=A.length,gt=-1,Et=g.length,an=ie(Ie-rt,0),ln=Mt(Et+an),mn=!ee;++gt<Et;)ln[gt]=g[gt];for(;++we<rt;)(mn||we<Ie)&&(ln[A[we]]=c[we]);for(;an--;)ln[gt++]=c[we++];return ln}function My(c,g,A,ee){for(var we=-1,Ie=c.length,rt=-1,gt=A.length,Et=-1,an=g.length,ln=ie(Ie-gt,0),mn=Mt(ln+an),$n=!ee;++we<ln;)mn[we]=c[we];for(var sr=we;++Et<an;)mn[sr+Et]=g[Et];for(;++rt<gt;)($n||we<Ie)&&(mn[sr+A[rt]]=c[we++]);return mn}function dl(c,g){var A=-1,ee=c.length;for(g||(g=Mt(ee));++A<ee;)g[A]=c[A];return g}function ec(c,g,A,ee){var we=!A;A||(A={});for(var Ie=-1,rt=g.length;++Ie<rt;){var gt=g[Ie],Et=ee?ee(A[gt],c[gt],gt,A,c):n;Et===n&&(Et=c[gt]),we?Mn(A,gt,Et):dt(A,gt,Et)}return A}function n3(c,g){return ec(c,mm(c),g)}function r3(c,g){return ec(c,$y(c),g)}function $p(c,g){return function(A,ee){var we=Xr(A)?Ku:tn,Ie=g?g():{};return we(A,c,Cr(ee,2),Ie)}}function bh(c){return si(function(g,A){var ee=-1,we=A.length,Ie=we>1?A[we-1]:n,rt=we>2?A[2]:n;for(Ie=c.length>3&&typeof Ie=="function"?(we--,Ie):n,rt&&Wa(A[0],A[1],rt)&&(Ie=we<3?n:Ie,we=1),g=bi(g);++ee<we;){var gt=A[ee];gt&&c(g,gt,ee,Ie)}return g})}function Ay(c,g){return function(A,ee){if(A==null)return A;if(!pl(A))return c(A,ee);for(var we=A.length,Ie=g?we:-1,rt=bi(A);(g?Ie--:++Ie<we)&&ee(rt[Ie],Ie,rt)!==!1;);return A}}function ky(c){return function(g,A,ee){for(var we=-1,Ie=bi(g),rt=ee(g),gt=rt.length;gt--;){var Et=rt[c?gt:++we];if(A(Ie[Et],Et,Ie)===!1)break}return g}}function i3(c,g,A){var ee=g&R,we=yd(c);function Ie(){var rt=this&&this!==Xi&&this instanceof Ie?we:c;return rt.apply(ee?A:this,arguments)}return Ie}function Ty(c){return function(g){g=Hi(g);var A=ta(g)?js(g):n,ee=A?A[0]:g.charAt(0),we=A?iu(A,1).join(""):g.slice(1);return ee[c]()+we}}function wh(c){return function(g){return _a(A2(M2(g).replace(Tr,"")),c,"")}}function yd(c){return function(){var g=arguments;switch(g.length){case 0:return new c;case 1:return new c(g[0]);case 2:return new c(g[0],g[1]);case 3:return new c(g[0],g[1],g[2]);case 4:return new c(g[0],g[1],g[2],g[3]);case 5:return new c(g[0],g[1],g[2],g[3],g[4]);case 6:return new c(g[0],g[1],g[2],g[3],g[4],g[5]);case 7:return new c(g[0],g[1],g[2],g[3],g[4],g[5],g[6])}var A=ho(c.prototype),ee=c.apply(A,g);return Gs(ee)?ee:A}}function s3(c,g,A){var ee=yd(c);function we(){for(var Ie=arguments.length,rt=Mt(Ie),gt=Ie,Et=xh(we);gt--;)rt[gt]=arguments[gt];var an=Ie<3&&rt[0]!==Et&&rt[Ie-1]!==Et?[]:Js(rt,Et);if(Ie-=an.length,Ie<A)return Iy(c,g,Up,we.placeholder,n,rt,an,n,n,A-Ie);var ln=this&&this!==Xi&&this instanceof we?ee:c;return vi(ln,this,rt)}return we}function Dy(c){return function(g,A,ee){var we=bi(g);if(!pl(g)){var Ie=Cr(A,3);g=Zo(g),A=function(gt){return Ie(we[gt],gt,we)}}var rt=c(g,A,ee);return rt>-1?we[Ie?g[rt]:rt]:n}}function By(c){return Pc(function(g){var A=g.length,ee=A,we=As.prototype.thru;for(c&&g.reverse();ee--;){var Ie=g[ee];if(typeof Ie!="function")throw new zi(s);if(we&&!rt&&qp(Ie)=="wrapper")var rt=new As([],!0)}for(ee=rt?ee:A;++ee<A;){Ie=g[ee];var gt=qp(Ie),Et=gt=="wrapper"?pm(Ie):n;Et&&ym(Et[0])&&Et[1]==(xe|J|ae|G)&&!Et[4].length&&Et[9]==1?rt=rt[qp(Et[0])].apply(rt,Et[3]):rt=Ie.length==1&&ym(Ie)?rt[gt]():rt.thru(Ie)}return function(){var an=arguments,ln=an[0];if(rt&&an.length==1&&Xr(ln))return rt.plant(ln).value();for(var mn=0,$n=A?g[mn].apply(this,an):ln;++mn<A;)$n=g[mn].call(this,$n);return $n}})}function Up(c,g,A,ee,we,Ie,rt,gt,Et,an){var ln=g&xe,mn=g&R,$n=g&N,sr=g&(J|te),Pr=g&I,ui=$n?n:yd(c);function Mr(){for(var xi=arguments.length,Mi=Mt(xi),jl=xi;jl--;)Mi[jl]=arguments[jl];if(sr)var Za=xh(Mr),zl=ea(Mi,Za);if(ee&&(Mi=Py(Mi,ee,we,sr)),Ie&&(Mi=My(Mi,Ie,rt,sr)),xi-=zl,sr&&xi<an){var mo=Js(Mi,Za);return Iy(c,g,Up,Mr.placeholder,A,Mi,mo,gt,Et,an-xi)}var ku=mn?A:this,Tc=$n?ku[c]:c;return xi=Mi.length,gt?Mi=C3(Mi,gt):Pr&&xi>1&&Mi.reverse(),ln&&Et<xi&&(Mi.length=Et),this&&this!==Xi&&this instanceof Mr&&(Tc=ui||yd(Tc)),Tc.apply(ku,Mi)}return Mr}function Ny(c,g){return function(A,ee){return Pe(A,c,g(ee),{})}}function Vp(c,g){return function(A,ee){var we;if(A===n&&ee===n)return g;if(A!==n&&(we=A),ee!==n){if(we===n)return ee;typeof A=="string"||typeof ee=="string"?(A=Pa(A),ee=Pa(ee)):(A=zp(A),ee=zp(ee)),we=c(A,ee)}return we}}function cm(c){return Pc(function(g){return g=yi(g,$r(Cr())),si(function(A){var ee=this;return c(g,function(we){return vi(we,ee,A)})})})}function Hp(c,g){g=g===n?" ":Pa(g);var A=g.length;if(A<2)return A?mh(g,c):g;var ee=mh(g,Es(c/Fs(g)));return ta(g)?iu(js(ee),0,c).join(""):ee.slice(0,c)}function o3(c,g,A,ee){var we=g&R,Ie=yd(c);function rt(){for(var gt=-1,Et=arguments.length,an=-1,ln=ee.length,mn=Mt(ln+Et),$n=this&&this!==Xi&&this instanceof rt?Ie:c;++an<ln;)mn[an]=ee[an];for(;Et--;)mn[an++]=arguments[++gt];return vi($n,we?A:this,mn)}return rt}function Oy(c){return function(g,A,ee){return ee&&typeof ee!="number"&&Wa(g,A,ee)&&(A=ee=n),g=kc(g),A===n?(A=g,g=0):A=kc(A),ee=ee===n?g<A?1:-1:kc(ee),Nf(g,A,ee,c)}}function Gp(c){return function(g,A){return typeof g=="string"&&typeof A=="string"||(g=ou(g),A=ou(A)),c(g,A)}}function Iy(c,g,A,ee,we,Ie,rt,gt,Et,an){var ln=g&J,mn=ln?rt:n,$n=ln?n:rt,sr=ln?Ie:n,Pr=ln?n:Ie;g|=ln?ae:le,g&=~(ln?le:ae),g&j||(g&=-4);var ui=[c,g,we,sr,mn,Pr,$n,gt,Et,an],Mr=A.apply(n,ui);return ym(c)&&Zy(Mr,ui),Mr.placeholder=ee,Ky(Mr,c,g)}function fm(c){var g=ji[c];return function(A,ee){if(A=ou(A),ee=ee==null?0:Ce(oi(ee),292),ee&&p(A)){var we=(Hi(A)+"e").split("e"),Ie=g(we[0]+"e"+(+we[1]+ee));return we=(Hi(Ie)+"e").split("e"),+(we[0]+"e"+(+we[1]-ee))}return g(A)}}var a3=fs&&1/Xs(new fs([,-0]))[1]==X?function(c){return new fs(c)}:Bm;function Ry(c){return function(g){var A=Ma(g);return A==de?fl(g):A==Xe?Yu(g):ls(g,c(g))}}function Ec(c,g,A,ee,we,Ie,rt,gt){var Et=g&N;if(!Et&&typeof c!="function")throw new zi(s);var an=ee?ee.length:0;if(an||(g&=-97,ee=we=n),rt=rt===n?rt:ie(oi(rt),0),gt=gt===n?gt:oi(gt),an-=we?we.length:0,g&le){var ln=ee,mn=we;ee=we=n}var $n=Et?n:pm(c),sr=[c,g,A,ee,we,ln,mn,Ie,rt,gt];if($n&&x3(sr,$n),c=sr[0],g=sr[1],A=sr[2],ee=sr[3],we=sr[4],gt=sr[9]=sr[9]===n?Et?0:c.length:ie(sr[9]-an,0),!gt&&g&(J|te)&&(g&=-25),!g||g==R)var Pr=i3(c,g,A);else g==J||g==te?Pr=s3(c,g,gt):(g==ae||g==(R|ae))&&!we.length?Pr=o3(c,g,A,ee):Pr=Up.apply(n,sr);var ui=$n?Cu:Zy;return Ky(ui(Pr,sr),c,g)}function Fy(c,g,A,ee){return c===n||Au(c,ia[A])&&!Yr.call(ee,A)?g:c}function jy(c,g,A,ee,we,Ie){return Gs(c)&&Gs(g)&&(Ie.set(g,c),ua(c,g,n,jy,Ie),Ie.delete(g)),c}function l3(c){return wd(c)?n:c}function zy(c,g,A,ee,we,Ie){var rt=A&M,gt=c.length,Et=g.length;if(gt!=Et&&!(rt&&Et>gt))return!1;var an=Ie.get(c),ln=Ie.get(g);if(an&&ln)return an==g&&ln==c;var mn=-1,$n=!0,sr=A&k?new H:n;for(Ie.set(c,g),Ie.set(g,c);++mn<gt;){var Pr=c[mn],ui=g[mn];if(ee)var Mr=rt?ee(ui,Pr,mn,g,c,Ie):ee(Pr,ui,mn,c,g,Ie);if(Mr!==n){if(Mr)continue;$n=!1;break}if(sr){if(!D(g,function(xi,Mi){if(!cl(sr,Mi)&&(Pr===xi||we(Pr,xi,A,ee,Ie)))return sr.push(Mi)})){$n=!1;break}}else if(!(Pr===ui||we(Pr,ui,A,ee,Ie))){$n=!1;break}}return Ie.delete(c),Ie.delete(g),$n}function u3(c,g,A,ee,we,Ie,rt){switch(A){case pn:if(c.byteLength!=g.byteLength||c.byteOffset!=g.byteOffset)return!1;c=c.buffer,g=g.buffer;case fn:return!(c.byteLength!=g.byteLength||!Ie(new Bo(c),new Bo(g)));case B:case ue:case ve:return Au(+c,+g);case Me:return c.name==g.name&&c.message==g.message;case He:case st:return c==g+"";case de:var gt=fl;case Xe:var Et=ee&M;if(gt||(gt=Xs),c.size!=g.size&&!Et)return!1;var an=rt.get(c);if(an)return an==g;ee|=k,rt.set(c,g);var ln=zy(gt(c),gt(g),ee,we,Ie,rt);return rt.delete(c),ln;case kt:if(pi)return pi.call(c)==pi.call(g)}return!1}function c3(c,g,A,ee,we,Ie){var rt=A&M,gt=hm(c),Et=gt.length,an=hm(g),ln=an.length;if(Et!=ln&&!rt)return!1;for(var mn=Et;mn--;){var $n=gt[mn];if(!(rt?$n in g:Yr.call(g,$n)))return!1}var sr=Ie.get(c),Pr=Ie.get(g);if(sr&&Pr)return sr==g&&Pr==c;var ui=!0;Ie.set(c,g),Ie.set(g,c);for(var Mr=rt;++mn<Et;){$n=gt[mn];var xi=c[$n],Mi=g[$n];if(ee)var jl=rt?ee(Mi,xi,$n,g,c,Ie):ee(xi,Mi,$n,c,g,Ie);if(!(jl===n?xi===Mi||we(xi,Mi,A,ee,Ie):jl)){ui=!1;break}Mr||(Mr=$n=="constructor")}if(ui&&!Mr){var Za=c.constructor,zl=g.constructor;Za!=zl&&"constructor"in c&&"constructor"in g&&!(typeof Za=="function"&&Za instanceof Za&&typeof zl=="function"&&zl instanceof zl)&&(ui=!1)}return Ie.delete(c),Ie.delete(g),ui}function Pc(c){return bm(qy(c,n,t2),c+"")}function hm(c){return Ye(c,Zo,mm)}function dm(c){return Ye(c,gl,$y)}var pm=$i?function(c){return $i.get(c)}:Bm;function qp(c){for(var g=c.name+"",A=fo[g],ee=Yr.call(fo,g)?A.length:0;ee--;){var we=A[ee],Ie=we.func;if(Ie==null||Ie==c)return we.name}return g}function xh(c){var g=Yr.call(Te,"placeholder")?Te:c;return g.placeholder}function Cr(){var c=Te.iteratee||Tm;return c=c===Tm?Xn:c,arguments.length?c(arguments[0],arguments[1]):c}function Wp(c,g){var A=c.__data__;return y3(g)?A[typeof g=="string"?"string":"hash"]:A.map}function gm(c){for(var g=Zo(c),A=g.length;A--;){var ee=g[A],we=c[ee];g[A]=[ee,we,Hy(we)]}return g}function If(c,g){var A=us(c,g);return St(A)?A:n}function f3(c){var g=Yr.call(c,Sa),A=c[Sa];try{c[Sa]=n;var ee=!0}catch{}var we=wi.call(c);return ee&&(g?c[Sa]=A:delete c[Sa]),we}var mm=qo?function(c){return c==null?[]:(c=bi(c),Vo(qo(c),function(g){return Bi.call(c,g)}))}:Nm,$y=qo?function(c){for(var g=[];c;)xo(g,mm(c)),c=aa(c);return g}:Nm,Ma=tt;(Dn&&Ma(new Dn(new ArrayBuffer(1)))!=pn||Yn&&Ma(new Yn)!=de||Rr&&Ma(Rr.resolve())!=Qe||fs&&Ma(new fs)!=Xe||Wi&&Ma(new Wi)!=Ut)&&(Ma=function(c){var g=tt(c),A=g==$e?c.constructor:n,ee=A?Rf(A):"";if(ee)switch(ee){case wc:return pn;case la:return de;case Wo:return Qe;case No:return Xe;case Af:return Ut}return g});function h3(c,g,A){for(var ee=-1,we=A.length;++ee<we;){var Ie=A[ee],rt=Ie.size;switch(Ie.type){case"drop":c+=rt;break;case"dropRight":g-=rt;break;case"take":g=Ce(g,c+rt);break;case"takeRight":c=ie(c,g-rt);break}}return{start:c,end:g}}function d3(c){var g=c.match(On);return g?g[1].split(xr):[]}function Uy(c,g,A){g=Mu(g,c);for(var ee=-1,we=g.length,Ie=!1;++ee<we;){var rt=tc(g[ee]);if(!(Ie=c!=null&&A(c,rt)))break;c=c[rt]}return Ie||++ee!=we?Ie:(we=c==null?0:c.length,!!we&&e0(we)&&Mc(rt,we)&&(Xr(c)||Ff(c)))}function p3(c){var g=c.length,A=new c.constructor(g);return g&&typeof c[0]=="string"&&Yr.call(c,"index")&&(A.index=c.index,A.input=c.input),A}function Vy(c){return typeof c.constructor=="function"&&!_d(c)?ho(aa(c)):{}}function g3(c,g,A){var ee=c.constructor;switch(g){case fn:return um(c);case B:case ue:return new ee(+c);case pn:return Xx(c,A);case et:case it:case nt:case Vt:case Qt:case Nn:case wn:case An:case or:return Cy(c,A);case de:return new ee;case ve:case st:return new ee(c);case He:return Qx(c);case Xe:return new ee;case kt:return e3(c)}}function m3(c,g){var A=g.length;if(!A)return c;var ee=A-1;return g[ee]=(A>1?"& ":"")+g[ee],g=g.join(A>2?", ":" "),c.replace(ct,`{
/* [wrapped with `+g+`] */
`)}function v3(c){return Xr(c)||Ff(c)||!!(co&&c&&c[co])}function Mc(c,g){var A=typeof c;return g=g??Y,!!g&&(A=="number"||A!="symbol"&&qi.test(c))&&c>-1&&c%1==0&&c<g}function Wa(c,g,A){if(!Gs(A))return!1;var ee=typeof g;return(ee=="number"?pl(A)&&Mc(g,A.length):ee=="string"&&g in A)?Au(A[g],c):!1}function vm(c,g){if(Xr(c))return!1;var A=typeof c;return A=="number"||A=="symbol"||A=="boolean"||c==null||Fl(c)?!0:Xt.test(c)||!Wn.test(c)||g!=null&&c in bi(g)}function y3(c){var g=typeof c;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?c!=="__proto__":c===null}function ym(c){var g=qp(c),A=Te[g];if(typeof A!="function"||!(g in Ur.prototype))return!1;if(c===A)return!0;var ee=pm(A);return!!ee&&c===ee[0]}function _3(c){return!!Cs&&Cs in c}var b3=sa?Ac:Om;function _d(c){var g=c&&c.constructor,A=typeof g=="function"&&g.prototype||ia;return c===A}function Hy(c){return c===c&&!Gs(c)}function Gy(c,g){return function(A){return A==null?!1:A[c]===g&&(g!==n||c in bi(A))}}function w3(c){var g=Xp(c,function(ee){return A.size===d&&A.clear(),ee}),A=g.cache;return g}function x3(c,g){var A=c[1],ee=g[1],we=A|ee,Ie=we<(R|N|xe),rt=ee==xe&&A==J||ee==xe&&A==G&&c[7].length<=g[8]||ee==(xe|G)&&g[7].length<=g[8]&&A==J;if(!(Ie||rt))return c;ee&R&&(c[2]=g[2],we|=A&R?0:j);var gt=g[3];if(gt){var Et=c[3];c[3]=Et?Py(Et,gt,g[4]):gt,c[4]=Et?Js(c[3],m):g[4]}return gt=g[5],gt&&(Et=c[5],c[5]=Et?My(Et,gt,g[6]):gt,c[6]=Et?Js(c[5],m):g[6]),gt=g[7],gt&&(c[7]=gt),ee&xe&&(c[8]=c[8]==null?g[8]:Ce(c[8],g[8])),c[9]==null&&(c[9]=g[9]),c[0]=g[0],c[1]=we,c}function L3(c){var g=[];if(c!=null)for(var A in bi(c))g.push(A);return g}function S3(c){return wi.call(c)}function qy(c,g,A){return g=ie(g===n?c.length-1:g,0),function(){for(var ee=arguments,we=-1,Ie=ie(ee.length-g,0),rt=Mt(Ie);++we<Ie;)rt[we]=ee[g+we];we=-1;for(var gt=Mt(g+1);++we<g;)gt[we]=ee[we];return gt[g]=A(rt),vi(c,this,gt)}}function Wy(c,g){return g.length<2?c:ur(c,hl(g,0,-1))}function C3(c,g){for(var A=c.length,ee=Ce(g.length,A),we=dl(c);ee--;){var Ie=g[ee];c[ee]=Mc(Ie,A)?we[Ie]:n}return c}function _m(c,g){if(!(g==="constructor"&&typeof c[g]=="function")&&g!="__proto__")return c[g]}var Zy=Yy(Cu),bd=bc||function(c,g){return Xi.setTimeout(c,g)},bm=Yy(Rp);function Ky(c,g,A){var ee=g+"";return bm(c,m3(ee,E3(d3(ee),A)))}function Yy(c){var g=0,A=0;return function(){var ee=ot(),we=z-(ee-A);if(A=ee,we>0){if(++g>=O)return arguments[0]}else g=0;return c.apply(n,arguments)}}function Zp(c,g){var A=-1,ee=c.length,we=ee-1;for(g=g===n?ee:g;++A<g;){var Ie=Bf(A,we),rt=c[Ie];c[Ie]=c[A],c[A]=rt}return c.length=g,c}var Jy=w3(function(c){var g=[];return c.charCodeAt(0)===46&&g.push(""),c.replace(vn,function(A,ee,we,Ie){g.push(we?Ie.replace(Er,"$1"):ee||A)}),g});function tc(c){if(typeof c=="string"||Fl(c))return c;var g=c+"";return g=="0"&&1/c==-1/0?"-0":g}function Rf(c){if(c!=null){try{return oa.call(c)}catch{}try{return c+""}catch{}}return""}function E3(c,g){return Ls(fe,function(A){var ee="_."+A[0];g&A[1]&&!ll(c,ee)&&c.push(ee)}),c.sort()}function Xy(c){if(c instanceof Ur)return c.clone();var g=new As(c.__wrapped__,c.__chain__);return g.__actions__=dl(c.__actions__),g.__index__=c.__index__,g.__values__=c.__values__,g}function P3(c,g,A){(A?Wa(c,g,A):g===n)?g=1:g=ie(oi(g),0);var ee=c==null?0:c.length;if(!ee||g<1)return[];for(var we=0,Ie=0,rt=Mt(Es(ee/g));we<ee;)rt[Ie++]=hl(c,we,we+=g);return rt}function M3(c){for(var g=-1,A=c==null?0:c.length,ee=0,we=[];++g<A;){var Ie=c[g];Ie&&(we[ee++]=Ie)}return we}function A3(){var c=arguments.length;if(!c)return[];for(var g=Mt(c-1),A=arguments[0],ee=c;ee--;)g[ee-1]=arguments[ee];return xo(Xr(A)?dl(A):[A],ze(g,1))}var k3=si(function(c,g){return go(c)?C(c,ze(g,1,go,!0)):[]}),T3=si(function(c,g){var A=su(g);return go(A)&&(A=n),go(c)?C(c,ze(g,1,go,!0),Cr(A,2)):[]}),D3=si(function(c,g){var A=su(g);return go(A)&&(A=n),go(c)?C(c,ze(g,1,go,!0),n,A):[]});function B3(c,g,A){var ee=c==null?0:c.length;return ee?(g=A||g===n?1:oi(g),hl(c,g<0?0:g,ee)):[]}function N3(c,g,A){var ee=c==null?0:c.length;return ee?(g=A||g===n?1:oi(g),g=ee-g,hl(c,0,g<0?0:g)):[]}function O3(c,g){return c&&c.length?Cc(c,Cr(g,3),!0,!0):[]}function I3(c,g){return c&&c.length?Cc(c,Cr(g,3),!0):[]}function R3(c,g,A,ee){var we=c==null?0:c.length;return we?(A&&typeof A!="number"&&Wa(c,g,A)&&(A=0,ee=we),Le(c,g,A,ee)):[]}function Qy(c,g,A){var ee=c==null?0:c.length;if(!ee)return-1;var we=A==null?0:oi(A);return we<0&&(we=ie(ee+we,0)),jt(c,Cr(g,3),we)}function e2(c,g,A){var ee=c==null?0:c.length;if(!ee)return-1;var we=ee-1;return A!==n&&(we=oi(A),we=A<0?ie(ee+we,0):Ce(we,ee-1)),jt(c,Cr(g,3),we,!0)}function t2(c){var g=c==null?0:c.length;return g?ze(c,1):[]}function F3(c){var g=c==null?0:c.length;return g?ze(c,X):[]}function j3(c,g){var A=c==null?0:c.length;return A?(g=g===n?1:oi(g),ze(c,g)):[]}function z3(c){for(var g=-1,A=c==null?0:c.length,ee={};++g<A;){var we=c[g];ee[we[0]]=we[1]}return ee}function n2(c){return c&&c.length?c[0]:n}function $3(c,g,A){var ee=c==null?0:c.length;if(!ee)return-1;var we=A==null?0:oi(A);return we<0&&(we=ie(ee+we,0)),cn(c,g,we)}function U3(c){var g=c==null?0:c.length;return g?hl(c,0,-1):[]}var V3=si(function(c){var g=yi(c,Xc);return g.length&&g[0]===c[0]?ge(g):[]}),H3=si(function(c){var g=su(c),A=yi(c,Xc);return g===su(A)?g=n:A.pop(),A.length&&A[0]===c[0]?ge(A,Cr(g,2)):[]}),G3=si(function(c){var g=su(c),A=yi(c,Xc);return g=typeof g=="function"?g:n,g&&A.pop(),A.length&&A[0]===c[0]?ge(A,n,g):[]});function q3(c,g){return c==null?"":S.call(c,g)}function su(c){var g=c==null?0:c.length;return g?c[g-1]:n}function W3(c,g,A){var ee=c==null?0:c.length;if(!ee)return-1;var we=ee;return A!==n&&(we=oi(A),we=we<0?ie(ee+we,0):Ce(we,ee-1)),g===g?ba(c,g,we):jt(c,jn,we,!0)}function Z3(c,g){return c&&c.length?qa(c,oi(g)):n}var K3=si(r2);function r2(c,g){return c&&c.length&&g&&g.length?gh(c,g):c}function Y3(c,g,A){return c&&c.length&&g&&g.length?gh(c,g,Cr(A,2)):c}function J3(c,g,A){return c&&c.length&&g&&g.length?gh(c,g,n,A):c}var X3=Pc(function(c,g){var A=c==null?0:c.length,ee=Sn(c,g);return Df(c,yi(g,function(we){return Mc(we,A)?+we:we}).sort(Ey)),ee});function Q3(c,g){var A=[];if(!(c&&c.length))return A;var ee=-1,we=[],Ie=c.length;for(g=Cr(g,3);++ee<Ie;){var rt=c[ee];g(rt,ee,c)&&(A.push(rt),we.push(ee))}return Df(c,we),A}function wm(c){return c==null?c:on.call(c)}function eL(c,g,A){var ee=c==null?0:c.length;return ee?(A&&typeof A!="number"&&Wa(c,g,A)?(g=0,A=ee):(g=g==null?0:oi(g),A=A===n?ee:oi(A)),hl(c,g,A)):[]}function tL(c,g){return Eu(c,g)}function nL(c,g,A){return md(c,g,Cr(A,2))}function rL(c,g){var A=c==null?0:c.length;if(A){var ee=Eu(c,g);if(ee<A&&Au(c[ee],g))return ee}return-1}function iL(c,g){return Eu(c,g,!0)}function sL(c,g,A){return md(c,g,Cr(A,2),!0)}function oL(c,g){var A=c==null?0:c.length;if(A){var ee=Eu(c,g,!0)-1;if(Au(c[ee],g))return ee}return-1}function aL(c){return c&&c.length?vd(c):[]}function lL(c,g){return c&&c.length?vd(c,Cr(g,2)):[]}function uL(c){var g=c==null?0:c.length;return g?hl(c,1,g):[]}function cL(c,g,A){return c&&c.length?(g=A||g===n?1:oi(g),hl(c,0,g<0?0:g)):[]}function fL(c,g,A){var ee=c==null?0:c.length;return ee?(g=A||g===n?1:oi(g),g=ee-g,hl(c,g<0?0:g,ee)):[]}function hL(c,g){return c&&c.length?Cc(c,Cr(g,3),!1,!0):[]}function dL(c,g){return c&&c.length?Cc(c,Cr(g,3)):[]}var pL=si(function(c){return Qu(ze(c,1,go,!0))}),gL=si(function(c){var g=su(c);return go(g)&&(g=n),Qu(ze(c,1,go,!0),Cr(g,2))}),mL=si(function(c){var g=su(c);return g=typeof g=="function"?g:n,Qu(ze(c,1,go,!0),n,g)});function vL(c){return c&&c.length?Qu(c):[]}function yL(c,g){return c&&c.length?Qu(c,Cr(g,2)):[]}function _L(c,g){return g=typeof g=="function"?g:n,c&&c.length?Qu(c,n,g):[]}function xm(c){if(!(c&&c.length))return[];var g=0;return c=Vo(c,function(A){if(go(A))return g=ie(A.length,g),!0}),ts(g,function(A){return yi(c,vr(A))})}function i2(c,g){if(!(c&&c.length))return[];var A=xm(c);return g==null?A:yi(A,function(ee){return vi(g,n,ee)})}var bL=si(function(c,g){return go(c)?C(c,g):[]}),wL=si(function(c){return ru(Vo(c,go))}),xL=si(function(c){var g=su(c);return go(g)&&(g=n),ru(Vo(c,go),Cr(g,2))}),LL=si(function(c){var g=su(c);return g=typeof g=="function"?g:n,ru(Vo(c,go),n,g)}),SL=si(xm);function CL(c,g){return Pu(c||[],g||[],dt)}function EL(c,g){return Pu(c||[],g||[],Lc)}var PL=si(function(c){var g=c.length,A=g>1?c[g-1]:n;return A=typeof A=="function"?(c.pop(),A):n,i2(c,A)});function s2(c){var g=Te(c);return g.__chain__=!0,g}function ML(c,g){return g(c),c}function Kp(c,g){return g(c)}var AL=Pc(function(c){var g=c.length,A=g?c[0]:0,ee=this.__wrapped__,we=function(Ie){return Sn(Ie,c)};return g>1||this.__actions__.length||!(ee instanceof Ur)||!Mc(A)?this.thru(we):(ee=ee.slice(A,+A+(g?1:0)),ee.__actions__.push({func:Kp,args:[we],thisArg:n}),new As(ee,this.__chain__).thru(function(Ie){return g&&!Ie.length&&Ie.push(n),Ie}))});function kL(){return s2(this)}function TL(){return new As(this.value(),this.__chain__)}function DL(){this.__values__===n&&(this.__values__=_2(this.value()));var c=this.__index__>=this.__values__.length,g=c?n:this.__values__[this.__index__++];return{done:c,value:g}}function BL(){return this}function NL(c){for(var g,A=this;A instanceof Lu;){var ee=Xy(A);ee.__index__=0,ee.__values__=n,g?we.__wrapped__=ee:g=ee;var we=ee;A=A.__wrapped__}return we.__wrapped__=c,g}function OL(){var c=this.__wrapped__;if(c instanceof Ur){var g=c;return this.__actions__.length&&(g=new Ur(this)),g=g.reverse(),g.__actions__.push({func:Kp,args:[wm],thisArg:n}),new As(g,this.__chain__)}return this.thru(wm)}function IL(){return nu(this.__wrapped__,this.__actions__)}var RL=$p(function(c,g,A){Yr.call(c,A)?++c[A]:Mn(c,A,1)});function FL(c,g,A){var ee=Xr(c)?Ol:re;return A&&Wa(c,g,A)&&(g=n),ee(c,Cr(g,3))}function jL(c,g){var A=Xr(c)?Vo:Je;return A(c,Cr(g,3))}var zL=Dy(Qy),$L=Dy(e2);function UL(c,g){return ze(Yp(c,g),1)}function VL(c,g){return ze(Yp(c,g),X)}function HL(c,g,A){return A=A===n?1:oi(A),ze(Yp(c,g),A)}function o2(c,g){var A=Xr(c)?Ls:F;return A(c,Cr(g,3))}function a2(c,g){var A=Xr(c)?Uo:Q;return A(c,Cr(g,3))}var GL=$p(function(c,g,A){Yr.call(c,A)?c[A].push(g):Mn(c,A,[g])});function qL(c,g,A,ee){c=pl(c)?c:Sh(c),A=A&&!ee?oi(A):0;var we=c.length;return A<0&&(A=ie(we+A,0)),t0(c)?A<=we&&c.indexOf(g,A)>-1:!!we&&cn(c,g,A)>-1}var WL=si(function(c,g,A){var ee=-1,we=typeof g=="function",Ie=pl(c)?Mt(c.length):[];return F(c,function(rt){Ie[++ee]=we?vi(g,rt,A):Oe(rt,g,A)}),Ie}),ZL=$p(function(c,g,A){Mn(c,A,g)});function Yp(c,g){var A=Xr(c)?yi:Oi;return A(c,Cr(g,3))}function KL(c,g,A,ee){return c==null?[]:(Xr(g)||(g=g==null?[]:[g]),A=ee?n:A,Xr(A)||(A=A==null?[]:[A]),Xu(c,g,A))}var YL=$p(function(c,g,A){c[A?0:1].push(g)},function(){return[[],[]]});function JL(c,g,A){var ee=Xr(c)?_a:Ri,we=arguments.length<3;return ee(c,Cr(g,4),A,we,F)}function XL(c,g,A){var ee=Xr(c)?es:Ri,we=arguments.length<3;return ee(c,Cr(g,4),A,we,Q)}function QL(c,g){var A=Xr(c)?Vo:Je;return A(c,Qp(Cr(g,3)))}function eS(c){var g=Xr(c)?Bt:vh;return g(c)}function tS(c,g,A){(A?Wa(c,g,A):g===n)?g=1:g=oi(g);var ee=Xr(c)?wt:Ip;return ee(c,g)}function nS(c){var g=Xr(c)?Zt:Fp;return g(c)}function rS(c){if(c==null)return 0;if(pl(c))return t0(c)?Fs(c):c.length;var g=Ma(c);return g==de||g==Xe?c.size:gi(c).length}function iS(c,g,A){var ee=Xr(c)?D:jp;return A&&Wa(c,g,A)&&(g=n),ee(c,Cr(g,3))}var sS=si(function(c,g){if(c==null)return[];var A=g.length;return A>1&&Wa(c,g[0],g[1])?g=[]:A>2&&Wa(g[0],g[1],g[2])&&(g=[g[0]]),Xu(c,ze(g,1),[])}),Jp=eo||function(){return Xi.Date.now()};function oS(c,g){if(typeof g!="function")throw new zi(s);return c=oi(c),function(){if(--c<1)return g.apply(this,arguments)}}function l2(c,g,A){return g=A?n:g,g=c&&g==null?c.length:g,Ec(c,xe,n,n,n,n,g)}function u2(c,g){var A;if(typeof g!="function")throw new zi(s);return c=oi(c),function(){return--c>0&&(A=g.apply(this,arguments)),c<=1&&(g=n),A}}var Lm=si(function(c,g,A){var ee=R;if(A.length){var we=Js(A,xh(Lm));ee|=ae}return Ec(c,ee,g,A,we)}),c2=si(function(c,g,A){var ee=R|N;if(A.length){var we=Js(A,xh(c2));ee|=ae}return Ec(g,ee,c,A,we)});function f2(c,g,A){g=A?n:g;var ee=Ec(c,J,n,n,n,n,n,g);return ee.placeholder=f2.placeholder,ee}function h2(c,g,A){g=A?n:g;var ee=Ec(c,te,n,n,n,n,n,g);return ee.placeholder=h2.placeholder,ee}function d2(c,g,A){var ee,we,Ie,rt,gt,Et,an=0,ln=!1,mn=!1,$n=!0;if(typeof c!="function")throw new zi(s);g=ou(g)||0,Gs(A)&&(ln=!!A.leading,mn="maxWait"in A,Ie=mn?ie(ou(A.maxWait)||0,g):Ie,$n="trailing"in A?!!A.trailing:$n);function sr(mo){var ku=ee,Tc=we;return ee=we=n,an=mo,rt=c.apply(Tc,ku),rt}function Pr(mo){return an=mo,gt=bd(xi,g),ln?sr(mo):rt}function ui(mo){var ku=mo-Et,Tc=mo-an,D2=g-ku;return mn?Ce(D2,Ie-Tc):D2}function Mr(mo){var ku=mo-Et,Tc=mo-an;return Et===n||ku>=g||ku<0||mn&&Tc>=Ie}function xi(){var mo=Jp();if(Mr(mo))return Mi(mo);gt=bd(xi,ui(mo))}function Mi(mo){return gt=n,$n&&ee?sr(mo):(ee=we=n,rt)}function jl(){gt!==n&&_h(gt),an=0,ee=Et=we=gt=n}function Za(){return gt===n?rt:Mi(Jp())}function zl(){var mo=Jp(),ku=Mr(mo);if(ee=arguments,we=this,Et=mo,ku){if(gt===n)return Pr(Et);if(mn)return _h(gt),gt=bd(xi,g),sr(Et)}return gt===n&&(gt=bd(xi,g)),rt}return zl.cancel=jl,zl.flush=Za,zl}var aS=si(function(c,g){return x(c,1,g)}),lS=si(function(c,g,A){return x(c,ou(g)||0,A)});function uS(c){return Ec(c,I)}function Xp(c,g){if(typeof c!="function"||g!=null&&typeof g!="function")throw new zi(s);var A=function(){var ee=arguments,we=g?g.apply(this,ee):ee[0],Ie=A.cache;if(Ie.has(we))return Ie.get(we);var rt=c.apply(this,ee);return A.cache=Ie.set(we,rt)||Ie,rt};return A.cache=new(Xp.Cache||Ea),A}Xp.Cache=Ea;function Qp(c){if(typeof c!="function")throw new zi(s);return function(){var g=arguments;switch(g.length){case 0:return!c.call(this);case 1:return!c.call(this,g[0]);case 2:return!c.call(this,g[0],g[1]);case 3:return!c.call(this,g[0],g[1],g[2])}return!c.apply(this,g)}}function cS(c){return u2(2,c)}var fS=lm(function(c,g){g=g.length==1&&Xr(g[0])?yi(g[0],$r(Cr())):yi(ze(g,1),$r(Cr()));var A=g.length;return si(function(ee){for(var we=-1,Ie=Ce(ee.length,A);++we<Ie;)ee[we]=g[we].call(this,ee[we]);return vi(c,this,ee)})}),Sm=si(function(c,g){var A=Js(g,xh(Sm));return Ec(c,ae,n,g,A)}),p2=si(function(c,g){var A=Js(g,xh(p2));return Ec(c,le,n,g,A)}),hS=Pc(function(c,g){return Ec(c,G,n,n,n,g)});function dS(c,g){if(typeof c!="function")throw new zi(s);return g=g===n?g:oi(g),si(c,g)}function pS(c,g){if(typeof c!="function")throw new zi(s);return g=g==null?0:ie(oi(g),0),si(function(A){var ee=A[g],we=iu(A,0,g);return ee&&xo(we,ee),vi(c,this,we)})}function gS(c,g,A){var ee=!0,we=!0;if(typeof c!="function")throw new zi(s);return Gs(A)&&(ee="leading"in A?!!A.leading:ee,we="trailing"in A?!!A.trailing:we),d2(c,g,{leading:ee,maxWait:g,trailing:we})}function mS(c){return l2(c,1)}function vS(c,g){return Sm(Of(g),c)}function yS(){if(!arguments.length)return[];var c=arguments[0];return Xr(c)?c:[c]}function _S(c){return l(c,_)}function bS(c,g){return g=typeof g=="function"?g:n,l(c,_,g)}function wS(c){return l(c,y|_)}function xS(c,g){return g=typeof g=="function"?g:n,l(c,y|_,g)}function LS(c,g){return g==null||v(c,g,Zo(g))}function Au(c,g){return c===g||c!==c&&g!==g}var SS=Gp(ft),CS=Gp(function(c,g){return c>=g}),Ff=Ne(function(){return arguments}())?Ne:function(c){return to(c)&&Yr.call(c,"callee")&&!Bi.call(c,"callee")},Xr=Mt.isArray,ES=Ql?$r(Ql):Fe;function pl(c){return c!=null&&e0(c.length)&&!Ac(c)}function go(c){return to(c)&&pl(c)}function PS(c){return c===!0||c===!1||to(c)&&tt(c)==B}var Qc=a||Om,MS=Qo?$r(Qo):je;function AS(c){return to(c)&&c.nodeType===1&&!wd(c)}function kS(c){if(c==null)return!0;if(pl(c)&&(Xr(c)||typeof c=="string"||typeof c.splice=="function"||Qc(c)||Lh(c)||Ff(c)))return!c.length;var g=Ma(c);if(g==de||g==Xe)return!c.size;if(_d(c))return!gi(c).length;for(var A in c)if(Yr.call(c,A))return!1;return!0}function TS(c,g){return at(c,g)}function DS(c,g,A){A=typeof A=="function"?A:n;var ee=A?A(c,g):n;return ee===n?at(c,g,n,A):!!ee}function Cm(c){if(!to(c))return!1;var g=tt(c);return g==Me||g==De||typeof c.message=="string"&&typeof c.name=="string"&&!wd(c)}function BS(c){return typeof c=="number"&&p(c)}function Ac(c){if(!Gs(c))return!1;var g=tt(c);return g==We||g==Z||g==oe||g==Ke}function g2(c){return typeof c=="number"&&c==oi(c)}function e0(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=Y}function Gs(c){var g=typeof c;return c!=null&&(g=="object"||g=="function")}function to(c){return c!=null&&typeof c=="object"}var m2=Dl?$r(Dl):pt;function NS(c,g){return c===g||Lt(c,g,gm(g))}function OS(c,g,A){return A=typeof A=="function"?A:n,Lt(c,g,gm(g),A)}function IS(c){return v2(c)&&c!=+c}function RS(c){if(b3(c))throw new Zn(o);return St(c)}function FS(c){return c===null}function jS(c){return c==null}function v2(c){return typeof c=="number"||to(c)&&tt(c)==ve}function wd(c){if(!to(c)||tt(c)!=$e)return!1;var g=aa(c);if(g===null)return!0;var A=Yr.call(g,"constructor")&&g.constructor;return typeof A=="function"&&A instanceof A&&oa.call(A)==Ei}var Em=Bl?$r(Bl):sn;function zS(c){return g2(c)&&c>=-9007199254740991&&c<=Y}var y2=Do?$r(Do):zn;function t0(c){return typeof c=="string"||!Xr(c)&&to(c)&&tt(c)==st}function Fl(c){return typeof c=="symbol"||to(c)&&tt(c)==kt}var Lh=Nl?$r(Nl):Hn;function $S(c){return c===n}function US(c){return to(c)&&Ma(c)==Ut}function VS(c){return to(c)&&tt(c)==Gt}var HS=Gp(Jr),GS=Gp(function(c,g){return c<=g});function _2(c){if(!c)return[];if(pl(c))return t0(c)?js(c):dl(c);if(dr&&c[dr])return lo(c[dr]());var g=Ma(c),A=g==de?fl:g==Xe?Xs:Sh;return A(c)}function kc(c){if(!c)return c===0?c:0;if(c=ou(c),c===X||c===-1/0){var g=c<0?-1:1;return g*me}return c===c?c:0}function oi(c){var g=kc(c),A=g%1;return g===g?A?g-A:g:0}function b2(c){return c?Jn(oi(c),0,Re):0}function ou(c){if(typeof c=="number")return c;if(Fl(c))return Se;if(Gs(c)){var g=typeof c.valueOf=="function"?c.valueOf():c;c=Gs(g)?g+"":g}if(typeof c!="string")return c===0?c:+c;c=Lo(c);var A=Or.test(c);return A||en.test(c)?Tl(c.slice(2),A?2:8):rr.test(c)?Se:+c}function w2(c){return ec(c,gl(c))}function qS(c){return c?Jn(oi(c),-9007199254740991,Y):c===0?c:0}function Hi(c){return c==null?"":Pa(c)}var WS=bh(function(c,g){if(_d(g)||pl(g)){ec(g,Zo(g),c);return}for(var A in g)Yr.call(g,A)&&dt(c,A,g[A])}),x2=bh(function(c,g){ec(g,gl(g),c)}),n0=bh(function(c,g,A,ee){ec(g,gl(g),c,ee)}),ZS=bh(function(c,g,A,ee){ec(g,Zo(g),c,ee)}),KS=Pc(Sn);function YS(c,g){var A=ho(c);return g==null?A:hn(A,g)}var JS=si(function(c,g){c=bi(c);var A=-1,ee=g.length,we=ee>2?g[2]:n;for(we&&Wa(g[0],g[1],we)&&(ee=1);++A<ee;)for(var Ie=g[A],rt=gl(Ie),gt=-1,Et=rt.length;++gt<Et;){var an=rt[gt],ln=c[an];(ln===n||Au(ln,ia[an])&&!Yr.call(c,an))&&(c[an]=Ie[an])}return c}),XS=si(function(c){return c.push(n,jy),vi(L2,n,c)});function QS(c,g){return xt(c,Cr(g,3),Jt)}function eC(c,g){return xt(c,Cr(g,3),yn)}function tC(c,g){return c==null?c:vt(c,Cr(g,3),gl)}function nC(c,g){return c==null?c:At(c,Cr(g,3),gl)}function rC(c,g){return c&&Jt(c,Cr(g,3))}function iC(c,g){return c&&yn(c,Cr(g,3))}function sC(c){return c==null?[]:bn(c,Zo(c))}function oC(c){return c==null?[]:bn(c,gl(c))}function Pm(c,g,A){var ee=c==null?n:ur(c,g);return ee===n?A:ee}function aC(c,g){return c!=null&&Uy(c,g,Nt)}function Mm(c,g){return c!=null&&Uy(c,g,bt)}var lC=Ny(function(c,g,A){g!=null&&typeof g.toString!="function"&&(g=wi.call(g)),c[g]=A},km(ml)),uC=Ny(function(c,g,A){g!=null&&typeof g.toString!="function"&&(g=wi.call(g)),Yr.call(c,g)?c[g].push(A):c[g]=[A]},Cr),cC=si(Oe);function Zo(c){return pl(c)?Dt(c):gi(c)}function gl(c){return pl(c)?Dt(c,!0):Pi(c)}function fC(c,g){var A={};return g=Cr(g,3),Jt(c,function(ee,we,Ie){Mn(A,g(ee,we,Ie),ee)}),A}function hC(c,g){var A={};return g=Cr(g,3),Jt(c,function(ee,we,Ie){Mn(A,we,g(ee,we,Ie))}),A}var dC=bh(function(c,g,A){ua(c,g,A)}),L2=bh(function(c,g,A,ee){ua(c,g,A,ee)}),pC=Pc(function(c,g){var A={};if(c==null)return A;var ee=!1;g=yi(g,function(Ie){return Ie=Mu(Ie,c),ee||(ee=Ie.length>1),Ie}),ec(c,dm(c),A),ee&&(A=l(A,y|w|_,l3));for(var we=g.length;we--;)Sc(A,g[we]);return A});function gC(c,g){return S2(c,Qp(Cr(g)))}var mC=Pc(function(c,g){return c==null?{}:ca(c,g)});function S2(c,g){if(c==null)return{};var A=yi(dm(c),function(ee){return[ee]});return g=Cr(g),Hs(c,A,function(ee,we){return g(ee,we[0])})}function vC(c,g,A){g=Mu(g,c);var ee=-1,we=g.length;for(we||(we=1,c=n);++ee<we;){var Ie=c==null?n:c[tc(g[ee])];Ie===n&&(ee=we,Ie=A),c=Ac(Ie)?Ie.call(c):Ie}return c}function yC(c,g,A){return c==null?c:Lc(c,g,A)}function _C(c,g,A,ee){return ee=typeof ee=="function"?ee:n,c==null?c:Lc(c,g,A,ee)}var C2=Ry(Zo),E2=Ry(gl);function bC(c,g,A){var ee=Xr(c),we=ee||Qc(c)||Lh(c);if(g=Cr(g,4),A==null){var Ie=c&&c.constructor;we?A=ee?new Ie:[]:Gs(c)?A=Ac(Ie)?ho(aa(c)):{}:A={}}return(we?Ls:Jt)(c,function(rt,gt,Et){return g(A,rt,gt,Et)}),A}function wC(c,g){return c==null?!0:Sc(c,g)}function xC(c,g,A){return c==null?c:yh(c,g,Of(A))}function LC(c,g,A,ee){return ee=typeof ee=="function"?ee:n,c==null?c:yh(c,g,Of(A),ee)}function Sh(c){return c==null?[]:Is(c,Zo(c))}function SC(c){return c==null?[]:Is(c,gl(c))}function CC(c,g,A){return A===n&&(A=g,g=n),A!==n&&(A=ou(A),A=A===A?A:0),g!==n&&(g=ou(g),g=g===g?g:0),Jn(ou(c),g,A)}function EC(c,g,A){return g=kc(g),A===n?(A=g,g=0):A=kc(A),c=ou(c),Tt(c,g,A)}function PC(c,g,A){if(A&&typeof A!="boolean"&&Wa(c,g,A)&&(g=A=n),A===n&&(typeof g=="boolean"?(A=g,g=n):typeof c=="boolean"&&(A=c,c=n)),c===n&&g===n?(c=0,g=1):(c=kc(c),g===n?(g=c,c=0):g=kc(g)),c>g){var ee=c;c=g,g=ee}if(A||c%1||g%1){var we=zt();return Ce(c+we*(g-c+ol("1e-"+((we+"").length-1))),g)}return Bf(c,g)}var MC=wh(function(c,g,A){return g=g.toLowerCase(),c+(A?P2(g):g)});function P2(c){return Am(Hi(c).toLowerCase())}function M2(c){return c=Hi(c),c&&c.replace(Di,wu).replace(Os,"")}function AC(c,g,A){c=Hi(c),g=Pa(g);var ee=c.length;A=A===n?ee:Jn(oi(A),0,ee);var we=A;return A-=g.length,A>=0&&c.slice(A,we)==g}function kC(c){return c=Hi(c),c&&qe.test(c)?c.replace(yr,Va):c}function TC(c){return c=Hi(c),c&&Yt.test(c)?c.replace(It,"\\$&"):c}var DC=wh(function(c,g,A){return c+(A?"-":"")+g.toLowerCase()}),BC=wh(function(c,g,A){return c+(A?" ":"")+g.toLowerCase()}),NC=Ty("toLowerCase");function OC(c,g,A){c=Hi(c),g=oi(g);var ee=g?Fs(c):0;if(!g||ee>=g)return c;var we=(g-ee)/2;return Hp(Ps(we),A)+c+Hp(Es(we),A)}function IC(c,g,A){c=Hi(c),g=oi(g);var ee=g?Fs(c):0;return g&&ee<g?c+Hp(g-ee,A):c}function RC(c,g,A){c=Hi(c),g=oi(g);var ee=g?Fs(c):0;return g&&ee<g?Hp(g-ee,A)+c:c}function FC(c,g,A){return A||g==null?g=0:g&&(g=+g),Pt(Hi(c).replace(Ln,""),g||0)}function jC(c,g,A){return(A?Wa(c,g,A):g===n)?g=1:g=oi(g),mh(Hi(c),g)}function zC(){var c=arguments,g=Hi(c[0]);return c.length<3?g:g.replace(c[1],c[2])}var $C=wh(function(c,g,A){return c+(A?"_":"")+g.toLowerCase()});function UC(c,g,A){return A&&typeof A!="number"&&Wa(c,g,A)&&(g=A=n),A=A===n?Re:A>>>0,A?(c=Hi(c),c&&(typeof g=="string"||g!=null&&!Em(g))&&(g=Pa(g),!g&&ta(c))?iu(js(c),0,A):c.split(g,A)):[]}var VC=wh(function(c,g,A){return c+(A?" ":"")+Am(g)});function HC(c,g,A){return c=Hi(c),A=A==null?0:Jn(oi(A),0,c.length),g=Pa(g),c.slice(A,A+g.length)==g}function GC(c,g,A){var ee=Te.templateSettings;A&&Wa(c,g,A)&&(g=n),c=Hi(c),g=n0({},g,ee,Fy);var we=n0({},g.imports,ee.imports,Fy),Ie=Zo(we),rt=Is(we,Ie),gt,Et,an=0,ln=g.interpolate||Si,mn="__p += '",$n=Il((g.escape||Si).source+"|"+ln.source+"|"+(ln===ar?lr:Si).source+"|"+(g.evaluate||Si).source+"|$","g"),sr="//# sourceURL="+(Yr.call(g,"sourceURL")?(g.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Al+"]")+`
`;c.replace($n,function(Mr,xi,Mi,jl,Za,zl){return Mi||(Mi=jl),mn+=c.slice(an,zl).replace(ai,Ha),xi&&(gt=!0,mn+=`' +
__e(`+xi+`) +
'`),Za&&(Et=!0,mn+=`';
`+Za+`;
__p += '`),Mi&&(mn+=`' +
((__t = (`+Mi+`)) == null ? '' : __t) +
'`),an=zl+Mr.length,Mr}),mn+=`';
`;var Pr=Yr.call(g,"variable")&&g.variable;if(!Pr)mn=`with (obj) {
`+mn+`
}
`;else if(Ir.test(Pr))throw new Zn(u);mn=(Et?mn.replace(xn,""):mn).replace(En,"$1").replace(Cn,"$1;"),mn="function("+(Pr||"obj")+`) {
`+(Pr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(gt?", __e = _.escape":"")+(Et?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+mn+`return __p
}`;var ui=k2(function(){return wr(Ie,sr+"return "+mn).apply(n,rt)});if(ui.source=mn,Cm(ui))throw ui;return ui}function qC(c){return Hi(c).toLowerCase()}function WC(c){return Hi(c).toUpperCase()}function ZC(c,g,A){if(c=Hi(c),c&&(A||g===n))return Lo(c);if(!c||!(g=Pa(g)))return c;var ee=js(c),we=js(g),Ie=Ys(ee,we),rt=eu(ee,we)+1;return iu(ee,Ie,rt).join("")}function KC(c,g,A){if(c=Hi(c),c&&(A||g===n))return c.slice(0,wa(c)+1);if(!c||!(g=Pa(g)))return c;var ee=js(c),we=eu(ee,js(g))+1;return iu(ee,0,we).join("")}function YC(c,g,A){if(c=Hi(c),c&&(A||g===n))return c.replace(Ln,"");if(!c||!(g=Pa(g)))return c;var ee=js(c),we=Ys(ee,js(g));return iu(ee,we).join("")}function JC(c,g){var A=K,ee=$;if(Gs(g)){var we="separator"in g?g.separator:we;A="length"in g?oi(g.length):A,ee="omission"in g?Pa(g.omission):ee}c=Hi(c);var Ie=c.length;if(ta(c)){var rt=js(c);Ie=rt.length}if(A>=Ie)return c;var gt=A-Fs(ee);if(gt<1)return ee;var Et=rt?iu(rt,0,gt).join(""):c.slice(0,gt);if(we===n)return Et+ee;if(rt&&(gt+=Et.length-gt),Em(we)){if(c.slice(gt).search(we)){var an,ln=Et;for(we.global||(we=Il(we.source,Hi(Vr.exec(we))+"g")),we.lastIndex=0;an=we.exec(ln);)var mn=an.index;Et=Et.slice(0,mn===n?gt:mn)}}else if(c.indexOf(Pa(we),gt)!=gt){var $n=Et.lastIndexOf(we);$n>-1&&(Et=Et.slice(0,$n))}return Et+ee}function XC(c){return c=Hi(c),c&&mt.test(c)?c.replace(cr,xa):c}var QC=wh(function(c,g,A){return c+(A?" ":"")+g.toUpperCase()}),Am=Ty("toUpperCase");function A2(c,g,A){return c=Hi(c),g=A?n:g,g===n?So(c)?na(c):ut(c):c.match(g)||[]}var k2=si(function(c,g){try{return vi(c,n,g)}catch(A){return Cm(A)?A:new Zn(A)}}),eE=Pc(function(c,g){return Ls(g,function(A){A=tc(A),Mn(c,A,Lm(c[A],c))}),c});function tE(c){var g=c==null?0:c.length,A=Cr();return c=g?yi(c,function(ee){if(typeof ee[1]!="function")throw new zi(s);return[A(ee[0]),ee[1]]}):[],si(function(ee){for(var we=-1;++we<g;){var Ie=c[we];if(vi(Ie[0],this,ee))return vi(Ie[1],this,ee)}})}function nE(c){return h(l(c,y))}function km(c){return function(){return c}}function rE(c,g){return c==null||c!==c?g:c}var iE=By(),sE=By(!0);function ml(c){return c}function Tm(c){return Xn(typeof c=="function"?c:l(c,y))}function oE(c){return po(l(c,y))}function aE(c,g){return Su(c,l(g,y))}var lE=si(function(c,g){return function(A){return Oe(A,c,g)}}),uE=si(function(c,g){return function(A){return Oe(c,A,g)}});function Dm(c,g,A){var ee=Zo(g),we=bn(g,ee);A==null&&!(Gs(g)&&(we.length||!ee.length))&&(A=g,g=c,c=this,we=bn(g,Zo(g)));var Ie=!(Gs(A)&&"chain"in A)||!!A.chain,rt=Ac(c);return Ls(we,function(gt){var Et=g[gt];c[gt]=Et,rt&&(c.prototype[gt]=function(){var an=this.__chain__;if(Ie||an){var ln=c(this.__wrapped__),mn=ln.__actions__=dl(this.__actions__);return mn.push({func:Et,args:arguments,thisArg:c}),ln.__chain__=an,ln}return Et.apply(c,xo([this.value()],arguments))})}),c}function cE(){return Xi._===this&&(Xi._=ns),this}function Bm(){}function fE(c){return c=oi(c),si(function(g){return qa(g,c)})}var hE=cm(yi),dE=cm(Ol),pE=cm(D);function T2(c){return vm(c)?vr(tc(c)):rs(c)}function gE(c){return function(g){return c==null?n:ur(c,g)}}var mE=Oy(),vE=Oy(!0);function Nm(){return[]}function Om(){return!1}function yE(){return{}}function _E(){return""}function bE(){return!0}function wE(c,g){if(c=oi(c),c<1||c>Y)return[];var A=Re,ee=Ce(c,Re);g=Cr(g),c-=Re;for(var we=ts(ee,g);++A<c;)g(A);return we}function xE(c){return Xr(c)?yi(c,tc):Fl(c)?[c]:dl(Jy(Hi(c)))}function LE(c){var g=++Ho;return Hi(c)+g}var SE=Vp(function(c,g){return c+g},0),CE=fm("ceil"),EE=Vp(function(c,g){return c/g},1),PE=fm("floor");function ME(c){return c&&c.length?he(c,ml,ft):n}function AE(c,g){return c&&c.length?he(c,Cr(g,2),ft):n}function kE(c){return tr(c,ml)}function TE(c,g){return tr(c,Cr(g,2))}function DE(c){return c&&c.length?he(c,ml,Jr):n}function BE(c,g){return c&&c.length?he(c,Cr(g,2),Jr):n}var NE=Vp(function(c,g){return c*g},1),OE=fm("round"),IE=Vp(function(c,g){return c-g},0);function RE(c){return c&&c.length?_i(c,ml):0}function FE(c,g){return c&&c.length?_i(c,Cr(g,2)):0}return Te.after=oS,Te.ary=l2,Te.assign=WS,Te.assignIn=x2,Te.assignInWith=n0,Te.assignWith=ZS,Te.at=KS,Te.before=u2,Te.bind=Lm,Te.bindAll=eE,Te.bindKey=c2,Te.castArray=yS,Te.chain=s2,Te.chunk=P3,Te.compact=M3,Te.concat=A3,Te.cond=tE,Te.conforms=nE,Te.constant=km,Te.countBy=RL,Te.create=YS,Te.curry=f2,Te.curryRight=h2,Te.debounce=d2,Te.defaults=JS,Te.defaultsDeep=XS,Te.defer=aS,Te.delay=lS,Te.difference=k3,Te.differenceBy=T3,Te.differenceWith=D3,Te.drop=B3,Te.dropRight=N3,Te.dropRightWhile=O3,Te.dropWhile=I3,Te.fill=R3,Te.filter=jL,Te.flatMap=UL,Te.flatMapDeep=VL,Te.flatMapDepth=HL,Te.flatten=t2,Te.flattenDeep=F3,Te.flattenDepth=j3,Te.flip=uS,Te.flow=iE,Te.flowRight=sE,Te.fromPairs=z3,Te.functions=sC,Te.functionsIn=oC,Te.groupBy=GL,Te.initial=U3,Te.intersection=V3,Te.intersectionBy=H3,Te.intersectionWith=G3,Te.invert=lC,Te.invertBy=uC,Te.invokeMap=WL,Te.iteratee=Tm,Te.keyBy=ZL,Te.keys=Zo,Te.keysIn=gl,Te.map=Yp,Te.mapKeys=fC,Te.mapValues=hC,Te.matches=oE,Te.matchesProperty=aE,Te.memoize=Xp,Te.merge=dC,Te.mergeWith=L2,Te.method=lE,Te.methodOf=uE,Te.mixin=Dm,Te.negate=Qp,Te.nthArg=fE,Te.omit=pC,Te.omitBy=gC,Te.once=cS,Te.orderBy=KL,Te.over=hE,Te.overArgs=fS,Te.overEvery=dE,Te.overSome=pE,Te.partial=Sm,Te.partialRight=p2,Te.partition=YL,Te.pick=mC,Te.pickBy=S2,Te.property=T2,Te.propertyOf=gE,Te.pull=K3,Te.pullAll=r2,Te.pullAllBy=Y3,Te.pullAllWith=J3,Te.pullAt=X3,Te.range=mE,Te.rangeRight=vE,Te.rearg=hS,Te.reject=QL,Te.remove=Q3,Te.rest=dS,Te.reverse=wm,Te.sampleSize=tS,Te.set=yC,Te.setWith=_C,Te.shuffle=nS,Te.slice=eL,Te.sortBy=sS,Te.sortedUniq=aL,Te.sortedUniqBy=lL,Te.split=UC,Te.spread=pS,Te.tail=uL,Te.take=cL,Te.takeRight=fL,Te.takeRightWhile=hL,Te.takeWhile=dL,Te.tap=ML,Te.throttle=gS,Te.thru=Kp,Te.toArray=_2,Te.toPairs=C2,Te.toPairsIn=E2,Te.toPath=xE,Te.toPlainObject=w2,Te.transform=bC,Te.unary=mS,Te.union=pL,Te.unionBy=gL,Te.unionWith=mL,Te.uniq=vL,Te.uniqBy=yL,Te.uniqWith=_L,Te.unset=wC,Te.unzip=xm,Te.unzipWith=i2,Te.update=xC,Te.updateWith=LC,Te.values=Sh,Te.valuesIn=SC,Te.without=bL,Te.words=A2,Te.wrap=vS,Te.xor=wL,Te.xorBy=xL,Te.xorWith=LL,Te.zip=SL,Te.zipObject=CL,Te.zipObjectDeep=EL,Te.zipWith=PL,Te.entries=C2,Te.entriesIn=E2,Te.extend=x2,Te.extendWith=n0,Dm(Te,Te),Te.add=SE,Te.attempt=k2,Te.camelCase=MC,Te.capitalize=P2,Te.ceil=CE,Te.clamp=CC,Te.clone=_S,Te.cloneDeep=wS,Te.cloneDeepWith=xS,Te.cloneWith=bS,Te.conformsTo=LS,Te.deburr=M2,Te.defaultTo=rE,Te.divide=EE,Te.endsWith=AC,Te.eq=Au,Te.escape=kC,Te.escapeRegExp=TC,Te.every=FL,Te.find=zL,Te.findIndex=Qy,Te.findKey=QS,Te.findLast=$L,Te.findLastIndex=e2,Te.findLastKey=eC,Te.floor=PE,Te.forEach=o2,Te.forEachRight=a2,Te.forIn=tC,Te.forInRight=nC,Te.forOwn=rC,Te.forOwnRight=iC,Te.get=Pm,Te.gt=SS,Te.gte=CS,Te.has=aC,Te.hasIn=Mm,Te.head=n2,Te.identity=ml,Te.includes=qL,Te.indexOf=$3,Te.inRange=EC,Te.invoke=cC,Te.isArguments=Ff,Te.isArray=Xr,Te.isArrayBuffer=ES,Te.isArrayLike=pl,Te.isArrayLikeObject=go,Te.isBoolean=PS,Te.isBuffer=Qc,Te.isDate=MS,Te.isElement=AS,Te.isEmpty=kS,Te.isEqual=TS,Te.isEqualWith=DS,Te.isError=Cm,Te.isFinite=BS,Te.isFunction=Ac,Te.isInteger=g2,Te.isLength=e0,Te.isMap=m2,Te.isMatch=NS,Te.isMatchWith=OS,Te.isNaN=IS,Te.isNative=RS,Te.isNil=jS,Te.isNull=FS,Te.isNumber=v2,Te.isObject=Gs,Te.isObjectLike=to,Te.isPlainObject=wd,Te.isRegExp=Em,Te.isSafeInteger=zS,Te.isSet=y2,Te.isString=t0,Te.isSymbol=Fl,Te.isTypedArray=Lh,Te.isUndefined=$S,Te.isWeakMap=US,Te.isWeakSet=VS,Te.join=q3,Te.kebabCase=DC,Te.last=su,Te.lastIndexOf=W3,Te.lowerCase=BC,Te.lowerFirst=NC,Te.lt=HS,Te.lte=GS,Te.max=ME,Te.maxBy=AE,Te.mean=kE,Te.meanBy=TE,Te.min=DE,Te.minBy=BE,Te.stubArray=Nm,Te.stubFalse=Om,Te.stubObject=yE,Te.stubString=_E,Te.stubTrue=bE,Te.multiply=NE,Te.nth=Z3,Te.noConflict=cE,Te.noop=Bm,Te.now=Jp,Te.pad=OC,Te.padEnd=IC,Te.padStart=RC,Te.parseInt=FC,Te.random=PC,Te.reduce=JL,Te.reduceRight=XL,Te.repeat=jC,Te.replace=zC,Te.result=vC,Te.round=OE,Te.runInContext=_t,Te.sample=eS,Te.size=rS,Te.snakeCase=$C,Te.some=iS,Te.sortedIndex=tL,Te.sortedIndexBy=nL,Te.sortedIndexOf=rL,Te.sortedLastIndex=iL,Te.sortedLastIndexBy=sL,Te.sortedLastIndexOf=oL,Te.startCase=VC,Te.startsWith=HC,Te.subtract=IE,Te.sum=RE,Te.sumBy=FE,Te.template=GC,Te.times=wE,Te.toFinite=kc,Te.toInteger=oi,Te.toLength=b2,Te.toLower=qC,Te.toNumber=ou,Te.toSafeInteger=qS,Te.toString=Hi,Te.toUpper=WC,Te.trim=ZC,Te.trimEnd=KC,Te.trimStart=YC,Te.truncate=JC,Te.unescape=XC,Te.uniqueId=LE,Te.upperCase=QC,Te.upperFirst=Am,Te.each=o2,Te.eachRight=a2,Te.first=n2,Dm(Te,function(){var c={};return Jt(Te,function(g,A){Yr.call(Te.prototype,A)||(c[A]=g)}),c}(),{chain:!1}),Te.VERSION=r,Ls(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){Te[c].placeholder=Te}),Ls(["drop","take"],function(c,g){Ur.prototype[c]=function(A){A=A===n?1:ie(oi(A),0);var ee=this.__filtered__&&!g?new Ur(this):this.clone();return ee.__filtered__?ee.__takeCount__=Ce(A,ee.__takeCount__):ee.__views__.push({size:Ce(A,Re),type:c+(ee.__dir__<0?"Right":"")}),ee},Ur.prototype[c+"Right"]=function(A){return this.reverse()[c](A).reverse()}}),Ls(["filter","map","takeWhile"],function(c,g){var A=g+1,ee=A==V||A==q;Ur.prototype[c]=function(we){var Ie=this.clone();return Ie.__iteratees__.push({iteratee:Cr(we,3),type:A}),Ie.__filtered__=Ie.__filtered__||ee,Ie}}),Ls(["head","last"],function(c,g){var A="take"+(g?"Right":"");Ur.prototype[c]=function(){return this[A](1).value()[0]}}),Ls(["initial","tail"],function(c,g){var A="drop"+(g?"":"Right");Ur.prototype[c]=function(){return this.__filtered__?new Ur(this):this[A](1)}}),Ur.prototype.compact=function(){return this.filter(ml)},Ur.prototype.find=function(c){return this.filter(c).head()},Ur.prototype.findLast=function(c){return this.reverse().find(c)},Ur.prototype.invokeMap=si(function(c,g){return typeof c=="function"?new Ur(this):this.map(function(A){return Oe(A,c,g)})}),Ur.prototype.reject=function(c){return this.filter(Qp(Cr(c)))},Ur.prototype.slice=function(c,g){c=oi(c);var A=this;return A.__filtered__&&(c>0||g<0)?new Ur(A):(c<0?A=A.takeRight(-c):c&&(A=A.drop(c)),g!==n&&(g=oi(g),A=g<0?A.dropRight(-g):A.take(g-c)),A)},Ur.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},Ur.prototype.toArray=function(){return this.take(Re)},Jt(Ur.prototype,function(c,g){var A=/^(?:filter|find|map|reject)|While$/.test(g),ee=/^(?:head|last)$/.test(g),we=Te[ee?"take"+(g=="last"?"Right":""):g],Ie=ee||/^find/.test(g);we&&(Te.prototype[g]=function(){var rt=this.__wrapped__,gt=ee?[1]:arguments,Et=rt instanceof Ur,an=gt[0],ln=Et||Xr(rt),mn=function(xi){var Mi=we.apply(Te,xo([xi],gt));return ee&&$n?Mi[0]:Mi};ln&&A&&typeof an=="function"&&an.length!=1&&(Et=ln=!1);var $n=this.__chain__,sr=!!this.__actions__.length,Pr=Ie&&!$n,ui=Et&&!sr;if(!Ie&&ln){rt=ui?rt:new Ur(this);var Mr=c.apply(rt,gt);return Mr.__actions__.push({func:Kp,args:[mn],thisArg:n}),new As(Mr,$n)}return Pr&&ui?c.apply(this,gt):(Mr=this.thru(mn),Pr?ee?Mr.value()[0]:Mr.value():Mr)})}),Ls(["pop","push","shift","sort","splice","unshift"],function(c){var g=ra[c],A=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",ee=/^(?:pop|shift)$/.test(c);Te.prototype[c]=function(){var we=arguments;if(ee&&!this.__chain__){var Ie=this.value();return g.apply(Xr(Ie)?Ie:[],we)}return this[A](function(rt){return g.apply(Xr(rt)?rt:[],we)})}}),Jt(Ur.prototype,function(c,g){var A=Te[g];if(A){var ee=A.name+"";Yr.call(fo,ee)||(fo[ee]=[]),fo[ee].push({name:g,func:A})}}),fo[Up(n,N).name]=[{name:"wrapper",func:n}],Ur.prototype.clone=Wc,Ur.prototype.reverse=uh,Ur.prototype.value=Zc,Te.prototype.at=AL,Te.prototype.chain=kL,Te.prototype.commit=TL,Te.prototype.next=DL,Te.prototype.plant=NL,Te.prototype.reverse=OL,Te.prototype.toJSON=Te.prototype.valueOf=Te.prototype.value=IL,Te.prototype.first=Te.prototype.head,dr&&(Te.prototype[dr]=BL),Te},$s=Co();Qi?((Qi.exports=$s)._=$s,ir._=$s):Xi._=$s}).call(Jo)})(vg,vg.exports);var hx=vg.exports;class da extends Un.Polygon{constructor(n,r={}){super([],{...r,pmIgnore:!1,interactive:!0});Ht(this,"_width");Ht(this,"_height");Ht(this,"_center");Ht(this,"_rotation");Ht(this,"_isMapReady",!1);Ht(this,"properties");Ht(this,"_helperPoints",{corners:[],midPoints:[]});Ht(this,"_throttledUpdateProperties");const i=n instanceof Un.LatLngBounds?n:Un.latLngBounds(n);if(this._center=i.getCenter(),this._rotation=0,console.log("[Rectangle][constructor] Initialisation avec options:",{bounds:i,center:this._center,hasExplicitDimensions:!!(r.width&&r.height),width:r.width,height:r.height}),r.width&&r.height)this._width=r.width,this._height=r.height,console.log("[Rectangle][constructor] Utilisation des dimensions explicites:",{width:this._width,height:this._height});else{const o=i.getSouthWest(),s=i.getNorthEast();this._width=dn.measure("Rectangle.constructor.calculateWidth",()=>{const u=nv([o.lng,o.lat],[s.lng,o.lat],{units:"meters"});return Math.max(u,1)}),this._height=dn.measure("Rectangle.constructor.calculateHeight",()=>{const u=nv([o.lng,o.lat],[o.lng,s.lat],{units:"meters"});return Math.max(u,1)}),console.log("[Rectangle][constructor] Dimensions calculées depuis bounds:",{width:this._width,height:this._height})}(this._width<1||this._height<1)&&this._getPixelsPerMeter()>0&&(this._width=Math.max(this._width,1),this._height=Math.max(this._height,1),this._updatePolygonCoordinates()),this.properties=dn.measure("Rectangle.constructor.initProperties",()=>({type:"Rectangle",style:{...r,name:r.name||""},rotation:this._rotation})),this._throttledUpdateProperties=dn.measure("Rectangle.constructor.initThrottle",()=>hx.throttle(()=>{this.updateProperties()},100)),this.on("add",()=>{this._isMapReady=!0,this._updatePolygonCoordinates(),this.updateProperties()}),this.on("remove",()=>{this._isMapReady=!1})}_updatePolygonCoordinates(){dn.measure("Rectangle._updatePolygonCoordinates",()=>{if(!this._isMapReady||!this._map)return;console.log("[Rectangle][_updatePolygonCoordinates] Début mise à jour avec:",{width:this._width,height:this._height,center:this._center,rotation:this._rotation}),this._width=Math.max(this._width,1),this._height=Math.max(this._height,1);const n=this._width/2,r=this._height/2,i=lb([this._center.lng,this._center.lat],r,0,{units:"meters"}).geometry.coordinates,o=lb([this._center.lng,this._center.lat],n,90,{units:"meters"}).geometry.coordinates,s=Math.abs(i[1]-this._center.lat)*2,u=Math.abs(o[0]-this._center.lng)*2,f=[Un.latLng(this._center.lat+s/2,this._center.lng-u/2),Un.latLng(this._center.lat+s/2,this._center.lng+u/2),Un.latLng(this._center.lat-s/2,this._center.lng+u/2),Un.latLng(this._center.lat-s/2,this._center.lng-u/2)];if(this._rotation===0){this.setLatLngs(f);return}const d=this._map.latLngToContainerPoint(this._center),m=f.map(R=>this._map.latLngToContainerPoint(R)),y=-this._rotation*Math.PI/180,w=Math.cos(y),_=Math.sin(y),k=m.map(R=>{const N=R.x-d.x,j=R.y-d.y;return Un.point(d.x+(N*w-j*_),d.y+(N*_+j*w))}).map(R=>this._map.containerPointToLatLng(R));console.log("[Rectangle][_updatePolygonCoordinates] Résultat final:",{corners:k,dimensions:{width:this._width,height:this._height}}),this.setLatLngs(k),this.fire("coordinates:updated",{corners:k,center:this._center,rotation:this._rotation,dimensions:{width:this._width,height:this._height}})})}_getPixelsPerMeter(){return dn.measure("Rectangle._getPixelsPerMeter",()=>{if(!this._isMapReady||!this._map)return 1;const n=Math.max(this._width/1e3,1e-4),r=this._map.latLngToContainerPoint(this._center),o=this._map.latLngToContainerPoint(Un.latLng(this._center.lat,this._center.lng+n)).x-r.x,s=nv([this._center.lng,this._center.lat],[this._center.lng+n,this._center.lat],{units:"meters"}),u=Math.abs(o/s);return isNaN(u)||u<=0?(console.warn("[Rectangle][_getPixelsPerMeter] Ratio invalide, utilisation de la valeur par défaut"),1):u})}getRotatedCorners(){return dn.measure("Rectangle.getRotatedCorners",()=>{try{const n=this.getLatLngs();if(!n||!Array.isArray(n)||n.length===0){const r=this._width/2,i=this._height/2;return[Un.latLng(this._center.lat+i,this._center.lng-r),Un.latLng(this._center.lat+i,this._center.lng+r),Un.latLng(this._center.lat-i,this._center.lng+r),Un.latLng(this._center.lat-i,this._center.lng-r)]}return n[0]}catch(n){console.warn("Error in getRotatedCorners:",n);const r=this._width/2,i=this._height/2;return[Un.latLng(this._center.lat+i,this._center.lng-r),Un.latLng(this._center.lat+i,this._center.lng+r),Un.latLng(this._center.lat-i,this._center.lng+r),Un.latLng(this._center.lat-i,this._center.lng-r)]}})}getMidPoints(){return dn.measure("Rectangle.getMidPoints",()=>{try{const n=this.getRotatedCorners();if(!n||n.length<4){const i=this._width/2,o=this._height/2;return[Un.latLng(this._center.lat+o,this._center.lng),Un.latLng(this._center.lat,this._center.lng+i),Un.latLng(this._center.lat-o,this._center.lng),Un.latLng(this._center.lat,this._center.lng-i)]}if(!n.every(i=>i&&typeof i.lat=="number"&&typeof i.lng=="number"))throw new Error("Invalid corner coordinates");return[this._getMidPoint(n[3],n[0]),this._getMidPoint(n[0],n[1]),this._getMidPoint(n[1],n[2]),this._getMidPoint(n[2],n[3])]}catch(n){console.warn("Error in getMidPoints:",n);const r=this._width/2,i=this._height/2;return[Un.latLng(this._center.lat+i,this._center.lng),Un.latLng(this._center.lat,this._center.lng+r),Un.latLng(this._center.lat-i,this._center.lng),Un.latLng(this._center.lat,this._center.lng-r)]}})}_getMidPoint(n,r){return dn.measure("Rectangle._getMidPoint",()=>{if(!n||!r||typeof n.lat!="number"||typeof n.lng!="number"||typeof r.lat!="number"||typeof r.lng!="number")throw new Error("Invalid points for midpoint calculation");return Un.latLng((n.lat+r.lat)/2,(n.lng+r.lng)/2)})}getCenter(){return dn.measure("Rectangle.getCenter",()=>this._center)}setCenter(n){dn.measure("Rectangle.setCenter",()=>{this._center=n,this._updatePolygonCoordinates(),this.updateProperties(),this.updateHelperPointPositions()})}getRotation(){return dn.measure("Rectangle.getRotation",()=>this._rotation)}setRotation(n,r=!1){dn.measure("Rectangle.setRotation",()=>{this._rotation=(n%360+360)%360,this._updatePolygonCoordinates(),r&&this.updateProperties(),this.updateHelperPointPositions(),this.fire("rotation:updated",{angle:this._rotation,corners:this.getRotatedCorners(),center:this._center})})}finalizeRotation(){dn.measure("Rectangle.finalizeRotation",()=>{this.updateProperties()})}getDimensions(){return dn.measure("Rectangle.getDimensions",()=>({width:this._width,height:this._height}))}setDimensions(n,r){dn.measure("Rectangle.setDimensions",()=>{console.log("[Rectangle][setDimensions] Début de la mise à jour des dimensions:",{oldWidth:this._width,oldHeight:this._height,newWidth:n,newHeight:r}),this._width=n,this._height=r,console.log("[Rectangle][setDimensions] Mise à jour des coordonnées du polygone"),this._updatePolygonCoordinates(),console.log("[Rectangle][setDimensions] Mise à jour des propriétés"),this.updateProperties(),console.log("[Rectangle][setDimensions] Émission de l'événement dimensions:updated"),this.fire("dimensions:updated",{width:this._width,height:this._height,corners:this.getRotatedCorners(),center:this._center}),this.updateHelperPointPositions()})}resizeFromCorner(n,r){dn.measure("Rectangle.resizeFromCorner",()=>{if(!(!this._isMapReady||!this._map))try{const i=this._map.latLngToContainerPoint(this._center),o=this._map.latLngToContainerPoint(r),s=o.x-i.x,u=o.y-i.y,f=-this._rotation*Math.PI/180,d=Math.cos(f),m=Math.sin(f),y=s*d-u*m,w=s*m+u*d,_=this._getPixelsPerMeter(),M=n===0||n===3?-1:1,k=n===0||n===1?1:-1,R=Math.max(Math.abs(y*2)/_,1),N=Math.max(Math.abs(w*2)/_,1),j=R*_/2,J=N*_/2,te=M*j*d-k*J*m,ae=M*j*m+k*J*d,le=Un.point(o.x-te,o.y-ae),xe=this._map.containerPointToLatLng(le),K=[Un.point(le.x-j,le.y+J),Un.point(le.x+j,le.y+J),Un.point(le.x+j,le.y-J),Un.point(le.x-j,le.y-J)].map($=>{const O=$.x-le.x,z=$.y-le.y;return Un.point(le.x+(O*d-z*m),le.y+(O*m+z*d))}).map($=>this._map.containerPointToLatLng($));this._width=R,this._height=N,this._center=xe,this.setLatLngs(K),this.fire("coordinates:updated",{corners:K,center:this._center,rotation:this._rotation})}catch(i){console.warn("Error in resizeFromCorner:",i)}})}resizeFromSide(n,r){dn.measure("Rectangle.resizeFromSide",()=>{if(!this._isMapReady||!this._map)return;const i=this._map.latLngToContainerPoint(this._center),o=this._map.latLngToContainerPoint(r),s=o.x-i.x,u=o.y-i.y,f=-this._rotation*Math.PI/180,d=Math.cos(f),m=Math.sin(f),y=s*d-u*m,w=s*m+u*d,_=this._getPixelsPerMeter();n%2===0?this._height=Math.abs(w*2)/_:this._width=Math.abs(y*2)/_,this._updatePolygonCoordinates(),this.updateProperties()})}moveFromCenter(n){dn.measure("Rectangle.moveFromCenter",()=>{this._center=n,this._updatePolygonCoordinates(),this.updateProperties()})}updateProperties(){dn.measure("Rectangle.updateProperties",()=>{var i,o,s;const n=this.getRotatedCorners(),r=((o=(i=this.properties)==null?void 0:i.style)==null?void 0:o.name)||"";this.properties={...this.properties,width:this._width,height:this._height,surface:this._width*this._height,perimeter:2*(this._width+this._height),center:this._center,corners:n,midPoints:this.getMidPoints(),rotation:this._rotation,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((s=this.options)==null?void 0:s.dashArray)||"",name:r}},this.fire("properties:updated",{shape:this,properties:this.properties,corners:n,midPoints:this.getMidPoints()})})}setName(n){dn.measure("Rectangle.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return dn.measure("Rectangle.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}generateHelperPoints(n,r="rgba(220, 38, 38, 0.5)",i="rgba(37, 99, 235, 0.5)"){dn.measure("Rectangle.generateHelperPoints",()=>{this.clearHelperPoints();const o=this.getRotatedCorners(),s=this.getMidPoints();this._helperPoints.corners=o.map(u=>Un.circleMarker(u,{radius:5,color:r,fillColor:r,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-corner",pmIgnore:!0,interactive:!1}).addTo(n)),this._helperPoints.midPoints=s.map(u=>Un.circleMarker(u,{radius:5,color:i,fillColor:i,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-midpoint",pmIgnore:!0,interactive:!1}).addTo(n))})}clearHelperPoints(){dn.measure("Rectangle.clearHelperPoints",()=>{this._helperPoints.corners.forEach(n=>{if(n&&n.remove)try{n.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de coin:",r)}}),this._helperPoints.midPoints.forEach(n=>{if(n&&n.remove)try{n.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de milieu:",r)}}),this._helperPoints.corners=[],this._helperPoints.midPoints=[]})}updateHelperPointPositions(){dn.measure("Rectangle.updateHelperPointPositions",()=>{if(this._helperPoints.corners.length===0&&this._helperPoints.midPoints.length===0)return;const n=this.getRotatedCorners(),r=this.getMidPoints();n.forEach((i,o)=>{this._helperPoints.corners[o]&&this._helperPoints.corners[o].setLatLng(i)}),r.forEach((i,o)=>{this._helperPoints.midPoints[o]&&this._helperPoints.midPoints[o].setLatLng(i)})})}findClosestHelperPoint(n){return dn.measure("Rectangle.findClosestHelperPoint",()=>{const r=this.getRotatedCorners(),i=this.getMidPoints(),o=[...r,...i];if(o.length===0)return null;let s=o[0],u=n.distanceTo(s);for(let f=1;f<o.length;f++){const d=n.distanceTo(o[f]);d<u&&(u=d,s=o[f])}return s})}toggleHelperPoints(n,r,i,o){dn.measure("Rectangle.toggleHelperPoints",()=>{r&&n?this.generateHelperPoints(n,i,o):this.clearHelperPoints()})}containsPoint(n){return dn.measure("Rectangle.containsPoint",()=>{const r=this.getRotatedCorners();if(r.length!==4)return!1;let i=!1;for(let o=0,s=r.length-1;o<r.length;s=o++){const u=r[o].lng,f=r[o].lat,d=r[s].lng,m=r[s].lat;f>n.lat!=m>n.lat&&n.lng<(d-u)*(n.lat-f)/(m-f)+u&&(i=!i)}return i})}}function aN(e){return e&&Array.isArray(e.points)&&e.points.length>0&&Array.isArray(e.points[0])&&e.points[0].length===2}function lN(e){if(!e||typeof e!="object")return console.log("[DrawingStore] ElevationData invalide: pas un objet",{data:e}),!1;const t=Array.isArray(e.points)&&e.points.length>0&&Array.isArray(e.points[0])&&e.points[0].length===2,n=typeof e.style=="object"&&e.style!==null,r=!e.elevationData||Array.isArray(e.elevationData)&&e.elevationData.every(i=>typeof i=="object"&&"distance"in i&&"elevation"in i);return t&&n&&r}function uN(e){return e&&Array.isArray(e.points)&&e.points.length>0&&Array.isArray(e.points[0])&&e.points[0].length===2}function _b(e){var t,n,r,i,o,s,u,f,d,m,y,w,_,M,k,R,N,j,J,te,ae,le,xe,G,I,K,$;if(console.log("[DrawingStore] Conversion de la forme en élément",{type:(t=e.properties)==null?void 0:t.type,name:(r=(n=e.properties)==null?void 0:n.style)==null?void 0:r.name,properties:e.properties}),((i=e.properties)==null?void 0:i.type)==="Note"){const O=e.getLatLng();return{type_forme:"Note",data:{points:[[O.lng,O.lat]],style:{color:((o=e.properties.style)==null?void 0:o.color)||"#2b6451",weight:((s=e.properties.style)==null?void 0:s.weight)||3,opacity:((u=e.properties.style)==null?void 0:u.opacity)||1,fillColor:((f=e.properties.style)==null?void 0:f.fillColor)||"#2b6451",fillOpacity:((d=e.properties.style)==null?void 0:d.fillOpacity)||.2,name:((m=e.properties.style)==null?void 0:m.name)||""}}}}if(e instanceof Sf||((y=e.properties)==null?void 0:y.type)==="ElevationLine")return{type_forme:"ElevationLine",data:{points:e.getLatLngs().map(V=>[V.lng,V.lat]),style:{color:((w=e.properties.style)==null?void 0:w.color)||"#2b6451",weight:((_=e.properties.style)==null?void 0:_.weight)||4,opacity:((M=e.properties.style)==null?void 0:M.opacity)||.8,name:((k=e.properties.style)==null?void 0:k.name)||""},elevationData:e.properties.elevationData,minElevation:e.properties.minElevation,maxElevation:e.properties.maxElevation,elevationGain:e.properties.elevationGain,elevationLoss:e.properties.elevationLoss,averageSlope:e.properties.averageSlope,maxSlope:e.properties.maxSlope}};if(e instanceof gf||((R=e.properties)==null?void 0:R.type)==="Polygon")return{type_forme:"Polygon",data:{points:e.getLatLngs()[0].map(V=>[V.lng,V.lat]),style:{color:((N=e.properties.style)==null?void 0:N.color)||"#2b6451",weight:((j=e.properties.style)==null?void 0:j.weight)||3,opacity:((J=e.properties.style)==null?void 0:J.opacity)||1,fillColor:((te=e.properties.style)==null?void 0:te.fillColor)||"#2b6451",fillOpacity:((ae=e.properties.style)==null?void 0:ae.fillOpacity)||.2,name:((le=e.properties.style)==null?void 0:le.name)||""}}};if(e instanceof Mo||((xe=e.properties)==null?void 0:xe.type)==="Line")return{type_forme:"Line",data:{points:e.getLatLngs().map(V=>[V.lng,V.lat]),style:{color:((G=e.properties.style)==null?void 0:G.color)||"#2b6451",weight:((I=e.properties.style)==null?void 0:I.weight)||3,opacity:((K=e.properties.style)==null?void 0:K.opacity)||1,name:(($=e.properties.style)==null?void 0:$.name)||""}}};throw new Error("Type de forme non reconnu")}function cN(e){var t,n,r,i,o,s,u,f,d,m,y,w,_,M,k,R,N,j,J,te,ae,le,xe,G,I,K,$,O,z,V,W,q;switch(console.log("[DrawingStore] Conversion de l'élément stocké en forme",{element:e}),e.type_forme){case"Polygon":{const X=e.data;if(!aN(X))return console.error("[DrawingStore] Données invalides pour Polygon"),null;const Y=X.points.map(Se=>Un.latLng(Se[1],Se[0])),me=new gf([Y],{color:((t=X.style)==null?void 0:t.color)||"#2b6451",weight:((n=X.style)==null?void 0:n.weight)||3,opacity:((r=X.style)==null?void 0:r.opacity)||1,fillColor:((i=X.style)==null?void 0:i.fillColor)||"#2b6451",fillOpacity:((o=X.style)==null?void 0:o.fillOpacity)||.2,dashArray:((s=X.style)==null?void 0:s.dashArray)||"",name:((u=X.style)==null?void 0:u.name)||""});return me.updateProperties(),me}case"ElevationLine":{const X=e.data;if(!lN(X))return console.error("[DrawingStore] Données invalides pour ElevationLine"),null;const Y=X.points.map(Se=>Un.latLng(Se[1],Se[0])),me=new Sf(Y,{color:((f=X.style)==null?void 0:f.color)||"#2b6451",weight:((d=X.style)==null?void 0:d.weight)||4,opacity:((m=X.style)==null?void 0:m.opacity)||.8,name:((y=X.style)==null?void 0:y.name)||""});return me.properties={type:"ElevationLine",style:{...X.style||{},name:((w=X.style)==null?void 0:w.name)||""},elevationData:X.elevationData,minElevation:X.minElevation,maxElevation:X.maxElevation,elevationGain:X.elevationGain,elevationLoss:X.elevationLoss,averageSlope:X.averageSlope,maxSlope:X.maxSlope,dataSource:"restored"},X.elevationData&&me.updateElevationProfile(),console.log("[DrawingStore] ElevationLine restored:",{points:Y.length,hasElevationData:!!X.elevationData,name:(_=X.style)==null?void 0:_.name,properties:me.properties}),me}case"Line":{const X=e.data;if(!uN(X))return console.error("[DrawingStore] Données invalides pour Ligne"),null;const Y=X.points.map(Se=>Un.latLng(Se[1],Se[0])),me=new Mo(Y,{...X.style||{},name:((M=X.style)==null?void 0:M.name)||""});return me.updateProperties(),me}case"Rectangle":{const X=e.data;if(console.log("[DrawingStore][convertStoredElementToShape] Restauration Rectangle:",{data:X,bounds:X.bounds,width:X.width,height:X.height,rotation:X.rotation}),!X.bounds)return console.error("[DrawingStore] Données de bounds manquantes pour Rectangle"),null;const Y=new Un.LatLngBounds(Un.latLng(X.bounds.southWest[1],X.bounds.southWest[0]),Un.latLng(X.bounds.northEast[1],X.bounds.northEast[0])),me=new da(Y,{color:((k=X.style)==null?void 0:k.color)||"#2b6451",weight:((R=X.style)==null?void 0:R.weight)||3,opacity:((N=X.style)==null?void 0:N.opacity)||1,fillColor:((j=X.style)==null?void 0:j.fillColor)||"#2b6451",fillOpacity:((J=X.style)==null?void 0:J.fillOpacity)||.2,dashArray:((te=X.style)==null?void 0:te.dashArray)||"",name:((ae=X.style)==null?void 0:ae.name)||"",width:X.width,height:X.height});return X.rotation&&me.setRotation(X.rotation),console.log("[DrawingStore][convertStoredElementToShape] Rectangle restauré:",{bounds:me.getBounds(),dimensions:me.getDimensions(),properties:me.properties}),me}case"Circle":{console.log("[DrawingStore] Traitement d'un Circle à partir de l'API",{id:e.id,data:e.data,hasName:((xe=(le=e.data)==null?void 0:le.style)==null?void 0:xe.name)!==void 0,name:(I=(G=e.data)==null?void 0:G.style)==null?void 0:I.name});const X=e.data;if(!X.center||!X.radius)return console.error("[DrawingStore] Données invalides pour Circle"),null;const Y=Un.circle([X.center[1],X.center[0]],{color:((K=X.style)==null?void 0:K.color)||"#2b6451",weight:(($=X.style)==null?void 0:$.weight)||3,opacity:((O=X.style)==null?void 0:O.opacity)||1,fillColor:((z=X.style)==null?void 0:z.fillColor)||"#2b6451",fillOpacity:((V=X.style)==null?void 0:V.fillOpacity)||.2,dashArray:((W=X.style)==null?void 0:W.dashArray)||"",radius:X.radius});return Y.properties={type:"Circle",radius:X.radius,diameter:X.radius*2,surface:Math.PI*X.radius*X.radius,perimeter:2*Math.PI*X.radius,style:{...X.style||{},name:((q=X.style)==null?void 0:q.name)||""}},console.log("[DrawingStore] Cercle créé:",{centerType:typeof X.center,center:X.center,radius:X.radius,style:Y.properties.style,name:Y.properties.style.name}),Y}default:return console.warn("[DrawingStore] Type non géré pour la restauration:",e.type_forme),null}}const rm=Ap("drawing",{state:()=>({currentMapId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",filters:{accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}},currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null,performanceMonitor:dd()}),getters:{hasUnsavedChanges:e=>e.unsavedChanges,getCurrentElements:e=>e.elements,getSelectedElement:e=>e.selectedElement,getCurrentTool:e=>e.currentTool,getCurrentStyle:e=>e.currentStyle,getLastUsedType:e=>e.lastUsedType,getFilters:e=>e.filters,getFilteredElements:e=>{if(e.elements.length===0)return console.log("[DrawingStore][getFilteredElements] Aucun élément dans le store, retour d'un tableau vide"),[];console.log("[DrawingStore][getFilteredElements] Début du filtrage avec",{totalElements:e.elements.length,filters:JSON.stringify({accessLevels:e.filters.accessLevels,categories:e.filters.categories,shapeTypes:e.filters.shapeTypes})}),console.log("[DrawingStore][getFilteredElements] Éléments dans le store:",e.elements.map(n=>({id:n.id,type_forme:n.type_forme,data:n.data?JSON.stringify(n.data):null})));const t=e.elements.filter(n=>{var f,d;if(console.log(`[DrawingStore][getFilteredElements] Vérification de l'élément ${n.id} (${n.type_forme})`),!(n.type_forme in e.filters.shapeTypes?e.filters.shapeTypes[n.type_forme]:!0))return console.log(`[DrawingStore][getFilteredElements] Élément ${n.id} filtré par type: ${n.type_forme} (non visible)`),!1;const i=((f=n.data)==null?void 0:f.category)||"default";if(!(i in e.filters.categories?e.filters.categories[i]:!0))return console.log(`[DrawingStore][getFilteredElements] Élément ${n.id} filtré par catégorie: ${i} (non visible)`),!1;const s=((d=n.data)==null?void 0:d.accessLevel)||"visitor";let u=!0;return s==="company"?u=e.filters.accessLevels.company:s==="employee"?u=e.filters.accessLevels.employee:s==="visitor"&&(u=e.filters.accessLevels.visitor),u?(console.log(`[DrawingStore][getFilteredElements] Élément ${n.id} visible: type=${n.type_forme}, catégorie=${i}, accès=${s}`),!0):(console.log(`[DrawingStore][getFilteredElements] Élément ${n.id} filtré par niveau d'accès: ${s} (non visible)`),!1)});return console.log("[DrawingStore][getFilteredElements] Résultat du filtrage:",{total:e.elements.length,filtered:t.length,filteredIds:t.map(n=>n.id)}),t}},actions:{setCurrentPlan(e){window.dispatchEvent(new CustomEvent("clearControlPoints")),this.currentMapId=e,e===null&&this.clearElements(),this.selectedElement=null,this.unsavedChanges=!1,this.currentTool="",this.lastUsedType=null,this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},this.filters={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}}},clearCurrentPlan(){(this.currentMapId!==null||this.elements.length>0)&&(this.currentMapId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null)},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.error=null},addElement(e){var n;const t=this.performanceMonitor.startMeasure("addElement","DrawingStore");try{if(console.log("[DrawingStore] Ajout d'un élément",{element:e,isLeafletLayer:e instanceof Un.Layer,hasProperties:!!e.properties,properties:e.properties,type:(n=e.properties)==null?void 0:n.type}),e instanceof Un.Layer&&e.properties){const r=this.performanceMonitor.measure("addElement_convert",()=>_b(e),"DrawingStore");console.log("[DrawingStore] Élément converti avant ajout",{original:e,converted:r,type:r.type_forme,data:r.data}),this.elements.push(r)}else!e.type_forme&&this.lastUsedType&&(e.type_forme=this.lastUsedType),this.elements.push(e);this.unsavedChanges=!0}finally{t()}},updateElement(e){const t=this.elements.findIndex(n=>n.id===e.id);if(t!==-1){const n=this.elements[t].type_forme;this.elements[t]={...e,type_forme:n},this.unsavedChanges=!0}},removeElement(e){const t=this.elements.findIndex(n=>n.id===e);t!==-1&&(this.elements.splice(t,1),this.unsavedChanges=!0)},selectElement(e){this.selectedElement=e},setCurrentTool(e){this.currentTool=e,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(e)&&(this.lastUsedType=e)},setCurrentStyle(e){if(!e||Object.keys(e).length===0){this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2};return}this.currentStyle={...this.currentStyle,...e}},updateFilters(e){if(console.log("[DrawingStore][updateFilters] Mise à jour des filtres:",JSON.stringify(e,null,2)),console.log("[DrawingStore][updateFilters] Filtres avant mise à jour:",JSON.stringify(this.filters,null,2)),e.accessLevels){const t={...this.filters.accessLevels};this.filters.accessLevels={...this.filters.accessLevels,...e.accessLevels},console.log("[DrawingStore][updateFilters] Niveaux d'accès mis à jour:",{avant:t,après:this.filters.accessLevels})}if(e.categories){const t={...this.filters.categories};this.filters.categories={...this.filters.categories,...e.categories},console.log("[DrawingStore][updateFilters] Catégories mises à jour:",{avant:t,après:this.filters.categories});const n=Object.keys(e.categories).filter(r=>t[r]!==this.filters.categories[r]);if(n.length>0){console.log(`[DrawingStore][updateFilters] Catégories modifiées: ${n.join(", ")}`);const r=n.filter(i=>t[i]===!1&&this.filters.categories[i]===!0);r.length>0&&(console.log(`[DrawingStore][updateFilters] Catégories réactivées: ${r.join(", ")}`),window.dispatchEvent(new CustomEvent("categoriesReactivated",{detail:{categories:r}})))}}if(e.shapeTypes){const t={...this.filters.shapeTypes};this.filters.shapeTypes={...this.filters.shapeTypes,...e.shapeTypes},console.log("[DrawingStore][updateFilters] Types de formes mis à jour:",{avant:t,après:this.filters.shapeTypes});const n=Object.keys(e.shapeTypes).filter(r=>t[r]!==this.filters.shapeTypes[r]);if(n.length>0){console.log(`[DrawingStore][updateFilters] Types de formes modifiés: ${n.join(", ")}`);const r=n.filter(i=>t[i]===!1&&this.filters.shapeTypes[i]===!0);r.length>0&&(console.log(`[DrawingStore][updateFilters] Types de formes réactivés: ${r.join(", ")}`),window.dispatchEvent(new CustomEvent("shapeTypesReactivated",{detail:{shapeTypes:r}})))}}console.log("[DrawingStore][updateFilters] Filtres mis à jour:",JSON.stringify(this.filters,null,2)),console.log("[DrawingStore][updateFilters] Émission de l'event filtersChanged"),window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:this.filters}}))},async loadPlanElements(e){const t=this.performanceMonitor.startMeasure("loadPlanElements","DrawingStore");if(this.currentMapId===e&&this.elements.length>0)return console.log(`[DrawingStore] Plan ${e} déjà chargé avec ${this.elements.length} éléments`),t(),this.elements;this.loading=!0;try{console.log("[DrawingStore] Début du chargement du plan",{planId:e});const r=(await this.performanceMonitor.measureAsync("loadPlanElements_apiCall",()=>hr.get(`/plans/${e}/`),"DrawingStore")).data;return console.log("[DrawingStore] Données du plan reçues",{formes:r.formes,preferences:r.preferences}),r.formes&&Array.isArray(r.formes)&&r.formes.forEach((i,o)=>{var s,u,f;console.log(`[DrawingStore] Analyse détaillée forme ${o}:`,{id:i.id,type_forme:i.type_forme,hasData:!!i.data,dataKeys:i.data?Object.keys(i.data):[],name:(s=i.data)==null?void 0:s.name,hasName:i.data&&"name"in i.data,centerType:(u=i.data)!=null&&u.center?typeof i.data.center:"undefined",center:(f=i.data)==null?void 0:f.center})}),this.elements=r.formes.map(i=>{var o;if(console.log("[DrawingStore] Traitement de la forme stockée",{id:i.id,type_forme:i.type_forme,data:i.data}),i.type_forme)return console.log("[DrawingStore] Forme déjà au format élément",{type_forme:i.type_forme,data:i.data,hasName:i.data&&"name"in i.data,name:(o=i.data)==null?void 0:o.name}),{id:i.id,type_forme:i.type_forme,data:i.data||{}};try{const s=cN(i);if(s)return console.log("[DrawingStore] Forme convertie avec succès",{originalType:i.type_forme,convertedType:s.type,properties:s.properties}),_b(s)}catch(s){console.error("[DrawingStore] Erreur lors de la conversion de la forme",{error:s,forme:i})}return console.warn("[DrawingStore] Utilisation de la forme sans conversion",{type_forme:i.type_forme,data:i.data}),i}),console.log(`[DrawingStore] Plan ${e} - Chargé ${this.elements.length} éléments`,{elements:this.elements.map(i=>({id:i.id,type_forme:i.type_forme}))}),this.currentMapId=e,this.unsavedChanges=!1,r.preferences&&(console.log("[DrawingStore] Chargement des préférences",r.preferences),r.preferences.currentTool&&this.setCurrentTool(r.preferences.currentTool),r.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...r.preferences.currentStyle}),r.preferences.lastUsedType&&(this.lastUsedType=r.preferences.lastUsedType)),this.elements}catch(n){throw console.error("[DrawingStore] Erreur lors du chargement des éléments:",n),this.error="Erreur lors du chargement des éléments du plan",n}finally{this.loading=!1,t()}},async saveToPlan(e,t){const n=this.performanceMonitor.startMeasure("saveToPlan","DrawingStore");this.loading=!0;try{const r=e||this.currentMapId;if(console.log("[DrawingStore][saveToPlan] Début de la sauvegarde",{targetPlanId:r,currentPlanId:this.currentMapId,elementsCount:this.elements.length,elementsToDelete:t==null?void 0:t.elementsToDelete}),!r)throw new Error("Aucun plan sélectionné pour la sauvegarde");const i=this.performanceMonitor.measure("saveToPlan_prepareElements",()=>this.elements.map(f=>({...f,type_forme:f.type_forme||this.lastUsedType})),"DrawingStore"),o=(t==null?void 0:t.elementsToDelete)||[],s=`/plans/${r}/save_with_elements/`,u=await this.performanceMonitor.measureAsync("saveToPlan_apiCall",()=>hr.post(s,{formes:i,connexions:[],annotations:[],elementsToDelete:o,preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}}),"DrawingStore");return this.elements=this.performanceMonitor.measure("saveToPlan_processResponse",()=>u.data.formes.map(f=>({...f,type_forme:f.type_forme})),"DrawingStore"),this.unsavedChanges=!1,u.data}catch(r){throw console.error("[DrawingStore][saveToPlan] ERREUR:",r),console.error("[DrawingStore][saveToPlan] Stack trace:",r instanceof Error?r.stack:"No stack trace"),this.error="Erreur lors de la sauvegarde du plan",r}finally{this.loading=!1,n()}}}}),fN={class:"h-full flex flex-col bg-white overflow-y-auto"},hN={class:"border-b border-gray-200"},dN={class:"flex -mb-px"},pN={class:"flex-1 overflow-y-auto"},gN={key:0,class:"p-3"},mN={class:"grid grid-cols-4 gap-1.5 mb-4"},vN=["onClick","title"],yN=["innerHTML"],_N={key:1,class:"p-3"},bN={class:"grid grid-cols-6 gap-2 mb-4"},wN=["onClick","title"],xN={key:0,class:"space-y-4"},LN={class:"flex items-center gap-4"},SN={class:"flex items-center gap-2"},CN={class:"flex items-center gap-4"},EN=["value"],PN={key:0,class:"flex items-center gap-4"},MN={class:"flex items-center gap-2"},AN={key:1,class:"space-y-4"},kN={class:"flex items-center gap-4"},TN={class:"flex items-center gap-2"},DN={class:"flex items-center gap-4"},BN={class:"flex items-center gap-2"},NN={key:2,class:"p-3"},ON={key:0},IN={class:"mb-4"},RN={class:"mb-4"},FN={class:"mb-4"},jN={class:"grid grid-cols-1 gap-4"},zN={key:0,class:"space-y-1"},$N={class:"flex justify-between items-center"},UN={class:"text-sm font-medium text-gray-500"},VN={class:"flex justify-between items-center"},HN={class:"text-sm font-medium text-gray-500"},GN={class:"text-sm font-medium text-gray-500"},qN={class:"flex flex-col space-y-2 w-full"},WN={class:"flex justify-between items-center"},ZN={class:"text-sm font-medium text-gray-500 ml-2"},KN={class:"flex justify-between items-center"},YN={class:"text-sm font-medium text-gray-500 ml-2"},JN={class:"flex justify-between items-center"},XN={class:"text-sm font-medium text-gray-500 ml-2"},QN={class:"flex justify-between items-center"},eO={class:"text-sm font-medium text-gray-500 ml-2"},tO={class:"flex justify-between items-center"},nO={class:"text-sm font-medium text-gray-500 ml-2"},rO={ref:"elevationProfileContainer",class:"elevation-profile-container w-full h-48 bg-gray-50 rounded border border-gray-200 relative mt-4"},iO={ref:"elevationCanvas"},sO={key:1,class:"text-center text-sm text-gray-500"},oO={key:3,class:"p-3 space-y-4"},aO={class:"space-y-2"},lO={class:"space-y-2"},uO={class:"space-y-1"},cO={class:"flex items-center"},fO={class:"flex items-center"},hO={class:"flex items-center"},dO={class:"flex items-center"},pO={class:"flex items-center"},gO={class:"flex items-center"},mO={class:"space-y-2"},vO={class:"space-y-1"},yO={class:"flex items-center"},_O={class:"flex items-center"},bO={class:"flex items-center"},wO={class:"flex items-center"},xO={key:0,class:"p-3 border-t border-gray-200"},LO={class:"mt-3"},SO={class:"mb-4"},CO={class:"grid grid-cols-2 gap-2"},EO={class:"grid grid-cols-2 gap-2"},PO=oo({__name:"DrawingTools",props:{currentTool:{type:String,default:""},selectedShape:{type:Object,default:null},allLayers:{type:Array,default:()=>[]}},emits:["tool-change","style-update","properties-update","delete-shape","filter-change"],setup(e,{emit:t}){const n=e,r=rm(),i=[{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"ElevationLine",label:"Profil altimétrique"},{type:"Note",label:"Note géolocalisée"}],o=oe=>{switch(oe){case"Polygon":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5l16 0l0 14l-16 0l0 -14z"/></svg>';case"Line":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 20l16 -16"/></svg>';case"ElevationLine":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 20h18l-3-3l-4 4l-4-7l-4 4l-3-3"/></svg>';case"Note":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 2l4 4m-6 0l2-2 4 4-2 2-4-4z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h8" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 14h4" /></svg>';default:return""}},s=Rt("tools");bs(s,(oe,B)=>{console.log("[DrawingTools][watch activeTab] Changement d'onglet:",{newTab:oe,oldTab:B}),oe==="filters"&&B!=="filters"&&(console.log("[DrawingTools][watch activeTab] Passage à l'onglet filtres"),console.log("[DrawingTools][watch activeTab] État actuel des filtres dans le store:",JSON.stringify({accessLevels:{...r.filters.accessLevels},categories:{...r.filters.categories},shapeTypes:{...r.filters.shapeTypes}},null,2)),console.log("[DrawingTools][watch activeTab] État actuel des filtres locaux:",JSON.stringify({accessLevels:{...le.accessLevels},categories:{...le.categories},shapeTypes:{...le.shapeTypes}},null,2)),n.selectedShape&&(console.log("[DrawingTools][watch activeTab] Désélection de la forme actuelle lors du passage à l'onglet filtres"),ye("tool-change","")),setTimeout(()=>{Se()},0)),B==="filters"&&oe!=="filters"&&(console.log("[DrawingTools][watch activeTab] Sortie de l'onglet filtres, application des changements"),console.log("[DrawingTools][watch activeTab] État des filtres locaux avant application:",JSON.stringify({accessLevels:{...le.accessLevels},categories:{...le.categories},shapeTypes:{...le.shapeTypes}},null,2)),Se())});const u=Rt({samplePoints:!0,circleSections:!0}),f=Rt("#2b6451"),d=Rt(2),m=Rt("solid"),y=Rt("#2b6451"),w=Rt(.2),_=Rt(!0),M=Rt(""),k=Rt("default"),R=Rt("visitor"),N=Rt({radius:4,color:"#2b6451",fillOpacity:.6,weight:2}),j=Rt({radius:6,color:"#EF4444",fillOpacity:.8,weight:2}),J=["#2b6451","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],te=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointillés"}],ae=Rt("company"),le=Yl({accessLevels:{company:!0,employee:!1,visitor:!1},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}}),xe=oe=>{console.log(`[DrawingTools][updateAccessLevelFilter] Changement du niveau d'accès: ${oe}`),ae.value=oe,oe==="company"?(le.accessLevels.company=!0,le.accessLevels.employee=!1,le.accessLevels.visitor=!1):oe==="employee"?(le.accessLevels.company=!1,le.accessLevels.employee=!0,le.accessLevels.visitor=!1):oe==="visitor"&&(le.accessLevels.company=!1,le.accessLevels.employee=!1,le.accessLevels.visitor=!0),Se()},G=oe=>{console.log(`[DrawingTools][updateAccessLevelFilterAndDeselect] Changement du niveau d'accès: ${oe}`),n.selectedShape&&(console.log("[DrawingTools][updateAccessLevelFilterAndDeselect] Désélection de la forme actuelle"),ye("tool-change","")),xe(oe)};console.log("[DrawingTools] Initialisation des filtres:",JSON.stringify({local:{accessLevels:{...le.accessLevels},categories:{...le.categories},shapeTypes:{...le.shapeTypes}},store:{accessLevels:{...r.filters.accessLevels},categories:{...r.filters.categories},shapeTypes:{...r.filters.shapeTypes}}},null,2));const I=gr(()=>n.selectedShape&&n.selectedShape.properties||null),K=oe=>{u.value[oe]=!u.value[oe]},$=oe=>{f.value=oe,y.value=oe,O({strokeColor:oe,fillColor:oe})},O=oe=>{n.selectedShape&&ye("style-update",oe)},z=()=>{n.selectedShape&&ye("properties-update",{name:M.value})},V=()=>{n.selectedShape&&ye("properties-update",{category:k.value})},W=()=>{n.selectedShape&&ye("properties-update",{accessLevel:R.value})},q=()=>{var oe;!n.selectedShape||((oe=I.value)==null?void 0:oe.type)!=="ElevationLine"||ye("style-update",{samplePointStyle:N.value})},X=()=>{var oe;!n.selectedShape||((oe=I.value)==null?void 0:oe.type)!=="ElevationLine"||ye("style-update",{minMaxPointStyle:j.value})},Y=()=>{console.log("[DrawingTools][resetFilters] Début de la réinitialisation des filtres"),console.log("[DrawingTools][resetFilters] État actuel des filtres:",JSON.stringify({accessLevels:{...le.accessLevels},categories:{...le.categories},shapeTypes:{...le.shapeTypes}},null,2));const oe={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}};console.log("[DrawingTools][resetFilters] Nouveaux filtres à appliquer:",JSON.stringify(oe,null,2)),console.log("[DrawingTools][resetFilters] Mise à jour des filtres locaux"),le.accessLevels.company=!0,le.accessLevels.employee=!0,le.accessLevels.visitor=!0,le.categories.forages=!0,le.categories.clients=!0,le.categories.entrepots=!0,le.categories.livraisons=!0,le.categories.cultures=!0,le.categories.parcelles=!0,le.shapeTypes.Polygon=!0,le.shapeTypes.Line=!0,le.shapeTypes.ElevationLine=!0,le.shapeTypes.Note=!0,console.log("[DrawingTools][resetFilters] Filtres locaux après mise à jour:",JSON.stringify({accessLevels:{...le.accessLevels},categories:{...le.categories},shapeTypes:{...le.shapeTypes}},null,2)),console.log("[DrawingTools][resetFilters] Mise à jour des filtres dans le store"),r.updateFilters(oe),console.log("[DrawingTools][resetFilters] Émission de l'event filter-change"),ye("filter-change",oe),console.log("[DrawingTools][resetFilters] Mise à jour forcée de l'affichage"),console.log("[DrawingTools][resetFilters] Filtres réinitialisés avec succès")},me=()=>{console.log("[DrawingTools][resetFiltersAndDeselect] Début de la réinitialisation des filtres avec désélection"),fe(),Y(),console.log("[DrawingTools][resetFiltersAndDeselect] Filtres réinitialisés et forme désélectionnée avec succès")},Se=()=>{const oe={...le.accessLevels},B={...le.categories},ue={...le.shapeTypes};console.log("[DrawingTools][applyFilters] Application des filtres:",JSON.stringify({accessLevels:oe,categories:B,shapeTypes:ue},null,2));const De={accessLevels:oe,categories:B,shapeTypes:ue};console.log("[DrawingTools][applyFilters] Envoi des filtres au store:",JSON.stringify(De,null,2)),r.updateFilters(De),console.log("[DrawingTools][applyFilters] Émission de l'event filter-change"),ye("filter-change",De),setTimeout(()=>{console.log("[DrawingTools][applyFilters] Mise à jour forcée de l'affichage"),window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:De}}))},0),console.log("[DrawingTools][applyFilters] Filtres appliqués avec succès")},Re=oe=>`${Math.round(oe)} m`,T=oe=>oe>=1e4?`${(oe/1e4).toFixed(2)} ha`:`${Math.round(oe)} m²`,ne=oe=>`${oe.toFixed(1)}%`,fe=()=>{n.selectedShape&&(console.log("[DrawingTools][deselectCurrentShape] Désélection de la forme actuelle"),ye("tool-change",""))},ce=()=>{fe(),s.value="filters"},ye=t;return vp(()=>{var oe,B,ue,De,Me,We,Z;if(n.selectedShape){console.log("[DrawingTools][watchEffect] Mise à jour des propriétés pour la forme sélectionnée:",{type:n.selectedShape.type,properties:n.selectedShape.properties,options:n.selectedShape.options,layer:(oe=n.selectedShape.layer)==null?void 0:oe._leaflet_id});const de=n.selectedShape.options||{};f.value=de.color||"#2b6451",d.value=de.weight||3,m.value=de.dashArray?"dashed":"solid",y.value=de.fillColor||"#2b6451",w.value=de.fillOpacity||.2;const ve=n.selectedShape.type||((B=n.selectedShape.properties)==null?void 0:B.type)||"";_.value=ve!=="Line",console.log("[DrawingTools][watchEffect] Type de forme détecté:",ve),M.value=((ue=n.selectedShape.properties)==null?void 0:ue.name)||"",k.value=((De=n.selectedShape.properties)==null?void 0:De.category)||"forages",R.value=((Me=n.selectedShape.properties)==null?void 0:Me.accessLevel)||"visitor",ve==="ElevationLine"&&((We=n.selectedShape.properties)!=null&&We.samplePointStyle&&(N.value={...n.selectedShape.properties.samplePointStyle}),(Z=n.selectedShape.properties)!=null&&Z.minMaxPointStyle&&(j.value={...n.selectedShape.properties.minMaxPointStyle})),console.log("[DrawingTools][watchEffect] Propriétés mises à jour avec succès")}}),Fo(()=>{console.log("[DrawingTools][onMounted] Initialisation des filtres depuis le store");const oe=r.filters;console.log("[DrawingTools][onMounted] Filtres du store:",JSON.stringify({accessLevels:{...oe.accessLevels},categories:{...oe.categories},shapeTypes:{...oe.shapeTypes}},null,2)),le.accessLevels.company=oe.accessLevels.company,le.accessLevels.employee=oe.accessLevels.employee,le.accessLevels.visitor=oe.accessLevels.visitor,le.categories.forages=oe.categories.forages,le.categories.clients=oe.categories.clients,le.categories.entrepots=oe.categories.entrepots,le.categories.livraisons=oe.categories.livraisons,le.categories.cultures=oe.categories.cultures,le.categories.parcelles=oe.categories.parcelles,le.shapeTypes.Polygon=oe.shapeTypes.Polygon,le.shapeTypes.Line=oe.shapeTypes.Line,le.shapeTypes.ElevationLine=oe.shapeTypes.ElevationLine,le.shapeTypes.Note=oe.shapeTypes.Note,console.log("[DrawingTools][onMounted] Filtres locaux après initialisation:",JSON.stringify({accessLevels:{...le.accessLevels},categories:{...le.categories},shapeTypes:{...le.shapeTypes}},null,2))}),bs(le,(oe,B)=>{console.log("[DrawingTools][watch filters] Changement détecté:",{activeTab:s.value,newFilters:JSON.stringify({accessLevels:oe.accessLevels,categories:oe.categories,shapeTypes:oe.shapeTypes}),oldFilters:JSON.stringify({accessLevels:B.accessLevels,categories:B.categories,shapeTypes:B.shapeTypes})});const ue=Object.keys(oe.accessLevels).filter(Z=>B.accessLevels[Z]!==oe.accessLevels[Z]),De=Object.keys(oe.categories).filter(Z=>B.categories[Z]!==oe.categories[Z]),Me=Object.keys(oe.shapeTypes).filter(Z=>B.shapeTypes[Z]!==oe.shapeTypes[Z]),We=ue.length>0||De.length>0||Me.length>0;console.log("[DrawingTools][watch filters] Différences détectées:",{accessLevelsDiff:ue,categoriesDiff:De,shapeTypesDiff:Me,hasChanges:We}),s.value==="filters"?(console.log("[DrawingTools][watch filters] Onglet filtres actif, application des filtres"),Se()):console.log("[DrawingTools][watch filters] Onglet filtres non actif, pas d'application automatique")},{deep:!0}),(oe,B)=>{var ue,De,Me,We;return Ue(),Ge("div",fN,[B[96]||(B[96]=E("div",{class:"p-3 bg-gray-50 border-b border-gray-200 flex justify-between items-center md:flex hidden"},[E("h3",{class:"text-sm font-semibold text-gray-700"},"Outils de dessin")],-1)),E("div",hN,[E("nav",dN,[E("button",{onClick:B[0]||(B[0]=Z=>s.value="tools"),class:Ii([s.value==="tools"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},B[45]||(B[45]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),E("span",null,"Outils",-1)]),2),e.selectedShape&&((ue=e.selectedShape.properties)==null?void 0:ue.type)!=="Note"?(Ue(),Ge("button",{key:0,onClick:B[1]||(B[1]=Z=>s.value="style"),class:Ii([s.value==="style"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},B[46]||(B[46]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})],-1),E("span",null,"Style",-1)]),2)):un("",!0),e.selectedShape?(Ue(),Ge("button",{key:1,onClick:B[2]||(B[2]=Z=>s.value="properties"),class:Ii([s.value==="properties"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},B[47]||(B[47]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),E("span",null,"Propriétés",-1)]),2)):un("",!0),E("button",{onClick:ce,class:Ii([s.value==="filters"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},B[48]||(B[48]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1),E("span",null,"Filtres",-1)]),2)])]),E("div",pN,[s.value==="tools"?(Ue(),Ge("div",gN,[E("div",mN,[(Ue(!0),Ge(Rn,null,Nr(i.filter(Z=>Z.type!=="delete"),Z=>(Ue(),Ge("button",{key:Z.type,class:Ii(["flex items-center justify-center p-2 rounded-md border",{"bg-blue-50 border-blue-300 text-blue-700 shadow-sm":e.currentTool===Z.type}]),onClick:de=>oe.$emit("tool-change",e.currentTool===Z.type?"":Z.type),title:Z.label},[E("span",{class:"icon",innerHTML:o(Z.type)},null,8,yN)],10,vN))),128))]),e.selectedShape?(Ue(),Ge("button",{key:0,class:Ii(["w-full mt-2 p-2 rounded-md border border-red-200 bg-red-50 text-red-600 hover:bg-red-100 flex items-center justify-center",{"bg-red-100":e.currentTool==="delete"}]),onClick:B[3]||(B[3]=Z=>oe.$emit("delete-shape")),title:"Supprimer la forme"},B[49]||(B[49]=[E("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),E("span",{class:"text-sm"},"Supprimer",-1)]),2)):un("",!0)])):un("",!0),s.value==="style"&&e.selectedShape&&((De=e.selectedShape.properties)==null?void 0:De.type)!=="Note"?(Ue(),Ge("div",_N,[E("div",bN,[(Ue(),Ge(Rn,null,Nr(J,Z=>E("button",{key:Z,class:"w-8 h-8 rounded-full",style:tl({backgroundColor:Z}),onClick:de=>$(Z),title:Z},null,12,wN)),64))]),((Me=I.value)==null?void 0:Me.type)!=="TextRectangle"?(Ue(),Ge("div",xN,[E("div",LN,[B[50]||(B[50]=E("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),E("div",SN,[In(E("input",{type:"color","onUpdate:modelValue":B[4]||(B[4]=Z=>f.value=Z),class:"w-16 h-8 rounded border",onChange:B[5]||(B[5]=Z=>O({strokeColor:f.value})),title:"Couleur du contour"},null,544),[[ei,f.value]]),In(E("input",{type:"range","onUpdate:modelValue":B[6]||(B[6]=Z=>d.value=Z),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:B[7]||(B[7]=Z=>O({strokeWidth:d.value})),title:"Épaisseur du contour"},null,544),[[ei,d.value]])])]),E("div",CN,[B[51]||(B[51]=E("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Style",-1)),In(E("select",{"onUpdate:modelValue":B[8]||(B[8]=Z=>m.value=Z),class:"w-full rounded border",onChange:B[9]||(B[9]=Z=>O({strokeStyle:m.value}))},[(Ue(),Ge(Rn,null,Nr(te,Z=>E("option",{key:Z.value,value:Z.value},Wt(Z.label),9,EN)),64))],544),[[ss,m.value]])]),_.value?(Ue(),Ge("div",PN,[B[52]||(B[52]=E("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),E("div",MN,[In(E("input",{type:"color","onUpdate:modelValue":B[10]||(B[10]=Z=>y.value=Z),class:"w-16 h-8 rounded border",onChange:B[11]||(B[11]=Z=>O({fillColor:y.value})),title:"Couleur de remplissage"},null,544),[[ei,y.value]]),In(E("input",{type:"range","onUpdate:modelValue":B[12]||(B[12]=Z=>w.value=Z),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:B[13]||(B[13]=Z=>O({fillOpacity:w.value})),title:"Opacité du remplissage"},null,544),[[ei,w.value]])])])):un("",!0)])):un("",!0),((We=I.value)==null?void 0:We.type)==="TextRectangle"?(Ue(),Ge("div",AN,[E("div",kN,[B[53]||(B[53]=E("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),E("div",TN,[In(E("input",{type:"color","onUpdate:modelValue":B[14]||(B[14]=Z=>f.value=Z),class:"w-16 h-8 rounded border",onChange:B[15]||(B[15]=Z=>O({strokeColor:f.value})),title:"Couleur du contour"},null,544),[[ei,f.value]]),In(E("input",{type:"range","onUpdate:modelValue":B[16]||(B[16]=Z=>d.value=Z),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:B[17]||(B[17]=Z=>O({strokeWidth:d.value})),title:"Épaisseur du contour"},null,544),[[ei,d.value]])])]),E("div",DN,[B[54]||(B[54]=E("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),E("div",BN,[In(E("input",{type:"color","onUpdate:modelValue":B[18]||(B[18]=Z=>y.value=Z),class:"w-16 h-8 rounded border",onChange:B[19]||(B[19]=Z=>O({fillColor:y.value})),title:"Couleur de remplissage"},null,544),[[ei,y.value]]),In(E("input",{type:"range","onUpdate:modelValue":B[20]||(B[20]=Z=>w.value=Z),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:B[21]||(B[21]=Z=>O({fillOpacity:w.value})),title:"Opacité du remplissage"},null,544),[[ei,w.value]])])])])):un("",!0)])):un("",!0),s.value==="properties"&&e.selectedShape?(Ue(),Ge("div",NN,[I.value?(Ue(),Ge("div",ON,[E("div",IN,[B[55]||(B[55]=E("label",{for:"shapeName",class:"block text-sm font-medium text-gray-700 mb-1"},"Nom de la forme",-1)),In(E("input",{type:"text",id:"shapeName","onUpdate:modelValue":B[22]||(B[22]=Z=>M.value=Z),onChange:z,placeholder:"Donnez un nom à cette forme",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},null,544),[[ei,M.value]])]),E("div",RN,[B[57]||(B[57]=E("label",{for:"shapeCategory",class:"block text-sm font-medium text-gray-700 mb-1"},"Catégorie",-1)),In(E("select",{id:"shapeCategory","onUpdate:modelValue":B[23]||(B[23]=Z=>k.value=Z),onChange:V,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},B[56]||(B[56]=[uc('<option value="forages" data-v-9dccca1e>Forages</option><option value="clients" data-v-9dccca1e>Clients</option><option value="entrepots" data-v-9dccca1e>Entrepôts</option><option value="livraisons" data-v-9dccca1e>Lieux de livraison</option><option value="cultures" data-v-9dccca1e>Cultures</option><option value="parcelles" data-v-9dccca1e>Noms des parcelles</option><option value="default" data-v-9dccca1e>Autre</option>',7)]),544),[[ss,k.value]])]),E("div",FN,[B[59]||(B[59]=E("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700 mb-1"},"Niveau d'accès",-1)),B[60]||(B[60]=E("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Définit qui peut voir cet élément sur la carte. ",-1)),In(E("select",{id:"accessLevel","onUpdate:modelValue":B[24]||(B[24]=Z=>R.value=Z),onChange:W,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},B[58]||(B[58]=[E("option",{value:"company"},"Entreprise uniquement",-1),E("option",{value:"employee"},"Entreprise et salariés",-1),E("option",{value:"visitor"},"Tous (visiteurs inclus)",-1)]),544),[[ss,R.value]])]),E("div",jN,[I.value.type==="Polygon"?(Ue(),Ge("div",zN,[E("div",$N,[B[61]||(B[61]=E("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),E("span",UN,Wt(T(I.value.surface||0)),1)]),E("div",VN,[B[62]||(B[62]=E("span",{class:"text-sm font-semibold text-gray-700"},"Périmètre :",-1)),E("span",HN,Wt(Re(I.value.perimeter||0)),1)])])):I.value.type==="Line"?(Ue(),Ge(Rn,{key:1},[B[63]||(B[63]=E("span",{class:"text-sm font-semibold text-gray-700"},"Longueur :",-1)),E("span",GN,Wt(Re(I.value.length||0)),1)],64)):I.value.type==="ElevationLine"?(Ue(),Ge(Rn,{key:2},[E("div",qN,[E("div",WN,[B[64]||(B[64]=E("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Distance totale :",-1)),E("span",ZN,Wt(Re(I.value.length||0)),1)]),E("div",KN,[B[65]||(B[65]=E("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Dénivelé + :",-1)),E("span",YN,Wt(Re(I.value.elevationGain||0)),1)]),E("div",JN,[B[66]||(B[66]=E("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Dénivelé - :",-1)),E("span",XN,Wt(Re(I.value.elevationLoss||0)),1)]),E("div",QN,[B[67]||(B[67]=E("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Pente moy. :",-1)),E("span",eO,Wt(ne(I.value.averageSlope||0)),1)]),E("div",tO,[B[68]||(B[68]=E("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Pente max :",-1)),E("span",nO,Wt(ne(I.value.maxSlope||0)),1)])]),E("div",rO,[E("canvas",iO,null,512)],512)],64)):un("",!0)])])):(Ue(),Ge("div",sO," Aucune propriété disponible "))])):un("",!0),s.value==="filters"?(Ue(),Ge("div",oO,[E("div",aO,[B[71]||(B[71]=E("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Niveau d'accès",-1)),B[72]||(B[72]=E("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Sélectionnez votre niveau d'accès pour filtrer les éléments visibles sur la carte. ",-1)),E("div",null,[In(E("select",{"onUpdate:modelValue":B[25]||(B[25]=Z=>ae.value=Z),onChange:B[26]||(B[26]=Z=>G(ae.value)),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-sm"},B[69]||(B[69]=[E("option",{value:"company"},"Entreprise (accès à tout)",-1),E("option",{value:"employee"},"Salariés (accès niveau salariés et visiteurs)",-1),E("option",{value:"visitor"},"Visiteurs (accès niveau visiteurs uniquement)",-1)]),544),[[ss,ae.value]]),B[70]||(B[70]=E("div",{class:"mt-2 text-xs text-gray-500"},[E("p",null,[E("strong",null,"Entreprise"),di(" : Vous verrez tous les éléments (entreprise, salariés, visiteurs)")]),E("p",null,[E("strong",null,"Salariés"),di(" : Vous verrez les éléments pour salariés et visiteurs")]),E("p",null,[E("strong",null,"Visiteurs"),di(" : Vous ne verrez que les éléments pour visiteurs")])],-1))])]),E("div",lO,[B[79]||(B[79]=E("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Éléments",-1)),E("div",uO,[E("label",cO,[In(E("input",{type:"checkbox","onUpdate:modelValue":B[27]||(B[27]=Z=>le.categories.forages=Z),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[xl,le.categories.forages]]),B[73]||(B[73]=E("span",{class:"ml-2 text-sm text-gray-700"},"Forages",-1))]),E("label",fO,[In(E("input",{type:"checkbox","onUpdate:modelValue":B[28]||(B[28]=Z=>le.categories.clients=Z),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[xl,le.categories.clients]]),B[74]||(B[74]=E("span",{class:"ml-2 text-sm text-gray-700"},"Clients",-1))]),E("label",hO,[In(E("input",{type:"checkbox","onUpdate:modelValue":B[29]||(B[29]=Z=>le.categories.entrepots=Z),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[xl,le.categories.entrepots]]),B[75]||(B[75]=E("span",{class:"ml-2 text-sm text-gray-700"},"Entrepôts",-1))]),E("label",dO,[In(E("input",{type:"checkbox","onUpdate:modelValue":B[30]||(B[30]=Z=>le.categories.livraisons=Z),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[xl,le.categories.livraisons]]),B[76]||(B[76]=E("span",{class:"ml-2 text-sm text-gray-700"},"Lieux de livraison",-1))]),E("label",pO,[In(E("input",{type:"checkbox","onUpdate:modelValue":B[31]||(B[31]=Z=>le.categories.cultures=Z),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[xl,le.categories.cultures]]),B[77]||(B[77]=E("span",{class:"ml-2 text-sm text-gray-700"},"Cultures",-1))]),E("label",gO,[In(E("input",{type:"checkbox","onUpdate:modelValue":B[32]||(B[32]=Z=>le.categories.parcelles=Z),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[xl,le.categories.parcelles]]),B[78]||(B[78]=E("span",{class:"ml-2 text-sm text-gray-700"},"Noms des parcelles",-1))])])]),E("div",mO,[B[84]||(B[84]=E("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Types de formes",-1)),E("div",vO,[E("label",yO,[In(E("input",{type:"checkbox","onUpdate:modelValue":B[33]||(B[33]=Z=>le.shapeTypes.Polygon=Z),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[xl,le.shapeTypes.Polygon]]),B[80]||(B[80]=E("span",{class:"ml-2 text-sm text-gray-700"},"Polygones",-1))]),E("label",_O,[In(E("input",{type:"checkbox","onUpdate:modelValue":B[34]||(B[34]=Z=>le.shapeTypes.Line=Z),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[xl,le.shapeTypes.Line]]),B[81]||(B[81]=E("span",{class:"ml-2 text-sm text-gray-700"},"Lignes",-1))]),E("label",bO,[In(E("input",{type:"checkbox","onUpdate:modelValue":B[35]||(B[35]=Z=>le.shapeTypes.ElevationLine=Z),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[xl,le.shapeTypes.ElevationLine]]),B[82]||(B[82]=E("span",{class:"ml-2 text-sm text-gray-700"},"Profils altimétriques",-1))]),E("label",wO,[In(E("input",{type:"checkbox","onUpdate:modelValue":B[36]||(B[36]=Z=>le.shapeTypes.Note=Z),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[xl,le.shapeTypes.Note]]),B[83]||(B[83]=E("span",{class:"ml-2 text-sm text-gray-700"},"Notes",-1))])])]),E("div",{class:"pt-2"},[E("button",{onClick:me,class:"w-full px-3 py-2 bg-gray-100 text-gray-700 text-sm rounded hover:bg-gray-200 transition-colors"}," Réinitialiser ")])])):un("",!0)]),e.selectedShape&&I.value&&I.value.type==="ElevationLine"?(Ue(),Ge("div",xO,[E("button",{class:"flex items-center justify-between w-full text-sm font-semibold text-gray-700",onClick:B[37]||(B[37]=Z=>K("samplePoints"))},[B[86]||(B[86]=E("span",null,"Points d'échantillonnage",-1)),(Ue(),Ge("svg",{class:Ii(["w-4 h-4",{"rotate-180":!u.value.samplePoints}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},B[85]||(B[85]=[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),In(E("div",LO,[E("div",SO,[B[91]||(B[91]=E("h4",{class:"text-sm font-semibold mb-2"},"Points normaux",-1)),E("div",CO,[E("div",null,[B[87]||(B[87]=E("label",{class:"text-xs text-gray-600"},"Taille",-1)),In(E("input",{type:"number","onUpdate:modelValue":B[38]||(B[38]=Z=>N.value.radius=Z),min:"2",max:"10",step:"1",class:"w-full px-2 py-1 border rounded",onChange:q},null,544),[[ei,N.value.radius]])]),E("div",null,[B[88]||(B[88]=E("label",{class:"text-xs text-gray-600"},"Couleur",-1)),In(E("input",{type:"color","onUpdate:modelValue":B[39]||(B[39]=Z=>N.value.color=Z),class:"w-full h-8 px-1 border rounded",onChange:q},null,544),[[ei,N.value.color]])]),E("div",null,[B[89]||(B[89]=E("label",{class:"text-xs text-gray-600"},"Opacité",-1)),In(E("input",{type:"range","onUpdate:modelValue":B[40]||(B[40]=Z=>N.value.fillOpacity=Z),min:"0",max:"1",step:"0.1",class:"w-full",onChange:q},null,544),[[ei,N.value.fillOpacity]])]),E("div",null,[B[90]||(B[90]=E("label",{class:"text-xs text-gray-600"},"Bordure",-1)),In(E("input",{type:"number","onUpdate:modelValue":B[41]||(B[41]=Z=>N.value.weight=Z),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:q},null,544),[[ei,N.value.weight]])])])]),E("div",null,[B[95]||(B[95]=E("h4",{class:"text-sm font-semibold mb-2"},"Points min/max",-1)),E("div",EO,[E("div",null,[B[92]||(B[92]=E("label",{class:"text-xs text-gray-600"},"Taille",-1)),In(E("input",{type:"number","onUpdate:modelValue":B[42]||(B[42]=Z=>j.value.radius=Z),min:"4",max:"12",step:"1",class:"w-full px-2 py-1 border rounded",onChange:X},null,544),[[ei,j.value.radius]])]),E("div",null,[B[93]||(B[93]=E("label",{class:"text-xs text-gray-600"},"Bordure",-1)),In(E("input",{type:"number","onUpdate:modelValue":B[43]||(B[43]=Z=>j.value.weight=Z),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:X},null,544),[[ei,j.value.weight]])]),E("div",null,[B[94]||(B[94]=E("label",{class:"text-xs text-gray-600"},"Opacité",-1)),In(E("input",{type:"range","onUpdate:modelValue":B[44]||(B[44]=Z=>j.value.fillOpacity=Z),min:"0",max:"1",step:"0.1",class:"w-full",onChange:X},null,544),[[ei,j.value.fillOpacity]])])])])],512),[[Hg,!u.value.samplePoints]])])):un("",!0)])}}}),MO=nm(PO,[["__scopeId","data-v-9dccca1e"]]),AO={class:"map-toolbar w-full"},kO={class:"hidden md:flex items-center space-x-2"},TO={class:"dropdown"},DO={class:"dropdown-menu"},BO=["onClick"],NO={key:0,class:"border-l pl-2 flex-1"},OO={class:"flex items-center"},IO={class:"plan-info"},RO={class:"plan-name"},FO={key:0,class:"plan-description"},jO={class:"border-l pl-2 ml-auto"},zO={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},$O={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},UO={key:"saving"},VO={key:"success",class:"save-success-text"},HO={key:"default"},GO={class:"md:hidden"},qO={class:"flex justify-between items-center"},WO={key:0,class:"truncate mx-2 text-sm font-medium"},ZO={key:0,class:"mobile-menu mt-0 bg-white shadow-lg p-4 z-[2000] fixed left-0 right-0 w-full"},KO={class:"flex justify-between items-center mb-3 border-b pb-2"},YO={class:"flex flex-col space-y-4"},JO={key:0,class:"flex flex-col pb-3 border-b"},XO={class:"text-sm font-semibold text-gray-800"},QO={key:0,class:"text-xs text-gray-600 mt-1"},eI={class:"flex flex-col"},tI={class:"grid grid-cols-3 gap-2"},nI=["onClick"],rI={key:0,class:"animate-spin h-4 w-4 mr-2 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},iI={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},sI={key:"saving"},oI={key:"success",class:"save-success-text"},aI={key:"default"},lI=oo({__name:"MapToolbar",props:{lastSave:{},planName:{},planDescription:{},saveStatus:{}},emits:["change-map-type","create-new-plan","load-plan","save-plan","adjust-view","generate-summary"],setup(e,{emit:t}){const n=t,r=e,i=Rt("Hybride"),o=Rt(!1),s=R=>{const N=R.currentTarget,j=N.nextElementSibling;if(j&&j.classList.contains("dropdown-menu")){const J=N.getBoundingClientRect();j.style.top=`${J.bottom}px`,j.style.left=`${J.left}px`}},u={Hybride:"Hybride",Cadastre:"Cadastre",IGN:"IGN"},f=gr(()=>r.lastSave?new Date(r.lastSave).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Jamais"),d=R=>{i.value=R,n("change-map-type",R),k()},m=()=>{n("create-new-plan"),k()},y=()=>{n("load-plan"),k()},w=()=>{n("save-plan"),k()},_=()=>{n("adjust-view"),k()},M=()=>{n("generate-summary"),k()},k=()=>{o.value=!1};return(R,N)=>(Ue(),Ge("div",AO,[E("div",kO,[E("div",TO,[E("button",{class:"btn-toolbar dropdown-toggle",onMouseover:s},[N[2]||(N[2]=E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M12 1.586l-4 4V17h8V5.586l-4-4zM2 17V9.276l4-3.638V17H2zM2 8.162V3h4.5L12 8.5V17H6V5.638L2 8.162z","clip-rule":"evenodd"})],-1)),E("span",null,Wt(u[i.value]),1)],32),E("div",DO,[(Ue(),Ge(Rn,null,Nr(u,(j,J)=>E("button",{key:J,class:Ii(["dropdown-item",{active:J===i.value}]),onClick:te=>d(J)},Wt(j),11,BO)),64))])]),R.planName?(Ue(),Ge("div",NO,[E("div",OO,[E("div",IO,[E("h2",RO,Wt(R.planName),1),R.planDescription?(Ue(),Ge("p",FO,Wt(R.planDescription),1)):un("",!0)])])])):un("",!0),E("div",{class:"border-l pl-2"},[E("div",{class:"flex items-center space-x-1"},[E("button",{onClick:m,class:"btn-toolbar",title:"Nouveau plan"},N[3]||(N[3]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),E("span",{class:"hidden lg:inline ml-1"},"Nouveau",-1)])),E("button",{onClick:y,class:"btn-toolbar",title:"Charger un plan"},N[4]||(N[4]=[uc('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" data-v-a33ebaa5><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" data-v-a33ebaa5></path><path d="M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z" data-v-a33ebaa5></path><path fill-rule="evenodd" d="M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z" clip-rule="evenodd" data-v-a33ebaa5></path></svg><span class="hidden lg:inline ml-1" data-v-a33ebaa5>Charger</span>',2)])),E("button",{onClick:w,class:"btn-toolbar",title:"Enregistrer le plan"},N[5]||(N[5]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1),E("span",{class:"hidden lg:inline ml-1"},"Enregistrer",-1)]))])]),E("div",{class:"border-l pl-2"},[E("div",{class:"flex items-center space-x-1"},[E("button",{onClick:_,class:"btn-toolbar",title:"Ajuster la vue"},N[6]||(N[6]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),E("span",{class:"hidden lg:inline ml-1"},"Ajuster",-1)])),E("button",{onClick:M,class:"btn-toolbar",title:"Générer une synthèse"},N[7]||(N[7]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),E("span",{class:"hidden lg:inline ml-1"},"Synthèse",-1)]))])]),E("div",jO,[E("div",{class:Ii(["text-xs hidden lg:flex items-center",{"text-gray-500":!R.saveStatus,"text-primary-600 font-medium":R.saveStatus==="success","text-blue-600 font-medium":R.saveStatus==="saving"}])},[R.saveStatus==="saving"?(Ue(),Ge("svg",zO,N[8]||(N[8]=[E("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),E("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):un("",!0),R.saveStatus==="success"?(Ue(),Ge("svg",$O,N[9]||(N[9]=[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):un("",!0),ci(Hv,{name:"fade-slide",mode:"out-in"},{default:Gl(()=>[R.saveStatus==="saving"?(Ue(),Ge("span",UO," Sauvegarde en cours... ")):R.saveStatus==="success"?(Ue(),Ge("span",VO," Sauvegarde réussie ! ")):(Ue(),Ge("span",HO," Dernière modification : "+Wt(f.value),1))]),_:1})],2)])]),E("div",GO,[E("div",qO,[E("button",{onClick:N[0]||(N[0]=j=>o.value=!o.value),class:"p-2 rounded-md border bg-white shadow-sm"},N[10]||(N[10]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1)])),R.planName?(Ue(),Ge("div",WO,Wt(R.planName),1)):un("",!0),E("div",{class:"flex space-x-2"},[E("button",{onClick:m,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},N[11]||(N[11]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1)])),E("button",{onClick:w,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},N[12]||(N[12]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1)])),E("button",{onClick:_,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},N[13]||(N[13]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)]))])]),o.value?(Ue(),Ge("div",ZO,[E("div",KO,[N[15]||(N[15]=E("h3",{class:"text-base font-semibold text-gray-800"},"Menu",-1)),E("button",{onClick:N[1]||(N[1]=j=>o.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},N[14]||(N[14]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("div",YO,[R.planName?(Ue(),Ge("div",JO,[E("h3",XO,Wt(R.planName),1),R.planDescription?(Ue(),Ge("p",QO,Wt(R.planDescription),1)):un("",!0)])):un("",!0),E("div",eI,[N[16]||(N[16]=E("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Type de carte",-1)),E("div",tI,[(Ue(),Ge(Rn,null,Nr(u,(j,J)=>E("button",{key:J,class:Ii(["px-3 py-2 text-sm rounded-md border shadow-sm",{"bg-blue-50 border-blue-300 text-blue-700 font-medium":J===i.value}]),onClick:te=>d(J)},Wt(j),11,nI)),64))])]),E("div",{class:"flex flex-col"},[N[20]||(N[20]=E("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Outils de plan",-1)),E("div",{class:"grid grid-cols-3 gap-2"},[E("button",{onClick:m,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},N[17]||(N[17]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),di(" Nouveau ")])),E("button",{onClick:y,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},N[18]||(N[18]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"}),E("path",{d:"M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z"}),E("path",{"fill-rule":"evenodd",d:"M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),di(" Charger ")])),E("button",{onClick:M,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},N[19]||(N[19]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),di(" Synthèse ")]))])]),E("div",{class:Ii(["text-sm text-center pt-3 border-t flex items-center justify-center space-x-1 mt-2",{"text-gray-500":!R.saveStatus,"text-primary-600 font-medium":R.saveStatus==="success","text-blue-600 font-medium":R.saveStatus==="saving"}])},[R.saveStatus==="saving"?(Ue(),Ge("svg",rI,N[21]||(N[21]=[E("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),E("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):un("",!0),R.saveStatus==="success"?(Ue(),Ge("svg",iI,N[22]||(N[22]=[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):un("",!0),ci(Hv,{name:"fade-slide",mode:"out-in"},{default:Gl(()=>[R.saveStatus==="saving"?(Ue(),Ge("span",sI," Sauvegarde en cours... ")):R.saveStatus==="success"?(Ue(),Ge("span",oI," Sauvegarde réussie ! ")):(Ue(),Ge("span",aI," Dernière modification : "+Wt(f.value),1))]),_:1})],2)])])):un("",!0)])]))}}),uI=nm(lI,[["__scopeId","data-v-a33ebaa5"]]);var m0,cI=new Uint8Array(16);function fI(){if(!m0&&(m0=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!m0))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return m0(cI)}const hI=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function dI(e){return typeof e=="string"&&hI.test(e)}var fa=[];for(var ov=0;ov<256;++ov)fa.push((ov+256).toString(16).substr(1));function pI(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(fa[e[t+0]]+fa[e[t+1]]+fa[e[t+2]]+fa[e[t+3]]+"-"+fa[e[t+4]]+fa[e[t+5]]+"-"+fa[e[t+6]]+fa[e[t+7]]+"-"+fa[e[t+8]]+fa[e[t+9]]+"-"+fa[e[t+10]]+fa[e[t+11]]+fa[e[t+12]]+fa[e[t+13]]+fa[e[t+14]]+fa[e[t+15]]).toLowerCase();if(!dI(n))throw TypeError("Stringified UUID is invalid");return n}function gI(e,t,n){e=e||{};var r=e.random||(e.rng||fI)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,pI(r)}var Ts=(e=>(e.PRIVATE="private",e.COMPANY="company",e.EMPLOYEE="employee",e.VISITOR="visitor",e))(Ts||{});const Bp=Ap("notes",()=>{const e=Rt([{id:"a-faire",title:"À faire",color:"#F59E0B",order:-1,isDefault:!0},{id:"en-cours",title:"En cours",color:"#3B82F6",order:0,isDefault:!0},{id:"termine",title:"Terminé",color:"#10B981",order:1,isDefault:!0}]),t=Rt([{id:1,title:"Point d'irrigation principal",description:"Point de départ du système d'irrigation",location:[43.6047,1.4442],columnId:"en-cours",order:0,createdAt:"2023-05-15T10:30:00Z",updatedAt:"2023-05-15T10:30:00Z",accessLevel:"company",style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[{id:1,text:"Vérifier le débit à cet endroit",createdAt:"2023-05-15T11:30:00Z",userId:1,userName:"Jean Dupont",userRole:"ENTREPRISE"},{id:2,text:"Débit vérifié, tout est normal",createdAt:"2023-05-16T09:45:00Z",userId:2,userName:"Marie Martin",userRole:"SALARIE"}],photos:[{id:1,url:"https://thumbs.dreamstime.com/b/gros-plan-de-pont-en-b%C3%A9ton-et-canaux-d-irrigation-avec-le-fond-arbre-l-194103331.jpg",createdAt:"2023-05-15T10:35:00Z",caption:"Vue du point d'irrigation"}]},{id:2,title:"Zone à problème",description:"Fuite détectée dans cette zone",location:[43.6057,1.4452],columnId:"en-cours",order:1,createdAt:"2023-05-16T14:20:00Z",updatedAt:"2023-05-16T14:20:00Z",accessLevel:"employee",style:{color:"#EF4444",weight:2,opacity:1,fillColor:"#EF4444",fillOpacity:.6,radius:8},comments:[],photos:[]},{id:3,title:"Vanne de contrôle",description:"Vanne principale pour le secteur nord",location:[43.6067,1.4462],columnId:"termine",order:0,createdAt:"2023-05-17T09:15:00Z",updatedAt:"2023-05-17T09:15:00Z",accessLevel:"visitor",style:{color:"#10B981",weight:2,opacity:1,fillColor:"#10B981",fillOpacity:.6,radius:8},comments:[],photos:[]}]),n=gr(()=>I=>e.value.find(K=>K.id===I)),r=gr(()=>I=>{const K=e.value.find($=>$.id===I);return K?K.color:"#6B7280"}),i=gr(()=>I=>t.value.filter(K=>K.columnId===I).sort((K,$)=>K.order-$.order)),o=gr(()=>e.value.find(I=>I.isDefault)||e.value[0]),s=gr(()=>[...e.value].sort((I,K)=>I.order-K.order)),u=gr(()=>I=>{const K=ga();if(!K.user)return!1;if(K.isAdmin)return!0;switch(I.accessLevel){case"private":return!0;case"company":return K.isAdmin||K.isEntreprise;case"employee":return K.isAdmin||K.isEntreprise||K.isSalarie;case"visitor":return K.isAdmin||K.isEntreprise||K.isSalarie||K.isVisiteur;default:return!1}}),f=gr(()=>t.value.filter(I=>u.value(I))),d=gr(()=>I=>f.value.filter(K=>K.columnId===I).sort((K,$)=>K.order-$.order));function m(I,K="#6B7280"){const $=e.value.reduce((O,z)=>Math.max(O,z.order),-1);e.value.push({id:gI(),title:I,color:K,order:$+1})}function y(I,K){const $=e.value.findIndex(O=>O.id===I);$!==-1&&(e.value[$]={...e.value[$],...K})}function w(I){const K=e.value.find(O=>O.id===I);if(!K||K.isDefault)return;const $=o.value;t.value.forEach(O=>{O.columnId===I&&(O.columnId=$.id)}),e.value=e.value.filter(O=>O.id!==I)}function _(I){I.forEach((K,$)=>{const O=e.value.find(z=>z.id===K);O&&(O.order=$)})}function M(I){const K=t.value.length>0?Math.max(...t.value.map(W=>W.id))+1:1,$=new Date().toISOString(),O=t.value.filter(W=>W.columnId===I.columnId),z=O.length>0?Math.max(...O.map(W=>W.order))+1:0,V=I.accessLevel||"private";return t.value.push({...I,id:K,order:z,accessLevel:V,createdAt:$,updatedAt:$}),K}function k(I,K){const $=t.value.findIndex(O=>O.id===I);if($!==-1){const O={...t.value[$],...K,updatedAt:new Date().toISOString()};t.value[$]=O}}function R(I){t.value=t.value.filter(K=>K.id!==I)}function N(I,K){const $=t.value.findIndex(O=>O.id===I);if($!==-1){const O=t.value[$];if(O.columnId!==K){const V=t.value.filter(X=>X.columnId===K),W=V.length>0?Math.max(...V.map(X=>X.order))+1:0,q={...O,columnId:K,order:W,updatedAt:new Date().toISOString()};t.value[$]=q}else t.value[$]={...t.value[$],updatedAt:new Date().toISOString()}}}function j(I,K){K.forEach(($,O)=>{const z=t.value.findIndex(V=>V.id===$&&V.columnId===I);z!==-1&&(t.value[z]={...t.value[z],order:O,updatedAt:new Date().toISOString()})})}function J(I){switch(I){case"private":return"Privé";case"company":return"Entreprise";case"employee":return"Salariés";case"visitor":return"Visiteurs";default:return"Inconnu"}}function te(I,K){const $=t.value.findIndex(q=>q.id===I);if($===-1)return;const O=ga();if(!O.user||!O.isEntreprise&&!O.isAdmin)return;const z=t.value[$];z.comments||(z.comments=[]);const V=z.comments.length>0?Math.max(...z.comments.map(q=>q.id))+1:1,W={id:V,text:K,createdAt:new Date().toISOString(),userId:O.user.id,userName:O.user.username,userRole:O.user.user_type};return z.comments.push(W),z.updatedAt=new Date().toISOString(),t.value[$]={...z},V}function ae(I,K){const $=t.value.findIndex(z=>z.id===I);if($===-1||!t.value[$].comments)return;const O=t.value[$];O.comments=O.comments.filter(z=>z.id!==K),O.updatedAt=new Date().toISOString(),t.value[$]={...O}}function le(I,K){const $=t.value.findIndex(W=>W.id===I);if($===-1)return;const O=t.value[$];O.photos||(O.photos=[]);const z=O.photos.length>0?Math.max(...O.photos.map(W=>W.id))+1:1,V={id:z,url:K.url,caption:K.caption,createdAt:new Date().toISOString()};return O.photos.push(V),O.updatedAt=new Date().toISOString(),t.value[$]={...O},z}function xe(I,K){const $=t.value.findIndex(z=>z.id===I);if($===-1||!t.value[$].photos)return;const O=t.value[$];O.photos=O.photos.filter(z=>z.id!==K),O.updatedAt=new Date().toISOString(),t.value[$]={...O}}function G(I,K,$){const O=t.value.findIndex(W=>W.id===I);if(O===-1||!t.value[O].photos)return;const z=t.value[O],V=z.photos.findIndex(W=>W.id===K);V!==-1&&(z.photos[V].caption=$,z.updatedAt=new Date().toISOString(),t.value[O]={...z})}return{columns:e,notes:t,getColumnById:n,getColumnColor:r,getNotesByColumn:i,getDefaultColumn:o,getSortedColumns:s,hasAccessToNote:u,getAccessibleNotes:f,getAccessibleNotesByColumn:d,getAccessLevelLabel:J,addColumn:m,updateColumn:y,removeColumn:w,reorderColumns:_,addNote:M,updateNote:k,removeNote:R,moveNote:N,reorderNotes:j,addComment:te,removeComment:ae,addPhoto:le,removePhoto:xe,updatePhotoCaption:G}}),mI={class:"comment-thread"},vI={key:0,class:"space-y-3 mb-4"},yI={class:"flex justify-between items-start"},_I={class:"flex items-center"},bI={class:"font-medium text-sm text-gray-900"},wI={class:"flex items-center"},xI={class:"text-xs text-gray-500"},LI=["onClick"],SI={class:"mt-1 text-sm text-gray-700 whitespace-pre-wrap"},CI={key:1,class:"text-center text-sm text-gray-500 italic my-4"},EI={key:2,class:"mt-3"},PI={class:"flex justify-end mt-2"},MI=["disabled"],AI={key:3,class:"text-center text-sm text-gray-500 italic mt-2"},kI=oo({__name:"CommentThread",props:{noteId:{},comments:{}},emits:["update:comments"],setup(e,{emit:t}){const n=e,r=ga(),i=Bp(),o=dc(),s=Rt(""),u=gr(()=>r.isEntreprise||r.isAdmin);function f(M){return r.user&&M.userId===r.user.id||r.isAdmin}function d(){if(s.value.trim())try{i.addComment(n.noteId,s.value.trim()),s.value=""}catch(M){console.error("Erreur lors de l'ajout du commentaire:",M),o.error("Erreur lors de l'ajout du commentaire")}}function m(M){try{i.removeComment(n.noteId,M),o.success("Commentaire supprimé")}catch(k){console.error("Erreur lors de la suppression du commentaire:",k),o.error("Erreur lors de la suppression du commentaire")}}function y(M){const k=new Date(M);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(k)}function w(M){switch(M){case"admin":return"bg-purple-100 text-purple-800";case"entreprise":return"bg-blue-100 text-blue-800";case"salarie":return"bg-green-100 text-green-800";case"visiteur":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}function _(M){switch(M){case"admin":return"Admin";case"entreprise":return"Entreprise";case"salarie":return"Salarié";case"visiteur":return"Visiteur";default:return M}}return(M,k)=>(Ue(),Ge("div",mI,[M.comments&&M.comments.length>0?(Ue(),Ge("div",vI,[(Ue(!0),Ge(Rn,null,Nr(M.comments,R=>(Ue(),Ge("div",{key:R.id,class:"bg-gray-50 rounded-lg p-3"},[E("div",yI,[E("div",_I,[E("div",bI,Wt(R.userName),1),E("span",{class:Ii(["ml-2 text-xs px-2 py-0.5 rounded-full",w(R.userRole)])},Wt(_(R.userRole)),3)]),E("div",wI,[E("span",xI,Wt(y(R.createdAt)),1),f(R)?(Ue(),Ge("button",{key:0,onClick:N=>m(R.id),class:"ml-2 text-gray-400 hover:text-red-500"},k[1]||(k[1]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,LI)):un("",!0)])]),E("p",SI,Wt(R.text),1)]))),128))])):(Ue(),Ge("div",CI," Aucun commentaire pour le moment ")),u.value?(Ue(),Ge("div",EI,[In(E("textarea",{"onUpdate:modelValue":k[0]||(k[0]=R=>s.value=R),placeholder:"Ajouter un commentaire...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:"2"},null,512),[[ei,s.value]]),E("div",PI,[E("button",{onClick:d,disabled:!s.value.trim(),class:"px-3 py-1 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"}," Ajouter ",8,MI)])])):(Ue(),Ge("div",AI," Seuls les utilisateurs de l'entreprise peuvent ajouter des commentaires "))]))}}),TI={class:"photo-gallery"},DI={key:0,class:"grid grid-cols-2 gap-2 mb-4"},BI=["src","alt","onClick"],NI={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 rounded-lg flex items-center justify-center"},OI={class:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex space-x-2"},II=["onClick"],RI=["onClick"],FI={key:0,class:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs p-1 truncate rounded-b-lg"},jI={key:1,class:"text-center text-sm text-gray-500 italic my-4"},zI={class:"flex space-x-2 mt-3"},$I={for:"photo-upload",class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 cursor-pointer"},UI={key:2,class:"fixed inset-0 z-[3002] flex items-center justify-center p-4 bg-black bg-opacity-75"},VI={class:"relative max-w-3xl max-h-[90vh] bg-white rounded-lg overflow-hidden"},HI=["src","alt"],GI={key:1,class:"p-3 bg-white"},qI={class:"text-sm text-gray-700"},WI={key:3,class:"fixed inset-0 z-[3002] flex items-center justify-center p-4 bg-black bg-opacity-75"},ZI={class:"w-full max-w-md bg-white rounded-lg overflow-hidden"},KI={class:"p-4"},YI={class:"p-4 bg-gray-50 flex justify-end space-x-3"},JI={key:4,class:"fixed inset-0 z-[3002] flex items-center justify-center p-4 bg-black bg-opacity-75"},XI={class:"w-full max-w-md bg-white rounded-lg overflow-hidden"},QI={class:"p-4 border-b flex justify-between items-center"},eR={class:"relative"},tR=["src"],nR={class:"p-4 bg-gray-50 flex justify-center"},rR={key:1,class:"flex space-x-3"},iR=oo({__name:"PhotoGallery",props:{noteId:{},photos:{}},emits:["update:photos"],setup(e,{emit:t}){const n=e,r=Bp(),i=dc(),o=Rt(null),s=Rt(null);let u=null;const f=Rt(!1),d=Rt(!1),m=Rt(!1),y=Rt(null),w=Rt(null),_=Rt(""),M=Rt(null);function k(K){y.value=K,f.value=!0}function R(K){w.value=K,_.value=K.caption||"",d.value=!0}function N(){if(w.value)try{r.updatePhotoCaption(n.noteId,w.value.id,_.value),d.value=!1,i.success("Légende mise à jour")}catch(K){console.error("Erreur lors de la mise à jour de la légende:",K),i.error("Erreur lors de la mise à jour de la légende")}}function j(K){if(confirm("Êtes-vous sûr de vouloir supprimer cette photo ?"))try{r.removePhoto(n.noteId,K),i.success("Photo supprimée")}catch($){console.error("Erreur lors de la suppression de la photo:",$),i.error("Erreur lors de la suppression de la photo")}}async function J(K){const $=K.target;if(!$.files||$.files.length===0)return;const O=$.files[0];if(!O.type.startsWith("image/")){i.error("Le fichier doit être une image");return}if(O.size>5*1024*1024){i.error("L'image est trop volumineuse (max 5MB)");return}try{const z=await te(O);r.addPhoto(n.noteId,{url:z}),$.value="",i.success("Photo ajoutée")}catch(z){console.error("Erreur lors de l'ajout de la photo:",z),i.error("Erreur lors de l'ajout de la photo")}}function te(K){return new Promise(($,O)=>{const z=new FileReader;z.onload=()=>$(z.result),z.onerror=O,z.readAsDataURL(K)})}async function ae(){m.value=!0,M.value=null;try{u=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}}),o.value&&(o.value.srcObject=u)}catch(K){console.error("Erreur lors de l'accès à la caméra:",K),i.error("Impossible d'accéder à la caméra"),m.value=!1}}function le(){if(!o.value||!s.value)return;const K=o.value,$=s.value;$.width=K.videoWidth,$.height=K.videoHeight;const O=$.getContext("2d");O&&(O.drawImage(K,0,0,$.width,$.height),M.value=$.toDataURL("image/jpeg"))}function xe(){M.value=null}function G(){if(M.value)try{r.addPhoto(n.noteId,{url:M.value}),m.value=!1,I(),i.success("Photo ajoutée")}catch(K){console.error("Erreur lors de l'ajout de la photo:",K),i.error("Erreur lors de l'ajout de la photo")}}function I(){u&&(u.getTracks().forEach(K=>K.stop()),u=null)}return mc(()=>{I()}),(K,$)=>(Ue(),Ge("div",TI,[K.photos&&K.photos.length>0?(Ue(),Ge("div",DI,[(Ue(!0),Ge(Rn,null,Nr(K.photos,O=>(Ue(),Ge("div",{key:O.id,class:"relative group"},[E("img",{src:O.url,alt:O.caption||"Photo",class:"w-full h-32 object-cover rounded-lg cursor-pointer",onClick:z=>k(O)},null,8,BI),E("div",NI,[E("div",OI,[E("button",{onClick:Vc(z=>R(O),["stop"]),class:"p-1 bg-white rounded-full text-gray-700 hover:text-primary-600",title:"Modifier la légende"},$[4]||($[4]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,II),E("button",{onClick:Vc(z=>j(O.id),["stop"]),class:"p-1 bg-white rounded-full text-gray-700 hover:text-red-600",title:"Supprimer la photo"},$[5]||($[5]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,RI)])]),O.caption?(Ue(),Ge("div",FI,Wt(O.caption),1)):un("",!0)]))),128))])):(Ue(),Ge("div",jI," Aucune photo pour le moment ")),E("div",zI,[E("button",{onClick:ae,class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},$[6]||($[6]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),di(" Prendre une photo ")])),E("label",$I,[$[7]||($[7]=E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0l-4 4m4-4v12"})],-1)),$[8]||($[8]=di(" Téléverser ")),E("input",{id:"photo-upload",type:"file",accept:"image/*",class:"hidden",onChange:J},null,32)])]),f.value?(Ue(),Ge("div",UI,[E("div",VI,[E("button",{onClick:$[0]||($[0]=O=>f.value=!1),class:"absolute top-2 right-2 z-10 p-1 bg-white rounded-full text-gray-700 hover:text-red-600 shadow-md"},$[9]||($[9]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),y.value?(Ue(),Ge("img",{key:0,src:y.value.url,alt:y.value.caption||"Photo",class:"max-h-[80vh] max-w-full object-contain"},null,8,HI)):un("",!0),y.value&&y.value.caption?(Ue(),Ge("div",GI,[E("p",qI,Wt(y.value.caption),1)])):un("",!0)])])):un("",!0),d.value?(Ue(),Ge("div",WI,[E("div",ZI,[$[10]||($[10]=E("div",{class:"p-4 border-b"},[E("h3",{class:"text-lg font-medium text-gray-900"},"Modifier la légende")],-1)),E("div",KI,[In(E("textarea",{"onUpdate:modelValue":$[1]||($[1]=O=>_.value=O),placeholder:"Ajouter une légende...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:"3"},null,512),[[ei,_.value]])]),E("div",YI,[E("button",{onClick:$[2]||($[2]=O=>d.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Annuler "),E("button",{onClick:N,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Enregistrer ")])])])):un("",!0),m.value?(Ue(),Ge("div",JI,[E("div",XI,[E("div",QI,[$[12]||($[12]=E("h3",{class:"text-lg font-medium text-gray-900"},"Prendre une photo",-1)),E("button",{onClick:$[3]||($[3]=O=>m.value=!1),class:"text-gray-400 hover:text-gray-500"},$[11]||($[11]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("div",eR,[M.value?(Ue(),Ge("img",{key:1,src:M.value,class:"w-full h-64 object-cover",alt:"Captured"},null,8,tR)):(Ue(),Ge("video",{key:0,ref_key:"videoElement",ref:o,autoplay:"",class:"w-full h-64 object-cover"},null,512)),E("canvas",{ref_key:"canvasElement",ref:s,class:"hidden"},null,512)]),E("div",nR,[M.value?(Ue(),Ge("div",rR,[E("button",{onClick:xe,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Reprendre "),E("button",{onClick:G,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Utiliser ")])):(Ue(),Ge("button",{key:0,onClick:le,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-full w-12 h-12 flex items-center justify-center hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},$[13]||($[13]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"})],-1)])))])])])):un("",!0)]))}}),sR={class:"fixed z-[9999] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},oR={class:"flex items-center justify-center min-h-screen w-full"},aR={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-2xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden"},lR={class:"p-4 md:p-6 flex-1 overflow-y-auto"},uR={class:"flex justify-between items-center mb-4 border-b pb-4"},cR={class:"text-xl font-semibold text-gray-900"},fR={class:"mb-4 border-b border-gray-200"},hR={class:"flex space-x-4","aria-label":"Tabs"},dR={key:0,class:"ml-1 px-2 py-0.5 text-xs rounded-full bg-primary-100 text-primary-800"},pR={key:0,class:"ml-1 px-2 py-0.5 text-xs rounded-full bg-primary-100 text-primary-800"},gR={key:0},mR={class:"mb-4"},vR={class:"mb-4"},yR={class:"mb-4"},_R=["value"],bR={class:"mb-4"},wR=["value"],xR={class:"mb-4"},LR={class:"mt-1 flex space-x-2"},SR=["onClick"],CR={key:1,class:"mt-4"},ER={key:2,class:"mt-4"},dx=oo({__name:"NoteEditModal",props:{note:{},isNewNote:{type:Boolean},location:{}},emits:["close","save"],setup(e,{emit:t}){const n=e,r=t,i=Bp(),o=dc(),s=Rt("info"),u=Rt({title:"",description:"",columnId:"",accessLevel:Ts.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[],photos:[]});Fo(()=>{console.log("[NoteEditModal] onMounted - props:",n),n.note?(console.log("[NoteEditModal] Édition d'une note existante:",n.note),u.value=JSON.parse(JSON.stringify(n.note))):n.isNewNote&&n.location?(console.log("[NoteEditModal] Création d'une nouvelle note avec location:",n.location),u.value={title:"Nouvelle note",description:"",location:n.location,columnId:i.getDefaultColumn.id,accessLevel:Ts.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[],photos:[]}):console.error("[NoteEditModal] Erreur: Ni note existante ni nouvelle note avec location"),console.log("[NoteEditModal] editingNote.value après initialisation:",u.value)});const f=gr(()=>i.getSortedColumns),d=[{id:Ts.PRIVATE,title:"Privé",description:"Visible uniquement par vous"},{id:Ts.COMPANY,title:"Entreprise",description:"Visible par l'entreprise uniquement"},{id:Ts.EMPLOYEE,title:"Salariés",description:"Visible par l'entreprise et les salariés"},{id:Ts.VISITOR,title:"Visiteurs",description:"Visible par tous"}],m=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6B7280"];function y(M){u.value.style.color=M,u.value.style.fillColor=M}function w(){r("close")}function _(){if(n.note)i.updateNote(n.note.id,u.value),o.success("Note mise à jour avec succès");else if(n.isNewNote&&n.location){const M=i.addNote({title:u.value.title,description:u.value.description,location:n.location,columnId:u.value.columnId,style:u.value.style,accessLevel:u.value.accessLevel});o.success("Note créée avec succès");const k=i.notes.find(R=>R.id===M);k&&r("save",k)}r("close")}return(M,k)=>{var R,N,j,J,te;return Ue(),Ge("div",sR,[E("div",oR,[k[16]||(k[16]=E("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),E("div",aR,[E("form",{onSubmit:Vc(_,["prevent"]),class:"h-full md:h-auto flex flex-col"},[E("div",lR,[E("div",uR,[E("h3",cR,Wt((R=M.note)!=null&&R.id?"Modifier la note":"Nouvelle note"),1),E("button",{type:"button",onClick:w,class:"text-gray-400 hover:text-gray-500"},k[7]||(k[7]=[E("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("div",fR,[E("nav",hR,[E("button",{type:"button",onClick:k[0]||(k[0]=ae=>s.value="info"),class:Ii(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",s.value==="info"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Informations ",2),E("button",{type:"button",onClick:k[1]||(k[1]=ae=>s.value="comments"),class:Ii(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",s.value==="comments"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[k[8]||(k[8]=di(" Commentaires ")),(j=(N=M.note)==null?void 0:N.comments)!=null&&j.length?(Ue(),Ge("span",dR,Wt(M.note.comments.length),1)):un("",!0)],2),E("button",{type:"button",onClick:k[2]||(k[2]=ae=>s.value="photos"),class:Ii(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",s.value==="photos"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[k[9]||(k[9]=di(" Photos ")),(te=(J=M.note)==null?void 0:J.photos)!=null&&te.length?(Ue(),Ge("span",pR,Wt(M.note.photos.length),1)):un("",!0)],2)])]),s.value==="info"?(Ue(),Ge("div",gR,[E("div",mR,[k[10]||(k[10]=E("label",{for:"title",class:"block text-sm font-medium text-gray-700"},"Titre",-1)),In(E("input",{type:"text",id:"title","onUpdate:modelValue":k[3]||(k[3]=ae=>u.value.title=ae),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[ei,u.value.title]])]),E("div",vR,[k[11]||(k[11]=E("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),In(E("textarea",{id:"description","onUpdate:modelValue":k[4]||(k[4]=ae=>u.value.description=ae),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[ei,u.value.description]])]),E("div",yR,[k[12]||(k[12]=E("label",{for:"column",class:"block text-sm font-medium text-gray-700"},"État",-1)),In(E("select",{id:"column","onUpdate:modelValue":k[5]||(k[5]=ae=>u.value.columnId=ae),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[(Ue(!0),Ge(Rn,null,Nr(f.value,ae=>(Ue(),Ge("option",{key:ae.id,value:ae.id},Wt(ae.title),9,_R))),128))],512),[[ss,u.value.columnId]])]),E("div",bR,[k[13]||(k[13]=E("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accès",-1)),In(E("select",{id:"accessLevel","onUpdate:modelValue":k[6]||(k[6]=ae=>u.value.accessLevel=ae),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[(Ue(),Ge(Rn,null,Nr(d,ae=>E("option",{key:ae.id,value:ae.id},Wt(ae.title)+" - "+Wt(ae.description),9,wR)),64))],512),[[ss,u.value.accessLevel]])]),E("div",xR,[k[14]||(k[14]=E("label",{class:"block text-sm font-medium text-gray-700"},"Couleur",-1)),E("div",LR,[(Ue(),Ge(Rn,null,Nr(m,ae=>E("div",{key:ae,class:Ii(["w-8 h-8 rounded-full cursor-pointer border-2",{"border-gray-400":u.value.style.color!==ae,"border-black":u.value.style.color===ae}]),style:tl({backgroundColor:ae}),onClick:le=>y(ae)},null,14,SR)),64))])])])):s.value==="comments"?(Ue(),Ge("div",CR,[M.note?(Ue(),za(kI,{key:0,noteId:M.note.id,comments:M.note.comments||[]},null,8,["noteId","comments"])):un("",!0)])):s.value==="photos"?(Ue(),Ge("div",ER,[M.note?(Ue(),za(iR,{key:0,noteId:M.note.id,photos:M.note.photos||[]},null,8,["noteId","photos"])):un("",!0)])):un("",!0)]),E("div",{class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[k[15]||(k[15]=E("button",{type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:ml-3 sm:w-auto sm:text-sm"}," Enregistrer ",-1)),E("button",{onClick:w,type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Annuler ")])],32)])])])}}});(()=>{var Sn,Jn;var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,s=(l,h)=>()=>(h||l((h={exports:{}}).exports,h),h.exports),u=(l,h,v,x)=>{if(h&&typeof h=="object"||typeof h=="function")for(let C of r(h))!o.call(l,C)&&C!==v&&t(l,C,{get:()=>h[C],enumerable:!(x=n(h,C))||x.enumerable});return l},f=(l,h,v)=>(v=l!=null?e(i(l)):{},u(h||!l||!l.__esModule?t(v,"default",{value:l,enumerable:!0}):v,l)),d=s((l,h)=>{function v(){this.__data__=[],this.size=0}h.exports=v}),m=s((l,h)=>{function v(x,C){return x===C||x!==x&&C!==C}h.exports=v}),y=s((l,h)=>{var v=m();function x(C,F){for(var Q=C.length;Q--;)if(v(C[Q][0],F))return Q;return-1}h.exports=x}),w=s((l,h)=>{var v=y(),x=Array.prototype,C=x.splice;function F(Q){var re=this.__data__,he=v(re,Q);if(he<0)return!1;var Le=re.length-1;return he==Le?re.pop():C.call(re,he,1),--this.size,!0}h.exports=F}),_=s((l,h)=>{var v=y();function x(C){var F=this.__data__,Q=v(F,C);return Q<0?void 0:F[Q][1]}h.exports=x}),M=s((l,h)=>{var v=y();function x(C){return v(this.__data__,C)>-1}h.exports=x}),k=s((l,h)=>{var v=y();function x(C,F){var Q=this.__data__,re=v(Q,C);return re<0?(++this.size,Q.push([C,F])):Q[re][1]=F,this}h.exports=x}),R=s((l,h)=>{var v=d(),x=w(),C=_(),F=M(),Q=k();function re(he){var Le=-1,Je=he==null?0:he.length;for(this.clear();++Le<Je;){var ze=he[Le];this.set(ze[0],ze[1])}}re.prototype.clear=v,re.prototype.delete=x,re.prototype.get=C,re.prototype.has=F,re.prototype.set=Q,h.exports=re}),N=s((l,h)=>{var v=R();function x(){this.__data__=new v,this.size=0}h.exports=x}),j=s((l,h)=>{function v(x){var C=this.__data__,F=C.delete(x);return this.size=C.size,F}h.exports=v}),J=s((l,h)=>{function v(x){return this.__data__.get(x)}h.exports=v}),te=s((l,h)=>{function v(x){return this.__data__.has(x)}h.exports=v}),ae=s((l,h)=>{var v=typeof Jo=="object"&&Jo&&Jo.Object===Object&&Jo;h.exports=v}),le=s((l,h)=>{var v=ae(),x=typeof self=="object"&&self&&self.Object===Object&&self,C=v||x||Function("return this")();h.exports=C}),xe=s((l,h)=>{var v=le(),x=v.Symbol;h.exports=x}),G=s((l,h)=>{var v=xe(),x=Object.prototype,C=x.hasOwnProperty,F=x.toString,Q=v?v.toStringTag:void 0;function re(he){var Le=C.call(he,Q),Je=he[Q];try{he[Q]=void 0;var ze=!0}catch{}var vt=F.call(he);return ze&&(Le?he[Q]=Je:delete he[Q]),vt}h.exports=re}),I=s((l,h)=>{var v=Object.prototype,x=v.toString;function C(F){return x.call(F)}h.exports=C}),K=s((l,h)=>{var v=xe(),x=G(),C=I(),F="[object Null]",Q="[object Undefined]",re=v?v.toStringTag:void 0;function he(Le){return Le==null?Le===void 0?Q:F:re&&re in Object(Le)?x(Le):C(Le)}h.exports=he}),$=s((l,h)=>{function v(x){var C=typeof x;return x!=null&&(C=="object"||C=="function")}h.exports=v}),O=s((l,h)=>{var v=K(),x=$(),C="[object AsyncFunction]",F="[object Function]",Q="[object GeneratorFunction]",re="[object Proxy]";function he(Le){if(!x(Le))return!1;var Je=v(Le);return Je==F||Je==Q||Je==C||Je==re}h.exports=he}),z=s((l,h)=>{var v=le(),x=v["__core-js_shared__"];h.exports=x}),V=s((l,h)=>{var v=z(),x=function(){var F=/[^.]+$/.exec(v&&v.keys&&v.keys.IE_PROTO||"");return F?"Symbol(src)_1."+F:""}();function C(F){return!!x&&x in F}h.exports=C}),W=s((l,h)=>{var v=Function.prototype,x=v.toString;function C(F){if(F!=null){try{return x.call(F)}catch{}try{return F+""}catch{}}return""}h.exports=C}),q=s((l,h)=>{var v=O(),x=V(),C=$(),F=W(),Q=/[\\^$.*+?()[\]{}|]/g,re=/^\[object .+?Constructor\]$/,he=Function.prototype,Le=Object.prototype,Je=he.toString,ze=Le.hasOwnProperty,vt=RegExp("^"+Je.call(ze).replace(Q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function At(Jt){if(!C(Jt)||x(Jt))return!1;var yn=v(Jt)?vt:re;return yn.test(F(Jt))}h.exports=At}),X=s((l,h)=>{function v(x,C){return x==null?void 0:x[C]}h.exports=v}),Y=s((l,h)=>{var v=q(),x=X();function C(F,Q){var re=x(F,Q);return v(re)?re:void 0}h.exports=C}),me=s((l,h)=>{var v=Y(),x=le(),C=v(x,"Map");h.exports=C}),Se=s((l,h)=>{var v=Y(),x=v(Object,"create");h.exports=x}),Re=s((l,h)=>{var v=Se();function x(){this.__data__=v?v(null):{},this.size=0}h.exports=x}),T=s((l,h)=>{function v(x){var C=this.has(x)&&delete this.__data__[x];return this.size-=C?1:0,C}h.exports=v}),ne=s((l,h)=>{var v=Se(),x="__lodash_hash_undefined__",C=Object.prototype,F=C.hasOwnProperty;function Q(re){var he=this.__data__;if(v){var Le=he[re];return Le===x?void 0:Le}return F.call(he,re)?he[re]:void 0}h.exports=Q}),fe=s((l,h)=>{var v=Se(),x=Object.prototype,C=x.hasOwnProperty;function F(Q){var re=this.__data__;return v?re[Q]!==void 0:C.call(re,Q)}h.exports=F}),ce=s((l,h)=>{var v=Se(),x="__lodash_hash_undefined__";function C(F,Q){var re=this.__data__;return this.size+=this.has(F)?0:1,re[F]=v&&Q===void 0?x:Q,this}h.exports=C}),ye=s((l,h)=>{var v=Re(),x=T(),C=ne(),F=fe(),Q=ce();function re(he){var Le=-1,Je=he==null?0:he.length;for(this.clear();++Le<Je;){var ze=he[Le];this.set(ze[0],ze[1])}}re.prototype.clear=v,re.prototype.delete=x,re.prototype.get=C,re.prototype.has=F,re.prototype.set=Q,h.exports=re}),oe=s((l,h)=>{var v=ye(),x=R(),C=me();function F(){this.size=0,this.__data__={hash:new v,map:new(C||x),string:new v}}h.exports=F}),B=s((l,h)=>{function v(x){var C=typeof x;return C=="string"||C=="number"||C=="symbol"||C=="boolean"?x!=="__proto__":x===null}h.exports=v}),ue=s((l,h)=>{var v=B();function x(C,F){var Q=C.__data__;return v(F)?Q[typeof F=="string"?"string":"hash"]:Q.map}h.exports=x}),De=s((l,h)=>{var v=ue();function x(C){var F=v(this,C).delete(C);return this.size-=F?1:0,F}h.exports=x}),Me=s((l,h)=>{var v=ue();function x(C){return v(this,C).get(C)}h.exports=x}),We=s((l,h)=>{var v=ue();function x(C){return v(this,C).has(C)}h.exports=x}),Z=s((l,h)=>{var v=ue();function x(C,F){var Q=v(this,C),re=Q.size;return Q.set(C,F),this.size+=Q.size==re?0:1,this}h.exports=x}),de=s((l,h)=>{var v=oe(),x=De(),C=Me(),F=We(),Q=Z();function re(he){var Le=-1,Je=he==null?0:he.length;for(this.clear();++Le<Je;){var ze=he[Le];this.set(ze[0],ze[1])}}re.prototype.clear=v,re.prototype.delete=x,re.prototype.get=C,re.prototype.has=F,re.prototype.set=Q,h.exports=re}),ve=s((l,h)=>{var v=R(),x=me(),C=de(),F=200;function Q(re,he){var Le=this.__data__;if(Le instanceof v){var Je=Le.__data__;if(!x||Je.length<F-1)return Je.push([re,he]),this.size=++Le.size,this;Le=this.__data__=new C(Je)}return Le.set(re,he),this.size=Le.size,this}h.exports=Q}),pe=s((l,h)=>{var v=R(),x=N(),C=j(),F=J(),Q=te(),re=ve();function he(Le){var Je=this.__data__=new v(Le);this.size=Je.size}he.prototype.clear=x,he.prototype.delete=C,he.prototype.get=F,he.prototype.has=Q,he.prototype.set=re,h.exports=he}),$e=s((l,h)=>{var v=Y(),x=function(){try{var C=v(Object,"defineProperty");return C({},"",{}),C}catch{}}();h.exports=x}),Qe=s((l,h)=>{var v=$e();function x(C,F,Q){F=="__proto__"&&v?v(C,F,{configurable:!0,enumerable:!0,value:Q,writable:!0}):C[F]=Q}h.exports=x}),Ke=s((l,h)=>{var v=Qe(),x=m();function C(F,Q,re){(re!==void 0&&!x(F[Q],re)||re===void 0&&!(Q in F))&&v(F,Q,re)}h.exports=C}),He=s((l,h)=>{function v(x){return function(C,F,Q){for(var re=-1,he=Object(C),Le=Q(C),Je=Le.length;Je--;){var ze=Le[x?Je:++re];if(F(he[ze],ze,he)===!1)break}return C}}h.exports=v}),Xe=s((l,h)=>{var v=He(),x=v();h.exports=x}),st=s((l,h)=>{var v=le(),x=typeof l=="object"&&l&&!l.nodeType&&l,C=x&&typeof h=="object"&&h&&!h.nodeType&&h,F=C&&C.exports===x,Q=F?v.Buffer:void 0,re=Q?Q.allocUnsafe:void 0;function he(Le,Je){if(Je)return Le.slice();var ze=Le.length,vt=re?re(ze):new Le.constructor(ze);return Le.copy(vt),vt}h.exports=he}),kt=s((l,h)=>{var v=le(),x=v.Uint8Array;h.exports=x}),Ct=s((l,h)=>{var v=kt();function x(C){var F=new C.constructor(C.byteLength);return new v(F).set(new v(C)),F}h.exports=x}),Ut=s((l,h)=>{var v=Ct();function x(C,F){var Q=F?v(C.buffer):C.buffer;return new C.constructor(Q,C.byteOffset,C.length)}h.exports=x}),Gt=s((l,h)=>{function v(x,C){var F=-1,Q=x.length;for(C||(C=Array(Q));++F<Q;)C[F]=x[F];return C}h.exports=v}),fn=s((l,h)=>{var v=$(),x=Object.create,C=function(){function F(){}return function(Q){if(!v(Q))return{};if(x)return x(Q);F.prototype=Q;var re=new F;return F.prototype=void 0,re}}();h.exports=C}),pn=s((l,h)=>{function v(x,C){return function(F){return x(C(F))}}h.exports=v}),et=s((l,h)=>{var v=pn(),x=v(Object.getPrototypeOf,Object);h.exports=x}),it=s((l,h)=>{var v=Object.prototype;function x(C){var F=C&&C.constructor,Q=typeof F=="function"&&F.prototype||v;return C===Q}h.exports=x}),nt=s((l,h)=>{var v=fn(),x=et(),C=it();function F(Q){return typeof Q.constructor=="function"&&!C(Q)?v(x(Q)):{}}h.exports=F}),Vt=s((l,h)=>{function v(x){return x!=null&&typeof x=="object"}h.exports=v}),Qt=s((l,h)=>{var v=K(),x=Vt(),C="[object Arguments]";function F(Q){return x(Q)&&v(Q)==C}h.exports=F}),Nn=s((l,h)=>{var v=Qt(),x=Vt(),C=Object.prototype,F=C.hasOwnProperty,Q=C.propertyIsEnumerable,re=v(function(){return arguments}())?v:function(he){return x(he)&&F.call(he,"callee")&&!Q.call(he,"callee")};h.exports=re}),wn=s((l,h)=>{var v=Array.isArray;h.exports=v}),An=s((l,h)=>{var v=9007199254740991;function x(C){return typeof C=="number"&&C>-1&&C%1==0&&C<=v}h.exports=x}),or=s((l,h)=>{var v=O(),x=An();function C(F){return F!=null&&x(F.length)&&!v(F)}h.exports=C}),xn=s((l,h)=>{var v=or(),x=Vt();function C(F){return x(F)&&v(F)}h.exports=C}),En=s((l,h)=>{function v(){return!1}h.exports=v}),Cn=s((l,h)=>{var v=le(),x=En(),C=typeof l=="object"&&l&&!l.nodeType&&l,F=C&&typeof h=="object"&&h&&!h.nodeType&&h,Q=F&&F.exports===C,re=Q?v.Buffer:void 0,he=re?re.isBuffer:void 0,Le=he||x;h.exports=Le}),cr=s((l,h)=>{var v=K(),x=et(),C=Vt(),F="[object Object]",Q=Function.prototype,re=Object.prototype,he=Q.toString,Le=re.hasOwnProperty,Je=he.call(Object);function ze(vt){if(!C(vt)||v(vt)!=F)return!1;var At=x(vt);if(At===null)return!0;var Jt=Le.call(At,"constructor")&&At.constructor;return typeof Jt=="function"&&Jt instanceof Jt&&he.call(Jt)==Je}h.exports=ze}),yr=s((l,h)=>{var v=K(),x=An(),C=Vt(),F="[object Arguments]",Q="[object Array]",re="[object Boolean]",he="[object Date]",Le="[object Error]",Je="[object Function]",ze="[object Map]",vt="[object Number]",At="[object Object]",Jt="[object RegExp]",yn="[object Set]",bn="[object String]",ur="[object WeakMap]",Ye="[object ArrayBuffer]",tt="[object DataView]",ft="[object Float32Array]",Nt="[object Float64Array]",bt="[object Int8Array]",Tt="[object Int16Array]",ge="[object Int32Array]",Pe="[object Uint8Array]",Oe="[object Uint8ClampedArray]",Ne="[object Uint16Array]",Fe="[object Uint32Array]",je={};je[ft]=je[Nt]=je[bt]=je[Tt]=je[ge]=je[Pe]=je[Oe]=je[Ne]=je[Fe]=!0,je[F]=je[Q]=je[Ye]=je[re]=je[tt]=je[he]=je[Le]=je[Je]=je[ze]=je[vt]=je[At]=je[Jt]=je[yn]=je[bn]=je[ur]=!1;function at(lt){return C(lt)&&x(lt.length)&&!!je[v(lt)]}h.exports=at}),mt=s((l,h)=>{function v(x){return function(C){return x(C)}}h.exports=v}),qe=s((l,h)=>{var v=ae(),x=typeof l=="object"&&l&&!l.nodeType&&l,C=x&&typeof h=="object"&&h&&!h.nodeType&&h,F=C&&C.exports===x,Q=F&&v.process,re=function(){try{var he=C&&C.require&&C.require("util").types;return he||Q&&Q.binding&&Q.binding("util")}catch{}}();h.exports=re}),Ft=s((l,h)=>{var v=yr(),x=mt(),C=qe(),F=C&&C.isTypedArray,Q=F?x(F):v;h.exports=Q}),kn=s((l,h)=>{function v(x,C){if(!(C==="constructor"&&typeof x[C]=="function")&&C!="__proto__")return x[C]}h.exports=v}),ar=s((l,h)=>{var v=Qe(),x=m(),C=Object.prototype,F=C.hasOwnProperty;function Q(re,he,Le){var Je=re[he];(!(F.call(re,he)&&x(Je,Le))||Le===void 0&&!(he in re))&&v(re,he,Le)}h.exports=Q}),Wn=s((l,h)=>{var v=ar(),x=Qe();function C(F,Q,re,he){var Le=!re;re||(re={});for(var Je=-1,ze=Q.length;++Je<ze;){var vt=Q[Je],At=he?he(re[vt],F[vt],vt,re,F):void 0;At===void 0&&(At=F[vt]),Le?x(re,vt,At):v(re,vt,At)}return re}h.exports=C}),Xt=s((l,h)=>{function v(x,C){for(var F=-1,Q=Array(x);++F<x;)Q[F]=C(F);return Q}h.exports=v}),vn=s((l,h)=>{var v=9007199254740991,x=/^(?:0|[1-9]\d*)$/;function C(F,Q){var re=typeof F;return Q=Q??v,!!Q&&(re=="number"||re!="symbol"&&x.test(F))&&F>-1&&F%1==0&&F<Q}h.exports=C}),It=s((l,h)=>{var v=Xt(),x=Nn(),C=wn(),F=Cn(),Q=vn(),re=Ft(),he=Object.prototype,Le=he.hasOwnProperty;function Je(ze,vt){var At=C(ze),Jt=!At&&x(ze),yn=!At&&!Jt&&F(ze),bn=!At&&!Jt&&!yn&&re(ze),ur=At||Jt||yn||bn,Ye=ur?v(ze.length,String):[],tt=Ye.length;for(var ft in ze)(vt||Le.call(ze,ft))&&!(ur&&(ft=="length"||yn&&(ft=="offset"||ft=="parent")||bn&&(ft=="buffer"||ft=="byteLength"||ft=="byteOffset")||Q(ft,tt)))&&Ye.push(ft);return Ye}h.exports=Je}),Yt=s((l,h)=>{function v(x){var C=[];if(x!=null)for(var F in Object(x))C.push(F);return C}h.exports=v}),Ln=s((l,h)=>{var v=$(),x=it(),C=Yt(),F=Object.prototype,Q=F.hasOwnProperty;function re(he){if(!v(he))return C(he);var Le=x(he),Je=[];for(var ze in he)ze=="constructor"&&(Le||!Q.call(he,ze))||Je.push(ze);return Je}h.exports=re}),mr=s((l,h)=>{var v=It(),x=Ln(),C=or();function F(Q){return C(Q)?v(Q,!0):x(Q)}h.exports=F}),ct=s((l,h)=>{var v=Wn(),x=mr();function C(F){return v(F,x(F))}h.exports=C}),On=s((l,h)=>{var v=Ke(),x=st(),C=Ut(),F=Gt(),Q=nt(),re=Nn(),he=wn(),Le=xn(),Je=Cn(),ze=O(),vt=$(),At=cr(),Jt=Ft(),yn=kn(),bn=ct();function ur(Ye,tt,ft,Nt,bt,Tt,ge){var Pe=yn(Ye,ft),Oe=yn(tt,ft),Ne=ge.get(Oe);if(Ne){v(Ye,ft,Ne);return}var Fe=Tt?Tt(Pe,Oe,ft+"",Ye,tt,ge):void 0,je=Fe===void 0;if(je){var at=he(Oe),lt=!at&&Je(Oe),pt=!at&&!lt&&Jt(Oe);Fe=Oe,at||lt||pt?he(Pe)?Fe=Pe:Le(Pe)?Fe=F(Pe):lt?(je=!1,Fe=x(Oe,!0)):pt?(je=!1,Fe=C(Oe,!0)):Fe=[]:At(Oe)||re(Oe)?(Fe=Pe,re(Pe)?Fe=bn(Pe):(!vt(Pe)||ze(Pe))&&(Fe=Q(Oe))):je=!1}je&&(ge.set(Oe,Fe),bt(Fe,Oe,Nt,Tt,ge),ge.delete(Oe)),v(Ye,ft,Fe)}h.exports=ur}),xr=s((l,h)=>{var v=pe(),x=Ke(),C=Xe(),F=On(),Q=$(),re=mr(),he=kn();function Le(Je,ze,vt,At,Jt){Je!==ze&&C(ze,function(yn,bn){if(Jt||(Jt=new v),Q(yn))F(Je,ze,bn,vt,Le,At,Jt);else{var ur=At?At(he(Je,bn),yn,bn+"",Je,ze,Jt):void 0;ur===void 0&&(ur=yn),x(Je,bn,ur)}},re)}h.exports=Le}),Ti=s((l,h)=>{function v(x){return x}h.exports=v}),Ir=s((l,h)=>{function v(x,C,F){switch(F.length){case 0:return x.call(C);case 1:return x.call(C,F[0]);case 2:return x.call(C,F[0],F[1]);case 3:return x.call(C,F[0],F[1],F[2])}return x.apply(C,F)}h.exports=v}),Er=s((l,h)=>{var v=Ir(),x=Math.max;function C(F,Q,re){return Q=x(Q===void 0?F.length-1:Q,0),function(){for(var he=arguments,Le=-1,Je=x(he.length-Q,0),ze=Array(Je);++Le<Je;)ze[Le]=he[Q+Le];Le=-1;for(var vt=Array(Q+1);++Le<Q;)vt[Le]=he[Le];return vt[Q]=re(ze),v(F,this,vt)}}h.exports=C}),lr=s((l,h)=>{function v(x){return function(){return x}}h.exports=v}),Vr=s((l,h)=>{var v=lr(),x=$e(),C=Ti(),F=x?function(Q,re){return x(Q,"toString",{configurable:!0,enumerable:!1,value:v(re),writable:!0})}:C;h.exports=F}),rr=s((l,h)=>{var v=800,x=16,C=Date.now;function F(Q){var re=0,he=0;return function(){var Le=C(),Je=x-(Le-he);if(he=Le,Je>0){if(++re>=v)return arguments[0]}else re=0;return Q.apply(void 0,arguments)}}h.exports=F}),Or=s((l,h)=>{var v=Vr(),x=rr(),C=x(v);h.exports=C}),er=s((l,h)=>{var v=Ti(),x=Er(),C=Or();function F(Q,re){return C(x(Q,re,v),Q+"")}h.exports=F}),en=s((l,h)=>{var v=m(),x=or(),C=vn(),F=$();function Q(re,he,Le){if(!F(Le))return!1;var Je=typeof he;return(Je=="number"?x(Le)&&C(he,Le.length):Je=="string"&&he in Le)?v(Le[he],re):!1}h.exports=Q}),qi=s((l,h)=>{var v=er(),x=en();function C(F){return v(function(Q,re){var he=-1,Le=re.length,Je=Le>1?re[Le-1]:void 0,ze=Le>2?re[2]:void 0;for(Je=F.length>3&&typeof Je=="function"?(Le--,Je):void 0,ze&&x(re[0],re[1],ze)&&(Je=Le<3?void 0:Je,Le=1),Q=Object(Q);++he<Le;){var vt=re[he];vt&&F(Q,vt,he,Je)}return Q})}h.exports=C}),Di=s((l,h)=>{var v=xr(),x=qi(),C=x(function(F,Q,re){v(F,Q,re)});h.exports=C}),Si=s((l,h)=>{var v=K(),x=Vt(),C="[object Symbol]";function F(Q){return typeof Q=="symbol"||x(Q)&&v(Q)==C}h.exports=F}),ai=s((l,h)=>{var v=wn(),x=Si(),C=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,F=/^\w*$/;function Q(re,he){if(v(re))return!1;var Le=typeof re;return Le=="number"||Le=="symbol"||Le=="boolean"||re==null||x(re)?!0:F.test(re)||!C.test(re)||he!=null&&re in Object(he)}h.exports=Q}),Fr=s((l,h)=>{var v=de(),x="Expected a function";function C(F,Q){if(typeof F!="function"||Q!=null&&typeof Q!="function")throw new TypeError(x);var re=function(){var he=arguments,Le=Q?Q.apply(this,he):he[0],Je=re.cache;if(Je.has(Le))return Je.get(Le);var ze=F.apply(this,he);return re.cache=Je.set(Le,ze)||Je,ze};return re.cache=new(C.Cache||v),re}C.Cache=v,h.exports=C}),Ml=s((l,h)=>{var v=Fr(),x=500;function C(F){var Q=v(F,function(he){return re.size===x&&re.clear(),he}),re=Q.cache;return Q}h.exports=C}),jr=s((l,h)=>{var v=Ml(),x=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,C=/\\(\\)?/g,F=v(function(Q){var re=[];return Q.charCodeAt(0)===46&&re.push(""),Q.replace(x,function(he,Le,Je,ze){re.push(Je?ze.replace(C,"$1"):Le||he)}),re});h.exports=F}),Xo=s((l,h)=>{function v(x,C){for(var F=-1,Q=x==null?0:x.length,re=Array(Q);++F<Q;)re[F]=C(x[F],F,x);return re}h.exports=v}),_u=s((l,h)=>{var v=xe(),x=Xo(),C=wn(),F=Si(),Q=v?v.prototype:void 0,re=Q?Q.toString:void 0;function he(Le){if(typeof Le=="string")return Le;if(C(Le))return x(Le,he)+"";if(F(Le))return re?re.call(Le):"";var Je=Le+"";return Je=="0"&&1/Le==-1/0?"-0":Je}h.exports=he}),wo=s((l,h)=>{var v=_u();function x(C){return C==null?"":v(C)}h.exports=x}),ri=s((l,h)=>{var v=wn(),x=ai(),C=jr(),F=wo();function Q(re,he){return v(re)?re:x(re,he)?[re]:C(F(re))}h.exports=Q}),Fn=s((l,h)=>{var v=Si();function x(C){if(typeof C=="string"||v(C))return C;var F=C+"";return F=="0"&&1/C==-1/0?"-0":F}h.exports=x}),xs=s((l,h)=>{var v=ri(),x=Fn();function C(F,Q){Q=v(Q,F);for(var re=0,he=Q.length;F!=null&&re<he;)F=F[x(Q[re++])];return re&&re==he?F:void 0}h.exports=C}),li=s((l,h)=>{var v=xs();function x(C,F,Q){var re=C==null?void 0:v(C,F);return re===void 0?Q:re}h.exports=x}),fr=s((l,h)=>{(function(v,x){typeof l=="object"&&typeof h<"u"?h.exports=x():(v=v||self).RBush=x()})(l,function(){function v(Ye,tt,ft,Nt,bt){(function Tt(ge,Pe,Oe,Ne,Fe){for(;Ne>Oe;){if(Ne-Oe>600){var je=Ne-Oe+1,at=Pe-Oe+1,lt=Math.log(je),pt=.5*Math.exp(2*lt/3),Lt=.5*Math.sqrt(lt*pt*(je-pt)/je)*(at-je/2<0?-1:1),St=Math.max(Oe,Math.floor(Pe-at*pt/je+Lt)),sn=Math.min(Ne,Math.floor(Pe+(je-at)*pt/je+Lt));Tt(ge,Pe,St,sn,Fe)}var zn=ge[Pe],Hn=Oe,Xn=Ne;for(x(ge,Oe,Pe),Fe(ge[Ne],zn)>0&&x(ge,Oe,Ne);Hn<Xn;){for(x(ge,Hn,Xn),Hn++,Xn--;Fe(ge[Hn],zn)<0;)Hn++;for(;Fe(ge[Xn],zn)>0;)Xn--}Fe(ge[Oe],zn)===0?x(ge,Oe,Xn):x(ge,++Xn,Ne),Xn<=Pe&&(Oe=Xn+1),Pe<=Xn&&(Ne=Xn-1)}})(Ye,tt,ft||0,Nt||Ye.length-1,bt||C)}function x(Ye,tt,ft){var Nt=Ye[tt];Ye[tt]=Ye[ft],Ye[ft]=Nt}function C(Ye,tt){return Ye<tt?-1:Ye>tt?1:0}var F=function(Ye){Ye===void 0&&(Ye=9),this._maxEntries=Math.max(4,Ye),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function Q(Ye,tt,ft){if(!ft)return tt.indexOf(Ye);for(var Nt=0;Nt<tt.length;Nt++)if(ft(Ye,tt[Nt]))return Nt;return-1}function re(Ye,tt){he(Ye,0,Ye.children.length,tt,Ye)}function he(Ye,tt,ft,Nt,bt){bt||(bt=bn(null)),bt.minX=1/0,bt.minY=1/0,bt.maxX=-1/0,bt.maxY=-1/0;for(var Tt=tt;Tt<ft;Tt++){var ge=Ye.children[Tt];Le(bt,Ye.leaf?Nt(ge):ge)}return bt}function Le(Ye,tt){return Ye.minX=Math.min(Ye.minX,tt.minX),Ye.minY=Math.min(Ye.minY,tt.minY),Ye.maxX=Math.max(Ye.maxX,tt.maxX),Ye.maxY=Math.max(Ye.maxY,tt.maxY),Ye}function Je(Ye,tt){return Ye.minX-tt.minX}function ze(Ye,tt){return Ye.minY-tt.minY}function vt(Ye){return(Ye.maxX-Ye.minX)*(Ye.maxY-Ye.minY)}function At(Ye){return Ye.maxX-Ye.minX+(Ye.maxY-Ye.minY)}function Jt(Ye,tt){return Ye.minX<=tt.minX&&Ye.minY<=tt.minY&&tt.maxX<=Ye.maxX&&tt.maxY<=Ye.maxY}function yn(Ye,tt){return tt.minX<=Ye.maxX&&tt.minY<=Ye.maxY&&tt.maxX>=Ye.minX&&tt.maxY>=Ye.minY}function bn(Ye){return{children:Ye,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function ur(Ye,tt,ft,Nt,bt){for(var Tt=[tt,ft];Tt.length;)if(!((ft=Tt.pop())-(tt=Tt.pop())<=Nt)){var ge=tt+Math.ceil((ft-tt)/Nt/2)*Nt;v(Ye,ge,tt,ft,bt),Tt.push(tt,ge,ge,ft)}}return F.prototype.all=function(){return this._all(this.data,[])},F.prototype.search=function(Ye){var tt=this.data,ft=[];if(!yn(Ye,tt))return ft;for(var Nt=this.toBBox,bt=[];tt;){for(var Tt=0;Tt<tt.children.length;Tt++){var ge=tt.children[Tt],Pe=tt.leaf?Nt(ge):ge;yn(Ye,Pe)&&(tt.leaf?ft.push(ge):Jt(Ye,Pe)?this._all(ge,ft):bt.push(ge))}tt=bt.pop()}return ft},F.prototype.collides=function(Ye){var tt=this.data;if(!yn(Ye,tt))return!1;for(var ft=[];tt;){for(var Nt=0;Nt<tt.children.length;Nt++){var bt=tt.children[Nt],Tt=tt.leaf?this.toBBox(bt):bt;if(yn(Ye,Tt)){if(tt.leaf||Jt(Ye,Tt))return!0;ft.push(bt)}}tt=ft.pop()}return!1},F.prototype.load=function(Ye){if(!Ye||!Ye.length)return this;if(Ye.length<this._minEntries){for(var tt=0;tt<Ye.length;tt++)this.insert(Ye[tt]);return this}var ft=this._build(Ye.slice(),0,Ye.length-1,0);if(this.data.children.length)if(this.data.height===ft.height)this._splitRoot(this.data,ft);else{if(this.data.height<ft.height){var Nt=this.data;this.data=ft,ft=Nt}this._insert(ft,this.data.height-ft.height-1,!0)}else this.data=ft;return this},F.prototype.insert=function(Ye){return Ye&&this._insert(Ye,this.data.height-1),this},F.prototype.clear=function(){return this.data=bn([]),this},F.prototype.remove=function(Ye,tt){if(!Ye)return this;for(var ft,Nt,bt,Tt=this.data,ge=this.toBBox(Ye),Pe=[],Oe=[];Tt||Pe.length;){if(Tt||(Tt=Pe.pop(),Nt=Pe[Pe.length-1],ft=Oe.pop(),bt=!0),Tt.leaf){var Ne=Q(Ye,Tt.children,tt);if(Ne!==-1)return Tt.children.splice(Ne,1),Pe.push(Tt),this._condense(Pe),this}bt||Tt.leaf||!Jt(Tt,ge)?Nt?(ft++,Tt=Nt.children[ft],bt=!1):Tt=null:(Pe.push(Tt),Oe.push(ft),ft=0,Nt=Tt,Tt=Tt.children[0])}return this},F.prototype.toBBox=function(Ye){return Ye},F.prototype.compareMinX=function(Ye,tt){return Ye.minX-tt.minX},F.prototype.compareMinY=function(Ye,tt){return Ye.minY-tt.minY},F.prototype.toJSON=function(){return this.data},F.prototype.fromJSON=function(Ye){return this.data=Ye,this},F.prototype._all=function(Ye,tt){for(var ft=[];Ye;)Ye.leaf?tt.push.apply(tt,Ye.children):ft.push.apply(ft,Ye.children),Ye=ft.pop();return tt},F.prototype._build=function(Ye,tt,ft,Nt){var bt,Tt=ft-tt+1,ge=this._maxEntries;if(Tt<=ge)return re(bt=bn(Ye.slice(tt,ft+1)),this.toBBox),bt;Nt||(Nt=Math.ceil(Math.log(Tt)/Math.log(ge)),ge=Math.ceil(Tt/Math.pow(ge,Nt-1))),(bt=bn([])).leaf=!1,bt.height=Nt;var Pe=Math.ceil(Tt/ge),Oe=Pe*Math.ceil(Math.sqrt(ge));ur(Ye,tt,ft,Oe,this.compareMinX);for(var Ne=tt;Ne<=ft;Ne+=Oe){var Fe=Math.min(Ne+Oe-1,ft);ur(Ye,Ne,Fe,Pe,this.compareMinY);for(var je=Ne;je<=Fe;je+=Pe){var at=Math.min(je+Pe-1,Fe);bt.children.push(this._build(Ye,je,at,Nt-1))}}return re(bt,this.toBBox),bt},F.prototype._chooseSubtree=function(Ye,tt,ft,Nt){for(;Nt.push(tt),!tt.leaf&&Nt.length-1!==ft;){for(var bt=1/0,Tt=1/0,ge=void 0,Pe=0;Pe<tt.children.length;Pe++){var Oe=tt.children[Pe],Ne=vt(Oe),Fe=(je=Ye,at=Oe,(Math.max(at.maxX,je.maxX)-Math.min(at.minX,je.minX))*(Math.max(at.maxY,je.maxY)-Math.min(at.minY,je.minY))-Ne);Fe<Tt?(Tt=Fe,bt=Ne<bt?Ne:bt,ge=Oe):Fe===Tt&&Ne<bt&&(bt=Ne,ge=Oe)}tt=ge||tt.children[0]}var je,at;return tt},F.prototype._insert=function(Ye,tt,ft){var Nt=ft?Ye:this.toBBox(Ye),bt=[],Tt=this._chooseSubtree(Nt,this.data,tt,bt);for(Tt.children.push(Ye),Le(Tt,Nt);tt>=0&&bt[tt].children.length>this._maxEntries;)this._split(bt,tt),tt--;this._adjustParentBBoxes(Nt,bt,tt)},F.prototype._split=function(Ye,tt){var ft=Ye[tt],Nt=ft.children.length,bt=this._minEntries;this._chooseSplitAxis(ft,bt,Nt);var Tt=this._chooseSplitIndex(ft,bt,Nt),ge=bn(ft.children.splice(Tt,ft.children.length-Tt));ge.height=ft.height,ge.leaf=ft.leaf,re(ft,this.toBBox),re(ge,this.toBBox),tt?Ye[tt-1].children.push(ge):this._splitRoot(ft,ge)},F.prototype._splitRoot=function(Ye,tt){this.data=bn([Ye,tt]),this.data.height=Ye.height+1,this.data.leaf=!1,re(this.data,this.toBBox)},F.prototype._chooseSplitIndex=function(Ye,tt,ft){for(var Nt,bt,Tt,ge,Pe,Oe,Ne,Fe=1/0,je=1/0,at=tt;at<=ft-tt;at++){var lt=he(Ye,0,at,this.toBBox),pt=he(Ye,at,ft,this.toBBox),Lt=(bt=lt,Tt=pt,ge=void 0,Pe=void 0,Oe=void 0,Ne=void 0,ge=Math.max(bt.minX,Tt.minX),Pe=Math.max(bt.minY,Tt.minY),Oe=Math.min(bt.maxX,Tt.maxX),Ne=Math.min(bt.maxY,Tt.maxY),Math.max(0,Oe-ge)*Math.max(0,Ne-Pe)),St=vt(lt)+vt(pt);Lt<Fe?(Fe=Lt,Nt=at,je=St<je?St:je):Lt===Fe&&St<je&&(je=St,Nt=at)}return Nt||ft-tt},F.prototype._chooseSplitAxis=function(Ye,tt,ft){var Nt=Ye.leaf?this.compareMinX:Je,bt=Ye.leaf?this.compareMinY:ze;this._allDistMargin(Ye,tt,ft,Nt)<this._allDistMargin(Ye,tt,ft,bt)&&Ye.children.sort(Nt)},F.prototype._allDistMargin=function(Ye,tt,ft,Nt){Ye.children.sort(Nt);for(var bt=this.toBBox,Tt=he(Ye,0,tt,bt),ge=he(Ye,ft-tt,ft,bt),Pe=At(Tt)+At(ge),Oe=tt;Oe<ft-tt;Oe++){var Ne=Ye.children[Oe];Le(Tt,Ye.leaf?bt(Ne):Ne),Pe+=At(Tt)}for(var Fe=ft-tt-1;Fe>=tt;Fe--){var je=Ye.children[Fe];Le(ge,Ye.leaf?bt(je):je),Pe+=At(ge)}return Pe},F.prototype._adjustParentBBoxes=function(Ye,tt,ft){for(var Nt=ft;Nt>=0;Nt--)Le(tt[Nt],Ye)},F.prototype._condense=function(Ye){for(var tt=Ye.length-1,ft=void 0;tt>=0;tt--)Ye[tt].children.length===0?tt>0?(ft=Ye[tt-1].children).splice(ft.indexOf(Ye[tt]),1):this.clear():re(Ye[tt],this.toBBox)},F})}),Gn=s(l=>{Object.defineProperty(l,"__esModule",{value:!0}),l.earthRadius=63710088e-1,l.factors={centimeters:l.earthRadius*100,centimetres:l.earthRadius*100,degrees:l.earthRadius/111325,feet:l.earthRadius*3.28084,inches:l.earthRadius*39.37,kilometers:l.earthRadius/1e3,kilometres:l.earthRadius/1e3,meters:l.earthRadius,metres:l.earthRadius,miles:l.earthRadius/1609.344,millimeters:l.earthRadius*1e3,millimetres:l.earthRadius*1e3,nauticalmiles:l.earthRadius/1852,radians:1,yards:l.earthRadius*1.0936},l.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/l.earthRadius,yards:1.0936133},l.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function h(Ne,Fe,je){je===void 0&&(je={});var at={type:"Feature"};return(je.id===0||je.id)&&(at.id=je.id),je.bbox&&(at.bbox=je.bbox),at.properties=Fe||{},at.geometry=Ne,at}l.feature=h;function v(Ne,Fe,je){switch(Ne){case"Point":return x(Fe).geometry;case"LineString":return re(Fe).geometry;case"Polygon":return F(Fe).geometry;case"MultiPoint":return ze(Fe).geometry;case"MultiLineString":return Je(Fe).geometry;case"MultiPolygon":return vt(Fe).geometry;default:throw new Error(Ne+" is invalid")}}l.geometry=v;function x(Ne,Fe,je){if(je===void 0&&(je={}),!Ne)throw new Error("coordinates is required");if(!Array.isArray(Ne))throw new Error("coordinates must be an Array");if(Ne.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Tt(Ne[0])||!Tt(Ne[1]))throw new Error("coordinates must contain numbers");var at={type:"Point",coordinates:Ne};return h(at,Fe,je)}l.point=x;function C(Ne,Fe,je){return je===void 0&&(je={}),Le(Ne.map(function(at){return x(at,Fe)}),je)}l.points=C;function F(Ne,Fe,je){je===void 0&&(je={});for(var at=0,lt=Ne;at<lt.length;at++){var pt=lt[at];if(pt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Lt=0;Lt<pt[pt.length-1].length;Lt++)if(pt[pt.length-1][Lt]!==pt[0][Lt])throw new Error("First and last Position are not equivalent.")}var St={type:"Polygon",coordinates:Ne};return h(St,Fe,je)}l.polygon=F;function Q(Ne,Fe,je){return je===void 0&&(je={}),Le(Ne.map(function(at){return F(at,Fe)}),je)}l.polygons=Q;function re(Ne,Fe,je){if(je===void 0&&(je={}),Ne.length<2)throw new Error("coordinates must be an array of two or more positions");var at={type:"LineString",coordinates:Ne};return h(at,Fe,je)}l.lineString=re;function he(Ne,Fe,je){return je===void 0&&(je={}),Le(Ne.map(function(at){return re(at,Fe)}),je)}l.lineStrings=he;function Le(Ne,Fe){Fe===void 0&&(Fe={});var je={type:"FeatureCollection"};return Fe.id&&(je.id=Fe.id),Fe.bbox&&(je.bbox=Fe.bbox),je.features=Ne,je}l.featureCollection=Le;function Je(Ne,Fe,je){je===void 0&&(je={});var at={type:"MultiLineString",coordinates:Ne};return h(at,Fe,je)}l.multiLineString=Je;function ze(Ne,Fe,je){je===void 0&&(je={});var at={type:"MultiPoint",coordinates:Ne};return h(at,Fe,je)}l.multiPoint=ze;function vt(Ne,Fe,je){je===void 0&&(je={});var at={type:"MultiPolygon",coordinates:Ne};return h(at,Fe,je)}l.multiPolygon=vt;function At(Ne,Fe,je){je===void 0&&(je={});var at={type:"GeometryCollection",geometries:Ne};return h(at,Fe,je)}l.geometryCollection=At;function Jt(Ne,Fe){if(Fe===void 0&&(Fe=0),Fe&&!(Fe>=0))throw new Error("precision must be a positive number");var je=Math.pow(10,Fe||0);return Math.round(Ne*je)/je}l.round=Jt;function yn(Ne,Fe){Fe===void 0&&(Fe="kilometers");var je=l.factors[Fe];if(!je)throw new Error(Fe+" units is invalid");return Ne*je}l.radiansToLength=yn;function bn(Ne,Fe){Fe===void 0&&(Fe="kilometers");var je=l.factors[Fe];if(!je)throw new Error(Fe+" units is invalid");return Ne/je}l.lengthToRadians=bn;function ur(Ne,Fe){return tt(bn(Ne,Fe))}l.lengthToDegrees=ur;function Ye(Ne){var Fe=Ne%360;return Fe<0&&(Fe+=360),Fe}l.bearingToAzimuth=Ye;function tt(Ne){var Fe=Ne%(2*Math.PI);return Fe*180/Math.PI}l.radiansToDegrees=tt;function ft(Ne){var Fe=Ne%360;return Fe*Math.PI/180}l.degreesToRadians=ft;function Nt(Ne,Fe,je){if(Fe===void 0&&(Fe="kilometers"),je===void 0&&(je="kilometers"),!(Ne>=0))throw new Error("length must be a positive number");return yn(bn(Ne,Fe),je)}l.convertLength=Nt;function bt(Ne,Fe,je){if(Fe===void 0&&(Fe="meters"),je===void 0&&(je="kilometers"),!(Ne>=0))throw new Error("area must be a positive number");var at=l.areaFactors[Fe];if(!at)throw new Error("invalid original units");var lt=l.areaFactors[je];if(!lt)throw new Error("invalid final units");return Ne/at*lt}l.convertArea=bt;function Tt(Ne){return!isNaN(Ne)&&Ne!==null&&!Array.isArray(Ne)}l.isNumber=Tt;function ge(Ne){return!!Ne&&Ne.constructor===Object}l.isObject=ge;function Pe(Ne){if(!Ne)throw new Error("bbox is required");if(!Array.isArray(Ne))throw new Error("bbox must be an Array");if(Ne.length!==4&&Ne.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");Ne.forEach(function(Fe){if(!Tt(Fe))throw new Error("bbox must only contain numbers")})}l.validateBBox=Pe;function Oe(Ne){if(!Ne)throw new Error("id is required");if(["string","number"].indexOf(typeof Ne)===-1)throw new Error("id must be a number or a string")}l.validateId=Oe}),gs=s(l=>{Object.defineProperty(l,"__esModule",{value:!0});var h=Gn();function v(tt,ft,Nt){if(tt!==null)for(var bt,Tt,ge,Pe,Oe,Ne,Fe,je=0,at=0,lt,pt=tt.type,Lt=pt==="FeatureCollection",St=pt==="Feature",sn=Lt?tt.features.length:1,zn=0;zn<sn;zn++){Fe=Lt?tt.features[zn].geometry:St?tt.geometry:tt,lt=Fe?Fe.type==="GeometryCollection":!1,Oe=lt?Fe.geometries.length:1;for(var Hn=0;Hn<Oe;Hn++){var Xn=0,gi=0;if(Pe=lt?Fe.geometries[Hn]:Fe,Pe!==null){Ne=Pe.coordinates;var Pi=Pe.type;switch(je=Nt&&(Pi==="Polygon"||Pi==="MultiPolygon")?1:0,Pi){case null:break;case"Point":if(ft(Ne,at,zn,Xn,gi)===!1)return!1;at++,Xn++;break;case"LineString":case"MultiPoint":for(bt=0;bt<Ne.length;bt++){if(ft(Ne[bt],at,zn,Xn,gi)===!1)return!1;at++,Pi==="MultiPoint"&&Xn++}Pi==="LineString"&&Xn++;break;case"Polygon":case"MultiLineString":for(bt=0;bt<Ne.length;bt++){for(Tt=0;Tt<Ne[bt].length-je;Tt++){if(ft(Ne[bt][Tt],at,zn,Xn,gi)===!1)return!1;at++}Pi==="MultiLineString"&&Xn++,Pi==="Polygon"&&gi++}Pi==="Polygon"&&Xn++;break;case"MultiPolygon":for(bt=0;bt<Ne.length;bt++){for(gi=0,Tt=0;Tt<Ne[bt].length;Tt++){for(ge=0;ge<Ne[bt][Tt].length-je;ge++){if(ft(Ne[bt][Tt][ge],at,zn,Xn,gi)===!1)return!1;at++}gi++}Xn++}break;case"GeometryCollection":for(bt=0;bt<Pe.geometries.length;bt++)if(v(Pe.geometries[bt],ft,Nt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function x(tt,ft,Nt,bt){var Tt=Nt;return v(tt,function(ge,Pe,Oe,Ne,Fe){Pe===0&&Nt===void 0?Tt=ge:Tt=ft(Tt,ge,Pe,Oe,Ne,Fe)},bt),Tt}function C(tt,ft){var Nt;switch(tt.type){case"FeatureCollection":for(Nt=0;Nt<tt.features.length&&ft(tt.features[Nt].properties,Nt)!==!1;Nt++);break;case"Feature":ft(tt.properties,0);break}}function F(tt,ft,Nt){var bt=Nt;return C(tt,function(Tt,ge){ge===0&&Nt===void 0?bt=Tt:bt=ft(bt,Tt,ge)}),bt}function Q(tt,ft){if(tt.type==="Feature")ft(tt,0);else if(tt.type==="FeatureCollection")for(var Nt=0;Nt<tt.features.length&&ft(tt.features[Nt],Nt)!==!1;Nt++);}function re(tt,ft,Nt){var bt=Nt;return Q(tt,function(Tt,ge){ge===0&&Nt===void 0?bt=Tt:bt=ft(bt,Tt,ge)}),bt}function he(tt){var ft=[];return v(tt,function(Nt){ft.push(Nt)}),ft}function Le(tt,ft){var Nt,bt,Tt,ge,Pe,Oe,Ne,Fe,je,at,lt=0,pt=tt.type==="FeatureCollection",Lt=tt.type==="Feature",St=pt?tt.features.length:1;for(Nt=0;Nt<St;Nt++){for(Oe=pt?tt.features[Nt].geometry:Lt?tt.geometry:tt,Fe=pt?tt.features[Nt].properties:Lt?tt.properties:{},je=pt?tt.features[Nt].bbox:Lt?tt.bbox:void 0,at=pt?tt.features[Nt].id:Lt?tt.id:void 0,Ne=Oe?Oe.type==="GeometryCollection":!1,Pe=Ne?Oe.geometries.length:1,Tt=0;Tt<Pe;Tt++){if(ge=Ne?Oe.geometries[Tt]:Oe,ge===null){if(ft(null,lt,Fe,je,at)===!1)return!1;continue}switch(ge.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(ft(ge,lt,Fe,je,at)===!1)return!1;break}case"GeometryCollection":{for(bt=0;bt<ge.geometries.length;bt++)if(ft(ge.geometries[bt],lt,Fe,je,at)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}lt++}}function Je(tt,ft,Nt){var bt=Nt;return Le(tt,function(Tt,ge,Pe,Oe,Ne){ge===0&&Nt===void 0?bt=Tt:bt=ft(bt,Tt,ge,Pe,Oe,Ne)}),bt}function ze(tt,ft){Le(tt,function(Nt,bt,Tt,ge,Pe){var Oe=Nt===null?null:Nt.type;switch(Oe){case null:case"Point":case"LineString":case"Polygon":return ft(h.feature(Nt,Tt,{bbox:ge,id:Pe}),bt,0)===!1?!1:void 0}var Ne;switch(Oe){case"MultiPoint":Ne="Point";break;case"MultiLineString":Ne="LineString";break;case"MultiPolygon":Ne="Polygon";break}for(var Fe=0;Fe<Nt.coordinates.length;Fe++){var je=Nt.coordinates[Fe],at={type:Ne,coordinates:je};if(ft(h.feature(at,Tt),bt,Fe)===!1)return!1}})}function vt(tt,ft,Nt){var bt=Nt;return ze(tt,function(Tt,ge,Pe){ge===0&&Pe===0&&Nt===void 0?bt=Tt:bt=ft(bt,Tt,ge,Pe)}),bt}function At(tt,ft){ze(tt,function(Nt,bt,Tt){var ge=0;if(Nt.geometry){var Pe=Nt.geometry.type;if(!(Pe==="Point"||Pe==="MultiPoint")){var Oe,Ne=0,Fe=0,je=0;if(v(Nt,function(at,lt,pt,Lt,St){if(Oe===void 0||bt>Ne||Lt>Fe||St>je){Oe=at,Ne=bt,Fe=Lt,je=St,ge=0;return}var sn=h.lineString([Oe,at],Nt.properties);if(ft(sn,bt,Tt,St,ge)===!1)return!1;ge++,Oe=at})===!1)return!1}}})}function Jt(tt,ft,Nt){var bt=Nt,Tt=!1;return At(tt,function(ge,Pe,Oe,Ne,Fe){Tt===!1&&Nt===void 0?bt=ge:bt=ft(bt,ge,Pe,Oe,Ne,Fe),Tt=!0}),bt}function yn(tt,ft){if(!tt)throw new Error("geojson is required");ze(tt,function(Nt,bt,Tt){if(Nt.geometry!==null){var ge=Nt.geometry.type,Pe=Nt.geometry.coordinates;switch(ge){case"LineString":if(ft(Nt,bt,Tt,0,0)===!1)return!1;break;case"Polygon":for(var Oe=0;Oe<Pe.length;Oe++)if(ft(h.lineString(Pe[Oe],Nt.properties),bt,Tt,Oe)===!1)return!1;break}}})}function bn(tt,ft,Nt){var bt=Nt;return yn(tt,function(Tt,ge,Pe,Oe){ge===0&&Nt===void 0?bt=Tt:bt=ft(bt,Tt,ge,Pe,Oe)}),bt}function ur(tt,ft){if(ft=ft||{},!h.isObject(ft))throw new Error("options is invalid");var Nt=ft.featureIndex||0,bt=ft.multiFeatureIndex||0,Tt=ft.geometryIndex||0,ge=ft.segmentIndex||0,Pe=ft.properties,Oe;switch(tt.type){case"FeatureCollection":Nt<0&&(Nt=tt.features.length+Nt),Pe=Pe||tt.features[Nt].properties,Oe=tt.features[Nt].geometry;break;case"Feature":Pe=Pe||tt.properties,Oe=tt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Oe=tt;break;default:throw new Error("geojson is invalid")}if(Oe===null)return null;var Ne=Oe.coordinates;switch(Oe.type){case"Point":case"MultiPoint":return null;case"LineString":return ge<0&&(ge=Ne.length+ge-1),h.lineString([Ne[ge],Ne[ge+1]],Pe,ft);case"Polygon":return Tt<0&&(Tt=Ne.length+Tt),ge<0&&(ge=Ne[Tt].length+ge-1),h.lineString([Ne[Tt][ge],Ne[Tt][ge+1]],Pe,ft);case"MultiLineString":return bt<0&&(bt=Ne.length+bt),ge<0&&(ge=Ne[bt].length+ge-1),h.lineString([Ne[bt][ge],Ne[bt][ge+1]],Pe,ft);case"MultiPolygon":return bt<0&&(bt=Ne.length+bt),Tt<0&&(Tt=Ne[bt].length+Tt),ge<0&&(ge=Ne[bt][Tt].length-ge-1),h.lineString([Ne[bt][Tt][ge],Ne[bt][Tt][ge+1]],Pe,ft)}throw new Error("geojson is invalid")}function Ye(tt,ft){if(ft=ft||{},!h.isObject(ft))throw new Error("options is invalid");var Nt=ft.featureIndex||0,bt=ft.multiFeatureIndex||0,Tt=ft.geometryIndex||0,ge=ft.coordIndex||0,Pe=ft.properties,Oe;switch(tt.type){case"FeatureCollection":Nt<0&&(Nt=tt.features.length+Nt),Pe=Pe||tt.features[Nt].properties,Oe=tt.features[Nt].geometry;break;case"Feature":Pe=Pe||tt.properties,Oe=tt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Oe=tt;break;default:throw new Error("geojson is invalid")}if(Oe===null)return null;var Ne=Oe.coordinates;switch(Oe.type){case"Point":return h.point(Ne,Pe,ft);case"MultiPoint":return bt<0&&(bt=Ne.length+bt),h.point(Ne[bt],Pe,ft);case"LineString":return ge<0&&(ge=Ne.length+ge),h.point(Ne[ge],Pe,ft);case"Polygon":return Tt<0&&(Tt=Ne.length+Tt),ge<0&&(ge=Ne[Tt].length+ge),h.point(Ne[Tt][ge],Pe,ft);case"MultiLineString":return bt<0&&(bt=Ne.length+bt),ge<0&&(ge=Ne[bt].length+ge),h.point(Ne[bt][ge],Pe,ft);case"MultiPolygon":return bt<0&&(bt=Ne.length+bt),Tt<0&&(Tt=Ne[bt].length+Tt),ge<0&&(ge=Ne[bt][Tt].length-ge),h.point(Ne[bt][Tt][ge],Pe,ft)}throw new Error("geojson is invalid")}l.coordAll=he,l.coordEach=v,l.coordReduce=x,l.featureEach=Q,l.featureReduce=re,l.findPoint=Ye,l.findSegment=ur,l.flattenEach=ze,l.flattenReduce=vt,l.geomEach=Le,l.geomReduce=Je,l.lineEach=yn,l.lineReduce=bn,l.propEach=C,l.propReduce=F,l.segmentEach=At,l.segmentReduce=Jt}),ms=s(l=>{Object.defineProperty(l,"__esModule",{value:!0});var h=gs();function v(x){var C=[1/0,1/0,-1/0,-1/0];return h.coordEach(x,function(F){C[0]>F[0]&&(C[0]=F[0]),C[1]>F[1]&&(C[1]=F[1]),C[2]<F[0]&&(C[2]=F[0]),C[3]<F[1]&&(C[3]=F[1])}),C}v.default=v,l.default=v}),Lr=s((l,h)=>{var v=fr(),x=Gn(),C=gs(),F=ms().default,Q=C.featureEach;C.coordEach,x.polygon;var re=x.featureCollection;function he(Le){var Je=new v(Le);return Je.insert=function(ze){if(ze.type!=="Feature")throw new Error("invalid feature");return ze.bbox=ze.bbox?ze.bbox:F(ze),v.prototype.insert.call(this,ze)},Je.load=function(ze){var vt=[];return Array.isArray(ze)?ze.forEach(function(At){if(At.type!=="Feature")throw new Error("invalid features");At.bbox=At.bbox?At.bbox:F(At),vt.push(At)}):Q(ze,function(At){if(At.type!=="Feature")throw new Error("invalid features");At.bbox=At.bbox?At.bbox:F(At),vt.push(At)}),v.prototype.load.call(this,vt)},Je.remove=function(ze,vt){if(ze.type!=="Feature")throw new Error("invalid feature");return ze.bbox=ze.bbox?ze.bbox:F(ze),v.prototype.remove.call(this,ze,vt)},Je.clear=function(){return v.prototype.clear.call(this)},Je.search=function(ze){var vt=v.prototype.search.call(this,this.toBBox(ze));return re(vt)},Je.collides=function(ze){return v.prototype.collides.call(this,this.toBBox(ze))},Je.all=function(){var ze=v.prototype.all.call(this);return re(ze)},Je.toJSON=function(){return v.prototype.toJSON.call(this)},Je.fromJSON=function(ze){return v.prototype.fromJSON.call(this,ze)},Je.toBBox=function(ze){var vt;if(ze.bbox)vt=ze.bbox;else if(Array.isArray(ze)&&ze.length===4)vt=ze;else if(Array.isArray(ze)&&ze.length===6)vt=[ze[0],ze[1],ze[3],ze[4]];else if(ze.type==="Feature")vt=F(ze);else if(ze.type==="FeatureCollection")vt=F(ze);else throw new Error("invalid geojson");return{minX:vt[0],minY:vt[1],maxX:vt[2],maxY:vt[3]}},Je}h.exports=he,h.exports.default=he});Array.prototype.findIndex=Array.prototype.findIndex||function(l){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof l!="function")throw new TypeError("callback must be a function");for(var h=Object(this),v=h.length>>>0,x=arguments[1],C=0;C<v;C++)if(l.call(x,h[C],C,h))return C;return-1},Array.prototype.find=Array.prototype.find||function(l){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof l!="function")throw new TypeError("callback must be a function");for(var h=Object(this),v=h.length>>>0,x=arguments[1],C=0;C<v;C++){var F=h[C];if(l.call(x,F,C,h))return F}},typeof Object.assign!="function"&&(Object.assign=function(l){if(l==null)throw new TypeError("Cannot convert undefined or null to object");l=Object(l);for(var h=1;h<arguments.length;h++){var v=arguments[h];if(v!=null)for(var x in v)Object.prototype.hasOwnProperty.call(v,x)&&(l[x]=v[x])}return l}),function(l){l.forEach(function(h){h.hasOwnProperty("remove")||Object.defineProperty(h,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(l,h){if(this==null)throw new TypeError('"this" is null or not defined');var v=Object(this),x=v.length>>>0;if(x===0)return!1;var C=h|0,F=Math.max(C>=0?C:x-Math.abs(C),0);function Q(re,he){return re===he||typeof re=="number"&&typeof he=="number"&&isNaN(re)&&isNaN(he)}for(;F<x;){if(Q(v[F],l))return!0;F++}return!1}});var jo={version:"2.18.3"},Vn=f(Di()),_r={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},Wr={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex löschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer löschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknüpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Länge",segmentLength:"Segment Länge",area:"Fläche",radius:"Radius",perimeter:"Umfang",height:"Höhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},_n={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},nn={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},ii={tooltips:{placeMarker:"Adaugă un punct",firstVertex:"Apasă aici pentru a adăuga primul Vertex",continueLine:"Apasă aici pentru a continua desenul",finishLine:"Apasă pe orice obiect pentru a finisa desenul",finishPoly:"Apasă pe primul obiect pentru a finisa",finishRect:"Apasă pentru a finisa",startCircle:"Apasă pentru a desena un cerc",finishCircle:"Apasă pentru a finisa un cerc",placeCircleMarker:"Adaugă un punct"},actions:{finish:"Termină",cancel:"Anulează",removeLastVertex:"Șterge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaugă o bulină",drawPolyButton:"Desenează un poligon",drawLineButton:"Desenează o linie",drawCircleButton:"Desenează un cerc",drawRectButton:"Desenează un dreptunghi",editButton:"Editează straturile",dragButton:"Mută straturile",cutButton:"Taie straturile",deleteButton:"Șterge straturile",drawCircleMarkerButton:"Desenează marcatorul cercului",snappingButton:"Fixați marcatorul glisat pe alte straturi și vârfuri",pinningButton:"Fixați vârfurile partajate împreună",rotateButton:"Rotiți stratul"}},as={tooltips:{placeMarker:"Нажмите, чтобы нанести маркер",firstVertex:"Нажмите, чтобы нанести первый объект",continueLine:"Нажмите, чтобы продолжить рисование",finishLine:"Нажмите любой существующий маркер для завершения",finishPoly:"Выберите первую точку, чтобы закончить",finishRect:"Нажмите, чтобы закончить",startCircle:"Нажмите, чтобы добавить центр круга",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Нажмите, чтобы нанести круговой маркер"},actions:{finish:"Завершить",cancel:"Отменить",removeLastVertex:"Отменить последнее действие"},buttonTitles:{drawMarkerButton:"Добавить маркер",drawPolyButton:"Рисовать полигон",drawLineButton:"Рисовать кривую",drawCircleButton:"Рисовать круг",drawRectButton:"Рисовать прямоугольник",editButton:"Редактировать слой",dragButton:"Перенести слой",cutButton:"Вырезать слой",deleteButton:"Удалить слой",drawCircleMarkerButton:"Добавить круговой маркер",snappingButton:"Привязать перетаскиваемый маркер к другим слоям и вершинам",pinningButton:"Связать общие точки вместе",rotateButton:"Поворот слоя"}},vs={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vértice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del círculo",finishCircle:"Presiona para finalizar el círculo",placeCircleMarker:"Presiona para colocar un marcador de círculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar último vértice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polígono",drawLineButton:"Dibujar Línea",drawCircleButton:"Dibujar Círculo",drawRectButton:"Dibujar Rectángulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Círculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vértices",pinningButton:"Fijar juntos los vértices compartidos",rotateButton:"Rotar capa"}},Ci={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beëindigen",finishPoly:"Klik op het eerst punt om te beëindigen",finishRect:"Klik om te beëindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beëindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},ao={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer à dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"Éditer des calques",dragButton:"Déplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"Épingler ensemble les sommets partagés",rotateButton:"Tourner des calques"}},Ks={tooltips:{placeMarker:"单击放置标记",firstVertex:"单击放置首个顶点",continueLine:"单击继续绘制",finishLine:"单击任何存在的标记以完成",finishPoly:"单击第一个标记以完成",finishRect:"单击完成",startCircle:"单击放置圆心",finishCircle:"单击完成圆形",placeCircleMarker:"点击放置圆形标记"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最后的顶点"},buttonTitles:{drawMarkerButton:"绘制标记",drawPolyButton:"绘制多边形",drawLineButton:"绘制线段",drawCircleButton:"绘制圆形",drawRectButton:"绘制长方形",editButton:"编辑图层",dragButton:"拖拽图层",cutButton:"剪切图层",deleteButton:"删除图层",drawCircleMarkerButton:"画圆圈标记",snappingButton:"将拖动的标记捕捉到其他图层和顶点",pinningButton:"将共享顶点固定在一起",rotateButton:"旋转图层"}},Bs={tooltips:{placeMarker:"單擊放置標記",firstVertex:"單擊放置第一個頂點",continueLine:"單擊繼續繪製",finishLine:"單擊任何存在的標記以完成",finishPoly:"單擊第一個標記以完成",finishRect:"單擊完成",startCircle:"單擊放置圓心",finishCircle:"單擊完成圓形",placeCircleMarker:"點擊放置圓形標記"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最後一個頂點"},buttonTitles:{drawMarkerButton:"放置標記",drawPolyButton:"繪製多邊形",drawLineButton:"繪製線段",drawCircleButton:"繪製圓形",drawRectButton:"繪製方形",editButton:"編輯圖形",dragButton:"移動圖形",cutButton:"裁切圖形",deleteButton:"刪除圖形",drawCircleMarkerButton:"畫圓圈標記",snappingButton:"將拖動的標記對齊到其他圖層和頂點",pinningButton:"將共享頂點固定在一起",rotateButton:"旋轉圖形"}},fi={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vértice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do círculo",finishCircle:"Clique para finalizar o círculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover último vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},To={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vértice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do círculo",finishCircle:"Clique para terminar o círculo",placeCircleMarker:"Clique para colocar marcador de círculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover Último Vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},Ns={tooltips:{placeMarker:"Kliknij, aby umieścić znacznik",firstVertex:"Kliknij, aby umieścić pierwszy wierzchołek",continueLine:"Kliknij, aby kontynuować rysowanie",finishLine:"Kliknij dowolny istniejący znacznik, aby zakończyć",finishPoly:"Kliknij pierwszy znacznik, aby zakończyć",finishRect:"Kliknij, aby zakończyć",startCircle:"Kliknij, aby umieścić środek okręgu",finishCircle:"Kliknij, aby zakończyć okrąg",placeCircleMarker:"Kliknij, aby umieścić znacznik okręgu",placeText:"Kliknij, aby umieścić tekst"},actions:{finish:"Zakończ",cancel:"Anuluj",removeLastVertex:"Usuń ostatni wierzchołek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokąt",drawLineButton:"Rysuj linię",drawCircleButton:"Rysuj okrąg",drawRectButton:"Rysuj prostokąt",editButton:"Edytuj warstwy",dragButton:"Przeciągnij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usuń warstwy",drawCircleMarkerButton:"Rysuj znacznik okrągły",snappingButton:"Przyciągnij przenoszony znacznik do innych warstw i wierzchołków",pinningButton:"Przypnij wspólne wierzchołki razem",rotateButton:"Obróć warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne śledzenie linii"},measurements:{totalLength:"Długość",segmentLength:"Długość odcinka",area:"Obszar",radius:"Promień",perimeter:"Obwód",height:"Wysokość",width:"Szerokość",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},Yi={tooltips:{placeMarker:"Klicka för att placera markör",firstVertex:"Klicka för att placera första hörnet",continueLine:"Klicka för att fortsätta rita",finishLine:"Klicka på en existerande punkt för att slutföra",finishPoly:"Klicka på den första punkten för att slutföra",finishRect:"Klicka för att slutföra",startCircle:"Klicka för att placera cirkelns centrum",finishCircle:"Klicka för att slutföra cirkeln",placeCircleMarker:"Klicka för att placera cirkelmarkör"},actions:{finish:"Slutför",cancel:"Avbryt",removeLastVertex:"Ta bort sista hörnet"},buttonTitles:{drawMarkerButton:"Rita Markör",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkör",snappingButton:"Snäpp dra markören till andra lager och hörn",pinningButton:"Fäst delade hörn tillsammans",rotateButton:"Rotera lagret"}},ys={tooltips:{placeMarker:"Κάντε κλικ για να τοποθετήσετε Δείκτη",firstVertex:"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο",continueLine:"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε",finishLine:"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί",finishPoly:"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε",finishRect:"Κάντε κλικ για να τελειώσετε",startCircle:"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου",finishCircle:"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο",placeCircleMarker:"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},actions:{finish:"Τέλος",cancel:"Ακύρωση",removeLastVertex:"Κατάργηση τελευταίου σημείου"},buttonTitles:{drawMarkerButton:"Σχεδίαση Δείκτη",drawPolyButton:"Σχεδίαση Πολυγώνου",drawLineButton:"Σχεδίαση Γραμμής",drawCircleButton:"Σχεδίαση Κύκλου",drawRectButton:"Σχεδίαση Ορθογωνίου",editButton:"Επεξεργασία Επιπέδων",dragButton:"Μεταφορά Επιπέδων",cutButton:"Αποκοπή Επιπέδων",deleteButton:"Κατάργηση Επιπέδων",drawCircleMarkerButton:"Σχεδίαση Κυκλικού Δείκτη",snappingButton:"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές",pinningButton:"Περικοπή κοινών κορυφών μαζί",rotateButton:"Περιστρέψτε το στρώμα"}},zo={tooltips:{placeMarker:"Kattintson a jelölő elhelyezéséhez",firstVertex:"Kattintson az első pont elhelyezéséhez",continueLine:"Kattintson a következő pont elhelyezéséhez",finishLine:"A befejezéshez kattintson egy meglévő pontra",finishPoly:"A befejezéshez kattintson az első pontra",finishRect:"Kattintson a befejezéshez",startCircle:"Kattintson a kör középpontjának elhelyezéséhez",finishCircle:"Kattintson a kör befejezéséhez",placeCircleMarker:"Kattintson a körjelölő elhelyezéséhez"},actions:{finish:"Befejezés",cancel:"Mégse",removeLastVertex:"Utolsó pont eltávolítása"},buttonTitles:{drawMarkerButton:"Jelölő rajzolása",drawPolyButton:"Poligon rajzolása",drawLineButton:"Vonal rajzolása",drawCircleButton:"Kör rajzolása",drawRectButton:"Négyzet rajzolása",editButton:"Elemek szerkesztése",dragButton:"Elemek mozgatása",cutButton:"Elemek vágása",deleteButton:"Elemek törlése",drawCircleMarkerButton:"Kör jelölő rajzolása",snappingButton:"Kapcsolja a jelöltőt másik elemhez vagy ponthoz",pinningButton:"Közös pontok összekötése",rotateButton:"Fólia elforgatása"}},ma={tooltips:{placeMarker:"Tryk for at placere en markør",firstVertex:"Tryk for at placere det første punkt",continueLine:"Tryk for at fortsætte linjen",finishLine:"Tryk på et eksisterende punkt for at afslutte",finishPoly:"Tryk på det første punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkør"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markør",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Træk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkør",snappingButton:"Fastgør trukket markør til andre elementer",pinningButton:"Sammenlæg delte elementer",rotateButton:"Roter laget"}},Ji={tooltips:{placeMarker:"Klikk for å plassere punkt",firstVertex:"Klikk for å plassere første punkt",continueLine:"Klikk for å tegne videre",finishLine:"Klikk på et eksisterende punkt for å fullføre",finishPoly:"Klikk første punkt for å fullføre",finishRect:"Klikk for å fullføre",startCircle:"Klikk for å sette sirkel midtpunkt",finishCircle:"Klikk for å fullføre sirkel",placeCircleMarker:"Klikk for å plassere sirkel",placeText:"Klikk for å plassere tekst"},actions:{finish:"Fullfør",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotér objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalér objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Område",radius:"Radius",perimeter:"Omriss",height:"Høyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkør"}},rl={tooltips:{placeMarker:"کلیک برای جانمایی نشان",firstVertex:"کلیک برای رسم اولین رأس",continueLine:"کلیک برای ادامه رسم",finishLine:"کلیک روی هر نشان موجود برای پایان",finishPoly:"کلیک روی اولین نشان برای پایان",finishRect:"کلیک برای پایان",startCircle:"کلیک برای رسم مرکز دایره",finishCircle:"کلیک برای پایان رسم دایره",placeCircleMarker:"کلیک برای رسم نشان دایره",placeText:"کلیک برای نوشتن متن"},actions:{finish:"پایان",cancel:"لفو",removeLastVertex:"حذف آخرین رأس"},buttonTitles:{drawMarkerButton:"درج نشان",drawPolyButton:"رسم چندضلعی",drawLineButton:"رسم خط",drawCircleButton:"رسم دایره",drawRectButton:"رسم چهارضلعی",editButton:"ویرایش لایه‌ها",dragButton:"جابجایی لایه‌ها",cutButton:"برش لایه‌ها",deleteButton:"حذف لایه‌ها",drawCircleMarkerButton:"رسم نشان دایره",snappingButton:"نشانگر را به لایه‌ها و رئوس دیگر بکشید",pinningButton:"رئوس مشترک را با هم پین کنید",rotateButton:"چرخش لایه",drawTextButton:"رسم متن",scaleButton:"مقیاس‌گذاری",autoTracingButton:"ردیاب خودکار"},measurements:{totalLength:"طول",segmentLength:"طول بخش",area:"ناحیه",radius:"شعاع",perimeter:"محیط",height:"ارتفاع",width:"عرض",coordinates:"موقعیت",coordinatesMarker:"موقعیت نشان"}},va={tooltips:{placeMarker:"Натисніть, щоб нанести маркер",firstVertex:"Натисніть, щоб нанести першу вершину",continueLine:"Натисніть, щоб продовжити малювати",finishLine:"Натисніть будь-який існуючий маркер для завершення",finishPoly:"Виберіть перший маркер, щоб завершити",finishRect:"Натисніть, щоб завершити",startCircle:"Натисніть, щоб додати центр кола",finishCircle:"Натисніть, щоб завершити коло",placeCircleMarker:"Натисніть, щоб нанести круговий маркер"},actions:{finish:"Завершити",cancel:"Відмінити",removeLastVertex:"Видалити попередню вершину"},buttonTitles:{drawMarkerButton:"Малювати маркер",drawPolyButton:"Малювати полігон",drawLineButton:"Малювати криву",drawCircleButton:"Малювати коло",drawRectButton:"Малювати прямокутник",editButton:"Редагувати шари",dragButton:"Перенести шари",cutButton:"Вирізати шари",deleteButton:"Видалити шари",drawCircleMarkerButton:"Малювати круговий маркер",snappingButton:"Прив’язати перетягнутий маркер до інших шарів та вершин",pinningButton:"Зв'язати спільні вершини разом",rotateButton:"Повернути шар"}},pr={tooltips:{placeMarker:"İşaretçi yerleştirmek için tıklayın",firstVertex:"İlk tepe noktasını yerleştirmek için tıklayın",continueLine:"Çizime devam etmek için tıklayın",finishLine:"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın",finishPoly:"Bitirmek için ilk işaretçiyi tıklayın",finishRect:"Bitirmek için tıklayın",startCircle:"Daire merkezine yerleştirmek için tıklayın",finishCircle:"Daireyi bitirmek için tıklayın",placeCircleMarker:"Daire işaretçisi yerleştirmek için tıklayın"},actions:{finish:"Bitir",cancel:"İptal",removeLastVertex:"Son köşeyi kaldır"},buttonTitles:{drawMarkerButton:"Çizim İşaretçisi",drawPolyButton:"Çokgenler çiz",drawLineButton:"Çoklu çizgi çiz",drawCircleButton:"Çember çiz",drawRectButton:"Dikdörtgen çiz",editButton:"Katmanları düzenle",dragButton:"Katmanları sürükle",cutButton:"Katmanları kes",deleteButton:"Katmanları kaldır",drawCircleMarkerButton:"Daire işaretçisi çiz",snappingButton:"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır",pinningButton:"Paylaşılan köşeleri birbirine sabitle",rotateButton:"Katmanı döndür"}},br={tooltips:{placeMarker:"Kliknutím vytvoříte značku",firstVertex:"Kliknutím vytvoříte první objekt",continueLine:"Kliknutím pokračujte v kreslení",finishLine:"Kliknutí na libovolnou existující značku pro dokončení",finishPoly:"Vyberte první bod pro dokončení",finishRect:"Klikněte pro dokončení",startCircle:"Kliknutím přidejte střed kruhu",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Kliknutím nastavte poloměr"},actions:{finish:"Dokončit",cancel:"Zrušit",removeLastVertex:"Zrušit poslední akci"},buttonTitles:{drawMarkerButton:"Přidat značku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit křivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdélník",editButton:"Upravit vrstvu",dragButton:"Přeneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Přidat kruhovou značku",snappingButton:"Navázat tažnou značku k dalším vrstvám a vrcholům",pinningButton:"Spojit společné body dohromady",rotateButton:"Otočte vrstvu"}},Zr={tooltips:{placeMarker:"クリックしてマーカーを配置",firstVertex:"クリックして最初の頂点を配置",continueLine:"クリックして描画を続ける",finishLine:"任意のマーカーをクリックして終了",finishPoly:"最初のマーカーをクリックして終了",finishRect:"クリックして終了",startCircle:"クリックして円の中心を配置",finishCircle:"クリックして円の描画を終了",placeCircleMarker:"クリックして円マーカーを配置",placeText:"クリックしてテキストを配置"},actions:{finish:"終了",cancel:"キャンセル",removeLastVertex:"最後の頂点を削除"},buttonTitles:{drawMarkerButton:"マーカーを描画",drawPolyButton:"ポリゴンを描画",drawLineButton:"折れ線を描画",drawCircleButton:"円を描画",drawRectButton:"矩形を描画",editButton:"レイヤーを編集",dragButton:"レイヤーをドラッグ",cutButton:"レイヤーを切り取り",deleteButton:"レイヤーを削除",drawCircleMarkerButton:"円マーカーを描画",snappingButton:"ドラッグしたマーカーを他のレイヤーや頂点にスナップする",pinningButton:"共有する頂点を同時に動かす",rotateButton:"レイヤーを回転",drawTextButton:"テキストを描画"}},Tr={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmäisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtämistä",finishLine:"Klikkaa olemassa olevaa merkkiä lopettaaksesi",finishPoly:"Klikkaa ensimmäistä merkkiä lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrän keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrän",placeCircleMarker:"Klikkaa asettaaksesi ympyrämerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirrä merkkejä",drawPolyButton:"Piirrä monikulmioita",drawLineButton:"Piirrä viivoja",drawCircleButton:"Piirrä ympyrä",drawRectButton:"Piirrä neliskulmioita",editButton:"Muokkaa",dragButton:"Siirrä",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirrä ympyrämerkki",snappingButton:"Kiinnitä siirrettävä merkki toisiin muotoihin",pinningButton:"Kiinnitä jaetut muodot yhteen",rotateButton:"Käännä",drawTextButton:"Piirrä tekstiä"}},Os={tooltips:{placeMarker:"마커 위치를 클릭하세요",firstVertex:"첫번째 꼭지점 위치을 클릭하세요",continueLine:"계속 그리려면 클릭하세요",finishLine:"끝내려면 기존 마커를 클릭하세요",finishPoly:"끝내려면 처음 마커를 클릭하세요",finishRect:"끝내려면 클릭하세요",startCircle:"원의 중심이 될 위치를 클릭하세요",finishCircle:"원을 끝내려면 클릭하세요",placeCircleMarker:"원 마커 위치를 클릭하세요",placeText:"텍스트 위치를 클릭하세요"},actions:{finish:"끝내기",cancel:"취소",removeLastVertex:"마지막 꼭지점 제거"},buttonTitles:{drawMarkerButton:"마커 그리기",drawPolyButton:"다각형 그리기",drawLineButton:"다각선 그리기",drawCircleButton:"원 그리기",drawRectButton:"직사각형 그리기",editButton:"레이어 편집하기",dragButton:"레이어 끌기",cutButton:"레이어 자르기",deleteButton:"레이어 제거하기",drawCircleMarkerButton:"원 마커 그리기",snappingButton:"잡아끈 마커를 다른 레이어 및 꼭지점에 들러붙게 하기",pinningButton:"공유 꼭지점을 함께 찍기",rotateButton:"레이어 회전하기",drawTextButton:"텍스트 그리기"}},il={tooltips:{placeMarker:"Маркерди жайгаштыруу үчүн басыңыз",firstVertex:"Биринчи чокуну жайгаштырууну үчүн басыңыз",continueLine:"Сүрөт тартууну улантуу үчүн басыңыз",finishLine:"Аяктоо үчүн учурдагы маркерди басыңыз",finishPoly:"Бүтүрүү үчүн биринчи маркерди басыңыз",finishRect:"Бүтүрүү үчүн басыңыз",startCircle:"Айлананын борборун жайгаштырууну үчүн басыңыз",finishCircle:"Айлананы бүтүрүү үчүн басыңыз",placeCircleMarker:"Тегерек маркерди жайгаштыруу үчүн басыңыз",placeText:"Текстти жайгаштыруу үчүн басыңыз"},actions:{finish:"Аягы",cancel:"Жок кылуу",removeLastVertex:"Акыркы чокуну өчүрүү"},buttonTitles:{drawMarkerButton:"Маркерди чизуу",drawPolyButton:"Полигон чизуу",drawLineButton:"Полилиния чизуу",drawCircleButton:"Дайынды чизуу",drawRectButton:"Прямоугольник чизуу",editButton:"Слоопту түзөтүү",dragButton:"Слоопту карап сүйлөү",cutButton:"Слооптун башын кесүү",deleteButton:"Слооптун өчүрүү",drawCircleMarkerButton:"Дайынды маркерди чизуу",snappingButton:"Башка слооптордун жана вертекстердин арасына чекилдөө",pinningButton:"Бөлүшкөн вертекстерди бирге тутуштуруу",rotateButton:"Слооптун өзгөртүү",drawTextButton:"Текст чизуу",scaleButton:"Слооптун өлчөмүн өзгөртүү",autoTracingButton:"Автоматтык тизмеги чизуу"},measurements:{totalLength:"Узундук",segmentLength:"Сегмент узундугу",area:"Аймак",radius:"Радиус",perimeter:"Периметр",height:"Диаметр",width:"Кенчилик",coordinates:"Координаттар",coordinatesMarker:"Маркердин координаттары"}},sl=To,$o={en:_r,de:Wr,it:_n,id:nn,ro:ii,ru:as,es:vs,nl:Ci,fr:ao,pt:sl,pt_br:fi,pt_pt:To,zh:Ks,zh_tw:Bs,pl:Ns,sv:Yi,el:ys,hu:zo,da:ma,no:Ji,fa:rl,ua:va,tr:pr,cz:br,ja:Zr,fi:Tr,ko:Os,ky:il},$a={_globalEditModeEnabled:!1,enableGlobalEditMode(l){let h={...l};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(v=>{this._isRelevantForEdit(v)&&v.pm.enable(h)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(l=>{l.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(l=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(l)},handleLayerAdditionInGlobalEditMode(){let l=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let h in l){let v=l[h];this._isRelevantForEdit(v)&&v.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:l}){this._addedLayersEdit[L.stamp(l)]=l},_isRelevantForEdit(l){return l.pm&&!(l instanceof L.LayerGroup)&&(!L.PM.optIn&&!l.options.pmIgnore||L.PM.optIn&&l.options.pmIgnore===!1)&&!l._pmTempLayer&&l.pm.options.allowEditing}},bu=$a,Al={_globalDragModeEnabled:!1,enableGlobalDragMode(){let l=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},l.forEach(h=>{this._isRelevantForDrag(h)&&h.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let l=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,l.forEach(h=>{h.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let l=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let h in l){let v=l[h];this._isRelevantForDrag(v)&&v.pm.enableLayerDrag()}},_layerAddedDrag({layer:l}){this._addedLayersDrag[L.stamp(l)]=l},_isRelevantForDrag(l){return l.pm&&!(l instanceof L.LayerGroup)&&(!L.PM.optIn&&!l.options.pmIgnore||L.PM.optIn&&l.options.pmIgnore===!1)&&!l._pmTempLayer&&l.pm.options.draggable}},Sr=Al,Hr={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(l=>{this._isRelevantForRemoval(l)&&(l.pm.enabled()&&l.pm.disable(),l.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(l=>{l.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(l){let h=l.target;this._isRelevantForRemoval(h)&&!h.pm.dragging()&&(h.removeFrom(this.map.pm._getContainingLayer()),h.remove(),h instanceof L.LayerGroup?(this._fireRemoveLayerGroup(h),this._fireRemoveLayerGroup(this.map,h)):(h.pm._fireRemove(h),h.pm._fireRemove(this.map,h)))},_isRelevantForRemoval(l){return l.pm&&!(l instanceof L.LayerGroup)&&(!L.PM.optIn&&!l.options.pmIgnore||L.PM.optIn&&l.options.pmIgnore===!1)&&!l._pmTempLayer&&l.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let l=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let h in l){let v=l[h];this._isRelevantForRemoval(v)&&(v.pm.enabled()&&v.pm.disable(),v.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:l}){this._addedLayersRemoval[L.stamp(l)]=l}},Ua=Hr,Zu={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(l=>l instanceof L.Polyline).forEach(l=>{this._isRelevantForRotate(l)&&l.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(l=>l instanceof L.Polyline).forEach(l=>{l.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(l){return l.pm&&l instanceof L.Polyline&&!(l instanceof L.LayerGroup)&&(!L.PM.optIn&&!l.options.pmIgnore||L.PM.optIn&&l.options.pmIgnore===!1)&&!l._pmTempLayer&&l.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let l=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let h in l){let v=l[h];this._isRelevantForRemoval(v)&&v.pm.enableRotate()}},_layerAddedRotate({layer:l}){this._addedLayersRotate[L.stamp(l)]=l}},kl=Zu,Jl=f(Di()),ol={_fireDrawStart(l="Draw",h={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},l,h)},_fireDrawEnd(l="Draw",h={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},l,h)},_fireCreate(l,h="Draw",v={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:l,layer:l},h,v)},_fireCenterPlaced(l="Draw",h={}){let v=l==="Draw"?this._layer:void 0,x=l!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:v,layer:x,latlng:this._layer.getLatLng()},l,h)},_fireCut(l,h,v,x="Draw",C={}){this.__fire(l,"pm:cut",{shape:this._shape,layer:h,originalLayer:v},x,C)},_fireEdit(l=this._layer,h="Edit",v={}){this.__fire(l,"pm:edit",{layer:this._layer,shape:this.getShape()},h,v)},_fireEnable(l="Edit",h={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},l,h)},_fireDisable(l="Edit",h={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},l,h)},_fireUpdate(l="Edit",h={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},l,h)},_fireMarkerDragStart(l,h=void 0,v="Edit",x={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:l,shape:this.getShape(),indexPath:h},v,x)},_fireMarkerDrag(l,h=void 0,v="Edit",x={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:l,shape:this.getShape(),indexPath:h},v,x)},_fireMarkerDragEnd(l,h=void 0,v=void 0,x="Edit",C={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:l,shape:this.getShape(),indexPath:h,intersectionReset:v},x,C)},_fireDragStart(l="Edit",h={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},l,h)},_fireDrag(l,h="Edit",v={}){this.__fire(this._layer,"pm:drag",{...l,shape:this.getShape()},h,v)},_fireDragEnd(l="Edit",h={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},l,h)},_fireDragEnable(l="Edit",h={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},l,h)},_fireDragDisable(l="Edit",h={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},l,h)},_fireRemove(l,h=l,v="Edit",x={}){this.__fire(l,"pm:remove",{layer:h,shape:this.getShape()},v,x)},_fireVertexAdded(l,h,v,x="Edit",C={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:l,indexPath:h,latlng:v,shape:this.getShape()},x,C)},_fireVertexRemoved(l,h,v="Edit",x={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:l,indexPath:h,shape:this.getShape()},v,x)},_fireVertexClick(l,h,v="Edit",x={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:l,indexPath:h,shape:this.getShape()},v,x)},_fireIntersect(l,h=this._layer,v="Edit",x={}){this.__fire(h,"pm:intersect",{layer:this._layer,intersection:l,shape:this.getShape()},v,x)},_fireLayerReset(l,h,v="Edit",x={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:l,indexPath:h,shape:this.getShape()},v,x)},_fireChange(l,h="Edit",v={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:l,shape:this.getShape()},h,v)},_fireTextChange(l,h="Edit",v={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:l,shape:this.getShape()},h,v)},_fireTextFocus(l="Edit",h={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},l,h)},_fireTextBlur(l="Edit",h={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},l,h)},_fireSnapDrag(l,h,v="Snapping",x={}){this.__fire(l,"pm:snapdrag",h,v,x)},_fireSnap(l,h,v="Snapping",x={}){this.__fire(l,"pm:snap",h,v,x)},_fireUnsnap(l,h,v="Snapping",x={}){this.__fire(l,"pm:unsnap",h,v,x)},_fireRotationEnable(l,h,v="Rotation",x={}){this.__fire(l,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},v,x)},_fireRotationDisable(l,h="Rotation",v={}){this.__fire(l,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},h,v)},_fireRotationStart(l,h,v="Rotation",x={}){this.__fire(l,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:h},v,x)},_fireRotation(l,h,v,x=this._rotationLayer,C="Rotation",F={}){this.__fire(l,"pm:rotate",{layer:x,helpLayer:this._layer,startAngle:this._startAngle,angle:x.pm.getAngle(),angleDiff:h,oldLatLngs:v,newLatLngs:x.getLatLngs()},C,F)},_fireRotationEnd(l,h,v,x="Rotation",C={}){this.__fire(l,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:h,angle:this._rotationLayer.pm.getAngle(),originLatLngs:v,newLatLngs:this._rotationLayer.getLatLngs()},x,C)},_fireActionClick(l,h,v,x="Toolbar",C={}){this.__fire(this._map,"pm:actionclick",{text:l.text,action:l,btnName:h,button:v},x,C)},_fireButtonClick(l,h,v="Toolbar",x={}){this.__fire(this._map,"pm:buttonclick",{btnName:l,button:h},v,x)},_fireLangChange(l,h,v,x,C="Global",F={}){this.__fire(this.map,"pm:langchange",{oldLang:l,activeLang:h,fallback:v,translations:x},C,F)},_fireGlobalDragModeToggled(l,h="Global",v={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:l,map:this.map},h,v)},_fireGlobalEditModeToggled(l,h="Global",v={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:l,map:this.map},h,v)},_fireGlobalRemovalModeToggled(l,h="Global",v={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:l,map:this.map},h,v)},_fireGlobalCutModeToggled(l="Global",h={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},l,h)},_fireGlobalDrawModeToggled(l="Global",h={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},l,h)},_fireGlobalRotateModeToggled(l="Global",h={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},l,h)},_fireRemoveLayerGroup(l,h=l,v="Edit",x={}){this.__fire(l,"pm:remove",{layer:h,shape:void 0},v,x)},_fireKeyeventEvent(l,h,v,x="Global",C={}){this.__fire(this.map,"pm:keyevent",{event:l,eventType:h,focusOn:v},x,C)},__fire(l,h,v,x,C={}){v=(0,Jl.default)(v,C,{source:x}),L.PM.Utils._fireEvent(l,h,v)}},Tl=ol,Xl=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(l){this.map=l,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),l.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(l){let h="document";this.map.getContainer().contains(l.target)&&(h="map");let v={event:l,eventType:l.type,focusOn:h};this._lastEvents[l.type]=v,this._lastEvents.current=v,this.map.pm._fireKeyeventEvent(l,l.type,h)},_onBlur(l){l.altKey=!1;let h={event:l,eventType:l.type,focusOn:"document"};this._lastEvents[l.type]=h,this._lastEvents.current=h},getLastKeyEvent(l="current"){return this._lastEvents[l]},isShiftKeyPressed(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.shiftKey},isAltKeyPressed(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.altKey},isCtrlKeyPressed(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.ctrlKey},isMetaKeyPressed(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.metaKey},getPressedKey(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.key}}),Kr=Xl,Xi=f(li());function ir(l){let h=L.PM.activeLang;return(0,Xi.default)($o[h],l)||(0,Xi.default)($o.en,l)||l}function Qi(l){for(let h=0;h<l.length;h+=1){let v=l[h];if(Array.isArray(v)){if(Qi(v))return!0}else if(v!=null&&v!=="")return!0}return!1}function al(l){return l.reduce((h,v)=>{if(v.length!==0){let x=Array.isArray(v)?al(v):v;Array.isArray(x)?x.length!==0&&h.push(x):h.push(x)}return h},[])}function ya(l,h,v){let x={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:C,b:F,f:Q}=x,re=l.lng,he=l.lat,Le=v,Je=Math.PI,ze=h*Je/180,vt=Math.sin(ze),At=Math.cos(ze),Jt=(1-Q)*Math.tan(he*Je/180),yn=1/Math.sqrt(1+Jt*Jt),bn=Jt*yn,ur=Math.atan2(Jt,At),Ye=yn*vt,tt=1-Ye*Ye,ft=tt*(C*C-F*F)/(F*F),Nt=1+ft/16384*(4096+ft*(-768+ft*(320-175*ft))),bt=ft/1024*(256+ft*(-128+ft*(74-47*ft))),Tt=Le/(F*Nt),ge=2*Math.PI,Pe,Oe,Ne;for(;Math.abs(Tt-ge)>1e-12;){Pe=Math.cos(2*ur+Tt),Oe=Math.sin(Tt),Ne=Math.cos(Tt);let sn=bt*Oe*(Pe+bt/4*(Ne*(-1+2*Pe*Pe)-bt/6*Pe*(-3+4*Oe*Oe)*(-3+4*Pe*Pe)));ge=Tt,Tt=Le/(F*Nt)+sn}let Fe=bn*Oe-yn*Ne*At,je=Math.atan2(bn*Ne+yn*Oe*At,(1-Q)*Math.sqrt(Ye*Ye+Fe*Fe)),at=Math.atan2(Oe*vt,yn*Ne-bn*Oe*At),lt=Q/16*tt*(4+Q*(4-3*tt)),pt=at-(1-lt)*Q*Ye*(Tt+lt*Oe*(Pe+lt*Ne*(-1+2*Pe*Pe))),Lt=re+pt*180/Je,St=je*180/Je;return L.latLng(Lt,St)}function Fi(l,h,v,x,C=!0){let F,Q,re,he=[];for(let Le=0;Le<v;Le+=1){if(C)F=Le*360/v+x,Q=ya(l,F,h),re=L.latLng(Q.lng,Q.lat);else{let Je=l.lat+Math.cos(2*Le*Math.PI/v)*h,ze=l.lng+Math.sin(2*Le*Math.PI/v)*h;re=L.latLng(Je,ze)}he.push(re)}return he}function Ql(l,h,v){h=(h+360)%360;let x=Math.PI/180,C=180/Math.PI,{R:F}=L.CRS.Earth,Q=l.lng*x,re=l.lat*x,he=h*x,Le=Math.sin(re),Je=Math.cos(re),ze=Math.cos(v/F),vt=Math.sin(v/F),At=Math.asin(Le*ze+Je*vt*Math.cos(he)),Jt=Q+Math.atan2(Math.sin(he)*vt*Je,ze-Le*Math.sin(At));Jt*=C;let yn=Jt-360,bn=Jt<-180?Jt+360:Jt;return Jt=Jt>180?yn:bn,L.latLng([At*C,Jt])}function Qo(l,h,v){let x=l.latLngToContainerPoint(h),C=l.latLngToContainerPoint(v),F=Math.atan2(C.y-x.y,C.x-x.x)*180/Math.PI+90;return F+=F<0?360:0,F}function Dl(l,h,v,x){let C=Qo(l,h,v);return Ql(h,C,x)}function Bl(l,h,v="asc"){if(!h||Object.keys(h).length===0)return(he,Le)=>he-Le;let x=Object.keys(h),C,F=x.length-1,Q={};for(;F>=0;)C=x[F],Q[C.toLowerCase()]=h[C],F-=1;function re(he){if(he instanceof L.Marker)return"Marker";if(he instanceof L.Circle)return"Circle";if(he instanceof L.CircleMarker)return"CircleMarker";if(he instanceof L.Rectangle)return"Rectangle";if(he instanceof L.Polygon)return"Polygon";if(he instanceof L.Polyline)return"Line"}return(he,Le)=>{let Je,ze;if(Je=re(he.layer).toLowerCase(),ze=re(Le.layer).toLowerCase(),!Je||!ze)return 0;let vt=Je in Q?Q[Je]:Number.MAX_SAFE_INTEGER,At=ze in Q?Q[ze]:Number.MAX_SAFE_INTEGER,Jt=0;return vt<At?Jt=-1:vt>At&&(Jt=1),v==="desc"?Jt*-1:Jt}}function Do(l,h=l.getLatLngs()){return l instanceof L.Polygon?L.polygon(h).getLatLngs():L.polyline(h).getLatLngs()}function Nl(l,h){var v,x,C,F;if((x=(v=h.options.crs)==null?void 0:v.projection)!=null&&x.MAX_LATITUDE){let Q=(F=(C=h.options.crs)==null?void 0:C.projection)==null?void 0:F.MAX_LATITUDE;l.lat=Math.max(Math.min(Q,l.lat),-Q)}return l}function vi(l){return l.options.renderer||l._map&&(l._map._getPaneRenderer(l.options.pane)||l._map.options.renderer||l._map._renderer)||l._renderer}var Ku=L.Class.extend({includes:[bu,Sr,Ua,kl,Tl],initialize(l){this.map=l,this.Draw=new L.PM.Draw(l),this.Toolbar=new L.PM.Toolbar(l),this.Keyboard=Kr(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(l)},setLang(l="en",h,v="en"){if(l=l.trim().toLowerCase(),!/^[a-z]{2}$/.test(l)){let C=l.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(C){let F=[`${C[1]}_${C[2]}`,`${C[1]}`];for(let Q of F)if($o[Q]){l=Q;break}}}let x=L.PM.activeLang;h&&($o[l]=(0,Vn.default)($o[v],h)),L.PM.activeLang=l,this.map.pm.Toolbar.reinit(),this._fireLangChange(x,l,v,$o[l])},addControls(l){this.Toolbar.addControls(l)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(l="Polygon",h){l==="Poly"&&(l="Polygon"),this.Draw.enable(l,h)},disableDraw(l="Polygon"){l==="Poly"&&(l="Polygon"),this.Draw.disable(l)},setPathOptions(l,h={}){let v=h.ignoreShapes||[],x=h.merge||!1;this.map.pm.Draw.shapes.forEach(C=>{v.indexOf(C)===-1&&this.map.pm.Draw[C].setPathOptions(l,x)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(l){let h=(0,Vn.default)(this.globalOptions,l);h.editable&&(h.resizeableCircleMarker=h.editable,delete h.editable);let v=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!h.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),v=!0);let x=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!h.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),x=!0),this.map.pm.Draw.shapes.forEach(C=>{this.map.pm.Draw[C].setOptions(h)}),v&&this.map.pm.Draw.CircleMarker.enable(),x&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(C=>{C.pm.setOptions(h)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=h,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(l=>{l.pm.enabled()&&l.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(l){return this.Draw.Cut.enable(l)},toggleGlobalCutMode(l){return this.Draw.Cut.toggle(l)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(l=!1){let h=L.PM.Utils.findLayers(this.map);if(!l)return h;let v=L.featureGroup();return v._pmTempLayer=!0,h.forEach(x=>{v.addLayer(x)}),v},getGeomanDrawLayers(l=!1){let h=L.PM.Utils.findLayers(this.map).filter(x=>x._drawnByGeoman===!0);if(!l)return h;let v=L.featureGroup();return v._pmTempLayer=!0,h.forEach(x=>{v.addLayer(x)}),v},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(l){this._touchEventCounter===0&&(L.DomEvent.on(l,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(l,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(l){this._touchEventCounter===1&&(L.DomEvent.off(l,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(l,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(l){vi(this.map)._onMouseMove(this._createMouseEvent("mousemove",l))},_canvasTouchClick(l){let h="";l.type==="touchstart"||l.type==="pointerdown"?h="mousedown":(l.type==="touchend"||l.type==="pointerup"||l.type==="touchcancel"||l.type==="pointercancel")&&(h="mouseup"),h&&vi(this.map)._onClick(this._createMouseEvent(h,l))},_createMouseEvent(l,h){let v,x=h.touches[0]||h.changedTouches[0];try{v=new MouseEvent(l,{bubbles:h.bubbles,cancelable:h.cancelable,view:h.view,detail:x.detail,screenX:x.screenX,screenY:x.screenY,clientX:x.clientX,clientY:x.clientY,ctrlKey:h.ctrlKey,altKey:h.altKey,shiftKey:h.shiftKey,metaKey:h.metaKey,button:h.button,relatedTarget:h.relatedTarget})}catch{v=document.createEvent("MouseEvents"),v.initMouseEvent(l,h.bubbles,h.cancelable,h.view,x.detail,x.screenX,x.screenY,x.clientX,x.clientY,h.ctrlKey,h.altKey,h.shiftKey,h.metaKey,h.button,h.relatedTarget)}return v}}),Ls=Ku,Uo=L.Control.extend({includes:[Tl],options:{position:"topleft",disableByOtherButtons:!0},initialize(l){this._button=L.Util.extend({},this.options,l)},onAdd(l){return this._map=l,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let l=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),l?l.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(l){return typeof l=="boolean"?this._button.toggleStatus=l:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(l){l&&l.preventDefault(),!this._button.disabled&&(this._button.onClick(l,{button:this,event:l}),this._clicked(l),this._button.afterClick(l,{button:this,event:l}))},_makeButton(l){let h=this.options.position.indexOf("right")>-1?"pos-right":"",v=L.DomUtil.create("div",`button-container  ${h}`,this._container);l.title&&v.setAttribute("title",l.title);let x=L.DomUtil.create("a","leaflet-buttons-control-button",v);x.setAttribute("role","button"),x.setAttribute("tabindex","0"),x.href="#";let C=L.DomUtil.create("div",`leaflet-pm-actions-container ${h}`,v),F=l.actions,Q={cancel:{text:ir("actions.cancel"),title:ir("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:ir("actions.finish"),title:ir("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:ir("actions.removeLastVertex"),title:ir("actions.removeLastVertex"),onClick(){this._map.pm.Draw[l.jsClass]._removeLastVertex()}},finish:{text:ir("actions.finish"),title:ir("actions.finish"),onClick(he){this._map.pm.Draw[l.jsClass]._finishShape(he)}}};l._preparedActions=F.map(he=>{let Le=typeof he=="string"?he:he.name,Je;if(Q[Le])Je=Q[Le];else if(he.text)Je=he;else return Je;let ze=L.DomUtil.create("a",`leaflet-pm-action ${h} action-${Le}`,C);if(ze.setAttribute("role","button"),ze.setAttribute("tabindex","0"),ze.href="#",Je.title&&(ze.title=Je.title),ze.innerHTML=Je.text,L.DomEvent.disableClickPropagation(ze),L.DomEvent.on(ze,"click",L.DomEvent.stop),Je._node=ze,!l.disabled&&Je.onClick){let vt=At=>{At.preventDefault();let Jt="",{buttons:yn}=this._map.pm.Toolbar;for(let bn in yn)if(yn[bn]._button===l){Jt=bn;break}this._fireActionClick(Je,Jt,l)};L.DomEvent.addListener(ze,"click",vt,this),L.DomEvent.addListener(ze,"click",Je.onClick,this),L.DomEvent.addListener(ze,"click",()=>this._updateActiveAction(l))}return Je}),this._updateActiveAction(l),l.toggleStatus&&L.DomUtil.addClass(v,"active");let re=L.DomUtil.create("div","control-icon",x);return l.iconUrl&&re.setAttribute("src",l.iconUrl),l.className&&L.DomUtil.addClass(re,l.className),L.DomEvent.disableClickPropagation(x),L.DomEvent.on(x,"click",L.DomEvent.stop),l.disabled||(L.DomEvent.addListener(x,"click",this._onBtnClick,this),L.DomEvent.addListener(x,"click",this._triggerClick,this)),l.disabled&&(L.DomUtil.addClass(x,"pm-disabled"),x.setAttribute("aria-disabled","true")),v},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let l="",{buttons:h}=this._map.pm.Toolbar;for(let v in h)if(h[v]._button===this._button){l=v;break}this._fireButtonClick(l,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let l="pm-disabled",h=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(h,l),h.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(h,l),h.setAttribute("aria-disabled","false"))},_updateActiveAction(l){var h;(h=l._preparedActions)==null||h.forEach(v=>{v!=null&&v._node&&(v.isActive&&v.isActive.call(this)?L.DomUtil.addClass(v._node,"active-action"):L.DomUtil.removeClass(v._node,"active-action"))})}}),Ol=Uo;L.Control.PMButton=Ol;var Vo=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(l){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(l)},reinit(){let l=this.isVisible;this.removeControls(),this._defineButtons(),l&&this.addControls()},init(l){this.map=l,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(l){let h=`${l}Container`;return this[h]||(this[h]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${l} leaflet-bar leaflet-control`)),this[h]},getButtons(){return this.buttons},addControls(l=this.options){typeof l.editPolygon<"u"&&(l.editMode=l.editPolygon),typeof l.deleteLayer<"u"&&(l.removalMode=l.deleteLayer),L.Util.setOptions(this,l),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let l=this.getButtons(),h={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let v in l){let x=l[v];L.Util.setOptions(x,{className:h.geomanIcons[v]})}},removeControls(){let l=this.getButtons();for(let h in l)l[h].remove();this.isVisible=!1},toggleControls(l=this.options){this.isVisible?this.removeControls():this.addControls(l)},_addButton(l,h){return this.buttons[l]=h,this.options[l]=!!this.options[l]||!1,this.buttons[l]},triggerClickOnToggledButtons(l){for(let h in this.buttons){let v=this.buttons[h];v._button.disableByOtherButtons&&v!==l&&v.toggled()&&v._triggerClick()}},toggleButton(l,h,v=!0){l==="editPolygon"&&(l="editMode"),l==="deleteLayer"&&(l="removalMode");let x=l;return v&&this.triggerClickOnToggledButtons(this.buttons[x]),this.buttons[x]?this.buttons[x].toggle(h):!1},_defineButtons(){let l={className:"control-icon leaflet-pm-icon-marker",title:ir("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},h={title:ir("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},v={className:"control-icon leaflet-pm-icon-polyline",title:ir("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},x={title:ir("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},C={title:ir("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},F={title:ir("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},Q={title:ir("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},re={title:ir("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},he={title:ir("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},Le={title:ir("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Je={title:ir("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},ze={className:"control-icon leaflet-pm-icon-text",title:ir("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(l)),this._addButton("drawPolyline",new L.Control.PMButton(v)),this._addButton("drawRectangle",new L.Control.PMButton(F)),this._addButton("drawPolygon",new L.Control.PMButton(h)),this._addButton("drawCircle",new L.Control.PMButton(x)),this._addButton("drawCircleMarker",new L.Control.PMButton(C)),this._addButton("drawText",new L.Control.PMButton(ze)),this._addButton("editMode",new L.Control.PMButton(Q)),this._addButton("dragMode",new L.Control.PMButton(re)),this._addButton("cutPolygon",new L.Control.PMButton(he)),this._addButton("removalMode",new L.Control.PMButton(Le)),this._addButton("rotateMode",new L.Control.PMButton(Je))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let l=this.getButtons(),h=[];this.options.drawControls===!1&&(h=h.concat(Object.keys(l).filter(v=>!l[v]._button.tool))),this.options.editControls===!1&&(h=h.concat(Object.keys(l).filter(v=>l[v]._button.tool==="edit"))),this.options.optionsControls===!1&&(h=h.concat(Object.keys(l).filter(v=>l[v]._button.tool==="options"))),this.options.customControls===!1&&(h=h.concat(Object.keys(l).filter(v=>l[v]._button.tool==="custom")));for(let v in l)if(this.options[v]&&h.indexOf(v)===-1){let x=l[v]._button.tool;x||(x="draw"),l[v].setPosition(this._getBtnPosition(x)),l[v].addTo(this.map)}},_getBtnPosition(l){return this.options.positions&&this.options.positions[l]?this.options.positions[l]:this.options.position},setBlockPosition(l,h){this.options.positions[l]=h,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(l,h){if(h)typeof h!="object"&&(h={name:h});else throw new TypeError("Button has no name");let v=this._btnNameMapping(l);if(!h.name)throw new TypeError("Button has no name");if(this.buttons[h.name])throw new TypeError("Button with this name already exists");let x=this.map.pm.Draw.createNewDrawInstance(h.name,v);h={...this.buttons[v]._button,...h};let C=this.createCustomControl(h);return{drawInstance:x,control:C}},createCustomControl(l){if(!l.name)throw new TypeError("Button has no name");if(this.buttons[l.name])throw new TypeError("Button with this name already exists");l.onClick||(l.onClick=()=>{}),l.afterClick||(l.afterClick=()=>{}),l.toggle!==!1&&(l.toggle=!0),l.block&&(l.block=l.block.toLowerCase()),(!l.block||l.block==="draw")&&(l.block=""),l.className?l.className.indexOf("control-icon")===-1&&(l.className=`control-icon ${l.className}`):l.className="control-icon";let h={tool:l.block,className:l.className,title:l.title||"",jsClass:l.name,onClick:l.onClick,afterClick:l.afterClick,doToggle:l.toggle,toggleStatus:!1,disableOtherButtons:l.disableOtherButtons??!0,disableByOtherButtons:l.disableByOtherButtons??!0,cssToggle:l.toggle,position:this.options.position,actions:l.actions||[],disabled:!!l.disabled};this.options[l.name]!==!1&&(this.options[l.name]=!0);let v=this._addButton(l.name,new L.Control.PMButton(h));return this.changeControlOrder(),v},controlExists(l){return!!this.getButton(l)},getButton(l){return this.getButtons()[l]},getButtonsInBlock(l){let h={};if(l)for(let v in this.getButtons()){let x=this.getButtons()[v];(x._button.tool===l||l==="draw"&&!x._button.tool)&&(h[v]=x)}return h},changeControlOrder(l=[]){let h=this._shapeMapping(),v=[];l.forEach(F=>{h[F]?v.push(h[F]):v.push(F)});let x=this.getButtons(),C={};v.forEach(F=>{x[F]&&(C[F]=x[F])}),Object.keys(x).filter(F=>!x[F]._button.tool||x[F]._button.tool==="draw").forEach(F=>{v.indexOf(F)===-1&&(C[F]=x[F])}),Object.keys(x).filter(F=>x[F]._button.tool==="edit").forEach(F=>{v.indexOf(F)===-1&&(C[F]=x[F])}),Object.keys(x).filter(F=>x[F]._button.tool==="options").forEach(F=>{v.indexOf(F)===-1&&(C[F]=x[F])}),Object.keys(x).filter(F=>x[F]._button.tool==="custom").forEach(F=>{v.indexOf(F)===-1&&(C[F]=x[F])}),Object.keys(x).forEach(F=>{v.indexOf(F)===-1&&(C[F]=x[F])}),this.map.pm.Toolbar.buttons=C,this._showHideButtons()},getControlOrder(){let l=this.getButtons(),h=[];for(let v in l)h.push(v);return h},changeActionsOfControl(l,h){let v=this._btnNameMapping(l);if(!v)throw new TypeError("No name passed");if(!h)throw new TypeError("No actions passed");if(!this.buttons[v])throw new TypeError("Button with this name not exists");this.buttons[v]._button.actions=h,this.changeControlOrder()},setButtonDisabled(l,h){let v=this._btnNameMapping(l);h?this.buttons[v].disable():this.buttons[v].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(l){let h=this._shapeMapping();return h[l]?h[l]:l}}),ll=Vo,ul=f(Di()),yi={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(l){l.forEach(h=>{if(Array.isArray(h)){this._assignEvents(h);return}h.off("drag",this._handleSnapping,this),h.on("drag",this._handleSnapping,this),h.off("dragend",this._cleanupSnapping,this),h.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(l){if(l){let h=l.target;h._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(h=>{h.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(l){var re,he,Le;let h=l.target;if(h._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((re=l==null?void 0:l.originalEvent)==null?void 0:re.altKey)||((Le=(he=this._map)==null?void 0:he.pm)==null?void 0:Le.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let v=this._calcClosestLayer(h.getLatLng(),this._snapList);if(Object.keys(v).length===0)return!1;let x=v.layer instanceof L.Marker||v.layer instanceof L.CircleMarker||!this.options.snapSegment,C;x?C=v.latlng:C=this._checkPrioritiySnapping(v);let F=this.options.snapDistance,Q={marker:h,shape:this._shape,snapLatLng:C,segment:v.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:v.layer,distance:v.distance};if(this._fireSnapDrag(Q.marker,Q),this._fireSnapDrag(this._layer,Q),v.distance<F){h._orgLatLng=h.getLatLng(),h.setLatLng(C),h._snapped=!0,h._snapInfo=Q;let Je=()=>{this._snapLatLng=C,this._fireSnap(h,Q),this._fireSnap(this._layer,Q)},ze=this._snapLatLng||{},vt=C||{};(ze.lat!==vt.lat||ze.lng!==vt.lng)&&Je()}else this._snapLatLng&&(this._unsnap(Q),h._snapped=!1,h._snapInfo=void 0,this._fireUnsnap(Q.marker,Q),this._fireUnsnap(this._layer,Q));return!0},_createSnapList(){let l=[],h=[],v=this._map;v.off("layerremove",this._handleSnapLayerRemoval,this),v.on("layerremove",this._handleSnapLayerRemoval,this),v.eachLayer(x=>{if((x instanceof L.Polyline||x instanceof L.Marker||x instanceof L.CircleMarker||x instanceof L.ImageOverlay)&&x.options.snapIgnore!==!0){if(x.options.snapIgnore===void 0&&(!L.PM.optIn&&x.options.pmIgnore===!0||L.PM.optIn&&x.options.pmIgnore!==!1))return;(x instanceof L.Circle||x instanceof L.CircleMarker)&&x.pm&&x.pm._hiddenPolyCircle?l.push(x.pm._hiddenPolyCircle):x instanceof L.ImageOverlay&&(x=L.rectangle(x.getBounds())),l.push(x);let C=L.polyline([],{color:"red",pmIgnore:!0});C._pmTempLayer=!0,h.push(C),(x instanceof L.Circle||x instanceof L.CircleMarker)&&h.push(C)}}),l=l.filter(x=>this._layer!==x),l=l.filter(x=>x._latlng||x._latlngs&&Qi(x._latlngs)),l=l.filter(x=>!x._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let x=L.polyline([],{color:"red",pmIgnore:!0});x._pmTempLayer=!0,h.push(x)}),this._snapList=l.concat(this._otherSnapLayers)):this._snapList=l,this.debugIndicatorLines=h},_handleSnapLayerRemoval({layer:l}){if(!l._leaflet_id)return;let h=this._snapList.findIndex(v=>v._leaflet_id===l._leaflet_id);h>-1&&this._snapList.splice(h,1)},_calcClosestLayer(l,h){return this._calcClosestLayers(l,h,1)[0]},_calcClosestLayers(l,h,v=1){let x=[],C={};h.forEach((Q,re)=>{var Le;if(Q._parentCopy&&Q._parentCopy===this._layer||((Le=Q.getLatLngs)==null?void 0:Le.call(Q).flat(5).length)<2)return;let he=this._calcLayerDistances(l,Q);if(he.distance=Math.floor(he.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[re]){let Je=L.polyline([],{color:"red",pmIgnore:!0});Je._pmTempLayer=!0,this.debugIndicatorLines[re]=Je}this.debugIndicatorLines[re].setLatLngs([l,he.latlng])}v===1&&(C.distance===void 0||he.distance-5<=C.distance)?(he.distance+5<C.distance&&(x=[]),C=he,C.layer=Q,x.push(C)):v!==1&&(C={},C=he,C.layer=Q,x.push(C))}),v!==1&&(x=x.sort((Q,re)=>Q.distance-re.distance)),v===-1&&(v=x.length);let F=this._getClosestLayerByPriority(x,v);return L.Util.isArray(F)?F:[F]},_calcLayerDistances(l,h){let v=this._map,x=h instanceof L.Marker||h instanceof L.CircleMarker,C=h instanceof L.Polygon,F=l;if(x){let Q=h.getLatLng();return{latlng:{...Q},distance:this._getDistance(v,Q,F)}}return this._calcLatLngDistances(F,h.getLatLngs(),v,C)},_calcLatLngDistances(l,h,v,x=!1){let C,F,Q,re=he=>{he.forEach((Le,Je)=>{if(Array.isArray(Le)){re(Le);return}if(this.options.snapSegment){let ze=Le,vt;x?vt=Je+1===he.length?0:Je+1:vt=Je+1===he.length?void 0:Je+1;let At=he[vt];if(At){let Jt=this._getDistanceToSegment(v,l,ze,At);(F===void 0||Jt<F)&&(F=Jt,Q=[ze,At])}}else{let ze=this._getDistance(v,l,Le);(F===void 0||ze<F)&&(F=ze,C=Le)}})};return re(h),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(v,l,Q[0],Q[1])},segment:Q,distance:F}:{latlng:C,distance:F}},_getClosestLayerByPriority(l,h=1){l=l.sort((Q,re)=>Q._leaflet_id-re._leaflet_id);let v=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],x=this._map.pm.globalOptions.snappingOrder||[],C=0,F={};return x.concat(v).forEach(Q=>{F[Q]||(C+=1,F[Q]=C)}),l.sort(Bl("instanceofShape",F)),h===1?l[0]||{}:l.slice(0,h)},_checkPrioritiySnapping(l){let h=this._map,v=l.segment[0],x=l.segment[1],C=l.latlng,F=C;if(this.options.snapVertex){let Q=this._getDistance(h,v,C),re=this._getDistance(h,x,C),he=Q<re?v:x,Le=Q<re?Q:re;if(this.options.snapMiddle){let ze=L.PM.Utils.calcMiddleLatLng(h,v,x),vt=this._getDistance(h,ze,C);vt<Q&&vt<re&&(he=ze,Le=vt)}let Je=this.options.snapDistance;Le<Je&&(F=he)}return{...F}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(l,h,v,x){let C=l.getMaxZoom();C===1/0&&(C=l.getZoom());let F=l.project(h,C),Q=l.project(v,C),re=l.project(x,C),he=L.LineUtil.closestPointOnSegment(F,Q,re);return l.unproject(he,C)},_getDistanceToSegment(l,h,v,x){let C=l.latLngToContainerPoint(h),F=l.latLngToContainerPoint(v),Q=l.latLngToContainerPoint(x);return L.LineUtil.pointToSegmentDistance(C,F,Q)},_getDistance(l,h,v){return l.latLngToContainerPoint(h).distanceTo(l.latLngToContainerPoint(v))}},xo=yi,_a=L.Class.extend({includes:[xo,Tl],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(l){L.Util.setOptions(this,l),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(l){let h=new L.Icon.Default;h.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=h,this._map=l,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(v=>{this[v]=new L.PM.Draw[v](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(l,h=!1){h?this.options.pathOptions=(0,ul.default)(this.options.pathOptions,l):this.options.pathOptions=l},getShapes(){return this.shapes},getShape(){return this._shape},enable(l,h){if(!l)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[l].enable(h)},disable(){this.shapes.forEach(l=>{this[l].disable()})},addControls(){this.shapes.forEach(l=>{this[l].addButton()})},getActiveShape(){let l;return this.shapes.forEach(h=>{this[h]._enabled&&(l=h)}),l},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let l=[];this._map.eachLayer(h=>{(h instanceof L.Polyline||h instanceof L.Marker||h instanceof L.Circle||h instanceof L.CircleMarker||h instanceof L.ImageOverlay)&&(h._pmTempLayer||l.push(h))}),this._enabled?l.forEach(h=>{L.PM.Utils.disablePopup(h)}):l.forEach(h=>{L.PM.Utils.enablePopup(h)})},createNewDrawInstance(l,h){let v=this._getShapeFromBtnName(h);if(this[l])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[v])throw new TypeError(`There is no class L.PM.Draw.${v}`);return this[l]=new L.PM.Draw[v](this._map),this[l].toolbarButtonName=l,this[l]._shape=l,this.shapes.push(l),this[h]&&this[l].setOptions(this[h].options),this[l].setOptions(this[l].options),this[l]},_getShapeFromBtnName(l){let h={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return h[l]?h[l]:this[l]?this[l]._shape:l},_finishLayer(l){l.pm&&(l.pm.setOptions(this.options),l.pm._shape=this._shape,l.pm._map=this._map),this._addDrawnLayerProp(l)},_addDrawnLayerProp(l){l._drawnByGeoman=!0},_setPane(l,h){h==="layerPane"?l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":h==="vertexPane"?l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":h==="markerPane"&&(l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),es=_a;es.Marker=es.extend({initialize(l){this._map=l,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(l){L.Util.setOptions(this,l),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(ir("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(l=>{this.isRelevantMarker(l)&&l.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},isRelevantMarker(l){return l instanceof L.Marker&&l.pm&&!l._pmTempLayer&&!l.pm._initTextMarker},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this.options.snappable){let h=l;h.target=this._hintMarker,this._handleSnapping(h)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(l){if(!l.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._hintMarker.getLatLng(),v=new L.Marker(h,this.options.markerStyle);this._setPane(v,"markerPane"),this._finishLayer(v),v.pm||(v.options.draggable=!1),v.addTo(this._map.pm._getContainingLayer()),v.pm&&this.options.markerEditable?v.pm.enable():v.dragging&&v.dragging.disable(),this._fireCreate(v),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var l,h;(l=this.options.markerStyle)!=null&&l.icon&&((h=this._hintMarker)==null||h.setIcon(this.options.markerStyle.icon))}});var D=63710088e-1,_e={centimeters:D*100,centimetres:D*100,degrees:D/111325,feet:D*3.28084,inches:D*39.37,kilometers:D/1e3,kilometres:D/1e3,meters:D,metres:D,miles:D/1609.344,millimeters:D*1e3,millimetres:D*1e3,nauticalmiles:D/1852,radians:1,yards:D*1.0936};function Ze(l,h,v){v===void 0&&(v={});var x={type:"Feature"};return(v.id===0||v.id)&&(x.id=v.id),v.bbox&&(x.bbox=v.bbox),x.properties=h||{},x.geometry=l,x}function ut(l,h,v){if(v===void 0&&(v={}),!l)throw new Error("coordinates is required");if(!Array.isArray(l))throw new Error("coordinates must be an Array");if(l.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!vr(l[0])||!vr(l[1]))throw new Error("coordinates must contain numbers");var x={type:"Point",coordinates:l};return Ze(x,h,v)}function xt(l,h,v){if(v===void 0&&(v={}),l.length<2)throw new Error("coordinates must be an array of two or more positions");var x={type:"LineString",coordinates:l};return Ze(x,h,v)}function jt(l,h){h===void 0&&(h={});var v={type:"FeatureCollection"};return h.id&&(v.id=h.id),h.bbox&&(v.bbox=h.bbox),v.features=l,v}function cn(l,h){h===void 0&&(h="kilometers");var v=_e[h];if(!v)throw new Error(h+" units is invalid");return l*v}function Tn(l,h){h===void 0&&(h="kilometers");var v=_e[h];if(!v)throw new Error(h+" units is invalid");return l/v}function jn(l){var h=l%(2*Math.PI);return h*180/Math.PI}function tr(l){var h=l%360;return h*Math.PI/180}function vr(l){return!isNaN(l)&&l!==null&&!Array.isArray(l)}function zr(l){var h,v,x={type:"FeatureCollection",features:[]};if(l.type==="Feature"?v=l.geometry:v=l,v.type==="LineString")h=[v.coordinates];else if(v.type==="MultiLineString")h=v.coordinates;else if(v.type==="MultiPolygon")h=[].concat.apply([],v.coordinates);else if(v.type==="Polygon")h=v.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return h.forEach(function(C){h.forEach(function(F){for(var Q=0;Q<C.length-1;Q++)for(var re=Q;re<F.length-1;re++)if(!(C===F&&(Math.abs(Q-re)===1||Q===0&&re===C.length-2&&C[Q][0]===C[C.length-1][0]&&C[Q][1]===C[C.length-1][1]))){var he=Ri(C[Q][0],C[Q][1],C[Q+1][0],C[Q+1][1],F[re][0],F[re][1],F[re+1][0],F[re+1][1]);he&&x.features.push(ut([he[0],he[1]]))}})}),x}function Ri(l,h,v,x,C,F,Q,re){var he,Le,Je,ze,vt,At={x:null,y:null,onLine1:!1,onLine2:!1};return he=(re-F)*(v-l)-(Q-C)*(x-h),he===0?At.x!==null&&At.y!==null?At:!1:(Le=h-F,Je=l-C,ze=(Q-C)*Le-(re-F)*Je,vt=(v-l)*Le-(x-h)*Je,Le=ze/he,Je=vt/he,At.x=l+Le*(v-l),At.y=h+Le*(x-h),Le>=0&&Le<=1&&(At.onLine1=!0),Je>=0&&Je<=1&&(At.onLine2=!0),At.onLine1&&At.onLine2?[At.x,At.y]:!1)}es.Line=es.extend({initialize(l){this._map=l,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(l){L.Util.setOptions(this,l),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(ir("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},_syncHintLine(){let l=this._layer.getLatLngs();if(l.length>0){let h=l[l.length-1];this._hintline.setLatLngs([h,this._hintMarker.getLatLng()])}},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this.options.snappable){let v=l;v.target=this._hintMarker,this._handleSnapping(v)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let h=this._layer._defaultShape().slice();h.push(this._hintMarker.getLatLng()),this._change(h)},hasSelfIntersection(){return zr(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(l,h){let v=L.polyline(this._layer.getLatLngs());l&&(h||(h=this._hintMarker.getLatLng()),v.addLatLng(h));let x=zr(v.toGeoJSON(15));this._doesSelfIntersect=x.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(x,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(l){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,l.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._hintMarker.getLatLng(),v=this._layer.getLatLngs(),x=v[v.length-1];if(h.equals(v[0])||v.length>0&&h.equals(x)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:h,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(h);let C=this._createMarker(h);this._setTooltipText(),this._setHintLineAfterNewVertex(h),this._fireVertexAdded(C,void 0,h,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(l)},_setHintLineAfterNewVertex(l){this._hintline.setLatLngs([l,l])},_removeLastVertex(){let l=this._markers;if(l.length<=1){this.disable();return}let h=this._layer.getLatLngs(),v=l[l.length-1],{indexPath:x}=L.PM.Utils.findDeepMarkerIndex(l,v);l.pop(),this._layerGroup.removeLayer(v);let C=l[l.length-1],F=h.indexOf(C.getLatLng());h=h.slice(0,F+1),this._layer.setLatLngs(h),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(v,x,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let l=this._layer.getLatLngs();if(l.length<=1)return;let h=L.polyline(l,this.options.pathOptions);this._setPane(h,"layerPane"),this._finishLayer(h),h.addTo(this._map.pm._getContainingLayer()),this._fireCreate(h),this.options.snappable&&this._cleanupSnapping();let v=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(v))},_createMarker(l){let h=new L.Marker(l,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._pmTempLayer=!0,this._layerGroup.addLayer(h),this._markers.push(h),h.on("click",this._finishShape,this),h},_setTooltipText(){let{length:l}=this._layer.getLatLngs().flat(),h="";l<=1?h=ir("tooltips.continueLine"):h=ir("tooltips.finishLine"),this._hintMarker.setTooltipContent(h)},_change(l){this._fireChange(l,"Draw")},setStyle(){var l,h;(l=this._layer)==null||l.setStyle(this.options.templineStyle),(h=this._hintline)==null||h.setStyle(this.options.hintlineStyle)}}),es.Polygon=es.Line.extend({initialize(l){this._map=l,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(l){L.PM.Draw.Line.prototype.enable.call(this,l),this._layer.pm._shape="Polygon"},_createMarker(l){let h=new L.Marker(l,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._pmTempLayer=!0,this._layerGroup.addLayer(h),this._markers.push(h),this._layer.getLatLngs().flat().length===1?(h.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(h)-1,this.options.snappable&&this._cleanupSnapping()):h.on("click",()=>1),h},_setTooltipText(){let{length:l}=this._layer.getLatLngs().flat(),h="";l<=2?h=ir("tooltips.continueLine"):h=ir("tooltips.finishPoly"),this._hintMarker.setTooltipContent(h)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let l=this._layer.getLatLngs();if(l.length<=2)return;let h=L.polygon(l,this.options.pathOptions);this._setPane(h,"layerPane"),this._finishLayer(h),h.addTo(this._map.pm._getContainingLayer()),this._fireCreate(h),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let v=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(v))}}),es.Rectangle=es.extend({initialize(l){this._map=l,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(l){if(L.Util.setOptions(this,l),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(ir("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let h=0;h<2;h+=1){let v=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(v,"vertexPane"),v._pmTempLayer=!0,this._layerGroup.addLayer(v),this._styleMarkers.push(v)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},_placeStartingMarkers(l){this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(h),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(v=>{L.DomUtil.addClass(v._icon,"visible"),v.setLatLng(h)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(ir("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let l=this._startMarker.getLatLng();l&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([l,l]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this.options.snappable){let v=l;v.target=this._hintMarker,this._handleSnapping(v)}let h=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(h,"Draw")},_syncRectangleSize(){let l=Nl(this._startMarker.getLatLng(),this._map),h=Nl(this._hintMarker.getLatLng(),this._map),v=L.PM.Utils._getRotatedRectangle(l,h,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(v),this.options.cursorMarker&&this._styleMarkers){let x=[];v.forEach(C=>{!C.equals(l,1e-8)&&!C.equals(h,1e-8)&&x.push(C)}),x.forEach((C,F)=>{try{this._styleMarkers[F].setLatLng(C)}catch{}})}},_findCorners(){let l=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(l[0],l[2],this.options.rectangleAngle||0,this._map)},_finishShape(l){this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._hintMarker.getLatLng(),v=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||v.equals(h))return;let x=L.rectangle([v,h],this.options.pathOptions);if(this.options.rectangleAngle){let F=L.PM.Utils._getRotatedRectangle(v,h,this.options.rectangleAngle||0,this._map);x.setLatLngs(F),x.pm&&x.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(x,"layerPane"),this._finishLayer(x),x.addTo(this._map.pm._getContainingLayer()),this._fireCreate(x);let C=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(C))},setStyle(){var l;(l=this._layer)==null||l.setStyle(this.options.pathOptions)}}),es.CircleMarker=es.extend({initialize(l){this._map=l,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(l){if(L.Util.setOptions(this,l),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let h={};L.extend(h,this.options.templineStyle),h.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),h),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(ir("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(ir("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(l=>{this.isRelevantMarker(l)&&l.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(l=>{this.isRelevantMarker(l)&&l.pm.disable()})},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},_placeCenterMarker(l){this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let h=this._hintMarker.getLatLng();this._centerMarker.setLatLng(h),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let l=this._centerMarker.getLatLng();l&&(this._layer.setLatLng(l),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(ir("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let l=this._centerMarker.getLatLng(),h=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([l,h])},_syncCircleRadius(){let l=this._centerMarker.getLatLng(),h=this._hintMarker.getLatLng(),v=this._distanceCalculation(l,h);this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(v)},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let v=l;v.target=this._hintMarker,this._handleSnapping(v)}this._handleHintMarkerSnapping();let h=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(h,"Draw")},isRelevantMarker(l){return l instanceof L.CircleMarker&&!(l instanceof L.Circle)&&l.pm&&!l._pmTempLayer},_createMarker(l){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!l.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._hintMarker.getLatLng(),v=new this._BaseCircleClass(h,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(v,"layerPane"),this._finishLayer(v),v.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(v),this._fireCreate(v),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(l){l.pm&&this.options.markerEditable&&l.pm.enable()},_finishShape(l){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._centerMarker.getLatLng(),v=this._defaultRadius;if(this.options[this._editableOption]){let Q=this._hintMarker.getLatLng();v=this._distanceCalculation(h,Q),this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?v=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]&&(v=this.options[this._maxRadiusOption])}let x={...this.options.pathOptions,radius:v},C=new this._BaseCircleClass(h,x);this._setPane(C,"layerPane"),this._finishLayer(C),C.addTo(this._map.pm._getContainingLayer()),C.pm&&C.pm._updateHiddenPolyCircle(),this._fireCreate(C);let F=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(F))},_getNewDestinationOfHintMarker(){let l=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return l;let h=this._centerMarker.getLatLng(),v=this._distanceCalculation(h,l);this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?l=Dl(this._map,h,l,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]&&(l=Dl(this._map,h,l,this._getMaxDistanceInMeter()))}return l},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let l=this._centerMarker.getLatLng(),h=this._hintMarker.getLatLng(),v=this._distanceCalculation(l,h);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var h,v;let l={};L.extend(l,this.options.templineStyle),this.options[this._editableOption]&&(l.radius=0),(h=this._layer)==null||h.setStyle(l),(v=this._hintline)==null||v.setStyle(this.options.hintlineStyle)},_distanceCalculation(l,h){return this._map.project(l).distanceTo(this._map.project(h))}}),es.Circle=es.CircleMarker.extend({initialize(l){this._map=l,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(l,h){return this._map.distance(l,h)}});function hi(l){if(!l)throw new Error("coord is required");if(!Array.isArray(l)){if(l.type==="Feature"&&l.geometry!==null&&l.geometry.type==="Point")return l.geometry.coordinates;if(l.type==="Point")return l.coordinates}if(Array.isArray(l)&&l.length>=2&&!Array.isArray(l[0])&&!Array.isArray(l[1]))return l;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function _i(l){if(Array.isArray(l))return l;if(l.type==="Feature"){if(l.geometry!==null)return l.geometry.coordinates}else if(l.coordinates)return l.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function ts(l){return l.type==="Feature"?l.geometry:l}function ls(l,h){return l.type==="FeatureCollection"?"FeatureCollection":l.type==="GeometryCollection"?"GeometryCollection":l.type==="Feature"&&l.geometry!==null?l.geometry.type:l.type}function Lo(l,h,v){if(l!==null)for(var x,C,F,Q,re,he,Le,Je=0,ze=0,vt,At=l.type,Jt=At==="FeatureCollection",yn=At==="Feature",bn=Jt?l.features.length:1,ur=0;ur<bn;ur++){Le=Jt?l.features[ur].geometry:yn?l.geometry:l,vt=Le?Le.type==="GeometryCollection":!1,re=vt?Le.geometries.length:1;for(var Ye=0;Ye<re;Ye++){var tt=0,ft=0;if(Q=vt?Le.geometries[Ye]:Le,Q!==null){he=Q.coordinates;var Nt=Q.type;switch(Je=0,Nt){case null:break;case"Point":if(h(he,ze,ur,tt,ft)===!1)return!1;ze++,tt++;break;case"LineString":case"MultiPoint":for(x=0;x<he.length;x++){if(h(he[x],ze,ur,tt,ft)===!1)return!1;ze++,Nt==="MultiPoint"&&tt++}Nt==="LineString"&&tt++;break;case"Polygon":case"MultiLineString":for(x=0;x<he.length;x++){for(C=0;C<he[x].length-Je;C++){if(h(he[x][C],ze,ur,tt,ft)===!1)return!1;ze++}Nt==="MultiLineString"&&tt++,Nt==="Polygon"&&ft++}Nt==="Polygon"&&tt++;break;case"MultiPolygon":for(x=0;x<he.length;x++){for(ft=0,C=0;C<he[x].length;C++){for(F=0;F<he[x][C].length-Je;F++){if(h(he[x][C][F],ze,ur,tt,ft)===!1)return!1;ze++}ft++}tt++}break;case"GeometryCollection":for(x=0;x<Q.geometries.length;x++)if(Lo(Q.geometries[x],h)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function $r(l,h){if(l.type==="Feature")h(l,0);else if(l.type==="FeatureCollection")for(var v=0;v<l.features.length&&h(l.features[v],v)!==!1;v++);}function Is(l,h,v){var x=v;return $r(l,function(C,F){F===0&&v===void 0?x=C:x=h(x,C,F)}),x}function cl(l,h){var v,x,C,F,Q,re,he,Le,Je,ze,vt=0,At=l.type==="FeatureCollection",Jt=l.type==="Feature",yn=At?l.features.length:1;for(v=0;v<yn;v++){for(re=At?l.features[v].geometry:Jt?l.geometry:l,Le=At?l.features[v].properties:Jt?l.properties:{},Je=At?l.features[v].bbox:Jt?l.bbox:void 0,ze=At?l.features[v].id:Jt?l.id:void 0,he=re?re.type==="GeometryCollection":!1,Q=he?re.geometries.length:1,C=0;C<Q;C++){if(F=he?re.geometries[C]:re,F===null){if(h(null,vt,Le,Je,ze)===!1)return!1;continue}switch(F.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(h(F,vt,Le,Je,ze)===!1)return!1;break}case"GeometryCollection":{for(x=0;x<F.geometries.length;x++)if(h(F.geometries[x],vt,Le,Je,ze)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}vt++}}function Ys(l,h){cl(l,function(v,x,C,F,Q){var re=v===null?null:v.type;switch(re){case null:case"Point":case"LineString":case"Polygon":return h(Ze(v,C,{bbox:F,id:Q}),x,0)===!1?!1:void 0}var he;switch(re){case"MultiPoint":he="Point";break;case"MultiLineString":he="LineString";break;case"MultiPolygon":he="Polygon";break}for(var Le=0;Le<v.coordinates.length;Le++){var Je=v.coordinates[Le],ze={type:he,coordinates:Je};if(h(Ze(ze,C),x,Le)===!1)return!1}})}function eu(l){if(!l)throw new Error("geojson is required");var h=[];return Ys(l,function(v){ea(v,h)}),jt(h)}function ea(l,h){var v=[],x=l.geometry;if(x!==null){switch(x.type){case"Polygon":v=_i(x);break;case"LineString":v=[_i(x)]}v.forEach(function(C){var F=wu(C,l.properties);F.forEach(function(Q){Q.id=h.length,h.push(Q)})})}}function wu(l,h){var v=[];return l.reduce(function(x,C){var F=xt([x,C],h);return F.bbox=Va(x,C),v.push(F),C}),v}function Va(l,h){var v=l[0],x=l[1],C=h[0],F=h[1],Q=v<C?v:C,re=x<F?x:F,he=v>C?v:C,Le=x>F?x:F;return[Q,re,he,Le]}var Ha=eu,us=f(Lr(),1);function ta(l,h){var v={},x=[];if(l.type==="LineString"&&(l=Ze(l)),h.type==="LineString"&&(h=Ze(h)),l.type==="Feature"&&h.type==="Feature"&&l.geometry!==null&&h.geometry!==null&&l.geometry.type==="LineString"&&h.geometry.type==="LineString"&&l.geometry.coordinates.length===2&&h.geometry.coordinates.length===2){var C=So(l,h);return C&&x.push(C),jt(x)}var F=(0,us.default)();return F.load(Ha(h)),$r(Ha(l),function(Q){$r(F.search(Q),function(re){var he=So(Q,re);if(he){var Le=_i(he).join(",");v[Le]||(v[Le]=!0,x.push(he))}})}),jt(x)}function So(l,h){var v=_i(l),x=_i(h);if(v.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(x.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var C=v[0][0],F=v[0][1],Q=v[1][0],re=v[1][1],he=x[0][0],Le=x[0][1],Je=x[1][0],ze=x[1][1],vt=(ze-Le)*(Q-C)-(Je-he)*(re-F),At=(Je-he)*(F-Le)-(ze-Le)*(C-he),Jt=(Q-C)*(F-Le)-(re-F)*(C-he);if(vt===0)return null;var yn=At/vt,bn=Jt/vt;if(yn>=0&&yn<=1&&bn>=0&&bn<=1){var ur=C+yn*(Q-C),Ye=F+yn*(re-F);return ut([ur,Ye])}return null}var lo=ta,fl=f(Lr(),1);function Rs(l,h,v){v===void 0&&(v={});var x=hi(l),C=hi(h),F=tr(C[1]-x[1]),Q=tr(C[0]-x[0]),re=tr(x[1]),he=tr(C[1]),Le=Math.pow(Math.sin(F/2),2)+Math.pow(Math.sin(Q/2),2)*Math.cos(re)*Math.cos(he);return cn(2*Math.atan2(Math.sqrt(Le),Math.sqrt(1-Le)),v.units)}var Js=Rs;function Xs(l){var h=l[0],v=l[1],x=l[2],C=l[3],F=Js(l.slice(0,2),[x,v]),Q=Js(l.slice(0,2),[h,C]);if(F>=Q){var re=(v+C)/2;return[h,re-(x-h)/2,x,re+(x-h)/2]}else{var he=(h+x)/2;return[he-(C-v)/2,v,he+(C-v)/2,C]}}var Yu=Xs;function _s(l){var h=[1/0,1/0,-1/0,-1/0];return Lo(l,function(v){h[0]>v[0]&&(h[0]=v[0]),h[1]>v[1]&&(h[1]=v[1]),h[2]<v[0]&&(h[2]=v[0]),h[3]<v[1]&&(h[3]=v[1])}),h}_s.default=_s;var ba=_s;function Fs(l,h){h===void 0&&(h={});var v=h.precision,x=h.coordinates,C=h.mutate;if(v=v==null||isNaN(v)?6:v,x=x==null||isNaN(x)?3:x,!l)throw new Error("<geojson> is required");if(typeof v!="number")throw new Error("<precision> must be a number");if(typeof x!="number")throw new Error("<coordinates> must be a number");(C===!1||C===void 0)&&(l=JSON.parse(JSON.stringify(l)));var F=Math.pow(10,v);return Lo(l,function(Q){js(Q,F,x)}),l}function js(l,h,v){l.length>v&&l.splice(v,l.length);for(var x=0;x<l.length;x++)l[x]=Math.round(l[x]*h)/h;return l}var wa=Fs;function xa(l,h,v){if(v===void 0&&(v={}),v.final===!0)return zs(l,h);var x=hi(l),C=hi(h),F=tr(x[0]),Q=tr(C[0]),re=tr(x[1]),he=tr(C[1]),Le=Math.sin(Q-F)*Math.cos(he),Je=Math.cos(re)*Math.sin(he)-Math.sin(re)*Math.cos(he)*Math.cos(Q-F);return jn(Math.atan2(Le,Je))}function zs(l,h){var v=xa(h,l);return v=(v+180)%360,v}function Ss(l,h,v,x){x===void 0&&(x={});var C=hi(l),F=tr(C[0]),Q=tr(C[1]),re=tr(v),he=Tn(h,x.units),Le=Math.asin(Math.sin(Q)*Math.cos(he)+Math.cos(Q)*Math.sin(he)*Math.cos(re)),Je=F+Math.atan2(Math.sin(re)*Math.sin(he)*Math.cos(Q),Math.cos(he)-Math.sin(Q)*Math.sin(Le)),ze=jn(Je),vt=jn(Le);return ut([ze,vt],x.properties)}function na(l,h,v){v===void 0&&(v={});var x=ut([1/0,1/0],{dist:1/0}),C=0;return Ys(l,function(F){for(var Q=_i(F),re=0;re<Q.length-1;re++){var he=ut(Q[re]);he.properties.dist=Js(h,he,v);var Le=ut(Q[re+1]);Le.properties.dist=Js(h,Le,v);var Je=Js(he,Le,v),ze=Math.max(he.properties.dist,Le.properties.dist),vt=xa(he,Le),At=Ss(h,ze,vt+90,v),Jt=Ss(h,ze,vt-90,v),yn=lo(xt([At.geometry.coordinates,Jt.geometry.coordinates]),xt([he.geometry.coordinates,Le.geometry.coordinates])),bn=null;yn.features.length>0&&(bn=yn.features[0],bn.properties.dist=Js(h,bn,v),bn.properties.location=C+Js(he,bn,v)),he.properties.dist<x.properties.dist&&(x=he,x.properties.index=re,x.properties.location=C),Le.properties.dist<x.properties.dist&&(x=Le,x.properties.index=re+1,x.properties.location=C+Je),bn&&bn.properties.dist<x.properties.dist&&(x=bn,x.properties.index=re),C+=Je}}),x}var Co=na;function $s(l,h){if(!l)throw new Error("line is required");if(!h)throw new Error("splitter is required");var v=ls(l),x=ls(h);if(v!=="LineString")throw new Error("line must be LineString");if(x==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(x==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var C=wa(h,{precision:7});switch(x){case"Point":return qt(l,C);case"MultiPoint":return _t(l,C);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return _t(l,lo(l,C))}}function _t(l,h){var v=[],x=(0,fl.default)();return Ys(h,function(C){if(v.forEach(function(re,he){re.id=he}),!v.length)v=qt(l,C).features,v.forEach(function(re){re.bbox||(re.bbox=Yu(ba(re)))}),x.load(jt(v));else{var F=x.search(C);if(F.features.length){var Q=Mt(C,F);v=v.filter(function(re){return re.id!==Q.id}),x.remove(Q),$r(qt(Q,C),function(re){v.push(re),x.insert(re)})}}}),jt(v)}function qt(l,h){var v=[],x=_i(l)[0],C=_i(l)[l.geometry.coordinates.length-1];if(Pn(x,hi(h))||Pn(C,hi(h)))return jt([l]);var F=(0,fl.default)(),Q=Ha(l);F.load(Q);var re=F.search(h);if(!re.features.length)return jt([l]);var he=Mt(h,re),Le=[x],Je=Is(Q,function(ze,vt,At){var Jt=_i(vt)[1],yn=hi(h);return At===he.id?(ze.push(yn),v.push(xt(ze)),Pn(yn,Jt)?[yn]:[yn,Jt]):(ze.push(Jt),ze)},Le);return Je.length>1&&v.push(xt(Je)),jt(v)}function Mt(l,h){if(!h.features.length)throw new Error("lines must contain features");if(h.features.length===1)return h.features[0];var v,x=1/0;return $r(h,function(C){var F=Co(C,l),Q=F.properties.dist;Q<x&&(v=C,x=Q)}),v}function Pn(l,h){return l[0]===h[0]&&l[1]===h[1]}var Zn=$s;function wr(l,h,v){if(v===void 0&&(v={}),!l)throw new Error("point is required");if(!h)throw new Error("polygon is required");var x=hi(l),C=ts(h),F=C.type,Q=h.bbox,re=C.coordinates;if(Q&&bi(x,Q)===!1)return!1;F==="Polygon"&&(re=[re]);for(var he=!1,Le=0;Le<re.length&&!he;Le++)if(ji(x,re[Le][0],v.ignoreBoundary)){for(var Je=!1,ze=1;ze<re[Le].length&&!Je;)ji(x,re[Le][ze],!v.ignoreBoundary)&&(Je=!0),ze++;Je||(he=!0)}return he}function ji(l,h,v){var x=!1;h[0][0]===h[h.length-1][0]&&h[0][1]===h[h.length-1][1]&&(h=h.slice(0,h.length-1));for(var C=0,F=h.length-1;C<h.length;F=C++){var Q=h[C][0],re=h[C][1],he=h[F][0],Le=h[F][1],Je=l[1]*(Q-he)+re*(he-l[0])+Le*(l[0]-Q)===0&&(Q-l[0])*(he-l[0])<=0&&(re-l[1])*(Le-l[1])<=0;if(Je)return!v;var ze=re>l[1]!=Le>l[1]&&l[0]<(he-Q)*(l[1]-re)/(Le-re)+Q;ze&&(x=!x)}return x}function bi(l,h){return h[0]<=l[0]&&h[1]<=l[1]&&h[2]>=l[0]&&h[3]>=l[1]}function Il(l,h,v){v===void 0&&(v={});for(var x=hi(l),C=_i(h),F=0;F<C.length-1;F++){var Q=!1;if(v.ignoreEndVertices&&(F===0&&(Q="start"),F===C.length-2&&(Q="end"),F===0&&F+1===C.length-1&&(Q="both")),Qs(C[F],C[F+1],x,Q,typeof v.epsilon>"u"?null:v.epsilon))return!0}return!1}function Qs(l,h,v,x,C){var F=v[0],Q=v[1],re=l[0],he=l[1],Le=h[0],Je=h[1],ze=v[0]-re,vt=v[1]-he,At=Le-re,Jt=Je-he,yn=ze*Jt-vt*At;if(C!==null){if(Math.abs(yn)>C)return!1}else if(yn!==0)return!1;if(x){if(x==="start")return Math.abs(At)>=Math.abs(Jt)?At>0?re<F&&F<=Le:Le<=F&&F<re:Jt>0?he<Q&&Q<=Je:Je<=Q&&Q<he;if(x==="end")return Math.abs(At)>=Math.abs(Jt)?At>0?re<=F&&F<Le:Le<F&&F<=re:Jt>0?he<=Q&&Q<Je:Je<Q&&Q<=he;if(x==="both")return Math.abs(At)>=Math.abs(Jt)?At>0?re<F&&F<Le:Le<F&&F<re:Jt>0?he<Q&&Q<Je:Je<Q&&Q<he}else return Math.abs(At)>=Math.abs(Jt)?At>0?re<=F&&F<=Le:Le<=F&&F<=re:Jt>0?he<=Q&&Q<=Je:Je<=Q&&Q<=he;return!1}var zi=Il;function ra(l,h){var v=ts(l),x=ts(h),C=v.type,F=x.type,Q=v.coordinates,re=x.coordinates;switch(C){case"Point":switch(F){case"Point":return Ei(Q,re);default:throw new Error("feature2 "+F+" geometry not supported")}case"MultiPoint":switch(F){case"Point":return La(v,x);case"MultiPoint":return ia(v,x);default:throw new Error("feature2 "+F+" geometry not supported")}case"LineString":switch(F){case"Point":return zi(x,v,{ignoreEndVertices:!0});case"LineString":return Yr(v,x);case"MultiPoint":return sa(v,x);default:throw new Error("feature2 "+F+" geometry not supported")}case"Polygon":switch(F){case"Point":return wr(x,v,{ignoreBoundary:!0});case"LineString":return Ho(v,x);case"Polygon":return Cs(v,x);case"MultiPoint":return oa(v,x);default:throw new Error("feature2 "+F+" geometry not supported")}default:throw new Error("feature1 "+C+" geometry not supported")}}function La(l,h){var v,x=!1;for(v=0;v<l.coordinates.length;v++)if(Ei(l.coordinates[v],h.coordinates)){x=!0;break}return x}function ia(l,h){for(var v=0,x=h.coordinates;v<x.length;v++){for(var C=x[v],F=!1,Q=0,re=l.coordinates;Q<re.length;Q++){var he=re[Q];if(Ei(C,he)){F=!0;break}}if(!F)return!1}return!0}function sa(l,h){for(var v=!1,x=0,C=h.coordinates;x<C.length;x++){var F=C[x];if(zi(F,l,{ignoreEndVertices:!0})&&(v=!0),!zi(F,l))return!1}return!!v}function oa(l,h){for(var v=0,x=h.coordinates;v<x.length;v++){var C=x[v];if(!wr(C,l,{ignoreBoundary:!0}))return!1}return!0}function Yr(l,h){for(var v=!1,x=0,C=h.coordinates;x<C.length;x++){var F=C[x];if(zi({type:"Point",coordinates:F},l,{ignoreEndVertices:!0})&&(v=!0),!zi({type:"Point",coordinates:F},l,{ignoreEndVertices:!1}))return!1}return v}function Ho(l,h){var v=!1,x=0,C=ba(l),F=ba(h);if(!wi(C,F))return!1;for(x;x<h.coordinates.length-1;x++){var Q=ns(h.coordinates[x],h.coordinates[x+1]);if(wr({type:"Point",coordinates:Q},l,{ignoreBoundary:!0})){v=!0;break}}return v}function Cs(l,h){if(l.type==="Feature"&&l.geometry===null||h.type==="Feature"&&h.geometry===null)return!1;var v=ba(l),x=ba(h);if(!wi(v,x))return!1;for(var C=ts(h).coordinates,F=0,Q=C;F<Q.length;F++)for(var re=Q[F],he=0,Le=re;he<Le.length;he++){var Je=Le[he];if(!wr(Je,l))return!1}return!0}function wi(l,h){return!(l[0]>h[0]||l[2]<h[2]||l[1]>h[1]||l[3]<h[3])}function Ei(l,h){return l[0]===h[0]&&l[1]===h[1]}function ns(l,h){return[(l[0]+h[0])/2,(l[1]+h[1])/2]}var Ni=f(li()),Eo=l=>()=>l,uo=l=>{let h=l?(v,x)=>x.minus(v).abs().isLessThanOrEqualTo(l):Eo(!1);return(v,x)=>h(v,x)?0:v.comparedTo(x)};function Bo(l){let h=l?(v,x,C,F,Q)=>v.exponentiatedBy(2).isLessThanOrEqualTo(F.minus(x).exponentiatedBy(2).plus(Q.minus(C).exponentiatedBy(2)).times(l)):Eo(!1);return(v,x,C)=>{let F=v.x,Q=v.y,re=C.x,he=C.y,Le=Q.minus(he).times(x.x.minus(re)).minus(F.minus(re).times(x.y.minus(he)));return h(Le,F,Q,re,he)?0:Le.comparedTo(0)}}var xu=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,aa=Math.ceil,cs=Math.floor,Bi="[BigNumber Error] ",Us=Bi+"Number primitive has more than 15 significant digits: ",co=1e14,dr=14,Sa=9007199254740991,Ca=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Go=1e7,eo=1e9;function bc(l){var h,v,x,C=Ye.prototype={constructor:Ye,toString:null,valueOf:null},F=new Ye(1),Q=20,re=4,he=-7,Le=21,Je=-1e7,ze=1e7,vt=!1,At=1,Jt=0,yn={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},bn="0123456789abcdefghijklmnopqrstuvwxyz",ur=!0;function Ye(ge,Pe){var Oe,Ne,Fe,je,at,lt,pt,Lt,St=this;if(!(St instanceof Ye))return new Ye(ge,Pe);if(Pe==null){if(ge&&ge._isBigNumber===!0){St.s=ge.s,!ge.c||ge.e>ze?St.c=St.e=null:ge.e<Je?St.c=[St.e=0]:(St.e=ge.e,St.c=ge.c.slice());return}if((lt=typeof ge=="number")&&ge*0==0){if(St.s=1/ge<0?(ge=-ge,-1):1,ge===~~ge){for(je=0,at=ge;at>=10;at/=10,je++);je>ze?St.c=St.e=null:(St.e=je,St.c=[ge]);return}Lt=String(ge)}else{if(!xu.test(Lt=String(ge)))return x(St,Lt,lt);St.s=Lt.charCodeAt(0)==45?(Lt=Lt.slice(1),-1):1}(je=Lt.indexOf("."))>-1&&(Lt=Lt.replace(".","")),(at=Lt.search(/e/i))>0?(je<0&&(je=at),je+=+Lt.slice(at+1),Lt=Lt.substring(0,at)):je<0&&(je=Lt.length)}else{if(a(Pe,2,bn.length,"Base"),Pe==10&&ur)return St=new Ye(ge),bt(St,Q+St.e+1,re);if(Lt=String(ge),lt=typeof ge=="number"){if(ge*0!=0)return x(St,Lt,lt,Pe);if(St.s=1/ge<0?(Lt=Lt.slice(1),-1):1,Ye.DEBUG&&Lt.replace(/^0\.0*|\./,"").length>15)throw Error(Us+ge)}else St.s=Lt.charCodeAt(0)===45?(Lt=Lt.slice(1),-1):1;for(Oe=bn.slice(0,Pe),je=at=0,pt=Lt.length;at<pt;at++)if(Oe.indexOf(Ne=Lt.charAt(at))<0){if(Ne=="."){if(at>je){je=pt;continue}}else if(!Fe&&(Lt==Lt.toUpperCase()&&(Lt=Lt.toLowerCase())||Lt==Lt.toLowerCase()&&(Lt=Lt.toUpperCase()))){Fe=!0,at=-1,je=0;continue}return x(St,String(ge),lt,Pe)}lt=!1,Lt=v(Lt,Pe,10,St.s),(je=Lt.indexOf("."))>-1?Lt=Lt.replace(".",""):je=Lt.length}for(at=0;Lt.charCodeAt(at)===48;at++);for(pt=Lt.length;Lt.charCodeAt(--pt)===48;);if(Lt=Lt.slice(at,++pt)){if(pt-=at,lt&&Ye.DEBUG&&pt>15&&(ge>Sa||ge!==cs(ge)))throw Error(Us+St.s*ge);if((je=je-at-1)>ze)St.c=St.e=null;else if(je<Je)St.c=[St.e=0];else{if(St.e=je,St.c=[],at=(je+1)%dr,je<0&&(at+=dr),at<pt){for(at&&St.c.push(+Lt.slice(0,at)),pt-=dr;at<pt;)St.c.push(+Lt.slice(at,at+=dr));at=dr-(Lt=Lt.slice(at)).length}else at-=pt;for(;at--;Lt+="0");St.c.push(+Lt)}}else St.c=[St.e=0]}Ye.clone=bc,Ye.ROUND_UP=0,Ye.ROUND_DOWN=1,Ye.ROUND_CEIL=2,Ye.ROUND_FLOOR=3,Ye.ROUND_HALF_UP=4,Ye.ROUND_HALF_DOWN=5,Ye.ROUND_HALF_EVEN=6,Ye.ROUND_HALF_CEIL=7,Ye.ROUND_HALF_FLOOR=8,Ye.EUCLID=9,Ye.config=Ye.set=function(ge){var Pe,Oe;if(ge!=null)if(typeof ge=="object"){if(ge.hasOwnProperty(Pe="DECIMAL_PLACES")&&(Oe=ge[Pe],a(Oe,0,eo,Pe),Q=Oe),ge.hasOwnProperty(Pe="ROUNDING_MODE")&&(Oe=ge[Pe],a(Oe,0,8,Pe),re=Oe),ge.hasOwnProperty(Pe="EXPONENTIAL_AT")&&(Oe=ge[Pe],Oe&&Oe.pop?(a(Oe[0],-1e9,0,Pe),a(Oe[1],0,eo,Pe),he=Oe[0],Le=Oe[1]):(a(Oe,-1e9,eo,Pe),he=-(Le=Oe<0?-Oe:Oe))),ge.hasOwnProperty(Pe="RANGE"))if(Oe=ge[Pe],Oe&&Oe.pop)a(Oe[0],-1e9,-1,Pe),a(Oe[1],1,eo,Pe),Je=Oe[0],ze=Oe[1];else if(a(Oe,-1e9,eo,Pe),Oe)Je=-(ze=Oe<0?-Oe:Oe);else throw Error(Bi+Pe+" cannot be zero: "+Oe);if(ge.hasOwnProperty(Pe="CRYPTO"))if(Oe=ge[Pe],Oe===!!Oe)if(Oe)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))vt=Oe;else throw vt=!Oe,Error(Bi+"crypto unavailable");else vt=Oe;else throw Error(Bi+Pe+" not true or false: "+Oe);if(ge.hasOwnProperty(Pe="MODULO_MODE")&&(Oe=ge[Pe],a(Oe,0,9,Pe),At=Oe),ge.hasOwnProperty(Pe="POW_PRECISION")&&(Oe=ge[Pe],a(Oe,0,eo,Pe),Jt=Oe),ge.hasOwnProperty(Pe="FORMAT"))if(Oe=ge[Pe],typeof Oe=="object")yn=Oe;else throw Error(Bi+Pe+" not an object: "+Oe);if(ge.hasOwnProperty(Pe="ALPHABET"))if(Oe=ge[Pe],typeof Oe=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(Oe))ur=Oe.slice(0,10)=="0123456789",bn=Oe;else throw Error(Bi+Pe+" invalid: "+Oe)}else throw Error(Bi+"Object expected: "+ge);return{DECIMAL_PLACES:Q,ROUNDING_MODE:re,EXPONENTIAL_AT:[he,Le],RANGE:[Je,ze],CRYPTO:vt,MODULO_MODE:At,POW_PRECISION:Jt,FORMAT:yn,ALPHABET:bn}},Ye.isBigNumber=function(ge){if(!ge||ge._isBigNumber!==!0)return!1;if(!Ye.DEBUG)return!0;var Pe,Oe,Ne=ge.c,Fe=ge.e,je=ge.s;e:if({}.toString.call(Ne)=="[object Array]"){if((je===1||je===-1)&&Fe>=-1e9&&Fe<=eo&&Fe===cs(Fe)){if(Ne[0]===0){if(Fe===0&&Ne.length===1)return!0;break e}if(Pe=(Fe+1)%dr,Pe<1&&(Pe+=dr),String(Ne[0]).length==Pe){for(Pe=0;Pe<Ne.length;Pe++)if(Oe=Ne[Pe],Oe<0||Oe>=co||Oe!==cs(Oe))break e;if(Oe!==0)return!0}}}else if(Ne===null&&Fe===null&&(je===null||je===1||je===-1))return!0;throw Error(Bi+"Invalid BigNumber: "+ge)},Ye.maximum=Ye.max=function(){return ft(arguments,-1)},Ye.minimum=Ye.min=function(){return ft(arguments,1)},Ye.random=function(){var ge=9007199254740992,Pe=Math.random()*ge&2097151?function(){return cs(Math.random()*ge)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(Oe){var Ne,Fe,je,at,lt,pt=0,Lt=[],St=new Ye(F);if(Oe==null?Oe=Q:a(Oe,0,eo),at=aa(Oe/dr),vt)if(crypto.getRandomValues){for(Ne=crypto.getRandomValues(new Uint32Array(at*=2));pt<at;)lt=Ne[pt]*131072+(Ne[pt+1]>>>11),lt>=9e15?(Fe=crypto.getRandomValues(new Uint32Array(2)),Ne[pt]=Fe[0],Ne[pt+1]=Fe[1]):(Lt.push(lt%1e14),pt+=2);pt=at/2}else if(crypto.randomBytes){for(Ne=crypto.randomBytes(at*=7);pt<at;)lt=(Ne[pt]&31)*281474976710656+Ne[pt+1]*1099511627776+Ne[pt+2]*4294967296+Ne[pt+3]*16777216+(Ne[pt+4]<<16)+(Ne[pt+5]<<8)+Ne[pt+6],lt>=9e15?crypto.randomBytes(7).copy(Ne,pt):(Lt.push(lt%1e14),pt+=7);pt=at/7}else throw vt=!1,Error(Bi+"crypto unavailable");if(!vt)for(;pt<at;)lt=Pe(),lt<9e15&&(Lt[pt++]=lt%1e14);for(at=Lt[--pt],Oe%=dr,at&&Oe&&(lt=Ca[dr-Oe],Lt[pt]=cs(at/lt)*lt);Lt[pt]===0;Lt.pop(),pt--);if(pt<0)Lt=[je=0];else{for(je=-1;Lt[0]===0;Lt.splice(0,1),je-=dr);for(pt=1,lt=Lt[0];lt>=10;lt/=10,pt++);pt<dr&&(je-=dr-pt)}return St.e=je,St.c=Lt,St}}(),Ye.sum=function(){for(var ge=1,Pe=arguments,Oe=new Ye(Pe[0]);ge<Pe.length;)Oe=Oe.plus(Pe[ge++]);return Oe},v=function(){var ge="0123456789";function Pe(Oe,Ne,Fe,je){for(var at,lt=[0],pt,Lt=0,St=Oe.length;Lt<St;){for(pt=lt.length;pt--;lt[pt]*=Ne);for(lt[0]+=je.indexOf(Oe.charAt(Lt++)),at=0;at<lt.length;at++)lt[at]>Fe-1&&(lt[at+1]==null&&(lt[at+1]=0),lt[at+1]+=lt[at]/Fe|0,lt[at]%=Fe)}return lt.reverse()}return function(Oe,Ne,Fe,je,at){var lt,pt,Lt,St,sn,zn,Hn,Xn,gi=Oe.indexOf("."),Pi=Q,Jr=re;for(gi>=0&&(St=Jt,Jt=0,Oe=Oe.replace(".",""),Xn=new Ye(Ne),zn=Xn.pow(Oe.length-gi),Jt=St,Xn.c=Pe(U(Ps(zn.c),zn.e,"0"),10,Fe,ge),Xn.e=Xn.c.length),Hn=Pe(Oe,Ne,Fe,at?(lt=bn,ge):(lt=ge,bn)),Lt=St=Hn.length;Hn[--St]==0;Hn.pop());if(!Hn[0])return lt.charAt(0);if(gi<0?--Lt:(zn.c=Hn,zn.e=Lt,zn.s=je,zn=h(zn,Xn,Pi,Jr,Fe),Hn=zn.c,sn=zn.r,Lt=zn.e),pt=Lt+Pi+1,gi=Hn[pt],St=Fe/2,sn=sn||pt<0||Hn[pt+1]!=null,sn=Jr<4?(gi!=null||sn)&&(Jr==0||Jr==(zn.s<0?3:2)):gi>St||gi==St&&(Jr==4||sn||Jr==6&&Hn[pt-1]&1||Jr==(zn.s<0?8:7)),pt<1||!Hn[0])Oe=sn?U(lt.charAt(1),-Pi,lt.charAt(0)):lt.charAt(0);else{if(Hn.length=pt,sn)for(--Fe;++Hn[--pt]>Fe;)Hn[pt]=0,pt||(++Lt,Hn=[1].concat(Hn));for(St=Hn.length;!Hn[--St];);for(gi=0,Oe="";gi<=St;Oe+=lt.charAt(Hn[gi++]));Oe=U(Oe,Lt,lt.charAt(0))}return Oe}}(),h=function(){function ge(Ne,Fe,je){var at,lt,pt,Lt,St=0,sn=Ne.length,zn=Fe%Go,Hn=Fe/Go|0;for(Ne=Ne.slice();sn--;)pt=Ne[sn]%Go,Lt=Ne[sn]/Go|0,at=Hn*pt+Lt*zn,lt=zn*pt+at%Go*Go+St,St=(lt/je|0)+(at/Go|0)+Hn*Lt,Ne[sn]=lt%je;return St&&(Ne=[St].concat(Ne)),Ne}function Pe(Ne,Fe,je,at){var lt,pt;if(je!=at)pt=je>at?1:-1;else for(lt=pt=0;lt<je;lt++)if(Ne[lt]!=Fe[lt]){pt=Ne[lt]>Fe[lt]?1:-1;break}return pt}function Oe(Ne,Fe,je,at){for(var lt=0;je--;)Ne[je]-=lt,lt=Ne[je]<Fe[je]?1:0,Ne[je]=lt*at+Ne[je]-Fe[je];for(;!Ne[0]&&Ne.length>1;Ne.splice(0,1));}return function(Ne,Fe,je,at,lt){var pt,Lt,St,sn,zn,Hn,Xn,gi,Pi,Jr,Oi,po,Su,ua,Tf,qa,Xu,ca=Ne.s==Fe.s?1:-1,Hs=Ne.c,rs=Fe.c;if(!Hs||!Hs[0]||!rs||!rs[0])return new Ye(!Ne.s||!Fe.s||(Hs?rs&&Hs[0]==rs[0]:!rs)?NaN:Hs&&Hs[0]==0||!rs?ca*0:ca/0);for(gi=new Ye(ca),Pi=gi.c=[],Lt=Ne.e-Fe.e,ca=je+Lt+1,lt||(lt=co,Lt=Es(Ne.e/dr)-Es(Fe.e/dr),ca=ca/dr|0),St=0;rs[St]==(Hs[St]||0);St++);if(rs[St]>(Hs[St]||0)&&Lt--,ca<0)Pi.push(1),sn=!0;else{for(ua=Hs.length,qa=rs.length,St=0,ca+=2,zn=cs(lt/(rs[0]+1)),zn>1&&(rs=ge(rs,zn,lt),Hs=ge(Hs,zn,lt),qa=rs.length,ua=Hs.length),Su=qa,Jr=Hs.slice(0,qa),Oi=Jr.length;Oi<qa;Jr[Oi++]=0);Xu=rs.slice(),Xu=[0].concat(Xu),Tf=rs[0],rs[1]>=lt/2&&Tf++;do{if(zn=0,pt=Pe(rs,Jr,qa,Oi),pt<0){if(po=Jr[0],qa!=Oi&&(po=po*lt+(Jr[1]||0)),zn=cs(po/Tf),zn>1)for(zn>=lt&&(zn=lt-1),Hn=ge(rs,zn,lt),Xn=Hn.length,Oi=Jr.length;Pe(Hn,Jr,Xn,Oi)==1;)zn--,Oe(Hn,qa<Xn?Xu:rs,Xn,lt),Xn=Hn.length,pt=1;else zn==0&&(pt=zn=1),Hn=rs.slice(),Xn=Hn.length;if(Xn<Oi&&(Hn=[0].concat(Hn)),Oe(Jr,Hn,Oi,lt),Oi=Jr.length,pt==-1)for(;Pe(rs,Jr,qa,Oi)<1;)zn++,Oe(Jr,qa<Oi?Xu:rs,Oi,lt),Oi=Jr.length}else pt===0&&(zn++,Jr=[0]);Pi[St++]=zn,Jr[0]?Jr[Oi++]=Hs[Su]||0:(Jr=[Hs[Su]],Oi=1)}while((Su++<ua||Jr[0]!=null)&&ca--);sn=Jr[0]!=null,Pi[0]||Pi.splice(0,1)}if(lt==co){for(St=1,ca=Pi[0];ca>=10;ca/=10,St++);bt(gi,je+(gi.e=St+Lt*dr-1)+1,at,sn)}else gi.e=Lt,gi.r=+sn;return gi}}();function tt(ge,Pe,Oe,Ne){var Fe,je,at,lt,pt;if(Oe==null?Oe=re:a(Oe,0,8),!ge.c)return ge.toString();if(Fe=ge.c[0],at=ge.e,Pe==null)pt=Ps(ge.c),pt=Ne==1||Ne==2&&(at<=he||at>=Le)?S(pt,at):U(pt,at,"0");else if(ge=bt(new Ye(ge),Pe,Oe),je=ge.e,pt=Ps(ge.c),lt=pt.length,Ne==1||Ne==2&&(Pe<=je||je<=he)){for(;lt<Pe;pt+="0",lt++);pt=S(pt,je)}else if(Pe-=at,pt=U(pt,je,"0"),je+1>lt){if(--Pe>0)for(pt+=".";Pe--;pt+="0");}else if(Pe+=je-lt,Pe>0)for(je+1==lt&&(pt+=".");Pe--;pt+="0");return ge.s<0&&Fe?"-"+pt:pt}function ft(ge,Pe){for(var Oe,Ne,Fe=1,je=new Ye(ge[0]);Fe<ge.length;Fe++)Ne=new Ye(ge[Fe]),(!Ne.s||(Oe=qo(je,Ne))===Pe||Oe===0&&je.s===Pe)&&(je=Ne);return je}function Nt(ge,Pe,Oe){for(var Ne=1,Fe=Pe.length;!Pe[--Fe];Pe.pop());for(Fe=Pe[0];Fe>=10;Fe/=10,Ne++);return(Oe=Ne+Oe*dr-1)>ze?ge.c=ge.e=null:Oe<Je?ge.c=[ge.e=0]:(ge.e=Oe,ge.c=Pe),ge}x=function(){var ge=/^(-?)0([xbo])(?=\w[\w.]*$)/i,Pe=/^([^.]+)\.$/,Oe=/^\.([^.]+)$/,Ne=/^-?(Infinity|NaN)$/,Fe=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(je,at,lt,pt){var Lt,St=lt?at:at.replace(Fe,"");if(Ne.test(St))je.s=isNaN(St)?null:St<0?-1:1;else{if(!lt&&(St=St.replace(ge,function(sn,zn,Hn){return Lt=(Hn=Hn.toLowerCase())=="x"?16:Hn=="b"?2:8,!pt||pt==Lt?zn:sn}),pt&&(Lt=pt,St=St.replace(Pe,"$1").replace(Oe,"0.$1")),at!=St))return new Ye(St,Lt);if(Ye.DEBUG)throw Error(Bi+"Not a"+(pt?" base "+pt:"")+" number: "+at);je.s=null}je.c=je.e=null}}();function bt(ge,Pe,Oe,Ne){var Fe,je,at,lt,pt,Lt,St,sn=ge.c,zn=Ca;if(sn){e:{for(Fe=1,lt=sn[0];lt>=10;lt/=10,Fe++);if(je=Pe-Fe,je<0)je+=dr,at=Pe,pt=sn[Lt=0],St=cs(pt/zn[Fe-at-1]%10);else if(Lt=aa((je+1)/dr),Lt>=sn.length)if(Ne){for(;sn.length<=Lt;sn.push(0));pt=St=0,Fe=1,je%=dr,at=je-dr+1}else break e;else{for(pt=lt=sn[Lt],Fe=1;lt>=10;lt/=10,Fe++);je%=dr,at=je-dr+Fe,St=at<0?0:cs(pt/zn[Fe-at-1]%10)}if(Ne=Ne||Pe<0||sn[Lt+1]!=null||(at<0?pt:pt%zn[Fe-at-1]),Ne=Oe<4?(St||Ne)&&(Oe==0||Oe==(ge.s<0?3:2)):St>5||St==5&&(Oe==4||Ne||Oe==6&&(je>0?at>0?pt/zn[Fe-at]:0:sn[Lt-1])%10&1||Oe==(ge.s<0?8:7)),Pe<1||!sn[0])return sn.length=0,Ne?(Pe-=ge.e+1,sn[0]=zn[(dr-Pe%dr)%dr],ge.e=-Pe||0):sn[0]=ge.e=0,ge;if(je==0?(sn.length=Lt,lt=1,Lt--):(sn.length=Lt+1,lt=zn[dr-je],sn[Lt]=at>0?cs(pt/zn[Fe-at]%zn[at])*lt:0),Ne)for(;;)if(Lt==0){for(je=1,at=sn[0];at>=10;at/=10,je++);for(at=sn[0]+=lt,lt=1;at>=10;at/=10,lt++);je!=lt&&(ge.e++,sn[0]==co&&(sn[0]=1));break}else{if(sn[Lt]+=lt,sn[Lt]!=co)break;sn[Lt--]=0,lt=1}for(je=sn.length;sn[--je]===0;sn.pop());}ge.e>ze?ge.c=ge.e=null:ge.e<Je&&(ge.c=[ge.e=0])}return ge}function Tt(ge){var Pe,Oe=ge.e;return Oe===null?ge.toString():(Pe=Ps(ge.c),Pe=Oe<=he||Oe>=Le?S(Pe,Oe):U(Pe,Oe,"0"),ge.s<0?"-"+Pe:Pe)}return C.absoluteValue=C.abs=function(){var ge=new Ye(this);return ge.s<0&&(ge.s=1),ge},C.comparedTo=function(ge,Pe){return qo(this,new Ye(ge,Pe))},C.decimalPlaces=C.dp=function(ge,Pe){var Oe,Ne,Fe,je=this;if(ge!=null)return a(ge,0,eo),Pe==null?Pe=re:a(Pe,0,8),bt(new Ye(je),ge+je.e+1,Pe);if(!(Oe=je.c))return null;if(Ne=((Fe=Oe.length-1)-Es(this.e/dr))*dr,Fe=Oe[Fe])for(;Fe%10==0;Fe/=10,Ne--);return Ne<0&&(Ne=0),Ne},C.dividedBy=C.div=function(ge,Pe){return h(this,new Ye(ge,Pe),Q,re)},C.dividedToIntegerBy=C.idiv=function(ge,Pe){return h(this,new Ye(ge,Pe),0,1)},C.exponentiatedBy=C.pow=function(ge,Pe){var Oe,Ne,Fe,je,at,lt,pt,Lt,St,sn=this;if(ge=new Ye(ge),ge.c&&!ge.isInteger())throw Error(Bi+"Exponent not an integer: "+Tt(ge));if(Pe!=null&&(Pe=new Ye(Pe)),lt=ge.e>14,!sn.c||!sn.c[0]||sn.c[0]==1&&!sn.e&&sn.c.length==1||!ge.c||!ge.c[0])return St=new Ye(Math.pow(+Tt(sn),lt?ge.s*(2-p(ge)):+Tt(ge))),Pe?St.mod(Pe):St;if(pt=ge.s<0,Pe){if(Pe.c?!Pe.c[0]:!Pe.s)return new Ye(NaN);Ne=!pt&&sn.isInteger()&&Pe.isInteger(),Ne&&(sn=sn.mod(Pe))}else{if(ge.e>9&&(sn.e>0||sn.e<-1||(sn.e==0?sn.c[0]>1||lt&&sn.c[1]>=24e7:sn.c[0]<8e13||lt&&sn.c[0]<=9999975e7)))return je=sn.s<0&&p(ge)?-0:0,sn.e>-1&&(je=1/je),new Ye(pt?1/je:je);Jt&&(je=aa(Jt/dr+2))}for(lt?(Oe=new Ye(.5),pt&&(ge.s=1),Lt=p(ge)):(Fe=Math.abs(+Tt(ge)),Lt=Fe%2),St=new Ye(F);;){if(Lt){if(St=St.times(sn),!St.c)break;je?St.c.length>je&&(St.c.length=je):Ne&&(St=St.mod(Pe))}if(Fe){if(Fe=cs(Fe/2),Fe===0)break;Lt=Fe%2}else if(ge=ge.times(Oe),bt(ge,ge.e+1,1),ge.e>14)Lt=p(ge);else{if(Fe=+Tt(ge),Fe===0)break;Lt=Fe%2}sn=sn.times(sn),je?sn.c&&sn.c.length>je&&(sn.c.length=je):Ne&&(sn=sn.mod(Pe))}return Ne?St:(pt&&(St=F.div(St)),Pe?St.mod(Pe):je?bt(St,Jt,re,at):St)},C.integerValue=function(ge){var Pe=new Ye(this);return ge==null?ge=re:a(ge,0,8),bt(Pe,Pe.e+1,ge)},C.isEqualTo=C.eq=function(ge,Pe){return qo(this,new Ye(ge,Pe))===0},C.isFinite=function(){return!!this.c},C.isGreaterThan=C.gt=function(ge,Pe){return qo(this,new Ye(ge,Pe))>0},C.isGreaterThanOrEqualTo=C.gte=function(ge,Pe){return(Pe=qo(this,new Ye(ge,Pe)))===1||Pe===0},C.isInteger=function(){return!!this.c&&Es(this.e/dr)>this.c.length-2},C.isLessThan=C.lt=function(ge,Pe){return qo(this,new Ye(ge,Pe))<0},C.isLessThanOrEqualTo=C.lte=function(ge,Pe){return(Pe=qo(this,new Ye(ge,Pe)))===-1||Pe===0},C.isNaN=function(){return!this.s},C.isNegative=function(){return this.s<0},C.isPositive=function(){return this.s>0},C.isZero=function(){return!!this.c&&this.c[0]==0},C.minus=function(ge,Pe){var Oe,Ne,Fe,je,at=this,lt=at.s;if(ge=new Ye(ge,Pe),Pe=ge.s,!lt||!Pe)return new Ye(NaN);if(lt!=Pe)return ge.s=-Pe,at.plus(ge);var pt=at.e/dr,Lt=ge.e/dr,St=at.c,sn=ge.c;if(!pt||!Lt){if(!St||!sn)return St?(ge.s=-Pe,ge):new Ye(sn?at:NaN);if(!St[0]||!sn[0])return sn[0]?(ge.s=-Pe,ge):new Ye(St[0]?at:re==3?-0:0)}if(pt=Es(pt),Lt=Es(Lt),St=St.slice(),lt=pt-Lt){for((je=lt<0)?(lt=-lt,Fe=St):(Lt=pt,Fe=sn),Fe.reverse(),Pe=lt;Pe--;Fe.push(0));Fe.reverse()}else for(Ne=(je=(lt=St.length)<(Pe=sn.length))?lt:Pe,lt=Pe=0;Pe<Ne;Pe++)if(St[Pe]!=sn[Pe]){je=St[Pe]<sn[Pe];break}if(je&&(Fe=St,St=sn,sn=Fe,ge.s=-ge.s),Pe=(Ne=sn.length)-(Oe=St.length),Pe>0)for(;Pe--;St[Oe++]=0);for(Pe=co-1;Ne>lt;){if(St[--Ne]<sn[Ne]){for(Oe=Ne;Oe&&!St[--Oe];St[Oe]=Pe);--St[Oe],St[Ne]+=co}St[Ne]-=sn[Ne]}for(;St[0]==0;St.splice(0,1),--Lt);return St[0]?Nt(ge,St,Lt):(ge.s=re==3?-1:1,ge.c=[ge.e=0],ge)},C.modulo=C.mod=function(ge,Pe){var Oe,Ne,Fe=this;return ge=new Ye(ge,Pe),!Fe.c||!ge.s||ge.c&&!ge.c[0]?new Ye(NaN):!ge.c||Fe.c&&!Fe.c[0]?new Ye(Fe):(At==9?(Ne=ge.s,ge.s=1,Oe=h(Fe,ge,0,3),ge.s=Ne,Oe.s*=Ne):Oe=h(Fe,ge,0,At),ge=Fe.minus(Oe.times(ge)),!ge.c[0]&&At==1&&(ge.s=Fe.s),ge)},C.multipliedBy=C.times=function(ge,Pe){var Oe,Ne,Fe,je,at,lt,pt,Lt,St,sn,zn,Hn,Xn,gi,Pi,Jr=this,Oi=Jr.c,po=(ge=new Ye(ge,Pe)).c;if(!Oi||!po||!Oi[0]||!po[0])return!Jr.s||!ge.s||Oi&&!Oi[0]&&!po||po&&!po[0]&&!Oi?ge.c=ge.e=ge.s=null:(ge.s*=Jr.s,!Oi||!po?ge.c=ge.e=null:(ge.c=[0],ge.e=0)),ge;for(Ne=Es(Jr.e/dr)+Es(ge.e/dr),ge.s*=Jr.s,pt=Oi.length,sn=po.length,pt<sn&&(Xn=Oi,Oi=po,po=Xn,Fe=pt,pt=sn,sn=Fe),Fe=pt+sn,Xn=[];Fe--;Xn.push(0));for(gi=co,Pi=Go,Fe=sn;--Fe>=0;){for(Oe=0,zn=po[Fe]%Pi,Hn=po[Fe]/Pi|0,at=pt,je=Fe+at;je>Fe;)Lt=Oi[--at]%Pi,St=Oi[at]/Pi|0,lt=Hn*Lt+St*zn,Lt=zn*Lt+lt%Pi*Pi+Xn[je]+Oe,Oe=(Lt/gi|0)+(lt/Pi|0)+Hn*St,Xn[je--]=Lt%gi;Xn[je]=Oe}return Oe?++Ne:Xn.splice(0,1),Nt(ge,Xn,Ne)},C.negated=function(){var ge=new Ye(this);return ge.s=-ge.s||null,ge},C.plus=function(ge,Pe){var Oe,Ne=this,Fe=Ne.s;if(ge=new Ye(ge,Pe),Pe=ge.s,!Fe||!Pe)return new Ye(NaN);if(Fe!=Pe)return ge.s=-Pe,Ne.minus(ge);var je=Ne.e/dr,at=ge.e/dr,lt=Ne.c,pt=ge.c;if(!je||!at){if(!lt||!pt)return new Ye(Fe/0);if(!lt[0]||!pt[0])return pt[0]?ge:new Ye(lt[0]?Ne:Fe*0)}if(je=Es(je),at=Es(at),lt=lt.slice(),Fe=je-at){for(Fe>0?(at=je,Oe=pt):(Fe=-Fe,Oe=lt),Oe.reverse();Fe--;Oe.push(0));Oe.reverse()}for(Fe=lt.length,Pe=pt.length,Fe-Pe<0&&(Oe=pt,pt=lt,lt=Oe,Pe=Fe),Fe=0;Pe;)Fe=(lt[--Pe]=lt[Pe]+pt[Pe]+Fe)/co|0,lt[Pe]=co===lt[Pe]?0:lt[Pe]%co;return Fe&&(lt=[Fe].concat(lt),++at),Nt(ge,lt,at)},C.precision=C.sd=function(ge,Pe){var Oe,Ne,Fe,je=this;if(ge!=null&&ge!==!!ge)return a(ge,1,eo),Pe==null?Pe=re:a(Pe,0,8),bt(new Ye(je),ge,Pe);if(!(Oe=je.c))return null;if(Fe=Oe.length-1,Ne=Fe*dr+1,Fe=Oe[Fe]){for(;Fe%10==0;Fe/=10,Ne--);for(Fe=Oe[0];Fe>=10;Fe/=10,Ne++);}return ge&&je.e+1>Ne&&(Ne=je.e+1),Ne},C.shiftedBy=function(ge){return a(ge,-9007199254740991,Sa),this.times("1e"+ge)},C.squareRoot=C.sqrt=function(){var ge,Pe,Oe,Ne,Fe,je=this,at=je.c,lt=je.s,pt=je.e,Lt=Q+4,St=new Ye("0.5");if(lt!==1||!at||!at[0])return new Ye(!lt||lt<0&&(!at||at[0])?NaN:at?je:1/0);if(lt=Math.sqrt(+Tt(je)),lt==0||lt==1/0?(Pe=Ps(at),(Pe.length+pt)%2==0&&(Pe+="0"),lt=Math.sqrt(+Pe),pt=Es((pt+1)/2)-(pt<0||pt%2),lt==1/0?Pe="5e"+pt:(Pe=lt.toExponential(),Pe=Pe.slice(0,Pe.indexOf("e")+1)+pt),Oe=new Ye(Pe)):Oe=new Ye(lt+""),Oe.c[0]){for(pt=Oe.e,lt=pt+Lt,lt<3&&(lt=0);;)if(Fe=Oe,Oe=St.times(Fe.plus(h(je,Fe,Lt,1))),Ps(Fe.c).slice(0,lt)===(Pe=Ps(Oe.c)).slice(0,lt))if(Oe.e<pt&&--lt,Pe=Pe.slice(lt-3,lt+1),Pe=="9999"||!Ne&&Pe=="4999"){if(!Ne&&(bt(Fe,Fe.e+Q+2,0),Fe.times(Fe).eq(je))){Oe=Fe;break}Lt+=4,lt+=4,Ne=1}else{(!+Pe||!+Pe.slice(1)&&Pe.charAt(0)=="5")&&(bt(Oe,Oe.e+Q+2,1),ge=!Oe.times(Oe).eq(je));break}}return bt(Oe,Oe.e+Q+1,re,ge)},C.toExponential=function(ge,Pe){return ge!=null&&(a(ge,0,eo),ge++),tt(this,ge,Pe,1)},C.toFixed=function(ge,Pe){return ge!=null&&(a(ge,0,eo),ge=ge+this.e+1),tt(this,ge,Pe)},C.toFormat=function(ge,Pe,Oe){var Ne,Fe=this;if(Oe==null)ge!=null&&Pe&&typeof Pe=="object"?(Oe=Pe,Pe=null):ge&&typeof ge=="object"?(Oe=ge,ge=Pe=null):Oe=yn;else if(typeof Oe!="object")throw Error(Bi+"Argument not an object: "+Oe);if(Ne=Fe.toFixed(ge,Pe),Fe.c){var je,at=Ne.split("."),lt=+Oe.groupSize,pt=+Oe.secondaryGroupSize,Lt=Oe.groupSeparator||"",St=at[0],sn=at[1],zn=Fe.s<0,Hn=zn?St.slice(1):St,Xn=Hn.length;if(pt&&(je=lt,lt=pt,pt=je,Xn-=je),lt>0&&Xn>0){for(je=Xn%lt||lt,St=Hn.substr(0,je);je<Xn;je+=lt)St+=Lt+Hn.substr(je,lt);pt>0&&(St+=Lt+Hn.slice(je)),zn&&(St="-"+St)}Ne=sn?St+(Oe.decimalSeparator||"")+((pt=+Oe.fractionGroupSize)?sn.replace(new RegExp("\\d{"+pt+"}\\B","g"),"$&"+(Oe.fractionGroupSeparator||"")):sn):St}return(Oe.prefix||"")+Ne+(Oe.suffix||"")},C.toFraction=function(ge){var Pe,Oe,Ne,Fe,je,at,lt,pt,Lt,St,sn,zn,Hn=this,Xn=Hn.c;if(ge!=null&&(lt=new Ye(ge),!lt.isInteger()&&(lt.c||lt.s!==1)||lt.lt(F)))throw Error(Bi+"Argument "+(lt.isInteger()?"out of range: ":"not an integer: ")+Tt(lt));if(!Xn)return new Ye(Hn);for(Pe=new Ye(F),Lt=Oe=new Ye(F),Ne=pt=new Ye(F),zn=Ps(Xn),je=Pe.e=zn.length-Hn.e-1,Pe.c[0]=Ca[(at=je%dr)<0?dr+at:at],ge=!ge||lt.comparedTo(Pe)>0?je>0?Pe:Lt:lt,at=ze,ze=1/0,lt=new Ye(zn),pt.c[0]=0;St=h(lt,Pe,0,1),Fe=Oe.plus(St.times(Ne)),Fe.comparedTo(ge)!=1;)Oe=Ne,Ne=Fe,Lt=pt.plus(St.times(Fe=Lt)),pt=Fe,Pe=lt.minus(St.times(Fe=Pe)),lt=Fe;return Fe=h(ge.minus(Oe),Ne,0,1),pt=pt.plus(Fe.times(Lt)),Oe=Oe.plus(Fe.times(Ne)),pt.s=Lt.s=Hn.s,je=je*2,sn=h(Lt,Ne,je,re).minus(Hn).abs().comparedTo(h(pt,Oe,je,re).minus(Hn).abs())<1?[Lt,Ne]:[pt,Oe],ze=at,sn},C.toNumber=function(){return+Tt(this)},C.toPrecision=function(ge,Pe){return ge!=null&&a(ge,1,eo),tt(this,ge,Pe,2)},C.toString=function(ge){var Pe,Oe=this,Ne=Oe.s,Fe=Oe.e;return Fe===null?Ne?(Pe="Infinity",Ne<0&&(Pe="-"+Pe)):Pe="NaN":(ge==null?Pe=Fe<=he||Fe>=Le?S(Ps(Oe.c),Fe):U(Ps(Oe.c),Fe,"0"):ge===10&&ur?(Oe=bt(new Ye(Oe),Q+Fe+1,re),Pe=U(Ps(Oe.c),Oe.e,"0")):(a(ge,2,bn.length,"Base"),Pe=v(U(Ps(Oe.c),Fe,"0"),10,ge,Ne,!0)),Ne<0&&Oe.c[0]&&(Pe="-"+Pe)),Pe},C.valueOf=C.toJSON=function(){return Tt(this)},C._isBigNumber=!0,C[Symbol.toStringTag]="BigNumber",C[Symbol.for("nodejs.util.inspect.custom")]=C.valueOf,l!=null&&Ye.set(l),Ye}function Es(l){var h=l|0;return l>0||l===h?h:h-1}function Ps(l){for(var h,v,x=1,C=l.length,F=l[0]+"";x<C;){for(h=l[x++]+"",v=dr-h.length;v--;h="0"+h);F+=h}for(C=F.length;F.charCodeAt(--C)===48;);return F.slice(0,C+1||1)}function qo(l,h){var v,x,C=l.c,F=h.c,Q=l.s,re=h.s,he=l.e,Le=h.e;if(!Q||!re)return null;if(v=C&&!C[0],x=F&&!F[0],v||x)return v?x?0:-re:Q;if(Q!=re)return Q;if(v=Q<0,x=he==Le,!C||!F)return x?0:!C^v?1:-1;if(!x)return he>Le^v?1:-1;for(re=(he=C.length)<(Le=F.length)?he:Le,Q=0;Q<re;Q++)if(C[Q]!=F[Q])return C[Q]>F[Q]^v?1:-1;return he==Le?0:he>Le^v?1:-1}function a(l,h,v,x){if(l<h||l>v||l!==cs(l))throw Error(Bi+(x||"Argument")+(typeof l=="number"?l<h||l>v?" out of range: ":" not an integer: ":" not a primitive number: ")+String(l))}function p(l){var h=l.c.length-1;return Es(l.e/dr)==h&&l.c[h]%2!=0}function S(l,h){return(l.length>1?l.charAt(0)+"."+l.slice(1):l)+(h<0?"e":"e+")+h}function U(l,h,v){var x,C;if(h<0){for(C=v+".";++h;C+=v);l=C+l}else if(x=l.length,++h>x){for(C=v,h-=x;--h;C+=v);l+=C}else h<x&&(l=l.slice(0,h)+"."+l.slice(h));return l}var ie=bc(),Ce=ie,ot=class{constructor(l){Ht(this,"key");Ht(this,"left",null);Ht(this,"right",null);this.key=l}},Pt=class extends ot{constructor(l){super(l)}},zt=class{constructor(){Ht(this,"size",0);Ht(this,"modificationCount",0);Ht(this,"splayCount",0)}splay(l){let h=this.root;if(h==null)return this.compare(l,l),-1;let v=null,x=null,C=null,F=null,Q=h,re=this.compare,he;for(;;)if(he=re(Q.key,l),he>0){let Le=Q.left;if(Le==null||(he=re(Le.key,l),he>0&&(Q.left=Le.right,Le.right=Q,Q=Le,Le=Q.left,Le==null)))break;v==null?x=Q:v.left=Q,v=Q,Q=Le}else if(he<0){let Le=Q.right;if(Le==null||(he=re(Le.key,l),he<0&&(Q.right=Le.left,Le.left=Q,Q=Le,Le=Q.right,Le==null)))break;C==null?F=Q:C.right=Q,C=Q,Q=Le}else break;return C!=null&&(C.right=Q.left,Q.left=F),v!=null&&(v.left=Q.right,Q.right=x),this.root!==Q&&(this.root=Q,this.splayCount++),he}splayMin(l){let h=l,v=h.left;for(;v!=null;){let x=v;h.left=x.right,x.right=h,h=x,v=h.left}return h}splayMax(l){let h=l,v=h.right;for(;v!=null;){let x=v;h.right=x.left,x.left=h,h=x,v=h.right}return h}_delete(l){if(this.root==null||this.splay(l)!=0)return null;let h=this.root,v=h,x=h.left;if(this.size--,x==null)this.root=h.right;else{let C=h.right;h=this.splayMax(x),h.right=C,this.root=h}return this.modificationCount++,v}addNewRoot(l,h){this.size++,this.modificationCount++;let v=this.root;if(v==null){this.root=l;return}h<0?(l.left=v,l.right=v.right,v.right=null):(l.right=v,l.left=v.left,v.left=null),this.root=l}_first(){let l=this.root;return l==null?null:(this.root=this.splayMin(l),this.root)}_last(){let l=this.root;return l==null?null:(this.root=this.splayMax(l),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(l){return this.validKey(l)&&this.splay(l)==0}defaultCompare(){return(l,h)=>l<h?-1:l>h?1:0}wrap(){return{getRoot:()=>this.root,setRoot:l=>{this.root=l},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:l=>{this.splayCount=l},splay:l=>this.splay(l),has:l=>this.has(l)}}},on=class zd extends zt{constructor(v,x){super();Ht(this,"root",null);Ht(this,"compare");Ht(this,"validKey");Ht(this,Sn,"[object Set]");this.compare=v??this.defaultCompare(),this.validKey=x??(C=>C!=null&&C!=null)}delete(v){return this.validKey(v)?this._delete(v)!=null:!1}deleteAll(v){for(let x of v)this.delete(x)}forEach(v){let x=this[Symbol.iterator](),C;for(;C=x.next(),!C.done;)v(C.value,C.value,this)}add(v){let x=this.splay(v);return x!=0&&this.addNewRoot(new Pt(v),x),this}addAndReturn(v){let x=this.splay(v);return x!=0&&this.addNewRoot(new Pt(v),x),this.root.key}addAll(v){for(let x of v)this.add(x)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(v){if(v==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(v)<0)return this.root.key;let x=this.root.left;if(x==null)return null;let C=x.right;for(;C!=null;)x=C,C=x.right;return x.key}firstAfter(v){if(v==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(v)>0)return this.root.key;let x=this.root.right;if(x==null)return null;let C=x.left;for(;C!=null;)x=C,C=x.left;return x.key}retainAll(v){let x=new zd(this.compare,this.validKey),C=this.modificationCount;for(let F of v){if(C!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(F)&&this.splay(F)==0&&x.add(this.root.key)}x.size!=this.size&&(this.root=x.root,this.size=x.size,this.modificationCount++)}lookup(v){return!this.validKey(v)||this.splay(v)!=0?null:this.root.key}intersection(v){let x=new zd(this.compare,this.validKey);for(let C of this)v.has(C)&&x.add(C);return x}difference(v){let x=new zd(this.compare,this.validKey);for(let C of this)v.has(C)||x.add(C);return x}union(v){let x=this.clone();return x.addAll(v),x}clone(){let v=new zd(this.compare,this.validKey);return v.size=this.size,v.root=this.copyNode(this.root),v}copyNode(v){if(v==null)return null;function x(F,Q){let re,he;do{if(re=F.left,he=F.right,re!=null){let Le=new Pt(re.key);Q.left=Le,x(re,Le)}if(he!=null){let Le=new Pt(he.key);Q.right=Le,F=he,Q=Le}}while(he!=null)}let C=new Pt(v.key);return x(v,C),C}toSet(){return this.clone()}entries(){return new Rr(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(Jn=Symbol.iterator,Sn=Symbol.toStringTag,Jn)](){return new Yn(this.wrap())}},Dn=class{constructor(l){Ht(this,"tree");Ht(this,"path",new Array);Ht(this,"modificationCount",null);Ht(this,"splayCount");this.tree=l,this.splayCount=l.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let l=this.path[this.path.length-1];return this.getValue(l)}rebuildPath(l){this.path.splice(0,this.path.length),this.tree.splay(l),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(l){for(;l!=null;)this.path.push(l),l=l.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let v=this.tree.getRoot();for(;v!=null;)this.path.push(v),v=v.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let l=this.path[this.path.length-1],h=l.right;if(h!=null){for(;h!=null;)this.path.push(h),h=h.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===l;)l=this.path.pop();return this.path.length>0}},Yn=class extends Dn{getValue(l){return l.key}},Rr=class extends Dn{getValue(l){return[l.key,l.key]}},fs=l=>l,Wi=l=>{if(l){let h=new on(uo(l)),v=new on(uo(l)),x=(F,Q)=>Q.addAndReturn(F),C=F=>({x:x(F.x,h),y:x(F.y,v)});return C({x:new Ce(0),y:new Ce(0)}),C}return fs},Ms=l=>({set:h=>{$i=Ms(h)},reset:()=>Ms(l),compare:uo(l),snap:Wi(l),orient:Bo(l)}),$i=Ms(),fo=(l,h)=>l.ll.x.isLessThanOrEqualTo(h.x)&&h.x.isLessThanOrEqualTo(l.ur.x)&&l.ll.y.isLessThanOrEqualTo(h.y)&&h.y.isLessThanOrEqualTo(l.ur.y),wc=(l,h)=>{if(h.ur.x.isLessThan(l.ll.x)||l.ur.x.isLessThan(h.ll.x)||h.ur.y.isLessThan(l.ll.y)||l.ur.y.isLessThan(h.ll.y))return null;let v=l.ll.x.isLessThan(h.ll.x)?h.ll.x:l.ll.x,x=l.ur.x.isLessThan(h.ur.x)?l.ur.x:h.ur.x,C=l.ll.y.isLessThan(h.ll.y)?h.ll.y:l.ll.y,F=l.ur.y.isLessThan(h.ur.y)?l.ur.y:h.ur.y;return{ll:{x:v,y:C},ur:{x,y:F}}},la=(l,h)=>l.x.times(h.y).minus(l.y.times(h.x)),Wo=(l,h)=>l.x.times(h.x).plus(l.y.times(h.y)),No=l=>Wo(l,l).sqrt(),Af=(l,h,v)=>{let x={x:h.x.minus(l.x),y:h.y.minus(l.y)},C={x:v.x.minus(l.x),y:v.y.minus(l.y)};return la(C,x).div(No(C)).div(No(x))},tu=(l,h,v)=>{let x={x:h.x.minus(l.x),y:h.y.minus(l.y)},C={x:v.x.minus(l.x),y:v.y.minus(l.y)};return Wo(C,x).div(No(C)).div(No(x))},pi=(l,h,v)=>h.y.isZero()?null:{x:l.x.plus(h.x.div(h.y).times(v.minus(l.y))),y:v},Vs=(l,h,v)=>h.x.isZero()?null:{x:v,y:l.y.plus(h.y.div(h.x).times(v.minus(l.x)))},Te=(l,h,v,x)=>{if(h.x.isZero())return Vs(v,x,l.x);if(x.x.isZero())return Vs(l,h,v.x);if(h.y.isZero())return pi(v,x,l.y);if(x.y.isZero())return pi(l,h,v.y);let C=la(h,x);if(C.isZero())return null;let F={x:v.x.minus(l.x),y:v.y.minus(l.y)},Q=la(F,h).div(C),re=la(F,x).div(C),he=l.x.plus(re.times(h.x)),Le=v.x.plus(Q.times(x.x)),Je=l.y.plus(re.times(h.y)),ze=v.y.plus(Q.times(x.y)),vt=he.plus(Le).div(2),At=Je.plus(ze).div(2);return{x:vt,y:At}},ho=class px{constructor(h,v){Ht(this,"point");Ht(this,"isLeft");Ht(this,"segment");Ht(this,"otherSE");Ht(this,"consumedBy");h.events===void 0?h.events=[this]:h.events.push(this),this.point=h,this.isLeft=v}static compare(h,v){let x=px.comparePoints(h.point,v.point);return x!==0?x:(h.point!==v.point&&h.link(v),h.isLeft!==v.isLeft?h.isLeft?1:-1:As.compare(h.segment,v.segment))}static comparePoints(h,v){return h.x.isLessThan(v.x)?-1:h.x.isGreaterThan(v.x)?1:h.y.isLessThan(v.y)?-1:h.y.isGreaterThan(v.y)?1:0}link(h){if(h.point===this.point)throw new Error("Tried to link already linked events");let v=h.point.events;for(let x=0,C=v.length;x<C;x++){let F=v[x];this.point.events.push(F),F.point=this.point}this.checkForConsuming()}checkForConsuming(){let h=this.point.events.length;for(let v=0;v<h;v++){let x=this.point.events[v];if(x.segment.consumedBy===void 0)for(let C=v+1;C<h;C++){let F=this.point.events[C];F.consumedBy===void 0&&x.otherSE.point.events===F.otherSE.point.events&&x.segment.consume(F.segment)}}}getAvailableLinkedEvents(){let h=[];for(let v=0,x=this.point.events.length;v<x;v++){let C=this.point.events[v];C!==this&&!C.segment.ringOut&&C.segment.isInResult()&&h.push(C)}return h}getLeftmostComparator(h){let v=new Map,x=C=>{let F=C.otherSE;v.set(C,{sine:Af(this.point,h.point,F.point),cosine:tu(this.point,h.point,F.point)})};return(C,F)=>{v.has(C)||x(C),v.has(F)||x(F);let{sine:Q,cosine:re}=v.get(C),{sine:he,cosine:Le}=v.get(F);return Q.isGreaterThanOrEqualTo(0)&&he.isGreaterThanOrEqualTo(0)?re.isLessThan(Le)?1:re.isGreaterThan(Le)?-1:0:Q.isLessThan(0)&&he.isLessThan(0)?re.isLessThan(Le)?-1:re.isGreaterThan(Le)?1:0:he.isLessThan(Q)?-1:he.isGreaterThan(Q)?1:0}}},Lu=0,As=class F0{constructor(h,v,x,C){Ht(this,"id");Ht(this,"leftSE");Ht(this,"rightSE");Ht(this,"rings");Ht(this,"windings");Ht(this,"ringOut");Ht(this,"consumedBy");Ht(this,"prev");Ht(this,"_prevInResult");Ht(this,"_beforeState");Ht(this,"_afterState");Ht(this,"_isInResult");this.id=++Lu,this.leftSE=h,h.segment=this,h.otherSE=v,this.rightSE=v,v.segment=this,v.otherSE=h,this.rings=x,this.windings=C}static compare(h,v){let x=h.leftSE.point.x,C=v.leftSE.point.x,F=h.rightSE.point.x,Q=v.rightSE.point.x;if(Q.isLessThan(x))return 1;if(F.isLessThan(C))return-1;let re=h.leftSE.point.y,he=v.leftSE.point.y,Le=h.rightSE.point.y,Je=v.rightSE.point.y;if(x.isLessThan(C)){if(he.isLessThan(re)&&he.isLessThan(Le))return 1;if(he.isGreaterThan(re)&&he.isGreaterThan(Le))return-1;let ze=h.comparePoint(v.leftSE.point);if(ze<0)return 1;if(ze>0)return-1;let vt=v.comparePoint(h.rightSE.point);return vt!==0?vt:-1}if(x.isGreaterThan(C)){if(re.isLessThan(he)&&re.isLessThan(Je))return-1;if(re.isGreaterThan(he)&&re.isGreaterThan(Je))return 1;let ze=v.comparePoint(h.leftSE.point);if(ze!==0)return ze;let vt=h.comparePoint(v.rightSE.point);return vt<0?1:vt>0?-1:1}if(re.isLessThan(he))return-1;if(re.isGreaterThan(he))return 1;if(F.isLessThan(Q)){let ze=v.comparePoint(h.rightSE.point);if(ze!==0)return ze}if(F.isGreaterThan(Q)){let ze=h.comparePoint(v.rightSE.point);if(ze<0)return 1;if(ze>0)return-1}if(!F.eq(Q)){let ze=Le.minus(re),vt=F.minus(x),At=Je.minus(he),Jt=Q.minus(C);if(ze.isGreaterThan(vt)&&At.isLessThan(Jt))return 1;if(ze.isLessThan(vt)&&At.isGreaterThan(Jt))return-1}return F.isGreaterThan(Q)?1:F.isLessThan(Q)||Le.isLessThan(Je)?-1:Le.isGreaterThan(Je)?1:h.id<v.id?-1:h.id>v.id?1:0}static fromRing(h,v,x){let C,F,Q,re=ho.comparePoints(h,v);if(re<0)C=h,F=v,Q=1;else if(re>0)C=v,F=h,Q=-1;else throw new Error(`Tried to create degenerate segment at [${h.x}, ${h.y}]`);let he=new ho(C,!0),Le=new ho(F,!1);return new F0(he,Le,[x],[Q])}replaceRightSE(h){this.rightSE=h,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let h=this.leftSE.point.y,v=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:h.isLessThan(v)?h:v},ur:{x:this.rightSE.point.x,y:h.isGreaterThan(v)?h:v}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(h){return h.x.eq(this.leftSE.point.x)&&h.y.eq(this.leftSE.point.y)||h.x.eq(this.rightSE.point.x)&&h.y.eq(this.rightSE.point.y)}comparePoint(h){return $i.orient(this.leftSE.point,h,this.rightSE.point)}getIntersection(h){let v=this.bbox(),x=h.bbox(),C=wc(v,x);if(C===null)return null;let F=this.leftSE.point,Q=this.rightSE.point,re=h.leftSE.point,he=h.rightSE.point,Le=fo(v,re)&&this.comparePoint(re)===0,Je=fo(x,F)&&h.comparePoint(F)===0,ze=fo(v,he)&&this.comparePoint(he)===0,vt=fo(x,Q)&&h.comparePoint(Q)===0;if(Je&&Le)return vt&&!ze?Q:!vt&&ze?he:null;if(Je)return ze&&F.x.eq(he.x)&&F.y.eq(he.y)?null:F;if(Le)return vt&&Q.x.eq(re.x)&&Q.y.eq(re.y)?null:re;if(vt&&ze)return null;if(vt)return Q;if(ze)return he;let At=Te(F,this.vector(),re,h.vector());return At===null||!fo(C,At)?null:$i.snap(At)}split(h){let v=[],x=h.events!==void 0,C=new ho(h,!0),F=new ho(h,!1),Q=this.rightSE;this.replaceRightSE(F),v.push(F),v.push(C);let re=new F0(C,Q,this.rings.slice(),this.windings.slice());return ho.comparePoints(re.leftSE.point,re.rightSE.point)>0&&re.swapEvents(),ho.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),x&&(C.checkForConsuming(),F.checkForConsuming()),v}swapEvents(){let h=this.rightSE;this.rightSE=this.leftSE,this.leftSE=h,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let v=0,x=this.windings.length;v<x;v++)this.windings[v]*=-1}consume(h){let v=this,x=h;for(;v.consumedBy;)v=v.consumedBy;for(;x.consumedBy;)x=x.consumedBy;let C=F0.compare(v,x);if(C!==0){if(C>0){let F=v;v=x,x=F}if(v.prev===x){let F=v;v=x,x=F}for(let F=0,Q=x.rings.length;F<Q;F++){let re=x.rings[F],he=x.windings[F],Le=v.rings.indexOf(re);Le===-1?(v.rings.push(re),v.windings.push(he)):v.windings[Le]+=he}x.rings=null,x.windings=null,x.consumedBy=v,x.leftSE.consumedBy=v.leftSE,x.rightSE.consumedBy=v.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let h=this.prev.consumedBy||this.prev;this._beforeState=h.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let h=this.beforeState();this._afterState={rings:h.rings.slice(0),windings:h.windings.slice(0),multiPolys:[]};let v=this._afterState.rings,x=this._afterState.windings,C=this._afterState.multiPolys;for(let re=0,he=this.rings.length;re<he;re++){let Le=this.rings[re],Je=this.windings[re],ze=v.indexOf(Le);ze===-1?(v.push(Le),x.push(Je)):x[ze]+=Je}let F=[],Q=[];for(let re=0,he=v.length;re<he;re++){if(x[re]===0)continue;let Le=v[re],Je=Le.poly;if(Q.indexOf(Je)===-1)if(Le.isExterior)F.push(Je);else{Q.indexOf(Je)===-1&&Q.push(Je);let ze=F.indexOf(Le.poly);ze!==-1&&F.splice(ze,1)}}for(let re=0,he=F.length;re<he;re++){let Le=F[re].multiPoly;C.indexOf(Le)===-1&&C.push(Le)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let h=this.beforeState().multiPolys,v=this.afterState().multiPolys;switch(Kc.type){case"union":{let x=h.length===0,C=v.length===0;this._isInResult=x!==C;break}case"intersection":{let x,C;h.length<v.length?(x=h.length,C=v.length):(x=v.length,C=h.length),this._isInResult=C===Kc.numMultiPolys&&x<C;break}case"xor":{let x=Math.abs(h.length-v.length);this._isInResult=x%2===1;break}case"difference":{let x=C=>C.length===1&&C[0].isSubject;this._isInResult=x(h)!==x(v);break}}return this._isInResult}},Ur=class{constructor(l,h,v){Ht(this,"poly");Ht(this,"isExterior");Ht(this,"segments");Ht(this,"bbox");if(!Array.isArray(l)||l.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=h,this.isExterior=v,this.segments=[],typeof l[0][0]!="number"||typeof l[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let x=$i.snap({x:new Ce(l[0][0]),y:new Ce(l[0][1])});this.bbox={ll:{x:x.x,y:x.y},ur:{x:x.x,y:x.y}};let C=x;for(let F=1,Q=l.length;F<Q;F++){if(typeof l[F][0]!="number"||typeof l[F][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let re=$i.snap({x:new Ce(l[F][0]),y:new Ce(l[F][1])});re.x.eq(C.x)&&re.y.eq(C.y)||(this.segments.push(As.fromRing(C,re,this)),re.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=re.x),re.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=re.y),re.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=re.x),re.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=re.y),C=re)}(!x.x.eq(C.x)||!x.y.eq(C.y))&&this.segments.push(As.fromRing(C,x,this))}getSweepEvents(){let l=[];for(let h=0,v=this.segments.length;h<v;h++){let x=this.segments[h];l.push(x.leftSE),l.push(x.rightSE)}return l}},Wc=class{constructor(l,h){Ht(this,"multiPoly");Ht(this,"exteriorRing");Ht(this,"interiorRings");Ht(this,"bbox");if(!Array.isArray(l))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Ur(l[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let v=1,x=l.length;v<x;v++){let C=new Ur(l[v],this,!1);C.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=C.bbox.ll.x),C.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=C.bbox.ll.y),C.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=C.bbox.ur.x),C.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=C.bbox.ur.y),this.interiorRings.push(C)}this.multiPoly=h}getSweepEvents(){let l=this.exteriorRing.getSweepEvents();for(let h=0,v=this.interiorRings.length;h<v;h++){let x=this.interiorRings[h].getSweepEvents();for(let C=0,F=x.length;C<F;C++)l.push(x[C])}return l}},uh=class{constructor(l,h){Ht(this,"isSubject");Ht(this,"polys");Ht(this,"bbox");if(!Array.isArray(l))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof l[0][0][0]=="number"&&(l=[l])}catch{}this.polys=[],this.bbox={ll:{x:new Ce(Number.POSITIVE_INFINITY),y:new Ce(Number.POSITIVE_INFINITY)},ur:{x:new Ce(Number.NEGATIVE_INFINITY),y:new Ce(Number.NEGATIVE_INFINITY)}};for(let v=0,x=l.length;v<x;v++){let C=new Wc(l[v],this);C.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=C.bbox.ll.x),C.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=C.bbox.ll.y),C.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=C.bbox.ur.x),C.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=C.bbox.ur.y),this.polys.push(C)}this.isSubject=h}getSweepEvents(){let l=[];for(let h=0,v=this.polys.length;h<v;h++){let x=this.polys[h].getSweepEvents();for(let C=0,F=x.length;C<F;C++)l.push(x[C])}return l}},Zc=class m1{constructor(h){Ht(this,"events");Ht(this,"poly");Ht(this,"_isExteriorRing");Ht(this,"_enclosingRing");this.events=h;for(let v=0,x=h.length;v<x;v++)h[v].segment.ringOut=this;this.poly=null}static factory(h){let v=[];for(let x=0,C=h.length;x<C;x++){let F=h[x];if(!F.isInResult()||F.ringOut)continue;let Q=null,re=F.leftSE,he=F.rightSE,Le=[re],Je=re.point,ze=[];for(;Q=re,re=he,Le.push(re),re.point!==Je;)for(;;){let vt=re.getAvailableLinkedEvents();if(vt.length===0){let yn=Le[0].point,bn=Le[Le.length-1].point;throw new Error(`Unable to complete output ring starting at [${yn.x}, ${yn.y}]. Last matching segment found ends at [${bn.x}, ${bn.y}].`)}if(vt.length===1){he=vt[0].otherSE;break}let At=null;for(let yn=0,bn=ze.length;yn<bn;yn++)if(ze[yn].point===re.point){At=yn;break}if(At!==null){let yn=ze.splice(At)[0],bn=Le.splice(yn.index);bn.unshift(bn[0].otherSE),v.push(new m1(bn.reverse()));continue}ze.push({index:Le.length,point:re.point});let Jt=re.getLeftmostComparator(Q);he=vt.sort(Jt)[0].otherSE;break}v.push(new m1(Le))}return v}getGeom(){let h=this.events[0].point,v=[h];for(let Le=1,Je=this.events.length-1;Le<Je;Le++){let ze=this.events[Le].point,vt=this.events[Le+1].point;$i.orient(ze,h,vt)!==0&&(v.push(ze),h=ze)}if(v.length===1)return null;let x=v[0],C=v[1];$i.orient(x,h,C)===0&&v.shift(),v.push(v[0]);let F=this.isExteriorRing()?1:-1,Q=this.isExteriorRing()?0:v.length-1,re=this.isExteriorRing()?v.length:-1,he=[];for(let Le=Q;Le!=re;Le+=F)he.push([v[Le].x.toNumber(),v[Le].y.toNumber()]);return he}isExteriorRing(){if(this._isExteriorRing===void 0){let h=this.enclosingRing();this._isExteriorRing=h?!h.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var C,F;let h=this.events[0];for(let Q=1,re=this.events.length;Q<re;Q++){let he=this.events[Q];ho.compare(h,he)>0&&(h=he)}let v=h.segment.prevInResult(),x=v?v.prevInResult():null;for(;;){if(!v)return null;if(!x)return v.ringOut;if(x.ringOut!==v.ringOut)return((C=x.ringOut)==null?void 0:C.enclosingRing())!==v.ringOut?v.ringOut:(F=v.ringOut)==null?void 0:F.enclosingRing();v=x.prevInResult(),x=v?v.prevInResult():null}}},Ga=class{constructor(l){Ht(this,"exteriorRing");Ht(this,"interiorRings");this.exteriorRing=l,l.poly=this,this.interiorRings=[]}addInterior(l){this.interiorRings.push(l),l.poly=this}getGeom(){let l=this.exteriorRing.getGeom();if(l===null)return null;let h=[l];for(let v=0,x=this.interiorRings.length;v<x;v++){let C=this.interiorRings[v].getGeom();C!==null&&h.push(C)}return h}},xc=class{constructor(l){Ht(this,"rings");Ht(this,"polys");this.rings=l,this.polys=this._composePolys(l)}getGeom(){let l=[];for(let h=0,v=this.polys.length;h<v;h++){let x=this.polys[h].getGeom();x!==null&&l.push(x)}return l}_composePolys(l){var v;let h=[];for(let x=0,C=l.length;x<C;x++){let F=l[x];if(!F.poly)if(F.isExteriorRing())h.push(new Ga(F));else{let Q=F.enclosingRing();Q!=null&&Q.poly||h.push(new Ga(Q)),(v=Q==null?void 0:Q.poly)==null||v.addInterior(F)}}return h}},kf=class{constructor(l,h=As.compare){Ht(this,"queue");Ht(this,"tree");Ht(this,"segments");this.queue=l,this.tree=new on(h),this.segments=[]}process(l){let h=l.segment,v=[];if(l.consumedBy)return l.isLeft?this.queue.delete(l.otherSE):this.tree.delete(h),v;l.isLeft&&this.tree.add(h);let x=h,C=h;do x=this.tree.lastBefore(x);while(x!=null&&x.consumedBy!=null);do C=this.tree.firstAfter(C);while(C!=null&&C.consumedBy!=null);if(l.isLeft){let F=null;if(x){let re=x.getIntersection(h);if(re!==null&&(h.isAnEndpoint(re)||(F=re),!x.isAnEndpoint(re))){let he=this._splitSafely(x,re);for(let Le=0,Je=he.length;Le<Je;Le++)v.push(he[Le])}}let Q=null;if(C){let re=C.getIntersection(h);if(re!==null&&(h.isAnEndpoint(re)||(Q=re),!C.isAnEndpoint(re))){let he=this._splitSafely(C,re);for(let Le=0,Je=he.length;Le<Je;Le++)v.push(he[Le])}}if(F!==null||Q!==null){let re=null;F===null?re=Q:Q===null?re=F:re=ho.comparePoints(F,Q)<=0?F:Q,this.queue.delete(h.rightSE),v.push(h.rightSE);let he=h.split(re);for(let Le=0,Je=he.length;Le<Je;Le++)v.push(he[Le])}v.length>0?(this.tree.delete(h),v.push(l)):(this.segments.push(h),h.prev=x)}else{if(x&&C){let F=x.getIntersection(C);if(F!==null){if(!x.isAnEndpoint(F)){let Q=this._splitSafely(x,F);for(let re=0,he=Q.length;re<he;re++)v.push(Q[re])}if(!C.isAnEndpoint(F)){let Q=this._splitSafely(C,F);for(let re=0,he=Q.length;re<he;re++)v.push(Q[re])}}}this.tree.delete(h)}return v}_splitSafely(l,h){this.tree.delete(l);let v=l.rightSE;this.queue.delete(v);let x=l.split(h);return x.push(v),l.consumedBy===void 0&&this.tree.add(l),x}},pd=class{constructor(){Ht(this,"type");Ht(this,"numMultiPolys")}run(l,h,v){Ju.type=l;let x=[new uh(h,!0)];for(let he=0,Le=v.length;he<Le;he++)x.push(new uh(v[he],!1));if(Ju.numMultiPolys=x.length,Ju.type==="difference"){let he=x[0],Le=1;for(;Le<x.length;)wc(x[Le].bbox,he.bbox)!==null?Le++:x.splice(Le,1)}if(Ju.type==="intersection")for(let he=0,Le=x.length;he<Le;he++){let Je=x[he];for(let ze=he+1,vt=x.length;ze<vt;ze++)if(wc(Je.bbox,x[ze].bbox)===null)return[]}let C=new on(ho.compare);for(let he=0,Le=x.length;he<Le;he++){let Je=x[he].getSweepEvents();for(let ze=0,vt=Je.length;ze<vt;ze++)C.add(Je[ze])}let F=new kf(C),Q=null;for(C.size!=0&&(Q=C.first(),C.delete(Q));Q;){let he=F.process(Q);for(let Le=0,Je=he.length;Le<Je;Le++){let ze=he[Le];ze.consumedBy===void 0&&C.add(ze)}C.size!=0?(Q=C.first(),C.delete(Q)):Q=null}$i.reset();let re=Zc.factory(F.segments);return new xc(re).getGeom()}},Ju=new pd,Kc=Ju,Rl=(l,...h)=>Kc.run("intersection",l,h),gd=(l,...h)=>Kc.run("difference",l,h);$i.set;function Yc(l){let h={type:"Feature"};return h.geometry=l,h}function Jc(l){return l.type==="Feature"?l.geometry:l}function ch(l){return l&&l.geometry&&l.geometry.coordinates?l.geometry.coordinates:l}function fh(l){return Yc({type:"LineString",coordinates:l})}function Ea(l){return Yc({type:"MultiLineString",coordinates:l})}function hh(l){return Yc({type:"Polygon",coordinates:l})}function dh(l){return Yc({type:"MultiPolygon",coordinates:l})}function ph(l,h){let v=Jc(l),x=Jc(h),C=Rl(v.coordinates,x.coordinates);return C.length===0?null:C.length===1?hh(C[0]):dh(C)}function b(l,h){let v=Jc(l),x=Jc(h),C=gd(v.coordinates,x.coordinates);return C.length===0?null:C.length===1?hh(C[0]):dh(C)}function P(l){return Array.isArray(l)?1+P(l[0]):-1}function H(l){l instanceof L.Polyline&&(l=l.toGeoJSON(15));let h=ch(l),v=P(h),x=[];return v>1?h.forEach(C=>{x.push(fh(C))}):x.push(l),x}function se(l){let h=[];return l.eachLayer(v=>{h.push(ch(v.toGeoJSON(15)))}),Ea(h)}es.Cut=es.Polygon.extend({initialize(l){this._map=l,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let l=this._layer.getLatLngs();if(l.length<=2)return;let h=L.polygon(l,this.options.pathOptions);h._latlngInfos=this._layer._latlngInfo,this.cut(h),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:x,originalLayer:C})=>{this._fireCut(C,x,C),this._fireCut(this._map,x,C),C.pm._fireEdit()}),this._editedLayers=[];let v=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(v))},cut(l){let h=this._map._layers,v=l._latlngInfos||[];Object.keys(h).map(x=>h[x]).filter(x=>x.pm).filter(x=>!x._pmTempLayer).filter(x=>!L.PM.optIn&&!x.options.pmIgnore||L.PM.optIn&&x.options.pmIgnore===!1).filter(x=>x instanceof L.Polyline).filter(x=>x!==l).filter(x=>x.pm.options.allowCutting).filter(x=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(x)>-1:!0).filter(x=>!this._layerGroup.hasLayer(x)).filter(x=>{try{let C=!!lo(l.toGeoJSON(15),x.toGeoJSON(15)).features.length>0;return C||x instanceof L.Polyline&&!(x instanceof L.Polygon)?C:!!ph(l.toGeoJSON(15),x.toGeoJSON(15))}catch{return x instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(x=>{let C;if(x instanceof L.Polygon){C=L.polygon(x.getLatLngs());let he=C.getLatLngs();v.forEach(Le=>{if(Le&&Le.snapInfo){let{latlng:Je}=Le,ze=this._calcClosestLayer(Je,[C]);if(ze&&ze.segment&&ze.distance<this.options.snapDistance){let{segment:vt}=ze;if(vt&&vt.length===2){let{indexPath:At,parentPath:Jt,newIndex:yn}=L.PM.Utils._getIndexFromSegment(he,vt);(At.length>1?(0,Ni.default)(he,Jt):he).splice(yn,0,Je)}}}})}else C=x;let F=this._cutLayer(l,C),Q=L.geoJSON(F,x.options);Q.getLayers().length===1&&([Q]=Q.getLayers()),this._setPane(Q,"layerPane");let re=Q.addTo(this._map.pm._getContainingLayer());if(re.pm.enable(x.pm.options),re.pm.disable(),x._pmTempLayer=!0,l._pmTempLayer=!0,x.remove(),x.removeFrom(this._map.pm._getContainingLayer()),l.remove(),l.removeFrom(this._map.pm._getContainingLayer()),re.getLayers&&re.getLayers().length===0&&this._map.pm.removeLayer({target:re}),re instanceof L.LayerGroup?(re.eachLayer(he=>{this._addDrawnLayerProp(he)}),this._addDrawnLayerProp(re)):this._addDrawnLayerProp(re),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let he=this.options.layersToCut.indexOf(x);he>-1&&this.options.layersToCut.splice(he,1)}this._editedLayers.push({layer:re,originalLayer:x})})},_cutLayer(l,h){let v=L.geoJSON(),x;if(h instanceof L.Polygon)x=b(h.toGeoJSON(15),l.toGeoJSON(15));else{let C=H(h);C.forEach(F=>{let Q=Zn(F,l.toGeoJSON(15)),re;Q&&Q.features.length>0?re=L.geoJSON(Q):re=L.geoJSON(F),re.getLayers().forEach(he=>{ra(l.toGeoJSON(15),he.toGeoJSON(15))||he.addTo(v)})}),C.length>1?x=se(v):x=v.toGeoJSON(15)}return x},_change:L.Util.falseFn}),es.Text=es.extend({initialize(l){this._map=l,this._shape="Text",this.toolbarButtonName="drawText"},enable(l){L.Util.setOptions(this,l),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(ir("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var l;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(l=this._hintMarker)==null||l.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this.options.snappable){let h=l;h.target=this._hintMarker,this._handleSnapping(h)}},_createMarker(l){var C,F,Q,re;if(!l.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(C=this.options.textOptions)==null?void 0:C.className){let he=this.options.textOptions.className.split(" ");this.textArea.classList.add(...he)}let v=this._createTextIcon(this.textArea),x=new L.Marker(h,{textMarker:!0,_textMarkerOverPM:!0,icon:v});if(this._setPane(x,"markerPane"),this._finishLayer(x),x.pm||(x.options.draggable=!1),x.addTo(this._map.pm._getContainingLayer()),x.pm){x.pm.textArea=this.textArea,L.setOptions(x.pm,{removeIfEmpty:((F=this.options.textOptions)==null?void 0:F.removeIfEmpty)??!0});let he=((Q=this.options.textOptions)==null?void 0:Q.focusAfterDraw)??!0;x.pm._createTextMarker(he),(re=this.options.textOptions)!=null&&re.text&&x.pm.setText(this.options.textOptions.text)}this._fireCreate(x),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(l){this.enable(),this._hintMarker.setLatLng(l.latlng)},_createTextArea(){let l=document.createElement("textarea");return l.readOnly=!0,l.classList.add("pm-textarea","pm-disabled"),l},_createTextIcon(l){return L.divIcon({className:"pm-text-marker",html:l})}});var be={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,vi(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let l=this._getDOMElem();l&&(vi(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(l)):L.DomEvent.on(l,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,vi(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let l=this._getDOMElem();l&&(vi(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(l)):L.DomEvent.off(l,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(l){let h=l.touches?l.touches[0]:l,v={originalEvent:h,target:this._layer};return v.containerPoint=this._map.mouseEventToContainerPoint(h),v.latlng=this._map.containerPointToLatLng(v.containerPoint),this._dragMixinOnMouseDown(v),!1},_simulateMouseMoveEvent(l){let h=l.touches?l.touches[0]:l,v={originalEvent:h,target:this._layer};return v.containerPoint=this._map.mouseEventToContainerPoint(h),v.latlng=this._map.containerPointToLatLng(v.containerPoint),this._dragMixinOnMouseMove(v),!1},_simulateMouseUpEvent(l){let h={originalEvent:l.touches?l.touches[0]:l,target:this._layer};return l.type.indexOf("touch")===-1&&(h.containerPoint=this._map.mouseEventToContainerPoint(l),h.latlng=this._map.containerPointToLatLng(h.containerPoint)),this._dragMixinOnMouseUp(h),!1},_dragMixinOnMouseDown(l){if(l.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(l);let h=l._fromLayerSync,v=this._syncLayers("_dragMixinOnMouseDown",l);if(this._layer instanceof L.Marker&&(this.options.snappable&&!h&&!v?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let x="resizeableCircleMarker";this._layer instanceof L.Circle&&(x="resizeableCircle"),this.options.snappable&&!h&&!v?this._layer.pm.options[x]||this._initSnappableMarkersDrag():this._layer.pm.options[x]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=l.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(l){this._overwriteEventIfItComesFromMarker(l);let h=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",l),this._dragging||(this._dragging=!0,L.DomUtil.addClass(h,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=l.latlng),this._onLayerDrag(l),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(l){let h=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",l),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,h&&L.DomUtil.removeClass(h,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(l){let{latlng:h}=l,v={lat:h.lat-this._tempDragCoord.lat,lng:h.lng-this._tempDragCoord.lng},x=C=>C.map(F=>{if(Array.isArray(F))return x(F);let Q={lat:F.lat+v.lat,lng:F.lng+v.lng};return(F.alt||F.alt===0)&&(Q.alt=F.alt),Q});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let C=x([this._layer.getLatLng()]);this._layer.setLatLng(C[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let C=this._layer.getLatLng();this._layer._snapped&&(C=this._layer._orgLatLng);let F=x([C]);this._layer.setLatLng(F[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let C=x([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(C),this._fireChange(this._layer.getBounds(),"Edit")}else{let C=x(this._layer.getLatLngs());this._layer.setLatLngs(C),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=h,l.layer=this._layer,this._fireDrag(l)},addDraggingClass(){let l=this._getDOMElem();l&&L.DomUtil.addClass(l,"leaflet-pm-draggable")},removeDraggingClass(){let l=this._getDOMElem();l&&L.DomUtil.removeClass(l,"leaflet-pm-draggable")},_getDOMElem(){let l=null;return this._layer._path?l=this._layer._path:this._layer._renderer&&this._layer._renderer._container?l=this._layer._renderer._container:this._layer._image?l=this._layer._image:this._layer._icon&&(l=this._layer._icon),l},_overwriteEventIfItComesFromMarker(l){l.target.getLatLng&&(!l.target._radius||l.target._radius<=10)&&(l.containerPoint=this._map.mouseEventToContainerPoint(l.originalEvent),l.latlng=this._map.containerPointToLatLng(l.containerPoint))},_syncLayers(l,h){if(this.enabled())return!1;if(!h._fromLayerSync&&this._layer===h.target&&this.options.syncLayersOnDrag){h._fromLayerSync=!0;let v=[];if(L.Util.isArray(this.options.syncLayersOnDrag))v=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(x=>{x instanceof L.LayerGroup&&(v=v.concat(x.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let x in this._parentLayerGroup){let C=this._parentLayerGroup[x];C.pm&&(v=C.pm.getLayers(!0))}return L.Util.isArray(v)&&v.length>0&&(v=v.filter(x=>!!x.pm).filter(x=>!!x.pm.options.draggable),v.forEach(x=>{x!==this._layer&&x.pm[l]&&(x._snapped=!1,x.pm[l](h))})),v.length>0}return!1},_stopDOMImageDrag(l){return l.preventDefault(),!1}},Ee=be,Ae=f(li());function ke(l,h,v,x){return v.unproject(h.transform(v.project(l,x)),x)}function Be(l,h,v){let x=v.getMaxZoom();if(x===1/0&&(x=v.getZoom()),L.Util.isArray(l)){let C=[];return l.forEach(F=>{C.push(Be(F,h,v))}),C}return l instanceof L.LatLng?ke(l,h,v,x):null}function Ve(l,h){h instanceof L.Layer&&(h=h.getLatLng());let v=l.getMaxZoom();return v===1/0&&(v=l.getZoom()),l.project(h,v)}function ht(l,h){let v=l.getMaxZoom();return v===1/0&&(v=l.getZoom()),l.unproject(h,v)}var Dt={_onRotateStart(l){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Ve(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Ve(this._map,l.target.getLatLng()),this._initialRotateLatLng=Do(this._layer),this._startAngle=this.getAngle();let h=Do(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,h),this._fireRotationStart(this._map,h)},_onRotate(l){let h=Ve(this._map,l.target.getLatLng()),v=this._rotationStartPoint,x=this._rotationOriginPoint,C=Math.atan2(h.y-x.y,h.x-x.x)-Math.atan2(v.y-x.y,v.x-x.x);this._layer.setLatLngs(this._rotateLayer(C,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let F=this;function Q(Je,ze=[],vt=-1){if(vt>-1&&ze.push(vt),L.Util.isArray(Je[0]))Je.forEach((At,Jt)=>Q(At,ze.slice(),Jt));else{let At=ze.length>0?(0,Ae.default)(F._markers,ze):F._markers[0];Je.forEach((Jt,yn)=>{At[yn].setLatLng(Jt)})}}Q(this._layer.getLatLngs());let re=Do(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(C,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let he=C*180/Math.PI;he=he<0?he+360:he;let Le=he+this._startAngle;this._setAngle(Le),this._rotationLayer.pm._setAngle(Le),this._fireRotation(this._rotationLayer,he,re),this._fireRotation(this._map,he,re),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let l=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let h=Do(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Do(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,l,h),this._fireRotationEnd(this._map,l,h),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(l,h,v,x,C){let F=Ve(C,v);return this._matrix=x.clone().rotate(l,F).flip(),Be(h,this._matrix,C)},_setAngle(l){l=l<0?l+360:l,this._angle=l%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let l=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),h=l.getCenter();return l.removeFrom(this._layer._map),h},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(Qo(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let l={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),l),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Do(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(l){let h=this.getAngle(),v=this._layer.getLatLngs(),x=l*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(x,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+l),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(x,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let C=this.getAngle()-h;C=C<0?C+360:C,this._startAngle=h,this._fireRotation(this._layer,C,v,this._layer),this._fireRotation(this._map||this._layer._map,C,v,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(l){let h=l-this.getAngle();this.rotateLayer(h)},getAngle(){return this._angle||0},setInitAngle(l){this._setAngle(l)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(l){this._rotationCenter=l,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(l)}},Bt=Dt,wt=L.Class.extend({includes:[Ee,xo,Bt,Tl],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(l){L.Util.setOptions(this,l)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(l,h){h==="layerPane"?l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":h==="vertexPane"?l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":h==="markerPane"&&(l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(l,h){let v=h.target,x={layer:this._layer,marker:v,event:h},C="";return l==="move"?C="moveVertexValidation":l==="add"?C="addVertexValidation":l==="remove"&&(C="removeVertexValidation"),this.options[C]&&typeof this.options[C]=="function"&&!this.options[C](x)?(l==="move"&&(v._cancelDragEventChain=v.getLatLng()),!1):(v._cancelDragEventChain=null,!0)},_vertexValidationDrag(l){return l._cancelDragEventChain?(l._latlng=l._cancelDragEventChain,l.update(),!1):!0},_vertexValidationDragEnd(l){return l._cancelDragEventChain?(l._cancelDragEventChain=null,!1):!0}}),Zt=wt;Zt.LayerGroup=L.Class.extend({initialize(l){this._layerGroup=l,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(x=>this._initLayer(x));let h=x=>{if(x.layer._pmTempLayer)return;this._layers=this.getLayers();let C=this._layers.filter(F=>!F.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in F.pm._parentLayerGroup));C.forEach(F=>{this._initLayer(F)}),C.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(h,100,this),this),this._layerGroup.on("layerremove",x=>{this._removeLayerFromGroup(x.target)},this);let v=x=>{x.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(v,100,this),this)},enable(l,h=[]){h.length===0&&(this._layers=this.getLayers()),this._options=l,this._layers.forEach(v=>{v instanceof L.LayerGroup?h.indexOf(v._leaflet_id)===-1&&(h.push(v._leaflet_id),v.pm.enable(l,h)):v.pm.enable(l)})},disable(l=[]){l.length===0&&(this._layers=this.getLayers()),this._layers.forEach(h=>{h instanceof L.LayerGroup?l.indexOf(h._leaflet_id)===-1&&(l.push(h._leaflet_id),h.pm.disable(l)):h.pm.disable()})},enabled(l=[]){return l.length===0&&(this._layers=this.getLayers()),!!this._layers.find(h=>h instanceof L.LayerGroup?l.indexOf(h._leaflet_id)===-1?(l.push(h._leaflet_id),h.pm.enabled(l)):!1:h.pm.enabled())},toggleEdit(l,h=[]){h.length===0&&(this._layers=this.getLayers()),this._options=l,this._layers.forEach(v=>{v instanceof L.LayerGroup?h.indexOf(v._leaflet_id)===-1&&(h.push(v._leaflet_id),v.pm.toggleEdit(l,h)):v.pm.toggleEdit(l)})},_initLayer(l){let h=L.Util.stamp(this._layerGroup);l.pm._parentLayerGroup||(l.pm._parentLayerGroup={}),l.pm._parentLayerGroup[h]=this._layerGroup},_removeLayerFromGroup(l){if(l.pm&&l.pm._layerGroup){let h=L.Util.stamp(this._layerGroup);delete l.pm._layerGroup[h]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(l=>l.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var l;return this._map||((l=this._layers.find(h=>!!h._map))==null?void 0:l._map)||null},getLayers(l=!1,h=!0,v=!0,x=[]){let C=[];return l?this._layerGroup.getLayers().forEach(F=>{C.push(F),F instanceof L.LayerGroup&&x.indexOf(F._leaflet_id)===-1&&(x.push(F._leaflet_id),C=C.concat(F.pm.getLayers(!0,!0,!0,x)))}):C=this._layerGroup.getLayers(),v&&(C=C.filter(F=>!(F instanceof L.LayerGroup))),h&&(C=C.filter(F=>!!F.pm),C=C.filter(F=>!F._pmTempLayer),C=C.filter(F=>!L.PM.optIn&&!F.options.pmIgnore||L.PM.optIn&&F.options.pmIgnore===!1)),C},setOptions(l,h=[]){h.length===0&&(this._layers=this.getLayers()),this.options=l,this._layers.forEach(v=>{v.pm&&(v instanceof L.LayerGroup?h.indexOf(v._leaflet_id)===-1&&(h.push(v._leaflet_id),v.pm.setOptions(l,h)):v.pm.setOptions(l))})}}),Zt.Marker=Zt.extend({_shape:"Marker",initialize(l){this._layer=l,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(l={draggable:!0}){if(L.Util.setOptions(this,l),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(l){this.enabled()?this.disable():this.enable(l)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(l){let h=l.target;h.remove(),this._fireRemove(h),this._fireRemove(this._map,h)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let l=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,l.off("pm:drag",this._handleSnapping,this),l.on("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.on("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this),l.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let l=this._layer;l.off("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this)}});var $t=f(li()),dt={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let l=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=l.filter((h,v,x)=>x.indexOf(h)===v)},_removeFromCache(l){let h=this.markerCache.indexOf(l);h>-1&&this.markerCache.splice(h,1)},renderLimits(l){this.markerCache.forEach(h=>{l.includes(h)?this._markerGroup.addLayer(h):this._markerGroup.removeLayer(h)})},applyLimitFilters({latlng:l={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let h=[...this._filterClosestMarkers(l)];this.renderLimits(h)},_filterClosestMarkers(l){let h=[...this.markerCache],v=this.options.limitMarkersToCount;return v===-1?h:(h.sort((x,C)=>{let F=x._latlng.distanceTo(l),Q=C._latlng.distanceTo(l);return F-Q}),h.filter((x,C)=>v>-1?C<v:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(l){this._preventRenderMarkers=!!l}},yt=dt;Zt.Line=Zt.extend({includes:[yt],_shape:"Line",initialize(l){this._layer=l,this._enabled=!1},enable(l){if(L.Util.setOptions(this,l),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let l=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(l,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(l){return this.enabled()?this.disable():this.enable(l),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let l=this._map,h=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(l),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let v=x=>{if(Array.isArray(x[0]))return x.map(v,this);let C=x.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&x.map((F,Q)=>{let re=this.isPolygon()?(Q+1)%x.length:Q+1;return this._createMiddleMarker(C[Q],C[re])}),C};this._markers=v(h),this.filterMarkerGroup(),l.addLayer(this._markerGroup)},_createMarker(l){let h=new L.Marker(l,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._pmTempLayer=!0,this.options.rotate?(h.on("dragstart",this._onRotateStart,this),h.on("drag",this._onRotate,this),h.on("dragend",this._onRotateEnd,this)):(h.on("click",this._onVertexClick,this),h.on("dragstart",this._onMarkerDragStart,this),h.on("move",this._onMarkerDrag,this),h.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||h.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(h),h},_createMiddleMarker(l,h){if(!l||!h)return!1;let v=L.PM.Utils.calcMiddleLatLng(this._map,l.getLatLng(),h.getLatLng()),x=this._createMarker(v),C=L.divIcon({className:"marker-icon marker-icon-middle"});return x.setIcon(C),x.leftM=l,x.rightM=h,l._middleMarkerNext=x,h._middleMarkerPrev=x,x.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),x.on("movestart",this._onMiddleMarkerMoveStart,this),x},_onMiddleMarkerClick(l){let h=l.target;if(!this._vertexValidation("add",l))return;let v=L.divIcon({className:"marker-icon"});h.setIcon(v),this._addMarker(h,h.leftM,h.rightM)},_onMiddleMarkerMoveStart(l){let h=l.target;if(h.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",l)){h.on("move",this._onMiddleMarkerMovePrevent,this);return}h._dragging=!0,this._addMarker(h,h.leftM,h.rightM)},_onMiddleMarkerMovePrevent(l){let h=l.target;this._vertexValidationDrag(h)},_onMiddleMarkerMoveEnd(l){let h=l.target;if(h.off("move",this._onMiddleMarkerMovePrevent,this),h.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(h))return;let v=L.divIcon({className:"marker-icon"});h.setIcon(v),setTimeout(()=>{delete h._dragging},100)},_addMarker(l,h,v){l.off("movestart",this._onMiddleMarkerMoveStart,this),l.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let x=l.getLatLng(),C=this._layer._latlngs;delete l.leftM,delete l.rightM;let{indexPath:F,index:Q,parentPath:re}=L.PM.Utils.findDeepMarkerIndex(this._markers,h),he=F.length>1?(0,$t.default)(C,re):C,Le=F.length>1?(0,$t.default)(this._markers,re):this._markers;he.splice(Q+1,0,x),Le.splice(Q+1,0,l),this._layer.setLatLngs(C),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(h,l),this._createMiddleMarker(l,v)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(l,L.PM.Utils.findDeepMarkerIndex(this._markers,l).indexPath,x),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return zr(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(l){let h=this._layer,v,x;if(this.options.allowSelfIntersection?v=!1:(x=zr(this._layer.toGeoJSON(15)),v=x.features.length>0),v){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return v;l?this._flashLayer():(h.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(x)}else h.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return v},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(l,h){l.forEach(v=>{Array.isArray(v)?this._updateDisabledMarkerStyle(v,h):v._icon&&(h&&!this._checkMarkerAllowedToDrag(v)?L.DomUtil.addClass(v._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(v._icon,"vertexmarker-disabled"))})},_removeMarker(l){let h=l.target;if(!this._vertexValidation("remove",l))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=Do(this._layer,this._layer.getLatLngs()));let v=this._layer.getLatLngs(),{indexPath:x,index:C,parentPath:F}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);if(!x)return;let Q=x.length>1?(0,$t.default)(v,F):v,re=x.length>1?(0,$t.default)(this._markers,F):this._markers,he=F[F.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!he&&(Q.length<=2||this.isPolygon()&&Q.length<=3)){this._flashLayer();return}Q.splice(C,1),this._layer.setLatLngs(v),this.isPolygon()&&Q.length<=2&&Q.splice(0,Q.length);let Le=!1;if(Q.length<=1&&(Q.splice(0,Q.length),F.length>1&&x.length>1&&(v=al(v)),this._layer.setLatLngs(v),this._initMarkers(),Le=!0),Qi(v)||this._layer.remove(),v=al(v),this._layer.setLatLngs(v),this._markers=al(this._markers),!Le&&(re=x.length>1?(0,$t.default)(this._markers,F):this._markers,h._middleMarkerPrev&&(this._markerGroup.removeLayer(h._middleMarkerPrev),this._removeFromCache(h._middleMarkerPrev)),h._middleMarkerNext&&(this._markerGroup.removeLayer(h._middleMarkerNext),this._removeFromCache(h._middleMarkerNext)),this._markerGroup.removeLayer(h),this._removeFromCache(h),re)){let Je,ze;if(this.isPolygon()?(Je=(C+1)%re.length,ze=(C+(re.length-1))%re.length):(ze=C-1<0?void 0:C-1,Je=C+1>=re.length?void 0:C+1),Je!==ze){let vt=re[ze],At=re[Je];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(vt,At)}re.splice(C,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(h,x),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(l){let h=this._layer.getLatLngs(),v=l.getLatLng(),{indexPath:x,index:C,parentPath:F}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);(x.length>1?(0,$t.default)(h,F):h).splice(C,1,v),this._layer.setLatLngs(h)},_getNeighborMarkers(l){let{indexPath:h,index:v,parentPath:x}=L.PM.Utils.findDeepMarkerIndex(this._markers,l),C=h.length>1?(0,$t.default)(this._markers,x):this._markers,F=(v+1)%C.length,Q=(v+(C.length-1))%C.length,re=C[Q],he=C[F];return{prevMarker:re,nextMarker:he}},_checkMarkerAllowedToDrag(l){let{prevMarker:h,nextMarker:v}=this._getNeighborMarkers(l),x=L.polyline([h.getLatLng(),l.getLatLng()]),C=L.polyline([l.getLatLng(),v.getLatLng()]),F=lo(this._layer.toGeoJSON(15),x.toGeoJSON(15)).features.length,Q=lo(this._layer.toGeoJSON(15),C.toGeoJSON(15)).features.length;return l.getLatLng()===this._markers[0][0].getLatLng()?Q+=1:l.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(F+=1),!(F<=2&&Q<=2)},_onMarkerDragStart(l){let h=l.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",l))return;let{indexPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);this._fireMarkerDragStart(l,v),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Do(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(h):this._markerAllowedToDrag=null},_onMarkerDrag(l){let h=l.target;if(!this._vertexValidationDrag(h))return;let{indexPath:v,index:x,parentPath:C}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);if(!v)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(h);let F=v.length>1?(0,$t.default)(this._markers,C):this._markers,Q=(x+1)%F.length,re=(x+(F.length-1))%F.length,he=h.getLatLng(),Le=F[re].getLatLng(),Je=F[Q].getLatLng();if(h._middleMarkerNext){let ze=L.PM.Utils.calcMiddleLatLng(this._map,he,Je);h._middleMarkerNext.setLatLng(ze)}if(h._middleMarkerPrev){let ze=L.PM.Utils.calcMiddleLatLng(this._map,he,Le);h._middleMarkerPrev.setLatLng(ze)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(l,v),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(l){let h=l.target;if(!this._vertexValidationDragEnd(h))return;let{indexPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,h),x=!this.options.allowSelfIntersection&&this.hasSelfIntersection();x&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(x=!1);let C=!this.options.allowSelfIntersection&&x;if(this._fireMarkerDragEnd(l,v,C),C){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(l,v);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(l){let h=l.target;if(h._dragging)return;let{indexPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);this._fireVertexClick(l,v)}}),Zt.Polygon=Zt.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(l){let{prevMarker:h,nextMarker:v}=this._getNeighborMarkers(l),x=L.polyline([h.getLatLng(),l.getLatLng()]),C=L.polyline([l.getLatLng(),v.getLatLng()]),F=lo(this._layer.toGeoJSON(15),x.toGeoJSON(15)).features.length,Q=lo(this._layer.toGeoJSON(15),C.toGeoJSON(15)).features.length;return!(F<=2&&Q<=2)}}),Zt.Rectangle=Zt.Polygon.extend({_shape:"Rectangle",_initMarkers(){let l=this._map,h=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,l.addLayer(this._markerGroup),this._markers=[],this._markers[0]=h.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((v,x)=>{let C=this._cornerMarkers.find(F=>F._index===x);C&&C.setLatLng(v)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(l,h){let v=new L.Marker(l,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(v,"vertexPane"),v._origLatLng=l,v._index=h,v._pmTempLayer=!0,v.on("click",this._onVertexClick,this),this._markerGroup.addLayer(v),v},_addMarkerEvents(){this._markers[0].forEach(l=>{l.on("dragstart",this._onMarkerDragStart,this),l.on("drag",this._onMarkerDrag,this),l.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||l.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(l){if(!this._vertexValidation("move",l))return;let h=l.target,v=this._cornerMarkers;h._oppositeCornerLatLng=v.find(C=>C._index===(h._index+2)%4).getLatLng(),h._snapped=!1;let{indexPath:x}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);this._fireMarkerDragStart(l,x)},_onMarkerDrag(l){let h=l.target;if(!this._vertexValidationDrag(h)||h._index===void 0)return;this._adjustRectangleForMarkerMove(h);let{indexPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);this._fireMarkerDrag(l,v),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(l){let h=l.target;if(!this._vertexValidationDragEnd(h))return;this._cornerMarkers.forEach(x=>{delete x._oppositeCornerLatLng});let{indexPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);this._fireMarkerDragEnd(l,v),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(l){L.extend(l._origLatLng,l._latlng);let h=L.PM.Utils._getRotatedRectangle(l.getLatLng(),l._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(h),this._adjustAllMarkers(l),this._layer.redraw()},_adjustAllMarkers(l){let h=this._layer.getLatLngs()[0];if(h&&h.length!==4&&h.length>0)h.forEach((v,x)=>{this._cornerMarkers[x].setLatLng(v)}),this._cornerMarkers.slice(h.length).forEach(v=>{v.setLatLng(h[0])});else if(!h||!h.length)console.error("The layer has no LatLngs");else{let v=h.findIndex(x=>l.getLatLng().equals(x));v>-1?(this._cornerMarkers[(l._index+1)%4].setLatLng(h[(v+1)%4]),this._cornerMarkers[(l._index+2)%4].setLatLng(h[(v+2)%4]),this._cornerMarkers[(l._index+3)%4].setLatLng(h[(v+3)%4])):this._cornerMarkers.forEach(x=>{x.setLatLng(h[x._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(Qo(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let l=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(l[0],l[2],this.getAngle(),this._map||this)}}),Zt.CircleMarker=Zt.extend({_shape:"CircleMarker",initialize(l){this._layer=l,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(l={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,l),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(l){this.enabled()?this.disable():this.enable(l)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let l=this._map;this._helperLayers&&(this._helperLayers.removeFrom(l),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(l);let h=this._layer.getLatLng(),v=this._layer._radius,x=this._getLatLngOnCircle(h,v);this._centerMarker=this._createCenterMarker(h),this._outerMarker=this._createOuterMarker(x),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(l,h){let v=this._map.project(l),x=L.point(v.x+h,v.y);return this._map.unproject(x)},_createHintLine(l,h){let v=l.getLatLng(),x=h.getLatLng();this._hintline=L.polyline([v,x],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(l){let h=this._createMarker(l);return this.options.draggable?(L.DomUtil.addClass(h._icon,"leaflet-pm-draggable"),h.on("move",this._moveCircle,this)):h.dragging.disable(),h},_createOuterMarker(l){let h=this._createMarker(l);return h.on("drag",this._resizeCircle,this),h},_createMarker(l){let h=new L.Marker(l,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._origLatLng=l,h._pmTempLayer=!0,h.on("dragstart",this._onMarkerDragStart,this),h.on("drag",this._onMarkerDrag,this),h.on("dragend",this._onMarkerDragEnd,this),h.on("click",this._onVertexClick,this),this._helperLayers.addLayer(h),h},_moveCircle(l){if(l.target._cancelDragEventChain)return;let h=this._centerMarker.getLatLng();this._layer.setLatLng(h);let v=this._layer._radius,x=this._getLatLngOnCircle(h,v);this._outerMarker._latlng=x,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let l=this._layer.getLatLng(),h=this._layer._radius,v=this._getLatLngOnCircle(l,h);this._outerMarker.setLatLng(v),this._centerMarker.setLatLng(l),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let l=this._centerMarker.getLatLng(),h=this._outerMarker.getLatLng(),v=this._distanceCalculation(l,h);this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(v),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let l=this._centerMarker.getLatLng(),h=this._outerMarker.getLatLng();this._hintline.setLatLngs([l,h])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(l){this._vertexValidation("move",l)&&this._fireMarkerDragStart(l)},_onMarkerDrag(l){let h=l.target;h instanceof L.Marker&&!this._vertexValidationDrag(h)||this._fireMarkerDrag(l)},_onMarkerDragEnd(l){this._extedingMarkerDragEnd();let h=l.target;this._vertexValidationDragEnd(h)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(l))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let l=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,l.off("pm:drag",this._handleSnapping,this),l.on("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.on("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this),l.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let l=this._layer;l.off("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let l=this._layer._map||this._map;if(l){let h=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),l,this._layer.getLatLng()),v=L.circle(this._layer.getLatLng(),this._layer.options);v.setRadius(h);let x=l&&l.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(v,200,!x).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(v,200,!x),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let l=this._centerMarker.getLatLng(),h=this._outerMarker.getLatLng(),v=this._distanceCalculation(l,h);return this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?h=Dl(this._map,l,h,this._getMinDistanceInMeter(l)):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]&&(h=Dl(this._map,l,h,this._getMaxDistanceInMeter(l))),h},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let l=this._centerMarker.getLatLng(),h=this._outerMarker.getLatLng(),v=this._distanceCalculation(l,h);this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(l,h){return this._map.project(l).distanceTo(this._map.project(h))},_getMinDistanceInMeter(l){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,l)},_getMaxDistanceInMeter(l){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,l)},_onVertexClick(l){l.target._dragging||this._fireVertexClick(l,void 0)}}),Zt.Circle=Zt.CircleMarker.extend({_shape:"Circle",initialize(l){this._layer=l,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(l){L.PM.Edit.CircleMarker.prototype.enable.call(this,l||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let l=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(l,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let l=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!l).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!l),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(l,h){return this._map.distance(l,h)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(l){l.target._dragging||this._fireVertexClick(l,void 0)}}),Zt.ImageOverlay=Zt.extend({_shape:"ImageOverlay",initialize(l){this._layer=l,this._enabled=!1},toggleEdit(l){this.enabled()?this.disable():this.enable(l)},enabled(){return this._enabled},enable(l={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,l),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let l=this._layer.getBounds(),h=l.getNorthWest(),v=l.getNorthEast(),x=l.getSouthEast(),C=l.getSouthWest();return[h,v,x,C]}}),Zt.Text=Zt.extend({_shape:"Text",initialize(l){this._layer=l,this._enabled=!1},enable(l){if(L.Util.setOptions(this,l),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let l=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),l.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(l){this.enabled()?this.disable():this.enable(l)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let l=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,l.off("pm:drag",this._handleSnapping,this),l.on("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.on("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this),l.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let l=this._layer;l.off("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let l=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,h=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${l}px`,this.textArea.style.width=`${h}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(l){l.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(l={}){let h=this._hasFocus;this._hasFocus=l.type==="focus",!h!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(l){l&&(this.textArea.value=l),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let h=this.options.className.split(" ");this.textArea.classList.add(...h)}let l=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(l),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(l=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),l===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(l){l.preventDefault()}});var tn=function(l,h,v,x,C,F){this._matrix=[l,h,v,x,C,F]};tn.init=()=>new L.PM.Matrix(1,0,0,1,0,0),tn.prototype={transform(l){return this._transform(l.clone())},_transform(l){let h=this._matrix,{x:v,y:x}=l;return l.x=h[0]*v+h[1]*x+h[4],l.y=h[2]*v+h[3]*x+h[5],l},untransform(l){let h=this._matrix;return new L.Point((l.x/h[0]-h[4])/h[0],(l.y/h[2]-h[5])/h[2])},clone(){let l=this._matrix;return new L.PM.Matrix(l[0],l[1],l[2],l[3],l[4],l[5])},translate(l){if(l===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let h,v;return typeof l=="number"?(h=l,v=l):(h=l.x,v=l.y),this._add(1,0,0,1,h,v)},scale(l,h){if(l===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let v,x;return h=h||L.point(0,0),typeof l=="number"?(v=l,x=l):(v=l.x,x=l.y),this._add(v,0,0,x,h.x,h.y)._add(1,0,0,1,-h.x,-h.y)},rotate(l,h){let v=Math.cos(l),x=Math.sin(l);return h=h||new L.Point(0,0),this._add(v,x,-x,v,h.x,h.y)._add(1,0,0,1,-h.x,-h.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(l,h,v,x,C,F){let Q=[[],[],[]],re=this._matrix,he=[[re[0],re[2],re[4]],[re[1],re[3],re[5]],[0,0,1]],Le=[[l,v,C],[h,x,F],[0,0,1]],Je;l&&l instanceof L.PM.Matrix&&(re=l._matrix,Le=[[re[0],re[2],re[4]],[re[1],re[3],re[5]],[0,0,1]]);for(let ze=0;ze<3;ze+=1)for(let vt=0;vt<3;vt+=1){Je=0;for(let At=0;At<3;At+=1)Je+=he[ze][At]*Le[At][vt];Q[ze][vt]=Je}return this._matrix=[Q[0][0],Q[1][0],Q[0][1],Q[1][1],Q[0][2],Q[1][2]],this}};var hn=tn,rn={calcMiddleLatLng(l,h,v){let x=l.project(h),C=l.project(v);return l.unproject(x._add(C)._divideBy(2))},findLayers(l){let h=[];return l.eachLayer(v=>{(v instanceof L.Polyline||v instanceof L.Marker||v instanceof L.Circle||v instanceof L.CircleMarker||v instanceof L.ImageOverlay)&&h.push(v)}),h=h.filter(v=>!!v.pm),h=h.filter(v=>!v._pmTempLayer),h=h.filter(v=>!L.PM.optIn&&!v.options.pmIgnore||L.PM.optIn&&v.options.pmIgnore===!1),h},circleToPolygon(l,h=60,v=!0){let x=l.getLatLng(),C=l.getRadius(),F=Fi(x,C,h,0,v),Q=[];for(let re=0;re<F.length;re+=1){let he=[F[re].lat,F[re].lng];Q.push(he)}return L.polygon(Q,l.options)},disablePopup(l){l.getPopup()&&(l._tempPopupCopy=l.getPopup(),l.unbindPopup())},enablePopup(l){l._tempPopupCopy&&(l.bindPopup(l._tempPopupCopy),delete l._tempPopupCopy)},_fireEvent(l,h,v,x=!1){l.fire(h,v,x);let{groups:C}=this.getAllParentGroups(l);C.forEach(F=>{F.fire(h,v,x)})},getAllParentGroups(l){let h=[],v=[],x=C=>{for(let F in C._eventParents)if(h.indexOf(F)===-1){h.push(F);let Q=C._eventParents[F];v.push(Q),x(Q)}};return!l._pmLastGroupFetch||!l._pmLastGroupFetch.time||new Date().getTime()-l._pmLastGroupFetch.time>1e3?(x(l),l._pmLastGroupFetch={time:new Date().getTime(),groups:v,groupIds:h},{groupIds:h,groups:v}):{groups:l._pmLastGroupFetch.groups,groupIds:l._pmLastGroupFetch.groupIds}},createGeodesicPolygon:Fi,getTranslation:ir,findDeepCoordIndex(l,h,v=!0){let x,C=Q=>(re,he)=>{let Le=Q.concat(he);if(v){if(re.lat&&re.lat===h.lat&&re.lng===h.lng)return x=Le,!0}else if(re.lat&&L.latLng(re).equals(h))return x=Le,!0;return Array.isArray(re)&&re.some(C(Le))};l.some(C([]));let F={};return x&&(F={indexPath:x,index:x[x.length-1],parentPath:x.slice(0,x.length-1)}),F},findDeepMarkerIndex(l,h){let v,x=F=>(Q,re)=>{let he=F.concat(re);return Q._leaflet_id===h._leaflet_id?(v=he,!0):Array.isArray(Q)&&Q.some(x(he))};l.some(x([]));let C={};return v&&(C={indexPath:v,index:v[v.length-1],parentPath:v.slice(0,v.length-1)}),C},_getIndexFromSegment(l,h){if(h&&h.length===2){let v=this.findDeepCoordIndex(l,h[0]),x=this.findDeepCoordIndex(l,h[1]),C=Math.max(v.index,x.index);return(v.index===0||x.index===0)&&C!==1&&(C+=1),{indexA:v,indexB:x,newIndex:C,indexPath:v.indexPath,parentPath:v.parentPath}}return null},_getRotatedRectangle(l,h,v,x){let C=Ve(x,l),F=Ve(x,h),Q=v*Math.PI/180,re=Math.cos(Q),he=Math.sin(Q),Le=(F.x-C.x)*re+(F.y-C.y)*he,Je=(F.y-C.y)*re-(F.x-C.x)*he,ze=Le*re+C.x,vt=Le*he+C.y,At=-Je*he+C.x,Jt=Je*re+C.y,yn=ht(x,C),bn=ht(x,{x:ze,y:vt}),ur=ht(x,F),Ye=ht(x,{x:At,y:Jt});return[yn,bn,ur,Ye]},pxRadiusToMeterRadius(l,h,v){let x=h.project(v),C=L.point(x.x+l,x.y);return h.distance(h.unproject(C),v)}},Mn=rn;L.PM=L.PM||{version:jo.version,Map:Ls,Toolbar:ll,Draw:es,Edit:Zt,Utils:Mn,Matrix:hn,activeLang:"en",optIn:!1,initialize(l){this.addInitHooks(l)},setOptIn(l){this.optIn=!!l},addInitHooks(){function l(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(l);function h(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(h);function v(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(v);function x(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(x);function C(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(C);function F(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(F);function Q(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(Q);function re(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(re);function he(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(he)},reInitLayer(l){l instanceof L.LayerGroup&&l.eachLayer(h=>{this.reInitLayer(h)}),l.pm||L.PM.optIn&&l.options.pmIgnore!==!1||l.options.pmIgnore||(l instanceof L.Map?l.pm=new L.PM.Map(l):l instanceof L.Marker?l.options.textMarker?(l.pm=new L.PM.Edit.Text(l),l.pm._initTextMarker(),l.pm._createTextMarker(!1)):l.pm=new L.PM.Edit.Marker(l):l instanceof L.Circle?l.pm=new L.PM.Edit.Circle(l):l instanceof L.CircleMarker?l.pm=new L.PM.Edit.CircleMarker(l):l instanceof L.Rectangle?l.pm=new L.PM.Edit.Rectangle(l):l instanceof L.Polygon?l.pm=new L.PM.Edit.Polygon(l):l instanceof L.Polyline?l.pm=new L.PM.Edit.Line(l):l instanceof L.LayerGroup?l.pm=new L.PM.Edit.LayerGroup(l):l instanceof L.ImageOverlay&&(l.pm=new L.PM.Edit.ImageOverlay(l)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(l){let h=this._map.mouseEventToLayerPoint(l),v,x;for(let C=this._drawFirst;C;C=C.next)v=C.layer,v.options.interactive&&v._containsPoint(h)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(v))&&(x=v);x&&(L.DomEvent.fakeStop(l),this._fireEvent([x],l))}}),L.PM.initialize()})();class Rh extends Un.Circle{constructor(n,r){const i=r.radius||10;super(n,i,r);Ht(this,"properties");Ht(this,"angleCache",new Map);Ht(this,"lastCenter");Ht(this,"lastCenterCosLat");Ht(this,"_pendingNameUpdate",!1);Ht(this,"_nameUpdateTimeout",null);dn.measure("Circle.constructor.init",()=>{this.properties={type:"Circle",style:{name:r.name||""}},requestAnimationFrame(()=>{this.updateProperties()}),this.on("add",()=>{requestAnimationFrame(()=>{this.updateProperties()})})},"Circle")}updateProperties(){dn.measure("Circle.updateProperties",()=>{var u,f,d,m;const n=this.getRadius(),r=this.getLatLng(),i=((f=(u=this.properties)==null?void 0:u.style)==null?void 0:f.name)||"",o=((d=this.properties)==null?void 0:d.style)||{},s={type:"Circle",radius:n,diameter:n*2,surface:Math.PI*Math.pow(n,2),perimeter:2*Math.PI*n,center:{lat:r.lat,lng:r.lng},style:{...o,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((m=this.options)==null?void 0:m.dashArray)||"",name:i}};JSON.stringify(this.properties)!==JSON.stringify(s)&&(this.properties=s,this.fire("properties:updated",{shape:this,properties:this.properties}))},"Circle")}setName(n){dn.measure("Circle.setName",()=>{var r,i;((i=(r=this.properties)==null?void 0:r.style)==null?void 0:i.name)!==n&&(this.properties.style||(this.properties.style={}),this.properties.style.name=n,!this._pendingNameUpdate&&(this._pendingNameUpdate=!0,this._nameUpdateTimeout&&clearTimeout(this._nameUpdateTimeout),this._nameUpdateTimeout=setTimeout(()=>{this._pendingNameUpdate=!1,this._nameUpdateTimeout=null,this.fire("properties:updated",{shape:this,properties:this.properties})},100)))},"Circle")}getName(){return dn.measure("Circle.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""},"Circle")}setRadius(n){return dn.measure("Circle.setRadius",()=>(super.setRadius(n),this.updateProperties(),this),"Circle")}setLatLng(n){return dn.measure("Circle.setLatLng",()=>(super.setLatLng(n),this.updateProperties(),this),"Circle")}calculatePointOnCircle(n){return dn.measure("Circle.calculatePointOnCircle",()=>{const r=this.getLatLng(),i=this.getRadius();let o=this.angleCache.get(n);if(!o){const s=n*Math.PI/180;o={sin:Math.sin(s),cos:Math.cos(s)},this.angleCache.set(n,o)}return(!this.lastCenter||!this.lastCenter.equals(r))&&(this.lastCenter=r,this.lastCenterCosLat=Math.cos(r.lat*Math.PI/180)),Un.latLng(r.lat+i/111319.9*o.sin,r.lng+i/(111319.9*this.lastCenterCosLat)*o.cos)},"Circle")}getCardinalPoints(){return dn.measure("Circle.getCardinalPoints",()=>[0,45,90,135,180,225,270,315].map(n=>this.calculatePointOnCircle(n)),"Circle")}calculateAngleFromPoint(n){return dn.measure("Circle.calculateAngleFromPoint",()=>{const r=this.getLatLng(),i=n.lng-r.lng,o=n.lat-r.lat;let s=Math.atan2(o,i)*180/Math.PI;return s<0&&(s+=360),s},"Circle")}resizeFromControlPoint(n){dn.measure("Circle.resizeFromControlPoint",()=>{const i=this.getLatLng().distanceTo(n);i>0&&super.setRadius(i)},"Circle")}clearCache(){this.angleCache.clear(),this.lastCenter=void 0,this.lastCenterCosLat=void 0}}class PR extends Ot.Marker{constructor(n,r={}){const o=`<div class="geo-note-marker" style="color: ${r.color||"#2b6451"};"></div>`,u={icon:Ot.divIcon({html:o,className:"",iconSize:[24,36],iconAnchor:[12,36],popupAnchor:[0,-36]}),draggable:!1,autoPan:!0};super(n,u);Ht(this,"properties");this.properties={type:"Note",name:r.name||"Note géolocalisée",description:r.description||"",columnId:r.columnId||"en-cours",accessLevel:r.accessLevel||Ts.PRIVATE,style:{color:r.color||"#2b6451",weight:r.weight||2,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity!==void 0?r.fillOpacity:.8,radius:r.radius||12}},this.bindPopup(this.createPopupContent()),this.on("dblclick",this.onDoubleClick)}createPopupContent(){const n=document.createElement("div");n.className="geo-note-popup",n.style.display="flex",n.style.flexDirection="column";const r=document.createElement("div");r.className="geo-note-header",n.appendChild(r);const i=document.createElement("div");i.className="geo-note-title",i.textContent=this.properties.name,r.appendChild(i);const o=document.createElement("div");o.className="geo-note-badges",r.appendChild(o);const s=document.createElement("div");s.className="geo-note-badge",s.style.backgroundColor=this.getColumnColor(this.properties.columnId),s.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
        <path d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5z" />
        <path d="M11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
      </svg>
      ${this.getColumnLabel(this.properties.columnId)}
    `,o.appendChild(s);const u=document.createElement("div");if(u.className="geo-note-badge",u.style.backgroundColor=this.getAccessLevelColor(this.properties.accessLevel),u.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
      </svg>
      ${this.getAccessLevelLabel(this.properties.accessLevel)}
    `,o.appendChild(u),this.properties.description&&this.properties.description.trim()!==""){const y=document.createElement("div");y.className="geo-note-content",n.appendChild(y);const w=document.createElement("div");w.className="geo-note-description",w.textContent=this.properties.description,y.appendChild(w)}const f=document.createElement("div");f.className="geo-note-buttons",f.style.display="flex",f.style.width="100%",f.style.marginTop="auto",f.style.borderTop="1px solid #E5E7EB",n.appendChild(f);const d=document.createElement("button");d.className="geo-note-edit-button",d.style.flex="1",d.style.height="36px",d.style.border="none",d.style.borderRight="1px solid #E5E7EB",d.style.background="transparent",d.style.color="#4B5563",d.style.fontSize="11px",d.style.fontWeight="500",d.style.display="flex",d.style.alignItems="center",d.style.justifyContent="center",d.style.cursor="pointer",d.style.padding="0",d.style.margin="0",d.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3 h-3 mr-1 inline-block align-text-bottom">
        <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
      </svg>
      Éditer
    `,d.onclick=y=>{y.stopPropagation(),this.editNote()},f.appendChild(d);const m=document.createElement("button");return m.className="geo-note-open-button",m.style.flex="1",m.style.height="36px",m.style.border="none",m.style.background="transparent",m.style.color="#3B82F6",m.style.fontSize="11px",m.style.fontWeight="500",m.style.display="flex",m.style.alignItems="center",m.style.justifyContent="center",m.style.cursor="pointer",m.style.padding="0",m.style.margin="0",m.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3 h-3 mr-1 inline-block align-text-bottom">
        <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
      </svg>
      Ouvrir
    `,m.onclick=y=>{y.stopPropagation(),this.openInGoogleMaps()},f.appendChild(m),n}getColumnColor(n){return{"en-cours":"#2b6451",termine:"#10B981"}[n]||"#6B7280"}getColumnLabel(n){return{"en-cours":"En cours",termine:"Terminé"}[n]||n}getAccessLevelLabel(n){switch(n){case Ts.PRIVATE:return"Privé";case Ts.COMPANY:return"Entreprise";case Ts.EMPLOYEE:return"Salariés";case Ts.VISITOR:return"Visiteurs";default:return"Inconnu"}}getAccessLevelColor(n){switch(n){case Ts.PRIVATE:return"#9CA3AF";case Ts.COMPANY:return"#EF4444";case Ts.EMPLOYEE:return"#F59E0B";case Ts.VISITOR:return"#10B981";default:return"#6B7280"}}onDoubleClick(n){Ot.DomEvent.stopPropagation(n),this.editNote()}editNote(){this.closePopup();const n={id:this._leaflet_id,title:this.properties.name,description:this.properties.description,location:[this.getLatLng().lat,this.getLatLng().lng],columnId:this.properties.columnId||"en-cours",accessLevel:this.properties.accessLevel||"company",style:this.properties.style||{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:[],photos:[]};console.log("[GeoNote] Émission de l'événement note:edit avec",n);const r=new CustomEvent("geonote:edit",{detail:{note:n}});window.dispatchEvent(r),this.fire("note:edit",{note:n})}openInGoogleMaps(){this.closePopup();const n=this.getLatLng().lat,r=this.getLatLng().lng,i=`https://www.google.com/maps/dir/?api=1&destination=${n},${r}`;window.open(i,"_blank")}updateProperties(){var i;const n=(i=this.getElement())==null?void 0:i.querySelector(".geo-note-marker"),r=n?window.getComputedStyle(n).color:"#2b6451";this.properties.style={color:r,fillColor:r,weight:2,fillOpacity:.8,radius:12}}setNoteStyle(n){if(n.color||n.fillColor){const i=`<div class="geo-note-marker" style="color: ${n.color||n.fillColor||"#2b6451"};"></div>`,o=Ot.divIcon({html:i,className:"",iconSize:[24,36],iconAnchor:[12,36],popupAnchor:[0,-36]});this.setIcon(o)}this.updateProperties()}}const yg=(e,t)=>{if(!e||typeof e!="string"||!e.startsWith("#"))return`rgba(0, 0, 0, ${t})`;const n=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16);return`rgba(${n}, ${r}, ${i}, ${t})`},bb=(e,t)=>{e.style.fontSize=t.fontSize,e.style.color=t.color,e.style.backgroundColor=yg(t.backgroundColor,t.backgroundOpacity),t.hasBorder?e.style.border=`${t.borderWidth} solid ${yg(t.borderColor,t.borderOpacity)}`:e.style.border="none",e.style.padding=t.padding,e.style.borderRadius=t.borderRadius},vl=e=>{document.querySelectorAll(".drawing-help-message").forEach(r=>r.remove());const n=Ot.DomUtil.create("div","drawing-help-message");return n.innerHTML=e,n.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(n),n};function wb(e,t,n){const r=156543.03392*Math.cos(t*Math.PI/180)/Math.pow(2,n);return e/r}const Ui=(e,t="m",n="")=>{let r,i;return t==="m²"?e>=1e4?(r=(e/1e4).toFixed(2),i="ha"):(r=e.toFixed(2),i="m²"):t==="m"?e>=1e3?(r=(e/1e3).toFixed(2),i="km"):(r=e.toFixed(2),i="m"):(r=e.toFixed(2),i=t),n?`${n}: ${r} ${i}`:`${r} ${i}`},MR=e=>({...e,clientX:e.clientX,clientY:e.clientY,button:e.button||0,buttons:e.buttons||0,altKey:e.altKey||!1}),AR=(e,t)=>{let n;return function(...r){window.clearTimeout(n),n=window.setTimeout(()=>e.apply(this,r),t)}},Mh=(e,t)=>{let n=0;return function(...r){const i=Date.now();if(!(i-n<t))return n=i,e.apply(this,r)}};function kR(){const e=Rt(null),t=Rt(null),n=Rt(null),r=Rt(null),i=Rt(""),o=Rt(null),s=Rt(!1),u=Rt(null);window.addEventListener("clearControlPoints",()=>{o.value=null,n.value&&n.value.clearLayers(),r.value&&r.value.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(T=>T.remove()),document.querySelectorAll(".drawing-help-message").forEach(T=>T.remove())}),mc(()=>{window.removeEventListener("clearControlPoints",()=>{}),e.value&&(e.value.remove(),e.value=null)});const f=(T,ne="Double-cliquez pour éditer")=>{const fe={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0,rotation:0,physicalSize:2},ce=(pe,$e)=>{var Xe;const Qe=((Xe=e.value)==null?void 0:Xe.getZoom())||14,Ke=T.lat,He=wb($e.physicalSize,Ke,Qe);return`<div class="text-container" style="width:${He}px;height:${He}px;transform:rotate(${$e.rotation}deg)">
        <div class="text-annotation" style="font-size:${He*.2}px;color:${$e.color};background-color:${yg($e.backgroundColor,$e.backgroundOpacity)};border:${$e.hasBorder?$e.borderWidth+" solid "+yg($e.borderColor,$e.borderOpacity):"none"};padding:${$e.padding};border-radius:${$e.borderRadius}">${pe}</div>
        <div class="text-controls"><div class="control-button rotate"></div><div class="control-button move"></div></div>
      </div>`},ye=()=>{if(!e.value)return;const pe=B.getIcon(),$e={html:ce(B.properties.text,B.properties.style),className:pe.options.className};B.setIcon(Ot.divIcon($e))},oe=Ot.divIcon({html:ce(ne,fe),className:"text-container",iconSize:[40,40],iconAnchor:[20,20]}),B=Ot.marker(T,{icon:oe,draggable:!1,pmIgnore:!0});B.properties={type:"text",text:ne,style:{...fe}},e.value&&(e.value.on("zoomend",ye),B.on("remove",()=>{var pe;(pe=e.value)==null||pe.off("zoomend",ye)})),ye();let ue=!1,De=!1,Me=0,We=0;const Z=pe=>{if(!e.value)return;const $e=pe.target;if($e.classList.contains("rotate")){ue=!0;const Qe=B.getLatLng(),Ke=e.value.mouseEventToLatLng(pe);Me=Math.atan2(Ke.lat-Qe.lat,Ke.lng-Qe.lng)*180/Math.PI,We=B.properties.style.rotation||0}else $e.classList.contains("move")&&(De=!0);document.addEventListener("mousemove",de),document.addEventListener("mouseup",ve)},de=pe=>{if(!(!De||!e.value)){if(ue){const $e=B.getLatLng(),Qe=e.value.mouseEventToLatLng(pe),Ke=Math.atan2(Qe.lat-$e.lat,Qe.lng-$e.lng)*180/Math.PI,He=(We+(Ke-Me))%360;B.properties.style.rotation=He;const Xe=B.getIcon(),st={html:ce(B.properties.text,B.properties.style),className:Xe.options.className};B.setIcon(Ot.divIcon(st))}else if(De){const $e=MR(pe),Qe=e.value.mouseEventToLatLng($e);B.setLatLng(Qe)}}},ve=()=>{ue=!1,De=!1,document.removeEventListener("mousemove",de),document.removeEventListener("mouseup",ve)};return B.on("add",()=>{const pe=B.getElement();pe&&pe.querySelectorAll(".control-button").forEach(Qe=>{Qe.addEventListener("mousedown",Z)})}),B.on("remove",()=>{const pe=B.getElement();pe&&pe.querySelectorAll(".control-button").forEach(Qe=>{Qe.removeEventListener("mousedown",Z)})}),B.on("dblclick",pe=>{var st;Ot.DomEvent.stopPropagation(pe);const $e=(st=B.getElement())==null?void 0:st.querySelector(".text-annotation");if(!$e)return;$e.contentEditable="true",$e.focus(),$e.classList.add("editing");const Qe=window.getSelection(),Ke=document.createRange();Ke.selectNodeContents($e),Qe==null||Qe.removeAllRanges(),Qe==null||Qe.addRange(Ke);const He=()=>{$e.contentEditable="false",$e.classList.remove("editing");const kt=$e.innerText.trim();if(kt){B.properties.text=kt;const Ct=B.getIcon(),Ut={html:ce(kt,B.properties.style),className:Ct.options.className};B.setIcon(Ot.divIcon(Ut))}$e.removeEventListener("blur",He),$e.removeEventListener("keydown",Xe)},Xe=kt=>{kt.key==="Enter"&&!kt.shiftKey&&(kt.preventDefault(),He())};$e.addEventListener("blur",He),$e.addEventListener("keydown",Xe)}),B},d=(T,ne)=>{const fe=Ot.DomUtil.create("div","measure-tooltip");if(fe.innerHTML=ne,fe.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(fe),e.value){const ce=e.value.latLngToContainerPoint(T);fe.style.left=`${ce.x+10}px`,fe.style.top=`${ce.y-25}px`}return fe},m=Mh((T,ne,fe)=>{if(T&&(T.innerHTML=fe,e.value)){const ce=e.value.latLngToContainerPoint(ne);T.style.left=`${ce.x+10}px`,T.style.top=`${ce.y-25}px`}},100),y=(T,ne,fe)=>{T.on("mouseover",()=>{const ce=d(T.getLatLng(),fe());T.measureDiv=ce}),T.on("mousemove",ce=>{T.measureDiv&&e.value&&m(T.measureDiv,ce.latlng,fe())}),T.on("mouseout",()=>{T.measureDiv&&(T.measureDiv.remove(),T.measureDiv=void 0)})};let w=[];const _=()=>{var T;w.cleanup&&w.cleanup(),n.value&&n.value.clearLayers(),w=[],(T=r.value)==null||T.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(ne=>ne.remove()),t.value&&t.value.getLayers().forEach(ne=>{ne instanceof da&&ne.clearHelperPoints()})},M=(T,ne="#2563EB")=>{const fe=Ot.circleMarker(T,{radius:6,color:ne,fillColor:ne,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return n.value&&n.value.addLayer(fe),fe},k=(T,ne)=>{var ce,ye,oe,B,ue,De;console.log("Input layer:",{type:ne,instanceof:{Circle:T instanceof Ot.Circle,Rectangle:T instanceof Ot.Rectangle,Polygon:T instanceof Ot.Polygon,Polyline:T instanceof Ot.Polyline,ElevationLine:T instanceof Sf,Line:T instanceof Mo},options:T.options});const fe={type:ne,style:T.options||{}};try{if(T instanceof Ot.Circle){const Me=T.getRadius();fe.radius=Me,fe.diameter=Me*2,fe.surface=Math.PI*Math.pow(Me,2),fe.perimeter=2*Math.PI*Me,fe.center=T.getLatLng()}else if(T instanceof Ot.Rectangle){const Me=T.getBounds(),We=Me.getNorthEast(),Z=Me.getSouthWest(),de=du([[Z.lng,Z.lat],[We.lng,Z.lat]]),ve=du([[Z.lng,Z.lat],[Z.lng,We.lat]]),pe=Uf(de,{units:"meters"}),$e=Uf(ve,{units:"meters"});fe.width=pe,fe.height=$e,fe.surface=pe*$e,fe.perimeter=2*(pe+$e),fe.dimensions={width:pe,height:$e}}else if(T instanceof Ot.Polygon)try{const We=T.getLatLngs()[0].map(de=>[de.lng,de.lat]);We.push(We[0]);const Z=hu([We]);fe.surface=rc(Z),fe.perimeter=Uf(du(We),{units:"meters"})}catch(Me){console.error("Erreur lors du calcul des propriétés du polygone",Me)}else if(T instanceof Ot.Polyline&&!(T instanceof Ot.Polygon))try{const Me=T.getLatLngs();let We=0;for(let Z=1;Z<Me.length;Z++)We+=Me[Z].distanceTo(Me[Z-1]);fe.length=We}catch(Me){console.error("Erreur lors du calcul de la longueur de la ligne",Me)}fe.style={...fe.style,color:((ce=T.options)==null?void 0:ce.color)||"#3388ff",weight:((ye=T.options)==null?void 0:ye.weight)||3,opacity:((oe=T.options)==null?void 0:oe.opacity)||1,fillColor:((B=T.options)==null?void 0:B.fillColor)||"#3388ff",fillOpacity:((ue=T.options)==null?void 0:ue.fillOpacity)||.2,dashArray:((De=T.options)==null?void 0:De.dashArray)||""}}catch(Me){console.error("Error calculating shape properties:",Me)}return fe},R=(T,ne=2)=>{var B;if(!e.value){console.warn("Map is not available for text size update");return}const fe=e.value.getZoom(),ce=T.getLatLng().lat,ye=wb(ne,ce,fe),oe=(B=T.getElement())==null?void 0:B.querySelector(".text-annotation");oe&&(T.properties.style.fontSize=`${ye}px`,T.properties.physicalWidth=ne,T.properties.physicalHeight=ne,bb(oe,T.properties.style))},N=(T,ne,fe)=>{const ce=Ot.map(T).setView(ne,fe);e.value=ce,Ot.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:5}).addTo(ce);const ye=new Ot.FeatureGroup;return ye.addTo(ce),t.value=ye,n.value=Ot.featureGroup().addTo(ce),r.value=Ot.featureGroup().addTo(ce),ce.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:ye,snapLayers:[ye,r.value],templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),ce.on("pm:drawstart",oe=>{s.value=!0,oe.shape==="Circle"&&i.value==="Semicircle"&&(ce.getContainer().style.cursor="crosshair")}),ce.on("pm:drawend",()=>{s.value=!1,ce.getContainer().style.cursor="",o.value&&vl("Cliquez sur la forme pour afficher les points de contrôle")}),ce.on("pm:create",Se),ye.on("click",oe=>{var ue,De,Me,We,Z,de,ve,pe,$e,Qe,Ke,He,Xe,st,kt;Ot.DomEvent.stopPropagation(oe);const B=oe.layer;if(B.name&&!((ue=B.properties)!=null&&ue.name)?(B.properties||(B.properties={}),B.properties.name=B.name):(De=B.properties)!=null&&De.name&&!B.name&&(B.name=B.properties.name),console.log("[featureGroup click] État du nom:",{directName:B.name,propertiesName:(Me=B.properties)==null?void 0:Me.name,fullProperties:B.properties}),(We=r.value)==null||We.clearLayers(),_(),o.value=B,B instanceof Rh)I(B);else if(B instanceof Ot.Circle){console.log("[useMapDrawing] Création du cercle personnalisé:",{propertyDescriptor:Object.getOwnPropertyDescriptor(B,"name"),directName:B.name,propertiesName:(Z=B.properties)==null?void 0:Z.name,styleNameBeforeTransfer:(ve=(de=B.properties)==null?void 0:de.style)==null?void 0:ve.name,nameIsEnumerable:Object.keys(B).includes("name"),allProperties:Object.keys(B.properties||{}),_dbId:B._dbId});const Ct=B.name,Ut=(pe=B.properties)==null?void 0:pe.name,Gt=(Qe=($e=B.properties)==null?void 0:$e.style)==null?void 0:Qe.name,fn=B._dbId,pn=new Rh(B.getLatLng(),{...B.options,radius:B.getRadius()});B.properties?pn.properties={...B.properties||{}}:pn.updateProperties();const et=Ct||Ut||Gt;et&&(pn.properties.name=et,pn.properties.style||(pn.properties.style={}),pn.properties.style.name=et,pn.name=et),fn&&(pn._dbId=fn),console.log("[useMapDrawing] Cercle après conversion:",{name:pn.name,propertiesName:pn.properties.name,stylePropertyName:(Ke=pn.properties.style)==null?void 0:Ke.name,allProperties:Object.keys(pn.properties||{})}),(He=t.value)==null||He.removeLayer(B),(Xe=t.value)==null||Xe.addLayer(pn),o.value=pn,I(pn)}else if(B instanceof da)K(B);else if(B instanceof Ot.Rectangle){const Ct=new da(B.getBounds(),{...B.options});Ct.updateProperties(),(st=t.value)==null||st.removeLayer(B),(kt=t.value)==null||kt.addLayer(Ct),o.value=Ct,K(Ct)}else B instanceof Ot.Polygon?O(B):(B instanceof Mo||B instanceof Ot.Polyline)&&$(B)}),ce.on("pm:edit",oe=>{var ue,De,Me;console.log("[pm:edit] Début",{layer:oe.layer,currentProperties:oe.layer.properties});const B=oe.layer;if(B){const We=((ue=B.properties)==null?void 0:ue.type)||"unknown";if(xe(B,We),console.log("[pm:edit] Après updateLayerProperties",{updatedProperties:B.properties,selectedShape:o.value}),B instanceof Rh)I(B);else if(B instanceof da)K(B);else if(B instanceof Ot.Rectangle){const Z=new da(B.getBounds(),{...B.options});Z.updateProperties(),(De=t.value)==null||De.removeLayer(B),(Me=t.value)==null||Me.addLayer(Z),o.value=Z,K(Z)}else B instanceof Ot.Polygon?O(B):B instanceof Mo?(B.updateProperties(),xe(B,"Line"),$(B)):B instanceof Ot.Polyline&&$(B)}}),ce.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(oe=>oe.remove()),vl("Déplacez la forme à l'endroit souhaité")}),ce.on("pm:dragend",oe=>{var ue,De,Me;console.log("[pm:dragend] Début",{layer:oe.layer,currentProperties:oe.layer.properties});const B=oe.layer;if(B){const We=((ue=B.properties)==null?void 0:ue.type)||"unknown";if(B instanceof Ot.Rectangle&&!(B instanceof da)){const Z=new da(B.getBounds(),{...B.options});Z.updateProperties(),(De=t.value)==null||De.removeLayer(B),(Me=t.value)==null||Me.addLayer(Z),o.value=Z,K(Z)}else B instanceof Mo?(B.updateProperties(),xe(B,"Line"),$(B)):xe(B,We);console.log("[pm:dragend] Après updateLayerProperties",{updatedProperties:B.properties,selectedShape:o.value})}setTimeout(()=>{vl("Cliquez sur la forme pour afficher les points de contrôle")},100)}),ce.on("pm:remove",()=>{var oe;(oe=document.querySelector(".drawing-help-message"))==null||oe.remove()}),ce.on("pm:select",()=>{document.querySelectorAll(".drawing-help-message").forEach(oe=>oe.remove()),vl("Utilisez les points de contrôle pour modifier la forme")}),ce.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(oe=>oe.remove())}),ce.on("zoomstart",()=>{o.value&&(_(),o.value=null,document.querySelectorAll(".drawing-help-message").forEach(oe=>oe.remove()))}),ce},j=()=>{if(!(!e.value||!t.value||!t.value.getLayers().length))try{const T=t.value.getBounds();if(T.isValid()){const ne={zoomAnimation:e.value.options.zoomAnimation,fadeAnimation:e.value.options.fadeAnimation,markerZoomAnimation:e.value.options.markerZoomAnimation};e.value.options.zoomAnimation=!1,e.value.options.fadeAnimation=!1,e.value.options.markerZoomAnimation=!1,e.value.fitBounds(T,{padding:[50,50],maxZoom:18,animate:!1,duration:0,noMoveStart:!0}),e.value.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{try{e.value.options.fadeAnimation=ne.fadeAnimation,setTimeout(()=>{try{e.value.options.zoomAnimation=ne.zoomAnimation,e.value.options.markerZoomAnimation=ne.markerZoomAnimation}catch(fe){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",fe)}},500)}catch(fe){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",fe)}},500)}}catch(T){if(console.warn("[useMapDrawing] Error adjusting view:",T),e.value)try{e.value.options.zoomAnimation=!0,e.value.options.fadeAnimation=!0,e.value.options.markerZoomAnimation=!0,e.value.invalidateSize({animate:!1,pan:!1})}catch(ne){console.error("[useMapDrawing] Erreur lors de la restauration après échec:",ne)}}},J=T=>{var fe;if(!e.value)return;document.querySelectorAll(".drawing-help-message").forEach(ce=>ce.remove());try{const ce=e.value.pm;ce.globalEditModeEnabled()&&ce.disableGlobalEditMode(),ce.globalRemovalModeEnabled()&&ce.disableGlobalRemovalMode(),ce.disableDraw(),_(),(fe=r.value)==null||fe.clearLayers()}catch(ce){console.error("Error disabling modes:",ce)}if(i.value=T,!T){_();return}let ne=T;switch(T){case"Note":ne="GeoNote";break;case"Polygon":ne="Polygon";break;case"Line":ne="Line";break;case"ElevationLine":ne="ElevationLine";break;default:ne=T}T=ne,Re(),setTimeout(()=>{var ce,ye,oe,B,ue,De,Me,We,Z,de,ve,pe,$e;try{switch(T){case"Polygon":vl("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(ce=e.value)==null||ce.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(ye=e.value)==null||ye.off("pm:create"),(oe=e.value)==null||oe.on("pm:create",Ke=>{var He,Xe,st;if(Ke.shape==="Polygon"&&Ke.layer){const kt=Ke.layer.getLatLngs()[0];(He=e.value)==null||He.removeLayer(Ke.layer),(Xe=t.value)!=null&&Xe.hasLayer(Ke.layer)&&t.value.removeLayer(Ke.layer);const Ct=new gf(kt,{color:"#3B82F6",weight:3,fillColor:"#3B82F6",fillOpacity:.2});t.value&&(t.value.addLayer(Ct),o.value=Ct,Ct.updateProperties()),(st=e.value)==null||st.pm.disableDraw(),Re()}});break;case"Circle":t.value&&t.value.getLayers().filter(He=>He instanceof da).forEach(He=>{He.toggleHelperPoints(e.value,!0,"#DC2626","#2563EB")}),e.value.pm.setGlobalOptions({snapDistance:15,snapSegment:!0,snapVertices:!0,snapLayers:[t.value,r.value],snapMiddle:!0,snapIntersections:!0}),vl("Positionnez le centre du cercle. Points bleus : milieu des côtés, Points rouges : sommets, Point vert : centre"),e.value.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Rectangle":vl("Cliquez et maintenez pour dessiner un rectangle, relâchez pour terminer"),(B=e.value)==null||B.pm.enableDraw("Rectangle",{finishOn:"mouseup"});break;case"Polygon":vl("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(ue=e.value)==null||ue.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":vl("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(De=e.value)==null||De.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(Me=e.value)==null||Me.off("pm:create"),(We=e.value)==null||We.on("pm:create",Ke=>{var He,Xe,st;if(Ke.shape==="Line"&&Ke.layer){const kt=Ke.layer.getLatLngs();(He=e.value)==null||He.removeLayer(Ke.layer),(Xe=t.value)!=null&&Xe.hasLayer(Ke.layer)&&t.value.removeLayer(Ke.layer);const Ct=new Mo(kt,{color:"#3B82F6",weight:3,opacity:.8});t.value&&(t.value.addLayer(Ct),o.value=Ct,Ct.updateProperties()),(st=e.value)==null||st.pm.disableDraw(),Re()}});break;case"Text":if(vl("Cliquez pour ajouter du texte, double-cliquez pour éditer"),e.value){const Ke=He=>{if(!e.value||!t.value)return;const Xe=f(He.latlng);t.value.addLayer(Xe),o.value=Xe,e.value.off("click",Ke),J("")};e.value.on("click",Ke)}break;case"GeoNote":if(vl("Cliquez pour ajouter une note géolocalisée, double-cliquez pour éditer"),e.value){const Ke=He=>{if(!e.value||!t.value)return;const Xe=new PR(He.latlng,{color:"#3B82F6",name:"Note géolocalisée",description:""});t.value.addLayer(Xe),o.value=Xe,Xe.updateProperties(),Xe.openPopup(),e.value.off("click",Ke),J("")};e.value.on("click",Ke)}break;case"delete":vl("Cliquez sur une forme pour la supprimer"),(Z=e.value)==null||Z.pm.enableGlobalRemovalMode();break;case"ElevationLine":vl("Cliquez et maintenez pour tracer le profil altimétrique"),(de=e.value)==null||de.pm.enableDraw("Line",{finishOn:"mouseup",continueDrawing:!1,allowSelfIntersection:!1,templineStyle:{color:"#FF4500",weight:4,opacity:.8}}),(ve=e.value)==null||ve.pm.setGlobalOptions({continueDrawing:!1,finishOn:"mouseup",preventMarkerRemoval:!0,preventVertexEdit:!0,preventMarkerEdit:!0}),(pe=e.value)==null||pe.off("pm:create"),($e=e.value)==null||$e.on("pm:create",async Ke=>{var He,Xe,st;if(Ke.shape==="Line"&&Ke.layer){const kt=Ke.layer.getLatLngs();(He=e.value)==null||He.removeLayer(Ke.layer),(Xe=t.value)!=null&&Xe.hasLayer(Ke.layer)&&t.value.removeLayer(Ke.layer);const Ct=new Sf(kt,{color:"#FF4500",weight:4,opacity:.8,interactive:!1,pmIgnore:!0});if(t.value){t.value.addLayer(Ct),o.value=Ct,await Ct.updateElevationProfile();const Ut=k(Ct,"ElevationLine");Object.assign(Ct.properties,{...Ut,...Ct.properties,type:"ElevationLine",elevationData:Ct.getElevationData()}),o.value=null,Ko(()=>{o.value=Ct})}(st=e.value)==null||st.pm.disableDraw(),i.value="",Re()}});break}}catch(Qe){console.error("[setDrawingTool] Erreur lors de la configuration de l'outil:",Qe)}},100)},te=T=>{var fe;if(!o.value)return;const ne=o.value;if(ne.properties=ne.properties||{},ne.properties.style=ne.properties.style||{},ne.properties.style={...ne.properties.style,...T},ne.properties.type==="text"){const ce=ne.properties._textLayer,ye=(fe=ce==null?void 0:ce.getElement())==null?void 0:fe.querySelector(".text-annotation");ye&&bb(ye,ne.properties.style);const oe={color:T.borderColor||ne.properties.style.borderColor,weight:parseInt(T.borderWidth||ne.properties.style.borderWidth),opacity:T.borderOpacity??ne.properties.style.borderOpacity};"setStyle"in ne&&ne.setStyle(oe)}else if(ne.properties.type==="TextRectangle")console.log("[updateShapeStyle] TextRectangle supprimé selon les exigences");else{const ce={};T.fillColor&&(ce.fillColor=T.fillColor),T.fillOpacity!==void 0&&(ce.fillOpacity=T.fillOpacity),T.strokeColor&&(ce.color=T.strokeColor),T.strokeOpacity!==void 0&&(ce.opacity=T.strokeOpacity),T.strokeWidth!==void 0&&(ce.weight=T.strokeWidth),T.dashArray&&(ce.dashArray=T.dashArray),"setStyle"in ne&&ne.setStyle(ce)}},ae=T=>{var B,ue,De,Me,We;if(!o.value){console.warn("[useMapDrawing] Cannot update properties: no shape selected");return}console.log("[useMapDrawing] Updating shape properties",{before:o.value.properties,newProps:T,layerType:(B=o.value.properties)==null?void 0:B.type,beforeName:o.value.name,beforePropertiesName:(ue=o.value.properties)==null?void 0:ue.name,beforeCategory:(De=o.value.properties)==null?void 0:De.category,nameIsDirectProperty:"name"in o.value,dbId:o.value._dbId}),o.value.properties||(o.value.properties={});const ne=o.value.properties.type;console.log(`[useMapDrawing] Type actuel de la forme: ${ne}`),o.value.properties.category||(o.value.properties.category="forages"),o.value.properties.accessLevel||(o.value.properties.accessLevel="visitor"),o.value._dbId||(o.value._dbId=Date.now()+Math.floor(Math.random()*1e3),console.log(`[useMapDrawing] Assigned temporary dbId: ${o.value._dbId}`));const fe=o.value.properties.type;console.log(`[useMapDrawing] Type original avant mise à jour: ${fe}`);const ce=o.value.properties.category;console.log(`[useMapDrawing] Catégorie existante: ${ce}`);const ye="category"in T&&T.category!==ce;if(Object.keys(T).forEach(Z=>{Z==="type"&&fe?console.log(`[useMapDrawing] Préservation du type original: ${fe}`):o.value.properties[Z]=T[Z],Z==="name"&&(console.log(`[useMapDrawing] Setting name "${T[Z]}" directly on layer`),o.value.name=T[Z]),Z==="category"&&console.log(`[useMapDrawing] Mise à jour de la catégorie: ${ce} -> ${T[Z]}`)}),fe&&(o.value.properties.type=fe),ce&&!ye&&(console.log(`[useMapDrawing] Restauration de la catégorie originale: ${ce}`),o.value.properties.category=ce),o.value._dbId&&ye){const Z=rm(),de=Z.elements.find(ve=>ve.id===o.value._dbId);if(de){console.log(`[useMapDrawing] Mise à jour de la catégorie dans le store: ${o.value.properties.category} pour l'élément ${o.value._dbId}`);const ve=de;ve.data||(ve.data={}),ve.data.category=o.value.properties.category,Z.$patch({unsavedChanges:!0})}}const oe=new CustomEvent("shape:propertiesUpdated",{detail:{shape:o.value,properties:o.value.properties,categoryUpdated:ye}});if(window.dispatchEvent(oe),console.log("[useMapDrawing] Updated shape properties",{after:o.value.properties,name:o.value.name,propertiesName:(Me=o.value.properties)==null?void 0:Me.name,allLayerKeys:Object.keys(o.value),allPropertiesKeys:Object.keys(o.value.properties||{})}),((We=o.value.properties)==null?void 0:We.type)==="Circle"){const Z=o.value,de=Z.getRadius();Z.properties.radius=de,Z.properties.diameter=de*2,Z.properties.surface=Math.PI*de*de,Z.properties.perimeter=2*Math.PI*de,T.name&&(console.log(`[useMapDrawing] Ensuring circle name "${T.name}" is set in multiple places`),Z.properties.name=T.name,Z.properties.style.name=T.name,Z.name=T.name,console.log("[useMapDrawing] Circle name verification:",{circleDirectName:Z.name,circlePropertiesName:Z.properties.name,nameIsEnumerable:Object.keys(Z).includes("name"),propertiesNameIsEnumerable:Object.keys(Z.properties).includes("name")}))}},le=T=>{console.log("[forceShapeUpdate] Début",{currentProperties:T.properties,selectedShapeRef:o.value}),o.value=null,Ko(()=>{o.value=T,console.log("[forceShapeUpdate] Après mise à jour",{selectedShape:o.value,properties:o.value.properties})})},xe=(T,ne)=>{console.log("[updateLayerProperties] Début",{layer:T,shapeType:ne,currentProperties:T.properties}),AR((ce,ye)=>{const oe=k(ce,ye);console.log("[updateLayerProperties] Nouvelles propriétés calculées",{newProperties:oe}),ce.properties={...oe},le(ce),ce.fire("properties:updated",{shape:ce,properties:ce.properties}),console.log("[updateLayerProperties] Fin",{finalProperties:ce.properties,selectedShape:o.value})},100)(T,ne)},G=(T,ne)=>Ot.latLng((T.lat+ne.lat)/2,(T.lng+ne.lng)/2),I=T=>{if(!e.value||!t.value)return;_();const ne=T.getLatLng(),fe=T.getRadius(),ce=M(ne,"#059669");w.push(ce),y(ce,T,()=>[Ui(fe,"m","Rayon"),Ui(fe*2,"m","Diamètre"),Ui(Math.PI*Math.pow(fe,2),"m²","Surface")].join("<br>"));const ye=[],oe=[0,45,90,135,180,225,270,315];oe.forEach(B=>{const ue=T.calculatePointOnCircle(B),De=M(ue,"#2563EB");ye.push(De),w.push(De),y(De,T,()=>Ui(fe,"m","Rayon")),De.on("mousedown",Me=>{if(!e.value)return;Ot.DomEvent.stopPropagation(Me),e.value.dragging.disable();let We=!0;const Z=ve=>{We&&(T.resizeFromControlPoint(ve.latlng),ye.forEach((pe,$e)=>{const Qe=T.calculatePointOnCircle(oe[$e]);pe.setLatLng(Qe)}),ce.setLatLng(T.getLatLng()),De.measureDiv&&(De.measureDiv.innerHTML=Ui(T.getRadius(),"m","Rayon")))},de=()=>{We=!1,e.value&&(e.value.off("mousemove",Z),document.removeEventListener("mouseup",de),e.value.dragging.enable(),T.updateProperties(),o.value=null,Ko(()=>{o.value=T}),xe(T,"Circle"))};e.value.on("mousemove",Z),document.addEventListener("mouseup",de)})}),ce.on("mousedown",B=>{if(!e.value)return;Ot.DomEvent.stopPropagation(B),e.value.dragging.disable();let ue=!0;const De=T.getLatLng(),Me=B.latlng,We=de=>{if(!ue)return;const ve=de.latlng.lng-Me.lng,pe=de.latlng.lat-Me.lat,$e=Ot.latLng(De.lat+pe,De.lng+ve);Ot.Circle.prototype.setLatLng.call(T,$e),ce.setLatLng($e),ye.forEach((Qe,Ke)=>{const He=T.calculatePointOnCircle(oe[Ke]);Qe.setLatLng(He)}),ce.measureDiv&&(ce.measureDiv.innerHTML=[Ui(T.getRadius(),"m","Rayon"),Ui(T.getRadius()*2,"m","Diamètre"),Ui(Math.PI*Math.pow(T.getRadius(),2),"m²","Surface")].join("<br>"))},Z=()=>{ue=!1,e.value&&(e.value.off("mousemove",We),document.removeEventListener("mouseup",Z),e.value.dragging.enable(),T.updateProperties(),o.value=null,Ko(()=>{o.value=T}),xe(T,"Circle"))};e.value.on("mousemove",We),document.addEventListener("mouseup",Z)}),T.on("circle:resized",()=>{xe(T,"Circle")}),o.value=T},K=T=>{var We;if(!e.value||!t.value)return;if(!(T instanceof da)){console.warn("La couche n'est pas une instance de Rectangle");return}const ne=T;_();const fe=ne.getCenter(),ce=ne.getRotatedCorners(),ye=ne.getMidPoints(),oe=M(fe,"#059669");w.push(oe),y(oe,ne,()=>{const{width:Z,height:de}=ne.getDimensions(),ve=Z*de,pe=ne.getRotation();return[Ui(Z,"m","Largeur"),Ui(de,"m","Hauteur"),Ui(ve,"m²","Surface"),`Rotation: ${pe.toFixed(1)}°`].join("<br>")});const B=M(Ot.latLng(fe.lat+(ce[0].lat-fe.lat)*1.2,fe.lng+(ce[0].lng-fe.lng)*1.2),"#F97316");w.push(B);const ue=Ot.polyline([fe,B.getLatLng()],{color:"#F97316",weight:1,opacity:.6,dashArray:"4",pmIgnore:!0});(We=n.value)==null||We.addLayer(ue);const De=ce.map(Z=>{const de=M(Z,"#DC2626");return w.push(de),y(de,ne,()=>{const{width:ve,height:pe}=ne.getDimensions();return[Ui(ve,"m","Largeur"),Ui(pe,"m","Hauteur")].join("<br>")}),de}),Me=ye.map((Z,de)=>{const ve=M(Z,"#2b6451");return w.push(ve),y(ve,ne,()=>{const{width:pe,height:$e}=ne.getDimensions(),Qe=de%2===0?pe:$e;return[Ui(Qe,"m","Longueur du côté"),Ui(Qe/2,"m","Distance au coin")].join("<br>")}),ve});oe.on("mousedown",Z=>{if(!e.value)return;Ot.DomEvent.stopPropagation(Z),e.value.dragging.disable();let de=!0;const ve=$e=>{if(!de)return;ne.moveFromCenter($e.latlng);const Qe=ne.getRotatedCorners(),Ke=ne.getMidPoints();De.forEach((Xe,st)=>Xe.setLatLng(Qe[st])),Me.forEach((Xe,st)=>Xe.setLatLng(Ke[st])),oe.setLatLng($e.latlng);const He=Ot.latLng($e.latlng.lat+(Qe[0].lat-$e.latlng.lat)*1.2,$e.latlng.lng+(Qe[0].lng-$e.latlng.lng)*1.2);B.setLatLng(He),ue.setLatLngs([$e.latlng,He])},pe=()=>{de=!1,e.value&&(e.value.off("mousemove",ve),document.removeEventListener("mouseup",pe),e.value.dragging.enable(),ne.updateProperties(),o.value=null,Ko(()=>{o.value=ne}))};e.value.on("mousemove",ve),document.addEventListener("mouseup",pe)}),B.on("mousedown",Z=>{if(!e.value)return;Ot.DomEvent.stopPropagation(Z),e.value.dragging.disable();let de=!1;const ve=Z.latlng,pe=ne.getRotation(),$e=ne.getCenter(),Qe=ve.lng-$e.lng,Ke=ve.lat-$e.lat,He=Math.atan2(Ke,Qe)*180/Math.PI;w.forEach(kt=>{kt!==B&&(kt.setStyle({opacity:0,fillOpacity:0}),kt.measureDiv&&(kt.measureDiv.style.display="none"))});const Xe=Mh(kt=>{de||(de=!0);const Ct=kt.latlng.lng-$e.lng,Ut=kt.latlng.lat-$e.lat;let fn=Math.atan2(Ut,Ct)*180/Math.PI-He,pn=(pe+fn)%360;pn<0&&(pn+=360),ne.setRotation(pn,!1),B.setLatLng(kt.latlng),ue.setLatLngs([$e,kt.latlng])},16),st=()=>{e.value&&(e.value.off("mousemove",Xe),document.removeEventListener("mouseup",st),e.value.dragging.enable(),de&&ne.finalizeRotation(),o.value=null,Ko(()=>{o.value=ne,_(),K(ne)}))};e.value.on("mousemove",Xe),document.addEventListener("mouseup",st)}),ne.on("coordinates:updated",Z=>{const{corners:de,center:ve}=Z,pe=ne.getMidPoints();De.forEach((Qe,Ke)=>Qe.setLatLng(de[Ke])),Me.forEach((Qe,Ke)=>Qe.setLatLng(pe[Ke])),oe.setLatLng(ve);const $e=Ot.latLng(ve.lat+(de[0].lat-ve.lat)*1.2,ve.lng+(de[0].lng-ve.lng)*1.2);B.setLatLng($e),ue.setLatLngs([ve,$e])})},$=T=>{if(!e.value||!t.value)return;_();const ne=T.getLatLngs();if(!ne||ne.length===0){console.warn("Pas de points pour la ligne");return}let fe=null;if(T instanceof Mo){const ce=T.getCenter();fe=M(ce,"#059669"),w.push(fe),y(fe,T,()=>{const ye=T.getLength()||0;return Ui(ye,"m","Longueur totale")}),fe.on("mousedown",ye=>{if(!e.value)return;Ot.DomEvent.stopPropagation(ye),e.value.dragging.disable();let oe=!0;const B=T.getLatLngs().map(Z=>Ot.latLng(Z.lat,Z.lng)),ue=ye.latlng;T instanceof Mo&&(T.off("move:end"),T.off("vertex:moved"),T.off("latlngs:updated"),T.off("properties:updated")),w.forEach((Z,de)=>{de>0&&(Z.setStyle({opacity:0,fillOpacity:0}),Z.measureDiv&&(Z.measureDiv.style.display="none"))});const Me=Mh(Z=>{if(!oe)return;const de=Z.latlng.lng-ue.lng,ve=Z.latlng.lat-ue.lat,pe=B.map($e=>Ot.latLng($e.lat+ve,$e.lng+de));Ot.Polyline.prototype.setLatLngs.call(T,pe),fe==null||fe.setLatLng(Z.latlng)},16),We=()=>{if(oe=!1,!!e.value){if(e.value.off("mousemove",Me),document.removeEventListener("mouseup",We),e.value.dragging.enable(),T instanceof Mo){const Z=()=>{_(),$(T)};T.on("move:end",Z),T.on("vertex:moved",Z),T.on("latlngs:updated",Z),T.on("properties:updated",Z),T.updateProperties(),xe(T,"Line")}_(),$(T)}};e.value.on("mousemove",Me),document.addEventListener("mouseup",We)})}if(ne.forEach((ce,ye)=>{const oe=M(ce,"#DC2626");w.push(oe),y(oe,T,()=>{if(T instanceof Mo){const B=T.getLength()||0,ue=T.getLengthToVertex(ye);return[Ui(ue,"m","Distance depuis le début"),Ui(B,"m","Longueur totale")].join("<br>")}return""}),oe.on("mousedown",B=>{if(!e.value)return;Ot.DomEvent.stopPropagation(B),e.value.dragging.disable();let ue=!0;T instanceof Mo&&(T.off("move:end"),T.off("vertex:moved"),T.off("latlngs:updated"),T.off("properties:updated")),w.forEach((We,Z)=>{Z!==ye+1&&(We.setStyle({opacity:0,fillOpacity:0}),We.measureDiv&&(We.measureDiv.style.display="none"))});const De=Mh(We=>{if(!ue)return;const Z=T.getLatLngs();Z[ye]=We.latlng,Ot.Polyline.prototype.setLatLngs.call(T,Z),oe.setLatLng(We.latlng)},16),Me=()=>{if(ue=!1,!!e.value){if(e.value.off("mousemove",De),document.removeEventListener("mouseup",Me),e.value.dragging.enable(),T instanceof Mo){const We=()=>{_(),$(T)};T.on("move:end",We),T.on("vertex:moved",We),T.on("latlngs:updated",We),T.on("properties:updated",We),T.updateProperties(),xe(T,"Line")}_(),$(T)}};e.value.on("mousemove",De),document.addEventListener("mouseup",Me)})}),ne.length>=2)for(let ce=0;ce<ne.length-1;ce++){const ye=ne[ce],oe=ne[ce+1],B=Ot.latLng((ye.lat+oe.lat)/2,(ye.lng+oe.lng)/2),ue=M(B,"#2b6451");w.push(ue),y(ue,T,()=>{if(T instanceof Mo){const De=T.getSegmentLengthAt(ce),Me=T.getLength()||0,We=T.getLengthToVertex(ce)+De/2;return[Ui(De,"m","Longueur du segment"),Ui(De/2,"m","Demi-segment"),Ui(We,"m","Distance depuis le début"),Ui(Me,"m","Longueur totale")].join("<br>")}return""})}if(T instanceof Mo){const ce=()=>{_(),$(T)};T.on("move:start",()=>{w.forEach((ye,oe)=>{oe>0&&(ye.setStyle({opacity:0,fillOpacity:0}),ye.measureDiv&&(ye.measureDiv.style.display="none"))})}),T.on("move:end",ce),T.on("vertex:moved",ce),T.on("latlngs:updated",ce),T.on("properties:updated",ce),w.cleanup=()=>{T.off("move:start",()=>{}),T.off("move:end",ce),T.off("vertex:moved",ce),T.off("latlngs:updated",ce),T.off("properties:updated",ce)}}},O=T=>{if(!e.value||!t.value)return;_();const ne=T.getLatLngs()[0],fe=ne.map(Me=>[Me.lng,Me.lat]);fe.push(fe[0]);const ce=hu([fe]),ye=rc(ce),oe=ne.reduce((Me,We,Z)=>{const de=ne[(Z+1)%ne.length];return Me+We.distanceTo(de)},0);let B;if(typeof T.getCenter=="function")try{B=T.getCenter()}catch(Me){console.warn("Erreur lors de la récupération du centre du polygone via getCenter(), utilisation de la méthode alternative",Me);const We=np(ce);B=Ot.latLng(We.geometry.coordinates[1],We.geometry.coordinates[0])}else{const Me=np(ce);B=Ot.latLng(Me.geometry.coordinates[1],Me.geometry.coordinates[0])}const ue=M(B,"#059669");w.push(ue),y(ue,T,()=>[Ui(oe,"m","Périmètre"),Ui(ye,"m²","Surface")].join("<br>")),ue.on("mousedown",Me=>{if(!e.value)return;Ot.DomEvent.stopPropagation(Me),e.value.dragging.disable();let We=!0;const Z=Me.latlng,de=[...ne];w.forEach((Qe,Ke)=>{Ke>0&&Qe.setStyle({opacity:0,fillOpacity:0})});const ve=Mh(Qe=>{if(!We)return;const Ke=Qe.latlng.lng-Z.lng,He=Qe.latlng.lat-Z.lat,Xe=de.map(st=>Ot.latLng(st.lat+He,st.lng+Ke));Ot.Polygon.prototype.setLatLngs.call(T,[Xe]),ue.setLatLng(Qe.latlng)},16),pe=Qe=>{We&&ve(Qe)},$e=()=>{if(We=!1,!!e.value){if(e.value.off("mousemove",pe),document.removeEventListener("mouseup",$e),e.value.dragging.enable(),T.properties){const Qe=T.getLatLngs()[0],Ke=Qe.map(Xe=>[Xe.lng,Xe.lat]);Ke.push(Ke[0]);const He=hu([Ke]);T.properties.area=rc(He),T.properties.perimeter=Qe.reduce((Xe,st,kt)=>{const Ct=Qe[(kt+1)%Qe.length];return Xe+st.distanceTo(Ct)},0),T.properties.surface=T.properties.area}_(),O(T),o.value=null,Ko(()=>{o.value=T})}};e.value.on("mousemove",pe),document.addEventListener("mouseup",$e)}),ne.forEach((Me,We)=>{const Z=M(Me,"#DC2626");w.push(Z),y(Z,T,()=>{const de=ne[(We-1+ne.length)%ne.length],ve=ne[(We+1)%ne.length],pe=Me.distanceTo(de),$e=Me.distanceTo(ve);return[Ui(pe,"m","Distance au point précédent"),Ui($e,"m","Distance au point suivant"),Ui(oe,"m","Périmètre total"),Ui(ye,"m²","Surface")].join("<br>")}),Z.on("mousedown",de=>{if(Ot.DomEvent.stopPropagation(de),!e.value)return;e.value.dragging.disable();let ve=!0;ue&&(ue.setStyle({opacity:0,fillOpacity:0}),ue.measureDiv&&(ue.measureDiv.style.display="none"));const pe=Mh(Ke=>{if(!ve)return;ne[We]=Ke.latlng,Ot.Polygon.prototype.setLatLngs.call(T,[ne]),Z.setLatLng(Ke.latlng);const He=w.slice(ne.length+1),Xe=(We-1+ne.length)%ne.length,st=He[Xe];if(st){const Ct=ne[Xe],Ut=ne[We],Gt=Ot.latLng((Ct.lat+Ut.lat)/2,(Ct.lng+Ut.lng)/2);st.setLatLng(Gt)}const kt=He[We];if(kt){const Ct=ne[We],Ut=ne[(We+1)%ne.length],Gt=Ot.latLng((Ct.lat+Ut.lat)/2,(Ct.lng+Ut.lng)/2);kt.setLatLng(Gt)}},16),$e=Ke=>{ve&&pe(Ke)},Qe=()=>{if(ve=!1,!!e.value){if(e.value.off("mousemove",$e),document.removeEventListener("mouseup",Qe),e.value.dragging.enable(),T.properties){const Ke=T.getLatLngs()[0].map(Xe=>[Xe.lng,Xe.lat]);Ke.push(Ke[0]);const He=hu([Ke]);T.properties.area=rc(He),T.properties.perimeter=ne.reduce((Xe,st,kt)=>{const Ct=ne[(kt+1)%ne.length];return Xe+st.distanceTo(Ct)},0),T.properties.surface=T.properties.area}_(),O(T),o.value=null,Ko(()=>{o.value=T})}};e.value.on("mousemove",$e),document.addEventListener("mouseup",Qe)})}),(()=>{const Me=T.getLatLngs()[0];w.slice(Me.length+1).forEach(Z=>{n.value&&n.value.removeLayer(Z)}),w=w.slice(0,Me.length+1);const We=new Array(Me.length);for(let Z=0;Z<Me.length;Z++){const de=Me[Z],ve=Me[(Z+1)%Me.length];We[Z]=G(de,ve)}We.forEach((Z,de)=>{const ve=M(Z,"#2b6451");w.push(ve),y(ve,T,()=>{const pe=Me[de],$e=Me[(de+1)%Me.length],Qe=pe.distanceTo($e);return[Ui(Qe,"m","Longueur du segment"),Ui(oe,"m","Périmètre total"),Ui(ye,"m²","Surface")].join("<br>")}),ve.on("mousedown",pe=>{if(!e.value)return;Ot.DomEvent.stopPropagation(pe),e.value.dragging.disable();let $e=!0;const Qe=de;ue&&(ue.setStyle({opacity:0,fillOpacity:0}),ue.measureDiv&&(ue.measureDiv.style.display="none"));const Ke=[...T.getLatLngs()[0]];Ke.splice((Qe+1)%Ke.length,0,Z),T.setLatLngs([Ke]),_(),O(T);const He=Qe+1,Xe=1+He,st=He<w.length-1?w[Xe]:null;if(st){const kt=Ut=>{if(!$e)return;const Gt=T.getLatLngs()[0];Gt[He]=Ut.latlng,T.setLatLngs([Gt]),st.setLatLng(Ut.latlng);const fn=w.slice(1+Gt.length),pn=(He-1+Gt.length)%Gt.length,et=He;if(fn[pn]){const it=Gt[pn],nt=Gt[He],Vt=Ot.latLng((it.lat+nt.lat)/2,(it.lng+nt.lng)/2);fn[pn].setLatLng(Vt)}if(fn[et]){const it=Gt[He],nt=Gt[(He+1)%Gt.length],Vt=Ot.latLng((it.lat+nt.lat)/2,(it.lng+nt.lng)/2);fn[et].setLatLng(Vt)}},Ct=()=>{if($e=!1,!!e.value){if(e.value.off("mousemove",kt),document.removeEventListener("mouseup",Ct),e.value.dragging.enable(),T.properties){const Ut=T.getLatLngs()[0].map(fn=>[fn.lng,fn.lat]);Ut.push(Ut[0]);const Gt=hu([Ut]);T.properties.area=rc(Gt),T.properties.perimeter=T.getLatLngs()[0].reduce((fn,pn,et,it)=>{const nt=it[(et+1)%it.length];return fn+pn.distanceTo(nt)},0)}_(),O(T),o.value=null,Ko(()=>{o.value=T})}};e.value.on("mousemove",kt),document.addEventListener("mouseup",Ct)}else e.value.dragging.enable(),_(),O(T)})})})()},z=T=>{if(!(!e.value||!r.value)){console.log("[generateTempControlPoints] Génération des points temporaires pour",{layerType:T.constructor.name,properties:T.properties}),r.value.clearLayers();try{if(T instanceof da)T.generateHelperPoints(e.value);else if(T instanceof Rh){if("getLatLng"in T&&typeof T.getLatLng=="function"){const ne=T.getLatLng();if(ne){const fe=Ot.circleMarker(ne,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(fe)}}}else if(T instanceof gf||T instanceof Ot.Polygon){let ne=[];if("getLatLngs"in T){const ce=T.getLatLngs();if(Array.isArray(ce)&&ce.length>0){const ye=ce[0];Array.isArray(ye)?ne=ye:ye instanceof Ot.LatLng&&(ne=ce)}}let fe=null;if(T instanceof gf&&typeof T.getCenter=="function")fe=T.getCenter();else if(ne.length>0){const ce=ne.map(B=>[B.lng,B.lat]);ce.push(ce[0]);const ye=hu([ce]),oe=np(ye);fe=Ot.latLng(oe.geometry.coordinates[1],oe.geometry.coordinates[0])}if(fe){const ce=Ot.circleMarker(fe,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(ce)}ne.forEach(ce=>{if(ce){const ye=Ot.circleMarker(ce,{radius:5,color:"#DC2626",fillColor:"#DC2626",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(ye)}});for(let ce=0;ce<ne.length;ce++){const ye=ne[ce],oe=ne[(ce+1)%ne.length];if(ye&&oe){const B=Ot.latLng((ye.lat+oe.lat)/2,(ye.lng+oe.lng)/2),ue=Ot.circleMarker(B,{radius:5,color:"#2563EB",fillColor:"#2563EB",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(ue)}}}console.log("[generateTempControlPoints] Points temporaires générés",{count:r.value.getLayers().length})}catch(ne){console.error("[generateTempControlPoints] Erreur lors de la génération des points temporaires:",ne)}}},V=T=>{console.log("Nombre total de couches:",T.length);const ne=T.filter(B=>{var Me;if(!B)return!1;let ue=0,De={width:0,height:0};if(B instanceof Ot.Circle){ue=Math.PI*Math.pow(B.getRadius(),2);const We=B.getRadius();console.log(`
Forme détectée: Circle`),console.log(`- Surface propre: ${ue.toFixed(2)} m²`),console.log(`- Rayon: ${We.toFixed(2)} m`),console.log("- Angle: Cercle complet (360°)")}else if(B instanceof da||B instanceof Ot.Rectangle){const We=B.getBounds(),Z=We.getSouthWest(),de=We.getNorthEast(),ve=du([[Z.lng,Z.lat],[de.lng,Z.lat]]),pe=du([[Z.lng,Z.lat],[Z.lng,de.lat]]);De.width=Uf(ve,{units:"meters"}),De.height=Uf(pe,{units:"meters"}),ue=De.width*De.height,console.log(`
Forme détectée: Rectangle`),console.log(`- Surface propre: ${ue.toFixed(2)} m²`),console.log(`- Largeur: ${De.width.toFixed(2)} m`),console.log(`- Hauteur: ${De.height.toFixed(2)} m`)}else if(((Me=B.properties)==null?void 0:Me.type)==="Semicircle"){const We=B.getStartAngle(),Z=B.getStopAngle(),de=(Z-We+360)%360,ve=B.getRadius();ue=Math.PI*Math.pow(ve,2)*de/360,console.log(`
Forme détectée: Semicircle`),console.log(`- Surface propre: ${ue.toFixed(2)} m²`),console.log(`- Rayon: ${ve.toFixed(2)} m`),console.log(`- Angle de début: ${We.toFixed(2)}°`),console.log(`- Angle de fin: ${Z.toFixed(2)}°`),console.log(`- Angle d'ouverture: ${de.toFixed(2)}°`)}return ue>0});if(ne.length===0)return 0;const fe=new Set,ce=[];for(const B of ne)if(!fe.has(B)){const ue=X(ne,B);ue.length>0&&(ce.push(ue),ue.forEach(De=>fe.add(De)))}console.log(`
Nombre de groupes de formes connectées: ${ce.length}`);const ye=ce.map((B,ue)=>{console.log(`
Calcul pour le groupe ${ue+1} (${B.length} formes):`);const De=B.map(ve=>{var pe,$e,Qe;try{let Ke;if(ve instanceof Ot.Circle){const He=ve.getLatLng(),Xe=ve.getRadius();Ke=OB([He.lng,He.lat],Xe/1e3,{units:"kilometers",steps:256});const st=rc(Ke),kt=((pe=ve.properties)==null?void 0:pe.surface)||0;return console.log(`
Conversion Cercle -> GeoJSON`),console.log(`- Rayon: ${Xe.toFixed(2)}m`),console.log(`- Surface propriété: ${kt.toFixed(2)}m²`),console.log(`- Surface GeoJSON: ${st.toFixed(2)}m²`),Ke}else if(ve instanceof da||ve instanceof Ot.Rectangle){const He=ve.getBounds(),Xe=He.getSouthWest(),st=He.getNorthEast(),kt=Ot.latLng(st.lat,Xe.lng),Ct=Ot.latLng(Xe.lat,st.lng),Ut=[[Xe.lng,Xe.lat],[Ct.lng,Ct.lat],[st.lng,st.lat],[kt.lng,kt.lat],[Xe.lng,Xe.lat]];Ke=hu([Ut]);const Gt=rc(Ke),fn=du([[Xe.lng,Xe.lat],[st.lng,Xe.lat]]),pn=du([[Xe.lng,Xe.lat],[Xe.lng,st.lat]]),et=Uf(fn,{units:"meters"}),it=Uf(pn,{units:"meters"}),nt=et*it;return console.log(`
Conversion Rectangle -> GeoJSON`),console.log(`- Largeur: ${et.toFixed(2)}m`),console.log(`- Hauteur: ${it.toFixed(2)}m`),console.log(`- Surface théorique: ${nt.toFixed(2)}m²`),console.log(`- Surface GeoJSON: ${Gt.toFixed(2)}m²`),console.log(`- Différence: ${Math.abs(nt-Gt).toFixed(2)}m² (${(Math.abs(nt-Gt)/nt*100).toFixed(2)}%)`),Ke}else if((($e=ve.properties)==null?void 0:$e.type)==="Semicircle"){const He=ve.getCenter(),Xe=ve.getRadius(),st=ve.getStartAngle(),kt=ve.getStopAngle(),Ct=[],Ut=64;Ct.push([He.lng,He.lat]);for(let pn=0;pn<=Ut;pn++){const it=(st+(kt-st+360)%360*pn/Ut)*Math.PI/180,nt=Xe*Math.cos(it),Qt=Xe*Math.sin(it)/111319.9,Nn=nt/(111319.9*Math.cos(He.lat*Math.PI/180));Ct.push([He.lng+Nn,He.lat+Qt])}Ct.push([He.lng,He.lat]),Ke=hu([Ct]);const Gt=rc(Ke),fn=((Qe=ve.properties)==null?void 0:Qe.surface)||0;return console.log(`
Conversion Semicircle -> GeoJSON`),console.log(`- Rayon: ${Xe.toFixed(2)}m`),console.log(`- Surface propriété: ${fn.toFixed(2)}m²`),console.log(`- Surface GeoJSON: ${Gt.toFixed(2)}m²`),console.log(`- Différence: ${Math.abs(fn-Gt).toFixed(2)}m² (${(Math.abs(fn-Gt)/fn*100).toFixed(2)}%)`),Ke}return null}catch(Ke){return console.error("[useMapDrawing] Erreur lors de la conversion en GeoJSON:",Ke),null}}).filter(ve=>ve!==null);if(De.length===0)return 0;const Me=De.map(ve=>{const pe=rc(ve);return console.log(`Surface individuelle: ${pe.toFixed(2)}m²`),pe});let We=0;for(let ve=0;ve<De.length;ve++)for(let pe=ve+1;pe<De.length;pe++)try{const $e=wB([De[ve],De[pe]]),Qe=nN($e);if(Qe){const Ke=rc(Qe);We+=Ke,console.log(`Intersection entre formes ${ve+1} et ${pe+1}: ${Ke.toFixed(2)}m²`)}}catch($e){console.error(`Erreur lors du calcul d'intersection entre les formes ${ve+1} et ${pe+1}:`,$e)}const Z=Me.reduce((ve,pe)=>ve+pe,0),de=Z-We;return console.log(`
Calcul de la surface d'irrigation pour le groupe ${ue+1}:`),console.log(`- Surface totale (somme): ${Z.toFixed(2)}m²`),console.log(`- Surface d'intersection: ${We.toFixed(2)}m²`),console.log(`- Surface d'irrigation finale: ${de.toFixed(2)}m²`),de}),oe=Math.max(...ye);return console.log(`
Surface d'irrigation maximale parmi les groupes: ${oe.toFixed(2)}m²`),oe},W=()=>{u.value&&(e.value.removeLayer(u.value),u.value=null)},q=(T,ne)=>{if(!e.value)return;W();const fe=ne?X(T,ne):T;if(u.value||(u.value=Ot.layerGroup().addTo(e.value)),fe.forEach(ce=>{var oe;const ye=(oe=ce.properties)==null?void 0:oe.type;if(ye==="Circle"||ye==="Semicircle"){const B=ce.getLatLng(),ue=ce.getRadius(),De=Ot.circle(B,{radius:ue,fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:Ot.canvas({padding:.5})}),Me=Ot.circle(B,{radius:ue,fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:Ot.canvas({padding:.5})});u.value&&(u.value.addLayer(Me),u.value.addLayer(De))}else if(ye==="Rectangle"||ye==="Polygon"){const B=ce.getLatLngs(),ue=Ot.polygon(B,{fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:Ot.canvas({padding:.5})}),De=Ot.polygon(B,{fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:Ot.canvas({padding:.5})});u.value&&(u.value.addLayer(De),u.value.addLayer(ue))}}),ne&&fe.length>1&&e.value){const ce=Ot.latLngBounds([]);fe.forEach(B=>{B.getBounds?ce.extend(B.getBounds()):B.getLatLng&&ce.extend(B.getLatLng())});const ye=ce.getCenter(),oe=Ot.tooltip({permanent:!0,direction:"center",className:"connected-group-tooltip"}).setContent("<div>Groupe connecté</div>").setLatLng(ye);u.value&&u.value.addLayer(Ot.marker(ye,{opacity:0,interactive:!1}).bindTooltip(oe).openTooltip())}},X=(T,ne)=>{if(!ne)return[];const fe=new Set,ce=[ne],ye=[ne];for(ne._leaflet_id!==void 0&&fe.add(ne._leaflet_id);ce.length>0;){const oe=ce.shift();for(const B of T){if(B===oe||fe.has(B._leaflet_id))continue;Y(oe,B)&&(ye.push(B),ce.push(B),fe.add(B._leaflet_id))}}return ye},Y=(T,ne)=>{let fe=null,ce=null;if(T.getBounds&&typeof T.getBounds=="function")fe=T.getBounds();else if(T.getLatLng&&T.getRadius){const ye=T.getLatLng(),oe=T.getRadius();fe=Ot.latLngBounds([ye.lat-oe/111e3,ye.lng-oe/(111e3*Math.cos(ye.lat*Math.PI/180))],[ye.lat+oe/111e3,ye.lng+oe/(111e3*Math.cos(ye.lat*Math.PI/180))])}if(ne.getBounds&&typeof ne.getBounds=="function")ce=ne.getBounds();else if(ne.getLatLng&&ne.getRadius){const ye=ne.getLatLng(),oe=ne.getRadius();ce=Ot.latLngBounds([ye.lat-oe/111e3,ye.lng-oe/(111e3*Math.cos(ye.lat*Math.PI/180))],[ye.lat+oe/111e3,ye.lng+oe/(111e3*Math.cos(ye.lat*Math.PI/180))])}return!(!fe||!ce||!fe.intersects(ce))},me=(T,ne)=>{var ce;const fe=X(T,ne);return fe.length===1&&(ce=ne.properties)!=null&&ce.surface?ne.properties.surface:V(fe)},Se=T=>{var ce,ye,oe,B,ue,De,Me,We,Z;const ne=T.layer;(ce=t.value)==null||ce.addLayer(ne);let fe="unknown";if(ne instanceof Ot.Circle?fe=i.value==="Semicircle"?"Semicircle":"Circle":ne instanceof Ot.Rectangle?fe="Rectangle":ne instanceof Ot.Polygon?fe="Polygon":ne instanceof Ot.Polyline&&!(ne instanceof Ot.Polygon)&&(fe="Line"),ne.properties=k(ne,fe),ne.properties||(ne.properties={}),ne.properties.category||(ne.properties.category="forages"),ne.properties.accessLevel||(ne.properties.accessLevel="visitor"),ne._dbId=Date.now()+Math.floor(Math.random()*1e3),o.value=ne,console.log("[useMapDrawing] Input layer:",{type:fe,instanceof:{Circle:ne instanceof Ot.Circle,Rectangle:ne instanceof Ot.Rectangle,Polygon:ne instanceof Ot.Polygon,Polyline:ne instanceof Ot.Polyline},options:ne.options,properties:ne.properties,_dbId:ne._dbId}),window.dispatchEvent(new CustomEvent("shape:created",{detail:{shape:ne,type:fe,properties:ne.properties}})),ne.on("mouseover",()=>{console.log("[mouseover] Survol de la forme",{type:fe,isSelected:o.value===ne}),(!o.value||o.value!==ne)&&z(ne)}),ne.on("mouseout",()=>{var de;console.log("[mouseout] Sortie de la forme",{type:fe,isSelected:o.value===ne}),(!o.value||o.value!==ne)&&((de=r.value)==null||de.clearLayers())}),fe==="Semicircle")console.log("Conversion en demi-cercle désactivée selon les exigences");else if(fe==="Circle"){(ye=t.value)==null||ye.removeLayer(ne);const de=new Rh(ne.getLatLng(),{radius:ne.getRadius(),...ne.options});de.properties={...k(de,"Circle"),type:"Circle"},Object.defineProperty(de,"name",{value:de.properties.name,writable:!0,enumerable:!0,configurable:!0}),console.log("[useMapDrawing] Création du cercle personnalisé:",{propertyDescriptor:Object.getOwnPropertyDescriptor(de,"name"),directName:de.name,propertiesName:de.properties.name,nameIsEnumerable:Object.keys(de).includes("name"),allProperties:Object.keys(de.properties),allKeys:Object.keys(de)}),(oe=t.value)==null||oe.addLayer(de),o.value=de,I(de)}else if(fe==="Rectangle"){(B=t.value)==null||B.removeLayer(ne);const de=new da(ne.getBounds(),{...ne.options});de.updateProperties(),(ue=t.value)==null||ue.addLayer(de),o.value=de,K(de)}else if(ne instanceof Ot.Polygon){const de=ne.getLatLngs()[0],ve=new gf([de],{...ne.options});ve.updateProperties(),(De=t.value)==null||De.removeLayer(ne),(Me=t.value)==null||Me.addLayer(ve),o.value=ve,O(ve)}else if(ne instanceof Mo)$(ne);else if(ne instanceof Ot.Polyline&&!(ne instanceof Ot.Polygon)){const de=ne.getLatLngs(),ve=new Mo(de,{...ne.options});ve.updateProperties(),(We=t.value)==null||We.removeLayer(ne),(Z=t.value)==null||Z.addLayer(ve),o.value=ve,$(ve)}vl("Cliquez sur la forme pour afficher les points de contrôle")},Re=()=>{e.value&&(e.value.off("pm:create"),e.value.on("pm:create",Se))};return{map:e,featureGroup:t,controlPointsGroup:n,tempControlPointsGroup:r,currentTool:i,selectedShape:o,isDrawing:s,initMap:N,setDrawingTool:J,updateShapeStyle:te,updateShapeProperties:ae,updateTextFixedSize:R,adjustView:j,clearActiveControlPoints:_,calculateTotalCoverageArea:V,showCoverageOverlay:q,hideCoverageOverlay:W,calculateConnectedCoverageArea:me,getConnectedShapes:X}}function TR(){const{isEnabled:e,startMeasure:t}=dd(),n=Rt(null),r=Rt(""),i=Rt("Hybride"),o=Rt(null),s=t("createBaseMaps","useMapState"),u={Hybride:Ot.layerGroup([Ot.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:19,tileSize:256,zoomOffset:0,bounds:Ot.latLngBounds(Ot.latLng(41.333,-5.566),Ot.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0,opacity:.6}),Ot.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"© Esri",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:20,tileSize:256,zoomOffset:0,bounds:Ot.latLngBounds(Ot.latLng(41.333,-5.566),Ot.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0,opacity:.6})]),Cadastre:Ot.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Cadastre - Carte © IGN/Geoportail",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:18,tileSize:256,zoomOffset:0,bounds:Ot.latLngBounds(Ot.latLng(41.333,-5.566),Ot.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0}),IGN:Ot.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Carte IGN © IGN/Geoportail",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:18,tileSize:256,zoomOffset:0,bounds:Ot.latLngBounds(Ot.latLng(41.333,-5.566),Ot.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0})};s();const f=dn.createPerformanceTracker(w=>{dn.measure("initMap:setOptions",()=>{n.value=w,w.options.zoomSnap=.25,w.options.zoomDelta=.25,w.options.wheelPxPerZoomLevel=100,w.options.zoomAnimation=!0,w.options.fadeAnimation=!0,w.options.markerZoomAnimation=!0,w.options.minZoom=2,w.options.maxZoom=19,w.options.scrollWheelZoom=!0,w.options.doubleClickZoom=!0;const _=Ot.latLngBounds(Ot.latLng(-90,-180),Ot.latLng(90,180));w.setMaxBounds(_),w.options.maxBoundsViscosity=1,w.options.trackResize=!0;let M=null;w.getZoom(),w.on("zoomstart",()=>{w.getZoom(),w.options.zoomAnimation=!1,w.options.markerZoomAnimation=!1}),w.on("zoomend",()=>{M&&clearTimeout(M),M=setTimeout(()=>{setTimeout(()=>{w.options.zoomAnimation=!0,w.options.markerZoomAnimation=!0,w.invalidateSize({animate:!1,pan:!1});const R=w.getBounds(),N=w.options.maxBounds;N&&!R.intersects(N)&&w.panInsideBounds(N,{animate:!1})},250)},250)});const k=w._zoomAnimation;k&&(w._zoomAnimation=function(R){try{this._animatingZoom||k.call(this,R)}catch{console.warn("Animation de zoom interrompue, restauration de la vue..."),this._resetView(this.getCenter(),this.getZoom())}})},"useMapState"),dn.measure("initMap:addInitialLayer",()=>{w&&w.whenReady(()=>{const _=i.value;if(u[_]){if(console.log(`Initialisation de la couche de base: ${_}`),o.value&&w.hasLayer(o.value))try{w.removeLayer(o.value),console.log("Couche active précédente supprimée")}catch(M){console.warn("Erreur lors de la suppression de la couche active précédente:",M)}o.value=u[_];try{o.value.addTo(w),console.log(`Couche ${_} ajoutée à la carte`)}catch(M){console.error(`Erreur lors de l'ajout de la couche ${_}:`,M)}}else console.warn(`Couche de base non disponible: ${_}`)})},"useMapState"),w.on("baselayerchange",_=>{const M=t("baselayerchange","useMapState",{layer:_.name});i.value=_.name,o.value=_.layer,M()}),e.value&&(w.on("movestart",()=>{t("mapMove","useMapState",{startCenter:w.getCenter()})}),w.on("moveend",()=>{t("mapMoveEnd","useMapState",{endCenter:w.getCenter()})()}),w.on("tileloadstart",()=>{t("tileLoad","useMapState")}),w.on("tileload",()=>{t("tileLoadEnd","useMapState")()}))},"initMap","useMapState"),d=dn.createAsyncPerformanceTracker(async w=>{if(!n.value||!u[w]){console.warn(`Impossible de changer la carte de base: ${n.value?"type de carte non disponible":"carte non initialisée"}`);return}try{if(i.value===w)return;console.log(`Changement de carte: ${i.value} -> ${w}`);const _=n.value,M=_.getCenter(),k=_.getZoom();_.options.zoomAnimation=!1,_.options.fadeAnimation=!1,_.options.markerZoomAnimation=!1;const R=u[w];if(o.value&&_.hasLayer(o.value))try{_.removeLayer(o.value),console.log(`Couche précédente ${i.value} supprimée`)}catch(N){console.warn("Erreur lors de la suppression de la couche active:",N)}try{R instanceof Ot.LayerGroup,R.addTo(_),console.log(`Nouvelle couche ${w} ajoutée`)}catch(N){console.error("Erreur lors de l'ajout de la nouvelle couche:",N);try{_.hasLayer(R)&&_.removeLayer(R),R.addTo(_),console.log(`Récupération: couche ${w} réajoutée`)}catch(j){throw console.error("Échec de la récupération:",j),new Error("Impossible d'ajouter la nouvelle couche")}}o.value=R,i.value=w;try{_.setView(M,k,{animate:!1,duration:0,noMoveStart:!0}),console.log(`Vue réinitialisée: centre=${M}, zoom=${k}`)}catch(N){console.warn("Erreur lors de la réinitialisation de la vue:",N)}try{_.invalidateSize({animate:!1,pan:!1})}catch(N){console.warn("Erreur lors du rafraîchissement de la carte:",N)}setTimeout(()=>{_.options.zoomAnimation=!0,_.options.fadeAnimation=!0,_.options.markerZoomAnimation=!0,console.log("Animations restaurées")},500)}catch(_){if(console.error("Erreur lors du changement de carte de base:",_),n.value)try{const M=n.value;M.eachLayer(R=>{(R instanceof Ot.TileLayer||R instanceof Ot.LayerGroup)&&M.removeLayer(R)});const k=u[w];k.addTo(M),o.value=k,i.value=w,M.options.zoomAnimation=!0,M.options.fadeAnimation=!0,M.options.markerZoomAnimation=!0,M.invalidateSize({animate:!1,pan:!1}),console.log("Récupération effectuée après erreur")}catch(M){console.error("Erreur lors de la récupération après échec:",M)}}},"changeBaseMap","useMapState"),m=dn.createAsyncPerformanceTracker(async()=>{if(!(!n.value||!r.value))try{const w=await dn.measureAsync("searchLocation:fetchData",async()=>await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(r.value)}`),"useMapState"),_=await dn.measureAsync("searchLocation:parseResponse",async()=>await w.json(),"useMapState");_&&_.length>0&&dn.measure("searchLocation:updateView",()=>{const{lat:M,lon:k}=_[0];n.value.setView([M,k],13,{animate:i.value!=="Cadastre"})},"useMapState")}catch(w){console.error("Erreur lors de la recherche de localisation:",w)}},"searchLocation","useMapState");return{map:n,searchQuery:r,currentBaseMap:i,baseMaps:u,initMap:f,searchLocation:m,changeBaseMap:d,cleanup:()=>{const w=t("cleanup","useMapState");n.value&&(n.value.remove(),n.value=null),o.value&&(o.value=null),w()},isPerformanceEnabled:e}}const gy=Ap("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[],performanceMonitor:dd()}),getters:{getPlanById:e=>t=>e.plans.find(n=>n.id===t),hasUnsavedChanges:e=>e.unsavedChanges,getCurrentPlanHistory:e=>e.planHistory},actions:{async fetchPlans(){var n,r;const e=this.performanceMonitor.startMeasure("fetchPlans","IrrigationStore"),t=ga();this.loading=!0;try{let i="/plans/";const o={};t.isSalarie?o.salarie=(n=t.user)==null?void 0:n.id:t.isVisiteur&&(o.visiteur=(r=t.user)==null?void 0:r.id);const s=await this.performanceMonitor.measureAsync("fetchPlans_apiCall",()=>hr.get(i,{params:o}),"IrrigationStore");this.plans=s.data}catch(i){throw this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,e()}},async fetchPlansWithDetails(){var n,r;const e=this.performanceMonitor.startMeasure("fetchPlansWithDetails","IrrigationStore"),t=ga();this.loading=!0;try{let i="/plans/";const o={include_details:!0};t.isSalarie?o.salarie=(n=t.user)==null?void 0:n.id:t.isVisiteur&&(o.visiteur=(r=t.user)==null?void 0:r.id);const s=await this.performanceMonitor.measureAsync("fetchPlansWithDetails_apiCall",()=>hr.get(i,{params:o}),"IrrigationStore"),u=this.performanceMonitor.measure("fetchPlansWithDetails_processResponse",()=>s.data.map(f=>({...f,entreprise:typeof f.entreprise=="object"?f.entreprise:null,salarie:typeof f.salarie=="object"?f.salarie:null,visiteur:typeof f.visiteur=="object"?f.visiteur:null})),"IrrigationStore");return this.plans=u,{data:u}}catch(i){throw console.error("[IrrigationStore] Error fetching plans:",i),this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,e()}},async fetchClientPlans(e){this.loading=!0;try{return(await d0.getVisiteurPlans(e)).data}catch(t){throw this.error="Erreur lors du chargement des plans du client",t}finally{this.loading=!1}},async createPlan(e){var r;const t=this.performanceMonitor.startMeasure("createPlan","IrrigationStore");this.clearCurrentPlan(),this.loading=!0;const n=dc();try{const i=ga();((r=i.user)==null?void 0:r.user_type)==="visiteur"&&(e={...e,visiteur:i.user.id,salarie_id:i.user.enterprise_id,entreprise_id:i.user.enterprise_id});const o=this.performanceMonitor.measure("createPlan_formatData",()=>({...e,entreprise:e.entreprise?typeof e.entreprise=="object"&&e.entreprise&&"id"in e.entreprise?e.entreprise.id:Number(e.entreprise):null,salarie:e.salarie?typeof e.salarie=="object"&&e.salarie&&"id"in e.salarie?e.salarie.id:Number(e.salarie):null,visiteur:e.visiteur?typeof e.visiteur=="object"&&e.visiteur&&"id"in e.visiteur?e.visiteur.id:Number(e.visiteur):null}),"IrrigationStore"),s=await this.performanceMonitor.measureAsync("createPlan_apiCall",()=>d0.createPlan(o),"IrrigationStore");return this.plans.push(s.data),n.success(`Le plan "${s.data.nom}" a été créé avec succès`),s.data}catch(i){const o=i instanceof Error?i.message:String(i);throw console.error("Error creating plan:",o),this.error=o,n.error(`Erreur lors de la création du plan : ${o}`),i}finally{this.loading=!1,t()}},async createPlanForClient(e,t){this.clearCurrentPlan(),this.loading=!0;try{const n={...e,visiteur:t},r=await d0.createPlanForVisiteur(n);return this.plans.push(r.data),r.data}catch(n){const r=n instanceof Error?n.message:String(n);throw console.error("Error creating plan for client:",r),this.error="Erreur lors de la création du plan pour le client",n}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(e){const t=this.performanceMonitor.startMeasure("savePlan","IrrigationStore");if(!this.unsavedChanges){console.log("[IrrigationStore][savePlan] Aucun changement à sauvegarder"),t();return}this.loading=!0;try{const n=await this.performanceMonitor.measureAsync("savePlan_apiCall",()=>{var r;return hr.patch(`/plans/${e}/`,{...this.currentPlan,version:((r=this.currentPlan)==null?void 0:r.version)||1})},"IrrigationStore");return this.performanceMonitor.measure("savePlan_updateState",()=>{var i;const r=this.plans.findIndex(o=>o.id===e);r!==-1&&(this.plans[r]=n.data),((i=this.currentPlan)==null?void 0:i.id)===e&&(this.currentPlan=n.data)},"IrrigationStore"),this.unsavedChanges=!1,n.data}catch(n){throw console.error("[IrrigationStore][savePlan] ERREUR:",n),this.error="Erreur lors de la sauvegarde du plan",n}finally{this.loading=!1,t()}},async updatePlanDetails(e,t){const n=this.performanceMonitor.startMeasure("updatePlanDetails","IrrigationStore"),r=dc();try{const i=await this.performanceMonitor.measureAsync("updatePlanDetails_apiCall",()=>{const{visiteur_id:o,salarie_id:s,entreprise_id:u,...f}=t,d={...f};return o!==void 0&&(d.visiteur_id=o),s!==void 0&&(d.salarie_id=s),u!==void 0&&(d.entreprise_id=u),hr.patch(`/plans/${e}/`,d)},"IrrigationStore");return this.performanceMonitor.measure("updatePlanDetails_updateState",()=>{this.currentPlan&&this.currentPlan.id===e&&(this.currentPlan={...this.currentPlan,...i.data});const o=this.plans.findIndex(s=>s.id===e);o!==-1&&(this.plans[o]={...this.plans[o],...i.data})},"IrrigationStore"),i.data}catch(i){throw console.error("Erreur lors de la mise à jour du plan:",i),r.error(`Erreur lors de la mise à jour du plan : ${i instanceof Error?i.message:String(i)}`),i}finally{n()}},async fetchPlanHistory(e){this.loading=!0;try{const t=await hr.get(`/plans/${e}/historique/`);return this.planHistory=t.data,t.data}catch(t){throw this.error="Erreur lors de la récupération de l'historique",t}finally{this.loading=!1}},async restorePlanVersion(e,t){var n;this.loading=!0;try{const r=await hr.post(`/plans/${e}/restaurer/`,{version_id:t});((n=this.currentPlan)==null?void 0:n.id)===e&&(this.currentPlan=r.data);const i=this.plans.findIndex(o=>o.id===e);return i!==-1&&(this.plans[i]=r.data),r.data}catch(r){throw this.error="Erreur lors de la restauration de la version",r}finally{this.loading=!1}},setCurrentPlan(e){this.currentPlan=e,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.unsavedChanges=!1,this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(e){var n;this.loading=!0;const t=dc();try{const r=this.plans.find(i=>i.id===e);await d0.deletePlan(e),this.plans=this.plans.filter(i=>i.id!==e),((n=this.currentPlan)==null?void 0:n.id)===e&&this.clearCurrentPlan(),t.success(`Le plan "${(r==null?void 0:r.nom)||""}" a été supprimé avec succès`)}catch(r){throw this.error="Erreur lors de la suppression du plan",t.error(`Erreur lors de la suppression du plan : ${r instanceof Error?r.message:String(r)}`),r}finally{this.loading=!1}}}}),DR={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[3001] overflow-y-auto"},BR={class:"bg-white w-full h-full md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 relative overflow-y-auto"},NR={class:"p-4 md:p-6 pt-0 overflow-y-auto max-h-[calc(100vh-80px)] md:max-h-[calc(90vh-80px)]"},OR={key:0,class:"mb-4"},IR={key:0,class:"animate-pulse"},RR=["value"],FR={key:1,class:"mb-4"},jR={key:0,class:"animate-pulse"},zR=["disabled"],$R={value:null},UR=["value"],VR={key:2,class:"mb-4"},HR={key:0,class:"animate-pulse"},GR=["disabled"],qR={value:null},WR=["value"],ZR={class:"mb-4"},KR={class:"mb-6"},YR={class:"flex justify-end space-x-3"},JR=["disabled"],XR={key:0},QR={key:1},gx=oo({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","salarieSelected","visiteurSelected"],setup(e,{expose:t,emit:n}){function r(z){return z?typeof z=="object"?z.id:z:null}function i(z){if(z===null)throw new Error("Invalid ID");return z}const o=e,s=n,u=ga(),f=gy(),d=rm(),m=Rt(!1),y=Rt(null),w=Rt([]),_=Rt([]),M=Rt([]),k=Rt(null),R=Rt(null),N=Rt(!1),j=Rt(!1),J=Rt(!1),te=Rt({nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),ae=gr(()=>{var z,V,W;return((z=u.user)==null?void 0:z.user_type)==="admin"?te.value.nom.trim()&&te.value.entreprise&&te.value.salarie&&te.value.visiteur:((V=u.user)==null?void 0:V.user_type)==="entreprise"?te.value.nom.trim()&&te.value.salarie&&te.value.visiteur:((W=u.user)==null?void 0:W.user_type)==="salarie"?te.value.nom.trim()&&te.value.visiteur:te.value.nom.trim()});bs(()=>te.value.entreprise,async z=>{if(!o.modelValue)return;te.value.salarie=null,te.value.visiteur=null,_.value=[];const V=r(z);console.log("[NewPlanModal] Entreprise sélectionnée:",V),V?await le(V):w.value=[]}),bs(()=>te.value.salarie,async z=>{if(!o.modelValue)return;te.value.visiteur=null;const V=r(z);V?await xe(V):_.value=[]}),bs(()=>o.modelValue,z=>{var V,W,q;z?((V=u.user)==null?void 0:V.user_type)==="admin"?$():((W=u.user)==null?void 0:W.user_type)==="entreprise"?le(u.user.id):((q=u.user)==null?void 0:q.user_type)==="salarie"&&xe(u.user.id):(te.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},k.value=null,R.value=null,_.value=[],w.value=[],M.value=[],y.value=null)});async function le(z){N.value=!0;try{console.log("[NewPlanModal] Chargement des salaries pour entreprise:",z);const V=await Ll.getUsers({role:"SALARIE",entreprise:z});console.log("[NewPlanModal] Réponse salaries:",V.data),w.value=V.data}catch(V){console.error("[NewPlanModal] Error loading salaries:",V),w.value=[]}finally{N.value=!1}}async function xe(z){j.value=!0;try{const V=await Ll.getUsers({role:"VISITEUR",salarie:z});_.value=V.data}catch(V){console.error("[NewPlanModal] Error loading visiteurs:",V),_.value=[]}finally{j.value=!1}}async function G(z){o.modelValue&&(k.value=z,te.value.salarie=z.id,await xe(z.id),s("salarieSelected",z))}function I(z){o.modelValue&&(R.value=z,te.value.visiteur=z.id,s("visiteurSelected",z))}function K(){s("update:modelValue",!1),te.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},k.value=null,R.value=null,_.value=[],y.value=null}async function $(){J.value=!0;try{const z=await u.fetchEnterprises();M.value=z}catch(z){console.error("[NewPlanModal] Error loading entreprises:",z),M.value=[]}finally{J.value=!1}}async function O(){var z,V;y.value=null,m.value=!0;try{const W={nom:te.value.nom.trim(),description:te.value.description.trim()},q=u.user;if(!q)throw new Error("User not found");if(q.user_type==="admin"){if(!te.value.entreprise||!te.value.salarie||!te.value.visiteur)throw new Error("Missing required fields");W.entreprise=i(r(te.value.entreprise)),W.salarie=i(r(te.value.salarie)),W.visiteur=te.value.visiteur}else if(q.user_type==="entreprise"){if(!te.value.salarie||!te.value.visiteur)throw new Error("Missing required fields");W.entreprise=q.id,W.salarie=i(r(te.value.salarie)),W.visiteur=te.value.visiteur}else if(q.user_type==="salarie"){if(!q.entreprise||!te.value.visiteur)throw new Error("Missing required fields");W.entreprise=q.entreprise.id,W.salarie=q.id,W.visiteur=te.value.visiteur}else if(q.user_type==="visiteur"){if(!q.entreprise||!q.salarie)throw new Error("Missing required fields");W.entreprise=q.entreprise.id,W.salarie=q.salarie.id,W.visiteur=q.id}console.log("Données du plan à créer:",W),f.clearCurrentPlan(),d.setCurrentPlan(null);const X=await f.createPlan(W);s("created",X.id),K()}catch(W){console.error("[NewPlanModal] Error creating plan:",W),console.error("Response data:",(z=W.response)==null?void 0:z.data);let q="Une erreur est survenue lors de la création du plan";(V=W.response)!=null&&V.data&&(typeof W.response.data=="object"?q=Object.entries(W.response.data).map(([X,Y])=>Array.isArray(Y)?`${X}: ${Y.join(", ")}`:`${X}: ${Y}`).join(`
`):typeof W.response.data=="string"&&(q=W.response.data)),y.value=q}finally{m.value=!1}}return t({salaries:w,visiteurs:_,selectedSalarie:k,selectedVisiteur:R,loadSalaries:le,loadVisiteurs:xe,selectSalarie:G,selectVisiteur:I}),(z,V)=>{var W,q,X,Y;return z.modelValue?(Ue(),Ge("div",DR,[E("div",BR,[E("div",{class:"flex justify-between items-center mb-4 sticky top-0 bg-white p-4 md:p-6 pb-4 border-b z-10"},[V[6]||(V[6]=E("h2",{class:"text-xl font-semibold text-gray-900"},"Créer un nouveau plan",-1)),E("button",{onClick:K,class:"text-gray-400 hover:text-gray-500"},V[5]||(V[5]=[E("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("div",NR,[qn(u).isAdmin?(Ue(),Ge("div",OR,[V[9]||(V[9]=E("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Entreprise",-1)),J.value?(Ue(),Ge("div",IR,V[7]||(V[7]=[E("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):In((Ue(),Ge("select",{key:1,"onUpdate:modelValue":V[0]||(V[0]=me=>te.value.entreprise=me),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[V[8]||(V[8]=E("option",{value:null},"Sélectionnez une entreprise",-1)),(Ue(!0),Ge(Rn,null,Nr(M.value,me=>(Ue(),Ge("option",{key:me.id,value:me.id},Wt(qn(Hl)(me)),9,RR))),128))],512)),[[ss,te.value.entreprise]])])):un("",!0),((W=qn(u).user)==null?void 0:W.user_type)==="admin"||((q=qn(u).user)==null?void 0:q.user_type)==="entreprise"?(Ue(),Ge("div",FR,[V[11]||(V[11]=E("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Salarie",-1)),N.value?(Ue(),Ge("div",jR,V[10]||(V[10]=[E("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):In((Ue(),Ge("select",{key:1,id:"edit-salarie","onUpdate:modelValue":V[1]||(V[1]=me=>te.value.salarie=me),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:qn(u).isAdmin&&!te.value.entreprise},[E("option",$R,Wt(w.value.length?"Sélectionnez un salarie":"Aucun salarie disponible"),1),(Ue(!0),Ge(Rn,null,Nr(w.value,me=>(Ue(),Ge("option",{key:me.id,value:me.id},Wt(qn(Hl)(me)),9,UR))),128))],8,zR)),[[ss,te.value.salarie]])])):un("",!0),((X=qn(u).user)==null?void 0:X.user_type)!=="visiteur"?(Ue(),Ge("div",VR,[V[13]||(V[13]=E("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Visiteur",-1)),j.value?(Ue(),Ge("div",HR,V[12]||(V[12]=[E("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):In((Ue(),Ge("select",{key:1,id:"edit-visiteur","onUpdate:modelValue":V[2]||(V[2]=me=>te.value.visiteur=me),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!_.value.length||((Y=qn(u).user)==null?void 0:Y.user_type)!=="salarie"&&!te.value.salarie},[E("option",qR,Wt(_.value.length?"Sélectionnez un visiteur":"Aucun visiteur disponible"),1),(Ue(!0),Ge(Rn,null,Nr(_.value,me=>(Ue(),Ge("option",{key:me.id,value:me.id},Wt(qn(Hl)(me)),9,WR))),128))],8,GR)),[[ss,te.value.visiteur]])])):un("",!0),E("div",ZR,[V[14]||(V[14]=E("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),In(E("input",{id:"edit-nom","onUpdate:modelValue":V[3]||(V[3]=me=>te.value.nom=me),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[ei,te.value.nom]])]),E("div",KR,[V[15]||(V[15]=E("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),In(E("textarea",{id:"edit-description","onUpdate:modelValue":V[4]||(V[4]=me=>te.value.description=me),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[ei,te.value.description]])]),E("div",YR,[E("button",{onClick:K,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),E("button",{onClick:O,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!ae.value||m.value},[m.value?(Ue(),Ge("span",XR,"Création en cours...")):(Ue(),Ge("span",QR,"Créer"))],8,JR)])])])])):un("",!0)}}});function Zi(e){"@babel/helpers - typeof";return Zi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zi(e)}var Ra=Uint8Array,ql=Uint16Array,my=Int32Array,im=new Ra([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),sm=new Ra([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),v1=new Ra([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),mx=function(e,t){for(var n=new ql(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var i=new my(n[30]),r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return{b:n,r:i}},vx=mx(im,2),yx=vx.b,y1=vx.r;yx[28]=258,y1[258]=28;var _x=mx(sm,0),eF=_x.b,xb=_x.r,_1=new ql(32768);for(var ws=0;ws<32768;++ws){var rf=(ws&43690)>>1|(ws&21845)<<1;rf=(rf&52428)>>2|(rf&13107)<<2,rf=(rf&61680)>>4|(rf&3855)<<4,_1[ws]=((rf&65280)>>8|(rf&255)<<8)>>1}var pc=function(e,t,n){for(var r=e.length,i=0,o=new ql(t);i<r;++i)e[i]&&++o[e[i]-1];var s=new ql(t);for(i=1;i<t;++i)s[i]=s[i-1]+o[i-1]<<1;var u;if(n){u=new ql(1<<t);var f=15-t;for(i=0;i<r;++i)if(e[i])for(var d=i<<4|e[i],m=t-e[i],y=s[e[i]-1]++<<m,w=y|(1<<m)-1;y<=w;++y)u[_1[y]>>f]=d}else for(u=new ql(r),i=0;i<r;++i)e[i]&&(u[i]=_1[s[e[i]-1]++]>>15-e[i]);return u},Cf=new Ra(288);for(var ws=0;ws<144;++ws)Cf[ws]=8;for(var ws=144;ws<256;++ws)Cf[ws]=9;for(var ws=256;ws<280;++ws)Cf[ws]=7;for(var ws=280;ws<288;++ws)Cf[ws]=8;var Lp=new Ra(32);for(var ws=0;ws<32;++ws)Lp[ws]=5;var tF=pc(Cf,9,0),nF=pc(Cf,9,1),rF=pc(Lp,5,0),iF=pc(Lp,5,1),av=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Du=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},lv=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},vy=function(e){return(e+7)/8|0},bx=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new Ra(e.subarray(t,n))},sF=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ru=function(e,t,n){var r=new Error(t||sF[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,Ru),!n)throw r;return r},oF=function(e,t,n,r){var i=e.length,o=0;if(!i||t.f&&!t.l)return n||new Ra(0);var s=!n,u=s||t.i!=2,f=t.i;s&&(n=new Ra(i*3));var d=function(Me){var We=n.length;if(Me>We){var Z=new Ra(Math.max(We*2,Me));Z.set(n),n=Z}},m=t.f||0,y=t.p||0,w=t.b||0,_=t.l,M=t.d,k=t.m,R=t.n,N=i*8;do{if(!_){m=Du(e,y,1);var j=Du(e,y+1,3);if(y+=3,j)if(j==1)_=nF,M=iF,k=9,R=5;else if(j==2){var le=Du(e,y,31)+257,xe=Du(e,y+10,15)+4,G=le+Du(e,y+5,31)+1;y+=14;for(var I=new Ra(G),K=new Ra(19),$=0;$<xe;++$)K[v1[$]]=Du(e,y+$*3,7);y+=xe*3;for(var O=av(K),z=(1<<O)-1,V=pc(K,O,1),$=0;$<G;){var W=V[Du(e,y,z)];y+=W&15;var J=W>>4;if(J<16)I[$++]=J;else{var q=0,X=0;for(J==16?(X=3+Du(e,y,3),y+=2,q=I[$-1]):J==17?(X=3+Du(e,y,7),y+=3):J==18&&(X=11+Du(e,y,127),y+=7);X--;)I[$++]=q}}var Y=I.subarray(0,le),me=I.subarray(le);k=av(Y),R=av(me),_=pc(Y,k,1),M=pc(me,R,1)}else Ru(1);else{var J=vy(y)+4,te=e[J-4]|e[J-3]<<8,ae=J+te;if(ae>i){f&&Ru(0);break}u&&d(w+te),n.set(e.subarray(J,ae),w),t.b=w+=te,t.p=y=ae*8,t.f=m;continue}if(y>N){f&&Ru(0);break}}u&&d(w+131072);for(var Se=(1<<k)-1,Re=(1<<R)-1,T=y;;T=y){var q=_[lv(e,y)&Se],ne=q>>4;if(y+=q&15,y>N){f&&Ru(0);break}if(q||Ru(2),ne<256)n[w++]=ne;else if(ne==256){T=y,_=null;break}else{var fe=ne-254;if(ne>264){var $=ne-257,ce=im[$];fe=Du(e,y,(1<<ce)-1)+yx[$],y+=ce}var ye=M[lv(e,y)&Re],oe=ye>>4;ye||Ru(3),y+=ye&15;var me=eF[oe];if(oe>3){var ce=sm[oe];me+=lv(e,y)&(1<<ce)-1,y+=ce}if(y>N){f&&Ru(0);break}u&&d(w+131072);var B=w+fe;if(w<me){var ue=o-me,De=Math.min(me,B);for(ue+w<0&&Ru(3);w<De;++w)n[w]=r[ue+w]}for(;w<B;++w)n[w]=n[w-me]}}t.l=_,t.p=T,t.b=w,t.f=m,_&&(m=1,t.m=k,t.d=M,t.n=R)}while(!m);return w!=n.length&&s?bx(n,0,w):n.subarray(0,w)},Oc=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},kd=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},uv=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,o=n.slice();if(!i)return{t:xx,l:0};if(i==1){var s=new Ra(n[0].s+1);return s[n[0].s]=1,{t:s,l:1}}n.sort(function(ae,le){return ae.f-le.f}),n.push({s:-1,f:25001});var u=n[0],f=n[1],d=0,m=1,y=2;for(n[0]={s:-1,f:u.f+f.f,l:u,r:f};m!=i-1;)u=n[n[d].f<n[y].f?d++:y++],f=n[d!=m&&n[d].f<n[y].f?d++:y++],n[m++]={s:-1,f:u.f+f.f,l:u,r:f};for(var w=o[0].s,r=1;r<i;++r)o[r].s>w&&(w=o[r].s);var _=new ql(w+1),M=b1(n[m-1],_,0);if(M>t){var r=0,k=0,R=M-t,N=1<<R;for(o.sort(function(le,xe){return _[xe.s]-_[le.s]||le.f-xe.f});r<i;++r){var j=o[r].s;if(_[j]>t)k+=N-(1<<M-_[j]),_[j]=t;else break}for(k>>=R;k>0;){var J=o[r].s;_[J]<t?k-=1<<t-_[J]++-1:++r}for(;r>=0&&k;--r){var te=o[r].s;_[te]==t&&(--_[te],++k)}M=t}return{t:new Ra(_),l:M}},b1=function(e,t,n){return e.s==-1?Math.max(b1(e.l,t,n+1),b1(e.r,t,n+1)):t[e.s]=n},Lb=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new ql(++t),r=0,i=e[0],o=1,s=function(f){n[r++]=f},u=1;u<=t;++u)if(e[u]==i&&u!=t)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=e[u]}return{c:n.subarray(0,r),n:t}},Td=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},wx=function(e,t,n){var r=n.length,i=vy(t+2);e[i]=r&255,e[i+1]=r>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var o=0;o<r;++o)e[i+o+4]=n[o];return(i+4+r)*8},Sb=function(e,t,n,r,i,o,s,u,f,d,m){Oc(t,m++,n),++i[256];for(var y=uv(i,15),w=y.t,_=y.l,M=uv(o,15),k=M.t,R=M.l,N=Lb(w),j=N.c,J=N.n,te=Lb(k),ae=te.c,le=te.n,xe=new ql(19),G=0;G<j.length;++G)++xe[j[G]&31];for(var G=0;G<ae.length;++G)++xe[ae[G]&31];for(var I=uv(xe,7),K=I.t,$=I.l,O=19;O>4&&!K[v1[O-1]];--O);var z=d+5<<3,V=Td(i,Cf)+Td(o,Lp)+s,W=Td(i,w)+Td(o,k)+s+14+3*O+Td(xe,K)+2*xe[16]+3*xe[17]+7*xe[18];if(f>=0&&z<=V&&z<=W)return wx(t,m,e.subarray(f,f+d));var q,X,Y,me;if(Oc(t,m,1+(W<V)),m+=2,W<V){q=pc(w,_,0),X=w,Y=pc(k,R,0),me=k;var Se=pc(K,$,0);Oc(t,m,J-257),Oc(t,m+5,le-1),Oc(t,m+10,O-4),m+=14;for(var G=0;G<O;++G)Oc(t,m+3*G,K[v1[G]]);m+=3*O;for(var Re=[j,ae],T=0;T<2;++T)for(var ne=Re[T],G=0;G<ne.length;++G){var fe=ne[G]&31;Oc(t,m,Se[fe]),m+=K[fe],fe>15&&(Oc(t,m,ne[G]>>5&127),m+=ne[G]>>12)}}else q=tF,X=Cf,Y=rF,me=Lp;for(var G=0;G<u;++G){var ce=r[G];if(ce>255){var fe=ce>>18&31;kd(t,m,q[fe+257]),m+=X[fe+257],fe>7&&(Oc(t,m,ce>>23&31),m+=im[fe]);var ye=ce&31;kd(t,m,Y[ye]),m+=me[ye],ye>3&&(kd(t,m,ce>>5&8191),m+=sm[ye])}else kd(t,m,q[ce]),m+=X[ce]}return kd(t,m,q[256]),m+X[256]},aF=new my([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),xx=new Ra(0),lF=function(e,t,n,r,i,o){var s=o.z||e.length,u=new Ra(r+s+5*(1+Math.ceil(s/7e3))+i),f=u.subarray(r,u.length-i),d=o.l,m=(o.r||0)&7;if(t){m&&(f[0]=o.r>>3);for(var y=aF[t-1],w=y>>13,_=y&8191,M=(1<<n)-1,k=o.p||new ql(32768),R=o.h||new ql(M+1),N=Math.ceil(n/3),j=2*N,J=function(de){return(e[de]^e[de+1]<<N^e[de+2]<<j)&M},te=new my(25e3),ae=new ql(288),le=new ql(32),xe=0,G=0,I=o.i||0,K=0,$=o.w||0,O=0;I+2<s;++I){var z=J(I),V=I&32767,W=R[z];if(k[V]=W,R[z]=V,$<=I){var q=s-I;if((xe>7e3||K>24576)&&(q>423||!d)){m=Sb(e,f,0,te,ae,le,G,K,O,I-O,m),K=xe=G=0,O=I;for(var X=0;X<286;++X)ae[X]=0;for(var X=0;X<30;++X)le[X]=0}var Y=2,me=0,Se=_,Re=V-W&32767;if(q>2&&z==J(I-Re))for(var T=Math.min(w,q)-1,ne=Math.min(32767,I),fe=Math.min(258,q);Re<=ne&&--Se&&V!=W;){if(e[I+Y]==e[I+Y-Re]){for(var ce=0;ce<fe&&e[I+ce]==e[I+ce-Re];++ce);if(ce>Y){if(Y=ce,me=Re,ce>T)break;for(var ye=Math.min(Re,ce-2),oe=0,X=0;X<ye;++X){var B=I-Re+X&32767,ue=k[B],De=B-ue&32767;De>oe&&(oe=De,W=B)}}}V=W,W=k[V],Re+=V-W&32767}if(me){te[K++]=268435456|y1[Y]<<18|xb[me];var Me=y1[Y]&31,We=xb[me]&31;G+=im[Me]+sm[We],++ae[257+Me],++le[We],$=I+Y,++xe}else te[K++]=e[I],++ae[e[I]]}}for(I=Math.max(I,$);I<s;++I)te[K++]=e[I],++ae[e[I]];m=Sb(e,f,d,te,ae,le,G,K,O,I-O,m),d||(o.r=m&7|f[m/8|0]<<3,m-=7,o.h=R,o.p=k,o.i=I,o.w=$)}else{for(var I=o.w||0;I<s+d;I+=65535){var Z=I+65535;Z>=s&&(f[m/8|0]=d,Z=s),m=wx(f,m+1,e.subarray(I,Z))}o.i=s}return bx(u,0,r+vy(m)+i)},Lx=function(){var e=1,t=0;return{p:function(n){for(var r=e,i=t,o=n.length|0,s=0;s!=o;){for(var u=Math.min(s+2655,o);s<u;++s)i+=r+=n[s];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}e=r,t=i},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},uF=function(e,t,n,r,i){if(!i&&(i={l:1},t.dictionary)){var o=t.dictionary.subarray(-32768),s=new Ra(o.length+e.length);s.set(o),s.set(e,o.length),e=s,i.w=o.length}return lF(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,i)},Sx=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},cF=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=Lx();i.p(t.dictionary),Sx(e,2,i.d())}},fF=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Ru(6,"invalid zlib data"),(e[1]>>5&1)==1&&Ru(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function w1(e,t){t||(t={});var n=Lx();n.p(e);var r=uF(e,t,t.dictionary?6:2,4);return cF(r,t),Sx(r,r.length-4,n.d()),r}function hF(e,t){return oF(e.subarray(fF(e),-4),{i:2},t,t)}var dF=typeof TextDecoder<"u"&&new TextDecoder,pF=0;try{dF.decode(xx,{stream:!0}),pF=1}catch{}var Br=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function cv(){Br.console&&typeof Br.console.log=="function"&&Br.console.log.apply(Br.console,arguments)}var is={log:cv,warn:function(e){Br.console&&(typeof Br.console.warn=="function"?Br.console.warn.apply(Br.console,arguments):cv.call(null,arguments))},error:function(e){Br.console&&(typeof Br.console.error=="function"?Br.console.error.apply(Br.console,arguments):cv(e))}};function fv(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){Gf(r.response,t,n)},r.onerror=function(){is.error("could not download file")},r.send()}function Cb(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function v0(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var rp,x1,Gf=Br.saveAs||((typeof window>"u"?"undefined":Zi(window))!=="object"||window!==Br?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=Br.URL||Br.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?Cb(i.href)?fv(e,t,n):v0(i,i.target="_blank"):v0(i)):(i.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){v0(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(Cb(e))fv(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){v0(r)})}else navigator.msSaveOrOpenBlob(function(i,o){return o===void 0?o={autoBom:!1}:Zi(o)!=="object"&&(is.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return fv(e,t,n);var i=e.type==="application/octet-stream",o=/constructor/i.test(Br.HTMLElement)||Br.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&o)&&(typeof FileReader>"u"?"undefined":Zi(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var m=u.result;m=s?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=m:location=m,r=null},u.readAsDataURL(e)}else{var f=Br.URL||Br.webkitURL,d=f.createObjectURL(e);r?r.location=d:location.href=d,r=null,setTimeout(function(){f.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Cx(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,o=n[r].process,s=i.exec(e);s&&(t=o(s),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),f=this.g.toString(16),d=this.b.toString(16);return u.length==1&&(u="0"+u),f.length==1&&(f="0"+f),d.length==1&&(d="0"+d),"#"+u+f+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function hv(e,t){var n=e[0],r=e[1],i=e[2],o=e[3];n=Aa(n,r,i,o,t[0],7,-680876936),o=Aa(o,n,r,i,t[1],12,-389564586),i=Aa(i,o,n,r,t[2],17,606105819),r=Aa(r,i,o,n,t[3],22,-1044525330),n=Aa(n,r,i,o,t[4],7,-176418897),o=Aa(o,n,r,i,t[5],12,1200080426),i=Aa(i,o,n,r,t[6],17,-1473231341),r=Aa(r,i,o,n,t[7],22,-45705983),n=Aa(n,r,i,o,t[8],7,1770035416),o=Aa(o,n,r,i,t[9],12,-1958414417),i=Aa(i,o,n,r,t[10],17,-42063),r=Aa(r,i,o,n,t[11],22,-1990404162),n=Aa(n,r,i,o,t[12],7,1804603682),o=Aa(o,n,r,i,t[13],12,-40341101),i=Aa(i,o,n,r,t[14],17,-1502002290),n=ka(n,r=Aa(r,i,o,n,t[15],22,1236535329),i,o,t[1],5,-165796510),o=ka(o,n,r,i,t[6],9,-1069501632),i=ka(i,o,n,r,t[11],14,643717713),r=ka(r,i,o,n,t[0],20,-373897302),n=ka(n,r,i,o,t[5],5,-701558691),o=ka(o,n,r,i,t[10],9,38016083),i=ka(i,o,n,r,t[15],14,-660478335),r=ka(r,i,o,n,t[4],20,-405537848),n=ka(n,r,i,o,t[9],5,568446438),o=ka(o,n,r,i,t[14],9,-1019803690),i=ka(i,o,n,r,t[3],14,-187363961),r=ka(r,i,o,n,t[8],20,1163531501),n=ka(n,r,i,o,t[13],5,-1444681467),o=ka(o,n,r,i,t[2],9,-51403784),i=ka(i,o,n,r,t[7],14,1735328473),n=Ta(n,r=ka(r,i,o,n,t[12],20,-1926607734),i,o,t[5],4,-378558),o=Ta(o,n,r,i,t[8],11,-2022574463),i=Ta(i,o,n,r,t[11],16,1839030562),r=Ta(r,i,o,n,t[14],23,-35309556),n=Ta(n,r,i,o,t[1],4,-1530992060),o=Ta(o,n,r,i,t[4],11,1272893353),i=Ta(i,o,n,r,t[7],16,-155497632),r=Ta(r,i,o,n,t[10],23,-1094730640),n=Ta(n,r,i,o,t[13],4,681279174),o=Ta(o,n,r,i,t[0],11,-358537222),i=Ta(i,o,n,r,t[3],16,-722521979),r=Ta(r,i,o,n,t[6],23,76029189),n=Ta(n,r,i,o,t[9],4,-640364487),o=Ta(o,n,r,i,t[12],11,-421815835),i=Ta(i,o,n,r,t[15],16,530742520),n=Da(n,r=Ta(r,i,o,n,t[2],23,-995338651),i,o,t[0],6,-198630844),o=Da(o,n,r,i,t[7],10,1126891415),i=Da(i,o,n,r,t[14],15,-1416354905),r=Da(r,i,o,n,t[5],21,-57434055),n=Da(n,r,i,o,t[12],6,1700485571),o=Da(o,n,r,i,t[3],10,-1894986606),i=Da(i,o,n,r,t[10],15,-1051523),r=Da(r,i,o,n,t[1],21,-2054922799),n=Da(n,r,i,o,t[8],6,1873313359),o=Da(o,n,r,i,t[15],10,-30611744),i=Da(i,o,n,r,t[6],15,-1560198380),r=Da(r,i,o,n,t[13],21,1309151649),n=Da(n,r,i,o,t[4],6,-145523070),o=Da(o,n,r,i,t[11],10,-1120210379),i=Da(i,o,n,r,t[2],15,718787259),r=Da(r,i,o,n,t[9],21,-343485551),e[0]=mf(n,e[0]),e[1]=mf(r,e[1]),e[2]=mf(i,e[2]),e[3]=mf(o,e[3])}function om(e,t,n,r,i,o){return t=mf(mf(t,e),mf(r,o)),mf(t<<i|t>>>32-i,n)}function Aa(e,t,n,r,i,o,s){return om(t&n|~t&r,e,t,i,o,s)}function ka(e,t,n,r,i,o,s){return om(t&r|n&~r,e,t,i,o,s)}function Ta(e,t,n,r,i,o,s){return om(t^n^r,e,t,i,o,s)}function Da(e,t,n,r,i,o,s){return om(n^(t|~r),e,t,i,o,s)}function Ex(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)hv(r,gF(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(hv(r,i),t=0;t<16;t++)i[t]=0;return i[14]=8*n,hv(r,i),r}function gF(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}rp=Br.atob.bind(Br),x1=Br.btoa.bind(Br);var Eb="0123456789abcdef".split("");function mF(e){for(var t="",n=0;n<4;n++)t+=Eb[e>>8*n+4&15]+Eb[e>>8*n&15];return t}function vF(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function L1(e){return Ex(e).map(vF).join("")}var yF=function(e){for(var t=0;t<e.length;t++)e[t]=mF(e[t]);return e.join("")}(Ex("hello"))!="5d41402abc4b2a76b9719d911017c592";function mf(e,t){if(yF){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function S1(e,t){var n,r,i,o;if(e!==n){for(var s=(i=e,o=1+(256/e.length>>0),new Array(o+1).join(i)),u=[],f=0;f<256;f++)u[f]=f;var d=0;for(f=0;f<256;f++){var m=u[f];d=(d+m+s.charCodeAt(f))%256,u[f]=u[d],u[d]=m}n=e,r=u}else u=r;var y=t.length,w=0,_=0,M="";for(f=0;f<y;f++)_=(_+(m=u[w=(w+1)%256]))%256,u[w]=u[_],u[_]=m,s=u[(u[w]+u[_])%256],M+=String.fromCharCode(t.charCodeAt(f)^s);return M}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Pb={print:4,modify:8,copy:16,"annot-forms":32};function Fh(e,t,n,r){this.v=1,this.r=2;var i=192;e.forEach(function(u){if(Pb.perm!==void 0)throw new Error("Invalid permission: "+u);i+=Pb[u]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var o=(t+this.padding).substr(0,32),s=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,s),this.P=-(1+(255^i)),this.encryptionKey=L1(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=S1(this.encryptionKey,this.padding)}function jh(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var i=e.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?t+="#"+("0"+i.toString(16)).slice(-2):t+=e[r]}return t}function Mb(e){if(Zi(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var o=Math.random().toString(35);return t[n][o]=[r,!!i],o},this.unsubscribe=function(n){for(var r in t)if(t[r][n])return delete t[r][n],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in t[n]){var s=t[n][o];try{s[0].apply(e,r)}catch(u){Br.console&&is.error("jsPDF PubSub Error",u.message,u)}s[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function _g(e){if(!(this instanceof _g))return new _g(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function Px(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Wf(e,t,n,r,i){if(!(this instanceof Wf))return new Wf(e,t,n,r,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,Px.call(this,r,i)}function Uh(e,t,n,r,i){if(!(this instanceof Uh))return new Uh(e,t,n,r,i);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,Px.call(this,r,i)}function Ar(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],s=[],u=1,f=16,d="S",m=null;Zi(e=e||{})==="object"&&(n=e.orientation,r=e.unit||r,i=e.format||i,o=e.compress||e.compressPdf||o,(m=e.encryption||null)!==null&&(m.userPassword=m.userPassword||"",m.ownerPassword=m.ownerPassword||"",m.userPermissions=m.userPermissions||[]),u=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(f=e.floatPrecision),d=e.defaultPathOperation||"S"),s=e.filters||(o===!0?["FlateEncode"]:s),r=r||"mm",n=(""+(n||"P")).toLowerCase();var y=e.putOnlyUsedFonts||!1,w={},_={internal:{},__private__:{}};_.__private__.PubSub=Mb;var M="1.3",k=_.__private__.getPdfVersion=function(){return M};_.__private__.setPdfVersion=function(D){M=D};var R={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};_.__private__.getPageFormats=function(){return R};var N=_.__private__.getPageFormat=function(D){return R[D]};i=i||"a4";var j={COMPAT:"compat",ADVANCED:"advanced"},J=j.COMPAT;function te(){this.saveGraphicsState(),pe(new vn(nt,0,0,-nt,0,_a()*nt).toString()+" cm"),this.setFontSize(this.getFontSize()/nt),d="n",J=j.ADVANCED}function ae(){this.restoreGraphicsState(),d="S",J=j.COMPAT}var le=_.__private__.combineFontStyleAndFontWeight=function(D,_e){if(D=="bold"&&_e=="normal"||D=="bold"&&_e==400||D=="normal"&&_e=="italic"||D=="bold"&&_e=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return _e&&(D=_e==400||_e==="normal"?D==="italic"?"italic":"normal":_e!=700&&_e!=="bold"||D!=="normal"?(_e==700?"bold":_e)+""+D:"bold"),D};_.advancedAPI=function(D){var _e=J===j.COMPAT;return _e&&te.call(this),typeof D!="function"||(D(this),_e&&ae.call(this)),this},_.compatAPI=function(D){var _e=J===j.ADVANCED;return _e&&ae.call(this),typeof D!="function"||(D(this),_e&&te.call(this)),this},_.isAdvancedAPI=function(){return J===j.ADVANCED};var xe,G=function(D){if(J!==j.ADVANCED)throw new Error(D+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},I=_.roundToPrecision=_.__private__.roundToPrecision=function(D,_e){var Ze=t||_e;if(isNaN(D)||isNaN(Ze))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return D.toFixed(Ze).replace(/0+$/,"")};xe=_.hpf=_.__private__.hpf=typeof f=="number"?function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.hpf");return I(D,f)}:f==="smart"?function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.hpf");return I(D,D>-1&&D<1?16:5)}:function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.hpf");return I(D,16)};var K=_.f2=_.__private__.f2=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.f2");return I(D,2)},$=_.__private__.f3=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.f3");return I(D,3)},O=_.scale=_.__private__.scale=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.scale");return J===j.COMPAT?D*nt:J===j.ADVANCED?D:void 0},z=function(D){return J===j.COMPAT?_a()-D:J===j.ADVANCED?D:void 0},V=function(D){return O(z(D))};_.__private__.setPrecision=_.setPrecision=function(D){typeof parseInt(D,10)=="number"&&(t=parseInt(D,10))};var W,q="00000000000000000000000000000000",X=_.__private__.getFileId=function(){return q},Y=_.__private__.setFileId=function(D){return q=D!==void 0&&/^[a-fA-F0-9]{32}$/.test(D)?D.toUpperCase():q.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),m!==null&&(Ji=new Fh(m.userPermissions,m.userPassword,m.ownerPassword,q)),q};_.setFileId=function(D){return Y(D),this},_.getFileId=function(){return X()};var me=_.__private__.convertDateToPDFDate=function(D){var _e=D.getTimezoneOffset(),Ze=_e<0?"+":"-",ut=Math.floor(Math.abs(_e/60)),xt=Math.abs(_e%60),jt=[Ze,fe(ut),"'",fe(xt),"'"].join("");return["D:",D.getFullYear(),fe(D.getMonth()+1),fe(D.getDate()),fe(D.getHours()),fe(D.getMinutes()),fe(D.getSeconds()),jt].join("")},Se=_.__private__.convertPDFDateToDate=function(D){var _e=parseInt(D.substr(2,4),10),Ze=parseInt(D.substr(6,2),10)-1,ut=parseInt(D.substr(8,2),10),xt=parseInt(D.substr(10,2),10),jt=parseInt(D.substr(12,2),10),cn=parseInt(D.substr(14,2),10);return new Date(_e,Ze,ut,xt,jt,cn,0)},Re=_.__private__.setCreationDate=function(D){var _e;if(D===void 0&&(D=new Date),D instanceof Date)_e=me(D);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(D))throw new Error("Invalid argument passed to jsPDF.setCreationDate");_e=D}return W=_e},T=_.__private__.getCreationDate=function(D){var _e=W;return D==="jsDate"&&(_e=Se(W)),_e};_.setCreationDate=function(D){return Re(D),this},_.getCreationDate=function(D){return T(D)};var ne,fe=_.__private__.padd2=function(D){return("0"+parseInt(D)).slice(-2)},ce=_.__private__.padd2Hex=function(D){return("00"+(D=D.toString())).substr(D.length)},ye=0,oe=[],B=[],ue=0,De=[],Me=[],We=!1,Z=B,de=function(){ye=0,ue=0,B=[],oe=[],De=[],Ti=ct(),Ir=ct()};_.__private__.setCustomOutputDestination=function(D){We=!0,Z=D};var ve=function(D){We||(Z=D)};_.__private__.resetCustomOutputDestination=function(){We=!1,Z=B};var pe=_.__private__.out=function(D){return D=D.toString(),ue+=D.length+1,Z.push(D),Z},$e=_.__private__.write=function(D){return pe(arguments.length===1?D.toString():Array.prototype.join.call(arguments," "))},Qe=_.__private__.getArrayBuffer=function(D){for(var _e=D.length,Ze=new ArrayBuffer(_e),ut=new Uint8Array(Ze);_e--;)ut[_e]=D.charCodeAt(_e);return Ze},Ke=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];_.__private__.getStandardFonts=function(){return Ke};var He=e.fontSize||16;_.__private__.setFontSize=_.setFontSize=function(D){return He=J===j.ADVANCED?D/nt:D,this};var Xe,st=_.__private__.getFontSize=_.getFontSize=function(){return J===j.COMPAT?He:He*nt},kt=e.R2L||!1;_.__private__.setR2L=_.setR2L=function(D){return kt=D,this},_.__private__.getR2L=_.getR2L=function(){return kt};var Ct,Ut=_.__private__.setZoomMode=function(D){var _e=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(D))Xe=D;else if(isNaN(D)){if(_e.indexOf(D)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+D+'" is not recognized.');Xe=D}else Xe=parseInt(D,10)};_.__private__.getZoomMode=function(){return Xe};var Gt,fn=_.__private__.setPageMode=function(D){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(D)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+D+'" is not recognized.');Ct=D};_.__private__.getPageMode=function(){return Ct};var pn=_.__private__.setLayoutMode=function(D){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(D)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+D+'" is not recognized.');Gt=D};_.__private__.getLayoutMode=function(){return Gt},_.__private__.setDisplayMode=_.setDisplayMode=function(D,_e,Ze){return Ut(D),pn(_e),fn(Ze),this};var et={title:"",subject:"",author:"",keywords:"",creator:""};_.__private__.getDocumentProperty=function(D){if(Object.keys(et).indexOf(D)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return et[D]},_.__private__.getDocumentProperties=function(){return et},_.__private__.setDocumentProperties=_.setProperties=_.setDocumentProperties=function(D){for(var _e in et)et.hasOwnProperty(_e)&&D[_e]&&(et[_e]=D[_e]);return this},_.__private__.setDocumentProperty=function(D,_e){if(Object.keys(et).indexOf(D)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return et[D]=_e};var it,nt,Vt,Qt,Nn,wn={},An={},or=[],xn={},En={},Cn={},cr={},yr=null,mt=0,qe=[],Ft=new Mb(_),kn=e.hotfixes||[],ar={},Wn={},Xt=[],vn=function D(_e,Ze,ut,xt,jt,cn){if(!(this instanceof D))return new D(_e,Ze,ut,xt,jt,cn);isNaN(_e)&&(_e=1),isNaN(Ze)&&(Ze=0),isNaN(ut)&&(ut=0),isNaN(xt)&&(xt=1),isNaN(jt)&&(jt=0),isNaN(cn)&&(cn=0),this._matrix=[_e,Ze,ut,xt,jt,cn]};Object.defineProperty(vn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(D){this._matrix[0]=D}}),Object.defineProperty(vn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(D){this._matrix[1]=D}}),Object.defineProperty(vn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(D){this._matrix[2]=D}}),Object.defineProperty(vn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(D){this._matrix[3]=D}}),Object.defineProperty(vn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(D){this._matrix[4]=D}}),Object.defineProperty(vn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(D){this._matrix[5]=D}}),Object.defineProperty(vn.prototype,"a",{get:function(){return this._matrix[0]},set:function(D){this._matrix[0]=D}}),Object.defineProperty(vn.prototype,"b",{get:function(){return this._matrix[1]},set:function(D){this._matrix[1]=D}}),Object.defineProperty(vn.prototype,"c",{get:function(){return this._matrix[2]},set:function(D){this._matrix[2]=D}}),Object.defineProperty(vn.prototype,"d",{get:function(){return this._matrix[3]},set:function(D){this._matrix[3]=D}}),Object.defineProperty(vn.prototype,"e",{get:function(){return this._matrix[4]},set:function(D){this._matrix[4]=D}}),Object.defineProperty(vn.prototype,"f",{get:function(){return this._matrix[5]},set:function(D){this._matrix[5]=D}}),Object.defineProperty(vn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(vn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(vn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(vn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),vn.prototype.join=function(D){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(xe).join(D)},vn.prototype.multiply=function(D){var _e=D.sx*this.sx+D.shy*this.shx,Ze=D.sx*this.shy+D.shy*this.sy,ut=D.shx*this.sx+D.sy*this.shx,xt=D.shx*this.shy+D.sy*this.sy,jt=D.tx*this.sx+D.ty*this.shx+this.tx,cn=D.tx*this.shy+D.ty*this.sy+this.ty;return new vn(_e,Ze,ut,xt,jt,cn)},vn.prototype.decompose=function(){var D=this.sx,_e=this.shy,Ze=this.shx,ut=this.sy,xt=this.tx,jt=this.ty,cn=Math.sqrt(D*D+_e*_e),Tn=(D/=cn)*Ze+(_e/=cn)*ut;Ze-=D*Tn,ut-=_e*Tn;var jn=Math.sqrt(Ze*Ze+ut*ut);return Tn/=jn,D*(ut/=jn)<_e*(Ze/=jn)&&(D=-D,_e=-_e,Tn=-Tn,cn=-cn),{scale:new vn(cn,0,0,jn,0,0),translate:new vn(1,0,0,1,xt,jt),rotate:new vn(D,_e,-_e,D,0,0),skew:new vn(1,0,Tn,1,0,0)}},vn.prototype.toString=function(D){return this.join(" ")},vn.prototype.inversed=function(){var D=this.sx,_e=this.shy,Ze=this.shx,ut=this.sy,xt=this.tx,jt=this.ty,cn=1/(D*ut-_e*Ze),Tn=ut*cn,jn=-_e*cn,tr=-Ze*cn,vr=D*cn;return new vn(Tn,jn,tr,vr,-Tn*xt-tr*jt,-jn*xt-vr*jt)},vn.prototype.applyToPoint=function(D){var _e=D.x*this.sx+D.y*this.shx+this.tx,Ze=D.x*this.shy+D.y*this.sy+this.ty;return new Ls(_e,Ze)},vn.prototype.applyToRectangle=function(D){var _e=this.applyToPoint(D),Ze=this.applyToPoint(new Ls(D.x+D.w,D.y+D.h));return new Uo(_e.x,_e.y,Ze.x-_e.x,Ze.y-_e.y)},vn.prototype.clone=function(){var D=this.sx,_e=this.shy,Ze=this.shx,ut=this.sy,xt=this.tx,jt=this.ty;return new vn(D,_e,Ze,ut,xt,jt)},_.Matrix=vn;var It=_.matrixMult=function(D,_e){return _e.multiply(D)},Yt=new vn(1,0,0,1,0,0);_.unitMatrix=_.identityMatrix=Yt;var Ln=function(D,_e){if(!En[D]){var Ze=(_e instanceof Wf?"Sh":"P")+(Object.keys(xn).length+1).toString(10);_e.id=Ze,En[D]=Ze,xn[Ze]=_e,Ft.publish("addPattern",_e)}};_.ShadingPattern=Wf,_.TilingPattern=Uh,_.addShadingPattern=function(D,_e){return G("addShadingPattern()"),Ln(D,_e),this},_.beginTilingPattern=function(D){G("beginTilingPattern()"),Vo(D.boundingBox[0],D.boundingBox[1],D.boundingBox[2]-D.boundingBox[0],D.boundingBox[3]-D.boundingBox[1],D.matrix)},_.endTilingPattern=function(D,_e){G("endTilingPattern()"),_e.stream=Me[ne].join(`
`),Ln(D,_e),Ft.publish("endTilingPattern",_e),Xt.pop().restore()};var mr=_.__private__.newObject=function(){var D=ct();return On(D,!0),D},ct=_.__private__.newObjectDeferred=function(){return ye++,oe[ye]=function(){return ue},ye},On=function(D,_e){return _e=typeof _e=="boolean"&&_e,oe[D]=ue,_e&&pe(D+" 0 obj"),D},xr=_.__private__.newAdditionalObject=function(){var D={objId:ct(),content:""};return De.push(D),D},Ti=ct(),Ir=ct(),Er=_.__private__.decodeColorString=function(D){var _e=D.split(" ");if(_e.length!==2||_e[1]!=="g"&&_e[1]!=="G")_e.length===5&&(_e[4]==="k"||_e[4]==="K")&&(_e=[(1-_e[0])*(1-_e[3]),(1-_e[1])*(1-_e[3]),(1-_e[2])*(1-_e[3]),"r"]);else{var Ze=parseFloat(_e[0]);_e=[Ze,Ze,Ze,"r"]}for(var ut="#",xt=0;xt<3;xt++)ut+=("0"+Math.floor(255*parseFloat(_e[xt])).toString(16)).slice(-2);return ut},lr=_.__private__.encodeColorString=function(D){var _e;typeof D=="string"&&(D={ch1:D});var Ze=D.ch1,ut=D.ch2,xt=D.ch3,jt=D.ch4,cn=D.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ze=="string"&&Ze.charAt(0)!=="#"){var Tn=new Cx(Ze);if(Tn.ok)Ze=Tn.toHex();else if(!/^\d*\.?\d*$/.test(Ze))throw new Error('Invalid color "'+Ze+'" passed to jsPDF.encodeColorString.')}if(typeof Ze=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ze)&&(Ze="#"+Ze[1]+Ze[1]+Ze[2]+Ze[2]+Ze[3]+Ze[3]),typeof Ze=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ze)){var jn=parseInt(Ze.substr(1),16);Ze=jn>>16&255,ut=jn>>8&255,xt=255&jn}if(ut===void 0||jt===void 0&&Ze===ut&&ut===xt)if(typeof Ze=="string")_e=Ze+" "+cn[0];else switch(D.precision){case 2:_e=K(Ze/255)+" "+cn[0];break;case 3:default:_e=$(Ze/255)+" "+cn[0]}else if(jt===void 0||Zi(jt)==="object"){if(jt&&!isNaN(jt.a)&&jt.a===0)return _e=["1.","1.","1.",cn[1]].join(" ");if(typeof Ze=="string")_e=[Ze,ut,xt,cn[1]].join(" ");else switch(D.precision){case 2:_e=[K(Ze/255),K(ut/255),K(xt/255),cn[1]].join(" ");break;default:case 3:_e=[$(Ze/255),$(ut/255),$(xt/255),cn[1]].join(" ")}}else if(typeof Ze=="string")_e=[Ze,ut,xt,jt,cn[2]].join(" ");else switch(D.precision){case 2:_e=[K(Ze),K(ut),K(xt),K(jt),cn[2]].join(" ");break;case 3:default:_e=[$(Ze),$(ut),$(xt),$(jt),cn[2]].join(" ")}return _e},Vr=_.__private__.getFilters=function(){return s},rr=_.__private__.putStream=function(D){var _e=(D=D||{}).data||"",Ze=D.filters||Vr(),ut=D.alreadyAppliedFilters||[],xt=D.addLength1||!1,jt=_e.length,cn=D.objectId,Tn=function(ts){return ts};if(m!==null&&cn===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");m!==null&&(Tn=Ji.encryptor(cn,0));var jn={};Ze===!0&&(Ze=["FlateEncode"]);var tr=D.additionalKeyValues||[],vr=(jn=Ar.API.processDataByFilters!==void 0?Ar.API.processDataByFilters(_e,Ze):{data:_e,reverseChain:[]}).reverseChain+(Array.isArray(ut)?ut.join(" "):ut.toString());if(jn.data.length!==0&&(tr.push({key:"Length",value:jn.data.length}),xt===!0&&tr.push({key:"Length1",value:jt})),vr.length!=0)if(vr.split("/").length-1==1)tr.push({key:"Filter",value:vr});else{tr.push({key:"Filter",value:"["+vr+"]"});for(var zr=0;zr<tr.length;zr+=1)if(tr[zr].key==="DecodeParms"){for(var Ri=[],hi=0;hi<jn.reverseChain.split("/").length-1;hi+=1)Ri.push("null");Ri.push(tr[zr].value),tr[zr].value="["+Ri.join(" ")+"]"}}pe("<<");for(var _i=0;_i<tr.length;_i++)pe("/"+tr[_i].key+" "+tr[_i].value);pe(">>"),jn.data.length!==0&&(pe("stream"),pe(Tn(jn.data)),pe("endstream"))},Or=_.__private__.putPage=function(D){var _e=D.number,Ze=D.data,ut=D.objId,xt=D.contentsObjId;On(ut,!0),pe("<</Type /Page"),pe("/Parent "+D.rootDictionaryObjId+" 0 R"),pe("/Resources "+D.resourceDictionaryObjId+" 0 R"),pe("/MediaBox ["+parseFloat(xe(D.mediaBox.bottomLeftX))+" "+parseFloat(xe(D.mediaBox.bottomLeftY))+" "+xe(D.mediaBox.topRightX)+" "+xe(D.mediaBox.topRightY)+"]"),D.cropBox!==null&&pe("/CropBox ["+xe(D.cropBox.bottomLeftX)+" "+xe(D.cropBox.bottomLeftY)+" "+xe(D.cropBox.topRightX)+" "+xe(D.cropBox.topRightY)+"]"),D.bleedBox!==null&&pe("/BleedBox ["+xe(D.bleedBox.bottomLeftX)+" "+xe(D.bleedBox.bottomLeftY)+" "+xe(D.bleedBox.topRightX)+" "+xe(D.bleedBox.topRightY)+"]"),D.trimBox!==null&&pe("/TrimBox ["+xe(D.trimBox.bottomLeftX)+" "+xe(D.trimBox.bottomLeftY)+" "+xe(D.trimBox.topRightX)+" "+xe(D.trimBox.topRightY)+"]"),D.artBox!==null&&pe("/ArtBox ["+xe(D.artBox.bottomLeftX)+" "+xe(D.artBox.bottomLeftY)+" "+xe(D.artBox.topRightX)+" "+xe(D.artBox.topRightY)+"]"),typeof D.userUnit=="number"&&D.userUnit!==1&&pe("/UserUnit "+D.userUnit),Ft.publish("putPage",{objId:ut,pageContext:qe[_e],pageNumber:_e,page:Ze}),pe("/Contents "+xt+" 0 R"),pe(">>"),pe("endobj");var jt=Ze.join(`
`);return J===j.ADVANCED&&(jt+=`
Q`),On(xt,!0),rr({data:jt,filters:Vr(),objectId:xt}),pe("endobj"),ut},er=_.__private__.putPages=function(){var D,_e,Ze=[];for(D=1;D<=mt;D++)qe[D].objId=ct(),qe[D].contentsObjId=ct();for(D=1;D<=mt;D++)Ze.push(Or({number:D,data:Me[D],objId:qe[D].objId,contentsObjId:qe[D].contentsObjId,mediaBox:qe[D].mediaBox,cropBox:qe[D].cropBox,bleedBox:qe[D].bleedBox,trimBox:qe[D].trimBox,artBox:qe[D].artBox,userUnit:qe[D].userUnit,rootDictionaryObjId:Ti,resourceDictionaryObjId:Ir}));On(Ti,!0),pe("<</Type /Pages");var ut="/Kids [";for(_e=0;_e<mt;_e++)ut+=Ze[_e]+" 0 R ";pe(ut+"]"),pe("/Count "+mt),pe(">>"),pe("endobj"),Ft.publish("postPutPages")},en=function(D){Ft.publish("putFont",{font:D,out:pe,newObject:mr,putStream:rr}),D.isAlreadyPutted!==!0&&(D.objectNumber=mr(),pe("<<"),pe("/Type /Font"),pe("/BaseFont /"+jh(D.postScriptName)),pe("/Subtype /Type1"),typeof D.encoding=="string"&&pe("/Encoding /"+D.encoding),pe("/FirstChar 32"),pe("/LastChar 255"),pe(">>"),pe("endobj"))},qi=function(){for(var D in wn)wn.hasOwnProperty(D)&&(y===!1||y===!0&&w.hasOwnProperty(D))&&en(wn[D])},Di=function(D){D.objectNumber=mr();var _e=[];_e.push({key:"Type",value:"/XObject"}),_e.push({key:"Subtype",value:"/Form"}),_e.push({key:"BBox",value:"["+[xe(D.x),xe(D.y),xe(D.x+D.width),xe(D.y+D.height)].join(" ")+"]"}),_e.push({key:"Matrix",value:"["+D.matrix.toString()+"]"});var Ze=D.pages[1].join(`
`);rr({data:Ze,additionalKeyValues:_e,objectId:D.objectNumber}),pe("endobj")},Si=function(){for(var D in ar)ar.hasOwnProperty(D)&&Di(ar[D])},ai=function(D,_e){var Ze,ut=[],xt=1/(_e-1);for(Ze=0;Ze<1;Ze+=xt)ut.push(Ze);if(ut.push(1),D[0].offset!=0){var jt={offset:0,color:D[0].color};D.unshift(jt)}if(D[D.length-1].offset!=1){var cn={offset:1,color:D[D.length-1].color};D.push(cn)}for(var Tn="",jn=0,tr=0;tr<ut.length;tr++){for(Ze=ut[tr];Ze>D[jn+1].offset;)jn++;var vr=D[jn].offset,zr=(Ze-vr)/(D[jn+1].offset-vr),Ri=D[jn].color,hi=D[jn+1].color;Tn+=ce(Math.round((1-zr)*Ri[0]+zr*hi[0]).toString(16))+ce(Math.round((1-zr)*Ri[1]+zr*hi[1]).toString(16))+ce(Math.round((1-zr)*Ri[2]+zr*hi[2]).toString(16))}return Tn.trim()},Fr=function(D,_e){_e||(_e=21);var Ze=mr(),ut=ai(D.colors,_e),xt=[];xt.push({key:"FunctionType",value:"0"}),xt.push({key:"Domain",value:"[0.0 1.0]"}),xt.push({key:"Size",value:"["+_e+"]"}),xt.push({key:"BitsPerSample",value:"8"}),xt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),xt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),rr({data:ut,additionalKeyValues:xt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ze}),pe("endobj"),D.objectNumber=mr(),pe("<< /ShadingType "+D.type),pe("/ColorSpace /DeviceRGB");var jt="/Coords ["+xe(parseFloat(D.coords[0]))+" "+xe(parseFloat(D.coords[1]))+" ";D.type===2?jt+=xe(parseFloat(D.coords[2]))+" "+xe(parseFloat(D.coords[3])):jt+=xe(parseFloat(D.coords[2]))+" "+xe(parseFloat(D.coords[3]))+" "+xe(parseFloat(D.coords[4]))+" "+xe(parseFloat(D.coords[5])),pe(jt+="]"),D.matrix&&pe("/Matrix ["+D.matrix.toString()+"]"),pe("/Function "+Ze+" 0 R"),pe("/Extend [true true]"),pe(">>"),pe("endobj")},Ml=function(D,_e){var Ze=ct(),ut=mr();_e.push({resourcesOid:Ze,objectOid:ut}),D.objectNumber=ut;var xt=[];xt.push({key:"Type",value:"/Pattern"}),xt.push({key:"PatternType",value:"1"}),xt.push({key:"PaintType",value:"1"}),xt.push({key:"TilingType",value:"1"}),xt.push({key:"BBox",value:"["+D.boundingBox.map(xe).join(" ")+"]"}),xt.push({key:"XStep",value:xe(D.xStep)}),xt.push({key:"YStep",value:xe(D.yStep)}),xt.push({key:"Resources",value:Ze+" 0 R"}),D.matrix&&xt.push({key:"Matrix",value:"["+D.matrix.toString()+"]"}),rr({data:D.stream,additionalKeyValues:xt,objectId:D.objectNumber}),pe("endobj")},jr=function(D){var _e;for(_e in xn)xn.hasOwnProperty(_e)&&(xn[_e]instanceof Wf?Fr(xn[_e]):xn[_e]instanceof Uh&&Ml(xn[_e],D))},Xo=function(D){for(var _e in D.objectNumber=mr(),pe("<<"),D)switch(_e){case"opacity":pe("/ca "+K(D[_e]));break;case"stroke-opacity":pe("/CA "+K(D[_e]))}pe(">>"),pe("endobj")},_u=function(){var D;for(D in Cn)Cn.hasOwnProperty(D)&&Xo(Cn[D])},wo=function(){for(var D in pe("/XObject <<"),ar)ar.hasOwnProperty(D)&&ar[D].objectNumber>=0&&pe("/"+D+" "+ar[D].objectNumber+" 0 R");Ft.publish("putXobjectDict"),pe(">>")},ri=function(){Ji.oid=mr(),pe("<<"),pe("/Filter /Standard"),pe("/V "+Ji.v),pe("/R "+Ji.r),pe("/U <"+Ji.toHexString(Ji.U)+">"),pe("/O <"+Ji.toHexString(Ji.O)+">"),pe("/P "+Ji.P),pe(">>"),pe("endobj")},Fn=function(){for(var D in pe("/Font <<"),wn)wn.hasOwnProperty(D)&&(y===!1||y===!0&&w.hasOwnProperty(D))&&pe("/"+D+" "+wn[D].objectNumber+" 0 R");pe(">>")},xs=function(){if(Object.keys(xn).length>0){for(var D in pe("/Shading <<"),xn)xn.hasOwnProperty(D)&&xn[D]instanceof Wf&&xn[D].objectNumber>=0&&pe("/"+D+" "+xn[D].objectNumber+" 0 R");Ft.publish("putShadingPatternDict"),pe(">>")}},li=function(D){if(Object.keys(xn).length>0){for(var _e in pe("/Pattern <<"),xn)xn.hasOwnProperty(_e)&&xn[_e]instanceof _.TilingPattern&&xn[_e].objectNumber>=0&&xn[_e].objectNumber<D&&pe("/"+_e+" "+xn[_e].objectNumber+" 0 R");Ft.publish("putTilingPatternDict"),pe(">>")}},fr=function(){if(Object.keys(Cn).length>0){var D;for(D in pe("/ExtGState <<"),Cn)Cn.hasOwnProperty(D)&&Cn[D].objectNumber>=0&&pe("/"+D+" "+Cn[D].objectNumber+" 0 R");Ft.publish("putGStateDict"),pe(">>")}},Gn=function(D){On(D.resourcesOid,!0),pe("<<"),pe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Fn(),xs(),li(D.objectOid),fr(),wo(),pe(">>"),pe("endobj")},gs=function(){var D=[];qi(),_u(),Si(),jr(D),Ft.publish("putResources"),D.forEach(Gn),Gn({resourcesOid:Ir,objectOid:Number.MAX_SAFE_INTEGER}),Ft.publish("postPutResources")},ms=function(){Ft.publish("putAdditionalObjects");for(var D=0;D<De.length;D++){var _e=De[D];On(_e.objId,!0),pe(_e.content),pe("endobj")}Ft.publish("postPutAdditionalObjects")},Lr=function(D){An[D.fontName]=An[D.fontName]||{},An[D.fontName][D.fontStyle]=D.id},jo=function(D,_e,Ze,ut,xt){var jt={id:"F"+(Object.keys(wn).length+1).toString(10),postScriptName:D,fontName:_e,fontStyle:Ze,encoding:ut,isStandardFont:xt||!1,metadata:{}};return Ft.publish("addFont",{font:jt,instance:this}),wn[jt.id]=jt,Lr(jt),jt.id},Vn=function(D){for(var _e=0,Ze=Ke.length;_e<Ze;_e++){var ut=jo.call(this,D[_e][0],D[_e][1],D[_e][2],Ke[_e][3],!0);y===!1&&(w[ut]=!0);var xt=D[_e][0].split("-");Lr({id:ut,fontName:xt[0],fontStyle:xt[1]||""})}Ft.publish("addFonts",{fonts:wn,dictionary:An})},_r=function(D){return D.foo=function(){try{return D.apply(this,arguments)}catch(ut){var _e=ut.stack||"";~_e.indexOf(" at ")&&(_e=_e.split(" at ")[1]);var Ze="Error in function "+_e.split(`
`)[0].split("<")[0]+": "+ut.message;if(!Br.console)throw new Error(Ze);Br.console.error(Ze,ut),Br.alert&&alert(Ze)}},D.foo.bar=D,D.foo},Wr=function(D,_e){var Ze,ut,xt,jt,cn,Tn,jn,tr,vr;if(xt=(_e=_e||{}).sourceEncoding||"Unicode",cn=_e.outputEncoding,(_e.autoencode||cn)&&wn[it].metadata&&wn[it].metadata[xt]&&wn[it].metadata[xt].encoding&&(jt=wn[it].metadata[xt].encoding,!cn&&wn[it].encoding&&(cn=wn[it].encoding),!cn&&jt.codePages&&(cn=jt.codePages[0]),typeof cn=="string"&&(cn=jt[cn]),cn)){for(jn=!1,Tn=[],Ze=0,ut=D.length;Ze<ut;Ze++)(tr=cn[D.charCodeAt(Ze)])?Tn.push(String.fromCharCode(tr)):Tn.push(D[Ze]),Tn[Ze].charCodeAt(0)>>8&&(jn=!0);D=Tn.join("")}for(Ze=D.length;jn===void 0&&Ze!==0;)D.charCodeAt(Ze-1)>>8&&(jn=!0),Ze--;if(!jn)return D;for(Tn=_e.noBOM?[]:[254,255],Ze=0,ut=D.length;Ze<ut;Ze++){if((vr=(tr=D.charCodeAt(Ze))>>8)>>8)throw new Error("Character at position "+Ze+" of string '"+D+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Tn.push(vr),Tn.push(tr-(vr<<8))}return String.fromCharCode.apply(void 0,Tn)},_n=_.__private__.pdfEscape=_.pdfEscape=function(D,_e){return Wr(D,_e).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},nn=_.__private__.beginPage=function(D){Me[++mt]=[],qe[mt]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(D[0]),topRightY:Number(D[1])}},vs(mt),ve(Me[ne])},ii=function(D,_e){var Ze,ut,xt;switch(n=_e||n,typeof D=="string"&&(Ze=N(D.toLowerCase()),Array.isArray(Ze)&&(ut=Ze[0],xt=Ze[1])),Array.isArray(D)&&(ut=D[0]*nt,xt=D[1]*nt),isNaN(ut)&&(ut=i[0],xt=i[1]),(ut>14400||xt>14400)&&(is.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ut=Math.min(14400,ut),xt=Math.min(14400,xt)),i=[ut,xt],n.substr(0,1)){case"l":xt>ut&&(i=[xt,ut]);break;case"p":ut>xt&&(i=[xt,ut])}nn(i),Tl(Jl),pe(Fi),Nl!==0&&pe(Nl+" J"),vi!==0&&pe(vi+" j"),Ft.publish("addPage",{pageNumber:mt})},as=function(D){D>0&&D<=mt&&(Me.splice(D,1),qe.splice(D,1),mt--,ne>mt&&(ne=mt),this.setPage(ne))},vs=function(D){D>0&&D<=mt&&(ne=D)},Ci=_.__private__.getNumberOfPages=_.getNumberOfPages=function(){return Me.length-1},ao=function(D,_e,Ze){var ut,xt=void 0;return Ze=Ze||{},D=D!==void 0?D:wn[it].fontName,_e=_e!==void 0?_e:wn[it].fontStyle,ut=D.toLowerCase(),An[ut]!==void 0&&An[ut][_e]!==void 0?xt=An[ut][_e]:An[D]!==void 0&&An[D][_e]!==void 0?xt=An[D][_e]:Ze.disableWarning===!1&&is.warn("Unable to look up font label for font '"+D+"', '"+_e+"'. Refer to getFontList() for available fonts."),xt||Ze.noFallback||(xt=An.times[_e])==null&&(xt=An.times.normal),xt},Ks=_.__private__.putInfo=function(){var D=mr(),_e=function(ut){return ut};for(var Ze in m!==null&&(_e=Ji.encryptor(D,0)),pe("<<"),pe("/Producer ("+_n(_e("jsPDF "+Ar.version))+")"),et)et.hasOwnProperty(Ze)&&et[Ze]&&pe("/"+Ze.substr(0,1).toUpperCase()+Ze.substr(1)+" ("+_n(_e(et[Ze]))+")");pe("/CreationDate ("+_n(_e(W))+")"),pe(">>"),pe("endobj")},Bs=_.__private__.putCatalog=function(D){var _e=(D=D||{}).rootDictionaryObjId||Ti;switch(mr(),pe("<<"),pe("/Type /Catalog"),pe("/Pages "+_e+" 0 R"),Xe||(Xe="fullwidth"),Xe){case"fullwidth":pe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":pe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":pe("/OpenAction [3 0 R /Fit]");break;case"original":pe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ze=""+Xe;Ze.substr(Ze.length-1)==="%"&&(Xe=parseInt(Xe)/100),typeof Xe=="number"&&pe("/OpenAction [3 0 R /XYZ null null "+K(Xe)+"]")}switch(Gt||(Gt="continuous"),Gt){case"continuous":pe("/PageLayout /OneColumn");break;case"single":pe("/PageLayout /SinglePage");break;case"two":case"twoleft":pe("/PageLayout /TwoColumnLeft");break;case"tworight":pe("/PageLayout /TwoColumnRight")}Ct&&pe("/PageMode /"+Ct),Ft.publish("putCatalog"),pe(">>"),pe("endobj")},fi=_.__private__.putTrailer=function(){pe("trailer"),pe("<<"),pe("/Size "+(ye+1)),pe("/Root "+ye+" 0 R"),pe("/Info "+(ye-1)+" 0 R"),m!==null&&pe("/Encrypt "+Ji.oid+" 0 R"),pe("/ID [ <"+q+"> <"+q+"> ]"),pe(">>")},To=_.__private__.putHeader=function(){pe("%PDF-"+M),pe("%ºß¬à")},Ns=_.__private__.putXRef=function(){var D="0000000000";pe("xref"),pe("0 "+(ye+1)),pe("0000000000 65535 f ");for(var _e=1;_e<=ye;_e++)typeof oe[_e]=="function"?pe((D+oe[_e]()).slice(-10)+" 00000 n "):oe[_e]!==void 0?pe((D+oe[_e]).slice(-10)+" 00000 n "):pe("0000000000 00000 n ")},Yi=_.__private__.buildDocument=function(){de(),ve(B),Ft.publish("buildDocument"),To(),er(),ms(),gs(),m!==null&&ri(),Ks(),Bs();var D=ue;return Ns(),fi(),pe("startxref"),pe(""+D),pe("%%EOF"),ve(Me[ne]),B.join(`
`)},ys=_.__private__.getBlob=function(D){return new Blob([Qe(D)],{type:"application/pdf"})},zo=_.output=_.__private__.output=_r(function(D,_e){switch(typeof(_e=_e||{})=="string"?_e={filename:_e}:_e.filename=_e.filename||"generated.pdf",D){case void 0:return Yi();case"save":_.save(_e.filename);break;case"arraybuffer":return Qe(Yi());case"blob":return ys(Yi());case"bloburi":case"bloburl":if(Br.URL!==void 0&&typeof Br.URL.createObjectURL=="function")return Br.URL&&Br.URL.createObjectURL(ys(Yi()))||void 0;is.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ze="",ut=Yi();try{Ze=x1(ut)}catch{Ze=x1(unescape(encodeURIComponent(ut)))}return"data:application/pdf;filename="+_e.filename+";base64,"+Ze;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Br)==="[object Window]"){var xt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",jt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';_e.pdfObjectUrl&&(xt=_e.pdfObjectUrl,jt="");var cn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+xt+'"'+jt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(_e)+");<\/script></body></html>",Tn=Br.open();return Tn!==null&&Tn.document.write(cn),Tn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Br)==="[object Window]"){var jn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(_e.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+_e.filename+'" width="500px" height="400px" /></body></html>',tr=Br.open();if(tr!==null){tr.document.write(jn);var vr=this;tr.document.documentElement.querySelector("#pdfViewer").onload=function(){tr.document.title=_e.filename,tr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(vr.output("bloburl"))}}return tr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Br)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var zr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",_e)+'"></iframe></body></html>',Ri=Br.open();if(Ri!==null&&(Ri.document.write(zr),Ri.document.title=_e.filename),Ri||typeof safari>"u")return Ri;break;case"datauri":case"dataurl":return Br.document.location.href=this.output("datauristring",_e);default:return null}}),ma=function(D){return Array.isArray(kn)===!0&&kn.indexOf(D)>-1};switch(r){case"pt":nt=1;break;case"mm":nt=72/25.4;break;case"cm":nt=72/2.54;break;case"in":nt=72;break;case"px":nt=ma("px_scaling")==1?.75:96/72;break;case"pc":case"em":nt=12;break;case"ex":nt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);nt=r}var Ji=null;Re(),Y();var rl=function(D){return m!==null?Ji.encryptor(D,0):function(_e){return _e}},va=_.__private__.getPageInfo=_.getPageInfo=function(D){if(isNaN(D)||D%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:qe[D].objId,pageNumber:D,pageContext:qe[D]}},pr=_.__private__.getPageInfoByObjId=function(D){if(isNaN(D)||D%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var _e in qe)if(qe[_e].objId===D)break;return va(_e)},br=_.__private__.getCurrentPageInfo=_.getCurrentPageInfo=function(){return{objId:qe[ne].objId,pageNumber:ne,pageContext:qe[ne]}};_.addPage=function(){return ii.apply(this,arguments),this},_.setPage=function(){return vs.apply(this,arguments),ve.call(this,Me[ne]),this},_.insertPage=function(D){return this.addPage(),this.movePage(ne,D),this},_.movePage=function(D,_e){var Ze,ut;if(D>_e){Ze=Me[D],ut=qe[D];for(var xt=D;xt>_e;xt--)Me[xt]=Me[xt-1],qe[xt]=qe[xt-1];Me[_e]=Ze,qe[_e]=ut,this.setPage(_e)}else if(D<_e){Ze=Me[D],ut=qe[D];for(var jt=D;jt<_e;jt++)Me[jt]=Me[jt+1],qe[jt]=qe[jt+1];Me[_e]=Ze,qe[_e]=ut,this.setPage(_e)}return this},_.deletePage=function(){return as.apply(this,arguments),this},_.__private__.text=_.text=function(D,_e,Ze,ut,xt){var jt,cn,Tn,jn,tr,vr,zr,Ri,hi,_i=(ut=ut||{}).scope||this;if(typeof D=="number"&&typeof _e=="number"&&(typeof Ze=="string"||Array.isArray(Ze))){var ts=Ze;Ze=_e,_e=D,D=ts}if(arguments[3]instanceof vn?(G("The transform parameter of text() with a Matrix value"),hi=xt):(Tn=arguments[4],jn=arguments[5],Zi(zr=arguments[3])==="object"&&zr!==null||(typeof Tn=="string"&&(jn=Tn,Tn=null),typeof zr=="string"&&(jn=zr,zr=null),typeof zr=="number"&&(Tn=zr,zr=null),ut={flags:zr,angle:Tn,align:jn})),isNaN(_e)||isNaN(Ze)||D==null)throw new Error("Invalid arguments passed to jsPDF.text");if(D.length===0)return _i;var ls="",Lo=!1,$r=typeof ut.lineHeightFactor=="number"?ut.lineHeightFactor:kl,Is=_i.internal.scaleFactor;function cl(wi){return wi=wi.split("	").join(Array(ut.TabLen||9).join(" ")),_n(wi,zr)}function Ys(wi){for(var Ei,ns=wi.concat(),Ni=[],Eo=ns.length;Eo--;)typeof(Ei=ns.shift())=="string"?Ni.push(Ei):Array.isArray(wi)&&(Ei.length===1||Ei[1]===void 0&&Ei[2]===void 0)?Ni.push(Ei[0]):Ni.push([Ei[0],Ei[1],Ei[2]]);return Ni}function eu(wi,Ei){var ns;if(typeof wi=="string")ns=Ei(wi)[0];else if(Array.isArray(wi)){for(var Ni,Eo,uo=wi.concat(),Bo=[],xu=uo.length;xu--;)typeof(Ni=uo.shift())=="string"?Bo.push(Ei(Ni)[0]):Array.isArray(Ni)&&typeof Ni[0]=="string"&&(Eo=Ei(Ni[0],Ni[1],Ni[2]),Bo.push([Eo[0],Eo[1],Eo[2]]));ns=Bo}return ns}var ea=!1,wu=!0;if(typeof D=="string")ea=!0;else if(Array.isArray(D)){var Va=D.concat();cn=[];for(var Ha,us=Va.length;us--;)(typeof(Ha=Va.shift())!="string"||Array.isArray(Ha)&&typeof Ha[0]!="string")&&(wu=!1);ea=wu}if(ea===!1)throw new Error('Type of text must be string or Array. "'+D+'" is not recognized.');typeof D=="string"&&(D=D.match(/[\r?\n]/)?D.split(/\r\n|\r|\n/g):[D]);var ta=He/_i.internal.scaleFactor,So=ta*($r-1);switch(ut.baseline){case"bottom":Ze-=So;break;case"top":Ze+=ta-So;break;case"hanging":Ze+=ta-2*So;break;case"middle":Ze+=ta/2-So}if((vr=ut.maxWidth||0)>0&&(typeof D=="string"?D=_i.splitTextToSize(D,vr):Object.prototype.toString.call(D)==="[object Array]"&&(D=D.reduce(function(wi,Ei){return wi.concat(_i.splitTextToSize(Ei,vr))},[]))),jt={text:D,x:_e,y:Ze,options:ut,mutex:{pdfEscape:_n,activeFontKey:it,fonts:wn,activeFontSize:He}},Ft.publish("preProcessText",jt),D=jt.text,Tn=(ut=jt.options).angle,!(hi instanceof vn)&&Tn&&typeof Tn=="number"){Tn*=Math.PI/180,ut.rotationDirection===0&&(Tn=-Tn),J===j.ADVANCED&&(Tn=-Tn);var lo=Math.cos(Tn),fl=Math.sin(Tn);hi=new vn(lo,fl,-fl,lo,0,0)}else Tn&&Tn instanceof vn&&(hi=Tn);J!==j.ADVANCED||hi||(hi=Yt),(tr=ut.charSpace||Bl)!==void 0&&(ls+=xe(O(tr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ri=ut.horizontalScale)!==void 0&&(ls+=xe(100*Ri)+` Tz
`),ut.lang;var Rs=-1,Js=ut.renderingMode!==void 0?ut.renderingMode:ut.stroke,Xs=_i.internal.getCurrentPageInfo().pageContext;switch(Js){case 0:case!1:case"fill":Rs=0;break;case 1:case!0:case"stroke":Rs=1;break;case 2:case"fillThenStroke":Rs=2;break;case 3:case"invisible":Rs=3;break;case 4:case"fillAndAddForClipping":Rs=4;break;case 5:case"strokeAndAddPathForClipping":Rs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Rs=6;break;case 7:case"addToPathForClipping":Rs=7}var Yu=Xs.usedRenderingMode!==void 0?Xs.usedRenderingMode:-1;Rs!==-1?ls+=Rs+` Tr
`:Yu!==-1&&(ls+=`0 Tr
`),Rs!==-1&&(Xs.usedRenderingMode=Rs),jn=ut.align||"left";var _s,ba=He*$r,Fs=_i.internal.pageSize.getWidth(),js=wn[it];tr=ut.charSpace||Bl,vr=ut.maxWidth||0,zr=Object.assign({autoencode:!0,noBOM:!0},ut.flags);var wa=[],xa=function(wi){return _i.getStringUnitWidth(wi,{font:js,charSpace:tr,fontSize:He,doKerning:!1})*He/Is};if(Object.prototype.toString.call(D)==="[object Array]"){var zs;cn=Ys(D),jn!=="left"&&(_s=cn.map(xa));var Ss,na=0;if(jn==="right"){_e-=_s[0],D=[],us=cn.length;for(var Co=0;Co<us;Co++)Co===0?(Ss=ir(_e),zs=Qi(Ze)):(Ss=O(na-_s[Co]),zs=-ba),D.push([cn[Co],Ss,zs]),na=_s[Co]}else if(jn==="center"){_e-=_s[0]/2,D=[],us=cn.length;for(var $s=0;$s<us;$s++)$s===0?(Ss=ir(_e),zs=Qi(Ze)):(Ss=O((na-_s[$s])/2),zs=-ba),D.push([cn[$s],Ss,zs]),na=_s[$s]}else if(jn==="left"){D=[],us=cn.length;for(var _t=0;_t<us;_t++)D.push(cn[_t])}else if(jn==="justify"&&js.encoding==="Identity-H"){D=[],us=cn.length,vr=vr!==0?vr:Fs;for(var qt=0,Mt=0;Mt<us;Mt++)if(zs=Mt===0?Qi(Ze):-ba,Ss=Mt===0?ir(_e):qt,Mt<us-1){var Pn=O((vr-_s[Mt])/(cn[Mt].split(" ").length-1)),Zn=cn[Mt].split(" ");D.push([Zn[0]+" ",Ss,zs]),qt=0;for(var wr=1;wr<Zn.length;wr++){var ji=(xa(Zn[wr-1]+" "+Zn[wr])-xa(Zn[wr]))*Is+Pn;wr==Zn.length-1?D.push([Zn[wr],ji,0]):D.push([Zn[wr]+" ",ji,0]),qt-=ji}}else D.push([cn[Mt],Ss,zs]);D.push(["",qt,0])}else{if(jn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(D=[],us=cn.length,vr=vr!==0?vr:Fs,Mt=0;Mt<us;Mt++)zs=Mt===0?Qi(Ze):-ba,Ss=Mt===0?ir(_e):0,Mt<us-1?wa.push(xe(O((vr-_s[Mt])/(cn[Mt].split(" ").length-1)))):wa.push(0),D.push([cn[Mt],Ss,zs])}}var bi=typeof ut.R2L=="boolean"?ut.R2L:kt;bi===!0&&(D=eu(D,function(wi,Ei,ns){return[wi.split("").reverse().join(""),Ei,ns]})),jt={text:D,x:_e,y:Ze,options:ut,mutex:{pdfEscape:_n,activeFontKey:it,fonts:wn,activeFontSize:He}},Ft.publish("postProcessText",jt),D=jt.text,Lo=jt.mutex.isHex||!1;var Il=wn[it].encoding;Il!=="WinAnsiEncoding"&&Il!=="StandardEncoding"||(D=eu(D,function(wi,Ei,ns){return[cl(wi),Ei,ns]})),cn=Ys(D),D=[];for(var Qs,zi,ra,La=0,ia=1,sa=Array.isArray(cn[0])?ia:La,oa="",Yr=function(wi,Ei,ns){var Ni="";return ns instanceof vn?(ns=typeof ut.angle=="number"?It(ns,new vn(1,0,0,1,wi,Ei)):It(new vn(1,0,0,1,wi,Ei),ns),J===j.ADVANCED&&(ns=It(new vn(1,0,0,-1,0,0),ns)),Ni=ns.join(" ")+` Tm
`):Ni=xe(wi)+" "+xe(Ei)+` Td
`,Ni},Ho=0;Ho<cn.length;Ho++){switch(oa="",sa){case ia:ra=(Lo?"<":"(")+cn[Ho][0]+(Lo?">":")"),Qs=parseFloat(cn[Ho][1]),zi=parseFloat(cn[Ho][2]);break;case La:ra=(Lo?"<":"(")+cn[Ho]+(Lo?">":")"),Qs=ir(_e),zi=Qi(Ze)}wa!==void 0&&wa[Ho]!==void 0&&(oa=wa[Ho]+` Tw
`),Ho===0?D.push(oa+Yr(Qs,zi,hi)+ra):sa===La?D.push(oa+ra):sa===ia&&D.push(oa+Yr(Qs,zi,hi)+ra)}D=sa===La?D.join(` Tj
T* `):D.join(` Tj
`),D+=` Tj
`;var Cs=`BT
/`;return Cs+=it+" "+He+` Tf
`,Cs+=xe(He*$r)+` TL
`,Cs+=Qo+`
`,Cs+=ls,Cs+=D,pe(Cs+="ET"),w[it]=!0,_i};var Zr=_.__private__.clip=_.clip=function(D){return pe(D==="evenodd"?"W*":"W"),this};_.clipEvenOdd=function(){return Zr("evenodd")},_.__private__.discardPath=_.discardPath=function(){return pe("n"),this};var Tr=_.__private__.isValidStyle=function(D){var _e=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(D)!==-1&&(_e=!0),_e};_.__private__.setDefaultPathOperation=_.setDefaultPathOperation=function(D){return Tr(D)&&(d=D),this};var Os=_.__private__.getStyle=_.getStyle=function(D){var _e=d;switch(D){case"D":case"S":_e="S";break;case"F":_e="f";break;case"FD":case"DF":_e="B";break;case"f":case"f*":case"B":case"B*":_e=D}return _e},il=_.close=function(){return pe("h"),this};_.stroke=function(){return pe("S"),this},_.fill=function(D){return sl("f",D),this},_.fillEvenOdd=function(D){return sl("f*",D),this},_.fillStroke=function(D){return sl("B",D),this},_.fillStrokeEvenOdd=function(D){return sl("B*",D),this};var sl=function(D,_e){Zi(_e)==="object"?bu(_e,D):pe(D)},$o=function(D){D===null||J===j.ADVANCED&&D===void 0||(D=Os(D),pe(D))};function $a(D,_e,Ze,ut,xt){var jt=new Uh(_e||this.boundingBox,Ze||this.xStep,ut||this.yStep,this.gState,xt||this.matrix);jt.stream=this.stream;var cn=D+"$$"+this.cloneIndex+++"$$";return Ln(cn,jt),jt}var bu=function(D,_e){var Ze=En[D.key],ut=xn[Ze];if(ut instanceof Wf)pe("q"),pe(Al(_e)),ut.gState&&_.setGState(ut.gState),pe(D.matrix.toString()+" cm"),pe("/"+Ze+" sh"),pe("Q");else if(ut instanceof Uh){var xt=new vn(1,0,0,-1,0,_a());D.matrix&&(xt=xt.multiply(D.matrix||Yt),Ze=$a.call(ut,D.key,D.boundingBox,D.xStep,D.yStep,xt).id),pe("q"),pe("/Pattern cs"),pe("/"+Ze+" scn"),ut.gState&&_.setGState(ut.gState),pe(_e),pe("Q")}},Al=function(D){switch(D){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Sr=_.moveTo=function(D,_e){return pe(xe(O(D))+" "+xe(V(_e))+" m"),this},Hr=_.lineTo=function(D,_e){return pe(xe(O(D))+" "+xe(V(_e))+" l"),this},Ua=_.curveTo=function(D,_e,Ze,ut,xt,jt){return pe([xe(O(D)),xe(V(_e)),xe(O(Ze)),xe(V(ut)),xe(O(xt)),xe(V(jt)),"c"].join(" ")),this};_.__private__.line=_.line=function(D,_e,Ze,ut,xt){if(isNaN(D)||isNaN(_e)||isNaN(Ze)||isNaN(ut)||!Tr(xt))throw new Error("Invalid arguments passed to jsPDF.line");return J===j.COMPAT?this.lines([[Ze-D,ut-_e]],D,_e,[1,1],xt||"S"):this.lines([[Ze-D,ut-_e]],D,_e,[1,1]).stroke()},_.__private__.lines=_.lines=function(D,_e,Ze,ut,xt,jt){var cn,Tn,jn,tr,vr,zr,Ri,hi,_i,ts,ls,Lo;if(typeof D=="number"&&(Lo=Ze,Ze=_e,_e=D,D=Lo),ut=ut||[1,1],jt=jt||!1,isNaN(_e)||isNaN(Ze)||!Array.isArray(D)||!Array.isArray(ut)||!Tr(xt)||typeof jt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Sr(_e,Ze),cn=ut[0],Tn=ut[1],tr=D.length,ts=_e,ls=Ze,jn=0;jn<tr;jn++)(vr=D[jn]).length===2?(ts=vr[0]*cn+ts,ls=vr[1]*Tn+ls,Hr(ts,ls)):(zr=vr[0]*cn+ts,Ri=vr[1]*Tn+ls,hi=vr[2]*cn+ts,_i=vr[3]*Tn+ls,ts=vr[4]*cn+ts,ls=vr[5]*Tn+ls,Ua(zr,Ri,hi,_i,ts,ls));return jt&&il(),$o(xt),this},_.path=function(D){for(var _e=0;_e<D.length;_e++){var Ze=D[_e],ut=Ze.c;switch(Ze.op){case"m":Sr(ut[0],ut[1]);break;case"l":Hr(ut[0],ut[1]);break;case"c":Ua.apply(this,ut);break;case"h":il()}}return this},_.__private__.rect=_.rect=function(D,_e,Ze,ut,xt){if(isNaN(D)||isNaN(_e)||isNaN(Ze)||isNaN(ut)||!Tr(xt))throw new Error("Invalid arguments passed to jsPDF.rect");return J===j.COMPAT&&(ut=-ut),pe([xe(O(D)),xe(V(_e)),xe(O(Ze)),xe(O(ut)),"re"].join(" ")),$o(xt),this},_.__private__.triangle=_.triangle=function(D,_e,Ze,ut,xt,jt,cn){if(isNaN(D)||isNaN(_e)||isNaN(Ze)||isNaN(ut)||isNaN(xt)||isNaN(jt)||!Tr(cn))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ze-D,ut-_e],[xt-Ze,jt-ut],[D-xt,_e-jt]],D,_e,[1,1],cn,!0),this},_.__private__.roundedRect=_.roundedRect=function(D,_e,Ze,ut,xt,jt,cn){if(isNaN(D)||isNaN(_e)||isNaN(Ze)||isNaN(ut)||isNaN(xt)||isNaN(jt)||!Tr(cn))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Tn=4/3*(Math.SQRT2-1);return xt=Math.min(xt,.5*Ze),jt=Math.min(jt,.5*ut),this.lines([[Ze-2*xt,0],[xt*Tn,0,xt,jt-jt*Tn,xt,jt],[0,ut-2*jt],[0,jt*Tn,-xt*Tn,jt,-xt,jt],[2*xt-Ze,0],[-xt*Tn,0,-xt,-jt*Tn,-xt,-jt],[0,2*jt-ut],[0,-jt*Tn,xt*Tn,-jt,xt,-jt]],D+xt,_e,[1,1],cn,!0),this},_.__private__.ellipse=_.ellipse=function(D,_e,Ze,ut,xt){if(isNaN(D)||isNaN(_e)||isNaN(Ze)||isNaN(ut)||!Tr(xt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var jt=4/3*(Math.SQRT2-1)*Ze,cn=4/3*(Math.SQRT2-1)*ut;return Sr(D+Ze,_e),Ua(D+Ze,_e-cn,D+jt,_e-ut,D,_e-ut),Ua(D-jt,_e-ut,D-Ze,_e-cn,D-Ze,_e),Ua(D-Ze,_e+cn,D-jt,_e+ut,D,_e+ut),Ua(D+jt,_e+ut,D+Ze,_e+cn,D+Ze,_e),$o(xt),this},_.__private__.circle=_.circle=function(D,_e,Ze,ut){if(isNaN(D)||isNaN(_e)||isNaN(Ze)||!Tr(ut))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(D,_e,Ze,Ze,ut)},_.setFont=function(D,_e,Ze){return Ze&&(_e=le(_e,Ze)),it=ao(D,_e,{disableWarning:!1}),this};var Zu=_.__private__.getFont=_.getFont=function(){return wn[ao.apply(_,arguments)]};_.__private__.getFontList=_.getFontList=function(){var D,_e,Ze={};for(D in An)if(An.hasOwnProperty(D))for(_e in Ze[D]=[],An[D])An[D].hasOwnProperty(_e)&&Ze[D].push(_e);return Ze},_.addFont=function(D,_e,Ze,ut,xt){var jt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&jt.indexOf(arguments[3])!==-1?xt=arguments[3]:arguments[3]&&jt.indexOf(arguments[3])==-1&&(Ze=le(Ze,ut)),xt=xt||"Identity-H",jo.call(this,D,_e,Ze,xt)};var kl,Jl=e.lineWidth||.200025,ol=_.__private__.getLineWidth=_.getLineWidth=function(){return Jl},Tl=_.__private__.setLineWidth=_.setLineWidth=function(D){return Jl=D,pe(xe(O(D))+" w"),this};_.__private__.setLineDash=Ar.API.setLineDash=Ar.API.setLineDashPattern=function(D,_e){if(D=D||[],_e=_e||0,isNaN(_e)||!Array.isArray(D))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return D=D.map(function(Ze){return xe(O(Ze))}).join(" "),_e=xe(O(_e)),pe("["+D+"] "+_e+" d"),this};var Xl=_.__private__.getLineHeight=_.getLineHeight=function(){return He*kl};_.__private__.getLineHeight=_.getLineHeight=function(){return He*kl};var Kr=_.__private__.setLineHeightFactor=_.setLineHeightFactor=function(D){return typeof(D=D||1.15)=="number"&&(kl=D),this},Xi=_.__private__.getLineHeightFactor=_.getLineHeightFactor=function(){return kl};Kr(e.lineHeight);var ir=_.__private__.getHorizontalCoordinate=function(D){return O(D)},Qi=_.__private__.getVerticalCoordinate=function(D){return J===j.ADVANCED?D:qe[ne].mediaBox.topRightY-qe[ne].mediaBox.bottomLeftY-O(D)},al=_.__private__.getHorizontalCoordinateString=_.getHorizontalCoordinateString=function(D){return xe(ir(D))},ya=_.__private__.getVerticalCoordinateString=_.getVerticalCoordinateString=function(D){return xe(Qi(D))},Fi=e.strokeColor||"0 G";_.__private__.getStrokeColor=_.getDrawColor=function(){return Er(Fi)},_.__private__.setStrokeColor=_.setDrawColor=function(D,_e,Ze,ut){return Fi=lr({ch1:D,ch2:_e,ch3:Ze,ch4:ut,pdfColorType:"draw",precision:2}),pe(Fi),this};var Ql=e.fillColor||"0 g";_.__private__.getFillColor=_.getFillColor=function(){return Er(Ql)},_.__private__.setFillColor=_.setFillColor=function(D,_e,Ze,ut){return Ql=lr({ch1:D,ch2:_e,ch3:Ze,ch4:ut,pdfColorType:"fill",precision:2}),pe(Ql),this};var Qo=e.textColor||"0 g",Dl=_.__private__.getTextColor=_.getTextColor=function(){return Er(Qo)};_.__private__.setTextColor=_.setTextColor=function(D,_e,Ze,ut){return Qo=lr({ch1:D,ch2:_e,ch3:Ze,ch4:ut,pdfColorType:"text",precision:3}),this};var Bl=e.charSpace,Do=_.__private__.getCharSpace=_.getCharSpace=function(){return parseFloat(Bl||0)};_.__private__.setCharSpace=_.setCharSpace=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Bl=D,this};var Nl=0;_.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},_.__private__.setLineCap=_.setLineCap=function(D){var _e=_.CapJoinStyles[D];if(_e===void 0)throw new Error("Line cap style of '"+D+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Nl=_e,pe(_e+" J"),this};var vi=0;_.__private__.setLineJoin=_.setLineJoin=function(D){var _e=_.CapJoinStyles[D];if(_e===void 0)throw new Error("Line join style of '"+D+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return vi=_e,pe(_e+" j"),this},_.__private__.setLineMiterLimit=_.__private__.setMiterLimit=_.setLineMiterLimit=_.setMiterLimit=function(D){if(D=D||0,isNaN(D))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return pe(xe(O(D))+" M"),this},_.GState=_g,_.setGState=function(D){(D=typeof D=="string"?Cn[cr[D]]:Ku(null,D)).equals(yr)||(pe("/"+D.id+" gs"),yr=D)};var Ku=function(D,_e){if(!D||!cr[D]){var Ze=!1;for(var ut in Cn)if(Cn.hasOwnProperty(ut)&&Cn[ut].equals(_e)){Ze=!0;break}if(Ze)_e=Cn[ut];else{var xt="GS"+(Object.keys(Cn).length+1).toString(10);Cn[xt]=_e,_e.id=xt}return D&&(cr[D]=_e.id),Ft.publish("addGState",_e),_e}};_.addGState=function(D,_e){return Ku(D,_e),this},_.saveGraphicsState=function(){return pe("q"),or.push({key:it,size:He,color:Qo}),this},_.restoreGraphicsState=function(){pe("Q");var D=or.pop();return it=D.key,He=D.size,Qo=D.color,yr=null,this},_.setCurrentTransformationMatrix=function(D){return pe(D.toString()+" cm"),this},_.comment=function(D){return pe("#"+D),this};var Ls=function(D,_e){var Ze=D||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ze},set:function(jt){isNaN(jt)||(Ze=parseFloat(jt))}});var ut=_e||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ut},set:function(jt){isNaN(jt)||(ut=parseFloat(jt))}});var xt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return xt},set:function(jt){xt=jt.toString()}}),this},Uo=function(D,_e,Ze,ut){Ls.call(this,D,_e),this.type="rect";var xt=Ze||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return xt},set:function(cn){isNaN(cn)||(xt=parseFloat(cn))}});var jt=ut||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return jt},set:function(cn){isNaN(cn)||(jt=parseFloat(cn))}}),this},Ol=function(){this.page=mt,this.currentPage=ne,this.pages=Me.slice(0),this.pagesContext=qe.slice(0),this.x=Vt,this.y=Qt,this.matrix=Nn,this.width=yi(ne),this.height=_a(ne),this.outputDestination=Z,this.id="",this.objectNumber=-1};Ol.prototype.restore=function(){mt=this.page,ne=this.currentPage,qe=this.pagesContext,Me=this.pages,Vt=this.x,Qt=this.y,Nn=this.matrix,xo(ne,this.width),es(ne,this.height),Z=this.outputDestination};var Vo=function(D,_e,Ze,ut,xt){Xt.push(new Ol),mt=ne=0,Me=[],Vt=D,Qt=_e,Nn=xt,nn([Ze,ut])},ll=function(D){if(Wn[D])Xt.pop().restore();else{var _e=new Ol,Ze="Xo"+(Object.keys(ar).length+1).toString(10);_e.id=Ze,Wn[D]=Ze,ar[Ze]=_e,Ft.publish("addFormObject",_e),Xt.pop().restore()}};for(var ul in _.beginFormObject=function(D,_e,Ze,ut,xt){return Vo(D,_e,Ze,ut,xt),this},_.endFormObject=function(D){return ll(D),this},_.doFormObject=function(D,_e){var Ze=ar[Wn[D]];return pe("q"),pe(_e.toString()+" cm"),pe("/"+Ze.id+" Do"),pe("Q"),this},_.getFormObject=function(D){var _e=ar[Wn[D]];return{x:_e.x,y:_e.y,width:_e.width,height:_e.height,matrix:_e.matrix}},_.save=function(D,_e){return D=D||"generated.pdf",(_e=_e||{}).returnPromise=_e.returnPromise||!1,_e.returnPromise===!1?(Gf(ys(Yi()),D),typeof Gf.unload=="function"&&Br.setTimeout&&setTimeout(Gf.unload,911),this):new Promise(function(Ze,ut){try{var xt=Gf(ys(Yi()),D);typeof Gf.unload=="function"&&Br.setTimeout&&setTimeout(Gf.unload,911),Ze(xt)}catch(jt){ut(jt.message)}})},Ar.API)Ar.API.hasOwnProperty(ul)&&(ul==="events"&&Ar.API.events.length?function(D,_e){var Ze,ut,xt;for(xt=_e.length-1;xt!==-1;xt--)Ze=_e[xt][0],ut=_e[xt][1],D.subscribe.apply(D,[Ze].concat(typeof ut=="function"?[ut]:ut))}(Ft,Ar.API.events):_[ul]=Ar.API[ul]);var yi=_.getPageWidth=function(D){return(qe[D=D||ne].mediaBox.topRightX-qe[D].mediaBox.bottomLeftX)/nt},xo=_.setPageWidth=function(D,_e){qe[D].mediaBox.topRightX=_e*nt+qe[D].mediaBox.bottomLeftX},_a=_.getPageHeight=function(D){return(qe[D=D||ne].mediaBox.topRightY-qe[D].mediaBox.bottomLeftY)/nt},es=_.setPageHeight=function(D,_e){qe[D].mediaBox.topRightY=_e*nt+qe[D].mediaBox.bottomLeftY};return _.internal={pdfEscape:_n,getStyle:Os,getFont:Zu,getFontSize:st,getCharSpace:Do,getTextColor:Dl,getLineHeight:Xl,getLineHeightFactor:Xi,getLineWidth:ol,write:$e,getHorizontalCoordinate:ir,getVerticalCoordinate:Qi,getCoordinateString:al,getVerticalCoordinateString:ya,collections:{},newObject:mr,newAdditionalObject:xr,newObjectDeferred:ct,newObjectDeferredBegin:On,getFilters:Vr,putStream:rr,events:Ft,scaleFactor:nt,pageSize:{getWidth:function(){return yi(ne)},setWidth:function(D){xo(ne,D)},getHeight:function(){return _a(ne)},setHeight:function(D){es(ne,D)}},encryptionOptions:m,encryption:Ji,getEncryptor:rl,output:zo,getNumberOfPages:Ci,pages:Me,out:pe,f2:K,f3:$,getPageInfo:va,getPageInfoByObjId:pr,getCurrentPageInfo:br,getPDFVersion:k,Point:Ls,Rectangle:Uo,Matrix:vn,hasHotfix:ma},Object.defineProperty(_.internal.pageSize,"width",{get:function(){return yi(ne)},set:function(D){xo(ne,D)},enumerable:!0,configurable:!0}),Object.defineProperty(_.internal.pageSize,"height",{get:function(){return _a(ne)},set:function(D){es(ne,D)},enumerable:!0,configurable:!0}),Vn.call(_,Ke),it="F1",ii(i,n),Ft.publish("initialized"),_}Fh.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Fh.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Fh.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},Fh.prototype.processOwnerPassword=function(e,t){return S1(L1(t).substr(0,5),e)},Fh.prototype.encryptor=function(e,t){var n=L1(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return S1(n,r)}},_g.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||Zi(e)!==Zi(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return r===0},Ar.API={events:[]},Ar.version="2.5.2";var io=Ar.API,yy=1,lh=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ah=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},qr=function(e){return e.toFixed(2)},sf=function(e){return e.toFixed(5)};io.__acroform__={};var Pl=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},Ab=function(e){return e*yy},sc=function(e){var t=new Ax,n=Kn.internal.getHeight(e)||0,r=Kn.internal.getWidth(e)||0;return t.BBox=[0,0,Number(qr(r)),Number(qr(n))],t},_F=io.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},bF=io.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},wF=io.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},vo=io.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return wF(e,t-1)},yo=io.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return _F(e,t-1)},_o=io.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return bF(e,t-1)},xF=io.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,i=e[0],o=e[1],s=e[2],u=e[3],f={};return f.lowerLeft_X=n(i)||0,f.lowerLeft_Y=r(o+u)||0,f.upperRight_X=n(i+s)||0,f.upperRight_Y=r(o)||0,[Number(qr(f.lowerLeft_X)),Number(qr(f.lowerLeft_Y)),Number(qr(f.upperRight_X)),Number(qr(f.upperRight_Y))]},LF=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=C1(e,n),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+qr(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var o=sc(e);return o.scope=e.scope,o.stream=t.join(`
`),o}},C1=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function($){return $.split(`
`)}):i.map(function($){return[$]});var o=n,s=Kn.internal.getHeight(e)||0;s=s<0?-s:s;var u=Kn.internal.getWidth(e)||0;u=u<0?-u:u;var f=function($,O,z){if($+1<i.length){var V=O+" "+i[$+1][0];return y0(V,e,z).width<=u-4}return!1};o++;e:for(;o>0;){t="",o--;var d,m,y=y0("3",e,o).height,w=e.multiline?s-o:(s-y)/2,_=w+=2,M=0,k=0,R=0;if(o<=0){t=`(...) Tj
`,t+="% Width of Text: "+y0(t,e,o=12).width+", FieldWidth:"+u+`
`;break}for(var N="",j=0,J=0;J<i.length;J++)if(i.hasOwnProperty(J)){var te=!1;if(i[J].length!==1&&R!==i[J].length-1){if((y+2)*(j+2)+2>s)continue e;N+=i[J][R],te=!0,k=J,J--}else{N=(N+=i[J][R]+" ").substr(N.length-1)==" "?N.substr(0,N.length-1):N;var ae=parseInt(J),le=f(ae,N,o),xe=J>=i.length-1;if(le&&!xe){N+=" ",R=0;continue}if(le||xe){if(xe)k=ae;else if(e.multiline&&(y+2)*(j+2)+2>s)continue e}else{if(!e.multiline||(y+2)*(j+2)+2>s)continue e;k=ae}}for(var G="",I=M;I<=k;I++){var K=i[I];if(e.multiline){if(I===k){G+=K[R]+" ",R=(R+1)%K.length;continue}if(I===M){G+=K[K.length-1]+" ";continue}}G+=K[0]+" "}switch(G=G.substr(G.length-1)==" "?G.substr(0,G.length-1):G,m=y0(G,e,o).width,e.textAlign){case"right":d=u-m-2;break;case"center":d=(u-m)/2;break;case"left":default:d=2}t+=qr(d)+" "+qr(_)+` Td
`,t+="("+lh(G)+`) Tj
`,t+=-qr(d)+` 0 Td
`,_=-(o+2),m=0,M=te?k:k+1,j++,N=""}break}return r.text=t,r.fontSize=o,r},y0=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},SF={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},CF=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},EF=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,i=e[n];t.internal.newObjectDeferredBegin(i.objId,!0),Zi(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete e[r]}},PF=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(qu.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(SF)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");yy=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new kx,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];o.objId=void 0,o.hasAnnotation&&CF(o,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(r,i){var o=!r;for(var s in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(s)){var u=r[s],f=[],d=u.Rect;if(u.Rect&&(u.Rect=xF(u.Rect,i)),i.internal.newObjectDeferredBegin(u.objId,!0),u.DA=Kn.createDefaultAppearanceStream(u),Zi(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(f=u.getKeyValueListForStream()),u.Rect=d,u.hasAppearanceStream&&!u.appearanceStreamContent){var m=LF(u);f.push({key:"AP",value:"<</N "+m+">>"}),i.internal.acroformPlugin.xForms.push(m)}if(u.appearanceStreamContent){var y="";for(var w in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(w)){var _=u.appearanceStreamContent[w];if(y+="/"+w+" ",y+="<<",Object.keys(_).length>=1||Array.isArray(_)){for(var s in _)if(_.hasOwnProperty(s)){var M=_[s];typeof M=="function"&&(M=M.call(i,u)),y+="/"+s+" "+M+" ",i.internal.acroformPlugin.xForms.indexOf(M)>=0||i.internal.acroformPlugin.xForms.push(M)}}else typeof(M=_)=="function"&&(M=M.call(i,u)),y+="/"+s+" "+M,i.internal.acroformPlugin.xForms.indexOf(M)>=0||i.internal.acroformPlugin.xForms.push(M);y+=">>"}f.push({key:"AP",value:`<<
`+y+">>"})}i.internal.putStream({additionalKeyValues:f,objectId:u.objId}),i.internal.out("endobj")}o&&EF(i.internal.acroformPlugin.xForms,i)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},Mx=io.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(s){return s};if(Array.isArray(e)){for(var i="[",o=0;o<e.length;o++)switch(o!==0&&(i+=" "),Zi(e[o])){case"boolean":case"number":case"object":i+=e[o].toString();break;case"string":e[o].substr(0,1)!=="/"?(t!==void 0&&n&&(r=n.internal.getEncryptor(t)),i+="("+lh(r(e[o].toString()))+")"):i+=e[o].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},dv=function(e,t,n){var r=function(i){return i};return t!==void 0&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),e="("+lh(r(e))+")"},fc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};fc.prototype.toString=function(){return this.objId+" 0 R"},fc.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},fc.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var r=t[n],i=this[r];i&&(Array.isArray(i)?e.push({key:r,value:Mx(i,this.objId,this.scope)}):i instanceof fc?(i.scope=this.scope,e.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:r,value:i}))}return e};var Ax=function(){fc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};Pl(Ax,fc);var kx=function(){fc.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+lh(n(e))+")"}},set:function(n){e=n}})};Pl(kx,fc);var qu=function e(){fc.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute F supplied.');t=N}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!vo(t,3)},set:function(N){N?this.F=yo(t,3):this.F=_o(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute Ff supplied.');n=N}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(N){r=N!==void 0?N:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(N){r[0]=N}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(N){r[1]=N}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(N){r[2]=N}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(N){r[3]=N}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(N){switch(N){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=N;break;default:throw new Error('Invalid value "'+N+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof bg)return;o="FieldObject"+e.FieldNum++}var N=function(j){return j};return this.scope&&(N=this.scope.internal.getEncryptor(this.objId)),"("+lh(N(o))+")"},set:function(N){o=N.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(N){o=N}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(N){s=N}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(N){u=N}});var f=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f},set:function(N){f=N}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/yy:d},set:function(N){d=N}});var m="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return m},set:function(N){m=N}});var y="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!y||this instanceof bg||this instanceof th))return dv(y,this.objId,this.scope)},set:function(N){N=N.toString(),y=N}});var w=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(w)return this instanceof Yo?w:dv(w,this.objId,this.scope)},set:function(N){N=N.toString(),w=this instanceof Yo?N:N.substr(0,1)==="("?Ah(N.substr(1,N.length-2)):Ah(N)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Yo?Ah(w.substr(1,w.length-1)):w},set:function(N){N=N.toString(),w=this instanceof Yo?"/"+N:N}});var _=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(_)return _},set:function(N){this.V=N}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(_)return this instanceof Yo?_:dv(_,this.objId,this.scope)},set:function(N){N=N.toString(),_=this instanceof Yo?N:N.substr(0,1)==="("?Ah(N.substr(1,N.length-2)):Ah(N)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Yo?Ah(_.substr(1,_.length-1)):_},set:function(N){N=N.toString(),_=this instanceof Yo?"/"+N:N}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var M,k=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return k},set:function(N){N=!!N,k=N}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(M)return M},set:function(N){M=N}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!vo(this.Ff,1)},set:function(N){N?this.Ff=yo(this.Ff,1):this.Ff=_o(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!vo(this.Ff,2)},set:function(N){N?this.Ff=yo(this.Ff,2):this.Ff=_o(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!vo(this.Ff,3)},set:function(N){N?this.Ff=yo(this.Ff,3):this.Ff=_o(this.Ff,3)}});var R=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(R!==null)return R},set:function(N){if([0,1,2].indexOf(N)===-1)throw new Error('Invalid value "'+N+'" for attribute Q supplied.');R=N}}),Object.defineProperty(this,"textAlign",{get:function(){var N;switch(R){case 0:default:N="left";break;case 1:N="center";break;case 2:N="right"}return N},configurable:!0,enumerable:!0,set:function(N){switch(N){case"right":case 2:R=2;break;case"center":case 1:R=1;break;case"left":case 0:default:R=0}}})};Pl(qu,fc);var Yh=function(){qu.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Mx(t,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(o,s,u){u||(u=1);for(var f,d=[];f=s.exec(o);)d.push(f[u]);return d}(r,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!vo(this.Ff,18)},set:function(n){n?this.Ff=yo(this.Ff,18):this.Ff=_o(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!vo(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=yo(this.Ff,19):this.Ff=_o(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!vo(this.Ff,20)},set:function(n){n?(this.Ff=yo(this.Ff,20),t.sort()):this.Ff=_o(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!vo(this.Ff,22)},set:function(n){n?this.Ff=yo(this.Ff,22):this.Ff=_o(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!vo(this.Ff,23)},set:function(n){n?this.Ff=yo(this.Ff,23):this.Ff=_o(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!vo(this.Ff,27)},set:function(n){n?this.Ff=yo(this.Ff,27):this.Ff=_o(this.Ff,27)}}),this.hasAppearanceStream=!1};Pl(Yh,qu);var Jh=function(){Yh.call(this),this.fontName="helvetica",this.combo=!1};Pl(Jh,Yh);var Xh=function(){Jh.call(this),this.combo=!0};Pl(Xh,Jh);var j0=function(){Xh.call(this),this.edit=!0};Pl(j0,Xh);var Yo=function(){qu.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!vo(this.Ff,15)},set:function(n){n?this.Ff=yo(this.Ff,15):this.Ff=_o(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!vo(this.Ff,16)},set:function(n){n?this.Ff=yo(this.Ff,16):this.Ff=_o(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!vo(this.Ff,17)},set:function(n){n?this.Ff=yo(this.Ff,17):this.Ff=_o(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!vo(this.Ff,26)},set:function(n){n?this.Ff=yo(this.Ff,26):this.Ff=_o(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(o){return o};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,i=[];for(r in i.push("<<"),t)i.push("/"+r+" ("+lh(n(t[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Zi(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};Pl(Yo,qu);var z0=function(){Yo.call(this),this.pushButton=!0};Pl(z0,Yo);var Qh=function(){Yo.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Pl(Qh,Yo);var bg=function(){var e,t;qu.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(u){return u};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,s=[];for(o in s.push("<<"),r)s.push("/"+o+" ("+lh(i(r[o]))+")");return s.push(">>"),s.join(`
`)},set:function(i){Zi(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Kn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Pl(bg,qu),Qh.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},Qh.prototype.createOption=function(e){var t=new bg;return t.Parent=this,t.optionName=e,this.Kids.push(t),MF.call(this.scope,t),t};var $0=function(){Yo.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Kn.CheckBox.createAppearanceStream()};Pl($0,Yo);var th=function(){qu.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!vo(this.Ff,13)},set:function(t){t?this.Ff=yo(this.Ff,13):this.Ff=_o(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!vo(this.Ff,21)},set:function(t){t?this.Ff=yo(this.Ff,21):this.Ff=_o(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!vo(this.Ff,23)},set:function(t){t?this.Ff=yo(this.Ff,23):this.Ff=_o(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!vo(this.Ff,24)},set:function(t){t?this.Ff=yo(this.Ff,24):this.Ff=_o(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!vo(this.Ff,25)},set:function(t){t?this.Ff=yo(this.Ff,25):this.Ff=_o(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!vo(this.Ff,26)},set:function(t){t?this.Ff=yo(this.Ff,26):this.Ff=_o(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Pl(th,qu);var U0=function(){th.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!vo(this.Ff,14)},set:function(e){e?this.Ff=yo(this.Ff,14):this.Ff=_o(this.Ff,14)}}),this.password=!0};Pl(U0,th);var Kn={CheckBox:{createAppearanceStream:function(){return{N:{On:Kn.CheckBox.YesNormal},D:{On:Kn.CheckBox.YesPushDown,Off:Kn.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=sc(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),o=C1(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+qr(Kn.internal.getWidth(e))+" "+qr(Kn.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+qr(o.fontSize)+" Tf "+i),n.push("BT"),n.push(o.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=sc(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),i=[],o=Kn.internal.getHeight(e),s=Kn.internal.getWidth(e),u=C1(e,e.caption);return i.push("1 g"),i.push("0 0 "+qr(s)+" "+qr(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+qr(s-1)+" "+qr(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+qr(u.fontSize)+" Tf "+r),i.push(u.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=sc(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+qr(Kn.internal.getWidth(e))+" "+qr(Kn.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Kn.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Kn.RadioButton.Circle.YesNormal,t.D[e]=Kn.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=sc(e);t.scope=e.scope;var n=[],r=Kn.internal.getWidth(e)<=Kn.internal.getHeight(e)?Kn.internal.getWidth(e)/4:Kn.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Kn.internal.Bezier_C,o=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+sf(Kn.internal.getWidth(e)/2)+" "+sf(Kn.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=sc(e);t.scope=e.scope;var n=[],r=Kn.internal.getWidth(e)<=Kn.internal.getHeight(e)?Kn.internal.getWidth(e)/4:Kn.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*Kn.internal.Bezier_C).toFixed(5)),s=Number((r*Kn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+sf(Kn.internal.getWidth(e)/2)+" "+sf(Kn.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+sf(Kn.internal.getWidth(e)/2)+" "+sf(Kn.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=sc(e);t.scope=e.scope;var n=[],r=Kn.internal.getWidth(e)<=Kn.internal.getHeight(e)?Kn.internal.getWidth(e)/4:Kn.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*Kn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+sf(Kn.internal.getWidth(e)/2)+" "+sf(Kn.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Kn.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Kn.RadioButton.Cross.YesNormal,t.D[e]=Kn.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=sc(e);t.scope=e.scope;var n=[],r=Kn.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+qr(Kn.internal.getWidth(e)-2)+" "+qr(Kn.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(qr(r.x1.x)+" "+qr(r.x1.y)+" m"),n.push(qr(r.x2.x)+" "+qr(r.x2.y)+" l"),n.push(qr(r.x4.x)+" "+qr(r.x4.y)+" m"),n.push(qr(r.x3.x)+" "+qr(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=sc(e);t.scope=e.scope;var n=Kn.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+qr(Kn.internal.getWidth(e))+" "+qr(Kn.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+qr(Kn.internal.getWidth(e)-2)+" "+qr(Kn.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(qr(n.x1.x)+" "+qr(n.x1.y)+" m"),r.push(qr(n.x2.x)+" "+qr(n.x2.y)+" l"),r.push(qr(n.x4.x)+" "+qr(n.x4.y)+" m"),r.push(qr(n.x3.x)+" "+qr(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=sc(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+qr(Kn.internal.getWidth(e))+" "+qr(Kn.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};Kn.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Kn.internal.getWidth(e),n=Kn.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},Kn.internal.getWidth=function(e){var t=0;return Zi(e)==="object"&&(t=Ab(e.Rect[2])),t},Kn.internal.getHeight=function(e){var t=0;return Zi(e)==="object"&&(t=Ab(e.Rect[3])),t};var MF=io.addField=function(e){if(PF(this,e),!(e instanceof qu))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};io.AcroFormChoiceField=Yh,io.AcroFormListBox=Jh,io.AcroFormComboBox=Xh,io.AcroFormEditBox=j0,io.AcroFormButton=Yo,io.AcroFormPushButton=z0,io.AcroFormRadioButton=Qh,io.AcroFormCheckBox=$0,io.AcroFormTextField=th,io.AcroFormPasswordField=U0,io.AcroFormAppearance=Kn,io.AcroForm={ChoiceField:Yh,ListBox:Jh,ComboBox:Xh,EditBox:j0,Button:Yo,PushButton:z0,RadioButton:Qh,CheckBox:$0,TextField:th,PasswordField:U0,Appearance:Kn},Ar.AcroForm={ChoiceField:Yh,ListBox:Jh,ComboBox:Xh,EditBox:j0,Button:Yo,PushButton:z0,RadioButton:Qh,CheckBox:$0,TextField:th,PasswordField:U0,Appearance:Kn};Ar.AcroForm;function Tx(e){return e.reduce(function(t,n,r){return t[n]=r,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function($,O){var z,V,W,q,X,Y=t;if((O=O||t)==="RGBA"||$.data!==void 0&&$.data instanceof Uint8ClampedArray&&"height"in $&&"width"in $)return"RGBA";if(le($))for(X in n)for(W=n[X],z=0;z<W.length;z+=1){for(q=!0,V=0;V<W[z].length;V+=1)if(W[z][V]!==void 0&&W[z][V]!==$[V]){q=!1;break}if(q===!0){Y=X;break}}else for(X in n)for(W=n[X],z=0;z<W.length;z+=1){for(q=!0,V=0;V<W[z].length;V+=1)if(W[z][V]!==void 0&&W[z][V]!==$.charCodeAt(V)){q=!1;break}if(q===!0){Y=X;break}}return Y===t&&O!==t&&(Y=O),Y},i=function $(O){for(var z=this.internal.write,V=this.internal.putStream,W=(0,this.internal.getFilters)();W.indexOf("FlateEncode")!==-1;)W.splice(W.indexOf("FlateEncode"),1);O.objectId=this.internal.newObject();var q=[];if(q.push({key:"Type",value:"/XObject"}),q.push({key:"Subtype",value:"/Image"}),q.push({key:"Width",value:O.width}),q.push({key:"Height",value:O.height}),O.colorSpace===R.INDEXED?q.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(O.palette.length/3-1)+" "+("sMask"in O&&O.sMask!==void 0?O.objectId+2:O.objectId+1)+" 0 R]"}):(q.push({key:"ColorSpace",value:"/"+O.colorSpace}),O.colorSpace===R.DEVICE_CMYK&&q.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),q.push({key:"BitsPerComponent",value:O.bitsPerComponent}),"decodeParameters"in O&&O.decodeParameters!==void 0&&q.push({key:"DecodeParms",value:"<<"+O.decodeParameters+">>"}),"transparency"in O&&Array.isArray(O.transparency)){for(var X="",Y=0,me=O.transparency.length;Y<me;Y++)X+=O.transparency[Y]+" "+O.transparency[Y]+" ";q.push({key:"Mask",value:"["+X+"]"})}O.sMask!==void 0&&q.push({key:"SMask",value:O.objectId+1+" 0 R"});var Se=O.filter!==void 0?["/"+O.filter]:void 0;if(V({data:O.data,additionalKeyValues:q,alreadyAppliedFilters:Se,objectId:O.objectId}),z("endobj"),"sMask"in O&&O.sMask!==void 0){var Re="/Predictor "+O.predictor+" /Colors 1 /BitsPerComponent "+O.bitsPerComponent+" /Columns "+O.width,T={width:O.width,height:O.height,colorSpace:"DeviceGray",bitsPerComponent:O.bitsPerComponent,decodeParameters:Re,data:O.sMask};"filter"in O&&(T.filter=O.filter),$.call(this,T)}if(O.colorSpace===R.INDEXED){var ne=this.internal.newObject();V({data:G(new Uint8Array(O.palette)),objectId:ne}),z("endobj")}},o=function(){var $=this.internal.collections.addImage_images;for(var O in $)i.call(this,$[O])},s=function(){var $,O=this.internal.collections.addImage_images,z=this.internal.write;for(var V in O)z("/I"+($=O[V]).index,$.objectId,"0","R")},u=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",s))},f=function(){var $=this.internal.collections.addImage_images;return u.call(this),$},d=function(){return Object.keys(this.internal.collections.addImage_images).length},m=function($){return typeof e["process"+$.toUpperCase()]=="function"},y=function($){return Zi($)==="object"&&$.nodeType===1},w=function($,O){if($.nodeName==="IMG"&&$.hasAttribute("src")){var z=""+$.getAttribute("src");if(z.indexOf("data:image/")===0)return rp(unescape(z).split("base64,").pop());var V=e.loadFile(z,!0);if(V!==void 0)return V}if($.nodeName==="CANVAS"){if($.width===0||$.height===0)throw new Error("Given canvas must have data. Canvas width: "+$.width+", height: "+$.height);var W;switch(O){case"PNG":W="image/png";break;case"WEBP":W="image/webp";break;case"JPEG":case"JPG":default:W="image/jpeg"}return rp($.toDataURL(W,1).split("base64,").pop())}},_=function($){var O=this.internal.collections.addImage_images;if(O){for(var z in O)if($===O[z].alias)return O[z]}},M=function($,O,z){return $||O||($=-96,O=-96),$<0&&($=-1*z.width*72/$/this.internal.scaleFactor),O<0&&(O=-1*z.height*72/O/this.internal.scaleFactor),$===0&&($=O*z.width/z.height),O===0&&(O=$*z.height/z.width),[$,O]},k=function($,O,z,V,W,q){var X=M.call(this,z,V,W),Y=this.internal.getCoordinateString,me=this.internal.getVerticalCoordinateString,Se=f.call(this);if(z=X[0],V=X[1],Se[W.index]=W,q){q*=Math.PI/180;var Re=Math.cos(q),T=Math.sin(q),ne=function(ce){return ce.toFixed(4)},fe=[ne(Re),ne(T),ne(-1*T),ne(Re),0,0,"cm"]}this.internal.write("q"),q?(this.internal.write([1,"0","0",1,Y($),me(O+V),"cm"].join(" ")),this.internal.write(fe.join(" ")),this.internal.write([Y(z),"0","0",Y(V),"0","0","cm"].join(" "))):this.internal.write([Y(z),"0","0",Y(V),Y($),me(O+V),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+W.index+" Do"),this.internal.write("Q")},R=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var N=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},j=e.__addimage__.sHashCode=function($){var O,z,V=0;if(typeof $=="string")for(z=$.length,O=0;O<z;O++)V=(V<<5)-V+$.charCodeAt(O),V|=0;else if(le($))for(z=$.byteLength/2,O=0;O<z;O++)V=(V<<5)-V+$[O],V|=0;return V},J=e.__addimage__.validateStringAsBase64=function($){($=$||"").toString().trim();var O=!0;return $.length===0&&(O=!1),$.length%4!=0&&(O=!1),/^[A-Za-z0-9+/]+$/.test($.substr(0,$.length-2))===!1&&(O=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test($.substr(-2))===!1&&(O=!1),O},te=e.__addimage__.extractImageFromDataUrl=function($){var O=($=$||"").split("base64,"),z=null;if(O.length===2){var V=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(O[0]);Array.isArray(V)&&(z={mimeType:V[1],charset:V[2],data:O[1]})}return z},ae=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function($){return ae()&&$ instanceof ArrayBuffer};var le=e.__addimage__.isArrayBufferView=function($){return ae()&&typeof Uint32Array<"u"&&($ instanceof Int8Array||$ instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&$ instanceof Uint8ClampedArray||$ instanceof Int16Array||$ instanceof Uint16Array||$ instanceof Int32Array||$ instanceof Uint32Array||$ instanceof Float32Array||$ instanceof Float64Array)},xe=e.__addimage__.binaryStringToUint8Array=function($){for(var O=$.length,z=new Uint8Array(O),V=0;V<O;V++)z[V]=$.charCodeAt(V);return z},G=e.__addimage__.arrayBufferToBinaryString=function($){for(var O="",z=le($)?$:new Uint8Array($),V=0;V<z.length;V+=8192)O+=String.fromCharCode.apply(null,z.subarray(V,V+8192));return O};e.addImage=function(){var $,O,z,V,W,q,X,Y,me;if(typeof arguments[1]=="number"?(O=t,z=arguments[1],V=arguments[2],W=arguments[3],q=arguments[4],X=arguments[5],Y=arguments[6],me=arguments[7]):(O=arguments[1],z=arguments[2],V=arguments[3],W=arguments[4],q=arguments[5],X=arguments[6],Y=arguments[7],me=arguments[8]),Zi($=arguments[0])==="object"&&!y($)&&"imageData"in $){var Se=$;$=Se.imageData,O=Se.format||O||t,z=Se.x||z||0,V=Se.y||V||0,W=Se.w||Se.width||W,q=Se.h||Se.height||q,X=Se.alias||X,Y=Se.compression||Y,me=Se.rotation||Se.angle||me}var Re=this.internal.getFilters();if(Y===void 0&&Re.indexOf("FlateEncode")!==-1&&(Y="SLOW"),isNaN(z)||isNaN(V))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var T=I.call(this,$,O,X,Y);return k.call(this,z,V,W,q,T,me),this};var I=function($,O,z,V){var W,q,X;if(typeof $=="string"&&r($)===t){$=unescape($);var Y=K($,!1);(Y!==""||(Y=e.loadFile($,!0))!==void 0)&&($=Y)}if(y($)&&($=w($,O)),O=r($,O),!m(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(((X=z)==null||X.length===0)&&(z=function(me){return typeof me=="string"||le(me)?j(me):le(me.data)?j(me.data):null}($)),(W=_.call(this,z))||(ae()&&($ instanceof Uint8Array||O==="RGBA"||(q=$,$=xe($))),W=this["process"+O.toUpperCase()]($,d.call(this),z,function(me){return me&&typeof me=="string"&&(me=me.toUpperCase()),me in e.image_compression?me:N.NONE}(V),q)),!W)throw new Error("An unknown error occurred whilst processing the image.");return W},K=e.__addimage__.convertBase64ToBinaryString=function($,O){var z;O=typeof O!="boolean"||O;var V,W="";if(typeof $=="string"){V=(z=te($))!==null?z.data:$;try{W=rp(V)}catch(q){if(O)throw J(V)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+q.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return W};e.getImageProperties=function($){var O,z,V="";if(y($)&&($=w($)),typeof $=="string"&&r($)===t&&((V=K($,!1))===""&&(V=e.loadFile($)||""),$=V),z=r($),!m(z))throw new Error("addImage does not support files of type '"+z+"', please ensure that a plugin for '"+z+"' support is added.");if(!ae()||$ instanceof Uint8Array||($=xe($)),!(O=this["process"+z.toUpperCase()]($)))throw new Error("An unknown error occurred whilst processing the image");return O.fileType=z,O}})(Ar.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};Ar.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var r,i,o,s=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,f=this.internal.getPageInfoByObjId(n.objId),d=n.pageContext.annotations,m=!1,y=0;y<d.length&&!m;y++)switch((r=d[y]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(m=!0);break;case"reference":case"text":case"freetext":m=!0}if(m!=0){this.internal.write("/Annots [");for(var w=0;w<d.length;w++){r=d[w];var _=this.internal.pdfEscape,M=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var k=this.internal.newAdditionalObject(),R=this.internal.newAdditionalObject(),N=this.internal.getEncryptor(k.objId),j=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(r.bounds.x)+" "+u(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y)+"] ")+"/Contents ("+_(N(r.contents))+")",o+=" /Popup "+R.objId+" 0 R",o+=" /P "+f.objId+" 0 R",o+=" /T ("+_(N(j))+") >>",k.content=o;var J=k.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(r.bounds.x+30)+" "+u(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w+30)+" "+u(r.bounds.y)+"] ")+" /Parent "+J,r.open&&(o+=" /Open true"),o+=" >>",R.content=o,this.internal.write(k.objId,"0 R",R.objId,"0 R");break;case"freetext":i="/Rect ["+s(r.bounds.x)+" "+u(r.bounds.y)+" "+s(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y+r.bounds.h)+"] ";var te=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+_(M(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+te+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var ae=this.annotations._nameMap[r.options.name];r.options.pageNumber=ae.page,r.options.top=ae.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+_(M(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var le=u(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+le+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},e.link=function(n,r,i,o,s){var u=this.internal.getCurrentPageInfo(),f=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:f(n),y:d(r),w:f(n+i),h:d(r+o)},options:s,type:"link"})},e.textWithLink=function(n,r,i,o){var s,u,f=this.getTextWidth(n),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){u=o.maxWidth;var m=this.splitTextToSize(n,u).length;s=Math.ceil(d*m)}else u=f,s=d;return this.text(n,r,i,o),i+=.2*d,o.align==="center"&&(r-=f/2),o.align==="right"&&(r-=f),this.link(r,i-d,u,s,o),f},e.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(Ar.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var o=e.__arabicParser__.isInArabicSubstitutionA=function(k){return t[k.charCodeAt(0)]!==void 0},s=e.__arabicParser__.isArabicLetter=function(k){return typeof k=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(k)},u=e.__arabicParser__.isArabicEndLetter=function(k){return s(k)&&o(k)&&t[k.charCodeAt(0)].length<=2},f=e.__arabicParser__.isArabicAlfLetter=function(k){return s(k)&&i.indexOf(k.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(k){return s(k)&&o(k)&&t[k.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(k){return s(k)&&o(k)&&t[k.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(k){return s(k)&&o(k)&&t[k.charCodeAt(0)].length>=3};var m=e.__arabicParser__.arabicLetterHasMedialForm=function(k){return s(k)&&o(k)&&t[k.charCodeAt(0)].length==4},y=e.__arabicParser__.resolveLigatures=function(k){var R=0,N=n,j="",J=0;for(R=0;R<k.length;R+=1)N[k.charCodeAt(R)]!==void 0?(J++,typeof(N=N[k.charCodeAt(R)])=="number"&&(j+=String.fromCharCode(N),N=n,J=0),R===k.length-1&&(N=n,j+=k.charAt(R-(J-1)),R-=J-1,J=0)):(N=n,j+=k.charAt(R-J),R-=J,J=0);return j};e.__arabicParser__.isArabicDiacritic=function(k){return k!==void 0&&r[k.charCodeAt(0)]!==void 0};var w=e.__arabicParser__.getCorrectForm=function(k,R,N){return s(k)?o(k)===!1?-1:!d(k)||!s(R)&&!s(N)||!s(N)&&u(R)||u(k)&&!s(R)||u(k)&&f(R)||u(k)&&u(R)?0:m(k)&&s(R)&&!u(R)&&s(N)&&d(N)?3:u(k)||!s(N)?1:2:-1},_=function(k){var R=0,N=0,j=0,J="",te="",ae="",le=(k=k||"").split("\\s+"),xe=[];for(R=0;R<le.length;R+=1){for(xe.push(""),N=0;N<le[R].length;N+=1)J=le[R][N],te=le[R][N-1],ae=le[R][N+1],s(J)?(j=w(J,te,ae),xe[R]+=j!==-1?String.fromCharCode(t[J.charCodeAt(0)][j]):J):xe[R]+=J;xe[R]=y(xe[R])}return xe.join(" ")},M=e.__arabicParser__.processArabic=e.processArabic=function(){var k,R=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,N=[];if(Array.isArray(R)){var j=0;for(N=[],j=0;j<R.length;j+=1)Array.isArray(R[j])?N.push([_(R[j][0]),R[j][1],R[j][2]]):N.push([_(R[j])]);k=N}else k=_(R);return typeof arguments[0]=="string"?k:(arguments[0].text=k,arguments[0])};e.events.push(["preProcessText",M])}(Ar.API),Ar.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(u){n=u}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(u){r=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(u){i=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(u){o=u}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(u){s=u}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Ar.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var f=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(k){f=k}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(k){d=k}});var m=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return m},set:function(k){m=k}});var y=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return y},set:function(k){y=k}});var w=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return w},set:function(k){w=k}});var _=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return _},set:function(k){_=k}});var M=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return M},set:function(k){M=k}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(f){return r.call(this),this.internal.__cell__.headerFunction=typeof f=="function"?f:void 0,this},e.getTextDimensions=function(f,d){r.call(this);var m=(d=d||{}).fontSize||this.getFontSize(),y=d.font||this.getFont(),w=d.scaleFactor||this.internal.scaleFactor,_=0,M=0,k=0,R=this;if(!Array.isArray(f)&&typeof f!="string"){if(typeof f!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");f=String(f)}var N=d.maxWidth;N>0?typeof f=="string"?f=this.splitTextToSize(f,N):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(J,te){return J.concat(R.splitTextToSize(te,N))},[])):f=Array.isArray(f)?f:[f];for(var j=0;j<f.length;j++)_<(k=this.getStringUnitWidth(f[j],{font:y})*m)&&(_=k);return _!==0&&(M=f.length),{w:_/=w,h:Math.max((M*m*this.getLineHeightFactor()-m*(this.getLineHeightFactor()-1))/w,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var f=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new o(f.left,f.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=e.cell=function(){var f;f=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var d=this.internal.__cell__.lastCell,m=this.internal.__cell__.padding,y=this.internal.__cell__.margins||t,w=this.internal.__cell__.tableHeaderRow,_=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===f.lineNumber?(f.x=(d.x||0)+(d.width||0),f.y=d.y||0):d.y+d.height+f.height+y.bottom>this.getPageHeight()?(this.cellAddPage(),f.y=y.top,_&&w&&(this.printHeaderRow(f.lineNumber,!0),f.y+=w[0].height)):f.y=d.y+d.height||f.y),f.text[0]!==void 0&&(this.rect(f.x,f.y,f.width,f.height,n===!0?"FD":void 0),f.align==="right"?this.text(f.text,f.x+f.width-m,f.y+m,{align:"right",baseline:"top"}):f.align==="center"?this.text(f.text,f.x+f.width/2,f.y+m,{align:"center",baseline:"top",maxWidth:f.width-m-m}):this.text(f.text,f.x+m,f.y+m,{align:"left",baseline:"top",maxWidth:f.width-m-m})),this.internal.__cell__.lastCell=f,this};e.table=function(f,d,m,y,w){if(r.call(this),!m)throw new Error("No data for PDF table.");var _,M,k,R,N=[],j=[],J=[],te={},ae={},le=[],xe=[],G=(w=w||{}).autoSize||!1,I=w.printHeaders!==!1,K=w.css&&w.css["font-size"]!==void 0?16*w.css["font-size"]:w.fontSize||12,$=w.margins||Object.assign({width:this.getPageWidth()},t),O=typeof w.padding=="number"?w.padding:3,z=w.headerBackgroundColor||"#c8c8c8",V=w.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=$,this.internal.__cell__.table_font_size=K,this.internal.__cell__.padding=O,this.internal.__cell__.headerBackgroundColor=z,this.internal.__cell__.headerTextColor=V,this.setFontSize(K),y==null)j=N=Object.keys(m[0]),J=N.map(function(){return"left"});else if(Array.isArray(y)&&Zi(y[0])==="object")for(N=y.map(function(Se){return Se.name}),j=y.map(function(Se){return Se.prompt||Se.name||""}),J=y.map(function(Se){return Se.align||"left"}),_=0;_<y.length;_+=1)ae[y[_].name]=y[_].width*(19.049976/25.4);else Array.isArray(y)&&typeof y[0]=="string"&&(j=N=y,J=N.map(function(){return"left"}));if(G||Array.isArray(y)&&typeof y[0]=="string")for(_=0;_<N.length;_+=1){for(te[R=N[_]]=m.map(function(Se){return Se[R]}),this.setFont(void 0,"bold"),le.push(this.getTextDimensions(j[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),M=te[R],this.setFont(void 0,"normal"),k=0;k<M.length;k+=1)le.push(this.getTextDimensions(M[k],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ae[R]=Math.max.apply(null,le)+O+O,le=[]}if(I){var W={};for(_=0;_<N.length;_+=1)W[N[_]]={},W[N[_]].text=j[_],W[N[_]].align=J[_];var q=u.call(this,W,ae);xe=N.map(function(Se){return new o(f,d,ae[Se],q,W[Se].text,void 0,W[Se].align)}),this.setTableHeaderRow(xe),this.printHeaderRow(1,!1)}var X=y.reduce(function(Se,Re){return Se[Re.name]=Re.align,Se},{});for(_=0;_<m.length;_+=1){"rowStart"in w&&w.rowStart instanceof Function&&w.rowStart({row:_,data:m[_]},this);var Y=u.call(this,m[_],ae);for(k=0;k<N.length;k+=1){var me=m[_][N[k]];"cellStart"in w&&w.cellStart instanceof Function&&w.cellStart({row:_,col:k,data:me},this),s.call(this,new o(f,d,ae[N[k]],Y,me,_+2,X[N[k]]))}}return this.internal.__cell__.table_x=f,this.internal.__cell__.table_y=d,this};var u=function(f,d){var m=this.internal.__cell__.padding,y=this.internal.__cell__.table_font_size,w=this.internal.scaleFactor;return Object.keys(f).map(function(_){var M=f[_];return this.splitTextToSize(M.hasOwnProperty("text")?M.text:M,d[_]-m-m)},this).map(function(_){return this.getLineHeightFactor()*_.length*y/w+m+m},this).reduce(function(_,M){return Math.max(_,M)},0)};e.setTableHeaderRow=function(f){r.call(this),this.internal.__cell__.tableHeaderRow=f},e.printHeaderRow=function(f,d){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var m;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var y=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(y[0],y[1],y[2],y[3],void 0,-1)}this.setFont(void 0,"bold");for(var w=[],_=0;_<this.internal.__cell__.tableHeaderRow.length;_+=1){m=this.internal.__cell__.tableHeaderRow[_].clone(),d&&(m.y=this.internal.__cell__.margins.top||0,w.push(m)),m.lineNumber=f;var M=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,m),this.setTextColor(M)}w.length>0&&this.setTableHeaderRow(w),this.setFont(void 0,"normal"),n=!1}}(Ar.API);var Dx={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Bx=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],E1=Tx(Bx),Nx=[100,200,300,400,500,600,700,800,900],AF=Tx(Nx);function P1(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(o){return Dx[o=o||"normal"]?o:"normal"}(e.style),r=function(o){if(!o)return 400;if(typeof o=="number")return o>=100&&o<=900&&o%100==0?o:400;if(/^\d00$/.test(o))return parseInt(o);switch(o){case"bold":return 700;case"normal":default:return 400}}(e.weight),i=function(o){return typeof E1[o=o||"normal"]=="number"?o:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,n,r].join(" ")}}}function kb(e,t,n,r){var i;for(i=n;i>=0&&i<t.length;i+=r)if(e[t[i]])return e[t[i]];for(i=n;i>=0&&i<t.length;i-=r)if(e[t[i]])return e[t[i]]}var kF={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Tb={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Db(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function TF(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},kF,n.genericFontFamilies||{}),o=null,s=null,u=0;u<t.length;++u)if(i[(o=P1(t[u])).family]&&(o.family=i[o.family]),e.hasOwnProperty(o.family)){s=e[o.family];break}if(!(s=s||e[r]))throw new Error("Could not find a font-family for the rule '"+Db(o)+"' and default family '"+r+"'.");if(s=function(f,d){if(d[f])return d[f];var m=E1[f],y=m<=E1.normal?-1:1,w=kb(d,Bx,m,y);if(!w)throw new Error("Could not find a matching font-stretch value for "+f);return w}(o.stretch,s),s=function(f,d){if(d[f])return d[f];for(var m=Dx[f],y=0;y<m.length;++y)if(d[m[y]])return d[m[y]];throw new Error("Could not find a matching font-style for "+f)}(o.style,s),!(s=function(f,d){if(d[f])return d[f];if(f===400&&d[500])return d[500];if(f===500&&d[400])return d[400];var m=AF[f],y=kb(d,Nx,m,f<400?-1:1);if(!y)throw new Error("Could not find a matching font-weight for value "+f);return y}(o.weight,s)))throw new Error("Failed to resolve a font for the rule '"+Db(o)+"'.");return s}function Bb(e){return e.trimLeft()}function DF(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function BF(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var _0,Nb,Ob,pv=["times"];(function(e){var t,n,r,i,o,s,u,f,d,m=function(T){return T=T||{},this.isStrokeTransparent=T.isStrokeTransparent||!1,this.strokeOpacity=T.strokeOpacity||1,this.strokeStyle=T.strokeStyle||"#000000",this.fillStyle=T.fillStyle||"#000000",this.isFillTransparent=T.isFillTransparent||!1,this.fillOpacity=T.fillOpacity||1,this.font=T.font||"10px sans-serif",this.textBaseline=T.textBaseline||"alphabetic",this.textAlign=T.textAlign||"left",this.lineWidth=T.lineWidth||1,this.lineJoin=T.lineJoin||"miter",this.lineCap=T.lineCap||"butt",this.path=T.path||[],this.transform=T.transform!==void 0?T.transform.clone():new f,this.globalCompositeOperation=T.globalCompositeOperation||"normal",this.globalAlpha=T.globalAlpha||1,this.clip_path=T.clip_path||[],this.currentPoint=T.currentPoint||new s,this.miterLimit=T.miterLimit||10,this.lastPoint=T.lastPoint||new s,this.lineDashOffset=T.lineDashOffset||0,this.lineDash=T.lineDash||[],this.margin=T.margin||[0,0,0,0],this.prevPageLastElemOffset=T.prevPageLastElemOffset||0,this.ignoreClearRect=typeof T.ignoreClearRect!="boolean"||T.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new y(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,s=this.internal.Point,u=this.internal.Rectangle,f=this.internal.Matrix,d=new m}]);var y=function(T){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var ne=T;Object.defineProperty(this,"pdf",{get:function(){return ne}});var fe=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return fe},set:function(ve){fe=!!ve}});var ce=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ce},set:function(ve){ce=!!ve}});var ye=0;Object.defineProperty(this,"posX",{get:function(){return ye},set:function(ve){isNaN(ve)||(ye=ve)}});var oe=0;Object.defineProperty(this,"posY",{get:function(){return oe},set:function(ve){isNaN(ve)||(oe=ve)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(ve){var pe;typeof ve=="number"?pe=[ve,ve,ve,ve]:((pe=new Array(4))[0]=ve[0],pe[1]=ve.length>=2?ve[1]:pe[0],pe[2]=ve.length>=3?ve[2]:pe[0],pe[3]=ve.length>=4?ve[3]:pe[1]),d.margin=pe}});var B=!1;Object.defineProperty(this,"autoPaging",{get:function(){return B},set:function(ve){B=ve}});var ue=0;Object.defineProperty(this,"lastBreak",{get:function(){return ue},set:function(ve){ue=ve}});var De=[];Object.defineProperty(this,"pageBreaks",{get:function(){return De},set:function(ve){De=ve}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(ve){ve instanceof m&&(d=ve)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(ve){d.path=ve}});var Me=[];Object.defineProperty(this,"ctxStack",{get:function(){return Me},set:function(ve){Me=ve}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ve){var pe;pe=w(ve),this.ctx.fillStyle=pe.style,this.ctx.isFillTransparent=pe.a===0,this.ctx.fillOpacity=pe.a,this.pdf.setFillColor(pe.r,pe.g,pe.b,{a:pe.a}),this.pdf.setTextColor(pe.r,pe.g,pe.b,{a:pe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ve){var pe=w(ve);this.ctx.strokeStyle=pe.style,this.ctx.isStrokeTransparent=pe.a===0,this.ctx.strokeOpacity=pe.a,pe.a===0?this.pdf.setDrawColor(255,255,255):(pe.a,this.pdf.setDrawColor(pe.r,pe.g,pe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ve){["butt","round","square"].indexOf(ve)!==-1&&(this.ctx.lineCap=ve,this.pdf.setLineCap(ve))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ve){isNaN(ve)||(this.ctx.lineWidth=ve,this.pdf.setLineWidth(ve))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ve){["bevel","round","miter"].indexOf(ve)!==-1&&(this.ctx.lineJoin=ve,this.pdf.setLineJoin(ve))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ve){isNaN(ve)||(this.ctx.miterLimit=ve,this.pdf.setMiterLimit(ve))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ve){this.ctx.textBaseline=ve}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ve){["right","end","center","left","start"].indexOf(ve)!==-1&&(this.ctx.textAlign=ve)}});var We=null;function Z(ve,pe){if(We===null){var $e=function(Qe){var Ke=[];return Object.keys(Qe).forEach(function(He){Qe[He].forEach(function(Xe){var st=null;switch(Xe){case"bold":st={family:He,weight:"bold"};break;case"italic":st={family:He,style:"italic"};break;case"bolditalic":st={family:He,weight:"bold",style:"italic"};break;case"":case"normal":st={family:He}}st!==null&&(st.ref={name:He,style:Xe},Ke.push(st))})}),Ke}(ve.getFontList());We=function(Qe){for(var Ke={},He=0;He<Qe.length;++He){var Xe=P1(Qe[He]),st=Xe.family,kt=Xe.stretch,Ct=Xe.style,Ut=Xe.weight;Ke[st]=Ke[st]||{},Ke[st][kt]=Ke[st][kt]||{},Ke[st][kt][Ct]=Ke[st][kt][Ct]||{},Ke[st][kt][Ct][Ut]=Xe}return Ke}($e.concat(pe))}return We}var de=null;Object.defineProperty(this,"fontFaces",{get:function(){return de},set:function(ve){We=null,de=ve}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ve){var pe;if(this.ctx.font=ve,(pe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ve))!==null){var $e=pe[1],Qe=(pe[2],pe[3]),Ke=pe[4],He=(pe[5],pe[6]),Xe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ke)[2];Ke=Math.floor(Xe==="px"?parseFloat(Ke)*this.pdf.internal.scaleFactor:Xe==="em"?parseFloat(Ke)*this.pdf.getFontSize():parseFloat(Ke)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ke);var st=function(et){var it,nt,Vt=[],Qt=et.trim();if(Qt==="")return pv;if(Qt in Tb)return[Tb[Qt]];for(;Qt!=="";){switch(nt=null,it=(Qt=Bb(Qt)).charAt(0)){case'"':case"'":nt=DF(Qt.substring(1),it);break;default:nt=BF(Qt)}if(nt===null||(Vt.push(nt[0]),(Qt=Bb(nt[1]))!==""&&Qt.charAt(0)!==","))return pv;Qt=Qt.replace(/^,/,"")}return Vt}(He);if(this.fontFaces){var kt=TF(Z(this.pdf,this.fontFaces),st.map(function(et){return{family:et,stretch:"normal",weight:Qe,style:$e}}));this.pdf.setFont(kt.ref.name,kt.ref.style)}else{var Ct="";(Qe==="bold"||parseInt(Qe,10)>=700||$e==="bold")&&(Ct="bold"),$e==="italic"&&(Ct+="italic"),Ct.length===0&&(Ct="normal");for(var Ut="",Gt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},fn=0;fn<st.length;fn++){if(this.pdf.internal.getFont(st[fn],Ct,{noFallback:!0,disableWarning:!0})!==void 0){Ut=st[fn];break}if(Ct==="bolditalic"&&this.pdf.internal.getFont(st[fn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ut=st[fn],Ct="bold";else if(this.pdf.internal.getFont(st[fn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ut=st[fn],Ct="normal";break}}if(Ut===""){for(var pn=0;pn<st.length;pn++)if(Gt[st[pn]]){Ut=Gt[st[pn]];break}}Ut=Ut===""?"Times":Ut,this.pdf.setFont(Ut,Ct)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ve){this.ctx.globalCompositeOperation=ve}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ve){this.ctx.globalAlpha=ve}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ve){this.ctx.lineDashOffset=ve,Re.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ve){this.ctx.lineDash=ve,Re.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ve){this.ctx.ignoreClearRect=!!ve}})};y.prototype.setLineDash=function(T){this.lineDash=T},y.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},y.prototype.fill=function(){te.call(this,"fill",!1)},y.prototype.stroke=function(){te.call(this,"stroke",!1)},y.prototype.beginPath=function(){this.path=[{type:"begin"}]},y.prototype.moveTo=function(T,ne){if(isNaN(T)||isNaN(ne))throw is.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var fe=this.ctx.transform.applyToPoint(new s(T,ne));this.path.push({type:"mt",x:fe.x,y:fe.y}),this.ctx.lastPoint=new s(T,ne)},y.prototype.closePath=function(){var T=new s(0,0),ne=0;for(ne=this.path.length-1;ne!==-1;ne--)if(this.path[ne].type==="begin"&&Zi(this.path[ne+1])==="object"&&typeof this.path[ne+1].x=="number"){T=new s(this.path[ne+1].x,this.path[ne+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(T.x,T.y)},y.prototype.lineTo=function(T,ne){if(isNaN(T)||isNaN(ne))throw is.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var fe=this.ctx.transform.applyToPoint(new s(T,ne));this.path.push({type:"lt",x:fe.x,y:fe.y}),this.ctx.lastPoint=new s(fe.x,fe.y)},y.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),te.call(this,null,!0)},y.prototype.quadraticCurveTo=function(T,ne,fe,ce){if(isNaN(fe)||isNaN(ce)||isNaN(T)||isNaN(ne))throw is.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ye=this.ctx.transform.applyToPoint(new s(fe,ce)),oe=this.ctx.transform.applyToPoint(new s(T,ne));this.path.push({type:"qct",x1:oe.x,y1:oe.y,x:ye.x,y:ye.y}),this.ctx.lastPoint=new s(ye.x,ye.y)},y.prototype.bezierCurveTo=function(T,ne,fe,ce,ye,oe){if(isNaN(ye)||isNaN(oe)||isNaN(T)||isNaN(ne)||isNaN(fe)||isNaN(ce))throw is.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var B=this.ctx.transform.applyToPoint(new s(ye,oe)),ue=this.ctx.transform.applyToPoint(new s(T,ne)),De=this.ctx.transform.applyToPoint(new s(fe,ce));this.path.push({type:"bct",x1:ue.x,y1:ue.y,x2:De.x,y2:De.y,x:B.x,y:B.y}),this.ctx.lastPoint=new s(B.x,B.y)},y.prototype.arc=function(T,ne,fe,ce,ye,oe){if(isNaN(T)||isNaN(ne)||isNaN(fe)||isNaN(ce)||isNaN(ye))throw is.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(oe=!!oe,!this.ctx.transform.isIdentity){var B=this.ctx.transform.applyToPoint(new s(T,ne));T=B.x,ne=B.y;var ue=this.ctx.transform.applyToPoint(new s(0,fe)),De=this.ctx.transform.applyToPoint(new s(0,0));fe=Math.sqrt(Math.pow(ue.x-De.x,2)+Math.pow(ue.y-De.y,2))}Math.abs(ye-ce)>=2*Math.PI&&(ce=0,ye=2*Math.PI),this.path.push({type:"arc",x:T,y:ne,radius:fe,startAngle:ce,endAngle:ye,counterclockwise:oe})},y.prototype.arcTo=function(T,ne,fe,ce,ye){throw new Error("arcTo not implemented.")},y.prototype.rect=function(T,ne,fe,ce){if(isNaN(T)||isNaN(ne)||isNaN(fe)||isNaN(ce))throw is.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(T,ne),this.lineTo(T+fe,ne),this.lineTo(T+fe,ne+ce),this.lineTo(T,ne+ce),this.lineTo(T,ne),this.lineTo(T+fe,ne),this.lineTo(T,ne)},y.prototype.fillRect=function(T,ne,fe,ce){if(isNaN(T)||isNaN(ne)||isNaN(fe)||isNaN(ce))throw is.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!_.call(this)){var ye={};this.lineCap!=="butt"&&(ye.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ye.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(T,ne,fe,ce),this.fill(),ye.hasOwnProperty("lineCap")&&(this.lineCap=ye.lineCap),ye.hasOwnProperty("lineJoin")&&(this.lineJoin=ye.lineJoin)}},y.prototype.strokeRect=function(T,ne,fe,ce){if(isNaN(T)||isNaN(ne)||isNaN(fe)||isNaN(ce))throw is.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");M.call(this)||(this.beginPath(),this.rect(T,ne,fe,ce),this.stroke())},y.prototype.clearRect=function(T,ne,fe,ce){if(isNaN(T)||isNaN(ne)||isNaN(fe)||isNaN(ce))throw is.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(T,ne,fe,ce))},y.prototype.save=function(T){T=typeof T!="boolean"||T;for(var ne=this.pdf.internal.getCurrentPageInfo().pageNumber,fe=0;fe<this.pdf.internal.getNumberOfPages();fe++)this.pdf.setPage(fe+1),this.pdf.internal.out("q");if(this.pdf.setPage(ne),T){this.ctx.fontSize=this.pdf.internal.getFontSize();var ce=new m(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ce}},y.prototype.restore=function(T){T=typeof T!="boolean"||T;for(var ne=this.pdf.internal.getCurrentPageInfo().pageNumber,fe=0;fe<this.pdf.internal.getNumberOfPages();fe++)this.pdf.setPage(fe+1),this.pdf.internal.out("Q");this.pdf.setPage(ne),T&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},y.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var w=function(T){var ne,fe,ce,ye;if(T.isCanvasGradient===!0&&(T=T.getColor()),!T)return{r:0,g:0,b:0,a:0,style:T};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(T))ne=0,fe=0,ce=0,ye=0;else{var oe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(T);if(oe!==null)ne=parseInt(oe[1]),fe=parseInt(oe[2]),ce=parseInt(oe[3]),ye=1;else if((oe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(T))!==null)ne=parseInt(oe[1]),fe=parseInt(oe[2]),ce=parseInt(oe[3]),ye=parseFloat(oe[4]);else{if(ye=1,typeof T=="string"&&T.charAt(0)!=="#"){var B=new Cx(T);T=B.ok?B.toHex():"#000000"}T.length===4?(ne=T.substring(1,2),ne+=ne,fe=T.substring(2,3),fe+=fe,ce=T.substring(3,4),ce+=ce):(ne=T.substring(1,3),fe=T.substring(3,5),ce=T.substring(5,7)),ne=parseInt(ne,16),fe=parseInt(fe,16),ce=parseInt(ce,16)}}return{r:ne,g:fe,b:ce,a:ye,style:T}},_=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},M=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};y.prototype.fillText=function(T,ne,fe,ce){if(isNaN(ne)||isNaN(fe)||typeof T!="string")throw is.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ce=isNaN(ce)?void 0:ce,!_.call(this)){var ye=Y(this.ctx.transform.rotation),oe=this.ctx.transform.scaleX;O.call(this,{text:T,x:ne,y:fe,scale:oe,angle:ye,align:this.textAlign,maxWidth:ce})}},y.prototype.strokeText=function(T,ne,fe,ce){if(isNaN(ne)||isNaN(fe)||typeof T!="string")throw is.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!M.call(this)){ce=isNaN(ce)?void 0:ce;var ye=Y(this.ctx.transform.rotation),oe=this.ctx.transform.scaleX;O.call(this,{text:T,x:ne,y:fe,scale:oe,renderingMode:"stroke",angle:ye,align:this.textAlign,maxWidth:ce})}},y.prototype.measureText=function(T){if(typeof T!="string")throw is.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var ne=this.pdf,fe=this.pdf.internal.scaleFactor,ce=ne.internal.getFontSize(),ye=ne.getStringUnitWidth(T)*ce/ne.internal.scaleFactor,oe=function(B){var ue=(B=B||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ue}}),this};return new oe({width:ye*=Math.round(96*fe/72*1e4)/1e4})},y.prototype.scale=function(T,ne){if(isNaN(T)||isNaN(ne))throw is.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var fe=new f(T,0,0,ne,0,0);this.ctx.transform=this.ctx.transform.multiply(fe)},y.prototype.rotate=function(T){if(isNaN(T))throw is.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var ne=new f(Math.cos(T),Math.sin(T),-Math.sin(T),Math.cos(T),0,0);this.ctx.transform=this.ctx.transform.multiply(ne)},y.prototype.translate=function(T,ne){if(isNaN(T)||isNaN(ne))throw is.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var fe=new f(1,0,0,1,T,ne);this.ctx.transform=this.ctx.transform.multiply(fe)},y.prototype.transform=function(T,ne,fe,ce,ye,oe){if(isNaN(T)||isNaN(ne)||isNaN(fe)||isNaN(ce)||isNaN(ye)||isNaN(oe))throw is.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var B=new f(T,ne,fe,ce,ye,oe);this.ctx.transform=this.ctx.transform.multiply(B)},y.prototype.setTransform=function(T,ne,fe,ce,ye,oe){T=isNaN(T)?1:T,ne=isNaN(ne)?0:ne,fe=isNaN(fe)?0:fe,ce=isNaN(ce)?1:ce,ye=isNaN(ye)?0:ye,oe=isNaN(oe)?0:oe,this.ctx.transform=new f(T,ne,fe,ce,ye,oe)};var k=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};y.prototype.drawImage=function(T,ne,fe,ce,ye,oe,B,ue,De){var Me=this.pdf.getImageProperties(T),We=1,Z=1,de=1,ve=1;ce!==void 0&&ue!==void 0&&(de=ue/ce,ve=De/ye,We=Me.width/ce*ue/ce,Z=Me.height/ye*De/ye),oe===void 0&&(oe=ne,B=fe,ne=0,fe=0),ce!==void 0&&ue===void 0&&(ue=ce,De=ye),ce===void 0&&ue===void 0&&(ue=Me.width,De=Me.height);for(var pe,$e=this.ctx.transform.decompose(),Qe=Y($e.rotate.shx),Ke=new f,He=(Ke=(Ke=(Ke=Ke.multiply($e.translate)).multiply($e.skew)).multiply($e.scale)).applyToRectangle(new u(oe-ne*de,B-fe*ve,ce*We,ye*Z)),Xe=R.call(this,He),st=[],kt=0;kt<Xe.length;kt+=1)st.indexOf(Xe[kt])===-1&&st.push(Xe[kt]);if(J(st),this.autoPaging)for(var Ct=st[0],Ut=st[st.length-1],Gt=Ct;Gt<Ut+1;Gt++){this.pdf.setPage(Gt);var fn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],pn=Gt===1?this.posY+this.margin[0]:this.margin[0],et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],it=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],nt=Gt===1?0:et+(Gt-2)*it;if(this.ctx.clip_path.length!==0){var Vt=this.path;pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(pe,this.posX+this.margin[3],-nt+pn+this.ctx.prevPageLastElemOffset),ae.call(this,"fill",!0),this.path=Vt}var Qt=JSON.parse(JSON.stringify(He));Qt=j([Qt],this.posX+this.margin[3],-nt+pn+this.ctx.prevPageLastElemOffset)[0];var Nn=(Gt>Ct||Gt<Ut)&&k.call(this);Nn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],fn,it,null).clip().discardPath()),this.pdf.addImage(T,"JPEG",Qt.x,Qt.y,Qt.w,Qt.h,null,null,Qe),Nn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(T,"JPEG",He.x,He.y,He.w,He.h,null,null,Qe)};var R=function(T,ne,fe){var ce=[];ne=ne||this.pdf.internal.pageSize.width,fe=fe||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ye=this.posY+this.ctx.prevPageLastElemOffset;switch(T.type){default:case"mt":case"lt":ce.push(Math.floor((T.y+ye)/fe)+1);break;case"arc":ce.push(Math.floor((T.y+ye-T.radius)/fe)+1),ce.push(Math.floor((T.y+ye+T.radius)/fe)+1);break;case"qct":var oe=me(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x,T.y);ce.push(Math.floor((oe.y+ye)/fe)+1),ce.push(Math.floor((oe.y+oe.h+ye)/fe)+1);break;case"bct":var B=Se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x2,T.y2,T.x,T.y);ce.push(Math.floor((B.y+ye)/fe)+1),ce.push(Math.floor((B.y+B.h+ye)/fe)+1);break;case"rect":ce.push(Math.floor((T.y+ye)/fe)+1),ce.push(Math.floor((T.y+T.h+ye)/fe)+1)}for(var ue=0;ue<ce.length;ue+=1)for(;this.pdf.internal.getNumberOfPages()<ce[ue];)N.call(this);return ce},N=function(){var T=this.fillStyle,ne=this.strokeStyle,fe=this.font,ce=this.lineCap,ye=this.lineWidth,oe=this.lineJoin;this.pdf.addPage(),this.fillStyle=T,this.strokeStyle=ne,this.font=fe,this.lineCap=ce,this.lineWidth=ye,this.lineJoin=oe},j=function(T,ne,fe){for(var ce=0;ce<T.length;ce++)switch(T[ce].type){case"bct":T[ce].x2+=ne,T[ce].y2+=fe;case"qct":T[ce].x1+=ne,T[ce].y1+=fe;case"mt":case"lt":case"arc":default:T[ce].x+=ne,T[ce].y+=fe}return T},J=function(T){return T.sort(function(ne,fe){return ne-fe})},te=function(T,ne){for(var fe,ce,ye=this.fillStyle,oe=this.strokeStyle,B=this.lineCap,ue=this.lineWidth,De=Math.abs(ue*this.ctx.transform.scaleX),Me=this.lineJoin,We=JSON.parse(JSON.stringify(this.path)),Z=JSON.parse(JSON.stringify(this.path)),de=[],ve=0;ve<Z.length;ve++)if(Z[ve].x!==void 0)for(var pe=R.call(this,Z[ve]),$e=0;$e<pe.length;$e+=1)de.indexOf(pe[$e])===-1&&de.push(pe[$e]);for(var Qe=0;Qe<de.length;Qe++)for(;this.pdf.internal.getNumberOfPages()<de[Qe];)N.call(this);if(J(de),this.autoPaging)for(var Ke=de[0],He=de[de.length-1],Xe=Ke;Xe<He+1;Xe++){this.pdf.setPage(Xe),this.fillStyle=ye,this.strokeStyle=oe,this.lineCap=B,this.lineWidth=De,this.lineJoin=Me;var st=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],kt=Xe===1?this.posY+this.margin[0]:this.margin[0],Ct=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ut=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Gt=Xe===1?0:Ct+(Xe-2)*Ut;if(this.ctx.clip_path.length!==0){var fn=this.path;fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(fe,this.posX+this.margin[3],-Gt+kt+this.ctx.prevPageLastElemOffset),ae.call(this,T,!0),this.path=fn}if(ce=JSON.parse(JSON.stringify(We)),this.path=j(ce,this.posX+this.margin[3],-Gt+kt+this.ctx.prevPageLastElemOffset),ne===!1||Xe===0){var pn=(Xe>Ke||Xe<He)&&k.call(this);pn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],st,Ut,null).clip().discardPath()),ae.call(this,T,ne),pn&&this.pdf.restoreGraphicsState()}this.lineWidth=ue}else this.lineWidth=De,ae.call(this,T,ne),this.lineWidth=ue;this.path=We},ae=function(T,ne){if((T!=="stroke"||ne||!M.call(this))&&(T==="stroke"||ne||!_.call(this))){for(var fe,ce,ye=[],oe=this.path,B=0;B<oe.length;B++){var ue=oe[B];switch(ue.type){case"begin":ye.push({begin:!0});break;case"close":ye.push({close:!0});break;case"mt":ye.push({start:ue,deltas:[],abs:[]});break;case"lt":var De=ye.length;if(oe[B-1]&&!isNaN(oe[B-1].x)&&(fe=[ue.x-oe[B-1].x,ue.y-oe[B-1].y],De>0)){for(;De>=0;De--)if(ye[De-1].close!==!0&&ye[De-1].begin!==!0){ye[De-1].deltas.push(fe),ye[De-1].abs.push(ue);break}}break;case"bct":fe=[ue.x1-oe[B-1].x,ue.y1-oe[B-1].y,ue.x2-oe[B-1].x,ue.y2-oe[B-1].y,ue.x-oe[B-1].x,ue.y-oe[B-1].y],ye[ye.length-1].deltas.push(fe);break;case"qct":var Me=oe[B-1].x+2/3*(ue.x1-oe[B-1].x),We=oe[B-1].y+2/3*(ue.y1-oe[B-1].y),Z=ue.x+2/3*(ue.x1-ue.x),de=ue.y+2/3*(ue.y1-ue.y),ve=ue.x,pe=ue.y;fe=[Me-oe[B-1].x,We-oe[B-1].y,Z-oe[B-1].x,de-oe[B-1].y,ve-oe[B-1].x,pe-oe[B-1].y],ye[ye.length-1].deltas.push(fe);break;case"arc":ye.push({deltas:[],abs:[],arc:!0}),Array.isArray(ye[ye.length-1].abs)&&ye[ye.length-1].abs.push(ue)}}ce=ne?null:T==="stroke"?"stroke":"fill";for(var $e=!1,Qe=0;Qe<ye.length;Qe++)if(ye[Qe].arc)for(var Ke=ye[Qe].abs,He=0;He<Ke.length;He++){var Xe=Ke[He];Xe.type==="arc"?G.call(this,Xe.x,Xe.y,Xe.radius,Xe.startAngle,Xe.endAngle,Xe.counterclockwise,void 0,ne,!$e):z.call(this,Xe.x,Xe.y),$e=!0}else if(ye[Qe].close===!0)this.pdf.internal.out("h"),$e=!1;else if(ye[Qe].begin!==!0){var st=ye[Qe].start.x,kt=ye[Qe].start.y;V.call(this,ye[Qe].deltas,st,kt),$e=!0}ce&&I.call(this,ce),ne&&K.call(this)}},le=function(T){var ne=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,fe=ne*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return T-fe;case"top":return T+ne-fe;case"hanging":return T+ne-2*fe;case"middle":return T+ne/2-fe;case"ideographic":return T;case"alphabetic":default:return T}},xe=function(T){return T+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};y.prototype.createLinearGradient=function(){var T=function(){};return T.colorStops=[],T.addColorStop=function(ne,fe){this.colorStops.push([ne,fe])},T.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},T.isCanvasGradient=!0,T},y.prototype.createPattern=function(){return this.createLinearGradient()},y.prototype.createRadialGradient=function(){return this.createLinearGradient()};var G=function(T,ne,fe,ce,ye,oe,B,ue,De){for(var Me=q.call(this,fe,ce,ye,oe),We=0;We<Me.length;We++){var Z=Me[We];We===0&&(De?$.call(this,Z.x1+T,Z.y1+ne):z.call(this,Z.x1+T,Z.y1+ne)),W.call(this,T,ne,Z.x2,Z.y2,Z.x3,Z.y3,Z.x4,Z.y4)}ue?K.call(this):I.call(this,B)},I=function(T){switch(T){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},K=function(){this.pdf.clip(),this.pdf.discardPath()},$=function(T,ne){this.pdf.internal.out(n(T)+" "+r(ne)+" m")},O=function(T){var ne;switch(T.align){case"right":case"end":ne="right";break;case"center":ne="center";break;case"left":case"start":default:ne="left"}var fe=this.pdf.getTextDimensions(T.text),ce=le.call(this,T.y),ye=xe.call(this,ce)-fe.h,oe=this.ctx.transform.applyToPoint(new s(T.x,ce)),B=this.ctx.transform.decompose(),ue=new f;ue=(ue=(ue=ue.multiply(B.translate)).multiply(B.skew)).multiply(B.scale);for(var De,Me,We,Z=this.ctx.transform.applyToRectangle(new u(T.x,ce,fe.w,fe.h)),de=ue.applyToRectangle(new u(T.x,ye,fe.w,fe.h)),ve=R.call(this,de),pe=[],$e=0;$e<ve.length;$e+=1)pe.indexOf(ve[$e])===-1&&pe.push(ve[$e]);if(J(pe),this.autoPaging)for(var Qe=pe[0],Ke=pe[pe.length-1],He=Qe;He<Ke+1;He++){this.pdf.setPage(He);var Xe=He===1?this.posY+this.margin[0]:this.margin[0],st=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],kt=this.pdf.internal.pageSize.height-this.margin[2],Ct=kt-this.margin[0],Ut=this.pdf.internal.pageSize.width-this.margin[1],Gt=Ut-this.margin[3],fn=He===1?0:st+(He-2)*Ct;if(this.ctx.clip_path.length!==0){var pn=this.path;De=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(De,this.posX+this.margin[3],-1*fn+Xe),ae.call(this,"fill",!0),this.path=pn}var et=j([JSON.parse(JSON.stringify(de))],this.posX+this.margin[3],-fn+Xe+this.ctx.prevPageLastElemOffset)[0];T.scale>=.01&&(Me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Me*T.scale),We=this.lineWidth,this.lineWidth=We*T.scale);var it=this.autoPaging!=="text";if(it||et.y+et.h<=kt){if(it||et.y>=Xe&&et.x<=Ut){var nt=it?T.text:this.pdf.splitTextToSize(T.text,T.maxWidth||Ut-et.x)[0],Vt=j([JSON.parse(JSON.stringify(Z))],this.posX+this.margin[3],-fn+Xe+this.ctx.prevPageLastElemOffset)[0],Qt=it&&(He>Qe||He<Ke)&&k.call(this);Qt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Gt,Ct,null).clip().discardPath()),this.pdf.text(nt,Vt.x,Vt.y,{angle:T.angle,align:ne,renderingMode:T.renderingMode}),Qt&&this.pdf.restoreGraphicsState()}}else et.y<kt&&(this.ctx.prevPageLastElemOffset+=kt-et.y);T.scale>=.01&&(this.pdf.setFontSize(Me),this.lineWidth=We)}else T.scale>=.01&&(Me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Me*T.scale),We=this.lineWidth,this.lineWidth=We*T.scale),this.pdf.text(T.text,oe.x+this.posX,oe.y+this.posY,{angle:T.angle,align:ne,renderingMode:T.renderingMode,maxWidth:T.maxWidth}),T.scale>=.01&&(this.pdf.setFontSize(Me),this.lineWidth=We)},z=function(T,ne,fe,ce){fe=fe||0,ce=ce||0,this.pdf.internal.out(n(T+fe)+" "+r(ne+ce)+" l")},V=function(T,ne,fe){return this.pdf.lines(T,ne,fe,null,null)},W=function(T,ne,fe,ce,ye,oe,B,ue){this.pdf.internal.out([t(i(fe+T)),t(o(ce+ne)),t(i(ye+T)),t(o(oe+ne)),t(i(B+T)),t(o(ue+ne)),"c"].join(" "))},q=function(T,ne,fe,ce){for(var ye=2*Math.PI,oe=Math.PI/2;ne>fe;)ne-=ye;var B=Math.abs(fe-ne);B<ye&&ce&&(B=ye-B);for(var ue=[],De=ce?-1:1,Me=ne;B>1e-5;){var We=Me+De*Math.min(B,oe);ue.push(X.call(this,T,Me,We)),B-=Math.abs(We-Me),Me=We}return ue},X=function(T,ne,fe){var ce=(fe-ne)/2,ye=T*Math.cos(ce),oe=T*Math.sin(ce),B=ye,ue=-oe,De=B*B+ue*ue,Me=De+B*ye+ue*oe,We=4/3*(Math.sqrt(2*De*Me)-Me)/(B*oe-ue*ye),Z=B-We*ue,de=ue+We*B,ve=Z,pe=-de,$e=ce+ne,Qe=Math.cos($e),Ke=Math.sin($e);return{x1:T*Math.cos(ne),y1:T*Math.sin(ne),x2:Z*Qe-de*Ke,y2:Z*Ke+de*Qe,x3:ve*Qe-pe*Ke,y3:ve*Ke+pe*Qe,x4:T*Math.cos(fe),y4:T*Math.sin(fe)}},Y=function(T){return 180*T/Math.PI},me=function(T,ne,fe,ce,ye,oe){var B=T+.5*(fe-T),ue=ne+.5*(ce-ne),De=ye+.5*(fe-ye),Me=oe+.5*(ce-oe),We=Math.min(T,ye,B,De),Z=Math.max(T,ye,B,De),de=Math.min(ne,oe,ue,Me),ve=Math.max(ne,oe,ue,Me);return new u(We,de,Z-We,ve-de)},Se=function(T,ne,fe,ce,ye,oe,B,ue){var De,Me,We,Z,de,ve,pe,$e,Qe,Ke,He,Xe,st,kt,Ct=fe-T,Ut=ce-ne,Gt=ye-fe,fn=oe-ce,pn=B-ye,et=ue-oe;for(Me=0;Me<41;Me++)Qe=(pe=(We=T+(De=Me/40)*Ct)+De*((de=fe+De*Gt)-We))+De*(de+De*(ye+De*pn-de)-pe),Ke=($e=(Z=ne+De*Ut)+De*((ve=ce+De*fn)-Z))+De*(ve+De*(oe+De*et-ve)-$e),Me==0?(He=Qe,Xe=Ke,st=Qe,kt=Ke):(He=Math.min(He,Qe),Xe=Math.min(Xe,Ke),st=Math.max(st,Qe),kt=Math.max(kt,Ke));return new u(Math.round(He),Math.round(Xe),Math.round(st-He),Math.round(kt-Xe))},Re=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var T,ne,fe=(T=this.ctx.lineDash,ne=this.ctx.lineDashOffset,JSON.stringify({lineDash:T,lineDashOffset:ne}));this.prevLineDash!==fe&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=fe)}}})(Ar.API),function(e){var t=function(o){var s,u,f,d,m,y,w,_,M,k;for(u=[],f=0,d=(o+=s="\0\0\0\0".slice(o.length%4||4)).length;d>f;f+=4)(m=(o.charCodeAt(f)<<24)+(o.charCodeAt(f+1)<<16)+(o.charCodeAt(f+2)<<8)+o.charCodeAt(f+3))!==0?(y=(m=((m=((m=((m=(m-(k=m%85))/85)-(M=m%85))/85)-(_=m%85))/85)-(w=m%85))/85)%85,u.push(y+33,w+33,_+33,M+33,k+33)):u.push(122);return function(R,N){for(var j=N;j>0;j--)R.pop()}(u,s.length),String.fromCharCode.apply(String,u)+"~>"},n=function(o){var s,u,f,d,m,y=String,w="length",_=255,M="charCodeAt",k="slice",R="replace";for(o[k](-2),o=o[k](0,-2)[R](/\s/g,"")[R]("z","!!!!!"),f=[],d=0,m=(o+=s="uuuuu"[k](o[w]%5||5))[w];m>d;d+=5)u=52200625*(o[M](d)-33)+614125*(o[M](d+1)-33)+7225*(o[M](d+2)-33)+85*(o[M](d+3)-33)+(o[M](d+4)-33),f.push(_&u>>24,_&u>>16,_&u>>8,_&u);return function(N,j){for(var J=j;J>0;J--)N.pop()}(f,s[w]),y.fromCharCode.apply(y,f)},r=function(o){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),s.test(o)===!1)return"";for(var u="",f=0;f<o.length;f+=2)u+=String.fromCharCode("0x"+(o[f]+o[f+1]));return u},i=function(o){for(var s=new Uint8Array(o.length),u=o.length;u--;)s[u]=o.charCodeAt(u);return o=(s=w1(s)).reduce(function(f,d){return f+String.fromCharCode(d)},"")};e.processDataByFilters=function(o,s){var u=0,f=o||"",d=[];for(typeof(s=s||[])=="string"&&(s=[s]),u=0;u<s.length;u+=1)switch(s[u]){case"ASCII85Decode":case"/ASCII85Decode":f=n(f),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=t(f),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=r(f),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=f.split("").map(function(m){return("0"+m.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=i(f),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[u]+'" is not implemented')}return{data:f,reverseChain:d.reverse().join(" ")}}}(Ar.API),function(e){e.loadFile=function(t,n,r){return function(i,o,s){o=o!==!1,s=typeof s=="function"?s:function(){};var u=void 0;try{u=function(f,d,m){var y=new XMLHttpRequest,w=0,_=function(M){var k=M.length,R=[],N=String.fromCharCode;for(w=0;w<k;w+=1)R.push(N(255&M.charCodeAt(w)));return R.join("")};if(y.open("GET",f,!d),y.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(y.onload=function(){y.status===200?m(_(this.responseText)):m(void 0)}),y.send(null),d&&y.status===200)return _(y.responseText)}(i,o,s)}catch{}return u}(t,n,r)},e.loadImageFile=e.loadFile}(Ar.API),function(e){function t(){return(Br.html2canvas?Promise.resolve(Br.html2canvas):Yf(()=>import("./html2canvas.esm.js"),[])).catch(function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))}).then(function(s){return s.default?s.default:s})}function n(){return(Br.DOMPurify?Promise.resolve(Br.DOMPurify):Yf(()=>import("./purify.es.js"),[])).catch(function(s){return Promise.reject(new Error("Could not load dompurify: "+s))}).then(function(s){return s.default?s.default:s})}var r=function(s){var u=Zi(s);return u==="undefined"?"undefined":u==="string"||s instanceof String?"string":u==="number"||s instanceof Number?"number":u==="function"||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&s.nodeType===1?"element":u==="object"?"object":"unknown"},i=function(s,u){var f=document.createElement(s);for(var d in u.className&&(f.className=u.className),u.innerHTML&&u.dompurify&&(f.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)f.style[d]=u.style[d];return f},o=function s(u){var f=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),d=s.convert(Promise.resolve(),f);return d=(d=d.setProgress(1,s,1,[s])).set(u)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(s,u){return s.__proto__=u||o.prototype,s},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(s,u){return this.then(function(){switch(u=u||function(f){switch(r(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(s)){case"string":return this.then(n).then(function(f){return this.set({src:i("div",{innerHTML:s,dompurify:f})})});case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}})},o.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var s={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=function f(d,m){for(var y=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),w=d.firstChild;w;w=w.nextSibling)m!==!0&&w.nodeType===1&&w.nodeName==="SCRIPT"||y.appendChild(f(w,m));return d.nodeType===1&&(d.nodeName==="CANVAS"?(y.width=d.width,y.height=d.height,y.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(y.value=d.value),y.addEventListener("load",function(){y.scrollTop=d.scrollTop,y.scrollLeft=d.scrollLeft},!0)),y}(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(t).then(function(u){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,u(this.prop.container,f)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(t).then(function(u){var f=this.opt.jsPDF,d=this.opt.fontFaces,m=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,y=Object.assign({async:!0,allowTaint:!0,scale:m,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete y.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=d,d)for(var w=0;w<d.length;++w){var _=d[w],M=_.src.find(function(k){return k.format==="truetype"});M&&f.addFont(M.url,_.ref.name,_.ref.style)}return y.windowHeight=y.windowHeight||0,y.windowHeight=y.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):y.windowHeight,f.context2d.save(!0),u(this.prop.container,y)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(s,u,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(s,u):this.outputPdf(s,u)},o.prototype.outputPdf=function(s,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(s,u)})},o.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}})},o.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(s){if(r(s)!=="object")return this;var u=Object.keys(s||{}).map(function(f){if(f in o.template.prop)return function(){this.prop[f]=s[f]};switch(f){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[f]=s[f]}}},this);return this.then(function(){return this.thenList(u)})},o.prototype.get=function(s,u){return this.then(function(){var f=s in o.template.prop?this.prop[s]:this.opt[s];return u?u(f):f})},o.prototype.setMargin=function(s){return this.then(function(){switch(r(s)){case"number":s=[s,s,s,s];case"array":if(s.length===2&&(s=[s[0],s[1],s[0],s[1]]),s.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=s}).then(this.setPageSize)},o.prototype.setPageSize=function(s){function u(f,d){return Math.floor(f*d/72*96)}return this.then(function(){(s=s||Ar.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:u(s.inner.width,s.k),height:u(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s})},o.prototype.setProgress=function(s,u,f,d){return s!=null&&(this.progress.val=s),u!=null&&(this.progress.state=u),f!=null&&(this.progress.n=f),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(s,u,f,d){return this.setProgress(s?this.progress.val+s:null,u||null,f?this.progress.n+f:null,d?this.progress.stack.concat(d):null)},o.prototype.then=function(s,u){var f=this;return this.thenCore(s,u,function(d,m){return f.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(y){return f.updateProgress(null,d),y}).then(d,m).then(function(y){return f.updateProgress(1),y})})},o.prototype.thenCore=function(s,u,f){f=f||Promise.prototype.then,s&&(s=s.bind(this)),u&&(u=u.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:o.convert(Object.assign({},this),Promise.prototype),m=f.call(d,s,u);return o.convert(m,this.__proto__)},o.prototype.thenExternal=function(s,u){return Promise.prototype.then.call(this,s,u)},o.prototype.thenList=function(s){var u=this;return s.forEach(function(f){u=u.thenCore(f)}),u},o.prototype.catch=function(s){s&&(s=s.bind(this));var u=Promise.prototype.catch.call(this,s);return o.convert(u,this)},o.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},o.prototype.error=function(s){return this.then(function(){throw new Error(s)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Ar.getPageSize=function(s,u,f){if(Zi(s)==="object"){var d=s;s=d.orientation,u=d.unit||u,f=d.format||f}u=u||"mm",f=f||"a4",s=(""+(s||"P")).toLowerCase();var m,y=(""+f).toLowerCase(),w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":m=1;break;case"mm":m=72/25.4;break;case"cm":m=72/2.54;break;case"in":m=72;break;case"px":m=.75;break;case"pc":case"em":m=12;break;case"ex":m=6;break;default:throw"Invalid unit: "+u}var _,M=0,k=0;if(w.hasOwnProperty(y))M=w[y][1]/m,k=w[y][0]/m;else try{M=f[1],k=f[0]}catch{throw new Error("Invalid format: "+f)}if(s==="p"||s==="portrait")s="p",k>M&&(_=k,k=M,M=_);else{if(s!=="l"&&s!=="landscape")throw"Invalid orientation: "+s;s="l",M>k&&(_=k,k=M,M=_)}return{width:k,height:M,unit:u,k:m,orientation:s}},e.html=function(s,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(P1):null;var f=new o(u);return u.worker?f:f.from(s).doCallback()}}(Ar.API),Ar.API.addJS=function(e){return Ob=e,this.internal.events.subscribe("postPutResources",function(){_0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(_0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Nb=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ob+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){_0!==void 0&&Nb!==void 0&&this.internal.out("/Names <</JavaScript "+_0+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),o=0;o<i.length;o++){var s=i[o],u=r.exec(s);if(u!=null){var f=u[1];n.internal.newObjectDeferredBegin(f,!1)}n.internal.write(s)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,m=[];for(o=0;o<d;o++){var y=n.internal.newObject();m.push(y);var w=n.internal.getPageInfo(o+1);n.internal.write("<< /D["+w.objId+" 0 R /XYZ null null null]>> endobj")}var _=n.internal.newObject();for(n.internal.write("<< /Names [ "),o=0;o<m.length;o++)n.internal.write("(page_"+(o+1)+")"+m[o]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+_+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,o){var s={title:i,options:o,children:[]};return r==null&&(r=this.root),r.children.push(s),s},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var s=r.children[o];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var u=this.count=this.count_r({count:0},s);if(u>0&&this.line("/Count "+u),s.options&&s.options.pageNumber){var f=n.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var d=0;d<r.children.length;d++)this.renderItems(r.children[d])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var o=0;o<i.children.length;o++)r.count++,this.count_r(r,i.children[o]);return r.count}}])}(Ar.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,r,i,o,s,u){var f,d=this.decode.DCT_DECODE,m=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=s||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(f=function(y){for(var w,_=256*y.charCodeAt(4)+y.charCodeAt(5),M=y.length,k={width:0,height:0,numcomponents:1},R=4;R<M;R+=2){if(R+=_,t.indexOf(y.charCodeAt(R+1))!==-1){w=256*y.charCodeAt(R+5)+y.charCodeAt(R+6),k={width:256*y.charCodeAt(R+7)+y.charCodeAt(R+8),height:w,numcomponents:y.charCodeAt(R+9)};break}_=256*y.charCodeAt(R+2)+y.charCodeAt(R+3)}return k}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}m={data:n,width:f.width,height:f.height,colorSpace:u,bitsPerComponent:8,filter:d,index:r,alias:i}}return m}}(Ar.API);var kh,b0,Ib,Rb,Fb,NF=function(){var e,t,n;function r(o){var s,u,f,d,m,y,w,_,M,k,R,N,j,J;for(this.data=o,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},y=null;;){switch(s=this.readUInt32(),M=(function(){var te,ae;for(ae=[],te=0;te<4;++te)ae.push(String.fromCharCode(this.data[this.pos++]));return ae}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(s);break;case"fcTL":y&&this.animation.frames.push(y),this.pos+=4,y={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},m=this.readUInt16(),d=this.readUInt16()||100,y.delay=1e3*m/d,y.disposeOp=this.data[this.pos++],y.blendOp=this.data[this.pos++],y.data=[];break;case"IDAT":case"fdAT":for(M==="fdAT"&&(this.pos+=4,s-=4),o=(y!=null?y.data:void 0)||this.imgData,N=0;0<=s?N<s:N>s;0<=s?++N:--N)o.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(f=this.palette.length/3,this.transparency.indexed=this.read(s),this.transparency.indexed.length>f)throw new Error("More transparent colors than palette size");if((k=f-this.transparency.indexed.length)>0)for(j=0;0<=k?j<k:j>k;0<=k?++j:--j)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(s)[0];break;case 2:this.transparency.rgb=this.read(s)}break;case"tEXt":w=(R=this.read(s)).indexOf(0),_=String.fromCharCode.apply(String,R.slice(0,w)),this.text[_]=String.fromCharCode.apply(String,R.slice(w+1));break;case"IEND":return y&&this.animation.frames.push(y),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(J=this.colorType)===4||J===6,u=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*u,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=s}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(o){var s,u;for(u=[],s=0;0<=o?s<o:s>o;0<=o?++s:--s)u.push(this.data[this.pos++]);return u},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(o){var s=this.pixelBitlength/8,u=new Uint8Array(this.width*this.height*s),f=0,d=this;if(o==null&&(o=this.imgData),o.length===0)return new Uint8Array(0);function m(y,w,_,M){var k,R,N,j,J,te,ae,le,xe,G,I,K,$,O,z,V,W,q,X,Y,me,Se=Math.ceil((d.width-y)/_),Re=Math.ceil((d.height-w)/M),T=d.width==Se&&d.height==Re;for(O=s*Se,K=T?u:new Uint8Array(O*Re),te=o.length,$=0,R=0;$<Re&&f<te;){switch(o[f++]){case 0:for(j=W=0;W<O;j=W+=1)K[R++]=o[f++];break;case 1:for(j=q=0;q<O;j=q+=1)k=o[f++],J=j<s?0:K[R-s],K[R++]=(k+J)%256;break;case 2:for(j=X=0;X<O;j=X+=1)k=o[f++],N=(j-j%s)/s,z=$&&K[($-1)*O+N*s+j%s],K[R++]=(z+k)%256;break;case 3:for(j=Y=0;Y<O;j=Y+=1)k=o[f++],N=(j-j%s)/s,J=j<s?0:K[R-s],z=$&&K[($-1)*O+N*s+j%s],K[R++]=(k+Math.floor((J+z)/2))%256;break;case 4:for(j=me=0;me<O;j=me+=1)k=o[f++],N=(j-j%s)/s,J=j<s?0:K[R-s],$===0?z=V=0:(z=K[($-1)*O+N*s+j%s],V=N&&K[($-1)*O+(N-1)*s+j%s]),ae=J+z-V,le=Math.abs(ae-J),G=Math.abs(ae-z),I=Math.abs(ae-V),xe=le<=G&&le<=I?J:G<=I?z:V,K[R++]=(k+xe)%256;break;default:throw new Error("Invalid filter algorithm: "+o[f-1])}if(!T){var ne=((w+$*M)*d.width+y)*s,fe=$*O;for(j=0;j<Se;j+=1){for(var ce=0;ce<s;ce+=1)u[ne++]=K[fe++];ne+=(_-1)*s}}$++}}return o=hF(o),d.interlaceMethod==1?(m(0,0,8,8),m(4,0,8,8),m(0,4,4,8),m(2,0,4,4),m(0,2,2,4),m(1,0,2,2),m(0,1,1,2)):m(0,0,1,1),u},r.prototype.decodePalette=function(){var o,s,u,f,d,m,y,w,_;for(u=this.palette,m=this.transparency.indexed||[],d=new Uint8Array((m.length||0)+u.length),f=0,o=0,s=y=0,w=u.length;y<w;s=y+=3)d[f++]=u[s],d[f++]=u[s+1],d[f++]=u[s+2],d[f++]=(_=m[o++])!=null?_:255;return d},r.prototype.copyToImageData=function(o,s){var u,f,d,m,y,w,_,M,k,R,N;if(f=this.colors,k=null,u=this.hasAlphaChannel,this.palette.length&&(k=(N=this._decodedPalette)!=null?N:this._decodedPalette=this.decodePalette(),f=4,u=!0),M=(d=o.data||o).length,y=k||s,m=w=0,f===1)for(;m<M;)_=k?4*s[m/4]:w,R=y[_++],d[m++]=R,d[m++]=R,d[m++]=R,d[m++]=u?y[_++]:255,w=_;else for(;m<M;)_=k?4*s[m/4]:w,d[m++]=y[_++],d[m++]=y[_++],d[m++]=y[_++],d[m++]=u?y[_++]:255,w=_},r.prototype.decode=function(){var o;return o=new Uint8Array(this.width*this.height*4),this.copyToImageData(o,this.decodePixels()),o};var i=function(){if(Object.prototype.toString.call(Br)==="[object Window]"){try{t=Br.document.createElement("canvas"),n=t.getContext("2d")}catch{return!1}return!0}return!1};return i(),e=function(o){var s;if(i()===!0)return n.width=o.width,n.height=o.height,n.clearRect(0,0,o.width,o.height),n.putImageData(o,0,0),(s=new Image).src=t.toDataURL(),s;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(o){var s,u,f,d,m,y,w,_;if(this.animation){for(_=[],u=m=0,y=(w=this.animation.frames).length;m<y;u=++m)s=w[u],f=o.createImageData(s.width,s.height),d=this.decodePixels(new Uint8Array(s.data)),this.copyToImageData(f,d),s.imageData=f,_.push(s.image=e(f));return _}},r.prototype.renderFrame=function(o,s){var u,f,d;return u=(f=this.animation.frames)[s],d=f[s-1],s===0&&o.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?o.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&o.putImageData(d.imageData,d.xOffset,d.yOffset),u.blendOp===0&&o.clearRect(u.xOffset,u.yOffset,u.width,u.height),o.drawImage(u.image,u.xOffset,u.yOffset)},r.prototype.animate=function(o){var s,u,f,d,m,y,w=this;return u=0,y=this.animation,d=y.numFrames,f=y.frames,m=y.numPlays,(s=function(){var _,M;if(_=u++%d,M=f[_],w.renderFrame(o,_),d>1&&u/d<m)return w.animation._timeout=setTimeout(s,M.delay)})()},r.prototype.stopAnimation=function(){var o;return clearTimeout((o=this.animation)!=null?o._timeout:void 0)},r.prototype.render=function(o){var s,u;return o._png&&o._png.stopAnimation(),o._png=this,o.width=this.width,o.height=this.height,s=o.getContext("2d"),this.animation?(this.decodeFrames(s),this.animate(s)):(u=s.createImageData(this.width,this.height),this.copyToImageData(u,this.decodePixels()),s.putImageData(u,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function OF(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,i=e[t++],o=i>>7,s=1<<(7&i)+1;e[t++],e[t++];var u=null,f=null;o&&(u=t,f=s,t+=3*s);var d=!0,m=[],y=0,w=null,_=0,M=null;for(this.width=n,this.height=r;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,M=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!(($=e[t++])>=0))throw Error("Invalid block size");if($===0)break;t+=$}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var k=e[t++];y=e[t++]|e[t++]<<8,w=e[t++],!(1&k)&&(w=null),_=k>>2&7,t++;break;case 254:for(;;){if(!(($=e[t++])>=0))throw Error("Invalid block size");if($===0)break;t+=$}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var R=e[t++]|e[t++]<<8,N=e[t++]|e[t++]<<8,j=e[t++]|e[t++]<<8,J=e[t++]|e[t++]<<8,te=e[t++],ae=te>>6&1,le=1<<(7&te)+1,xe=u,G=f,I=!1;te>>7&&(I=!0,xe=t,G=le,t+=3*le);var K=t;for(t++;;){var $;if(!(($=e[t++])>=0))throw Error("Invalid block size");if($===0)break;t+=$}m.push({x:R,y:N,width:j,height:J,has_local_palette:I,palette_offset:xe,palette_size:G,data_offset:K,data_length:t-K,transparent_index:w,interlaced:!!ae,delay:y,disposal:_});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return m.length},this.loopCount=function(){return M},this.frameInfo=function(O){if(O<0||O>=m.length)throw new Error("Frame index out of range.");return m[O]},this.decodeAndBlitFrameBGRA=function(O,z){var V=this.frameInfo(O),W=V.width*V.height,q=new Uint8Array(W);jb(e,V.data_offset,q,W);var X=V.palette_offset,Y=V.transparent_index;Y===null&&(Y=256);var me=V.width,Se=n-me,Re=me,T=4*(V.y*n+V.x),ne=4*((V.y+V.height)*n+V.x),fe=T,ce=4*Se;V.interlaced===!0&&(ce+=4*n*7);for(var ye=8,oe=0,B=q.length;oe<B;++oe){var ue=q[oe];if(Re===0&&(Re=me,(fe+=ce)>=ne&&(ce=4*Se+4*n*(ye-1),fe=T+(me+Se)*(ye<<1),ye>>=1)),ue===Y)fe+=4;else{var De=e[X+3*ue],Me=e[X+3*ue+1],We=e[X+3*ue+2];z[fe++]=We,z[fe++]=Me,z[fe++]=De,z[fe++]=255}--Re}},this.decodeAndBlitFrameRGBA=function(O,z){var V=this.frameInfo(O),W=V.width*V.height,q=new Uint8Array(W);jb(e,V.data_offset,q,W);var X=V.palette_offset,Y=V.transparent_index;Y===null&&(Y=256);var me=V.width,Se=n-me,Re=me,T=4*(V.y*n+V.x),ne=4*((V.y+V.height)*n+V.x),fe=T,ce=4*Se;V.interlaced===!0&&(ce+=4*n*7);for(var ye=8,oe=0,B=q.length;oe<B;++oe){var ue=q[oe];if(Re===0&&(Re=me,(fe+=ce)>=ne&&(ce=4*Se+4*n*(ye-1),fe=T+(me+Se)*(ye<<1),ye>>=1)),ue===Y)fe+=4;else{var De=e[X+3*ue],Me=e[X+3*ue+1],We=e[X+3*ue+2];z[fe++]=De,z[fe++]=Me,z[fe++]=We,z[fe++]=255}--Re}}}function jb(e,t,n,r){for(var i=e[t++],o=1<<i,s=o+1,u=s+1,f=i+1,d=(1<<f)-1,m=0,y=0,w=0,_=e[t++],M=new Int32Array(4096),k=null;;){for(;m<16&&_!==0;)y|=e[t++]<<m,m+=8,_===1?_=e[t++]:--_;if(m<f)break;var R=y&d;if(y>>=f,m-=f,R!==o){if(R===s)break;for(var N=R<u?R:k,j=0,J=N;J>o;)J=M[J]>>8,++j;var te=J;if(w+j+(N!==R?1:0)>r)return void is.log("Warning, gif stream longer than expected.");n[w++]=te;var ae=w+=j;for(N!==R&&(n[w++]=te),J=N;j--;)J=M[J],n[--ae]=255&J,J>>=8;k!==null&&u<4096&&(M[u++]=k<<8|te,u>=d+1&&f<12&&(++f,d=d<<1|1)),k=R}else u=s+1,d=(1<<(f=i+1))-1,k=null}return w!==r&&is.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function gv(e){var t,n,r,i,o,s=Math.floor,u=new Array(64),f=new Array(64),d=new Array(64),m=new Array(64),y=new Array(65535),w=new Array(65535),_=new Array(64),M=new Array(64),k=[],R=0,N=7,j=new Array(64),J=new Array(64),te=new Array(64),ae=new Array(256),le=new Array(2048),xe=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],G=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],K=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],$=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],z=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],W=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function q(T,ne){for(var fe=0,ce=0,ye=new Array,oe=1;oe<=16;oe++){for(var B=1;B<=T[oe];B++)ye[ne[ce]]=[],ye[ne[ce]][0]=fe,ye[ne[ce]][1]=oe,ce++,fe++;fe*=2}return ye}function X(T){for(var ne=T[0],fe=T[1]-1;fe>=0;)ne&1<<fe&&(R|=1<<N),fe--,--N<0&&(R==255?(Y(255),Y(0)):Y(R),N=7,R=0)}function Y(T){k.push(T)}function me(T){Y(T>>8&255),Y(255&T)}function Se(T,ne,fe,ce,ye){for(var oe,B=ye[0],ue=ye[240],De=function(Ke,He){var Xe,st,kt,Ct,Ut,Gt,fn,pn,et,it,nt=0;for(et=0;et<8;++et){Xe=Ke[nt],st=Ke[nt+1],kt=Ke[nt+2],Ct=Ke[nt+3],Ut=Ke[nt+4],Gt=Ke[nt+5],fn=Ke[nt+6];var Vt=Xe+(pn=Ke[nt+7]),Qt=Xe-pn,Nn=st+fn,wn=st-fn,An=kt+Gt,or=kt-Gt,xn=Ct+Ut,En=Ct-Ut,Cn=Vt+xn,cr=Vt-xn,yr=Nn+An,mt=Nn-An;Ke[nt]=Cn+yr,Ke[nt+4]=Cn-yr;var qe=.707106781*(mt+cr);Ke[nt+2]=cr+qe,Ke[nt+6]=cr-qe;var Ft=.382683433*((Cn=En+or)-(mt=wn+Qt)),kn=.5411961*Cn+Ft,ar=1.306562965*mt+Ft,Wn=.707106781*(yr=or+wn),Xt=Qt+Wn,vn=Qt-Wn;Ke[nt+5]=vn+kn,Ke[nt+3]=vn-kn,Ke[nt+1]=Xt+ar,Ke[nt+7]=Xt-ar,nt+=8}for(nt=0,et=0;et<8;++et){Xe=Ke[nt],st=Ke[nt+8],kt=Ke[nt+16],Ct=Ke[nt+24],Ut=Ke[nt+32],Gt=Ke[nt+40],fn=Ke[nt+48];var It=Xe+(pn=Ke[nt+56]),Yt=Xe-pn,Ln=st+fn,mr=st-fn,ct=kt+Gt,On=kt-Gt,xr=Ct+Ut,Ti=Ct-Ut,Ir=It+xr,Er=It-xr,lr=Ln+ct,Vr=Ln-ct;Ke[nt]=Ir+lr,Ke[nt+32]=Ir-lr;var rr=.707106781*(Vr+Er);Ke[nt+16]=Er+rr,Ke[nt+48]=Er-rr;var Or=.382683433*((Ir=Ti+On)-(Vr=mr+Yt)),er=.5411961*Ir+Or,en=1.306562965*Vr+Or,qi=.707106781*(lr=On+mr),Di=Yt+qi,Si=Yt-qi;Ke[nt+40]=Si+er,Ke[nt+24]=Si-er,Ke[nt+8]=Di+en,Ke[nt+56]=Di-en,nt++}for(et=0;et<64;++et)it=Ke[et]*He[et],_[et]=it>0?it+.5|0:it-.5|0;return _}(T,ne),Me=0;Me<64;++Me)M[xe[Me]]=De[Me];var We=M[0]-fe;fe=M[0],We==0?X(ce[0]):(X(ce[w[oe=32767+We]]),X(y[oe]));for(var Z=63;Z>0&&M[Z]==0;)Z--;if(Z==0)return X(B),fe;for(var de,ve=1;ve<=Z;){for(var pe=ve;M[ve]==0&&ve<=Z;)++ve;var $e=ve-pe;if($e>=16){de=$e>>4;for(var Qe=1;Qe<=de;++Qe)X(ue);$e&=15}oe=32767+M[ve],X(ye[($e<<4)+w[oe]]),X(y[oe]),ve++}return Z!=63&&X(B),fe}function Re(T){T=Math.min(Math.max(T,1),100),o!=T&&(function(ne){for(var fe=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ce=0;ce<64;ce++){var ye=s((fe[ce]*ne+50)/100);ye=Math.min(Math.max(ye,1),255),u[xe[ce]]=ye}for(var oe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],B=0;B<64;B++){var ue=s((oe[B]*ne+50)/100);ue=Math.min(Math.max(ue,1),255),f[xe[B]]=ue}for(var De=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Me=0,We=0;We<8;We++)for(var Z=0;Z<8;Z++)d[Me]=1/(u[xe[Me]]*De[We]*De[Z]*8),m[Me]=1/(f[xe[Me]]*De[We]*De[Z]*8),Me++}(T<50?Math.floor(5e3/T):Math.floor(200-2*T)),o=T)}this.encode=function(T,ne){ne&&Re(ne),k=new Array,R=0,N=7,me(65496),me(65504),me(16),Y(74),Y(70),Y(73),Y(70),Y(0),Y(1),Y(1),Y(0),me(1),me(1),Y(0),Y(0),function(){me(65499),me(132),Y(0);for(var st=0;st<64;st++)Y(u[st]);Y(1);for(var kt=0;kt<64;kt++)Y(f[kt])}(),function(st,kt){me(65472),me(17),Y(8),me(kt),me(st),Y(3),Y(1),Y(17),Y(0),Y(2),Y(17),Y(1),Y(3),Y(17),Y(1)}(T.width,T.height),function(){me(65476),me(418),Y(0);for(var st=0;st<16;st++)Y(G[st+1]);for(var kt=0;kt<=11;kt++)Y(I[kt]);Y(16);for(var Ct=0;Ct<16;Ct++)Y(K[Ct+1]);for(var Ut=0;Ut<=161;Ut++)Y($[Ut]);Y(1);for(var Gt=0;Gt<16;Gt++)Y(O[Gt+1]);for(var fn=0;fn<=11;fn++)Y(z[fn]);Y(17);for(var pn=0;pn<16;pn++)Y(V[pn+1]);for(var et=0;et<=161;et++)Y(W[et])}(),me(65498),me(12),Y(3),Y(1),Y(0),Y(2),Y(17),Y(3),Y(17),Y(0),Y(63),Y(0);var fe=0,ce=0,ye=0;R=0,N=7,this.encode.displayName="_encode_";for(var oe,B,ue,De,Me,We,Z,de,ve,pe=T.data,$e=T.width,Qe=T.height,Ke=4*$e,He=0;He<Qe;){for(oe=0;oe<Ke;){for(Me=Ke*He+oe,Z=-1,de=0,ve=0;ve<64;ve++)We=Me+(de=ve>>3)*Ke+(Z=4*(7&ve)),He+de>=Qe&&(We-=Ke*(He+1+de-Qe)),oe+Z>=Ke&&(We-=oe+Z-Ke+4),B=pe[We++],ue=pe[We++],De=pe[We++],j[ve]=(le[B]+le[ue+256>>0]+le[De+512>>0]>>16)-128,J[ve]=(le[B+768>>0]+le[ue+1024>>0]+le[De+1280>>0]>>16)-128,te[ve]=(le[B+1280>>0]+le[ue+1536>>0]+le[De+1792>>0]>>16)-128;fe=Se(j,d,fe,t,r),ce=Se(J,m,ce,n,i),ye=Se(te,m,ye,n,i),oe+=32}He+=8}if(N>=0){var Xe=[];Xe[1]=N+1,Xe[0]=(1<<N+1)-1,X(Xe)}return me(65497),new Uint8Array(k)},e=e||50,function(){for(var T=String.fromCharCode,ne=0;ne<256;ne++)ae[ne]=T(ne)}(),t=q(G,I),n=q(O,z),r=q(K,$),i=q(V,W),function(){for(var T=1,ne=2,fe=1;fe<=15;fe++){for(var ce=T;ce<ne;ce++)w[32767+ce]=fe,y[32767+ce]=[],y[32767+ce][1]=fe,y[32767+ce][0]=ce;for(var ye=-(ne-1);ye<=-T;ye++)w[32767+ye]=fe,y[32767+ye]=[],y[32767+ye][1]=fe,y[32767+ye][0]=ne-1+ye;T<<=1,ne<<=1}}(),function(){for(var T=0;T<256;T++)le[T]=19595*T,le[T+256>>0]=38470*T,le[T+512>>0]=7471*T+32768,le[T+768>>0]=-11059*T,le[T+1024>>0]=-21709*T,le[T+1280>>0]=32768*T+8421375,le[T+1536>>0]=-27439*T,le[T+1792>>0]=-5329*T}(),Re(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Bu(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function zb(e){function t(G){if(!G)throw Error("assert :P")}function n(G,I,K){for(var $=0;4>$;$++)if(G[I+$]!=K.charCodeAt($))return!0;return!1}function r(G,I,K,$,O){for(var z=0;z<O;z++)G[I+z]=K[$+z]}function i(G,I,K,$){for(var O=0;O<$;O++)G[I+O]=K}function o(G){return new Int32Array(G)}function s(G,I){for(var K=[],$=0;$<G;$++)K.push(new I);return K}function u(G,I){var K=[];return function $(O,z,V){for(var W=V[z],q=0;q<W&&(O.push(V.length>z+1?[]:new I),!(V.length<z+1));q++)$(O[q],z+1,V)}(K,0,G),K}var f=function(){var G=this;function I(b,P){for(var H=1<<P-1>>>0;b&H;)H>>>=1;return H?(b&H-1)+H:b}function K(b,P,H,se,be){t(!(se%H));do b[P+(se-=H)]=be;while(0<se)}function $(b,P,H,se,be){if(t(2328>=be),512>=be)var Ee=o(512);else if((Ee=o(be))==null)return 0;return function(Ae,ke,Be,Ve,ht,Dt){var Bt,wt,Zt=ke,$t=1<<Be,dt=o(16),yt=o(16);for(t(ht!=0),t(Ve!=null),t(Ae!=null),t(0<Be),wt=0;wt<ht;++wt){if(15<Ve[wt])return 0;++dt[Ve[wt]]}if(dt[0]==ht)return 0;for(yt[1]=0,Bt=1;15>Bt;++Bt){if(dt[Bt]>1<<Bt)return 0;yt[Bt+1]=yt[Bt]+dt[Bt]}for(wt=0;wt<ht;++wt)Bt=Ve[wt],0<Ve[wt]&&(Dt[yt[Bt]++]=wt);if(yt[15]==1)return(Ve=new O).g=0,Ve.value=Dt[0],K(Ae,Zt,1,$t,Ve),$t;var tn,hn=-1,rn=$t-1,Mn=0,Sn=1,Jn=1,l=1<<Be;for(wt=0,Bt=1,ht=2;Bt<=Be;++Bt,ht<<=1){if(Sn+=Jn<<=1,0>(Jn-=dt[Bt]))return 0;for(;0<dt[Bt];--dt[Bt])(Ve=new O).g=Bt,Ve.value=Dt[wt++],K(Ae,Zt+Mn,ht,l,Ve),Mn=I(Mn,Bt)}for(Bt=Be+1,ht=2;15>=Bt;++Bt,ht<<=1){if(Sn+=Jn<<=1,0>(Jn-=dt[Bt]))return 0;for(;0<dt[Bt];--dt[Bt]){if(Ve=new O,(Mn&rn)!=hn){for(Zt+=l,tn=1<<(hn=Bt)-Be;15>hn&&!(0>=(tn-=dt[hn]));)++hn,tn<<=1;$t+=l=1<<(tn=hn-Be),Ae[ke+(hn=Mn&rn)].g=tn+Be,Ae[ke+hn].value=Zt-ke-hn}Ve.g=Bt-Be,Ve.value=Dt[wt++],K(Ae,Zt+(Mn>>Be),ht,l,Ve),Mn=I(Mn,Bt)}}return Sn!=2*yt[15]-1?0:$t}(b,P,H,se,be,Ee)}function O(){this.value=this.g=0}function z(){this.value=this.g=0}function V(){this.G=s(5,O),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(us,z)}function W(b,P,H,se){t(b!=null),t(P!=null),t(2147483648>se),b.Ca=254,b.I=0,b.b=-8,b.Ka=0,b.oa=P,b.pa=H,b.Jd=P,b.Yc=H+se,b.Zc=4<=se?H+se-4+1:H,oe(b)}function q(b,P){for(var H=0;0<P--;)H|=ue(b,128)<<P;return H}function X(b,P){var H=q(b,P);return B(b)?-H:H}function Y(b,P,H,se){var be,Ee=0;for(t(b!=null),t(P!=null),t(4294967288>se),b.Sb=se,b.Ra=0,b.u=0,b.h=0,4<se&&(se=4),be=0;be<se;++be)Ee+=P[H+be]<<8*be;b.Ra=Ee,b.bb=se,b.oa=P,b.pa=H}function me(b){for(;8<=b.u&&b.bb<b.Sb;)b.Ra>>>=8,b.Ra+=b.oa[b.pa+b.bb]<<lo-8>>>0,++b.bb,b.u-=8;fe(b)&&(b.h=1,b.u=0)}function Se(b,P){if(t(0<=P),!b.h&&P<=So){var H=ne(b)&ta[P];return b.u+=P,me(b),H}return b.h=1,b.u=0}function Re(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function T(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ne(b){return b.Ra>>>(b.u&lo-1)>>>0}function fe(b){return t(b.bb<=b.Sb),b.h||b.bb==b.Sb&&b.u>lo}function ce(b,P){b.u=P,b.h=fe(b)}function ye(b){b.u>=fl&&(t(b.u>=fl),me(b))}function oe(b){t(b!=null&&b.oa!=null),b.pa<b.Zc?(b.I=(b.oa[b.pa++]|b.I<<8)>>>0,b.b+=8):(t(b!=null&&b.oa!=null),b.pa<b.Yc?(b.b+=8,b.I=b.oa[b.pa++]|b.I<<8):b.Ka?b.b=0:(b.I<<=8,b.b+=8,b.Ka=1))}function B(b){return q(b,1)}function ue(b,P){var H=b.Ca;0>b.b&&oe(b);var se=b.b,be=H*P>>>8,Ee=(b.I>>>se>be)+0;for(Ee?(H-=be,b.I-=be+1<<se>>>0):H=be+1,se=H,be=0;256<=se;)be+=8,se>>=8;return se=7^be+Rs[se],b.b-=se,b.Ca=(H<<se)-1,Ee}function De(b,P,H){b[P+0]=H>>24&255,b[P+1]=H>>16&255,b[P+2]=H>>8&255,b[P+3]=H>>0&255}function Me(b,P){return b[P+0]<<0|b[P+1]<<8}function We(b,P){return Me(b,P)|b[P+2]<<16}function Z(b,P){return Me(b,P)|Me(b,P+2)<<16}function de(b,P){var H=1<<P;return t(b!=null),t(0<P),b.X=o(H),b.X==null?0:(b.Mb=32-P,b.Xa=P,1)}function ve(b,P){t(b!=null),t(P!=null),t(b.Xa==P.Xa),r(P.X,0,b.X,0,1<<P.Xa)}function pe(){this.X=[],this.Xa=this.Mb=0}function $e(b,P,H,se){t(H!=null),t(se!=null);var be=H[0],Ee=se[0];return be==0&&(be=(b*Ee+P/2)/P),Ee==0&&(Ee=(P*be+b/2)/b),0>=be||0>=Ee?0:(H[0]=be,se[0]=Ee,1)}function Qe(b,P){return b+(1<<P)-1>>>P}function Ke(b,P){return((4278255360&b)+(4278255360&P)>>>0&4278255360)+((16711935&b)+(16711935&P)>>>0&16711935)>>>0}function He(b,P){G[P]=function(H,se,be,Ee,Ae,ke,Be){var Ve;for(Ve=0;Ve<Ae;++Ve){var ht=G[b](ke[Be+Ve-1],be,Ee+Ve);ke[Be+Ve]=Ke(H[se+Ve],ht)}}}function Xe(){this.ud=this.hd=this.jd=0}function st(b,P){return((4278124286&(b^P))>>>1)+(b&P)>>>0}function kt(b){return 0<=b&&256>b?b:0>b?0:255<b?255:void 0}function Ct(b,P){return kt(b+(b-P+.5>>1))}function Ut(b,P,H){return Math.abs(P-H)-Math.abs(b-H)}function Gt(b,P,H,se,be,Ee,Ae){for(se=Ee[Ae-1],H=0;H<be;++H)Ee[Ae+H]=se=Ke(b[P+H],se)}function fn(b,P,H,se,be){var Ee;for(Ee=0;Ee<H;++Ee){var Ae=b[P+Ee],ke=Ae>>8&255,Be=16711935&(Be=(Be=16711935&Ae)+((ke<<16)+ke));se[be+Ee]=(4278255360&Ae)+Be>>>0}}function pn(b,P){P.jd=b>>0&255,P.hd=b>>8&255,P.ud=b>>16&255}function et(b,P,H,se,be,Ee){var Ae;for(Ae=0;Ae<se;++Ae){var ke=P[H+Ae],Be=ke>>>8,Ve=ke,ht=255&(ht=(ht=ke>>>16)+((b.jd<<24>>24)*(Be<<24>>24)>>>5));Ve=255&(Ve=(Ve=Ve+((b.hd<<24>>24)*(Be<<24>>24)>>>5))+((b.ud<<24>>24)*(ht<<24>>24)>>>5)),be[Ee+Ae]=(4278255360&ke)+(ht<<16)+Ve}}function it(b,P,H,se,be){G[P]=function(Ee,Ae,ke,Be,Ve,ht,Dt,Bt,wt){for(Be=Dt;Be<Bt;++Be)for(Dt=0;Dt<wt;++Dt)Ve[ht++]=be(ke[se(Ee[Ae++])])},G[b]=function(Ee,Ae,ke,Be,Ve,ht,Dt){var Bt=8>>Ee.b,wt=Ee.Ea,Zt=Ee.K[0],$t=Ee.w;if(8>Bt)for(Ee=(1<<Ee.b)-1,$t=(1<<Bt)-1;Ae<ke;++Ae){var dt,yt=0;for(dt=0;dt<wt;++dt)dt&Ee||(yt=se(Be[Ve++])),ht[Dt++]=be(Zt[yt&$t]),yt>>=Bt}else G["VP8LMapColor"+H](Be,Ve,Zt,$t,ht,Dt,Ae,ke,wt)}}function nt(b,P,H,se,be){for(H=P+H;P<H;){var Ee=b[P++];se[be++]=Ee>>16&255,se[be++]=Ee>>8&255,se[be++]=Ee>>0&255}}function Vt(b,P,H,se,be){for(H=P+H;P<H;){var Ee=b[P++];se[be++]=Ee>>16&255,se[be++]=Ee>>8&255,se[be++]=Ee>>0&255,se[be++]=Ee>>24&255}}function Qt(b,P,H,se,be){for(H=P+H;P<H;){var Ee=(Ae=b[P++])>>16&240|Ae>>12&15,Ae=Ae>>0&240|Ae>>28&15;se[be++]=Ee,se[be++]=Ae}}function Nn(b,P,H,se,be){for(H=P+H;P<H;){var Ee=(Ae=b[P++])>>16&248|Ae>>13&7,Ae=Ae>>5&224|Ae>>3&31;se[be++]=Ee,se[be++]=Ae}}function wn(b,P,H,se,be){for(H=P+H;P<H;){var Ee=b[P++];se[be++]=Ee>>0&255,se[be++]=Ee>>8&255,se[be++]=Ee>>16&255}}function An(b,P,H,se,be,Ee){if(Ee==0)for(H=P+H;P<H;)De(se,((Ee=b[P++])[0]>>24|Ee[1]>>8&65280|Ee[2]<<8&16711680|Ee[3]<<24)>>>0),be+=32;else r(se,be,b,P,H)}function or(b,P){G[P][0]=G[b+"0"],G[P][1]=G[b+"1"],G[P][2]=G[b+"2"],G[P][3]=G[b+"3"],G[P][4]=G[b+"4"],G[P][5]=G[b+"5"],G[P][6]=G[b+"6"],G[P][7]=G[b+"7"],G[P][8]=G[b+"8"],G[P][9]=G[b+"9"],G[P][10]=G[b+"10"],G[P][11]=G[b+"11"],G[P][12]=G[b+"12"],G[P][13]=G[b+"13"],G[P][14]=G[b+"0"],G[P][15]=G[b+"0"]}function xn(b){return b==Es||b==Ps||b==qo||b==a}function En(){this.eb=[],this.size=this.A=this.fb=0}function Cn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function cr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new En,this.f.kb=new Cn,this.sd=null}function yr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function mt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function qe(b){return alert("todo:WebPSamplerProcessPlane"),b.T}function Ft(b,P){var H=b.T,se=P.ba.f.RGBA,be=se.eb,Ee=se.fb+b.ka*se.A,Ae=Vs[P.ba.S],ke=b.y,Be=b.O,Ve=b.f,ht=b.N,Dt=b.ea,Bt=b.W,wt=P.cc,Zt=P.dc,$t=P.Mc,dt=P.Nc,yt=b.ka,tn=b.ka+b.T,hn=b.U,rn=hn+1>>1;for(yt==0?Ae(ke,Be,null,null,Ve,ht,Dt,Bt,Ve,ht,Dt,Bt,be,Ee,null,null,hn):(Ae(P.ec,P.fc,ke,Be,wt,Zt,$t,dt,Ve,ht,Dt,Bt,be,Ee-se.A,be,Ee,hn),++H);yt+2<tn;yt+=2)wt=Ve,Zt=ht,$t=Dt,dt=Bt,ht+=b.Rc,Bt+=b.Rc,Ee+=2*se.A,Ae(ke,(Be+=2*b.fa)-b.fa,ke,Be,wt,Zt,$t,dt,Ve,ht,Dt,Bt,be,Ee-se.A,be,Ee,hn);return Be+=b.fa,b.j+tn<b.o?(r(P.ec,P.fc,ke,Be,hn),r(P.cc,P.dc,Ve,ht,rn),r(P.Mc,P.Nc,Dt,Bt,rn),H--):1&tn||Ae(ke,Be,null,null,Ve,ht,Dt,Bt,Ve,ht,Dt,Bt,be,Ee+se.A,null,null,hn),H}function kn(b,P,H){var se=b.F,be=[b.J];if(se!=null){var Ee=b.U,Ae=P.ba.S,ke=Ae==Go||Ae==qo;P=P.ba.f.RGBA;var Be=[0],Ve=b.ka;Be[0]=b.T,b.Kb&&(Ve==0?--Be[0]:(--Ve,be[0]-=b.width),b.j+b.ka+b.T==b.o&&(Be[0]=b.o-b.j-Ve));var ht=P.eb;Ve=P.fb+Ve*P.A,b=Ei(se,be[0],b.width,Ee,Be,ht,Ve+(ke?0:3),P.A),t(H==Be),b&&xn(Ae)&&Cs(ht,Ve,ke,Ee,Be,P.A)}return 0}function ar(b){var P=b.ma,H=P.ba.S,se=11>H,be=H==dr||H==Ca||H==Go||H==eo||H==12||xn(H);if(P.memory=null,P.Ib=null,P.Jb=null,P.Nd=null,!wu(P.Oa,b,be?11:12))return 0;if(be&&xn(H)&&cn(),b.da)alert("todo:use_scaling");else{if(se){if(P.Ib=qe,b.Kb){if(H=b.U+1>>1,P.memory=o(b.U+2*H),P.memory==null)return 0;P.ec=P.memory,P.fc=0,P.cc=P.ec,P.dc=P.fc+b.U,P.Mc=P.cc,P.Nc=P.dc+H,P.Ib=Ft,cn()}}else alert("todo:EmitYUV");be&&(P.Jb=kn,se&&xt())}if(se&&!Ju){for(b=0;256>b;++b)Kc[b]=89858*(b-128)+Ga>>Zc,Yc[b]=-22014*(b-128)+Ga,gd[b]=-45773*(b-128),Rl[b]=113618*(b-128)+Ga>>Zc;for(b=xc;b<kf;++b)P=76283*(b-16)+Ga>>Zc,Jc[b-xc]=$r(P,255),ch[b-xc]=$r(P+8>>4,15);Ju=1}return 1}function Wn(b){var P=b.ma,H=b.U,se=b.T;return t(!(1&b.ka)),0>=H||0>=se?0:(H=P.Ib(b,P),P.Jb!=null&&P.Jb(b,P,H),P.Dc+=H,1)}function Xt(b){b.ma.memory=null}function vn(b,P,H,se){return Se(b,8)!=47?0:(P[0]=Se(b,14)+1,H[0]=Se(b,14)+1,se[0]=Se(b,1),Se(b,3)!=0?0:!b.h)}function It(b,P){if(4>b)return b+1;var H=b-2>>1;return(2+(1&b)<<H)+Se(P,H)+1}function Yt(b,P){return 120<P?P-120:1<=(H=((H=ot[P-1])>>4)*b+(8-(15&H)))?H:1;var H}function Ln(b,P,H){var se=ne(H),be=b[P+=255&se].g-8;return 0<be&&(ce(H,H.u+8),se=ne(H),P+=b[P].value,P+=se&(1<<be)-1),ce(H,H.u+b[P].g),b[P].value}function mr(b,P,H){return H.g+=b.g,H.value+=b.value<<P>>>0,t(8>=H.g),b.g}function ct(b,P,H){var se=b.xc;return t((P=se==0?0:b.vc[b.md*(H>>se)+(P>>se)])<b.Wb),b.Ya[P]}function On(b,P,H,se){var be=b.ab,Ee=b.c*P,Ae=b.C;P=Ae+P;var ke=H,Be=se;for(se=b.Ta,H=b.Ua;0<be--;){var Ve=b.gc[be],ht=Ae,Dt=P,Bt=ke,wt=Be,Zt=(Be=se,ke=H,Ve.Ea);switch(t(ht<Dt),t(Dt<=Ve.nc),Ve.hc){case 2:Yu(Bt,wt,(Dt-ht)*Zt,Be,ke);break;case 0:var $t=ht,dt=Dt,yt=Be,tn=ke,hn=(l=Ve).Ea;$t==0&&(Js(Bt,wt,null,null,1,yt,tn),Gt(Bt,wt+1,0,0,hn-1,yt,tn+1),wt+=hn,tn+=hn,++$t);for(var rn=1<<l.b,Mn=rn-1,Sn=Qe(hn,l.b),Jn=l.K,l=l.w+($t>>l.b)*Sn;$t<dt;){var h=Jn,v=l,x=1;for(Xs(Bt,wt,yt,tn-hn,1,yt,tn);x<hn;){var C=(x&~Mn)+rn;C>hn&&(C=hn),(0,wa[h[v++]>>8&15])(Bt,wt+ +x,yt,tn+x-hn,C-x,yt,tn+x),x=C}wt+=hn,tn+=hn,++$t&Mn||(l+=Sn)}Dt!=Ve.nc&&r(Be,ke-Zt,Be,ke+(Dt-ht-1)*Zt,Zt);break;case 1:for(Zt=Bt,dt=wt,hn=(Bt=Ve.Ea)-(tn=Bt&~(yt=(wt=1<<Ve.b)-1)),$t=Qe(Bt,Ve.b),rn=Ve.K,Ve=Ve.w+(ht>>Ve.b)*$t;ht<Dt;){for(Mn=rn,Sn=Ve,Jn=new Xe,l=dt+tn,h=dt+Bt;dt<l;)pn(Mn[Sn++],Jn),xa(Jn,Zt,dt,wt,Be,ke),dt+=wt,ke+=wt;dt<h&&(pn(Mn[Sn++],Jn),xa(Jn,Zt,dt,hn,Be,ke),dt+=hn,ke+=hn),++ht&yt||(Ve+=$t)}break;case 3:if(Bt==Be&&wt==ke&&0<Ve.b){for(dt=Be,Bt=Zt=ke+(Dt-ht)*Zt-(tn=(Dt-ht)*Qe(Ve.Ea,Ve.b)),wt=Be,yt=ke,$t=[],tn=(hn=tn)-1;0<=tn;--tn)$t[tn]=wt[yt+tn];for(tn=hn-1;0<=tn;--tn)dt[Bt+tn]=$t[tn];_s(Ve,ht,Dt,Be,Zt,Be,ke)}else _s(Ve,ht,Dt,Bt,wt,Be,ke)}ke=se,Be=H}Be!=H&&r(se,H,ke,Be,Ee)}function xr(b,P){var H=b.V,se=b.Ba+b.c*b.C,be=P-b.C;if(t(P<=b.l.o),t(16>=be),0<be){var Ee=b.l,Ae=b.Ta,ke=b.Ua,Be=Ee.width;if(On(b,be,H,se),be=ke=[ke],t((H=b.C)<(se=P)),t(Ee.v<Ee.va),se>Ee.o&&(se=Ee.o),H<Ee.j){var Ve=Ee.j-H;H=Ee.j,be[0]+=Ve*Be}if(H>=se?H=0:(be[0]+=4*Ee.v,Ee.ka=H-Ee.j,Ee.U=Ee.va-Ee.v,Ee.T=se-H,H=1),H){if(ke=ke[0],11>(H=b.ca).S){var ht=H.f.RGBA,Dt=(se=H.S,be=Ee.U,Ee=Ee.T,Ve=ht.eb,ht.A),Bt=Ee;for(ht=ht.fb+b.Ma*ht.A;0<Bt--;){var wt=Ae,Zt=ke,$t=be,dt=Ve,yt=ht;switch(se){case co:zs(wt,Zt,$t,dt,yt);break;case dr:Ss(wt,Zt,$t,dt,yt);break;case Es:Ss(wt,Zt,$t,dt,yt),Cs(dt,yt,0,$t,1,0);break;case Sa:$s(wt,Zt,$t,dt,yt);break;case Ca:An(wt,Zt,$t,dt,yt,1);break;case Ps:An(wt,Zt,$t,dt,yt,1),Cs(dt,yt,0,$t,1,0);break;case Go:An(wt,Zt,$t,dt,yt,0);break;case qo:An(wt,Zt,$t,dt,yt,0),Cs(dt,yt,1,$t,1,0);break;case eo:na(wt,Zt,$t,dt,yt);break;case a:na(wt,Zt,$t,dt,yt),wi(dt,yt,$t,1,0);break;case bc:Co(wt,Zt,$t,dt,yt);break;default:t(0)}ke+=Be,ht+=Dt}b.Ma+=Ee}else alert("todo:EmitRescaledRowsYUVA");t(b.Ma<=H.height)}}b.C=P,t(b.C<=b.i)}function Ti(b){var P;if(0<b.ua)return 0;for(P=0;P<b.Wb;++P){var H=b.Ya[P].G,se=b.Ya[P].H;if(0<H[1][se[1]+0].g||0<H[2][se[2]+0].g||0<H[3][se[3]+0].g)return 0}return 1}function Ir(b,P,H,se,be,Ee){if(b.Z!=0){var Ae=b.qd,ke=b.rd;for(t(pi[b.Z]!=null);P<H;++P)pi[b.Z](Ae,ke,se,be,se,be,Ee),Ae=se,ke=be,be+=Ee;b.qd=Ae,b.rd=ke}}function Er(b,P){var H=b.l.ma,se=H.Z==0||H.Z==1?b.l.j:b.C;if(se=b.C<se?se:b.C,t(P<=b.l.o),P>se){var be=b.l.width,Ee=H.ca,Ae=H.tb+be*se,ke=b.V,Be=b.Ba+b.c*se,Ve=b.gc;t(b.ab==1),t(Ve[0].hc==3),Fs(Ve[0],se,P,ke,Be,Ee,Ae),Ir(H,se,P,Ee,Ae,be)}b.C=b.Ma=P}function lr(b,P,H,se,be,Ee,Ae){var ke=b.$/se,Be=b.$%se,Ve=b.m,ht=b.s,Dt=H+b.$,Bt=Dt;be=H+se*be;var wt=H+se*Ee,Zt=280+ht.ua,$t=b.Pb?ke:16777216,dt=0<ht.ua?ht.Wa:null,yt=ht.wc,tn=Dt<wt?ct(ht,Be,ke):null;t(b.C<Ee),t(wt<=be);var hn=!1;e:for(;;){for(;hn||Dt<wt;){var rn=0;if(ke>=$t){var Mn=Dt-H;t(($t=b).Pb),$t.wd=$t.m,$t.xd=Mn,0<$t.s.ua&&ve($t.s.Wa,$t.s.vb),$t=ke+zt}if(Be&yt||(tn=ct(ht,Be,ke)),t(tn!=null),tn.Qb&&(P[Dt]=tn.qb,hn=!0),!hn)if(ye(Ve),tn.jc){rn=Ve,Mn=P;var Sn=Dt,Jn=tn.pd[ne(rn)&us-1];t(tn.jc),256>Jn.g?(ce(rn,rn.u+Jn.g),Mn[Sn]=Jn.value,rn=0):(ce(rn,rn.u+Jn.g-256),t(256<=Jn.value),rn=Jn.value),rn==0&&(hn=!0)}else rn=Ln(tn.G[0],tn.H[0],Ve);if(Ve.h)break;if(hn||256>rn){if(!hn)if(tn.nd)P[Dt]=(tn.qb|rn<<8)>>>0;else{if(ye(Ve),hn=Ln(tn.G[1],tn.H[1],Ve),ye(Ve),Mn=Ln(tn.G[2],tn.H[2],Ve),Sn=Ln(tn.G[3],tn.H[3],Ve),Ve.h)break;P[Dt]=(Sn<<24|hn<<16|rn<<8|Mn)>>>0}if(hn=!1,++Dt,++Be>=se&&(Be=0,++ke,Ae!=null&&ke<=Ee&&!(ke%16)&&Ae(b,ke),dt!=null))for(;Bt<Dt;)rn=P[Bt++],dt.X[(506832829*rn&4294967295)>>>dt.Mb]=rn}else if(280>rn){if(rn=It(rn-256,Ve),Mn=Ln(tn.G[4],tn.H[4],Ve),ye(Ve),Mn=Yt(se,Mn=It(Mn,Ve)),Ve.h)break;if(Dt-H<Mn||be-Dt<rn)break e;for(Sn=0;Sn<rn;++Sn)P[Dt+Sn]=P[Dt+Sn-Mn];for(Dt+=rn,Be+=rn;Be>=se;)Be-=se,++ke,Ae!=null&&ke<=Ee&&!(ke%16)&&Ae(b,ke);if(t(Dt<=be),Be&yt&&(tn=ct(ht,Be,ke)),dt!=null)for(;Bt<Dt;)rn=P[Bt++],dt.X[(506832829*rn&4294967295)>>>dt.Mb]=rn}else{if(!(rn<Zt))break e;for(hn=rn-280,t(dt!=null);Bt<Dt;)rn=P[Bt++],dt.X[(506832829*rn&4294967295)>>>dt.Mb]=rn;rn=Dt,t(!(hn>>>(Mn=dt).Xa)),P[rn]=Mn.X[hn],hn=!0}hn||t(Ve.h==fe(Ve))}if(b.Pb&&Ve.h&&Dt<be)t(b.m.h),b.a=5,b.m=b.wd,b.$=b.xd,0<b.s.ua&&ve(b.s.vb,b.s.Wa);else{if(Ve.h)break e;Ae!=null&&Ae(b,ke>Ee?Ee:ke),b.a=0,b.$=Dt-H}return 1}return b.a=3,0}function Vr(b){t(b!=null),b.vc=null,b.yc=null,b.Ya=null;var P=b.Wa;P!=null&&(P.X=null),b.vb=null,t(b!=null)}function rr(){var b=new ll;return b==null?null:(b.a=0,b.xb=tu,or("Predictor","VP8LPredictors"),or("Predictor","VP8LPredictors_C"),or("PredictorAdd","VP8LPredictorsAdd"),or("PredictorAdd","VP8LPredictorsAdd_C"),Yu=fn,xa=et,zs=nt,Ss=Vt,na=Qt,Co=Nn,$s=wn,G.VP8LMapColor32b=ba,G.VP8LMapColor8b=js,b)}function Or(b,P,H,se,be){var Ee=1,Ae=[b],ke=[P],Be=se.m,Ve=se.s,ht=null,Dt=0;e:for(;;){if(H)for(;Ee&&Se(Be,1);){var Bt=Ae,wt=ke,Zt=se,$t=1,dt=Zt.m,yt=Zt.gc[Zt.ab],tn=Se(dt,2);if(Zt.Oc&1<<tn)Ee=0;else{switch(Zt.Oc|=1<<tn,yt.hc=tn,yt.Ea=Bt[0],yt.nc=wt[0],yt.K=[null],++Zt.ab,t(4>=Zt.ab),tn){case 0:case 1:yt.b=Se(dt,3)+2,$t=Or(Qe(yt.Ea,yt.b),Qe(yt.nc,yt.b),0,Zt,yt.K),yt.K=yt.K[0];break;case 3:var hn,rn=Se(dt,8)+1,Mn=16<rn?0:4<rn?1:2<rn?2:3;if(Bt[0]=Qe(yt.Ea,Mn),yt.b=Mn,hn=$t=Or(rn,1,0,Zt,yt.K)){var Sn,Jn=rn,l=yt,h=1<<(8>>l.b),v=o(h);if(v==null)hn=0;else{var x=l.K[0],C=l.w;for(v[0]=l.K[0][0],Sn=1;Sn<1*Jn;++Sn)v[Sn]=Ke(x[C+Sn],v[Sn-1]);for(;Sn<4*h;++Sn)v[Sn]=0;l.K[0]=null,l.K[0]=v,hn=1}}$t=hn;break;case 2:break;default:t(0)}Ee=$t}}if(Ae=Ae[0],ke=ke[0],Ee&&Se(Be,1)&&!(Ee=1<=(Dt=Se(Be,4))&&11>=Dt)){se.a=3;break e}var F;if(F=Ee)t:{var Q,re,he,Le=se,Je=Ae,ze=ke,vt=Dt,At=H,Jt=Le.m,yn=Le.s,bn=[null],ur=1,Ye=0,tt=Pt[vt];n:for(;;){if(At&&Se(Jt,1)){var ft=Se(Jt,3)+2,Nt=Qe(Je,ft),bt=Qe(ze,ft),Tt=Nt*bt;if(!Or(Nt,bt,0,Le,bn))break n;for(bn=bn[0],yn.xc=ft,Q=0;Q<Tt;++Q){var ge=bn[Q]>>8&65535;bn[Q]=ge,ge>=ur&&(ur=ge+1)}}if(Jt.h)break n;for(re=0;5>re;++re){var Pe=U[re];!re&&0<vt&&(Pe+=1<<vt),Ye<Pe&&(Ye=Pe)}var Oe=s(ur*tt,O),Ne=ur,Fe=s(Ne,V);if(Fe==null)var je=null;else t(65536>=Ne),je=Fe;var at=o(Ye);if(je==null||at==null||Oe==null){Le.a=1;break n}var lt=Oe;for(Q=he=0;Q<ur;++Q){var pt=je[Q],Lt=pt.G,St=pt.H,sn=0,zn=1,Hn=0;for(re=0;5>re;++re){Pe=U[re],Lt[re]=lt,St[re]=he,!re&&0<vt&&(Pe+=1<<vt);i:{var Xn,gi=Pe,Pi=Le,Jr=at,Oi=lt,po=he,Su=0,ua=Pi.m,Tf=Se(ua,1);if(i(Jr,0,0,gi),Tf){var qa=Se(ua,1)+1,Xu=Se(ua,1),ca=Se(ua,Xu==0?1:8);Jr[ca]=1,qa==2&&(Jr[ca=Se(ua,8)]=1);var Hs=1}else{var rs=o(19),gh=Se(ua,4)+4;if(19<gh){Pi.a=3;var Df=0;break i}for(Xn=0;Xn<gh;++Xn)rs[Ce[Xn]]=Se(ua,3);var Bf=void 0,Nf=void 0,mh=Pi,si=rs,vh=gi,Ip=Jr,Lc=0,Cu=mh.m,Rp=8,Fp=s(128,O);r:for(;$(Fp,0,7,si,19);){if(Se(Cu,1)){var hl=2+2*Se(Cu,3);if((Bf=2+Se(Cu,hl))>vh)break r}else Bf=vh;for(Nf=0;Nf<vh&&Bf--;){ye(Cu);var jp=Fp[0+(127&ne(Cu))];ce(Cu,Cu.u+jp.g);var Eu=jp.value;if(16>Eu)Ip[Nf++]=Eu,Eu!=0&&(Rp=Eu);else{var md=Eu==16,vd=Eu-16,zp=S[vd],Pa=Se(Cu,p[vd])+zp;if(Nf+Pa>vh)break r;for(var Qu=md?Rp:0;0<Pa--;)Ip[Nf++]=Qu}}Lc=1;break r}Lc||(mh.a=3),Hs=Lc}(Hs=Hs&&!ua.h)&&(Su=$(Oi,po,8,Jr,gi)),Hs&&Su!=0?Df=Su:(Pi.a=3,Df=0)}if(Df==0)break n;if(zn&&ie[re]==1&&(zn=lt[he].g==0),sn+=lt[he].g,he+=Df,3>=re){var Sc,yh=at[0];for(Sc=1;Sc<Pe;++Sc)at[Sc]>yh&&(yh=at[Sc]);Hn+=yh}}if(pt.nd=zn,pt.Qb=0,zn&&(pt.qb=(Lt[3][St[3]+0].value<<24|Lt[1][St[1]+0].value<<16|Lt[2][St[2]+0].value)>>>0,sn==0&&256>Lt[0][St[0]+0].value&&(pt.Qb=1,pt.qb+=Lt[0][St[0]+0].value<<8)),pt.jc=!pt.Qb&&6>Hn,pt.jc){var Cc,nu=pt;for(Cc=0;Cc<us;++Cc){var ru=Cc,Pu=nu.pd[ru],Xc=nu.G[0][nu.H[0]+ru];256<=Xc.value?(Pu.g=Xc.g+256,Pu.value=Xc.value):(Pu.g=0,Pu.value=0,ru>>=mr(Xc,8,Pu),ru>>=mr(nu.G[1][nu.H[1]+ru],16,Pu),ru>>=mr(nu.G[2][nu.H[2]+ru],0,Pu),mr(nu.G[3][nu.H[3]+ru],24,Pu))}}}yn.vc=bn,yn.Wb=ur,yn.Ya=je,yn.yc=Oe,F=1;break t}F=0}if(!(Ee=F)){se.a=3;break e}if(0<Dt){if(Ve.ua=1<<Dt,!de(Ve.Wa,Dt)){se.a=1,Ee=0;break e}}else Ve.ua=0;var Of=se,Mu=Ae,lm=ke,iu=Of.s,_h=iu.xc;if(Of.c=Mu,Of.i=lm,iu.md=Qe(Mu,_h),iu.wc=_h==0?-1:(1<<_h)-1,H){se.xb=Af;break e}if((ht=o(Ae*ke))==null){se.a=1,Ee=0;break e}Ee=(Ee=lr(se,ht,0,Ae,ke,ke,null))&&!Be.h;break e}return Ee?(be!=null?be[0]=ht:(t(ht==null),t(H)),se.$=0,H||Vr(Ve)):Vr(Ve),Ee}function er(b,P){var H=b.c*b.i,se=H+P+16*P;return t(b.c<=P),b.V=o(se),b.V==null?(b.Ta=null,b.Ua=0,b.a=1,0):(b.Ta=b.V,b.Ua=b.Ba+H+P,1)}function en(b,P){var H=b.C,se=P-H,be=b.V,Ee=b.Ba+b.c*H;for(t(P<=b.l.o);0<se;){var Ae=16<se?16:se,ke=b.l.ma,Be=b.l.width,Ve=Be*Ae,ht=ke.ca,Dt=ke.tb+Be*H,Bt=b.Ta,wt=b.Ua;On(b,Ae,be,Ee),ns(Bt,wt,ht,Dt,Ve),Ir(ke,H,H+Ae,ht,Dt,Be),se-=Ae,be+=Ae*b.c,H+=Ae}t(H==P),b.C=b.Ma=P}function qi(){this.ub=this.yd=this.td=this.Rb=0}function Di(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Si(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function ai(){this.Yb=function(){var b=[];return function P(H,se,be){for(var Ee=be[se],Ae=0;Ae<Ee&&(H.push(be.length>se+1?[]:0),!(be.length<se+1));Ae++)P(H[Ae],se+1,be)}(b,0,[3,11]),b}()}function Fr(){this.jb=o(3),this.Wc=u([4,8],ai),this.Xc=u([4,17],ai)}function Ml(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function jr(){this.ld=this.La=this.dd=this.tc=0}function Xo(){this.Na=this.la=0}function _u(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function wo(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ri(){this.uc=this.M=this.Nb=0,this.wa=Array(new jr),this.Y=0,this.ya=Array(new wo),this.aa=0,this.l=new li}function Fn(){this.y=o(16),this.f=o(8),this.ea=o(8)}function xs(){this.cb=this.a=0,this.sc="",this.m=new Re,this.Od=new qi,this.Kc=new Di,this.ed=new Ml,this.Qa=new Si,this.Ic=this.$c=this.Aa=0,this.D=new ri,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,Re),this.ia=0,this.pb=s(4,_u),this.Pa=new Fr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Fn),this.Hd=0,this.rb=Array(new Xo),this.sb=0,this.wa=Array(new jr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new wo),this.L=this.aa=0,this.gd=u([4,2],jr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function li(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function fr(){var b=new xs;return b!=null&&(b.a=0,b.sc="OK",b.cb=0,b.Xb=0,Yn||(Yn=Lr)),b}function Gn(b,P,H){return b.a==0&&(b.a=P,b.sc=H,b.cb=0),0}function gs(b,P,H){return 3<=H&&b[P+0]==157&&b[P+1]==1&&b[P+2]==42}function ms(b,P){if(b==null)return 0;if(b.a=0,b.sc="OK",P==null)return Gn(b,2,"null VP8Io passed to VP8GetHeaders()");var H=P.data,se=P.w,be=P.ha;if(4>be)return Gn(b,7,"Truncated header.");var Ee=H[se+0]|H[se+1]<<8|H[se+2]<<16,Ae=b.Od;if(Ae.Rb=!(1&Ee),Ae.td=Ee>>1&7,Ae.yd=Ee>>4&1,Ae.ub=Ee>>5,3<Ae.td)return Gn(b,3,"Incorrect keyframe parameters.");if(!Ae.yd)return Gn(b,4,"Frame not displayable.");se+=3,be-=3;var ke=b.Kc;if(Ae.Rb){if(7>be)return Gn(b,7,"cannot parse picture header");if(!gs(H,se,be))return Gn(b,3,"Bad code word");ke.c=16383&(H[se+4]<<8|H[se+3]),ke.Td=H[se+4]>>6,ke.i=16383&(H[se+6]<<8|H[se+5]),ke.Ud=H[se+6]>>6,se+=7,be-=7,b.za=ke.c+15>>4,b.Ub=ke.i+15>>4,P.width=ke.c,P.height=ke.i,P.Da=0,P.j=0,P.v=0,P.va=P.width,P.o=P.height,P.da=0,P.ib=P.width,P.hb=P.height,P.U=P.width,P.T=P.height,i((Ee=b.Pa).jb,0,255,Ee.jb.length),t((Ee=b.Qa)!=null),Ee.Cb=0,Ee.Bb=0,Ee.Fb=1,i(Ee.Zb,0,0,Ee.Zb.length),i(Ee.Lb,0,0,Ee.Lb)}if(Ae.ub>be)return Gn(b,7,"bad partition length");W(Ee=b.m,H,se,Ae.ub),se+=Ae.ub,be-=Ae.ub,Ae.Rb&&(ke.Ld=B(Ee),ke.Kd=B(Ee)),ke=b.Qa;var Be,Ve=b.Pa;if(t(Ee!=null),t(ke!=null),ke.Cb=B(Ee),ke.Cb){if(ke.Bb=B(Ee),B(Ee)){for(ke.Fb=B(Ee),Be=0;4>Be;++Be)ke.Zb[Be]=B(Ee)?X(Ee,7):0;for(Be=0;4>Be;++Be)ke.Lb[Be]=B(Ee)?X(Ee,6):0}if(ke.Bb)for(Be=0;3>Be;++Be)Ve.jb[Be]=B(Ee)?q(Ee,8):255}else ke.Bb=0;if(Ee.Ka)return Gn(b,3,"cannot parse segment header");if((ke=b.ed).zd=B(Ee),ke.Tb=q(Ee,6),ke.wb=q(Ee,3),ke.Pc=B(Ee),ke.Pc&&B(Ee)){for(Ve=0;4>Ve;++Ve)B(Ee)&&(ke.vd[Ve]=X(Ee,6));for(Ve=0;4>Ve;++Ve)B(Ee)&&(ke.od[Ve]=X(Ee,6))}if(b.L=ke.Tb==0?0:ke.zd?1:2,Ee.Ka)return Gn(b,3,"cannot parse filter header");var ht=be;if(be=Be=se,se=Be+ht,ke=ht,b.Xb=(1<<q(b.m,2))-1,ht<3*(Ve=b.Xb))H=7;else{for(Be+=3*Ve,ke-=3*Ve,ht=0;ht<Ve;++ht){var Dt=H[be+0]|H[be+1]<<8|H[be+2]<<16;Dt>ke&&(Dt=ke),W(b.Jc[+ht],H,Be,Dt),Be+=Dt,ke-=Dt,be+=3}W(b.Jc[+Ve],H,Be,ke),H=Be<se?0:5}if(H!=0)return Gn(b,H,"cannot parse partitions");for(H=q(Be=b.m,7),be=B(Be)?X(Be,4):0,se=B(Be)?X(Be,4):0,ke=B(Be)?X(Be,4):0,Ve=B(Be)?X(Be,4):0,Be=B(Be)?X(Be,4):0,ht=b.Qa,Dt=0;4>Dt;++Dt){if(ht.Cb){var Bt=ht.Zb[Dt];ht.Fb||(Bt+=H)}else{if(0<Dt){b.pb[Dt]=b.pb[0];continue}Bt=H}var wt=b.pb[Dt];wt.Sc[0]=on[$r(Bt+be,127)],wt.Sc[1]=Dn[$r(Bt+0,127)],wt.Eb[0]=2*on[$r(Bt+se,127)],wt.Eb[1]=101581*Dn[$r(Bt+ke,127)]>>16,8>wt.Eb[1]&&(wt.Eb[1]=8),wt.Qc[0]=on[$r(Bt+Ve,117)],wt.Qc[1]=Dn[$r(Bt+Be,127)],wt.lc=Bt+Be}if(!Ae.Rb)return Gn(b,4,"Not a key frame.");for(B(Ee),Ae=b.Pa,H=0;4>H;++H){for(be=0;8>be;++be)for(se=0;3>se;++se)for(ke=0;11>ke;++ke)Ve=ue(Ee,fo[H][be][se][ke])?q(Ee,8):Ms[H][be][se][ke],Ae.Wc[H][be].Yb[se][ke]=Ve;for(be=0;17>be;++be)Ae.Xc[H][be]=Ae.Wc[H][wc[be]]}return b.kc=B(Ee),b.kc&&(b.Bd=q(Ee,8)),b.cb=1}function Lr(b,P,H,se,be,Ee,Ae){var ke=P[be].Yb[H];for(H=0;16>be;++be){if(!ue(b,ke[H+0]))return be;for(;!ue(b,ke[H+1]);)if(ke=P[++be].Yb[0],H=0,be==16)return 16;var Be=P[be+1].Yb;if(ue(b,ke[H+2])){var Ve=b,ht=0;if(ue(Ve,(Bt=ke)[(Dt=H)+3]))if(ue(Ve,Bt[Dt+6])){for(ke=0,Dt=2*(ht=ue(Ve,Bt[Dt+8]))+(Bt=ue(Ve,Bt[Dt+9+ht])),ht=0,Bt=Rr[Dt];Bt[ke];++ke)ht+=ht+ue(Ve,Bt[ke]);ht+=3+(8<<Dt)}else ue(Ve,Bt[Dt+7])?(ht=7+2*ue(Ve,165),ht+=ue(Ve,145)):ht=5+ue(Ve,159);else ht=ue(Ve,Bt[Dt+4])?3+ue(Ve,Bt[Dt+5]):2;ke=Be[2]}else ht=1,ke=Be[1];Be=Ae+fs[be],0>(Ve=b).b&&oe(Ve);var Dt,Bt=Ve.b,wt=(Dt=Ve.Ca>>1)-(Ve.I>>Bt)>>31;--Ve.b,Ve.Ca+=wt,Ve.Ca|=1,Ve.I-=(Dt+1&wt)<<Bt,Ee[Be]=((ht^wt)-wt)*se[(0<be)+0]}return 16}function jo(b){var P=b.rb[b.sb-1];P.la=0,P.Na=0,i(b.zc,0,0,b.zc.length),b.ja=0}function Vn(b,P){if(b==null)return 0;if(P==null)return Gn(b,2,"NULL VP8Io parameter in VP8Decode().");if(!b.cb&&!ms(b,P))return 0;if(t(b.cb),P.ac==null||P.ac(P)){P.ob&&(b.L=0);var H=Ea[b.L];if(b.L==2?(b.yb=0,b.zb=0):(b.yb=P.v-H>>4,b.zb=P.j-H>>4,0>b.yb&&(b.yb=0),0>b.zb&&(b.zb=0)),b.Va=P.o+15+H>>4,b.Hb=P.va+15+H>>4,b.Hb>b.za&&(b.Hb=b.za),b.Va>b.Ub&&(b.Va=b.Ub),0<b.L){var se=b.ed;for(H=0;4>H;++H){var be;if(b.Qa.Cb){var Ee=b.Qa.Lb[H];b.Qa.Fb||(Ee+=se.Tb)}else Ee=se.Tb;for(be=0;1>=be;++be){var Ae=b.gd[H][be],ke=Ee;if(se.Pc&&(ke+=se.vd[0],be&&(ke+=se.od[0])),0<(ke=0>ke?0:63<ke?63:ke)){var Be=ke;0<se.wb&&(Be=4<se.wb?Be>>2:Be>>1)>9-se.wb&&(Be=9-se.wb),1>Be&&(Be=1),Ae.dd=Be,Ae.tc=2*ke+Be,Ae.ld=40<=ke?2:15<=ke?1:0}else Ae.tc=0;Ae.La=be}}}H=0}else Gn(b,6,"Frame setup failed"),H=b.a;if(H=H==0){if(H){b.$c=0,0<b.Aa||(b.Ic=dh);e:{H=b.Ic,se=4*(Be=b.za);var Ve=32*Be,ht=Be+1,Dt=0<b.L?Be*(0<b.Aa?2:1):0,Bt=(b.Aa==2?2:1)*Be;if((Ae=se+832+(be=3*(16*H+Ea[b.L])/2*Ve)+(Ee=b.Fa!=null&&0<b.Fa.length?b.Kc.c*b.Kc.i:0))!=Ae)H=0;else{if(Ae>b.Vb){if(b.Vb=0,b.Ec=o(Ae),b.Fc=0,b.Ec==null){H=Gn(b,1,"no memory during frame initialization.");break e}b.Vb=Ae}Ae=b.Ec,ke=b.Fc,b.Ac=Ae,b.Bc=ke,ke+=se,b.Gd=s(Ve,Fn),b.Hd=0,b.rb=s(ht+1,Xo),b.sb=1,b.wa=Dt?s(Dt,jr):null,b.Y=0,b.D.Nb=0,b.D.wa=b.wa,b.D.Y=b.Y,0<b.Aa&&(b.D.Y+=Be),t(!0),b.oc=Ae,b.pc=ke,ke+=832,b.ya=s(Bt,wo),b.aa=0,b.D.ya=b.ya,b.D.aa=b.aa,b.Aa==2&&(b.D.aa+=Be),b.R=16*Be,b.B=8*Be,Be=(Ve=Ea[b.L])*b.R,Ve=Ve/2*b.B,b.sa=Ae,b.ta=ke+Be,b.qa=b.sa,b.ra=b.ta+16*H*b.R+Ve,b.Ha=b.qa,b.Ia=b.ra+8*H*b.B+Ve,b.$c=0,ke+=be,b.mb=Ee?Ae:null,b.nb=Ee?ke:null,t(ke+Ee<=b.Fc+b.Vb),jo(b),i(b.Ac,b.Bc,0,se),H=1}}if(H){if(P.ka=0,P.y=b.sa,P.O=b.ta,P.f=b.qa,P.N=b.ra,P.ea=b.Ha,P.Vd=b.Ia,P.fa=b.R,P.Rc=b.B,P.F=null,P.J=0,!xu){for(H=-255;255>=H;++H)Ni[255+H]=0>H?-H:H;for(H=-1020;1020>=H;++H)Eo[1020+H]=-128>H?-128:127<H?127:H;for(H=-112;112>=H;++H)uo[112+H]=-16>H?-16:15<H?15:H;for(H=-255;510>=H;++H)Bo[255+H]=0>H?0:255<H?255:H;xu=1}_t=Ks,qt=as,Pn=vs,Zn=Ci,wr=ao,Mt=ii,ji=Ql,bi=Qo,Il=Do,Qs=Nl,zi=Dl,ra=Bl,La=vi,ia=Ku,sa=Xi,oa=ir,Yr=Qi,Ho=al,Wo[0]=Tr,Wo[1]=fi,Wo[2]=br,Wo[3]=Zr,Wo[4]=Os,Wo[5]=sl,Wo[6]=il,Wo[7]=$o,Wo[8]=bu,Wo[9]=$a,la[0]=ma,la[1]=Ns,la[2]=Yi,la[3]=ys,la[4]=Ji,la[5]=rl,la[6]=va,No[0]=Ua,No[1]=To,No[2]=Al,No[3]=Sr,No[4]=kl,No[5]=Zu,No[6]=Jl,H=1}else H=0}H&&(H=function(wt,Zt){for(wt.M=0;wt.M<wt.Va;++wt.M){var $t,dt=wt.Jc[wt.M&wt.Xb],yt=wt.m,tn=wt;for($t=0;$t<tn.za;++$t){var hn=yt,rn=tn,Mn=rn.Ac,Sn=rn.Bc+4*$t,Jn=rn.zc,l=rn.ya[rn.aa+$t];if(rn.Qa.Bb?l.$b=ue(hn,rn.Pa.jb[0])?2+ue(hn,rn.Pa.jb[2]):ue(hn,rn.Pa.jb[1]):l.$b=0,rn.kc&&(l.Ad=ue(hn,rn.Bd)),l.Za=!ue(hn,145)+0,l.Za){var h=l.Ob,v=0;for(rn=0;4>rn;++rn){var x,C=Jn[0+rn];for(x=0;4>x;++x){C=$i[Mn[Sn+x]][C];for(var F=Wi[ue(hn,C[0])];0<F;)F=Wi[2*F+ue(hn,C[F])];C=-F,Mn[Sn+x]=C}r(h,v,Mn,Sn,4),v+=4,Jn[0+rn]=C}}else C=ue(hn,156)?ue(hn,128)?1:3:ue(hn,163)?2:0,l.Ob[0]=C,i(Mn,Sn,C,4),i(Jn,0,C,4);l.Dd=ue(hn,142)?ue(hn,114)?ue(hn,183)?1:3:2:0}if(tn.m.Ka)return Gn(wt,7,"Premature end-of-partition0 encountered.");for(;wt.ja<wt.za;++wt.ja){if(tn=dt,hn=(yt=wt).rb[yt.sb-1],Mn=yt.rb[yt.sb+yt.ja],$t=yt.ya[yt.aa+yt.ja],Sn=yt.kc?$t.Ad:0)hn.la=Mn.la=0,$t.Za||(hn.Na=Mn.Na=0),$t.Hc=0,$t.Gc=0,$t.ia=0;else{var Q,re;if(hn=Mn,Mn=tn,Sn=yt.Pa.Xc,Jn=yt.ya[yt.aa+yt.ja],l=yt.pb[Jn.$b],rn=Jn.ad,h=0,v=yt.rb[yt.sb-1],C=x=0,i(rn,h,0,384),Jn.Za)var he=0,Le=Sn[3];else{F=o(16);var Je=hn.Na+v.Na;if(Je=Yn(Mn,Sn[1],Je,l.Eb,0,F,0),hn.Na=v.Na=(0<Je)+0,1<Je)_t(F,0,rn,h);else{var ze=F[0]+3>>3;for(F=0;256>F;F+=16)rn[h+F]=ze}he=1,Le=Sn[0]}var vt=15&hn.la,At=15&v.la;for(F=0;4>F;++F){var Jt=1&At;for(ze=re=0;4>ze;++ze)vt=vt>>1|(Jt=(Je=Yn(Mn,Le,Je=Jt+(1&vt),l.Sc,he,rn,h))>he)<<7,re=re<<2|(3<Je?3:1<Je?2:rn[h+0]!=0),h+=16;vt>>=4,At=At>>1|Jt<<7,x=(x<<8|re)>>>0}for(Le=vt,he=At>>4,Q=0;4>Q;Q+=2){for(re=0,vt=hn.la>>4+Q,At=v.la>>4+Q,F=0;2>F;++F){for(Jt=1&At,ze=0;2>ze;++ze)Je=Jt+(1&vt),vt=vt>>1|(Jt=0<(Je=Yn(Mn,Sn[2],Je,l.Qc,0,rn,h)))<<3,re=re<<2|(3<Je?3:1<Je?2:rn[h+0]!=0),h+=16;vt>>=2,At=At>>1|Jt<<5}C|=re<<4*Q,Le|=vt<<4<<Q,he|=(240&At)<<Q}hn.la=Le,v.la=he,Jn.Hc=x,Jn.Gc=C,Jn.ia=43690&C?0:l.ia,Sn=!(x|C)}if(0<yt.L&&(yt.wa[yt.Y+yt.ja]=yt.gd[$t.$b][$t.Za],yt.wa[yt.Y+yt.ja].La|=!Sn),tn.Ka)return Gn(wt,7,"Premature end-of-file encountered.")}if(jo(wt),yt=Zt,tn=1,$t=(dt=wt).D,hn=0<dt.L&&dt.M>=dt.zb&&dt.M<=dt.Va,dt.Aa==0)e:{if($t.M=dt.M,$t.uc=hn,eu(dt,$t),tn=1,$t=(re=dt.D).Nb,hn=(C=Ea[dt.L])*dt.R,Mn=C/2*dt.B,F=16*$t*dt.R,ze=8*$t*dt.B,Sn=dt.sa,Jn=dt.ta-hn+F,l=dt.qa,rn=dt.ra-Mn+ze,h=dt.Ha,v=dt.Ia-Mn+ze,At=(vt=re.M)==0,x=vt>=dt.Va-1,dt.Aa==2&&eu(dt,re),re.uc)for(Jt=(Je=dt).D.M,t(Je.D.uc),re=Je.yb;re<Je.Hb;++re){he=re,Le=Jt;var yn=(bn=(Pe=Je).D).Nb;Q=Pe.R;var bn=bn.wa[bn.Y+he],ur=Pe.sa,Ye=Pe.ta+16*yn*Q+16*he,tt=bn.dd,ft=bn.tc;if(ft!=0)if(t(3<=ft),Pe.L==1)0<he&&oa(ur,Ye,Q,ft+4),bn.La&&Ho(ur,Ye,Q,ft),0<Le&&sa(ur,Ye,Q,ft+4),bn.La&&Yr(ur,Ye,Q,ft);else{var Nt=Pe.B,bt=Pe.qa,Tt=Pe.ra+8*yn*Nt+8*he,ge=Pe.Ha,Pe=Pe.Ia+8*yn*Nt+8*he;yn=bn.ld,0<he&&(bi(ur,Ye,Q,ft+4,tt,yn),Qs(bt,Tt,ge,Pe,Nt,ft+4,tt,yn)),bn.La&&(ra(ur,Ye,Q,ft,tt,yn),ia(bt,Tt,ge,Pe,Nt,ft,tt,yn)),0<Le&&(ji(ur,Ye,Q,ft+4,tt,yn),Il(bt,Tt,ge,Pe,Nt,ft+4,tt,yn)),bn.La&&(zi(ur,Ye,Q,ft,tt,yn),La(bt,Tt,ge,Pe,Nt,ft,tt,yn))}}if(dt.ia&&alert("todo:DitherRow"),yt.put!=null){if(re=16*vt,vt=16*(vt+1),At?(yt.y=dt.sa,yt.O=dt.ta+F,yt.f=dt.qa,yt.N=dt.ra+ze,yt.ea=dt.Ha,yt.W=dt.Ia+ze):(re-=C,yt.y=Sn,yt.O=Jn,yt.f=l,yt.N=rn,yt.ea=h,yt.W=v),x||(vt-=C),vt>yt.o&&(vt=yt.o),yt.F=null,yt.J=null,dt.Fa!=null&&0<dt.Fa.length&&re<vt&&(yt.J=es(dt,yt,re,vt-re),yt.F=dt.mb,yt.F==null&&yt.F.length==0)){tn=Gn(dt,3,"Could not decode alpha data.");break e}re<yt.j&&(C=yt.j-re,re=yt.j,t(!(1&C)),yt.O+=dt.R*C,yt.N+=dt.B*(C>>1),yt.W+=dt.B*(C>>1),yt.F!=null&&(yt.J+=yt.width*C)),re<vt&&(yt.O+=yt.v,yt.N+=yt.v>>1,yt.W+=yt.v>>1,yt.F!=null&&(yt.J+=yt.v),yt.ka=re-yt.j,yt.U=yt.va-yt.v,yt.T=vt-re,tn=yt.put(yt))}$t+1!=dt.Ic||x||(r(dt.sa,dt.ta-hn,Sn,Jn+16*dt.R,hn),r(dt.qa,dt.ra-Mn,l,rn+8*dt.B,Mn),r(dt.Ha,dt.Ia-Mn,h,v+8*dt.B,Mn))}if(!tn)return Gn(wt,6,"Output aborted.")}return 1}(b,P)),P.bc!=null&&P.bc(P),H&=1}return H?(b.cb=0,H):0}function _r(b,P,H,se,be){be=b[P+H+32*se]+(be>>3),b[P+H+32*se]=-256&be?0>be?0:255:be}function Wr(b,P,H,se,be,Ee){_r(b,P,0,H,se+be),_r(b,P,1,H,se+Ee),_r(b,P,2,H,se-Ee),_r(b,P,3,H,se-be)}function _n(b){return(20091*b>>16)+b}function nn(b,P,H,se){var be,Ee=0,Ae=o(16);for(be=0;4>be;++be){var ke=b[P+0]+b[P+8],Be=b[P+0]-b[P+8],Ve=(35468*b[P+4]>>16)-_n(b[P+12]),ht=_n(b[P+4])+(35468*b[P+12]>>16);Ae[Ee+0]=ke+ht,Ae[Ee+1]=Be+Ve,Ae[Ee+2]=Be-Ve,Ae[Ee+3]=ke-ht,Ee+=4,P++}for(be=Ee=0;4>be;++be)ke=(b=Ae[Ee+0]+4)+Ae[Ee+8],Be=b-Ae[Ee+8],Ve=(35468*Ae[Ee+4]>>16)-_n(Ae[Ee+12]),_r(H,se,0,0,ke+(ht=_n(Ae[Ee+4])+(35468*Ae[Ee+12]>>16))),_r(H,se,1,0,Be+Ve),_r(H,se,2,0,Be-Ve),_r(H,se,3,0,ke-ht),Ee++,se+=32}function ii(b,P,H,se){var be=b[P+0]+4,Ee=35468*b[P+4]>>16,Ae=_n(b[P+4]),ke=35468*b[P+1]>>16;Wr(H,se,0,be+Ae,b=_n(b[P+1]),ke),Wr(H,se,1,be+Ee,b,ke),Wr(H,se,2,be-Ee,b,ke),Wr(H,se,3,be-Ae,b,ke)}function as(b,P,H,se,be){nn(b,P,H,se),be&&nn(b,P+16,H,se+4)}function vs(b,P,H,se){qt(b,P+0,H,se,1),qt(b,P+32,H,se+128,1)}function Ci(b,P,H,se){var be;for(b=b[P+0]+4,be=0;4>be;++be)for(P=0;4>P;++P)_r(H,se,P,be,b)}function ao(b,P,H,se){b[P+0]&&Zn(b,P+0,H,se),b[P+16]&&Zn(b,P+16,H,se+4),b[P+32]&&Zn(b,P+32,H,se+128),b[P+48]&&Zn(b,P+48,H,se+128+4)}function Ks(b,P,H,se){var be,Ee=o(16);for(be=0;4>be;++be){var Ae=b[P+0+be]+b[P+12+be],ke=b[P+4+be]+b[P+8+be],Be=b[P+4+be]-b[P+8+be],Ve=b[P+0+be]-b[P+12+be];Ee[0+be]=Ae+ke,Ee[8+be]=Ae-ke,Ee[4+be]=Ve+Be,Ee[12+be]=Ve-Be}for(be=0;4>be;++be)Ae=(b=Ee[0+4*be]+3)+Ee[3+4*be],ke=Ee[1+4*be]+Ee[2+4*be],Be=Ee[1+4*be]-Ee[2+4*be],Ve=b-Ee[3+4*be],H[se+0]=Ae+ke>>3,H[se+16]=Ve+Be>>3,H[se+32]=Ae-ke>>3,H[se+48]=Ve-Be>>3,se+=64}function Bs(b,P,H){var se,be=P-32,Ee=Bi,Ae=255-b[be-1];for(se=0;se<H;++se){var ke,Be=Ee,Ve=Ae+b[P-1];for(ke=0;ke<H;++ke)b[P+ke]=Be[Ve+b[be+ke]];P+=32}}function fi(b,P){Bs(b,P,4)}function To(b,P){Bs(b,P,8)}function Ns(b,P){Bs(b,P,16)}function Yi(b,P){var H;for(H=0;16>H;++H)r(b,P+32*H,b,P-32,16)}function ys(b,P){var H;for(H=16;0<H;--H)i(b,P,b[P-1],16),P+=32}function zo(b,P,H){var se;for(se=0;16>se;++se)i(P,H+32*se,b,16)}function ma(b,P){var H,se=16;for(H=0;16>H;++H)se+=b[P-1+32*H]+b[P+H-32];zo(se>>5,b,P)}function Ji(b,P){var H,se=8;for(H=0;16>H;++H)se+=b[P-1+32*H];zo(se>>4,b,P)}function rl(b,P){var H,se=8;for(H=0;16>H;++H)se+=b[P+H-32];zo(se>>4,b,P)}function va(b,P){zo(128,b,P)}function pr(b,P,H){return b+2*P+H+2>>2}function br(b,P){var H,se=P-32;for(se=new Uint8Array([pr(b[se-1],b[se+0],b[se+1]),pr(b[se+0],b[se+1],b[se+2]),pr(b[se+1],b[se+2],b[se+3]),pr(b[se+2],b[se+3],b[se+4])]),H=0;4>H;++H)r(b,P+32*H,se,0,se.length)}function Zr(b,P){var H=b[P-1],se=b[P-1+32],be=b[P-1+64],Ee=b[P-1+96];De(b,P+0,16843009*pr(b[P-1-32],H,se)),De(b,P+32,16843009*pr(H,se,be)),De(b,P+64,16843009*pr(se,be,Ee)),De(b,P+96,16843009*pr(be,Ee,Ee))}function Tr(b,P){var H,se=4;for(H=0;4>H;++H)se+=b[P+H-32]+b[P-1+32*H];for(se>>=3,H=0;4>H;++H)i(b,P+32*H,se,4)}function Os(b,P){var H=b[P-1+0],se=b[P-1+32],be=b[P-1+64],Ee=b[P-1-32],Ae=b[P+0-32],ke=b[P+1-32],Be=b[P+2-32],Ve=b[P+3-32];b[P+0+96]=pr(se,be,b[P-1+96]),b[P+1+96]=b[P+0+64]=pr(H,se,be),b[P+2+96]=b[P+1+64]=b[P+0+32]=pr(Ee,H,se),b[P+3+96]=b[P+2+64]=b[P+1+32]=b[P+0+0]=pr(Ae,Ee,H),b[P+3+64]=b[P+2+32]=b[P+1+0]=pr(ke,Ae,Ee),b[P+3+32]=b[P+2+0]=pr(Be,ke,Ae),b[P+3+0]=pr(Ve,Be,ke)}function il(b,P){var H=b[P+1-32],se=b[P+2-32],be=b[P+3-32],Ee=b[P+4-32],Ae=b[P+5-32],ke=b[P+6-32],Be=b[P+7-32];b[P+0+0]=pr(b[P+0-32],H,se),b[P+1+0]=b[P+0+32]=pr(H,se,be),b[P+2+0]=b[P+1+32]=b[P+0+64]=pr(se,be,Ee),b[P+3+0]=b[P+2+32]=b[P+1+64]=b[P+0+96]=pr(be,Ee,Ae),b[P+3+32]=b[P+2+64]=b[P+1+96]=pr(Ee,Ae,ke),b[P+3+64]=b[P+2+96]=pr(Ae,ke,Be),b[P+3+96]=pr(ke,Be,Be)}function sl(b,P){var H=b[P-1+0],se=b[P-1+32],be=b[P-1+64],Ee=b[P-1-32],Ae=b[P+0-32],ke=b[P+1-32],Be=b[P+2-32],Ve=b[P+3-32];b[P+0+0]=b[P+1+64]=Ee+Ae+1>>1,b[P+1+0]=b[P+2+64]=Ae+ke+1>>1,b[P+2+0]=b[P+3+64]=ke+Be+1>>1,b[P+3+0]=Be+Ve+1>>1,b[P+0+96]=pr(be,se,H),b[P+0+64]=pr(se,H,Ee),b[P+0+32]=b[P+1+96]=pr(H,Ee,Ae),b[P+1+32]=b[P+2+96]=pr(Ee,Ae,ke),b[P+2+32]=b[P+3+96]=pr(Ae,ke,Be),b[P+3+32]=pr(ke,Be,Ve)}function $o(b,P){var H=b[P+0-32],se=b[P+1-32],be=b[P+2-32],Ee=b[P+3-32],Ae=b[P+4-32],ke=b[P+5-32],Be=b[P+6-32],Ve=b[P+7-32];b[P+0+0]=H+se+1>>1,b[P+1+0]=b[P+0+64]=se+be+1>>1,b[P+2+0]=b[P+1+64]=be+Ee+1>>1,b[P+3+0]=b[P+2+64]=Ee+Ae+1>>1,b[P+0+32]=pr(H,se,be),b[P+1+32]=b[P+0+96]=pr(se,be,Ee),b[P+2+32]=b[P+1+96]=pr(be,Ee,Ae),b[P+3+32]=b[P+2+96]=pr(Ee,Ae,ke),b[P+3+64]=pr(Ae,ke,Be),b[P+3+96]=pr(ke,Be,Ve)}function $a(b,P){var H=b[P-1+0],se=b[P-1+32],be=b[P-1+64],Ee=b[P-1+96];b[P+0+0]=H+se+1>>1,b[P+2+0]=b[P+0+32]=se+be+1>>1,b[P+2+32]=b[P+0+64]=be+Ee+1>>1,b[P+1+0]=pr(H,se,be),b[P+3+0]=b[P+1+32]=pr(se,be,Ee),b[P+3+32]=b[P+1+64]=pr(be,Ee,Ee),b[P+3+64]=b[P+2+64]=b[P+0+96]=b[P+1+96]=b[P+2+96]=b[P+3+96]=Ee}function bu(b,P){var H=b[P-1+0],se=b[P-1+32],be=b[P-1+64],Ee=b[P-1+96],Ae=b[P-1-32],ke=b[P+0-32],Be=b[P+1-32],Ve=b[P+2-32];b[P+0+0]=b[P+2+32]=H+Ae+1>>1,b[P+0+32]=b[P+2+64]=se+H+1>>1,b[P+0+64]=b[P+2+96]=be+se+1>>1,b[P+0+96]=Ee+be+1>>1,b[P+3+0]=pr(ke,Be,Ve),b[P+2+0]=pr(Ae,ke,Be),b[P+1+0]=b[P+3+32]=pr(H,Ae,ke),b[P+1+32]=b[P+3+64]=pr(se,H,Ae),b[P+1+64]=b[P+3+96]=pr(be,se,H),b[P+1+96]=pr(Ee,be,se)}function Al(b,P){var H;for(H=0;8>H;++H)r(b,P+32*H,b,P-32,8)}function Sr(b,P){var H;for(H=0;8>H;++H)i(b,P,b[P-1],8),P+=32}function Hr(b,P,H){var se;for(se=0;8>se;++se)i(P,H+32*se,b,8)}function Ua(b,P){var H,se=8;for(H=0;8>H;++H)se+=b[P+H-32]+b[P-1+32*H];Hr(se>>4,b,P)}function Zu(b,P){var H,se=4;for(H=0;8>H;++H)se+=b[P+H-32];Hr(se>>3,b,P)}function kl(b,P){var H,se=4;for(H=0;8>H;++H)se+=b[P-1+32*H];Hr(se>>3,b,P)}function Jl(b,P){Hr(128,b,P)}function ol(b,P,H){var se=b[P-H],be=b[P+0],Ee=3*(be-se)+aa[1020+b[P-2*H]-b[P+H]],Ae=cs[112+(Ee+4>>3)];b[P-H]=Bi[255+se+cs[112+(Ee+3>>3)]],b[P+0]=Bi[255+be-Ae]}function Tl(b,P,H,se){var be=b[P+0],Ee=b[P+H];return Us[255+b[P-2*H]-b[P-H]]>se||Us[255+Ee-be]>se}function Xl(b,P,H,se){return 4*Us[255+b[P-H]-b[P+0]]+Us[255+b[P-2*H]-b[P+H]]<=se}function Kr(b,P,H,se,be){var Ee=b[P-3*H],Ae=b[P-2*H],ke=b[P-H],Be=b[P+0],Ve=b[P+H],ht=b[P+2*H],Dt=b[P+3*H];return 4*Us[255+ke-Be]+Us[255+Ae-Ve]>se?0:Us[255+b[P-4*H]-Ee]<=be&&Us[255+Ee-Ae]<=be&&Us[255+Ae-ke]<=be&&Us[255+Dt-ht]<=be&&Us[255+ht-Ve]<=be&&Us[255+Ve-Be]<=be}function Xi(b,P,H,se){var be=2*se+1;for(se=0;16>se;++se)Xl(b,P+se,H,be)&&ol(b,P+se,H)}function ir(b,P,H,se){var be=2*se+1;for(se=0;16>se;++se)Xl(b,P+se*H,1,be)&&ol(b,P+se*H,1)}function Qi(b,P,H,se){var be;for(be=3;0<be;--be)Xi(b,P+=4*H,H,se)}function al(b,P,H,se){var be;for(be=3;0<be;--be)ir(b,P+=4,H,se)}function ya(b,P,H,se,be,Ee,Ae,ke){for(Ee=2*Ee+1;0<be--;){if(Kr(b,P,H,Ee,Ae))if(Tl(b,P,H,ke))ol(b,P,H);else{var Be=b,Ve=P,ht=H,Dt=Be[Ve-2*ht],Bt=Be[Ve-ht],wt=Be[Ve+0],Zt=Be[Ve+ht],$t=Be[Ve+2*ht],dt=27*(tn=aa[1020+3*(wt-Bt)+aa[1020+Dt-Zt]])+63>>7,yt=18*tn+63>>7,tn=9*tn+63>>7;Be[Ve-3*ht]=Bi[255+Be[Ve-3*ht]+tn],Be[Ve-2*ht]=Bi[255+Dt+yt],Be[Ve-ht]=Bi[255+Bt+dt],Be[Ve+0]=Bi[255+wt-dt],Be[Ve+ht]=Bi[255+Zt-yt],Be[Ve+2*ht]=Bi[255+$t-tn]}P+=se}}function Fi(b,P,H,se,be,Ee,Ae,ke){for(Ee=2*Ee+1;0<be--;){if(Kr(b,P,H,Ee,Ae))if(Tl(b,P,H,ke))ol(b,P,H);else{var Be=b,Ve=P,ht=H,Dt=Be[Ve-ht],Bt=Be[Ve+0],wt=Be[Ve+ht],Zt=cs[112+(($t=3*(Bt-Dt))+4>>3)],$t=cs[112+($t+3>>3)],dt=Zt+1>>1;Be[Ve-2*ht]=Bi[255+Be[Ve-2*ht]+dt],Be[Ve-ht]=Bi[255+Dt+$t],Be[Ve+0]=Bi[255+Bt-Zt],Be[Ve+ht]=Bi[255+wt-dt]}P+=se}}function Ql(b,P,H,se,be,Ee){ya(b,P,H,1,16,se,be,Ee)}function Qo(b,P,H,se,be,Ee){ya(b,P,1,H,16,se,be,Ee)}function Dl(b,P,H,se,be,Ee){var Ae;for(Ae=3;0<Ae;--Ae)Fi(b,P+=4*H,H,1,16,se,be,Ee)}function Bl(b,P,H,se,be,Ee){var Ae;for(Ae=3;0<Ae;--Ae)Fi(b,P+=4,1,H,16,se,be,Ee)}function Do(b,P,H,se,be,Ee,Ae,ke){ya(b,P,be,1,8,Ee,Ae,ke),ya(H,se,be,1,8,Ee,Ae,ke)}function Nl(b,P,H,se,be,Ee,Ae,ke){ya(b,P,1,be,8,Ee,Ae,ke),ya(H,se,1,be,8,Ee,Ae,ke)}function vi(b,P,H,se,be,Ee,Ae,ke){Fi(b,P+4*be,be,1,8,Ee,Ae,ke),Fi(H,se+4*be,be,1,8,Ee,Ae,ke)}function Ku(b,P,H,se,be,Ee,Ae,ke){Fi(b,P+4,1,be,8,Ee,Ae,ke),Fi(H,se+4,1,be,8,Ee,Ae,ke)}function Ls(){this.ba=new cr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new mt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Uo(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ol(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Vo(){this.ua=0,this.Wa=new pe,this.vb=new pe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new V,this.yc=new O}function ll(){this.xb=this.a=0,this.l=new li,this.ca=new cr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new T,this.Pb=0,this.wd=new T,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Vo,this.ab=0,this.gc=s(4,Ol),this.Oc=0}function ul(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new li,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function yi(b,P,H,se,be,Ee,Ae){for(b=b==null?0:b[P+0],P=0;P<Ae;++P)be[Ee+P]=b+H[se+P]&255,b=be[Ee+P]}function xo(b,P,H,se,be,Ee,Ae){var ke;if(b==null)yi(null,null,H,se,be,Ee,Ae);else for(ke=0;ke<Ae;++ke)be[Ee+ke]=b[P+ke]+H[se+ke]&255}function _a(b,P,H,se,be,Ee,Ae){if(b==null)yi(null,null,H,se,be,Ee,Ae);else{var ke,Be=b[P+0],Ve=Be,ht=Be;for(ke=0;ke<Ae;++ke)Ve=ht+(Be=b[P+ke])-Ve,ht=H[se+ke]+(-256&Ve?0>Ve?0:255:Ve)&255,Ve=Be,be[Ee+ke]=ht}}function es(b,P,H,se){var be=P.width,Ee=P.o;if(t(b!=null&&P!=null),0>H||0>=se||H+se>Ee)return null;if(!b.Cc){if(b.ga==null){var Ae;if(b.ga=new ul,(Ae=b.ga==null)||(Ae=P.width*P.o,t(b.Gb.length==0),b.Gb=o(Ae),b.Uc=0,b.Gb==null?Ae=0:(b.mb=b.Gb,b.nb=b.Uc,b.rc=null,Ae=1),Ae=!Ae),!Ae){Ae=b.ga;var ke=b.Fa,Be=b.P,Ve=b.qc,ht=b.mb,Dt=b.nb,Bt=Be+1,wt=Ve-1,Zt=Ae.l;if(t(ke!=null&&ht!=null&&P!=null),pi[0]=null,pi[1]=yi,pi[2]=xo,pi[3]=_a,Ae.ca=ht,Ae.tb=Dt,Ae.c=P.width,Ae.i=P.height,t(0<Ae.c&&0<Ae.i),1>=Ve)P=0;else if(Ae.$a=ke[Be+0]>>0&3,Ae.Z=ke[Be+0]>>2&3,Ae.Lc=ke[Be+0]>>4&3,Be=ke[Be+0]>>6&3,0>Ae.$a||1<Ae.$a||4<=Ae.Z||1<Ae.Lc||Be)P=0;else if(Zt.put=Wn,Zt.ac=ar,Zt.bc=Xt,Zt.ma=Ae,Zt.width=P.width,Zt.height=P.height,Zt.Da=P.Da,Zt.v=P.v,Zt.va=P.va,Zt.j=P.j,Zt.o=P.o,Ae.$a)e:{t(Ae.$a==1),P=rr();t:for(;;){if(P==null){P=0;break e}if(t(Ae!=null),Ae.mc=P,P.c=Ae.c,P.i=Ae.i,P.l=Ae.l,P.l.ma=Ae,P.l.width=Ae.c,P.l.height=Ae.i,P.a=0,Y(P.m,ke,Bt,wt),!Or(Ae.c,Ae.i,1,P,null)||(P.ab==1&&P.gc[0].hc==3&&Ti(P.s)?(Ae.ic=1,ke=P.c*P.i,P.Ta=null,P.Ua=0,P.V=o(ke),P.Ba=0,P.V==null?(P.a=1,P=0):P=1):(Ae.ic=0,P=er(P,Ae.c)),!P))break t;P=1;break e}Ae.mc=null,P=0}else P=wt>=Ae.c*Ae.i;Ae=!P}if(Ae)return null;b.ga.Lc!=1?b.Ga=0:se=Ee-H}t(b.ga!=null),t(H+se<=Ee);e:{if(P=(ke=b.ga).c,Ee=ke.l.o,ke.$a==0){if(Bt=b.rc,wt=b.Vc,Zt=b.Fa,Be=b.P+1+H*P,Ve=b.mb,ht=b.nb+H*P,t(Be<=b.P+b.qc),ke.Z!=0)for(t(pi[ke.Z]!=null),Ae=0;Ae<se;++Ae)pi[ke.Z](Bt,wt,Zt,Be,Ve,ht,P),Bt=Ve,wt=ht,ht+=P,Be+=P;else for(Ae=0;Ae<se;++Ae)r(Ve,ht,Zt,Be,P),Bt=Ve,wt=ht,ht+=P,Be+=P;b.rc=Bt,b.Vc=wt}else{if(t(ke.mc!=null),P=H+se,t((Ae=ke.mc)!=null),t(P<=Ae.i),Ae.C>=P)P=1;else if(ke.ic||xt(),ke.ic){ke=Ae.V,Bt=Ae.Ba,wt=Ae.c;var $t=Ae.i,dt=(Zt=1,Be=Ae.$/wt,Ve=Ae.$%wt,ht=Ae.m,Dt=Ae.s,Ae.$),yt=wt*$t,tn=wt*P,hn=Dt.wc,rn=dt<tn?ct(Dt,Ve,Be):null;t(dt<=yt),t(P<=$t),t(Ti(Dt));t:for(;;){for(;!ht.h&&dt<tn;){if(Ve&hn||(rn=ct(Dt,Ve,Be)),t(rn!=null),ye(ht),256>($t=Ln(rn.G[0],rn.H[0],ht)))ke[Bt+dt]=$t,++dt,++Ve>=wt&&(Ve=0,++Be<=P&&!(Be%16)&&Er(Ae,Be));else{if(!(280>$t)){Zt=0;break t}$t=It($t-256,ht);var Mn,Sn=Ln(rn.G[4],rn.H[4],ht);if(ye(ht),!(dt>=(Sn=Yt(wt,Sn=It(Sn,ht)))&&yt-dt>=$t)){Zt=0;break t}for(Mn=0;Mn<$t;++Mn)ke[Bt+dt+Mn]=ke[Bt+dt+Mn-Sn];for(dt+=$t,Ve+=$t;Ve>=wt;)Ve-=wt,++Be<=P&&!(Be%16)&&Er(Ae,Be);dt<tn&&Ve&hn&&(rn=ct(Dt,Ve,Be))}t(ht.h==fe(ht))}Er(Ae,Be>P?P:Be);break t}!Zt||ht.h&&dt<yt?(Zt=0,Ae.a=ht.h?5:3):Ae.$=dt,P=Zt}else P=lr(Ae,Ae.V,Ae.Ba,Ae.c,Ae.i,P,en);if(!P){se=0;break e}}H+se>=Ee&&(b.Cc=1),se=1}if(!se)return null;if(b.Cc&&((se=b.ga)!=null&&(se.mc=null),b.ga=null,0<b.Ga))return alert("todo:WebPDequantizeLevels"),null}return b.nb+H*be}function D(b,P,H,se,be,Ee){for(;0<be--;){var Ae,ke=b,Be=P+(H?1:0),Ve=b,ht=P+(H?0:3);for(Ae=0;Ae<se;++Ae){var Dt=Ve[ht+4*Ae];Dt!=255&&(Dt*=32897,ke[Be+4*Ae+0]=ke[Be+4*Ae+0]*Dt>>23,ke[Be+4*Ae+1]=ke[Be+4*Ae+1]*Dt>>23,ke[Be+4*Ae+2]=ke[Be+4*Ae+2]*Dt>>23)}P+=Ee}}function _e(b,P,H,se,be){for(;0<se--;){var Ee;for(Ee=0;Ee<H;++Ee){var Ae=b[P+2*Ee+0],ke=15&(Ve=b[P+2*Ee+1]),Be=4369*ke,Ve=(240&Ve|Ve>>4)*Be>>16;b[P+2*Ee+0]=(240&Ae|Ae>>4)*Be>>16&240|(15&Ae|Ae<<4)*Be>>16>>4&15,b[P+2*Ee+1]=240&Ve|ke}P+=be}}function Ze(b,P,H,se,be,Ee,Ae,ke){var Be,Ve,ht=255;for(Ve=0;Ve<be;++Ve){for(Be=0;Be<se;++Be){var Dt=b[P+Be];Ee[Ae+4*Be]=Dt,ht&=Dt}P+=H,Ae+=ke}return ht!=255}function ut(b,P,H,se,be){var Ee;for(Ee=0;Ee<be;++Ee)H[se+Ee]=b[P+Ee]>>8}function xt(){Cs=D,wi=_e,Ei=Ze,ns=ut}function jt(b,P,H){G[b]=function(se,be,Ee,Ae,ke,Be,Ve,ht,Dt,Bt,wt,Zt,$t,dt,yt,tn,hn){var rn,Mn=hn-1>>1,Sn=ke[Be+0]|Ve[ht+0]<<16,Jn=Dt[Bt+0]|wt[Zt+0]<<16;t(se!=null);var l=3*Sn+Jn+131074>>2;for(P(se[be+0],255&l,l>>16,$t,dt),Ee!=null&&(l=3*Jn+Sn+131074>>2,P(Ee[Ae+0],255&l,l>>16,yt,tn)),rn=1;rn<=Mn;++rn){var h=ke[Be+rn]|Ve[ht+rn]<<16,v=Dt[Bt+rn]|wt[Zt+rn]<<16,x=Sn+h+Jn+v+524296,C=x+2*(h+Jn)>>3;l=C+Sn>>1,Sn=(x=x+2*(Sn+v)>>3)+h>>1,P(se[be+2*rn-1],255&l,l>>16,$t,dt+(2*rn-1)*H),P(se[be+2*rn-0],255&Sn,Sn>>16,$t,dt+(2*rn-0)*H),Ee!=null&&(l=x+Jn>>1,Sn=C+v>>1,P(Ee[Ae+2*rn-1],255&l,l>>16,yt,tn+(2*rn-1)*H),P(Ee[Ae+2*rn+0],255&Sn,Sn>>16,yt,tn+(2*rn+0)*H)),Sn=h,Jn=v}1&hn||(l=3*Sn+Jn+131074>>2,P(se[be+hn-1],255&l,l>>16,$t,dt+(hn-1)*H),Ee!=null&&(l=3*Jn+Sn+131074>>2,P(Ee[Ae+hn-1],255&l,l>>16,yt,tn+(hn-1)*H)))}}function cn(){Vs[co]=Te,Vs[dr]=Lu,Vs[Sa]=ho,Vs[Ca]=As,Vs[Go]=Ur,Vs[eo]=Wc,Vs[bc]=uh,Vs[Es]=Lu,Vs[Ps]=As,Vs[qo]=Ur,Vs[a]=Wc}function Tn(b){return b&-16384?0>b?0:255:b>>pd}function jn(b,P){return Tn((19077*b>>8)+(26149*P>>8)-14234)}function tr(b,P,H){return Tn((19077*b>>8)-(6419*P>>8)-(13320*H>>8)+8708)}function vr(b,P){return Tn((19077*b>>8)+(33050*P>>8)-17685)}function zr(b,P,H,se,be){se[be+0]=jn(b,H),se[be+1]=tr(b,P,H),se[be+2]=vr(b,P)}function Ri(b,P,H,se,be){se[be+0]=vr(b,P),se[be+1]=tr(b,P,H),se[be+2]=jn(b,H)}function hi(b,P,H,se,be){var Ee=tr(b,P,H);P=Ee<<3&224|vr(b,P)>>3,se[be+0]=248&jn(b,H)|Ee>>5,se[be+1]=P}function _i(b,P,H,se,be){var Ee=240&vr(b,P)|15;se[be+0]=240&jn(b,H)|tr(b,P,H)>>4,se[be+1]=Ee}function ts(b,P,H,se,be){se[be+0]=255,zr(b,P,H,se,be+1)}function ls(b,P,H,se,be){Ri(b,P,H,se,be),se[be+3]=255}function Lo(b,P,H,se,be){zr(b,P,H,se,be),se[be+3]=255}function $r(b,P){return 0>b?0:b>P?P:b}function Is(b,P,H){G[b]=function(se,be,Ee,Ae,ke,Be,Ve,ht,Dt){for(var Bt=ht+(-2&Dt)*H;ht!=Bt;)P(se[be+0],Ee[Ae+0],ke[Be+0],Ve,ht),P(se[be+1],Ee[Ae+0],ke[Be+0],Ve,ht+H),be+=2,++Ae,++Be,ht+=2*H;1&Dt&&P(se[be+0],Ee[Ae+0],ke[Be+0],Ve,ht)}}function cl(b,P,H){return H==0?b==0?P==0?6:5:P==0?4:0:H}function Ys(b,P,H,se,be){switch(b>>>30){case 3:qt(P,H,se,be,0);break;case 2:Mt(P,H,se,be);break;case 1:Zn(P,H,se,be)}}function eu(b,P){var H,se,be=P.M,Ee=P.Nb,Ae=b.oc,ke=b.pc+40,Be=b.oc,Ve=b.pc+584,ht=b.oc,Dt=b.pc+600;for(H=0;16>H;++H)Ae[ke+32*H-1]=129;for(H=0;8>H;++H)Be[Ve+32*H-1]=129,ht[Dt+32*H-1]=129;for(0<be?Ae[ke-1-32]=Be[Ve-1-32]=ht[Dt-1-32]=129:(i(Ae,ke-32-1,127,21),i(Be,Ve-32-1,127,9),i(ht,Dt-32-1,127,9)),se=0;se<b.za;++se){var Bt=P.ya[P.aa+se];if(0<se){for(H=-1;16>H;++H)r(Ae,ke+32*H-4,Ae,ke+32*H+12,4);for(H=-1;8>H;++H)r(Be,Ve+32*H-4,Be,Ve+32*H+4,4),r(ht,Dt+32*H-4,ht,Dt+32*H+4,4)}var wt=b.Gd,Zt=b.Hd+se,$t=Bt.ad,dt=Bt.Hc;if(0<be&&(r(Ae,ke-32,wt[Zt].y,0,16),r(Be,Ve-32,wt[Zt].f,0,8),r(ht,Dt-32,wt[Zt].ea,0,8)),Bt.Za){var yt=Ae,tn=ke-32+16;for(0<be&&(se>=b.za-1?i(yt,tn,wt[Zt].y[15],4):r(yt,tn,wt[Zt+1].y,0,4)),H=0;4>H;H++)yt[tn+128+H]=yt[tn+256+H]=yt[tn+384+H]=yt[tn+0+H];for(H=0;16>H;++H,dt<<=2)yt=Ae,tn=ke+fh[H],Wo[Bt.Ob[H]](yt,tn),Ys(dt,$t,16*+H,yt,tn)}else if(yt=cl(se,be,Bt.Ob[0]),la[yt](Ae,ke),dt!=0)for(H=0;16>H;++H,dt<<=2)Ys(dt,$t,16*+H,Ae,ke+fh[H]);for(H=Bt.Gc,yt=cl(se,be,Bt.Dd),No[yt](Be,Ve),No[yt](ht,Dt),dt=$t,yt=Be,tn=Ve,255&(Bt=H>>0)&&(170&Bt?Pn(dt,256,yt,tn):wr(dt,256,yt,tn)),Bt=ht,dt=Dt,255&(H>>=8)&&(170&H?Pn($t,320,Bt,dt):wr($t,320,Bt,dt)),be<b.Ub-1&&(r(wt[Zt].y,0,Ae,ke+480,16),r(wt[Zt].f,0,Be,Ve+224,8),r(wt[Zt].ea,0,ht,Dt+224,8)),H=8*Ee*b.B,wt=b.sa,Zt=b.ta+16*se+16*Ee*b.R,$t=b.qa,Bt=b.ra+8*se+H,dt=b.Ha,yt=b.Ia+8*se+H,H=0;16>H;++H)r(wt,Zt+H*b.R,Ae,ke+32*H,16);for(H=0;8>H;++H)r($t,Bt+H*b.B,Be,Ve+32*H,8),r(dt,yt+H*b.B,ht,Dt+32*H,8)}}function ea(b,P,H,se,be,Ee,Ae,ke,Be){var Ve=[0],ht=[0],Dt=0,Bt=Be!=null?Be.kd:0,wt=Be??new Uo;if(b==null||12>H)return 7;wt.data=b,wt.w=P,wt.ha=H,P=[P],H=[H],wt.gb=[wt.gb];e:{var Zt=P,$t=H,dt=wt.gb;if(t(b!=null),t($t!=null),t(dt!=null),dt[0]=0,12<=$t[0]&&!n(b,Zt[0],"RIFF")){if(n(b,Zt[0]+8,"WEBP")){dt=3;break e}var yt=Z(b,Zt[0]+4);if(12>yt||4294967286<yt){dt=3;break e}if(Bt&&yt>$t[0]-8){dt=7;break e}dt[0]=yt,Zt[0]+=12,$t[0]-=12}dt=0}if(dt!=0)return dt;for(yt=0<wt.gb[0],H=H[0];;){e:{var tn=b;$t=P,dt=H;var hn=Ve,rn=ht,Mn=Zt=[0];if((l=Dt=[Dt])[0]=0,8>dt[0])dt=7;else{if(!n(tn,$t[0],"VP8X")){if(Z(tn,$t[0]+4)!=10){dt=3;break e}if(18>dt[0]){dt=7;break e}var Sn=Z(tn,$t[0]+8),Jn=1+We(tn,$t[0]+12);if(2147483648<=Jn*(tn=1+We(tn,$t[0]+15))){dt=3;break e}Mn!=null&&(Mn[0]=Sn),hn!=null&&(hn[0]=Jn),rn!=null&&(rn[0]=tn),$t[0]+=18,dt[0]-=18,l[0]=1}dt=0}}if(Dt=Dt[0],Zt=Zt[0],dt!=0)return dt;if($t=!!(2&Zt),!yt&&Dt)return 3;if(Ee!=null&&(Ee[0]=!!(16&Zt)),Ae!=null&&(Ae[0]=$t),ke!=null&&(ke[0]=0),Ae=Ve[0],Zt=ht[0],Dt&&$t&&Be==null){dt=0;break}if(4>H){dt=7;break}if(yt&&Dt||!yt&&!Dt&&!n(b,P[0],"ALPH")){H=[H],wt.na=[wt.na],wt.P=[wt.P],wt.Sa=[wt.Sa];e:{Sn=b,dt=P,yt=H;var l=wt.gb;hn=wt.na,rn=wt.P,Mn=wt.Sa,Jn=22,t(Sn!=null),t(yt!=null),tn=dt[0];var h=yt[0];for(t(hn!=null),t(Mn!=null),hn[0]=null,rn[0]=null,Mn[0]=0;;){if(dt[0]=tn,yt[0]=h,8>h){dt=7;break e}var v=Z(Sn,tn+4);if(4294967286<v){dt=3;break e}var x=8+v+1&-2;if(Jn+=x,0<l&&Jn>l){dt=3;break e}if(!n(Sn,tn,"VP8 ")||!n(Sn,tn,"VP8L")){dt=0;break e}if(h[0]<x){dt=7;break e}n(Sn,tn,"ALPH")||(hn[0]=Sn,rn[0]=tn+8,Mn[0]=v),tn+=x,h-=x}}if(H=H[0],wt.na=wt.na[0],wt.P=wt.P[0],wt.Sa=wt.Sa[0],dt!=0)break}H=[H],wt.Ja=[wt.Ja],wt.xa=[wt.xa];e:if(l=b,dt=P,yt=H,hn=wt.gb[0],rn=wt.Ja,Mn=wt.xa,Sn=dt[0],tn=!n(l,Sn,"VP8 "),Jn=!n(l,Sn,"VP8L"),t(l!=null),t(yt!=null),t(rn!=null),t(Mn!=null),8>yt[0])dt=7;else{if(tn||Jn){if(l=Z(l,Sn+4),12<=hn&&l>hn-12){dt=3;break e}if(Bt&&l>yt[0]-8){dt=7;break e}rn[0]=l,dt[0]+=8,yt[0]-=8,Mn[0]=Jn}else Mn[0]=5<=yt[0]&&l[Sn+0]==47&&!(l[Sn+4]>>5),rn[0]=yt[0];dt=0}if(H=H[0],wt.Ja=wt.Ja[0],wt.xa=wt.xa[0],P=P[0],dt!=0)break;if(4294967286<wt.Ja)return 3;if(ke==null||$t||(ke[0]=wt.xa?2:1),Ae=[Ae],Zt=[Zt],wt.xa){if(5>H){dt=7;break}ke=Ae,Bt=Zt,$t=Ee,b==null||5>H?b=0:5<=H&&b[P+0]==47&&!(b[P+4]>>5)?(yt=[0],l=[0],hn=[0],Y(rn=new T,b,P,H),vn(rn,yt,l,hn)?(ke!=null&&(ke[0]=yt[0]),Bt!=null&&(Bt[0]=l[0]),$t!=null&&($t[0]=hn[0]),b=1):b=0):b=0}else{if(10>H){dt=7;break}ke=Zt,b==null||10>H||!gs(b,P+3,H-3)?b=0:(Bt=b[P+0]|b[P+1]<<8|b[P+2]<<16,$t=16383&(b[P+7]<<8|b[P+6]),b=16383&(b[P+9]<<8|b[P+8]),1&Bt||3<(Bt>>1&7)||!(Bt>>4&1)||Bt>>5>=wt.Ja||!$t||!b?b=0:(Ae&&(Ae[0]=$t),ke&&(ke[0]=b),b=1))}if(!b||(Ae=Ae[0],Zt=Zt[0],Dt&&(Ve[0]!=Ae||ht[0]!=Zt)))return 3;Be!=null&&(Be[0]=wt,Be.offset=P-Be.w,t(4294967286>P-Be.w),t(Be.offset==Be.ha-H));break}return dt==0||dt==7&&Dt&&Be==null?(Ee!=null&&(Ee[0]|=wt.na!=null&&0<wt.na.length),se!=null&&(se[0]=Ae),be!=null&&(be[0]=Zt),0):dt}function wu(b,P,H){var se=P.width,be=P.height,Ee=0,Ae=0,ke=se,Be=be;if(P.Da=b!=null&&0<b.Da,P.Da&&(ke=b.cd,Be=b.bd,Ee=b.v,Ae=b.j,11>H||(Ee&=-2,Ae&=-2),0>Ee||0>Ae||0>=ke||0>=Be||Ee+ke>se||Ae+Be>be))return 0;if(P.v=Ee,P.j=Ae,P.va=Ee+ke,P.o=Ae+Be,P.U=ke,P.T=Be,P.da=b!=null&&0<b.da,P.da){if(!$e(ke,Be,H=[b.ib],Ee=[b.hb]))return 0;P.ib=H[0],P.hb=Ee[0]}return P.ob=b!=null&&b.ob,P.Kb=b==null||!b.Sd,P.da&&(P.ob=P.ib<3*se/4&&P.hb<3*be/4,P.Kb=0),1}function Va(b){if(b==null)return 2;if(11>b.S){var P=b.f.RGBA;P.fb+=(b.height-1)*P.A,P.A=-P.A}else P=b.f.kb,b=b.height,P.O+=(b-1)*P.fa,P.fa=-P.fa,P.N+=(b-1>>1)*P.Ab,P.Ab=-P.Ab,P.W+=(b-1>>1)*P.Db,P.Db=-P.Db,P.F!=null&&(P.J+=(b-1)*P.lb,P.lb=-P.lb);return 0}function Ha(b,P,H,se){if(se==null||0>=b||0>=P)return 2;if(H!=null){if(H.Da){var be=H.cd,Ee=H.bd,Ae=-2&H.v,ke=-2&H.j;if(0>Ae||0>ke||0>=be||0>=Ee||Ae+be>b||ke+Ee>P)return 2;b=be,P=Ee}if(H.da){if(!$e(b,P,be=[H.ib],Ee=[H.hb]))return 2;b=be[0],P=Ee[0]}}se.width=b,se.height=P;e:{var Be=se.width,Ve=se.height;if(b=se.S,0>=Be||0>=Ve||!(b>=co&&13>b))b=2;else{if(0>=se.Rd&&se.sd==null){Ae=Ee=be=P=0;var ht=(ke=Be*ph[b])*Ve;if(11>b||(Ee=(Ve+1)/2*(P=(Be+1)/2),b==12&&(Ae=(be=Be)*Ve)),(Ve=o(ht+2*Ee+Ae))==null){b=1;break e}se.sd=Ve,11>b?((Be=se.f.RGBA).eb=Ve,Be.fb=0,Be.A=ke,Be.size=ht):((Be=se.f.kb).y=Ve,Be.O=0,Be.fa=ke,Be.Fd=ht,Be.f=Ve,Be.N=0+ht,Be.Ab=P,Be.Cd=Ee,Be.ea=Ve,Be.W=0+ht+Ee,Be.Db=P,Be.Ed=Ee,b==12&&(Be.F=Ve,Be.J=0+ht+2*Ee),Be.Tc=Ae,Be.lb=be)}if(P=1,be=se.S,Ee=se.width,Ae=se.height,be>=co&&13>be)if(11>be)b=se.f.RGBA,P&=(ke=Math.abs(b.A))*(Ae-1)+Ee<=b.size,P&=ke>=Ee*ph[be],P&=b.eb!=null;else{b=se.f.kb,ke=(Ee+1)/2,ht=(Ae+1)/2,Be=Math.abs(b.fa),Ve=Math.abs(b.Ab);var Dt=Math.abs(b.Db),Bt=Math.abs(b.lb),wt=Bt*(Ae-1)+Ee;P&=Be*(Ae-1)+Ee<=b.Fd,P&=Ve*(ht-1)+ke<=b.Cd,P=(P&=Dt*(ht-1)+ke<=b.Ed)&Be>=Ee&Ve>=ke&Dt>=ke,P&=b.y!=null,P&=b.f!=null,P&=b.ea!=null,be==12&&(P&=Bt>=Ee,P&=wt<=b.Tc,P&=b.F!=null)}else P=0;b=P?0:2}}return b!=0||H!=null&&H.fd&&(b=Va(se)),b}var us=64,ta=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],So=24,lo=32,fl=8,Rs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];He("Predictor0","PredictorAdd0"),G.Predictor0=function(){return 4278190080},G.Predictor1=function(b){return b},G.Predictor2=function(b,P,H){return P[H+0]},G.Predictor3=function(b,P,H){return P[H+1]},G.Predictor4=function(b,P,H){return P[H-1]},G.Predictor5=function(b,P,H){return st(st(b,P[H+1]),P[H+0])},G.Predictor6=function(b,P,H){return st(b,P[H-1])},G.Predictor7=function(b,P,H){return st(b,P[H+0])},G.Predictor8=function(b,P,H){return st(P[H-1],P[H+0])},G.Predictor9=function(b,P,H){return st(P[H+0],P[H+1])},G.Predictor10=function(b,P,H){return st(st(b,P[H-1]),st(P[H+0],P[H+1]))},G.Predictor11=function(b,P,H){var se=P[H+0];return 0>=Ut(se>>24&255,b>>24&255,(P=P[H-1])>>24&255)+Ut(se>>16&255,b>>16&255,P>>16&255)+Ut(se>>8&255,b>>8&255,P>>8&255)+Ut(255&se,255&b,255&P)?se:b},G.Predictor12=function(b,P,H){var se=P[H+0];return(kt((b>>24&255)+(se>>24&255)-((P=P[H-1])>>24&255))<<24|kt((b>>16&255)+(se>>16&255)-(P>>16&255))<<16|kt((b>>8&255)+(se>>8&255)-(P>>8&255))<<8|kt((255&b)+(255&se)-(255&P)))>>>0},G.Predictor13=function(b,P,H){var se=P[H-1];return(Ct((b=st(b,P[H+0]))>>24&255,se>>24&255)<<24|Ct(b>>16&255,se>>16&255)<<16|Ct(b>>8&255,se>>8&255)<<8|Ct(b>>0&255,se>>0&255))>>>0};var Js=G.PredictorAdd0;G.PredictorAdd1=Gt,He("Predictor2","PredictorAdd2"),He("Predictor3","PredictorAdd3"),He("Predictor4","PredictorAdd4"),He("Predictor5","PredictorAdd5"),He("Predictor6","PredictorAdd6"),He("Predictor7","PredictorAdd7"),He("Predictor8","PredictorAdd8"),He("Predictor9","PredictorAdd9"),He("Predictor10","PredictorAdd10"),He("Predictor11","PredictorAdd11"),He("Predictor12","PredictorAdd12"),He("Predictor13","PredictorAdd13");var Xs=G.PredictorAdd2;it("ColorIndexInverseTransform","MapARGB","32b",function(b){return b>>8&255},function(b){return b}),it("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(b){return b},function(b){return b>>8&255});var Yu,_s=G.ColorIndexInverseTransform,ba=G.MapARGB,Fs=G.VP8LColorIndexInverseTransformAlpha,js=G.MapAlpha,wa=G.VP8LPredictorsAdd=[];wa.length=16,(G.VP8LPredictors=[]).length=16,(G.VP8LPredictorsAdd_C=[]).length=16,(G.VP8LPredictors_C=[]).length=16;var xa,zs,Ss,na,Co,$s,_t,qt,Mt,Pn,Zn,wr,ji,bi,Il,Qs,zi,ra,La,ia,sa,oa,Yr,Ho,Cs,wi,Ei,ns,Ni=o(511),Eo=o(2041),uo=o(225),Bo=o(767),xu=0,aa=Eo,cs=uo,Bi=Bo,Us=Ni,co=0,dr=1,Sa=2,Ca=3,Go=4,eo=5,bc=6,Es=7,Ps=8,qo=9,a=10,p=[2,3,7],S=[3,3,11],U=[280,256,256,256,40],ie=[0,1,1,1,0],Ce=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ot=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Pt=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],zt=8,on=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Dn=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Yn=null,Rr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],fs=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Wi=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ms=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],$i=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],fo=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],wc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],la=[],Wo=[],No=[],Af=1,tu=2,pi=[],Vs=[];jt("UpsampleRgbLinePair",zr,3),jt("UpsampleBgrLinePair",Ri,3),jt("UpsampleRgbaLinePair",Lo,4),jt("UpsampleBgraLinePair",ls,4),jt("UpsampleArgbLinePair",ts,4),jt("UpsampleRgba4444LinePair",_i,2),jt("UpsampleRgb565LinePair",hi,2);var Te=G.UpsampleRgbLinePair,ho=G.UpsampleBgrLinePair,Lu=G.UpsampleRgbaLinePair,As=G.UpsampleBgraLinePair,Ur=G.UpsampleArgbLinePair,Wc=G.UpsampleRgba4444LinePair,uh=G.UpsampleRgb565LinePair,Zc=16,Ga=1<<Zc-1,xc=-227,kf=482,pd=6,Ju=0,Kc=o(256),Rl=o(256),gd=o(256),Yc=o(256),Jc=o(kf-xc),ch=o(kf-xc);Is("YuvToRgbRow",zr,3),Is("YuvToBgrRow",Ri,3),Is("YuvToRgbaRow",Lo,4),Is("YuvToBgraRow",ls,4),Is("YuvToArgbRow",ts,4),Is("YuvToRgba4444Row",_i,2),Is("YuvToRgb565Row",hi,2);var fh=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ea=[0,2,8],hh=[8,7,6,4,4,2,2,2,1,1,1,1],dh=1;this.WebPDecodeRGBA=function(b,P,H,se,be){var Ee=dr,Ae=new Ls,ke=new cr;Ae.ba=ke,ke.S=Ee,ke.width=[ke.width],ke.height=[ke.height];var Be=ke.width,Ve=ke.height,ht=new yr;if(ht==null||b==null)var Dt=2;else t(ht!=null),Dt=ea(b,P,H,ht.width,ht.height,ht.Pd,ht.Qd,ht.format,null);if(Dt!=0?Be=0:(Be!=null&&(Be[0]=ht.width[0]),Ve!=null&&(Ve[0]=ht.height[0]),Be=1),Be){ke.width=ke.width[0],ke.height=ke.height[0],se!=null&&(se[0]=ke.width),be!=null&&(be[0]=ke.height);e:{if(se=new li,(be=new Uo).data=b,be.w=P,be.ha=H,be.kd=1,P=[0],t(be!=null),((b=ea(be.data,be.w,be.ha,null,null,null,P,null,be))==0||b==7)&&P[0]&&(b=4),(P=b)==0){if(t(Ae!=null),se.data=be.data,se.w=be.w+be.offset,se.ha=be.ha-be.offset,se.put=Wn,se.ac=ar,se.bc=Xt,se.ma=Ae,be.xa){if((b=rr())==null){Ae=1;break e}if(function(Bt,wt){var Zt=[0],$t=[0],dt=[0];t:for(;;){if(Bt==null)return 0;if(wt==null)return Bt.a=2,0;if(Bt.l=wt,Bt.a=0,Y(Bt.m,wt.data,wt.w,wt.ha),!vn(Bt.m,Zt,$t,dt)){Bt.a=3;break t}if(Bt.xb=tu,wt.width=Zt[0],wt.height=$t[0],!Or(Zt[0],$t[0],1,Bt,null))break t;return 1}return t(Bt.a!=0),0}(b,se)){if(se=(P=Ha(se.width,se.height,Ae.Oa,Ae.ba))==0){t:{se=b;n:for(;;){if(se==null){se=0;break t}if(t(se.s.yc!=null),t(se.s.Ya!=null),t(0<se.s.Wb),t((H=se.l)!=null),t((be=H.ma)!=null),se.xb!=0){if(se.ca=be.ba,se.tb=be.tb,t(se.ca!=null),!wu(be.Oa,H,Ca)){se.a=2;break n}if(!er(se,H.width)||H.da)break n;if((H.da||xn(se.ca.S))&&xt(),11>se.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),se.ca.f.kb.F!=null&&xt()),se.Pb&&0<se.s.ua&&se.s.vb.X==null&&!de(se.s.vb,se.s.Wa.Xa)){se.a=1;break n}se.xb=0}if(!lr(se,se.V,se.Ba,se.c,se.i,H.o,xr))break n;be.Dc=se.Ma,se=1;break t}t(se.a!=0),se=0}se=!se}se&&(P=b.a)}else P=b.a}else{if((b=new fr)==null){Ae=1;break e}if(b.Fa=be.na,b.P=be.P,b.qc=be.Sa,ms(b,se)){if((P=Ha(se.width,se.height,Ae.Oa,Ae.ba))==0){if(b.Aa=0,H=Ae.Oa,t((be=b)!=null),H!=null){if(0<(Be=0>(Be=H.Md)?0:100<Be?255:255*Be/100)){for(Ve=ht=0;4>Ve;++Ve)12>(Dt=be.pb[Ve]).lc&&(Dt.ia=Be*hh[0>Dt.lc?0:Dt.lc]>>3),ht|=Dt.ia;ht&&(alert("todo:VP8InitRandom"),be.ia=1)}be.Ga=H.Id,100<be.Ga?be.Ga=100:0>be.Ga&&(be.Ga=0)}Vn(b,se)||(P=b.a)}}else P=b.a}P==0&&Ae.Oa!=null&&Ae.Oa.fd&&(P=Va(Ae.ba))}Ae=P}Ee=Ae!=0?null:11>Ee?ke.f.RGBA.eb:ke.f.kb.y}else Ee=null;return Ee};var ph=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(G,I){for(var K="",$=0;$<4;$++)K+=String.fromCharCode(G[I++]);return K}function m(G,I){return(G[I+0]<<0|G[I+1]<<8|G[I+2]<<16)>>>0}function y(G,I){return(G[I+0]<<0|G[I+1]<<8|G[I+2]<<16|G[I+3]<<24)>>>0}new f;var w=[0],_=[0],M=[],k=new f,R=e,N=function(G,I){var K={},$=0,O=!1,z=0,V=0;if(K.frames=[],!function(ne,fe,ce,ye){for(var oe=0;oe<ye;oe++)if(ne[fe+oe]!=ce.charCodeAt(oe))return!0;return!1}(G,I,"RIFF",4)){var W,q;for(y(G,I+=4),I+=8;I<G.length;){var X=d(G,I),Y=y(G,I+=4);I+=4;var me=Y+(1&Y);switch(X){case"VP8 ":case"VP8L":K.frames[$]===void 0&&(K.frames[$]={}),(T=K.frames[$]).src_off=O?V:I-8,T.src_size=z+Y+8,$++,O&&(O=!1,z=0,V=0);break;case"VP8X":(T=K.header={}).feature_flags=G[I];var Se=I+4;T.canvas_width=1+m(G,Se),Se+=3,T.canvas_height=1+m(G,Se),Se+=3;break;case"ALPH":O=!0,z=me+8,V=I-8;break;case"ANIM":(T=K.header).bgcolor=y(G,I),Se=I+4,T.loop_count=(W=G)[(q=Se)+0]<<0|W[q+1]<<8,Se+=2;break;case"ANMF":var Re,T;(T=K.frames[$]={}).offset_x=2*m(G,I),I+=3,T.offset_y=2*m(G,I),I+=3,T.width=1+m(G,I),I+=3,T.height=1+m(G,I),I+=3,T.duration=m(G,I),I+=3,Re=G[I++],T.dispose=1&Re,T.blend=Re>>1&1}X!="ANMF"&&(I+=me)}return K}}(R,0);N.response=R,N.rgbaoutput=!0,N.dataurl=!1;var j=N.header?N.header:null,J=N.frames?N.frames:null;if(j){j.loop_counter=j.loop_count,w=[j.canvas_height],_=[j.canvas_width];for(var te=0;te<J.length&&J[te].blend!=0;te++);}var ae=J[0],le=k.WebPDecodeRGBA(R,ae.src_off,ae.src_size,_,w);ae.rgba=le,ae.imgwidth=_[0],ae.imgheight=w[0];for(var xe=0;xe<_[0]*w[0]*4;xe++)M[xe]=le[xe];return this.width=_,this.height=w,this.data=M,this}(function(e){var t=function(){return typeof w1=="function"},n=function(w,_,M,k){var R=4,N=s;switch(k){case e.image_compression.FAST:R=1,N=o;break;case e.image_compression.MEDIUM:R=6,N=u;break;case e.image_compression.SLOW:R=9,N=f}w=r(w,_,M,N);var j=w1(w,{level:R});return e.__addimage__.arrayBufferToBinaryString(j)},r=function(w,_,M,k){for(var R,N,j,J=w.length/_,te=new Uint8Array(w.length+J),ae=m(),le=0;le<J;le+=1){if(j=le*_,R=w.subarray(j,j+_),k)te.set(k(R,M,N),j+le);else{for(var xe,G=ae.length,I=[];xe<G;xe+=1)I[xe]=ae[xe](R,M,N);var K=y(I.concat());te.set(I[K],j+le)}N=R}return te},i=function(w){var _=Array.apply([],w);return _.unshift(0),_},o=function(w,_){var M,k=[],R=w.length;k[0]=1;for(var N=0;N<R;N+=1)M=w[N-_]||0,k[N+1]=w[N]-M+256&255;return k},s=function(w,_,M){var k,R=[],N=w.length;R[0]=2;for(var j=0;j<N;j+=1)k=M&&M[j]||0,R[j+1]=w[j]-k+256&255;return R},u=function(w,_,M){var k,R,N=[],j=w.length;N[0]=3;for(var J=0;J<j;J+=1)k=w[J-_]||0,R=M&&M[J]||0,N[J+1]=w[J]+256-(k+R>>>1)&255;return N},f=function(w,_,M){var k,R,N,j,J=[],te=w.length;J[0]=4;for(var ae=0;ae<te;ae+=1)k=w[ae-_]||0,R=M&&M[ae]||0,N=M&&M[ae-_]||0,j=d(k,R,N),J[ae+1]=w[ae]-j+256&255;return J},d=function(w,_,M){if(w===_&&_===M)return w;var k=Math.abs(_-M),R=Math.abs(w-M),N=Math.abs(w+_-M-M);return k<=R&&k<=N?w:R<=N?_:M},m=function(){return[i,o,s,u,f]},y=function(w){var _=w.map(function(M){return M.reduce(function(k,R){return k+Math.abs(R)},0)});return _.indexOf(Math.min.apply(null,_))};e.processPNG=function(w,_,M,k){var R,N,j,J,te,ae,le,xe,G,I,K,$,O,z,V,W=this.decode.FLATE_DECODE,q="";if(this.__addimage__.isArrayBuffer(w)&&(w=new Uint8Array(w)),this.__addimage__.isArrayBufferView(w)){if(w=(j=new NF(w)).imgData,N=j.bits,R=j.colorSpace,te=j.colors,[4,6].indexOf(j.colorType)!==-1){if(j.bits===8){G=(xe=j.pixelBitlength==32?new Uint32Array(j.decodePixels().buffer):j.pixelBitlength==16?new Uint16Array(j.decodePixels().buffer):new Uint8Array(j.decodePixels().buffer)).length,K=new Uint8Array(G*j.colors),I=new Uint8Array(G);var X,Y=j.pixelBitlength-j.bits;for(z=0,V=0;z<G;z++){for(O=xe[z],X=0;X<Y;)K[V++]=O>>>X&255,X+=j.bits;I[z]=O>>>X&255}}if(j.bits===16){G=(xe=new Uint32Array(j.decodePixels().buffer)).length,K=new Uint8Array(G*(32/j.pixelBitlength)*j.colors),I=new Uint8Array(G*(32/j.pixelBitlength)),$=j.colors>1,z=0,V=0;for(var me=0;z<G;)O=xe[z++],K[V++]=O>>>0&255,$&&(K[V++]=O>>>16&255,O=xe[z++],K[V++]=O>>>0&255),I[me++]=O>>>16&255;N=8}k!==e.image_compression.NONE&&t()?(w=n(K,j.width*j.colors,j.colors,k),le=n(I,j.width,1,k)):(w=K,le=I,W=void 0)}if(j.colorType===3&&(R=this.color_spaces.INDEXED,ae=j.palette,j.transparency.indexed)){var Se=j.transparency.indexed,Re=0;for(z=0,G=Se.length;z<G;++z)Re+=Se[z];if((Re/=255)===G-1&&Se.indexOf(0)!==-1)J=[Se.indexOf(0)];else if(Re!==G){for(xe=j.decodePixels(),I=new Uint8Array(xe.length),z=0,G=xe.length;z<G;z++)I[z]=Se[xe[z]];le=n(I,j.width,1)}}var T=function(ne){var fe;switch(ne){case e.image_compression.FAST:fe=11;break;case e.image_compression.MEDIUM:fe=13;break;case e.image_compression.SLOW:fe=14;break;default:fe=12}return fe}(k);return W===this.decode.FLATE_DECODE&&(q="/Predictor "+T+" "),q+="/Colors "+te+" /BitsPerComponent "+N+" /Columns "+j.width,(this.__addimage__.isArrayBuffer(w)||this.__addimage__.isArrayBufferView(w))&&(w=this.__addimage__.arrayBufferToBinaryString(w)),(le&&this.__addimage__.isArrayBuffer(le)||this.__addimage__.isArrayBufferView(le))&&(le=this.__addimage__.arrayBufferToBinaryString(le)),{alias:M,data:w,index:_,filter:W,decodeParameters:q,transparency:J,palette:ae,sMask:le,predictor:T,width:j.width,height:j.height,bitsPerComponent:N,colorSpace:R}}}})(Ar.API),function(e){e.processGIF89A=function(t,n,r,i){var o=new OF(t),s=o.width,u=o.height,f=[];o.decodeAndBlitFrameRGBA(0,f);var d={data:f,width:s,height:u},m=new gv(100).encode(d,100);return e.processJPEG.call(this,m,n,r,i)},e.processGIF87A=e.processGIF89A}(Ar.API),Bu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:r,blue:n,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Bu.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){is.log("bit decode error:"+n)}},Bu.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+8*i*4,u=0;u<8&&8*i+u<this.width;u++){var f=this.palette[o>>7-u&1];this.data[s+4*u]=f.blue,this.data[s+4*u+1]=f.green,this.data[s+4*u+2]=f.red,this.data[s+4*u+3]=255}n!==0&&(this.pos+=4-n)}},Bu.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++){var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+2*i*4,u=o>>4,f=15&o,d=this.palette[u];if(this.data[s]=d.blue,this.data[s+1]=d.green,this.data[s+2]=d.red,this.data[s+3]=255,2*i+1>=this.width)break;d=this.palette[f],this.data[s+4]=d.blue,this.data[s+4+1]=d.green,this.data[s+4+2]=d.red,this.data[s+4+3]=255}t!==0&&(this.pos+=4-t)}},Bu.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*r;if(i<this.palette.length){var s=this.palette[i];this.data[o]=s.red,this.data[o+1]=s.green,this.data[o+2]=s.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}e!==0&&(this.pos+=4-e)}},Bu.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&t)/t*255|0,u=(o>>5&t)/t*255|0,f=(o>>10&t)/t*255|0,d=o>>15?255:0,m=r*this.width*4+4*i;this.data[m]=f,this.data[m+1]=u,this.data[m+2]=s,this.data[m+3]=d}this.pos+=e}},Bu.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(s&t)/t*255|0,f=(s>>5&n)/n*255|0,d=(s>>11)/t*255|0,m=i*this.width*4+4*o;this.data[m]=d,this.data[m+1]=f,this.data[m+2]=u,this.data[m+3]=255}this.pos+=e}},Bu.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*n;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=255}this.pos+=this.width%4}},Bu.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),u=t*this.width*4+4*n;this.data[u]=o,this.data[u+1]=i,this.data[u+2]=r,this.data[u+3]=s}},Bu.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,i){var o=new Bu(t,!1),s=o.width,u=o.height,f={data:o.getData(),width:s,height:u},d=new gv(100).encode(f,100);return e.processJPEG.call(this,d,n,r,i)}}(Ar.API),zb.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,i){var o=new zb(t),s=o.width,u=o.height,f={data:o.getData(),width:s,height:u},d=new gv(100).encode(f,100);return e.processJPEG.call(this,d,n,r,i)}}(Ar.API),Ar.API.processRGBA=function(e,t,n){for(var r=e.data,i=r.length,o=new Uint8Array(i/4*3),s=new Uint8Array(i/4),u=0,f=0,d=0;d<i;d+=4){var m=r[d],y=r[d+1],w=r[d+2],_=r[d+3];o[u++]=m,o[u++]=y,o[u++]=w,s[f++]=_}var M=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:M,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Ar.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},kh=Ar.API,b0=kh.getCharWidthsArray=function(e,t){var n,r,i=(t=t||{}).font||this.internal.getFont(),o=t.fontSize||this.internal.getFontSize(),s=t.charSpace||this.internal.getCharSpace(),u=t.widths?t.widths:i.metadata.Unicode.widths,f=u.fof?u.fof:1,d=t.kerning?t.kerning:i.metadata.Unicode.kerning,m=d.fof?d.fof:1,y=t.doKerning!==!1,w=0,_=e.length,M=0,k=u[0]||f,R=[];for(n=0;n<_;n++)r=e.charCodeAt(n),typeof i.metadata.widthOfString=="function"?R.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+s*(1e3/o)||0)/1e3):(w=y&&Zi(d[r])==="object"&&!isNaN(parseInt(d[r][M],10))?d[r][M]/m:0,R.push((u[r]||k)/f+w)),M=r;return R},Ib=kh.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return kh.processArabic&&(e=kh.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,n,i)/n:b0.apply(this,arguments).reduce(function(o,s){return o+s},0)},Rb=function(e,t,n,r){for(var i=[],o=0,s=e.length,u=0;o!==s&&u+t[o]<n;)u+=t[o],o++;i.push(e.slice(0,o));var f=o;for(u=0;o!==s;)u+t[o]>r&&(i.push(e.slice(f,o)),u=0,f=o),u+=t[o],o++;return f!==o&&i.push(e.slice(f,o)),i},Fb=function(e,t,n){n||(n={});var r,i,o,s,u,f,d,m=[],y=[m],w=n.textIndent||0,_=0,M=0,k=e.split(" "),R=b0.apply(this,[" ",n])[0];if(f=n.lineIndent===-1?k[0].length+2:n.lineIndent||0){var N=Array(f).join(" "),j=[];k.map(function(te){(te=te.split(/\s*\n/)).length>1?j=j.concat(te.map(function(ae,le){return(le&&ae.length?`
`:"")+ae})):j.push(te[0])}),k=j,f=Ib.apply(this,[N,n])}for(o=0,s=k.length;o<s;o++){var J=0;if(r=k[o],f&&r[0]==`
`&&(r=r.substr(1),J=1),w+_+(M=(i=b0.apply(this,[r,n])).reduce(function(te,ae){return te+ae},0))>t||J){if(M>t){for(u=Rb.apply(this,[r,i,t-(w+_),t]),m.push(u.shift()),m=[u.pop()];u.length;)y.push([u.shift()]);M=i.slice(r.length-(m[0]?m[0].length:0)).reduce(function(te,ae){return te+ae},0)}else m=[r];y.push(m),w=M+f,_=R}else m.push(r),w+=_+M,_=R}return d=f?function(te,ae){return(ae?N:"")+te.join(" ")}:function(te){return te.join(" ")},y.map(d)},kh.splitTextToSize=function(e,t,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),o=(function(m){if(m.widths&&m.kerning)return{widths:m.widths,kerning:m.kerning};var y=this.internal.getFont(m.fontName,m.fontStyle);return y.metadata.Unicode?{widths:y.metadata.Unicode.widths||{0:1},kerning:y.metadata.Unicode.kerning||{}}:{font:y.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var s=1*this.internal.scaleFactor*t/i;o.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=n.lineIndent;var u,f,d=[];for(u=0,f=r.length;u<f;u++)d=d.concat(Fb.apply(this,[r[u],s,o]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},r={},i=0;i<t.length;i++)n[t[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=t[i];var o=function(y){return"0x"+parseInt(y,10).toString(16)},s=e.__fontmetrics__.compress=function(y){var w,_,M,k,R=["{"];for(var N in y){if(w=y[N],isNaN(parseInt(N,10))?_="'"+N+"'":(N=parseInt(N,10),_=(_=o(N).slice(2)).slice(0,-1)+r[_.slice(-1)]),typeof w=="number")w<0?(M=o(w).slice(3),k="-"):(M=o(w).slice(2),k=""),M=k+M.slice(0,-1)+r[M.slice(-1)];else{if(Zi(w)!=="object")throw new Error("Don't know what to do with value type "+Zi(w)+".");M=s(w)}R.push(_+M)}return R.push("}"),R.join("")},u=e.__fontmetrics__.uncompress=function(y){if(typeof y!="string")throw new Error("Invalid argument passed to uncompress.");for(var w,_,M,k,R={},N=1,j=R,J=[],te="",ae="",le=y.length-1,xe=1;xe<le;xe+=1)(k=y[xe])=="'"?w?(M=w.join(""),w=void 0):w=[]:w?w.push(k):k=="{"?(J.push([j,M]),j={},M=void 0):k=="}"?((_=J.pop())[0][_[1]]=j,M=void 0,j=_[0]):k=="-"?N=-1:M===void 0?n.hasOwnProperty(k)?(te+=n[k],M=parseInt(te,16)*N,N=1,te=""):te+=k:n.hasOwnProperty(k)?(ae+=n[k],j[M]=parseInt(ae,16)*N,N=1,M=void 0,ae=""):ae+=k;return R},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},m={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(y){var w=y.font,_=m.Unicode[w.postScriptName];_&&(w.metadata.Unicode={},w.metadata.Unicode.widths=_.widths,w.metadata.Unicode.kerning=_.kerning);var M=d.Unicode[w.postScriptName];M&&(w.metadata.Unicode.encoding=M,w.encoding=M.codePages[0])}])}(Ar.API),function(e){var t=function(n){for(var r=n.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=n.charCodeAt(o);return i};e.API.events.push(["addFont",function(n){var r=void 0,i=n.font,o=n.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(s,u){u=/^\x00\x01\x00\x00/.test(u)?t(u):t(rp(u)),s.metadata=e.API.TTFFont.open(u),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(i,r)}}])}(Ar),function(e){function t(){return(Br.canvg?Promise.resolve(Br.canvg):Yf(()=>import("./index.es.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}Ar.API.addSvgAsImage=function(n,r,i,o,s,u,f,d){if(isNaN(r)||isNaN(i))throw is.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(s))throw is.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var m=document.createElement("canvas");m.width=o,m.height=s;var y=m.getContext("2d");y.fillStyle="#fff",y.fillRect(0,0,m.width,m.height);var w={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},_=this;return t().then(function(M){return M.fromString(y,n,w)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(M){return M.render(w)}).then(function(){_.addImage(m.toDataURL("image/jpeg",1),r,i,o,s,f,d)})}}(),Ar.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(t,n);return this},Ar.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,i,o,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(s),f=[],d=0,m=0,y=0;function w(M,k){var R,N=!1;for(R=0;R<M.length;R+=1)M[R]===k&&(N=!0);return N}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var _=u.length;for(y=0;y<_;y+=1)n[u[y]].value=n[u[y]].defaultValue,n[u[y]].explicitSet=!1}if(Zi(e)==="object"){for(i in e)if(o=e[i],w(u,i)&&o!==void 0){if(n[i].type==="boolean"&&typeof o=="boolean")n[i].value=o;else if(n[i].type==="name"&&w(n[i].valueSet,o))n[i].value=o;else if(n[i].type==="integer"&&Number.isInteger(o))n[i].value=o;else if(n[i].type==="array"){for(d=0;d<o.length;d+=1)if(r=!0,o[d].length===1&&typeof o[d][0]=="number")f.push(String(o[d]-1));else if(o[d].length>1){for(m=0;m<o[d].length;m+=1)typeof o[d][m]!="number"&&(r=!1);r===!0&&f.push([o[d][0]-1,o[d][1]-1].join(" "))}n[i].value="["+f.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var M,k=[];for(M in n)n[M].explicitSet===!0&&(n[M].type==="name"?k.push("/"+M+" /"+n[M].value):k.push("/"+M+" "+n[M].value));k.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+k.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),f=unescape(encodeURIComponent("</x:xmpmeta>")),d=o.length+s.length+u.length+i.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(i+o+s+u+f),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(Ar.API),function(e){var t=e.API,n=t.pdfEscape16=function(o,s){for(var u,f=s.metadata.Unicode.widths,d=["","0","00","000","0000"],m=[""],y=0,w=o.length;y<w;++y){if(u=s.metadata.characterToGlyph(o.charCodeAt(y)),s.metadata.glyIdsUsed.push(u),s.metadata.toUnicode[u]=o.charCodeAt(y),f.indexOf(u)==-1&&(f.push(u),f.push([parseInt(s.metadata.widthOfGlyph(u),10)])),u=="0")return m.join("");u=u.toString(16),m.push(d[4-u.length],u)}return m.join("")},r=function(o){var s,u,f,d,m,y,w;for(m=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,f=[],y=0,w=(u=Object.keys(o).sort(function(_,M){return _-M})).length;y<w;y++)s=u[y],f.length>=100&&(m+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar`,f=[]),o[s]!==void 0&&o[s]!==null&&typeof o[s].toString=="function"&&(d=("0000"+o[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),f.push("<"+s+"><"+d+">"));return f.length&&(m+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar
`),m+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(o){(function(s){var u=s.font,f=s.out,d=s.newObject,m=s.putStream;if(u.metadata instanceof e.API.TTFFont&&u.encoding==="Identity-H"){for(var y=u.metadata.Unicode.widths,w=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),_="",M=0;M<w.length;M++)_+=String.fromCharCode(w[M]);var k=d();m({data:_,addLength1:!0,objectId:k}),f("endobj");var R=d();m({data:r(u.metadata.toUnicode),addLength1:!0,objectId:R}),f("endobj");var N=d();f("<<"),f("/Type /FontDescriptor"),f("/FontName /"+jh(u.fontName)),f("/FontFile2 "+k+" 0 R"),f("/FontBBox "+e.API.PDFObject.convert(u.metadata.bbox)),f("/Flags "+u.metadata.flags),f("/StemV "+u.metadata.stemV),f("/ItalicAngle "+u.metadata.italicAngle),f("/Ascent "+u.metadata.ascender),f("/Descent "+u.metadata.decender),f("/CapHeight "+u.metadata.capHeight),f(">>"),f("endobj");var j=d();f("<<"),f("/Type /Font"),f("/BaseFont /"+jh(u.fontName)),f("/FontDescriptor "+N+" 0 R"),f("/W "+e.API.PDFObject.convert(y)),f("/CIDToGIDMap /Identity"),f("/DW 1000"),f("/Subtype /CIDFontType2"),f("/CIDSystemInfo"),f("<<"),f("/Supplement 0"),f("/Registry (Adobe)"),f("/Ordering ("+u.encoding+")"),f(">>"),f(">>"),f("endobj"),u.objectNumber=d(),f("<<"),f("/Type /Font"),f("/Subtype /Type0"),f("/ToUnicode "+R+" 0 R"),f("/BaseFont /"+jh(u.fontName)),f("/Encoding /"+u.encoding),f("/DescendantFonts ["+j+" 0 R]"),f(">>"),f("endobj"),u.isAlreadyPutted=!0}})(o)}]),t.events.push(["putFont",function(o){(function(s){var u=s.font,f=s.out,d=s.newObject,m=s.putStream;if(u.metadata instanceof e.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var y=u.metadata.rawData,w="",_=0;_<y.length;_++)w+=String.fromCharCode(y[_]);var M=d();m({data:w,addLength1:!0,objectId:M}),f("endobj");var k=d();m({data:r(u.metadata.toUnicode),addLength1:!0,objectId:k}),f("endobj");var R=d();f("<<"),f("/Descent "+u.metadata.decender),f("/CapHeight "+u.metadata.capHeight),f("/StemV "+u.metadata.stemV),f("/Type /FontDescriptor"),f("/FontFile2 "+M+" 0 R"),f("/Flags 96"),f("/FontBBox "+e.API.PDFObject.convert(u.metadata.bbox)),f("/FontName /"+jh(u.fontName)),f("/ItalicAngle "+u.metadata.italicAngle),f("/Ascent "+u.metadata.ascender),f(">>"),f("endobj"),u.objectNumber=d();for(var N=0;N<u.metadata.hmtx.widths.length;N++)u.metadata.hmtx.widths[N]=parseInt(u.metadata.hmtx.widths[N]*(1e3/u.metadata.head.unitsPerEm));f("<</Subtype/TrueType/Type/Font/ToUnicode "+k+" 0 R/BaseFont/"+jh(u.fontName)+"/FontDescriptor "+R+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),f("endobj"),u.isAlreadyPutted=!0}})(o)}]);var i=function(o){var s,u=o.text||"",f=o.x,d=o.y,m=o.options||{},y=o.mutex||{},w=y.pdfEscape,_=y.activeFontKey,M=y.fonts,k=_,R="",N=0,j="",J=M[k].encoding;if(M[k].encoding!=="Identity-H")return{text:u,x:f,y:d,options:m,mutex:y};for(j=u,k=_,Array.isArray(u)&&(j=u[0]),N=0;N<j.length;N+=1)M[k].metadata.hasOwnProperty("cmap")&&(s=M[k].metadata.cmap.unicode.codeMap[j[N].charCodeAt(0)]),s||j[N].charCodeAt(0)<256&&M[k].metadata.hasOwnProperty("Unicode")?R+=j[N]:R+="";var te="";return parseInt(k.slice(1))<14||J==="WinAnsiEncoding"?te=w(R,k).split("").map(function(ae){return ae.charCodeAt(0).toString(16)}).join(""):J==="Identity-H"&&(te=n(R,M[k])),y.isHex=!0,{text:te,x:f,y:d,options:m,mutex:y}};t.events.push(["postProcessText",function(o){var s=o.text||"",u=[],f={text:s,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(s)){var d=0;for(d=0;d<s.length;d+=1)Array.isArray(s[d])&&s[d].length===3?u.push([i(Object.assign({},f,{text:s[d][0]})).text,s[d][1],s[d][2]]):u.push(i(Object.assign({},f,{text:s[d]})).text);o.text=u}else o.text=i(Object.assign({},f,{text:s})).text}])}(Ar),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,r){return t.call(this),this.internal.vFS[n]=r,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Ar.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var i,o,s,u,f,d,m,y=t,w=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],_=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],M={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},k={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},R=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],N=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),j=!1,J=0;this.__bidiEngine__={};var te=function($){var O=$.charCodeAt(),z=O>>8,V=k[z];return V!==void 0?y[256*V+(255&O)]:z===252||z===253?"AL":N.test(z)?"L":z===8?"R":"N"},ae=function($){for(var O,z=0;z<$.length;z++){if((O=te($.charAt(z)))==="L")return!1;if(O==="R")return!0}return!1},le=function($,O,z,V){var W,q,X,Y,me=O[V];switch(me){case"L":case"R":j=!1;break;case"N":case"AN":break;case"EN":j&&(me="AN");break;case"AL":j=!0,me="R";break;case"WS":me="N";break;case"CS":V<1||V+1>=O.length||(W=z[V-1])!=="EN"&&W!=="AN"||(q=O[V+1])!=="EN"&&q!=="AN"?me="N":j&&(q="AN"),me=q===W?q:"N";break;case"ES":me=(W=V>0?z[V-1]:"B")==="EN"&&V+1<O.length&&O[V+1]==="EN"?"EN":"N";break;case"ET":if(V>0&&z[V-1]==="EN"){me="EN";break}if(j){me="N";break}for(X=V+1,Y=O.length;X<Y&&O[X]==="ET";)X++;me=X<Y&&O[X]==="EN"?"EN":"N";break;case"NSM":if(s&&!u){for(Y=O.length,X=V+1;X<Y&&O[X]==="NSM";)X++;if(X<Y){var Se=$[V],Re=Se>=1425&&Se<=2303||Se===64286;if(W=O[X],Re&&(W==="R"||W==="AL")){me="R";break}}}me=V<1||(W=O[V-1])==="B"?"N":z[V-1];break;case"B":j=!1,i=!0,me=J;break;case"S":o=!0,me="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":j=!1;break;case"BN":me="N"}return me},xe=function($,O,z){var V=$.split("");return z&&G(V,z,{hiLevel:J}),V.reverse(),O&&O.reverse(),V.join("")},G=function($,O,z){var V,W,q,X,Y,me=-1,Se=$.length,Re=0,T=[],ne=J?_:w,fe=[];for(j=!1,i=!1,o=!1,W=0;W<Se;W++)fe[W]=te($[W]);for(q=0;q<Se;q++){if(Y=Re,T[q]=le($,fe,T,q),V=240&(Re=ne[Y][M[T[q]]]),Re&=15,O[q]=X=ne[Re][5],V>0)if(V===16){for(W=me;W<q;W++)O[W]=1;me=-1}else me=-1;if(ne[Re][6])me===-1&&(me=q);else if(me>-1){for(W=me;W<q;W++)O[W]=X;me=-1}fe[q]==="B"&&(O[q]=0),z.hiLevel|=X}o&&function(ce,ye,oe){for(var B=0;B<oe;B++)if(ce[B]==="S"){ye[B]=J;for(var ue=B-1;ue>=0&&ce[ue]==="WS";ue--)ye[ue]=J}}(fe,O,Se)},I=function($,O,z,V,W){if(!(W.hiLevel<$)){if($===1&&J===1&&!i)return O.reverse(),void(z&&z.reverse());for(var q,X,Y,me,Se=O.length,Re=0;Re<Se;){if(V[Re]>=$){for(Y=Re+1;Y<Se&&V[Y]>=$;)Y++;for(me=Re,X=Y-1;me<X;me++,X--)q=O[me],O[me]=O[X],O[X]=q,z&&(q=z[me],z[me]=z[X],z[X]=q);Re=Y}Re++}}},K=function($,O,z){var V=$.split(""),W={hiLevel:J};return z||(z=[]),G(V,z,W),function(q,X,Y){if(Y.hiLevel!==0&&m)for(var me,Se=0;Se<q.length;Se++)X[Se]===1&&(me=R.indexOf(q[Se]))>=0&&(q[Se]=R[me+1])}(V,z,W),I(2,V,O,z,W),I(1,V,O,z,W),V.join("")};return this.__bidiEngine__.doBidiReorder=function($,O,z){if(function(W,q){if(q)for(var X=0;X<W.length;X++)q[X]=X;u===void 0&&(u=ae(W)),d===void 0&&(d=ae(W))}($,O),s||!f||d)if(s&&f&&u^d)J=u?1:0,$=xe($,O,z);else if(!s&&f&&d)J=u?1:0,$=K($,O,z),$=xe($,O);else if(!s||u||f||d){if(s&&!f&&u^d)$=xe($,O),u?(J=0,$=K($,O,z)):(J=1,$=K($,O,z),$=xe($,O));else if(s&&u&&!f&&d)J=1,$=K($,O,z),$=xe($,O);else if(!s&&!f&&u^d){var V=m;u?(J=1,$=K($,O,z),J=0,m=!1,$=K($,O,z),m=V):(J=0,$=K($,O,z),$=xe($,O),J=1,m=!1,$=K($,O,z),m=V,$=xe($,O))}}else J=0,$=K($,O,z);else J=u?1:0,$=K($,O,z);return $},this.__bidiEngine__.setOptions=function($){$&&(s=$.isInputVisual,f=$.isOutputVisual,u=$.isInputRtl,d=$.isOutputRtl,m=$.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var i=r.text,o=(r.x,r.y,r.options||{}),s=(r.mutex,o.lang,[]);if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,n.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var u=0;for(s=[],u=0;u<i.length;u+=1)Object.prototype.toString.call(i[u])==="[object Array]"?s.push([n.doBidiReorder(i[u][0]),i[u][1],i[u][2]]):s.push([n.doBidiReorder(i[u])]);r.text=s}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(Ar),Ar.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new Ef(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new YF(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new IF(this.contents),this.head=new FF(this),this.name=new VF(this),this.cmap=new Ox(this),this.toUnicode={},this.hhea=new jF(this),this.maxp=new HF(this),this.hmtx=new GF(this),this.post=new $F(this),this.os2=new zF(this),this.loca=new KF(this),this.glyf=new qF(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,r,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,u,f,d;for(d=[],s=0,u=(f=this.bbox).length;s<u;s++)t=f[s],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,r){var i,o,s,u;for(s=0,o=0,u=(t=""+t).length;0<=u?o<u:o>u;o=0<=u?++o:--o)i=t.charCodeAt(o),s+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return s*(n/1e3)},e.prototype.lineHeight=function(t,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var Wu,Ef=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,r;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var n,r,i;for(i=[],n=0,r=t.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(t.charCodeAt(n)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,r,i,o,s,u,f;return t=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),s=this.readByte(),u=this.readByte(),f=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^o)+65536*(255^s)+256*(255^u)+(255^f)+1):72057594037927940*t+281474976710656*n+1099511627776*r+4294967296*i+16777216*o+65536*s+256*u+f},e.prototype.writeLongLong=function(t){var n,r;return n=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,r;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push(this.readByte());return n},e.prototype.write=function(t){var n,r,i,o;for(o=[],r=0,i=t.length;r<i;r++)n=t[r],o.push(this.writeByte(n));return o},e}(),IF=function(){var e;function t(n){var r,i,o;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(n){var r,i,o,s,u,f,d,m,y,w,_,M,k;for(k in _=Object.keys(n).length,f=Math.log(2),y=16*Math.floor(Math.log(_)/f),s=Math.floor(y/f),m=16*_-y,(i=new Ef).writeInt(this.scalarType),i.writeShort(_),i.writeShort(y),i.writeShort(s),i.writeShort(m),o=16*_,d=i.pos+o,u=null,M=[],n)for(w=n[k],i.writeString(k),i.writeInt(e(w)),i.writeInt(d),i.writeInt(w.length),M=M.concat(w),k==="head"&&(u=d),d+=w.length;d%4;)M.push(0),d++;return i.write(M),r=2981146554-e(i.data),i.pos=u+8,i.writeUInt32(r),i.data},e=function(n){var r,i,o,s;for(n=Ix.call(n);n.length%4;)n.push(0);for(o=new Ef(n),i=0,r=0,s=n.length;r<s;r=r+=4)i+=o.readUInt32();return 4294967295&i},t}(),RF={}.hasOwnProperty,_c=function(e,t){for(var n in t)RF.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};Wu=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var FF=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _c(t,Wu),t.prototype.tag="head",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},t.prototype.encode=function(n){var r;return(r=new Ef).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},t}(),$b=function(){function e(t,n){var r,i,o,s,u,f,d,m,y,w,_,M,k,R,N,j,J;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),y=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(f=0;f<256;++f)this.codeMap[f]=t.readByte();break;case 4:for(_=t.readUInt16(),w=_/2,t.pos+=6,o=function(){var te,ae;for(ae=[],f=te=0;0<=w?te<w:te>w;f=0<=w?++te:--te)ae.push(t.readUInt16());return ae}(),t.pos+=2,k=function(){var te,ae;for(ae=[],f=te=0;0<=w?te<w:te>w;f=0<=w?++te:--te)ae.push(t.readUInt16());return ae}(),d=function(){var te,ae;for(ae=[],f=te=0;0<=w?te<w:te>w;f=0<=w?++te:--te)ae.push(t.readUInt16());return ae}(),m=function(){var te,ae;for(ae=[],f=te=0;0<=w?te<w:te>w;f=0<=w?++te:--te)ae.push(t.readUInt16());return ae}(),i=(this.length-t.pos+this.offset)/2,u=function(){var te,ae;for(ae=[],f=te=0;0<=i?te<i:te>i;f=0<=i?++te:--te)ae.push(t.readUInt16());return ae}(),f=N=0,J=o.length;N<J;f=++N)for(R=o[f],r=j=M=k[f];M<=R?j<=R:j>=R;r=M<=R?++j:--j)m[f]===0?s=r+d[f]:(s=u[m[f]/2+(r-M)-(w-f)]||0)!==0&&(s+=d[f]),this.codeMap[r]=65535&s}t.pos=y}return e.encode=function(t,n){var r,i,o,s,u,f,d,m,y,w,_,M,k,R,N,j,J,te,ae,le,xe,G,I,K,$,O,z,V,W,q,X,Y,me,Se,Re,T,ne,fe,ce,ye,oe,B,ue,De,Me,We;switch(V=new Ef,s=Object.keys(t).sort(function(Z,de){return Z-de}),n){case"macroman":for(k=0,R=function(){var Z=[];for(M=0;M<256;++M)Z.push(0);return Z}(),j={0:0},o={},W=0,me=s.length;W<me;W++)j[ue=t[i=s[W]]]==null&&(j[ue]=++k),o[i]={old:t[i],new:j[t[i]]},R[i]=j[t[i]];return V.writeUInt16(1),V.writeUInt16(0),V.writeUInt32(12),V.writeUInt16(0),V.writeUInt16(262),V.writeUInt16(0),V.write(R),{charMap:o,subtable:V.data,maxGlyphID:k+1};case"unicode":for(O=[],y=[],J=0,j={},r={},N=d=null,q=0,Se=s.length;q<Se;q++)j[ae=t[i=s[q]]]==null&&(j[ae]=++J),r[i]={old:ae,new:j[ae]},u=j[ae]-i,N!=null&&u===d||(N&&y.push(N),O.push(i),d=u),N=i;for(N&&y.push(N),y.push(65535),O.push(65535),K=2*(I=O.length),G=2*Math.pow(Math.log(I)/Math.LN2,2),w=Math.log(G/2)/Math.LN2,xe=2*I-G,f=[],le=[],_=[],M=X=0,Re=O.length;X<Re;M=++X){if($=O[M],m=y[M],$===65535){f.push(0),le.push(0);break}if($-(z=r[$].new)>=32768)for(f.push(0),le.push(2*(_.length+I-M)),i=Y=$;$<=m?Y<=m:Y>=m;i=$<=m?++Y:--Y)_.push(r[i].new);else f.push(z-$),le.push(0)}for(V.writeUInt16(3),V.writeUInt16(1),V.writeUInt32(12),V.writeUInt16(4),V.writeUInt16(16+8*I+2*_.length),V.writeUInt16(0),V.writeUInt16(K),V.writeUInt16(G),V.writeUInt16(w),V.writeUInt16(xe),oe=0,T=y.length;oe<T;oe++)i=y[oe],V.writeUInt16(i);for(V.writeUInt16(0),B=0,ne=O.length;B<ne;B++)i=O[B],V.writeUInt16(i);for(De=0,fe=f.length;De<fe;De++)u=f[De],V.writeUInt16(u);for(Me=0,ce=le.length;Me<ce;Me++)te=le[Me],V.writeUInt16(te);for(We=0,ye=_.length;We<ye;We++)k=_[We],V.writeUInt16(k);return{charMap:r,subtable:V.data,maxGlyphID:J+1}}},e}(),Ox=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _c(t,Wu),t.prototype.tag="cmap",t.prototype.parse=function(n){var r,i,o;for(n.pos=this.offset,this.version=n.readUInt16(),o=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=o?i<o:i>o;i=0<=o?++i:--i)r=new $b(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(n,r){var i,o;return r==null&&(r="macroman"),i=$b.encode(n,r),(o=new Ef).writeUInt16(0),o.writeUInt16(1),i.table=o.data.concat(i.subtable),i},t}(),jF=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _c(t,Wu),t.prototype.tag="hhea",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},t}(),zF=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _c(t,Wu),t.prototype.tag="OS/2",t.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},t}(),$F=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _c(t,Wu),t.prototype.tag="post",t.prototype.parse=function(n){var r,i,o;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var s;for(i=n.readUInt16(),this.glyphNameIndex=[],s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],o=[];n.pos<this.offset+this.length;)r=n.readByte(),o.push(this.names.push(n.readString(r)));return o;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var u,f,d;for(d=[],s=u=0,f=this.file.maxp.numGlyphs;0<=f?u<f:u>f;s=0<=f?++u:--u)d.push(n.readUInt32());return d}).call(this)}},t}(),UF=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},VF=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _c(t,Wu),t.prototype.tag="name",t.prototype.parse=function(n){var r,i,o,s,u,f,d,m,y,w,_;for(n.pos=this.offset,n.readShort(),r=n.readShort(),f=n.readShort(),i=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+f+n.readShort()});for(d={},s=y=0,w=i.length;y<w;s=++y)o=i[s],n.pos=o.offset,m=n.readString(o.length),u=new UF(m,o),d[_=o.nameID]==null&&(d[_]=[]),d[o.nameID].push(u);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t}(),HF=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _c(t,Wu),t.prototype.tag="maxp",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},t}(),GF=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _c(t,Wu),t.prototype.tag="hmtx",t.prototype.parse=function(n){var r,i,o,s,u,f,d;for(n.pos=this.offset,this.metrics=[],r=0,f=this.file.hhea.numberOfMetrics;0<=f?r<f:r>f;r=0<=f?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var m,y;for(y=[],r=m=0;0<=o?m<o:m>o;r=0<=o?++m:--m)y.push(n.readInt16());return y}(),this.widths=(function(){var m,y,w,_;for(_=[],m=0,y=(w=this.metrics).length;m<y;m++)s=w[m],_.push(s.advance);return _}).call(this),i=this.widths[this.widths.length-1],d=[],r=u=0;0<=o?u<o:u>o;r=0<=o?++u:--u)d.push(this.widths.push(i));return d},t.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},t}(),Ix=[].slice,qF=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _c(t,Wu),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(n){var r,i,o,s,u,f,d,m,y,w;return n in this.cache?this.cache[n]:(s=this.file.loca,r=this.file.contents,i=s.indexOf(n),(o=s.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,u=(f=new Ef(r.read(o))).readShort(),m=f.readShort(),w=f.readShort(),d=f.readShort(),y=f.readShort(),this.cache[n]=u===-1?new ZF(f,m,w,d,y):new WF(f,u,m,w,d,y),this.cache[n]))},t.prototype.encode=function(n,r,i){var o,s,u,f,d;for(u=[],s=[],f=0,d=r.length;f<d;f++)o=n[r[f]],s.push(u.length),o&&(u=u.concat(o.encode(i)));return s.push(u.length),{table:u,offsets:s}},t}(),WF=function(){function e(t,n,r,i,o,s){this.raw=t,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=o,this.yMax=s,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),ZF=function(){function e(t,n,r,i,o){var s,u;for(this.raw=t,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;u=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&u;)s.pos+=1&u?4:2,128&u?s.pos+=8:64&u?s.pos+=4:8&u&&(s.pos+=2)}return e.prototype.encode=function(){var t,n,r;for(n=new Ef(Ix.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),KF=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _c(t,Wu),t.prototype.tag="loca",t.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var o,s;for(s=[],i=0,o=this.length;i<o;i+=2)s.push(2*n.readUInt16());return s}).call(this):(function(){var o,s;for(s=[],i=0,o=this.length;i<o;i+=4)s.push(n.readUInt32());return s}).call(this)},t.prototype.indexOf=function(n){return this.offsets[n]},t.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},t.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),o=0,s=0,u=0;u<i.length;++u)if(i[u]=o,s<r.length&&r[s]==u){++s,i[u]=o;var f=this.offsets[u],d=this.offsets[u+1]-f;d>0&&(o+=d)}for(var m=new Array(4*i.length),y=0;y<i.length;++y)m[4*y+3]=255&i[y],m[4*y+2]=(65280&i[y])>>8,m[4*y+1]=(16711680&i[y])>>16,m[4*y]=(4278190080&i[y])>>24;return m},t}(),YF=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,r,i,o;for(n in i=this.font.cmap.tables[0].codeMap,t={},o=this.subset)r=o[n],t[n]=i[r];return t},e.prototype.glyphsFor=function(t){var n,r,i,o,s,u,f;for(i={},s=0,u=t.length;s<u;s++)i[o=t[s]]=this.font.glyf.glyphFor(o);for(o in n=[],i)(r=i[o])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(o in f=this.glyphsFor(n))r=f[o],i[o]=r;return i},e.prototype.encode=function(t,n){var r,i,o,s,u,f,d,m,y,w,_,M,k,R,N;for(i in r=Ox.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(t),_={0:0},N=r.charMap)_[(f=N[i]).old]=f.new;for(M in w=r.maxGlyphID,s)M in _||(_[M]=w++);return m=function(j){var J,te;for(J in te={},j)te[j[J]]=J;return te}(_),y=Object.keys(m).sort(function(j,J){return j-J}),k=function(){var j,J,te;for(te=[],j=0,J=y.length;j<J;j++)u=y[j],te.push(m[u]);return te}(),o=this.font.glyf.encode(s,k,_),d=this.font.loca.encode(o.offsets,k),R={cmap:this.font.cmap.raw(),glyf:o.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(R["OS/2"]=this.font.os2.raw()),this.font.directory.encode(R)},e}();Ar.API.PDFObject=function(){var e;function t(){}return e=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},t.convert=function(n){var r,i,o,s;if(Array.isArray(n))return"["+function(){var u,f,d;for(d=[],u=0,f=n.length;u<f;u++)r=n[u],d.push(t.convert(r));return d}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in o=["<<"],n)s=n[i],o.push("/"+i+" "+t.convert(s));return o.push(">>"),o.join(`
`)}return""+n},t}();const JF={class:"h-full flex"},XF={class:"flex-1 relative"},QF={key:0,class:"absolute inset-0 bg-black/30 backdrop-blur-sm z-[2000] flex items-center justify-center"},e9={key:1,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[3000]"},t9={class:"text-center max-w-lg mx-auto p-8"},n9={class:"space-y-4"},r9={class:"map-parent"},i9={key:0,class:"fixed left-0 right-0 z-[1500]",style:{top:"var(--header-height)"}},s9={class:"map-content flex flex-col md:flex-row relative"},o9={class:"flex-1 relative"},a9={key:0,class:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 z-50"},l9={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center z-[9999] p-4 overflow-y-auto"},u9={class:"bg-white rounded-lg p-6 max-w-2xl w-full my-8 relative"},c9={class:"flex justify-between items-center mb-4 sticky top-0 bg-white pb-4 border-b"},f9={class:"overflow-y-auto max-h-[calc(100vh-12rem)]"},h9={key:0,class:"space-y-4"},d9={key:0,class:"space-y-2"},p9={class:"grid grid-cols-1 gap-2"},g9=["onClick"],m9={class:"font-medium text-gray-900"},v9={key:1,class:"space-y-2"},y9={class:"flex items-center mb-4"},_9={class:"text-sm text-gray-600"},b9={class:"grid grid-cols-1 gap-2"},w9=["onClick"],x9={class:"font-medium text-gray-900"},L9={key:2,class:"space-y-2"},S9={class:"flex items-center mb-4"},C9={class:"text-sm text-gray-600"},E9={class:"grid grid-cols-1 gap-2"},P9={key:0,class:"text-center py-8"},M9=["onClick"],A9={class:"font-medium text-gray-900"},k9={key:3,class:"space-y-2"},T9={class:"flex items-center mb-4"},D9={class:"text-sm text-gray-600"},B9={class:"grid grid-cols-1 gap-2"},N9=["onClick"],O9={class:"font-medium text-gray-900"},I9={class:"text-sm text-gray-500"},R9={class:"text-xs text-gray-400 mt-1"},F9={key:1,class:"space-y-4"},j9={key:0,class:"space-y-2"},z9={class:"grid grid-cols-1 gap-2"},$9={key:0,class:"text-center py-8"},U9=["onClick"],V9={class:"font-medium text-gray-900"},H9={key:1,class:"space-y-2"},G9={class:"flex items-center mb-4"},q9={class:"text-sm text-gray-600"},W9={class:"grid grid-cols-1 gap-2"},Z9=["onClick"],K9={class:"font-medium text-gray-900"},Y9={class:"text-sm text-gray-500"},J9={class:"text-xs text-gray-400 mt-1"},X9={key:2,class:"space-y-4"},Q9={key:3,class:"space-y-4"},ej={key:0,class:"text-center py-8"},tj={key:1,class:"space-y-2"},nj=["onClick"],rj={class:"font-medium text-gray-900"},ij={class:"text-sm text-gray-500"},sj={class:"text-xs text-gray-400 mt-1"},Ub=oo({__name:"MapView",emits:["shape-selected"],setup(e,{emit:t}){const n=Rt(null),r=Rt(!1),i=gy(),o=rm(),s=Bp(),u=dc(),f=Rt([]),{currentTool:d,selectedShape:m,map:y,initMap:w,setDrawingTool:_,updateShapeStyle:M,updateShapeProperties:k,featureGroup:R,adjustView:N,clearActiveControlPoints:j,calculateConnectedCoverageArea:J}=kR(),{initMap:te,changeBaseMap:ae}=TR(),le=Rt(!1),xe=Rt(!1),G=Rt(!1),I=Rt(null),K=Rt(null),$=Rt(!1),O=Rt(null),z=ga(),V=Rt([]),W=Rt([]),q=Rt([]),X=Rt(null),Y=Rt(null),me=Rt(null),Se=Rt(!1),Re=Rt(!1),T=Rt(!1),ne=Rt(null),fe=gr(()=>{var mt,qe;return console.log("[MapView][filteredClients] Computing with:",{userType:(mt=z.user)==null?void 0:mt.user_type,selectedSalarie:X.value,salarieVisiteurs:W.value,visiteurCount:((qe=W.value)==null?void 0:qe.length)||0}),z.isSalarie||X.value?W.value:[]}),ce=gr(()=>{var Wn,Xt,vn;if(!m.value)return null;console.log("[MapView][selectedShape] Initial layer state:",{layer:m.value,hasName:"name"in m.value,name:m.value.name,hasProperties:"properties"in m.value,propertiesName:(Wn=m.value.properties)==null?void 0:Wn.name,allLayerKeys:Object.keys(m.value),allPropertiesKeys:m.value.properties?Object.keys(m.value.properties):[],_leaflet_id:m.value._leaflet_id,_dbId:m.value._dbId,descriptor:Object.getOwnPropertyDescriptor(m.value,"name")});const mt=m.value.properties||{};let qe="unknown";mt.type?qe=mt.type:m.value instanceof Ot.Circle?qe="Circle":m.value instanceof da||m.value instanceof Ot.Rectangle?qe="Rectangle":m.value instanceof gf||m.value instanceof Ot.Polygon?qe="Polygon":m.value instanceof Sf?qe="ElevationLine":(m.value instanceof Mo||m.value instanceof Ot.Polyline&&!(m.value instanceof Ot.Polygon))&&(qe="Line"),console.log(`[MapView][selectedShape] Type de forme détecté: ${qe}`),mt.type||(m.value.properties||(m.value.properties={}),m.value.properties.type=qe);let Ft;if(mt.style&&mt.style.name)Ft=mt.style.name,console.log("[MapView][selectedShape] Using name from style:",Ft);else if(mt.name)Ft=mt.name,console.log("[MapView][selectedShape] Using name from properties:",Ft);else if(m.value.name)Ft=m.value.name,console.log("[MapView][selectedShape] Using name from layer:",Ft);else{const It=Object.getOwnPropertyDescriptor(m.value,"name");It&&It.value&&(Ft=It.value,console.log("[MapView][selectedShape] Found name in non-enumerable layer property:",Ft));const Yt=["_name","displayName","title"];for(const Ln of Yt)if(m.value[Ln]){Ft=m.value[Ln],console.log(`[MapView][selectedShape] Found name in ${Ln}:`,Ft);break}}Ft&&(console.log(`[MapView][selectedShape] Ensuring name "${Ft}" is set everywhere`),m.value.properties||(m.value.properties={}),m.value.properties.name=Ft,m.value.properties.style||(m.value.properties.style={}),m.value.properties.style.name=Ft,m.value.name=Ft,typeof m.value.setName=="function"&&(m.value.setName(Ft),console.log(`[MapView][selectedShape] Used setName method to set name "${Ft}"`))),m.value.properties.category||(m.value.properties.category="forages"),m.value.properties.accessLevel||(m.value.properties.accessLevel="visitor"),console.log("[MapView][selectedShape] Preparing properties for DrawingTools:",{type:qe,name:mt.name,foundName:Ft,hasNameProperty:"name"in mt,allPropertiesKeys:Object.keys(mt),layerId:m.value._leaflet_id,rawProperties:mt,layerName:m.value.name,layerPropertiesName:(Xt=m.value.properties)==null?void 0:Xt.name});const kn={...mt,type:qe,name:Ft||m.value.name||mt.name||void 0,category:m.value.properties.category||"forages",accessLevel:m.value.properties.accessLevel||"visitor"},ar={type:qe,properties:kn,layer:m.value,options:m.value.options||{}};return console.log("[MapView][selectedShape] Final shape object for DrawingTools:",{type:ar.type,hasName:"name"in ar.properties,name:ar.properties.name,layerName:ar.layer.name,layerPropertiesName:(vn=ar.layer.properties)==null?void 0:vn.name}),ar});function ye(mt){const qe=mt.getCenter(),Ft=mt.getZoom(),kn={lat:qe.lat,lng:qe.lng,zoom:Ft};document.cookie=`mapState=${JSON.stringify(kn)};max-age=2592000;path=/`}function oe(){const qe=document.cookie.split(";").find(Ft=>Ft.trim().startsWith("mapState="));if(qe)try{return JSON.parse(qe.split("=")[1])}catch(Ft){return console.error("Erreur lors de la lecture du cookie de position:",Ft),null}return null}Fo(async()=>{var mt,qe;console.log("[MapView][onMounted] Initialisation du composant MapView"),console.log("[MapView][onMounted] État initial des filtres dans le store:",JSON.stringify({accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}},null,2));try{if(await i.fetchPlans(),(z.isAdmin||z.isEntreprise)&&await nt(),z.isEntreprise){Se.value=!0;try{const It=await hr.get("/users/",{params:{role:"SALARIE",entreprise:(mt=z.user)==null?void 0:mt.id}});V.value=It.data}catch(It){console.error("Error loading salaries:",It),V.value=[]}finally{Se.value=!1}}if(z.isSalarie){Re.value=!0;try{const It=await z.fetchSalarieVisiteurs(((qe=z.user)==null?void 0:qe.id)||0);W.value=Array.isArray(It)?It:[It]}catch(It){console.error("Error loading clients:",It)}finally{Re.value=!1}}const Ft=oe(),kn=Ft?[Ft.lat,Ft.lng]:[46.603354,1.888334],ar=(Ft==null?void 0:Ft.zoom)??6;if(n.value&&!y.value){const It=w(n.value,kn,ar);It.pm.setLang("fr"),It.pm.addControls({rotateMode:!1}),te(It),It.on("moveend",()=>{ye(It)}),window.addEventListener("map-set-location",Yt=>{if(It&&Yt.detail){const{lat:Ln,lng:mr,zoom:ct}=Yt.detail;It.flyTo([Ln,mr],ct,{duration:1.5,easeLinearity:.25})}}),R.value&&(R.value.on("layeradd",Yt=>{const Ln=Yt.layer;Ln&&Ln._leaflet_id&&f.value.findIndex(ct=>ct.layer&&ct.layer._leaflet_id===Ln._leaflet_id)===-1&&(console.log(`[MapView][featureGroup.layeradd] Ajout de la couche ${Ln._leaflet_id} à shapes.value`),f.value.push({layer:Ln,id:Ln._dbId||Ln._leaflet_id}))}),R.value.on("layerremove",Yt=>{const Ln=Yt.layer;Ln&&Ln._leaflet_id&&console.log(`[MapView][featureGroup.layerremove] Couche ${Ln._leaflet_id} supprimée du featureGroup mais conservée dans shapes.value`)}))}const Wn=localStorage.getItem("lastPlanId");if(Wn)try{console.log("[MapView][onMounted] Chargement immédiat du dernier plan:",Wn),await We(parseInt(Wn));const It=document.querySelector(".map-parent");It instanceof HTMLElement&&(It.style.display="block")}catch(It){console.error("[MapView][onMounted] Erreur chargement dernier plan:",It),I.value=null,i.clearCurrentPlan(),o.clearCurrentPlan(),De(),localStorage.removeItem("lastPlanId")}else console.log("[MapView][onMounted] Aucun dernier plan à charger"),I.value=null,i.clearCurrentPlan(),o.clearCurrentPlan(),De();window.addEventListener("shape:created",It=>{const{shape:Yt,type:Ln,properties:mr}=It.detail;console.log("[MapView] Nouvelle forme créée",{shape:Yt,type:Ln,properties:mr}),o.addElement(Yt),_("")}),window.addEventListener("categoriesReactivated",It=>{console.log("[MapView][categoriesReactivated] Événement reçu:",It.detail),En()}),window.addEventListener("shapeTypesReactivated",It=>{console.log("[MapView][shapeTypesReactivated] Événement reçu:",It.detail),En()});const Xt=It=>{if(console.log("[MapView] Édition de note via Leaflet",It),console.log("[MapView] Type de e:",typeof It,"Contenu de e:",JSON.stringify(It)),!It||!It.note){console.error("[MapView] Erreur: e.note est undefined ou null",It);return}const Yt=It.note;console.log("[MapView] Note à éditer:",Yt),K.value={id:Yt.id,title:Yt.title||Yt.name,description:Yt.description,location:Yt.location,columnId:Yt.columnId||s.getDefaultColumn.id,accessLevel:Yt.accessLevel,style:Yt.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:Yt.createdAt||new Date().toISOString(),updatedAt:Yt.updatedAt||new Date().toISOString(),comments:Yt.comments||[],photos:Yt.photos||[]},console.log("[MapView] editingMapNote.value après conversion:",K.value),G.value=!0,console.log("[MapView] showNoteEditModal.value:",G.value)},vn=It=>{if(console.log("[MapView] Édition de note via événement global",It),!It.detail||!It.detail.note){console.error("[MapView] Erreur: event.detail.note est undefined ou null",It);return}const Yt=It.detail.note;console.log("[MapView] Note à éditer (global):",Yt),K.value={id:Yt.id,title:Yt.title||Yt.name,description:Yt.description,location:Yt.location,columnId:Yt.columnId||s.getDefaultColumn.id,accessLevel:Yt.accessLevel,style:Yt.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:Yt.createdAt||new Date().toISOString(),updatedAt:Yt.updatedAt||new Date().toISOString(),comments:Yt.comments||[],photos:Yt.photos||[]},G.value=!0};window.addEventListener("geonote:edit",vn),R.value&&(R.value.off("note:edit"),R.value.on("note:edit",Xt))}catch(Ft){console.error("Error during component mount:",Ft),I.value=null,i.clearCurrentPlan(),o.clearCurrentPlan(),De(),localStorage.removeItem("lastPlanId")}}),bs(()=>o.hasUnsavedChanges,mt=>{console.log("[MapView][watch drawingStore.hasUnsavedChanges]",mt),mt&&I.value&&i.markUnsavedChanges()}),bs(()=>o.filters,(mt,qe)=>{if(console.log("[MapView][watch drawingStore.filters] Changement de filtres détecté:",JSON.stringify(mt,null,2)),qe){const Ft=JSON.stringify(qe.accessLevels)!==JSON.stringify(mt.accessLevels),kn=JSON.stringify(qe.categories)!==JSON.stringify(mt.categories),ar=JSON.stringify(qe.shapeTypes)!==JSON.stringify(mt.shapeTypes);console.log("[MapView][watch drawingStore.filters] Changements détectés:",{accessLevelsChanged:Ft,categoriesChanged:kn,shapeTypesChanged:ar}),Ft||kn||ar?(console.log("[MapView][watch drawingStore.filters] Mise à jour de l'affichage suite au changement de filtres"),En()):console.log("[MapView][watch drawingStore.filters] Aucun changement réel, pas de mise à jour")}else console.log("[MapView][watch drawingStore.filters] Mise à jour de l'affichage suite au changement de filtres"),En()},{deep:!0});const B=mt=>{console.log("[MapView][filtersChanged] Événement reçu:",mt.detail),En()};Fo(()=>{window.addEventListener("filtersChanged",B)}),mc(()=>{window.removeEventListener("filtersChanged",B),console.log("[MapView][filtersChanged] Événement désactivé")}),bs(()=>o.getFilteredElements,(mt,qe)=>{console.log("[MapView][watch drawingStore.getFilteredElements] Mise à jour de l'affichage, éléments filtrés:",{nouveaux:mt.length,anciens:qe?qe.length:"aucun",ids:mt.map(Ft=>Ft.id)}),console.log("[MapView][watch drawingStore.getFilteredElements] Mise à jour de l'affichage suite au changement d'elements filtrés"),En()},{deep:!0}),bs(y,async mt=>{var qe;console.log(`
[MapView][watch map] Nouvelle carte:`,!!mt),mt&&i.currentPlan&&!((qe=R.value)!=null&&qe.getLayers().length)&&(console.log("[MapView][watch map] Chargement initial des éléments du plan:",i.currentPlan.id),De(),await o.loadPlanElements(i.currentPlan.id))}),bs(()=>i.currentPlan,async(mt,qe)=>{var Ft,kn,ar;if((mt==null?void 0:mt.id)===(qe==null?void 0:qe.id)){console.log("[MapView][watch currentPlan] Plan identique, pas de rechargement nécessaire");return}console.log(`
[MapView][watch currentPlan] ====== CHANGEMENT DE PLAN ======`),console.log("[MapView][watch currentPlan] Nouveau plan:",mt==null?void 0:mt.id);try{if(mt){console.log("[MapView][watch currentPlan] Mise à jour du plan courant..."),I.value=mt;const Wn=document.querySelector(".map-parent");Wn instanceof HTMLElement&&(Wn.style.display="block"),console.log("[MapView][watch currentPlan] Plan mis à jour avec succès")}else{console.log("[MapView][watch currentPlan] Nettoyage du plan courant..."),I.value=null,De();const Wn=document.querySelector(".map-parent");Wn instanceof HTMLElement&&(Wn.style.display="none")}}catch(Wn){console.error("[MapView][watch currentPlan] ERREUR:",Wn),I.value=null,De()}console.log("[MapView][watch currentPlan] État final:",{currentPlanId:(Ft=I.value)==null?void 0:Ft.id,storePlanId:(kn=i.currentPlan)==null?void 0:kn.id,mapVisible:y.value!==null,mapParentDisplay:(ar=document.querySelector(".map-parent"))==null?void 0:ar.getAttribute("style")}),console.log(`[MapView][watch currentPlan] ====== FIN CHANGEMENT ======
`)},{immediate:!0}),cd(()=>{y.value&&y.value.off("moveend"),window.removeEventListener("shape:created",()=>{})});function ue(){r.value=!r.value}function De(){R.value&&R.value.clearLayers(),f.value=[],j(),m.value=null,d.value=""}async function Me(mt){return await dn.measureAsync("refreshMapWithPlan",async()=>{try{dn.measure("refreshMapWithPlan:clearMap",()=>{De()},"MapView"),await dn.measureAsync("refreshMapWithPlan:loadPlanElements",async()=>{await o.loadPlanElements(mt)},"MapView");const qe=dn.measure("refreshMapWithPlan:getPlanById",()=>i.getPlanById(mt),"MapView");qe?(dn.measure("refreshMapWithPlan:updateCurrentPlan",()=>{I.value=qe,i.setCurrentPlan(qe),o.setCurrentPlan(qe.id),localStorage.setItem("lastPlanId",qe.id.toString())},"MapView"),y.value&&R.value&&await dn.measureAsync("refreshMapWithPlan:addShapesToMap",async()=>{console.log("[MapView][refreshMapWithPlan] Éléments disponibles:",{count:o.getCurrentElements.length,elements:o.getCurrentElements.map(Wn=>{var Xt;return{id:Wn.id,type:Wn.type_forme,hasName:Wn.data&&"name"in Wn.data,name:(Xt=Wn.data)==null?void 0:Xt.name}})});const Ft=o.getCurrentElements.reduce((Wn,Xt)=>(Wn[Xt.type_forme]||(Wn[Xt.type_forme]=[]),Wn[Xt.type_forme].push(Xt),Wn),{}),kn=10,ar=Object.entries(Ft).map(async([Wn,Xt])=>{for(let vn=0;vn<Xt.length;vn+=kn){const It=Xt.slice(vn,vn+kn);await Promise.all(It.map(async Yt=>{await dn.measureAsync(`refreshMapWithPlan:createElement:${Yt.type_forme}`,async()=>{var mr;if(!R.value||!Yt.data)return;let Ln=null;switch(Yt.type_forme){case"Circle":{const ct=Yt.data;ct.center&&ct.radius&&(Ln=new Rh(Ot.latLng(ct.center[1],ct.center[0]),{...ct.style,radius:ct.radius}),ct.name&&(Ln.properties={type:"Circle",name:ct.name,style:ct.style,radius:ct.radius,diameter:ct.radius*2,surface:Math.PI*ct.radius*ct.radius,perimeter:2*Math.PI*ct.radius},Ln.name=ct.name));break}case"Rectangle":{const ct=Yt.data;if(ct.bounds){const On=Ot.latLngBounds(Ot.latLng(ct.bounds.southWest[1],ct.bounds.southWest[0]),Ot.latLng(ct.bounds.northEast[1],ct.bounds.northEast[0]));Ln=new da(On,ct.style),ct.name&&(Ln.properties={name:ct.name},Ln.name=ct.name)}break}case"Polygon":{const ct=Yt.data;if(ct.points&&ct.points.length>0){const On=ct.points.map(xr=>Ot.latLng(xr[1],xr[0]));Ln=new gf(On,ct.style),ct.name&&(Ln.properties={name:ct.name},Ln.name=ct.name)}break}case"Line":{const ct=Yt.data;if(ct.points&&ct.points.length>0){const On=ct.points.map(xr=>Ot.latLng(xr[1],xr[0]));Ln=new Mo(On,ct.style),ct.name&&(Ln.properties={name:ct.name},Ln.name=ct.name)}break}case"ElevationLine":{const ct=Yt.data;if(ct.points&&ct.points.length>0){const On=ct.points.map(xr=>Ot.latLng(xr[1],xr[0]));Ln=new Sf(On,ct.style),ct.name&&(Ln.properties={name:ct.name,type:"ElevationLine",elevationData:ct.elevationData,minElevation:ct.minElevation,maxElevation:ct.maxElevation,elevationGain:ct.elevationGain,elevationLoss:ct.elevationLoss,averageSlope:ct.averageSlope,maxSlope:ct.maxSlope},Ln.name=ct.name),ct.elevationData&&(Ln.elevationData=ct.elevationData)}break}}Ln&&(Ln._dbId=Yt.id,(mr=R.value)==null||mr.addLayer(Ln),f.value.push({id:Yt.id,type:Yt.type_forme,layer:Ln,properties:Ln.properties}))},"MapView")})),await new Promise(Yt=>setTimeout(Yt,0))}});await Promise.all(ar),dn.measure("refreshMapWithPlan:adjustView",()=>{N()},"MapView")},"MapView"),console.log(`Plan ${mt} chargé avec succès avec ${o.getCurrentElements.length} formes`)):console.error(`Plan ${mt} introuvable après chargement`),xe.value=!1}catch(qe){throw console.error("Erreur lors du rafraîchissement de la carte:",qe),qe}},"MapView")}async function We(mt){return await dn.measureAsync("loadPlan",async()=>{var qe;console.log(`
[MapView][loadPlan] ====== DÉBUT CHARGEMENT PLAN ======`),console.log("[MapView][loadPlan] Tentative de chargement du plan:",mt);try{const Ft=await dn.measureAsync("loadPlan:getPlanFromStore",async()=>i.getPlanById(mt),"MapView");if(console.log("[MapView][loadPlan] Plan trouvé dans le store:",!!Ft),!Ft){console.log("[MapView][loadPlan] Plan non trouvé dans le store, vérification API...");try{await dn.measureAsync("loadPlan:apiCheck",async()=>{await hr.get(`/plans/${mt}/`)},"MapView")}catch(kn){throw((qe=kn.response)==null?void 0:qe.status)===404&&(console.warn("[MapView][loadPlan] Plan non trouvé - Nettoyage du localStorage"),localStorage.removeItem("lastPlanId"),I.value=null,i.clearCurrentPlan(),o.clearCurrentPlan(),De()),kn}}console.log("[MapView][loadPlan] Rafraîchissement de la carte..."),await dn.measureAsync("loadPlan:refreshMap",async()=>{await Me(mt)},"MapView"),xe.value=!1,console.log("[MapView][loadPlan] Invalidation de la taille de la carte..."),Ut(),console.log("[MapView][loadPlan] Plan chargé avec succès:",{planId:mt,elementsCount:o.getCurrentElements.length})}catch(Ft){throw console.error("Erreur lors du chargement du plan:",Ft),dn.measure("loadPlan:errorRecovery",()=>{I.value=null,i.clearCurrentPlan(),o.clearCurrentPlan(),De(),localStorage.removeItem("lastPlanId")},"MapView"),Ft}},"MapView")}async function Z(){var mt;if(!I.value||!R.value){console.warn("Aucun plan actif ou groupe de formes à sauvegarder");return}$.value=!0,O.value="saving";try{const qe=[],Ft=new Set(o.getCurrentElements.filter(Xt=>Xt.id!==void 0).map(Xt=>Xt.id)),kn=new Set;console.log("[savePlan] Début de la sauvegarde",{featureGroupLayers:R.value.getLayers().length,existingIds:Array.from(Ft),currentElements:o.getCurrentElements}),R.value.eachLayer(Xt=>{var Ln,mr,ct,On,xr,Ti,Ir,Er,lr,Vr,rr,Or;console.log("[savePlan] Traitement de la couche",{type:(Ln=Xt.properties)==null?void 0:Ln.type,name:(mr=Xt.properties)==null?void 0:mr.name,isPolygon:Xt instanceof Ot.Polygon,properties:Xt.properties});let vn,It;const Yt={color:Xt.options.color||"#2b6451",weight:Xt.options.weight||3,opacity:Xt.options.opacity||1,fillColor:Xt.options.fillColor||"#2b6451",fillOpacity:Xt.options.fillOpacity||.2,dashArray:Xt.options.dashArray||""};if(Xt instanceof da){vn="Rectangle";const er=Xt.getBounds();It={bounds:{southWest:[er.getSouthWest().lng,er.getSouthWest().lat],northEast:[er.getNorthEast().lng,er.getNorthEast().lat]},style:Yt,name:((ct=Xt.properties)==null?void 0:ct.name)||"",rotation:Xt.getRotation(),width:Xt.getDimensions().width,height:Xt.getDimensions().height,center:[Xt.getCenter().lng,Xt.getCenter().lat]}}else if(Xt instanceof Ot.Circle)vn="Circle",It={center:[Xt.getLatLng().lng,Xt.getLatLng().lat],radius:Xt.getRadius(),name:((On=Xt.properties)==null?void 0:On.name)||"",style:Yt};else if(Xt instanceof Ot.Rectangle){vn="Rectangle";const er=Xt.getBounds();It={bounds:{southWest:[er.getSouthWest().lng,er.getSouthWest().lat],northEast:[er.getNorthEast().lng,er.getNorthEast().lat]},name:((xr=Xt.properties)==null?void 0:xr.name)||"",style:Yt}}else Xt instanceof Ot.Polyline&&!(Xt instanceof Ot.Polygon)?((Ti=Xt.properties)==null?void 0:Ti.type)==="ElevationLine"?(vn="ElevationLine",It={points:Xt.getLatLngs().map(en=>[en.lng,en.lat]),style:{...Yt,color:((Ir=Xt.properties.style)==null?void 0:Ir.color)||"#FF4500",weight:((Er=Xt.properties.style)==null?void 0:Er.weight)||4,opacity:((lr=Xt.properties.style)==null?void 0:lr.opacity)||.8},name:((Vr=Xt.properties)==null?void 0:Vr.name)||"",elevationData:Xt.properties.elevationData,samplePointStyle:Xt.properties.samplePointStyle,minMaxPointStyle:Xt.properties.minMaxPointStyle,minElevation:Xt.properties.minElevation,maxElevation:Xt.properties.maxElevation,elevationGain:Xt.properties.elevationGain,elevationLoss:Xt.properties.elevationLoss,averageSlope:Xt.properties.averageSlope,maxSlope:Xt.properties.maxSlope}):(vn="Line",It={points:Xt.getLatLngs().map(en=>[en.lng,en.lat]),name:((rr=Xt.properties)==null?void 0:rr.name)||"",style:Yt}):Xt instanceof Ot.Polygon&&!(Xt instanceof Ot.Rectangle)&&(vn="Polygon",It={points:Xt.getLatLngs()[0].map(en=>[en.lng,en.lat]),name:((Or=Xt.properties)==null?void 0:Or.name)||"",style:Yt});if(vn&&It){let er=Xt._elementId;Xt._dbId&&(er=Xt._dbId,typeof er=="number"&&kn.add(er)),qe.push({id:er,type_forme:vn,data:It})}}),console.log("[savePlan] Éléments à sauvegarder",{totalElements:qe.length,elements:qe.map(Xt=>({type:Xt.type_forme,hasPoints:"points"in Xt.data,hasStyle:"style"in Xt.data}))});const ar=Array.from(Ft).filter(Xt=>!kn.has(Xt));o.elements=qe;const Wn=await o.saveToPlan(I.value.id,{elementsToDelete:ar});if(Wn&&((mt=I.value)!=null&&mt.id)){const Xt=I.value.id;I.value={...I.value,...Wn},i.updatePlanDetails(Xt,Wn)}O.value="success",setTimeout(()=>{O.value=null},3e3)}catch(qe){console.error("Erreur lors de la sauvegarde du plan:",qe),O.value=null}finally{$.value=!1}}mc(()=>{z.user||Ke(),i.clearCurrentPlan(),o.clearCurrentPlan(),R.value&&R.value.off("note:edit"),window.removeEventListener("geonote:edit",()=>{}),window.removeEventListener("categoriesReactivated",()=>{}),window.removeEventListener("shapeTypesReactivated",()=>{}),window.removeEventListener("shape:created",()=>{}),window.removeEventListener("map-set-location",()=>{})});function de(mt){if(console.log("[MapView][updateShapeProperties] Mise à jour des propriétés:",mt),k(mt),mt.category&&m.value&&m.value._dbId){const qe=m.value._dbId,Ft=o.elements.find(kn=>kn.id===qe);if(Ft){console.log(`[MapView][updateShapeProperties] Mise à jour de la catégorie dans le store: ${mt.category} pour l'élément ${qe}`);const kn=Ft;kn.data||(kn.data={}),kn.data.category=mt.category,o.$patch({unsavedChanges:!0})}}}function ve(mt){try{const qe=new Date(mt);return isNaN(qe.getTime())?(console.error("Date invalide reçue:",mt),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(qe)}catch(qe){return console.error("Erreur lors du formatage de la date:",qe),"Date invalide"}}const pe=()=>{R.value&&N()},$e=()=>{m.value&&R.value&&(_(""),R.value.removeLayer(m.value),m.value=null)};async function Qe(mt){console.log(`onPlanCreated - Tentative de chargement du plan ${mt}`),await i.fetchPlans();const qe=i.getPlanById(mt);qe?(console.log(`Plan ${mt} trouvé, chargement en cours...`),localStorage.setItem("lastPlanId",mt.toString()),I.value=qe,i.setCurrentPlan(qe),o.setCurrentPlan(qe.id),le.value=!1,Ut(),console.log(`Plan ${mt} chargé avec succès`)):console.error(`Plan ${mt} introuvable après création! Vérifiez les permissions.`)}bs(X,async mt=>{var qe;if(mt&&((qe=z.user)==null?void 0:qe.user_type)==="admin"){Re.value=!0;try{const Ft=await z.fetchSalarieVisiteurs(mt.id);W.value=Array.isArray(Ft)?Ft:[Ft]}catch(Ft){console.error("[MapView][watch selectedSalarie] Error:",Ft),W.value=[]}finally{Re.value=!1}}});function Ke(){localStorage.removeItem("lastPlanId")}function He(mt,qe="m"){return qe==="m²"?`${(mt/1e4).toFixed(2)} ha`:qe==="m"?mt>=1e3?`${(mt/1e3).toFixed(2)} km`:`${mt.toFixed(2)} m`:`${mt.toFixed(2)} ${qe}`}const Xe=Rt(!1);function st(mt){return{Circle:"Cercle",Rectangle:"Rectangle",Semicircle:"Demi-cercle",Line:"Ligne",Polygon:"Polygone",TextRectangle:"Annotation",ElevationLine:"Profil altimétrique"}[mt]||mt}async function kt(){var qe,Ft,kn,ar,Wn,Xt,vn,It,Yt,Ln;if(!I.value||!y.value||!R.value){console.error("[generateSynthesis] Plan, map ou featureGroup manquant");return}const mt=I.value;try{console.log("[generateSynthesis] Début de la génération"),console.log("[generateSynthesis] Plan courant complet:",mt),await Z();let Vr=mt;if(!mt.salarie_details&&!mt.entreprise_details&&!mt.client_details){console.log("[generateSynthesis] Détails manquants, tentative de récupération...");try{const jr=await hr.get(`/plans/${mt.id}/`);jr.status===200&&(console.log("[generateSynthesis] Plan mis à jour:",jr.data),I.value={...mt,...jr.data},Vr=jr.data,i.updatePlanDetails(mt.id,jr.data))}catch(jr){console.error("[generateSynthesis] Erreur lors de la récupération des détails:",jr)}}await new Promise(jr=>setTimeout(jr,1e3)),Xe.value=!0;const rr=Vr.salarie_details,Or=Vr.client_details,er=(rr==null?void 0:rr.entreprise_details)||Vr.entreprise_details;console.log("[generateSynthesis] Détails du plan utilisé:",Vr),console.log("[generateSynthesis] Détails des utilisateurs:",{salarie:rr?{id:rr.id,nom:`${rr.first_name} ${rr.last_name}`,company:rr.company_name,logo:rr.logo}:null,entreprise:er?{id:er.id,nom:`${er.first_name} ${er.last_name}`,company:er.company_name,logo:er.logo}:null,client:Or?{id:Or.id,nom:`${Or.first_name} ${Or.last_name}`,company:Or.company_name}:null}),m.value&&(j(),m.value=null);const en=new Ar("l","mm","a4");console.log("[generateSynthesis] Chargement du logo de l'application");const qi=new Image;qi.src=a1,await new Promise(jr=>{qi.onload=()=>{console.log("[generateSynthesis] Logo application chargé"),jr()},qi.onerror=Xo=>{console.error("[generateSynthesis] Erreur chargement logo application:",Xo),jr()}}),console.log("[generateSynthesis] Tentative de chargement du logo entreprise:",er==null?void 0:er.logo);let Di=null;er!=null&&er.logo&&(Di=new Image,Di.src=er.logo,await new Promise(jr=>{Di?(Di.onload=()=>{console.log("[generateSynthesis] Logo entreprise chargé avec succès"),jr()},Di.onerror=Xo=>{console.error("[generateSynthesis] Erreur chargement logo entreprise:",Xo),jr()}):jr()})),console.log("[generateSynthesis] Tentative de chargement du logo salarie:",rr==null?void 0:rr.logo);let Si=null;rr!=null&&rr.logo&&(Si=new Image,Si.src=rr.logo,await new Promise(jr=>{Si?(Si.onload=()=>{console.log("[generateSynthesis] Logo salarie chargé avec succès"),jr()},Si.onerror=Xo=>{console.error("[generateSynthesis] Erreur chargement logo salarie:",Xo),jr()}):jr()})),console.log("[generateSynthesis] Ajout des logos au PDF:",{logoApplication:!0,logoEntreprise:Di!==null,logoSalarie:Si!==null}),Di!==null&&en.addImage(Di,"JPEG",148.5-40-30,20,40,40),en.addImage(qi,"JPEG",148.5-40/2,20,40,40),Si!==null&&en.addImage(Si,"JPEG",148.5+30,20,40,40),en.setFontSize(24),en.setTextColor(0),en.text(mt.nom||"Sans titre",297/2,100,{align:"center"});let ai=120;if(er&&(en.setFontSize(14),en.setFont("helvetica","bold"),en.text("Entreprise:",20,ai),en.setFont("helvetica","normal"),en.text(`${er.first_name} ${er.last_name}${er.company_name?` (${er.company_name})`:""}`,20,ai+6),ai+=15),rr&&(en.setFontSize(14),en.setFont("helvetica","bold"),en.text("Salarie:",20,ai),en.setFont("helvetica","normal"),en.text(`${rr.first_name} ${rr.last_name}${rr.company_name?` (${rr.company_name})`:""}`,20,ai+6),ai+=15),Or&&(en.setFontSize(14),en.setFont("helvetica","bold"),en.text("Client:",20,ai),en.setFont("helvetica","normal"),en.text(`${Or.first_name} ${Or.last_name}${Or.company_name?` (${Or.company_name})`:""}`,20,ai+6),ai+=15),mt.description){en.setFont("helvetica","bold"),en.text("Description:",20,ai),en.setFont("helvetica","normal");const jr=en.splitTextToSize(mt.description,150);en.text(jr,20,ai+6),ai+=8*jr.length+10}ai=Math.min(ai,180),en.setFontSize(10),en.setTextColor(100),en.text(`Date de création: ${ve(mt.date_creation)}`,20,190),en.text(`Dernière modification: ${ve(mt.date_modification)}`,277,190,{align:"right"});const Fr=[];R.value.eachLayer(jr=>Fr.push(jr));const Ml=Ot.simpleMapScreenshoter({hideElementsWithSelectors:[".leaflet-control-container",".leaflet-pm-toolbar",".leaflet-grid-layer",".leaflet-grid-label"],preventDownload:!0}).addTo(y.value);await new Promise(jr=>setTimeout(jr,3e3));for(let jr=0;jr<Fr.length;jr++){en.addPage(),en.setFillColor(248,250,252),en.setDrawColor(226,232,240),en.rect(0,0,297,25,"F"),en.setFontSize(10),en.setTextColor(50,50,50),en.setFont("helvetica","bold"),en.text(mt.nom||"Sans titre",20,12);let wo=297-20-(15*(1+(Di!==null?1:0)+(Si!==null?1:0))+5*(1+(Di!==null?1:0)));Di!==null&&(en.addImage(Di,"JPEG",wo,5,15,15),wo+=20),en.addImage(qi,"JPEG",wo,5,15,15),wo+=20,Si!==null&&en.addImage(Si,"JPEG",wo,5,15,15),en.setDrawColor(200,200,200),en.setLineWidth(.5),en.line(0,25,297,25);const ri=Fr[jr],Fn=ri.properties;if(Fn){en.setTextColor(0),en.setFontSize(14),en.setFont("helvetica","bold");const xs=Fn.name||st(Fn.type);let li="";if(Fn.type!=="TextRectangle"){const Gn=J(Fr,ri);li=Gn>0?` (surface totale d'irrigation : ${He(Gn,"m²")})`:""}const fr=`${xs}${li}`;en.text(fr,20,35)}if(Fn&&Fn.type==="ElevationLine")try{const xs=((qe=ri.getBounds)==null?void 0:qe.call(ri))||((Ft=ri.getLatLng)==null?void 0:Ft.call(ri));xs&&y.value.fitBounds(xs instanceof Ot.LatLng?Ot.latLngBounds([xs]):xs,{padding:[50,50]});try{const _n=((kn=ri.getBounds)==null?void 0:kn.call(ri))||((ar=ri.getLatLng)==null?void 0:ar.call(ri));if(!_n||!y.value)console.warn("[generateSynthesis] Bounds ou carte invalide");else{const nn=_n instanceof Ot.LatLng?Ot.latLngBounds([_n]):_n;nn&&nn.isValid&&nn.isValid()&&y.value.getContainer()&&document.body.contains(y.value.getContainer())&&y.value.fitBounds(nn,{padding:[50,50],animate:!1})}}catch(_n){console.warn("[generateSynthesis] Erreur lors de l'ajustement de la vue:",_n)}await new Promise(_n=>setTimeout(_n,2e3)),y.value.invalidateSize();try{y.value&&y.value.getContainer()&&document.body.contains(y.value.getContainer())?y.value.invalidateSize({animate:!1}):console.warn("[generateSynthesis] Carte non valide pour l'invalidation de taille")}catch(_n){console.warn("[generateSynthesis] Erreur lors de l'invalidation de la taille de la carte:",_n)}await new Promise(_n=>{const nn=()=>{var Ci;const ii=(Ci=y.value)==null?void 0:Ci.getContainer();if(!ii){_n();return}const as=ii.querySelectorAll(".leaflet-tile-loaded");ii.querySelectorAll(".leaflet-tile-loading").length===0&&as.length>0?_n():setTimeout(nn,100)};nn()});const li=await Ml.takeScreen("image"),fr=await new Promise((_n,nn)=>{const ii=new Image;ii.onload=()=>_n(ii),ii.onerror=as=>nn(as),ii.src=li}),Gn=40,gs=237/2,ms=Math.min(70,fr.height*gs/fr.width);if(en.addImage(fr,"PNG",20,Gn,gs,ms),Fn.elevationData&&Fn.elevationData.length>0){const _n=document.createElement("canvas");_n.width=800,_n.height=400;const nn=_n.getContext("2d");if(nn){const ii=Fn.elevationData,as=Fn.minElevation,vs=Fn.maxElevation,ao=(vs-as)*.05,Ks=as-ao,Bs=vs+ao,fi=40,To=_n.width-2*fi,Ns=_n.height-2*fi,Yi=Zr=>fi+Zr/ii[ii.length-1].distance*To,ys=Zr=>fi+Ns-(Zr-Ks)/(Bs-Ks)*Ns;nn.fillStyle="#f8fafc",nn.fillRect(0,0,_n.width,_n.height),nn.fillStyle="#334155",nn.font="bold 20px Arial",nn.textAlign="center",nn.fillText("Profil altimétrique",_n.width/2,25),nn.strokeStyle="#e2e8f0",nn.lineWidth=1,nn.beginPath(),nn.moveTo(fi,fi),nn.lineTo(fi,Ns+fi),nn.lineTo(To+fi,Ns+fi),nn.strokeStyle="#94a3b8",nn.stroke();const zo=5;for(let Zr=0;Zr<=zo;Zr++){const Tr=Ks+Zr/zo*(Bs-Ks),Os=ys(Tr);nn.beginPath(),nn.strokeStyle="#e2e8f0",nn.moveTo(fi,Os),nn.lineTo(To+fi,Os),nn.stroke(),nn.beginPath(),nn.strokeStyle="#94a3b8",nn.moveTo(fi-5,Os),nn.lineTo(fi,Os),nn.stroke(),nn.fillStyle="#64748b",nn.font="12px Arial",nn.textAlign="right",nn.fillText(`${Math.round(Tr)}m`,fi-8,Os+4)}const ma=5,Ji=ii[ii.length-1].distance;for(let Zr=0;Zr<=ma;Zr++){const Tr=Zr/ma*Ji,Os=Yi(Tr);nn.beginPath(),nn.strokeStyle="#e2e8f0",nn.moveTo(Os,fi),nn.lineTo(Os,Ns+fi),nn.stroke(),nn.beginPath(),nn.strokeStyle="#94a3b8",nn.moveTo(Os,Ns+fi),nn.lineTo(Os,Ns+fi+5),nn.stroke(),nn.fillStyle="#64748b",nn.font="12px Arial",nn.textAlign="center",nn.fillText(`${Math.round(Tr)}m`,Os,Ns+fi+16)}const rl=nn.createLinearGradient(0,fi,0,Ns+fi);rl.addColorStop(0,"rgba(255, 69, 0, 0.8)"),rl.addColorStop(1,"rgba(255, 69, 0, 0.2)"),nn.beginPath(),nn.moveTo(Yi(ii[0].distance),ys(ii[0].elevation)),ii.forEach((Zr,Tr)=>{Tr>0&&nn.lineTo(Yi(Zr.distance),ys(Zr.elevation))}),nn.strokeStyle="#FF4500",nn.lineWidth=2,nn.stroke(),nn.lineTo(Yi(ii[ii.length-1].distance),ys(Ks)),nn.lineTo(Yi(ii[0].distance),ys(Ks)),nn.closePath(),nn.fillStyle=rl,nn.fill(),ii.forEach(Zr=>{nn.beginPath(),nn.arc(Yi(Zr.distance),ys(Zr.elevation),3,0,Math.PI*2),nn.fillStyle="#FF4500",nn.fill(),nn.strokeStyle="white",nn.lineWidth=1,nn.stroke()});let va=0,pr=0;for(let Zr=0;Zr<ii.length;Zr++)ii[Zr].elevation===as&&(va=Zr),ii[Zr].elevation===vs&&(pr=Zr);nn.beginPath(),nn.arc(Yi(ii[pr].distance),ys(ii[pr].elevation),6,0,Math.PI*2),nn.fillStyle="#059669",nn.fill(),nn.strokeStyle="white",nn.lineWidth=2,nn.stroke(),nn.beginPath(),nn.arc(Yi(ii[va].distance),ys(ii[va].elevation),6,0,Math.PI*2),nn.fillStyle="#DC2626",nn.fill(),nn.strokeStyle="white",nn.lineWidth=2,nn.stroke(),nn.font="12px Arial",nn.fillStyle="#059669",nn.textAlign="left",nn.fillText(`Point haut: ${He(vs,"m")}`,fi,Ns+fi+35),nn.fillStyle="#DC2626",nn.fillText(`Point bas: ${He(as,"m")}`,fi+200,Ns+fi+35);const br=_n.toDataURL("image/png");en.addImage(br,"PNG",20+gs+20,Gn,gs,ms)}}const Lr=Gn+ms+15;en.setFillColor(248,250,252),en.setDrawColor(226,232,240),en.roundedRect(20,Lr,257,50,3,3,"FD"),en.setFont("helvetica","bold"),en.setFontSize(12),en.setTextColor(51,65,85),en.text("Caractéristiques",30,Lr+10);const jo=[{label:"Distance totale",value:He(Fn.length||0)},{label:"Dénivelé positif",value:He(Fn.elevationGain||0,"m")},{label:"Dénivelé négatif",value:He(Fn.elevationLoss||0,"m")}],Vn=[{label:"Pente moyenne",value:`${(Fn.averageSlope||0).toFixed(1)}%`},{label:"Pente maximale",value:`${(Fn.maxSlope||0).toFixed(1)}%`},{label:"Altitude min/max",value:`${He(Fn.minElevation||0,"m")} / ${He(Fn.maxElevation||0,"m")}`}];let _r=Lr+20;en.setFont("helvetica","normal"),en.setFontSize(10),jo.forEach(_n=>{en.setTextColor(100,116,139),en.text(_n.label,30,_r),en.setTextColor(15,23,42),en.setFont("helvetica","bold"),en.text(_n.value,110,_r),en.setFont("helvetica","normal"),_r+=9}),_r=Lr+20;const Wr=297/2;Vn.forEach(_n=>{en.setTextColor(100,116,139),en.text(_n.label,Wr,_r),en.setTextColor(15,23,42),en.setFont("helvetica","bold"),en.text(_n.value,Wr+80,_r),en.setFont("helvetica","normal"),_r+=9})}catch(xs){console.error("[generateSynthesis] Erreur traitement profil altimétrique:",xs)}else{const xs=((Wn=ri.getBounds)==null?void 0:Wn.call(ri))||((Xt=ri.getLatLng)==null?void 0:Xt.call(ri));xs&&y.value.fitBounds(xs instanceof Ot.LatLng?Ot.latLngBounds([xs]):xs,{padding:[50,50]});try{const li=((vn=ri.getBounds)==null?void 0:vn.call(ri))||((It=ri.getLatLng)==null?void 0:It.call(ri));if(!li||!y.value)console.warn("[generateSynthesis] Bounds ou carte invalide");else{const fr=li instanceof Ot.LatLng?Ot.latLngBounds([li]):li;fr&&fr.isValid&&fr.isValid()&&y.value.getContainer()&&document.body.contains(y.value.getContainer())&&y.value.fitBounds(fr,{padding:[50,50],animate:!1})}}catch(li){console.warn("[generateSynthesis] Erreur lors de l'ajustement de la vue:",li)}await new Promise(li=>setTimeout(li,2e3)),y.value.invalidateSize(),await new Promise(li=>{const fr=()=>{var Lr;const Gn=(Lr=y.value)==null?void 0:Lr.getContainer();if(!Gn){li();return}const gs=Gn.querySelectorAll(".leaflet-tile-loaded");Gn.querySelectorAll(".leaflet-tile-loading").length===0&&gs.length>0?li():setTimeout(fr,100)};fr()});try{const li=await Ml.takeScreen("image"),fr=await new Promise((Lr,jo)=>{const Vn=new Image;Vn.onload=()=>Lr(Vn),Vn.onerror=_r=>jo(_r),Vn.src=li}),Gn=45,gs=297*.6-30;let ms=fr.height*gs/fr.width;if(ms>210*.9&&(ms=210*.9),en.addImage(fr,"PNG",20,Gn,gs,ms),Fn){let Lr=function(nn,ii,as,vs,Ci){en.setTextColor(100,116,139),en.setFont("helvetica","normal"),en.text(nn,as+10,vs),en.setTextColor(15,23,42),en.setFont("helvetica","bold"),en.text(ii,as+Ci-10,vs,{align:"right"})},Vn=0;if(Fn.type==="Circle")Vn=4;else if(Fn.type==="Rectangle")Vn=4;else if(Fn.type==="Line")Vn=1,(Yt=Fn.dimensions)!=null&&Yt.width&&Vn++,Fn.surfaceInfluence&&Vn++;else if(Fn.type==="Semicircle")Vn=6;else if(Fn.type==="Polygon")Vn=2;else if(Fn.type==="CircleWithSections"&&(Vn=3,Fn.sections&&Fn.sections.length>0)){const nn=Math.ceil(Fn.sections.length/3);Vn+=nn*3}const _r=Math.max(15+Vn*12+30,60),Wr=297-188.2-20;en.setFillColor(248,250,252),en.setDrawColor(226,232,240),en.roundedRect(188.2,Gn,Wr,_r,3,3,"FD"),en.setFont("helvetica","bold"),en.setFontSize(12),en.setTextColor(51,65,85),en.text("Caractéristiques",188.2+10,Gn+15);let _n=Gn+30;en.setFontSize(10),Fn.type==="Circle"?(Lr("Rayon",He(Fn.radius),188.2,_n,Wr),_n+=12,Lr("Diamètre",He(Fn.radius*2),188.2,_n,Wr),_n+=12,Lr("Surface",He(Fn.surface,"m²"),188.2,_n,Wr),_n+=12,Lr("Périmètre",He(Fn.perimeter),188.2,_n,Wr)):Fn.type==="Rectangle"?(Lr("Largeur",He(Fn.width),188.2,_n,Wr),_n+=12,Lr("Hauteur",He(Fn.height),188.2,_n,Wr),_n+=12,Lr("Surface",He(Fn.surface,"m²"),188.2,_n,Wr),_n+=12,Lr("Périmètre",He(Fn.perimeter),188.2,_n,Wr)):Fn.type==="Line"?(Lr("Longueur",He(Fn.length),188.2,_n,Wr),_n+=12,(Ln=Fn.dimensions)!=null&&Ln.width&&(Lr("Largeur d'influence",He(Fn.dimensions.width),188.2,_n,Wr),_n+=12),Fn.surfaceInfluence&&Lr("Surface d'influence",He(Fn.surfaceInfluence,"m²"),188.2,_n,Wr)):Fn.type==="Semicircle"?(Lr("Rayon",He(Fn.radius),188.2,_n,Wr),_n+=12,Lr("Diamètre",He(Fn.radius*2),188.2,_n,Wr),_n+=12,Lr("Surface",He(Fn.surface,"m²"),188.2,_n,Wr),_n+=12,Lr("Périmètre",He(Fn.perimeter),188.2,_n,Wr),_n+=12,Lr("Longueur d'arc",He(Fn.arcLength),188.2,_n,Wr),_n+=12,Lr("Angle d'ouverture",`${Fn.openingAngle.toFixed(1)}°`,188.2,_n,Wr)):Fn.type==="Polygon"?(Lr("Surface",He(Fn.surface,"m²"),188.2,_n,Wr),_n+=12,Lr("Périmètre",He(Fn.perimeter),188.2,_n,Wr)):Fn.type==="CircleWithSections"&&(Lr("Rayon",He(Fn.radius),188.2,_n,Wr),_n+=12,Lr("Surface totale",He(Fn.surface,"m²"),188.2,_n,Wr),_n+=12,Lr("Périmètre",He(Fn.perimeter),188.2,_n,Wr),_n+=20,Fn.sections&&Fn.sections.length>0&&(_n=yr(Fn.sections,en,188.2,_n,Wr)))}}catch(li){console.error(`[generateSynthesis] Erreur capture forme ${jr+1}:`,li)}}}y.value.removeControl(Ml),en.save(`synthese_${mt.nom}.pdf`)}catch(mr){console.error("[generateSynthesis] Erreur:",mr),alert("Une erreur est survenue lors de la génération de la synthèse. Veuillez réessayer.")}finally{Xe.value=!1}}const Ct=hx.debounce(()=>{const mt=dn.startMeasure("invalidateMapSize","MapView");if(!y.value){mt();return}Ko(()=>{dn.measure("invalidateMapSize:nextTick",()=>{var qe;try{if(y.value&&y.value.getContainer()&&document.body.contains(y.value.getContainer())){if(y.value.invalidateSize({animate:!1}),(qe=R.value)!=null&&qe.getLayers().length)try{N()}catch(Ft){console.warn("[invalidateMapSize] Erreur lors de l'ajustement de la vue:",Ft)}}else console.warn("[invalidateMapSize] Carte non valide pour l'invalidation")}catch(Ft){console.warn("[invalidateMapSize] Erreur lors de l'invalidation de la taille de la carte:",Ft)}mt()},"MapView")})},250);function Ut(){Ct()}bs(I,(mt,qe)=>{mt&&mt.id!==(qe==null?void 0:qe.id)&&Ko(()=>{Ut()})});const Gt=Rt(null),fn=Rt(!1),pn=Rt([]),et=gr(()=>{if(console.log("[MapView][filteredSalaries] Computing with:",{selectedEntreprise:Gt.value,salaries:V.value,salariesLength:V.value.length}),!Gt.value)return[];const mt=V.value.filter(qe=>{var ar,Wn,Xt;const Ft=qe.entreprise,kn=typeof Ft=="object"&&Ft!==null?Ft.id:Ft;return console.log("[MapView][filteredSalaries] Checking salarie:",{salarie:qe,salarieEntreprise:Ft,salarieEntrepriseId:kn,selectedEntrepriseId:(ar=Gt.value)==null?void 0:ar.id,matches:kn===((Wn=Gt.value)==null?void 0:Wn.id)}),kn===((Xt=Gt.value)==null?void 0:Xt.id)});return console.log("[MapView][filteredSalaries] Filtered result:",mt),mt});function it(mt){if(!mt)return"";const qe=mt.first_name||"",Ft=mt.last_name?mt.last_name.toUpperCase():"",kn=mt.company_name||mt.role||"";return`${qe} ${Ft} (${kn})`}async function nt(){fn.value=!0;try{const mt=await hr.get("/users/",{params:{role:"ENTREPRISE"}});pn.value=mt.data}catch(mt){console.error("[MapView] Error loading entreprises:",mt),pn.value=[]}finally{fn.value=!1}}async function Vt(mt){console.log("[MapView][selectEntreprise] Sélection de l'entreprise:",mt),Gt.value=mt,Se.value=!0;try{console.log("[MapView][selectEntreprise] Envoi de la requête avec params:",{role:"SALARIE",entreprise:mt.id});const qe=await hr.get("/users/",{params:{role:"SALARIE",entreprise:mt.id}});console.log("[MapView][selectEntreprise] Réponse reçue:",qe.data),V.value=qe.data,console.log("[MapView][selectEntreprise] Salaries mis à jour:",V.value)}catch(qe){console.error("[MapView] Error loading salaries for entreprise:",qe),V.value=[]}finally{Se.value=!1}}function Qt(){Gt.value=null,X.value=null,me.value=null,V.value=[],W.value=[],q.value=[]}function Nn(){X.value=null,me.value=null,W.value=[],q.value=[]}function wn(){me.value=null,q.value=[]}async function An(mt){var qe,Ft,kn,ar,Wn,Xt;console.log(`
[MapView][selectSalarie] ====== DÉBUT SÉLECTION SALARIE ======`),console.log("Informations du salarie:",{id:mt.id,username:mt.username,company:mt.company_name,role:mt.role}),console.log("Contexte utilisateur:",{userType:(qe=z.user)==null?void 0:qe.user_type,userId:(Ft=z.user)==null?void 0:Ft.id,userRole:(kn=z.user)==null?void 0:kn.role,selectedEntrepriseId:(ar=Gt.value)==null?void 0:ar.id}),X.value=mt,Re.value=!0;try{const vn={role:"VISITEUR",salarie:mt.id};z.isEntreprise?(console.log("Ajout de l'ID de l'entreprise connectée:",(Wn=z.user)==null?void 0:Wn.id),vn.entreprise=(Xt=z.user)==null?void 0:Xt.id):Gt.value&&(console.log("Ajout de l'ID de l'entreprise sélectionnée:",Gt.value.id),vn.entreprise=Gt.value.id),console.log("Paramètres de la requête:",vn);const It=await hr.get("/users/",{params:vn});console.log("Réponse reçue du serveur:",{status:It.status,dataLength:Array.isArray(It.data)?It.data.length:"non-array",data:It.data}),Array.isArray(It.data)?(W.value=It.data,console.log(`${It.data.length} visiteurs chargés`),It.data.forEach((Yt,Ln)=>{console.log(`Visiteur ${Ln+1}:`,{id:Yt.id,username:Yt.username,company:Yt.company_name,salarie:Yt.salarie})})):(console.warn("Format de réponse inattendu:",It.data),W.value=[]),W.value.length===0&&console.warn("Aucun visiteur trouvé pour ce salarie")}catch(vn){if(console.error("ERREUR lors du chargement des visiteurs:",vn),vn&&typeof vn=="object"&&"response"in vn){const It=vn;console.error("Détails de l'erreur:",{status:It.response.status,data:It.response.data})}W.value=[]}finally{Re.value=!1,console.log(`[MapView][selectSalarie] ====== FIN SÉLECTION SALARIE ======
`)}}function or(){G.value=!1,K.value=null}function xn(mt){console.log("[MapView][handleFilterChange] Nouveaux filtres reçus:",JSON.stringify(mt,null,2)),console.log("[MapView][handleFilterChange] Filtres actuels dans le store:",JSON.stringify({accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}},null,2)),console.log("[MapView][handleFilterChange] Mise à jour des filtres dans le store"),o.updateFilters(mt),console.log("[MapView][handleFilterChange] Éléments dans le store:",{count:o.elements.length,ids:o.elements.map(qe=>qe.id)}),console.log("[MapView][handleFilterChange] Mise à jour de l'affichage de la carte"),En(),setTimeout(()=>{console.log("[MapView][handleFilterChange] Mise à jour forcée de l'affichage"),En()},100),console.log("[MapView][handleFilterChange] Traitement des filtres terminé")}function En(){if(!R.value)return;const mt={accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}};console.log("[MapView][updateMapDisplay] Mise à jour de l'affichage avec filtres:",JSON.stringify(mt,null,2));const qe={count:o.elements.length,elements:o.elements.map(ct=>({id:ct.id,type_forme:ct.type_forme}))};console.log("[MapView][updateMapDisplay] Éléments dans le store:",JSON.stringify(qe,null,2));const Ft=o.getFilteredElements;console.log("[MapView][updateMapDisplay] Éléments filtrés:",{total:o.elements.length,filtered:Ft.length,filteredIds:Ft.map(ct=>ct.id)});const kn=R.value.getLayers();console.log("[MapView][updateMapDisplay] Couches actuelles:",kn.length);const ar=kn.map(ct=>({_leaflet_id:ct._leaflet_id,_dbId:ct._dbId,hasProperties:!!ct.properties,propertyType:ct.properties?ct.properties.type:null,category:ct.properties?ct.properties.category:null}));console.log("[MapView][updateMapDisplay] Détails des couches:",JSON.stringify(ar,null,2)),console.log("[MapView][updateMapDisplay] État des filtres pour les catégories:",{forages:o.filters.categories.forages,clients:o.filters.categories.clients,entrepots:o.filters.categories.entrepots,livraisons:o.filters.categories.livraisons,cultures:o.filters.categories.cultures,parcelles:o.filters.categories.parcelles});const Wn=new Map;f.value.forEach(ct=>{ct.layer&&ct.id&&Wn.set(ct.id,ct.layer)});const Xt=new Map;kn.forEach(ct=>{ct._dbId&&Xt.set(ct,ct._dbId)});const vn=new Set(Ft.map(ct=>ct.id));console.log("[MapView][updateMapDisplay] Début du traitement des couches");const It=Array.from(vn);console.log("[MapView][updateMapDisplay] IDs des éléments filtrés:",JSON.stringify(It));let Yt=0,Ln=0,mr=0;kn.forEach(ct=>{var Di,Si;const On=ct._dbId,xr=ct._leaflet_id;if(!On){if(!ct.properties){mr++,console.log(`[MapView][updateMapDisplay] Couche ${xr} sans dbId et sans propriétés, ignorée`);return}ct._dbId=Date.now()+Math.floor(Math.random()*1e3),console.log(`[MapView][updateMapDisplay] Couche ${xr} sans dbId, ID temporaire assigné: ${ct._dbId}`)}const Ti=ct.properties||{},Ir=Ti.type||ct.type_forme||"";let Er=Ti.category;if(ct._dbId){const ai=o.elements.find(Fr=>Fr.id===ct._dbId);if(ai){const Fr=ai.data;Fr&&Fr.category&&(Er!==Fr.category&&(console.log(`[MapView][updateMapDisplay] Catégorie différente détectée - Propriétés: ${Er}, Store: ${Fr.category} pour la couche ${ct._dbId}`),Er=Fr.category),ct.properties||(ct.properties={}),ct.properties.category=Er)}}Er||(Er="default");const lr=Ti.accessLevel||"visitor";console.log(`[MapView][updateMapDisplay] Couche ${xr} (dbId: ${ct._dbId}): type=${Ir}, category=${Er}, accessLevel=${lr}`),console.log("[MapView][updateMapDisplay] Filtres actuels:",JSON.stringify(o.filters));let Vr=!1;Ir?Vr=Ir in o.filters.shapeTypes&&o.filters.shapeTypes[Ir]===!0:Vr=o.filters.shapeTypes.Polygon===!0;let rr=!1;Er?Er in o.filters.categories?(rr=o.filters.categories[Er]===!0,console.log(`[MapView][updateMapDisplay] Vérification de la catégorie ${Er}: ${rr}`)):(rr=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catégorie ${Er} non trouvée dans les filtres, utilisation de 'forages': ${rr}`)):(rr=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catégorie non spécifiée, utilisation de 'forages': ${rr}`));let Or=!1;const er={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let en="visitor";er.company?en="company":er.employee?en="employee":er.visitor&&(en="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès sélectionné par l'utilisateur: ${en}`),en==="company"?Or=!0:en==="employee"?Or=lr==="employee"||lr==="visitor":en==="visitor"&&(Or=lr==="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès de la couche: ${lr}, visible: ${Or}`);const qi=Vr&&rr&&Or;console.log(`[MapView][updateMapDisplay] Visibilité de la couche ${xr}: typeVisible=${Vr}, categoryVisible=${rr}, accessLevelVisible=${Or}, isVisible=${qi}`),console.log(`[MapView][updateMapDisplay] Détails de la couche ${xr}: type=${Ir}, category=${Er}, accessLevel=${lr}`),console.log("[MapView][updateMapDisplay] Filtres actuels:",JSON.stringify({accessLevels:o.filters.accessLevels,categories:o.filters.categories,shapeTypes:o.filters.shapeTypes},null,2)),qi?R.value.hasLayer(ct)?(Yt++,console.log(`[MapView][updateMapDisplay] Couche ${ct._dbId} (${Ir}) déjà visible avec catégorie ${((Si=ct.properties)==null?void 0:Si.category)||"non définie"}`)):(Er&&Er!=="default"&&(!ct.properties||!ct.properties.category)&&(ct.properties||(ct.properties={}),ct.properties.category=Er,console.log(`[MapView][updateMapDisplay] Catégorie définie avant ajout: ${Er} pour la couche ${ct._dbId}`)),R.value.addLayer(ct),Yt++,console.log(`[MapView][updateMapDisplay] Affichage de la couche ${ct._dbId} (${Ir}) avec catégorie ${((Di=ct.properties)==null?void 0:Di.category)||"non définie"}`)):R.value.hasLayer(ct)?(R.value.removeLayer(ct),Ln++,console.log(`[MapView][updateMapDisplay] Masquage de la couche ${ct._dbId} (${Ir}) - Filtres non respectés`)):(Ln++,console.log(`[MapView][updateMapDisplay] Couche ${ct._dbId} (${Ir}) déjà masquée`))}),console.log("[MapView][updateMapDisplay] Début de la restauration des couches filtrées"),console.log("[MapView][updateMapDisplay] Nombre de formes dans shapes.value:",f.value.length),f.value.forEach(ct=>{var Si;if(!ct.layer){console.log("[MapView][updateMapDisplay] Forme sans couche, ignorée");return}const On=ct.layer,xr=On._leaflet_id,Ti=On._dbId;if(console.log(`[MapView][updateMapDisplay] Traitement de la forme ${xr} (dbId: ${Ti})`),R.value.hasLayer(On)){console.log(`[MapView][updateMapDisplay] La couche ${xr} est déjà dans le featureGroup, ignorée`);return}const Ir=On.properties||{},Er=Ir.type||On.type_forme||"";let lr=null;if(On._dbId){const ai=o.elements.find(Fr=>Fr.id===On._dbId);if(ai){const Fr=ai.data;Fr&&Fr.category&&(lr=Fr.category,console.log(`[MapView][updateMapDisplay] Catégorie récupérée depuis le store: ${lr} pour la couche ${On._dbId}`))}}!lr&&Ir.category&&(lr=Ir.category,console.log(`[MapView][updateMapDisplay] Catégorie récupérée depuis les propriétés: ${lr} pour la couche ${xr}`)),lr||(lr="default");const Vr=Ir.accessLevel||"visitor";if(On.properties||(On.properties={}),lr&&lr!=="default"&&(On.properties.category=lr,console.log(`[MapView][updateMapDisplay] Catégorie définie/restaurée: ${lr} pour la couche ${On._dbId}`),On._dbId)){const ai=o.elements.find(Fr=>Fr.id===On._dbId);if(ai){const Fr=ai;Fr.data||(Fr.data={}),Fr.data.category!==lr&&(console.log(`[MapView][updateMapDisplay] Mise à jour de la catégorie dans le store: ${lr} pour l'élément ${On._dbId}`),Fr.data.category=lr,o.$patch({unsavedChanges:!0}))}}On.properties.accessLevel||(On.properties.accessLevel="visitor"),console.log(`[MapView][updateMapDisplay] Propriétés de la couche ${xr}: type=${Er}, category=${lr}, accessLevel=${Vr}`);let rr=!1;Er?rr=Er in o.filters.shapeTypes&&o.filters.shapeTypes[Er]===!0:rr=o.filters.shapeTypes.Polygon===!0;let Or=!1;lr?lr in o.filters.categories?(Or=o.filters.categories[lr]===!0,console.log(`[MapView][updateMapDisplay] Vérification de la catégorie ${lr}: ${Or}`)):(Or=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catégorie ${lr} non trouvée, utilisation de 'forages': ${Or}`)):(Or=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Pas de catégorie, utilisation de 'forages': ${Or}`));let er=!1;const en={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let qi="visitor";en.company?qi="company":en.employee?qi="employee":en.visitor&&(qi="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès sélectionné par l'utilisateur (2ème étape): ${qi}`),qi==="company"?er=!0:qi==="employee"?er=Vr==="employee"||Vr==="visitor":qi==="visitor"&&(er=Vr==="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès de la couche (2ème étape): ${Vr}, visible: ${er}`);const Di=rr&&Or&&er;if(console.log(`[MapView][updateMapDisplay] Visibilité de la couche ${xr}: typeVisible=${rr}, categoryVisible=${Or}, accessLevelVisible=${er}, isVisible=${Di}`),Di){if(lr&&lr!=="default"&&(On.properties||(On.properties={}),On.properties.category=lr,console.log(`[MapView][updateMapDisplay] Catégorie définie avant restauration: ${lr} pour la couche ${xr}`),On._dbId)){const ai=o.elements.find(Fr=>Fr.id===On._dbId);if(ai){const Fr=ai;Fr.data||(Fr.data={}),Fr.data.category!==lr&&(console.log(`[MapView][updateMapDisplay] Mise à jour de la catégorie dans le store avant restauration: ${lr} pour l'élément ${On._dbId}`),Fr.data.category=lr,o.$patch({unsavedChanges:!0}))}}R.value.addLayer(On),Yt++,console.log(`[MapView][updateMapDisplay] Restauration de la couche ${xr} (${Er}) avec catégorie ${((Si=On.properties)==null?void 0:Si.category)||"non définie"} - Filtres respectés`)}else console.log(`[MapView][updateMapDisplay] La couche ${xr} (${Er}) reste masquée - Filtres non respectés`)}),console.log(`[MapView][updateMapDisplay] Restauration terminée: ${Yt} couches visibles au total`),console.log(`[MapView][updateMapDisplay] Statistiques: ${Yt} couches visibles, ${Ln} couches masquées, ${mr} couches sans dbId`),console.log("[MapView][updateMapDisplay] Mise à jour terminée")}function Cn(mt){if(R.value){const Ft=R.value.getLayers().find(kn=>kn._leaflet_id===mt.id);Ft&&(Ft.properties.name=mt.title,Ft.properties.description=mt.description,Ft.properties.columnId=mt.columnId,Ft.properties.accessLevel=mt.accessLevel,Ft.setNoteStyle({color:mt.style.color,fillColor:mt.style.fillColor,weight:mt.style.weight,fillOpacity:mt.style.fillOpacity,radius:mt.style.radius}),Ft.closePopup(),Ft.unbindPopup(),Ft.bindPopup(Ft.createPopupContent()))}u.success("Note enregistrée avec succès")}async function cr(mt){var qe;me.value=mt,T.value=!0;try{const Ft={visiteur:mt.id};z.isEntreprise?Ft.entreprise=(qe=z.user)==null?void 0:qe.id:Gt.value&&(Ft.entreprise=Gt.value.id),X.value&&(Ft.salarie=X.value.id);const kn=await hr.get("/plans/",{params:Ft});q.value=kn.data}catch(Ft){console.error("[MapView] Error loading client plans:",Ft),q.value=[]}finally{T.value=!1}}function yr(mt,qe,Ft,kn,ar){if(!mt||mt.length===0)return kn;const Wn=[...mt].sort((On,xr)=>(xr.surface||0)-(On.surface||0)),Xt=ar,vn=7,It=6,Yt=2,Ln=[{header:"Nom",width:.3,align:"left"},{header:"Surface",width:.2,align:"right"},{header:"Angles",width:.25,align:"right"},{header:"Rayon",width:.15,align:"right"},{header:"Type",width:.1,align:"center"}],mr=vn+It*Wn.length;qe.setFillColor(248,250,252),qe.setDrawColor(226,232,240),qe.roundedRect(Ft,kn,Xt,mr+Yt*2,2,2,"FD"),qe.setFillColor(241,245,249),qe.rect(Ft+Yt,kn+Yt,Xt-Yt*2,vn,"F"),qe.setFont("helvetica","bold"),qe.setFontSize(7),qe.setTextColor(51,65,85);let ct=Ft+Yt;return Ln.forEach(On=>{const xr=On.width*(Xt-Yt*2);On.align==="right"?qe.text(On.header,ct+xr-Yt,kn+Yt+5,{align:"right"}):On.align==="center"?qe.text(On.header,ct+xr/2,kn+Yt+5,{align:"center"}):qe.text(On.header,ct+Yt/2,kn+Yt+5),ct+=xr}),qe.setFont("helvetica","normal"),qe.setFontSize(6.5),qe.setTextColor(71,85,105),Wn.forEach((On,xr)=>{const Ti=kn+vn+Yt+xr*It;xr%2===0&&(qe.setFillColor(250,252,254),qe.rect(Ft+Yt,Ti,Xt-Yt*2,It,"F"));let Ir=Ft+Yt;const Er=On.name||`Section ${xr+1}`;qe.text(Er,Ir+Yt/2,Ti+4),Ir+=Ln[0].width*(Xt-Yt*2);const lr=He(On.surface||0,"m²");qe.text(lr,Ir+Ln[1].width*(Xt-Yt*2)-Yt,Ti+4,{align:"right"}),Ir+=Ln[1].width*(Xt-Yt*2);const Vr=On.startAngle===0&&On.endAngle===360?"Complet":`${On.startAngle}°-${On.endAngle}°`;qe.text(Vr,Ir+Ln[2].width*(Xt-Yt*2)-Yt,Ti+4,{align:"right"}),Ir+=Ln[2].width*(Xt-Yt*2);const rr=He(On.radius||0);qe.text(rr,Ir+Ln[3].width*(Xt-Yt*2)-Yt,Ti+4,{align:"right"}),Ir+=Ln[3].width*(Xt-Yt*2);const Or=On.startAngle===0&&On.endAngle===360?"C":"P";qe.text(Or,Ir+Ln[4].width*(Xt-Yt*2)/2,Ti+4,{align:"center"})}),qe.setDrawColor(226,232,240),qe.setLineWidth(.05),qe.line(Ft+Yt,kn+vn+Yt,Ft+Xt-Yt,kn+vn+Yt),kn+mr+Yt*2}return(mt,qe)=>{var Ft,kn,ar,Wn,Xt,vn;return Ue(),Ge(Rn,null,[E("div",JF,[E("div",XF,[Xe.value?(Ue(),Ge("div",QF,qe[8]||(qe[8]=[uc('<div class="bg-white/90 rounded-2xl p-8 max-w-md shadow-2xl border border-gray-100"><div class="flex flex-col items-center"><div class="relative w-24 h-24 mb-6"><div class="absolute inset-0 border-4 border-primary-200 rounded-full"></div><div class="absolute inset-0 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"></div><div class="absolute inset-2 border-2 border-primary-400/30 rounded-full animate-pulse"></div><div class="absolute inset-0 flex items-center justify-center"><svg class="w-8 h-8 text-primary-600 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div><h3 class="text-xl font-semibold text-gray-900 mb-2"> Génération de la synthèse </h3><div class="space-y-2 text-center"><p class="text-primary-600 font-medium"> Capture des formes en cours... </p><p class="text-sm text-gray-500"> Nous optimisons la qualité de vos captures pour un rendu parfait </p></div></div></div>',1)]))):un("",!0),I.value?un("",!0):(Ue(),Ge("div",e9,[E("div",t9,[qe[11]||(qe[11]=uc('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+a1+'" alt="TagMap Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur TagMap</h1><p class="text-gray-600 mb-8">Pour commencer à dessiner, vous devez d&#39;abord créer un nouveau plan ou charger un plan existant.</p>',3)),E("div",n9,[E("button",{onClick:qe[0]||(qe[0]=It=>le.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},qe[9]||(qe[9]=[E("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),di(" Créer un nouveau plan ")])),E("button",{onClick:qe[1]||(qe[1]=It=>xe.value=!0),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},qe[10]||(qe[10]=[E("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),di(" Charger un plan existant ")]))])])])),In(E("div",r9,[(Ue(),za(P0,{to:"body"},[I.value&&!Xe.value?(Ue(),Ge("div",i9,[ci(uI,{"last-save":(Ft=I.value)!=null&&Ft.date_modification?new Date(I.value.date_modification):void 0,"plan-name":(kn=I.value)==null?void 0:kn.nom,"plan-description":(ar=I.value)==null?void 0:ar.description,"save-status":O.value,onChangeMapType:qn(ae),onCreateNewPlan:qe[2]||(qe[2]=It=>le.value=!0),onLoadPlan:qe[3]||(qe[3]=It=>xe.value=!0),onSavePlan:Z,onAdjustView:pe,onGenerateSummary:kt},null,8,["last-save","plan-name","plan-description","save-status","onChangeMapType"])])):un("",!0)])),E("div",s9,[r.value&&I.value&&!Xe.value?(Ue(),Ge("div",{key:0,onClick:ue,class:"md:hidden fixed inset-0 bg-black/30 z-[1999] transition-opacity duration-300"})):un("",!0),I.value&&!Xe.value?(Ue(),Ge("div",{key:1,onClick:ue,class:"md:hidden fixed left-0 right-0 z-[2500] bg-white py-3 px-3 shadow-lg border-t border-gray-200 flex items-center justify-between",style:{height:"var(--mobile-bottom-toolbar-height)",bottom:"0"}},qe[12]||(qe[12]=[uc('<div class="flex items-center w-full justify-center"><div class="flex items-center space-x-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg><span class="text-sm text-gray-500 font-medium">Outils de dessin</span></div></div>',1)]))):un("",!0),E("div",o9,[E("div",{ref_key:"mapContainer",ref:n,class:"absolute inset-0 z-[1000]"},null,512)]),I.value&&!Xe.value?(Ue(),Ge("div",{key:2,class:Ii([r.value?"translate-y-0":"translate-y-full md:translate-y-0","w-full md:w-64 bg-white border-t md:border-t-0 md:border-l border-gray-200 flex-shrink-0 z-[2000] transition-transform duration-300 ease-out","fixed md:relative bottom-0 md:bottom-auto right-0 md:top-0 h-[80%] md:h-auto rounded-t-xl md:rounded-none shadow-lg md:shadow-none overflow-y-auto"]),style:{bottom:"var(--mobile-bottom-toolbar-height)"}},[E("div",{class:"md:hidden w-full flex justify-between items-center px-4 py-2 border-b border-gray-200"},[E("div",{class:"flex items-center"},[E("div",{onClick:ue,class:"w-10 h-1.5 bg-gray-300 rounded-full cursor-pointer mr-3"})]),E("button",{onClick:ue,class:"p-1.5 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors"},qe[13]||(qe[13]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),ci(MO,{"current-tool":qn(d),"selected-shape":ce.value,"all-layers":((Wn=qn(R))==null?void 0:Wn.getLayers())||[],onToolChange:qn(_),onStyleUpdate:qn(M),onPropertiesUpdate:de,onDeleteShape:$e,onFilterChange:xn},null,8,["current-tool","selected-shape","all-layers","onToolChange","onStyleUpdate"])],2)):un("",!0)]),Xe.value?(Ue(),Ge("div",a9,qe[14]||(qe[14]=[uc('<div class="text-center"><div class="mb-4"><svg class="animate-spin h-10 w-10 mx-auto text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div><p class="text-lg font-medium text-gray-900">Génération de la synthèse en cours...</p><p class="text-sm text-gray-500 mt-2">Veuillez patienter pendant que nous analysons votre plan.</p></div>',1)]))):un("",!0)],512),[[Hg,I.value]]),(Ue(),za(P0,{to:"body"},[ci(gx,{ref_key:"newPlanModalRef",ref:ne,modelValue:le.value,"onUpdate:modelValue":qe[4]||(qe[4]=It=>le.value=It),onCreated:Qe,onSalarieSelected:qe[5]||(qe[5]=It=>X.value=It),onVisiteurSelected:qe[6]||(qe[6]=It=>Y.value=It)},null,8,["modelValue"])])),(Ue(),za(P0,{to:"body"},[xe.value?(Ue(),Ge("div",l9,[E("div",u9,[E("div",c9,[qe[16]||(qe[16]=E("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),E("button",{onClick:qe[7]||(qe[7]=It=>xe.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},qe[15]||(qe[15]=[E("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("div",f9,[qn(z).isAdmin?(Ue(),Ge("div",h9,[Gt.value?X.value?me.value?(Ue(),Ge("div",k9,[E("div",T9,[E("button",{onClick:wn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},qe[31]||(qe[31]=[E("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),di(" Retour à la liste des clients ")])),qe[32]||(qe[32]=E("span",{class:"mx-2 text-gray-400"},"|",-1)),E("span",D9,Wt(it(me.value)),1)]),qe[34]||(qe[34]=E("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),E("div",B9,[T.value?(Ue(),Ge(Rn,{key:0},Nr(3,It=>E("div",{key:It,class:"animate-pulse"},qe[33]||(qe[33]=[E("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[E("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),E("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),E("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Ue(!0),Ge(Rn,{key:1},Nr(q.value,It=>(Ue(),Ge("button",{key:It.id,onClick:Yt=>We(It.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[E("div",O9,Wt(It.nom),1),E("div",I9,Wt(It.description),1),E("div",R9," Modifié le "+Wt(ve(It.date_modification)),1)],8,N9))),128))])])):(Ue(),Ge("div",L9,[E("div",S9,[E("button",{onClick:Nn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},qe[25]||(qe[25]=[E("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),di(" Retour à la liste des salaries ")])),qe[26]||(qe[26]=E("span",{class:"mx-2 text-gray-400"},"|",-1)),E("span",C9,Wt(it(X.value)),1)]),qe[30]||(qe[30]=E("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),E("div",E9,[Re.value?(Ue(),Ge(Rn,{key:0},Nr(3,It=>E("div",{key:It,class:"animate-pulse"},qe[27]||(qe[27]=[E("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[E("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),E("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ue(),Ge(Rn,{key:1},[fe.value.length===0?(Ue(),Ge("div",P9,qe[28]||(qe[28]=[E("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarie",-1),E("div",{class:"text-sm text-gray-400"}," Veuillez vérifier que des visiteurs ont été assignés à ce salarie ",-1)]))):(Ue(!0),Ge(Rn,{key:1},Nr(fe.value,It=>(Ue(),Ge("button",{key:It.id,onClick:Yt=>cr(It),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[E("div",null,[E("div",A9,Wt(it(It)),1)]),qe[29]||(qe[29]=E("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,M9))),128))],64))])])):(Ue(),Ge("div",v9,[E("div",y9,[E("button",{onClick:Qt,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},qe[20]||(qe[20]=[E("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),di(" Retour à la liste des entreprises ")])),qe[21]||(qe[21]=E("span",{class:"mx-2 text-gray-400"},"|",-1)),E("span",_9,Wt(it(Gt.value)),1)]),qe[24]||(qe[24]=E("h3",{class:"font-medium text-gray-700"},"Sélectionnez un salarie",-1)),E("div",b9,[Se.value?(Ue(),Ge(Rn,{key:0},Nr(3,It=>E("div",{key:It,class:"animate-pulse"},qe[22]||(qe[22]=[E("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[E("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),E("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ue(!0),Ge(Rn,{key:1},Nr(et.value,It=>(Ue(),Ge("button",{key:It.id,onClick:Yt=>An(It),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[E("div",null,[E("div",x9,Wt(it(It)),1)]),qe[23]||(qe[23]=E("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,w9))),128))])])):(Ue(),Ge("div",d9,[qe[19]||(qe[19]=E("h3",{class:"font-medium text-gray-700"},"Sélectionnez une entreprise",-1)),E("div",p9,[fn.value?(Ue(),Ge(Rn,{key:0},Nr(3,It=>E("div",{key:It,class:"animate-pulse"},qe[17]||(qe[17]=[E("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[E("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),E("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ue(!0),Ge(Rn,{key:1},Nr(pn.value,It=>(Ue(),Ge("button",{key:It.id,onClick:Yt=>Vt(It),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[E("div",null,[E("div",m9,Wt(it(It)),1)]),qe[18]||(qe[18]=E("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,g9))),128))])]))])):qn(z).isSalarie?(Ue(),Ge("div",F9,[me.value?(Ue(),Ge("div",H9,[E("div",G9,[E("button",{onClick:wn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},qe[39]||(qe[39]=[E("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),di(" Retour à la liste des clients ")])),qe[40]||(qe[40]=E("span",{class:"mx-2 text-gray-400"},"|",-1)),E("span",q9,Wt(it(me.value)),1)]),qe[42]||(qe[42]=E("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),E("div",W9,[T.value?(Ue(),Ge(Rn,{key:0},Nr(3,It=>E("div",{key:It,class:"animate-pulse"},qe[41]||(qe[41]=[E("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[E("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),E("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),E("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Ue(!0),Ge(Rn,{key:1},Nr(q.value,It=>(Ue(),Ge("button",{key:It.id,onClick:Yt=>We(It.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[E("div",K9,Wt(It.nom),1),E("div",Y9,Wt(It.description),1),E("div",J9," Modifié le "+Wt(ve(It.date_modification)),1)],8,Z9))),128))])])):(Ue(),Ge("div",j9,[qe[38]||(qe[38]=E("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),E("div",z9,[Re.value?(Ue(),Ge(Rn,{key:0},Nr(3,It=>E("div",{key:It,class:"animate-pulse"},qe[35]||(qe[35]=[E("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[E("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),E("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ue(),Ge(Rn,{key:1},[fe.value.length===0?(Ue(),Ge("div",$9,qe[36]||(qe[36]=[E("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarie",-1),E("div",{class:"text-sm text-gray-400"}," Veuillez vérifier que des visiteurs ont été assignés à ce salarie ",-1)]))):(Ue(!0),Ge(Rn,{key:1},Nr(fe.value,It=>(Ue(),Ge("button",{key:It.id,onClick:Yt=>cr(It),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[E("div",null,[E("div",V9,Wt(it(It)),1)]),qe[37]||(qe[37]=E("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,U9))),128))],64))])]))])):qn(z).isEntreprise?(Ue(),Ge("div",X9,Wt(qn(z).isEntreprise?"...":""),1)):(Ue(),Ge("div",Q9,[qn(i).plans.length===0?(Ue(),Ge("div",ej,qe[43]||(qe[43]=[E("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(Ue(),Ge("div",tj,[(Ue(!0),Ge(Rn,null,Nr(qn(i).plans,It=>(Ue(),Ge("button",{key:It.id,onClick:Yt=>We(It.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[E("div",rj,Wt(It.nom),1),E("div",ij,Wt(It.description),1),E("div",sj," Modifié le "+Wt(ve(It.date_modification)),1)],8,nj))),128))]))]))])])])):un("",!0)]))])]),G.value?(Ue(),za(dx,{key:0,note:K.value,"is-new-note":!((Xt=K.value)!=null&&Xt.id),location:(vn=K.value)==null?void 0:vn.location,onClose:or,onSave:Cn},null,8,["note","is-new-note","location"])):un("",!0)],64)}}}),oj={class:"fixed inset-0 z-[3001] overflow-y-auto"},aj={class:"flex items-center justify-center min-h-screen w-full p-0"},lj={class:"relative bg-white w-full h-full max-h-full overflow-y-auto md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},uj={class:"p-4 md:p-6"},cj={class:"flex justify-between items-center mb-4 border-b pb-4"},fj={class:"text-xl font-semibold text-gray-900",id:"modal-headline"},hj={class:"mt-4"},dj={key:0,class:"mb-4 rounded-md bg-red-50 p-4"},pj={class:"flex"},gj={class:"ml-3"},mj={class:"text-sm font-medium text-red-800"},vj={key:0},yj={key:1},_j=["value"],bj={key:2},wj={key:3},xj=["value"],Lj={class:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-2"},Sj={key:0,class:"mt-2 text-sm text-red-600"},Cj={key:0,class:"mt-2 text-sm text-red-600"},Ej={key:4},Pj={key:5},Mj={key:0,class:"mt-2 text-sm text-red-600"},Aj={class:"flex justify-end space-x-3"},kj=["disabled"],Tj={key:0,class:"mr-2"},Dj=oo({__name:"UserFormModal",props:{user:{type:Object,default:()=>({})},salaries:{type:Array,default:()=>[]},entreprises:{type:Array,default:()=>[]},isAdmin:{type:Boolean,default:!1},isEntreprise:{type:Boolean,default:!1},currentSalarie:{type:String,default:void 0},currentEntreprise:{type:String,default:void 0},apiErrors:{type:Array,default:()=>[]},refreshKey:{type:Number,default:0}},emits:["close","save","refresh"],setup(e,{emit:t}){const n=e,r=t,i=Rt(!1),o=Rt(""),s=Rt(""),u=Rt(""),f=Rt(""),d=Rt(""),m=Yl({id:void 0,first_name:"",last_name:"",username:"",email:"",password:"",company_name:"",role:n.isEntreprise?"SALARIE":n.isAdmin?"ADMIN":"VISITEUR",salarie:null,entreprise:null,is_active:!0});Fo(()=>{var w;(w=n.user)!=null&&w.id?(m.id=n.user.id,m.first_name=n.user.first_name||"",m.last_name=n.user.last_name||"",m.username=n.user.username||"",m.email=n.user.email||"",m.company_name=n.user.company_name||"",m.role=n.user.role||"VISITEUR",m.is_active=n.user.is_active??!0,n.user.salarie?typeof n.user.salarie=="object"?m.salarie=n.user.salarie.id:m.salarie=n.user.salarie:n.user.salarie_id?m.salarie=n.user.salarie_id:n.currentSalarie&&(m.salarie=parseInt(n.currentSalarie)),n.user.entreprise?typeof n.user.entreprise=="object"?m.entreprise=n.user.entreprise.id:m.entreprise=n.user.entreprise:n.user.entreprise_id?m.entreprise=n.user.entreprise_id:n.currentEntreprise&&(m.entreprise=parseInt(n.currentEntreprise))):(n.currentSalarie&&(m.salarie=parseInt(n.currentSalarie)),n.currentEntreprise&&(m.entreprise=parseInt(n.currentEntreprise)),n.isEntreprise?m.role="SALARIE":n.isAdmin||(m.role="VISITEUR"))}),vp(()=>{m.role==="ADMIN"||m.role==="ENTREPRISE"?(m.salarie=null,m.entreprise=null):m.role==="SALARIE"&&(m.salarie=null,n.isEntreprise&&n.currentEntreprise&&(m.entreprise=parseInt(n.currentEntreprise)))}),vp(()=>{o.value="",s.value="",u.value="",f.value="",n.apiErrors&&n.apiErrors.length>0&&n.apiErrors.forEach(w=>{switch(w.field){case"email":o.value=w.message;break;case"username":s.value=w.message;break;case"password":u.value=w.message;break;case"non_field_error":default:f.value=w.message;break}})});async function y(){o.value="",s.value="",u.value="",f.value="";let w=!0;if(m.id||(m.password!==d.value?(u.value="Les mots de passe ne correspondent pas",w=!1):m.password.length<8&&(u.value="Le mot de passe doit contenir au moins 8 caractères",w=!1)),!!w){i.value=!0;try{const _={...m};m.id&&delete _.password,n.isEntreprise&&["SALARIE","VISITEUR"].includes(m.role)&&(_.entreprise_id=n.currentEntreprise?parseInt(n.currentEntreprise):void 0),_.salarie&&(_.salarie_id=_.salarie,delete _.salarie),n.currentSalarie&&m.role==="VISITEUR"&&(_.salarie_id=parseInt(n.currentSalarie)),await r("save",_),r("refresh")}catch(_){console.error("Erreur locale:",_)}finally{i.value=!1}}}return(w,_)=>(Ue(),Ge("div",oj,[E("div",aj,[_[31]||(_[31]=E("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[E("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),E("div",lj,[E("div",null,[E("div",uj,[E("div",cj,[E("h3",fj,Wt(e.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),E("button",{type:"button",onClick:_[0]||(_[0]=M=>w.$emit("close")),class:"text-gray-400 hover:text-gray-500"},_[13]||(_[13]=[E("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("div",hj,[f.value?(Ue(),Ge("div",dj,[E("div",pj,[_[14]||(_[14]=E("div",{class:"flex-shrink-0"},[E("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),E("div",gj,[E("h3",mj,Wt(f.value),1)])])])):un("",!0),E("form",{onSubmit:Vc(y,["prevent"]),class:"space-y-6"},[e.isAdmin?(Ue(),Ge("div",vj,[_[16]||(_[16]=E("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),In(E("select",{id:"role","onUpdate:modelValue":_[1]||(_[1]=M=>m.role=M),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},_[15]||(_[15]=[E("option",{value:"ADMIN"},"Administrateur",-1),E("option",{value:"ENTREPRISE"},"Entreprise",-1),E("option",{value:"SALARIE"},"Salarie",-1),E("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[ss,m.role]])])):un("",!0),e.isAdmin&&m.role==="SALARIE"?(Ue(),Ge("div",yj,[_[18]||(_[18]=E("label",{for:"entreprise",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),In(E("select",{id:"entreprise","onUpdate:modelValue":_[2]||(_[2]=M=>m.entreprise=M),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},[_[17]||(_[17]=E("option",{value:null},"-- Sélectionner une entreprise --",-1)),(Ue(!0),Ge(Rn,null,Nr(e.entreprises,M=>(Ue(),Ge("option",{key:M.id,value:M.id},Wt(M.first_name)+" "+Wt(M.last_name)+" ("+Wt(M.company_name||"Entreprise")+") ",9,_j))),128))],512),[[ss,m.entreprise]])])):un("",!0),e.isEntreprise&&!m.id?(Ue(),Ge("div",bj,[_[20]||(_[20]=E("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),In(E("select",{id:"role","onUpdate:modelValue":_[3]||(_[3]=M=>m.role=M),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},_[19]||(_[19]=[E("option",{value:"SALARIE"},"Salarie",-1),E("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[ss,m.role]])])):un("",!0),(e.isAdmin||e.isEntreprise)&&m.role==="VISITEUR"&&!e.currentSalarie?(Ue(),Ge("div",wj,[_[22]||(_[22]=E("label",{for:"salarie",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),In(E("select",{id:"salarie","onUpdate:modelValue":_[4]||(_[4]=M=>m.salarie=M),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},[_[21]||(_[21]=E("option",{value:null},"-- Sélectionner un salarie --",-1)),(Ue(!0),Ge(Rn,null,Nr(e.salaries,M=>(Ue(),Ge("option",{key:M.id,value:M.id},Wt(M.first_name)+" "+Wt(M.last_name)+" ("+Wt(M.company_name||"Salarie")+") ",9,xj))),128))],512),[[ss,m.salarie]])])):un("",!0),E("div",Lj,[E("div",null,[_[23]||(_[23]=E("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prénom",-1)),In(E("input",{type:"text",id:"first_name","onUpdate:modelValue":_[5]||(_[5]=M=>m.first_name=M),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ei,m.first_name]])]),E("div",null,[_[24]||(_[24]=E("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),In(E("input",{type:"text",id:"last_name","onUpdate:modelValue":_[6]||(_[6]=M=>m.last_name=M),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ei,m.last_name]])])]),E("div",null,[_[25]||(_[25]=E("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),In(E("input",{type:"email",id:"email","onUpdate:modelValue":_[7]||(_[7]=M=>m.email=M),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ei,m.email]]),o.value?(Ue(),Ge("div",Sj,Wt(o.value),1)):un("",!0)]),E("div",null,[_[26]||(_[26]=E("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),In(E("input",{type:"text",id:"username","onUpdate:modelValue":_[8]||(_[8]=M=>m.username=M),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ei,m.username]]),s.value?(Ue(),Ge("div",Cj,Wt(s.value),1)):un("",!0)]),E("div",null,[_[27]||(_[27]=E("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),In(E("input",{type:"text",id:"company_name","onUpdate:modelValue":_[9]||(_[9]=M=>m.company_name=M),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ei,m.company_name]])]),m.id?un("",!0):(Ue(),Ge("div",Ej,[_[28]||(_[28]=E("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),In(E("input",{type:"password",id:"password","onUpdate:modelValue":_[10]||(_[10]=M=>m.password=M),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ei,m.password]])])),m.id?un("",!0):(Ue(),Ge("div",Pj,[_[29]||(_[29]=E("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),In(E("input",{type:"password",id:"password_confirm","onUpdate:modelValue":_[11]||(_[11]=M=>d.value=M),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ei,d.value]]),u.value?(Ue(),Ge("div",Mj,Wt(u.value),1)):un("",!0)])),E("div",Aj,[E("button",{type:"button",onClick:_[12]||(_[12]=M=>w.$emit("close")),class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Annuler "),E("button",{type:"submit",disabled:i.value,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[i.value?(Ue(),Ge("span",Tj,_[30]||(_[30]=[E("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[E("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),E("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):un("",!0),di(" "+Wt(m.id?"Enregistrer":"Créer"),1)],8,kj)])],32)])])])])])]))}}),Bj={class:"fixed inset-0 z-[3001] overflow-y-auto"},Nj={class:"flex items-center justify-center min-h-screen w-full"},Oj={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},Ij={class:"p-4 md:p-6"},Rj={class:"flex items-start"},Fj={class:"ml-4 flex-1"},jj={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},zj={class:"mt-2"},$j={class:"text-sm text-gray-500"},Uj={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3"},Rx=oo({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(e){return(t,n)=>(Ue(),Ge("div",Bj,[E("div",Nj,[n[3]||(n[3]=E("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[E("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),E("div",Oj,[E("div",Ij,[E("div",Rj,[n[2]||(n[2]=E("div",{class:"flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[E("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),E("div",Fj,[E("h3",jj,Wt(e.title),1),E("div",zj,[E("p",$j,Wt(e.message),1)])])]),E("div",Uj,[E("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm",onClick:n[0]||(n[0]=r=>t.$emit("confirm"))}," Confirmer "),E("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm",onClick:n[1]||(n[1]=r=>t.$emit("cancel"))}," Annuler ")])])])])]))}}),Vj={class:"h-full bg-gray-50"},Hj={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Gj={class:"flex justify-between items-center mb-8"},qj={class:"text-3xl font-extrabold text-gray-900"},Wj={key:0},Zj={key:1},Kj={key:2},Yj={key:0},Jj={key:1},Xj={key:2},Qj={class:"bg-white shadow rounded-lg mb-6 p-4"},ez={class:"space-y-4"},tz={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},nz={key:0},rz={key:0,value:"ADMIN"},iz={key:1,value:"ENTREPRISE"},sz={key:1},oz=["value"],az={key:2},lz=["value"],uz={class:"w-full"},cz={class:"bg-white shadow rounded-lg"},fz={class:"overflow-x-auto"},hz={class:"min-w-full divide-y divide-gray-200"},dz={class:"bg-gray-50"},pz={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},gz={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},mz={class:"bg-white divide-y divide-gray-200"},vz={key:0,class:"animate-pulse"},yz={key:1},_z={class:"px-6 py-4 whitespace-nowrap"},bz={class:"flex items-center"},wz={class:"flex-shrink-0 h-10 w-10"},xz={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},Lz={class:"text-primary-600 font-medium"},Sz={class:"ml-4"},Cz={class:"text-sm font-medium text-gray-900"},Ez={class:"text-sm text-gray-500"},Pz={class:"px-6 py-4 whitespace-nowrap"},Mz={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Az={key:0,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},kz={key:1,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Tz={class:"px-6 py-4 whitespace-nowrap"},Dz={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Bz=["onClick"],Nz=["onClick"],Oz={key:0,class:"fixed inset-0 z-[3001] overflow-y-auto"},Iz=oo({__name:"UserListView",setup(e){const t=ga(),n=dc(),r=Rt([]),i=Rt([]),o=Rt([]),s=Rt(!1),u=Rt(!1),f=Rt(null),d=Rt(null),m=Rt(!0),y=Rt([]),w=Yl({role:"",search:"",salarie:"",entreprise:""}),_=gr(()=>t.isAdmin),M=gr(()=>t.isEntreprise),k=gr(()=>t.isSalarie),R=gr(()=>_.value?r.value.filter(V=>V.role==="SALARIE"):M.value?r.value.filter(V=>{var W,q;return V.role==="SALARIE"&&((W=V.entreprise)==null?void 0:W.id)===((q=t.user)==null?void 0:q.id)}):[]),N=gr(()=>{let V=r.value;if(M.value&&(V=V.filter(W=>{var q,X,Y,me,Se;return W.role==="SALARIE"?((q=W.entreprise)==null?void 0:q.id)===((X=t.user)==null?void 0:X.id):W.role==="VISITEUR"?((me=(Y=W.salarie)==null?void 0:Y.entreprise)==null?void 0:me.id)===((Se=t.user)==null?void 0:Se.id):!1})),k.value&&(V=V.filter(W=>{var q,X;return W.role==="VISITEUR"&&(W.salarie_id===((q=t.user)==null?void 0:q.id)||W.salarie&&W.salarie.id===((X=t.user)==null?void 0:X.id))})),(_.value||M.value)&&(w.role&&(V=V.filter(W=>W.role===w.role)),w.salarie&&(V=V.filter(W=>{var X;const q=((X=W.salarie)==null?void 0:X.id)||W.salarie_id;return(q==null?void 0:q.toString())===w.salarie.toString()})),w.entreprise&&_.value&&(V=V.filter(W=>{var q,X,Y,me,Se;return W.role==="SALARIE"?((X=(q=W.entreprise)==null?void 0:q.id)==null?void 0:X.toString())===w.entreprise.toString():W.role==="VISITEUR"?((Se=(me=(Y=W.salarie)==null?void 0:Y.entreprise)==null?void 0:me.id)==null?void 0:Se.toString())===w.entreprise.toString():!1}))),w.search){const W=w.search.toLowerCase();V=V.filter(q=>{var X,Y,me,Se;return((X=q.username)==null?void 0:X.toLowerCase().includes(W))||((Y=q.email)==null?void 0:Y.toLowerCase().includes(W))||((me=q.first_name)==null?void 0:me.toLowerCase().includes(W))||((Se=q.last_name)==null?void 0:Se.toLowerCase().includes(W))||q.company_name&&q.company_name.toLowerCase().includes(W)})}return V});Fo(async()=>{await j(),await J()});async function j(){var V,W,q;m.value=!0;try{if(_.value)r.value=await t.fetchUsers();else if(M.value){const[X,Y]=await Promise.all([O0({role:"SALARIE",entrepriseId:(V=t.user)==null?void 0:V.id}),O0({role:"VISITEUR",entrepriseId:(W=t.user)==null?void 0:W.id})]);r.value=[...X,...Y]}else k.value&&(r.value=await O0({role:"VISITEUR",salarieId:(q=t.user)==null?void 0:q.id,includeDetails:!0}),console.log("Visiteurs récupérés:",r.value))}catch(X){console.error("Erreur lors de la récupération des utilisateurs:",X),n.error("Erreur lors de la récupération des utilisateurs")}finally{m.value=!1}}async function J(){try{_.value?await Promise.all([te(),le()]):M.value&&await ae()}catch(V){console.error("Erreur lors de la récupération des dépendances:",V)}}async function te(){var V;try{_.value?i.value=await t.fetchUsersByRole({role:"SALARIE"}):M.value&&(i.value=await t.fetchEntrepriseSalaries((V=t.user)==null?void 0:V.id))}catch(W){console.error("Erreur lors de la récupération des salaries:",W)}}async function ae(){var V,W;if(!(!M.value||!((V=t.user)!=null&&V.id)))try{i.value=await t.fetchEntrepriseSalaries((W=t.user)==null?void 0:W.id)}catch(q){console.error("Erreur lors de la récupération des salaries de l'entreprise:",q)}}async function le(){try{o.value=await t.fetchEnterprises()}catch(V){console.error("Erreur lors de la récupération des entreprises:",V)}}function xe(){f.value=null,s.value=!0}function G(V){f.value={...V},s.value=!0}function I(){s.value=!1,f.value=null,y.value=[]}async function K(V){var q,X,Y,me,Se,Re;y.value=[];const W=!!V.id;try{const T={...V};_.value?(T.entreprise&&typeof T.entreprise=="object"?T.entreprise_id=T.entreprise.id:typeof T.entreprise=="number"&&(T.entreprise_id=T.entreprise),T.salarie&&typeof T.salarie=="object"?T.salarie_id=T.salarie.id:typeof T.salarie=="number"&&(T.salarie_id=T.salarie)):M.value?(T.entreprise_id=(q=t.user)==null?void 0:q.id,T.role==="VISITEUR"&&(T.salarie&&typeof T.salarie=="object"?T.salarie_id=T.salarie.id:typeof T.salarie=="number"&&(T.salarie_id=T.salarie))):k.value&&(T.role="VISITEUR",T.salarie_id=(X=t.user)==null?void 0:X.id),T.role==="SALARIE"?((Y=T.entreprise)!=null&&Y.id?(T.entreprise_id=T.entreprise.id,delete T.entreprise):typeof T.entreprise=="number"&&(T.entreprise_id=T.entreprise,delete T.entreprise),delete T.salarie):T.role==="VISITEUR"&&((me=T.salarie)!=null&&me.id?(T.salarie_id=T.salarie.id,delete T.salarie):typeof T.salarie=="number"&&(T.salarie_id=T.salarie,delete T.salarie),delete T.entreprise,delete T.entreprise_id),W?(await t.updateUser(V.id,T),n.success("Utilisateur modifié avec succès")):(await t.createUser(T),n.success("Utilisateur créé avec succès")),await Promise.all([j(),J()]),I()}catch(T){console.error("Error saving user:",((Se=T.response)==null?void 0:Se.data)||T),y.value=nT(T),n.error("Erreur lors de la sauvegarde de l'utilisateur");const ne=((Re=T.response)==null?void 0:Re.data)||{};let fe="";throw typeof ne=="object"&&(fe=Object.entries(ne).map(([ce,ye])=>Array.isArray(ye)?`${ce}: ${ye[0]}`:`${ce}: ${ye}`).filter(ce=>ce).join(`
`)),fe||(fe="Une erreur est survenue lors de la sauvegarde"),new Error(fe)}}function $(V){d.value=V,u.value=!0}async function O(){if(d.value)try{await t.deleteUser(d.value.id),n.success("Utilisateur supprimé avec succès"),await Promise.all([j(),J()]),u.value=!1,d.value=null}catch(V){throw console.error("Erreur lors de la suppression de l'utilisateur:",V),n.error("Erreur lors de la suppression de l'utilisateur"),V}}function z(V){var W,q,X,Y,me,Se,Re,T;return _.value?!0:M.value?V.role==="SALARIE"?((W=V.entreprise)==null?void 0:W.id)===((q=t.user)==null?void 0:q.id):V.role==="VISITEUR"?((Y=(X=V.salarie)==null?void 0:X.entreprise)==null?void 0:Y.id)===((me=t.user)==null?void 0:me.id):!1:k.value?V.role==="VISITEUR"&&(V.salarie_id===((Se=t.user)==null?void 0:Se.id)||((Re=V.salarie)==null?void 0:Re.id)===((T=t.user)==null?void 0:T.id)):!1}return(V,W)=>{var q,X,Y,me;return Ue(),Ge("div",Vj,[E("div",Hj,[E("div",Gj,[E("h1",qj,[_.value?(Ue(),Ge("span",Wj,"Gestion des utilisateurs")):M.value?(Ue(),Ge("span",Zj,"Gestion des salaries et visiteurs")):k.value?(Ue(),Ge("span",Kj,"Gestion des visiteurs")):un("",!0)]),E("button",{onClick:xe,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[W[5]||(W[5]=E("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),_.value?(Ue(),Ge("span",Yj,"Nouvel utilisateur")):M.value?(Ue(),Ge("span",Jj,"Nouveau salarie/visiteur")):k.value?(Ue(),Ge("span",Xj,"Nouvel visiteur")):un("",!0)])]),E("div",Qj,[E("div",ez,[E("div",tz,[_.value||M.value?(Ue(),Ge("div",nz,[W[9]||(W[9]=E("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),In(E("select",{id:"role-filter","onUpdate:modelValue":W[0]||(W[0]=Se=>w.role=Se),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[W[6]||(W[6]=E("option",{value:""},"Tous les rôles",-1)),_.value?(Ue(),Ge("option",rz,"Administrateur")):un("",!0),_.value?(Ue(),Ge("option",iz,"Entreprise")):un("",!0),W[7]||(W[7]=E("option",{value:"SALARIE"},"Salarie",-1)),W[8]||(W[8]=E("option",{value:"VISITEUR"},"Visiteur",-1))],512),[[ss,w.role]])])):un("",!0),_.value?(Ue(),Ge("div",sz,[W[11]||(W[11]=E("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),In(E("select",{id:"entreprise-filter","onUpdate:modelValue":W[1]||(W[1]=Se=>w.entreprise=Se),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[W[10]||(W[10]=E("option",{value:""},"Toutes les entreprises",-1)),(Ue(!0),Ge(Rn,null,Nr(o.value,Se=>(Ue(),Ge("option",{key:Se.id,value:Se.id},Wt(qn(Hl)(Se)),9,oz))),128))],512),[[ss,w.entreprise]])])):un("",!0),_.value||M.value?(Ue(),Ge("div",az,[W[13]||(W[13]=E("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),In(E("select",{id:"salarie-filter","onUpdate:modelValue":W[2]||(W[2]=Se=>w.salarie=Se),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[W[12]||(W[12]=E("option",{value:""},"Tous les salaries",-1)),(Ue(!0),Ge(Rn,null,Nr(R.value,Se=>(Ue(),Ge("option",{key:Se.id,value:Se.id},Wt(qn(Hl)(Se)),9,lz))),128))],512),[[ss,w.salarie]])])):un("",!0)]),E("div",uz,[W[14]||(W[14]=E("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),In(E("input",{type:"text",id:"search","onUpdate:modelValue":W[3]||(W[3]=Se=>w.search=Se),placeholder:"Rechercher par nom, email, entreprise...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[ei,w.search]])])])]),E("div",cz,[E("div",fz,[E("table",hz,[E("thead",dz,[E("tr",null,[W[15]||(W[15]=E("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Utilisateur ",-1)),W[16]||(W[16]=E("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rôle ",-1)),W[17]||(W[17]=E("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),_.value||M.value?(Ue(),Ge("th",pz," Entreprise ")):un("",!0),_.value||M.value?(Ue(),Ge("th",gz," Salarie ")):un("",!0),W[18]||(W[18]=E("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),W[19]||(W[19]=E("th",{scope:"col",class:"relative px-6 py-3"},[E("span",{class:"sr-only"},"Actions")],-1))])]),E("tbody",mz,[m.value?(Ue(),Ge("tr",vz,W[20]||(W[20]=[E("td",{colspan:"7",class:"py-4 px-6"},[E("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):N.value.length===0?(Ue(),Ge("tr",yz,W[21]||(W[21]=[E("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun utilisateur trouvé ",-1)]))):un("",!0),(Ue(!0),Ge(Rn,null,Nr(N.value,Se=>{var Re;return Ue(),Ge("tr",{key:Se.id},[E("td",_z,[E("div",bz,[E("div",wz,[E("div",xz,[E("span",Lz,Wt(qn(iT)(Se.first_name,Se.last_name)),1)])]),E("div",Sz,[E("div",Cz,Wt(qn(Hl)(Se)),1),E("div",Ez,Wt(Se.username),1)])])]),E("td",Pz,[E("span",{class:Ii(qn(aT)())},Wt(qn(oT)(Se.role)),3)]),E("td",Mz,Wt(Se.email),1),_.value||M.value?(Ue(),Ge("td",Az,[Se.role==="ENTREPRISE"?(Ue(),Ge(Rn,{key:0},[di(" - ")],64)):Se.role==="SALARIE"?(Ue(),Ge(Rn,{key:1},[di(Wt(Se.entreprise?qn(Hl)(Se.entreprise):"Non assigné"),1)],64)):Se.role==="VISITEUR"?(Ue(),Ge(Rn,{key:2},[di(Wt((Re=Se.salarie)!=null&&Re.entreprise?qn(Hl)(Se.salarie.entreprise):"Non assigné"),1)],64)):(Ue(),Ge(Rn,{key:3},[di(" - ")],64))])):un("",!0),_.value||M.value?(Ue(),Ge("td",kz,[Se.role==="ENTREPRISE"||Se.role==="ADMIN"?(Ue(),Ge(Rn,{key:0},[di(" - ")],64)):Se.role==="SALARIE"?(Ue(),Ge(Rn,{key:1},[di(" - ")],64)):(Ue(),Ge(Rn,{key:2},[di(Wt(Se.salarie?qn(Hl)(Se.salarie):"Non assigné"),1)],64))])):un("",!0),E("td",Tz,[E("span",{class:Ii(qn(lT)(Se.is_active))},Wt(Se.is_active?"Actif":"Inactif"),3)]),E("td",Dz,[E("button",{onClick:T=>G(Se),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,Bz),z(Se)?(Ue(),Ge("button",{key:0,onClick:T=>$(Se),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,Nz)):un("",!0)])])}),128))])])])])]),s.value?(Ue(),Ge("div",Oz,[ci(Dj,{user:f.value,salaries:i.value,entreprises:o.value,"is-admin":_.value,"is-entreprise":M.value,"current-salarie":k.value?(X=(q=qn(t).user)==null?void 0:q.id)==null?void 0:X.toString():void 0,"current-entreprise":M.value?(me=(Y=qn(t).user)==null?void 0:Y.id)==null?void 0:me.toString():void 0,"api-errors":y.value,onClose:I,onSave:K},null,8,["user","salaries","entreprises","is-admin","is-entreprise","current-salarie","current-entreprise","api-errors"])])):un("",!0),u.value?(Ue(),za(Rx,{key:1,title:"Supprimer l'utilisateur",message:"Êtes-vous sûr de vouloir supprimer cet utilisateur ? Cette action est irréversible.",onConfirm:O,onCancel:W[4]||(W[4]=Se=>u.value=!1)})):un("",!0)])}}}),Rz={class:"h-full bg-gray-50"},Fz={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},jz={class:"sm:flex sm:items-center"},zz={class:"sm:flex-auto"},$z={class:"text-2xl font-semibold text-gray-900"},Uz={class:"mt-2 text-sm text-gray-700"},Vz={key:0,class:"mt-8"},Hz={class:"mb-6"},Gz=["value"],qz={class:"mb-6"},Wz={value:null},Zz=["value"],Kz={key:0,class:"mb-6"},Yz={value:null},Jz=["value"],Xz={key:1,class:"mt-8"},Qz={class:"mb-6"},e$=["value"],t$={class:"mt-8"},n$={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},r$={class:"overflow-x-auto"},i$={class:"min-w-full divide-y divide-gray-300"},s$={class:"bg-gray-50"},o$={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"},a$={class:"ml-2 flex-none rounded"},l$={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},u$={class:"ml-2 flex-none rounded"},c$={class:"divide-y divide-gray-200 bg-white"},f$={key:0},h$={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},d$={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},p$={class:"px-3 py-4 text-sm text-gray-900"},g$={key:0,class:"flex items-center"},m$={class:"h-8 w-8 flex-shrink-0"},v$={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},y$={class:"text-primary-700 font-medium text-sm"},_$={class:"ml-3"},b$={class:"font-medium"},w$={key:1,class:"text-gray-500"},x$={class:"px-3 py-4 text-sm text-gray-900"},L$={key:0,class:"flex items-center"},S$={class:"h-8 w-8 flex-shrink-0"},C$={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},E$={class:"text-primary-700 font-medium text-sm"},P$={class:"ml-3"},M$={class:"font-medium"},A$={key:1,class:"text-gray-500"},k$={class:"px-3 py-4 text-sm text-gray-900"},T$={key:0,class:"flex items-center"},D$={class:"h-8 w-8 flex-shrink-0"},B$={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},N$={class:"text-primary-700 font-medium text-sm"},O$={class:"ml-3"},I$={class:"font-medium"},R$={key:1,class:"text-gray-500"},F$={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},j$={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},z$=["onClick"],$$=["onClick"],U$=["onClick"],V$={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},H$={class:"bg-white rounded-lg p-6 max-w-md w-full"},G$={class:"flex justify-between items-center mb-4"},q$=["disabled"],W$=["disabled"],Z$={key:0,class:"space-y-4"},K$={key:0},Y$=["disabled"],J$=["value"],X$=["disabled"],Q$=["value"],eU={key:0,class:"mt-1 text-sm text-gray-500"},tU=["disabled"],nU=["value"],rU={key:0,class:"mt-1 text-sm text-gray-500"},iU={key:1,class:"mt-4 bg-red-50 p-4 rounded-md"},sU={class:"flex"},oU={class:"ml-3"},aU={class:"text-sm font-medium text-red-800"},lU={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},uU=["disabled"],cU={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},fU=oo({__name:"PlansView",setup(e){const t=Dp(),n=gy(),r=ga(),i=Rt([]),o=Rt([]),s=Rt([]),u=Rt([]),f=Rt(!1),d=Rt(!1),m=Rt(!1),y=Rt(null),w=Rt({nom:"",description:"",client:null}),_=Rt({id:0,nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),M=Rt(!1),k=Rt(null),R=Rt(null),N=Rt(null),j=Rt("date_modification"),J=Rt("desc"),te=Rt(null),ae=gr(()=>R.value?u.value.filter(B=>typeof B.salarie=="object"&&B.salarie?B.salarie.id===R.value:B.salarie===R.value||B.salarie_id===R.value):u.value),le=gr(()=>{let B=i.value;console.log(`
[PlansView] Filtering plans:`,B.map(De=>({id:De.id,entreprise:De.entreprise,salarie:De.salarie,visiteur:De.visiteur}))),r.isAdmin?(te.value&&(B=B.filter(De=>{var Me;return typeof De.entreprise=="object"?((Me=De.entreprise)==null?void 0:Me.id)===te.value:De.entreprise===te.value})),R.value&&(B=B.filter(De=>{var Me;return typeof De.salarie=="object"?((Me=De.salarie)==null?void 0:Me.id)===R.value:De.salarie===R.value}),N.value&&(B=B.filter(De=>{var Me;return typeof De.visiteur=="object"?((Me=De.visiteur)==null?void 0:Me.id)===N.value:De.visiteur===N.value})))):r.isSalarie&&(B=B.filter(De=>{var Me,We,Z;return typeof De.salarie=="object"?((Me=De.salarie)==null?void 0:Me.id)===((We=r.user)==null?void 0:We.id):De.salarie===((Z=r.user)==null?void 0:Z.id)}),N.value&&(B=B.filter(De=>{var Me;return typeof De.visiteur=="object"?((Me=De.visiteur)==null?void 0:Me.id)===N.value:De.visiteur===N.value})));const ue=[...B].sort((De,Me)=>{if(j.value==="nom")return J.value==="asc"?De.nom.localeCompare(Me.nom):Me.nom.localeCompare(De.nom);{const We=new Date(De[j.value]).getTime(),Z=new Date(Me[j.value]).getTime();return J.value==="asc"?We-Z:Z-We}});return console.log("[PlansView] Final filtered and sorted plans:",ue.map(De=>({id:De.id,entreprise:De.entreprise,salarie:De.salarie,visiteur:De.visiteur}))),ue}),xe=gr(()=>r.isAdmin?{title:"Tous les plans",description:"Liste complète des plans",plans:i.value}:r.isSalarie?{title:"Plans des visiteurs",description:"Plans où vous êtes assigné comme salarie",plans:i.value.filter(B=>{var ue,De,Me;return typeof B.salarie=="object"?((ue=B.salarie)==null?void 0:ue.id)===((De=r.user)==null?void 0:De.id):B.salarie===((Me=r.user)==null?void 0:Me.id)})}:{title:"Mes plans",description:"Plans qui vous sont assignés ou que vous avez créés",plans:i.value.filter(B=>{var Me,We,Z,de;const ue=B.createur.id===((Me=r.user)==null?void 0:Me.id);let De=!1;return typeof B.visiteur=="object"?De=((We=B.visiteur)==null?void 0:We.id)===((Z=r.user)==null?void 0:Z.id):De=B.visiteur===((de=r.user)==null?void 0:de.id),De||ue})}),G=gr(()=>te.value?o.value.filter(B=>{var ue;return typeof B.entreprise=="object"?((ue=B.entreprise)==null?void 0:ue.id)===te.value:B.entreprise_id===te.value}):o.value),I=gr(()=>_.value.entreprise?o.value.filter(B=>{var ue;return typeof B.entreprise=="object"?((ue=B.entreprise)==null?void 0:ue.id)===_.value.entreprise:B.entreprise_id===_.value.entreprise}):[]),K=gr(()=>!_.value.entreprise||!_.value.salarie?[]:u.value.filter(B=>typeof B.salarie=="object"&&B.salarie?B.salarie.id===_.value.salarie:B.salarie===_.value.salarie||B.salarie_id===_.value.salarie));Fo(async()=>{var B;await $(),r.isAdmin?await O():r.isSalarie&&await V(((B=r.user)==null?void 0:B.id)||0)});async function $(){try{const B=await n.fetchPlansWithDetails();i.value=B.data}catch(B){console.error("Erreur lors du chargement des plans:",B)}}async function O(){try{console.log("Chargement des entreprises..."),s.value=await r.fetchEnterprises(),console.log("Entreprises chargées:",s.value)}catch(B){console.error("Erreur lors du chargement des entreprises:",B)}}async function z(B){try{if(console.log("Chargement des salaries pour l'entreprise:",B),B===void 0){const ue=await r.fetchUsersByRole({role:"SALARIE"});o.value=ue}else o.value=await r.fetchEntrepriseSalaries(B);console.log("Salaries chargés:",o.value)}catch(ue){console.error("Erreur lors du chargement des salaries:",ue)}}async function V(B){try{console.log("Chargement des visiteurs pour le salarie:",B);const ue=await O0({role:"VISITEUR",salarieId:B});u.value=ue.map(De=>({...De,salarie_id:B})),console.log("Visiteurs chargés:",u.value)}catch(ue){console.error("Erreur lors du chargement des visiteurs:",ue)}}function W(){f.value=!0,w.value={nom:"",description:"",client:null}}async function q(B){console.log(`
[PlansView][editPlan] ====== DÉBUT ÉDITION PLAN ======`),console.log("[PlansView][editPlan] Plan reçu:",{id:B.id,nom:B.nom,entreprise:B.entreprise,salarie:B.salarie,visiteur:B.visiteur});try{console.log("[PlansView][editPlan] Définition du plan courant dans le store..."),n.setCurrentPlan(B),console.log("[PlansView][editPlan] Sauvegarde de l'ID dans localStorage:",B.id),localStorage.setItem("lastPlanId",B.id.toString()),console.log("[PlansView][editPlan] Redirection vers la vue carte..."),await t.push("/"),console.log(`[PlansView][editPlan] ====== FIN ÉDITION PLAN ======
`)}catch(ue){console.error("[PlansView][editPlan] ERREUR:",ue),ue instanceof Error&&console.error("[PlansView][editPlan] Stack trace:",ue.stack),alert("Une erreur est survenue lors du chargement du plan")}}async function X(B){B!=null&&B.id&&(y.value=B,m.value=!0)}async function Y(){var B,ue;if((B=y.value)!=null&&B.id)try{await n.deletePlan(y.value.id),await $(),((ue=n.currentPlan)==null?void 0:ue.id)===y.value.id&&n.clearCurrentPlan()}catch(De){console.error("Erreur lors de la suppression du plan:",De),alert("Une erreur est survenue lors de la suppression du plan")}finally{m.value=!1,y.value=null}}function me(){m.value=!1,y.value=null}function Se(B){return new Date(B).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function Re(B){if(!B)return"";const ue=B.first_name||"",De=B.last_name||"";return(ue.charAt(0)+De.charAt(0)).toUpperCase()}async function T(B){M.value=!0,k.value=null;try{r.isAdmin&&!s.value.length&&await O();const ue=typeof B.entreprise=="object"&&B.entreprise?B.entreprise.id:B.entreprise,De=typeof B.salarie=="object"&&B.salarie?B.salarie.id:B.salarie,Me=typeof B.visiteur=="object"&&B.visiteur?B.visiteur.id:B.visiteur;_.value={id:B.id,nom:B.nom,description:B.description,entreprise:ue||null,salarie:De||null,visiteur:Me||null},ue&&await z(ue),De&&await V(De),d.value=!0}catch(ue){console.error("Erreur lors de l'ouverture du modal:",ue),k.value="Erreur lors du chargement des données"}finally{M.value=!1}}async function ne(){var B,ue,De,Me,We;k.value=null,M.value=!0;try{if(!_.value.nom.trim())throw new Error("Le nom du plan est requis");if(_.value.visiteur&&!_.value.salarie)throw new Error("Un salarie doit être sélectionné pour assigner un visiteur");if(_.value.salarie&&!_.value.entreprise)throw new Error("Une entreprise doit être sélectionnée pour assigner un salarie");console.log("Données envoyées pour la mise à jour:",{id:_.value.id,nom:_.value.nom.trim(),description:_.value.description.trim(),entreprise_id:_.value.entreprise,salarie_id:_.value.salarie,visiteur_id:_.value.visiteur});const Z=await n.updatePlanDetails(_.value.id,{nom:_.value.nom.trim(),description:_.value.description.trim(),entreprise_id:_.value.entreprise,salarie_id:_.value.salarie,visiteur_id:_.value.visiteur});console.log("Réponse de la mise à jour:",Z),Z&&(d.value=!1,await $())}catch(Z){if(console.error("Erreur lors de la mise à jour du plan:",Z),(ue=(B=Z.response)==null?void 0:B.data)!=null&&ue.detail)k.value=Z.response.data.detail;else if((Me=(De=Z.response)==null?void 0:De.data)!=null&&Me.non_field_errors)k.value=Z.response.data.non_field_errors[0];else if((We=Z.response)!=null&&We.data){const de=Object.entries(Z.response.data).map(([ve,pe])=>`${ve}: ${Array.isArray(pe)?pe[0]:pe}`);k.value=de.join(`
`)}else k.value=Z.message||"Une erreur est survenue lors de la mise à jour du plan"}finally{M.value=!1}}bs(()=>te.value,async B=>{R.value=null,N.value=null,B?await z(B):await z()}),bs(()=>R.value,async B=>{N.value=null,B&&await V(B)}),bs(()=>_.value.entreprise,async B=>{B===null?(_.value.salarie=null,_.value.visiteur=null):await z(B)}),bs(()=>_.value.salarie,async B=>{_.value.visiteur=null,B&&await V(B)});function fe(B){var We,Z,de;const ue=r.user;if(!ue)return!1;if(ue.user_type==="admin")return!0;if(ue.user_type==="entreprise")return typeof B.entreprise=="object"?((We=B.entreprise)==null?void 0:We.id)===ue.id:B.entreprise===ue.id;if(ue.user_type==="salarie")return typeof B.salarie=="object"?((Z=B.salarie)==null?void 0:Z.id)===ue.id:B.salarie===ue.id;const De=B.createur.id===ue.id;let Me=!1;return typeof B.visiteur=="object"?Me=((de=B.visiteur)==null?void 0:de.id)===ue.id:Me=B.visiteur===ue.id,Me||De}async function ce(B){await $(),localStorage.setItem("lastPlanId",B.toString()),console.log(`Plan ${B} créé et défini comme plan actif`),t.push("/")}function ye(B){j.value===B?J.value=J.value==="asc"?"desc":"asc":(j.value=B,J.value="desc")}function oe(B){return B?Hl(B):""}return(B,ue)=>{var De;return Ue(),Ge("div",Rz,[E("div",Fz,[E("div",jz,[E("div",zz,[E("h1",$z,Wt(xe.value.title),1),E("p",Uz,Wt(xe.value.description),1)]),E("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[E("button",{onClick:W,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),qn(r).isAdmin?(Ue(),Ge("div",Vz,[E("div",Hz,[ue[15]||(ue[15]=E("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par entreprise",-1)),In(E("select",{id:"entreprise-filter","onUpdate:modelValue":ue[0]||(ue[0]=Me=>te.value=Me),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[ue[14]||(ue[14]=E("option",{value:null},"Toutes les entreprises",-1)),(Ue(!0),Ge(Rn,null,Nr(s.value,Me=>(Ue(),Ge("option",{key:Me.id,value:Me.id},Wt(oe(Me)),9,Gz))),128))],512),[[ss,te.value]])]),E("div",qz,[ue[16]||(ue[16]=E("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par salarie",-1)),In(E("select",{id:"salarie-filter","onUpdate:modelValue":ue[1]||(ue[1]=Me=>R.value=Me),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[E("option",Wz,Wt(G.value.length?"Tous les salaries":"Aucun salarie disponible"),1),(Ue(!0),Ge(Rn,null,Nr(G.value,Me=>(Ue(),Ge("option",{key:Me.id,value:Me.id},Wt(oe(Me)),9,Zz))),128))],512),[[ss,R.value]])]),R.value?(Ue(),Ge("div",Kz,[ue[17]||(ue[17]=E("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),In(E("select",{id:"visiteur-filter","onUpdate:modelValue":ue[2]||(ue[2]=Me=>N.value=Me),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[E("option",Yz,Wt(ae.value.length?"Tous les visiteurs":"Aucun visiteur disponible"),1),(Ue(!0),Ge(Rn,null,Nr(ae.value,Me=>(Ue(),Ge("option",{key:Me.id,value:Me.id},Wt(oe(Me)),9,Jz))),128))],512),[[ss,N.value]])])):un("",!0)])):qn(r).isSalarie?(Ue(),Ge("div",Xz,[E("div",Qz,[ue[19]||(ue[19]=E("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),In(E("select",{id:"visiteur-filter","onUpdate:modelValue":ue[3]||(ue[3]=Me=>N.value=Me),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[ue[18]||(ue[18]=E("option",{value:null},"Tous les visiteurs",-1)),(Ue(!0),Ge(Rn,null,Nr(u.value,Me=>(Ue(),Ge("option",{key:Me.id,value:Me.id},Wt(oe(Me)),9,e$))),128))],512),[[ss,N.value]])])])):un("",!0),E("div",t$,[E("div",n$,[E("div",r$,[E("table",i$,[E("thead",s$,[E("tr",null,[E("th",o$,[E("button",{onClick:ue[4]||(ue[4]=Me=>ye("nom")),class:"group inline-flex items-center"},[ue[21]||(ue[21]=di(" Nom ")),E("span",a$,[(Ue(),Ge("svg",{class:Ii(["h-5 w-5",{"text-gray-900":j.value==="nom","text-gray-400":j.value!=="nom","rotate-180":j.value==="nom"&&J.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},ue[20]||(ue[20]=[E("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),ue[24]||(ue[24]=E("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),ue[25]||(ue[25]=E("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise ",-1)),ue[26]||(ue[26]=E("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Salarie ",-1)),ue[27]||(ue[27]=E("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Visiteur ",-1)),E("th",l$,[E("button",{onClick:ue[5]||(ue[5]=Me=>ye("date_modification")),class:"group inline-flex items-center"},[ue[23]||(ue[23]=di(" Dernière modification ")),E("span",u$,[(Ue(),Ge("svg",{class:Ii(["h-5 w-5",{"text-gray-900":j.value==="date_modification","text-gray-400":j.value!=="date_modification","rotate-180":j.value==="date_modification"&&J.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},ue[22]||(ue[22]=[E("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),ue[28]||(ue[28]=E("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[E("span",{class:"sr-only"},"Actions")],-1))])]),E("tbody",c$,[le.value.length===0?(Ue(),Ge("tr",f$,ue[29]||(ue[29]=[E("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun plan disponible ",-1)]))):un("",!0),(Ue(!0),Ge(Rn,null,Nr(le.value,Me=>(Ue(),Ge("tr",{key:Me.id,class:"hover:bg-gray-50"},[E("td",h$,Wt(Me.nom),1),E("td",d$,Wt(Me.description||"-"),1),E("td",p$,[Me.entreprise&&typeof Me.entreprise=="object"?(Ue(),Ge("div",g$,[E("div",m$,[E("div",v$,[E("span",y$,Wt(Re(Me.entreprise)),1)])]),E("div",_$,[E("div",b$,Wt(qn(Hl)(Me.entreprise)),1)])])):(Ue(),Ge("div",w$," Non assigné "))]),E("td",x$,[Me.salarie&&typeof Me.salarie=="object"?(Ue(),Ge("div",L$,[E("div",S$,[E("div",C$,[E("span",E$,Wt(Re(Me.salarie)),1)])]),E("div",P$,[E("div",M$,Wt(qn(Hl)(Me.salarie)),1)])])):(Ue(),Ge("div",A$," Non assigné "))]),E("td",k$,[Me.visiteur&&typeof Me.visiteur=="object"?(Ue(),Ge("div",T$,[E("div",D$,[E("div",B$,[E("span",N$,Wt(Re(Me.visiteur)),1)])]),E("div",O$,[E("div",I$,Wt(qn(Hl)(Me.visiteur)),1)])])):(Ue(),Ge("div",R$," Non assigné "))]),E("td",F$,Wt(Se(Me.date_modification)),1),E("td",j$,[E("button",{onClick:We=>q(Me),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,z$),E("button",{onClick:We=>T(Me),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,$$),fe(Me)?(Ue(),Ge("button",{key:0,onClick:We=>X(Me),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,U$)):un("",!0)])]))),128))])])])])]),ci(gx,{modelValue:f.value,"onUpdate:modelValue":ue[6]||(ue[6]=Me=>f.value=Me),salaries:o.value,clients:u.value,onCreated:ce},null,8,["modelValue","salaries","clients"]),d.value?(Ue(),Ge("div",V$,[E("div",H$,[E("div",G$,[ue[31]||(ue[31]=E("h2",{class:"text-xl font-semibold text-gray-900"},"Modifier le plan",-1)),E("button",{onClick:ue[7]||(ue[7]=Me=>d.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},ue[30]||(ue[30]=[E("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("form",{onSubmit:Vc(ne,["prevent"]),class:"space-y-4"},[E("div",null,[ue[32]||(ue[32]=E("label",{for:"edit-nom",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),In(E("input",{type:"text",id:"edit-nom","onUpdate:modelValue":ue[8]||(ue[8]=Me=>_.value.nom=Me),disabled:M.value,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",required:""},null,8,q$),[[ei,_.value.nom]])]),E("div",null,[ue[33]||(ue[33]=E("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),In(E("textarea",{id:"edit-description","onUpdate:modelValue":ue[9]||(ue[9]=Me=>_.value.description=Me),disabled:M.value,rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"},null,8,W$),[[ei,_.value.description]])]),qn(r).isAdmin||((De=qn(r).user)==null?void 0:De.user_type)==="entreprise"?(Ue(),Ge("div",Z$,[qn(r).isAdmin?(Ue(),Ge("div",K$,[ue[35]||(ue[35]=E("label",{for:"edit-entreprise",class:"block text-sm font-medium text-gray-700"}," Entreprise ",-1)),In(E("select",{id:"edit-entreprise","onUpdate:modelValue":ue[10]||(ue[10]=Me=>_.value.entreprise=Me),disabled:M.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[ue[34]||(ue[34]=E("option",{value:null},"Sélectionner une entreprise",-1)),(Ue(!0),Ge(Rn,null,Nr(s.value,Me=>(Ue(),Ge("option",{key:Me.id,value:Me.id},Wt(oe(Me)),9,J$))),128))],8,Y$),[[ss,_.value.entreprise]])])):un("",!0),E("div",null,[ue[37]||(ue[37]=E("label",{for:"edit-salarie",class:"block text-sm font-medium text-gray-700"}," Salarie ",-1)),In(E("select",{id:"edit-salarie","onUpdate:modelValue":ue[11]||(ue[11]=Me=>_.value.salarie=Me),disabled:qn(r).isAdmin&&!_.value.entreprise||M.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[ue[36]||(ue[36]=E("option",{value:null},"Sélectionner un salarie",-1)),(Ue(!0),Ge(Rn,null,Nr(I.value,Me=>(Ue(),Ge("option",{key:Me.id,value:Me.id},Wt(oe(Me)),9,Q$))),128))],8,X$),[[ss,_.value.salarie]]),qn(r).isAdmin&&!_.value.entreprise?(Ue(),Ge("p",eU," Veuillez d'abord sélectionner une entreprise ")):un("",!0)]),E("div",null,[ue[39]||(ue[39]=E("label",{for:"edit-visiteur",class:"block text-sm font-medium text-gray-700"}," Visiteur ",-1)),In(E("select",{id:"edit-visiteur","onUpdate:modelValue":ue[12]||(ue[12]=Me=>_.value.visiteur=Me),disabled:!_.value.salarie||M.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[ue[38]||(ue[38]=E("option",{value:null},"Sélectionner un visiteur",-1)),(Ue(!0),Ge(Rn,null,Nr(K.value,Me=>(Ue(),Ge("option",{key:Me.id,value:Me.id},Wt(oe(Me)),9,nU))),128))],8,tU),[[ss,_.value.visiteur]]),_.value.salarie?un("",!0):(Ue(),Ge("p",rU," Veuillez d'abord sélectionner un salarie "))])])):un("",!0),k.value?(Ue(),Ge("div",iU,[E("div",sU,[ue[40]||(ue[40]=E("div",{class:"flex-shrink-0"},[E("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),E("div",oU,[E("p",aU,Wt(k.value),1)])])])):un("",!0),E("div",lU,[E("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:ue[13]||(ue[13]=Me=>d.value=!1)}," Annuler "),E("button",{type:"submit",disabled:M.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm disabled:opacity-50"},[M.value?(Ue(),Ge("svg",cU,ue[41]||(ue[41]=[E("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),E("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):un("",!0),di(" "+Wt(M.value?"Enregistrement...":"Enregistrer"),1)],8,uU)])],32)])])):un("",!0),m.value?(Ue(),za(Rx,{key:3,title:"Supprimer le plan",message:"Êtes-vous sûr de vouloir supprimer ce plan ? Cette action est irréversible.",onConfirm:Y,onCancel:me})):un("",!0)])])}}});var Fx={exports:{}};const hU=J5(mA);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Vb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function yc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Vb(Object(n),!0).forEach(function(r){dU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vb(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function V0(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?V0=function(t){return typeof t}:V0=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V0(e)}function dU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vu(){return vu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vu.apply(this,arguments)}function pU(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function gU(e,t){if(e==null)return{};var n=pU(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function mU(e){return vU(e)||yU(e)||_U(e)||bU()}function vU(e){if(Array.isArray(e))return M1(e)}function yU(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _U(e,t){if(e){if(typeof e=="string")return M1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M1(e,t)}}function M1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var wU="1.14.0";function zc(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var qc=zc(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Np=zc(/Edge/i),Hb=zc(/firefox/i),ip=zc(/safari/i)&&!zc(/chrome/i)&&!zc(/android/i),jx=zc(/iP(ad|od|hone)/i),xU=zc(/chrome/i)&&zc(/android/i),zx={capture:!1,passive:!1};function Li(e,t,n){e.addEventListener(t,n,!qc&&zx)}function mi(e,t,n){e.removeEventListener(t,n,!qc&&zx)}function wg(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function LU(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Fu(e,t,n,r){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&wg(e,t):wg(e,t))||r&&e===n)return e;if(e===n)break}while(e=LU(e))}return null}var Gb=/\s+/g;function Ws(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(Gb," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(Gb," ")}}function nr(e,t,n){var r=e&&e.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in r)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),r[t]=n+(typeof n=="string"?"":"px")}}function nh(e,t){var n="";if(typeof e=="string")n=e;else do{var r=nr(e,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function $x(e,t,n){if(e){var r=e.getElementsByTagName(t),i=0,o=r.length;if(n)for(;i<o;i++)n(r[i],i);return r}return[]}function gc(){var e=document.scrollingElement;return e||document.documentElement}function Ds(e,t,n,r,i){if(!(!e.getBoundingClientRect&&e!==window)){var o,s,u,f,d,m,y;if(e!==window&&e.parentNode&&e!==gc()?(o=e.getBoundingClientRect(),s=o.top,u=o.left,f=o.bottom,d=o.right,m=o.height,y=o.width):(s=0,u=0,f=window.innerHeight,d=window.innerWidth,m=window.innerHeight,y=window.innerWidth),(t||n)&&e!==window&&(i=i||e.parentNode,!qc))do if(i&&i.getBoundingClientRect&&(nr(i,"transform")!=="none"||n&&nr(i,"position")!=="static")){var w=i.getBoundingClientRect();s-=w.top+parseInt(nr(i,"border-top-width")),u-=w.left+parseInt(nr(i,"border-left-width")),f=s+o.height,d=u+o.width;break}while(i=i.parentNode);if(r&&e!==window){var _=nh(i||e),M=_&&_.a,k=_&&_.d;_&&(s/=k,u/=M,y/=M,m/=k,f=s+m,d=u+y)}return{top:s,left:u,bottom:f,right:d,width:y,height:m}}}function qb(e,t,n){for(var r=vf(e,!0),i=Ds(e)[t];r;){var o=Ds(r)[n],s=void 0;if(s=i>=o,!s)return r;if(r===gc())break;r=vf(r,!1)}return!1}function ad(e,t,n,r){for(var i=0,o=0,s=e.children;o<s.length;){if(s[o].style.display!=="none"&&s[o]!==Dr.ghost&&(r||s[o]!==Dr.dragged)&&Fu(s[o],n.draggable,e,!1)){if(i===t)return s[o];i++}o++}return null}function _y(e,t){for(var n=e.lastElementChild;n&&(n===Dr.ghost||nr(n,"display")==="none"||t&&!wg(n,t));)n=n.previousElementSibling;return n||null}function so(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==Dr.clone&&(!t||wg(e,t))&&n++;return n}function Wb(e){var t=0,n=0,r=gc();if(e)do{var i=nh(e),o=i.a,s=i.d;t+=e.scrollLeft*o,n+=e.scrollTop*s}while(e!==r&&(e=e.parentNode));return[t,n]}function SU(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n)}return-1}function vf(e,t){if(!e||!e.getBoundingClientRect)return gc();var n=e,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=nr(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return gc();if(r||t)return n;r=!0}}while(n=n.parentNode);return gc()}function CU(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function mv(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var sp;function Ux(e,t){return function(){if(!sp){var n=arguments,r=this;n.length===1?e.call(r,n[0]):e.apply(r,n),sp=setTimeout(function(){sp=void 0},t)}}}function EU(){clearTimeout(sp),sp=void 0}function Vx(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function by(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function Zb(e,t){nr(e,"position","absolute"),nr(e,"top",t.top),nr(e,"left",t.left),nr(e,"width",t.width),nr(e,"height",t.height)}function vv(e){nr(e,"position",""),nr(e,"top",""),nr(e,"left",""),nr(e,"width",""),nr(e,"height","")}var Fa="Sortable"+new Date().getTime();function PU(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(nr(i,"display")==="none"||i===Dr.ghost)){e.push({target:i,rect:Ds(i)});var o=yc({},e[e.length-1].rect);if(i.thisAnimationDuration){var s=nh(i,!0);s&&(o.top-=s.f,o.left-=s.e)}i.fromRect=o}})}},addAnimationState:function(r){e.push(r)},removeAnimationState:function(r){e.splice(SU(e,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(t),typeof r=="function"&&r();return}var o=!1,s=0;e.forEach(function(u){var f=0,d=u.target,m=d.fromRect,y=Ds(d),w=d.prevFromRect,_=d.prevToRect,M=u.rect,k=nh(d,!0);k&&(y.top-=k.f,y.left-=k.e),d.toRect=y,d.thisAnimationDuration&&mv(w,y)&&!mv(m,y)&&(M.top-y.top)/(M.left-y.left)===(m.top-y.top)/(m.left-y.left)&&(f=AU(M,w,_,i.options)),mv(y,m)||(d.prevFromRect=m,d.prevToRect=y,f||(f=i.options.animation),i.animate(d,M,y,f)),f&&(o=!0,s=Math.max(s,f),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0,d.prevFromRect=null,d.fromRect=null,d.prevToRect=null,d.thisAnimationDuration=null},f),d.thisAnimationDuration=f)}),clearTimeout(t),o?t=setTimeout(function(){typeof r=="function"&&r()},s):typeof r=="function"&&r(),e=[]},animate:function(r,i,o,s){if(s){nr(r,"transition",""),nr(r,"transform","");var u=nh(this.el),f=u&&u.a,d=u&&u.d,m=(i.left-o.left)/(f||1),y=(i.top-o.top)/(d||1);r.animatingX=!!m,r.animatingY=!!y,nr(r,"transform","translate3d("+m+"px,"+y+"px,0)"),this.forRepaintDummy=MU(r),nr(r,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),nr(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){nr(r,"transition",""),nr(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},s)}}}}function MU(e){return e.offsetWidth}function AU(e,t,n,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*r.animation}var Th=[],yv={initializeByDefault:!0},Op={mount:function(t){for(var n in yv)yv.hasOwnProperty(n)&&!(n in t)&&(t[n]=yv[n]);Th.forEach(function(r){if(r.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Th.push(t)},pluginEvent:function(t,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var o=t+"Global";Th.forEach(function(s){n[s.pluginName]&&(n[s.pluginName][o]&&n[s.pluginName][o](yc({sortable:n},r)),n.options[s.pluginName]&&n[s.pluginName][t]&&n[s.pluginName][t](yc({sortable:n},r)))})},initializePlugins:function(t,n,r,i){Th.forEach(function(u){var f=u.pluginName;if(!(!t.options[f]&&!u.initializeByDefault)){var d=new u(t,n,t.options);d.sortable=t,d.options=t.options,t[f]=d,vu(r,d.defaults)}});for(var o in t.options)if(t.options.hasOwnProperty(o)){var s=this.modifyOption(t,o,t.options[o]);typeof s<"u"&&(t.options[o]=s)}},getEventProperties:function(t,n){var r={};return Th.forEach(function(i){typeof i.eventProperties=="function"&&vu(r,i.eventProperties.call(n[i.pluginName],t))}),r},modifyOption:function(t,n,r){var i;return Th.forEach(function(o){t[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[n]=="function"&&(i=o.optionListeners[n].call(t[o.pluginName],r))}),i}};function $d(e){var t=e.sortable,n=e.rootEl,r=e.name,i=e.targetEl,o=e.cloneEl,s=e.toEl,u=e.fromEl,f=e.oldIndex,d=e.newIndex,m=e.oldDraggableIndex,y=e.newDraggableIndex,w=e.originalEvent,_=e.putSortable,M=e.extraEventProperties;if(t=t||n&&n[Fa],!!t){var k,R=t.options,N="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!qc&&!Np?k=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(k=document.createEvent("Event"),k.initEvent(r,!0,!0)),k.to=s||n,k.from=u||n,k.item=i||n,k.clone=o,k.oldIndex=f,k.newIndex=d,k.oldDraggableIndex=m,k.newDraggableIndex=y,k.originalEvent=w,k.pullMode=_?_.lastPutMode:void 0;var j=yc(yc({},M),Op.getEventProperties(r,t));for(var J in j)k[J]=j[J];n&&n.dispatchEvent(k),R[N]&&R[N].call(t,k)}}var kU=["evt"],yl=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,o=gU(r,kU);Op.pluginEvent.bind(Dr)(t,n,yc({dragEl:Bn,parentEl:no,ghostEl:ti,rootEl:ks,nextEl:qf,lastDownEl:H0,cloneEl:ro,cloneHidden:pf,dragStarted:Ud,putSortable:ha,activeSortable:Dr.active,originalEvent:i,oldIndex:Vh,oldDraggableIndex:op,newIndex:Vl,newDraggableIndex:df,hideGhostForTarget:Wx,unhideGhostForTarget:Zx,cloneNowHidden:function(){pf=!0},cloneNowShown:function(){pf=!1},dispatchSortableEvent:function(u){Ya({sortable:n,name:u,originalEvent:i})}},o))};function Ya(e){$d(yc({putSortable:ha,cloneEl:ro,targetEl:Bn,rootEl:ks,oldIndex:Vh,oldDraggableIndex:op,newIndex:Vl,newDraggableIndex:df},e))}var Bn,no,ti,ks,qf,H0,ro,pf,Vh,Vl,op,df,w0,ha,zh=!1,xg=!1,Lg=[],Vf,Nu,_v,bv,Kb,Yb,Ud,Dh,ap,lp=!1,x0=!1,G0,Ba,wv=[],A1=!1,Sg=[],am=typeof document<"u",L0=jx,Jb=Np||qc?"cssFloat":"float",TU=am&&!xU&&!jx&&"draggable"in document.createElement("div"),Hx=function(){if(am){if(qc)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),Gx=function(t,n){var r=nr(t),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),o=ad(t,0,n),s=ad(t,1,n),u=o&&nr(o),f=s&&nr(s),d=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+Ds(o).width,m=f&&parseInt(f.marginLeft)+parseInt(f.marginRight)+Ds(s).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&u.float&&u.float!=="none"){var y=u.float==="left"?"left":"right";return s&&(f.clear==="both"||f.clear===y)?"vertical":"horizontal"}return o&&(u.display==="block"||u.display==="flex"||u.display==="table"||u.display==="grid"||d>=i&&r[Jb]==="none"||s&&r[Jb]==="none"&&d+m>i)?"vertical":"horizontal"},DU=function(t,n,r){var i=r?t.left:t.top,o=r?t.right:t.bottom,s=r?t.width:t.height,u=r?n.left:n.top,f=r?n.right:n.bottom,d=r?n.width:n.height;return i===u||o===f||i+s/2===u+d/2},BU=function(t,n){var r;return Lg.some(function(i){var o=i[Fa].options.emptyInsertThreshold;if(!(!o||_y(i))){var s=Ds(i),u=t>=s.left-o&&t<=s.right+o,f=n>=s.top-o&&n<=s.bottom+o;if(u&&f)return r=i}}),r},qx=function(t){function n(o,s){return function(u,f,d,m){var y=u.options.group.name&&f.options.group.name&&u.options.group.name===f.options.group.name;if(o==null&&(s||y))return!0;if(o==null||o===!1)return!1;if(s&&o==="clone")return o;if(typeof o=="function")return n(o(u,f,d,m),s)(u,f,d,m);var w=(s?u:f).options.group.name;return o===!0||typeof o=="string"&&o===w||o.join&&o.indexOf(w)>-1}}var r={},i=t.group;(!i||V0(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,t.group=r},Wx=function(){!Hx&&ti&&nr(ti,"display","none")},Zx=function(){!Hx&&ti&&nr(ti,"display","")};am&&document.addEventListener("click",function(e){if(xg)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),xg=!1,!1},!0);var Hf=function(t){if(Bn){t=t.touches?t.touches[0]:t;var n=BU(t.clientX,t.clientY);if(n){var r={};for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[Fa]._onDragOver(r)}}},NU=function(t){Bn&&Bn.parentNode[Fa]._isOutsideThisEl(t.target)};function Dr(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=vu({},t),e[Fa]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Gx(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(s,u){s.setData("Text",u.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Dr.supportPointer!==!1&&"PointerEvent"in window&&!ip,emptyInsertThreshold:5};Op.initializePlugins(this,e,n);for(var r in n)!(r in t)&&(t[r]=n[r]);qx(t);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=t.forceFallback?!1:TU,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Li(e,"pointerdown",this._onTapStart):(Li(e,"mousedown",this._onTapStart),Li(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Li(e,"dragover",this),Li(e,"dragenter",this)),Lg.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),vu(this,PU())}Dr.prototype={constructor:Dr,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Dh=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,Bn):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,r=this.el,i=this.options,o=i.preventOnFilter,s=t.type,u=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,f=(u||t).target,d=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||f,m=i.filter;if(UU(r),!Bn&&!(/mousedown|pointerdown/.test(s)&&t.button!==0||i.disabled)&&!d.isContentEditable&&!(!this.nativeDraggable&&ip&&f&&f.tagName.toUpperCase()==="SELECT")&&(f=Fu(f,i.draggable,r,!1),!(f&&f.animated)&&H0!==f)){if(Vh=so(f),op=so(f,i.draggable),typeof m=="function"){if(m.call(this,t,f,this)){Ya({sortable:n,rootEl:d,name:"filter",targetEl:f,toEl:r,fromEl:r}),yl("filter",n,{evt:t}),o&&t.cancelable&&t.preventDefault();return}}else if(m&&(m=m.split(",").some(function(y){if(y=Fu(d,y.trim(),r,!1),y)return Ya({sortable:n,rootEl:y,name:"filter",targetEl:f,fromEl:r,toEl:r}),yl("filter",n,{evt:t}),!0}),m)){o&&t.cancelable&&t.preventDefault();return}i.handle&&!Fu(d,i.handle,r,!1)||this._prepareDragStart(t,u,f)}}},_prepareDragStart:function(t,n,r){var i=this,o=i.el,s=i.options,u=o.ownerDocument,f;if(r&&!Bn&&r.parentNode===o){var d=Ds(r);if(ks=o,Bn=r,no=Bn.parentNode,qf=Bn.nextSibling,H0=r,w0=s.group,Dr.dragged=Bn,Vf={target:Bn,clientX:(n||t).clientX,clientY:(n||t).clientY},Kb=Vf.clientX-d.left,Yb=Vf.clientY-d.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,Bn.style["will-change"]="all",f=function(){if(yl("delayEnded",i,{evt:t}),Dr.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!Hb&&i.nativeDraggable&&(Bn.draggable=!0),i._triggerDragStart(t,n),Ya({sortable:i,name:"choose",originalEvent:t}),Ws(Bn,s.chosenClass,!0)},s.ignore.split(",").forEach(function(m){$x(Bn,m.trim(),xv)}),Li(u,"dragover",Hf),Li(u,"mousemove",Hf),Li(u,"touchmove",Hf),Li(u,"mouseup",i._onDrop),Li(u,"touchend",i._onDrop),Li(u,"touchcancel",i._onDrop),Hb&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Bn.draggable=!0),yl("delayStart",this,{evt:t}),s.delay&&(!s.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Np||qc))){if(Dr.eventCanceled){this._onDrop();return}Li(u,"mouseup",i._disableDelayedDrag),Li(u,"touchend",i._disableDelayedDrag),Li(u,"touchcancel",i._disableDelayedDrag),Li(u,"mousemove",i._delayedDragTouchMoveHandler),Li(u,"touchmove",i._delayedDragTouchMoveHandler),s.supportPointer&&Li(u,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(f,s.delay)}else f()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Bn&&xv(Bn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;mi(t,"mouseup",this._disableDelayedDrag),mi(t,"touchend",this._disableDelayedDrag),mi(t,"touchcancel",this._disableDelayedDrag),mi(t,"mousemove",this._delayedDragTouchMoveHandler),mi(t,"touchmove",this._delayedDragTouchMoveHandler),mi(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?Li(document,"pointermove",this._onTouchMove):n?Li(document,"touchmove",this._onTouchMove):Li(document,"mousemove",this._onTouchMove):(Li(Bn,"dragend",this),Li(ks,"dragstart",this._onDragStart));try{document.selection?q0(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(zh=!1,ks&&Bn){yl("dragStarted",this,{evt:n}),this.nativeDraggable&&Li(document,"dragover",NU);var r=this.options;!t&&Ws(Bn,r.dragClass,!1),Ws(Bn,r.ghostClass,!0),Dr.active=this,t&&this._appendGhost(),Ya({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Nu){this._lastX=Nu.clientX,this._lastY=Nu.clientY,Wx();for(var t=document.elementFromPoint(Nu.clientX,Nu.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Nu.clientX,Nu.clientY),t!==n);)n=t;if(Bn.parentNode[Fa]._isOutsideThisEl(t),n)do{if(n[Fa]){var r=void 0;if(r=n[Fa]._onDragOver({clientX:Nu.clientX,clientY:Nu.clientY,target:t,rootEl:n}),r&&!this.options.dragoverBubble)break}t=n}while(n=n.parentNode);Zx()}},_onTouchMove:function(t){if(Vf){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,o=t.touches?t.touches[0]:t,s=ti&&nh(ti,!0),u=ti&&s&&s.a,f=ti&&s&&s.d,d=L0&&Ba&&Wb(Ba),m=(o.clientX-Vf.clientX+i.x)/(u||1)+(d?d[0]-wv[0]:0)/(u||1),y=(o.clientY-Vf.clientY+i.y)/(f||1)+(d?d[1]-wv[1]:0)/(f||1);if(!Dr.active&&!zh){if(r&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<r)return;this._onDragStart(t,!0)}if(ti){s?(s.e+=m-(_v||0),s.f+=y-(bv||0)):s={a:1,b:0,c:0,d:1,e:m,f:y};var w="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");nr(ti,"webkitTransform",w),nr(ti,"mozTransform",w),nr(ti,"msTransform",w),nr(ti,"transform",w),_v=m,bv=y,Nu=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!ti){var t=this.options.fallbackOnBody?document.body:ks,n=Ds(Bn,!0,L0,!0,t),r=this.options;if(L0){for(Ba=t;nr(Ba,"position")==="static"&&nr(Ba,"transform")==="none"&&Ba!==document;)Ba=Ba.parentNode;Ba!==document.body&&Ba!==document.documentElement?(Ba===document&&(Ba=gc()),n.top+=Ba.scrollTop,n.left+=Ba.scrollLeft):Ba=gc(),wv=Wb(Ba)}ti=Bn.cloneNode(!0),Ws(ti,r.ghostClass,!1),Ws(ti,r.fallbackClass,!0),Ws(ti,r.dragClass,!0),nr(ti,"transition",""),nr(ti,"transform",""),nr(ti,"box-sizing","border-box"),nr(ti,"margin",0),nr(ti,"top",n.top),nr(ti,"left",n.left),nr(ti,"width",n.width),nr(ti,"height",n.height),nr(ti,"opacity","0.8"),nr(ti,"position",L0?"absolute":"fixed"),nr(ti,"zIndex","100000"),nr(ti,"pointerEvents","none"),Dr.ghost=ti,t.appendChild(ti),nr(ti,"transform-origin",Kb/parseInt(ti.style.width)*100+"% "+Yb/parseInt(ti.style.height)*100+"%")}},_onDragStart:function(t,n){var r=this,i=t.dataTransfer,o=r.options;if(yl("dragStart",this,{evt:t}),Dr.eventCanceled){this._onDrop();return}yl("setupClone",this),Dr.eventCanceled||(ro=by(Bn),ro.draggable=!1,ro.style["will-change"]="",this._hideClone(),Ws(ro,this.options.chosenClass,!1),Dr.clone=ro),r.cloneId=q0(function(){yl("clone",r),!Dr.eventCanceled&&(r.options.removeCloneOnHide||ks.insertBefore(ro,Bn),r._hideClone(),Ya({sortable:r,name:"clone"}))}),!n&&Ws(Bn,o.dragClass,!0),n?(xg=!0,r._loopId=setInterval(r._emulateDragOver,50)):(mi(document,"mouseup",r._onDrop),mi(document,"touchend",r._onDrop),mi(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",o.setData&&o.setData.call(r,i,Bn)),Li(document,"drop",r),nr(Bn,"transform","translateZ(0)")),zh=!0,r._dragStartId=q0(r._dragStarted.bind(r,n,t)),Li(document,"selectstart",r),Ud=!0,ip&&nr(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,r=t.target,i,o,s,u=this.options,f=u.group,d=Dr.active,m=w0===f,y=u.sort,w=ha||d,_,M=this,k=!1;if(A1)return;function R(Y,me){yl(Y,M,yc({evt:t,isOwner:m,axis:_?"vertical":"horizontal",revert:s,dragRect:i,targetRect:o,canSort:y,fromSortable:w,target:r,completed:j,onMove:function(Re,T){return S0(ks,n,Bn,i,Re,Ds(Re),t,T)},changed:J},me))}function N(){R("dragOverAnimationCapture"),M.captureAnimationState(),M!==w&&w.captureAnimationState()}function j(Y){return R("dragOverCompleted",{insertion:Y}),Y&&(m?d._hideClone():d._showClone(M),M!==w&&(Ws(Bn,ha?ha.options.ghostClass:d.options.ghostClass,!1),Ws(Bn,u.ghostClass,!0)),ha!==M&&M!==Dr.active?ha=M:M===Dr.active&&ha&&(ha=null),w===M&&(M._ignoreWhileAnimating=r),M.animateAll(function(){R("dragOverAnimationComplete"),M._ignoreWhileAnimating=null}),M!==w&&(w.animateAll(),w._ignoreWhileAnimating=null)),(r===Bn&&!Bn.animated||r===n&&!r.animated)&&(Dh=null),!u.dragoverBubble&&!t.rootEl&&r!==document&&(Bn.parentNode[Fa]._isOutsideThisEl(t.target),!Y&&Hf(t)),!u.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),k=!0}function J(){Vl=so(Bn),df=so(Bn,u.draggable),Ya({sortable:M,name:"change",toEl:n,newIndex:Vl,newDraggableIndex:df,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),r=Fu(r,u.draggable,n,!0),R("dragOver"),Dr.eventCanceled)return k;if(Bn.contains(t.target)||r.animated&&r.animatingX&&r.animatingY||M._ignoreWhileAnimating===r)return j(!1);if(xg=!1,d&&!u.disabled&&(m?y||(s=no!==ks):ha===this||(this.lastPutMode=w0.checkPull(this,d,Bn,t))&&f.checkPut(this,d,Bn,t))){if(_=this._getDirection(t,r)==="vertical",i=Ds(Bn),R("dragOverValid"),Dr.eventCanceled)return k;if(s)return no=ks,N(),this._hideClone(),R("revert"),Dr.eventCanceled||(qf?ks.insertBefore(Bn,qf):ks.appendChild(Bn)),j(!0);var te=_y(n,u.draggable);if(!te||FU(t,_,this)&&!te.animated){if(te===Bn)return j(!1);if(te&&n===t.target&&(r=te),r&&(o=Ds(r)),S0(ks,n,Bn,i,r,o,t,!!r)!==!1)return N(),n.appendChild(Bn),no=n,J(),j(!0)}else if(te&&RU(t,_,this)){var ae=ad(n,0,u,!0);if(ae===Bn)return j(!1);if(r=ae,o=Ds(r),S0(ks,n,Bn,i,r,o,t,!1)!==!1)return N(),n.insertBefore(Bn,ae),no=n,J(),j(!0)}else if(r.parentNode===n){o=Ds(r);var le=0,xe,G=Bn.parentNode!==n,I=!DU(Bn.animated&&Bn.toRect||i,r.animated&&r.toRect||o,_),K=_?"top":"left",$=qb(r,"top","top")||qb(Bn,"top","top"),O=$?$.scrollTop:void 0;Dh!==r&&(xe=o[K],lp=!1,x0=!I&&u.invertSwap||G),le=jU(t,r,o,_,I?1:u.swapThreshold,u.invertedSwapThreshold==null?u.swapThreshold:u.invertedSwapThreshold,x0,Dh===r);var z;if(le!==0){var V=so(Bn);do V-=le,z=no.children[V];while(z&&(nr(z,"display")==="none"||z===ti))}if(le===0||z===r)return j(!1);Dh=r,ap=le;var W=r.nextElementSibling,q=!1;q=le===1;var X=S0(ks,n,Bn,i,r,o,t,q);if(X!==!1)return(X===1||X===-1)&&(q=X===1),A1=!0,setTimeout(IU,30),N(),q&&!W?n.appendChild(Bn):r.parentNode.insertBefore(Bn,q?W:r),$&&Vx($,0,O-$.scrollTop),no=Bn.parentNode,xe!==void 0&&!x0&&(G0=Math.abs(xe-Ds(r)[K])),J(),j(!0)}if(n.contains(Bn))return j(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){mi(document,"mousemove",this._onTouchMove),mi(document,"touchmove",this._onTouchMove),mi(document,"pointermove",this._onTouchMove),mi(document,"dragover",Hf),mi(document,"mousemove",Hf),mi(document,"touchmove",Hf)},_offUpEvents:function(){var t=this.el.ownerDocument;mi(t,"mouseup",this._onDrop),mi(t,"touchend",this._onDrop),mi(t,"pointerup",this._onDrop),mi(t,"touchcancel",this._onDrop),mi(document,"selectstart",this)},_onDrop:function(t){var n=this.el,r=this.options;if(Vl=so(Bn),df=so(Bn,r.draggable),yl("drop",this,{evt:t}),no=Bn&&Bn.parentNode,Vl=so(Bn),df=so(Bn,r.draggable),Dr.eventCanceled){this._nulling();return}zh=!1,x0=!1,lp=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),k1(this.cloneId),k1(this._dragStartId),this.nativeDraggable&&(mi(document,"drop",this),mi(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),ip&&nr(document.body,"user-select",""),nr(Bn,"transform",""),t&&(Ud&&(t.cancelable&&t.preventDefault(),!r.dropBubble&&t.stopPropagation()),ti&&ti.parentNode&&ti.parentNode.removeChild(ti),(ks===no||ha&&ha.lastPutMode!=="clone")&&ro&&ro.parentNode&&ro.parentNode.removeChild(ro),Bn&&(this.nativeDraggable&&mi(Bn,"dragend",this),xv(Bn),Bn.style["will-change"]="",Ud&&!zh&&Ws(Bn,ha?ha.options.ghostClass:this.options.ghostClass,!1),Ws(Bn,this.options.chosenClass,!1),Ya({sortable:this,name:"unchoose",toEl:no,newIndex:null,newDraggableIndex:null,originalEvent:t}),ks!==no?(Vl>=0&&(Ya({rootEl:no,name:"add",toEl:no,fromEl:ks,originalEvent:t}),Ya({sortable:this,name:"remove",toEl:no,originalEvent:t}),Ya({rootEl:no,name:"sort",toEl:no,fromEl:ks,originalEvent:t}),Ya({sortable:this,name:"sort",toEl:no,originalEvent:t})),ha&&ha.save()):Vl!==Vh&&Vl>=0&&(Ya({sortable:this,name:"update",toEl:no,originalEvent:t}),Ya({sortable:this,name:"sort",toEl:no,originalEvent:t})),Dr.active&&((Vl==null||Vl===-1)&&(Vl=Vh,df=op),Ya({sortable:this,name:"end",toEl:no,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){yl("nulling",this),ks=Bn=no=ti=qf=ro=H0=pf=Vf=Nu=Ud=Vl=df=Vh=op=Dh=ap=ha=w0=Dr.dragged=Dr.ghost=Dr.clone=Dr.active=null,Sg.forEach(function(t){t.checked=!0}),Sg.length=_v=bv=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":Bn&&(this._onDragOver(t),OU(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,r=this.el.children,i=0,o=r.length,s=this.options;i<o;i++)n=r[i],Fu(n,s.draggable,this.el,!1)&&t.push(n.getAttribute(s.dataIdAttr)||$U(n));return t},sort:function(t,n){var r={},i=this.el;this.toArray().forEach(function(o,s){var u=i.children[s];Fu(u,this.options.draggable,i,!1)&&(r[o]=u)},this),n&&this.captureAnimationState(),t.forEach(function(o){r[o]&&(i.removeChild(r[o]),i.appendChild(r[o]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return Fu(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var r=this.options;if(n===void 0)return r[t];var i=Op.modifyOption(this,t,n);typeof i<"u"?r[t]=i:r[t]=n,t==="group"&&qx(r)},destroy:function(){yl("destroy",this);var t=this.el;t[Fa]=null,mi(t,"mousedown",this._onTapStart),mi(t,"touchstart",this._onTapStart),mi(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(mi(t,"dragover",this),mi(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Lg.splice(Lg.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!pf){if(yl("hideClone",this),Dr.eventCanceled)return;nr(ro,"display","none"),this.options.removeCloneOnHide&&ro.parentNode&&ro.parentNode.removeChild(ro),pf=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(pf){if(yl("showClone",this),Dr.eventCanceled)return;Bn.parentNode==ks&&!this.options.group.revertClone?ks.insertBefore(ro,Bn):qf?ks.insertBefore(ro,qf):ks.appendChild(ro),this.options.group.revertClone&&this.animate(Bn,ro),nr(ro,"display",""),pf=!1}}};function OU(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function S0(e,t,n,r,i,o,s,u){var f,d=e[Fa],m=d.options.onMove,y;return window.CustomEvent&&!qc&&!Np?f=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(f=document.createEvent("Event"),f.initEvent("move",!0,!0)),f.to=t,f.from=e,f.dragged=n,f.draggedRect=r,f.related=i||t,f.relatedRect=o||Ds(t),f.willInsertAfter=u,f.originalEvent=s,e.dispatchEvent(f),m&&(y=m.call(d,f,s)),y}function xv(e){e.draggable=!1}function IU(){A1=!1}function RU(e,t,n){var r=Ds(ad(n.el,0,n.options,!0)),i=10;return t?e.clientX<r.left-i||e.clientY<r.top&&e.clientX<r.right:e.clientY<r.top-i||e.clientY<r.bottom&&e.clientX<r.left}function FU(e,t,n){var r=Ds(_y(n.el,n.options.draggable)),i=10;return t?e.clientX>r.right+i||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+i}function jU(e,t,n,r,i,o,s,u){var f=r?e.clientY:e.clientX,d=r?n.height:n.width,m=r?n.top:n.left,y=r?n.bottom:n.right,w=!1;if(!s){if(u&&G0<d*i){if(!lp&&(ap===1?f>m+d*o/2:f<y-d*o/2)&&(lp=!0),lp)w=!0;else if(ap===1?f<m+G0:f>y-G0)return-ap}else if(f>m+d*(1-i)/2&&f<y-d*(1-i)/2)return zU(t)}return w=w||s,w&&(f<m+d*o/2||f>y-d*o/2)?f>m+d/2?1:-1:0}function zU(e){return so(Bn)<so(e)?1:-1}function $U(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function UU(e){Sg.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var r=t[n];r.checked&&Sg.push(r)}}function q0(e){return setTimeout(e,0)}function k1(e){return clearTimeout(e)}am&&Li(document,"touchmove",function(e){(Dr.active||zh)&&e.cancelable&&e.preventDefault()});Dr.utils={on:Li,off:mi,css:nr,find:$x,is:function(t,n){return!!Fu(t,n,t,!1)},extend:CU,throttle:Ux,closest:Fu,toggleClass:Ws,clone:by,index:so,nextTick:q0,cancelNextTick:k1,detectDirection:Gx,getChild:ad};Dr.get=function(e){return e[Fa]};Dr.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Dr.utils=yc(yc({},Dr.utils),r.utils)),Op.mount(r)})};Dr.create=function(e,t){return new Dr(e,t)};Dr.version=wU;var Po=[],Vd,T1,D1=!1,Lv,Sv,Cg,Hd;function VU(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?Li(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Li(document,"pointermove",this._handleFallbackAutoScroll):r.touches?Li(document,"touchmove",this._handleFallbackAutoScroll):Li(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?mi(document,"dragover",this._handleAutoScroll):(mi(document,"pointermove",this._handleFallbackAutoScroll),mi(document,"touchmove",this._handleFallbackAutoScroll),mi(document,"mousemove",this._handleFallbackAutoScroll)),Xb(),W0(),EU()},nulling:function(){Cg=T1=Vd=D1=Hd=Lv=Sv=null,Po.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,o=(n.touches?n.touches[0]:n).clientX,s=(n.touches?n.touches[0]:n).clientY,u=document.elementFromPoint(o,s);if(Cg=n,r||this.options.forceAutoScrollFallback||Np||qc||ip){Cv(n,this.options,u,r);var f=vf(u,!0);D1&&(!Hd||o!==Lv||s!==Sv)&&(Hd&&Xb(),Hd=setInterval(function(){var d=vf(document.elementFromPoint(o,s),!0);d!==f&&(f=d,W0()),Cv(n,i.options,d,r)},10),Lv=o,Sv=s)}else{if(!this.options.bubbleScroll||vf(u,!0)===gc()){W0();return}Cv(n,this.options,vf(u,!1),!1)}}},vu(e,{pluginName:"scroll",initializeByDefault:!0})}function W0(){Po.forEach(function(e){clearInterval(e.pid)}),Po=[]}function Xb(){clearInterval(Hd)}var Cv=Ux(function(e,t,n,r){if(t.scroll){var i=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,u=t.scrollSpeed,f=gc(),d=!1,m;T1!==n&&(T1=n,W0(),Vd=t.scroll,m=t.scrollFn,Vd===!0&&(Vd=vf(n,!0)));var y=0,w=Vd;do{var _=w,M=Ds(_),k=M.top,R=M.bottom,N=M.left,j=M.right,J=M.width,te=M.height,ae=void 0,le=void 0,xe=_.scrollWidth,G=_.scrollHeight,I=nr(_),K=_.scrollLeft,$=_.scrollTop;_===f?(ae=J<xe&&(I.overflowX==="auto"||I.overflowX==="scroll"||I.overflowX==="visible"),le=te<G&&(I.overflowY==="auto"||I.overflowY==="scroll"||I.overflowY==="visible")):(ae=J<xe&&(I.overflowX==="auto"||I.overflowX==="scroll"),le=te<G&&(I.overflowY==="auto"||I.overflowY==="scroll"));var O=ae&&(Math.abs(j-i)<=s&&K+J<xe)-(Math.abs(N-i)<=s&&!!K),z=le&&(Math.abs(R-o)<=s&&$+te<G)-(Math.abs(k-o)<=s&&!!$);if(!Po[y])for(var V=0;V<=y;V++)Po[V]||(Po[V]={});(Po[y].vx!=O||Po[y].vy!=z||Po[y].el!==_)&&(Po[y].el=_,Po[y].vx=O,Po[y].vy=z,clearInterval(Po[y].pid),(O!=0||z!=0)&&(d=!0,Po[y].pid=setInterval((function(){r&&this.layer===0&&Dr.active._onTouchMove(Cg);var W=Po[this.layer].vy?Po[this.layer].vy*u:0,q=Po[this.layer].vx?Po[this.layer].vx*u:0;typeof m=="function"&&m.call(Dr.dragged.parentNode[Fa],q,W,e,Cg,Po[this.layer].el)!=="continue"||Vx(Po[this.layer].el,q,W)}).bind({layer:y}),24))),y++}while(t.bubbleScroll&&w!==f&&(w=vf(w,!1)));D1=d}},30),Kx=function(t){var n=t.originalEvent,r=t.putSortable,i=t.dragEl,o=t.activeSortable,s=t.dispatchSortableEvent,u=t.hideGhostForTarget,f=t.unhideGhostForTarget;if(n){var d=r||o;u();var m=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,y=document.elementFromPoint(m.clientX,m.clientY);f(),d&&!d.el.contains(y)&&(s("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function wy(){}wy.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,r=t.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=ad(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:Kx};vu(wy,{pluginName:"revertOnSpill"});function xy(){}xy.prototype={onSpill:function(t){var n=t.dragEl,r=t.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:Kx};vu(xy,{pluginName:"removeOnSpill"});var uu;function HU(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(n){var r=n.dragEl;uu=r},dragOverValid:function(n){var r=n.completed,i=n.target,o=n.onMove,s=n.activeSortable,u=n.changed,f=n.cancel;if(s.options.swap){var d=this.sortable.el,m=this.options;if(i&&i!==d){var y=uu;o(i)!==!1?(Ws(i,m.swapClass,!0),uu=i):uu=null,y&&y!==uu&&Ws(y,m.swapClass,!1)}u(),r(!0),f()}},drop:function(n){var r=n.activeSortable,i=n.putSortable,o=n.dragEl,s=i||this.sortable,u=this.options;uu&&Ws(uu,u.swapClass,!1),uu&&(u.swap||i&&i.options.swap)&&o!==uu&&(s.captureAnimationState(),s!==r&&r.captureAnimationState(),GU(o,uu),s.animateAll(),s!==r&&r.animateAll())},nulling:function(){uu=null}},vu(e,{pluginName:"swap",eventProperties:function(){return{swapItem:uu}}})}function GU(e,t){var n=e.parentNode,r=t.parentNode,i,o;!n||!r||n.isEqualNode(t)||r.isEqualNode(e)||(i=so(e),o=so(t),n.isEqualNode(r)&&i<o&&o++,n.insertBefore(t,n.children[i]),r.insertBefore(e,r.children[o]))}var Gr=[],Ul=[],Dd,Ou,Bd=!1,_l=!1,Bh=!1,hs,Nd,C0;function qU(){function e(t){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));t.options.supportPointer?Li(document,"pointerup",this._deselectMultiDrag):(Li(document,"mouseup",this._deselectMultiDrag),Li(document,"touchend",this._deselectMultiDrag)),Li(document,"keydown",this._checkKeyDown),Li(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(i,o){var s="";Gr.length&&Ou===t?Gr.forEach(function(u,f){s+=(f?", ":"")+u.textContent}):s=o.textContent,i.setData("Text",s)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var r=n.dragEl;hs=r},delayEnded:function(){this.isMultiDrag=~Gr.indexOf(hs)},setupClone:function(n){var r=n.sortable,i=n.cancel;if(this.isMultiDrag){for(var o=0;o<Gr.length;o++)Ul.push(by(Gr[o])),Ul[o].sortableIndex=Gr[o].sortableIndex,Ul[o].draggable=!1,Ul[o].style["will-change"]="",Ws(Ul[o],this.options.selectedClass,!1),Gr[o]===hs&&Ws(Ul[o],this.options.chosenClass,!1);r._hideClone(),i()}},clone:function(n){var r=n.sortable,i=n.rootEl,o=n.dispatchSortableEvent,s=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Gr.length&&Ou===r&&(Qb(!0,i),o("clone"),s()))},showClone:function(n){var r=n.cloneNowShown,i=n.rootEl,o=n.cancel;this.isMultiDrag&&(Qb(!1,i),Ul.forEach(function(s){nr(s,"display","")}),r(),C0=!1,o())},hideClone:function(n){var r=this;n.sortable;var i=n.cloneNowHidden,o=n.cancel;this.isMultiDrag&&(Ul.forEach(function(s){nr(s,"display","none"),r.options.removeCloneOnHide&&s.parentNode&&s.parentNode.removeChild(s)}),i(),C0=!0,o())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&Ou&&Ou.multiDrag._deselectMultiDrag(),Gr.forEach(function(r){r.sortableIndex=so(r)}),Gr=Gr.sort(function(r,i){return r.sortableIndex-i.sortableIndex}),Bh=!0},dragStarted:function(n){var r=this,i=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){Gr.forEach(function(s){s!==hs&&nr(s,"position","absolute")});var o=Ds(hs,!1,!0,!0);Gr.forEach(function(s){s!==hs&&Zb(s,o)}),_l=!0,Bd=!0}i.animateAll(function(){_l=!1,Bd=!1,r.options.animation&&Gr.forEach(function(s){vv(s)}),r.options.sort&&E0()})}},dragOver:function(n){var r=n.target,i=n.completed,o=n.cancel;_l&&~Gr.indexOf(r)&&(i(!1),o())},revert:function(n){var r=n.fromSortable,i=n.rootEl,o=n.sortable,s=n.dragRect;Gr.length>1&&(Gr.forEach(function(u){o.addAnimationState({target:u,rect:_l?Ds(u):s}),vv(u),u.fromRect=s,r.removeAnimationState(u)}),_l=!1,WU(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(n){var r=n.sortable,i=n.isOwner,o=n.insertion,s=n.activeSortable,u=n.parentEl,f=n.putSortable,d=this.options;if(o){if(i&&s._hideClone(),Bd=!1,d.animation&&Gr.length>1&&(_l||!i&&!s.options.sort&&!f)){var m=Ds(hs,!1,!0,!0);Gr.forEach(function(w){w!==hs&&(Zb(w,m),u.appendChild(w))}),_l=!0}if(!i)if(_l||E0(),Gr.length>1){var y=C0;s._showClone(r),s.options.animation&&!C0&&y&&Ul.forEach(function(w){s.addAnimationState({target:w,rect:Nd}),w.fromRect=Nd,w.thisAnimationDuration=null})}else s._showClone(r)}},dragOverAnimationCapture:function(n){var r=n.dragRect,i=n.isOwner,o=n.activeSortable;if(Gr.forEach(function(u){u.thisAnimationDuration=null}),o.options.animation&&!i&&o.multiDrag.isMultiDrag){Nd=vu({},r);var s=nh(hs,!0);Nd.top-=s.f,Nd.left-=s.e}},dragOverAnimationComplete:function(){_l&&(_l=!1,E0())},drop:function(n){var r=n.originalEvent,i=n.rootEl,o=n.parentEl,s=n.sortable,u=n.dispatchSortableEvent,f=n.oldIndex,d=n.putSortable,m=d||this.sortable;if(r){var y=this.options,w=o.children;if(!Bh)if(y.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Ws(hs,y.selectedClass,!~Gr.indexOf(hs)),~Gr.indexOf(hs))Gr.splice(Gr.indexOf(hs),1),Dd=null,$d({sortable:s,rootEl:i,name:"deselect",targetEl:hs});else{if(Gr.push(hs),$d({sortable:s,rootEl:i,name:"select",targetEl:hs}),r.shiftKey&&Dd&&s.el.contains(Dd)){var _=so(Dd),M=so(hs);if(~_&&~M&&_!==M){var k,R;for(M>_?(R=_,k=M):(R=M,k=_+1);R<k;R++)~Gr.indexOf(w[R])||(Ws(w[R],y.selectedClass,!0),Gr.push(w[R]),$d({sortable:s,rootEl:i,name:"select",targetEl:w[R]}))}}else Dd=hs;Ou=m}if(Bh&&this.isMultiDrag){if(_l=!1,(o[Fa].options.sort||o!==i)&&Gr.length>1){var N=Ds(hs),j=so(hs,":not(."+this.options.selectedClass+")");if(!Bd&&y.animation&&(hs.thisAnimationDuration=null),m.captureAnimationState(),!Bd&&(y.animation&&(hs.fromRect=N,Gr.forEach(function(te){if(te.thisAnimationDuration=null,te!==hs){var ae=_l?Ds(te):N;te.fromRect=ae,m.addAnimationState({target:te,rect:ae})}})),E0(),Gr.forEach(function(te){w[j]?o.insertBefore(te,w[j]):o.appendChild(te),j++}),f===so(hs))){var J=!1;Gr.forEach(function(te){if(te.sortableIndex!==so(te)){J=!0;return}}),J&&u("update")}Gr.forEach(function(te){vv(te)}),m.animateAll()}Ou=m}(i===o||d&&d.lastPutMode!=="clone")&&Ul.forEach(function(te){te.parentNode&&te.parentNode.removeChild(te)})}},nullingGlobal:function(){this.isMultiDrag=Bh=!1,Ul.length=0},destroyGlobal:function(){this._deselectMultiDrag(),mi(document,"pointerup",this._deselectMultiDrag),mi(document,"mouseup",this._deselectMultiDrag),mi(document,"touchend",this._deselectMultiDrag),mi(document,"keydown",this._checkKeyDown),mi(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof Bh<"u"&&Bh)&&Ou===this.sortable&&!(n&&Fu(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;Gr.length;){var r=Gr[0];Ws(r,this.options.selectedClass,!1),Gr.shift(),$d({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},vu(e,{pluginName:"multiDrag",utils:{select:function(n){var r=n.parentNode[Fa];!r||!r.options.multiDrag||~Gr.indexOf(n)||(Ou&&Ou!==r&&(Ou.multiDrag._deselectMultiDrag(),Ou=r),Ws(n,r.options.selectedClass,!0),Gr.push(n))},deselect:function(n){var r=n.parentNode[Fa],i=Gr.indexOf(n);!r||!r.options.multiDrag||!~i||(Ws(n,r.options.selectedClass,!1),Gr.splice(i,1))}},eventProperties:function(){var n=this,r=[],i=[];return Gr.forEach(function(o){r.push({multiDragElement:o,index:o.sortableIndex});var s;_l&&o!==hs?s=-1:_l?s=so(o,":not(."+n.options.selectedClass+")"):s=so(o),i.push({multiDragElement:o,index:s})}),{items:mU(Gr),clones:[].concat(Ul),oldIndicies:r,newIndicies:i}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function WU(e,t){Gr.forEach(function(n,r){var i=t.children[n.sortableIndex+(e?Number(r):0)];i?t.insertBefore(n,i):t.appendChild(n)})}function Qb(e,t){Ul.forEach(function(n,r){var i=t.children[n.sortableIndex+(e?Number(r):0)];i?t.insertBefore(n,i):t.appendChild(n)})}function E0(){Gr.forEach(function(e){e!==hs&&e.parentNode&&e.parentNode.removeChild(e)})}Dr.mount(new VU);Dr.mount(xy,wy);const ZU=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:qU,Sortable:Dr,Swap:HU,default:Dr},Symbol.toStringTag,{value:"Module"})),KU=J5(ZU);(function(e,t){(function(r,i){e.exports=i(hU,KU)})(typeof self<"u"?self:Jo,function(n,r){return function(i){var o={};function s(u){if(o[u])return o[u].exports;var f=o[u]={i:u,l:!1,exports:{}};return i[u].call(f.exports,f,f.exports,s),f.l=!0,f.exports}return s.m=i,s.c=o,s.d=function(u,f,d){s.o(u,f)||Object.defineProperty(u,f,{enumerable:!0,get:d})},s.r=function(u){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},s.t=function(u,f){if(f&1&&(u=s(u)),f&8||f&4&&typeof u=="object"&&u&&u.__esModule)return u;var d=Object.create(null);if(s.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:u}),f&2&&typeof u!="string")for(var m in u)s.d(d,m,(function(y){return u[y]}).bind(null,m));return d},s.n=function(u){var f=u&&u.__esModule?function(){return u.default}:function(){return u};return s.d(f,"a",f),f},s.o=function(u,f){return Object.prototype.hasOwnProperty.call(u,f)},s.p="",s(s.s="fb15")}({"00ee":function(i,o,s){var u=s("b622"),f=u("toStringTag"),d={};d[f]="z",i.exports=String(d)==="[object z]"},"0366":function(i,o,s){var u=s("1c0b");i.exports=function(f,d,m){if(u(f),d===void 0)return f;switch(m){case 0:return function(){return f.call(d)};case 1:return function(y){return f.call(d,y)};case 2:return function(y,w){return f.call(d,y,w)};case 3:return function(y,w,_){return f.call(d,y,w,_)}}return function(){return f.apply(d,arguments)}}},"057f":function(i,o,s){var u=s("fc6a"),f=s("241c").f,d={}.toString,m=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],y=function(w){try{return f(w)}catch{return m.slice()}};i.exports.f=function(_){return m&&d.call(_)=="[object Window]"?y(_):f(u(_))}},"06cf":function(i,o,s){var u=s("83ab"),f=s("d1e7"),d=s("5c6c"),m=s("fc6a"),y=s("c04e"),w=s("5135"),_=s("0cfb"),M=Object.getOwnPropertyDescriptor;o.f=u?M:function(R,N){if(R=m(R),N=y(N,!0),_)try{return M(R,N)}catch{}if(w(R,N))return d(!f.f.call(R,N),R[N])}},"0cfb":function(i,o,s){var u=s("83ab"),f=s("d039"),d=s("cc12");i.exports=!u&&!f(function(){return Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(i,o,s){var u=s("23e7"),f=s("d58f").left,d=s("a640"),m=s("ae40"),y=d("reduce"),w=m("reduce",{1:0});u({target:"Array",proto:!0,forced:!y||!w},{reduce:function(M){return f(this,M,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(i,o,s){var u=s("c6b6"),f=s("9263");i.exports=function(d,m){var y=d.exec;if(typeof y=="function"){var w=y.call(d,m);if(typeof w!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return w}if(u(d)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return f.call(d,m)}},"159b":function(i,o,s){var u=s("da84"),f=s("fdbc"),d=s("17c2"),m=s("9112");for(var y in f){var w=u[y],_=w&&w.prototype;if(_&&_.forEach!==d)try{m(_,"forEach",d)}catch{_.forEach=d}}},"17c2":function(i,o,s){var u=s("b727").forEach,f=s("a640"),d=s("ae40"),m=f("forEach"),y=d("forEach");i.exports=!m||!y?function(_){return u(this,_,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(i,o,s){var u=s("d066");i.exports=u("document","documentElement")},"1c0b":function(i,o){i.exports=function(s){if(typeof s!="function")throw TypeError(String(s)+" is not a function");return s}},"1c7e":function(i,o,s){var u=s("b622"),f=u("iterator"),d=!1;try{var m=0,y={next:function(){return{done:!!m++}},return:function(){d=!0}};y[f]=function(){return this},Array.from(y,function(){throw 2})}catch{}i.exports=function(w,_){if(!_&&!d)return!1;var M=!1;try{var k={};k[f]=function(){return{next:function(){return{done:M=!0}}}},w(k)}catch{}return M}},"1d80":function(i,o){i.exports=function(s){if(s==null)throw TypeError("Can't call method on "+s);return s}},"1dde":function(i,o,s){var u=s("d039"),f=s("b622"),d=s("2d00"),m=f("species");i.exports=function(y){return d>=51||!u(function(){var w=[],_=w.constructor={};return _[m]=function(){return{foo:1}},w[y](Boolean).foo!==1})}},"23cb":function(i,o,s){var u=s("a691"),f=Math.max,d=Math.min;i.exports=function(m,y){var w=u(m);return w<0?f(w+y,0):d(w,y)}},"23e7":function(i,o,s){var u=s("da84"),f=s("06cf").f,d=s("9112"),m=s("6eeb"),y=s("ce4e"),w=s("e893"),_=s("94ca");i.exports=function(M,k){var R=M.target,N=M.global,j=M.stat,J,te,ae,le,xe,G;if(N?te=u:j?te=u[R]||y(R,{}):te=(u[R]||{}).prototype,te)for(ae in k){if(xe=k[ae],M.noTargetGet?(G=f(te,ae),le=G&&G.value):le=te[ae],J=_(N?ae:R+(j?".":"#")+ae,M.forced),!J&&le!==void 0){if(typeof xe==typeof le)continue;w(xe,le)}(M.sham||le&&le.sham)&&d(xe,"sham",!0),m(te,ae,xe,M)}}},"241c":function(i,o,s){var u=s("ca84"),f=s("7839"),d=f.concat("length","prototype");o.f=Object.getOwnPropertyNames||function(y){return u(y,d)}},"25f0":function(i,o,s){var u=s("6eeb"),f=s("825a"),d=s("d039"),m=s("ad6d"),y="toString",w=RegExp.prototype,_=w[y],M=d(function(){return _.call({source:"a",flags:"b"})!="/a/b"}),k=_.name!=y;(M||k)&&u(RegExp.prototype,y,function(){var N=f(this),j=String(N.source),J=N.flags,te=String(J===void 0&&N instanceof RegExp&&!("flags"in w)?m.call(N):J);return"/"+j+"/"+te},{unsafe:!0})},"2ca0":function(i,o,s){var u=s("23e7"),f=s("06cf").f,d=s("50c4"),m=s("5a34"),y=s("1d80"),w=s("ab13"),_=s("c430"),M="".startsWith,k=Math.min,R=w("startsWith"),N=!_&&!R&&!!function(){var j=f(String.prototype,"startsWith");return j&&!j.writable}();u({target:"String",proto:!0,forced:!N&&!R},{startsWith:function(J){var te=String(y(this));m(J);var ae=d(k(arguments.length>1?arguments[1]:void 0,te.length)),le=String(J);return M?M.call(te,le,ae):te.slice(ae,ae+le.length)===le}})},"2d00":function(i,o,s){var u=s("da84"),f=s("342f"),d=u.process,m=d&&d.versions,y=m&&m.v8,w,_;y?(w=y.split("."),_=w[0]+w[1]):f&&(w=f.match(/Edge\/(\d+)/),(!w||w[1]>=74)&&(w=f.match(/Chrome\/(\d+)/),w&&(_=w[1]))),i.exports=_&&+_},"342f":function(i,o,s){var u=s("d066");i.exports=u("navigator","userAgent")||""},"35a1":function(i,o,s){var u=s("f5df"),f=s("3f8c"),d=s("b622"),m=d("iterator");i.exports=function(y){if(y!=null)return y[m]||y["@@iterator"]||f[u(y)]}},"37e8":function(i,o,s){var u=s("83ab"),f=s("9bf2"),d=s("825a"),m=s("df75");i.exports=u?Object.defineProperties:function(w,_){d(w);for(var M=m(_),k=M.length,R=0,N;k>R;)f.f(w,N=M[R++],_[N]);return w}},"3bbe":function(i,o,s){var u=s("861d");i.exports=function(f){if(!u(f)&&f!==null)throw TypeError("Can't set "+String(f)+" as a prototype");return f}},"3ca3":function(i,o,s){var u=s("6547").charAt,f=s("69f3"),d=s("7dd0"),m="String Iterator",y=f.set,w=f.getterFor(m);d(String,"String",function(_){y(this,{type:m,string:String(_),index:0})},function(){var M=w(this),k=M.string,R=M.index,N;return R>=k.length?{value:void 0,done:!0}:(N=u(k,R),M.index+=N.length,{value:N,done:!1})})},"3f8c":function(i,o){i.exports={}},4160:function(i,o,s){var u=s("23e7"),f=s("17c2");u({target:"Array",proto:!0,forced:[].forEach!=f},{forEach:f})},"428f":function(i,o,s){var u=s("da84");i.exports=u},"44ad":function(i,o,s){var u=s("d039"),f=s("c6b6"),d="".split;i.exports=u(function(){return!Object("z").propertyIsEnumerable(0)})?function(m){return f(m)=="String"?d.call(m,""):Object(m)}:Object},"44d2":function(i,o,s){var u=s("b622"),f=s("7c73"),d=s("9bf2"),m=u("unscopables"),y=Array.prototype;y[m]==null&&d.f(y,m,{configurable:!0,value:f(null)}),i.exports=function(w){y[m][w]=!0}},"44e7":function(i,o,s){var u=s("861d"),f=s("c6b6"),d=s("b622"),m=d("match");i.exports=function(y){var w;return u(y)&&((w=y[m])!==void 0?!!w:f(y)=="RegExp")}},4930:function(i,o,s){var u=s("d039");i.exports=!!Object.getOwnPropertySymbols&&!u(function(){return!String(Symbol())})},"4d64":function(i,o,s){var u=s("fc6a"),f=s("50c4"),d=s("23cb"),m=function(y){return function(w,_,M){var k=u(w),R=f(k.length),N=d(M,R),j;if(y&&_!=_){for(;R>N;)if(j=k[N++],j!=j)return!0}else for(;R>N;N++)if((y||N in k)&&k[N]===_)return y||N||0;return!y&&-1}};i.exports={includes:m(!0),indexOf:m(!1)}},"4de4":function(i,o,s){var u=s("23e7"),f=s("b727").filter,d=s("1dde"),m=s("ae40"),y=d("filter"),w=m("filter");u({target:"Array",proto:!0,forced:!y||!w},{filter:function(M){return f(this,M,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(i,o,s){var u=s("0366"),f=s("7b0b"),d=s("9bdd"),m=s("e95a"),y=s("50c4"),w=s("8418"),_=s("35a1");i.exports=function(k){var R=f(k),N=typeof this=="function"?this:Array,j=arguments.length,J=j>1?arguments[1]:void 0,te=J!==void 0,ae=_(R),le=0,xe,G,I,K,$,O;if(te&&(J=u(J,j>2?arguments[2]:void 0,2)),ae!=null&&!(N==Array&&m(ae)))for(K=ae.call(R),$=K.next,G=new N;!(I=$.call(K)).done;le++)O=te?d(K,J,[I.value,le],!0):I.value,w(G,le,O);else for(xe=y(R.length),G=new N(xe);xe>le;le++)O=te?J(R[le],le):R[le],w(G,le,O);return G.length=le,G}},"4fad":function(i,o,s){var u=s("23e7"),f=s("6f53").entries;u({target:"Object",stat:!0},{entries:function(m){return f(m)}})},"50c4":function(i,o,s){var u=s("a691"),f=Math.min;i.exports=function(d){return d>0?f(u(d),9007199254740991):0}},5135:function(i,o){var s={}.hasOwnProperty;i.exports=function(u,f){return s.call(u,f)}},5319:function(i,o,s){var u=s("d784"),f=s("825a"),d=s("7b0b"),m=s("50c4"),y=s("a691"),w=s("1d80"),_=s("8aa5"),M=s("14c3"),k=Math.max,R=Math.min,N=Math.floor,j=/\$([$&'`]|\d\d?|<[^>]*>)/g,J=/\$([$&'`]|\d\d?)/g,te=function(ae){return ae===void 0?ae:String(ae)};u("replace",2,function(ae,le,xe,G){var I=G.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,K=G.REPLACE_KEEPS_$0,$=I?"$":"$0";return[function(V,W){var q=w(this),X=V==null?void 0:V[ae];return X!==void 0?X.call(V,q,W):le.call(String(q),V,W)},function(z,V){if(!I&&K||typeof V=="string"&&V.indexOf($)===-1){var W=xe(le,z,this,V);if(W.done)return W.value}var q=f(z),X=String(this),Y=typeof V=="function";Y||(V=String(V));var me=q.global;if(me){var Se=q.unicode;q.lastIndex=0}for(var Re=[];;){var T=M(q,X);if(T===null||(Re.push(T),!me))break;var ne=String(T[0]);ne===""&&(q.lastIndex=_(X,m(q.lastIndex),Se))}for(var fe="",ce=0,ye=0;ye<Re.length;ye++){T=Re[ye];for(var oe=String(T[0]),B=k(R(y(T.index),X.length),0),ue=[],De=1;De<T.length;De++)ue.push(te(T[De]));var Me=T.groups;if(Y){var We=[oe].concat(ue,B,X);Me!==void 0&&We.push(Me);var Z=String(V.apply(void 0,We))}else Z=O(oe,X,B,ue,Me,V);B>=ce&&(fe+=X.slice(ce,B)+Z,ce=B+oe.length)}return fe+X.slice(ce)}];function O(z,V,W,q,X,Y){var me=W+z.length,Se=q.length,Re=J;return X!==void 0&&(X=d(X),Re=j),le.call(Y,Re,function(T,ne){var fe;switch(ne.charAt(0)){case"$":return"$";case"&":return z;case"`":return V.slice(0,W);case"'":return V.slice(me);case"<":fe=X[ne.slice(1,-1)];break;default:var ce=+ne;if(ce===0)return T;if(ce>Se){var ye=N(ce/10);return ye===0?T:ye<=Se?q[ye-1]===void 0?ne.charAt(1):q[ye-1]+ne.charAt(1):T}fe=q[ce-1]}return fe===void 0?"":fe})}})},5692:function(i,o,s){var u=s("c430"),f=s("c6cd");(i.exports=function(d,m){return f[d]||(f[d]=m!==void 0?m:{})})("versions",[]).push({version:"3.6.5",mode:u?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(i,o,s){var u=s("d066"),f=s("241c"),d=s("7418"),m=s("825a");i.exports=u("Reflect","ownKeys")||function(w){var _=f.f(m(w)),M=d.f;return M?_.concat(M(w)):_}},"5a34":function(i,o,s){var u=s("44e7");i.exports=function(f){if(u(f))throw TypeError("The method doesn't accept regular expressions");return f}},"5c6c":function(i,o){i.exports=function(s,u){return{enumerable:!(s&1),configurable:!(s&2),writable:!(s&4),value:u}}},"5db7":function(i,o,s){var u=s("23e7"),f=s("a2bf"),d=s("7b0b"),m=s("50c4"),y=s("1c0b"),w=s("65f0");u({target:"Array",proto:!0},{flatMap:function(M){var k=d(this),R=m(k.length),N;return y(M),N=w(k,0),N.length=f(N,k,k,R,0,1,M,arguments.length>1?arguments[1]:void 0),N}})},6547:function(i,o,s){var u=s("a691"),f=s("1d80"),d=function(m){return function(y,w){var _=String(f(y)),M=u(w),k=_.length,R,N;return M<0||M>=k?m?"":void 0:(R=_.charCodeAt(M),R<55296||R>56319||M+1===k||(N=_.charCodeAt(M+1))<56320||N>57343?m?_.charAt(M):R:m?_.slice(M,M+2):(R-55296<<10)+(N-56320)+65536)}};i.exports={codeAt:d(!1),charAt:d(!0)}},"65f0":function(i,o,s){var u=s("861d"),f=s("e8b5"),d=s("b622"),m=d("species");i.exports=function(y,w){var _;return f(y)&&(_=y.constructor,typeof _=="function"&&(_===Array||f(_.prototype))?_=void 0:u(_)&&(_=_[m],_===null&&(_=void 0))),new(_===void 0?Array:_)(w===0?0:w)}},"69f3":function(i,o,s){var u=s("7f9a"),f=s("da84"),d=s("861d"),m=s("9112"),y=s("5135"),w=s("f772"),_=s("d012"),M=f.WeakMap,k,R,N,j=function(I){return N(I)?R(I):k(I,{})},J=function(I){return function(K){var $;if(!d(K)||($=R(K)).type!==I)throw TypeError("Incompatible receiver, "+I+" required");return $}};if(u){var te=new M,ae=te.get,le=te.has,xe=te.set;k=function(I,K){return xe.call(te,I,K),K},R=function(I){return ae.call(te,I)||{}},N=function(I){return le.call(te,I)}}else{var G=w("state");_[G]=!0,k=function(I,K){return m(I,G,K),K},R=function(I){return y(I,G)?I[G]:{}},N=function(I){return y(I,G)}}i.exports={set:k,get:R,has:N,enforce:j,getterFor:J}},"6eeb":function(i,o,s){var u=s("da84"),f=s("9112"),d=s("5135"),m=s("ce4e"),y=s("8925"),w=s("69f3"),_=w.get,M=w.enforce,k=String(String).split("String");(i.exports=function(R,N,j,J){var te=J?!!J.unsafe:!1,ae=J?!!J.enumerable:!1,le=J?!!J.noTargetGet:!1;if(typeof j=="function"&&(typeof N=="string"&&!d(j,"name")&&f(j,"name",N),M(j).source=k.join(typeof N=="string"?N:"")),R===u){ae?R[N]=j:m(N,j);return}else te?!le&&R[N]&&(ae=!0):delete R[N];ae?R[N]=j:f(R,N,j)})(Function.prototype,"toString",function(){return typeof this=="function"&&_(this).source||y(this)})},"6f53":function(i,o,s){var u=s("83ab"),f=s("df75"),d=s("fc6a"),m=s("d1e7").f,y=function(w){return function(_){for(var M=d(_),k=f(M),R=k.length,N=0,j=[],J;R>N;)J=k[N++],(!u||m.call(M,J))&&j.push(w?[J,M[J]]:M[J]);return j}};i.exports={entries:y(!0),values:y(!1)}},"73d9":function(i,o,s){var u=s("44d2");u("flatMap")},7418:function(i,o){o.f=Object.getOwnPropertySymbols},"746f":function(i,o,s){var u=s("428f"),f=s("5135"),d=s("e538"),m=s("9bf2").f;i.exports=function(y){var w=u.Symbol||(u.Symbol={});f(w,y)||m(w,y,{value:d.f(y)})}},7839:function(i,o){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(i,o,s){var u=s("1d80");i.exports=function(f){return Object(u(f))}},"7c73":function(i,o,s){var u=s("825a"),f=s("37e8"),d=s("7839"),m=s("d012"),y=s("1be4"),w=s("cc12"),_=s("f772"),M=">",k="<",R="prototype",N="script",j=_("IE_PROTO"),J=function(){},te=function(I){return k+N+M+I+k+"/"+N+M},ae=function(I){I.write(te("")),I.close();var K=I.parentWindow.Object;return I=null,K},le=function(){var I=w("iframe"),K="java"+N+":",$;return I.style.display="none",y.appendChild(I),I.src=String(K),$=I.contentWindow.document,$.open(),$.write(te("document.F=Object")),$.close(),$.F},xe,G=function(){try{xe=document.domain&&new ActiveXObject("htmlfile")}catch{}G=xe?ae(xe):le();for(var I=d.length;I--;)delete G[R][d[I]];return G()};m[j]=!0,i.exports=Object.create||function(K,$){var O;return K!==null?(J[R]=u(K),O=new J,J[R]=null,O[j]=K):O=G(),$===void 0?O:f(O,$)}},"7dd0":function(i,o,s){var u=s("23e7"),f=s("9ed3"),d=s("e163"),m=s("d2bb"),y=s("d44e"),w=s("9112"),_=s("6eeb"),M=s("b622"),k=s("c430"),R=s("3f8c"),N=s("ae93"),j=N.IteratorPrototype,J=N.BUGGY_SAFARI_ITERATORS,te=M("iterator"),ae="keys",le="values",xe="entries",G=function(){return this};i.exports=function(I,K,$,O,z,V,W){f($,K,O);var q=function(ye){if(ye===z&&Re)return Re;if(!J&&ye in me)return me[ye];switch(ye){case ae:return function(){return new $(this,ye)};case le:return function(){return new $(this,ye)};case xe:return function(){return new $(this,ye)}}return function(){return new $(this)}},X=K+" Iterator",Y=!1,me=I.prototype,Se=me[te]||me["@@iterator"]||z&&me[z],Re=!J&&Se||q(z),T=K=="Array"&&me.entries||Se,ne,fe,ce;if(T&&(ne=d(T.call(new I)),j!==Object.prototype&&ne.next&&(!k&&d(ne)!==j&&(m?m(ne,j):typeof ne[te]!="function"&&w(ne,te,G)),y(ne,X,!0,!0),k&&(R[X]=G))),z==le&&Se&&Se.name!==le&&(Y=!0,Re=function(){return Se.call(this)}),(!k||W)&&me[te]!==Re&&w(me,te,Re),R[K]=Re,z)if(fe={values:q(le),keys:V?Re:q(ae),entries:q(xe)},W)for(ce in fe)(J||Y||!(ce in me))&&_(me,ce,fe[ce]);else u({target:K,proto:!0,forced:J||Y},fe);return fe}},"7f9a":function(i,o,s){var u=s("da84"),f=s("8925"),d=u.WeakMap;i.exports=typeof d=="function"&&/native code/.test(f(d))},"825a":function(i,o,s){var u=s("861d");i.exports=function(f){if(!u(f))throw TypeError(String(f)+" is not an object");return f}},"83ab":function(i,o,s){var u=s("d039");i.exports=!u(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(i,o,s){var u=s("c04e"),f=s("9bf2"),d=s("5c6c");i.exports=function(m,y,w){var _=u(y);_ in m?f.f(m,_,d(0,w)):m[_]=w}},"861d":function(i,o){i.exports=function(s){return typeof s=="object"?s!==null:typeof s=="function"}},8875:function(i,o,s){var u,f,d;(function(m,y){f=[],u=y,d=typeof u=="function"?u.apply(o,f):u,d!==void 0&&(i.exports=d)})(typeof self<"u"?self:this,function(){function m(){var y=Object.getOwnPropertyDescriptor(document,"currentScript");if(!y&&"currentScript"in document&&document.currentScript||y&&y.get!==m&&document.currentScript)return document.currentScript;try{throw new Error}catch(xe){var w=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,_=/@([^@]*):(\d+):(\d+)\s*$/ig,M=w.exec(xe.stack)||_.exec(xe.stack),k=M&&M[1]||!1,R=M&&M[2]||!1,N=document.location.href.replace(document.location.hash,""),j,J,te,ae=document.getElementsByTagName("script");k===N&&(j=document.documentElement.outerHTML,J=new RegExp("(?:[^\\n]+?\\n){0,"+(R-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),te=j.replace(J,"$1").trim());for(var le=0;le<ae.length;le++)if(ae[le].readyState==="interactive"||ae[le].src===k||k===N&&ae[le].innerHTML&&ae[le].innerHTML.trim()===te)return ae[le];return null}}return m})},8925:function(i,o,s){var u=s("c6cd"),f=Function.toString;typeof u.inspectSource!="function"&&(u.inspectSource=function(d){return f.call(d)}),i.exports=u.inspectSource},"8aa5":function(i,o,s){var u=s("6547").charAt;i.exports=function(f,d,m){return d+(m?u(f,d).length:1)}},"8bbf":function(i,o){i.exports=n},"90e3":function(i,o){var s=0,u=Math.random();i.exports=function(f){return"Symbol("+String(f===void 0?"":f)+")_"+(++s+u).toString(36)}},9112:function(i,o,s){var u=s("83ab"),f=s("9bf2"),d=s("5c6c");i.exports=u?function(m,y,w){return f.f(m,y,d(1,w))}:function(m,y,w){return m[y]=w,m}},9263:function(i,o,s){var u=s("ad6d"),f=s("9f7f"),d=RegExp.prototype.exec,m=String.prototype.replace,y=d,w=function(){var R=/a/,N=/b*/g;return d.call(R,"a"),d.call(N,"a"),R.lastIndex!==0||N.lastIndex!==0}(),_=f.UNSUPPORTED_Y||f.BROKEN_CARET,M=/()??/.exec("")[1]!==void 0,k=w||M||_;k&&(y=function(N){var j=this,J,te,ae,le,xe=_&&j.sticky,G=u.call(j),I=j.source,K=0,$=N;return xe&&(G=G.replace("y",""),G.indexOf("g")===-1&&(G+="g"),$=String(N).slice(j.lastIndex),j.lastIndex>0&&(!j.multiline||j.multiline&&N[j.lastIndex-1]!==`
`)&&(I="(?: "+I+")",$=" "+$,K++),te=new RegExp("^(?:"+I+")",G)),M&&(te=new RegExp("^"+I+"$(?!\\s)",G)),w&&(J=j.lastIndex),ae=d.call(xe?te:j,$),xe?ae?(ae.input=ae.input.slice(K),ae[0]=ae[0].slice(K),ae.index=j.lastIndex,j.lastIndex+=ae[0].length):j.lastIndex=0:w&&ae&&(j.lastIndex=j.global?ae.index+ae[0].length:J),M&&ae&&ae.length>1&&m.call(ae[0],te,function(){for(le=1;le<arguments.length-2;le++)arguments[le]===void 0&&(ae[le]=void 0)}),ae}),i.exports=y},"94ca":function(i,o,s){var u=s("d039"),f=/#|\.prototype\./,d=function(M,k){var R=y[m(M)];return R==_?!0:R==w?!1:typeof k=="function"?u(k):!!k},m=d.normalize=function(M){return String(M).replace(f,".").toLowerCase()},y=d.data={},w=d.NATIVE="N",_=d.POLYFILL="P";i.exports=d},"99af":function(i,o,s){var u=s("23e7"),f=s("d039"),d=s("e8b5"),m=s("861d"),y=s("7b0b"),w=s("50c4"),_=s("8418"),M=s("65f0"),k=s("1dde"),R=s("b622"),N=s("2d00"),j=R("isConcatSpreadable"),J=9007199254740991,te="Maximum allowed index exceeded",ae=N>=51||!f(function(){var I=[];return I[j]=!1,I.concat()[0]!==I}),le=k("concat"),xe=function(I){if(!m(I))return!1;var K=I[j];return K!==void 0?!!K:d(I)},G=!ae||!le;u({target:"Array",proto:!0,forced:G},{concat:function(K){var $=y(this),O=M($,0),z=0,V,W,q,X,Y;for(V=-1,q=arguments.length;V<q;V++)if(Y=V===-1?$:arguments[V],xe(Y)){if(X=w(Y.length),z+X>J)throw TypeError(te);for(W=0;W<X;W++,z++)W in Y&&_(O,z,Y[W])}else{if(z>=J)throw TypeError(te);_(O,z++,Y)}return O.length=z,O}})},"9bdd":function(i,o,s){var u=s("825a");i.exports=function(f,d,m,y){try{return y?d(u(m)[0],m[1]):d(m)}catch(_){var w=f.return;throw w!==void 0&&u(w.call(f)),_}}},"9bf2":function(i,o,s){var u=s("83ab"),f=s("0cfb"),d=s("825a"),m=s("c04e"),y=Object.defineProperty;o.f=u?y:function(_,M,k){if(d(_),M=m(M,!0),d(k),f)try{return y(_,M,k)}catch{}if("get"in k||"set"in k)throw TypeError("Accessors not supported");return"value"in k&&(_[M]=k.value),_}},"9ed3":function(i,o,s){var u=s("ae93").IteratorPrototype,f=s("7c73"),d=s("5c6c"),m=s("d44e"),y=s("3f8c"),w=function(){return this};i.exports=function(_,M,k){var R=M+" Iterator";return _.prototype=f(u,{next:d(1,k)}),m(_,R,!1,!0),y[R]=w,_}},"9f7f":function(i,o,s){var u=s("d039");function f(d,m){return RegExp(d,m)}o.UNSUPPORTED_Y=u(function(){var d=f("a","y");return d.lastIndex=2,d.exec("abcd")!=null}),o.BROKEN_CARET=u(function(){var d=f("^r","gy");return d.lastIndex=2,d.exec("str")!=null})},a2bf:function(i,o,s){var u=s("e8b5"),f=s("50c4"),d=s("0366"),m=function(y,w,_,M,k,R,N,j){for(var J=k,te=0,ae=N?d(N,j,3):!1,le;te<M;){if(te in _){if(le=ae?ae(_[te],te,w):_[te],R>0&&u(le))J=m(y,w,le,f(le.length),J,R-1)-1;else{if(J>=9007199254740991)throw TypeError("Exceed the acceptable array length");y[J]=le}J++}te++}return J};i.exports=m},a352:function(i,o){i.exports=r},a434:function(i,o,s){var u=s("23e7"),f=s("23cb"),d=s("a691"),m=s("50c4"),y=s("7b0b"),w=s("65f0"),_=s("8418"),M=s("1dde"),k=s("ae40"),R=M("splice"),N=k("splice",{ACCESSORS:!0,0:0,1:2}),j=Math.max,J=Math.min,te=9007199254740991,ae="Maximum allowed length exceeded";u({target:"Array",proto:!0,forced:!R||!N},{splice:function(xe,G){var I=y(this),K=m(I.length),$=f(xe,K),O=arguments.length,z,V,W,q,X,Y;if(O===0?z=V=0:O===1?(z=0,V=K-$):(z=O-2,V=J(j(d(G),0),K-$)),K+z-V>te)throw TypeError(ae);for(W=w(I,V),q=0;q<V;q++)X=$+q,X in I&&_(W,q,I[X]);if(W.length=V,z<V){for(q=$;q<K-V;q++)X=q+V,Y=q+z,X in I?I[Y]=I[X]:delete I[Y];for(q=K;q>K-V+z;q--)delete I[q-1]}else if(z>V)for(q=K-V;q>$;q--)X=q+V-1,Y=q+z-1,X in I?I[Y]=I[X]:delete I[Y];for(q=0;q<z;q++)I[q+$]=arguments[q+2];return I.length=K-V+z,W}})},a4d3:function(i,o,s){var u=s("23e7"),f=s("da84"),d=s("d066"),m=s("c430"),y=s("83ab"),w=s("4930"),_=s("fdbf"),M=s("d039"),k=s("5135"),R=s("e8b5"),N=s("861d"),j=s("825a"),J=s("7b0b"),te=s("fc6a"),ae=s("c04e"),le=s("5c6c"),xe=s("7c73"),G=s("df75"),I=s("241c"),K=s("057f"),$=s("7418"),O=s("06cf"),z=s("9bf2"),V=s("d1e7"),W=s("9112"),q=s("6eeb"),X=s("5692"),Y=s("f772"),me=s("d012"),Se=s("90e3"),Re=s("b622"),T=s("e538"),ne=s("746f"),fe=s("d44e"),ce=s("69f3"),ye=s("b727").forEach,oe=Y("hidden"),B="Symbol",ue="prototype",De=Re("toPrimitive"),Me=ce.set,We=ce.getterFor(B),Z=Object[ue],de=f.Symbol,ve=d("JSON","stringify"),pe=O.f,$e=z.f,Qe=K.f,Ke=V.f,He=X("symbols"),Xe=X("op-symbols"),st=X("string-to-symbol-registry"),kt=X("symbol-to-string-registry"),Ct=X("wks"),Ut=f.QObject,Gt=!Ut||!Ut[ue]||!Ut[ue].findChild,fn=y&&M(function(){return xe($e({},"a",{get:function(){return $e(this,"a",{value:7}).a}})).a!=7})?function(xn,En,Cn){var cr=pe(Z,En);cr&&delete Z[En],$e(xn,En,Cn),cr&&xn!==Z&&$e(Z,En,cr)}:$e,pn=function(xn,En){var Cn=He[xn]=xe(de[ue]);return Me(Cn,{type:B,tag:xn,description:En}),y||(Cn.description=En),Cn},et=_?function(xn){return typeof xn=="symbol"}:function(xn){return Object(xn)instanceof de},it=function(En,Cn,cr){En===Z&&it(Xe,Cn,cr),j(En);var yr=ae(Cn,!0);return j(cr),k(He,yr)?(cr.enumerable?(k(En,oe)&&En[oe][yr]&&(En[oe][yr]=!1),cr=xe(cr,{enumerable:le(0,!1)})):(k(En,oe)||$e(En,oe,le(1,{})),En[oe][yr]=!0),fn(En,yr,cr)):$e(En,yr,cr)},nt=function(En,Cn){j(En);var cr=te(Cn),yr=G(cr).concat(An(cr));return ye(yr,function(mt){(!y||Qt.call(cr,mt))&&it(En,mt,cr[mt])}),En},Vt=function(En,Cn){return Cn===void 0?xe(En):nt(xe(En),Cn)},Qt=function(En){var Cn=ae(En,!0),cr=Ke.call(this,Cn);return this===Z&&k(He,Cn)&&!k(Xe,Cn)?!1:cr||!k(this,Cn)||!k(He,Cn)||k(this,oe)&&this[oe][Cn]?cr:!0},Nn=function(En,Cn){var cr=te(En),yr=ae(Cn,!0);if(!(cr===Z&&k(He,yr)&&!k(Xe,yr))){var mt=pe(cr,yr);return mt&&k(He,yr)&&!(k(cr,oe)&&cr[oe][yr])&&(mt.enumerable=!0),mt}},wn=function(En){var Cn=Qe(te(En)),cr=[];return ye(Cn,function(yr){!k(He,yr)&&!k(me,yr)&&cr.push(yr)}),cr},An=function(En){var Cn=En===Z,cr=Qe(Cn?Xe:te(En)),yr=[];return ye(cr,function(mt){k(He,mt)&&(!Cn||k(Z,mt))&&yr.push(He[mt])}),yr};if(w||(de=function(){if(this instanceof de)throw TypeError("Symbol is not a constructor");var En=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),Cn=Se(En),cr=function(yr){this===Z&&cr.call(Xe,yr),k(this,oe)&&k(this[oe],Cn)&&(this[oe][Cn]=!1),fn(this,Cn,le(1,yr))};return y&&Gt&&fn(Z,Cn,{configurable:!0,set:cr}),pn(Cn,En)},q(de[ue],"toString",function(){return We(this).tag}),q(de,"withoutSetter",function(xn){return pn(Se(xn),xn)}),V.f=Qt,z.f=it,O.f=Nn,I.f=K.f=wn,$.f=An,T.f=function(xn){return pn(Re(xn),xn)},y&&($e(de[ue],"description",{configurable:!0,get:function(){return We(this).description}}),m||q(Z,"propertyIsEnumerable",Qt,{unsafe:!0}))),u({global:!0,wrap:!0,forced:!w,sham:!w},{Symbol:de}),ye(G(Ct),function(xn){ne(xn)}),u({target:B,stat:!0,forced:!w},{for:function(xn){var En=String(xn);if(k(st,En))return st[En];var Cn=de(En);return st[En]=Cn,kt[Cn]=En,Cn},keyFor:function(En){if(!et(En))throw TypeError(En+" is not a symbol");if(k(kt,En))return kt[En]},useSetter:function(){Gt=!0},useSimple:function(){Gt=!1}}),u({target:"Object",stat:!0,forced:!w,sham:!y},{create:Vt,defineProperty:it,defineProperties:nt,getOwnPropertyDescriptor:Nn}),u({target:"Object",stat:!0,forced:!w},{getOwnPropertyNames:wn,getOwnPropertySymbols:An}),u({target:"Object",stat:!0,forced:M(function(){$.f(1)})},{getOwnPropertySymbols:function(En){return $.f(J(En))}}),ve){var or=!w||M(function(){var xn=de();return ve([xn])!="[null]"||ve({a:xn})!="{}"||ve(Object(xn))!="{}"});u({target:"JSON",stat:!0,forced:or},{stringify:function(En,Cn,cr){for(var yr=[En],mt=1,qe;arguments.length>mt;)yr.push(arguments[mt++]);if(qe=Cn,!(!N(Cn)&&En===void 0||et(En)))return R(Cn)||(Cn=function(Ft,kn){if(typeof qe=="function"&&(kn=qe.call(this,Ft,kn)),!et(kn))return kn}),yr[1]=Cn,ve.apply(null,yr)}})}de[ue][De]||W(de[ue],De,de[ue].valueOf),fe(de,B),me[oe]=!0},a630:function(i,o,s){var u=s("23e7"),f=s("4df4"),d=s("1c7e"),m=!d(function(y){Array.from(y)});u({target:"Array",stat:!0,forced:m},{from:f})},a640:function(i,o,s){var u=s("d039");i.exports=function(f,d){var m=[][f];return!!m&&u(function(){m.call(null,d||function(){throw 1},1)})}},a691:function(i,o){var s=Math.ceil,u=Math.floor;i.exports=function(f){return isNaN(f=+f)?0:(f>0?u:s)(f)}},ab13:function(i,o,s){var u=s("b622"),f=u("match");i.exports=function(d){var m=/./;try{"/./"[d](m)}catch{try{return m[f]=!1,"/./"[d](m)}catch{}}return!1}},ac1f:function(i,o,s){var u=s("23e7"),f=s("9263");u({target:"RegExp",proto:!0,forced:/./.exec!==f},{exec:f})},ad6d:function(i,o,s){var u=s("825a");i.exports=function(){var f=u(this),d="";return f.global&&(d+="g"),f.ignoreCase&&(d+="i"),f.multiline&&(d+="m"),f.dotAll&&(d+="s"),f.unicode&&(d+="u"),f.sticky&&(d+="y"),d}},ae40:function(i,o,s){var u=s("83ab"),f=s("d039"),d=s("5135"),m=Object.defineProperty,y={},w=function(_){throw _};i.exports=function(_,M){if(d(y,_))return y[_];M||(M={});var k=[][_],R=d(M,"ACCESSORS")?M.ACCESSORS:!1,N=d(M,0)?M[0]:w,j=d(M,1)?M[1]:void 0;return y[_]=!!k&&!f(function(){if(R&&!u)return!0;var J={length:-1};R?m(J,1,{enumerable:!0,get:w}):J[1]=1,k.call(J,N,j)})}},ae93:function(i,o,s){var u=s("e163"),f=s("9112"),d=s("5135"),m=s("b622"),y=s("c430"),w=m("iterator"),_=!1,M=function(){return this},k,R,N;[].keys&&(N=[].keys(),"next"in N?(R=u(u(N)),R!==Object.prototype&&(k=R)):_=!0),k==null&&(k={}),!y&&!d(k,w)&&f(k,w,M),i.exports={IteratorPrototype:k,BUGGY_SAFARI_ITERATORS:_}},b041:function(i,o,s){var u=s("00ee"),f=s("f5df");i.exports=u?{}.toString:function(){return"[object "+f(this)+"]"}},b0c0:function(i,o,s){var u=s("83ab"),f=s("9bf2").f,d=Function.prototype,m=d.toString,y=/^\s*function ([^ (]*)/,w="name";u&&!(w in d)&&f(d,w,{configurable:!0,get:function(){try{return m.call(this).match(y)[1]}catch{return""}}})},b622:function(i,o,s){var u=s("da84"),f=s("5692"),d=s("5135"),m=s("90e3"),y=s("4930"),w=s("fdbf"),_=f("wks"),M=u.Symbol,k=w?M:M&&M.withoutSetter||m;i.exports=function(R){return d(_,R)||(y&&d(M,R)?_[R]=M[R]:_[R]=k("Symbol."+R)),_[R]}},b64b:function(i,o,s){var u=s("23e7"),f=s("7b0b"),d=s("df75"),m=s("d039"),y=m(function(){d(1)});u({target:"Object",stat:!0,forced:y},{keys:function(_){return d(f(_))}})},b727:function(i,o,s){var u=s("0366"),f=s("44ad"),d=s("7b0b"),m=s("50c4"),y=s("65f0"),w=[].push,_=function(M){var k=M==1,R=M==2,N=M==3,j=M==4,J=M==6,te=M==5||J;return function(ae,le,xe,G){for(var I=d(ae),K=f(I),$=u(le,xe,3),O=m(K.length),z=0,V=G||y,W=k?V(ae,O):R?V(ae,0):void 0,q,X;O>z;z++)if((te||z in K)&&(q=K[z],X=$(q,z,I),M)){if(k)W[z]=X;else if(X)switch(M){case 3:return!0;case 5:return q;case 6:return z;case 2:w.call(W,q)}else if(j)return!1}return J?-1:N||j?j:W}};i.exports={forEach:_(0),map:_(1),filter:_(2),some:_(3),every:_(4),find:_(5),findIndex:_(6)}},c04e:function(i,o,s){var u=s("861d");i.exports=function(f,d){if(!u(f))return f;var m,y;if(d&&typeof(m=f.toString)=="function"&&!u(y=m.call(f))||typeof(m=f.valueOf)=="function"&&!u(y=m.call(f))||!d&&typeof(m=f.toString)=="function"&&!u(y=m.call(f)))return y;throw TypeError("Can't convert object to primitive value")}},c430:function(i,o){i.exports=!1},c6b6:function(i,o){var s={}.toString;i.exports=function(u){return s.call(u).slice(8,-1)}},c6cd:function(i,o,s){var u=s("da84"),f=s("ce4e"),d="__core-js_shared__",m=u[d]||f(d,{});i.exports=m},c740:function(i,o,s){var u=s("23e7"),f=s("b727").findIndex,d=s("44d2"),m=s("ae40"),y="findIndex",w=!0,_=m(y);y in[]&&Array(1)[y](function(){w=!1}),u({target:"Array",proto:!0,forced:w||!_},{findIndex:function(k){return f(this,k,arguments.length>1?arguments[1]:void 0)}}),d(y)},c8ba:function(i,o){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch{typeof window=="object"&&(s=window)}i.exports=s},c975:function(i,o,s){var u=s("23e7"),f=s("4d64").indexOf,d=s("a640"),m=s("ae40"),y=[].indexOf,w=!!y&&1/[1].indexOf(1,-0)<0,_=d("indexOf"),M=m("indexOf",{ACCESSORS:!0,1:0});u({target:"Array",proto:!0,forced:w||!_||!M},{indexOf:function(R){return w?y.apply(this,arguments)||0:f(this,R,arguments.length>1?arguments[1]:void 0)}})},ca84:function(i,o,s){var u=s("5135"),f=s("fc6a"),d=s("4d64").indexOf,m=s("d012");i.exports=function(y,w){var _=f(y),M=0,k=[],R;for(R in _)!u(m,R)&&u(_,R)&&k.push(R);for(;w.length>M;)u(_,R=w[M++])&&(~d(k,R)||k.push(R));return k}},caad:function(i,o,s){var u=s("23e7"),f=s("4d64").includes,d=s("44d2"),m=s("ae40"),y=m("indexOf",{ACCESSORS:!0,1:0});u({target:"Array",proto:!0,forced:!y},{includes:function(_){return f(this,_,arguments.length>1?arguments[1]:void 0)}}),d("includes")},cc12:function(i,o,s){var u=s("da84"),f=s("861d"),d=u.document,m=f(d)&&f(d.createElement);i.exports=function(y){return m?d.createElement(y):{}}},ce4e:function(i,o,s){var u=s("da84"),f=s("9112");i.exports=function(d,m){try{f(u,d,m)}catch{u[d]=m}return m}},d012:function(i,o){i.exports={}},d039:function(i,o){i.exports=function(s){try{return!!s()}catch{return!0}}},d066:function(i,o,s){var u=s("428f"),f=s("da84"),d=function(m){return typeof m=="function"?m:void 0};i.exports=function(m,y){return arguments.length<2?d(u[m])||d(f[m]):u[m]&&u[m][y]||f[m]&&f[m][y]}},d1e7:function(i,o,s){var u={}.propertyIsEnumerable,f=Object.getOwnPropertyDescriptor,d=f&&!u.call({1:2},1);o.f=d?function(y){var w=f(this,y);return!!w&&w.enumerable}:u},d28b:function(i,o,s){var u=s("746f");u("iterator")},d2bb:function(i,o,s){var u=s("825a"),f=s("3bbe");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var d=!1,m={},y;try{y=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,y.call(m,[]),d=m instanceof Array}catch{}return function(_,M){return u(_),f(M),d?y.call(_,M):_.__proto__=M,_}}():void 0)},d3b7:function(i,o,s){var u=s("00ee"),f=s("6eeb"),d=s("b041");u||f(Object.prototype,"toString",d,{unsafe:!0})},d44e:function(i,o,s){var u=s("9bf2").f,f=s("5135"),d=s("b622"),m=d("toStringTag");i.exports=function(y,w,_){y&&!f(y=_?y:y.prototype,m)&&u(y,m,{configurable:!0,value:w})}},d58f:function(i,o,s){var u=s("1c0b"),f=s("7b0b"),d=s("44ad"),m=s("50c4"),y=function(w){return function(_,M,k,R){u(M);var N=f(_),j=d(N),J=m(N.length),te=w?J-1:0,ae=w?-1:1;if(k<2)for(;;){if(te in j){R=j[te],te+=ae;break}if(te+=ae,w?te<0:J<=te)throw TypeError("Reduce of empty array with no initial value")}for(;w?te>=0:J>te;te+=ae)te in j&&(R=M(R,j[te],te,N));return R}};i.exports={left:y(!1),right:y(!0)}},d784:function(i,o,s){s("ac1f");var u=s("6eeb"),f=s("d039"),d=s("b622"),m=s("9263"),y=s("9112"),w=d("species"),_=!f(function(){var j=/./;return j.exec=function(){var J=[];return J.groups={a:"7"},J},"".replace(j,"$<a>")!=="7"}),M=function(){return"a".replace(/./,"$0")==="$0"}(),k=d("replace"),R=function(){return/./[k]?/./[k]("a","$0")==="":!1}(),N=!f(function(){var j=/(?:)/,J=j.exec;j.exec=function(){return J.apply(this,arguments)};var te="ab".split(j);return te.length!==2||te[0]!=="a"||te[1]!=="b"});i.exports=function(j,J,te,ae){var le=d(j),xe=!f(function(){var z={};return z[le]=function(){return 7},""[j](z)!=7}),G=xe&&!f(function(){var z=!1,V=/a/;return j==="split"&&(V={},V.constructor={},V.constructor[w]=function(){return V},V.flags="",V[le]=/./[le]),V.exec=function(){return z=!0,null},V[le](""),!z});if(!xe||!G||j==="replace"&&!(_&&M&&!R)||j==="split"&&!N){var I=/./[le],K=te(le,""[j],function(z,V,W,q,X){return V.exec===m?xe&&!X?{done:!0,value:I.call(V,W,q)}:{done:!0,value:z.call(W,V,q)}:{done:!1}},{REPLACE_KEEPS_$0:M,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:R}),$=K[0],O=K[1];u(String.prototype,j,$),u(RegExp.prototype,le,J==2?function(z,V){return O.call(z,this,V)}:function(z){return O.call(z,this)})}ae&&y(RegExp.prototype[le],"sham",!0)}},d81d:function(i,o,s){var u=s("23e7"),f=s("b727").map,d=s("1dde"),m=s("ae40"),y=d("map"),w=m("map");u({target:"Array",proto:!0,forced:!y||!w},{map:function(M){return f(this,M,arguments.length>1?arguments[1]:void 0)}})},da84:function(i,o,s){(function(u){var f=function(d){return d&&d.Math==Math&&d};i.exports=f(typeof globalThis=="object"&&globalThis)||f(typeof window=="object"&&window)||f(typeof self=="object"&&self)||f(typeof u=="object"&&u)||Function("return this")()}).call(this,s("c8ba"))},dbb4:function(i,o,s){var u=s("23e7"),f=s("83ab"),d=s("56ef"),m=s("fc6a"),y=s("06cf"),w=s("8418");u({target:"Object",stat:!0,sham:!f},{getOwnPropertyDescriptors:function(M){for(var k=m(M),R=y.f,N=d(k),j={},J=0,te,ae;N.length>J;)ae=R(k,te=N[J++]),ae!==void 0&&w(j,te,ae);return j}})},dbf1:function(i,o,s){(function(u){s.d(o,"a",function(){return d});function f(){return typeof window<"u"?window.console:u.console}var d=f()}).call(this,s("c8ba"))},ddb0:function(i,o,s){var u=s("da84"),f=s("fdbc"),d=s("e260"),m=s("9112"),y=s("b622"),w=y("iterator"),_=y("toStringTag"),M=d.values;for(var k in f){var R=u[k],N=R&&R.prototype;if(N){if(N[w]!==M)try{m(N,w,M)}catch{N[w]=M}if(N[_]||m(N,_,k),f[k]){for(var j in d)if(N[j]!==d[j])try{m(N,j,d[j])}catch{N[j]=d[j]}}}}},df75:function(i,o,s){var u=s("ca84"),f=s("7839");i.exports=Object.keys||function(m){return u(m,f)}},e01a:function(i,o,s){var u=s("23e7"),f=s("83ab"),d=s("da84"),m=s("5135"),y=s("861d"),w=s("9bf2").f,_=s("e893"),M=d.Symbol;if(f&&typeof M=="function"&&(!("description"in M.prototype)||M().description!==void 0)){var k={},R=function(){var le=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),xe=this instanceof R?new M(le):le===void 0?M():M(le);return le===""&&(k[xe]=!0),xe};_(R,M);var N=R.prototype=M.prototype;N.constructor=R;var j=N.toString,J=String(M("test"))=="Symbol(test)",te=/^Symbol\((.*)\)[^)]+$/;w(N,"description",{configurable:!0,get:function(){var le=y(this)?this.valueOf():this,xe=j.call(le);if(m(k,le))return"";var G=J?xe.slice(7,-1):xe.replace(te,"$1");return G===""?void 0:G}}),u({global:!0,forced:!0},{Symbol:R})}},e163:function(i,o,s){var u=s("5135"),f=s("7b0b"),d=s("f772"),m=s("e177"),y=d("IE_PROTO"),w=Object.prototype;i.exports=m?Object.getPrototypeOf:function(_){return _=f(_),u(_,y)?_[y]:typeof _.constructor=="function"&&_ instanceof _.constructor?_.constructor.prototype:_ instanceof Object?w:null}},e177:function(i,o,s){var u=s("d039");i.exports=!u(function(){function f(){}return f.prototype.constructor=null,Object.getPrototypeOf(new f)!==f.prototype})},e260:function(i,o,s){var u=s("fc6a"),f=s("44d2"),d=s("3f8c"),m=s("69f3"),y=s("7dd0"),w="Array Iterator",_=m.set,M=m.getterFor(w);i.exports=y(Array,"Array",function(k,R){_(this,{type:w,target:u(k),index:0,kind:R})},function(){var k=M(this),R=k.target,N=k.kind,j=k.index++;return!R||j>=R.length?(k.target=void 0,{value:void 0,done:!0}):N=="keys"?{value:j,done:!1}:N=="values"?{value:R[j],done:!1}:{value:[j,R[j]],done:!1}},"values"),d.Arguments=d.Array,f("keys"),f("values"),f("entries")},e439:function(i,o,s){var u=s("23e7"),f=s("d039"),d=s("fc6a"),m=s("06cf").f,y=s("83ab"),w=f(function(){m(1)}),_=!y||w;u({target:"Object",stat:!0,forced:_,sham:!y},{getOwnPropertyDescriptor:function(k,R){return m(d(k),R)}})},e538:function(i,o,s){var u=s("b622");o.f=u},e893:function(i,o,s){var u=s("5135"),f=s("56ef"),d=s("06cf"),m=s("9bf2");i.exports=function(y,w){for(var _=f(w),M=m.f,k=d.f,R=0;R<_.length;R++){var N=_[R];u(y,N)||M(y,N,k(w,N))}}},e8b5:function(i,o,s){var u=s("c6b6");i.exports=Array.isArray||function(d){return u(d)=="Array"}},e95a:function(i,o,s){var u=s("b622"),f=s("3f8c"),d=u("iterator"),m=Array.prototype;i.exports=function(y){return y!==void 0&&(f.Array===y||m[d]===y)}},f5df:function(i,o,s){var u=s("00ee"),f=s("c6b6"),d=s("b622"),m=d("toStringTag"),y=f(function(){return arguments}())=="Arguments",w=function(_,M){try{return _[M]}catch{}};i.exports=u?f:function(_){var M,k,R;return _===void 0?"Undefined":_===null?"Null":typeof(k=w(M=Object(_),m))=="string"?k:y?f(M):(R=f(M))=="Object"&&typeof M.callee=="function"?"Arguments":R}},f772:function(i,o,s){var u=s("5692"),f=s("90e3"),d=u("keys");i.exports=function(m){return d[m]||(d[m]=f(m))}},fb15:function(i,o,s){if(s.r(o),typeof window<"u"){var u=window.document.currentScript;{var f=s("8875");u=f(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:f})}var d=u&&u.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);d&&(s.p=d[1])}s("99af"),s("4de4"),s("4160"),s("c975"),s("d81d"),s("a434"),s("159b"),s("a4d3"),s("e439"),s("dbb4"),s("b64b");function m(et,it,nt){return it in et?Object.defineProperty(et,it,{value:nt,enumerable:!0,configurable:!0,writable:!0}):et[it]=nt,et}function y(et,it){var nt=Object.keys(et);if(Object.getOwnPropertySymbols){var Vt=Object.getOwnPropertySymbols(et);it&&(Vt=Vt.filter(function(Qt){return Object.getOwnPropertyDescriptor(et,Qt).enumerable})),nt.push.apply(nt,Vt)}return nt}function w(et){for(var it=1;it<arguments.length;it++){var nt=arguments[it]!=null?arguments[it]:{};it%2?y(Object(nt),!0).forEach(function(Vt){m(et,Vt,nt[Vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(nt)):y(Object(nt)).forEach(function(Vt){Object.defineProperty(et,Vt,Object.getOwnPropertyDescriptor(nt,Vt))})}return et}function _(et){if(Array.isArray(et))return et}s("e01a"),s("d28b"),s("e260"),s("d3b7"),s("3ca3"),s("ddb0");function M(et,it){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(et)))){var nt=[],Vt=!0,Qt=!1,Nn=void 0;try{for(var wn=et[Symbol.iterator](),An;!(Vt=(An=wn.next()).done)&&(nt.push(An.value),!(it&&nt.length===it));Vt=!0);}catch(or){Qt=!0,Nn=or}finally{try{!Vt&&wn.return!=null&&wn.return()}finally{if(Qt)throw Nn}}return nt}}s("a630"),s("fb6a"),s("b0c0"),s("25f0");function k(et,it){(it==null||it>et.length)&&(it=et.length);for(var nt=0,Vt=new Array(it);nt<it;nt++)Vt[nt]=et[nt];return Vt}function R(et,it){if(et){if(typeof et=="string")return k(et,it);var nt=Object.prototype.toString.call(et).slice(8,-1);if(nt==="Object"&&et.constructor&&(nt=et.constructor.name),nt==="Map"||nt==="Set")return Array.from(et);if(nt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nt))return k(et,it)}}function N(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j(et,it){return _(et)||M(et,it)||R(et,it)||N()}function J(et){if(Array.isArray(et))return k(et)}function te(et){if(typeof Symbol<"u"&&Symbol.iterator in Object(et))return Array.from(et)}function ae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function le(et){return J(et)||te(et)||R(et)||ae()}var xe=s("a352"),G=s.n(xe);function I(et){et.parentElement!==null&&et.parentElement.removeChild(et)}function K(et,it,nt){var Vt=nt===0?et.children[0]:et.children[nt-1].nextSibling;et.insertBefore(it,Vt)}var $=s("dbf1");s("13d5"),s("4fad"),s("ac1f"),s("5319");function O(et){var it=Object.create(null);return function(Vt){var Qt=it[Vt];return Qt||(it[Vt]=et(Vt))}}var z=/-(\w)/g,V=O(function(et){return et.replace(z,function(it,nt){return nt.toUpperCase()})});s("5db7"),s("73d9");var W=["Start","Add","Remove","Update","End"],q=["Choose","Unchoose","Sort","Filter","Clone"],X=["Move"],Y=[X,W,q].flatMap(function(et){return et}).map(function(et){return"on".concat(et)}),me={manage:X,manageAndEmit:W,emit:q};function Se(et){return Y.indexOf(et)!==-1}s("caad"),s("2ca0");var Re=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function T(et){return Re.includes(et)}function ne(et){return["transition-group","TransitionGroup"].includes(et)}function fe(et){return["id","class","role","style"].includes(et)||et.startsWith("data-")||et.startsWith("aria-")||et.startsWith("on")}function ce(et){return et.reduce(function(it,nt){var Vt=j(nt,2),Qt=Vt[0],Nn=Vt[1];return it[Qt]=Nn,it},{})}function ye(et){var it=et.$attrs,nt=et.componentData,Vt=nt===void 0?{}:nt,Qt=ce(Object.entries(it).filter(function(Nn){var wn=j(Nn,2),An=wn[0];return wn[1],fe(An)}));return w(w({},Qt),Vt)}function oe(et){var it=et.$attrs,nt=et.callBackBuilder,Vt=ce(B(it));Object.entries(nt).forEach(function(Nn){var wn=j(Nn,2),An=wn[0],or=wn[1];me[An].forEach(function(xn){Vt["on".concat(xn)]=or(xn)})});var Qt="[data-draggable]".concat(Vt.draggable||"");return w(w({},Vt),{},{draggable:Qt})}function B(et){return Object.entries(et).filter(function(it){var nt=j(it,2),Vt=nt[0];return nt[1],!fe(Vt)}).map(function(it){var nt=j(it,2),Vt=nt[0],Qt=nt[1];return[V(Vt),Qt]}).filter(function(it){var nt=j(it,2),Vt=nt[0];return nt[1],!Se(Vt)})}s("c740");function ue(et,it){if(!(et instanceof it))throw new TypeError("Cannot call a class as a function")}function De(et,it){for(var nt=0;nt<it.length;nt++){var Vt=it[nt];Vt.enumerable=Vt.enumerable||!1,Vt.configurable=!0,"value"in Vt&&(Vt.writable=!0),Object.defineProperty(et,Vt.key,Vt)}}function Me(et,it,nt){return it&&De(et.prototype,it),et}var We=function(it){var nt=it.el;return nt},Z=function(it,nt){return it.__draggable_context=nt},de=function(it){return it.__draggable_context},ve=function(){function et(it){var nt=it.nodes,Vt=nt.header,Qt=nt.default,Nn=nt.footer,wn=it.root,An=it.realList;ue(this,et),this.defaultNodes=Qt,this.children=[].concat(le(Vt),le(Qt),le(Nn)),this.externalComponent=wn.externalComponent,this.rootTransition=wn.transition,this.tag=wn.tag,this.realList=An}return Me(et,[{key:"render",value:function(nt,Vt){var Qt=this.tag,Nn=this.children,wn=this._isRootComponent,An=wn?{default:function(){return Nn}}:Nn;return nt(Qt,Vt,An)}},{key:"updated",value:function(){var nt=this.defaultNodes,Vt=this.realList;nt.forEach(function(Qt,Nn){Z(We(Qt),{element:Vt[Nn],index:Nn})})}},{key:"getUnderlyingVm",value:function(nt){return de(nt)}},{key:"getVmIndexFromDomIndex",value:function(nt,Vt){var Qt=this.defaultNodes,Nn=Qt.length,wn=Vt.children,An=wn.item(nt);if(An===null)return Nn;var or=de(An);if(or)return or.index;if(Nn===0)return 0;var xn=We(Qt[0]),En=le(wn).findIndex(function(Cn){return Cn===xn});return nt<En?0:Nn}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),et}(),pe=s("8bbf");function $e(et,it){var nt=et[it];return nt?nt():[]}function Qe(et){var it=et.$slots,nt=et.realList,Vt=et.getKey,Qt=nt||[],Nn=["header","footer"].map(function(Cn){return $e(it,Cn)}),wn=j(Nn,2),An=wn[0],or=wn[1],xn=it.item;if(!xn)throw new Error("draggable element must have an item slot");var En=Qt.flatMap(function(Cn,cr){return xn({element:Cn,index:cr}).map(function(yr){return yr.key=Vt(Cn),yr.props=w(w({},yr.props||{}),{},{"data-draggable":!0}),yr})});if(En.length!==Qt.length)throw new Error("Item slot must have only one child");return{header:An,footer:or,default:En}}function Ke(et){var it=ne(et),nt=!T(et)&&!it;return{transition:it,externalComponent:nt,tag:nt?Object(pe.resolveComponent)(et):it?pe.TransitionGroup:et}}function He(et){var it=et.$slots,nt=et.tag,Vt=et.realList,Qt=et.getKey,Nn=Qe({$slots:it,realList:Vt,getKey:Qt}),wn=Ke(nt);return new ve({nodes:Nn,root:wn,realList:Vt})}function Xe(et,it){var nt=this;Object(pe.nextTick)(function(){return nt.$emit(et.toLowerCase(),it)})}function st(et){var it=this;return function(nt,Vt){if(it.realList!==null)return it["onDrag".concat(et)](nt,Vt)}}function kt(et){var it=this,nt=st.call(this,et);return function(Vt,Qt){nt.call(it,Vt,Qt),Xe.call(it,et,Vt)}}var Ct=null,Ut={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(it){return it}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Gt=["update:modelValue","change"].concat(le([].concat(le(me.manageAndEmit),le(me.emit)).map(function(et){return et.toLowerCase()}))),fn=Object(pe.defineComponent)({name:"draggable",inheritAttrs:!1,props:Ut,emits:Gt,data:function(){return{error:!1}},render:function(){try{this.error=!1;var it=this.$slots,nt=this.$attrs,Vt=this.tag,Qt=this.componentData,Nn=this.realList,wn=this.getKey,An=He({$slots:it,tag:Vt,realList:Nn,getKey:wn});this.componentStructure=An;var or=ye({$attrs:nt,componentData:Qt});return An.render(pe.h,or)}catch(xn){return this.error=!0,Object(pe.h)("pre",{style:{color:"red"}},xn.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&$.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var it=this;if(!this.error){var nt=this.$attrs,Vt=this.$el,Qt=this.componentStructure;Qt.updated();var Nn=oe({$attrs:nt,callBackBuilder:{manageAndEmit:function(or){return kt.call(it,or)},emit:function(or){return Xe.bind(it,or)},manage:function(or){return st.call(it,or)}}}),wn=Vt.nodeType===1?Vt:Vt.parentElement;this._sortable=new G.a(wn,Nn),this.targetDomElement=wn,wn.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var it=this.list;return it||this.modelValue},getKey:function(){var it=this.itemKey;return typeof it=="function"?it:function(nt){return nt[it]}}},watch:{$attrs:{handler:function(it){var nt=this._sortable;nt&&B(it).forEach(function(Vt){var Qt=j(Vt,2),Nn=Qt[0],wn=Qt[1];nt.option(Nn,wn)})},deep:!0}},methods:{getUnderlyingVm:function(it){return this.componentStructure.getUnderlyingVm(it)||null},getUnderlyingPotencialDraggableComponent:function(it){return it.__draggable_component__},emitChanges:function(it){var nt=this;Object(pe.nextTick)(function(){return nt.$emit("change",it)})},alterList:function(it){if(this.list){it(this.list);return}var nt=le(this.modelValue);it(nt),this.$emit("update:modelValue",nt)},spliceList:function(){var it=arguments,nt=function(Qt){return Qt.splice.apply(Qt,le(it))};this.alterList(nt)},updatePosition:function(it,nt){var Vt=function(Nn){return Nn.splice(nt,0,Nn.splice(it,1)[0])};this.alterList(Vt)},getRelatedContextFromMoveEvent:function(it){var nt=it.to,Vt=it.related,Qt=this.getUnderlyingPotencialDraggableComponent(nt);if(!Qt)return{component:Qt};var Nn=Qt.realList,wn={list:Nn,component:Qt};if(nt!==Vt&&Nn){var An=Qt.getUnderlyingVm(Vt)||{};return w(w({},An),wn)}return wn},getVmIndexFromDomIndex:function(it){return this.componentStructure.getVmIndexFromDomIndex(it,this.targetDomElement)},onDragStart:function(it){this.context=this.getUnderlyingVm(it.item),it.item._underlying_vm_=this.clone(this.context.element),Ct=it.item},onDragAdd:function(it){var nt=it.item._underlying_vm_;if(nt!==void 0){I(it.item);var Vt=this.getVmIndexFromDomIndex(it.newIndex);this.spliceList(Vt,0,nt);var Qt={element:nt,newIndex:Vt};this.emitChanges({added:Qt})}},onDragRemove:function(it){if(K(this.$el,it.item,it.oldIndex),it.pullMode==="clone"){I(it.clone);return}var nt=this.context,Vt=nt.index,Qt=nt.element;this.spliceList(Vt,1);var Nn={element:Qt,oldIndex:Vt};this.emitChanges({removed:Nn})},onDragUpdate:function(it){I(it.item),K(it.from,it.item,it.oldIndex);var nt=this.context.index,Vt=this.getVmIndexFromDomIndex(it.newIndex);this.updatePosition(nt,Vt);var Qt={element:this.context.element,oldIndex:nt,newIndex:Vt};this.emitChanges({moved:Qt})},computeFutureIndex:function(it,nt){if(!it.element)return 0;var Vt=le(nt.to.children).filter(function(An){return An.style.display!=="none"}),Qt=Vt.indexOf(nt.related),Nn=it.component.getVmIndexFromDomIndex(Qt),wn=Vt.indexOf(Ct)!==-1;return wn||!nt.willInsertAfter?Nn:Nn+1},onDragMove:function(it,nt){var Vt=this.move,Qt=this.realList;if(!Vt||!Qt)return!0;var Nn=this.getRelatedContextFromMoveEvent(it),wn=this.computeFutureIndex(Nn,it),An=w(w({},this.context),{},{futureIndex:wn}),or=w(w({},it),{},{relatedContext:Nn,draggedContext:An});return Vt(or,nt)},onDragEnd:function(){Ct=null}}}),pn=fn;o.default=pn},fb6a:function(i,o,s){var u=s("23e7"),f=s("861d"),d=s("e8b5"),m=s("23cb"),y=s("50c4"),w=s("fc6a"),_=s("8418"),M=s("b622"),k=s("1dde"),R=s("ae40"),N=k("slice"),j=R("slice",{ACCESSORS:!0,0:0,1:2}),J=M("species"),te=[].slice,ae=Math.max;u({target:"Array",proto:!0,forced:!N||!j},{slice:function(xe,G){var I=w(this),K=y(I.length),$=m(xe,K),O=m(G===void 0?K:G,K),z,V,W;if(d(I)&&(z=I.constructor,typeof z=="function"&&(z===Array||d(z.prototype))?z=void 0:f(z)&&(z=z[J],z===null&&(z=void 0)),z===Array||z===void 0))return te.call(I,$,O);for(V=new(z===void 0?Array:z)(ae(O-$,0)),W=0;$<O;$++,W++)$ in I&&_(V,W,I[$]);return V.length=W,V}})},fc6a:function(i,o,s){var u=s("44ad"),f=s("1d80");i.exports=function(d){return u(f(d))}},fdbc:function(i,o){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(i,o,s){var u=s("4930");i.exports=u&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(Fx);var YU=Fx.exports;const ew=hy(YU),JU={class:"h-full bg-gray-50"},XU={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},QU={class:"mt-6 bg-white shadow rounded-lg p-4"},eV={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},tV=["value"],nV={class:"flex items-end"},rV={key:0,class:"mt-6 p-6 text-center bg-white shadow rounded-lg"},iV={key:1,class:"mt-6 p-6 text-center bg-white shadow rounded-lg"},sV={key:2,class:"mt-6 overflow-x-auto pb-4"},oV={class:"w-80 flex-shrink-0"},aV={class:"bg-white rounded-lg shadow overflow-hidden"},lV={class:"flex items-center"},uV={class:"flex items-center space-x-2"},cV={class:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full"},fV=["onClick"],hV=["data-column-id"],dV=["data-note-id"],pV={class:"flex items-start justify-between mb-2 drag-handle cursor-move w-full"},gV={class:"flex items-center flex-grow min-w-0 mr-2"},mV=["title"],vV={class:"flex space-x-0.5 sm:space-x-1 flex-shrink-0"},yV=["onClick"],_V=["onClick"],bV=["onClick"],wV=["onClick"],xV=["title"],LV={key:0,class:"flex items-center space-x-2 mb-2"},SV={key:0,class:"flex items-center text-xs text-gray-500"},CV={key:1,class:"flex items-center text-xs text-gray-500"},EV={class:"flex justify-between items-center text-xs text-gray-400"},PV={class:"flex space-x-1"},MV=["title"],AV={key:0,class:"fixed z-[3001] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},kV={class:"flex items-center justify-center min-h-screen w-full"},TV={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden"},DV={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3 p-4 md:px-6"},BV={key:2,class:"fixed z-[3001] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},NV={class:"flex items-center justify-center min-h-screen w-full"},OV={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden"},IV={class:"p-4 md:p-6 flex-1 overflow-y-auto"},RV={class:"flex justify-between items-center mb-4 border-b pb-4"},FV={class:"mb-4"},jV={class:"mb-4"},zV={class:"mt-1 flex space-x-2"},$V=["onClick"],UV={class:"p-4 md:px-6 border-t bg-gray-50 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3"},VV=oo({__name:"NotesView",setup(e){const t=Dp(),n=dc(),r=Bp(),i=Rt(!0),o=Rt(!1),s=Rt(!1),u=Rt(!1),f=Rt(null),d=Rt(null),m=Rt(""),y=Rt("#6B7280"),w=Rt("info"),_=gr({get:()=>r.getSortedColumns,set:X=>{const Y=X.map(me=>me.id);r.reorderColumns(Y)}}),M=[{id:Ts.PRIVATE,title:"Privé",description:"Visible uniquement par vous"},{id:Ts.COMPANY,title:"Entreprise",description:"Visible uniquement par l'entreprise"},{id:Ts.EMPLOYEE,title:"Salariés",description:"Visible par l'entreprise et ses salariés"},{id:Ts.VISITOR,title:"Visiteurs",description:"Visible par tous (entreprise, salariés et visiteurs)"}],k=Yl({search:"",date:"",accessLevel:""}),R=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6B7280"],N=gr(()=>{let X=r.getAccessibleNotes;if(k.search){const Y=k.search.toLowerCase();X=X.filter(me=>me.title.toLowerCase().includes(Y)||me.description.toLowerCase().includes(Y))}if(k.accessLevel&&(X=X.filter(Y=>Y.accessLevel===k.accessLevel)),k.date){const Y=new Date;Y.setHours(0,0,0,0);const me=new Date(Y);me.setDate(Y.getDate()-Y.getDay());const Se=new Date(Y.getFullYear(),Y.getMonth(),1);X=X.filter(Re=>{const T=new Date(Re.createdAt);return k.date==="today"?T>=Y:k.date==="week"?T>=me:k.date==="month"?T>=Se:!0})}return X}),j=gr(()=>X=>N.value.filter(Y=>Y.columnId===X).sort((Y,me)=>Y.order-me.order));function J(X){return r.getAccessLevelLabel(X)}function te(X){switch(X){case Ts.PRIVATE:return"#9CA3AF";case Ts.COMPANY:return"#EF4444";case Ts.EMPLOYEE:return"#F59E0B";case Ts.VISITOR:return"#10B981";default:return"#6B7280"}}Fo(async()=>{try{setTimeout(()=>{i.value=!1},500)}catch(X){console.error("Erreur lors du chargement des notes:",X),n.error("Erreur lors du chargement des notes"),i.value=!1}});function ae(X){const Y=new Date(X);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(Y)}function le(){t.push({path:"/",query:{tool:"Note"}})}function xe(X){t.push({path:"/",query:{lat:X.location[0].toString(),lng:X.location[1].toString(),noteId:X.id.toString()}})}function G(X){const Y=X.location[0],me=X.location[1],Se=`https://www.google.com/maps/dir/?api=1&destination=${Y},${me}`;window.open(Se,"_blank")}function I(X){d.value=JSON.parse(JSON.stringify(X)),w.value="info",s.value=!0}function K(){s.value=!1}function $(X){f.value=X,o.value=!0}function O(){f.value&&(r.removeNote(f.value.id),n.success("Note supprimée avec succès"),o.value=!1,f.value=null)}function z(){m.value.trim()&&(r.addColumn(m.value.trim(),y.value),n.success("Colonne ajoutée avec succès"),m.value="",y.value="#6B7280",u.value=!1)}function V(X){r.removeColumn(X),n.success("Colonne supprimée avec succès")}function W(){n.success("Ordre des colonnes mis à jour")}function q(X,Y){console.log("Drag change event:",X);try{if(X.added){const{element:me}=X.added;r.moveNote(me.id,Y);const Re=j.value(Y).map(ne=>ne.id);r.reorderNotes(Y,Re);const T=r.getColumnById(Y);n.success(`Note déplacée vers ${(T==null?void 0:T.title)||"une autre colonne"}`)}if(X.moved){const Se=j.value(Y).map(Re=>Re.id);r.reorderNotes(Y,Se),n.success("Ordre des notes mis à jour")}X.removed}catch(me){console.error("Erreur lors du drag and drop:",me),n.error("Une erreur est survenue lors du déplacement de la note")}}return(X,Y)=>{var me,Se;return Ue(),Ge(Rn,null,[E("div",JU,[E("div",XU,[E("div",{class:"sm:flex sm:items-center"},[Y[10]||(Y[10]=E("div",{class:"sm:flex-auto"},[E("h1",{class:"text-2xl font-semibold text-gray-900"},"Notes"),E("p",{class:"mt-2 text-sm text-gray-700"}," Liste de toutes vos notes. ")],-1)),E("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[E("button",{onClick:le,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Créer une note ")])]),E("div",QU,[E("div",eV,[E("div",null,[Y[11]||(Y[11]=E("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),In(E("input",{type:"text",id:"search","onUpdate:modelValue":Y[0]||(Y[0]=Re=>k.search=Re),placeholder:"Rechercher par titre ou description...",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[ei,k.search]])]),E("div",null,[Y[13]||(Y[13]=E("label",{for:"date",class:"block text-sm font-medium text-gray-700"},"Date",-1)),In(E("select",{id:"date","onUpdate:modelValue":Y[1]||(Y[1]=Re=>k.date=Re),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},Y[12]||(Y[12]=[E("option",{value:""},"Toutes les dates",-1),E("option",{value:"today"},"Aujourd'hui",-1),E("option",{value:"week"},"Cette semaine",-1),E("option",{value:"month"},"Ce mois",-1)]),512),[[ss,k.date]])]),E("div",null,[Y[15]||(Y[15]=E("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accès",-1)),In(E("select",{id:"accessLevel","onUpdate:modelValue":Y[2]||(Y[2]=Re=>k.accessLevel=Re),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[Y[14]||(Y[14]=E("option",{value:""},"Tous les niveaux",-1)),(Ue(),Ge(Rn,null,Nr(M,Re=>E("option",{key:Re.id,value:Re.id},Wt(Re.title),9,tV)),64))],512),[[ss,k.accessLevel]])]),E("div",nV,[E("button",{onClick:Y[3]||(Y[3]=Re=>u.value=!0),class:"w-full inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},Y[16]||(Y[16]=[E("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),di(" Ajouter une colonne ")]))])])]),i.value?(Ue(),Ge("div",rV,Y[17]||(Y[17]=[E("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1),E("p",{class:"mt-2 text-sm text-gray-500"},"Chargement des notes...",-1)]))):N.value.length===0?(Ue(),Ge("div",iV,Y[18]||(Y[18]=[E("p",{class:"text-sm text-gray-500"},"Aucune note trouvée",-1)]))):(Ue(),Ge("div",sV,[ci(qn(ew),{modelValue:_.value,"onUpdate:modelValue":Y[4]||(Y[4]=Re=>_.value=Re),class:"flex space-x-4 min-w-max","item-key":"id",handle:".column-drag-handle",onEnd:W,animation:150},{item:Gl(({element:Re})=>[E("div",oV,[E("div",aV,[E("div",{class:"p-3 flex items-center justify-between column-drag-handle cursor-move no-select",style:tl({backgroundColor:Re.color+"20",borderBottom:"2px solid "+Re.color})},[E("div",lV,[Y[19]||(Y[19]=E("svg",{class:"h-4 w-4 mr-2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),E("h3",{class:"text-sm font-semibold",style:tl({color:Re.color})},Wt(Re.title),5)]),E("div",uV,[E("span",cV,Wt(j.value(Re.id).length),1),Re.isDefault?un("",!0):(Ue(),Ge("button",{key:0,onClick:T=>V(Re.id),class:"text-gray-400 hover:text-red-500 focus:outline-none",title:"Supprimer la colonne"},Y[20]||(Y[20]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,fV))])],4),E("div",{class:"p-2 max-h-[calc(100vh-250px)] overflow-y-auto","data-column-id":Re.id},[ci(qn(ew),{list:j.value(Re.id),class:"min-h-[100px] draggable-container",group:"notes","item-key":"id",animation:150,"ghost-class":"ghost-card","drag-class":"dragging","chosen-class":"chosen",handle:".drag-handle",onChange:T=>q(T,Re.id),"data-column-id":Re.id,"force-fallback":!0},Xw({item:Gl(({element:T})=>{var ne,fe,ce,ye,oe;return[E("div",{class:"mb-2 p-3 bg-white border rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 no-select overflow-hidden","data-note-id":T.id},[E("div",pV,[E("div",gV,[E("div",{class:"h-8 w-8 flex-shrink-0 rounded-full flex items-center justify-center mr-2",style:tl({backgroundColor:T.style.fillColor+"40",color:T.style.color})},Y[22]||(Y[22]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]),4),E("h4",{class:"text-sm font-medium text-gray-900 truncate min-w-0",title:T.title},Wt(T.title),9,mV)]),E("div",vV,[E("button",{onClick:B=>xe(T),class:"p-1.5 sm:p-2 text-gray-400 hover:text-primary-600 rounded-full hover:bg-gray-100",title:"Voir sur la carte"},Y[23]||(Y[23]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1)]),8,yV),E("button",{onClick:B=>G(T),class:"p-1.5 sm:p-2 text-gray-400 hover:text-primary-600 rounded-full hover:bg-gray-100",title:"Ouvrir dans Google Maps"},Y[24]||(Y[24]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.879 16.121L12 13.999l2.121 2.121"})],-1)]),8,_V),E("button",{onClick:B=>I(T),class:"p-1.5 sm:p-2 text-gray-400 hover:text-primary-600 rounded-full hover:bg-gray-100",title:"Modifier"},Y[25]||(Y[25]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,bV),E("button",{onClick:B=>$(T),class:"p-1.5 sm:p-2 text-gray-400 hover:text-red-600 rounded-full hover:bg-gray-100",title:"Supprimer"},Y[26]||(Y[26]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,wV)])]),E("p",{class:"text-xs text-gray-500 mb-2 line-clamp-2",title:T.description},Wt(T.description),9,xV),(ne=T.comments)!=null&&ne.length||(fe=T.photos)!=null&&fe.length?(Ue(),Ge("div",LV,[(ce=T.comments)!=null&&ce.length?(Ue(),Ge("div",SV,[Y[27]||(Y[27]=E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})],-1)),di(" "+Wt(T.comments.length),1)])):un("",!0),(ye=T.photos)!=null&&ye.length?(Ue(),Ge("div",CV,[Y[28]||(Y[28]=E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),di(" "+Wt(T.photos.length),1)])):un("",!0)])):un("",!0),E("div",EV,[E("span",null,Wt(ae(T.createdAt)),1),E("div",PV,[E("span",{class:"px-2 py-1 rounded-full",style:tl({backgroundColor:te(T.accessLevel)+"20",color:te(T.accessLevel)}),title:(oe=M.find(B=>B.id===T.accessLevel))==null?void 0:oe.description},Wt(J(T.accessLevel)),13,MV),E("span",{class:"px-2 py-1 rounded-full",style:tl({backgroundColor:Re.color+"20",color:Re.color})},Wt(Re.title),5)])])],8,dV)]}),_:2},[j.value(Re.id).length===0?{name:"header",fn:Gl(()=>[Y[21]||(Y[21]=E("div",{class:"p-4 text-center text-gray-400 text-sm italic"}," Aucune note dans cette colonne ",-1))]),key:"0"}:void 0]),1032,["list","onChange","data-column-id"])],8,hV)])])]),_:1},8,["modelValue"])]))])]),o.value?(Ue(),Ge("div",AV,[E("div",kV,[Y[30]||(Y[30]=E("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),E("div",TV,[Y[29]||(Y[29]=uc('<div class="p-4 md:p-6" data-v-e140018c><div class="flex items-start" data-v-e140018c><div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100" data-v-e140018c><svg class="h-6 w-6 text-red-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-v-e140018c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-e140018c></path></svg></div><div class="ml-4 flex-1" data-v-e140018c><h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title" data-v-e140018c> Supprimer la note </h3><div class="mt-2" data-v-e140018c><p class="text-sm text-gray-500" data-v-e140018c> Êtes-vous sûr de vouloir supprimer cette note ? Cette action est irréversible. </p></div></div></div></div>',1)),E("div",DV,[E("button",{onClick:O,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm"}," Supprimer "),E("button",{onClick:Y[5]||(Y[5]=Re=>o.value=!1),type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm"}," Annuler ")])])])])):un("",!0),s.value?(Ue(),za(dx,{key:1,note:d.value,"is-new-note":!((me=d.value)!=null&&me.id),location:(Se=d.value)==null?void 0:Se.location,onClose:Y[6]||(Y[6]=Re=>s.value=!1),onSave:K},null,8,["note","is-new-note","location"])):un("",!0),u.value?(Ue(),Ge("div",BV,[E("div",NV,[Y[36]||(Y[36]=E("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),E("div",OV,[E("form",{onSubmit:Vc(z,["prevent"]),class:"h-full md:h-auto flex flex-col"},[E("div",IV,[E("div",RV,[Y[32]||(Y[32]=E("h3",{class:"text-xl font-semibold text-gray-900"},"Ajouter une nouvelle colonne",-1)),E("button",{type:"button",onClick:Y[7]||(Y[7]=Re=>u.value=!1),class:"text-gray-400 hover:text-gray-500"},Y[31]||(Y[31]=[E("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("div",FV,[Y[33]||(Y[33]=E("label",{for:"columnName",class:"block text-sm font-medium text-gray-700"},"Nom de la colonne",-1)),In(E("input",{type:"text",id:"columnName","onUpdate:modelValue":Y[8]||(Y[8]=Re=>m.value=Re),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[ei,m.value]])]),E("div",jV,[Y[34]||(Y[34]=E("label",{class:"block text-sm font-medium text-gray-700"},"Couleur",-1)),E("div",zV,[(Ue(),Ge(Rn,null,Nr(R,Re=>E("div",{key:Re,class:Ii(["w-8 h-8 rounded-full cursor-pointer border-2",{"border-gray-400":y.value!==Re,"border-black":y.value===Re}]),style:tl({backgroundColor:Re}),onClick:T=>y.value=Re},null,14,$V)),64))])])]),E("div",UV,[Y[35]||(Y[35]=E("button",{type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm"}," Ajouter ",-1)),E("button",{onClick:Y[9]||(Y[9]=Re=>u.value=!1),type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm"}," Annuler ")])],32)])])])):un("",!0)],64)}}}),HV=nm(VV,[["__scopeId","data-v-e140018c"]]),Yx=u8({history:zT("/"),routes:[{path:"/",name:"home",component:Ub,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/plans",name:"plans",component:fU,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/users",name:"users",component:Iz,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie"]}},{path:"/profile",name:"profile",component:()=>Yf(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/login",name:"login",component:bB,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>Yf(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>Yf(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:tB,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/notes",name:"notes",component:HV,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/map",name:"map",component:Ub,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>Yf(()=>import("./NotFoundView.js"),[])}]});Yx.beforeEach(async(e,t,n)=>{var u,f;const r=ga();if(console.log("Route:",e.path,"Auth state:",{initialized:r.initialized,isAuthenticated:r.isAuthenticated,user:r.user}),!r.initialized)try{await r.initialize(window.INITIAL_STATE)}catch(d){console.error("Error initializing auth store:",d)}const i=r.isAuthenticated,o=(u=r.user)==null?void 0:u.must_change_password,s=(f=r.user)==null?void 0:f.user_type;if(e.meta.requiresAuth&&!i){n("/login");return}if(i&&o&&e.name!=="changePassword"){n({name:"changePassword"});return}if(e.name==="changePassword"&&!o){n({name:"home"});return}if(e.meta.allowedRoles&&s&&!e.meta.allowedRoles.includes(s)){n({name:"home"});return}if(e.meta.requiresGuest&&i){n({name:"home"});return}n()});const Ly=lg(BD),Jx=vA();Ly.use(Jx);Ly.use(Yx);const GV=ga(Jx);window.INITIAL_STATE&&GV.initialize(window.INITIAL_STATE);Ly.mount("#app");export{Zi as _,Yl as a,E as b,Ge as c,oo as d,un as e,qn as f,di as g,In as h,Ue as i,uc as j,ci as k,Gl as l,Yw as m,Ii as n,Fo as o,fH as p,Dp as q,Rt as r,Jo as s,Wt as t,ga as u,ei as v,Vc as w,hy as x};

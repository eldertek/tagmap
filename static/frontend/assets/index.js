var $E=Object.defineProperty;var UE=(e,n,t)=>n in e?$E(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var Ht=(e,n,t)=>UE(e,typeof n!="symbol"?n+"":n,t);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function A0(e){const n=Object.create(null);for(const t of e.split(","))n[t]=1;return t=>t in n}const Di={},Hh=[],gu=()=>{},VE=()=>!1,Cp=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),I1=e=>e.startsWith("onUpdate:"),uo=Object.assign,R1=(e,n)=>{const t=e.indexOf(n);t>-1&&e.splice(t,1)},HE=Object.prototype.hasOwnProperty,qi=(e,n)=>HE.call(e,n),er=Array.isArray,Gh=e=>ld(e)==="[object Map]",sh=e=>ld(e)==="[object Set]",O2=e=>ld(e)==="[object Date]",GE=e=>ld(e)==="[object RegExp]",kr=e=>typeof e=="function",yo=e=>typeof e=="string",Uu=e=>typeof e=="symbol",Ji=e=>e!==null&&typeof e=="object",F1=e=>(Ji(e)||kr(e))&&kr(e.then)&&kr(e.catch),ow=Object.prototype.toString,ld=e=>ow.call(e),qE=e=>ld(e).slice(8,-1),k0=e=>ld(e)==="[object Object]",j1=e=>yo(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,qh=A0(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),T0=e=>{const n=Object.create(null);return t=>n[t]||(n[t]=e(t))},WE=/-(\w)/g,ma=T0(e=>e.replace(WE,(n,t)=>t?t.toUpperCase():"")),ZE=/\B([A-Z])/g,Pl=T0(e=>e.replace(ZE,"-$1").toLowerCase()),Ep=T0(e=>e.charAt(0).toUpperCase()+e.slice(1)),qd=T0(e=>e?`on${Ep(e)}`:""),nl=(e,n)=>!Object.is(e,n),Wh=(e,...n)=>{for(let t=0;t<e.length;t++)e[t](...n)},sw=(e,n,t,r=!1)=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,writable:r,value:t})},Jg=e=>{const n=parseFloat(e);return isNaN(n)?e:n},Xg=e=>{const n=yo(e)?Number(e):NaN;return isNaN(n)?e:n};let I2;const D0=()=>I2||(I2=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),KE="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",YE=A0(KE);function rl(e){if(er(e)){const n={};for(let t=0;t<e.length;t++){const r=e[t],i=yo(r)?eP(r):rl(r);if(i)for(const s in i)n[s]=i[s]}return n}else if(yo(e)||Ji(e))return e}const JE=/;(?![^(]*\))/g,XE=/:([^]+)/,QE=/\/\*[^]*?\*\//g;function eP(e){const n={};return e.replace(QE,"").split(JE).forEach(t=>{if(t){const r=t.split(XE);r.length>1&&(n[r[0].trim()]=r[1].trim())}}),n}function Ri(e){let n="";if(yo(e))n=e;else if(er(e))for(let t=0;t<e.length;t++){const r=Ri(e[t]);r&&(n+=r+" ")}else if(Ji(e))for(const t in e)e[t]&&(n+=t+" ");return n.trim()}function tP(e){if(!e)return null;let{class:n,style:t}=e;return n&&!yo(n)&&(e.class=Ri(n)),t&&(e.style=rl(t)),e}const nP="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",rP=A0(nP);function aw(e){return!!e||e===""}function iP(e,n){if(e.length!==n.length)return!1;let t=!0;for(let r=0;t&&r<e.length;r++)t=wf(e[r],n[r]);return t}function wf(e,n){if(e===n)return!0;let t=O2(e),r=O2(n);if(t||r)return t&&r?e.getTime()===n.getTime():!1;if(t=Uu(e),r=Uu(n),t||r)return e===n;if(t=er(e),r=er(n),t||r)return t&&r?iP(e,n):!1;if(t=Ji(e),r=Ji(n),t||r){if(!t||!r)return!1;const i=Object.keys(e).length,s=Object.keys(n).length;if(i!==s)return!1;for(const o in e){const u=e.hasOwnProperty(o),f=n.hasOwnProperty(o);if(u&&!f||!u&&f||!wf(e[o],n[o]))return!1}}return String(e)===String(n)}function N0(e,n){return e.findIndex(t=>wf(t,n))}const lw=e=>!!(e&&e.__v_isRef===!0),Wt=e=>yo(e)?e:e==null?"":er(e)||Ji(e)&&(e.toString===ow||!kr(e.toString))?lw(e)?Wt(e.value):JSON.stringify(e,uw,2):String(e),uw=(e,n)=>lw(n)?uw(e,n.value):Gh(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((t,[r,i],s)=>(t[jm(r,s)+" =>"]=i,t),{})}:sh(n)?{[`Set(${n.size})`]:[...n.values()].map(t=>jm(t))}:Uu(n)?jm(n):Ji(n)&&!er(n)&&!k0(n)?String(n):n,jm=(e,n="")=>{var t;return Uu(e)?`Symbol(${(t=e.description)!=null?t:n})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let tl;class z1{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=tl,!n&&tl&&(this.index=(tl.scopes||(tl.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let n,t;if(this.scopes)for(n=0,t=this.scopes.length;n<t;n++)this.scopes[n].pause();for(n=0,t=this.effects.length;n<t;n++)this.effects[n].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let n,t;if(this.scopes)for(n=0,t=this.scopes.length;n<t;n++)this.scopes[n].resume();for(n=0,t=this.effects.length;n<t;n++)this.effects[n].resume()}}run(n){if(this._active){const t=tl;try{return tl=this,n()}finally{tl=t}}}on(){tl=this}off(){tl=this.parent}stop(n){if(this._active){this._active=!1;let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(this.effects.length=0,t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!n){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function $1(e){return new z1(e)}function U1(){return tl}function cw(e,n=!1){tl&&tl.cleanups.push(e)}let vo;const zm=new WeakSet;class cp{constructor(n){this.fn=n,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,tl&&tl.active&&tl.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,zm.has(this)&&(zm.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||hw(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,R2(this),dw(this);const n=vo,t=$u;vo=this,$u=!0;try{return this.fn()}finally{pw(this),vo=n,$u=t,this.flags&=-3}}stop(){if(this.flags&1){for(let n=this.deps;n;n=n.nextDep)G1(n);this.deps=this.depsTail=void 0,R2(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?zm.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Av(this)&&this.run()}get dirty(){return Av(this)}}let fw=0,Wd,Zd;function hw(e,n=!1){if(e.flags|=8,n){e.next=Zd,Zd=e;return}e.next=Wd,Wd=e}function V1(){fw++}function H1(){if(--fw>0)return;if(Zd){let n=Zd;for(Zd=void 0;n;){const t=n.next;n.next=void 0,n.flags&=-9,n=t}}let e;for(;Wd;){let n=Wd;for(Wd=void 0;n;){const t=n.next;if(n.next=void 0,n.flags&=-9,n.flags&1)try{n.trigger()}catch(r){e||(e=r)}n=t}}if(e)throw e}function dw(e){for(let n=e.deps;n;n=n.nextDep)n.version=-1,n.prevActiveLink=n.dep.activeLink,n.dep.activeLink=n}function pw(e){let n,t=e.depsTail,r=t;for(;r;){const i=r.prevDep;r.version===-1?(r===t&&(t=i),G1(r),oP(r)):n=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}e.deps=n,e.depsTail=t}function Av(e){for(let n=e.deps;n;n=n.nextDep)if(n.dep.version!==n.version||n.dep.computed&&(gw(n.dep.computed)||n.dep.version!==n.version))return!0;return!!e._dirty}function gw(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===fp))return;e.globalVersion=fp;const n=e.dep;if(e.flags|=2,n.version>0&&!e.isSSR&&e.deps&&!Av(e)){e.flags&=-3;return}const t=vo,r=$u;vo=e,$u=!0;try{dw(e);const i=e.fn(e._value);(n.version===0||nl(i,e._value))&&(e._value=i,n.version++)}catch(i){throw n.version++,i}finally{vo=t,$u=r,pw(e),e.flags&=-3}}function G1(e,n=!1){const{dep:t,prevSub:r,nextSub:i}=e;if(r&&(r.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=r,e.nextSub=void 0),t.subs===e&&(t.subs=r,!r&&t.computed)){t.computed.flags&=-5;for(let s=t.computed.deps;s;s=s.nextDep)G1(s,!0)}!n&&!--t.sc&&t.map&&t.map.delete(t.key)}function oP(e){const{prevDep:n,nextDep:t}=e;n&&(n.nextDep=t,e.prevDep=void 0),t&&(t.prevDep=n,e.nextDep=void 0)}function sP(e,n){e.effect instanceof cp&&(e=e.effect.fn);const t=new cp(e);n&&uo(t,n);try{t.run()}catch(i){throw t.stop(),i}const r=t.run.bind(t);return r.effect=t,r}function aP(e){e.effect.stop()}let $u=!0;const mw=[];function Pf(){mw.push($u),$u=!1}function Mf(){const e=mw.pop();$u=e===void 0?!0:e}function R2(e){const{cleanup:n}=e;if(e.cleanup=void 0,n){const t=vo;vo=void 0;try{n()}finally{vo=t}}}let fp=0;class lP{constructor(n,t){this.sub=n,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class B0{constructor(n){this.computed=n,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(n){if(!vo||!$u||vo===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==vo)t=this.activeLink=new lP(vo,this),vo.deps?(t.prevDep=vo.depsTail,vo.depsTail.nextDep=t,vo.depsTail=t):vo.deps=vo.depsTail=t,vw(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const r=t.nextDep;r.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=r),t.prevDep=vo.depsTail,t.nextDep=void 0,vo.depsTail.nextDep=t,vo.depsTail=t,vo.deps===t&&(vo.deps=r)}return t}trigger(n){this.version++,fp++,this.notify(n)}notify(n){V1();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{H1()}}}function vw(e){if(e.dep.sc++,e.sub.flags&4){const n=e.dep.computed;if(n&&!e.dep.subs){n.flags|=20;for(let r=n.deps;r;r=r.nextDep)vw(r)}const t=e.dep.subs;t!==e&&(e.prevSub=t,t&&(t.nextSub=e)),e.dep.subs=e}}const Qg=new WeakMap,Jf=Symbol(""),kv=Symbol(""),hp=Symbol("");function Ia(e,n,t){if($u&&vo){let r=Qg.get(e);r||Qg.set(e,r=new Map);let i=r.get(t);i||(r.set(t,i=new B0),i.map=r,i.key=t),i.track()}}function Rc(e,n,t,r,i,s){const o=Qg.get(e);if(!o){fp++;return}const u=f=>{f&&f.trigger()};if(V1(),n==="clear")o.forEach(u);else{const f=er(e),d=f&&j1(t);if(f&&t==="length"){const g=Number(r);o.forEach((y,x)=>{(x==="length"||x===hp||!Uu(x)&&x>=g)&&u(y)})}else switch((t!==void 0||o.has(void 0))&&u(o.get(t)),d&&u(o.get(hp)),n){case"add":f?d&&u(o.get("length")):(u(o.get(Jf)),Gh(e)&&u(o.get(kv)));break;case"delete":f||(u(o.get(Jf)),Gh(e)&&u(o.get(kv)));break;case"set":Gh(e)&&u(o.get(Jf));break}}H1()}function uP(e,n){const t=Qg.get(e);return t&&t.get(n)}function Ch(e){const n=Ti(e);return n===e?n:(Ia(n,"iterate",hp),Zl(e)?n:n.map(Ra))}function O0(e){return Ia(e=Ti(e),"iterate",hp),e}const cP={__proto__:null,[Symbol.iterator](){return $m(this,Symbol.iterator,Ra)},concat(...e){return Ch(this).concat(...e.map(n=>er(n)?Ch(n):n))},entries(){return $m(this,"entries",e=>(e[1]=Ra(e[1]),e))},every(e,n){return Dc(this,"every",e,n,void 0,arguments)},filter(e,n){return Dc(this,"filter",e,n,t=>t.map(Ra),arguments)},find(e,n){return Dc(this,"find",e,n,Ra,arguments)},findIndex(e,n){return Dc(this,"findIndex",e,n,void 0,arguments)},findLast(e,n){return Dc(this,"findLast",e,n,Ra,arguments)},findLastIndex(e,n){return Dc(this,"findLastIndex",e,n,void 0,arguments)},forEach(e,n){return Dc(this,"forEach",e,n,void 0,arguments)},includes(...e){return Um(this,"includes",e)},indexOf(...e){return Um(this,"indexOf",e)},join(e){return Ch(this).join(e)},lastIndexOf(...e){return Um(this,"lastIndexOf",e)},map(e,n){return Dc(this,"map",e,n,void 0,arguments)},pop(){return xd(this,"pop")},push(...e){return xd(this,"push",e)},reduce(e,...n){return F2(this,"reduce",e,n)},reduceRight(e,...n){return F2(this,"reduceRight",e,n)},shift(){return xd(this,"shift")},some(e,n){return Dc(this,"some",e,n,void 0,arguments)},splice(...e){return xd(this,"splice",e)},toReversed(){return Ch(this).toReversed()},toSorted(e){return Ch(this).toSorted(e)},toSpliced(...e){return Ch(this).toSpliced(...e)},unshift(...e){return xd(this,"unshift",e)},values(){return $m(this,"values",Ra)}};function $m(e,n,t){const r=O0(e),i=r[n]();return r!==e&&!Zl(e)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=t(s.value)),s}),i}const fP=Array.prototype;function Dc(e,n,t,r,i,s){const o=O0(e),u=o!==e&&!Zl(e),f=o[n];if(f!==fP[n]){const y=f.apply(e,s);return u?Ra(y):y}let d=t;o!==e&&(u?d=function(y,x){return t.call(this,Ra(y),x,e)}:t.length>2&&(d=function(y,x){return t.call(this,y,x,e)}));const g=f.call(o,d,r);return u&&i?i(g):g}function F2(e,n,t,r){const i=O0(e);let s=t;return i!==e&&(Zl(e)?t.length>3&&(s=function(o,u,f){return t.call(this,o,u,f,e)}):s=function(o,u,f){return t.call(this,o,Ra(u),f,e)}),i[n](s,...r)}function Um(e,n,t){const r=Ti(e);Ia(r,"iterate",hp);const i=r[n](...t);return(i===-1||i===!1)&&F0(t[0])?(t[0]=Ti(t[0]),r[n](...t)):i}function xd(e,n,t=[]){Pf(),V1();const r=Ti(e)[n].apply(e,t);return H1(),Mf(),r}const hP=A0("__proto__,__v_isRef,__isVue"),yw=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Uu));function dP(e){Uu(e)||(e=String(e));const n=Ti(this);return Ia(n,"has",e),n.hasOwnProperty(e)}class _w{constructor(n=!1,t=!1){this._isReadonly=n,this._isShallow=t}get(n,t,r){if(t==="__v_skip")return n.__v_skip;const i=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return s;if(t==="__v_raw")return r===(i?s?Cw:Sw:s?Lw:xw).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(r)?n:void 0;const o=er(n);if(!i){let f;if(o&&(f=cP[t]))return f;if(t==="hasOwnProperty")return dP}const u=Reflect.get(n,t,Jo(n)?n:r);return(Uu(t)?yw.has(t):hP(t))||(i||Ia(n,"get",t),s)?u:Jo(u)?o&&j1(t)?u:u.value:Ji(u)?i?Iu(u):Jl(u):u}}class bw extends _w{constructor(n=!1){super(!1,n)}set(n,t,r,i){let s=n[t];if(!this._isShallow){const f=xf(s);if(!Zl(r)&&!xf(r)&&(s=Ti(s),r=Ti(r)),!er(n)&&Jo(s)&&!Jo(r))return f?!1:(s.value=r,!0)}const o=er(n)&&j1(t)?Number(t)<n.length:qi(n,t),u=Reflect.set(n,t,r,Jo(n)?n:i);return n===Ti(i)&&(o?nl(r,s)&&Rc(n,"set",t,r):Rc(n,"add",t,r)),u}deleteProperty(n,t){const r=qi(n,t);n[t];const i=Reflect.deleteProperty(n,t);return i&&r&&Rc(n,"delete",t,void 0),i}has(n,t){const r=Reflect.has(n,t);return(!Uu(t)||!yw.has(t))&&Ia(n,"has",t),r}ownKeys(n){return Ia(n,"iterate",er(n)?"length":Jf),Reflect.ownKeys(n)}}class ww extends _w{constructor(n=!1){super(!0,n)}set(n,t){return!0}deleteProperty(n,t){return!0}}const pP=new bw,gP=new ww,mP=new bw(!0),vP=new ww(!0),Tv=e=>e,sg=e=>Reflect.getPrototypeOf(e);function yP(e,n,t){return function(...r){const i=this.__v_raw,s=Ti(i),o=Gh(s),u=e==="entries"||e===Symbol.iterator&&o,f=e==="keys"&&o,d=i[e](...r),g=t?Tv:n?Dv:Ra;return!n&&Ia(s,"iterate",f?kv:Jf),{next(){const{value:y,done:x}=d.next();return x?{value:y,done:x}:{value:u?[g(y[0]),g(y[1])]:g(y),done:x}},[Symbol.iterator](){return this}}}}function ag(e){return function(...n){return e==="delete"?!1:e==="clear"?void 0:this}}function _P(e,n){const t={get(i){const s=this.__v_raw,o=Ti(s),u=Ti(i);e||(nl(i,u)&&Ia(o,"get",i),Ia(o,"get",u));const{has:f}=sg(o),d=n?Tv:e?Dv:Ra;if(f.call(o,i))return d(s.get(i));if(f.call(o,u))return d(s.get(u));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!e&&Ia(Ti(i),"iterate",Jf),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=Ti(s),u=Ti(i);return e||(nl(i,u)&&Ia(o,"has",i),Ia(o,"has",u)),i===u?s.has(i):s.has(i)||s.has(u)},forEach(i,s){const o=this,u=o.__v_raw,f=Ti(u),d=n?Tv:e?Dv:Ra;return!e&&Ia(f,"iterate",Jf),u.forEach((g,y)=>i.call(s,d(g),d(y),o))}};return uo(t,e?{add:ag("add"),set:ag("set"),delete:ag("delete"),clear:ag("clear")}:{add(i){!n&&!Zl(i)&&!xf(i)&&(i=Ti(i));const s=Ti(this);return sg(s).has.call(s,i)||(s.add(i),Rc(s,"add",i,i)),this},set(i,s){!n&&!Zl(s)&&!xf(s)&&(s=Ti(s));const o=Ti(this),{has:u,get:f}=sg(o);let d=u.call(o,i);d||(i=Ti(i),d=u.call(o,i));const g=f.call(o,i);return o.set(i,s),d?nl(s,g)&&Rc(o,"set",i,s):Rc(o,"add",i,s),this},delete(i){const s=Ti(this),{has:o,get:u}=sg(s);let f=o.call(s,i);f||(i=Ti(i),f=o.call(s,i)),u&&u.call(s,i);const d=s.delete(i);return f&&Rc(s,"delete",i,void 0),d},clear(){const i=Ti(this),s=i.size!==0,o=i.clear();return s&&Rc(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=yP(i,e,n)}),t}function I0(e,n){const t=_P(e,n);return(r,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(qi(t,i)&&i in r?t:r,i,s)}const bP={get:I0(!1,!1)},wP={get:I0(!1,!0)},xP={get:I0(!0,!1)},LP={get:I0(!0,!0)},xw=new WeakMap,Lw=new WeakMap,Sw=new WeakMap,Cw=new WeakMap;function SP(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function CP(e){return e.__v_skip||!Object.isExtensible(e)?0:SP(qE(e))}function Jl(e){return xf(e)?e:R0(e,!1,pP,bP,xw)}function q1(e){return R0(e,!1,mP,wP,Lw)}function Iu(e){return R0(e,!0,gP,xP,Sw)}function EP(e){return R0(e,!0,vP,LP,Cw)}function R0(e,n,t,r,i){if(!Ji(e)||e.__v_raw&&!(n&&e.__v_isReactive))return e;const s=i.get(e);if(s)return s;const o=CP(e);if(o===0)return e;const u=new Proxy(e,o===2?r:t);return i.set(e,u),u}function hc(e){return xf(e)?hc(e.__v_raw):!!(e&&e.__v_isReactive)}function xf(e){return!!(e&&e.__v_isReadonly)}function Zl(e){return!!(e&&e.__v_isShallow)}function F0(e){return e?!!e.__v_raw:!1}function Ti(e){const n=e&&e.__v_raw;return n?Ti(n):e}function j0(e){return!qi(e,"__v_skip")&&Object.isExtensible(e)&&sw(e,"__v_skip",!0),e}const Ra=e=>Ji(e)?Jl(e):e,Dv=e=>Ji(e)?Iu(e):e;function Jo(e){return e?e.__v_isRef===!0:!1}function Ft(e){return Ew(e,!1)}function W1(e){return Ew(e,!0)}function Ew(e,n){return Jo(e)?e:new PP(e,n)}class PP{constructor(n,t){this.dep=new B0,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?n:Ti(n),this._value=t?n:Ra(n),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(n){const t=this._rawValue,r=this.__v_isShallow||Zl(n)||xf(n);n=r?n:Ti(n),nl(n,t)&&(this._rawValue=n,this._value=r?n:Ra(n),this.dep.trigger())}}function MP(e){e.dep&&e.dep.trigger()}function Wn(e){return Jo(e)?e.value:e}function AP(e){return kr(e)?e():Wn(e)}const kP={get:(e,n,t)=>n==="__v_raw"?e:Wn(Reflect.get(e,n,t)),set:(e,n,t,r)=>{const i=e[n];return Jo(i)&&!Jo(t)?(i.value=t,!0):Reflect.set(e,n,t,r)}};function Z1(e){return hc(e)?e:new Proxy(e,kP)}class TP{constructor(n){this.__v_isRef=!0,this._value=void 0;const t=this.dep=new B0,{get:r,set:i}=n(t.track.bind(t),t.trigger.bind(t));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(n){this._set(n)}}function Pw(e){return new TP(e)}function Mw(e){const n=er(e)?new Array(e.length):{};for(const t in e)n[t]=Aw(e,t);return n}class DP{constructor(n,t,r){this._object=n,this._key=t,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const n=this._object[this._key];return this._value=n===void 0?this._defaultValue:n}set value(n){this._object[this._key]=n}get dep(){return uP(Ti(this._object),this._key)}}class NP{constructor(n){this._getter=n,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function BP(e,n,t){return Jo(e)?e:kr(e)?new NP(e):Ji(e)&&arguments.length>1?Aw(e,n,t):Ft(e)}function Aw(e,n,t){const r=e[n];return Jo(r)?r:new DP(e,n,t)}class OP{constructor(n,t,r){this.fn=n,this.setter=t,this._value=void 0,this.dep=new B0(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=fp-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&vo!==this)return hw(this,!0),!0}get value(){const n=this.dep.track();return gw(this),n&&(n.version=this.dep.version),this._value}set value(n){this.setter&&this.setter(n)}}function IP(e,n,t=!1){let r,i;return kr(e)?r=e:(r=e.get,i=e.set),new OP(r,i,t)}const RP={GET:"get",HAS:"has",ITERATE:"iterate"},FP={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},lg={},e0=new WeakMap;let lf;function jP(){return lf}function kw(e,n=!1,t=lf){if(t){let r=e0.get(t);r||e0.set(t,r=[]),r.push(e)}}function zP(e,n,t=Di){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:u,call:f}=t,d=Q=>i?Q:Zl(Q)||i===!1||i===0?Fc(Q,1):Fc(Q);let g,y,x,_,M=!1,D=!1;if(Jo(e)?(y=()=>e.value,M=Zl(e)):hc(e)?(y=()=>d(e),M=!0):er(e)?(D=!0,M=e.some(Q=>hc(Q)||Zl(Q)),y=()=>e.map(Q=>{if(Jo(Q))return Q.value;if(hc(Q))return d(Q);if(kr(Q))return f?f(Q,2):Q()})):kr(e)?n?y=f?()=>f(e,2):e:y=()=>{if(x){Pf();try{x()}finally{Mf()}}const Q=lf;lf=g;try{return f?f(e,3,[_]):e(_)}finally{lf=Q}}:y=gu,n&&i){const Q=y,le=i===!0?1/0:i;y=()=>Fc(Q(),le)}const N=U1(),O=()=>{g.stop(),N&&N.active&&R1(N.effects,g)};if(s&&n){const Q=n;n=(...le)=>{Q(...le),O()}}let F=D?new Array(e.length).fill(lg):lg;const Y=Q=>{if(!(!(g.flags&1)||!g.dirty&&!Q))if(n){const le=g.run();if(i||M||(D?le.some((ce,xe)=>nl(ce,F[xe])):nl(le,F))){x&&x();const ce=lf;lf=g;try{const xe=[le,F===lg?void 0:D&&F[0]===lg?[]:F,_];f?f(n,3,xe):n(...xe),F=le}finally{lf=ce}}}else g.run()};return u&&u(Y),g=new cp(y),g.scheduler=o?()=>o(Y,!1):Y,_=Q=>kw(Q,!1,g),x=g.onStop=()=>{const Q=e0.get(g);if(Q){if(f)f(Q,4);else for(const le of Q)le();e0.delete(g)}},n?r?Y(!0):F=g.run():o?o(Y.bind(null,!0),!0):g.run(),O.pause=g.pause.bind(g),O.resume=g.resume.bind(g),O.stop=O,O}function Fc(e,n=1/0,t){if(n<=0||!Ji(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),n--,Jo(e))Fc(e.value,n,t);else if(er(e))for(let r=0;r<e.length;r++)Fc(e[r],n,t);else if(sh(e)||Gh(e))e.forEach(r=>{Fc(r,n,t)});else if(k0(e)){for(const r in e)Fc(e[r],n,t);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Fc(e[r],n,t)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Tw=[];function $P(e){Tw.push(e)}function UP(){Tw.pop()}function VP(e,n){}const HP={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},GP={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function ud(e,n,t,r){try{return r?e(...r):e()}catch(i){ah(i,n,t)}}function vu(e,n,t,r){if(kr(e)){const i=ud(e,n,t,r);return i&&F1(i)&&i.catch(s=>{ah(s,n,t)}),i}if(er(e)){const i=[];for(let s=0;s<e.length;s++)i.push(vu(e[s],n,t,r));return i}}function ah(e,n,t,r=!0){const i=n?n.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=n&&n.appContext.config||Di;if(n){let u=n.parent;const f=n.proxy,d=`https://vuejs.org/error-reference/#runtime-${t}`;for(;u;){const g=u.ec;if(g){for(let y=0;y<g.length;y++)if(g[y](e,f,d)===!1)return}u=u.parent}if(s){Pf(),ud(s,null,10,[e,f,d]),Mf();return}}qP(e,t,i,r,o)}function qP(e,n,t,r=!0,i=!1){if(i)throw e;console.error(e)}const il=[];let sc=-1;const Zh=[];let uf=null,Bh=0;const Dw=Promise.resolve();let t0=null;function Xs(e){const n=t0||Dw;return e?n.then(this?e.bind(this):e):n}function WP(e){let n=sc+1,t=il.length;for(;n<t;){const r=n+t>>>1,i=il[r],s=pp(i);s<e||s===e&&i.flags&2?n=r+1:t=r}return n}function K1(e){if(!(e.flags&1)){const n=pp(e),t=il[il.length-1];!t||!(e.flags&2)&&n>=pp(t)?il.push(e):il.splice(WP(n),0,e),e.flags|=1,Nw()}}function Nw(){t0||(t0=Dw.then(Bw))}function dp(e){er(e)?Zh.push(...e):uf&&e.id===-1?uf.splice(Bh+1,0,e):e.flags&1||(Zh.push(e),e.flags|=1),Nw()}function j2(e,n,t=sc+1){for(;t<il.length;t++){const r=il[t];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;il.splice(t,1),t--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function n0(e){if(Zh.length){const n=[...new Set(Zh)].sort((t,r)=>pp(t)-pp(r));if(Zh.length=0,uf){uf.push(...n);return}for(uf=n,Bh=0;Bh<uf.length;Bh++){const t=uf[Bh];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}uf=null,Bh=0}}const pp=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Bw(e){try{for(sc=0;sc<il.length;sc++){const n=il[sc];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),ud(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;sc<il.length;sc++){const n=il[sc];n&&(n.flags&=-2)}sc=-1,il.length=0,n0(),t0=null,(il.length||Zh.length)&&Bw()}}let Oh,ug=[];function Ow(e,n){var t,r;Oh=e,Oh?(Oh.enabled=!0,ug.forEach(({event:i,args:s})=>Oh.emit(i,...s)),ug=[]):typeof window<"u"&&window.HTMLElement&&!((r=(t=window.navigator)==null?void 0:t.userAgent)!=null&&r.includes("jsdom"))?((n.__VUE_DEVTOOLS_HOOK_REPLAY__=n.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{Ow(s,n)}),setTimeout(()=>{Oh||(n.__VUE_DEVTOOLS_HOOK_REPLAY__=null,ug=[])},3e3)):ug=[]}let zs=null,z0=null;function gp(e){const n=zs;return zs=e,z0=e&&e.type.__scopeId||null,n}function ZP(e){z0=e}function KP(){z0=null}const YP=e=>ql;function ql(e,n=zs,t){if(!n||e._n)return e;const r=(...i)=>{r._d&&zv(-1);const s=gp(n);let o;try{o=e(...i)}finally{gp(s),r._d&&zv(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function In(e,n){if(zs===null)return e;const t=Ap(zs),r=e.dirs||(e.dirs=[]);for(let i=0;i<n.length;i++){let[s,o,u,f=Di]=n[i];s&&(kr(s)&&(s={mounted:s,updated:s}),s.deep&&Fc(o),r.push({dir:s,instance:t,value:o,oldValue:void 0,arg:u,modifiers:f}))}return e}function ac(e,n,t,r){const i=e.dirs,s=n&&n.dirs;for(let o=0;o<i.length;o++){const u=i[o];s&&(u.oldValue=s[o].value);let f=u.dir[r];f&&(Pf(),vu(f,t,8,[e.el,u,e,n]),Mf())}}const Iw=Symbol("_vte"),Rw=e=>e.__isTeleport,Kd=e=>e&&(e.disabled||e.disabled===""),z2=e=>e&&(e.defer||e.defer===""),$2=e=>typeof SVGElement<"u"&&e instanceof SVGElement,U2=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Nv=(e,n)=>{const t=e&&e.to;return yo(t)?n?n(t):null:t},Fw={name:"Teleport",__isTeleport:!0,process(e,n,t,r,i,s,o,u,f,d){const{mc:g,pc:y,pbc:x,o:{insert:_,querySelector:M,createText:D,createComment:N}}=d,O=Kd(n.props);let{shapeFlag:F,children:Y,dynamicChildren:Q}=n;if(e==null){const le=n.el=D(""),ce=n.anchor=D("");_(le,t,r),_(ce,t,r);const xe=(R,Z)=>{F&16&&(i&&i.isCE&&(i.ce._teleportTarget=R),g(Y,R,Z,i,s,o,u,f))},G=()=>{const R=n.target=Nv(n.props,M),Z=jw(R,n,D,_);R&&(o!=="svg"&&$2(R)?o="svg":o!=="mathml"&&U2(R)&&(o="mathml"),O||(xe(R,Z),Tg(n,!1)))};O&&(xe(t,ce),Tg(n,!0)),z2(n.props)?Fs(()=>{G(),n.el.__isMounted=!0},s):G()}else{if(z2(n.props)&&!e.el.__isMounted){Fs(()=>{Fw.process(e,n,t,r,i,s,o,u,f,d),delete e.el.__isMounted},s);return}n.el=e.el,n.targetStart=e.targetStart;const le=n.anchor=e.anchor,ce=n.target=e.target,xe=n.targetAnchor=e.targetAnchor,G=Kd(e.props),R=G?t:ce,Z=G?le:xe;if(o==="svg"||$2(ce)?o="svg":(o==="mathml"||U2(ce))&&(o="mathml"),Q?(x(e.dynamicChildren,Q,R,i,s,o,u),oy(e,n,!0)):f||y(e,n,R,Z,i,s,o,u,!1),O)G?n.props&&e.props&&n.props.to!==e.props.to&&(n.props.to=e.props.to):cg(n,t,le,d,1);else if((n.props&&n.props.to)!==(e.props&&e.props.to)){const z=n.target=Nv(n.props,M);z&&cg(n,z,null,d,0)}else G&&cg(n,ce,xe,d,1);Tg(n,O)}},remove(e,n,t,{um:r,o:{remove:i}},s){const{shapeFlag:o,children:u,anchor:f,targetStart:d,targetAnchor:g,target:y,props:x}=e;if(y&&(i(d),i(g)),s&&i(f),o&16){const _=s||!Kd(x);for(let M=0;M<u.length;M++){const D=u[M];r(D,n,t,_,!!D.dynamicChildren)}}},move:cg,hydrate:JP};function cg(e,n,t,{o:{insert:r},m:i},s=2){s===0&&r(e.targetAnchor,n,t);const{el:o,anchor:u,shapeFlag:f,children:d,props:g}=e,y=s===2;if(y&&r(o,n,t),(!y||Kd(g))&&f&16)for(let x=0;x<d.length;x++)i(d[x],n,t,2);y&&r(u,n,t)}function JP(e,n,t,r,i,s,{o:{nextSibling:o,parentNode:u,querySelector:f,insert:d,createText:g}},y){const x=n.target=Nv(n.props,f);if(x){const _=Kd(n.props),M=x._lpa||x.firstChild;if(n.shapeFlag&16)if(_)n.anchor=y(o(e),n,u(e),t,r,i,s),n.targetStart=M,n.targetAnchor=M&&o(M);else{n.anchor=o(e);let D=M;for(;D;){if(D&&D.nodeType===8){if(D.data==="teleport start anchor")n.targetStart=D;else if(D.data==="teleport anchor"){n.targetAnchor=D,x._lpa=n.targetAnchor&&o(n.targetAnchor);break}}D=o(D)}n.targetAnchor||jw(x,n,g,d),y(M&&o(M),n,x,t,r,i,s)}Tg(n,_)}return n.anchor&&o(n.anchor)}const kg=Fw;function Tg(e,n){const t=e.ctx;if(t&&t.ut){let r,i;for(n?(r=e.el,i=e.anchor):(r=e.targetStart,i=e.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",t.uid),r=r.nextSibling;t.ut()}}function jw(e,n,t,r){const i=n.targetStart=t(""),s=n.targetAnchor=t("");return i[Iw]=s,e&&(r(i,e),r(s,e)),s}const cf=Symbol("_leaveCb"),fg=Symbol("_enterCb");function Y1(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return $s(()=>{e.isMounted=!0}),cd(()=>{e.isUnmounting=!0}),e}const lu=[Function,Array],J1={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:lu,onEnter:lu,onAfterEnter:lu,onEnterCancelled:lu,onBeforeLeave:lu,onLeave:lu,onAfterLeave:lu,onLeaveCancelled:lu,onBeforeAppear:lu,onAppear:lu,onAfterAppear:lu,onAppearCancelled:lu},zw=e=>{const n=e.subTree;return n.component?zw(n.component):n},XP={name:"BaseTransition",props:J1,setup(e,{slots:n}){const t=_u(),r=Y1();return()=>{const i=n.default&&$0(n.default(),!0);if(!i||!i.length)return;const s=$w(i),o=Ti(e),{mode:u}=o;if(r.isLeaving)return Vm(s);const f=V2(s);if(!f)return Vm(s);let d=ed(f,o,r,t,y=>d=y);f.type!==Ns&&$c(f,d);let g=t.subTree&&V2(t.subTree);if(g&&g.type!==Ns&&!ju(f,g)&&zw(t).type!==Ns){let y=ed(g,o,r,t);if($c(g,y),u==="out-in"&&f.type!==Ns)return r.isLeaving=!0,y.afterLeave=()=>{r.isLeaving=!1,t.job.flags&8||t.update(),delete y.afterLeave,g=void 0},Vm(s);u==="in-out"&&f.type!==Ns?y.delayLeave=(x,_,M)=>{const D=Vw(r,g);D[String(g.key)]=g,x[cf]=()=>{_(),x[cf]=void 0,delete d.delayedLeave,g=void 0},d.delayedLeave=()=>{M(),delete d.delayedLeave,g=void 0}}:g=void 0}else g&&(g=void 0);return s}}};function $w(e){let n=e[0];if(e.length>1){for(const t of e)if(t.type!==Ns){n=t;break}}return n}const Uw=XP;function Vw(e,n){const{leavingVNodes:t}=e;let r=t.get(n.type);return r||(r=Object.create(null),t.set(n.type,r)),r}function ed(e,n,t,r,i){const{appear:s,mode:o,persisted:u=!1,onBeforeEnter:f,onEnter:d,onAfterEnter:g,onEnterCancelled:y,onBeforeLeave:x,onLeave:_,onAfterLeave:M,onLeaveCancelled:D,onBeforeAppear:N,onAppear:O,onAfterAppear:F,onAppearCancelled:Y}=n,Q=String(e.key),le=Vw(t,e),ce=(R,Z)=>{R&&vu(R,r,9,Z)},xe=(R,Z)=>{const z=Z[1];ce(R,Z),er(R)?R.every(I=>I.length<=1)&&z():R.length<=1&&z()},G={mode:o,persisted:u,beforeEnter(R){let Z=f;if(!t.isMounted)if(s)Z=N||f;else return;R[cf]&&R[cf](!0);const z=le[Q];z&&ju(e,z)&&z.el[cf]&&z.el[cf](),ce(Z,[R])},enter(R){let Z=d,z=g,I=y;if(!t.isMounted)if(s)Z=O||d,z=F||g,I=Y||y;else return;let $=!1;const U=R[fg]=W=>{$||($=!0,W?ce(I,[R]):ce(z,[R]),G.delayedLeave&&G.delayedLeave(),R[fg]=void 0)};Z?xe(Z,[R,U]):U()},leave(R,Z){const z=String(e.key);if(R[fg]&&R[fg](!0),t.isUnmounting)return Z();ce(x,[R]);let I=!1;const $=R[cf]=U=>{I||(I=!0,Z(),U?ce(D,[R]):ce(M,[R]),R[cf]=void 0,le[z]===e&&delete le[z])};le[z]=e,_?xe(_,[R,$]):$()},clone(R){const Z=ed(R,n,t,r,i);return i&&i(Z),Z}};return G}function Vm(e){if(Pp(e))return e=vc(e),e.children=null,e}function V2(e){if(!Pp(e))return Rw(e.type)&&e.children?$w(e.children):e;const{shapeFlag:n,children:t}=e;if(t){if(n&16)return t[0];if(n&32&&kr(t.default))return t.default()}}function $c(e,n){e.shapeFlag&6&&e.component?(e.transition=n,$c(e.component.subTree,n)):e.shapeFlag&128?(e.ssContent.transition=n.clone(e.ssContent),e.ssFallback.transition=n.clone(e.ssFallback)):e.transition=n}function $0(e,n=!1,t){let r=[],i=0;for(let s=0;s<e.length;s++){let o=e[s];const u=t==null?o.key:String(t)+String(o.key!=null?o.key:s);o.type===Rn?(o.patchFlag&128&&i++,r=r.concat($0(o.children,n,u))):(n||o.type!==Ns)&&r.push(u!=null?vc(o,{key:u}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function us(e,n){return kr(e)?uo({name:e.name},n,{setup:e}):e}function QP(){const e=_u();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function X1(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function e6(e){const n=_u(),t=W1(null);if(n){const i=n.refs===Di?n.refs={}:n.refs;Object.defineProperty(i,e,{enumerable:!0,get:()=>t.value,set:s=>t.value=s})}return t}function mp(e,n,t,r,i=!1){if(er(e)){e.forEach((M,D)=>mp(M,n&&(er(n)?n[D]:n),t,r,i));return}if(yf(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&mp(e,n,t,r.component.subTree);return}const s=r.shapeFlag&4?Ap(r.component):r.el,o=i?null:s,{i:u,r:f}=e,d=n&&n.r,g=u.refs===Di?u.refs={}:u.refs,y=u.setupState,x=Ti(y),_=y===Di?()=>!1:M=>qi(x,M);if(d!=null&&d!==f&&(yo(d)?(g[d]=null,_(d)&&(y[d]=null)):Jo(d)&&(d.value=null)),kr(f))ud(f,u,12,[o,g]);else{const M=yo(f),D=Jo(f);if(M||D){const N=()=>{if(e.f){const O=M?_(f)?y[f]:g[f]:f.value;i?er(O)&&R1(O,s):er(O)?O.includes(s)||O.push(s):M?(g[f]=[s],_(f)&&(y[f]=g[f])):(f.value=[s],e.k&&(g[e.k]=f.value))}else M?(g[f]=o,_(f)&&(y[f]=o)):D&&(f.value=o,e.k&&(g[e.k]=o))};o?(N.id=-1,Fs(N,t)):N()}}}let H2=!1;const Eh=()=>{H2||(console.error("Hydration completed but contains mismatches."),H2=!0)},t6=e=>e.namespaceURI.includes("svg")&&e.tagName!=="foreignObject",n6=e=>e.namespaceURI.includes("MathML"),hg=e=>{if(e.nodeType===1){if(t6(e))return"svg";if(n6(e))return"mathml"}},$h=e=>e.nodeType===8;function r6(e){const{mt:n,p:t,o:{patchProp:r,createText:i,nextSibling:s,parentNode:o,remove:u,insert:f,createComment:d}}=e,g=(Y,Q)=>{if(!Q.hasChildNodes()){t(null,Y,Q),n0(),Q._vnode=Y;return}y(Q.firstChild,Y,null,null,null),n0(),Q._vnode=Y},y=(Y,Q,le,ce,xe,G=!1)=>{G=G||!!Q.dynamicChildren;const R=$h(Y)&&Y.data==="[",Z=()=>D(Y,Q,le,ce,xe,R),{type:z,ref:I,shapeFlag:$,patchFlag:U}=Q;let W=Y.nodeType;Q.el=Y,U===-2&&(G=!1,Q.dynamicChildren=null);let q=null;switch(z){case _f:W!==3?Q.children===""?(f(Q.el=i(""),o(Y),Y),q=Y):q=Z():(Y.data!==Q.children&&(Eh(),Y.data=Q.children),q=s(Y));break;case Ns:F(Y)?(q=s(Y),O(Q.el=Y.content.firstChild,Y,le)):W!==8||R?q=Z():q=s(Y);break;case Qf:if(R&&(Y=s(Y),W=Y.nodeType),W===1||W===3){q=Y;const ie=!Q.children.length;for(let re=0;re<Q.staticCount;re++)ie&&(Q.children+=q.nodeType===1?q.outerHTML:q.data),re===Q.staticCount-1&&(Q.anchor=q),q=s(q);return R?s(q):q}else Z();break;case Rn:R?q=M(Y,Q,le,ce,xe,G):q=Z();break;default:if($&1)(W!==1||Q.type.toLowerCase()!==Y.tagName.toLowerCase())&&!F(Y)?q=Z():q=x(Y,Q,le,ce,xe,G);else if($&6){Q.slotScopeIds=xe;const ie=o(Y);if(R?q=N(Y):$h(Y)&&Y.data==="teleport start"?q=N(Y,Y.data,"teleport end"):q=s(Y),n(Q,ie,null,le,ce,hg(ie),G),yf(Q)&&!Q.type.__asyncResolved){let re;R?(re=fi(Rn),re.anchor=q?q.previousSibling:ie.lastChild):re=Y.nodeType===3?pi(""):fi("div"),re.el=Y,Q.component.subTree=re}}else $&64?W!==8?q=Z():q=Q.type.hydrate(Y,Q,le,ce,xe,G,e,_):$&128&&(q=Q.type.hydrate(Y,Q,le,ce,hg(o(Y)),xe,G,e,y))}return I!=null&&mp(I,null,ce,Q),q},x=(Y,Q,le,ce,xe,G)=>{G=G||!!Q.dynamicChildren;const{type:R,props:Z,patchFlag:z,shapeFlag:I,dirs:$,transition:U}=Q,W=R==="input"||R==="option";if(W||z!==-1){$&&ac(Q,null,le,"created");let q=!1;if(F(Y)){q=v4(null,U)&&le&&le.vnode.props&&le.vnode.props.appear;const re=Y.content.firstChild;q&&U.beforeEnter(re),O(re,Y,le),Q.el=Y=re}if(I&16&&!(Z&&(Z.innerHTML||Z.textContent))){let re=_(Y.firstChild,Q,Y,le,ce,xe,G);for(;re;){dg(Y,1)||Eh();const we=re;re=re.nextSibling,u(we)}}else if(I&8){let re=Q.children;re[0]===`
`&&(Y.tagName==="PRE"||Y.tagName==="TEXTAREA")&&(re=re.slice(1)),Y.textContent!==re&&(dg(Y,0)||Eh(),Y.textContent=Q.children)}if(Z){if(W||!G||z&48){const re=Y.tagName.includes("-");for(const we in Z)(W&&(we.endsWith("value")||we==="indeterminate")||Cp(we)&&!qh(we)||we[0]==="."||re)&&r(Y,we,null,Z[we],void 0,le)}else if(Z.onClick)r(Y,"onClick",null,Z.onClick,void 0,le);else if(z&4&&hc(Z.style))for(const re in Z.style)Z.style[re]}let ie;(ie=Z&&Z.onVnodeBeforeMount)&&Ll(ie,le,Q),$&&ac(Q,null,le,"beforeMount"),((ie=Z&&Z.onVnodeMounted)||$||q)&&E4(()=>{ie&&Ll(ie,le,Q),q&&U.enter(Y),$&&ac(Q,null,le,"mounted")},ce)}return Y.nextSibling},_=(Y,Q,le,ce,xe,G,R)=>{R=R||!!Q.dynamicChildren;const Z=Q.children,z=Z.length;for(let I=0;I<z;I++){const $=R?Z[I]:Z[I]=El(Z[I]),U=$.type===_f;Y?(U&&!R&&I+1<z&&El(Z[I+1]).type===_f&&(f(i(Y.data.slice($.children.length)),le,s(Y)),Y.data=$.children),Y=y(Y,$,ce,xe,G,R)):U&&!$.children?f($.el=i(""),le):(dg(le,1)||Eh(),t(null,$,le,null,ce,xe,hg(le),G))}return Y},M=(Y,Q,le,ce,xe,G)=>{const{slotScopeIds:R}=Q;R&&(xe=xe?xe.concat(R):R);const Z=o(Y),z=_(s(Y),Q,Z,le,ce,xe,G);return z&&$h(z)&&z.data==="]"?s(Q.anchor=z):(Eh(),f(Q.anchor=d("]"),Z,z),z)},D=(Y,Q,le,ce,xe,G)=>{if(dg(Y.parentElement,1)||Eh(),Q.el=null,G){const z=N(Y);for(;;){const I=s(Y);if(I&&I!==z)u(I);else break}}const R=s(Y),Z=o(Y);return u(Y),t(null,Q,Z,R,le,ce,hg(Z),xe),le&&(le.vnode.el=Q.el,G0(le,Q.el)),R},N=(Y,Q="[",le="]")=>{let ce=0;for(;Y;)if(Y=s(Y),Y&&$h(Y)&&(Y.data===Q&&ce++,Y.data===le)){if(ce===0)return s(Y);ce--}return Y},O=(Y,Q,le)=>{const ce=Q.parentNode;ce&&ce.replaceChild(Y,Q);let xe=le;for(;xe;)xe.vnode.el===Q&&(xe.vnode.el=xe.subTree.el=Y),xe=xe.parent},F=Y=>Y.nodeType===1&&Y.tagName==="TEMPLATE";return[g,y]}const G2="data-allow-mismatch",i6={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function dg(e,n){if(n===0||n===1)for(;e&&!e.hasAttribute(G2);)e=e.parentElement;const t=e&&e.getAttribute(G2);if(t==null)return!1;if(t==="")return!0;{const r=t.split(",");return n===0&&r.includes("children")?!0:t.split(",").includes(i6[n])}}const o6=D0().requestIdleCallback||(e=>setTimeout(e,1)),s6=D0().cancelIdleCallback||(e=>clearTimeout(e)),a6=(e=1e4)=>n=>{const t=o6(n,{timeout:e});return()=>s6(t)};function l6(e){const{top:n,left:t,bottom:r,right:i}=e.getBoundingClientRect(),{innerHeight:s,innerWidth:o}=window;return(n>0&&n<s||r>0&&r<s)&&(t>0&&t<o||i>0&&i<o)}const u6=e=>(n,t)=>{const r=new IntersectionObserver(i=>{for(const s of i)if(s.isIntersecting){r.disconnect(),n();break}},e);return t(i=>{if(i instanceof Element){if(l6(i))return n(),r.disconnect(),!1;r.observe(i)}}),()=>r.disconnect()},c6=e=>n=>{if(e){const t=matchMedia(e);if(t.matches)n();else return t.addEventListener("change",n,{once:!0}),()=>t.removeEventListener("change",n)}},f6=(e=[])=>(n,t)=>{yo(e)&&(e=[e]);let r=!1;const i=o=>{r||(r=!0,s(),n(),o.target.dispatchEvent(new o.constructor(o.type,o)))},s=()=>{t(o=>{for(const u of e)o.removeEventListener(u,i)})};return t(o=>{for(const u of e)o.addEventListener(u,i,{once:!0})}),s};function h6(e,n){if($h(e)&&e.data==="["){let t=1,r=e.nextSibling;for(;r;){if(r.nodeType===1){if(n(r)===!1)break}else if($h(r))if(r.data==="]"){if(--t===0)break}else r.data==="["&&t++;r=r.nextSibling}}else n(e)}const yf=e=>!!e.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function d6(e){kr(e)&&(e={loader:e});const{loader:n,loadingComponent:t,errorComponent:r,delay:i=200,hydrate:s,timeout:o,suspensible:u=!0,onError:f}=e;let d=null,g,y=0;const x=()=>(y++,d=null,_()),_=()=>{let M;return d||(M=d=n().catch(D=>{if(D=D instanceof Error?D:new Error(String(D)),f)return new Promise((N,O)=>{f(D,()=>N(x()),()=>O(D),y+1)});throw D}).then(D=>M!==d&&d?d:(D&&(D.__esModule||D[Symbol.toStringTag]==="Module")&&(D=D.default),g=D,D)))};return us({name:"AsyncComponentWrapper",__asyncLoader:_,__asyncHydrate(M,D,N){const O=s?()=>{const F=s(N,Y=>h6(M,Y));F&&(D.bum||(D.bum=[])).push(F)}:N;g?O():_().then(()=>!D.isUnmounted&&O())},get __asyncResolved(){return g},setup(){const M=js;if(X1(M),g)return()=>Hm(g,M);const D=Y=>{d=null,ah(Y,M,13,!r)};if(u&&M.suspense||td)return _().then(Y=>()=>Hm(Y,M)).catch(Y=>(D(Y),()=>r?fi(r,{error:Y}):null));const N=Ft(!1),O=Ft(),F=Ft(!!i);return i&&setTimeout(()=>{F.value=!1},i),o!=null&&setTimeout(()=>{if(!N.value&&!O.value){const Y=new Error(`Async component timed out after ${o}ms.`);D(Y),O.value=Y}},o),_().then(()=>{N.value=!0,M.parent&&Pp(M.parent.vnode)&&M.parent.update()}).catch(Y=>{D(Y),O.value=Y}),()=>{if(N.value&&g)return Hm(g,M);if(O.value&&r)return fi(r,{error:O.value});if(t&&!F.value)return fi(t)}}})}function Hm(e,n){const{ref:t,props:r,children:i,ce:s}=n.vnode,o=fi(e,r,i);return o.ref=t,o.ce=s,delete n.vnode.ce,o}const Pp=e=>e.type.__isKeepAlive,p6={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:n}){const t=_u(),r=t.ctx;if(!r.renderer)return()=>{const F=n.default&&n.default();return F&&F.length===1?F[0]:F};const i=new Map,s=new Set;let o=null;const u=t.suspense,{renderer:{p:f,m:d,um:g,o:{createElement:y}}}=r,x=y("div");r.activate=(F,Y,Q,le,ce)=>{const xe=F.component;d(F,Y,Q,0,u),f(xe.vnode,F,Y,Q,xe,u,le,F.slotScopeIds,ce),Fs(()=>{xe.isDeactivated=!1,xe.a&&Wh(xe.a);const G=F.props&&F.props.onVnodeMounted;G&&Ll(G,xe.parent,F)},u)},r.deactivate=F=>{const Y=F.component;i0(Y.m),i0(Y.a),d(F,x,null,1,u),Fs(()=>{Y.da&&Wh(Y.da);const Q=F.props&&F.props.onVnodeUnmounted;Q&&Ll(Q,Y.parent,F),Y.isDeactivated=!0},u)};function _(F){Gm(F),g(F,t,u,!0)}function M(F){i.forEach((Y,Q)=>{const le=Gv(Y.type);le&&!F(le)&&D(Q)})}function D(F){const Y=i.get(F);Y&&(!o||!ju(Y,o))?_(Y):o&&Gm(o),i.delete(F),s.delete(F)}So(()=>[e.include,e.exclude],([F,Y])=>{F&&M(Q=>Id(F,Q)),Y&&M(Q=>!Id(Y,Q))},{flush:"post",deep:!0});let N=null;const O=()=>{N!=null&&(o0(t.subTree.type)?Fs(()=>{i.set(N,pg(t.subTree))},t.subTree.suspense):i.set(N,pg(t.subTree)))};return $s(O),V0(O),cd(()=>{i.forEach(F=>{const{subTree:Y,suspense:Q}=t,le=pg(Y);if(F.type===le.type&&F.key===le.key){Gm(le);const ce=le.component.da;ce&&Fs(ce,Q);return}_(F)})}),()=>{if(N=null,!n.default)return o=null;const F=n.default(),Y=F[0];if(F.length>1)return o=null,F;if(!Uc(Y)||!(Y.shapeFlag&4)&&!(Y.shapeFlag&128))return o=null,Y;let Q=pg(Y);if(Q.type===Ns)return o=null,Q;const le=Q.type,ce=Gv(yf(Q)?Q.type.__asyncResolved||{}:le),{include:xe,exclude:G,max:R}=e;if(xe&&(!ce||!Id(xe,ce))||G&&ce&&Id(G,ce))return Q.shapeFlag&=-257,o=Q,Y;const Z=Q.key==null?le:Q.key,z=i.get(Z);return Q.el&&(Q=vc(Q),Y.shapeFlag&128&&(Y.ssContent=Q)),N=Z,z?(Q.el=z.el,Q.component=z.component,Q.transition&&$c(Q,Q.transition),Q.shapeFlag|=512,s.delete(Z),s.add(Z)):(s.add(Z),R&&s.size>parseInt(R,10)&&D(s.values().next().value)),Q.shapeFlag|=256,o=Q,o0(Y.type)?Y:Q}}},g6=p6;function Id(e,n){return er(e)?e.some(t=>Id(t,n)):yo(e)?e.split(",").includes(n):GE(e)?(e.lastIndex=0,e.test(n)):!1}function Hw(e,n){qw(e,"a",n)}function Gw(e,n){qw(e,"da",n)}function qw(e,n,t=js){const r=e.__wdc||(e.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(U0(n,r,t),t){let i=t.parent;for(;i&&i.parent;)Pp(i.parent.vnode)&&m6(r,n,t,i),i=i.parent}}function m6(e,n,t,r){const i=U0(n,e,r,!0);mc(()=>{R1(r[n],i)},t)}function Gm(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function pg(e){return e.shapeFlag&128?e.ssContent:e}function U0(e,n,t=js,r=!1){if(t){const i=t[e]||(t[e]=[]),s=n.__weh||(n.__weh=(...o)=>{Pf();const u=ih(t),f=vu(n,t,e,o);return u(),Mf(),f});return r?i.unshift(s):i.push(s),s}}const Gc=e=>(n,t=js)=>{(!td||e==="sp")&&U0(e,(...r)=>n(...r),t)},Ww=Gc("bm"),$s=Gc("m"),Q1=Gc("bu"),V0=Gc("u"),cd=Gc("bum"),mc=Gc("um"),Zw=Gc("sp"),Kw=Gc("rtg"),Yw=Gc("rtc");function Jw(e,n=js){U0("ec",e,n)}const ey="components",v6="directives";function Xw(e,n){return ty(ey,e,!0,n)||e}const Qw=Symbol.for("v-ndc");function y6(e){return yo(e)?ty(ey,e,!1)||e:e||Qw}function _6(e){return ty(v6,e)}function ty(e,n,t=!0,r=!1){const i=zs||js;if(i){const s=i.type;if(e===ey){const u=Gv(s,!1);if(u&&(u===n||u===ma(n)||u===Ep(ma(n))))return s}const o=q2(i[e]||s[e],n)||q2(i.appContext[e],n);return!o&&r?s:o}}function q2(e,n){return e&&(e[n]||e[ma(n)]||e[Ep(ma(n))])}function Br(e,n,t,r){let i;const s=t&&t[r],o=er(e);if(o||yo(e)){const u=o&&hc(e);let f=!1;u&&(f=!Zl(e),e=O0(e)),i=new Array(e.length);for(let d=0,g=e.length;d<g;d++)i[d]=n(f?Ra(e[d]):e[d],d,void 0,s&&s[d])}else if(typeof e=="number"){i=new Array(e);for(let u=0;u<e;u++)i[u]=n(u+1,u,void 0,s&&s[u])}else if(Ji(e))if(e[Symbol.iterator])i=Array.from(e,(u,f)=>n(u,f,void 0,s&&s[f]));else{const u=Object.keys(e);i=new Array(u.length);for(let f=0,d=u.length;f<d;f++){const g=u[f];i[f]=n(e[g],g,f,s&&s[f])}}else i=[];return t&&(t[r]=i),i}function e4(e,n){for(let t=0;t<n.length;t++){const r=n[t];if(er(r))for(let i=0;i<r.length;i++)e[r[i].name]=r[i].fn;else r&&(e[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return e}function b6(e,n,t={},r,i){if(zs.ce||zs.parent&&yf(zs.parent)&&zs.parent.ce)return n!=="default"&&(t.name=n),$e(),Ua(Rn,null,[fi("slot",t,r&&r())],64);let s=e[n];s&&s._c&&(s._d=!1),$e();const o=s&&ny(s(t)),u=t.key||o&&o.key,f=Ua(Rn,{key:(u&&!Uu(u)?u:`_${n}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&e._===1?64:-2);return!i&&f.scopeId&&(f.slotScopeIds=[f.scopeId+"-s"]),s&&s._c&&(s._d=!0),f}function ny(e){return e.some(n=>Uc(n)?!(n.type===Ns||n.type===Rn&&!ny(n.children)):!0)?e:null}function w6(e,n){const t={};for(const r in e)t[n&&/[A-Z]/.test(r)?`on:${r}`:qd(r)]=e[r];return t}const Bv=e=>e?N4(e)?Ap(e):Bv(e.parent):null,Yd=uo(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Bv(e.parent),$root:e=>Bv(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ry(e),$forceUpdate:e=>e.f||(e.f=()=>{K1(e.update)}),$nextTick:e=>e.n||(e.n=Xs.bind(e.proxy)),$watch:e=>J6.bind(e)}),qm=(e,n)=>e!==Di&&!e.__isScriptSetup&&qi(e,n),Ov={get({_:e},n){if(n==="__v_skip")return!0;const{ctx:t,setupState:r,data:i,props:s,accessCache:o,type:u,appContext:f}=e;let d;if(n[0]!=="$"){const _=o[n];if(_!==void 0)switch(_){case 1:return r[n];case 2:return i[n];case 4:return t[n];case 3:return s[n]}else{if(qm(r,n))return o[n]=1,r[n];if(i!==Di&&qi(i,n))return o[n]=2,i[n];if((d=e.propsOptions[0])&&qi(d,n))return o[n]=3,s[n];if(t!==Di&&qi(t,n))return o[n]=4,t[n];Iv&&(o[n]=0)}}const g=Yd[n];let y,x;if(g)return n==="$attrs"&&Ia(e.attrs,"get",""),g(e);if((y=u.__cssModules)&&(y=y[n]))return y;if(t!==Di&&qi(t,n))return o[n]=4,t[n];if(x=f.config.globalProperties,qi(x,n))return x[n]},set({_:e},n,t){const{data:r,setupState:i,ctx:s}=e;return qm(i,n)?(i[n]=t,!0):r!==Di&&qi(r,n)?(r[n]=t,!0):qi(e.props,n)||n[0]==="$"&&n.slice(1)in e?!1:(s[n]=t,!0)},has({_:{data:e,setupState:n,accessCache:t,ctx:r,appContext:i,propsOptions:s}},o){let u;return!!t[o]||e!==Di&&qi(e,o)||qm(n,o)||(u=s[0])&&qi(u,o)||qi(r,o)||qi(Yd,o)||qi(i.config.globalProperties,o)},defineProperty(e,n,t){return t.get!=null?e._.accessCache[n]=0:qi(t,"value")&&this.set(e,n,t.value,null),Reflect.defineProperty(e,n,t)}},x6=uo({},Ov,{get(e,n){if(n!==Symbol.unscopables)return Ov.get(e,n,e)},has(e,n){return n[0]!=="_"&&!YE(n)}});function L6(){return null}function S6(){return null}function C6(e){}function E6(e){}function P6(){return null}function M6(){}function A6(e,n){return null}function k6(){return t4().slots}function T6(){return t4().attrs}function t4(){const e=_u();return e.setupContext||(e.setupContext=I4(e))}function vp(e){return er(e)?e.reduce((n,t)=>(n[t]=null,n),{}):e}function D6(e,n){const t=vp(e);for(const r in n){if(r.startsWith("__skip"))continue;let i=t[r];i?er(i)||kr(i)?i=t[r]={type:i,default:n[r]}:i.default=n[r]:i===null&&(i=t[r]={default:n[r]}),i&&n[`__skip_${r}`]&&(i.skipFactory=!0)}return t}function N6(e,n){return!e||!n?e||n:er(e)&&er(n)?e.concat(n):uo({},vp(e),vp(n))}function B6(e,n){const t={};for(const r in e)n.includes(r)||Object.defineProperty(t,r,{enumerable:!0,get:()=>e[r]});return t}function O6(e){const n=_u();let t=e();return Uv(),F1(t)&&(t=t.catch(r=>{throw ih(n),r})),[t,()=>ih(n)]}let Iv=!0;function I6(e){const n=ry(e),t=e.proxy,r=e.ctx;Iv=!1,n.beforeCreate&&W2(n.beforeCreate,e,"bc");const{data:i,computed:s,methods:o,watch:u,provide:f,inject:d,created:g,beforeMount:y,mounted:x,beforeUpdate:_,updated:M,activated:D,deactivated:N,beforeDestroy:O,beforeUnmount:F,destroyed:Y,unmounted:Q,render:le,renderTracked:ce,renderTriggered:xe,errorCaptured:G,serverPrefetch:R,expose:Z,inheritAttrs:z,components:I,directives:$,filters:U}=n;if(d&&R6(d,r,null),o)for(const ie in o){const re=o[ie];kr(re)&&(r[ie]=re.bind(t))}if(i){const ie=i.call(t,t);Ji(ie)&&(e.data=Jl(ie))}if(Iv=!0,s)for(const ie in s){const re=s[ie],we=kr(re)?re.bind(t,t):kr(re.get)?re.get.bind(t,t):gu,Pe=!kr(re)&&kr(re.set)?re.set.bind(t):gu,Ie=gr({get:we,set:Pe});Object.defineProperty(r,ie,{enumerable:!0,configurable:!0,get:()=>Ie.value,set:A=>Ie.value=A})}if(u)for(const ie in u)n4(u[ie],r,t,ie);if(f){const ie=kr(f)?f.call(t):f;Reflect.ownKeys(ie).forEach(re=>{Jd(re,ie[re])})}g&&W2(g,e,"c");function q(ie,re){er(re)?re.forEach(we=>ie(we.bind(t))):re&&ie(re.bind(t))}if(q(Ww,y),q($s,x),q(Q1,_),q(V0,M),q(Hw,D),q(Gw,N),q(Jw,G),q(Yw,ce),q(Kw,xe),q(cd,F),q(mc,Q),q(Zw,R),er(Z))if(Z.length){const ie=e.exposed||(e.exposed={});Z.forEach(re=>{Object.defineProperty(ie,re,{get:()=>t[re],set:we=>t[re]=we})})}else e.exposed||(e.exposed={});le&&e.render===gu&&(e.render=le),z!=null&&(e.inheritAttrs=z),I&&(e.components=I),$&&(e.directives=$),R&&X1(e)}function R6(e,n,t=gu){er(e)&&(e=Rv(e));for(const r in e){const i=e[r];let s;Ji(i)?"default"in i?s=Kl(i.from||r,i.default,!0):s=Kl(i.from||r):s=Kl(i),Jo(s)?Object.defineProperty(n,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):n[r]=s}}function W2(e,n,t){vu(er(e)?e.map(r=>r.bind(n.proxy)):e.bind(n.proxy),n,t)}function n4(e,n,t,r){let i=r.includes(".")?x4(t,r):()=>t[r];if(yo(e)){const s=n[e];kr(s)&&So(i,s)}else if(kr(e))So(i,e.bind(t));else if(Ji(e))if(er(e))e.forEach(s=>n4(s,n,t,r));else{const s=kr(e.handler)?e.handler.bind(t):n[e.handler];kr(s)&&So(i,s,e)}}function ry(e){const n=e.type,{mixins:t,extends:r}=n,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,u=s.get(n);let f;return u?f=u:!i.length&&!t&&!r?f=n:(f={},i.length&&i.forEach(d=>r0(f,d,o,!0)),r0(f,n,o)),Ji(n)&&s.set(n,f),f}function r0(e,n,t,r=!1){const{mixins:i,extends:s}=n;s&&r0(e,s,t,!0),i&&i.forEach(o=>r0(e,o,t,!0));for(const o in n)if(!(r&&o==="expose")){const u=F6[o]||t&&t[o];e[o]=u?u(e[o],n[o]):n[o]}return e}const F6={data:Z2,props:K2,emits:K2,methods:Rd,computed:Rd,beforeCreate:Ja,created:Ja,beforeMount:Ja,mounted:Ja,beforeUpdate:Ja,updated:Ja,beforeDestroy:Ja,beforeUnmount:Ja,destroyed:Ja,unmounted:Ja,activated:Ja,deactivated:Ja,errorCaptured:Ja,serverPrefetch:Ja,components:Rd,directives:Rd,watch:z6,provide:Z2,inject:j6};function Z2(e,n){return n?e?function(){return uo(kr(e)?e.call(this,this):e,kr(n)?n.call(this,this):n)}:n:e}function j6(e,n){return Rd(Rv(e),Rv(n))}function Rv(e){if(er(e)){const n={};for(let t=0;t<e.length;t++)n[e[t]]=e[t];return n}return e}function Ja(e,n){return e?[...new Set([].concat(e,n))]:n}function Rd(e,n){return e?uo(Object.create(null),e,n):n}function K2(e,n){return e?er(e)&&er(n)?[...new Set([...e,...n])]:uo(Object.create(null),vp(e),vp(n??{})):n}function z6(e,n){if(!e)return n;if(!n)return e;const t=uo(Object.create(null),e);for(const r in n)t[r]=Ja(e[r],n[r]);return t}function r4(){return{app:null,config:{isNativeTag:VE,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let $6=0;function U6(e,n){return function(r,i=null){kr(r)||(r=uo({},r)),i!=null&&!Ji(i)&&(i=null);const s=r4(),o=new WeakSet,u=[];let f=!1;const d=s.app={_uid:$6++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:F4,get config(){return s.config},set config(g){},use(g,...y){return o.has(g)||(g&&kr(g.install)?(o.add(g),g.install(d,...y)):kr(g)&&(o.add(g),g(d,...y))),d},mixin(g){return s.mixins.includes(g)||s.mixins.push(g),d},component(g,y){return y?(s.components[g]=y,d):s.components[g]},directive(g,y){return y?(s.directives[g]=y,d):s.directives[g]},mount(g,y,x){if(!f){const _=d._ceVNode||fi(r,i);return _.appContext=s,x===!0?x="svg":x===!1&&(x=void 0),y&&n?n(_,g):e(_,g,x),f=!0,d._container=g,g.__vue_app__=d,Ap(_.component)}},onUnmount(g){u.push(g)},unmount(){f&&(vu(u,d._instance,16),e(null,d._container),delete d._container.__vue_app__)},provide(g,y){return s.provides[g]=y,d},runWithContext(g){const y=Xf;Xf=d;try{return g()}finally{Xf=y}}};return d}}let Xf=null;function Jd(e,n){if(js){let t=js.provides;const r=js.parent&&js.parent.provides;r===t&&(t=js.provides=Object.create(r)),t[e]=n}}function Kl(e,n,t=!1){const r=js||zs;if(r||Xf){const i=Xf?Xf._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return t&&kr(n)?n.call(r&&r.proxy):n}}function i4(){return!!(js||zs||Xf)}const o4={},s4=()=>Object.create(o4),a4=e=>Object.getPrototypeOf(e)===o4;function V6(e,n,t,r=!1){const i={},s=s4();e.propsDefaults=Object.create(null),l4(e,n,i,s);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);t?e.props=r?i:q1(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function H6(e,n,t,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=e,u=Ti(i),[f]=e.propsOptions;let d=!1;if((r||o>0)&&!(o&16)){if(o&8){const g=e.vnode.dynamicProps;for(let y=0;y<g.length;y++){let x=g[y];if(H0(e.emitsOptions,x))continue;const _=n[x];if(f)if(qi(s,x))_!==s[x]&&(s[x]=_,d=!0);else{const M=ma(x);i[M]=Fv(f,u,M,_,e,!1)}else _!==s[x]&&(s[x]=_,d=!0)}}}else{l4(e,n,i,s)&&(d=!0);let g;for(const y in u)(!n||!qi(n,y)&&((g=Pl(y))===y||!qi(n,g)))&&(f?t&&(t[y]!==void 0||t[g]!==void 0)&&(i[y]=Fv(f,u,y,void 0,e,!0)):delete i[y]);if(s!==u)for(const y in s)(!n||!qi(n,y))&&(delete s[y],d=!0)}d&&Rc(e.attrs,"set","")}function l4(e,n,t,r){const[i,s]=e.propsOptions;let o=!1,u;if(n)for(let f in n){if(qh(f))continue;const d=n[f];let g;i&&qi(i,g=ma(f))?!s||!s.includes(g)?t[g]=d:(u||(u={}))[g]=d:H0(e.emitsOptions,f)||(!(f in r)||d!==r[f])&&(r[f]=d,o=!0)}if(s){const f=Ti(t),d=u||Di;for(let g=0;g<s.length;g++){const y=s[g];t[y]=Fv(i,f,y,d[y],e,!qi(d,y))}}return o}function Fv(e,n,t,r,i,s){const o=e[t];if(o!=null){const u=qi(o,"default");if(u&&r===void 0){const f=o.default;if(o.type!==Function&&!o.skipFactory&&kr(f)){const{propsDefaults:d}=i;if(t in d)r=d[t];else{const g=ih(i);r=d[t]=f.call(null,n),g()}}else r=f;i.ce&&i.ce._setProp(t,r)}o[0]&&(s&&!u?r=!1:o[1]&&(r===""||r===Pl(t))&&(r=!0))}return r}const G6=new WeakMap;function u4(e,n,t=!1){const r=t?G6:n.propsCache,i=r.get(e);if(i)return i;const s=e.props,o={},u=[];let f=!1;if(!kr(e)){const g=y=>{f=!0;const[x,_]=u4(y,n,!0);uo(o,x),_&&u.push(..._)};!t&&n.mixins.length&&n.mixins.forEach(g),e.extends&&g(e.extends),e.mixins&&e.mixins.forEach(g)}if(!s&&!f)return Ji(e)&&r.set(e,Hh),Hh;if(er(s))for(let g=0;g<s.length;g++){const y=ma(s[g]);Y2(y)&&(o[y]=Di)}else if(s)for(const g in s){const y=ma(g);if(Y2(y)){const x=s[g],_=o[y]=er(x)||kr(x)?{type:x}:uo({},x),M=_.type;let D=!1,N=!0;if(er(M))for(let O=0;O<M.length;++O){const F=M[O],Y=kr(F)&&F.name;if(Y==="Boolean"){D=!0;break}else Y==="String"&&(N=!1)}else D=kr(M)&&M.name==="Boolean";_[0]=D,_[1]=N,(D||qi(_,"default"))&&u.push(y)}}const d=[o,u];return Ji(e)&&r.set(e,d),d}function Y2(e){return e[0]!=="$"&&!qh(e)}const c4=e=>e[0]==="_"||e==="$stable",iy=e=>er(e)?e.map(El):[El(e)],q6=(e,n,t)=>{if(n._n)return n;const r=ql((...i)=>iy(n(...i)),t);return r._c=!1,r},f4=(e,n,t)=>{const r=e._ctx;for(const i in e){if(c4(i))continue;const s=e[i];if(kr(s))n[i]=q6(i,s,r);else if(s!=null){const o=iy(s);n[i]=()=>o}}},h4=(e,n)=>{const t=iy(n);e.slots.default=()=>t},d4=(e,n,t)=>{for(const r in n)(t||r!=="_")&&(e[r]=n[r])},W6=(e,n,t)=>{const r=e.slots=s4();if(e.vnode.shapeFlag&32){const i=n._;i?(d4(r,n,t),t&&sw(r,"_",i,!0)):f4(n,r)}else n&&h4(e,n)},Z6=(e,n,t)=>{const{vnode:r,slots:i}=e;let s=!0,o=Di;if(r.shapeFlag&32){const u=n._;u?t&&u===1?s=!1:d4(i,n,t):(s=!n.$stable,f4(n,i)),o=n}else n&&(h4(e,n),o={default:1});if(s)for(const u in i)!c4(u)&&o[u]==null&&delete i[u]},Fs=E4;function p4(e){return m4(e)}function g4(e){return m4(e,r6)}function m4(e,n){const t=D0();t.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:u,createComment:f,setText:d,setElementText:g,parentNode:y,nextSibling:x,setScopeId:_=gu,insertStaticContent:M}=e,D=(K,pe,ve,ge=null,Ue=null,Qe=null,Ke=void 0,Ge=null,Xe=!!pe.dynamicChildren)=>{if(K===pe)return;K&&!ju(K,pe)&&(ge=ae(K),A(K,Ue,Qe,!0),K=null),pe.patchFlag===-2&&(Xe=!1,pe.dynamicChildren=null);const{type:ot,ref:kt,shapeFlag:Ct}=pe;switch(ot){case _f:N(K,pe,ve,ge);break;case Ns:O(K,pe,ve,ge);break;case Qf:K==null&&F(pe,ve,ge,Ke);break;case Rn:I(K,pe,ve,ge,Ue,Qe,Ke,Ge,Xe);break;default:Ct&1?le(K,pe,ve,ge,Ue,Qe,Ke,Ge,Xe):Ct&6?$(K,pe,ve,ge,Ue,Qe,Ke,Ge,Xe):(Ct&64||Ct&128)&&ot.process(K,pe,ve,ge,Ue,Qe,Ke,Ge,Xe,ke)}kt!=null&&Ue&&mp(kt,K&&K.ref,Qe,pe||K,!pe)},N=(K,pe,ve,ge)=>{if(K==null)r(pe.el=u(pe.children),ve,ge);else{const Ue=pe.el=K.el;pe.children!==K.children&&d(Ue,pe.children)}},O=(K,pe,ve,ge)=>{K==null?r(pe.el=f(pe.children||""),ve,ge):pe.el=K.el},F=(K,pe,ve,ge)=>{[K.el,K.anchor]=M(K.children,pe,ve,ge,K.el,K.anchor)},Y=({el:K,anchor:pe},ve,ge)=>{let Ue;for(;K&&K!==pe;)Ue=x(K),r(K,ve,ge),K=Ue;r(pe,ve,ge)},Q=({el:K,anchor:pe})=>{let ve;for(;K&&K!==pe;)ve=x(K),i(K),K=ve;i(pe)},le=(K,pe,ve,ge,Ue,Qe,Ke,Ge,Xe)=>{pe.type==="svg"?Ke="svg":pe.type==="math"&&(Ke="mathml"),K==null?ce(pe,ve,ge,Ue,Qe,Ke,Ge,Xe):R(K,pe,Ue,Qe,Ke,Ge,Xe)},ce=(K,pe,ve,ge,Ue,Qe,Ke,Ge)=>{let Xe,ot;const{props:kt,shapeFlag:Ct,transition:Ut,dirs:Gt}=K;if(Xe=K.el=o(K.type,Qe,kt&&kt.is,kt),Ct&8?g(Xe,K.children):Ct&16&&G(K.children,Xe,null,ge,Ue,Wm(K,Qe),Ke,Ge),Gt&&ac(K,null,ge,"created"),xe(Xe,K,K.scopeId,Ke,ge),kt){for(const pn in kt)pn!=="value"&&!qh(pn)&&s(Xe,pn,null,kt[pn],Qe,ge);"value"in kt&&s(Xe,"value",null,kt.value,Qe),(ot=kt.onVnodeBeforeMount)&&Ll(ot,ge,K)}Gt&&ac(K,null,ge,"beforeMount");const fn=v4(Ue,Ut);fn&&Ut.beforeEnter(Xe),r(Xe,pe,ve),((ot=kt&&kt.onVnodeMounted)||fn||Gt)&&Fs(()=>{ot&&Ll(ot,ge,K),fn&&Ut.enter(Xe),Gt&&ac(K,null,ge,"mounted")},Ue)},xe=(K,pe,ve,ge,Ue)=>{if(ve&&_(K,ve),ge)for(let Qe=0;Qe<ge.length;Qe++)_(K,ge[Qe]);if(Ue){let Qe=Ue.subTree;if(pe===Qe||o0(Qe.type)&&(Qe.ssContent===pe||Qe.ssFallback===pe)){const Ke=Ue.vnode;xe(K,Ke,Ke.scopeId,Ke.slotScopeIds,Ue.parent)}}},G=(K,pe,ve,ge,Ue,Qe,Ke,Ge,Xe=0)=>{for(let ot=Xe;ot<K.length;ot++){const kt=K[ot]=Ge?ff(K[ot]):El(K[ot]);D(null,kt,pe,ve,ge,Ue,Qe,Ke,Ge)}},R=(K,pe,ve,ge,Ue,Qe,Ke)=>{const Ge=pe.el=K.el;let{patchFlag:Xe,dynamicChildren:ot,dirs:kt}=pe;Xe|=K.patchFlag&16;const Ct=K.props||Di,Ut=pe.props||Di;let Gt;if(ve&&jf(ve,!1),(Gt=Ut.onVnodeBeforeUpdate)&&Ll(Gt,ve,pe,K),kt&&ac(pe,K,ve,"beforeUpdate"),ve&&jf(ve,!0),(Ct.innerHTML&&Ut.innerHTML==null||Ct.textContent&&Ut.textContent==null)&&g(Ge,""),ot?Z(K.dynamicChildren,ot,Ge,ve,ge,Wm(pe,Ue),Qe):Ke||re(K,pe,Ge,null,ve,ge,Wm(pe,Ue),Qe,!1),Xe>0){if(Xe&16)z(Ge,Ct,Ut,ve,Ue);else if(Xe&2&&Ct.class!==Ut.class&&s(Ge,"class",null,Ut.class,Ue),Xe&4&&s(Ge,"style",Ct.style,Ut.style,Ue),Xe&8){const fn=pe.dynamicProps;for(let pn=0;pn<fn.length;pn++){const et=fn[pn],it=Ct[et],nt=Ut[et];(nt!==it||et==="value")&&s(Ge,et,it,nt,Ue,ve)}}Xe&1&&K.children!==pe.children&&g(Ge,pe.children)}else!Ke&&ot==null&&z(Ge,Ct,Ut,ve,Ue);((Gt=Ut.onVnodeUpdated)||kt)&&Fs(()=>{Gt&&Ll(Gt,ve,pe,K),kt&&ac(pe,K,ve,"updated")},ge)},Z=(K,pe,ve,ge,Ue,Qe,Ke)=>{for(let Ge=0;Ge<pe.length;Ge++){const Xe=K[Ge],ot=pe[Ge],kt=Xe.el&&(Xe.type===Rn||!ju(Xe,ot)||Xe.shapeFlag&70)?y(Xe.el):ve;D(Xe,ot,kt,null,ge,Ue,Qe,Ke,!0)}},z=(K,pe,ve,ge,Ue)=>{if(pe!==ve){if(pe!==Di)for(const Qe in pe)!qh(Qe)&&!(Qe in ve)&&s(K,Qe,pe[Qe],null,Ue,ge);for(const Qe in ve){if(qh(Qe))continue;const Ke=ve[Qe],Ge=pe[Qe];Ke!==Ge&&Qe!=="value"&&s(K,Qe,Ge,Ke,Ue,ge)}"value"in ve&&s(K,"value",pe.value,ve.value,Ue)}},I=(K,pe,ve,ge,Ue,Qe,Ke,Ge,Xe)=>{const ot=pe.el=K?K.el:u(""),kt=pe.anchor=K?K.anchor:u("");let{patchFlag:Ct,dynamicChildren:Ut,slotScopeIds:Gt}=pe;Gt&&(Ge=Ge?Ge.concat(Gt):Gt),K==null?(r(ot,ve,ge),r(kt,ve,ge),G(pe.children||[],ve,kt,Ue,Qe,Ke,Ge,Xe)):Ct>0&&Ct&64&&Ut&&K.dynamicChildren?(Z(K.dynamicChildren,Ut,ve,Ue,Qe,Ke,Ge),(pe.key!=null||Ue&&pe===Ue.subTree)&&oy(K,pe,!0)):re(K,pe,ve,kt,Ue,Qe,Ke,Ge,Xe)},$=(K,pe,ve,ge,Ue,Qe,Ke,Ge,Xe)=>{pe.slotScopeIds=Ge,K==null?pe.shapeFlag&512?Ue.ctx.activate(pe,ve,ge,Ke,Xe):U(pe,ve,ge,Ue,Qe,Ke,Xe):W(K,pe,Xe)},U=(K,pe,ve,ge,Ue,Qe,Ke)=>{const Ge=K.component=D4(K,ge,Ue);if(Pp(K)&&(Ge.ctx.renderer=ke),B4(Ge,!1,Ke),Ge.asyncDep){if(Ue&&Ue.registerDep(Ge,q,Ke),!K.el){const Xe=Ge.subTree=fi(Ns);O(null,Xe,pe,ve)}}else q(Ge,K,pe,ve,Ue,Qe,Ke)},W=(K,pe,ve)=>{const ge=pe.component=K.component;if(rM(K,pe,ve))if(ge.asyncDep&&!ge.asyncResolved){ie(ge,pe,ve);return}else ge.next=pe,ge.update();else pe.el=K.el,ge.vnode=pe},q=(K,pe,ve,ge,Ue,Qe,Ke)=>{const Ge=()=>{if(K.isMounted){let{next:Ct,bu:Ut,u:Gt,parent:fn,vnode:pn}=K;{const Qt=y4(K);if(Qt){Ct&&(Ct.el=pn.el,ie(K,Ct,Ke)),Qt.asyncDep.then(()=>{K.isUnmounted||Ge()});return}}let et=Ct,it;jf(K,!1),Ct?(Ct.el=pn.el,ie(K,Ct,Ke)):Ct=pn,Ut&&Wh(Ut),(it=Ct.props&&Ct.props.onVnodeBeforeUpdate)&&Ll(it,fn,Ct,pn),jf(K,!0);const nt=Dg(K),Vt=K.subTree;K.subTree=nt,D(Vt,nt,y(Vt.el),ae(Vt),K,Ue,Qe),Ct.el=nt.el,et===null&&G0(K,nt.el),Gt&&Fs(Gt,Ue),(it=Ct.props&&Ct.props.onVnodeUpdated)&&Fs(()=>Ll(it,fn,Ct,pn),Ue)}else{let Ct;const{el:Ut,props:Gt}=pe,{bm:fn,m:pn,parent:et,root:it,type:nt}=K,Vt=yf(pe);if(jf(K,!1),fn&&Wh(fn),!Vt&&(Ct=Gt&&Gt.onVnodeBeforeMount)&&Ll(Ct,et,pe),jf(K,!0),Ut&&Ve){const Qt=()=>{K.subTree=Dg(K),Ve(Ut,K.subTree,K,Ue,null)};Vt&&nt.__asyncHydrate?nt.__asyncHydrate(Ut,K,Qt):Qt()}else{it.ce&&it.ce._injectChildStyle(nt);const Qt=K.subTree=Dg(K);D(null,Qt,ve,ge,K,Ue,Qe),pe.el=Qt.el}if(pn&&Fs(pn,Ue),!Vt&&(Ct=Gt&&Gt.onVnodeMounted)){const Qt=pe;Fs(()=>Ll(Ct,et,Qt),Ue)}(pe.shapeFlag&256||et&&yf(et.vnode)&&et.vnode.shapeFlag&256)&&K.a&&Fs(K.a,Ue),K.isMounted=!0,pe=ve=ge=null}};K.scope.on();const Xe=K.effect=new cp(Ge);K.scope.off();const ot=K.update=Xe.run.bind(Xe),kt=K.job=Xe.runIfDirty.bind(Xe);kt.i=K,kt.id=K.uid,Xe.scheduler=()=>K1(kt),jf(K,!0),ot()},ie=(K,pe,ve)=>{pe.component=K;const ge=K.vnode.props;K.vnode=pe,K.next=null,H6(K,pe.props,ge,ve),Z6(K,pe.children,ve),Pf(),j2(K),Mf()},re=(K,pe,ve,ge,Ue,Qe,Ke,Ge,Xe=!1)=>{const ot=K&&K.children,kt=K?K.shapeFlag:0,Ct=pe.children,{patchFlag:Ut,shapeFlag:Gt}=pe;if(Ut>0){if(Ut&128){Pe(ot,Ct,ve,ge,Ue,Qe,Ke,Ge,Xe);return}else if(Ut&256){we(ot,Ct,ve,ge,Ue,Qe,Ke,Ge,Xe);return}}Gt&8?(kt&16&&he(ot,Ue,Qe),Ct!==ot&&g(ve,Ct)):kt&16?Gt&16?Pe(ot,Ct,ve,ge,Ue,Qe,Ke,Ge,Xe):he(ot,Ue,Qe,!0):(kt&8&&g(ve,""),Gt&16&&G(Ct,ve,ge,Ue,Qe,Ke,Ge,Xe))},we=(K,pe,ve,ge,Ue,Qe,Ke,Ge,Xe)=>{K=K||Hh,pe=pe||Hh;const ot=K.length,kt=pe.length,Ct=Math.min(ot,kt);let Ut;for(Ut=0;Ut<Ct;Ut++){const Gt=pe[Ut]=Xe?ff(pe[Ut]):El(pe[Ut]);D(K[Ut],Gt,ve,null,Ue,Qe,Ke,Ge,Xe)}ot>kt?he(K,Ue,Qe,!0,!1,Ct):G(pe,ve,ge,Ue,Qe,Ke,Ge,Xe,Ct)},Pe=(K,pe,ve,ge,Ue,Qe,Ke,Ge,Xe)=>{let ot=0;const kt=pe.length;let Ct=K.length-1,Ut=kt-1;for(;ot<=Ct&&ot<=Ut;){const Gt=K[ot],fn=pe[ot]=Xe?ff(pe[ot]):El(pe[ot]);if(ju(Gt,fn))D(Gt,fn,ve,null,Ue,Qe,Ke,Ge,Xe);else break;ot++}for(;ot<=Ct&&ot<=Ut;){const Gt=K[Ct],fn=pe[Ut]=Xe?ff(pe[Ut]):El(pe[Ut]);if(ju(Gt,fn))D(Gt,fn,ve,null,Ue,Qe,Ke,Ge,Xe);else break;Ct--,Ut--}if(ot>Ct){if(ot<=Ut){const Gt=Ut+1,fn=Gt<kt?pe[Gt].el:ge;for(;ot<=Ut;)D(null,pe[ot]=Xe?ff(pe[ot]):El(pe[ot]),ve,fn,Ue,Qe,Ke,Ge,Xe),ot++}}else if(ot>Ut)for(;ot<=Ct;)A(K[ot],Ue,Qe,!0),ot++;else{const Gt=ot,fn=ot,pn=new Map;for(ot=fn;ot<=Ut;ot++){const Tn=pe[ot]=Xe?ff(pe[ot]):El(pe[ot]);Tn.key!=null&&pn.set(Tn.key,ot)}let et,it=0;const nt=Ut-fn+1;let Vt=!1,Qt=0;const On=new Array(nt);for(ot=0;ot<nt;ot++)On[ot]=0;for(ot=Gt;ot<=Ct;ot++){const Tn=K[ot];if(it>=nt){A(Tn,Ue,Qe,!0);continue}let ar;if(Tn.key!=null)ar=pn.get(Tn.key);else for(et=fn;et<=Ut;et++)if(On[et-fn]===0&&ju(Tn,pe[et])){ar=et;break}ar===void 0?A(Tn,Ue,Qe,!0):(On[ar-fn]=ot+1,ar>=Qt?Qt=ar:Vt=!0,D(Tn,pe[ar],ve,null,Ue,Qe,Ke,Ge,Xe),it++)}const wn=Vt?K6(On):Hh;for(et=wn.length-1,ot=nt-1;ot>=0;ot--){const Tn=fn+ot,ar=pe[Tn],xn=Tn+1<kt?pe[Tn+1].el:ge;On[ot]===0?D(null,ar,ve,xn,Ue,Qe,Ke,Ge,Xe):Vt&&(et<0||ot!==wn[et]?Ie(ar,ve,xn,2):et--)}}},Ie=(K,pe,ve,ge,Ue=null)=>{const{el:Qe,type:Ke,transition:Ge,children:Xe,shapeFlag:ot}=K;if(ot&6){Ie(K.component.subTree,pe,ve,ge);return}if(ot&128){K.suspense.move(pe,ve,ge);return}if(ot&64){Ke.move(K,pe,ve,ke);return}if(Ke===Rn){r(Qe,pe,ve);for(let Ct=0;Ct<Xe.length;Ct++)Ie(Xe[Ct],pe,ve,ge);r(K.anchor,pe,ve);return}if(Ke===Qf){Y(K,pe,ve);return}if(ge!==2&&ot&1&&Ge)if(ge===0)Ge.beforeEnter(Qe),r(Qe,pe,ve),Fs(()=>Ge.enter(Qe),Ue);else{const{leave:Ct,delayLeave:Ut,afterLeave:Gt}=Ge,fn=()=>r(Qe,pe,ve),pn=()=>{Ct(Qe,()=>{fn(),Gt&&Gt()})};Ut?Ut(Qe,fn,pn):pn()}else r(Qe,pe,ve)},A=(K,pe,ve,ge=!1,Ue=!1)=>{const{type:Qe,props:Ke,ref:Ge,children:Xe,dynamicChildren:ot,shapeFlag:kt,patchFlag:Ct,dirs:Ut,cacheIndex:Gt}=K;if(Ct===-2&&(Ue=!1),Ge!=null&&mp(Ge,null,ve,K,!0),Gt!=null&&(pe.renderCache[Gt]=void 0),kt&256){pe.ctx.deactivate(K);return}const fn=kt&1&&Ut,pn=!yf(K);let et;if(pn&&(et=Ke&&Ke.onVnodeBeforeUnmount)&&Ll(et,pe,K),kt&6)ne(K.component,ve,ge);else{if(kt&128){K.suspense.unmount(ve,ge);return}fn&&ac(K,null,pe,"beforeUnmount"),kt&64?K.type.remove(K,pe,ve,ke,ge):ot&&!ot.hasOnce&&(Qe!==Rn||Ct>0&&Ct&64)?he(ot,pe,ve,!1,!0):(Qe===Rn&&Ct&384||!Ue&&kt&16)&&he(Xe,pe,ve),ge&&J(K)}(pn&&(et=Ke&&Ke.onVnodeUnmounted)||fn)&&Fs(()=>{et&&Ll(et,pe,K),fn&&ac(K,null,pe,"unmounted")},ve)},J=K=>{const{type:pe,el:ve,anchor:ge,transition:Ue}=K;if(pe===Rn){fe(ve,ge);return}if(pe===Qf){Q(K);return}const Qe=()=>{i(ve),Ue&&!Ue.persisted&&Ue.afterLeave&&Ue.afterLeave()};if(K.shapeFlag&1&&Ue&&!Ue.persisted){const{leave:Ke,delayLeave:Ge}=Ue,Xe=()=>Ke(ve,Qe);Ge?Ge(K.el,Qe,Xe):Xe()}else Qe()},fe=(K,pe)=>{let ve;for(;K!==pe;)ve=x(K),i(K),K=ve;i(pe)},ne=(K,pe,ve)=>{const{bum:ge,scope:Ue,job:Qe,subTree:Ke,um:Ge,m:Xe,a:ot}=K;i0(Xe),i0(ot),ge&&Wh(ge),Ue.stop(),Qe&&(Qe.flags|=8,A(Ke,K,pe,ve)),Ge&&Fs(Ge,pe),Fs(()=>{K.isUnmounted=!0},pe),pe&&pe.pendingBranch&&!pe.isUnmounted&&K.asyncDep&&!K.asyncResolved&&K.suspenseId===pe.pendingId&&(pe.deps--,pe.deps===0&&pe.resolve())},he=(K,pe,ve,ge=!1,Ue=!1,Qe=0)=>{for(let Ke=Qe;Ke<K.length;Ke++)A(K[Ke],pe,ve,ge,Ue)},ae=K=>{if(K.shapeFlag&6)return ae(K.component.subTree);if(K.shapeFlag&128)return K.suspense.next();const pe=x(K.anchor||K.el),ve=pe&&pe[Iw];return ve?x(ve):pe};let T=!1;const ue=(K,pe,ve)=>{K==null?pe._vnode&&A(pe._vnode,null,null,!0):D(pe._vnode||null,K,pe,null,null,null,ve),pe._vnode=K,T||(T=!0,j2(),n0(),T=!1)},ke={p:D,um:A,m:Ie,r:J,mt:U,mc:G,pc:re,pbc:Z,n:ae,o:e};let Ce,Ve;return n&&([Ce,Ve]=n(ke)),{render:ue,hydrate:Ce,createApp:U6(ue,Ce)}}function Wm({type:e,props:n},t){return t==="svg"&&e==="foreignObject"||t==="mathml"&&e==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:t}function jf({effect:e,job:n},t){t?(e.flags|=32,n.flags|=4):(e.flags&=-33,n.flags&=-5)}function v4(e,n){return(!e||e&&!e.pendingBranch)&&n&&!n.persisted}function oy(e,n,t=!1){const r=e.children,i=n.children;if(er(r)&&er(i))for(let s=0;s<r.length;s++){const o=r[s];let u=i[s];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=i[s]=ff(i[s]),u.el=o.el),!t&&u.patchFlag!==-2&&oy(o,u)),u.type===_f&&(u.el=o.el)}}function K6(e){const n=e.slice(),t=[0];let r,i,s,o,u;const f=e.length;for(r=0;r<f;r++){const d=e[r];if(d!==0){if(i=t[t.length-1],e[i]<d){n[r]=i,t.push(r);continue}for(s=0,o=t.length-1;s<o;)u=s+o>>1,e[t[u]]<d?s=u+1:o=u;d<e[t[s]]&&(s>0&&(n[r]=t[s-1]),t[s]=r)}}for(s=t.length,o=t[s-1];s-- >0;)t[s]=o,o=n[o];return t}function y4(e){const n=e.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:y4(n)}function i0(e){if(e)for(let n=0;n<e.length;n++)e[n].flags|=8}const _4=Symbol.for("v-scx"),b4=()=>Kl(_4);function yp(e,n){return Mp(e,null,n)}function Y6(e,n){return Mp(e,null,{flush:"post"})}function w4(e,n){return Mp(e,null,{flush:"sync"})}function So(e,n,t){return Mp(e,n,t)}function Mp(e,n,t=Di){const{immediate:r,deep:i,flush:s,once:o}=t,u=uo({},t),f=n&&r||!n&&s!=="post";let d;if(td){if(s==="sync"){const _=b4();d=_.__watcherHandles||(_.__watcherHandles=[])}else if(!f){const _=()=>{};return _.stop=gu,_.resume=gu,_.pause=gu,_}}const g=js;u.call=(_,M,D)=>vu(_,g,M,D);let y=!1;s==="post"?u.scheduler=_=>{Fs(_,g&&g.suspense)}:s!=="sync"&&(y=!0,u.scheduler=(_,M)=>{M?_():K1(_)}),u.augmentJob=_=>{n&&(_.flags|=4),y&&(_.flags|=2,g&&(_.id=g.uid,_.i=g))};const x=zP(e,n,u);return td&&(d?d.push(x):f&&x()),x}function J6(e,n,t){const r=this.proxy,i=yo(e)?e.includes(".")?x4(r,e):()=>r[e]:e.bind(r,r);let s;kr(n)?s=n:(s=n.handler,t=n);const o=ih(this),u=Mp(i,s.bind(r),t);return o(),u}function x4(e,n){const t=n.split(".");return()=>{let r=e;for(let i=0;i<t.length&&r;i++)r=r[t[i]];return r}}function X6(e,n,t=Di){const r=_u(),i=ma(n),s=Pl(n),o=L4(e,i),u=Pw((f,d)=>{let g,y=Di,x;return w4(()=>{const _=e[i];nl(g,_)&&(g=_,d())}),{get(){return f(),t.get?t.get(g):g},set(_){const M=t.set?t.set(_):_;if(!nl(M,g)&&!(y!==Di&&nl(_,y)))return;const D=r.vnode.props;D&&(n in D||i in D||s in D)&&(`onUpdate:${n}`in D||`onUpdate:${i}`in D||`onUpdate:${s}`in D)||(g=_,d()),r.emit(`update:${n}`,M),nl(_,M)&&nl(_,y)&&!nl(M,x)&&d(),y=_,x=M}}});return u[Symbol.iterator]=()=>{let f=0;return{next(){return f<2?{value:f++?o||Di:u,done:!1}:{done:!0}}}},u}const L4=(e,n)=>n==="modelValue"||n==="model-value"?e.modelModifiers:e[`${n}Modifiers`]||e[`${ma(n)}Modifiers`]||e[`${Pl(n)}Modifiers`];function Q6(e,n,...t){if(e.isUnmounted)return;const r=e.vnode.props||Di;let i=t;const s=n.startsWith("update:"),o=s&&L4(r,n.slice(7));o&&(o.trim&&(i=t.map(g=>yo(g)?g.trim():g)),o.number&&(i=t.map(Jg)));let u,f=r[u=qd(n)]||r[u=qd(ma(n))];!f&&s&&(f=r[u=qd(Pl(n))]),f&&vu(f,e,6,i);const d=r[u+"Once"];if(d){if(!e.emitted)e.emitted={};else if(e.emitted[u])return;e.emitted[u]=!0,vu(d,e,6,i)}}function S4(e,n,t=!1){const r=n.emitsCache,i=r.get(e);if(i!==void 0)return i;const s=e.emits;let o={},u=!1;if(!kr(e)){const f=d=>{const g=S4(d,n,!0);g&&(u=!0,uo(o,g))};!t&&n.mixins.length&&n.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}return!s&&!u?(Ji(e)&&r.set(e,null),null):(er(s)?s.forEach(f=>o[f]=null):uo(o,s),Ji(e)&&r.set(e,o),o)}function H0(e,n){return!e||!Cp(n)?!1:(n=n.slice(2).replace(/Once$/,""),qi(e,n[0].toLowerCase()+n.slice(1))||qi(e,Pl(n))||qi(e,n))}function Dg(e){const{type:n,vnode:t,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:u,emit:f,render:d,renderCache:g,props:y,data:x,setupState:_,ctx:M,inheritAttrs:D}=e,N=gp(e);let O,F;try{if(t.shapeFlag&4){const Q=i||r,le=Q;O=El(d.call(le,Q,g,y,_,x,M)),F=u}else{const Q=n;O=El(Q.length>1?Q(y,{attrs:u,slots:o,emit:f}):Q(y,null)),F=n.props?u:tM(u)}}catch(Q){Xd.length=0,ah(Q,e,1),O=fi(Ns)}let Y=O;if(F&&D!==!1){const Q=Object.keys(F),{shapeFlag:le}=Y;Q.length&&le&7&&(s&&Q.some(I1)&&(F=nM(F,s)),Y=vc(Y,F,!1,!0))}return t.dirs&&(Y=vc(Y,null,!1,!0),Y.dirs=Y.dirs?Y.dirs.concat(t.dirs):t.dirs),t.transition&&$c(Y,t.transition),O=Y,gp(N),O}function eM(e,n=!0){let t;for(let r=0;r<e.length;r++){const i=e[r];if(Uc(i)){if(i.type!==Ns||i.children==="v-if"){if(t)return;t=i}}else return}return t}const tM=e=>{let n;for(const t in e)(t==="class"||t==="style"||Cp(t))&&((n||(n={}))[t]=e[t]);return n},nM=(e,n)=>{const t={};for(const r in e)(!I1(r)||!(r.slice(9)in n))&&(t[r]=e[r]);return t};function rM(e,n,t){const{props:r,children:i,component:s}=e,{props:o,children:u,patchFlag:f}=n,d=s.emitsOptions;if(n.dirs||n.transition)return!0;if(t&&f>=0){if(f&1024)return!0;if(f&16)return r?J2(r,o,d):!!o;if(f&8){const g=n.dynamicProps;for(let y=0;y<g.length;y++){const x=g[y];if(o[x]!==r[x]&&!H0(d,x))return!0}}}else return(i||u)&&(!u||!u.$stable)?!0:r===o?!1:r?o?J2(r,o,d):!0:!!o;return!1}function J2(e,n,t){const r=Object.keys(n);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(n[s]!==e[s]&&!H0(t,s))return!0}return!1}function G0({vnode:e,parent:n},t){for(;n;){const r=n.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=n.vnode).el=t,n=n.parent;else break}}const o0=e=>e.__isSuspense;let jv=0;const iM={name:"Suspense",__isSuspense:!0,process(e,n,t,r,i,s,o,u,f,d){if(e==null)sM(n,t,r,i,s,o,u,f,d);else{if(s&&s.deps>0&&!e.suspense.isInFallback){n.suspense=e.suspense,n.suspense.vnode=n,n.el=e.el;return}aM(e,n,t,r,i,o,u,f,d)}},hydrate:lM,normalize:uM},oM=iM;function _p(e,n){const t=e.props&&e.props[n];kr(t)&&t()}function sM(e,n,t,r,i,s,o,u,f){const{p:d,o:{createElement:g}}=f,y=g("div"),x=e.suspense=C4(e,i,r,n,y,t,s,o,u,f);d(null,x.pendingBranch=e.ssContent,y,null,r,x,s,o),x.deps>0?(_p(e,"onPending"),_p(e,"onFallback"),d(null,e.ssFallback,n,t,r,null,s,o),Kh(x,e.ssFallback)):x.resolve(!1,!0)}function aM(e,n,t,r,i,s,o,u,{p:f,um:d,o:{createElement:g}}){const y=n.suspense=e.suspense;y.vnode=n,n.el=e.el;const x=n.ssContent,_=n.ssFallback,{activeBranch:M,pendingBranch:D,isInFallback:N,isHydrating:O}=y;if(D)y.pendingBranch=x,ju(x,D)?(f(D,x,y.hiddenContainer,null,i,y,s,o,u),y.deps<=0?y.resolve():N&&(O||(f(M,_,t,r,i,null,s,o,u),Kh(y,_)))):(y.pendingId=jv++,O?(y.isHydrating=!1,y.activeBranch=D):d(D,i,y),y.deps=0,y.effects.length=0,y.hiddenContainer=g("div"),N?(f(null,x,y.hiddenContainer,null,i,y,s,o,u),y.deps<=0?y.resolve():(f(M,_,t,r,i,null,s,o,u),Kh(y,_))):M&&ju(x,M)?(f(M,x,t,r,i,y,s,o,u),y.resolve(!0)):(f(null,x,y.hiddenContainer,null,i,y,s,o,u),y.deps<=0&&y.resolve()));else if(M&&ju(x,M))f(M,x,t,r,i,y,s,o,u),Kh(y,x);else if(_p(n,"onPending"),y.pendingBranch=x,x.shapeFlag&512?y.pendingId=x.component.suspenseId:y.pendingId=jv++,f(null,x,y.hiddenContainer,null,i,y,s,o,u),y.deps<=0)y.resolve();else{const{timeout:F,pendingId:Y}=y;F>0?setTimeout(()=>{y.pendingId===Y&&y.fallback(_)},F):F===0&&y.fallback(_)}}function C4(e,n,t,r,i,s,o,u,f,d,g=!1){const{p:y,m:x,um:_,n:M,o:{parentNode:D,remove:N}}=d;let O;const F=cM(e);F&&n&&n.pendingBranch&&(O=n.pendingId,n.deps++);const Y=e.props?Xg(e.props.timeout):void 0,Q=s,le={vnode:e,parent:n,parentComponent:t,namespace:o,container:r,hiddenContainer:i,deps:0,pendingId:jv++,timeout:typeof Y=="number"?Y:-1,activeBranch:null,pendingBranch:null,isInFallback:!g,isHydrating:g,isUnmounted:!1,effects:[],resolve(ce=!1,xe=!1){const{vnode:G,activeBranch:R,pendingBranch:Z,pendingId:z,effects:I,parentComponent:$,container:U}=le;let W=!1;le.isHydrating?le.isHydrating=!1:ce||(W=R&&Z.transition&&Z.transition.mode==="out-in",W&&(R.transition.afterLeave=()=>{z===le.pendingId&&(x(Z,U,s===Q?M(R):s,0),dp(I))}),R&&(D(R.el)===U&&(s=M(R)),_(R,$,le,!0)),W||x(Z,U,s,0)),Kh(le,Z),le.pendingBranch=null,le.isInFallback=!1;let q=le.parent,ie=!1;for(;q;){if(q.pendingBranch){q.effects.push(...I),ie=!0;break}q=q.parent}!ie&&!W&&dp(I),le.effects=[],F&&n&&n.pendingBranch&&O===n.pendingId&&(n.deps--,n.deps===0&&!xe&&n.resolve()),_p(G,"onResolve")},fallback(ce){if(!le.pendingBranch)return;const{vnode:xe,activeBranch:G,parentComponent:R,container:Z,namespace:z}=le;_p(xe,"onFallback");const I=M(G),$=()=>{le.isInFallback&&(y(null,ce,Z,I,R,null,z,u,f),Kh(le,ce))},U=ce.transition&&ce.transition.mode==="out-in";U&&(G.transition.afterLeave=$),le.isInFallback=!0,_(G,R,null,!0),U||$()},move(ce,xe,G){le.activeBranch&&x(le.activeBranch,ce,xe,G),le.container=ce},next(){return le.activeBranch&&M(le.activeBranch)},registerDep(ce,xe,G){const R=!!le.pendingBranch;R&&le.deps++;const Z=ce.vnode.el;ce.asyncDep.catch(z=>{ah(z,ce,0)}).then(z=>{if(ce.isUnmounted||le.isUnmounted||le.pendingId!==ce.suspenseId)return;ce.asyncResolved=!0;const{vnode:I}=ce;Vv(ce,z,!1),Z&&(I.el=Z);const $=!Z&&ce.subTree.el;xe(ce,I,D(Z||ce.subTree.el),Z?null:M(ce.subTree),le,o,G),$&&N($),G0(ce,I.el),R&&--le.deps===0&&le.resolve()})},unmount(ce,xe){le.isUnmounted=!0,le.activeBranch&&_(le.activeBranch,t,ce,xe),le.pendingBranch&&_(le.pendingBranch,t,ce,xe)}};return le}function lM(e,n,t,r,i,s,o,u,f){const d=n.suspense=C4(n,r,t,e.parentNode,document.createElement("div"),null,i,s,o,u,!0),g=f(e,d.pendingBranch=n.ssContent,t,d,s,o);return d.deps===0&&d.resolve(!1,!0),g}function uM(e){const{shapeFlag:n,children:t}=e,r=n&32;e.ssContent=X2(r?t.default:t),e.ssFallback=r?X2(t.fallback):fi(Ns)}function X2(e){let n;if(kr(e)){const t=rh&&e._c;t&&(e._d=!1,$e()),e=e(),t&&(e._d=!0,n=$a,P4())}return er(e)&&(e=eM(e)),e=El(e),n&&!e.dynamicChildren&&(e.dynamicChildren=n.filter(t=>t!==e)),e}function E4(e,n){n&&n.pendingBranch?er(e)?n.effects.push(...e):n.effects.push(e):dp(e)}function Kh(e,n){e.activeBranch=n;const{vnode:t,parentComponent:r}=e;let i=n.el;for(;!i&&n.component;)n=n.component.subTree,i=n.el;t.el=i,r&&r.subTree===t&&(r.vnode.el=i,G0(r,i))}function cM(e){const n=e.props&&e.props.suspensible;return n!=null&&n!==!1}const Rn=Symbol.for("v-fgt"),_f=Symbol.for("v-txt"),Ns=Symbol.for("v-cmt"),Qf=Symbol.for("v-stc"),Xd=[];let $a=null;function $e(e=!1){Xd.push($a=e?null:[])}function P4(){Xd.pop(),$a=Xd[Xd.length-1]||null}let rh=1;function zv(e,n=!1){rh+=e,e<0&&$a&&n&&($a.hasOnce=!0)}function M4(e){return e.dynamicChildren=rh>0?$a||Hh:null,P4(),rh>0&&$a&&$a.push(e),e}function qe(e,n,t,r,i,s){return M4(E(e,n,t,r,i,s,!0))}function Ua(e,n,t,r,i){return M4(fi(e,n,t,r,i,!0))}function Uc(e){return e?e.__v_isVNode===!0:!1}function ju(e,n){return e.type===n.type&&e.key===n.key}function fM(e){}const A4=({key:e})=>e??null,Ng=({ref:e,ref_key:n,ref_for:t})=>(typeof e=="number"&&(e=""+e),e!=null?yo(e)||Jo(e)||kr(e)?{i:zs,r:e,k:n,f:!!t}:e:null);function E(e,n=null,t=null,r=0,i=null,s=e===Rn?0:1,o=!1,u=!1){const f={__v_isVNode:!0,__v_skip:!0,type:e,props:n,key:n&&A4(n),ref:n&&Ng(n),scopeId:z0,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:zs};return u?(sy(f,t),s&128&&e.normalize(f)):t&&(f.shapeFlag|=yo(t)?8:16),rh>0&&!o&&$a&&(f.patchFlag>0||s&6)&&f.patchFlag!==32&&$a.push(f),f}const fi=hM;function hM(e,n=null,t=null,r=0,i=null,s=!1){if((!e||e===Qw)&&(e=Ns),Uc(e)){const u=vc(e,n,!0);return t&&sy(u,t),rh>0&&!s&&$a&&(u.shapeFlag&6?$a[$a.indexOf(e)]=u:$a.push(u)),u.patchFlag=-2,u}if(_M(e)&&(e=e.__vccOpts),n){n=k4(n);let{class:u,style:f}=n;u&&!yo(u)&&(n.class=Ri(u)),Ji(f)&&(F0(f)&&!er(f)&&(f=uo({},f)),n.style=rl(f))}const o=yo(e)?1:o0(e)?128:Rw(e)?64:Ji(e)?4:kr(e)?2:0;return E(e,n,t,r,i,o,s,!0)}function k4(e){return e?F0(e)||a4(e)?uo({},e):e:null}function vc(e,n,t=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:u,transition:f}=e,d=n?T4(i||{},n):i,g={__v_isVNode:!0,__v_skip:!0,type:e.type,props:d,key:d&&A4(d),ref:n&&n.ref?t&&s?er(s)?s.concat(Ng(n)):[s,Ng(n)]:Ng(n):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:u,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:n&&e.type!==Rn?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:f,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&vc(e.ssContent),ssFallback:e.ssFallback&&vc(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return f&&r&&$c(g,f.clone(g)),g}function pi(e=" ",n=0){return fi(_f,null,e,n)}function uc(e,n){const t=fi(Qf,null,e);return t.staticCount=n,t}function un(e="",n=!1){return n?($e(),Ua(Ns,null,e)):fi(Ns,null,e)}function El(e){return e==null||typeof e=="boolean"?fi(Ns):er(e)?fi(Rn,null,e.slice()):Uc(e)?ff(e):fi(_f,null,String(e))}function ff(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:vc(e)}function sy(e,n){let t=0;const{shapeFlag:r}=e;if(n==null)n=null;else if(er(n))t=16;else if(typeof n=="object")if(r&65){const i=n.default;i&&(i._c&&(i._d=!1),sy(e,i()),i._c&&(i._d=!0));return}else{t=32;const i=n._;!i&&!a4(n)?n._ctx=zs:i===3&&zs&&(zs.slots._===1?n._=1:(n._=2,e.patchFlag|=1024))}else kr(n)?(n={default:n,_ctx:zs},t=32):(n=String(n),r&64?(t=16,n=[pi(n)]):t=8);e.children=n,e.shapeFlag|=t}function T4(...e){const n={};for(let t=0;t<e.length;t++){const r=e[t];for(const i in r)if(i==="class")n.class!==r.class&&(n.class=Ri([n.class,r.class]));else if(i==="style")n.style=rl([n.style,r.style]);else if(Cp(i)){const s=n[i],o=r[i];o&&s!==o&&!(er(s)&&s.includes(o))&&(n[i]=s?[].concat(s,o):o)}else i!==""&&(n[i]=r[i])}return n}function Ll(e,n,t,r=null){vu(e,n,7,[t,r])}const dM=r4();let pM=0;function D4(e,n,t){const r=e.type,i=(n?n.appContext:e.appContext)||dM,s={uid:pM++,vnode:e,type:r,parent:n,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new z1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(i.provides),ids:n?n.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:u4(r,i),emitsOptions:S4(r,i),emit:null,emitted:null,propsDefaults:Di,inheritAttrs:r.inheritAttrs,ctx:Di,data:Di,props:Di,attrs:Di,slots:Di,refs:Di,setupState:Di,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=n?n.root:s,s.emit=Q6.bind(null,s),e.ce&&e.ce(s),s}let js=null;const _u=()=>js||zs;let s0,$v;{const e=D0(),n=(t,r)=>{let i;return(i=e[t])||(i=e[t]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};s0=n("__VUE_INSTANCE_SETTERS__",t=>js=t),$v=n("__VUE_SSR_SETTERS__",t=>td=t)}const ih=e=>{const n=js;return s0(e),e.scope.on(),()=>{e.scope.off(),s0(n)}},Uv=()=>{js&&js.scope.off(),s0(null)};function N4(e){return e.vnode.shapeFlag&4}let td=!1;function B4(e,n=!1,t=!1){n&&$v(n);const{props:r,children:i}=e.vnode,s=N4(e);V6(e,r,s,n),W6(e,i,t);const o=s?gM(e,n):void 0;return n&&$v(!1),o}function gM(e,n){const t=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Ov);const{setup:r}=t;if(r){Pf();const i=e.setupContext=r.length>1?I4(e):null,s=ih(e),o=ud(r,e,0,[e.props,i]),u=F1(o);if(Mf(),s(),(u||e.sp)&&!yf(e)&&X1(e),u){if(o.then(Uv,Uv),n)return o.then(f=>{Vv(e,f,n)}).catch(f=>{ah(f,e,0)});e.asyncDep=o}else Vv(e,o,n)}else O4(e,n)}function Vv(e,n,t){kr(n)?e.type.__ssrInlineRender?e.ssrRender=n:e.render=n:Ji(n)&&(e.setupState=Z1(n)),O4(e,t)}let a0,Hv;function mM(e){a0=e,Hv=n=>{n.render._rc&&(n.withProxy=new Proxy(n.ctx,x6))}}const vM=()=>!a0;function O4(e,n,t){const r=e.type;if(!e.render){if(!n&&a0&&!r.render){const i=r.template||ry(e).template;if(i){const{isCustomElement:s,compilerOptions:o}=e.appContext.config,{delimiters:u,compilerOptions:f}=r,d=uo(uo({isCustomElement:s,delimiters:u},o),f);r.render=a0(i,d)}}e.render=r.render||gu,Hv&&Hv(e)}{const i=ih(e);Pf();try{I6(e)}finally{Mf(),i()}}}const yM={get(e,n){return Ia(e,"get",""),e[n]}};function I4(e){const n=t=>{e.exposed=t||{}};return{attrs:new Proxy(e.attrs,yM),slots:e.slots,emit:e.emit,expose:n}}function Ap(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Z1(j0(e.exposed)),{get(n,t){if(t in n)return n[t];if(t in Yd)return Yd[t](e)},has(n,t){return t in n||t in Yd}})):e.proxy}function Gv(e,n=!0){return kr(e)?e.displayName||e.name:e.name||n&&e.__name}function _M(e){return kr(e)&&"__vccOpts"in e}const gr=(e,n)=>IP(e,n,td);function q0(e,n,t){const r=arguments.length;return r===2?Ji(n)&&!er(n)?Uc(n)?fi(e,null,[n]):fi(e,n):fi(e,null,n):(r>3?t=Array.prototype.slice.call(arguments,2):r===3&&Uc(t)&&(t=[t]),fi(e,n,t))}function bM(){}function wM(e,n,t,r){const i=t[r];if(i&&R4(i,e))return i;const s=n();return s.memo=e.slice(),s.cacheIndex=r,t[r]=s}function R4(e,n){const t=e.memo;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(nl(t[r],n[r]))return!1;return rh>0&&$a&&$a.push(e),!0}const F4="3.5.13",xM=gu,LM=GP,SM=Oh,CM=Ow,EM={createComponentInstance:D4,setupComponent:B4,renderComponentRoot:Dg,setCurrentRenderingInstance:gp,isVNode:Uc,normalizeVNode:El,getComponentPublicInstance:Ap,ensureValidVNode:ny,pushWarningContext:$P,popWarningContext:UP},PM=EM,MM=null,AM=null,kM=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let qv;const Q2=typeof window<"u"&&window.trustedTypes;if(Q2)try{qv=Q2.createPolicy("vue",{createHTML:e=>e})}catch{}const j4=qv?e=>qv.createHTML(e):e=>e,TM="http://www.w3.org/2000/svg",DM="http://www.w3.org/1998/Math/MathML",Ic=typeof document<"u"?document:null,e_=Ic&&Ic.createElement("template"),NM={insert:(e,n,t)=>{n.insertBefore(e,t||null)},remove:e=>{const n=e.parentNode;n&&n.removeChild(e)},createElement:(e,n,t,r)=>{const i=n==="svg"?Ic.createElementNS(TM,e):n==="mathml"?Ic.createElementNS(DM,e):t?Ic.createElement(e,{is:t}):Ic.createElement(e);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>Ic.createTextNode(e),createComment:e=>Ic.createComment(e),setText:(e,n)=>{e.nodeValue=n},setElementText:(e,n)=>{e.textContent=n},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ic.querySelector(e),setScopeId(e,n){e.setAttribute(n,"")},insertStaticContent(e,n,t,r,i,s){const o=t?t.previousSibling:n.lastChild;if(i&&(i===s||i.nextSibling))for(;n.insertBefore(i.cloneNode(!0),t),!(i===s||!(i=i.nextSibling)););else{e_.innerHTML=j4(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const u=e_.content;if(r==="svg"||r==="mathml"){const f=u.firstChild;for(;f.firstChild;)u.appendChild(f.firstChild);u.removeChild(f)}n.insertBefore(u,t)}return[o?o.nextSibling:n.firstChild,t?t.previousSibling:n.lastChild]}},ef="transition",Ld="animation",nd=Symbol("_vtc"),z4={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},$4=uo({},J1,z4),BM=e=>(e.displayName="Transition",e.props=$4,e),Wv=BM((e,{slots:n})=>q0(Uw,U4(e),n)),zf=(e,n=[])=>{er(e)?e.forEach(t=>t(...n)):e&&e(...n)},t_=e=>e?er(e)?e.some(n=>n.length>1):e.length>1:!1;function U4(e){const n={};for(const I in e)I in z4||(n[I]=e[I]);if(e.css===!1)return n;const{name:t="v",type:r,duration:i,enterFromClass:s=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:u=`${t}-enter-to`,appearFromClass:f=s,appearActiveClass:d=o,appearToClass:g=u,leaveFromClass:y=`${t}-leave-from`,leaveActiveClass:x=`${t}-leave-active`,leaveToClass:_=`${t}-leave-to`}=e,M=OM(i),D=M&&M[0],N=M&&M[1],{onBeforeEnter:O,onEnter:F,onEnterCancelled:Y,onLeave:Q,onLeaveCancelled:le,onBeforeAppear:ce=O,onAppear:xe=F,onAppearCancelled:G=Y}=n,R=(I,$,U,W)=>{I._enterCancelled=W,sf(I,$?g:u),sf(I,$?d:o),U&&U()},Z=(I,$)=>{I._isLeaving=!1,sf(I,y),sf(I,_),sf(I,x),$&&$()},z=I=>($,U)=>{const W=I?xe:F,q=()=>R($,I,U);zf(W,[$,q]),n_(()=>{sf($,I?f:s),ic($,I?g:u),t_(W)||r_($,r,D,q)})};return uo(n,{onBeforeEnter(I){zf(O,[I]),ic(I,s),ic(I,o)},onBeforeAppear(I){zf(ce,[I]),ic(I,f),ic(I,d)},onEnter:z(!1),onAppear:z(!0),onLeave(I,$){I._isLeaving=!0;const U=()=>Z(I,$);ic(I,y),I._enterCancelled?(ic(I,x),Zv()):(Zv(),ic(I,x)),n_(()=>{I._isLeaving&&(sf(I,y),ic(I,_),t_(Q)||r_(I,r,N,U))}),zf(Q,[I,U])},onEnterCancelled(I){R(I,!1,void 0,!0),zf(Y,[I])},onAppearCancelled(I){R(I,!0,void 0,!0),zf(G,[I])},onLeaveCancelled(I){Z(I),zf(le,[I])}})}function OM(e){if(e==null)return null;if(Ji(e))return[Zm(e.enter),Zm(e.leave)];{const n=Zm(e);return[n,n]}}function Zm(e){return Xg(e)}function ic(e,n){n.split(/\s+/).forEach(t=>t&&e.classList.add(t)),(e[nd]||(e[nd]=new Set)).add(n)}function sf(e,n){n.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const t=e[nd];t&&(t.delete(n),t.size||(e[nd]=void 0))}function n_(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let IM=0;function r_(e,n,t,r){const i=e._endId=++IM,s=()=>{i===e._endId&&r()};if(t!=null)return setTimeout(s,t);const{type:o,timeout:u,propCount:f}=V4(e,n);if(!o)return r();const d=o+"end";let g=0;const y=()=>{e.removeEventListener(d,x),s()},x=_=>{_.target===e&&++g>=f&&y()};setTimeout(()=>{g<f&&y()},u+1),e.addEventListener(d,x)}function V4(e,n){const t=window.getComputedStyle(e),r=M=>(t[M]||"").split(", "),i=r(`${ef}Delay`),s=r(`${ef}Duration`),o=i_(i,s),u=r(`${Ld}Delay`),f=r(`${Ld}Duration`),d=i_(u,f);let g=null,y=0,x=0;n===ef?o>0&&(g=ef,y=o,x=s.length):n===Ld?d>0&&(g=Ld,y=d,x=f.length):(y=Math.max(o,d),g=y>0?o>d?ef:Ld:null,x=g?g===ef?s.length:f.length:0);const _=g===ef&&/\b(transform|all)(,|$)/.test(r(`${ef}Property`).toString());return{type:g,timeout:y,propCount:x,hasTransform:_}}function i_(e,n){for(;e.length<n.length;)e=e.concat(e);return Math.max(...n.map((t,r)=>o_(t)+o_(e[r])))}function o_(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Zv(){return document.body.offsetHeight}function RM(e,n,t){const r=e[nd];r&&(n=(n?[n,...r]:[...r]).join(" ")),n==null?e.removeAttribute("class"):t?e.setAttribute("class",n):e.className=n}const l0=Symbol("_vod"),H4=Symbol("_vsh"),W0={beforeMount(e,{value:n},{transition:t}){e[l0]=e.style.display==="none"?"":e.style.display,t&&n?t.beforeEnter(e):Sd(e,n)},mounted(e,{value:n},{transition:t}){t&&n&&t.enter(e)},updated(e,{value:n,oldValue:t},{transition:r}){!n!=!t&&(r?n?(r.beforeEnter(e),Sd(e,!0),r.enter(e)):r.leave(e,()=>{Sd(e,!1)}):Sd(e,n))},beforeUnmount(e,{value:n}){Sd(e,n)}};function Sd(e,n){e.style.display=n?e[l0]:"none",e[H4]=!n}function FM(){W0.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const G4=Symbol("");function jM(e){const n=_u();if(!n)return;const t=n.ut=(i=e(n.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${n.uid}"]`)).forEach(s=>u0(s,i))},r=()=>{const i=e(n.proxy);n.ce?u0(n.ce,i):Kv(n.subTree,i),t(i)};Q1(()=>{dp(r)}),$s(()=>{So(r,gu,{flush:"post"});const i=new MutationObserver(r);i.observe(n.subTree.el.parentNode,{childList:!0}),mc(()=>i.disconnect())})}function Kv(e,n){if(e.shapeFlag&128){const t=e.suspense;e=t.activeBranch,t.pendingBranch&&!t.isHydrating&&t.effects.push(()=>{Kv(t.activeBranch,n)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)u0(e.el,n);else if(e.type===Rn)e.children.forEach(t=>Kv(t,n));else if(e.type===Qf){let{el:t,anchor:r}=e;for(;t&&(u0(t,n),t!==r);)t=t.nextSibling}}function u0(e,n){if(e.nodeType===1){const t=e.style;let r="";for(const i in n)t.setProperty(`--${i}`,n[i]),r+=`--${i}: ${n[i]};`;t[G4]=r}}const zM=/(^|;)\s*display\s*:/;function $M(e,n,t){const r=e.style,i=yo(t);let s=!1;if(t&&!i){if(n)if(yo(n))for(const o of n.split(";")){const u=o.slice(0,o.indexOf(":")).trim();t[u]==null&&Bg(r,u,"")}else for(const o in n)t[o]==null&&Bg(r,o,"");for(const o in t)o==="display"&&(s=!0),Bg(r,o,t[o])}else if(i){if(n!==t){const o=r[G4];o&&(t+=";"+o),r.cssText=t,s=zM.test(t)}}else n&&e.removeAttribute("style");l0 in e&&(e[l0]=s?r.display:"",e[H4]&&(r.display="none"))}const s_=/\s*!important$/;function Bg(e,n,t){if(er(t))t.forEach(r=>Bg(e,n,r));else if(t==null&&(t=""),n.startsWith("--"))e.setProperty(n,t);else{const r=UM(e,n);s_.test(t)?e.setProperty(Pl(r),t.replace(s_,""),"important"):e[r]=t}}const a_=["Webkit","Moz","ms"],Km={};function UM(e,n){const t=Km[n];if(t)return t;let r=ma(n);if(r!=="filter"&&r in e)return Km[n]=r;r=Ep(r);for(let i=0;i<a_.length;i++){const s=a_[i]+r;if(s in e)return Km[n]=s}return n}const l_="http://www.w3.org/1999/xlink";function u_(e,n,t,r,i,s=rP(n)){r&&n.startsWith("xlink:")?t==null?e.removeAttributeNS(l_,n.slice(6,n.length)):e.setAttributeNS(l_,n,t):t==null||s&&!aw(t)?e.removeAttribute(n):e.setAttribute(n,s?"":Uu(t)?String(t):t)}function c_(e,n,t,r,i){if(n==="innerHTML"||n==="textContent"){t!=null&&(e[n]=n==="innerHTML"?j4(t):t);return}const s=e.tagName;if(n==="value"&&s!=="PROGRESS"&&!s.includes("-")){const u=s==="OPTION"?e.getAttribute("value")||"":e.value,f=t==null?e.type==="checkbox"?"on":"":String(t);(u!==f||!("_value"in e))&&(e.value=f),t==null&&e.removeAttribute(n),e._value=t;return}let o=!1;if(t===""||t==null){const u=typeof e[n];u==="boolean"?t=aw(t):t==null&&u==="string"?(t="",o=!0):u==="number"&&(t=0,o=!0)}try{e[n]=t}catch{}o&&e.removeAttribute(i||n)}function jc(e,n,t,r){e.addEventListener(n,t,r)}function VM(e,n,t,r){e.removeEventListener(n,t,r)}const f_=Symbol("_vei");function HM(e,n,t,r,i=null){const s=e[f_]||(e[f_]={}),o=s[n];if(r&&o)o.value=r;else{const[u,f]=GM(n);if(r){const d=s[n]=ZM(r,i);jc(e,u,d,f)}else o&&(VM(e,u,o,f),s[n]=void 0)}}const h_=/(?:Once|Passive|Capture)$/;function GM(e){let n;if(h_.test(e)){n={};let r;for(;r=e.match(h_);)e=e.slice(0,e.length-r[0].length),n[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Pl(e.slice(2)),n]}let Ym=0;const qM=Promise.resolve(),WM=()=>Ym||(qM.then(()=>Ym=0),Ym=Date.now());function ZM(e,n){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;vu(KM(r,t.value),n,5,[r])};return t.value=e,t.attached=WM(),t}function KM(e,n){if(er(n)){const t=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{t.call(e),e._stopped=!0},n.map(r=>i=>!i._stopped&&r&&r(i))}else return n}const d_=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,YM=(e,n,t,r,i,s)=>{const o=i==="svg";n==="class"?RM(e,r,o):n==="style"?$M(e,t,r):Cp(n)?I1(n)||HM(e,n,t,r,s):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):JM(e,n,r,o))?(c_(e,n,r),!e.tagName.includes("-")&&(n==="value"||n==="checked"||n==="selected")&&u_(e,n,r,o,s,n!=="value")):e._isVueCE&&(/[A-Z]/.test(n)||!yo(r))?c_(e,ma(n),r,s,n):(n==="true-value"?e._trueValue=r:n==="false-value"&&(e._falseValue=r),u_(e,n,r,o))};function JM(e,n,t,r){if(r)return!!(n==="innerHTML"||n==="textContent"||n in e&&d_(n)&&kr(t));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&e.tagName==="INPUT"||n==="type"&&e.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return d_(n)&&yo(t)?!1:n in e}const p_={};/*! #__NO_SIDE_EFFECTS__ */function q4(e,n,t){const r=us(e,n);k0(r)&&uo(r,n);class i extends Z0{constructor(o){super(r,o,t)}}return i.def=r,i}/*! #__NO_SIDE_EFFECTS__ */const XM=(e,n)=>q4(e,n,n5),QM=typeof HTMLElement<"u"?HTMLElement:class{};class Z0 extends QM{constructor(n,t={},r=f0){super(),this._def=n,this._props=t,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==f0?this._root=this.shadowRoot:n.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let n=this;for(;n=n&&(n.parentNode||n.host);)if(n instanceof Z0){this._parent=n;break}this._instance||(this._resolved?(this._setParent(),this._update()):n&&n._pendingResolve?this._pendingResolve=n._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(n=this._parent){n&&(this._instance.parent=n._instance,this._instance.provides=n._instance.provides)}disconnectedCallback(){this._connected=!1,Xs(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const i of r)this._setAttr(i.attributeName)}),this._ob.observe(this,{attributes:!0});const n=(r,i=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:s,styles:o}=r;let u;if(s&&!er(s))for(const f in s){const d=s[f];(d===Number||d&&d.type===Number)&&(f in this._props&&(this._props[f]=Xg(this._props[f])),(u||(u=Object.create(null)))[ma(f)]=!0)}this._numberProps=u,i&&this._resolveProps(r),this.shadowRoot&&this._applyStyles(o),this._mount(r)},t=this._def.__asyncLoader;t?this._pendingResolve=t().then(r=>n(this._def=r,!0)):n(this._def)}_mount(n){this._app=this._createApp(n),n.configureApp&&n.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const t=this._instance&&this._instance.exposed;if(t)for(const r in t)qi(this,r)||Object.defineProperty(this,r,{get:()=>Wn(t[r])})}_resolveProps(n){const{props:t}=n,r=er(t)?t:Object.keys(t||{});for(const i of Object.keys(this))i[0]!=="_"&&r.includes(i)&&this._setProp(i,this[i]);for(const i of r.map(ma))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(s){this._setProp(i,s,!0,!0)}})}_setAttr(n){if(n.startsWith("data-v-"))return;const t=this.hasAttribute(n);let r=t?this.getAttribute(n):p_;const i=ma(n);t&&this._numberProps&&this._numberProps[i]&&(r=Xg(r)),this._setProp(i,r,!1,!0)}_getProp(n){return this._props[n]}_setProp(n,t,r=!0,i=!1){if(t!==this._props[n]&&(t===p_?delete this._props[n]:(this._props[n]=t,n==="key"&&this._app&&(this._app._ceVNode.key=t)),i&&this._instance&&this._update(),r)){const s=this._ob;s&&s.disconnect(),t===!0?this.setAttribute(Pl(n),""):typeof t=="string"||typeof t=="number"?this.setAttribute(Pl(n),t+""):t||this.removeAttribute(Pl(n)),s&&s.observe(this,{attributes:!0})}}_update(){t5(this._createVNode(),this._root)}_createVNode(){const n={};this.shadowRoot||(n.onVnodeMounted=n.onVnodeUpdated=this._renderSlots.bind(this));const t=fi(this._def,uo(n,this._props));return this._instance||(t.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const i=(s,o)=>{this.dispatchEvent(new CustomEvent(s,k0(o[0])?uo({detail:o},o[0]):{detail:o}))};r.emit=(s,...o)=>{i(s,o),Pl(s)!==s&&i(Pl(s),o)},this._setParent()}),t}_applyStyles(n,t){if(!n)return;if(t){if(t===this._def||this._styleChildren.has(t))return;this._styleChildren.add(t)}const r=this._nonce;for(let i=n.length-1;i>=0;i--){const s=document.createElement("style");r&&s.setAttribute("nonce",r),s.textContent=n[i],this.shadowRoot.prepend(s)}}_parseSlots(){const n=this._slots={};let t;for(;t=this.firstChild;){const r=t.nodeType===1&&t.getAttribute("slot")||"default";(n[r]||(n[r]=[])).push(t),this.removeChild(t)}}_renderSlots(){const n=(this._teleportTarget||this).querySelectorAll("slot"),t=this._instance.type.__scopeId;for(let r=0;r<n.length;r++){const i=n[r],s=i.getAttribute("name")||"default",o=this._slots[s],u=i.parentNode;if(o)for(const f of o){if(t&&f.nodeType===1){const d=t+"-s",g=document.createTreeWalker(f,1);f.setAttribute(d,"");let y;for(;y=g.nextNode();)y.setAttribute(d,"")}u.insertBefore(f,i)}else for(;i.firstChild;)u.insertBefore(i.firstChild,i);u.removeChild(i)}}_injectChildStyle(n){this._applyStyles(n.styles,n)}_removeChildStyle(n){}}function W4(e){const n=_u(),t=n&&n.ce;return t||null}function eA(){const e=W4();return e&&e.shadowRoot}function tA(e="$style"){{const n=_u();if(!n)return Di;const t=n.type.__cssModules;if(!t)return Di;const r=t[e];return r||Di}}const Z4=new WeakMap,K4=new WeakMap,c0=Symbol("_moveCb"),g_=Symbol("_enterCb"),nA=e=>(delete e.props.mode,e),rA=nA({name:"TransitionGroup",props:uo({},$4,{tag:String,moveClass:String}),setup(e,{slots:n}){const t=_u(),r=Y1();let i,s;return V0(()=>{if(!i.length)return;const o=e.moveClass||`${e.name||"v"}-move`;if(!lA(i[0].el,t.vnode.el,o))return;i.forEach(oA),i.forEach(sA);const u=i.filter(aA);Zv(),u.forEach(f=>{const d=f.el,g=d.style;ic(d,o),g.transform=g.webkitTransform=g.transitionDuration="";const y=d[c0]=x=>{x&&x.target!==d||(!x||/transform$/.test(x.propertyName))&&(d.removeEventListener("transitionend",y),d[c0]=null,sf(d,o))};d.addEventListener("transitionend",y)})}),()=>{const o=Ti(e),u=U4(o);let f=o.tag||Rn;if(i=[],s)for(let d=0;d<s.length;d++){const g=s[d];g.el&&g.el instanceof Element&&(i.push(g),$c(g,ed(g,u,r,t)),Z4.set(g,g.el.getBoundingClientRect()))}s=n.default?$0(n.default()):[];for(let d=0;d<s.length;d++){const g=s[d];g.key!=null&&$c(g,ed(g,u,r,t))}return fi(f,null,s)}}}),iA=rA;function oA(e){const n=e.el;n[c0]&&n[c0](),n[g_]&&n[g_]()}function sA(e){K4.set(e,e.el.getBoundingClientRect())}function aA(e){const n=Z4.get(e),t=K4.get(e),r=n.left-t.left,i=n.top-t.top;if(r||i){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",e}}function lA(e,n,t){const r=e.cloneNode(),i=e[nd];i&&i.forEach(u=>{u.split(/\s+/).forEach(f=>f&&r.classList.remove(f))}),t.split(/\s+/).forEach(u=>u&&r.classList.add(u)),r.style.display="none";const s=n.nodeType===1?n:n.parentNode;s.appendChild(r);const{hasTransform:o}=V4(r);return s.removeChild(r),o}const Lf=e=>{const n=e.props["onUpdate:modelValue"]||!1;return er(n)?t=>Wh(n,t):n};function uA(e){e.target.composing=!0}function m_(e){const n=e.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const mu=Symbol("_assign"),Zr={created(e,{modifiers:{lazy:n,trim:t,number:r}},i){e[mu]=Lf(i);const s=r||i.props&&i.props.type==="number";jc(e,n?"change":"input",o=>{if(o.target.composing)return;let u=e.value;t&&(u=u.trim()),s&&(u=Jg(u)),e[mu](u)}),t&&jc(e,"change",()=>{e.value=e.value.trim()}),n||(jc(e,"compositionstart",uA),jc(e,"compositionend",m_),jc(e,"change",m_))},mounted(e,{value:n}){e.value=n??""},beforeUpdate(e,{value:n,oldValue:t,modifiers:{lazy:r,trim:i,number:s}},o){if(e[mu]=Lf(o),e.composing)return;const u=(s||e.type==="number")&&!/^0\d/.test(e.value)?Jg(e.value):e.value,f=n??"";u!==f&&(document.activeElement===e&&e.type!=="range"&&(r&&n===t||i&&e.value.trim()===f)||(e.value=f))}},Sl={deep:!0,created(e,n,t){e[mu]=Lf(t),jc(e,"change",()=>{const r=e._modelValue,i=rd(e),s=e.checked,o=e[mu];if(er(r)){const u=N0(r,i),f=u!==-1;if(s&&!f)o(r.concat(i));else if(!s&&f){const d=[...r];d.splice(u,1),o(d)}}else if(sh(r)){const u=new Set(r);s?u.add(i):u.delete(i),o(u)}else o(Y4(e,s))})},mounted:v_,beforeUpdate(e,n,t){e[mu]=Lf(t),v_(e,n,t)}};function v_(e,{value:n,oldValue:t},r){e._modelValue=n;let i;if(er(n))i=N0(n,r.props.value)>-1;else if(sh(n))i=n.has(r.props.value);else{if(n===t)return;i=wf(n,Y4(e,!0))}e.checked!==i&&(e.checked=i)}const ay={created(e,{value:n},t){e.checked=wf(n,t.props.value),e[mu]=Lf(t),jc(e,"change",()=>{e[mu](rd(e))})},beforeUpdate(e,{value:n,oldValue:t},r){e[mu]=Lf(r),n!==t&&(e.checked=wf(n,r.props.value))}},lo={deep:!0,created(e,{value:n,modifiers:{number:t}},r){const i=sh(n);jc(e,"change",()=>{const s=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>t?Jg(rd(o)):rd(o));e[mu](e.multiple?i?new Set(s):s:s[0]),e._assigning=!0,Xs(()=>{e._assigning=!1})}),e[mu]=Lf(r)},mounted(e,{value:n}){y_(e,n)},beforeUpdate(e,n,t){e[mu]=Lf(t)},updated(e,{value:n}){e._assigning||y_(e,n)}};function y_(e,n){const t=e.multiple,r=er(n);if(!(t&&!r&&!sh(n))){for(let i=0,s=e.options.length;i<s;i++){const o=e.options[i],u=rd(o);if(t)if(r){const f=typeof u;f==="string"||f==="number"?o.selected=n.some(d=>String(d)===String(u)):o.selected=N0(n,u)>-1}else o.selected=n.has(u);else if(wf(rd(o),n)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!t&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function rd(e){return"_value"in e?e._value:e.value}function Y4(e,n){const t=n?"_trueValue":"_falseValue";return t in e?e[t]:n}const ly={created(e,n,t){gg(e,n,t,null,"created")},mounted(e,n,t){gg(e,n,t,null,"mounted")},beforeUpdate(e,n,t,r){gg(e,n,t,r,"beforeUpdate")},updated(e,n,t,r){gg(e,n,t,r,"updated")}};function J4(e,n){switch(e){case"SELECT":return lo;case"TEXTAREA":return Zr;default:switch(n){case"checkbox":return Sl;case"radio":return ay;default:return Zr}}}function gg(e,n,t,r,i){const o=J4(e.tagName,t.props&&t.props.type)[i];o&&o(e,n,t,r)}function cA(){Zr.getSSRProps=({value:e})=>({value:e}),ay.getSSRProps=({value:e},n)=>{if(n.props&&wf(n.props.value,e))return{checked:!0}},Sl.getSSRProps=({value:e},n)=>{if(er(e)){if(n.props&&N0(e,n.props.value)>-1)return{checked:!0}}else if(sh(e)){if(n.props&&e.has(n.props.value))return{checked:!0}}else if(e)return{checked:!0}},ly.getSSRProps=(e,n)=>{if(typeof n.type!="string")return;const t=J4(n.type.toUpperCase(),n.props&&n.props.type);if(t.getSSRProps)return t.getSSRProps(e,n)}}const fA=["ctrl","shift","alt","meta"],hA={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,n)=>fA.some(t=>e[`${t}Key`]&&!n.includes(t))},Vc=(e,n)=>{const t=e._withMods||(e._withMods={}),r=n.join(".");return t[r]||(t[r]=(i,...s)=>{for(let o=0;o<n.length;o++){const u=hA[n[o]];if(u&&u(i,n))return}return e(i,...s)})},dA={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},pA=(e,n)=>{const t=e._withKeys||(e._withKeys={}),r=n.join(".");return t[r]||(t[r]=i=>{if(!("key"in i))return;const s=Pl(i.key);if(n.some(o=>o===s||dA[o]===s))return e(i)})},X4=uo({patchProp:YM},NM);let Qd,__=!1;function Q4(){return Qd||(Qd=p4(X4))}function e5(){return Qd=__?Qd:g4(X4),__=!0,Qd}const t5=(...e)=>{Q4().render(...e)},gA=(...e)=>{e5().hydrate(...e)},f0=(...e)=>{const n=Q4().createApp(...e),{mount:t}=n;return n.mount=r=>{const i=i5(r);if(!i)return;const s=n._component;!kr(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=t(i,!1,r5(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},n},n5=(...e)=>{const n=e5().createApp(...e),{mount:t}=n;return n.mount=r=>{const i=i5(r);if(i)return t(i,!0,r5(i))},n};function r5(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function i5(e){return yo(e)?document.querySelector(e):e}let b_=!1;const mA=()=>{b_||(b_=!0,cA(),FM())};/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const vA=()=>{},yA=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:Uw,BaseTransitionPropsValidators:J1,Comment:Ns,DeprecationTypes:kM,EffectScope:z1,ErrorCodes:HP,ErrorTypeStrings:LM,Fragment:Rn,KeepAlive:g6,ReactiveEffect:cp,Static:Qf,Suspense:oM,Teleport:kg,Text:_f,TrackOpTypes:RP,Transition:Wv,TransitionGroup:iA,TriggerOpTypes:FP,VueElement:Z0,assertNumber:VP,callWithAsyncErrorHandling:vu,callWithErrorHandling:ud,camelize:ma,capitalize:Ep,cloneVNode:vc,compatUtils:AM,compile:vA,computed:gr,createApp:f0,createBlock:Ua,createCommentVNode:un,createElementBlock:qe,createElementVNode:E,createHydrationRenderer:g4,createPropsRestProxy:B6,createRenderer:p4,createSSRApp:n5,createSlots:e4,createStaticVNode:uc,createTextVNode:pi,createVNode:fi,customRef:Pw,defineAsyncComponent:d6,defineComponent:us,defineCustomElement:q4,defineEmits:S6,defineExpose:C6,defineModel:M6,defineOptions:E6,defineProps:L6,defineSSRCustomElement:XM,defineSlots:P6,devtools:SM,effect:sP,effectScope:$1,getCurrentInstance:_u,getCurrentScope:U1,getCurrentWatcher:jP,getTransitionRawChildren:$0,guardReactiveProps:k4,h:q0,handleError:ah,hasInjectionContext:i4,hydrate:gA,hydrateOnIdle:a6,hydrateOnInteraction:f6,hydrateOnMediaQuery:c6,hydrateOnVisible:u6,initCustomFormatter:bM,initDirectivesForSSR:mA,inject:Kl,isMemoSame:R4,isProxy:F0,isReactive:hc,isReadonly:xf,isRef:Jo,isRuntimeOnly:vM,isShallow:Zl,isVNode:Uc,markRaw:j0,mergeDefaults:D6,mergeModels:N6,mergeProps:T4,nextTick:Xs,normalizeClass:Ri,normalizeProps:tP,normalizeStyle:rl,onActivated:Hw,onBeforeMount:Ww,onBeforeUnmount:cd,onBeforeUpdate:Q1,onDeactivated:Gw,onErrorCaptured:Jw,onMounted:$s,onRenderTracked:Yw,onRenderTriggered:Kw,onScopeDispose:cw,onServerPrefetch:Zw,onUnmounted:mc,onUpdated:V0,onWatcherCleanup:kw,openBlock:$e,popScopeId:KP,provide:Jd,proxyRefs:Z1,pushScopeId:ZP,queuePostFlushCb:dp,reactive:Jl,readonly:Iu,ref:Ft,registerRuntimeCompiler:mM,render:t5,renderList:Br,renderSlot:b6,resolveComponent:Xw,resolveDirective:_6,resolveDynamicComponent:y6,resolveFilter:MM,resolveTransitionHooks:ed,setBlockTracking:zv,setDevtoolsHook:CM,setTransitionHooks:$c,shallowReactive:q1,shallowReadonly:EP,shallowRef:W1,ssrContextKey:_4,ssrUtils:PM,stop:aP,toDisplayString:Wt,toHandlerKey:qd,toHandlers:w6,toRaw:Ti,toRef:BP,toRefs:Mw,toValue:AP,transformVNodeArgs:fM,triggerRef:MP,unref:Wn,useAttrs:T6,useCssModule:tA,useCssVars:jM,useHost:W4,useId:QP,useModel:X6,useSSRContext:b4,useShadowRoot:eA,useSlots:k6,useTemplateRef:e6,useTransitionState:Y1,vModelCheckbox:Sl,vModelDynamic:ly,vModelRadio:ay,vModelSelect:lo,vModelText:Zr,vShow:W0,version:F4,warn:xM,watch:So,watchEffect:yp,watchPostEffect:Y6,watchSyncEffect:w4,withAsyncContext:O6,withCtx:ql,withDefaults:A6,withDirectives:In,withKeys:pA,withMemo:wM,withModifiers:Vc,withScopeId:YP},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let o5;const K0=e=>o5=e,s5=Symbol();function Yv(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var ep;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(ep||(ep={}));function _A(){const e=$1(!0),n=e.run(()=>Ft({}));let t=[],r=[];const i=j0({install(s){K0(i),i._a=s,s.provide(s5,i),s.config.globalProperties.$pinia=i,r.forEach(o=>t.push(o)),r=[]},use(s){return this._a?t.push(s):r.push(s),this},_p:t,_a:null,_e:e,_s:new Map,state:n});return i}const a5=()=>{};function w_(e,n,t,r=a5){e.push(n);const i=()=>{const s=e.indexOf(n);s>-1&&(e.splice(s,1),r())};return!t&&U1()&&cw(i),i}function Ph(e,...n){e.slice().forEach(t=>{t(...n)})}const bA=e=>e(),x_=Symbol(),Jm=Symbol();function Jv(e,n){e instanceof Map&&n instanceof Map?n.forEach((t,r)=>e.set(r,t)):e instanceof Set&&n instanceof Set&&n.forEach(e.add,e);for(const t in n){if(!n.hasOwnProperty(t))continue;const r=n[t],i=e[t];Yv(i)&&Yv(r)&&e.hasOwnProperty(t)&&!Jo(r)&&!hc(r)?e[t]=Jv(i,r):e[t]=r}return e}const wA=Symbol();function xA(e){return!Yv(e)||!e.hasOwnProperty(wA)}const{assign:af}=Object;function LA(e){return!!(Jo(e)&&e.effect)}function SA(e,n,t,r){const{state:i,actions:s,getters:o}=n,u=t.state.value[e];let f;function d(){u||(t.state.value[e]=i?i():{});const g=Mw(t.state.value[e]);return af(g,s,Object.keys(o||{}).reduce((y,x)=>(y[x]=j0(gr(()=>{K0(t);const _=t._s.get(e);return o[x].call(_,_)})),y),{}))}return f=l5(e,d,n,t,r,!0),f}function l5(e,n,t={},r,i,s){let o;const u=af({actions:{}},t),f={deep:!0};let d,g,y=[],x=[],_;const M=r.state.value[e];!s&&!M&&(r.state.value[e]={}),Ft({});let D;function N(G){let R;d=g=!1,typeof G=="function"?(G(r.state.value[e]),R={type:ep.patchFunction,storeId:e,events:_}):(Jv(r.state.value[e],G),R={type:ep.patchObject,payload:G,storeId:e,events:_});const Z=D=Symbol();Xs().then(()=>{D===Z&&(d=!0)}),g=!0,Ph(y,R,r.state.value[e])}const O=s?function(){const{state:R}=t,Z=R?R():{};this.$patch(z=>{af(z,Z)})}:a5;function F(){o.stop(),y=[],x=[],r._s.delete(e)}const Y=(G,R="")=>{if(x_ in G)return G[Jm]=R,G;const Z=function(){K0(r);const z=Array.from(arguments),I=[],$=[];function U(ie){I.push(ie)}function W(ie){$.push(ie)}Ph(x,{args:z,name:Z[Jm],store:le,after:U,onError:W});let q;try{q=G.apply(this&&this.$id===e?this:le,z)}catch(ie){throw Ph($,ie),ie}return q instanceof Promise?q.then(ie=>(Ph(I,ie),ie)).catch(ie=>(Ph($,ie),Promise.reject(ie))):(Ph(I,q),q)};return Z[x_]=!0,Z[Jm]=R,Z},Q={_p:r,$id:e,$onAction:w_.bind(null,x),$patch:N,$reset:O,$subscribe(G,R={}){const Z=w_(y,G,R.detached,()=>z()),z=o.run(()=>So(()=>r.state.value[e],I=>{(R.flush==="sync"?g:d)&&G({storeId:e,type:ep.direct,events:_},I)},af({},f,R)));return Z},$dispose:F},le=Jl(Q);r._s.set(e,le);const xe=(r._a&&r._a.runWithContext||bA)(()=>r._e.run(()=>(o=$1()).run(()=>n({action:Y}))));for(const G in xe){const R=xe[G];if(Jo(R)&&!LA(R)||hc(R))s||(M&&xA(R)&&(Jo(R)?R.value=M[G]:Jv(R,M[G])),r.state.value[e][G]=R);else if(typeof R=="function"){const Z=Y(R,G);xe[G]=Z,u.actions[G]=R}}return af(le,xe),af(Ti(le),xe),Object.defineProperty(le,"$state",{get:()=>r.state.value[e],set:G=>{N(R=>{af(R,G)})}}),r._p.forEach(G=>{af(le,o.run(()=>G({store:le,app:r._a,pinia:r,options:u})))}),M&&s&&t.hydrate&&t.hydrate(le.$state,M),d=!0,g=!0,le}/*! #__NO_SIDE_EFFECTS__ */function kp(e,n,t){let r,i;const s=typeof n=="function";typeof e=="string"?(r=e,i=s?t:n):(i=e,r=e.id);function o(u,f){const d=i4();return u=u||(d?Kl(s5,null):null),u&&K0(u),u=o5,u._s.has(r)||(s?l5(r,n,i,u):SA(r,i,u)),u._s.get(r)}return o.$id=r,o}function u5(e,n){return function(){return e.apply(n,arguments)}}const{toString:CA}=Object.prototype,{getPrototypeOf:uy}=Object,Y0=(e=>n=>{const t=CA.call(n);return e[t]||(e[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Gu=e=>(e=e.toLowerCase(),n=>Y0(n)===e),J0=e=>n=>typeof n===e,{isArray:fd}=Array,bp=J0("undefined");function EA(e){return e!==null&&!bp(e)&&e.constructor!==null&&!bp(e.constructor)&&Yl(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const c5=Gu("ArrayBuffer");function PA(e){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(e):n=e&&e.buffer&&c5(e.buffer),n}const MA=J0("string"),Yl=J0("function"),f5=J0("number"),X0=e=>e!==null&&typeof e=="object",AA=e=>e===!0||e===!1,Og=e=>{if(Y0(e)!=="object")return!1;const n=uy(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},kA=Gu("Date"),TA=Gu("File"),DA=Gu("Blob"),NA=Gu("FileList"),BA=e=>X0(e)&&Yl(e.pipe),OA=e=>{let n;return e&&(typeof FormData=="function"&&e instanceof FormData||Yl(e.append)&&((n=Y0(e))==="formdata"||n==="object"&&Yl(e.toString)&&e.toString()==="[object FormData]"))},IA=Gu("URLSearchParams"),[RA,FA,jA,zA]=["ReadableStream","Request","Response","Headers"].map(Gu),$A=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Tp(e,n,{allOwnKeys:t=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),fd(e))for(r=0,i=e.length;r<i;r++)n.call(null,e[r],r,e);else{const s=t?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;let u;for(r=0;r<o;r++)u=s[r],n.call(null,e[u],u,e)}}function h5(e,n){n=n.toLowerCase();const t=Object.keys(e);let r=t.length,i;for(;r-- >0;)if(i=t[r],n===i.toLowerCase())return i;return null}const Zf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,d5=e=>!bp(e)&&e!==Zf;function Xv(){const{caseless:e}=d5(this)&&this||{},n={},t=(r,i)=>{const s=e&&h5(n,i)||i;Og(n[s])&&Og(r)?n[s]=Xv(n[s],r):Og(r)?n[s]=Xv({},r):fd(r)?n[s]=r.slice():n[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Tp(arguments[r],t);return n}const UA=(e,n,t,{allOwnKeys:r}={})=>(Tp(n,(i,s)=>{t&&Yl(i)?e[s]=u5(i,t):e[s]=i},{allOwnKeys:r}),e),VA=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),HA=(e,n,t,r)=>{e.prototype=Object.create(n.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:n.prototype}),t&&Object.assign(e.prototype,t)},GA=(e,n,t,r)=>{let i,s,o;const u={};if(n=n||{},e==null)return n;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],(!r||r(o,e,n))&&!u[o]&&(n[o]=e[o],u[o]=!0);e=t!==!1&&uy(e)}while(e&&(!t||t(e,n))&&e!==Object.prototype);return n},qA=(e,n,t)=>{e=String(e),(t===void 0||t>e.length)&&(t=e.length),t-=n.length;const r=e.indexOf(n,t);return r!==-1&&r===t},WA=e=>{if(!e)return null;if(fd(e))return e;let n=e.length;if(!f5(n))return null;const t=new Array(n);for(;n-- >0;)t[n]=e[n];return t},ZA=(e=>n=>e&&n instanceof e)(typeof Uint8Array<"u"&&uy(Uint8Array)),KA=(e,n)=>{const r=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=r.next())&&!i.done;){const s=i.value;n.call(e,s[0],s[1])}},YA=(e,n)=>{let t;const r=[];for(;(t=e.exec(n))!==null;)r.push(t);return r},JA=Gu("HTMLFormElement"),XA=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),L_=(({hasOwnProperty:e})=>(n,t)=>e.call(n,t))(Object.prototype),QA=Gu("RegExp"),p5=(e,n)=>{const t=Object.getOwnPropertyDescriptors(e),r={};Tp(t,(i,s)=>{let o;(o=n(i,s,e))!==!1&&(r[s]=o||i)}),Object.defineProperties(e,r)},ek=e=>{p5(e,(n,t)=>{if(Yl(e)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=e[t];if(Yl(r)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},tk=(e,n)=>{const t={},r=i=>{i.forEach(s=>{t[s]=!0})};return fd(e)?r(e):r(String(e).split(n)),t},nk=()=>{},rk=(e,n)=>e!=null&&Number.isFinite(e=+e)?e:n;function ik(e){return!!(e&&Yl(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const ok=e=>{const n=new Array(10),t=(r,i)=>{if(X0(r)){if(n.indexOf(r)>=0)return;if(!("toJSON"in r)){n[i]=r;const s=fd(r)?[]:{};return Tp(r,(o,u)=>{const f=t(o,i+1);!bp(f)&&(s[u]=f)}),n[i]=void 0,s}}return r};return t(e,0)},sk=Gu("AsyncFunction"),ak=e=>e&&(X0(e)||Yl(e))&&Yl(e.then)&&Yl(e.catch),g5=((e,n)=>e?setImmediate:n?((t,r)=>(Zf.addEventListener("message",({source:i,data:s})=>{i===Zf&&s===t&&r.length&&r.shift()()},!1),i=>{r.push(i),Zf.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Yl(Zf.postMessage)),lk=typeof queueMicrotask<"u"?queueMicrotask.bind(Zf):typeof process<"u"&&process.nextTick||g5,Jt={isArray:fd,isArrayBuffer:c5,isBuffer:EA,isFormData:OA,isArrayBufferView:PA,isString:MA,isNumber:f5,isBoolean:AA,isObject:X0,isPlainObject:Og,isReadableStream:RA,isRequest:FA,isResponse:jA,isHeaders:zA,isUndefined:bp,isDate:kA,isFile:TA,isBlob:DA,isRegExp:QA,isFunction:Yl,isStream:BA,isURLSearchParams:IA,isTypedArray:ZA,isFileList:NA,forEach:Tp,merge:Xv,extend:UA,trim:$A,stripBOM:VA,inherits:HA,toFlatObject:GA,kindOf:Y0,kindOfTest:Gu,endsWith:qA,toArray:WA,forEachEntry:KA,matchAll:YA,isHTMLForm:JA,hasOwnProperty:L_,hasOwnProp:L_,reduceDescriptors:p5,freezeMethods:ek,toObjectSet:tk,toCamelCase:XA,noop:nk,toFiniteNumber:rk,findKey:h5,global:Zf,isContextDefined:d5,isSpecCompliantForm:ik,toJSONObject:ok,isAsyncFn:sk,isThenable:ak,setImmediate:g5,asap:lk};function ii(e,n,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",n&&(this.code=n),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Jt.inherits(ii,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Jt.toJSONObject(this.config),code:this.code,status:this.status}}});const m5=ii.prototype,v5={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{v5[e]={value:e}});Object.defineProperties(ii,v5);Object.defineProperty(m5,"isAxiosError",{value:!0});ii.from=(e,n,t,r,i,s)=>{const o=Object.create(m5);return Jt.toFlatObject(e,o,function(f){return f!==Error.prototype},u=>u!=="isAxiosError"),ii.call(o,e.message,n,t,r,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const uk=null;function Qv(e){return Jt.isPlainObject(e)||Jt.isArray(e)}function y5(e){return Jt.endsWith(e,"[]")?e.slice(0,-2):e}function S_(e,n,t){return e?e.concat(n).map(function(i,s){return i=y5(i),!t&&s?"["+i+"]":i}).join(t?".":""):n}function ck(e){return Jt.isArray(e)&&!e.some(Qv)}const fk=Jt.toFlatObject(Jt,{},null,function(n){return/^is[A-Z]/.test(n)});function Q0(e,n,t){if(!Jt.isObject(e))throw new TypeError("target must be an object");n=n||new FormData,t=Jt.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(D,N){return!Jt.isUndefined(N[D])});const r=t.metaTokens,i=t.visitor||g,s=t.dots,o=t.indexes,f=(t.Blob||typeof Blob<"u"&&Blob)&&Jt.isSpecCompliantForm(n);if(!Jt.isFunction(i))throw new TypeError("visitor must be a function");function d(M){if(M===null)return"";if(Jt.isDate(M))return M.toISOString();if(!f&&Jt.isBlob(M))throw new ii("Blob is not supported. Use a Buffer instead.");return Jt.isArrayBuffer(M)||Jt.isTypedArray(M)?f&&typeof Blob=="function"?new Blob([M]):Buffer.from(M):M}function g(M,D,N){let O=M;if(M&&!N&&typeof M=="object"){if(Jt.endsWith(D,"{}"))D=r?D:D.slice(0,-2),M=JSON.stringify(M);else if(Jt.isArray(M)&&ck(M)||(Jt.isFileList(M)||Jt.endsWith(D,"[]"))&&(O=Jt.toArray(M)))return D=y5(D),O.forEach(function(Y,Q){!(Jt.isUndefined(Y)||Y===null)&&n.append(o===!0?S_([D],Q,s):o===null?D:D+"[]",d(Y))}),!1}return Qv(M)?!0:(n.append(S_(N,D,s),d(M)),!1)}const y=[],x=Object.assign(fk,{defaultVisitor:g,convertValue:d,isVisitable:Qv});function _(M,D){if(!Jt.isUndefined(M)){if(y.indexOf(M)!==-1)throw Error("Circular reference detected in "+D.join("."));y.push(M),Jt.forEach(M,function(O,F){(!(Jt.isUndefined(O)||O===null)&&i.call(n,O,Jt.isString(F)?F.trim():F,D,x))===!0&&_(O,D?D.concat(F):[F])}),y.pop()}}if(!Jt.isObject(e))throw new TypeError("data must be an object");return _(e),n}function C_(e){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return n[r]})}function cy(e,n){this._pairs=[],e&&Q0(e,this,n)}const _5=cy.prototype;_5.append=function(n,t){this._pairs.push([n,t])};_5.toString=function(n){const t=n?function(r){return n.call(this,r,C_)}:C_;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function hk(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function b5(e,n,t){if(!n)return e;const r=t&&t.encode||hk;Jt.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let s;if(i?s=i(n,t):s=Jt.isURLSearchParams(n)?n.toString():new cy(n,t).toString(r),s){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class E_{constructor(){this.handlers=[]}use(n,t,r){return this.handlers.push({fulfilled:n,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){Jt.forEach(this.handlers,function(r){r!==null&&n(r)})}}const w5={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},dk=typeof URLSearchParams<"u"?URLSearchParams:cy,pk=typeof FormData<"u"?FormData:null,gk=typeof Blob<"u"?Blob:null,mk={isBrowser:!0,classes:{URLSearchParams:dk,FormData:pk,Blob:gk},protocols:["http","https","file","blob","url","data"]},fy=typeof window<"u"&&typeof document<"u",e1=typeof navigator=="object"&&navigator||void 0,vk=fy&&(!e1||["ReactNative","NativeScript","NS"].indexOf(e1.product)<0),yk=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",_k=fy&&window.location.href||"http://localhost",bk=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:fy,hasStandardBrowserEnv:vk,hasStandardBrowserWebWorkerEnv:yk,navigator:e1,origin:_k},Symbol.toStringTag,{value:"Module"})),Fa={...bk,...mk};function wk(e,n){return Q0(e,new Fa.classes.URLSearchParams,Object.assign({visitor:function(t,r,i,s){return Fa.isNode&&Jt.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},n))}function xk(e){return Jt.matchAll(/\w+|\[(\w*)]/g,e).map(n=>n[0]==="[]"?"":n[1]||n[0])}function Lk(e){const n={},t=Object.keys(e);let r;const i=t.length;let s;for(r=0;r<i;r++)s=t[r],n[s]=e[s];return n}function x5(e){function n(t,r,i,s){let o=t[s++];if(o==="__proto__")return!0;const u=Number.isFinite(+o),f=s>=t.length;return o=!o&&Jt.isArray(i)?i.length:o,f?(Jt.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!u):((!i[o]||!Jt.isObject(i[o]))&&(i[o]=[]),n(t,r,i[o],s)&&Jt.isArray(i[o])&&(i[o]=Lk(i[o])),!u)}if(Jt.isFormData(e)&&Jt.isFunction(e.entries)){const t={};return Jt.forEachEntry(e,(r,i)=>{n(xk(r),i,t,0)}),t}return null}function Sk(e,n,t){if(Jt.isString(e))try{return(n||JSON.parse)(e),Jt.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(e)}const Dp={transitional:w5,adapter:["xhr","http","fetch"],transformRequest:[function(n,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,s=Jt.isObject(n);if(s&&Jt.isHTMLForm(n)&&(n=new FormData(n)),Jt.isFormData(n))return i?JSON.stringify(x5(n)):n;if(Jt.isArrayBuffer(n)||Jt.isBuffer(n)||Jt.isStream(n)||Jt.isFile(n)||Jt.isBlob(n)||Jt.isReadableStream(n))return n;if(Jt.isArrayBufferView(n))return n.buffer;if(Jt.isURLSearchParams(n))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let u;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return wk(n,this.formSerializer).toString();if((u=Jt.isFileList(n))||r.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return Q0(u?{"files[]":n}:n,f&&new f,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),Sk(n)):n}],transformResponse:[function(n){const t=this.transitional||Dp.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(Jt.isResponse(n)||Jt.isReadableStream(n))return n;if(n&&Jt.isString(n)&&(r&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(n)}catch(u){if(o)throw u.name==="SyntaxError"?ii.from(u,ii.ERR_BAD_RESPONSE,this,null,this.response):u}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Fa.classes.FormData,Blob:Fa.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Jt.forEach(["delete","get","head","post","put","patch"],e=>{Dp.headers[e]={}});const Ck=Jt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ek=e=>{const n={};let t,r,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!t||n[t]&&Ck[t])&&(t==="set-cookie"?n[t]?n[t].push(r):n[t]=[r]:n[t]=n[t]?n[t]+", "+r:r)}),n},P_=Symbol("internals");function Cd(e){return e&&String(e).trim().toLowerCase()}function Ig(e){return e===!1||e==null?e:Jt.isArray(e)?e.map(Ig):String(e)}function Pk(e){const n=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(e);)n[r[1]]=r[2];return n}const Mk=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Xm(e,n,t,r,i){if(Jt.isFunction(r))return r.call(this,n,t);if(i&&(n=t),!!Jt.isString(n)){if(Jt.isString(r))return n.indexOf(r)!==-1;if(Jt.isRegExp(r))return r.test(n)}}function Ak(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,t,r)=>t.toUpperCase()+r)}function kk(e,n){const t=Jt.toCamelCase(" "+n);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+t,{value:function(i,s,o){return this[r].call(this,n,i,s,o)},configurable:!0})})}let Ml=class{constructor(n){n&&this.set(n)}set(n,t,r){const i=this;function s(u,f,d){const g=Cd(f);if(!g)throw new Error("header name must be a non-empty string");const y=Jt.findKey(i,g);(!y||i[y]===void 0||d===!0||d===void 0&&i[y]!==!1)&&(i[y||f]=Ig(u))}const o=(u,f)=>Jt.forEach(u,(d,g)=>s(d,g,f));if(Jt.isPlainObject(n)||n instanceof this.constructor)o(n,t);else if(Jt.isString(n)&&(n=n.trim())&&!Mk(n))o(Ek(n),t);else if(Jt.isHeaders(n))for(const[u,f]of n.entries())s(f,u,r);else n!=null&&s(t,n,r);return this}get(n,t){if(n=Cd(n),n){const r=Jt.findKey(this,n);if(r){const i=this[r];if(!t)return i;if(t===!0)return Pk(i);if(Jt.isFunction(t))return t.call(this,i,r);if(Jt.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,t){if(n=Cd(n),n){const r=Jt.findKey(this,n);return!!(r&&this[r]!==void 0&&(!t||Xm(this,this[r],r,t)))}return!1}delete(n,t){const r=this;let i=!1;function s(o){if(o=Cd(o),o){const u=Jt.findKey(r,o);u&&(!t||Xm(r,r[u],u,t))&&(delete r[u],i=!0)}}return Jt.isArray(n)?n.forEach(s):s(n),i}clear(n){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const s=t[r];(!n||Xm(this,this[s],s,n,!0))&&(delete this[s],i=!0)}return i}normalize(n){const t=this,r={};return Jt.forEach(this,(i,s)=>{const o=Jt.findKey(r,s);if(o){t[o]=Ig(i),delete t[s];return}const u=n?Ak(s):String(s).trim();u!==s&&delete t[s],t[u]=Ig(i),r[u]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const t=Object.create(null);return Jt.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=n&&Jt.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,t])=>n+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...t){const r=new this(n);return t.forEach(i=>r.set(i)),r}static accessor(n){const r=(this[P_]=this[P_]={accessors:{}}).accessors,i=this.prototype;function s(o){const u=Cd(o);r[u]||(kk(i,o),r[u]=!0)}return Jt.isArray(n)?n.forEach(s):s(n),this}};Ml.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Jt.reduceDescriptors(Ml.prototype,({value:e},n)=>{let t=n[0].toUpperCase()+n.slice(1);return{get:()=>e,set(r){this[t]=r}}});Jt.freezeMethods(Ml);function Qm(e,n){const t=this||Dp,r=n||t,i=Ml.from(r.headers);let s=r.data;return Jt.forEach(e,function(u){s=u.call(t,s,i.normalize(),n?n.status:void 0)}),i.normalize(),s}function L5(e){return!!(e&&e.__CANCEL__)}function hd(e,n,t){ii.call(this,e??"canceled",ii.ERR_CANCELED,n,t),this.name="CanceledError"}Jt.inherits(hd,ii,{__CANCEL__:!0});function S5(e,n,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?e(t):n(new ii("Request failed with status code "+t.status,[ii.ERR_BAD_REQUEST,ii.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function Tk(e){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}function Dk(e,n){e=e||10;const t=new Array(e),r=new Array(e);let i=0,s=0,o;return n=n!==void 0?n:1e3,function(f){const d=Date.now(),g=r[s];o||(o=d),t[i]=f,r[i]=d;let y=s,x=0;for(;y!==i;)x+=t[y++],y=y%e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),d-o<n)return;const _=g&&d-g;return _?Math.round(x*1e3/_):void 0}}function Nk(e,n){let t=0,r=1e3/n,i,s;const o=(d,g=Date.now())=>{t=g,i=null,s&&(clearTimeout(s),s=null),e.apply(null,d)};return[(...d)=>{const g=Date.now(),y=g-t;y>=r?o(d,g):(i=d,s||(s=setTimeout(()=>{s=null,o(i)},r-y)))},()=>i&&o(i)]}const h0=(e,n,t=3)=>{let r=0;const i=Dk(50,250);return Nk(s=>{const o=s.loaded,u=s.lengthComputable?s.total:void 0,f=o-r,d=i(f),g=o<=u;r=o;const y={loaded:o,total:u,progress:u?o/u:void 0,bytes:f,rate:d||void 0,estimated:d&&u&&g?(u-o)/d:void 0,event:s,lengthComputable:u!=null,[n?"download":"upload"]:!0};e(y)},t)},M_=(e,n)=>{const t=e!=null;return[r=>n[0]({lengthComputable:t,total:e,loaded:r}),n[1]]},A_=e=>(...n)=>Jt.asap(()=>e(...n)),Bk=Fa.hasStandardBrowserEnv?((e,n)=>t=>(t=new URL(t,Fa.origin),e.protocol===t.protocol&&e.host===t.host&&(n||e.port===t.port)))(new URL(Fa.origin),Fa.navigator&&/(msie|trident)/i.test(Fa.navigator.userAgent)):()=>!0,Ok=Fa.hasStandardBrowserEnv?{write(e,n,t,r,i,s){const o=[e+"="+encodeURIComponent(n)];Jt.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),Jt.isString(r)&&o.push("path="+r),Jt.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Ik(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Rk(e,n){return n?e.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):e}function C5(e,n,t){let r=!Ik(n);return e&&(r||t==!1)?Rk(e,n):n}const k_=e=>e instanceof Ml?{...e}:e;function oh(e,n){n=n||{};const t={};function r(d,g,y,x){return Jt.isPlainObject(d)&&Jt.isPlainObject(g)?Jt.merge.call({caseless:x},d,g):Jt.isPlainObject(g)?Jt.merge({},g):Jt.isArray(g)?g.slice():g}function i(d,g,y,x){if(Jt.isUndefined(g)){if(!Jt.isUndefined(d))return r(void 0,d,y,x)}else return r(d,g,y,x)}function s(d,g){if(!Jt.isUndefined(g))return r(void 0,g)}function o(d,g){if(Jt.isUndefined(g)){if(!Jt.isUndefined(d))return r(void 0,d)}else return r(void 0,g)}function u(d,g,y){if(y in n)return r(d,g);if(y in e)return r(void 0,d)}const f={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u,headers:(d,g,y)=>i(k_(d),k_(g),y,!0)};return Jt.forEach(Object.keys(Object.assign({},e,n)),function(g){const y=f[g]||i,x=y(e[g],n[g],g);Jt.isUndefined(x)&&y!==u||(t[g]=x)}),t}const E5=e=>{const n=oh({},e);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:u}=n;n.headers=o=Ml.from(o),n.url=b5(C5(n.baseURL,n.url,n.allowAbsoluteUrls),e.params,e.paramsSerializer),u&&o.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let f;if(Jt.isFormData(t)){if(Fa.hasStandardBrowserEnv||Fa.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((f=o.getContentType())!==!1){const[d,...g]=f?f.split(";").map(y=>y.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...g].join("; "))}}if(Fa.hasStandardBrowserEnv&&(r&&Jt.isFunction(r)&&(r=r(n)),r||r!==!1&&Bk(n.url))){const d=i&&s&&Ok.read(s);d&&o.set(i,d)}return n},Fk=typeof XMLHttpRequest<"u",jk=Fk&&function(e){return new Promise(function(t,r){const i=E5(e);let s=i.data;const o=Ml.from(i.headers).normalize();let{responseType:u,onUploadProgress:f,onDownloadProgress:d}=i,g,y,x,_,M;function D(){_&&_(),M&&M(),i.cancelToken&&i.cancelToken.unsubscribe(g),i.signal&&i.signal.removeEventListener("abort",g)}let N=new XMLHttpRequest;N.open(i.method.toUpperCase(),i.url,!0),N.timeout=i.timeout;function O(){if(!N)return;const Y=Ml.from("getAllResponseHeaders"in N&&N.getAllResponseHeaders()),le={data:!u||u==="text"||u==="json"?N.responseText:N.response,status:N.status,statusText:N.statusText,headers:Y,config:e,request:N};S5(function(xe){t(xe),D()},function(xe){r(xe),D()},le),N=null}"onloadend"in N?N.onloadend=O:N.onreadystatechange=function(){!N||N.readyState!==4||N.status===0&&!(N.responseURL&&N.responseURL.indexOf("file:")===0)||setTimeout(O)},N.onabort=function(){N&&(r(new ii("Request aborted",ii.ECONNABORTED,e,N)),N=null)},N.onerror=function(){r(new ii("Network Error",ii.ERR_NETWORK,e,N)),N=null},N.ontimeout=function(){let Q=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const le=i.transitional||w5;i.timeoutErrorMessage&&(Q=i.timeoutErrorMessage),r(new ii(Q,le.clarifyTimeoutError?ii.ETIMEDOUT:ii.ECONNABORTED,e,N)),N=null},s===void 0&&o.setContentType(null),"setRequestHeader"in N&&Jt.forEach(o.toJSON(),function(Q,le){N.setRequestHeader(le,Q)}),Jt.isUndefined(i.withCredentials)||(N.withCredentials=!!i.withCredentials),u&&u!=="json"&&(N.responseType=i.responseType),d&&([x,M]=h0(d,!0),N.addEventListener("progress",x)),f&&N.upload&&([y,_]=h0(f),N.upload.addEventListener("progress",y),N.upload.addEventListener("loadend",_)),(i.cancelToken||i.signal)&&(g=Y=>{N&&(r(!Y||Y.type?new hd(null,e,N):Y),N.abort(),N=null)},i.cancelToken&&i.cancelToken.subscribe(g),i.signal&&(i.signal.aborted?g():i.signal.addEventListener("abort",g)));const F=Tk(i.url);if(F&&Fa.protocols.indexOf(F)===-1){r(new ii("Unsupported protocol "+F+":",ii.ERR_BAD_REQUEST,e));return}N.send(s||null)})},zk=(e,n)=>{const{length:t}=e=e?e.filter(Boolean):[];if(n||t){let r=new AbortController,i;const s=function(d){if(!i){i=!0,u();const g=d instanceof Error?d:this.reason;r.abort(g instanceof ii?g:new hd(g instanceof Error?g.message:g))}};let o=n&&setTimeout(()=>{o=null,s(new ii(`timeout ${n} of ms exceeded`,ii.ETIMEDOUT))},n);const u=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(s):d.removeEventListener("abort",s)}),e=null)};e.forEach(d=>d.addEventListener("abort",s));const{signal:f}=r;return f.unsubscribe=()=>Jt.asap(u),f}},$k=function*(e,n){let t=e.byteLength;if(t<n){yield e;return}let r=0,i;for(;r<t;)i=r+n,yield e.slice(r,i),r=i},Uk=async function*(e,n){for await(const t of Vk(e))yield*$k(t,n)},Vk=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const n=e.getReader();try{for(;;){const{done:t,value:r}=await n.read();if(t)break;yield r}}finally{await n.cancel()}},T_=(e,n,t,r)=>{const i=Uk(e,n);let s=0,o,u=f=>{o||(o=!0,r&&r(f))};return new ReadableStream({async pull(f){try{const{done:d,value:g}=await i.next();if(d){u(),f.close();return}let y=g.byteLength;if(t){let x=s+=y;t(x)}f.enqueue(new Uint8Array(g))}catch(d){throw u(d),d}},cancel(f){return u(f),i.return()}},{highWaterMark:2})},em=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",P5=em&&typeof ReadableStream=="function",Hk=em&&(typeof TextEncoder=="function"?(e=>n=>e.encode(n))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),M5=(e,...n)=>{try{return!!e(...n)}catch{return!1}},Gk=P5&&M5(()=>{let e=!1;const n=new Request(Fa.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!n}),D_=64*1024,t1=P5&&M5(()=>Jt.isReadableStream(new Response("").body)),d0={stream:t1&&(e=>e.body)};em&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(n=>{!d0[n]&&(d0[n]=Jt.isFunction(e[n])?t=>t[n]():(t,r)=>{throw new ii(`Response type '${n}' is not supported`,ii.ERR_NOT_SUPPORT,r)})})})(new Response);const qk=async e=>{if(e==null)return 0;if(Jt.isBlob(e))return e.size;if(Jt.isSpecCompliantForm(e))return(await new Request(Fa.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Jt.isArrayBufferView(e)||Jt.isArrayBuffer(e))return e.byteLength;if(Jt.isURLSearchParams(e)&&(e=e+""),Jt.isString(e))return(await Hk(e)).byteLength},Wk=async(e,n)=>{const t=Jt.toFiniteNumber(e.getContentLength());return t??qk(n)},Zk=em&&(async e=>{let{url:n,method:t,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:u,onUploadProgress:f,responseType:d,headers:g,withCredentials:y="same-origin",fetchOptions:x}=E5(e);d=d?(d+"").toLowerCase():"text";let _=zk([i,s&&s.toAbortSignal()],o),M;const D=_&&_.unsubscribe&&(()=>{_.unsubscribe()});let N;try{if(f&&Gk&&t!=="get"&&t!=="head"&&(N=await Wk(g,r))!==0){let le=new Request(n,{method:"POST",body:r,duplex:"half"}),ce;if(Jt.isFormData(r)&&(ce=le.headers.get("content-type"))&&g.setContentType(ce),le.body){const[xe,G]=M_(N,h0(A_(f)));r=T_(le.body,D_,xe,G)}}Jt.isString(y)||(y=y?"include":"omit");const O="credentials"in Request.prototype;M=new Request(n,{...x,signal:_,method:t.toUpperCase(),headers:g.normalize().toJSON(),body:r,duplex:"half",credentials:O?y:void 0});let F=await fetch(M);const Y=t1&&(d==="stream"||d==="response");if(t1&&(u||Y&&D)){const le={};["status","statusText","headers"].forEach(R=>{le[R]=F[R]});const ce=Jt.toFiniteNumber(F.headers.get("content-length")),[xe,G]=u&&M_(ce,h0(A_(u),!0))||[];F=new Response(T_(F.body,D_,xe,()=>{G&&G(),D&&D()}),le)}d=d||"text";let Q=await d0[Jt.findKey(d0,d)||"text"](F,e);return!Y&&D&&D(),await new Promise((le,ce)=>{S5(le,ce,{data:Q,headers:Ml.from(F.headers),status:F.status,statusText:F.statusText,config:e,request:M})})}catch(O){throw D&&D(),O&&O.name==="TypeError"&&/fetch/i.test(O.message)?Object.assign(new ii("Network Error",ii.ERR_NETWORK,e,M),{cause:O.cause||O}):ii.from(O,O&&O.code,e,M)}}),n1={http:uk,xhr:jk,fetch:Zk};Jt.forEach(n1,(e,n)=>{if(e){try{Object.defineProperty(e,"name",{value:n})}catch{}Object.defineProperty(e,"adapterName",{value:n})}});const N_=e=>`- ${e}`,Kk=e=>Jt.isFunction(e)||e===null||e===!1,A5={getAdapter:e=>{e=Jt.isArray(e)?e:[e];const{length:n}=e;let t,r;const i={};for(let s=0;s<n;s++){t=e[s];let o;if(r=t,!Kk(t)&&(r=n1[(o=String(t)).toLowerCase()],r===void 0))throw new ii(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([u,f])=>`adapter ${u} `+(f===!1?"is not supported by the environment":"is not available in the build"));let o=n?s.length>1?`since :
`+s.map(N_).join(`
`):" "+N_(s[0]):"as no adapter specified";throw new ii("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:n1};function ev(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new hd(null,e)}function B_(e){return ev(e),e.headers=Ml.from(e.headers),e.data=Qm.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),A5.getAdapter(e.adapter||Dp.adapter)(e).then(function(r){return ev(e),r.data=Qm.call(e,e.transformResponse,r),r.headers=Ml.from(r.headers),r},function(r){return L5(r)||(ev(e),r&&r.response&&(r.response.data=Qm.call(e,e.transformResponse,r.response),r.response.headers=Ml.from(r.response.headers))),Promise.reject(r)})}const k5="1.8.4",tm={};["object","boolean","number","function","string","symbol"].forEach((e,n)=>{tm[e]=function(r){return typeof r===e||"a"+(n<1?"n ":" ")+e}});const O_={};tm.transitional=function(n,t,r){function i(s,o){return"[Axios v"+k5+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,u)=>{if(n===!1)throw new ii(i(o," has been removed"+(t?" in "+t:"")),ii.ERR_DEPRECATED);return t&&!O_[o]&&(O_[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),n?n(s,o,u):!0}};tm.spelling=function(n){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${n}`),!0)};function Yk(e,n,t){if(typeof e!="object")throw new ii("options must be an object",ii.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=n[s];if(o){const u=e[s],f=u===void 0||o(u,s,e);if(f!==!0)throw new ii("option "+s+" must be "+f,ii.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new ii("Unknown option "+s,ii.ERR_BAD_OPTION)}}const Rg={assertOptions:Yk,validators:tm},nc=Rg.validators;let eh=class{constructor(n){this.defaults=n,this.interceptors={request:new E_,response:new E_}}async request(n,t){try{return await this._request(n,t)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(n,t){typeof n=="string"?(t=t||{},t.url=n):t=n||{},t=oh(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:s}=t;r!==void 0&&Rg.assertOptions(r,{silentJSONParsing:nc.transitional(nc.boolean),forcedJSONParsing:nc.transitional(nc.boolean),clarifyTimeoutError:nc.transitional(nc.boolean)},!1),i!=null&&(Jt.isFunction(i)?t.paramsSerializer={serialize:i}:Rg.assertOptions(i,{encode:nc.function,serialize:nc.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Rg.assertOptions(t,{baseUrl:nc.spelling("baseURL"),withXsrfToken:nc.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&Jt.merge(s.common,s[t.method]);s&&Jt.forEach(["delete","get","head","post","put","patch","common"],M=>{delete s[M]}),t.headers=Ml.concat(o,s);const u=[];let f=!0;this.interceptors.request.forEach(function(D){typeof D.runWhen=="function"&&D.runWhen(t)===!1||(f=f&&D.synchronous,u.unshift(D.fulfilled,D.rejected))});const d=[];this.interceptors.response.forEach(function(D){d.push(D.fulfilled,D.rejected)});let g,y=0,x;if(!f){const M=[B_.bind(this),void 0];for(M.unshift.apply(M,u),M.push.apply(M,d),x=M.length,g=Promise.resolve(t);y<x;)g=g.then(M[y++],M[y++]);return g}x=u.length;let _=t;for(y=0;y<x;){const M=u[y++],D=u[y++];try{_=M(_)}catch(N){D.call(this,N);break}}try{g=B_.call(this,_)}catch(M){return Promise.reject(M)}for(y=0,x=d.length;y<x;)g=g.then(d[y++],d[y++]);return g}getUri(n){n=oh(this.defaults,n);const t=C5(n.baseURL,n.url,n.allowAbsoluteUrls);return b5(t,n.params,n.paramsSerializer)}};Jt.forEach(["delete","get","head","options"],function(n){eh.prototype[n]=function(t,r){return this.request(oh(r||{},{method:n,url:t,data:(r||{}).data}))}});Jt.forEach(["post","put","patch"],function(n){function t(r){return function(s,o,u){return this.request(oh(u||{},{method:n,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}eh.prototype[n]=t(),eh.prototype[n+"Form"]=t(!0)});let Jk=class T5{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(u=>{r.subscribe(u),s=u}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},n(function(s,o,u){r.reason||(r.reason=new hd(s,o,u),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const t=this._listeners.indexOf(n);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const n=new AbortController,t=r=>{n.abort(r)};return this.subscribe(t),n.signal.unsubscribe=()=>this.unsubscribe(t),n.signal}static source(){let n;return{token:new T5(function(i){n=i}),cancel:n}}};function Xk(e){return function(t){return e.apply(null,t)}}function Qk(e){return Jt.isObject(e)&&e.isAxiosError===!0}const r1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(r1).forEach(([e,n])=>{r1[n]=e});function D5(e){const n=new eh(e),t=u5(eh.prototype.request,n);return Jt.extend(t,eh.prototype,n,{allOwnKeys:!0}),Jt.extend(t,n,null,{allOwnKeys:!0}),t.create=function(i){return D5(oh(e,i))},t}const xs=D5(Dp);xs.Axios=eh;xs.CanceledError=hd;xs.CancelToken=Jk;xs.isCancel=L5;xs.VERSION=k5;xs.toFormData=Q0;xs.AxiosError=ii;xs.Cancel=xs.CanceledError;xs.all=function(n){return Promise.all(n)};xs.spread=Xk;xs.isAxiosError=Qk;xs.mergeConfig=oh;xs.AxiosHeaders=Ml;xs.formToJSON=e=>x5(Jt.isHTMLForm(e)?new FormData(e):e);xs.getAdapter=A5.getAdapter;xs.HttpStatusCode=r1;xs.default=xs;const{Axios:XV,AxiosError:QV,CanceledError:eH,isCancel:tH,CancelToken:nH,VERSION:rH,all:iH,Cancel:oH,isAxiosError:sH,spread:aH,toFormData:lH,AxiosHeaders:uH,HttpStatusCode:cH,formToJSON:fH,getAdapter:hH,mergeConfig:dH}=xs,gn=Jl({measures:[],longTasks:[],memorySnapshots:[],framesPerSecond:0,lastFpsUpdate:0,frameCount:0,isRecording:!1,isEnabled:!1,startTime:0,currentOperation:null,operationStack:[],operationHistory:[]});let bf=null,Kf=null;const eT=1e3;function nm(){if(gn.isEnabled){gn.isRecording=!0,gn.startTime=performance.now(),gn.frameCount=0,gn.lastFpsUpdate=performance.now();try{window.PerformanceObserver&&PerformanceObserver.supportedEntryTypes.includes("longtask")&&(bf=new PerformanceObserver(e=>{e.getEntries().forEach(t=>{gn.longTasks.push({duration:t.duration,startTime:t.startTime,name:t.name,component:Vu()})})}),bf.observe({entryTypes:["longtask"]}))}catch(e){console.warn("PerformanceObserver pour longues tâches non supporté",e)}tT(),hy()}}function p0(){gn.isRecording=!1,bf&&(bf.disconnect(),bf=null),I5()}function i1(){bf&&(bf.disconnect(),bf=null),I5(),gn.measures=[],gn.longTasks=[],gn.memorySnapshots=[],gn.operationHistory=[],gn.frameCount=0,gn.framesPerSecond=0,gn.lastFpsUpdate=0,gn.isEnabled&&nm()}function N5(e,n,t){if(!gn.isEnabled||!gn.isRecording)return()=>{};const r=performance.now(),i=gn.currentOperation;return gn.currentOperation=e,gn.operationStack.push(e),()=>{const s=performance.now()-r;gn.operationStack.pop(),gn.currentOperation=gn.operationStack[gn.operationStack.length-1]||null,gn.measures.push({name:e,startTime:r,duration:s,component:n||Vu(),info:t,parentOperation:i||void 0}),s>10&&gn.operationHistory.push({operation:e,component:n||Vu()||"unknown",durationMs:s,timestamp:Date.now()})}}async function B5(e,n,t,r){if(!gn.isEnabled||!gn.isRecording)return n();const i=performance.now(),s=gn.currentOperation;gn.currentOperation=e,gn.operationStack.push(e);try{return await n()}finally{const o=performance.now()-i;gn.operationStack.pop(),gn.currentOperation=gn.operationStack[gn.operationStack.length-1]||null,gn.measures.push({name:e,startTime:i,duration:o,component:t||Vu(),info:r,parentOperation:s||void 0}),o>10&&gn.operationHistory.push({operation:e,component:t||Vu()||"unknown",durationMs:o,timestamp:Date.now()})}}function O5(e,n,t,r){if(!gn.isEnabled||!gn.isRecording)return n();const i=performance.now(),s=gn.currentOperation;gn.currentOperation=e,gn.operationStack.push(e);try{return n()}finally{const o=performance.now()-i;gn.operationStack.pop(),gn.currentOperation=gn.operationStack[gn.operationStack.length-1]||null,gn.measures.push({name:e,startTime:i,duration:o,component:t||Vu(),info:r,parentOperation:s||void 0}),o>10&&gn.operationHistory.push({operation:e,component:t||Vu()||"unknown",durationMs:o,timestamp:Date.now()})}}function hy(){!gn.isEnabled||!gn.isRecording||(performance.memory?gn.memorySnapshots.push({jsHeapSizeLimit:performance.memory.jsHeapSizeLimit,totalJSHeapSize:performance.memory.totalJSHeapSize,usedJSHeapSize:performance.memory.usedJSHeapSize,timestamp:performance.now()}):gn.memorySnapshots.push({timestamp:performance.now()}))}function tT(){Kf!==null&&cancelAnimationFrame(Kf),gn.frameCount=0,gn.lastFpsUpdate=performance.now();function e(){gn.frameCount++;const n=performance.now();n-gn.lastFpsUpdate>=eT&&(gn.framesPerSecond=Math.round(gn.frameCount*1e3/(n-gn.lastFpsUpdate)),gn.frameCount=0,gn.lastFpsUpdate=n),gn.isRecording&&(Kf=requestAnimationFrame(e))}Kf=requestAnimationFrame(e)}function I5(){Kf!==null&&(cancelAnimationFrame(Kf),Kf=null)}function Vu(){return""}function o1(e){gn.isEnabled=e,e&&!gn.isRecording?nm():!e&&gn.isRecording&&p0()}function R5(e,n,t){return(...r)=>{if(!gn.isEnabled||!gn.isRecording)return e(...r);const i=performance.now();try{return e(...r)}finally{const s=performance.now()-i;gn.measures.push({name:n,startTime:i,duration:s,component:t||Vu(),info:{args:r}}),s>10&&gn.operationHistory.push({operation:n,component:t||Vu()||"unknown",durationMs:s,timestamp:Date.now()})}}}function F5(e,n,t){return async(...r)=>{if(!gn.isEnabled||!gn.isRecording)return await e(...r);const i=performance.now();try{return await e(...r)}finally{const s=performance.now()-i;gn.measures.push({name:n,startTime:i,duration:s,component:t||Vu(),info:{args:r}}),s>10&&gn.operationHistory.push({operation:n,component:t||Vu()||"unknown",durationMs:s,timestamp:Date.now()})}}}function nT(e,n){const t=gn.measures.filter(o=>o.startTime>=e&&o.startTime+o.duration<=n),r=new Map,i=[];t.forEach(o=>{o.parentOperation?(r.has(o.parentOperation)||r.set(o.parentOperation,[]),r.get(o.parentOperation).push(o)):i.push(o)});function s(o){const u=r.get(o.name)||[];return{operation:o.name,duration:o.duration,component:o.component,children:u.sort((f,d)=>d.duration-f.duration).map(f=>s(f))}}return i.sort((o,u)=>u.duration-o.duration).map(o=>s(o))}function s1(e,n){const t=e||gn.startTime,r=n||performance.now(),i=nT(t,r),s=r-t,o=new Map;function u(d){const g=o.get(d.operation)||{duration:0,component:d.component};g.duration+=d.duration,o.set(d.operation,g),d.children.forEach(y=>u(y))}i.forEach(d=>u(d));const f=Array.from(o.entries()).map(([d,{duration:g,component:y}])=>({operation:d,duration:g,component:y,impact:g/s*100})).sort((d,g)=>g.impact-d.impact).slice(0,10);return{criticalPaths:i,totalTime:s,bottlenecks:f}}function dd(){const e=Ft(!1);$s(()=>{try{const r=new URL(window.location.href).searchParams.get("perf")==="true";e.value=r,o1(r),i1()}catch(t){console.warn("Erreur lors de la vérification du paramètre perf:",t),e.value=!1,o1(!1)}}),mc(()=>{gn.isRecording&&p0()});const n=(t,r)=>{if(!gn.isEnabled||!gn.isRecording)return null;const i=gn.measures.find(d=>d.name===t&&d.startTime===r);if(!i)return null;const s=i.startTime+i.duration,o=gn.measures.filter(d=>d.startTime>=i.startTime&&d.startTime<=s&&d!==i),u=gn.longTasks.filter(d=>d.startTime>=i.startTime&&d.startTime<=s),f=gn.memorySnapshots.filter(d=>d.timestamp>=i.startTime&&d.timestamp<=s);return{operation:{name:i.name,component:i.component,startTime:i.startTime,duration:i.duration,info:i.info},context:{relatedOperations:o.map(d=>({name:d.name,component:d.component,startTime:d.startTime-i.startTime,duration:d.duration,info:d.info})),longTasks:u.map(d=>({duration:d.duration,startTime:d.startTime-i.startTime,name:d.name,component:d.component})),memorySnapshots:f.map(d=>({...d,timestamp:d.timestamp-i.startTime}))},summary:{totalRelatedOperations:o.length,totalLongTasks:u.length,maxLongTaskDuration:Math.max(...u.map(d=>d.duration),0),memoryDelta:f.length>1?(f[f.length-1].usedJSHeapSize||0)-(f[0].usedJSHeapSize||0):0}}};return{isEnabled:Iu(Ft(gn.isEnabled)),isQueryParamEnabled:Iu(e),isRecording:Iu(Ft(gn.isRecording)),measures:Iu(Ft(gn.measures)),longTasks:Iu(Ft(gn.longTasks)),memorySnapshots:Iu(Ft(gn.memorySnapshots)),framesPerSecond:Iu(Ft(gn.framesPerSecond)),operationHistory:Iu(Ft(gn.operationHistory)),startRecording:nm,stopRecording:p0,clearRecording:i1,startMeasure:N5,measure:O5,measureAsync:B5,captureMemorySnapshot:hy,createPerformanceTracker:R5,createAsyncPerformanceTracker:F5,getOperationDetails:n,getSlowOperations:()=>!gn.isEnabled||!gn.isRecording?[]:[...gn.measures].sort((t,r)=>r.duration-t.duration).slice(0,10),getLongTasks:()=>!gn.isEnabled||!gn.isRecording?[]:[...gn.longTasks].sort((t,r)=>r.duration-t.duration),getPerformanceReport:()=>{if(!gn.isEnabled||!gn.isRecording)return null;const t=s1();return{totalMeasures:gn.measures.length,totalLongTasks:gn.longTasks.length,slowestOperations:[...gn.measures].sort((r,i)=>i.duration-r.duration).slice(0,10),averageFps:gn.framesPerSecond,memoryUsage:gn.memorySnapshots.length>0?gn.memorySnapshots[gn.memorySnapshots.length-1]:null,operationsByComponent:rT(gn.measures),criticalPaths:t.criticalPaths,bottlenecks:t.bottlenecks,recordingDuration:gn.isRecording?performance.now()-gn.startTime:null}},analyzeCriticalPaths:s1}}function rT(e){if(!gn.isEnabled||!gn.isRecording)return{};const n={};return e.forEach(t=>{const r=t.component||"unknown";n[r]||(n[r]={totalTime:0,callCount:0,operations:{}}),n[r].totalTime+=t.duration,n[r].callCount++,n[r].operations[t.name]||(n[r].operations[t.name]={totalTime:0,callCount:0}),n[r].operations[t.name].totalTime+=t.duration,n[r].operations[t.name].callCount++}),n}const dn={startRecording:nm,stopRecording:p0,clearRecording:i1,startMeasure:N5,measure:O5,measureAsync:B5,captureMemorySnapshot:hy,createPerformanceTracker:R5,createAsyncPerformanceTracker:F5,setEnabled:o1,analyzeCriticalPaths:s1},Un=xs.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0}),Ds=dd();function j5(e){var r;const t=`; ${document.cookie}`.split(`; ${e}=`);return t.length===2&&((r=t.pop())==null?void 0:r.split(";").shift())||null}Un.interceptors.request.use(async e=>{const n=Ds.startMeasure("api_request_interceptor","ApiService");try{const t=j5("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),console.log("Request config:",{url:e.url,method:e.method,headers:e.headers,withCredentials:e.withCredentials}),e}finally{n()}},e=>(console.error("Request interceptor error:",e),Promise.reject(e)));Un.interceptors.response.use(e=>e,async e=>{var r,i;const n=Ds.startMeasure("api_response_interceptor","ApiService"),t=e.config;try{if(((r=e.response)==null?void 0:r.status)===401&&!t._retry&&!((i=t.url)!=null&&i.includes("/token/refresh/"))){t._retry=!0;const s=va();try{await Ds.measureAsync("token_refresh",()=>s.refreshToken(),"ApiService");const o=j5("access_token");if(o)return t.headers.Authorization=`Bearer ${o}`,Un(t)}catch(o){return await s.logout(),window.location.pathname!=="/login"&&(window.location.href="/login"),Promise.reject(o)}}return Promise.reject(e)}finally{n()}});function iT(e){var t;const n=[];if((t=e.response)!=null&&t.data){const r=e.response.data;typeof r=="object"&&!Array.isArray(r)?Object.entries(r).forEach(([i,s])=>{Array.isArray(s)?s.forEach(o=>{n.push({field:i,message:o})}):typeof s=="string"&&n.push({field:i,message:s})}):typeof r=="string"?n.push({field:"non_field_error",message:r}):r.detail&&n.push({field:"non_field_error",message:r.detail})}else e.message&&n.push({field:"non_field_error",message:`Erreur de connexion: ${e.message}`});return n.length===0&&n.push({field:"non_field_error",message:"Une erreur inconnue s'est produite"}),n}async function Fg(e){console.log("[fetchUsersByHierarchy] Récupération des utilisateurs:",e);const n={role:e.role};e.entrepriseId&&(n.entreprise=e.entrepriseId),e.salarieId&&(n.salarie=e.salarieId),e.includeDetails&&(n.include_plans=!0),e.search&&(n.search=e.search),console.log("[fetchUsersByHierarchy] Filtres appliqués:",n);try{const t=await Cl.getUsers(n);return console.log(`[fetchUsersByHierarchy] Résultat (${t.data.length} utilisateurs):`,t.data),t.data}catch(t){throw console.error("[fetchUsersByHierarchy] Erreur lors de la récupération des utilisateurs:",t),t}}const Cl={async getUsers(e={}){const n=Ds.startMeasure("get_users","UserService");try{return await Ds.measureAsync("get_users_request",()=>Un.get("/users/",{params:e}),"UserService")}finally{n()}},async getUser(e){return await Un.get(`/users/${e}/`)},async createUser(e){return await Un.post("/users/",e)},async updateUser(e,n){return await Un.patch(`/users/${e}/`,n)},async deleteUser(e){return await Un.delete(`/users/${e}/`)},async getEntreprises(){return await Un.get("/users/",{params:{role:"ENTREPRISE"}})},async getSalaries(e){const n={role:"SALARIE"};return e&&(n.entreprise=e),await Un.get("/users/",{params:n})},async getSalarieVisiteurs(e){return await Un.get("/users/",{params:{role:"VISITEUR",salarie:e}})},async getEntrepriseVisiteurs(e){return await Un.get("/users/",{params:{role:"VISITEUR",entreprise:e}})},async getUsersByHierarchy(e){const n=Ds.startMeasure("get_users_hierarchy","UserService");try{const t=Ds.measure("prepare_hierarchy_filters",()=>{const r={role:e.role};return e.entrepriseId&&(r.entreprise=e.entrepriseId),e.salarieId&&(r.salarie=e.salarieId),e.includeDetails&&(r.include_plans=!0),e.search&&(r.search=e.search),r},"UserService");return await Ds.measureAsync("get_users_hierarchy_request",()=>Un.get("/users/",{params:t}),"UserService")}finally{n()}},async getEntrepriseSalaries(e){return await Un.get("/users/",{params:{role:"SALARIE",entreprise:e}})},async getVisiteurs(e,n){const t={role:"VISITEUR"};return e&&(t.salarie=e),n&&(t.entreprise=n),await Un.get("/users/",{params:t})},async assignEntrepriseToSalarie(e,n){return await Un.patch(`/users/${e}/`,{entreprise:n})},async assignSalarieToVisiteur(e,n){return await Un.patch(`/users/${e}/`,{salarie:n})},formatLogoFileName(e){return Ds.measure("format_logo_filename",()=>{var i;const n=new Date().getTime(),t=((i=e.name.split(".").pop())==null?void 0:i.toLowerCase())||"";return`${e.name.split(".")[0].toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}-${n}.${t}`},"UserService")},async uploadLogo(e){const n=Ds.startMeasure("upload_logo","UserService");try{const t=new FormData,r=this.formatLogoFileName(e),i=new File([e],r,{type:e.type});return t.append("logo",i),await Ds.measureAsync("upload_logo_request",()=>Un.post("/users/upload_logo/",t,{headers:{"Content-Type":"multipart/form-data"}}),"UserService")}finally{n()}}},mg={async getPlans(){const e=Ds.startMeasure("get_plans","IrrigationService");try{return await Ds.measureAsync("get_plans_request",()=>Un.get("/plans/"),"IrrigationService")}finally{e()}},async createPlan(e){const n=Ds.startMeasure("create_plan","IrrigationService");try{const t=Ds.measure("format_plan_data",()=>({...e,entreprise:e.entreprise?typeof e.entreprise=="object"&&"id"in e.entreprise?e.entreprise.id:Number(e.entreprise):null,salarie:e.salarie?typeof e.salarie=="object"&&"id"in e.salarie?e.salarie.id:Number(e.salarie):null,visiteur:e.visiteur?typeof e.visiteur=="object"&&"id"in e.visiteur?e.visiteur.id:Number(e.visiteur):null}),"IrrigationService");return await Ds.measureAsync("create_plan_request",()=>Un.post("/plans/",t),"IrrigationService")}finally{n()}},async updatePlan(e,n){const t=Ds.startMeasure("update_plan","IrrigationService");try{return await Ds.measureAsync("update_plan_request",()=>Un.put(`/plans/${e}/`,n),"IrrigationService")}finally{t()}},async deletePlan(e){const n=Ds.startMeasure("delete_plan","IrrigationService");try{return await Ds.measureAsync("delete_plan_request",()=>Un.delete(`/plans/${e}/`),"IrrigationService")}finally{n()}},async getVisiteurPlans(e){return await Un.get("/plans/",{params:{visiteur:e}})},async createPlanForVisiteur(e){return await Un.post("/plans/",e)},async getEntreprisePlans(e){return await Un.get("/plans/",{params:{entreprise:e}})},async getSalariePlans(e){return await Un.get("/plans/",{params:{salarie:e}})},async createPlanForSalarie(e,n){const t={...e,salarie:n};return await Un.post("/plans/",t)},async createPlanForEntreprise(e,n){const t={...e,entreprise:n};return await Un.post("/plans/",t)}},Ed={async getNotes(e){const n=e?{plan:e}:{};return await Un.get("/notes/",{params:n})},async getNote(e){return await Un.get(`/notes/${e}/`)},async createNote(e){return await Un.post("/notes/",e)},async updateNote(e,n){return await Un.patch(`/notes/${e}/`,n)},async deleteNote(e){return await Un.delete(`/notes/${e}/`)},async getComments(e){return await Un.get("/note-comments/",{params:{note:e}})},async addComment(e,n){try{return await Un.get(`/notes/${e}/`),await Un.post("/note-comments/",{note:e,text:n})}catch(t){throw console.error(`Erreur lors de la vérification de la note ${e}:`,t),t}},async deleteComment(e){return await Un.delete(`/note-comments/${e}/`)},async getPhotos(e){return await Un.get("/note-photos/",{params:{note:e}})},async addPhoto(e,n,t=""){return await Un.post("/note-photos/",{note:e,image:n,caption:t})},async updatePhotoCaption(e,n){return await Un.patch(`/note-photos/${e}/`,{caption:n})},async deletePhoto(e){return await Un.delete(`/note-photos/${e}/`)}};Un.defaults.baseURL="/api";Un.defaults.headers.common["Content-Type"]="application/json";Un.defaults.withCredentials=!0;function wp(e){var r;const t=`; ${document.cookie}`.split(`; ${e}=`);return t.length===2&&((r=t.pop())==null?void 0:r.split(";").shift())||null}Un.interceptors.request.use(e=>{const n=wp("access_token");return n&&(e.headers.Authorization=`Bearer ${n}`),e},e=>(console.error("Request interceptor error:",e),Promise.reject(e)));Un.interceptors.response.use(e=>e,async e=>{var r,i;const n=va(),t=e.config;if(((r=e.response)==null?void 0:r.status)===401&&!t._retry&&!((i=t.url)!=null&&i.includes("/token/refresh/"))){t._retry=!0;try{if(!wp("access_token"))throw new Error("No token available");await n.refreshToken();const o=wp("access_token");if(o)return t.headers.Authorization=`Bearer ${o}`,Un(t)}catch(s){console.error("Token refresh failed:",s),await n.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(e)});function oT(e,n,t=1){const r=new Date;r.setTime(r.getTime()+t*24*60*60*1e3);const i=`expires=${r.toUTCString()}`;document.cookie=`${e}=${n};${i};path=/;secure;samesite=Strict`}function Gl(e){if(!e)return"-";const n=e.first_name||"",t=e.last_name?e.last_name.toUpperCase():"",r=`${n} ${t}`.trim(),i=e.company_name||e.role||"";return!r&&!i?"-":r?i?`${r} (${i})`:r:`(${i})`}function sT(e="",n=""){return`${(e==null?void 0:e.charAt(0))||""}${(n==null?void 0:n.charAt(0))||""}`.toUpperCase()}const aT={ADMIN:"Administrateur",ENTREPRISE:"Entreprise",SALARIE:"Salarie",VISITEUR:"Visiteur"};function lT(e){return aT[e]||e}function uT(){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function cT(e){return e?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}async function fT({role:e,entrepriseId:n,salarieId:t,includeDetails:r=!1}){const i={role:e};return n&&(i.entreprise=n),t&&(i.salarie=t),r&&(i.include_plans=!0),(await Cl.getUsers(i)).data}const va=kp("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,enterprises:[],employees:[],visitors:[]}),getters:{isAdmin:e=>{var n;return((n=e.user)==null?void 0:n.user_type)==="admin"},isEntreprise:e=>{var n;return((n=e.user)==null?void 0:n.user_type)==="entreprise"},isSalarie:e=>{var n;return((n=e.user)==null?void 0:n.user_type)==="salarie"},isVisiteur:e=>{var n;return((n=e.user)==null?void 0:n.user_type)==="visiteur"},currentUser:e=>e.user,hasEnterprise:e=>{var n;return!!((n=e.user)!=null&&n.enterprise_id)},hasEmployee:e=>{var n;return!!((n=e.user)!=null&&n.employee_id)}},actions:{async initialize(e){if(!e){const t=await this.restoreSession();return this.initialized=!0,t}if(e.isAuthenticated&&e.user)return this.user=e.user,this.isAuthenticated=!0,this.mustChangePassword=e.user.must_change_password||!1,this.initialized=!0,!0;const n=await this.restoreSession();return this.initialized=!0,n},async restoreSession(){try{if(!wp("access_token"))return this.isAuthenticated=!1,this.user=null,!1;const n=await Un.post("/token/refresh/");return n.data.user?(this.user=n.data.user,this.isAuthenticated=!0,this.mustChangePassword=n.data.user.must_change_password||!1,!0):(await this.fetchUserProfile(),!0)}catch(e){return console.error("Failed to restore session:",e),this.isAuthenticated=!1,this.user=null,!1}},async login(e,n){var t,r,i;try{const s=await Un.post("/token/",{username:e,password:n});if(!s.data.access)throw new Error("Token d'accès non reçu");document.cookie=`access_token=${s.data.access}; path=/; secure; samesite=Strict`;const o=await this.fetchUserProfile();return this.user=o,this.isAuthenticated=!0,!0}catch(s){throw this.isAuthenticated=!1,this.user=null,((t=s.response)==null?void 0:t.status)===401?new Error("Identifiants incorrects"):(i=(r=s.response)==null?void 0:r.data)!=null&&i.detail?new Error(s.response.data.detail):s}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const e=await Un.get("/users/me/");return this.user=e.data,this.isAuthenticated=!0,this.mustChangePassword=e.data.must_change_password||!1,e.data}catch(e){throw this.isAuthenticated=!1,this.user=null,e}},async changePassword(e,n){try{const t=await Un.post("/users/change_password/",{old_password:e,password:n});return this.user={...this.user,must_change_password:!1},t.data}catch(t){throw console.error("Password change error:",t),t}},async refreshToken(){var e,n;try{if(!wp("refresh_token"))throw new Error("No refresh token available");const r=await Un.post("/token/refresh/",{},{withCredentials:!0,_retry:!0}),{access:i}=r.data;if(!i)throw new Error("No access token received");return oT("access_token",i,1),this.isAuthenticated=!0,i}catch(t){throw console.error("Error refreshing token:",{status:(e=t.response)==null?void 0:e.status,data:(n=t.response)==null?void 0:n.data}),this.isAuthenticated=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",t}},async fetchUsers(e={}){this.loading=!0;try{return(await Cl.getUsers(e)).data}catch(n){throw this.error="Erreur lors de la récupération des utilisateurs",n}finally{this.loading=!1}},async fetchEnterprises(){this.loading=!0;try{const e=await Cl.getUsers({role:"ENTREPRISE"});return this.enterprises=e.data,this.enterprises}catch(e){throw this.error="Erreur lors de la récupération des entreprises",e}finally{this.loading=!1}},async fetchEnterpriseEmployees(e){this.loading=!0;try{const n=await Cl.getUsers({role:"SALARIE",entreprise:e});return this.employees=n.data,this.employees}catch(n){throw this.error="Erreur lors de la récupération des salaries",n}finally{this.loading=!1}},async fetchEnterpriseVisitors(e){this.loading=!0;try{const n=await Cl.getUsers({role:"VISITEUR",entreprise:e});return this.visitors=n.data,this.visitors}catch(n){throw this.error="Erreur lors de la récupération des visiteurs",n}finally{this.loading=!1}},async createUser(e){this.loading=!0;try{return(await Cl.createUser(e)).data}catch(n){throw this.error="Erreur lors de la création de l'utilisateur",n}finally{this.loading=!1}},async updateUser(e,n){this.loading=!0;try{return(await Cl.updateUser(e,n)).data}catch(t){throw this.error="Erreur lors de la mise à jour de l'utilisateur",t}finally{this.loading=!1}},async deleteUser(e){this.loading=!0;try{return await Cl.deleteUser(e),!0}catch(n){throw this.error="Erreur lors de la suppression de l'utilisateur",n}finally{this.loading=!1}},async fetchEnterprisesLegacy(){this.loading=!0;try{const e=await Un.get("/users/",{params:{role:"entreprise"}});this.enterprises=e.data}catch(e){throw this.error="Erreur lors de la récupération des entreprises",e}finally{this.loading=!1}},async setEnterprise(e,n){this.loading=!0;try{await Un.patch(`/users/${e}/`,{enterprise:n}),this.user&&this.user.id===e&&(this.user.enterprise_id=n)}catch(t){throw this.error="Erreur lors de la mise à jour de l'entreprise",t}finally{this.loading=!1}},async updateUserRole(e,n){this.loading=!0;try{const t=await Un.patch(`/users/${e}/`,{role:n});return this.user&&this.user.id===e&&(this.user.user_type=n),t.data}catch(t){throw this.error="Erreur lors de la mise à jour du rôle",t}finally{this.loading=!1}},async updateUserEmail(e){var n;this.loading=!0;try{const t=await Un.patch(`/users/${(n=this.user)==null?void 0:n.id}/`,{email:e});return this.user&&(this.user.email=e),t.data}catch(t){throw this.error="Erreur lors de la mise à jour de l'email",t}finally{this.loading=!1}},async uploadLogo(e){this.loading=!0;try{const n=await Cl.uploadLogo(e);return this.user&&n.data.logo&&(this.user.logo=n.data.logo),n.data}catch(n){throw this.error="Erreur lors du téléversement du logo",n}finally{this.loading=!1}},checkAccess(e){return this.user?e.includes(this.user.user_type):!1},async fetchUsersByRole(e){this.loading=!0;try{return await fT(e)}catch(n){throw console.error(`Error fetching ${e.role}:`,n),n}finally{this.loading=!1}},async fetchEntrepriseSalaries(e){this.loading=!0;try{return(await Cl.getUsers({role:"SALARIE",entreprise:e})).data}catch(n){throw this.error="Erreur lors de la récupération des salaries",n}finally{this.loading=!1}},async fetchSalarieVisiteurs(e){this.loading=!0;try{return(await Cl.getUsers({role:"VISITEUR",salarie:e})).data}catch(n){throw this.error="Erreur lors de la récupération des visiteurs",n}finally{this.loading=!1}}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Ih=typeof document<"u";function z5(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function hT(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&z5(e.default)}const Zi=Object.assign;function tv(e,n){const t={};for(const r in n){const i=n[r];t[r]=Hu(i)?i.map(e):e(i)}return t}const tp=()=>{},Hu=Array.isArray,$5=/#/g,dT=/&/g,pT=/\//g,gT=/=/g,mT=/\?/g,U5=/\+/g,vT=/%5B/g,yT=/%5D/g,V5=/%5E/g,_T=/%60/g,H5=/%7B/g,bT=/%7C/g,G5=/%7D/g,wT=/%20/g;function dy(e){return encodeURI(""+e).replace(bT,"|").replace(vT,"[").replace(yT,"]")}function xT(e){return dy(e).replace(H5,"{").replace(G5,"}").replace(V5,"^")}function a1(e){return dy(e).replace(U5,"%2B").replace(wT,"+").replace($5,"%23").replace(dT,"%26").replace(_T,"`").replace(H5,"{").replace(G5,"}").replace(V5,"^")}function LT(e){return a1(e).replace(gT,"%3D")}function ST(e){return dy(e).replace($5,"%23").replace(mT,"%3F")}function CT(e){return e==null?"":ST(e).replace(pT,"%2F")}function xp(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const ET=/\/$/,PT=e=>e.replace(ET,"");function nv(e,n,t="/"){let r,i={},s="",o="";const u=n.indexOf("#");let f=n.indexOf("?");return u<f&&u>=0&&(f=-1),f>-1&&(r=n.slice(0,f),s=n.slice(f+1,u>-1?u:n.length),i=e(s)),u>-1&&(r=r||n.slice(0,u),o=n.slice(u,n.length)),r=TT(r??n,t),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:xp(o)}}function MT(e,n){const t=n.query?e(n.query):"";return n.path+(t&&"?")+t+(n.hash||"")}function I_(e,n){return!n||!e.toLowerCase().startsWith(n.toLowerCase())?e:e.slice(n.length)||"/"}function AT(e,n,t){const r=n.matched.length-1,i=t.matched.length-1;return r>-1&&r===i&&id(n.matched[r],t.matched[i])&&q5(n.params,t.params)&&e(n.query)===e(t.query)&&n.hash===t.hash}function id(e,n){return(e.aliasOf||e)===(n.aliasOf||n)}function q5(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const t in e)if(!kT(e[t],n[t]))return!1;return!0}function kT(e,n){return Hu(e)?R_(e,n):Hu(n)?R_(n,e):e===n}function R_(e,n){return Hu(n)?e.length===n.length&&e.every((t,r)=>t===n[r]):e.length===1&&e[0]===n}function TT(e,n){if(e.startsWith("/"))return e;if(!e)return n;const t=n.split("/"),r=e.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=t.length-1,o,u;for(o=0;o<r.length;o++)if(u=r[o],u!==".")if(u==="..")s>1&&s--;else break;return t.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const tf={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Lp;(function(e){e.pop="pop",e.push="push"})(Lp||(Lp={}));var np;(function(e){e.back="back",e.forward="forward",e.unknown=""})(np||(np={}));function DT(e){if(!e)if(Ih){const n=document.querySelector("base");e=n&&n.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),PT(e)}const NT=/^[^#]+#/;function BT(e,n){return e.replace(NT,"#")+n}function OT(e,n){const t=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:n.behavior,left:r.left-t.left-(n.left||0),top:r.top-t.top-(n.top||0)}}const rm=()=>({left:window.scrollX,top:window.scrollY});function IT(e){let n;if("el"in e){const t=e.el,r=typeof t=="string"&&t.startsWith("#"),i=typeof t=="string"?r?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!i)return;n=OT(i,e)}else n=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.scrollX,n.top!=null?n.top:window.scrollY)}function F_(e,n){return(history.state?history.state.position-n:-1)+e}const l1=new Map;function RT(e,n){l1.set(e,n)}function FT(e){const n=l1.get(e);return l1.delete(e),n}let jT=()=>location.protocol+"//"+location.host;function W5(e,n){const{pathname:t,search:r,hash:i}=n,s=e.indexOf("#");if(s>-1){let u=i.includes(e.slice(s))?e.slice(s).length:1,f=i.slice(u);return f[0]!=="/"&&(f="/"+f),I_(f,"")}return I_(t,e)+r+i}function zT(e,n,t,r){let i=[],s=[],o=null;const u=({state:x})=>{const _=W5(e,location),M=t.value,D=n.value;let N=0;if(x){if(t.value=_,n.value=x,o&&o===M){o=null;return}N=D?x.position-D.position:0}else r(_);i.forEach(O=>{O(t.value,M,{delta:N,type:Lp.pop,direction:N?N>0?np.forward:np.back:np.unknown})})};function f(){o=t.value}function d(x){i.push(x);const _=()=>{const M=i.indexOf(x);M>-1&&i.splice(M,1)};return s.push(_),_}function g(){const{history:x}=window;x.state&&x.replaceState(Zi({},x.state,{scroll:rm()}),"")}function y(){for(const x of s)x();s=[],window.removeEventListener("popstate",u),window.removeEventListener("beforeunload",g)}return window.addEventListener("popstate",u),window.addEventListener("beforeunload",g,{passive:!0}),{pauseListeners:f,listen:d,destroy:y}}function j_(e,n,t,r=!1,i=!1){return{back:e,current:n,forward:t,replaced:r,position:window.history.length,scroll:i?rm():null}}function $T(e){const{history:n,location:t}=window,r={value:W5(e,t)},i={value:n.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function s(f,d,g){const y=e.indexOf("#"),x=y>-1?(t.host&&document.querySelector("base")?e:e.slice(y))+f:jT()+e+f;try{n[g?"replaceState":"pushState"](d,"",x),i.value=d}catch(_){console.error(_),t[g?"replace":"assign"](x)}}function o(f,d){const g=Zi({},n.state,j_(i.value.back,f,i.value.forward,!0),d,{position:i.value.position});s(f,g,!0),r.value=f}function u(f,d){const g=Zi({},i.value,n.state,{forward:f,scroll:rm()});s(g.current,g,!0);const y=Zi({},j_(r.value,f,null),{position:g.position+1},d);s(f,y,!1),r.value=f}return{location:r,state:i,push:u,replace:o}}function UT(e){e=DT(e);const n=$T(e),t=zT(e,n.state,n.location,n.replace);function r(s,o=!0){o||t.pauseListeners(),history.go(s)}const i=Zi({location:"",base:e,go:r,createHref:BT.bind(null,e)},n,t);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>n.state.value}),i}function VT(e){return typeof e=="string"||e&&typeof e=="object"}function Z5(e){return typeof e=="string"||typeof e=="symbol"}const K5=Symbol("");var z_;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(z_||(z_={}));function od(e,n){return Zi(new Error,{type:e,[K5]:!0},n)}function Nc(e,n){return e instanceof Error&&K5 in e&&(n==null||!!(e.type&n))}const $_="[^/]+?",HT={sensitive:!1,strict:!1,start:!0,end:!0},GT=/[.+*?^${}()[\]/\\]/g;function qT(e,n){const t=Zi({},HT,n),r=[];let i=t.start?"^":"";const s=[];for(const d of e){const g=d.length?[]:[90];t.strict&&!d.length&&(i+="/");for(let y=0;y<d.length;y++){const x=d[y];let _=40+(t.sensitive?.25:0);if(x.type===0)y||(i+="/"),i+=x.value.replace(GT,"\\$&"),_+=40;else if(x.type===1){const{value:M,repeatable:D,optional:N,regexp:O}=x;s.push({name:M,repeatable:D,optional:N});const F=O||$_;if(F!==$_){_+=10;try{new RegExp(`(${F})`)}catch(Q){throw new Error(`Invalid custom RegExp for param "${M}" (${F}): `+Q.message)}}let Y=D?`((?:${F})(?:/(?:${F}))*)`:`(${F})`;y||(Y=N&&d.length<2?`(?:/${Y})`:"/"+Y),N&&(Y+="?"),i+=Y,_+=20,N&&(_+=-8),D&&(_+=-20),F===".*"&&(_+=-50)}g.push(_)}r.push(g)}if(t.strict&&t.end){const d=r.length-1;r[d][r[d].length-1]+=.7000000000000001}t.strict||(i+="/?"),t.end?i+="$":t.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,t.sensitive?"":"i");function u(d){const g=d.match(o),y={};if(!g)return null;for(let x=1;x<g.length;x++){const _=g[x]||"",M=s[x-1];y[M.name]=_&&M.repeatable?_.split("/"):_}return y}function f(d){let g="",y=!1;for(const x of e){(!y||!g.endsWith("/"))&&(g+="/"),y=!1;for(const _ of x)if(_.type===0)g+=_.value;else if(_.type===1){const{value:M,repeatable:D,optional:N}=_,O=M in d?d[M]:"";if(Hu(O)&&!D)throw new Error(`Provided param "${M}" is an array but it is not repeatable (* or + modifiers)`);const F=Hu(O)?O.join("/"):O;if(!F)if(N)x.length<2&&(g.endsWith("/")?g=g.slice(0,-1):y=!0);else throw new Error(`Missing required param "${M}"`);g+=F}}return g||"/"}return{re:o,score:r,keys:s,parse:u,stringify:f}}function WT(e,n){let t=0;for(;t<e.length&&t<n.length;){const r=n[t]-e[t];if(r)return r;t++}return e.length<n.length?e.length===1&&e[0]===80?-1:1:e.length>n.length?n.length===1&&n[0]===80?1:-1:0}function Y5(e,n){let t=0;const r=e.score,i=n.score;for(;t<r.length&&t<i.length;){const s=WT(r[t],i[t]);if(s)return s;t++}if(Math.abs(i.length-r.length)===1){if(U_(r))return 1;if(U_(i))return-1}return i.length-r.length}function U_(e){const n=e[e.length-1];return e.length>0&&n[n.length-1]<0}const ZT={type:0,value:""},KT=/[a-zA-Z0-9_]/;function YT(e){if(!e)return[[]];if(e==="/")return[[ZT]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function n(_){throw new Error(`ERR (${t})/"${d}": ${_}`)}let t=0,r=t;const i=[];let s;function o(){s&&i.push(s),s=[]}let u=0,f,d="",g="";function y(){d&&(t===0?s.push({type:0,value:d}):t===1||t===2||t===3?(s.length>1&&(f==="*"||f==="+")&&n(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:d,regexp:g,repeatable:f==="*"||f==="+",optional:f==="*"||f==="?"})):n("Invalid state to consume buffer"),d="")}function x(){d+=f}for(;u<e.length;){if(f=e[u++],f==="\\"&&t!==2){r=t,t=4;continue}switch(t){case 0:f==="/"?(d&&y(),o()):f===":"?(y(),t=1):x();break;case 4:x(),t=r;break;case 1:f==="("?t=2:KT.test(f)?x():(y(),t=0,f!=="*"&&f!=="?"&&f!=="+"&&u--);break;case 2:f===")"?g[g.length-1]=="\\"?g=g.slice(0,-1)+f:t=3:g+=f;break;case 3:y(),t=0,f!=="*"&&f!=="?"&&f!=="+"&&u--,g="";break;default:n("Unknown state");break}}return t===2&&n(`Unfinished custom RegExp for param "${d}"`),y(),o(),i}function JT(e,n,t){const r=qT(YT(e.path),t),i=Zi(r,{record:e,parent:n,children:[],alias:[]});return n&&!i.record.aliasOf==!n.record.aliasOf&&n.children.push(i),i}function XT(e,n){const t=[],r=new Map;n=q_({strict:!1,end:!0,sensitive:!1},n);function i(y){return r.get(y)}function s(y,x,_){const M=!_,D=H_(y);D.aliasOf=_&&_.record;const N=q_(n,y),O=[D];if("alias"in y){const Q=typeof y.alias=="string"?[y.alias]:y.alias;for(const le of Q)O.push(H_(Zi({},D,{components:_?_.record.components:D.components,path:le,aliasOf:_?_.record:D})))}let F,Y;for(const Q of O){const{path:le}=Q;if(x&&le[0]!=="/"){const ce=x.record.path,xe=ce[ce.length-1]==="/"?"":"/";Q.path=x.record.path+(le&&xe+le)}if(F=JT(Q,x,N),_?_.alias.push(F):(Y=Y||F,Y!==F&&Y.alias.push(F),M&&y.name&&!G_(F)&&o(y.name)),J5(F)&&f(F),D.children){const ce=D.children;for(let xe=0;xe<ce.length;xe++)s(ce[xe],F,_&&_.children[xe])}_=_||F}return Y?()=>{o(Y)}:tp}function o(y){if(Z5(y)){const x=r.get(y);x&&(r.delete(y),t.splice(t.indexOf(x),1),x.children.forEach(o),x.alias.forEach(o))}else{const x=t.indexOf(y);x>-1&&(t.splice(x,1),y.record.name&&r.delete(y.record.name),y.children.forEach(o),y.alias.forEach(o))}}function u(){return t}function f(y){const x=t8(y,t);t.splice(x,0,y),y.record.name&&!G_(y)&&r.set(y.record.name,y)}function d(y,x){let _,M={},D,N;if("name"in y&&y.name){if(_=r.get(y.name),!_)throw od(1,{location:y});N=_.record.name,M=Zi(V_(x.params,_.keys.filter(Y=>!Y.optional).concat(_.parent?_.parent.keys.filter(Y=>Y.optional):[]).map(Y=>Y.name)),y.params&&V_(y.params,_.keys.map(Y=>Y.name))),D=_.stringify(M)}else if(y.path!=null)D=y.path,_=t.find(Y=>Y.re.test(D)),_&&(M=_.parse(D),N=_.record.name);else{if(_=x.name?r.get(x.name):t.find(Y=>Y.re.test(x.path)),!_)throw od(1,{location:y,currentLocation:x});N=_.record.name,M=Zi({},x.params,y.params),D=_.stringify(M)}const O=[];let F=_;for(;F;)O.unshift(F.record),F=F.parent;return{name:N,path:D,params:M,matched:O,meta:e8(O)}}e.forEach(y=>s(y));function g(){t.length=0,r.clear()}return{addRoute:s,resolve:d,removeRoute:o,clearRoutes:g,getRoutes:u,getRecordMatcher:i}}function V_(e,n){const t={};for(const r of n)r in e&&(t[r]=e[r]);return t}function H_(e){const n={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:QT(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(n,"mods",{value:{}}),n}function QT(e){const n={},t=e.props||!1;if("component"in e)n.default=t;else for(const r in e.components)n[r]=typeof t=="object"?t[r]:t;return n}function G_(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function e8(e){return e.reduce((n,t)=>Zi(n,t.meta),{})}function q_(e,n){const t={};for(const r in e)t[r]=r in n?n[r]:e[r];return t}function t8(e,n){let t=0,r=n.length;for(;t!==r;){const s=t+r>>1;Y5(e,n[s])<0?r=s:t=s+1}const i=n8(e);return i&&(r=n.lastIndexOf(i,r-1)),r}function n8(e){let n=e;for(;n=n.parent;)if(J5(n)&&Y5(e,n)===0)return n}function J5({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function r8(e){const n={};if(e===""||e==="?")return n;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(U5," "),o=s.indexOf("="),u=xp(o<0?s:s.slice(0,o)),f=o<0?null:xp(s.slice(o+1));if(u in n){let d=n[u];Hu(d)||(d=n[u]=[d]),d.push(f)}else n[u]=f}return n}function W_(e){let n="";for(let t in e){const r=e[t];if(t=LT(t),r==null){r!==void 0&&(n+=(n.length?"&":"")+t);continue}(Hu(r)?r.map(s=>s&&a1(s)):[r&&a1(r)]).forEach(s=>{s!==void 0&&(n+=(n.length?"&":"")+t,s!=null&&(n+="="+s))})}return n}function i8(e){const n={};for(const t in e){const r=e[t];r!==void 0&&(n[t]=Hu(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return n}const o8=Symbol(""),Z_=Symbol(""),im=Symbol(""),py=Symbol(""),u1=Symbol("");function Pd(){let e=[];function n(r){return e.push(r),()=>{const i=e.indexOf(r);i>-1&&e.splice(i,1)}}function t(){e=[]}return{add:n,list:()=>e.slice(),reset:t}}function hf(e,n,t,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((u,f)=>{const d=x=>{x===!1?f(od(4,{from:t,to:n})):x instanceof Error?f(x):VT(x)?f(od(2,{from:n,to:x})):(o&&r.enterCallbacks[i]===o&&typeof x=="function"&&o.push(x),u())},g=s(()=>e.call(r&&r.instances[i],n,t,d));let y=Promise.resolve(g);e.length<3&&(y=y.then(d)),y.catch(x=>f(x))})}function rv(e,n,t,r,i=s=>s()){const s=[];for(const o of e)for(const u in o.components){let f=o.components[u];if(!(n!=="beforeRouteEnter"&&!o.instances[u]))if(z5(f)){const g=(f.__vccOpts||f)[n];g&&s.push(hf(g,t,r,o,u,i))}else{let d=f();s.push(()=>d.then(g=>{if(!g)throw new Error(`Couldn't resolve component "${u}" at "${o.path}"`);const y=hT(g)?g.default:g;o.mods[u]=g,o.components[u]=y;const _=(y.__vccOpts||y)[n];return _&&hf(_,t,r,o,u,i)()}))}}return s}function K_(e){const n=Kl(im),t=Kl(py),r=gr(()=>{const f=Wn(e.to);return n.resolve(f)}),i=gr(()=>{const{matched:f}=r.value,{length:d}=f,g=f[d-1],y=t.matched;if(!g||!y.length)return-1;const x=y.findIndex(id.bind(null,g));if(x>-1)return x;const _=Y_(f[d-2]);return d>1&&Y_(g)===_&&y[y.length-1].path!==_?y.findIndex(id.bind(null,f[d-2])):x}),s=gr(()=>i.value>-1&&u8(t.params,r.value.params)),o=gr(()=>i.value>-1&&i.value===t.matched.length-1&&q5(t.params,r.value.params));function u(f={}){if(l8(f)){const d=n[Wn(e.replace)?"replace":"push"](Wn(e.to)).catch(tp);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:r,href:gr(()=>r.value.href),isActive:s,isExactActive:o,navigate:u}}function s8(e){return e.length===1?e[0]:e}const a8=us({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:K_,setup(e,{slots:n}){const t=Jl(K_(e)),{options:r}=Kl(im),i=gr(()=>({[J_(e.activeClass,r.linkActiveClass,"router-link-active")]:t.isActive,[J_(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const s=n.default&&s8(n.default(t));return e.custom?s:q0("a",{"aria-current":t.isExactActive?e.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:i.value},s)}}}),Fd=a8;function l8(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const n=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return e.preventDefault&&e.preventDefault(),!0}}function u8(e,n){for(const t in n){const r=n[t],i=e[t];if(typeof r=="string"){if(r!==i)return!1}else if(!Hu(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function Y_(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const J_=(e,n,t)=>e??n??t,c8=us({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:n,slots:t}){const r=Kl(u1),i=gr(()=>e.route||r.value),s=Kl(Z_,0),o=gr(()=>{let d=Wn(s);const{matched:g}=i.value;let y;for(;(y=g[d])&&!y.components;)d++;return d}),u=gr(()=>i.value.matched[o.value]);Jd(Z_,gr(()=>o.value+1)),Jd(o8,u),Jd(u1,i);const f=Ft();return So(()=>[f.value,u.value,e.name],([d,g,y],[x,_,M])=>{g&&(g.instances[y]=d,_&&_!==g&&d&&d===x&&(g.leaveGuards.size||(g.leaveGuards=_.leaveGuards),g.updateGuards.size||(g.updateGuards=_.updateGuards))),d&&g&&(!_||!id(g,_)||!x)&&(g.enterCallbacks[y]||[]).forEach(D=>D(d))},{flush:"post"}),()=>{const d=i.value,g=e.name,y=u.value,x=y&&y.components[g];if(!x)return X_(t.default,{Component:x,route:d});const _=y.props[g],M=_?_===!0?d.params:typeof _=="function"?_(d):_:null,N=q0(x,Zi({},M,n,{onVnodeUnmounted:O=>{O.component.isUnmounted&&(y.instances[g]=null)},ref:f}));return X_(t.default,{Component:N,route:d})||N}}});function X_(e,n){if(!e)return null;const t=e(n);return t.length===1?t[0]:t}const X5=c8;function f8(e){const n=XT(e.routes,e),t=e.parseQuery||r8,r=e.stringifyQuery||W_,i=e.history,s=Pd(),o=Pd(),u=Pd(),f=W1(tf);let d=tf;Ih&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const g=tv.bind(null,ae=>""+ae),y=tv.bind(null,CT),x=tv.bind(null,xp);function _(ae,T){let ue,ke;return Z5(ae)?(ue=n.getRecordMatcher(ae),ke=T):ke=ae,n.addRoute(ke,ue)}function M(ae){const T=n.getRecordMatcher(ae);T&&n.removeRoute(T)}function D(){return n.getRoutes().map(ae=>ae.record)}function N(ae){return!!n.getRecordMatcher(ae)}function O(ae,T){if(T=Zi({},T||f.value),typeof ae=="string"){const pe=nv(t,ae,T.path),ve=n.resolve({path:pe.path},T),ge=i.createHref(pe.fullPath);return Zi(pe,ve,{params:x(ve.params),hash:xp(pe.hash),redirectedFrom:void 0,href:ge})}let ue;if(ae.path!=null)ue=Zi({},ae,{path:nv(t,ae.path,T.path).path});else{const pe=Zi({},ae.params);for(const ve in pe)pe[ve]==null&&delete pe[ve];ue=Zi({},ae,{params:y(pe)}),T.params=y(T.params)}const ke=n.resolve(ue,T),Ce=ae.hash||"";ke.params=g(x(ke.params));const Ve=MT(r,Zi({},ae,{hash:xT(Ce),path:ke.path})),K=i.createHref(Ve);return Zi({fullPath:Ve,hash:Ce,query:r===W_?i8(ae.query):ae.query||{}},ke,{redirectedFrom:void 0,href:K})}function F(ae){return typeof ae=="string"?nv(t,ae,f.value.path):Zi({},ae)}function Y(ae,T){if(d!==ae)return od(8,{from:T,to:ae})}function Q(ae){return xe(ae)}function le(ae){return Q(Zi(F(ae),{replace:!0}))}function ce(ae){const T=ae.matched[ae.matched.length-1];if(T&&T.redirect){const{redirect:ue}=T;let ke=typeof ue=="function"?ue(ae):ue;return typeof ke=="string"&&(ke=ke.includes("?")||ke.includes("#")?ke=F(ke):{path:ke},ke.params={}),Zi({query:ae.query,hash:ae.hash,params:ke.path!=null?{}:ae.params},ke)}}function xe(ae,T){const ue=d=O(ae),ke=f.value,Ce=ae.state,Ve=ae.force,K=ae.replace===!0,pe=ce(ue);if(pe)return xe(Zi(F(pe),{state:typeof pe=="object"?Zi({},Ce,pe.state):Ce,force:Ve,replace:K}),T||ue);const ve=ue;ve.redirectedFrom=T;let ge;return!Ve&&AT(r,ke,ue)&&(ge=od(16,{to:ve,from:ke}),Ie(ke,ke,!0,!1)),(ge?Promise.resolve(ge):Z(ve,ke)).catch(Ue=>Nc(Ue)?Nc(Ue,2)?Ue:Pe(Ue):re(Ue,ve,ke)).then(Ue=>{if(Ue){if(Nc(Ue,2))return xe(Zi({replace:K},F(Ue.to),{state:typeof Ue.to=="object"?Zi({},Ce,Ue.to.state):Ce,force:Ve}),T||ve)}else Ue=I(ve,ke,!0,K,Ce);return z(ve,ke,Ue),Ue})}function G(ae,T){const ue=Y(ae,T);return ue?Promise.reject(ue):Promise.resolve()}function R(ae){const T=fe.values().next().value;return T&&typeof T.runWithContext=="function"?T.runWithContext(ae):ae()}function Z(ae,T){let ue;const[ke,Ce,Ve]=h8(ae,T);ue=rv(ke.reverse(),"beforeRouteLeave",ae,T);for(const pe of ke)pe.leaveGuards.forEach(ve=>{ue.push(hf(ve,ae,T))});const K=G.bind(null,ae,T);return ue.push(K),he(ue).then(()=>{ue=[];for(const pe of s.list())ue.push(hf(pe,ae,T));return ue.push(K),he(ue)}).then(()=>{ue=rv(Ce,"beforeRouteUpdate",ae,T);for(const pe of Ce)pe.updateGuards.forEach(ve=>{ue.push(hf(ve,ae,T))});return ue.push(K),he(ue)}).then(()=>{ue=[];for(const pe of Ve)if(pe.beforeEnter)if(Hu(pe.beforeEnter))for(const ve of pe.beforeEnter)ue.push(hf(ve,ae,T));else ue.push(hf(pe.beforeEnter,ae,T));return ue.push(K),he(ue)}).then(()=>(ae.matched.forEach(pe=>pe.enterCallbacks={}),ue=rv(Ve,"beforeRouteEnter",ae,T,R),ue.push(K),he(ue))).then(()=>{ue=[];for(const pe of o.list())ue.push(hf(pe,ae,T));return ue.push(K),he(ue)}).catch(pe=>Nc(pe,8)?pe:Promise.reject(pe))}function z(ae,T,ue){u.list().forEach(ke=>R(()=>ke(ae,T,ue)))}function I(ae,T,ue,ke,Ce){const Ve=Y(ae,T);if(Ve)return Ve;const K=T===tf,pe=Ih?history.state:{};ue&&(ke||K?i.replace(ae.fullPath,Zi({scroll:K&&pe&&pe.scroll},Ce)):i.push(ae.fullPath,Ce)),f.value=ae,Ie(ae,T,ue,K),Pe()}let $;function U(){$||($=i.listen((ae,T,ue)=>{if(!ne.listening)return;const ke=O(ae),Ce=ce(ke);if(Ce){xe(Zi(Ce,{replace:!0,force:!0}),ke).catch(tp);return}d=ke;const Ve=f.value;Ih&&RT(F_(Ve.fullPath,ue.delta),rm()),Z(ke,Ve).catch(K=>Nc(K,12)?K:Nc(K,2)?(xe(Zi(F(K.to),{force:!0}),ke).then(pe=>{Nc(pe,20)&&!ue.delta&&ue.type===Lp.pop&&i.go(-1,!1)}).catch(tp),Promise.reject()):(ue.delta&&i.go(-ue.delta,!1),re(K,ke,Ve))).then(K=>{K=K||I(ke,Ve,!1),K&&(ue.delta&&!Nc(K,8)?i.go(-ue.delta,!1):ue.type===Lp.pop&&Nc(K,20)&&i.go(-1,!1)),z(ke,Ve,K)}).catch(tp)}))}let W=Pd(),q=Pd(),ie;function re(ae,T,ue){Pe(ae);const ke=q.list();return ke.length?ke.forEach(Ce=>Ce(ae,T,ue)):console.error(ae),Promise.reject(ae)}function we(){return ie&&f.value!==tf?Promise.resolve():new Promise((ae,T)=>{W.add([ae,T])})}function Pe(ae){return ie||(ie=!ae,U(),W.list().forEach(([T,ue])=>ae?ue(ae):T()),W.reset()),ae}function Ie(ae,T,ue,ke){const{scrollBehavior:Ce}=e;if(!Ih||!Ce)return Promise.resolve();const Ve=!ue&&FT(F_(ae.fullPath,0))||(ke||!ue)&&history.state&&history.state.scroll||null;return Xs().then(()=>Ce(ae,T,Ve)).then(K=>K&&IT(K)).catch(K=>re(K,ae,T))}const A=ae=>i.go(ae);let J;const fe=new Set,ne={currentRoute:f,listening:!0,addRoute:_,removeRoute:M,clearRoutes:n.clearRoutes,hasRoute:N,getRoutes:D,resolve:O,options:e,push:Q,replace:le,go:A,back:()=>A(-1),forward:()=>A(1),beforeEach:s.add,beforeResolve:o.add,afterEach:u.add,onError:q.add,isReady:we,install(ae){const T=this;ae.component("RouterLink",Fd),ae.component("RouterView",X5),ae.config.globalProperties.$router=T,Object.defineProperty(ae.config.globalProperties,"$route",{enumerable:!0,get:()=>Wn(f)}),Ih&&!J&&f.value===tf&&(J=!0,Q(i.location).catch(Ce=>{}));const ue={};for(const Ce in tf)Object.defineProperty(ue,Ce,{get:()=>f.value[Ce],enumerable:!0});ae.provide(im,T),ae.provide(py,q1(ue)),ae.provide(u1,f);const ke=ae.unmount;fe.add(ae),ae.unmount=function(){fe.delete(ae),fe.size<1&&(d=tf,$&&$(),$=null,f.value=tf,J=!1,ie=!1),ke()}}};function he(ae){return ae.reduce((T,ue)=>T.then(()=>R(ue)),Promise.resolve())}return ne}function h8(e,n){const t=[],r=[],i=[],s=Math.max(n.matched.length,e.matched.length);for(let o=0;o<s;o++){const u=n.matched[o];u&&(e.matched.find(d=>id(d,u))?r.push(u):t.push(u));const f=e.matched[o];f&&(n.matched.find(d=>id(d,f))||i.push(f))}return[t,r,i]}function Np(){return Kl(im)}function pH(e){return Kl(py)}const dc=kp("notification",()=>{const e=Ft([]),n=Ft(0),t=Ft(null),r=gr(()=>[...e.value].sort((y,x)=>x.timestamp-y.timestamp));function i({type:y,message:x,duration:_=5e3}){const M=++n.value,D=Date.now(),N={id:M,type:y,message:x,duration:_,timestamp:D};return e.value.push(N),t.value=M,_>0&&setTimeout(()=>{d(M)},_),M}const s=(y,x=5e3)=>i({type:"success",message:y,duration:x}),o=(y,x=5e3)=>i({type:"error",message:y,duration:x}),u=(y,x=5e3)=>i({type:"info",message:y,duration:x}),f=(y,x=5e3)=>i({type:"warning",message:y,duration:x});function d(y){const x=e.value.findIndex(_=>_.id===y);x!==-1&&e.value.splice(x,1),t.value===y&&(t.value=null)}function g(){e.value=[],t.value=null}return{notifications:r,lastAddedId:t,addNotification:i,removeNotification:d,clearAll:g,success:s,error:o,info:u,warning:f}});var ea=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Q5(e){if(e.__esModule)return e;var n=e.default;if(typeof n=="function"){var t=function r(){return this instanceof r?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};t.prototype=n.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),t}function d8(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var ex=d8,p8=typeof ea=="object"&&ea&&ea.Object===Object&&ea,g8=p8,m8=g8,v8=typeof self=="object"&&self&&self.Object===Object&&self,y8=m8||v8||Function("return this")(),tx=y8,_8=tx,b8=function(){return _8.Date.now()},w8=b8,x8=/\s/;function L8(e){for(var n=e.length;n--&&x8.test(e.charAt(n)););return n}var S8=L8,C8=S8,E8=/^\s+/;function P8(e){return e&&e.slice(0,C8(e)+1).replace(E8,"")}var M8=P8,A8=tx,k8=A8.Symbol,nx=k8,Q_=nx,rx=Object.prototype,T8=rx.hasOwnProperty,D8=rx.toString,Md=Q_?Q_.toStringTag:void 0;function N8(e){var n=T8.call(e,Md),t=e[Md];try{e[Md]=void 0;var r=!0}catch{}var i=D8.call(e);return r&&(n?e[Md]=t:delete e[Md]),i}var B8=N8,O8=Object.prototype,I8=O8.toString;function R8(e){return I8.call(e)}var F8=R8,eb=nx,j8=B8,z8=F8,$8="[object Null]",U8="[object Undefined]",tb=eb?eb.toStringTag:void 0;function V8(e){return e==null?e===void 0?U8:$8:tb&&tb in Object(e)?j8(e):z8(e)}var H8=V8;function G8(e){return e!=null&&typeof e=="object"}var q8=G8,W8=H8,Z8=q8,K8="[object Symbol]";function Y8(e){return typeof e=="symbol"||Z8(e)&&W8(e)==K8}var J8=Y8,X8=M8,nb=ex,Q8=J8,rb=NaN,e7=/^[-+]0x[0-9a-f]+$/i,t7=/^0b[01]+$/i,n7=/^0o[0-7]+$/i,r7=parseInt;function i7(e){if(typeof e=="number")return e;if(Q8(e))return rb;if(nb(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=nb(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=X8(e);var t=t7.test(e);return t||n7.test(e)?r7(e.slice(2),t?2:8):e7.test(e)?rb:+e}var o7=i7,s7=ex,iv=w8,ib=o7,a7="Expected a function",l7=Math.max,u7=Math.min;function c7(e,n,t){var r,i,s,o,u,f,d=0,g=!1,y=!1,x=!0;if(typeof e!="function")throw new TypeError(a7);n=ib(n)||0,s7(t)&&(g=!!t.leading,y="maxWait"in t,s=y?l7(ib(t.maxWait)||0,n):s,x="trailing"in t?!!t.trailing:x);function _(ce){var xe=r,G=i;return r=i=void 0,d=ce,o=e.apply(G,xe),o}function M(ce){return d=ce,u=setTimeout(O,n),g?_(ce):o}function D(ce){var xe=ce-f,G=ce-d,R=n-xe;return y?u7(R,s-G):R}function N(ce){var xe=ce-f,G=ce-d;return f===void 0||xe>=n||xe<0||y&&G>=s}function O(){var ce=iv();if(N(ce))return F(ce);u=setTimeout(O,D(ce))}function F(ce){return u=void 0,x&&r?_(ce):(r=i=void 0,o)}function Y(){u!==void 0&&clearTimeout(u),d=0,r=f=i=u=void 0}function Q(){return u===void 0?o:F(iv())}function le(){var ce=iv(),xe=N(ce);if(r=arguments,i=this,f=ce,xe){if(u===void 0)return M(f);if(y)return clearTimeout(u),u=setTimeout(O,n),_(f)}return u===void 0&&(u=setTimeout(O,n)),o}return le.cancel=Y,le.flush=Q,le}var f7=c7;const h7=gy(f7),d7={class:"relative w-full"},p7={key:0,class:"search-results w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},g7=["onClick"],ob=us({__name:"SearchBar",emits:["select-location"],setup(e,{emit:n}){const t=Ft(""),r=Ft([]),i=n,s=h7(async f=>{if(f.length<3){r.value=[];return}try{const g=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(f)}`)).json();r.value=g}catch(d){console.error("Erreur lors de la recherche d'adresse:",d),r.value=[]}},300);function o(){s(t.value)}function u(f){t.value=f.display_name,r.value=[],i("select-location",{lat:parseFloat(f.lat),lng:parseFloat(f.lon)})}return(f,d)=>($e(),qe("div",d7,[In(E("input",{"onUpdate:modelValue":d[0]||(d[0]=g=>t.value=g),onInput:o,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[Zr,t.value]]),r.value.length>0?($e(),qe("div",p7,[($e(!0),qe(Rn,null,Br(r.value,g=>($e(),qe("div",{key:g.place_id,onClick:y=>u(g),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},Wt(g.display_name),9,g7))),128))])):un("",!0)]))}}),m7={class:"perf-title"},v7={class:"perf-basic-stats"},y7={class:"perf-stat"},_7={class:"perf-stat"},b7={class:"perf-expand-btn"},w7={key:0,class:"perf-content"},x7={class:"perf-section"},L7={class:"perf-metrics"},S7={class:"perf-metric"},C7={class:"perf-metric-value"},E7={class:"perf-metric"},P7={class:"perf-metric-value"},M7={class:"perf-metric"},A7={class:"perf-metric-value"},k7={class:"perf-metric"},T7={class:"perf-metric-value"},D7={class:"perf-section"},N7={class:"perf-metrics"},B7={key:0,class:"perf-metric"},O7={class:"perf-metric-value"},I7={key:1,class:"perf-metric"},R7={class:"perf-metric-value"},F7={key:2,class:"perf-metric"},j7={class:"perf-metric-value"},z7={class:"perf-section"},$7={class:"perf-table"},U7={class:"perf-table-cell"},V7={class:"perf-table-cell"},H7={class:"perf-table-cell"},G7={class:"perf-table-cell"},q7=["onClick"],W7={key:0,class:"perf-empty"},Z7=us({__name:"PerformancePanel",props:{position:{}},setup(e){const t=e.position||"bottom-left",r=Ft(!1),{isQueryParamEnabled:i,isRecording:s,measures:o,longTasks:u,memorySnapshots:f,framesPerSecond:d,operationHistory:g,startRecording:y,stopRecording:x,clearRecording:_,captureMemorySnapshot:M,getSlowOperations:D,getPerformanceReport:N,getOperationDetails:O}=dd(),F=gr(()=>{const I=N()??{totalMeasures:0,totalLongTasks:0,slowestOperations:[],averageFps:0,memoryUsage:null};return{totalMeasures:I.totalMeasures,totalLongTasks:I.totalLongTasks,averageDuration:I.slowestOperations.length>0?I.slowestOperations.reduce(($,U)=>$+U.duration,0)/I.slowestOperations.length:0,fps:I.averageFps,slowestOperations:I.slowestOperations,memoryUsage:I.memoryUsage}}),Y=gr(()=>(N()??{slowestOperations:[]}).slowestOperations.slice(0,5).map($=>({operation:$.name,component:$.component||"unknown",durationMs:$.duration,timestamp:$.startTime}))),Q=Ft(null);$s(()=>{i.value&&(Q.value=window.setInterval(()=>{M()},1e3))}),mc(()=>{Q.value!==null&&clearInterval(Q.value)});function le(I){return I===void 0?"N/A":I<1024?I+" B":I<1024*1024?(I/1024).toFixed(2)+" KB":I<1024*1024*1024?(I/(1024*1024)).toFixed(2)+" MB":(I/(1024*1024*1024)).toFixed(2)+" GB"}function ce(I){return I.toFixed(2)}const xe=()=>{M()};function G(){const I=N(),$="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(I,null,2)),U=document.createElement("a");U.setAttribute("href",$),U.setAttribute("download","performance_report.json"),document.body.appendChild(U),U.click(),U.remove()}function R(){_(),xe()}function Z(){const I=N();navigator.clipboard.writeText(JSON.stringify(I,null,2)).then(()=>{alert("Données de performance copiées dans le presse-papiers")}).catch($=>{console.error("Erreur lors de la copie des données",$),alert("Erreur lors de la copie des données")})}async function z(I){const $=O(I.operation,I.timestamp);if(!$){alert("Impossible de trouver les détails de cette opération");return}const U={operation:{...$.operation,startTimeRelative:"0ms",startTimeAbsolute:new Date($.operation.startTime).toISOString()},context:{...$.context,relatedOperations:$.context.relatedOperations.map(W=>({...W,startTime:`+${W.startTime.toFixed(2)}ms`})),longTasks:$.context.longTasks.map(W=>({...W,startTime:`+${W.startTime.toFixed(2)}ms`})),memorySnapshots:$.context.memorySnapshots.map(W=>({...W,timestamp:`+${W.timestamp.toFixed(2)}ms`,usedJSHeapSize:W.usedJSHeapSize?le(W.usedJSHeapSize):"N/A",totalJSHeapSize:W.totalJSHeapSize?le(W.totalJSHeapSize):"N/A"}))},summary:{...$.summary,memoryDelta:le($.summary.memoryDelta),maxLongTaskDuration:`${$.summary.maxLongTaskDuration.toFixed(2)}ms`}};try{await navigator.clipboard.writeText(JSON.stringify(U,null,2)),alert("Détails de l'opération copiés dans le presse-papiers")}catch(W){console.error("Erreur lors de la copie des détails",W),alert("Erreur lors de la copie des détails")}}return(I,$)=>{var U,W,q,ie,re,we;return Wn(i)?($e(),qe("div",{key:0,class:Ri(["performance-panel",`position-${Wn(t)}`,{expanded:r.value}])},[E("div",{class:"perf-header",onClick:$[0]||($[0]=Pe=>r.value=!r.value)},[E("div",m7,[E("div",{class:Ri(["perf-indicator",{active:Wn(s)}])},null,2),$[1]||($[1]=E("span",null,"Performance",-1))]),E("div",v7,[E("span",y7,Wt(F.value.fps)+" FPS",1),E("span",_7,Wt(ce(F.value.averageDuration))+"ms",1)]),E("button",b7,Wt(r.value?"▼":"▲"),1)]),r.value?($e(),qe("div",w7,[E("div",x7,[$[6]||($[6]=E("h3",null,"Métriques générales",-1)),E("div",L7,[E("div",S7,[$[2]||($[2]=E("span",{class:"perf-metric-label"},"Mesures",-1)),E("span",C7,Wt(F.value.totalMeasures),1)]),E("div",E7,[$[3]||($[3]=E("span",{class:"perf-metric-label"},"Tâches longues",-1)),E("span",P7,Wt(F.value.totalLongTasks),1)]),E("div",M7,[$[4]||($[4]=E("span",{class:"perf-metric-label"},"Durée moyenne",-1)),E("span",A7,Wt(ce(F.value.averageDuration))+"ms",1)]),E("div",k7,[$[5]||($[5]=E("span",{class:"perf-metric-label"},"FPS",-1)),E("span",T7,Wt(F.value.fps),1)])])]),E("div",D7,[$[10]||($[10]=E("h3",null,"Mémoire",-1)),E("div",N7,[((U=F.value.memoryUsage)==null?void 0:U.usedJSHeapSize)!==void 0?($e(),qe("div",B7,[$[7]||($[7]=E("span",{class:"perf-metric-label"},"Utilisée",-1)),E("span",O7,Wt(le((W=F.value.memoryUsage)==null?void 0:W.usedJSHeapSize)),1)])):un("",!0),((q=F.value.memoryUsage)==null?void 0:q.totalJSHeapSize)!==void 0?($e(),qe("div",I7,[$[8]||($[8]=E("span",{class:"perf-metric-label"},"Totale",-1)),E("span",R7,Wt(le((ie=F.value.memoryUsage)==null?void 0:ie.totalJSHeapSize)),1)])):un("",!0),((re=F.value.memoryUsage)==null?void 0:re.jsHeapSizeLimit)!==void 0?($e(),qe("div",F7,[$[9]||($[9]=E("span",{class:"perf-metric-label"},"Limite",-1)),E("span",j7,Wt(le((we=F.value.memoryUsage)==null?void 0:we.jsHeapSizeLimit)),1)])):un("",!0)])]),E("div",z7,[$[13]||($[13]=E("h3",null,"Opérations les plus lentes",-1)),E("div",$7,[$[12]||($[12]=uc('<div class="perf-table-header" data-v-fefe39b0><div class="perf-table-cell" data-v-fefe39b0>Opération</div><div class="perf-table-cell" data-v-fefe39b0>Composant</div><div class="perf-table-cell" data-v-fefe39b0>Durée</div><div class="perf-table-cell" data-v-fefe39b0>Actions</div></div>',1)),($e(!0),qe(Rn,null,Br(Y.value,Pe=>($e(),qe("div",{class:"perf-table-row",key:Pe.timestamp},[E("div",U7,Wt(Pe.operation),1),E("div",V7,Wt(Pe.component),1),E("div",H7,Wt(ce(Pe.durationMs))+"ms",1),E("div",G7,[E("button",{onClick:Ie=>z(Pe),class:"perf-action-button",title:"Copier les détails"},$[11]||($[11]=[E("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]),8,q7)])]))),128)),Y.value.length===0?($e(),qe("div",W7," Aucune opération enregistrée ")):un("",!0)])]),E("div",{class:"perf-actions"},[E("button",{onClick:R,class:"perf-button"}," Réinitialiser "),E("button",{onClick:G,class:"perf-button"}," Télécharger "),E("button",{onClick:Z,class:"perf-button"}," Copier ")])])):un("",!0)],2)):un("",!0)}}}),om=(e,n)=>{const t=e.__vccOpts||e;for(const[r,i]of n)t[r]=i;return t},K7=om(Z7,[["__scopeId","data-v-fefe39b0"]]),Y7={class:"h-screen flex flex-col"},J7={key:0,class:"bg-white shadow-sm z-[2000] flex-shrink-0"},X7={class:"mx-auto px-4 sm:px-6 lg:px-8"},Q7={class:"flex h-16 items-center justify-between"},eD={class:"flex items-center"},tD={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},nD={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},rD={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},iD={class:"hidden md:flex md:ml-6 space-x-8"},oD={key:0,class:"hidden md:block flex-1 mx-8"},sD={key:1,class:"flex-1"},aD={class:"flex items-center space-x-2 md:space-x-4"},lD={key:0,class:"hidden md:flex items-center justify-center p-2 text-amber-500 hover:text-amber-600 rounded-full hover:bg-amber-50 focus:outline-none focus:ring-2 focus:ring-amber-400",title:"Performance activée"},uD={class:"relative"},cD={class:"px-4 py-2 border-b border-gray-100 flex justify-between items-center"},fD={class:"flex items-center justify-between w-full"},hD={class:"flex items-center space-x-3"},dD={class:"max-h-72 overflow-y-auto"},pD={key:0,class:"px-4 py-3 text-sm text-gray-500 text-center"},gD={class:"flex items-start"},mD={class:"flex-shrink-0 mr-3"},vD={key:0,class:"h-6 w-6 md:h-5 md:w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor"},yD={key:1,class:"h-6 w-6 md:h-5 md:w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},_D={key:2,class:"h-6 w-6 md:h-5 md:w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},bD={key:3,class:"h-6 w-6 md:h-5 md:w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor"},wD={class:"flex-1"},xD={class:"text-sm md:text-sm text-gray-800"},LD=["onClick"],SD={class:"relative"},CD={class:"hidden md:flex flex-col items-end"},ED={class:"text-sm font-medium text-gray-700"},PD={key:0,class:"text-xs text-gray-500"},MD=["src","alt"],AD={class:"md:hidden px-4 py-2 border-b border-gray-100 flex justify-between items-center"},kD={class:"text-sm font-semibold text-gray-700"},TD={class:"text-xs text-gray-500"},DD={key:0,class:"md:hidden bg-white border-t border-gray-200"},ND={class:"space-y-1 px-2 pb-3 pt-2"},BD={key:0,class:"px-4 py-3 border-t border-gray-200"},OD=us({__name:"App",setup(e){const n=Np(),t=va(),r=dc(),{isQueryParamEnabled:i}=dd(),s=Ft(!1),o=Ft(!1),u=Ft(!1),f=Ft(!1),d=Ft(null),g=Ft(!1),y=Ft(!1),x=Ft(null),_=Ft("13px"),M=Ft("65px");function D(){y.value=window.innerWidth<768}$s(()=>{D(),window.addEventListener("resize",D),window.addEventListener("resize",N)}),cd(()=>{window.removeEventListener("resize",D),window.removeEventListener("resize",N)});function N(){if(!x.value)return;const $=x.value.getBoundingClientRect();_.value=`${$.top+window.scrollY+5}px`;const U=$.left+$.width/2;M.value=`${window.innerWidth-U-22}px`}const O=gr(()=>{const $=t.user;if(!$)return"";const U=`${$.first_name} ${$.last_name.toUpperCase()}`;return $.company_name?`${U} (${$.company_name})`:U}),F=gr(()=>{var U;switch((U=t.user)==null?void 0:U.user_type){case"admin":return"Accès administrateur";case"entreprise":return"Accès entreprise";case"salarie":return"Accès salarie";case"visiteur":return"Accès visiteur";default:return""}}),Y=gr(()=>{var $;return(($=t.user)==null?void 0:$.user_type)==="admin"}),Q=gr(()=>t.isAuthenticated),le=[{name:"Carte",to:"/"},{name:"Notes",to:"/notes"}],ce=gr(()=>{var U;if(!Q.value)return[];const $=[...le];return(Y.value||((U=t.user)==null?void 0:U.user_type)==="entreprise")&&$.push({name:"Utilisateurs",to:"/users"}),$}),xe=gr(()=>Q.value?[{name:"Mon profil",to:"/profile"}]:[]);async function G(){try{await t.logout(),n.push("/login")}catch($){console.error("Erreur lors de la déconnexion:",$)}}function R($){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:$.lat,lng:$.lng,zoom:16}}))}$s(async()=>{console.log("App mounted, checking auth...");try{if(localStorage.getItem("token")){console.log("Token found, checking auth..."),await t.checkAuth(),await t.fetchUserProfile();const U=localStorage.getItem("lastPlanId");U&&window.dispatchEvent(new CustomEvent("load-last-plan",{detail:{planId:U}}))}else console.log("No token found")}catch($){console.error("Auth check error:",$),n.push("/login")}});const Z=gr(()=>{const $="TagMap";if(!Q.value)return`${$} - Connexion`;const U=n.currentRoute.value,q={home:"Carte",notes:"Notes",users:"Utilisateurs",profile:"Mon profil",changePassword:"Changement de mot de passe",map:"Carte"}[U.name]||"";return q?`${$} - ${q}`:$});So(Z,$=>{document.title=$},{immediate:!0});const z=gr(()=>r.notifications.length);function I(){r.clearAll(),u.value=!1}return yp(()=>{if(r.lastAddedId!==null){const $=r.notifications.find(U=>U.id===r.lastAddedId);$&&Xs(()=>{N(),f.value=!0,d.value={id:$.id,message:$.message,type:$.type},requestAnimationFrame(()=>{setTimeout(()=>{g.value=!0,setTimeout(()=>{g.value=!1,setTimeout(()=>{var U;((U=d.value)==null?void 0:U.id)===$.id&&(d.value=null,f.value=!1)},300)},4e3)},50)})})}}),($,U)=>{var W;return $e(),qe("div",Y7,[Q.value?($e(),qe("header",J7,[E("nav",X7,[E("div",Q7,[E("div",eD,[E("button",{onClick:U[0]||(U[0]=q=>o.value=!o.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 md:hidden"},[U[7]||(U[7]=E("span",{class:"sr-only"},"Ouvrir le menu",-1)),($e(),qe("svg",tD,[o.value?($e(),qe("path",rD)):($e(),qe("path",nD))]))]),fi(Wn(Fd),{to:"/",class:"text-xl font-semibold text-primary-600 truncate ml-2 md:ml-0"},{default:ql(()=>U[8]||(U[8]=[E("span",{class:"md:inline hidden"},"TagMap",-1),E("span",{class:"md:hidden inline"},"TM",-1)])),_:1}),E("div",iD,[($e(!0),qe(Rn,null,Br(ce.value,q=>($e(),Ua(Wn(Fd),{key:q.name,to:q.to,class:Ri(["text-sm font-medium transition-colors duration-200",[$.$route.path===q.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:ql(()=>[pi(Wt(q.name),1)]),_:2},1032,["to","class"]))),128))])]),$.$route.path==="/"?($e(),qe("div",oD,[fi(ob,{onSelectLocation:R})])):($e(),qe("div",sD)),E("div",aD,[Wn(i)?($e(),qe("button",lD,U[9]||(U[9]=[E("span",{class:"sr-only"},"Performance",-1),E("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)]))):un("",!0),E("div",uD,[E("button",{ref_key:"bellButtonRef",ref:x,onClick:U[1]||(U[1]=q=>u.value=!u.value),class:Ri(["relative flex items-center justify-center p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",{"animate-bell":f.value}])},U[10]||(U[10]=[E("span",{class:"sr-only"},"Voir les notifications",-1),E("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)]),2),u.value?($e(),qe("div",{key:0,class:"absolute right-0 mt-2 md:w-80 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3000] md:right-0 right-0 left-0 md:left-auto",style:rl(y.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[E("div",cD,[E("div",fD,[U[12]||(U[12]=E("h3",{class:"text-sm font-semibold text-gray-700"},"Notifications",-1)),E("div",hD,[z.value>0?($e(),qe("button",{key:0,onClick:I,class:"text-xs text-primary-600 hover:text-primary-800"}," Tout effacer ")):un("",!0),E("button",{onClick:U[2]||(U[2]=q=>u.value=!1),class:"md:hidden p-1 rounded-full hover:bg-gray-100"},U[11]||(U[11]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])]),E("div",dD,[z.value===0?($e(),qe("div",pD," Aucune notification ")):un("",!0),($e(!0),qe(Rn,null,Br(Wn(r).notifications,q=>($e(),qe("div",{key:q.id,class:"px-4 py-3 md:py-3 py-4 border-b border-gray-100 last:border-0 hover:bg-gray-50"},[E("div",gD,[E("div",mD,[q.type==="success"?($e(),qe("svg",vD,U[13]||(U[13]=[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):q.type==="error"?($e(),qe("svg",yD,U[14]||(U[14]=[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):q.type==="warning"?($e(),qe("svg",_D,U[15]||(U[15]=[E("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):($e(),qe("svg",bD,U[16]||(U[16]=[E("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])))]),E("div",wD,[E("p",xD,Wt(q.message),1),E("button",{onClick:ie=>Wn(r).removeNotification(q.id),class:"text-xs md:text-xs text-primary-600 hover:text-primary-800 mt-2 md:mt-1 py-1 md:py-0"}," Fermer ",8,LD)])])]))),128))])],4)):un("",!0)]),E("div",SD,[E("button",{onClick:U[3]||(U[3]=q=>s.value=!s.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[E("div",CD,[E("span",ED,Wt(O.value),1),F.value?($e(),qe("span",PD,Wt(F.value),1)):un("",!0)]),E("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:((W=Wn(t).user)==null?void 0:W.logo)||"https://ui-avatars.com/api/?name="+encodeURIComponent(O.value),alt:O.value},null,8,MD)]),s.value?($e(),qe("div",{key:0,class:"absolute right-0 mt-2 md:w-48 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3000] md:right-0 right-0 left-0 md:left-auto",style:rl(y.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[E("div",AD,[E("div",null,[E("div",kD,Wt(O.value),1),E("div",TD,Wt(F.value),1)]),E("button",{onClick:U[4]||(U[4]=q=>s.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},U[17]||(U[17]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),($e(!0),qe(Rn,null,Br(xe.value,q=>($e(),Ua(Wn(Fd),{key:q.name,to:q.to,class:"block px-4 md:py-2 py-3 text-sm text-gray-700 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",onClick:U[5]||(U[5]=ie=>s.value=!1)},{default:ql(()=>[pi(Wt(q.name),1)]),_:2},1032,["to"]))),128)),E("button",{onClick:G,class:"block w-full px-4 md:py-2 py-3 text-left text-sm text-red-600 hover:bg-gray-50 font-medium"}," Déconnexion ")],4)):un("",!0)])])]),o.value?($e(),qe("div",DD,[E("div",ND,[($e(!0),qe(Rn,null,Br(ce.value,q=>($e(),Ua(Wn(Fd),{key:q.name,to:q.to,class:Ri(["block px-3 py-2 rounded-md text-base font-medium",[$.$route.path===q.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:U[6]||(U[6]=ie=>o.value=!1)},{default:ql(()=>[pi(Wt(q.name),1)]),_:2},1032,["to","class"]))),128))]),$.$route.path==="/"?($e(),qe("div",BD,[fi(ob,{onSelectLocation:R})])):un("",!0)])):un("",!0)])])):un("",!0),E("main",{class:Ri([$.$route.path==="/"&&!y.value?"overflow-hidden":"overflow-auto","flex-1 flex flex-col","md:h-[calc(100vh-64px)]"])},[fi(Wn(X5))],2),fi(K7,{position:"bottom-left"})])}}}),ID="modulepreload",RD=function(e){return"/static/frontend/"+e},sb={},Yf=function(n,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),u=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(t.map(f=>{if(f=RD(f),f in sb)return;sb[f]=!0;const d=f.endsWith(".css"),g=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const y=document.createElement("link");if(y.rel=d?"stylesheet":ID,d||(y.as="script"),y.crossOrigin="",y.href=f,u&&y.setAttribute("nonce",u),document.head.appendChild(y),d)return new Promise((x,_)=>{y.addEventListener("load",x),y.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${f}`)))})}))}function s(o){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=o,window.dispatchEvent(u),!u.defaultPrevented)throw o}return i.then(o=>{for(const u of o||[])u.status==="rejected"&&s(u.reason);return n().catch(s)})},FD={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},jD={class:"max-w-md w-full space-y-8"},zD={class:"space-y-4"},$D={class:"mt-1"},UD={class:"mt-1"},VD={class:"mt-1"},HD={key:0,class:"rounded-md bg-red-50 p-4"},GD={class:"flex"},qD={class:"ml-3"},WD={class:"text-sm font-medium text-red-800"},ZD={key:1,class:"rounded-md bg-yellow-50 p-4"},KD={class:"flex"},YD={class:"ml-3"},JD={class:"mt-2 text-sm text-yellow-700"},XD={class:"list-disc pl-5 space-y-1"},QD=["disabled"],eN={class:"absolute left-0 inset-y-0 flex items-center pl-3"},tN={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},nN={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},rN=us({__name:"ChangePasswordForm",setup(e){const n=Np(),t=va(),r=Jl({oldPassword:"",newPassword:"",confirmPassword:""}),i=Ft(!1),s=Ft("");$s(()=>{var d,g;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:t.isAuthenticated,userId:(d=t.user)==null?void 0:d.id,mustChangePassword:(g=t.user)==null?void 0:g.must_change_password})});const o=gr(()=>{const d=[];return r.newPassword&&r.newPassword.length<8&&d.push("Le nouveau mot de passe doit contenir au moins 8 caractères"),r.newPassword&&r.confirmPassword&&r.newPassword!==r.confirmPassword&&d.push("Les mots de passe ne correspondent pas"),d}),u=gr(()=>r.oldPassword.length>0&&r.newPassword.length>=8&&r.newPassword===r.confirmPassword);async function f(){var d,g,y,x,_,M,D,N;if(!u.value){s.value="Veuillez corriger les erreurs avant de continuer";return}if(!((d=t.user)!=null&&d.id)){s.value="Erreur : utilisateur non identifié";return}i.value=!0,s.value="";try{console.log("Submitting password change..."),await t.changePassword(r.oldPassword,r.newPassword),console.log("Password changed successfully"),n.push("/")}catch(O){console.error("Password change failed:",O),(y=(g=O.response)==null?void 0:g.data)!=null&&y.detail?s.value=O.response.data.detail:(_=(x=O.response)==null?void 0:x.data)!=null&&_.old_password?s.value=O.response.data.old_password[0]:(D=(M=O.response)==null?void 0:M.data)!=null&&D.password?s.value=O.response.data.password[0]:((N=O.response)==null?void 0:N.status)===401?(s.value="Session expirée, veuillez vous reconnecter",await t.logout(),n.push("/login")):s.value="Une erreur est survenue lors du changement de mot de passe"}finally{i.value=!1}}return(d,g)=>($e(),qe("div",FD,[E("div",jD,[g[12]||(g[12]=E("div",null,[E("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),E("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de sécurité, vous devez changer votre mot de passe. ")],-1)),E("form",{class:"mt-8 space-y-6",onSubmit:Vc(f,["prevent"])},[E("div",zD,[E("div",null,[g[3]||(g[3]=E("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),E("div",$D,[In(E("input",{id:"old-password","onUpdate:modelValue":g[0]||(g[0]=y=>r.oldPassword=y),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[Zr,r.oldPassword]])])]),E("div",null,[g[4]||(g[4]=E("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),E("div",UD,[In(E("input",{id:"new-password","onUpdate:modelValue":g[1]||(g[1]=y=>r.newPassword=y),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[Zr,r.newPassword]])]),g[5]||(g[5]=E("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractères ",-1))]),E("div",null,[g[6]||(g[6]=E("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),E("div",VD,[In(E("input",{id:"confirm-password","onUpdate:modelValue":g[2]||(g[2]=y=>r.confirmPassword=y),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[Zr,r.confirmPassword]])])])]),s.value?($e(),qe("div",HD,[E("div",GD,[g[7]||(g[7]=E("div",{class:"flex-shrink-0"},[E("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),E("div",qD,[E("h3",WD,Wt(s.value),1)])])])):un("",!0),o.value.length>0?($e(),qe("div",ZD,[E("div",KD,[g[9]||(g[9]=E("div",{class:"flex-shrink-0"},[E("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),E("div",YD,[g[8]||(g[8]=E("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),E("div",JD,[E("ul",XD,[($e(!0),qe(Rn,null,Br(o.value,(y,x)=>($e(),qe("li",{key:x},Wt(y),1))),128))])])])])])):un("",!0),E("div",null,[E("button",{type:"submit",disabled:i.value||!u.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[E("span",eN,[i.value?($e(),qe("svg",nN,g[11]||(g[11]=[E("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),E("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):($e(),qe("svg",tN,g[10]||(g[10]=[E("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),pi(" "+Wt(i.value?"Modification en cours...":"Changer le mot de passe"),1)],8,QD)])],32)])]))}}),c1="/static/frontend/assets/logo.svg",iN={class:"min-h-screen bg-gradient-to-b from-blue-50 to-white py-12 sm:px-6 lg:px-8 overflow-auto relative"},oN={class:"container mx-auto"},sN={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},aN={class:"bg-white py-8 px-6 shadow-lg rounded-md sm:px-10"},lN={key:0,class:"rounded-md bg-red-50 p-4"},uN={class:"flex"},cN={class:"ml-3"},fN={class:"text-sm font-medium text-red-800"},hN={class:"mt-1"},dN={class:"mt-1 relative"},pN=["type"],gN={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},mN={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},vN={class:"flex items-center justify-between"},yN={class:"flex items-center"},_N={class:"text-sm"},bN=["disabled"],wN={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},xN=us({__name:"LoginView",setup(e){const n=Np(),t=va(),r=Ft(!1),i=Ft(null),s=Ft(!1),o=Jl({username:"",password:"",rememberMe:!1});$s(async()=>{var f;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE);try{if((f=window.INITIAL_STATE)!=null&&f.isAuthenticated){console.log("User is authenticated, redirecting to home"),n.push("/");return}await t.restoreSession()&&(console.log("Session restored, redirecting to home"),n.push("/"))}catch(d){console.error("Error during initialization:",d),i.value=null}});async function u(){var f,d,g,y,x,_,M,D,N;r.value=!0,i.value=null;try{if(!o.username||!o.password){i.value="Veuillez remplir tous les champs";return}await t.login(o.username,o.password),(f=t.user)!=null&&f.must_change_password?n.push("/change-password"):n.push("/")}catch(O){console.error("Login error:",O),((d=O==null?void 0:O.response)==null?void 0:d.status)===500?i.value="Le service est temporairement indisponible. Veuillez réessayer dans quelques instants.":((g=O==null?void 0:O.response)==null?void 0:g.status)===401||((y=O==null?void 0:O.response)==null?void 0:y.status)===403?i.value="Identifiants incorrects. Veuillez vérifier votre nom d'utilisateur et mot de passe.":(_=(x=O==null?void 0:O.response)==null?void 0:x.data)!=null&&_.detail?i.value=O.response.data.detail:(N=(D=(M=O==null?void 0:O.response)==null?void 0:M.data)==null?void 0:D.non_field_errors)!=null&&N[0]?i.value=O.response.data.non_field_errors[0]:(O==null?void 0:O.message)==="Network Error"?i.value="Impossible de se connecter au serveur. Veuillez vérifier votre connexion internet.":i.value="Une erreur est survenue lors de la connexion. Veuillez réessayer."}finally{r.value=!1}}return(f,d)=>{const g=Xw("router-link");return $e(),qe("div",iN,[E("div",oN,[d[12]||(d[12]=E("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[E("img",{src:c1,alt:"TagMap Logo",class:"mx-auto h-40 w-auto transition-transform duration-300 hover:scale-110"}),E("h2",{class:"mt-2 text-center text-3xl font-bold text-gray-800"}," TagMap "),E("p",{class:"mt-2 text-center text-sm text-gray-600"}," Solution innovante de cartographie et gestion de projets ")],-1)),E("div",sN,[E("div",aN,[E("form",{class:"space-y-6",onSubmit:Vc(u,["prevent"])},[i.value?($e(),qe("div",lN,[E("div",uN,[d[4]||(d[4]=E("div",{class:"flex-shrink-0"},[E("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),E("div",cN,[E("h3",fN,Wt(i.value),1)])])])):un("",!0),E("div",null,[d[5]||(d[5]=E("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),E("div",hN,[In(E("input",{id:"username","onUpdate:modelValue":d[0]||(d[0]=y=>o.username=y),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[Zr,o.username]])])]),E("div",null,[d[8]||(d[8]=E("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),E("div",dN,[In(E("input",{id:"password","onUpdate:modelValue":d[1]||(d[1]=y=>o.password=y),type:s.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,pN),[[ly,o.password]]),E("button",{type:"button",onClick:d[2]||(d[2]=y=>s.value=!s.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[s.value?($e(),qe("svg",gN,d[6]||(d[6]=[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):($e(),qe("svg",mN,d[7]||(d[7]=[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),E("div",vN,[E("div",yN,[In(E("input",{id:"remember-me","onUpdate:modelValue":d[3]||(d[3]=y=>o.rememberMe=y),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[Sl,o.rememberMe]]),d[9]||(d[9]=E("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),E("div",_N,[fi(g,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:ql(()=>d[10]||(d[10]=[pi(" Mot de passe oublié ? ")])),_:1})])]),E("div",null,[E("button",{type:"submit",disabled:r.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[r.value?($e(),qe("svg",wN,d[11]||(d[11]=[E("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),E("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):un("",!0),pi(" "+Wt(r.value?"Connexion en cours...":"Se connecter"),1)],8,bN)])],32)])]),d[13]||(d[13]=uc('<div class="mt-16 pt-8 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><h2 class="text-center text-2xl font-bold text-gray-800 mb-8">Découvrez comment TagMap transforme vos projets </h2><div class="flex justify-center mb-10"><a href="/assets/plaquette-tagmap.pdf" target="_blank" class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-all duration-200"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Télécharger notre plaquette </a></div><div class="grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-3"><div class="bg-white overflow-hidden shadow-lg rounded-lg transition-all duration-300 hover:shadow-xl"><div class="p-6"><div class="flex items-center justify-center h-12 w-12 rounded-md bg-primary-500 text-white mb-5 mx-auto"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"></path></svg></div><h3 class="text-lg font-medium text-gray-900 text-center">Cartographie de précision</h3><p class="mt-3 text-base text-gray-600 text-center"> Créez des plans détaillés avec des mesures précises de surfaces, distances et élévations pour optimiser vos projets d&#39;irrigation et d&#39;aménagement. </p></div></div><div class="bg-white overflow-hidden shadow-lg rounded-lg transition-all duration-300 hover:shadow-xl"><div class="p-6"><div class="flex items-center justify-center h-12 w-12 rounded-md bg-primary-500 text-white mb-5 mx-auto"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div><h3 class="text-lg font-medium text-gray-900 text-center">Gestion collaborative</h3><p class="mt-3 text-base text-gray-600 text-center"> Partagez vos projets avec votre équipe et vos clients. Organisez vos notes géolocalisées et suivez l&#39;avancement des tâches en temps réel. </p></div></div></div><div class="mt-16 mb-16 bg-white overflow-hidden shadow-lg rounded-lg max-w-4xl mx-auto"><div class="p-8"><div class="flex items-center mb-6"><div class="h-12 w-12 rounded-full bg-primary-100 flex items-center justify-center text-primary-700 font-bold text-xl"> P</div><div class="ml-4"><h4 class="text-lg font-medium text-gray-900">Pierre Durand</h4><p class="text-sm text-gray-600">Directeur technique, Irrigation Pro</p></div></div><blockquote class="italic text-gray-700"> &quot;TagMap a révolutionné notre façon de concevoir et de suivre nos projets d&#39;irrigation. La précision des mesures et la facilité de collaboration entre nos équipes terrain et bureau ont considérablement amélioré notre efficacité.&quot; </blockquote></div></div><div class="h-16"></div></div>',1))])])}}});var f1={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,n){(function(t,r){r(n)})(ea,function(t){var r="1.9.4";function i(a){var p,S,V,oe;for(S=1,V=arguments.length;S<V;S++){oe=arguments[S];for(p in oe)a[p]=oe[p]}return a}var s=Object.create||function(){function a(){}return function(p){return a.prototype=p,new a}}();function o(a,p){var S=Array.prototype.slice;if(a.bind)return a.bind.apply(a,S.call(arguments,1));var V=S.call(arguments,2);return function(){return a.apply(p,V.length?V.concat(S.call(arguments)):arguments)}}var u=0;function f(a){return"_leaflet_id"in a||(a._leaflet_id=++u),a._leaflet_id}function d(a,p,S){var V,oe,Se,st;return st=function(){V=!1,oe&&(Se.apply(S,oe),oe=!1)},Se=function(){V?oe=arguments:(a.apply(S,arguments),setTimeout(st,p),V=!0)},Se}function g(a,p,S){var V=p[1],oe=p[0],Se=V-oe;return a===V&&S?a:((a-oe)%Se+Se)%Se+oe}function y(){return!1}function x(a,p){if(p===!1)return a;var S=Math.pow(10,p===void 0?6:p);return Math.round(a*S)/S}function _(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function M(a){return _(a).split(/\s+/)}function D(a,p){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?s(a.options):{});for(var S in p)a.options[S]=p[S];return a.options}function N(a,p,S){var V=[];for(var oe in a)V.push(encodeURIComponent(S?oe.toUpperCase():oe)+"="+encodeURIComponent(a[oe]));return(!p||p.indexOf("?")===-1?"?":"&")+V.join("&")}var O=/\{ *([\w_ -]+) *\}/g;function F(a,p){return a.replace(O,function(S,V){var oe=p[V];if(oe===void 0)throw new Error("No value provided for variable "+S);return typeof oe=="function"&&(oe=oe(p)),oe})}var Y=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function Q(a,p){for(var S=0;S<a.length;S++)if(a[S]===p)return S;return-1}var le="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ce(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var xe=0;function G(a){var p=+new Date,S=Math.max(0,16-(p-xe));return xe=p+S,window.setTimeout(a,S)}var R=window.requestAnimationFrame||ce("RequestAnimationFrame")||G,Z=window.cancelAnimationFrame||ce("CancelAnimationFrame")||ce("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function z(a,p,S){if(S&&R===G)a.call(p);else return R.call(window,o(a,p))}function I(a){a&&Z.call(window,a)}var $={__proto__:null,extend:i,create:s,bind:o,get lastId(){return u},stamp:f,throttle:d,wrapNum:g,falseFn:y,formatNum:x,trim:_,splitWords:M,setOptions:D,getParamString:N,template:F,isArray:Y,indexOf:Q,emptyImageUrl:le,requestFn:R,cancelFn:Z,requestAnimFrame:z,cancelAnimFrame:I};function U(){}U.extend=function(a){var p=function(){D(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},S=p.__super__=this.prototype,V=s(S);V.constructor=p,p.prototype=V;for(var oe in this)Object.prototype.hasOwnProperty.call(this,oe)&&oe!=="prototype"&&oe!=="__super__"&&(p[oe]=this[oe]);return a.statics&&i(p,a.statics),a.includes&&(W(a.includes),i.apply(null,[V].concat(a.includes))),i(V,a),delete V.statics,delete V.includes,V.options&&(V.options=S.options?s(S.options):{},i(V.options,a.options)),V._initHooks=[],V.callInitHooks=function(){if(!this._initHooksCalled){S.callInitHooks&&S.callInitHooks.call(this),this._initHooksCalled=!0;for(var Se=0,st=V._initHooks.length;Se<st;Se++)V._initHooks[Se].call(this)}},p},U.include=function(a){var p=this.prototype.options;return i(this.prototype,a),a.options&&(this.prototype.options=p,this.mergeOptions(a.options)),this},U.mergeOptions=function(a){return i(this.prototype.options,a),this},U.addInitHook=function(a){var p=Array.prototype.slice.call(arguments,1),S=typeof a=="function"?a:function(){this[a].apply(this,p)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(S),this};function W(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=Y(a)?a:[a];for(var p=0;p<a.length;p++)a[p]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var q={on:function(a,p,S){if(typeof a=="object")for(var V in a)this._on(V,a[V],p);else{a=M(a);for(var oe=0,Se=a.length;oe<Se;oe++)this._on(a[oe],p,S)}return this},off:function(a,p,S){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var V in a)this._off(V,a[V],p);else{a=M(a);for(var oe=arguments.length===1,Se=0,st=a.length;Se<st;Se++)oe?this._off(a[Se]):this._off(a[Se],p,S)}return this},_on:function(a,p,S,V){if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}if(this._listens(a,p,S)===!1){S===this&&(S=void 0);var oe={fn:p,ctx:S};V&&(oe.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(oe)}},_off:function(a,p,S){var V,oe,Se;if(this._events&&(V=this._events[a],!!V)){if(arguments.length===1){if(this._firingCount)for(oe=0,Se=V.length;oe<Se;oe++)V[oe].fn=y;delete this._events[a];return}if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}var st=this._listens(a,p,S);if(st!==!1){var Pt=V[st];this._firingCount&&(Pt.fn=y,this._events[a]=V=V.slice()),V.splice(st,1)}}},fire:function(a,p,S){if(!this.listens(a,S))return this;var V=i({},p,{type:a,target:this,sourceTarget:p&&p.sourceTarget||this});if(this._events){var oe=this._events[a];if(oe){this._firingCount=this._firingCount+1||1;for(var Se=0,st=oe.length;Se<st;Se++){var Pt=oe[Se],zt=Pt.fn;Pt.once&&this.off(a,zt,Pt.ctx),zt.call(Pt.ctx||this,V)}this._firingCount--}}return S&&this._propagateEvent(V),this},listens:function(a,p,S,V){typeof a!="string"&&console.warn('"string" type argument expected');var oe=p;typeof p!="function"&&(V=!!p,oe=void 0,S=void 0);var Se=this._events&&this._events[a];if(Se&&Se.length&&this._listens(a,oe,S)!==!1)return!0;if(V){for(var st in this._eventParents)if(this._eventParents[st].listens(a,p,S,V))return!0}return!1},_listens:function(a,p,S){if(!this._events)return!1;var V=this._events[a]||[];if(!p)return!!V.length;S===this&&(S=void 0);for(var oe=0,Se=V.length;oe<Se;oe++)if(V[oe].fn===p&&V[oe].ctx===S)return oe;return!1},once:function(a,p,S){if(typeof a=="object")for(var V in a)this._on(V,a[V],p,!0);else{a=M(a);for(var oe=0,Se=a.length;oe<Se;oe++)this._on(a[oe],p,S,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[f(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[f(a)],this},_propagateEvent:function(a){for(var p in this._eventParents)this._eventParents[p].fire(a.type,i({layer:a.target,propagatedFrom:a.target},a),!0)}};q.addEventListener=q.on,q.removeEventListener=q.clearAllEventListeners=q.off,q.addOneTimeEventListener=q.once,q.fireEvent=q.fire,q.hasEventListeners=q.listens;var ie=U.extend(q);function re(a,p,S){this.x=S?Math.round(a):a,this.y=S?Math.round(p):p}var we=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};re.prototype={clone:function(){return new re(this.x,this.y)},add:function(a){return this.clone()._add(Pe(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(Pe(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new re(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new re(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=we(this.x),this.y=we(this.y),this},distanceTo:function(a){a=Pe(a);var p=a.x-this.x,S=a.y-this.y;return Math.sqrt(p*p+S*S)},equals:function(a){return a=Pe(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=Pe(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function Pe(a,p,S){return a instanceof re?a:Y(a)?new re(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new re(a.x,a.y):new re(a,p,S)}function Ie(a,p){if(a)for(var S=p?[a,p]:a,V=0,oe=S.length;V<oe;V++)this.extend(S[V])}Ie.prototype={extend:function(a){var p,S;if(!a)return this;if(a instanceof re||typeof a[0]=="number"||"x"in a)p=S=Pe(a);else if(a=A(a),p=a.min,S=a.max,!p||!S)return this;return!this.min&&!this.max?(this.min=p.clone(),this.max=S.clone()):(this.min.x=Math.min(p.x,this.min.x),this.max.x=Math.max(S.x,this.max.x),this.min.y=Math.min(p.y,this.min.y),this.max.y=Math.max(S.y,this.max.y)),this},getCenter:function(a){return Pe((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return Pe(this.min.x,this.max.y)},getTopRight:function(){return Pe(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var p,S;return typeof a[0]=="number"||a instanceof re?a=Pe(a):a=A(a),a instanceof Ie?(p=a.min,S=a.max):p=S=a,p.x>=this.min.x&&S.x<=this.max.x&&p.y>=this.min.y&&S.y<=this.max.y},intersects:function(a){a=A(a);var p=this.min,S=this.max,V=a.min,oe=a.max,Se=oe.x>=p.x&&V.x<=S.x,st=oe.y>=p.y&&V.y<=S.y;return Se&&st},overlaps:function(a){a=A(a);var p=this.min,S=this.max,V=a.min,oe=a.max,Se=oe.x>p.x&&V.x<S.x,st=oe.y>p.y&&V.y<S.y;return Se&&st},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var p=this.min,S=this.max,V=Math.abs(p.x-S.x)*a,oe=Math.abs(p.y-S.y)*a;return A(Pe(p.x-V,p.y-oe),Pe(S.x+V,S.y+oe))},equals:function(a){return a?(a=A(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function A(a,p){return!a||a instanceof Ie?a:new Ie(a,p)}function J(a,p){if(a)for(var S=p?[a,p]:a,V=0,oe=S.length;V<oe;V++)this.extend(S[V])}J.prototype={extend:function(a){var p=this._southWest,S=this._northEast,V,oe;if(a instanceof ne)V=a,oe=a;else if(a instanceof J){if(V=a._southWest,oe=a._northEast,!V||!oe)return this}else return a?this.extend(he(a)||fe(a)):this;return!p&&!S?(this._southWest=new ne(V.lat,V.lng),this._northEast=new ne(oe.lat,oe.lng)):(p.lat=Math.min(V.lat,p.lat),p.lng=Math.min(V.lng,p.lng),S.lat=Math.max(oe.lat,S.lat),S.lng=Math.max(oe.lng,S.lng)),this},pad:function(a){var p=this._southWest,S=this._northEast,V=Math.abs(p.lat-S.lat)*a,oe=Math.abs(p.lng-S.lng)*a;return new J(new ne(p.lat-V,p.lng-oe),new ne(S.lat+V,S.lng+oe))},getCenter:function(){return new ne((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ne(this.getNorth(),this.getWest())},getSouthEast:function(){return new ne(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof ne||"lat"in a?a=he(a):a=fe(a);var p=this._southWest,S=this._northEast,V,oe;return a instanceof J?(V=a.getSouthWest(),oe=a.getNorthEast()):V=oe=a,V.lat>=p.lat&&oe.lat<=S.lat&&V.lng>=p.lng&&oe.lng<=S.lng},intersects:function(a){a=fe(a);var p=this._southWest,S=this._northEast,V=a.getSouthWest(),oe=a.getNorthEast(),Se=oe.lat>=p.lat&&V.lat<=S.lat,st=oe.lng>=p.lng&&V.lng<=S.lng;return Se&&st},overlaps:function(a){a=fe(a);var p=this._southWest,S=this._northEast,V=a.getSouthWest(),oe=a.getNorthEast(),Se=oe.lat>p.lat&&V.lat<S.lat,st=oe.lng>p.lng&&V.lng<S.lng;return Se&&st},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,p){return a?(a=fe(a),this._southWest.equals(a.getSouthWest(),p)&&this._northEast.equals(a.getNorthEast(),p)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function fe(a,p){return a instanceof J?a:new J(a,p)}function ne(a,p,S){if(isNaN(a)||isNaN(p))throw new Error("Invalid LatLng object: ("+a+", "+p+")");this.lat=+a,this.lng=+p,S!==void 0&&(this.alt=+S)}ne.prototype={equals:function(a,p){if(!a)return!1;a=he(a);var S=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return S<=(p===void 0?1e-9:p)},toString:function(a){return"LatLng("+x(this.lat,a)+", "+x(this.lng,a)+")"},distanceTo:function(a){return T.distance(this,he(a))},wrap:function(){return T.wrapLatLng(this)},toBounds:function(a){var p=180*a/40075017,S=p/Math.cos(Math.PI/180*this.lat);return fe([this.lat-p,this.lng-S],[this.lat+p,this.lng+S])},clone:function(){return new ne(this.lat,this.lng,this.alt)}};function he(a,p,S){return a instanceof ne?a:Y(a)&&typeof a[0]!="object"?a.length===3?new ne(a[0],a[1],a[2]):a.length===2?new ne(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new ne(a.lat,"lng"in a?a.lng:a.lon,a.alt):p===void 0?null:new ne(a,p,S)}var ae={latLngToPoint:function(a,p){var S=this.projection.project(a),V=this.scale(p);return this.transformation._transform(S,V)},pointToLatLng:function(a,p){var S=this.scale(p),V=this.transformation.untransform(a,S);return this.projection.unproject(V)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var p=this.projection.bounds,S=this.scale(a),V=this.transformation.transform(p.min,S),oe=this.transformation.transform(p.max,S);return new Ie(V,oe)},infinite:!1,wrapLatLng:function(a){var p=this.wrapLng?g(a.lng,this.wrapLng,!0):a.lng,S=this.wrapLat?g(a.lat,this.wrapLat,!0):a.lat,V=a.alt;return new ne(S,p,V)},wrapLatLngBounds:function(a){var p=a.getCenter(),S=this.wrapLatLng(p),V=p.lat-S.lat,oe=p.lng-S.lng;if(V===0&&oe===0)return a;var Se=a.getSouthWest(),st=a.getNorthEast(),Pt=new ne(Se.lat-V,Se.lng-oe),zt=new ne(st.lat-V,st.lng-oe);return new J(Pt,zt)}},T=i({},ae,{wrapLng:[-180,180],R:6371e3,distance:function(a,p){var S=Math.PI/180,V=a.lat*S,oe=p.lat*S,Se=Math.sin((p.lat-a.lat)*S/2),st=Math.sin((p.lng-a.lng)*S/2),Pt=Se*Se+Math.cos(V)*Math.cos(oe)*st*st,zt=2*Math.atan2(Math.sqrt(Pt),Math.sqrt(1-Pt));return this.R*zt}}),ue=6378137,ke={R:ue,MAX_LATITUDE:85.0511287798,project:function(a){var p=Math.PI/180,S=this.MAX_LATITUDE,V=Math.max(Math.min(S,a.lat),-S),oe=Math.sin(V*p);return new re(this.R*a.lng*p,this.R*Math.log((1+oe)/(1-oe))/2)},unproject:function(a){var p=180/Math.PI;return new ne((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*p,a.x*p/this.R)},bounds:function(){var a=ue*Math.PI;return new Ie([-a,-a],[a,a])}()};function Ce(a,p,S,V){if(Y(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=p,this._c=S,this._d=V}Ce.prototype={transform:function(a,p){return this._transform(a.clone(),p)},_transform:function(a,p){return p=p||1,a.x=p*(this._a*a.x+this._b),a.y=p*(this._c*a.y+this._d),a},untransform:function(a,p){return p=p||1,new re((a.x/p-this._b)/this._a,(a.y/p-this._d)/this._c)}};function Ve(a,p,S,V){return new Ce(a,p,S,V)}var K=i({},T,{code:"EPSG:3857",projection:ke,transformation:function(){var a=.5/(Math.PI*ke.R);return Ve(a,.5,-a,.5)}()}),pe=i({},K,{code:"EPSG:900913"});function ve(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function ge(a,p){var S="",V,oe,Se,st,Pt,zt;for(V=0,Se=a.length;V<Se;V++){for(Pt=a[V],oe=0,st=Pt.length;oe<st;oe++)zt=Pt[oe],S+=(oe?"L":"M")+zt.x+" "+zt.y;S+=p?at.svg?"z":"x":""}return S||"M0 0"}var Ue=document.documentElement.style,Qe="ActiveXObject"in window,Ke=Qe&&!document.addEventListener,Ge="msLaunchUri"in navigator&&!("documentMode"in document),Xe=mr("webkit"),ot=mr("android"),kt=mr("android 2")||mr("android 3"),Ct=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ut=ot&&mr("Google")&&Ct<537&&!("AudioNode"in window),Gt=!!window.opera,fn=!Ge&&mr("chrome"),pn=mr("gecko")&&!Xe&&!Gt&&!Qe,et=!fn&&mr("safari"),it=mr("phantom"),nt="OTransition"in Ue,Vt=navigator.platform.indexOf("Win")===0,Qt=Qe&&"transition"in Ue,On="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!kt,wn="MozPerspective"in Ue,Tn=!window.L_DISABLE_3D&&(Qt||On||wn)&&!nt&&!it,ar=typeof orientation<"u"||mr("mobile"),xn=ar&&Xe,Mn=ar&&On,En=!window.PointerEvent&&window.MSPointerEvent,cr=!!(window.PointerEvent||En),yr="ontouchstart"in window||!!window.TouchEvent,mt=!window.L_NO_TOUCH&&(yr||cr),We=ar&&Gt,Ot=ar&&pn,Pn=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,tr=function(){var a=!1;try{var p=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",y,p),window.removeEventListener("testPassiveEventSupport",y,p)}catch{}return a}(),Zn=function(){return!!document.createElement("canvas").getContext}(),Zt=!!(document.createElementNS&&ve("svg").createSVGRect),mn=!!Zt&&function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),It=!Zt&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var p=a.firstChild;return p.style.behavior="url(#default#VML)",p&&typeof p.adj=="object"}catch{return!1}}(),Kt=navigator.platform.indexOf("Mac")===0,Ln=navigator.platform.indexOf("Linux")===0;function mr(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var at={ie:Qe,ielt9:Ke,edge:Ge,webkit:Xe,android:ot,android23:kt,androidStock:Ut,opera:Gt,chrome:fn,gecko:pn,safari:et,phantom:it,opera12:nt,win:Vt,ie3d:Qt,webkit3d:On,gecko3d:wn,any3d:Tn,mobile:ar,mobileWebkit:xn,mobileWebkit3d:Mn,msPointer:En,pointer:cr,touch:mt,touchNative:yr,mobileOpera:We,mobileGecko:Ot,retina:Pn,passiveEvents:tr,canvas:Zn,svg:Zt,vml:It,inlineSvg:mn,mac:Kt,linux:Ln},Cn=at.msPointer?"MSPointerDown":"pointerdown",xr=at.msPointer?"MSPointerMove":"pointermove",Ni=at.msPointer?"MSPointerUp":"pointerup",Fr=at.msPointer?"MSPointerCancel":"pointercancel",Er={touchstart:Cn,touchmove:xr,touchend:Ni,touchcancel:Fr},lr={touchstart:Ir,touchmove:Kr,touchend:Kr,touchcancel:Kr},Hr={},ir=!1;function Or(a,p,S){return p==="touchstart"&&gi(),lr[p]?(S=lr[p].bind(this,S),a.addEventListener(Er[p],S,!1),S):(console.warn("wrong event specified:",p),y)}function jr(a,p,S){if(!Er[p]){console.warn("wrong event specified:",p);return}a.removeEventListener(Er[p],S,!1)}function rn(a){Hr[a.pointerId]=a}function Fi(a){Hr[a.pointerId]&&(Hr[a.pointerId]=a)}function _i(a){delete Hr[a.pointerId]}function gi(){ir||(document.addEventListener(Cn,rn,!0),document.addEventListener(xr,Fi,!0),document.addEventListener(Ni,_i,!0),document.addEventListener(Fr,_i,!0),ir=!0)}function Kr(a,p){if(p.pointerType!==(p.MSPOINTER_TYPE_MOUSE||"mouse")){p.touches=[];for(var S in Hr)p.touches.push(Hr[S]);p.changedTouches=[p],a(p)}}function Ir(a,p){p.MSPOINTER_TYPE_TOUCH&&p.pointerType===p.MSPOINTER_TYPE_TOUCH&&Sr(p),Kr(a,p)}function Rr(a){var p={},S,V;for(V in a)S=a[V],p[V]=S&&S.bind?S.bind(a):S;return a=p,p.type="dblclick",p.detail=2,p.isTrusted=!1,p._simulated=!0,p}var hr=200;function ji(a,p){a.addEventListener("dblclick",p);var S=0,V;function oe(Se){if(Se.detail!==1){V=Se.detail;return}if(!(Se.pointerType==="mouse"||Se.sourceCapabilities&&!Se.sourceCapabilities.firesTouchEvents)){var st=Ha(Se);if(!(st.some(function(zt){return zt instanceof HTMLLabelElement&&zt.attributes.for})&&!st.some(function(zt){return zt instanceof HTMLInputElement||zt instanceof HTMLSelectElement}))){var Pt=Date.now();Pt-S<=hr?(V++,V===2&&p(Rr(Se))):V=1,S=Pt}}}return a.addEventListener("click",oe),{dblclick:p,simDblclick:oe}}function Ls(a,p){a.removeEventListener("dblclick",p.dblclick),a.removeEventListener("click",p.simDblclick)}var Ss=co(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),oi=co(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Fn=oi==="webkitTransition"||oi==="OTransition"?oi+"End":"transitionend";function Eo(a){return typeof a=="string"?document.getElementById(a):a}function ui(a,p){var S=a.style[p]||a.currentStyle&&a.currentStyle[p];if((!S||S==="auto")&&document.defaultView){var V=document.defaultView.getComputedStyle(a,null);S=V?V[p]:null}return S==="auto"?null:S}function fr(a,p,S){var V=document.createElement(a);return V.className=p||"",S&&S.appendChild(V),V}function qn(a){var p=a.parentNode;p&&p.removeChild(a)}function _o(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function bo(a){var p=a.parentNode;p&&p.lastChild!==a&&p.appendChild(a)}function Lr(a){var p=a.parentNode;p&&p.firstChild!==a&&p.insertBefore(a,p.firstChild)}function Us(a,p){if(a.classList!==void 0)return a.classList.contains(p);var S=_n(a);return S.length>0&&new RegExp("(^|\\s)"+p+"(\\s|$)").test(S)}function Hn(a,p){if(a.classList!==void 0)for(var S=M(p),V=0,oe=S.length;V<oe;V++)a.classList.add(S[V]);else if(!Us(a,p)){var Se=_n(a);Yr(a,(Se?Se+" ":"")+p)}}function _r(a,p){a.classList!==void 0?a.classList.remove(p):Yr(a,_((" "+_n(a)+" ").replace(" "+p+" "," ")))}function Yr(a,p){a.className.baseVal===void 0?a.className=p:a.className.baseVal=p}function _n(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function tn(a,p){"opacity"in a.style?a.style.opacity=p:"filter"in a.style&&si(a,p)}function si(a,p){var S=!1,V="DXImageTransform.Microsoft.Alpha";try{S=a.filters.item(V)}catch{if(p===1)return}p=Math.round(p*100),S?(S.Enabled=p!==100,S.Opacity=p):a.style.filter+=" progid:"+V+"(opacity="+p+")"}function co(a){for(var p=document.documentElement.style,S=0;S<a.length;S++)if(a[S]in p)return a[S];return!1}function wo(a,p,S){var V=p||new re(0,0);a.style[Ss]=(at.ie3d?"translate("+V.x+"px,"+V.y+"px)":"translate3d("+V.x+"px,"+V.y+"px,0)")+(S?" scale("+S+")":"")}function Pi(a,p){a._leaflet_pos=p,at.any3d?wo(a,p):(a.style.left=p.x+"px",a.style.top=p.y+"px")}function cs(a){return a._leaflet_pos||new re(0,0)}var Xo,Io,hi;if("onselectstart"in document)Xo=function(){br(window,"selectstart",Sr)},Io=function(){Tr(window,"selectstart",Sr)};else{var Bs=co(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Xo=function(){if(Bs){var a=document.documentElement.style;hi=a[Bs],a[Bs]="none"}},Io=function(){Bs&&(document.documentElement.style[Bs]=hi,hi=void 0)}}function Ro(){br(window,"dragstart",Sr)}function Xi(){Tr(window,"dragstart",Sr)}var xo,Vs;function ya(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(Qi(),xo=a,Vs=a.style.outlineStyle,a.style.outlineStyle="none",br(window,"keydown",Qi))}function Qi(){xo&&(xo.style.outlineStyle=Vs,xo=void 0,Vs=void 0,Tr(window,"keydown",Qi))}function ol(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function _a(a){var p=a.getBoundingClientRect();return{x:p.width/a.offsetWidth||1,y:p.height/a.offsetHeight||1,boundingClientRect:p}}var pr={__proto__:null,TRANSFORM:Ss,TRANSITION:oi,TRANSITION_END:Fn,get:Eo,getStyle:ui,create:fr,remove:qn,empty:_o,toFront:bo,toBack:Lr,hasClass:Us,addClass:Hn,removeClass:_r,setClass:Yr,getClass:_n,setOpacity:tn,testProp:co,setTransform:wo,setPosition:Pi,getPosition:cs,get disableTextSelection(){return Xo},get enableTextSelection(){return Io},disableImageDrag:Ro,enableImageDrag:Xi,preventOutline:ya,restoreOutline:Qi,getSizedParentNode:ol,getScale:_a};function br(a,p,S,V){if(p&&typeof p=="object")for(var oe in p)al(a,oe,p[oe],S);else{p=M(p);for(var Se=0,st=p.length;Se<st;Se++)al(a,p[Se],S,V)}return this}var Jr="_leaflet_events";function Tr(a,p,S,V){if(arguments.length===1)Fo(a),delete a[Jr];else if(p&&typeof p=="object")for(var oe in p)Hs(a,oe,p[oe],S);else if(p=M(p),arguments.length===2)Fo(a,function(Pt){return Q(p,Pt)!==-1});else for(var Se=0,st=p.length;Se<st;Se++)Hs(a,p[Se],S,V);return this}function Fo(a,p){for(var S in a[Jr]){var V=S.split(/\d/)[0];(!p||p(V))&&Hs(a,V,null,null,S)}}var sl={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function al(a,p,S,V){var oe=p+f(S)+(V?"_"+f(V):"");if(a[Jr]&&a[Jr][oe])return this;var Se=function(Pt){return S.call(V||a,Pt||window.event)},st=Se;!at.touchNative&&at.pointer&&p.indexOf("touch")===0?Se=Or(a,p,Se):at.touch&&p==="dblclick"?Se=ji(a,Se):"addEventListener"in a?p==="touchstart"||p==="touchmove"||p==="wheel"||p==="mousewheel"?a.addEventListener(sl[p]||p,Se,at.passiveEvents?{passive:!1}:!1):p==="mouseenter"||p==="mouseleave"?(Se=function(Pt){Pt=Pt||window.event,ll(a,Pt)&&st(Pt)},a.addEventListener(sl[p],Se,!1)):a.addEventListener(p,st,!1):a.attachEvent("on"+p,Se),a[Jr]=a[Jr]||{},a[Jr][oe]=Se}function Hs(a,p,S,V,oe){oe=oe||p+f(S)+(V?"_"+f(V):"");var Se=a[Jr]&&a[Jr][oe];if(!Se)return this;!at.touchNative&&at.pointer&&p.indexOf("touch")===0?jr(a,p,Se):at.touch&&p==="dblclick"?Ls(a,Se):"removeEventListener"in a?a.removeEventListener(sl[p]||p,Se,!1):a.detachEvent("on"+p,Se),a[Jr][oe]=null}function Va(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function bu(a){return al(a,"wheel",Va),this}function kl(a){return br(a,"mousedown touchstart dblclick contextmenu",Va),a._leaflet_disable_click=!0,this}function Sr(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function Gr(a){return Sr(a),Va(a),this}function Ha(a){if(a.composedPath)return a.composedPath();for(var p=[],S=a.target;S;)p.push(S),S=S.parentNode;return p}function Zu(a,p){if(!p)return new re(a.clientX,a.clientY);var S=_a(p),V=S.boundingClientRect;return new re((a.clientX-V.left)/S.x-p.clientLeft,(a.clientY-V.top)/S.y-p.clientTop)}var Tl=at.linux&&at.chrome?window.devicePixelRatio:at.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Xl(a){return at.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/Tl:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function ll(a,p){var S=p.relatedTarget;if(!S)return!0;try{for(;S&&S!==a;)S=S.parentNode}catch{return!1}return S!==a}var Dl={__proto__:null,on:br,off:Tr,stopPropagation:Va,disableScrollPropagation:bu,disableClickPropagation:kl,preventDefault:Sr,stop:Gr,getPropagationPath:Ha,getMousePosition:Zu,getWheelDelta:Xl,isExternalTarget:ll,addListener:br,removeListener:Tr},Ql=ie.extend({run:function(a,p,S,V){this.stop(),this._el=a,this._inProgress=!0,this._duration=S||.25,this._easeOutPower=1/Math.max(V||.5,.2),this._startPos=cs(a),this._offset=p.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=z(this._animate,this),this._step()},_step:function(a){var p=+new Date-this._startTime,S=this._duration*1e3;p<S?this._runFrame(this._easeOut(p/S),a):(this._runFrame(1),this._complete())},_runFrame:function(a,p){var S=this._startPos.add(this._offset.multiplyBy(a));p&&S._round(),Pi(this._el,S),this.fire("step")},_complete:function(){I(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),Xr=ie.extend({options:{crs:K,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,p){p=D(this,p),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),p.maxBounds&&this.setMaxBounds(p.maxBounds),p.zoom!==void 0&&(this._zoom=this._limitZoom(p.zoom)),p.center&&p.zoom!==void 0&&this.setView(he(p.center),p.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=oi&&at.any3d&&!at.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),br(this._proxy,Fn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,p,S){if(p=p===void 0?this._zoom:this._limitZoom(p),a=this._limitCenter(he(a),p,this.options.maxBounds),S=S||{},this._stop(),this._loaded&&!S.reset&&S!==!0){S.animate!==void 0&&(S.zoom=i({animate:S.animate},S.zoom),S.pan=i({animate:S.animate,duration:S.duration},S.pan));var V=this._zoom!==p?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,p,S.zoom):this._tryAnimatedPan(a,S.pan);if(V)return clearTimeout(this._sizeTimer),this}return this._resetView(a,p,S.pan&&S.pan.noMoveStart),this},setZoom:function(a,p){return this._loaded?this.setView(this.getCenter(),a,{zoom:p}):(this._zoom=a,this)},zoomIn:function(a,p){return a=a||(at.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,p)},zoomOut:function(a,p){return a=a||(at.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,p)},setZoomAround:function(a,p,S){var V=this.getZoomScale(p),oe=this.getSize().divideBy(2),Se=a instanceof re?a:this.latLngToContainerPoint(a),st=Se.subtract(oe).multiplyBy(1-1/V),Pt=this.containerPointToLatLng(oe.add(st));return this.setView(Pt,p,{zoom:S})},_getBoundsCenterZoom:function(a,p){p=p||{},a=a.getBounds?a.getBounds():fe(a);var S=Pe(p.paddingTopLeft||p.padding||[0,0]),V=Pe(p.paddingBottomRight||p.padding||[0,0]),oe=this.getBoundsZoom(a,!1,S.add(V));if(oe=typeof p.maxZoom=="number"?Math.min(p.maxZoom,oe):oe,oe===1/0)return{center:a.getCenter(),zoom:oe};var Se=V.subtract(S).divideBy(2),st=this.project(a.getSouthWest(),oe),Pt=this.project(a.getNorthEast(),oe),zt=this.unproject(st.add(Pt).divideBy(2).add(Se),oe);return{center:zt,zoom:oe}},fitBounds:function(a,p){if(a=fe(a),!a.isValid())throw new Error("Bounds are not valid.");var S=this._getBoundsCenterZoom(a,p);return this.setView(S.center,S.zoom,p)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,p){return this.setView(a,this._zoom,{pan:p})},panBy:function(a,p){if(a=Pe(a).round(),p=p||{},!a.x&&!a.y)return this.fire("moveend");if(p.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ql,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),p.noMoveStart||this.fire("movestart"),p.animate!==!1){Hn(this._mapPane,"leaflet-pan-anim");var S=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,S,p.duration||.25,p.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,p,S){if(S=S||{},S.animate===!1||!at.any3d)return this.setView(a,p,S);this._stop();var V=this.project(this.getCenter()),oe=this.project(a),Se=this.getSize(),st=this._zoom;a=he(a),p=p===void 0?st:p;var Pt=Math.max(Se.x,Se.y),zt=Pt*this.getZoomScale(st,p),sn=oe.distanceTo(V)||1,Nn=1.42,Jn=Nn*Nn;function zr(mi){var qo=mi?-1:1,De=mi?zt:Pt,gs=zt*zt-Pt*Pt+qo*Jn*Jn*sn*sn,Lu=2*De*Jn*sn,No=gs/Lu,Vr=Math.sqrt(No*No+1)-No,Wc=Vr<1e-9?-18:Math.log(Vr);return Wc}function go(mi){return(Math.exp(mi)-Math.exp(-mi))/2}function Ki(mi){return(Math.exp(mi)+Math.exp(-mi))/2}function Do(mi){return go(mi)/Ki(mi)}var Hi=zr(0);function ps(mi){return Pt*(Ki(Hi)/Ki(Hi+Nn*mi))}function wc(mi){return Pt*(Ki(Hi)*Do(Hi+Nn*mi)-go(Hi))/Jn}function ca(mi){return 1-Math.pow(1-mi,1.5)}var Ys=Date.now(),Rs=(zr(1)-Hi)/Nn,Af=S.duration?1e3*S.duration:1e3*Rs*.8;function nu(){var mi=(Date.now()-Ys)/Af,qo=ca(mi)*Rs;mi<=1?(this._flyToFrame=z(nu,this),this._move(this.unproject(V.add(oe.subtract(V).multiplyBy(wc(qo)/sn)),st),this.getScaleZoom(Pt/ps(qo),st),{flyTo:!0})):this._move(a,p)._moveEnd(!0)}return this._moveStart(!0,S.noMoveStart),nu.call(this),this},flyToBounds:function(a,p){var S=this._getBoundsCenterZoom(a,p);return this.flyTo(S.center,S.zoom,p)},setMaxBounds:function(a){return a=fe(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var p=this.options.minZoom;return this.options.minZoom=a,this._loaded&&p!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var p=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&p!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,p){this._enforcingBounds=!0;var S=this.getCenter(),V=this._limitCenter(S,this._zoom,fe(a));return S.equals(V)||this.panTo(V,p),this._enforcingBounds=!1,this},panInside:function(a,p){p=p||{};var S=Pe(p.paddingTopLeft||p.padding||[0,0]),V=Pe(p.paddingBottomRight||p.padding||[0,0]),oe=this.project(this.getCenter()),Se=this.project(a),st=this.getPixelBounds(),Pt=A([st.min.add(S),st.max.subtract(V)]),zt=Pt.getSize();if(!Pt.contains(Se)){this._enforcingBounds=!0;var sn=Se.subtract(Pt.getCenter()),Nn=Pt.extend(Se).getSize().subtract(zt);oe.x+=sn.x<0?-Nn.x:Nn.x,oe.y+=sn.y<0?-Nn.y:Nn.y,this.panTo(this.unproject(oe),p),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=i({animate:!1,pan:!0},a===!0?{animate:!0}:a);var p=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var S=this.getSize(),V=p.divideBy(2).round(),oe=S.divideBy(2).round(),Se=V.subtract(oe);return!Se.x&&!Se.y?this:(a.animate&&a.pan?this.panBy(Se):(a.pan&&this._rawPanBy(Se),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:p,newSize:S}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=i({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var p=o(this._handleGeolocationResponse,this),S=o(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(p,S,a):navigator.geolocation.getCurrentPosition(p,S,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var p=a.code,S=a.message||(p===1?"permission denied":p===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:p,message:"Geolocation error: "+S+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var p=a.coords.latitude,S=a.coords.longitude,V=new ne(p,S),oe=V.toBounds(a.coords.accuracy*2),Se=this._locateOptions;if(Se.setView){var st=this.getBoundsZoom(oe);this.setView(V,Se.maxZoom?Math.min(st,Se.maxZoom):st)}var Pt={latlng:V,bounds:oe,timestamp:a.timestamp};for(var zt in a.coords)typeof a.coords[zt]=="number"&&(Pt[zt]=a.coords[zt]);this.fire("locationfound",Pt)}},addHandler:function(a,p){if(!p)return this;var S=this[a]=new p(this);return this._handlers.push(S),this.options[a]&&S.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),qn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(I(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)qn(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,p){var S="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),V=fr("div",S,p||this._mapPane);return a&&(this._panes[a]=V),V},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),p=this.unproject(a.getBottomLeft()),S=this.unproject(a.getTopRight());return new J(p,S)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,p,S){a=fe(a),S=Pe(S||[0,0]);var V=this.getZoom()||0,oe=this.getMinZoom(),Se=this.getMaxZoom(),st=a.getNorthWest(),Pt=a.getSouthEast(),zt=this.getSize().subtract(S),sn=A(this.project(Pt,V),this.project(st,V)).getSize(),Nn=at.any3d?this.options.zoomSnap:1,Jn=zt.x/sn.x,zr=zt.y/sn.y,go=p?Math.max(Jn,zr):Math.min(Jn,zr);return V=this.getScaleZoom(go,V),Nn&&(V=Math.round(V/(Nn/100))*(Nn/100),V=p?Math.ceil(V/Nn)*Nn:Math.floor(V/Nn)*Nn),Math.max(oe,Math.min(Se,V))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new re(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,p){var S=this._getTopLeftPoint(a,p);return new Ie(S,S.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,p){var S=this.options.crs;return p=p===void 0?this._zoom:p,S.scale(a)/S.scale(p)},getScaleZoom:function(a,p){var S=this.options.crs;p=p===void 0?this._zoom:p;var V=S.zoom(a*S.scale(p));return isNaN(V)?1/0:V},project:function(a,p){return p=p===void 0?this._zoom:p,this.options.crs.latLngToPoint(he(a),p)},unproject:function(a,p){return p=p===void 0?this._zoom:p,this.options.crs.pointToLatLng(Pe(a),p)},layerPointToLatLng:function(a){var p=Pe(a).add(this.getPixelOrigin());return this.unproject(p)},latLngToLayerPoint:function(a){var p=this.project(he(a))._round();return p._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(he(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(fe(a))},distance:function(a,p){return this.options.crs.distance(he(a),he(p))},containerPointToLayerPoint:function(a){return Pe(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return Pe(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var p=this.containerPointToLayerPoint(Pe(a));return this.layerPointToLatLng(p)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(he(a)))},mouseEventToContainerPoint:function(a){return Zu(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var p=this._container=Eo(a);if(p){if(p._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");br(p,"scroll",this._onScroll,this),this._containerId=f(p)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&at.any3d,Hn(a,"leaflet-container"+(at.touch?" leaflet-touch":"")+(at.retina?" leaflet-retina":"")+(at.ielt9?" leaflet-oldie":"")+(at.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var p=ui(a,"position");p!=="absolute"&&p!=="relative"&&p!=="fixed"&&p!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Pi(this._mapPane,new re(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Hn(a.markerPane,"leaflet-zoom-hide"),Hn(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,p,S){Pi(this._mapPane,new re(0,0));var V=!this._loaded;this._loaded=!0,p=this._limitZoom(p),this.fire("viewprereset");var oe=this._zoom!==p;this._moveStart(oe,S)._move(a,p)._moveEnd(oe),this.fire("viewreset"),V&&this.fire("load")},_moveStart:function(a,p){return a&&this.fire("zoomstart"),p||this.fire("movestart"),this},_move:function(a,p,S,V){p===void 0&&(p=this._zoom);var oe=this._zoom!==p;return this._zoom=p,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),V?S&&S.pinch&&this.fire("zoom",S):((oe||S&&S.pinch)&&this.fire("zoom",S),this.fire("move",S)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return I(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){Pi(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[f(this._container)]=this;var p=a?Tr:br;p(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&p(window,"resize",this._onResize,this),at.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){I(this._resizeRequest),this._resizeRequest=z(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,p){for(var S=[],V,oe=p==="mouseout"||p==="mouseover",Se=a.target||a.srcElement,st=!1;Se;){if(V=this._targets[f(Se)],V&&(p==="click"||p==="preclick")&&this._draggableMoved(V)){st=!0;break}if(V&&V.listens(p,!0)&&(oe&&!ll(Se,a)||(S.push(V),oe))||Se===this._container)break;Se=Se.parentNode}return!S.length&&!st&&!oe&&this.listens(p,!0)&&(S=[this]),S},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var p=a.target||a.srcElement;if(!(!this._loaded||p._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(p))){var S=a.type;S==="mousedown"&&ya(p),this._fireDOMEvent(a,S)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,p,S){if(a.type==="click"){var V=i({},a);V.type="preclick",this._fireDOMEvent(V,V.type,S)}var oe=this._findEventTargets(a,p);if(S){for(var Se=[],st=0;st<S.length;st++)S[st].listens(p,!0)&&Se.push(S[st]);oe=Se.concat(oe)}if(oe.length){p==="contextmenu"&&Sr(a);var Pt=oe[0],zt={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var sn=Pt.getLatLng&&(!Pt._radius||Pt._radius<=10);zt.containerPoint=sn?this.latLngToContainerPoint(Pt.getLatLng()):this.mouseEventToContainerPoint(a),zt.layerPoint=this.containerPointToLayerPoint(zt.containerPoint),zt.latlng=sn?Pt.getLatLng():this.layerPointToLatLng(zt.layerPoint)}for(st=0;st<oe.length;st++)if(oe[st].fire(p,zt,!0),zt.originalEvent._stopped||oe[st].options.bubblingMouseEvents===!1&&Q(this._mouseEvents,p)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,p=this._handlers.length;a<p;a++)this._handlers[a].disable()},whenReady:function(a,p){return this._loaded?a.call(p||this,{target:this}):this.on("load",a,p),this},_getMapPanePos:function(){return cs(this._mapPane)||new re(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,p){var S=a&&p!==void 0?this._getNewPixelOrigin(a,p):this.getPixelOrigin();return S.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,p){var S=this.getSize()._divideBy(2);return this.project(a,p)._subtract(S)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,p,S){var V=this._getNewPixelOrigin(S,p);return this.project(a,p)._subtract(V)},_latLngBoundsToNewLayerBounds:function(a,p,S){var V=this._getNewPixelOrigin(S,p);return A([this.project(a.getSouthWest(),p)._subtract(V),this.project(a.getNorthWest(),p)._subtract(V),this.project(a.getSouthEast(),p)._subtract(V),this.project(a.getNorthEast(),p)._subtract(V)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,p,S){if(!S)return a;var V=this.project(a,p),oe=this.getSize().divideBy(2),Se=new Ie(V.subtract(oe),V.add(oe)),st=this._getBoundsOffset(Se,S,p);return Math.abs(st.x)<=1&&Math.abs(st.y)<=1?a:this.unproject(V.add(st),p)},_limitOffset:function(a,p){if(!p)return a;var S=this.getPixelBounds(),V=new Ie(S.min.add(a),S.max.add(a));return a.add(this._getBoundsOffset(V,p))},_getBoundsOffset:function(a,p,S){var V=A(this.project(p.getNorthEast(),S),this.project(p.getSouthWest(),S)),oe=V.min.subtract(a.min),Se=V.max.subtract(a.max),st=this._rebound(oe.x,-Se.x),Pt=this._rebound(oe.y,-Se.y);return new re(st,Pt)},_rebound:function(a,p){return a+p>0?Math.round(a-p)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(p))},_limitZoom:function(a){var p=this.getMinZoom(),S=this.getMaxZoom(),V=at.any3d?this.options.zoomSnap:1;return V&&(a=Math.round(a/V)*V),Math.max(p,Math.min(S,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){_r(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,p){var S=this._getCenterOffset(a)._trunc();return(p&&p.animate)!==!0&&!this.getSize().contains(S)?!1:(this.panBy(S,p),!0)},_createAnimProxy:function(){var a=this._proxy=fr("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(p){var S=Ss,V=this._proxy.style[S];wo(this._proxy,this.project(p.center,p.zoom),this.getZoomScale(p.zoom,1)),V===this._proxy.style[S]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){qn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),p=this.getZoom();wo(this._proxy,this.project(a,p),this.getZoomScale(p,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,p,S){if(this._animatingZoom)return!0;if(S=S||{},!this._zoomAnimated||S.animate===!1||this._nothingToAnimate()||Math.abs(p-this._zoom)>this.options.zoomAnimationThreshold)return!1;var V=this.getZoomScale(p),oe=this._getCenterOffset(a)._divideBy(1-1/V);return S.animate!==!0&&!this.getSize().contains(oe)?!1:(z(function(){this._moveStart(!0,S.noMoveStart||!1)._animateZoom(a,p,!0)},this),!0)},_animateZoom:function(a,p,S,V){this._mapPane&&(S&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=p,Hn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:p,noUpdate:V}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&_r(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function eo(a,p){return new Xr(a,p)}var or=U.extend({options:{position:"topright"},initialize:function(a){D(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var p=this._map;return p&&p.removeControl(this),this.options.position=a,p&&p.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var p=this._container=this.onAdd(a),S=this.getPosition(),V=a._controlCorners[S];return Hn(p,"leaflet-control"),S.indexOf("bottom")!==-1?V.insertBefore(p,V.firstChild):V.appendChild(p),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(qn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),to=function(a){return new or(a)};Xr.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},p="leaflet-",S=this._controlContainer=fr("div",p+"control-container",this._container);function V(oe,Se){var st=p+oe+" "+p+Se;a[oe+Se]=fr("div",st,S)}V("top","left"),V("top","right"),V("bottom","left"),V("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)qn(this._controlCorners[a]);qn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ul=or.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,p,S,V){return S<V?-1:V<S?1:0}},initialize:function(a,p,S){D(this,S),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var V in a)this._addLayer(a[V],V);for(V in p)this._addLayer(p[V],V,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var p=0;p<this._layers.length;p++)this._layers[p].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return or.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,p){return this._addLayer(a,p),this._map?this._update():this},addOverlay:function(a,p){return this._addLayer(a,p,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var p=this._getLayer(f(a));return p&&this._layers.splice(this._layers.indexOf(p),1),this._map?this._update():this},expand:function(){Hn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(Hn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):_r(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return _r(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",p=this._container=fr("div",a),S=this.options.collapsed;p.setAttribute("aria-haspopup",!0),kl(p),bu(p);var V=this._section=fr("section",a+"-list");S&&(this._map.on("click",this.collapse,this),br(p,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var oe=this._layersLink=fr("a",a+"-toggle",p);oe.href="#",oe.title="Layers",oe.setAttribute("role","button"),br(oe,{keydown:function(Se){Se.keyCode===13&&this._expandSafely()},click:function(Se){Sr(Se),this._expandSafely()}},this),S||this.expand(),this._baseLayersList=fr("div",a+"-base",V),this._separator=fr("div",a+"-separator",V),this._overlaysList=fr("div",a+"-overlays",V),p.appendChild(V)},_getLayer:function(a){for(var p=0;p<this._layers.length;p++)if(this._layers[p]&&f(this._layers[p].layer)===a)return this._layers[p]},_addLayer:function(a,p,S){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:p,overlay:S}),this.options.sortLayers&&this._layers.sort(o(function(V,oe){return this.options.sortFunction(V.layer,oe.layer,V.name,oe.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;_o(this._baseLayersList),_o(this._overlaysList),this._layerControlInputs=[];var a,p,S,V,oe=0;for(S=0;S<this._layers.length;S++)V=this._layers[S],this._addItem(V),p=p||V.overlay,a=a||!V.overlay,oe+=V.overlay?0:1;return this.options.hideSingleBase&&(a=a&&oe>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=p&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var p=this._getLayer(f(a.target)),S=p.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;S&&this._map.fire(S,p)},_createRadioElement:function(a,p){var S='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(p?' checked="checked"':"")+"/>",V=document.createElement("div");return V.innerHTML=S,V.firstChild},_addItem:function(a){var p=document.createElement("label"),S=this._map.hasLayer(a.layer),V;a.overlay?(V=document.createElement("input"),V.type="checkbox",V.className="leaflet-control-layers-selector",V.defaultChecked=S):V=this._createRadioElement("leaflet-base-layers_"+f(this),S),this._layerControlInputs.push(V),V.layerId=f(a.layer),br(V,"click",this._onInputClick,this);var oe=document.createElement("span");oe.innerHTML=" "+a.name;var Se=document.createElement("span");p.appendChild(Se),Se.appendChild(V),Se.appendChild(oe);var st=a.overlay?this._overlaysList:this._baseLayersList;return st.appendChild(p),this._checkDisabledLayers(),p},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,p,S,V=[],oe=[];this._handlingClick=!0;for(var Se=a.length-1;Se>=0;Se--)p=a[Se],S=this._getLayer(p.layerId).layer,p.checked?V.push(S):p.checked||oe.push(S);for(Se=0;Se<oe.length;Se++)this._map.hasLayer(oe[Se])&&this._map.removeLayer(oe[Se]);for(Se=0;Se<V.length;Se++)this._map.hasLayer(V[Se])||this._map.addLayer(V[Se]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,p,S,V=this._map.getZoom(),oe=a.length-1;oe>=0;oe--)p=a[oe],S=this._getLayer(p.layerId).layer,p.disabled=S.options.minZoom!==void 0&&V<S.options.minZoom||S.options.maxZoom!==void 0&&V>S.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,br(a,"click",Sr),this.expand();var p=this;setTimeout(function(){Tr(a,"click",Sr),p._preventClick=!1})}}),ba=function(a,p,S){return new ul(a,p,S)},$i=or.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var p="leaflet-control-zoom",S=fr("div",p+" leaflet-bar"),V=this.options;return this._zoomInButton=this._createButton(V.zoomInText,V.zoomInTitle,p+"-in",S,this._zoomIn),this._zoomOutButton=this._createButton(V.zoomOutText,V.zoomOutTitle,p+"-out",S,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),S},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,p,S,V,oe){var Se=fr("a",S,V);return Se.innerHTML=a,Se.href="#",Se.title=p,Se.setAttribute("role","button"),Se.setAttribute("aria-label",p),kl(Se),br(Se,"click",Gr),br(Se,"click",oe,this),br(Se,"click",this._refocusOnMap,this),Se},_updateDisabled:function(){var a=this._map,p="leaflet-disabled";_r(this._zoomInButton,p),_r(this._zoomOutButton,p),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(Hn(this._zoomOutButton,p),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(Hn(this._zoomInButton,p),this._zoomInButton.setAttribute("aria-disabled","true"))}});Xr.mergeOptions({zoomControl:!0}),Xr.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new $i,this.addControl(this.zoomControl))});var eu=function(a){return new $i(a)},ta=or.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var p="leaflet-control-scale",S=fr("div",p),V=this.options;return this._addScales(V,p+"-line",S),a.on(V.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),S},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,p,S){a.metric&&(this._mScale=fr("div",p,S)),a.imperial&&(this._iScale=fr("div",p,S))},_update:function(){var a=this._map,p=a.getSize().y/2,S=a.distance(a.containerPointToLatLng([0,p]),a.containerPointToLatLng([this.options.maxWidth,p]));this._updateScales(S)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var p=this._getRoundNum(a),S=p<1e3?p+" m":p/1e3+" km";this._updateScale(this._mScale,S,p/a)},_updateImperial:function(a){var p=a*3.2808399,S,V,oe;p>5280?(S=p/5280,V=this._getRoundNum(S),this._updateScale(this._iScale,V+" mi",V/S)):(oe=this._getRoundNum(p),this._updateScale(this._iScale,oe+" ft",oe/p))},_updateScale:function(a,p,S){a.style.width=Math.round(this.options.maxWidth*S)+"px",a.innerHTML=p},_getRoundNum:function(a){var p=Math.pow(10,(Math.floor(a)+"").length-1),S=a/p;return S=S>=10?10:S>=5?5:S>=3?3:S>=2?2:1,p*S}}),Nl=function(a){return new ta(a)},Bl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Os=or.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(at.inlineSvg?Bl+" ":"")+"Leaflet</a>"},initialize:function(a){D(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=fr("div","leaflet-control-attribution"),kl(this._container);for(var p in a._layers)a._layers[p].getAttribution&&this.addAttribution(a._layers[p].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var p in this._attributions)this._attributions[p]&&a.push(p);var S=[];this.options.prefix&&S.push(this.options.prefix),a.length&&S.push(a.join(", ")),this._container.innerHTML=S.join(' <span aria-hidden="true">|</span> ')}}});Xr.mergeOptions({attributionControl:!0}),Xr.addInitHook(function(){this.options.attributionControl&&new Os().addTo(this)});var Ol=function(a){return new Os(a)};or.Layers=ul,or.Zoom=$i,or.Scale=ta,or.Attribution=Os,to.layers=ba,to.zoom=eu,to.scale=Nl,to.attribution=Ol;var bi=U.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});bi.addTo=function(a,p){return a.addHandler(p,this),this};var Ku={Events:q},Po=at.touch?"touchstart mousedown":"mousedown",Gs=ie.extend({options:{clickTolerance:3},initialize:function(a,p,S,V){D(this,V),this._element=a,this._dragStartTarget=p||a,this._preventOutline=S},enable:function(){this._enabled||(br(this._dragStartTarget,Po,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Gs._dragging===this&&this.finishDrag(!0),Tr(this._dragStartTarget,Po,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!Us(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){Gs._dragging===this&&this.finishDrag();return}if(!(Gs._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(Gs._dragging=this,this._preventOutline&&ya(this._element),Ro(),Xo(),!this._moving)){this.fire("down");var p=a.touches?a.touches[0]:a,S=ol(this._element);this._startPoint=new re(p.clientX,p.clientY),this._startPos=cs(this._element),this._parentScale=_a(S);var V=a.type==="mousedown";br(document,V?"mousemove":"touchmove",this._onMove,this),br(document,V?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var p=a.touches&&a.touches.length===1?a.touches[0]:a,S=new re(p.clientX,p.clientY)._subtract(this._startPoint);!S.x&&!S.y||Math.abs(S.x)+Math.abs(S.y)<this.options.clickTolerance||(S.x/=this._parentScale.x,S.y/=this._parentScale.y,Sr(a),this._moved||(this.fire("dragstart"),this._moved=!0,Hn(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Hn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(S),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),Pi(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){_r(document.body,"leaflet-dragging"),this._lastTarget&&(_r(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Tr(document,"mousemove touchmove",this._onMove,this),Tr(document,"mouseup touchend touchcancel",this._onUp,this),Xi(),Io();var p=this._moved&&this._moving;this._moving=!1,Gs._dragging=!1,p&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function Il(a,p,S){var V,oe=[1,4,2,8],Se,st,Pt,zt,sn,Nn,Jn,zr;for(Se=0,Nn=a.length;Se<Nn;Se++)a[Se]._code=jt(a[Se],p);for(Pt=0;Pt<4;Pt++){for(Jn=oe[Pt],V=[],Se=0,Nn=a.length,st=Nn-1;Se<Nn;st=Se++)zt=a[Se],sn=a[st],zt._code&Jn?sn._code&Jn||(zr=xt(sn,zt,Jn,p,S),zr._code=jt(zr,p),V.push(zr)):(sn._code&Jn&&(zr=xt(sn,zt,Jn,p,S),zr._code=jt(zr,p),V.push(zr)),V.push(zt));a=V}return a}function qs(a,p){var S,V,oe,Se,st,Pt,zt,sn,Nn;if(!a||a.length===0)throw new Error("latlngs not passed");jn(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Jn=he([0,0]),zr=fe(a),go=zr.getNorthWest().distanceTo(zr.getSouthWest())*zr.getNorthEast().distanceTo(zr.getNorthWest());go<1700&&(Jn=cl(a));var Ki=a.length,Do=[];for(S=0;S<Ki;S++){var Hi=he(a[S]);Do.push(p.project(he([Hi.lat-Jn.lat,Hi.lng-Jn.lng])))}for(Pt=zt=sn=0,S=0,V=Ki-1;S<Ki;V=S++)oe=Do[S],Se=Do[V],st=oe.y*Se.x-Se.y*oe.x,zt+=(oe.x+Se.x)*st,sn+=(oe.y+Se.y)*st,Pt+=st*3;Pt===0?Nn=Do[0]:Nn=[zt/Pt,sn/Pt];var ps=p.unproject(Pe(Nn));return he([ps.lat+Jn.lat,ps.lng+Jn.lng])}function cl(a){for(var p=0,S=0,V=0,oe=0;oe<a.length;oe++){var Se=he(a[oe]);p+=Se.lat,S+=Se.lng,V++}return he([p/V,S/V])}var fl={__proto__:null,clipPolygon:Il,polygonCenter:qs,centroid:cl};function wi(a,p){if(!p||!a.length)return a.slice();var S=p*p;return a=ye(a,S),a=no(a,S),a}function Cs(a,p,S){return Math.sqrt(Dn(a,p,S,!0))}function wa(a,p,S){return Dn(a,p,S)}function no(a,p){var S=a.length,V=typeof Uint8Array<"u"?Uint8Array:Array,oe=new V(S);oe[0]=oe[S-1]=1,B(a,oe,p,0,S-1);var Se,st=[];for(Se=0;Se<S;Se++)oe[Se]&&st.push(a[Se]);return st}function B(a,p,S,V,oe){var Se=0,st,Pt,zt;for(Pt=V+1;Pt<=oe-1;Pt++)zt=Dn(a[Pt],a[V],a[oe],!0),zt>Se&&(st=Pt,Se=zt);Se>S&&(p[st]=1,B(a,p,S,V,st),B(a,p,S,st,oe))}function ye(a,p){for(var S=[a[0]],V=1,oe=0,Se=a.length;V<Se;V++)cn(a[V],a[oe])>p&&(S.push(a[V]),oe=V);return oe<Se-1&&S.push(a[Se-1]),S}var Ze;function ct(a,p,S,V,oe){var Se=V?Ze:jt(a,S),st=jt(p,S),Pt,zt,sn;for(Ze=st;;){if(!(Se|st))return[a,p];if(Se&st)return!1;Pt=Se||st,zt=xt(a,p,Pt,S,oe),sn=jt(zt,S),Pt===Se?(a=zt,Se=sn):(p=zt,st=sn)}}function xt(a,p,S,V,oe){var Se=p.x-a.x,st=p.y-a.y,Pt=V.min,zt=V.max,sn,Nn;return S&8?(sn=a.x+Se*(zt.y-a.y)/st,Nn=zt.y):S&4?(sn=a.x+Se*(Pt.y-a.y)/st,Nn=Pt.y):S&2?(sn=zt.x,Nn=a.y+st*(zt.x-a.x)/Se):S&1&&(sn=Pt.x,Nn=a.y+st*(Pt.x-a.x)/Se),new re(sn,Nn,oe)}function jt(a,p){var S=0;return a.x<p.min.x?S|=1:a.x>p.max.x&&(S|=2),a.y<p.min.y?S|=4:a.y>p.max.y&&(S|=8),S}function cn(a,p){var S=p.x-a.x,V=p.y-a.y;return S*S+V*V}function Dn(a,p,S,V){var oe=p.x,Se=p.y,st=S.x-oe,Pt=S.y-Se,zt=st*st+Pt*Pt,sn;return zt>0&&(sn=((a.x-oe)*st+(a.y-Se)*Pt)/zt,sn>1?(oe=S.x,Se=S.y):sn>0&&(oe+=st*sn,Se+=Pt*sn)),st=a.x-oe,Pt=a.y-Se,V?st*st+Pt*Pt:new re(oe,Se)}function jn(a){return!Y(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function nr(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),jn(a)}function vr(a,p){var S,V,oe,Se,st,Pt,zt,sn;if(!a||a.length===0)throw new Error("latlngs not passed");jn(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Nn=he([0,0]),Jn=fe(a),zr=Jn.getNorthWest().distanceTo(Jn.getSouthWest())*Jn.getNorthEast().distanceTo(Jn.getNorthWest());zr<1700&&(Nn=cl(a));var go=a.length,Ki=[];for(S=0;S<go;S++){var Do=he(a[S]);Ki.push(p.project(he([Do.lat-Nn.lat,Do.lng-Nn.lng])))}for(S=0,V=0;S<go-1;S++)V+=Ki[S].distanceTo(Ki[S+1])/2;if(V===0)sn=Ki[0];else for(S=0,Se=0;S<go-1;S++)if(st=Ki[S],Pt=Ki[S+1],oe=st.distanceTo(Pt),Se+=oe,Se>V){zt=(Se-V)/oe,sn=[Pt.x-zt*(Pt.x-st.x),Pt.y-zt*(Pt.y-st.y)];break}var Hi=p.unproject(Pe(sn));return he([Hi.lat+Nn.lat,Hi.lng+Nn.lng])}var $r={__proto__:null,simplify:wi,pointToSegmentDistance:Cs,closestPointOnSegment:wa,clipSegment:ct,_getEdgeIntersection:xt,_getBitCode:jt,_sqClosestPointOnSegment:Dn,isFlat:jn,_flat:nr,polylineCenter:vr},zi={project:function(a){return new re(a.lng,a.lat)},unproject:function(a){return new ne(a.y,a.x)},bounds:new Ie([-180,-90],[180,90])},di={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Ie([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var p=Math.PI/180,S=this.R,V=a.lat*p,oe=this.R_MINOR/S,Se=Math.sqrt(1-oe*oe),st=Se*Math.sin(V),Pt=Math.tan(Math.PI/4-V/2)/Math.pow((1-st)/(1+st),Se/2);return V=-S*Math.log(Math.max(Pt,1e-10)),new re(a.lng*p*S,V)},unproject:function(a){for(var p=180/Math.PI,S=this.R,V=this.R_MINOR/S,oe=Math.sqrt(1-V*V),Se=Math.exp(-a.y/S),st=Math.PI/2-2*Math.atan(Se),Pt=0,zt=.1,sn;Pt<15&&Math.abs(zt)>1e-7;Pt++)sn=oe*Math.sin(st),sn=Math.pow((1-sn)/(1+sn),oe/2),zt=Math.PI/2-2*Math.atan(Se*sn)-st,st+=zt;return new ne(st*p,a.x*p/S)}},xi={__proto__:null,LonLat:zi,Mercator:di,SphericalMercator:ke},ro=i({},T,{code:"EPSG:3395",projection:di,transformation:function(){var a=.5/(Math.PI*di.R);return Ve(a,.5,-a,.5)}()}),fo=i({},T,{code:"EPSG:4326",projection:zi,transformation:Ve(1/180,1,-1/180,.5)}),Es=i({},ae,{projection:zi,transformation:Ve(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,p){var S=p.lng-a.lng,V=p.lat-a.lat;return Math.sqrt(S*S+V*V)},infinite:!0});ae.Earth=T,ae.EPSG3395=ro,ae.EPSG3857=K,ae.EPSG900913=pe,ae.EPSG4326=fo,ae.Simple=Es;var Ur=ie.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[f(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[f(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var p=a.target;if(p.hasLayer(this)){if(this._map=p,this._zoomAnimated=p._zoomAnimated,this.getEvents){var S=this.getEvents();p.on(S,this),this.once("remove",function(){p.off(S,this)},this)}this.onAdd(p),this.fire("add"),p.fire("layeradd",{layer:this})}}});Xr.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var p=f(a);return this._layers[p]?this:(this._layers[p]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var p=f(a);return this._layers[p]?(this._loaded&&a.onRemove(this),delete this._layers[p],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return f(a)in this._layers},eachLayer:function(a,p){for(var S in this._layers)a.call(p,this._layers[S]);return this},_addLayers:function(a){a=a?Y(a)?a:[a]:[];for(var p=0,S=a.length;p<S;p++)this.addLayer(a[p])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[f(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var p=f(a);this._zoomBoundLayers[p]&&(delete this._zoomBoundLayers[p],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,p=-1/0,S=this._getZoomSpan();for(var V in this._zoomBoundLayers){var oe=this._zoomBoundLayers[V].options;a=oe.minZoom===void 0?a:Math.min(a,oe.minZoom),p=oe.maxZoom===void 0?p:Math.max(p,oe.maxZoom)}this._layersMaxZoom=p===-1/0?void 0:p,this._layersMinZoom=a===1/0?void 0:a,S!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var jo=Ur.extend({initialize:function(a,p){D(this,p),this._layers={};var S,V;if(a)for(S=0,V=a.length;S<V;S++)this.addLayer(a[S])},addLayer:function(a){var p=this.getLayerId(a);return this._layers[p]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var p=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[p]&&this._map.removeLayer(this._layers[p]),delete this._layers[p],this},hasLayer:function(a){var p=typeof a=="number"?a:this.getLayerId(a);return p in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var p=Array.prototype.slice.call(arguments,1),S,V;for(S in this._layers)V=this._layers[S],V[a]&&V[a].apply(V,p);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,p){for(var S in this._layers)a.call(p,this._layers[S]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return f(a)}}),hl=function(a,p){return new jo(a,p)},Qo=jo.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),jo.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),jo.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new J;for(var p in this._layers){var S=this._layers[p];a.extend(S.getBounds?S.getBounds():S.getLatLng())}return a}}),tu=function(a,p){return new Qo(a,p)},na=U.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){D(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,p){var S=this._getIconUrl(a);if(!S){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var V=this._createImg(S,p&&p.tagName==="IMG"?p:null);return this._setIconStyles(V,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(V.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),V},_setIconStyles:function(a,p){var S=this.options,V=S[p+"Size"];typeof V=="number"&&(V=[V,V]);var oe=Pe(V),Se=Pe(p==="shadow"&&S.shadowAnchor||S.iconAnchor||oe&&oe.divideBy(2,!0));a.className="leaflet-marker-"+p+" "+(S.className||""),Se&&(a.style.marginLeft=-Se.x+"px",a.style.marginTop=-Se.y+"px"),oe&&(a.style.width=oe.x+"px",a.style.height=oe.y+"px")},_createImg:function(a,p){return p=p||document.createElement("img"),p.src=a,p},_getIconUrl:function(a){return at.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function wu(a){return new na(a)}var Ga=na.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof Ga.imagePath!="string"&&(Ga.imagePath=this._detectIconPath()),(this.options.imagePath||Ga.imagePath)+na.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var p=function(S,V,oe){var Se=V.exec(S);return Se&&Se[oe]};return a=p(a,/^url\((['"])?(.+)\1\)$/,2),a&&p(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=fr("div","leaflet-default-icon-path",document.body),p=ui(a,"background-image")||ui(a,"backgroundImage");if(document.body.removeChild(a),p=this._stripUrl(p),p)return p;var S=document.querySelector('link[href$="leaflet.css"]');return S?S.href.substring(0,S.href.length-11-1):""}}),qa=bi.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new Gs(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Hn(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&_r(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var p=this._marker,S=p._map,V=this._marker.options.autoPanSpeed,oe=this._marker.options.autoPanPadding,Se=cs(p._icon),st=S.getPixelBounds(),Pt=S.getPixelOrigin(),zt=A(st.min._subtract(Pt).add(oe),st.max._subtract(Pt).subtract(oe));if(!zt.contains(Se)){var sn=Pe((Math.max(zt.max.x,Se.x)-zt.max.x)/(st.max.x-zt.max.x)-(Math.min(zt.min.x,Se.x)-zt.min.x)/(st.min.x-zt.min.x),(Math.max(zt.max.y,Se.y)-zt.max.y)/(st.max.y-zt.max.y)-(Math.min(zt.min.y,Se.y)-zt.min.y)/(st.min.y-zt.min.y)).multiplyBy(V);S.panBy(sn,{animate:!1}),this._draggable._newPos._add(sn),this._draggable._startPos._add(sn),Pi(p._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=z(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(I(this._panRequest),this._panRequest=z(this._adjustPan.bind(this,a)))},_onDrag:function(a){var p=this._marker,S=p._shadow,V=cs(p._icon),oe=p._map.layerPointToLatLng(V);S&&Pi(S,V),p._latlng=oe,a.latlng=oe,a.oldLatLng=this._oldLatLng,p.fire("move",a).fire("drag",a)},_onDragEnd:function(a){I(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),ho=Ur.extend({options:{icon:new Ga,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,p){D(this,p),this._latlng=he(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var p=this._latlng;return this._latlng=he(a),this.update(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,p="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),S=a.icon.createIcon(this._icon),V=!1;S!==this._icon&&(this._icon&&this._removeIcon(),V=!0,a.title&&(S.title=a.title),S.tagName==="IMG"&&(S.alt=a.alt||"")),Hn(S,p),a.keyboard&&(S.tabIndex="0",S.setAttribute("role","button")),this._icon=S,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&br(S,"focus",this._panOnFocus,this);var oe=a.icon.createShadow(this._shadow),Se=!1;oe!==this._shadow&&(this._removeShadow(),Se=!0),oe&&(Hn(oe,p),oe.alt=""),this._shadow=oe,a.opacity<1&&this._updateOpacity(),V&&this.getPane().appendChild(this._icon),this._initInteraction(),oe&&Se&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Tr(this._icon,"focus",this._panOnFocus,this),qn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&qn(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&Pi(this._icon,a),this._shadow&&Pi(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var p=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(p)},_initInteraction:function(){if(this.options.interactive&&(Hn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),qa)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new qa(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&tn(this._icon,a),this._shadow&&tn(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var p=this.options.icon.options,S=p.iconSize?Pe(p.iconSize):Pe(0,0),V=p.iconAnchor?Pe(p.iconAnchor):Pe(0,0);a.panInside(this._latlng,{paddingTopLeft:V,paddingBottomRight:S.subtract(V)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ra(a,p){return new ho(a,p)}var Ps=Ur.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return D(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),fs=Ps.extend({options:{fill:!0,radius:10},initialize:function(a,p){D(this,p),this._latlng=he(a),this._radius=this.options.radius},setLatLng:function(a){var p=this._latlng;return this._latlng=he(a),this.redraw(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var p=a&&a.radius||this._radius;return Ps.prototype.setStyle.call(this,a),this.setRadius(p),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,p=this._radiusY||a,S=this._clickTolerance(),V=[a+S,p+S];this._pxBounds=new Ie(this._point.subtract(V),this._point.add(V))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function dl(a,p){return new fs(a,p)}var zo=fs.extend({initialize:function(a,p,S){if(typeof p=="number"&&(p=i({},S,{radius:p})),D(this,p),this._latlng=he(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new J(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:Ps.prototype.setStyle,_project:function(){var a=this._latlng.lng,p=this._latlng.lat,S=this._map,V=S.options.crs;if(V.distance===T.distance){var oe=Math.PI/180,Se=this._mRadius/T.R/oe,st=S.project([p+Se,a]),Pt=S.project([p-Se,a]),zt=st.add(Pt).divideBy(2),sn=S.unproject(zt).lat,Nn=Math.acos((Math.cos(Se*oe)-Math.sin(p*oe)*Math.sin(sn*oe))/(Math.cos(p*oe)*Math.cos(sn*oe)))/oe;(isNaN(Nn)||Nn===0)&&(Nn=Se/Math.cos(Math.PI/180*p)),this._point=zt.subtract(S.getPixelOrigin()),this._radius=isNaN(Nn)?0:zt.x-S.project([sn,a-Nn]).x,this._radiusY=zt.y-st.y}else{var Jn=V.unproject(V.project(this._latlng).subtract([this._mRadius,0]));this._point=S.latLngToLayerPoint(this._latlng),this._radius=this._point.x-S.latLngToLayerPoint(Jn).x}this._updateBounds()}});function es(a,p,S){return new zo(a,p,S)}var ts=Ps.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,p){D(this,p),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var p=1/0,S=null,V=Dn,oe,Se,st=0,Pt=this._parts.length;st<Pt;st++)for(var zt=this._parts[st],sn=1,Nn=zt.length;sn<Nn;sn++){oe=zt[sn-1],Se=zt[sn];var Jn=V(a,oe,Se,!0);Jn<p&&(p=Jn,S=V(a,oe,Se))}return S&&(S.distance=Math.sqrt(p)),S},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return vr(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,p){return p=p||this._defaultShape(),a=he(a),p.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new J,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return jn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var p=[],S=jn(a),V=0,oe=a.length;V<oe;V++)S?(p[V]=he(a[V]),this._bounds.extend(p[V])):p[V]=this._convertLatLngs(a[V]);return p},_project:function(){var a=new Ie;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),p=new re(a,a);this._rawPxBounds&&(this._pxBounds=new Ie([this._rawPxBounds.min.subtract(p),this._rawPxBounds.max.add(p)]))},_projectLatlngs:function(a,p,S){var V=a[0]instanceof ne,oe=a.length,Se,st;if(V){for(st=[],Se=0;Se<oe;Se++)st[Se]=this._map.latLngToLayerPoint(a[Se]),S.extend(st[Se]);p.push(st)}else for(Se=0;Se<oe;Se++)this._projectLatlngs(a[Se],p,S)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var p=this._parts,S,V,oe,Se,st,Pt,zt;for(S=0,oe=0,Se=this._rings.length;S<Se;S++)for(zt=this._rings[S],V=0,st=zt.length;V<st-1;V++)Pt=ct(zt[V],zt[V+1],a,V,!0),Pt&&(p[oe]=p[oe]||[],p[oe].push(Pt[0]),(Pt[1]!==zt[V+1]||V===st-2)&&(p[oe].push(Pt[1]),oe++))}},_simplifyPoints:function(){for(var a=this._parts,p=this.options.smoothFactor,S=0,V=a.length;S<V;S++)a[S]=wi(a[S],p)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,p){var S,V,oe,Se,st,Pt,zt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(S=0,Se=this._parts.length;S<Se;S++)for(Pt=this._parts[S],V=0,st=Pt.length,oe=st-1;V<st;oe=V++)if(!(!p&&V===0)&&Cs(a,Pt[oe],Pt[V])<=zt)return!0;return!1}});function Yu(a,p){return new ts(a,p)}ts._flat=nr;var Lo=ts.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return qs(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var p=ts.prototype._convertLatLngs.call(this,a),S=p.length;return S>=2&&p[0]instanceof ne&&p[0].equals(p[S-1])&&p.pop(),p},_setLatLngs:function(a){ts.prototype._setLatLngs.call(this,a),jn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return jn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,p=this.options.weight,S=new re(p,p);if(a=new Ie(a.min.subtract(S),a.max.add(S)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var V=0,oe=this._rings.length,Se;V<oe;V++)Se=Il(this._rings[V],a,!0),Se.length&&this._parts.push(Se)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var p=!1,S,V,oe,Se,st,Pt,zt,sn;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(Se=0,zt=this._parts.length;Se<zt;Se++)for(S=this._parts[Se],st=0,sn=S.length,Pt=sn-1;st<sn;Pt=st++)V=S[st],oe=S[Pt],V.y>a.y!=oe.y>a.y&&a.x<(oe.x-V.x)*(a.y-V.y)/(oe.y-V.y)+V.x&&(p=!p);return p||ts.prototype._containsPoint.call(this,a,!0)}});function xa(a,p){return new Lo(a,p)}var $o=Qo.extend({initialize:function(a,p){D(this,p),this._layers={},a&&this.addData(a)},addData:function(a){var p=Y(a)?a:a.features,S,V,oe;if(p){for(S=0,V=p.length;S<V;S++)oe=p[S],(oe.geometries||oe.geometry||oe.features||oe.coordinates)&&this.addData(oe);return this}var Se=this.options;if(Se.filter&&!Se.filter(a))return this;var st=Uo(a,Se);return st?(st.feature=Ho(a),st.defaultOptions=st.options,this.resetStyle(st),Se.onEachFeature&&Se.onEachFeature(a,st),this.addLayer(st)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=i({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(p){this._setLayerStyle(p,a)},this)},_setLayerStyle:function(a,p){a.setStyle&&(typeof p=="function"&&(p=p(a.feature)),a.setStyle(p))}});function Uo(a,p){var S=a.type==="Feature"?a.geometry:a,V=S?S.coordinates:null,oe=[],Se=p&&p.pointToLayer,st=p&&p.coordsToLatLng||Sa,Pt,zt,sn,Nn;if(!V&&!S)return null;switch(S.type){case"Point":return Pt=st(V),La(Se,a,Pt,p);case"MultiPoint":for(sn=0,Nn=V.length;sn<Nn;sn++)Pt=st(V[sn]),oe.push(La(Se,a,Pt,p));return new Qo(oe);case"LineString":case"MultiLineString":return zt=Vo(V,S.type==="LineString"?0:1,st),new ts(zt,p);case"Polygon":case"MultiPolygon":return zt=Vo(V,S.type==="Polygon"?1:2,st),new Lo(zt,p);case"GeometryCollection":for(sn=0,Nn=S.geometries.length;sn<Nn;sn++){var Jn=Uo({geometry:S.geometries[sn],type:"Feature",properties:a.properties},p);Jn&&oe.push(Jn)}return new Qo(oe);case"FeatureCollection":for(sn=0,Nn=S.features.length;sn<Nn;sn++){var zr=Uo(S.features[sn],p);zr&&oe.push(zr)}return new Qo(oe);default:throw new Error("Invalid GeoJSON object.")}}function La(a,p,S,V){return a?a(p,S):new ho(S,V&&V.markersInheritOptions&&V)}function Sa(a){return new ne(a[1],a[0],a[2])}function Vo(a,p,S){for(var V=[],oe=0,Se=a.length,st;oe<Se;oe++)st=p?Vo(a[oe],p-1,S):(S||Sa)(a[oe]),V.push(st);return V}function Mo(a,p){return a=he(a),a.alt!==void 0?[x(a.lng,p),x(a.lat,p),x(a.alt,p)]:[x(a.lng,p),x(a.lat,p)]}function ia(a,p,S,V){for(var oe=[],Se=0,st=a.length;Se<st;Se++)oe.push(p?ia(a[Se],jn(a[Se])?0:p-1,S,V):Mo(a[Se],V));return!p&&S&&oe.length>0&&oe.push(oe[0].slice()),oe}function Ms(a,p){return a.feature?i({},a.feature,{geometry:p}):Ho(p)}function Ho(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var _t={toGeoJSON:function(a){return Ms(this,{type:"Point",coordinates:Mo(this.getLatLng(),a)})}};ho.include(_t),zo.include(_t),fs.include(_t),ts.include({toGeoJSON:function(a){var p=!jn(this._latlngs),S=ia(this._latlngs,p?1:0,!1,a);return Ms(this,{type:(p?"Multi":"")+"LineString",coordinates:S})}}),Lo.include({toGeoJSON:function(a){var p=!jn(this._latlngs),S=p&&!jn(this._latlngs[0]),V=ia(this._latlngs,S?2:p?1:0,!0,a);return p||(V=[V]),Ms(this,{type:(S?"Multi":"")+"Polygon",coordinates:V})}}),jo.include({toMultiPoint:function(a){var p=[];return this.eachLayer(function(S){p.push(S.toGeoJSON(a).geometry.coordinates)}),Ms(this,{type:"MultiPoint",coordinates:p})},toGeoJSON:function(a){var p=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(p==="MultiPoint")return this.toMultiPoint(a);var S=p==="GeometryCollection",V=[];return this.eachLayer(function(oe){if(oe.toGeoJSON){var Se=oe.toGeoJSON(a);if(S)V.push(Se.geometry);else{var st=Ho(Se);st.type==="FeatureCollection"?V.push.apply(V,st.features):V.push(st)}}}),S?Ms(this,{geometries:V,type:"GeometryCollection"}):{type:"FeatureCollection",features:V}}});function qt(a,p){return new $o(a,p)}var Mt=qt,An=Ur.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,p,S){this._url=a,this._bounds=fe(p),D(this,S)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Hn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){qn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&bo(this._image),this},bringToBack:function(){return this._map&&Lr(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=fe(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",p=this._image=a?this._url:fr("img");if(Hn(p,"leaflet-image-layer"),this._zoomAnimated&&Hn(p,"leaflet-zoom-animated"),this.options.className&&Hn(p,this.options.className),p.onselectstart=y,p.onmousemove=y,p.onload=o(this.fire,this,"load"),p.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=p.src;return}p.src=this._url,p.alt=this.options.alt},_animateZoom:function(a){var p=this._map.getZoomScale(a.zoom),S=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;wo(this._image,S,p)},_reset:function(){var a=this._image,p=new Ie(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),S=p.getSize();Pi(a,p.min),a.style.width=S.x+"px",a.style.height=S.y+"px"},_updateOpacity:function(){tn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),Kn=function(a,p,S){return new An(a,p,S)},wr=An.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",p=this._image=a?this._url:fr("video");if(Hn(p,"leaflet-image-layer"),this._zoomAnimated&&Hn(p,"leaflet-zoom-animated"),this.options.className&&Hn(p,this.options.className),p.onselectstart=y,p.onmousemove=y,p.onloadeddata=o(this.fire,this,"load"),a){for(var S=p.getElementsByTagName("source"),V=[],oe=0;oe<S.length;oe++)V.push(S[oe].src);this._url=S.length>0?V:[p.src];return}Y(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(p.style,"objectFit")&&(p.style.objectFit="fill"),p.autoplay=!!this.options.autoplay,p.loop=!!this.options.loop,p.muted=!!this.options.muted,p.playsInline=!!this.options.playsInline;for(var Se=0;Se<this._url.length;Se++){var st=fr("source");st.src=this._url[Se],p.appendChild(st)}}});function Ui(a,p,S){return new wr(a,p,S)}var Li=An.extend({_initImage:function(){var a=this._image=this._url;Hn(a,"leaflet-image-layer"),this._zoomAnimated&&Hn(a,"leaflet-zoom-animated"),this.options.className&&Hn(a,this.options.className),a.onselectstart=y,a.onmousemove=y}});function Rl(a,p,S){return new Li(a,p,S)}var ns=Ur.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,p){a&&(a instanceof ne||Y(a))?(this._latlng=he(a),D(this,p)):(D(this,a),this._source=p),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&tn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&tn(this._container,1),this.bringToFront(),this.options.interactive&&(Hn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(tn(this._container,0),this._removeTimeout=setTimeout(o(qn,void 0,this._container),200)):qn(this._container),this.options.interactive&&(_r(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=he(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&bo(this._container),this},bringToBack:function(){return this._map&&Lr(this._container),this},_prepareOpen:function(a){var p=this._source;if(!p._map)return!1;if(p instanceof Qo){p=null;var S=this._source._layers;for(var V in S)if(S[V]._map){p=S[V];break}if(!p)return!1;this._source=p}if(!a)if(p.getCenter)a=p.getCenter();else if(p.getLatLng)a=p.getLatLng();else if(p.getBounds)a=p.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,p=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof p=="string")a.innerHTML=p;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(p)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),p=Pe(this.options.offset),S=this._getAnchor();this._zoomAnimated?Pi(this._container,a.add(S)):p=p.add(a).add(S);var V=this._containerBottom=-p.y,oe=this._containerLeft=-Math.round(this._containerWidth/2)+p.x;this._container.style.bottom=V+"px",this._container.style.left=oe+"px"}},_getAnchor:function(){return[0,0]}});Xr.include({_initOverlay:function(a,p,S,V){var oe=p;return oe instanceof a||(oe=new a(V).setContent(p)),S&&oe.setLatLng(S),oe}}),Ur.include({_initOverlay:function(a,p,S,V){var oe=S;return oe instanceof a?(D(oe,V),oe._source=this):(oe=p&&!V?p:new a(V,this),oe.setContent(S)),oe}});var Vi=ns.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,ns.prototype.openOn.call(this,a)},onAdd:function(a){ns.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ps||this._source.on("preclick",Va))},onRemove:function(a){ns.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ps||this._source.off("preclick",Va))},getEvents:function(){var a=ns.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",p=this._container=fr("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),S=this._wrapper=fr("div",a+"-content-wrapper",p);if(this._contentNode=fr("div",a+"-content",S),kl(p),bu(this._contentNode),br(p,"contextmenu",Va),this._tipContainer=fr("div",a+"-tip-container",p),this._tip=fr("div",a+"-tip",this._tipContainer),this.options.closeButton){var V=this._closeButton=fr("a",a+"-close-button",p);V.setAttribute("role","button"),V.setAttribute("aria-label","Close popup"),V.href="#close",V.innerHTML='<span aria-hidden="true">&#215;</span>',br(V,"click",function(oe){Sr(oe),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,p=a.style;p.width="",p.whiteSpace="nowrap";var S=a.offsetWidth;S=Math.min(S,this.options.maxWidth),S=Math.max(S,this.options.minWidth),p.width=S+1+"px",p.whiteSpace="",p.height="";var V=a.offsetHeight,oe=this.options.maxHeight,Se="leaflet-popup-scrolled";oe&&V>oe?(p.height=oe+"px",Hn(a,Se)):_r(a,Se),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var p=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),S=this._getAnchor();Pi(this._container,p.add(S))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,p=parseInt(ui(this._container,"marginBottom"),10)||0,S=this._container.offsetHeight+p,V=this._containerWidth,oe=new re(this._containerLeft,-S-this._containerBottom);oe._add(cs(this._container));var Se=a.layerPointToContainerPoint(oe),st=Pe(this.options.autoPanPadding),Pt=Pe(this.options.autoPanPaddingTopLeft||st),zt=Pe(this.options.autoPanPaddingBottomRight||st),sn=a.getSize(),Nn=0,Jn=0;Se.x+V+zt.x>sn.x&&(Nn=Se.x+V-sn.x+zt.x),Se.x-Nn-Pt.x<0&&(Nn=Se.x-Pt.x),Se.y+S+zt.y>sn.y&&(Jn=Se.y+S-sn.y+zt.y),Se.y-Jn-Pt.y<0&&(Jn=Se.y-Pt.y),(Nn||Jn)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([Nn,Jn]))}},_getAnchor:function(){return Pe(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),oa=function(a,p){return new Vi(a,p)};Xr.mergeOptions({closePopupOnClick:!0}),Xr.include({openPopup:function(a,p,S){return this._initOverlay(Vi,a,p,S).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),Ur.include({bindPopup:function(a,p){return this._popup=this._initOverlay(Vi,this._popup,a,p),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof Qo||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){Gr(a);var p=a.layer||a.target;if(this._popup._source===p&&!(p instanceof Ps)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=p,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var Ca=ns.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){ns.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){ns.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=ns.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",p=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=fr("div",p),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var p,S,V=this._map,oe=this._container,Se=V.latLngToContainerPoint(V.getCenter()),st=V.layerPointToContainerPoint(a),Pt=this.options.direction,zt=oe.offsetWidth,sn=oe.offsetHeight,Nn=Pe(this.options.offset),Jn=this._getAnchor();Pt==="top"?(p=zt/2,S=sn):Pt==="bottom"?(p=zt/2,S=0):Pt==="center"?(p=zt/2,S=sn/2):Pt==="right"?(p=0,S=sn/2):Pt==="left"?(p=zt,S=sn/2):st.x<Se.x?(Pt="right",p=0,S=sn/2):(Pt="left",p=zt+(Nn.x+Jn.x)*2,S=sn/2),a=a.subtract(Pe(p,S,!0)).add(Nn).add(Jn),_r(oe,"leaflet-tooltip-right"),_r(oe,"leaflet-tooltip-left"),_r(oe,"leaflet-tooltip-top"),_r(oe,"leaflet-tooltip-bottom"),Hn(oe,"leaflet-tooltip-"+Pt),Pi(oe,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&tn(this._container,a)},_animateZoom:function(a){var p=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(p)},_getAnchor:function(){return Pe(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),sa=function(a,p){return new Ca(a,p)};Xr.include({openTooltip:function(a,p,S){return this._initOverlay(Ca,a,p,S).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),Ur.include({bindTooltip:function(a,p){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ca,this._tooltip,a,p),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var p=a?"off":"on",S={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?S.add=this._openTooltip:(S.mouseover=this._openTooltip,S.mouseout=this.closeTooltip,S.click=this._openTooltip,this._map?this._addFocusListeners():S.add=this._addFocusListeners),this._tooltip.options.sticky&&(S.mousemove=this._moveTooltip),this[p](S),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof Qo||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var p=typeof a.getElement=="function"&&a.getElement();p&&(br(p,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),br(p,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var p=typeof a.getElement=="function"&&a.getElement();p&&p.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var p=this;this._map.once("moveend",function(){p._openOnceFlag=!1,p._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var p=a.latlng,S,V;this._tooltip.options.sticky&&a.originalEvent&&(S=this._map.mouseEventToContainerPoint(a.originalEvent),V=this._map.containerPointToLayerPoint(S),p=this._map.layerPointToLatLng(V)),this._tooltip.setLatLng(p)}});var aa=na.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var p=a&&a.tagName==="DIV"?a:document.createElement("div"),S=this.options;if(S.html instanceof Element?(_o(p),p.appendChild(S.html)):p.innerHTML=S.html!==!1?S.html:"",S.bgPos){var V=Pe(S.bgPos);p.style.backgroundPosition=-V.x+"px "+-V.y+"px"}return this._setIconStyles(p,"icon"),p},createShadow:function(){return null}});function la(a){return new aa(a)}na.Default=Ga;var Qr=Ur.extend({options:{tileSize:256,opacity:1,updateWhenIdle:at.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){D(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),qn(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(bo(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Lr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof re?a:new re(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var p=this.getPane().children,S=-a(-1/0,1/0),V=0,oe=p.length,Se;V<oe;V++)Se=p[V].style.zIndex,p[V]!==this._container&&Se&&(S=a(S,+Se));isFinite(S)&&(this.options.zIndex=S+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!at.ielt9){tn(this._container,this.options.opacity);var a=+new Date,p=!1,S=!1;for(var V in this._tiles){var oe=this._tiles[V];if(!(!oe.current||!oe.loaded)){var Se=Math.min(1,(a-oe.loaded)/200);tn(oe.el,Se),Se<1?p=!0:(oe.active?S=!0:this._onOpaqueTile(oe),oe.active=!0)}}S&&!this._noPrune&&this._pruneTiles(),p&&(I(this._fadeFrame),this._fadeFrame=z(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=fr("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,p=this.options.maxZoom;if(a!==void 0){for(var S in this._levels)S=Number(S),this._levels[S].el.children.length||S===a?(this._levels[S].el.style.zIndex=p-Math.abs(a-S),this._onUpdateLevel(S)):(qn(this._levels[S].el),this._removeTilesAtZoom(S),this._onRemoveLevel(S),delete this._levels[S]);var V=this._levels[a],oe=this._map;return V||(V=this._levels[a]={},V.el=fr("div","leaflet-tile-container leaflet-zoom-animated",this._container),V.el.style.zIndex=p,V.origin=oe.project(oe.unproject(oe.getPixelOrigin()),a).round(),V.zoom=a,this._setZoomTransform(V,oe.getCenter(),oe.getZoom()),y(V.el.offsetWidth),this._onCreateLevel(V)),this._level=V,V}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var a,p,S=this._map.getZoom();if(S>this.options.maxZoom||S<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)p=this._tiles[a],p.retain=p.current;for(a in this._tiles)if(p=this._tiles[a],p.current&&!p.active){var V=p.coords;this._retainParent(V.x,V.y,V.z,V.z-5)||this._retainChildren(V.x,V.y,V.z,V.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var p in this._tiles)this._tiles[p].coords.z===a&&this._removeTile(p)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)qn(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,p,S,V){var oe=Math.floor(a/2),Se=Math.floor(p/2),st=S-1,Pt=new re(+oe,+Se);Pt.z=+st;var zt=this._tileCoordsToKey(Pt),sn=this._tiles[zt];return sn&&sn.active?(sn.retain=!0,!0):(sn&&sn.loaded&&(sn.retain=!0),st>V?this._retainParent(oe,Se,st,V):!1)},_retainChildren:function(a,p,S,V){for(var oe=2*a;oe<2*a+2;oe++)for(var Se=2*p;Se<2*p+2;Se++){var st=new re(oe,Se);st.z=S+1;var Pt=this._tileCoordsToKey(st),zt=this._tiles[Pt];if(zt&&zt.active){zt.retain=!0;continue}else zt&&zt.loaded&&(zt.retain=!0);S+1<V&&this._retainChildren(oe,Se,S+1,V)}},_resetView:function(a){var p=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),p,p)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var p=this.options;return p.minNativeZoom!==void 0&&a<p.minNativeZoom?p.minNativeZoom:p.maxNativeZoom!==void 0&&p.maxNativeZoom<a?p.maxNativeZoom:a},_setView:function(a,p,S,V){var oe=Math.round(p);this.options.maxZoom!==void 0&&oe>this.options.maxZoom||this.options.minZoom!==void 0&&oe<this.options.minZoom?oe=void 0:oe=this._clampZoom(oe);var Se=this.options.updateWhenZooming&&oe!==this._tileZoom;(!V||Se)&&(this._tileZoom=oe,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),oe!==void 0&&this._update(a),S||this._pruneTiles(),this._noPrune=!!S),this._setZoomTransforms(a,p)},_setZoomTransforms:function(a,p){for(var S in this._levels)this._setZoomTransform(this._levels[S],a,p)},_setZoomTransform:function(a,p,S){var V=this._map.getZoomScale(S,a.zoom),oe=a.origin.multiplyBy(V).subtract(this._map._getNewPixelOrigin(p,S)).round();at.any3d?wo(a.el,oe,V):Pi(a.el,oe)},_resetGrid:function(){var a=this._map,p=a.options.crs,S=this._tileSize=this.getTileSize(),V=this._tileZoom,oe=this._map.getPixelWorldBounds(this._tileZoom);oe&&(this._globalTileRange=this._pxBoundsToTileRange(oe)),this._wrapX=p.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,p.wrapLng[0]],V).x/S.x),Math.ceil(a.project([0,p.wrapLng[1]],V).x/S.y)],this._wrapY=p.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([p.wrapLat[0],0],V).y/S.x),Math.ceil(a.project([p.wrapLat[1],0],V).y/S.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var p=this._map,S=p._animatingZoom?Math.max(p._animateToZoom,p.getZoom()):p.getZoom(),V=p.getZoomScale(S,this._tileZoom),oe=p.project(a,this._tileZoom).floor(),Se=p.getSize().divideBy(V*2);return new Ie(oe.subtract(Se),oe.add(Se))},_update:function(a){var p=this._map;if(p){var S=this._clampZoom(p.getZoom());if(a===void 0&&(a=p.getCenter()),this._tileZoom!==void 0){var V=this._getTiledPixelBounds(a),oe=this._pxBoundsToTileRange(V),Se=oe.getCenter(),st=[],Pt=this.options.keepBuffer,zt=new Ie(oe.getBottomLeft().subtract([Pt,-Pt]),oe.getTopRight().add([Pt,-Pt]));if(!(isFinite(oe.min.x)&&isFinite(oe.min.y)&&isFinite(oe.max.x)&&isFinite(oe.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var sn in this._tiles){var Nn=this._tiles[sn].coords;(Nn.z!==this._tileZoom||!zt.contains(new re(Nn.x,Nn.y)))&&(this._tiles[sn].current=!1)}if(Math.abs(S-this._tileZoom)>1){this._setView(a,S);return}for(var Jn=oe.min.y;Jn<=oe.max.y;Jn++)for(var zr=oe.min.x;zr<=oe.max.x;zr++){var go=new re(zr,Jn);if(go.z=this._tileZoom,!!this._isValidTile(go)){var Ki=this._tiles[this._tileCoordsToKey(go)];Ki?Ki.current=!0:st.push(go)}}if(st.sort(function(Hi,ps){return Hi.distanceTo(Se)-ps.distanceTo(Se)}),st.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Do=document.createDocumentFragment();for(zr=0;zr<st.length;zr++)this._addTile(st[zr],Do);this._level.el.appendChild(Do)}}}},_isValidTile:function(a){var p=this._map.options.crs;if(!p.infinite){var S=this._globalTileRange;if(!p.wrapLng&&(a.x<S.min.x||a.x>S.max.x)||!p.wrapLat&&(a.y<S.min.y||a.y>S.max.y))return!1}if(!this.options.bounds)return!0;var V=this._tileCoordsToBounds(a);return fe(this.options.bounds).overlaps(V)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var p=this._map,S=this.getTileSize(),V=a.scaleBy(S),oe=V.add(S),Se=p.unproject(V,a.z),st=p.unproject(oe,a.z);return[Se,st]},_tileCoordsToBounds:function(a){var p=this._tileCoordsToNwSe(a),S=new J(p[0],p[1]);return this.options.noWrap||(S=this._map.wrapLatLngBounds(S)),S},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var p=a.split(":"),S=new re(+p[0],+p[1]);return S.z=+p[2],S},_removeTile:function(a){var p=this._tiles[a];p&&(qn(p.el),delete this._tiles[a],this.fire("tileunload",{tile:p.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){Hn(a,"leaflet-tile");var p=this.getTileSize();a.style.width=p.x+"px",a.style.height=p.y+"px",a.onselectstart=y,a.onmousemove=y,at.ielt9&&this.options.opacity<1&&tn(a,this.options.opacity)},_addTile:function(a,p){var S=this._getTilePos(a),V=this._tileCoordsToKey(a),oe=this.createTile(this._wrapCoords(a),o(this._tileReady,this,a));this._initTile(oe),this.createTile.length<2&&z(o(this._tileReady,this,a,null,oe)),Pi(oe,S),this._tiles[V]={el:oe,coords:a,current:!0},p.appendChild(oe),this.fire("tileloadstart",{tile:oe,coords:a})},_tileReady:function(a,p,S){p&&this.fire("tileerror",{error:p,tile:S,coords:a});var V=this._tileCoordsToKey(a);S=this._tiles[V],S&&(S.loaded=+new Date,this._map._fadeAnimated?(tn(S.el,0),I(this._fadeFrame),this._fadeFrame=z(this._updateOpacity,this)):(S.active=!0,this._pruneTiles()),p||(Hn(S.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:S.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),at.ielt9||!this._map._fadeAnimated?z(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var p=new re(this._wrapX?g(a.x,this._wrapX):a.x,this._wrapY?g(a.y,this._wrapY):a.y);return p.z=a.z,p},_pxBoundsToTileRange:function(a){var p=this.getTileSize();return new Ie(a.min.unscaleBy(p).floor(),a.max.unscaleBy(p).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function Ws(a){return new Qr(a)}var Ao=Qr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,p){this._url=a,p=D(this,p),p.detectRetina&&at.retina&&p.maxZoom>0?(p.tileSize=Math.floor(p.tileSize/2),p.zoomReverse?(p.zoomOffset--,p.minZoom=Math.min(p.maxZoom,p.minZoom+1)):(p.zoomOffset++,p.maxZoom=Math.max(p.minZoom,p.maxZoom-1)),p.minZoom=Math.max(0,p.minZoom)):p.zoomReverse?p.minZoom=Math.min(p.maxZoom,p.minZoom):p.maxZoom=Math.max(p.minZoom,p.maxZoom),typeof p.subdomains=="string"&&(p.subdomains=p.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,p){return this._url===a&&p===void 0&&(p=!0),this._url=a,p||this.redraw(),this},createTile:function(a,p){var S=document.createElement("img");return br(S,"load",o(this._tileOnLoad,this,p,S)),br(S,"error",o(this._tileOnError,this,p,S)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(S.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(S.referrerPolicy=this.options.referrerPolicy),S.alt="",S.src=this.getTileUrl(a),S},getTileUrl:function(a){var p={r:at.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var S=this._globalTileRange.max.y-a.y;this.options.tms&&(p.y=S),p["-y"]=S}return F(this._url,i(p,this.options))},_tileOnLoad:function(a,p){at.ielt9?setTimeout(o(a,this,null,p),0):a(null,p)},_tileOnError:function(a,p,S){var V=this.options.errorTileUrl;V&&p.getAttribute("src")!==V&&(p.src=V),a(S,p)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,p=this.options.maxZoom,S=this.options.zoomReverse,V=this.options.zoomOffset;return S&&(a=p-a),a+V},_getSubdomain:function(a){var p=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[p]},_abortLoading:function(){var a,p;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(p=this._tiles[a].el,p.onload=y,p.onerror=y,!p.complete)){p.src=le;var S=this._tiles[a].coords;qn(p),delete this._tiles[a],this.fire("tileabort",{tile:p,coords:S})}},_removeTile:function(a){var p=this._tiles[a];if(p)return p.el.setAttribute("src",le),Qr.prototype._removeTile.call(this,a)},_tileReady:function(a,p,S){if(!(!this._map||S&&S.getAttribute("src")===le))return Qr.prototype._tileReady.call(this,a,p,S)}});function Si(a,p){return new Ao(a,p)}var Mi=Ao.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,p){this._url=a;var S=i({},this.defaultWmsParams);for(var V in p)V in this.options||(S[V]=p[V]);p=D(this,p);var oe=p.detectRetina&&at.retina?2:1,Se=this.getTileSize();S.width=Se.x*oe,S.height=Se.y*oe,this.wmsParams=S},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var p=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[p]=this._crs.code,Ao.prototype.onAdd.call(this,a)},getTileUrl:function(a){var p=this._tileCoordsToNwSe(a),S=this._crs,V=A(S.project(p[0]),S.project(p[1])),oe=V.min,Se=V.max,st=(this._wmsVersion>=1.3&&this._crs===fo?[oe.y,oe.x,Se.y,Se.x]:[oe.x,oe.y,Se.x,Se.y]).join(","),Pt=Ao.prototype.getTileUrl.call(this,a);return Pt+N(this.wmsParams,Pt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+st},setParams:function(a,p){return i(this.wmsParams,a),p||this.redraw(),this}});function io(a,p){return new Mi(a,p)}Ao.WMS=Mi,Si.wms=io;var Oi=Ur.extend({options:{padding:.1},initialize:function(a){D(this,a),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Hn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,p){var S=this._map.getZoomScale(p,this._zoom),V=this._map.getSize().multiplyBy(.5+this.options.padding),oe=this._map.project(this._center,p),Se=V.multiplyBy(-S).add(oe).subtract(this._map._getNewPixelOrigin(a,p));at.any3d?wo(this._container,Se,S):Pi(this._container,Se)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,p=this._map.getSize(),S=this._map.containerPointToLayerPoint(p.multiplyBy(-a)).round();this._bounds=new Ie(S,S.add(p.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),As=Oi.extend({options:{tolerance:0},getEvents:function(){var a=Oi.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Oi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");br(a,"mousemove",this._onMouseMove,this),br(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),br(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){I(this._redrawRequest),delete this._ctx,qn(this._container),Tr(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var p in this._layers)a=this._layers[p],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Oi.prototype._update.call(this);var a=this._bounds,p=this._container,S=a.getSize(),V=at.retina?2:1;Pi(p,a.min),p.width=V*S.x,p.height=V*S.y,p.style.width=S.x+"px",p.style.height=S.y+"px",at.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){Oi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[f(a)]=a;var p=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=p),this._drawLast=p,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var p=a._order,S=p.next,V=p.prev;S?S.prev=V:this._drawLast=V,V?V.next=S:this._drawFirst=S,delete a._order,delete this._layers[f(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var p=a.options.dashArray.split(/[, ]+/),S=[],V,oe;for(oe=0;oe<p.length;oe++){if(V=Number(p[oe]),isNaN(V))return;S.push(V)}a.options._dashArray=S}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||z(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var p=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Ie,this._redrawBounds.extend(a._pxBounds.min.subtract([p,p])),this._redrawBounds.extend(a._pxBounds.max.add([p,p]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var p=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,p.x,p.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,p=this._redrawBounds;if(this._ctx.save(),p){var S=p.getSize();this._ctx.beginPath(),this._ctx.rect(p.min.x,p.min.y,S.x,S.y),this._ctx.clip()}this._drawing=!0;for(var V=this._drawFirst;V;V=V.next)a=V.layer,(!p||a._pxBounds&&a._pxBounds.intersects(p))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,p){if(this._drawing){var S,V,oe,Se,st=a._parts,Pt=st.length,zt=this._ctx;if(Pt){for(zt.beginPath(),S=0;S<Pt;S++){for(V=0,oe=st[S].length;V<oe;V++)Se=st[S][V],zt[V?"lineTo":"moveTo"](Se.x,Se.y);p&&zt.closePath()}this._fillStroke(zt,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var p=a._point,S=this._ctx,V=Math.max(Math.round(a._radius),1),oe=(Math.max(Math.round(a._radiusY),1)||V)/V;oe!==1&&(S.save(),S.scale(1,oe)),S.beginPath(),S.arc(p.x,p.y/oe,V,0,Math.PI*2,!1),oe!==1&&S.restore(),this._fillStroke(S,a)}},_fillStroke:function(a,p){var S=p.options;S.fill&&(a.globalAlpha=S.fillOpacity,a.fillStyle=S.fillColor||S.color,a.fill(S.fillRule||"evenodd")),S.stroke&&S.weight!==0&&(a.setLineDash&&a.setLineDash(p.options&&p.options._dashArray||[]),a.globalAlpha=S.opacity,a.lineWidth=S.weight,a.strokeStyle=S.color,a.lineCap=S.lineCap,a.lineJoin=S.lineJoin,a.stroke())},_onClick:function(a){for(var p=this._map.mouseEventToLayerPoint(a),S,V,oe=this._drawFirst;oe;oe=oe.next)S=oe.layer,S.options.interactive&&S._containsPoint(p)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(S))&&(V=S);this._fireEvent(V?[V]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var p=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,p)}},_handleMouseOut:function(a){var p=this._hoveredLayer;p&&(_r(this._container,"leaflet-interactive"),this._fireEvent([p],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,p){if(!this._mouseHoverThrottled){for(var S,V,oe=this._drawFirst;oe;oe=oe.next)S=oe.layer,S.options.interactive&&S._containsPoint(p)&&(V=S);V!==this._hoveredLayer&&(this._handleMouseOut(a),V&&(Hn(this._container,"leaflet-interactive"),this._fireEvent([V],a,"mouseover"),this._hoveredLayer=V)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,p,S){this._map._fireDOMEvent(p,S||p.type,a)},_bringToFront:function(a){var p=a._order;if(p){var S=p.next,V=p.prev;if(S)S.prev=V;else return;V?V.next=S:S&&(this._drawFirst=S),p.prev=this._drawLast,this._drawLast.next=p,p.next=null,this._drawLast=p,this._requestRedraw(a)}},_bringToBack:function(a){var p=a._order;if(p){var S=p.next,V=p.prev;if(V)V.next=S;else return;S?S.prev=V:V&&(this._drawLast=V),p.prev=null,p.next=this._drawFirst,this._drawFirst.prev=p,this._drawFirst=p,this._requestRedraw(a)}}});function hs(a){return at.canvas?new As(a):null}var Is=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),xu={_initContainer:function(){this._container=fr("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Oi.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var p=a._container=Is("shape");Hn(p,"leaflet-vml-shape "+(this.options.className||"")),p.coordsize="1 1",a._path=Is("path"),p.appendChild(a._path),this._updateStyle(a),this._layers[f(a)]=a},_addPath:function(a){var p=a._container;this._container.appendChild(p),a.options.interactive&&a.addInteractiveTarget(p)},_removePath:function(a){var p=a._container;qn(p),a.removeInteractiveTarget(p),delete this._layers[f(a)]},_updateStyle:function(a){var p=a._stroke,S=a._fill,V=a.options,oe=a._container;oe.stroked=!!V.stroke,oe.filled=!!V.fill,V.stroke?(p||(p=a._stroke=Is("stroke")),oe.appendChild(p),p.weight=V.weight+"px",p.color=V.color,p.opacity=V.opacity,V.dashArray?p.dashStyle=Y(V.dashArray)?V.dashArray.join(" "):V.dashArray.replace(/( *, *)/g," "):p.dashStyle="",p.endcap=V.lineCap.replace("butt","flat"),p.joinstyle=V.lineJoin):p&&(oe.removeChild(p),a._stroke=null),V.fill?(S||(S=a._fill=Is("fill")),oe.appendChild(S),S.color=V.fillColor||V.color,S.opacity=V.fillOpacity):S&&(oe.removeChild(S),a._fill=null)},_updateCircle:function(a){var p=a._point.round(),S=Math.round(a._radius),V=Math.round(a._radiusY||S);this._setPath(a,a._empty()?"M0 0":"AL "+p.x+","+p.y+" "+S+","+V+" 0,"+65535*360)},_setPath:function(a,p){a._path.v=p},_bringToFront:function(a){bo(a._container)},_bringToBack:function(a){Lr(a._container)}},ua=at.vml?Is:ve,po=Oi.extend({_initContainer:function(){this._container=ua("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ua("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){qn(this._container),Tr(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Oi.prototype._update.call(this);var a=this._bounds,p=a.getSize(),S=this._container;(!this._svgSize||!this._svgSize.equals(p))&&(this._svgSize=p,S.setAttribute("width",p.x),S.setAttribute("height",p.y)),Pi(S,a.min),S.setAttribute("viewBox",[a.min.x,a.min.y,p.x,p.y].join(" ")),this.fire("update")}},_initPath:function(a){var p=a._path=ua("path");a.options.className&&Hn(p,a.options.className),a.options.interactive&&Hn(p,"leaflet-interactive"),this._updateStyle(a),this._layers[f(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){qn(a._path),a.removeInteractiveTarget(a._path),delete this._layers[f(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var p=a._path,S=a.options;p&&(S.stroke?(p.setAttribute("stroke",S.color),p.setAttribute("stroke-opacity",S.opacity),p.setAttribute("stroke-width",S.weight),p.setAttribute("stroke-linecap",S.lineCap),p.setAttribute("stroke-linejoin",S.lineJoin),S.dashArray?p.setAttribute("stroke-dasharray",S.dashArray):p.removeAttribute("stroke-dasharray"),S.dashOffset?p.setAttribute("stroke-dashoffset",S.dashOffset):p.removeAttribute("stroke-dashoffset")):p.setAttribute("stroke","none"),S.fill?(p.setAttribute("fill",S.fillColor||S.color),p.setAttribute("fill-opacity",S.fillOpacity),p.setAttribute("fill-rule",S.fillRule||"evenodd")):p.setAttribute("fill","none"))},_updatePoly:function(a,p){this._setPath(a,ge(a._parts,p))},_updateCircle:function(a){var p=a._point,S=Math.max(Math.round(a._radius),1),V=Math.max(Math.round(a._radiusY),1)||S,oe="a"+S+","+V+" 0 1,0 ",Se=a._empty()?"M0 0":"M"+(p.x-S)+","+p.y+oe+S*2+",0 "+oe+-S*2+",0 ";this._setPath(a,Se)},_setPath:function(a,p){a._path.setAttribute("d",p)},_bringToFront:function(a){bo(a._path)},_bringToBack:function(a){Lr(a._path)}});at.vml&&po.include(xu);function Bi(a){return at.svg||at.vml?new po(a):null}Xr.include({getRenderer:function(a){var p=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return p||(p=this._renderer=this._createRenderer()),this.hasLayer(p)||this.addLayer(p),p},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var p=this._paneRenderers[a];return p===void 0&&(p=this._createRenderer({pane:a}),this._paneRenderers[a]=p),p},_createRenderer:function(a){return this.options.preferCanvas&&hs(a)||Bi(a)}});var Go=Lo.extend({initialize:function(a,p){Lo.prototype.initialize.call(this,this._boundsToLatLngs(a),p)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=fe(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function ds(a,p){return new Go(a,p)}po.create=ua,po.pointsToPath=ge,$o.geometryToLayer=Uo,$o.coordsToLatLng=Sa,$o.coordsToLatLngs=Vo,$o.latLngToCoords=Mo,$o.latLngsToCoords=ia,$o.getFeature=Ms,$o.asFeature=Ho,Xr.mergeOptions({boxZoom:!0});var dr=bi.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){br(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Tr(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){qn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Xo(),Ro(),this._startPoint=this._map.mouseEventToContainerPoint(a),br(document,{contextmenu:Gr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=fr("div","leaflet-zoom-box",this._container),Hn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var p=new Ie(this._point,this._startPoint),S=p.getSize();Pi(this._box,p.min),this._box.style.width=S.x+"px",this._box.style.height=S.y+"px"},_finish:function(){this._moved&&(qn(this._box),_r(this._container,"leaflet-crosshair")),Io(),Xi(),Tr(document,{contextmenu:Gr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var p=new J(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(p).fire("boxzoomend",{boxZoomBounds:p})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Xr.addInitHook("addHandler","boxZoom",dr),Xr.mergeOptions({doubleClickZoom:!0});var Ea=bi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var p=this._map,S=p.getZoom(),V=p.options.zoomDelta,oe=a.originalEvent.shiftKey?S-V:S+V;p.options.doubleClickZoom==="center"?p.setZoom(oe):p.setZoomAround(a.containerPoint,oe)}});Xr.addInitHook("addHandler","doubleClickZoom",Ea),Xr.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Pa=bi.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new Gs(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}Hn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){_r(this._map._container,"leaflet-grab"),_r(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var p=fe(this._map.options.maxBounds);this._offsetLimit=A(this._map.latLngToContainerPoint(p.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(p.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var p=this._lastTime=+new Date,S=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(S),this._times.push(p),this._prunePositions(p)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),p=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=p.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,p){return a-(a-p)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),p=this._offsetLimit;a.x<p.min.x&&(a.x=this._viscousLimit(a.x,p.min.x)),a.y<p.min.y&&(a.y=this._viscousLimit(a.y,p.min.y)),a.x>p.max.x&&(a.x=this._viscousLimit(a.x,p.max.x)),a.y>p.max.y&&(a.y=this._viscousLimit(a.y,p.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,p=Math.round(a/2),S=this._initialWorldOffset,V=this._draggable._newPos.x,oe=(V-p+S)%a+p-S,Se=(V+p+S)%a-p-S,st=Math.abs(oe+S)<Math.abs(Se+S)?oe:Se;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=st},_onDragEnd:function(a){var p=this._map,S=p.options,V=!S.inertia||a.noInertia||this._times.length<2;if(p.fire("dragend",a),V)p.fire("moveend");else{this._prunePositions(+new Date);var oe=this._lastPos.subtract(this._positions[0]),Se=(this._lastTime-this._times[0])/1e3,st=S.easeLinearity,Pt=oe.multiplyBy(st/Se),zt=Pt.distanceTo([0,0]),sn=Math.min(S.inertiaMaxSpeed,zt),Nn=Pt.multiplyBy(sn/zt),Jn=sn/(S.inertiaDeceleration*st),zr=Nn.multiplyBy(-Jn/2).round();!zr.x&&!zr.y?p.fire("moveend"):(zr=p._limitOffset(zr,p.options.maxBounds),z(function(){p.panBy(zr,{duration:Jn,easeLinearity:st,noMoveStart:!0,animate:!0})}))}}});Xr.addInitHook("addHandler","dragging",Pa),Xr.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Zs=bi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),br(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Tr(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,p=document.documentElement,S=a.scrollTop||p.scrollTop,V=a.scrollLeft||p.scrollLeft;this._map._container.focus(),window.scrollTo(V,S)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var p=this._panKeys={},S=this.keyCodes,V,oe;for(V=0,oe=S.left.length;V<oe;V++)p[S.left[V]]=[-1*a,0];for(V=0,oe=S.right.length;V<oe;V++)p[S.right[V]]=[a,0];for(V=0,oe=S.down.length;V<oe;V++)p[S.down[V]]=[0,a];for(V=0,oe=S.up.length;V<oe;V++)p[S.up[V]]=[0,-1*a]},_setZoomDelta:function(a){var p=this._zoomKeys={},S=this.keyCodes,V,oe;for(V=0,oe=S.zoomIn.length;V<oe;V++)p[S.zoomIn[V]]=a;for(V=0,oe=S.zoomOut.length;V<oe;V++)p[S.zoomOut[V]]=-a},_addHooks:function(){br(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Tr(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var p=a.keyCode,S=this._map,V;if(p in this._panKeys){if(!S._panAnim||!S._panAnim._inProgress)if(V=this._panKeys[p],a.shiftKey&&(V=Pe(V).multiplyBy(3)),S.options.maxBounds&&(V=S._limitOffset(Pe(V),S.options.maxBounds)),S.options.worldCopyJump){var oe=S.wrapLatLng(S.unproject(S.project(S.getCenter()).add(V)));S.panTo(oe)}else S.panBy(V)}else if(p in this._zoomKeys)S.setZoom(S.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[p]);else if(p===27&&S._popup&&S._popup.options.closeOnEscapeKey)S.closePopup();else return;Gr(a)}}});Xr.addInitHook("addHandler","keyboard",Zs),Xr.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var rs=bi.extend({addHooks:function(){br(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Tr(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var p=Xl(a),S=this._map.options.wheelDebounceTime;this._delta+=p,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var V=Math.max(S-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),V),Gr(a)},_performZoom:function(){var a=this._map,p=a.getZoom(),S=this._map.options.zoomSnap||0;a._stop();var V=this._delta/(this._map.options.wheelPxPerZoomLevel*4),oe=4*Math.log(2/(1+Math.exp(-Math.abs(V))))/Math.LN2,Se=S?Math.ceil(oe/S)*S:oe,st=a._limitZoom(p+(this._delta>0?Se:-Se))-p;this._delta=0,this._startTime=null,st&&(a.options.scrollWheelZoom==="center"?a.setZoom(p+st):a.setZoomAround(this._lastMousePos,p+st))}});Xr.addInitHook("addHandler","scrollWheelZoom",rs);var bc=600;Xr.mergeOptions({tapHold:at.touchNative&&at.safari&&at.mobile,tapTolerance:15});var ko=bi.extend({addHooks:function(){br(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Tr(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var p=a.touches[0];this._startPos=this._newPos=new re(p.clientX,p.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(br(document,"touchend",Sr),br(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",p))},this),bc),br(document,"touchend touchcancel contextmenu",this._cancel,this),br(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){Tr(document,"touchend",Sr),Tr(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),Tr(document,"touchend touchcancel contextmenu",this._cancel,this),Tr(document,"touchmove",this._onMove,this)},_onMove:function(a){var p=a.touches[0];this._newPos=new re(p.clientX,p.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,p){var S=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:p.screenX,screenY:p.screenY,clientX:p.clientX,clientY:p.clientY});S._simulated=!0,p.target.dispatchEvent(S)}});Xr.addInitHook("addHandler","tapHold",ko),Xr.mergeOptions({touchZoom:at.touch,bounceAtZoomLimits:!0});var To=bi.extend({addHooks:function(){Hn(this._map._container,"leaflet-touch-zoom"),br(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){_r(this._map._container,"leaflet-touch-zoom"),Tr(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var p=this._map;if(!(!a.touches||a.touches.length!==2||p._animatingZoom||this._zooming)){var S=p.mouseEventToContainerPoint(a.touches[0]),V=p.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=p.getSize()._divideBy(2),this._startLatLng=p.containerPointToLatLng(this._centerPoint),p.options.touchZoom!=="center"&&(this._pinchStartLatLng=p.containerPointToLatLng(S.add(V)._divideBy(2))),this._startDist=S.distanceTo(V),this._startZoom=p.getZoom(),this._moved=!1,this._zooming=!0,p._stop(),br(document,"touchmove",this._onTouchMove,this),br(document,"touchend touchcancel",this._onTouchEnd,this),Sr(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var p=this._map,S=p.mouseEventToContainerPoint(a.touches[0]),V=p.mouseEventToContainerPoint(a.touches[1]),oe=S.distanceTo(V)/this._startDist;if(this._zoom=p.getScaleZoom(oe,this._startZoom),!p.options.bounceAtZoomLimits&&(this._zoom<p.getMinZoom()&&oe<1||this._zoom>p.getMaxZoom()&&oe>1)&&(this._zoom=p._limitZoom(this._zoom)),p.options.touchZoom==="center"){if(this._center=this._startLatLng,oe===1)return}else{var Se=S._add(V)._divideBy(2)._subtract(this._centerPoint);if(oe===1&&Se.x===0&&Se.y===0)return;this._center=p.unproject(p.project(this._pinchStartLatLng,this._zoom).subtract(Se),this._zoom)}this._moved||(p._moveStart(!0,!1),this._moved=!0),I(this._animRequest);var st=o(p._move,p,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=z(st,this,!0),Sr(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,I(this._animRequest),Tr(document,"touchmove",this._onTouchMove,this),Tr(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Xr.addInitHook("addHandler","touchZoom",To),Xr.BoxZoom=dr,Xr.DoubleClickZoom=Ea,Xr.Drag=Pa,Xr.Keyboard=Zs,Xr.ScrollWheelZoom=rs,Xr.TapHold=ko,Xr.TouchZoom=To,t.Bounds=Ie,t.Browser=at,t.CRS=ae,t.Canvas=As,t.Circle=zo,t.CircleMarker=fs,t.Class=U,t.Control=or,t.DivIcon=aa,t.DivOverlay=ns,t.DomEvent=Dl,t.DomUtil=pr,t.Draggable=Gs,t.Evented=ie,t.FeatureGroup=Qo,t.GeoJSON=$o,t.GridLayer=Qr,t.Handler=bi,t.Icon=na,t.ImageOverlay=An,t.LatLng=ne,t.LatLngBounds=J,t.Layer=Ur,t.LayerGroup=jo,t.LineUtil=$r,t.Map=Xr,t.Marker=ho,t.Mixin=Ku,t.Path=Ps,t.Point=re,t.PolyUtil=fl,t.Polygon=Lo,t.Polyline=ts,t.Popup=Vi,t.PosAnimation=Ql,t.Projection=xi,t.Rectangle=Go,t.Renderer=Oi,t.SVG=po,t.SVGOverlay=Li,t.TileLayer=Ao,t.Tooltip=Ca,t.Transformation=Ce,t.Util=$,t.VideoOverlay=wr,t.bind=o,t.bounds=A,t.canvas=hs,t.circle=es,t.circleMarker=dl,t.control=to,t.divIcon=la,t.extend=i,t.featureGroup=tu,t.geoJSON=qt,t.geoJson=Mt,t.gridLayer=Ws,t.icon=wu,t.imageOverlay=Kn,t.latLng=he,t.latLngBounds=fe,t.layerGroup=hl,t.map=eo,t.marker=ra,t.point=Pe,t.polygon=xa,t.polyline=Yu,t.popup=oa,t.rectangle=ds,t.setOptions=D,t.stamp=f,t.svg=Bi,t.svgOverlay=Rl,t.tileLayer=Si,t.tooltip=sa,t.transformation=Ve,t.version=r,t.videoOverlay=Ui;var Ks=window.L;t.noConflict=function(){return window.L=Ks,this},window.L=t})})(f1,f1.exports);var Rt=f1.exports;const Vn=gy(Rt);var ab={exports:{}};(function(e,n){(function(t,r){r(n)})(ea,function(t){var r=typeof window<"u"?window:typeof ea<"u"?ea:typeof self<"u"?self:{};function i(d,g){return d(g={exports:{}},g.exports),g.exports}var s=i(function(d,g){(function(y){const x={escape:function(W){return W.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:_,mimeType:function(W){return W=_(W).toLowerCase(),function(){var q="application/font-woff",ie="image/jpeg";return{woff:q,woff2:q,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:ie,jpeg:ie,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[W]||""},dataAsUrl:function(W,q){return`data:${q};base64,`+W},isDataUrl:function(W){return W.search(/^(data:)/)!==-1},canvasToBlob:function(W){return W.toBlob?new Promise(function(ie){W.toBlob(ie)}):(q=W,new Promise(function(ie){const re=xe(q.toDataURL().split(",")[1]);var we=re.length;const Pe=new Uint8Array(we);for(let Ie=0;Ie<we;Ie++)Pe[Ie]=re.charCodeAt(Ie);ie(new Blob([Pe],{type:"image/png"}))}));var q},resolveUrl:function(W,q){const ie=document.implementation.createHTMLDocument(),re=ie.createElement("base"),we=(ie.head.appendChild(re),ie.createElement("a"));return ie.body.appendChild(we),re.href=q,we.href=W,we.href},getAndEncode:function(W){let q=le.impl.urlCache.find(function(ie){return ie.url===W});return q||(q={url:W,promise:null},le.impl.urlCache.push(q)),q.promise===null&&(le.impl.options.cacheBust&&(W+=(/\?/.test(W)?"&":"?")+new Date().getTime()),q.promise=new Promise(function(ie){const re=le.impl.options.httpTimeout,we=new XMLHttpRequest;let Pe;var Ie;function A(J){console.error(J),ie("")}we.onreadystatechange=function(){if(we.readyState===4)if(we.status!==200)Pe?ie(Pe):A(`cannot fetch resource: ${W}, status: `+we.status);else{const J=new FileReader;J.onloadend=function(){var fe=J.result.split(/,/)[1];ie(fe)},J.readAsDataURL(we.response)}},we.ontimeout=function(){Pe?ie(Pe):A(`timeout of ${re}ms occured while fetching resource: `+W)},we.responseType="blob",we.timeout=re,le.impl.options.useCredentials&&(we.withCredentials=!0),we.open("GET",W,!0),we.send(),le.impl.options.imagePlaceholder&&(Ie=le.impl.options.imagePlaceholder.split(/,/))&&Ie[1]&&(Pe=Ie[1])})),q.promise},uid:function(){let W=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+W++}}(),delay:function(W){return function(q){return new Promise(function(ie){setTimeout(function(){ie(q)},W)})}},asArray:function(W){const q=[],ie=W.length;for(let re=0;re<ie;re++)q.push(W[re]);return q},escapeXhtml:function(W){return W.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(W){return W!=="data:,"?new Promise(function(q,ie){const re=new Image;le.impl.options.useCredentials&&(re.crossOrigin="use-credentials"),re.onload=function(){q(re)},re.onerror=ie,re.src=W}):Promise.resolve()},width:function(W){var q=M(W,"border-left-width"),ie=M(W,"border-right-width");return W.scrollWidth+q+ie},height:function(W){var q=M(W,"border-top-width"),ie=M(W,"border-bottom-width");return W.scrollHeight+q+ie}};function _(W){return(W=/\.([^\.\/]*?)(\?|$)/g.exec(W))?W[1]:""}function M(W,q){const ie=ce(W).getPropertyValue(q);return parseFloat(ie.replace("px",""))}const D=function(){const W=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(we,Pe,Ie){return q(we)?Promise.resolve(we).then(ie).then(function(A){let J=Promise.resolve(we);return A.forEach(function(fe){J=J.then(function(ne){return re(ne,fe,Pe,Ie)})}),J}):Promise.resolve(we)},shouldProcess:q,impl:{readUrls:ie,inline:re}};function q(we){return we.search(W)!==-1}function ie(we){const Pe=[];for(var Ie;(Ie=W.exec(we))!==null;)Pe.push(Ie[1]);return Pe.filter(function(A){return!x.isDataUrl(A)})}function re(we,Pe,Ie,A){return Promise.resolve(Pe).then(function(J){return Ie?x.resolveUrl(J,Ie):J}).then(A||x.getAndEncode).then(function(J){return x.dataAsUrl(J,x.mimeType(Pe))}).then(function(J){return we.replace((fe=Pe,new RegExp(`(url\\(['"]?)(${x.escape(fe)})(['"]?\\))`,"g")),`$1${J}$3`);var fe})}}(),N={resolveAll:function(){return O().then(function(W){return Promise.all(W.map(function(q){return q.resolve()}))}).then(function(W){return W.join(`
`)})},impl:{readAll:O}};function O(){return Promise.resolve(x.asArray(document.styleSheets)).then(function(q){const ie=[];return q.forEach(function(re){if(Object.getPrototypeOf(re).hasOwnProperty("cssRules"))try{x.asArray(re.cssRules||[]).forEach(ie.push.bind(ie))}catch(we){console.log("Error while reading CSS rules from "+re.href,we.toString())}}),ie}).then(function(q){return q.filter(function(ie){return ie.type===CSSRule.FONT_FACE_RULE}).filter(function(ie){return D.shouldProcess(ie.style.getPropertyValue("src"))})}).then(function(q){return q.map(W)});function W(q){return{resolve:function(){var ie=(q.parentStyleSheet||{}).href;return D.inlineAll(q.cssText,ie)},src:function(){return q.style.getPropertyValue("src")}}}}const F={inlineAll:function W(q){return q instanceof Element?function(ie){const re=ie.style.getPropertyValue("background");return re?D.inlineAll(re).then(function(we){ie.style.setProperty("background",we,re)}).then(function(){return ie}):Promise.resolve(ie)}(q).then(function(){return q instanceof HTMLImageElement?Y(q).inline():Promise.all(x.asArray(q.childNodes).map(function(ie){return W(ie)}))}):Promise.resolve(q)},impl:{newImage:Y}};function Y(W){return{inline:function(q){return x.isDataUrl(W.src)?Promise.resolve():Promise.resolve(W.src).then(q||x.getAndEncode).then(function(ie){return x.dataAsUrl(ie,x.mimeType(W.src))}).then(function(ie){return new Promise(function(re){W.onload=re,W.onerror=re,W.src=ie})})}}}const Q={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},le={toSvg:G,toPng:function(W,q){return(q=q||{}).raster=!0,R(W,q).then(function(ie){return ie.toDataURL()})},toJpeg:function(W,q){return(q=q||{}).raster=!0,R(W,q).then(function(ie){return ie.toDataURL("image/jpeg",q.quality||1)})},toBlob:function(W,q){return(q=q||{}).raster=!0,R(W,q).then(x.canvasToBlob)},toPixelData:function(W,q){return(q=q||{}).raster=!0,R(W,q).then(function(ie){return ie.getContext("2d").getImageData(0,0,x.width(W),x.height(W)).data})},toCanvas:function(W,q){return(q=q||{}).raster=!0,R(W,q||{})},impl:{fontFaces:N,images:F,util:x,inliner:D,urlCache:[],options:{}}},ce=(d.exports=le,y.getComputedStyle||window.getComputedStyle),xe=y.atob||window.atob;function G(W,q){var ie=q=q||{};return ie.imagePlaceholder===void 0?le.impl.options.imagePlaceholder=Q.imagePlaceholder:le.impl.options.imagePlaceholder=ie.imagePlaceholder,ie.cacheBust===void 0?le.impl.options.cacheBust=Q.cacheBust:le.impl.options.cacheBust=ie.cacheBust,ie.useCredentials===void 0?le.impl.options.useCredentials=Q.useCredentials:le.impl.options.useCredentials=ie.useCredentials,Promise.resolve(W).then(function(re){return function we(Pe,Ie,A,J,fe=null){return A||!Ie||Ie(Pe)?Promise.resolve(Pe).then(function(ne){return ne instanceof HTMLCanvasElement?x.makeImage(ne.toDataURL()):ne.nodeName==="IFRAME"?html2canvas(ne.contentDocument.body).then(he=>he.toDataURL()).then(x.makeImage):ne.cloneNode(!1)}).then(function(ne){return function(he,ae){const T=he.childNodes;return T.length===0?Promise.resolve(ae):function(ue,ke){const Ce=ce(he);let Ve=Promise.resolve();return ke.forEach(function(K){Ve=Ve.then(function(){return we(K,Ie,!1,J,Ce)}).then(function(pe){pe&&ue.appendChild(pe)})}),Ve}(ae,x.asArray(T)).then(function(){return ae})}(Pe,ne)}).then(function(ne){return function(he,ae,T){return ae instanceof Element?Promise.resolve().then(function(){(function(ue,ke){const Ce=ce(ue);Ce.cssText?(ke.style.cssText=Ce.cssText,function(Ve,K){K.font=Ve.font,K.fontFamily=Ve.fontFamily,K.fontFeatureSettings=Ve.fontFeatureSettings,K.fontKerning=Ve.fontKerning,K.fontSize=Ve.fontSize,K.fontStretch=Ve.fontStretch,K.fontStyle=Ve.fontStyle,K.fontVariant=Ve.fontVariant,K.fontVariantCaps=Ve.fontVariantCaps,K.fontVariantEastAsian=Ve.fontVariantEastAsian,K.fontVariantLigatures=Ve.fontVariantLigatures,K.fontVariantNumeric=Ve.fontVariantNumeric,K.fontVariationSettings=Ve.fontVariationSettings,K.fontWeight=Ve.fontWeight}(Ce,ke.style)):(T?function(Ve,K,pe,ve){const ge=pe.style,Ue=Ve.style;for(var Qe of K){var Ke=K.getPropertyValue(Qe),Ge=Ue.getPropertyValue(Qe),Xe=(Ue.setProperty(Qe,ve?"initial":"unset"),K.getPropertyValue(Qe));Xe!==Ke?ge.setProperty(Qe,Ke):ge.removeProperty(Qe),Ue.setProperty(Qe,Ge)}}(ue,Ce,ke,A):function(Ve,K,pe){const ve=function(Ue){if(U[Ue])return U[Ue];$||(($=document.createElement("iframe")).style.visibility="hidden",$.style.position="fixed",document.body.appendChild($),$.contentWindow.document.write('<!DOCTYPE html><meta charset="UTF-8"><title>sandbox</title><body>'));const Qe=document.createElement(Ue),Ke=($.contentWindow.document.body.appendChild(Qe),Qe.textContent=".",$.contentWindow.getComputedStyle(Qe)),Ge={};return x.asArray(Ke).forEach(function(Xe){Ge[Xe]=Xe==="width"||Xe==="height"?"auto":Ke.getPropertyValue(Xe)}),$.contentWindow.document.body.removeChild(Qe),U[Ue]=Ge}(pe.tagName),ge=pe.style;x.asArray(Ve).forEach(function(Ue){var Qe=Ve.getPropertyValue(Ue);(Qe!==ve[Ue]||K&&Qe!==K.getPropertyValue(Ue))&&ge.setProperty(Ue,Qe,Ve.getPropertyPriority(Ue))})}(Ce,fe,ke),A&&(["inset-block","inset-block-start","inset-block-end"].forEach(Ve=>ke.style.removeProperty(Ve)),["left","right","top","bottom"].forEach(Ve=>{ke.style.getPropertyValue(Ve)&&ke.style.setProperty(Ve,"0px")})))})(he,ae)}).then(function(){[":before",":after"].forEach(function(ue){(function(ke){const Ce=ce(he,ke),Ve=Ce.getPropertyValue("content");if(Ve!==""&&Ve!=="none"){const K=x.uid(),pe=ae.getAttribute("class"),ve=(pe&&ae.setAttribute("class",pe+" "+K),document.createElement("style"));ve.appendChild(function(){const ge=`.${K}:`+ke,Ue=(Ce.cssText?function(){return`${Ce.cssText} content: ${Ce.getPropertyValue("content")};`}:function(){return x.asArray(Ce).map(function(Qe){return Qe+": "+Ce.getPropertyValue(Qe)+(Ce.getPropertyPriority(Qe)?" !important":"")}).join("; ")+";"})();return document.createTextNode(ge+`{${Ue}}`)}()),ae.appendChild(ve)}})(ue)})}).then(function(){he instanceof HTMLTextAreaElement&&(ae.innerHTML=he.value),he instanceof HTMLInputElement&&ae.setAttribute("value",he.value)}).then(function(){ae instanceof SVGElement&&(ae.setAttribute("xmlns","http://www.w3.org/2000/svg"),ae instanceof SVGRectElement&&["width","height"].forEach(function(ue){const ke=ae.getAttribute(ue);ke&&ae.style.setProperty(ue,ke)}))}).then(function(){return ae}):ae}(Pe,ne,J)}):Promise.resolve()}(re,q.filter,!0,!q.raster)}).then(Z).then(z).then(function(re){q.bgcolor&&(re.style.backgroundColor=q.bgcolor),q.width&&(re.style.width=q.width+"px"),q.height&&(re.style.height=q.height+"px"),q.style&&Object.keys(q.style).forEach(function(Pe){re.style[Pe]=q.style[Pe]});let we=null;return typeof q.onclone=="function"&&(we=q.onclone(re)),Promise.resolve(we).then(function(){return re})}).then(function(re){return re=re,we=q.width||x.width(W),Pe=q.height||x.height(W),Promise.resolve(re).then(function(Ie){return Ie.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(Ie)}).then(x.escapeXhtml).then(function(Ie){return`<foreignObject x="0" y="0" width="100%" height="100%">${Ie}</foreignObject>`}).then(function(Ie){return`<svg xmlns="http://www.w3.org/2000/svg" width="${we}" height="${Pe}">${Ie}</svg>`}).then(function(Ie){return"data:image/svg+xml;charset=utf-8,"+Ie});var we,Pe}).then(function(re){return le.impl.urlCache=[],re})}function R(W,q){return G(W,q).then(x.makeImage).then(x.delay(0)).then(function(ie){var re=typeof q.scale!="number"?1:q.scale;const we=function(Ie,A){const J=document.createElement("canvas");if(J.width=(q.width||x.width(Ie))*A,J.height=(q.height||x.height(Ie))*A,q.bgcolor){const fe=J.getContext("2d");fe.fillStyle=q.bgcolor,fe.fillRect(0,0,J.width,J.height)}return J}(W,re),Pe=we.getContext("2d");return Pe.mozImageSmoothingEnabled=!1,Pe.msImageSmoothingEnabled=!1,Pe.imageSmoothingEnabled=!1,ie&&(Pe.scale(re,re),Pe.drawImage(ie,0,0)),$&&(document.body.removeChild($),$=null,I&&clearTimeout(I),I=setTimeout(()=>{I=null,U={}},2e4)),we})}function Z(W){return N.resolveAll().then(function(q){const ie=document.createElement("style");return W.appendChild(ie),ie.appendChild(document.createTextNode(q)),W})}function z(W){return F.inlineAll(W).then(function(){return W})}let I=null,$=null,U={}})(r)}),o=i(function(d,g){(function(){function y(N,O,F){var Y=new XMLHttpRequest;Y.open("GET",N),Y.responseType="blob",Y.onload=function(){D(Y.response,O,F)},Y.onerror=function(){console.error("could not download file")},Y.send()}function x(N){var O=new XMLHttpRequest;O.open("HEAD",N,!1);try{O.send()}catch{}return 200<=O.status&&299>=O.status}function _(N){try{N.dispatchEvent(new MouseEvent("click"))}catch{var O=document.createEvent("MouseEvents");O.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),N.dispatchEvent(O)}}var M=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof r=="object"&&r.global===r?r:void 0,D=M.saveAs||(typeof window!="object"||window!==M?function(){}:"download"in HTMLAnchorElement.prototype?function(N,O,F){var Y=M.URL||M.webkitURL,Q=document.createElement("a");O=O||N.name||"download",Q.download=O,Q.rel="noopener",typeof N=="string"?(Q.href=N,Q.origin===location.origin?_(Q):x(Q.href)?y(N,O,F):_(Q,Q.target="_blank")):(Q.href=Y.createObjectURL(N),setTimeout(function(){Y.revokeObjectURL(Q.href)},4e4),setTimeout(function(){_(Q)},0))}:"msSaveOrOpenBlob"in navigator?function(N,O,F){if(O=O||N.name||"download",typeof N!="string")navigator.msSaveOrOpenBlob(function(Q,le){return le===void 0?le={autoBom:!1}:typeof le!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),le={autoBom:!le}),le.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(Q.type)?new Blob(["\uFEFF",Q],{type:Q.type}):Q}(N,F),O);else if(x(N))y(N,O,F);else{var Y=document.createElement("a");Y.href=N,Y.target="_blank",setTimeout(function(){_(Y)})}}:function(N,O,F,Y){if((Y=Y||open("","_blank"))&&(Y.document.title=Y.document.body.innerText="downloading..."),typeof N=="string")return y(N,O,F);var Q=N.type==="application/octet-stream",le=/constructor/i.test(M.HTMLElement)||M.safari,ce=/CriOS\/[\d]+/.test(navigator.userAgent);if((ce||Q&&le)&&typeof FileReader=="object"){var xe=new FileReader;xe.onloadend=function(){var Z=xe.result;Z=ce?Z:Z.replace(/^data:[^;]*;/,"data:attachment/file;"),Y?Y.location.href=Z:location=Z,Y=null},xe.readAsDataURL(N)}else{var G=M.URL||M.webkitURL,R=G.createObjectURL(N);Y?Y.location=R:location.href=R,Y=null,setTimeout(function(){G.revokeObjectURL(R)},4e4)}});M.saveAs=D.saveAs=D,d.exports=D})()}),u=L.Control.extend({options:{cropImageByInnerWH:!0,hidden:!1,domtoimageOptions:{},position:"topleft",screenName:"screen",iconUrl:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+",hideElementsWithSelectors:[".leaflet-control-container"],onCropBorderSize:2,caption:null,captionFontSize:15,captionFont:"Arial",captionColor:"black",captionBgColor:"white",captionOffset:5,mimeType:"image/png",debugMode:!1,preventDownload:!1,onPixelDataFail:function(d){var g=d.node,y=d.error;return console.warn("Map node is very big "+g.scrollWidth+"x"+g.scrollHeight),console.warn(`Add function: SimpleMapScreenshoter({
              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {
                 // Solutions:
                 // decrease size of map
                 // or decrease zoom level
                 // or remove elements with big distanses
                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap
                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)
              }
            })`),Promise.reject(y)}},onAdd:function(){return this._container=L.DomUtil.create("div","leaflet-control-simpleMapScreenshoter"),this._link=null,this._screenState={status:1,promise:null},this.options.hidden===!1&&this._addScreenBtn(),this._onUserStartInteractWithMap=this._onUserStartInteractWithMap.bind(this),this._onUserEndInteractWithMap=this._onUserEndInteractWithMap.bind(this),this._map.on("zoomstart",this._onUserStartInteractWithMap),this._map.on("move",this._onUserStartInteractWithMap),this._map.on("zoomend",this._onUserEndInteractWithMap),this._map.on("moveend",this._onUserEndInteractWithMap),this._container},takeScreen:function(){var d=this,g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"blob",y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},x={};for(var _ in this.options)y.hasOwnProperty(_)?x[_]=y[_]:x[_]=this.options[_];return this._screenState.status===2?this._screenState.promise:(this._map.fire("simpleMapScreenshoter.takeScreen"),this._screenState.status=2,this._setElementsVisible(!1),this._screenState.promise=this._waitEndOfInteractions().then(function(){return d._getPixelData(x)}).then(function(M){return d._setElementsVisible(!0),d._toCanvas(M,x)}).then(function(M){return g==="image"?d._canvasToImage(M,x):g==="canvas"?M:d._canvasToBlob(M,x)}).then(function(M){return d._screenState.status=1,d._map.fire("simpleMapScreenshoter.done"),M}).catch(function(M){return d._setElementsVisible(!0),d._screenState.status=1,d._map.fire("simpleMapScreenshoter.error",{e:M}),Promise.reject(M)}),this._screenState.promise)},_setElementsVisible:function(){var d=this,g=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.hideElementsWithSelectors.forEach(function(y){var x=d._map._container.querySelectorAll(y),_=!0,M=!1,D=void 0;try{for(var N,O=x[Symbol.iterator]();!(_=(N=O.next()).done);_=!0)N.value.style.opacity=g===!1?0:1}catch(F){M=!0,D=F}finally{try{!_&&O.return&&O.return()}finally{if(M)throw D}}})},_canvasToImage:function(d,g){var y=g.mimeType,x=d.toDataURL(y);return x.indexOf("base64")===-1?Promise.reject(new Error("Base64 image generation error")):Promise.resolve(x)},_canvasToBlob:function(d,g){var y=g.mimeType;return new Promise(function(x,_){d.toBlob(function(M){x(M)},y)})},_toCanvas:function(d,g){var y=g.captionOffset,x=g.caption,_=g.captionFontSize,M=g.captionFont,D=g.captionColor,N=g.captionBgColor,O=this._node,F=O.screenHeight,Y=O.screenWidth,Q=document.createElement("canvas");Q.width=Y,Q.height=F;for(var le=Q.getContext("2d"),ce=le.createImageData(Y,F),xe=0;xe<d.length;++xe)ce.data[xe]=d[xe];le.putImageData(ce,0,0),ce=null;var G=document.createElement("canvas"),R=G.getContext("2d"),Z=0,z=0,I=F,$=Y;if(this.options.cropImageByInnerWH===!0){for(var U=[],W=0,q=0;q<F;++q){W=0;for(var ie=0;ie<Y;++ie)d[4*q*Y+4*ie+4]===0&&W++;W===Y&&U.push(q)}var re=this._getMinAndMaxOnValuesBreak(U);Z=re.min;for(var we=Y,Pe=re.max,Ie=[],A=0,J=z;J<we;++J){A=0;for(var fe=0;fe<F;++fe)d[4*fe*Y+4*J+4]===0&&A++;A===F&&Ie.push(J)}var ne=this._getMinAndMaxOnValuesBreak(Ie);z=ne.min,we=ne.max,(z===0&&we===0||we===null)&&(we=Y),(Z===0&&Pe===0||Pe===null)&&(Pe=F),this.options.debugMode===!0&&(console.log("emptyYLine",U),console.log("minMaxY",re),console.log("emptyXLine",Ie),console.log("minMaxX",ne),console.log("debugX",{}),console.log("debugY",{})),Z===0&&Pe===F&&z===0&&we===Y||(Z+=this.options.onCropBorderSize,Pe-=this.options.onCropBorderSize,z+=this.options.onCropBorderSize,we-=this.options.onCropBorderSize),I=Pe-Z,$=we-z,G.width=$,G.height=I}else G.width=$,G.height=I;var he=null;return x&&(he=typeof x=="function"?x.call(this):x),he!==null&&(G.height=G.height+(y+_+y),R.beginPath(),R.rect(0,0,G.width,G.height),R.fillStyle=N,R.fill(),R.save()),R.drawImage(Q,z,Z,$,I,0,0,$,I),he!==null&&(R.font=_+"px "+M,R.fillStyle=D,R.fillText(he,y,I+y+_)),Promise.resolve(G)},_getMinAndMaxOnValuesBreak:function(d){for(var g=0,y=0,x=!1,_=1;_<d.length;_++){if(d[_]-1!==d[_-1]){y=d[_],x=!0;break}g=d[_]}return x===!1&&d[0]>1?(g=0,y=d[0]):x===!1&&(g=d[d.length-1]||0,y=null),{min:g,max:y}},_getPixelData:function(d){var g=this,y=d.domtoimageOptions,x=y===void 0?{}:y;return this._getPixelDataOfNormalMap(x).catch(function(_){return console.warn("May be map size very big on that zoom level, we have error:",_.toString()),console.warn("You can manually hide map elements with large distances between them for fix that warn"),g._getPixelDataOfBigMap(x)})},_getPixelDataOfNormalMap:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=this._map.getContainer();return this._node={node:g,screenHeight:g.scrollHeight,screenWidth:g.scrollWidth},s.toPixelData(g,d)},_getPixelDataOfBigMap:function(){var d=this,g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=this._map.getContainer(),x=this._map.getPane("mapPane");x.style.width=2*y.clientWidth+"px",x.style.height=2*y.clientHeight+"px",x.style.overflow="hidden";var _=function(){x.style.width="initial",x.style.height="initial",x.style.overflow="initial"};return this._node={node:y,screenHeight:y.scrollHeight,screenWidth:y.scrollWidth},s.toPixelData(y,g).then(function(M){return _(),M}).catch(function(M){return _(),y.scrollHeight>=4e3||y.scrollWidth>=4e3?d.options.onPixelDataFail({plugin:d,node:y,mapPane:x,error:M,domtoimageOptions:g}):Promise.reject(M)})},_addScreenBtn:function(){this._link=L.DomUtil.create("a","leaflet-control-simpleMapScreenshoter-btn",this._container),this._addCss(),L.DomEvent.addListener(this._link,"click",this._onScreenBtn,this),L.DomEvent.disableClickPropagation(this._link)},_addCss:function(){var d=`
    .leaflet-control-simpleMapScreenshoter{
       border: 2px solid rgba(0,0,0,0.2);
       background-clip: padding-box;
    }
    .leaflet-control-simpleMapScreenshoter a{
       background-color: #fff;
       border-bottom: 1px solid #ccc;
       width: 30px;
       height: 30px;
       line-height: 30px;
       display: block;
       text-align: center;
       text-decoration: none;
       color: black;
       overflow: hidden;
       border-radius: 2px;
       background-image: url('`+this.options.iconUrl+`');
       background-position: 46% 41%;
       background-repeat: no-repeat;
       background-size: 63%;
    }
    .leaflet-control-simpleMapScreenshoter a:hover{
       cursor: pointer;
    }
    `,g=document.head||document.getElementsByTagName("head")[0],y=document.createElement("style");y.appendChild(document.createTextNode(d)),g.appendChild(y)},_onScreenBtn:function(){var d=this;this._map.fire("simpleMapScreenshoter.click"),this.options.preventDownload||this.takeScreen().then(function(g){var y=typeof d.options.screenName=="function"?d.options.screenName.call(d):d.options.screenName;o.saveAs(g,y+".png")}).catch(function(g){d._map.fire("simpleMapScreenshoter.error",{e:g})})},_onUserStartInteractWithMap:function(){this._interaction=!0},_onUserEndInteractWithMap:function(){this._interaction=!1},_waitEndOfInteractions:function(){var d=this;return new Promise(function(g){var y=setInterval(function(){d._interaction||(g(),clearInterval(y))},100)})}}),f=(L.Control.SimpleMapScreenshoter=u,L.simpleMapScreenshoter=function(d){return new L.Control.SimpleMapScreenshoter(d)},u);t.default=f,t.SimpleMapScreenshoter=u,Object.defineProperty(t,"__esModule",{value:!0})})})(ab,ab.exports);var Qa=63710088e-1,ix={centimeters:Qa*100,centimetres:Qa*100,degrees:360/(2*Math.PI),feet:Qa*3.28084,inches:Qa*39.37,kilometers:Qa/1e3,kilometres:Qa/1e3,meters:Qa,metres:Qa,miles:Qa/1609.344,millimeters:Qa*1e3,millimetres:Qa*1e3,nauticalmiles:Qa/1852,radians:1,yards:Qa*1.0936};function sd(e,n,t={}){const r={type:"Feature"};return(t.id===0||t.id)&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.properties=n||{},r.geometry=e,r}function g0(e,n,t={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!lb(e[0])||!lb(e[1]))throw new Error("coordinates must contain numbers");return sd({type:"Point",coordinates:e},n,t)}function du(e,n,t={}){for(const i of e){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<i[i.length-1].length;s++)if(i[i.length-1][s]!==i[0][s])throw new Error("First and last Position are not equivalent.")}return sd({type:"Polygon",coordinates:e},n,t)}function pu(e,n,t={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return sd({type:"LineString",coordinates:e},n,t)}function LN(e,n={}){const t={type:"FeatureCollection"};return n.id&&(t.id=n.id),n.bbox&&(t.bbox=n.bbox),t.features=e,t}function SN(e,n,t={}){return sd({type:"MultiPolygon",coordinates:e},n,t)}function CN(e,n="kilometers"){const t=ix[n];if(!t)throw new Error(n+" units is invalid");return e*t}function EN(e,n="kilometers"){const t=ix[n];if(!t)throw new Error(n+" units is invalid");return e/t}function h1(e){return e%(2*Math.PI)*180/Math.PI}function zu(e){return e%360*Math.PI/180}function lb(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function ub(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function PN(e){return e.type==="Feature"?e.geometry:e}function ox(e,n,t={}){if(t.final===!0)return MN(e,n);const r=ub(e),i=ub(n),s=zu(r[0]),o=zu(i[0]),u=zu(r[1]),f=zu(i[1]),d=Math.sin(o-s)*Math.cos(f),g=Math.cos(u)*Math.sin(f)-Math.sin(u)*Math.cos(f)*Math.cos(o-s);return h1(Math.atan2(d,g))}function MN(e,n){let t=ox(n,e);return t=(t+180)%360,t}function AN(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function my(e,n,t,r={}){const i=AN(e),s=zu(i[0]),o=zu(i[1]),u=zu(t),f=EN(n,r.units),d=Math.asin(Math.sin(o)*Math.cos(f)+Math.cos(o)*Math.sin(f)*Math.cos(u)),g=s+Math.atan2(Math.sin(u)*Math.sin(f)*Math.cos(o),Math.cos(f)-Math.sin(o)*Math.sin(d)),y=h1(g),x=h1(d);return g0([y,x],r.properties)}var cb=my;function fb(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function vy(e,n,t={}){var r=fb(e),i=fb(n),s=zu(i[1]-r[1]),o=zu(i[0]-r[0]),u=zu(r[1]),f=zu(i[1]),d=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(u)*Math.cos(f);return CN(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)),t.units)}var ov=vy;function kN(e,n,t={}){const i=PN(e).coordinates;let s=0;for(let o=0;o<i.length&&!(n>=s&&o===i.length-1);o++)if(s>=n){const u=n-s;if(u){const f=ox(i[o],i[o-1])-180;return my(i[o],u,f,t)}else return g0(i[o])}else s+=vy(i[o],i[o+1],t);return g0(i[i.length-1])}var d1=kN;function TN(e,n){var t,r,i,s,o,u,f,d,g,y,x=0,_=e.type==="FeatureCollection",M=e.type==="Feature",D=_?e.features.length:1;for(t=0;t<D;t++){for(u=_?e.features[t].geometry:M?e.geometry:e,d=_?e.features[t].properties:M?e.properties:{},g=_?e.features[t].bbox:M?e.bbox:void 0,y=_?e.features[t].id:M?e.id:void 0,f=u?u.type==="GeometryCollection":!1,o=f?u.geometries.length:1,i=0;i<o;i++){if(s=f?u.geometries[i]:u,s===null){if(n(null,x,d,g,y)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(n(s,x,d,g,y)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(n(s.geometries[r],x,d,g,y)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}x++}}function DN(e,n,t){var r=t;return TN(e,function(i,s,o,u,f){s===0&&t===void 0?r=i:r=n(r,i,s,o,u,f)}),r}function sx(e){return DN(e,(n,t)=>n+NN(t),0)}function NN(e){let n=0,t;switch(e.type){case"Polygon":return hb(e.coordinates);case"MultiPolygon":for(t=0;t<e.coordinates.length;t++)n+=hb(e.coordinates[t]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function hb(e){let n=0;if(e&&e.length>0){n+=Math.abs(db(e[0]));for(let t=1;t<e.length;t++)n-=Math.abs(db(e[t]))}return n}var BN=Qa*Qa/2,sv=Math.PI/180;function db(e){const n=e.length-1;if(n<=2)return 0;let t=0,r=0;for(;r<n;){const i=e[r],s=e[r+1===n?0:r+1],o=e[r+2>=n?(r+2)%n:r+2],u=i[0]*sv,f=s[1]*sv,d=o[0]*sv;t+=(d-u)*Math.sin(f),r++}return t*BN}var rc=sx;function ax(e,n,t){if(e!==null)for(var r,i,s,o,u,f,d,g=0,y=0,x,_=e.type,M=_==="FeatureCollection",D=_==="Feature",N=M?e.features.length:1,O=0;O<N;O++){d=M?e.features[O].geometry:D?e.geometry:e,x=d?d.type==="GeometryCollection":!1,u=x?d.geometries.length:1;for(var F=0;F<u;F++){var Y=0,Q=0;if(o=x?d.geometries[F]:d,o!==null){f=o.coordinates;var le=o.type;switch(g=le==="Polygon"||le==="MultiPolygon"?1:0,le){case null:break;case"Point":if(n(f,y,O,Y,Q)===!1)return!1;y++,Y++;break;case"LineString":case"MultiPoint":for(r=0;r<f.length;r++){if(n(f[r],y,O,Y,Q)===!1)return!1;y++,le==="MultiPoint"&&Y++}le==="LineString"&&Y++;break;case"Polygon":case"MultiLineString":for(r=0;r<f.length;r++){for(i=0;i<f[r].length-g;i++){if(n(f[r][i],y,O,Y,Q)===!1)return!1;y++}le==="MultiLineString"&&Y++,le==="Polygon"&&Q++}le==="Polygon"&&Y++;break;case"MultiPolygon":for(r=0;r<f.length;r++){for(Q=0,i=0;i<f[r].length;i++){for(s=0;s<f[r][i].length-g;s++){if(n(f[r][i][s],y,O,Y,Q)===!1)return!1;y++}Q++}Y++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(ax(o.geometries[r],n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function ON(e,n={}){let t=0,r=0,i=0;return ax(e,function(s){t+=s[0],r+=s[1],i++}),g0([t/i,r/i],n.properties)}var rp=ON;function IN(e,n,t={}){const r=t.steps||64,i=t.properties?t.properties:!Array.isArray(e)&&e.type==="Feature"&&e.properties?e.properties:{},s=[];for(let o=0;o<r;o++)s.push(my(e,n,o*-360/r,t).geometry.coordinates);return s.push(s[0]),du([s],i)}var RN=IN,FN=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,av=Math.ceil,fu=Math.floor,xl="[BigNumber Error] ",pb=xl+"Number primitive has more than 15 significant digits: ",Tu=1e14,ni=14,gb=9007199254740991,lv=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],nf=1e7,Ul=1e9;function lx(e){var n,t,r,i=F.prototype={constructor:F,toString:null,valueOf:null},s=new F(1),o=20,u=4,f=-7,d=21,g=-1e7,y=1e7,x=!1,_=1,M=0,D={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},N="0123456789abcdefghijklmnopqrstuvwxyz",O=!0;function F(G,R){var Z,z,I,$,U,W,q,ie,re=this;if(!(re instanceof F))return new F(G,R);if(R==null){if(G&&G._isBigNumber===!0){re.s=G.s,!G.c||G.e>y?re.c=re.e=null:G.e<g?re.c=[re.e=0]:(re.e=G.e,re.c=G.c.slice());return}if((W=typeof G=="number")&&G*0==0){if(re.s=1/G<0?(G=-G,-1):1,G===~~G){for($=0,U=G;U>=10;U/=10,$++);$>y?re.c=re.e=null:(re.e=$,re.c=[G]);return}ie=String(G)}else{if(!FN.test(ie=String(G)))return r(re,ie,W);re.s=ie.charCodeAt(0)==45?(ie=ie.slice(1),-1):1}($=ie.indexOf("."))>-1&&(ie=ie.replace(".","")),(U=ie.search(/e/i))>0?($<0&&($=U),$+=+ie.slice(U+1),ie=ie.substring(0,U)):$<0&&($=ie.length)}else{if(Ko(R,2,N.length,"Base"),R==10&&O)return re=new F(G),ce(re,o+re.e+1,u);if(ie=String(G),W=typeof G=="number"){if(G*0!=0)return r(re,ie,W,R);if(re.s=1/G<0?(ie=ie.slice(1),-1):1,F.DEBUG&&ie.replace(/^0\.0*|\./,"").length>15)throw Error(pb+G)}else re.s=ie.charCodeAt(0)===45?(ie=ie.slice(1),-1):1;for(Z=N.slice(0,R),$=U=0,q=ie.length;U<q;U++)if(Z.indexOf(z=ie.charAt(U))<0){if(z=="."){if(U>$){$=q;continue}}else if(!I&&(ie==ie.toUpperCase()&&(ie=ie.toLowerCase())||ie==ie.toLowerCase()&&(ie=ie.toUpperCase()))){I=!0,U=-1,$=0;continue}return r(re,String(G),W,R)}W=!1,ie=t(ie,R,10,re.s),($=ie.indexOf("."))>-1?ie=ie.replace(".",""):$=ie.length}for(U=0;ie.charCodeAt(U)===48;U++);for(q=ie.length;ie.charCodeAt(--q)===48;);if(ie=ie.slice(U,++q)){if(q-=U,W&&F.DEBUG&&q>15&&(G>gb||G!==fu(G)))throw Error(pb+re.s*G);if(($=$-U-1)>y)re.c=re.e=null;else if($<g)re.c=[re.e=0];else{if(re.e=$,re.c=[],U=($+1)%ni,$<0&&(U+=ni),U<q){for(U&&re.c.push(+ie.slice(0,U)),q-=ni;U<q;)re.c.push(+ie.slice(U,U+=ni));U=ni-(ie=ie.slice(U)).length}else U-=q;for(;U--;ie+="0");re.c.push(+ie)}}else re.c=[re.e=0]}F.clone=lx,F.ROUND_UP=0,F.ROUND_DOWN=1,F.ROUND_CEIL=2,F.ROUND_FLOOR=3,F.ROUND_HALF_UP=4,F.ROUND_HALF_DOWN=5,F.ROUND_HALF_EVEN=6,F.ROUND_HALF_CEIL=7,F.ROUND_HALF_FLOOR=8,F.EUCLID=9,F.config=F.set=function(G){var R,Z;if(G!=null)if(typeof G=="object"){if(G.hasOwnProperty(R="DECIMAL_PLACES")&&(Z=G[R],Ko(Z,0,Ul,R),o=Z),G.hasOwnProperty(R="ROUNDING_MODE")&&(Z=G[R],Ko(Z,0,8,R),u=Z),G.hasOwnProperty(R="EXPONENTIAL_AT")&&(Z=G[R],Z&&Z.pop?(Ko(Z[0],-1e9,0,R),Ko(Z[1],0,Ul,R),f=Z[0],d=Z[1]):(Ko(Z,-1e9,Ul,R),f=-(d=Z<0?-Z:Z))),G.hasOwnProperty(R="RANGE"))if(Z=G[R],Z&&Z.pop)Ko(Z[0],-1e9,-1,R),Ko(Z[1],1,Ul,R),g=Z[0],y=Z[1];else if(Ko(Z,-1e9,Ul,R),Z)g=-(y=Z<0?-Z:Z);else throw Error(xl+R+" cannot be zero: "+Z);if(G.hasOwnProperty(R="CRYPTO"))if(Z=G[R],Z===!!Z)if(Z)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))x=Z;else throw x=!Z,Error(xl+"crypto unavailable");else x=Z;else throw Error(xl+R+" not true or false: "+Z);if(G.hasOwnProperty(R="MODULO_MODE")&&(Z=G[R],Ko(Z,0,9,R),_=Z),G.hasOwnProperty(R="POW_PRECISION")&&(Z=G[R],Ko(Z,0,Ul,R),M=Z),G.hasOwnProperty(R="FORMAT"))if(Z=G[R],typeof Z=="object")D=Z;else throw Error(xl+R+" not an object: "+Z);if(G.hasOwnProperty(R="ALPHABET"))if(Z=G[R],typeof Z=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(Z))O=Z.slice(0,10)=="0123456789",N=Z;else throw Error(xl+R+" invalid: "+Z)}else throw Error(xl+"Object expected: "+G);return{DECIMAL_PLACES:o,ROUNDING_MODE:u,EXPONENTIAL_AT:[f,d],RANGE:[g,y],CRYPTO:x,MODULO_MODE:_,POW_PRECISION:M,FORMAT:D,ALPHABET:N}},F.isBigNumber=function(G){if(!G||G._isBigNumber!==!0)return!1;if(!F.DEBUG)return!0;var R,Z,z=G.c,I=G.e,$=G.s;e:if({}.toString.call(z)=="[object Array]"){if(($===1||$===-1)&&I>=-1e9&&I<=Ul&&I===fu(I)){if(z[0]===0){if(I===0&&z.length===1)return!0;break e}if(R=(I+1)%ni,R<1&&(R+=ni),String(z[0]).length==R){for(R=0;R<z.length;R++)if(Z=z[R],Z<0||Z>=Tu||Z!==fu(Z))break e;if(Z!==0)return!0}}}else if(z===null&&I===null&&($===null||$===1||$===-1))return!0;throw Error(xl+"Invalid BigNumber: "+G)},F.maximum=F.max=function(){return Q(arguments,-1)},F.minimum=F.min=function(){return Q(arguments,1)},F.random=function(){var G=9007199254740992,R=Math.random()*G&2097151?function(){return fu(Math.random()*G)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(Z){var z,I,$,U,W,q=0,ie=[],re=new F(s);if(Z==null?Z=o:Ko(Z,0,Ul),U=av(Z/ni),x)if(crypto.getRandomValues){for(z=crypto.getRandomValues(new Uint32Array(U*=2));q<U;)W=z[q]*131072+(z[q+1]>>>11),W>=9e15?(I=crypto.getRandomValues(new Uint32Array(2)),z[q]=I[0],z[q+1]=I[1]):(ie.push(W%1e14),q+=2);q=U/2}else if(crypto.randomBytes){for(z=crypto.randomBytes(U*=7);q<U;)W=(z[q]&31)*281474976710656+z[q+1]*1099511627776+z[q+2]*4294967296+z[q+3]*16777216+(z[q+4]<<16)+(z[q+5]<<8)+z[q+6],W>=9e15?crypto.randomBytes(7).copy(z,q):(ie.push(W%1e14),q+=7);q=U/7}else throw x=!1,Error(xl+"crypto unavailable");if(!x)for(;q<U;)W=R(),W<9e15&&(ie[q++]=W%1e14);for(U=ie[--q],Z%=ni,U&&Z&&(W=lv[ni-Z],ie[q]=fu(U/W)*W);ie[q]===0;ie.pop(),q--);if(q<0)ie=[$=0];else{for($=-1;ie[0]===0;ie.splice(0,1),$-=ni);for(q=1,W=ie[0];W>=10;W/=10,q++);q<ni&&($-=ni-q)}return re.e=$,re.c=ie,re}}(),F.sum=function(){for(var G=1,R=arguments,Z=new F(R[0]);G<R.length;)Z=Z.plus(R[G++]);return Z},t=function(){var G="0123456789";function R(Z,z,I,$){for(var U,W=[0],q,ie=0,re=Z.length;ie<re;){for(q=W.length;q--;W[q]*=z);for(W[0]+=$.indexOf(Z.charAt(ie++)),U=0;U<W.length;U++)W[U]>I-1&&(W[U+1]==null&&(W[U+1]=0),W[U+1]+=W[U]/I|0,W[U]%=I)}return W.reverse()}return function(Z,z,I,$,U){var W,q,ie,re,we,Pe,Ie,A,J=Z.indexOf("."),fe=o,ne=u;for(J>=0&&(re=M,M=0,Z=Z.replace(".",""),A=new F(z),Pe=A.pow(Z.length-J),M=re,A.c=R(Bc(uu(Pe.c),Pe.e,"0"),10,I,G),A.e=A.c.length),Ie=R(Z,z,I,U?(W=N,G):(W=G,N)),ie=re=Ie.length;Ie[--re]==0;Ie.pop());if(!Ie[0])return W.charAt(0);if(J<0?--ie:(Pe.c=Ie,Pe.e=ie,Pe.s=$,Pe=n(Pe,A,fe,ne,I),Ie=Pe.c,we=Pe.r,ie=Pe.e),q=ie+fe+1,J=Ie[q],re=I/2,we=we||q<0||Ie[q+1]!=null,we=ne<4?(J!=null||we)&&(ne==0||ne==(Pe.s<0?3:2)):J>re||J==re&&(ne==4||we||ne==6&&Ie[q-1]&1||ne==(Pe.s<0?8:7)),q<1||!Ie[0])Z=we?Bc(W.charAt(1),-fe,W.charAt(0)):W.charAt(0);else{if(Ie.length=q,we)for(--I;++Ie[--q]>I;)Ie[q]=0,q||(++ie,Ie=[1].concat(Ie));for(re=Ie.length;!Ie[--re];);for(J=0,Z="";J<=re;Z+=W.charAt(Ie[J++]));Z=Bc(Z,ie,W.charAt(0))}return Z}}(),n=function(){function G(z,I,$){var U,W,q,ie,re=0,we=z.length,Pe=I%nf,Ie=I/nf|0;for(z=z.slice();we--;)q=z[we]%nf,ie=z[we]/nf|0,U=Ie*q+ie*Pe,W=Pe*q+U%nf*nf+re,re=(W/$|0)+(U/nf|0)+Ie*ie,z[we]=W%$;return re&&(z=[re].concat(z)),z}function R(z,I,$,U){var W,q;if($!=U)q=$>U?1:-1;else for(W=q=0;W<$;W++)if(z[W]!=I[W]){q=z[W]>I[W]?1:-1;break}return q}function Z(z,I,$,U){for(var W=0;$--;)z[$]-=W,W=z[$]<I[$]?1:0,z[$]=W*U+z[$]-I[$];for(;!z[0]&&z.length>1;z.splice(0,1));}return function(z,I,$,U,W){var q,ie,re,we,Pe,Ie,A,J,fe,ne,he,ae,T,ue,ke,Ce,Ve,K=z.s==I.s?1:-1,pe=z.c,ve=I.c;if(!pe||!pe[0]||!ve||!ve[0])return new F(!z.s||!I.s||(pe?ve&&pe[0]==ve[0]:!ve)?NaN:pe&&pe[0]==0||!ve?K*0:K/0);for(J=new F(K),fe=J.c=[],ie=z.e-I.e,K=$+ie+1,W||(W=Tu,ie=hu(z.e/ni)-hu(I.e/ni),K=K/ni|0),re=0;ve[re]==(pe[re]||0);re++);if(ve[re]>(pe[re]||0)&&ie--,K<0)fe.push(1),we=!0;else{for(ue=pe.length,Ce=ve.length,re=0,K+=2,Pe=fu(W/(ve[0]+1)),Pe>1&&(ve=G(ve,Pe,W),pe=G(pe,Pe,W),Ce=ve.length,ue=pe.length),T=Ce,ne=pe.slice(0,Ce),he=ne.length;he<Ce;ne[he++]=0);Ve=ve.slice(),Ve=[0].concat(Ve),ke=ve[0],ve[1]>=W/2&&ke++;do{if(Pe=0,q=R(ve,ne,Ce,he),q<0){if(ae=ne[0],Ce!=he&&(ae=ae*W+(ne[1]||0)),Pe=fu(ae/ke),Pe>1)for(Pe>=W&&(Pe=W-1),Ie=G(ve,Pe,W),A=Ie.length,he=ne.length;R(Ie,ne,A,he)==1;)Pe--,Z(Ie,Ce<A?Ve:ve,A,W),A=Ie.length,q=1;else Pe==0&&(q=Pe=1),Ie=ve.slice(),A=Ie.length;if(A<he&&(Ie=[0].concat(Ie)),Z(ne,Ie,he,W),he=ne.length,q==-1)for(;R(ve,ne,Ce,he)<1;)Pe++,Z(ne,Ce<he?Ve:ve,he,W),he=ne.length}else q===0&&(Pe++,ne=[0]);fe[re++]=Pe,ne[0]?ne[he++]=pe[T]||0:(ne=[pe[T]],he=1)}while((T++<ue||ne[0]!=null)&&K--);we=ne[0]!=null,fe[0]||fe.splice(0,1)}if(W==Tu){for(re=1,K=fe[0];K>=10;K/=10,re++);ce(J,$+(J.e=re+ie*ni-1)+1,U,we)}else J.e=ie,J.r=+we;return J}}();function Y(G,R,Z,z){var I,$,U,W,q;if(Z==null?Z=u:Ko(Z,0,8),!G.c)return G.toString();if(I=G.c[0],U=G.e,R==null)q=uu(G.c),q=z==1||z==2&&(U<=f||U>=d)?yg(q,U):Bc(q,U,"0");else if(G=ce(new F(G),R,Z),$=G.e,q=uu(G.c),W=q.length,z==1||z==2&&(R<=$||$<=f)){for(;W<R;q+="0",W++);q=yg(q,$)}else if(R-=U,q=Bc(q,$,"0"),$+1>W){if(--R>0)for(q+=".";R--;q+="0");}else if(R+=$-W,R>0)for($+1==W&&(q+=".");R--;q+="0");return G.s<0&&I?"-"+q:q}function Q(G,R){for(var Z,z,I=1,$=new F(G[0]);I<G.length;I++)z=new F(G[I]),(!z.s||(Z=$f($,z))===R||Z===0&&$.s===R)&&($=z);return $}function le(G,R,Z){for(var z=1,I=R.length;!R[--I];R.pop());for(I=R[0];I>=10;I/=10,z++);return(Z=z+Z*ni-1)>y?G.c=G.e=null:Z<g?G.c=[G.e=0]:(G.e=Z,G.c=R),G}r=function(){var G=/^(-?)0([xbo])(?=\w[\w.]*$)/i,R=/^([^.]+)\.$/,Z=/^\.([^.]+)$/,z=/^-?(Infinity|NaN)$/,I=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function($,U,W,q){var ie,re=W?U:U.replace(I,"");if(z.test(re))$.s=isNaN(re)?null:re<0?-1:1;else{if(!W&&(re=re.replace(G,function(we,Pe,Ie){return ie=(Ie=Ie.toLowerCase())=="x"?16:Ie=="b"?2:8,!q||q==ie?Pe:we}),q&&(ie=q,re=re.replace(R,"$1").replace(Z,"0.$1")),U!=re))return new F(re,ie);if(F.DEBUG)throw Error(xl+"Not a"+(q?" base "+q:"")+" number: "+U);$.s=null}$.c=$.e=null}}();function ce(G,R,Z,z){var I,$,U,W,q,ie,re,we=G.c,Pe=lv;if(we){e:{for(I=1,W=we[0];W>=10;W/=10,I++);if($=R-I,$<0)$+=ni,U=R,q=we[ie=0],re=fu(q/Pe[I-U-1]%10);else if(ie=av(($+1)/ni),ie>=we.length)if(z){for(;we.length<=ie;we.push(0));q=re=0,I=1,$%=ni,U=$-ni+1}else break e;else{for(q=W=we[ie],I=1;W>=10;W/=10,I++);$%=ni,U=$-ni+I,re=U<0?0:fu(q/Pe[I-U-1]%10)}if(z=z||R<0||we[ie+1]!=null||(U<0?q:q%Pe[I-U-1]),z=Z<4?(re||z)&&(Z==0||Z==(G.s<0?3:2)):re>5||re==5&&(Z==4||z||Z==6&&($>0?U>0?q/Pe[I-U]:0:we[ie-1])%10&1||Z==(G.s<0?8:7)),R<1||!we[0])return we.length=0,z?(R-=G.e+1,we[0]=Pe[(ni-R%ni)%ni],G.e=-R||0):we[0]=G.e=0,G;if($==0?(we.length=ie,W=1,ie--):(we.length=ie+1,W=Pe[ni-$],we[ie]=U>0?fu(q/Pe[I-U]%Pe[U])*W:0),z)for(;;)if(ie==0){for($=1,U=we[0];U>=10;U/=10,$++);for(U=we[0]+=W,W=1;U>=10;U/=10,W++);$!=W&&(G.e++,we[0]==Tu&&(we[0]=1));break}else{if(we[ie]+=W,we[ie]!=Tu)break;we[ie--]=0,W=1}for($=we.length;we[--$]===0;we.pop());}G.e>y?G.c=G.e=null:G.e<g&&(G.c=[G.e=0])}return G}function xe(G){var R,Z=G.e;return Z===null?G.toString():(R=uu(G.c),R=Z<=f||Z>=d?yg(R,Z):Bc(R,Z,"0"),G.s<0?"-"+R:R)}return i.absoluteValue=i.abs=function(){var G=new F(this);return G.s<0&&(G.s=1),G},i.comparedTo=function(G,R){return $f(this,new F(G,R))},i.decimalPlaces=i.dp=function(G,R){var Z,z,I,$=this;if(G!=null)return Ko(G,0,Ul),R==null?R=u:Ko(R,0,8),ce(new F($),G+$.e+1,R);if(!(Z=$.c))return null;if(z=((I=Z.length-1)-hu(this.e/ni))*ni,I=Z[I])for(;I%10==0;I/=10,z--);return z<0&&(z=0),z},i.dividedBy=i.div=function(G,R){return n(this,new F(G,R),o,u)},i.dividedToIntegerBy=i.idiv=function(G,R){return n(this,new F(G,R),0,1)},i.exponentiatedBy=i.pow=function(G,R){var Z,z,I,$,U,W,q,ie,re,we=this;if(G=new F(G),G.c&&!G.isInteger())throw Error(xl+"Exponent not an integer: "+xe(G));if(R!=null&&(R=new F(R)),W=G.e>14,!we.c||!we.c[0]||we.c[0]==1&&!we.e&&we.c.length==1||!G.c||!G.c[0])return re=new F(Math.pow(+xe(we),W?G.s*(2-vg(G)):+xe(G))),R?re.mod(R):re;if(q=G.s<0,R){if(R.c?!R.c[0]:!R.s)return new F(NaN);z=!q&&we.isInteger()&&R.isInteger(),z&&(we=we.mod(R))}else{if(G.e>9&&(we.e>0||we.e<-1||(we.e==0?we.c[0]>1||W&&we.c[1]>=24e7:we.c[0]<8e13||W&&we.c[0]<=9999975e7)))return $=we.s<0&&vg(G)?-0:0,we.e>-1&&($=1/$),new F(q?1/$:$);M&&($=av(M/ni+2))}for(W?(Z=new F(.5),q&&(G.s=1),ie=vg(G)):(I=Math.abs(+xe(G)),ie=I%2),re=new F(s);;){if(ie){if(re=re.times(we),!re.c)break;$?re.c.length>$&&(re.c.length=$):z&&(re=re.mod(R))}if(I){if(I=fu(I/2),I===0)break;ie=I%2}else if(G=G.times(Z),ce(G,G.e+1,1),G.e>14)ie=vg(G);else{if(I=+xe(G),I===0)break;ie=I%2}we=we.times(we),$?we.c&&we.c.length>$&&(we.c.length=$):z&&(we=we.mod(R))}return z?re:(q&&(re=s.div(re)),R?re.mod(R):$?ce(re,M,u,U):re)},i.integerValue=function(G){var R=new F(this);return G==null?G=u:Ko(G,0,8),ce(R,R.e+1,G)},i.isEqualTo=i.eq=function(G,R){return $f(this,new F(G,R))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(G,R){return $f(this,new F(G,R))>0},i.isGreaterThanOrEqualTo=i.gte=function(G,R){return(R=$f(this,new F(G,R)))===1||R===0},i.isInteger=function(){return!!this.c&&hu(this.e/ni)>this.c.length-2},i.isLessThan=i.lt=function(G,R){return $f(this,new F(G,R))<0},i.isLessThanOrEqualTo=i.lte=function(G,R){return(R=$f(this,new F(G,R)))===-1||R===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(G,R){var Z,z,I,$,U=this,W=U.s;if(G=new F(G,R),R=G.s,!W||!R)return new F(NaN);if(W!=R)return G.s=-R,U.plus(G);var q=U.e/ni,ie=G.e/ni,re=U.c,we=G.c;if(!q||!ie){if(!re||!we)return re?(G.s=-R,G):new F(we?U:NaN);if(!re[0]||!we[0])return we[0]?(G.s=-R,G):new F(re[0]?U:u==3?-0:0)}if(q=hu(q),ie=hu(ie),re=re.slice(),W=q-ie){for(($=W<0)?(W=-W,I=re):(ie=q,I=we),I.reverse(),R=W;R--;I.push(0));I.reverse()}else for(z=($=(W=re.length)<(R=we.length))?W:R,W=R=0;R<z;R++)if(re[R]!=we[R]){$=re[R]<we[R];break}if($&&(I=re,re=we,we=I,G.s=-G.s),R=(z=we.length)-(Z=re.length),R>0)for(;R--;re[Z++]=0);for(R=Tu-1;z>W;){if(re[--z]<we[z]){for(Z=z;Z&&!re[--Z];re[Z]=R);--re[Z],re[z]+=Tu}re[z]-=we[z]}for(;re[0]==0;re.splice(0,1),--ie);return re[0]?le(G,re,ie):(G.s=u==3?-1:1,G.c=[G.e=0],G)},i.modulo=i.mod=function(G,R){var Z,z,I=this;return G=new F(G,R),!I.c||!G.s||G.c&&!G.c[0]?new F(NaN):!G.c||I.c&&!I.c[0]?new F(I):(_==9?(z=G.s,G.s=1,Z=n(I,G,0,3),G.s=z,Z.s*=z):Z=n(I,G,0,_),G=I.minus(Z.times(G)),!G.c[0]&&_==1&&(G.s=I.s),G)},i.multipliedBy=i.times=function(G,R){var Z,z,I,$,U,W,q,ie,re,we,Pe,Ie,A,J,fe,ne=this,he=ne.c,ae=(G=new F(G,R)).c;if(!he||!ae||!he[0]||!ae[0])return!ne.s||!G.s||he&&!he[0]&&!ae||ae&&!ae[0]&&!he?G.c=G.e=G.s=null:(G.s*=ne.s,!he||!ae?G.c=G.e=null:(G.c=[0],G.e=0)),G;for(z=hu(ne.e/ni)+hu(G.e/ni),G.s*=ne.s,q=he.length,we=ae.length,q<we&&(A=he,he=ae,ae=A,I=q,q=we,we=I),I=q+we,A=[];I--;A.push(0));for(J=Tu,fe=nf,I=we;--I>=0;){for(Z=0,Pe=ae[I]%fe,Ie=ae[I]/fe|0,U=q,$=I+U;$>I;)ie=he[--U]%fe,re=he[U]/fe|0,W=Ie*ie+re*Pe,ie=Pe*ie+W%fe*fe+A[$]+Z,Z=(ie/J|0)+(W/fe|0)+Ie*re,A[$--]=ie%J;A[$]=Z}return Z?++z:A.splice(0,1),le(G,A,z)},i.negated=function(){var G=new F(this);return G.s=-G.s||null,G},i.plus=function(G,R){var Z,z=this,I=z.s;if(G=new F(G,R),R=G.s,!I||!R)return new F(NaN);if(I!=R)return G.s=-R,z.minus(G);var $=z.e/ni,U=G.e/ni,W=z.c,q=G.c;if(!$||!U){if(!W||!q)return new F(I/0);if(!W[0]||!q[0])return q[0]?G:new F(W[0]?z:I*0)}if($=hu($),U=hu(U),W=W.slice(),I=$-U){for(I>0?(U=$,Z=q):(I=-I,Z=W),Z.reverse();I--;Z.push(0));Z.reverse()}for(I=W.length,R=q.length,I-R<0&&(Z=q,q=W,W=Z,R=I),I=0;R;)I=(W[--R]=W[R]+q[R]+I)/Tu|0,W[R]=Tu===W[R]?0:W[R]%Tu;return I&&(W=[I].concat(W),++U),le(G,W,U)},i.precision=i.sd=function(G,R){var Z,z,I,$=this;if(G!=null&&G!==!!G)return Ko(G,1,Ul),R==null?R=u:Ko(R,0,8),ce(new F($),G,R);if(!(Z=$.c))return null;if(I=Z.length-1,z=I*ni+1,I=Z[I]){for(;I%10==0;I/=10,z--);for(I=Z[0];I>=10;I/=10,z++);}return G&&$.e+1>z&&(z=$.e+1),z},i.shiftedBy=function(G){return Ko(G,-9007199254740991,gb),this.times("1e"+G)},i.squareRoot=i.sqrt=function(){var G,R,Z,z,I,$=this,U=$.c,W=$.s,q=$.e,ie=o+4,re=new F("0.5");if(W!==1||!U||!U[0])return new F(!W||W<0&&(!U||U[0])?NaN:U?$:1/0);if(W=Math.sqrt(+xe($)),W==0||W==1/0?(R=uu(U),(R.length+q)%2==0&&(R+="0"),W=Math.sqrt(+R),q=hu((q+1)/2)-(q<0||q%2),W==1/0?R="5e"+q:(R=W.toExponential(),R=R.slice(0,R.indexOf("e")+1)+q),Z=new F(R)):Z=new F(W+""),Z.c[0]){for(q=Z.e,W=q+ie,W<3&&(W=0);;)if(I=Z,Z=re.times(I.plus(n($,I,ie,1))),uu(I.c).slice(0,W)===(R=uu(Z.c)).slice(0,W))if(Z.e<q&&--W,R=R.slice(W-3,W+1),R=="9999"||!z&&R=="4999"){if(!z&&(ce(I,I.e+o+2,0),I.times(I).eq($))){Z=I;break}ie+=4,W+=4,z=1}else{(!+R||!+R.slice(1)&&R.charAt(0)=="5")&&(ce(Z,Z.e+o+2,1),G=!Z.times(Z).eq($));break}}return ce(Z,Z.e+o+1,u,G)},i.toExponential=function(G,R){return G!=null&&(Ko(G,0,Ul),G++),Y(this,G,R,1)},i.toFixed=function(G,R){return G!=null&&(Ko(G,0,Ul),G=G+this.e+1),Y(this,G,R)},i.toFormat=function(G,R,Z){var z,I=this;if(Z==null)G!=null&&R&&typeof R=="object"?(Z=R,R=null):G&&typeof G=="object"?(Z=G,G=R=null):Z=D;else if(typeof Z!="object")throw Error(xl+"Argument not an object: "+Z);if(z=I.toFixed(G,R),I.c){var $,U=z.split("."),W=+Z.groupSize,q=+Z.secondaryGroupSize,ie=Z.groupSeparator||"",re=U[0],we=U[1],Pe=I.s<0,Ie=Pe?re.slice(1):re,A=Ie.length;if(q&&($=W,W=q,q=$,A-=$),W>0&&A>0){for($=A%W||W,re=Ie.substr(0,$);$<A;$+=W)re+=ie+Ie.substr($,W);q>0&&(re+=ie+Ie.slice($)),Pe&&(re="-"+re)}z=we?re+(Z.decimalSeparator||"")+((q=+Z.fractionGroupSize)?we.replace(new RegExp("\\d{"+q+"}\\B","g"),"$&"+(Z.fractionGroupSeparator||"")):we):re}return(Z.prefix||"")+z+(Z.suffix||"")},i.toFraction=function(G){var R,Z,z,I,$,U,W,q,ie,re,we,Pe,Ie=this,A=Ie.c;if(G!=null&&(W=new F(G),!W.isInteger()&&(W.c||W.s!==1)||W.lt(s)))throw Error(xl+"Argument "+(W.isInteger()?"out of range: ":"not an integer: ")+xe(W));if(!A)return new F(Ie);for(R=new F(s),ie=Z=new F(s),z=q=new F(s),Pe=uu(A),$=R.e=Pe.length-Ie.e-1,R.c[0]=lv[(U=$%ni)<0?ni+U:U],G=!G||W.comparedTo(R)>0?$>0?R:ie:W,U=y,y=1/0,W=new F(Pe),q.c[0]=0;re=n(W,R,0,1),I=Z.plus(re.times(z)),I.comparedTo(G)!=1;)Z=z,z=I,ie=q.plus(re.times(I=ie)),q=I,R=W.minus(re.times(I=R)),W=I;return I=n(G.minus(Z),z,0,1),q=q.plus(I.times(ie)),Z=Z.plus(I.times(z)),q.s=ie.s=Ie.s,$=$*2,we=n(ie,z,$,u).minus(Ie).abs().comparedTo(n(q,Z,$,u).minus(Ie).abs())<1?[ie,z]:[q,Z],y=U,we},i.toNumber=function(){return+xe(this)},i.toPrecision=function(G,R){return G!=null&&Ko(G,1,Ul),Y(this,G,R,2)},i.toString=function(G){var R,Z=this,z=Z.s,I=Z.e;return I===null?z?(R="Infinity",z<0&&(R="-"+R)):R="NaN":(G==null?R=I<=f||I>=d?yg(uu(Z.c),I):Bc(uu(Z.c),I,"0"):G===10&&O?(Z=ce(new F(Z),o+I+1,u),R=Bc(uu(Z.c),Z.e,"0")):(Ko(G,2,N.length,"Base"),R=t(Bc(uu(Z.c),I,"0"),10,G,z,!0)),z<0&&Z.c[0]&&(R="-"+R)),R},i.valueOf=i.toJSON=function(){return xe(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,e!=null&&F.set(e),F}function hu(e){var n=e|0;return e>0||e===n?n:n-1}function uu(e){for(var n,t,r=1,i=e.length,s=e[0]+"";r<i;){for(n=e[r++]+"",t=ni-n.length;t--;n="0"+n);s+=n}for(i=s.length;s.charCodeAt(--i)===48;);return s.slice(0,i+1||1)}function $f(e,n){var t,r,i=e.c,s=n.c,o=e.s,u=n.s,f=e.e,d=n.e;if(!o||!u)return null;if(t=i&&!i[0],r=s&&!s[0],t||r)return t?r?0:-u:o;if(o!=u)return o;if(t=o<0,r=f==d,!i||!s)return r?0:!i^t?1:-1;if(!r)return f>d^t?1:-1;for(u=(f=i.length)<(d=s.length)?f:d,o=0;o<u;o++)if(i[o]!=s[o])return i[o]>s[o]^t?1:-1;return f==d?0:f>d^t?1:-1}function Ko(e,n,t,r){if(e<n||e>t||e!==fu(e))throw Error(xl+(r||"Argument")+(typeof e=="number"?e<n||e>t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function vg(e){var n=e.c.length-1;return hu(e.e/ni)==n&&e.c[n]%2!=0}function yg(e,n){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(n<0?"e":"e+")+n}function Bc(e,n,t){var r,i;if(n<0){for(i=t+".";++n;i+=t);e=i+e}else if(r=e.length,++n>r){for(i=t,n-=r;--n;i+=t);e+=i}else n<r&&(e=e.slice(0,n)+"."+e.slice(n));return e}var cc=lx(),jN=class{constructor(e){Ht(this,"key");Ht(this,"left",null);Ht(this,"right",null);this.key=e}},Ad=class extends jN{constructor(e){super(e)}},zN=class{constructor(){Ht(this,"size",0);Ht(this,"modificationCount",0);Ht(this,"splayCount",0)}splay(e){const n=this.root;if(n==null)return this.compare(e,e),-1;let t=null,r=null,i=null,s=null,o=n;const u=this.compare;let f;for(;;)if(f=u(o.key,e),f>0){let d=o.left;if(d==null||(f=u(d.key,e),f>0&&(o.left=d.right,d.right=o,o=d,d=o.left,d==null)))break;t==null?r=o:t.left=o,t=o,o=d}else if(f<0){let d=o.right;if(d==null||(f=u(d.key,e),f<0&&(o.right=d.left,d.left=o,o=d,d=o.right,d==null)))break;i==null?s=o:i.right=o,i=o,o=d}else break;return i!=null&&(i.right=o.left,o.left=s),t!=null&&(t.left=o.right,o.right=r),this.root!==o&&(this.root=o,this.splayCount++),f}splayMin(e){let n=e,t=n.left;for(;t!=null;){const r=t;n.left=r.right,r.right=n,n=r,t=n.left}return n}splayMax(e){let n=e,t=n.right;for(;t!=null;){const r=t;n.right=r.left,r.left=n,n=r,t=n.right}return n}_delete(e){if(this.root==null||this.splay(e)!=0)return null;let t=this.root;const r=t,i=t.left;if(this.size--,i==null)this.root=t.right;else{const s=t.right;t=this.splayMax(i),t.right=s,this.root=t}return this.modificationCount++,r}addNewRoot(e,n){this.size++,this.modificationCount++;const t=this.root;if(t==null){this.root=e;return}n<0?(e.left=t,e.right=t.right,t.right=null):(e.right=t,e.left=t.left,t.left=null),this.root=e}_first(){const e=this.root;return e==null?null:(this.root=this.splayMin(e),this.root)}_last(){const e=this.root;return e==null?null:(this.root=this.splayMax(e),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(e){return this.validKey(e)&&this.splay(e)==0}defaultCompare(){return(e,n)=>e<n?-1:e>n?1:0}wrap(){return{getRoot:()=>this.root,setRoot:e=>{this.root=e},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:e=>{this.splayCount=e},splay:e=>this.splay(e),has:e=>this.has(e)}}},rw,iw,m0=class jd extends zN{constructor(t,r){super();Ht(this,"root",null);Ht(this,"compare");Ht(this,"validKey");Ht(this,rw,"[object Set]");this.compare=t??this.defaultCompare(),this.validKey=r??(i=>i!=null&&i!=null)}delete(t){return this.validKey(t)?this._delete(t)!=null:!1}deleteAll(t){for(const r of t)this.delete(r)}forEach(t){const r=this[Symbol.iterator]();let i;for(;i=r.next(),!i.done;)t(i.value,i.value,this)}add(t){const r=this.splay(t);return r!=0&&this.addNewRoot(new Ad(t),r),this}addAndReturn(t){const r=this.splay(t);return r!=0&&this.addNewRoot(new Ad(t),r),this.root.key}addAll(t){for(const r of t)this.add(r)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(t){if(t==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(t)<0)return this.root.key;let i=this.root.left;if(i==null)return null;let s=i.right;for(;s!=null;)i=s,s=i.right;return i.key}firstAfter(t){if(t==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(t)>0)return this.root.key;let i=this.root.right;if(i==null)return null;let s=i.left;for(;s!=null;)i=s,s=i.left;return i.key}retainAll(t){const r=new jd(this.compare,this.validKey),i=this.modificationCount;for(const s of t){if(i!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(s)&&this.splay(s)==0&&r.add(this.root.key)}r.size!=this.size&&(this.root=r.root,this.size=r.size,this.modificationCount++)}lookup(t){return!this.validKey(t)||this.splay(t)!=0?null:this.root.key}intersection(t){const r=new jd(this.compare,this.validKey);for(const i of this)t.has(i)&&r.add(i);return r}difference(t){const r=new jd(this.compare,this.validKey);for(const i of this)t.has(i)||r.add(i);return r}union(t){const r=this.clone();return r.addAll(t),r}clone(){const t=new jd(this.compare,this.validKey);return t.size=this.size,t.root=this.copyNode(this.root),t}copyNode(t){if(t==null)return null;function r(s,o){let u,f;do{if(u=s.left,f=s.right,u!=null){const d=new Ad(u.key);o.left=d,r(u,d)}if(f!=null){const d=new Ad(f.key);o.right=d,s=f,o=d}}while(f!=null)}const i=new Ad(t.key);return r(t,i),i}toSet(){return this.clone()}entries(){return new UN(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(iw=Symbol.iterator,rw=Symbol.toStringTag,iw)](){return new $N(this.wrap())}},ux=class{constructor(e){Ht(this,"tree");Ht(this,"path",new Array);Ht(this,"modificationCount",null);Ht(this,"splayCount");this.tree=e,this.splayCount=e.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;const e=this.path[this.path.length-1];return this.getValue(e)}rebuildPath(e){this.path.splice(0,this.path.length),this.tree.splay(e),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(e){for(;e!=null;)this.path.push(e),e=e.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let t=this.tree.getRoot();for(;t!=null;)this.path.push(t),t=t.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let e=this.path[this.path.length-1],n=e.right;if(n!=null){for(;n!=null;)this.path.push(n),n=n.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===e;)e=this.path.pop();return this.path.length>0}},$N=class extends ux{getValue(e){return e.key}},UN=class extends ux{getValue(e){return[e.key,e.key]}},cx=e=>()=>e,p1=e=>{const n=e?(t,r)=>r.minus(t).abs().isLessThanOrEqualTo(e):cx(!1);return(t,r)=>n(t,r)?0:t.comparedTo(r)};function VN(e){const n=e?(t,r,i,s,o)=>t.exponentiatedBy(2).isLessThanOrEqualTo(s.minus(r).exponentiatedBy(2).plus(o.minus(i).exponentiatedBy(2)).times(e)):cx(!1);return(t,r,i)=>{const s=t.x,o=t.y,u=i.x,f=i.y,d=o.minus(f).times(r.x.minus(u)).minus(s.minus(u).times(r.y.minus(f)));return n(d,s,o,u,f)?0:d.comparedTo(0)}}var HN=e=>e,GN=e=>{if(e){const n=new m0(p1(e)),t=new m0(p1(e)),r=(s,o)=>o.addAndReturn(s),i=s=>({x:r(s.x,n),y:r(s.y,t)});return i({x:new cc(0),y:new cc(0)}),i}return HN},g1=e=>({set:n=>{Hc=g1(n)},reset:()=>g1(e),compare:p1(e),snap:GN(e),orient:VN(e)}),Hc=g1(),kd=(e,n)=>e.ll.x.isLessThanOrEqualTo(n.x)&&n.x.isLessThanOrEqualTo(e.ur.x)&&e.ll.y.isLessThanOrEqualTo(n.y)&&n.y.isLessThanOrEqualTo(e.ur.y),m1=(e,n)=>{if(n.ur.x.isLessThan(e.ll.x)||e.ur.x.isLessThan(n.ll.x)||n.ur.y.isLessThan(e.ll.y)||e.ur.y.isLessThan(n.ll.y))return null;const t=e.ll.x.isLessThan(n.ll.x)?n.ll.x:e.ll.x,r=e.ur.x.isLessThan(n.ur.x)?e.ur.x:n.ur.x,i=e.ll.y.isLessThan(n.ll.y)?n.ll.y:e.ll.y,s=e.ur.y.isLessThan(n.ur.y)?e.ur.y:n.ur.y;return{ll:{x:t,y:i},ur:{x:r,y:s}}},jg=(e,n)=>e.x.times(n.y).minus(e.y.times(n.x)),fx=(e,n)=>e.x.times(n.x).plus(e.y.times(n.y)),v0=e=>fx(e,e).sqrt(),qN=(e,n,t)=>{const r={x:n.x.minus(e.x),y:n.y.minus(e.y)},i={x:t.x.minus(e.x),y:t.y.minus(e.y)};return jg(i,r).div(v0(i)).div(v0(r))},WN=(e,n,t)=>{const r={x:n.x.minus(e.x),y:n.y.minus(e.y)},i={x:t.x.minus(e.x),y:t.y.minus(e.y)};return fx(i,r).div(v0(i)).div(v0(r))},mb=(e,n,t)=>n.y.isZero()?null:{x:e.x.plus(n.x.div(n.y).times(t.minus(e.y))),y:t},vb=(e,n,t)=>n.x.isZero()?null:{x:t,y:e.y.plus(n.y.div(n.x).times(t.minus(e.x)))},ZN=(e,n,t,r)=>{if(n.x.isZero())return vb(t,r,e.x);if(r.x.isZero())return vb(e,n,t.x);if(n.y.isZero())return mb(t,r,e.y);if(r.y.isZero())return mb(e,n,t.y);const i=jg(n,r);if(i.isZero())return null;const s={x:t.x.minus(e.x),y:t.y.minus(e.y)},o=jg(s,n).div(i),u=jg(s,r).div(i),f=e.x.plus(u.times(n.x)),d=t.x.plus(o.times(r.x)),g=e.y.plus(u.times(n.y)),y=t.y.plus(o.times(r.y)),x=f.plus(d).div(2),_=g.plus(y).div(2);return{x,y:_}},lc=class hx{constructor(n,t){Ht(this,"point");Ht(this,"isLeft");Ht(this,"segment");Ht(this,"otherSE");Ht(this,"consumedBy");n.events===void 0?n.events=[this]:n.events.push(this),this.point=n,this.isLeft=t}static compare(n,t){const r=hx.comparePoints(n.point,t.point);return r!==0?r:(n.point!==t.point&&n.link(t),n.isLeft!==t.isLeft?n.isLeft?1:-1:y0.compare(n.segment,t.segment))}static comparePoints(n,t){return n.x.isLessThan(t.x)?-1:n.x.isGreaterThan(t.x)?1:n.y.isLessThan(t.y)?-1:n.y.isGreaterThan(t.y)?1:0}link(n){if(n.point===this.point)throw new Error("Tried to link already linked events");const t=n.point.events;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.point.events.push(s),s.point=this.point}this.checkForConsuming()}checkForConsuming(){const n=this.point.events.length;for(let t=0;t<n;t++){const r=this.point.events[t];if(r.segment.consumedBy===void 0)for(let i=t+1;i<n;i++){const s=this.point.events[i];s.consumedBy===void 0&&r.otherSE.point.events===s.otherSE.point.events&&r.segment.consume(s.segment)}}}getAvailableLinkedEvents(){const n=[];for(let t=0,r=this.point.events.length;t<r;t++){const i=this.point.events[t];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&n.push(i)}return n}getLeftmostComparator(n){const t=new Map,r=i=>{const s=i.otherSE;t.set(i,{sine:qN(this.point,n.point,s.point),cosine:WN(this.point,n.point,s.point)})};return(i,s)=>{t.has(i)||r(i),t.has(s)||r(s);const{sine:o,cosine:u}=t.get(i),{sine:f,cosine:d}=t.get(s);return o.isGreaterThanOrEqualTo(0)&&f.isGreaterThanOrEqualTo(0)?u.isLessThan(d)?1:u.isGreaterThan(d)?-1:0:o.isLessThan(0)&&f.isLessThan(0)?u.isLessThan(d)?-1:u.isGreaterThan(d)?1:0:f.isLessThan(o)?-1:f.isGreaterThan(o)?1:0}}},KN=class v1{constructor(n){Ht(this,"events");Ht(this,"poly");Ht(this,"_isExteriorRing");Ht(this,"_enclosingRing");this.events=n;for(let t=0,r=n.length;t<r;t++)n[t].segment.ringOut=this;this.poly=null}static factory(n){const t=[];for(let r=0,i=n.length;r<i;r++){const s=n[r];if(!s.isInResult()||s.ringOut)continue;let o=null,u=s.leftSE,f=s.rightSE;const d=[u],g=u.point,y=[];for(;o=u,u=f,d.push(u),u.point!==g;)for(;;){const x=u.getAvailableLinkedEvents();if(x.length===0){const D=d[0].point,N=d[d.length-1].point;throw new Error(`Unable to complete output ring starting at [${D.x}, ${D.y}]. Last matching segment found ends at [${N.x}, ${N.y}].`)}if(x.length===1){f=x[0].otherSE;break}let _=null;for(let D=0,N=y.length;D<N;D++)if(y[D].point===u.point){_=D;break}if(_!==null){const D=y.splice(_)[0],N=d.splice(D.index);N.unshift(N[0].otherSE),t.push(new v1(N.reverse()));continue}y.push({index:d.length,point:u.point});const M=u.getLeftmostComparator(o);f=x.sort(M)[0].otherSE;break}t.push(new v1(d))}return t}getGeom(){let n=this.events[0].point;const t=[n];for(let d=1,g=this.events.length-1;d<g;d++){const y=this.events[d].point,x=this.events[d+1].point;Hc.orient(y,n,x)!==0&&(t.push(y),n=y)}if(t.length===1)return null;const r=t[0],i=t[1];Hc.orient(r,n,i)===0&&t.shift(),t.push(t[0]);const s=this.isExteriorRing()?1:-1,o=this.isExteriorRing()?0:t.length-1,u=this.isExteriorRing()?t.length:-1,f=[];for(let d=o;d!=u;d+=s)f.push([t[d].x.toNumber(),t[d].y.toNumber()]);return f}isExteriorRing(){if(this._isExteriorRing===void 0){const n=this.enclosingRing();this._isExteriorRing=n?!n.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var i,s;let n=this.events[0];for(let o=1,u=this.events.length;o<u;o++){const f=this.events[o];lc.compare(n,f)>0&&(n=f)}let t=n.segment.prevInResult(),r=t?t.prevInResult():null;for(;;){if(!t)return null;if(!r)return t.ringOut;if(r.ringOut!==t.ringOut)return((i=r.ringOut)==null?void 0:i.enclosingRing())!==t.ringOut?t.ringOut:(s=t.ringOut)==null?void 0:s.enclosingRing();t=r.prevInResult(),r=t?t.prevInResult():null}}},yb=class{constructor(e){Ht(this,"exteriorRing");Ht(this,"interiorRings");this.exteriorRing=e,e.poly=this,this.interiorRings=[]}addInterior(e){this.interiorRings.push(e),e.poly=this}getGeom(){const e=this.exteriorRing.getGeom();if(e===null)return null;const n=[e];for(let t=0,r=this.interiorRings.length;t<r;t++){const i=this.interiorRings[t].getGeom();i!==null&&n.push(i)}return n}},YN=class{constructor(e){Ht(this,"rings");Ht(this,"polys");this.rings=e,this.polys=this._composePolys(e)}getGeom(){const e=[];for(let n=0,t=this.polys.length;n<t;n++){const r=this.polys[n].getGeom();r!==null&&e.push(r)}return e}_composePolys(e){var t;const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];if(!s.poly)if(s.isExteriorRing())n.push(new yb(s));else{const o=s.enclosingRing();o!=null&&o.poly||n.push(new yb(o)),(t=o==null?void 0:o.poly)==null||t.addInterior(s)}}return n}},JN=class{constructor(e,n=y0.compare){Ht(this,"queue");Ht(this,"tree");Ht(this,"segments");this.queue=e,this.tree=new m0(n),this.segments=[]}process(e){const n=e.segment,t=[];if(e.consumedBy)return e.isLeft?this.queue.delete(e.otherSE):this.tree.delete(n),t;e.isLeft&&this.tree.add(n);let r=n,i=n;do r=this.tree.lastBefore(r);while(r!=null&&r.consumedBy!=null);do i=this.tree.firstAfter(i);while(i!=null&&i.consumedBy!=null);if(e.isLeft){let s=null;if(r){const u=r.getIntersection(n);if(u!==null&&(n.isAnEndpoint(u)||(s=u),!r.isAnEndpoint(u))){const f=this._splitSafely(r,u);for(let d=0,g=f.length;d<g;d++)t.push(f[d])}}let o=null;if(i){const u=i.getIntersection(n);if(u!==null&&(n.isAnEndpoint(u)||(o=u),!i.isAnEndpoint(u))){const f=this._splitSafely(i,u);for(let d=0,g=f.length;d<g;d++)t.push(f[d])}}if(s!==null||o!==null){let u=null;s===null?u=o:o===null?u=s:u=lc.comparePoints(s,o)<=0?s:o,this.queue.delete(n.rightSE),t.push(n.rightSE);const f=n.split(u);for(let d=0,g=f.length;d<g;d++)t.push(f[d])}t.length>0?(this.tree.delete(n),t.push(e)):(this.segments.push(n),n.prev=r)}else{if(r&&i){const s=r.getIntersection(i);if(s!==null){if(!r.isAnEndpoint(s)){const o=this._splitSafely(r,s);for(let u=0,f=o.length;u<f;u++)t.push(o[u])}if(!i.isAnEndpoint(s)){const o=this._splitSafely(i,s);for(let u=0,f=o.length;u<f;u++)t.push(o[u])}}}this.tree.delete(n)}return t}_splitSafely(e,n){this.tree.delete(e);const t=e.rightSE;this.queue.delete(t);const r=e.split(n);return r.push(t),e.consumedBy===void 0&&this.tree.add(e),r}},XN=class{constructor(){Ht(this,"type");Ht(this,"numMultiPolys")}run(e,n,t){zd.type=e;const r=[new bb(n,!0)];for(let d=0,g=t.length;d<g;d++)r.push(new bb(t[d],!1));if(zd.numMultiPolys=r.length,zd.type==="difference"){const d=r[0];let g=1;for(;g<r.length;)m1(r[g].bbox,d.bbox)!==null?g++:r.splice(g,1)}if(zd.type==="intersection")for(let d=0,g=r.length;d<g;d++){const y=r[d];for(let x=d+1,_=r.length;x<_;x++)if(m1(y.bbox,r[x].bbox)===null)return[]}const i=new m0(lc.compare);for(let d=0,g=r.length;d<g;d++){const y=r[d].getSweepEvents();for(let x=0,_=y.length;x<_;x++)i.add(y[x])}const s=new JN(i);let o=null;for(i.size!=0&&(o=i.first(),i.delete(o));o;){const d=s.process(o);for(let g=0,y=d.length;g<y;g++){const x=d[g];x.consumedBy===void 0&&i.add(x)}i.size!=0?(o=i.first(),i.delete(o)):o=null}Hc.reset();const u=KN.factory(s.segments);return new YN(u).getGeom()}},zd=new XN,y1=zd,QN=0,y0=class zg{constructor(n,t,r,i){Ht(this,"id");Ht(this,"leftSE");Ht(this,"rightSE");Ht(this,"rings");Ht(this,"windings");Ht(this,"ringOut");Ht(this,"consumedBy");Ht(this,"prev");Ht(this,"_prevInResult");Ht(this,"_beforeState");Ht(this,"_afterState");Ht(this,"_isInResult");this.id=++QN,this.leftSE=n,n.segment=this,n.otherSE=t,this.rightSE=t,t.segment=this,t.otherSE=n,this.rings=r,this.windings=i}static compare(n,t){const r=n.leftSE.point.x,i=t.leftSE.point.x,s=n.rightSE.point.x,o=t.rightSE.point.x;if(o.isLessThan(r))return 1;if(s.isLessThan(i))return-1;const u=n.leftSE.point.y,f=t.leftSE.point.y,d=n.rightSE.point.y,g=t.rightSE.point.y;if(r.isLessThan(i)){if(f.isLessThan(u)&&f.isLessThan(d))return 1;if(f.isGreaterThan(u)&&f.isGreaterThan(d))return-1;const y=n.comparePoint(t.leftSE.point);if(y<0)return 1;if(y>0)return-1;const x=t.comparePoint(n.rightSE.point);return x!==0?x:-1}if(r.isGreaterThan(i)){if(u.isLessThan(f)&&u.isLessThan(g))return-1;if(u.isGreaterThan(f)&&u.isGreaterThan(g))return 1;const y=t.comparePoint(n.leftSE.point);if(y!==0)return y;const x=n.comparePoint(t.rightSE.point);return x<0?1:x>0?-1:1}if(u.isLessThan(f))return-1;if(u.isGreaterThan(f))return 1;if(s.isLessThan(o)){const y=t.comparePoint(n.rightSE.point);if(y!==0)return y}if(s.isGreaterThan(o)){const y=n.comparePoint(t.rightSE.point);if(y<0)return 1;if(y>0)return-1}if(!s.eq(o)){const y=d.minus(u),x=s.minus(r),_=g.minus(f),M=o.minus(i);if(y.isGreaterThan(x)&&_.isLessThan(M))return 1;if(y.isLessThan(x)&&_.isGreaterThan(M))return-1}return s.isGreaterThan(o)?1:s.isLessThan(o)||d.isLessThan(g)?-1:d.isGreaterThan(g)?1:n.id<t.id?-1:n.id>t.id?1:0}static fromRing(n,t,r){let i,s,o;const u=lc.comparePoints(n,t);if(u<0)i=n,s=t,o=1;else if(u>0)i=t,s=n,o=-1;else throw new Error(`Tried to create degenerate segment at [${n.x}, ${n.y}]`);const f=new lc(i,!0),d=new lc(s,!1);return new zg(f,d,[r],[o])}replaceRightSE(n){this.rightSE=n,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const n=this.leftSE.point.y,t=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:n.isLessThan(t)?n:t},ur:{x:this.rightSE.point.x,y:n.isGreaterThan(t)?n:t}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(n){return n.x.eq(this.leftSE.point.x)&&n.y.eq(this.leftSE.point.y)||n.x.eq(this.rightSE.point.x)&&n.y.eq(this.rightSE.point.y)}comparePoint(n){return Hc.orient(this.leftSE.point,n,this.rightSE.point)}getIntersection(n){const t=this.bbox(),r=n.bbox(),i=m1(t,r);if(i===null)return null;const s=this.leftSE.point,o=this.rightSE.point,u=n.leftSE.point,f=n.rightSE.point,d=kd(t,u)&&this.comparePoint(u)===0,g=kd(r,s)&&n.comparePoint(s)===0,y=kd(t,f)&&this.comparePoint(f)===0,x=kd(r,o)&&n.comparePoint(o)===0;if(g&&d)return x&&!y?o:!x&&y?f:null;if(g)return y&&s.x.eq(f.x)&&s.y.eq(f.y)?null:s;if(d)return x&&o.x.eq(u.x)&&o.y.eq(u.y)?null:u;if(x&&y)return null;if(x)return o;if(y)return f;const _=ZN(s,this.vector(),u,n.vector());return _===null||!kd(i,_)?null:Hc.snap(_)}split(n){const t=[],r=n.events!==void 0,i=new lc(n,!0),s=new lc(n,!1),o=this.rightSE;this.replaceRightSE(s),t.push(s),t.push(i);const u=new zg(i,o,this.rings.slice(),this.windings.slice());return lc.comparePoints(u.leftSE.point,u.rightSE.point)>0&&u.swapEvents(),lc.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),s.checkForConsuming()),t}swapEvents(){const n=this.rightSE;this.rightSE=this.leftSE,this.leftSE=n,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let t=0,r=this.windings.length;t<r;t++)this.windings[t]*=-1}consume(n){let t=this,r=n;for(;t.consumedBy;)t=t.consumedBy;for(;r.consumedBy;)r=r.consumedBy;const i=zg.compare(t,r);if(i!==0){if(i>0){const s=t;t=r,r=s}if(t.prev===r){const s=t;t=r,r=s}for(let s=0,o=r.rings.length;s<o;s++){const u=r.rings[s],f=r.windings[s],d=t.rings.indexOf(u);d===-1?(t.rings.push(u),t.windings.push(f)):t.windings[d]+=f}r.rings=null,r.windings=null,r.consumedBy=t,r.leftSE.consumedBy=t.leftSE,r.rightSE.consumedBy=t.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const n=this.prev.consumedBy||this.prev;this._beforeState=n.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const n=this.beforeState();this._afterState={rings:n.rings.slice(0),windings:n.windings.slice(0),multiPolys:[]};const t=this._afterState.rings,r=this._afterState.windings,i=this._afterState.multiPolys;for(let u=0,f=this.rings.length;u<f;u++){const d=this.rings[u],g=this.windings[u],y=t.indexOf(d);y===-1?(t.push(d),r.push(g)):r[y]+=g}const s=[],o=[];for(let u=0,f=t.length;u<f;u++){if(r[u]===0)continue;const d=t[u],g=d.poly;if(o.indexOf(g)===-1)if(d.isExterior)s.push(g);else{o.indexOf(g)===-1&&o.push(g);const y=s.indexOf(d.poly);y!==-1&&s.splice(y,1)}}for(let u=0,f=s.length;u<f;u++){const d=s[u].multiPoly;i.indexOf(d)===-1&&i.push(d)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const n=this.beforeState().multiPolys,t=this.afterState().multiPolys;switch(y1.type){case"union":{const r=n.length===0,i=t.length===0;this._isInResult=r!==i;break}case"intersection":{let r,i;n.length<t.length?(r=n.length,i=t.length):(r=t.length,i=n.length),this._isInResult=i===y1.numMultiPolys&&r<i;break}case"xor":{const r=Math.abs(n.length-t.length);this._isInResult=r%2===1;break}case"difference":{const r=i=>i.length===1&&i[0].isSubject;this._isInResult=r(n)!==r(t);break}}return this._isInResult}},_b=class{constructor(e,n,t){Ht(this,"poly");Ht(this,"isExterior");Ht(this,"segments");Ht(this,"bbox");if(!Array.isArray(e)||e.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=t,this.segments=[],typeof e[0][0]!="number"||typeof e[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const r=Hc.snap({x:new cc(e[0][0]),y:new cc(e[0][1])});this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};let i=r;for(let s=1,o=e.length;s<o;s++){if(typeof e[s][0]!="number"||typeof e[s][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const u=Hc.snap({x:new cc(e[s][0]),y:new cc(e[s][1])});u.x.eq(i.x)&&u.y.eq(i.y)||(this.segments.push(y0.fromRing(i,u,this)),u.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=u.x),u.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=u.y),u.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=u.x),u.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=u.y),i=u)}(!r.x.eq(i.x)||!r.y.eq(i.y))&&this.segments.push(y0.fromRing(i,r,this))}getSweepEvents(){const e=[];for(let n=0,t=this.segments.length;n<t;n++){const r=this.segments[n];e.push(r.leftSE),e.push(r.rightSE)}return e}},eB=class{constructor(e,n){Ht(this,"multiPoly");Ht(this,"exteriorRing");Ht(this,"interiorRings");Ht(this,"bbox");if(!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new _b(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let t=1,r=e.length;t<r;t++){const i=new _b(e[t],this,!1);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.interiorRings.push(i)}this.multiPoly=n}getSweepEvents(){const e=this.exteriorRing.getSweepEvents();for(let n=0,t=this.interiorRings.length;n<t;n++){const r=this.interiorRings[n].getSweepEvents();for(let i=0,s=r.length;i<s;i++)e.push(r[i])}return e}},bb=class{constructor(e,n){Ht(this,"isSubject");Ht(this,"polys");Ht(this,"bbox");if(!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof e[0][0][0]=="number"&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:new cc(Number.POSITIVE_INFINITY),y:new cc(Number.POSITIVE_INFINITY)},ur:{x:new cc(Number.NEGATIVE_INFINITY),y:new cc(Number.NEGATIVE_INFINITY)}};for(let t=0,r=e.length;t<r;t++){const i=new eB(e[t],this);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.polys.push(i)}this.isSubject=n}getSweepEvents(){const e=[];for(let n=0,t=this.polys.length;n<t;n++){const r=this.polys[n].getSweepEvents();for(let i=0,s=r.length;i<s;i++)e.push(r[i])}return e}},tB=(e,...n)=>y1.run("intersection",e,n);Hc.set;function nB(e,n){var t,r,i,s,o,u,f,d,g,y,x=0,_=e.type==="FeatureCollection",M=e.type==="Feature",D=_?e.features.length:1;for(t=0;t<D;t++){for(u=_?e.features[t].geometry:M?e.geometry:e,d=_?e.features[t].properties:M?e.properties:{},g=_?e.features[t].bbox:M?e.bbox:void 0,y=_?e.features[t].id:M?e.id:void 0,f=u?u.type==="GeometryCollection":!1,o=f?u.geometries.length:1,i=0;i<o;i++){if(s=f?u.geometries[i]:u,s===null){if(n(null,x,d,g,y)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(n(s,x,d,g,y)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(n(s.geometries[r],x,d,g,y)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}x++}}function rB(e,n={}){const t=[];if(nB(e,i=>{t.push(i.coordinates)}),t.length<2)throw new Error("Must specify at least 2 geometries");const r=tB(t[0],...t.slice(1));return r.length===0?null:r.length===1?du(r[0],n.properties):SN(r,n.properties)}var iB=rB;function dx(e,n,t){if(e!==null)for(var r,i,s,o,u,f,d,g=0,y=0,x,_=e.type,M=_==="FeatureCollection",D=_==="Feature",N=M?e.features.length:1,O=0;O<N;O++){d=M?e.features[O].geometry:D?e.geometry:e,x=d?d.type==="GeometryCollection":!1,u=x?d.geometries.length:1;for(var F=0;F<u;F++){var Y=0,Q=0;if(o=x?d.geometries[F]:d,o!==null){f=o.coordinates;var le=o.type;switch(g=0,le){case null:break;case"Point":if(n(f,y,O,Y,Q)===!1)return!1;y++,Y++;break;case"LineString":case"MultiPoint":for(r=0;r<f.length;r++){if(n(f[r],y,O,Y,Q)===!1)return!1;y++,le==="MultiPoint"&&Y++}le==="LineString"&&Y++;break;case"Polygon":case"MultiLineString":for(r=0;r<f.length;r++){for(i=0;i<f[r].length-g;i++){if(n(f[r][i],y,O,Y,Q)===!1)return!1;y++}le==="MultiLineString"&&Y++,le==="Polygon"&&Q++}le==="Polygon"&&Y++;break;case"MultiPolygon":for(r=0;r<f.length;r++){for(Q=0,i=0;i<f[r].length;i++){for(s=0;s<f[r][i].length-g;s++){if(n(f[r][i][s],y,O,Y,Q)===!1)return!1;y++}Q++}Y++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(dx(o.geometries[r],n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function oB(e,n){var t,r,i,s,o,u,f,d,g,y,x=0,_=e.type==="FeatureCollection",M=e.type==="Feature",D=_?e.features.length:1;for(t=0;t<D;t++){for(u=_?e.features[t].geometry:M?e.geometry:e,d=_?e.features[t].properties:M?e.properties:{},g=_?e.features[t].bbox:M?e.bbox:void 0,y=_?e.features[t].id:M?e.id:void 0,f=u?u.type==="GeometryCollection":!1,o=f?u.geometries.length:1,i=0;i<o;i++){if(s=f?u.geometries[i]:u,s===null){if(n(null,x,d,g,y)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(n(s,x,d,g,y)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(n(s.geometries[r],x,d,g,y)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}x++}}function sB(e,n){oB(e,function(t,r,i,s,o){var u=t===null?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return n(sd(t,i,{bbox:s,id:o}),r,0)===!1?!1:void 0}var f;switch(u){case"MultiPoint":f="Point";break;case"MultiLineString":f="LineString";break;case"MultiPolygon":f="Polygon";break}for(var d=0;d<t.coordinates.length;d++){var g=t.coordinates[d],y={type:f,coordinates:g};if(n(sd(y,i),r,d)===!1)return!1}})}function aB(e,n){sB(e,function(t,r,i){var s=0;if(t.geometry){var o=t.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var u,f=0,d=0,g=0;if(dx(t,function(y,x,_,M,D){if(u===void 0||r>f||M>d||D>g){u=y,f=r,d=M,g=D,s=0;return}var N=pu([u,y],t.properties);if(n(N,r,i,D,s)===!1)return!1;s++,u=y})===!1)return!1}}})}function lB(e,n,t){var r=t,i=!1;return aB(e,function(s,o,u,f,d){i===!1&&t===void 0?r=s:r=n(r,s,o,u,f,d),i=!0}),r}function _0(e,n={}){return lB(e,(t,r)=>{const i=r.geometry.coordinates;return t+vy(i[0],i[1],n)},0)}var Uf=_0;class gf extends Vn.Polygon{constructor(t,r={}){super(t,{...r,pmIgnore:!1,interactive:!0});Ht(this,"properties");this.properties=dn.measure("Polygon.constructor.initProperties",()=>({type:"Polygon",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{color:r.color||"#2b6451",weight:r.weight||3,opacity:r.opacity||1,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity||.2,dashArray:r.dashArray||"",name:r.name||""}})),this.updateProperties(),this.on({add:()=>this.updateProperties(),edit:()=>this.updateProperties(),drag:()=>this.updateProperties()})}updateProperties(){dn.measure("Polygon.updateProperties",()=>{var t,r,i,s,o;try{const u=this.getLatLngs()[0];if(!u||u.length<3){console.warn("Polygon has less than 3 points, cannot calculate properties");return}const f=u.map(O=>[O.lng,O.lat]);f.push(f[0]);const d=du([f]),g=sx(d),y=_0(pu([...f]),{units:"meters"}),x=rp(d),_=Vn.latLng(x.geometry.coordinates[1],x.geometry.coordinates[0]),M=((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||"",D=((i=this.properties)==null?void 0:i.category)||"forages",N=((s=this.properties)==null?void 0:s.accessLevel)||"visitor";this.properties={type:"Polygon",coordinates:u.map(O=>({lat:O.lat,lng:O.lng})),surface:g,perimeter:y,center:{lat:_.lat,lng:_.lng},vertices:u.length,category:D,accessLevel:N,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:M}},this.fire("properties:updated",{shape:this,properties:this.properties})}catch(u){console.error("Failed to calculate polygon properties",u)}})}setName(t){dn.measure("Polygon.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=t,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return dn.measure("Polygon.getName",()=>{var t,r;return((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||""})}setLatLngs(t){return dn.measure("Polygon.setLatLngs",()=>(super.setLatLngs(t),this.updateProperties(),this))}getMidPoints(){return dn.measure("Polygon.getMidPoints",()=>{const t=this.getLatLngs()[0],r=[];if(t.length<2)return r;for(let i=0;i<t.length;i++){const s=t[i],o=t[(i+1)%t.length];r.push(Vn.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return r})}moveVertex(t,r){dn.measure("Polygon.moveVertex",()=>{const i=this.getLatLngs()[0];t>=0&&t<i.length&&(i[t]=r,Vn.Polygon.prototype.setLatLngs.call(this,[i]))})}addVertex(t,r){dn.measure("Polygon.addVertex",()=>{const i=this.getLatLngs()[0];t>=0&&t<i.length&&(i.splice((t+1)%i.length,0,r),Vn.Polygon.prototype.setLatLngs.call(this,[i]))})}move(t){return dn.measure("Polygon.move",()=>{const i=this.getLatLngs()[0].map(s=>Vn.latLng(s.lat+t.lat,s.lng+t.lng));return Vn.Polygon.prototype.setLatLngs.call(this,[i]),this})}getCenter(){return dn.measure("Polygon.getCenter",()=>{const t=this.getLatLngs()[0];if(!t||t.length===0)return new Vn.LatLng(0,0);try{const r=t.filter(d=>d&&typeof d.lat=="number"&&typeof d.lng=="number"&&!isNaN(d.lat)&&!isNaN(d.lng)&&Math.abs(d.lat)<=90&&Math.abs(d.lng)<=180);if(r.length===0)return console.warn("Aucun point valide dans le polygone pour calculer le centre"),new Vn.LatLng(0,0);const i=r.map(d=>[d.lng,d.lat]);i.push(i[0]);const s=du([i]),o=rp(s),u=o.geometry.coordinates[1],f=o.geometry.coordinates[0];if(typeof u!="number"||typeof f!="number"||isNaN(u)||isNaN(f)||Math.abs(u)>90||Math.abs(f)>180)throw new Error("Centroid calculé invalide");return Vn.latLng(u,f)}catch(r){console.warn("Erreur lors du calcul du centroïde avec turf.js, utilisation de la méthode simple",r);let i=0,s=0,o=0;for(const u of t)u&&typeof u.lat=="number"&&typeof u.lng=="number"&&!isNaN(u.lat)&&!isNaN(u.lng)&&Math.abs(u.lat)<=90&&Math.abs(u.lng)<=180&&(i+=u.lat,s+=u.lng,o++);return o===0?(console.error("Impossible de calculer un centre valide pour le polygone"),new Vn.LatLng(0,0)):new Vn.LatLng(i/o,s/o)}})}getSegmentLengths(){return dn.measure("Polygon.getSegmentLengths",()=>{const t=this.getLatLngs()[0],r=[];if(t.length<2)return r;for(let i=0;i<t.length;i++){const s=t[i],o=t[(i+1)%t.length];r.push(s.distanceTo(o))}return r})}}class Ts extends Vn.Polyline{constructor(t,r={}){super(t,{...r,pmIgnore:!1,interactive:!0});Ht(this,"properties");Ht(this,"cachedProperties",{});Ht(this,"needsUpdate",!0);this.properties=dn.measure("Line.constructor.initProperties",()=>({type:"Line",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{...r||{},name:r.name||""}})),this.updateProperties(),this.on("add",()=>{this.updateProperties()})}updateProperties(){dn.measure("Line.updateProperties",()=>{var i,s,o,u,f;const t=this.getLatLngs();if(!t||t.length<2){console.warn("Line has less than 2 points, cannot calculate properties");return}const r=t.map(d=>[d.lng,d.lat]);try{const d=pu(r),g=_0(d,{units:"meters"});let y;if(t.length===2)y=Vn.latLng((t[0].lat+t[1].lat)/2,(t[0].lng+t[1].lng)/2);else{const N=d1(d,g/2,{units:"meters"});y=Vn.latLng(N.geometry.coordinates[1],N.geometry.coordinates[0])}const x=10,_=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"",M=((o=this.properties)==null?void 0:o.category)||"forages",D=((u=this.properties)==null?void 0:u.accessLevel)||"visitor";this.properties={type:"Line",length:g,coordinates:t.map(N=>({lat:N.lat,lng:N.lng})),center:{lat:y.lat,lng:y.lng},vertices:t.length,surfaceInfluence:g*x,dimensions:{width:x},category:M,accessLevel:D,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,dashArray:((f=this.options)==null?void 0:f.dashArray)||"",name:_}},this.cachedProperties.length=g,this.cachedProperties.center=y,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.needsUpdate=!1,this.fire("properties:updated",{shape:this,properties:this.properties})}catch(d){console.error("Failed to calculate line properties",d)}})}setName(t){dn.measure("Line.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=t,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return dn.measure("Line.getName",()=>{var t,r;return((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||""})}invalidateCache(){dn.measure("Line.invalidateCache",()=>{this.needsUpdate=!0,this.cachedProperties={}})}setLatLngs(t){return super.setLatLngs(t),this.needsUpdate=!0,this.cachedProperties={},this.fire("latlngs:updated",{latlngs:this.getLatLngs()}),this}getMidPoints(){return dn.measure("Line.getMidPoints",()=>{if(!this.needsUpdate&&this.cachedProperties.midPoints)return this.cachedProperties.midPoints;const t=this.getLatLngs(),r=[];if(t.length<2)return r;for(let i=0;i<t.length-1;i++){const s=t[i],o=t[i+1];if(!s||!o){console.warn("Points invalides détectés pour le segment",i);continue}r.push(Vn.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return this.cachedProperties.midPoints=r,r})}getMidPointAt(t){return dn.measure("Line.getMidPointAt",()=>{const r=this.getLatLngs();if(t<0||t>=r.length-1||r.length<2)return null;const i=r[t],s=r[t+1];return!i||!s?(console.warn("Points invalides pour calcul du midpoint au segment",t),null):Vn.latLng((i.lat+s.lat)/2,(i.lng+s.lng)/2)})}moveVertex(t,r,i=!1){dn.measure("Line.moveVertex",()=>{const s=this.getLatLngs();t>=0&&t<s.length&&(s[t]=r,this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("vertex:moved",{index:t,latlng:r,allPoints:s}),i&&this.updateProperties())})}addVertex(t,r,i=!1){dn.measure("Line.addVertex",()=>{const s=this.getLatLngs();t>=0&&t<s.length-1&&(s.splice(t+1,0,r),Vn.Polyline.prototype.setLatLngs.call(this,s),this.needsUpdate=!0,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.cachedProperties.center=void 0,this.cachedProperties.length=void 0,i&&this.updateProperties())})}move(t,r=!0){return dn.measure("Line.move",()=>{this.fire("move:start");const i=this.getLatLngs(),s=i.map(o=>Vn.latLng(o.lat+t.lat,o.lng+t.lng));return this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("move",{delta:t,newPositions:s,oldPositions:i}),r&&(this.updateProperties(),this.fire("properties:updated",{shape:this,properties:this.properties}),this.fire("move:end")),this})}getCenter(){return dn.measure("Line.getCenter",()=>{if(!this.needsUpdate&&this.cachedProperties.center)return this.cachedProperties.center;const t=this.getLatLngs();if(t.length<2)return t[0]||new Vn.LatLng(0,0);try{const r=t.map(f=>[f.lng,f.lat]),i=pu(r),s=_0(i,{units:"meters"}),o=d1(i,s/2,{units:"meters"}),u=Vn.latLng(o.geometry.coordinates[1],o.geometry.coordinates[0]);return this.cachedProperties.center=u,u}catch(r){console.warn("Error calculating line center with turf.js, using simple method",r);const i=t.reduce((u,f)=>u+f.lat,0)/t.length,s=t.reduce((u,f)=>u+f.lng,0)/t.length,o=new Vn.LatLng(i,s);return this.cachedProperties.center=o,o}})}getSegmentLengths(){return dn.measure("Line.getSegmentLengths",()=>{if(!this.needsUpdate&&this.cachedProperties.segmentLengths)return this.cachedProperties.segmentLengths;const t=this.getLatLngs(),r=[];if(t.length<2)return r;for(let i=0;i<t.length-1;i++){const s=t[i],o=t[i+1];r.push(s.distanceTo(o))}return this.cachedProperties.segmentLengths=r,r})}getSegmentLengthAt(t){return dn.measure("Line.getSegmentLengthAt",()=>{const r=this.getLatLngs();if(t<0||t>=r.length-1||r.length<2)return 0;const i=r[t],s=r[t+1];return i.distanceTo(s)})}getLengthToVertex(t){return dn.measure("Line.getLengthToVertex",()=>{const r=this.getLatLngs();let i=0;if(t<=0||r.length<2)return 0;for(let s=0;s<Math.min(t,r.length-1);s++)i+=r[s].distanceTo(r[s+1]);return i})}getLength(){return dn.measure("Line.getLength",()=>{if(!this.needsUpdate&&this.cachedProperties.length)return this.cachedProperties.length;const t=this.getLatLngs();let r=0;for(let i=0;i<t.length-1;i++)r+=t[i].distanceTo(t[i+1]);return this.cachedProperties.length=r,r})}}const el=class el extends Ts{constructor(t,r={}){super(t,{...r,color:"#FF4500",weight:4,opacity:.8,interactive:!1,pmIgnore:!0});Ht(this,"elevationData",[]);Ht(this,"elevationProfile",null);Ht(this,"elevationMarker",null);Ht(this,"isZooming",!1);Ht(this,"simpleLine",null);Ht(this,"isDestroyed",!1);Ht(this,"zoomAnimationTimeout",null);this.properties=dn.measure("ElevationLine.constructor.initProperties",()=>({...this.properties,type:"ElevationLine",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{...this.properties.style||{},name:r.name||""},elevationProfile:null,maxElevation:0,minElevation:0,elevationGain:0,elevationLoss:0,dataSource:"pending"})),this.setupEventListeners()}setupEventListeners(){dn.measure("ElevationLine.setupEventListeners",()=>{this.on("move",()=>this.updateElevationProfile()),this.on("add",()=>{this._map&&(this._map.on("zoomstart",this.handleZoomStart,this),this._map.on("zoomend",this.handleZoomEnd,this),this._map.on("zoomanim",this._animateZoom,this))}),this.on("remove",()=>{this.cleanupEventListeners()})})}cleanupEventListeners(){this._map&&(this._map.off("zoomstart",this.handleZoomStart,this),this._map.off("zoomend",this.handleZoomEnd,this),this._map.off("zoomanim",this._animateZoom,this)),this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null)}_animateZoom(t){if(this.isDestroyed||!this._map||!this.getLatLngs().length){console.debug("[ElevationLine] Animation de zoom ignorée - ligne détruite ou carte non disponible");return}this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null);try{this.elevationMarker&&this.elevationMarker.remove();const r=this._path;r&&(r.style.display="none");const i=this.getLatLngs();if(i&&i.length>0&&this._map&&!this.isDestroyed){if(!this._map.getContainer()){console.debug("[ElevationLine] Carte non valide pendant l'animation de zoom");return}if(this.simpleLine?this.simpleLine.setLatLngs(i):(this.simpleLine=Vn.polyline(i,{color:"#FF4500",weight:3,opacity:.6,smoothFactor:1,interactive:!1}),this._map&&this._map.getContainer()&&this.simpleLine.addTo(this._map)),this.simpleLine&&this.simpleLine._path){const s=this.simpleLine._path.style.transform;this.simpleLine._path.style.transform="",this.zoomAnimationTimeout=setTimeout(()=>{if(this.isDestroyed||!this._map||!this._map.getContainer()){this.cleanup();return}try{this.simpleLine&&this.simpleLine._path&&(this.simpleLine._path.style.transform=s,this.simpleLine._path.style.display=""),r&&!this.isDestroyed&&(r.style.display=""),this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&this.redraw()}catch(o){console.warn("[ElevationLine] Erreur lors de la restauration après animation:",o),this.cleanup()}},300)}}}catch(r){console.debug("[ElevationLine] Animation de zoom ignorée:",r),this.zoomAnimationTimeout=setTimeout(()=>{if(this.isDestroyed||!this._map||!this._map.getContainer()){this.cleanup();return}try{this._path&&(this._path.style.display=""),this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&this.redraw()}catch(i){console.error("[ElevationLine] Erreur lors de la restauration après animation:",i),this.cleanup()}},300)}}handleZoomStart(){this.isDestroyed||dn.measure("ElevationLine.handleZoomStart",()=>{if(!(this.isZooming||!this._map)){this.isZooming=!0;try{this.elevationMarker&&this.elevationMarker.remove();const t=this._path;t&&(t.style.display="none"),this.isDestroyed||this.setStyle({opacity:.3})}catch(t){console.error("[ElevationLine] Error in handleZoomStart:",t),this.cleanup()}}})}handleZoomEnd(){this.isDestroyed||dn.measure("ElevationLine.handleZoomEnd",()=>{if(!this._map){this.isZooming=!1;return}try{this.simpleLine&&this._map&&(this.simpleLine.remove(),this.simpleLine=null);const t=this._path;t&&(t.style.display=""),this.isDestroyed||this.setStyle({opacity:.8}),this.zoomAnimationTimeout&&clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=setTimeout(()=>{if(!(this.isDestroyed||!this._map))try{this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&this.redraw()}catch(r){console.warn("[ElevationLine] Erreur lors du redraw après zoom:",r),this.cleanup()}},50)}catch(t){console.error("[ElevationLine] Error in handleZoomEnd:",t)}finally{this.isZooming=!1}})}cleanup(){dn.measure("ElevationLine.cleanup",()=>{if(this.isZooming=!1,this.hideElevationMarker(),this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null),this.simpleLine&&this._map){try{this.simpleLine.remove()}catch(r){console.error("[ElevationLine] Error removing simpleLine:",r)}this.simpleLine=null}if(this.elevationProfile){try{this.elevationProfile.remove()}catch(r){console.error("[ElevationLine] Error removing elevationProfile:",r)}this.elevationProfile=null}const t=this._path;t&&(t.style.display=""),!this.isDestroyed&&this._map&&this._map.hasLayer(this)&&this.setStyle({opacity:.8})})}calculateOptimalSampleCount(){return dn.measure("ElevationLine.calculateOptimalSampleCount",()=>{const t=this.getLength(),r=Math.ceil(t/el.SAMPLE_DISTANCE);return Math.min(Math.max(r,el.MIN_SAMPLES),el.MAX_SAMPLES)})}async fetchElevationData(t=0){return dn.measure("ElevationLine.fetchElevationData",async()=>{if(this.getLatLngs().length===0)return;const i=this.getLength();let s="";const o=this.calculateOptimalSampleCount();console.log(`[ElevationLine] Using ${o} sample points for ${i.toFixed(0)}m line`);const u=[];for(let f=0;f<o;f++){const d=f/(o-1)*i,g=this.getPointAtDistance(d);g&&u.push(`${g.lat},${g.lng}`)}s=u.join("|");try{const f=await fetch(`${el.API_URL}?locations=${s}`);if(!f.ok)throw new Error(`HTTP error ${f.status}`);const d=await f.json();if(!d.results||!Array.isArray(d.results))throw new Error("Invalid API response format");this.elevationData=d.results.map((g,y)=>({distance:y/(o-1)*i,elevation:g.elevation})),this.properties.dataSource="api"}catch(f){if(console.warn(`[ElevationLine] API fetch attempt ${t+1}/${el.MAX_RETRIES} failed:`,f),t<el.MAX_RETRIES)return await new Promise(d=>setTimeout(d,el.RETRY_DELAY)),this.fetchElevationData(t+1);console.warn("[ElevationLine] All API attempts failed, falling back to simulation"),this.simulateElevationData(),this.properties.dataSource="simulation"}this.calculateElevationStatistics()})}simulateElevationData(){dn.measure("ElevationLine.simulateElevationData",()=>{const t=this.getLength(),r=this.calculateOptimalSampleCount();this.elevationData=Array.from({length:r},(i,s)=>{const o=s/(r-1)*t,u=100+Math.sin(o/t*Math.PI*2)*50;return{distance:o,elevation:u}})})}calculateElevationStatistics(){dn.measure("ElevationLine.calculateElevationStatistics",()=>{if(!this.elevationData.length)return;const t=this.elevationData.map(g=>g.elevation),r=t.length?Math.max(...t):0,i=t.length?Math.min(...t):0;let s=0,o=0,u=0,f=0,d=0;console.log("[ElevationLine][calculateElevationStatistics] Données brutes:",{elevationsCount:t.length,maxElevation:r,minElevation:i});for(let g=1;g<this.elevationData.length;g++){const y=this.elevationData[g-1],x=this.elevationData[g],_=x.elevation-y.elevation;_>0?s+=_:o+=Math.abs(_);const M=x.distance-y.distance;if(M>0){const D=_/M*100;u=Math.max(u,Math.abs(D)),f+=Math.abs(D),d++}}console.log("[ElevationLine][calculateElevationStatistics] Calculs intermédiaires:",{gain:s,loss:o,maxSlope:u,averageSlope:d>0?f/d:0}),this.properties={...this.properties,type:"ElevationLine",maxElevation:r,minElevation:i,elevationGain:s,elevationLoss:o,maxSlope:u,averageSlope:d>0?f/d:0,elevationData:this.elevationData,dataSource:this.properties.dataSource,length:this.getLength()},console.log("[ElevationLine][calculateElevationStatistics] Propriétés mises à jour:",this.properties)})}showElevationAt(t){dn.measure("ElevationLine.showElevationAt",()=>{if(!(!this.elevationData.length||!this._map))try{const r=this.elevationData.reduce((s,o)=>Math.abs(o.distance-t)<Math.abs(s.distance-t)?o:s),i=this.getPointAtDistance(t);if(!i)return;this.elevationMarker?(this.elevationMarker.setLatLng(i),this.elevationMarker.setTooltipContent(`Distance: ${this.formatDistance(r.distance)}<br>Altitude: ${this.formatElevation(r.elevation)}`)):(this.elevationMarker=Vn.circleMarker(i,{radius:6,color:"#FF4500",fillColor:"#FF4500",fillOpacity:1,weight:2,className:"elevation-marker"}),this.elevationMarker.bindTooltip(`Distance: ${this.formatDistance(r.distance)}<br>Altitude: ${this.formatElevation(r.elevation)}`,{permanent:!0,direction:"top",offset:[0,-10],className:"elevation-marker-tooltip"}),this._map&&this._map.hasLayer(this)&&this.elevationMarker.addTo(this._map)),this.fire("elevation:show",{distance:t,elevation:r.elevation,latLng:i})}catch(r){console.error("[ElevationLine] Erreur lors de l'affichage de l'élévation:",r),this.hideElevationMarker()}})}hideElevationMarker(){dn.measure("ElevationLine.hideElevationMarker",()=>{this.elevationMarker&&(this.elevationMarker.remove(),this.elevationMarker=null)})}getPointAtDistance(t){return dn.measure("ElevationLine.getPointAtDistance",()=>{try{const i=this.getLatLngs().map(u=>[u.lng,u.lat]),s=pu(i),o=d1(s,t,{units:"meters"});return Vn.latLng(o.geometry.coordinates[1],o.geometry.coordinates[0])}catch(r){return console.error("Error calculating point at distance",r),null}})}moveVertex(t,r,i=!1){dn.measure("ElevationLine.moveVertex",()=>{super.moveVertex(t,r,!1),this.properties.type="ElevationLine",i&&this.updateElevationProfile()})}addVertex(t,r,i=!1){dn.measure("ElevationLine.addVertex",()=>{console.warn("[ElevationLine] Tentative d'ajout de vertex ignorée - non autorisé pour un profil altimétrique")})}setLatLngs(t){return dn.measure("ElevationLine.setLatLngs",()=>(super.setLatLngs(t),this.properties.type="ElevationLine",this.updateElevationProfile(),this))}move(t,r=!0){return dn.measure("ElevationLine.move",()=>(super.move(t,!1),this.properties.type="ElevationLine",r&&this.updateElevationProfile(),this))}setName(t){dn.measure("ElevationLine.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=t,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return dn.measure("ElevationLine.getName",()=>{var t,r;return((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||""})}formatDistance(t){return dn.measure("ElevationLine.formatDistance",()=>t>=1e3?`${(t/1e3).toFixed(2)} km`:`${t.toFixed(0)} m`)}formatElevation(t){return dn.measure("ElevationLine.formatElevation",()=>`${t.toFixed(0)} m`)}onAdd(t){return dn.measure("ElevationLine.onAdd",()=>(super.onAdd(t),this))}onRemove(t){return this.isDestroyed=!0,this.cleanupEventListeners(),this.cleanup(),super.onRemove(t)}async updateElevationProfile(){return dn.measure("ElevationLine.updateElevationProfile",async()=>{try{if(this.properties.elevationData&&this.properties.dataSource==="restored"){this.elevationData=this.properties.elevationData,this.calculateElevationStatistics(),this._map&&this._map.hasLayer(this)&&this.redraw(),this.fire("elevation:updated",{shape:this,elevationData:this.elevationData,properties:this.properties});return}await this.fetchElevationData(),this.updateProperties(),this._map&&this._map.hasLayer(this)&&this.redraw(),this.fire("elevation:updated",{shape:this,elevationData:this.elevationData,properties:this.properties})}catch(t){console.error("[ElevationLine] Erreur lors de la mise à jour du profil d'élévation:",t),this.properties.dataSource="error"}})}updateProperties(){dn.measure("ElevationLine.updateProperties",()=>{var t,r;if(super.updateProperties(),this.elevationData&&this.elevationData.length>0){const i=this.elevationData.map(N=>N.elevation),s=Math.max(...i),o=Math.min(...i);let u=0,f=0,d=0,g=0,y=0;for(let N=1;N<this.elevationData.length;N++){const O=this.elevationData[N-1],F=this.elevationData[N],Y=F.elevation-O.elevation;Y>0?u+=Y:f+=Math.abs(Y);const Q=F.distance-O.distance;if(Q>0){const le=Y/Q*100;d=Math.max(d,Math.abs(le)),g+=Math.abs(le),y++}}const _=this.getLatLngs().map(N=>({lat:N.lat,lng:N.lng})),M=((t=this.properties)==null?void 0:t.category)||"forages",D=((r=this.properties)==null?void 0:r.accessLevel)||"visitor";this.properties={...this.properties,type:"ElevationLine",coordinates:_,elevationData:this.elevationData.map(N=>({distance:N.distance,elevation:N.elevation})),maxElevation:s,minElevation:o,elevationGain:u,elevationLoss:f,maxSlope:d,averageSlope:y>0?g/y:0,dataSource:this.properties.dataSource||"api",category:M,accessLevel:D},this.fire("properties:updated",{shape:this,properties:this.properties})}})}getElevationData(){return dn.measure("ElevationLine.getElevationData",()=>this.elevationData)}};Ht(el,"API_URL","https://api.open-elevation.com/api/v1/lookup"),Ht(el,"RETRY_DELAY",2e3),Ht(el,"MAX_RETRIES",3),Ht(el,"SAMPLE_DISTANCE",100),Ht(el,"MIN_SAMPLES",10),Ht(el,"MAX_SAMPLES",50);let Sf=el;var b0={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */b0.exports;(function(e,n){(function(){var t,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",u="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",d=500,g="__lodash_placeholder__",y=1,x=2,_=4,M=1,D=2,N=1,O=2,F=4,Y=8,Q=16,le=32,ce=64,xe=128,G=256,R=512,Z=30,z="...",I=800,$=16,U=1,W=2,q=3,ie=1/0,re=9007199254740991,we=17976931348623157e292,Pe=NaN,Ie=4294967295,A=Ie-1,J=Ie>>>1,fe=[["ary",xe],["bind",N],["bindKey",O],["curry",Y],["curryRight",Q],["flip",R],["partial",le],["partialRight",ce],["rearg",G]],ne="[object Arguments]",he="[object Array]",ae="[object AsyncFunction]",T="[object Boolean]",ue="[object Date]",ke="[object DOMException]",Ce="[object Error]",Ve="[object Function]",K="[object GeneratorFunction]",pe="[object Map]",ve="[object Number]",ge="[object Null]",Ue="[object Object]",Qe="[object Promise]",Ke="[object Proxy]",Ge="[object RegExp]",Xe="[object Set]",ot="[object String]",kt="[object Symbol]",Ct="[object Undefined]",Ut="[object WeakMap]",Gt="[object WeakSet]",fn="[object ArrayBuffer]",pn="[object DataView]",et="[object Float32Array]",it="[object Float64Array]",nt="[object Int8Array]",Vt="[object Int16Array]",Qt="[object Int32Array]",On="[object Uint8Array]",wn="[object Uint8ClampedArray]",Tn="[object Uint16Array]",ar="[object Uint32Array]",xn=/\b__p \+= '';/g,Mn=/\b(__p \+=) '' \+/g,En=/(__e\(.*?\)|\b__t\)) \+\n'';/g,cr=/&(?:amp|lt|gt|quot|#39);/g,yr=/[&<>"']/g,mt=RegExp(cr.source),We=RegExp(yr.source),Ot=/<%-([\s\S]+?)%>/g,Pn=/<%([\s\S]+?)%>/g,tr=/<%=([\s\S]+?)%>/g,Zn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zt=/^\w*$/,mn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,It=/[\\^$.*+?()[\]{}|]/g,Kt=RegExp(It.source),Ln=/^\s+/,mr=/\s/,at=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Cn=/\{\n\/\* \[wrapped with (.+)\] \*/,xr=/,? & /,Ni=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Fr=/[()=,{}\[\]\/\s]/,Er=/\\(\\)?/g,lr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Hr=/\w*$/,ir=/^[-+]0x[0-9a-f]+$/i,Or=/^0b[01]+$/i,jr=/^\[object .+?Constructor\]$/,rn=/^0o[0-7]+$/i,Fi=/^(?:0|[1-9]\d*)$/,_i=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,gi=/($^)/,Kr=/['\n\r\u2028\u2029\\]/g,Ir="\\ud800-\\udfff",Rr="\\u0300-\\u036f",hr="\\ufe20-\\ufe2f",ji="\\u20d0-\\u20ff",Ls=Rr+hr+ji,Ss="\\u2700-\\u27bf",oi="a-z\\xdf-\\xf6\\xf8-\\xff",Fn="\\xac\\xb1\\xd7\\xf7",Eo="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ui="\\u2000-\\u206f",fr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",qn="A-Z\\xc0-\\xd6\\xd8-\\xde",_o="\\ufe0e\\ufe0f",bo=Fn+Eo+ui+fr,Lr="['’]",Us="["+Ir+"]",Hn="["+bo+"]",_r="["+Ls+"]",Yr="\\d+",_n="["+Ss+"]",tn="["+oi+"]",si="[^"+Ir+bo+Yr+Ss+oi+qn+"]",co="\\ud83c[\\udffb-\\udfff]",wo="(?:"+_r+"|"+co+")",Pi="[^"+Ir+"]",cs="(?:\\ud83c[\\udde6-\\uddff]){2}",Xo="[\\ud800-\\udbff][\\udc00-\\udfff]",Io="["+qn+"]",hi="\\u200d",Bs="(?:"+tn+"|"+si+")",Ro="(?:"+Io+"|"+si+")",Xi="(?:"+Lr+"(?:d|ll|m|re|s|t|ve))?",xo="(?:"+Lr+"(?:D|LL|M|RE|S|T|VE))?",Vs=wo+"?",ya="["+_o+"]?",Qi="(?:"+hi+"(?:"+[Pi,cs,Xo].join("|")+")"+ya+Vs+")*",ol="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",_a="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",pr=ya+Vs+Qi,br="(?:"+[_n,cs,Xo].join("|")+")"+pr,Jr="(?:"+[Pi+_r+"?",_r,cs,Xo,Us].join("|")+")",Tr=RegExp(Lr,"g"),Fo=RegExp(_r,"g"),sl=RegExp(co+"(?="+co+")|"+Jr+pr,"g"),al=RegExp([Io+"?"+tn+"+"+Xi+"(?="+[Hn,Io,"$"].join("|")+")",Ro+"+"+xo+"(?="+[Hn,Io+Bs,"$"].join("|")+")",Io+"?"+Bs+"+"+Xi,Io+"+"+xo,_a,ol,Yr,br].join("|"),"g"),Hs=RegExp("["+hi+Ir+Ls+_o+"]"),Va=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,bu=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],kl=-1,Sr={};Sr[et]=Sr[it]=Sr[nt]=Sr[Vt]=Sr[Qt]=Sr[On]=Sr[wn]=Sr[Tn]=Sr[ar]=!0,Sr[ne]=Sr[he]=Sr[fn]=Sr[T]=Sr[pn]=Sr[ue]=Sr[Ce]=Sr[Ve]=Sr[pe]=Sr[ve]=Sr[Ue]=Sr[Ge]=Sr[Xe]=Sr[ot]=Sr[Ut]=!1;var Gr={};Gr[ne]=Gr[he]=Gr[fn]=Gr[pn]=Gr[T]=Gr[ue]=Gr[et]=Gr[it]=Gr[nt]=Gr[Vt]=Gr[Qt]=Gr[pe]=Gr[ve]=Gr[Ue]=Gr[Ge]=Gr[Xe]=Gr[ot]=Gr[kt]=Gr[On]=Gr[wn]=Gr[Tn]=Gr[ar]=!0,Gr[Ce]=Gr[Ve]=Gr[Ut]=!1;var Ha={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Zu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Tl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Xl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ll=parseFloat,Dl=parseInt,Ql=typeof ea=="object"&&ea&&ea.Object===Object&&ea,Xr=typeof self=="object"&&self&&self.Object===Object&&self,eo=Ql||Xr||Function("return this")(),or=n&&!n.nodeType&&n,to=or&&!0&&e&&!e.nodeType&&e,ul=to&&to.exports===or,ba=ul&&Ql.process,$i=function(){try{var _t=to&&to.require&&to.require("util").types;return _t||ba&&ba.binding&&ba.binding("util")}catch{}}(),eu=$i&&$i.isArrayBuffer,ta=$i&&$i.isDate,Nl=$i&&$i.isMap,Bl=$i&&$i.isRegExp,Os=$i&&$i.isSet,Ol=$i&&$i.isTypedArray;function bi(_t,qt,Mt){switch(Mt.length){case 0:return _t.call(qt);case 1:return _t.call(qt,Mt[0]);case 2:return _t.call(qt,Mt[0],Mt[1]);case 3:return _t.call(qt,Mt[0],Mt[1],Mt[2])}return _t.apply(qt,Mt)}function Ku(_t,qt,Mt,An){for(var Kn=-1,wr=_t==null?0:_t.length;++Kn<wr;){var Ui=_t[Kn];qt(An,Ui,Mt(Ui),_t)}return An}function Po(_t,qt){for(var Mt=-1,An=_t==null?0:_t.length;++Mt<An&&qt(_t[Mt],Mt,_t)!==!1;);return _t}function Gs(_t,qt){for(var Mt=_t==null?0:_t.length;Mt--&&qt(_t[Mt],Mt,_t)!==!1;);return _t}function Il(_t,qt){for(var Mt=-1,An=_t==null?0:_t.length;++Mt<An;)if(!qt(_t[Mt],Mt,_t))return!1;return!0}function qs(_t,qt){for(var Mt=-1,An=_t==null?0:_t.length,Kn=0,wr=[];++Mt<An;){var Ui=_t[Mt];qt(Ui,Mt,_t)&&(wr[Kn++]=Ui)}return wr}function cl(_t,qt){var Mt=_t==null?0:_t.length;return!!Mt&&cn(_t,qt,0)>-1}function fl(_t,qt,Mt){for(var An=-1,Kn=_t==null?0:_t.length;++An<Kn;)if(Mt(qt,_t[An]))return!0;return!1}function wi(_t,qt){for(var Mt=-1,An=_t==null?0:_t.length,Kn=Array(An);++Mt<An;)Kn[Mt]=qt(_t[Mt],Mt,_t);return Kn}function Cs(_t,qt){for(var Mt=-1,An=qt.length,Kn=_t.length;++Mt<An;)_t[Kn+Mt]=qt[Mt];return _t}function wa(_t,qt,Mt,An){var Kn=-1,wr=_t==null?0:_t.length;for(An&&wr&&(Mt=_t[++Kn]);++Kn<wr;)Mt=qt(Mt,_t[Kn],Kn,_t);return Mt}function no(_t,qt,Mt,An){var Kn=_t==null?0:_t.length;for(An&&Kn&&(Mt=_t[--Kn]);Kn--;)Mt=qt(Mt,_t[Kn],Kn,_t);return Mt}function B(_t,qt){for(var Mt=-1,An=_t==null?0:_t.length;++Mt<An;)if(qt(_t[Mt],Mt,_t))return!0;return!1}var ye=vr("length");function Ze(_t){return _t.split("")}function ct(_t){return _t.match(Ni)||[]}function xt(_t,qt,Mt){var An;return Mt(_t,function(Kn,wr,Ui){if(qt(Kn,wr,Ui))return An=wr,!1}),An}function jt(_t,qt,Mt,An){for(var Kn=_t.length,wr=Mt+(An?1:-1);An?wr--:++wr<Kn;)if(qt(_t[wr],wr,_t))return wr;return-1}function cn(_t,qt,Mt){return qt===qt?Lo(_t,qt,Mt):jt(_t,jn,Mt)}function Dn(_t,qt,Mt,An){for(var Kn=Mt-1,wr=_t.length;++Kn<wr;)if(An(_t[Kn],qt))return Kn;return-1}function jn(_t){return _t!==_t}function nr(_t,qt){var Mt=_t==null?0:_t.length;return Mt?xi(_t,qt)/Mt:Pe}function vr(_t){return function(qt){return qt==null?t:qt[_t]}}function $r(_t){return function(qt){return _t==null?t:_t[qt]}}function zi(_t,qt,Mt,An,Kn){return Kn(_t,function(wr,Ui,Li){Mt=An?(An=!1,wr):qt(Mt,wr,Ui,Li)}),Mt}function di(_t,qt){var Mt=_t.length;for(_t.sort(qt);Mt--;)_t[Mt]=_t[Mt].value;return _t}function xi(_t,qt){for(var Mt,An=-1,Kn=_t.length;++An<Kn;){var wr=qt(_t[An]);wr!==t&&(Mt=Mt===t?wr:Mt+wr)}return Mt}function ro(_t,qt){for(var Mt=-1,An=Array(_t);++Mt<_t;)An[Mt]=qt(Mt);return An}function fo(_t,qt){return wi(qt,function(Mt){return[Mt,_t[Mt]]})}function Es(_t){return _t&&_t.slice(0,La(_t)+1).replace(Ln,"")}function Ur(_t){return function(qt){return _t(qt)}}function jo(_t,qt){return wi(qt,function(Mt){return _t[Mt]})}function hl(_t,qt){return _t.has(qt)}function Qo(_t,qt){for(var Mt=-1,An=_t.length;++Mt<An&&cn(qt,_t[Mt],0)>-1;);return Mt}function tu(_t,qt){for(var Mt=_t.length;Mt--&&cn(qt,_t[Mt],0)>-1;);return Mt}function na(_t,qt){for(var Mt=_t.length,An=0;Mt--;)_t[Mt]===qt&&++An;return An}var wu=$r(Ha),Ga=$r(Zu);function qa(_t){return"\\"+Xl[_t]}function ho(_t,qt){return _t==null?t:_t[qt]}function ra(_t){return Hs.test(_t)}function Ps(_t){return Va.test(_t)}function fs(_t){for(var qt,Mt=[];!(qt=_t.next()).done;)Mt.push(qt.value);return Mt}function dl(_t){var qt=-1,Mt=Array(_t.size);return _t.forEach(function(An,Kn){Mt[++qt]=[Kn,An]}),Mt}function zo(_t,qt){return function(Mt){return _t(qt(Mt))}}function es(_t,qt){for(var Mt=-1,An=_t.length,Kn=0,wr=[];++Mt<An;){var Ui=_t[Mt];(Ui===qt||Ui===g)&&(_t[Mt]=g,wr[Kn++]=Mt)}return wr}function ts(_t){var qt=-1,Mt=Array(_t.size);return _t.forEach(function(An){Mt[++qt]=An}),Mt}function Yu(_t){var qt=-1,Mt=Array(_t.size);return _t.forEach(function(An){Mt[++qt]=[An,An]}),Mt}function Lo(_t,qt,Mt){for(var An=Mt-1,Kn=_t.length;++An<Kn;)if(_t[An]===qt)return An;return-1}function xa(_t,qt,Mt){for(var An=Mt+1;An--;)if(_t[An]===qt)return An;return An}function $o(_t){return ra(_t)?Vo(_t):ye(_t)}function Uo(_t){return ra(_t)?Mo(_t):Ze(_t)}function La(_t){for(var qt=_t.length;qt--&&mr.test(_t.charAt(qt)););return qt}var Sa=$r(Tl);function Vo(_t){for(var qt=sl.lastIndex=0;sl.test(_t);)++qt;return qt}function Mo(_t){return _t.match(sl)||[]}function ia(_t){return _t.match(al)||[]}var Ms=function _t(qt){qt=qt==null?eo:Ho.defaults(eo.Object(),qt,Ho.pick(eo,bu));var Mt=qt.Array,An=qt.Date,Kn=qt.Error,wr=qt.Function,Ui=qt.Math,Li=qt.Object,Rl=qt.RegExp,ns=qt.String,Vi=qt.TypeError,oa=Mt.prototype,Ca=wr.prototype,sa=Li.prototype,aa=qt["__core-js_shared__"],la=Ca.toString,Qr=sa.hasOwnProperty,Ws=0,Ao=function(){var c=/[^.]+$/.exec(aa&&aa.keys&&aa.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),Si=sa.toString,Mi=la.call(Li),io=eo._,Oi=Rl("^"+la.call(Qr).replace(It,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),As=ul?qt.Buffer:t,hs=qt.Symbol,Is=qt.Uint8Array,xu=As?As.allocUnsafe:t,ua=zo(Li.getPrototypeOf,Li),po=Li.create,Bi=sa.propertyIsEnumerable,Go=oa.splice,ds=hs?hs.isConcatSpreadable:t,dr=hs?hs.iterator:t,Ea=hs?hs.toStringTag:t,Pa=function(){try{var c=If(Li,"defineProperty");return c({},"",{}),c}catch{}}(),Zs=qt.clearTimeout!==eo.clearTimeout&&qt.clearTimeout,rs=An&&An.now!==eo.Date.now&&An.now,bc=qt.setTimeout!==eo.setTimeout&&qt.setTimeout,ko=Ui.ceil,To=Ui.floor,Ks=Li.getOwnPropertySymbols,a=As?As.isBuffer:t,p=qt.isFinite,S=oa.join,V=zo(Li.keys,Li),oe=Ui.max,Se=Ui.min,st=An.now,Pt=qt.parseInt,zt=Ui.random,sn=oa.reverse,Nn=If(qt,"DataView"),Jn=If(qt,"Map"),zr=If(qt,"Promise"),go=If(qt,"Set"),Ki=If(qt,"WeakMap"),Do=If(Li,"create"),Hi=Ki&&new Ki,ps={},wc=Rf(Nn),ca=Rf(Jn),Ys=Rf(zr),Rs=Rf(go),Af=Rf(Ki),nu=hs?hs.prototype:t,mi=nu?nu.valueOf:t,qo=nu?nu.toString:t;function De(c){if(is(c)&&!ti(c)&&!(c instanceof Vr)){if(c instanceof No)return c;if(Qr.call(c,"__wrapped__"))return e2(c)}return new No(c)}var gs=function(){function c(){}return function(m){if(!Zo(m))return{};if(po)return po(m);c.prototype=m;var k=new c;return c.prototype=t,k}}();function Lu(){}function No(c,m){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!m,this.__index__=0,this.__values__=t}De.templateSettings={escape:Ot,evaluate:Pn,interpolate:tr,variable:"",imports:{_:De}},De.prototype=Lu.prototype,De.prototype.constructor=De,No.prototype=gs(Lu.prototype),No.prototype.constructor=No;function Vr(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ie,this.__views__=[]}function Wc(){var c=new Vr(this.__wrapped__);return c.__actions__=gl(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=gl(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=gl(this.__views__),c}function uh(){if(this.__filtered__){var c=new Vr(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function Zc(){var c=this.__wrapped__.value(),m=this.__dir__,k=ti(c),ee=m<0,be=k?c.length:0,Re=p3(0,be,this.__views__),rt=Re.start,gt=Re.end,Et=gt-rt,an=ee?gt:rt-1,ln=this.__iteratees__,vn=ln.length,$n=0,sr=Se(Et,this.__takeCount__);if(!k||!ee&&be==Et&&sr==Et)return ru(c,this.__actions__);var Pr=[];e:for(;Et--&&$n<sr;){an+=m;for(var ci=-1,Mr=c[an];++ci<vn;){var Ci=ln[ci],ki=Ci.iteratee,zl=Ci.type,Ya=ki(Mr);if(zl==W)Mr=Ya;else if(!Ya){if(zl==U)continue e;break e}}Pr[$n++]=Mr}return Pr}Vr.prototype=gs(Lu.prototype),Vr.prototype.constructor=Vr;function Wa(c){var m=-1,k=c==null?0:c.length;for(this.clear();++m<k;){var ee=c[m];this.set(ee[0],ee[1])}}function xc(){this.__data__=Do?Do(null):{},this.size=0}function kf(c){var m=this.has(c)&&delete this.__data__[c];return this.size-=m?1:0,m}function pd(c){var m=this.__data__;if(Do){var k=m[c];return k===f?t:k}return Qr.call(m,c)?m[c]:t}function Ju(c){var m=this.__data__;return Do?m[c]!==t:Qr.call(m,c)}function Kc(c,m){var k=this.__data__;return this.size+=this.has(c)?0:1,k[c]=Do&&m===t?f:m,this}Wa.prototype.clear=xc,Wa.prototype.delete=kf,Wa.prototype.get=pd,Wa.prototype.has=Ju,Wa.prototype.set=Kc;function Fl(c){var m=-1,k=c==null?0:c.length;for(this.clear();++m<k;){var ee=c[m];this.set(ee[0],ee[1])}}function gd(){this.__data__=[],this.size=0}function Yc(c){var m=this.__data__,k=yt(m,c);if(k<0)return!1;var ee=m.length-1;return k==ee?m.pop():Go.call(m,k,1),--this.size,!0}function Jc(c){var m=this.__data__,k=yt(m,c);return k<0?t:m[k][1]}function ch(c){return yt(this.__data__,c)>-1}function fh(c,m){var k=this.__data__,ee=yt(k,c);return ee<0?(++this.size,k.push([c,m])):k[ee][1]=m,this}Fl.prototype.clear=gd,Fl.prototype.delete=Yc,Fl.prototype.get=Jc,Fl.prototype.has=ch,Fl.prototype.set=fh;function Ma(c){var m=-1,k=c==null?0:c.length;for(this.clear();++m<k;){var ee=c[m];this.set(ee[0],ee[1])}}function hh(){this.size=0,this.__data__={hash:new Wa,map:new(Jn||Fl),string:new Wa}}function dh(c){var m=Yp(this,c).delete(c);return this.size-=m?1:0,m}function ph(c){return Yp(this,c).get(c)}function b(c){return Yp(this,c).has(c)}function P(c,m){var k=Yp(this,c),ee=k.size;return k.set(c,m),this.size+=k.size==ee?0:1,this}Ma.prototype.clear=hh,Ma.prototype.delete=dh,Ma.prototype.get=ph,Ma.prototype.has=b,Ma.prototype.set=P;function H(c){var m=-1,k=c==null?0:c.length;for(this.__data__=new Ma;++m<k;)this.add(c[m])}function se(c){return this.__data__.set(c,f),this}function _e(c){return this.__data__.has(c)}H.prototype.add=H.prototype.push=se,H.prototype.has=_e;function Ee(c){var m=this.__data__=new Fl(c);this.size=m.size}function Ae(){this.__data__=new Fl,this.size=0}function Te(c){var m=this.__data__,k=m.delete(c);return this.size=m.size,k}function Ne(c){return this.__data__.get(c)}function He(c){return this.__data__.has(c)}function ht(c,m){var k=this.__data__;if(k instanceof Fl){var ee=k.__data__;if(!Jn||ee.length<i-1)return ee.push([c,m]),this.size=++k.size,this;k=this.__data__=new Ma(ee)}return k.set(c,m),this.size=k.size,this}Ee.prototype.clear=Ae,Ee.prototype.delete=Te,Ee.prototype.get=Ne,Ee.prototype.has=He,Ee.prototype.set=ht;function Dt(c,m){var k=ti(c),ee=!k&&Ff(c),be=!k&&!ee&&Qc(c),Re=!k&&!ee&&!be&&Lh(c),rt=k||ee||be||Re,gt=rt?ro(c.length,ns):[],Et=gt.length;for(var an in c)(m||Qr.call(c,an))&&!(rt&&(an=="length"||be&&(an=="offset"||an=="parent")||Re&&(an=="buffer"||an=="byteLength"||an=="byteOffset")||Mc(an,Et)))&&gt.push(an);return gt}function Nt(c){var m=c.length;return m?c[Nf(0,m-1)]:t}function wt(c,m){return Jp(gl(c),Xn(m,0,c.length))}function Yt(c){return Jp(gl(c))}function $t(c,m,k){(k!==t&&!Au(c[m],k)||k===t&&!(m in c))&&kn(c,m,k)}function dt(c,m,k){var ee=c[m];(!(Qr.call(c,m)&&Au(ee,k))||k===t&&!(m in c))&&kn(c,m,k)}function yt(c,m){for(var k=c.length;k--;)if(Au(c[k][0],m))return k;return-1}function en(c,m,k,ee){return j(c,function(be,Re,rt){m(ee,be,k(be),rt)}),ee}function hn(c,m){return c&&ec(m,Js(m),c)}function nn(c,m){return c&&ec(m,vl(m),c)}function kn(c,m,k){m=="__proto__"&&Pa?Pa(c,m,{configurable:!0,enumerable:!0,value:k,writable:!0}):c[m]=k}function Sn(c,m){for(var k=-1,ee=m.length,be=Mt(ee),Re=c==null;++k<ee;)be[k]=Re?t:km(c,m[k]);return be}function Xn(c,m,k){return c===c&&(k!==t&&(c=c<=k?c:k),m!==t&&(c=c>=m?c:m)),c}function l(c,m,k,ee,be,Re){var rt,gt=m&y,Et=m&x,an=m&_;if(k&&(rt=be?k(c,ee,be,Re):k(c)),rt!==t)return rt;if(!Zo(c))return c;var ln=ti(c);if(ln){if(rt=m3(c),!gt)return gl(c,rt)}else{var vn=ka(c),$n=vn==Ve||vn==K;if(Qc(c))return Ey(c,gt);if(vn==Ue||vn==ne||$n&&!be){if(rt=Et||$n?{}:Gy(c),!gt)return Et?o3(c,nn(rt,c)):i3(c,hn(rt,c))}else{if(!Gr[vn])return be?c:{};rt=v3(c,vn,gt)}}Re||(Re=new Ee);var sr=Re.get(c);if(sr)return sr;Re.set(c,rt),b2(c)?c.forEach(function(Mr){rt.add(l(Mr,m,k,Mr,c,Re))}):y2(c)&&c.forEach(function(Mr,Ci){rt.set(Ci,l(Mr,m,k,Ci,c,Re))});var Pr=an?Et?mm:gm:Et?vl:Js,ci=ln?t:Pr(c);return Po(ci||c,function(Mr,Ci){ci&&(Ci=Mr,Mr=c[Ci]),dt(rt,Ci,l(Mr,m,k,Ci,c,Re))}),rt}function h(c){var m=Js(c);return function(k){return v(k,c,m)}}function v(c,m,k){var ee=k.length;if(c==null)return!ee;for(c=Li(c);ee--;){var be=k[ee],Re=m[be],rt=c[be];if(rt===t&&!(be in c)||!Re(rt))return!1}return!0}function w(c,m,k){if(typeof c!="function")throw new Vi(o);return bd(function(){c.apply(t,k)},m)}function C(c,m,k,ee){var be=-1,Re=cl,rt=!0,gt=c.length,Et=[],an=m.length;if(!gt)return Et;k&&(m=wi(m,Ur(k))),ee?(Re=fl,rt=!1):m.length>=i&&(Re=hl,rt=!1,m=new H(m));e:for(;++be<gt;){var ln=c[be],vn=k==null?ln:k(ln);if(ln=ee||ln!==0?ln:0,rt&&vn===vn){for(var $n=an;$n--;)if(m[$n]===vn)continue e;Et.push(ln)}else Re(m,vn,ee)||Et.push(ln)}return Et}var j=Ty(Xt),X=Ty(yn,!0);function te(c,m){var k=!0;return j(c,function(ee,be,Re){return k=!!m(ee,be,Re),k}),k}function de(c,m,k){for(var ee=-1,be=c.length;++ee<be;){var Re=c[ee],rt=m(Re);if(rt!=null&&(gt===t?rt===rt&&!jl(rt):k(rt,gt)))var gt=rt,Et=Re}return Et}function Le(c,m,k,ee){var be=c.length;for(k=li(k),k<0&&(k=-k>be?0:be+k),ee=ee===t||ee>be?be:li(ee),ee<0&&(ee+=be),ee=k>ee?0:x2(ee);k<ee;)c[k++]=m;return c}function Je(c,m){var k=[];return j(c,function(ee,be,Re){m(ee,be,Re)&&k.push(ee)}),k}function ze(c,m,k,ee,be){var Re=-1,rt=c.length;for(k||(k=_3),be||(be=[]);++Re<rt;){var gt=c[Re];m>0&&k(gt)?m>1?ze(gt,m-1,k,ee,be):Cs(be,gt):ee||(be[be.length]=gt)}return be}var vt=Dy(),At=Dy(!0);function Xt(c,m){return c&&vt(c,m,Js)}function yn(c,m){return c&&At(c,m,Js)}function bn(c,m){return qs(m,function(k){return Ac(c[k])})}function ur(c,m){m=Mu(m,c);for(var k=0,ee=m.length;c!=null&&k<ee;)c=c[tc(m[k++])];return k&&k==ee?c:t}function Ye(c,m,k){var ee=m(c);return ti(c)?ee:Cs(ee,k(c))}function tt(c){return c==null?c===t?Ct:ge:Ea&&Ea in Li(c)?d3(c):E3(c)}function ft(c,m){return c>m}function Bt(c,m){return c!=null&&Qr.call(c,m)}function bt(c,m){return c!=null&&m in Li(c)}function Tt(c,m,k){return c>=Se(m,k)&&c<oe(m,k)}function me(c,m,k){for(var ee=k?fl:cl,be=c[0].length,Re=c.length,rt=Re,gt=Mt(Re),Et=1/0,an=[];rt--;){var ln=c[rt];rt&&m&&(ln=wi(ln,Ur(m))),Et=Se(ln.length,Et),gt[rt]=!k&&(m||be>=120&&ln.length>=120)?new H(rt&&ln):t}ln=c[0];var vn=-1,$n=gt[0];e:for(;++vn<be&&an.length<Et;){var sr=ln[vn],Pr=m?m(sr):sr;if(sr=k||sr!==0?sr:0,!($n?hl($n,Pr):ee(an,Pr,k))){for(rt=Re;--rt;){var ci=gt[rt];if(!(ci?hl(ci,Pr):ee(c[rt],Pr,k)))continue e}$n&&$n.push(Pr),an.push(sr)}}return an}function Me(c,m,k,ee){return Xt(c,function(be,Re,rt){m(ee,k(be),Re,rt)}),ee}function Oe(c,m,k){m=Mu(m,c),c=Ky(c,m);var ee=c==null?c:c[tc(su(m))];return ee==null?t:bi(ee,c,k)}function Be(c){return is(c)&&tt(c)==ne}function Fe(c){return is(c)&&tt(c)==fn}function je(c){return is(c)&&tt(c)==ue}function lt(c,m,k,ee,be){return c===m?!0:c==null||m==null||!is(c)&&!is(m)?c!==c&&m!==m:ut(c,m,k,ee,lt,be)}function ut(c,m,k,ee,be,Re){var rt=ti(c),gt=ti(m),Et=rt?he:ka(c),an=gt?he:ka(m);Et=Et==ne?Ue:Et,an=an==ne?Ue:an;var ln=Et==Ue,vn=an==Ue,$n=Et==an;if($n&&Qc(c)){if(!Qc(m))return!1;rt=!0,ln=!1}if($n&&!ln)return Re||(Re=new Ee),rt||Lh(c)?Uy(c,m,k,ee,be,Re):f3(c,m,Et,k,ee,be,Re);if(!(k&M)){var sr=ln&&Qr.call(c,"__wrapped__"),Pr=vn&&Qr.call(m,"__wrapped__");if(sr||Pr){var ci=sr?c.value():c,Mr=Pr?m.value():m;return Re||(Re=new Ee),be(ci,Mr,k,ee,Re)}}return $n?(Re||(Re=new Ee),h3(c,m,k,ee,be,Re)):!1}function pt(c){return is(c)&&ka(c)==pe}function Lt(c,m,k,ee){var be=k.length,Re=be,rt=!ee;if(c==null)return!Re;for(c=Li(c);be--;){var gt=k[be];if(rt&&gt[2]?gt[1]!==c[gt[0]]:!(gt[0]in c))return!1}for(;++be<Re;){gt=k[be];var Et=gt[0],an=c[Et],ln=gt[1];if(rt&&gt[2]){if(an===t&&!(Et in c))return!1}else{var vn=new Ee;if(ee)var $n=ee(an,ln,Et,c,m,vn);if(!($n===t?lt(ln,an,M|D,ee,vn):$n))return!1}}return!0}function St(c){if(!Zo(c)||w3(c))return!1;var m=Ac(c)?Oi:jr;return m.test(Rf(c))}function on(c){return is(c)&&tt(c)==Ge}function zn(c){return is(c)&&ka(c)==Xe}function Gn(c){return is(c)&&rg(c.length)&&!!Sr[tt(c)]}function Qn(c){return typeof c=="function"?c:c==null?yl:typeof c=="object"?ti(c)?Su(c[0],c[1]):ms(c):N2(c)}function vi(c){if(!_d(c))return V(c);var m=[];for(var k in Li(c))Qr.call(c,k)&&k!="constructor"&&m.push(k);return m}function Ai(c){if(!Zo(c))return C3(c);var m=_d(c),k=[];for(var ee in c)ee=="constructor"&&(m||!Qr.call(c,ee))||k.push(ee);return k}function ei(c,m){return c<m}function Ii(c,m){var k=-1,ee=ml(c)?Mt(c.length):[];return j(c,function(be,Re,rt){ee[++k]=m(be,Re,rt)}),ee}function ms(c){var m=ym(c);return m.length==1&&m[0][2]?Wy(m[0][0],m[0][1]):function(k){return k===c||Lt(k,c,m)}}function Su(c,m){return bm(c)&&qy(m)?Wy(tc(c),m):function(k){var ee=km(k,c);return ee===t&&ee===m?Tm(k,c):lt(m,ee,M|D)}}function fa(c,m,k,ee,be){c!==m&&vt(m,function(Re,rt){if(be||(be=new Ee),Zo(Re))Tf(c,m,rt,k,fa,ee,be);else{var gt=ee?ee(xm(c,rt),Re,rt+"",c,m,be):t;gt===t&&(gt=Re),$t(c,rt,gt)}},vl)}function Tf(c,m,k,ee,be,Re,rt){var gt=xm(c,k),Et=xm(m,k),an=rt.get(Et);if(an){$t(c,k,an);return}var ln=Re?Re(gt,Et,k+"",c,m,rt):t,vn=ln===t;if(vn){var $n=ti(Et),sr=!$n&&Qc(Et),Pr=!$n&&!sr&&Lh(Et);ln=Et,$n||sr||Pr?ti(gt)?ln=gt:vs(gt)?ln=gl(gt):sr?(vn=!1,ln=Ey(Et,!0)):Pr?(vn=!1,ln=Py(Et,!0)):ln=[]:wd(Et)||Ff(Et)?(ln=gt,Ff(gt)?ln=L2(gt):(!Zo(gt)||Ac(gt))&&(ln=Gy(Et))):vn=!1}vn&&(rt.set(Et,ln),be(ln,Et,ee,Re,rt),rt.delete(Et)),$t(c,k,ln)}function Za(c,m){var k=c.length;if(k)return m+=m<0?k:0,Mc(m,k)?c[m]:t}function Xu(c,m,k){m.length?m=wi(m,function(Re){return ti(Re)?function(rt){return ur(rt,Re.length===1?Re[0]:Re)}:Re}):m=[yl];var ee=-1;m=wi(m,Ur(Cr()));var be=Ii(c,function(Re,rt,gt){var Et=wi(m,function(an){return an(Re)});return{criteria:Et,index:++ee,value:Re}});return di(be,function(Re,rt){return r3(Re,rt,k)})}function ha(c,m){return Wo(c,m,function(k,ee){return Tm(c,ee)})}function Wo(c,m,k){for(var ee=-1,be=m.length,Re={};++ee<be;){var rt=m[ee],gt=ur(c,rt);k(gt,rt)&&Lc(Re,Mu(rt,c),gt)}return Re}function oo(c){return function(m){return ur(m,c)}}function gh(c,m,k,ee){var be=ee?Dn:cn,Re=-1,rt=m.length,gt=c;for(c===m&&(m=gl(m)),k&&(gt=wi(c,Ur(k)));++Re<rt;)for(var Et=0,an=m[Re],ln=k?k(an):an;(Et=be(gt,ln,Et,ee))>-1;)gt!==c&&Go.call(gt,Et,1),Go.call(c,Et,1);return c}function Df(c,m){for(var k=c?m.length:0,ee=k-1;k--;){var be=m[k];if(k==ee||be!==Re){var Re=be;Mc(be)?Go.call(c,be,1):Sc(c,be)}}return c}function Nf(c,m){return c+To(zt()*(m-c+1))}function Bf(c,m,k,ee){for(var be=-1,Re=oe(ko((m-c)/(k||1)),0),rt=Mt(Re);Re--;)rt[ee?Re:++be]=c,c+=k;return rt}function mh(c,m){var k="";if(!c||m<1||m>re)return k;do m%2&&(k+=c),m=To(m/2),m&&(c+=c);while(m);return k}function ai(c,m){return Lm(Zy(c,m,yl),c+"")}function vh(c){return Nt(Sh(c))}function jp(c,m){var k=Sh(c);return Jp(k,Xn(m,0,k.length))}function Lc(c,m,k,ee){if(!Zo(c))return c;m=Mu(m,c);for(var be=-1,Re=m.length,rt=Re-1,gt=c;gt!=null&&++be<Re;){var Et=tc(m[be]),an=k;if(Et==="__proto__"||Et==="constructor"||Et==="prototype")return c;if(be!=rt){var ln=gt[Et];an=ee?ee(ln,Et,gt):t,an===t&&(an=Zo(ln)?ln:Mc(m[be+1])?[]:{})}dt(gt,Et,an),gt=gt[Et]}return c}var Cu=Hi?function(c,m){return Hi.set(c,m),c}:yl,zp=Pa?function(c,m){return Pa(c,"toString",{configurable:!0,enumerable:!1,value:Nm(m),writable:!0})}:yl;function $p(c){return Jp(Sh(c))}function pl(c,m,k){var ee=-1,be=c.length;m<0&&(m=-m>be?0:be+m),k=k>be?be:k,k<0&&(k+=be),be=m>k?0:k-m>>>0,m>>>=0;for(var Re=Mt(be);++ee<be;)Re[ee]=c[ee+m];return Re}function Up(c,m){var k;return j(c,function(ee,be,Re){return k=m(ee,be,Re),!k}),!!k}function Eu(c,m,k){var ee=0,be=c==null?ee:c.length;if(typeof m=="number"&&m===m&&be<=J){for(;ee<be;){var Re=ee+be>>>1,rt=c[Re];rt!==null&&!jl(rt)&&(k?rt<=m:rt<m)?ee=Re+1:be=Re}return be}return md(c,m,yl,k)}function md(c,m,k,ee){var be=0,Re=c==null?0:c.length;if(Re===0)return 0;m=k(m);for(var rt=m!==m,gt=m===null,Et=jl(m),an=m===t;be<Re;){var ln=To((be+Re)/2),vn=k(c[ln]),$n=vn!==t,sr=vn===null,Pr=vn===vn,ci=jl(vn);if(rt)var Mr=ee||Pr;else an?Mr=Pr&&(ee||$n):gt?Mr=Pr&&$n&&(ee||!sr):Et?Mr=Pr&&$n&&!sr&&(ee||!ci):sr||ci?Mr=!1:Mr=ee?vn<=m:vn<m;Mr?be=ln+1:Re=ln}return Se(Re,A)}function vd(c,m){for(var k=-1,ee=c.length,be=0,Re=[];++k<ee;){var rt=c[k],gt=m?m(rt):rt;if(!k||!Au(gt,Et)){var Et=gt;Re[be++]=rt===0?0:rt}}return Re}function Vp(c){return typeof c=="number"?c:jl(c)?Pe:+c}function Aa(c){if(typeof c=="string")return c;if(ti(c))return wi(c,Aa)+"";if(jl(c))return qo?qo.call(c):"";var m=c+"";return m=="0"&&1/c==-1/0?"-0":m}function Qu(c,m,k){var ee=-1,be=cl,Re=c.length,rt=!0,gt=[],Et=gt;if(k)rt=!1,be=fl;else if(Re>=i){var an=m?null:u3(c);if(an)return ts(an);rt=!1,be=hl,Et=new H}else Et=m?[]:gt;e:for(;++ee<Re;){var ln=c[ee],vn=m?m(ln):ln;if(ln=k||ln!==0?ln:0,rt&&vn===vn){for(var $n=Et.length;$n--;)if(Et[$n]===vn)continue e;m&&Et.push(vn),gt.push(ln)}else be(Et,vn,k)||(Et!==gt&&Et.push(vn),gt.push(ln))}return gt}function Sc(c,m){return m=Mu(m,c),c=Ky(c,m),c==null||delete c[tc(su(m))]}function yh(c,m,k,ee){return Lc(c,m,k(ur(c,m)),ee)}function Cc(c,m,k,ee){for(var be=c.length,Re=ee?be:-1;(ee?Re--:++Re<be)&&m(c[Re],Re,c););return k?pl(c,ee?0:Re,ee?Re+1:be):pl(c,ee?Re+1:0,ee?be:Re)}function ru(c,m){var k=c;return k instanceof Vr&&(k=k.value()),wa(m,function(ee,be){return be.func.apply(be.thisArg,Cs([ee],be.args))},k)}function iu(c,m,k){var ee=c.length;if(ee<2)return ee?Qu(c[0]):[];for(var be=-1,Re=Mt(ee);++be<ee;)for(var rt=c[be],gt=-1;++gt<ee;)gt!=be&&(Re[be]=C(Re[be]||rt,c[gt],m,k));return Qu(ze(Re,1),m,k)}function Pu(c,m,k){for(var ee=-1,be=c.length,Re=m.length,rt={};++ee<be;){var gt=ee<Re?m[ee]:t;k(rt,c[ee],gt)}return rt}function Xc(c){return vs(c)?c:[]}function Of(c){return typeof c=="function"?c:yl}function Mu(c,m){return ti(c)?c:bm(c,m)?[c]:Qy(Wi(c))}var fm=ai;function ou(c,m,k){var ee=c.length;return k=k===t?ee:k,!m&&k>=ee?c:pl(c,m,k)}var _h=Zs||function(c){return eo.clearTimeout(c)};function Ey(c,m){if(m)return c.slice();var k=c.length,ee=xu?xu(k):new c.constructor(k);return c.copy(ee),ee}function hm(c){var m=new c.constructor(c.byteLength);return new Is(m).set(new Is(c)),m}function e3(c,m){var k=m?hm(c.buffer):c.buffer;return new c.constructor(k,c.byteOffset,c.byteLength)}function t3(c){var m=new c.constructor(c.source,Hr.exec(c));return m.lastIndex=c.lastIndex,m}function n3(c){return mi?Li(mi.call(c)):{}}function Py(c,m){var k=m?hm(c.buffer):c.buffer;return new c.constructor(k,c.byteOffset,c.length)}function My(c,m){if(c!==m){var k=c!==t,ee=c===null,be=c===c,Re=jl(c),rt=m!==t,gt=m===null,Et=m===m,an=jl(m);if(!gt&&!an&&!Re&&c>m||Re&&rt&&Et&&!gt&&!an||ee&&rt&&Et||!k&&Et||!be)return 1;if(!ee&&!Re&&!an&&c<m||an&&k&&be&&!ee&&!Re||gt&&k&&be||!rt&&be||!Et)return-1}return 0}function r3(c,m,k){for(var ee=-1,be=c.criteria,Re=m.criteria,rt=be.length,gt=k.length;++ee<rt;){var Et=My(be[ee],Re[ee]);if(Et){if(ee>=gt)return Et;var an=k[ee];return Et*(an=="desc"?-1:1)}}return c.index-m.index}function Ay(c,m,k,ee){for(var be=-1,Re=c.length,rt=k.length,gt=-1,Et=m.length,an=oe(Re-rt,0),ln=Mt(Et+an),vn=!ee;++gt<Et;)ln[gt]=m[gt];for(;++be<rt;)(vn||be<Re)&&(ln[k[be]]=c[be]);for(;an--;)ln[gt++]=c[be++];return ln}function ky(c,m,k,ee){for(var be=-1,Re=c.length,rt=-1,gt=k.length,Et=-1,an=m.length,ln=oe(Re-gt,0),vn=Mt(ln+an),$n=!ee;++be<ln;)vn[be]=c[be];for(var sr=be;++Et<an;)vn[sr+Et]=m[Et];for(;++rt<gt;)($n||be<Re)&&(vn[sr+k[rt]]=c[be++]);return vn}function gl(c,m){var k=-1,ee=c.length;for(m||(m=Mt(ee));++k<ee;)m[k]=c[k];return m}function ec(c,m,k,ee){var be=!k;k||(k={});for(var Re=-1,rt=m.length;++Re<rt;){var gt=m[Re],Et=ee?ee(k[gt],c[gt],gt,k,c):t;Et===t&&(Et=c[gt]),be?kn(k,gt,Et):dt(k,gt,Et)}return k}function i3(c,m){return ec(c,_m(c),m)}function o3(c,m){return ec(c,Vy(c),m)}function Hp(c,m){return function(k,ee){var be=ti(k)?Ku:en,Re=m?m():{};return be(k,c,Cr(ee,2),Re)}}function bh(c){return ai(function(m,k){var ee=-1,be=k.length,Re=be>1?k[be-1]:t,rt=be>2?k[2]:t;for(Re=c.length>3&&typeof Re=="function"?(be--,Re):t,rt&&Ka(k[0],k[1],rt)&&(Re=be<3?t:Re,be=1),m=Li(m);++ee<be;){var gt=k[ee];gt&&c(m,gt,ee,Re)}return m})}function Ty(c,m){return function(k,ee){if(k==null)return k;if(!ml(k))return c(k,ee);for(var be=k.length,Re=m?be:-1,rt=Li(k);(m?Re--:++Re<be)&&ee(rt[Re],Re,rt)!==!1;);return k}}function Dy(c){return function(m,k,ee){for(var be=-1,Re=Li(m),rt=ee(m),gt=rt.length;gt--;){var Et=rt[c?gt:++be];if(k(Re[Et],Et,Re)===!1)break}return m}}function s3(c,m,k){var ee=m&N,be=yd(c);function Re(){var rt=this&&this!==eo&&this instanceof Re?be:c;return rt.apply(ee?k:this,arguments)}return Re}function Ny(c){return function(m){m=Wi(m);var k=ra(m)?Uo(m):t,ee=k?k[0]:m.charAt(0),be=k?ou(k,1).join(""):m.slice(1);return ee[c]()+be}}function wh(c){return function(m){return wa(T2(k2(m).replace(Tr,"")),c,"")}}function yd(c){return function(){var m=arguments;switch(m.length){case 0:return new c;case 1:return new c(m[0]);case 2:return new c(m[0],m[1]);case 3:return new c(m[0],m[1],m[2]);case 4:return new c(m[0],m[1],m[2],m[3]);case 5:return new c(m[0],m[1],m[2],m[3],m[4]);case 6:return new c(m[0],m[1],m[2],m[3],m[4],m[5]);case 7:return new c(m[0],m[1],m[2],m[3],m[4],m[5],m[6])}var k=gs(c.prototype),ee=c.apply(k,m);return Zo(ee)?ee:k}}function a3(c,m,k){var ee=yd(c);function be(){for(var Re=arguments.length,rt=Mt(Re),gt=Re,Et=xh(be);gt--;)rt[gt]=arguments[gt];var an=Re<3&&rt[0]!==Et&&rt[Re-1]!==Et?[]:es(rt,Et);if(Re-=an.length,Re<k)return Fy(c,m,Gp,be.placeholder,t,rt,an,t,t,k-Re);var ln=this&&this!==eo&&this instanceof be?ee:c;return bi(ln,this,rt)}return be}function By(c){return function(m,k,ee){var be=Li(m);if(!ml(m)){var Re=Cr(k,3);m=Js(m),k=function(gt){return Re(be[gt],gt,be)}}var rt=c(m,k,ee);return rt>-1?be[Re?m[rt]:rt]:t}}function Oy(c){return Pc(function(m){var k=m.length,ee=k,be=No.prototype.thru;for(c&&m.reverse();ee--;){var Re=m[ee];if(typeof Re!="function")throw new Vi(o);if(be&&!rt&&Kp(Re)=="wrapper")var rt=new No([],!0)}for(ee=rt?ee:k;++ee<k;){Re=m[ee];var gt=Kp(Re),Et=gt=="wrapper"?vm(Re):t;Et&&wm(Et[0])&&Et[1]==(xe|Y|le|G)&&!Et[4].length&&Et[9]==1?rt=rt[Kp(Et[0])].apply(rt,Et[3]):rt=Re.length==1&&wm(Re)?rt[gt]():rt.thru(Re)}return function(){var an=arguments,ln=an[0];if(rt&&an.length==1&&ti(ln))return rt.plant(ln).value();for(var vn=0,$n=k?m[vn].apply(this,an):ln;++vn<k;)$n=m[vn].call(this,$n);return $n}})}function Gp(c,m,k,ee,be,Re,rt,gt,Et,an){var ln=m&xe,vn=m&N,$n=m&O,sr=m&(Y|Q),Pr=m&R,ci=$n?t:yd(c);function Mr(){for(var Ci=arguments.length,ki=Mt(Ci),zl=Ci;zl--;)ki[zl]=arguments[zl];if(sr)var Ya=xh(Mr),$l=na(ki,Ya);if(ee&&(ki=Ay(ki,ee,be,sr)),Re&&(ki=ky(ki,Re,rt,sr)),Ci-=$l,sr&&Ci<an){var ys=es(ki,Ya);return Fy(c,m,Gp,Mr.placeholder,k,ki,ys,gt,Et,an-Ci)}var ku=vn?k:this,Tc=$n?ku[c]:c;return Ci=ki.length,gt?ki=P3(ki,gt):Pr&&Ci>1&&ki.reverse(),ln&&Et<Ci&&(ki.length=Et),this&&this!==eo&&this instanceof Mr&&(Tc=ci||yd(Tc)),Tc.apply(ku,ki)}return Mr}function Iy(c,m){return function(k,ee){return Me(k,c,m(ee),{})}}function qp(c,m){return function(k,ee){var be;if(k===t&&ee===t)return m;if(k!==t&&(be=k),ee!==t){if(be===t)return ee;typeof k=="string"||typeof ee=="string"?(k=Aa(k),ee=Aa(ee)):(k=Vp(k),ee=Vp(ee)),be=c(k,ee)}return be}}function dm(c){return Pc(function(m){return m=wi(m,Ur(Cr())),ai(function(k){var ee=this;return c(m,function(be){return bi(be,ee,k)})})})}function Wp(c,m){m=m===t?" ":Aa(m);var k=m.length;if(k<2)return k?mh(m,c):m;var ee=mh(m,ko(c/$o(m)));return ra(m)?ou(Uo(ee),0,c).join(""):ee.slice(0,c)}function l3(c,m,k,ee){var be=m&N,Re=yd(c);function rt(){for(var gt=-1,Et=arguments.length,an=-1,ln=ee.length,vn=Mt(ln+Et),$n=this&&this!==eo&&this instanceof rt?Re:c;++an<ln;)vn[an]=ee[an];for(;Et--;)vn[an++]=arguments[++gt];return bi($n,be?k:this,vn)}return rt}function Ry(c){return function(m,k,ee){return ee&&typeof ee!="number"&&Ka(m,k,ee)&&(k=ee=t),m=kc(m),k===t?(k=m,m=0):k=kc(k),ee=ee===t?m<k?1:-1:kc(ee),Bf(m,k,ee,c)}}function Zp(c){return function(m,k){return typeof m=="string"&&typeof k=="string"||(m=au(m),k=au(k)),c(m,k)}}function Fy(c,m,k,ee,be,Re,rt,gt,Et,an){var ln=m&Y,vn=ln?rt:t,$n=ln?t:rt,sr=ln?Re:t,Pr=ln?t:Re;m|=ln?le:ce,m&=~(ln?ce:le),m&F||(m&=-4);var ci=[c,m,be,sr,vn,Pr,$n,gt,Et,an],Mr=k.apply(t,ci);return wm(c)&&Yy(Mr,ci),Mr.placeholder=ee,Jy(Mr,c,m)}function pm(c){var m=Ui[c];return function(k,ee){if(k=au(k),ee=ee==null?0:Se(li(ee),292),ee&&p(k)){var be=(Wi(k)+"e").split("e"),Re=m(be[0]+"e"+(+be[1]+ee));return be=(Wi(Re)+"e").split("e"),+(be[0]+"e"+(+be[1]-ee))}return m(k)}}var u3=go&&1/ts(new go([,-0]))[1]==ie?function(c){return new go(c)}:Im;function jy(c){return function(m){var k=ka(m);return k==pe?dl(m):k==Xe?Yu(m):fo(m,c(m))}}function Ec(c,m,k,ee,be,Re,rt,gt){var Et=m&O;if(!Et&&typeof c!="function")throw new Vi(o);var an=ee?ee.length:0;if(an||(m&=-97,ee=be=t),rt=rt===t?rt:oe(li(rt),0),gt=gt===t?gt:li(gt),an-=be?be.length:0,m&ce){var ln=ee,vn=be;ee=be=t}var $n=Et?t:vm(c),sr=[c,m,k,ee,be,ln,vn,Re,rt,gt];if($n&&S3(sr,$n),c=sr[0],m=sr[1],k=sr[2],ee=sr[3],be=sr[4],gt=sr[9]=sr[9]===t?Et?0:c.length:oe(sr[9]-an,0),!gt&&m&(Y|Q)&&(m&=-25),!m||m==N)var Pr=s3(c,m,k);else m==Y||m==Q?Pr=a3(c,m,gt):(m==le||m==(N|le))&&!be.length?Pr=l3(c,m,k,ee):Pr=Gp.apply(t,sr);var ci=$n?Cu:Yy;return Jy(ci(Pr,sr),c,m)}function zy(c,m,k,ee){return c===t||Au(c,sa[k])&&!Qr.call(ee,k)?m:c}function $y(c,m,k,ee,be,Re){return Zo(c)&&Zo(m)&&(Re.set(m,c),fa(c,m,t,$y,Re),Re.delete(m)),c}function c3(c){return wd(c)?t:c}function Uy(c,m,k,ee,be,Re){var rt=k&M,gt=c.length,Et=m.length;if(gt!=Et&&!(rt&&Et>gt))return!1;var an=Re.get(c),ln=Re.get(m);if(an&&ln)return an==m&&ln==c;var vn=-1,$n=!0,sr=k&D?new H:t;for(Re.set(c,m),Re.set(m,c);++vn<gt;){var Pr=c[vn],ci=m[vn];if(ee)var Mr=rt?ee(ci,Pr,vn,m,c,Re):ee(Pr,ci,vn,c,m,Re);if(Mr!==t){if(Mr)continue;$n=!1;break}if(sr){if(!B(m,function(Ci,ki){if(!hl(sr,ki)&&(Pr===Ci||be(Pr,Ci,k,ee,Re)))return sr.push(ki)})){$n=!1;break}}else if(!(Pr===ci||be(Pr,ci,k,ee,Re))){$n=!1;break}}return Re.delete(c),Re.delete(m),$n}function f3(c,m,k,ee,be,Re,rt){switch(k){case pn:if(c.byteLength!=m.byteLength||c.byteOffset!=m.byteOffset)return!1;c=c.buffer,m=m.buffer;case fn:return!(c.byteLength!=m.byteLength||!Re(new Is(c),new Is(m)));case T:case ue:case ve:return Au(+c,+m);case Ce:return c.name==m.name&&c.message==m.message;case Ge:case ot:return c==m+"";case pe:var gt=dl;case Xe:var Et=ee&M;if(gt||(gt=ts),c.size!=m.size&&!Et)return!1;var an=rt.get(c);if(an)return an==m;ee|=D,rt.set(c,m);var ln=Uy(gt(c),gt(m),ee,be,Re,rt);return rt.delete(c),ln;case kt:if(mi)return mi.call(c)==mi.call(m)}return!1}function h3(c,m,k,ee,be,Re){var rt=k&M,gt=gm(c),Et=gt.length,an=gm(m),ln=an.length;if(Et!=ln&&!rt)return!1;for(var vn=Et;vn--;){var $n=gt[vn];if(!(rt?$n in m:Qr.call(m,$n)))return!1}var sr=Re.get(c),Pr=Re.get(m);if(sr&&Pr)return sr==m&&Pr==c;var ci=!0;Re.set(c,m),Re.set(m,c);for(var Mr=rt;++vn<Et;){$n=gt[vn];var Ci=c[$n],ki=m[$n];if(ee)var zl=rt?ee(ki,Ci,$n,m,c,Re):ee(Ci,ki,$n,c,m,Re);if(!(zl===t?Ci===ki||be(Ci,ki,k,ee,Re):zl)){ci=!1;break}Mr||(Mr=$n=="constructor")}if(ci&&!Mr){var Ya=c.constructor,$l=m.constructor;Ya!=$l&&"constructor"in c&&"constructor"in m&&!(typeof Ya=="function"&&Ya instanceof Ya&&typeof $l=="function"&&$l instanceof $l)&&(ci=!1)}return Re.delete(c),Re.delete(m),ci}function Pc(c){return Lm(Zy(c,t,r2),c+"")}function gm(c){return Ye(c,Js,_m)}function mm(c){return Ye(c,vl,Vy)}var vm=Hi?function(c){return Hi.get(c)}:Im;function Kp(c){for(var m=c.name+"",k=ps[m],ee=Qr.call(ps,m)?k.length:0;ee--;){var be=k[ee],Re=be.func;if(Re==null||Re==c)return be.name}return m}function xh(c){var m=Qr.call(De,"placeholder")?De:c;return m.placeholder}function Cr(){var c=De.iteratee||Bm;return c=c===Bm?Qn:c,arguments.length?c(arguments[0],arguments[1]):c}function Yp(c,m){var k=c.__data__;return b3(m)?k[typeof m=="string"?"string":"hash"]:k.map}function ym(c){for(var m=Js(c),k=m.length;k--;){var ee=m[k],be=c[ee];m[k]=[ee,be,qy(be)]}return m}function If(c,m){var k=ho(c,m);return St(k)?k:t}function d3(c){var m=Qr.call(c,Ea),k=c[Ea];try{c[Ea]=t;var ee=!0}catch{}var be=Si.call(c);return ee&&(m?c[Ea]=k:delete c[Ea]),be}var _m=Ks?function(c){return c==null?[]:(c=Li(c),qs(Ks(c),function(m){return Bi.call(c,m)}))}:Rm,Vy=Ks?function(c){for(var m=[];c;)Cs(m,_m(c)),c=ua(c);return m}:Rm,ka=tt;(Nn&&ka(new Nn(new ArrayBuffer(1)))!=pn||Jn&&ka(new Jn)!=pe||zr&&ka(zr.resolve())!=Qe||go&&ka(new go)!=Xe||Ki&&ka(new Ki)!=Ut)&&(ka=function(c){var m=tt(c),k=m==Ue?c.constructor:t,ee=k?Rf(k):"";if(ee)switch(ee){case wc:return pn;case ca:return pe;case Ys:return Qe;case Rs:return Xe;case Af:return Ut}return m});function p3(c,m,k){for(var ee=-1,be=k.length;++ee<be;){var Re=k[ee],rt=Re.size;switch(Re.type){case"drop":c+=rt;break;case"dropRight":m-=rt;break;case"take":m=Se(m,c+rt);break;case"takeRight":c=oe(c,m-rt);break}}return{start:c,end:m}}function g3(c){var m=c.match(Cn);return m?m[1].split(xr):[]}function Hy(c,m,k){m=Mu(m,c);for(var ee=-1,be=m.length,Re=!1;++ee<be;){var rt=tc(m[ee]);if(!(Re=c!=null&&k(c,rt)))break;c=c[rt]}return Re||++ee!=be?Re:(be=c==null?0:c.length,!!be&&rg(be)&&Mc(rt,be)&&(ti(c)||Ff(c)))}function m3(c){var m=c.length,k=new c.constructor(m);return m&&typeof c[0]=="string"&&Qr.call(c,"index")&&(k.index=c.index,k.input=c.input),k}function Gy(c){return typeof c.constructor=="function"&&!_d(c)?gs(ua(c)):{}}function v3(c,m,k){var ee=c.constructor;switch(m){case fn:return hm(c);case T:case ue:return new ee(+c);case pn:return e3(c,k);case et:case it:case nt:case Vt:case Qt:case On:case wn:case Tn:case ar:return Py(c,k);case pe:return new ee;case ve:case ot:return new ee(c);case Ge:return t3(c);case Xe:return new ee;case kt:return n3(c)}}function y3(c,m){var k=m.length;if(!k)return c;var ee=k-1;return m[ee]=(k>1?"& ":"")+m[ee],m=m.join(k>2?", ":" "),c.replace(at,`{
/* [wrapped with `+m+`] */
`)}function _3(c){return ti(c)||Ff(c)||!!(ds&&c&&c[ds])}function Mc(c,m){var k=typeof c;return m=m??re,!!m&&(k=="number"||k!="symbol"&&Fi.test(c))&&c>-1&&c%1==0&&c<m}function Ka(c,m,k){if(!Zo(k))return!1;var ee=typeof m;return(ee=="number"?ml(k)&&Mc(m,k.length):ee=="string"&&m in k)?Au(k[m],c):!1}function bm(c,m){if(ti(c))return!1;var k=typeof c;return k=="number"||k=="symbol"||k=="boolean"||c==null||jl(c)?!0:Zt.test(c)||!Zn.test(c)||m!=null&&c in Li(m)}function b3(c){var m=typeof c;return m=="string"||m=="number"||m=="symbol"||m=="boolean"?c!=="__proto__":c===null}function wm(c){var m=Kp(c),k=De[m];if(typeof k!="function"||!(m in Vr.prototype))return!1;if(c===k)return!0;var ee=vm(k);return!!ee&&c===ee[0]}function w3(c){return!!Ao&&Ao in c}var x3=aa?Ac:Fm;function _d(c){var m=c&&c.constructor,k=typeof m=="function"&&m.prototype||sa;return c===k}function qy(c){return c===c&&!Zo(c)}function Wy(c,m){return function(k){return k==null?!1:k[c]===m&&(m!==t||c in Li(k))}}function L3(c){var m=tg(c,function(ee){return k.size===d&&k.clear(),ee}),k=m.cache;return m}function S3(c,m){var k=c[1],ee=m[1],be=k|ee,Re=be<(N|O|xe),rt=ee==xe&&k==Y||ee==xe&&k==G&&c[7].length<=m[8]||ee==(xe|G)&&m[7].length<=m[8]&&k==Y;if(!(Re||rt))return c;ee&N&&(c[2]=m[2],be|=k&N?0:F);var gt=m[3];if(gt){var Et=c[3];c[3]=Et?Ay(Et,gt,m[4]):gt,c[4]=Et?es(c[3],g):m[4]}return gt=m[5],gt&&(Et=c[5],c[5]=Et?ky(Et,gt,m[6]):gt,c[6]=Et?es(c[5],g):m[6]),gt=m[7],gt&&(c[7]=gt),ee&xe&&(c[8]=c[8]==null?m[8]:Se(c[8],m[8])),c[9]==null&&(c[9]=m[9]),c[0]=m[0],c[1]=be,c}function C3(c){var m=[];if(c!=null)for(var k in Li(c))m.push(k);return m}function E3(c){return Si.call(c)}function Zy(c,m,k){return m=oe(m===t?c.length-1:m,0),function(){for(var ee=arguments,be=-1,Re=oe(ee.length-m,0),rt=Mt(Re);++be<Re;)rt[be]=ee[m+be];be=-1;for(var gt=Mt(m+1);++be<m;)gt[be]=ee[be];return gt[m]=k(rt),bi(c,this,gt)}}function Ky(c,m){return m.length<2?c:ur(c,pl(m,0,-1))}function P3(c,m){for(var k=c.length,ee=Se(m.length,k),be=gl(c);ee--;){var Re=m[ee];c[ee]=Mc(Re,k)?be[Re]:t}return c}function xm(c,m){if(!(m==="constructor"&&typeof c[m]=="function")&&m!="__proto__")return c[m]}var Yy=Xy(Cu),bd=bc||function(c,m){return eo.setTimeout(c,m)},Lm=Xy(zp);function Jy(c,m,k){var ee=m+"";return Lm(c,y3(ee,M3(g3(ee),k)))}function Xy(c){var m=0,k=0;return function(){var ee=st(),be=$-(ee-k);if(k=ee,be>0){if(++m>=I)return arguments[0]}else m=0;return c.apply(t,arguments)}}function Jp(c,m){var k=-1,ee=c.length,be=ee-1;for(m=m===t?ee:m;++k<m;){var Re=Nf(k,be),rt=c[Re];c[Re]=c[k],c[k]=rt}return c.length=m,c}var Qy=L3(function(c){var m=[];return c.charCodeAt(0)===46&&m.push(""),c.replace(mn,function(k,ee,be,Re){m.push(be?Re.replace(Er,"$1"):ee||k)}),m});function tc(c){if(typeof c=="string"||jl(c))return c;var m=c+"";return m=="0"&&1/c==-1/0?"-0":m}function Rf(c){if(c!=null){try{return la.call(c)}catch{}try{return c+""}catch{}}return""}function M3(c,m){return Po(fe,function(k){var ee="_."+k[0];m&k[1]&&!cl(c,ee)&&c.push(ee)}),c.sort()}function e2(c){if(c instanceof Vr)return c.clone();var m=new No(c.__wrapped__,c.__chain__);return m.__actions__=gl(c.__actions__),m.__index__=c.__index__,m.__values__=c.__values__,m}function A3(c,m,k){(k?Ka(c,m,k):m===t)?m=1:m=oe(li(m),0);var ee=c==null?0:c.length;if(!ee||m<1)return[];for(var be=0,Re=0,rt=Mt(ko(ee/m));be<ee;)rt[Re++]=pl(c,be,be+=m);return rt}function k3(c){for(var m=-1,k=c==null?0:c.length,ee=0,be=[];++m<k;){var Re=c[m];Re&&(be[ee++]=Re)}return be}function T3(){var c=arguments.length;if(!c)return[];for(var m=Mt(c-1),k=arguments[0],ee=c;ee--;)m[ee-1]=arguments[ee];return Cs(ti(k)?gl(k):[k],ze(m,1))}var D3=ai(function(c,m){return vs(c)?C(c,ze(m,1,vs,!0)):[]}),N3=ai(function(c,m){var k=su(m);return vs(k)&&(k=t),vs(c)?C(c,ze(m,1,vs,!0),Cr(k,2)):[]}),B3=ai(function(c,m){var k=su(m);return vs(k)&&(k=t),vs(c)?C(c,ze(m,1,vs,!0),t,k):[]});function O3(c,m,k){var ee=c==null?0:c.length;return ee?(m=k||m===t?1:li(m),pl(c,m<0?0:m,ee)):[]}function I3(c,m,k){var ee=c==null?0:c.length;return ee?(m=k||m===t?1:li(m),m=ee-m,pl(c,0,m<0?0:m)):[]}function R3(c,m){return c&&c.length?Cc(c,Cr(m,3),!0,!0):[]}function F3(c,m){return c&&c.length?Cc(c,Cr(m,3),!0):[]}function j3(c,m,k,ee){var be=c==null?0:c.length;return be?(k&&typeof k!="number"&&Ka(c,m,k)&&(k=0,ee=be),Le(c,m,k,ee)):[]}function t2(c,m,k){var ee=c==null?0:c.length;if(!ee)return-1;var be=k==null?0:li(k);return be<0&&(be=oe(ee+be,0)),jt(c,Cr(m,3),be)}function n2(c,m,k){var ee=c==null?0:c.length;if(!ee)return-1;var be=ee-1;return k!==t&&(be=li(k),be=k<0?oe(ee+be,0):Se(be,ee-1)),jt(c,Cr(m,3),be,!0)}function r2(c){var m=c==null?0:c.length;return m?ze(c,1):[]}function z3(c){var m=c==null?0:c.length;return m?ze(c,ie):[]}function $3(c,m){var k=c==null?0:c.length;return k?(m=m===t?1:li(m),ze(c,m)):[]}function U3(c){for(var m=-1,k=c==null?0:c.length,ee={};++m<k;){var be=c[m];ee[be[0]]=be[1]}return ee}function i2(c){return c&&c.length?c[0]:t}function V3(c,m,k){var ee=c==null?0:c.length;if(!ee)return-1;var be=k==null?0:li(k);return be<0&&(be=oe(ee+be,0)),cn(c,m,be)}function H3(c){var m=c==null?0:c.length;return m?pl(c,0,-1):[]}var G3=ai(function(c){var m=wi(c,Xc);return m.length&&m[0]===c[0]?me(m):[]}),q3=ai(function(c){var m=su(c),k=wi(c,Xc);return m===su(k)?m=t:k.pop(),k.length&&k[0]===c[0]?me(k,Cr(m,2)):[]}),W3=ai(function(c){var m=su(c),k=wi(c,Xc);return m=typeof m=="function"?m:t,m&&k.pop(),k.length&&k[0]===c[0]?me(k,t,m):[]});function Z3(c,m){return c==null?"":S.call(c,m)}function su(c){var m=c==null?0:c.length;return m?c[m-1]:t}function K3(c,m,k){var ee=c==null?0:c.length;if(!ee)return-1;var be=ee;return k!==t&&(be=li(k),be=be<0?oe(ee+be,0):Se(be,ee-1)),m===m?xa(c,m,be):jt(c,jn,be,!0)}function Y3(c,m){return c&&c.length?Za(c,li(m)):t}var J3=ai(o2);function o2(c,m){return c&&c.length&&m&&m.length?gh(c,m):c}function X3(c,m,k){return c&&c.length&&m&&m.length?gh(c,m,Cr(k,2)):c}function Q3(c,m,k){return c&&c.length&&m&&m.length?gh(c,m,t,k):c}var eL=Pc(function(c,m){var k=c==null?0:c.length,ee=Sn(c,m);return Df(c,wi(m,function(be){return Mc(be,k)?+be:be}).sort(My)),ee});function tL(c,m){var k=[];if(!(c&&c.length))return k;var ee=-1,be=[],Re=c.length;for(m=Cr(m,3);++ee<Re;){var rt=c[ee];m(rt,ee,c)&&(k.push(rt),be.push(ee))}return Df(c,be),k}function Sm(c){return c==null?c:sn.call(c)}function nL(c,m,k){var ee=c==null?0:c.length;return ee?(k&&typeof k!="number"&&Ka(c,m,k)?(m=0,k=ee):(m=m==null?0:li(m),k=k===t?ee:li(k)),pl(c,m,k)):[]}function rL(c,m){return Eu(c,m)}function iL(c,m,k){return md(c,m,Cr(k,2))}function oL(c,m){var k=c==null?0:c.length;if(k){var ee=Eu(c,m);if(ee<k&&Au(c[ee],m))return ee}return-1}function sL(c,m){return Eu(c,m,!0)}function aL(c,m,k){return md(c,m,Cr(k,2),!0)}function lL(c,m){var k=c==null?0:c.length;if(k){var ee=Eu(c,m,!0)-1;if(Au(c[ee],m))return ee}return-1}function uL(c){return c&&c.length?vd(c):[]}function cL(c,m){return c&&c.length?vd(c,Cr(m,2)):[]}function fL(c){var m=c==null?0:c.length;return m?pl(c,1,m):[]}function hL(c,m,k){return c&&c.length?(m=k||m===t?1:li(m),pl(c,0,m<0?0:m)):[]}function dL(c,m,k){var ee=c==null?0:c.length;return ee?(m=k||m===t?1:li(m),m=ee-m,pl(c,m<0?0:m,ee)):[]}function pL(c,m){return c&&c.length?Cc(c,Cr(m,3),!1,!0):[]}function gL(c,m){return c&&c.length?Cc(c,Cr(m,3)):[]}var mL=ai(function(c){return Qu(ze(c,1,vs,!0))}),vL=ai(function(c){var m=su(c);return vs(m)&&(m=t),Qu(ze(c,1,vs,!0),Cr(m,2))}),yL=ai(function(c){var m=su(c);return m=typeof m=="function"?m:t,Qu(ze(c,1,vs,!0),t,m)});function _L(c){return c&&c.length?Qu(c):[]}function bL(c,m){return c&&c.length?Qu(c,Cr(m,2)):[]}function wL(c,m){return m=typeof m=="function"?m:t,c&&c.length?Qu(c,t,m):[]}function Cm(c){if(!(c&&c.length))return[];var m=0;return c=qs(c,function(k){if(vs(k))return m=oe(k.length,m),!0}),ro(m,function(k){return wi(c,vr(k))})}function s2(c,m){if(!(c&&c.length))return[];var k=Cm(c);return m==null?k:wi(k,function(ee){return bi(m,t,ee)})}var xL=ai(function(c,m){return vs(c)?C(c,m):[]}),LL=ai(function(c){return iu(qs(c,vs))}),SL=ai(function(c){var m=su(c);return vs(m)&&(m=t),iu(qs(c,vs),Cr(m,2))}),CL=ai(function(c){var m=su(c);return m=typeof m=="function"?m:t,iu(qs(c,vs),t,m)}),EL=ai(Cm);function PL(c,m){return Pu(c||[],m||[],dt)}function ML(c,m){return Pu(c||[],m||[],Lc)}var AL=ai(function(c){var m=c.length,k=m>1?c[m-1]:t;return k=typeof k=="function"?(c.pop(),k):t,s2(c,k)});function a2(c){var m=De(c);return m.__chain__=!0,m}function kL(c,m){return m(c),c}function Xp(c,m){return m(c)}var TL=Pc(function(c){var m=c.length,k=m?c[0]:0,ee=this.__wrapped__,be=function(Re){return Sn(Re,c)};return m>1||this.__actions__.length||!(ee instanceof Vr)||!Mc(k)?this.thru(be):(ee=ee.slice(k,+k+(m?1:0)),ee.__actions__.push({func:Xp,args:[be],thisArg:t}),new No(ee,this.__chain__).thru(function(Re){return m&&!Re.length&&Re.push(t),Re}))});function DL(){return a2(this)}function NL(){return new No(this.value(),this.__chain__)}function BL(){this.__values__===t&&(this.__values__=w2(this.value()));var c=this.__index__>=this.__values__.length,m=c?t:this.__values__[this.__index__++];return{done:c,value:m}}function OL(){return this}function IL(c){for(var m,k=this;k instanceof Lu;){var ee=e2(k);ee.__index__=0,ee.__values__=t,m?be.__wrapped__=ee:m=ee;var be=ee;k=k.__wrapped__}return be.__wrapped__=c,m}function RL(){var c=this.__wrapped__;if(c instanceof Vr){var m=c;return this.__actions__.length&&(m=new Vr(this)),m=m.reverse(),m.__actions__.push({func:Xp,args:[Sm],thisArg:t}),new No(m,this.__chain__)}return this.thru(Sm)}function FL(){return ru(this.__wrapped__,this.__actions__)}var jL=Hp(function(c,m,k){Qr.call(c,k)?++c[k]:kn(c,k,1)});function zL(c,m,k){var ee=ti(c)?Il:te;return k&&Ka(c,m,k)&&(m=t),ee(c,Cr(m,3))}function $L(c,m){var k=ti(c)?qs:Je;return k(c,Cr(m,3))}var UL=By(t2),VL=By(n2);function HL(c,m){return ze(Qp(c,m),1)}function GL(c,m){return ze(Qp(c,m),ie)}function qL(c,m,k){return k=k===t?1:li(k),ze(Qp(c,m),k)}function l2(c,m){var k=ti(c)?Po:j;return k(c,Cr(m,3))}function u2(c,m){var k=ti(c)?Gs:X;return k(c,Cr(m,3))}var WL=Hp(function(c,m,k){Qr.call(c,k)?c[k].push(m):kn(c,k,[m])});function ZL(c,m,k,ee){c=ml(c)?c:Sh(c),k=k&&!ee?li(k):0;var be=c.length;return k<0&&(k=oe(be+k,0)),ig(c)?k<=be&&c.indexOf(m,k)>-1:!!be&&cn(c,m,k)>-1}var KL=ai(function(c,m,k){var ee=-1,be=typeof m=="function",Re=ml(c)?Mt(c.length):[];return j(c,function(rt){Re[++ee]=be?bi(m,rt,k):Oe(rt,m,k)}),Re}),YL=Hp(function(c,m,k){kn(c,k,m)});function Qp(c,m){var k=ti(c)?wi:Ii;return k(c,Cr(m,3))}function JL(c,m,k,ee){return c==null?[]:(ti(m)||(m=m==null?[]:[m]),k=ee?t:k,ti(k)||(k=k==null?[]:[k]),Xu(c,m,k))}var XL=Hp(function(c,m,k){c[k?0:1].push(m)},function(){return[[],[]]});function QL(c,m,k){var ee=ti(c)?wa:zi,be=arguments.length<3;return ee(c,Cr(m,4),k,be,j)}function eS(c,m,k){var ee=ti(c)?no:zi,be=arguments.length<3;return ee(c,Cr(m,4),k,be,X)}function tS(c,m){var k=ti(c)?qs:Je;return k(c,ng(Cr(m,3)))}function nS(c){var m=ti(c)?Nt:vh;return m(c)}function rS(c,m,k){(k?Ka(c,m,k):m===t)?m=1:m=li(m);var ee=ti(c)?wt:jp;return ee(c,m)}function iS(c){var m=ti(c)?Yt:$p;return m(c)}function oS(c){if(c==null)return 0;if(ml(c))return ig(c)?$o(c):c.length;var m=ka(c);return m==pe||m==Xe?c.size:vi(c).length}function sS(c,m,k){var ee=ti(c)?B:Up;return k&&Ka(c,m,k)&&(m=t),ee(c,Cr(m,3))}var aS=ai(function(c,m){if(c==null)return[];var k=m.length;return k>1&&Ka(c,m[0],m[1])?m=[]:k>2&&Ka(m[0],m[1],m[2])&&(m=[m[0]]),Xu(c,ze(m,1),[])}),eg=rs||function(){return eo.Date.now()};function lS(c,m){if(typeof m!="function")throw new Vi(o);return c=li(c),function(){if(--c<1)return m.apply(this,arguments)}}function c2(c,m,k){return m=k?t:m,m=c&&m==null?c.length:m,Ec(c,xe,t,t,t,t,m)}function f2(c,m){var k;if(typeof m!="function")throw new Vi(o);return c=li(c),function(){return--c>0&&(k=m.apply(this,arguments)),c<=1&&(m=t),k}}var Em=ai(function(c,m,k){var ee=N;if(k.length){var be=es(k,xh(Em));ee|=le}return Ec(c,ee,m,k,be)}),h2=ai(function(c,m,k){var ee=N|O;if(k.length){var be=es(k,xh(h2));ee|=le}return Ec(m,ee,c,k,be)});function d2(c,m,k){m=k?t:m;var ee=Ec(c,Y,t,t,t,t,t,m);return ee.placeholder=d2.placeholder,ee}function p2(c,m,k){m=k?t:m;var ee=Ec(c,Q,t,t,t,t,t,m);return ee.placeholder=p2.placeholder,ee}function g2(c,m,k){var ee,be,Re,rt,gt,Et,an=0,ln=!1,vn=!1,$n=!0;if(typeof c!="function")throw new Vi(o);m=au(m)||0,Zo(k)&&(ln=!!k.leading,vn="maxWait"in k,Re=vn?oe(au(k.maxWait)||0,m):Re,$n="trailing"in k?!!k.trailing:$n);function sr(ys){var ku=ee,Tc=be;return ee=be=t,an=ys,rt=c.apply(Tc,ku),rt}function Pr(ys){return an=ys,gt=bd(Ci,m),ln?sr(ys):rt}function ci(ys){var ku=ys-Et,Tc=ys-an,B2=m-ku;return vn?Se(B2,Re-Tc):B2}function Mr(ys){var ku=ys-Et,Tc=ys-an;return Et===t||ku>=m||ku<0||vn&&Tc>=Re}function Ci(){var ys=eg();if(Mr(ys))return ki(ys);gt=bd(Ci,ci(ys))}function ki(ys){return gt=t,$n&&ee?sr(ys):(ee=be=t,rt)}function zl(){gt!==t&&_h(gt),an=0,ee=Et=be=gt=t}function Ya(){return gt===t?rt:ki(eg())}function $l(){var ys=eg(),ku=Mr(ys);if(ee=arguments,be=this,Et=ys,ku){if(gt===t)return Pr(Et);if(vn)return _h(gt),gt=bd(Ci,m),sr(Et)}return gt===t&&(gt=bd(Ci,m)),rt}return $l.cancel=zl,$l.flush=Ya,$l}var uS=ai(function(c,m){return w(c,1,m)}),cS=ai(function(c,m,k){return w(c,au(m)||0,k)});function fS(c){return Ec(c,R)}function tg(c,m){if(typeof c!="function"||m!=null&&typeof m!="function")throw new Vi(o);var k=function(){var ee=arguments,be=m?m.apply(this,ee):ee[0],Re=k.cache;if(Re.has(be))return Re.get(be);var rt=c.apply(this,ee);return k.cache=Re.set(be,rt)||Re,rt};return k.cache=new(tg.Cache||Ma),k}tg.Cache=Ma;function ng(c){if(typeof c!="function")throw new Vi(o);return function(){var m=arguments;switch(m.length){case 0:return!c.call(this);case 1:return!c.call(this,m[0]);case 2:return!c.call(this,m[0],m[1]);case 3:return!c.call(this,m[0],m[1],m[2])}return!c.apply(this,m)}}function hS(c){return f2(2,c)}var dS=fm(function(c,m){m=m.length==1&&ti(m[0])?wi(m[0],Ur(Cr())):wi(ze(m,1),Ur(Cr()));var k=m.length;return ai(function(ee){for(var be=-1,Re=Se(ee.length,k);++be<Re;)ee[be]=m[be].call(this,ee[be]);return bi(c,this,ee)})}),Pm=ai(function(c,m){var k=es(m,xh(Pm));return Ec(c,le,t,m,k)}),m2=ai(function(c,m){var k=es(m,xh(m2));return Ec(c,ce,t,m,k)}),pS=Pc(function(c,m){return Ec(c,G,t,t,t,m)});function gS(c,m){if(typeof c!="function")throw new Vi(o);return m=m===t?m:li(m),ai(c,m)}function mS(c,m){if(typeof c!="function")throw new Vi(o);return m=m==null?0:oe(li(m),0),ai(function(k){var ee=k[m],be=ou(k,0,m);return ee&&Cs(be,ee),bi(c,this,be)})}function vS(c,m,k){var ee=!0,be=!0;if(typeof c!="function")throw new Vi(o);return Zo(k)&&(ee="leading"in k?!!k.leading:ee,be="trailing"in k?!!k.trailing:be),g2(c,m,{leading:ee,maxWait:m,trailing:be})}function yS(c){return c2(c,1)}function _S(c,m){return Pm(Of(m),c)}function bS(){if(!arguments.length)return[];var c=arguments[0];return ti(c)?c:[c]}function wS(c){return l(c,_)}function xS(c,m){return m=typeof m=="function"?m:t,l(c,_,m)}function LS(c){return l(c,y|_)}function SS(c,m){return m=typeof m=="function"?m:t,l(c,y|_,m)}function CS(c,m){return m==null||v(c,m,Js(m))}function Au(c,m){return c===m||c!==c&&m!==m}var ES=Zp(ft),PS=Zp(function(c,m){return c>=m}),Ff=Be(function(){return arguments}())?Be:function(c){return is(c)&&Qr.call(c,"callee")&&!Bi.call(c,"callee")},ti=Mt.isArray,MS=eu?Ur(eu):Fe;function ml(c){return c!=null&&rg(c.length)&&!Ac(c)}function vs(c){return is(c)&&ml(c)}function AS(c){return c===!0||c===!1||is(c)&&tt(c)==T}var Qc=a||Fm,kS=ta?Ur(ta):je;function TS(c){return is(c)&&c.nodeType===1&&!wd(c)}function DS(c){if(c==null)return!0;if(ml(c)&&(ti(c)||typeof c=="string"||typeof c.splice=="function"||Qc(c)||Lh(c)||Ff(c)))return!c.length;var m=ka(c);if(m==pe||m==Xe)return!c.size;if(_d(c))return!vi(c).length;for(var k in c)if(Qr.call(c,k))return!1;return!0}function NS(c,m){return lt(c,m)}function BS(c,m,k){k=typeof k=="function"?k:t;var ee=k?k(c,m):t;return ee===t?lt(c,m,t,k):!!ee}function Mm(c){if(!is(c))return!1;var m=tt(c);return m==Ce||m==ke||typeof c.message=="string"&&typeof c.name=="string"&&!wd(c)}function OS(c){return typeof c=="number"&&p(c)}function Ac(c){if(!Zo(c))return!1;var m=tt(c);return m==Ve||m==K||m==ae||m==Ke}function v2(c){return typeof c=="number"&&c==li(c)}function rg(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=re}function Zo(c){var m=typeof c;return c!=null&&(m=="object"||m=="function")}function is(c){return c!=null&&typeof c=="object"}var y2=Nl?Ur(Nl):pt;function IS(c,m){return c===m||Lt(c,m,ym(m))}function RS(c,m,k){return k=typeof k=="function"?k:t,Lt(c,m,ym(m),k)}function FS(c){return _2(c)&&c!=+c}function jS(c){if(x3(c))throw new Kn(s);return St(c)}function zS(c){return c===null}function $S(c){return c==null}function _2(c){return typeof c=="number"||is(c)&&tt(c)==ve}function wd(c){if(!is(c)||tt(c)!=Ue)return!1;var m=ua(c);if(m===null)return!0;var k=Qr.call(m,"constructor")&&m.constructor;return typeof k=="function"&&k instanceof k&&la.call(k)==Mi}var Am=Bl?Ur(Bl):on;function US(c){return v2(c)&&c>=-9007199254740991&&c<=re}var b2=Os?Ur(Os):zn;function ig(c){return typeof c=="string"||!ti(c)&&is(c)&&tt(c)==ot}function jl(c){return typeof c=="symbol"||is(c)&&tt(c)==kt}var Lh=Ol?Ur(Ol):Gn;function VS(c){return c===t}function HS(c){return is(c)&&ka(c)==Ut}function GS(c){return is(c)&&tt(c)==Gt}var qS=Zp(ei),WS=Zp(function(c,m){return c<=m});function w2(c){if(!c)return[];if(ml(c))return ig(c)?Uo(c):gl(c);if(dr&&c[dr])return fs(c[dr]());var m=ka(c),k=m==pe?dl:m==Xe?ts:Sh;return k(c)}function kc(c){if(!c)return c===0?c:0;if(c=au(c),c===ie||c===-1/0){var m=c<0?-1:1;return m*we}return c===c?c:0}function li(c){var m=kc(c),k=m%1;return m===m?k?m-k:m:0}function x2(c){return c?Xn(li(c),0,Ie):0}function au(c){if(typeof c=="number")return c;if(jl(c))return Pe;if(Zo(c)){var m=typeof c.valueOf=="function"?c.valueOf():c;c=Zo(m)?m+"":m}if(typeof c!="string")return c===0?c:+c;c=Es(c);var k=Or.test(c);return k||rn.test(c)?Dl(c.slice(2),k?2:8):ir.test(c)?Pe:+c}function L2(c){return ec(c,vl(c))}function ZS(c){return c?Xn(li(c),-9007199254740991,re):c===0?c:0}function Wi(c){return c==null?"":Aa(c)}var KS=bh(function(c,m){if(_d(m)||ml(m)){ec(m,Js(m),c);return}for(var k in m)Qr.call(m,k)&&dt(c,k,m[k])}),S2=bh(function(c,m){ec(m,vl(m),c)}),og=bh(function(c,m,k,ee){ec(m,vl(m),c,ee)}),YS=bh(function(c,m,k,ee){ec(m,Js(m),c,ee)}),JS=Pc(Sn);function XS(c,m){var k=gs(c);return m==null?k:hn(k,m)}var QS=ai(function(c,m){c=Li(c);var k=-1,ee=m.length,be=ee>2?m[2]:t;for(be&&Ka(m[0],m[1],be)&&(ee=1);++k<ee;)for(var Re=m[k],rt=vl(Re),gt=-1,Et=rt.length;++gt<Et;){var an=rt[gt],ln=c[an];(ln===t||Au(ln,sa[an])&&!Qr.call(c,an))&&(c[an]=Re[an])}return c}),eC=ai(function(c){return c.push(t,$y),bi(C2,t,c)});function tC(c,m){return xt(c,Cr(m,3),Xt)}function nC(c,m){return xt(c,Cr(m,3),yn)}function rC(c,m){return c==null?c:vt(c,Cr(m,3),vl)}function iC(c,m){return c==null?c:At(c,Cr(m,3),vl)}function oC(c,m){return c&&Xt(c,Cr(m,3))}function sC(c,m){return c&&yn(c,Cr(m,3))}function aC(c){return c==null?[]:bn(c,Js(c))}function lC(c){return c==null?[]:bn(c,vl(c))}function km(c,m,k){var ee=c==null?t:ur(c,m);return ee===t?k:ee}function uC(c,m){return c!=null&&Hy(c,m,Bt)}function Tm(c,m){return c!=null&&Hy(c,m,bt)}var cC=Iy(function(c,m,k){m!=null&&typeof m.toString!="function"&&(m=Si.call(m)),c[m]=k},Nm(yl)),fC=Iy(function(c,m,k){m!=null&&typeof m.toString!="function"&&(m=Si.call(m)),Qr.call(c,m)?c[m].push(k):c[m]=[k]},Cr),hC=ai(Oe);function Js(c){return ml(c)?Dt(c):vi(c)}function vl(c){return ml(c)?Dt(c,!0):Ai(c)}function dC(c,m){var k={};return m=Cr(m,3),Xt(c,function(ee,be,Re){kn(k,m(ee,be,Re),ee)}),k}function pC(c,m){var k={};return m=Cr(m,3),Xt(c,function(ee,be,Re){kn(k,be,m(ee,be,Re))}),k}var gC=bh(function(c,m,k){fa(c,m,k)}),C2=bh(function(c,m,k,ee){fa(c,m,k,ee)}),mC=Pc(function(c,m){var k={};if(c==null)return k;var ee=!1;m=wi(m,function(Re){return Re=Mu(Re,c),ee||(ee=Re.length>1),Re}),ec(c,mm(c),k),ee&&(k=l(k,y|x|_,c3));for(var be=m.length;be--;)Sc(k,m[be]);return k});function vC(c,m){return E2(c,ng(Cr(m)))}var yC=Pc(function(c,m){return c==null?{}:ha(c,m)});function E2(c,m){if(c==null)return{};var k=wi(mm(c),function(ee){return[ee]});return m=Cr(m),Wo(c,k,function(ee,be){return m(ee,be[0])})}function _C(c,m,k){m=Mu(m,c);var ee=-1,be=m.length;for(be||(be=1,c=t);++ee<be;){var Re=c==null?t:c[tc(m[ee])];Re===t&&(ee=be,Re=k),c=Ac(Re)?Re.call(c):Re}return c}function bC(c,m,k){return c==null?c:Lc(c,m,k)}function wC(c,m,k,ee){return ee=typeof ee=="function"?ee:t,c==null?c:Lc(c,m,k,ee)}var P2=jy(Js),M2=jy(vl);function xC(c,m,k){var ee=ti(c),be=ee||Qc(c)||Lh(c);if(m=Cr(m,4),k==null){var Re=c&&c.constructor;be?k=ee?new Re:[]:Zo(c)?k=Ac(Re)?gs(ua(c)):{}:k={}}return(be?Po:Xt)(c,function(rt,gt,Et){return m(k,rt,gt,Et)}),k}function LC(c,m){return c==null?!0:Sc(c,m)}function SC(c,m,k){return c==null?c:yh(c,m,Of(k))}function CC(c,m,k,ee){return ee=typeof ee=="function"?ee:t,c==null?c:yh(c,m,Of(k),ee)}function Sh(c){return c==null?[]:jo(c,Js(c))}function EC(c){return c==null?[]:jo(c,vl(c))}function PC(c,m,k){return k===t&&(k=m,m=t),k!==t&&(k=au(k),k=k===k?k:0),m!==t&&(m=au(m),m=m===m?m:0),Xn(au(c),m,k)}function MC(c,m,k){return m=kc(m),k===t?(k=m,m=0):k=kc(k),c=au(c),Tt(c,m,k)}function AC(c,m,k){if(k&&typeof k!="boolean"&&Ka(c,m,k)&&(m=k=t),k===t&&(typeof m=="boolean"?(k=m,m=t):typeof c=="boolean"&&(k=c,c=t)),c===t&&m===t?(c=0,m=1):(c=kc(c),m===t?(m=c,c=0):m=kc(m)),c>m){var ee=c;c=m,m=ee}if(k||c%1||m%1){var be=zt();return Se(c+be*(m-c+ll("1e-"+((be+"").length-1))),m)}return Nf(c,m)}var kC=wh(function(c,m,k){return m=m.toLowerCase(),c+(k?A2(m):m)});function A2(c){return Dm(Wi(c).toLowerCase())}function k2(c){return c=Wi(c),c&&c.replace(_i,wu).replace(Fo,"")}function TC(c,m,k){c=Wi(c),m=Aa(m);var ee=c.length;k=k===t?ee:Xn(li(k),0,ee);var be=k;return k-=m.length,k>=0&&c.slice(k,be)==m}function DC(c){return c=Wi(c),c&&We.test(c)?c.replace(yr,Ga):c}function NC(c){return c=Wi(c),c&&Kt.test(c)?c.replace(It,"\\$&"):c}var BC=wh(function(c,m,k){return c+(k?"-":"")+m.toLowerCase()}),OC=wh(function(c,m,k){return c+(k?" ":"")+m.toLowerCase()}),IC=Ny("toLowerCase");function RC(c,m,k){c=Wi(c),m=li(m);var ee=m?$o(c):0;if(!m||ee>=m)return c;var be=(m-ee)/2;return Wp(To(be),k)+c+Wp(ko(be),k)}function FC(c,m,k){c=Wi(c),m=li(m);var ee=m?$o(c):0;return m&&ee<m?c+Wp(m-ee,k):c}function jC(c,m,k){c=Wi(c),m=li(m);var ee=m?$o(c):0;return m&&ee<m?Wp(m-ee,k)+c:c}function zC(c,m,k){return k||m==null?m=0:m&&(m=+m),Pt(Wi(c).replace(Ln,""),m||0)}function $C(c,m,k){return(k?Ka(c,m,k):m===t)?m=1:m=li(m),mh(Wi(c),m)}function UC(){var c=arguments,m=Wi(c[0]);return c.length<3?m:m.replace(c[1],c[2])}var VC=wh(function(c,m,k){return c+(k?"_":"")+m.toLowerCase()});function HC(c,m,k){return k&&typeof k!="number"&&Ka(c,m,k)&&(m=k=t),k=k===t?Ie:k>>>0,k?(c=Wi(c),c&&(typeof m=="string"||m!=null&&!Am(m))&&(m=Aa(m),!m&&ra(c))?ou(Uo(c),0,k):c.split(m,k)):[]}var GC=wh(function(c,m,k){return c+(k?" ":"")+Dm(m)});function qC(c,m,k){return c=Wi(c),k=k==null?0:Xn(li(k),0,c.length),m=Aa(m),c.slice(k,k+m.length)==m}function WC(c,m,k){var ee=De.templateSettings;k&&Ka(c,m,k)&&(m=t),c=Wi(c),m=og({},m,ee,zy);var be=og({},m.imports,ee.imports,zy),Re=Js(be),rt=jo(be,Re),gt,Et,an=0,ln=m.interpolate||gi,vn="__p += '",$n=Rl((m.escape||gi).source+"|"+ln.source+"|"+(ln===tr?lr:gi).source+"|"+(m.evaluate||gi).source+"|$","g"),sr="//# sourceURL="+(Qr.call(m,"sourceURL")?(m.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++kl+"]")+`
`;c.replace($n,function(Mr,Ci,ki,zl,Ya,$l){return ki||(ki=zl),vn+=c.slice(an,$l).replace(Kr,qa),Ci&&(gt=!0,vn+=`' +
__e(`+Ci+`) +
'`),Ya&&(Et=!0,vn+=`';
`+Ya+`;
__p += '`),ki&&(vn+=`' +
((__t = (`+ki+`)) == null ? '' : __t) +
'`),an=$l+Mr.length,Mr}),vn+=`';
`;var Pr=Qr.call(m,"variable")&&m.variable;if(!Pr)vn=`with (obj) {
`+vn+`
}
`;else if(Fr.test(Pr))throw new Kn(u);vn=(Et?vn.replace(xn,""):vn).replace(Mn,"$1").replace(En,"$1;"),vn="function("+(Pr||"obj")+`) {
`+(Pr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(gt?", __e = _.escape":"")+(Et?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+vn+`return __p
}`;var ci=D2(function(){return wr(Re,sr+"return "+vn).apply(t,rt)});if(ci.source=vn,Mm(ci))throw ci;return ci}function ZC(c){return Wi(c).toLowerCase()}function KC(c){return Wi(c).toUpperCase()}function YC(c,m,k){if(c=Wi(c),c&&(k||m===t))return Es(c);if(!c||!(m=Aa(m)))return c;var ee=Uo(c),be=Uo(m),Re=Qo(ee,be),rt=tu(ee,be)+1;return ou(ee,Re,rt).join("")}function JC(c,m,k){if(c=Wi(c),c&&(k||m===t))return c.slice(0,La(c)+1);if(!c||!(m=Aa(m)))return c;var ee=Uo(c),be=tu(ee,Uo(m))+1;return ou(ee,0,be).join("")}function XC(c,m,k){if(c=Wi(c),c&&(k||m===t))return c.replace(Ln,"");if(!c||!(m=Aa(m)))return c;var ee=Uo(c),be=Qo(ee,Uo(m));return ou(ee,be).join("")}function QC(c,m){var k=Z,ee=z;if(Zo(m)){var be="separator"in m?m.separator:be;k="length"in m?li(m.length):k,ee="omission"in m?Aa(m.omission):ee}c=Wi(c);var Re=c.length;if(ra(c)){var rt=Uo(c);Re=rt.length}if(k>=Re)return c;var gt=k-$o(ee);if(gt<1)return ee;var Et=rt?ou(rt,0,gt).join(""):c.slice(0,gt);if(be===t)return Et+ee;if(rt&&(gt+=Et.length-gt),Am(be)){if(c.slice(gt).search(be)){var an,ln=Et;for(be.global||(be=Rl(be.source,Wi(Hr.exec(be))+"g")),be.lastIndex=0;an=be.exec(ln);)var vn=an.index;Et=Et.slice(0,vn===t?gt:vn)}}else if(c.indexOf(Aa(be),gt)!=gt){var $n=Et.lastIndexOf(be);$n>-1&&(Et=Et.slice(0,$n))}return Et+ee}function eE(c){return c=Wi(c),c&&mt.test(c)?c.replace(cr,Sa):c}var tE=wh(function(c,m,k){return c+(k?" ":"")+m.toUpperCase()}),Dm=Ny("toUpperCase");function T2(c,m,k){return c=Wi(c),m=k?t:m,m===t?Ps(c)?ia(c):ct(c):c.match(m)||[]}var D2=ai(function(c,m){try{return bi(c,t,m)}catch(k){return Mm(k)?k:new Kn(k)}}),nE=Pc(function(c,m){return Po(m,function(k){k=tc(k),kn(c,k,Em(c[k],c))}),c});function rE(c){var m=c==null?0:c.length,k=Cr();return c=m?wi(c,function(ee){if(typeof ee[1]!="function")throw new Vi(o);return[k(ee[0]),ee[1]]}):[],ai(function(ee){for(var be=-1;++be<m;){var Re=c[be];if(bi(Re[0],this,ee))return bi(Re[1],this,ee)}})}function iE(c){return h(l(c,y))}function Nm(c){return function(){return c}}function oE(c,m){return c==null||c!==c?m:c}var sE=Oy(),aE=Oy(!0);function yl(c){return c}function Bm(c){return Qn(typeof c=="function"?c:l(c,y))}function lE(c){return ms(l(c,y))}function uE(c,m){return Su(c,l(m,y))}var cE=ai(function(c,m){return function(k){return Oe(k,c,m)}}),fE=ai(function(c,m){return function(k){return Oe(c,k,m)}});function Om(c,m,k){var ee=Js(m),be=bn(m,ee);k==null&&!(Zo(m)&&(be.length||!ee.length))&&(k=m,m=c,c=this,be=bn(m,Js(m)));var Re=!(Zo(k)&&"chain"in k)||!!k.chain,rt=Ac(c);return Po(be,function(gt){var Et=m[gt];c[gt]=Et,rt&&(c.prototype[gt]=function(){var an=this.__chain__;if(Re||an){var ln=c(this.__wrapped__),vn=ln.__actions__=gl(this.__actions__);return vn.push({func:Et,args:arguments,thisArg:c}),ln.__chain__=an,ln}return Et.apply(c,Cs([this.value()],arguments))})}),c}function hE(){return eo._===this&&(eo._=io),this}function Im(){}function dE(c){return c=li(c),ai(function(m){return Za(m,c)})}var pE=dm(wi),gE=dm(Il),mE=dm(B);function N2(c){return bm(c)?vr(tc(c)):oo(c)}function vE(c){return function(m){return c==null?t:ur(c,m)}}var yE=Ry(),_E=Ry(!0);function Rm(){return[]}function Fm(){return!1}function bE(){return{}}function wE(){return""}function xE(){return!0}function LE(c,m){if(c=li(c),c<1||c>re)return[];var k=Ie,ee=Se(c,Ie);m=Cr(m),c-=Ie;for(var be=ro(ee,m);++k<c;)m(k);return be}function SE(c){return ti(c)?wi(c,tc):jl(c)?[c]:gl(Qy(Wi(c)))}function CE(c){var m=++Ws;return Wi(c)+m}var EE=qp(function(c,m){return c+m},0),PE=pm("ceil"),ME=qp(function(c,m){return c/m},1),AE=pm("floor");function kE(c){return c&&c.length?de(c,yl,ft):t}function TE(c,m){return c&&c.length?de(c,Cr(m,2),ft):t}function DE(c){return nr(c,yl)}function NE(c,m){return nr(c,Cr(m,2))}function BE(c){return c&&c.length?de(c,yl,ei):t}function OE(c,m){return c&&c.length?de(c,Cr(m,2),ei):t}var IE=qp(function(c,m){return c*m},1),RE=pm("round"),FE=qp(function(c,m){return c-m},0);function jE(c){return c&&c.length?xi(c,yl):0}function zE(c,m){return c&&c.length?xi(c,Cr(m,2)):0}return De.after=lS,De.ary=c2,De.assign=KS,De.assignIn=S2,De.assignInWith=og,De.assignWith=YS,De.at=JS,De.before=f2,De.bind=Em,De.bindAll=nE,De.bindKey=h2,De.castArray=bS,De.chain=a2,De.chunk=A3,De.compact=k3,De.concat=T3,De.cond=rE,De.conforms=iE,De.constant=Nm,De.countBy=jL,De.create=XS,De.curry=d2,De.curryRight=p2,De.debounce=g2,De.defaults=QS,De.defaultsDeep=eC,De.defer=uS,De.delay=cS,De.difference=D3,De.differenceBy=N3,De.differenceWith=B3,De.drop=O3,De.dropRight=I3,De.dropRightWhile=R3,De.dropWhile=F3,De.fill=j3,De.filter=$L,De.flatMap=HL,De.flatMapDeep=GL,De.flatMapDepth=qL,De.flatten=r2,De.flattenDeep=z3,De.flattenDepth=$3,De.flip=fS,De.flow=sE,De.flowRight=aE,De.fromPairs=U3,De.functions=aC,De.functionsIn=lC,De.groupBy=WL,De.initial=H3,De.intersection=G3,De.intersectionBy=q3,De.intersectionWith=W3,De.invert=cC,De.invertBy=fC,De.invokeMap=KL,De.iteratee=Bm,De.keyBy=YL,De.keys=Js,De.keysIn=vl,De.map=Qp,De.mapKeys=dC,De.mapValues=pC,De.matches=lE,De.matchesProperty=uE,De.memoize=tg,De.merge=gC,De.mergeWith=C2,De.method=cE,De.methodOf=fE,De.mixin=Om,De.negate=ng,De.nthArg=dE,De.omit=mC,De.omitBy=vC,De.once=hS,De.orderBy=JL,De.over=pE,De.overArgs=dS,De.overEvery=gE,De.overSome=mE,De.partial=Pm,De.partialRight=m2,De.partition=XL,De.pick=yC,De.pickBy=E2,De.property=N2,De.propertyOf=vE,De.pull=J3,De.pullAll=o2,De.pullAllBy=X3,De.pullAllWith=Q3,De.pullAt=eL,De.range=yE,De.rangeRight=_E,De.rearg=pS,De.reject=tS,De.remove=tL,De.rest=gS,De.reverse=Sm,De.sampleSize=rS,De.set=bC,De.setWith=wC,De.shuffle=iS,De.slice=nL,De.sortBy=aS,De.sortedUniq=uL,De.sortedUniqBy=cL,De.split=HC,De.spread=mS,De.tail=fL,De.take=hL,De.takeRight=dL,De.takeRightWhile=pL,De.takeWhile=gL,De.tap=kL,De.throttle=vS,De.thru=Xp,De.toArray=w2,De.toPairs=P2,De.toPairsIn=M2,De.toPath=SE,De.toPlainObject=L2,De.transform=xC,De.unary=yS,De.union=mL,De.unionBy=vL,De.unionWith=yL,De.uniq=_L,De.uniqBy=bL,De.uniqWith=wL,De.unset=LC,De.unzip=Cm,De.unzipWith=s2,De.update=SC,De.updateWith=CC,De.values=Sh,De.valuesIn=EC,De.without=xL,De.words=T2,De.wrap=_S,De.xor=LL,De.xorBy=SL,De.xorWith=CL,De.zip=EL,De.zipObject=PL,De.zipObjectDeep=ML,De.zipWith=AL,De.entries=P2,De.entriesIn=M2,De.extend=S2,De.extendWith=og,Om(De,De),De.add=EE,De.attempt=D2,De.camelCase=kC,De.capitalize=A2,De.ceil=PE,De.clamp=PC,De.clone=wS,De.cloneDeep=LS,De.cloneDeepWith=SS,De.cloneWith=xS,De.conformsTo=CS,De.deburr=k2,De.defaultTo=oE,De.divide=ME,De.endsWith=TC,De.eq=Au,De.escape=DC,De.escapeRegExp=NC,De.every=zL,De.find=UL,De.findIndex=t2,De.findKey=tC,De.findLast=VL,De.findLastIndex=n2,De.findLastKey=nC,De.floor=AE,De.forEach=l2,De.forEachRight=u2,De.forIn=rC,De.forInRight=iC,De.forOwn=oC,De.forOwnRight=sC,De.get=km,De.gt=ES,De.gte=PS,De.has=uC,De.hasIn=Tm,De.head=i2,De.identity=yl,De.includes=ZL,De.indexOf=V3,De.inRange=MC,De.invoke=hC,De.isArguments=Ff,De.isArray=ti,De.isArrayBuffer=MS,De.isArrayLike=ml,De.isArrayLikeObject=vs,De.isBoolean=AS,De.isBuffer=Qc,De.isDate=kS,De.isElement=TS,De.isEmpty=DS,De.isEqual=NS,De.isEqualWith=BS,De.isError=Mm,De.isFinite=OS,De.isFunction=Ac,De.isInteger=v2,De.isLength=rg,De.isMap=y2,De.isMatch=IS,De.isMatchWith=RS,De.isNaN=FS,De.isNative=jS,De.isNil=$S,De.isNull=zS,De.isNumber=_2,De.isObject=Zo,De.isObjectLike=is,De.isPlainObject=wd,De.isRegExp=Am,De.isSafeInteger=US,De.isSet=b2,De.isString=ig,De.isSymbol=jl,De.isTypedArray=Lh,De.isUndefined=VS,De.isWeakMap=HS,De.isWeakSet=GS,De.join=Z3,De.kebabCase=BC,De.last=su,De.lastIndexOf=K3,De.lowerCase=OC,De.lowerFirst=IC,De.lt=qS,De.lte=WS,De.max=kE,De.maxBy=TE,De.mean=DE,De.meanBy=NE,De.min=BE,De.minBy=OE,De.stubArray=Rm,De.stubFalse=Fm,De.stubObject=bE,De.stubString=wE,De.stubTrue=xE,De.multiply=IE,De.nth=Y3,De.noConflict=hE,De.noop=Im,De.now=eg,De.pad=RC,De.padEnd=FC,De.padStart=jC,De.parseInt=zC,De.random=AC,De.reduce=QL,De.reduceRight=eS,De.repeat=$C,De.replace=UC,De.result=_C,De.round=RE,De.runInContext=_t,De.sample=nS,De.size=oS,De.snakeCase=VC,De.some=sS,De.sortedIndex=rL,De.sortedIndexBy=iL,De.sortedIndexOf=oL,De.sortedLastIndex=sL,De.sortedLastIndexBy=aL,De.sortedLastIndexOf=lL,De.startCase=GC,De.startsWith=qC,De.subtract=FE,De.sum=jE,De.sumBy=zE,De.template=WC,De.times=LE,De.toFinite=kc,De.toInteger=li,De.toLength=x2,De.toLower=ZC,De.toNumber=au,De.toSafeInteger=ZS,De.toString=Wi,De.toUpper=KC,De.trim=YC,De.trimEnd=JC,De.trimStart=XC,De.truncate=QC,De.unescape=eE,De.uniqueId=CE,De.upperCase=tE,De.upperFirst=Dm,De.each=l2,De.eachRight=u2,De.first=i2,Om(De,function(){var c={};return Xt(De,function(m,k){Qr.call(De.prototype,k)||(c[k]=m)}),c}(),{chain:!1}),De.VERSION=r,Po(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){De[c].placeholder=De}),Po(["drop","take"],function(c,m){Vr.prototype[c]=function(k){k=k===t?1:oe(li(k),0);var ee=this.__filtered__&&!m?new Vr(this):this.clone();return ee.__filtered__?ee.__takeCount__=Se(k,ee.__takeCount__):ee.__views__.push({size:Se(k,Ie),type:c+(ee.__dir__<0?"Right":"")}),ee},Vr.prototype[c+"Right"]=function(k){return this.reverse()[c](k).reverse()}}),Po(["filter","map","takeWhile"],function(c,m){var k=m+1,ee=k==U||k==q;Vr.prototype[c]=function(be){var Re=this.clone();return Re.__iteratees__.push({iteratee:Cr(be,3),type:k}),Re.__filtered__=Re.__filtered__||ee,Re}}),Po(["head","last"],function(c,m){var k="take"+(m?"Right":"");Vr.prototype[c]=function(){return this[k](1).value()[0]}}),Po(["initial","tail"],function(c,m){var k="drop"+(m?"":"Right");Vr.prototype[c]=function(){return this.__filtered__?new Vr(this):this[k](1)}}),Vr.prototype.compact=function(){return this.filter(yl)},Vr.prototype.find=function(c){return this.filter(c).head()},Vr.prototype.findLast=function(c){return this.reverse().find(c)},Vr.prototype.invokeMap=ai(function(c,m){return typeof c=="function"?new Vr(this):this.map(function(k){return Oe(k,c,m)})}),Vr.prototype.reject=function(c){return this.filter(ng(Cr(c)))},Vr.prototype.slice=function(c,m){c=li(c);var k=this;return k.__filtered__&&(c>0||m<0)?new Vr(k):(c<0?k=k.takeRight(-c):c&&(k=k.drop(c)),m!==t&&(m=li(m),k=m<0?k.dropRight(-m):k.take(m-c)),k)},Vr.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},Vr.prototype.toArray=function(){return this.take(Ie)},Xt(Vr.prototype,function(c,m){var k=/^(?:filter|find|map|reject)|While$/.test(m),ee=/^(?:head|last)$/.test(m),be=De[ee?"take"+(m=="last"?"Right":""):m],Re=ee||/^find/.test(m);be&&(De.prototype[m]=function(){var rt=this.__wrapped__,gt=ee?[1]:arguments,Et=rt instanceof Vr,an=gt[0],ln=Et||ti(rt),vn=function(Ci){var ki=be.apply(De,Cs([Ci],gt));return ee&&$n?ki[0]:ki};ln&&k&&typeof an=="function"&&an.length!=1&&(Et=ln=!1);var $n=this.__chain__,sr=!!this.__actions__.length,Pr=Re&&!$n,ci=Et&&!sr;if(!Re&&ln){rt=ci?rt:new Vr(this);var Mr=c.apply(rt,gt);return Mr.__actions__.push({func:Xp,args:[vn],thisArg:t}),new No(Mr,$n)}return Pr&&ci?c.apply(this,gt):(Mr=this.thru(vn),Pr?ee?Mr.value()[0]:Mr.value():Mr)})}),Po(["pop","push","shift","sort","splice","unshift"],function(c){var m=oa[c],k=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",ee=/^(?:pop|shift)$/.test(c);De.prototype[c]=function(){var be=arguments;if(ee&&!this.__chain__){var Re=this.value();return m.apply(ti(Re)?Re:[],be)}return this[k](function(rt){return m.apply(ti(rt)?rt:[],be)})}}),Xt(Vr.prototype,function(c,m){var k=De[m];if(k){var ee=k.name+"";Qr.call(ps,ee)||(ps[ee]=[]),ps[ee].push({name:m,func:k})}}),ps[Gp(t,O).name]=[{name:"wrapper",func:t}],Vr.prototype.clone=Wc,Vr.prototype.reverse=uh,Vr.prototype.value=Zc,De.prototype.at=TL,De.prototype.chain=DL,De.prototype.commit=NL,De.prototype.next=BL,De.prototype.plant=IL,De.prototype.reverse=RL,De.prototype.toJSON=De.prototype.valueOf=De.prototype.value=FL,De.prototype.first=De.prototype.head,dr&&(De.prototype[dr]=OL),De},Ho=Ms();to?((to.exports=Ho)._=Ho,or._=Ho):eo._=Ho}).call(ea)})(b0,b0.exports);var px=b0.exports;class ga extends Vn.Polygon{constructor(t,r={}){super([],{...r,pmIgnore:!1,interactive:!0});Ht(this,"_width");Ht(this,"_height");Ht(this,"_center");Ht(this,"_rotation");Ht(this,"_isMapReady",!1);Ht(this,"properties");Ht(this,"_helperPoints",{corners:[],midPoints:[]});Ht(this,"_throttledUpdateProperties");const i=t instanceof Vn.LatLngBounds?t:Vn.latLngBounds(t);if(this._center=i.getCenter(),this._rotation=0,console.log("[Rectangle][constructor] Initialisation avec options:",{bounds:i,center:this._center,hasExplicitDimensions:!!(r.width&&r.height),width:r.width,height:r.height}),r.width&&r.height)this._width=r.width,this._height=r.height,console.log("[Rectangle][constructor] Utilisation des dimensions explicites:",{width:this._width,height:this._height});else{const s=i.getSouthWest(),o=i.getNorthEast();this._width=dn.measure("Rectangle.constructor.calculateWidth",()=>{const u=ov([s.lng,s.lat],[o.lng,s.lat],{units:"meters"});return Math.max(u,1)}),this._height=dn.measure("Rectangle.constructor.calculateHeight",()=>{const u=ov([s.lng,s.lat],[s.lng,o.lat],{units:"meters"});return Math.max(u,1)}),console.log("[Rectangle][constructor] Dimensions calculées depuis bounds:",{width:this._width,height:this._height})}(this._width<1||this._height<1)&&this._getPixelsPerMeter()>0&&(this._width=Math.max(this._width,1),this._height=Math.max(this._height,1),this._updatePolygonCoordinates()),this.properties=dn.measure("Rectangle.constructor.initProperties",()=>({type:"Rectangle",style:{...r,name:r.name||""},rotation:this._rotation})),this._throttledUpdateProperties=dn.measure("Rectangle.constructor.initThrottle",()=>px.throttle(()=>{this.updateProperties()},100)),this.on("add",()=>{this._isMapReady=!0,this._updatePolygonCoordinates(),this.updateProperties()}),this.on("remove",()=>{this._isMapReady=!1})}_updatePolygonCoordinates(){dn.measure("Rectangle._updatePolygonCoordinates",()=>{if(!this._isMapReady||!this._map)return;console.log("[Rectangle][_updatePolygonCoordinates] Début mise à jour avec:",{width:this._width,height:this._height,center:this._center,rotation:this._rotation}),this._width=Math.max(this._width,1),this._height=Math.max(this._height,1);const t=this._width/2,r=this._height/2,i=cb([this._center.lng,this._center.lat],r,0,{units:"meters"}).geometry.coordinates,s=cb([this._center.lng,this._center.lat],t,90,{units:"meters"}).geometry.coordinates,o=Math.abs(i[1]-this._center.lat)*2,u=Math.abs(s[0]-this._center.lng)*2,f=[Vn.latLng(this._center.lat+o/2,this._center.lng-u/2),Vn.latLng(this._center.lat+o/2,this._center.lng+u/2),Vn.latLng(this._center.lat-o/2,this._center.lng+u/2),Vn.latLng(this._center.lat-o/2,this._center.lng-u/2)];if(this._rotation===0){this.setLatLngs(f);return}const d=this._map.latLngToContainerPoint(this._center),g=f.map(N=>this._map.latLngToContainerPoint(N)),y=-this._rotation*Math.PI/180,x=Math.cos(y),_=Math.sin(y),D=g.map(N=>{const O=N.x-d.x,F=N.y-d.y;return Vn.point(d.x+(O*x-F*_),d.y+(O*_+F*x))}).map(N=>this._map.containerPointToLatLng(N));console.log("[Rectangle][_updatePolygonCoordinates] Résultat final:",{corners:D,dimensions:{width:this._width,height:this._height}}),this.setLatLngs(D),this.fire("coordinates:updated",{corners:D,center:this._center,rotation:this._rotation,dimensions:{width:this._width,height:this._height}})})}_getPixelsPerMeter(){return dn.measure("Rectangle._getPixelsPerMeter",()=>{if(!this._isMapReady||!this._map)return 1;const t=Math.max(this._width/1e3,1e-4),r=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(Vn.latLng(this._center.lat,this._center.lng+t)).x-r.x,o=ov([this._center.lng,this._center.lat],[this._center.lng+t,this._center.lat],{units:"meters"}),u=Math.abs(s/o);return isNaN(u)||u<=0?(console.warn("[Rectangle][_getPixelsPerMeter] Ratio invalide, utilisation de la valeur par défaut"),1):u})}getRotatedCorners(){return dn.measure("Rectangle.getRotatedCorners",()=>{try{const t=this.getLatLngs();if(!t||!Array.isArray(t)||t.length===0){const r=this._width/2,i=this._height/2;return[Vn.latLng(this._center.lat+i,this._center.lng-r),Vn.latLng(this._center.lat+i,this._center.lng+r),Vn.latLng(this._center.lat-i,this._center.lng+r),Vn.latLng(this._center.lat-i,this._center.lng-r)]}return t[0]}catch(t){console.warn("Error in getRotatedCorners:",t);const r=this._width/2,i=this._height/2;return[Vn.latLng(this._center.lat+i,this._center.lng-r),Vn.latLng(this._center.lat+i,this._center.lng+r),Vn.latLng(this._center.lat-i,this._center.lng+r),Vn.latLng(this._center.lat-i,this._center.lng-r)]}})}getMidPoints(){return dn.measure("Rectangle.getMidPoints",()=>{try{const t=this.getRotatedCorners();if(!t||t.length<4){const i=this._width/2,s=this._height/2;return[Vn.latLng(this._center.lat+s,this._center.lng),Vn.latLng(this._center.lat,this._center.lng+i),Vn.latLng(this._center.lat-s,this._center.lng),Vn.latLng(this._center.lat,this._center.lng-i)]}if(!t.every(i=>i&&typeof i.lat=="number"&&typeof i.lng=="number"))throw new Error("Invalid corner coordinates");return[this._getMidPoint(t[3],t[0]),this._getMidPoint(t[0],t[1]),this._getMidPoint(t[1],t[2]),this._getMidPoint(t[2],t[3])]}catch(t){console.warn("Error in getMidPoints:",t);const r=this._width/2,i=this._height/2;return[Vn.latLng(this._center.lat+i,this._center.lng),Vn.latLng(this._center.lat,this._center.lng+r),Vn.latLng(this._center.lat-i,this._center.lng),Vn.latLng(this._center.lat,this._center.lng-r)]}})}_getMidPoint(t,r){return dn.measure("Rectangle._getMidPoint",()=>{if(!t||!r||typeof t.lat!="number"||typeof t.lng!="number"||typeof r.lat!="number"||typeof r.lng!="number")throw new Error("Invalid points for midpoint calculation");return Vn.latLng((t.lat+r.lat)/2,(t.lng+r.lng)/2)})}getCenter(){return dn.measure("Rectangle.getCenter",()=>this._center)}setCenter(t){dn.measure("Rectangle.setCenter",()=>{this._center=t,this._updatePolygonCoordinates(),this.updateProperties(),this.updateHelperPointPositions()})}getRotation(){return dn.measure("Rectangle.getRotation",()=>this._rotation)}setRotation(t,r=!1){dn.measure("Rectangle.setRotation",()=>{this._rotation=(t%360+360)%360,this._updatePolygonCoordinates(),r&&this.updateProperties(),this.updateHelperPointPositions(),this.fire("rotation:updated",{angle:this._rotation,corners:this.getRotatedCorners(),center:this._center})})}finalizeRotation(){dn.measure("Rectangle.finalizeRotation",()=>{this.updateProperties()})}getDimensions(){return dn.measure("Rectangle.getDimensions",()=>({width:this._width,height:this._height}))}setDimensions(t,r){dn.measure("Rectangle.setDimensions",()=>{console.log("[Rectangle][setDimensions] Début de la mise à jour des dimensions:",{oldWidth:this._width,oldHeight:this._height,newWidth:t,newHeight:r}),this._width=t,this._height=r,console.log("[Rectangle][setDimensions] Mise à jour des coordonnées du polygone"),this._updatePolygonCoordinates(),console.log("[Rectangle][setDimensions] Mise à jour des propriétés"),this.updateProperties(),console.log("[Rectangle][setDimensions] Émission de l'événement dimensions:updated"),this.fire("dimensions:updated",{width:this._width,height:this._height,corners:this.getRotatedCorners(),center:this._center}),this.updateHelperPointPositions()})}resizeFromCorner(t,r){dn.measure("Rectangle.resizeFromCorner",()=>{if(!(!this._isMapReady||!this._map))try{const i=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(r),o=s.x-i.x,u=s.y-i.y,f=-this._rotation*Math.PI/180,d=Math.cos(f),g=Math.sin(f),y=o*d-u*g,x=o*g+u*d,_=this._getPixelsPerMeter(),M=t===0||t===3?-1:1,D=t===0||t===1?1:-1,N=Math.max(Math.abs(y*2)/_,1),O=Math.max(Math.abs(x*2)/_,1),F=N*_/2,Y=O*_/2,Q=M*F*d-D*Y*g,le=M*F*g+D*Y*d,ce=Vn.point(s.x-Q,s.y-le),xe=this._map.containerPointToLatLng(ce),Z=[Vn.point(ce.x-F,ce.y+Y),Vn.point(ce.x+F,ce.y+Y),Vn.point(ce.x+F,ce.y-Y),Vn.point(ce.x-F,ce.y-Y)].map(z=>{const I=z.x-ce.x,$=z.y-ce.y;return Vn.point(ce.x+(I*d-$*g),ce.y+(I*g+$*d))}).map(z=>this._map.containerPointToLatLng(z));this._width=N,this._height=O,this._center=xe,this.setLatLngs(Z),this.fire("coordinates:updated",{corners:Z,center:this._center,rotation:this._rotation})}catch(i){console.warn("Error in resizeFromCorner:",i)}})}resizeFromSide(t,r){dn.measure("Rectangle.resizeFromSide",()=>{if(!this._isMapReady||!this._map)return;const i=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(r),o=s.x-i.x,u=s.y-i.y,f=-this._rotation*Math.PI/180,d=Math.cos(f),g=Math.sin(f),y=o*d-u*g,x=o*g+u*d,_=this._getPixelsPerMeter();t%2===0?this._height=Math.abs(x*2)/_:this._width=Math.abs(y*2)/_,this._updatePolygonCoordinates(),this.updateProperties()})}moveFromCenter(t){dn.measure("Rectangle.moveFromCenter",()=>{this._center=t,this._updatePolygonCoordinates(),this.updateProperties()})}updateProperties(){dn.measure("Rectangle.updateProperties",()=>{var i,s,o;const t=this.getRotatedCorners(),r=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"";this.properties={...this.properties,width:this._width,height:this._height,surface:this._width*this._height,perimeter:2*(this._width+this._height),center:this._center,corners:t,midPoints:this.getMidPoints(),rotation:this._rotation,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:r}},this.fire("properties:updated",{shape:this,properties:this.properties,corners:t,midPoints:this.getMidPoints()})})}setName(t){dn.measure("Rectangle.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=t,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return dn.measure("Rectangle.getName",()=>{var t,r;return((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||""})}generateHelperPoints(t,r="rgba(220, 38, 38, 0.5)",i="rgba(37, 99, 235, 0.5)"){dn.measure("Rectangle.generateHelperPoints",()=>{this.clearHelperPoints();const s=this.getRotatedCorners(),o=this.getMidPoints();this._helperPoints.corners=s.map(u=>Vn.circleMarker(u,{radius:5,color:r,fillColor:r,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-corner",pmIgnore:!0,interactive:!1}).addTo(t)),this._helperPoints.midPoints=o.map(u=>Vn.circleMarker(u,{radius:5,color:i,fillColor:i,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-midpoint",pmIgnore:!0,interactive:!1}).addTo(t))})}clearHelperPoints(){dn.measure("Rectangle.clearHelperPoints",()=>{this._helperPoints.corners.forEach(t=>{if(t&&t.remove)try{t.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de coin:",r)}}),this._helperPoints.midPoints.forEach(t=>{if(t&&t.remove)try{t.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de milieu:",r)}}),this._helperPoints.corners=[],this._helperPoints.midPoints=[]})}updateHelperPointPositions(){dn.measure("Rectangle.updateHelperPointPositions",()=>{if(this._helperPoints.corners.length===0&&this._helperPoints.midPoints.length===0)return;const t=this.getRotatedCorners(),r=this.getMidPoints();t.forEach((i,s)=>{this._helperPoints.corners[s]&&this._helperPoints.corners[s].setLatLng(i)}),r.forEach((i,s)=>{this._helperPoints.midPoints[s]&&this._helperPoints.midPoints[s].setLatLng(i)})})}findClosestHelperPoint(t){return dn.measure("Rectangle.findClosestHelperPoint",()=>{const r=this.getRotatedCorners(),i=this.getMidPoints(),s=[...r,...i];if(s.length===0)return null;let o=s[0],u=t.distanceTo(o);for(let f=1;f<s.length;f++){const d=t.distanceTo(s[f]);d<u&&(u=d,o=s[f])}return o})}toggleHelperPoints(t,r,i,s){dn.measure("Rectangle.toggleHelperPoints",()=>{r&&t?this.generateHelperPoints(t,i,s):this.clearHelperPoints()})}containsPoint(t){return dn.measure("Rectangle.containsPoint",()=>{const r=this.getRotatedCorners();if(r.length!==4)return!1;let i=!1;for(let s=0,o=r.length-1;s<r.length;o=s++){const u=r[s].lng,f=r[s].lat,d=r[o].lng,g=r[o].lat;f>t.lat!=g>t.lat&&t.lng<(d-u)*(t.lat-f)/(g-f)+u&&(i=!i)}return i})}}var _g,uB=new Uint8Array(16);function cB(){if(!_g&&(_g=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!_g))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _g(uB)}const fB=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function hB(e){return typeof e=="string"&&fB.test(e)}var da=[];for(var uv=0;uv<256;++uv)da.push((uv+256).toString(16).substr(1));function dB(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(da[e[n+0]]+da[e[n+1]]+da[e[n+2]]+da[e[n+3]]+"-"+da[e[n+4]]+da[e[n+5]]+"-"+da[e[n+6]]+da[e[n+7]]+"-"+da[e[n+8]]+da[e[n+9]]+"-"+da[e[n+10]]+da[e[n+11]]+da[e[n+12]]+da[e[n+13]]+da[e[n+14]]+da[e[n+15]]).toLowerCase();if(!hB(t))throw TypeError("Stringified UUID is invalid");return t}function pB(e,n,t){e=e||{};var r=e.random||(e.rng||cB)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,dB(r)}var ao=(e=>(e.PRIVATE="private",e.COMPANY="company",e.EMPLOYEE="employee",e.VISITOR="visitor",e))(ao||{});const Bp=kp("notes",()=>{const e=Ft([{id:"a-faire",title:"À faire",color:"#F59E0B",order:-1,isDefault:!0},{id:"en-cours",title:"En cours",color:"#3B82F6",order:0,isDefault:!0},{id:"termine",title:"Terminé",color:"#10B981",order:1,isDefault:!0}]),n=Ft([{id:1,title:"Point d'irrigation principal",description:"Point de départ du système d'irrigation",location:[43.6047,1.4442],columnId:"en-cours",order:0,createdAt:"2023-05-15T10:30:00Z",updatedAt:"2023-05-15T10:30:00Z",accessLevel:"company",style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[{id:1,text:"Vérifier le débit à cet endroit",createdAt:"2023-05-15T11:30:00Z",userId:1,userName:"Jean Dupont",userRole:"ENTREPRISE"},{id:2,text:"Débit vérifié, tout est normal",createdAt:"2023-05-16T09:45:00Z",userId:2,userName:"Marie Martin",userRole:"SALARIE"}],photos:[{id:1,url:"https://thumbs.dreamstime.com/b/gros-plan-de-pont-en-b%C3%A9ton-et-canaux-d-irrigation-avec-le-fond-arbre-l-194103331.jpg",createdAt:"2023-05-15T10:35:00Z",caption:"Vue du point d'irrigation"}]},{id:2,title:"Zone à problème",description:"Fuite détectée dans cette zone",location:[43.6057,1.4452],columnId:"en-cours",order:1,createdAt:"2023-05-16T14:20:00Z",updatedAt:"2023-05-16T14:20:00Z",accessLevel:"employee",style:{color:"#EF4444",weight:2,opacity:1,fillColor:"#EF4444",fillOpacity:.6,radius:8},comments:[],photos:[]},{id:3,title:"Vanne de contrôle",description:"Vanne principale pour le secteur nord",location:[43.6067,1.4462],columnId:"termine",order:0,createdAt:"2023-05-17T09:15:00Z",updatedAt:"2023-05-17T09:15:00Z",accessLevel:"visitor",style:{color:"#10B981",weight:2,opacity:1,fillColor:"#10B981",fillOpacity:.6,radius:8},comments:[],photos:[]}]),t=gr(()=>R=>e.value.find(Z=>Z.id===R)),r=gr(()=>R=>{const Z=e.value.find(z=>z.id===R);return Z?Z.color:"#6B7280"}),i=gr(()=>R=>n.value.filter(Z=>Z.columnId===R).sort((Z,z)=>Z.order-z.order)),s=gr(()=>e.value.find(R=>R.isDefault)||e.value[0]),o=gr(()=>[...e.value].sort((R,Z)=>R.order-Z.order)),u=gr(()=>R=>{const Z=va();if(!Z.user)return!1;if(Z.isAdmin)return!0;switch(R.accessLevel){case"private":return!0;case"company":return Z.isAdmin||Z.isEntreprise;case"employee":return Z.isAdmin||Z.isEntreprise||Z.isSalarie;case"visitor":return Z.isAdmin||Z.isEntreprise||Z.isSalarie||Z.isVisiteur;default:return!1}}),f=gr(()=>n.value.filter(R=>u.value(R))),d=gr(()=>R=>f.value.filter(Z=>Z.columnId===R).sort((Z,z)=>Z.order-z.order));function g(R,Z="#6B7280"){const z=e.value.reduce((I,$)=>Math.max(I,$.order),-1);e.value.push({id:pB(),title:R,color:Z,order:z+1})}function y(R,Z){const z=e.value.findIndex(I=>I.id===R);z!==-1&&(e.value[z]={...e.value[z],...Z})}function x(R){const Z=e.value.find(I=>I.id===R);if(!Z||Z.isDefault)return;const z=s.value;n.value.forEach(I=>{I.columnId===R&&(I.columnId=z.id)}),e.value=e.value.filter(I=>I.id!==R)}function _(R){R.forEach((Z,z)=>{const I=e.value.find($=>$.id===Z);I&&(I.order=z)})}function M(R){const Z=n.value.length>0?Math.max(...n.value.map(W=>W.id))+1:1,z=new Date().toISOString(),I=n.value.filter(W=>W.columnId===R.columnId),$=I.length>0?Math.max(...I.map(W=>W.order))+1:0,U=R.accessLevel||"private";return n.value.push({...R,id:Z,order:$,accessLevel:U,createdAt:z,updatedAt:z,comments:[],photos:[]}),Z}function D(R,Z){const z=n.value.findIndex(I=>I.id===R);if(z!==-1){const I={...n.value[z],...Z,updatedAt:new Date().toISOString()};n.value[z]=I}}function N(R){n.value=n.value.filter(Z=>Z.id!==R)}function O(R,Z){const z=n.value.findIndex(I=>I.id===R);if(z!==-1){const I=n.value[z];if(I.columnId!==Z){const U=n.value.filter(ie=>ie.columnId===Z),W=U.length>0?Math.max(...U.map(ie=>ie.order))+1:0,q={...I,columnId:Z,order:W,updatedAt:new Date().toISOString()};n.value[z]=q}else n.value[z]={...n.value[z],updatedAt:new Date().toISOString()}}}function F(R,Z){Z.forEach((z,I)=>{const $=n.value.findIndex(U=>U.id===z&&U.columnId===R);$!==-1&&(n.value[$]={...n.value[$],order:I,updatedAt:new Date().toISOString()})})}function Y(R){switch(R){case"private":return"Privé";case"company":return"Entreprise";case"employee":return"Salariés";case"visitor":return"Visiteurs";default:return"Inconnu"}}async function Q(R,Z){try{const z=va();if(!z.user)throw new Error("Vous devez être connecté pour ajouter un commentaire");if(!z.isEntreprise&&!z.isAdmin)throw new Error("Seules les entreprises peuvent ajouter des commentaires");if(!n.value.some(re=>re.id===R))throw new Error(`La note avec l'ID ${R} n'existe pas`);const U=(await Ed.addComment(R,Z)).data,W=n.value.findIndex(re=>re.id===R);if(W===-1)return;const q=n.value[W];q.comments||(q.comments=[]);const ie={id:U.id,text:U.text,createdAt:U.created_at,userId:U.user,userName:U.user_name,userRole:U.user_role};return q.comments.push(ie),q.updatedAt=new Date().toISOString(),n.value[W]={...q},ie.id}catch(z){throw console.error("Erreur lors de l'ajout du commentaire:",z),z}}async function le(R,Z){try{const z=n.value.findIndex(U=>U.id===R);if(z===-1)throw new Error(`La note avec l'ID ${R} n'existe pas`);const I=n.value[z];if(!I.comments||I.comments.length===0)throw new Error("Aucun commentaire trouvé pour cette note");if(!I.comments.some(U=>U.id===Z))throw new Error(`Le commentaire avec l'ID ${Z} n'existe pas`);await Ed.deleteComment(Z),I.comments=I.comments.filter(U=>U.id!==Z),I.updatedAt=new Date().toISOString(),n.value[z]={...I}}catch(z){throw console.error("Erreur lors de la suppression du commentaire:",z),z}}async function ce(R,Z){try{if(Z.id&&Z.image){const z=n.value.findIndex(U=>U.id===R);if(z===-1)return;const I=n.value[z];I.photos||(I.photos=[]);const $={id:Z.id,url:Z.image,caption:Z.caption,createdAt:Z.created_at};return I.photos.push($),I.updatedAt=new Date().toISOString(),n.value[z]={...I},$.id}else{const I=(await Ed.addPhoto(R,Z.url,Z.caption||"")).data,$=n.value.findIndex(q=>q.id===R);if($===-1)return;const U=n.value[$];U.photos||(U.photos=[]);const W={id:I.id,url:I.image,caption:I.caption,createdAt:I.created_at};return U.photos.push(W),U.updatedAt=new Date().toISOString(),n.value[$]={...U},W.id}}catch(z){throw console.error("Erreur lors de l'ajout de la photo:",z),z}}async function xe(R,Z){try{await Ed.deletePhoto(Z);const z=n.value.findIndex($=>$.id===R);if(z===-1||!n.value[z].photos)return;const I=n.value[z];I.photos=I.photos.filter($=>$.id!==Z),I.updatedAt=new Date().toISOString(),n.value[z]={...I}}catch(z){throw console.error("Erreur lors de la suppression de la photo:",z),z}}async function G(R,Z,z){try{await Ed.updatePhotoCaption(Z,z);const I=n.value.findIndex(W=>W.id===R);if(I===-1||!n.value[I].photos)return;const $=n.value[I],U=$.photos.findIndex(W=>W.id===Z);if(U===-1)return;$.photos[U].caption=z,$.updatedAt=new Date().toISOString(),n.value[I]={...$}}catch(I){throw console.error("Erreur lors de la mise à jour de la légende:",I),I}}return{columns:e,notes:n,getColumnById:t,getColumnColor:r,getNotesByColumn:i,getDefaultColumn:s,getSortedColumns:o,hasAccessToNote:u,getAccessibleNotes:f,getAccessibleNotesByColumn:d,getAccessLevelLabel:Y,addColumn:g,updateColumn:y,removeColumn:x,reorderColumns:_,addNote:M,updateNote:D,removeNote:N,moveNote:O,reorderNotes:F,addComment:Q,removeComment:le,addPhoto:ce,removePhoto:xe,updatePhotoCaption:G}});class Op extends Rt.Marker{constructor(t,r={}){const s=`<div class="geo-note-marker" style="color: ${r.color||"#2b6451"};"></div>`,u={icon:Rt.divIcon({html:s,className:"",iconSize:[24,36],iconAnchor:[12,36],popupAnchor:[0,-36]}),draggable:!1,autoPan:!0};super(t,u);Ht(this,"properties");this.properties={type:"Note",name:r.name||"Note géolocalisée",description:r.description||"",columnId:r.columnId||"en-cours",accessLevel:r.accessLevel||ao.PRIVATE,category:r.category||"forages",style:{color:r.color||"#2b6451",weight:r.weight||2,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity!==void 0?r.fillOpacity:.8,radius:r.radius||12},comments:[],photos:[],order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},this.bindPopup(this.createPopupContent()),this.on("dblclick",this.onDoubleClick),console.log("[GeoNote][constructor] Note créée:",{location:t,name:this.properties.name,type:this.properties.type,style:this.properties.style})}createPopupContent(){const t=document.createElement("div");t.className="geo-note-popup",t.style.display="flex",t.style.flexDirection="column";const r=document.createElement("div");r.className="geo-note-header",t.appendChild(r);const i=document.createElement("div");i.className="geo-note-title",i.textContent=this.properties.name,r.appendChild(i);const s=document.createElement("div");s.className="geo-note-badges",r.appendChild(s);const o=document.createElement("div");o.className="geo-note-badge",o.style.backgroundColor=this.getColumnColor(this.properties.columnId),o.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
        <path d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5z" />
        <path d="M11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
      </svg>
      ${this.getColumnLabel(this.properties.columnId)}
    `,s.appendChild(o);const u=document.createElement("div");if(u.className="geo-note-badge",u.style.backgroundColor=this.getAccessLevelColor(this.properties.accessLevel),u.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
      </svg>
      ${this.getAccessLevelLabel(this.properties.accessLevel)}
    `,s.appendChild(u),this.properties.description&&this.properties.description.trim()!==""){const y=document.createElement("div");y.className="geo-note-content",t.appendChild(y);const x=document.createElement("div");x.className="geo-note-description",x.textContent=this.properties.description,y.appendChild(x)}const f=document.createElement("div");f.className="geo-note-buttons",f.style.display="flex",f.style.width="100%",f.style.marginTop="auto",f.style.borderTop="1px solid #E5E7EB",t.appendChild(f);const d=document.createElement("button");d.className="geo-note-edit-button",d.style.flex="1",d.style.height="36px",d.style.border="none",d.style.borderRight="1px solid #E5E7EB",d.style.background="transparent",d.style.color="#4B5563",d.style.fontSize="11px",d.style.fontWeight="500",d.style.display="flex",d.style.alignItems="center",d.style.justifyContent="center",d.style.cursor="pointer",d.style.padding="0",d.style.margin="0",d.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3 h-3 mr-1 inline-block align-text-bottom">
        <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
      </svg>
      Éditer
    `,d.onclick=y=>{y.stopPropagation(),this.editNote()},f.appendChild(d);const g=document.createElement("button");return g.className="geo-note-open-button",g.style.flex="1",g.style.height="36px",g.style.border="none",g.style.background="transparent",g.style.color="#3B82F6",g.style.fontSize="11px",g.style.fontWeight="500",g.style.display="flex",g.style.alignItems="center",g.style.justifyContent="center",g.style.cursor="pointer",g.style.padding="0",g.style.margin="0",g.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3 h-3 mr-1 inline-block align-text-bottom">
        <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
      </svg>
      Ouvrir
    `,g.onclick=y=>{y.stopPropagation(),this.openInGoogleMaps()},f.appendChild(g),t}getColumnColor(t){return{"en-cours":"#2b6451",termine:"#10B981"}[t]||"#6B7280"}getColumnLabel(t){return{"en-cours":"En cours",termine:"Terminé"}[t]||t}getAccessLevelLabel(t){switch(t){case ao.PRIVATE:return"Privé";case ao.COMPANY:return"Entreprise";case ao.EMPLOYEE:return"Salariés";case ao.VISITOR:return"Visiteurs";default:return"Inconnu"}}getAccessLevelColor(t){switch(t){case ao.PRIVATE:return"#9CA3AF";case ao.COMPANY:return"#EF4444";case ao.EMPLOYEE:return"#F59E0B";case ao.VISITOR:return"#10B981";default:return"#6B7280"}}onDoubleClick(t){Rt.DomEvent.stopPropagation(t),this.editNote()}editNote(){this.closePopup();const t={id:this._leaflet_id,title:this.properties.name,description:this.properties.description,location:[this.getLatLng().lat,this.getLatLng().lng],columnId:this.properties.columnId||"en-cours",accessLevel:this.properties.accessLevel||"company",style:this.properties.style||{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:[],photos:[]};console.log("[GeoNote] Émission de l'événement note:edit avec",t);const r=new CustomEvent("geonote:edit",{detail:{note:t}});window.dispatchEvent(r),this.fire("note:edit",{note:t})}openInGoogleMaps(){this.closePopup();const t=this.getLatLng().lat,r=this.getLatLng().lng,i=`https://www.google.com/maps/dir/?api=1&destination=${t},${r}`;window.open(i,"_blank")}updateProperties(){var s,o;this.properties.type="Note",this.properties.category||(this.properties.category="forages"),this.properties.accessLevel||(this.properties.accessLevel=ao.PRIVATE);const t=(s=this.getElement())==null?void 0:s.querySelector(".geo-note-marker"),r=t?window.getComputedStyle(t).color:"#2b6451",i=((o=this.properties.style)==null?void 0:o.radius)||12;this.properties.style={color:r,fillColor:r,weight:2,fillOpacity:.8,radius:i}}setNoteStyle(t){if(t.color||t.fillColor){const i=`<div class="geo-note-marker" style="color: ${t.color||t.fillColor||"#2b6451"};"></div>`,s=Rt.divIcon({html:i,className:"",iconSize:[24,36],iconAnchor:[12,36],popupAnchor:[0,-36]});this.setIcon(s)}this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,color:t.color||this.properties.style.color,weight:t.weight||this.properties.style.weight,fillColor:t.fillColor||this.properties.style.fillColor,fillOpacity:t.fillOpacity!==void 0?t.fillOpacity:this.properties.style.fillOpacity,radius:t.radius||this.properties.style.radius||12}),this.updateProperties()}toBackendFormat(t){this.updateProperties();const r=this.getLatLng(),s={...{...this.properties.style,radius:this.properties.style.radius||12},_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel};return{id:t,type_forme:"Note",data:{location:[r.lat,r.lng],name:this.properties.name,description:this.properties.description,columnId:this.properties.columnId,accessLevel:this.properties.accessLevel,category:this.properties.category||"forages",style:s,comments:this.properties.comments||[],photos:this.properties.photos||[],order:this.properties.order||0,createdAt:this.properties.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()}}}updateFromBackendData(t){this.properties.type="Note";const r=t.style?{...t.style,radius:t.style.radius||12}:this.properties.style;this.properties={...this.properties,name:t.name||this.properties.name,description:t.description||this.properties.description,columnId:t.columnId||this.properties.columnId,accessLevel:t.accessLevel||this.properties.accessLevel,category:t.category||this.properties.category||"forages",style:r,comments:t.comments||this.properties.comments||[],photos:t.photos||this.properties.photos||[],order:t.order||this.properties.order||0,createdAt:t.createdAt||this.properties.createdAt,updatedAt:t.updatedAt||new Date().toISOString()},this.setNoteStyle(r),this.bindPopup(this.createPopupContent()),console.log("[GeoNote][updateFromBackendData] Note mise à jour:",{name:this.properties.name,type:this.properties.type,style:this.properties.style})}static fromBackendData(t){var s,o,u,f,d,g,y;if(!t.location||!Array.isArray(t.location)||t.location.length!==2)throw new Error("Les données de la note ne contiennent pas de position valide");console.log("[GeoNote][fromBackendData] Création d'une note à partir des données:",t);const r=((s=t.style)==null?void 0:s._accessLevel)||((o=t.style)==null?void 0:o.accessLevel)||t.accessLevel||ao.PRIVATE;console.log("[GeoNote][fromBackendData] Niveau d'accès récupéré:",r,"Style:",t.style),t.accessLevel=r;const i=new Op(t.location,{name:t.name,description:t.description,columnId:t.columnId,accessLevel:r,category:t.category||"forages",color:(u=t.style)==null?void 0:u.color,weight:(f=t.style)==null?void 0:f.weight,fillColor:(d=t.style)==null?void 0:d.fillColor,fillOpacity:(g=t.style)==null?void 0:g.fillOpacity,radius:(y=t.style)==null?void 0:y.radius});return i.properties.type="Note",i.properties.comments=t.comments||[],i.properties.photos=t.photos||[],i.properties.order=t.order||0,i.properties.createdAt=t.createdAt||new Date().toISOString(),i.properties.updatedAt=t.updatedAt||new Date().toISOString(),t.style&&i.setNoteStyle(t.style),i.bindPopup(i.createPopupContent()),console.log("[GeoNote][fromBackendData] Note créée:",{location:t.location,name:i.properties.name,type:i.properties.type,style:i.properties.style}),i}}function gB(e){return e&&Array.isArray(e.points)&&e.points.length>0&&Array.isArray(e.points[0])&&e.points[0].length===2}function mB(e){if(!e||typeof e!="object")return console.log("[DrawingStore] ElevationData invalide: pas un objet",{data:e}),!1;const n=Array.isArray(e.points)&&e.points.length>0&&Array.isArray(e.points[0])&&e.points[0].length===2,t=typeof e.style=="object"&&e.style!==null,r=!e.elevationData||Array.isArray(e.elevationData)&&e.elevationData.every(i=>typeof i=="object"&&"distance"in i&&"elevation"in i);return n&&t&&r}function vB(e){return e&&Array.isArray(e.points)&&e.points.length>0&&Array.isArray(e.points[0])&&e.points[0].length===2}function wb(e){var n,t,r,i,s,o,u,f,d,g,y,x,_,M,D,N,O,F,Y,Q,le,ce,xe,G,R,Z,z;if(console.log("[DrawingStore] Conversion de la forme en élément",{type:(n=e.properties)==null?void 0:n.type,name:(r=(t=e.properties)==null?void 0:t.style)==null?void 0:r.name,properties:e.properties}),((i=e.properties)==null?void 0:i.type)==="Note"){const I=e.getLatLng();return{type_forme:"Note",data:{points:[[I.lng,I.lat]],style:{color:((s=e.properties.style)==null?void 0:s.color)||"#2b6451",weight:((o=e.properties.style)==null?void 0:o.weight)||3,opacity:((u=e.properties.style)==null?void 0:u.opacity)||1,fillColor:((f=e.properties.style)==null?void 0:f.fillColor)||"#2b6451",fillOpacity:((d=e.properties.style)==null?void 0:d.fillOpacity)||.2,name:((g=e.properties.style)==null?void 0:g.name)||""}}}}if(e instanceof Sf||((y=e.properties)==null?void 0:y.type)==="ElevationLine")return{type_forme:"ElevationLine",data:{points:e.getLatLngs().map(U=>[U.lng,U.lat]),style:{color:((x=e.properties.style)==null?void 0:x.color)||"#2b6451",weight:((_=e.properties.style)==null?void 0:_.weight)||4,opacity:((M=e.properties.style)==null?void 0:M.opacity)||.8,name:((D=e.properties.style)==null?void 0:D.name)||""},category:e.properties.category||"forages",accessLevel:e.properties.accessLevel||"visitor",elevationData:e.properties.elevationData,minElevation:e.properties.minElevation,maxElevation:e.properties.maxElevation,elevationGain:e.properties.elevationGain,elevationLoss:e.properties.elevationLoss,averageSlope:e.properties.averageSlope,maxSlope:e.properties.maxSlope}};if(e instanceof gf||((N=e.properties)==null?void 0:N.type)==="Polygon")return{type_forme:"Polygon",data:{points:e.getLatLngs()[0].map(U=>[U.lng,U.lat]),style:{color:((O=e.properties.style)==null?void 0:O.color)||"#2b6451",weight:((F=e.properties.style)==null?void 0:F.weight)||3,opacity:((Y=e.properties.style)==null?void 0:Y.opacity)||1,fillColor:((Q=e.properties.style)==null?void 0:Q.fillColor)||"#2b6451",fillOpacity:((le=e.properties.style)==null?void 0:le.fillOpacity)||.2,name:((ce=e.properties.style)==null?void 0:ce.name)||""},category:e.properties.category||"forages",accessLevel:e.properties.accessLevel||"visitor"}};if(e instanceof Ts||((xe=e.properties)==null?void 0:xe.type)==="Line")return{type_forme:"Line",data:{points:e.getLatLngs().map(U=>[U.lng,U.lat]),category:e.properties.category||"forages",accessLevel:e.properties.accessLevel||"visitor",style:{color:((G=e.properties.style)==null?void 0:G.color)||"#2b6451",weight:((R=e.properties.style)==null?void 0:R.weight)||3,opacity:((Z=e.properties.style)==null?void 0:Z.opacity)||1,name:((z=e.properties.style)==null?void 0:z.name)||""}}};throw new Error("Type de forme non reconnu")}function yB(e){var n,t,r,i,s,o,u,f,d,g,y,x,_,M,D,N,O,F,Y,Q,le,ce,xe,G,R,Z,z,I,$,U,W,q,ie,re,we,Pe,Ie,A,J,fe,ne,he,ae;switch(console.log("[DrawingStore] Conversion de l'élément stocké en forme",{element:e}),e.type_forme){case"Polygon":{const T=e.data;if(!gB(T))return console.error("[DrawingStore] Données invalides pour Polygon"),null;const ue=T.points.map(Ve=>Vn.latLng(Ve[1],Ve[0])),ke=((n=T.style)==null?void 0:n._accessLevel)||((t=T.style)==null?void 0:t.accessLevel)||T.accessLevel||"visitor";console.log("[DrawingStore] Polygon - Niveau d'accès récupéré:",ke,"Style:",T.style),T.accessLevel=ke;const Ce=new gf([ue],{color:((r=T.style)==null?void 0:r.color)||"#2b6451",weight:((i=T.style)==null?void 0:i.weight)||3,opacity:((s=T.style)==null?void 0:s.opacity)||1,fillColor:((o=T.style)==null?void 0:o.fillColor)||"#2b6451",fillOpacity:((u=T.style)==null?void 0:u.fillOpacity)||.2,dashArray:((f=T.style)==null?void 0:f.dashArray)||"",name:((d=T.style)==null?void 0:d.name)||"",category:T.category||"forages",accessLevel:ke});return Ce.updateProperties(),Ce}case"ElevationLine":{const T=e.data;if(!mB(T))return console.error("[DrawingStore] Données invalides pour ElevationLine"),null;const ue=T.points.map(Ve=>Vn.latLng(Ve[1],Ve[0])),ke=((g=T.style)==null?void 0:g._accessLevel)||((y=T.style)==null?void 0:y.accessLevel)||T.accessLevel||"visitor";console.log("[DrawingStore] ElevationLine - Niveau d'accès récupéré:",ke,"Style:",T.style),T.accessLevel=ke;const Ce=new Sf(ue,{color:((x=T.style)==null?void 0:x.color)||"#2b6451",weight:((_=T.style)==null?void 0:_.weight)||4,opacity:((M=T.style)==null?void 0:M.opacity)||.8,name:((D=T.style)==null?void 0:D.name)||"",category:T.category||"forages",accessLevel:ke});return Ce.properties={type:"ElevationLine",category:T.category||"forages",accessLevel:ke,style:{...T.style||{},name:((N=T.style)==null?void 0:N.name)||""},elevationData:T.elevationData,minElevation:T.minElevation,maxElevation:T.maxElevation,elevationGain:T.elevationGain,elevationLoss:T.elevationLoss,averageSlope:T.averageSlope,maxSlope:T.maxSlope,dataSource:"restored"},T.elevationData&&Ce.updateElevationProfile(),console.log("[DrawingStore] ElevationLine restored:",{points:ue.length,hasElevationData:!!T.elevationData,name:(O=T.style)==null?void 0:O.name,properties:Ce.properties}),Ce}case"Line":{const T=e.data;if(!vB(T))return console.error("[DrawingStore] Données invalides pour Ligne"),null;const ue=T.points.map(Ve=>Vn.latLng(Ve[1],Ve[0])),ke=((F=T.style)==null?void 0:F._accessLevel)||((Y=T.style)==null?void 0:Y.accessLevel)||T.accessLevel||"visitor";console.log("[DrawingStore] Line - Niveau d'accès récupéré:",ke,"Style:",T.style),T.accessLevel=ke;const Ce=new Ts(ue,{...T.style||{},name:((Q=T.style)==null?void 0:Q.name)||"",category:T.category||"forages",accessLevel:ke});return Ce.updateProperties(),Ce}case"Rectangle":{const T=e.data;if(console.log("[DrawingStore][convertStoredElementToShape] Restauration Rectangle:",{data:T,bounds:T.bounds,width:T.width,height:T.height,rotation:T.rotation}),!T.bounds)return console.error("[DrawingStore] Données de bounds manquantes pour Rectangle"),null;const ue=new Vn.LatLngBounds(Vn.latLng(T.bounds.southWest[1],T.bounds.southWest[0]),Vn.latLng(T.bounds.northEast[1],T.bounds.northEast[0])),ke=new ga(ue,{color:((le=T.style)==null?void 0:le.color)||"#2b6451",weight:((ce=T.style)==null?void 0:ce.weight)||3,opacity:((xe=T.style)==null?void 0:xe.opacity)||1,fillColor:((G=T.style)==null?void 0:G.fillColor)||"#2b6451",fillOpacity:((R=T.style)==null?void 0:R.fillOpacity)||.2,dashArray:((Z=T.style)==null?void 0:Z.dashArray)||"",name:((z=T.style)==null?void 0:z.name)||"",width:T.width,height:T.height});return T.rotation&&ke.setRotation(T.rotation),console.log("[DrawingStore][convertStoredElementToShape] Rectangle restauré:",{bounds:ke.getBounds(),dimensions:ke.getDimensions(),properties:ke.properties}),ke}case"Circle":{console.log("[DrawingStore] Traitement d'un Circle à partir de l'API",{id:e.id,data:e.data,hasName:(($=(I=e.data)==null?void 0:I.style)==null?void 0:$.name)!==void 0,name:(W=(U=e.data)==null?void 0:U.style)==null?void 0:W.name});const T=e.data;if(!T.center||!T.radius)return console.error("[DrawingStore] Données invalides pour Circle"),null;const ue=Vn.circle([T.center[1],T.center[0]],{color:((q=T.style)==null?void 0:q.color)||"#2b6451",weight:((ie=T.style)==null?void 0:ie.weight)||3,opacity:((re=T.style)==null?void 0:re.opacity)||1,fillColor:((we=T.style)==null?void 0:we.fillColor)||"#2b6451",fillOpacity:((Pe=T.style)==null?void 0:Pe.fillOpacity)||.2,dashArray:((Ie=T.style)==null?void 0:Ie.dashArray)||"",radius:T.radius});return ue.properties={type:"Circle",radius:T.radius,diameter:T.radius*2,surface:Math.PI*T.radius*T.radius,perimeter:2*Math.PI*T.radius,style:{...T.style||{},name:((A=T.style)==null?void 0:A.name)||""}},console.log("[DrawingStore] Cercle créé:",{centerType:typeof T.center,center:T.center,radius:T.radius,style:ue.properties.style,name:ue.properties.style.name}),ue}case"Note":{console.log("[DrawingStore] Traitement d'une Note à partir de l'API",{id:e.id,data:e.data});const T=e.data;if(!T.location)return console.error("[DrawingStore] Données invalides pour Note"),null;try{const ue={location:T.location,name:T.name||"Note géolocalisée",description:T.description||"",columnId:T.columnId||"en-cours",accessLevel:T.accessLevel||"private",category:T.category||"forages",style:{color:((J=T.style)==null?void 0:J.color)||"#2b6451",weight:((fe=T.style)==null?void 0:fe.weight)||2,fillColor:((ne=T.style)==null?void 0:ne.fillColor)||"#2b6451",fillOpacity:((he=T.style)==null?void 0:he.fillOpacity)||.8,radius:((ae=T.style)==null?void 0:ae.radius)||12},comments:T.comments||[],photos:T.photos||[],order:T.order||0,createdAt:T.createdAt||new Date().toISOString(),updatedAt:T.updatedAt||new Date().toISOString()};console.log("[DrawingStore] Données préparées pour la note:",ue);const ke=Op.fromBackendData(ue);return ke._dbId=e.id,console.log("[DrawingStore] Note créée:",{id:e.id,location:ue.location,name:ue.name,type:ke.properties.type}),ke}catch(ue){return console.error("[DrawingStore] Erreur lors de la création de la Note:",ue),null}}default:return console.warn("[DrawingStore] Type non géré pour la restauration:",e.type_forme),null}}const Ip=kp("drawing",{state:()=>({currentMapId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",filters:{accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}},currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null,performanceMonitor:dd()}),getters:{hasUnsavedChanges:e=>e.unsavedChanges,getCurrentElements:e=>e.elements,getSelectedElement:e=>e.selectedElement,getCurrentTool:e=>e.currentTool,getCurrentStyle:e=>e.currentStyle,getLastUsedType:e=>e.lastUsedType,getFilters:e=>e.filters,getFilteredElements:e=>{if(e.elements.length===0)return console.log("[DrawingStore][getFilteredElements] Aucun élément dans le store, retour d'un tableau vide"),[];console.log("[DrawingStore][getFilteredElements] Début du filtrage avec",{totalElements:e.elements.length,filters:JSON.stringify({accessLevels:e.filters.accessLevels,categories:e.filters.categories,shapeTypes:e.filters.shapeTypes})}),console.log("[DrawingStore][getFilteredElements] Éléments dans le store:",e.elements.map(t=>({id:t.id,type_forme:t.type_forme,data:t.data?JSON.stringify(t.data):null})));const n=e.elements.filter(t=>{var f,d;if(console.log(`[DrawingStore][getFilteredElements] Vérification de l'élément ${t.id} (${t.type_forme})`),!(t.type_forme in e.filters.shapeTypes?e.filters.shapeTypes[t.type_forme]:!0))return console.log(`[DrawingStore][getFilteredElements] Élément ${t.id} filtré par type: ${t.type_forme} (non visible)`),!1;const i=((f=t.data)==null?void 0:f.category)||"default";if(!(i in e.filters.categories?e.filters.categories[i]:!0))return console.log(`[DrawingStore][getFilteredElements] Élément ${t.id} filtré par catégorie: ${i} (non visible)`),!1;const o=((d=t.data)==null?void 0:d.accessLevel)||"visitor";let u=!0;return o==="company"?u=e.filters.accessLevels.company:o==="employee"?u=e.filters.accessLevels.employee:o==="visitor"&&(u=e.filters.accessLevels.visitor),u?(console.log(`[DrawingStore][getFilteredElements] Élément ${t.id} visible: type=${t.type_forme}, catégorie=${i}, accès=${o}`),!0):(console.log(`[DrawingStore][getFilteredElements] Élément ${t.id} filtré par niveau d'accès: ${o} (non visible)`),!1)});return console.log("[DrawingStore][getFilteredElements] Résultat du filtrage:",{total:e.elements.length,filtered:n.length,filteredIds:n.map(t=>t.id)}),n}},actions:{setCurrentPlan(e){window.dispatchEvent(new CustomEvent("clearControlPoints")),this.currentMapId=e,e===null&&this.clearElements(),this.selectedElement=null,this.unsavedChanges=!1,this.currentTool="",this.lastUsedType=null,this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},this.filters={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}}},clearCurrentPlan(){(this.currentMapId!==null||this.elements.length>0)&&(this.currentMapId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null)},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.error=null},addElement(e){var t;const n=this.performanceMonitor.startMeasure("addElement","DrawingStore");try{if(console.log("[DrawingStore] Ajout d'un élément",{element:e,isLeafletLayer:e instanceof Vn.Layer,hasProperties:!!e.properties,properties:e.properties,type:(t=e.properties)==null?void 0:t.type}),e instanceof Vn.Layer&&e.properties){const r=this.performanceMonitor.measure("addElement_convert",()=>wb(e),"DrawingStore");console.log("[DrawingStore] Élément converti avant ajout",{original:e,converted:r,type:r.type_forme,data:r.data}),this.elements.push(r)}else!e.type_forme&&this.lastUsedType&&(e.type_forme=this.lastUsedType),this.elements.push(e);this.unsavedChanges=!0}finally{n()}},updateElement(e){const n=this.elements.findIndex(t=>t.id===e.id);if(n!==-1){const t=this.elements[n].type_forme;this.elements[n]={...e,type_forme:t},this.unsavedChanges=!0}},removeElement(e){const n=this.elements.findIndex(t=>t.id===e);n!==-1&&(this.elements.splice(n,1),this.unsavedChanges=!0)},selectElement(e){this.selectedElement=e},setCurrentTool(e){this.currentTool=e,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(e)&&(this.lastUsedType=e)},setCurrentStyle(e){if(!e||Object.keys(e).length===0){this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2};return}this.currentStyle={...this.currentStyle,...e}},updateFilters(e){if(console.log("[DrawingStore][updateFilters] Mise à jour des filtres:",JSON.stringify(e,null,2)),console.log("[DrawingStore][updateFilters] Filtres avant mise à jour:",JSON.stringify(this.filters,null,2)),e.accessLevels){const n={...this.filters.accessLevels};this.filters.accessLevels={...this.filters.accessLevels,...e.accessLevels},console.log("[DrawingStore][updateFilters] Niveaux d'accès mis à jour:",{avant:n,après:this.filters.accessLevels})}if(e.categories){const n={...this.filters.categories};this.filters.categories={...this.filters.categories,...e.categories},console.log("[DrawingStore][updateFilters] Catégories mises à jour:",{avant:n,après:this.filters.categories});const t=Object.keys(e.categories).filter(r=>n[r]!==this.filters.categories[r]);if(t.length>0){console.log(`[DrawingStore][updateFilters] Catégories modifiées: ${t.join(", ")}`);const r=t.filter(i=>n[i]===!1&&this.filters.categories[i]===!0);r.length>0&&(console.log(`[DrawingStore][updateFilters] Catégories réactivées: ${r.join(", ")}`),window.dispatchEvent(new CustomEvent("categoriesReactivated",{detail:{categories:r}})))}}if(e.shapeTypes){const n={...this.filters.shapeTypes};this.filters.shapeTypes={...this.filters.shapeTypes,...e.shapeTypes},console.log("[DrawingStore][updateFilters] Types de formes mis à jour:",{avant:n,après:this.filters.shapeTypes});const t=Object.keys(e.shapeTypes).filter(r=>n[r]!==this.filters.shapeTypes[r]);if(t.length>0){console.log(`[DrawingStore][updateFilters] Types de formes modifiés: ${t.join(", ")}`);const r=t.filter(i=>n[i]===!1&&this.filters.shapeTypes[i]===!0);r.length>0&&(console.log(`[DrawingStore][updateFilters] Types de formes réactivés: ${r.join(", ")}`),window.dispatchEvent(new CustomEvent("shapeTypesReactivated",{detail:{shapeTypes:r}})))}}console.log("[DrawingStore][updateFilters] Filtres mis à jour:",JSON.stringify(this.filters,null,2)),console.log("[DrawingStore][updateFilters] Émission de l'event filtersChanged"),window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:this.filters}}))},async loadPlanElements(e){const n=this.performanceMonitor.startMeasure("loadPlanElements","DrawingStore");if(this.currentMapId===e&&this.elements.length>0)return console.log(`[DrawingStore] Plan ${e} déjà chargé avec ${this.elements.length} éléments`),n(),this.elements;this.loading=!0;try{console.log("[DrawingStore] Début du chargement du plan",{planId:e});const r=(await this.performanceMonitor.measureAsync("loadPlanElements_apiCall",()=>Un.get(`/plans/${e}/`),"DrawingStore")).data;return console.log("[DrawingStore] Données du plan reçues",{formes:r.formes,preferences:r.preferences}),r.formes&&Array.isArray(r.formes)&&r.formes.forEach((i,s)=>{var o,u,f;console.log(`[DrawingStore] Analyse détaillée forme ${s}:`,{id:i.id,type_forme:i.type_forme,hasData:!!i.data,dataKeys:i.data?Object.keys(i.data):[],name:(o=i.data)==null?void 0:o.name,hasName:i.data&&"name"in i.data,centerType:(u=i.data)!=null&&u.center?typeof i.data.center:"undefined",center:(f=i.data)==null?void 0:f.center})}),this.elements=r.formes.map(i=>{var s;if(console.log("[DrawingStore] Traitement de la forme stockée",{id:i.id,type_forme:i.type_forme,data:i.data}),i.type_forme)return console.log("[DrawingStore] Forme déjà au format élément",{type_forme:i.type_forme,data:i.data,hasName:i.data&&"name"in i.data,name:(s=i.data)==null?void 0:s.name}),{id:i.id,type_forme:i.type_forme,data:i.data||{}};try{const o=yB(i);if(o)return console.log("[DrawingStore] Forme convertie avec succès",{originalType:i.type_forme,convertedType:o.type,properties:o.properties}),wb(o)}catch(o){console.error("[DrawingStore] Erreur lors de la conversion de la forme",{error:o,forme:i})}return console.warn("[DrawingStore] Utilisation de la forme sans conversion",{type_forme:i.type_forme,data:i.data}),i}),console.log(`[DrawingStore] Plan ${e} - Chargé ${this.elements.length} éléments`,{elements:this.elements.map(i=>({id:i.id,type_forme:i.type_forme}))}),this.currentMapId=e,this.unsavedChanges=!1,r.preferences&&(console.log("[DrawingStore] Chargement des préférences",r.preferences),r.preferences.currentTool&&this.setCurrentTool(r.preferences.currentTool),r.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...r.preferences.currentStyle}),r.preferences.lastUsedType&&(this.lastUsedType=r.preferences.lastUsedType)),this.elements}catch(t){throw console.error("[DrawingStore] Erreur lors du chargement des éléments:",t),this.error="Erreur lors du chargement des éléments du plan",t}finally{this.loading=!1,n()}},async saveToPlan(e,n){const t=this.performanceMonitor.startMeasure("saveToPlan","DrawingStore");this.loading=!0;try{const r=e||this.currentMapId;if(console.log("[DrawingStore][saveToPlan] Début de la sauvegarde",{targetPlanId:r,currentPlanId:this.currentMapId,elementsCount:this.elements.length,elementsToDelete:n==null?void 0:n.elementsToDelete}),!r)throw new Error("Aucun plan sélectionné pour la sauvegarde");const i=this.performanceMonitor.measure("saveToPlan_prepareElements",()=>this.elements.map(f=>({...f,type_forme:f.type_forme||this.lastUsedType})),"DrawingStore"),s=(n==null?void 0:n.elementsToDelete)||[],o=`/plans/${r}/save_with_elements/`,u=await this.performanceMonitor.measureAsync("saveToPlan_apiCall",()=>Un.post(o,{formes:i,connexions:[],annotations:[],elementsToDelete:s,preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}}),"DrawingStore");return this.elements=this.performanceMonitor.measure("saveToPlan_processResponse",()=>{const f=new Set(s);return u.data.formes.filter(d=>!f.has(d.id)).map(d=>({...d,type_forme:d.type_forme}))},"DrawingStore"),console.log("[DrawingStore][saveToPlan] Éléments après filtrage:",{totalElements:this.elements.length,elementsToDelete:s}),this.unsavedChanges=!1,u.data}catch(r){throw console.error("[DrawingStore][saveToPlan] ERREUR:",r),console.error("[DrawingStore][saveToPlan] Stack trace:",r instanceof Error?r.stack:"No stack trace"),this.error="Erreur lors de la sauvegarde du plan",r}finally{this.loading=!1,t()}}}}),_B={class:"h-full flex flex-col bg-white overflow-y-auto"},bB={class:"border-b border-gray-200"},wB={class:"flex -mb-px"},xB={class:"flex-1 overflow-y-auto"},LB={key:0,class:"p-3"},SB={class:"grid grid-cols-4 gap-1.5 mb-4"},CB=["onClick","title"],EB=["innerHTML"],PB={key:1,class:"p-3"},MB={class:"grid grid-cols-6 gap-2 mb-4"},AB=["onClick","title"],kB={key:0,class:"space-y-4"},TB={class:"flex items-center gap-4"},DB={class:"flex items-center gap-2"},NB={class:"flex items-center gap-4"},BB=["value"],OB={key:0,class:"flex items-center gap-4"},IB={class:"flex items-center gap-2"},RB={key:1,class:"space-y-4"},FB={class:"flex items-center gap-4"},jB={class:"flex items-center gap-2"},zB={class:"flex items-center gap-4"},$B={class:"flex items-center gap-2"},UB={key:2,class:"p-3"},VB={key:0},HB={class:"mb-4"},GB={class:"mb-4"},qB={class:"mb-4"},WB={class:"grid grid-cols-1 gap-4"},ZB={key:0,class:"space-y-1"},KB={class:"flex justify-between items-center"},YB={class:"text-sm font-medium text-gray-500"},JB={class:"flex justify-between items-center"},XB={class:"text-sm font-medium text-gray-500"},QB={class:"text-sm font-medium text-gray-500"},eO={class:"flex flex-col space-y-2 w-full"},tO={class:"flex justify-between items-center"},nO={class:"text-sm font-medium text-gray-500 ml-2"},rO={class:"flex justify-between items-center"},iO={class:"text-sm font-medium text-gray-500 ml-2"},oO={class:"flex justify-between items-center"},sO={class:"text-sm font-medium text-gray-500 ml-2"},aO={class:"flex justify-between items-center"},lO={class:"text-sm font-medium text-gray-500 ml-2"},uO={class:"flex justify-between items-center"},cO={class:"text-sm font-medium text-gray-500 ml-2"},fO={ref:"elevationProfileContainer",class:"elevation-profile-container w-full h-48 bg-gray-50 rounded border border-gray-200 relative mt-4"},hO={ref:"elevationCanvas"},dO={key:1,class:"text-center text-sm text-gray-500"},pO={key:3,class:"p-3 space-y-4"},gO={class:"space-y-2"},mO={class:"space-y-2"},vO={class:"space-y-1"},yO={class:"flex items-center"},_O={class:"flex items-center"},bO={class:"flex items-center"},wO={class:"flex items-center"},xO={class:"flex items-center"},LO={class:"flex items-center"},SO={class:"space-y-2"},CO={class:"space-y-1"},EO={class:"flex items-center"},PO={class:"flex items-center"},MO={class:"flex items-center"},AO={class:"flex items-center"},kO={key:0,class:"p-3 border-t border-gray-200"},TO={class:"mt-3"},DO={class:"mb-4"},NO={class:"grid grid-cols-2 gap-2"},BO={class:"grid grid-cols-2 gap-2"},OO=us({__name:"DrawingTools",props:{currentTool:{type:String,default:""},selectedShape:{type:Object,default:null},allLayers:{type:Array,default:()=>[]}},emits:["tool-change","style-update","properties-update","delete-shape","filter-change"],setup(e,{emit:n}){const t=e,r=Ip(),i=[{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"ElevationLine",label:"Profil altimétrique"},{type:"Note",label:"Note géolocalisée"}],s=ae=>{switch(ae){case"Polygon":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5l16 0l0 14l-16 0l0 -14z"/></svg>';case"Line":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 20l16 -16"/></svg>';case"ElevationLine":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 20h18l-3-3l-4 4l-4-7l-4 4l-3-3"/></svg>';case"Note":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 2l4 4m-6 0l2-2 4 4-2 2-4-4z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h8" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 14h4" /></svg>';default:return""}},o=Ft("tools");So(o,(ae,T)=>{console.log("[DrawingTools][watch activeTab] Changement d'onglet:",{newTab:ae,oldTab:T}),ae==="filters"&&T!=="filters"&&(console.log("[DrawingTools][watch activeTab] Passage à l'onglet filtres"),console.log("[DrawingTools][watch activeTab] État actuel des filtres dans le store:",JSON.stringify({accessLevels:{...r.filters.accessLevels},categories:{...r.filters.categories},shapeTypes:{...r.filters.shapeTypes}},null,2)),console.log("[DrawingTools][watch activeTab] État actuel des filtres locaux:",JSON.stringify({accessLevels:{...ce.accessLevels},categories:{...ce.categories},shapeTypes:{...ce.shapeTypes}},null,2)),t.selectedShape&&(console.log("[DrawingTools][watch activeTab] Désélection de la forme actuelle lors du passage à l'onglet filtres"),he("tool-change","")),setTimeout(()=>{Pe()},0)),T==="filters"&&ae!=="filters"&&(console.log("[DrawingTools][watch activeTab] Sortie de l'onglet filtres, application des changements"),console.log("[DrawingTools][watch activeTab] État des filtres locaux avant application:",JSON.stringify({accessLevels:{...ce.accessLevels},categories:{...ce.categories},shapeTypes:{...ce.shapeTypes}},null,2)),Pe())});const u=Ft({samplePoints:!0,circleSections:!0}),f=Ft("#2b6451"),d=Ft(2),g=Ft("solid"),y=Ft("#2b6451"),x=Ft(.2),_=Ft(!0),M=Ft(""),D=Ft("default"),N=Ft("visitor"),O=Ft({radius:4,color:"#2b6451",fillOpacity:.6,weight:2}),F=Ft({radius:6,color:"#EF4444",fillOpacity:.8,weight:2}),Y=["#2b6451","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],Q=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointillés"}],le=Ft("company"),ce=Jl({accessLevels:{company:!0,employee:!1,visitor:!1},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}}),xe=ae=>{console.log(`[DrawingTools][updateAccessLevelFilter] Changement du niveau d'accès: ${ae}`),le.value=ae,ae==="company"?(ce.accessLevels.company=!0,ce.accessLevels.employee=!1,ce.accessLevels.visitor=!1):ae==="employee"?(ce.accessLevels.company=!1,ce.accessLevels.employee=!0,ce.accessLevels.visitor=!1):ae==="visitor"&&(ce.accessLevels.company=!1,ce.accessLevels.employee=!1,ce.accessLevels.visitor=!0),Pe()},G=ae=>{console.log(`[DrawingTools][updateAccessLevelFilterAndDeselect] Changement du niveau d'accès: ${ae}`),t.selectedShape&&(console.log("[DrawingTools][updateAccessLevelFilterAndDeselect] Désélection de la forme actuelle"),he("tool-change","")),xe(ae)};console.log("[DrawingTools] Initialisation des filtres:",JSON.stringify({local:{accessLevels:{...ce.accessLevels},categories:{...ce.categories},shapeTypes:{...ce.shapeTypes}},store:{accessLevels:{...r.filters.accessLevels},categories:{...r.filters.categories},shapeTypes:{...r.filters.shapeTypes}}},null,2));const R=gr(()=>t.selectedShape&&t.selectedShape.properties||null),Z=ae=>{u.value[ae]=!u.value[ae]},z=ae=>{f.value=ae,y.value=ae,I({strokeColor:ae,fillColor:ae})},I=ae=>{t.selectedShape&&he("style-update",ae)},$=()=>{t.selectedShape&&he("properties-update",{name:M.value})},U=()=>{t.selectedShape&&he("properties-update",{category:D.value})},W=()=>{t.selectedShape&&he("properties-update",{accessLevel:N.value})},q=()=>{var ae;!t.selectedShape||((ae=R.value)==null?void 0:ae.type)!=="ElevationLine"||he("style-update",{samplePointStyle:O.value})},ie=()=>{var ae;!t.selectedShape||((ae=R.value)==null?void 0:ae.type)!=="ElevationLine"||he("style-update",{minMaxPointStyle:F.value})},re=()=>{console.log("[DrawingTools][resetFilters] Début de la réinitialisation des filtres"),console.log("[DrawingTools][resetFilters] État actuel des filtres:",JSON.stringify({accessLevels:{...ce.accessLevels},categories:{...ce.categories},shapeTypes:{...ce.shapeTypes}},null,2));const ae={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}};console.log("[DrawingTools][resetFilters] Nouveaux filtres à appliquer:",JSON.stringify(ae,null,2)),console.log("[DrawingTools][resetFilters] Mise à jour des filtres locaux"),ce.accessLevels.company=!0,ce.accessLevels.employee=!0,ce.accessLevels.visitor=!0,ce.categories.forages=!0,ce.categories.clients=!0,ce.categories.entrepots=!0,ce.categories.livraisons=!0,ce.categories.cultures=!0,ce.categories.parcelles=!0,ce.shapeTypes.Polygon=!0,ce.shapeTypes.Line=!0,ce.shapeTypes.ElevationLine=!0,ce.shapeTypes.Note=!0,console.log("[DrawingTools][resetFilters] Filtres locaux après mise à jour:",JSON.stringify({accessLevels:{...ce.accessLevels},categories:{...ce.categories},shapeTypes:{...ce.shapeTypes}},null,2)),console.log("[DrawingTools][resetFilters] Mise à jour des filtres dans le store"),r.updateFilters(ae),console.log("[DrawingTools][resetFilters] Émission de l'event filter-change"),he("filter-change",ae),console.log("[DrawingTools][resetFilters] Mise à jour forcée de l'affichage"),console.log("[DrawingTools][resetFilters] Filtres réinitialisés avec succès")},we=()=>{console.log("[DrawingTools][resetFiltersAndDeselect] Début de la réinitialisation des filtres avec désélection"),fe(),re(),console.log("[DrawingTools][resetFiltersAndDeselect] Filtres réinitialisés et forme désélectionnée avec succès")},Pe=()=>{const ae={...ce.accessLevels},T={...ce.categories},ue={...ce.shapeTypes};console.log("[DrawingTools][applyFilters] Application des filtres:",JSON.stringify({accessLevels:ae,categories:T,shapeTypes:ue},null,2));const ke={accessLevels:ae,categories:T,shapeTypes:ue};console.log("[DrawingTools][applyFilters] Envoi des filtres au store:",JSON.stringify(ke,null,2)),r.updateFilters(ke),console.log("[DrawingTools][applyFilters] Émission de l'event filter-change"),he("filter-change",ke),setTimeout(()=>{console.log("[DrawingTools][applyFilters] Mise à jour forcée de l'affichage"),window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:ke}}))},0),console.log("[DrawingTools][applyFilters] Filtres appliqués avec succès")},Ie=ae=>`${Math.round(ae)} m`,A=ae=>ae>=1e4?`${(ae/1e4).toFixed(2)} ha`:`${Math.round(ae)} m²`,J=ae=>`${ae.toFixed(1)}%`,fe=()=>{t.selectedShape&&(console.log("[DrawingTools][deselectCurrentShape] Désélection de la forme actuelle"),he("tool-change",""))},ne=()=>{fe(),o.value="filters"},he=n;return yp(()=>{var ae,T,ue,ke,Ce,Ve,K;if(t.selectedShape){console.log("[DrawingTools][watchEffect] Mise à jour des propriétés pour la forme sélectionnée:",{type:t.selectedShape.type,properties:t.selectedShape.properties,options:t.selectedShape.options,layer:(ae=t.selectedShape.layer)==null?void 0:ae._leaflet_id});const pe=t.selectedShape.options||{};f.value=pe.color||"#2b6451",d.value=pe.weight||3,g.value=pe.dashArray?"dashed":"solid",y.value=pe.fillColor||"#2b6451",x.value=pe.fillOpacity||.2;const ve=t.selectedShape.type||((T=t.selectedShape.properties)==null?void 0:T.type)||"";_.value=ve!=="Line",console.log("[DrawingTools][watchEffect] Type de forme détecté:",ve),M.value=((ue=t.selectedShape.properties)==null?void 0:ue.name)||"",D.value=((ke=t.selectedShape.properties)==null?void 0:ke.category)||"forages",N.value=((Ce=t.selectedShape.properties)==null?void 0:Ce.accessLevel)||"visitor",ve==="ElevationLine"&&((Ve=t.selectedShape.properties)!=null&&Ve.samplePointStyle&&(O.value={...t.selectedShape.properties.samplePointStyle}),(K=t.selectedShape.properties)!=null&&K.minMaxPointStyle&&(F.value={...t.selectedShape.properties.minMaxPointStyle})),console.log("[DrawingTools][watchEffect] Propriétés mises à jour avec succès")}}),$s(()=>{console.log("[DrawingTools][onMounted] Initialisation des filtres depuis le store");const ae=r.filters;console.log("[DrawingTools][onMounted] Filtres du store:",JSON.stringify({accessLevels:{...ae.accessLevels},categories:{...ae.categories},shapeTypes:{...ae.shapeTypes}},null,2)),ce.accessLevels.company=ae.accessLevels.company,ce.accessLevels.employee=ae.accessLevels.employee,ce.accessLevels.visitor=ae.accessLevels.visitor,ce.categories.forages=ae.categories.forages,ce.categories.clients=ae.categories.clients,ce.categories.entrepots=ae.categories.entrepots,ce.categories.livraisons=ae.categories.livraisons,ce.categories.cultures=ae.categories.cultures,ce.categories.parcelles=ae.categories.parcelles,ce.shapeTypes.Polygon=ae.shapeTypes.Polygon,ce.shapeTypes.Line=ae.shapeTypes.Line,ce.shapeTypes.ElevationLine=ae.shapeTypes.ElevationLine,ce.shapeTypes.Note=ae.shapeTypes.Note,console.log("[DrawingTools][onMounted] Filtres locaux après initialisation:",JSON.stringify({accessLevels:{...ce.accessLevels},categories:{...ce.categories},shapeTypes:{...ce.shapeTypes}},null,2))}),So(ce,(ae,T)=>{console.log("[DrawingTools][watch filters] Changement détecté:",{activeTab:o.value,newFilters:JSON.stringify({accessLevels:ae.accessLevels,categories:ae.categories,shapeTypes:ae.shapeTypes}),oldFilters:JSON.stringify({accessLevels:T.accessLevels,categories:T.categories,shapeTypes:T.shapeTypes})});const ue=Object.keys(ae.accessLevels).filter(K=>T.accessLevels[K]!==ae.accessLevels[K]),ke=Object.keys(ae.categories).filter(K=>T.categories[K]!==ae.categories[K]),Ce=Object.keys(ae.shapeTypes).filter(K=>T.shapeTypes[K]!==ae.shapeTypes[K]),Ve=ue.length>0||ke.length>0||Ce.length>0;console.log("[DrawingTools][watch filters] Différences détectées:",{accessLevelsDiff:ue,categoriesDiff:ke,shapeTypesDiff:Ce,hasChanges:Ve}),o.value==="filters"?(console.log("[DrawingTools][watch filters] Onglet filtres actif, application des filtres"),Pe()):console.log("[DrawingTools][watch filters] Onglet filtres non actif, pas d'application automatique")},{deep:!0}),(ae,T)=>{var ue,ke,Ce,Ve;return $e(),qe("div",_B,[T[96]||(T[96]=E("div",{class:"p-3 bg-gray-50 border-b border-gray-200 flex justify-between items-center md:flex hidden"},[E("h3",{class:"text-sm font-semibold text-gray-700"},"Outils de dessin")],-1)),E("div",bB,[E("nav",wB,[E("button",{onClick:T[0]||(T[0]=K=>o.value="tools"),class:Ri([o.value==="tools"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},T[45]||(T[45]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),E("span",null,"Outils",-1)]),2),e.selectedShape&&((ue=e.selectedShape.properties)==null?void 0:ue.type)!=="Note"?($e(),qe("button",{key:0,onClick:T[1]||(T[1]=K=>o.value="style"),class:Ri([o.value==="style"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},T[46]||(T[46]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})],-1),E("span",null,"Style",-1)]),2)):un("",!0),e.selectedShape?($e(),qe("button",{key:1,onClick:T[2]||(T[2]=K=>o.value="properties"),class:Ri([o.value==="properties"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},T[47]||(T[47]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),E("span",null,"Propriétés",-1)]),2)):un("",!0),E("button",{onClick:ne,class:Ri([o.value==="filters"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},T[48]||(T[48]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1),E("span",null,"Filtres",-1)]),2)])]),E("div",xB,[o.value==="tools"?($e(),qe("div",LB,[E("div",SB,[($e(!0),qe(Rn,null,Br(i.filter(K=>K.type!=="delete"),K=>($e(),qe("button",{key:K.type,class:Ri(["flex items-center justify-center p-2 rounded-md border",{"bg-blue-50 border-blue-300 text-blue-700 shadow-sm":e.currentTool===K.type}]),onClick:pe=>ae.$emit("tool-change",e.currentTool===K.type?"":K.type),title:K.label},[E("span",{class:"icon",innerHTML:s(K.type)},null,8,EB)],10,CB))),128))]),e.selectedShape?($e(),qe("button",{key:0,class:Ri(["w-full mt-2 p-2 rounded-md border border-red-200 bg-red-50 text-red-600 hover:bg-red-100 flex items-center justify-center",{"bg-red-100":e.currentTool==="delete"}]),onClick:T[3]||(T[3]=K=>ae.$emit("delete-shape")),title:"Supprimer la forme"},T[49]||(T[49]=[E("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),E("span",{class:"text-sm"},"Supprimer",-1)]),2)):un("",!0)])):un("",!0),o.value==="style"&&e.selectedShape&&((ke=e.selectedShape.properties)==null?void 0:ke.type)!=="Note"?($e(),qe("div",PB,[E("div",MB,[($e(),qe(Rn,null,Br(Y,K=>E("button",{key:K,class:"w-8 h-8 rounded-full",style:rl({backgroundColor:K}),onClick:pe=>z(K),title:K},null,12,AB)),64))]),((Ce=R.value)==null?void 0:Ce.type)!=="TextRectangle"?($e(),qe("div",kB,[E("div",TB,[T[50]||(T[50]=E("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),E("div",DB,[In(E("input",{type:"color","onUpdate:modelValue":T[4]||(T[4]=K=>f.value=K),class:"w-16 h-8 rounded border",onChange:T[5]||(T[5]=K=>I({strokeColor:f.value})),title:"Couleur du contour"},null,544),[[Zr,f.value]]),In(E("input",{type:"range","onUpdate:modelValue":T[6]||(T[6]=K=>d.value=K),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:T[7]||(T[7]=K=>I({strokeWidth:d.value})),title:"Épaisseur du contour"},null,544),[[Zr,d.value]])])]),E("div",NB,[T[51]||(T[51]=E("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Style",-1)),In(E("select",{"onUpdate:modelValue":T[8]||(T[8]=K=>g.value=K),class:"w-full rounded border",onChange:T[9]||(T[9]=K=>I({strokeStyle:g.value}))},[($e(),qe(Rn,null,Br(Q,K=>E("option",{key:K.value,value:K.value},Wt(K.label),9,BB)),64))],544),[[lo,g.value]])]),_.value?($e(),qe("div",OB,[T[52]||(T[52]=E("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),E("div",IB,[In(E("input",{type:"color","onUpdate:modelValue":T[10]||(T[10]=K=>y.value=K),class:"w-16 h-8 rounded border",onChange:T[11]||(T[11]=K=>I({fillColor:y.value})),title:"Couleur de remplissage"},null,544),[[Zr,y.value]]),In(E("input",{type:"range","onUpdate:modelValue":T[12]||(T[12]=K=>x.value=K),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:T[13]||(T[13]=K=>I({fillOpacity:x.value})),title:"Opacité du remplissage"},null,544),[[Zr,x.value]])])])):un("",!0)])):un("",!0),((Ve=R.value)==null?void 0:Ve.type)==="TextRectangle"?($e(),qe("div",RB,[E("div",FB,[T[53]||(T[53]=E("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),E("div",jB,[In(E("input",{type:"color","onUpdate:modelValue":T[14]||(T[14]=K=>f.value=K),class:"w-16 h-8 rounded border",onChange:T[15]||(T[15]=K=>I({strokeColor:f.value})),title:"Couleur du contour"},null,544),[[Zr,f.value]]),In(E("input",{type:"range","onUpdate:modelValue":T[16]||(T[16]=K=>d.value=K),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:T[17]||(T[17]=K=>I({strokeWidth:d.value})),title:"Épaisseur du contour"},null,544),[[Zr,d.value]])])]),E("div",zB,[T[54]||(T[54]=E("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),E("div",$B,[In(E("input",{type:"color","onUpdate:modelValue":T[18]||(T[18]=K=>y.value=K),class:"w-16 h-8 rounded border",onChange:T[19]||(T[19]=K=>I({fillColor:y.value})),title:"Couleur de remplissage"},null,544),[[Zr,y.value]]),In(E("input",{type:"range","onUpdate:modelValue":T[20]||(T[20]=K=>x.value=K),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:T[21]||(T[21]=K=>I({fillOpacity:x.value})),title:"Opacité du remplissage"},null,544),[[Zr,x.value]])])])])):un("",!0)])):un("",!0),o.value==="properties"&&e.selectedShape?($e(),qe("div",UB,[R.value?($e(),qe("div",VB,[E("div",HB,[T[55]||(T[55]=E("label",{for:"shapeName",class:"block text-sm font-medium text-gray-700 mb-1"},"Nom de la forme",-1)),In(E("input",{type:"text",id:"shapeName","onUpdate:modelValue":T[22]||(T[22]=K=>M.value=K),onChange:$,placeholder:"Donnez un nom à cette forme",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},null,544),[[Zr,M.value]])]),E("div",GB,[T[57]||(T[57]=E("label",{for:"shapeCategory",class:"block text-sm font-medium text-gray-700 mb-1"},"Catégorie",-1)),In(E("select",{id:"shapeCategory","onUpdate:modelValue":T[23]||(T[23]=K=>D.value=K),onChange:U,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},T[56]||(T[56]=[uc('<option value="forages" data-v-9dccca1e>Forages</option><option value="clients" data-v-9dccca1e>Clients</option><option value="entrepots" data-v-9dccca1e>Entrepôts</option><option value="livraisons" data-v-9dccca1e>Lieux de livraison</option><option value="cultures" data-v-9dccca1e>Cultures</option><option value="parcelles" data-v-9dccca1e>Noms des parcelles</option><option value="default" data-v-9dccca1e>Autre</option>',7)]),544),[[lo,D.value]])]),E("div",qB,[T[59]||(T[59]=E("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700 mb-1"},"Niveau d'accès",-1)),T[60]||(T[60]=E("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Définit qui peut voir cet élément sur la carte. ",-1)),In(E("select",{id:"accessLevel","onUpdate:modelValue":T[24]||(T[24]=K=>N.value=K),onChange:W,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},T[58]||(T[58]=[E("option",{value:"company"},"Entreprise uniquement",-1),E("option",{value:"employee"},"Entreprise et salariés",-1),E("option",{value:"visitor"},"Tous (visiteurs inclus)",-1)]),544),[[lo,N.value]])]),E("div",WB,[R.value.type==="Polygon"?($e(),qe("div",ZB,[E("div",KB,[T[61]||(T[61]=E("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),E("span",YB,Wt(A(R.value.surface||0)),1)]),E("div",JB,[T[62]||(T[62]=E("span",{class:"text-sm font-semibold text-gray-700"},"Périmètre :",-1)),E("span",XB,Wt(Ie(R.value.perimeter||0)),1)])])):R.value.type==="Line"?($e(),qe(Rn,{key:1},[T[63]||(T[63]=E("span",{class:"text-sm font-semibold text-gray-700"},"Longueur :",-1)),E("span",QB,Wt(Ie(R.value.length||0)),1)],64)):R.value.type==="ElevationLine"?($e(),qe(Rn,{key:2},[E("div",eO,[E("div",tO,[T[64]||(T[64]=E("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Distance totale :",-1)),E("span",nO,Wt(Ie(R.value.length||0)),1)]),E("div",rO,[T[65]||(T[65]=E("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Dénivelé + :",-1)),E("span",iO,Wt(Ie(R.value.elevationGain||0)),1)]),E("div",oO,[T[66]||(T[66]=E("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Dénivelé - :",-1)),E("span",sO,Wt(Ie(R.value.elevationLoss||0)),1)]),E("div",aO,[T[67]||(T[67]=E("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Pente moy. :",-1)),E("span",lO,Wt(J(R.value.averageSlope||0)),1)]),E("div",uO,[T[68]||(T[68]=E("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Pente max :",-1)),E("span",cO,Wt(J(R.value.maxSlope||0)),1)])]),E("div",fO,[E("canvas",hO,null,512)],512)],64)):un("",!0)])])):($e(),qe("div",dO," Aucune propriété disponible "))])):un("",!0),o.value==="filters"?($e(),qe("div",pO,[E("div",gO,[T[71]||(T[71]=E("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Niveau d'accès",-1)),T[72]||(T[72]=E("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Sélectionnez votre niveau d'accès pour filtrer les éléments visibles sur la carte. ",-1)),E("div",null,[In(E("select",{"onUpdate:modelValue":T[25]||(T[25]=K=>le.value=K),onChange:T[26]||(T[26]=K=>G(le.value)),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-sm"},T[69]||(T[69]=[E("option",{value:"company"},"Entreprise (accès à tout)",-1),E("option",{value:"employee"},"Salariés (accès niveau salariés et visiteurs)",-1),E("option",{value:"visitor"},"Visiteurs (accès niveau visiteurs uniquement)",-1)]),544),[[lo,le.value]]),T[70]||(T[70]=E("div",{class:"mt-2 text-xs text-gray-500"},[E("p",null,[E("strong",null,"Entreprise"),pi(" : Vous verrez tous les éléments (entreprise, salariés, visiteurs)")]),E("p",null,[E("strong",null,"Salariés"),pi(" : Vous verrez les éléments pour salariés et visiteurs")]),E("p",null,[E("strong",null,"Visiteurs"),pi(" : Vous ne verrez que les éléments pour visiteurs")])],-1))])]),E("div",mO,[T[79]||(T[79]=E("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Éléments",-1)),E("div",vO,[E("label",yO,[In(E("input",{type:"checkbox","onUpdate:modelValue":T[27]||(T[27]=K=>ce.categories.forages=K),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Sl,ce.categories.forages]]),T[73]||(T[73]=E("span",{class:"ml-2 text-sm text-gray-700"},"Forages",-1))]),E("label",_O,[In(E("input",{type:"checkbox","onUpdate:modelValue":T[28]||(T[28]=K=>ce.categories.clients=K),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Sl,ce.categories.clients]]),T[74]||(T[74]=E("span",{class:"ml-2 text-sm text-gray-700"},"Clients",-1))]),E("label",bO,[In(E("input",{type:"checkbox","onUpdate:modelValue":T[29]||(T[29]=K=>ce.categories.entrepots=K),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Sl,ce.categories.entrepots]]),T[75]||(T[75]=E("span",{class:"ml-2 text-sm text-gray-700"},"Entrepôts",-1))]),E("label",wO,[In(E("input",{type:"checkbox","onUpdate:modelValue":T[30]||(T[30]=K=>ce.categories.livraisons=K),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Sl,ce.categories.livraisons]]),T[76]||(T[76]=E("span",{class:"ml-2 text-sm text-gray-700"},"Lieux de livraison",-1))]),E("label",xO,[In(E("input",{type:"checkbox","onUpdate:modelValue":T[31]||(T[31]=K=>ce.categories.cultures=K),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Sl,ce.categories.cultures]]),T[77]||(T[77]=E("span",{class:"ml-2 text-sm text-gray-700"},"Cultures",-1))]),E("label",LO,[In(E("input",{type:"checkbox","onUpdate:modelValue":T[32]||(T[32]=K=>ce.categories.parcelles=K),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Sl,ce.categories.parcelles]]),T[78]||(T[78]=E("span",{class:"ml-2 text-sm text-gray-700"},"Noms des parcelles",-1))])])]),E("div",SO,[T[84]||(T[84]=E("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Types de formes",-1)),E("div",CO,[E("label",EO,[In(E("input",{type:"checkbox","onUpdate:modelValue":T[33]||(T[33]=K=>ce.shapeTypes.Polygon=K),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Sl,ce.shapeTypes.Polygon]]),T[80]||(T[80]=E("span",{class:"ml-2 text-sm text-gray-700"},"Polygones",-1))]),E("label",PO,[In(E("input",{type:"checkbox","onUpdate:modelValue":T[34]||(T[34]=K=>ce.shapeTypes.Line=K),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Sl,ce.shapeTypes.Line]]),T[81]||(T[81]=E("span",{class:"ml-2 text-sm text-gray-700"},"Lignes",-1))]),E("label",MO,[In(E("input",{type:"checkbox","onUpdate:modelValue":T[35]||(T[35]=K=>ce.shapeTypes.ElevationLine=K),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Sl,ce.shapeTypes.ElevationLine]]),T[82]||(T[82]=E("span",{class:"ml-2 text-sm text-gray-700"},"Profils altimétriques",-1))]),E("label",AO,[In(E("input",{type:"checkbox","onUpdate:modelValue":T[36]||(T[36]=K=>ce.shapeTypes.Note=K),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Sl,ce.shapeTypes.Note]]),T[83]||(T[83]=E("span",{class:"ml-2 text-sm text-gray-700"},"Notes",-1))])])]),E("div",{class:"pt-2"},[E("button",{onClick:we,class:"w-full px-3 py-2 bg-gray-100 text-gray-700 text-sm rounded hover:bg-gray-200 transition-colors"}," Réinitialiser ")])])):un("",!0)]),e.selectedShape&&R.value&&R.value.type==="ElevationLine"?($e(),qe("div",kO,[E("button",{class:"flex items-center justify-between w-full text-sm font-semibold text-gray-700",onClick:T[37]||(T[37]=K=>Z("samplePoints"))},[T[86]||(T[86]=E("span",null,"Points d'échantillonnage",-1)),($e(),qe("svg",{class:Ri(["w-4 h-4",{"rotate-180":!u.value.samplePoints}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},T[85]||(T[85]=[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),In(E("div",TO,[E("div",DO,[T[91]||(T[91]=E("h4",{class:"text-sm font-semibold mb-2"},"Points normaux",-1)),E("div",NO,[E("div",null,[T[87]||(T[87]=E("label",{class:"text-xs text-gray-600"},"Taille",-1)),In(E("input",{type:"number","onUpdate:modelValue":T[38]||(T[38]=K=>O.value.radius=K),min:"2",max:"10",step:"1",class:"w-full px-2 py-1 border rounded",onChange:q},null,544),[[Zr,O.value.radius]])]),E("div",null,[T[88]||(T[88]=E("label",{class:"text-xs text-gray-600"},"Couleur",-1)),In(E("input",{type:"color","onUpdate:modelValue":T[39]||(T[39]=K=>O.value.color=K),class:"w-full h-8 px-1 border rounded",onChange:q},null,544),[[Zr,O.value.color]])]),E("div",null,[T[89]||(T[89]=E("label",{class:"text-xs text-gray-600"},"Opacité",-1)),In(E("input",{type:"range","onUpdate:modelValue":T[40]||(T[40]=K=>O.value.fillOpacity=K),min:"0",max:"1",step:"0.1",class:"w-full",onChange:q},null,544),[[Zr,O.value.fillOpacity]])]),E("div",null,[T[90]||(T[90]=E("label",{class:"text-xs text-gray-600"},"Bordure",-1)),In(E("input",{type:"number","onUpdate:modelValue":T[41]||(T[41]=K=>O.value.weight=K),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:q},null,544),[[Zr,O.value.weight]])])])]),E("div",null,[T[95]||(T[95]=E("h4",{class:"text-sm font-semibold mb-2"},"Points min/max",-1)),E("div",BO,[E("div",null,[T[92]||(T[92]=E("label",{class:"text-xs text-gray-600"},"Taille",-1)),In(E("input",{type:"number","onUpdate:modelValue":T[42]||(T[42]=K=>F.value.radius=K),min:"4",max:"12",step:"1",class:"w-full px-2 py-1 border rounded",onChange:ie},null,544),[[Zr,F.value.radius]])]),E("div",null,[T[93]||(T[93]=E("label",{class:"text-xs text-gray-600"},"Bordure",-1)),In(E("input",{type:"number","onUpdate:modelValue":T[43]||(T[43]=K=>F.value.weight=K),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:ie},null,544),[[Zr,F.value.weight]])]),E("div",null,[T[94]||(T[94]=E("label",{class:"text-xs text-gray-600"},"Opacité",-1)),In(E("input",{type:"range","onUpdate:modelValue":T[44]||(T[44]=K=>F.value.fillOpacity=K),min:"0",max:"1",step:"0.1",class:"w-full",onChange:ie},null,544),[[Zr,F.value.fillOpacity]])])])])],512),[[W0,!u.value.samplePoints]])])):un("",!0)])}}}),IO=om(OO,[["__scopeId","data-v-9dccca1e"]]),RO={class:"map-toolbar w-full"},FO={class:"hidden md:flex items-center space-x-2"},jO={class:"dropdown"},zO={class:"dropdown-menu"},$O=["onClick"],UO={key:0,class:"border-l pl-2 flex-1"},VO={class:"flex items-center"},HO={class:"plan-info"},GO={class:"plan-name"},qO={key:0,class:"plan-description"},WO={class:"border-l pl-2 ml-auto"},ZO={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},KO={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},YO={key:"saving"},JO={key:"success",class:"save-success-text"},XO={key:"default"},QO={class:"md:hidden"},eI={class:"flex justify-between items-center"},tI={key:0,class:"truncate mx-2 text-sm font-medium"},nI={key:0,class:"mobile-menu mt-0 bg-white shadow-lg p-4 z-[2000] fixed left-0 right-0 w-full"},rI={class:"flex justify-between items-center mb-3 border-b pb-2"},iI={class:"flex flex-col space-y-4"},oI={key:0,class:"flex flex-col pb-3 border-b"},sI={class:"text-sm font-semibold text-gray-800"},aI={key:0,class:"text-xs text-gray-600 mt-1"},lI={class:"flex flex-col"},uI={class:"grid grid-cols-3 gap-2"},cI=["onClick"],fI={key:0,class:"animate-spin h-4 w-4 mr-2 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},hI={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},dI={key:"saving"},pI={key:"success",class:"save-success-text"},gI={key:"default"},mI=us({__name:"MapToolbar",props:{lastSave:{},planName:{},planDescription:{},saveStatus:{}},emits:["change-map-type","create-new-plan","load-plan","save-plan","adjust-view","generate-summary"],setup(e,{emit:n}){const t=n,r=e,i=Ft("Hybride"),s=Ft(!1),o=N=>{const O=N.currentTarget,F=O.nextElementSibling;if(F&&F.classList.contains("dropdown-menu")){const Y=O.getBoundingClientRect();F.style.top=`${Y.bottom}px`,F.style.left=`${Y.left}px`}},u={Hybride:"Hybride",Cadastre:"Cadastre",IGN:"IGN"},f=gr(()=>r.lastSave?new Date(r.lastSave).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Jamais"),d=N=>{i.value=N,t("change-map-type",N),D()},g=()=>{t("create-new-plan"),D()},y=()=>{t("load-plan"),D()},x=()=>{t("save-plan"),D()},_=()=>{t("adjust-view"),D()},M=()=>{t("generate-summary"),D()},D=()=>{s.value=!1};return(N,O)=>($e(),qe("div",RO,[E("div",FO,[E("div",jO,[E("button",{class:"btn-toolbar dropdown-toggle",onMouseover:o},[O[2]||(O[2]=E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M12 1.586l-4 4V17h8V5.586l-4-4zM2 17V9.276l4-3.638V17H2zM2 8.162V3h4.5L12 8.5V17H6V5.638L2 8.162z","clip-rule":"evenodd"})],-1)),E("span",null,Wt(u[i.value]),1)],32),E("div",zO,[($e(),qe(Rn,null,Br(u,(F,Y)=>E("button",{key:Y,class:Ri(["dropdown-item",{active:Y===i.value}]),onClick:Q=>d(Y)},Wt(F),11,$O)),64))])]),N.planName?($e(),qe("div",UO,[E("div",VO,[E("div",HO,[E("h2",GO,Wt(N.planName),1),N.planDescription?($e(),qe("p",qO,Wt(N.planDescription),1)):un("",!0)])])])):un("",!0),E("div",{class:"border-l pl-2"},[E("div",{class:"flex items-center space-x-1"},[E("button",{onClick:g,class:"btn-toolbar",title:"Nouveau plan"},O[3]||(O[3]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),E("span",{class:"hidden lg:inline ml-1"},"Nouveau",-1)])),E("button",{onClick:y,class:"btn-toolbar",title:"Charger un plan"},O[4]||(O[4]=[uc('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" data-v-a33ebaa5><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" data-v-a33ebaa5></path><path d="M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z" data-v-a33ebaa5></path><path fill-rule="evenodd" d="M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z" clip-rule="evenodd" data-v-a33ebaa5></path></svg><span class="hidden lg:inline ml-1" data-v-a33ebaa5>Charger</span>',2)])),E("button",{onClick:x,class:"btn-toolbar",title:"Enregistrer le plan"},O[5]||(O[5]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1),E("span",{class:"hidden lg:inline ml-1"},"Enregistrer",-1)]))])]),E("div",{class:"border-l pl-2"},[E("div",{class:"flex items-center space-x-1"},[E("button",{onClick:_,class:"btn-toolbar",title:"Ajuster la vue"},O[6]||(O[6]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),E("span",{class:"hidden lg:inline ml-1"},"Ajuster",-1)])),E("button",{onClick:M,class:"btn-toolbar",title:"Générer une synthèse"},O[7]||(O[7]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),E("span",{class:"hidden lg:inline ml-1"},"Synthèse",-1)]))])]),E("div",WO,[E("div",{class:Ri(["text-xs hidden lg:flex items-center",{"text-gray-500":!N.saveStatus,"text-primary-600 font-medium":N.saveStatus==="success","text-blue-600 font-medium":N.saveStatus==="saving"}])},[N.saveStatus==="saving"?($e(),qe("svg",ZO,O[8]||(O[8]=[E("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),E("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):un("",!0),N.saveStatus==="success"?($e(),qe("svg",KO,O[9]||(O[9]=[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):un("",!0),fi(Wv,{name:"fade-slide",mode:"out-in"},{default:ql(()=>[N.saveStatus==="saving"?($e(),qe("span",YO," Sauvegarde en cours... ")):N.saveStatus==="success"?($e(),qe("span",JO," Sauvegarde réussie ! ")):($e(),qe("span",XO," Dernière modification : "+Wt(f.value),1))]),_:1})],2)])]),E("div",QO,[E("div",eI,[E("button",{onClick:O[0]||(O[0]=F=>s.value=!s.value),class:"p-2 rounded-md border bg-white shadow-sm"},O[10]||(O[10]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1)])),N.planName?($e(),qe("div",tI,Wt(N.planName),1)):un("",!0),E("div",{class:"flex space-x-2"},[E("button",{onClick:g,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},O[11]||(O[11]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1)])),E("button",{onClick:x,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},O[12]||(O[12]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1)])),E("button",{onClick:_,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},O[13]||(O[13]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)]))])]),s.value?($e(),qe("div",nI,[E("div",rI,[O[15]||(O[15]=E("h3",{class:"text-base font-semibold text-gray-800"},"Menu",-1)),E("button",{onClick:O[1]||(O[1]=F=>s.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},O[14]||(O[14]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("div",iI,[N.planName?($e(),qe("div",oI,[E("h3",sI,Wt(N.planName),1),N.planDescription?($e(),qe("p",aI,Wt(N.planDescription),1)):un("",!0)])):un("",!0),E("div",lI,[O[16]||(O[16]=E("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Type de carte",-1)),E("div",uI,[($e(),qe(Rn,null,Br(u,(F,Y)=>E("button",{key:Y,class:Ri(["px-3 py-2 text-sm rounded-md border shadow-sm",{"bg-blue-50 border-blue-300 text-blue-700 font-medium":Y===i.value}]),onClick:Q=>d(Y)},Wt(F),11,cI)),64))])]),E("div",{class:"flex flex-col"},[O[20]||(O[20]=E("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Outils de plan",-1)),E("div",{class:"grid grid-cols-3 gap-2"},[E("button",{onClick:g,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},O[17]||(O[17]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),pi(" Nouveau ")])),E("button",{onClick:y,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},O[18]||(O[18]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"}),E("path",{d:"M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z"}),E("path",{"fill-rule":"evenodd",d:"M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),pi(" Charger ")])),E("button",{onClick:M,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},O[19]||(O[19]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),pi(" Synthèse ")]))])]),E("div",{class:Ri(["text-sm text-center pt-3 border-t flex items-center justify-center space-x-1 mt-2",{"text-gray-500":!N.saveStatus,"text-primary-600 font-medium":N.saveStatus==="success","text-blue-600 font-medium":N.saveStatus==="saving"}])},[N.saveStatus==="saving"?($e(),qe("svg",fI,O[21]||(O[21]=[E("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),E("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):un("",!0),N.saveStatus==="success"?($e(),qe("svg",hI,O[22]||(O[22]=[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):un("",!0),fi(Wv,{name:"fade-slide",mode:"out-in"},{default:ql(()=>[N.saveStatus==="saving"?($e(),qe("span",dI," Sauvegarde en cours... ")):N.saveStatus==="success"?($e(),qe("span",pI," Sauvegarde réussie ! ")):($e(),qe("span",gI," Dernière modification : "+Wt(f.value),1))]),_:1})],2)])])):un("",!0)])]))}}),vI=om(mI,[["__scopeId","data-v-a33ebaa5"]]),yI={class:"comment-thread"},_I={key:0,class:"space-y-3 mb-4"},bI={class:"flex justify-between items-start"},wI={class:"flex items-center"},xI={class:"font-medium text-sm text-gray-900"},LI={class:"flex items-center"},SI={class:"text-xs text-gray-500"},CI=["onClick"],EI={class:"mt-1 text-sm text-gray-700 whitespace-pre-wrap"},PI={key:1,class:"text-center text-sm text-gray-500 italic my-4"},MI={key:2,class:"mt-3"},AI={class:"flex justify-end mt-2"},kI=["disabled"],TI={key:3,class:"text-center text-sm text-gray-500 italic mt-2"},DI=us({__name:"CommentThread",props:{noteId:{},comments:{}},emits:["update:comments"],setup(e,{emit:n}){const t=e,r=va(),i=Bp(),s=dc(),o=Ft(""),u=gr(()=>r.isEntreprise||r.isAdmin);function f(M){return r.user&&M.userId===r.user.id||r.isAdmin}async function d(){var M;if(o.value.trim())try{await i.addComment(t.noteId,o.value.trim()),o.value="",s.success("Commentaire ajouté avec succès")}catch(D){if(console.error("Erreur lors de l'ajout du commentaire:",D),(M=D.response)!=null&&M.data){const N=D.response.data;N.note?s.error(`Erreur: ${N.note[0]}`):N.user?s.error(`Erreur: ${N.user[0]}`):N.text?s.error(`Erreur: ${N.text[0]}`):s.error("Erreur lors de l'ajout du commentaire")}else s.error("Erreur lors de l'ajout du commentaire")}}async function g(M){var D;if(confirm("Voulez-vous vraiment supprimer ce commentaire ?"))try{await i.removeComment(t.noteId,M),s.success("Commentaire supprimé")}catch(N){if(console.error("Erreur lors de la suppression du commentaire:",N),(D=N.response)!=null&&D.data){const O=N.response.data;O.detail?s.error(`Erreur: ${O.detail}`):s.error("Erreur lors de la suppression du commentaire")}else s.error("Erreur lors de la suppression du commentaire")}}function y(M){const D=new Date(M);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(D)}function x(M){switch(M){case"admin":return"bg-purple-100 text-purple-800";case"entreprise":return"bg-blue-100 text-blue-800";case"salarie":return"bg-green-100 text-green-800";case"visiteur":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}function _(M){switch(M){case"admin":return"Admin";case"entreprise":return"Entreprise";case"salarie":return"Salarié";case"visiteur":return"Visiteur";default:return M}}return(M,D)=>($e(),qe("div",yI,[M.comments&&M.comments.length>0?($e(),qe("div",_I,[($e(!0),qe(Rn,null,Br(M.comments,N=>($e(),qe("div",{key:N.id,class:"bg-gray-50 rounded-lg p-3"},[E("div",bI,[E("div",wI,[E("div",xI,Wt(N.userName),1),E("span",{class:Ri(["ml-2 text-xs px-2 py-0.5 rounded-full",x(N.userRole)])},Wt(_(N.userRole)),3)]),E("div",LI,[E("span",SI,Wt(y(N.createdAt)),1),f(N)?($e(),qe("button",{key:0,onClick:O=>g(N.id),class:"ml-2 text-gray-400 hover:text-red-500"},D[1]||(D[1]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,CI)):un("",!0)])]),E("p",EI,Wt(N.text),1)]))),128))])):($e(),qe("div",PI," Aucun commentaire pour le moment ")),u.value?($e(),qe("div",MI,[In(E("textarea",{"onUpdate:modelValue":D[0]||(D[0]=N=>o.value=N),placeholder:"Ajouter un commentaire...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:"2"},null,512),[[Zr,o.value]]),E("div",AI,[E("button",{onClick:d,disabled:!o.value.trim(),class:"px-3 py-1 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"}," Ajouter ",8,kI)])])):($e(),qe("div",TI," Seuls les utilisateurs de l'entreprise peuvent ajouter des commentaires "))]))}}),NI={class:"photo-gallery"},BI={key:0,class:"grid grid-cols-2 gap-2 mb-4"},OI=["src","alt","onClick"],II={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 rounded-lg flex items-center justify-center"},RI={class:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex space-x-2"},FI=["onClick"],jI=["onClick"],zI={key:0,class:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs p-1 truncate rounded-b-lg"},$I={key:1,class:"text-center text-sm text-gray-500 italic my-4"},UI={class:"flex space-x-2 mt-3"},VI={for:"photo-upload",class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 cursor-pointer"},HI={key:2,class:"fixed inset-0 z-[3002] flex items-center justify-center p-4 bg-black bg-opacity-75"},GI={class:"relative max-w-3xl max-h-[90vh] bg-white rounded-lg overflow-hidden"},qI=["src","alt"],WI={key:1,class:"p-3 bg-white"},ZI={class:"text-sm text-gray-700"},KI={key:3,class:"fixed inset-0 z-[3002] flex items-center justify-center p-4 bg-black bg-opacity-75"},YI={class:"w-full max-w-md bg-white rounded-lg overflow-hidden"},JI={class:"p-4"},XI={class:"p-4 bg-gray-50 flex justify-end space-x-3"},QI={key:4,class:"fixed inset-0 z-[3002] flex items-center justify-center p-4 bg-black bg-opacity-75"},eR={class:"w-full max-w-md bg-white rounded-lg overflow-hidden"},tR={class:"p-4 border-b flex justify-between items-center"},nR={class:"relative"},rR=["src"],iR={class:"p-4 bg-gray-50 flex justify-center"},oR={key:1,class:"flex space-x-3"},sR=us({__name:"PhotoGallery",props:{noteId:{},photos:{}},emits:["update:photos"],setup(e,{emit:n}){const t=e,r=Bp(),i=dc(),s=Ft(null),o=Ft(null);let u=null;const f=Ft(!1),d=Ft(!1),g=Ft(!1),y=Ft(null),x=Ft(null),_=Ft(""),M=Ft(null);function D(Z){y.value=Z,f.value=!0}function N(Z){x.value=Z,_.value=Z.caption||"",d.value=!0}function O(){if(x.value)try{r.updatePhotoCaption(t.noteId,x.value.id,_.value),d.value=!1,i.success("Légende mise à jour")}catch(Z){console.error("Erreur lors de la mise à jour de la légende:",Z),i.error("Erreur lors de la mise à jour de la légende")}}function F(Z){if(confirm("Êtes-vous sûr de vouloir supprimer cette photo ?"))try{r.removePhoto(t.noteId,Z),i.success("Photo supprimée")}catch(z){console.error("Erreur lors de la suppression de la photo:",z),i.error("Erreur lors de la suppression de la photo")}}async function Y(Z){const z=Z.target;if(!z.files||z.files.length===0)return;const I=z.files[0];if(!I.type.startsWith("image/")){i.error("Le fichier doit être une image");return}if(I.size>5*1024*1024){i.error("L'image est trop volumineuse (max 5MB)");return}try{const $=await Q(I);r.addPhoto(t.noteId,{url:$}),z.value="",i.success("Photo ajoutée")}catch($){console.error("Erreur lors de l'ajout de la photo:",$),i.error("Erreur lors de l'ajout de la photo")}}function Q(Z){return new Promise((z,I)=>{const $=new FileReader;$.onload=()=>z($.result),$.onerror=I,$.readAsDataURL(Z)})}async function le(){g.value=!0,M.value=null;try{u=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}}),s.value&&(s.value.srcObject=u)}catch(Z){console.error("Erreur lors de l'accès à la caméra:",Z),i.error("Impossible d'accéder à la caméra"),g.value=!1}}function ce(){if(!s.value||!o.value)return;const Z=s.value,z=o.value;z.width=Z.videoWidth,z.height=Z.videoHeight;const I=z.getContext("2d");I&&(I.drawImage(Z,0,0,z.width,z.height),M.value=z.toDataURL("image/jpeg"))}function xe(){M.value=null}function G(){if(M.value)try{r.addPhoto(t.noteId,{url:M.value}),g.value=!1,R(),i.success("Photo ajoutée")}catch(Z){console.error("Erreur lors de l'ajout de la photo:",Z),i.error("Erreur lors de l'ajout de la photo")}}function R(){u&&(u.getTracks().forEach(Z=>Z.stop()),u=null)}return mc(()=>{R()}),(Z,z)=>($e(),qe("div",NI,[Z.photos&&Z.photos.length>0?($e(),qe("div",BI,[($e(!0),qe(Rn,null,Br(Z.photos,I=>($e(),qe("div",{key:I.id,class:"relative group"},[E("img",{src:I.url,alt:I.caption||"Photo",class:"w-full h-32 object-cover rounded-lg cursor-pointer",onClick:$=>D(I)},null,8,OI),E("div",II,[E("div",RI,[E("button",{onClick:Vc($=>N(I),["stop"]),class:"p-1 bg-white rounded-full text-gray-700 hover:text-primary-600",title:"Modifier la légende"},z[4]||(z[4]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,FI),E("button",{onClick:Vc($=>F(I.id),["stop"]),class:"p-1 bg-white rounded-full text-gray-700 hover:text-red-600",title:"Supprimer la photo"},z[5]||(z[5]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,jI)])]),I.caption?($e(),qe("div",zI,Wt(I.caption),1)):un("",!0)]))),128))])):($e(),qe("div",$I," Aucune photo pour le moment ")),E("div",UI,[E("button",{onClick:le,class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},z[6]||(z[6]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),pi(" Prendre une photo ")])),E("label",VI,[z[7]||(z[7]=E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0l-4 4m4-4v12"})],-1)),z[8]||(z[8]=pi(" Téléverser ")),E("input",{id:"photo-upload",type:"file",accept:"image/*",class:"hidden",onChange:Y},null,32)])]),f.value?($e(),qe("div",HI,[E("div",GI,[E("button",{onClick:z[0]||(z[0]=I=>f.value=!1),class:"absolute top-2 right-2 z-10 p-1 bg-white rounded-full text-gray-700 hover:text-red-600 shadow-md"},z[9]||(z[9]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),y.value?($e(),qe("img",{key:0,src:y.value.url,alt:y.value.caption||"Photo",class:"max-h-[80vh] max-w-full object-contain"},null,8,qI)):un("",!0),y.value&&y.value.caption?($e(),qe("div",WI,[E("p",ZI,Wt(y.value.caption),1)])):un("",!0)])])):un("",!0),d.value?($e(),qe("div",KI,[E("div",YI,[z[10]||(z[10]=E("div",{class:"p-4 border-b"},[E("h3",{class:"text-lg font-medium text-gray-900"},"Modifier la légende")],-1)),E("div",JI,[In(E("textarea",{"onUpdate:modelValue":z[1]||(z[1]=I=>_.value=I),placeholder:"Ajouter une légende...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:"3"},null,512),[[Zr,_.value]])]),E("div",XI,[E("button",{onClick:z[2]||(z[2]=I=>d.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Annuler "),E("button",{onClick:O,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Enregistrer ")])])])):un("",!0),g.value?($e(),qe("div",QI,[E("div",eR,[E("div",tR,[z[12]||(z[12]=E("h3",{class:"text-lg font-medium text-gray-900"},"Prendre une photo",-1)),E("button",{onClick:z[3]||(z[3]=I=>g.value=!1),class:"text-gray-400 hover:text-gray-500"},z[11]||(z[11]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("div",nR,[M.value?($e(),qe("img",{key:1,src:M.value,class:"w-full h-64 object-cover",alt:"Captured"},null,8,rR)):($e(),qe("video",{key:0,ref_key:"videoElement",ref:s,autoplay:"",class:"w-full h-64 object-cover"},null,512)),E("canvas",{ref_key:"canvasElement",ref:o,class:"hidden"},null,512)]),E("div",iR,[M.value?($e(),qe("div",oR,[E("button",{onClick:xe,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Reprendre "),E("button",{onClick:G,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Utiliser ")])):($e(),qe("button",{key:0,onClick:ce,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-full w-12 h-12 flex items-center justify-center hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},z[13]||(z[13]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"})],-1)])))])])])):un("",!0)]))}}),aR={class:"fixed z-[9999] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},lR={class:"flex items-center justify-center min-h-screen w-full"},uR={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-2xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden"},cR={class:"p-4 md:p-6 flex-1 overflow-y-auto"},fR={class:"flex justify-between items-center mb-4 border-b pb-4"},hR={class:"text-xl font-semibold text-gray-900"},dR={class:"mb-4 border-b border-gray-200"},pR={class:"flex space-x-4","aria-label":"Tabs"},gR={key:0,class:"ml-1 px-2 py-0.5 text-xs rounded-full bg-primary-100 text-primary-800"},mR={key:0,class:"ml-1 px-2 py-0.5 text-xs rounded-full bg-primary-100 text-primary-800"},vR={key:0},yR={class:"mb-4"},_R={class:"mb-4"},bR={class:"mb-4"},wR=["value"],xR={class:"mb-4"},LR=["value"],SR={class:"mb-4"},CR={class:"mt-1 flex space-x-2"},ER=["onClick"],PR={key:1,class:"mt-4"},MR={key:2,class:"mt-4"},gx=us({__name:"NoteEditModal",props:{note:{},isNewNote:{type:Boolean},location:{}},emits:["close","save"],setup(e,{emit:n}){const t=e,r=n,i=Bp(),s=dc(),o=Ft("info"),u=Ft({title:"",description:"",columnId:"",accessLevel:ao.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[],photos:[]});$s(()=>{console.log("[NoteEditModal] onMounted - props:",t),t.note?(console.log("[NoteEditModal] Édition d'une note existante:",t.note),u.value=JSON.parse(JSON.stringify(t.note))):t.isNewNote&&t.location?(console.log("[NoteEditModal] Création d'une nouvelle note avec location:",t.location),u.value={title:"Nouvelle note",description:"",location:t.location,columnId:i.getDefaultColumn.id,accessLevel:ao.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[],photos:[]}):console.error("[NoteEditModal] Erreur: Ni note existante ni nouvelle note avec location"),console.log("[NoteEditModal] editingNote.value après initialisation:",u.value)});const f=gr(()=>i.getSortedColumns),d=[{id:ao.PRIVATE,title:"Privé",description:"Visible uniquement par vous"},{id:ao.COMPANY,title:"Entreprise",description:"Visible par l'entreprise uniquement"},{id:ao.EMPLOYEE,title:"Salariés",description:"Visible par l'entreprise et les salariés"},{id:ao.VISITOR,title:"Visiteurs",description:"Visible par tous"}],g=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6B7280"];function y(M){u.value.style.color=M,u.value.style.fillColor=M}function x(){r("close")}function _(){if(t.note)i.updateNote(t.note.id,u.value),s.success("Note mise à jour avec succès");else if(t.isNewNote&&t.location){const M=i.addNote({title:u.value.title,description:u.value.description,location:t.location,columnId:u.value.columnId,style:u.value.style,accessLevel:u.value.accessLevel});s.success("Note créée avec succès");const D=i.notes.find(N=>N.id===M);D&&r("save",D)}r("close")}return(M,D)=>{var N,O,F,Y,Q;return $e(),qe("div",aR,[E("div",lR,[D[16]||(D[16]=E("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),E("div",uR,[E("form",{onSubmit:Vc(_,["prevent"]),class:"h-full md:h-auto flex flex-col"},[E("div",cR,[E("div",fR,[E("h3",hR,Wt((N=M.note)!=null&&N.id?"Modifier la note":"Nouvelle note"),1),E("button",{type:"button",onClick:x,class:"text-gray-400 hover:text-gray-500"},D[7]||(D[7]=[E("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("div",dR,[E("nav",pR,[E("button",{type:"button",onClick:D[0]||(D[0]=le=>o.value="info"),class:Ri(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",o.value==="info"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Informations ",2),E("button",{type:"button",onClick:D[1]||(D[1]=le=>o.value="comments"),class:Ri(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",o.value==="comments"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[D[8]||(D[8]=pi(" Commentaires ")),(F=(O=M.note)==null?void 0:O.comments)!=null&&F.length?($e(),qe("span",gR,Wt(M.note.comments.length),1)):un("",!0)],2),E("button",{type:"button",onClick:D[2]||(D[2]=le=>o.value="photos"),class:Ri(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",o.value==="photos"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[D[9]||(D[9]=pi(" Photos ")),(Q=(Y=M.note)==null?void 0:Y.photos)!=null&&Q.length?($e(),qe("span",mR,Wt(M.note.photos.length),1)):un("",!0)],2)])]),o.value==="info"?($e(),qe("div",vR,[E("div",yR,[D[10]||(D[10]=E("label",{for:"title",class:"block text-sm font-medium text-gray-700"},"Titre",-1)),In(E("input",{type:"text",id:"title","onUpdate:modelValue":D[3]||(D[3]=le=>u.value.title=le),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Zr,u.value.title]])]),E("div",_R,[D[11]||(D[11]=E("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),In(E("textarea",{id:"description","onUpdate:modelValue":D[4]||(D[4]=le=>u.value.description=le),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Zr,u.value.description]])]),E("div",bR,[D[12]||(D[12]=E("label",{for:"column",class:"block text-sm font-medium text-gray-700"},"État",-1)),In(E("select",{id:"column","onUpdate:modelValue":D[5]||(D[5]=le=>u.value.columnId=le),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[($e(!0),qe(Rn,null,Br(f.value,le=>($e(),qe("option",{key:le.id,value:le.id},Wt(le.title),9,wR))),128))],512),[[lo,u.value.columnId]])]),E("div",xR,[D[13]||(D[13]=E("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accès",-1)),In(E("select",{id:"accessLevel","onUpdate:modelValue":D[6]||(D[6]=le=>u.value.accessLevel=le),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[($e(),qe(Rn,null,Br(d,le=>E("option",{key:le.id,value:le.id},Wt(le.title)+" - "+Wt(le.description),9,LR)),64))],512),[[lo,u.value.accessLevel]])]),E("div",SR,[D[14]||(D[14]=E("label",{class:"block text-sm font-medium text-gray-700"},"Couleur",-1)),E("div",CR,[($e(),qe(Rn,null,Br(g,le=>E("div",{key:le,class:Ri(["w-8 h-8 rounded-full cursor-pointer border-2",{"border-gray-400":u.value.style.color!==le,"border-black":u.value.style.color===le}]),style:rl({backgroundColor:le}),onClick:ce=>y(le)},null,14,ER)),64))])])])):o.value==="comments"?($e(),qe("div",PR,[M.note?($e(),Ua(DI,{key:0,noteId:M.note.id,comments:M.note.comments||[]},null,8,["noteId","comments"])):un("",!0)])):o.value==="photos"?($e(),qe("div",MR,[M.note?($e(),Ua(sR,{key:0,noteId:M.note.id,photos:M.note.photos||[]},null,8,["noteId","photos"])):un("",!0)])):un("",!0)]),E("div",{class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[D[15]||(D[15]=E("button",{type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:ml-3 sm:w-auto sm:text-sm"}," Enregistrer ",-1)),E("button",{onClick:x,type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Annuler ")])],32)])])])}}});(()=>{var Sn,Xn;var e=Object.create,n=Object.defineProperty,t=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,o=(l,h)=>()=>(h||l((h={exports:{}}).exports,h),h.exports),u=(l,h,v,w)=>{if(h&&typeof h=="object"||typeof h=="function")for(let C of r(h))!s.call(l,C)&&C!==v&&n(l,C,{get:()=>h[C],enumerable:!(w=t(h,C))||w.enumerable});return l},f=(l,h,v)=>(v=l!=null?e(i(l)):{},u(h||!l||!l.__esModule?n(v,"default",{value:l,enumerable:!0}):v,l)),d=o((l,h)=>{function v(){this.__data__=[],this.size=0}h.exports=v}),g=o((l,h)=>{function v(w,C){return w===C||w!==w&&C!==C}h.exports=v}),y=o((l,h)=>{var v=g();function w(C,j){for(var X=C.length;X--;)if(v(C[X][0],j))return X;return-1}h.exports=w}),x=o((l,h)=>{var v=y(),w=Array.prototype,C=w.splice;function j(X){var te=this.__data__,de=v(te,X);if(de<0)return!1;var Le=te.length-1;return de==Le?te.pop():C.call(te,de,1),--this.size,!0}h.exports=j}),_=o((l,h)=>{var v=y();function w(C){var j=this.__data__,X=v(j,C);return X<0?void 0:j[X][1]}h.exports=w}),M=o((l,h)=>{var v=y();function w(C){return v(this.__data__,C)>-1}h.exports=w}),D=o((l,h)=>{var v=y();function w(C,j){var X=this.__data__,te=v(X,C);return te<0?(++this.size,X.push([C,j])):X[te][1]=j,this}h.exports=w}),N=o((l,h)=>{var v=d(),w=x(),C=_(),j=M(),X=D();function te(de){var Le=-1,Je=de==null?0:de.length;for(this.clear();++Le<Je;){var ze=de[Le];this.set(ze[0],ze[1])}}te.prototype.clear=v,te.prototype.delete=w,te.prototype.get=C,te.prototype.has=j,te.prototype.set=X,h.exports=te}),O=o((l,h)=>{var v=N();function w(){this.__data__=new v,this.size=0}h.exports=w}),F=o((l,h)=>{function v(w){var C=this.__data__,j=C.delete(w);return this.size=C.size,j}h.exports=v}),Y=o((l,h)=>{function v(w){return this.__data__.get(w)}h.exports=v}),Q=o((l,h)=>{function v(w){return this.__data__.has(w)}h.exports=v}),le=o((l,h)=>{var v=typeof ea=="object"&&ea&&ea.Object===Object&&ea;h.exports=v}),ce=o((l,h)=>{var v=le(),w=typeof self=="object"&&self&&self.Object===Object&&self,C=v||w||Function("return this")();h.exports=C}),xe=o((l,h)=>{var v=ce(),w=v.Symbol;h.exports=w}),G=o((l,h)=>{var v=xe(),w=Object.prototype,C=w.hasOwnProperty,j=w.toString,X=v?v.toStringTag:void 0;function te(de){var Le=C.call(de,X),Je=de[X];try{de[X]=void 0;var ze=!0}catch{}var vt=j.call(de);return ze&&(Le?de[X]=Je:delete de[X]),vt}h.exports=te}),R=o((l,h)=>{var v=Object.prototype,w=v.toString;function C(j){return w.call(j)}h.exports=C}),Z=o((l,h)=>{var v=xe(),w=G(),C=R(),j="[object Null]",X="[object Undefined]",te=v?v.toStringTag:void 0;function de(Le){return Le==null?Le===void 0?X:j:te&&te in Object(Le)?w(Le):C(Le)}h.exports=de}),z=o((l,h)=>{function v(w){var C=typeof w;return w!=null&&(C=="object"||C=="function")}h.exports=v}),I=o((l,h)=>{var v=Z(),w=z(),C="[object AsyncFunction]",j="[object Function]",X="[object GeneratorFunction]",te="[object Proxy]";function de(Le){if(!w(Le))return!1;var Je=v(Le);return Je==j||Je==X||Je==C||Je==te}h.exports=de}),$=o((l,h)=>{var v=ce(),w=v["__core-js_shared__"];h.exports=w}),U=o((l,h)=>{var v=$(),w=function(){var j=/[^.]+$/.exec(v&&v.keys&&v.keys.IE_PROTO||"");return j?"Symbol(src)_1."+j:""}();function C(j){return!!w&&w in j}h.exports=C}),W=o((l,h)=>{var v=Function.prototype,w=v.toString;function C(j){if(j!=null){try{return w.call(j)}catch{}try{return j+""}catch{}}return""}h.exports=C}),q=o((l,h)=>{var v=I(),w=U(),C=z(),j=W(),X=/[\\^$.*+?()[\]{}|]/g,te=/^\[object .+?Constructor\]$/,de=Function.prototype,Le=Object.prototype,Je=de.toString,ze=Le.hasOwnProperty,vt=RegExp("^"+Je.call(ze).replace(X,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function At(Xt){if(!C(Xt)||w(Xt))return!1;var yn=v(Xt)?vt:te;return yn.test(j(Xt))}h.exports=At}),ie=o((l,h)=>{function v(w,C){return w==null?void 0:w[C]}h.exports=v}),re=o((l,h)=>{var v=q(),w=ie();function C(j,X){var te=w(j,X);return v(te)?te:void 0}h.exports=C}),we=o((l,h)=>{var v=re(),w=ce(),C=v(w,"Map");h.exports=C}),Pe=o((l,h)=>{var v=re(),w=v(Object,"create");h.exports=w}),Ie=o((l,h)=>{var v=Pe();function w(){this.__data__=v?v(null):{},this.size=0}h.exports=w}),A=o((l,h)=>{function v(w){var C=this.has(w)&&delete this.__data__[w];return this.size-=C?1:0,C}h.exports=v}),J=o((l,h)=>{var v=Pe(),w="__lodash_hash_undefined__",C=Object.prototype,j=C.hasOwnProperty;function X(te){var de=this.__data__;if(v){var Le=de[te];return Le===w?void 0:Le}return j.call(de,te)?de[te]:void 0}h.exports=X}),fe=o((l,h)=>{var v=Pe(),w=Object.prototype,C=w.hasOwnProperty;function j(X){var te=this.__data__;return v?te[X]!==void 0:C.call(te,X)}h.exports=j}),ne=o((l,h)=>{var v=Pe(),w="__lodash_hash_undefined__";function C(j,X){var te=this.__data__;return this.size+=this.has(j)?0:1,te[j]=v&&X===void 0?w:X,this}h.exports=C}),he=o((l,h)=>{var v=Ie(),w=A(),C=J(),j=fe(),X=ne();function te(de){var Le=-1,Je=de==null?0:de.length;for(this.clear();++Le<Je;){var ze=de[Le];this.set(ze[0],ze[1])}}te.prototype.clear=v,te.prototype.delete=w,te.prototype.get=C,te.prototype.has=j,te.prototype.set=X,h.exports=te}),ae=o((l,h)=>{var v=he(),w=N(),C=we();function j(){this.size=0,this.__data__={hash:new v,map:new(C||w),string:new v}}h.exports=j}),T=o((l,h)=>{function v(w){var C=typeof w;return C=="string"||C=="number"||C=="symbol"||C=="boolean"?w!=="__proto__":w===null}h.exports=v}),ue=o((l,h)=>{var v=T();function w(C,j){var X=C.__data__;return v(j)?X[typeof j=="string"?"string":"hash"]:X.map}h.exports=w}),ke=o((l,h)=>{var v=ue();function w(C){var j=v(this,C).delete(C);return this.size-=j?1:0,j}h.exports=w}),Ce=o((l,h)=>{var v=ue();function w(C){return v(this,C).get(C)}h.exports=w}),Ve=o((l,h)=>{var v=ue();function w(C){return v(this,C).has(C)}h.exports=w}),K=o((l,h)=>{var v=ue();function w(C,j){var X=v(this,C),te=X.size;return X.set(C,j),this.size+=X.size==te?0:1,this}h.exports=w}),pe=o((l,h)=>{var v=ae(),w=ke(),C=Ce(),j=Ve(),X=K();function te(de){var Le=-1,Je=de==null?0:de.length;for(this.clear();++Le<Je;){var ze=de[Le];this.set(ze[0],ze[1])}}te.prototype.clear=v,te.prototype.delete=w,te.prototype.get=C,te.prototype.has=j,te.prototype.set=X,h.exports=te}),ve=o((l,h)=>{var v=N(),w=we(),C=pe(),j=200;function X(te,de){var Le=this.__data__;if(Le instanceof v){var Je=Le.__data__;if(!w||Je.length<j-1)return Je.push([te,de]),this.size=++Le.size,this;Le=this.__data__=new C(Je)}return Le.set(te,de),this.size=Le.size,this}h.exports=X}),ge=o((l,h)=>{var v=N(),w=O(),C=F(),j=Y(),X=Q(),te=ve();function de(Le){var Je=this.__data__=new v(Le);this.size=Je.size}de.prototype.clear=w,de.prototype.delete=C,de.prototype.get=j,de.prototype.has=X,de.prototype.set=te,h.exports=de}),Ue=o((l,h)=>{var v=re(),w=function(){try{var C=v(Object,"defineProperty");return C({},"",{}),C}catch{}}();h.exports=w}),Qe=o((l,h)=>{var v=Ue();function w(C,j,X){j=="__proto__"&&v?v(C,j,{configurable:!0,enumerable:!0,value:X,writable:!0}):C[j]=X}h.exports=w}),Ke=o((l,h)=>{var v=Qe(),w=g();function C(j,X,te){(te!==void 0&&!w(j[X],te)||te===void 0&&!(X in j))&&v(j,X,te)}h.exports=C}),Ge=o((l,h)=>{function v(w){return function(C,j,X){for(var te=-1,de=Object(C),Le=X(C),Je=Le.length;Je--;){var ze=Le[w?Je:++te];if(j(de[ze],ze,de)===!1)break}return C}}h.exports=v}),Xe=o((l,h)=>{var v=Ge(),w=v();h.exports=w}),ot=o((l,h)=>{var v=ce(),w=typeof l=="object"&&l&&!l.nodeType&&l,C=w&&typeof h=="object"&&h&&!h.nodeType&&h,j=C&&C.exports===w,X=j?v.Buffer:void 0,te=X?X.allocUnsafe:void 0;function de(Le,Je){if(Je)return Le.slice();var ze=Le.length,vt=te?te(ze):new Le.constructor(ze);return Le.copy(vt),vt}h.exports=de}),kt=o((l,h)=>{var v=ce(),w=v.Uint8Array;h.exports=w}),Ct=o((l,h)=>{var v=kt();function w(C){var j=new C.constructor(C.byteLength);return new v(j).set(new v(C)),j}h.exports=w}),Ut=o((l,h)=>{var v=Ct();function w(C,j){var X=j?v(C.buffer):C.buffer;return new C.constructor(X,C.byteOffset,C.length)}h.exports=w}),Gt=o((l,h)=>{function v(w,C){var j=-1,X=w.length;for(C||(C=Array(X));++j<X;)C[j]=w[j];return C}h.exports=v}),fn=o((l,h)=>{var v=z(),w=Object.create,C=function(){function j(){}return function(X){if(!v(X))return{};if(w)return w(X);j.prototype=X;var te=new j;return j.prototype=void 0,te}}();h.exports=C}),pn=o((l,h)=>{function v(w,C){return function(j){return w(C(j))}}h.exports=v}),et=o((l,h)=>{var v=pn(),w=v(Object.getPrototypeOf,Object);h.exports=w}),it=o((l,h)=>{var v=Object.prototype;function w(C){var j=C&&C.constructor,X=typeof j=="function"&&j.prototype||v;return C===X}h.exports=w}),nt=o((l,h)=>{var v=fn(),w=et(),C=it();function j(X){return typeof X.constructor=="function"&&!C(X)?v(w(X)):{}}h.exports=j}),Vt=o((l,h)=>{function v(w){return w!=null&&typeof w=="object"}h.exports=v}),Qt=o((l,h)=>{var v=Z(),w=Vt(),C="[object Arguments]";function j(X){return w(X)&&v(X)==C}h.exports=j}),On=o((l,h)=>{var v=Qt(),w=Vt(),C=Object.prototype,j=C.hasOwnProperty,X=C.propertyIsEnumerable,te=v(function(){return arguments}())?v:function(de){return w(de)&&j.call(de,"callee")&&!X.call(de,"callee")};h.exports=te}),wn=o((l,h)=>{var v=Array.isArray;h.exports=v}),Tn=o((l,h)=>{var v=9007199254740991;function w(C){return typeof C=="number"&&C>-1&&C%1==0&&C<=v}h.exports=w}),ar=o((l,h)=>{var v=I(),w=Tn();function C(j){return j!=null&&w(j.length)&&!v(j)}h.exports=C}),xn=o((l,h)=>{var v=ar(),w=Vt();function C(j){return w(j)&&v(j)}h.exports=C}),Mn=o((l,h)=>{function v(){return!1}h.exports=v}),En=o((l,h)=>{var v=ce(),w=Mn(),C=typeof l=="object"&&l&&!l.nodeType&&l,j=C&&typeof h=="object"&&h&&!h.nodeType&&h,X=j&&j.exports===C,te=X?v.Buffer:void 0,de=te?te.isBuffer:void 0,Le=de||w;h.exports=Le}),cr=o((l,h)=>{var v=Z(),w=et(),C=Vt(),j="[object Object]",X=Function.prototype,te=Object.prototype,de=X.toString,Le=te.hasOwnProperty,Je=de.call(Object);function ze(vt){if(!C(vt)||v(vt)!=j)return!1;var At=w(vt);if(At===null)return!0;var Xt=Le.call(At,"constructor")&&At.constructor;return typeof Xt=="function"&&Xt instanceof Xt&&de.call(Xt)==Je}h.exports=ze}),yr=o((l,h)=>{var v=Z(),w=Tn(),C=Vt(),j="[object Arguments]",X="[object Array]",te="[object Boolean]",de="[object Date]",Le="[object Error]",Je="[object Function]",ze="[object Map]",vt="[object Number]",At="[object Object]",Xt="[object RegExp]",yn="[object Set]",bn="[object String]",ur="[object WeakMap]",Ye="[object ArrayBuffer]",tt="[object DataView]",ft="[object Float32Array]",Bt="[object Float64Array]",bt="[object Int8Array]",Tt="[object Int16Array]",me="[object Int32Array]",Me="[object Uint8Array]",Oe="[object Uint8ClampedArray]",Be="[object Uint16Array]",Fe="[object Uint32Array]",je={};je[ft]=je[Bt]=je[bt]=je[Tt]=je[me]=je[Me]=je[Oe]=je[Be]=je[Fe]=!0,je[j]=je[X]=je[Ye]=je[te]=je[tt]=je[de]=je[Le]=je[Je]=je[ze]=je[vt]=je[At]=je[Xt]=je[yn]=je[bn]=je[ur]=!1;function lt(ut){return C(ut)&&w(ut.length)&&!!je[v(ut)]}h.exports=lt}),mt=o((l,h)=>{function v(w){return function(C){return w(C)}}h.exports=v}),We=o((l,h)=>{var v=le(),w=typeof l=="object"&&l&&!l.nodeType&&l,C=w&&typeof h=="object"&&h&&!h.nodeType&&h,j=C&&C.exports===w,X=j&&v.process,te=function(){try{var de=C&&C.require&&C.require("util").types;return de||X&&X.binding&&X.binding("util")}catch{}}();h.exports=te}),Ot=o((l,h)=>{var v=yr(),w=mt(),C=We(),j=C&&C.isTypedArray,X=j?w(j):v;h.exports=X}),Pn=o((l,h)=>{function v(w,C){if(!(C==="constructor"&&typeof w[C]=="function")&&C!="__proto__")return w[C]}h.exports=v}),tr=o((l,h)=>{var v=Qe(),w=g(),C=Object.prototype,j=C.hasOwnProperty;function X(te,de,Le){var Je=te[de];(!(j.call(te,de)&&w(Je,Le))||Le===void 0&&!(de in te))&&v(te,de,Le)}h.exports=X}),Zn=o((l,h)=>{var v=tr(),w=Qe();function C(j,X,te,de){var Le=!te;te||(te={});for(var Je=-1,ze=X.length;++Je<ze;){var vt=X[Je],At=de?de(te[vt],j[vt],vt,te,j):void 0;At===void 0&&(At=j[vt]),Le?w(te,vt,At):v(te,vt,At)}return te}h.exports=C}),Zt=o((l,h)=>{function v(w,C){for(var j=-1,X=Array(w);++j<w;)X[j]=C(j);return X}h.exports=v}),mn=o((l,h)=>{var v=9007199254740991,w=/^(?:0|[1-9]\d*)$/;function C(j,X){var te=typeof j;return X=X??v,!!X&&(te=="number"||te!="symbol"&&w.test(j))&&j>-1&&j%1==0&&j<X}h.exports=C}),It=o((l,h)=>{var v=Zt(),w=On(),C=wn(),j=En(),X=mn(),te=Ot(),de=Object.prototype,Le=de.hasOwnProperty;function Je(ze,vt){var At=C(ze),Xt=!At&&w(ze),yn=!At&&!Xt&&j(ze),bn=!At&&!Xt&&!yn&&te(ze),ur=At||Xt||yn||bn,Ye=ur?v(ze.length,String):[],tt=Ye.length;for(var ft in ze)(vt||Le.call(ze,ft))&&!(ur&&(ft=="length"||yn&&(ft=="offset"||ft=="parent")||bn&&(ft=="buffer"||ft=="byteLength"||ft=="byteOffset")||X(ft,tt)))&&Ye.push(ft);return Ye}h.exports=Je}),Kt=o((l,h)=>{function v(w){var C=[];if(w!=null)for(var j in Object(w))C.push(j);return C}h.exports=v}),Ln=o((l,h)=>{var v=z(),w=it(),C=Kt(),j=Object.prototype,X=j.hasOwnProperty;function te(de){if(!v(de))return C(de);var Le=w(de),Je=[];for(var ze in de)ze=="constructor"&&(Le||!X.call(de,ze))||Je.push(ze);return Je}h.exports=te}),mr=o((l,h)=>{var v=It(),w=Ln(),C=ar();function j(X){return C(X)?v(X,!0):w(X)}h.exports=j}),at=o((l,h)=>{var v=Zn(),w=mr();function C(j){return v(j,w(j))}h.exports=C}),Cn=o((l,h)=>{var v=Ke(),w=ot(),C=Ut(),j=Gt(),X=nt(),te=On(),de=wn(),Le=xn(),Je=En(),ze=I(),vt=z(),At=cr(),Xt=Ot(),yn=Pn(),bn=at();function ur(Ye,tt,ft,Bt,bt,Tt,me){var Me=yn(Ye,ft),Oe=yn(tt,ft),Be=me.get(Oe);if(Be){v(Ye,ft,Be);return}var Fe=Tt?Tt(Me,Oe,ft+"",Ye,tt,me):void 0,je=Fe===void 0;if(je){var lt=de(Oe),ut=!lt&&Je(Oe),pt=!lt&&!ut&&Xt(Oe);Fe=Oe,lt||ut||pt?de(Me)?Fe=Me:Le(Me)?Fe=j(Me):ut?(je=!1,Fe=w(Oe,!0)):pt?(je=!1,Fe=C(Oe,!0)):Fe=[]:At(Oe)||te(Oe)?(Fe=Me,te(Me)?Fe=bn(Me):(!vt(Me)||ze(Me))&&(Fe=X(Oe))):je=!1}je&&(me.set(Oe,Fe),bt(Fe,Oe,Bt,Tt,me),me.delete(Oe)),v(Ye,ft,Fe)}h.exports=ur}),xr=o((l,h)=>{var v=ge(),w=Ke(),C=Xe(),j=Cn(),X=z(),te=mr(),de=Pn();function Le(Je,ze,vt,At,Xt){Je!==ze&&C(ze,function(yn,bn){if(Xt||(Xt=new v),X(yn))j(Je,ze,bn,vt,Le,At,Xt);else{var ur=At?At(de(Je,bn),yn,bn+"",Je,ze,Xt):void 0;ur===void 0&&(ur=yn),w(Je,bn,ur)}},te)}h.exports=Le}),Ni=o((l,h)=>{function v(w){return w}h.exports=v}),Fr=o((l,h)=>{function v(w,C,j){switch(j.length){case 0:return w.call(C);case 1:return w.call(C,j[0]);case 2:return w.call(C,j[0],j[1]);case 3:return w.call(C,j[0],j[1],j[2])}return w.apply(C,j)}h.exports=v}),Er=o((l,h)=>{var v=Fr(),w=Math.max;function C(j,X,te){return X=w(X===void 0?j.length-1:X,0),function(){for(var de=arguments,Le=-1,Je=w(de.length-X,0),ze=Array(Je);++Le<Je;)ze[Le]=de[X+Le];Le=-1;for(var vt=Array(X+1);++Le<X;)vt[Le]=de[Le];return vt[X]=te(ze),v(j,this,vt)}}h.exports=C}),lr=o((l,h)=>{function v(w){return function(){return w}}h.exports=v}),Hr=o((l,h)=>{var v=lr(),w=Ue(),C=Ni(),j=w?function(X,te){return w(X,"toString",{configurable:!0,enumerable:!1,value:v(te),writable:!0})}:C;h.exports=j}),ir=o((l,h)=>{var v=800,w=16,C=Date.now;function j(X){var te=0,de=0;return function(){var Le=C(),Je=w-(Le-de);if(de=Le,Je>0){if(++te>=v)return arguments[0]}else te=0;return X.apply(void 0,arguments)}}h.exports=j}),Or=o((l,h)=>{var v=Hr(),w=ir(),C=w(v);h.exports=C}),jr=o((l,h)=>{var v=Ni(),w=Er(),C=Or();function j(X,te){return C(w(X,te,v),X+"")}h.exports=j}),rn=o((l,h)=>{var v=g(),w=ar(),C=mn(),j=z();function X(te,de,Le){if(!j(Le))return!1;var Je=typeof de;return(Je=="number"?w(Le)&&C(de,Le.length):Je=="string"&&de in Le)?v(Le[de],te):!1}h.exports=X}),Fi=o((l,h)=>{var v=jr(),w=rn();function C(j){return v(function(X,te){var de=-1,Le=te.length,Je=Le>1?te[Le-1]:void 0,ze=Le>2?te[2]:void 0;for(Je=j.length>3&&typeof Je=="function"?(Le--,Je):void 0,ze&&w(te[0],te[1],ze)&&(Je=Le<3?void 0:Je,Le=1),X=Object(X);++de<Le;){var vt=te[de];vt&&j(X,vt,de,Je)}return X})}h.exports=C}),_i=o((l,h)=>{var v=xr(),w=Fi(),C=w(function(j,X,te){v(j,X,te)});h.exports=C}),gi=o((l,h)=>{var v=Z(),w=Vt(),C="[object Symbol]";function j(X){return typeof X=="symbol"||w(X)&&v(X)==C}h.exports=j}),Kr=o((l,h)=>{var v=wn(),w=gi(),C=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,j=/^\w*$/;function X(te,de){if(v(te))return!1;var Le=typeof te;return Le=="number"||Le=="symbol"||Le=="boolean"||te==null||w(te)?!0:j.test(te)||!C.test(te)||de!=null&&te in Object(de)}h.exports=X}),Ir=o((l,h)=>{var v=pe(),w="Expected a function";function C(j,X){if(typeof j!="function"||X!=null&&typeof X!="function")throw new TypeError(w);var te=function(){var de=arguments,Le=X?X.apply(this,de):de[0],Je=te.cache;if(Je.has(Le))return Je.get(Le);var ze=j.apply(this,de);return te.cache=Je.set(Le,ze)||Je,ze};return te.cache=new(C.Cache||v),te}C.Cache=v,h.exports=C}),Rr=o((l,h)=>{var v=Ir(),w=500;function C(j){var X=v(j,function(de){return te.size===w&&te.clear(),de}),te=X.cache;return X}h.exports=C}),hr=o((l,h)=>{var v=Rr(),w=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,C=/\\(\\)?/g,j=v(function(X){var te=[];return X.charCodeAt(0)===46&&te.push(""),X.replace(w,function(de,Le,Je,ze){te.push(Je?ze.replace(C,"$1"):Le||de)}),te});h.exports=j}),ji=o((l,h)=>{function v(w,C){for(var j=-1,X=w==null?0:w.length,te=Array(X);++j<X;)te[j]=C(w[j],j,w);return te}h.exports=v}),Ls=o((l,h)=>{var v=xe(),w=ji(),C=wn(),j=gi(),X=v?v.prototype:void 0,te=X?X.toString:void 0;function de(Le){if(typeof Le=="string")return Le;if(C(Le))return w(Le,de)+"";if(j(Le))return te?te.call(Le):"";var Je=Le+"";return Je=="0"&&1/Le==-1/0?"-0":Je}h.exports=de}),Ss=o((l,h)=>{var v=Ls();function w(C){return C==null?"":v(C)}h.exports=w}),oi=o((l,h)=>{var v=wn(),w=Kr(),C=hr(),j=Ss();function X(te,de){return v(te)?te:w(te,de)?[te]:C(j(te))}h.exports=X}),Fn=o((l,h)=>{var v=gi();function w(C){if(typeof C=="string"||v(C))return C;var j=C+"";return j=="0"&&1/C==-1/0?"-0":j}h.exports=w}),Eo=o((l,h)=>{var v=oi(),w=Fn();function C(j,X){X=v(X,j);for(var te=0,de=X.length;j!=null&&te<de;)j=j[w(X[te++])];return te&&te==de?j:void 0}h.exports=C}),ui=o((l,h)=>{var v=Eo();function w(C,j,X){var te=C==null?void 0:v(C,j);return te===void 0?X:te}h.exports=w}),fr=o((l,h)=>{(function(v,w){typeof l=="object"&&typeof h<"u"?h.exports=w():(v=v||self).RBush=w()})(l,function(){function v(Ye,tt,ft,Bt,bt){(function Tt(me,Me,Oe,Be,Fe){for(;Be>Oe;){if(Be-Oe>600){var je=Be-Oe+1,lt=Me-Oe+1,ut=Math.log(je),pt=.5*Math.exp(2*ut/3),Lt=.5*Math.sqrt(ut*pt*(je-pt)/je)*(lt-je/2<0?-1:1),St=Math.max(Oe,Math.floor(Me-lt*pt/je+Lt)),on=Math.min(Be,Math.floor(Me+(je-lt)*pt/je+Lt));Tt(me,Me,St,on,Fe)}var zn=me[Me],Gn=Oe,Qn=Be;for(w(me,Oe,Me),Fe(me[Be],zn)>0&&w(me,Oe,Be);Gn<Qn;){for(w(me,Gn,Qn),Gn++,Qn--;Fe(me[Gn],zn)<0;)Gn++;for(;Fe(me[Qn],zn)>0;)Qn--}Fe(me[Oe],zn)===0?w(me,Oe,Qn):w(me,++Qn,Be),Qn<=Me&&(Oe=Qn+1),Me<=Qn&&(Be=Qn-1)}})(Ye,tt,ft||0,Bt||Ye.length-1,bt||C)}function w(Ye,tt,ft){var Bt=Ye[tt];Ye[tt]=Ye[ft],Ye[ft]=Bt}function C(Ye,tt){return Ye<tt?-1:Ye>tt?1:0}var j=function(Ye){Ye===void 0&&(Ye=9),this._maxEntries=Math.max(4,Ye),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function X(Ye,tt,ft){if(!ft)return tt.indexOf(Ye);for(var Bt=0;Bt<tt.length;Bt++)if(ft(Ye,tt[Bt]))return Bt;return-1}function te(Ye,tt){de(Ye,0,Ye.children.length,tt,Ye)}function de(Ye,tt,ft,Bt,bt){bt||(bt=bn(null)),bt.minX=1/0,bt.minY=1/0,bt.maxX=-1/0,bt.maxY=-1/0;for(var Tt=tt;Tt<ft;Tt++){var me=Ye.children[Tt];Le(bt,Ye.leaf?Bt(me):me)}return bt}function Le(Ye,tt){return Ye.minX=Math.min(Ye.minX,tt.minX),Ye.minY=Math.min(Ye.minY,tt.minY),Ye.maxX=Math.max(Ye.maxX,tt.maxX),Ye.maxY=Math.max(Ye.maxY,tt.maxY),Ye}function Je(Ye,tt){return Ye.minX-tt.minX}function ze(Ye,tt){return Ye.minY-tt.minY}function vt(Ye){return(Ye.maxX-Ye.minX)*(Ye.maxY-Ye.minY)}function At(Ye){return Ye.maxX-Ye.minX+(Ye.maxY-Ye.minY)}function Xt(Ye,tt){return Ye.minX<=tt.minX&&Ye.minY<=tt.minY&&tt.maxX<=Ye.maxX&&tt.maxY<=Ye.maxY}function yn(Ye,tt){return tt.minX<=Ye.maxX&&tt.minY<=Ye.maxY&&tt.maxX>=Ye.minX&&tt.maxY>=Ye.minY}function bn(Ye){return{children:Ye,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function ur(Ye,tt,ft,Bt,bt){for(var Tt=[tt,ft];Tt.length;)if(!((ft=Tt.pop())-(tt=Tt.pop())<=Bt)){var me=tt+Math.ceil((ft-tt)/Bt/2)*Bt;v(Ye,me,tt,ft,bt),Tt.push(tt,me,me,ft)}}return j.prototype.all=function(){return this._all(this.data,[])},j.prototype.search=function(Ye){var tt=this.data,ft=[];if(!yn(Ye,tt))return ft;for(var Bt=this.toBBox,bt=[];tt;){for(var Tt=0;Tt<tt.children.length;Tt++){var me=tt.children[Tt],Me=tt.leaf?Bt(me):me;yn(Ye,Me)&&(tt.leaf?ft.push(me):Xt(Ye,Me)?this._all(me,ft):bt.push(me))}tt=bt.pop()}return ft},j.prototype.collides=function(Ye){var tt=this.data;if(!yn(Ye,tt))return!1;for(var ft=[];tt;){for(var Bt=0;Bt<tt.children.length;Bt++){var bt=tt.children[Bt],Tt=tt.leaf?this.toBBox(bt):bt;if(yn(Ye,Tt)){if(tt.leaf||Xt(Ye,Tt))return!0;ft.push(bt)}}tt=ft.pop()}return!1},j.prototype.load=function(Ye){if(!Ye||!Ye.length)return this;if(Ye.length<this._minEntries){for(var tt=0;tt<Ye.length;tt++)this.insert(Ye[tt]);return this}var ft=this._build(Ye.slice(),0,Ye.length-1,0);if(this.data.children.length)if(this.data.height===ft.height)this._splitRoot(this.data,ft);else{if(this.data.height<ft.height){var Bt=this.data;this.data=ft,ft=Bt}this._insert(ft,this.data.height-ft.height-1,!0)}else this.data=ft;return this},j.prototype.insert=function(Ye){return Ye&&this._insert(Ye,this.data.height-1),this},j.prototype.clear=function(){return this.data=bn([]),this},j.prototype.remove=function(Ye,tt){if(!Ye)return this;for(var ft,Bt,bt,Tt=this.data,me=this.toBBox(Ye),Me=[],Oe=[];Tt||Me.length;){if(Tt||(Tt=Me.pop(),Bt=Me[Me.length-1],ft=Oe.pop(),bt=!0),Tt.leaf){var Be=X(Ye,Tt.children,tt);if(Be!==-1)return Tt.children.splice(Be,1),Me.push(Tt),this._condense(Me),this}bt||Tt.leaf||!Xt(Tt,me)?Bt?(ft++,Tt=Bt.children[ft],bt=!1):Tt=null:(Me.push(Tt),Oe.push(ft),ft=0,Bt=Tt,Tt=Tt.children[0])}return this},j.prototype.toBBox=function(Ye){return Ye},j.prototype.compareMinX=function(Ye,tt){return Ye.minX-tt.minX},j.prototype.compareMinY=function(Ye,tt){return Ye.minY-tt.minY},j.prototype.toJSON=function(){return this.data},j.prototype.fromJSON=function(Ye){return this.data=Ye,this},j.prototype._all=function(Ye,tt){for(var ft=[];Ye;)Ye.leaf?tt.push.apply(tt,Ye.children):ft.push.apply(ft,Ye.children),Ye=ft.pop();return tt},j.prototype._build=function(Ye,tt,ft,Bt){var bt,Tt=ft-tt+1,me=this._maxEntries;if(Tt<=me)return te(bt=bn(Ye.slice(tt,ft+1)),this.toBBox),bt;Bt||(Bt=Math.ceil(Math.log(Tt)/Math.log(me)),me=Math.ceil(Tt/Math.pow(me,Bt-1))),(bt=bn([])).leaf=!1,bt.height=Bt;var Me=Math.ceil(Tt/me),Oe=Me*Math.ceil(Math.sqrt(me));ur(Ye,tt,ft,Oe,this.compareMinX);for(var Be=tt;Be<=ft;Be+=Oe){var Fe=Math.min(Be+Oe-1,ft);ur(Ye,Be,Fe,Me,this.compareMinY);for(var je=Be;je<=Fe;je+=Me){var lt=Math.min(je+Me-1,Fe);bt.children.push(this._build(Ye,je,lt,Bt-1))}}return te(bt,this.toBBox),bt},j.prototype._chooseSubtree=function(Ye,tt,ft,Bt){for(;Bt.push(tt),!tt.leaf&&Bt.length-1!==ft;){for(var bt=1/0,Tt=1/0,me=void 0,Me=0;Me<tt.children.length;Me++){var Oe=tt.children[Me],Be=vt(Oe),Fe=(je=Ye,lt=Oe,(Math.max(lt.maxX,je.maxX)-Math.min(lt.minX,je.minX))*(Math.max(lt.maxY,je.maxY)-Math.min(lt.minY,je.minY))-Be);Fe<Tt?(Tt=Fe,bt=Be<bt?Be:bt,me=Oe):Fe===Tt&&Be<bt&&(bt=Be,me=Oe)}tt=me||tt.children[0]}var je,lt;return tt},j.prototype._insert=function(Ye,tt,ft){var Bt=ft?Ye:this.toBBox(Ye),bt=[],Tt=this._chooseSubtree(Bt,this.data,tt,bt);for(Tt.children.push(Ye),Le(Tt,Bt);tt>=0&&bt[tt].children.length>this._maxEntries;)this._split(bt,tt),tt--;this._adjustParentBBoxes(Bt,bt,tt)},j.prototype._split=function(Ye,tt){var ft=Ye[tt],Bt=ft.children.length,bt=this._minEntries;this._chooseSplitAxis(ft,bt,Bt);var Tt=this._chooseSplitIndex(ft,bt,Bt),me=bn(ft.children.splice(Tt,ft.children.length-Tt));me.height=ft.height,me.leaf=ft.leaf,te(ft,this.toBBox),te(me,this.toBBox),tt?Ye[tt-1].children.push(me):this._splitRoot(ft,me)},j.prototype._splitRoot=function(Ye,tt){this.data=bn([Ye,tt]),this.data.height=Ye.height+1,this.data.leaf=!1,te(this.data,this.toBBox)},j.prototype._chooseSplitIndex=function(Ye,tt,ft){for(var Bt,bt,Tt,me,Me,Oe,Be,Fe=1/0,je=1/0,lt=tt;lt<=ft-tt;lt++){var ut=de(Ye,0,lt,this.toBBox),pt=de(Ye,lt,ft,this.toBBox),Lt=(bt=ut,Tt=pt,me=void 0,Me=void 0,Oe=void 0,Be=void 0,me=Math.max(bt.minX,Tt.minX),Me=Math.max(bt.minY,Tt.minY),Oe=Math.min(bt.maxX,Tt.maxX),Be=Math.min(bt.maxY,Tt.maxY),Math.max(0,Oe-me)*Math.max(0,Be-Me)),St=vt(ut)+vt(pt);Lt<Fe?(Fe=Lt,Bt=lt,je=St<je?St:je):Lt===Fe&&St<je&&(je=St,Bt=lt)}return Bt||ft-tt},j.prototype._chooseSplitAxis=function(Ye,tt,ft){var Bt=Ye.leaf?this.compareMinX:Je,bt=Ye.leaf?this.compareMinY:ze;this._allDistMargin(Ye,tt,ft,Bt)<this._allDistMargin(Ye,tt,ft,bt)&&Ye.children.sort(Bt)},j.prototype._allDistMargin=function(Ye,tt,ft,Bt){Ye.children.sort(Bt);for(var bt=this.toBBox,Tt=de(Ye,0,tt,bt),me=de(Ye,ft-tt,ft,bt),Me=At(Tt)+At(me),Oe=tt;Oe<ft-tt;Oe++){var Be=Ye.children[Oe];Le(Tt,Ye.leaf?bt(Be):Be),Me+=At(Tt)}for(var Fe=ft-tt-1;Fe>=tt;Fe--){var je=Ye.children[Fe];Le(me,Ye.leaf?bt(je):je),Me+=At(me)}return Me},j.prototype._adjustParentBBoxes=function(Ye,tt,ft){for(var Bt=ft;Bt>=0;Bt--)Le(tt[Bt],Ye)},j.prototype._condense=function(Ye){for(var tt=Ye.length-1,ft=void 0;tt>=0;tt--)Ye[tt].children.length===0?tt>0?(ft=Ye[tt-1].children).splice(ft.indexOf(Ye[tt]),1):this.clear():te(Ye[tt],this.toBBox)},j})}),qn=o(l=>{Object.defineProperty(l,"__esModule",{value:!0}),l.earthRadius=63710088e-1,l.factors={centimeters:l.earthRadius*100,centimetres:l.earthRadius*100,degrees:l.earthRadius/111325,feet:l.earthRadius*3.28084,inches:l.earthRadius*39.37,kilometers:l.earthRadius/1e3,kilometres:l.earthRadius/1e3,meters:l.earthRadius,metres:l.earthRadius,miles:l.earthRadius/1609.344,millimeters:l.earthRadius*1e3,millimetres:l.earthRadius*1e3,nauticalmiles:l.earthRadius/1852,radians:1,yards:l.earthRadius*1.0936},l.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/l.earthRadius,yards:1.0936133},l.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function h(Be,Fe,je){je===void 0&&(je={});var lt={type:"Feature"};return(je.id===0||je.id)&&(lt.id=je.id),je.bbox&&(lt.bbox=je.bbox),lt.properties=Fe||{},lt.geometry=Be,lt}l.feature=h;function v(Be,Fe,je){switch(Be){case"Point":return w(Fe).geometry;case"LineString":return te(Fe).geometry;case"Polygon":return j(Fe).geometry;case"MultiPoint":return ze(Fe).geometry;case"MultiLineString":return Je(Fe).geometry;case"MultiPolygon":return vt(Fe).geometry;default:throw new Error(Be+" is invalid")}}l.geometry=v;function w(Be,Fe,je){if(je===void 0&&(je={}),!Be)throw new Error("coordinates is required");if(!Array.isArray(Be))throw new Error("coordinates must be an Array");if(Be.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Tt(Be[0])||!Tt(Be[1]))throw new Error("coordinates must contain numbers");var lt={type:"Point",coordinates:Be};return h(lt,Fe,je)}l.point=w;function C(Be,Fe,je){return je===void 0&&(je={}),Le(Be.map(function(lt){return w(lt,Fe)}),je)}l.points=C;function j(Be,Fe,je){je===void 0&&(je={});for(var lt=0,ut=Be;lt<ut.length;lt++){var pt=ut[lt];if(pt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Lt=0;Lt<pt[pt.length-1].length;Lt++)if(pt[pt.length-1][Lt]!==pt[0][Lt])throw new Error("First and last Position are not equivalent.")}var St={type:"Polygon",coordinates:Be};return h(St,Fe,je)}l.polygon=j;function X(Be,Fe,je){return je===void 0&&(je={}),Le(Be.map(function(lt){return j(lt,Fe)}),je)}l.polygons=X;function te(Be,Fe,je){if(je===void 0&&(je={}),Be.length<2)throw new Error("coordinates must be an array of two or more positions");var lt={type:"LineString",coordinates:Be};return h(lt,Fe,je)}l.lineString=te;function de(Be,Fe,je){return je===void 0&&(je={}),Le(Be.map(function(lt){return te(lt,Fe)}),je)}l.lineStrings=de;function Le(Be,Fe){Fe===void 0&&(Fe={});var je={type:"FeatureCollection"};return Fe.id&&(je.id=Fe.id),Fe.bbox&&(je.bbox=Fe.bbox),je.features=Be,je}l.featureCollection=Le;function Je(Be,Fe,je){je===void 0&&(je={});var lt={type:"MultiLineString",coordinates:Be};return h(lt,Fe,je)}l.multiLineString=Je;function ze(Be,Fe,je){je===void 0&&(je={});var lt={type:"MultiPoint",coordinates:Be};return h(lt,Fe,je)}l.multiPoint=ze;function vt(Be,Fe,je){je===void 0&&(je={});var lt={type:"MultiPolygon",coordinates:Be};return h(lt,Fe,je)}l.multiPolygon=vt;function At(Be,Fe,je){je===void 0&&(je={});var lt={type:"GeometryCollection",geometries:Be};return h(lt,Fe,je)}l.geometryCollection=At;function Xt(Be,Fe){if(Fe===void 0&&(Fe=0),Fe&&!(Fe>=0))throw new Error("precision must be a positive number");var je=Math.pow(10,Fe||0);return Math.round(Be*je)/je}l.round=Xt;function yn(Be,Fe){Fe===void 0&&(Fe="kilometers");var je=l.factors[Fe];if(!je)throw new Error(Fe+" units is invalid");return Be*je}l.radiansToLength=yn;function bn(Be,Fe){Fe===void 0&&(Fe="kilometers");var je=l.factors[Fe];if(!je)throw new Error(Fe+" units is invalid");return Be/je}l.lengthToRadians=bn;function ur(Be,Fe){return tt(bn(Be,Fe))}l.lengthToDegrees=ur;function Ye(Be){var Fe=Be%360;return Fe<0&&(Fe+=360),Fe}l.bearingToAzimuth=Ye;function tt(Be){var Fe=Be%(2*Math.PI);return Fe*180/Math.PI}l.radiansToDegrees=tt;function ft(Be){var Fe=Be%360;return Fe*Math.PI/180}l.degreesToRadians=ft;function Bt(Be,Fe,je){if(Fe===void 0&&(Fe="kilometers"),je===void 0&&(je="kilometers"),!(Be>=0))throw new Error("length must be a positive number");return yn(bn(Be,Fe),je)}l.convertLength=Bt;function bt(Be,Fe,je){if(Fe===void 0&&(Fe="meters"),je===void 0&&(je="kilometers"),!(Be>=0))throw new Error("area must be a positive number");var lt=l.areaFactors[Fe];if(!lt)throw new Error("invalid original units");var ut=l.areaFactors[je];if(!ut)throw new Error("invalid final units");return Be/lt*ut}l.convertArea=bt;function Tt(Be){return!isNaN(Be)&&Be!==null&&!Array.isArray(Be)}l.isNumber=Tt;function me(Be){return!!Be&&Be.constructor===Object}l.isObject=me;function Me(Be){if(!Be)throw new Error("bbox is required");if(!Array.isArray(Be))throw new Error("bbox must be an Array");if(Be.length!==4&&Be.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");Be.forEach(function(Fe){if(!Tt(Fe))throw new Error("bbox must only contain numbers")})}l.validateBBox=Me;function Oe(Be){if(!Be)throw new Error("id is required");if(["string","number"].indexOf(typeof Be)===-1)throw new Error("id must be a number or a string")}l.validateId=Oe}),_o=o(l=>{Object.defineProperty(l,"__esModule",{value:!0});var h=qn();function v(tt,ft,Bt){if(tt!==null)for(var bt,Tt,me,Me,Oe,Be,Fe,je=0,lt=0,ut,pt=tt.type,Lt=pt==="FeatureCollection",St=pt==="Feature",on=Lt?tt.features.length:1,zn=0;zn<on;zn++){Fe=Lt?tt.features[zn].geometry:St?tt.geometry:tt,ut=Fe?Fe.type==="GeometryCollection":!1,Oe=ut?Fe.geometries.length:1;for(var Gn=0;Gn<Oe;Gn++){var Qn=0,vi=0;if(Me=ut?Fe.geometries[Gn]:Fe,Me!==null){Be=Me.coordinates;var Ai=Me.type;switch(je=Bt&&(Ai==="Polygon"||Ai==="MultiPolygon")?1:0,Ai){case null:break;case"Point":if(ft(Be,lt,zn,Qn,vi)===!1)return!1;lt++,Qn++;break;case"LineString":case"MultiPoint":for(bt=0;bt<Be.length;bt++){if(ft(Be[bt],lt,zn,Qn,vi)===!1)return!1;lt++,Ai==="MultiPoint"&&Qn++}Ai==="LineString"&&Qn++;break;case"Polygon":case"MultiLineString":for(bt=0;bt<Be.length;bt++){for(Tt=0;Tt<Be[bt].length-je;Tt++){if(ft(Be[bt][Tt],lt,zn,Qn,vi)===!1)return!1;lt++}Ai==="MultiLineString"&&Qn++,Ai==="Polygon"&&vi++}Ai==="Polygon"&&Qn++;break;case"MultiPolygon":for(bt=0;bt<Be.length;bt++){for(vi=0,Tt=0;Tt<Be[bt].length;Tt++){for(me=0;me<Be[bt][Tt].length-je;me++){if(ft(Be[bt][Tt][me],lt,zn,Qn,vi)===!1)return!1;lt++}vi++}Qn++}break;case"GeometryCollection":for(bt=0;bt<Me.geometries.length;bt++)if(v(Me.geometries[bt],ft,Bt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function w(tt,ft,Bt,bt){var Tt=Bt;return v(tt,function(me,Me,Oe,Be,Fe){Me===0&&Bt===void 0?Tt=me:Tt=ft(Tt,me,Me,Oe,Be,Fe)},bt),Tt}function C(tt,ft){var Bt;switch(tt.type){case"FeatureCollection":for(Bt=0;Bt<tt.features.length&&ft(tt.features[Bt].properties,Bt)!==!1;Bt++);break;case"Feature":ft(tt.properties,0);break}}function j(tt,ft,Bt){var bt=Bt;return C(tt,function(Tt,me){me===0&&Bt===void 0?bt=Tt:bt=ft(bt,Tt,me)}),bt}function X(tt,ft){if(tt.type==="Feature")ft(tt,0);else if(tt.type==="FeatureCollection")for(var Bt=0;Bt<tt.features.length&&ft(tt.features[Bt],Bt)!==!1;Bt++);}function te(tt,ft,Bt){var bt=Bt;return X(tt,function(Tt,me){me===0&&Bt===void 0?bt=Tt:bt=ft(bt,Tt,me)}),bt}function de(tt){var ft=[];return v(tt,function(Bt){ft.push(Bt)}),ft}function Le(tt,ft){var Bt,bt,Tt,me,Me,Oe,Be,Fe,je,lt,ut=0,pt=tt.type==="FeatureCollection",Lt=tt.type==="Feature",St=pt?tt.features.length:1;for(Bt=0;Bt<St;Bt++){for(Oe=pt?tt.features[Bt].geometry:Lt?tt.geometry:tt,Fe=pt?tt.features[Bt].properties:Lt?tt.properties:{},je=pt?tt.features[Bt].bbox:Lt?tt.bbox:void 0,lt=pt?tt.features[Bt].id:Lt?tt.id:void 0,Be=Oe?Oe.type==="GeometryCollection":!1,Me=Be?Oe.geometries.length:1,Tt=0;Tt<Me;Tt++){if(me=Be?Oe.geometries[Tt]:Oe,me===null){if(ft(null,ut,Fe,je,lt)===!1)return!1;continue}switch(me.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(ft(me,ut,Fe,je,lt)===!1)return!1;break}case"GeometryCollection":{for(bt=0;bt<me.geometries.length;bt++)if(ft(me.geometries[bt],ut,Fe,je,lt)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}ut++}}function Je(tt,ft,Bt){var bt=Bt;return Le(tt,function(Tt,me,Me,Oe,Be){me===0&&Bt===void 0?bt=Tt:bt=ft(bt,Tt,me,Me,Oe,Be)}),bt}function ze(tt,ft){Le(tt,function(Bt,bt,Tt,me,Me){var Oe=Bt===null?null:Bt.type;switch(Oe){case null:case"Point":case"LineString":case"Polygon":return ft(h.feature(Bt,Tt,{bbox:me,id:Me}),bt,0)===!1?!1:void 0}var Be;switch(Oe){case"MultiPoint":Be="Point";break;case"MultiLineString":Be="LineString";break;case"MultiPolygon":Be="Polygon";break}for(var Fe=0;Fe<Bt.coordinates.length;Fe++){var je=Bt.coordinates[Fe],lt={type:Be,coordinates:je};if(ft(h.feature(lt,Tt),bt,Fe)===!1)return!1}})}function vt(tt,ft,Bt){var bt=Bt;return ze(tt,function(Tt,me,Me){me===0&&Me===0&&Bt===void 0?bt=Tt:bt=ft(bt,Tt,me,Me)}),bt}function At(tt,ft){ze(tt,function(Bt,bt,Tt){var me=0;if(Bt.geometry){var Me=Bt.geometry.type;if(!(Me==="Point"||Me==="MultiPoint")){var Oe,Be=0,Fe=0,je=0;if(v(Bt,function(lt,ut,pt,Lt,St){if(Oe===void 0||bt>Be||Lt>Fe||St>je){Oe=lt,Be=bt,Fe=Lt,je=St,me=0;return}var on=h.lineString([Oe,lt],Bt.properties);if(ft(on,bt,Tt,St,me)===!1)return!1;me++,Oe=lt})===!1)return!1}}})}function Xt(tt,ft,Bt){var bt=Bt,Tt=!1;return At(tt,function(me,Me,Oe,Be,Fe){Tt===!1&&Bt===void 0?bt=me:bt=ft(bt,me,Me,Oe,Be,Fe),Tt=!0}),bt}function yn(tt,ft){if(!tt)throw new Error("geojson is required");ze(tt,function(Bt,bt,Tt){if(Bt.geometry!==null){var me=Bt.geometry.type,Me=Bt.geometry.coordinates;switch(me){case"LineString":if(ft(Bt,bt,Tt,0,0)===!1)return!1;break;case"Polygon":for(var Oe=0;Oe<Me.length;Oe++)if(ft(h.lineString(Me[Oe],Bt.properties),bt,Tt,Oe)===!1)return!1;break}}})}function bn(tt,ft,Bt){var bt=Bt;return yn(tt,function(Tt,me,Me,Oe){me===0&&Bt===void 0?bt=Tt:bt=ft(bt,Tt,me,Me,Oe)}),bt}function ur(tt,ft){if(ft=ft||{},!h.isObject(ft))throw new Error("options is invalid");var Bt=ft.featureIndex||0,bt=ft.multiFeatureIndex||0,Tt=ft.geometryIndex||0,me=ft.segmentIndex||0,Me=ft.properties,Oe;switch(tt.type){case"FeatureCollection":Bt<0&&(Bt=tt.features.length+Bt),Me=Me||tt.features[Bt].properties,Oe=tt.features[Bt].geometry;break;case"Feature":Me=Me||tt.properties,Oe=tt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Oe=tt;break;default:throw new Error("geojson is invalid")}if(Oe===null)return null;var Be=Oe.coordinates;switch(Oe.type){case"Point":case"MultiPoint":return null;case"LineString":return me<0&&(me=Be.length+me-1),h.lineString([Be[me],Be[me+1]],Me,ft);case"Polygon":return Tt<0&&(Tt=Be.length+Tt),me<0&&(me=Be[Tt].length+me-1),h.lineString([Be[Tt][me],Be[Tt][me+1]],Me,ft);case"MultiLineString":return bt<0&&(bt=Be.length+bt),me<0&&(me=Be[bt].length+me-1),h.lineString([Be[bt][me],Be[bt][me+1]],Me,ft);case"MultiPolygon":return bt<0&&(bt=Be.length+bt),Tt<0&&(Tt=Be[bt].length+Tt),me<0&&(me=Be[bt][Tt].length-me-1),h.lineString([Be[bt][Tt][me],Be[bt][Tt][me+1]],Me,ft)}throw new Error("geojson is invalid")}function Ye(tt,ft){if(ft=ft||{},!h.isObject(ft))throw new Error("options is invalid");var Bt=ft.featureIndex||0,bt=ft.multiFeatureIndex||0,Tt=ft.geometryIndex||0,me=ft.coordIndex||0,Me=ft.properties,Oe;switch(tt.type){case"FeatureCollection":Bt<0&&(Bt=tt.features.length+Bt),Me=Me||tt.features[Bt].properties,Oe=tt.features[Bt].geometry;break;case"Feature":Me=Me||tt.properties,Oe=tt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Oe=tt;break;default:throw new Error("geojson is invalid")}if(Oe===null)return null;var Be=Oe.coordinates;switch(Oe.type){case"Point":return h.point(Be,Me,ft);case"MultiPoint":return bt<0&&(bt=Be.length+bt),h.point(Be[bt],Me,ft);case"LineString":return me<0&&(me=Be.length+me),h.point(Be[me],Me,ft);case"Polygon":return Tt<0&&(Tt=Be.length+Tt),me<0&&(me=Be[Tt].length+me),h.point(Be[Tt][me],Me,ft);case"MultiLineString":return bt<0&&(bt=Be.length+bt),me<0&&(me=Be[bt].length+me),h.point(Be[bt][me],Me,ft);case"MultiPolygon":return bt<0&&(bt=Be.length+bt),Tt<0&&(Tt=Be[bt].length+Tt),me<0&&(me=Be[bt][Tt].length-me),h.point(Be[bt][Tt][me],Me,ft)}throw new Error("geojson is invalid")}l.coordAll=de,l.coordEach=v,l.coordReduce=w,l.featureEach=X,l.featureReduce=te,l.findPoint=Ye,l.findSegment=ur,l.flattenEach=ze,l.flattenReduce=vt,l.geomEach=Le,l.geomReduce=Je,l.lineEach=yn,l.lineReduce=bn,l.propEach=C,l.propReduce=j,l.segmentEach=At,l.segmentReduce=Xt}),bo=o(l=>{Object.defineProperty(l,"__esModule",{value:!0});var h=_o();function v(w){var C=[1/0,1/0,-1/0,-1/0];return h.coordEach(w,function(j){C[0]>j[0]&&(C[0]=j[0]),C[1]>j[1]&&(C[1]=j[1]),C[2]<j[0]&&(C[2]=j[0]),C[3]<j[1]&&(C[3]=j[1])}),C}v.default=v,l.default=v}),Lr=o((l,h)=>{var v=fr(),w=qn(),C=_o(),j=bo().default,X=C.featureEach;C.coordEach,w.polygon;var te=w.featureCollection;function de(Le){var Je=new v(Le);return Je.insert=function(ze){if(ze.type!=="Feature")throw new Error("invalid feature");return ze.bbox=ze.bbox?ze.bbox:j(ze),v.prototype.insert.call(this,ze)},Je.load=function(ze){var vt=[];return Array.isArray(ze)?ze.forEach(function(At){if(At.type!=="Feature")throw new Error("invalid features");At.bbox=At.bbox?At.bbox:j(At),vt.push(At)}):X(ze,function(At){if(At.type!=="Feature")throw new Error("invalid features");At.bbox=At.bbox?At.bbox:j(At),vt.push(At)}),v.prototype.load.call(this,vt)},Je.remove=function(ze,vt){if(ze.type!=="Feature")throw new Error("invalid feature");return ze.bbox=ze.bbox?ze.bbox:j(ze),v.prototype.remove.call(this,ze,vt)},Je.clear=function(){return v.prototype.clear.call(this)},Je.search=function(ze){var vt=v.prototype.search.call(this,this.toBBox(ze));return te(vt)},Je.collides=function(ze){return v.prototype.collides.call(this,this.toBBox(ze))},Je.all=function(){var ze=v.prototype.all.call(this);return te(ze)},Je.toJSON=function(){return v.prototype.toJSON.call(this)},Je.fromJSON=function(ze){return v.prototype.fromJSON.call(this,ze)},Je.toBBox=function(ze){var vt;if(ze.bbox)vt=ze.bbox;else if(Array.isArray(ze)&&ze.length===4)vt=ze;else if(Array.isArray(ze)&&ze.length===6)vt=[ze[0],ze[1],ze[3],ze[4]];else if(ze.type==="Feature")vt=j(ze);else if(ze.type==="FeatureCollection")vt=j(ze);else throw new Error("invalid geojson");return{minX:vt[0],minY:vt[1],maxX:vt[2],maxY:vt[3]}},Je}h.exports=de,h.exports.default=de});Array.prototype.findIndex=Array.prototype.findIndex||function(l){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof l!="function")throw new TypeError("callback must be a function");for(var h=Object(this),v=h.length>>>0,w=arguments[1],C=0;C<v;C++)if(l.call(w,h[C],C,h))return C;return-1},Array.prototype.find=Array.prototype.find||function(l){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof l!="function")throw new TypeError("callback must be a function");for(var h=Object(this),v=h.length>>>0,w=arguments[1],C=0;C<v;C++){var j=h[C];if(l.call(w,j,C,h))return j}},typeof Object.assign!="function"&&(Object.assign=function(l){if(l==null)throw new TypeError("Cannot convert undefined or null to object");l=Object(l);for(var h=1;h<arguments.length;h++){var v=arguments[h];if(v!=null)for(var w in v)Object.prototype.hasOwnProperty.call(v,w)&&(l[w]=v[w])}return l}),function(l){l.forEach(function(h){h.hasOwnProperty("remove")||Object.defineProperty(h,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(l,h){if(this==null)throw new TypeError('"this" is null or not defined');var v=Object(this),w=v.length>>>0;if(w===0)return!1;var C=h|0,j=Math.max(C>=0?C:w-Math.abs(C),0);function X(te,de){return te===de||typeof te=="number"&&typeof de=="number"&&isNaN(te)&&isNaN(de)}for(;j<w;){if(X(v[j],l))return!0;j++}return!1}});var Us={version:"2.18.3"},Hn=f(_i()),_r={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},Yr={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex löschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer löschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknüpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Länge",segmentLength:"Segment Länge",area:"Fläche",radius:"Radius",perimeter:"Umfang",height:"Höhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},_n={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},tn={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},si={tooltips:{placeMarker:"Adaugă un punct",firstVertex:"Apasă aici pentru a adăuga primul Vertex",continueLine:"Apasă aici pentru a continua desenul",finishLine:"Apasă pe orice obiect pentru a finisa desenul",finishPoly:"Apasă pe primul obiect pentru a finisa",finishRect:"Apasă pentru a finisa",startCircle:"Apasă pentru a desena un cerc",finishCircle:"Apasă pentru a finisa un cerc",placeCircleMarker:"Adaugă un punct"},actions:{finish:"Termină",cancel:"Anulează",removeLastVertex:"Șterge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaugă o bulină",drawPolyButton:"Desenează un poligon",drawLineButton:"Desenează o linie",drawCircleButton:"Desenează un cerc",drawRectButton:"Desenează un dreptunghi",editButton:"Editează straturile",dragButton:"Mută straturile",cutButton:"Taie straturile",deleteButton:"Șterge straturile",drawCircleMarkerButton:"Desenează marcatorul cercului",snappingButton:"Fixați marcatorul glisat pe alte straturi și vârfuri",pinningButton:"Fixați vârfurile partajate împreună",rotateButton:"Rotiți stratul"}},co={tooltips:{placeMarker:"Нажмите, чтобы нанести маркер",firstVertex:"Нажмите, чтобы нанести первый объект",continueLine:"Нажмите, чтобы продолжить рисование",finishLine:"Нажмите любой существующий маркер для завершения",finishPoly:"Выберите первую точку, чтобы закончить",finishRect:"Нажмите, чтобы закончить",startCircle:"Нажмите, чтобы добавить центр круга",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Нажмите, чтобы нанести круговой маркер"},actions:{finish:"Завершить",cancel:"Отменить",removeLastVertex:"Отменить последнее действие"},buttonTitles:{drawMarkerButton:"Добавить маркер",drawPolyButton:"Рисовать полигон",drawLineButton:"Рисовать кривую",drawCircleButton:"Рисовать круг",drawRectButton:"Рисовать прямоугольник",editButton:"Редактировать слой",dragButton:"Перенести слой",cutButton:"Вырезать слой",deleteButton:"Удалить слой",drawCircleMarkerButton:"Добавить круговой маркер",snappingButton:"Привязать перетаскиваемый маркер к другим слоям и вершинам",pinningButton:"Связать общие точки вместе",rotateButton:"Поворот слоя"}},wo={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vértice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del círculo",finishCircle:"Presiona para finalizar el círculo",placeCircleMarker:"Presiona para colocar un marcador de círculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar último vértice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polígono",drawLineButton:"Dibujar Línea",drawCircleButton:"Dibujar Círculo",drawRectButton:"Dibujar Rectángulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Círculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vértices",pinningButton:"Fijar juntos los vértices compartidos",rotateButton:"Rotar capa"}},Pi={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beëindigen",finishPoly:"Klik op het eerst punt om te beëindigen",finishRect:"Klik om te beëindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beëindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},cs={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer à dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"Éditer des calques",dragButton:"Déplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"Épingler ensemble les sommets partagés",rotateButton:"Tourner des calques"}},Xo={tooltips:{placeMarker:"单击放置标记",firstVertex:"单击放置首个顶点",continueLine:"单击继续绘制",finishLine:"单击任何存在的标记以完成",finishPoly:"单击第一个标记以完成",finishRect:"单击完成",startCircle:"单击放置圆心",finishCircle:"单击完成圆形",placeCircleMarker:"点击放置圆形标记"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最后的顶点"},buttonTitles:{drawMarkerButton:"绘制标记",drawPolyButton:"绘制多边形",drawLineButton:"绘制线段",drawCircleButton:"绘制圆形",drawRectButton:"绘制长方形",editButton:"编辑图层",dragButton:"拖拽图层",cutButton:"剪切图层",deleteButton:"删除图层",drawCircleMarkerButton:"画圆圈标记",snappingButton:"将拖动的标记捕捉到其他图层和顶点",pinningButton:"将共享顶点固定在一起",rotateButton:"旋转图层"}},Io={tooltips:{placeMarker:"單擊放置標記",firstVertex:"單擊放置第一個頂點",continueLine:"單擊繼續繪製",finishLine:"單擊任何存在的標記以完成",finishPoly:"單擊第一個標記以完成",finishRect:"單擊完成",startCircle:"單擊放置圓心",finishCircle:"單擊完成圓形",placeCircleMarker:"點擊放置圓形標記"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最後一個頂點"},buttonTitles:{drawMarkerButton:"放置標記",drawPolyButton:"繪製多邊形",drawLineButton:"繪製線段",drawCircleButton:"繪製圓形",drawRectButton:"繪製方形",editButton:"編輯圖形",dragButton:"移動圖形",cutButton:"裁切圖形",deleteButton:"刪除圖形",drawCircleMarkerButton:"畫圓圈標記",snappingButton:"將拖動的標記對齊到其他圖層和頂點",pinningButton:"將共享頂點固定在一起",rotateButton:"旋轉圖形"}},hi={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vértice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do círculo",finishCircle:"Clique para finalizar o círculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover último vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},Bs={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vértice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do círculo",finishCircle:"Clique para terminar o círculo",placeCircleMarker:"Clique para colocar marcador de círculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover Último Vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},Ro={tooltips:{placeMarker:"Kliknij, aby umieścić znacznik",firstVertex:"Kliknij, aby umieścić pierwszy wierzchołek",continueLine:"Kliknij, aby kontynuować rysowanie",finishLine:"Kliknij dowolny istniejący znacznik, aby zakończyć",finishPoly:"Kliknij pierwszy znacznik, aby zakończyć",finishRect:"Kliknij, aby zakończyć",startCircle:"Kliknij, aby umieścić środek okręgu",finishCircle:"Kliknij, aby zakończyć okrąg",placeCircleMarker:"Kliknij, aby umieścić znacznik okręgu",placeText:"Kliknij, aby umieścić tekst"},actions:{finish:"Zakończ",cancel:"Anuluj",removeLastVertex:"Usuń ostatni wierzchołek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokąt",drawLineButton:"Rysuj linię",drawCircleButton:"Rysuj okrąg",drawRectButton:"Rysuj prostokąt",editButton:"Edytuj warstwy",dragButton:"Przeciągnij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usuń warstwy",drawCircleMarkerButton:"Rysuj znacznik okrągły",snappingButton:"Przyciągnij przenoszony znacznik do innych warstw i wierzchołków",pinningButton:"Przypnij wspólne wierzchołki razem",rotateButton:"Obróć warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne śledzenie linii"},measurements:{totalLength:"Długość",segmentLength:"Długość odcinka",area:"Obszar",radius:"Promień",perimeter:"Obwód",height:"Wysokość",width:"Szerokość",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},Xi={tooltips:{placeMarker:"Klicka för att placera markör",firstVertex:"Klicka för att placera första hörnet",continueLine:"Klicka för att fortsätta rita",finishLine:"Klicka på en existerande punkt för att slutföra",finishPoly:"Klicka på den första punkten för att slutföra",finishRect:"Klicka för att slutföra",startCircle:"Klicka för att placera cirkelns centrum",finishCircle:"Klicka för att slutföra cirkeln",placeCircleMarker:"Klicka för att placera cirkelmarkör"},actions:{finish:"Slutför",cancel:"Avbryt",removeLastVertex:"Ta bort sista hörnet"},buttonTitles:{drawMarkerButton:"Rita Markör",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkör",snappingButton:"Snäpp dra markören till andra lager och hörn",pinningButton:"Fäst delade hörn tillsammans",rotateButton:"Rotera lagret"}},xo={tooltips:{placeMarker:"Κάντε κλικ για να τοποθετήσετε Δείκτη",firstVertex:"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο",continueLine:"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε",finishLine:"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί",finishPoly:"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε",finishRect:"Κάντε κλικ για να τελειώσετε",startCircle:"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου",finishCircle:"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο",placeCircleMarker:"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},actions:{finish:"Τέλος",cancel:"Ακύρωση",removeLastVertex:"Κατάργηση τελευταίου σημείου"},buttonTitles:{drawMarkerButton:"Σχεδίαση Δείκτη",drawPolyButton:"Σχεδίαση Πολυγώνου",drawLineButton:"Σχεδίαση Γραμμής",drawCircleButton:"Σχεδίαση Κύκλου",drawRectButton:"Σχεδίαση Ορθογωνίου",editButton:"Επεξεργασία Επιπέδων",dragButton:"Μεταφορά Επιπέδων",cutButton:"Αποκοπή Επιπέδων",deleteButton:"Κατάργηση Επιπέδων",drawCircleMarkerButton:"Σχεδίαση Κυκλικού Δείκτη",snappingButton:"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές",pinningButton:"Περικοπή κοινών κορυφών μαζί",rotateButton:"Περιστρέψτε το στρώμα"}},Vs={tooltips:{placeMarker:"Kattintson a jelölő elhelyezéséhez",firstVertex:"Kattintson az első pont elhelyezéséhez",continueLine:"Kattintson a következő pont elhelyezéséhez",finishLine:"A befejezéshez kattintson egy meglévő pontra",finishPoly:"A befejezéshez kattintson az első pontra",finishRect:"Kattintson a befejezéshez",startCircle:"Kattintson a kör középpontjának elhelyezéséhez",finishCircle:"Kattintson a kör befejezéséhez",placeCircleMarker:"Kattintson a körjelölő elhelyezéséhez"},actions:{finish:"Befejezés",cancel:"Mégse",removeLastVertex:"Utolsó pont eltávolítása"},buttonTitles:{drawMarkerButton:"Jelölő rajzolása",drawPolyButton:"Poligon rajzolása",drawLineButton:"Vonal rajzolása",drawCircleButton:"Kör rajzolása",drawRectButton:"Négyzet rajzolása",editButton:"Elemek szerkesztése",dragButton:"Elemek mozgatása",cutButton:"Elemek vágása",deleteButton:"Elemek törlése",drawCircleMarkerButton:"Kör jelölő rajzolása",snappingButton:"Kapcsolja a jelöltőt másik elemhez vagy ponthoz",pinningButton:"Közös pontok összekötése",rotateButton:"Fólia elforgatása"}},ya={tooltips:{placeMarker:"Tryk for at placere en markør",firstVertex:"Tryk for at placere det første punkt",continueLine:"Tryk for at fortsætte linjen",finishLine:"Tryk på et eksisterende punkt for at afslutte",finishPoly:"Tryk på det første punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkør"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markør",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Træk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkør",snappingButton:"Fastgør trukket markør til andre elementer",pinningButton:"Sammenlæg delte elementer",rotateButton:"Roter laget"}},Qi={tooltips:{placeMarker:"Klikk for å plassere punkt",firstVertex:"Klikk for å plassere første punkt",continueLine:"Klikk for å tegne videre",finishLine:"Klikk på et eksisterende punkt for å fullføre",finishPoly:"Klikk første punkt for å fullføre",finishRect:"Klikk for å fullføre",startCircle:"Klikk for å sette sirkel midtpunkt",finishCircle:"Klikk for å fullføre sirkel",placeCircleMarker:"Klikk for å plassere sirkel",placeText:"Klikk for å plassere tekst"},actions:{finish:"Fullfør",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotér objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalér objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Område",radius:"Radius",perimeter:"Omriss",height:"Høyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkør"}},ol={tooltips:{placeMarker:"کلیک برای جانمایی نشان",firstVertex:"کلیک برای رسم اولین رأس",continueLine:"کلیک برای ادامه رسم",finishLine:"کلیک روی هر نشان موجود برای پایان",finishPoly:"کلیک روی اولین نشان برای پایان",finishRect:"کلیک برای پایان",startCircle:"کلیک برای رسم مرکز دایره",finishCircle:"کلیک برای پایان رسم دایره",placeCircleMarker:"کلیک برای رسم نشان دایره",placeText:"کلیک برای نوشتن متن"},actions:{finish:"پایان",cancel:"لفو",removeLastVertex:"حذف آخرین رأس"},buttonTitles:{drawMarkerButton:"درج نشان",drawPolyButton:"رسم چندضلعی",drawLineButton:"رسم خط",drawCircleButton:"رسم دایره",drawRectButton:"رسم چهارضلعی",editButton:"ویرایش لایه‌ها",dragButton:"جابجایی لایه‌ها",cutButton:"برش لایه‌ها",deleteButton:"حذف لایه‌ها",drawCircleMarkerButton:"رسم نشان دایره",snappingButton:"نشانگر را به لایه‌ها و رئوس دیگر بکشید",pinningButton:"رئوس مشترک را با هم پین کنید",rotateButton:"چرخش لایه",drawTextButton:"رسم متن",scaleButton:"مقیاس‌گذاری",autoTracingButton:"ردیاب خودکار"},measurements:{totalLength:"طول",segmentLength:"طول بخش",area:"ناحیه",radius:"شعاع",perimeter:"محیط",height:"ارتفاع",width:"عرض",coordinates:"موقعیت",coordinatesMarker:"موقعیت نشان"}},_a={tooltips:{placeMarker:"Натисніть, щоб нанести маркер",firstVertex:"Натисніть, щоб нанести першу вершину",continueLine:"Натисніть, щоб продовжити малювати",finishLine:"Натисніть будь-який існуючий маркер для завершення",finishPoly:"Виберіть перший маркер, щоб завершити",finishRect:"Натисніть, щоб завершити",startCircle:"Натисніть, щоб додати центр кола",finishCircle:"Натисніть, щоб завершити коло",placeCircleMarker:"Натисніть, щоб нанести круговий маркер"},actions:{finish:"Завершити",cancel:"Відмінити",removeLastVertex:"Видалити попередню вершину"},buttonTitles:{drawMarkerButton:"Малювати маркер",drawPolyButton:"Малювати полігон",drawLineButton:"Малювати криву",drawCircleButton:"Малювати коло",drawRectButton:"Малювати прямокутник",editButton:"Редагувати шари",dragButton:"Перенести шари",cutButton:"Вирізати шари",deleteButton:"Видалити шари",drawCircleMarkerButton:"Малювати круговий маркер",snappingButton:"Прив’язати перетягнутий маркер до інших шарів та вершин",pinningButton:"Зв'язати спільні вершини разом",rotateButton:"Повернути шар"}},pr={tooltips:{placeMarker:"İşaretçi yerleştirmek için tıklayın",firstVertex:"İlk tepe noktasını yerleştirmek için tıklayın",continueLine:"Çizime devam etmek için tıklayın",finishLine:"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın",finishPoly:"Bitirmek için ilk işaretçiyi tıklayın",finishRect:"Bitirmek için tıklayın",startCircle:"Daire merkezine yerleştirmek için tıklayın",finishCircle:"Daireyi bitirmek için tıklayın",placeCircleMarker:"Daire işaretçisi yerleştirmek için tıklayın"},actions:{finish:"Bitir",cancel:"İptal",removeLastVertex:"Son köşeyi kaldır"},buttonTitles:{drawMarkerButton:"Çizim İşaretçisi",drawPolyButton:"Çokgenler çiz",drawLineButton:"Çoklu çizgi çiz",drawCircleButton:"Çember çiz",drawRectButton:"Dikdörtgen çiz",editButton:"Katmanları düzenle",dragButton:"Katmanları sürükle",cutButton:"Katmanları kes",deleteButton:"Katmanları kaldır",drawCircleMarkerButton:"Daire işaretçisi çiz",snappingButton:"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır",pinningButton:"Paylaşılan köşeleri birbirine sabitle",rotateButton:"Katmanı döndür"}},br={tooltips:{placeMarker:"Kliknutím vytvoříte značku",firstVertex:"Kliknutím vytvoříte první objekt",continueLine:"Kliknutím pokračujte v kreslení",finishLine:"Kliknutí na libovolnou existující značku pro dokončení",finishPoly:"Vyberte první bod pro dokončení",finishRect:"Klikněte pro dokončení",startCircle:"Kliknutím přidejte střed kruhu",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Kliknutím nastavte poloměr"},actions:{finish:"Dokončit",cancel:"Zrušit",removeLastVertex:"Zrušit poslední akci"},buttonTitles:{drawMarkerButton:"Přidat značku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit křivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdélník",editButton:"Upravit vrstvu",dragButton:"Přeneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Přidat kruhovou značku",snappingButton:"Navázat tažnou značku k dalším vrstvám a vrcholům",pinningButton:"Spojit společné body dohromady",rotateButton:"Otočte vrstvu"}},Jr={tooltips:{placeMarker:"クリックしてマーカーを配置",firstVertex:"クリックして最初の頂点を配置",continueLine:"クリックして描画を続ける",finishLine:"任意のマーカーをクリックして終了",finishPoly:"最初のマーカーをクリックして終了",finishRect:"クリックして終了",startCircle:"クリックして円の中心を配置",finishCircle:"クリックして円の描画を終了",placeCircleMarker:"クリックして円マーカーを配置",placeText:"クリックしてテキストを配置"},actions:{finish:"終了",cancel:"キャンセル",removeLastVertex:"最後の頂点を削除"},buttonTitles:{drawMarkerButton:"マーカーを描画",drawPolyButton:"ポリゴンを描画",drawLineButton:"折れ線を描画",drawCircleButton:"円を描画",drawRectButton:"矩形を描画",editButton:"レイヤーを編集",dragButton:"レイヤーをドラッグ",cutButton:"レイヤーを切り取り",deleteButton:"レイヤーを削除",drawCircleMarkerButton:"円マーカーを描画",snappingButton:"ドラッグしたマーカーを他のレイヤーや頂点にスナップする",pinningButton:"共有する頂点を同時に動かす",rotateButton:"レイヤーを回転",drawTextButton:"テキストを描画"}},Tr={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmäisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtämistä",finishLine:"Klikkaa olemassa olevaa merkkiä lopettaaksesi",finishPoly:"Klikkaa ensimmäistä merkkiä lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrän keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrän",placeCircleMarker:"Klikkaa asettaaksesi ympyrämerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirrä merkkejä",drawPolyButton:"Piirrä monikulmioita",drawLineButton:"Piirrä viivoja",drawCircleButton:"Piirrä ympyrä",drawRectButton:"Piirrä neliskulmioita",editButton:"Muokkaa",dragButton:"Siirrä",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirrä ympyrämerkki",snappingButton:"Kiinnitä siirrettävä merkki toisiin muotoihin",pinningButton:"Kiinnitä jaetut muodot yhteen",rotateButton:"Käännä",drawTextButton:"Piirrä tekstiä"}},Fo={tooltips:{placeMarker:"마커 위치를 클릭하세요",firstVertex:"첫번째 꼭지점 위치을 클릭하세요",continueLine:"계속 그리려면 클릭하세요",finishLine:"끝내려면 기존 마커를 클릭하세요",finishPoly:"끝내려면 처음 마커를 클릭하세요",finishRect:"끝내려면 클릭하세요",startCircle:"원의 중심이 될 위치를 클릭하세요",finishCircle:"원을 끝내려면 클릭하세요",placeCircleMarker:"원 마커 위치를 클릭하세요",placeText:"텍스트 위치를 클릭하세요"},actions:{finish:"끝내기",cancel:"취소",removeLastVertex:"마지막 꼭지점 제거"},buttonTitles:{drawMarkerButton:"마커 그리기",drawPolyButton:"다각형 그리기",drawLineButton:"다각선 그리기",drawCircleButton:"원 그리기",drawRectButton:"직사각형 그리기",editButton:"레이어 편집하기",dragButton:"레이어 끌기",cutButton:"레이어 자르기",deleteButton:"레이어 제거하기",drawCircleMarkerButton:"원 마커 그리기",snappingButton:"잡아끈 마커를 다른 레이어 및 꼭지점에 들러붙게 하기",pinningButton:"공유 꼭지점을 함께 찍기",rotateButton:"레이어 회전하기",drawTextButton:"텍스트 그리기"}},sl={tooltips:{placeMarker:"Маркерди жайгаштыруу үчүн басыңыз",firstVertex:"Биринчи чокуну жайгаштырууну үчүн басыңыз",continueLine:"Сүрөт тартууну улантуу үчүн басыңыз",finishLine:"Аяктоо үчүн учурдагы маркерди басыңыз",finishPoly:"Бүтүрүү үчүн биринчи маркерди басыңыз",finishRect:"Бүтүрүү үчүн басыңыз",startCircle:"Айлананын борборун жайгаштырууну үчүн басыңыз",finishCircle:"Айлананы бүтүрүү үчүн басыңыз",placeCircleMarker:"Тегерек маркерди жайгаштыруу үчүн басыңыз",placeText:"Текстти жайгаштыруу үчүн басыңыз"},actions:{finish:"Аягы",cancel:"Жок кылуу",removeLastVertex:"Акыркы чокуну өчүрүү"},buttonTitles:{drawMarkerButton:"Маркерди чизуу",drawPolyButton:"Полигон чизуу",drawLineButton:"Полилиния чизуу",drawCircleButton:"Дайынды чизуу",drawRectButton:"Прямоугольник чизуу",editButton:"Слоопту түзөтүү",dragButton:"Слоопту карап сүйлөү",cutButton:"Слооптун башын кесүү",deleteButton:"Слооптун өчүрүү",drawCircleMarkerButton:"Дайынды маркерди чизуу",snappingButton:"Башка слооптордун жана вертекстердин арасына чекилдөө",pinningButton:"Бөлүшкөн вертекстерди бирге тутуштуруу",rotateButton:"Слооптун өзгөртүү",drawTextButton:"Текст чизуу",scaleButton:"Слооптун өлчөмүн өзгөртүү",autoTracingButton:"Автоматтык тизмеги чизуу"},measurements:{totalLength:"Узундук",segmentLength:"Сегмент узундугу",area:"Аймак",radius:"Радиус",perimeter:"Периметр",height:"Диаметр",width:"Кенчилик",coordinates:"Координаттар",coordinatesMarker:"Маркердин координаттары"}},al=Bs,Hs={en:_r,de:Yr,it:_n,id:tn,ro:si,ru:co,es:wo,nl:Pi,fr:cs,pt:al,pt_br:hi,pt_pt:Bs,zh:Xo,zh_tw:Io,pl:Ro,sv:Xi,el:xo,hu:Vs,da:ya,no:Qi,fa:ol,ua:_a,tr:pr,cz:br,ja:Jr,fi:Tr,ko:Fo,ky:sl},Va={_globalEditModeEnabled:!1,enableGlobalEditMode(l){let h={...l};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(v=>{this._isRelevantForEdit(v)&&v.pm.enable(h)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(l=>{l.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(l=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(l)},handleLayerAdditionInGlobalEditMode(){let l=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let h in l){let v=l[h];this._isRelevantForEdit(v)&&v.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:l}){this._addedLayersEdit[L.stamp(l)]=l},_isRelevantForEdit(l){return l.pm&&!(l instanceof L.LayerGroup)&&(!L.PM.optIn&&!l.options.pmIgnore||L.PM.optIn&&l.options.pmIgnore===!1)&&!l._pmTempLayer&&l.pm.options.allowEditing}},bu=Va,kl={_globalDragModeEnabled:!1,enableGlobalDragMode(){let l=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},l.forEach(h=>{this._isRelevantForDrag(h)&&h.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let l=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,l.forEach(h=>{h.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let l=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let h in l){let v=l[h];this._isRelevantForDrag(v)&&v.pm.enableLayerDrag()}},_layerAddedDrag({layer:l}){this._addedLayersDrag[L.stamp(l)]=l},_isRelevantForDrag(l){return l.pm&&!(l instanceof L.LayerGroup)&&(!L.PM.optIn&&!l.options.pmIgnore||L.PM.optIn&&l.options.pmIgnore===!1)&&!l._pmTempLayer&&l.pm.options.draggable}},Sr=kl,Gr={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(l=>{this._isRelevantForRemoval(l)&&(l.pm.enabled()&&l.pm.disable(),l.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(l=>{l.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(l){let h=l.target;this._isRelevantForRemoval(h)&&!h.pm.dragging()&&(h.removeFrom(this.map.pm._getContainingLayer()),h.remove(),h instanceof L.LayerGroup?(this._fireRemoveLayerGroup(h),this._fireRemoveLayerGroup(this.map,h)):(h.pm._fireRemove(h),h.pm._fireRemove(this.map,h)))},_isRelevantForRemoval(l){return l.pm&&!(l instanceof L.LayerGroup)&&(!L.PM.optIn&&!l.options.pmIgnore||L.PM.optIn&&l.options.pmIgnore===!1)&&!l._pmTempLayer&&l.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let l=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let h in l){let v=l[h];this._isRelevantForRemoval(v)&&(v.pm.enabled()&&v.pm.disable(),v.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:l}){this._addedLayersRemoval[L.stamp(l)]=l}},Ha=Gr,Zu={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(l=>l instanceof L.Polyline).forEach(l=>{this._isRelevantForRotate(l)&&l.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(l=>l instanceof L.Polyline).forEach(l=>{l.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(l){return l.pm&&l instanceof L.Polyline&&!(l instanceof L.LayerGroup)&&(!L.PM.optIn&&!l.options.pmIgnore||L.PM.optIn&&l.options.pmIgnore===!1)&&!l._pmTempLayer&&l.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let l=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let h in l){let v=l[h];this._isRelevantForRemoval(v)&&v.pm.enableRotate()}},_layerAddedRotate({layer:l}){this._addedLayersRotate[L.stamp(l)]=l}},Tl=Zu,Xl=f(_i()),ll={_fireDrawStart(l="Draw",h={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},l,h)},_fireDrawEnd(l="Draw",h={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},l,h)},_fireCreate(l,h="Draw",v={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:l,layer:l},h,v)},_fireCenterPlaced(l="Draw",h={}){let v=l==="Draw"?this._layer:void 0,w=l!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:v,layer:w,latlng:this._layer.getLatLng()},l,h)},_fireCut(l,h,v,w="Draw",C={}){this.__fire(l,"pm:cut",{shape:this._shape,layer:h,originalLayer:v},w,C)},_fireEdit(l=this._layer,h="Edit",v={}){this.__fire(l,"pm:edit",{layer:this._layer,shape:this.getShape()},h,v)},_fireEnable(l="Edit",h={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},l,h)},_fireDisable(l="Edit",h={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},l,h)},_fireUpdate(l="Edit",h={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},l,h)},_fireMarkerDragStart(l,h=void 0,v="Edit",w={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:l,shape:this.getShape(),indexPath:h},v,w)},_fireMarkerDrag(l,h=void 0,v="Edit",w={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:l,shape:this.getShape(),indexPath:h},v,w)},_fireMarkerDragEnd(l,h=void 0,v=void 0,w="Edit",C={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:l,shape:this.getShape(),indexPath:h,intersectionReset:v},w,C)},_fireDragStart(l="Edit",h={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},l,h)},_fireDrag(l,h="Edit",v={}){this.__fire(this._layer,"pm:drag",{...l,shape:this.getShape()},h,v)},_fireDragEnd(l="Edit",h={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},l,h)},_fireDragEnable(l="Edit",h={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},l,h)},_fireDragDisable(l="Edit",h={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},l,h)},_fireRemove(l,h=l,v="Edit",w={}){this.__fire(l,"pm:remove",{layer:h,shape:this.getShape()},v,w)},_fireVertexAdded(l,h,v,w="Edit",C={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:l,indexPath:h,latlng:v,shape:this.getShape()},w,C)},_fireVertexRemoved(l,h,v="Edit",w={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:l,indexPath:h,shape:this.getShape()},v,w)},_fireVertexClick(l,h,v="Edit",w={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:l,indexPath:h,shape:this.getShape()},v,w)},_fireIntersect(l,h=this._layer,v="Edit",w={}){this.__fire(h,"pm:intersect",{layer:this._layer,intersection:l,shape:this.getShape()},v,w)},_fireLayerReset(l,h,v="Edit",w={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:l,indexPath:h,shape:this.getShape()},v,w)},_fireChange(l,h="Edit",v={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:l,shape:this.getShape()},h,v)},_fireTextChange(l,h="Edit",v={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:l,shape:this.getShape()},h,v)},_fireTextFocus(l="Edit",h={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},l,h)},_fireTextBlur(l="Edit",h={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},l,h)},_fireSnapDrag(l,h,v="Snapping",w={}){this.__fire(l,"pm:snapdrag",h,v,w)},_fireSnap(l,h,v="Snapping",w={}){this.__fire(l,"pm:snap",h,v,w)},_fireUnsnap(l,h,v="Snapping",w={}){this.__fire(l,"pm:unsnap",h,v,w)},_fireRotationEnable(l,h,v="Rotation",w={}){this.__fire(l,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},v,w)},_fireRotationDisable(l,h="Rotation",v={}){this.__fire(l,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},h,v)},_fireRotationStart(l,h,v="Rotation",w={}){this.__fire(l,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:h},v,w)},_fireRotation(l,h,v,w=this._rotationLayer,C="Rotation",j={}){this.__fire(l,"pm:rotate",{layer:w,helpLayer:this._layer,startAngle:this._startAngle,angle:w.pm.getAngle(),angleDiff:h,oldLatLngs:v,newLatLngs:w.getLatLngs()},C,j)},_fireRotationEnd(l,h,v,w="Rotation",C={}){this.__fire(l,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:h,angle:this._rotationLayer.pm.getAngle(),originLatLngs:v,newLatLngs:this._rotationLayer.getLatLngs()},w,C)},_fireActionClick(l,h,v,w="Toolbar",C={}){this.__fire(this._map,"pm:actionclick",{text:l.text,action:l,btnName:h,button:v},w,C)},_fireButtonClick(l,h,v="Toolbar",w={}){this.__fire(this._map,"pm:buttonclick",{btnName:l,button:h},v,w)},_fireLangChange(l,h,v,w,C="Global",j={}){this.__fire(this.map,"pm:langchange",{oldLang:l,activeLang:h,fallback:v,translations:w},C,j)},_fireGlobalDragModeToggled(l,h="Global",v={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:l,map:this.map},h,v)},_fireGlobalEditModeToggled(l,h="Global",v={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:l,map:this.map},h,v)},_fireGlobalRemovalModeToggled(l,h="Global",v={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:l,map:this.map},h,v)},_fireGlobalCutModeToggled(l="Global",h={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},l,h)},_fireGlobalDrawModeToggled(l="Global",h={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},l,h)},_fireGlobalRotateModeToggled(l="Global",h={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},l,h)},_fireRemoveLayerGroup(l,h=l,v="Edit",w={}){this.__fire(l,"pm:remove",{layer:h,shape:void 0},v,w)},_fireKeyeventEvent(l,h,v,w="Global",C={}){this.__fire(this.map,"pm:keyevent",{event:l,eventType:h,focusOn:v},w,C)},__fire(l,h,v,w,C={}){v=(0,Xl.default)(v,C,{source:w}),L.PM.Utils._fireEvent(l,h,v)}},Dl=ll,Ql=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(l){this.map=l,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),l.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(l){let h="document";this.map.getContainer().contains(l.target)&&(h="map");let v={event:l,eventType:l.type,focusOn:h};this._lastEvents[l.type]=v,this._lastEvents.current=v,this.map.pm._fireKeyeventEvent(l,l.type,h)},_onBlur(l){l.altKey=!1;let h={event:l,eventType:l.type,focusOn:"document"};this._lastEvents[l.type]=h,this._lastEvents.current=h},getLastKeyEvent(l="current"){return this._lastEvents[l]},isShiftKeyPressed(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.shiftKey},isAltKeyPressed(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.altKey},isCtrlKeyPressed(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.ctrlKey},isMetaKeyPressed(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.metaKey},getPressedKey(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.key}}),Xr=Ql,eo=f(ui());function or(l){let h=L.PM.activeLang;return(0,eo.default)(Hs[h],l)||(0,eo.default)(Hs.en,l)||l}function to(l){for(let h=0;h<l.length;h+=1){let v=l[h];if(Array.isArray(v)){if(to(v))return!0}else if(v!=null&&v!=="")return!0}return!1}function ul(l){return l.reduce((h,v)=>{if(v.length!==0){let w=Array.isArray(v)?ul(v):v;Array.isArray(w)?w.length!==0&&h.push(w):h.push(w)}return h},[])}function ba(l,h,v){let w={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:C,b:j,f:X}=w,te=l.lng,de=l.lat,Le=v,Je=Math.PI,ze=h*Je/180,vt=Math.sin(ze),At=Math.cos(ze),Xt=(1-X)*Math.tan(de*Je/180),yn=1/Math.sqrt(1+Xt*Xt),bn=Xt*yn,ur=Math.atan2(Xt,At),Ye=yn*vt,tt=1-Ye*Ye,ft=tt*(C*C-j*j)/(j*j),Bt=1+ft/16384*(4096+ft*(-768+ft*(320-175*ft))),bt=ft/1024*(256+ft*(-128+ft*(74-47*ft))),Tt=Le/(j*Bt),me=2*Math.PI,Me,Oe,Be;for(;Math.abs(Tt-me)>1e-12;){Me=Math.cos(2*ur+Tt),Oe=Math.sin(Tt),Be=Math.cos(Tt);let on=bt*Oe*(Me+bt/4*(Be*(-1+2*Me*Me)-bt/6*Me*(-3+4*Oe*Oe)*(-3+4*Me*Me)));me=Tt,Tt=Le/(j*Bt)+on}let Fe=bn*Oe-yn*Be*At,je=Math.atan2(bn*Be+yn*Oe*At,(1-X)*Math.sqrt(Ye*Ye+Fe*Fe)),lt=Math.atan2(Oe*vt,yn*Be-bn*Oe*At),ut=X/16*tt*(4+X*(4-3*tt)),pt=lt-(1-ut)*X*Ye*(Tt+ut*Oe*(Me+ut*Be*(-1+2*Me*Me))),Lt=te+pt*180/Je,St=je*180/Je;return L.latLng(Lt,St)}function $i(l,h,v,w,C=!0){let j,X,te,de=[];for(let Le=0;Le<v;Le+=1){if(C)j=Le*360/v+w,X=ba(l,j,h),te=L.latLng(X.lng,X.lat);else{let Je=l.lat+Math.cos(2*Le*Math.PI/v)*h,ze=l.lng+Math.sin(2*Le*Math.PI/v)*h;te=L.latLng(Je,ze)}de.push(te)}return de}function eu(l,h,v){h=(h+360)%360;let w=Math.PI/180,C=180/Math.PI,{R:j}=L.CRS.Earth,X=l.lng*w,te=l.lat*w,de=h*w,Le=Math.sin(te),Je=Math.cos(te),ze=Math.cos(v/j),vt=Math.sin(v/j),At=Math.asin(Le*ze+Je*vt*Math.cos(de)),Xt=X+Math.atan2(Math.sin(de)*vt*Je,ze-Le*Math.sin(At));Xt*=C;let yn=Xt-360,bn=Xt<-180?Xt+360:Xt;return Xt=Xt>180?yn:bn,L.latLng([At*C,Xt])}function ta(l,h,v){let w=l.latLngToContainerPoint(h),C=l.latLngToContainerPoint(v),j=Math.atan2(C.y-w.y,C.x-w.x)*180/Math.PI+90;return j+=j<0?360:0,j}function Nl(l,h,v,w){let C=ta(l,h,v);return eu(h,C,w)}function Bl(l,h,v="asc"){if(!h||Object.keys(h).length===0)return(de,Le)=>de-Le;let w=Object.keys(h),C,j=w.length-1,X={};for(;j>=0;)C=w[j],X[C.toLowerCase()]=h[C],j-=1;function te(de){if(de instanceof L.Marker)return"Marker";if(de instanceof L.Circle)return"Circle";if(de instanceof L.CircleMarker)return"CircleMarker";if(de instanceof L.Rectangle)return"Rectangle";if(de instanceof L.Polygon)return"Polygon";if(de instanceof L.Polyline)return"Line"}return(de,Le)=>{let Je,ze;if(Je=te(de.layer).toLowerCase(),ze=te(Le.layer).toLowerCase(),!Je||!ze)return 0;let vt=Je in X?X[Je]:Number.MAX_SAFE_INTEGER,At=ze in X?X[ze]:Number.MAX_SAFE_INTEGER,Xt=0;return vt<At?Xt=-1:vt>At&&(Xt=1),v==="desc"?Xt*-1:Xt}}function Os(l,h=l.getLatLngs()){return l instanceof L.Polygon?L.polygon(h).getLatLngs():L.polyline(h).getLatLngs()}function Ol(l,h){var v,w,C,j;if((w=(v=h.options.crs)==null?void 0:v.projection)!=null&&w.MAX_LATITUDE){let X=(j=(C=h.options.crs)==null?void 0:C.projection)==null?void 0:j.MAX_LATITUDE;l.lat=Math.max(Math.min(X,l.lat),-X)}return l}function bi(l){return l.options.renderer||l._map&&(l._map._getPaneRenderer(l.options.pane)||l._map.options.renderer||l._map._renderer)||l._renderer}var Ku=L.Class.extend({includes:[bu,Sr,Ha,Tl,Dl],initialize(l){this.map=l,this.Draw=new L.PM.Draw(l),this.Toolbar=new L.PM.Toolbar(l),this.Keyboard=Xr(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(l)},setLang(l="en",h,v="en"){if(l=l.trim().toLowerCase(),!/^[a-z]{2}$/.test(l)){let C=l.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(C){let j=[`${C[1]}_${C[2]}`,`${C[1]}`];for(let X of j)if(Hs[X]){l=X;break}}}let w=L.PM.activeLang;h&&(Hs[l]=(0,Hn.default)(Hs[v],h)),L.PM.activeLang=l,this.map.pm.Toolbar.reinit(),this._fireLangChange(w,l,v,Hs[l])},addControls(l){this.Toolbar.addControls(l)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(l="Polygon",h){l==="Poly"&&(l="Polygon"),this.Draw.enable(l,h)},disableDraw(l="Polygon"){l==="Poly"&&(l="Polygon"),this.Draw.disable(l)},setPathOptions(l,h={}){let v=h.ignoreShapes||[],w=h.merge||!1;this.map.pm.Draw.shapes.forEach(C=>{v.indexOf(C)===-1&&this.map.pm.Draw[C].setPathOptions(l,w)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(l){let h=(0,Hn.default)(this.globalOptions,l);h.editable&&(h.resizeableCircleMarker=h.editable,delete h.editable);let v=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!h.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),v=!0);let w=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!h.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),w=!0),this.map.pm.Draw.shapes.forEach(C=>{this.map.pm.Draw[C].setOptions(h)}),v&&this.map.pm.Draw.CircleMarker.enable(),w&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(C=>{C.pm.setOptions(h)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=h,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(l=>{l.pm.enabled()&&l.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(l){return this.Draw.Cut.enable(l)},toggleGlobalCutMode(l){return this.Draw.Cut.toggle(l)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(l=!1){let h=L.PM.Utils.findLayers(this.map);if(!l)return h;let v=L.featureGroup();return v._pmTempLayer=!0,h.forEach(w=>{v.addLayer(w)}),v},getGeomanDrawLayers(l=!1){let h=L.PM.Utils.findLayers(this.map).filter(w=>w._drawnByGeoman===!0);if(!l)return h;let v=L.featureGroup();return v._pmTempLayer=!0,h.forEach(w=>{v.addLayer(w)}),v},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(l){this._touchEventCounter===0&&(L.DomEvent.on(l,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(l,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(l){this._touchEventCounter===1&&(L.DomEvent.off(l,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(l,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(l){bi(this.map)._onMouseMove(this._createMouseEvent("mousemove",l))},_canvasTouchClick(l){let h="";l.type==="touchstart"||l.type==="pointerdown"?h="mousedown":(l.type==="touchend"||l.type==="pointerup"||l.type==="touchcancel"||l.type==="pointercancel")&&(h="mouseup"),h&&bi(this.map)._onClick(this._createMouseEvent(h,l))},_createMouseEvent(l,h){let v,w=h.touches[0]||h.changedTouches[0];try{v=new MouseEvent(l,{bubbles:h.bubbles,cancelable:h.cancelable,view:h.view,detail:w.detail,screenX:w.screenX,screenY:w.screenY,clientX:w.clientX,clientY:w.clientY,ctrlKey:h.ctrlKey,altKey:h.altKey,shiftKey:h.shiftKey,metaKey:h.metaKey,button:h.button,relatedTarget:h.relatedTarget})}catch{v=document.createEvent("MouseEvents"),v.initMouseEvent(l,h.bubbles,h.cancelable,h.view,w.detail,w.screenX,w.screenY,w.clientX,w.clientY,h.ctrlKey,h.altKey,h.shiftKey,h.metaKey,h.button,h.relatedTarget)}return v}}),Po=Ku,Gs=L.Control.extend({includes:[Dl],options:{position:"topleft",disableByOtherButtons:!0},initialize(l){this._button=L.Util.extend({},this.options,l)},onAdd(l){return this._map=l,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let l=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),l?l.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(l){return typeof l=="boolean"?this._button.toggleStatus=l:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(l){l&&l.preventDefault(),!this._button.disabled&&(this._button.onClick(l,{button:this,event:l}),this._clicked(l),this._button.afterClick(l,{button:this,event:l}))},_makeButton(l){let h=this.options.position.indexOf("right")>-1?"pos-right":"",v=L.DomUtil.create("div",`button-container  ${h}`,this._container);l.title&&v.setAttribute("title",l.title);let w=L.DomUtil.create("a","leaflet-buttons-control-button",v);w.setAttribute("role","button"),w.setAttribute("tabindex","0"),w.href="#";let C=L.DomUtil.create("div",`leaflet-pm-actions-container ${h}`,v),j=l.actions,X={cancel:{text:or("actions.cancel"),title:or("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:or("actions.finish"),title:or("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:or("actions.removeLastVertex"),title:or("actions.removeLastVertex"),onClick(){this._map.pm.Draw[l.jsClass]._removeLastVertex()}},finish:{text:or("actions.finish"),title:or("actions.finish"),onClick(de){this._map.pm.Draw[l.jsClass]._finishShape(de)}}};l._preparedActions=j.map(de=>{let Le=typeof de=="string"?de:de.name,Je;if(X[Le])Je=X[Le];else if(de.text)Je=de;else return Je;let ze=L.DomUtil.create("a",`leaflet-pm-action ${h} action-${Le}`,C);if(ze.setAttribute("role","button"),ze.setAttribute("tabindex","0"),ze.href="#",Je.title&&(ze.title=Je.title),ze.innerHTML=Je.text,L.DomEvent.disableClickPropagation(ze),L.DomEvent.on(ze,"click",L.DomEvent.stop),Je._node=ze,!l.disabled&&Je.onClick){let vt=At=>{At.preventDefault();let Xt="",{buttons:yn}=this._map.pm.Toolbar;for(let bn in yn)if(yn[bn]._button===l){Xt=bn;break}this._fireActionClick(Je,Xt,l)};L.DomEvent.addListener(ze,"click",vt,this),L.DomEvent.addListener(ze,"click",Je.onClick,this),L.DomEvent.addListener(ze,"click",()=>this._updateActiveAction(l))}return Je}),this._updateActiveAction(l),l.toggleStatus&&L.DomUtil.addClass(v,"active");let te=L.DomUtil.create("div","control-icon",w);return l.iconUrl&&te.setAttribute("src",l.iconUrl),l.className&&L.DomUtil.addClass(te,l.className),L.DomEvent.disableClickPropagation(w),L.DomEvent.on(w,"click",L.DomEvent.stop),l.disabled||(L.DomEvent.addListener(w,"click",this._onBtnClick,this),L.DomEvent.addListener(w,"click",this._triggerClick,this)),l.disabled&&(L.DomUtil.addClass(w,"pm-disabled"),w.setAttribute("aria-disabled","true")),v},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let l="",{buttons:h}=this._map.pm.Toolbar;for(let v in h)if(h[v]._button===this._button){l=v;break}this._fireButtonClick(l,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let l="pm-disabled",h=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(h,l),h.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(h,l),h.setAttribute("aria-disabled","false"))},_updateActiveAction(l){var h;(h=l._preparedActions)==null||h.forEach(v=>{v!=null&&v._node&&(v.isActive&&v.isActive.call(this)?L.DomUtil.addClass(v._node,"active-action"):L.DomUtil.removeClass(v._node,"active-action"))})}}),Il=Gs;L.Control.PMButton=Il;var qs=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(l){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(l)},reinit(){let l=this.isVisible;this.removeControls(),this._defineButtons(),l&&this.addControls()},init(l){this.map=l,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(l){let h=`${l}Container`;return this[h]||(this[h]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${l} leaflet-bar leaflet-control`)),this[h]},getButtons(){return this.buttons},addControls(l=this.options){typeof l.editPolygon<"u"&&(l.editMode=l.editPolygon),typeof l.deleteLayer<"u"&&(l.removalMode=l.deleteLayer),L.Util.setOptions(this,l),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let l=this.getButtons(),h={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let v in l){let w=l[v];L.Util.setOptions(w,{className:h.geomanIcons[v]})}},removeControls(){let l=this.getButtons();for(let h in l)l[h].remove();this.isVisible=!1},toggleControls(l=this.options){this.isVisible?this.removeControls():this.addControls(l)},_addButton(l,h){return this.buttons[l]=h,this.options[l]=!!this.options[l]||!1,this.buttons[l]},triggerClickOnToggledButtons(l){for(let h in this.buttons){let v=this.buttons[h];v._button.disableByOtherButtons&&v!==l&&v.toggled()&&v._triggerClick()}},toggleButton(l,h,v=!0){l==="editPolygon"&&(l="editMode"),l==="deleteLayer"&&(l="removalMode");let w=l;return v&&this.triggerClickOnToggledButtons(this.buttons[w]),this.buttons[w]?this.buttons[w].toggle(h):!1},_defineButtons(){let l={className:"control-icon leaflet-pm-icon-marker",title:or("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},h={title:or("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},v={className:"control-icon leaflet-pm-icon-polyline",title:or("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},w={title:or("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},C={title:or("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},j={title:or("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},X={title:or("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},te={title:or("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},de={title:or("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},Le={title:or("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Je={title:or("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},ze={className:"control-icon leaflet-pm-icon-text",title:or("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(l)),this._addButton("drawPolyline",new L.Control.PMButton(v)),this._addButton("drawRectangle",new L.Control.PMButton(j)),this._addButton("drawPolygon",new L.Control.PMButton(h)),this._addButton("drawCircle",new L.Control.PMButton(w)),this._addButton("drawCircleMarker",new L.Control.PMButton(C)),this._addButton("drawText",new L.Control.PMButton(ze)),this._addButton("editMode",new L.Control.PMButton(X)),this._addButton("dragMode",new L.Control.PMButton(te)),this._addButton("cutPolygon",new L.Control.PMButton(de)),this._addButton("removalMode",new L.Control.PMButton(Le)),this._addButton("rotateMode",new L.Control.PMButton(Je))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let l=this.getButtons(),h=[];this.options.drawControls===!1&&(h=h.concat(Object.keys(l).filter(v=>!l[v]._button.tool))),this.options.editControls===!1&&(h=h.concat(Object.keys(l).filter(v=>l[v]._button.tool==="edit"))),this.options.optionsControls===!1&&(h=h.concat(Object.keys(l).filter(v=>l[v]._button.tool==="options"))),this.options.customControls===!1&&(h=h.concat(Object.keys(l).filter(v=>l[v]._button.tool==="custom")));for(let v in l)if(this.options[v]&&h.indexOf(v)===-1){let w=l[v]._button.tool;w||(w="draw"),l[v].setPosition(this._getBtnPosition(w)),l[v].addTo(this.map)}},_getBtnPosition(l){return this.options.positions&&this.options.positions[l]?this.options.positions[l]:this.options.position},setBlockPosition(l,h){this.options.positions[l]=h,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(l,h){if(h)typeof h!="object"&&(h={name:h});else throw new TypeError("Button has no name");let v=this._btnNameMapping(l);if(!h.name)throw new TypeError("Button has no name");if(this.buttons[h.name])throw new TypeError("Button with this name already exists");let w=this.map.pm.Draw.createNewDrawInstance(h.name,v);h={...this.buttons[v]._button,...h};let C=this.createCustomControl(h);return{drawInstance:w,control:C}},createCustomControl(l){if(!l.name)throw new TypeError("Button has no name");if(this.buttons[l.name])throw new TypeError("Button with this name already exists");l.onClick||(l.onClick=()=>{}),l.afterClick||(l.afterClick=()=>{}),l.toggle!==!1&&(l.toggle=!0),l.block&&(l.block=l.block.toLowerCase()),(!l.block||l.block==="draw")&&(l.block=""),l.className?l.className.indexOf("control-icon")===-1&&(l.className=`control-icon ${l.className}`):l.className="control-icon";let h={tool:l.block,className:l.className,title:l.title||"",jsClass:l.name,onClick:l.onClick,afterClick:l.afterClick,doToggle:l.toggle,toggleStatus:!1,disableOtherButtons:l.disableOtherButtons??!0,disableByOtherButtons:l.disableByOtherButtons??!0,cssToggle:l.toggle,position:this.options.position,actions:l.actions||[],disabled:!!l.disabled};this.options[l.name]!==!1&&(this.options[l.name]=!0);let v=this._addButton(l.name,new L.Control.PMButton(h));return this.changeControlOrder(),v},controlExists(l){return!!this.getButton(l)},getButton(l){return this.getButtons()[l]},getButtonsInBlock(l){let h={};if(l)for(let v in this.getButtons()){let w=this.getButtons()[v];(w._button.tool===l||l==="draw"&&!w._button.tool)&&(h[v]=w)}return h},changeControlOrder(l=[]){let h=this._shapeMapping(),v=[];l.forEach(j=>{h[j]?v.push(h[j]):v.push(j)});let w=this.getButtons(),C={};v.forEach(j=>{w[j]&&(C[j]=w[j])}),Object.keys(w).filter(j=>!w[j]._button.tool||w[j]._button.tool==="draw").forEach(j=>{v.indexOf(j)===-1&&(C[j]=w[j])}),Object.keys(w).filter(j=>w[j]._button.tool==="edit").forEach(j=>{v.indexOf(j)===-1&&(C[j]=w[j])}),Object.keys(w).filter(j=>w[j]._button.tool==="options").forEach(j=>{v.indexOf(j)===-1&&(C[j]=w[j])}),Object.keys(w).filter(j=>w[j]._button.tool==="custom").forEach(j=>{v.indexOf(j)===-1&&(C[j]=w[j])}),Object.keys(w).forEach(j=>{v.indexOf(j)===-1&&(C[j]=w[j])}),this.map.pm.Toolbar.buttons=C,this._showHideButtons()},getControlOrder(){let l=this.getButtons(),h=[];for(let v in l)h.push(v);return h},changeActionsOfControl(l,h){let v=this._btnNameMapping(l);if(!v)throw new TypeError("No name passed");if(!h)throw new TypeError("No actions passed");if(!this.buttons[v])throw new TypeError("Button with this name not exists");this.buttons[v]._button.actions=h,this.changeControlOrder()},setButtonDisabled(l,h){let v=this._btnNameMapping(l);h?this.buttons[v].disable():this.buttons[v].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(l){let h=this._shapeMapping();return h[l]?h[l]:l}}),cl=qs,fl=f(_i()),wi={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(l){l.forEach(h=>{if(Array.isArray(h)){this._assignEvents(h);return}h.off("drag",this._handleSnapping,this),h.on("drag",this._handleSnapping,this),h.off("dragend",this._cleanupSnapping,this),h.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(l){if(l){let h=l.target;h._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(h=>{h.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(l){var te,de,Le;let h=l.target;if(h._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((te=l==null?void 0:l.originalEvent)==null?void 0:te.altKey)||((Le=(de=this._map)==null?void 0:de.pm)==null?void 0:Le.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let v=this._calcClosestLayer(h.getLatLng(),this._snapList);if(Object.keys(v).length===0)return!1;let w=v.layer instanceof L.Marker||v.layer instanceof L.CircleMarker||!this.options.snapSegment,C;w?C=v.latlng:C=this._checkPrioritiySnapping(v);let j=this.options.snapDistance,X={marker:h,shape:this._shape,snapLatLng:C,segment:v.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:v.layer,distance:v.distance};if(this._fireSnapDrag(X.marker,X),this._fireSnapDrag(this._layer,X),v.distance<j){h._orgLatLng=h.getLatLng(),h.setLatLng(C),h._snapped=!0,h._snapInfo=X;let Je=()=>{this._snapLatLng=C,this._fireSnap(h,X),this._fireSnap(this._layer,X)},ze=this._snapLatLng||{},vt=C||{};(ze.lat!==vt.lat||ze.lng!==vt.lng)&&Je()}else this._snapLatLng&&(this._unsnap(X),h._snapped=!1,h._snapInfo=void 0,this._fireUnsnap(X.marker,X),this._fireUnsnap(this._layer,X));return!0},_createSnapList(){let l=[],h=[],v=this._map;v.off("layerremove",this._handleSnapLayerRemoval,this),v.on("layerremove",this._handleSnapLayerRemoval,this),v.eachLayer(w=>{if((w instanceof L.Polyline||w instanceof L.Marker||w instanceof L.CircleMarker||w instanceof L.ImageOverlay)&&w.options.snapIgnore!==!0){if(w.options.snapIgnore===void 0&&(!L.PM.optIn&&w.options.pmIgnore===!0||L.PM.optIn&&w.options.pmIgnore!==!1))return;(w instanceof L.Circle||w instanceof L.CircleMarker)&&w.pm&&w.pm._hiddenPolyCircle?l.push(w.pm._hiddenPolyCircle):w instanceof L.ImageOverlay&&(w=L.rectangle(w.getBounds())),l.push(w);let C=L.polyline([],{color:"red",pmIgnore:!0});C._pmTempLayer=!0,h.push(C),(w instanceof L.Circle||w instanceof L.CircleMarker)&&h.push(C)}}),l=l.filter(w=>this._layer!==w),l=l.filter(w=>w._latlng||w._latlngs&&to(w._latlngs)),l=l.filter(w=>!w._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let w=L.polyline([],{color:"red",pmIgnore:!0});w._pmTempLayer=!0,h.push(w)}),this._snapList=l.concat(this._otherSnapLayers)):this._snapList=l,this.debugIndicatorLines=h},_handleSnapLayerRemoval({layer:l}){if(!l._leaflet_id)return;let h=this._snapList.findIndex(v=>v._leaflet_id===l._leaflet_id);h>-1&&this._snapList.splice(h,1)},_calcClosestLayer(l,h){return this._calcClosestLayers(l,h,1)[0]},_calcClosestLayers(l,h,v=1){let w=[],C={};h.forEach((X,te)=>{var Le;if(X._parentCopy&&X._parentCopy===this._layer||((Le=X.getLatLngs)==null?void 0:Le.call(X).flat(5).length)<2)return;let de=this._calcLayerDistances(l,X);if(de.distance=Math.floor(de.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[te]){let Je=L.polyline([],{color:"red",pmIgnore:!0});Je._pmTempLayer=!0,this.debugIndicatorLines[te]=Je}this.debugIndicatorLines[te].setLatLngs([l,de.latlng])}v===1&&(C.distance===void 0||de.distance-5<=C.distance)?(de.distance+5<C.distance&&(w=[]),C=de,C.layer=X,w.push(C)):v!==1&&(C={},C=de,C.layer=X,w.push(C))}),v!==1&&(w=w.sort((X,te)=>X.distance-te.distance)),v===-1&&(v=w.length);let j=this._getClosestLayerByPriority(w,v);return L.Util.isArray(j)?j:[j]},_calcLayerDistances(l,h){let v=this._map,w=h instanceof L.Marker||h instanceof L.CircleMarker,C=h instanceof L.Polygon,j=l;if(w){let X=h.getLatLng();return{latlng:{...X},distance:this._getDistance(v,X,j)}}return this._calcLatLngDistances(j,h.getLatLngs(),v,C)},_calcLatLngDistances(l,h,v,w=!1){let C,j,X,te=de=>{de.forEach((Le,Je)=>{if(Array.isArray(Le)){te(Le);return}if(this.options.snapSegment){let ze=Le,vt;w?vt=Je+1===de.length?0:Je+1:vt=Je+1===de.length?void 0:Je+1;let At=de[vt];if(At){let Xt=this._getDistanceToSegment(v,l,ze,At);(j===void 0||Xt<j)&&(j=Xt,X=[ze,At])}}else{let ze=this._getDistance(v,l,Le);(j===void 0||ze<j)&&(j=ze,C=Le)}})};return te(h),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(v,l,X[0],X[1])},segment:X,distance:j}:{latlng:C,distance:j}},_getClosestLayerByPriority(l,h=1){l=l.sort((X,te)=>X._leaflet_id-te._leaflet_id);let v=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],w=this._map.pm.globalOptions.snappingOrder||[],C=0,j={};return w.concat(v).forEach(X=>{j[X]||(C+=1,j[X]=C)}),l.sort(Bl("instanceofShape",j)),h===1?l[0]||{}:l.slice(0,h)},_checkPrioritiySnapping(l){let h=this._map,v=l.segment[0],w=l.segment[1],C=l.latlng,j=C;if(this.options.snapVertex){let X=this._getDistance(h,v,C),te=this._getDistance(h,w,C),de=X<te?v:w,Le=X<te?X:te;if(this.options.snapMiddle){let ze=L.PM.Utils.calcMiddleLatLng(h,v,w),vt=this._getDistance(h,ze,C);vt<X&&vt<te&&(de=ze,Le=vt)}let Je=this.options.snapDistance;Le<Je&&(j=de)}return{...j}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(l,h,v,w){let C=l.getMaxZoom();C===1/0&&(C=l.getZoom());let j=l.project(h,C),X=l.project(v,C),te=l.project(w,C),de=L.LineUtil.closestPointOnSegment(j,X,te);return l.unproject(de,C)},_getDistanceToSegment(l,h,v,w){let C=l.latLngToContainerPoint(h),j=l.latLngToContainerPoint(v),X=l.latLngToContainerPoint(w);return L.LineUtil.pointToSegmentDistance(C,j,X)},_getDistance(l,h,v){return l.latLngToContainerPoint(h).distanceTo(l.latLngToContainerPoint(v))}},Cs=wi,wa=L.Class.extend({includes:[Cs,Dl],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(l){L.Util.setOptions(this,l),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(l){let h=new L.Icon.Default;h.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=h,this._map=l,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(v=>{this[v]=new L.PM.Draw[v](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(l,h=!1){h?this.options.pathOptions=(0,fl.default)(this.options.pathOptions,l):this.options.pathOptions=l},getShapes(){return this.shapes},getShape(){return this._shape},enable(l,h){if(!l)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[l].enable(h)},disable(){this.shapes.forEach(l=>{this[l].disable()})},addControls(){this.shapes.forEach(l=>{this[l].addButton()})},getActiveShape(){let l;return this.shapes.forEach(h=>{this[h]._enabled&&(l=h)}),l},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let l=[];this._map.eachLayer(h=>{(h instanceof L.Polyline||h instanceof L.Marker||h instanceof L.Circle||h instanceof L.CircleMarker||h instanceof L.ImageOverlay)&&(h._pmTempLayer||l.push(h))}),this._enabled?l.forEach(h=>{L.PM.Utils.disablePopup(h)}):l.forEach(h=>{L.PM.Utils.enablePopup(h)})},createNewDrawInstance(l,h){let v=this._getShapeFromBtnName(h);if(this[l])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[v])throw new TypeError(`There is no class L.PM.Draw.${v}`);return this[l]=new L.PM.Draw[v](this._map),this[l].toolbarButtonName=l,this[l]._shape=l,this.shapes.push(l),this[h]&&this[l].setOptions(this[h].options),this[l].setOptions(this[l].options),this[l]},_getShapeFromBtnName(l){let h={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return h[l]?h[l]:this[l]?this[l]._shape:l},_finishLayer(l){l.pm&&(l.pm.setOptions(this.options),l.pm._shape=this._shape,l.pm._map=this._map),this._addDrawnLayerProp(l)},_addDrawnLayerProp(l){l._drawnByGeoman=!0},_setPane(l,h){h==="layerPane"?l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":h==="vertexPane"?l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":h==="markerPane"&&(l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),no=wa;no.Marker=no.extend({initialize(l){this._map=l,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(l){L.Util.setOptions(this,l),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(or("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(l=>{this.isRelevantMarker(l)&&l.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},isRelevantMarker(l){return l instanceof L.Marker&&l.pm&&!l._pmTempLayer&&!l.pm._initTextMarker},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this.options.snappable){let h=l;h.target=this._hintMarker,this._handleSnapping(h)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(l){if(!l.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._hintMarker.getLatLng(),v=new L.Marker(h,this.options.markerStyle);this._setPane(v,"markerPane"),this._finishLayer(v),v.pm||(v.options.draggable=!1),v.addTo(this._map.pm._getContainingLayer()),v.pm&&this.options.markerEditable?v.pm.enable():v.dragging&&v.dragging.disable(),this._fireCreate(v),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var l,h;(l=this.options.markerStyle)!=null&&l.icon&&((h=this._hintMarker)==null||h.setIcon(this.options.markerStyle.icon))}});var B=63710088e-1,ye={centimeters:B*100,centimetres:B*100,degrees:B/111325,feet:B*3.28084,inches:B*39.37,kilometers:B/1e3,kilometres:B/1e3,meters:B,metres:B,miles:B/1609.344,millimeters:B*1e3,millimetres:B*1e3,nauticalmiles:B/1852,radians:1,yards:B*1.0936};function Ze(l,h,v){v===void 0&&(v={});var w={type:"Feature"};return(v.id===0||v.id)&&(w.id=v.id),v.bbox&&(w.bbox=v.bbox),w.properties=h||{},w.geometry=l,w}function ct(l,h,v){if(v===void 0&&(v={}),!l)throw new Error("coordinates is required");if(!Array.isArray(l))throw new Error("coordinates must be an Array");if(l.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!vr(l[0])||!vr(l[1]))throw new Error("coordinates must contain numbers");var w={type:"Point",coordinates:l};return Ze(w,h,v)}function xt(l,h,v){if(v===void 0&&(v={}),l.length<2)throw new Error("coordinates must be an array of two or more positions");var w={type:"LineString",coordinates:l};return Ze(w,h,v)}function jt(l,h){h===void 0&&(h={});var v={type:"FeatureCollection"};return h.id&&(v.id=h.id),h.bbox&&(v.bbox=h.bbox),v.features=l,v}function cn(l,h){h===void 0&&(h="kilometers");var v=ye[h];if(!v)throw new Error(h+" units is invalid");return l*v}function Dn(l,h){h===void 0&&(h="kilometers");var v=ye[h];if(!v)throw new Error(h+" units is invalid");return l/v}function jn(l){var h=l%(2*Math.PI);return h*180/Math.PI}function nr(l){var h=l%360;return h*Math.PI/180}function vr(l){return!isNaN(l)&&l!==null&&!Array.isArray(l)}function $r(l){var h,v,w={type:"FeatureCollection",features:[]};if(l.type==="Feature"?v=l.geometry:v=l,v.type==="LineString")h=[v.coordinates];else if(v.type==="MultiLineString")h=v.coordinates;else if(v.type==="MultiPolygon")h=[].concat.apply([],v.coordinates);else if(v.type==="Polygon")h=v.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return h.forEach(function(C){h.forEach(function(j){for(var X=0;X<C.length-1;X++)for(var te=X;te<j.length-1;te++)if(!(C===j&&(Math.abs(X-te)===1||X===0&&te===C.length-2&&C[X][0]===C[C.length-1][0]&&C[X][1]===C[C.length-1][1]))){var de=zi(C[X][0],C[X][1],C[X+1][0],C[X+1][1],j[te][0],j[te][1],j[te+1][0],j[te+1][1]);de&&w.features.push(ct([de[0],de[1]]))}})}),w}function zi(l,h,v,w,C,j,X,te){var de,Le,Je,ze,vt,At={x:null,y:null,onLine1:!1,onLine2:!1};return de=(te-j)*(v-l)-(X-C)*(w-h),de===0?At.x!==null&&At.y!==null?At:!1:(Le=h-j,Je=l-C,ze=(X-C)*Le-(te-j)*Je,vt=(v-l)*Le-(w-h)*Je,Le=ze/de,Je=vt/de,At.x=l+Le*(v-l),At.y=h+Le*(w-h),Le>=0&&Le<=1&&(At.onLine1=!0),Je>=0&&Je<=1&&(At.onLine2=!0),At.onLine1&&At.onLine2?[At.x,At.y]:!1)}no.Line=no.extend({initialize(l){this._map=l,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(l){L.Util.setOptions(this,l),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(or("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},_syncHintLine(){let l=this._layer.getLatLngs();if(l.length>0){let h=l[l.length-1];this._hintline.setLatLngs([h,this._hintMarker.getLatLng()])}},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this.options.snappable){let v=l;v.target=this._hintMarker,this._handleSnapping(v)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let h=this._layer._defaultShape().slice();h.push(this._hintMarker.getLatLng()),this._change(h)},hasSelfIntersection(){return $r(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(l,h){let v=L.polyline(this._layer.getLatLngs());l&&(h||(h=this._hintMarker.getLatLng()),v.addLatLng(h));let w=$r(v.toGeoJSON(15));this._doesSelfIntersect=w.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(w,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(l){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,l.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._hintMarker.getLatLng(),v=this._layer.getLatLngs(),w=v[v.length-1];if(h.equals(v[0])||v.length>0&&h.equals(w)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:h,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(h);let C=this._createMarker(h);this._setTooltipText(),this._setHintLineAfterNewVertex(h),this._fireVertexAdded(C,void 0,h,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(l)},_setHintLineAfterNewVertex(l){this._hintline.setLatLngs([l,l])},_removeLastVertex(){let l=this._markers;if(l.length<=1){this.disable();return}let h=this._layer.getLatLngs(),v=l[l.length-1],{indexPath:w}=L.PM.Utils.findDeepMarkerIndex(l,v);l.pop(),this._layerGroup.removeLayer(v);let C=l[l.length-1],j=h.indexOf(C.getLatLng());h=h.slice(0,j+1),this._layer.setLatLngs(h),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(v,w,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let l=this._layer.getLatLngs();if(l.length<=1)return;let h=L.polyline(l,this.options.pathOptions);this._setPane(h,"layerPane"),this._finishLayer(h),h.addTo(this._map.pm._getContainingLayer()),this._fireCreate(h),this.options.snappable&&this._cleanupSnapping();let v=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(v))},_createMarker(l){let h=new L.Marker(l,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._pmTempLayer=!0,this._layerGroup.addLayer(h),this._markers.push(h),h.on("click",this._finishShape,this),h},_setTooltipText(){let{length:l}=this._layer.getLatLngs().flat(),h="";l<=1?h=or("tooltips.continueLine"):h=or("tooltips.finishLine"),this._hintMarker.setTooltipContent(h)},_change(l){this._fireChange(l,"Draw")},setStyle(){var l,h;(l=this._layer)==null||l.setStyle(this.options.templineStyle),(h=this._hintline)==null||h.setStyle(this.options.hintlineStyle)}}),no.Polygon=no.Line.extend({initialize(l){this._map=l,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(l){L.PM.Draw.Line.prototype.enable.call(this,l),this._layer.pm._shape="Polygon"},_createMarker(l){let h=new L.Marker(l,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._pmTempLayer=!0,this._layerGroup.addLayer(h),this._markers.push(h),this._layer.getLatLngs().flat().length===1?(h.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(h)-1,this.options.snappable&&this._cleanupSnapping()):h.on("click",()=>1),h},_setTooltipText(){let{length:l}=this._layer.getLatLngs().flat(),h="";l<=2?h=or("tooltips.continueLine"):h=or("tooltips.finishPoly"),this._hintMarker.setTooltipContent(h)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let l=this._layer.getLatLngs();if(l.length<=2)return;let h=L.polygon(l,this.options.pathOptions);this._setPane(h,"layerPane"),this._finishLayer(h),h.addTo(this._map.pm._getContainingLayer()),this._fireCreate(h),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let v=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(v))}}),no.Rectangle=no.extend({initialize(l){this._map=l,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(l){if(L.Util.setOptions(this,l),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(or("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let h=0;h<2;h+=1){let v=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(v,"vertexPane"),v._pmTempLayer=!0,this._layerGroup.addLayer(v),this._styleMarkers.push(v)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},_placeStartingMarkers(l){this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(h),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(v=>{L.DomUtil.addClass(v._icon,"visible"),v.setLatLng(h)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(or("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let l=this._startMarker.getLatLng();l&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([l,l]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this.options.snappable){let v=l;v.target=this._hintMarker,this._handleSnapping(v)}let h=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(h,"Draw")},_syncRectangleSize(){let l=Ol(this._startMarker.getLatLng(),this._map),h=Ol(this._hintMarker.getLatLng(),this._map),v=L.PM.Utils._getRotatedRectangle(l,h,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(v),this.options.cursorMarker&&this._styleMarkers){let w=[];v.forEach(C=>{!C.equals(l,1e-8)&&!C.equals(h,1e-8)&&w.push(C)}),w.forEach((C,j)=>{try{this._styleMarkers[j].setLatLng(C)}catch{}})}},_findCorners(){let l=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(l[0],l[2],this.options.rectangleAngle||0,this._map)},_finishShape(l){this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._hintMarker.getLatLng(),v=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||v.equals(h))return;let w=L.rectangle([v,h],this.options.pathOptions);if(this.options.rectangleAngle){let j=L.PM.Utils._getRotatedRectangle(v,h,this.options.rectangleAngle||0,this._map);w.setLatLngs(j),w.pm&&w.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(w,"layerPane"),this._finishLayer(w),w.addTo(this._map.pm._getContainingLayer()),this._fireCreate(w);let C=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(C))},setStyle(){var l;(l=this._layer)==null||l.setStyle(this.options.pathOptions)}}),no.CircleMarker=no.extend({initialize(l){this._map=l,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(l){if(L.Util.setOptions(this,l),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let h={};L.extend(h,this.options.templineStyle),h.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),h),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(or("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(or("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(l=>{this.isRelevantMarker(l)&&l.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(l=>{this.isRelevantMarker(l)&&l.pm.disable()})},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},_placeCenterMarker(l){this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let h=this._hintMarker.getLatLng();this._centerMarker.setLatLng(h),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let l=this._centerMarker.getLatLng();l&&(this._layer.setLatLng(l),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(or("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let l=this._centerMarker.getLatLng(),h=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([l,h])},_syncCircleRadius(){let l=this._centerMarker.getLatLng(),h=this._hintMarker.getLatLng(),v=this._distanceCalculation(l,h);this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(v)},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let v=l;v.target=this._hintMarker,this._handleSnapping(v)}this._handleHintMarkerSnapping();let h=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(h,"Draw")},isRelevantMarker(l){return l instanceof L.CircleMarker&&!(l instanceof L.Circle)&&l.pm&&!l._pmTempLayer},_createMarker(l){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!l.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._hintMarker.getLatLng(),v=new this._BaseCircleClass(h,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(v,"layerPane"),this._finishLayer(v),v.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(v),this._fireCreate(v),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(l){l.pm&&this.options.markerEditable&&l.pm.enable()},_finishShape(l){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._centerMarker.getLatLng(),v=this._defaultRadius;if(this.options[this._editableOption]){let X=this._hintMarker.getLatLng();v=this._distanceCalculation(h,X),this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?v=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]&&(v=this.options[this._maxRadiusOption])}let w={...this.options.pathOptions,radius:v},C=new this._BaseCircleClass(h,w);this._setPane(C,"layerPane"),this._finishLayer(C),C.addTo(this._map.pm._getContainingLayer()),C.pm&&C.pm._updateHiddenPolyCircle(),this._fireCreate(C);let j=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(j))},_getNewDestinationOfHintMarker(){let l=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return l;let h=this._centerMarker.getLatLng(),v=this._distanceCalculation(h,l);this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?l=Nl(this._map,h,l,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]&&(l=Nl(this._map,h,l,this._getMaxDistanceInMeter()))}return l},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let l=this._centerMarker.getLatLng(),h=this._hintMarker.getLatLng(),v=this._distanceCalculation(l,h);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var h,v;let l={};L.extend(l,this.options.templineStyle),this.options[this._editableOption]&&(l.radius=0),(h=this._layer)==null||h.setStyle(l),(v=this._hintline)==null||v.setStyle(this.options.hintlineStyle)},_distanceCalculation(l,h){return this._map.project(l).distanceTo(this._map.project(h))}}),no.Circle=no.CircleMarker.extend({initialize(l){this._map=l,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(l,h){return this._map.distance(l,h)}});function di(l){if(!l)throw new Error("coord is required");if(!Array.isArray(l)){if(l.type==="Feature"&&l.geometry!==null&&l.geometry.type==="Point")return l.geometry.coordinates;if(l.type==="Point")return l.coordinates}if(Array.isArray(l)&&l.length>=2&&!Array.isArray(l[0])&&!Array.isArray(l[1]))return l;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function xi(l){if(Array.isArray(l))return l;if(l.type==="Feature"){if(l.geometry!==null)return l.geometry.coordinates}else if(l.coordinates)return l.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function ro(l){return l.type==="Feature"?l.geometry:l}function fo(l,h){return l.type==="FeatureCollection"?"FeatureCollection":l.type==="GeometryCollection"?"GeometryCollection":l.type==="Feature"&&l.geometry!==null?l.geometry.type:l.type}function Es(l,h,v){if(l!==null)for(var w,C,j,X,te,de,Le,Je=0,ze=0,vt,At=l.type,Xt=At==="FeatureCollection",yn=At==="Feature",bn=Xt?l.features.length:1,ur=0;ur<bn;ur++){Le=Xt?l.features[ur].geometry:yn?l.geometry:l,vt=Le?Le.type==="GeometryCollection":!1,te=vt?Le.geometries.length:1;for(var Ye=0;Ye<te;Ye++){var tt=0,ft=0;if(X=vt?Le.geometries[Ye]:Le,X!==null){de=X.coordinates;var Bt=X.type;switch(Je=0,Bt){case null:break;case"Point":if(h(de,ze,ur,tt,ft)===!1)return!1;ze++,tt++;break;case"LineString":case"MultiPoint":for(w=0;w<de.length;w++){if(h(de[w],ze,ur,tt,ft)===!1)return!1;ze++,Bt==="MultiPoint"&&tt++}Bt==="LineString"&&tt++;break;case"Polygon":case"MultiLineString":for(w=0;w<de.length;w++){for(C=0;C<de[w].length-Je;C++){if(h(de[w][C],ze,ur,tt,ft)===!1)return!1;ze++}Bt==="MultiLineString"&&tt++,Bt==="Polygon"&&ft++}Bt==="Polygon"&&tt++;break;case"MultiPolygon":for(w=0;w<de.length;w++){for(ft=0,C=0;C<de[w].length;C++){for(j=0;j<de[w][C].length-Je;j++){if(h(de[w][C][j],ze,ur,tt,ft)===!1)return!1;ze++}ft++}tt++}break;case"GeometryCollection":for(w=0;w<X.geometries.length;w++)if(Es(X.geometries[w],h)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Ur(l,h){if(l.type==="Feature")h(l,0);else if(l.type==="FeatureCollection")for(var v=0;v<l.features.length&&h(l.features[v],v)!==!1;v++);}function jo(l,h,v){var w=v;return Ur(l,function(C,j){j===0&&v===void 0?w=C:w=h(w,C,j)}),w}function hl(l,h){var v,w,C,j,X,te,de,Le,Je,ze,vt=0,At=l.type==="FeatureCollection",Xt=l.type==="Feature",yn=At?l.features.length:1;for(v=0;v<yn;v++){for(te=At?l.features[v].geometry:Xt?l.geometry:l,Le=At?l.features[v].properties:Xt?l.properties:{},Je=At?l.features[v].bbox:Xt?l.bbox:void 0,ze=At?l.features[v].id:Xt?l.id:void 0,de=te?te.type==="GeometryCollection":!1,X=de?te.geometries.length:1,C=0;C<X;C++){if(j=de?te.geometries[C]:te,j===null){if(h(null,vt,Le,Je,ze)===!1)return!1;continue}switch(j.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(h(j,vt,Le,Je,ze)===!1)return!1;break}case"GeometryCollection":{for(w=0;w<j.geometries.length;w++)if(h(j.geometries[w],vt,Le,Je,ze)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}vt++}}function Qo(l,h){hl(l,function(v,w,C,j,X){var te=v===null?null:v.type;switch(te){case null:case"Point":case"LineString":case"Polygon":return h(Ze(v,C,{bbox:j,id:X}),w,0)===!1?!1:void 0}var de;switch(te){case"MultiPoint":de="Point";break;case"MultiLineString":de="LineString";break;case"MultiPolygon":de="Polygon";break}for(var Le=0;Le<v.coordinates.length;Le++){var Je=v.coordinates[Le],ze={type:de,coordinates:Je};if(h(Ze(ze,C),w,Le)===!1)return!1}})}function tu(l){if(!l)throw new Error("geojson is required");var h=[];return Qo(l,function(v){na(v,h)}),jt(h)}function na(l,h){var v=[],w=l.geometry;if(w!==null){switch(w.type){case"Polygon":v=xi(w);break;case"LineString":v=[xi(w)]}v.forEach(function(C){var j=wu(C,l.properties);j.forEach(function(X){X.id=h.length,h.push(X)})})}}function wu(l,h){var v=[];return l.reduce(function(w,C){var j=xt([w,C],h);return j.bbox=Ga(w,C),v.push(j),C}),v}function Ga(l,h){var v=l[0],w=l[1],C=h[0],j=h[1],X=v<C?v:C,te=w<j?w:j,de=v>C?v:C,Le=w>j?w:j;return[X,te,de,Le]}var qa=tu,ho=f(Lr(),1);function ra(l,h){var v={},w=[];if(l.type==="LineString"&&(l=Ze(l)),h.type==="LineString"&&(h=Ze(h)),l.type==="Feature"&&h.type==="Feature"&&l.geometry!==null&&h.geometry!==null&&l.geometry.type==="LineString"&&h.geometry.type==="LineString"&&l.geometry.coordinates.length===2&&h.geometry.coordinates.length===2){var C=Ps(l,h);return C&&w.push(C),jt(w)}var j=(0,ho.default)();return j.load(qa(h)),Ur(qa(l),function(X){Ur(j.search(X),function(te){var de=Ps(X,te);if(de){var Le=xi(de).join(",");v[Le]||(v[Le]=!0,w.push(de))}})}),jt(w)}function Ps(l,h){var v=xi(l),w=xi(h);if(v.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(w.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var C=v[0][0],j=v[0][1],X=v[1][0],te=v[1][1],de=w[0][0],Le=w[0][1],Je=w[1][0],ze=w[1][1],vt=(ze-Le)*(X-C)-(Je-de)*(te-j),At=(Je-de)*(j-Le)-(ze-Le)*(C-de),Xt=(X-C)*(j-Le)-(te-j)*(C-de);if(vt===0)return null;var yn=At/vt,bn=Xt/vt;if(yn>=0&&yn<=1&&bn>=0&&bn<=1){var ur=C+yn*(X-C),Ye=j+yn*(te-j);return ct([ur,Ye])}return null}var fs=ra,dl=f(Lr(),1);function zo(l,h,v){v===void 0&&(v={});var w=di(l),C=di(h),j=nr(C[1]-w[1]),X=nr(C[0]-w[0]),te=nr(w[1]),de=nr(C[1]),Le=Math.pow(Math.sin(j/2),2)+Math.pow(Math.sin(X/2),2)*Math.cos(te)*Math.cos(de);return cn(2*Math.atan2(Math.sqrt(Le),Math.sqrt(1-Le)),v.units)}var es=zo;function ts(l){var h=l[0],v=l[1],w=l[2],C=l[3],j=es(l.slice(0,2),[w,v]),X=es(l.slice(0,2),[h,C]);if(j>=X){var te=(v+C)/2;return[h,te-(w-h)/2,w,te+(w-h)/2]}else{var de=(h+w)/2;return[de-(C-v)/2,v,de+(C-v)/2,C]}}var Yu=ts;function Lo(l){var h=[1/0,1/0,-1/0,-1/0];return Es(l,function(v){h[0]>v[0]&&(h[0]=v[0]),h[1]>v[1]&&(h[1]=v[1]),h[2]<v[0]&&(h[2]=v[0]),h[3]<v[1]&&(h[3]=v[1])}),h}Lo.default=Lo;var xa=Lo;function $o(l,h){h===void 0&&(h={});var v=h.precision,w=h.coordinates,C=h.mutate;if(v=v==null||isNaN(v)?6:v,w=w==null||isNaN(w)?3:w,!l)throw new Error("<geojson> is required");if(typeof v!="number")throw new Error("<precision> must be a number");if(typeof w!="number")throw new Error("<coordinates> must be a number");(C===!1||C===void 0)&&(l=JSON.parse(JSON.stringify(l)));var j=Math.pow(10,v);return Es(l,function(X){Uo(X,j,w)}),l}function Uo(l,h,v){l.length>v&&l.splice(v,l.length);for(var w=0;w<l.length;w++)l[w]=Math.round(l[w]*h)/h;return l}var La=$o;function Sa(l,h,v){if(v===void 0&&(v={}),v.final===!0)return Vo(l,h);var w=di(l),C=di(h),j=nr(w[0]),X=nr(C[0]),te=nr(w[1]),de=nr(C[1]),Le=Math.sin(X-j)*Math.cos(de),Je=Math.cos(te)*Math.sin(de)-Math.sin(te)*Math.cos(de)*Math.cos(X-j);return jn(Math.atan2(Le,Je))}function Vo(l,h){var v=Sa(h,l);return v=(v+180)%360,v}function Mo(l,h,v,w){w===void 0&&(w={});var C=di(l),j=nr(C[0]),X=nr(C[1]),te=nr(v),de=Dn(h,w.units),Le=Math.asin(Math.sin(X)*Math.cos(de)+Math.cos(X)*Math.sin(de)*Math.cos(te)),Je=j+Math.atan2(Math.sin(te)*Math.sin(de)*Math.cos(X),Math.cos(de)-Math.sin(X)*Math.sin(Le)),ze=jn(Je),vt=jn(Le);return ct([ze,vt],w.properties)}function ia(l,h,v){v===void 0&&(v={});var w=ct([1/0,1/0],{dist:1/0}),C=0;return Qo(l,function(j){for(var X=xi(j),te=0;te<X.length-1;te++){var de=ct(X[te]);de.properties.dist=es(h,de,v);var Le=ct(X[te+1]);Le.properties.dist=es(h,Le,v);var Je=es(de,Le,v),ze=Math.max(de.properties.dist,Le.properties.dist),vt=Sa(de,Le),At=Mo(h,ze,vt+90,v),Xt=Mo(h,ze,vt-90,v),yn=fs(xt([At.geometry.coordinates,Xt.geometry.coordinates]),xt([de.geometry.coordinates,Le.geometry.coordinates])),bn=null;yn.features.length>0&&(bn=yn.features[0],bn.properties.dist=es(h,bn,v),bn.properties.location=C+es(de,bn,v)),de.properties.dist<w.properties.dist&&(w=de,w.properties.index=te,w.properties.location=C),Le.properties.dist<w.properties.dist&&(w=Le,w.properties.index=te+1,w.properties.location=C+Je),bn&&bn.properties.dist<w.properties.dist&&(w=bn,w.properties.index=te),C+=Je}}),w}var Ms=ia;function Ho(l,h){if(!l)throw new Error("line is required");if(!h)throw new Error("splitter is required");var v=fo(l),w=fo(h);if(v!=="LineString")throw new Error("line must be LineString");if(w==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(w==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var C=La(h,{precision:7});switch(w){case"Point":return qt(l,C);case"MultiPoint":return _t(l,C);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return _t(l,fs(l,C))}}function _t(l,h){var v=[],w=(0,dl.default)();return Qo(h,function(C){if(v.forEach(function(te,de){te.id=de}),!v.length)v=qt(l,C).features,v.forEach(function(te){te.bbox||(te.bbox=Yu(xa(te)))}),w.load(jt(v));else{var j=w.search(C);if(j.features.length){var X=Mt(C,j);v=v.filter(function(te){return te.id!==X.id}),w.remove(X),Ur(qt(X,C),function(te){v.push(te),w.insert(te)})}}}),jt(v)}function qt(l,h){var v=[],w=xi(l)[0],C=xi(l)[l.geometry.coordinates.length-1];if(An(w,di(h))||An(C,di(h)))return jt([l]);var j=(0,dl.default)(),X=qa(l);j.load(X);var te=j.search(h);if(!te.features.length)return jt([l]);var de=Mt(h,te),Le=[w],Je=jo(X,function(ze,vt,At){var Xt=xi(vt)[1],yn=di(h);return At===de.id?(ze.push(yn),v.push(xt(ze)),An(yn,Xt)?[yn]:[yn,Xt]):(ze.push(Xt),ze)},Le);return Je.length>1&&v.push(xt(Je)),jt(v)}function Mt(l,h){if(!h.features.length)throw new Error("lines must contain features");if(h.features.length===1)return h.features[0];var v,w=1/0;return Ur(h,function(C){var j=Ms(C,l),X=j.properties.dist;X<w&&(v=C,w=X)}),v}function An(l,h){return l[0]===h[0]&&l[1]===h[1]}var Kn=Ho;function wr(l,h,v){if(v===void 0&&(v={}),!l)throw new Error("point is required");if(!h)throw new Error("polygon is required");var w=di(l),C=ro(h),j=C.type,X=h.bbox,te=C.coordinates;if(X&&Li(w,X)===!1)return!1;j==="Polygon"&&(te=[te]);for(var de=!1,Le=0;Le<te.length&&!de;Le++)if(Ui(w,te[Le][0],v.ignoreBoundary)){for(var Je=!1,ze=1;ze<te[Le].length&&!Je;)Ui(w,te[Le][ze],!v.ignoreBoundary)&&(Je=!0),ze++;Je||(de=!0)}return de}function Ui(l,h,v){var w=!1;h[0][0]===h[h.length-1][0]&&h[0][1]===h[h.length-1][1]&&(h=h.slice(0,h.length-1));for(var C=0,j=h.length-1;C<h.length;j=C++){var X=h[C][0],te=h[C][1],de=h[j][0],Le=h[j][1],Je=l[1]*(X-de)+te*(de-l[0])+Le*(l[0]-X)===0&&(X-l[0])*(de-l[0])<=0&&(te-l[1])*(Le-l[1])<=0;if(Je)return!v;var ze=te>l[1]!=Le>l[1]&&l[0]<(de-X)*(l[1]-te)/(Le-te)+X;ze&&(w=!w)}return w}function Li(l,h){return h[0]<=l[0]&&h[1]<=l[1]&&h[2]>=l[0]&&h[3]>=l[1]}function Rl(l,h,v){v===void 0&&(v={});for(var w=di(l),C=xi(h),j=0;j<C.length-1;j++){var X=!1;if(v.ignoreEndVertices&&(j===0&&(X="start"),j===C.length-2&&(X="end"),j===0&&j+1===C.length-1&&(X="both")),ns(C[j],C[j+1],w,X,typeof v.epsilon>"u"?null:v.epsilon))return!0}return!1}function ns(l,h,v,w,C){var j=v[0],X=v[1],te=l[0],de=l[1],Le=h[0],Je=h[1],ze=v[0]-te,vt=v[1]-de,At=Le-te,Xt=Je-de,yn=ze*Xt-vt*At;if(C!==null){if(Math.abs(yn)>C)return!1}else if(yn!==0)return!1;if(w){if(w==="start")return Math.abs(At)>=Math.abs(Xt)?At>0?te<j&&j<=Le:Le<=j&&j<te:Xt>0?de<X&&X<=Je:Je<=X&&X<de;if(w==="end")return Math.abs(At)>=Math.abs(Xt)?At>0?te<=j&&j<Le:Le<j&&j<=te:Xt>0?de<=X&&X<Je:Je<X&&X<=de;if(w==="both")return Math.abs(At)>=Math.abs(Xt)?At>0?te<j&&j<Le:Le<j&&j<te:Xt>0?de<X&&X<Je:Je<X&&X<de}else return Math.abs(At)>=Math.abs(Xt)?At>0?te<=j&&j<=Le:Le<=j&&j<=te:Xt>0?de<=X&&X<=Je:Je<=X&&X<=de;return!1}var Vi=Rl;function oa(l,h){var v=ro(l),w=ro(h),C=v.type,j=w.type,X=v.coordinates,te=w.coordinates;switch(C){case"Point":switch(j){case"Point":return Mi(X,te);default:throw new Error("feature2 "+j+" geometry not supported")}case"MultiPoint":switch(j){case"Point":return Ca(v,w);case"MultiPoint":return sa(v,w);default:throw new Error("feature2 "+j+" geometry not supported")}case"LineString":switch(j){case"Point":return Vi(w,v,{ignoreEndVertices:!0});case"LineString":return Qr(v,w);case"MultiPoint":return aa(v,w);default:throw new Error("feature2 "+j+" geometry not supported")}case"Polygon":switch(j){case"Point":return wr(w,v,{ignoreBoundary:!0});case"LineString":return Ws(v,w);case"Polygon":return Ao(v,w);case"MultiPoint":return la(v,w);default:throw new Error("feature2 "+j+" geometry not supported")}default:throw new Error("feature1 "+C+" geometry not supported")}}function Ca(l,h){var v,w=!1;for(v=0;v<l.coordinates.length;v++)if(Mi(l.coordinates[v],h.coordinates)){w=!0;break}return w}function sa(l,h){for(var v=0,w=h.coordinates;v<w.length;v++){for(var C=w[v],j=!1,X=0,te=l.coordinates;X<te.length;X++){var de=te[X];if(Mi(C,de)){j=!0;break}}if(!j)return!1}return!0}function aa(l,h){for(var v=!1,w=0,C=h.coordinates;w<C.length;w++){var j=C[w];if(Vi(j,l,{ignoreEndVertices:!0})&&(v=!0),!Vi(j,l))return!1}return!!v}function la(l,h){for(var v=0,w=h.coordinates;v<w.length;v++){var C=w[v];if(!wr(C,l,{ignoreBoundary:!0}))return!1}return!0}function Qr(l,h){for(var v=!1,w=0,C=h.coordinates;w<C.length;w++){var j=C[w];if(Vi({type:"Point",coordinates:j},l,{ignoreEndVertices:!0})&&(v=!0),!Vi({type:"Point",coordinates:j},l,{ignoreEndVertices:!1}))return!1}return v}function Ws(l,h){var v=!1,w=0,C=xa(l),j=xa(h);if(!Si(C,j))return!1;for(w;w<h.coordinates.length-1;w++){var X=io(h.coordinates[w],h.coordinates[w+1]);if(wr({type:"Point",coordinates:X},l,{ignoreBoundary:!0})){v=!0;break}}return v}function Ao(l,h){if(l.type==="Feature"&&l.geometry===null||h.type==="Feature"&&h.geometry===null)return!1;var v=xa(l),w=xa(h);if(!Si(v,w))return!1;for(var C=ro(h).coordinates,j=0,X=C;j<X.length;j++)for(var te=X[j],de=0,Le=te;de<Le.length;de++){var Je=Le[de];if(!wr(Je,l))return!1}return!0}function Si(l,h){return!(l[0]>h[0]||l[2]<h[2]||l[1]>h[1]||l[3]<h[3])}function Mi(l,h){return l[0]===h[0]&&l[1]===h[1]}function io(l,h){return[(l[0]+h[0])/2,(l[1]+h[1])/2]}var Oi=f(ui()),As=l=>()=>l,hs=l=>{let h=l?(v,w)=>w.minus(v).abs().isLessThanOrEqualTo(l):As(!1);return(v,w)=>h(v,w)?0:v.comparedTo(w)};function Is(l){let h=l?(v,w,C,j,X)=>v.exponentiatedBy(2).isLessThanOrEqualTo(j.minus(w).exponentiatedBy(2).plus(X.minus(C).exponentiatedBy(2)).times(l)):As(!1);return(v,w,C)=>{let j=v.x,X=v.y,te=C.x,de=C.y,Le=X.minus(de).times(w.x.minus(te)).minus(j.minus(te).times(w.y.minus(de)));return h(Le,j,X,te,de)?0:Le.comparedTo(0)}}var xu=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,ua=Math.ceil,po=Math.floor,Bi="[BigNumber Error] ",Go=Bi+"Number primitive has more than 15 significant digits: ",ds=1e14,dr=14,Ea=9007199254740991,Pa=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Zs=1e7,rs=1e9;function bc(l){var h,v,w,C=Ye.prototype={constructor:Ye,toString:null,valueOf:null},j=new Ye(1),X=20,te=4,de=-7,Le=21,Je=-1e7,ze=1e7,vt=!1,At=1,Xt=0,yn={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},bn="0123456789abcdefghijklmnopqrstuvwxyz",ur=!0;function Ye(me,Me){var Oe,Be,Fe,je,lt,ut,pt,Lt,St=this;if(!(St instanceof Ye))return new Ye(me,Me);if(Me==null){if(me&&me._isBigNumber===!0){St.s=me.s,!me.c||me.e>ze?St.c=St.e=null:me.e<Je?St.c=[St.e=0]:(St.e=me.e,St.c=me.c.slice());return}if((ut=typeof me=="number")&&me*0==0){if(St.s=1/me<0?(me=-me,-1):1,me===~~me){for(je=0,lt=me;lt>=10;lt/=10,je++);je>ze?St.c=St.e=null:(St.e=je,St.c=[me]);return}Lt=String(me)}else{if(!xu.test(Lt=String(me)))return w(St,Lt,ut);St.s=Lt.charCodeAt(0)==45?(Lt=Lt.slice(1),-1):1}(je=Lt.indexOf("."))>-1&&(Lt=Lt.replace(".","")),(lt=Lt.search(/e/i))>0?(je<0&&(je=lt),je+=+Lt.slice(lt+1),Lt=Lt.substring(0,lt)):je<0&&(je=Lt.length)}else{if(a(Me,2,bn.length,"Base"),Me==10&&ur)return St=new Ye(me),bt(St,X+St.e+1,te);if(Lt=String(me),ut=typeof me=="number"){if(me*0!=0)return w(St,Lt,ut,Me);if(St.s=1/me<0?(Lt=Lt.slice(1),-1):1,Ye.DEBUG&&Lt.replace(/^0\.0*|\./,"").length>15)throw Error(Go+me)}else St.s=Lt.charCodeAt(0)===45?(Lt=Lt.slice(1),-1):1;for(Oe=bn.slice(0,Me),je=lt=0,pt=Lt.length;lt<pt;lt++)if(Oe.indexOf(Be=Lt.charAt(lt))<0){if(Be=="."){if(lt>je){je=pt;continue}}else if(!Fe&&(Lt==Lt.toUpperCase()&&(Lt=Lt.toLowerCase())||Lt==Lt.toLowerCase()&&(Lt=Lt.toUpperCase()))){Fe=!0,lt=-1,je=0;continue}return w(St,String(me),ut,Me)}ut=!1,Lt=v(Lt,Me,10,St.s),(je=Lt.indexOf("."))>-1?Lt=Lt.replace(".",""):je=Lt.length}for(lt=0;Lt.charCodeAt(lt)===48;lt++);for(pt=Lt.length;Lt.charCodeAt(--pt)===48;);if(Lt=Lt.slice(lt,++pt)){if(pt-=lt,ut&&Ye.DEBUG&&pt>15&&(me>Ea||me!==po(me)))throw Error(Go+St.s*me);if((je=je-lt-1)>ze)St.c=St.e=null;else if(je<Je)St.c=[St.e=0];else{if(St.e=je,St.c=[],lt=(je+1)%dr,je<0&&(lt+=dr),lt<pt){for(lt&&St.c.push(+Lt.slice(0,lt)),pt-=dr;lt<pt;)St.c.push(+Lt.slice(lt,lt+=dr));lt=dr-(Lt=Lt.slice(lt)).length}else lt-=pt;for(;lt--;Lt+="0");St.c.push(+Lt)}}else St.c=[St.e=0]}Ye.clone=bc,Ye.ROUND_UP=0,Ye.ROUND_DOWN=1,Ye.ROUND_CEIL=2,Ye.ROUND_FLOOR=3,Ye.ROUND_HALF_UP=4,Ye.ROUND_HALF_DOWN=5,Ye.ROUND_HALF_EVEN=6,Ye.ROUND_HALF_CEIL=7,Ye.ROUND_HALF_FLOOR=8,Ye.EUCLID=9,Ye.config=Ye.set=function(me){var Me,Oe;if(me!=null)if(typeof me=="object"){if(me.hasOwnProperty(Me="DECIMAL_PLACES")&&(Oe=me[Me],a(Oe,0,rs,Me),X=Oe),me.hasOwnProperty(Me="ROUNDING_MODE")&&(Oe=me[Me],a(Oe,0,8,Me),te=Oe),me.hasOwnProperty(Me="EXPONENTIAL_AT")&&(Oe=me[Me],Oe&&Oe.pop?(a(Oe[0],-1e9,0,Me),a(Oe[1],0,rs,Me),de=Oe[0],Le=Oe[1]):(a(Oe,-1e9,rs,Me),de=-(Le=Oe<0?-Oe:Oe))),me.hasOwnProperty(Me="RANGE"))if(Oe=me[Me],Oe&&Oe.pop)a(Oe[0],-1e9,-1,Me),a(Oe[1],1,rs,Me),Je=Oe[0],ze=Oe[1];else if(a(Oe,-1e9,rs,Me),Oe)Je=-(ze=Oe<0?-Oe:Oe);else throw Error(Bi+Me+" cannot be zero: "+Oe);if(me.hasOwnProperty(Me="CRYPTO"))if(Oe=me[Me],Oe===!!Oe)if(Oe)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))vt=Oe;else throw vt=!Oe,Error(Bi+"crypto unavailable");else vt=Oe;else throw Error(Bi+Me+" not true or false: "+Oe);if(me.hasOwnProperty(Me="MODULO_MODE")&&(Oe=me[Me],a(Oe,0,9,Me),At=Oe),me.hasOwnProperty(Me="POW_PRECISION")&&(Oe=me[Me],a(Oe,0,rs,Me),Xt=Oe),me.hasOwnProperty(Me="FORMAT"))if(Oe=me[Me],typeof Oe=="object")yn=Oe;else throw Error(Bi+Me+" not an object: "+Oe);if(me.hasOwnProperty(Me="ALPHABET"))if(Oe=me[Me],typeof Oe=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(Oe))ur=Oe.slice(0,10)=="0123456789",bn=Oe;else throw Error(Bi+Me+" invalid: "+Oe)}else throw Error(Bi+"Object expected: "+me);return{DECIMAL_PLACES:X,ROUNDING_MODE:te,EXPONENTIAL_AT:[de,Le],RANGE:[Je,ze],CRYPTO:vt,MODULO_MODE:At,POW_PRECISION:Xt,FORMAT:yn,ALPHABET:bn}},Ye.isBigNumber=function(me){if(!me||me._isBigNumber!==!0)return!1;if(!Ye.DEBUG)return!0;var Me,Oe,Be=me.c,Fe=me.e,je=me.s;e:if({}.toString.call(Be)=="[object Array]"){if((je===1||je===-1)&&Fe>=-1e9&&Fe<=rs&&Fe===po(Fe)){if(Be[0]===0){if(Fe===0&&Be.length===1)return!0;break e}if(Me=(Fe+1)%dr,Me<1&&(Me+=dr),String(Be[0]).length==Me){for(Me=0;Me<Be.length;Me++)if(Oe=Be[Me],Oe<0||Oe>=ds||Oe!==po(Oe))break e;if(Oe!==0)return!0}}}else if(Be===null&&Fe===null&&(je===null||je===1||je===-1))return!0;throw Error(Bi+"Invalid BigNumber: "+me)},Ye.maximum=Ye.max=function(){return ft(arguments,-1)},Ye.minimum=Ye.min=function(){return ft(arguments,1)},Ye.random=function(){var me=9007199254740992,Me=Math.random()*me&2097151?function(){return po(Math.random()*me)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(Oe){var Be,Fe,je,lt,ut,pt=0,Lt=[],St=new Ye(j);if(Oe==null?Oe=X:a(Oe,0,rs),lt=ua(Oe/dr),vt)if(crypto.getRandomValues){for(Be=crypto.getRandomValues(new Uint32Array(lt*=2));pt<lt;)ut=Be[pt]*131072+(Be[pt+1]>>>11),ut>=9e15?(Fe=crypto.getRandomValues(new Uint32Array(2)),Be[pt]=Fe[0],Be[pt+1]=Fe[1]):(Lt.push(ut%1e14),pt+=2);pt=lt/2}else if(crypto.randomBytes){for(Be=crypto.randomBytes(lt*=7);pt<lt;)ut=(Be[pt]&31)*281474976710656+Be[pt+1]*1099511627776+Be[pt+2]*4294967296+Be[pt+3]*16777216+(Be[pt+4]<<16)+(Be[pt+5]<<8)+Be[pt+6],ut>=9e15?crypto.randomBytes(7).copy(Be,pt):(Lt.push(ut%1e14),pt+=7);pt=lt/7}else throw vt=!1,Error(Bi+"crypto unavailable");if(!vt)for(;pt<lt;)ut=Me(),ut<9e15&&(Lt[pt++]=ut%1e14);for(lt=Lt[--pt],Oe%=dr,lt&&Oe&&(ut=Pa[dr-Oe],Lt[pt]=po(lt/ut)*ut);Lt[pt]===0;Lt.pop(),pt--);if(pt<0)Lt=[je=0];else{for(je=-1;Lt[0]===0;Lt.splice(0,1),je-=dr);for(pt=1,ut=Lt[0];ut>=10;ut/=10,pt++);pt<dr&&(je-=dr-pt)}return St.e=je,St.c=Lt,St}}(),Ye.sum=function(){for(var me=1,Me=arguments,Oe=new Ye(Me[0]);me<Me.length;)Oe=Oe.plus(Me[me++]);return Oe},v=function(){var me="0123456789";function Me(Oe,Be,Fe,je){for(var lt,ut=[0],pt,Lt=0,St=Oe.length;Lt<St;){for(pt=ut.length;pt--;ut[pt]*=Be);for(ut[0]+=je.indexOf(Oe.charAt(Lt++)),lt=0;lt<ut.length;lt++)ut[lt]>Fe-1&&(ut[lt+1]==null&&(ut[lt+1]=0),ut[lt+1]+=ut[lt]/Fe|0,ut[lt]%=Fe)}return ut.reverse()}return function(Oe,Be,Fe,je,lt){var ut,pt,Lt,St,on,zn,Gn,Qn,vi=Oe.indexOf("."),Ai=X,ei=te;for(vi>=0&&(St=Xt,Xt=0,Oe=Oe.replace(".",""),Qn=new Ye(Be),zn=Qn.pow(Oe.length-vi),Xt=St,Qn.c=Me(V(To(zn.c),zn.e,"0"),10,Fe,me),Qn.e=Qn.c.length),Gn=Me(Oe,Be,Fe,lt?(ut=bn,me):(ut=me,bn)),Lt=St=Gn.length;Gn[--St]==0;Gn.pop());if(!Gn[0])return ut.charAt(0);if(vi<0?--Lt:(zn.c=Gn,zn.e=Lt,zn.s=je,zn=h(zn,Qn,Ai,ei,Fe),Gn=zn.c,on=zn.r,Lt=zn.e),pt=Lt+Ai+1,vi=Gn[pt],St=Fe/2,on=on||pt<0||Gn[pt+1]!=null,on=ei<4?(vi!=null||on)&&(ei==0||ei==(zn.s<0?3:2)):vi>St||vi==St&&(ei==4||on||ei==6&&Gn[pt-1]&1||ei==(zn.s<0?8:7)),pt<1||!Gn[0])Oe=on?V(ut.charAt(1),-Ai,ut.charAt(0)):ut.charAt(0);else{if(Gn.length=pt,on)for(--Fe;++Gn[--pt]>Fe;)Gn[pt]=0,pt||(++Lt,Gn=[1].concat(Gn));for(St=Gn.length;!Gn[--St];);for(vi=0,Oe="";vi<=St;Oe+=ut.charAt(Gn[vi++]));Oe=V(Oe,Lt,ut.charAt(0))}return Oe}}(),h=function(){function me(Be,Fe,je){var lt,ut,pt,Lt,St=0,on=Be.length,zn=Fe%Zs,Gn=Fe/Zs|0;for(Be=Be.slice();on--;)pt=Be[on]%Zs,Lt=Be[on]/Zs|0,lt=Gn*pt+Lt*zn,ut=zn*pt+lt%Zs*Zs+St,St=(ut/je|0)+(lt/Zs|0)+Gn*Lt,Be[on]=ut%je;return St&&(Be=[St].concat(Be)),Be}function Me(Be,Fe,je,lt){var ut,pt;if(je!=lt)pt=je>lt?1:-1;else for(ut=pt=0;ut<je;ut++)if(Be[ut]!=Fe[ut]){pt=Be[ut]>Fe[ut]?1:-1;break}return pt}function Oe(Be,Fe,je,lt){for(var ut=0;je--;)Be[je]-=ut,ut=Be[je]<Fe[je]?1:0,Be[je]=ut*lt+Be[je]-Fe[je];for(;!Be[0]&&Be.length>1;Be.splice(0,1));}return function(Be,Fe,je,lt,ut){var pt,Lt,St,on,zn,Gn,Qn,vi,Ai,ei,Ii,ms,Su,fa,Tf,Za,Xu,ha=Be.s==Fe.s?1:-1,Wo=Be.c,oo=Fe.c;if(!Wo||!Wo[0]||!oo||!oo[0])return new Ye(!Be.s||!Fe.s||(Wo?oo&&Wo[0]==oo[0]:!oo)?NaN:Wo&&Wo[0]==0||!oo?ha*0:ha/0);for(vi=new Ye(ha),Ai=vi.c=[],Lt=Be.e-Fe.e,ha=je+Lt+1,ut||(ut=ds,Lt=ko(Be.e/dr)-ko(Fe.e/dr),ha=ha/dr|0),St=0;oo[St]==(Wo[St]||0);St++);if(oo[St]>(Wo[St]||0)&&Lt--,ha<0)Ai.push(1),on=!0;else{for(fa=Wo.length,Za=oo.length,St=0,ha+=2,zn=po(ut/(oo[0]+1)),zn>1&&(oo=me(oo,zn,ut),Wo=me(Wo,zn,ut),Za=oo.length,fa=Wo.length),Su=Za,ei=Wo.slice(0,Za),Ii=ei.length;Ii<Za;ei[Ii++]=0);Xu=oo.slice(),Xu=[0].concat(Xu),Tf=oo[0],oo[1]>=ut/2&&Tf++;do{if(zn=0,pt=Me(oo,ei,Za,Ii),pt<0){if(ms=ei[0],Za!=Ii&&(ms=ms*ut+(ei[1]||0)),zn=po(ms/Tf),zn>1)for(zn>=ut&&(zn=ut-1),Gn=me(oo,zn,ut),Qn=Gn.length,Ii=ei.length;Me(Gn,ei,Qn,Ii)==1;)zn--,Oe(Gn,Za<Qn?Xu:oo,Qn,ut),Qn=Gn.length,pt=1;else zn==0&&(pt=zn=1),Gn=oo.slice(),Qn=Gn.length;if(Qn<Ii&&(Gn=[0].concat(Gn)),Oe(ei,Gn,Ii,ut),Ii=ei.length,pt==-1)for(;Me(oo,ei,Za,Ii)<1;)zn++,Oe(ei,Za<Ii?Xu:oo,Ii,ut),Ii=ei.length}else pt===0&&(zn++,ei=[0]);Ai[St++]=zn,ei[0]?ei[Ii++]=Wo[Su]||0:(ei=[Wo[Su]],Ii=1)}while((Su++<fa||ei[0]!=null)&&ha--);on=ei[0]!=null,Ai[0]||Ai.splice(0,1)}if(ut==ds){for(St=1,ha=Ai[0];ha>=10;ha/=10,St++);bt(vi,je+(vi.e=St+Lt*dr-1)+1,lt,on)}else vi.e=Lt,vi.r=+on;return vi}}();function tt(me,Me,Oe,Be){var Fe,je,lt,ut,pt;if(Oe==null?Oe=te:a(Oe,0,8),!me.c)return me.toString();if(Fe=me.c[0],lt=me.e,Me==null)pt=To(me.c),pt=Be==1||Be==2&&(lt<=de||lt>=Le)?S(pt,lt):V(pt,lt,"0");else if(me=bt(new Ye(me),Me,Oe),je=me.e,pt=To(me.c),ut=pt.length,Be==1||Be==2&&(Me<=je||je<=de)){for(;ut<Me;pt+="0",ut++);pt=S(pt,je)}else if(Me-=lt,pt=V(pt,je,"0"),je+1>ut){if(--Me>0)for(pt+=".";Me--;pt+="0");}else if(Me+=je-ut,Me>0)for(je+1==ut&&(pt+=".");Me--;pt+="0");return me.s<0&&Fe?"-"+pt:pt}function ft(me,Me){for(var Oe,Be,Fe=1,je=new Ye(me[0]);Fe<me.length;Fe++)Be=new Ye(me[Fe]),(!Be.s||(Oe=Ks(je,Be))===Me||Oe===0&&je.s===Me)&&(je=Be);return je}function Bt(me,Me,Oe){for(var Be=1,Fe=Me.length;!Me[--Fe];Me.pop());for(Fe=Me[0];Fe>=10;Fe/=10,Be++);return(Oe=Be+Oe*dr-1)>ze?me.c=me.e=null:Oe<Je?me.c=[me.e=0]:(me.e=Oe,me.c=Me),me}w=function(){var me=/^(-?)0([xbo])(?=\w[\w.]*$)/i,Me=/^([^.]+)\.$/,Oe=/^\.([^.]+)$/,Be=/^-?(Infinity|NaN)$/,Fe=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(je,lt,ut,pt){var Lt,St=ut?lt:lt.replace(Fe,"");if(Be.test(St))je.s=isNaN(St)?null:St<0?-1:1;else{if(!ut&&(St=St.replace(me,function(on,zn,Gn){return Lt=(Gn=Gn.toLowerCase())=="x"?16:Gn=="b"?2:8,!pt||pt==Lt?zn:on}),pt&&(Lt=pt,St=St.replace(Me,"$1").replace(Oe,"0.$1")),lt!=St))return new Ye(St,Lt);if(Ye.DEBUG)throw Error(Bi+"Not a"+(pt?" base "+pt:"")+" number: "+lt);je.s=null}je.c=je.e=null}}();function bt(me,Me,Oe,Be){var Fe,je,lt,ut,pt,Lt,St,on=me.c,zn=Pa;if(on){e:{for(Fe=1,ut=on[0];ut>=10;ut/=10,Fe++);if(je=Me-Fe,je<0)je+=dr,lt=Me,pt=on[Lt=0],St=po(pt/zn[Fe-lt-1]%10);else if(Lt=ua((je+1)/dr),Lt>=on.length)if(Be){for(;on.length<=Lt;on.push(0));pt=St=0,Fe=1,je%=dr,lt=je-dr+1}else break e;else{for(pt=ut=on[Lt],Fe=1;ut>=10;ut/=10,Fe++);je%=dr,lt=je-dr+Fe,St=lt<0?0:po(pt/zn[Fe-lt-1]%10)}if(Be=Be||Me<0||on[Lt+1]!=null||(lt<0?pt:pt%zn[Fe-lt-1]),Be=Oe<4?(St||Be)&&(Oe==0||Oe==(me.s<0?3:2)):St>5||St==5&&(Oe==4||Be||Oe==6&&(je>0?lt>0?pt/zn[Fe-lt]:0:on[Lt-1])%10&1||Oe==(me.s<0?8:7)),Me<1||!on[0])return on.length=0,Be?(Me-=me.e+1,on[0]=zn[(dr-Me%dr)%dr],me.e=-Me||0):on[0]=me.e=0,me;if(je==0?(on.length=Lt,ut=1,Lt--):(on.length=Lt+1,ut=zn[dr-je],on[Lt]=lt>0?po(pt/zn[Fe-lt]%zn[lt])*ut:0),Be)for(;;)if(Lt==0){for(je=1,lt=on[0];lt>=10;lt/=10,je++);for(lt=on[0]+=ut,ut=1;lt>=10;lt/=10,ut++);je!=ut&&(me.e++,on[0]==ds&&(on[0]=1));break}else{if(on[Lt]+=ut,on[Lt]!=ds)break;on[Lt--]=0,ut=1}for(je=on.length;on[--je]===0;on.pop());}me.e>ze?me.c=me.e=null:me.e<Je&&(me.c=[me.e=0])}return me}function Tt(me){var Me,Oe=me.e;return Oe===null?me.toString():(Me=To(me.c),Me=Oe<=de||Oe>=Le?S(Me,Oe):V(Me,Oe,"0"),me.s<0?"-"+Me:Me)}return C.absoluteValue=C.abs=function(){var me=new Ye(this);return me.s<0&&(me.s=1),me},C.comparedTo=function(me,Me){return Ks(this,new Ye(me,Me))},C.decimalPlaces=C.dp=function(me,Me){var Oe,Be,Fe,je=this;if(me!=null)return a(me,0,rs),Me==null?Me=te:a(Me,0,8),bt(new Ye(je),me+je.e+1,Me);if(!(Oe=je.c))return null;if(Be=((Fe=Oe.length-1)-ko(this.e/dr))*dr,Fe=Oe[Fe])for(;Fe%10==0;Fe/=10,Be--);return Be<0&&(Be=0),Be},C.dividedBy=C.div=function(me,Me){return h(this,new Ye(me,Me),X,te)},C.dividedToIntegerBy=C.idiv=function(me,Me){return h(this,new Ye(me,Me),0,1)},C.exponentiatedBy=C.pow=function(me,Me){var Oe,Be,Fe,je,lt,ut,pt,Lt,St,on=this;if(me=new Ye(me),me.c&&!me.isInteger())throw Error(Bi+"Exponent not an integer: "+Tt(me));if(Me!=null&&(Me=new Ye(Me)),ut=me.e>14,!on.c||!on.c[0]||on.c[0]==1&&!on.e&&on.c.length==1||!me.c||!me.c[0])return St=new Ye(Math.pow(+Tt(on),ut?me.s*(2-p(me)):+Tt(me))),Me?St.mod(Me):St;if(pt=me.s<0,Me){if(Me.c?!Me.c[0]:!Me.s)return new Ye(NaN);Be=!pt&&on.isInteger()&&Me.isInteger(),Be&&(on=on.mod(Me))}else{if(me.e>9&&(on.e>0||on.e<-1||(on.e==0?on.c[0]>1||ut&&on.c[1]>=24e7:on.c[0]<8e13||ut&&on.c[0]<=9999975e7)))return je=on.s<0&&p(me)?-0:0,on.e>-1&&(je=1/je),new Ye(pt?1/je:je);Xt&&(je=ua(Xt/dr+2))}for(ut?(Oe=new Ye(.5),pt&&(me.s=1),Lt=p(me)):(Fe=Math.abs(+Tt(me)),Lt=Fe%2),St=new Ye(j);;){if(Lt){if(St=St.times(on),!St.c)break;je?St.c.length>je&&(St.c.length=je):Be&&(St=St.mod(Me))}if(Fe){if(Fe=po(Fe/2),Fe===0)break;Lt=Fe%2}else if(me=me.times(Oe),bt(me,me.e+1,1),me.e>14)Lt=p(me);else{if(Fe=+Tt(me),Fe===0)break;Lt=Fe%2}on=on.times(on),je?on.c&&on.c.length>je&&(on.c.length=je):Be&&(on=on.mod(Me))}return Be?St:(pt&&(St=j.div(St)),Me?St.mod(Me):je?bt(St,Xt,te,lt):St)},C.integerValue=function(me){var Me=new Ye(this);return me==null?me=te:a(me,0,8),bt(Me,Me.e+1,me)},C.isEqualTo=C.eq=function(me,Me){return Ks(this,new Ye(me,Me))===0},C.isFinite=function(){return!!this.c},C.isGreaterThan=C.gt=function(me,Me){return Ks(this,new Ye(me,Me))>0},C.isGreaterThanOrEqualTo=C.gte=function(me,Me){return(Me=Ks(this,new Ye(me,Me)))===1||Me===0},C.isInteger=function(){return!!this.c&&ko(this.e/dr)>this.c.length-2},C.isLessThan=C.lt=function(me,Me){return Ks(this,new Ye(me,Me))<0},C.isLessThanOrEqualTo=C.lte=function(me,Me){return(Me=Ks(this,new Ye(me,Me)))===-1||Me===0},C.isNaN=function(){return!this.s},C.isNegative=function(){return this.s<0},C.isPositive=function(){return this.s>0},C.isZero=function(){return!!this.c&&this.c[0]==0},C.minus=function(me,Me){var Oe,Be,Fe,je,lt=this,ut=lt.s;if(me=new Ye(me,Me),Me=me.s,!ut||!Me)return new Ye(NaN);if(ut!=Me)return me.s=-Me,lt.plus(me);var pt=lt.e/dr,Lt=me.e/dr,St=lt.c,on=me.c;if(!pt||!Lt){if(!St||!on)return St?(me.s=-Me,me):new Ye(on?lt:NaN);if(!St[0]||!on[0])return on[0]?(me.s=-Me,me):new Ye(St[0]?lt:te==3?-0:0)}if(pt=ko(pt),Lt=ko(Lt),St=St.slice(),ut=pt-Lt){for((je=ut<0)?(ut=-ut,Fe=St):(Lt=pt,Fe=on),Fe.reverse(),Me=ut;Me--;Fe.push(0));Fe.reverse()}else for(Be=(je=(ut=St.length)<(Me=on.length))?ut:Me,ut=Me=0;Me<Be;Me++)if(St[Me]!=on[Me]){je=St[Me]<on[Me];break}if(je&&(Fe=St,St=on,on=Fe,me.s=-me.s),Me=(Be=on.length)-(Oe=St.length),Me>0)for(;Me--;St[Oe++]=0);for(Me=ds-1;Be>ut;){if(St[--Be]<on[Be]){for(Oe=Be;Oe&&!St[--Oe];St[Oe]=Me);--St[Oe],St[Be]+=ds}St[Be]-=on[Be]}for(;St[0]==0;St.splice(0,1),--Lt);return St[0]?Bt(me,St,Lt):(me.s=te==3?-1:1,me.c=[me.e=0],me)},C.modulo=C.mod=function(me,Me){var Oe,Be,Fe=this;return me=new Ye(me,Me),!Fe.c||!me.s||me.c&&!me.c[0]?new Ye(NaN):!me.c||Fe.c&&!Fe.c[0]?new Ye(Fe):(At==9?(Be=me.s,me.s=1,Oe=h(Fe,me,0,3),me.s=Be,Oe.s*=Be):Oe=h(Fe,me,0,At),me=Fe.minus(Oe.times(me)),!me.c[0]&&At==1&&(me.s=Fe.s),me)},C.multipliedBy=C.times=function(me,Me){var Oe,Be,Fe,je,lt,ut,pt,Lt,St,on,zn,Gn,Qn,vi,Ai,ei=this,Ii=ei.c,ms=(me=new Ye(me,Me)).c;if(!Ii||!ms||!Ii[0]||!ms[0])return!ei.s||!me.s||Ii&&!Ii[0]&&!ms||ms&&!ms[0]&&!Ii?me.c=me.e=me.s=null:(me.s*=ei.s,!Ii||!ms?me.c=me.e=null:(me.c=[0],me.e=0)),me;for(Be=ko(ei.e/dr)+ko(me.e/dr),me.s*=ei.s,pt=Ii.length,on=ms.length,pt<on&&(Qn=Ii,Ii=ms,ms=Qn,Fe=pt,pt=on,on=Fe),Fe=pt+on,Qn=[];Fe--;Qn.push(0));for(vi=ds,Ai=Zs,Fe=on;--Fe>=0;){for(Oe=0,zn=ms[Fe]%Ai,Gn=ms[Fe]/Ai|0,lt=pt,je=Fe+lt;je>Fe;)Lt=Ii[--lt]%Ai,St=Ii[lt]/Ai|0,ut=Gn*Lt+St*zn,Lt=zn*Lt+ut%Ai*Ai+Qn[je]+Oe,Oe=(Lt/vi|0)+(ut/Ai|0)+Gn*St,Qn[je--]=Lt%vi;Qn[je]=Oe}return Oe?++Be:Qn.splice(0,1),Bt(me,Qn,Be)},C.negated=function(){var me=new Ye(this);return me.s=-me.s||null,me},C.plus=function(me,Me){var Oe,Be=this,Fe=Be.s;if(me=new Ye(me,Me),Me=me.s,!Fe||!Me)return new Ye(NaN);if(Fe!=Me)return me.s=-Me,Be.minus(me);var je=Be.e/dr,lt=me.e/dr,ut=Be.c,pt=me.c;if(!je||!lt){if(!ut||!pt)return new Ye(Fe/0);if(!ut[0]||!pt[0])return pt[0]?me:new Ye(ut[0]?Be:Fe*0)}if(je=ko(je),lt=ko(lt),ut=ut.slice(),Fe=je-lt){for(Fe>0?(lt=je,Oe=pt):(Fe=-Fe,Oe=ut),Oe.reverse();Fe--;Oe.push(0));Oe.reverse()}for(Fe=ut.length,Me=pt.length,Fe-Me<0&&(Oe=pt,pt=ut,ut=Oe,Me=Fe),Fe=0;Me;)Fe=(ut[--Me]=ut[Me]+pt[Me]+Fe)/ds|0,ut[Me]=ds===ut[Me]?0:ut[Me]%ds;return Fe&&(ut=[Fe].concat(ut),++lt),Bt(me,ut,lt)},C.precision=C.sd=function(me,Me){var Oe,Be,Fe,je=this;if(me!=null&&me!==!!me)return a(me,1,rs),Me==null?Me=te:a(Me,0,8),bt(new Ye(je),me,Me);if(!(Oe=je.c))return null;if(Fe=Oe.length-1,Be=Fe*dr+1,Fe=Oe[Fe]){for(;Fe%10==0;Fe/=10,Be--);for(Fe=Oe[0];Fe>=10;Fe/=10,Be++);}return me&&je.e+1>Be&&(Be=je.e+1),Be},C.shiftedBy=function(me){return a(me,-9007199254740991,Ea),this.times("1e"+me)},C.squareRoot=C.sqrt=function(){var me,Me,Oe,Be,Fe,je=this,lt=je.c,ut=je.s,pt=je.e,Lt=X+4,St=new Ye("0.5");if(ut!==1||!lt||!lt[0])return new Ye(!ut||ut<0&&(!lt||lt[0])?NaN:lt?je:1/0);if(ut=Math.sqrt(+Tt(je)),ut==0||ut==1/0?(Me=To(lt),(Me.length+pt)%2==0&&(Me+="0"),ut=Math.sqrt(+Me),pt=ko((pt+1)/2)-(pt<0||pt%2),ut==1/0?Me="5e"+pt:(Me=ut.toExponential(),Me=Me.slice(0,Me.indexOf("e")+1)+pt),Oe=new Ye(Me)):Oe=new Ye(ut+""),Oe.c[0]){for(pt=Oe.e,ut=pt+Lt,ut<3&&(ut=0);;)if(Fe=Oe,Oe=St.times(Fe.plus(h(je,Fe,Lt,1))),To(Fe.c).slice(0,ut)===(Me=To(Oe.c)).slice(0,ut))if(Oe.e<pt&&--ut,Me=Me.slice(ut-3,ut+1),Me=="9999"||!Be&&Me=="4999"){if(!Be&&(bt(Fe,Fe.e+X+2,0),Fe.times(Fe).eq(je))){Oe=Fe;break}Lt+=4,ut+=4,Be=1}else{(!+Me||!+Me.slice(1)&&Me.charAt(0)=="5")&&(bt(Oe,Oe.e+X+2,1),me=!Oe.times(Oe).eq(je));break}}return bt(Oe,Oe.e+X+1,te,me)},C.toExponential=function(me,Me){return me!=null&&(a(me,0,rs),me++),tt(this,me,Me,1)},C.toFixed=function(me,Me){return me!=null&&(a(me,0,rs),me=me+this.e+1),tt(this,me,Me)},C.toFormat=function(me,Me,Oe){var Be,Fe=this;if(Oe==null)me!=null&&Me&&typeof Me=="object"?(Oe=Me,Me=null):me&&typeof me=="object"?(Oe=me,me=Me=null):Oe=yn;else if(typeof Oe!="object")throw Error(Bi+"Argument not an object: "+Oe);if(Be=Fe.toFixed(me,Me),Fe.c){var je,lt=Be.split("."),ut=+Oe.groupSize,pt=+Oe.secondaryGroupSize,Lt=Oe.groupSeparator||"",St=lt[0],on=lt[1],zn=Fe.s<0,Gn=zn?St.slice(1):St,Qn=Gn.length;if(pt&&(je=ut,ut=pt,pt=je,Qn-=je),ut>0&&Qn>0){for(je=Qn%ut||ut,St=Gn.substr(0,je);je<Qn;je+=ut)St+=Lt+Gn.substr(je,ut);pt>0&&(St+=Lt+Gn.slice(je)),zn&&(St="-"+St)}Be=on?St+(Oe.decimalSeparator||"")+((pt=+Oe.fractionGroupSize)?on.replace(new RegExp("\\d{"+pt+"}\\B","g"),"$&"+(Oe.fractionGroupSeparator||"")):on):St}return(Oe.prefix||"")+Be+(Oe.suffix||"")},C.toFraction=function(me){var Me,Oe,Be,Fe,je,lt,ut,pt,Lt,St,on,zn,Gn=this,Qn=Gn.c;if(me!=null&&(ut=new Ye(me),!ut.isInteger()&&(ut.c||ut.s!==1)||ut.lt(j)))throw Error(Bi+"Argument "+(ut.isInteger()?"out of range: ":"not an integer: ")+Tt(ut));if(!Qn)return new Ye(Gn);for(Me=new Ye(j),Lt=Oe=new Ye(j),Be=pt=new Ye(j),zn=To(Qn),je=Me.e=zn.length-Gn.e-1,Me.c[0]=Pa[(lt=je%dr)<0?dr+lt:lt],me=!me||ut.comparedTo(Me)>0?je>0?Me:Lt:ut,lt=ze,ze=1/0,ut=new Ye(zn),pt.c[0]=0;St=h(ut,Me,0,1),Fe=Oe.plus(St.times(Be)),Fe.comparedTo(me)!=1;)Oe=Be,Be=Fe,Lt=pt.plus(St.times(Fe=Lt)),pt=Fe,Me=ut.minus(St.times(Fe=Me)),ut=Fe;return Fe=h(me.minus(Oe),Be,0,1),pt=pt.plus(Fe.times(Lt)),Oe=Oe.plus(Fe.times(Be)),pt.s=Lt.s=Gn.s,je=je*2,on=h(Lt,Be,je,te).minus(Gn).abs().comparedTo(h(pt,Oe,je,te).minus(Gn).abs())<1?[Lt,Be]:[pt,Oe],ze=lt,on},C.toNumber=function(){return+Tt(this)},C.toPrecision=function(me,Me){return me!=null&&a(me,1,rs),tt(this,me,Me,2)},C.toString=function(me){var Me,Oe=this,Be=Oe.s,Fe=Oe.e;return Fe===null?Be?(Me="Infinity",Be<0&&(Me="-"+Me)):Me="NaN":(me==null?Me=Fe<=de||Fe>=Le?S(To(Oe.c),Fe):V(To(Oe.c),Fe,"0"):me===10&&ur?(Oe=bt(new Ye(Oe),X+Fe+1,te),Me=V(To(Oe.c),Oe.e,"0")):(a(me,2,bn.length,"Base"),Me=v(V(To(Oe.c),Fe,"0"),10,me,Be,!0)),Be<0&&Oe.c[0]&&(Me="-"+Me)),Me},C.valueOf=C.toJSON=function(){return Tt(this)},C._isBigNumber=!0,C[Symbol.toStringTag]="BigNumber",C[Symbol.for("nodejs.util.inspect.custom")]=C.valueOf,l!=null&&Ye.set(l),Ye}function ko(l){var h=l|0;return l>0||l===h?h:h-1}function To(l){for(var h,v,w=1,C=l.length,j=l[0]+"";w<C;){for(h=l[w++]+"",v=dr-h.length;v--;h="0"+h);j+=h}for(C=j.length;j.charCodeAt(--C)===48;);return j.slice(0,C+1||1)}function Ks(l,h){var v,w,C=l.c,j=h.c,X=l.s,te=h.s,de=l.e,Le=h.e;if(!X||!te)return null;if(v=C&&!C[0],w=j&&!j[0],v||w)return v?w?0:-te:X;if(X!=te)return X;if(v=X<0,w=de==Le,!C||!j)return w?0:!C^v?1:-1;if(!w)return de>Le^v?1:-1;for(te=(de=C.length)<(Le=j.length)?de:Le,X=0;X<te;X++)if(C[X]!=j[X])return C[X]>j[X]^v?1:-1;return de==Le?0:de>Le^v?1:-1}function a(l,h,v,w){if(l<h||l>v||l!==po(l))throw Error(Bi+(w||"Argument")+(typeof l=="number"?l<h||l>v?" out of range: ":" not an integer: ":" not a primitive number: ")+String(l))}function p(l){var h=l.c.length-1;return ko(l.e/dr)==h&&l.c[h]%2!=0}function S(l,h){return(l.length>1?l.charAt(0)+"."+l.slice(1):l)+(h<0?"e":"e+")+h}function V(l,h,v){var w,C;if(h<0){for(C=v+".";++h;C+=v);l=C+l}else if(w=l.length,++h>w){for(C=v,h-=w;--h;C+=v);l+=C}else h<w&&(l=l.slice(0,h)+"."+l.slice(h));return l}var oe=bc(),Se=oe,st=class{constructor(l){Ht(this,"key");Ht(this,"left",null);Ht(this,"right",null);this.key=l}},Pt=class extends st{constructor(l){super(l)}},zt=class{constructor(){Ht(this,"size",0);Ht(this,"modificationCount",0);Ht(this,"splayCount",0)}splay(l){let h=this.root;if(h==null)return this.compare(l,l),-1;let v=null,w=null,C=null,j=null,X=h,te=this.compare,de;for(;;)if(de=te(X.key,l),de>0){let Le=X.left;if(Le==null||(de=te(Le.key,l),de>0&&(X.left=Le.right,Le.right=X,X=Le,Le=X.left,Le==null)))break;v==null?w=X:v.left=X,v=X,X=Le}else if(de<0){let Le=X.right;if(Le==null||(de=te(Le.key,l),de<0&&(X.right=Le.left,Le.left=X,X=Le,Le=X.right,Le==null)))break;C==null?j=X:C.right=X,C=X,X=Le}else break;return C!=null&&(C.right=X.left,X.left=j),v!=null&&(v.left=X.right,X.right=w),this.root!==X&&(this.root=X,this.splayCount++),de}splayMin(l){let h=l,v=h.left;for(;v!=null;){let w=v;h.left=w.right,w.right=h,h=w,v=h.left}return h}splayMax(l){let h=l,v=h.right;for(;v!=null;){let w=v;h.right=w.left,w.left=h,h=w,v=h.right}return h}_delete(l){if(this.root==null||this.splay(l)!=0)return null;let h=this.root,v=h,w=h.left;if(this.size--,w==null)this.root=h.right;else{let C=h.right;h=this.splayMax(w),h.right=C,this.root=h}return this.modificationCount++,v}addNewRoot(l,h){this.size++,this.modificationCount++;let v=this.root;if(v==null){this.root=l;return}h<0?(l.left=v,l.right=v.right,v.right=null):(l.right=v,l.left=v.left,v.left=null),this.root=l}_first(){let l=this.root;return l==null?null:(this.root=this.splayMin(l),this.root)}_last(){let l=this.root;return l==null?null:(this.root=this.splayMax(l),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(l){return this.validKey(l)&&this.splay(l)==0}defaultCompare(){return(l,h)=>l<h?-1:l>h?1:0}wrap(){return{getRoot:()=>this.root,setRoot:l=>{this.root=l},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:l=>{this.splayCount=l},splay:l=>this.splay(l),has:l=>this.has(l)}}},sn=class $d extends zt{constructor(v,w){super();Ht(this,"root",null);Ht(this,"compare");Ht(this,"validKey");Ht(this,Sn,"[object Set]");this.compare=v??this.defaultCompare(),this.validKey=w??(C=>C!=null&&C!=null)}delete(v){return this.validKey(v)?this._delete(v)!=null:!1}deleteAll(v){for(let w of v)this.delete(w)}forEach(v){let w=this[Symbol.iterator](),C;for(;C=w.next(),!C.done;)v(C.value,C.value,this)}add(v){let w=this.splay(v);return w!=0&&this.addNewRoot(new Pt(v),w),this}addAndReturn(v){let w=this.splay(v);return w!=0&&this.addNewRoot(new Pt(v),w),this.root.key}addAll(v){for(let w of v)this.add(w)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(v){if(v==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(v)<0)return this.root.key;let w=this.root.left;if(w==null)return null;let C=w.right;for(;C!=null;)w=C,C=w.right;return w.key}firstAfter(v){if(v==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(v)>0)return this.root.key;let w=this.root.right;if(w==null)return null;let C=w.left;for(;C!=null;)w=C,C=w.left;return w.key}retainAll(v){let w=new $d(this.compare,this.validKey),C=this.modificationCount;for(let j of v){if(C!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(j)&&this.splay(j)==0&&w.add(this.root.key)}w.size!=this.size&&(this.root=w.root,this.size=w.size,this.modificationCount++)}lookup(v){return!this.validKey(v)||this.splay(v)!=0?null:this.root.key}intersection(v){let w=new $d(this.compare,this.validKey);for(let C of this)v.has(C)&&w.add(C);return w}difference(v){let w=new $d(this.compare,this.validKey);for(let C of this)v.has(C)||w.add(C);return w}union(v){let w=this.clone();return w.addAll(v),w}clone(){let v=new $d(this.compare,this.validKey);return v.size=this.size,v.root=this.copyNode(this.root),v}copyNode(v){if(v==null)return null;function w(j,X){let te,de;do{if(te=j.left,de=j.right,te!=null){let Le=new Pt(te.key);X.left=Le,w(te,Le)}if(de!=null){let Le=new Pt(de.key);X.right=Le,j=de,X=Le}}while(de!=null)}let C=new Pt(v.key);return w(v,C),C}toSet(){return this.clone()}entries(){return new zr(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(Xn=Symbol.iterator,Sn=Symbol.toStringTag,Xn)](){return new Jn(this.wrap())}},Nn=class{constructor(l){Ht(this,"tree");Ht(this,"path",new Array);Ht(this,"modificationCount",null);Ht(this,"splayCount");this.tree=l,this.splayCount=l.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let l=this.path[this.path.length-1];return this.getValue(l)}rebuildPath(l){this.path.splice(0,this.path.length),this.tree.splay(l),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(l){for(;l!=null;)this.path.push(l),l=l.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let v=this.tree.getRoot();for(;v!=null;)this.path.push(v),v=v.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let l=this.path[this.path.length-1],h=l.right;if(h!=null){for(;h!=null;)this.path.push(h),h=h.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===l;)l=this.path.pop();return this.path.length>0}},Jn=class extends Nn{getValue(l){return l.key}},zr=class extends Nn{getValue(l){return[l.key,l.key]}},go=l=>l,Ki=l=>{if(l){let h=new sn(hs(l)),v=new sn(hs(l)),w=(j,X)=>X.addAndReturn(j),C=j=>({x:w(j.x,h),y:w(j.y,v)});return C({x:new Se(0),y:new Se(0)}),C}return go},Do=l=>({set:h=>{Hi=Do(h)},reset:()=>Do(l),compare:hs(l),snap:Ki(l),orient:Is(l)}),Hi=Do(),ps=(l,h)=>l.ll.x.isLessThanOrEqualTo(h.x)&&h.x.isLessThanOrEqualTo(l.ur.x)&&l.ll.y.isLessThanOrEqualTo(h.y)&&h.y.isLessThanOrEqualTo(l.ur.y),wc=(l,h)=>{if(h.ur.x.isLessThan(l.ll.x)||l.ur.x.isLessThan(h.ll.x)||h.ur.y.isLessThan(l.ll.y)||l.ur.y.isLessThan(h.ll.y))return null;let v=l.ll.x.isLessThan(h.ll.x)?h.ll.x:l.ll.x,w=l.ur.x.isLessThan(h.ur.x)?l.ur.x:h.ur.x,C=l.ll.y.isLessThan(h.ll.y)?h.ll.y:l.ll.y,j=l.ur.y.isLessThan(h.ur.y)?l.ur.y:h.ur.y;return{ll:{x:v,y:C},ur:{x:w,y:j}}},ca=(l,h)=>l.x.times(h.y).minus(l.y.times(h.x)),Ys=(l,h)=>l.x.times(h.x).plus(l.y.times(h.y)),Rs=l=>Ys(l,l).sqrt(),Af=(l,h,v)=>{let w={x:h.x.minus(l.x),y:h.y.minus(l.y)},C={x:v.x.minus(l.x),y:v.y.minus(l.y)};return ca(C,w).div(Rs(C)).div(Rs(w))},nu=(l,h,v)=>{let w={x:h.x.minus(l.x),y:h.y.minus(l.y)},C={x:v.x.minus(l.x),y:v.y.minus(l.y)};return Ys(C,w).div(Rs(C)).div(Rs(w))},mi=(l,h,v)=>h.y.isZero()?null:{x:l.x.plus(h.x.div(h.y).times(v.minus(l.y))),y:v},qo=(l,h,v)=>h.x.isZero()?null:{x:v,y:l.y.plus(h.y.div(h.x).times(v.minus(l.x)))},De=(l,h,v,w)=>{if(h.x.isZero())return qo(v,w,l.x);if(w.x.isZero())return qo(l,h,v.x);if(h.y.isZero())return mi(v,w,l.y);if(w.y.isZero())return mi(l,h,v.y);let C=ca(h,w);if(C.isZero())return null;let j={x:v.x.minus(l.x),y:v.y.minus(l.y)},X=ca(j,h).div(C),te=ca(j,w).div(C),de=l.x.plus(te.times(h.x)),Le=v.x.plus(X.times(w.x)),Je=l.y.plus(te.times(h.y)),ze=v.y.plus(X.times(w.y)),vt=de.plus(Le).div(2),At=Je.plus(ze).div(2);return{x:vt,y:At}},gs=class mx{constructor(h,v){Ht(this,"point");Ht(this,"isLeft");Ht(this,"segment");Ht(this,"otherSE");Ht(this,"consumedBy");h.events===void 0?h.events=[this]:h.events.push(this),this.point=h,this.isLeft=v}static compare(h,v){let w=mx.comparePoints(h.point,v.point);return w!==0?w:(h.point!==v.point&&h.link(v),h.isLeft!==v.isLeft?h.isLeft?1:-1:No.compare(h.segment,v.segment))}static comparePoints(h,v){return h.x.isLessThan(v.x)?-1:h.x.isGreaterThan(v.x)?1:h.y.isLessThan(v.y)?-1:h.y.isGreaterThan(v.y)?1:0}link(h){if(h.point===this.point)throw new Error("Tried to link already linked events");let v=h.point.events;for(let w=0,C=v.length;w<C;w++){let j=v[w];this.point.events.push(j),j.point=this.point}this.checkForConsuming()}checkForConsuming(){let h=this.point.events.length;for(let v=0;v<h;v++){let w=this.point.events[v];if(w.segment.consumedBy===void 0)for(let C=v+1;C<h;C++){let j=this.point.events[C];j.consumedBy===void 0&&w.otherSE.point.events===j.otherSE.point.events&&w.segment.consume(j.segment)}}}getAvailableLinkedEvents(){let h=[];for(let v=0,w=this.point.events.length;v<w;v++){let C=this.point.events[v];C!==this&&!C.segment.ringOut&&C.segment.isInResult()&&h.push(C)}return h}getLeftmostComparator(h){let v=new Map,w=C=>{let j=C.otherSE;v.set(C,{sine:Af(this.point,h.point,j.point),cosine:nu(this.point,h.point,j.point)})};return(C,j)=>{v.has(C)||w(C),v.has(j)||w(j);let{sine:X,cosine:te}=v.get(C),{sine:de,cosine:Le}=v.get(j);return X.isGreaterThanOrEqualTo(0)&&de.isGreaterThanOrEqualTo(0)?te.isLessThan(Le)?1:te.isGreaterThan(Le)?-1:0:X.isLessThan(0)&&de.isLessThan(0)?te.isLessThan(Le)?-1:te.isGreaterThan(Le)?1:0:de.isLessThan(X)?-1:de.isGreaterThan(X)?1:0}}},Lu=0,No=class $g{constructor(h,v,w,C){Ht(this,"id");Ht(this,"leftSE");Ht(this,"rightSE");Ht(this,"rings");Ht(this,"windings");Ht(this,"ringOut");Ht(this,"consumedBy");Ht(this,"prev");Ht(this,"_prevInResult");Ht(this,"_beforeState");Ht(this,"_afterState");Ht(this,"_isInResult");this.id=++Lu,this.leftSE=h,h.segment=this,h.otherSE=v,this.rightSE=v,v.segment=this,v.otherSE=h,this.rings=w,this.windings=C}static compare(h,v){let w=h.leftSE.point.x,C=v.leftSE.point.x,j=h.rightSE.point.x,X=v.rightSE.point.x;if(X.isLessThan(w))return 1;if(j.isLessThan(C))return-1;let te=h.leftSE.point.y,de=v.leftSE.point.y,Le=h.rightSE.point.y,Je=v.rightSE.point.y;if(w.isLessThan(C)){if(de.isLessThan(te)&&de.isLessThan(Le))return 1;if(de.isGreaterThan(te)&&de.isGreaterThan(Le))return-1;let ze=h.comparePoint(v.leftSE.point);if(ze<0)return 1;if(ze>0)return-1;let vt=v.comparePoint(h.rightSE.point);return vt!==0?vt:-1}if(w.isGreaterThan(C)){if(te.isLessThan(de)&&te.isLessThan(Je))return-1;if(te.isGreaterThan(de)&&te.isGreaterThan(Je))return 1;let ze=v.comparePoint(h.leftSE.point);if(ze!==0)return ze;let vt=h.comparePoint(v.rightSE.point);return vt<0?1:vt>0?-1:1}if(te.isLessThan(de))return-1;if(te.isGreaterThan(de))return 1;if(j.isLessThan(X)){let ze=v.comparePoint(h.rightSE.point);if(ze!==0)return ze}if(j.isGreaterThan(X)){let ze=h.comparePoint(v.rightSE.point);if(ze<0)return 1;if(ze>0)return-1}if(!j.eq(X)){let ze=Le.minus(te),vt=j.minus(w),At=Je.minus(de),Xt=X.minus(C);if(ze.isGreaterThan(vt)&&At.isLessThan(Xt))return 1;if(ze.isLessThan(vt)&&At.isGreaterThan(Xt))return-1}return j.isGreaterThan(X)?1:j.isLessThan(X)||Le.isLessThan(Je)?-1:Le.isGreaterThan(Je)?1:h.id<v.id?-1:h.id>v.id?1:0}static fromRing(h,v,w){let C,j,X,te=gs.comparePoints(h,v);if(te<0)C=h,j=v,X=1;else if(te>0)C=v,j=h,X=-1;else throw new Error(`Tried to create degenerate segment at [${h.x}, ${h.y}]`);let de=new gs(C,!0),Le=new gs(j,!1);return new $g(de,Le,[w],[X])}replaceRightSE(h){this.rightSE=h,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let h=this.leftSE.point.y,v=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:h.isLessThan(v)?h:v},ur:{x:this.rightSE.point.x,y:h.isGreaterThan(v)?h:v}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(h){return h.x.eq(this.leftSE.point.x)&&h.y.eq(this.leftSE.point.y)||h.x.eq(this.rightSE.point.x)&&h.y.eq(this.rightSE.point.y)}comparePoint(h){return Hi.orient(this.leftSE.point,h,this.rightSE.point)}getIntersection(h){let v=this.bbox(),w=h.bbox(),C=wc(v,w);if(C===null)return null;let j=this.leftSE.point,X=this.rightSE.point,te=h.leftSE.point,de=h.rightSE.point,Le=ps(v,te)&&this.comparePoint(te)===0,Je=ps(w,j)&&h.comparePoint(j)===0,ze=ps(v,de)&&this.comparePoint(de)===0,vt=ps(w,X)&&h.comparePoint(X)===0;if(Je&&Le)return vt&&!ze?X:!vt&&ze?de:null;if(Je)return ze&&j.x.eq(de.x)&&j.y.eq(de.y)?null:j;if(Le)return vt&&X.x.eq(te.x)&&X.y.eq(te.y)?null:te;if(vt&&ze)return null;if(vt)return X;if(ze)return de;let At=De(j,this.vector(),te,h.vector());return At===null||!ps(C,At)?null:Hi.snap(At)}split(h){let v=[],w=h.events!==void 0,C=new gs(h,!0),j=new gs(h,!1),X=this.rightSE;this.replaceRightSE(j),v.push(j),v.push(C);let te=new $g(C,X,this.rings.slice(),this.windings.slice());return gs.comparePoints(te.leftSE.point,te.rightSE.point)>0&&te.swapEvents(),gs.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),w&&(C.checkForConsuming(),j.checkForConsuming()),v}swapEvents(){let h=this.rightSE;this.rightSE=this.leftSE,this.leftSE=h,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let v=0,w=this.windings.length;v<w;v++)this.windings[v]*=-1}consume(h){let v=this,w=h;for(;v.consumedBy;)v=v.consumedBy;for(;w.consumedBy;)w=w.consumedBy;let C=$g.compare(v,w);if(C!==0){if(C>0){let j=v;v=w,w=j}if(v.prev===w){let j=v;v=w,w=j}for(let j=0,X=w.rings.length;j<X;j++){let te=w.rings[j],de=w.windings[j],Le=v.rings.indexOf(te);Le===-1?(v.rings.push(te),v.windings.push(de)):v.windings[Le]+=de}w.rings=null,w.windings=null,w.consumedBy=v,w.leftSE.consumedBy=v.leftSE,w.rightSE.consumedBy=v.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let h=this.prev.consumedBy||this.prev;this._beforeState=h.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let h=this.beforeState();this._afterState={rings:h.rings.slice(0),windings:h.windings.slice(0),multiPolys:[]};let v=this._afterState.rings,w=this._afterState.windings,C=this._afterState.multiPolys;for(let te=0,de=this.rings.length;te<de;te++){let Le=this.rings[te],Je=this.windings[te],ze=v.indexOf(Le);ze===-1?(v.push(Le),w.push(Je)):w[ze]+=Je}let j=[],X=[];for(let te=0,de=v.length;te<de;te++){if(w[te]===0)continue;let Le=v[te],Je=Le.poly;if(X.indexOf(Je)===-1)if(Le.isExterior)j.push(Je);else{X.indexOf(Je)===-1&&X.push(Je);let ze=j.indexOf(Le.poly);ze!==-1&&j.splice(ze,1)}}for(let te=0,de=j.length;te<de;te++){let Le=j[te].multiPoly;C.indexOf(Le)===-1&&C.push(Le)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let h=this.beforeState().multiPolys,v=this.afterState().multiPolys;switch(Kc.type){case"union":{let w=h.length===0,C=v.length===0;this._isInResult=w!==C;break}case"intersection":{let w,C;h.length<v.length?(w=h.length,C=v.length):(w=v.length,C=h.length),this._isInResult=C===Kc.numMultiPolys&&w<C;break}case"xor":{let w=Math.abs(h.length-v.length);this._isInResult=w%2===1;break}case"difference":{let w=C=>C.length===1&&C[0].isSubject;this._isInResult=w(h)!==w(v);break}}return this._isInResult}},Vr=class{constructor(l,h,v){Ht(this,"poly");Ht(this,"isExterior");Ht(this,"segments");Ht(this,"bbox");if(!Array.isArray(l)||l.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=h,this.isExterior=v,this.segments=[],typeof l[0][0]!="number"||typeof l[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let w=Hi.snap({x:new Se(l[0][0]),y:new Se(l[0][1])});this.bbox={ll:{x:w.x,y:w.y},ur:{x:w.x,y:w.y}};let C=w;for(let j=1,X=l.length;j<X;j++){if(typeof l[j][0]!="number"||typeof l[j][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let te=Hi.snap({x:new Se(l[j][0]),y:new Se(l[j][1])});te.x.eq(C.x)&&te.y.eq(C.y)||(this.segments.push(No.fromRing(C,te,this)),te.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=te.x),te.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=te.y),te.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=te.x),te.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=te.y),C=te)}(!w.x.eq(C.x)||!w.y.eq(C.y))&&this.segments.push(No.fromRing(C,w,this))}getSweepEvents(){let l=[];for(let h=0,v=this.segments.length;h<v;h++){let w=this.segments[h];l.push(w.leftSE),l.push(w.rightSE)}return l}},Wc=class{constructor(l,h){Ht(this,"multiPoly");Ht(this,"exteriorRing");Ht(this,"interiorRings");Ht(this,"bbox");if(!Array.isArray(l))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Vr(l[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let v=1,w=l.length;v<w;v++){let C=new Vr(l[v],this,!1);C.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=C.bbox.ll.x),C.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=C.bbox.ll.y),C.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=C.bbox.ur.x),C.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=C.bbox.ur.y),this.interiorRings.push(C)}this.multiPoly=h}getSweepEvents(){let l=this.exteriorRing.getSweepEvents();for(let h=0,v=this.interiorRings.length;h<v;h++){let w=this.interiorRings[h].getSweepEvents();for(let C=0,j=w.length;C<j;C++)l.push(w[C])}return l}},uh=class{constructor(l,h){Ht(this,"isSubject");Ht(this,"polys");Ht(this,"bbox");if(!Array.isArray(l))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof l[0][0][0]=="number"&&(l=[l])}catch{}this.polys=[],this.bbox={ll:{x:new Se(Number.POSITIVE_INFINITY),y:new Se(Number.POSITIVE_INFINITY)},ur:{x:new Se(Number.NEGATIVE_INFINITY),y:new Se(Number.NEGATIVE_INFINITY)}};for(let v=0,w=l.length;v<w;v++){let C=new Wc(l[v],this);C.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=C.bbox.ll.x),C.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=C.bbox.ll.y),C.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=C.bbox.ur.x),C.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=C.bbox.ur.y),this.polys.push(C)}this.isSubject=h}getSweepEvents(){let l=[];for(let h=0,v=this.polys.length;h<v;h++){let w=this.polys[h].getSweepEvents();for(let C=0,j=w.length;C<j;C++)l.push(w[C])}return l}},Zc=class _1{constructor(h){Ht(this,"events");Ht(this,"poly");Ht(this,"_isExteriorRing");Ht(this,"_enclosingRing");this.events=h;for(let v=0,w=h.length;v<w;v++)h[v].segment.ringOut=this;this.poly=null}static factory(h){let v=[];for(let w=0,C=h.length;w<C;w++){let j=h[w];if(!j.isInResult()||j.ringOut)continue;let X=null,te=j.leftSE,de=j.rightSE,Le=[te],Je=te.point,ze=[];for(;X=te,te=de,Le.push(te),te.point!==Je;)for(;;){let vt=te.getAvailableLinkedEvents();if(vt.length===0){let yn=Le[0].point,bn=Le[Le.length-1].point;throw new Error(`Unable to complete output ring starting at [${yn.x}, ${yn.y}]. Last matching segment found ends at [${bn.x}, ${bn.y}].`)}if(vt.length===1){de=vt[0].otherSE;break}let At=null;for(let yn=0,bn=ze.length;yn<bn;yn++)if(ze[yn].point===te.point){At=yn;break}if(At!==null){let yn=ze.splice(At)[0],bn=Le.splice(yn.index);bn.unshift(bn[0].otherSE),v.push(new _1(bn.reverse()));continue}ze.push({index:Le.length,point:te.point});let Xt=te.getLeftmostComparator(X);de=vt.sort(Xt)[0].otherSE;break}v.push(new _1(Le))}return v}getGeom(){let h=this.events[0].point,v=[h];for(let Le=1,Je=this.events.length-1;Le<Je;Le++){let ze=this.events[Le].point,vt=this.events[Le+1].point;Hi.orient(ze,h,vt)!==0&&(v.push(ze),h=ze)}if(v.length===1)return null;let w=v[0],C=v[1];Hi.orient(w,h,C)===0&&v.shift(),v.push(v[0]);let j=this.isExteriorRing()?1:-1,X=this.isExteriorRing()?0:v.length-1,te=this.isExteriorRing()?v.length:-1,de=[];for(let Le=X;Le!=te;Le+=j)de.push([v[Le].x.toNumber(),v[Le].y.toNumber()]);return de}isExteriorRing(){if(this._isExteriorRing===void 0){let h=this.enclosingRing();this._isExteriorRing=h?!h.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var C,j;let h=this.events[0];for(let X=1,te=this.events.length;X<te;X++){let de=this.events[X];gs.compare(h,de)>0&&(h=de)}let v=h.segment.prevInResult(),w=v?v.prevInResult():null;for(;;){if(!v)return null;if(!w)return v.ringOut;if(w.ringOut!==v.ringOut)return((C=w.ringOut)==null?void 0:C.enclosingRing())!==v.ringOut?v.ringOut:(j=v.ringOut)==null?void 0:j.enclosingRing();v=w.prevInResult(),w=v?v.prevInResult():null}}},Wa=class{constructor(l){Ht(this,"exteriorRing");Ht(this,"interiorRings");this.exteriorRing=l,l.poly=this,this.interiorRings=[]}addInterior(l){this.interiorRings.push(l),l.poly=this}getGeom(){let l=this.exteriorRing.getGeom();if(l===null)return null;let h=[l];for(let v=0,w=this.interiorRings.length;v<w;v++){let C=this.interiorRings[v].getGeom();C!==null&&h.push(C)}return h}},xc=class{constructor(l){Ht(this,"rings");Ht(this,"polys");this.rings=l,this.polys=this._composePolys(l)}getGeom(){let l=[];for(let h=0,v=this.polys.length;h<v;h++){let w=this.polys[h].getGeom();w!==null&&l.push(w)}return l}_composePolys(l){var v;let h=[];for(let w=0,C=l.length;w<C;w++){let j=l[w];if(!j.poly)if(j.isExteriorRing())h.push(new Wa(j));else{let X=j.enclosingRing();X!=null&&X.poly||h.push(new Wa(X)),(v=X==null?void 0:X.poly)==null||v.addInterior(j)}}return h}},kf=class{constructor(l,h=No.compare){Ht(this,"queue");Ht(this,"tree");Ht(this,"segments");this.queue=l,this.tree=new sn(h),this.segments=[]}process(l){let h=l.segment,v=[];if(l.consumedBy)return l.isLeft?this.queue.delete(l.otherSE):this.tree.delete(h),v;l.isLeft&&this.tree.add(h);let w=h,C=h;do w=this.tree.lastBefore(w);while(w!=null&&w.consumedBy!=null);do C=this.tree.firstAfter(C);while(C!=null&&C.consumedBy!=null);if(l.isLeft){let j=null;if(w){let te=w.getIntersection(h);if(te!==null&&(h.isAnEndpoint(te)||(j=te),!w.isAnEndpoint(te))){let de=this._splitSafely(w,te);for(let Le=0,Je=de.length;Le<Je;Le++)v.push(de[Le])}}let X=null;if(C){let te=C.getIntersection(h);if(te!==null&&(h.isAnEndpoint(te)||(X=te),!C.isAnEndpoint(te))){let de=this._splitSafely(C,te);for(let Le=0,Je=de.length;Le<Je;Le++)v.push(de[Le])}}if(j!==null||X!==null){let te=null;j===null?te=X:X===null?te=j:te=gs.comparePoints(j,X)<=0?j:X,this.queue.delete(h.rightSE),v.push(h.rightSE);let de=h.split(te);for(let Le=0,Je=de.length;Le<Je;Le++)v.push(de[Le])}v.length>0?(this.tree.delete(h),v.push(l)):(this.segments.push(h),h.prev=w)}else{if(w&&C){let j=w.getIntersection(C);if(j!==null){if(!w.isAnEndpoint(j)){let X=this._splitSafely(w,j);for(let te=0,de=X.length;te<de;te++)v.push(X[te])}if(!C.isAnEndpoint(j)){let X=this._splitSafely(C,j);for(let te=0,de=X.length;te<de;te++)v.push(X[te])}}}this.tree.delete(h)}return v}_splitSafely(l,h){this.tree.delete(l);let v=l.rightSE;this.queue.delete(v);let w=l.split(h);return w.push(v),l.consumedBy===void 0&&this.tree.add(l),w}},pd=class{constructor(){Ht(this,"type");Ht(this,"numMultiPolys")}run(l,h,v){Ju.type=l;let w=[new uh(h,!0)];for(let de=0,Le=v.length;de<Le;de++)w.push(new uh(v[de],!1));if(Ju.numMultiPolys=w.length,Ju.type==="difference"){let de=w[0],Le=1;for(;Le<w.length;)wc(w[Le].bbox,de.bbox)!==null?Le++:w.splice(Le,1)}if(Ju.type==="intersection")for(let de=0,Le=w.length;de<Le;de++){let Je=w[de];for(let ze=de+1,vt=w.length;ze<vt;ze++)if(wc(Je.bbox,w[ze].bbox)===null)return[]}let C=new sn(gs.compare);for(let de=0,Le=w.length;de<Le;de++){let Je=w[de].getSweepEvents();for(let ze=0,vt=Je.length;ze<vt;ze++)C.add(Je[ze])}let j=new kf(C),X=null;for(C.size!=0&&(X=C.first(),C.delete(X));X;){let de=j.process(X);for(let Le=0,Je=de.length;Le<Je;Le++){let ze=de[Le];ze.consumedBy===void 0&&C.add(ze)}C.size!=0?(X=C.first(),C.delete(X)):X=null}Hi.reset();let te=Zc.factory(j.segments);return new xc(te).getGeom()}},Ju=new pd,Kc=Ju,Fl=(l,...h)=>Kc.run("intersection",l,h),gd=(l,...h)=>Kc.run("difference",l,h);Hi.set;function Yc(l){let h={type:"Feature"};return h.geometry=l,h}function Jc(l){return l.type==="Feature"?l.geometry:l}function ch(l){return l&&l.geometry&&l.geometry.coordinates?l.geometry.coordinates:l}function fh(l){return Yc({type:"LineString",coordinates:l})}function Ma(l){return Yc({type:"MultiLineString",coordinates:l})}function hh(l){return Yc({type:"Polygon",coordinates:l})}function dh(l){return Yc({type:"MultiPolygon",coordinates:l})}function ph(l,h){let v=Jc(l),w=Jc(h),C=Fl(v.coordinates,w.coordinates);return C.length===0?null:C.length===1?hh(C[0]):dh(C)}function b(l,h){let v=Jc(l),w=Jc(h),C=gd(v.coordinates,w.coordinates);return C.length===0?null:C.length===1?hh(C[0]):dh(C)}function P(l){return Array.isArray(l)?1+P(l[0]):-1}function H(l){l instanceof L.Polyline&&(l=l.toGeoJSON(15));let h=ch(l),v=P(h),w=[];return v>1?h.forEach(C=>{w.push(fh(C))}):w.push(l),w}function se(l){let h=[];return l.eachLayer(v=>{h.push(ch(v.toGeoJSON(15)))}),Ma(h)}no.Cut=no.Polygon.extend({initialize(l){this._map=l,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let l=this._layer.getLatLngs();if(l.length<=2)return;let h=L.polygon(l,this.options.pathOptions);h._latlngInfos=this._layer._latlngInfo,this.cut(h),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:w,originalLayer:C})=>{this._fireCut(C,w,C),this._fireCut(this._map,w,C),C.pm._fireEdit()}),this._editedLayers=[];let v=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(v))},cut(l){let h=this._map._layers,v=l._latlngInfos||[];Object.keys(h).map(w=>h[w]).filter(w=>w.pm).filter(w=>!w._pmTempLayer).filter(w=>!L.PM.optIn&&!w.options.pmIgnore||L.PM.optIn&&w.options.pmIgnore===!1).filter(w=>w instanceof L.Polyline).filter(w=>w!==l).filter(w=>w.pm.options.allowCutting).filter(w=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(w)>-1:!0).filter(w=>!this._layerGroup.hasLayer(w)).filter(w=>{try{let C=!!fs(l.toGeoJSON(15),w.toGeoJSON(15)).features.length>0;return C||w instanceof L.Polyline&&!(w instanceof L.Polygon)?C:!!ph(l.toGeoJSON(15),w.toGeoJSON(15))}catch{return w instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(w=>{let C;if(w instanceof L.Polygon){C=L.polygon(w.getLatLngs());let de=C.getLatLngs();v.forEach(Le=>{if(Le&&Le.snapInfo){let{latlng:Je}=Le,ze=this._calcClosestLayer(Je,[C]);if(ze&&ze.segment&&ze.distance<this.options.snapDistance){let{segment:vt}=ze;if(vt&&vt.length===2){let{indexPath:At,parentPath:Xt,newIndex:yn}=L.PM.Utils._getIndexFromSegment(de,vt);(At.length>1?(0,Oi.default)(de,Xt):de).splice(yn,0,Je)}}}})}else C=w;let j=this._cutLayer(l,C),X=L.geoJSON(j,w.options);X.getLayers().length===1&&([X]=X.getLayers()),this._setPane(X,"layerPane");let te=X.addTo(this._map.pm._getContainingLayer());if(te.pm.enable(w.pm.options),te.pm.disable(),w._pmTempLayer=!0,l._pmTempLayer=!0,w.remove(),w.removeFrom(this._map.pm._getContainingLayer()),l.remove(),l.removeFrom(this._map.pm._getContainingLayer()),te.getLayers&&te.getLayers().length===0&&this._map.pm.removeLayer({target:te}),te instanceof L.LayerGroup?(te.eachLayer(de=>{this._addDrawnLayerProp(de)}),this._addDrawnLayerProp(te)):this._addDrawnLayerProp(te),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let de=this.options.layersToCut.indexOf(w);de>-1&&this.options.layersToCut.splice(de,1)}this._editedLayers.push({layer:te,originalLayer:w})})},_cutLayer(l,h){let v=L.geoJSON(),w;if(h instanceof L.Polygon)w=b(h.toGeoJSON(15),l.toGeoJSON(15));else{let C=H(h);C.forEach(j=>{let X=Kn(j,l.toGeoJSON(15)),te;X&&X.features.length>0?te=L.geoJSON(X):te=L.geoJSON(j),te.getLayers().forEach(de=>{oa(l.toGeoJSON(15),de.toGeoJSON(15))||de.addTo(v)})}),C.length>1?w=se(v):w=v.toGeoJSON(15)}return w},_change:L.Util.falseFn}),no.Text=no.extend({initialize(l){this._map=l,this._shape="Text",this.toolbarButtonName="drawText"},enable(l){L.Util.setOptions(this,l),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(or("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var l;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(l=this._hintMarker)==null||l.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this.options.snappable){let h=l;h.target=this._hintMarker,this._handleSnapping(h)}},_createMarker(l){var C,j,X,te;if(!l.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(C=this.options.textOptions)==null?void 0:C.className){let de=this.options.textOptions.className.split(" ");this.textArea.classList.add(...de)}let v=this._createTextIcon(this.textArea),w=new L.Marker(h,{textMarker:!0,_textMarkerOverPM:!0,icon:v});if(this._setPane(w,"markerPane"),this._finishLayer(w),w.pm||(w.options.draggable=!1),w.addTo(this._map.pm._getContainingLayer()),w.pm){w.pm.textArea=this.textArea,L.setOptions(w.pm,{removeIfEmpty:((j=this.options.textOptions)==null?void 0:j.removeIfEmpty)??!0});let de=((X=this.options.textOptions)==null?void 0:X.focusAfterDraw)??!0;w.pm._createTextMarker(de),(te=this.options.textOptions)!=null&&te.text&&w.pm.setText(this.options.textOptions.text)}this._fireCreate(w),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(l){this.enable(),this._hintMarker.setLatLng(l.latlng)},_createTextArea(){let l=document.createElement("textarea");return l.readOnly=!0,l.classList.add("pm-textarea","pm-disabled"),l},_createTextIcon(l){return L.divIcon({className:"pm-text-marker",html:l})}});var _e={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,bi(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let l=this._getDOMElem();l&&(bi(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(l)):L.DomEvent.on(l,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,bi(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let l=this._getDOMElem();l&&(bi(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(l)):L.DomEvent.off(l,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(l){let h=l.touches?l.touches[0]:l,v={originalEvent:h,target:this._layer};return v.containerPoint=this._map.mouseEventToContainerPoint(h),v.latlng=this._map.containerPointToLatLng(v.containerPoint),this._dragMixinOnMouseDown(v),!1},_simulateMouseMoveEvent(l){let h=l.touches?l.touches[0]:l,v={originalEvent:h,target:this._layer};return v.containerPoint=this._map.mouseEventToContainerPoint(h),v.latlng=this._map.containerPointToLatLng(v.containerPoint),this._dragMixinOnMouseMove(v),!1},_simulateMouseUpEvent(l){let h={originalEvent:l.touches?l.touches[0]:l,target:this._layer};return l.type.indexOf("touch")===-1&&(h.containerPoint=this._map.mouseEventToContainerPoint(l),h.latlng=this._map.containerPointToLatLng(h.containerPoint)),this._dragMixinOnMouseUp(h),!1},_dragMixinOnMouseDown(l){if(l.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(l);let h=l._fromLayerSync,v=this._syncLayers("_dragMixinOnMouseDown",l);if(this._layer instanceof L.Marker&&(this.options.snappable&&!h&&!v?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let w="resizeableCircleMarker";this._layer instanceof L.Circle&&(w="resizeableCircle"),this.options.snappable&&!h&&!v?this._layer.pm.options[w]||this._initSnappableMarkersDrag():this._layer.pm.options[w]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=l.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(l){this._overwriteEventIfItComesFromMarker(l);let h=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",l),this._dragging||(this._dragging=!0,L.DomUtil.addClass(h,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=l.latlng),this._onLayerDrag(l),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(l){let h=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",l),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,h&&L.DomUtil.removeClass(h,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(l){let{latlng:h}=l,v={lat:h.lat-this._tempDragCoord.lat,lng:h.lng-this._tempDragCoord.lng},w=C=>C.map(j=>{if(Array.isArray(j))return w(j);let X={lat:j.lat+v.lat,lng:j.lng+v.lng};return(j.alt||j.alt===0)&&(X.alt=j.alt),X});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let C=w([this._layer.getLatLng()]);this._layer.setLatLng(C[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let C=this._layer.getLatLng();this._layer._snapped&&(C=this._layer._orgLatLng);let j=w([C]);this._layer.setLatLng(j[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let C=w([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(C),this._fireChange(this._layer.getBounds(),"Edit")}else{let C=w(this._layer.getLatLngs());this._layer.setLatLngs(C),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=h,l.layer=this._layer,this._fireDrag(l)},addDraggingClass(){let l=this._getDOMElem();l&&L.DomUtil.addClass(l,"leaflet-pm-draggable")},removeDraggingClass(){let l=this._getDOMElem();l&&L.DomUtil.removeClass(l,"leaflet-pm-draggable")},_getDOMElem(){let l=null;return this._layer._path?l=this._layer._path:this._layer._renderer&&this._layer._renderer._container?l=this._layer._renderer._container:this._layer._image?l=this._layer._image:this._layer._icon&&(l=this._layer._icon),l},_overwriteEventIfItComesFromMarker(l){l.target.getLatLng&&(!l.target._radius||l.target._radius<=10)&&(l.containerPoint=this._map.mouseEventToContainerPoint(l.originalEvent),l.latlng=this._map.containerPointToLatLng(l.containerPoint))},_syncLayers(l,h){if(this.enabled())return!1;if(!h._fromLayerSync&&this._layer===h.target&&this.options.syncLayersOnDrag){h._fromLayerSync=!0;let v=[];if(L.Util.isArray(this.options.syncLayersOnDrag))v=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(w=>{w instanceof L.LayerGroup&&(v=v.concat(w.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let w in this._parentLayerGroup){let C=this._parentLayerGroup[w];C.pm&&(v=C.pm.getLayers(!0))}return L.Util.isArray(v)&&v.length>0&&(v=v.filter(w=>!!w.pm).filter(w=>!!w.pm.options.draggable),v.forEach(w=>{w!==this._layer&&w.pm[l]&&(w._snapped=!1,w.pm[l](h))})),v.length>0}return!1},_stopDOMImageDrag(l){return l.preventDefault(),!1}},Ee=_e,Ae=f(ui());function Te(l,h,v,w){return v.unproject(h.transform(v.project(l,w)),w)}function Ne(l,h,v){let w=v.getMaxZoom();if(w===1/0&&(w=v.getZoom()),L.Util.isArray(l)){let C=[];return l.forEach(j=>{C.push(Ne(j,h,v))}),C}return l instanceof L.LatLng?Te(l,h,v,w):null}function He(l,h){h instanceof L.Layer&&(h=h.getLatLng());let v=l.getMaxZoom();return v===1/0&&(v=l.getZoom()),l.project(h,v)}function ht(l,h){let v=l.getMaxZoom();return v===1/0&&(v=l.getZoom()),l.unproject(h,v)}var Dt={_onRotateStart(l){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=He(this._map,this._rotationOriginLatLng),this._rotationStartPoint=He(this._map,l.target.getLatLng()),this._initialRotateLatLng=Os(this._layer),this._startAngle=this.getAngle();let h=Os(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,h),this._fireRotationStart(this._map,h)},_onRotate(l){let h=He(this._map,l.target.getLatLng()),v=this._rotationStartPoint,w=this._rotationOriginPoint,C=Math.atan2(h.y-w.y,h.x-w.x)-Math.atan2(v.y-w.y,v.x-w.x);this._layer.setLatLngs(this._rotateLayer(C,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let j=this;function X(Je,ze=[],vt=-1){if(vt>-1&&ze.push(vt),L.Util.isArray(Je[0]))Je.forEach((At,Xt)=>X(At,ze.slice(),Xt));else{let At=ze.length>0?(0,Ae.default)(j._markers,ze):j._markers[0];Je.forEach((Xt,yn)=>{At[yn].setLatLng(Xt)})}}X(this._layer.getLatLngs());let te=Os(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(C,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let de=C*180/Math.PI;de=de<0?de+360:de;let Le=de+this._startAngle;this._setAngle(Le),this._rotationLayer.pm._setAngle(Le),this._fireRotation(this._rotationLayer,de,te),this._fireRotation(this._map,de,te),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let l=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let h=Os(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Os(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,l,h),this._fireRotationEnd(this._map,l,h),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(l,h,v,w,C){let j=He(C,v);return this._matrix=w.clone().rotate(l,j).flip(),Ne(h,this._matrix,C)},_setAngle(l){l=l<0?l+360:l,this._angle=l%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let l=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),h=l.getCenter();return l.removeFrom(this._layer._map),h},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(ta(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let l={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),l),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Os(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(l){let h=this.getAngle(),v=this._layer.getLatLngs(),w=l*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(w,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+l),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(w,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let C=this.getAngle()-h;C=C<0?C+360:C,this._startAngle=h,this._fireRotation(this._layer,C,v,this._layer),this._fireRotation(this._map||this._layer._map,C,v,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(l){let h=l-this.getAngle();this.rotateLayer(h)},getAngle(){return this._angle||0},setInitAngle(l){this._setAngle(l)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(l){this._rotationCenter=l,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(l)}},Nt=Dt,wt=L.Class.extend({includes:[Ee,Cs,Nt,Dl],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(l){L.Util.setOptions(this,l)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(l,h){h==="layerPane"?l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":h==="vertexPane"?l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":h==="markerPane"&&(l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(l,h){let v=h.target,w={layer:this._layer,marker:v,event:h},C="";return l==="move"?C="moveVertexValidation":l==="add"?C="addVertexValidation":l==="remove"&&(C="removeVertexValidation"),this.options[C]&&typeof this.options[C]=="function"&&!this.options[C](w)?(l==="move"&&(v._cancelDragEventChain=v.getLatLng()),!1):(v._cancelDragEventChain=null,!0)},_vertexValidationDrag(l){return l._cancelDragEventChain?(l._latlng=l._cancelDragEventChain,l.update(),!1):!0},_vertexValidationDragEnd(l){return l._cancelDragEventChain?(l._cancelDragEventChain=null,!1):!0}}),Yt=wt;Yt.LayerGroup=L.Class.extend({initialize(l){this._layerGroup=l,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(w=>this._initLayer(w));let h=w=>{if(w.layer._pmTempLayer)return;this._layers=this.getLayers();let C=this._layers.filter(j=>!j.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in j.pm._parentLayerGroup));C.forEach(j=>{this._initLayer(j)}),C.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(h,100,this),this),this._layerGroup.on("layerremove",w=>{this._removeLayerFromGroup(w.target)},this);let v=w=>{w.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(v,100,this),this)},enable(l,h=[]){h.length===0&&(this._layers=this.getLayers()),this._options=l,this._layers.forEach(v=>{v instanceof L.LayerGroup?h.indexOf(v._leaflet_id)===-1&&(h.push(v._leaflet_id),v.pm.enable(l,h)):v.pm.enable(l)})},disable(l=[]){l.length===0&&(this._layers=this.getLayers()),this._layers.forEach(h=>{h instanceof L.LayerGroup?l.indexOf(h._leaflet_id)===-1&&(l.push(h._leaflet_id),h.pm.disable(l)):h.pm.disable()})},enabled(l=[]){return l.length===0&&(this._layers=this.getLayers()),!!this._layers.find(h=>h instanceof L.LayerGroup?l.indexOf(h._leaflet_id)===-1?(l.push(h._leaflet_id),h.pm.enabled(l)):!1:h.pm.enabled())},toggleEdit(l,h=[]){h.length===0&&(this._layers=this.getLayers()),this._options=l,this._layers.forEach(v=>{v instanceof L.LayerGroup?h.indexOf(v._leaflet_id)===-1&&(h.push(v._leaflet_id),v.pm.toggleEdit(l,h)):v.pm.toggleEdit(l)})},_initLayer(l){let h=L.Util.stamp(this._layerGroup);l.pm._parentLayerGroup||(l.pm._parentLayerGroup={}),l.pm._parentLayerGroup[h]=this._layerGroup},_removeLayerFromGroup(l){if(l.pm&&l.pm._layerGroup){let h=L.Util.stamp(this._layerGroup);delete l.pm._layerGroup[h]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(l=>l.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var l;return this._map||((l=this._layers.find(h=>!!h._map))==null?void 0:l._map)||null},getLayers(l=!1,h=!0,v=!0,w=[]){let C=[];return l?this._layerGroup.getLayers().forEach(j=>{C.push(j),j instanceof L.LayerGroup&&w.indexOf(j._leaflet_id)===-1&&(w.push(j._leaflet_id),C=C.concat(j.pm.getLayers(!0,!0,!0,w)))}):C=this._layerGroup.getLayers(),v&&(C=C.filter(j=>!(j instanceof L.LayerGroup))),h&&(C=C.filter(j=>!!j.pm),C=C.filter(j=>!j._pmTempLayer),C=C.filter(j=>!L.PM.optIn&&!j.options.pmIgnore||L.PM.optIn&&j.options.pmIgnore===!1)),C},setOptions(l,h=[]){h.length===0&&(this._layers=this.getLayers()),this.options=l,this._layers.forEach(v=>{v.pm&&(v instanceof L.LayerGroup?h.indexOf(v._leaflet_id)===-1&&(h.push(v._leaflet_id),v.pm.setOptions(l,h)):v.pm.setOptions(l))})}}),Yt.Marker=Yt.extend({_shape:"Marker",initialize(l){this._layer=l,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(l={draggable:!0}){if(L.Util.setOptions(this,l),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(l){this.enabled()?this.disable():this.enable(l)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(l){let h=l.target;h.remove(),this._fireRemove(h),this._fireRemove(this._map,h)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let l=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,l.off("pm:drag",this._handleSnapping,this),l.on("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.on("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this),l.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let l=this._layer;l.off("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this)}});var $t=f(ui()),dt={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let l=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=l.filter((h,v,w)=>w.indexOf(h)===v)},_removeFromCache(l){let h=this.markerCache.indexOf(l);h>-1&&this.markerCache.splice(h,1)},renderLimits(l){this.markerCache.forEach(h=>{l.includes(h)?this._markerGroup.addLayer(h):this._markerGroup.removeLayer(h)})},applyLimitFilters({latlng:l={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let h=[...this._filterClosestMarkers(l)];this.renderLimits(h)},_filterClosestMarkers(l){let h=[...this.markerCache],v=this.options.limitMarkersToCount;return v===-1?h:(h.sort((w,C)=>{let j=w._latlng.distanceTo(l),X=C._latlng.distanceTo(l);return j-X}),h.filter((w,C)=>v>-1?C<v:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(l){this._preventRenderMarkers=!!l}},yt=dt;Yt.Line=Yt.extend({includes:[yt],_shape:"Line",initialize(l){this._layer=l,this._enabled=!1},enable(l){if(L.Util.setOptions(this,l),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let l=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(l,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(l){return this.enabled()?this.disable():this.enable(l),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let l=this._map,h=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(l),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let v=w=>{if(Array.isArray(w[0]))return w.map(v,this);let C=w.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&w.map((j,X)=>{let te=this.isPolygon()?(X+1)%w.length:X+1;return this._createMiddleMarker(C[X],C[te])}),C};this._markers=v(h),this.filterMarkerGroup(),l.addLayer(this._markerGroup)},_createMarker(l){let h=new L.Marker(l,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._pmTempLayer=!0,this.options.rotate?(h.on("dragstart",this._onRotateStart,this),h.on("drag",this._onRotate,this),h.on("dragend",this._onRotateEnd,this)):(h.on("click",this._onVertexClick,this),h.on("dragstart",this._onMarkerDragStart,this),h.on("move",this._onMarkerDrag,this),h.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||h.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(h),h},_createMiddleMarker(l,h){if(!l||!h)return!1;let v=L.PM.Utils.calcMiddleLatLng(this._map,l.getLatLng(),h.getLatLng()),w=this._createMarker(v),C=L.divIcon({className:"marker-icon marker-icon-middle"});return w.setIcon(C),w.leftM=l,w.rightM=h,l._middleMarkerNext=w,h._middleMarkerPrev=w,w.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),w.on("movestart",this._onMiddleMarkerMoveStart,this),w},_onMiddleMarkerClick(l){let h=l.target;if(!this._vertexValidation("add",l))return;let v=L.divIcon({className:"marker-icon"});h.setIcon(v),this._addMarker(h,h.leftM,h.rightM)},_onMiddleMarkerMoveStart(l){let h=l.target;if(h.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",l)){h.on("move",this._onMiddleMarkerMovePrevent,this);return}h._dragging=!0,this._addMarker(h,h.leftM,h.rightM)},_onMiddleMarkerMovePrevent(l){let h=l.target;this._vertexValidationDrag(h)},_onMiddleMarkerMoveEnd(l){let h=l.target;if(h.off("move",this._onMiddleMarkerMovePrevent,this),h.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(h))return;let v=L.divIcon({className:"marker-icon"});h.setIcon(v),setTimeout(()=>{delete h._dragging},100)},_addMarker(l,h,v){l.off("movestart",this._onMiddleMarkerMoveStart,this),l.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let w=l.getLatLng(),C=this._layer._latlngs;delete l.leftM,delete l.rightM;let{indexPath:j,index:X,parentPath:te}=L.PM.Utils.findDeepMarkerIndex(this._markers,h),de=j.length>1?(0,$t.default)(C,te):C,Le=j.length>1?(0,$t.default)(this._markers,te):this._markers;de.splice(X+1,0,w),Le.splice(X+1,0,l),this._layer.setLatLngs(C),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(h,l),this._createMiddleMarker(l,v)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(l,L.PM.Utils.findDeepMarkerIndex(this._markers,l).indexPath,w),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return $r(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(l){let h=this._layer,v,w;if(this.options.allowSelfIntersection?v=!1:(w=$r(this._layer.toGeoJSON(15)),v=w.features.length>0),v){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return v;l?this._flashLayer():(h.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(w)}else h.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return v},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(l,h){l.forEach(v=>{Array.isArray(v)?this._updateDisabledMarkerStyle(v,h):v._icon&&(h&&!this._checkMarkerAllowedToDrag(v)?L.DomUtil.addClass(v._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(v._icon,"vertexmarker-disabled"))})},_removeMarker(l){let h=l.target;if(!this._vertexValidation("remove",l))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=Os(this._layer,this._layer.getLatLngs()));let v=this._layer.getLatLngs(),{indexPath:w,index:C,parentPath:j}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);if(!w)return;let X=w.length>1?(0,$t.default)(v,j):v,te=w.length>1?(0,$t.default)(this._markers,j):this._markers,de=j[j.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!de&&(X.length<=2||this.isPolygon()&&X.length<=3)){this._flashLayer();return}X.splice(C,1),this._layer.setLatLngs(v),this.isPolygon()&&X.length<=2&&X.splice(0,X.length);let Le=!1;if(X.length<=1&&(X.splice(0,X.length),j.length>1&&w.length>1&&(v=ul(v)),this._layer.setLatLngs(v),this._initMarkers(),Le=!0),to(v)||this._layer.remove(),v=ul(v),this._layer.setLatLngs(v),this._markers=ul(this._markers),!Le&&(te=w.length>1?(0,$t.default)(this._markers,j):this._markers,h._middleMarkerPrev&&(this._markerGroup.removeLayer(h._middleMarkerPrev),this._removeFromCache(h._middleMarkerPrev)),h._middleMarkerNext&&(this._markerGroup.removeLayer(h._middleMarkerNext),this._removeFromCache(h._middleMarkerNext)),this._markerGroup.removeLayer(h),this._removeFromCache(h),te)){let Je,ze;if(this.isPolygon()?(Je=(C+1)%te.length,ze=(C+(te.length-1))%te.length):(ze=C-1<0?void 0:C-1,Je=C+1>=te.length?void 0:C+1),Je!==ze){let vt=te[ze],At=te[Je];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(vt,At)}te.splice(C,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(h,w),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(l){let h=this._layer.getLatLngs(),v=l.getLatLng(),{indexPath:w,index:C,parentPath:j}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);(w.length>1?(0,$t.default)(h,j):h).splice(C,1,v),this._layer.setLatLngs(h)},_getNeighborMarkers(l){let{indexPath:h,index:v,parentPath:w}=L.PM.Utils.findDeepMarkerIndex(this._markers,l),C=h.length>1?(0,$t.default)(this._markers,w):this._markers,j=(v+1)%C.length,X=(v+(C.length-1))%C.length,te=C[X],de=C[j];return{prevMarker:te,nextMarker:de}},_checkMarkerAllowedToDrag(l){let{prevMarker:h,nextMarker:v}=this._getNeighborMarkers(l),w=L.polyline([h.getLatLng(),l.getLatLng()]),C=L.polyline([l.getLatLng(),v.getLatLng()]),j=fs(this._layer.toGeoJSON(15),w.toGeoJSON(15)).features.length,X=fs(this._layer.toGeoJSON(15),C.toGeoJSON(15)).features.length;return l.getLatLng()===this._markers[0][0].getLatLng()?X+=1:l.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(j+=1),!(j<=2&&X<=2)},_onMarkerDragStart(l){let h=l.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",l))return;let{indexPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);this._fireMarkerDragStart(l,v),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Os(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(h):this._markerAllowedToDrag=null},_onMarkerDrag(l){let h=l.target;if(!this._vertexValidationDrag(h))return;let{indexPath:v,index:w,parentPath:C}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);if(!v)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(h);let j=v.length>1?(0,$t.default)(this._markers,C):this._markers,X=(w+1)%j.length,te=(w+(j.length-1))%j.length,de=h.getLatLng(),Le=j[te].getLatLng(),Je=j[X].getLatLng();if(h._middleMarkerNext){let ze=L.PM.Utils.calcMiddleLatLng(this._map,de,Je);h._middleMarkerNext.setLatLng(ze)}if(h._middleMarkerPrev){let ze=L.PM.Utils.calcMiddleLatLng(this._map,de,Le);h._middleMarkerPrev.setLatLng(ze)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(l,v),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(l){let h=l.target;if(!this._vertexValidationDragEnd(h))return;let{indexPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,h),w=!this.options.allowSelfIntersection&&this.hasSelfIntersection();w&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(w=!1);let C=!this.options.allowSelfIntersection&&w;if(this._fireMarkerDragEnd(l,v,C),C){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(l,v);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(l){let h=l.target;if(h._dragging)return;let{indexPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);this._fireVertexClick(l,v)}}),Yt.Polygon=Yt.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(l){let{prevMarker:h,nextMarker:v}=this._getNeighborMarkers(l),w=L.polyline([h.getLatLng(),l.getLatLng()]),C=L.polyline([l.getLatLng(),v.getLatLng()]),j=fs(this._layer.toGeoJSON(15),w.toGeoJSON(15)).features.length,X=fs(this._layer.toGeoJSON(15),C.toGeoJSON(15)).features.length;return!(j<=2&&X<=2)}}),Yt.Rectangle=Yt.Polygon.extend({_shape:"Rectangle",_initMarkers(){let l=this._map,h=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,l.addLayer(this._markerGroup),this._markers=[],this._markers[0]=h.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((v,w)=>{let C=this._cornerMarkers.find(j=>j._index===w);C&&C.setLatLng(v)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(l,h){let v=new L.Marker(l,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(v,"vertexPane"),v._origLatLng=l,v._index=h,v._pmTempLayer=!0,v.on("click",this._onVertexClick,this),this._markerGroup.addLayer(v),v},_addMarkerEvents(){this._markers[0].forEach(l=>{l.on("dragstart",this._onMarkerDragStart,this),l.on("drag",this._onMarkerDrag,this),l.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||l.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(l){if(!this._vertexValidation("move",l))return;let h=l.target,v=this._cornerMarkers;h._oppositeCornerLatLng=v.find(C=>C._index===(h._index+2)%4).getLatLng(),h._snapped=!1;let{indexPath:w}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);this._fireMarkerDragStart(l,w)},_onMarkerDrag(l){let h=l.target;if(!this._vertexValidationDrag(h)||h._index===void 0)return;this._adjustRectangleForMarkerMove(h);let{indexPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);this._fireMarkerDrag(l,v),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(l){let h=l.target;if(!this._vertexValidationDragEnd(h))return;this._cornerMarkers.forEach(w=>{delete w._oppositeCornerLatLng});let{indexPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);this._fireMarkerDragEnd(l,v),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(l){L.extend(l._origLatLng,l._latlng);let h=L.PM.Utils._getRotatedRectangle(l.getLatLng(),l._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(h),this._adjustAllMarkers(l),this._layer.redraw()},_adjustAllMarkers(l){let h=this._layer.getLatLngs()[0];if(h&&h.length!==4&&h.length>0)h.forEach((v,w)=>{this._cornerMarkers[w].setLatLng(v)}),this._cornerMarkers.slice(h.length).forEach(v=>{v.setLatLng(h[0])});else if(!h||!h.length)console.error("The layer has no LatLngs");else{let v=h.findIndex(w=>l.getLatLng().equals(w));v>-1?(this._cornerMarkers[(l._index+1)%4].setLatLng(h[(v+1)%4]),this._cornerMarkers[(l._index+2)%4].setLatLng(h[(v+2)%4]),this._cornerMarkers[(l._index+3)%4].setLatLng(h[(v+3)%4])):this._cornerMarkers.forEach(w=>{w.setLatLng(h[w._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(ta(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let l=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(l[0],l[2],this.getAngle(),this._map||this)}}),Yt.CircleMarker=Yt.extend({_shape:"CircleMarker",initialize(l){this._layer=l,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(l={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,l),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(l){this.enabled()?this.disable():this.enable(l)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let l=this._map;this._helperLayers&&(this._helperLayers.removeFrom(l),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(l);let h=this._layer.getLatLng(),v=this._layer._radius,w=this._getLatLngOnCircle(h,v);this._centerMarker=this._createCenterMarker(h),this._outerMarker=this._createOuterMarker(w),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(l,h){let v=this._map.project(l),w=L.point(v.x+h,v.y);return this._map.unproject(w)},_createHintLine(l,h){let v=l.getLatLng(),w=h.getLatLng();this._hintline=L.polyline([v,w],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(l){let h=this._createMarker(l);return this.options.draggable?(L.DomUtil.addClass(h._icon,"leaflet-pm-draggable"),h.on("move",this._moveCircle,this)):h.dragging.disable(),h},_createOuterMarker(l){let h=this._createMarker(l);return h.on("drag",this._resizeCircle,this),h},_createMarker(l){let h=new L.Marker(l,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._origLatLng=l,h._pmTempLayer=!0,h.on("dragstart",this._onMarkerDragStart,this),h.on("drag",this._onMarkerDrag,this),h.on("dragend",this._onMarkerDragEnd,this),h.on("click",this._onVertexClick,this),this._helperLayers.addLayer(h),h},_moveCircle(l){if(l.target._cancelDragEventChain)return;let h=this._centerMarker.getLatLng();this._layer.setLatLng(h);let v=this._layer._radius,w=this._getLatLngOnCircle(h,v);this._outerMarker._latlng=w,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let l=this._layer.getLatLng(),h=this._layer._radius,v=this._getLatLngOnCircle(l,h);this._outerMarker.setLatLng(v),this._centerMarker.setLatLng(l),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let l=this._centerMarker.getLatLng(),h=this._outerMarker.getLatLng(),v=this._distanceCalculation(l,h);this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(v),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let l=this._centerMarker.getLatLng(),h=this._outerMarker.getLatLng();this._hintline.setLatLngs([l,h])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(l){this._vertexValidation("move",l)&&this._fireMarkerDragStart(l)},_onMarkerDrag(l){let h=l.target;h instanceof L.Marker&&!this._vertexValidationDrag(h)||this._fireMarkerDrag(l)},_onMarkerDragEnd(l){this._extedingMarkerDragEnd();let h=l.target;this._vertexValidationDragEnd(h)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(l))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let l=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,l.off("pm:drag",this._handleSnapping,this),l.on("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.on("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this),l.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let l=this._layer;l.off("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let l=this._layer._map||this._map;if(l){let h=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),l,this._layer.getLatLng()),v=L.circle(this._layer.getLatLng(),this._layer.options);v.setRadius(h);let w=l&&l.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(v,200,!w).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(v,200,!w),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let l=this._centerMarker.getLatLng(),h=this._outerMarker.getLatLng(),v=this._distanceCalculation(l,h);return this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?h=Nl(this._map,l,h,this._getMinDistanceInMeter(l)):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]&&(h=Nl(this._map,l,h,this._getMaxDistanceInMeter(l))),h},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let l=this._centerMarker.getLatLng(),h=this._outerMarker.getLatLng(),v=this._distanceCalculation(l,h);this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(l,h){return this._map.project(l).distanceTo(this._map.project(h))},_getMinDistanceInMeter(l){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,l)},_getMaxDistanceInMeter(l){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,l)},_onVertexClick(l){l.target._dragging||this._fireVertexClick(l,void 0)}}),Yt.Circle=Yt.CircleMarker.extend({_shape:"Circle",initialize(l){this._layer=l,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(l){L.PM.Edit.CircleMarker.prototype.enable.call(this,l||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let l=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(l,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let l=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!l).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!l),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(l,h){return this._map.distance(l,h)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(l){l.target._dragging||this._fireVertexClick(l,void 0)}}),Yt.ImageOverlay=Yt.extend({_shape:"ImageOverlay",initialize(l){this._layer=l,this._enabled=!1},toggleEdit(l){this.enabled()?this.disable():this.enable(l)},enabled(){return this._enabled},enable(l={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,l),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let l=this._layer.getBounds(),h=l.getNorthWest(),v=l.getNorthEast(),w=l.getSouthEast(),C=l.getSouthWest();return[h,v,w,C]}}),Yt.Text=Yt.extend({_shape:"Text",initialize(l){this._layer=l,this._enabled=!1},enable(l){if(L.Util.setOptions(this,l),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let l=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),l.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(l){this.enabled()?this.disable():this.enable(l)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let l=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,l.off("pm:drag",this._handleSnapping,this),l.on("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.on("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this),l.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let l=this._layer;l.off("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let l=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,h=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${l}px`,this.textArea.style.width=`${h}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(l){l.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(l={}){let h=this._hasFocus;this._hasFocus=l.type==="focus",!h!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(l){l&&(this.textArea.value=l),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let h=this.options.className.split(" ");this.textArea.classList.add(...h)}let l=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(l),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(l=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),l===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(l){l.preventDefault()}});var en=function(l,h,v,w,C,j){this._matrix=[l,h,v,w,C,j]};en.init=()=>new L.PM.Matrix(1,0,0,1,0,0),en.prototype={transform(l){return this._transform(l.clone())},_transform(l){let h=this._matrix,{x:v,y:w}=l;return l.x=h[0]*v+h[1]*w+h[4],l.y=h[2]*v+h[3]*w+h[5],l},untransform(l){let h=this._matrix;return new L.Point((l.x/h[0]-h[4])/h[0],(l.y/h[2]-h[5])/h[2])},clone(){let l=this._matrix;return new L.PM.Matrix(l[0],l[1],l[2],l[3],l[4],l[5])},translate(l){if(l===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let h,v;return typeof l=="number"?(h=l,v=l):(h=l.x,v=l.y),this._add(1,0,0,1,h,v)},scale(l,h){if(l===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let v,w;return h=h||L.point(0,0),typeof l=="number"?(v=l,w=l):(v=l.x,w=l.y),this._add(v,0,0,w,h.x,h.y)._add(1,0,0,1,-h.x,-h.y)},rotate(l,h){let v=Math.cos(l),w=Math.sin(l);return h=h||new L.Point(0,0),this._add(v,w,-w,v,h.x,h.y)._add(1,0,0,1,-h.x,-h.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(l,h,v,w,C,j){let X=[[],[],[]],te=this._matrix,de=[[te[0],te[2],te[4]],[te[1],te[3],te[5]],[0,0,1]],Le=[[l,v,C],[h,w,j],[0,0,1]],Je;l&&l instanceof L.PM.Matrix&&(te=l._matrix,Le=[[te[0],te[2],te[4]],[te[1],te[3],te[5]],[0,0,1]]);for(let ze=0;ze<3;ze+=1)for(let vt=0;vt<3;vt+=1){Je=0;for(let At=0;At<3;At+=1)Je+=de[ze][At]*Le[At][vt];X[ze][vt]=Je}return this._matrix=[X[0][0],X[1][0],X[0][1],X[1][1],X[0][2],X[1][2]],this}};var hn=en,nn={calcMiddleLatLng(l,h,v){let w=l.project(h),C=l.project(v);return l.unproject(w._add(C)._divideBy(2))},findLayers(l){let h=[];return l.eachLayer(v=>{(v instanceof L.Polyline||v instanceof L.Marker||v instanceof L.Circle||v instanceof L.CircleMarker||v instanceof L.ImageOverlay)&&h.push(v)}),h=h.filter(v=>!!v.pm),h=h.filter(v=>!v._pmTempLayer),h=h.filter(v=>!L.PM.optIn&&!v.options.pmIgnore||L.PM.optIn&&v.options.pmIgnore===!1),h},circleToPolygon(l,h=60,v=!0){let w=l.getLatLng(),C=l.getRadius(),j=$i(w,C,h,0,v),X=[];for(let te=0;te<j.length;te+=1){let de=[j[te].lat,j[te].lng];X.push(de)}return L.polygon(X,l.options)},disablePopup(l){l.getPopup()&&(l._tempPopupCopy=l.getPopup(),l.unbindPopup())},enablePopup(l){l._tempPopupCopy&&(l.bindPopup(l._tempPopupCopy),delete l._tempPopupCopy)},_fireEvent(l,h,v,w=!1){l.fire(h,v,w);let{groups:C}=this.getAllParentGroups(l);C.forEach(j=>{j.fire(h,v,w)})},getAllParentGroups(l){let h=[],v=[],w=C=>{for(let j in C._eventParents)if(h.indexOf(j)===-1){h.push(j);let X=C._eventParents[j];v.push(X),w(X)}};return!l._pmLastGroupFetch||!l._pmLastGroupFetch.time||new Date().getTime()-l._pmLastGroupFetch.time>1e3?(w(l),l._pmLastGroupFetch={time:new Date().getTime(),groups:v,groupIds:h},{groupIds:h,groups:v}):{groups:l._pmLastGroupFetch.groups,groupIds:l._pmLastGroupFetch.groupIds}},createGeodesicPolygon:$i,getTranslation:or,findDeepCoordIndex(l,h,v=!0){let w,C=X=>(te,de)=>{let Le=X.concat(de);if(v){if(te.lat&&te.lat===h.lat&&te.lng===h.lng)return w=Le,!0}else if(te.lat&&L.latLng(te).equals(h))return w=Le,!0;return Array.isArray(te)&&te.some(C(Le))};l.some(C([]));let j={};return w&&(j={indexPath:w,index:w[w.length-1],parentPath:w.slice(0,w.length-1)}),j},findDeepMarkerIndex(l,h){let v,w=j=>(X,te)=>{let de=j.concat(te);return X._leaflet_id===h._leaflet_id?(v=de,!0):Array.isArray(X)&&X.some(w(de))};l.some(w([]));let C={};return v&&(C={indexPath:v,index:v[v.length-1],parentPath:v.slice(0,v.length-1)}),C},_getIndexFromSegment(l,h){if(h&&h.length===2){let v=this.findDeepCoordIndex(l,h[0]),w=this.findDeepCoordIndex(l,h[1]),C=Math.max(v.index,w.index);return(v.index===0||w.index===0)&&C!==1&&(C+=1),{indexA:v,indexB:w,newIndex:C,indexPath:v.indexPath,parentPath:v.parentPath}}return null},_getRotatedRectangle(l,h,v,w){let C=He(w,l),j=He(w,h),X=v*Math.PI/180,te=Math.cos(X),de=Math.sin(X),Le=(j.x-C.x)*te+(j.y-C.y)*de,Je=(j.y-C.y)*te-(j.x-C.x)*de,ze=Le*te+C.x,vt=Le*de+C.y,At=-Je*de+C.x,Xt=Je*te+C.y,yn=ht(w,C),bn=ht(w,{x:ze,y:vt}),ur=ht(w,j),Ye=ht(w,{x:At,y:Xt});return[yn,bn,ur,Ye]},pxRadiusToMeterRadius(l,h,v){let w=h.project(v),C=L.point(w.x+l,w.y);return h.distance(h.unproject(C),v)}},kn=nn;L.PM=L.PM||{version:Us.version,Map:Po,Toolbar:cl,Draw:no,Edit:Yt,Utils:kn,Matrix:hn,activeLang:"en",optIn:!1,initialize(l){this.addInitHooks(l)},setOptIn(l){this.optIn=!!l},addInitHooks(){function l(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(l);function h(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(h);function v(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(v);function w(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(w);function C(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(C);function j(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(j);function X(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(X);function te(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(te);function de(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(de)},reInitLayer(l){l instanceof L.LayerGroup&&l.eachLayer(h=>{this.reInitLayer(h)}),l.pm||L.PM.optIn&&l.options.pmIgnore!==!1||l.options.pmIgnore||(l instanceof L.Map?l.pm=new L.PM.Map(l):l instanceof L.Marker?l.options.textMarker?(l.pm=new L.PM.Edit.Text(l),l.pm._initTextMarker(),l.pm._createTextMarker(!1)):l.pm=new L.PM.Edit.Marker(l):l instanceof L.Circle?l.pm=new L.PM.Edit.Circle(l):l instanceof L.CircleMarker?l.pm=new L.PM.Edit.CircleMarker(l):l instanceof L.Rectangle?l.pm=new L.PM.Edit.Rectangle(l):l instanceof L.Polygon?l.pm=new L.PM.Edit.Polygon(l):l instanceof L.Polyline?l.pm=new L.PM.Edit.Line(l):l instanceof L.LayerGroup?l.pm=new L.PM.Edit.LayerGroup(l):l instanceof L.ImageOverlay&&(l.pm=new L.PM.Edit.ImageOverlay(l)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(l){let h=this._map.mouseEventToLayerPoint(l),v,w;for(let C=this._drawFirst;C;C=C.next)v=C.layer,v.options.interactive&&v._containsPoint(h)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(v))&&(w=v);w&&(L.DomEvent.fakeStop(l),this._fireEvent([w],l))}}),L.PM.initialize()})();class Rh extends Vn.Circle{constructor(t,r){const i=r.radius||10;super(t,i,r);Ht(this,"properties");Ht(this,"angleCache",new Map);Ht(this,"lastCenter");Ht(this,"lastCenterCosLat");Ht(this,"_pendingNameUpdate",!1);Ht(this,"_nameUpdateTimeout",null);dn.measure("Circle.constructor.init",()=>{this.properties={type:"Circle",style:{name:r.name||""}},requestAnimationFrame(()=>{this.updateProperties()}),this.on("add",()=>{requestAnimationFrame(()=>{this.updateProperties()})})},"Circle")}updateProperties(){dn.measure("Circle.updateProperties",()=>{var u,f,d,g;const t=this.getRadius(),r=this.getLatLng(),i=((f=(u=this.properties)==null?void 0:u.style)==null?void 0:f.name)||"",s=((d=this.properties)==null?void 0:d.style)||{},o={type:"Circle",radius:t,diameter:t*2,surface:Math.PI*Math.pow(t,2),perimeter:2*Math.PI*t,center:{lat:r.lat,lng:r.lng},style:{...s,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((g=this.options)==null?void 0:g.dashArray)||"",name:i}};JSON.stringify(this.properties)!==JSON.stringify(o)&&(this.properties=o,this.fire("properties:updated",{shape:this,properties:this.properties}))},"Circle")}setName(t){dn.measure("Circle.setName",()=>{var r,i;((i=(r=this.properties)==null?void 0:r.style)==null?void 0:i.name)!==t&&(this.properties.style||(this.properties.style={}),this.properties.style.name=t,!this._pendingNameUpdate&&(this._pendingNameUpdate=!0,this._nameUpdateTimeout&&clearTimeout(this._nameUpdateTimeout),this._nameUpdateTimeout=setTimeout(()=>{this._pendingNameUpdate=!1,this._nameUpdateTimeout=null,this.fire("properties:updated",{shape:this,properties:this.properties})},100)))},"Circle")}getName(){return dn.measure("Circle.getName",()=>{var t,r;return((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||""},"Circle")}setRadius(t){return dn.measure("Circle.setRadius",()=>(super.setRadius(t),this.updateProperties(),this),"Circle")}setLatLng(t){return dn.measure("Circle.setLatLng",()=>(super.setLatLng(t),this.updateProperties(),this),"Circle")}calculatePointOnCircle(t){return dn.measure("Circle.calculatePointOnCircle",()=>{const r=this.getLatLng(),i=this.getRadius();let s=this.angleCache.get(t);if(!s){const o=t*Math.PI/180;s={sin:Math.sin(o),cos:Math.cos(o)},this.angleCache.set(t,s)}return(!this.lastCenter||!this.lastCenter.equals(r))&&(this.lastCenter=r,this.lastCenterCosLat=Math.cos(r.lat*Math.PI/180)),Vn.latLng(r.lat+i/111319.9*s.sin,r.lng+i/(111319.9*this.lastCenterCosLat)*s.cos)},"Circle")}getCardinalPoints(){return dn.measure("Circle.getCardinalPoints",()=>[0,45,90,135,180,225,270,315].map(t=>this.calculatePointOnCircle(t)),"Circle")}calculateAngleFromPoint(t){return dn.measure("Circle.calculateAngleFromPoint",()=>{const r=this.getLatLng(),i=t.lng-r.lng,s=t.lat-r.lat;let o=Math.atan2(s,i)*180/Math.PI;return o<0&&(o+=360),o},"Circle")}resizeFromControlPoint(t){dn.measure("Circle.resizeFromControlPoint",()=>{const i=this.getLatLng().distanceTo(t);i>0&&super.setRadius(i)},"Circle")}clearCache(){this.angleCache.clear(),this.lastCenter=void 0,this.lastCenterCosLat=void 0}}const w0=(e,n)=>{if(!e||typeof e!="string"||!e.startsWith("#"))return`rgba(0, 0, 0, ${n})`;const t=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16);return`rgba(${t}, ${r}, ${i}, ${n})`},xb=(e,n)=>{e.style.fontSize=n.fontSize,e.style.color=n.color,e.style.backgroundColor=w0(n.backgroundColor,n.backgroundOpacity),n.hasBorder?e.style.border=`${n.borderWidth} solid ${w0(n.borderColor,n.borderOpacity)}`:e.style.border="none",e.style.padding=n.padding,e.style.borderRadius=n.borderRadius},_l=e=>{document.querySelectorAll(".drawing-help-message").forEach(r=>r.remove());const t=Rt.DomUtil.create("div","drawing-help-message");return t.innerHTML=e,t.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(t),t};function Lb(e,n,t){const r=156543.03392*Math.cos(n*Math.PI/180)/Math.pow(2,t);return e/r}const Gi=(e,n="m",t="")=>{let r,i;return n==="m²"?e>=1e4?(r=(e/1e4).toFixed(2),i="ha"):(r=e.toFixed(2),i="m²"):n==="m"?e>=1e3?(r=(e/1e3).toFixed(2),i="km"):(r=e.toFixed(2),i="m"):(r=e.toFixed(2),i=n),t?`${t}: ${r} ${i}`:`${r} ${i}`},AR=e=>({...e,clientX:e.clientX,clientY:e.clientY,button:e.button||0,buttons:e.buttons||0,altKey:e.altKey||!1}),kR=(e,n)=>{let t;return function(...r){window.clearTimeout(t),t=window.setTimeout(()=>e.apply(this,r),n)}},Mh=(e,n)=>{let t=0;return function(...r){const i=Date.now();if(!(i-t<n))return t=i,e.apply(this,r)}};function TR(){const e=Ft(null),n=Ft(null),t=Ft(null),r=Ft(null),i=Ft(""),s=Ft(null),o=Ft(!1),u=Ft(null);window.addEventListener("clearControlPoints",()=>{s.value=null,t.value&&t.value.clearLayers(),r.value&&r.value.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(A=>A.remove()),document.querySelectorAll(".drawing-help-message").forEach(A=>A.remove())}),mc(()=>{window.removeEventListener("clearControlPoints",()=>{}),e.value&&(e.value.remove(),e.value=null)});const f=(A,J="Double-cliquez pour éditer")=>{const fe={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0,rotation:0,physicalSize:2},ne=(ge,Ue)=>{var Xe;const Qe=((Xe=e.value)==null?void 0:Xe.getZoom())||14,Ke=A.lat,Ge=Lb(Ue.physicalSize,Ke,Qe);return`<div class="text-container" style="width:${Ge}px;height:${Ge}px;transform:rotate(${Ue.rotation}deg)">
        <div class="text-annotation" style="font-size:${Ge*.2}px;color:${Ue.color};background-color:${w0(Ue.backgroundColor,Ue.backgroundOpacity)};border:${Ue.hasBorder?Ue.borderWidth+" solid "+w0(Ue.borderColor,Ue.borderOpacity):"none"};padding:${Ue.padding};border-radius:${Ue.borderRadius}">${ge}</div>
        <div class="text-controls"><div class="control-button rotate"></div><div class="control-button move"></div></div>
      </div>`},he=()=>{if(!e.value)return;const ge=T.getIcon(),Ue={html:ne(T.properties.text,T.properties.style),className:ge.options.className};T.setIcon(Rt.divIcon(Ue))},ae=Rt.divIcon({html:ne(J,fe),className:"text-container",iconSize:[40,40],iconAnchor:[20,20]}),T=Rt.marker(A,{icon:ae,draggable:!1,pmIgnore:!0});T.properties={type:"text",text:J,style:{...fe}},e.value&&(e.value.on("zoomend",he),T.on("remove",()=>{var ge;(ge=e.value)==null||ge.off("zoomend",he)})),he();let ue=!1,ke=!1,Ce=0,Ve=0;const K=ge=>{if(!e.value)return;const Ue=ge.target;if(Ue.classList.contains("rotate")){ue=!0;const Qe=T.getLatLng(),Ke=e.value.mouseEventToLatLng(ge);Ce=Math.atan2(Ke.lat-Qe.lat,Ke.lng-Qe.lng)*180/Math.PI,Ve=T.properties.style.rotation||0}else Ue.classList.contains("move")&&(ke=!0);document.addEventListener("mousemove",pe),document.addEventListener("mouseup",ve)},pe=ge=>{if(!(!ke||!e.value)){if(ue){const Ue=T.getLatLng(),Qe=e.value.mouseEventToLatLng(ge),Ke=Math.atan2(Qe.lat-Ue.lat,Qe.lng-Ue.lng)*180/Math.PI,Ge=(Ve+(Ke-Ce))%360;T.properties.style.rotation=Ge;const Xe=T.getIcon(),ot={html:ne(T.properties.text,T.properties.style),className:Xe.options.className};T.setIcon(Rt.divIcon(ot))}else if(ke){const Ue=AR(ge),Qe=e.value.mouseEventToLatLng(Ue);T.setLatLng(Qe)}}},ve=()=>{ue=!1,ke=!1,document.removeEventListener("mousemove",pe),document.removeEventListener("mouseup",ve)};return T.on("add",()=>{const ge=T.getElement();ge&&ge.querySelectorAll(".control-button").forEach(Qe=>{Qe.addEventListener("mousedown",K)})}),T.on("remove",()=>{const ge=T.getElement();ge&&ge.querySelectorAll(".control-button").forEach(Qe=>{Qe.removeEventListener("mousedown",K)})}),T.on("dblclick",ge=>{var ot;Rt.DomEvent.stopPropagation(ge);const Ue=(ot=T.getElement())==null?void 0:ot.querySelector(".text-annotation");if(!Ue)return;Ue.contentEditable="true",Ue.focus(),Ue.classList.add("editing");const Qe=window.getSelection(),Ke=document.createRange();Ke.selectNodeContents(Ue),Qe==null||Qe.removeAllRanges(),Qe==null||Qe.addRange(Ke);const Ge=()=>{Ue.contentEditable="false",Ue.classList.remove("editing");const kt=Ue.innerText.trim();if(kt){T.properties.text=kt;const Ct=T.getIcon(),Ut={html:ne(kt,T.properties.style),className:Ct.options.className};T.setIcon(Rt.divIcon(Ut))}Ue.removeEventListener("blur",Ge),Ue.removeEventListener("keydown",Xe)},Xe=kt=>{kt.key==="Enter"&&!kt.shiftKey&&(kt.preventDefault(),Ge())};Ue.addEventListener("blur",Ge),Ue.addEventListener("keydown",Xe)}),T},d=(A,J)=>{const fe=Rt.DomUtil.create("div","measure-tooltip");if(fe.innerHTML=J,fe.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(fe),e.value){const ne=e.value.latLngToContainerPoint(A);fe.style.left=`${ne.x+10}px`,fe.style.top=`${ne.y-25}px`}return fe},g=Mh((A,J,fe)=>{if(A&&(A.innerHTML=fe,e.value)){const ne=e.value.latLngToContainerPoint(J);A.style.left=`${ne.x+10}px`,A.style.top=`${ne.y-25}px`}},100),y=(A,J,fe)=>{A.on("mouseover",()=>{const ne=d(A.getLatLng(),fe());A.measureDiv=ne}),A.on("mousemove",ne=>{A.measureDiv&&e.value&&g(A.measureDiv,ne.latlng,fe())}),A.on("mouseout",()=>{A.measureDiv&&(A.measureDiv.remove(),A.measureDiv=void 0)})};let x=[];const _=()=>{var A;x.cleanup&&x.cleanup(),t.value&&t.value.clearLayers(),x=[],(A=r.value)==null||A.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(J=>J.remove()),n.value&&n.value.getLayers().forEach(J=>{J instanceof ga&&J.clearHelperPoints()})},M=(A,J="#2563EB")=>{const fe=Rt.circleMarker(A,{radius:6,color:J,fillColor:J,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return t.value&&t.value.addLayer(fe),fe},D=(A,J)=>{var ne,he,ae,T,ue,ke;console.log("Input layer:",{type:J,instanceof:{Circle:A instanceof Rt.Circle,Rectangle:A instanceof Rt.Rectangle,Polygon:A instanceof Rt.Polygon,Polyline:A instanceof Rt.Polyline,ElevationLine:A instanceof Sf,Line:A instanceof Ts},options:A.options});const fe={type:J,style:A.options||{}};try{if(A instanceof Rt.Circle){const Ce=A.getRadius();fe.radius=Ce,fe.diameter=Ce*2,fe.surface=Math.PI*Math.pow(Ce,2),fe.perimeter=2*Math.PI*Ce,fe.center=A.getLatLng()}else if(A instanceof Rt.Rectangle){const Ce=A.getBounds(),Ve=Ce.getNorthEast(),K=Ce.getSouthWest(),pe=pu([[K.lng,K.lat],[Ve.lng,K.lat]]),ve=pu([[K.lng,K.lat],[K.lng,Ve.lat]]),ge=Uf(pe,{units:"meters"}),Ue=Uf(ve,{units:"meters"});fe.width=ge,fe.height=Ue,fe.surface=ge*Ue,fe.perimeter=2*(ge+Ue),fe.dimensions={width:ge,height:Ue}}else if(A instanceof Rt.Polygon)try{const Ve=A.getLatLngs()[0].map(pe=>[pe.lng,pe.lat]);Ve.push(Ve[0]);const K=du([Ve]);fe.surface=rc(K),fe.perimeter=Uf(pu(Ve),{units:"meters"})}catch(Ce){console.error("Erreur lors du calcul des propriétés du polygone",Ce)}else if(A instanceof Rt.Polyline&&!(A instanceof Rt.Polygon))try{const Ce=A.getLatLngs();let Ve=0;for(let K=1;K<Ce.length;K++)Ve+=Ce[K].distanceTo(Ce[K-1]);fe.length=Ve}catch(Ce){console.error("Erreur lors du calcul de la longueur de la ligne",Ce)}fe.style={...fe.style,color:((ne=A.options)==null?void 0:ne.color)||"#3388ff",weight:((he=A.options)==null?void 0:he.weight)||3,opacity:((ae=A.options)==null?void 0:ae.opacity)||1,fillColor:((T=A.options)==null?void 0:T.fillColor)||"#3388ff",fillOpacity:((ue=A.options)==null?void 0:ue.fillOpacity)||.2,dashArray:((ke=A.options)==null?void 0:ke.dashArray)||""}}catch(Ce){console.error("Error calculating shape properties:",Ce)}return fe},N=(A,J=2)=>{var T;if(!e.value){console.warn("Map is not available for text size update");return}const fe=e.value.getZoom(),ne=A.getLatLng().lat,he=Lb(J,ne,fe),ae=(T=A.getElement())==null?void 0:T.querySelector(".text-annotation");ae&&(A.properties.style.fontSize=`${he}px`,A.properties.physicalWidth=J,A.properties.physicalHeight=J,xb(ae,A.properties.style))},O=(A,J,fe)=>{const ne=Rt.map(A).setView(J,fe);e.value=ne,Rt.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:5}).addTo(ne);const he=new Rt.FeatureGroup;return he.addTo(ne),n.value=he,t.value=Rt.featureGroup().addTo(ne),r.value=Rt.featureGroup().addTo(ne),ne.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:he,snapLayers:[he,r.value],templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),ne.on("pm:drawstart",ae=>{o.value=!0,ae.shape==="Circle"&&i.value==="Semicircle"&&(ne.getContainer().style.cursor="crosshair")}),ne.on("pm:drawend",()=>{o.value=!1,ne.getContainer().style.cursor="",s.value&&_l("Cliquez sur la forme pour afficher les points de contrôle")}),ne.on("pm:create",Pe),he.on("click",ae=>{var ue,ke,Ce,Ve,K,pe,ve,ge,Ue,Qe,Ke,Ge,Xe,ot,kt;Rt.DomEvent.stopPropagation(ae);const T=ae.layer;if(T.name&&!((ue=T.properties)!=null&&ue.name)?(T.properties||(T.properties={}),T.properties.name=T.name):(ke=T.properties)!=null&&ke.name&&!T.name&&(T.name=T.properties.name),console.log("[featureGroup click] État du nom:",{directName:T.name,propertiesName:(Ce=T.properties)==null?void 0:Ce.name,fullProperties:T.properties}),(Ve=r.value)==null||Ve.clearLayers(),_(),s.value=T,T instanceof Rh)R(T);else if(T instanceof Rt.Circle){console.log("[useMapDrawing] Création du cercle personnalisé:",{propertyDescriptor:Object.getOwnPropertyDescriptor(T,"name"),directName:T.name,propertiesName:(K=T.properties)==null?void 0:K.name,styleNameBeforeTransfer:(ve=(pe=T.properties)==null?void 0:pe.style)==null?void 0:ve.name,nameIsEnumerable:Object.keys(T).includes("name"),allProperties:Object.keys(T.properties||{}),_dbId:T._dbId});const Ct=T.name,Ut=(ge=T.properties)==null?void 0:ge.name,Gt=(Qe=(Ue=T.properties)==null?void 0:Ue.style)==null?void 0:Qe.name,fn=T._dbId,pn=new Rh(T.getLatLng(),{...T.options,radius:T.getRadius()});T.properties?pn.properties={...T.properties||{}}:pn.updateProperties();const et=Ct||Ut||Gt;et&&(pn.properties.name=et,pn.properties.style||(pn.properties.style={}),pn.properties.style.name=et,pn.name=et),fn&&(pn._dbId=fn),console.log("[useMapDrawing] Cercle après conversion:",{name:pn.name,propertiesName:pn.properties.name,stylePropertyName:(Ke=pn.properties.style)==null?void 0:Ke.name,allProperties:Object.keys(pn.properties||{})}),(Ge=n.value)==null||Ge.removeLayer(T),(Xe=n.value)==null||Xe.addLayer(pn),s.value=pn,R(pn)}else if(T instanceof ga)Z(T);else if(T instanceof Rt.Rectangle){const Ct=new ga(T.getBounds(),{...T.options});Ct.updateProperties(),(ot=n.value)==null||ot.removeLayer(T),(kt=n.value)==null||kt.addLayer(Ct),s.value=Ct,Z(Ct)}else T instanceof Rt.Polygon?I(T):(T instanceof Ts||T instanceof Rt.Polyline)&&z(T)}),ne.on("pm:edit",ae=>{var ue,ke,Ce;console.log("[pm:edit] Début",{layer:ae.layer,currentProperties:ae.layer.properties});const T=ae.layer;if(T){const Ve=((ue=T.properties)==null?void 0:ue.type)||"unknown";if(xe(T,Ve),console.log("[pm:edit] Après updateLayerProperties",{updatedProperties:T.properties,selectedShape:s.value}),T instanceof Rh)R(T);else if(T instanceof ga)Z(T);else if(T instanceof Rt.Rectangle){const K=new ga(T.getBounds(),{...T.options});K.updateProperties(),(ke=n.value)==null||ke.removeLayer(T),(Ce=n.value)==null||Ce.addLayer(K),s.value=K,Z(K)}else T instanceof Rt.Polygon?I(T):T instanceof Ts?(T.updateProperties(),xe(T,"Line"),z(T)):T instanceof Rt.Polyline&&z(T)}}),ne.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(ae=>ae.remove()),_l("Déplacez la forme à l'endroit souhaité")}),ne.on("pm:dragend",ae=>{var ue,ke,Ce;console.log("[pm:dragend] Début",{layer:ae.layer,currentProperties:ae.layer.properties});const T=ae.layer;if(T){const Ve=((ue=T.properties)==null?void 0:ue.type)||"unknown";if(T instanceof Rt.Rectangle&&!(T instanceof ga)){const K=new ga(T.getBounds(),{...T.options});K.updateProperties(),(ke=n.value)==null||ke.removeLayer(T),(Ce=n.value)==null||Ce.addLayer(K),s.value=K,Z(K)}else T instanceof Ts?(T.updateProperties(),xe(T,"Line"),z(T)):xe(T,Ve);console.log("[pm:dragend] Après updateLayerProperties",{updatedProperties:T.properties,selectedShape:s.value})}setTimeout(()=>{_l("Cliquez sur la forme pour afficher les points de contrôle")},100)}),ne.on("pm:remove",()=>{var ae;(ae=document.querySelector(".drawing-help-message"))==null||ae.remove()}),ne.on("pm:select",()=>{document.querySelectorAll(".drawing-help-message").forEach(ae=>ae.remove()),_l("Utilisez les points de contrôle pour modifier la forme")}),ne.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(ae=>ae.remove())}),ne.on("zoomstart",()=>{s.value&&(_(),s.value=null,document.querySelectorAll(".drawing-help-message").forEach(ae=>ae.remove()))}),ne},F=()=>{if(!(!e.value||!n.value||!n.value.getLayers().length))try{const A=n.value.getBounds();if(A.isValid()){const J={zoomAnimation:e.value.options.zoomAnimation,fadeAnimation:e.value.options.fadeAnimation,markerZoomAnimation:e.value.options.markerZoomAnimation};e.value.options.zoomAnimation=!1,e.value.options.fadeAnimation=!1,e.value.options.markerZoomAnimation=!1,e.value.fitBounds(A,{padding:[50,50],maxZoom:18,animate:!1,duration:0,noMoveStart:!0}),e.value.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{try{e.value.options.fadeAnimation=J.fadeAnimation,setTimeout(()=>{try{e.value.options.zoomAnimation=J.zoomAnimation,e.value.options.markerZoomAnimation=J.markerZoomAnimation}catch(fe){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",fe)}},500)}catch(fe){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",fe)}},500)}}catch(A){if(console.warn("[useMapDrawing] Error adjusting view:",A),e.value)try{e.value.options.zoomAnimation=!0,e.value.options.fadeAnimation=!0,e.value.options.markerZoomAnimation=!0,e.value.invalidateSize({animate:!1,pan:!1})}catch(J){console.error("[useMapDrawing] Erreur lors de la restauration après échec:",J)}}},Y=A=>{var fe;if(!e.value)return;document.querySelectorAll(".drawing-help-message").forEach(ne=>ne.remove());try{const ne=e.value.pm;ne.globalEditModeEnabled()&&ne.disableGlobalEditMode(),ne.globalRemovalModeEnabled()&&ne.disableGlobalRemovalMode(),ne.disableDraw(),_(),(fe=r.value)==null||fe.clearLayers()}catch(ne){console.error("Error disabling modes:",ne)}if(i.value=A,!A){_();return}let J=A;switch(A){case"Note":J="GeoNote";break;case"Polygon":J="Polygon";break;case"Line":J="Line";break;case"ElevationLine":J="ElevationLine";break;default:J=A}A=J,Ie(),setTimeout(()=>{var ne,he,ae,T,ue,ke,Ce,Ve,K,pe,ve,ge,Ue;try{switch(A){case"Polygon":_l("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(ne=e.value)==null||ne.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(he=e.value)==null||he.off("pm:create"),(ae=e.value)==null||ae.on("pm:create",Ke=>{var Ge,Xe,ot;if(Ke.shape==="Polygon"&&Ke.layer){const kt=Ke.layer.getLatLngs()[0];(Ge=e.value)==null||Ge.removeLayer(Ke.layer),(Xe=n.value)!=null&&Xe.hasLayer(Ke.layer)&&n.value.removeLayer(Ke.layer);const Ct=new gf(kt,{color:"#3B82F6",weight:3,fillColor:"#3B82F6",fillOpacity:.2});n.value&&(n.value.addLayer(Ct),s.value=Ct,Ct.updateProperties()),(ot=e.value)==null||ot.pm.disableDraw(),Ie()}});break;case"Circle":n.value&&n.value.getLayers().filter(Ge=>Ge instanceof ga).forEach(Ge=>{Ge.toggleHelperPoints(e.value,!0,"#DC2626","#2563EB")}),e.value.pm.setGlobalOptions({snapDistance:15,snapSegment:!0,snapVertices:!0,snapLayers:[n.value,r.value],snapMiddle:!0,snapIntersections:!0}),_l("Positionnez le centre du cercle. Points bleus : milieu des côtés, Points rouges : sommets, Point vert : centre"),e.value.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Rectangle":_l("Cliquez et maintenez pour dessiner un rectangle, relâchez pour terminer"),(T=e.value)==null||T.pm.enableDraw("Rectangle",{finishOn:"mouseup"});break;case"Polygon":_l("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(ue=e.value)==null||ue.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":_l("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(ke=e.value)==null||ke.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(Ce=e.value)==null||Ce.off("pm:create"),(Ve=e.value)==null||Ve.on("pm:create",Ke=>{var Ge,Xe,ot;if(Ke.shape==="Line"&&Ke.layer){const kt=Ke.layer.getLatLngs();(Ge=e.value)==null||Ge.removeLayer(Ke.layer),(Xe=n.value)!=null&&Xe.hasLayer(Ke.layer)&&n.value.removeLayer(Ke.layer);const Ct=new Ts(kt,{color:"#3B82F6",weight:3,opacity:.8});n.value&&(n.value.addLayer(Ct),s.value=Ct,Ct.updateProperties()),(ot=e.value)==null||ot.pm.disableDraw(),Ie()}});break;case"Text":if(_l("Cliquez pour ajouter du texte, double-cliquez pour éditer"),e.value){const Ke=Ge=>{if(!e.value||!n.value)return;const Xe=f(Ge.latlng);n.value.addLayer(Xe),s.value=Xe,e.value.off("click",Ke),Y("")};e.value.on("click",Ke)}break;case"GeoNote":if(_l("Cliquez pour ajouter une note géolocalisée, double-cliquez pour éditer"),e.value){const Ke=Ge=>{if(!e.value||!n.value)return;const Xe=new Op(Ge.latlng,{color:"#3B82F6",name:"Note géolocalisée",description:""});n.value.addLayer(Xe),s.value=Xe,Xe.updateProperties(),Xe.openPopup(),e.value.off("click",Ke),Y("")};e.value.on("click",Ke)}break;case"delete":_l("Cliquez sur une forme pour la supprimer"),(K=e.value)==null||K.pm.enableGlobalRemovalMode();break;case"ElevationLine":_l("Cliquez et maintenez pour tracer le profil altimétrique"),(pe=e.value)==null||pe.pm.enableDraw("Line",{finishOn:"mouseup",continueDrawing:!1,allowSelfIntersection:!1,templineStyle:{color:"#FF4500",weight:4,opacity:.8}}),(ve=e.value)==null||ve.pm.setGlobalOptions({continueDrawing:!1,finishOn:"mouseup",preventMarkerRemoval:!0,preventVertexEdit:!0,preventMarkerEdit:!0}),(ge=e.value)==null||ge.off("pm:create"),(Ue=e.value)==null||Ue.on("pm:create",async Ke=>{var Ge,Xe,ot;if(Ke.shape==="Line"&&Ke.layer){const kt=Ke.layer.getLatLngs();(Ge=e.value)==null||Ge.removeLayer(Ke.layer),(Xe=n.value)!=null&&Xe.hasLayer(Ke.layer)&&n.value.removeLayer(Ke.layer);const Ct=new Sf(kt,{color:"#FF4500",weight:4,opacity:.8,interactive:!1,pmIgnore:!0});if(n.value){n.value.addLayer(Ct),s.value=Ct,await Ct.updateElevationProfile();const Ut=D(Ct,"ElevationLine");Object.assign(Ct.properties,{...Ut,...Ct.properties,type:"ElevationLine",elevationData:Ct.getElevationData()}),s.value=null,Xs(()=>{s.value=Ct})}(ot=e.value)==null||ot.pm.disableDraw(),i.value="",Ie()}});break}}catch(Qe){console.error("[setDrawingTool] Erreur lors de la configuration de l'outil:",Qe)}},100)},Q=A=>{var fe;if(!s.value)return;const J=s.value;if(J.properties=J.properties||{},J.properties.style=J.properties.style||{},J.properties.style={...J.properties.style,...A},J.properties.type==="text"){const ne=J.properties._textLayer,he=(fe=ne==null?void 0:ne.getElement())==null?void 0:fe.querySelector(".text-annotation");he&&xb(he,J.properties.style);const ae={color:A.borderColor||J.properties.style.borderColor,weight:parseInt(A.borderWidth||J.properties.style.borderWidth),opacity:A.borderOpacity??J.properties.style.borderOpacity};"setStyle"in J&&J.setStyle(ae)}else if(J.properties.type==="TextRectangle")console.log("[updateShapeStyle] TextRectangle supprimé selon les exigences");else{const ne={};A.fillColor&&(ne.fillColor=A.fillColor),A.fillOpacity!==void 0&&(ne.fillOpacity=A.fillOpacity),A.strokeColor&&(ne.color=A.strokeColor),A.strokeOpacity!==void 0&&(ne.opacity=A.strokeOpacity),A.strokeWidth!==void 0&&(ne.weight=A.strokeWidth),A.dashArray&&(ne.dashArray=A.dashArray),"setStyle"in J&&J.setStyle(ne)}},le=A=>{var T,ue,ke,Ce,Ve;if(!s.value){console.warn("[useMapDrawing] Cannot update properties: no shape selected");return}console.log("[useMapDrawing] Updating shape properties",{before:s.value.properties,newProps:A,layerType:(T=s.value.properties)==null?void 0:T.type,beforeName:s.value.name,beforePropertiesName:(ue=s.value.properties)==null?void 0:ue.name,beforeCategory:(ke=s.value.properties)==null?void 0:ke.category,nameIsDirectProperty:"name"in s.value,dbId:s.value._dbId}),s.value.properties||(s.value.properties={});const J=s.value.properties.type;console.log(`[useMapDrawing] Type actuel de la forme: ${J}`),s.value.properties.category||(s.value.properties.category="forages"),s.value.properties.accessLevel||(s.value.properties.accessLevel="visitor"),s.value._dbId||(s.value._dbId=Date.now()+Math.floor(Math.random()*1e3),console.log(`[useMapDrawing] Assigned temporary dbId: ${s.value._dbId}`));const fe=s.value.properties.type;console.log(`[useMapDrawing] Type original avant mise à jour: ${fe}`);const ne=s.value.properties.category;console.log(`[useMapDrawing] Catégorie existante: ${ne}`);const he="category"in A&&A.category!==ne;if(Object.keys(A).forEach(K=>{K==="type"&&fe?console.log(`[useMapDrawing] Préservation du type original: ${fe}`):s.value.properties[K]=A[K],K==="name"&&(console.log(`[useMapDrawing] Setting name "${A[K]}" directly on layer`),s.value.name=A[K]),K==="category"&&console.log(`[useMapDrawing] Mise à jour de la catégorie: ${ne} -> ${A[K]}`)}),fe&&(s.value.properties.type=fe),ne&&!he&&(console.log(`[useMapDrawing] Restauration de la catégorie originale: ${ne}`),s.value.properties.category=ne),s.value._dbId&&he){const K=Ip(),pe=K.elements.find(ve=>ve.id===s.value._dbId);if(pe){console.log(`[useMapDrawing] Mise à jour de la catégorie dans le store: ${s.value.properties.category} pour l'élément ${s.value._dbId}`);const ve=pe;ve.data||(ve.data={}),ve.data.category=s.value.properties.category,K.$patch({unsavedChanges:!0})}}const ae=new CustomEvent("shape:propertiesUpdated",{detail:{shape:s.value,properties:s.value.properties,categoryUpdated:he}});if(window.dispatchEvent(ae),console.log("[useMapDrawing] Updated shape properties",{after:s.value.properties,name:s.value.name,propertiesName:(Ce=s.value.properties)==null?void 0:Ce.name,allLayerKeys:Object.keys(s.value),allPropertiesKeys:Object.keys(s.value.properties||{})}),((Ve=s.value.properties)==null?void 0:Ve.type)==="Circle"){const K=s.value,pe=K.getRadius();K.properties.radius=pe,K.properties.diameter=pe*2,K.properties.surface=Math.PI*pe*pe,K.properties.perimeter=2*Math.PI*pe,A.name&&(console.log(`[useMapDrawing] Ensuring circle name "${A.name}" is set in multiple places`),K.properties.name=A.name,K.properties.style.name=A.name,K.name=A.name,console.log("[useMapDrawing] Circle name verification:",{circleDirectName:K.name,circlePropertiesName:K.properties.name,nameIsEnumerable:Object.keys(K).includes("name"),propertiesNameIsEnumerable:Object.keys(K.properties).includes("name")}))}},ce=A=>{console.log("[forceShapeUpdate] Début",{currentProperties:A.properties,selectedShapeRef:s.value}),s.value=null,Xs(()=>{s.value=A,console.log("[forceShapeUpdate] Après mise à jour",{selectedShape:s.value,properties:s.value.properties})})},xe=(A,J)=>{console.log("[updateLayerProperties] Début",{layer:A,shapeType:J,currentProperties:A.properties}),kR((ne,he)=>{const ae=D(ne,he);console.log("[updateLayerProperties] Nouvelles propriétés calculées",{newProperties:ae}),ne.properties={...ae},ce(ne),ne.fire("properties:updated",{shape:ne,properties:ne.properties}),console.log("[updateLayerProperties] Fin",{finalProperties:ne.properties,selectedShape:s.value})},100)(A,J)},G=(A,J)=>Rt.latLng((A.lat+J.lat)/2,(A.lng+J.lng)/2),R=A=>{if(!e.value||!n.value)return;_();const J=A.getLatLng(),fe=A.getRadius(),ne=M(J,"#059669");x.push(ne),y(ne,A,()=>[Gi(fe,"m","Rayon"),Gi(fe*2,"m","Diamètre"),Gi(Math.PI*Math.pow(fe,2),"m²","Surface")].join("<br>"));const he=[],ae=[0,45,90,135,180,225,270,315];ae.forEach(T=>{const ue=A.calculatePointOnCircle(T),ke=M(ue,"#2563EB");he.push(ke),x.push(ke),y(ke,A,()=>Gi(fe,"m","Rayon")),ke.on("mousedown",Ce=>{if(!e.value)return;Rt.DomEvent.stopPropagation(Ce),e.value.dragging.disable();let Ve=!0;const K=ve=>{Ve&&(A.resizeFromControlPoint(ve.latlng),he.forEach((ge,Ue)=>{const Qe=A.calculatePointOnCircle(ae[Ue]);ge.setLatLng(Qe)}),ne.setLatLng(A.getLatLng()),ke.measureDiv&&(ke.measureDiv.innerHTML=Gi(A.getRadius(),"m","Rayon")))},pe=()=>{Ve=!1,e.value&&(e.value.off("mousemove",K),document.removeEventListener("mouseup",pe),e.value.dragging.enable(),A.updateProperties(),s.value=null,Xs(()=>{s.value=A}),xe(A,"Circle"))};e.value.on("mousemove",K),document.addEventListener("mouseup",pe)})}),ne.on("mousedown",T=>{if(!e.value)return;Rt.DomEvent.stopPropagation(T),e.value.dragging.disable();let ue=!0;const ke=A.getLatLng(),Ce=T.latlng,Ve=pe=>{if(!ue)return;const ve=pe.latlng.lng-Ce.lng,ge=pe.latlng.lat-Ce.lat,Ue=Rt.latLng(ke.lat+ge,ke.lng+ve);Rt.Circle.prototype.setLatLng.call(A,Ue),ne.setLatLng(Ue),he.forEach((Qe,Ke)=>{const Ge=A.calculatePointOnCircle(ae[Ke]);Qe.setLatLng(Ge)}),ne.measureDiv&&(ne.measureDiv.innerHTML=[Gi(A.getRadius(),"m","Rayon"),Gi(A.getRadius()*2,"m","Diamètre"),Gi(Math.PI*Math.pow(A.getRadius(),2),"m²","Surface")].join("<br>"))},K=()=>{ue=!1,e.value&&(e.value.off("mousemove",Ve),document.removeEventListener("mouseup",K),e.value.dragging.enable(),A.updateProperties(),s.value=null,Xs(()=>{s.value=A}),xe(A,"Circle"))};e.value.on("mousemove",Ve),document.addEventListener("mouseup",K)}),A.on("circle:resized",()=>{xe(A,"Circle")}),s.value=A},Z=A=>{var Ve;if(!e.value||!n.value)return;if(!(A instanceof ga)){console.warn("La couche n'est pas une instance de Rectangle");return}const J=A;_();const fe=J.getCenter(),ne=J.getRotatedCorners(),he=J.getMidPoints(),ae=M(fe,"#059669");x.push(ae),y(ae,J,()=>{const{width:K,height:pe}=J.getDimensions(),ve=K*pe,ge=J.getRotation();return[Gi(K,"m","Largeur"),Gi(pe,"m","Hauteur"),Gi(ve,"m²","Surface"),`Rotation: ${ge.toFixed(1)}°`].join("<br>")});const T=M(Rt.latLng(fe.lat+(ne[0].lat-fe.lat)*1.2,fe.lng+(ne[0].lng-fe.lng)*1.2),"#F97316");x.push(T);const ue=Rt.polyline([fe,T.getLatLng()],{color:"#F97316",weight:1,opacity:.6,dashArray:"4",pmIgnore:!0});(Ve=t.value)==null||Ve.addLayer(ue);const ke=ne.map(K=>{const pe=M(K,"#DC2626");return x.push(pe),y(pe,J,()=>{const{width:ve,height:ge}=J.getDimensions();return[Gi(ve,"m","Largeur"),Gi(ge,"m","Hauteur")].join("<br>")}),pe}),Ce=he.map((K,pe)=>{const ve=M(K,"#2b6451");return x.push(ve),y(ve,J,()=>{const{width:ge,height:Ue}=J.getDimensions(),Qe=pe%2===0?ge:Ue;return[Gi(Qe,"m","Longueur du côté"),Gi(Qe/2,"m","Distance au coin")].join("<br>")}),ve});ae.on("mousedown",K=>{if(!e.value)return;Rt.DomEvent.stopPropagation(K),e.value.dragging.disable();let pe=!0;const ve=Ue=>{if(!pe)return;J.moveFromCenter(Ue.latlng);const Qe=J.getRotatedCorners(),Ke=J.getMidPoints();ke.forEach((Xe,ot)=>Xe.setLatLng(Qe[ot])),Ce.forEach((Xe,ot)=>Xe.setLatLng(Ke[ot])),ae.setLatLng(Ue.latlng);const Ge=Rt.latLng(Ue.latlng.lat+(Qe[0].lat-Ue.latlng.lat)*1.2,Ue.latlng.lng+(Qe[0].lng-Ue.latlng.lng)*1.2);T.setLatLng(Ge),ue.setLatLngs([Ue.latlng,Ge])},ge=()=>{pe=!1,e.value&&(e.value.off("mousemove",ve),document.removeEventListener("mouseup",ge),e.value.dragging.enable(),J.updateProperties(),s.value=null,Xs(()=>{s.value=J}))};e.value.on("mousemove",ve),document.addEventListener("mouseup",ge)}),T.on("mousedown",K=>{if(!e.value)return;Rt.DomEvent.stopPropagation(K),e.value.dragging.disable();let pe=!1;const ve=K.latlng,ge=J.getRotation(),Ue=J.getCenter(),Qe=ve.lng-Ue.lng,Ke=ve.lat-Ue.lat,Ge=Math.atan2(Ke,Qe)*180/Math.PI;x.forEach(kt=>{kt!==T&&(kt.setStyle({opacity:0,fillOpacity:0}),kt.measureDiv&&(kt.measureDiv.style.display="none"))});const Xe=Mh(kt=>{pe||(pe=!0);const Ct=kt.latlng.lng-Ue.lng,Ut=kt.latlng.lat-Ue.lat;let fn=Math.atan2(Ut,Ct)*180/Math.PI-Ge,pn=(ge+fn)%360;pn<0&&(pn+=360),J.setRotation(pn,!1),T.setLatLng(kt.latlng),ue.setLatLngs([Ue,kt.latlng])},16),ot=()=>{e.value&&(e.value.off("mousemove",Xe),document.removeEventListener("mouseup",ot),e.value.dragging.enable(),pe&&J.finalizeRotation(),s.value=null,Xs(()=>{s.value=J,_(),Z(J)}))};e.value.on("mousemove",Xe),document.addEventListener("mouseup",ot)}),J.on("coordinates:updated",K=>{const{corners:pe,center:ve}=K,ge=J.getMidPoints();ke.forEach((Qe,Ke)=>Qe.setLatLng(pe[Ke])),Ce.forEach((Qe,Ke)=>Qe.setLatLng(ge[Ke])),ae.setLatLng(ve);const Ue=Rt.latLng(ve.lat+(pe[0].lat-ve.lat)*1.2,ve.lng+(pe[0].lng-ve.lng)*1.2);T.setLatLng(Ue),ue.setLatLngs([ve,Ue])})},z=A=>{if(!e.value||!n.value)return;_();const J=A.getLatLngs();if(!J||J.length===0){console.warn("Pas de points pour la ligne");return}let fe=null;if(A instanceof Ts){const ne=A.getCenter();fe=M(ne,"#059669"),x.push(fe),y(fe,A,()=>{const he=A.getLength()||0;return Gi(he,"m","Longueur totale")}),fe.on("mousedown",he=>{if(!e.value)return;Rt.DomEvent.stopPropagation(he),e.value.dragging.disable();let ae=!0;const T=A.getLatLngs().map(K=>Rt.latLng(K.lat,K.lng)),ue=he.latlng;A instanceof Ts&&(A.off("move:end"),A.off("vertex:moved"),A.off("latlngs:updated"),A.off("properties:updated")),x.forEach((K,pe)=>{pe>0&&(K.setStyle({opacity:0,fillOpacity:0}),K.measureDiv&&(K.measureDiv.style.display="none"))});const Ce=Mh(K=>{if(!ae)return;const pe=K.latlng.lng-ue.lng,ve=K.latlng.lat-ue.lat,ge=T.map(Ue=>Rt.latLng(Ue.lat+ve,Ue.lng+pe));Rt.Polyline.prototype.setLatLngs.call(A,ge),fe==null||fe.setLatLng(K.latlng)},16),Ve=()=>{if(ae=!1,!!e.value){if(e.value.off("mousemove",Ce),document.removeEventListener("mouseup",Ve),e.value.dragging.enable(),A instanceof Ts){const K=()=>{_(),z(A)};A.on("move:end",K),A.on("vertex:moved",K),A.on("latlngs:updated",K),A.on("properties:updated",K),A.updateProperties(),xe(A,"Line")}_(),z(A)}};e.value.on("mousemove",Ce),document.addEventListener("mouseup",Ve)})}if(J.forEach((ne,he)=>{const ae=M(ne,"#DC2626");x.push(ae),y(ae,A,()=>{if(A instanceof Ts){const T=A.getLength()||0,ue=A.getLengthToVertex(he);return[Gi(ue,"m","Distance depuis le début"),Gi(T,"m","Longueur totale")].join("<br>")}return""}),ae.on("mousedown",T=>{if(!e.value)return;Rt.DomEvent.stopPropagation(T),e.value.dragging.disable();let ue=!0;A instanceof Ts&&(A.off("move:end"),A.off("vertex:moved"),A.off("latlngs:updated"),A.off("properties:updated")),x.forEach((Ve,K)=>{K!==he+1&&(Ve.setStyle({opacity:0,fillOpacity:0}),Ve.measureDiv&&(Ve.measureDiv.style.display="none"))});const ke=Mh(Ve=>{if(!ue)return;const K=A.getLatLngs();K[he]=Ve.latlng,Rt.Polyline.prototype.setLatLngs.call(A,K),ae.setLatLng(Ve.latlng)},16),Ce=()=>{if(ue=!1,!!e.value){if(e.value.off("mousemove",ke),document.removeEventListener("mouseup",Ce),e.value.dragging.enable(),A instanceof Ts){const Ve=()=>{_(),z(A)};A.on("move:end",Ve),A.on("vertex:moved",Ve),A.on("latlngs:updated",Ve),A.on("properties:updated",Ve),A.updateProperties(),xe(A,"Line")}_(),z(A)}};e.value.on("mousemove",ke),document.addEventListener("mouseup",Ce)})}),J.length>=2)for(let ne=0;ne<J.length-1;ne++){const he=J[ne],ae=J[ne+1],T=Rt.latLng((he.lat+ae.lat)/2,(he.lng+ae.lng)/2),ue=M(T,"#2b6451");x.push(ue),y(ue,A,()=>{if(A instanceof Ts){const ke=A.getSegmentLengthAt(ne),Ce=A.getLength()||0,Ve=A.getLengthToVertex(ne)+ke/2;return[Gi(ke,"m","Longueur du segment"),Gi(ke/2,"m","Demi-segment"),Gi(Ve,"m","Distance depuis le début"),Gi(Ce,"m","Longueur totale")].join("<br>")}return""})}if(A instanceof Ts){const ne=()=>{_(),z(A)};A.on("move:start",()=>{x.forEach((he,ae)=>{ae>0&&(he.setStyle({opacity:0,fillOpacity:0}),he.measureDiv&&(he.measureDiv.style.display="none"))})}),A.on("move:end",ne),A.on("vertex:moved",ne),A.on("latlngs:updated",ne),A.on("properties:updated",ne),x.cleanup=()=>{A.off("move:start",()=>{}),A.off("move:end",ne),A.off("vertex:moved",ne),A.off("latlngs:updated",ne),A.off("properties:updated",ne)}}},I=A=>{if(!e.value||!n.value)return;_();const J=A.getLatLngs()[0],fe=J.map(Ce=>[Ce.lng,Ce.lat]);fe.push(fe[0]);const ne=du([fe]),he=rc(ne),ae=J.reduce((Ce,Ve,K)=>{const pe=J[(K+1)%J.length];return Ce+Ve.distanceTo(pe)},0);let T;if(typeof A.getCenter=="function")try{T=A.getCenter()}catch(Ce){console.warn("Erreur lors de la récupération du centre du polygone via getCenter(), utilisation de la méthode alternative",Ce);const Ve=rp(ne);T=Rt.latLng(Ve.geometry.coordinates[1],Ve.geometry.coordinates[0])}else{const Ce=rp(ne);T=Rt.latLng(Ce.geometry.coordinates[1],Ce.geometry.coordinates[0])}const ue=M(T,"#059669");x.push(ue),y(ue,A,()=>[Gi(ae,"m","Périmètre"),Gi(he,"m²","Surface")].join("<br>")),ue.on("mousedown",Ce=>{if(!e.value)return;Rt.DomEvent.stopPropagation(Ce),e.value.dragging.disable();let Ve=!0;const K=Ce.latlng,pe=[...J];x.forEach((Qe,Ke)=>{Ke>0&&Qe.setStyle({opacity:0,fillOpacity:0})});const ve=Mh(Qe=>{if(!Ve)return;const Ke=Qe.latlng.lng-K.lng,Ge=Qe.latlng.lat-K.lat,Xe=pe.map(ot=>Rt.latLng(ot.lat+Ge,ot.lng+Ke));Rt.Polygon.prototype.setLatLngs.call(A,[Xe]),ue.setLatLng(Qe.latlng)},16),ge=Qe=>{Ve&&ve(Qe)},Ue=()=>{if(Ve=!1,!!e.value){if(e.value.off("mousemove",ge),document.removeEventListener("mouseup",Ue),e.value.dragging.enable(),A.properties){const Qe=A.getLatLngs()[0],Ke=Qe.map(Xe=>[Xe.lng,Xe.lat]);Ke.push(Ke[0]);const Ge=du([Ke]);A.properties.area=rc(Ge),A.properties.perimeter=Qe.reduce((Xe,ot,kt)=>{const Ct=Qe[(kt+1)%Qe.length];return Xe+ot.distanceTo(Ct)},0),A.properties.surface=A.properties.area}_(),I(A),s.value=null,Xs(()=>{s.value=A})}};e.value.on("mousemove",ge),document.addEventListener("mouseup",Ue)}),J.forEach((Ce,Ve)=>{const K=M(Ce,"#DC2626");x.push(K),y(K,A,()=>{const pe=J[(Ve-1+J.length)%J.length],ve=J[(Ve+1)%J.length],ge=Ce.distanceTo(pe),Ue=Ce.distanceTo(ve);return[Gi(ge,"m","Distance au point précédent"),Gi(Ue,"m","Distance au point suivant"),Gi(ae,"m","Périmètre total"),Gi(he,"m²","Surface")].join("<br>")}),K.on("mousedown",pe=>{if(Rt.DomEvent.stopPropagation(pe),!e.value)return;e.value.dragging.disable();let ve=!0;ue&&(ue.setStyle({opacity:0,fillOpacity:0}),ue.measureDiv&&(ue.measureDiv.style.display="none"));const ge=Mh(Ke=>{if(!ve)return;J[Ve]=Ke.latlng,Rt.Polygon.prototype.setLatLngs.call(A,[J]),K.setLatLng(Ke.latlng);const Ge=x.slice(J.length+1),Xe=(Ve-1+J.length)%J.length,ot=Ge[Xe];if(ot){const Ct=J[Xe],Ut=J[Ve],Gt=Rt.latLng((Ct.lat+Ut.lat)/2,(Ct.lng+Ut.lng)/2);ot.setLatLng(Gt)}const kt=Ge[Ve];if(kt){const Ct=J[Ve],Ut=J[(Ve+1)%J.length],Gt=Rt.latLng((Ct.lat+Ut.lat)/2,(Ct.lng+Ut.lng)/2);kt.setLatLng(Gt)}},16),Ue=Ke=>{ve&&ge(Ke)},Qe=()=>{if(ve=!1,!!e.value){if(e.value.off("mousemove",Ue),document.removeEventListener("mouseup",Qe),e.value.dragging.enable(),A.properties){const Ke=A.getLatLngs()[0].map(Xe=>[Xe.lng,Xe.lat]);Ke.push(Ke[0]);const Ge=du([Ke]);A.properties.area=rc(Ge),A.properties.perimeter=J.reduce((Xe,ot,kt)=>{const Ct=J[(kt+1)%J.length];return Xe+ot.distanceTo(Ct)},0),A.properties.surface=A.properties.area}_(),I(A),s.value=null,Xs(()=>{s.value=A})}};e.value.on("mousemove",Ue),document.addEventListener("mouseup",Qe)})}),(()=>{const Ce=A.getLatLngs()[0];x.slice(Ce.length+1).forEach(K=>{t.value&&t.value.removeLayer(K)}),x=x.slice(0,Ce.length+1);const Ve=new Array(Ce.length);for(let K=0;K<Ce.length;K++){const pe=Ce[K],ve=Ce[(K+1)%Ce.length];Ve[K]=G(pe,ve)}Ve.forEach((K,pe)=>{const ve=M(K,"#2b6451");x.push(ve),y(ve,A,()=>{const ge=Ce[pe],Ue=Ce[(pe+1)%Ce.length],Qe=ge.distanceTo(Ue);return[Gi(Qe,"m","Longueur du segment"),Gi(ae,"m","Périmètre total"),Gi(he,"m²","Surface")].join("<br>")}),ve.on("mousedown",ge=>{if(!e.value)return;Rt.DomEvent.stopPropagation(ge),e.value.dragging.disable();let Ue=!0;const Qe=pe;ue&&(ue.setStyle({opacity:0,fillOpacity:0}),ue.measureDiv&&(ue.measureDiv.style.display="none"));const Ke=[...A.getLatLngs()[0]];Ke.splice((Qe+1)%Ke.length,0,K),A.setLatLngs([Ke]),_(),I(A);const Ge=Qe+1,Xe=1+Ge,ot=Ge<x.length-1?x[Xe]:null;if(ot){const kt=Ut=>{if(!Ue)return;const Gt=A.getLatLngs()[0];Gt[Ge]=Ut.latlng,A.setLatLngs([Gt]),ot.setLatLng(Ut.latlng);const fn=x.slice(1+Gt.length),pn=(Ge-1+Gt.length)%Gt.length,et=Ge;if(fn[pn]){const it=Gt[pn],nt=Gt[Ge],Vt=Rt.latLng((it.lat+nt.lat)/2,(it.lng+nt.lng)/2);fn[pn].setLatLng(Vt)}if(fn[et]){const it=Gt[Ge],nt=Gt[(Ge+1)%Gt.length],Vt=Rt.latLng((it.lat+nt.lat)/2,(it.lng+nt.lng)/2);fn[et].setLatLng(Vt)}},Ct=()=>{if(Ue=!1,!!e.value){if(e.value.off("mousemove",kt),document.removeEventListener("mouseup",Ct),e.value.dragging.enable(),A.properties){const Ut=A.getLatLngs()[0].map(fn=>[fn.lng,fn.lat]);Ut.push(Ut[0]);const Gt=du([Ut]);A.properties.area=rc(Gt),A.properties.perimeter=A.getLatLngs()[0].reduce((fn,pn,et,it)=>{const nt=it[(et+1)%it.length];return fn+pn.distanceTo(nt)},0)}_(),I(A),s.value=null,Xs(()=>{s.value=A})}};e.value.on("mousemove",kt),document.addEventListener("mouseup",Ct)}else e.value.dragging.enable(),_(),I(A)})})})()},$=A=>{if(!(!e.value||!r.value)){console.log("[generateTempControlPoints] Génération des points temporaires pour",{layerType:A.constructor.name,properties:A.properties}),r.value.clearLayers();try{if(A instanceof ga)A.generateHelperPoints(e.value);else if(A instanceof Rh){if("getLatLng"in A&&typeof A.getLatLng=="function"){const J=A.getLatLng();if(J){const fe=Rt.circleMarker(J,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(fe)}}}else if(A instanceof gf||A instanceof Rt.Polygon){let J=[];if("getLatLngs"in A){const ne=A.getLatLngs();if(Array.isArray(ne)&&ne.length>0){const he=ne[0];Array.isArray(he)?J=he:he instanceof Rt.LatLng&&(J=ne)}}let fe=null;if(A instanceof gf&&typeof A.getCenter=="function")fe=A.getCenter();else if(J.length>0){const ne=J.map(T=>[T.lng,T.lat]);ne.push(ne[0]);const he=du([ne]),ae=rp(he);fe=Rt.latLng(ae.geometry.coordinates[1],ae.geometry.coordinates[0])}if(fe){const ne=Rt.circleMarker(fe,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(ne)}J.forEach(ne=>{if(ne){const he=Rt.circleMarker(ne,{radius:5,color:"#DC2626",fillColor:"#DC2626",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(he)}});for(let ne=0;ne<J.length;ne++){const he=J[ne],ae=J[(ne+1)%J.length];if(he&&ae){const T=Rt.latLng((he.lat+ae.lat)/2,(he.lng+ae.lng)/2),ue=Rt.circleMarker(T,{radius:5,color:"#2563EB",fillColor:"#2563EB",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(ue)}}}console.log("[generateTempControlPoints] Points temporaires générés",{count:r.value.getLayers().length})}catch(J){console.error("[generateTempControlPoints] Erreur lors de la génération des points temporaires:",J)}}},U=A=>{console.log("Nombre total de couches:",A.length);const J=A.filter(T=>{var Ce;if(!T)return!1;let ue=0,ke={width:0,height:0};if(T instanceof Rt.Circle){ue=Math.PI*Math.pow(T.getRadius(),2);const Ve=T.getRadius();console.log(`
Forme détectée: Circle`),console.log(`- Surface propre: ${ue.toFixed(2)} m²`),console.log(`- Rayon: ${Ve.toFixed(2)} m`),console.log("- Angle: Cercle complet (360°)")}else if(T instanceof ga||T instanceof Rt.Rectangle){const Ve=T.getBounds(),K=Ve.getSouthWest(),pe=Ve.getNorthEast(),ve=pu([[K.lng,K.lat],[pe.lng,K.lat]]),ge=pu([[K.lng,K.lat],[K.lng,pe.lat]]);ke.width=Uf(ve,{units:"meters"}),ke.height=Uf(ge,{units:"meters"}),ue=ke.width*ke.height,console.log(`
Forme détectée: Rectangle`),console.log(`- Surface propre: ${ue.toFixed(2)} m²`),console.log(`- Largeur: ${ke.width.toFixed(2)} m`),console.log(`- Hauteur: ${ke.height.toFixed(2)} m`)}else if(((Ce=T.properties)==null?void 0:Ce.type)==="Semicircle"){const Ve=T.getStartAngle(),K=T.getStopAngle(),pe=(K-Ve+360)%360,ve=T.getRadius();ue=Math.PI*Math.pow(ve,2)*pe/360,console.log(`
Forme détectée: Semicircle`),console.log(`- Surface propre: ${ue.toFixed(2)} m²`),console.log(`- Rayon: ${ve.toFixed(2)} m`),console.log(`- Angle de début: ${Ve.toFixed(2)}°`),console.log(`- Angle de fin: ${K.toFixed(2)}°`),console.log(`- Angle d'ouverture: ${pe.toFixed(2)}°`)}return ue>0});if(J.length===0)return 0;const fe=new Set,ne=[];for(const T of J)if(!fe.has(T)){const ue=ie(J,T);ue.length>0&&(ne.push(ue),ue.forEach(ke=>fe.add(ke)))}console.log(`
Nombre de groupes de formes connectées: ${ne.length}`);const he=ne.map((T,ue)=>{console.log(`
Calcul pour le groupe ${ue+1} (${T.length} formes):`);const ke=T.map(ve=>{var ge,Ue,Qe;try{let Ke;if(ve instanceof Rt.Circle){const Ge=ve.getLatLng(),Xe=ve.getRadius();Ke=RN([Ge.lng,Ge.lat],Xe/1e3,{units:"kilometers",steps:256});const ot=rc(Ke),kt=((ge=ve.properties)==null?void 0:ge.surface)||0;return console.log(`
Conversion Cercle -> GeoJSON`),console.log(`- Rayon: ${Xe.toFixed(2)}m`),console.log(`- Surface propriété: ${kt.toFixed(2)}m²`),console.log(`- Surface GeoJSON: ${ot.toFixed(2)}m²`),Ke}else if(ve instanceof ga||ve instanceof Rt.Rectangle){const Ge=ve.getBounds(),Xe=Ge.getSouthWest(),ot=Ge.getNorthEast(),kt=Rt.latLng(ot.lat,Xe.lng),Ct=Rt.latLng(Xe.lat,ot.lng),Ut=[[Xe.lng,Xe.lat],[Ct.lng,Ct.lat],[ot.lng,ot.lat],[kt.lng,kt.lat],[Xe.lng,Xe.lat]];Ke=du([Ut]);const Gt=rc(Ke),fn=pu([[Xe.lng,Xe.lat],[ot.lng,Xe.lat]]),pn=pu([[Xe.lng,Xe.lat],[Xe.lng,ot.lat]]),et=Uf(fn,{units:"meters"}),it=Uf(pn,{units:"meters"}),nt=et*it;return console.log(`
Conversion Rectangle -> GeoJSON`),console.log(`- Largeur: ${et.toFixed(2)}m`),console.log(`- Hauteur: ${it.toFixed(2)}m`),console.log(`- Surface théorique: ${nt.toFixed(2)}m²`),console.log(`- Surface GeoJSON: ${Gt.toFixed(2)}m²`),console.log(`- Différence: ${Math.abs(nt-Gt).toFixed(2)}m² (${(Math.abs(nt-Gt)/nt*100).toFixed(2)}%)`),Ke}else if(((Ue=ve.properties)==null?void 0:Ue.type)==="Semicircle"){const Ge=ve.getCenter(),Xe=ve.getRadius(),ot=ve.getStartAngle(),kt=ve.getStopAngle(),Ct=[],Ut=64;Ct.push([Ge.lng,Ge.lat]);for(let pn=0;pn<=Ut;pn++){const it=(ot+(kt-ot+360)%360*pn/Ut)*Math.PI/180,nt=Xe*Math.cos(it),Qt=Xe*Math.sin(it)/111319.9,On=nt/(111319.9*Math.cos(Ge.lat*Math.PI/180));Ct.push([Ge.lng+On,Ge.lat+Qt])}Ct.push([Ge.lng,Ge.lat]),Ke=du([Ct]);const Gt=rc(Ke),fn=((Qe=ve.properties)==null?void 0:Qe.surface)||0;return console.log(`
Conversion Semicircle -> GeoJSON`),console.log(`- Rayon: ${Xe.toFixed(2)}m`),console.log(`- Surface propriété: ${fn.toFixed(2)}m²`),console.log(`- Surface GeoJSON: ${Gt.toFixed(2)}m²`),console.log(`- Différence: ${Math.abs(fn-Gt).toFixed(2)}m² (${(Math.abs(fn-Gt)/fn*100).toFixed(2)}%)`),Ke}return null}catch(Ke){return console.error("[useMapDrawing] Erreur lors de la conversion en GeoJSON:",Ke),null}}).filter(ve=>ve!==null);if(ke.length===0)return 0;const Ce=ke.map(ve=>{const ge=rc(ve);return console.log(`Surface individuelle: ${ge.toFixed(2)}m²`),ge});let Ve=0;for(let ve=0;ve<ke.length;ve++)for(let ge=ve+1;ge<ke.length;ge++)try{const Ue=LN([ke[ve],ke[ge]]),Qe=iB(Ue);if(Qe){const Ke=rc(Qe);Ve+=Ke,console.log(`Intersection entre formes ${ve+1} et ${ge+1}: ${Ke.toFixed(2)}m²`)}}catch(Ue){console.error(`Erreur lors du calcul d'intersection entre les formes ${ve+1} et ${ge+1}:`,Ue)}const K=Ce.reduce((ve,ge)=>ve+ge,0),pe=K-Ve;return console.log(`
Calcul de la surface d'irrigation pour le groupe ${ue+1}:`),console.log(`- Surface totale (somme): ${K.toFixed(2)}m²`),console.log(`- Surface d'intersection: ${Ve.toFixed(2)}m²`),console.log(`- Surface d'irrigation finale: ${pe.toFixed(2)}m²`),pe}),ae=Math.max(...he);return console.log(`
Surface d'irrigation maximale parmi les groupes: ${ae.toFixed(2)}m²`),ae},W=()=>{u.value&&(e.value.removeLayer(u.value),u.value=null)},q=(A,J)=>{if(!e.value)return;W();const fe=J?ie(A,J):A;if(u.value||(u.value=Rt.layerGroup().addTo(e.value)),fe.forEach(ne=>{var ae;const he=(ae=ne.properties)==null?void 0:ae.type;if(he==="Circle"||he==="Semicircle"){const T=ne.getLatLng(),ue=ne.getRadius(),ke=Rt.circle(T,{radius:ue,fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:Rt.canvas({padding:.5})}),Ce=Rt.circle(T,{radius:ue,fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:Rt.canvas({padding:.5})});u.value&&(u.value.addLayer(Ce),u.value.addLayer(ke))}else if(he==="Rectangle"||he==="Polygon"){const T=ne.getLatLngs(),ue=Rt.polygon(T,{fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:Rt.canvas({padding:.5})}),ke=Rt.polygon(T,{fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:Rt.canvas({padding:.5})});u.value&&(u.value.addLayer(ke),u.value.addLayer(ue))}}),J&&fe.length>1&&e.value){const ne=Rt.latLngBounds([]);fe.forEach(T=>{T.getBounds?ne.extend(T.getBounds()):T.getLatLng&&ne.extend(T.getLatLng())});const he=ne.getCenter(),ae=Rt.tooltip({permanent:!0,direction:"center",className:"connected-group-tooltip"}).setContent("<div>Groupe connecté</div>").setLatLng(he);u.value&&u.value.addLayer(Rt.marker(he,{opacity:0,interactive:!1}).bindTooltip(ae).openTooltip())}},ie=(A,J)=>{if(!J)return[];const fe=new Set,ne=[J],he=[J];for(J._leaflet_id!==void 0&&fe.add(J._leaflet_id);ne.length>0;){const ae=ne.shift();for(const T of A){if(T===ae||fe.has(T._leaflet_id))continue;re(ae,T)&&(he.push(T),ne.push(T),fe.add(T._leaflet_id))}}return he},re=(A,J)=>{let fe=null,ne=null;if(A.getBounds&&typeof A.getBounds=="function")fe=A.getBounds();else if(A.getLatLng&&A.getRadius){const he=A.getLatLng(),ae=A.getRadius();fe=Rt.latLngBounds([he.lat-ae/111e3,he.lng-ae/(111e3*Math.cos(he.lat*Math.PI/180))],[he.lat+ae/111e3,he.lng+ae/(111e3*Math.cos(he.lat*Math.PI/180))])}if(J.getBounds&&typeof J.getBounds=="function")ne=J.getBounds();else if(J.getLatLng&&J.getRadius){const he=J.getLatLng(),ae=J.getRadius();ne=Rt.latLngBounds([he.lat-ae/111e3,he.lng-ae/(111e3*Math.cos(he.lat*Math.PI/180))],[he.lat+ae/111e3,he.lng+ae/(111e3*Math.cos(he.lat*Math.PI/180))])}return!(!fe||!ne||!fe.intersects(ne))},we=(A,J)=>{var ne;const fe=ie(A,J);return fe.length===1&&(ne=J.properties)!=null&&ne.surface?J.properties.surface:U(fe)},Pe=A=>{var ne,he,ae,T,ue,ke,Ce,Ve,K;const J=A.layer;(ne=n.value)==null||ne.addLayer(J);let fe="unknown";if(J instanceof Rt.Circle?fe=i.value==="Semicircle"?"Semicircle":"Circle":J instanceof Rt.Rectangle?fe="Rectangle":J instanceof Rt.Polygon?fe="Polygon":J instanceof Rt.Polyline&&!(J instanceof Rt.Polygon)&&(fe="Line"),J.properties=D(J,fe),J.properties||(J.properties={}),J.properties.category||(J.properties.category="forages"),J.properties.accessLevel||(J.properties.accessLevel="visitor"),J._dbId=Date.now()+Math.floor(Math.random()*1e3),s.value=J,console.log("[useMapDrawing] Input layer:",{type:fe,instanceof:{Circle:J instanceof Rt.Circle,Rectangle:J instanceof Rt.Rectangle,Polygon:J instanceof Rt.Polygon,Polyline:J instanceof Rt.Polyline},options:J.options,properties:J.properties,_dbId:J._dbId}),window.dispatchEvent(new CustomEvent("shape:created",{detail:{shape:J,type:fe,properties:J.properties}})),J.on("mouseover",()=>{console.log("[mouseover] Survol de la forme",{type:fe,isSelected:s.value===J}),(!s.value||s.value!==J)&&$(J)}),J.on("mouseout",()=>{var pe;console.log("[mouseout] Sortie de la forme",{type:fe,isSelected:s.value===J}),(!s.value||s.value!==J)&&((pe=r.value)==null||pe.clearLayers())}),fe==="Semicircle")console.log("Conversion en demi-cercle désactivée selon les exigences");else if(fe==="Circle"){(he=n.value)==null||he.removeLayer(J);const pe=new Rh(J.getLatLng(),{radius:J.getRadius(),...J.options});pe.properties={...D(pe,"Circle"),type:"Circle"},Object.defineProperty(pe,"name",{value:pe.properties.name,writable:!0,enumerable:!0,configurable:!0}),console.log("[useMapDrawing] Création du cercle personnalisé:",{propertyDescriptor:Object.getOwnPropertyDescriptor(pe,"name"),directName:pe.name,propertiesName:pe.properties.name,nameIsEnumerable:Object.keys(pe).includes("name"),allProperties:Object.keys(pe.properties),allKeys:Object.keys(pe)}),(ae=n.value)==null||ae.addLayer(pe),s.value=pe,R(pe)}else if(fe==="Rectangle"){(T=n.value)==null||T.removeLayer(J);const pe=new ga(J.getBounds(),{...J.options});pe.updateProperties(),(ue=n.value)==null||ue.addLayer(pe),s.value=pe,Z(pe)}else if(J instanceof Rt.Polygon){const pe=J.getLatLngs()[0],ve=new gf([pe],{...J.options});ve.updateProperties(),(ke=n.value)==null||ke.removeLayer(J),(Ce=n.value)==null||Ce.addLayer(ve),s.value=ve,I(ve)}else if(J instanceof Ts)z(J);else if(J instanceof Rt.Polyline&&!(J instanceof Rt.Polygon)){const pe=J.getLatLngs(),ve=new Ts(pe,{...J.options});ve.updateProperties(),(Ve=n.value)==null||Ve.removeLayer(J),(K=n.value)==null||K.addLayer(ve),s.value=ve,z(ve)}_l("Cliquez sur la forme pour afficher les points de contrôle")},Ie=()=>{e.value&&(e.value.off("pm:create"),e.value.on("pm:create",Pe))};return{map:e,featureGroup:n,controlPointsGroup:t,tempControlPointsGroup:r,currentTool:i,selectedShape:s,isDrawing:o,initMap:O,setDrawingTool:Y,updateShapeStyle:Q,updateShapeProperties:le,updateTextFixedSize:N,adjustView:F,clearActiveControlPoints:_,calculateTotalCoverageArea:U,showCoverageOverlay:q,hideCoverageOverlay:W,calculateConnectedCoverageArea:we,getConnectedShapes:ie}}function DR(){const{isEnabled:e,startMeasure:n}=dd(),t=Ft(null),r=Ft(""),i=Ft("Hybride"),s=Ft(null),o=n("createBaseMaps","useMapState"),u={Hybride:Rt.layerGroup([Rt.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:19,tileSize:256,zoomOffset:0,bounds:Rt.latLngBounds(Rt.latLng(41.333,-5.566),Rt.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0,opacity:.6}),Rt.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"© Esri",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:20,tileSize:256,zoomOffset:0,bounds:Rt.latLngBounds(Rt.latLng(41.333,-5.566),Rt.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0,opacity:.6})]),Cadastre:Rt.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Cadastre - Carte © IGN/Geoportail",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:18,tileSize:256,zoomOffset:0,bounds:Rt.latLngBounds(Rt.latLng(41.333,-5.566),Rt.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0}),IGN:Rt.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Carte IGN © IGN/Geoportail",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:18,tileSize:256,zoomOffset:0,bounds:Rt.latLngBounds(Rt.latLng(41.333,-5.566),Rt.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0})};o();const f=dn.createPerformanceTracker(x=>{dn.measure("initMap:setOptions",()=>{t.value=x,x.options.zoomSnap=.25,x.options.zoomDelta=.25,x.options.wheelPxPerZoomLevel=100,x.options.zoomAnimation=!0,x.options.fadeAnimation=!0,x.options.markerZoomAnimation=!0,x.options.minZoom=2,x.options.maxZoom=19,x.options.scrollWheelZoom=!0,x.options.doubleClickZoom=!0;const _=Rt.latLngBounds(Rt.latLng(-90,-180),Rt.latLng(90,180));x.setMaxBounds(_),x.options.maxBoundsViscosity=1,x.options.trackResize=!0;let M=null;x.getZoom(),x.on("zoomstart",()=>{x.getZoom(),x.options.zoomAnimation=!1,x.options.markerZoomAnimation=!1}),x.on("zoomend",()=>{M&&clearTimeout(M),M=setTimeout(()=>{setTimeout(()=>{x.options.zoomAnimation=!0,x.options.markerZoomAnimation=!0,x.invalidateSize({animate:!1,pan:!1});const N=x.getBounds(),O=x.options.maxBounds;O&&!N.intersects(O)&&x.panInsideBounds(O,{animate:!1})},250)},250)});const D=x._zoomAnimation;D&&(x._zoomAnimation=function(N){try{this._animatingZoom||D.call(this,N)}catch{console.warn("Animation de zoom interrompue, restauration de la vue..."),this._resetView(this.getCenter(),this.getZoom())}})},"useMapState"),dn.measure("initMap:addInitialLayer",()=>{x&&x.whenReady(()=>{const _=i.value;if(u[_]){if(console.log(`Initialisation de la couche de base: ${_}`),s.value&&x.hasLayer(s.value))try{x.removeLayer(s.value),console.log("Couche active précédente supprimée")}catch(M){console.warn("Erreur lors de la suppression de la couche active précédente:",M)}s.value=u[_];try{s.value.addTo(x),console.log(`Couche ${_} ajoutée à la carte`)}catch(M){console.error(`Erreur lors de l'ajout de la couche ${_}:`,M)}}else console.warn(`Couche de base non disponible: ${_}`)})},"useMapState"),x.on("baselayerchange",_=>{const M=n("baselayerchange","useMapState",{layer:_.name});i.value=_.name,s.value=_.layer,M()}),e.value&&(x.on("movestart",()=>{n("mapMove","useMapState",{startCenter:x.getCenter()})}),x.on("moveend",()=>{n("mapMoveEnd","useMapState",{endCenter:x.getCenter()})()}),x.on("tileloadstart",()=>{n("tileLoad","useMapState")}),x.on("tileload",()=>{n("tileLoadEnd","useMapState")()}))},"initMap","useMapState"),d=dn.createAsyncPerformanceTracker(async x=>{if(!t.value||!u[x]){console.warn(`Impossible de changer la carte de base: ${t.value?"type de carte non disponible":"carte non initialisée"}`);return}try{if(i.value===x)return;console.log(`Changement de carte: ${i.value} -> ${x}`);const _=t.value,M=_.getCenter(),D=_.getZoom();_.options.zoomAnimation=!1,_.options.fadeAnimation=!1,_.options.markerZoomAnimation=!1;const N=u[x];if(s.value&&_.hasLayer(s.value))try{_.removeLayer(s.value),console.log(`Couche précédente ${i.value} supprimée`)}catch(O){console.warn("Erreur lors de la suppression de la couche active:",O)}try{N instanceof Rt.LayerGroup,N.addTo(_),console.log(`Nouvelle couche ${x} ajoutée`)}catch(O){console.error("Erreur lors de l'ajout de la nouvelle couche:",O);try{_.hasLayer(N)&&_.removeLayer(N),N.addTo(_),console.log(`Récupération: couche ${x} réajoutée`)}catch(F){throw console.error("Échec de la récupération:",F),new Error("Impossible d'ajouter la nouvelle couche")}}s.value=N,i.value=x;try{_.setView(M,D,{animate:!1,duration:0,noMoveStart:!0}),console.log(`Vue réinitialisée: centre=${M}, zoom=${D}`)}catch(O){console.warn("Erreur lors de la réinitialisation de la vue:",O)}try{_.invalidateSize({animate:!1,pan:!1})}catch(O){console.warn("Erreur lors du rafraîchissement de la carte:",O)}setTimeout(()=>{_.options.zoomAnimation=!0,_.options.fadeAnimation=!0,_.options.markerZoomAnimation=!0,console.log("Animations restaurées")},500)}catch(_){if(console.error("Erreur lors du changement de carte de base:",_),t.value)try{const M=t.value;M.eachLayer(N=>{(N instanceof Rt.TileLayer||N instanceof Rt.LayerGroup)&&M.removeLayer(N)});const D=u[x];D.addTo(M),s.value=D,i.value=x,M.options.zoomAnimation=!0,M.options.fadeAnimation=!0,M.options.markerZoomAnimation=!0,M.invalidateSize({animate:!1,pan:!1}),console.log("Récupération effectuée après erreur")}catch(M){console.error("Erreur lors de la récupération après échec:",M)}}},"changeBaseMap","useMapState"),g=dn.createAsyncPerformanceTracker(async()=>{if(!(!t.value||!r.value))try{const x=await dn.measureAsync("searchLocation:fetchData",async()=>await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(r.value)}`),"useMapState"),_=await dn.measureAsync("searchLocation:parseResponse",async()=>await x.json(),"useMapState");_&&_.length>0&&dn.measure("searchLocation:updateView",()=>{const{lat:M,lon:D}=_[0];t.value.setView([M,D],13,{animate:i.value!=="Cadastre"})},"useMapState")}catch(x){console.error("Erreur lors de la recherche de localisation:",x)}},"searchLocation","useMapState");return{map:t,searchQuery:r,currentBaseMap:i,baseMaps:u,initMap:f,searchLocation:g,changeBaseMap:d,cleanup:()=>{const x=n("cleanup","useMapState");t.value&&(t.value.remove(),t.value=null),s.value&&(s.value=null),x()},isPerformanceEnabled:e}}const sm=kp("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[],performanceMonitor:dd()}),getters:{getPlanById:e=>n=>e.plans.find(t=>t.id===n),hasUnsavedChanges:e=>e.unsavedChanges,getCurrentPlanHistory:e=>e.planHistory},actions:{async fetchPlans(){var t,r;const e=this.performanceMonitor.startMeasure("fetchPlans","IrrigationStore"),n=va();this.loading=!0;try{let i="/plans/";const s={};n.isSalarie?s.salarie=(t=n.user)==null?void 0:t.id:n.isVisiteur&&(s.visiteur=(r=n.user)==null?void 0:r.id);const o=await this.performanceMonitor.measureAsync("fetchPlans_apiCall",()=>Un.get(i,{params:s}),"IrrigationStore");this.plans=o.data}catch(i){throw this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,e()}},async fetchPlansWithDetails(){var t,r;const e=this.performanceMonitor.startMeasure("fetchPlansWithDetails","IrrigationStore"),n=va();this.loading=!0;try{let i="/plans/";const s={include_details:!0};n.isSalarie?s.salarie=(t=n.user)==null?void 0:t.id:n.isVisiteur&&(s.visiteur=(r=n.user)==null?void 0:r.id);const o=await this.performanceMonitor.measureAsync("fetchPlansWithDetails_apiCall",()=>Un.get(i,{params:s}),"IrrigationStore"),u=this.performanceMonitor.measure("fetchPlansWithDetails_processResponse",()=>o.data.map(f=>({...f,entreprise:typeof f.entreprise=="object"?f.entreprise:null,salarie:typeof f.salarie=="object"?f.salarie:null,visiteur:typeof f.visiteur=="object"?f.visiteur:null})),"IrrigationStore");return this.plans=u,{data:u}}catch(i){throw console.error("[IrrigationStore] Error fetching plans:",i),this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,e()}},async fetchClientPlans(e){this.loading=!0;try{return(await mg.getVisiteurPlans(e)).data}catch(n){throw this.error="Erreur lors du chargement des plans du client",n}finally{this.loading=!1}},async createPlan(e){var r;const n=this.performanceMonitor.startMeasure("createPlan","IrrigationStore");this.clearCurrentPlan(),this.loading=!0;const t=dc();try{const i=va();((r=i.user)==null?void 0:r.user_type)==="visiteur"&&(e={...e,visiteur:i.user.id,salarie_id:i.user.enterprise_id,entreprise_id:i.user.enterprise_id});const s=this.performanceMonitor.measure("createPlan_formatData",()=>({...e,entreprise:e.entreprise?typeof e.entreprise=="object"&&e.entreprise&&"id"in e.entreprise?e.entreprise.id:Number(e.entreprise):null,salarie:e.salarie?typeof e.salarie=="object"&&e.salarie&&"id"in e.salarie?e.salarie.id:Number(e.salarie):null,visiteur:e.visiteur?typeof e.visiteur=="object"&&e.visiteur&&"id"in e.visiteur?e.visiteur.id:Number(e.visiteur):null}),"IrrigationStore"),o=await this.performanceMonitor.measureAsync("createPlan_apiCall",()=>mg.createPlan(s),"IrrigationStore");return this.plans.push(o.data),t.success(`Le plan "${o.data.nom}" a été créé avec succès`),o.data}catch(i){const s=i instanceof Error?i.message:String(i);throw console.error("Error creating plan:",s),this.error=s,t.error(`Erreur lors de la création du plan : ${s}`),i}finally{this.loading=!1,n()}},async createPlanForClient(e,n){this.clearCurrentPlan(),this.loading=!0;try{const t={...e,visiteur:n},r=await mg.createPlanForVisiteur(t);return this.plans.push(r.data),r.data}catch(t){const r=t instanceof Error?t.message:String(t);throw console.error("Error creating plan for client:",r),this.error="Erreur lors de la création du plan pour le client",t}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(e){const n=this.performanceMonitor.startMeasure("savePlan","IrrigationStore");if(!this.unsavedChanges){console.log("[IrrigationStore][savePlan] Aucun changement à sauvegarder"),n();return}this.loading=!0;try{const t=await this.performanceMonitor.measureAsync("savePlan_apiCall",()=>{var r;return Un.patch(`/plans/${e}/`,{...this.currentPlan,version:((r=this.currentPlan)==null?void 0:r.version)||1})},"IrrigationStore");return this.performanceMonitor.measure("savePlan_updateState",()=>{var i;const r=this.plans.findIndex(s=>s.id===e);r!==-1&&(this.plans[r]=t.data),((i=this.currentPlan)==null?void 0:i.id)===e&&(this.currentPlan=t.data)},"IrrigationStore"),this.unsavedChanges=!1,t.data}catch(t){throw console.error("[IrrigationStore][savePlan] ERREUR:",t),this.error="Erreur lors de la sauvegarde du plan",t}finally{this.loading=!1,n()}},async updatePlanDetails(e,n){const t=this.performanceMonitor.startMeasure("updatePlanDetails","IrrigationStore"),r=dc();try{const i=await this.performanceMonitor.measureAsync("updatePlanDetails_apiCall",()=>{const{visiteur_id:s,salarie_id:o,entreprise_id:u,...f}=n,d={...f};return s!==void 0&&(d.visiteur_id=s),o!==void 0&&(d.salarie_id=o),u!==void 0&&(d.entreprise_id=u),Un.patch(`/plans/${e}/`,d)},"IrrigationStore");return this.performanceMonitor.measure("updatePlanDetails_updateState",()=>{this.currentPlan&&this.currentPlan.id===e&&(this.currentPlan={...this.currentPlan,...i.data});const s=this.plans.findIndex(o=>o.id===e);s!==-1&&(this.plans[s]={...this.plans[s],...i.data})},"IrrigationStore"),i.data}catch(i){throw console.error("Erreur lors de la mise à jour du plan:",i),r.error(`Erreur lors de la mise à jour du plan : ${i instanceof Error?i.message:String(i)}`),i}finally{t()}},async fetchPlanHistory(e){this.loading=!0;try{const n=await Un.get(`/plans/${e}/historique/`);return this.planHistory=n.data,n.data}catch(n){throw this.error="Erreur lors de la récupération de l'historique",n}finally{this.loading=!1}},async restorePlanVersion(e,n){var t;this.loading=!0;try{const r=await Un.post(`/plans/${e}/restaurer/`,{version_id:n});((t=this.currentPlan)==null?void 0:t.id)===e&&(this.currentPlan=r.data);const i=this.plans.findIndex(s=>s.id===e);return i!==-1&&(this.plans[i]=r.data),r.data}catch(r){throw this.error="Erreur lors de la restauration de la version",r}finally{this.loading=!1}},setCurrentPlan(e){this.currentPlan=e,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.unsavedChanges=!1,this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(e){var t;this.loading=!0;const n=dc();try{const r=this.plans.find(i=>i.id===e);await mg.deletePlan(e),this.plans=this.plans.filter(i=>i.id!==e),((t=this.currentPlan)==null?void 0:t.id)===e&&this.clearCurrentPlan(),n.success(`Le plan "${(r==null?void 0:r.nom)||""}" a été supprimé avec succès`)}catch(r){throw this.error="Erreur lors de la suppression du plan",n.error(`Erreur lors de la suppression du plan : ${r instanceof Error?r.message:String(r)}`),r}finally{this.loading=!1}}}}),NR={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[3001] overflow-y-auto"},BR={class:"bg-white w-full h-full md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 relative overflow-y-auto"},OR={class:"p-4 md:p-6 pt-0 overflow-y-auto max-h-[calc(100vh-80px)] md:max-h-[calc(90vh-80px)]"},IR={key:0,class:"mb-4"},RR={key:0,class:"animate-pulse"},FR=["value"],jR={key:1,class:"mb-4"},zR={key:0,class:"animate-pulse"},$R=["disabled"],UR={value:null},VR=["value"],HR={key:2,class:"mb-4"},GR={key:0,class:"animate-pulse"},qR=["disabled"],WR={value:null},ZR=["value"],KR={class:"mb-4"},YR={class:"mb-6"},JR={class:"flex justify-end space-x-3"},XR=["disabled"],QR={key:0},eF={key:1},vx=us({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","salarieSelected","visiteurSelected"],setup(e,{expose:n,emit:t}){function r($){return $?typeof $=="object"?$.id:$:null}function i($){if($===null)throw new Error("Invalid ID");return $}const s=e,o=t,u=va(),f=sm(),d=Ip(),g=Ft(!1),y=Ft(null),x=Ft([]),_=Ft([]),M=Ft([]),D=Ft(null),N=Ft(null),O=Ft(!1),F=Ft(!1),Y=Ft(!1),Q=Ft({nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),le=gr(()=>{var $,U,W;return(($=u.user)==null?void 0:$.user_type)==="admin"?Q.value.nom.trim()&&Q.value.entreprise&&Q.value.salarie&&Q.value.visiteur:((U=u.user)==null?void 0:U.user_type)==="entreprise"?Q.value.nom.trim()&&Q.value.salarie&&Q.value.visiteur:((W=u.user)==null?void 0:W.user_type)==="salarie"?Q.value.nom.trim()&&Q.value.visiteur:Q.value.nom.trim()});So(()=>Q.value.entreprise,async $=>{if(!s.modelValue)return;Q.value.salarie=null,Q.value.visiteur=null,_.value=[];const U=r($);console.log("[NewPlanModal] Entreprise sélectionnée:",U),U?await ce(U):x.value=[]}),So(()=>Q.value.salarie,async $=>{if(!s.modelValue)return;Q.value.visiteur=null;const U=r($);U?await xe(U):_.value=[]}),So(()=>s.modelValue,$=>{var U,W,q;$?((U=u.user)==null?void 0:U.user_type)==="admin"?z():((W=u.user)==null?void 0:W.user_type)==="entreprise"?ce(u.user.id):((q=u.user)==null?void 0:q.user_type)==="salarie"&&xe(u.user.id):(Q.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},D.value=null,N.value=null,_.value=[],x.value=[],M.value=[],y.value=null)});async function ce($){O.value=!0;try{console.log("[NewPlanModal] Chargement des salaries pour entreprise:",$);const U=await Cl.getUsers({role:"SALARIE",entreprise:$});console.log("[NewPlanModal] Réponse salaries:",U.data),x.value=U.data}catch(U){console.error("[NewPlanModal] Error loading salaries:",U),x.value=[]}finally{O.value=!1}}async function xe($){F.value=!0;try{const U=await Cl.getUsers({role:"VISITEUR",salarie:$});_.value=U.data}catch(U){console.error("[NewPlanModal] Error loading visiteurs:",U),_.value=[]}finally{F.value=!1}}async function G($){s.modelValue&&(D.value=$,Q.value.salarie=$.id,await xe($.id),o("salarieSelected",$))}function R($){s.modelValue&&(N.value=$,Q.value.visiteur=$.id,o("visiteurSelected",$))}function Z(){o("update:modelValue",!1),Q.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},D.value=null,N.value=null,_.value=[],y.value=null}async function z(){Y.value=!0;try{const $=await u.fetchEnterprises();M.value=$}catch($){console.error("[NewPlanModal] Error loading entreprises:",$),M.value=[]}finally{Y.value=!1}}async function I(){var $,U;y.value=null,g.value=!0;try{const W={nom:Q.value.nom.trim(),description:Q.value.description.trim()},q=u.user;if(!q)throw new Error("User not found");if(q.user_type==="admin"){if(!Q.value.entreprise||!Q.value.salarie||!Q.value.visiteur)throw new Error("Missing required fields");W.entreprise=i(r(Q.value.entreprise)),W.salarie=i(r(Q.value.salarie)),W.visiteur=Q.value.visiteur}else if(q.user_type==="entreprise"){if(!Q.value.salarie||!Q.value.visiteur)throw new Error("Missing required fields");W.entreprise=q.id,W.salarie=i(r(Q.value.salarie)),W.visiteur=Q.value.visiteur}else if(q.user_type==="salarie"){if(!q.entreprise||!Q.value.visiteur)throw new Error("Missing required fields");W.entreprise=q.entreprise.id,W.salarie=q.id,W.visiteur=Q.value.visiteur}else if(q.user_type==="visiteur"){if(!q.entreprise||!q.salarie)throw new Error("Missing required fields");W.entreprise=q.entreprise.id,W.salarie=q.salarie.id,W.visiteur=q.id}console.log("Données du plan à créer:",W),f.clearCurrentPlan(),d.setCurrentPlan(null);const ie=await f.createPlan(W);o("created",ie.id),Z()}catch(W){console.error("[NewPlanModal] Error creating plan:",W),console.error("Response data:",($=W.response)==null?void 0:$.data);let q="Une erreur est survenue lors de la création du plan";(U=W.response)!=null&&U.data&&(typeof W.response.data=="object"?q=Object.entries(W.response.data).map(([ie,re])=>Array.isArray(re)?`${ie}: ${re.join(", ")}`:`${ie}: ${re}`).join(`
`):typeof W.response.data=="string"&&(q=W.response.data)),y.value=q}finally{g.value=!1}}return n({salaries:x,visiteurs:_,selectedSalarie:D,selectedVisiteur:N,loadSalaries:ce,loadVisiteurs:xe,selectSalarie:G,selectVisiteur:R}),($,U)=>{var W,q,ie,re;return $.modelValue?($e(),qe("div",NR,[E("div",BR,[E("div",{class:"flex justify-between items-center mb-4 sticky top-0 bg-white p-4 md:p-6 pb-4 border-b z-10"},[U[6]||(U[6]=E("h2",{class:"text-xl font-semibold text-gray-900"},"Créer un nouveau plan",-1)),E("button",{onClick:Z,class:"text-gray-400 hover:text-gray-500"},U[5]||(U[5]=[E("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("div",OR,[Wn(u).isAdmin?($e(),qe("div",IR,[U[9]||(U[9]=E("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Entreprise",-1)),Y.value?($e(),qe("div",RR,U[7]||(U[7]=[E("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):In(($e(),qe("select",{key:1,"onUpdate:modelValue":U[0]||(U[0]=we=>Q.value.entreprise=we),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[U[8]||(U[8]=E("option",{value:null},"Sélectionnez une entreprise",-1)),($e(!0),qe(Rn,null,Br(M.value,we=>($e(),qe("option",{key:we.id,value:we.id},Wt(Wn(Gl)(we)),9,FR))),128))],512)),[[lo,Q.value.entreprise]])])):un("",!0),((W=Wn(u).user)==null?void 0:W.user_type)==="admin"||((q=Wn(u).user)==null?void 0:q.user_type)==="entreprise"?($e(),qe("div",jR,[U[11]||(U[11]=E("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Salarie",-1)),O.value?($e(),qe("div",zR,U[10]||(U[10]=[E("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):In(($e(),qe("select",{key:1,id:"edit-salarie","onUpdate:modelValue":U[1]||(U[1]=we=>Q.value.salarie=we),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:Wn(u).isAdmin&&!Q.value.entreprise},[E("option",UR,Wt(x.value.length?"Sélectionnez un salarie":"Aucun salarie disponible"),1),($e(!0),qe(Rn,null,Br(x.value,we=>($e(),qe("option",{key:we.id,value:we.id},Wt(Wn(Gl)(we)),9,VR))),128))],8,$R)),[[lo,Q.value.salarie]])])):un("",!0),((ie=Wn(u).user)==null?void 0:ie.user_type)!=="visiteur"?($e(),qe("div",HR,[U[13]||(U[13]=E("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Visiteur",-1)),F.value?($e(),qe("div",GR,U[12]||(U[12]=[E("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):In(($e(),qe("select",{key:1,id:"edit-visiteur","onUpdate:modelValue":U[2]||(U[2]=we=>Q.value.visiteur=we),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!_.value.length||((re=Wn(u).user)==null?void 0:re.user_type)!=="salarie"&&!Q.value.salarie},[E("option",WR,Wt(_.value.length?"Sélectionnez un visiteur":"Aucun visiteur disponible"),1),($e(!0),qe(Rn,null,Br(_.value,we=>($e(),qe("option",{key:we.id,value:we.id},Wt(Wn(Gl)(we)),9,ZR))),128))],8,qR)),[[lo,Q.value.visiteur]])])):un("",!0),E("div",KR,[U[14]||(U[14]=E("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),In(E("input",{id:"edit-nom","onUpdate:modelValue":U[3]||(U[3]=we=>Q.value.nom=we),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[Zr,Q.value.nom]])]),E("div",YR,[U[15]||(U[15]=E("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),In(E("textarea",{id:"edit-description","onUpdate:modelValue":U[4]||(U[4]=we=>Q.value.description=we),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[Zr,Q.value.description]])]),E("div",JR,[E("button",{onClick:Z,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),E("button",{onClick:I,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!le.value||g.value},[g.value?($e(),qe("span",QR,"Création en cours...")):($e(),qe("span",eF,"Créer"))],8,XR)])])])])):un("",!0)}}});function Yi(e){"@babel/helpers - typeof";return Yi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Yi(e)}var ja=Uint8Array,Wl=Uint16Array,yy=Int32Array,am=new ja([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),lm=new ja([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),b1=new ja([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),yx=function(e,n){for(var t=new Wl(31),r=0;r<31;++r)t[r]=n+=1<<e[r-1];for(var i=new yy(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return{b:t,r:i}},_x=yx(am,2),bx=_x.b,w1=_x.r;bx[28]=258,w1[258]=28;var wx=yx(lm,0),tF=wx.b,Sb=wx.r,x1=new Wl(32768);for(var Co=0;Co<32768;++Co){var rf=(Co&43690)>>1|(Co&21845)<<1;rf=(rf&52428)>>2|(rf&13107)<<2,rf=(rf&61680)>>4|(rf&3855)<<4,x1[Co]=((rf&65280)>>8|(rf&255)<<8)>>1}var pc=function(e,n,t){for(var r=e.length,i=0,s=new Wl(n);i<r;++i)e[i]&&++s[e[i]-1];var o=new Wl(n);for(i=1;i<n;++i)o[i]=o[i-1]+s[i-1]<<1;var u;if(t){u=new Wl(1<<n);var f=15-n;for(i=0;i<r;++i)if(e[i])for(var d=i<<4|e[i],g=n-e[i],y=o[e[i]-1]++<<g,x=y|(1<<g)-1;y<=x;++y)u[x1[y]>>f]=d}else for(u=new Wl(r),i=0;i<r;++i)e[i]&&(u[i]=x1[o[e[i]-1]++]>>15-e[i]);return u},Cf=new ja(288);for(var Co=0;Co<144;++Co)Cf[Co]=8;for(var Co=144;Co<256;++Co)Cf[Co]=9;for(var Co=256;Co<280;++Co)Cf[Co]=7;for(var Co=280;Co<288;++Co)Cf[Co]=8;var Sp=new ja(32);for(var Co=0;Co<32;++Co)Sp[Co]=5;var nF=pc(Cf,9,0),rF=pc(Cf,9,1),iF=pc(Sp,5,0),oF=pc(Sp,5,1),cv=function(e){for(var n=e[0],t=1;t<e.length;++t)e[t]>n&&(n=e[t]);return n},Du=function(e,n,t){var r=n/8|0;return(e[r]|e[r+1]<<8)>>(n&7)&t},fv=function(e,n){var t=n/8|0;return(e[t]|e[t+1]<<8|e[t+2]<<16)>>(n&7)},_y=function(e){return(e+7)/8|0},xx=function(e,n,t){return(t==null||t>e.length)&&(t=e.length),new ja(e.subarray(n,t))},sF=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ru=function(e,n,t){var r=new Error(n||sF[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,Ru),!t)throw r;return r},aF=function(e,n,t,r){var i=e.length,s=0;if(!i||n.f&&!n.l)return t||new ja(0);var o=!t,u=o||n.i!=2,f=n.i;o&&(t=new ja(i*3));var d=function(Ce){var Ve=t.length;if(Ce>Ve){var K=new ja(Math.max(Ve*2,Ce));K.set(t),t=K}},g=n.f||0,y=n.p||0,x=n.b||0,_=n.l,M=n.d,D=n.m,N=n.n,O=i*8;do{if(!_){g=Du(e,y,1);var F=Du(e,y+1,3);if(y+=3,F)if(F==1)_=rF,M=oF,D=9,N=5;else if(F==2){var ce=Du(e,y,31)+257,xe=Du(e,y+10,15)+4,G=ce+Du(e,y+5,31)+1;y+=14;for(var R=new ja(G),Z=new ja(19),z=0;z<xe;++z)Z[b1[z]]=Du(e,y+z*3,7);y+=xe*3;for(var I=cv(Z),$=(1<<I)-1,U=pc(Z,I,1),z=0;z<G;){var W=U[Du(e,y,$)];y+=W&15;var Y=W>>4;if(Y<16)R[z++]=Y;else{var q=0,ie=0;for(Y==16?(ie=3+Du(e,y,3),y+=2,q=R[z-1]):Y==17?(ie=3+Du(e,y,7),y+=3):Y==18&&(ie=11+Du(e,y,127),y+=7);ie--;)R[z++]=q}}var re=R.subarray(0,ce),we=R.subarray(ce);D=cv(re),N=cv(we),_=pc(re,D,1),M=pc(we,N,1)}else Ru(1);else{var Y=_y(y)+4,Q=e[Y-4]|e[Y-3]<<8,le=Y+Q;if(le>i){f&&Ru(0);break}u&&d(x+Q),t.set(e.subarray(Y,le),x),n.b=x+=Q,n.p=y=le*8,n.f=g;continue}if(y>O){f&&Ru(0);break}}u&&d(x+131072);for(var Pe=(1<<D)-1,Ie=(1<<N)-1,A=y;;A=y){var q=_[fv(e,y)&Pe],J=q>>4;if(y+=q&15,y>O){f&&Ru(0);break}if(q||Ru(2),J<256)t[x++]=J;else if(J==256){A=y,_=null;break}else{var fe=J-254;if(J>264){var z=J-257,ne=am[z];fe=Du(e,y,(1<<ne)-1)+bx[z],y+=ne}var he=M[fv(e,y)&Ie],ae=he>>4;he||Ru(3),y+=he&15;var we=tF[ae];if(ae>3){var ne=lm[ae];we+=fv(e,y)&(1<<ne)-1,y+=ne}if(y>O){f&&Ru(0);break}u&&d(x+131072);var T=x+fe;if(x<we){var ue=s-we,ke=Math.min(we,T);for(ue+x<0&&Ru(3);x<ke;++x)t[x]=r[ue+x]}for(;x<T;++x)t[x]=t[x-we]}}n.l=_,n.p=A,n.b=x,n.f=g,_&&(g=1,n.m=D,n.d=M,n.n=N)}while(!g);return x!=t.length&&o?xx(t,0,x):t.subarray(0,x)},Oc=function(e,n,t){t<<=n&7;var r=n/8|0;e[r]|=t,e[r+1]|=t>>8},Td=function(e,n,t){t<<=n&7;var r=n/8|0;e[r]|=t,e[r+1]|=t>>8,e[r+2]|=t>>16},hv=function(e,n){for(var t=[],r=0;r<e.length;++r)e[r]&&t.push({s:r,f:e[r]});var i=t.length,s=t.slice();if(!i)return{t:Sx,l:0};if(i==1){var o=new ja(t[0].s+1);return o[t[0].s]=1,{t:o,l:1}}t.sort(function(le,ce){return le.f-ce.f}),t.push({s:-1,f:25001});var u=t[0],f=t[1],d=0,g=1,y=2;for(t[0]={s:-1,f:u.f+f.f,l:u,r:f};g!=i-1;)u=t[t[d].f<t[y].f?d++:y++],f=t[d!=g&&t[d].f<t[y].f?d++:y++],t[g++]={s:-1,f:u.f+f.f,l:u,r:f};for(var x=s[0].s,r=1;r<i;++r)s[r].s>x&&(x=s[r].s);var _=new Wl(x+1),M=L1(t[g-1],_,0);if(M>n){var r=0,D=0,N=M-n,O=1<<N;for(s.sort(function(ce,xe){return _[xe.s]-_[ce.s]||ce.f-xe.f});r<i;++r){var F=s[r].s;if(_[F]>n)D+=O-(1<<M-_[F]),_[F]=n;else break}for(D>>=N;D>0;){var Y=s[r].s;_[Y]<n?D-=1<<n-_[Y]++-1:++r}for(;r>=0&&D;--r){var Q=s[r].s;_[Q]==n&&(--_[Q],++D)}M=n}return{t:new ja(_),l:M}},L1=function(e,n,t){return e.s==-1?Math.max(L1(e.l,n,t+1),L1(e.r,n,t+1)):n[e.s]=t},Cb=function(e){for(var n=e.length;n&&!e[--n];);for(var t=new Wl(++n),r=0,i=e[0],s=1,o=function(f){t[r++]=f},u=1;u<=n;++u)if(e[u]==i&&u!=n)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=e[u]}return{c:t.subarray(0,r),n}},Dd=function(e,n){for(var t=0,r=0;r<n.length;++r)t+=e[r]*n[r];return t},Lx=function(e,n,t){var r=t.length,i=_y(n+2);e[i]=r&255,e[i+1]=r>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var s=0;s<r;++s)e[i+s+4]=t[s];return(i+4+r)*8},Eb=function(e,n,t,r,i,s,o,u,f,d,g){Oc(n,g++,t),++i[256];for(var y=hv(i,15),x=y.t,_=y.l,M=hv(s,15),D=M.t,N=M.l,O=Cb(x),F=O.c,Y=O.n,Q=Cb(D),le=Q.c,ce=Q.n,xe=new Wl(19),G=0;G<F.length;++G)++xe[F[G]&31];for(var G=0;G<le.length;++G)++xe[le[G]&31];for(var R=hv(xe,7),Z=R.t,z=R.l,I=19;I>4&&!Z[b1[I-1]];--I);var $=d+5<<3,U=Dd(i,Cf)+Dd(s,Sp)+o,W=Dd(i,x)+Dd(s,D)+o+14+3*I+Dd(xe,Z)+2*xe[16]+3*xe[17]+7*xe[18];if(f>=0&&$<=U&&$<=W)return Lx(n,g,e.subarray(f,f+d));var q,ie,re,we;if(Oc(n,g,1+(W<U)),g+=2,W<U){q=pc(x,_,0),ie=x,re=pc(D,N,0),we=D;var Pe=pc(Z,z,0);Oc(n,g,Y-257),Oc(n,g+5,ce-1),Oc(n,g+10,I-4),g+=14;for(var G=0;G<I;++G)Oc(n,g+3*G,Z[b1[G]]);g+=3*I;for(var Ie=[F,le],A=0;A<2;++A)for(var J=Ie[A],G=0;G<J.length;++G){var fe=J[G]&31;Oc(n,g,Pe[fe]),g+=Z[fe],fe>15&&(Oc(n,g,J[G]>>5&127),g+=J[G]>>12)}}else q=nF,ie=Cf,re=iF,we=Sp;for(var G=0;G<u;++G){var ne=r[G];if(ne>255){var fe=ne>>18&31;Td(n,g,q[fe+257]),g+=ie[fe+257],fe>7&&(Oc(n,g,ne>>23&31),g+=am[fe]);var he=ne&31;Td(n,g,re[he]),g+=we[he],he>3&&(Td(n,g,ne>>5&8191),g+=lm[he])}else Td(n,g,q[ne]),g+=ie[ne]}return Td(n,g,q[256]),g+ie[256]},lF=new yy([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Sx=new ja(0),uF=function(e,n,t,r,i,s){var o=s.z||e.length,u=new ja(r+o+5*(1+Math.ceil(o/7e3))+i),f=u.subarray(r,u.length-i),d=s.l,g=(s.r||0)&7;if(n){g&&(f[0]=s.r>>3);for(var y=lF[n-1],x=y>>13,_=y&8191,M=(1<<t)-1,D=s.p||new Wl(32768),N=s.h||new Wl(M+1),O=Math.ceil(t/3),F=2*O,Y=function(pe){return(e[pe]^e[pe+1]<<O^e[pe+2]<<F)&M},Q=new yy(25e3),le=new Wl(288),ce=new Wl(32),xe=0,G=0,R=s.i||0,Z=0,z=s.w||0,I=0;R+2<o;++R){var $=Y(R),U=R&32767,W=N[$];if(D[U]=W,N[$]=U,z<=R){var q=o-R;if((xe>7e3||Z>24576)&&(q>423||!d)){g=Eb(e,f,0,Q,le,ce,G,Z,I,R-I,g),Z=xe=G=0,I=R;for(var ie=0;ie<286;++ie)le[ie]=0;for(var ie=0;ie<30;++ie)ce[ie]=0}var re=2,we=0,Pe=_,Ie=U-W&32767;if(q>2&&$==Y(R-Ie))for(var A=Math.min(x,q)-1,J=Math.min(32767,R),fe=Math.min(258,q);Ie<=J&&--Pe&&U!=W;){if(e[R+re]==e[R+re-Ie]){for(var ne=0;ne<fe&&e[R+ne]==e[R+ne-Ie];++ne);if(ne>re){if(re=ne,we=Ie,ne>A)break;for(var he=Math.min(Ie,ne-2),ae=0,ie=0;ie<he;++ie){var T=R-Ie+ie&32767,ue=D[T],ke=T-ue&32767;ke>ae&&(ae=ke,W=T)}}}U=W,W=D[U],Ie+=U-W&32767}if(we){Q[Z++]=268435456|w1[re]<<18|Sb[we];var Ce=w1[re]&31,Ve=Sb[we]&31;G+=am[Ce]+lm[Ve],++le[257+Ce],++ce[Ve],z=R+re,++xe}else Q[Z++]=e[R],++le[e[R]]}}for(R=Math.max(R,z);R<o;++R)Q[Z++]=e[R],++le[e[R]];g=Eb(e,f,d,Q,le,ce,G,Z,I,R-I,g),d||(s.r=g&7|f[g/8|0]<<3,g-=7,s.h=N,s.p=D,s.i=R,s.w=z)}else{for(var R=s.w||0;R<o+d;R+=65535){var K=R+65535;K>=o&&(f[g/8|0]=d,K=o),g=Lx(f,g+1,e.subarray(R,K))}s.i=o}return xx(u,0,r+_y(g)+i)},Cx=function(){var e=1,n=0;return{p:function(t){for(var r=e,i=n,s=t.length|0,o=0;o!=s;){for(var u=Math.min(o+2655,s);o<u;++o)i+=r+=t[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}e=r,n=i},d:function(){return e%=65521,n%=65521,(e&255)<<24|(e&65280)<<8|(n&255)<<8|n>>8}}},cF=function(e,n,t,r,i){if(!i&&(i={l:1},n.dictionary)){var s=n.dictionary.subarray(-32768),o=new ja(s.length+e.length);o.set(s),o.set(e,s.length),e=o,i.w=s.length}return uF(e,n.level==null?6:n.level,n.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+n.mem,t,r,i)},Ex=function(e,n,t){for(;t;++n)e[n]=t,t>>>=8},fF=function(e,n){var t=n.level,r=t==0?0:t<6?1:t==9?3:2;if(e[0]=120,e[1]=r<<6|(n.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,n.dictionary){var i=Cx();i.p(n.dictionary),Ex(e,2,i.d())}},hF=function(e,n){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Ru(6,"invalid zlib data"),(e[1]>>5&1)==1&&Ru(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function S1(e,n){n||(n={});var t=Cx();t.p(e);var r=cF(e,n,n.dictionary?6:2,4);return fF(r,n),Ex(r,r.length-4,t.d()),r}function dF(e,n){return aF(e.subarray(hF(e),-4),{i:2},n,n)}var pF=typeof TextDecoder<"u"&&new TextDecoder,gF=0;try{pF.decode(Sx,{stream:!0}),gF=1}catch{}var Nr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function dv(){Nr.console&&typeof Nr.console.log=="function"&&Nr.console.log.apply(Nr.console,arguments)}var so={log:dv,warn:function(e){Nr.console&&(typeof Nr.console.warn=="function"?Nr.console.warn.apply(Nr.console,arguments):dv.call(null,arguments))},error:function(e){Nr.console&&(typeof Nr.console.error=="function"?Nr.console.error.apply(Nr.console,arguments):dv(e))}};function pv(e,n,t){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){Gf(r.response,n,t)},r.onerror=function(){so.error("could not download file")},r.send()}function Pb(e){var n=new XMLHttpRequest;n.open("HEAD",e,!1);try{n.send()}catch{}return n.status>=200&&n.status<=299}function bg(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}}var ip,C1,Gf=Nr.saveAs||((typeof window>"u"?"undefined":Yi(window))!=="object"||window!==Nr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,n,t){var r=Nr.URL||Nr.webkitURL,i=document.createElement("a");n=n||e.name||"download",i.download=n,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?Pb(i.href)?pv(e,n,t):bg(i,i.target="_blank"):bg(i)):(i.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){bg(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,n,t){if(n=n||e.name||"download",typeof e=="string")if(Pb(e))pv(e,n,t);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){bg(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Yi(s)!=="object"&&(so.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(e,t),n)}:function(e,n,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return pv(e,n,t);var i=e.type==="application/octet-stream",s=/constructor/i.test(Nr.HTMLElement)||Nr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Yi(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var g=u.result;g=o?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=g:location=g,r=null},u.readAsDataURL(e)}else{var f=Nr.URL||Nr.webkitURL,d=f.createObjectURL(e);r?r.location=d:location.href=d,r=null,setTimeout(function(){f.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Px(e){var n;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,s=t[r].process,o=i.exec(e);o&&(n=s(o),this.r=n[0],this.g=n[1],this.b=n[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),f=this.g.toString(16),d=this.b.toString(16);return u.length==1&&(u="0"+u),f.length==1&&(f="0"+f),d.length==1&&(d="0"+d),"#"+u+f+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function gv(e,n){var t=e[0],r=e[1],i=e[2],s=e[3];t=Ta(t,r,i,s,n[0],7,-680876936),s=Ta(s,t,r,i,n[1],12,-389564586),i=Ta(i,s,t,r,n[2],17,606105819),r=Ta(r,i,s,t,n[3],22,-1044525330),t=Ta(t,r,i,s,n[4],7,-176418897),s=Ta(s,t,r,i,n[5],12,1200080426),i=Ta(i,s,t,r,n[6],17,-1473231341),r=Ta(r,i,s,t,n[7],22,-45705983),t=Ta(t,r,i,s,n[8],7,1770035416),s=Ta(s,t,r,i,n[9],12,-1958414417),i=Ta(i,s,t,r,n[10],17,-42063),r=Ta(r,i,s,t,n[11],22,-1990404162),t=Ta(t,r,i,s,n[12],7,1804603682),s=Ta(s,t,r,i,n[13],12,-40341101),i=Ta(i,s,t,r,n[14],17,-1502002290),t=Da(t,r=Ta(r,i,s,t,n[15],22,1236535329),i,s,n[1],5,-165796510),s=Da(s,t,r,i,n[6],9,-1069501632),i=Da(i,s,t,r,n[11],14,643717713),r=Da(r,i,s,t,n[0],20,-373897302),t=Da(t,r,i,s,n[5],5,-701558691),s=Da(s,t,r,i,n[10],9,38016083),i=Da(i,s,t,r,n[15],14,-660478335),r=Da(r,i,s,t,n[4],20,-405537848),t=Da(t,r,i,s,n[9],5,568446438),s=Da(s,t,r,i,n[14],9,-1019803690),i=Da(i,s,t,r,n[3],14,-187363961),r=Da(r,i,s,t,n[8],20,1163531501),t=Da(t,r,i,s,n[13],5,-1444681467),s=Da(s,t,r,i,n[2],9,-51403784),i=Da(i,s,t,r,n[7],14,1735328473),t=Na(t,r=Da(r,i,s,t,n[12],20,-1926607734),i,s,n[5],4,-378558),s=Na(s,t,r,i,n[8],11,-2022574463),i=Na(i,s,t,r,n[11],16,1839030562),r=Na(r,i,s,t,n[14],23,-35309556),t=Na(t,r,i,s,n[1],4,-1530992060),s=Na(s,t,r,i,n[4],11,1272893353),i=Na(i,s,t,r,n[7],16,-155497632),r=Na(r,i,s,t,n[10],23,-1094730640),t=Na(t,r,i,s,n[13],4,681279174),s=Na(s,t,r,i,n[0],11,-358537222),i=Na(i,s,t,r,n[3],16,-722521979),r=Na(r,i,s,t,n[6],23,76029189),t=Na(t,r,i,s,n[9],4,-640364487),s=Na(s,t,r,i,n[12],11,-421815835),i=Na(i,s,t,r,n[15],16,530742520),t=Ba(t,r=Na(r,i,s,t,n[2],23,-995338651),i,s,n[0],6,-198630844),s=Ba(s,t,r,i,n[7],10,1126891415),i=Ba(i,s,t,r,n[14],15,-1416354905),r=Ba(r,i,s,t,n[5],21,-57434055),t=Ba(t,r,i,s,n[12],6,1700485571),s=Ba(s,t,r,i,n[3],10,-1894986606),i=Ba(i,s,t,r,n[10],15,-1051523),r=Ba(r,i,s,t,n[1],21,-2054922799),t=Ba(t,r,i,s,n[8],6,1873313359),s=Ba(s,t,r,i,n[15],10,-30611744),i=Ba(i,s,t,r,n[6],15,-1560198380),r=Ba(r,i,s,t,n[13],21,1309151649),t=Ba(t,r,i,s,n[4],6,-145523070),s=Ba(s,t,r,i,n[11],10,-1120210379),i=Ba(i,s,t,r,n[2],15,718787259),r=Ba(r,i,s,t,n[9],21,-343485551),e[0]=mf(t,e[0]),e[1]=mf(r,e[1]),e[2]=mf(i,e[2]),e[3]=mf(s,e[3])}function um(e,n,t,r,i,s){return n=mf(mf(n,e),mf(r,s)),mf(n<<i|n>>>32-i,t)}function Ta(e,n,t,r,i,s,o){return um(n&t|~n&r,e,n,i,s,o)}function Da(e,n,t,r,i,s,o){return um(n&r|t&~r,e,n,i,s,o)}function Na(e,n,t,r,i,s,o){return um(n^t^r,e,n,i,s,o)}function Ba(e,n,t,r,i,s,o){return um(t^(n|~r),e,n,i,s,o)}function Mx(e){var n,t=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=e.length;n+=64)gv(r,mF(e.substring(n-64,n)));e=e.substring(n-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<e.length;n++)i[n>>2]|=e.charCodeAt(n)<<(n%4<<3);if(i[n>>2]|=128<<(n%4<<3),n>55)for(gv(r,i),n=0;n<16;n++)i[n]=0;return i[14]=8*t,gv(r,i),r}function mF(e){var n,t=[];for(n=0;n<64;n+=4)t[n>>2]=e.charCodeAt(n)+(e.charCodeAt(n+1)<<8)+(e.charCodeAt(n+2)<<16)+(e.charCodeAt(n+3)<<24);return t}ip=Nr.atob.bind(Nr),C1=Nr.btoa.bind(Nr);var Mb="0123456789abcdef".split("");function vF(e){for(var n="",t=0;t<4;t++)n+=Mb[e>>8*t+4&15]+Mb[e>>8*t&15];return n}function yF(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function E1(e){return Mx(e).map(yF).join("")}var _F=function(e){for(var n=0;n<e.length;n++)e[n]=vF(e[n]);return e.join("")}(Mx("hello"))!="5d41402abc4b2a76b9719d911017c592";function mf(e,n){if(_F){var t=(65535&e)+(65535&n);return(e>>16)+(n>>16)+(t>>16)<<16|65535&t}return e+n&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function P1(e,n){var t,r,i,s;if(e!==t){for(var o=(i=e,s=1+(256/e.length>>0),new Array(s+1).join(i)),u=[],f=0;f<256;f++)u[f]=f;var d=0;for(f=0;f<256;f++){var g=u[f];d=(d+g+o.charCodeAt(f))%256,u[f]=u[d],u[d]=g}t=e,r=u}else u=r;var y=n.length,x=0,_=0,M="";for(f=0;f<y;f++)_=(_+(g=u[x=(x+1)%256]))%256,u[x]=u[_],u[_]=g,o=u[(u[x]+u[_])%256],M+=String.fromCharCode(n.charCodeAt(f)^o);return M}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Ab={print:4,modify:8,copy:16,"annot-forms":32};function Fh(e,n,t,r){this.v=1,this.r=2;var i=192;e.forEach(function(u){if(Ab.perm!==void 0)throw new Error("Invalid permission: "+u);i+=Ab[u]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(n+this.padding).substr(0,32),o=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=E1(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=P1(this.encryptionKey,this.padding)}function jh(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var n="",t=e.length,r=0;r<t;r++){var i=e.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?n+="#"+("0"+i.toString(16)).slice(-2):n+=e[r]}return n}function kb(e){if(Yi(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var n={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");n.hasOwnProperty(t)||(n[t]={});var s=Math.random().toString(35);return n[t][s]=[r,!!i],s},this.unsubscribe=function(t){for(var r in n)if(n[r][t])return delete n[r][t],Object.keys(n[r]).length===0&&delete n[r],!0;return!1},this.publish=function(t){if(n.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in n[t]){var o=n[t][s];try{o[0].apply(e,r)}catch(u){Nr.console&&so.error("jsPDF PubSub Error",u.message,u)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return n}}function x0(e){if(!(this instanceof x0))return new x0(e);var n="opacity,stroke-opacity".split(",");for(var t in e)e.hasOwnProperty(t)&&n.indexOf(t)>=0&&(this[t]=e[t]);this.id="",this.objectNumber=-1}function Ax(e,n){this.gState=e,this.matrix=n,this.id="",this.objectNumber=-1}function Wf(e,n,t,r,i){if(!(this instanceof Wf))return new Wf(e,n,t,r,i);this.type=e==="axial"?2:3,this.coords=n,this.colors=t,Ax.call(this,r,i)}function Uh(e,n,t,r,i){if(!(this instanceof Uh))return new Uh(e,n,t,r,i);this.boundingBox=e,this.xStep=n,this.yStep=t,this.stream="",this.cloneIndex=0,Ax.call(this,r,i)}function Ar(e){var n,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],u=1,f=16,d="S",g=null;Yi(e=e||{})==="object"&&(t=e.orientation,r=e.unit||r,i=e.format||i,s=e.compress||e.compressPdf||s,(g=e.encryption||null)!==null&&(g.userPassword=g.userPassword||"",g.ownerPassword=g.ownerPassword||"",g.userPermissions=g.userPermissions||[]),u=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(n=e.precision),e.floatPrecision!==void 0&&(f=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",t=(""+(t||"P")).toLowerCase();var y=e.putOnlyUsedFonts||!1,x={},_={internal:{},__private__:{}};_.__private__.PubSub=kb;var M="1.3",D=_.__private__.getPdfVersion=function(){return M};_.__private__.setPdfVersion=function(B){M=B};var N={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};_.__private__.getPageFormats=function(){return N};var O=_.__private__.getPageFormat=function(B){return N[B]};i=i||"a4";var F={COMPAT:"compat",ADVANCED:"advanced"},Y=F.COMPAT;function Q(){this.saveGraphicsState(),ge(new mn(nt,0,0,-nt,0,wa()*nt).toString()+" cm"),this.setFontSize(this.getFontSize()/nt),d="n",Y=F.ADVANCED}function le(){this.restoreGraphicsState(),d="S",Y=F.COMPAT}var ce=_.__private__.combineFontStyleAndFontWeight=function(B,ye){if(B=="bold"&&ye=="normal"||B=="bold"&&ye==400||B=="normal"&&ye=="italic"||B=="bold"&&ye=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ye&&(B=ye==400||ye==="normal"?B==="italic"?"italic":"normal":ye!=700&&ye!=="bold"||B!=="normal"?(ye==700?"bold":ye)+""+B:"bold"),B};_.advancedAPI=function(B){var ye=Y===F.COMPAT;return ye&&Q.call(this),typeof B!="function"||(B(this),ye&&le.call(this)),this},_.compatAPI=function(B){var ye=Y===F.ADVANCED;return ye&&le.call(this),typeof B!="function"||(B(this),ye&&Q.call(this)),this},_.isAdvancedAPI=function(){return Y===F.ADVANCED};var xe,G=function(B){if(Y!==F.ADVANCED)throw new Error(B+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},R=_.roundToPrecision=_.__private__.roundToPrecision=function(B,ye){var Ze=n||ye;if(isNaN(B)||isNaN(Ze))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return B.toFixed(Ze).replace(/0+$/,"")};xe=_.hpf=_.__private__.hpf=typeof f=="number"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return R(B,f)}:f==="smart"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return R(B,B>-1&&B<1?16:5)}:function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return R(B,16)};var Z=_.f2=_.__private__.f2=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f2");return R(B,2)},z=_.__private__.f3=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f3");return R(B,3)},I=_.scale=_.__private__.scale=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.scale");return Y===F.COMPAT?B*nt:Y===F.ADVANCED?B:void 0},$=function(B){return Y===F.COMPAT?wa()-B:Y===F.ADVANCED?B:void 0},U=function(B){return I($(B))};_.__private__.setPrecision=_.setPrecision=function(B){typeof parseInt(B,10)=="number"&&(n=parseInt(B,10))};var W,q="00000000000000000000000000000000",ie=_.__private__.getFileId=function(){return q},re=_.__private__.setFileId=function(B){return q=B!==void 0&&/^[a-fA-F0-9]{32}$/.test(B)?B.toUpperCase():q.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),g!==null&&(Qi=new Fh(g.userPermissions,g.userPassword,g.ownerPassword,q)),q};_.setFileId=function(B){return re(B),this},_.getFileId=function(){return ie()};var we=_.__private__.convertDateToPDFDate=function(B){var ye=B.getTimezoneOffset(),Ze=ye<0?"+":"-",ct=Math.floor(Math.abs(ye/60)),xt=Math.abs(ye%60),jt=[Ze,fe(ct),"'",fe(xt),"'"].join("");return["D:",B.getFullYear(),fe(B.getMonth()+1),fe(B.getDate()),fe(B.getHours()),fe(B.getMinutes()),fe(B.getSeconds()),jt].join("")},Pe=_.__private__.convertPDFDateToDate=function(B){var ye=parseInt(B.substr(2,4),10),Ze=parseInt(B.substr(6,2),10)-1,ct=parseInt(B.substr(8,2),10),xt=parseInt(B.substr(10,2),10),jt=parseInt(B.substr(12,2),10),cn=parseInt(B.substr(14,2),10);return new Date(ye,Ze,ct,xt,jt,cn,0)},Ie=_.__private__.setCreationDate=function(B){var ye;if(B===void 0&&(B=new Date),B instanceof Date)ye=we(B);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(B))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ye=B}return W=ye},A=_.__private__.getCreationDate=function(B){var ye=W;return B==="jsDate"&&(ye=Pe(W)),ye};_.setCreationDate=function(B){return Ie(B),this},_.getCreationDate=function(B){return A(B)};var J,fe=_.__private__.padd2=function(B){return("0"+parseInt(B)).slice(-2)},ne=_.__private__.padd2Hex=function(B){return("00"+(B=B.toString())).substr(B.length)},he=0,ae=[],T=[],ue=0,ke=[],Ce=[],Ve=!1,K=T,pe=function(){he=0,ue=0,T=[],ae=[],ke=[],Ni=at(),Fr=at()};_.__private__.setCustomOutputDestination=function(B){Ve=!0,K=B};var ve=function(B){Ve||(K=B)};_.__private__.resetCustomOutputDestination=function(){Ve=!1,K=T};var ge=_.__private__.out=function(B){return B=B.toString(),ue+=B.length+1,K.push(B),K},Ue=_.__private__.write=function(B){return ge(arguments.length===1?B.toString():Array.prototype.join.call(arguments," "))},Qe=_.__private__.getArrayBuffer=function(B){for(var ye=B.length,Ze=new ArrayBuffer(ye),ct=new Uint8Array(Ze);ye--;)ct[ye]=B.charCodeAt(ye);return Ze},Ke=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];_.__private__.getStandardFonts=function(){return Ke};var Ge=e.fontSize||16;_.__private__.setFontSize=_.setFontSize=function(B){return Ge=Y===F.ADVANCED?B/nt:B,this};var Xe,ot=_.__private__.getFontSize=_.getFontSize=function(){return Y===F.COMPAT?Ge:Ge*nt},kt=e.R2L||!1;_.__private__.setR2L=_.setR2L=function(B){return kt=B,this},_.__private__.getR2L=_.getR2L=function(){return kt};var Ct,Ut=_.__private__.setZoomMode=function(B){var ye=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(B))Xe=B;else if(isNaN(B)){if(ye.indexOf(B)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+B+'" is not recognized.');Xe=B}else Xe=parseInt(B,10)};_.__private__.getZoomMode=function(){return Xe};var Gt,fn=_.__private__.setPageMode=function(B){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(B)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+B+'" is not recognized.');Ct=B};_.__private__.getPageMode=function(){return Ct};var pn=_.__private__.setLayoutMode=function(B){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(B)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+B+'" is not recognized.');Gt=B};_.__private__.getLayoutMode=function(){return Gt},_.__private__.setDisplayMode=_.setDisplayMode=function(B,ye,Ze){return Ut(B),pn(ye),fn(Ze),this};var et={title:"",subject:"",author:"",keywords:"",creator:""};_.__private__.getDocumentProperty=function(B){if(Object.keys(et).indexOf(B)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return et[B]},_.__private__.getDocumentProperties=function(){return et},_.__private__.setDocumentProperties=_.setProperties=_.setDocumentProperties=function(B){for(var ye in et)et.hasOwnProperty(ye)&&B[ye]&&(et[ye]=B[ye]);return this},_.__private__.setDocumentProperty=function(B,ye){if(Object.keys(et).indexOf(B)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return et[B]=ye};var it,nt,Vt,Qt,On,wn={},Tn={},ar=[],xn={},Mn={},En={},cr={},yr=null,mt=0,We=[],Ot=new kb(_),Pn=e.hotfixes||[],tr={},Zn={},Zt=[],mn=function B(ye,Ze,ct,xt,jt,cn){if(!(this instanceof B))return new B(ye,Ze,ct,xt,jt,cn);isNaN(ye)&&(ye=1),isNaN(Ze)&&(Ze=0),isNaN(ct)&&(ct=0),isNaN(xt)&&(xt=1),isNaN(jt)&&(jt=0),isNaN(cn)&&(cn=0),this._matrix=[ye,Ze,ct,xt,jt,cn]};Object.defineProperty(mn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(mn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(mn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(mn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(mn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(mn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(mn.prototype,"a",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(mn.prototype,"b",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(mn.prototype,"c",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(mn.prototype,"d",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(mn.prototype,"e",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(mn.prototype,"f",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(mn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(mn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(mn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(mn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),mn.prototype.join=function(B){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(xe).join(B)},mn.prototype.multiply=function(B){var ye=B.sx*this.sx+B.shy*this.shx,Ze=B.sx*this.shy+B.shy*this.sy,ct=B.shx*this.sx+B.sy*this.shx,xt=B.shx*this.shy+B.sy*this.sy,jt=B.tx*this.sx+B.ty*this.shx+this.tx,cn=B.tx*this.shy+B.ty*this.sy+this.ty;return new mn(ye,Ze,ct,xt,jt,cn)},mn.prototype.decompose=function(){var B=this.sx,ye=this.shy,Ze=this.shx,ct=this.sy,xt=this.tx,jt=this.ty,cn=Math.sqrt(B*B+ye*ye),Dn=(B/=cn)*Ze+(ye/=cn)*ct;Ze-=B*Dn,ct-=ye*Dn;var jn=Math.sqrt(Ze*Ze+ct*ct);return Dn/=jn,B*(ct/=jn)<ye*(Ze/=jn)&&(B=-B,ye=-ye,Dn=-Dn,cn=-cn),{scale:new mn(cn,0,0,jn,0,0),translate:new mn(1,0,0,1,xt,jt),rotate:new mn(B,ye,-ye,B,0,0),skew:new mn(1,0,Dn,1,0,0)}},mn.prototype.toString=function(B){return this.join(" ")},mn.prototype.inversed=function(){var B=this.sx,ye=this.shy,Ze=this.shx,ct=this.sy,xt=this.tx,jt=this.ty,cn=1/(B*ct-ye*Ze),Dn=ct*cn,jn=-ye*cn,nr=-Ze*cn,vr=B*cn;return new mn(Dn,jn,nr,vr,-Dn*xt-nr*jt,-jn*xt-vr*jt)},mn.prototype.applyToPoint=function(B){var ye=B.x*this.sx+B.y*this.shx+this.tx,Ze=B.x*this.shy+B.y*this.sy+this.ty;return new Po(ye,Ze)},mn.prototype.applyToRectangle=function(B){var ye=this.applyToPoint(B),Ze=this.applyToPoint(new Po(B.x+B.w,B.y+B.h));return new Gs(ye.x,ye.y,Ze.x-ye.x,Ze.y-ye.y)},mn.prototype.clone=function(){var B=this.sx,ye=this.shy,Ze=this.shx,ct=this.sy,xt=this.tx,jt=this.ty;return new mn(B,ye,Ze,ct,xt,jt)},_.Matrix=mn;var It=_.matrixMult=function(B,ye){return ye.multiply(B)},Kt=new mn(1,0,0,1,0,0);_.unitMatrix=_.identityMatrix=Kt;var Ln=function(B,ye){if(!Mn[B]){var Ze=(ye instanceof Wf?"Sh":"P")+(Object.keys(xn).length+1).toString(10);ye.id=Ze,Mn[B]=Ze,xn[Ze]=ye,Ot.publish("addPattern",ye)}};_.ShadingPattern=Wf,_.TilingPattern=Uh,_.addShadingPattern=function(B,ye){return G("addShadingPattern()"),Ln(B,ye),this},_.beginTilingPattern=function(B){G("beginTilingPattern()"),qs(B.boundingBox[0],B.boundingBox[1],B.boundingBox[2]-B.boundingBox[0],B.boundingBox[3]-B.boundingBox[1],B.matrix)},_.endTilingPattern=function(B,ye){G("endTilingPattern()"),ye.stream=Ce[J].join(`
`),Ln(B,ye),Ot.publish("endTilingPattern",ye),Zt.pop().restore()};var mr=_.__private__.newObject=function(){var B=at();return Cn(B,!0),B},at=_.__private__.newObjectDeferred=function(){return he++,ae[he]=function(){return ue},he},Cn=function(B,ye){return ye=typeof ye=="boolean"&&ye,ae[B]=ue,ye&&ge(B+" 0 obj"),B},xr=_.__private__.newAdditionalObject=function(){var B={objId:at(),content:""};return ke.push(B),B},Ni=at(),Fr=at(),Er=_.__private__.decodeColorString=function(B){var ye=B.split(" ");if(ye.length!==2||ye[1]!=="g"&&ye[1]!=="G")ye.length===5&&(ye[4]==="k"||ye[4]==="K")&&(ye=[(1-ye[0])*(1-ye[3]),(1-ye[1])*(1-ye[3]),(1-ye[2])*(1-ye[3]),"r"]);else{var Ze=parseFloat(ye[0]);ye=[Ze,Ze,Ze,"r"]}for(var ct="#",xt=0;xt<3;xt++)ct+=("0"+Math.floor(255*parseFloat(ye[xt])).toString(16)).slice(-2);return ct},lr=_.__private__.encodeColorString=function(B){var ye;typeof B=="string"&&(B={ch1:B});var Ze=B.ch1,ct=B.ch2,xt=B.ch3,jt=B.ch4,cn=B.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ze=="string"&&Ze.charAt(0)!=="#"){var Dn=new Px(Ze);if(Dn.ok)Ze=Dn.toHex();else if(!/^\d*\.?\d*$/.test(Ze))throw new Error('Invalid color "'+Ze+'" passed to jsPDF.encodeColorString.')}if(typeof Ze=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ze)&&(Ze="#"+Ze[1]+Ze[1]+Ze[2]+Ze[2]+Ze[3]+Ze[3]),typeof Ze=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ze)){var jn=parseInt(Ze.substr(1),16);Ze=jn>>16&255,ct=jn>>8&255,xt=255&jn}if(ct===void 0||jt===void 0&&Ze===ct&&ct===xt)if(typeof Ze=="string")ye=Ze+" "+cn[0];else switch(B.precision){case 2:ye=Z(Ze/255)+" "+cn[0];break;case 3:default:ye=z(Ze/255)+" "+cn[0]}else if(jt===void 0||Yi(jt)==="object"){if(jt&&!isNaN(jt.a)&&jt.a===0)return ye=["1.","1.","1.",cn[1]].join(" ");if(typeof Ze=="string")ye=[Ze,ct,xt,cn[1]].join(" ");else switch(B.precision){case 2:ye=[Z(Ze/255),Z(ct/255),Z(xt/255),cn[1]].join(" ");break;default:case 3:ye=[z(Ze/255),z(ct/255),z(xt/255),cn[1]].join(" ")}}else if(typeof Ze=="string")ye=[Ze,ct,xt,jt,cn[2]].join(" ");else switch(B.precision){case 2:ye=[Z(Ze),Z(ct),Z(xt),Z(jt),cn[2]].join(" ");break;case 3:default:ye=[z(Ze),z(ct),z(xt),z(jt),cn[2]].join(" ")}return ye},Hr=_.__private__.getFilters=function(){return o},ir=_.__private__.putStream=function(B){var ye=(B=B||{}).data||"",Ze=B.filters||Hr(),ct=B.alreadyAppliedFilters||[],xt=B.addLength1||!1,jt=ye.length,cn=B.objectId,Dn=function(ro){return ro};if(g!==null&&cn===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");g!==null&&(Dn=Qi.encryptor(cn,0));var jn={};Ze===!0&&(Ze=["FlateEncode"]);var nr=B.additionalKeyValues||[],vr=(jn=Ar.API.processDataByFilters!==void 0?Ar.API.processDataByFilters(ye,Ze):{data:ye,reverseChain:[]}).reverseChain+(Array.isArray(ct)?ct.join(" "):ct.toString());if(jn.data.length!==0&&(nr.push({key:"Length",value:jn.data.length}),xt===!0&&nr.push({key:"Length1",value:jt})),vr.length!=0)if(vr.split("/").length-1==1)nr.push({key:"Filter",value:vr});else{nr.push({key:"Filter",value:"["+vr+"]"});for(var $r=0;$r<nr.length;$r+=1)if(nr[$r].key==="DecodeParms"){for(var zi=[],di=0;di<jn.reverseChain.split("/").length-1;di+=1)zi.push("null");zi.push(nr[$r].value),nr[$r].value="["+zi.join(" ")+"]"}}ge("<<");for(var xi=0;xi<nr.length;xi++)ge("/"+nr[xi].key+" "+nr[xi].value);ge(">>"),jn.data.length!==0&&(ge("stream"),ge(Dn(jn.data)),ge("endstream"))},Or=_.__private__.putPage=function(B){var ye=B.number,Ze=B.data,ct=B.objId,xt=B.contentsObjId;Cn(ct,!0),ge("<</Type /Page"),ge("/Parent "+B.rootDictionaryObjId+" 0 R"),ge("/Resources "+B.resourceDictionaryObjId+" 0 R"),ge("/MediaBox ["+parseFloat(xe(B.mediaBox.bottomLeftX))+" "+parseFloat(xe(B.mediaBox.bottomLeftY))+" "+xe(B.mediaBox.topRightX)+" "+xe(B.mediaBox.topRightY)+"]"),B.cropBox!==null&&ge("/CropBox ["+xe(B.cropBox.bottomLeftX)+" "+xe(B.cropBox.bottomLeftY)+" "+xe(B.cropBox.topRightX)+" "+xe(B.cropBox.topRightY)+"]"),B.bleedBox!==null&&ge("/BleedBox ["+xe(B.bleedBox.bottomLeftX)+" "+xe(B.bleedBox.bottomLeftY)+" "+xe(B.bleedBox.topRightX)+" "+xe(B.bleedBox.topRightY)+"]"),B.trimBox!==null&&ge("/TrimBox ["+xe(B.trimBox.bottomLeftX)+" "+xe(B.trimBox.bottomLeftY)+" "+xe(B.trimBox.topRightX)+" "+xe(B.trimBox.topRightY)+"]"),B.artBox!==null&&ge("/ArtBox ["+xe(B.artBox.bottomLeftX)+" "+xe(B.artBox.bottomLeftY)+" "+xe(B.artBox.topRightX)+" "+xe(B.artBox.topRightY)+"]"),typeof B.userUnit=="number"&&B.userUnit!==1&&ge("/UserUnit "+B.userUnit),Ot.publish("putPage",{objId:ct,pageContext:We[ye],pageNumber:ye,page:Ze}),ge("/Contents "+xt+" 0 R"),ge(">>"),ge("endobj");var jt=Ze.join(`
`);return Y===F.ADVANCED&&(jt+=`
Q`),Cn(xt,!0),ir({data:jt,filters:Hr(),objectId:xt}),ge("endobj"),ct},jr=_.__private__.putPages=function(){var B,ye,Ze=[];for(B=1;B<=mt;B++)We[B].objId=at(),We[B].contentsObjId=at();for(B=1;B<=mt;B++)Ze.push(Or({number:B,data:Ce[B],objId:We[B].objId,contentsObjId:We[B].contentsObjId,mediaBox:We[B].mediaBox,cropBox:We[B].cropBox,bleedBox:We[B].bleedBox,trimBox:We[B].trimBox,artBox:We[B].artBox,userUnit:We[B].userUnit,rootDictionaryObjId:Ni,resourceDictionaryObjId:Fr}));Cn(Ni,!0),ge("<</Type /Pages");var ct="/Kids [";for(ye=0;ye<mt;ye++)ct+=Ze[ye]+" 0 R ";ge(ct+"]"),ge("/Count "+mt),ge(">>"),ge("endobj"),Ot.publish("postPutPages")},rn=function(B){Ot.publish("putFont",{font:B,out:ge,newObject:mr,putStream:ir}),B.isAlreadyPutted!==!0&&(B.objectNumber=mr(),ge("<<"),ge("/Type /Font"),ge("/BaseFont /"+jh(B.postScriptName)),ge("/Subtype /Type1"),typeof B.encoding=="string"&&ge("/Encoding /"+B.encoding),ge("/FirstChar 32"),ge("/LastChar 255"),ge(">>"),ge("endobj"))},Fi=function(){for(var B in wn)wn.hasOwnProperty(B)&&(y===!1||y===!0&&x.hasOwnProperty(B))&&rn(wn[B])},_i=function(B){B.objectNumber=mr();var ye=[];ye.push({key:"Type",value:"/XObject"}),ye.push({key:"Subtype",value:"/Form"}),ye.push({key:"BBox",value:"["+[xe(B.x),xe(B.y),xe(B.x+B.width),xe(B.y+B.height)].join(" ")+"]"}),ye.push({key:"Matrix",value:"["+B.matrix.toString()+"]"});var Ze=B.pages[1].join(`
`);ir({data:Ze,additionalKeyValues:ye,objectId:B.objectNumber}),ge("endobj")},gi=function(){for(var B in tr)tr.hasOwnProperty(B)&&_i(tr[B])},Kr=function(B,ye){var Ze,ct=[],xt=1/(ye-1);for(Ze=0;Ze<1;Ze+=xt)ct.push(Ze);if(ct.push(1),B[0].offset!=0){var jt={offset:0,color:B[0].color};B.unshift(jt)}if(B[B.length-1].offset!=1){var cn={offset:1,color:B[B.length-1].color};B.push(cn)}for(var Dn="",jn=0,nr=0;nr<ct.length;nr++){for(Ze=ct[nr];Ze>B[jn+1].offset;)jn++;var vr=B[jn].offset,$r=(Ze-vr)/(B[jn+1].offset-vr),zi=B[jn].color,di=B[jn+1].color;Dn+=ne(Math.round((1-$r)*zi[0]+$r*di[0]).toString(16))+ne(Math.round((1-$r)*zi[1]+$r*di[1]).toString(16))+ne(Math.round((1-$r)*zi[2]+$r*di[2]).toString(16))}return Dn.trim()},Ir=function(B,ye){ye||(ye=21);var Ze=mr(),ct=Kr(B.colors,ye),xt=[];xt.push({key:"FunctionType",value:"0"}),xt.push({key:"Domain",value:"[0.0 1.0]"}),xt.push({key:"Size",value:"["+ye+"]"}),xt.push({key:"BitsPerSample",value:"8"}),xt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),xt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ir({data:ct,additionalKeyValues:xt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ze}),ge("endobj"),B.objectNumber=mr(),ge("<< /ShadingType "+B.type),ge("/ColorSpace /DeviceRGB");var jt="/Coords ["+xe(parseFloat(B.coords[0]))+" "+xe(parseFloat(B.coords[1]))+" ";B.type===2?jt+=xe(parseFloat(B.coords[2]))+" "+xe(parseFloat(B.coords[3])):jt+=xe(parseFloat(B.coords[2]))+" "+xe(parseFloat(B.coords[3]))+" "+xe(parseFloat(B.coords[4]))+" "+xe(parseFloat(B.coords[5])),ge(jt+="]"),B.matrix&&ge("/Matrix ["+B.matrix.toString()+"]"),ge("/Function "+Ze+" 0 R"),ge("/Extend [true true]"),ge(">>"),ge("endobj")},Rr=function(B,ye){var Ze=at(),ct=mr();ye.push({resourcesOid:Ze,objectOid:ct}),B.objectNumber=ct;var xt=[];xt.push({key:"Type",value:"/Pattern"}),xt.push({key:"PatternType",value:"1"}),xt.push({key:"PaintType",value:"1"}),xt.push({key:"TilingType",value:"1"}),xt.push({key:"BBox",value:"["+B.boundingBox.map(xe).join(" ")+"]"}),xt.push({key:"XStep",value:xe(B.xStep)}),xt.push({key:"YStep",value:xe(B.yStep)}),xt.push({key:"Resources",value:Ze+" 0 R"}),B.matrix&&xt.push({key:"Matrix",value:"["+B.matrix.toString()+"]"}),ir({data:B.stream,additionalKeyValues:xt,objectId:B.objectNumber}),ge("endobj")},hr=function(B){var ye;for(ye in xn)xn.hasOwnProperty(ye)&&(xn[ye]instanceof Wf?Ir(xn[ye]):xn[ye]instanceof Uh&&Rr(xn[ye],B))},ji=function(B){for(var ye in B.objectNumber=mr(),ge("<<"),B)switch(ye){case"opacity":ge("/ca "+Z(B[ye]));break;case"stroke-opacity":ge("/CA "+Z(B[ye]))}ge(">>"),ge("endobj")},Ls=function(){var B;for(B in En)En.hasOwnProperty(B)&&ji(En[B])},Ss=function(){for(var B in ge("/XObject <<"),tr)tr.hasOwnProperty(B)&&tr[B].objectNumber>=0&&ge("/"+B+" "+tr[B].objectNumber+" 0 R");Ot.publish("putXobjectDict"),ge(">>")},oi=function(){Qi.oid=mr(),ge("<<"),ge("/Filter /Standard"),ge("/V "+Qi.v),ge("/R "+Qi.r),ge("/U <"+Qi.toHexString(Qi.U)+">"),ge("/O <"+Qi.toHexString(Qi.O)+">"),ge("/P "+Qi.P),ge(">>"),ge("endobj")},Fn=function(){for(var B in ge("/Font <<"),wn)wn.hasOwnProperty(B)&&(y===!1||y===!0&&x.hasOwnProperty(B))&&ge("/"+B+" "+wn[B].objectNumber+" 0 R");ge(">>")},Eo=function(){if(Object.keys(xn).length>0){for(var B in ge("/Shading <<"),xn)xn.hasOwnProperty(B)&&xn[B]instanceof Wf&&xn[B].objectNumber>=0&&ge("/"+B+" "+xn[B].objectNumber+" 0 R");Ot.publish("putShadingPatternDict"),ge(">>")}},ui=function(B){if(Object.keys(xn).length>0){for(var ye in ge("/Pattern <<"),xn)xn.hasOwnProperty(ye)&&xn[ye]instanceof _.TilingPattern&&xn[ye].objectNumber>=0&&xn[ye].objectNumber<B&&ge("/"+ye+" "+xn[ye].objectNumber+" 0 R");Ot.publish("putTilingPatternDict"),ge(">>")}},fr=function(){if(Object.keys(En).length>0){var B;for(B in ge("/ExtGState <<"),En)En.hasOwnProperty(B)&&En[B].objectNumber>=0&&ge("/"+B+" "+En[B].objectNumber+" 0 R");Ot.publish("putGStateDict"),ge(">>")}},qn=function(B){Cn(B.resourcesOid,!0),ge("<<"),ge("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Fn(),Eo(),ui(B.objectOid),fr(),Ss(),ge(">>"),ge("endobj")},_o=function(){var B=[];Fi(),Ls(),gi(),hr(B),Ot.publish("putResources"),B.forEach(qn),qn({resourcesOid:Fr,objectOid:Number.MAX_SAFE_INTEGER}),Ot.publish("postPutResources")},bo=function(){Ot.publish("putAdditionalObjects");for(var B=0;B<ke.length;B++){var ye=ke[B];Cn(ye.objId,!0),ge(ye.content),ge("endobj")}Ot.publish("postPutAdditionalObjects")},Lr=function(B){Tn[B.fontName]=Tn[B.fontName]||{},Tn[B.fontName][B.fontStyle]=B.id},Us=function(B,ye,Ze,ct,xt){var jt={id:"F"+(Object.keys(wn).length+1).toString(10),postScriptName:B,fontName:ye,fontStyle:Ze,encoding:ct,isStandardFont:xt||!1,metadata:{}};return Ot.publish("addFont",{font:jt,instance:this}),wn[jt.id]=jt,Lr(jt),jt.id},Hn=function(B){for(var ye=0,Ze=Ke.length;ye<Ze;ye++){var ct=Us.call(this,B[ye][0],B[ye][1],B[ye][2],Ke[ye][3],!0);y===!1&&(x[ct]=!0);var xt=B[ye][0].split("-");Lr({id:ct,fontName:xt[0],fontStyle:xt[1]||""})}Ot.publish("addFonts",{fonts:wn,dictionary:Tn})},_r=function(B){return B.foo=function(){try{return B.apply(this,arguments)}catch(ct){var ye=ct.stack||"";~ye.indexOf(" at ")&&(ye=ye.split(" at ")[1]);var Ze="Error in function "+ye.split(`
`)[0].split("<")[0]+": "+ct.message;if(!Nr.console)throw new Error(Ze);Nr.console.error(Ze,ct),Nr.alert&&alert(Ze)}},B.foo.bar=B,B.foo},Yr=function(B,ye){var Ze,ct,xt,jt,cn,Dn,jn,nr,vr;if(xt=(ye=ye||{}).sourceEncoding||"Unicode",cn=ye.outputEncoding,(ye.autoencode||cn)&&wn[it].metadata&&wn[it].metadata[xt]&&wn[it].metadata[xt].encoding&&(jt=wn[it].metadata[xt].encoding,!cn&&wn[it].encoding&&(cn=wn[it].encoding),!cn&&jt.codePages&&(cn=jt.codePages[0]),typeof cn=="string"&&(cn=jt[cn]),cn)){for(jn=!1,Dn=[],Ze=0,ct=B.length;Ze<ct;Ze++)(nr=cn[B.charCodeAt(Ze)])?Dn.push(String.fromCharCode(nr)):Dn.push(B[Ze]),Dn[Ze].charCodeAt(0)>>8&&(jn=!0);B=Dn.join("")}for(Ze=B.length;jn===void 0&&Ze!==0;)B.charCodeAt(Ze-1)>>8&&(jn=!0),Ze--;if(!jn)return B;for(Dn=ye.noBOM?[]:[254,255],Ze=0,ct=B.length;Ze<ct;Ze++){if((vr=(nr=B.charCodeAt(Ze))>>8)>>8)throw new Error("Character at position "+Ze+" of string '"+B+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Dn.push(vr),Dn.push(nr-(vr<<8))}return String.fromCharCode.apply(void 0,Dn)},_n=_.__private__.pdfEscape=_.pdfEscape=function(B,ye){return Yr(B,ye).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},tn=_.__private__.beginPage=function(B){Ce[++mt]=[],We[mt]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(B[0]),topRightY:Number(B[1])}},wo(mt),ve(Ce[J])},si=function(B,ye){var Ze,ct,xt;switch(t=ye||t,typeof B=="string"&&(Ze=O(B.toLowerCase()),Array.isArray(Ze)&&(ct=Ze[0],xt=Ze[1])),Array.isArray(B)&&(ct=B[0]*nt,xt=B[1]*nt),isNaN(ct)&&(ct=i[0],xt=i[1]),(ct>14400||xt>14400)&&(so.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ct=Math.min(14400,ct),xt=Math.min(14400,xt)),i=[ct,xt],t.substr(0,1)){case"l":xt>ct&&(i=[xt,ct]);break;case"p":ct>xt&&(i=[xt,ct])}tn(i),Dl(Xl),ge($i),Ol!==0&&ge(Ol+" J"),bi!==0&&ge(bi+" j"),Ot.publish("addPage",{pageNumber:mt})},co=function(B){B>0&&B<=mt&&(Ce.splice(B,1),We.splice(B,1),mt--,J>mt&&(J=mt),this.setPage(J))},wo=function(B){B>0&&B<=mt&&(J=B)},Pi=_.__private__.getNumberOfPages=_.getNumberOfPages=function(){return Ce.length-1},cs=function(B,ye,Ze){var ct,xt=void 0;return Ze=Ze||{},B=B!==void 0?B:wn[it].fontName,ye=ye!==void 0?ye:wn[it].fontStyle,ct=B.toLowerCase(),Tn[ct]!==void 0&&Tn[ct][ye]!==void 0?xt=Tn[ct][ye]:Tn[B]!==void 0&&Tn[B][ye]!==void 0?xt=Tn[B][ye]:Ze.disableWarning===!1&&so.warn("Unable to look up font label for font '"+B+"', '"+ye+"'. Refer to getFontList() for available fonts."),xt||Ze.noFallback||(xt=Tn.times[ye])==null&&(xt=Tn.times.normal),xt},Xo=_.__private__.putInfo=function(){var B=mr(),ye=function(ct){return ct};for(var Ze in g!==null&&(ye=Qi.encryptor(B,0)),ge("<<"),ge("/Producer ("+_n(ye("jsPDF "+Ar.version))+")"),et)et.hasOwnProperty(Ze)&&et[Ze]&&ge("/"+Ze.substr(0,1).toUpperCase()+Ze.substr(1)+" ("+_n(ye(et[Ze]))+")");ge("/CreationDate ("+_n(ye(W))+")"),ge(">>"),ge("endobj")},Io=_.__private__.putCatalog=function(B){var ye=(B=B||{}).rootDictionaryObjId||Ni;switch(mr(),ge("<<"),ge("/Type /Catalog"),ge("/Pages "+ye+" 0 R"),Xe||(Xe="fullwidth"),Xe){case"fullwidth":ge("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ge("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ge("/OpenAction [3 0 R /Fit]");break;case"original":ge("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ze=""+Xe;Ze.substr(Ze.length-1)==="%"&&(Xe=parseInt(Xe)/100),typeof Xe=="number"&&ge("/OpenAction [3 0 R /XYZ null null "+Z(Xe)+"]")}switch(Gt||(Gt="continuous"),Gt){case"continuous":ge("/PageLayout /OneColumn");break;case"single":ge("/PageLayout /SinglePage");break;case"two":case"twoleft":ge("/PageLayout /TwoColumnLeft");break;case"tworight":ge("/PageLayout /TwoColumnRight")}Ct&&ge("/PageMode /"+Ct),Ot.publish("putCatalog"),ge(">>"),ge("endobj")},hi=_.__private__.putTrailer=function(){ge("trailer"),ge("<<"),ge("/Size "+(he+1)),ge("/Root "+he+" 0 R"),ge("/Info "+(he-1)+" 0 R"),g!==null&&ge("/Encrypt "+Qi.oid+" 0 R"),ge("/ID [ <"+q+"> <"+q+"> ]"),ge(">>")},Bs=_.__private__.putHeader=function(){ge("%PDF-"+M),ge("%ºß¬à")},Ro=_.__private__.putXRef=function(){var B="0000000000";ge("xref"),ge("0 "+(he+1)),ge("0000000000 65535 f ");for(var ye=1;ye<=he;ye++)typeof ae[ye]=="function"?ge((B+ae[ye]()).slice(-10)+" 00000 n "):ae[ye]!==void 0?ge((B+ae[ye]).slice(-10)+" 00000 n "):ge("0000000000 00000 n ")},Xi=_.__private__.buildDocument=function(){pe(),ve(T),Ot.publish("buildDocument"),Bs(),jr(),bo(),_o(),g!==null&&oi(),Xo(),Io();var B=ue;return Ro(),hi(),ge("startxref"),ge(""+B),ge("%%EOF"),ve(Ce[J]),T.join(`
`)},xo=_.__private__.getBlob=function(B){return new Blob([Qe(B)],{type:"application/pdf"})},Vs=_.output=_.__private__.output=_r(function(B,ye){switch(typeof(ye=ye||{})=="string"?ye={filename:ye}:ye.filename=ye.filename||"generated.pdf",B){case void 0:return Xi();case"save":_.save(ye.filename);break;case"arraybuffer":return Qe(Xi());case"blob":return xo(Xi());case"bloburi":case"bloburl":if(Nr.URL!==void 0&&typeof Nr.URL.createObjectURL=="function")return Nr.URL&&Nr.URL.createObjectURL(xo(Xi()))||void 0;so.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ze="",ct=Xi();try{Ze=C1(ct)}catch{Ze=C1(unescape(encodeURIComponent(ct)))}return"data:application/pdf;filename="+ye.filename+";base64,"+Ze;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Nr)==="[object Window]"){var xt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",jt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ye.pdfObjectUrl&&(xt=ye.pdfObjectUrl,jt="");var cn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+xt+'"'+jt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ye)+");<\/script></body></html>",Dn=Nr.open();return Dn!==null&&Dn.document.write(cn),Dn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Nr)==="[object Window]"){var jn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ye.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ye.filename+'" width="500px" height="400px" /></body></html>',nr=Nr.open();if(nr!==null){nr.document.write(jn);var vr=this;nr.document.documentElement.querySelector("#pdfViewer").onload=function(){nr.document.title=ye.filename,nr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(vr.output("bloburl"))}}return nr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Nr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var $r='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ye)+'"></iframe></body></html>',zi=Nr.open();if(zi!==null&&(zi.document.write($r),zi.document.title=ye.filename),zi||typeof safari>"u")return zi;break;case"datauri":case"dataurl":return Nr.document.location.href=this.output("datauristring",ye);default:return null}}),ya=function(B){return Array.isArray(Pn)===!0&&Pn.indexOf(B)>-1};switch(r){case"pt":nt=1;break;case"mm":nt=72/25.4;break;case"cm":nt=72/2.54;break;case"in":nt=72;break;case"px":nt=ya("px_scaling")==1?.75:96/72;break;case"pc":case"em":nt=12;break;case"ex":nt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);nt=r}var Qi=null;Ie(),re();var ol=function(B){return g!==null?Qi.encryptor(B,0):function(ye){return ye}},_a=_.__private__.getPageInfo=_.getPageInfo=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:We[B].objId,pageNumber:B,pageContext:We[B]}},pr=_.__private__.getPageInfoByObjId=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ye in We)if(We[ye].objId===B)break;return _a(ye)},br=_.__private__.getCurrentPageInfo=_.getCurrentPageInfo=function(){return{objId:We[J].objId,pageNumber:J,pageContext:We[J]}};_.addPage=function(){return si.apply(this,arguments),this},_.setPage=function(){return wo.apply(this,arguments),ve.call(this,Ce[J]),this},_.insertPage=function(B){return this.addPage(),this.movePage(J,B),this},_.movePage=function(B,ye){var Ze,ct;if(B>ye){Ze=Ce[B],ct=We[B];for(var xt=B;xt>ye;xt--)Ce[xt]=Ce[xt-1],We[xt]=We[xt-1];Ce[ye]=Ze,We[ye]=ct,this.setPage(ye)}else if(B<ye){Ze=Ce[B],ct=We[B];for(var jt=B;jt<ye;jt++)Ce[jt]=Ce[jt+1],We[jt]=We[jt+1];Ce[ye]=Ze,We[ye]=ct,this.setPage(ye)}return this},_.deletePage=function(){return co.apply(this,arguments),this},_.__private__.text=_.text=function(B,ye,Ze,ct,xt){var jt,cn,Dn,jn,nr,vr,$r,zi,di,xi=(ct=ct||{}).scope||this;if(typeof B=="number"&&typeof ye=="number"&&(typeof Ze=="string"||Array.isArray(Ze))){var ro=Ze;Ze=ye,ye=B,B=ro}if(arguments[3]instanceof mn?(G("The transform parameter of text() with a Matrix value"),di=xt):(Dn=arguments[4],jn=arguments[5],Yi($r=arguments[3])==="object"&&$r!==null||(typeof Dn=="string"&&(jn=Dn,Dn=null),typeof $r=="string"&&(jn=$r,$r=null),typeof $r=="number"&&(Dn=$r,$r=null),ct={flags:$r,angle:Dn,align:jn})),isNaN(ye)||isNaN(Ze)||B==null)throw new Error("Invalid arguments passed to jsPDF.text");if(B.length===0)return xi;var fo="",Es=!1,Ur=typeof ct.lineHeightFactor=="number"?ct.lineHeightFactor:Tl,jo=xi.internal.scaleFactor;function hl(Si){return Si=Si.split("	").join(Array(ct.TabLen||9).join(" ")),_n(Si,$r)}function Qo(Si){for(var Mi,io=Si.concat(),Oi=[],As=io.length;As--;)typeof(Mi=io.shift())=="string"?Oi.push(Mi):Array.isArray(Si)&&(Mi.length===1||Mi[1]===void 0&&Mi[2]===void 0)?Oi.push(Mi[0]):Oi.push([Mi[0],Mi[1],Mi[2]]);return Oi}function tu(Si,Mi){var io;if(typeof Si=="string")io=Mi(Si)[0];else if(Array.isArray(Si)){for(var Oi,As,hs=Si.concat(),Is=[],xu=hs.length;xu--;)typeof(Oi=hs.shift())=="string"?Is.push(Mi(Oi)[0]):Array.isArray(Oi)&&typeof Oi[0]=="string"&&(As=Mi(Oi[0],Oi[1],Oi[2]),Is.push([As[0],As[1],As[2]]));io=Is}return io}var na=!1,wu=!0;if(typeof B=="string")na=!0;else if(Array.isArray(B)){var Ga=B.concat();cn=[];for(var qa,ho=Ga.length;ho--;)(typeof(qa=Ga.shift())!="string"||Array.isArray(qa)&&typeof qa[0]!="string")&&(wu=!1);na=wu}if(na===!1)throw new Error('Type of text must be string or Array. "'+B+'" is not recognized.');typeof B=="string"&&(B=B.match(/[\r?\n]/)?B.split(/\r\n|\r|\n/g):[B]);var ra=Ge/xi.internal.scaleFactor,Ps=ra*(Ur-1);switch(ct.baseline){case"bottom":Ze-=Ps;break;case"top":Ze+=ra-Ps;break;case"hanging":Ze+=ra-2*Ps;break;case"middle":Ze+=ra/2-Ps}if((vr=ct.maxWidth||0)>0&&(typeof B=="string"?B=xi.splitTextToSize(B,vr):Object.prototype.toString.call(B)==="[object Array]"&&(B=B.reduce(function(Si,Mi){return Si.concat(xi.splitTextToSize(Mi,vr))},[]))),jt={text:B,x:ye,y:Ze,options:ct,mutex:{pdfEscape:_n,activeFontKey:it,fonts:wn,activeFontSize:Ge}},Ot.publish("preProcessText",jt),B=jt.text,Dn=(ct=jt.options).angle,!(di instanceof mn)&&Dn&&typeof Dn=="number"){Dn*=Math.PI/180,ct.rotationDirection===0&&(Dn=-Dn),Y===F.ADVANCED&&(Dn=-Dn);var fs=Math.cos(Dn),dl=Math.sin(Dn);di=new mn(fs,dl,-dl,fs,0,0)}else Dn&&Dn instanceof mn&&(di=Dn);Y!==F.ADVANCED||di||(di=Kt),(nr=ct.charSpace||Bl)!==void 0&&(fo+=xe(I(nr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(zi=ct.horizontalScale)!==void 0&&(fo+=xe(100*zi)+` Tz
`),ct.lang;var zo=-1,es=ct.renderingMode!==void 0?ct.renderingMode:ct.stroke,ts=xi.internal.getCurrentPageInfo().pageContext;switch(es){case 0:case!1:case"fill":zo=0;break;case 1:case!0:case"stroke":zo=1;break;case 2:case"fillThenStroke":zo=2;break;case 3:case"invisible":zo=3;break;case 4:case"fillAndAddForClipping":zo=4;break;case 5:case"strokeAndAddPathForClipping":zo=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":zo=6;break;case 7:case"addToPathForClipping":zo=7}var Yu=ts.usedRenderingMode!==void 0?ts.usedRenderingMode:-1;zo!==-1?fo+=zo+` Tr
`:Yu!==-1&&(fo+=`0 Tr
`),zo!==-1&&(ts.usedRenderingMode=zo),jn=ct.align||"left";var Lo,xa=Ge*Ur,$o=xi.internal.pageSize.getWidth(),Uo=wn[it];nr=ct.charSpace||Bl,vr=ct.maxWidth||0,$r=Object.assign({autoencode:!0,noBOM:!0},ct.flags);var La=[],Sa=function(Si){return xi.getStringUnitWidth(Si,{font:Uo,charSpace:nr,fontSize:Ge,doKerning:!1})*Ge/jo};if(Object.prototype.toString.call(B)==="[object Array]"){var Vo;cn=Qo(B),jn!=="left"&&(Lo=cn.map(Sa));var Mo,ia=0;if(jn==="right"){ye-=Lo[0],B=[],ho=cn.length;for(var Ms=0;Ms<ho;Ms++)Ms===0?(Mo=or(ye),Vo=to(Ze)):(Mo=I(ia-Lo[Ms]),Vo=-xa),B.push([cn[Ms],Mo,Vo]),ia=Lo[Ms]}else if(jn==="center"){ye-=Lo[0]/2,B=[],ho=cn.length;for(var Ho=0;Ho<ho;Ho++)Ho===0?(Mo=or(ye),Vo=to(Ze)):(Mo=I((ia-Lo[Ho])/2),Vo=-xa),B.push([cn[Ho],Mo,Vo]),ia=Lo[Ho]}else if(jn==="left"){B=[],ho=cn.length;for(var _t=0;_t<ho;_t++)B.push(cn[_t])}else if(jn==="justify"&&Uo.encoding==="Identity-H"){B=[],ho=cn.length,vr=vr!==0?vr:$o;for(var qt=0,Mt=0;Mt<ho;Mt++)if(Vo=Mt===0?to(Ze):-xa,Mo=Mt===0?or(ye):qt,Mt<ho-1){var An=I((vr-Lo[Mt])/(cn[Mt].split(" ").length-1)),Kn=cn[Mt].split(" ");B.push([Kn[0]+" ",Mo,Vo]),qt=0;for(var wr=1;wr<Kn.length;wr++){var Ui=(Sa(Kn[wr-1]+" "+Kn[wr])-Sa(Kn[wr]))*jo+An;wr==Kn.length-1?B.push([Kn[wr],Ui,0]):B.push([Kn[wr]+" ",Ui,0]),qt-=Ui}}else B.push([cn[Mt],Mo,Vo]);B.push(["",qt,0])}else{if(jn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(B=[],ho=cn.length,vr=vr!==0?vr:$o,Mt=0;Mt<ho;Mt++)Vo=Mt===0?to(Ze):-xa,Mo=Mt===0?or(ye):0,Mt<ho-1?La.push(xe(I((vr-Lo[Mt])/(cn[Mt].split(" ").length-1)))):La.push(0),B.push([cn[Mt],Mo,Vo])}}var Li=typeof ct.R2L=="boolean"?ct.R2L:kt;Li===!0&&(B=tu(B,function(Si,Mi,io){return[Si.split("").reverse().join(""),Mi,io]})),jt={text:B,x:ye,y:Ze,options:ct,mutex:{pdfEscape:_n,activeFontKey:it,fonts:wn,activeFontSize:Ge}},Ot.publish("postProcessText",jt),B=jt.text,Es=jt.mutex.isHex||!1;var Rl=wn[it].encoding;Rl!=="WinAnsiEncoding"&&Rl!=="StandardEncoding"||(B=tu(B,function(Si,Mi,io){return[hl(Si),Mi,io]})),cn=Qo(B),B=[];for(var ns,Vi,oa,Ca=0,sa=1,aa=Array.isArray(cn[0])?sa:Ca,la="",Qr=function(Si,Mi,io){var Oi="";return io instanceof mn?(io=typeof ct.angle=="number"?It(io,new mn(1,0,0,1,Si,Mi)):It(new mn(1,0,0,1,Si,Mi),io),Y===F.ADVANCED&&(io=It(new mn(1,0,0,-1,0,0),io)),Oi=io.join(" ")+` Tm
`):Oi=xe(Si)+" "+xe(Mi)+` Td
`,Oi},Ws=0;Ws<cn.length;Ws++){switch(la="",aa){case sa:oa=(Es?"<":"(")+cn[Ws][0]+(Es?">":")"),ns=parseFloat(cn[Ws][1]),Vi=parseFloat(cn[Ws][2]);break;case Ca:oa=(Es?"<":"(")+cn[Ws]+(Es?">":")"),ns=or(ye),Vi=to(Ze)}La!==void 0&&La[Ws]!==void 0&&(la=La[Ws]+` Tw
`),Ws===0?B.push(la+Qr(ns,Vi,di)+oa):aa===Ca?B.push(la+oa):aa===sa&&B.push(la+Qr(ns,Vi,di)+oa)}B=aa===Ca?B.join(` Tj
T* `):B.join(` Tj
`),B+=` Tj
`;var Ao=`BT
/`;return Ao+=it+" "+Ge+` Tf
`,Ao+=xe(Ge*Ur)+` TL
`,Ao+=ta+`
`,Ao+=fo,Ao+=B,ge(Ao+="ET"),x[it]=!0,xi};var Jr=_.__private__.clip=_.clip=function(B){return ge(B==="evenodd"?"W*":"W"),this};_.clipEvenOdd=function(){return Jr("evenodd")},_.__private__.discardPath=_.discardPath=function(){return ge("n"),this};var Tr=_.__private__.isValidStyle=function(B){var ye=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(B)!==-1&&(ye=!0),ye};_.__private__.setDefaultPathOperation=_.setDefaultPathOperation=function(B){return Tr(B)&&(d=B),this};var Fo=_.__private__.getStyle=_.getStyle=function(B){var ye=d;switch(B){case"D":case"S":ye="S";break;case"F":ye="f";break;case"FD":case"DF":ye="B";break;case"f":case"f*":case"B":case"B*":ye=B}return ye},sl=_.close=function(){return ge("h"),this};_.stroke=function(){return ge("S"),this},_.fill=function(B){return al("f",B),this},_.fillEvenOdd=function(B){return al("f*",B),this},_.fillStroke=function(B){return al("B",B),this},_.fillStrokeEvenOdd=function(B){return al("B*",B),this};var al=function(B,ye){Yi(ye)==="object"?bu(ye,B):ge(B)},Hs=function(B){B===null||Y===F.ADVANCED&&B===void 0||(B=Fo(B),ge(B))};function Va(B,ye,Ze,ct,xt){var jt=new Uh(ye||this.boundingBox,Ze||this.xStep,ct||this.yStep,this.gState,xt||this.matrix);jt.stream=this.stream;var cn=B+"$$"+this.cloneIndex+++"$$";return Ln(cn,jt),jt}var bu=function(B,ye){var Ze=Mn[B.key],ct=xn[Ze];if(ct instanceof Wf)ge("q"),ge(kl(ye)),ct.gState&&_.setGState(ct.gState),ge(B.matrix.toString()+" cm"),ge("/"+Ze+" sh"),ge("Q");else if(ct instanceof Uh){var xt=new mn(1,0,0,-1,0,wa());B.matrix&&(xt=xt.multiply(B.matrix||Kt),Ze=Va.call(ct,B.key,B.boundingBox,B.xStep,B.yStep,xt).id),ge("q"),ge("/Pattern cs"),ge("/"+Ze+" scn"),ct.gState&&_.setGState(ct.gState),ge(ye),ge("Q")}},kl=function(B){switch(B){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Sr=_.moveTo=function(B,ye){return ge(xe(I(B))+" "+xe(U(ye))+" m"),this},Gr=_.lineTo=function(B,ye){return ge(xe(I(B))+" "+xe(U(ye))+" l"),this},Ha=_.curveTo=function(B,ye,Ze,ct,xt,jt){return ge([xe(I(B)),xe(U(ye)),xe(I(Ze)),xe(U(ct)),xe(I(xt)),xe(U(jt)),"c"].join(" ")),this};_.__private__.line=_.line=function(B,ye,Ze,ct,xt){if(isNaN(B)||isNaN(ye)||isNaN(Ze)||isNaN(ct)||!Tr(xt))throw new Error("Invalid arguments passed to jsPDF.line");return Y===F.COMPAT?this.lines([[Ze-B,ct-ye]],B,ye,[1,1],xt||"S"):this.lines([[Ze-B,ct-ye]],B,ye,[1,1]).stroke()},_.__private__.lines=_.lines=function(B,ye,Ze,ct,xt,jt){var cn,Dn,jn,nr,vr,$r,zi,di,xi,ro,fo,Es;if(typeof B=="number"&&(Es=Ze,Ze=ye,ye=B,B=Es),ct=ct||[1,1],jt=jt||!1,isNaN(ye)||isNaN(Ze)||!Array.isArray(B)||!Array.isArray(ct)||!Tr(xt)||typeof jt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Sr(ye,Ze),cn=ct[0],Dn=ct[1],nr=B.length,ro=ye,fo=Ze,jn=0;jn<nr;jn++)(vr=B[jn]).length===2?(ro=vr[0]*cn+ro,fo=vr[1]*Dn+fo,Gr(ro,fo)):($r=vr[0]*cn+ro,zi=vr[1]*Dn+fo,di=vr[2]*cn+ro,xi=vr[3]*Dn+fo,ro=vr[4]*cn+ro,fo=vr[5]*Dn+fo,Ha($r,zi,di,xi,ro,fo));return jt&&sl(),Hs(xt),this},_.path=function(B){for(var ye=0;ye<B.length;ye++){var Ze=B[ye],ct=Ze.c;switch(Ze.op){case"m":Sr(ct[0],ct[1]);break;case"l":Gr(ct[0],ct[1]);break;case"c":Ha.apply(this,ct);break;case"h":sl()}}return this},_.__private__.rect=_.rect=function(B,ye,Ze,ct,xt){if(isNaN(B)||isNaN(ye)||isNaN(Ze)||isNaN(ct)||!Tr(xt))throw new Error("Invalid arguments passed to jsPDF.rect");return Y===F.COMPAT&&(ct=-ct),ge([xe(I(B)),xe(U(ye)),xe(I(Ze)),xe(I(ct)),"re"].join(" ")),Hs(xt),this},_.__private__.triangle=_.triangle=function(B,ye,Ze,ct,xt,jt,cn){if(isNaN(B)||isNaN(ye)||isNaN(Ze)||isNaN(ct)||isNaN(xt)||isNaN(jt)||!Tr(cn))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ze-B,ct-ye],[xt-Ze,jt-ct],[B-xt,ye-jt]],B,ye,[1,1],cn,!0),this},_.__private__.roundedRect=_.roundedRect=function(B,ye,Ze,ct,xt,jt,cn){if(isNaN(B)||isNaN(ye)||isNaN(Ze)||isNaN(ct)||isNaN(xt)||isNaN(jt)||!Tr(cn))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Dn=4/3*(Math.SQRT2-1);return xt=Math.min(xt,.5*Ze),jt=Math.min(jt,.5*ct),this.lines([[Ze-2*xt,0],[xt*Dn,0,xt,jt-jt*Dn,xt,jt],[0,ct-2*jt],[0,jt*Dn,-xt*Dn,jt,-xt,jt],[2*xt-Ze,0],[-xt*Dn,0,-xt,-jt*Dn,-xt,-jt],[0,2*jt-ct],[0,-jt*Dn,xt*Dn,-jt,xt,-jt]],B+xt,ye,[1,1],cn,!0),this},_.__private__.ellipse=_.ellipse=function(B,ye,Ze,ct,xt){if(isNaN(B)||isNaN(ye)||isNaN(Ze)||isNaN(ct)||!Tr(xt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var jt=4/3*(Math.SQRT2-1)*Ze,cn=4/3*(Math.SQRT2-1)*ct;return Sr(B+Ze,ye),Ha(B+Ze,ye-cn,B+jt,ye-ct,B,ye-ct),Ha(B-jt,ye-ct,B-Ze,ye-cn,B-Ze,ye),Ha(B-Ze,ye+cn,B-jt,ye+ct,B,ye+ct),Ha(B+jt,ye+ct,B+Ze,ye+cn,B+Ze,ye),Hs(xt),this},_.__private__.circle=_.circle=function(B,ye,Ze,ct){if(isNaN(B)||isNaN(ye)||isNaN(Ze)||!Tr(ct))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(B,ye,Ze,Ze,ct)},_.setFont=function(B,ye,Ze){return Ze&&(ye=ce(ye,Ze)),it=cs(B,ye,{disableWarning:!1}),this};var Zu=_.__private__.getFont=_.getFont=function(){return wn[cs.apply(_,arguments)]};_.__private__.getFontList=_.getFontList=function(){var B,ye,Ze={};for(B in Tn)if(Tn.hasOwnProperty(B))for(ye in Ze[B]=[],Tn[B])Tn[B].hasOwnProperty(ye)&&Ze[B].push(ye);return Ze},_.addFont=function(B,ye,Ze,ct,xt){var jt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&jt.indexOf(arguments[3])!==-1?xt=arguments[3]:arguments[3]&&jt.indexOf(arguments[3])==-1&&(Ze=ce(Ze,ct)),xt=xt||"Identity-H",Us.call(this,B,ye,Ze,xt)};var Tl,Xl=e.lineWidth||.200025,ll=_.__private__.getLineWidth=_.getLineWidth=function(){return Xl},Dl=_.__private__.setLineWidth=_.setLineWidth=function(B){return Xl=B,ge(xe(I(B))+" w"),this};_.__private__.setLineDash=Ar.API.setLineDash=Ar.API.setLineDashPattern=function(B,ye){if(B=B||[],ye=ye||0,isNaN(ye)||!Array.isArray(B))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return B=B.map(function(Ze){return xe(I(Ze))}).join(" "),ye=xe(I(ye)),ge("["+B+"] "+ye+" d"),this};var Ql=_.__private__.getLineHeight=_.getLineHeight=function(){return Ge*Tl};_.__private__.getLineHeight=_.getLineHeight=function(){return Ge*Tl};var Xr=_.__private__.setLineHeightFactor=_.setLineHeightFactor=function(B){return typeof(B=B||1.15)=="number"&&(Tl=B),this},eo=_.__private__.getLineHeightFactor=_.getLineHeightFactor=function(){return Tl};Xr(e.lineHeight);var or=_.__private__.getHorizontalCoordinate=function(B){return I(B)},to=_.__private__.getVerticalCoordinate=function(B){return Y===F.ADVANCED?B:We[J].mediaBox.topRightY-We[J].mediaBox.bottomLeftY-I(B)},ul=_.__private__.getHorizontalCoordinateString=_.getHorizontalCoordinateString=function(B){return xe(or(B))},ba=_.__private__.getVerticalCoordinateString=_.getVerticalCoordinateString=function(B){return xe(to(B))},$i=e.strokeColor||"0 G";_.__private__.getStrokeColor=_.getDrawColor=function(){return Er($i)},_.__private__.setStrokeColor=_.setDrawColor=function(B,ye,Ze,ct){return $i=lr({ch1:B,ch2:ye,ch3:Ze,ch4:ct,pdfColorType:"draw",precision:2}),ge($i),this};var eu=e.fillColor||"0 g";_.__private__.getFillColor=_.getFillColor=function(){return Er(eu)},_.__private__.setFillColor=_.setFillColor=function(B,ye,Ze,ct){return eu=lr({ch1:B,ch2:ye,ch3:Ze,ch4:ct,pdfColorType:"fill",precision:2}),ge(eu),this};var ta=e.textColor||"0 g",Nl=_.__private__.getTextColor=_.getTextColor=function(){return Er(ta)};_.__private__.setTextColor=_.setTextColor=function(B,ye,Ze,ct){return ta=lr({ch1:B,ch2:ye,ch3:Ze,ch4:ct,pdfColorType:"text",precision:3}),this};var Bl=e.charSpace,Os=_.__private__.getCharSpace=_.getCharSpace=function(){return parseFloat(Bl||0)};_.__private__.setCharSpace=_.setCharSpace=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Bl=B,this};var Ol=0;_.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},_.__private__.setLineCap=_.setLineCap=function(B){var ye=_.CapJoinStyles[B];if(ye===void 0)throw new Error("Line cap style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ol=ye,ge(ye+" J"),this};var bi=0;_.__private__.setLineJoin=_.setLineJoin=function(B){var ye=_.CapJoinStyles[B];if(ye===void 0)throw new Error("Line join style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return bi=ye,ge(ye+" j"),this},_.__private__.setLineMiterLimit=_.__private__.setMiterLimit=_.setLineMiterLimit=_.setMiterLimit=function(B){if(B=B||0,isNaN(B))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ge(xe(I(B))+" M"),this},_.GState=x0,_.setGState=function(B){(B=typeof B=="string"?En[cr[B]]:Ku(null,B)).equals(yr)||(ge("/"+B.id+" gs"),yr=B)};var Ku=function(B,ye){if(!B||!cr[B]){var Ze=!1;for(var ct in En)if(En.hasOwnProperty(ct)&&En[ct].equals(ye)){Ze=!0;break}if(Ze)ye=En[ct];else{var xt="GS"+(Object.keys(En).length+1).toString(10);En[xt]=ye,ye.id=xt}return B&&(cr[B]=ye.id),Ot.publish("addGState",ye),ye}};_.addGState=function(B,ye){return Ku(B,ye),this},_.saveGraphicsState=function(){return ge("q"),ar.push({key:it,size:Ge,color:ta}),this},_.restoreGraphicsState=function(){ge("Q");var B=ar.pop();return it=B.key,Ge=B.size,ta=B.color,yr=null,this},_.setCurrentTransformationMatrix=function(B){return ge(B.toString()+" cm"),this},_.comment=function(B){return ge("#"+B),this};var Po=function(B,ye){var Ze=B||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ze},set:function(jt){isNaN(jt)||(Ze=parseFloat(jt))}});var ct=ye||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ct},set:function(jt){isNaN(jt)||(ct=parseFloat(jt))}});var xt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return xt},set:function(jt){xt=jt.toString()}}),this},Gs=function(B,ye,Ze,ct){Po.call(this,B,ye),this.type="rect";var xt=Ze||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return xt},set:function(cn){isNaN(cn)||(xt=parseFloat(cn))}});var jt=ct||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return jt},set:function(cn){isNaN(cn)||(jt=parseFloat(cn))}}),this},Il=function(){this.page=mt,this.currentPage=J,this.pages=Ce.slice(0),this.pagesContext=We.slice(0),this.x=Vt,this.y=Qt,this.matrix=On,this.width=wi(J),this.height=wa(J),this.outputDestination=K,this.id="",this.objectNumber=-1};Il.prototype.restore=function(){mt=this.page,J=this.currentPage,We=this.pagesContext,Ce=this.pages,Vt=this.x,Qt=this.y,On=this.matrix,Cs(J,this.width),no(J,this.height),K=this.outputDestination};var qs=function(B,ye,Ze,ct,xt){Zt.push(new Il),mt=J=0,Ce=[],Vt=B,Qt=ye,On=xt,tn([Ze,ct])},cl=function(B){if(Zn[B])Zt.pop().restore();else{var ye=new Il,Ze="Xo"+(Object.keys(tr).length+1).toString(10);ye.id=Ze,Zn[B]=Ze,tr[Ze]=ye,Ot.publish("addFormObject",ye),Zt.pop().restore()}};for(var fl in _.beginFormObject=function(B,ye,Ze,ct,xt){return qs(B,ye,Ze,ct,xt),this},_.endFormObject=function(B){return cl(B),this},_.doFormObject=function(B,ye){var Ze=tr[Zn[B]];return ge("q"),ge(ye.toString()+" cm"),ge("/"+Ze.id+" Do"),ge("Q"),this},_.getFormObject=function(B){var ye=tr[Zn[B]];return{x:ye.x,y:ye.y,width:ye.width,height:ye.height,matrix:ye.matrix}},_.save=function(B,ye){return B=B||"generated.pdf",(ye=ye||{}).returnPromise=ye.returnPromise||!1,ye.returnPromise===!1?(Gf(xo(Xi()),B),typeof Gf.unload=="function"&&Nr.setTimeout&&setTimeout(Gf.unload,911),this):new Promise(function(Ze,ct){try{var xt=Gf(xo(Xi()),B);typeof Gf.unload=="function"&&Nr.setTimeout&&setTimeout(Gf.unload,911),Ze(xt)}catch(jt){ct(jt.message)}})},Ar.API)Ar.API.hasOwnProperty(fl)&&(fl==="events"&&Ar.API.events.length?function(B,ye){var Ze,ct,xt;for(xt=ye.length-1;xt!==-1;xt--)Ze=ye[xt][0],ct=ye[xt][1],B.subscribe.apply(B,[Ze].concat(typeof ct=="function"?[ct]:ct))}(Ot,Ar.API.events):_[fl]=Ar.API[fl]);var wi=_.getPageWidth=function(B){return(We[B=B||J].mediaBox.topRightX-We[B].mediaBox.bottomLeftX)/nt},Cs=_.setPageWidth=function(B,ye){We[B].mediaBox.topRightX=ye*nt+We[B].mediaBox.bottomLeftX},wa=_.getPageHeight=function(B){return(We[B=B||J].mediaBox.topRightY-We[B].mediaBox.bottomLeftY)/nt},no=_.setPageHeight=function(B,ye){We[B].mediaBox.topRightY=ye*nt+We[B].mediaBox.bottomLeftY};return _.internal={pdfEscape:_n,getStyle:Fo,getFont:Zu,getFontSize:ot,getCharSpace:Os,getTextColor:Nl,getLineHeight:Ql,getLineHeightFactor:eo,getLineWidth:ll,write:Ue,getHorizontalCoordinate:or,getVerticalCoordinate:to,getCoordinateString:ul,getVerticalCoordinateString:ba,collections:{},newObject:mr,newAdditionalObject:xr,newObjectDeferred:at,newObjectDeferredBegin:Cn,getFilters:Hr,putStream:ir,events:Ot,scaleFactor:nt,pageSize:{getWidth:function(){return wi(J)},setWidth:function(B){Cs(J,B)},getHeight:function(){return wa(J)},setHeight:function(B){no(J,B)}},encryptionOptions:g,encryption:Qi,getEncryptor:ol,output:Vs,getNumberOfPages:Pi,pages:Ce,out:ge,f2:Z,f3:z,getPageInfo:_a,getPageInfoByObjId:pr,getCurrentPageInfo:br,getPDFVersion:D,Point:Po,Rectangle:Gs,Matrix:mn,hasHotfix:ya},Object.defineProperty(_.internal.pageSize,"width",{get:function(){return wi(J)},set:function(B){Cs(J,B)},enumerable:!0,configurable:!0}),Object.defineProperty(_.internal.pageSize,"height",{get:function(){return wa(J)},set:function(B){no(J,B)},enumerable:!0,configurable:!0}),Hn.call(_,Ke),it="F1",si(i,t),Ot.publish("initialized"),_}Fh.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Fh.prototype.toHexString=function(e){return e.split("").map(function(n){return("0"+(255&n.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Fh.prototype.hexToBytes=function(e){for(var n=[],t=0;t<e.length;t+=2)n.push(String.fromCharCode(parseInt(e.substr(t,2),16)));return n.join("")},Fh.prototype.processOwnerPassword=function(e,n){return P1(E1(n).substr(0,5),e)},Fh.prototype.encryptor=function(e,n){var t=E1(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&n,n>>8&255)).substr(0,10);return function(r){return P1(t,r)}},x0.prototype.equals=function(e){var n,t="id,objectNumber,equals";if(!e||Yi(e)!==Yi(this))return!1;var r=0;for(n in this)if(!(t.indexOf(n)>=0)){if(this.hasOwnProperty(n)&&!e.hasOwnProperty(n)||this[n]!==e[n])return!1;r++}for(n in e)e.hasOwnProperty(n)&&t.indexOf(n)<0&&r--;return r===0},Ar.API={events:[]},Ar.version="2.5.2";var as=Ar.API,by=1,lh=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ah=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Wr=function(e){return e.toFixed(2)},of=function(e){return e.toFixed(5)};as.__acroform__={};var Al=function(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e},Tb=function(e){return e*by},oc=function(e){var n=new Tx,t=Yn.internal.getHeight(e)||0,r=Yn.internal.getWidth(e)||0;return n.BBox=[0,0,Number(Wr(r)),Number(Wr(t))],n},bF=as.__acroform__.setBit=function(e,n){if(e=e||0,n=n||0,isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<n},wF=as.__acroform__.clearBit=function(e,n){if(e=e||0,n=n||0,isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<n)},xF=as.__acroform__.getBit=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<n?1:0},_s=as.__acroform__.getBitForPdf=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return xF(e,n-1)},bs=as.__acroform__.setBitForPdf=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return bF(e,n-1)},ws=as.__acroform__.clearBitForPdf=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return wF(e,n-1)},LF=as.__acroform__.calculateCoordinates=function(e,n){var t=n.internal.getHorizontalCoordinate,r=n.internal.getVerticalCoordinate,i=e[0],s=e[1],o=e[2],u=e[3],f={};return f.lowerLeft_X=t(i)||0,f.lowerLeft_Y=r(s+u)||0,f.upperRight_X=t(i+o)||0,f.upperRight_Y=r(s)||0,[Number(Wr(f.lowerLeft_X)),Number(Wr(f.lowerLeft_Y)),Number(Wr(f.upperRight_X)),Number(Wr(f.upperRight_Y))]},SF=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var n=[],t=e._V||e.DV,r=M1(e,t),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;n.push("/Tx BMC"),n.push("q"),n.push("BT"),n.push(e.scope.__private__.encodeColorString(e.color)),n.push("/"+i+" "+Wr(r.fontSize)+" Tf"),n.push("1 0 0 1 0 0 Tm"),n.push(r.text),n.push("ET"),n.push("Q"),n.push("EMC");var s=oc(e);return s.scope=e.scope,s.stream=n.join(`
`),s}},M1=function(e,n){var t=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},i=(n=(n=n.substr(0,1)=="("?n.substr(1):n).substr(n.length-1)==")"?n.substr(0,n.length-1):n).split(" ");i=e.multiline?i.map(function(z){return z.split(`
`)}):i.map(function(z){return[z]});var s=t,o=Yn.internal.getHeight(e)||0;o=o<0?-o:o;var u=Yn.internal.getWidth(e)||0;u=u<0?-u:u;var f=function(z,I,$){if(z+1<i.length){var U=I+" "+i[z+1][0];return wg(U,e,$).width<=u-4}return!1};s++;e:for(;s>0;){n="",s--;var d,g,y=wg("3",e,s).height,x=e.multiline?o-s:(o-y)/2,_=x+=2,M=0,D=0,N=0;if(s<=0){n=`(...) Tj
`,n+="% Width of Text: "+wg(n,e,s=12).width+", FieldWidth:"+u+`
`;break}for(var O="",F=0,Y=0;Y<i.length;Y++)if(i.hasOwnProperty(Y)){var Q=!1;if(i[Y].length!==1&&N!==i[Y].length-1){if((y+2)*(F+2)+2>o)continue e;O+=i[Y][N],Q=!0,D=Y,Y--}else{O=(O+=i[Y][N]+" ").substr(O.length-1)==" "?O.substr(0,O.length-1):O;var le=parseInt(Y),ce=f(le,O,s),xe=Y>=i.length-1;if(ce&&!xe){O+=" ",N=0;continue}if(ce||xe){if(xe)D=le;else if(e.multiline&&(y+2)*(F+2)+2>o)continue e}else{if(!e.multiline||(y+2)*(F+2)+2>o)continue e;D=le}}for(var G="",R=M;R<=D;R++){var Z=i[R];if(e.multiline){if(R===D){G+=Z[N]+" ",N=(N+1)%Z.length;continue}if(R===M){G+=Z[Z.length-1]+" ";continue}}G+=Z[0]+" "}switch(G=G.substr(G.length-1)==" "?G.substr(0,G.length-1):G,g=wg(G,e,s).width,e.textAlign){case"right":d=u-g-2;break;case"center":d=(u-g)/2;break;case"left":default:d=2}n+=Wr(d)+" "+Wr(_)+` Td
`,n+="("+lh(G)+`) Tj
`,n+=-Wr(d)+` 0 Td
`,_=-(s+2),g=0,M=Q?D:D+1,F++,O=""}break}return r.text=n,r.fontSize=s,r},wg=function(e,n,t){var r=n.scope.internal.getFont(n.fontName,n.fontStyle),i=n.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:n.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},CF={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},EF=function(e,n){var t={type:"reference",object:e};n.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&n.internal.getPageInfo(e.page).pageContext.annotations.push(t)},PF=function(e,n){for(var t in e)if(e.hasOwnProperty(t)){var r=t,i=e[t];n.internal.newObjectDeferredBegin(i.objId,!0),Yi(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete e[r]}},MF=function(e,n){if(n.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(qu.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(CF)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");by=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new Dx,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&EF(s,t)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(t){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var u=r[o],f=[],d=u.Rect;if(u.Rect&&(u.Rect=LF(u.Rect,i)),i.internal.newObjectDeferredBegin(u.objId,!0),u.DA=Yn.createDefaultAppearanceStream(u),Yi(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(f=u.getKeyValueListForStream()),u.Rect=d,u.hasAppearanceStream&&!u.appearanceStreamContent){var g=SF(u);f.push({key:"AP",value:"<</N "+g+">>"}),i.internal.acroformPlugin.xForms.push(g)}if(u.appearanceStreamContent){var y="";for(var x in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(x)){var _=u.appearanceStreamContent[x];if(y+="/"+x+" ",y+="<<",Object.keys(_).length>=1||Array.isArray(_)){for(var o in _)if(_.hasOwnProperty(o)){var M=_[o];typeof M=="function"&&(M=M.call(i,u)),y+="/"+o+" "+M+" ",i.internal.acroformPlugin.xForms.indexOf(M)>=0||i.internal.acroformPlugin.xForms.push(M)}}else typeof(M=_)=="function"&&(M=M.call(i,u)),y+="/"+o+" "+M,i.internal.acroformPlugin.xForms.indexOf(M)>=0||i.internal.acroformPlugin.xForms.push(M);y+=">>"}f.push({key:"AP",value:`<<
`+y+">>"})}i.internal.putStream({additionalKeyValues:f,objectId:u.objId}),i.internal.out("endobj")}s&&PF(i.internal.acroformPlugin.xForms,i)})(t,e)}),e.internal.acroformPlugin.isInitialized=!0}},kx=as.__acroform__.arrayToPdfArray=function(e,n,t){var r=function(o){return o};if(Array.isArray(e)){for(var i="[",s=0;s<e.length;s++)switch(s!==0&&(i+=" "),Yi(e[s])){case"boolean":case"number":case"object":i+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(n!==void 0&&t&&(r=t.internal.getEncryptor(n)),i+="("+lh(r(e[s].toString()))+")"):i+=e[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},mv=function(e,n,t){var r=function(i){return i};return n!==void 0&&t&&(r=t.internal.getEncryptor(n)),(e=e||"").toString(),e="("+lh(r(e))+")"},fc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};fc.prototype.toString=function(){return this.objId+" 0 R"},fc.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},fc.prototype.getKeyValueListForStream=function(){var e=[],n=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in n)if(Object.getOwnPropertyDescriptor(this,n[t]).configurable===!1){var r=n[t],i=this[r];i&&(Array.isArray(i)?e.push({key:r,value:kx(i,this.objId,this.scope)}):i instanceof fc?(i.scope=this.scope,e.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:r,value:i}))}return e};var Tx=function(){fc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,n=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};Al(Tx,fc);var Dx=function(){fc.call(this);var e,n=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return n.length>0?n:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return n}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+lh(t(e))+")"}},set:function(t){e=t}})};Al(Dx,fc);var qu=function e(){fc.call(this);var n=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return n},set:function(O){if(isNaN(O))throw new Error('Invalid value "'+O+'" for attribute F supplied.');n=O}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!_s(n,3)},set:function(O){O?this.F=bs(n,3):this.F=ws(n,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(O){if(isNaN(O))throw new Error('Invalid value "'+O+'" for attribute Ff supplied.');t=O}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(O){r=O!==void 0?O:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(O){r[0]=O}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(O){r[1]=O}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(O){r[2]=O}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(O){r[3]=O}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(O){switch(O){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=O;break;default:throw new Error('Invalid value "'+O+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof L0)return;s="FieldObject"+e.FieldNum++}var O=function(F){return F};return this.scope&&(O=this.scope.internal.getEncryptor(this.objId)),"("+lh(O(s))+")"},set:function(O){s=O.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(O){s=O}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(O){o=O}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(O){u=O}});var f=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f},set:function(O){f=O}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/by:d},set:function(O){d=O}});var g="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return g},set:function(O){g=O}});var y="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!y||this instanceof L0||this instanceof th))return mv(y,this.objId,this.scope)},set:function(O){O=O.toString(),y=O}});var x=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof Qs?x:mv(x,this.objId,this.scope)},set:function(O){O=O.toString(),x=this instanceof Qs?O:O.substr(0,1)==="("?Ah(O.substr(1,O.length-2)):Ah(O)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Qs?Ah(x.substr(1,x.length-1)):x},set:function(O){O=O.toString(),x=this instanceof Qs?"/"+O:O}});var _=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(_)return _},set:function(O){this.V=O}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(_)return this instanceof Qs?_:mv(_,this.objId,this.scope)},set:function(O){O=O.toString(),_=this instanceof Qs?O:O.substr(0,1)==="("?Ah(O.substr(1,O.length-2)):Ah(O)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Qs?Ah(_.substr(1,_.length-1)):_},set:function(O){O=O.toString(),_=this instanceof Qs?"/"+O:O}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var M,D=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return D},set:function(O){O=!!O,D=O}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(M)return M},set:function(O){M=O}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,1)},set:function(O){O?this.Ff=bs(this.Ff,1):this.Ff=ws(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,2)},set:function(O){O?this.Ff=bs(this.Ff,2):this.Ff=ws(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,3)},set:function(O){O?this.Ff=bs(this.Ff,3):this.Ff=ws(this.Ff,3)}});var N=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(N!==null)return N},set:function(O){if([0,1,2].indexOf(O)===-1)throw new Error('Invalid value "'+O+'" for attribute Q supplied.');N=O}}),Object.defineProperty(this,"textAlign",{get:function(){var O;switch(N){case 0:default:O="left";break;case 1:O="center";break;case 2:O="right"}return O},configurable:!0,enumerable:!0,set:function(O){switch(O){case"right":case 2:N=2;break;case"center":case 1:N=1;break;case"left":case 0:default:N=0}}})};Al(qu,fc);var Yh=function(){qu.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var n=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return kx(n,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=function(s,o,u){u||(u=1);for(var f,d=[];f=o.exec(s);)d.push(f[u]);return d}(r,/\((.*?)\)/g)),n=i}}),this.getOptions=function(){return n},this.setOptions=function(t){n=t,this.sort&&n.sort()},this.addOption=function(t){t=(t=t||"").toString(),n.push(t),this.sort&&n.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();n.indexOf(t)!==-1&&(n.splice(n.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,18)},set:function(t){t?this.Ff=bs(this.Ff,18):this.Ff=ws(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=bs(this.Ff,19):this.Ff=ws(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,20)},set:function(t){t?(this.Ff=bs(this.Ff,20),n.sort()):this.Ff=ws(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,22)},set:function(t){t?this.Ff=bs(this.Ff,22):this.Ff=ws(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,23)},set:function(t){t?this.Ff=bs(this.Ff,23):this.Ff=ws(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,27)},set:function(t){t?this.Ff=bs(this.Ff,27):this.Ff=ws(this.Ff,27)}}),this.hasAppearanceStream=!1};Al(Yh,qu);var Jh=function(){Yh.call(this),this.fontName="helvetica",this.combo=!1};Al(Jh,Yh);var Xh=function(){Jh.call(this),this.combo=!0};Al(Xh,Jh);var Ug=function(){Xh.call(this),this.edit=!0};Al(Ug,Xh);var Qs=function(){qu.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,15)},set:function(t){t?this.Ff=bs(this.Ff,15):this.Ff=ws(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,16)},set:function(t){t?this.Ff=bs(this.Ff,16):this.Ff=ws(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,17)},set:function(t){t?this.Ff=bs(this.Ff,17):this.Ff=ws(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,26)},set:function(t){t?this.Ff=bs(this.Ff,26):this.Ff=ws(this.Ff,26)}});var e,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(n).length!==0){var r,i=[];for(r in i.push("<<"),n)i.push("/"+r+" ("+lh(t(n[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Yi(t)==="object"&&(n=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(t){typeof t=="string"&&(n.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};Al(Qs,qu);var Vg=function(){Qs.call(this),this.pushButton=!0};Al(Vg,Qs);var Qh=function(){Qs.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n!==void 0?n:[]}})};Al(Qh,Qs);var L0=function(){var e,n;qu.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return n},set:function(i){n=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(u){return u};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+lh(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Yi(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Yn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Al(L0,qu),Qh.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var n in this.Kids)if(this.Kids.hasOwnProperty(n)){var t=this.Kids[n];t.appearanceStreamContent=e.createAppearanceStream(t.optionName),t.caption=e.getCA()}},Qh.prototype.createOption=function(e){var n=new L0;return n.Parent=this,n.optionName=e,this.Kids.push(n),AF.call(this.scope,n),n};var Hg=function(){Qs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Yn.CheckBox.createAppearanceStream()};Al(Hg,Qs);var th=function(){qu.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,13)},set:function(n){n?this.Ff=bs(this.Ff,13):this.Ff=ws(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,21)},set:function(n){n?this.Ff=bs(this.Ff,21):this.Ff=ws(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,23)},set:function(n){n?this.Ff=bs(this.Ff,23):this.Ff=ws(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,24)},set:function(n){n?this.Ff=bs(this.Ff,24):this.Ff=ws(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,25)},set:function(n){n?this.Ff=bs(this.Ff,25):this.Ff=ws(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,26)},set:function(n){n?this.Ff=bs(this.Ff,26):this.Ff=ws(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){Number.isInteger(n)&&(e=n)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Al(th,qu);var Gg=function(){th.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!_s(this.Ff,14)},set:function(e){e?this.Ff=bs(this.Ff,14):this.Ff=ws(this.Ff,14)}}),this.password=!0};Al(Gg,th);var Yn={CheckBox:{createAppearanceStream:function(){return{N:{On:Yn.CheckBox.YesNormal},D:{On:Yn.CheckBox.YesPushDown,Off:Yn.CheckBox.OffPushDown}}},YesPushDown:function(e){var n=oc(e);n.scope=e.scope;var t=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),s=M1(e,e.caption);return t.push("0.749023 g"),t.push("0 0 "+Wr(Yn.internal.getWidth(e))+" "+Wr(Yn.internal.getHeight(e))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+Wr(s.fontSize)+" Tf "+i),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),n.stream=t.join(`
`),n},YesNormal:function(e){var n=oc(e);n.scope=e.scope;var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),i=[],s=Yn.internal.getHeight(e),o=Yn.internal.getWidth(e),u=M1(e,e.caption);return i.push("1 g"),i.push("0 0 "+Wr(o)+" "+Wr(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Wr(o-1)+" "+Wr(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+Wr(u.fontSize)+" Tf "+r),i.push(u.text),i.push("ET"),i.push("Q"),n.stream=i.join(`
`),n},OffPushDown:function(e){var n=oc(e);n.scope=e.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Wr(Yn.internal.getWidth(e))+" "+Wr(Yn.internal.getHeight(e))+" re"),t.push("f"),n.stream=t.join(`
`),n}},RadioButton:{Circle:{createAppearanceStream:function(e){var n={D:{Off:Yn.RadioButton.Circle.OffPushDown},N:{}};return n.N[e]=Yn.RadioButton.Circle.YesNormal,n.D[e]=Yn.RadioButton.Circle.YesPushDown,n},getCA:function(){return"l"},YesNormal:function(e){var n=oc(e);n.scope=e.scope;var t=[],r=Yn.internal.getWidth(e)<=Yn.internal.getHeight(e)?Yn.internal.getWidth(e)/4:Yn.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Yn.internal.Bezier_C,s=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+of(Yn.internal.getWidth(e)/2)+" "+of(Yn.internal.getHeight(e)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),n.stream=t.join(`
`),n},YesPushDown:function(e){var n=oc(e);n.scope=e.scope;var t=[],r=Yn.internal.getWidth(e)<=Yn.internal.getHeight(e)?Yn.internal.getWidth(e)/4:Yn.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Yn.internal.Bezier_C).toFixed(5)),o=Number((r*Yn.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+of(Yn.internal.getWidth(e)/2)+" "+of(Yn.internal.getHeight(e)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+of(Yn.internal.getWidth(e)/2)+" "+of(Yn.internal.getHeight(e)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),n.stream=t.join(`
`),n},OffPushDown:function(e){var n=oc(e);n.scope=e.scope;var t=[],r=Yn.internal.getWidth(e)<=Yn.internal.getHeight(e)?Yn.internal.getWidth(e)/4:Yn.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Yn.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+of(Yn.internal.getWidth(e)/2)+" "+of(Yn.internal.getHeight(e)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),n.stream=t.join(`
`),n}},Cross:{createAppearanceStream:function(e){var n={D:{Off:Yn.RadioButton.Cross.OffPushDown},N:{}};return n.N[e]=Yn.RadioButton.Cross.YesNormal,n.D[e]=Yn.RadioButton.Cross.YesPushDown,n},getCA:function(){return"8"},YesNormal:function(e){var n=oc(e);n.scope=e.scope;var t=[],r=Yn.internal.calculateCross(e);return t.push("q"),t.push("1 1 "+Wr(Yn.internal.getWidth(e)-2)+" "+Wr(Yn.internal.getHeight(e)-2)+" re"),t.push("W"),t.push("n"),t.push(Wr(r.x1.x)+" "+Wr(r.x1.y)+" m"),t.push(Wr(r.x2.x)+" "+Wr(r.x2.y)+" l"),t.push(Wr(r.x4.x)+" "+Wr(r.x4.y)+" m"),t.push(Wr(r.x3.x)+" "+Wr(r.x3.y)+" l"),t.push("s"),t.push("Q"),n.stream=t.join(`
`),n},YesPushDown:function(e){var n=oc(e);n.scope=e.scope;var t=Yn.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+Wr(Yn.internal.getWidth(e))+" "+Wr(Yn.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Wr(Yn.internal.getWidth(e)-2)+" "+Wr(Yn.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Wr(t.x1.x)+" "+Wr(t.x1.y)+" m"),r.push(Wr(t.x2.x)+" "+Wr(t.x2.y)+" l"),r.push(Wr(t.x4.x)+" "+Wr(t.x4.y)+" m"),r.push(Wr(t.x3.x)+" "+Wr(t.x3.y)+" l"),r.push("s"),r.push("Q"),n.stream=r.join(`
`),n},OffPushDown:function(e){var n=oc(e);n.scope=e.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Wr(Yn.internal.getWidth(e))+" "+Wr(Yn.internal.getHeight(e))+" re"),t.push("f"),n.stream=t.join(`
`),n}}},createDefaultAppearanceStream:function(e){var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,t=e.scope.__private__.encodeColorString(e.color);return"/"+n+" "+e.fontSize+" Tf "+t}};Yn.internal={Bezier_C:.551915024494,calculateCross:function(e){var n=Yn.internal.getWidth(e),t=Yn.internal.getHeight(e),r=Math.min(n,t);return{x1:{x:(n-r)/2,y:(t-r)/2+r},x2:{x:(n-r)/2+r,y:(t-r)/2},x3:{x:(n-r)/2,y:(t-r)/2},x4:{x:(n-r)/2+r,y:(t-r)/2+r}}}},Yn.internal.getWidth=function(e){var n=0;return Yi(e)==="object"&&(n=Tb(e.Rect[2])),n},Yn.internal.getHeight=function(e){var n=0;return Yi(e)==="object"&&(n=Tb(e.Rect[3])),n};var AF=as.addField=function(e){if(MF(this,e),!(e instanceof qu))throw new Error("Invalid argument passed to jsPDF.addField.");var n;return(n=e).scope.internal.acroformPlugin.printedOut&&(n.scope.internal.acroformPlugin.printedOut=!1,n.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),n.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(n),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};as.AcroFormChoiceField=Yh,as.AcroFormListBox=Jh,as.AcroFormComboBox=Xh,as.AcroFormEditBox=Ug,as.AcroFormButton=Qs,as.AcroFormPushButton=Vg,as.AcroFormRadioButton=Qh,as.AcroFormCheckBox=Hg,as.AcroFormTextField=th,as.AcroFormPasswordField=Gg,as.AcroFormAppearance=Yn,as.AcroForm={ChoiceField:Yh,ListBox:Jh,ComboBox:Xh,EditBox:Ug,Button:Qs,PushButton:Vg,RadioButton:Qh,CheckBox:Hg,TextField:th,PasswordField:Gg,Appearance:Yn},Ar.AcroForm={ChoiceField:Yh,ListBox:Jh,ComboBox:Xh,EditBox:Ug,Button:Qs,PushButton:Vg,RadioButton:Qh,CheckBox:Hg,TextField:th,PasswordField:Gg,Appearance:Yn};Ar.AcroForm;function Nx(e){return e.reduce(function(n,t,r){return n[t]=r,n},{})}(function(e){e.__addimage__={};var n="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(z,I){var $,U,W,q,ie,re=n;if((I=I||n)==="RGBA"||z.data!==void 0&&z.data instanceof Uint8ClampedArray&&"height"in z&&"width"in z)return"RGBA";if(ce(z))for(ie in t)for(W=t[ie],$=0;$<W.length;$+=1){for(q=!0,U=0;U<W[$].length;U+=1)if(W[$][U]!==void 0&&W[$][U]!==z[U]){q=!1;break}if(q===!0){re=ie;break}}else for(ie in t)for(W=t[ie],$=0;$<W.length;$+=1){for(q=!0,U=0;U<W[$].length;U+=1)if(W[$][U]!==void 0&&W[$][U]!==z.charCodeAt(U)){q=!1;break}if(q===!0){re=ie;break}}return re===n&&I!==n&&(re=I),re},i=function z(I){for(var $=this.internal.write,U=this.internal.putStream,W=(0,this.internal.getFilters)();W.indexOf("FlateEncode")!==-1;)W.splice(W.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var q=[];if(q.push({key:"Type",value:"/XObject"}),q.push({key:"Subtype",value:"/Image"}),q.push({key:"Width",value:I.width}),q.push({key:"Height",value:I.height}),I.colorSpace===N.INDEXED?q.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(q.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===N.DEVICE_CMYK&&q.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),q.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&q.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)){for(var ie="",re=0,we=I.transparency.length;re<we;re++)ie+=I.transparency[re]+" "+I.transparency[re]+" ";q.push({key:"Mask",value:"["+ie+"]"})}I.sMask!==void 0&&q.push({key:"SMask",value:I.objectId+1+" 0 R"});var Pe=I.filter!==void 0?["/"+I.filter]:void 0;if(U({data:I.data,additionalKeyValues:q,alreadyAppliedFilters:Pe,objectId:I.objectId}),$("endobj"),"sMask"in I&&I.sMask!==void 0){var Ie="/Predictor "+I.predictor+" /Colors 1 /BitsPerComponent "+I.bitsPerComponent+" /Columns "+I.width,A={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:I.bitsPerComponent,decodeParameters:Ie,data:I.sMask};"filter"in I&&(A.filter=I.filter),z.call(this,A)}if(I.colorSpace===N.INDEXED){var J=this.internal.newObject();U({data:G(new Uint8Array(I.palette)),objectId:J}),$("endobj")}},s=function(){var z=this.internal.collections.addImage_images;for(var I in z)i.call(this,z[I])},o=function(){var z,I=this.internal.collections.addImage_images,$=this.internal.write;for(var U in I)$("/I"+(z=I[U]).index,z.objectId,"0","R")},u=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},f=function(){var z=this.internal.collections.addImage_images;return u.call(this),z},d=function(){return Object.keys(this.internal.collections.addImage_images).length},g=function(z){return typeof e["process"+z.toUpperCase()]=="function"},y=function(z){return Yi(z)==="object"&&z.nodeType===1},x=function(z,I){if(z.nodeName==="IMG"&&z.hasAttribute("src")){var $=""+z.getAttribute("src");if($.indexOf("data:image/")===0)return ip(unescape($).split("base64,").pop());var U=e.loadFile($,!0);if(U!==void 0)return U}if(z.nodeName==="CANVAS"){if(z.width===0||z.height===0)throw new Error("Given canvas must have data. Canvas width: "+z.width+", height: "+z.height);var W;switch(I){case"PNG":W="image/png";break;case"WEBP":W="image/webp";break;case"JPEG":case"JPG":default:W="image/jpeg"}return ip(z.toDataURL(W,1).split("base64,").pop())}},_=function(z){var I=this.internal.collections.addImage_images;if(I){for(var $ in I)if(z===I[$].alias)return I[$]}},M=function(z,I,$){return z||I||(z=-96,I=-96),z<0&&(z=-1*$.width*72/z/this.internal.scaleFactor),I<0&&(I=-1*$.height*72/I/this.internal.scaleFactor),z===0&&(z=I*$.width/$.height),I===0&&(I=z*$.height/$.width),[z,I]},D=function(z,I,$,U,W,q){var ie=M.call(this,$,U,W),re=this.internal.getCoordinateString,we=this.internal.getVerticalCoordinateString,Pe=f.call(this);if($=ie[0],U=ie[1],Pe[W.index]=W,q){q*=Math.PI/180;var Ie=Math.cos(q),A=Math.sin(q),J=function(ne){return ne.toFixed(4)},fe=[J(Ie),J(A),J(-1*A),J(Ie),0,0,"cm"]}this.internal.write("q"),q?(this.internal.write([1,"0","0",1,re(z),we(I+U),"cm"].join(" ")),this.internal.write(fe.join(" ")),this.internal.write([re($),"0","0",re(U),"0","0","cm"].join(" "))):this.internal.write([re($),"0","0",re(U),re(z),we(I+U),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+W.index+" Do"),this.internal.write("Q")},N=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var O=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},F=e.__addimage__.sHashCode=function(z){var I,$,U=0;if(typeof z=="string")for($=z.length,I=0;I<$;I++)U=(U<<5)-U+z.charCodeAt(I),U|=0;else if(ce(z))for($=z.byteLength/2,I=0;I<$;I++)U=(U<<5)-U+z[I],U|=0;return U},Y=e.__addimage__.validateStringAsBase64=function(z){(z=z||"").toString().trim();var I=!0;return z.length===0&&(I=!1),z.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(z.substr(0,z.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(z.substr(-2))===!1&&(I=!1),I},Q=e.__addimage__.extractImageFromDataUrl=function(z){var I=(z=z||"").split("base64,"),$=null;if(I.length===2){var U=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(I[0]);Array.isArray(U)&&($={mimeType:U[1],charset:U[2],data:I[1]})}return $},le=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(z){return le()&&z instanceof ArrayBuffer};var ce=e.__addimage__.isArrayBufferView=function(z){return le()&&typeof Uint32Array<"u"&&(z instanceof Int8Array||z instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&z instanceof Uint8ClampedArray||z instanceof Int16Array||z instanceof Uint16Array||z instanceof Int32Array||z instanceof Uint32Array||z instanceof Float32Array||z instanceof Float64Array)},xe=e.__addimage__.binaryStringToUint8Array=function(z){for(var I=z.length,$=new Uint8Array(I),U=0;U<I;U++)$[U]=z.charCodeAt(U);return $},G=e.__addimage__.arrayBufferToBinaryString=function(z){for(var I="",$=ce(z)?z:new Uint8Array(z),U=0;U<$.length;U+=8192)I+=String.fromCharCode.apply(null,$.subarray(U,U+8192));return I};e.addImage=function(){var z,I,$,U,W,q,ie,re,we;if(typeof arguments[1]=="number"?(I=n,$=arguments[1],U=arguments[2],W=arguments[3],q=arguments[4],ie=arguments[5],re=arguments[6],we=arguments[7]):(I=arguments[1],$=arguments[2],U=arguments[3],W=arguments[4],q=arguments[5],ie=arguments[6],re=arguments[7],we=arguments[8]),Yi(z=arguments[0])==="object"&&!y(z)&&"imageData"in z){var Pe=z;z=Pe.imageData,I=Pe.format||I||n,$=Pe.x||$||0,U=Pe.y||U||0,W=Pe.w||Pe.width||W,q=Pe.h||Pe.height||q,ie=Pe.alias||ie,re=Pe.compression||re,we=Pe.rotation||Pe.angle||we}var Ie=this.internal.getFilters();if(re===void 0&&Ie.indexOf("FlateEncode")!==-1&&(re="SLOW"),isNaN($)||isNaN(U))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var A=R.call(this,z,I,ie,re);return D.call(this,$,U,W,q,A,we),this};var R=function(z,I,$,U){var W,q,ie;if(typeof z=="string"&&r(z)===n){z=unescape(z);var re=Z(z,!1);(re!==""||(re=e.loadFile(z,!0))!==void 0)&&(z=re)}if(y(z)&&(z=x(z,I)),I=r(z,I),!g(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((ie=$)==null||ie.length===0)&&($=function(we){return typeof we=="string"||ce(we)?F(we):ce(we.data)?F(we.data):null}(z)),(W=_.call(this,$))||(le()&&(z instanceof Uint8Array||I==="RGBA"||(q=z,z=xe(z))),W=this["process"+I.toUpperCase()](z,d.call(this),$,function(we){return we&&typeof we=="string"&&(we=we.toUpperCase()),we in e.image_compression?we:O.NONE}(U),q)),!W)throw new Error("An unknown error occurred whilst processing the image.");return W},Z=e.__addimage__.convertBase64ToBinaryString=function(z,I){var $;I=typeof I!="boolean"||I;var U,W="";if(typeof z=="string"){U=($=Q(z))!==null?$.data:z;try{W=ip(U)}catch(q){if(I)throw Y(U)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+q.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return W};e.getImageProperties=function(z){var I,$,U="";if(y(z)&&(z=x(z)),typeof z=="string"&&r(z)===n&&((U=Z(z,!1))===""&&(U=e.loadFile(z)||""),z=U),$=r(z),!g($))throw new Error("addImage does not support files of type '"+$+"', please ensure that a plugin for '"+$+"' support is added.");if(!le()||z instanceof Uint8Array||(z=xe(z)),!(I=this["process"+$.toUpperCase()](z)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=$,I}})(Ar.API),function(e){var n=function(t){if(t!==void 0&&t!="")return!0};Ar.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(t){for(var r,i,s,o=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,f=this.internal.getPageInfoByObjId(t.objId),d=t.pageContext.annotations,g=!1,y=0;y<d.length&&!g;y++)switch((r=d[y]).type){case"link":(n(r.options.url)||n(r.options.pageNumber))&&(g=!0);break;case"reference":case"text":case"freetext":g=!0}if(g!=0){this.internal.write("/Annots [");for(var x=0;x<d.length;x++){r=d[x];var _=this.internal.pdfEscape,M=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var D=this.internal.newAdditionalObject(),N=this.internal.newAdditionalObject(),O=this.internal.getEncryptor(D.objId),F=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+u(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y)+"] ")+"/Contents ("+_(O(r.contents))+")",s+=" /Popup "+N.objId+" 0 R",s+=" /P "+f.objId+" 0 R",s+=" /T ("+_(O(F))+") >>",D.content=s;var Y=D.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+u(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+u(r.bounds.y)+"] ")+" /Parent "+Y,r.open&&(s+=" /Open true"),s+=" >>",N.content=s,this.internal.write(D.objId,"0 R",N.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+u(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y+r.bounds.h)+"] ";var Q=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+_(M(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Q+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var le=this.annotations._nameMap[r.options.name];r.options.pageNumber=le.page,r.options.top=le.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+_(M(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var ce=u(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+ce+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},e.link=function(t,r,i,s,o){var u=this.internal.getCurrentPageInfo(),f=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:f(t),y:d(r),w:f(t+i),h:d(r+s)},options:o,type:"link"})},e.textWithLink=function(t,r,i,s){var o,u,f=this.getTextWidth(t),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){u=s.maxWidth;var g=this.splitTextToSize(t,u).length;o=Math.ceil(d*g)}else u=f,o=d;return this.text(t,r,i,s),i+=.2*d,s.align==="center"&&(r-=f/2),s.align==="right"&&(r-=f),this.link(r,i-d,u,o,s),f},e.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(Ar.API),function(e){var n={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(D){return n[D.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(D){return typeof D=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(D)},u=e.__arabicParser__.isArabicEndLetter=function(D){return o(D)&&s(D)&&n[D.charCodeAt(0)].length<=2},f=e.__arabicParser__.isArabicAlfLetter=function(D){return o(D)&&i.indexOf(D.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(D){return o(D)&&s(D)&&n[D.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(D){return o(D)&&s(D)&&n[D.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(D){return o(D)&&s(D)&&n[D.charCodeAt(0)].length>=3};var g=e.__arabicParser__.arabicLetterHasMedialForm=function(D){return o(D)&&s(D)&&n[D.charCodeAt(0)].length==4},y=e.__arabicParser__.resolveLigatures=function(D){var N=0,O=t,F="",Y=0;for(N=0;N<D.length;N+=1)O[D.charCodeAt(N)]!==void 0?(Y++,typeof(O=O[D.charCodeAt(N)])=="number"&&(F+=String.fromCharCode(O),O=t,Y=0),N===D.length-1&&(O=t,F+=D.charAt(N-(Y-1)),N-=Y-1,Y=0)):(O=t,F+=D.charAt(N-Y),N-=Y,Y=0);return F};e.__arabicParser__.isArabicDiacritic=function(D){return D!==void 0&&r[D.charCodeAt(0)]!==void 0};var x=e.__arabicParser__.getCorrectForm=function(D,N,O){return o(D)?s(D)===!1?-1:!d(D)||!o(N)&&!o(O)||!o(O)&&u(N)||u(D)&&!o(N)||u(D)&&f(N)||u(D)&&u(N)?0:g(D)&&o(N)&&!u(N)&&o(O)&&d(O)?3:u(D)||!o(O)?1:2:-1},_=function(D){var N=0,O=0,F=0,Y="",Q="",le="",ce=(D=D||"").split("\\s+"),xe=[];for(N=0;N<ce.length;N+=1){for(xe.push(""),O=0;O<ce[N].length;O+=1)Y=ce[N][O],Q=ce[N][O-1],le=ce[N][O+1],o(Y)?(F=x(Y,Q,le),xe[N]+=F!==-1?String.fromCharCode(n[Y.charCodeAt(0)][F]):Y):xe[N]+=Y;xe[N]=y(xe[N])}return xe.join(" ")},M=e.__arabicParser__.processArabic=e.processArabic=function(){var D,N=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,O=[];if(Array.isArray(N)){var F=0;for(O=[],F=0;F<N.length;F+=1)Array.isArray(N[F])?O.push([_(N[F][0]),N[F][1],N[F][2]]):O.push([_(N[F])]);D=O}else D=_(N);return typeof arguments[0]=="string"?D:(arguments[0].text=D,arguments[0])};e.events.push(["preProcessText",M])}(Ar.API),Ar.API.autoPrint=function(e){var n;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){n=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+n+" 0 R")})}return this},function(e){var n=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(u){t=u}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(u){r=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(u){i=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(u){s=u}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(u){o=u}}),Object.defineProperty(this,"parentNode",{})};n.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},n.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new n,this.canvas.pdf=this}])}(Ar.API),function(e){var n={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},n),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var f=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(D){f=D}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(D){d=D}});var g=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return g},set:function(D){g=D}});var y=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return y},set:function(D){y=D}});var x=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return x},set:function(D){x=D}});var _=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return _},set:function(D){_=D}});var M=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return M},set:function(D){M=D}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(f){return r.call(this),this.internal.__cell__.headerFunction=typeof f=="function"?f:void 0,this},e.getTextDimensions=function(f,d){r.call(this);var g=(d=d||{}).fontSize||this.getFontSize(),y=d.font||this.getFont(),x=d.scaleFactor||this.internal.scaleFactor,_=0,M=0,D=0,N=this;if(!Array.isArray(f)&&typeof f!="string"){if(typeof f!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");f=String(f)}var O=d.maxWidth;O>0?typeof f=="string"?f=this.splitTextToSize(f,O):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(Y,Q){return Y.concat(N.splitTextToSize(Q,O))},[])):f=Array.isArray(f)?f:[f];for(var F=0;F<f.length;F++)_<(D=this.getStringUnitWidth(f[F],{font:y})*g)&&(_=D);return _!==0&&(M=f.length),{w:_/=x,h:Math.max((M*g*this.getLineHeightFactor()-g*(this.getLineHeightFactor()-1))/x,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var f=this.internal.__cell__.margins||n;return this.internal.__cell__.lastCell=new s(f.left,f.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var f;f=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var d=this.internal.__cell__.lastCell,g=this.internal.__cell__.padding,y=this.internal.__cell__.margins||n,x=this.internal.__cell__.tableHeaderRow,_=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===f.lineNumber?(f.x=(d.x||0)+(d.width||0),f.y=d.y||0):d.y+d.height+f.height+y.bottom>this.getPageHeight()?(this.cellAddPage(),f.y=y.top,_&&x&&(this.printHeaderRow(f.lineNumber,!0),f.y+=x[0].height)):f.y=d.y+d.height||f.y),f.text[0]!==void 0&&(this.rect(f.x,f.y,f.width,f.height,t===!0?"FD":void 0),f.align==="right"?this.text(f.text,f.x+f.width-g,f.y+g,{align:"right",baseline:"top"}):f.align==="center"?this.text(f.text,f.x+f.width/2,f.y+g,{align:"center",baseline:"top",maxWidth:f.width-g-g}):this.text(f.text,f.x+g,f.y+g,{align:"left",baseline:"top",maxWidth:f.width-g-g})),this.internal.__cell__.lastCell=f,this};e.table=function(f,d,g,y,x){if(r.call(this),!g)throw new Error("No data for PDF table.");var _,M,D,N,O=[],F=[],Y=[],Q={},le={},ce=[],xe=[],G=(x=x||{}).autoSize||!1,R=x.printHeaders!==!1,Z=x.css&&x.css["font-size"]!==void 0?16*x.css["font-size"]:x.fontSize||12,z=x.margins||Object.assign({width:this.getPageWidth()},n),I=typeof x.padding=="number"?x.padding:3,$=x.headerBackgroundColor||"#c8c8c8",U=x.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=R,this.internal.__cell__.margins=z,this.internal.__cell__.table_font_size=Z,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=$,this.internal.__cell__.headerTextColor=U,this.setFontSize(Z),y==null)F=O=Object.keys(g[0]),Y=O.map(function(){return"left"});else if(Array.isArray(y)&&Yi(y[0])==="object")for(O=y.map(function(Pe){return Pe.name}),F=y.map(function(Pe){return Pe.prompt||Pe.name||""}),Y=y.map(function(Pe){return Pe.align||"left"}),_=0;_<y.length;_+=1)le[y[_].name]=y[_].width*(19.049976/25.4);else Array.isArray(y)&&typeof y[0]=="string"&&(F=O=y,Y=O.map(function(){return"left"}));if(G||Array.isArray(y)&&typeof y[0]=="string")for(_=0;_<O.length;_+=1){for(Q[N=O[_]]=g.map(function(Pe){return Pe[N]}),this.setFont(void 0,"bold"),ce.push(this.getTextDimensions(F[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),M=Q[N],this.setFont(void 0,"normal"),D=0;D<M.length;D+=1)ce.push(this.getTextDimensions(M[D],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);le[N]=Math.max.apply(null,ce)+I+I,ce=[]}if(R){var W={};for(_=0;_<O.length;_+=1)W[O[_]]={},W[O[_]].text=F[_],W[O[_]].align=Y[_];var q=u.call(this,W,le);xe=O.map(function(Pe){return new s(f,d,le[Pe],q,W[Pe].text,void 0,W[Pe].align)}),this.setTableHeaderRow(xe),this.printHeaderRow(1,!1)}var ie=y.reduce(function(Pe,Ie){return Pe[Ie.name]=Ie.align,Pe},{});for(_=0;_<g.length;_+=1){"rowStart"in x&&x.rowStart instanceof Function&&x.rowStart({row:_,data:g[_]},this);var re=u.call(this,g[_],le);for(D=0;D<O.length;D+=1){var we=g[_][O[D]];"cellStart"in x&&x.cellStart instanceof Function&&x.cellStart({row:_,col:D,data:we},this),o.call(this,new s(f,d,le[O[D]],re,we,_+2,ie[O[D]]))}}return this.internal.__cell__.table_x=f,this.internal.__cell__.table_y=d,this};var u=function(f,d){var g=this.internal.__cell__.padding,y=this.internal.__cell__.table_font_size,x=this.internal.scaleFactor;return Object.keys(f).map(function(_){var M=f[_];return this.splitTextToSize(M.hasOwnProperty("text")?M.text:M,d[_]-g-g)},this).map(function(_){return this.getLineHeightFactor()*_.length*y/x+g+g},this).reduce(function(_,M){return Math.max(_,M)},0)};e.setTableHeaderRow=function(f){r.call(this),this.internal.__cell__.tableHeaderRow=f},e.printHeaderRow=function(f,d){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var g;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var y=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(y[0],y[1],y[2],y[3],void 0,-1)}this.setFont(void 0,"bold");for(var x=[],_=0;_<this.internal.__cell__.tableHeaderRow.length;_+=1){g=this.internal.__cell__.tableHeaderRow[_].clone(),d&&(g.y=this.internal.__cell__.margins.top||0,x.push(g)),g.lineNumber=f;var M=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,g),this.setTextColor(M)}x.length>0&&this.setTableHeaderRow(x),this.setFont(void 0,"normal"),t=!1}}(Ar.API);var Bx={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Ox=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],A1=Nx(Ox),Ix=[100,200,300,400,500,600,700,800,900],kF=Nx(Ix);function k1(e){var n=e.family.replace(/"|'/g,"").toLowerCase(),t=function(s){return Bx[s=s||"normal"]?s:"normal"}(e.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),i=function(s){return typeof A1[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:n,style:t,weight:r,stretch:i,src:e.src||[],ref:e.ref||{name:n,style:[i,t,r].join(" ")}}}function Db(e,n,t,r){var i;for(i=t;i>=0&&i<n.length;i+=r)if(e[n[i]])return e[n[i]];for(i=t;i>=0&&i<n.length;i-=r)if(e[n[i]])return e[n[i]]}var TF={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Nb={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Bb(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function DF(e,n,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},TF,t.genericFontFamilies||{}),s=null,o=null,u=0;u<n.length;++u)if(i[(s=k1(n[u])).family]&&(s.family=i[s.family]),e.hasOwnProperty(s.family)){o=e[s.family];break}if(!(o=o||e[r]))throw new Error("Could not find a font-family for the rule '"+Bb(s)+"' and default family '"+r+"'.");if(o=function(f,d){if(d[f])return d[f];var g=A1[f],y=g<=A1.normal?-1:1,x=Db(d,Ox,g,y);if(!x)throw new Error("Could not find a matching font-stretch value for "+f);return x}(s.stretch,o),o=function(f,d){if(d[f])return d[f];for(var g=Bx[f],y=0;y<g.length;++y)if(d[g[y]])return d[g[y]];throw new Error("Could not find a matching font-style for "+f)}(s.style,o),!(o=function(f,d){if(d[f])return d[f];if(f===400&&d[500])return d[500];if(f===500&&d[400])return d[400];var g=kF[f],y=Db(d,Ix,g,f<400?-1:1);if(!y)throw new Error("Could not find a matching font-weight for value "+f);return y}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+Bb(s)+"'.");return o}function Ob(e){return e.trimLeft()}function NF(e,n){for(var t=0;t<e.length;){if(e.charAt(t)===n)return[e.substring(0,t),e.substring(t+1)];t+=1}return null}function BF(e){var n=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return n===null?null:[n[0],e.substring(n[0].length)]}var xg,Ib,Rb,vv=["times"];(function(e){var n,t,r,i,s,o,u,f,d,g=function(A){return A=A||{},this.isStrokeTransparent=A.isStrokeTransparent||!1,this.strokeOpacity=A.strokeOpacity||1,this.strokeStyle=A.strokeStyle||"#000000",this.fillStyle=A.fillStyle||"#000000",this.isFillTransparent=A.isFillTransparent||!1,this.fillOpacity=A.fillOpacity||1,this.font=A.font||"10px sans-serif",this.textBaseline=A.textBaseline||"alphabetic",this.textAlign=A.textAlign||"left",this.lineWidth=A.lineWidth||1,this.lineJoin=A.lineJoin||"miter",this.lineCap=A.lineCap||"butt",this.path=A.path||[],this.transform=A.transform!==void 0?A.transform.clone():new f,this.globalCompositeOperation=A.globalCompositeOperation||"normal",this.globalAlpha=A.globalAlpha||1,this.clip_path=A.clip_path||[],this.currentPoint=A.currentPoint||new o,this.miterLimit=A.miterLimit||10,this.lastPoint=A.lastPoint||new o,this.lineDashOffset=A.lineDashOffset||0,this.lineDash=A.lineDash||[],this.margin=A.margin||[0,0,0,0],this.prevPageLastElemOffset=A.prevPageLastElemOffset||0,this.ignoreClearRect=typeof A.ignoreClearRect!="boolean"||A.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new y(this),n=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,u=this.internal.Rectangle,f=this.internal.Matrix,d=new g}]);var y=function(A){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var J=A;Object.defineProperty(this,"pdf",{get:function(){return J}});var fe=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return fe},set:function(ve){fe=!!ve}});var ne=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ne},set:function(ve){ne=!!ve}});var he=0;Object.defineProperty(this,"posX",{get:function(){return he},set:function(ve){isNaN(ve)||(he=ve)}});var ae=0;Object.defineProperty(this,"posY",{get:function(){return ae},set:function(ve){isNaN(ve)||(ae=ve)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(ve){var ge;typeof ve=="number"?ge=[ve,ve,ve,ve]:((ge=new Array(4))[0]=ve[0],ge[1]=ve.length>=2?ve[1]:ge[0],ge[2]=ve.length>=3?ve[2]:ge[0],ge[3]=ve.length>=4?ve[3]:ge[1]),d.margin=ge}});var T=!1;Object.defineProperty(this,"autoPaging",{get:function(){return T},set:function(ve){T=ve}});var ue=0;Object.defineProperty(this,"lastBreak",{get:function(){return ue},set:function(ve){ue=ve}});var ke=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ke},set:function(ve){ke=ve}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(ve){ve instanceof g&&(d=ve)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(ve){d.path=ve}});var Ce=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ce},set:function(ve){Ce=ve}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ve){var ge;ge=x(ve),this.ctx.fillStyle=ge.style,this.ctx.isFillTransparent=ge.a===0,this.ctx.fillOpacity=ge.a,this.pdf.setFillColor(ge.r,ge.g,ge.b,{a:ge.a}),this.pdf.setTextColor(ge.r,ge.g,ge.b,{a:ge.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ve){var ge=x(ve);this.ctx.strokeStyle=ge.style,this.ctx.isStrokeTransparent=ge.a===0,this.ctx.strokeOpacity=ge.a,ge.a===0?this.pdf.setDrawColor(255,255,255):(ge.a,this.pdf.setDrawColor(ge.r,ge.g,ge.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ve){["butt","round","square"].indexOf(ve)!==-1&&(this.ctx.lineCap=ve,this.pdf.setLineCap(ve))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ve){isNaN(ve)||(this.ctx.lineWidth=ve,this.pdf.setLineWidth(ve))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ve){["bevel","round","miter"].indexOf(ve)!==-1&&(this.ctx.lineJoin=ve,this.pdf.setLineJoin(ve))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ve){isNaN(ve)||(this.ctx.miterLimit=ve,this.pdf.setMiterLimit(ve))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ve){this.ctx.textBaseline=ve}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ve){["right","end","center","left","start"].indexOf(ve)!==-1&&(this.ctx.textAlign=ve)}});var Ve=null;function K(ve,ge){if(Ve===null){var Ue=function(Qe){var Ke=[];return Object.keys(Qe).forEach(function(Ge){Qe[Ge].forEach(function(Xe){var ot=null;switch(Xe){case"bold":ot={family:Ge,weight:"bold"};break;case"italic":ot={family:Ge,style:"italic"};break;case"bolditalic":ot={family:Ge,weight:"bold",style:"italic"};break;case"":case"normal":ot={family:Ge}}ot!==null&&(ot.ref={name:Ge,style:Xe},Ke.push(ot))})}),Ke}(ve.getFontList());Ve=function(Qe){for(var Ke={},Ge=0;Ge<Qe.length;++Ge){var Xe=k1(Qe[Ge]),ot=Xe.family,kt=Xe.stretch,Ct=Xe.style,Ut=Xe.weight;Ke[ot]=Ke[ot]||{},Ke[ot][kt]=Ke[ot][kt]||{},Ke[ot][kt][Ct]=Ke[ot][kt][Ct]||{},Ke[ot][kt][Ct][Ut]=Xe}return Ke}(Ue.concat(ge))}return Ve}var pe=null;Object.defineProperty(this,"fontFaces",{get:function(){return pe},set:function(ve){Ve=null,pe=ve}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ve){var ge;if(this.ctx.font=ve,(ge=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ve))!==null){var Ue=ge[1],Qe=(ge[2],ge[3]),Ke=ge[4],Ge=(ge[5],ge[6]),Xe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ke)[2];Ke=Math.floor(Xe==="px"?parseFloat(Ke)*this.pdf.internal.scaleFactor:Xe==="em"?parseFloat(Ke)*this.pdf.getFontSize():parseFloat(Ke)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ke);var ot=function(et){var it,nt,Vt=[],Qt=et.trim();if(Qt==="")return vv;if(Qt in Nb)return[Nb[Qt]];for(;Qt!=="";){switch(nt=null,it=(Qt=Ob(Qt)).charAt(0)){case'"':case"'":nt=NF(Qt.substring(1),it);break;default:nt=BF(Qt)}if(nt===null||(Vt.push(nt[0]),(Qt=Ob(nt[1]))!==""&&Qt.charAt(0)!==","))return vv;Qt=Qt.replace(/^,/,"")}return Vt}(Ge);if(this.fontFaces){var kt=DF(K(this.pdf,this.fontFaces),ot.map(function(et){return{family:et,stretch:"normal",weight:Qe,style:Ue}}));this.pdf.setFont(kt.ref.name,kt.ref.style)}else{var Ct="";(Qe==="bold"||parseInt(Qe,10)>=700||Ue==="bold")&&(Ct="bold"),Ue==="italic"&&(Ct+="italic"),Ct.length===0&&(Ct="normal");for(var Ut="",Gt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},fn=0;fn<ot.length;fn++){if(this.pdf.internal.getFont(ot[fn],Ct,{noFallback:!0,disableWarning:!0})!==void 0){Ut=ot[fn];break}if(Ct==="bolditalic"&&this.pdf.internal.getFont(ot[fn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ut=ot[fn],Ct="bold";else if(this.pdf.internal.getFont(ot[fn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ut=ot[fn],Ct="normal";break}}if(Ut===""){for(var pn=0;pn<ot.length;pn++)if(Gt[ot[pn]]){Ut=Gt[ot[pn]];break}}Ut=Ut===""?"Times":Ut,this.pdf.setFont(Ut,Ct)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ve){this.ctx.globalCompositeOperation=ve}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ve){this.ctx.globalAlpha=ve}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ve){this.ctx.lineDashOffset=ve,Ie.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ve){this.ctx.lineDash=ve,Ie.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ve){this.ctx.ignoreClearRect=!!ve}})};y.prototype.setLineDash=function(A){this.lineDash=A},y.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},y.prototype.fill=function(){Q.call(this,"fill",!1)},y.prototype.stroke=function(){Q.call(this,"stroke",!1)},y.prototype.beginPath=function(){this.path=[{type:"begin"}]},y.prototype.moveTo=function(A,J){if(isNaN(A)||isNaN(J))throw so.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var fe=this.ctx.transform.applyToPoint(new o(A,J));this.path.push({type:"mt",x:fe.x,y:fe.y}),this.ctx.lastPoint=new o(A,J)},y.prototype.closePath=function(){var A=new o(0,0),J=0;for(J=this.path.length-1;J!==-1;J--)if(this.path[J].type==="begin"&&Yi(this.path[J+1])==="object"&&typeof this.path[J+1].x=="number"){A=new o(this.path[J+1].x,this.path[J+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(A.x,A.y)},y.prototype.lineTo=function(A,J){if(isNaN(A)||isNaN(J))throw so.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var fe=this.ctx.transform.applyToPoint(new o(A,J));this.path.push({type:"lt",x:fe.x,y:fe.y}),this.ctx.lastPoint=new o(fe.x,fe.y)},y.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Q.call(this,null,!0)},y.prototype.quadraticCurveTo=function(A,J,fe,ne){if(isNaN(fe)||isNaN(ne)||isNaN(A)||isNaN(J))throw so.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var he=this.ctx.transform.applyToPoint(new o(fe,ne)),ae=this.ctx.transform.applyToPoint(new o(A,J));this.path.push({type:"qct",x1:ae.x,y1:ae.y,x:he.x,y:he.y}),this.ctx.lastPoint=new o(he.x,he.y)},y.prototype.bezierCurveTo=function(A,J,fe,ne,he,ae){if(isNaN(he)||isNaN(ae)||isNaN(A)||isNaN(J)||isNaN(fe)||isNaN(ne))throw so.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var T=this.ctx.transform.applyToPoint(new o(he,ae)),ue=this.ctx.transform.applyToPoint(new o(A,J)),ke=this.ctx.transform.applyToPoint(new o(fe,ne));this.path.push({type:"bct",x1:ue.x,y1:ue.y,x2:ke.x,y2:ke.y,x:T.x,y:T.y}),this.ctx.lastPoint=new o(T.x,T.y)},y.prototype.arc=function(A,J,fe,ne,he,ae){if(isNaN(A)||isNaN(J)||isNaN(fe)||isNaN(ne)||isNaN(he))throw so.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ae=!!ae,!this.ctx.transform.isIdentity){var T=this.ctx.transform.applyToPoint(new o(A,J));A=T.x,J=T.y;var ue=this.ctx.transform.applyToPoint(new o(0,fe)),ke=this.ctx.transform.applyToPoint(new o(0,0));fe=Math.sqrt(Math.pow(ue.x-ke.x,2)+Math.pow(ue.y-ke.y,2))}Math.abs(he-ne)>=2*Math.PI&&(ne=0,he=2*Math.PI),this.path.push({type:"arc",x:A,y:J,radius:fe,startAngle:ne,endAngle:he,counterclockwise:ae})},y.prototype.arcTo=function(A,J,fe,ne,he){throw new Error("arcTo not implemented.")},y.prototype.rect=function(A,J,fe,ne){if(isNaN(A)||isNaN(J)||isNaN(fe)||isNaN(ne))throw so.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(A,J),this.lineTo(A+fe,J),this.lineTo(A+fe,J+ne),this.lineTo(A,J+ne),this.lineTo(A,J),this.lineTo(A+fe,J),this.lineTo(A,J)},y.prototype.fillRect=function(A,J,fe,ne){if(isNaN(A)||isNaN(J)||isNaN(fe)||isNaN(ne))throw so.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!_.call(this)){var he={};this.lineCap!=="butt"&&(he.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(he.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(A,J,fe,ne),this.fill(),he.hasOwnProperty("lineCap")&&(this.lineCap=he.lineCap),he.hasOwnProperty("lineJoin")&&(this.lineJoin=he.lineJoin)}},y.prototype.strokeRect=function(A,J,fe,ne){if(isNaN(A)||isNaN(J)||isNaN(fe)||isNaN(ne))throw so.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");M.call(this)||(this.beginPath(),this.rect(A,J,fe,ne),this.stroke())},y.prototype.clearRect=function(A,J,fe,ne){if(isNaN(A)||isNaN(J)||isNaN(fe)||isNaN(ne))throw so.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(A,J,fe,ne))},y.prototype.save=function(A){A=typeof A!="boolean"||A;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,fe=0;fe<this.pdf.internal.getNumberOfPages();fe++)this.pdf.setPage(fe+1),this.pdf.internal.out("q");if(this.pdf.setPage(J),A){this.ctx.fontSize=this.pdf.internal.getFontSize();var ne=new g(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ne}},y.prototype.restore=function(A){A=typeof A!="boolean"||A;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,fe=0;fe<this.pdf.internal.getNumberOfPages();fe++)this.pdf.setPage(fe+1),this.pdf.internal.out("Q");this.pdf.setPage(J),A&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},y.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var x=function(A){var J,fe,ne,he;if(A.isCanvasGradient===!0&&(A=A.getColor()),!A)return{r:0,g:0,b:0,a:0,style:A};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(A))J=0,fe=0,ne=0,he=0;else{var ae=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(A);if(ae!==null)J=parseInt(ae[1]),fe=parseInt(ae[2]),ne=parseInt(ae[3]),he=1;else if((ae=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(A))!==null)J=parseInt(ae[1]),fe=parseInt(ae[2]),ne=parseInt(ae[3]),he=parseFloat(ae[4]);else{if(he=1,typeof A=="string"&&A.charAt(0)!=="#"){var T=new Px(A);A=T.ok?T.toHex():"#000000"}A.length===4?(J=A.substring(1,2),J+=J,fe=A.substring(2,3),fe+=fe,ne=A.substring(3,4),ne+=ne):(J=A.substring(1,3),fe=A.substring(3,5),ne=A.substring(5,7)),J=parseInt(J,16),fe=parseInt(fe,16),ne=parseInt(ne,16)}}return{r:J,g:fe,b:ne,a:he,style:A}},_=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},M=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};y.prototype.fillText=function(A,J,fe,ne){if(isNaN(J)||isNaN(fe)||typeof A!="string")throw so.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ne=isNaN(ne)?void 0:ne,!_.call(this)){var he=re(this.ctx.transform.rotation),ae=this.ctx.transform.scaleX;I.call(this,{text:A,x:J,y:fe,scale:ae,angle:he,align:this.textAlign,maxWidth:ne})}},y.prototype.strokeText=function(A,J,fe,ne){if(isNaN(J)||isNaN(fe)||typeof A!="string")throw so.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!M.call(this)){ne=isNaN(ne)?void 0:ne;var he=re(this.ctx.transform.rotation),ae=this.ctx.transform.scaleX;I.call(this,{text:A,x:J,y:fe,scale:ae,renderingMode:"stroke",angle:he,align:this.textAlign,maxWidth:ne})}},y.prototype.measureText=function(A){if(typeof A!="string")throw so.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var J=this.pdf,fe=this.pdf.internal.scaleFactor,ne=J.internal.getFontSize(),he=J.getStringUnitWidth(A)*ne/J.internal.scaleFactor,ae=function(T){var ue=(T=T||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ue}}),this};return new ae({width:he*=Math.round(96*fe/72*1e4)/1e4})},y.prototype.scale=function(A,J){if(isNaN(A)||isNaN(J))throw so.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var fe=new f(A,0,0,J,0,0);this.ctx.transform=this.ctx.transform.multiply(fe)},y.prototype.rotate=function(A){if(isNaN(A))throw so.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var J=new f(Math.cos(A),Math.sin(A),-Math.sin(A),Math.cos(A),0,0);this.ctx.transform=this.ctx.transform.multiply(J)},y.prototype.translate=function(A,J){if(isNaN(A)||isNaN(J))throw so.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var fe=new f(1,0,0,1,A,J);this.ctx.transform=this.ctx.transform.multiply(fe)},y.prototype.transform=function(A,J,fe,ne,he,ae){if(isNaN(A)||isNaN(J)||isNaN(fe)||isNaN(ne)||isNaN(he)||isNaN(ae))throw so.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var T=new f(A,J,fe,ne,he,ae);this.ctx.transform=this.ctx.transform.multiply(T)},y.prototype.setTransform=function(A,J,fe,ne,he,ae){A=isNaN(A)?1:A,J=isNaN(J)?0:J,fe=isNaN(fe)?0:fe,ne=isNaN(ne)?1:ne,he=isNaN(he)?0:he,ae=isNaN(ae)?0:ae,this.ctx.transform=new f(A,J,fe,ne,he,ae)};var D=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};y.prototype.drawImage=function(A,J,fe,ne,he,ae,T,ue,ke){var Ce=this.pdf.getImageProperties(A),Ve=1,K=1,pe=1,ve=1;ne!==void 0&&ue!==void 0&&(pe=ue/ne,ve=ke/he,Ve=Ce.width/ne*ue/ne,K=Ce.height/he*ke/he),ae===void 0&&(ae=J,T=fe,J=0,fe=0),ne!==void 0&&ue===void 0&&(ue=ne,ke=he),ne===void 0&&ue===void 0&&(ue=Ce.width,ke=Ce.height);for(var ge,Ue=this.ctx.transform.decompose(),Qe=re(Ue.rotate.shx),Ke=new f,Ge=(Ke=(Ke=(Ke=Ke.multiply(Ue.translate)).multiply(Ue.skew)).multiply(Ue.scale)).applyToRectangle(new u(ae-J*pe,T-fe*ve,ne*Ve,he*K)),Xe=N.call(this,Ge),ot=[],kt=0;kt<Xe.length;kt+=1)ot.indexOf(Xe[kt])===-1&&ot.push(Xe[kt]);if(Y(ot),this.autoPaging)for(var Ct=ot[0],Ut=ot[ot.length-1],Gt=Ct;Gt<Ut+1;Gt++){this.pdf.setPage(Gt);var fn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],pn=Gt===1?this.posY+this.margin[0]:this.margin[0],et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],it=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],nt=Gt===1?0:et+(Gt-2)*it;if(this.ctx.clip_path.length!==0){var Vt=this.path;ge=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(ge,this.posX+this.margin[3],-nt+pn+this.ctx.prevPageLastElemOffset),le.call(this,"fill",!0),this.path=Vt}var Qt=JSON.parse(JSON.stringify(Ge));Qt=F([Qt],this.posX+this.margin[3],-nt+pn+this.ctx.prevPageLastElemOffset)[0];var On=(Gt>Ct||Gt<Ut)&&D.call(this);On&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],fn,it,null).clip().discardPath()),this.pdf.addImage(A,"JPEG",Qt.x,Qt.y,Qt.w,Qt.h,null,null,Qe),On&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(A,"JPEG",Ge.x,Ge.y,Ge.w,Ge.h,null,null,Qe)};var N=function(A,J,fe){var ne=[];J=J||this.pdf.internal.pageSize.width,fe=fe||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var he=this.posY+this.ctx.prevPageLastElemOffset;switch(A.type){default:case"mt":case"lt":ne.push(Math.floor((A.y+he)/fe)+1);break;case"arc":ne.push(Math.floor((A.y+he-A.radius)/fe)+1),ne.push(Math.floor((A.y+he+A.radius)/fe)+1);break;case"qct":var ae=we(this.ctx.lastPoint.x,this.ctx.lastPoint.y,A.x1,A.y1,A.x,A.y);ne.push(Math.floor((ae.y+he)/fe)+1),ne.push(Math.floor((ae.y+ae.h+he)/fe)+1);break;case"bct":var T=Pe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,A.x1,A.y1,A.x2,A.y2,A.x,A.y);ne.push(Math.floor((T.y+he)/fe)+1),ne.push(Math.floor((T.y+T.h+he)/fe)+1);break;case"rect":ne.push(Math.floor((A.y+he)/fe)+1),ne.push(Math.floor((A.y+A.h+he)/fe)+1)}for(var ue=0;ue<ne.length;ue+=1)for(;this.pdf.internal.getNumberOfPages()<ne[ue];)O.call(this);return ne},O=function(){var A=this.fillStyle,J=this.strokeStyle,fe=this.font,ne=this.lineCap,he=this.lineWidth,ae=this.lineJoin;this.pdf.addPage(),this.fillStyle=A,this.strokeStyle=J,this.font=fe,this.lineCap=ne,this.lineWidth=he,this.lineJoin=ae},F=function(A,J,fe){for(var ne=0;ne<A.length;ne++)switch(A[ne].type){case"bct":A[ne].x2+=J,A[ne].y2+=fe;case"qct":A[ne].x1+=J,A[ne].y1+=fe;case"mt":case"lt":case"arc":default:A[ne].x+=J,A[ne].y+=fe}return A},Y=function(A){return A.sort(function(J,fe){return J-fe})},Q=function(A,J){for(var fe,ne,he=this.fillStyle,ae=this.strokeStyle,T=this.lineCap,ue=this.lineWidth,ke=Math.abs(ue*this.ctx.transform.scaleX),Ce=this.lineJoin,Ve=JSON.parse(JSON.stringify(this.path)),K=JSON.parse(JSON.stringify(this.path)),pe=[],ve=0;ve<K.length;ve++)if(K[ve].x!==void 0)for(var ge=N.call(this,K[ve]),Ue=0;Ue<ge.length;Ue+=1)pe.indexOf(ge[Ue])===-1&&pe.push(ge[Ue]);for(var Qe=0;Qe<pe.length;Qe++)for(;this.pdf.internal.getNumberOfPages()<pe[Qe];)O.call(this);if(Y(pe),this.autoPaging)for(var Ke=pe[0],Ge=pe[pe.length-1],Xe=Ke;Xe<Ge+1;Xe++){this.pdf.setPage(Xe),this.fillStyle=he,this.strokeStyle=ae,this.lineCap=T,this.lineWidth=ke,this.lineJoin=Ce;var ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],kt=Xe===1?this.posY+this.margin[0]:this.margin[0],Ct=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ut=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Gt=Xe===1?0:Ct+(Xe-2)*Ut;if(this.ctx.clip_path.length!==0){var fn=this.path;fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(fe,this.posX+this.margin[3],-Gt+kt+this.ctx.prevPageLastElemOffset),le.call(this,A,!0),this.path=fn}if(ne=JSON.parse(JSON.stringify(Ve)),this.path=F(ne,this.posX+this.margin[3],-Gt+kt+this.ctx.prevPageLastElemOffset),J===!1||Xe===0){var pn=(Xe>Ke||Xe<Ge)&&D.call(this);pn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ot,Ut,null).clip().discardPath()),le.call(this,A,J),pn&&this.pdf.restoreGraphicsState()}this.lineWidth=ue}else this.lineWidth=ke,le.call(this,A,J),this.lineWidth=ue;this.path=Ve},le=function(A,J){if((A!=="stroke"||J||!M.call(this))&&(A==="stroke"||J||!_.call(this))){for(var fe,ne,he=[],ae=this.path,T=0;T<ae.length;T++){var ue=ae[T];switch(ue.type){case"begin":he.push({begin:!0});break;case"close":he.push({close:!0});break;case"mt":he.push({start:ue,deltas:[],abs:[]});break;case"lt":var ke=he.length;if(ae[T-1]&&!isNaN(ae[T-1].x)&&(fe=[ue.x-ae[T-1].x,ue.y-ae[T-1].y],ke>0)){for(;ke>=0;ke--)if(he[ke-1].close!==!0&&he[ke-1].begin!==!0){he[ke-1].deltas.push(fe),he[ke-1].abs.push(ue);break}}break;case"bct":fe=[ue.x1-ae[T-1].x,ue.y1-ae[T-1].y,ue.x2-ae[T-1].x,ue.y2-ae[T-1].y,ue.x-ae[T-1].x,ue.y-ae[T-1].y],he[he.length-1].deltas.push(fe);break;case"qct":var Ce=ae[T-1].x+2/3*(ue.x1-ae[T-1].x),Ve=ae[T-1].y+2/3*(ue.y1-ae[T-1].y),K=ue.x+2/3*(ue.x1-ue.x),pe=ue.y+2/3*(ue.y1-ue.y),ve=ue.x,ge=ue.y;fe=[Ce-ae[T-1].x,Ve-ae[T-1].y,K-ae[T-1].x,pe-ae[T-1].y,ve-ae[T-1].x,ge-ae[T-1].y],he[he.length-1].deltas.push(fe);break;case"arc":he.push({deltas:[],abs:[],arc:!0}),Array.isArray(he[he.length-1].abs)&&he[he.length-1].abs.push(ue)}}ne=J?null:A==="stroke"?"stroke":"fill";for(var Ue=!1,Qe=0;Qe<he.length;Qe++)if(he[Qe].arc)for(var Ke=he[Qe].abs,Ge=0;Ge<Ke.length;Ge++){var Xe=Ke[Ge];Xe.type==="arc"?G.call(this,Xe.x,Xe.y,Xe.radius,Xe.startAngle,Xe.endAngle,Xe.counterclockwise,void 0,J,!Ue):$.call(this,Xe.x,Xe.y),Ue=!0}else if(he[Qe].close===!0)this.pdf.internal.out("h"),Ue=!1;else if(he[Qe].begin!==!0){var ot=he[Qe].start.x,kt=he[Qe].start.y;U.call(this,he[Qe].deltas,ot,kt),Ue=!0}ne&&R.call(this,ne),J&&Z.call(this)}},ce=function(A){var J=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,fe=J*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return A-fe;case"top":return A+J-fe;case"hanging":return A+J-2*fe;case"middle":return A+J/2-fe;case"ideographic":return A;case"alphabetic":default:return A}},xe=function(A){return A+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};y.prototype.createLinearGradient=function(){var A=function(){};return A.colorStops=[],A.addColorStop=function(J,fe){this.colorStops.push([J,fe])},A.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},A.isCanvasGradient=!0,A},y.prototype.createPattern=function(){return this.createLinearGradient()},y.prototype.createRadialGradient=function(){return this.createLinearGradient()};var G=function(A,J,fe,ne,he,ae,T,ue,ke){for(var Ce=q.call(this,fe,ne,he,ae),Ve=0;Ve<Ce.length;Ve++){var K=Ce[Ve];Ve===0&&(ke?z.call(this,K.x1+A,K.y1+J):$.call(this,K.x1+A,K.y1+J)),W.call(this,A,J,K.x2,K.y2,K.x3,K.y3,K.x4,K.y4)}ue?Z.call(this):R.call(this,T)},R=function(A){switch(A){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Z=function(){this.pdf.clip(),this.pdf.discardPath()},z=function(A,J){this.pdf.internal.out(t(A)+" "+r(J)+" m")},I=function(A){var J;switch(A.align){case"right":case"end":J="right";break;case"center":J="center";break;case"left":case"start":default:J="left"}var fe=this.pdf.getTextDimensions(A.text),ne=ce.call(this,A.y),he=xe.call(this,ne)-fe.h,ae=this.ctx.transform.applyToPoint(new o(A.x,ne)),T=this.ctx.transform.decompose(),ue=new f;ue=(ue=(ue=ue.multiply(T.translate)).multiply(T.skew)).multiply(T.scale);for(var ke,Ce,Ve,K=this.ctx.transform.applyToRectangle(new u(A.x,ne,fe.w,fe.h)),pe=ue.applyToRectangle(new u(A.x,he,fe.w,fe.h)),ve=N.call(this,pe),ge=[],Ue=0;Ue<ve.length;Ue+=1)ge.indexOf(ve[Ue])===-1&&ge.push(ve[Ue]);if(Y(ge),this.autoPaging)for(var Qe=ge[0],Ke=ge[ge.length-1],Ge=Qe;Ge<Ke+1;Ge++){this.pdf.setPage(Ge);var Xe=Ge===1?this.posY+this.margin[0]:this.margin[0],ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],kt=this.pdf.internal.pageSize.height-this.margin[2],Ct=kt-this.margin[0],Ut=this.pdf.internal.pageSize.width-this.margin[1],Gt=Ut-this.margin[3],fn=Ge===1?0:ot+(Ge-2)*Ct;if(this.ctx.clip_path.length!==0){var pn=this.path;ke=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(ke,this.posX+this.margin[3],-1*fn+Xe),le.call(this,"fill",!0),this.path=pn}var et=F([JSON.parse(JSON.stringify(pe))],this.posX+this.margin[3],-fn+Xe+this.ctx.prevPageLastElemOffset)[0];A.scale>=.01&&(Ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ce*A.scale),Ve=this.lineWidth,this.lineWidth=Ve*A.scale);var it=this.autoPaging!=="text";if(it||et.y+et.h<=kt){if(it||et.y>=Xe&&et.x<=Ut){var nt=it?A.text:this.pdf.splitTextToSize(A.text,A.maxWidth||Ut-et.x)[0],Vt=F([JSON.parse(JSON.stringify(K))],this.posX+this.margin[3],-fn+Xe+this.ctx.prevPageLastElemOffset)[0],Qt=it&&(Ge>Qe||Ge<Ke)&&D.call(this);Qt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Gt,Ct,null).clip().discardPath()),this.pdf.text(nt,Vt.x,Vt.y,{angle:A.angle,align:J,renderingMode:A.renderingMode}),Qt&&this.pdf.restoreGraphicsState()}}else et.y<kt&&(this.ctx.prevPageLastElemOffset+=kt-et.y);A.scale>=.01&&(this.pdf.setFontSize(Ce),this.lineWidth=Ve)}else A.scale>=.01&&(Ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ce*A.scale),Ve=this.lineWidth,this.lineWidth=Ve*A.scale),this.pdf.text(A.text,ae.x+this.posX,ae.y+this.posY,{angle:A.angle,align:J,renderingMode:A.renderingMode,maxWidth:A.maxWidth}),A.scale>=.01&&(this.pdf.setFontSize(Ce),this.lineWidth=Ve)},$=function(A,J,fe,ne){fe=fe||0,ne=ne||0,this.pdf.internal.out(t(A+fe)+" "+r(J+ne)+" l")},U=function(A,J,fe){return this.pdf.lines(A,J,fe,null,null)},W=function(A,J,fe,ne,he,ae,T,ue){this.pdf.internal.out([n(i(fe+A)),n(s(ne+J)),n(i(he+A)),n(s(ae+J)),n(i(T+A)),n(s(ue+J)),"c"].join(" "))},q=function(A,J,fe,ne){for(var he=2*Math.PI,ae=Math.PI/2;J>fe;)J-=he;var T=Math.abs(fe-J);T<he&&ne&&(T=he-T);for(var ue=[],ke=ne?-1:1,Ce=J;T>1e-5;){var Ve=Ce+ke*Math.min(T,ae);ue.push(ie.call(this,A,Ce,Ve)),T-=Math.abs(Ve-Ce),Ce=Ve}return ue},ie=function(A,J,fe){var ne=(fe-J)/2,he=A*Math.cos(ne),ae=A*Math.sin(ne),T=he,ue=-ae,ke=T*T+ue*ue,Ce=ke+T*he+ue*ae,Ve=4/3*(Math.sqrt(2*ke*Ce)-Ce)/(T*ae-ue*he),K=T-Ve*ue,pe=ue+Ve*T,ve=K,ge=-pe,Ue=ne+J,Qe=Math.cos(Ue),Ke=Math.sin(Ue);return{x1:A*Math.cos(J),y1:A*Math.sin(J),x2:K*Qe-pe*Ke,y2:K*Ke+pe*Qe,x3:ve*Qe-ge*Ke,y3:ve*Ke+ge*Qe,x4:A*Math.cos(fe),y4:A*Math.sin(fe)}},re=function(A){return 180*A/Math.PI},we=function(A,J,fe,ne,he,ae){var T=A+.5*(fe-A),ue=J+.5*(ne-J),ke=he+.5*(fe-he),Ce=ae+.5*(ne-ae),Ve=Math.min(A,he,T,ke),K=Math.max(A,he,T,ke),pe=Math.min(J,ae,ue,Ce),ve=Math.max(J,ae,ue,Ce);return new u(Ve,pe,K-Ve,ve-pe)},Pe=function(A,J,fe,ne,he,ae,T,ue){var ke,Ce,Ve,K,pe,ve,ge,Ue,Qe,Ke,Ge,Xe,ot,kt,Ct=fe-A,Ut=ne-J,Gt=he-fe,fn=ae-ne,pn=T-he,et=ue-ae;for(Ce=0;Ce<41;Ce++)Qe=(ge=(Ve=A+(ke=Ce/40)*Ct)+ke*((pe=fe+ke*Gt)-Ve))+ke*(pe+ke*(he+ke*pn-pe)-ge),Ke=(Ue=(K=J+ke*Ut)+ke*((ve=ne+ke*fn)-K))+ke*(ve+ke*(ae+ke*et-ve)-Ue),Ce==0?(Ge=Qe,Xe=Ke,ot=Qe,kt=Ke):(Ge=Math.min(Ge,Qe),Xe=Math.min(Xe,Ke),ot=Math.max(ot,Qe),kt=Math.max(kt,Ke));return new u(Math.round(Ge),Math.round(Xe),Math.round(ot-Ge),Math.round(kt-Xe))},Ie=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var A,J,fe=(A=this.ctx.lineDash,J=this.ctx.lineDashOffset,JSON.stringify({lineDash:A,lineDashOffset:J}));this.prevLineDash!==fe&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=fe)}}})(Ar.API),function(e){var n=function(s){var o,u,f,d,g,y,x,_,M,D;for(u=[],f=0,d=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;d>f;f+=4)(g=(s.charCodeAt(f)<<24)+(s.charCodeAt(f+1)<<16)+(s.charCodeAt(f+2)<<8)+s.charCodeAt(f+3))!==0?(y=(g=((g=((g=((g=(g-(D=g%85))/85)-(M=g%85))/85)-(_=g%85))/85)-(x=g%85))/85)%85,u.push(y+33,x+33,_+33,M+33,D+33)):u.push(122);return function(N,O){for(var F=O;F>0;F--)N.pop()}(u,o.length),String.fromCharCode.apply(String,u)+"~>"},t=function(s){var o,u,f,d,g,y=String,x="length",_=255,M="charCodeAt",D="slice",N="replace";for(s[D](-2),s=s[D](0,-2)[N](/\s/g,"")[N]("z","!!!!!"),f=[],d=0,g=(s+=o="uuuuu"[D](s[x]%5||5))[x];g>d;d+=5)u=52200625*(s[M](d)-33)+614125*(s[M](d+1)-33)+7225*(s[M](d+2)-33)+85*(s[M](d+3)-33)+(s[M](d+4)-33),f.push(_&u>>24,_&u>>16,_&u>>8,_&u);return function(O,F){for(var Y=F;Y>0;Y--)O.pop()}(f,o[x]),y.fromCharCode.apply(y,f)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var u="",f=0;f<s.length;f+=2)u+=String.fromCharCode("0x"+(s[f]+s[f+1]));return u},i=function(s){for(var o=new Uint8Array(s.length),u=s.length;u--;)o[u]=s.charCodeAt(u);return s=(o=S1(o)).reduce(function(f,d){return f+String.fromCharCode(d)},"")};e.processDataByFilters=function(s,o){var u=0,f=s||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),u=0;u<o.length;u+=1)switch(o[u]){case"ASCII85Decode":case"/ASCII85Decode":f=t(f),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=n(f),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=r(f),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=f.split("").map(function(g){return("0"+g.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=i(f),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[u]+'" is not implemented')}return{data:f,reverseChain:d.reverse().join(" ")}}}(Ar.API),function(e){e.loadFile=function(n,t,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var u=void 0;try{u=function(f,d,g){var y=new XMLHttpRequest,x=0,_=function(M){var D=M.length,N=[],O=String.fromCharCode;for(x=0;x<D;x+=1)N.push(O(255&M.charCodeAt(x)));return N.join("")};if(y.open("GET",f,!d),y.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(y.onload=function(){y.status===200?g(_(this.responseText)):g(void 0)}),y.send(null),d&&y.status===200)return _(y.responseText)}(i,s,o)}catch{}return u}(n,t,r)},e.loadImageFile=e.loadFile}(Ar.API),function(e){function n(){return(Nr.html2canvas?Promise.resolve(Nr.html2canvas):Yf(()=>import("./html2canvas.esm.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function t(){return(Nr.DOMPurify?Promise.resolve(Nr.DOMPurify):Yf(()=>import("./purify.es.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var u=Yi(o);return u==="undefined"?"undefined":u==="string"||o instanceof String?"string":u==="number"||o instanceof Number?"number":u==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":u==="object"?"object":"unknown"},i=function(o,u){var f=document.createElement(o);for(var d in u.className&&(f.className=u.className),u.innerHTML&&u.dompurify&&(f.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)f.style[d]=u.style[d];return f},s=function o(u){var f=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),f);return d=(d=d.setProgress(1,o,1,[o])).set(u)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,u){return o.__proto__=u||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,u){return this.then(function(){switch(u=u||function(f){switch(r(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(t).then(function(f){return this.set({src:i("div",{innerHTML:o,dompurify:f})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=function f(d,g){for(var y=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),x=d.firstChild;x;x=x.nextSibling)g!==!0&&x.nodeType===1&&x.nodeName==="SCRIPT"||y.appendChild(f(x,g));return d.nodeType===1&&(d.nodeName==="CANVAS"?(y.width=d.width,y.height=d.height,y.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(y.value=d.value),y.addEventListener("load",function(){y.scrollTop=d.scrollTop,y.scrollLeft=d.scrollLeft},!0)),y}(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(n).then(function(u){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,u(this.prop.container,f)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(n).then(function(u){var f=this.opt.jsPDF,d=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,y=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete y.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=d,d)for(var x=0;x<d.length;++x){var _=d[x],M=_.src.find(function(D){return D.format==="truetype"});M&&f.addFont(M.url,_.ref.name,_.ref.style)}return y.windowHeight=y.windowHeight||0,y.windowHeight=y.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):y.windowHeight,f.context2d.save(!0),u(this.prop.container,y)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,u,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(o,u):this.outputPdf(o,u)},s.prototype.outputPdf=function(o,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,u)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var u=Object.keys(o||{}).map(function(f){if(f in s.template.prop)return function(){this.prop[f]=o[f]};switch(f){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[f]=o[f]}}},this);return this.then(function(){return this.thenList(u)})},s.prototype.get=function(o,u){return this.then(function(){var f=o in s.template.prop?this.prop[o]:this.opt[o];return u?u(f):f})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function u(f,d){return Math.floor(f*d/72*96)}return this.then(function(){(o=o||Ar.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:u(o.inner.width,o.k),height:u(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,u,f,d){return o!=null&&(this.progress.val=o),u!=null&&(this.progress.state=u),f!=null&&(this.progress.n=f),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,u,f,d){return this.setProgress(o?this.progress.val+o:null,u||null,f?this.progress.n+f:null,d?this.progress.stack.concat(d):null)},s.prototype.then=function(o,u){var f=this;return this.thenCore(o,u,function(d,g){return f.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(y){return f.updateProgress(null,d),y}).then(d,g).then(function(y){return f.updateProgress(1),y})})},s.prototype.thenCore=function(o,u,f){f=f||Promise.prototype.then,o&&(o=o.bind(this)),u&&(u=u.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),g=f.call(d,o,u);return s.convert(g,this.__proto__)},s.prototype.thenExternal=function(o,u){return Promise.prototype.then.call(this,o,u)},s.prototype.thenList=function(o){var u=this;return o.forEach(function(f){u=u.thenCore(f)}),u},s.prototype.catch=function(o){o&&(o=o.bind(this));var u=Promise.prototype.catch.call(this,o);return s.convert(u,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Ar.getPageSize=function(o,u,f){if(Yi(o)==="object"){var d=o;o=d.orientation,u=d.unit||u,f=d.format||f}u=u||"mm",f=f||"a4",o=(""+(o||"P")).toLowerCase();var g,y=(""+f).toLowerCase(),x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+u}var _,M=0,D=0;if(x.hasOwnProperty(y))M=x[y][1]/g,D=x[y][0]/g;else try{M=f[1],D=f[0]}catch{throw new Error("Invalid format: "+f)}if(o==="p"||o==="portrait")o="p",D>M&&(_=D,D=M,M=_);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",M>D&&(_=D,D=M,M=_)}return{width:D,height:M,unit:u,k:g,orientation:o}},e.html=function(o,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(k1):null;var f=new s(u);return u.worker?f:f.from(o).doCallback()}}(Ar.API),Ar.API.addJS=function(e){return Rb=e,this.internal.events.subscribe("postPutResources",function(){xg=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(xg+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Ib=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Rb+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){xg!==void 0&&Ib!==void 0&&this.internal.out("/Names <</JavaScript "+xg+" 0 R>>")}),this},function(e){var n;e.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],u=r.exec(o);if(u!=null){var f=u[1];t.internal.newObjectDeferredBegin(f,!1)}t.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,g=[];for(s=0;s<d;s++){var y=t.internal.newObject();g.push(y);var x=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+x.objId+" 0 R /XYZ null null null]>> endobj")}var _=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<g.length;s++)t.internal.write("(page_"+(s+1)+")"+g[s]+" 0 R");t.internal.write(" ] >>","endobj"),n=t.internal.newObject(),t.internal.write("<< /Dests "+_+" 0 R"),t.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+n+" 0 R"))}]),e.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var u=this.count=this.count_r({count:0},o);if(u>0&&this.line("/Count "+u),o.options&&o.options.pageNumber){var f=t.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var d=0;d<r.children.length;d++)this.renderItems(r.children[d])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(Ar.API),function(e){var n=[192,193,194,195,196,197,198,199];e.processJPEG=function(t,r,i,s,o,u){var f,d=this.decode.DCT_DECODE,g=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=o||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(f=function(y){for(var x,_=256*y.charCodeAt(4)+y.charCodeAt(5),M=y.length,D={width:0,height:0,numcomponents:1},N=4;N<M;N+=2){if(N+=_,n.indexOf(y.charCodeAt(N+1))!==-1){x=256*y.charCodeAt(N+5)+y.charCodeAt(N+6),D={width:256*y.charCodeAt(N+7)+y.charCodeAt(N+8),height:x,numcomponents:y.charCodeAt(N+9)};break}_=256*y.charCodeAt(N+2)+y.charCodeAt(N+3)}return D}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}g={data:t,width:f.width,height:f.height,colorSpace:u,bitsPerComponent:8,filter:d,index:r,alias:i}}return g}}(Ar.API);var kh,Lg,Fb,jb,zb,OF=function(){var e,n,t;function r(s){var o,u,f,d,g,y,x,_,M,D,N,O,F,Y;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},y=null;;){switch(o=this.readUInt32(),M=(function(){var Q,le;for(le=[],Q=0;Q<4;++Q)le.push(String.fromCharCode(this.data[this.pos++]));return le}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":y&&this.animation.frames.push(y),this.pos+=4,y={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},g=this.readUInt16(),d=this.readUInt16()||100,y.delay=1e3*g/d,y.disposeOp=this.data[this.pos++],y.blendOp=this.data[this.pos++],y.data=[];break;case"IDAT":case"fdAT":for(M==="fdAT"&&(this.pos+=4,o-=4),s=(y!=null?y.data:void 0)||this.imgData,O=0;0<=o?O<o:O>o;0<=o?++O:--O)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(f=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>f)throw new Error("More transparent colors than palette size");if((D=f-this.transparency.indexed.length)>0)for(F=0;0<=D?F<D:F>D;0<=D?++F:--F)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":x=(N=this.read(o)).indexOf(0),_=String.fromCharCode.apply(String,N.slice(0,x)),this.text[_]=String.fromCharCode.apply(String,N.slice(x+1));break;case"IEND":return y&&this.animation.frames.push(y),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(Y=this.colorType)===4||Y===6,u=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*u,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,u;for(u=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)u.push(this.data[this.pos++]);return u},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,u=new Uint8Array(this.width*this.height*o),f=0,d=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function g(y,x,_,M){var D,N,O,F,Y,Q,le,ce,xe,G,R,Z,z,I,$,U,W,q,ie,re,we,Pe=Math.ceil((d.width-y)/_),Ie=Math.ceil((d.height-x)/M),A=d.width==Pe&&d.height==Ie;for(I=o*Pe,Z=A?u:new Uint8Array(I*Ie),Q=s.length,z=0,N=0;z<Ie&&f<Q;){switch(s[f++]){case 0:for(F=W=0;W<I;F=W+=1)Z[N++]=s[f++];break;case 1:for(F=q=0;q<I;F=q+=1)D=s[f++],Y=F<o?0:Z[N-o],Z[N++]=(D+Y)%256;break;case 2:for(F=ie=0;ie<I;F=ie+=1)D=s[f++],O=(F-F%o)/o,$=z&&Z[(z-1)*I+O*o+F%o],Z[N++]=($+D)%256;break;case 3:for(F=re=0;re<I;F=re+=1)D=s[f++],O=(F-F%o)/o,Y=F<o?0:Z[N-o],$=z&&Z[(z-1)*I+O*o+F%o],Z[N++]=(D+Math.floor((Y+$)/2))%256;break;case 4:for(F=we=0;we<I;F=we+=1)D=s[f++],O=(F-F%o)/o,Y=F<o?0:Z[N-o],z===0?$=U=0:($=Z[(z-1)*I+O*o+F%o],U=O&&Z[(z-1)*I+(O-1)*o+F%o]),le=Y+$-U,ce=Math.abs(le-Y),G=Math.abs(le-$),R=Math.abs(le-U),xe=ce<=G&&ce<=R?Y:G<=R?$:U,Z[N++]=(D+xe)%256;break;default:throw new Error("Invalid filter algorithm: "+s[f-1])}if(!A){var J=((x+z*M)*d.width+y)*o,fe=z*I;for(F=0;F<Pe;F+=1){for(var ne=0;ne<o;ne+=1)u[J++]=Z[fe++];J+=(_-1)*o}}z++}}return s=dF(s),d.interlaceMethod==1?(g(0,0,8,8),g(4,0,8,8),g(0,4,4,8),g(2,0,4,4),g(0,2,2,4),g(1,0,2,2),g(0,1,1,2)):g(0,0,1,1),u},r.prototype.decodePalette=function(){var s,o,u,f,d,g,y,x,_;for(u=this.palette,g=this.transparency.indexed||[],d=new Uint8Array((g.length||0)+u.length),f=0,s=0,o=y=0,x=u.length;y<x;o=y+=3)d[f++]=u[o],d[f++]=u[o+1],d[f++]=u[o+2],d[f++]=(_=g[s++])!=null?_:255;return d},r.prototype.copyToImageData=function(s,o){var u,f,d,g,y,x,_,M,D,N,O;if(f=this.colors,D=null,u=this.hasAlphaChannel,this.palette.length&&(D=(O=this._decodedPalette)!=null?O:this._decodedPalette=this.decodePalette(),f=4,u=!0),M=(d=s.data||s).length,y=D||o,g=x=0,f===1)for(;g<M;)_=D?4*o[g/4]:x,N=y[_++],d[g++]=N,d[g++]=N,d[g++]=N,d[g++]=u?y[_++]:255,x=_;else for(;g<M;)_=D?4*o[g/4]:x,d[g++]=y[_++],d[g++]=y[_++],d[g++]=y[_++],d[g++]=u?y[_++]:255,x=_},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(Nr)==="[object Window]"){try{n=Nr.document.createElement("canvas"),t=n.getContext("2d")}catch{return!1}return!0}return!1};return i(),e=function(s){var o;if(i()===!0)return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(o=new Image).src=n.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,u,f,d,g,y,x,_;if(this.animation){for(_=[],u=g=0,y=(x=this.animation.frames).length;g<y;u=++g)o=x[u],f=s.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(f,d),o.imageData=f,_.push(o.image=e(f));return _}},r.prototype.renderFrame=function(s,o){var u,f,d;return u=(f=this.animation.frames)[o],d=f[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?s.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&s.putImageData(d.imageData,d.xOffset,d.yOffset),u.blendOp===0&&s.clearRect(u.xOffset,u.yOffset,u.width,u.height),s.drawImage(u.image,u.xOffset,u.yOffset)},r.prototype.animate=function(s){var o,u,f,d,g,y,x=this;return u=0,y=this.animation,d=y.numFrames,f=y.frames,g=y.numPlays,(o=function(){var _,M;if(_=u++%d,M=f[_],x.renderFrame(s,_),d>1&&u/d<g)return x.animation._timeout=setTimeout(o,M.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,u;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(u=o.createImageData(this.width,this.height),this.copyToImageData(u,this.decodePixels()),o.putImageData(u,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function IF(e){var n=0;if(e[n++]!==71||e[n++]!==73||e[n++]!==70||e[n++]!==56||(e[n++]+1&253)!=56||e[n++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=e[n++]|e[n++]<<8,r=e[n++]|e[n++]<<8,i=e[n++],s=i>>7,o=1<<(7&i)+1;e[n++],e[n++];var u=null,f=null;s&&(u=n,f=o,n+=3*o);var d=!0,g=[],y=0,x=null,_=0,M=null;for(this.width=t,this.height=r;d&&n<e.length;)switch(e[n++]){case 33:switch(e[n++]){case 255:if(e[n]!==11||e[n+1]==78&&e[n+2]==69&&e[n+3]==84&&e[n+4]==83&&e[n+5]==67&&e[n+6]==65&&e[n+7]==80&&e[n+8]==69&&e[n+9]==50&&e[n+10]==46&&e[n+11]==48&&e[n+12]==3&&e[n+13]==1&&e[n+16]==0)n+=14,M=e[n++]|e[n++]<<8,n++;else for(n+=12;;){if(!((z=e[n++])>=0))throw Error("Invalid block size");if(z===0)break;n+=z}break;case 249:if(e[n++]!==4||e[n+4]!==0)throw new Error("Invalid graphics extension block.");var D=e[n++];y=e[n++]|e[n++]<<8,x=e[n++],!(1&D)&&(x=null),_=D>>2&7,n++;break;case 254:for(;;){if(!((z=e[n++])>=0))throw Error("Invalid block size");if(z===0)break;n+=z}break;default:throw new Error("Unknown graphic control label: 0x"+e[n-1].toString(16))}break;case 44:var N=e[n++]|e[n++]<<8,O=e[n++]|e[n++]<<8,F=e[n++]|e[n++]<<8,Y=e[n++]|e[n++]<<8,Q=e[n++],le=Q>>6&1,ce=1<<(7&Q)+1,xe=u,G=f,R=!1;Q>>7&&(R=!0,xe=n,G=ce,n+=3*ce);var Z=n;for(n++;;){var z;if(!((z=e[n++])>=0))throw Error("Invalid block size");if(z===0)break;n+=z}g.push({x:N,y:O,width:F,height:Y,has_local_palette:R,palette_offset:xe,palette_size:G,data_offset:Z,data_length:n-Z,transparent_index:x,interlaced:!!le,delay:y,disposal:_});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[n-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return M},this.frameInfo=function(I){if(I<0||I>=g.length)throw new Error("Frame index out of range.");return g[I]},this.decodeAndBlitFrameBGRA=function(I,$){var U=this.frameInfo(I),W=U.width*U.height,q=new Uint8Array(W);$b(e,U.data_offset,q,W);var ie=U.palette_offset,re=U.transparent_index;re===null&&(re=256);var we=U.width,Pe=t-we,Ie=we,A=4*(U.y*t+U.x),J=4*((U.y+U.height)*t+U.x),fe=A,ne=4*Pe;U.interlaced===!0&&(ne+=4*t*7);for(var he=8,ae=0,T=q.length;ae<T;++ae){var ue=q[ae];if(Ie===0&&(Ie=we,(fe+=ne)>=J&&(ne=4*Pe+4*t*(he-1),fe=A+(we+Pe)*(he<<1),he>>=1)),ue===re)fe+=4;else{var ke=e[ie+3*ue],Ce=e[ie+3*ue+1],Ve=e[ie+3*ue+2];$[fe++]=Ve,$[fe++]=Ce,$[fe++]=ke,$[fe++]=255}--Ie}},this.decodeAndBlitFrameRGBA=function(I,$){var U=this.frameInfo(I),W=U.width*U.height,q=new Uint8Array(W);$b(e,U.data_offset,q,W);var ie=U.palette_offset,re=U.transparent_index;re===null&&(re=256);var we=U.width,Pe=t-we,Ie=we,A=4*(U.y*t+U.x),J=4*((U.y+U.height)*t+U.x),fe=A,ne=4*Pe;U.interlaced===!0&&(ne+=4*t*7);for(var he=8,ae=0,T=q.length;ae<T;++ae){var ue=q[ae];if(Ie===0&&(Ie=we,(fe+=ne)>=J&&(ne=4*Pe+4*t*(he-1),fe=A+(we+Pe)*(he<<1),he>>=1)),ue===re)fe+=4;else{var ke=e[ie+3*ue],Ce=e[ie+3*ue+1],Ve=e[ie+3*ue+2];$[fe++]=ke,$[fe++]=Ce,$[fe++]=Ve,$[fe++]=255}--Ie}}}function $b(e,n,t,r){for(var i=e[n++],s=1<<i,o=s+1,u=o+1,f=i+1,d=(1<<f)-1,g=0,y=0,x=0,_=e[n++],M=new Int32Array(4096),D=null;;){for(;g<16&&_!==0;)y|=e[n++]<<g,g+=8,_===1?_=e[n++]:--_;if(g<f)break;var N=y&d;if(y>>=f,g-=f,N!==s){if(N===o)break;for(var O=N<u?N:D,F=0,Y=O;Y>s;)Y=M[Y]>>8,++F;var Q=Y;if(x+F+(O!==N?1:0)>r)return void so.log("Warning, gif stream longer than expected.");t[x++]=Q;var le=x+=F;for(O!==N&&(t[x++]=Q),Y=O;F--;)Y=M[Y],t[--le]=255&Y,Y>>=8;D!==null&&u<4096&&(M[u++]=D<<8|Q,u>=d+1&&f<12&&(++f,d=d<<1|1)),D=N}else u=o+1,d=(1<<(f=i+1))-1,D=null}return x!==r&&so.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function yv(e){var n,t,r,i,s,o=Math.floor,u=new Array(64),f=new Array(64),d=new Array(64),g=new Array(64),y=new Array(65535),x=new Array(65535),_=new Array(64),M=new Array(64),D=[],N=0,O=7,F=new Array(64),Y=new Array(64),Q=new Array(64),le=new Array(256),ce=new Array(2048),xe=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],G=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],Z=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],z=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],$=[0,1,2,3,4,5,6,7,8,9,10,11],U=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],W=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function q(A,J){for(var fe=0,ne=0,he=new Array,ae=1;ae<=16;ae++){for(var T=1;T<=A[ae];T++)he[J[ne]]=[],he[J[ne]][0]=fe,he[J[ne]][1]=ae,ne++,fe++;fe*=2}return he}function ie(A){for(var J=A[0],fe=A[1]-1;fe>=0;)J&1<<fe&&(N|=1<<O),fe--,--O<0&&(N==255?(re(255),re(0)):re(N),O=7,N=0)}function re(A){D.push(A)}function we(A){re(A>>8&255),re(255&A)}function Pe(A,J,fe,ne,he){for(var ae,T=he[0],ue=he[240],ke=function(Ke,Ge){var Xe,ot,kt,Ct,Ut,Gt,fn,pn,et,it,nt=0;for(et=0;et<8;++et){Xe=Ke[nt],ot=Ke[nt+1],kt=Ke[nt+2],Ct=Ke[nt+3],Ut=Ke[nt+4],Gt=Ke[nt+5],fn=Ke[nt+6];var Vt=Xe+(pn=Ke[nt+7]),Qt=Xe-pn,On=ot+fn,wn=ot-fn,Tn=kt+Gt,ar=kt-Gt,xn=Ct+Ut,Mn=Ct-Ut,En=Vt+xn,cr=Vt-xn,yr=On+Tn,mt=On-Tn;Ke[nt]=En+yr,Ke[nt+4]=En-yr;var We=.707106781*(mt+cr);Ke[nt+2]=cr+We,Ke[nt+6]=cr-We;var Ot=.382683433*((En=Mn+ar)-(mt=wn+Qt)),Pn=.5411961*En+Ot,tr=1.306562965*mt+Ot,Zn=.707106781*(yr=ar+wn),Zt=Qt+Zn,mn=Qt-Zn;Ke[nt+5]=mn+Pn,Ke[nt+3]=mn-Pn,Ke[nt+1]=Zt+tr,Ke[nt+7]=Zt-tr,nt+=8}for(nt=0,et=0;et<8;++et){Xe=Ke[nt],ot=Ke[nt+8],kt=Ke[nt+16],Ct=Ke[nt+24],Ut=Ke[nt+32],Gt=Ke[nt+40],fn=Ke[nt+48];var It=Xe+(pn=Ke[nt+56]),Kt=Xe-pn,Ln=ot+fn,mr=ot-fn,at=kt+Gt,Cn=kt-Gt,xr=Ct+Ut,Ni=Ct-Ut,Fr=It+xr,Er=It-xr,lr=Ln+at,Hr=Ln-at;Ke[nt]=Fr+lr,Ke[nt+32]=Fr-lr;var ir=.707106781*(Hr+Er);Ke[nt+16]=Er+ir,Ke[nt+48]=Er-ir;var Or=.382683433*((Fr=Ni+Cn)-(Hr=mr+Kt)),jr=.5411961*Fr+Or,rn=1.306562965*Hr+Or,Fi=.707106781*(lr=Cn+mr),_i=Kt+Fi,gi=Kt-Fi;Ke[nt+40]=gi+jr,Ke[nt+24]=gi-jr,Ke[nt+8]=_i+rn,Ke[nt+56]=_i-rn,nt++}for(et=0;et<64;++et)it=Ke[et]*Ge[et],_[et]=it>0?it+.5|0:it-.5|0;return _}(A,J),Ce=0;Ce<64;++Ce)M[xe[Ce]]=ke[Ce];var Ve=M[0]-fe;fe=M[0],Ve==0?ie(ne[0]):(ie(ne[x[ae=32767+Ve]]),ie(y[ae]));for(var K=63;K>0&&M[K]==0;)K--;if(K==0)return ie(T),fe;for(var pe,ve=1;ve<=K;){for(var ge=ve;M[ve]==0&&ve<=K;)++ve;var Ue=ve-ge;if(Ue>=16){pe=Ue>>4;for(var Qe=1;Qe<=pe;++Qe)ie(ue);Ue&=15}ae=32767+M[ve],ie(he[(Ue<<4)+x[ae]]),ie(y[ae]),ve++}return K!=63&&ie(T),fe}function Ie(A){A=Math.min(Math.max(A,1),100),s!=A&&(function(J){for(var fe=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ne=0;ne<64;ne++){var he=o((fe[ne]*J+50)/100);he=Math.min(Math.max(he,1),255),u[xe[ne]]=he}for(var ae=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],T=0;T<64;T++){var ue=o((ae[T]*J+50)/100);ue=Math.min(Math.max(ue,1),255),f[xe[T]]=ue}for(var ke=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ce=0,Ve=0;Ve<8;Ve++)for(var K=0;K<8;K++)d[Ce]=1/(u[xe[Ce]]*ke[Ve]*ke[K]*8),g[Ce]=1/(f[xe[Ce]]*ke[Ve]*ke[K]*8),Ce++}(A<50?Math.floor(5e3/A):Math.floor(200-2*A)),s=A)}this.encode=function(A,J){J&&Ie(J),D=new Array,N=0,O=7,we(65496),we(65504),we(16),re(74),re(70),re(73),re(70),re(0),re(1),re(1),re(0),we(1),we(1),re(0),re(0),function(){we(65499),we(132),re(0);for(var ot=0;ot<64;ot++)re(u[ot]);re(1);for(var kt=0;kt<64;kt++)re(f[kt])}(),function(ot,kt){we(65472),we(17),re(8),we(kt),we(ot),re(3),re(1),re(17),re(0),re(2),re(17),re(1),re(3),re(17),re(1)}(A.width,A.height),function(){we(65476),we(418),re(0);for(var ot=0;ot<16;ot++)re(G[ot+1]);for(var kt=0;kt<=11;kt++)re(R[kt]);re(16);for(var Ct=0;Ct<16;Ct++)re(Z[Ct+1]);for(var Ut=0;Ut<=161;Ut++)re(z[Ut]);re(1);for(var Gt=0;Gt<16;Gt++)re(I[Gt+1]);for(var fn=0;fn<=11;fn++)re($[fn]);re(17);for(var pn=0;pn<16;pn++)re(U[pn+1]);for(var et=0;et<=161;et++)re(W[et])}(),we(65498),we(12),re(3),re(1),re(0),re(2),re(17),re(3),re(17),re(0),re(63),re(0);var fe=0,ne=0,he=0;N=0,O=7,this.encode.displayName="_encode_";for(var ae,T,ue,ke,Ce,Ve,K,pe,ve,ge=A.data,Ue=A.width,Qe=A.height,Ke=4*Ue,Ge=0;Ge<Qe;){for(ae=0;ae<Ke;){for(Ce=Ke*Ge+ae,K=-1,pe=0,ve=0;ve<64;ve++)Ve=Ce+(pe=ve>>3)*Ke+(K=4*(7&ve)),Ge+pe>=Qe&&(Ve-=Ke*(Ge+1+pe-Qe)),ae+K>=Ke&&(Ve-=ae+K-Ke+4),T=ge[Ve++],ue=ge[Ve++],ke=ge[Ve++],F[ve]=(ce[T]+ce[ue+256>>0]+ce[ke+512>>0]>>16)-128,Y[ve]=(ce[T+768>>0]+ce[ue+1024>>0]+ce[ke+1280>>0]>>16)-128,Q[ve]=(ce[T+1280>>0]+ce[ue+1536>>0]+ce[ke+1792>>0]>>16)-128;fe=Pe(F,d,fe,n,r),ne=Pe(Y,g,ne,t,i),he=Pe(Q,g,he,t,i),ae+=32}Ge+=8}if(O>=0){var Xe=[];Xe[1]=O+1,Xe[0]=(1<<O+1)-1,ie(Xe)}return we(65497),new Uint8Array(D)},e=e||50,function(){for(var A=String.fromCharCode,J=0;J<256;J++)le[J]=A(J)}(),n=q(G,R),t=q(I,$),r=q(Z,z),i=q(U,W),function(){for(var A=1,J=2,fe=1;fe<=15;fe++){for(var ne=A;ne<J;ne++)x[32767+ne]=fe,y[32767+ne]=[],y[32767+ne][1]=fe,y[32767+ne][0]=ne;for(var he=-(J-1);he<=-A;he++)x[32767+he]=fe,y[32767+he]=[],y[32767+he][1]=fe,y[32767+he][0]=J-1+he;A<<=1,J<<=1}}(),function(){for(var A=0;A<256;A++)ce[A]=19595*A,ce[A+256>>0]=38470*A,ce[A+512>>0]=7471*A+32768,ce[A+768>>0]=-11059*A,ce[A+1024>>0]=-21709*A,ce[A+1280>>0]=32768*A+8421375,ce[A+1536>>0]=-27439*A,ce[A+1792>>0]=-5329*A}(),Ie(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Nu(e,n){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!n,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Ub(e){function n(G){if(!G)throw Error("assert :P")}function t(G,R,Z){for(var z=0;4>z;z++)if(G[R+z]!=Z.charCodeAt(z))return!0;return!1}function r(G,R,Z,z,I){for(var $=0;$<I;$++)G[R+$]=Z[z+$]}function i(G,R,Z,z){for(var I=0;I<z;I++)G[R+I]=Z}function s(G){return new Int32Array(G)}function o(G,R){for(var Z=[],z=0;z<G;z++)Z.push(new R);return Z}function u(G,R){var Z=[];return function z(I,$,U){for(var W=U[$],q=0;q<W&&(I.push(U.length>$+1?[]:new R),!(U.length<$+1));q++)z(I[q],$+1,U)}(Z,0,G),Z}var f=function(){var G=this;function R(b,P){for(var H=1<<P-1>>>0;b&H;)H>>>=1;return H?(b&H-1)+H:b}function Z(b,P,H,se,_e){n(!(se%H));do b[P+(se-=H)]=_e;while(0<se)}function z(b,P,H,se,_e){if(n(2328>=_e),512>=_e)var Ee=s(512);else if((Ee=s(_e))==null)return 0;return function(Ae,Te,Ne,He,ht,Dt){var Nt,wt,Yt=Te,$t=1<<Ne,dt=s(16),yt=s(16);for(n(ht!=0),n(He!=null),n(Ae!=null),n(0<Ne),wt=0;wt<ht;++wt){if(15<He[wt])return 0;++dt[He[wt]]}if(dt[0]==ht)return 0;for(yt[1]=0,Nt=1;15>Nt;++Nt){if(dt[Nt]>1<<Nt)return 0;yt[Nt+1]=yt[Nt]+dt[Nt]}for(wt=0;wt<ht;++wt)Nt=He[wt],0<He[wt]&&(Dt[yt[Nt]++]=wt);if(yt[15]==1)return(He=new I).g=0,He.value=Dt[0],Z(Ae,Yt,1,$t,He),$t;var en,hn=-1,nn=$t-1,kn=0,Sn=1,Xn=1,l=1<<Ne;for(wt=0,Nt=1,ht=2;Nt<=Ne;++Nt,ht<<=1){if(Sn+=Xn<<=1,0>(Xn-=dt[Nt]))return 0;for(;0<dt[Nt];--dt[Nt])(He=new I).g=Nt,He.value=Dt[wt++],Z(Ae,Yt+kn,ht,l,He),kn=R(kn,Nt)}for(Nt=Ne+1,ht=2;15>=Nt;++Nt,ht<<=1){if(Sn+=Xn<<=1,0>(Xn-=dt[Nt]))return 0;for(;0<dt[Nt];--dt[Nt]){if(He=new I,(kn&nn)!=hn){for(Yt+=l,en=1<<(hn=Nt)-Ne;15>hn&&!(0>=(en-=dt[hn]));)++hn,en<<=1;$t+=l=1<<(en=hn-Ne),Ae[Te+(hn=kn&nn)].g=en+Ne,Ae[Te+hn].value=Yt-Te-hn}He.g=Nt-Ne,He.value=Dt[wt++],Z(Ae,Yt+(kn>>Ne),ht,l,He),kn=R(kn,Nt)}}return Sn!=2*yt[15]-1?0:$t}(b,P,H,se,_e,Ee)}function I(){this.value=this.g=0}function $(){this.value=this.g=0}function U(){this.G=o(5,I),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ho,$)}function W(b,P,H,se){n(b!=null),n(P!=null),n(2147483648>se),b.Ca=254,b.I=0,b.b=-8,b.Ka=0,b.oa=P,b.pa=H,b.Jd=P,b.Yc=H+se,b.Zc=4<=se?H+se-4+1:H,ae(b)}function q(b,P){for(var H=0;0<P--;)H|=ue(b,128)<<P;return H}function ie(b,P){var H=q(b,P);return T(b)?-H:H}function re(b,P,H,se){var _e,Ee=0;for(n(b!=null),n(P!=null),n(4294967288>se),b.Sb=se,b.Ra=0,b.u=0,b.h=0,4<se&&(se=4),_e=0;_e<se;++_e)Ee+=P[H+_e]<<8*_e;b.Ra=Ee,b.bb=se,b.oa=P,b.pa=H}function we(b){for(;8<=b.u&&b.bb<b.Sb;)b.Ra>>>=8,b.Ra+=b.oa[b.pa+b.bb]<<fs-8>>>0,++b.bb,b.u-=8;fe(b)&&(b.h=1,b.u=0)}function Pe(b,P){if(n(0<=P),!b.h&&P<=Ps){var H=J(b)&ra[P];return b.u+=P,we(b),H}return b.h=1,b.u=0}function Ie(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function A(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function J(b){return b.Ra>>>(b.u&fs-1)>>>0}function fe(b){return n(b.bb<=b.Sb),b.h||b.bb==b.Sb&&b.u>fs}function ne(b,P){b.u=P,b.h=fe(b)}function he(b){b.u>=dl&&(n(b.u>=dl),we(b))}function ae(b){n(b!=null&&b.oa!=null),b.pa<b.Zc?(b.I=(b.oa[b.pa++]|b.I<<8)>>>0,b.b+=8):(n(b!=null&&b.oa!=null),b.pa<b.Yc?(b.b+=8,b.I=b.oa[b.pa++]|b.I<<8):b.Ka?b.b=0:(b.I<<=8,b.b+=8,b.Ka=1))}function T(b){return q(b,1)}function ue(b,P){var H=b.Ca;0>b.b&&ae(b);var se=b.b,_e=H*P>>>8,Ee=(b.I>>>se>_e)+0;for(Ee?(H-=_e,b.I-=_e+1<<se>>>0):H=_e+1,se=H,_e=0;256<=se;)_e+=8,se>>=8;return se=7^_e+zo[se],b.b-=se,b.Ca=(H<<se)-1,Ee}function ke(b,P,H){b[P+0]=H>>24&255,b[P+1]=H>>16&255,b[P+2]=H>>8&255,b[P+3]=H>>0&255}function Ce(b,P){return b[P+0]<<0|b[P+1]<<8}function Ve(b,P){return Ce(b,P)|b[P+2]<<16}function K(b,P){return Ce(b,P)|Ce(b,P+2)<<16}function pe(b,P){var H=1<<P;return n(b!=null),n(0<P),b.X=s(H),b.X==null?0:(b.Mb=32-P,b.Xa=P,1)}function ve(b,P){n(b!=null),n(P!=null),n(b.Xa==P.Xa),r(P.X,0,b.X,0,1<<P.Xa)}function ge(){this.X=[],this.Xa=this.Mb=0}function Ue(b,P,H,se){n(H!=null),n(se!=null);var _e=H[0],Ee=se[0];return _e==0&&(_e=(b*Ee+P/2)/P),Ee==0&&(Ee=(P*_e+b/2)/b),0>=_e||0>=Ee?0:(H[0]=_e,se[0]=Ee,1)}function Qe(b,P){return b+(1<<P)-1>>>P}function Ke(b,P){return((4278255360&b)+(4278255360&P)>>>0&4278255360)+((16711935&b)+(16711935&P)>>>0&16711935)>>>0}function Ge(b,P){G[P]=function(H,se,_e,Ee,Ae,Te,Ne){var He;for(He=0;He<Ae;++He){var ht=G[b](Te[Ne+He-1],_e,Ee+He);Te[Ne+He]=Ke(H[se+He],ht)}}}function Xe(){this.ud=this.hd=this.jd=0}function ot(b,P){return((4278124286&(b^P))>>>1)+(b&P)>>>0}function kt(b){return 0<=b&&256>b?b:0>b?0:255<b?255:void 0}function Ct(b,P){return kt(b+(b-P+.5>>1))}function Ut(b,P,H){return Math.abs(P-H)-Math.abs(b-H)}function Gt(b,P,H,se,_e,Ee,Ae){for(se=Ee[Ae-1],H=0;H<_e;++H)Ee[Ae+H]=se=Ke(b[P+H],se)}function fn(b,P,H,se,_e){var Ee;for(Ee=0;Ee<H;++Ee){var Ae=b[P+Ee],Te=Ae>>8&255,Ne=16711935&(Ne=(Ne=16711935&Ae)+((Te<<16)+Te));se[_e+Ee]=(4278255360&Ae)+Ne>>>0}}function pn(b,P){P.jd=b>>0&255,P.hd=b>>8&255,P.ud=b>>16&255}function et(b,P,H,se,_e,Ee){var Ae;for(Ae=0;Ae<se;++Ae){var Te=P[H+Ae],Ne=Te>>>8,He=Te,ht=255&(ht=(ht=Te>>>16)+((b.jd<<24>>24)*(Ne<<24>>24)>>>5));He=255&(He=(He=He+((b.hd<<24>>24)*(Ne<<24>>24)>>>5))+((b.ud<<24>>24)*(ht<<24>>24)>>>5)),_e[Ee+Ae]=(4278255360&Te)+(ht<<16)+He}}function it(b,P,H,se,_e){G[P]=function(Ee,Ae,Te,Ne,He,ht,Dt,Nt,wt){for(Ne=Dt;Ne<Nt;++Ne)for(Dt=0;Dt<wt;++Dt)He[ht++]=_e(Te[se(Ee[Ae++])])},G[b]=function(Ee,Ae,Te,Ne,He,ht,Dt){var Nt=8>>Ee.b,wt=Ee.Ea,Yt=Ee.K[0],$t=Ee.w;if(8>Nt)for(Ee=(1<<Ee.b)-1,$t=(1<<Nt)-1;Ae<Te;++Ae){var dt,yt=0;for(dt=0;dt<wt;++dt)dt&Ee||(yt=se(Ne[He++])),ht[Dt++]=_e(Yt[yt&$t]),yt>>=Nt}else G["VP8LMapColor"+H](Ne,He,Yt,$t,ht,Dt,Ae,Te,wt)}}function nt(b,P,H,se,_e){for(H=P+H;P<H;){var Ee=b[P++];se[_e++]=Ee>>16&255,se[_e++]=Ee>>8&255,se[_e++]=Ee>>0&255}}function Vt(b,P,H,se,_e){for(H=P+H;P<H;){var Ee=b[P++];se[_e++]=Ee>>16&255,se[_e++]=Ee>>8&255,se[_e++]=Ee>>0&255,se[_e++]=Ee>>24&255}}function Qt(b,P,H,se,_e){for(H=P+H;P<H;){var Ee=(Ae=b[P++])>>16&240|Ae>>12&15,Ae=Ae>>0&240|Ae>>28&15;se[_e++]=Ee,se[_e++]=Ae}}function On(b,P,H,se,_e){for(H=P+H;P<H;){var Ee=(Ae=b[P++])>>16&248|Ae>>13&7,Ae=Ae>>5&224|Ae>>3&31;se[_e++]=Ee,se[_e++]=Ae}}function wn(b,P,H,se,_e){for(H=P+H;P<H;){var Ee=b[P++];se[_e++]=Ee>>0&255,se[_e++]=Ee>>8&255,se[_e++]=Ee>>16&255}}function Tn(b,P,H,se,_e,Ee){if(Ee==0)for(H=P+H;P<H;)ke(se,((Ee=b[P++])[0]>>24|Ee[1]>>8&65280|Ee[2]<<8&16711680|Ee[3]<<24)>>>0),_e+=32;else r(se,_e,b,P,H)}function ar(b,P){G[P][0]=G[b+"0"],G[P][1]=G[b+"1"],G[P][2]=G[b+"2"],G[P][3]=G[b+"3"],G[P][4]=G[b+"4"],G[P][5]=G[b+"5"],G[P][6]=G[b+"6"],G[P][7]=G[b+"7"],G[P][8]=G[b+"8"],G[P][9]=G[b+"9"],G[P][10]=G[b+"10"],G[P][11]=G[b+"11"],G[P][12]=G[b+"12"],G[P][13]=G[b+"13"],G[P][14]=G[b+"0"],G[P][15]=G[b+"0"]}function xn(b){return b==ko||b==To||b==Ks||b==a}function Mn(){this.eb=[],this.size=this.A=this.fb=0}function En(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function cr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Mn,this.f.kb=new En,this.sd=null}function yr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function mt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function We(b){return alert("todo:WebPSamplerProcessPlane"),b.T}function Ot(b,P){var H=b.T,se=P.ba.f.RGBA,_e=se.eb,Ee=se.fb+b.ka*se.A,Ae=qo[P.ba.S],Te=b.y,Ne=b.O,He=b.f,ht=b.N,Dt=b.ea,Nt=b.W,wt=P.cc,Yt=P.dc,$t=P.Mc,dt=P.Nc,yt=b.ka,en=b.ka+b.T,hn=b.U,nn=hn+1>>1;for(yt==0?Ae(Te,Ne,null,null,He,ht,Dt,Nt,He,ht,Dt,Nt,_e,Ee,null,null,hn):(Ae(P.ec,P.fc,Te,Ne,wt,Yt,$t,dt,He,ht,Dt,Nt,_e,Ee-se.A,_e,Ee,hn),++H);yt+2<en;yt+=2)wt=He,Yt=ht,$t=Dt,dt=Nt,ht+=b.Rc,Nt+=b.Rc,Ee+=2*se.A,Ae(Te,(Ne+=2*b.fa)-b.fa,Te,Ne,wt,Yt,$t,dt,He,ht,Dt,Nt,_e,Ee-se.A,_e,Ee,hn);return Ne+=b.fa,b.j+en<b.o?(r(P.ec,P.fc,Te,Ne,hn),r(P.cc,P.dc,He,ht,nn),r(P.Mc,P.Nc,Dt,Nt,nn),H--):1&en||Ae(Te,Ne,null,null,He,ht,Dt,Nt,He,ht,Dt,Nt,_e,Ee+se.A,null,null,hn),H}function Pn(b,P,H){var se=b.F,_e=[b.J];if(se!=null){var Ee=b.U,Ae=P.ba.S,Te=Ae==Zs||Ae==Ks;P=P.ba.f.RGBA;var Ne=[0],He=b.ka;Ne[0]=b.T,b.Kb&&(He==0?--Ne[0]:(--He,_e[0]-=b.width),b.j+b.ka+b.T==b.o&&(Ne[0]=b.o-b.j-He));var ht=P.eb;He=P.fb+He*P.A,b=Mi(se,_e[0],b.width,Ee,Ne,ht,He+(Te?0:3),P.A),n(H==Ne),b&&xn(Ae)&&Ao(ht,He,Te,Ee,Ne,P.A)}return 0}function tr(b){var P=b.ma,H=P.ba.S,se=11>H,_e=H==dr||H==Pa||H==Zs||H==rs||H==12||xn(H);if(P.memory=null,P.Ib=null,P.Jb=null,P.Nd=null,!wu(P.Oa,b,_e?11:12))return 0;if(_e&&xn(H)&&cn(),b.da)alert("todo:use_scaling");else{if(se){if(P.Ib=We,b.Kb){if(H=b.U+1>>1,P.memory=s(b.U+2*H),P.memory==null)return 0;P.ec=P.memory,P.fc=0,P.cc=P.ec,P.dc=P.fc+b.U,P.Mc=P.cc,P.Nc=P.dc+H,P.Ib=Ot,cn()}}else alert("todo:EmitYUV");_e&&(P.Jb=Pn,se&&xt())}if(se&&!Ju){for(b=0;256>b;++b)Kc[b]=89858*(b-128)+Wa>>Zc,Yc[b]=-22014*(b-128)+Wa,gd[b]=-45773*(b-128),Fl[b]=113618*(b-128)+Wa>>Zc;for(b=xc;b<kf;++b)P=76283*(b-16)+Wa>>Zc,Jc[b-xc]=Ur(P,255),ch[b-xc]=Ur(P+8>>4,15);Ju=1}return 1}function Zn(b){var P=b.ma,H=b.U,se=b.T;return n(!(1&b.ka)),0>=H||0>=se?0:(H=P.Ib(b,P),P.Jb!=null&&P.Jb(b,P,H),P.Dc+=H,1)}function Zt(b){b.ma.memory=null}function mn(b,P,H,se){return Pe(b,8)!=47?0:(P[0]=Pe(b,14)+1,H[0]=Pe(b,14)+1,se[0]=Pe(b,1),Pe(b,3)!=0?0:!b.h)}function It(b,P){if(4>b)return b+1;var H=b-2>>1;return(2+(1&b)<<H)+Pe(P,H)+1}function Kt(b,P){return 120<P?P-120:1<=(H=((H=st[P-1])>>4)*b+(8-(15&H)))?H:1;var H}function Ln(b,P,H){var se=J(H),_e=b[P+=255&se].g-8;return 0<_e&&(ne(H,H.u+8),se=J(H),P+=b[P].value,P+=se&(1<<_e)-1),ne(H,H.u+b[P].g),b[P].value}function mr(b,P,H){return H.g+=b.g,H.value+=b.value<<P>>>0,n(8>=H.g),b.g}function at(b,P,H){var se=b.xc;return n((P=se==0?0:b.vc[b.md*(H>>se)+(P>>se)])<b.Wb),b.Ya[P]}function Cn(b,P,H,se){var _e=b.ab,Ee=b.c*P,Ae=b.C;P=Ae+P;var Te=H,Ne=se;for(se=b.Ta,H=b.Ua;0<_e--;){var He=b.gc[_e],ht=Ae,Dt=P,Nt=Te,wt=Ne,Yt=(Ne=se,Te=H,He.Ea);switch(n(ht<Dt),n(Dt<=He.nc),He.hc){case 2:Yu(Nt,wt,(Dt-ht)*Yt,Ne,Te);break;case 0:var $t=ht,dt=Dt,yt=Ne,en=Te,hn=(l=He).Ea;$t==0&&(es(Nt,wt,null,null,1,yt,en),Gt(Nt,wt+1,0,0,hn-1,yt,en+1),wt+=hn,en+=hn,++$t);for(var nn=1<<l.b,kn=nn-1,Sn=Qe(hn,l.b),Xn=l.K,l=l.w+($t>>l.b)*Sn;$t<dt;){var h=Xn,v=l,w=1;for(ts(Nt,wt,yt,en-hn,1,yt,en);w<hn;){var C=(w&~kn)+nn;C>hn&&(C=hn),(0,La[h[v++]>>8&15])(Nt,wt+ +w,yt,en+w-hn,C-w,yt,en+w),w=C}wt+=hn,en+=hn,++$t&kn||(l+=Sn)}Dt!=He.nc&&r(Ne,Te-Yt,Ne,Te+(Dt-ht-1)*Yt,Yt);break;case 1:for(Yt=Nt,dt=wt,hn=(Nt=He.Ea)-(en=Nt&~(yt=(wt=1<<He.b)-1)),$t=Qe(Nt,He.b),nn=He.K,He=He.w+(ht>>He.b)*$t;ht<Dt;){for(kn=nn,Sn=He,Xn=new Xe,l=dt+en,h=dt+Nt;dt<l;)pn(kn[Sn++],Xn),Sa(Xn,Yt,dt,wt,Ne,Te),dt+=wt,Te+=wt;dt<h&&(pn(kn[Sn++],Xn),Sa(Xn,Yt,dt,hn,Ne,Te),dt+=hn,Te+=hn),++ht&yt||(He+=$t)}break;case 3:if(Nt==Ne&&wt==Te&&0<He.b){for(dt=Ne,Nt=Yt=Te+(Dt-ht)*Yt-(en=(Dt-ht)*Qe(He.Ea,He.b)),wt=Ne,yt=Te,$t=[],en=(hn=en)-1;0<=en;--en)$t[en]=wt[yt+en];for(en=hn-1;0<=en;--en)dt[Nt+en]=$t[en];Lo(He,ht,Dt,Ne,Yt,Ne,Te)}else Lo(He,ht,Dt,Nt,wt,Ne,Te)}Te=se,Ne=H}Ne!=H&&r(se,H,Te,Ne,Ee)}function xr(b,P){var H=b.V,se=b.Ba+b.c*b.C,_e=P-b.C;if(n(P<=b.l.o),n(16>=_e),0<_e){var Ee=b.l,Ae=b.Ta,Te=b.Ua,Ne=Ee.width;if(Cn(b,_e,H,se),_e=Te=[Te],n((H=b.C)<(se=P)),n(Ee.v<Ee.va),se>Ee.o&&(se=Ee.o),H<Ee.j){var He=Ee.j-H;H=Ee.j,_e[0]+=He*Ne}if(H>=se?H=0:(_e[0]+=4*Ee.v,Ee.ka=H-Ee.j,Ee.U=Ee.va-Ee.v,Ee.T=se-H,H=1),H){if(Te=Te[0],11>(H=b.ca).S){var ht=H.f.RGBA,Dt=(se=H.S,_e=Ee.U,Ee=Ee.T,He=ht.eb,ht.A),Nt=Ee;for(ht=ht.fb+b.Ma*ht.A;0<Nt--;){var wt=Ae,Yt=Te,$t=_e,dt=He,yt=ht;switch(se){case ds:Vo(wt,Yt,$t,dt,yt);break;case dr:Mo(wt,Yt,$t,dt,yt);break;case ko:Mo(wt,Yt,$t,dt,yt),Ao(dt,yt,0,$t,1,0);break;case Ea:Ho(wt,Yt,$t,dt,yt);break;case Pa:Tn(wt,Yt,$t,dt,yt,1);break;case To:Tn(wt,Yt,$t,dt,yt,1),Ao(dt,yt,0,$t,1,0);break;case Zs:Tn(wt,Yt,$t,dt,yt,0);break;case Ks:Tn(wt,Yt,$t,dt,yt,0),Ao(dt,yt,1,$t,1,0);break;case rs:ia(wt,Yt,$t,dt,yt);break;case a:ia(wt,Yt,$t,dt,yt),Si(dt,yt,$t,1,0);break;case bc:Ms(wt,Yt,$t,dt,yt);break;default:n(0)}Te+=Ne,ht+=Dt}b.Ma+=Ee}else alert("todo:EmitRescaledRowsYUVA");n(b.Ma<=H.height)}}b.C=P,n(b.C<=b.i)}function Ni(b){var P;if(0<b.ua)return 0;for(P=0;P<b.Wb;++P){var H=b.Ya[P].G,se=b.Ya[P].H;if(0<H[1][se[1]+0].g||0<H[2][se[2]+0].g||0<H[3][se[3]+0].g)return 0}return 1}function Fr(b,P,H,se,_e,Ee){if(b.Z!=0){var Ae=b.qd,Te=b.rd;for(n(mi[b.Z]!=null);P<H;++P)mi[b.Z](Ae,Te,se,_e,se,_e,Ee),Ae=se,Te=_e,_e+=Ee;b.qd=Ae,b.rd=Te}}function Er(b,P){var H=b.l.ma,se=H.Z==0||H.Z==1?b.l.j:b.C;if(se=b.C<se?se:b.C,n(P<=b.l.o),P>se){var _e=b.l.width,Ee=H.ca,Ae=H.tb+_e*se,Te=b.V,Ne=b.Ba+b.c*se,He=b.gc;n(b.ab==1),n(He[0].hc==3),$o(He[0],se,P,Te,Ne,Ee,Ae),Fr(H,se,P,Ee,Ae,_e)}b.C=b.Ma=P}function lr(b,P,H,se,_e,Ee,Ae){var Te=b.$/se,Ne=b.$%se,He=b.m,ht=b.s,Dt=H+b.$,Nt=Dt;_e=H+se*_e;var wt=H+se*Ee,Yt=280+ht.ua,$t=b.Pb?Te:16777216,dt=0<ht.ua?ht.Wa:null,yt=ht.wc,en=Dt<wt?at(ht,Ne,Te):null;n(b.C<Ee),n(wt<=_e);var hn=!1;e:for(;;){for(;hn||Dt<wt;){var nn=0;if(Te>=$t){var kn=Dt-H;n(($t=b).Pb),$t.wd=$t.m,$t.xd=kn,0<$t.s.ua&&ve($t.s.Wa,$t.s.vb),$t=Te+zt}if(Ne&yt||(en=at(ht,Ne,Te)),n(en!=null),en.Qb&&(P[Dt]=en.qb,hn=!0),!hn)if(he(He),en.jc){nn=He,kn=P;var Sn=Dt,Xn=en.pd[J(nn)&ho-1];n(en.jc),256>Xn.g?(ne(nn,nn.u+Xn.g),kn[Sn]=Xn.value,nn=0):(ne(nn,nn.u+Xn.g-256),n(256<=Xn.value),nn=Xn.value),nn==0&&(hn=!0)}else nn=Ln(en.G[0],en.H[0],He);if(He.h)break;if(hn||256>nn){if(!hn)if(en.nd)P[Dt]=(en.qb|nn<<8)>>>0;else{if(he(He),hn=Ln(en.G[1],en.H[1],He),he(He),kn=Ln(en.G[2],en.H[2],He),Sn=Ln(en.G[3],en.H[3],He),He.h)break;P[Dt]=(Sn<<24|hn<<16|nn<<8|kn)>>>0}if(hn=!1,++Dt,++Ne>=se&&(Ne=0,++Te,Ae!=null&&Te<=Ee&&!(Te%16)&&Ae(b,Te),dt!=null))for(;Nt<Dt;)nn=P[Nt++],dt.X[(506832829*nn&4294967295)>>>dt.Mb]=nn}else if(280>nn){if(nn=It(nn-256,He),kn=Ln(en.G[4],en.H[4],He),he(He),kn=Kt(se,kn=It(kn,He)),He.h)break;if(Dt-H<kn||_e-Dt<nn)break e;for(Sn=0;Sn<nn;++Sn)P[Dt+Sn]=P[Dt+Sn-kn];for(Dt+=nn,Ne+=nn;Ne>=se;)Ne-=se,++Te,Ae!=null&&Te<=Ee&&!(Te%16)&&Ae(b,Te);if(n(Dt<=_e),Ne&yt&&(en=at(ht,Ne,Te)),dt!=null)for(;Nt<Dt;)nn=P[Nt++],dt.X[(506832829*nn&4294967295)>>>dt.Mb]=nn}else{if(!(nn<Yt))break e;for(hn=nn-280,n(dt!=null);Nt<Dt;)nn=P[Nt++],dt.X[(506832829*nn&4294967295)>>>dt.Mb]=nn;nn=Dt,n(!(hn>>>(kn=dt).Xa)),P[nn]=kn.X[hn],hn=!0}hn||n(He.h==fe(He))}if(b.Pb&&He.h&&Dt<_e)n(b.m.h),b.a=5,b.m=b.wd,b.$=b.xd,0<b.s.ua&&ve(b.s.vb,b.s.Wa);else{if(He.h)break e;Ae!=null&&Ae(b,Te>Ee?Ee:Te),b.a=0,b.$=Dt-H}return 1}return b.a=3,0}function Hr(b){n(b!=null),b.vc=null,b.yc=null,b.Ya=null;var P=b.Wa;P!=null&&(P.X=null),b.vb=null,n(b!=null)}function ir(){var b=new cl;return b==null?null:(b.a=0,b.xb=nu,ar("Predictor","VP8LPredictors"),ar("Predictor","VP8LPredictors_C"),ar("PredictorAdd","VP8LPredictorsAdd"),ar("PredictorAdd","VP8LPredictorsAdd_C"),Yu=fn,Sa=et,Vo=nt,Mo=Vt,ia=Qt,Ms=On,Ho=wn,G.VP8LMapColor32b=xa,G.VP8LMapColor8b=Uo,b)}function Or(b,P,H,se,_e){var Ee=1,Ae=[b],Te=[P],Ne=se.m,He=se.s,ht=null,Dt=0;e:for(;;){if(H)for(;Ee&&Pe(Ne,1);){var Nt=Ae,wt=Te,Yt=se,$t=1,dt=Yt.m,yt=Yt.gc[Yt.ab],en=Pe(dt,2);if(Yt.Oc&1<<en)Ee=0;else{switch(Yt.Oc|=1<<en,yt.hc=en,yt.Ea=Nt[0],yt.nc=wt[0],yt.K=[null],++Yt.ab,n(4>=Yt.ab),en){case 0:case 1:yt.b=Pe(dt,3)+2,$t=Or(Qe(yt.Ea,yt.b),Qe(yt.nc,yt.b),0,Yt,yt.K),yt.K=yt.K[0];break;case 3:var hn,nn=Pe(dt,8)+1,kn=16<nn?0:4<nn?1:2<nn?2:3;if(Nt[0]=Qe(yt.Ea,kn),yt.b=kn,hn=$t=Or(nn,1,0,Yt,yt.K)){var Sn,Xn=nn,l=yt,h=1<<(8>>l.b),v=s(h);if(v==null)hn=0;else{var w=l.K[0],C=l.w;for(v[0]=l.K[0][0],Sn=1;Sn<1*Xn;++Sn)v[Sn]=Ke(w[C+Sn],v[Sn-1]);for(;Sn<4*h;++Sn)v[Sn]=0;l.K[0]=null,l.K[0]=v,hn=1}}$t=hn;break;case 2:break;default:n(0)}Ee=$t}}if(Ae=Ae[0],Te=Te[0],Ee&&Pe(Ne,1)&&!(Ee=1<=(Dt=Pe(Ne,4))&&11>=Dt)){se.a=3;break e}var j;if(j=Ee)t:{var X,te,de,Le=se,Je=Ae,ze=Te,vt=Dt,At=H,Xt=Le.m,yn=Le.s,bn=[null],ur=1,Ye=0,tt=Pt[vt];n:for(;;){if(At&&Pe(Xt,1)){var ft=Pe(Xt,3)+2,Bt=Qe(Je,ft),bt=Qe(ze,ft),Tt=Bt*bt;if(!Or(Bt,bt,0,Le,bn))break n;for(bn=bn[0],yn.xc=ft,X=0;X<Tt;++X){var me=bn[X]>>8&65535;bn[X]=me,me>=ur&&(ur=me+1)}}if(Xt.h)break n;for(te=0;5>te;++te){var Me=V[te];!te&&0<vt&&(Me+=1<<vt),Ye<Me&&(Ye=Me)}var Oe=o(ur*tt,I),Be=ur,Fe=o(Be,U);if(Fe==null)var je=null;else n(65536>=Be),je=Fe;var lt=s(Ye);if(je==null||lt==null||Oe==null){Le.a=1;break n}var ut=Oe;for(X=de=0;X<ur;++X){var pt=je[X],Lt=pt.G,St=pt.H,on=0,zn=1,Gn=0;for(te=0;5>te;++te){Me=V[te],Lt[te]=ut,St[te]=de,!te&&0<vt&&(Me+=1<<vt);i:{var Qn,vi=Me,Ai=Le,ei=lt,Ii=ut,ms=de,Su=0,fa=Ai.m,Tf=Pe(fa,1);if(i(ei,0,0,vi),Tf){var Za=Pe(fa,1)+1,Xu=Pe(fa,1),ha=Pe(fa,Xu==0?1:8);ei[ha]=1,Za==2&&(ei[ha=Pe(fa,8)]=1);var Wo=1}else{var oo=s(19),gh=Pe(fa,4)+4;if(19<gh){Ai.a=3;var Df=0;break i}for(Qn=0;Qn<gh;++Qn)oo[Se[Qn]]=Pe(fa,3);var Nf=void 0,Bf=void 0,mh=Ai,ai=oo,vh=vi,jp=ei,Lc=0,Cu=mh.m,zp=8,$p=o(128,I);r:for(;z($p,0,7,ai,19);){if(Pe(Cu,1)){var pl=2+2*Pe(Cu,3);if((Nf=2+Pe(Cu,pl))>vh)break r}else Nf=vh;for(Bf=0;Bf<vh&&Nf--;){he(Cu);var Up=$p[0+(127&J(Cu))];ne(Cu,Cu.u+Up.g);var Eu=Up.value;if(16>Eu)jp[Bf++]=Eu,Eu!=0&&(zp=Eu);else{var md=Eu==16,vd=Eu-16,Vp=S[vd],Aa=Pe(Cu,p[vd])+Vp;if(Bf+Aa>vh)break r;for(var Qu=md?zp:0;0<Aa--;)jp[Bf++]=Qu}}Lc=1;break r}Lc||(mh.a=3),Wo=Lc}(Wo=Wo&&!fa.h)&&(Su=z(Ii,ms,8,ei,vi)),Wo&&Su!=0?Df=Su:(Ai.a=3,Df=0)}if(Df==0)break n;if(zn&&oe[te]==1&&(zn=ut[de].g==0),on+=ut[de].g,de+=Df,3>=te){var Sc,yh=lt[0];for(Sc=1;Sc<Me;++Sc)lt[Sc]>yh&&(yh=lt[Sc]);Gn+=yh}}if(pt.nd=zn,pt.Qb=0,zn&&(pt.qb=(Lt[3][St[3]+0].value<<24|Lt[1][St[1]+0].value<<16|Lt[2][St[2]+0].value)>>>0,on==0&&256>Lt[0][St[0]+0].value&&(pt.Qb=1,pt.qb+=Lt[0][St[0]+0].value<<8)),pt.jc=!pt.Qb&&6>Gn,pt.jc){var Cc,ru=pt;for(Cc=0;Cc<ho;++Cc){var iu=Cc,Pu=ru.pd[iu],Xc=ru.G[0][ru.H[0]+iu];256<=Xc.value?(Pu.g=Xc.g+256,Pu.value=Xc.value):(Pu.g=0,Pu.value=0,iu>>=mr(Xc,8,Pu),iu>>=mr(ru.G[1][ru.H[1]+iu],16,Pu),iu>>=mr(ru.G[2][ru.H[2]+iu],0,Pu),mr(ru.G[3][ru.H[3]+iu],24,Pu))}}}yn.vc=bn,yn.Wb=ur,yn.Ya=je,yn.yc=Oe,j=1;break t}j=0}if(!(Ee=j)){se.a=3;break e}if(0<Dt){if(He.ua=1<<Dt,!pe(He.Wa,Dt)){se.a=1,Ee=0;break e}}else He.ua=0;var Of=se,Mu=Ae,fm=Te,ou=Of.s,_h=ou.xc;if(Of.c=Mu,Of.i=fm,ou.md=Qe(Mu,_h),ou.wc=_h==0?-1:(1<<_h)-1,H){se.xb=Af;break e}if((ht=s(Ae*Te))==null){se.a=1,Ee=0;break e}Ee=(Ee=lr(se,ht,0,Ae,Te,Te,null))&&!Ne.h;break e}return Ee?(_e!=null?_e[0]=ht:(n(ht==null),n(H)),se.$=0,H||Hr(He)):Hr(He),Ee}function jr(b,P){var H=b.c*b.i,se=H+P+16*P;return n(b.c<=P),b.V=s(se),b.V==null?(b.Ta=null,b.Ua=0,b.a=1,0):(b.Ta=b.V,b.Ua=b.Ba+H+P,1)}function rn(b,P){var H=b.C,se=P-H,_e=b.V,Ee=b.Ba+b.c*H;for(n(P<=b.l.o);0<se;){var Ae=16<se?16:se,Te=b.l.ma,Ne=b.l.width,He=Ne*Ae,ht=Te.ca,Dt=Te.tb+Ne*H,Nt=b.Ta,wt=b.Ua;Cn(b,Ae,_e,Ee),io(Nt,wt,ht,Dt,He),Fr(Te,H,H+Ae,ht,Dt,Ne),se-=Ae,_e+=Ae*b.c,H+=Ae}n(H==P),b.C=b.Ma=P}function Fi(){this.ub=this.yd=this.td=this.Rb=0}function _i(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function gi(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Kr(){this.Yb=function(){var b=[];return function P(H,se,_e){for(var Ee=_e[se],Ae=0;Ae<Ee&&(H.push(_e.length>se+1?[]:0),!(_e.length<se+1));Ae++)P(H[Ae],se+1,_e)}(b,0,[3,11]),b}()}function Ir(){this.jb=s(3),this.Wc=u([4,8],Kr),this.Xc=u([4,17],Kr)}function Rr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function hr(){this.ld=this.La=this.dd=this.tc=0}function ji(){this.Na=this.la=0}function Ls(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ss(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function oi(){this.uc=this.M=this.Nb=0,this.wa=Array(new hr),this.Y=0,this.ya=Array(new Ss),this.aa=0,this.l=new ui}function Fn(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Eo(){this.cb=this.a=0,this.sc="",this.m=new Ie,this.Od=new Fi,this.Kc=new _i,this.ed=new Rr,this.Qa=new gi,this.Ic=this.$c=this.Aa=0,this.D=new oi,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Ie),this.ia=0,this.pb=o(4,Ls),this.Pa=new Ir,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Fn),this.Hd=0,this.rb=Array(new ji),this.sb=0,this.wa=Array(new hr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ss),this.L=this.aa=0,this.gd=u([4,2],hr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ui(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function fr(){var b=new Eo;return b!=null&&(b.a=0,b.sc="OK",b.cb=0,b.Xb=0,Jn||(Jn=Lr)),b}function qn(b,P,H){return b.a==0&&(b.a=P,b.sc=H,b.cb=0),0}function _o(b,P,H){return 3<=H&&b[P+0]==157&&b[P+1]==1&&b[P+2]==42}function bo(b,P){if(b==null)return 0;if(b.a=0,b.sc="OK",P==null)return qn(b,2,"null VP8Io passed to VP8GetHeaders()");var H=P.data,se=P.w,_e=P.ha;if(4>_e)return qn(b,7,"Truncated header.");var Ee=H[se+0]|H[se+1]<<8|H[se+2]<<16,Ae=b.Od;if(Ae.Rb=!(1&Ee),Ae.td=Ee>>1&7,Ae.yd=Ee>>4&1,Ae.ub=Ee>>5,3<Ae.td)return qn(b,3,"Incorrect keyframe parameters.");if(!Ae.yd)return qn(b,4,"Frame not displayable.");se+=3,_e-=3;var Te=b.Kc;if(Ae.Rb){if(7>_e)return qn(b,7,"cannot parse picture header");if(!_o(H,se,_e))return qn(b,3,"Bad code word");Te.c=16383&(H[se+4]<<8|H[se+3]),Te.Td=H[se+4]>>6,Te.i=16383&(H[se+6]<<8|H[se+5]),Te.Ud=H[se+6]>>6,se+=7,_e-=7,b.za=Te.c+15>>4,b.Ub=Te.i+15>>4,P.width=Te.c,P.height=Te.i,P.Da=0,P.j=0,P.v=0,P.va=P.width,P.o=P.height,P.da=0,P.ib=P.width,P.hb=P.height,P.U=P.width,P.T=P.height,i((Ee=b.Pa).jb,0,255,Ee.jb.length),n((Ee=b.Qa)!=null),Ee.Cb=0,Ee.Bb=0,Ee.Fb=1,i(Ee.Zb,0,0,Ee.Zb.length),i(Ee.Lb,0,0,Ee.Lb)}if(Ae.ub>_e)return qn(b,7,"bad partition length");W(Ee=b.m,H,se,Ae.ub),se+=Ae.ub,_e-=Ae.ub,Ae.Rb&&(Te.Ld=T(Ee),Te.Kd=T(Ee)),Te=b.Qa;var Ne,He=b.Pa;if(n(Ee!=null),n(Te!=null),Te.Cb=T(Ee),Te.Cb){if(Te.Bb=T(Ee),T(Ee)){for(Te.Fb=T(Ee),Ne=0;4>Ne;++Ne)Te.Zb[Ne]=T(Ee)?ie(Ee,7):0;for(Ne=0;4>Ne;++Ne)Te.Lb[Ne]=T(Ee)?ie(Ee,6):0}if(Te.Bb)for(Ne=0;3>Ne;++Ne)He.jb[Ne]=T(Ee)?q(Ee,8):255}else Te.Bb=0;if(Ee.Ka)return qn(b,3,"cannot parse segment header");if((Te=b.ed).zd=T(Ee),Te.Tb=q(Ee,6),Te.wb=q(Ee,3),Te.Pc=T(Ee),Te.Pc&&T(Ee)){for(He=0;4>He;++He)T(Ee)&&(Te.vd[He]=ie(Ee,6));for(He=0;4>He;++He)T(Ee)&&(Te.od[He]=ie(Ee,6))}if(b.L=Te.Tb==0?0:Te.zd?1:2,Ee.Ka)return qn(b,3,"cannot parse filter header");var ht=_e;if(_e=Ne=se,se=Ne+ht,Te=ht,b.Xb=(1<<q(b.m,2))-1,ht<3*(He=b.Xb))H=7;else{for(Ne+=3*He,Te-=3*He,ht=0;ht<He;++ht){var Dt=H[_e+0]|H[_e+1]<<8|H[_e+2]<<16;Dt>Te&&(Dt=Te),W(b.Jc[+ht],H,Ne,Dt),Ne+=Dt,Te-=Dt,_e+=3}W(b.Jc[+He],H,Ne,Te),H=Ne<se?0:5}if(H!=0)return qn(b,H,"cannot parse partitions");for(H=q(Ne=b.m,7),_e=T(Ne)?ie(Ne,4):0,se=T(Ne)?ie(Ne,4):0,Te=T(Ne)?ie(Ne,4):0,He=T(Ne)?ie(Ne,4):0,Ne=T(Ne)?ie(Ne,4):0,ht=b.Qa,Dt=0;4>Dt;++Dt){if(ht.Cb){var Nt=ht.Zb[Dt];ht.Fb||(Nt+=H)}else{if(0<Dt){b.pb[Dt]=b.pb[0];continue}Nt=H}var wt=b.pb[Dt];wt.Sc[0]=sn[Ur(Nt+_e,127)],wt.Sc[1]=Nn[Ur(Nt+0,127)],wt.Eb[0]=2*sn[Ur(Nt+se,127)],wt.Eb[1]=101581*Nn[Ur(Nt+Te,127)]>>16,8>wt.Eb[1]&&(wt.Eb[1]=8),wt.Qc[0]=sn[Ur(Nt+He,117)],wt.Qc[1]=Nn[Ur(Nt+Ne,127)],wt.lc=Nt+Ne}if(!Ae.Rb)return qn(b,4,"Not a key frame.");for(T(Ee),Ae=b.Pa,H=0;4>H;++H){for(_e=0;8>_e;++_e)for(se=0;3>se;++se)for(Te=0;11>Te;++Te)He=ue(Ee,ps[H][_e][se][Te])?q(Ee,8):Do[H][_e][se][Te],Ae.Wc[H][_e].Yb[se][Te]=He;for(_e=0;17>_e;++_e)Ae.Xc[H][_e]=Ae.Wc[H][wc[_e]]}return b.kc=T(Ee),b.kc&&(b.Bd=q(Ee,8)),b.cb=1}function Lr(b,P,H,se,_e,Ee,Ae){var Te=P[_e].Yb[H];for(H=0;16>_e;++_e){if(!ue(b,Te[H+0]))return _e;for(;!ue(b,Te[H+1]);)if(Te=P[++_e].Yb[0],H=0,_e==16)return 16;var Ne=P[_e+1].Yb;if(ue(b,Te[H+2])){var He=b,ht=0;if(ue(He,(Nt=Te)[(Dt=H)+3]))if(ue(He,Nt[Dt+6])){for(Te=0,Dt=2*(ht=ue(He,Nt[Dt+8]))+(Nt=ue(He,Nt[Dt+9+ht])),ht=0,Nt=zr[Dt];Nt[Te];++Te)ht+=ht+ue(He,Nt[Te]);ht+=3+(8<<Dt)}else ue(He,Nt[Dt+7])?(ht=7+2*ue(He,165),ht+=ue(He,145)):ht=5+ue(He,159);else ht=ue(He,Nt[Dt+4])?3+ue(He,Nt[Dt+5]):2;Te=Ne[2]}else ht=1,Te=Ne[1];Ne=Ae+go[_e],0>(He=b).b&&ae(He);var Dt,Nt=He.b,wt=(Dt=He.Ca>>1)-(He.I>>Nt)>>31;--He.b,He.Ca+=wt,He.Ca|=1,He.I-=(Dt+1&wt)<<Nt,Ee[Ne]=((ht^wt)-wt)*se[(0<_e)+0]}return 16}function Us(b){var P=b.rb[b.sb-1];P.la=0,P.Na=0,i(b.zc,0,0,b.zc.length),b.ja=0}function Hn(b,P){if(b==null)return 0;if(P==null)return qn(b,2,"NULL VP8Io parameter in VP8Decode().");if(!b.cb&&!bo(b,P))return 0;if(n(b.cb),P.ac==null||P.ac(P)){P.ob&&(b.L=0);var H=Ma[b.L];if(b.L==2?(b.yb=0,b.zb=0):(b.yb=P.v-H>>4,b.zb=P.j-H>>4,0>b.yb&&(b.yb=0),0>b.zb&&(b.zb=0)),b.Va=P.o+15+H>>4,b.Hb=P.va+15+H>>4,b.Hb>b.za&&(b.Hb=b.za),b.Va>b.Ub&&(b.Va=b.Ub),0<b.L){var se=b.ed;for(H=0;4>H;++H){var _e;if(b.Qa.Cb){var Ee=b.Qa.Lb[H];b.Qa.Fb||(Ee+=se.Tb)}else Ee=se.Tb;for(_e=0;1>=_e;++_e){var Ae=b.gd[H][_e],Te=Ee;if(se.Pc&&(Te+=se.vd[0],_e&&(Te+=se.od[0])),0<(Te=0>Te?0:63<Te?63:Te)){var Ne=Te;0<se.wb&&(Ne=4<se.wb?Ne>>2:Ne>>1)>9-se.wb&&(Ne=9-se.wb),1>Ne&&(Ne=1),Ae.dd=Ne,Ae.tc=2*Te+Ne,Ae.ld=40<=Te?2:15<=Te?1:0}else Ae.tc=0;Ae.La=_e}}}H=0}else qn(b,6,"Frame setup failed"),H=b.a;if(H=H==0){if(H){b.$c=0,0<b.Aa||(b.Ic=dh);e:{H=b.Ic,se=4*(Ne=b.za);var He=32*Ne,ht=Ne+1,Dt=0<b.L?Ne*(0<b.Aa?2:1):0,Nt=(b.Aa==2?2:1)*Ne;if((Ae=se+832+(_e=3*(16*H+Ma[b.L])/2*He)+(Ee=b.Fa!=null&&0<b.Fa.length?b.Kc.c*b.Kc.i:0))!=Ae)H=0;else{if(Ae>b.Vb){if(b.Vb=0,b.Ec=s(Ae),b.Fc=0,b.Ec==null){H=qn(b,1,"no memory during frame initialization.");break e}b.Vb=Ae}Ae=b.Ec,Te=b.Fc,b.Ac=Ae,b.Bc=Te,Te+=se,b.Gd=o(He,Fn),b.Hd=0,b.rb=o(ht+1,ji),b.sb=1,b.wa=Dt?o(Dt,hr):null,b.Y=0,b.D.Nb=0,b.D.wa=b.wa,b.D.Y=b.Y,0<b.Aa&&(b.D.Y+=Ne),n(!0),b.oc=Ae,b.pc=Te,Te+=832,b.ya=o(Nt,Ss),b.aa=0,b.D.ya=b.ya,b.D.aa=b.aa,b.Aa==2&&(b.D.aa+=Ne),b.R=16*Ne,b.B=8*Ne,Ne=(He=Ma[b.L])*b.R,He=He/2*b.B,b.sa=Ae,b.ta=Te+Ne,b.qa=b.sa,b.ra=b.ta+16*H*b.R+He,b.Ha=b.qa,b.Ia=b.ra+8*H*b.B+He,b.$c=0,Te+=_e,b.mb=Ee?Ae:null,b.nb=Ee?Te:null,n(Te+Ee<=b.Fc+b.Vb),Us(b),i(b.Ac,b.Bc,0,se),H=1}}if(H){if(P.ka=0,P.y=b.sa,P.O=b.ta,P.f=b.qa,P.N=b.ra,P.ea=b.Ha,P.Vd=b.Ia,P.fa=b.R,P.Rc=b.B,P.F=null,P.J=0,!xu){for(H=-255;255>=H;++H)Oi[255+H]=0>H?-H:H;for(H=-1020;1020>=H;++H)As[1020+H]=-128>H?-128:127<H?127:H;for(H=-112;112>=H;++H)hs[112+H]=-16>H?-16:15<H?15:H;for(H=-255;510>=H;++H)Is[255+H]=0>H?0:255<H?255:H;xu=1}_t=Xo,qt=co,An=wo,Kn=Pi,wr=cs,Mt=si,Ui=eu,Li=ta,Rl=Os,ns=Ol,Vi=Nl,oa=Bl,Ca=bi,sa=Ku,aa=eo,la=or,Qr=to,Ws=ul,Ys[0]=Tr,Ys[1]=hi,Ys[2]=br,Ys[3]=Jr,Ys[4]=Fo,Ys[5]=al,Ys[6]=sl,Ys[7]=Hs,Ys[8]=bu,Ys[9]=Va,ca[0]=ya,ca[1]=Ro,ca[2]=Xi,ca[3]=xo,ca[4]=Qi,ca[5]=ol,ca[6]=_a,Rs[0]=Ha,Rs[1]=Bs,Rs[2]=kl,Rs[3]=Sr,Rs[4]=Tl,Rs[5]=Zu,Rs[6]=Xl,H=1}else H=0}H&&(H=function(wt,Yt){for(wt.M=0;wt.M<wt.Va;++wt.M){var $t,dt=wt.Jc[wt.M&wt.Xb],yt=wt.m,en=wt;for($t=0;$t<en.za;++$t){var hn=yt,nn=en,kn=nn.Ac,Sn=nn.Bc+4*$t,Xn=nn.zc,l=nn.ya[nn.aa+$t];if(nn.Qa.Bb?l.$b=ue(hn,nn.Pa.jb[0])?2+ue(hn,nn.Pa.jb[2]):ue(hn,nn.Pa.jb[1]):l.$b=0,nn.kc&&(l.Ad=ue(hn,nn.Bd)),l.Za=!ue(hn,145)+0,l.Za){var h=l.Ob,v=0;for(nn=0;4>nn;++nn){var w,C=Xn[0+nn];for(w=0;4>w;++w){C=Hi[kn[Sn+w]][C];for(var j=Ki[ue(hn,C[0])];0<j;)j=Ki[2*j+ue(hn,C[j])];C=-j,kn[Sn+w]=C}r(h,v,kn,Sn,4),v+=4,Xn[0+nn]=C}}else C=ue(hn,156)?ue(hn,128)?1:3:ue(hn,163)?2:0,l.Ob[0]=C,i(kn,Sn,C,4),i(Xn,0,C,4);l.Dd=ue(hn,142)?ue(hn,114)?ue(hn,183)?1:3:2:0}if(en.m.Ka)return qn(wt,7,"Premature end-of-partition0 encountered.");for(;wt.ja<wt.za;++wt.ja){if(en=dt,hn=(yt=wt).rb[yt.sb-1],kn=yt.rb[yt.sb+yt.ja],$t=yt.ya[yt.aa+yt.ja],Sn=yt.kc?$t.Ad:0)hn.la=kn.la=0,$t.Za||(hn.Na=kn.Na=0),$t.Hc=0,$t.Gc=0,$t.ia=0;else{var X,te;if(hn=kn,kn=en,Sn=yt.Pa.Xc,Xn=yt.ya[yt.aa+yt.ja],l=yt.pb[Xn.$b],nn=Xn.ad,h=0,v=yt.rb[yt.sb-1],C=w=0,i(nn,h,0,384),Xn.Za)var de=0,Le=Sn[3];else{j=s(16);var Je=hn.Na+v.Na;if(Je=Jn(kn,Sn[1],Je,l.Eb,0,j,0),hn.Na=v.Na=(0<Je)+0,1<Je)_t(j,0,nn,h);else{var ze=j[0]+3>>3;for(j=0;256>j;j+=16)nn[h+j]=ze}de=1,Le=Sn[0]}var vt=15&hn.la,At=15&v.la;for(j=0;4>j;++j){var Xt=1&At;for(ze=te=0;4>ze;++ze)vt=vt>>1|(Xt=(Je=Jn(kn,Le,Je=Xt+(1&vt),l.Sc,de,nn,h))>de)<<7,te=te<<2|(3<Je?3:1<Je?2:nn[h+0]!=0),h+=16;vt>>=4,At=At>>1|Xt<<7,w=(w<<8|te)>>>0}for(Le=vt,de=At>>4,X=0;4>X;X+=2){for(te=0,vt=hn.la>>4+X,At=v.la>>4+X,j=0;2>j;++j){for(Xt=1&At,ze=0;2>ze;++ze)Je=Xt+(1&vt),vt=vt>>1|(Xt=0<(Je=Jn(kn,Sn[2],Je,l.Qc,0,nn,h)))<<3,te=te<<2|(3<Je?3:1<Je?2:nn[h+0]!=0),h+=16;vt>>=2,At=At>>1|Xt<<5}C|=te<<4*X,Le|=vt<<4<<X,de|=(240&At)<<X}hn.la=Le,v.la=de,Xn.Hc=w,Xn.Gc=C,Xn.ia=43690&C?0:l.ia,Sn=!(w|C)}if(0<yt.L&&(yt.wa[yt.Y+yt.ja]=yt.gd[$t.$b][$t.Za],yt.wa[yt.Y+yt.ja].La|=!Sn),en.Ka)return qn(wt,7,"Premature end-of-file encountered.")}if(Us(wt),yt=Yt,en=1,$t=(dt=wt).D,hn=0<dt.L&&dt.M>=dt.zb&&dt.M<=dt.Va,dt.Aa==0)e:{if($t.M=dt.M,$t.uc=hn,tu(dt,$t),en=1,$t=(te=dt.D).Nb,hn=(C=Ma[dt.L])*dt.R,kn=C/2*dt.B,j=16*$t*dt.R,ze=8*$t*dt.B,Sn=dt.sa,Xn=dt.ta-hn+j,l=dt.qa,nn=dt.ra-kn+ze,h=dt.Ha,v=dt.Ia-kn+ze,At=(vt=te.M)==0,w=vt>=dt.Va-1,dt.Aa==2&&tu(dt,te),te.uc)for(Xt=(Je=dt).D.M,n(Je.D.uc),te=Je.yb;te<Je.Hb;++te){de=te,Le=Xt;var yn=(bn=(Me=Je).D).Nb;X=Me.R;var bn=bn.wa[bn.Y+de],ur=Me.sa,Ye=Me.ta+16*yn*X+16*de,tt=bn.dd,ft=bn.tc;if(ft!=0)if(n(3<=ft),Me.L==1)0<de&&la(ur,Ye,X,ft+4),bn.La&&Ws(ur,Ye,X,ft),0<Le&&aa(ur,Ye,X,ft+4),bn.La&&Qr(ur,Ye,X,ft);else{var Bt=Me.B,bt=Me.qa,Tt=Me.ra+8*yn*Bt+8*de,me=Me.Ha,Me=Me.Ia+8*yn*Bt+8*de;yn=bn.ld,0<de&&(Li(ur,Ye,X,ft+4,tt,yn),ns(bt,Tt,me,Me,Bt,ft+4,tt,yn)),bn.La&&(oa(ur,Ye,X,ft,tt,yn),sa(bt,Tt,me,Me,Bt,ft,tt,yn)),0<Le&&(Ui(ur,Ye,X,ft+4,tt,yn),Rl(bt,Tt,me,Me,Bt,ft+4,tt,yn)),bn.La&&(Vi(ur,Ye,X,ft,tt,yn),Ca(bt,Tt,me,Me,Bt,ft,tt,yn))}}if(dt.ia&&alert("todo:DitherRow"),yt.put!=null){if(te=16*vt,vt=16*(vt+1),At?(yt.y=dt.sa,yt.O=dt.ta+j,yt.f=dt.qa,yt.N=dt.ra+ze,yt.ea=dt.Ha,yt.W=dt.Ia+ze):(te-=C,yt.y=Sn,yt.O=Xn,yt.f=l,yt.N=nn,yt.ea=h,yt.W=v),w||(vt-=C),vt>yt.o&&(vt=yt.o),yt.F=null,yt.J=null,dt.Fa!=null&&0<dt.Fa.length&&te<vt&&(yt.J=no(dt,yt,te,vt-te),yt.F=dt.mb,yt.F==null&&yt.F.length==0)){en=qn(dt,3,"Could not decode alpha data.");break e}te<yt.j&&(C=yt.j-te,te=yt.j,n(!(1&C)),yt.O+=dt.R*C,yt.N+=dt.B*(C>>1),yt.W+=dt.B*(C>>1),yt.F!=null&&(yt.J+=yt.width*C)),te<vt&&(yt.O+=yt.v,yt.N+=yt.v>>1,yt.W+=yt.v>>1,yt.F!=null&&(yt.J+=yt.v),yt.ka=te-yt.j,yt.U=yt.va-yt.v,yt.T=vt-te,en=yt.put(yt))}$t+1!=dt.Ic||w||(r(dt.sa,dt.ta-hn,Sn,Xn+16*dt.R,hn),r(dt.qa,dt.ra-kn,l,nn+8*dt.B,kn),r(dt.Ha,dt.Ia-kn,h,v+8*dt.B,kn))}if(!en)return qn(wt,6,"Output aborted.")}return 1}(b,P)),P.bc!=null&&P.bc(P),H&=1}return H?(b.cb=0,H):0}function _r(b,P,H,se,_e){_e=b[P+H+32*se]+(_e>>3),b[P+H+32*se]=-256&_e?0>_e?0:255:_e}function Yr(b,P,H,se,_e,Ee){_r(b,P,0,H,se+_e),_r(b,P,1,H,se+Ee),_r(b,P,2,H,se-Ee),_r(b,P,3,H,se-_e)}function _n(b){return(20091*b>>16)+b}function tn(b,P,H,se){var _e,Ee=0,Ae=s(16);for(_e=0;4>_e;++_e){var Te=b[P+0]+b[P+8],Ne=b[P+0]-b[P+8],He=(35468*b[P+4]>>16)-_n(b[P+12]),ht=_n(b[P+4])+(35468*b[P+12]>>16);Ae[Ee+0]=Te+ht,Ae[Ee+1]=Ne+He,Ae[Ee+2]=Ne-He,Ae[Ee+3]=Te-ht,Ee+=4,P++}for(_e=Ee=0;4>_e;++_e)Te=(b=Ae[Ee+0]+4)+Ae[Ee+8],Ne=b-Ae[Ee+8],He=(35468*Ae[Ee+4]>>16)-_n(Ae[Ee+12]),_r(H,se,0,0,Te+(ht=_n(Ae[Ee+4])+(35468*Ae[Ee+12]>>16))),_r(H,se,1,0,Ne+He),_r(H,se,2,0,Ne-He),_r(H,se,3,0,Te-ht),Ee++,se+=32}function si(b,P,H,se){var _e=b[P+0]+4,Ee=35468*b[P+4]>>16,Ae=_n(b[P+4]),Te=35468*b[P+1]>>16;Yr(H,se,0,_e+Ae,b=_n(b[P+1]),Te),Yr(H,se,1,_e+Ee,b,Te),Yr(H,se,2,_e-Ee,b,Te),Yr(H,se,3,_e-Ae,b,Te)}function co(b,P,H,se,_e){tn(b,P,H,se),_e&&tn(b,P+16,H,se+4)}function wo(b,P,H,se){qt(b,P+0,H,se,1),qt(b,P+32,H,se+128,1)}function Pi(b,P,H,se){var _e;for(b=b[P+0]+4,_e=0;4>_e;++_e)for(P=0;4>P;++P)_r(H,se,P,_e,b)}function cs(b,P,H,se){b[P+0]&&Kn(b,P+0,H,se),b[P+16]&&Kn(b,P+16,H,se+4),b[P+32]&&Kn(b,P+32,H,se+128),b[P+48]&&Kn(b,P+48,H,se+128+4)}function Xo(b,P,H,se){var _e,Ee=s(16);for(_e=0;4>_e;++_e){var Ae=b[P+0+_e]+b[P+12+_e],Te=b[P+4+_e]+b[P+8+_e],Ne=b[P+4+_e]-b[P+8+_e],He=b[P+0+_e]-b[P+12+_e];Ee[0+_e]=Ae+Te,Ee[8+_e]=Ae-Te,Ee[4+_e]=He+Ne,Ee[12+_e]=He-Ne}for(_e=0;4>_e;++_e)Ae=(b=Ee[0+4*_e]+3)+Ee[3+4*_e],Te=Ee[1+4*_e]+Ee[2+4*_e],Ne=Ee[1+4*_e]-Ee[2+4*_e],He=b-Ee[3+4*_e],H[se+0]=Ae+Te>>3,H[se+16]=He+Ne>>3,H[se+32]=Ae-Te>>3,H[se+48]=He-Ne>>3,se+=64}function Io(b,P,H){var se,_e=P-32,Ee=Bi,Ae=255-b[_e-1];for(se=0;se<H;++se){var Te,Ne=Ee,He=Ae+b[P-1];for(Te=0;Te<H;++Te)b[P+Te]=Ne[He+b[_e+Te]];P+=32}}function hi(b,P){Io(b,P,4)}function Bs(b,P){Io(b,P,8)}function Ro(b,P){Io(b,P,16)}function Xi(b,P){var H;for(H=0;16>H;++H)r(b,P+32*H,b,P-32,16)}function xo(b,P){var H;for(H=16;0<H;--H)i(b,P,b[P-1],16),P+=32}function Vs(b,P,H){var se;for(se=0;16>se;++se)i(P,H+32*se,b,16)}function ya(b,P){var H,se=16;for(H=0;16>H;++H)se+=b[P-1+32*H]+b[P+H-32];Vs(se>>5,b,P)}function Qi(b,P){var H,se=8;for(H=0;16>H;++H)se+=b[P-1+32*H];Vs(se>>4,b,P)}function ol(b,P){var H,se=8;for(H=0;16>H;++H)se+=b[P+H-32];Vs(se>>4,b,P)}function _a(b,P){Vs(128,b,P)}function pr(b,P,H){return b+2*P+H+2>>2}function br(b,P){var H,se=P-32;for(se=new Uint8Array([pr(b[se-1],b[se+0],b[se+1]),pr(b[se+0],b[se+1],b[se+2]),pr(b[se+1],b[se+2],b[se+3]),pr(b[se+2],b[se+3],b[se+4])]),H=0;4>H;++H)r(b,P+32*H,se,0,se.length)}function Jr(b,P){var H=b[P-1],se=b[P-1+32],_e=b[P-1+64],Ee=b[P-1+96];ke(b,P+0,16843009*pr(b[P-1-32],H,se)),ke(b,P+32,16843009*pr(H,se,_e)),ke(b,P+64,16843009*pr(se,_e,Ee)),ke(b,P+96,16843009*pr(_e,Ee,Ee))}function Tr(b,P){var H,se=4;for(H=0;4>H;++H)se+=b[P+H-32]+b[P-1+32*H];for(se>>=3,H=0;4>H;++H)i(b,P+32*H,se,4)}function Fo(b,P){var H=b[P-1+0],se=b[P-1+32],_e=b[P-1+64],Ee=b[P-1-32],Ae=b[P+0-32],Te=b[P+1-32],Ne=b[P+2-32],He=b[P+3-32];b[P+0+96]=pr(se,_e,b[P-1+96]),b[P+1+96]=b[P+0+64]=pr(H,se,_e),b[P+2+96]=b[P+1+64]=b[P+0+32]=pr(Ee,H,se),b[P+3+96]=b[P+2+64]=b[P+1+32]=b[P+0+0]=pr(Ae,Ee,H),b[P+3+64]=b[P+2+32]=b[P+1+0]=pr(Te,Ae,Ee),b[P+3+32]=b[P+2+0]=pr(Ne,Te,Ae),b[P+3+0]=pr(He,Ne,Te)}function sl(b,P){var H=b[P+1-32],se=b[P+2-32],_e=b[P+3-32],Ee=b[P+4-32],Ae=b[P+5-32],Te=b[P+6-32],Ne=b[P+7-32];b[P+0+0]=pr(b[P+0-32],H,se),b[P+1+0]=b[P+0+32]=pr(H,se,_e),b[P+2+0]=b[P+1+32]=b[P+0+64]=pr(se,_e,Ee),b[P+3+0]=b[P+2+32]=b[P+1+64]=b[P+0+96]=pr(_e,Ee,Ae),b[P+3+32]=b[P+2+64]=b[P+1+96]=pr(Ee,Ae,Te),b[P+3+64]=b[P+2+96]=pr(Ae,Te,Ne),b[P+3+96]=pr(Te,Ne,Ne)}function al(b,P){var H=b[P-1+0],se=b[P-1+32],_e=b[P-1+64],Ee=b[P-1-32],Ae=b[P+0-32],Te=b[P+1-32],Ne=b[P+2-32],He=b[P+3-32];b[P+0+0]=b[P+1+64]=Ee+Ae+1>>1,b[P+1+0]=b[P+2+64]=Ae+Te+1>>1,b[P+2+0]=b[P+3+64]=Te+Ne+1>>1,b[P+3+0]=Ne+He+1>>1,b[P+0+96]=pr(_e,se,H),b[P+0+64]=pr(se,H,Ee),b[P+0+32]=b[P+1+96]=pr(H,Ee,Ae),b[P+1+32]=b[P+2+96]=pr(Ee,Ae,Te),b[P+2+32]=b[P+3+96]=pr(Ae,Te,Ne),b[P+3+32]=pr(Te,Ne,He)}function Hs(b,P){var H=b[P+0-32],se=b[P+1-32],_e=b[P+2-32],Ee=b[P+3-32],Ae=b[P+4-32],Te=b[P+5-32],Ne=b[P+6-32],He=b[P+7-32];b[P+0+0]=H+se+1>>1,b[P+1+0]=b[P+0+64]=se+_e+1>>1,b[P+2+0]=b[P+1+64]=_e+Ee+1>>1,b[P+3+0]=b[P+2+64]=Ee+Ae+1>>1,b[P+0+32]=pr(H,se,_e),b[P+1+32]=b[P+0+96]=pr(se,_e,Ee),b[P+2+32]=b[P+1+96]=pr(_e,Ee,Ae),b[P+3+32]=b[P+2+96]=pr(Ee,Ae,Te),b[P+3+64]=pr(Ae,Te,Ne),b[P+3+96]=pr(Te,Ne,He)}function Va(b,P){var H=b[P-1+0],se=b[P-1+32],_e=b[P-1+64],Ee=b[P-1+96];b[P+0+0]=H+se+1>>1,b[P+2+0]=b[P+0+32]=se+_e+1>>1,b[P+2+32]=b[P+0+64]=_e+Ee+1>>1,b[P+1+0]=pr(H,se,_e),b[P+3+0]=b[P+1+32]=pr(se,_e,Ee),b[P+3+32]=b[P+1+64]=pr(_e,Ee,Ee),b[P+3+64]=b[P+2+64]=b[P+0+96]=b[P+1+96]=b[P+2+96]=b[P+3+96]=Ee}function bu(b,P){var H=b[P-1+0],se=b[P-1+32],_e=b[P-1+64],Ee=b[P-1+96],Ae=b[P-1-32],Te=b[P+0-32],Ne=b[P+1-32],He=b[P+2-32];b[P+0+0]=b[P+2+32]=H+Ae+1>>1,b[P+0+32]=b[P+2+64]=se+H+1>>1,b[P+0+64]=b[P+2+96]=_e+se+1>>1,b[P+0+96]=Ee+_e+1>>1,b[P+3+0]=pr(Te,Ne,He),b[P+2+0]=pr(Ae,Te,Ne),b[P+1+0]=b[P+3+32]=pr(H,Ae,Te),b[P+1+32]=b[P+3+64]=pr(se,H,Ae),b[P+1+64]=b[P+3+96]=pr(_e,se,H),b[P+1+96]=pr(Ee,_e,se)}function kl(b,P){var H;for(H=0;8>H;++H)r(b,P+32*H,b,P-32,8)}function Sr(b,P){var H;for(H=0;8>H;++H)i(b,P,b[P-1],8),P+=32}function Gr(b,P,H){var se;for(se=0;8>se;++se)i(P,H+32*se,b,8)}function Ha(b,P){var H,se=8;for(H=0;8>H;++H)se+=b[P+H-32]+b[P-1+32*H];Gr(se>>4,b,P)}function Zu(b,P){var H,se=4;for(H=0;8>H;++H)se+=b[P+H-32];Gr(se>>3,b,P)}function Tl(b,P){var H,se=4;for(H=0;8>H;++H)se+=b[P-1+32*H];Gr(se>>3,b,P)}function Xl(b,P){Gr(128,b,P)}function ll(b,P,H){var se=b[P-H],_e=b[P+0],Ee=3*(_e-se)+ua[1020+b[P-2*H]-b[P+H]],Ae=po[112+(Ee+4>>3)];b[P-H]=Bi[255+se+po[112+(Ee+3>>3)]],b[P+0]=Bi[255+_e-Ae]}function Dl(b,P,H,se){var _e=b[P+0],Ee=b[P+H];return Go[255+b[P-2*H]-b[P-H]]>se||Go[255+Ee-_e]>se}function Ql(b,P,H,se){return 4*Go[255+b[P-H]-b[P+0]]+Go[255+b[P-2*H]-b[P+H]]<=se}function Xr(b,P,H,se,_e){var Ee=b[P-3*H],Ae=b[P-2*H],Te=b[P-H],Ne=b[P+0],He=b[P+H],ht=b[P+2*H],Dt=b[P+3*H];return 4*Go[255+Te-Ne]+Go[255+Ae-He]>se?0:Go[255+b[P-4*H]-Ee]<=_e&&Go[255+Ee-Ae]<=_e&&Go[255+Ae-Te]<=_e&&Go[255+Dt-ht]<=_e&&Go[255+ht-He]<=_e&&Go[255+He-Ne]<=_e}function eo(b,P,H,se){var _e=2*se+1;for(se=0;16>se;++se)Ql(b,P+se,H,_e)&&ll(b,P+se,H)}function or(b,P,H,se){var _e=2*se+1;for(se=0;16>se;++se)Ql(b,P+se*H,1,_e)&&ll(b,P+se*H,1)}function to(b,P,H,se){var _e;for(_e=3;0<_e;--_e)eo(b,P+=4*H,H,se)}function ul(b,P,H,se){var _e;for(_e=3;0<_e;--_e)or(b,P+=4,H,se)}function ba(b,P,H,se,_e,Ee,Ae,Te){for(Ee=2*Ee+1;0<_e--;){if(Xr(b,P,H,Ee,Ae))if(Dl(b,P,H,Te))ll(b,P,H);else{var Ne=b,He=P,ht=H,Dt=Ne[He-2*ht],Nt=Ne[He-ht],wt=Ne[He+0],Yt=Ne[He+ht],$t=Ne[He+2*ht],dt=27*(en=ua[1020+3*(wt-Nt)+ua[1020+Dt-Yt]])+63>>7,yt=18*en+63>>7,en=9*en+63>>7;Ne[He-3*ht]=Bi[255+Ne[He-3*ht]+en],Ne[He-2*ht]=Bi[255+Dt+yt],Ne[He-ht]=Bi[255+Nt+dt],Ne[He+0]=Bi[255+wt-dt],Ne[He+ht]=Bi[255+Yt-yt],Ne[He+2*ht]=Bi[255+$t-en]}P+=se}}function $i(b,P,H,se,_e,Ee,Ae,Te){for(Ee=2*Ee+1;0<_e--;){if(Xr(b,P,H,Ee,Ae))if(Dl(b,P,H,Te))ll(b,P,H);else{var Ne=b,He=P,ht=H,Dt=Ne[He-ht],Nt=Ne[He+0],wt=Ne[He+ht],Yt=po[112+(($t=3*(Nt-Dt))+4>>3)],$t=po[112+($t+3>>3)],dt=Yt+1>>1;Ne[He-2*ht]=Bi[255+Ne[He-2*ht]+dt],Ne[He-ht]=Bi[255+Dt+$t],Ne[He+0]=Bi[255+Nt-Yt],Ne[He+ht]=Bi[255+wt-dt]}P+=se}}function eu(b,P,H,se,_e,Ee){ba(b,P,H,1,16,se,_e,Ee)}function ta(b,P,H,se,_e,Ee){ba(b,P,1,H,16,se,_e,Ee)}function Nl(b,P,H,se,_e,Ee){var Ae;for(Ae=3;0<Ae;--Ae)$i(b,P+=4*H,H,1,16,se,_e,Ee)}function Bl(b,P,H,se,_e,Ee){var Ae;for(Ae=3;0<Ae;--Ae)$i(b,P+=4,1,H,16,se,_e,Ee)}function Os(b,P,H,se,_e,Ee,Ae,Te){ba(b,P,_e,1,8,Ee,Ae,Te),ba(H,se,_e,1,8,Ee,Ae,Te)}function Ol(b,P,H,se,_e,Ee,Ae,Te){ba(b,P,1,_e,8,Ee,Ae,Te),ba(H,se,1,_e,8,Ee,Ae,Te)}function bi(b,P,H,se,_e,Ee,Ae,Te){$i(b,P+4*_e,_e,1,8,Ee,Ae,Te),$i(H,se+4*_e,_e,1,8,Ee,Ae,Te)}function Ku(b,P,H,se,_e,Ee,Ae,Te){$i(b,P+4,1,_e,8,Ee,Ae,Te),$i(H,se+4,1,_e,8,Ee,Ae,Te)}function Po(){this.ba=new cr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new mt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Gs(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Il(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function qs(){this.ua=0,this.Wa=new ge,this.vb=new ge,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new U,this.yc=new I}function cl(){this.xb=this.a=0,this.l=new ui,this.ca=new cr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new A,this.Pb=0,this.wd=new A,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new qs,this.ab=0,this.gc=o(4,Il),this.Oc=0}function fl(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ui,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function wi(b,P,H,se,_e,Ee,Ae){for(b=b==null?0:b[P+0],P=0;P<Ae;++P)_e[Ee+P]=b+H[se+P]&255,b=_e[Ee+P]}function Cs(b,P,H,se,_e,Ee,Ae){var Te;if(b==null)wi(null,null,H,se,_e,Ee,Ae);else for(Te=0;Te<Ae;++Te)_e[Ee+Te]=b[P+Te]+H[se+Te]&255}function wa(b,P,H,se,_e,Ee,Ae){if(b==null)wi(null,null,H,se,_e,Ee,Ae);else{var Te,Ne=b[P+0],He=Ne,ht=Ne;for(Te=0;Te<Ae;++Te)He=ht+(Ne=b[P+Te])-He,ht=H[se+Te]+(-256&He?0>He?0:255:He)&255,He=Ne,_e[Ee+Te]=ht}}function no(b,P,H,se){var _e=P.width,Ee=P.o;if(n(b!=null&&P!=null),0>H||0>=se||H+se>Ee)return null;if(!b.Cc){if(b.ga==null){var Ae;if(b.ga=new fl,(Ae=b.ga==null)||(Ae=P.width*P.o,n(b.Gb.length==0),b.Gb=s(Ae),b.Uc=0,b.Gb==null?Ae=0:(b.mb=b.Gb,b.nb=b.Uc,b.rc=null,Ae=1),Ae=!Ae),!Ae){Ae=b.ga;var Te=b.Fa,Ne=b.P,He=b.qc,ht=b.mb,Dt=b.nb,Nt=Ne+1,wt=He-1,Yt=Ae.l;if(n(Te!=null&&ht!=null&&P!=null),mi[0]=null,mi[1]=wi,mi[2]=Cs,mi[3]=wa,Ae.ca=ht,Ae.tb=Dt,Ae.c=P.width,Ae.i=P.height,n(0<Ae.c&&0<Ae.i),1>=He)P=0;else if(Ae.$a=Te[Ne+0]>>0&3,Ae.Z=Te[Ne+0]>>2&3,Ae.Lc=Te[Ne+0]>>4&3,Ne=Te[Ne+0]>>6&3,0>Ae.$a||1<Ae.$a||4<=Ae.Z||1<Ae.Lc||Ne)P=0;else if(Yt.put=Zn,Yt.ac=tr,Yt.bc=Zt,Yt.ma=Ae,Yt.width=P.width,Yt.height=P.height,Yt.Da=P.Da,Yt.v=P.v,Yt.va=P.va,Yt.j=P.j,Yt.o=P.o,Ae.$a)e:{n(Ae.$a==1),P=ir();t:for(;;){if(P==null){P=0;break e}if(n(Ae!=null),Ae.mc=P,P.c=Ae.c,P.i=Ae.i,P.l=Ae.l,P.l.ma=Ae,P.l.width=Ae.c,P.l.height=Ae.i,P.a=0,re(P.m,Te,Nt,wt),!Or(Ae.c,Ae.i,1,P,null)||(P.ab==1&&P.gc[0].hc==3&&Ni(P.s)?(Ae.ic=1,Te=P.c*P.i,P.Ta=null,P.Ua=0,P.V=s(Te),P.Ba=0,P.V==null?(P.a=1,P=0):P=1):(Ae.ic=0,P=jr(P,Ae.c)),!P))break t;P=1;break e}Ae.mc=null,P=0}else P=wt>=Ae.c*Ae.i;Ae=!P}if(Ae)return null;b.ga.Lc!=1?b.Ga=0:se=Ee-H}n(b.ga!=null),n(H+se<=Ee);e:{if(P=(Te=b.ga).c,Ee=Te.l.o,Te.$a==0){if(Nt=b.rc,wt=b.Vc,Yt=b.Fa,Ne=b.P+1+H*P,He=b.mb,ht=b.nb+H*P,n(Ne<=b.P+b.qc),Te.Z!=0)for(n(mi[Te.Z]!=null),Ae=0;Ae<se;++Ae)mi[Te.Z](Nt,wt,Yt,Ne,He,ht,P),Nt=He,wt=ht,ht+=P,Ne+=P;else for(Ae=0;Ae<se;++Ae)r(He,ht,Yt,Ne,P),Nt=He,wt=ht,ht+=P,Ne+=P;b.rc=Nt,b.Vc=wt}else{if(n(Te.mc!=null),P=H+se,n((Ae=Te.mc)!=null),n(P<=Ae.i),Ae.C>=P)P=1;else if(Te.ic||xt(),Te.ic){Te=Ae.V,Nt=Ae.Ba,wt=Ae.c;var $t=Ae.i,dt=(Yt=1,Ne=Ae.$/wt,He=Ae.$%wt,ht=Ae.m,Dt=Ae.s,Ae.$),yt=wt*$t,en=wt*P,hn=Dt.wc,nn=dt<en?at(Dt,He,Ne):null;n(dt<=yt),n(P<=$t),n(Ni(Dt));t:for(;;){for(;!ht.h&&dt<en;){if(He&hn||(nn=at(Dt,He,Ne)),n(nn!=null),he(ht),256>($t=Ln(nn.G[0],nn.H[0],ht)))Te[Nt+dt]=$t,++dt,++He>=wt&&(He=0,++Ne<=P&&!(Ne%16)&&Er(Ae,Ne));else{if(!(280>$t)){Yt=0;break t}$t=It($t-256,ht);var kn,Sn=Ln(nn.G[4],nn.H[4],ht);if(he(ht),!(dt>=(Sn=Kt(wt,Sn=It(Sn,ht)))&&yt-dt>=$t)){Yt=0;break t}for(kn=0;kn<$t;++kn)Te[Nt+dt+kn]=Te[Nt+dt+kn-Sn];for(dt+=$t,He+=$t;He>=wt;)He-=wt,++Ne<=P&&!(Ne%16)&&Er(Ae,Ne);dt<en&&He&hn&&(nn=at(Dt,He,Ne))}n(ht.h==fe(ht))}Er(Ae,Ne>P?P:Ne);break t}!Yt||ht.h&&dt<yt?(Yt=0,Ae.a=ht.h?5:3):Ae.$=dt,P=Yt}else P=lr(Ae,Ae.V,Ae.Ba,Ae.c,Ae.i,P,rn);if(!P){se=0;break e}}H+se>=Ee&&(b.Cc=1),se=1}if(!se)return null;if(b.Cc&&((se=b.ga)!=null&&(se.mc=null),b.ga=null,0<b.Ga))return alert("todo:WebPDequantizeLevels"),null}return b.nb+H*_e}function B(b,P,H,se,_e,Ee){for(;0<_e--;){var Ae,Te=b,Ne=P+(H?1:0),He=b,ht=P+(H?0:3);for(Ae=0;Ae<se;++Ae){var Dt=He[ht+4*Ae];Dt!=255&&(Dt*=32897,Te[Ne+4*Ae+0]=Te[Ne+4*Ae+0]*Dt>>23,Te[Ne+4*Ae+1]=Te[Ne+4*Ae+1]*Dt>>23,Te[Ne+4*Ae+2]=Te[Ne+4*Ae+2]*Dt>>23)}P+=Ee}}function ye(b,P,H,se,_e){for(;0<se--;){var Ee;for(Ee=0;Ee<H;++Ee){var Ae=b[P+2*Ee+0],Te=15&(He=b[P+2*Ee+1]),Ne=4369*Te,He=(240&He|He>>4)*Ne>>16;b[P+2*Ee+0]=(240&Ae|Ae>>4)*Ne>>16&240|(15&Ae|Ae<<4)*Ne>>16>>4&15,b[P+2*Ee+1]=240&He|Te}P+=_e}}function Ze(b,P,H,se,_e,Ee,Ae,Te){var Ne,He,ht=255;for(He=0;He<_e;++He){for(Ne=0;Ne<se;++Ne){var Dt=b[P+Ne];Ee[Ae+4*Ne]=Dt,ht&=Dt}P+=H,Ae+=Te}return ht!=255}function ct(b,P,H,se,_e){var Ee;for(Ee=0;Ee<_e;++Ee)H[se+Ee]=b[P+Ee]>>8}function xt(){Ao=B,Si=ye,Mi=Ze,io=ct}function jt(b,P,H){G[b]=function(se,_e,Ee,Ae,Te,Ne,He,ht,Dt,Nt,wt,Yt,$t,dt,yt,en,hn){var nn,kn=hn-1>>1,Sn=Te[Ne+0]|He[ht+0]<<16,Xn=Dt[Nt+0]|wt[Yt+0]<<16;n(se!=null);var l=3*Sn+Xn+131074>>2;for(P(se[_e+0],255&l,l>>16,$t,dt),Ee!=null&&(l=3*Xn+Sn+131074>>2,P(Ee[Ae+0],255&l,l>>16,yt,en)),nn=1;nn<=kn;++nn){var h=Te[Ne+nn]|He[ht+nn]<<16,v=Dt[Nt+nn]|wt[Yt+nn]<<16,w=Sn+h+Xn+v+524296,C=w+2*(h+Xn)>>3;l=C+Sn>>1,Sn=(w=w+2*(Sn+v)>>3)+h>>1,P(se[_e+2*nn-1],255&l,l>>16,$t,dt+(2*nn-1)*H),P(se[_e+2*nn-0],255&Sn,Sn>>16,$t,dt+(2*nn-0)*H),Ee!=null&&(l=w+Xn>>1,Sn=C+v>>1,P(Ee[Ae+2*nn-1],255&l,l>>16,yt,en+(2*nn-1)*H),P(Ee[Ae+2*nn+0],255&Sn,Sn>>16,yt,en+(2*nn+0)*H)),Sn=h,Xn=v}1&hn||(l=3*Sn+Xn+131074>>2,P(se[_e+hn-1],255&l,l>>16,$t,dt+(hn-1)*H),Ee!=null&&(l=3*Xn+Sn+131074>>2,P(Ee[Ae+hn-1],255&l,l>>16,yt,en+(hn-1)*H)))}}function cn(){qo[ds]=De,qo[dr]=Lu,qo[Ea]=gs,qo[Pa]=No,qo[Zs]=Vr,qo[rs]=Wc,qo[bc]=uh,qo[ko]=Lu,qo[To]=No,qo[Ks]=Vr,qo[a]=Wc}function Dn(b){return b&-16384?0>b?0:255:b>>pd}function jn(b,P){return Dn((19077*b>>8)+(26149*P>>8)-14234)}function nr(b,P,H){return Dn((19077*b>>8)-(6419*P>>8)-(13320*H>>8)+8708)}function vr(b,P){return Dn((19077*b>>8)+(33050*P>>8)-17685)}function $r(b,P,H,se,_e){se[_e+0]=jn(b,H),se[_e+1]=nr(b,P,H),se[_e+2]=vr(b,P)}function zi(b,P,H,se,_e){se[_e+0]=vr(b,P),se[_e+1]=nr(b,P,H),se[_e+2]=jn(b,H)}function di(b,P,H,se,_e){var Ee=nr(b,P,H);P=Ee<<3&224|vr(b,P)>>3,se[_e+0]=248&jn(b,H)|Ee>>5,se[_e+1]=P}function xi(b,P,H,se,_e){var Ee=240&vr(b,P)|15;se[_e+0]=240&jn(b,H)|nr(b,P,H)>>4,se[_e+1]=Ee}function ro(b,P,H,se,_e){se[_e+0]=255,$r(b,P,H,se,_e+1)}function fo(b,P,H,se,_e){zi(b,P,H,se,_e),se[_e+3]=255}function Es(b,P,H,se,_e){$r(b,P,H,se,_e),se[_e+3]=255}function Ur(b,P){return 0>b?0:b>P?P:b}function jo(b,P,H){G[b]=function(se,_e,Ee,Ae,Te,Ne,He,ht,Dt){for(var Nt=ht+(-2&Dt)*H;ht!=Nt;)P(se[_e+0],Ee[Ae+0],Te[Ne+0],He,ht),P(se[_e+1],Ee[Ae+0],Te[Ne+0],He,ht+H),_e+=2,++Ae,++Ne,ht+=2*H;1&Dt&&P(se[_e+0],Ee[Ae+0],Te[Ne+0],He,ht)}}function hl(b,P,H){return H==0?b==0?P==0?6:5:P==0?4:0:H}function Qo(b,P,H,se,_e){switch(b>>>30){case 3:qt(P,H,se,_e,0);break;case 2:Mt(P,H,se,_e);break;case 1:Kn(P,H,se,_e)}}function tu(b,P){var H,se,_e=P.M,Ee=P.Nb,Ae=b.oc,Te=b.pc+40,Ne=b.oc,He=b.pc+584,ht=b.oc,Dt=b.pc+600;for(H=0;16>H;++H)Ae[Te+32*H-1]=129;for(H=0;8>H;++H)Ne[He+32*H-1]=129,ht[Dt+32*H-1]=129;for(0<_e?Ae[Te-1-32]=Ne[He-1-32]=ht[Dt-1-32]=129:(i(Ae,Te-32-1,127,21),i(Ne,He-32-1,127,9),i(ht,Dt-32-1,127,9)),se=0;se<b.za;++se){var Nt=P.ya[P.aa+se];if(0<se){for(H=-1;16>H;++H)r(Ae,Te+32*H-4,Ae,Te+32*H+12,4);for(H=-1;8>H;++H)r(Ne,He+32*H-4,Ne,He+32*H+4,4),r(ht,Dt+32*H-4,ht,Dt+32*H+4,4)}var wt=b.Gd,Yt=b.Hd+se,$t=Nt.ad,dt=Nt.Hc;if(0<_e&&(r(Ae,Te-32,wt[Yt].y,0,16),r(Ne,He-32,wt[Yt].f,0,8),r(ht,Dt-32,wt[Yt].ea,0,8)),Nt.Za){var yt=Ae,en=Te-32+16;for(0<_e&&(se>=b.za-1?i(yt,en,wt[Yt].y[15],4):r(yt,en,wt[Yt+1].y,0,4)),H=0;4>H;H++)yt[en+128+H]=yt[en+256+H]=yt[en+384+H]=yt[en+0+H];for(H=0;16>H;++H,dt<<=2)yt=Ae,en=Te+fh[H],Ys[Nt.Ob[H]](yt,en),Qo(dt,$t,16*+H,yt,en)}else if(yt=hl(se,_e,Nt.Ob[0]),ca[yt](Ae,Te),dt!=0)for(H=0;16>H;++H,dt<<=2)Qo(dt,$t,16*+H,Ae,Te+fh[H]);for(H=Nt.Gc,yt=hl(se,_e,Nt.Dd),Rs[yt](Ne,He),Rs[yt](ht,Dt),dt=$t,yt=Ne,en=He,255&(Nt=H>>0)&&(170&Nt?An(dt,256,yt,en):wr(dt,256,yt,en)),Nt=ht,dt=Dt,255&(H>>=8)&&(170&H?An($t,320,Nt,dt):wr($t,320,Nt,dt)),_e<b.Ub-1&&(r(wt[Yt].y,0,Ae,Te+480,16),r(wt[Yt].f,0,Ne,He+224,8),r(wt[Yt].ea,0,ht,Dt+224,8)),H=8*Ee*b.B,wt=b.sa,Yt=b.ta+16*se+16*Ee*b.R,$t=b.qa,Nt=b.ra+8*se+H,dt=b.Ha,yt=b.Ia+8*se+H,H=0;16>H;++H)r(wt,Yt+H*b.R,Ae,Te+32*H,16);for(H=0;8>H;++H)r($t,Nt+H*b.B,Ne,He+32*H,8),r(dt,yt+H*b.B,ht,Dt+32*H,8)}}function na(b,P,H,se,_e,Ee,Ae,Te,Ne){var He=[0],ht=[0],Dt=0,Nt=Ne!=null?Ne.kd:0,wt=Ne??new Gs;if(b==null||12>H)return 7;wt.data=b,wt.w=P,wt.ha=H,P=[P],H=[H],wt.gb=[wt.gb];e:{var Yt=P,$t=H,dt=wt.gb;if(n(b!=null),n($t!=null),n(dt!=null),dt[0]=0,12<=$t[0]&&!t(b,Yt[0],"RIFF")){if(t(b,Yt[0]+8,"WEBP")){dt=3;break e}var yt=K(b,Yt[0]+4);if(12>yt||4294967286<yt){dt=3;break e}if(Nt&&yt>$t[0]-8){dt=7;break e}dt[0]=yt,Yt[0]+=12,$t[0]-=12}dt=0}if(dt!=0)return dt;for(yt=0<wt.gb[0],H=H[0];;){e:{var en=b;$t=P,dt=H;var hn=He,nn=ht,kn=Yt=[0];if((l=Dt=[Dt])[0]=0,8>dt[0])dt=7;else{if(!t(en,$t[0],"VP8X")){if(K(en,$t[0]+4)!=10){dt=3;break e}if(18>dt[0]){dt=7;break e}var Sn=K(en,$t[0]+8),Xn=1+Ve(en,$t[0]+12);if(2147483648<=Xn*(en=1+Ve(en,$t[0]+15))){dt=3;break e}kn!=null&&(kn[0]=Sn),hn!=null&&(hn[0]=Xn),nn!=null&&(nn[0]=en),$t[0]+=18,dt[0]-=18,l[0]=1}dt=0}}if(Dt=Dt[0],Yt=Yt[0],dt!=0)return dt;if($t=!!(2&Yt),!yt&&Dt)return 3;if(Ee!=null&&(Ee[0]=!!(16&Yt)),Ae!=null&&(Ae[0]=$t),Te!=null&&(Te[0]=0),Ae=He[0],Yt=ht[0],Dt&&$t&&Ne==null){dt=0;break}if(4>H){dt=7;break}if(yt&&Dt||!yt&&!Dt&&!t(b,P[0],"ALPH")){H=[H],wt.na=[wt.na],wt.P=[wt.P],wt.Sa=[wt.Sa];e:{Sn=b,dt=P,yt=H;var l=wt.gb;hn=wt.na,nn=wt.P,kn=wt.Sa,Xn=22,n(Sn!=null),n(yt!=null),en=dt[0];var h=yt[0];for(n(hn!=null),n(kn!=null),hn[0]=null,nn[0]=null,kn[0]=0;;){if(dt[0]=en,yt[0]=h,8>h){dt=7;break e}var v=K(Sn,en+4);if(4294967286<v){dt=3;break e}var w=8+v+1&-2;if(Xn+=w,0<l&&Xn>l){dt=3;break e}if(!t(Sn,en,"VP8 ")||!t(Sn,en,"VP8L")){dt=0;break e}if(h[0]<w){dt=7;break e}t(Sn,en,"ALPH")||(hn[0]=Sn,nn[0]=en+8,kn[0]=v),en+=w,h-=w}}if(H=H[0],wt.na=wt.na[0],wt.P=wt.P[0],wt.Sa=wt.Sa[0],dt!=0)break}H=[H],wt.Ja=[wt.Ja],wt.xa=[wt.xa];e:if(l=b,dt=P,yt=H,hn=wt.gb[0],nn=wt.Ja,kn=wt.xa,Sn=dt[0],en=!t(l,Sn,"VP8 "),Xn=!t(l,Sn,"VP8L"),n(l!=null),n(yt!=null),n(nn!=null),n(kn!=null),8>yt[0])dt=7;else{if(en||Xn){if(l=K(l,Sn+4),12<=hn&&l>hn-12){dt=3;break e}if(Nt&&l>yt[0]-8){dt=7;break e}nn[0]=l,dt[0]+=8,yt[0]-=8,kn[0]=Xn}else kn[0]=5<=yt[0]&&l[Sn+0]==47&&!(l[Sn+4]>>5),nn[0]=yt[0];dt=0}if(H=H[0],wt.Ja=wt.Ja[0],wt.xa=wt.xa[0],P=P[0],dt!=0)break;if(4294967286<wt.Ja)return 3;if(Te==null||$t||(Te[0]=wt.xa?2:1),Ae=[Ae],Yt=[Yt],wt.xa){if(5>H){dt=7;break}Te=Ae,Nt=Yt,$t=Ee,b==null||5>H?b=0:5<=H&&b[P+0]==47&&!(b[P+4]>>5)?(yt=[0],l=[0],hn=[0],re(nn=new A,b,P,H),mn(nn,yt,l,hn)?(Te!=null&&(Te[0]=yt[0]),Nt!=null&&(Nt[0]=l[0]),$t!=null&&($t[0]=hn[0]),b=1):b=0):b=0}else{if(10>H){dt=7;break}Te=Yt,b==null||10>H||!_o(b,P+3,H-3)?b=0:(Nt=b[P+0]|b[P+1]<<8|b[P+2]<<16,$t=16383&(b[P+7]<<8|b[P+6]),b=16383&(b[P+9]<<8|b[P+8]),1&Nt||3<(Nt>>1&7)||!(Nt>>4&1)||Nt>>5>=wt.Ja||!$t||!b?b=0:(Ae&&(Ae[0]=$t),Te&&(Te[0]=b),b=1))}if(!b||(Ae=Ae[0],Yt=Yt[0],Dt&&(He[0]!=Ae||ht[0]!=Yt)))return 3;Ne!=null&&(Ne[0]=wt,Ne.offset=P-Ne.w,n(4294967286>P-Ne.w),n(Ne.offset==Ne.ha-H));break}return dt==0||dt==7&&Dt&&Ne==null?(Ee!=null&&(Ee[0]|=wt.na!=null&&0<wt.na.length),se!=null&&(se[0]=Ae),_e!=null&&(_e[0]=Yt),0):dt}function wu(b,P,H){var se=P.width,_e=P.height,Ee=0,Ae=0,Te=se,Ne=_e;if(P.Da=b!=null&&0<b.Da,P.Da&&(Te=b.cd,Ne=b.bd,Ee=b.v,Ae=b.j,11>H||(Ee&=-2,Ae&=-2),0>Ee||0>Ae||0>=Te||0>=Ne||Ee+Te>se||Ae+Ne>_e))return 0;if(P.v=Ee,P.j=Ae,P.va=Ee+Te,P.o=Ae+Ne,P.U=Te,P.T=Ne,P.da=b!=null&&0<b.da,P.da){if(!Ue(Te,Ne,H=[b.ib],Ee=[b.hb]))return 0;P.ib=H[0],P.hb=Ee[0]}return P.ob=b!=null&&b.ob,P.Kb=b==null||!b.Sd,P.da&&(P.ob=P.ib<3*se/4&&P.hb<3*_e/4,P.Kb=0),1}function Ga(b){if(b==null)return 2;if(11>b.S){var P=b.f.RGBA;P.fb+=(b.height-1)*P.A,P.A=-P.A}else P=b.f.kb,b=b.height,P.O+=(b-1)*P.fa,P.fa=-P.fa,P.N+=(b-1>>1)*P.Ab,P.Ab=-P.Ab,P.W+=(b-1>>1)*P.Db,P.Db=-P.Db,P.F!=null&&(P.J+=(b-1)*P.lb,P.lb=-P.lb);return 0}function qa(b,P,H,se){if(se==null||0>=b||0>=P)return 2;if(H!=null){if(H.Da){var _e=H.cd,Ee=H.bd,Ae=-2&H.v,Te=-2&H.j;if(0>Ae||0>Te||0>=_e||0>=Ee||Ae+_e>b||Te+Ee>P)return 2;b=_e,P=Ee}if(H.da){if(!Ue(b,P,_e=[H.ib],Ee=[H.hb]))return 2;b=_e[0],P=Ee[0]}}se.width=b,se.height=P;e:{var Ne=se.width,He=se.height;if(b=se.S,0>=Ne||0>=He||!(b>=ds&&13>b))b=2;else{if(0>=se.Rd&&se.sd==null){Ae=Ee=_e=P=0;var ht=(Te=Ne*ph[b])*He;if(11>b||(Ee=(He+1)/2*(P=(Ne+1)/2),b==12&&(Ae=(_e=Ne)*He)),(He=s(ht+2*Ee+Ae))==null){b=1;break e}se.sd=He,11>b?((Ne=se.f.RGBA).eb=He,Ne.fb=0,Ne.A=Te,Ne.size=ht):((Ne=se.f.kb).y=He,Ne.O=0,Ne.fa=Te,Ne.Fd=ht,Ne.f=He,Ne.N=0+ht,Ne.Ab=P,Ne.Cd=Ee,Ne.ea=He,Ne.W=0+ht+Ee,Ne.Db=P,Ne.Ed=Ee,b==12&&(Ne.F=He,Ne.J=0+ht+2*Ee),Ne.Tc=Ae,Ne.lb=_e)}if(P=1,_e=se.S,Ee=se.width,Ae=se.height,_e>=ds&&13>_e)if(11>_e)b=se.f.RGBA,P&=(Te=Math.abs(b.A))*(Ae-1)+Ee<=b.size,P&=Te>=Ee*ph[_e],P&=b.eb!=null;else{b=se.f.kb,Te=(Ee+1)/2,ht=(Ae+1)/2,Ne=Math.abs(b.fa),He=Math.abs(b.Ab);var Dt=Math.abs(b.Db),Nt=Math.abs(b.lb),wt=Nt*(Ae-1)+Ee;P&=Ne*(Ae-1)+Ee<=b.Fd,P&=He*(ht-1)+Te<=b.Cd,P=(P&=Dt*(ht-1)+Te<=b.Ed)&Ne>=Ee&He>=Te&Dt>=Te,P&=b.y!=null,P&=b.f!=null,P&=b.ea!=null,_e==12&&(P&=Nt>=Ee,P&=wt<=b.Tc,P&=b.F!=null)}else P=0;b=P?0:2}}return b!=0||H!=null&&H.fd&&(b=Ga(se)),b}var ho=64,ra=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ps=24,fs=32,dl=8,zo=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ge("Predictor0","PredictorAdd0"),G.Predictor0=function(){return 4278190080},G.Predictor1=function(b){return b},G.Predictor2=function(b,P,H){return P[H+0]},G.Predictor3=function(b,P,H){return P[H+1]},G.Predictor4=function(b,P,H){return P[H-1]},G.Predictor5=function(b,P,H){return ot(ot(b,P[H+1]),P[H+0])},G.Predictor6=function(b,P,H){return ot(b,P[H-1])},G.Predictor7=function(b,P,H){return ot(b,P[H+0])},G.Predictor8=function(b,P,H){return ot(P[H-1],P[H+0])},G.Predictor9=function(b,P,H){return ot(P[H+0],P[H+1])},G.Predictor10=function(b,P,H){return ot(ot(b,P[H-1]),ot(P[H+0],P[H+1]))},G.Predictor11=function(b,P,H){var se=P[H+0];return 0>=Ut(se>>24&255,b>>24&255,(P=P[H-1])>>24&255)+Ut(se>>16&255,b>>16&255,P>>16&255)+Ut(se>>8&255,b>>8&255,P>>8&255)+Ut(255&se,255&b,255&P)?se:b},G.Predictor12=function(b,P,H){var se=P[H+0];return(kt((b>>24&255)+(se>>24&255)-((P=P[H-1])>>24&255))<<24|kt((b>>16&255)+(se>>16&255)-(P>>16&255))<<16|kt((b>>8&255)+(se>>8&255)-(P>>8&255))<<8|kt((255&b)+(255&se)-(255&P)))>>>0},G.Predictor13=function(b,P,H){var se=P[H-1];return(Ct((b=ot(b,P[H+0]))>>24&255,se>>24&255)<<24|Ct(b>>16&255,se>>16&255)<<16|Ct(b>>8&255,se>>8&255)<<8|Ct(b>>0&255,se>>0&255))>>>0};var es=G.PredictorAdd0;G.PredictorAdd1=Gt,Ge("Predictor2","PredictorAdd2"),Ge("Predictor3","PredictorAdd3"),Ge("Predictor4","PredictorAdd4"),Ge("Predictor5","PredictorAdd5"),Ge("Predictor6","PredictorAdd6"),Ge("Predictor7","PredictorAdd7"),Ge("Predictor8","PredictorAdd8"),Ge("Predictor9","PredictorAdd9"),Ge("Predictor10","PredictorAdd10"),Ge("Predictor11","PredictorAdd11"),Ge("Predictor12","PredictorAdd12"),Ge("Predictor13","PredictorAdd13");var ts=G.PredictorAdd2;it("ColorIndexInverseTransform","MapARGB","32b",function(b){return b>>8&255},function(b){return b}),it("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(b){return b},function(b){return b>>8&255});var Yu,Lo=G.ColorIndexInverseTransform,xa=G.MapARGB,$o=G.VP8LColorIndexInverseTransformAlpha,Uo=G.MapAlpha,La=G.VP8LPredictorsAdd=[];La.length=16,(G.VP8LPredictors=[]).length=16,(G.VP8LPredictorsAdd_C=[]).length=16,(G.VP8LPredictors_C=[]).length=16;var Sa,Vo,Mo,ia,Ms,Ho,_t,qt,Mt,An,Kn,wr,Ui,Li,Rl,ns,Vi,oa,Ca,sa,aa,la,Qr,Ws,Ao,Si,Mi,io,Oi=s(511),As=s(2041),hs=s(225),Is=s(767),xu=0,ua=As,po=hs,Bi=Is,Go=Oi,ds=0,dr=1,Ea=2,Pa=3,Zs=4,rs=5,bc=6,ko=7,To=8,Ks=9,a=10,p=[2,3,7],S=[3,3,11],V=[280,256,256,256,40],oe=[0,1,1,1,0],Se=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],st=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Pt=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],zt=8,sn=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Nn=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Jn=null,zr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],go=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Ki=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Do=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Hi=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ps=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],wc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ca=[],Ys=[],Rs=[],Af=1,nu=2,mi=[],qo=[];jt("UpsampleRgbLinePair",$r,3),jt("UpsampleBgrLinePair",zi,3),jt("UpsampleRgbaLinePair",Es,4),jt("UpsampleBgraLinePair",fo,4),jt("UpsampleArgbLinePair",ro,4),jt("UpsampleRgba4444LinePair",xi,2),jt("UpsampleRgb565LinePair",di,2);var De=G.UpsampleRgbLinePair,gs=G.UpsampleBgrLinePair,Lu=G.UpsampleRgbaLinePair,No=G.UpsampleBgraLinePair,Vr=G.UpsampleArgbLinePair,Wc=G.UpsampleRgba4444LinePair,uh=G.UpsampleRgb565LinePair,Zc=16,Wa=1<<Zc-1,xc=-227,kf=482,pd=6,Ju=0,Kc=s(256),Fl=s(256),gd=s(256),Yc=s(256),Jc=s(kf-xc),ch=s(kf-xc);jo("YuvToRgbRow",$r,3),jo("YuvToBgrRow",zi,3),jo("YuvToRgbaRow",Es,4),jo("YuvToBgraRow",fo,4),jo("YuvToArgbRow",ro,4),jo("YuvToRgba4444Row",xi,2),jo("YuvToRgb565Row",di,2);var fh=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ma=[0,2,8],hh=[8,7,6,4,4,2,2,2,1,1,1,1],dh=1;this.WebPDecodeRGBA=function(b,P,H,se,_e){var Ee=dr,Ae=new Po,Te=new cr;Ae.ba=Te,Te.S=Ee,Te.width=[Te.width],Te.height=[Te.height];var Ne=Te.width,He=Te.height,ht=new yr;if(ht==null||b==null)var Dt=2;else n(ht!=null),Dt=na(b,P,H,ht.width,ht.height,ht.Pd,ht.Qd,ht.format,null);if(Dt!=0?Ne=0:(Ne!=null&&(Ne[0]=ht.width[0]),He!=null&&(He[0]=ht.height[0]),Ne=1),Ne){Te.width=Te.width[0],Te.height=Te.height[0],se!=null&&(se[0]=Te.width),_e!=null&&(_e[0]=Te.height);e:{if(se=new ui,(_e=new Gs).data=b,_e.w=P,_e.ha=H,_e.kd=1,P=[0],n(_e!=null),((b=na(_e.data,_e.w,_e.ha,null,null,null,P,null,_e))==0||b==7)&&P[0]&&(b=4),(P=b)==0){if(n(Ae!=null),se.data=_e.data,se.w=_e.w+_e.offset,se.ha=_e.ha-_e.offset,se.put=Zn,se.ac=tr,se.bc=Zt,se.ma=Ae,_e.xa){if((b=ir())==null){Ae=1;break e}if(function(Nt,wt){var Yt=[0],$t=[0],dt=[0];t:for(;;){if(Nt==null)return 0;if(wt==null)return Nt.a=2,0;if(Nt.l=wt,Nt.a=0,re(Nt.m,wt.data,wt.w,wt.ha),!mn(Nt.m,Yt,$t,dt)){Nt.a=3;break t}if(Nt.xb=nu,wt.width=Yt[0],wt.height=$t[0],!Or(Yt[0],$t[0],1,Nt,null))break t;return 1}return n(Nt.a!=0),0}(b,se)){if(se=(P=qa(se.width,se.height,Ae.Oa,Ae.ba))==0){t:{se=b;n:for(;;){if(se==null){se=0;break t}if(n(se.s.yc!=null),n(se.s.Ya!=null),n(0<se.s.Wb),n((H=se.l)!=null),n((_e=H.ma)!=null),se.xb!=0){if(se.ca=_e.ba,se.tb=_e.tb,n(se.ca!=null),!wu(_e.Oa,H,Pa)){se.a=2;break n}if(!jr(se,H.width)||H.da)break n;if((H.da||xn(se.ca.S))&&xt(),11>se.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),se.ca.f.kb.F!=null&&xt()),se.Pb&&0<se.s.ua&&se.s.vb.X==null&&!pe(se.s.vb,se.s.Wa.Xa)){se.a=1;break n}se.xb=0}if(!lr(se,se.V,se.Ba,se.c,se.i,H.o,xr))break n;_e.Dc=se.Ma,se=1;break t}n(se.a!=0),se=0}se=!se}se&&(P=b.a)}else P=b.a}else{if((b=new fr)==null){Ae=1;break e}if(b.Fa=_e.na,b.P=_e.P,b.qc=_e.Sa,bo(b,se)){if((P=qa(se.width,se.height,Ae.Oa,Ae.ba))==0){if(b.Aa=0,H=Ae.Oa,n((_e=b)!=null),H!=null){if(0<(Ne=0>(Ne=H.Md)?0:100<Ne?255:255*Ne/100)){for(He=ht=0;4>He;++He)12>(Dt=_e.pb[He]).lc&&(Dt.ia=Ne*hh[0>Dt.lc?0:Dt.lc]>>3),ht|=Dt.ia;ht&&(alert("todo:VP8InitRandom"),_e.ia=1)}_e.Ga=H.Id,100<_e.Ga?_e.Ga=100:0>_e.Ga&&(_e.Ga=0)}Hn(b,se)||(P=b.a)}}else P=b.a}P==0&&Ae.Oa!=null&&Ae.Oa.fd&&(P=Ga(Ae.ba))}Ae=P}Ee=Ae!=0?null:11>Ee?Te.f.RGBA.eb:Te.f.kb.y}else Ee=null;return Ee};var ph=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(G,R){for(var Z="",z=0;z<4;z++)Z+=String.fromCharCode(G[R++]);return Z}function g(G,R){return(G[R+0]<<0|G[R+1]<<8|G[R+2]<<16)>>>0}function y(G,R){return(G[R+0]<<0|G[R+1]<<8|G[R+2]<<16|G[R+3]<<24)>>>0}new f;var x=[0],_=[0],M=[],D=new f,N=e,O=function(G,R){var Z={},z=0,I=!1,$=0,U=0;if(Z.frames=[],!function(J,fe,ne,he){for(var ae=0;ae<he;ae++)if(J[fe+ae]!=ne.charCodeAt(ae))return!0;return!1}(G,R,"RIFF",4)){var W,q;for(y(G,R+=4),R+=8;R<G.length;){var ie=d(G,R),re=y(G,R+=4);R+=4;var we=re+(1&re);switch(ie){case"VP8 ":case"VP8L":Z.frames[z]===void 0&&(Z.frames[z]={}),(A=Z.frames[z]).src_off=I?U:R-8,A.src_size=$+re+8,z++,I&&(I=!1,$=0,U=0);break;case"VP8X":(A=Z.header={}).feature_flags=G[R];var Pe=R+4;A.canvas_width=1+g(G,Pe),Pe+=3,A.canvas_height=1+g(G,Pe),Pe+=3;break;case"ALPH":I=!0,$=we+8,U=R-8;break;case"ANIM":(A=Z.header).bgcolor=y(G,R),Pe=R+4,A.loop_count=(W=G)[(q=Pe)+0]<<0|W[q+1]<<8,Pe+=2;break;case"ANMF":var Ie,A;(A=Z.frames[z]={}).offset_x=2*g(G,R),R+=3,A.offset_y=2*g(G,R),R+=3,A.width=1+g(G,R),R+=3,A.height=1+g(G,R),R+=3,A.duration=g(G,R),R+=3,Ie=G[R++],A.dispose=1&Ie,A.blend=Ie>>1&1}ie!="ANMF"&&(R+=we)}return Z}}(N,0);O.response=N,O.rgbaoutput=!0,O.dataurl=!1;var F=O.header?O.header:null,Y=O.frames?O.frames:null;if(F){F.loop_counter=F.loop_count,x=[F.canvas_height],_=[F.canvas_width];for(var Q=0;Q<Y.length&&Y[Q].blend!=0;Q++);}var le=Y[0],ce=D.WebPDecodeRGBA(N,le.src_off,le.src_size,_,x);le.rgba=ce,le.imgwidth=_[0],le.imgheight=x[0];for(var xe=0;xe<_[0]*x[0]*4;xe++)M[xe]=ce[xe];return this.width=_,this.height=x,this.data=M,this}(function(e){var n=function(){return typeof S1=="function"},t=function(x,_,M,D){var N=4,O=o;switch(D){case e.image_compression.FAST:N=1,O=s;break;case e.image_compression.MEDIUM:N=6,O=u;break;case e.image_compression.SLOW:N=9,O=f}x=r(x,_,M,O);var F=S1(x,{level:N});return e.__addimage__.arrayBufferToBinaryString(F)},r=function(x,_,M,D){for(var N,O,F,Y=x.length/_,Q=new Uint8Array(x.length+Y),le=g(),ce=0;ce<Y;ce+=1){if(F=ce*_,N=x.subarray(F,F+_),D)Q.set(D(N,M,O),F+ce);else{for(var xe,G=le.length,R=[];xe<G;xe+=1)R[xe]=le[xe](N,M,O);var Z=y(R.concat());Q.set(R[Z],F+ce)}O=N}return Q},i=function(x){var _=Array.apply([],x);return _.unshift(0),_},s=function(x,_){var M,D=[],N=x.length;D[0]=1;for(var O=0;O<N;O+=1)M=x[O-_]||0,D[O+1]=x[O]-M+256&255;return D},o=function(x,_,M){var D,N=[],O=x.length;N[0]=2;for(var F=0;F<O;F+=1)D=M&&M[F]||0,N[F+1]=x[F]-D+256&255;return N},u=function(x,_,M){var D,N,O=[],F=x.length;O[0]=3;for(var Y=0;Y<F;Y+=1)D=x[Y-_]||0,N=M&&M[Y]||0,O[Y+1]=x[Y]+256-(D+N>>>1)&255;return O},f=function(x,_,M){var D,N,O,F,Y=[],Q=x.length;Y[0]=4;for(var le=0;le<Q;le+=1)D=x[le-_]||0,N=M&&M[le]||0,O=M&&M[le-_]||0,F=d(D,N,O),Y[le+1]=x[le]-F+256&255;return Y},d=function(x,_,M){if(x===_&&_===M)return x;var D=Math.abs(_-M),N=Math.abs(x-M),O=Math.abs(x+_-M-M);return D<=N&&D<=O?x:N<=O?_:M},g=function(){return[i,s,o,u,f]},y=function(x){var _=x.map(function(M){return M.reduce(function(D,N){return D+Math.abs(N)},0)});return _.indexOf(Math.min.apply(null,_))};e.processPNG=function(x,_,M,D){var N,O,F,Y,Q,le,ce,xe,G,R,Z,z,I,$,U,W=this.decode.FLATE_DECODE,q="";if(this.__addimage__.isArrayBuffer(x)&&(x=new Uint8Array(x)),this.__addimage__.isArrayBufferView(x)){if(x=(F=new OF(x)).imgData,O=F.bits,N=F.colorSpace,Q=F.colors,[4,6].indexOf(F.colorType)!==-1){if(F.bits===8){G=(xe=F.pixelBitlength==32?new Uint32Array(F.decodePixels().buffer):F.pixelBitlength==16?new Uint16Array(F.decodePixels().buffer):new Uint8Array(F.decodePixels().buffer)).length,Z=new Uint8Array(G*F.colors),R=new Uint8Array(G);var ie,re=F.pixelBitlength-F.bits;for($=0,U=0;$<G;$++){for(I=xe[$],ie=0;ie<re;)Z[U++]=I>>>ie&255,ie+=F.bits;R[$]=I>>>ie&255}}if(F.bits===16){G=(xe=new Uint32Array(F.decodePixels().buffer)).length,Z=new Uint8Array(G*(32/F.pixelBitlength)*F.colors),R=new Uint8Array(G*(32/F.pixelBitlength)),z=F.colors>1,$=0,U=0;for(var we=0;$<G;)I=xe[$++],Z[U++]=I>>>0&255,z&&(Z[U++]=I>>>16&255,I=xe[$++],Z[U++]=I>>>0&255),R[we++]=I>>>16&255;O=8}D!==e.image_compression.NONE&&n()?(x=t(Z,F.width*F.colors,F.colors,D),ce=t(R,F.width,1,D)):(x=Z,ce=R,W=void 0)}if(F.colorType===3&&(N=this.color_spaces.INDEXED,le=F.palette,F.transparency.indexed)){var Pe=F.transparency.indexed,Ie=0;for($=0,G=Pe.length;$<G;++$)Ie+=Pe[$];if((Ie/=255)===G-1&&Pe.indexOf(0)!==-1)Y=[Pe.indexOf(0)];else if(Ie!==G){for(xe=F.decodePixels(),R=new Uint8Array(xe.length),$=0,G=xe.length;$<G;$++)R[$]=Pe[xe[$]];ce=t(R,F.width,1)}}var A=function(J){var fe;switch(J){case e.image_compression.FAST:fe=11;break;case e.image_compression.MEDIUM:fe=13;break;case e.image_compression.SLOW:fe=14;break;default:fe=12}return fe}(D);return W===this.decode.FLATE_DECODE&&(q="/Predictor "+A+" "),q+="/Colors "+Q+" /BitsPerComponent "+O+" /Columns "+F.width,(this.__addimage__.isArrayBuffer(x)||this.__addimage__.isArrayBufferView(x))&&(x=this.__addimage__.arrayBufferToBinaryString(x)),(ce&&this.__addimage__.isArrayBuffer(ce)||this.__addimage__.isArrayBufferView(ce))&&(ce=this.__addimage__.arrayBufferToBinaryString(ce)),{alias:M,data:x,index:_,filter:W,decodeParameters:q,transparency:Y,palette:le,sMask:ce,predictor:A,width:F.width,height:F.height,bitsPerComponent:O,colorSpace:N}}}})(Ar.API),function(e){e.processGIF89A=function(n,t,r,i){var s=new IF(n),o=s.width,u=s.height,f=[];s.decodeAndBlitFrameRGBA(0,f);var d={data:f,width:o,height:u},g=new yv(100).encode(d,100);return e.processJPEG.call(this,g,t,r,i)},e.processGIF87A=e.processGIF89A}(Ar.API),Nu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var n=0;n<e;n++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[n]={red:i,green:r,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Nu.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,n=this.width*this.height*4;this.data=new Uint8Array(n),this[e]()}catch(t){so.log("bit decode error:"+t)}},Nu.prototype.bit1=function(){var e,n=Math.ceil(this.width/8),t=n%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<n;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,u=0;u<8&&8*i+u<this.width;u++){var f=this.palette[s>>7-u&1];this.data[o+4*u]=f.blue,this.data[o+4*u+1]=f.green,this.data[o+4*u+2]=f.red,this.data[o+4*u+3]=255}t!==0&&(this.pos+=4-t)}},Nu.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),n=e%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,u=s>>4,f=15&s,d=this.palette[u];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*i+1>=this.width)break;d=this.palette[f],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}n!==0&&(this.pos+=4-n)}},Nu.prototype.bit8=function(){for(var e=this.width%4,n=this.height-1;n>=0;n--){for(var t=this.bottom_up?n:this.height-1-n,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},Nu.prototype.bit15=function(){for(var e=this.width%3,n=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&n)/n*255|0,u=(s>>5&n)/n*255|0,f=(s>>10&n)/n*255|0,d=s>>15?255:0,g=r*this.width*4+4*i;this.data[g]=f,this.data[g+1]=u,this.data[g+2]=o,this.data[g+3]=d}this.pos+=e}},Nu.prototype.bit16=function(){for(var e=this.width%3,n=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(o&n)/n*255|0,f=(o>>5&t)/t*255|0,d=(o>>11)/n*255|0,g=i*this.width*4+4*s;this.data[g]=d,this.data[g+1]=f,this.data[g+2]=u,this.data[g+3]=255}this.pos+=e}},Nu.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*t;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Nu.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var n=this.bottom_up?e:this.height-1-e,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=n*this.width*4+4*t;this.data[u]=s,this.data[u+1]=i,this.data[u+2]=r,this.data[u+3]=o}},Nu.prototype.getData=function(){return this.data},function(e){e.processBMP=function(n,t,r,i){var s=new Nu(n,!1),o=s.width,u=s.height,f={data:s.getData(),width:o,height:u},d=new yv(100).encode(f,100);return e.processJPEG.call(this,d,t,r,i)}}(Ar.API),Ub.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(n,t,r,i){var s=new Ub(n),o=s.width,u=s.height,f={data:s.getData(),width:o,height:u},d=new yv(100).encode(f,100);return e.processJPEG.call(this,d,t,r,i)}}(Ar.API),Ar.API.processRGBA=function(e,n,t){for(var r=e.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),u=0,f=0,d=0;d<i;d+=4){var g=r[d],y=r[d+1],x=r[d+2],_=r[d+3];s[u++]=g,s[u++]=y,s[u++]=x,o[f++]=_}var M=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:M,index:n,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Ar.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},kh=Ar.API,Lg=kh.getCharWidthsArray=function(e,n){var t,r,i=(n=n||{}).font||this.internal.getFont(),s=n.fontSize||this.internal.getFontSize(),o=n.charSpace||this.internal.getCharSpace(),u=n.widths?n.widths:i.metadata.Unicode.widths,f=u.fof?u.fof:1,d=n.kerning?n.kerning:i.metadata.Unicode.kerning,g=d.fof?d.fof:1,y=n.doKerning!==!1,x=0,_=e.length,M=0,D=u[0]||f,N=[];for(t=0;t<_;t++)r=e.charCodeAt(t),typeof i.metadata.widthOfString=="function"?N.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(x=y&&Yi(d[r])==="object"&&!isNaN(parseInt(d[r][M],10))?d[r][M]/g:0,N.push((u[r]||D)/f+x)),M=r;return N},Fb=kh.getStringUnitWidth=function(e,n){var t=(n=n||{}).fontSize||this.internal.getFontSize(),r=n.font||this.internal.getFont(),i=n.charSpace||this.internal.getCharSpace();return kh.processArabic&&(e=kh.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,t,i)/t:Lg.apply(this,arguments).reduce(function(s,o){return s+o},0)},jb=function(e,n,t,r){for(var i=[],s=0,o=e.length,u=0;s!==o&&u+n[s]<t;)u+=n[s],s++;i.push(e.slice(0,s));var f=s;for(u=0;s!==o;)u+n[s]>r&&(i.push(e.slice(f,s)),u=0,f=s),u+=n[s],s++;return f!==s&&i.push(e.slice(f,s)),i},zb=function(e,n,t){t||(t={});var r,i,s,o,u,f,d,g=[],y=[g],x=t.textIndent||0,_=0,M=0,D=e.split(" "),N=Lg.apply(this,[" ",t])[0];if(f=t.lineIndent===-1?D[0].length+2:t.lineIndent||0){var O=Array(f).join(" "),F=[];D.map(function(Q){(Q=Q.split(/\s*\n/)).length>1?F=F.concat(Q.map(function(le,ce){return(ce&&le.length?`
`:"")+le})):F.push(Q[0])}),D=F,f=Fb.apply(this,[O,t])}for(s=0,o=D.length;s<o;s++){var Y=0;if(r=D[s],f&&r[0]==`
`&&(r=r.substr(1),Y=1),x+_+(M=(i=Lg.apply(this,[r,t])).reduce(function(Q,le){return Q+le},0))>n||Y){if(M>n){for(u=jb.apply(this,[r,i,n-(x+_),n]),g.push(u.shift()),g=[u.pop()];u.length;)y.push([u.shift()]);M=i.slice(r.length-(g[0]?g[0].length:0)).reduce(function(Q,le){return Q+le},0)}else g=[r];y.push(g),x=M+f,_=N}else g.push(r),x+=_+M,_=N}return d=f?function(Q,le){return(le?O:"")+Q.join(" ")}:function(Q){return Q.join(" ")},y.map(d)},kh.splitTextToSize=function(e,n,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(g){if(g.widths&&g.kerning)return{widths:g.widths,kerning:g.kerning};var y=this.internal.getFont(g.fontName,g.fontStyle);return y.metadata.Unicode?{widths:y.metadata.Unicode.widths||{0:1},kerning:y.metadata.Unicode.kerning||{}}:{font:y.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*n/i;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=t.lineIndent;var u,f,d=[];for(u=0,f=r.length;u<f;u++)d=d.concat(zb.apply(this,[r[u],o,s]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var n="klmnopqrstuvwxyz",t={},r={},i=0;i<n.length;i++)t[n[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=n[i];var s=function(y){return"0x"+parseInt(y,10).toString(16)},o=e.__fontmetrics__.compress=function(y){var x,_,M,D,N=["{"];for(var O in y){if(x=y[O],isNaN(parseInt(O,10))?_="'"+O+"'":(O=parseInt(O,10),_=(_=s(O).slice(2)).slice(0,-1)+r[_.slice(-1)]),typeof x=="number")x<0?(M=s(x).slice(3),D="-"):(M=s(x).slice(2),D=""),M=D+M.slice(0,-1)+r[M.slice(-1)];else{if(Yi(x)!=="object")throw new Error("Don't know what to do with value type "+Yi(x)+".");M=o(x)}N.push(_+M)}return N.push("}"),N.join("")},u=e.__fontmetrics__.uncompress=function(y){if(typeof y!="string")throw new Error("Invalid argument passed to uncompress.");for(var x,_,M,D,N={},O=1,F=N,Y=[],Q="",le="",ce=y.length-1,xe=1;xe<ce;xe+=1)(D=y[xe])=="'"?x?(M=x.join(""),x=void 0):x=[]:x?x.push(D):D=="{"?(Y.push([F,M]),F={},M=void 0):D=="}"?((_=Y.pop())[0][_[1]]=F,M=void 0,F=_[0]):D=="-"?O=-1:M===void 0?t.hasOwnProperty(D)?(Q+=t[D],M=parseInt(Q,16)*O,O=1,Q=""):Q+=D:t.hasOwnProperty(D)?(le+=t[D],F[M]=parseInt(le,16)*O,O=1,M=void 0,le=""):le+=D;return N},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},g={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(y){var x=y.font,_=g.Unicode[x.postScriptName];_&&(x.metadata.Unicode={},x.metadata.Unicode.widths=_.widths,x.metadata.Unicode.kerning=_.kerning);var M=d.Unicode[x.postScriptName];M&&(x.metadata.Unicode.encoding=M,x.encoding=M.codePages[0])}])}(Ar.API),function(e){var n=function(t){for(var r=t.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=t.charCodeAt(s);return i};e.API.events.push(["addFont",function(t){var r=void 0,i=t.font,s=t.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,u){u=/^\x00\x01\x00\x00/.test(u)?n(u):n(ip(u)),o.metadata=e.API.TTFFont.open(u),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(Ar),function(e){function n(){return(Nr.canvg?Promise.resolve(Nr.canvg):Yf(()=>import("./index.es.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Ar.API.addSvgAsImage=function(t,r,i,s,o,u,f,d){if(isNaN(r)||isNaN(i))throw so.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw so.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var g=document.createElement("canvas");g.width=s,g.height=o;var y=g.getContext("2d");y.fillStyle="#fff",y.fillRect(0,0,g.width,g.height);var x={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},_=this;return n().then(function(M){return M.fromString(y,t,x)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(M){return M.render(x)}).then(function(){_.addImage(g.toDataURL("image/jpeg",1),r,i,s,o,f,d)})}}(),Ar.API.putTotalPages=function(e){var n,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(n=new RegExp(e,"g"),t=this.internal.getNumberOfPages()):(n=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(n,t);return this},Ar.API.viewerPreferences=function(e,n){var t;e=e||{},n=n||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(o),f=[],d=0,g=0,y=0;function x(M,D){var N,O=!1;for(N=0;N<M.length;N+=1)M[N]===D&&(O=!0);return O}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,e==="reset"||n===!0){var _=u.length;for(y=0;y<_;y+=1)t[u[y]].value=t[u[y]].defaultValue,t[u[y]].explicitSet=!1}if(Yi(e)==="object"){for(i in e)if(s=e[i],x(u,i)&&s!==void 0){if(t[i].type==="boolean"&&typeof s=="boolean")t[i].value=s;else if(t[i].type==="name"&&x(t[i].valueSet,s))t[i].value=s;else if(t[i].type==="integer"&&Number.isInteger(s))t[i].value=s;else if(t[i].type==="array"){for(d=0;d<s.length;d+=1)if(r=!0,s[d].length===1&&typeof s[d][0]=="number")f.push(String(s[d]-1));else if(s[d].length>1){for(g=0;g<s[d].length;g+=1)typeof s[d][g]!="number"&&(r=!1);r===!0&&f.push([s[d][0]-1,s[d][1]-1].join(" "))}t[i].value="["+f.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var M,D=[];for(M in t)t[M].explicitSet===!0&&(t[M].type==="name"?D.push("/"+M+" /"+t[M].value):D.push("/"+M+" "+t[M].value));D.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+D.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(e){var n=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),f=unescape(encodeURIComponent("</x:xmpmeta>")),d=s.length+o.length+u.length+i.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+u+f),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",n)),this}}(Ar.API),function(e){var n=e.API,t=n.pdfEscape16=function(s,o){for(var u,f=o.metadata.Unicode.widths,d=["","0","00","000","0000"],g=[""],y=0,x=s.length;y<x;++y){if(u=o.metadata.characterToGlyph(s.charCodeAt(y)),o.metadata.glyIdsUsed.push(u),o.metadata.toUnicode[u]=s.charCodeAt(y),f.indexOf(u)==-1&&(f.push(u),f.push([parseInt(o.metadata.widthOfGlyph(u),10)])),u=="0")return g.join("");u=u.toString(16),g.push(d[4-u.length],u)}return g.join("")},r=function(s){var o,u,f,d,g,y,x;for(g=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,f=[],y=0,x=(u=Object.keys(s).sort(function(_,M){return _-M})).length;y<x;y++)o=u[y],f.length>=100&&(g+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar`,f=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(d=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),f.push("<"+o+"><"+d+">"));return f.length&&(g+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar
`),g+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};n.events.push(["putFont",function(s){(function(o){var u=o.font,f=o.out,d=o.newObject,g=o.putStream;if(u.metadata instanceof e.API.TTFFont&&u.encoding==="Identity-H"){for(var y=u.metadata.Unicode.widths,x=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),_="",M=0;M<x.length;M++)_+=String.fromCharCode(x[M]);var D=d();g({data:_,addLength1:!0,objectId:D}),f("endobj");var N=d();g({data:r(u.metadata.toUnicode),addLength1:!0,objectId:N}),f("endobj");var O=d();f("<<"),f("/Type /FontDescriptor"),f("/FontName /"+jh(u.fontName)),f("/FontFile2 "+D+" 0 R"),f("/FontBBox "+e.API.PDFObject.convert(u.metadata.bbox)),f("/Flags "+u.metadata.flags),f("/StemV "+u.metadata.stemV),f("/ItalicAngle "+u.metadata.italicAngle),f("/Ascent "+u.metadata.ascender),f("/Descent "+u.metadata.decender),f("/CapHeight "+u.metadata.capHeight),f(">>"),f("endobj");var F=d();f("<<"),f("/Type /Font"),f("/BaseFont /"+jh(u.fontName)),f("/FontDescriptor "+O+" 0 R"),f("/W "+e.API.PDFObject.convert(y)),f("/CIDToGIDMap /Identity"),f("/DW 1000"),f("/Subtype /CIDFontType2"),f("/CIDSystemInfo"),f("<<"),f("/Supplement 0"),f("/Registry (Adobe)"),f("/Ordering ("+u.encoding+")"),f(">>"),f(">>"),f("endobj"),u.objectNumber=d(),f("<<"),f("/Type /Font"),f("/Subtype /Type0"),f("/ToUnicode "+N+" 0 R"),f("/BaseFont /"+jh(u.fontName)),f("/Encoding /"+u.encoding),f("/DescendantFonts ["+F+" 0 R]"),f(">>"),f("endobj"),u.isAlreadyPutted=!0}})(s)}]),n.events.push(["putFont",function(s){(function(o){var u=o.font,f=o.out,d=o.newObject,g=o.putStream;if(u.metadata instanceof e.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var y=u.metadata.rawData,x="",_=0;_<y.length;_++)x+=String.fromCharCode(y[_]);var M=d();g({data:x,addLength1:!0,objectId:M}),f("endobj");var D=d();g({data:r(u.metadata.toUnicode),addLength1:!0,objectId:D}),f("endobj");var N=d();f("<<"),f("/Descent "+u.metadata.decender),f("/CapHeight "+u.metadata.capHeight),f("/StemV "+u.metadata.stemV),f("/Type /FontDescriptor"),f("/FontFile2 "+M+" 0 R"),f("/Flags 96"),f("/FontBBox "+e.API.PDFObject.convert(u.metadata.bbox)),f("/FontName /"+jh(u.fontName)),f("/ItalicAngle "+u.metadata.italicAngle),f("/Ascent "+u.metadata.ascender),f(">>"),f("endobj"),u.objectNumber=d();for(var O=0;O<u.metadata.hmtx.widths.length;O++)u.metadata.hmtx.widths[O]=parseInt(u.metadata.hmtx.widths[O]*(1e3/u.metadata.head.unitsPerEm));f("<</Subtype/TrueType/Type/Font/ToUnicode "+D+" 0 R/BaseFont/"+jh(u.fontName)+"/FontDescriptor "+N+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),f("endobj"),u.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,u=s.text||"",f=s.x,d=s.y,g=s.options||{},y=s.mutex||{},x=y.pdfEscape,_=y.activeFontKey,M=y.fonts,D=_,N="",O=0,F="",Y=M[D].encoding;if(M[D].encoding!=="Identity-H")return{text:u,x:f,y:d,options:g,mutex:y};for(F=u,D=_,Array.isArray(u)&&(F=u[0]),O=0;O<F.length;O+=1)M[D].metadata.hasOwnProperty("cmap")&&(o=M[D].metadata.cmap.unicode.codeMap[F[O].charCodeAt(0)]),o||F[O].charCodeAt(0)<256&&M[D].metadata.hasOwnProperty("Unicode")?N+=F[O]:N+="";var Q="";return parseInt(D.slice(1))<14||Y==="WinAnsiEncoding"?Q=x(N,D).split("").map(function(le){return le.charCodeAt(0).toString(16)}).join(""):Y==="Identity-H"&&(Q=t(N,M[D])),y.isHex=!0,{text:Q,x:f,y:d,options:g,mutex:y}};n.events.push(["postProcessText",function(s){var o=s.text||"",u=[],f={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?u.push([i(Object.assign({},f,{text:o[d][0]})).text,o[d][1],o[d][2]]):u.push(i(Object.assign({},f,{text:o[d]})).text);s.text=u}else s.text=i(Object.assign({},f,{text:o})).text}])}(Ar),function(e){var n=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(t){return n.call(this),this.internal.vFS[t]!==void 0},e.addFileToVFS=function(t,r){return n.call(this),this.internal.vFS[t]=r,this},e.getFileFromVFS=function(t){return n.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Ar.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var i,s,o,u,f,d,g,y=n,x=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],_=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],M={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},D={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},N=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],O=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),F=!1,Y=0;this.__bidiEngine__={};var Q=function(z){var I=z.charCodeAt(),$=I>>8,U=D[$];return U!==void 0?y[256*U+(255&I)]:$===252||$===253?"AL":O.test($)?"L":$===8?"R":"N"},le=function(z){for(var I,$=0;$<z.length;$++){if((I=Q(z.charAt($)))==="L")return!1;if(I==="R")return!0}return!1},ce=function(z,I,$,U){var W,q,ie,re,we=I[U];switch(we){case"L":case"R":F=!1;break;case"N":case"AN":break;case"EN":F&&(we="AN");break;case"AL":F=!0,we="R";break;case"WS":we="N";break;case"CS":U<1||U+1>=I.length||(W=$[U-1])!=="EN"&&W!=="AN"||(q=I[U+1])!=="EN"&&q!=="AN"?we="N":F&&(q="AN"),we=q===W?q:"N";break;case"ES":we=(W=U>0?$[U-1]:"B")==="EN"&&U+1<I.length&&I[U+1]==="EN"?"EN":"N";break;case"ET":if(U>0&&$[U-1]==="EN"){we="EN";break}if(F){we="N";break}for(ie=U+1,re=I.length;ie<re&&I[ie]==="ET";)ie++;we=ie<re&&I[ie]==="EN"?"EN":"N";break;case"NSM":if(o&&!u){for(re=I.length,ie=U+1;ie<re&&I[ie]==="NSM";)ie++;if(ie<re){var Pe=z[U],Ie=Pe>=1425&&Pe<=2303||Pe===64286;if(W=I[ie],Ie&&(W==="R"||W==="AL")){we="R";break}}}we=U<1||(W=I[U-1])==="B"?"N":$[U-1];break;case"B":F=!1,i=!0,we=Y;break;case"S":s=!0,we="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":F=!1;break;case"BN":we="N"}return we},xe=function(z,I,$){var U=z.split("");return $&&G(U,$,{hiLevel:Y}),U.reverse(),I&&I.reverse(),U.join("")},G=function(z,I,$){var U,W,q,ie,re,we=-1,Pe=z.length,Ie=0,A=[],J=Y?_:x,fe=[];for(F=!1,i=!1,s=!1,W=0;W<Pe;W++)fe[W]=Q(z[W]);for(q=0;q<Pe;q++){if(re=Ie,A[q]=ce(z,fe,A,q),U=240&(Ie=J[re][M[A[q]]]),Ie&=15,I[q]=ie=J[Ie][5],U>0)if(U===16){for(W=we;W<q;W++)I[W]=1;we=-1}else we=-1;if(J[Ie][6])we===-1&&(we=q);else if(we>-1){for(W=we;W<q;W++)I[W]=ie;we=-1}fe[q]==="B"&&(I[q]=0),$.hiLevel|=ie}s&&function(ne,he,ae){for(var T=0;T<ae;T++)if(ne[T]==="S"){he[T]=Y;for(var ue=T-1;ue>=0&&ne[ue]==="WS";ue--)he[ue]=Y}}(fe,I,Pe)},R=function(z,I,$,U,W){if(!(W.hiLevel<z)){if(z===1&&Y===1&&!i)return I.reverse(),void($&&$.reverse());for(var q,ie,re,we,Pe=I.length,Ie=0;Ie<Pe;){if(U[Ie]>=z){for(re=Ie+1;re<Pe&&U[re]>=z;)re++;for(we=Ie,ie=re-1;we<ie;we++,ie--)q=I[we],I[we]=I[ie],I[ie]=q,$&&(q=$[we],$[we]=$[ie],$[ie]=q);Ie=re}Ie++}}},Z=function(z,I,$){var U=z.split(""),W={hiLevel:Y};return $||($=[]),G(U,$,W),function(q,ie,re){if(re.hiLevel!==0&&g)for(var we,Pe=0;Pe<q.length;Pe++)ie[Pe]===1&&(we=N.indexOf(q[Pe]))>=0&&(q[Pe]=N[we+1])}(U,$,W),R(2,U,I,$,W),R(1,U,I,$,W),U.join("")};return this.__bidiEngine__.doBidiReorder=function(z,I,$){if(function(W,q){if(q)for(var ie=0;ie<W.length;ie++)q[ie]=ie;u===void 0&&(u=le(W)),d===void 0&&(d=le(W))}(z,I),o||!f||d)if(o&&f&&u^d)Y=u?1:0,z=xe(z,I,$);else if(!o&&f&&d)Y=u?1:0,z=Z(z,I,$),z=xe(z,I);else if(!o||u||f||d){if(o&&!f&&u^d)z=xe(z,I),u?(Y=0,z=Z(z,I,$)):(Y=1,z=Z(z,I,$),z=xe(z,I));else if(o&&u&&!f&&d)Y=1,z=Z(z,I,$),z=xe(z,I);else if(!o&&!f&&u^d){var U=g;u?(Y=1,z=Z(z,I,$),Y=0,g=!1,z=Z(z,I,$),g=U):(Y=0,z=Z(z,I,$),z=xe(z,I),Y=1,g=!1,z=Z(z,I,$),g=U,z=xe(z,I))}}else Y=0,z=Z(z,I,$);else Y=u?1:0,z=Z(z,I,$);return z},this.__bidiEngine__.setOptions=function(z){z&&(o=z.isInputVisual,f=z.isOutputVisual,u=z.isInputRtl,d=z.isOutputRtl,g=z.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var n=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var u=0;for(o=[],u=0;u<i.length;u+=1)Object.prototype.toString.call(i[u])==="[object Array]"?o.push([t.doBidiReorder(i[u][0]),i[u][1],i[u][2]]):o.push([t.doBidiReorder(i[u])]);r.text=o}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(Ar),Ar.API.TTFFont=function(){function e(n){var t;if(this.rawData=n,t=this.contents=new Ef(n),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new JF(this),this.registerTTF()}return e.open=function(n){return new e(n)},e.prototype.parse=function(){return this.directory=new RF(this.contents),this.head=new jF(this),this.name=new HF(this),this.cmap=new Rx(this),this.toUnicode={},this.hhea=new zF(this),this.maxp=new GF(this),this.hmtx=new qF(this),this.post=new UF(this),this.os2=new $F(this),this.loca=new YF(this),this.glyf=new WF(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var n,t,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,u,f,d;for(d=[],o=0,u=(f=this.bbox).length;o<u;o++)n=f[o],d.push(Math.round(n*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(n){var t;return((t=this.cmap.unicode)!=null?t.codeMap[n]:void 0)||0},e.prototype.widthOfGlyph=function(n){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(n).advance*t},e.prototype.widthOfString=function(n,t,r){var i,s,o,u;for(o=0,s=0,u=(n=""+n).length;0<=u?s<u:s>u;s=0<=u?++s:--s)i=n.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return o*(t/1e3)},e.prototype.lineHeight=function(n,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*n},e}();var Wu,Ef=function(){function e(n){this.data=n??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(n){return this.data[this.pos++]=n},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(n){return this.writeByte(n>>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt32=function(){var n;return(n=this.readUInt32())>=2147483648?n-4294967296:n},e.prototype.writeInt32=function(n){return n<0&&(n+=4294967296),this.writeUInt32(n)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(n){return this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt16=function(){var n;return(n=this.readUInt16())>=32768?n-65536:n},e.prototype.writeInt16=function(n){return n<0&&(n+=65536),this.writeUInt16(n)},e.prototype.readString=function(n){var t,r;for(r=[],t=0;0<=n?t<n:t>n;t=0<=n?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(n){var t,r,i;for(i=[],t=0,r=n.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(n.charCodeAt(t)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(n){return this.writeInt16(n)},e.prototype.readLongLong=function(){var n,t,r,i,s,o,u,f;return n=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),u=this.readByte(),f=this.readByte(),128&n?-1*(72057594037927940*(255^n)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^u)+(255^f)+1):72057594037927940*n+281474976710656*t+1099511627776*r+4294967296*i+16777216*s+65536*o+256*u+f},e.prototype.writeLongLong=function(n){var t,r;return t=Math.floor(n/4294967296),r=4294967295&n,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(n){return this.writeInt32(n)},e.prototype.read=function(n){var t,r;for(t=[],r=0;0<=n?r<n:r>n;r=0<=n?++r:--r)t.push(this.readByte());return t},e.prototype.write=function(n){var t,r,i,s;for(s=[],r=0,i=n.length;r<i;r++)t=n[r],s.push(this.writeByte(t));return s},e}(),RF=function(){var e;function n(t){var r,i,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return n.prototype.encode=function(t){var r,i,s,o,u,f,d,g,y,x,_,M,D;for(D in _=Object.keys(t).length,f=Math.log(2),y=16*Math.floor(Math.log(_)/f),o=Math.floor(y/f),g=16*_-y,(i=new Ef).writeInt(this.scalarType),i.writeShort(_),i.writeShort(y),i.writeShort(o),i.writeShort(g),s=16*_,d=i.pos+s,u=null,M=[],t)for(x=t[D],i.writeString(D),i.writeInt(e(x)),i.writeInt(d),i.writeInt(x.length),M=M.concat(x),D==="head"&&(u=d),d+=x.length;d%4;)M.push(0),d++;return i.write(M),r=2981146554-e(i.data),i.pos=u+8,i.writeUInt32(r),i.data},e=function(t){var r,i,s,o;for(t=Fx.call(t);t.length%4;)t.push(0);for(s=new Ef(t),i=0,r=0,o=t.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},n}(),FF={}.hasOwnProperty,_c=function(e,n){for(var t in n)FF.call(n,t)&&(e[t]=n[t]);function r(){this.constructor=e}return r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype,e};Wu=function(){function e(n){var t;this.file=n,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var jF=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,Wu),n.prototype.tag="head",n.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},n.prototype.encode=function(t){var r;return(r=new Ef).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},n}(),Vb=function(){function e(n,t){var r,i,s,o,u,f,d,g,y,x,_,M,D,N,O,F,Y;switch(this.platformID=n.readUInt16(),this.encodingID=n.readShort(),this.offset=t+n.readInt(),y=n.pos,n.pos=this.offset,this.format=n.readUInt16(),this.length=n.readUInt16(),this.language=n.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(f=0;f<256;++f)this.codeMap[f]=n.readByte();break;case 4:for(_=n.readUInt16(),x=_/2,n.pos+=6,s=function(){var Q,le;for(le=[],f=Q=0;0<=x?Q<x:Q>x;f=0<=x?++Q:--Q)le.push(n.readUInt16());return le}(),n.pos+=2,D=function(){var Q,le;for(le=[],f=Q=0;0<=x?Q<x:Q>x;f=0<=x?++Q:--Q)le.push(n.readUInt16());return le}(),d=function(){var Q,le;for(le=[],f=Q=0;0<=x?Q<x:Q>x;f=0<=x?++Q:--Q)le.push(n.readUInt16());return le}(),g=function(){var Q,le;for(le=[],f=Q=0;0<=x?Q<x:Q>x;f=0<=x?++Q:--Q)le.push(n.readUInt16());return le}(),i=(this.length-n.pos+this.offset)/2,u=function(){var Q,le;for(le=[],f=Q=0;0<=i?Q<i:Q>i;f=0<=i?++Q:--Q)le.push(n.readUInt16());return le}(),f=O=0,Y=s.length;O<Y;f=++O)for(N=s[f],r=F=M=D[f];M<=N?F<=N:F>=N;r=M<=N?++F:--F)g[f]===0?o=r+d[f]:(o=u[g[f]/2+(r-M)-(x-f)]||0)!==0&&(o+=d[f]),this.codeMap[r]=65535&o}n.pos=y}return e.encode=function(n,t){var r,i,s,o,u,f,d,g,y,x,_,M,D,N,O,F,Y,Q,le,ce,xe,G,R,Z,z,I,$,U,W,q,ie,re,we,Pe,Ie,A,J,fe,ne,he,ae,T,ue,ke,Ce,Ve;switch(U=new Ef,o=Object.keys(n).sort(function(K,pe){return K-pe}),t){case"macroman":for(D=0,N=function(){var K=[];for(M=0;M<256;++M)K.push(0);return K}(),F={0:0},s={},W=0,we=o.length;W<we;W++)F[ue=n[i=o[W]]]==null&&(F[ue]=++D),s[i]={old:n[i],new:F[n[i]]},N[i]=F[n[i]];return U.writeUInt16(1),U.writeUInt16(0),U.writeUInt32(12),U.writeUInt16(0),U.writeUInt16(262),U.writeUInt16(0),U.write(N),{charMap:s,subtable:U.data,maxGlyphID:D+1};case"unicode":for(I=[],y=[],Y=0,F={},r={},O=d=null,q=0,Pe=o.length;q<Pe;q++)F[le=n[i=o[q]]]==null&&(F[le]=++Y),r[i]={old:le,new:F[le]},u=F[le]-i,O!=null&&u===d||(O&&y.push(O),I.push(i),d=u),O=i;for(O&&y.push(O),y.push(65535),I.push(65535),Z=2*(R=I.length),G=2*Math.pow(Math.log(R)/Math.LN2,2),x=Math.log(G/2)/Math.LN2,xe=2*R-G,f=[],ce=[],_=[],M=ie=0,Ie=I.length;ie<Ie;M=++ie){if(z=I[M],g=y[M],z===65535){f.push(0),ce.push(0);break}if(z-($=r[z].new)>=32768)for(f.push(0),ce.push(2*(_.length+R-M)),i=re=z;z<=g?re<=g:re>=g;i=z<=g?++re:--re)_.push(r[i].new);else f.push($-z),ce.push(0)}for(U.writeUInt16(3),U.writeUInt16(1),U.writeUInt32(12),U.writeUInt16(4),U.writeUInt16(16+8*R+2*_.length),U.writeUInt16(0),U.writeUInt16(Z),U.writeUInt16(G),U.writeUInt16(x),U.writeUInt16(xe),ae=0,A=y.length;ae<A;ae++)i=y[ae],U.writeUInt16(i);for(U.writeUInt16(0),T=0,J=I.length;T<J;T++)i=I[T],U.writeUInt16(i);for(ke=0,fe=f.length;ke<fe;ke++)u=f[ke],U.writeUInt16(u);for(Ce=0,ne=ce.length;Ce<ne;Ce++)Q=ce[Ce],U.writeUInt16(Q);for(Ve=0,he=_.length;Ve<he;Ve++)D=_[Ve],U.writeUInt16(D);return{charMap:r,subtable:U.data,maxGlyphID:Y+1}}},e}(),Rx=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,Wu),n.prototype.tag="cmap",n.prototype.parse=function(t){var r,i,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new Vb(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},n.encode=function(t,r){var i,s;return r==null&&(r="macroman"),i=Vb.encode(t,r),(s=new Ef).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},n}(),zF=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,Wu),n.prototype.tag="hhea",n.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},n}(),$F=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,Wu),n.prototype.tag="OS/2",n.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},n}(),UF=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,Wu),n.prototype.tag="post",n.prototype.parse=function(t){var r,i,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var o;for(i=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=(function(){var u,f,d;for(d=[],o=u=0,f=this.file.maxp.numGlyphs;0<=f?u<f:u>f;o=0<=f?++u:--u)d.push(t.readUInt32());return d}).call(this)}},n}(),VF=function(e,n){this.raw=e,this.length=e.length,this.platformID=n.platformID,this.encodingID=n.encodingID,this.languageID=n.languageID},HF=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,Wu),n.prototype.tag="name",n.prototype.parse=function(t){var r,i,s,o,u,f,d,g,y,x,_;for(t.pos=this.offset,t.readShort(),r=t.readShort(),f=t.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+f+t.readShort()});for(d={},o=y=0,x=i.length;y<x;o=++y)s=i[o],t.pos=s.offset,g=t.readString(s.length),u=new VF(g,s),d[_=s.nameID]==null&&(d[_]=[]),d[s.nameID].push(u);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},n}(),GF=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,Wu),n.prototype.tag="maxp",n.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},n}(),qF=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,Wu),n.prototype.tag="hmtx",n.prototype.parse=function(t){var r,i,s,o,u,f,d;for(t.pos=this.offset,this.metrics=[],r=0,f=this.file.hhea.numberOfMetrics;0<=f?r<f:r>f;r=0<=f?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var g,y;for(y=[],r=g=0;0<=s?g<s:g>s;r=0<=s?++g:--g)y.push(t.readInt16());return y}(),this.widths=(function(){var g,y,x,_;for(_=[],g=0,y=(x=this.metrics).length;g<y;g++)o=x[g],_.push(o.advance);return _}).call(this),i=this.widths[this.widths.length-1],d=[],r=u=0;0<=s?u<s:u>s;r=0<=s?++u:--u)d.push(this.widths.push(i));return d},n.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},n}(),Fx=[].slice,WF=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,Wu),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(t){var r,i,s,o,u,f,d,g,y,x;return t in this.cache?this.cache[t]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(t),(s=o.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,u=(f=new Ef(r.read(s))).readShort(),g=f.readShort(),x=f.readShort(),d=f.readShort(),y=f.readShort(),this.cache[t]=u===-1?new KF(f,g,x,d,y):new ZF(f,u,g,x,d,y),this.cache[t]))},n.prototype.encode=function(t,r,i){var s,o,u,f,d;for(u=[],o=[],f=0,d=r.length;f<d;f++)s=t[r[f]],o.push(u.length),s&&(u=u.concat(s.encode(i)));return o.push(u.length),{table:u,offsets:o}},n}(),ZF=function(){function e(n,t,r,i,s,o){this.raw=n,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),KF=function(){function e(n,t,r,i,s){var o,u;for(this.raw=n,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;u=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&u;)o.pos+=1&u?4:2,128&u?o.pos+=8:64&u?o.pos+=4:8&u&&(o.pos+=2)}return e.prototype.encode=function(){var n,t,r;for(t=new Ef(Fx.call(this.raw.data)),n=0,r=this.glyphIDs.length;n<r;++n)t.pos=this.glyphOffsets[n];return t.data},e}(),YF=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,Wu),n.prototype.tag="loca",n.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*t.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(t.readUInt32());return o}).call(this)},n.prototype.indexOf=function(t){return this.offsets[t]},n.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},n.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,u=0;u<i.length;++u)if(i[u]=s,o<r.length&&r[o]==u){++o,i[u]=s;var f=this.offsets[u],d=this.offsets[u+1]-f;d>0&&(s+=d)}for(var g=new Array(4*i.length),y=0;y<i.length;++y)g[4*y+3]=255&i[y],g[4*y+2]=(65280&i[y])>>8,g[4*y+1]=(16711680&i[y])>>16,g[4*y]=(4278190080&i[y])>>24;return g},n}(),JF=function(){function e(n){this.font=n,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var n,t,r,i,s;for(t in i=this.font.cmap.tables[0].codeMap,n={},s=this.subset)r=s[t],n[t]=i[r];return n},e.prototype.glyphsFor=function(n){var t,r,i,s,o,u,f;for(i={},o=0,u=n.length;o<u;o++)i[s=n[o]]=this.font.glyf.glyphFor(s);for(s in t=[],i)(r=i[s])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(s in f=this.glyphsFor(t))r=f[s],i[s]=r;return i},e.prototype.encode=function(n,t){var r,i,s,o,u,f,d,g,y,x,_,M,D,N,O;for(i in r=Rx.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(n),_={0:0},O=r.charMap)_[(f=O[i]).old]=f.new;for(M in x=r.maxGlyphID,o)M in _||(_[M]=x++);return g=function(F){var Y,Q;for(Y in Q={},F)Q[F[Y]]=Y;return Q}(_),y=Object.keys(g).sort(function(F,Y){return F-Y}),D=function(){var F,Y,Q;for(Q=[],F=0,Y=y.length;F<Y;F++)u=y[F],Q.push(g[u]);return Q}(),s=this.font.glyf.encode(o,D,_),d=this.font.loca.encode(s.offsets,D),N={cmap:this.font.cmap.raw(),glyf:s.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(N["OS/2"]=this.font.os2.raw()),this.font.directory.encode(N)},e}();Ar.API.PDFObject=function(){var e;function n(){}return e=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},n.convert=function(t){var r,i,s,o;if(Array.isArray(t))return"["+function(){var u,f,d;for(d=[],u=0,f=t.length;u<f;u++)r=t[u],d.push(n.convert(r));return d}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+e(t.getUTCFullYear(),4)+e(t.getUTCMonth(),2)+e(t.getUTCDate(),2)+e(t.getUTCHours(),2)+e(t.getUTCMinutes(),2)+e(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in s=["<<"],t)o=t[i],s.push("/"+i+" "+n.convert(o));return s.push(">>"),s.join(`
`)}return""+t},n}();const XF={class:"h-full flex"},QF={class:"flex-1 relative"},e9={key:0,class:"absolute inset-0 bg-black/30 backdrop-blur-sm z-[2000] flex items-center justify-center"},t9={key:1,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[3000]"},n9={class:"text-center max-w-lg mx-auto p-8"},r9={class:"space-y-4"},i9={class:"map-parent"},o9={key:0,class:"fixed left-0 right-0 z-[1500]",style:{top:"var(--header-height)"}},s9={class:"map-content flex flex-col md:flex-row relative"},a9={class:"flex-1 relative"},l9={key:0,class:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 z-50"},u9={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center z-[9999] p-4 overflow-y-auto"},c9={class:"bg-white rounded-lg p-6 max-w-2xl w-full my-8 relative"},f9={class:"flex justify-between items-center mb-4 sticky top-0 bg-white pb-4 border-b"},h9={class:"overflow-y-auto max-h-[calc(100vh-12rem)]"},d9={key:0,class:"space-y-4"},p9={key:0,class:"space-y-2"},g9={class:"grid grid-cols-1 gap-2"},m9=["onClick"],v9={class:"font-medium text-gray-900"},y9={key:1,class:"space-y-2"},_9={class:"flex items-center mb-4"},b9={class:"text-sm text-gray-600"},w9={class:"grid grid-cols-1 gap-2"},x9=["onClick"],L9={class:"font-medium text-gray-900"},S9={key:2,class:"space-y-2"},C9={class:"flex items-center mb-4"},E9={class:"text-sm text-gray-600"},P9={class:"grid grid-cols-1 gap-2"},M9={key:0,class:"text-center py-8"},A9=["onClick"],k9={class:"font-medium text-gray-900"},T9={key:3,class:"space-y-2"},D9={class:"flex items-center mb-4"},N9={class:"text-sm text-gray-600"},B9={class:"grid grid-cols-1 gap-2"},O9=["onClick"],I9={class:"font-medium text-gray-900"},R9={class:"text-sm text-gray-500"},F9={class:"text-xs text-gray-400 mt-1"},j9={key:1,class:"space-y-4"},z9={key:0,class:"space-y-2"},$9={class:"grid grid-cols-1 gap-2"},U9={key:0,class:"text-center py-8"},V9=["onClick"],H9={class:"font-medium text-gray-900"},G9={key:1,class:"space-y-2"},q9={class:"flex items-center mb-4"},W9={class:"text-sm text-gray-600"},Z9={class:"grid grid-cols-1 gap-2"},K9=["onClick"],Y9={class:"font-medium text-gray-900"},J9={class:"text-sm text-gray-500"},X9={class:"text-xs text-gray-400 mt-1"},Q9={key:2,class:"space-y-4"},ej={key:3,class:"space-y-4"},tj={key:0,class:"text-center py-8"},nj={key:1,class:"space-y-2"},rj=["onClick"],ij={class:"font-medium text-gray-900"},oj={class:"text-sm text-gray-500"},sj={class:"text-xs text-gray-400 mt-1"},Hb=us({__name:"MapView",emits:["shape-selected"],setup(e,{emit:n}){const t=Ft(null),r=Ft(!1),i=sm(),s=Ip(),o=Bp(),u=dc(),f=Ft([]),{currentTool:d,selectedShape:g,map:y,initMap:x,setDrawingTool:_,updateShapeStyle:M,updateShapeProperties:D,featureGroup:N,adjustView:O,clearActiveControlPoints:F,calculateConnectedCoverageArea:Y}=TR(),{initMap:Q,changeBaseMap:le}=DR(),ce=Ft(!1),xe=Ft(!1),G=Ft(!1),R=Ft(null),Z=Ft(null),z=Ft(!1),I=Ft(null),$=va(),U=Ft([]),W=Ft([]),q=Ft([]),ie=Ft(null),re=Ft(null),we=Ft(null),Pe=Ft(!1),Ie=Ft(!1),A=Ft(!1),J=Ft(null),fe=gr(()=>{var mt,We;return console.log("[MapView][filteredClients] Computing with:",{userType:(mt=$.user)==null?void 0:mt.user_type,selectedSalarie:ie.value,salarieVisiteurs:W.value,visiteurCount:((We=W.value)==null?void 0:We.length)||0}),$.isSalarie||ie.value?W.value:[]}),ne=gr(()=>{var Zn,Zt,mn;if(!g.value)return null;console.log("[MapView][selectedShape] Initial layer state:",{layer:g.value,hasName:"name"in g.value,name:g.value.name,hasProperties:"properties"in g.value,propertiesName:(Zn=g.value.properties)==null?void 0:Zn.name,allLayerKeys:Object.keys(g.value),allPropertiesKeys:g.value.properties?Object.keys(g.value.properties):[],_leaflet_id:g.value._leaflet_id,_dbId:g.value._dbId,descriptor:Object.getOwnPropertyDescriptor(g.value,"name")});const mt=g.value.properties||{};let We="unknown";mt.type?We=mt.type:g.value instanceof Rt.Circle?We="Circle":g.value instanceof ga||g.value instanceof Rt.Rectangle?We="Rectangle":g.value instanceof gf||g.value instanceof Rt.Polygon?We="Polygon":g.value instanceof Sf?We="ElevationLine":(g.value instanceof Ts||g.value instanceof Rt.Polyline&&!(g.value instanceof Rt.Polygon))&&(We="Line"),console.log(`[MapView][selectedShape] Type de forme détecté: ${We}`),mt.type||(g.value.properties||(g.value.properties={}),g.value.properties.type=We);let Ot;if(mt.style&&mt.style.name)Ot=mt.style.name,console.log("[MapView][selectedShape] Using name from style:",Ot);else if(mt.name)Ot=mt.name,console.log("[MapView][selectedShape] Using name from properties:",Ot);else if(g.value.name)Ot=g.value.name,console.log("[MapView][selectedShape] Using name from layer:",Ot);else{const It=Object.getOwnPropertyDescriptor(g.value,"name");It&&It.value&&(Ot=It.value,console.log("[MapView][selectedShape] Found name in non-enumerable layer property:",Ot));const Kt=["_name","displayName","title"];for(const Ln of Kt)if(g.value[Ln]){Ot=g.value[Ln],console.log(`[MapView][selectedShape] Found name in ${Ln}:`,Ot);break}}Ot&&(console.log(`[MapView][selectedShape] Ensuring name "${Ot}" is set everywhere`),g.value.properties||(g.value.properties={}),g.value.properties.name=Ot,g.value.properties.style||(g.value.properties.style={}),g.value.properties.style.name=Ot,g.value.name=Ot,typeof g.value.setName=="function"&&(g.value.setName(Ot),console.log(`[MapView][selectedShape] Used setName method to set name "${Ot}"`))),g.value.properties.category||(g.value.properties.category="forages"),g.value.properties.accessLevel||(g.value.properties.accessLevel="visitor"),console.log("[MapView][selectedShape] Preparing properties for DrawingTools:",{type:We,name:mt.name,foundName:Ot,hasNameProperty:"name"in mt,allPropertiesKeys:Object.keys(mt),layerId:g.value._leaflet_id,rawProperties:mt,layerName:g.value.name,layerPropertiesName:(Zt=g.value.properties)==null?void 0:Zt.name});const Pn={...mt,type:We,name:Ot||g.value.name||mt.name||void 0,category:g.value.properties.category||"forages",accessLevel:g.value.properties.accessLevel||"visitor"},tr={type:We,properties:Pn,layer:g.value,options:g.value.options||{}};return console.log("[MapView][selectedShape] Final shape object for DrawingTools:",{type:tr.type,hasName:"name"in tr.properties,name:tr.properties.name,layerName:tr.layer.name,layerPropertiesName:(mn=tr.layer.properties)==null?void 0:mn.name}),tr});function he(mt){const We=mt.getCenter(),Ot=mt.getZoom(),Pn={lat:We.lat,lng:We.lng,zoom:Ot};document.cookie=`mapState=${JSON.stringify(Pn)};max-age=2592000;path=/`}function ae(){const We=document.cookie.split(";").find(Ot=>Ot.trim().startsWith("mapState="));if(We)try{return JSON.parse(We.split("=")[1])}catch(Ot){return console.error("Erreur lors de la lecture du cookie de position:",Ot),null}return null}$s(async()=>{var mt,We;console.log("[MapView][onMounted] Initialisation du composant MapView"),console.log("[MapView][onMounted] État initial des filtres dans le store:",JSON.stringify({accessLevels:{...s.filters.accessLevels},categories:{...s.filters.categories},shapeTypes:{...s.filters.shapeTypes}},null,2));try{if(await i.fetchPlans(),($.isAdmin||$.isEntreprise)&&await nt(),$.isEntreprise){Pe.value=!0;try{const It=await Un.get("/users/",{params:{role:"SALARIE",entreprise:(mt=$.user)==null?void 0:mt.id}});U.value=It.data}catch(It){console.error("Error loading salaries:",It),U.value=[]}finally{Pe.value=!1}}if($.isSalarie){Ie.value=!0;try{const It=await $.fetchSalarieVisiteurs(((We=$.user)==null?void 0:We.id)||0);W.value=Array.isArray(It)?It:[It]}catch(It){console.error("Error loading clients:",It)}finally{Ie.value=!1}}const Ot=ae(),Pn=Ot?[Ot.lat,Ot.lng]:[46.603354,1.888334],tr=(Ot==null?void 0:Ot.zoom)??6;if(t.value&&!y.value){const It=x(t.value,Pn,tr);It.pm.setLang("fr"),It.pm.addControls({rotateMode:!1}),Q(It),It.on("moveend",()=>{he(It)}),window.addEventListener("map-set-location",Kt=>{if(It&&Kt.detail){const{lat:Ln,lng:mr,zoom:at}=Kt.detail;It.flyTo([Ln,mr],at,{duration:1.5,easeLinearity:.25})}}),N.value&&(N.value.on("layeradd",Kt=>{const Ln=Kt.layer;Ln&&Ln._leaflet_id&&f.value.findIndex(at=>at.layer&&at.layer._leaflet_id===Ln._leaflet_id)===-1&&(console.log(`[MapView][featureGroup.layeradd] Ajout de la couche ${Ln._leaflet_id} à shapes.value`),f.value.push({layer:Ln,id:Ln._dbId||Ln._leaflet_id}))}),N.value.on("layerremove",Kt=>{const Ln=Kt.layer;Ln&&Ln._leaflet_id&&console.log(`[MapView][featureGroup.layerremove] Couche ${Ln._leaflet_id} supprimée du featureGroup mais conservée dans shapes.value`)}))}const Zn=localStorage.getItem("lastPlanId");if(Zn)try{console.log("[MapView][onMounted] Chargement immédiat du dernier plan:",Zn),await Ve(parseInt(Zn));const It=document.querySelector(".map-parent");It instanceof HTMLElement&&(It.style.display="block")}catch(It){console.error("[MapView][onMounted] Erreur chargement dernier plan:",It),R.value=null,i.clearCurrentPlan(),s.clearCurrentPlan(),ke(),localStorage.removeItem("lastPlanId")}else console.log("[MapView][onMounted] Aucun dernier plan à charger"),R.value=null,i.clearCurrentPlan(),s.clearCurrentPlan(),ke();window.addEventListener("shape:created",It=>{const{shape:Kt,type:Ln,properties:mr}=It.detail;console.log("[MapView] Nouvelle forme créée",{shape:Kt,type:Ln,properties:mr}),s.addElement(Kt),_("")}),window.addEventListener("categoriesReactivated",It=>{console.log("[MapView][categoriesReactivated] Événement reçu:",It.detail),Mn()}),window.addEventListener("shapeTypesReactivated",It=>{console.log("[MapView][shapeTypesReactivated] Événement reçu:",It.detail),Mn()});const Zt=It=>{if(console.log("[MapView] Édition de note via Leaflet",It),console.log("[MapView] Type de e:",typeof It,"Contenu de e:",JSON.stringify(It)),!It||!It.note){console.error("[MapView] Erreur: e.note est undefined ou null",It);return}const Kt=It.note;console.log("[MapView] Note à éditer:",Kt),Z.value={id:Kt.id,title:Kt.title||Kt.name,description:Kt.description,location:Kt.location,columnId:Kt.columnId||o.getDefaultColumn.id,accessLevel:Kt.accessLevel,style:Kt.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:Kt.createdAt||new Date().toISOString(),updatedAt:Kt.updatedAt||new Date().toISOString(),comments:Kt.comments||[],photos:Kt.photos||[]},console.log("[MapView] editingMapNote.value après conversion:",Z.value),G.value=!0,console.log("[MapView] showNoteEditModal.value:",G.value)},mn=It=>{if(console.log("[MapView] Édition de note via événement global",It),!It.detail||!It.detail.note){console.error("[MapView] Erreur: event.detail.note est undefined ou null",It);return}const Kt=It.detail.note;console.log("[MapView] Note à éditer (global):",Kt),Z.value={id:Kt.id,title:Kt.title||Kt.name,description:Kt.description,location:Kt.location,columnId:Kt.columnId||o.getDefaultColumn.id,accessLevel:Kt.accessLevel,style:Kt.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:Kt.createdAt||new Date().toISOString(),updatedAt:Kt.updatedAt||new Date().toISOString(),comments:Kt.comments||[],photos:Kt.photos||[]},G.value=!0};window.addEventListener("geonote:edit",mn),N.value&&(N.value.off("note:edit"),N.value.on("note:edit",Zt))}catch(Ot){console.error("Error during component mount:",Ot),R.value=null,i.clearCurrentPlan(),s.clearCurrentPlan(),ke(),localStorage.removeItem("lastPlanId")}}),So(()=>s.hasUnsavedChanges,mt=>{console.log("[MapView][watch drawingStore.hasUnsavedChanges]",mt),mt&&R.value&&i.markUnsavedChanges()}),So(()=>s.filters,(mt,We)=>{if(console.log("[MapView][watch drawingStore.filters] Changement de filtres détecté:",JSON.stringify(mt,null,2)),We){const Ot=JSON.stringify(We.accessLevels)!==JSON.stringify(mt.accessLevels),Pn=JSON.stringify(We.categories)!==JSON.stringify(mt.categories),tr=JSON.stringify(We.shapeTypes)!==JSON.stringify(mt.shapeTypes);console.log("[MapView][watch drawingStore.filters] Changements détectés:",{accessLevelsChanged:Ot,categoriesChanged:Pn,shapeTypesChanged:tr}),Ot||Pn||tr?(console.log("[MapView][watch drawingStore.filters] Mise à jour de l'affichage suite au changement de filtres"),Mn()):console.log("[MapView][watch drawingStore.filters] Aucun changement réel, pas de mise à jour")}else console.log("[MapView][watch drawingStore.filters] Mise à jour de l'affichage suite au changement de filtres"),Mn()},{deep:!0});const T=mt=>{console.log("[MapView][filtersChanged] Événement reçu:",mt.detail),Mn()};$s(()=>{window.addEventListener("filtersChanged",T)}),mc(()=>{window.removeEventListener("filtersChanged",T),console.log("[MapView][filtersChanged] Événement désactivé")}),So(()=>s.getFilteredElements,(mt,We)=>{console.log("[MapView][watch drawingStore.getFilteredElements] Mise à jour de l'affichage, éléments filtrés:",{nouveaux:mt.length,anciens:We?We.length:"aucun",ids:mt.map(Ot=>Ot.id)}),console.log("[MapView][watch drawingStore.getFilteredElements] Mise à jour de l'affichage suite au changement d'elements filtrés"),Mn()},{deep:!0}),So(y,async mt=>{var We;console.log(`
[MapView][watch map] Nouvelle carte:`,!!mt),mt&&i.currentPlan&&!((We=N.value)!=null&&We.getLayers().length)&&(console.log("[MapView][watch map] Chargement initial des éléments du plan:",i.currentPlan.id),ke(),await s.loadPlanElements(i.currentPlan.id))}),So(()=>i.currentPlan,async(mt,We)=>{var Ot,Pn,tr;if((mt==null?void 0:mt.id)===(We==null?void 0:We.id)){console.log("[MapView][watch currentPlan] Plan identique, pas de rechargement nécessaire");return}console.log(`
[MapView][watch currentPlan] ====== CHANGEMENT DE PLAN ======`),console.log("[MapView][watch currentPlan] Nouveau plan:",mt==null?void 0:mt.id);try{if(mt){console.log("[MapView][watch currentPlan] Mise à jour du plan courant..."),R.value=mt;const Zn=document.querySelector(".map-parent");Zn instanceof HTMLElement&&(Zn.style.display="block"),console.log("[MapView][watch currentPlan] Plan mis à jour avec succès")}else{console.log("[MapView][watch currentPlan] Nettoyage du plan courant..."),R.value=null,ke();const Zn=document.querySelector(".map-parent");Zn instanceof HTMLElement&&(Zn.style.display="none")}}catch(Zn){console.error("[MapView][watch currentPlan] ERREUR:",Zn),R.value=null,ke()}console.log("[MapView][watch currentPlan] État final:",{currentPlanId:(Ot=R.value)==null?void 0:Ot.id,storePlanId:(Pn=i.currentPlan)==null?void 0:Pn.id,mapVisible:y.value!==null,mapParentDisplay:(tr=document.querySelector(".map-parent"))==null?void 0:tr.getAttribute("style")}),console.log(`[MapView][watch currentPlan] ====== FIN CHANGEMENT ======
`)},{immediate:!0}),cd(()=>{y.value&&y.value.off("moveend"),window.removeEventListener("shape:created",()=>{})});function ue(){r.value=!r.value}function ke(){N.value&&N.value.clearLayers(),f.value=[],F(),g.value=null,d.value=""}async function Ce(mt){return await dn.measureAsync("refreshMapWithPlan",async()=>{try{dn.measure("refreshMapWithPlan:clearMap",()=>{ke()},"MapView"),await dn.measureAsync("refreshMapWithPlan:loadPlanElements",async()=>{await s.loadPlanElements(mt)},"MapView");const We=dn.measure("refreshMapWithPlan:getPlanById",()=>i.getPlanById(mt),"MapView");We?(dn.measure("refreshMapWithPlan:updateCurrentPlan",()=>{R.value=We,i.setCurrentPlan(We),s.setCurrentPlan(We.id),localStorage.setItem("lastPlanId",We.id.toString())},"MapView"),y.value&&N.value&&await dn.measureAsync("refreshMapWithPlan:addShapesToMap",async()=>{console.log("[MapView][refreshMapWithPlan] Éléments disponibles:",{count:s.getCurrentElements.length,elements:s.getCurrentElements.map(Zn=>{var Zt;return{id:Zn.id,type:Zn.type_forme,hasName:Zn.data&&"name"in Zn.data,name:(Zt=Zn.data)==null?void 0:Zt.name}})});const Ot=s.getCurrentElements.reduce((Zn,Zt)=>(Zn[Zt.type_forme]||(Zn[Zt.type_forme]=[]),Zn[Zt.type_forme].push(Zt),Zn),{}),Pn=10,tr=Object.entries(Ot).map(async([Zn,Zt])=>{for(let mn=0;mn<Zt.length;mn+=Pn){const It=Zt.slice(mn,mn+Pn);await Promise.all(It.map(async Kt=>{await dn.measureAsync(`refreshMapWithPlan:createElement:${Kt.type_forme}`,async()=>{var mr;if(!N.value||!Kt.data)return;let Ln=null;switch(Kt.type_forme){case"Circle":{const at=Kt.data;at.center&&at.radius&&(Ln=new Rh(Rt.latLng(at.center[1],at.center[0]),{...at.style,radius:at.radius}),at.name&&(Ln.properties={type:"Circle",name:at.name,style:at.style,radius:at.radius,diameter:at.radius*2,surface:Math.PI*at.radius*at.radius,perimeter:2*Math.PI*at.radius},Ln.name=at.name));break}case"Rectangle":{const at=Kt.data;if(at.bounds){const Cn=Rt.latLngBounds(Rt.latLng(at.bounds.southWest[1],at.bounds.southWest[0]),Rt.latLng(at.bounds.northEast[1],at.bounds.northEast[0]));Ln=new ga(Cn,at.style),at.name&&(Ln.properties={name:at.name},Ln.name=at.name)}break}case"Polygon":{const at=Kt.data;if(at.points&&at.points.length>0){const Cn=at.points.map(xr=>Rt.latLng(xr[1],xr[0]));Ln=new gf(Cn,at.style),at.name&&(Ln.properties={name:at.name},Ln.name=at.name)}break}case"Line":{const at=Kt.data;if(at.points&&at.points.length>0){const Cn=at.points.map(xr=>Rt.latLng(xr[1],xr[0]));Ln=new Ts(Cn,at.style),at.name&&(Ln.properties={name:at.name},Ln.name=at.name)}break}case"ElevationLine":{const at=Kt.data;if(at.points&&at.points.length>0){const Cn=at.points.map(xr=>Rt.latLng(xr[1],xr[0]));Ln=new Sf(Cn,at.style),at.name&&(Ln.properties={name:at.name,type:"ElevationLine",elevationData:at.elevationData,minElevation:at.minElevation,maxElevation:at.maxElevation,elevationGain:at.elevationGain,elevationLoss:at.elevationLoss,averageSlope:at.averageSlope,maxSlope:at.maxSlope},Ln.name=at.name),at.elevationData&&(Ln.elevationData=at.elevationData)}break}case"Note":{console.log("[MapView][refreshMapWithPlan] Création d'une note:",Kt.data);const at=Kt.data;if(at.location&&Array.isArray(at.location)&&at.location.length===2)try{at.category||(at.category="forages",console.log("[MapView][refreshMapWithPlan] Catégorie par défaut ajoutée:",at.category)),at.accessLevel||(at.accessLevel="private",console.log("[MapView][refreshMapWithPlan] Niveau d'accès par défaut ajouté:",at.accessLevel));const Cn=Op.fromBackendData(at);Cn._dbId=Kt.id,Ln=Cn,console.log("[MapView][refreshMapWithPlan] Note créée:",{id:Kt.id,location:at.location,name:at.name,category:at.category,accessLevel:at.accessLevel,type:Cn.properties.type})}catch(Cn){console.error("[MapView][refreshMapWithPlan] Erreur lors de la création de la Note:",Cn)}else console.error("[MapView][refreshMapWithPlan] Données invalides pour Note:",at);break}}Ln&&(Ln._dbId=Kt.id,(mr=N.value)==null||mr.addLayer(Ln),f.value.push({id:Kt.id,type:Kt.type_forme,layer:Ln,properties:Ln.properties}))},"MapView")})),await new Promise(Kt=>setTimeout(Kt,0))}});await Promise.all(tr),dn.measure("refreshMapWithPlan:adjustView",()=>{O()},"MapView")},"MapView"),console.log(`Plan ${mt} chargé avec succès avec ${s.getCurrentElements.length} formes`)):console.error(`Plan ${mt} introuvable après chargement`),xe.value=!1}catch(We){throw console.error("Erreur lors du rafraîchissement de la carte:",We),We}},"MapView")}async function Ve(mt){return await dn.measureAsync("loadPlan",async()=>{var We;console.log(`
[MapView][loadPlan] ====== DÉBUT CHARGEMENT PLAN ======`),console.log("[MapView][loadPlan] Tentative de chargement du plan:",mt);try{const Ot=await dn.measureAsync("loadPlan:getPlanFromStore",async()=>i.getPlanById(mt),"MapView");if(console.log("[MapView][loadPlan] Plan trouvé dans le store:",!!Ot),!Ot){console.log("[MapView][loadPlan] Plan non trouvé dans le store, vérification API...");try{await dn.measureAsync("loadPlan:apiCheck",async()=>{await Un.get(`/plans/${mt}/`)},"MapView")}catch(Pn){throw((We=Pn.response)==null?void 0:We.status)===404&&(console.warn("[MapView][loadPlan] Plan non trouvé - Nettoyage du localStorage"),localStorage.removeItem("lastPlanId"),R.value=null,i.clearCurrentPlan(),s.clearCurrentPlan(),ke()),Pn}}console.log("[MapView][loadPlan] Rafraîchissement de la carte..."),await dn.measureAsync("loadPlan:refreshMap",async()=>{await Ce(mt)},"MapView"),xe.value=!1,console.log("[MapView][loadPlan] Invalidation de la taille de la carte..."),Ut(),console.log("[MapView][loadPlan] Plan chargé avec succès:",{planId:mt,elementsCount:s.getCurrentElements.length})}catch(Ot){throw console.error("Erreur lors du chargement du plan:",Ot),dn.measure("loadPlan:errorRecovery",()=>{R.value=null,i.clearCurrentPlan(),s.clearCurrentPlan(),ke(),localStorage.removeItem("lastPlanId")},"MapView"),Ot}},"MapView")}async function K(){var mt;if(!R.value||!N.value){console.warn("Aucun plan actif ou groupe de formes à sauvegarder");return}z.value=!0,I.value="saving";try{const We=[],Ot=new Set(s.getCurrentElements.filter(Zt=>Zt.id!==void 0).map(Zt=>Zt.id)),Pn=new Set;console.log("[savePlan] Début de la sauvegarde",{featureGroupLayers:N.value.getLayers().length,existingIds:Array.from(Ot),currentElements:s.getCurrentElements}),N.value.eachLayer(Zt=>{var Ln,mr,at,Cn,xr,Ni,Fr,Er,lr,Hr,ir,Or,jr,rn,Fi,_i,gi,Kr,Ir;console.log("[savePlan] Traitement de la couche",{type:(Ln=Zt.properties)==null?void 0:Ln.type,name:(mr=Zt.properties)==null?void 0:mr.name,isPolygon:Zt instanceof Rt.Polygon,properties:Zt.properties});let mn,It;const Kt={color:Zt.options.color||"#2b6451",weight:Zt.options.weight||3,opacity:Zt.options.opacity||1,fillColor:Zt.options.fillColor||"#2b6451",fillOpacity:Zt.options.fillOpacity||.2,dashArray:Zt.options.dashArray||""};if(Zt instanceof ga){mn="Rectangle";const Rr=Zt.getBounds();It={bounds:{southWest:[Rr.getSouthWest().lng,Rr.getSouthWest().lat],northEast:[Rr.getNorthEast().lng,Rr.getNorthEast().lat]},style:Kt,name:((at=Zt.properties)==null?void 0:at.name)||"",rotation:Zt.getRotation(),width:Zt.getDimensions().width,height:Zt.getDimensions().height,center:[Zt.getCenter().lng,Zt.getCenter().lat]}}else if(Zt instanceof Rt.Circle)mn="Circle",It={center:[Zt.getLatLng().lng,Zt.getLatLng().lat],radius:Zt.getRadius(),name:((Cn=Zt.properties)==null?void 0:Cn.name)||"",style:Kt};else if(Zt instanceof Rt.Rectangle){mn="Rectangle";const Rr=Zt.getBounds();It={bounds:{southWest:[Rr.getSouthWest().lng,Rr.getSouthWest().lat],northEast:[Rr.getNorthEast().lng,Rr.getNorthEast().lat]},name:((xr=Zt.properties)==null?void 0:xr.name)||"",style:Kt}}else if(Zt instanceof Rt.Polyline&&!(Zt instanceof Rt.Polygon))if(((Ni=Zt.properties)==null?void 0:Ni.type)==="ElevationLine"){mn="ElevationLine";const Rr=Zt.getLatLngs(),hr=((Fr=Zt.properties)==null?void 0:Fr.category)||"forages",ji=((Er=Zt.properties)==null?void 0:Er.accessLevel)||"visitor";console.log("[savePlan] ElevationLine - Catégorie:",hr,"Niveau d'accès:",ji),It={points:Rr.map(Ls=>[Ls.lng,Ls.lat]),style:{...Kt,color:((lr=Zt.properties.style)==null?void 0:lr.color)||"#FF4500",weight:((Hr=Zt.properties.style)==null?void 0:Hr.weight)||4,opacity:((ir=Zt.properties.style)==null?void 0:ir.opacity)||.8,_accessLevel:ji,accessLevel:ji},name:((Or=Zt.properties)==null?void 0:Or.name)||"",category:hr,accessLevel:ji,elevationData:Zt.properties.elevationData,samplePointStyle:Zt.properties.samplePointStyle,minMaxPointStyle:Zt.properties.minMaxPointStyle,minElevation:Zt.properties.minElevation,maxElevation:Zt.properties.maxElevation,elevationGain:Zt.properties.elevationGain,elevationLoss:Zt.properties.elevationLoss,averageSlope:Zt.properties.averageSlope,maxSlope:Zt.properties.maxSlope}}else{mn="Line";const Rr=Zt.getLatLngs(),hr=((jr=Zt.properties)==null?void 0:jr.category)||"forages",ji=((rn=Zt.properties)==null?void 0:rn.accessLevel)||"visitor";console.log("[savePlan] Line - Catégorie:",hr,"Niveau d'accès:",ji),It={points:Rr.map(Ls=>[Ls.lng,Ls.lat]),name:((Fi=Zt.properties)==null?void 0:Fi.name)||"",category:hr,accessLevel:ji,style:{...Kt,_accessLevel:ji,accessLevel:ji}}}else if(Zt instanceof Rt.Polygon&&!(Zt instanceof Rt.Rectangle)){mn="Polygon";const Rr=Zt.getLatLngs()[0],hr=((_i=Zt.properties)==null?void 0:_i.category)||"forages",ji=((gi=Zt.properties)==null?void 0:gi.accessLevel)||"visitor";console.log("[savePlan] Polygon - Catégorie:",hr,"Niveau d'accès:",ji),It={points:Rr.map(Ls=>[Ls.lng,Ls.lat]),name:((Kr=Zt.properties)==null?void 0:Kr.name)||"",category:hr,accessLevel:ji,style:{...Kt,_accessLevel:ji,accessLevel:ji}}}else if(((Ir=Zt.properties)==null?void 0:Ir.type)==="Note"){console.log("[savePlan] Traitement d'une GeoNote");const Rr=Zt;if(Rr.toBackendFormat){Rr.properties.category||(Rr.properties.category="forages",console.log("[savePlan] Catégorie par défaut ajoutée:",Rr.properties.category)),Rr.properties.accessLevel||(Rr.properties.accessLevel="private",console.log("[savePlan] Niveau d'accès par défaut ajouté:",Rr.properties.accessLevel));const hr=Rr.toBackendFormat(Rr._dbId);mn=hr.type_forme,It=hr.data,Rr._dbId&&typeof Rr._dbId=="number"&&Pn.add(Rr._dbId),console.log("[savePlan] Données de la note préparées pour la sauvegarde:",{id:Rr._dbId,type:mn,category:It.category,accessLevel:It.accessLevel})}}if(mn&&It){let Rr=Zt._elementId;Zt._dbId&&(Rr=Zt._dbId,typeof Rr=="number"&&Pn.add(Rr)),We.push({id:Rr,type_forme:mn,data:It})}}),console.log("[savePlan] Éléments à sauvegarder",{totalElements:We.length,elements:We.map(Zt=>({type:Zt.type_forme,hasPoints:"points"in Zt.data,hasStyle:"style"in Zt.data}))});const tr=Array.from(Ot).filter(Zt=>!Pn.has(Zt));console.log("[savePlan] Éléments supprimés:",{existingIds:Array.from(Ot),currentLayerIds:Array.from(Pn),elementsToDelete:tr}),s.elements=We.filter(Zt=>!Zt.id||!tr.includes(Zt.id));const Zn=await s.saveToPlan(R.value.id,{elementsToDelete:tr});if(Zn&&((mt=R.value)!=null&&mt.id)){const Zt=R.value.id;R.value={...R.value,...Zn},i.updatePlanDetails(Zt,Zn)}I.value="success",setTimeout(()=>{I.value=null},3e3)}catch(We){console.error("Erreur lors de la sauvegarde du plan:",We),I.value=null}finally{z.value=!1}}mc(()=>{$.user||Ke(),i.clearCurrentPlan(),s.clearCurrentPlan(),N.value&&N.value.off("note:edit"),window.removeEventListener("geonote:edit",()=>{}),window.removeEventListener("categoriesReactivated",()=>{}),window.removeEventListener("shapeTypesReactivated",()=>{}),window.removeEventListener("shape:created",()=>{}),window.removeEventListener("map-set-location",()=>{})});function pe(mt){if(console.log("[MapView][updateShapeProperties] Mise à jour des propriétés:",mt),D(mt),mt.category&&g.value&&g.value._dbId){const We=g.value._dbId,Ot=s.elements.find(Pn=>Pn.id===We);if(Ot){console.log(`[MapView][updateShapeProperties] Mise à jour de la catégorie dans le store: ${mt.category} pour l'élément ${We}`);const Pn=Ot;Pn.data||(Pn.data={}),Pn.data.category=mt.category,s.$patch({unsavedChanges:!0})}}}function ve(mt){try{const We=new Date(mt);return isNaN(We.getTime())?(console.error("Date invalide reçue:",mt),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(We)}catch(We){return console.error("Erreur lors du formatage de la date:",We),"Date invalide"}}const ge=()=>{N.value&&O()},Ue=()=>{g.value&&N.value&&(_(""),N.value.removeLayer(g.value),g.value=null)};async function Qe(mt){console.log(`onPlanCreated - Tentative de chargement du plan ${mt}`),await i.fetchPlans();const We=i.getPlanById(mt);We?(console.log(`Plan ${mt} trouvé, chargement en cours...`),localStorage.setItem("lastPlanId",mt.toString()),R.value=We,i.setCurrentPlan(We),s.setCurrentPlan(We.id),ce.value=!1,Ut(),console.log(`Plan ${mt} chargé avec succès`)):console.error(`Plan ${mt} introuvable après création! Vérifiez les permissions.`)}So(ie,async mt=>{var We;if(mt&&((We=$.user)==null?void 0:We.user_type)==="admin"){Ie.value=!0;try{const Ot=await $.fetchSalarieVisiteurs(mt.id);W.value=Array.isArray(Ot)?Ot:[Ot]}catch(Ot){console.error("[MapView][watch selectedSalarie] Error:",Ot),W.value=[]}finally{Ie.value=!1}}});function Ke(){localStorage.removeItem("lastPlanId")}function Ge(mt,We="m"){return We==="m²"?`${(mt/1e4).toFixed(2)} ha`:We==="m"?mt>=1e3?`${(mt/1e3).toFixed(2)} km`:`${mt.toFixed(2)} m`:`${mt.toFixed(2)} ${We}`}const Xe=Ft(!1);function ot(mt){return{Circle:"Cercle",Rectangle:"Rectangle",Semicircle:"Demi-cercle",Line:"Ligne",Polygon:"Polygone",TextRectangle:"Annotation",ElevationLine:"Profil altimétrique"}[mt]||mt}async function kt(){var We,Ot,Pn,tr,Zn,Zt,mn,It,Kt,Ln;if(!R.value||!y.value||!N.value){console.error("[generateSynthesis] Plan, map ou featureGroup manquant");return}const mt=R.value;try{console.log("[generateSynthesis] Début de la génération"),console.log("[generateSynthesis] Plan courant complet:",mt),await K();let Hr=mt;if(!mt.salarie_details&&!mt.entreprise_details&&!mt.client_details){console.log("[generateSynthesis] Détails manquants, tentative de récupération...");try{const hr=await Un.get(`/plans/${mt.id}/`);hr.status===200&&(console.log("[generateSynthesis] Plan mis à jour:",hr.data),R.value={...mt,...hr.data},Hr=hr.data,i.updatePlanDetails(mt.id,hr.data))}catch(hr){console.error("[generateSynthesis] Erreur lors de la récupération des détails:",hr)}}await new Promise(hr=>setTimeout(hr,1e3)),Xe.value=!0;const ir=Hr.salarie_details,Or=Hr.client_details,jr=(ir==null?void 0:ir.entreprise_details)||Hr.entreprise_details;console.log("[generateSynthesis] Détails du plan utilisé:",Hr),console.log("[generateSynthesis] Détails des utilisateurs:",{salarie:ir?{id:ir.id,nom:`${ir.first_name} ${ir.last_name}`,company:ir.company_name,logo:ir.logo}:null,entreprise:jr?{id:jr.id,nom:`${jr.first_name} ${jr.last_name}`,company:jr.company_name,logo:jr.logo}:null,client:Or?{id:Or.id,nom:`${Or.first_name} ${Or.last_name}`,company:Or.company_name}:null}),g.value&&(F(),g.value=null);const rn=new Ar("l","mm","a4");console.log("[generateSynthesis] Chargement du logo de l'application");const Fi=new Image;Fi.src=c1,await new Promise(hr=>{Fi.onload=()=>{console.log("[generateSynthesis] Logo application chargé"),hr()},Fi.onerror=ji=>{console.error("[generateSynthesis] Erreur chargement logo application:",ji),hr()}}),console.log("[generateSynthesis] Tentative de chargement du logo entreprise:",jr==null?void 0:jr.logo);let _i=null;jr!=null&&jr.logo&&(_i=new Image,_i.src=jr.logo,await new Promise(hr=>{_i?(_i.onload=()=>{console.log("[generateSynthesis] Logo entreprise chargé avec succès"),hr()},_i.onerror=ji=>{console.error("[generateSynthesis] Erreur chargement logo entreprise:",ji),hr()}):hr()})),console.log("[generateSynthesis] Tentative de chargement du logo salarie:",ir==null?void 0:ir.logo);let gi=null;ir!=null&&ir.logo&&(gi=new Image,gi.src=ir.logo,await new Promise(hr=>{gi?(gi.onload=()=>{console.log("[generateSynthesis] Logo salarie chargé avec succès"),hr()},gi.onerror=ji=>{console.error("[generateSynthesis] Erreur chargement logo salarie:",ji),hr()}):hr()})),console.log("[generateSynthesis] Ajout des logos au PDF:",{logoApplication:!0,logoEntreprise:_i!==null,logoSalarie:gi!==null}),_i!==null&&rn.addImage(_i,"JPEG",148.5-40-30,20,40,40),rn.addImage(Fi,"JPEG",148.5-40/2,20,40,40),gi!==null&&rn.addImage(gi,"JPEG",148.5+30,20,40,40),rn.setFontSize(24),rn.setTextColor(0),rn.text(mt.nom||"Sans titre",297/2,100,{align:"center"});let Kr=120;if(jr&&(rn.setFontSize(14),rn.setFont("helvetica","bold"),rn.text("Entreprise:",20,Kr),rn.setFont("helvetica","normal"),rn.text(`${jr.first_name} ${jr.last_name}${jr.company_name?` (${jr.company_name})`:""}`,20,Kr+6),Kr+=15),ir&&(rn.setFontSize(14),rn.setFont("helvetica","bold"),rn.text("Salarie:",20,Kr),rn.setFont("helvetica","normal"),rn.text(`${ir.first_name} ${ir.last_name}${ir.company_name?` (${ir.company_name})`:""}`,20,Kr+6),Kr+=15),Or&&(rn.setFontSize(14),rn.setFont("helvetica","bold"),rn.text("Client:",20,Kr),rn.setFont("helvetica","normal"),rn.text(`${Or.first_name} ${Or.last_name}${Or.company_name?` (${Or.company_name})`:""}`,20,Kr+6),Kr+=15),mt.description){rn.setFont("helvetica","bold"),rn.text("Description:",20,Kr),rn.setFont("helvetica","normal");const hr=rn.splitTextToSize(mt.description,150);rn.text(hr,20,Kr+6),Kr+=8*hr.length+10}Kr=Math.min(Kr,180),rn.setFontSize(10),rn.setTextColor(100),rn.text(`Date de création: ${ve(mt.date_creation)}`,20,190),rn.text(`Dernière modification: ${ve(mt.date_modification)}`,277,190,{align:"right"});const Ir=[];N.value.eachLayer(hr=>Ir.push(hr));const Rr=Rt.simpleMapScreenshoter({hideElementsWithSelectors:[".leaflet-control-container",".leaflet-pm-toolbar",".leaflet-grid-layer",".leaflet-grid-label"],preventDownload:!0}).addTo(y.value);await new Promise(hr=>setTimeout(hr,3e3));for(let hr=0;hr<Ir.length;hr++){rn.addPage(),rn.setFillColor(248,250,252),rn.setDrawColor(226,232,240),rn.rect(0,0,297,25,"F"),rn.setFontSize(10),rn.setTextColor(50,50,50),rn.setFont("helvetica","bold"),rn.text(mt.nom||"Sans titre",20,12);let Ss=297-20-(15*(1+(_i!==null?1:0)+(gi!==null?1:0))+5*(1+(_i!==null?1:0)));_i!==null&&(rn.addImage(_i,"JPEG",Ss,5,15,15),Ss+=20),rn.addImage(Fi,"JPEG",Ss,5,15,15),Ss+=20,gi!==null&&rn.addImage(gi,"JPEG",Ss,5,15,15),rn.setDrawColor(200,200,200),rn.setLineWidth(.5),rn.line(0,25,297,25);const oi=Ir[hr],Fn=oi.properties;if(Fn){rn.setTextColor(0),rn.setFontSize(14),rn.setFont("helvetica","bold");const Eo=Fn.name||ot(Fn.type);let ui="";if(Fn.type!=="TextRectangle"){const qn=Y(Ir,oi);ui=qn>0?` (surface totale d'irrigation : ${Ge(qn,"m²")})`:""}const fr=`${Eo}${ui}`;rn.text(fr,20,35)}if(Fn&&Fn.type==="ElevationLine")try{const Eo=((We=oi.getBounds)==null?void 0:We.call(oi))||((Ot=oi.getLatLng)==null?void 0:Ot.call(oi));Eo&&y.value.fitBounds(Eo instanceof Rt.LatLng?Rt.latLngBounds([Eo]):Eo,{padding:[50,50]});try{const _n=((Pn=oi.getBounds)==null?void 0:Pn.call(oi))||((tr=oi.getLatLng)==null?void 0:tr.call(oi));if(!_n||!y.value)console.warn("[generateSynthesis] Bounds ou carte invalide");else{const tn=_n instanceof Rt.LatLng?Rt.latLngBounds([_n]):_n;tn&&tn.isValid&&tn.isValid()&&y.value.getContainer()&&document.body.contains(y.value.getContainer())&&y.value.fitBounds(tn,{padding:[50,50],animate:!1})}}catch(_n){console.warn("[generateSynthesis] Erreur lors de l'ajustement de la vue:",_n)}await new Promise(_n=>setTimeout(_n,2e3)),y.value.invalidateSize();try{y.value&&y.value.getContainer()&&document.body.contains(y.value.getContainer())?y.value.invalidateSize({animate:!1}):console.warn("[generateSynthesis] Carte non valide pour l'invalidation de taille")}catch(_n){console.warn("[generateSynthesis] Erreur lors de l'invalidation de la taille de la carte:",_n)}await new Promise(_n=>{const tn=()=>{var Pi;const si=(Pi=y.value)==null?void 0:Pi.getContainer();if(!si){_n();return}const co=si.querySelectorAll(".leaflet-tile-loaded");si.querySelectorAll(".leaflet-tile-loading").length===0&&co.length>0?_n():setTimeout(tn,100)};tn()});const ui=await Rr.takeScreen("image"),fr=await new Promise((_n,tn)=>{const si=new Image;si.onload=()=>_n(si),si.onerror=co=>tn(co),si.src=ui}),qn=40,_o=237/2,bo=Math.min(70,fr.height*_o/fr.width);if(rn.addImage(fr,"PNG",20,qn,_o,bo),Fn.elevationData&&Fn.elevationData.length>0){const _n=document.createElement("canvas");_n.width=800,_n.height=400;const tn=_n.getContext("2d");if(tn){const si=Fn.elevationData,co=Fn.minElevation,wo=Fn.maxElevation,cs=(wo-co)*.05,Xo=co-cs,Io=wo+cs,hi=40,Bs=_n.width-2*hi,Ro=_n.height-2*hi,Xi=Jr=>hi+Jr/si[si.length-1].distance*Bs,xo=Jr=>hi+Ro-(Jr-Xo)/(Io-Xo)*Ro;tn.fillStyle="#f8fafc",tn.fillRect(0,0,_n.width,_n.height),tn.fillStyle="#334155",tn.font="bold 20px Arial",tn.textAlign="center",tn.fillText("Profil altimétrique",_n.width/2,25),tn.strokeStyle="#e2e8f0",tn.lineWidth=1,tn.beginPath(),tn.moveTo(hi,hi),tn.lineTo(hi,Ro+hi),tn.lineTo(Bs+hi,Ro+hi),tn.strokeStyle="#94a3b8",tn.stroke();const Vs=5;for(let Jr=0;Jr<=Vs;Jr++){const Tr=Xo+Jr/Vs*(Io-Xo),Fo=xo(Tr);tn.beginPath(),tn.strokeStyle="#e2e8f0",tn.moveTo(hi,Fo),tn.lineTo(Bs+hi,Fo),tn.stroke(),tn.beginPath(),tn.strokeStyle="#94a3b8",tn.moveTo(hi-5,Fo),tn.lineTo(hi,Fo),tn.stroke(),tn.fillStyle="#64748b",tn.font="12px Arial",tn.textAlign="right",tn.fillText(`${Math.round(Tr)}m`,hi-8,Fo+4)}const ya=5,Qi=si[si.length-1].distance;for(let Jr=0;Jr<=ya;Jr++){const Tr=Jr/ya*Qi,Fo=Xi(Tr);tn.beginPath(),tn.strokeStyle="#e2e8f0",tn.moveTo(Fo,hi),tn.lineTo(Fo,Ro+hi),tn.stroke(),tn.beginPath(),tn.strokeStyle="#94a3b8",tn.moveTo(Fo,Ro+hi),tn.lineTo(Fo,Ro+hi+5),tn.stroke(),tn.fillStyle="#64748b",tn.font="12px Arial",tn.textAlign="center",tn.fillText(`${Math.round(Tr)}m`,Fo,Ro+hi+16)}const ol=tn.createLinearGradient(0,hi,0,Ro+hi);ol.addColorStop(0,"rgba(255, 69, 0, 0.8)"),ol.addColorStop(1,"rgba(255, 69, 0, 0.2)"),tn.beginPath(),tn.moveTo(Xi(si[0].distance),xo(si[0].elevation)),si.forEach((Jr,Tr)=>{Tr>0&&tn.lineTo(Xi(Jr.distance),xo(Jr.elevation))}),tn.strokeStyle="#FF4500",tn.lineWidth=2,tn.stroke(),tn.lineTo(Xi(si[si.length-1].distance),xo(Xo)),tn.lineTo(Xi(si[0].distance),xo(Xo)),tn.closePath(),tn.fillStyle=ol,tn.fill(),si.forEach(Jr=>{tn.beginPath(),tn.arc(Xi(Jr.distance),xo(Jr.elevation),3,0,Math.PI*2),tn.fillStyle="#FF4500",tn.fill(),tn.strokeStyle="white",tn.lineWidth=1,tn.stroke()});let _a=0,pr=0;for(let Jr=0;Jr<si.length;Jr++)si[Jr].elevation===co&&(_a=Jr),si[Jr].elevation===wo&&(pr=Jr);tn.beginPath(),tn.arc(Xi(si[pr].distance),xo(si[pr].elevation),6,0,Math.PI*2),tn.fillStyle="#059669",tn.fill(),tn.strokeStyle="white",tn.lineWidth=2,tn.stroke(),tn.beginPath(),tn.arc(Xi(si[_a].distance),xo(si[_a].elevation),6,0,Math.PI*2),tn.fillStyle="#DC2626",tn.fill(),tn.strokeStyle="white",tn.lineWidth=2,tn.stroke(),tn.font="12px Arial",tn.fillStyle="#059669",tn.textAlign="left",tn.fillText(`Point haut: ${Ge(wo,"m")}`,hi,Ro+hi+35),tn.fillStyle="#DC2626",tn.fillText(`Point bas: ${Ge(co,"m")}`,hi+200,Ro+hi+35);const br=_n.toDataURL("image/png");rn.addImage(br,"PNG",20+_o+20,qn,_o,bo)}}const Lr=qn+bo+15;rn.setFillColor(248,250,252),rn.setDrawColor(226,232,240),rn.roundedRect(20,Lr,257,50,3,3,"FD"),rn.setFont("helvetica","bold"),rn.setFontSize(12),rn.setTextColor(51,65,85),rn.text("Caractéristiques",30,Lr+10);const Us=[{label:"Distance totale",value:Ge(Fn.length||0)},{label:"Dénivelé positif",value:Ge(Fn.elevationGain||0,"m")},{label:"Dénivelé négatif",value:Ge(Fn.elevationLoss||0,"m")}],Hn=[{label:"Pente moyenne",value:`${(Fn.averageSlope||0).toFixed(1)}%`},{label:"Pente maximale",value:`${(Fn.maxSlope||0).toFixed(1)}%`},{label:"Altitude min/max",value:`${Ge(Fn.minElevation||0,"m")} / ${Ge(Fn.maxElevation||0,"m")}`}];let _r=Lr+20;rn.setFont("helvetica","normal"),rn.setFontSize(10),Us.forEach(_n=>{rn.setTextColor(100,116,139),rn.text(_n.label,30,_r),rn.setTextColor(15,23,42),rn.setFont("helvetica","bold"),rn.text(_n.value,110,_r),rn.setFont("helvetica","normal"),_r+=9}),_r=Lr+20;const Yr=297/2;Hn.forEach(_n=>{rn.setTextColor(100,116,139),rn.text(_n.label,Yr,_r),rn.setTextColor(15,23,42),rn.setFont("helvetica","bold"),rn.text(_n.value,Yr+80,_r),rn.setFont("helvetica","normal"),_r+=9})}catch(Eo){console.error("[generateSynthesis] Erreur traitement profil altimétrique:",Eo)}else{const Eo=((Zn=oi.getBounds)==null?void 0:Zn.call(oi))||((Zt=oi.getLatLng)==null?void 0:Zt.call(oi));Eo&&y.value.fitBounds(Eo instanceof Rt.LatLng?Rt.latLngBounds([Eo]):Eo,{padding:[50,50]});try{const ui=((mn=oi.getBounds)==null?void 0:mn.call(oi))||((It=oi.getLatLng)==null?void 0:It.call(oi));if(!ui||!y.value)console.warn("[generateSynthesis] Bounds ou carte invalide");else{const fr=ui instanceof Rt.LatLng?Rt.latLngBounds([ui]):ui;fr&&fr.isValid&&fr.isValid()&&y.value.getContainer()&&document.body.contains(y.value.getContainer())&&y.value.fitBounds(fr,{padding:[50,50],animate:!1})}}catch(ui){console.warn("[generateSynthesis] Erreur lors de l'ajustement de la vue:",ui)}await new Promise(ui=>setTimeout(ui,2e3)),y.value.invalidateSize(),await new Promise(ui=>{const fr=()=>{var Lr;const qn=(Lr=y.value)==null?void 0:Lr.getContainer();if(!qn){ui();return}const _o=qn.querySelectorAll(".leaflet-tile-loaded");qn.querySelectorAll(".leaflet-tile-loading").length===0&&_o.length>0?ui():setTimeout(fr,100)};fr()});try{const ui=await Rr.takeScreen("image"),fr=await new Promise((Lr,Us)=>{const Hn=new Image;Hn.onload=()=>Lr(Hn),Hn.onerror=_r=>Us(_r),Hn.src=ui}),qn=45,_o=297*.6-30;let bo=fr.height*_o/fr.width;if(bo>210*.9&&(bo=210*.9),rn.addImage(fr,"PNG",20,qn,_o,bo),Fn){let Lr=function(tn,si,co,wo,Pi){rn.setTextColor(100,116,139),rn.setFont("helvetica","normal"),rn.text(tn,co+10,wo),rn.setTextColor(15,23,42),rn.setFont("helvetica","bold"),rn.text(si,co+Pi-10,wo,{align:"right"})},Hn=0;if(Fn.type==="Circle")Hn=4;else if(Fn.type==="Rectangle")Hn=4;else if(Fn.type==="Line")Hn=1,(Kt=Fn.dimensions)!=null&&Kt.width&&Hn++,Fn.surfaceInfluence&&Hn++;else if(Fn.type==="Semicircle")Hn=6;else if(Fn.type==="Polygon")Hn=2;else if(Fn.type==="CircleWithSections"&&(Hn=3,Fn.sections&&Fn.sections.length>0)){const tn=Math.ceil(Fn.sections.length/3);Hn+=tn*3}const _r=Math.max(15+Hn*12+30,60),Yr=297-188.2-20;rn.setFillColor(248,250,252),rn.setDrawColor(226,232,240),rn.roundedRect(188.2,qn,Yr,_r,3,3,"FD"),rn.setFont("helvetica","bold"),rn.setFontSize(12),rn.setTextColor(51,65,85),rn.text("Caractéristiques",188.2+10,qn+15);let _n=qn+30;rn.setFontSize(10),Fn.type==="Circle"?(Lr("Rayon",Ge(Fn.radius),188.2,_n,Yr),_n+=12,Lr("Diamètre",Ge(Fn.radius*2),188.2,_n,Yr),_n+=12,Lr("Surface",Ge(Fn.surface,"m²"),188.2,_n,Yr),_n+=12,Lr("Périmètre",Ge(Fn.perimeter),188.2,_n,Yr)):Fn.type==="Rectangle"?(Lr("Largeur",Ge(Fn.width),188.2,_n,Yr),_n+=12,Lr("Hauteur",Ge(Fn.height),188.2,_n,Yr),_n+=12,Lr("Surface",Ge(Fn.surface,"m²"),188.2,_n,Yr),_n+=12,Lr("Périmètre",Ge(Fn.perimeter),188.2,_n,Yr)):Fn.type==="Line"?(Lr("Longueur",Ge(Fn.length),188.2,_n,Yr),_n+=12,(Ln=Fn.dimensions)!=null&&Ln.width&&(Lr("Largeur d'influence",Ge(Fn.dimensions.width),188.2,_n,Yr),_n+=12),Fn.surfaceInfluence&&Lr("Surface d'influence",Ge(Fn.surfaceInfluence,"m²"),188.2,_n,Yr)):Fn.type==="Semicircle"?(Lr("Rayon",Ge(Fn.radius),188.2,_n,Yr),_n+=12,Lr("Diamètre",Ge(Fn.radius*2),188.2,_n,Yr),_n+=12,Lr("Surface",Ge(Fn.surface,"m²"),188.2,_n,Yr),_n+=12,Lr("Périmètre",Ge(Fn.perimeter),188.2,_n,Yr),_n+=12,Lr("Longueur d'arc",Ge(Fn.arcLength),188.2,_n,Yr),_n+=12,Lr("Angle d'ouverture",`${Fn.openingAngle.toFixed(1)}°`,188.2,_n,Yr)):Fn.type==="Polygon"?(Lr("Surface",Ge(Fn.surface,"m²"),188.2,_n,Yr),_n+=12,Lr("Périmètre",Ge(Fn.perimeter),188.2,_n,Yr)):Fn.type==="CircleWithSections"&&(Lr("Rayon",Ge(Fn.radius),188.2,_n,Yr),_n+=12,Lr("Surface totale",Ge(Fn.surface,"m²"),188.2,_n,Yr),_n+=12,Lr("Périmètre",Ge(Fn.perimeter),188.2,_n,Yr),_n+=20,Fn.sections&&Fn.sections.length>0&&(_n=yr(Fn.sections,rn,188.2,_n,Yr)))}}catch(ui){console.error(`[generateSynthesis] Erreur capture forme ${hr+1}:`,ui)}}}y.value.removeControl(Rr),rn.save(`synthese_${mt.nom}.pdf`)}catch(mr){console.error("[generateSynthesis] Erreur:",mr),alert("Une erreur est survenue lors de la génération de la synthèse. Veuillez réessayer.")}finally{Xe.value=!1}}const Ct=px.debounce(()=>{const mt=dn.startMeasure("invalidateMapSize","MapView");if(!y.value){mt();return}Xs(()=>{dn.measure("invalidateMapSize:nextTick",()=>{var We;try{if(y.value&&y.value.getContainer()&&document.body.contains(y.value.getContainer())){if(y.value.invalidateSize({animate:!1}),(We=N.value)!=null&&We.getLayers().length)try{O()}catch(Ot){console.warn("[invalidateMapSize] Erreur lors de l'ajustement de la vue:",Ot)}}else console.warn("[invalidateMapSize] Carte non valide pour l'invalidation")}catch(Ot){console.warn("[invalidateMapSize] Erreur lors de l'invalidation de la taille de la carte:",Ot)}mt()},"MapView")})},250);function Ut(){Ct()}So(R,(mt,We)=>{mt&&mt.id!==(We==null?void 0:We.id)&&Xs(()=>{Ut()})});const Gt=Ft(null),fn=Ft(!1),pn=Ft([]),et=gr(()=>{if(console.log("[MapView][filteredSalaries] Computing with:",{selectedEntreprise:Gt.value,salaries:U.value,salariesLength:U.value.length}),!Gt.value)return[];const mt=U.value.filter(We=>{var tr,Zn,Zt;const Ot=We.entreprise,Pn=typeof Ot=="object"&&Ot!==null?Ot.id:Ot;return console.log("[MapView][filteredSalaries] Checking salarie:",{salarie:We,salarieEntreprise:Ot,salarieEntrepriseId:Pn,selectedEntrepriseId:(tr=Gt.value)==null?void 0:tr.id,matches:Pn===((Zn=Gt.value)==null?void 0:Zn.id)}),Pn===((Zt=Gt.value)==null?void 0:Zt.id)});return console.log("[MapView][filteredSalaries] Filtered result:",mt),mt});function it(mt){if(!mt)return"";const We=mt.first_name||"",Ot=mt.last_name?mt.last_name.toUpperCase():"",Pn=mt.company_name||mt.role||"";return`${We} ${Ot} (${Pn})`}async function nt(){fn.value=!0;try{const mt=await Un.get("/users/",{params:{role:"ENTREPRISE"}});pn.value=mt.data}catch(mt){console.error("[MapView] Error loading entreprises:",mt),pn.value=[]}finally{fn.value=!1}}async function Vt(mt){console.log("[MapView][selectEntreprise] Sélection de l'entreprise:",mt),Gt.value=mt,Pe.value=!0;try{console.log("[MapView][selectEntreprise] Envoi de la requête avec params:",{role:"SALARIE",entreprise:mt.id});const We=await Un.get("/users/",{params:{role:"SALARIE",entreprise:mt.id}});console.log("[MapView][selectEntreprise] Réponse reçue:",We.data),U.value=We.data,console.log("[MapView][selectEntreprise] Salaries mis à jour:",U.value)}catch(We){console.error("[MapView] Error loading salaries for entreprise:",We),U.value=[]}finally{Pe.value=!1}}function Qt(){Gt.value=null,ie.value=null,we.value=null,U.value=[],W.value=[],q.value=[]}function On(){ie.value=null,we.value=null,W.value=[],q.value=[]}function wn(){we.value=null,q.value=[]}async function Tn(mt){var We,Ot,Pn,tr,Zn,Zt;console.log(`
[MapView][selectSalarie] ====== DÉBUT SÉLECTION SALARIE ======`),console.log("Informations du salarie:",{id:mt.id,username:mt.username,company:mt.company_name,role:mt.role}),console.log("Contexte utilisateur:",{userType:(We=$.user)==null?void 0:We.user_type,userId:(Ot=$.user)==null?void 0:Ot.id,userRole:(Pn=$.user)==null?void 0:Pn.role,selectedEntrepriseId:(tr=Gt.value)==null?void 0:tr.id}),ie.value=mt,Ie.value=!0;try{const mn={role:"VISITEUR",salarie:mt.id};$.isEntreprise?(console.log("Ajout de l'ID de l'entreprise connectée:",(Zn=$.user)==null?void 0:Zn.id),mn.entreprise=(Zt=$.user)==null?void 0:Zt.id):Gt.value&&(console.log("Ajout de l'ID de l'entreprise sélectionnée:",Gt.value.id),mn.entreprise=Gt.value.id),console.log("Paramètres de la requête:",mn);const It=await Un.get("/users/",{params:mn});console.log("Réponse reçue du serveur:",{status:It.status,dataLength:Array.isArray(It.data)?It.data.length:"non-array",data:It.data}),Array.isArray(It.data)?(W.value=It.data,console.log(`${It.data.length} visiteurs chargés`),It.data.forEach((Kt,Ln)=>{console.log(`Visiteur ${Ln+1}:`,{id:Kt.id,username:Kt.username,company:Kt.company_name,salarie:Kt.salarie})})):(console.warn("Format de réponse inattendu:",It.data),W.value=[]),W.value.length===0&&console.warn("Aucun visiteur trouvé pour ce salarie")}catch(mn){if(console.error("ERREUR lors du chargement des visiteurs:",mn),mn&&typeof mn=="object"&&"response"in mn){const It=mn;console.error("Détails de l'erreur:",{status:It.response.status,data:It.response.data})}W.value=[]}finally{Ie.value=!1,console.log(`[MapView][selectSalarie] ====== FIN SÉLECTION SALARIE ======
`)}}function ar(){G.value=!1,Z.value=null}function xn(mt){console.log("[MapView][handleFilterChange] Nouveaux filtres reçus:",JSON.stringify(mt,null,2)),console.log("[MapView][handleFilterChange] Filtres actuels dans le store:",JSON.stringify({accessLevels:{...s.filters.accessLevels},categories:{...s.filters.categories},shapeTypes:{...s.filters.shapeTypes}},null,2)),console.log("[MapView][handleFilterChange] Mise à jour des filtres dans le store"),s.updateFilters(mt),console.log("[MapView][handleFilterChange] Éléments dans le store:",{count:s.elements.length,ids:s.elements.map(We=>We.id)}),console.log("[MapView][handleFilterChange] Mise à jour de l'affichage de la carte"),Mn(),setTimeout(()=>{console.log("[MapView][handleFilterChange] Mise à jour forcée de l'affichage"),Mn()},100),console.log("[MapView][handleFilterChange] Traitement des filtres terminé")}function Mn(){if(!N.value)return;const mt={accessLevels:{...s.filters.accessLevels},categories:{...s.filters.categories},shapeTypes:{...s.filters.shapeTypes}};console.log("[MapView][updateMapDisplay] Mise à jour de l'affichage avec filtres:",JSON.stringify(mt,null,2));const We={count:s.elements.length,elements:s.elements.map(at=>({id:at.id,type_forme:at.type_forme}))};console.log("[MapView][updateMapDisplay] Éléments dans le store:",JSON.stringify(We,null,2));const Ot=s.getFilteredElements;console.log("[MapView][updateMapDisplay] Éléments filtrés:",{total:s.elements.length,filtered:Ot.length,filteredIds:Ot.map(at=>at.id)});const Pn=N.value.getLayers();console.log("[MapView][updateMapDisplay] Couches actuelles:",Pn.length);const tr=Pn.map(at=>({_leaflet_id:at._leaflet_id,_dbId:at._dbId,hasProperties:!!at.properties,propertyType:at.properties?at.properties.type:null,category:at.properties?at.properties.category:null}));console.log("[MapView][updateMapDisplay] Détails des couches:",JSON.stringify(tr,null,2)),console.log("[MapView][updateMapDisplay] État des filtres pour les catégories:",{forages:s.filters.categories.forages,clients:s.filters.categories.clients,entrepots:s.filters.categories.entrepots,livraisons:s.filters.categories.livraisons,cultures:s.filters.categories.cultures,parcelles:s.filters.categories.parcelles});const Zn=new Map;f.value.forEach(at=>{at.layer&&at.id&&Zn.set(at.id,at.layer)});const Zt=new Map;Pn.forEach(at=>{at._dbId&&Zt.set(at,at._dbId)});const mn=new Set(Ot.map(at=>at.id));console.log("[MapView][updateMapDisplay] Début du traitement des couches");const It=Array.from(mn);console.log("[MapView][updateMapDisplay] IDs des éléments filtrés:",JSON.stringify(It));let Kt=0,Ln=0,mr=0;Pn.forEach(at=>{var _i,gi;const Cn=at._dbId,xr=at._leaflet_id;if(!Cn){if(!at.properties){mr++,console.log(`[MapView][updateMapDisplay] Couche ${xr} sans dbId et sans propriétés, ignorée`);return}at._dbId=Date.now()+Math.floor(Math.random()*1e3),console.log(`[MapView][updateMapDisplay] Couche ${xr} sans dbId, ID temporaire assigné: ${at._dbId}`)}const Ni=at.properties||{},Fr=Ni.type||at.type_forme||"";let Er=Ni.category;if(at._dbId){const Kr=s.elements.find(Ir=>Ir.id===at._dbId);if(Kr){const Ir=Kr.data;Ir&&Ir.category&&(Er!==Ir.category&&(console.log(`[MapView][updateMapDisplay] Catégorie différente détectée - Propriétés: ${Er}, Store: ${Ir.category} pour la couche ${at._dbId}`),Er=Ir.category),at.properties||(at.properties={}),at.properties.category=Er)}}Er||(Er="default");const lr=Ni.accessLevel||"visitor";console.log(`[MapView][updateMapDisplay] Couche ${xr} (dbId: ${at._dbId}): type=${Fr}, category=${Er}, accessLevel=${lr}`),console.log("[MapView][updateMapDisplay] Filtres actuels:",JSON.stringify(s.filters));let Hr=!1;Fr?Hr=Fr in s.filters.shapeTypes&&s.filters.shapeTypes[Fr]===!0:Hr=s.filters.shapeTypes.Polygon===!0;let ir=!1;Er?Er in s.filters.categories?(ir=s.filters.categories[Er]===!0,console.log(`[MapView][updateMapDisplay] Vérification de la catégorie ${Er}: ${ir}`)):(ir=s.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catégorie ${Er} non trouvée dans les filtres, utilisation de 'forages': ${ir}`)):(ir=s.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catégorie non spécifiée, utilisation de 'forages': ${ir}`));let Or=!1;const jr={company:s.filters.accessLevels.company===!0,employee:s.filters.accessLevels.employee===!0,visitor:s.filters.accessLevels.visitor===!0};let rn="visitor";jr.company?rn="company":jr.employee?rn="employee":jr.visitor&&(rn="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès sélectionné par l'utilisateur: ${rn}`),rn==="company"?Or=!0:rn==="employee"?Or=lr==="employee"||lr==="visitor":rn==="visitor"&&(Or=lr==="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès de la couche: ${lr}, visible: ${Or}`);const Fi=Hr&&ir&&Or;console.log(`[MapView][updateMapDisplay] Visibilité de la couche ${xr}: typeVisible=${Hr}, categoryVisible=${ir}, accessLevelVisible=${Or}, isVisible=${Fi}`),console.log(`[MapView][updateMapDisplay] Détails de la couche ${xr}: type=${Fr}, category=${Er}, accessLevel=${lr}`),console.log("[MapView][updateMapDisplay] Filtres actuels:",JSON.stringify({accessLevels:s.filters.accessLevels,categories:s.filters.categories,shapeTypes:s.filters.shapeTypes},null,2)),Fi?N.value.hasLayer(at)?(Kt++,console.log(`[MapView][updateMapDisplay] Couche ${at._dbId} (${Fr}) déjà visible avec catégorie ${((gi=at.properties)==null?void 0:gi.category)||"non définie"}`)):(Er&&Er!=="default"&&(!at.properties||!at.properties.category)&&(at.properties||(at.properties={}),at.properties.category=Er,console.log(`[MapView][updateMapDisplay] Catégorie définie avant ajout: ${Er} pour la couche ${at._dbId}`)),N.value.addLayer(at),Kt++,console.log(`[MapView][updateMapDisplay] Affichage de la couche ${at._dbId} (${Fr}) avec catégorie ${((_i=at.properties)==null?void 0:_i.category)||"non définie"}`)):N.value.hasLayer(at)?(N.value.removeLayer(at),Ln++,console.log(`[MapView][updateMapDisplay] Masquage de la couche ${at._dbId} (${Fr}) - Filtres non respectés`)):(Ln++,console.log(`[MapView][updateMapDisplay] Couche ${at._dbId} (${Fr}) déjà masquée`))}),console.log("[MapView][updateMapDisplay] Début de la restauration des couches filtrées"),console.log("[MapView][updateMapDisplay] Nombre de formes dans shapes.value:",f.value.length),f.value.forEach(at=>{var gi;if(!at.layer){console.log("[MapView][updateMapDisplay] Forme sans couche, ignorée");return}const Cn=at.layer,xr=Cn._leaflet_id,Ni=Cn._dbId;if(console.log(`[MapView][updateMapDisplay] Traitement de la forme ${xr} (dbId: ${Ni})`),N.value.hasLayer(Cn)){console.log(`[MapView][updateMapDisplay] La couche ${xr} est déjà dans le featureGroup, ignorée`);return}const Fr=Cn.properties||{},Er=Fr.type||Cn.type_forme||"";let lr=null;if(Cn._dbId){const Kr=s.elements.find(Ir=>Ir.id===Cn._dbId);if(Kr){const Ir=Kr.data;Ir&&Ir.category&&(lr=Ir.category,console.log(`[MapView][updateMapDisplay] Catégorie récupérée depuis le store: ${lr} pour la couche ${Cn._dbId}`))}}!lr&&Fr.category&&(lr=Fr.category,console.log(`[MapView][updateMapDisplay] Catégorie récupérée depuis les propriétés: ${lr} pour la couche ${xr}`)),lr||(lr="default");const Hr=Fr.accessLevel||"visitor";if(Cn.properties||(Cn.properties={}),lr&&lr!=="default"&&(Cn.properties.category=lr,console.log(`[MapView][updateMapDisplay] Catégorie définie/restaurée: ${lr} pour la couche ${Cn._dbId}`),Cn._dbId)){const Kr=s.elements.find(Ir=>Ir.id===Cn._dbId);if(Kr){const Ir=Kr;Ir.data||(Ir.data={}),Ir.data.category!==lr&&(console.log(`[MapView][updateMapDisplay] Mise à jour de la catégorie dans le store: ${lr} pour l'élément ${Cn._dbId}`),Ir.data.category=lr,s.$patch({unsavedChanges:!0}))}}Cn.properties.accessLevel||(Cn.properties.accessLevel="visitor"),console.log(`[MapView][updateMapDisplay] Propriétés de la couche ${xr}: type=${Er}, category=${lr}, accessLevel=${Hr}`);let ir=!1;Er?ir=Er in s.filters.shapeTypes&&s.filters.shapeTypes[Er]===!0:ir=s.filters.shapeTypes.Polygon===!0;let Or=!1;lr?lr in s.filters.categories?(Or=s.filters.categories[lr]===!0,console.log(`[MapView][updateMapDisplay] Vérification de la catégorie ${lr}: ${Or}`)):(Or=s.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catégorie ${lr} non trouvée, utilisation de 'forages': ${Or}`)):(Or=s.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Pas de catégorie, utilisation de 'forages': ${Or}`));let jr=!1;const rn={company:s.filters.accessLevels.company===!0,employee:s.filters.accessLevels.employee===!0,visitor:s.filters.accessLevels.visitor===!0};let Fi="visitor";rn.company?Fi="company":rn.employee?Fi="employee":rn.visitor&&(Fi="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès sélectionné par l'utilisateur (2ème étape): ${Fi}`),Fi==="company"?jr=!0:Fi==="employee"?jr=Hr==="employee"||Hr==="visitor":Fi==="visitor"&&(jr=Hr==="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès de la couche (2ème étape): ${Hr}, visible: ${jr}`);const _i=ir&&Or&&jr;if(console.log(`[MapView][updateMapDisplay] Visibilité de la couche ${xr}: typeVisible=${ir}, categoryVisible=${Or}, accessLevelVisible=${jr}, isVisible=${_i}`),_i){if(lr&&lr!=="default"&&(Cn.properties||(Cn.properties={}),Cn.properties.category=lr,console.log(`[MapView][updateMapDisplay] Catégorie définie avant restauration: ${lr} pour la couche ${xr}`),Cn._dbId)){const Kr=s.elements.find(Ir=>Ir.id===Cn._dbId);if(Kr){const Ir=Kr;Ir.data||(Ir.data={}),Ir.data.category!==lr&&(console.log(`[MapView][updateMapDisplay] Mise à jour de la catégorie dans le store avant restauration: ${lr} pour l'élément ${Cn._dbId}`),Ir.data.category=lr,s.$patch({unsavedChanges:!0}))}}N.value.addLayer(Cn),Kt++,console.log(`[MapView][updateMapDisplay] Restauration de la couche ${xr} (${Er}) avec catégorie ${((gi=Cn.properties)==null?void 0:gi.category)||"non définie"} - Filtres respectés`)}else console.log(`[MapView][updateMapDisplay] La couche ${xr} (${Er}) reste masquée - Filtres non respectés`)}),console.log(`[MapView][updateMapDisplay] Restauration terminée: ${Kt} couches visibles au total`),console.log(`[MapView][updateMapDisplay] Statistiques: ${Kt} couches visibles, ${Ln} couches masquées, ${mr} couches sans dbId`),console.log("[MapView][updateMapDisplay] Mise à jour terminée")}function En(mt){if(N.value){const Ot=N.value.getLayers().find(Pn=>Pn._leaflet_id===mt.id);Ot&&(Ot.properties.name=mt.title,Ot.properties.description=mt.description,Ot.properties.columnId=mt.columnId,Ot.properties.accessLevel=mt.accessLevel,Ot.properties.category||(Ot.properties.category="forages"),Ot.setNoteStyle({color:mt.style.color,fillColor:mt.style.fillColor,weight:mt.style.weight,fillOpacity:mt.style.fillOpacity,radius:mt.style.radius}),Ot.closePopup(),Ot.unbindPopup(),Ot.bindPopup(Ot.createPopupContent()),console.log("[handleNoteSave] Note mise à jour:",{name:Ot.properties.name,category:Ot.properties.category,accessLevel:Ot.properties.accessLevel}))}u.success("Note enregistrée avec succès")}async function cr(mt){var We;we.value=mt,A.value=!0;try{const Ot={visiteur:mt.id};$.isEntreprise?Ot.entreprise=(We=$.user)==null?void 0:We.id:Gt.value&&(Ot.entreprise=Gt.value.id),ie.value&&(Ot.salarie=ie.value.id);const Pn=await Un.get("/plans/",{params:Ot});q.value=Pn.data}catch(Ot){console.error("[MapView] Error loading client plans:",Ot),q.value=[]}finally{A.value=!1}}function yr(mt,We,Ot,Pn,tr){if(!mt||mt.length===0)return Pn;const Zn=[...mt].sort((Cn,xr)=>(xr.surface||0)-(Cn.surface||0)),Zt=tr,mn=7,It=6,Kt=2,Ln=[{header:"Nom",width:.3,align:"left"},{header:"Surface",width:.2,align:"right"},{header:"Angles",width:.25,align:"right"},{header:"Rayon",width:.15,align:"right"},{header:"Type",width:.1,align:"center"}],mr=mn+It*Zn.length;We.setFillColor(248,250,252),We.setDrawColor(226,232,240),We.roundedRect(Ot,Pn,Zt,mr+Kt*2,2,2,"FD"),We.setFillColor(241,245,249),We.rect(Ot+Kt,Pn+Kt,Zt-Kt*2,mn,"F"),We.setFont("helvetica","bold"),We.setFontSize(7),We.setTextColor(51,65,85);let at=Ot+Kt;return Ln.forEach(Cn=>{const xr=Cn.width*(Zt-Kt*2);Cn.align==="right"?We.text(Cn.header,at+xr-Kt,Pn+Kt+5,{align:"right"}):Cn.align==="center"?We.text(Cn.header,at+xr/2,Pn+Kt+5,{align:"center"}):We.text(Cn.header,at+Kt/2,Pn+Kt+5),at+=xr}),We.setFont("helvetica","normal"),We.setFontSize(6.5),We.setTextColor(71,85,105),Zn.forEach((Cn,xr)=>{const Ni=Pn+mn+Kt+xr*It;xr%2===0&&(We.setFillColor(250,252,254),We.rect(Ot+Kt,Ni,Zt-Kt*2,It,"F"));let Fr=Ot+Kt;const Er=Cn.name||`Section ${xr+1}`;We.text(Er,Fr+Kt/2,Ni+4),Fr+=Ln[0].width*(Zt-Kt*2);const lr=Ge(Cn.surface||0,"m²");We.text(lr,Fr+Ln[1].width*(Zt-Kt*2)-Kt,Ni+4,{align:"right"}),Fr+=Ln[1].width*(Zt-Kt*2);const Hr=Cn.startAngle===0&&Cn.endAngle===360?"Complet":`${Cn.startAngle}°-${Cn.endAngle}°`;We.text(Hr,Fr+Ln[2].width*(Zt-Kt*2)-Kt,Ni+4,{align:"right"}),Fr+=Ln[2].width*(Zt-Kt*2);const ir=Ge(Cn.radius||0);We.text(ir,Fr+Ln[3].width*(Zt-Kt*2)-Kt,Ni+4,{align:"right"}),Fr+=Ln[3].width*(Zt-Kt*2);const Or=Cn.startAngle===0&&Cn.endAngle===360?"C":"P";We.text(Or,Fr+Ln[4].width*(Zt-Kt*2)/2,Ni+4,{align:"center"})}),We.setDrawColor(226,232,240),We.setLineWidth(.05),We.line(Ot+Kt,Pn+mn+Kt,Ot+Zt-Kt,Pn+mn+Kt),Pn+mr+Kt*2}return(mt,We)=>{var Ot,Pn,tr,Zn,Zt,mn;return $e(),qe(Rn,null,[E("div",XF,[E("div",QF,[Xe.value?($e(),qe("div",e9,We[8]||(We[8]=[uc('<div class="bg-white/90 rounded-2xl p-8 max-w-md shadow-2xl border border-gray-100"><div class="flex flex-col items-center"><div class="relative w-24 h-24 mb-6"><div class="absolute inset-0 border-4 border-primary-200 rounded-full"></div><div class="absolute inset-0 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"></div><div class="absolute inset-2 border-2 border-primary-400/30 rounded-full animate-pulse"></div><div class="absolute inset-0 flex items-center justify-center"><svg class="w-8 h-8 text-primary-600 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div><h3 class="text-xl font-semibold text-gray-900 mb-2"> Génération de la synthèse </h3><div class="space-y-2 text-center"><p class="text-primary-600 font-medium"> Capture des formes en cours... </p><p class="text-sm text-gray-500"> Nous optimisons la qualité de vos captures pour un rendu parfait </p></div></div></div>',1)]))):un("",!0),R.value?un("",!0):($e(),qe("div",t9,[E("div",n9,[We[11]||(We[11]=uc('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+c1+'" alt="TagMap Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur TagMap</h1><p class="text-gray-600 mb-8">Pour commencer à dessiner, vous devez d&#39;abord créer un nouveau plan ou charger un plan existant.</p>',3)),E("div",r9,[E("button",{onClick:We[0]||(We[0]=It=>ce.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},We[9]||(We[9]=[E("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),pi(" Créer un nouveau plan ")])),E("button",{onClick:We[1]||(We[1]=It=>xe.value=!0),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},We[10]||(We[10]=[E("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),pi(" Charger un plan existant ")]))])])])),In(E("div",i9,[($e(),Ua(kg,{to:"body"},[R.value&&!Xe.value?($e(),qe("div",o9,[fi(vI,{"last-save":(Ot=R.value)!=null&&Ot.date_modification?new Date(R.value.date_modification):void 0,"plan-name":(Pn=R.value)==null?void 0:Pn.nom,"plan-description":(tr=R.value)==null?void 0:tr.description,"save-status":I.value,onChangeMapType:Wn(le),onCreateNewPlan:We[2]||(We[2]=It=>ce.value=!0),onLoadPlan:We[3]||(We[3]=It=>xe.value=!0),onSavePlan:K,onAdjustView:ge,onGenerateSummary:kt},null,8,["last-save","plan-name","plan-description","save-status","onChangeMapType"])])):un("",!0)])),E("div",s9,[r.value&&R.value&&!Xe.value?($e(),qe("div",{key:0,onClick:ue,class:"md:hidden fixed inset-0 bg-black/30 z-[1999] transition-opacity duration-300"})):un("",!0),R.value&&!Xe.value?($e(),qe("div",{key:1,onClick:ue,class:"md:hidden fixed left-0 right-0 z-[2500] bg-white py-3 px-3 shadow-lg border-t border-gray-200 flex items-center justify-between",style:{height:"var(--mobile-bottom-toolbar-height)",bottom:"0"}},We[12]||(We[12]=[uc('<div class="flex items-center w-full justify-center"><div class="flex items-center space-x-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg><span class="text-sm text-gray-500 font-medium">Outils de dessin</span></div></div>',1)]))):un("",!0),E("div",a9,[E("div",{ref_key:"mapContainer",ref:t,class:"absolute inset-0 z-[1000]"},null,512)]),R.value&&!Xe.value?($e(),qe("div",{key:2,class:Ri([r.value?"translate-y-0":"translate-y-full md:translate-y-0","w-full md:w-64 bg-white border-t md:border-t-0 md:border-l border-gray-200 flex-shrink-0 z-[2000] transition-transform duration-300 ease-out","fixed md:relative bottom-0 md:bottom-auto right-0 md:top-0 h-[80%] md:h-auto rounded-t-xl md:rounded-none shadow-lg md:shadow-none overflow-y-auto"]),style:{bottom:"var(--mobile-bottom-toolbar-height)"}},[E("div",{class:"md:hidden w-full flex justify-between items-center px-4 py-2 border-b border-gray-200"},[E("div",{class:"flex items-center"},[E("div",{onClick:ue,class:"w-10 h-1.5 bg-gray-300 rounded-full cursor-pointer mr-3"})]),E("button",{onClick:ue,class:"p-1.5 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors"},We[13]||(We[13]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),fi(IO,{"current-tool":Wn(d),"selected-shape":ne.value,"all-layers":((Zn=Wn(N))==null?void 0:Zn.getLayers())||[],onToolChange:Wn(_),onStyleUpdate:Wn(M),onPropertiesUpdate:pe,onDeleteShape:Ue,onFilterChange:xn},null,8,["current-tool","selected-shape","all-layers","onToolChange","onStyleUpdate"])],2)):un("",!0)]),Xe.value?($e(),qe("div",l9,We[14]||(We[14]=[uc('<div class="text-center"><div class="mb-4"><svg class="animate-spin h-10 w-10 mx-auto text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div><p class="text-lg font-medium text-gray-900">Génération de la synthèse en cours...</p><p class="text-sm text-gray-500 mt-2">Veuillez patienter pendant que nous analysons votre plan.</p></div>',1)]))):un("",!0)],512),[[W0,R.value]]),($e(),Ua(kg,{to:"body"},[fi(vx,{ref_key:"newPlanModalRef",ref:J,modelValue:ce.value,"onUpdate:modelValue":We[4]||(We[4]=It=>ce.value=It),onCreated:Qe,onSalarieSelected:We[5]||(We[5]=It=>ie.value=It),onVisiteurSelected:We[6]||(We[6]=It=>re.value=It)},null,8,["modelValue"])])),($e(),Ua(kg,{to:"body"},[xe.value?($e(),qe("div",u9,[E("div",c9,[E("div",f9,[We[16]||(We[16]=E("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),E("button",{onClick:We[7]||(We[7]=It=>xe.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},We[15]||(We[15]=[E("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("div",h9,[Wn($).isAdmin?($e(),qe("div",d9,[Gt.value?ie.value?we.value?($e(),qe("div",T9,[E("div",D9,[E("button",{onClick:wn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},We[31]||(We[31]=[E("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),pi(" Retour à la liste des clients ")])),We[32]||(We[32]=E("span",{class:"mx-2 text-gray-400"},"|",-1)),E("span",N9,Wt(it(we.value)),1)]),We[34]||(We[34]=E("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),E("div",B9,[A.value?($e(),qe(Rn,{key:0},Br(3,It=>E("div",{key:It,class:"animate-pulse"},We[33]||(We[33]=[E("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[E("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),E("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),E("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):($e(!0),qe(Rn,{key:1},Br(q.value,It=>($e(),qe("button",{key:It.id,onClick:Kt=>Ve(It.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[E("div",I9,Wt(It.nom),1),E("div",R9,Wt(It.description),1),E("div",F9," Modifié le "+Wt(ve(It.date_modification)),1)],8,O9))),128))])])):($e(),qe("div",S9,[E("div",C9,[E("button",{onClick:On,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},We[25]||(We[25]=[E("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),pi(" Retour à la liste des salaries ")])),We[26]||(We[26]=E("span",{class:"mx-2 text-gray-400"},"|",-1)),E("span",E9,Wt(it(ie.value)),1)]),We[30]||(We[30]=E("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),E("div",P9,[Ie.value?($e(),qe(Rn,{key:0},Br(3,It=>E("div",{key:It,class:"animate-pulse"},We[27]||(We[27]=[E("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[E("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),E("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):($e(),qe(Rn,{key:1},[fe.value.length===0?($e(),qe("div",M9,We[28]||(We[28]=[E("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarie",-1),E("div",{class:"text-sm text-gray-400"}," Veuillez vérifier que des visiteurs ont été assignés à ce salarie ",-1)]))):($e(!0),qe(Rn,{key:1},Br(fe.value,It=>($e(),qe("button",{key:It.id,onClick:Kt=>cr(It),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[E("div",null,[E("div",k9,Wt(it(It)),1)]),We[29]||(We[29]=E("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,A9))),128))],64))])])):($e(),qe("div",y9,[E("div",_9,[E("button",{onClick:Qt,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},We[20]||(We[20]=[E("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),pi(" Retour à la liste des entreprises ")])),We[21]||(We[21]=E("span",{class:"mx-2 text-gray-400"},"|",-1)),E("span",b9,Wt(it(Gt.value)),1)]),We[24]||(We[24]=E("h3",{class:"font-medium text-gray-700"},"Sélectionnez un salarie",-1)),E("div",w9,[Pe.value?($e(),qe(Rn,{key:0},Br(3,It=>E("div",{key:It,class:"animate-pulse"},We[22]||(We[22]=[E("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[E("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),E("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):($e(!0),qe(Rn,{key:1},Br(et.value,It=>($e(),qe("button",{key:It.id,onClick:Kt=>Tn(It),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[E("div",null,[E("div",L9,Wt(it(It)),1)]),We[23]||(We[23]=E("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,x9))),128))])])):($e(),qe("div",p9,[We[19]||(We[19]=E("h3",{class:"font-medium text-gray-700"},"Sélectionnez une entreprise",-1)),E("div",g9,[fn.value?($e(),qe(Rn,{key:0},Br(3,It=>E("div",{key:It,class:"animate-pulse"},We[17]||(We[17]=[E("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[E("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),E("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):($e(!0),qe(Rn,{key:1},Br(pn.value,It=>($e(),qe("button",{key:It.id,onClick:Kt=>Vt(It),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[E("div",null,[E("div",v9,Wt(it(It)),1)]),We[18]||(We[18]=E("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,m9))),128))])]))])):Wn($).isSalarie?($e(),qe("div",j9,[we.value?($e(),qe("div",G9,[E("div",q9,[E("button",{onClick:wn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},We[39]||(We[39]=[E("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),pi(" Retour à la liste des clients ")])),We[40]||(We[40]=E("span",{class:"mx-2 text-gray-400"},"|",-1)),E("span",W9,Wt(it(we.value)),1)]),We[42]||(We[42]=E("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),E("div",Z9,[A.value?($e(),qe(Rn,{key:0},Br(3,It=>E("div",{key:It,class:"animate-pulse"},We[41]||(We[41]=[E("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[E("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),E("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),E("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):($e(!0),qe(Rn,{key:1},Br(q.value,It=>($e(),qe("button",{key:It.id,onClick:Kt=>Ve(It.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[E("div",Y9,Wt(It.nom),1),E("div",J9,Wt(It.description),1),E("div",X9," Modifié le "+Wt(ve(It.date_modification)),1)],8,K9))),128))])])):($e(),qe("div",z9,[We[38]||(We[38]=E("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),E("div",$9,[Ie.value?($e(),qe(Rn,{key:0},Br(3,It=>E("div",{key:It,class:"animate-pulse"},We[35]||(We[35]=[E("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[E("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),E("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):($e(),qe(Rn,{key:1},[fe.value.length===0?($e(),qe("div",U9,We[36]||(We[36]=[E("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarie",-1),E("div",{class:"text-sm text-gray-400"}," Veuillez vérifier que des visiteurs ont été assignés à ce salarie ",-1)]))):($e(!0),qe(Rn,{key:1},Br(fe.value,It=>($e(),qe("button",{key:It.id,onClick:Kt=>cr(It),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[E("div",null,[E("div",H9,Wt(it(It)),1)]),We[37]||(We[37]=E("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,V9))),128))],64))])]))])):Wn($).isEntreprise?($e(),qe("div",Q9,Wt(Wn($).isEntreprise?"...":""),1)):($e(),qe("div",ej,[Wn(i).plans.length===0?($e(),qe("div",tj,We[43]||(We[43]=[E("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):($e(),qe("div",nj,[($e(!0),qe(Rn,null,Br(Wn(i).plans,It=>($e(),qe("button",{key:It.id,onClick:Kt=>Ve(It.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[E("div",ij,Wt(It.nom),1),E("div",oj,Wt(It.description),1),E("div",sj," Modifié le "+Wt(ve(It.date_modification)),1)],8,rj))),128))]))]))])])])):un("",!0)]))])]),G.value?($e(),Ua(gx,{key:0,note:Z.value,"is-new-note":!((Zt=Z.value)!=null&&Zt.id),location:(mn=Z.value)==null?void 0:mn.location,onClose:ar,onSave:En},null,8,["note","is-new-note","location"])):un("",!0)],64)}}}),aj={class:"fixed inset-0 z-[3001] overflow-y-auto"},lj={class:"flex items-center justify-center min-h-screen w-full p-0"},uj={class:"relative bg-white w-full h-full max-h-full overflow-y-auto md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},cj={class:"p-4 md:p-6"},fj={class:"flex justify-between items-center mb-4 border-b pb-4"},hj={class:"text-xl font-semibold text-gray-900",id:"modal-headline"},dj={class:"mt-4"},pj={key:0,class:"mb-4 rounded-md bg-red-50 p-4"},gj={class:"flex"},mj={class:"ml-3"},vj={class:"text-sm font-medium text-red-800"},yj={key:0},_j={key:1},bj=["value"],wj={key:2},xj={key:3},Lj=["value"],Sj={class:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-2"},Cj={key:0,class:"mt-2 text-sm text-red-600"},Ej={key:0,class:"mt-2 text-sm text-red-600"},Pj={key:4},Mj={class:"flex items-center"},Aj={key:5},kj={key:6},Tj={key:0,class:"mt-2 text-sm text-red-600"},Dj={class:"flex justify-end space-x-3"},Nj=["disabled"],Bj={key:0,class:"mr-2"},Oj=us({__name:"UserFormModal",props:{user:{type:Object,default:()=>({})},salaries:{type:Array,default:()=>[]},entreprises:{type:Array,default:()=>[]},isAdmin:{type:Boolean,default:!1},isEntreprise:{type:Boolean,default:!1},currentSalarie:{type:String,default:void 0},currentEntreprise:{type:String,default:void 0},apiErrors:{type:Array,default:()=>[]},refreshKey:{type:Number,default:0}},emits:["close","save","refresh"],setup(e,{emit:n}){const t=e,r=n,i=Ft(!1),s=Ft(""),o=Ft(""),u=Ft(""),f=Ft(""),d=Ft(""),g=Jl({id:void 0,first_name:"",last_name:"",username:"",email:"",password:"",company_name:"",role:t.isEntreprise?"SALARIE":t.isAdmin?"ADMIN":"VISITEUR",salarie:null,entreprise:null,is_active:!0,storage_quota:50,storage_used:0});$s(()=>{var x;(x=t.user)!=null&&x.id?(g.id=t.user.id,g.first_name=t.user.first_name||"",g.last_name=t.user.last_name||"",g.username=t.user.username||"",g.email=t.user.email||"",g.company_name=t.user.company_name||"",g.role=t.user.role||"VISITEUR",g.is_active=t.user.is_active??!0,t.user.salarie?typeof t.user.salarie=="object"?g.salarie=t.user.salarie.id:g.salarie=t.user.salarie:t.user.salarie_id?g.salarie=t.user.salarie_id:t.currentSalarie&&(g.salarie=parseInt(t.currentSalarie)),t.user.entreprise?typeof t.user.entreprise=="object"?g.entreprise=t.user.entreprise.id:g.entreprise=t.user.entreprise:t.user.entreprise_id?g.entreprise=t.user.entreprise_id:t.currentEntreprise&&(g.entreprise=parseInt(t.currentEntreprise))):(t.currentSalarie&&(g.salarie=parseInt(t.currentSalarie)),t.currentEntreprise&&(g.entreprise=parseInt(t.currentEntreprise)),t.isEntreprise?g.role="SALARIE":t.isAdmin||(g.role="VISITEUR"))}),yp(()=>{g.role==="ADMIN"||g.role==="ENTREPRISE"?(g.salarie=null,g.entreprise=null):g.role==="SALARIE"&&(g.salarie=null,t.isEntreprise&&t.currentEntreprise&&(g.entreprise=parseInt(t.currentEntreprise)))}),yp(()=>{s.value="",o.value="",u.value="",f.value="",t.apiErrors&&t.apiErrors.length>0&&t.apiErrors.forEach(x=>{switch(x.field){case"email":s.value=x.message;break;case"username":o.value=x.message;break;case"password":u.value=x.message;break;case"non_field_error":default:f.value=x.message;break}})});async function y(){s.value="",o.value="",u.value="",f.value="";let x=!0;if(g.id||(g.password!==d.value?(u.value="Les mots de passe ne correspondent pas",x=!1):g.password.length<8&&(u.value="Le mot de passe doit contenir au moins 8 caractères",x=!1)),!!x){i.value=!0;try{const _={...g};g.id&&delete _.password,t.isEntreprise&&["SALARIE","VISITEUR"].includes(g.role)&&(_.entreprise_id=t.currentEntreprise?parseInt(t.currentEntreprise):void 0),_.salarie&&(_.salarie_id=_.salarie,delete _.salarie),t.currentSalarie&&g.role==="VISITEUR"&&(_.salarie_id=parseInt(t.currentSalarie)),await r("save",_),r("refresh")}catch(_){console.error("Erreur locale:",_)}finally{i.value=!1}}}return(x,_)=>($e(),qe("div",aj,[E("div",lj,[_[35]||(_[35]=E("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[E("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),E("div",uj,[E("div",null,[E("div",cj,[E("div",fj,[E("h3",hj,Wt(e.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),E("button",{type:"button",onClick:_[0]||(_[0]=M=>x.$emit("close")),class:"text-gray-400 hover:text-gray-500"},_[14]||(_[14]=[E("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("div",dj,[f.value?($e(),qe("div",pj,[E("div",gj,[_[15]||(_[15]=E("div",{class:"flex-shrink-0"},[E("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),E("div",mj,[E("h3",vj,Wt(f.value),1)])])])):un("",!0),E("form",{onSubmit:Vc(y,["prevent"]),class:"space-y-6"},[e.isAdmin?($e(),qe("div",yj,[_[17]||(_[17]=E("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),In(E("select",{id:"role","onUpdate:modelValue":_[1]||(_[1]=M=>g.role=M),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},_[16]||(_[16]=[E("option",{value:"ADMIN"},"Administrateur",-1),E("option",{value:"ENTREPRISE"},"Entreprise",-1),E("option",{value:"SALARIE"},"Salarie",-1),E("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[lo,g.role]])])):un("",!0),e.isAdmin&&g.role==="SALARIE"?($e(),qe("div",_j,[_[19]||(_[19]=E("label",{for:"entreprise",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),In(E("select",{id:"entreprise","onUpdate:modelValue":_[2]||(_[2]=M=>g.entreprise=M),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},[_[18]||(_[18]=E("option",{value:null},"-- Sélectionner une entreprise --",-1)),($e(!0),qe(Rn,null,Br(e.entreprises,M=>($e(),qe("option",{key:M.id,value:M.id},Wt(M.first_name)+" "+Wt(M.last_name)+" ("+Wt(M.company_name||"Entreprise")+") ",9,bj))),128))],512),[[lo,g.entreprise]])])):un("",!0),e.isEntreprise&&!g.id?($e(),qe("div",wj,[_[21]||(_[21]=E("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),In(E("select",{id:"role","onUpdate:modelValue":_[3]||(_[3]=M=>g.role=M),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},_[20]||(_[20]=[E("option",{value:"SALARIE"},"Salarie",-1),E("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[lo,g.role]])])):un("",!0),(e.isAdmin||e.isEntreprise)&&g.role==="VISITEUR"&&!e.currentSalarie?($e(),qe("div",xj,[_[23]||(_[23]=E("label",{for:"salarie",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),In(E("select",{id:"salarie","onUpdate:modelValue":_[4]||(_[4]=M=>g.salarie=M),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},[_[22]||(_[22]=E("option",{value:null},"-- Sélectionner un salarie --",-1)),($e(!0),qe(Rn,null,Br(e.salaries,M=>($e(),qe("option",{key:M.id,value:M.id},Wt(M.first_name)+" "+Wt(M.last_name)+" ("+Wt(M.company_name||"Salarie")+") ",9,Lj))),128))],512),[[lo,g.salarie]])])):un("",!0),E("div",Sj,[E("div",null,[_[24]||(_[24]=E("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prénom",-1)),In(E("input",{type:"text",id:"first_name","onUpdate:modelValue":_[5]||(_[5]=M=>g.first_name=M),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Zr,g.first_name]])]),E("div",null,[_[25]||(_[25]=E("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),In(E("input",{type:"text",id:"last_name","onUpdate:modelValue":_[6]||(_[6]=M=>g.last_name=M),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Zr,g.last_name]])])]),E("div",null,[_[26]||(_[26]=E("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),In(E("input",{type:"email",id:"email","onUpdate:modelValue":_[7]||(_[7]=M=>g.email=M),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Zr,g.email]]),s.value?($e(),qe("div",Cj,Wt(s.value),1)):un("",!0)]),E("div",null,[_[27]||(_[27]=E("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),In(E("input",{type:"text",id:"username","onUpdate:modelValue":_[8]||(_[8]=M=>g.username=M),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Zr,g.username]]),o.value?($e(),qe("div",Ej,Wt(o.value),1)):un("",!0)]),E("div",null,[_[28]||(_[28]=E("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),In(E("input",{type:"text",id:"company_name","onUpdate:modelValue":_[9]||(_[9]=M=>g.company_name=M),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Zr,g.company_name]])]),g.role==="ENTREPRISE"||g.role==="SALARIE"?($e(),qe("div",Pj,[_[30]||(_[30]=E("label",{for:"storage_quota",class:"block text-sm font-medium text-gray-700"},"Quota de stockage (MB)",-1)),E("div",Mj,[In(E("input",{type:"number",id:"storage_quota","onUpdate:modelValue":_[10]||(_[10]=M=>g.storage_quota=M),min:"1",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Zr,g.storage_quota]]),_[29]||(_[29]=E("span",{class:"ml-2 text-sm text-gray-500"},"MB",-1))]),_[31]||(_[31]=E("p",{class:"mt-1 text-sm text-gray-500"},"Espace de stockage maximum pour les photos des notes",-1))])):un("",!0),g.id?un("",!0):($e(),qe("div",Aj,[_[32]||(_[32]=E("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),In(E("input",{type:"password",id:"password","onUpdate:modelValue":_[11]||(_[11]=M=>g.password=M),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Zr,g.password]])])),g.id?un("",!0):($e(),qe("div",kj,[_[33]||(_[33]=E("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),In(E("input",{type:"password",id:"password_confirm","onUpdate:modelValue":_[12]||(_[12]=M=>d.value=M),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Zr,d.value]]),u.value?($e(),qe("div",Tj,Wt(u.value),1)):un("",!0)])),E("div",Dj,[E("button",{type:"button",onClick:_[13]||(_[13]=M=>x.$emit("close")),class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Annuler "),E("button",{type:"submit",disabled:i.value,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[i.value?($e(),qe("span",Bj,_[34]||(_[34]=[E("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[E("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),E("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):un("",!0),pi(" "+Wt(g.id?"Enregistrer":"Créer"),1)],8,Nj)])],32)])])])])])]))}}),Ij={class:"fixed inset-0 z-[3001] overflow-y-auto"},Rj={class:"flex items-center justify-center min-h-screen w-full"},Fj={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},jj={class:"p-4 md:p-6"},zj={class:"flex items-start"},$j={class:"ml-4 flex-1"},Uj={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},Vj={class:"mt-2"},Hj={class:"text-sm text-gray-500"},Gj={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3"},jx=us({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(e){return(n,t)=>($e(),qe("div",Ij,[E("div",Rj,[t[3]||(t[3]=E("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[E("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),E("div",Fj,[E("div",jj,[E("div",zj,[t[2]||(t[2]=E("div",{class:"flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[E("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),E("div",$j,[E("h3",Uj,Wt(e.title),1),E("div",Vj,[E("p",Hj,Wt(e.message),1)])])]),E("div",Gj,[E("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm",onClick:t[0]||(t[0]=r=>n.$emit("confirm"))}," Confirmer "),E("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm",onClick:t[1]||(t[1]=r=>n.$emit("cancel"))}," Annuler ")])])])])]))}}),qj={class:"h-full bg-gray-50"},Wj={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Zj={class:"flex justify-between items-center mb-8"},Kj={class:"text-3xl font-extrabold text-gray-900"},Yj={key:0},Jj={key:1},Xj={key:2},Qj={key:0},ez={key:1},tz={key:2},nz={class:"bg-white shadow rounded-lg mb-6 p-4"},rz={class:"space-y-4"},iz={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},oz={key:0},sz={key:0,value:"ADMIN"},az={key:1,value:"ENTREPRISE"},lz={key:1},uz=["value"],cz={key:2},fz=["value"],hz={class:"w-full"},dz={class:"bg-white shadow rounded-lg"},pz={class:"overflow-x-auto"},gz={class:"min-w-full divide-y divide-gray-200"},mz={class:"bg-gray-50"},vz={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},yz={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},_z={class:"bg-white divide-y divide-gray-200"},bz={key:0,class:"animate-pulse"},wz={key:1},xz={class:"px-6 py-4 whitespace-nowrap"},Lz={class:"flex items-center"},Sz={class:"flex-shrink-0 h-10 w-10"},Cz={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},Ez={class:"text-primary-600 font-medium"},Pz={class:"ml-4"},Mz={class:"text-sm font-medium text-gray-900"},Az={class:"text-sm text-gray-500"},kz={class:"px-6 py-4 whitespace-nowrap"},Tz={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Dz={key:0,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Nz={key:1,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Bz={class:"px-6 py-4 whitespace-nowrap"},Oz={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Iz=["onClick"],Rz=["onClick"],Fz={key:0,class:"fixed inset-0 z-[3001] overflow-y-auto"},jz=us({__name:"UserListView",setup(e){const n=va(),t=dc(),r=Ft([]),i=Ft([]),s=Ft([]),o=Ft(!1),u=Ft(!1),f=Ft(null),d=Ft(null),g=Ft(!0),y=Ft([]),x=Jl({role:"",search:"",salarie:"",entreprise:""}),_=gr(()=>n.isAdmin),M=gr(()=>n.isEntreprise),D=gr(()=>n.isSalarie),N=gr(()=>_.value?r.value.filter(U=>U.role==="SALARIE"):M.value?r.value.filter(U=>{var W,q;return U.role==="SALARIE"&&((W=U.entreprise)==null?void 0:W.id)===((q=n.user)==null?void 0:q.id)}):[]),O=gr(()=>{let U=r.value;if(M.value&&(U=U.filter(W=>{var q,ie,re,we,Pe;return W.role==="SALARIE"?((q=W.entreprise)==null?void 0:q.id)===((ie=n.user)==null?void 0:ie.id):W.role==="VISITEUR"?((we=(re=W.salarie)==null?void 0:re.entreprise)==null?void 0:we.id)===((Pe=n.user)==null?void 0:Pe.id):!1})),D.value&&(U=U.filter(W=>{var q,ie;return W.role==="VISITEUR"&&(W.salarie_id===((q=n.user)==null?void 0:q.id)||W.salarie&&W.salarie.id===((ie=n.user)==null?void 0:ie.id))})),(_.value||M.value)&&(x.role&&(U=U.filter(W=>W.role===x.role)),x.salarie&&(U=U.filter(W=>{var ie;const q=((ie=W.salarie)==null?void 0:ie.id)||W.salarie_id;return(q==null?void 0:q.toString())===x.salarie.toString()})),x.entreprise&&_.value&&(U=U.filter(W=>{var q,ie,re,we,Pe;return W.role==="SALARIE"?((ie=(q=W.entreprise)==null?void 0:q.id)==null?void 0:ie.toString())===x.entreprise.toString():W.role==="VISITEUR"?((Pe=(we=(re=W.salarie)==null?void 0:re.entreprise)==null?void 0:we.id)==null?void 0:Pe.toString())===x.entreprise.toString():!1}))),x.search){const W=x.search.toLowerCase();U=U.filter(q=>{var ie,re,we,Pe;return((ie=q.username)==null?void 0:ie.toLowerCase().includes(W))||((re=q.email)==null?void 0:re.toLowerCase().includes(W))||((we=q.first_name)==null?void 0:we.toLowerCase().includes(W))||((Pe=q.last_name)==null?void 0:Pe.toLowerCase().includes(W))||q.company_name&&q.company_name.toLowerCase().includes(W)})}return U});$s(async()=>{await F(),await Y()});async function F(){var U,W,q;g.value=!0;try{if(_.value)r.value=await n.fetchUsers();else if(M.value){const[ie,re]=await Promise.all([Fg({role:"SALARIE",entrepriseId:(U=n.user)==null?void 0:U.id}),Fg({role:"VISITEUR",entrepriseId:(W=n.user)==null?void 0:W.id})]);r.value=[...ie,...re]}else D.value&&(r.value=await Fg({role:"VISITEUR",salarieId:(q=n.user)==null?void 0:q.id,includeDetails:!0}),console.log("Visiteurs récupérés:",r.value))}catch(ie){console.error("Erreur lors de la récupération des utilisateurs:",ie),t.error("Erreur lors de la récupération des utilisateurs")}finally{g.value=!1}}async function Y(){try{_.value?await Promise.all([Q(),ce()]):M.value&&await le()}catch(U){console.error("Erreur lors de la récupération des dépendances:",U)}}async function Q(){var U;try{_.value?i.value=await n.fetchUsersByRole({role:"SALARIE"}):M.value&&(i.value=await n.fetchEntrepriseSalaries((U=n.user)==null?void 0:U.id))}catch(W){console.error("Erreur lors de la récupération des salaries:",W)}}async function le(){var U,W;if(!(!M.value||!((U=n.user)!=null&&U.id)))try{i.value=await n.fetchEntrepriseSalaries((W=n.user)==null?void 0:W.id)}catch(q){console.error("Erreur lors de la récupération des salaries de l'entreprise:",q)}}async function ce(){try{s.value=await n.fetchEnterprises()}catch(U){console.error("Erreur lors de la récupération des entreprises:",U)}}function xe(){f.value=null,o.value=!0}function G(U){f.value={...U},o.value=!0}function R(){o.value=!1,f.value=null,y.value=[]}async function Z(U){var q,ie,re,we,Pe,Ie;y.value=[];const W=!!U.id;try{const A={...U};_.value?(A.entreprise&&typeof A.entreprise=="object"?A.entreprise_id=A.entreprise.id:typeof A.entreprise=="number"&&(A.entreprise_id=A.entreprise),A.salarie&&typeof A.salarie=="object"?A.salarie_id=A.salarie.id:typeof A.salarie=="number"&&(A.salarie_id=A.salarie)):M.value?(A.entreprise_id=(q=n.user)==null?void 0:q.id,A.role==="VISITEUR"&&(A.salarie&&typeof A.salarie=="object"?A.salarie_id=A.salarie.id:typeof A.salarie=="number"&&(A.salarie_id=A.salarie))):D.value&&(A.role="VISITEUR",A.salarie_id=(ie=n.user)==null?void 0:ie.id),A.role==="SALARIE"?((re=A.entreprise)!=null&&re.id?(A.entreprise_id=A.entreprise.id,delete A.entreprise):typeof A.entreprise=="number"&&(A.entreprise_id=A.entreprise,delete A.entreprise),delete A.salarie):A.role==="VISITEUR"&&((we=A.salarie)!=null&&we.id?(A.salarie_id=A.salarie.id,delete A.salarie):typeof A.salarie=="number"&&(A.salarie_id=A.salarie,delete A.salarie),delete A.entreprise,delete A.entreprise_id),W?(await n.updateUser(U.id,A),t.success("Utilisateur modifié avec succès")):(await n.createUser(A),t.success("Utilisateur créé avec succès")),await Promise.all([F(),Y()]),R()}catch(A){console.error("Error saving user:",((Pe=A.response)==null?void 0:Pe.data)||A),y.value=iT(A),t.error("Erreur lors de la sauvegarde de l'utilisateur");const J=((Ie=A.response)==null?void 0:Ie.data)||{};let fe="";throw typeof J=="object"&&(fe=Object.entries(J).map(([ne,he])=>Array.isArray(he)?`${ne}: ${he[0]}`:`${ne}: ${he}`).filter(ne=>ne).join(`
`)),fe||(fe="Une erreur est survenue lors de la sauvegarde"),new Error(fe)}}function z(U){d.value=U,u.value=!0}async function I(){if(d.value)try{await n.deleteUser(d.value.id),t.success("Utilisateur supprimé avec succès"),await Promise.all([F(),Y()]),u.value=!1,d.value=null}catch(U){throw console.error("Erreur lors de la suppression de l'utilisateur:",U),t.error("Erreur lors de la suppression de l'utilisateur"),U}}function $(U){var W,q,ie,re,we,Pe,Ie,A;return _.value?!0:M.value?U.role==="SALARIE"?((W=U.entreprise)==null?void 0:W.id)===((q=n.user)==null?void 0:q.id):U.role==="VISITEUR"?((re=(ie=U.salarie)==null?void 0:ie.entreprise)==null?void 0:re.id)===((we=n.user)==null?void 0:we.id):!1:D.value?U.role==="VISITEUR"&&(U.salarie_id===((Pe=n.user)==null?void 0:Pe.id)||((Ie=U.salarie)==null?void 0:Ie.id)===((A=n.user)==null?void 0:A.id)):!1}return(U,W)=>{var q,ie,re,we;return $e(),qe("div",qj,[E("div",Wj,[E("div",Zj,[E("h1",Kj,[_.value?($e(),qe("span",Yj,"Gestion des utilisateurs")):M.value?($e(),qe("span",Jj,"Gestion des salaries et visiteurs")):D.value?($e(),qe("span",Xj,"Gestion des visiteurs")):un("",!0)]),E("button",{onClick:xe,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[W[5]||(W[5]=E("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),_.value?($e(),qe("span",Qj,"Nouvel utilisateur")):M.value?($e(),qe("span",ez,"Nouveau salarie/visiteur")):D.value?($e(),qe("span",tz,"Nouvel visiteur")):un("",!0)])]),E("div",nz,[E("div",rz,[E("div",iz,[_.value||M.value?($e(),qe("div",oz,[W[9]||(W[9]=E("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),In(E("select",{id:"role-filter","onUpdate:modelValue":W[0]||(W[0]=Pe=>x.role=Pe),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[W[6]||(W[6]=E("option",{value:""},"Tous les rôles",-1)),_.value?($e(),qe("option",sz,"Administrateur")):un("",!0),_.value?($e(),qe("option",az,"Entreprise")):un("",!0),W[7]||(W[7]=E("option",{value:"SALARIE"},"Salarie",-1)),W[8]||(W[8]=E("option",{value:"VISITEUR"},"Visiteur",-1))],512),[[lo,x.role]])])):un("",!0),_.value?($e(),qe("div",lz,[W[11]||(W[11]=E("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),In(E("select",{id:"entreprise-filter","onUpdate:modelValue":W[1]||(W[1]=Pe=>x.entreprise=Pe),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[W[10]||(W[10]=E("option",{value:""},"Toutes les entreprises",-1)),($e(!0),qe(Rn,null,Br(s.value,Pe=>($e(),qe("option",{key:Pe.id,value:Pe.id},Wt(Wn(Gl)(Pe)),9,uz))),128))],512),[[lo,x.entreprise]])])):un("",!0),_.value||M.value?($e(),qe("div",cz,[W[13]||(W[13]=E("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),In(E("select",{id:"salarie-filter","onUpdate:modelValue":W[2]||(W[2]=Pe=>x.salarie=Pe),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[W[12]||(W[12]=E("option",{value:""},"Tous les salaries",-1)),($e(!0),qe(Rn,null,Br(N.value,Pe=>($e(),qe("option",{key:Pe.id,value:Pe.id},Wt(Wn(Gl)(Pe)),9,fz))),128))],512),[[lo,x.salarie]])])):un("",!0)]),E("div",hz,[W[14]||(W[14]=E("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),In(E("input",{type:"text",id:"search","onUpdate:modelValue":W[3]||(W[3]=Pe=>x.search=Pe),placeholder:"Rechercher par nom, email, entreprise...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Zr,x.search]])])])]),E("div",dz,[E("div",pz,[E("table",gz,[E("thead",mz,[E("tr",null,[W[15]||(W[15]=E("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Utilisateur ",-1)),W[16]||(W[16]=E("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rôle ",-1)),W[17]||(W[17]=E("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),_.value||M.value?($e(),qe("th",vz," Entreprise ")):un("",!0),_.value||M.value?($e(),qe("th",yz," Salarie ")):un("",!0),W[18]||(W[18]=E("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),W[19]||(W[19]=E("th",{scope:"col",class:"relative px-6 py-3"},[E("span",{class:"sr-only"},"Actions")],-1))])]),E("tbody",_z,[g.value?($e(),qe("tr",bz,W[20]||(W[20]=[E("td",{colspan:"7",class:"py-4 px-6"},[E("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):O.value.length===0?($e(),qe("tr",wz,W[21]||(W[21]=[E("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun utilisateur trouvé ",-1)]))):un("",!0),($e(!0),qe(Rn,null,Br(O.value,Pe=>{var Ie;return $e(),qe("tr",{key:Pe.id},[E("td",xz,[E("div",Lz,[E("div",Sz,[E("div",Cz,[E("span",Ez,Wt(Wn(sT)(Pe.first_name,Pe.last_name)),1)])]),E("div",Pz,[E("div",Mz,Wt(Wn(Gl)(Pe)),1),E("div",Az,Wt(Pe.username),1)])])]),E("td",kz,[E("span",{class:Ri(Wn(uT)())},Wt(Wn(lT)(Pe.role)),3)]),E("td",Tz,Wt(Pe.email),1),_.value||M.value?($e(),qe("td",Dz,[Pe.role==="ENTREPRISE"?($e(),qe(Rn,{key:0},[pi(" - ")],64)):Pe.role==="SALARIE"?($e(),qe(Rn,{key:1},[pi(Wt(Pe.entreprise?Wn(Gl)(Pe.entreprise):"Non assigné"),1)],64)):Pe.role==="VISITEUR"?($e(),qe(Rn,{key:2},[pi(Wt((Ie=Pe.salarie)!=null&&Ie.entreprise?Wn(Gl)(Pe.salarie.entreprise):"Non assigné"),1)],64)):($e(),qe(Rn,{key:3},[pi(" - ")],64))])):un("",!0),_.value||M.value?($e(),qe("td",Nz,[Pe.role==="ENTREPRISE"||Pe.role==="ADMIN"?($e(),qe(Rn,{key:0},[pi(" - ")],64)):Pe.role==="SALARIE"?($e(),qe(Rn,{key:1},[pi(" - ")],64)):($e(),qe(Rn,{key:2},[pi(Wt(Pe.salarie?Wn(Gl)(Pe.salarie):"Non assigné"),1)],64))])):un("",!0),E("td",Bz,[E("span",{class:Ri(Wn(cT)(Pe.is_active))},Wt(Pe.is_active?"Actif":"Inactif"),3)]),E("td",Oz,[E("button",{onClick:A=>G(Pe),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,Iz),$(Pe)?($e(),qe("button",{key:0,onClick:A=>z(Pe),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,Rz)):un("",!0)])])}),128))])])])])]),o.value?($e(),qe("div",Fz,[fi(Oj,{user:f.value,salaries:i.value,entreprises:s.value,"is-admin":_.value,"is-entreprise":M.value,"current-salarie":D.value?(ie=(q=Wn(n).user)==null?void 0:q.id)==null?void 0:ie.toString():void 0,"current-entreprise":M.value?(we=(re=Wn(n).user)==null?void 0:re.id)==null?void 0:we.toString():void 0,"api-errors":y.value,onClose:R,onSave:Z},null,8,["user","salaries","entreprises","is-admin","is-entreprise","current-salarie","current-entreprise","api-errors"])])):un("",!0),u.value?($e(),Ua(jx,{key:1,title:"Supprimer l'utilisateur",message:"Êtes-vous sûr de vouloir supprimer cet utilisateur ? Cette action est irréversible.",onConfirm:I,onCancel:W[4]||(W[4]=Pe=>u.value=!1)})):un("",!0)])}}}),zz={class:"h-full bg-gray-50"},$z={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Uz={class:"sm:flex sm:items-center"},Vz={class:"sm:flex-auto"},Hz={class:"text-2xl font-semibold text-gray-900"},Gz={class:"mt-2 text-sm text-gray-700"},qz={key:0,class:"mt-8"},Wz={class:"mb-6"},Zz=["value"],Kz={class:"mb-6"},Yz={value:null},Jz=["value"],Xz={key:0,class:"mb-6"},Qz={value:null},e$=["value"],t$={key:1,class:"mt-8"},n$={class:"mb-6"},r$=["value"],i$={class:"mt-8"},o$={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},s$={class:"overflow-x-auto"},a$={class:"min-w-full divide-y divide-gray-300"},l$={class:"bg-gray-50"},u$={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"},c$={class:"ml-2 flex-none rounded"},f$={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},h$={class:"ml-2 flex-none rounded"},d$={class:"divide-y divide-gray-200 bg-white"},p$={key:0},g$={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},m$={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},v$={class:"px-3 py-4 text-sm text-gray-900"},y$={key:0,class:"flex items-center"},_$={class:"h-8 w-8 flex-shrink-0"},b$={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},w$={class:"text-primary-700 font-medium text-sm"},x$={class:"ml-3"},L$={class:"font-medium"},S$={key:1,class:"text-gray-500"},C$={class:"px-3 py-4 text-sm text-gray-900"},E$={key:0,class:"flex items-center"},P$={class:"h-8 w-8 flex-shrink-0"},M$={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},A$={class:"text-primary-700 font-medium text-sm"},k$={class:"ml-3"},T$={class:"font-medium"},D$={key:1,class:"text-gray-500"},N$={class:"px-3 py-4 text-sm text-gray-900"},B$={key:0,class:"flex items-center"},O$={class:"h-8 w-8 flex-shrink-0"},I$={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},R$={class:"text-primary-700 font-medium text-sm"},F$={class:"ml-3"},j$={class:"font-medium"},z$={key:1,class:"text-gray-500"},$$={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},U$={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},V$=["onClick"],H$=["onClick"],G$=["onClick"],q$={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},W$={class:"bg-white rounded-lg p-6 max-w-md w-full"},Z$={class:"flex justify-between items-center mb-4"},K$=["disabled"],Y$=["disabled"],J$={key:0,class:"space-y-4"},X$={key:0},Q$=["disabled"],eU=["value"],tU=["disabled"],nU=["value"],rU={key:0,class:"mt-1 text-sm text-gray-500"},iU=["disabled"],oU=["value"],sU={key:0,class:"mt-1 text-sm text-gray-500"},aU={key:1,class:"mt-4 bg-red-50 p-4 rounded-md"},lU={class:"flex"},uU={class:"ml-3"},cU={class:"text-sm font-medium text-red-800"},fU={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},hU=["disabled"],dU={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},pU=us({__name:"PlansView",setup(e){const n=Np(),t=sm(),r=va(),i=Ft([]),s=Ft([]),o=Ft([]),u=Ft([]),f=Ft(!1),d=Ft(!1),g=Ft(!1),y=Ft(null),x=Ft({nom:"",description:"",client:null}),_=Ft({id:0,nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),M=Ft(!1),D=Ft(null),N=Ft(null),O=Ft(null),F=Ft("date_modification"),Y=Ft("desc"),Q=Ft(null),le=gr(()=>N.value?u.value.filter(T=>typeof T.salarie=="object"&&T.salarie?T.salarie.id===N.value:T.salarie===N.value||T.salarie_id===N.value):u.value),ce=gr(()=>{let T=i.value;console.log(`
[PlansView] Filtering plans:`,T.map(ke=>({id:ke.id,entreprise:ke.entreprise,salarie:ke.salarie,visiteur:ke.visiteur}))),r.isAdmin?(Q.value&&(T=T.filter(ke=>{var Ce;return typeof ke.entreprise=="object"?((Ce=ke.entreprise)==null?void 0:Ce.id)===Q.value:ke.entreprise===Q.value})),N.value&&(T=T.filter(ke=>{var Ce;return typeof ke.salarie=="object"?((Ce=ke.salarie)==null?void 0:Ce.id)===N.value:ke.salarie===N.value}),O.value&&(T=T.filter(ke=>{var Ce;return typeof ke.visiteur=="object"?((Ce=ke.visiteur)==null?void 0:Ce.id)===O.value:ke.visiteur===O.value})))):r.isSalarie&&(T=T.filter(ke=>{var Ce,Ve,K;return typeof ke.salarie=="object"?((Ce=ke.salarie)==null?void 0:Ce.id)===((Ve=r.user)==null?void 0:Ve.id):ke.salarie===((K=r.user)==null?void 0:K.id)}),O.value&&(T=T.filter(ke=>{var Ce;return typeof ke.visiteur=="object"?((Ce=ke.visiteur)==null?void 0:Ce.id)===O.value:ke.visiteur===O.value})));const ue=[...T].sort((ke,Ce)=>{if(F.value==="nom")return Y.value==="asc"?ke.nom.localeCompare(Ce.nom):Ce.nom.localeCompare(ke.nom);{const Ve=new Date(ke[F.value]).getTime(),K=new Date(Ce[F.value]).getTime();return Y.value==="asc"?Ve-K:K-Ve}});return console.log("[PlansView] Final filtered and sorted plans:",ue.map(ke=>({id:ke.id,entreprise:ke.entreprise,salarie:ke.salarie,visiteur:ke.visiteur}))),ue}),xe=gr(()=>r.isAdmin?{title:"Tous les plans",description:"Liste complète des plans",plans:i.value}:r.isSalarie?{title:"Plans des visiteurs",description:"Plans où vous êtes assigné comme salarie",plans:i.value.filter(T=>{var ue,ke,Ce;return typeof T.salarie=="object"?((ue=T.salarie)==null?void 0:ue.id)===((ke=r.user)==null?void 0:ke.id):T.salarie===((Ce=r.user)==null?void 0:Ce.id)})}:{title:"Mes plans",description:"Plans qui vous sont assignés ou que vous avez créés",plans:i.value.filter(T=>{var Ce,Ve,K,pe;const ue=T.createur.id===((Ce=r.user)==null?void 0:Ce.id);let ke=!1;return typeof T.visiteur=="object"?ke=((Ve=T.visiteur)==null?void 0:Ve.id)===((K=r.user)==null?void 0:K.id):ke=T.visiteur===((pe=r.user)==null?void 0:pe.id),ke||ue})}),G=gr(()=>Q.value?s.value.filter(T=>{var ue;return typeof T.entreprise=="object"?((ue=T.entreprise)==null?void 0:ue.id)===Q.value:T.entreprise_id===Q.value}):s.value),R=gr(()=>_.value.entreprise?s.value.filter(T=>{var ue;return typeof T.entreprise=="object"?((ue=T.entreprise)==null?void 0:ue.id)===_.value.entreprise:T.entreprise_id===_.value.entreprise}):[]),Z=gr(()=>!_.value.entreprise||!_.value.salarie?[]:u.value.filter(T=>typeof T.salarie=="object"&&T.salarie?T.salarie.id===_.value.salarie:T.salarie===_.value.salarie||T.salarie_id===_.value.salarie));$s(async()=>{var T;await z(),r.isAdmin?await I():r.isSalarie&&await U(((T=r.user)==null?void 0:T.id)||0)});async function z(){try{const T=await t.fetchPlansWithDetails();i.value=T.data}catch(T){console.error("Erreur lors du chargement des plans:",T)}}async function I(){try{console.log("Chargement des entreprises..."),o.value=await r.fetchEnterprises(),console.log("Entreprises chargées:",o.value)}catch(T){console.error("Erreur lors du chargement des entreprises:",T)}}async function $(T){try{if(console.log("Chargement des salaries pour l'entreprise:",T),T===void 0){const ue=await r.fetchUsersByRole({role:"SALARIE"});s.value=ue}else s.value=await r.fetchEntrepriseSalaries(T);console.log("Salaries chargés:",s.value)}catch(ue){console.error("Erreur lors du chargement des salaries:",ue)}}async function U(T){try{console.log("Chargement des visiteurs pour le salarie:",T);const ue=await Fg({role:"VISITEUR",salarieId:T});u.value=ue.map(ke=>({...ke,salarie_id:T})),console.log("Visiteurs chargés:",u.value)}catch(ue){console.error("Erreur lors du chargement des visiteurs:",ue)}}function W(){f.value=!0,x.value={nom:"",description:"",client:null}}async function q(T){console.log(`
[PlansView][editPlan] ====== DÉBUT ÉDITION PLAN ======`),console.log("[PlansView][editPlan] Plan reçu:",{id:T.id,nom:T.nom,entreprise:T.entreprise,salarie:T.salarie,visiteur:T.visiteur});try{console.log("[PlansView][editPlan] Définition du plan courant dans le store..."),t.setCurrentPlan(T),console.log("[PlansView][editPlan] Sauvegarde de l'ID dans localStorage:",T.id),localStorage.setItem("lastPlanId",T.id.toString()),console.log("[PlansView][editPlan] Redirection vers la vue carte..."),await n.push("/"),console.log(`[PlansView][editPlan] ====== FIN ÉDITION PLAN ======
`)}catch(ue){console.error("[PlansView][editPlan] ERREUR:",ue),ue instanceof Error&&console.error("[PlansView][editPlan] Stack trace:",ue.stack),alert("Une erreur est survenue lors du chargement du plan")}}async function ie(T){T!=null&&T.id&&(y.value=T,g.value=!0)}async function re(){var T,ue;if((T=y.value)!=null&&T.id)try{await t.deletePlan(y.value.id),await z(),((ue=t.currentPlan)==null?void 0:ue.id)===y.value.id&&t.clearCurrentPlan()}catch(ke){console.error("Erreur lors de la suppression du plan:",ke),alert("Une erreur est survenue lors de la suppression du plan")}finally{g.value=!1,y.value=null}}function we(){g.value=!1,y.value=null}function Pe(T){return new Date(T).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function Ie(T){if(!T)return"";const ue=T.first_name||"",ke=T.last_name||"";return(ue.charAt(0)+ke.charAt(0)).toUpperCase()}async function A(T){M.value=!0,D.value=null;try{r.isAdmin&&!o.value.length&&await I();const ue=typeof T.entreprise=="object"&&T.entreprise?T.entreprise.id:T.entreprise,ke=typeof T.salarie=="object"&&T.salarie?T.salarie.id:T.salarie,Ce=typeof T.visiteur=="object"&&T.visiteur?T.visiteur.id:T.visiteur;_.value={id:T.id,nom:T.nom,description:T.description,entreprise:ue||null,salarie:ke||null,visiteur:Ce||null},ue&&await $(ue),ke&&await U(ke),d.value=!0}catch(ue){console.error("Erreur lors de l'ouverture du modal:",ue),D.value="Erreur lors du chargement des données"}finally{M.value=!1}}async function J(){var T,ue,ke,Ce,Ve;D.value=null,M.value=!0;try{if(!_.value.nom.trim())throw new Error("Le nom du plan est requis");if(_.value.visiteur&&!_.value.salarie)throw new Error("Un salarie doit être sélectionné pour assigner un visiteur");if(_.value.salarie&&!_.value.entreprise)throw new Error("Une entreprise doit être sélectionnée pour assigner un salarie");console.log("Données envoyées pour la mise à jour:",{id:_.value.id,nom:_.value.nom.trim(),description:_.value.description.trim(),entreprise_id:_.value.entreprise,salarie_id:_.value.salarie,visiteur_id:_.value.visiteur});const K=await t.updatePlanDetails(_.value.id,{nom:_.value.nom.trim(),description:_.value.description.trim(),entreprise_id:_.value.entreprise,salarie_id:_.value.salarie,visiteur_id:_.value.visiteur});console.log("Réponse de la mise à jour:",K),K&&(d.value=!1,await z())}catch(K){if(console.error("Erreur lors de la mise à jour du plan:",K),(ue=(T=K.response)==null?void 0:T.data)!=null&&ue.detail)D.value=K.response.data.detail;else if((Ce=(ke=K.response)==null?void 0:ke.data)!=null&&Ce.non_field_errors)D.value=K.response.data.non_field_errors[0];else if((Ve=K.response)!=null&&Ve.data){const pe=Object.entries(K.response.data).map(([ve,ge])=>`${ve}: ${Array.isArray(ge)?ge[0]:ge}`);D.value=pe.join(`
`)}else D.value=K.message||"Une erreur est survenue lors de la mise à jour du plan"}finally{M.value=!1}}So(()=>Q.value,async T=>{N.value=null,O.value=null,T?await $(T):await $()}),So(()=>N.value,async T=>{O.value=null,T&&await U(T)}),So(()=>_.value.entreprise,async T=>{T===null?(_.value.salarie=null,_.value.visiteur=null):await $(T)}),So(()=>_.value.salarie,async T=>{_.value.visiteur=null,T&&await U(T)});function fe(T){var Ve,K,pe;const ue=r.user;if(!ue)return!1;if(ue.user_type==="admin")return!0;if(ue.user_type==="entreprise")return typeof T.entreprise=="object"?((Ve=T.entreprise)==null?void 0:Ve.id)===ue.id:T.entreprise===ue.id;if(ue.user_type==="salarie")return typeof T.salarie=="object"?((K=T.salarie)==null?void 0:K.id)===ue.id:T.salarie===ue.id;const ke=T.createur.id===ue.id;let Ce=!1;return typeof T.visiteur=="object"?Ce=((pe=T.visiteur)==null?void 0:pe.id)===ue.id:Ce=T.visiteur===ue.id,Ce||ke}async function ne(T){await z(),localStorage.setItem("lastPlanId",T.toString()),console.log(`Plan ${T} créé et défini comme plan actif`),n.push("/")}function he(T){F.value===T?Y.value=Y.value==="asc"?"desc":"asc":(F.value=T,Y.value="desc")}function ae(T){return T?Gl(T):""}return(T,ue)=>{var ke;return $e(),qe("div",zz,[E("div",$z,[E("div",Uz,[E("div",Vz,[E("h1",Hz,Wt(xe.value.title),1),E("p",Gz,Wt(xe.value.description),1)]),E("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[E("button",{onClick:W,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),Wn(r).isAdmin?($e(),qe("div",qz,[E("div",Wz,[ue[15]||(ue[15]=E("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par entreprise",-1)),In(E("select",{id:"entreprise-filter","onUpdate:modelValue":ue[0]||(ue[0]=Ce=>Q.value=Ce),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[ue[14]||(ue[14]=E("option",{value:null},"Toutes les entreprises",-1)),($e(!0),qe(Rn,null,Br(o.value,Ce=>($e(),qe("option",{key:Ce.id,value:Ce.id},Wt(ae(Ce)),9,Zz))),128))],512),[[lo,Q.value]])]),E("div",Kz,[ue[16]||(ue[16]=E("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par salarie",-1)),In(E("select",{id:"salarie-filter","onUpdate:modelValue":ue[1]||(ue[1]=Ce=>N.value=Ce),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[E("option",Yz,Wt(G.value.length?"Tous les salaries":"Aucun salarie disponible"),1),($e(!0),qe(Rn,null,Br(G.value,Ce=>($e(),qe("option",{key:Ce.id,value:Ce.id},Wt(ae(Ce)),9,Jz))),128))],512),[[lo,N.value]])]),N.value?($e(),qe("div",Xz,[ue[17]||(ue[17]=E("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),In(E("select",{id:"visiteur-filter","onUpdate:modelValue":ue[2]||(ue[2]=Ce=>O.value=Ce),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[E("option",Qz,Wt(le.value.length?"Tous les visiteurs":"Aucun visiteur disponible"),1),($e(!0),qe(Rn,null,Br(le.value,Ce=>($e(),qe("option",{key:Ce.id,value:Ce.id},Wt(ae(Ce)),9,e$))),128))],512),[[lo,O.value]])])):un("",!0)])):Wn(r).isSalarie?($e(),qe("div",t$,[E("div",n$,[ue[19]||(ue[19]=E("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),In(E("select",{id:"visiteur-filter","onUpdate:modelValue":ue[3]||(ue[3]=Ce=>O.value=Ce),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[ue[18]||(ue[18]=E("option",{value:null},"Tous les visiteurs",-1)),($e(!0),qe(Rn,null,Br(u.value,Ce=>($e(),qe("option",{key:Ce.id,value:Ce.id},Wt(ae(Ce)),9,r$))),128))],512),[[lo,O.value]])])])):un("",!0),E("div",i$,[E("div",o$,[E("div",s$,[E("table",a$,[E("thead",l$,[E("tr",null,[E("th",u$,[E("button",{onClick:ue[4]||(ue[4]=Ce=>he("nom")),class:"group inline-flex items-center"},[ue[21]||(ue[21]=pi(" Nom ")),E("span",c$,[($e(),qe("svg",{class:Ri(["h-5 w-5",{"text-gray-900":F.value==="nom","text-gray-400":F.value!=="nom","rotate-180":F.value==="nom"&&Y.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},ue[20]||(ue[20]=[E("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),ue[24]||(ue[24]=E("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),ue[25]||(ue[25]=E("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise ",-1)),ue[26]||(ue[26]=E("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Salarie ",-1)),ue[27]||(ue[27]=E("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Visiteur ",-1)),E("th",f$,[E("button",{onClick:ue[5]||(ue[5]=Ce=>he("date_modification")),class:"group inline-flex items-center"},[ue[23]||(ue[23]=pi(" Dernière modification ")),E("span",h$,[($e(),qe("svg",{class:Ri(["h-5 w-5",{"text-gray-900":F.value==="date_modification","text-gray-400":F.value!=="date_modification","rotate-180":F.value==="date_modification"&&Y.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},ue[22]||(ue[22]=[E("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),ue[28]||(ue[28]=E("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[E("span",{class:"sr-only"},"Actions")],-1))])]),E("tbody",d$,[ce.value.length===0?($e(),qe("tr",p$,ue[29]||(ue[29]=[E("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun plan disponible ",-1)]))):un("",!0),($e(!0),qe(Rn,null,Br(ce.value,Ce=>($e(),qe("tr",{key:Ce.id,class:"hover:bg-gray-50"},[E("td",g$,Wt(Ce.nom),1),E("td",m$,Wt(Ce.description||"-"),1),E("td",v$,[Ce.entreprise&&typeof Ce.entreprise=="object"?($e(),qe("div",y$,[E("div",_$,[E("div",b$,[E("span",w$,Wt(Ie(Ce.entreprise)),1)])]),E("div",x$,[E("div",L$,Wt(Wn(Gl)(Ce.entreprise)),1)])])):($e(),qe("div",S$," Non assigné "))]),E("td",C$,[Ce.salarie&&typeof Ce.salarie=="object"?($e(),qe("div",E$,[E("div",P$,[E("div",M$,[E("span",A$,Wt(Ie(Ce.salarie)),1)])]),E("div",k$,[E("div",T$,Wt(Wn(Gl)(Ce.salarie)),1)])])):($e(),qe("div",D$," Non assigné "))]),E("td",N$,[Ce.visiteur&&typeof Ce.visiteur=="object"?($e(),qe("div",B$,[E("div",O$,[E("div",I$,[E("span",R$,Wt(Ie(Ce.visiteur)),1)])]),E("div",F$,[E("div",j$,Wt(Wn(Gl)(Ce.visiteur)),1)])])):($e(),qe("div",z$," Non assigné "))]),E("td",$$,Wt(Pe(Ce.date_modification)),1),E("td",U$,[E("button",{onClick:Ve=>q(Ce),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,V$),E("button",{onClick:Ve=>A(Ce),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,H$),fe(Ce)?($e(),qe("button",{key:0,onClick:Ve=>ie(Ce),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,G$)):un("",!0)])]))),128))])])])])]),fi(vx,{modelValue:f.value,"onUpdate:modelValue":ue[6]||(ue[6]=Ce=>f.value=Ce),salaries:s.value,clients:u.value,onCreated:ne},null,8,["modelValue","salaries","clients"]),d.value?($e(),qe("div",q$,[E("div",W$,[E("div",Z$,[ue[31]||(ue[31]=E("h2",{class:"text-xl font-semibold text-gray-900"},"Modifier le plan",-1)),E("button",{onClick:ue[7]||(ue[7]=Ce=>d.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},ue[30]||(ue[30]=[E("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("form",{onSubmit:Vc(J,["prevent"]),class:"space-y-4"},[E("div",null,[ue[32]||(ue[32]=E("label",{for:"edit-nom",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),In(E("input",{type:"text",id:"edit-nom","onUpdate:modelValue":ue[8]||(ue[8]=Ce=>_.value.nom=Ce),disabled:M.value,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",required:""},null,8,K$),[[Zr,_.value.nom]])]),E("div",null,[ue[33]||(ue[33]=E("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),In(E("textarea",{id:"edit-description","onUpdate:modelValue":ue[9]||(ue[9]=Ce=>_.value.description=Ce),disabled:M.value,rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"},null,8,Y$),[[Zr,_.value.description]])]),Wn(r).isAdmin||((ke=Wn(r).user)==null?void 0:ke.user_type)==="entreprise"?($e(),qe("div",J$,[Wn(r).isAdmin?($e(),qe("div",X$,[ue[35]||(ue[35]=E("label",{for:"edit-entreprise",class:"block text-sm font-medium text-gray-700"}," Entreprise ",-1)),In(E("select",{id:"edit-entreprise","onUpdate:modelValue":ue[10]||(ue[10]=Ce=>_.value.entreprise=Ce),disabled:M.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[ue[34]||(ue[34]=E("option",{value:null},"Sélectionner une entreprise",-1)),($e(!0),qe(Rn,null,Br(o.value,Ce=>($e(),qe("option",{key:Ce.id,value:Ce.id},Wt(ae(Ce)),9,eU))),128))],8,Q$),[[lo,_.value.entreprise]])])):un("",!0),E("div",null,[ue[37]||(ue[37]=E("label",{for:"edit-salarie",class:"block text-sm font-medium text-gray-700"}," Salarie ",-1)),In(E("select",{id:"edit-salarie","onUpdate:modelValue":ue[11]||(ue[11]=Ce=>_.value.salarie=Ce),disabled:Wn(r).isAdmin&&!_.value.entreprise||M.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[ue[36]||(ue[36]=E("option",{value:null},"Sélectionner un salarie",-1)),($e(!0),qe(Rn,null,Br(R.value,Ce=>($e(),qe("option",{key:Ce.id,value:Ce.id},Wt(ae(Ce)),9,nU))),128))],8,tU),[[lo,_.value.salarie]]),Wn(r).isAdmin&&!_.value.entreprise?($e(),qe("p",rU," Veuillez d'abord sélectionner une entreprise ")):un("",!0)]),E("div",null,[ue[39]||(ue[39]=E("label",{for:"edit-visiteur",class:"block text-sm font-medium text-gray-700"}," Visiteur ",-1)),In(E("select",{id:"edit-visiteur","onUpdate:modelValue":ue[12]||(ue[12]=Ce=>_.value.visiteur=Ce),disabled:!_.value.salarie||M.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[ue[38]||(ue[38]=E("option",{value:null},"Sélectionner un visiteur",-1)),($e(!0),qe(Rn,null,Br(Z.value,Ce=>($e(),qe("option",{key:Ce.id,value:Ce.id},Wt(ae(Ce)),9,oU))),128))],8,iU),[[lo,_.value.visiteur]]),_.value.salarie?un("",!0):($e(),qe("p",sU," Veuillez d'abord sélectionner un salarie "))])])):un("",!0),D.value?($e(),qe("div",aU,[E("div",lU,[ue[40]||(ue[40]=E("div",{class:"flex-shrink-0"},[E("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),E("div",uU,[E("p",cU,Wt(D.value),1)])])])):un("",!0),E("div",fU,[E("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:ue[13]||(ue[13]=Ce=>d.value=!1)}," Annuler "),E("button",{type:"submit",disabled:M.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm disabled:opacity-50"},[M.value?($e(),qe("svg",dU,ue[41]||(ue[41]=[E("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),E("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):un("",!0),pi(" "+Wt(M.value?"Enregistrement...":"Enregistrer"),1)],8,hU)])],32)])])):un("",!0),g.value?($e(),Ua(jx,{key:3,title:"Supprimer le plan",message:"Êtes-vous sûr de vouloir supprimer ce plan ? Cette action est irréversible.",onConfirm:re,onCancel:we})):un("",!0)])])}}});var zx={exports:{}};const gU=Q5(yA);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Gb(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,r)}return t}function yc(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?Gb(Object(t),!0).forEach(function(r){mU(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Gb(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function qg(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?qg=function(n){return typeof n}:qg=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},qg(e)}function mU(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function yu(){return yu=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},yu.apply(this,arguments)}function vU(e,n){if(e==null)return{};var t={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(n.indexOf(i)>=0)&&(t[i]=e[i]);return t}function yU(e,n){if(e==null)return{};var t=vU(e,n),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(t[r]=e[r])}return t}function _U(e){return bU(e)||wU(e)||xU(e)||LU()}function bU(e){if(Array.isArray(e))return T1(e)}function wU(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xU(e,n){if(e){if(typeof e=="string")return T1(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return T1(e,n)}}function T1(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function LU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var SU="1.14.0";function zc(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var qc=zc(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Rp=zc(/Edge/i),qb=zc(/firefox/i),op=zc(/safari/i)&&!zc(/chrome/i)&&!zc(/android/i),$x=zc(/iP(ad|od|hone)/i),CU=zc(/chrome/i)&&zc(/android/i),Ux={capture:!1,passive:!1};function Ei(e,n,t){e.addEventListener(n,t,!qc&&Ux)}function yi(e,n,t){e.removeEventListener(n,t,!qc&&Ux)}function S0(e,n){if(n){if(n[0]===">"&&(n=n.substring(1)),e)try{if(e.matches)return e.matches(n);if(e.msMatchesSelector)return e.msMatchesSelector(n);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(n)}catch{return!1}return!1}}function EU(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Fu(e,n,t,r){if(e){t=t||document;do{if(n!=null&&(n[0]===">"?e.parentNode===t&&S0(e,n):S0(e,n))||r&&e===t)return e;if(e===t)break}while(e=EU(e))}return null}var Wb=/\s+/g;function Yo(e,n,t){if(e&&n)if(e.classList)e.classList[t?"add":"remove"](n);else{var r=(" "+e.className+" ").replace(Wb," ").replace(" "+n+" "," ");e.className=(r+(t?" "+n:"")).replace(Wb," ")}}function rr(e,n,t){var r=e&&e.style;if(r){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(t=e.currentStyle),n===void 0?t:t[n];!(n in r)&&n.indexOf("webkit")===-1&&(n="-webkit-"+n),r[n]=t+(typeof t=="string"?"":"px")}}function nh(e,n){var t="";if(typeof e=="string")t=e;else do{var r=rr(e,"transform");r&&r!=="none"&&(t=r+" "+t)}while(!n&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(t)}function Vx(e,n,t){if(e){var r=e.getElementsByTagName(n),i=0,s=r.length;if(t)for(;i<s;i++)t(r[i],i);return r}return[]}function gc(){var e=document.scrollingElement;return e||document.documentElement}function Oo(e,n,t,r,i){if(!(!e.getBoundingClientRect&&e!==window)){var s,o,u,f,d,g,y;if(e!==window&&e.parentNode&&e!==gc()?(s=e.getBoundingClientRect(),o=s.top,u=s.left,f=s.bottom,d=s.right,g=s.height,y=s.width):(o=0,u=0,f=window.innerHeight,d=window.innerWidth,g=window.innerHeight,y=window.innerWidth),(n||t)&&e!==window&&(i=i||e.parentNode,!qc))do if(i&&i.getBoundingClientRect&&(rr(i,"transform")!=="none"||t&&rr(i,"position")!=="static")){var x=i.getBoundingClientRect();o-=x.top+parseInt(rr(i,"border-top-width")),u-=x.left+parseInt(rr(i,"border-left-width")),f=o+s.height,d=u+s.width;break}while(i=i.parentNode);if(r&&e!==window){var _=nh(i||e),M=_&&_.a,D=_&&_.d;_&&(o/=D,u/=M,y/=M,g/=D,f=o+g,d=u+y)}return{top:o,left:u,bottom:f,right:d,width:y,height:g}}}function Zb(e,n,t){for(var r=vf(e,!0),i=Oo(e)[n];r;){var s=Oo(r)[t],o=void 0;if(o=i>=s,!o)return r;if(r===gc())break;r=vf(r,!1)}return!1}function ad(e,n,t,r){for(var i=0,s=0,o=e.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==Dr.ghost&&(r||o[s]!==Dr.dragged)&&Fu(o[s],t.draggable,e,!1)){if(i===n)return o[s];i++}s++}return null}function wy(e,n){for(var t=e.lastElementChild;t&&(t===Dr.ghost||rr(t,"display")==="none"||n&&!S0(t,n));)t=t.previousElementSibling;return t||null}function ls(e,n){var t=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==Dr.clone&&(!n||S0(e,n))&&t++;return t}function Kb(e){var n=0,t=0,r=gc();if(e)do{var i=nh(e),s=i.a,o=i.d;n+=e.scrollLeft*s,t+=e.scrollTop*o}while(e!==r&&(e=e.parentNode));return[n,t]}function PU(e,n){for(var t in e)if(e.hasOwnProperty(t)){for(var r in n)if(n.hasOwnProperty(r)&&n[r]===e[t][r])return Number(t)}return-1}function vf(e,n){if(!e||!e.getBoundingClientRect)return gc();var t=e,r=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var i=rr(t);if(t.clientWidth<t.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return gc();if(r||n)return t;r=!0}}while(t=t.parentNode);return gc()}function MU(e,n){if(e&&n)for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}function _v(e,n){return Math.round(e.top)===Math.round(n.top)&&Math.round(e.left)===Math.round(n.left)&&Math.round(e.height)===Math.round(n.height)&&Math.round(e.width)===Math.round(n.width)}var sp;function Hx(e,n){return function(){if(!sp){var t=arguments,r=this;t.length===1?e.call(r,t[0]):e.apply(r,t),sp=setTimeout(function(){sp=void 0},n)}}}function AU(){clearTimeout(sp),sp=void 0}function Gx(e,n,t){e.scrollLeft+=n,e.scrollTop+=t}function xy(e){var n=window.Polymer,t=window.jQuery||window.Zepto;return n&&n.dom?n.dom(e).cloneNode(!0):t?t(e).clone(!0)[0]:e.cloneNode(!0)}function Yb(e,n){rr(e,"position","absolute"),rr(e,"top",n.top),rr(e,"left",n.left),rr(e,"width",n.width),rr(e,"height",n.height)}function bv(e){rr(e,"position",""),rr(e,"top",""),rr(e,"left",""),rr(e,"width",""),rr(e,"height","")}var za="Sortable"+new Date().getTime();function kU(){var e=[],n;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(rr(i,"display")==="none"||i===Dr.ghost)){e.push({target:i,rect:Oo(i)});var s=yc({},e[e.length-1].rect);if(i.thisAnimationDuration){var o=nh(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){e.push(r)},removeAnimationState:function(r){e.splice(PU(e,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(n),typeof r=="function"&&r();return}var s=!1,o=0;e.forEach(function(u){var f=0,d=u.target,g=d.fromRect,y=Oo(d),x=d.prevFromRect,_=d.prevToRect,M=u.rect,D=nh(d,!0);D&&(y.top-=D.f,y.left-=D.e),d.toRect=y,d.thisAnimationDuration&&_v(x,y)&&!_v(g,y)&&(M.top-y.top)/(M.left-y.left)===(g.top-y.top)/(g.left-y.left)&&(f=DU(M,x,_,i.options)),_v(y,g)||(d.prevFromRect=g,d.prevToRect=y,f||(f=i.options.animation),i.animate(d,M,y,f)),f&&(s=!0,o=Math.max(o,f),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0,d.prevFromRect=null,d.fromRect=null,d.prevToRect=null,d.thisAnimationDuration=null},f),d.thisAnimationDuration=f)}),clearTimeout(n),s?n=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),e=[]},animate:function(r,i,s,o){if(o){rr(r,"transition",""),rr(r,"transform","");var u=nh(this.el),f=u&&u.a,d=u&&u.d,g=(i.left-s.left)/(f||1),y=(i.top-s.top)/(d||1);r.animatingX=!!g,r.animatingY=!!y,rr(r,"transform","translate3d("+g+"px,"+y+"px,0)"),this.forRepaintDummy=TU(r),rr(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),rr(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){rr(r,"transition",""),rr(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function TU(e){return e.offsetWidth}function DU(e,n,t,r){return Math.sqrt(Math.pow(n.top-e.top,2)+Math.pow(n.left-e.left,2))/Math.sqrt(Math.pow(n.top-t.top,2)+Math.pow(n.left-t.left,2))*r.animation}var Th=[],wv={initializeByDefault:!0},Fp={mount:function(n){for(var t in wv)wv.hasOwnProperty(t)&&!(t in n)&&(n[t]=wv[t]);Th.forEach(function(r){if(r.pluginName===n.pluginName)throw"Sortable: Cannot mount plugin ".concat(n.pluginName," more than once")}),Th.push(n)},pluginEvent:function(n,t,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=n+"Global";Th.forEach(function(o){t[o.pluginName]&&(t[o.pluginName][s]&&t[o.pluginName][s](yc({sortable:t},r)),t.options[o.pluginName]&&t[o.pluginName][n]&&t[o.pluginName][n](yc({sortable:t},r)))})},initializePlugins:function(n,t,r,i){Th.forEach(function(u){var f=u.pluginName;if(!(!n.options[f]&&!u.initializeByDefault)){var d=new u(n,t,n.options);d.sortable=n,d.options=n.options,n[f]=d,yu(r,d.defaults)}});for(var s in n.options)if(n.options.hasOwnProperty(s)){var o=this.modifyOption(n,s,n.options[s]);typeof o<"u"&&(n.options[s]=o)}},getEventProperties:function(n,t){var r={};return Th.forEach(function(i){typeof i.eventProperties=="function"&&yu(r,i.eventProperties.call(t[i.pluginName],n))}),r},modifyOption:function(n,t,r){var i;return Th.forEach(function(s){n[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[t]=="function"&&(i=s.optionListeners[t].call(n[s.pluginName],r))}),i}};function Ud(e){var n=e.sortable,t=e.rootEl,r=e.name,i=e.targetEl,s=e.cloneEl,o=e.toEl,u=e.fromEl,f=e.oldIndex,d=e.newIndex,g=e.oldDraggableIndex,y=e.newDraggableIndex,x=e.originalEvent,_=e.putSortable,M=e.extraEventProperties;if(n=n||t&&t[za],!!n){var D,N=n.options,O="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!qc&&!Rp?D=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(D=document.createEvent("Event"),D.initEvent(r,!0,!0)),D.to=o||t,D.from=u||t,D.item=i||t,D.clone=s,D.oldIndex=f,D.newIndex=d,D.oldDraggableIndex=g,D.newDraggableIndex=y,D.originalEvent=x,D.pullMode=_?_.lastPutMode:void 0;var F=yc(yc({},M),Fp.getEventProperties(r,n));for(var Y in F)D[Y]=F[Y];t&&t.dispatchEvent(D),N[O]&&N[O].call(n,D)}}var NU=["evt"],bl=function(n,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=yU(r,NU);Fp.pluginEvent.bind(Dr)(n,t,yc({dragEl:Bn,parentEl:os,ghostEl:ri,rootEl:Bo,nextEl:qf,lastDownEl:Wg,cloneEl:ss,cloneHidden:pf,dragStarted:Vd,putSortable:pa,activeSortable:Dr.active,originalEvent:i,oldIndex:Vh,oldDraggableIndex:ap,newIndex:Hl,newDraggableIndex:df,hideGhostForTarget:Kx,unhideGhostForTarget:Yx,cloneNowHidden:function(){pf=!0},cloneNowShown:function(){pf=!1},dispatchSortableEvent:function(u){Xa({sortable:t,name:u,originalEvent:i})}},s))};function Xa(e){Ud(yc({putSortable:pa,cloneEl:ss,targetEl:Bn,rootEl:Bo,oldIndex:Vh,oldDraggableIndex:ap,newIndex:Hl,newDraggableIndex:df},e))}var Bn,os,ri,Bo,qf,Wg,ss,pf,Vh,Hl,ap,df,Sg,pa,zh=!1,C0=!1,E0=[],Vf,Bu,xv,Lv,Jb,Xb,Vd,Dh,lp,up=!1,Cg=!1,Zg,Oa,Sv=[],D1=!1,P0=[],cm=typeof document<"u",Eg=$x,Qb=Rp||qc?"cssFloat":"float",BU=cm&&!CU&&!$x&&"draggable"in document.createElement("div"),qx=function(){if(cm){if(qc)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),Wx=function(n,t){var r=rr(n),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=ad(n,0,t),o=ad(n,1,t),u=s&&rr(s),f=o&&rr(o),d=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+Oo(s).width,g=f&&parseInt(f.marginLeft)+parseInt(f.marginRight)+Oo(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&u.float&&u.float!=="none"){var y=u.float==="left"?"left":"right";return o&&(f.clear==="both"||f.clear===y)?"vertical":"horizontal"}return s&&(u.display==="block"||u.display==="flex"||u.display==="table"||u.display==="grid"||d>=i&&r[Qb]==="none"||o&&r[Qb]==="none"&&d+g>i)?"vertical":"horizontal"},OU=function(n,t,r){var i=r?n.left:n.top,s=r?n.right:n.bottom,o=r?n.width:n.height,u=r?t.left:t.top,f=r?t.right:t.bottom,d=r?t.width:t.height;return i===u||s===f||i+o/2===u+d/2},IU=function(n,t){var r;return E0.some(function(i){var s=i[za].options.emptyInsertThreshold;if(!(!s||wy(i))){var o=Oo(i),u=n>=o.left-s&&n<=o.right+s,f=t>=o.top-s&&t<=o.bottom+s;if(u&&f)return r=i}}),r},Zx=function(n){function t(s,o){return function(u,f,d,g){var y=u.options.group.name&&f.options.group.name&&u.options.group.name===f.options.group.name;if(s==null&&(o||y))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return t(s(u,f,d,g),o)(u,f,d,g);var x=(o?u:f).options.group.name;return s===!0||typeof s=="string"&&s===x||s.join&&s.indexOf(x)>-1}}var r={},i=n.group;(!i||qg(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=t(i.pull,!0),r.checkPut=t(i.put),r.revertClone=i.revertClone,n.group=r},Kx=function(){!qx&&ri&&rr(ri,"display","none")},Yx=function(){!qx&&ri&&rr(ri,"display","")};cm&&document.addEventListener("click",function(e){if(C0)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),C0=!1,!1},!0);var Hf=function(n){if(Bn){n=n.touches?n.touches[0]:n;var t=IU(n.clientX,n.clientY);if(t){var r={};for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i]);r.target=r.rootEl=t,r.preventDefault=void 0,r.stopPropagation=void 0,t[za]._onDragOver(r)}}},RU=function(n){Bn&&Bn.parentNode[za]._isOutsideThisEl(n.target)};function Dr(e,n){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=n=yu({},n),e[za]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Wx(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,u){o.setData("Text",u.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Dr.supportPointer!==!1&&"PointerEvent"in window&&!op,emptyInsertThreshold:5};Fp.initializePlugins(this,e,t);for(var r in t)!(r in n)&&(n[r]=t[r]);Zx(n);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=n.forceFallback?!1:BU,this.nativeDraggable&&(this.options.touchStartThreshold=1),n.supportPointer?Ei(e,"pointerdown",this._onTapStart):(Ei(e,"mousedown",this._onTapStart),Ei(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ei(e,"dragover",this),Ei(e,"dragenter",this)),E0.push(this.el),n.store&&n.store.get&&this.sort(n.store.get(this)||[]),yu(this,kU())}Dr.prototype={constructor:Dr,_isOutsideThisEl:function(n){!this.el.contains(n)&&n!==this.el&&(Dh=null)},_getDirection:function(n,t){return typeof this.options.direction=="function"?this.options.direction.call(this,n,t,Bn):this.options.direction},_onTapStart:function(n){if(n.cancelable){var t=this,r=this.el,i=this.options,s=i.preventOnFilter,o=n.type,u=n.touches&&n.touches[0]||n.pointerType&&n.pointerType==="touch"&&n,f=(u||n).target,d=n.target.shadowRoot&&(n.path&&n.path[0]||n.composedPath&&n.composedPath()[0])||f,g=i.filter;if(GU(r),!Bn&&!(/mousedown|pointerdown/.test(o)&&n.button!==0||i.disabled)&&!d.isContentEditable&&!(!this.nativeDraggable&&op&&f&&f.tagName.toUpperCase()==="SELECT")&&(f=Fu(f,i.draggable,r,!1),!(f&&f.animated)&&Wg!==f)){if(Vh=ls(f),ap=ls(f,i.draggable),typeof g=="function"){if(g.call(this,n,f,this)){Xa({sortable:t,rootEl:d,name:"filter",targetEl:f,toEl:r,fromEl:r}),bl("filter",t,{evt:n}),s&&n.cancelable&&n.preventDefault();return}}else if(g&&(g=g.split(",").some(function(y){if(y=Fu(d,y.trim(),r,!1),y)return Xa({sortable:t,rootEl:y,name:"filter",targetEl:f,fromEl:r,toEl:r}),bl("filter",t,{evt:n}),!0}),g)){s&&n.cancelable&&n.preventDefault();return}i.handle&&!Fu(d,i.handle,r,!1)||this._prepareDragStart(n,u,f)}}},_prepareDragStart:function(n,t,r){var i=this,s=i.el,o=i.options,u=s.ownerDocument,f;if(r&&!Bn&&r.parentNode===s){var d=Oo(r);if(Bo=s,Bn=r,os=Bn.parentNode,qf=Bn.nextSibling,Wg=r,Sg=o.group,Dr.dragged=Bn,Vf={target:Bn,clientX:(t||n).clientX,clientY:(t||n).clientY},Jb=Vf.clientX-d.left,Xb=Vf.clientY-d.top,this._lastX=(t||n).clientX,this._lastY=(t||n).clientY,Bn.style["will-change"]="all",f=function(){if(bl("delayEnded",i,{evt:n}),Dr.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!qb&&i.nativeDraggable&&(Bn.draggable=!0),i._triggerDragStart(n,t),Xa({sortable:i,name:"choose",originalEvent:n}),Yo(Bn,o.chosenClass,!0)},o.ignore.split(",").forEach(function(g){Vx(Bn,g.trim(),Cv)}),Ei(u,"dragover",Hf),Ei(u,"mousemove",Hf),Ei(u,"touchmove",Hf),Ei(u,"mouseup",i._onDrop),Ei(u,"touchend",i._onDrop),Ei(u,"touchcancel",i._onDrop),qb&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Bn.draggable=!0),bl("delayStart",this,{evt:n}),o.delay&&(!o.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Rp||qc))){if(Dr.eventCanceled){this._onDrop();return}Ei(u,"mouseup",i._disableDelayedDrag),Ei(u,"touchend",i._disableDelayedDrag),Ei(u,"touchcancel",i._disableDelayedDrag),Ei(u,"mousemove",i._delayedDragTouchMoveHandler),Ei(u,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&Ei(u,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(f,o.delay)}else f()}},_delayedDragTouchMoveHandler:function(n){var t=n.touches?n.touches[0]:n;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Bn&&Cv(Bn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var n=this.el.ownerDocument;yi(n,"mouseup",this._disableDelayedDrag),yi(n,"touchend",this._disableDelayedDrag),yi(n,"touchcancel",this._disableDelayedDrag),yi(n,"mousemove",this._delayedDragTouchMoveHandler),yi(n,"touchmove",this._delayedDragTouchMoveHandler),yi(n,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(n,t){t=t||n.pointerType=="touch"&&n,!this.nativeDraggable||t?this.options.supportPointer?Ei(document,"pointermove",this._onTouchMove):t?Ei(document,"touchmove",this._onTouchMove):Ei(document,"mousemove",this._onTouchMove):(Ei(Bn,"dragend",this),Ei(Bo,"dragstart",this._onDragStart));try{document.selection?Kg(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(n,t){if(zh=!1,Bo&&Bn){bl("dragStarted",this,{evt:t}),this.nativeDraggable&&Ei(document,"dragover",RU);var r=this.options;!n&&Yo(Bn,r.dragClass,!1),Yo(Bn,r.ghostClass,!0),Dr.active=this,n&&this._appendGhost(),Xa({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Bu){this._lastX=Bu.clientX,this._lastY=Bu.clientY,Kx();for(var n=document.elementFromPoint(Bu.clientX,Bu.clientY),t=n;n&&n.shadowRoot&&(n=n.shadowRoot.elementFromPoint(Bu.clientX,Bu.clientY),n!==t);)t=n;if(Bn.parentNode[za]._isOutsideThisEl(n),t)do{if(t[za]){var r=void 0;if(r=t[za]._onDragOver({clientX:Bu.clientX,clientY:Bu.clientY,target:n,rootEl:t}),r&&!this.options.dragoverBubble)break}n=t}while(t=t.parentNode);Yx()}},_onTouchMove:function(n){if(Vf){var t=this.options,r=t.fallbackTolerance,i=t.fallbackOffset,s=n.touches?n.touches[0]:n,o=ri&&nh(ri,!0),u=ri&&o&&o.a,f=ri&&o&&o.d,d=Eg&&Oa&&Kb(Oa),g=(s.clientX-Vf.clientX+i.x)/(u||1)+(d?d[0]-Sv[0]:0)/(u||1),y=(s.clientY-Vf.clientY+i.y)/(f||1)+(d?d[1]-Sv[1]:0)/(f||1);if(!Dr.active&&!zh){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(n,!0)}if(ri){o?(o.e+=g-(xv||0),o.f+=y-(Lv||0)):o={a:1,b:0,c:0,d:1,e:g,f:y};var x="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");rr(ri,"webkitTransform",x),rr(ri,"mozTransform",x),rr(ri,"msTransform",x),rr(ri,"transform",x),xv=g,Lv=y,Bu=s}n.cancelable&&n.preventDefault()}},_appendGhost:function(){if(!ri){var n=this.options.fallbackOnBody?document.body:Bo,t=Oo(Bn,!0,Eg,!0,n),r=this.options;if(Eg){for(Oa=n;rr(Oa,"position")==="static"&&rr(Oa,"transform")==="none"&&Oa!==document;)Oa=Oa.parentNode;Oa!==document.body&&Oa!==document.documentElement?(Oa===document&&(Oa=gc()),t.top+=Oa.scrollTop,t.left+=Oa.scrollLeft):Oa=gc(),Sv=Kb(Oa)}ri=Bn.cloneNode(!0),Yo(ri,r.ghostClass,!1),Yo(ri,r.fallbackClass,!0),Yo(ri,r.dragClass,!0),rr(ri,"transition",""),rr(ri,"transform",""),rr(ri,"box-sizing","border-box"),rr(ri,"margin",0),rr(ri,"top",t.top),rr(ri,"left",t.left),rr(ri,"width",t.width),rr(ri,"height",t.height),rr(ri,"opacity","0.8"),rr(ri,"position",Eg?"absolute":"fixed"),rr(ri,"zIndex","100000"),rr(ri,"pointerEvents","none"),Dr.ghost=ri,n.appendChild(ri),rr(ri,"transform-origin",Jb/parseInt(ri.style.width)*100+"% "+Xb/parseInt(ri.style.height)*100+"%")}},_onDragStart:function(n,t){var r=this,i=n.dataTransfer,s=r.options;if(bl("dragStart",this,{evt:n}),Dr.eventCanceled){this._onDrop();return}bl("setupClone",this),Dr.eventCanceled||(ss=xy(Bn),ss.draggable=!1,ss.style["will-change"]="",this._hideClone(),Yo(ss,this.options.chosenClass,!1),Dr.clone=ss),r.cloneId=Kg(function(){bl("clone",r),!Dr.eventCanceled&&(r.options.removeCloneOnHide||Bo.insertBefore(ss,Bn),r._hideClone(),Xa({sortable:r,name:"clone"}))}),!t&&Yo(Bn,s.dragClass,!0),t?(C0=!0,r._loopId=setInterval(r._emulateDragOver,50)):(yi(document,"mouseup",r._onDrop),yi(document,"touchend",r._onDrop),yi(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,Bn)),Ei(document,"drop",r),rr(Bn,"transform","translateZ(0)")),zh=!0,r._dragStartId=Kg(r._dragStarted.bind(r,t,n)),Ei(document,"selectstart",r),Vd=!0,op&&rr(document.body,"user-select","none")},_onDragOver:function(n){var t=this.el,r=n.target,i,s,o,u=this.options,f=u.group,d=Dr.active,g=Sg===f,y=u.sort,x=pa||d,_,M=this,D=!1;if(D1)return;function N(re,we){bl(re,M,yc({evt:n,isOwner:g,axis:_?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:y,fromSortable:x,target:r,completed:F,onMove:function(Ie,A){return Pg(Bo,t,Bn,i,Ie,Oo(Ie),n,A)},changed:Y},we))}function O(){N("dragOverAnimationCapture"),M.captureAnimationState(),M!==x&&x.captureAnimationState()}function F(re){return N("dragOverCompleted",{insertion:re}),re&&(g?d._hideClone():d._showClone(M),M!==x&&(Yo(Bn,pa?pa.options.ghostClass:d.options.ghostClass,!1),Yo(Bn,u.ghostClass,!0)),pa!==M&&M!==Dr.active?pa=M:M===Dr.active&&pa&&(pa=null),x===M&&(M._ignoreWhileAnimating=r),M.animateAll(function(){N("dragOverAnimationComplete"),M._ignoreWhileAnimating=null}),M!==x&&(x.animateAll(),x._ignoreWhileAnimating=null)),(r===Bn&&!Bn.animated||r===t&&!r.animated)&&(Dh=null),!u.dragoverBubble&&!n.rootEl&&r!==document&&(Bn.parentNode[za]._isOutsideThisEl(n.target),!re&&Hf(n)),!u.dragoverBubble&&n.stopPropagation&&n.stopPropagation(),D=!0}function Y(){Hl=ls(Bn),df=ls(Bn,u.draggable),Xa({sortable:M,name:"change",toEl:t,newIndex:Hl,newDraggableIndex:df,originalEvent:n})}if(n.preventDefault!==void 0&&n.cancelable&&n.preventDefault(),r=Fu(r,u.draggable,t,!0),N("dragOver"),Dr.eventCanceled)return D;if(Bn.contains(n.target)||r.animated&&r.animatingX&&r.animatingY||M._ignoreWhileAnimating===r)return F(!1);if(C0=!1,d&&!u.disabled&&(g?y||(o=os!==Bo):pa===this||(this.lastPutMode=Sg.checkPull(this,d,Bn,n))&&f.checkPut(this,d,Bn,n))){if(_=this._getDirection(n,r)==="vertical",i=Oo(Bn),N("dragOverValid"),Dr.eventCanceled)return D;if(o)return os=Bo,O(),this._hideClone(),N("revert"),Dr.eventCanceled||(qf?Bo.insertBefore(Bn,qf):Bo.appendChild(Bn)),F(!0);var Q=wy(t,u.draggable);if(!Q||$U(n,_,this)&&!Q.animated){if(Q===Bn)return F(!1);if(Q&&t===n.target&&(r=Q),r&&(s=Oo(r)),Pg(Bo,t,Bn,i,r,s,n,!!r)!==!1)return O(),t.appendChild(Bn),os=t,Y(),F(!0)}else if(Q&&zU(n,_,this)){var le=ad(t,0,u,!0);if(le===Bn)return F(!1);if(r=le,s=Oo(r),Pg(Bo,t,Bn,i,r,s,n,!1)!==!1)return O(),t.insertBefore(Bn,le),os=t,Y(),F(!0)}else if(r.parentNode===t){s=Oo(r);var ce=0,xe,G=Bn.parentNode!==t,R=!OU(Bn.animated&&Bn.toRect||i,r.animated&&r.toRect||s,_),Z=_?"top":"left",z=Zb(r,"top","top")||Zb(Bn,"top","top"),I=z?z.scrollTop:void 0;Dh!==r&&(xe=s[Z],up=!1,Cg=!R&&u.invertSwap||G),ce=UU(n,r,s,_,R?1:u.swapThreshold,u.invertedSwapThreshold==null?u.swapThreshold:u.invertedSwapThreshold,Cg,Dh===r);var $;if(ce!==0){var U=ls(Bn);do U-=ce,$=os.children[U];while($&&(rr($,"display")==="none"||$===ri))}if(ce===0||$===r)return F(!1);Dh=r,lp=ce;var W=r.nextElementSibling,q=!1;q=ce===1;var ie=Pg(Bo,t,Bn,i,r,s,n,q);if(ie!==!1)return(ie===1||ie===-1)&&(q=ie===1),D1=!0,setTimeout(jU,30),O(),q&&!W?t.appendChild(Bn):r.parentNode.insertBefore(Bn,q?W:r),z&&Gx(z,0,I-z.scrollTop),os=Bn.parentNode,xe!==void 0&&!Cg&&(Zg=Math.abs(xe-Oo(r)[Z])),Y(),F(!0)}if(t.contains(Bn))return F(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){yi(document,"mousemove",this._onTouchMove),yi(document,"touchmove",this._onTouchMove),yi(document,"pointermove",this._onTouchMove),yi(document,"dragover",Hf),yi(document,"mousemove",Hf),yi(document,"touchmove",Hf)},_offUpEvents:function(){var n=this.el.ownerDocument;yi(n,"mouseup",this._onDrop),yi(n,"touchend",this._onDrop),yi(n,"pointerup",this._onDrop),yi(n,"touchcancel",this._onDrop),yi(document,"selectstart",this)},_onDrop:function(n){var t=this.el,r=this.options;if(Hl=ls(Bn),df=ls(Bn,r.draggable),bl("drop",this,{evt:n}),os=Bn&&Bn.parentNode,Hl=ls(Bn),df=ls(Bn,r.draggable),Dr.eventCanceled){this._nulling();return}zh=!1,Cg=!1,up=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),N1(this.cloneId),N1(this._dragStartId),this.nativeDraggable&&(yi(document,"drop",this),yi(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),op&&rr(document.body,"user-select",""),rr(Bn,"transform",""),n&&(Vd&&(n.cancelable&&n.preventDefault(),!r.dropBubble&&n.stopPropagation()),ri&&ri.parentNode&&ri.parentNode.removeChild(ri),(Bo===os||pa&&pa.lastPutMode!=="clone")&&ss&&ss.parentNode&&ss.parentNode.removeChild(ss),Bn&&(this.nativeDraggable&&yi(Bn,"dragend",this),Cv(Bn),Bn.style["will-change"]="",Vd&&!zh&&Yo(Bn,pa?pa.options.ghostClass:this.options.ghostClass,!1),Yo(Bn,this.options.chosenClass,!1),Xa({sortable:this,name:"unchoose",toEl:os,newIndex:null,newDraggableIndex:null,originalEvent:n}),Bo!==os?(Hl>=0&&(Xa({rootEl:os,name:"add",toEl:os,fromEl:Bo,originalEvent:n}),Xa({sortable:this,name:"remove",toEl:os,originalEvent:n}),Xa({rootEl:os,name:"sort",toEl:os,fromEl:Bo,originalEvent:n}),Xa({sortable:this,name:"sort",toEl:os,originalEvent:n})),pa&&pa.save()):Hl!==Vh&&Hl>=0&&(Xa({sortable:this,name:"update",toEl:os,originalEvent:n}),Xa({sortable:this,name:"sort",toEl:os,originalEvent:n})),Dr.active&&((Hl==null||Hl===-1)&&(Hl=Vh,df=ap),Xa({sortable:this,name:"end",toEl:os,originalEvent:n}),this.save()))),this._nulling()},_nulling:function(){bl("nulling",this),Bo=Bn=os=ri=qf=ss=Wg=pf=Vf=Bu=Vd=Hl=df=Vh=ap=Dh=lp=pa=Sg=Dr.dragged=Dr.ghost=Dr.clone=Dr.active=null,P0.forEach(function(n){n.checked=!0}),P0.length=xv=Lv=0},handleEvent:function(n){switch(n.type){case"drop":case"dragend":this._onDrop(n);break;case"dragenter":case"dragover":Bn&&(this._onDragOver(n),FU(n));break;case"selectstart":n.preventDefault();break}},toArray:function(){for(var n=[],t,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)t=r[i],Fu(t,o.draggable,this.el,!1)&&n.push(t.getAttribute(o.dataIdAttr)||HU(t));return n},sort:function(n,t){var r={},i=this.el;this.toArray().forEach(function(s,o){var u=i.children[o];Fu(u,this.options.draggable,i,!1)&&(r[s]=u)},this),t&&this.captureAnimationState(),n.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),t&&this.animateAll()},save:function(){var n=this.options.store;n&&n.set&&n.set(this)},closest:function(n,t){return Fu(n,t||this.options.draggable,this.el,!1)},option:function(n,t){var r=this.options;if(t===void 0)return r[n];var i=Fp.modifyOption(this,n,t);typeof i<"u"?r[n]=i:r[n]=t,n==="group"&&Zx(r)},destroy:function(){bl("destroy",this);var n=this.el;n[za]=null,yi(n,"mousedown",this._onTapStart),yi(n,"touchstart",this._onTapStart),yi(n,"pointerdown",this._onTapStart),this.nativeDraggable&&(yi(n,"dragover",this),yi(n,"dragenter",this)),Array.prototype.forEach.call(n.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),E0.splice(E0.indexOf(this.el),1),this.el=n=null},_hideClone:function(){if(!pf){if(bl("hideClone",this),Dr.eventCanceled)return;rr(ss,"display","none"),this.options.removeCloneOnHide&&ss.parentNode&&ss.parentNode.removeChild(ss),pf=!0}},_showClone:function(n){if(n.lastPutMode!=="clone"){this._hideClone();return}if(pf){if(bl("showClone",this),Dr.eventCanceled)return;Bn.parentNode==Bo&&!this.options.group.revertClone?Bo.insertBefore(ss,Bn):qf?Bo.insertBefore(ss,qf):Bo.appendChild(ss),this.options.group.revertClone&&this.animate(Bn,ss),rr(ss,"display",""),pf=!1}}};function FU(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Pg(e,n,t,r,i,s,o,u){var f,d=e[za],g=d.options.onMove,y;return window.CustomEvent&&!qc&&!Rp?f=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(f=document.createEvent("Event"),f.initEvent("move",!0,!0)),f.to=n,f.from=e,f.dragged=t,f.draggedRect=r,f.related=i||n,f.relatedRect=s||Oo(n),f.willInsertAfter=u,f.originalEvent=o,e.dispatchEvent(f),g&&(y=g.call(d,f,o)),y}function Cv(e){e.draggable=!1}function jU(){D1=!1}function zU(e,n,t){var r=Oo(ad(t.el,0,t.options,!0)),i=10;return n?e.clientX<r.left-i||e.clientY<r.top&&e.clientX<r.right:e.clientY<r.top-i||e.clientY<r.bottom&&e.clientX<r.left}function $U(e,n,t){var r=Oo(wy(t.el,t.options.draggable)),i=10;return n?e.clientX>r.right+i||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+i}function UU(e,n,t,r,i,s,o,u){var f=r?e.clientY:e.clientX,d=r?t.height:t.width,g=r?t.top:t.left,y=r?t.bottom:t.right,x=!1;if(!o){if(u&&Zg<d*i){if(!up&&(lp===1?f>g+d*s/2:f<y-d*s/2)&&(up=!0),up)x=!0;else if(lp===1?f<g+Zg:f>y-Zg)return-lp}else if(f>g+d*(1-i)/2&&f<y-d*(1-i)/2)return VU(n)}return x=x||o,x&&(f<g+d*s/2||f>y-d*s/2)?f>g+d/2?1:-1:0}function VU(e){return ls(Bn)<ls(e)?1:-1}function HU(e){for(var n=e.tagName+e.className+e.src+e.href+e.textContent,t=n.length,r=0;t--;)r+=n.charCodeAt(t);return r.toString(36)}function GU(e){P0.length=0;for(var n=e.getElementsByTagName("input"),t=n.length;t--;){var r=n[t];r.checked&&P0.push(r)}}function Kg(e){return setTimeout(e,0)}function N1(e){return clearTimeout(e)}cm&&Ei(document,"touchmove",function(e){(Dr.active||zh)&&e.cancelable&&e.preventDefault()});Dr.utils={on:Ei,off:yi,css:rr,find:Vx,is:function(n,t){return!!Fu(n,t,n,!1)},extend:MU,throttle:Hx,closest:Fu,toggleClass:Yo,clone:xy,index:ls,nextTick:Kg,cancelNextTick:N1,detectDirection:Wx,getChild:ad};Dr.get=function(e){return e[za]};Dr.mount=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];n[0].constructor===Array&&(n=n[0]),n.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Dr.utils=yc(yc({},Dr.utils),r.utils)),Fp.mount(r)})};Dr.create=function(e,n){return new Dr(e,n)};Dr.version=SU;var ks=[],Hd,B1,O1=!1,Ev,Pv,M0,Gd;function qU(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this))}return e.prototype={dragStarted:function(t){var r=t.originalEvent;this.sortable.nativeDraggable?Ei(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ei(document,"pointermove",this._handleFallbackAutoScroll):r.touches?Ei(document,"touchmove",this._handleFallbackAutoScroll):Ei(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var r=t.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?yi(document,"dragover",this._handleAutoScroll):(yi(document,"pointermove",this._handleFallbackAutoScroll),yi(document,"touchmove",this._handleFallbackAutoScroll),yi(document,"mousemove",this._handleFallbackAutoScroll)),ew(),Yg(),AU()},nulling:function(){M0=B1=Hd=O1=Gd=Ev=Pv=null,ks.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,r){var i=this,s=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,u=document.elementFromPoint(s,o);if(M0=t,r||this.options.forceAutoScrollFallback||Rp||qc||op){Mv(t,this.options,u,r);var f=vf(u,!0);O1&&(!Gd||s!==Ev||o!==Pv)&&(Gd&&ew(),Gd=setInterval(function(){var d=vf(document.elementFromPoint(s,o),!0);d!==f&&(f=d,Yg()),Mv(t,i.options,d,r)},10),Ev=s,Pv=o)}else{if(!this.options.bubbleScroll||vf(u,!0)===gc()){Yg();return}Mv(t,this.options,vf(u,!1),!1)}}},yu(e,{pluginName:"scroll",initializeByDefault:!0})}function Yg(){ks.forEach(function(e){clearInterval(e.pid)}),ks=[]}function ew(){clearInterval(Gd)}var Mv=Hx(function(e,n,t,r){if(n.scroll){var i=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,o=n.scrollSensitivity,u=n.scrollSpeed,f=gc(),d=!1,g;B1!==t&&(B1=t,Yg(),Hd=n.scroll,g=n.scrollFn,Hd===!0&&(Hd=vf(t,!0)));var y=0,x=Hd;do{var _=x,M=Oo(_),D=M.top,N=M.bottom,O=M.left,F=M.right,Y=M.width,Q=M.height,le=void 0,ce=void 0,xe=_.scrollWidth,G=_.scrollHeight,R=rr(_),Z=_.scrollLeft,z=_.scrollTop;_===f?(le=Y<xe&&(R.overflowX==="auto"||R.overflowX==="scroll"||R.overflowX==="visible"),ce=Q<G&&(R.overflowY==="auto"||R.overflowY==="scroll"||R.overflowY==="visible")):(le=Y<xe&&(R.overflowX==="auto"||R.overflowX==="scroll"),ce=Q<G&&(R.overflowY==="auto"||R.overflowY==="scroll"));var I=le&&(Math.abs(F-i)<=o&&Z+Y<xe)-(Math.abs(O-i)<=o&&!!Z),$=ce&&(Math.abs(N-s)<=o&&z+Q<G)-(Math.abs(D-s)<=o&&!!z);if(!ks[y])for(var U=0;U<=y;U++)ks[U]||(ks[U]={});(ks[y].vx!=I||ks[y].vy!=$||ks[y].el!==_)&&(ks[y].el=_,ks[y].vx=I,ks[y].vy=$,clearInterval(ks[y].pid),(I!=0||$!=0)&&(d=!0,ks[y].pid=setInterval((function(){r&&this.layer===0&&Dr.active._onTouchMove(M0);var W=ks[this.layer].vy?ks[this.layer].vy*u:0,q=ks[this.layer].vx?ks[this.layer].vx*u:0;typeof g=="function"&&g.call(Dr.dragged.parentNode[za],q,W,e,M0,ks[this.layer].el)!=="continue"||Gx(ks[this.layer].el,q,W)}).bind({layer:y}),24))),y++}while(n.bubbleScroll&&x!==f&&(x=vf(x,!1)));O1=d}},30),Jx=function(n){var t=n.originalEvent,r=n.putSortable,i=n.dragEl,s=n.activeSortable,o=n.dispatchSortableEvent,u=n.hideGhostForTarget,f=n.unhideGhostForTarget;if(t){var d=r||s;u();var g=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,y=document.elementFromPoint(g.clientX,g.clientY);f(),d&&!d.el.contains(y)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function Ly(){}Ly.prototype={startIndex:null,dragStart:function(n){var t=n.oldDraggableIndex;this.startIndex=t},onSpill:function(n){var t=n.dragEl,r=n.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=ad(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),r&&r.animateAll()},drop:Jx};yu(Ly,{pluginName:"revertOnSpill"});function Sy(){}Sy.prototype={onSpill:function(n){var t=n.dragEl,r=n.putSortable,i=r||this.sortable;i.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),i.animateAll()},drop:Jx};yu(Sy,{pluginName:"removeOnSpill"});var cu;function WU(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(t){var r=t.dragEl;cu=r},dragOverValid:function(t){var r=t.completed,i=t.target,s=t.onMove,o=t.activeSortable,u=t.changed,f=t.cancel;if(o.options.swap){var d=this.sortable.el,g=this.options;if(i&&i!==d){var y=cu;s(i)!==!1?(Yo(i,g.swapClass,!0),cu=i):cu=null,y&&y!==cu&&Yo(y,g.swapClass,!1)}u(),r(!0),f()}},drop:function(t){var r=t.activeSortable,i=t.putSortable,s=t.dragEl,o=i||this.sortable,u=this.options;cu&&Yo(cu,u.swapClass,!1),cu&&(u.swap||i&&i.options.swap)&&s!==cu&&(o.captureAnimationState(),o!==r&&r.captureAnimationState(),ZU(s,cu),o.animateAll(),o!==r&&r.animateAll())},nulling:function(){cu=null}},yu(e,{pluginName:"swap",eventProperties:function(){return{swapItem:cu}}})}function ZU(e,n){var t=e.parentNode,r=n.parentNode,i,s;!t||!r||t.isEqualNode(n)||r.isEqualNode(e)||(i=ls(e),s=ls(n),t.isEqualNode(r)&&i<s&&s++,t.insertBefore(n,t.children[i]),r.insertBefore(e,r.children[s]))}var qr=[],Vl=[],Nd,Ou,Bd=!1,wl=!1,Nh=!1,mo,Od,Mg;function KU(){function e(n){for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this));n.options.supportPointer?Ei(document,"pointerup",this._deselectMultiDrag):(Ei(document,"mouseup",this._deselectMultiDrag),Ei(document,"touchend",this._deselectMultiDrag)),Ei(document,"keydown",this._checkKeyDown),Ei(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(i,s){var o="";qr.length&&Ou===n?qr.forEach(function(u,f){o+=(f?", ":"")+u.textContent}):o=s.textContent,i.setData("Text",o)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){var r=t.dragEl;mo=r},delayEnded:function(){this.isMultiDrag=~qr.indexOf(mo)},setupClone:function(t){var r=t.sortable,i=t.cancel;if(this.isMultiDrag){for(var s=0;s<qr.length;s++)Vl.push(xy(qr[s])),Vl[s].sortableIndex=qr[s].sortableIndex,Vl[s].draggable=!1,Vl[s].style["will-change"]="",Yo(Vl[s],this.options.selectedClass,!1),qr[s]===mo&&Yo(Vl[s],this.options.chosenClass,!1);r._hideClone(),i()}},clone:function(t){var r=t.sortable,i=t.rootEl,s=t.dispatchSortableEvent,o=t.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||qr.length&&Ou===r&&(tw(!0,i),s("clone"),o()))},showClone:function(t){var r=t.cloneNowShown,i=t.rootEl,s=t.cancel;this.isMultiDrag&&(tw(!1,i),Vl.forEach(function(o){rr(o,"display","")}),r(),Mg=!1,s())},hideClone:function(t){var r=this;t.sortable;var i=t.cloneNowHidden,s=t.cancel;this.isMultiDrag&&(Vl.forEach(function(o){rr(o,"display","none"),r.options.removeCloneOnHide&&o.parentNode&&o.parentNode.removeChild(o)}),i(),Mg=!0,s())},dragStartGlobal:function(t){t.sortable,!this.isMultiDrag&&Ou&&Ou.multiDrag._deselectMultiDrag(),qr.forEach(function(r){r.sortableIndex=ls(r)}),qr=qr.sort(function(r,i){return r.sortableIndex-i.sortableIndex}),Nh=!0},dragStarted:function(t){var r=this,i=t.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){qr.forEach(function(o){o!==mo&&rr(o,"position","absolute")});var s=Oo(mo,!1,!0,!0);qr.forEach(function(o){o!==mo&&Yb(o,s)}),wl=!0,Bd=!0}i.animateAll(function(){wl=!1,Bd=!1,r.options.animation&&qr.forEach(function(o){bv(o)}),r.options.sort&&Ag()})}},dragOver:function(t){var r=t.target,i=t.completed,s=t.cancel;wl&&~qr.indexOf(r)&&(i(!1),s())},revert:function(t){var r=t.fromSortable,i=t.rootEl,s=t.sortable,o=t.dragRect;qr.length>1&&(qr.forEach(function(u){s.addAnimationState({target:u,rect:wl?Oo(u):o}),bv(u),u.fromRect=o,r.removeAnimationState(u)}),wl=!1,YU(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(t){var r=t.sortable,i=t.isOwner,s=t.insertion,o=t.activeSortable,u=t.parentEl,f=t.putSortable,d=this.options;if(s){if(i&&o._hideClone(),Bd=!1,d.animation&&qr.length>1&&(wl||!i&&!o.options.sort&&!f)){var g=Oo(mo,!1,!0,!0);qr.forEach(function(x){x!==mo&&(Yb(x,g),u.appendChild(x))}),wl=!0}if(!i)if(wl||Ag(),qr.length>1){var y=Mg;o._showClone(r),o.options.animation&&!Mg&&y&&Vl.forEach(function(x){o.addAnimationState({target:x,rect:Od}),x.fromRect=Od,x.thisAnimationDuration=null})}else o._showClone(r)}},dragOverAnimationCapture:function(t){var r=t.dragRect,i=t.isOwner,s=t.activeSortable;if(qr.forEach(function(u){u.thisAnimationDuration=null}),s.options.animation&&!i&&s.multiDrag.isMultiDrag){Od=yu({},r);var o=nh(mo,!0);Od.top-=o.f,Od.left-=o.e}},dragOverAnimationComplete:function(){wl&&(wl=!1,Ag())},drop:function(t){var r=t.originalEvent,i=t.rootEl,s=t.parentEl,o=t.sortable,u=t.dispatchSortableEvent,f=t.oldIndex,d=t.putSortable,g=d||this.sortable;if(r){var y=this.options,x=s.children;if(!Nh)if(y.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Yo(mo,y.selectedClass,!~qr.indexOf(mo)),~qr.indexOf(mo))qr.splice(qr.indexOf(mo),1),Nd=null,Ud({sortable:o,rootEl:i,name:"deselect",targetEl:mo});else{if(qr.push(mo),Ud({sortable:o,rootEl:i,name:"select",targetEl:mo}),r.shiftKey&&Nd&&o.el.contains(Nd)){var _=ls(Nd),M=ls(mo);if(~_&&~M&&_!==M){var D,N;for(M>_?(N=_,D=M):(N=M,D=_+1);N<D;N++)~qr.indexOf(x[N])||(Yo(x[N],y.selectedClass,!0),qr.push(x[N]),Ud({sortable:o,rootEl:i,name:"select",targetEl:x[N]}))}}else Nd=mo;Ou=g}if(Nh&&this.isMultiDrag){if(wl=!1,(s[za].options.sort||s!==i)&&qr.length>1){var O=Oo(mo),F=ls(mo,":not(."+this.options.selectedClass+")");if(!Bd&&y.animation&&(mo.thisAnimationDuration=null),g.captureAnimationState(),!Bd&&(y.animation&&(mo.fromRect=O,qr.forEach(function(Q){if(Q.thisAnimationDuration=null,Q!==mo){var le=wl?Oo(Q):O;Q.fromRect=le,g.addAnimationState({target:Q,rect:le})}})),Ag(),qr.forEach(function(Q){x[F]?s.insertBefore(Q,x[F]):s.appendChild(Q),F++}),f===ls(mo))){var Y=!1;qr.forEach(function(Q){if(Q.sortableIndex!==ls(Q)){Y=!0;return}}),Y&&u("update")}qr.forEach(function(Q){bv(Q)}),g.animateAll()}Ou=g}(i===s||d&&d.lastPutMode!=="clone")&&Vl.forEach(function(Q){Q.parentNode&&Q.parentNode.removeChild(Q)})}},nullingGlobal:function(){this.isMultiDrag=Nh=!1,Vl.length=0},destroyGlobal:function(){this._deselectMultiDrag(),yi(document,"pointerup",this._deselectMultiDrag),yi(document,"mouseup",this._deselectMultiDrag),yi(document,"touchend",this._deselectMultiDrag),yi(document,"keydown",this._checkKeyDown),yi(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(!(typeof Nh<"u"&&Nh)&&Ou===this.sortable&&!(t&&Fu(t.target,this.options.draggable,this.sortable.el,!1))&&!(t&&t.button!==0))for(;qr.length;){var r=qr[0];Yo(r,this.options.selectedClass,!1),qr.shift(),Ud({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},yu(e,{pluginName:"multiDrag",utils:{select:function(t){var r=t.parentNode[za];!r||!r.options.multiDrag||~qr.indexOf(t)||(Ou&&Ou!==r&&(Ou.multiDrag._deselectMultiDrag(),Ou=r),Yo(t,r.options.selectedClass,!0),qr.push(t))},deselect:function(t){var r=t.parentNode[za],i=qr.indexOf(t);!r||!r.options.multiDrag||!~i||(Yo(t,r.options.selectedClass,!1),qr.splice(i,1))}},eventProperties:function(){var t=this,r=[],i=[];return qr.forEach(function(s){r.push({multiDragElement:s,index:s.sortableIndex});var o;wl&&s!==mo?o=-1:wl?o=ls(s,":not(."+t.options.selectedClass+")"):o=ls(s),i.push({multiDragElement:s,index:o})}),{items:_U(qr),clones:[].concat(Vl),oldIndicies:r,newIndicies:i}},optionListeners:{multiDragKey:function(t){return t=t.toLowerCase(),t==="ctrl"?t="Control":t.length>1&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})}function YU(e,n){qr.forEach(function(t,r){var i=n.children[t.sortableIndex+(e?Number(r):0)];i?n.insertBefore(t,i):n.appendChild(t)})}function tw(e,n){Vl.forEach(function(t,r){var i=n.children[t.sortableIndex+(e?Number(r):0)];i?n.insertBefore(t,i):n.appendChild(t)})}function Ag(){qr.forEach(function(e){e!==mo&&e.parentNode&&e.parentNode.removeChild(e)})}Dr.mount(new qU);Dr.mount(Sy,Ly);const JU=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:KU,Sortable:Dr,Swap:WU,default:Dr},Symbol.toStringTag,{value:"Module"})),XU=Q5(JU);(function(e,n){(function(r,i){e.exports=i(gU,XU)})(typeof self<"u"?self:ea,function(t,r){return function(i){var s={};function o(u){if(s[u])return s[u].exports;var f=s[u]={i:u,l:!1,exports:{}};return i[u].call(f.exports,f,f.exports,o),f.l=!0,f.exports}return o.m=i,o.c=s,o.d=function(u,f,d){o.o(u,f)||Object.defineProperty(u,f,{enumerable:!0,get:d})},o.r=function(u){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},o.t=function(u,f){if(f&1&&(u=o(u)),f&8||f&4&&typeof u=="object"&&u&&u.__esModule)return u;var d=Object.create(null);if(o.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:u}),f&2&&typeof u!="string")for(var g in u)o.d(d,g,(function(y){return u[y]}).bind(null,g));return d},o.n=function(u){var f=u&&u.__esModule?function(){return u.default}:function(){return u};return o.d(f,"a",f),f},o.o=function(u,f){return Object.prototype.hasOwnProperty.call(u,f)},o.p="",o(o.s="fb15")}({"00ee":function(i,s,o){var u=o("b622"),f=u("toStringTag"),d={};d[f]="z",i.exports=String(d)==="[object z]"},"0366":function(i,s,o){var u=o("1c0b");i.exports=function(f,d,g){if(u(f),d===void 0)return f;switch(g){case 0:return function(){return f.call(d)};case 1:return function(y){return f.call(d,y)};case 2:return function(y,x){return f.call(d,y,x)};case 3:return function(y,x,_){return f.call(d,y,x,_)}}return function(){return f.apply(d,arguments)}}},"057f":function(i,s,o){var u=o("fc6a"),f=o("241c").f,d={}.toString,g=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],y=function(x){try{return f(x)}catch{return g.slice()}};i.exports.f=function(_){return g&&d.call(_)=="[object Window]"?y(_):f(u(_))}},"06cf":function(i,s,o){var u=o("83ab"),f=o("d1e7"),d=o("5c6c"),g=o("fc6a"),y=o("c04e"),x=o("5135"),_=o("0cfb"),M=Object.getOwnPropertyDescriptor;s.f=u?M:function(N,O){if(N=g(N),O=y(O,!0),_)try{return M(N,O)}catch{}if(x(N,O))return d(!f.f.call(N,O),N[O])}},"0cfb":function(i,s,o){var u=o("83ab"),f=o("d039"),d=o("cc12");i.exports=!u&&!f(function(){return Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(i,s,o){var u=o("23e7"),f=o("d58f").left,d=o("a640"),g=o("ae40"),y=d("reduce"),x=g("reduce",{1:0});u({target:"Array",proto:!0,forced:!y||!x},{reduce:function(M){return f(this,M,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(i,s,o){var u=o("c6b6"),f=o("9263");i.exports=function(d,g){var y=d.exec;if(typeof y=="function"){var x=y.call(d,g);if(typeof x!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return x}if(u(d)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return f.call(d,g)}},"159b":function(i,s,o){var u=o("da84"),f=o("fdbc"),d=o("17c2"),g=o("9112");for(var y in f){var x=u[y],_=x&&x.prototype;if(_&&_.forEach!==d)try{g(_,"forEach",d)}catch{_.forEach=d}}},"17c2":function(i,s,o){var u=o("b727").forEach,f=o("a640"),d=o("ae40"),g=f("forEach"),y=d("forEach");i.exports=!g||!y?function(_){return u(this,_,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(i,s,o){var u=o("d066");i.exports=u("document","documentElement")},"1c0b":function(i,s){i.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},"1c7e":function(i,s,o){var u=o("b622"),f=u("iterator"),d=!1;try{var g=0,y={next:function(){return{done:!!g++}},return:function(){d=!0}};y[f]=function(){return this},Array.from(y,function(){throw 2})}catch{}i.exports=function(x,_){if(!_&&!d)return!1;var M=!1;try{var D={};D[f]=function(){return{next:function(){return{done:M=!0}}}},x(D)}catch{}return M}},"1d80":function(i,s){i.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},"1dde":function(i,s,o){var u=o("d039"),f=o("b622"),d=o("2d00"),g=f("species");i.exports=function(y){return d>=51||!u(function(){var x=[],_=x.constructor={};return _[g]=function(){return{foo:1}},x[y](Boolean).foo!==1})}},"23cb":function(i,s,o){var u=o("a691"),f=Math.max,d=Math.min;i.exports=function(g,y){var x=u(g);return x<0?f(x+y,0):d(x,y)}},"23e7":function(i,s,o){var u=o("da84"),f=o("06cf").f,d=o("9112"),g=o("6eeb"),y=o("ce4e"),x=o("e893"),_=o("94ca");i.exports=function(M,D){var N=M.target,O=M.global,F=M.stat,Y,Q,le,ce,xe,G;if(O?Q=u:F?Q=u[N]||y(N,{}):Q=(u[N]||{}).prototype,Q)for(le in D){if(xe=D[le],M.noTargetGet?(G=f(Q,le),ce=G&&G.value):ce=Q[le],Y=_(O?le:N+(F?".":"#")+le,M.forced),!Y&&ce!==void 0){if(typeof xe==typeof ce)continue;x(xe,ce)}(M.sham||ce&&ce.sham)&&d(xe,"sham",!0),g(Q,le,xe,M)}}},"241c":function(i,s,o){var u=o("ca84"),f=o("7839"),d=f.concat("length","prototype");s.f=Object.getOwnPropertyNames||function(y){return u(y,d)}},"25f0":function(i,s,o){var u=o("6eeb"),f=o("825a"),d=o("d039"),g=o("ad6d"),y="toString",x=RegExp.prototype,_=x[y],M=d(function(){return _.call({source:"a",flags:"b"})!="/a/b"}),D=_.name!=y;(M||D)&&u(RegExp.prototype,y,function(){var O=f(this),F=String(O.source),Y=O.flags,Q=String(Y===void 0&&O instanceof RegExp&&!("flags"in x)?g.call(O):Y);return"/"+F+"/"+Q},{unsafe:!0})},"2ca0":function(i,s,o){var u=o("23e7"),f=o("06cf").f,d=o("50c4"),g=o("5a34"),y=o("1d80"),x=o("ab13"),_=o("c430"),M="".startsWith,D=Math.min,N=x("startsWith"),O=!_&&!N&&!!function(){var F=f(String.prototype,"startsWith");return F&&!F.writable}();u({target:"String",proto:!0,forced:!O&&!N},{startsWith:function(Y){var Q=String(y(this));g(Y);var le=d(D(arguments.length>1?arguments[1]:void 0,Q.length)),ce=String(Y);return M?M.call(Q,ce,le):Q.slice(le,le+ce.length)===ce}})},"2d00":function(i,s,o){var u=o("da84"),f=o("342f"),d=u.process,g=d&&d.versions,y=g&&g.v8,x,_;y?(x=y.split("."),_=x[0]+x[1]):f&&(x=f.match(/Edge\/(\d+)/),(!x||x[1]>=74)&&(x=f.match(/Chrome\/(\d+)/),x&&(_=x[1]))),i.exports=_&&+_},"342f":function(i,s,o){var u=o("d066");i.exports=u("navigator","userAgent")||""},"35a1":function(i,s,o){var u=o("f5df"),f=o("3f8c"),d=o("b622"),g=d("iterator");i.exports=function(y){if(y!=null)return y[g]||y["@@iterator"]||f[u(y)]}},"37e8":function(i,s,o){var u=o("83ab"),f=o("9bf2"),d=o("825a"),g=o("df75");i.exports=u?Object.defineProperties:function(x,_){d(x);for(var M=g(_),D=M.length,N=0,O;D>N;)f.f(x,O=M[N++],_[O]);return x}},"3bbe":function(i,s,o){var u=o("861d");i.exports=function(f){if(!u(f)&&f!==null)throw TypeError("Can't set "+String(f)+" as a prototype");return f}},"3ca3":function(i,s,o){var u=o("6547").charAt,f=o("69f3"),d=o("7dd0"),g="String Iterator",y=f.set,x=f.getterFor(g);d(String,"String",function(_){y(this,{type:g,string:String(_),index:0})},function(){var M=x(this),D=M.string,N=M.index,O;return N>=D.length?{value:void 0,done:!0}:(O=u(D,N),M.index+=O.length,{value:O,done:!1})})},"3f8c":function(i,s){i.exports={}},4160:function(i,s,o){var u=o("23e7"),f=o("17c2");u({target:"Array",proto:!0,forced:[].forEach!=f},{forEach:f})},"428f":function(i,s,o){var u=o("da84");i.exports=u},"44ad":function(i,s,o){var u=o("d039"),f=o("c6b6"),d="".split;i.exports=u(function(){return!Object("z").propertyIsEnumerable(0)})?function(g){return f(g)=="String"?d.call(g,""):Object(g)}:Object},"44d2":function(i,s,o){var u=o("b622"),f=o("7c73"),d=o("9bf2"),g=u("unscopables"),y=Array.prototype;y[g]==null&&d.f(y,g,{configurable:!0,value:f(null)}),i.exports=function(x){y[g][x]=!0}},"44e7":function(i,s,o){var u=o("861d"),f=o("c6b6"),d=o("b622"),g=d("match");i.exports=function(y){var x;return u(y)&&((x=y[g])!==void 0?!!x:f(y)=="RegExp")}},4930:function(i,s,o){var u=o("d039");i.exports=!!Object.getOwnPropertySymbols&&!u(function(){return!String(Symbol())})},"4d64":function(i,s,o){var u=o("fc6a"),f=o("50c4"),d=o("23cb"),g=function(y){return function(x,_,M){var D=u(x),N=f(D.length),O=d(M,N),F;if(y&&_!=_){for(;N>O;)if(F=D[O++],F!=F)return!0}else for(;N>O;O++)if((y||O in D)&&D[O]===_)return y||O||0;return!y&&-1}};i.exports={includes:g(!0),indexOf:g(!1)}},"4de4":function(i,s,o){var u=o("23e7"),f=o("b727").filter,d=o("1dde"),g=o("ae40"),y=d("filter"),x=g("filter");u({target:"Array",proto:!0,forced:!y||!x},{filter:function(M){return f(this,M,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(i,s,o){var u=o("0366"),f=o("7b0b"),d=o("9bdd"),g=o("e95a"),y=o("50c4"),x=o("8418"),_=o("35a1");i.exports=function(D){var N=f(D),O=typeof this=="function"?this:Array,F=arguments.length,Y=F>1?arguments[1]:void 0,Q=Y!==void 0,le=_(N),ce=0,xe,G,R,Z,z,I;if(Q&&(Y=u(Y,F>2?arguments[2]:void 0,2)),le!=null&&!(O==Array&&g(le)))for(Z=le.call(N),z=Z.next,G=new O;!(R=z.call(Z)).done;ce++)I=Q?d(Z,Y,[R.value,ce],!0):R.value,x(G,ce,I);else for(xe=y(N.length),G=new O(xe);xe>ce;ce++)I=Q?Y(N[ce],ce):N[ce],x(G,ce,I);return G.length=ce,G}},"4fad":function(i,s,o){var u=o("23e7"),f=o("6f53").entries;u({target:"Object",stat:!0},{entries:function(g){return f(g)}})},"50c4":function(i,s,o){var u=o("a691"),f=Math.min;i.exports=function(d){return d>0?f(u(d),9007199254740991):0}},5135:function(i,s){var o={}.hasOwnProperty;i.exports=function(u,f){return o.call(u,f)}},5319:function(i,s,o){var u=o("d784"),f=o("825a"),d=o("7b0b"),g=o("50c4"),y=o("a691"),x=o("1d80"),_=o("8aa5"),M=o("14c3"),D=Math.max,N=Math.min,O=Math.floor,F=/\$([$&'`]|\d\d?|<[^>]*>)/g,Y=/\$([$&'`]|\d\d?)/g,Q=function(le){return le===void 0?le:String(le)};u("replace",2,function(le,ce,xe,G){var R=G.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,Z=G.REPLACE_KEEPS_$0,z=R?"$":"$0";return[function(U,W){var q=x(this),ie=U==null?void 0:U[le];return ie!==void 0?ie.call(U,q,W):ce.call(String(q),U,W)},function($,U){if(!R&&Z||typeof U=="string"&&U.indexOf(z)===-1){var W=xe(ce,$,this,U);if(W.done)return W.value}var q=f($),ie=String(this),re=typeof U=="function";re||(U=String(U));var we=q.global;if(we){var Pe=q.unicode;q.lastIndex=0}for(var Ie=[];;){var A=M(q,ie);if(A===null||(Ie.push(A),!we))break;var J=String(A[0]);J===""&&(q.lastIndex=_(ie,g(q.lastIndex),Pe))}for(var fe="",ne=0,he=0;he<Ie.length;he++){A=Ie[he];for(var ae=String(A[0]),T=D(N(y(A.index),ie.length),0),ue=[],ke=1;ke<A.length;ke++)ue.push(Q(A[ke]));var Ce=A.groups;if(re){var Ve=[ae].concat(ue,T,ie);Ce!==void 0&&Ve.push(Ce);var K=String(U.apply(void 0,Ve))}else K=I(ae,ie,T,ue,Ce,U);T>=ne&&(fe+=ie.slice(ne,T)+K,ne=T+ae.length)}return fe+ie.slice(ne)}];function I($,U,W,q,ie,re){var we=W+$.length,Pe=q.length,Ie=Y;return ie!==void 0&&(ie=d(ie),Ie=F),ce.call(re,Ie,function(A,J){var fe;switch(J.charAt(0)){case"$":return"$";case"&":return $;case"`":return U.slice(0,W);case"'":return U.slice(we);case"<":fe=ie[J.slice(1,-1)];break;default:var ne=+J;if(ne===0)return A;if(ne>Pe){var he=O(ne/10);return he===0?A:he<=Pe?q[he-1]===void 0?J.charAt(1):q[he-1]+J.charAt(1):A}fe=q[ne-1]}return fe===void 0?"":fe})}})},5692:function(i,s,o){var u=o("c430"),f=o("c6cd");(i.exports=function(d,g){return f[d]||(f[d]=g!==void 0?g:{})})("versions",[]).push({version:"3.6.5",mode:u?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(i,s,o){var u=o("d066"),f=o("241c"),d=o("7418"),g=o("825a");i.exports=u("Reflect","ownKeys")||function(x){var _=f.f(g(x)),M=d.f;return M?_.concat(M(x)):_}},"5a34":function(i,s,o){var u=o("44e7");i.exports=function(f){if(u(f))throw TypeError("The method doesn't accept regular expressions");return f}},"5c6c":function(i,s){i.exports=function(o,u){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:u}}},"5db7":function(i,s,o){var u=o("23e7"),f=o("a2bf"),d=o("7b0b"),g=o("50c4"),y=o("1c0b"),x=o("65f0");u({target:"Array",proto:!0},{flatMap:function(M){var D=d(this),N=g(D.length),O;return y(M),O=x(D,0),O.length=f(O,D,D,N,0,1,M,arguments.length>1?arguments[1]:void 0),O}})},6547:function(i,s,o){var u=o("a691"),f=o("1d80"),d=function(g){return function(y,x){var _=String(f(y)),M=u(x),D=_.length,N,O;return M<0||M>=D?g?"":void 0:(N=_.charCodeAt(M),N<55296||N>56319||M+1===D||(O=_.charCodeAt(M+1))<56320||O>57343?g?_.charAt(M):N:g?_.slice(M,M+2):(N-55296<<10)+(O-56320)+65536)}};i.exports={codeAt:d(!1),charAt:d(!0)}},"65f0":function(i,s,o){var u=o("861d"),f=o("e8b5"),d=o("b622"),g=d("species");i.exports=function(y,x){var _;return f(y)&&(_=y.constructor,typeof _=="function"&&(_===Array||f(_.prototype))?_=void 0:u(_)&&(_=_[g],_===null&&(_=void 0))),new(_===void 0?Array:_)(x===0?0:x)}},"69f3":function(i,s,o){var u=o("7f9a"),f=o("da84"),d=o("861d"),g=o("9112"),y=o("5135"),x=o("f772"),_=o("d012"),M=f.WeakMap,D,N,O,F=function(R){return O(R)?N(R):D(R,{})},Y=function(R){return function(Z){var z;if(!d(Z)||(z=N(Z)).type!==R)throw TypeError("Incompatible receiver, "+R+" required");return z}};if(u){var Q=new M,le=Q.get,ce=Q.has,xe=Q.set;D=function(R,Z){return xe.call(Q,R,Z),Z},N=function(R){return le.call(Q,R)||{}},O=function(R){return ce.call(Q,R)}}else{var G=x("state");_[G]=!0,D=function(R,Z){return g(R,G,Z),Z},N=function(R){return y(R,G)?R[G]:{}},O=function(R){return y(R,G)}}i.exports={set:D,get:N,has:O,enforce:F,getterFor:Y}},"6eeb":function(i,s,o){var u=o("da84"),f=o("9112"),d=o("5135"),g=o("ce4e"),y=o("8925"),x=o("69f3"),_=x.get,M=x.enforce,D=String(String).split("String");(i.exports=function(N,O,F,Y){var Q=Y?!!Y.unsafe:!1,le=Y?!!Y.enumerable:!1,ce=Y?!!Y.noTargetGet:!1;if(typeof F=="function"&&(typeof O=="string"&&!d(F,"name")&&f(F,"name",O),M(F).source=D.join(typeof O=="string"?O:"")),N===u){le?N[O]=F:g(O,F);return}else Q?!ce&&N[O]&&(le=!0):delete N[O];le?N[O]=F:f(N,O,F)})(Function.prototype,"toString",function(){return typeof this=="function"&&_(this).source||y(this)})},"6f53":function(i,s,o){var u=o("83ab"),f=o("df75"),d=o("fc6a"),g=o("d1e7").f,y=function(x){return function(_){for(var M=d(_),D=f(M),N=D.length,O=0,F=[],Y;N>O;)Y=D[O++],(!u||g.call(M,Y))&&F.push(x?[Y,M[Y]]:M[Y]);return F}};i.exports={entries:y(!0),values:y(!1)}},"73d9":function(i,s,o){var u=o("44d2");u("flatMap")},7418:function(i,s){s.f=Object.getOwnPropertySymbols},"746f":function(i,s,o){var u=o("428f"),f=o("5135"),d=o("e538"),g=o("9bf2").f;i.exports=function(y){var x=u.Symbol||(u.Symbol={});f(x,y)||g(x,y,{value:d.f(y)})}},7839:function(i,s){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(i,s,o){var u=o("1d80");i.exports=function(f){return Object(u(f))}},"7c73":function(i,s,o){var u=o("825a"),f=o("37e8"),d=o("7839"),g=o("d012"),y=o("1be4"),x=o("cc12"),_=o("f772"),M=">",D="<",N="prototype",O="script",F=_("IE_PROTO"),Y=function(){},Q=function(R){return D+O+M+R+D+"/"+O+M},le=function(R){R.write(Q("")),R.close();var Z=R.parentWindow.Object;return R=null,Z},ce=function(){var R=x("iframe"),Z="java"+O+":",z;return R.style.display="none",y.appendChild(R),R.src=String(Z),z=R.contentWindow.document,z.open(),z.write(Q("document.F=Object")),z.close(),z.F},xe,G=function(){try{xe=document.domain&&new ActiveXObject("htmlfile")}catch{}G=xe?le(xe):ce();for(var R=d.length;R--;)delete G[N][d[R]];return G()};g[F]=!0,i.exports=Object.create||function(Z,z){var I;return Z!==null?(Y[N]=u(Z),I=new Y,Y[N]=null,I[F]=Z):I=G(),z===void 0?I:f(I,z)}},"7dd0":function(i,s,o){var u=o("23e7"),f=o("9ed3"),d=o("e163"),g=o("d2bb"),y=o("d44e"),x=o("9112"),_=o("6eeb"),M=o("b622"),D=o("c430"),N=o("3f8c"),O=o("ae93"),F=O.IteratorPrototype,Y=O.BUGGY_SAFARI_ITERATORS,Q=M("iterator"),le="keys",ce="values",xe="entries",G=function(){return this};i.exports=function(R,Z,z,I,$,U,W){f(z,Z,I);var q=function(he){if(he===$&&Ie)return Ie;if(!Y&&he in we)return we[he];switch(he){case le:return function(){return new z(this,he)};case ce:return function(){return new z(this,he)};case xe:return function(){return new z(this,he)}}return function(){return new z(this)}},ie=Z+" Iterator",re=!1,we=R.prototype,Pe=we[Q]||we["@@iterator"]||$&&we[$],Ie=!Y&&Pe||q($),A=Z=="Array"&&we.entries||Pe,J,fe,ne;if(A&&(J=d(A.call(new R)),F!==Object.prototype&&J.next&&(!D&&d(J)!==F&&(g?g(J,F):typeof J[Q]!="function"&&x(J,Q,G)),y(J,ie,!0,!0),D&&(N[ie]=G))),$==ce&&Pe&&Pe.name!==ce&&(re=!0,Ie=function(){return Pe.call(this)}),(!D||W)&&we[Q]!==Ie&&x(we,Q,Ie),N[Z]=Ie,$)if(fe={values:q(ce),keys:U?Ie:q(le),entries:q(xe)},W)for(ne in fe)(Y||re||!(ne in we))&&_(we,ne,fe[ne]);else u({target:Z,proto:!0,forced:Y||re},fe);return fe}},"7f9a":function(i,s,o){var u=o("da84"),f=o("8925"),d=u.WeakMap;i.exports=typeof d=="function"&&/native code/.test(f(d))},"825a":function(i,s,o){var u=o("861d");i.exports=function(f){if(!u(f))throw TypeError(String(f)+" is not an object");return f}},"83ab":function(i,s,o){var u=o("d039");i.exports=!u(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(i,s,o){var u=o("c04e"),f=o("9bf2"),d=o("5c6c");i.exports=function(g,y,x){var _=u(y);_ in g?f.f(g,_,d(0,x)):g[_]=x}},"861d":function(i,s){i.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},8875:function(i,s,o){var u,f,d;(function(g,y){f=[],u=y,d=typeof u=="function"?u.apply(s,f):u,d!==void 0&&(i.exports=d)})(typeof self<"u"?self:this,function(){function g(){var y=Object.getOwnPropertyDescriptor(document,"currentScript");if(!y&&"currentScript"in document&&document.currentScript||y&&y.get!==g&&document.currentScript)return document.currentScript;try{throw new Error}catch(xe){var x=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,_=/@([^@]*):(\d+):(\d+)\s*$/ig,M=x.exec(xe.stack)||_.exec(xe.stack),D=M&&M[1]||!1,N=M&&M[2]||!1,O=document.location.href.replace(document.location.hash,""),F,Y,Q,le=document.getElementsByTagName("script");D===O&&(F=document.documentElement.outerHTML,Y=new RegExp("(?:[^\\n]+?\\n){0,"+(N-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),Q=F.replace(Y,"$1").trim());for(var ce=0;ce<le.length;ce++)if(le[ce].readyState==="interactive"||le[ce].src===D||D===O&&le[ce].innerHTML&&le[ce].innerHTML.trim()===Q)return le[ce];return null}}return g})},8925:function(i,s,o){var u=o("c6cd"),f=Function.toString;typeof u.inspectSource!="function"&&(u.inspectSource=function(d){return f.call(d)}),i.exports=u.inspectSource},"8aa5":function(i,s,o){var u=o("6547").charAt;i.exports=function(f,d,g){return d+(g?u(f,d).length:1)}},"8bbf":function(i,s){i.exports=t},"90e3":function(i,s){var o=0,u=Math.random();i.exports=function(f){return"Symbol("+String(f===void 0?"":f)+")_"+(++o+u).toString(36)}},9112:function(i,s,o){var u=o("83ab"),f=o("9bf2"),d=o("5c6c");i.exports=u?function(g,y,x){return f.f(g,y,d(1,x))}:function(g,y,x){return g[y]=x,g}},9263:function(i,s,o){var u=o("ad6d"),f=o("9f7f"),d=RegExp.prototype.exec,g=String.prototype.replace,y=d,x=function(){var N=/a/,O=/b*/g;return d.call(N,"a"),d.call(O,"a"),N.lastIndex!==0||O.lastIndex!==0}(),_=f.UNSUPPORTED_Y||f.BROKEN_CARET,M=/()??/.exec("")[1]!==void 0,D=x||M||_;D&&(y=function(O){var F=this,Y,Q,le,ce,xe=_&&F.sticky,G=u.call(F),R=F.source,Z=0,z=O;return xe&&(G=G.replace("y",""),G.indexOf("g")===-1&&(G+="g"),z=String(O).slice(F.lastIndex),F.lastIndex>0&&(!F.multiline||F.multiline&&O[F.lastIndex-1]!==`
`)&&(R="(?: "+R+")",z=" "+z,Z++),Q=new RegExp("^(?:"+R+")",G)),M&&(Q=new RegExp("^"+R+"$(?!\\s)",G)),x&&(Y=F.lastIndex),le=d.call(xe?Q:F,z),xe?le?(le.input=le.input.slice(Z),le[0]=le[0].slice(Z),le.index=F.lastIndex,F.lastIndex+=le[0].length):F.lastIndex=0:x&&le&&(F.lastIndex=F.global?le.index+le[0].length:Y),M&&le&&le.length>1&&g.call(le[0],Q,function(){for(ce=1;ce<arguments.length-2;ce++)arguments[ce]===void 0&&(le[ce]=void 0)}),le}),i.exports=y},"94ca":function(i,s,o){var u=o("d039"),f=/#|\.prototype\./,d=function(M,D){var N=y[g(M)];return N==_?!0:N==x?!1:typeof D=="function"?u(D):!!D},g=d.normalize=function(M){return String(M).replace(f,".").toLowerCase()},y=d.data={},x=d.NATIVE="N",_=d.POLYFILL="P";i.exports=d},"99af":function(i,s,o){var u=o("23e7"),f=o("d039"),d=o("e8b5"),g=o("861d"),y=o("7b0b"),x=o("50c4"),_=o("8418"),M=o("65f0"),D=o("1dde"),N=o("b622"),O=o("2d00"),F=N("isConcatSpreadable"),Y=9007199254740991,Q="Maximum allowed index exceeded",le=O>=51||!f(function(){var R=[];return R[F]=!1,R.concat()[0]!==R}),ce=D("concat"),xe=function(R){if(!g(R))return!1;var Z=R[F];return Z!==void 0?!!Z:d(R)},G=!le||!ce;u({target:"Array",proto:!0,forced:G},{concat:function(Z){var z=y(this),I=M(z,0),$=0,U,W,q,ie,re;for(U=-1,q=arguments.length;U<q;U++)if(re=U===-1?z:arguments[U],xe(re)){if(ie=x(re.length),$+ie>Y)throw TypeError(Q);for(W=0;W<ie;W++,$++)W in re&&_(I,$,re[W])}else{if($>=Y)throw TypeError(Q);_(I,$++,re)}return I.length=$,I}})},"9bdd":function(i,s,o){var u=o("825a");i.exports=function(f,d,g,y){try{return y?d(u(g)[0],g[1]):d(g)}catch(_){var x=f.return;throw x!==void 0&&u(x.call(f)),_}}},"9bf2":function(i,s,o){var u=o("83ab"),f=o("0cfb"),d=o("825a"),g=o("c04e"),y=Object.defineProperty;s.f=u?y:function(_,M,D){if(d(_),M=g(M,!0),d(D),f)try{return y(_,M,D)}catch{}if("get"in D||"set"in D)throw TypeError("Accessors not supported");return"value"in D&&(_[M]=D.value),_}},"9ed3":function(i,s,o){var u=o("ae93").IteratorPrototype,f=o("7c73"),d=o("5c6c"),g=o("d44e"),y=o("3f8c"),x=function(){return this};i.exports=function(_,M,D){var N=M+" Iterator";return _.prototype=f(u,{next:d(1,D)}),g(_,N,!1,!0),y[N]=x,_}},"9f7f":function(i,s,o){var u=o("d039");function f(d,g){return RegExp(d,g)}s.UNSUPPORTED_Y=u(function(){var d=f("a","y");return d.lastIndex=2,d.exec("abcd")!=null}),s.BROKEN_CARET=u(function(){var d=f("^r","gy");return d.lastIndex=2,d.exec("str")!=null})},a2bf:function(i,s,o){var u=o("e8b5"),f=o("50c4"),d=o("0366"),g=function(y,x,_,M,D,N,O,F){for(var Y=D,Q=0,le=O?d(O,F,3):!1,ce;Q<M;){if(Q in _){if(ce=le?le(_[Q],Q,x):_[Q],N>0&&u(ce))Y=g(y,x,ce,f(ce.length),Y,N-1)-1;else{if(Y>=9007199254740991)throw TypeError("Exceed the acceptable array length");y[Y]=ce}Y++}Q++}return Y};i.exports=g},a352:function(i,s){i.exports=r},a434:function(i,s,o){var u=o("23e7"),f=o("23cb"),d=o("a691"),g=o("50c4"),y=o("7b0b"),x=o("65f0"),_=o("8418"),M=o("1dde"),D=o("ae40"),N=M("splice"),O=D("splice",{ACCESSORS:!0,0:0,1:2}),F=Math.max,Y=Math.min,Q=9007199254740991,le="Maximum allowed length exceeded";u({target:"Array",proto:!0,forced:!N||!O},{splice:function(xe,G){var R=y(this),Z=g(R.length),z=f(xe,Z),I=arguments.length,$,U,W,q,ie,re;if(I===0?$=U=0:I===1?($=0,U=Z-z):($=I-2,U=Y(F(d(G),0),Z-z)),Z+$-U>Q)throw TypeError(le);for(W=x(R,U),q=0;q<U;q++)ie=z+q,ie in R&&_(W,q,R[ie]);if(W.length=U,$<U){for(q=z;q<Z-U;q++)ie=q+U,re=q+$,ie in R?R[re]=R[ie]:delete R[re];for(q=Z;q>Z-U+$;q--)delete R[q-1]}else if($>U)for(q=Z-U;q>z;q--)ie=q+U-1,re=q+$-1,ie in R?R[re]=R[ie]:delete R[re];for(q=0;q<$;q++)R[q+z]=arguments[q+2];return R.length=Z-U+$,W}})},a4d3:function(i,s,o){var u=o("23e7"),f=o("da84"),d=o("d066"),g=o("c430"),y=o("83ab"),x=o("4930"),_=o("fdbf"),M=o("d039"),D=o("5135"),N=o("e8b5"),O=o("861d"),F=o("825a"),Y=o("7b0b"),Q=o("fc6a"),le=o("c04e"),ce=o("5c6c"),xe=o("7c73"),G=o("df75"),R=o("241c"),Z=o("057f"),z=o("7418"),I=o("06cf"),$=o("9bf2"),U=o("d1e7"),W=o("9112"),q=o("6eeb"),ie=o("5692"),re=o("f772"),we=o("d012"),Pe=o("90e3"),Ie=o("b622"),A=o("e538"),J=o("746f"),fe=o("d44e"),ne=o("69f3"),he=o("b727").forEach,ae=re("hidden"),T="Symbol",ue="prototype",ke=Ie("toPrimitive"),Ce=ne.set,Ve=ne.getterFor(T),K=Object[ue],pe=f.Symbol,ve=d("JSON","stringify"),ge=I.f,Ue=$.f,Qe=Z.f,Ke=U.f,Ge=ie("symbols"),Xe=ie("op-symbols"),ot=ie("string-to-symbol-registry"),kt=ie("symbol-to-string-registry"),Ct=ie("wks"),Ut=f.QObject,Gt=!Ut||!Ut[ue]||!Ut[ue].findChild,fn=y&&M(function(){return xe(Ue({},"a",{get:function(){return Ue(this,"a",{value:7}).a}})).a!=7})?function(xn,Mn,En){var cr=ge(K,Mn);cr&&delete K[Mn],Ue(xn,Mn,En),cr&&xn!==K&&Ue(K,Mn,cr)}:Ue,pn=function(xn,Mn){var En=Ge[xn]=xe(pe[ue]);return Ce(En,{type:T,tag:xn,description:Mn}),y||(En.description=Mn),En},et=_?function(xn){return typeof xn=="symbol"}:function(xn){return Object(xn)instanceof pe},it=function(Mn,En,cr){Mn===K&&it(Xe,En,cr),F(Mn);var yr=le(En,!0);return F(cr),D(Ge,yr)?(cr.enumerable?(D(Mn,ae)&&Mn[ae][yr]&&(Mn[ae][yr]=!1),cr=xe(cr,{enumerable:ce(0,!1)})):(D(Mn,ae)||Ue(Mn,ae,ce(1,{})),Mn[ae][yr]=!0),fn(Mn,yr,cr)):Ue(Mn,yr,cr)},nt=function(Mn,En){F(Mn);var cr=Q(En),yr=G(cr).concat(Tn(cr));return he(yr,function(mt){(!y||Qt.call(cr,mt))&&it(Mn,mt,cr[mt])}),Mn},Vt=function(Mn,En){return En===void 0?xe(Mn):nt(xe(Mn),En)},Qt=function(Mn){var En=le(Mn,!0),cr=Ke.call(this,En);return this===K&&D(Ge,En)&&!D(Xe,En)?!1:cr||!D(this,En)||!D(Ge,En)||D(this,ae)&&this[ae][En]?cr:!0},On=function(Mn,En){var cr=Q(Mn),yr=le(En,!0);if(!(cr===K&&D(Ge,yr)&&!D(Xe,yr))){var mt=ge(cr,yr);return mt&&D(Ge,yr)&&!(D(cr,ae)&&cr[ae][yr])&&(mt.enumerable=!0),mt}},wn=function(Mn){var En=Qe(Q(Mn)),cr=[];return he(En,function(yr){!D(Ge,yr)&&!D(we,yr)&&cr.push(yr)}),cr},Tn=function(Mn){var En=Mn===K,cr=Qe(En?Xe:Q(Mn)),yr=[];return he(cr,function(mt){D(Ge,mt)&&(!En||D(K,mt))&&yr.push(Ge[mt])}),yr};if(x||(pe=function(){if(this instanceof pe)throw TypeError("Symbol is not a constructor");var Mn=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),En=Pe(Mn),cr=function(yr){this===K&&cr.call(Xe,yr),D(this,ae)&&D(this[ae],En)&&(this[ae][En]=!1),fn(this,En,ce(1,yr))};return y&&Gt&&fn(K,En,{configurable:!0,set:cr}),pn(En,Mn)},q(pe[ue],"toString",function(){return Ve(this).tag}),q(pe,"withoutSetter",function(xn){return pn(Pe(xn),xn)}),U.f=Qt,$.f=it,I.f=On,R.f=Z.f=wn,z.f=Tn,A.f=function(xn){return pn(Ie(xn),xn)},y&&(Ue(pe[ue],"description",{configurable:!0,get:function(){return Ve(this).description}}),g||q(K,"propertyIsEnumerable",Qt,{unsafe:!0}))),u({global:!0,wrap:!0,forced:!x,sham:!x},{Symbol:pe}),he(G(Ct),function(xn){J(xn)}),u({target:T,stat:!0,forced:!x},{for:function(xn){var Mn=String(xn);if(D(ot,Mn))return ot[Mn];var En=pe(Mn);return ot[Mn]=En,kt[En]=Mn,En},keyFor:function(Mn){if(!et(Mn))throw TypeError(Mn+" is not a symbol");if(D(kt,Mn))return kt[Mn]},useSetter:function(){Gt=!0},useSimple:function(){Gt=!1}}),u({target:"Object",stat:!0,forced:!x,sham:!y},{create:Vt,defineProperty:it,defineProperties:nt,getOwnPropertyDescriptor:On}),u({target:"Object",stat:!0,forced:!x},{getOwnPropertyNames:wn,getOwnPropertySymbols:Tn}),u({target:"Object",stat:!0,forced:M(function(){z.f(1)})},{getOwnPropertySymbols:function(Mn){return z.f(Y(Mn))}}),ve){var ar=!x||M(function(){var xn=pe();return ve([xn])!="[null]"||ve({a:xn})!="{}"||ve(Object(xn))!="{}"});u({target:"JSON",stat:!0,forced:ar},{stringify:function(Mn,En,cr){for(var yr=[Mn],mt=1,We;arguments.length>mt;)yr.push(arguments[mt++]);if(We=En,!(!O(En)&&Mn===void 0||et(Mn)))return N(En)||(En=function(Ot,Pn){if(typeof We=="function"&&(Pn=We.call(this,Ot,Pn)),!et(Pn))return Pn}),yr[1]=En,ve.apply(null,yr)}})}pe[ue][ke]||W(pe[ue],ke,pe[ue].valueOf),fe(pe,T),we[ae]=!0},a630:function(i,s,o){var u=o("23e7"),f=o("4df4"),d=o("1c7e"),g=!d(function(y){Array.from(y)});u({target:"Array",stat:!0,forced:g},{from:f})},a640:function(i,s,o){var u=o("d039");i.exports=function(f,d){var g=[][f];return!!g&&u(function(){g.call(null,d||function(){throw 1},1)})}},a691:function(i,s){var o=Math.ceil,u=Math.floor;i.exports=function(f){return isNaN(f=+f)?0:(f>0?u:o)(f)}},ab13:function(i,s,o){var u=o("b622"),f=u("match");i.exports=function(d){var g=/./;try{"/./"[d](g)}catch{try{return g[f]=!1,"/./"[d](g)}catch{}}return!1}},ac1f:function(i,s,o){var u=o("23e7"),f=o("9263");u({target:"RegExp",proto:!0,forced:/./.exec!==f},{exec:f})},ad6d:function(i,s,o){var u=o("825a");i.exports=function(){var f=u(this),d="";return f.global&&(d+="g"),f.ignoreCase&&(d+="i"),f.multiline&&(d+="m"),f.dotAll&&(d+="s"),f.unicode&&(d+="u"),f.sticky&&(d+="y"),d}},ae40:function(i,s,o){var u=o("83ab"),f=o("d039"),d=o("5135"),g=Object.defineProperty,y={},x=function(_){throw _};i.exports=function(_,M){if(d(y,_))return y[_];M||(M={});var D=[][_],N=d(M,"ACCESSORS")?M.ACCESSORS:!1,O=d(M,0)?M[0]:x,F=d(M,1)?M[1]:void 0;return y[_]=!!D&&!f(function(){if(N&&!u)return!0;var Y={length:-1};N?g(Y,1,{enumerable:!0,get:x}):Y[1]=1,D.call(Y,O,F)})}},ae93:function(i,s,o){var u=o("e163"),f=o("9112"),d=o("5135"),g=o("b622"),y=o("c430"),x=g("iterator"),_=!1,M=function(){return this},D,N,O;[].keys&&(O=[].keys(),"next"in O?(N=u(u(O)),N!==Object.prototype&&(D=N)):_=!0),D==null&&(D={}),!y&&!d(D,x)&&f(D,x,M),i.exports={IteratorPrototype:D,BUGGY_SAFARI_ITERATORS:_}},b041:function(i,s,o){var u=o("00ee"),f=o("f5df");i.exports=u?{}.toString:function(){return"[object "+f(this)+"]"}},b0c0:function(i,s,o){var u=o("83ab"),f=o("9bf2").f,d=Function.prototype,g=d.toString,y=/^\s*function ([^ (]*)/,x="name";u&&!(x in d)&&f(d,x,{configurable:!0,get:function(){try{return g.call(this).match(y)[1]}catch{return""}}})},b622:function(i,s,o){var u=o("da84"),f=o("5692"),d=o("5135"),g=o("90e3"),y=o("4930"),x=o("fdbf"),_=f("wks"),M=u.Symbol,D=x?M:M&&M.withoutSetter||g;i.exports=function(N){return d(_,N)||(y&&d(M,N)?_[N]=M[N]:_[N]=D("Symbol."+N)),_[N]}},b64b:function(i,s,o){var u=o("23e7"),f=o("7b0b"),d=o("df75"),g=o("d039"),y=g(function(){d(1)});u({target:"Object",stat:!0,forced:y},{keys:function(_){return d(f(_))}})},b727:function(i,s,o){var u=o("0366"),f=o("44ad"),d=o("7b0b"),g=o("50c4"),y=o("65f0"),x=[].push,_=function(M){var D=M==1,N=M==2,O=M==3,F=M==4,Y=M==6,Q=M==5||Y;return function(le,ce,xe,G){for(var R=d(le),Z=f(R),z=u(ce,xe,3),I=g(Z.length),$=0,U=G||y,W=D?U(le,I):N?U(le,0):void 0,q,ie;I>$;$++)if((Q||$ in Z)&&(q=Z[$],ie=z(q,$,R),M)){if(D)W[$]=ie;else if(ie)switch(M){case 3:return!0;case 5:return q;case 6:return $;case 2:x.call(W,q)}else if(F)return!1}return Y?-1:O||F?F:W}};i.exports={forEach:_(0),map:_(1),filter:_(2),some:_(3),every:_(4),find:_(5),findIndex:_(6)}},c04e:function(i,s,o){var u=o("861d");i.exports=function(f,d){if(!u(f))return f;var g,y;if(d&&typeof(g=f.toString)=="function"&&!u(y=g.call(f))||typeof(g=f.valueOf)=="function"&&!u(y=g.call(f))||!d&&typeof(g=f.toString)=="function"&&!u(y=g.call(f)))return y;throw TypeError("Can't convert object to primitive value")}},c430:function(i,s){i.exports=!1},c6b6:function(i,s){var o={}.toString;i.exports=function(u){return o.call(u).slice(8,-1)}},c6cd:function(i,s,o){var u=o("da84"),f=o("ce4e"),d="__core-js_shared__",g=u[d]||f(d,{});i.exports=g},c740:function(i,s,o){var u=o("23e7"),f=o("b727").findIndex,d=o("44d2"),g=o("ae40"),y="findIndex",x=!0,_=g(y);y in[]&&Array(1)[y](function(){x=!1}),u({target:"Array",proto:!0,forced:x||!_},{findIndex:function(D){return f(this,D,arguments.length>1?arguments[1]:void 0)}}),d(y)},c8ba:function(i,s){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}i.exports=o},c975:function(i,s,o){var u=o("23e7"),f=o("4d64").indexOf,d=o("a640"),g=o("ae40"),y=[].indexOf,x=!!y&&1/[1].indexOf(1,-0)<0,_=d("indexOf"),M=g("indexOf",{ACCESSORS:!0,1:0});u({target:"Array",proto:!0,forced:x||!_||!M},{indexOf:function(N){return x?y.apply(this,arguments)||0:f(this,N,arguments.length>1?arguments[1]:void 0)}})},ca84:function(i,s,o){var u=o("5135"),f=o("fc6a"),d=o("4d64").indexOf,g=o("d012");i.exports=function(y,x){var _=f(y),M=0,D=[],N;for(N in _)!u(g,N)&&u(_,N)&&D.push(N);for(;x.length>M;)u(_,N=x[M++])&&(~d(D,N)||D.push(N));return D}},caad:function(i,s,o){var u=o("23e7"),f=o("4d64").includes,d=o("44d2"),g=o("ae40"),y=g("indexOf",{ACCESSORS:!0,1:0});u({target:"Array",proto:!0,forced:!y},{includes:function(_){return f(this,_,arguments.length>1?arguments[1]:void 0)}}),d("includes")},cc12:function(i,s,o){var u=o("da84"),f=o("861d"),d=u.document,g=f(d)&&f(d.createElement);i.exports=function(y){return g?d.createElement(y):{}}},ce4e:function(i,s,o){var u=o("da84"),f=o("9112");i.exports=function(d,g){try{f(u,d,g)}catch{u[d]=g}return g}},d012:function(i,s){i.exports={}},d039:function(i,s){i.exports=function(o){try{return!!o()}catch{return!0}}},d066:function(i,s,o){var u=o("428f"),f=o("da84"),d=function(g){return typeof g=="function"?g:void 0};i.exports=function(g,y){return arguments.length<2?d(u[g])||d(f[g]):u[g]&&u[g][y]||f[g]&&f[g][y]}},d1e7:function(i,s,o){var u={}.propertyIsEnumerable,f=Object.getOwnPropertyDescriptor,d=f&&!u.call({1:2},1);s.f=d?function(y){var x=f(this,y);return!!x&&x.enumerable}:u},d28b:function(i,s,o){var u=o("746f");u("iterator")},d2bb:function(i,s,o){var u=o("825a"),f=o("3bbe");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var d=!1,g={},y;try{y=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,y.call(g,[]),d=g instanceof Array}catch{}return function(_,M){return u(_),f(M),d?y.call(_,M):_.__proto__=M,_}}():void 0)},d3b7:function(i,s,o){var u=o("00ee"),f=o("6eeb"),d=o("b041");u||f(Object.prototype,"toString",d,{unsafe:!0})},d44e:function(i,s,o){var u=o("9bf2").f,f=o("5135"),d=o("b622"),g=d("toStringTag");i.exports=function(y,x,_){y&&!f(y=_?y:y.prototype,g)&&u(y,g,{configurable:!0,value:x})}},d58f:function(i,s,o){var u=o("1c0b"),f=o("7b0b"),d=o("44ad"),g=o("50c4"),y=function(x){return function(_,M,D,N){u(M);var O=f(_),F=d(O),Y=g(O.length),Q=x?Y-1:0,le=x?-1:1;if(D<2)for(;;){if(Q in F){N=F[Q],Q+=le;break}if(Q+=le,x?Q<0:Y<=Q)throw TypeError("Reduce of empty array with no initial value")}for(;x?Q>=0:Y>Q;Q+=le)Q in F&&(N=M(N,F[Q],Q,O));return N}};i.exports={left:y(!1),right:y(!0)}},d784:function(i,s,o){o("ac1f");var u=o("6eeb"),f=o("d039"),d=o("b622"),g=o("9263"),y=o("9112"),x=d("species"),_=!f(function(){var F=/./;return F.exec=function(){var Y=[];return Y.groups={a:"7"},Y},"".replace(F,"$<a>")!=="7"}),M=function(){return"a".replace(/./,"$0")==="$0"}(),D=d("replace"),N=function(){return/./[D]?/./[D]("a","$0")==="":!1}(),O=!f(function(){var F=/(?:)/,Y=F.exec;F.exec=function(){return Y.apply(this,arguments)};var Q="ab".split(F);return Q.length!==2||Q[0]!=="a"||Q[1]!=="b"});i.exports=function(F,Y,Q,le){var ce=d(F),xe=!f(function(){var $={};return $[ce]=function(){return 7},""[F]($)!=7}),G=xe&&!f(function(){var $=!1,U=/a/;return F==="split"&&(U={},U.constructor={},U.constructor[x]=function(){return U},U.flags="",U[ce]=/./[ce]),U.exec=function(){return $=!0,null},U[ce](""),!$});if(!xe||!G||F==="replace"&&!(_&&M&&!N)||F==="split"&&!O){var R=/./[ce],Z=Q(ce,""[F],function($,U,W,q,ie){return U.exec===g?xe&&!ie?{done:!0,value:R.call(U,W,q)}:{done:!0,value:$.call(W,U,q)}:{done:!1}},{REPLACE_KEEPS_$0:M,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:N}),z=Z[0],I=Z[1];u(String.prototype,F,z),u(RegExp.prototype,ce,Y==2?function($,U){return I.call($,this,U)}:function($){return I.call($,this)})}le&&y(RegExp.prototype[ce],"sham",!0)}},d81d:function(i,s,o){var u=o("23e7"),f=o("b727").map,d=o("1dde"),g=o("ae40"),y=d("map"),x=g("map");u({target:"Array",proto:!0,forced:!y||!x},{map:function(M){return f(this,M,arguments.length>1?arguments[1]:void 0)}})},da84:function(i,s,o){(function(u){var f=function(d){return d&&d.Math==Math&&d};i.exports=f(typeof globalThis=="object"&&globalThis)||f(typeof window=="object"&&window)||f(typeof self=="object"&&self)||f(typeof u=="object"&&u)||Function("return this")()}).call(this,o("c8ba"))},dbb4:function(i,s,o){var u=o("23e7"),f=o("83ab"),d=o("56ef"),g=o("fc6a"),y=o("06cf"),x=o("8418");u({target:"Object",stat:!0,sham:!f},{getOwnPropertyDescriptors:function(M){for(var D=g(M),N=y.f,O=d(D),F={},Y=0,Q,le;O.length>Y;)le=N(D,Q=O[Y++]),le!==void 0&&x(F,Q,le);return F}})},dbf1:function(i,s,o){(function(u){o.d(s,"a",function(){return d});function f(){return typeof window<"u"?window.console:u.console}var d=f()}).call(this,o("c8ba"))},ddb0:function(i,s,o){var u=o("da84"),f=o("fdbc"),d=o("e260"),g=o("9112"),y=o("b622"),x=y("iterator"),_=y("toStringTag"),M=d.values;for(var D in f){var N=u[D],O=N&&N.prototype;if(O){if(O[x]!==M)try{g(O,x,M)}catch{O[x]=M}if(O[_]||g(O,_,D),f[D]){for(var F in d)if(O[F]!==d[F])try{g(O,F,d[F])}catch{O[F]=d[F]}}}}},df75:function(i,s,o){var u=o("ca84"),f=o("7839");i.exports=Object.keys||function(g){return u(g,f)}},e01a:function(i,s,o){var u=o("23e7"),f=o("83ab"),d=o("da84"),g=o("5135"),y=o("861d"),x=o("9bf2").f,_=o("e893"),M=d.Symbol;if(f&&typeof M=="function"&&(!("description"in M.prototype)||M().description!==void 0)){var D={},N=function(){var ce=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),xe=this instanceof N?new M(ce):ce===void 0?M():M(ce);return ce===""&&(D[xe]=!0),xe};_(N,M);var O=N.prototype=M.prototype;O.constructor=N;var F=O.toString,Y=String(M("test"))=="Symbol(test)",Q=/^Symbol\((.*)\)[^)]+$/;x(O,"description",{configurable:!0,get:function(){var ce=y(this)?this.valueOf():this,xe=F.call(ce);if(g(D,ce))return"";var G=Y?xe.slice(7,-1):xe.replace(Q,"$1");return G===""?void 0:G}}),u({global:!0,forced:!0},{Symbol:N})}},e163:function(i,s,o){var u=o("5135"),f=o("7b0b"),d=o("f772"),g=o("e177"),y=d("IE_PROTO"),x=Object.prototype;i.exports=g?Object.getPrototypeOf:function(_){return _=f(_),u(_,y)?_[y]:typeof _.constructor=="function"&&_ instanceof _.constructor?_.constructor.prototype:_ instanceof Object?x:null}},e177:function(i,s,o){var u=o("d039");i.exports=!u(function(){function f(){}return f.prototype.constructor=null,Object.getPrototypeOf(new f)!==f.prototype})},e260:function(i,s,o){var u=o("fc6a"),f=o("44d2"),d=o("3f8c"),g=o("69f3"),y=o("7dd0"),x="Array Iterator",_=g.set,M=g.getterFor(x);i.exports=y(Array,"Array",function(D,N){_(this,{type:x,target:u(D),index:0,kind:N})},function(){var D=M(this),N=D.target,O=D.kind,F=D.index++;return!N||F>=N.length?(D.target=void 0,{value:void 0,done:!0}):O=="keys"?{value:F,done:!1}:O=="values"?{value:N[F],done:!1}:{value:[F,N[F]],done:!1}},"values"),d.Arguments=d.Array,f("keys"),f("values"),f("entries")},e439:function(i,s,o){var u=o("23e7"),f=o("d039"),d=o("fc6a"),g=o("06cf").f,y=o("83ab"),x=f(function(){g(1)}),_=!y||x;u({target:"Object",stat:!0,forced:_,sham:!y},{getOwnPropertyDescriptor:function(D,N){return g(d(D),N)}})},e538:function(i,s,o){var u=o("b622");s.f=u},e893:function(i,s,o){var u=o("5135"),f=o("56ef"),d=o("06cf"),g=o("9bf2");i.exports=function(y,x){for(var _=f(x),M=g.f,D=d.f,N=0;N<_.length;N++){var O=_[N];u(y,O)||M(y,O,D(x,O))}}},e8b5:function(i,s,o){var u=o("c6b6");i.exports=Array.isArray||function(d){return u(d)=="Array"}},e95a:function(i,s,o){var u=o("b622"),f=o("3f8c"),d=u("iterator"),g=Array.prototype;i.exports=function(y){return y!==void 0&&(f.Array===y||g[d]===y)}},f5df:function(i,s,o){var u=o("00ee"),f=o("c6b6"),d=o("b622"),g=d("toStringTag"),y=f(function(){return arguments}())=="Arguments",x=function(_,M){try{return _[M]}catch{}};i.exports=u?f:function(_){var M,D,N;return _===void 0?"Undefined":_===null?"Null":typeof(D=x(M=Object(_),g))=="string"?D:y?f(M):(N=f(M))=="Object"&&typeof M.callee=="function"?"Arguments":N}},f772:function(i,s,o){var u=o("5692"),f=o("90e3"),d=u("keys");i.exports=function(g){return d[g]||(d[g]=f(g))}},fb15:function(i,s,o){if(o.r(s),typeof window<"u"){var u=window.document.currentScript;{var f=o("8875");u=f(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:f})}var d=u&&u.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);d&&(o.p=d[1])}o("99af"),o("4de4"),o("4160"),o("c975"),o("d81d"),o("a434"),o("159b"),o("a4d3"),o("e439"),o("dbb4"),o("b64b");function g(et,it,nt){return it in et?Object.defineProperty(et,it,{value:nt,enumerable:!0,configurable:!0,writable:!0}):et[it]=nt,et}function y(et,it){var nt=Object.keys(et);if(Object.getOwnPropertySymbols){var Vt=Object.getOwnPropertySymbols(et);it&&(Vt=Vt.filter(function(Qt){return Object.getOwnPropertyDescriptor(et,Qt).enumerable})),nt.push.apply(nt,Vt)}return nt}function x(et){for(var it=1;it<arguments.length;it++){var nt=arguments[it]!=null?arguments[it]:{};it%2?y(Object(nt),!0).forEach(function(Vt){g(et,Vt,nt[Vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(nt)):y(Object(nt)).forEach(function(Vt){Object.defineProperty(et,Vt,Object.getOwnPropertyDescriptor(nt,Vt))})}return et}function _(et){if(Array.isArray(et))return et}o("e01a"),o("d28b"),o("e260"),o("d3b7"),o("3ca3"),o("ddb0");function M(et,it){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(et)))){var nt=[],Vt=!0,Qt=!1,On=void 0;try{for(var wn=et[Symbol.iterator](),Tn;!(Vt=(Tn=wn.next()).done)&&(nt.push(Tn.value),!(it&&nt.length===it));Vt=!0);}catch(ar){Qt=!0,On=ar}finally{try{!Vt&&wn.return!=null&&wn.return()}finally{if(Qt)throw On}}return nt}}o("a630"),o("fb6a"),o("b0c0"),o("25f0");function D(et,it){(it==null||it>et.length)&&(it=et.length);for(var nt=0,Vt=new Array(it);nt<it;nt++)Vt[nt]=et[nt];return Vt}function N(et,it){if(et){if(typeof et=="string")return D(et,it);var nt=Object.prototype.toString.call(et).slice(8,-1);if(nt==="Object"&&et.constructor&&(nt=et.constructor.name),nt==="Map"||nt==="Set")return Array.from(et);if(nt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nt))return D(et,it)}}function O(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F(et,it){return _(et)||M(et,it)||N(et,it)||O()}function Y(et){if(Array.isArray(et))return D(et)}function Q(et){if(typeof Symbol<"u"&&Symbol.iterator in Object(et))return Array.from(et)}function le(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ce(et){return Y(et)||Q(et)||N(et)||le()}var xe=o("a352"),G=o.n(xe);function R(et){et.parentElement!==null&&et.parentElement.removeChild(et)}function Z(et,it,nt){var Vt=nt===0?et.children[0]:et.children[nt-1].nextSibling;et.insertBefore(it,Vt)}var z=o("dbf1");o("13d5"),o("4fad"),o("ac1f"),o("5319");function I(et){var it=Object.create(null);return function(Vt){var Qt=it[Vt];return Qt||(it[Vt]=et(Vt))}}var $=/-(\w)/g,U=I(function(et){return et.replace($,function(it,nt){return nt.toUpperCase()})});o("5db7"),o("73d9");var W=["Start","Add","Remove","Update","End"],q=["Choose","Unchoose","Sort","Filter","Clone"],ie=["Move"],re=[ie,W,q].flatMap(function(et){return et}).map(function(et){return"on".concat(et)}),we={manage:ie,manageAndEmit:W,emit:q};function Pe(et){return re.indexOf(et)!==-1}o("caad"),o("2ca0");var Ie=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function A(et){return Ie.includes(et)}function J(et){return["transition-group","TransitionGroup"].includes(et)}function fe(et){return["id","class","role","style"].includes(et)||et.startsWith("data-")||et.startsWith("aria-")||et.startsWith("on")}function ne(et){return et.reduce(function(it,nt){var Vt=F(nt,2),Qt=Vt[0],On=Vt[1];return it[Qt]=On,it},{})}function he(et){var it=et.$attrs,nt=et.componentData,Vt=nt===void 0?{}:nt,Qt=ne(Object.entries(it).filter(function(On){var wn=F(On,2),Tn=wn[0];return wn[1],fe(Tn)}));return x(x({},Qt),Vt)}function ae(et){var it=et.$attrs,nt=et.callBackBuilder,Vt=ne(T(it));Object.entries(nt).forEach(function(On){var wn=F(On,2),Tn=wn[0],ar=wn[1];we[Tn].forEach(function(xn){Vt["on".concat(xn)]=ar(xn)})});var Qt="[data-draggable]".concat(Vt.draggable||"");return x(x({},Vt),{},{draggable:Qt})}function T(et){return Object.entries(et).filter(function(it){var nt=F(it,2),Vt=nt[0];return nt[1],!fe(Vt)}).map(function(it){var nt=F(it,2),Vt=nt[0],Qt=nt[1];return[U(Vt),Qt]}).filter(function(it){var nt=F(it,2),Vt=nt[0];return nt[1],!Pe(Vt)})}o("c740");function ue(et,it){if(!(et instanceof it))throw new TypeError("Cannot call a class as a function")}function ke(et,it){for(var nt=0;nt<it.length;nt++){var Vt=it[nt];Vt.enumerable=Vt.enumerable||!1,Vt.configurable=!0,"value"in Vt&&(Vt.writable=!0),Object.defineProperty(et,Vt.key,Vt)}}function Ce(et,it,nt){return it&&ke(et.prototype,it),et}var Ve=function(it){var nt=it.el;return nt},K=function(it,nt){return it.__draggable_context=nt},pe=function(it){return it.__draggable_context},ve=function(){function et(it){var nt=it.nodes,Vt=nt.header,Qt=nt.default,On=nt.footer,wn=it.root,Tn=it.realList;ue(this,et),this.defaultNodes=Qt,this.children=[].concat(ce(Vt),ce(Qt),ce(On)),this.externalComponent=wn.externalComponent,this.rootTransition=wn.transition,this.tag=wn.tag,this.realList=Tn}return Ce(et,[{key:"render",value:function(nt,Vt){var Qt=this.tag,On=this.children,wn=this._isRootComponent,Tn=wn?{default:function(){return On}}:On;return nt(Qt,Vt,Tn)}},{key:"updated",value:function(){var nt=this.defaultNodes,Vt=this.realList;nt.forEach(function(Qt,On){K(Ve(Qt),{element:Vt[On],index:On})})}},{key:"getUnderlyingVm",value:function(nt){return pe(nt)}},{key:"getVmIndexFromDomIndex",value:function(nt,Vt){var Qt=this.defaultNodes,On=Qt.length,wn=Vt.children,Tn=wn.item(nt);if(Tn===null)return On;var ar=pe(Tn);if(ar)return ar.index;if(On===0)return 0;var xn=Ve(Qt[0]),Mn=ce(wn).findIndex(function(En){return En===xn});return nt<Mn?0:On}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),et}(),ge=o("8bbf");function Ue(et,it){var nt=et[it];return nt?nt():[]}function Qe(et){var it=et.$slots,nt=et.realList,Vt=et.getKey,Qt=nt||[],On=["header","footer"].map(function(En){return Ue(it,En)}),wn=F(On,2),Tn=wn[0],ar=wn[1],xn=it.item;if(!xn)throw new Error("draggable element must have an item slot");var Mn=Qt.flatMap(function(En,cr){return xn({element:En,index:cr}).map(function(yr){return yr.key=Vt(En),yr.props=x(x({},yr.props||{}),{},{"data-draggable":!0}),yr})});if(Mn.length!==Qt.length)throw new Error("Item slot must have only one child");return{header:Tn,footer:ar,default:Mn}}function Ke(et){var it=J(et),nt=!A(et)&&!it;return{transition:it,externalComponent:nt,tag:nt?Object(ge.resolveComponent)(et):it?ge.TransitionGroup:et}}function Ge(et){var it=et.$slots,nt=et.tag,Vt=et.realList,Qt=et.getKey,On=Qe({$slots:it,realList:Vt,getKey:Qt}),wn=Ke(nt);return new ve({nodes:On,root:wn,realList:Vt})}function Xe(et,it){var nt=this;Object(ge.nextTick)(function(){return nt.$emit(et.toLowerCase(),it)})}function ot(et){var it=this;return function(nt,Vt){if(it.realList!==null)return it["onDrag".concat(et)](nt,Vt)}}function kt(et){var it=this,nt=ot.call(this,et);return function(Vt,Qt){nt.call(it,Vt,Qt),Xe.call(it,et,Vt)}}var Ct=null,Ut={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(it){return it}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Gt=["update:modelValue","change"].concat(ce([].concat(ce(we.manageAndEmit),ce(we.emit)).map(function(et){return et.toLowerCase()}))),fn=Object(ge.defineComponent)({name:"draggable",inheritAttrs:!1,props:Ut,emits:Gt,data:function(){return{error:!1}},render:function(){try{this.error=!1;var it=this.$slots,nt=this.$attrs,Vt=this.tag,Qt=this.componentData,On=this.realList,wn=this.getKey,Tn=Ge({$slots:it,tag:Vt,realList:On,getKey:wn});this.componentStructure=Tn;var ar=he({$attrs:nt,componentData:Qt});return Tn.render(ge.h,ar)}catch(xn){return this.error=!0,Object(ge.h)("pre",{style:{color:"red"}},xn.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&z.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var it=this;if(!this.error){var nt=this.$attrs,Vt=this.$el,Qt=this.componentStructure;Qt.updated();var On=ae({$attrs:nt,callBackBuilder:{manageAndEmit:function(ar){return kt.call(it,ar)},emit:function(ar){return Xe.bind(it,ar)},manage:function(ar){return ot.call(it,ar)}}}),wn=Vt.nodeType===1?Vt:Vt.parentElement;this._sortable=new G.a(wn,On),this.targetDomElement=wn,wn.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var it=this.list;return it||this.modelValue},getKey:function(){var it=this.itemKey;return typeof it=="function"?it:function(nt){return nt[it]}}},watch:{$attrs:{handler:function(it){var nt=this._sortable;nt&&T(it).forEach(function(Vt){var Qt=F(Vt,2),On=Qt[0],wn=Qt[1];nt.option(On,wn)})},deep:!0}},methods:{getUnderlyingVm:function(it){return this.componentStructure.getUnderlyingVm(it)||null},getUnderlyingPotencialDraggableComponent:function(it){return it.__draggable_component__},emitChanges:function(it){var nt=this;Object(ge.nextTick)(function(){return nt.$emit("change",it)})},alterList:function(it){if(this.list){it(this.list);return}var nt=ce(this.modelValue);it(nt),this.$emit("update:modelValue",nt)},spliceList:function(){var it=arguments,nt=function(Qt){return Qt.splice.apply(Qt,ce(it))};this.alterList(nt)},updatePosition:function(it,nt){var Vt=function(On){return On.splice(nt,0,On.splice(it,1)[0])};this.alterList(Vt)},getRelatedContextFromMoveEvent:function(it){var nt=it.to,Vt=it.related,Qt=this.getUnderlyingPotencialDraggableComponent(nt);if(!Qt)return{component:Qt};var On=Qt.realList,wn={list:On,component:Qt};if(nt!==Vt&&On){var Tn=Qt.getUnderlyingVm(Vt)||{};return x(x({},Tn),wn)}return wn},getVmIndexFromDomIndex:function(it){return this.componentStructure.getVmIndexFromDomIndex(it,this.targetDomElement)},onDragStart:function(it){this.context=this.getUnderlyingVm(it.item),it.item._underlying_vm_=this.clone(this.context.element),Ct=it.item},onDragAdd:function(it){var nt=it.item._underlying_vm_;if(nt!==void 0){R(it.item);var Vt=this.getVmIndexFromDomIndex(it.newIndex);this.spliceList(Vt,0,nt);var Qt={element:nt,newIndex:Vt};this.emitChanges({added:Qt})}},onDragRemove:function(it){if(Z(this.$el,it.item,it.oldIndex),it.pullMode==="clone"){R(it.clone);return}var nt=this.context,Vt=nt.index,Qt=nt.element;this.spliceList(Vt,1);var On={element:Qt,oldIndex:Vt};this.emitChanges({removed:On})},onDragUpdate:function(it){R(it.item),Z(it.from,it.item,it.oldIndex);var nt=this.context.index,Vt=this.getVmIndexFromDomIndex(it.newIndex);this.updatePosition(nt,Vt);var Qt={element:this.context.element,oldIndex:nt,newIndex:Vt};this.emitChanges({moved:Qt})},computeFutureIndex:function(it,nt){if(!it.element)return 0;var Vt=ce(nt.to.children).filter(function(Tn){return Tn.style.display!=="none"}),Qt=Vt.indexOf(nt.related),On=it.component.getVmIndexFromDomIndex(Qt),wn=Vt.indexOf(Ct)!==-1;return wn||!nt.willInsertAfter?On:On+1},onDragMove:function(it,nt){var Vt=this.move,Qt=this.realList;if(!Vt||!Qt)return!0;var On=this.getRelatedContextFromMoveEvent(it),wn=this.computeFutureIndex(On,it),Tn=x(x({},this.context),{},{futureIndex:wn}),ar=x(x({},it),{},{relatedContext:On,draggedContext:Tn});return Vt(ar,nt)},onDragEnd:function(){Ct=null}}}),pn=fn;s.default=pn},fb6a:function(i,s,o){var u=o("23e7"),f=o("861d"),d=o("e8b5"),g=o("23cb"),y=o("50c4"),x=o("fc6a"),_=o("8418"),M=o("b622"),D=o("1dde"),N=o("ae40"),O=D("slice"),F=N("slice",{ACCESSORS:!0,0:0,1:2}),Y=M("species"),Q=[].slice,le=Math.max;u({target:"Array",proto:!0,forced:!O||!F},{slice:function(xe,G){var R=x(this),Z=y(R.length),z=g(xe,Z),I=g(G===void 0?Z:G,Z),$,U,W;if(d(R)&&($=R.constructor,typeof $=="function"&&($===Array||d($.prototype))?$=void 0:f($)&&($=$[Y],$===null&&($=void 0)),$===Array||$===void 0))return Q.call(R,z,I);for(U=new($===void 0?Array:$)(le(I-z,0)),W=0;z<I;z++,W++)z in R&&_(U,W,R[z]);return U.length=W,U}})},fc6a:function(i,s,o){var u=o("44ad"),f=o("1d80");i.exports=function(d){return u(f(d))}},fdbc:function(i,s){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(i,s,o){var u=o("4930");i.exports=u&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(zx);var QU=zx.exports;const nw=gy(QU),eV={class:"h-full bg-gray-50"},tV={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},nV={class:"mt-6 bg-white shadow rounded-lg p-4"},rV={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},iV=["value"],oV={class:"flex items-end"},sV={key:0,class:"mt-6 p-6 text-center bg-white shadow rounded-lg"},aV={key:1,class:"mt-6 p-6 text-center bg-white shadow rounded-lg"},lV={key:2,class:"mt-6 overflow-x-auto pb-4"},uV={class:"w-80 flex-shrink-0"},cV={class:"bg-white rounded-lg shadow overflow-hidden"},fV={class:"flex items-center"},hV={class:"flex items-center space-x-2"},dV={class:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full"},pV=["onClick"],gV=["data-column-id"],mV=["data-note-id"],vV={class:"flex items-start justify-between mb-2 drag-handle cursor-move w-full"},yV={class:"flex items-center flex-grow min-w-0 mr-2"},_V=["title"],bV={class:"flex space-x-0.5 sm:space-x-1 flex-shrink-0"},wV=["onClick"],xV=["onClick"],LV=["onClick"],SV=["onClick"],CV=["title"],EV={key:0,class:"flex items-center space-x-2 mb-2"},PV={key:0,class:"flex items-center text-xs text-gray-500"},MV={key:1,class:"flex items-center text-xs text-gray-500"},AV={class:"flex justify-between items-center text-xs text-gray-400"},kV={class:"flex space-x-1"},TV=["title"],DV={key:0,class:"fixed z-[3001] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},NV={class:"flex items-center justify-center min-h-screen w-full"},BV={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden"},OV={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3 p-4 md:px-6"},IV={key:2,class:"fixed z-[3001] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},RV={class:"flex items-center justify-center min-h-screen w-full"},FV={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden"},jV={class:"p-4 md:p-6 flex-1 overflow-y-auto"},zV={class:"flex justify-between items-center mb-4 border-b pb-4"},$V={class:"mb-4"},UV={class:"mb-4"},VV={class:"mt-1 flex space-x-2"},HV=["onClick"],GV={class:"p-4 md:px-6 border-t bg-gray-50 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3"},qV=us({__name:"NotesView",setup(e){const n=Np(),t=dc(),r=Bp(),i=sm(),s=Ip(),o=Ft(!0),u=Ft(!1),f=Ft(!1),d=Ft(!1),g=Ft(null),y=Ft(null),x=Ft(""),_=Ft("#6B7280"),M=Ft("info"),D=Ft(null),N=gr({get:()=>r.getSortedColumns,set:Ie=>{const A=Ie.map(J=>J.id);r.reorderColumns(A)}}),O=[{id:ao.PRIVATE,title:"Privé",description:"Visible uniquement par vous"},{id:ao.COMPANY,title:"Entreprise",description:"Visible uniquement par l'entreprise"},{id:ao.EMPLOYEE,title:"Salariés",description:"Visible par l'entreprise et ses salariés"},{id:ao.VISITOR,title:"Visiteurs",description:"Visible par tous (entreprise, salariés et visiteurs)"}],F=Jl({search:"",date:"",accessLevel:""}),Y=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6B7280"],Q=gr(()=>{let Ie=r.getAccessibleNotes;if(F.search){const A=F.search.toLowerCase();Ie=Ie.filter(J=>J.title.toLowerCase().includes(A)||J.description.toLowerCase().includes(A))}if(F.accessLevel&&(Ie=Ie.filter(A=>A.accessLevel===F.accessLevel)),F.date){const A=new Date;A.setHours(0,0,0,0);const J=new Date(A);J.setDate(A.getDate()-A.getDay());const fe=new Date(A.getFullYear(),A.getMonth(),1);Ie=Ie.filter(ne=>{const he=new Date(ne.createdAt);return F.date==="today"?he>=A:F.date==="week"?he>=J:F.date==="month"?he>=fe:!0})}return Ie}),le=gr(()=>Ie=>Q.value.filter(A=>A.columnId===Ie).sort((A,J)=>A.order-J.order));function ce(Ie){return r.getAccessLevelLabel(Ie)}function xe(Ie){switch(Ie){case ao.PRIVATE:return"#9CA3AF";case ao.COMPANY:return"#EF4444";case ao.EMPLOYEE:return"#F59E0B";case ao.VISITOR:return"#10B981";default:return"#6B7280"}}$s(async()=>{var Ie;try{o.value=!0;const A=localStorage.getItem("lastPlanId");if(D.value=A?parseInt(A):((Ie=i.currentPlan)==null?void 0:Ie.id)||null,D.value){if(console.log("[NotesView] Chargement des notes du plan:",D.value),!i.currentPlan||i.currentPlan.id!==D.value){await i.fetchPlans();const fe=i.getPlanById(D.value);fe&&i.setCurrentPlan(fe)}await s.loadPlanElements(D.value);const J=s.elements.filter(fe=>fe.type_forme==="Note").map(fe=>{const ne=fe.data;return{id:fe.id||Date.now()+Math.floor(Math.random()*1e3),title:ne.name||"Note sans titre",description:ne.description||"",location:ne.location,columnId:ne.columnId||"en-cours",accessLevel:ne.accessLevel||ao.PRIVATE,style:ne.style||{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},order:ne.order||0,createdAt:ne.createdAt||new Date().toISOString(),updatedAt:ne.updatedAt||new Date().toISOString(),comments:ne.comments||[],photos:ne.photos||[]}});r.notes=J,console.log("[NotesView] Notes chargées:",J.length)}else console.log("[NotesView] Aucun plan actif, utilisation des notes par défaut du store")}catch(A){console.error("Erreur lors du chargement des notes:",A),t.error("Erreur lors du chargement des notes")}finally{o.value=!1}});function G(Ie){const A=new Date(Ie);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(A)}function R(){n.push({path:"/",query:{tool:"Note"}})}function Z(Ie){n.push({path:"/",query:{lat:Ie.location[0].toString(),lng:Ie.location[1].toString(),noteId:Ie.id.toString()}})}function z(Ie){const A=Ie.location[0],J=Ie.location[1],fe=`https://www.google.com/maps/dir/?api=1&destination=${A},${J}`;window.open(fe,"_blank")}function I(Ie){y.value=JSON.parse(JSON.stringify(Ie)),M.value="info",f.value=!0}async function $(){if(f.value=!1,D.value&&y.value)try{const Ie={location:y.value.location,name:y.value.title,description:y.value.description,columnId:y.value.columnId,accessLevel:y.value.accessLevel,style:y.value.style,comments:y.value.comments||[],photos:y.value.photos||[],order:y.value.order,createdAt:y.value.createdAt,updatedAt:new Date().toISOString()},A=s.elements.findIndex(J=>{var fe;return J.type_forme==="Note"&&J.id===((fe=y.value)==null?void 0:fe.id)});A!==-1?s.elements[A].data=Ie:s.elements.push({id:y.value.id,type_forme:"Note",data:Ie}),await s.saveToPlan(D.value),t.success("Note sauvegardée et plan mis à jour avec succès")}catch(Ie){console.error("Erreur lors de la sauvegarde de la note:",Ie),t.error("Erreur lors de la sauvegarde de la note")}}function U(Ie){g.value=Ie,u.value=!0}async function W(){if(g.value)try{if(r.removeNote(g.value.id),D.value)if(s.elements.findIndex(A=>{var J;return A.type_forme==="Note"&&A.id===((J=g.value)==null?void 0:J.id)})!==-1){const A=[g.value.id];await s.saveToPlan(D.value,{elementsToDelete:A}),t.success("Note supprimée et plan mis à jour avec succès")}else t.success("Note supprimée avec succès");else t.success("Note supprimée avec succès")}catch(Ie){console.error("Erreur lors de la suppression de la note:",Ie),t.error("Erreur lors de la suppression de la note")}finally{u.value=!1,g.value=null}}function q(){x.value.trim()&&(r.addColumn(x.value.trim(),_.value),t.success("Colonne ajoutée avec succès"),x.value="",_.value="#6B7280",d.value=!1)}function ie(Ie){r.removeColumn(Ie),t.success("Colonne supprimée avec succès")}function re(){t.success("Ordre des colonnes mis à jour")}async function we(Ie,A){console.log("Drag change event:",Ie);try{if(Ie.added){const{element:J}=Ie.added;r.moveNote(J.id,A);const ne=le.value(A).map(ae=>ae.id);r.reorderNotes(A,ne);const he=r.getColumnById(A);t.success(`Note déplacée vers ${(he==null?void 0:he.title)||"une autre colonne"}`),await Pe(J.id,{columnId:A})}if(Ie.moved){const J=le.value(A),fe=J.map(ne=>ne.id);if(r.reorderNotes(A,fe),t.success("Ordre des notes mis à jour"),D.value)for(const[ne,he]of J.entries())await Pe(he.id,{order:ne})}Ie.removed}catch(J){console.error("Erreur lors du drag and drop:",J),t.error("Une erreur est survenue lors du déplacement de la note")}}async function Pe(Ie,A){if(D.value)try{if(!r.notes.find(ne=>ne.id===Ie))return;const fe=s.elements.findIndex(ne=>ne.type_forme==="Note"&&ne.id===Ie);if(fe!==-1){const he=s.elements[fe].data;Object.keys(A).forEach(ae=>{ae==="columnId"?he.columnId=A.columnId:ae==="order"&&(he.order=A.order)}),he.updatedAt=new Date().toISOString(),await s.saveToPlan(D.value)}}catch(J){throw console.error("Erreur lors de la mise à jour de la note dans le backend:",J),J}}return(Ie,A)=>{var J,fe;return $e(),qe(Rn,null,[E("div",eV,[E("div",tV,[E("div",{class:"sm:flex sm:items-center"},[A[10]||(A[10]=E("div",{class:"sm:flex-auto"},[E("h1",{class:"text-2xl font-semibold text-gray-900"},"Notes"),E("p",{class:"mt-2 text-sm text-gray-700"}," Liste de toutes vos notes. ")],-1)),E("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[E("button",{onClick:R,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Créer une note ")])]),E("div",nV,[E("div",rV,[E("div",null,[A[11]||(A[11]=E("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),In(E("input",{type:"text",id:"search","onUpdate:modelValue":A[0]||(A[0]=ne=>F.search=ne),placeholder:"Rechercher par titre ou description...",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Zr,F.search]])]),E("div",null,[A[13]||(A[13]=E("label",{for:"date",class:"block text-sm font-medium text-gray-700"},"Date",-1)),In(E("select",{id:"date","onUpdate:modelValue":A[1]||(A[1]=ne=>F.date=ne),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},A[12]||(A[12]=[E("option",{value:""},"Toutes les dates",-1),E("option",{value:"today"},"Aujourd'hui",-1),E("option",{value:"week"},"Cette semaine",-1),E("option",{value:"month"},"Ce mois",-1)]),512),[[lo,F.date]])]),E("div",null,[A[15]||(A[15]=E("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accès",-1)),In(E("select",{id:"accessLevel","onUpdate:modelValue":A[2]||(A[2]=ne=>F.accessLevel=ne),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[A[14]||(A[14]=E("option",{value:""},"Tous les niveaux",-1)),($e(),qe(Rn,null,Br(O,ne=>E("option",{key:ne.id,value:ne.id},Wt(ne.title),9,iV)),64))],512),[[lo,F.accessLevel]])]),E("div",oV,[E("button",{onClick:A[3]||(A[3]=ne=>d.value=!0),class:"w-full inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},A[16]||(A[16]=[E("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),pi(" Ajouter une colonne ")]))])])]),o.value?($e(),qe("div",sV,A[17]||(A[17]=[E("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1),E("p",{class:"mt-2 text-sm text-gray-500"},"Chargement des notes...",-1)]))):Q.value.length===0?($e(),qe("div",aV,A[18]||(A[18]=[E("p",{class:"text-sm text-gray-500"},"Aucune note trouvée",-1)]))):($e(),qe("div",lV,[fi(Wn(nw),{modelValue:N.value,"onUpdate:modelValue":A[4]||(A[4]=ne=>N.value=ne),class:"flex space-x-4 min-w-max","item-key":"id",handle:".column-drag-handle",onEnd:re,animation:150},{item:ql(({element:ne})=>[E("div",uV,[E("div",cV,[E("div",{class:"p-3 flex items-center justify-between column-drag-handle cursor-move no-select",style:rl({backgroundColor:ne.color+"20",borderBottom:"2px solid "+ne.color})},[E("div",fV,[A[19]||(A[19]=E("svg",{class:"h-4 w-4 mr-2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),E("h3",{class:"text-sm font-semibold",style:rl({color:ne.color})},Wt(ne.title),5)]),E("div",hV,[E("span",dV,Wt(le.value(ne.id).length),1),ne.isDefault?un("",!0):($e(),qe("button",{key:0,onClick:he=>ie(ne.id),class:"text-gray-400 hover:text-red-500 focus:outline-none",title:"Supprimer la colonne"},A[20]||(A[20]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,pV))])],4),E("div",{class:"p-2 max-h-[calc(100vh-250px)] overflow-y-auto","data-column-id":ne.id},[fi(Wn(nw),{list:le.value(ne.id),class:"min-h-[100px] draggable-container",group:"notes","item-key":"id",animation:150,"ghost-class":"ghost-card","drag-class":"dragging","chosen-class":"chosen",handle:".drag-handle",onChange:he=>we(he,ne.id),"data-column-id":ne.id,"force-fallback":!0},e4({item:ql(({element:he})=>{var ae,T,ue,ke,Ce;return[E("div",{class:"mb-2 p-3 bg-white border rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 no-select overflow-hidden","data-note-id":he.id},[E("div",vV,[E("div",yV,[E("div",{class:"h-8 w-8 flex-shrink-0 rounded-full flex items-center justify-center mr-2",style:rl({backgroundColor:he.style.fillColor+"40",color:he.style.color})},A[22]||(A[22]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]),4),E("h4",{class:"text-sm font-medium text-gray-900 truncate min-w-0",title:he.title},Wt(he.title),9,_V)]),E("div",bV,[E("button",{onClick:Ve=>Z(he),class:"p-1.5 sm:p-2 text-gray-400 hover:text-primary-600 rounded-full hover:bg-gray-100",title:"Voir sur la carte"},A[23]||(A[23]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1)]),8,wV),E("button",{onClick:Ve=>z(he),class:"p-1.5 sm:p-2 text-gray-400 hover:text-primary-600 rounded-full hover:bg-gray-100",title:"Ouvrir dans Google Maps"},A[24]||(A[24]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.879 16.121L12 13.999l2.121 2.121"})],-1)]),8,xV),E("button",{onClick:Ve=>I(he),class:"p-1.5 sm:p-2 text-gray-400 hover:text-primary-600 rounded-full hover:bg-gray-100",title:"Modifier"},A[25]||(A[25]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,LV),E("button",{onClick:Ve=>U(he),class:"p-1.5 sm:p-2 text-gray-400 hover:text-red-600 rounded-full hover:bg-gray-100",title:"Supprimer"},A[26]||(A[26]=[E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,SV)])]),E("p",{class:"text-xs text-gray-500 mb-2 line-clamp-2",title:he.description},Wt(he.description),9,CV),(ae=he.comments)!=null&&ae.length||(T=he.photos)!=null&&T.length?($e(),qe("div",EV,[(ue=he.comments)!=null&&ue.length?($e(),qe("div",PV,[A[27]||(A[27]=E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})],-1)),pi(" "+Wt(he.comments.length),1)])):un("",!0),(ke=he.photos)!=null&&ke.length?($e(),qe("div",MV,[A[28]||(A[28]=E("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),pi(" "+Wt(he.photos.length),1)])):un("",!0)])):un("",!0),E("div",AV,[E("span",null,Wt(G(he.createdAt)),1),E("div",kV,[E("span",{class:"px-2 py-1 rounded-full",style:rl({backgroundColor:xe(he.accessLevel)+"20",color:xe(he.accessLevel)}),title:(Ce=O.find(Ve=>Ve.id===he.accessLevel))==null?void 0:Ce.description},Wt(ce(he.accessLevel)),13,TV),E("span",{class:"px-2 py-1 rounded-full",style:rl({backgroundColor:ne.color+"20",color:ne.color})},Wt(ne.title),5)])])],8,mV)]}),_:2},[le.value(ne.id).length===0?{name:"header",fn:ql(()=>[A[21]||(A[21]=E("div",{class:"p-4 text-center text-gray-400 text-sm italic"}," Aucune note dans cette colonne ",-1))]),key:"0"}:void 0]),1032,["list","onChange","data-column-id"])],8,gV)])])]),_:1},8,["modelValue"])]))])]),u.value?($e(),qe("div",DV,[E("div",NV,[A[30]||(A[30]=E("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),E("div",BV,[A[29]||(A[29]=uc('<div class="p-4 md:p-6" data-v-87dc4073><div class="flex items-start" data-v-87dc4073><div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100" data-v-87dc4073><svg class="h-6 w-6 text-red-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-v-87dc4073><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-87dc4073></path></svg></div><div class="ml-4 flex-1" data-v-87dc4073><h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title" data-v-87dc4073> Supprimer la note </h3><div class="mt-2" data-v-87dc4073><p class="text-sm text-gray-500" data-v-87dc4073> Êtes-vous sûr de vouloir supprimer cette note ? Cette action est irréversible. </p></div></div></div></div>',1)),E("div",OV,[E("button",{onClick:W,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm"}," Supprimer "),E("button",{onClick:A[5]||(A[5]=ne=>u.value=!1),type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm"}," Annuler ")])])])])):un("",!0),f.value?($e(),Ua(gx,{key:1,note:y.value,"is-new-note":!((J=y.value)!=null&&J.id),location:(fe=y.value)==null?void 0:fe.location,onClose:A[6]||(A[6]=ne=>f.value=!1),onSave:$},null,8,["note","is-new-note","location"])):un("",!0),d.value?($e(),qe("div",IV,[E("div",RV,[A[36]||(A[36]=E("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),E("div",FV,[E("form",{onSubmit:Vc(q,["prevent"]),class:"h-full md:h-auto flex flex-col"},[E("div",jV,[E("div",zV,[A[32]||(A[32]=E("h3",{class:"text-xl font-semibold text-gray-900"},"Ajouter une nouvelle colonne",-1)),E("button",{type:"button",onClick:A[7]||(A[7]=ne=>d.value=!1),class:"text-gray-400 hover:text-gray-500"},A[31]||(A[31]=[E("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("div",$V,[A[33]||(A[33]=E("label",{for:"columnName",class:"block text-sm font-medium text-gray-700"},"Nom de la colonne",-1)),In(E("input",{type:"text",id:"columnName","onUpdate:modelValue":A[8]||(A[8]=ne=>x.value=ne),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Zr,x.value]])]),E("div",UV,[A[34]||(A[34]=E("label",{class:"block text-sm font-medium text-gray-700"},"Couleur",-1)),E("div",VV,[($e(),qe(Rn,null,Br(Y,ne=>E("div",{key:ne,class:Ri(["w-8 h-8 rounded-full cursor-pointer border-2",{"border-gray-400":_.value!==ne,"border-black":_.value===ne}]),style:rl({backgroundColor:ne}),onClick:he=>_.value=ne},null,14,HV)),64))])])]),E("div",GV,[A[35]||(A[35]=E("button",{type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm"}," Ajouter ",-1)),E("button",{onClick:A[9]||(A[9]=ne=>d.value=!1),type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm"}," Annuler ")])],32)])])])):un("",!0)],64)}}}),WV=om(qV,[["__scopeId","data-v-87dc4073"]]),Xx=f8({history:UT("/"),routes:[{path:"/",name:"home",component:Hb,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/plans",name:"plans",component:pU,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/users",name:"users",component:jz,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie"]}},{path:"/profile",name:"profile",component:()=>Yf(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/login",name:"login",component:xN,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>Yf(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>Yf(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:rN,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/notes",name:"notes",component:WV,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/map",name:"map",component:Hb,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>Yf(()=>import("./NotFoundView.js"),[])}]});Xx.beforeEach(async(e,n,t)=>{var u,f;const r=va();if(console.log("Route:",e.path,"Auth state:",{initialized:r.initialized,isAuthenticated:r.isAuthenticated,user:r.user}),!r.initialized)try{await r.initialize(window.INITIAL_STATE)}catch(d){console.error("Error initializing auth store:",d)}const i=r.isAuthenticated,s=(u=r.user)==null?void 0:u.must_change_password,o=(f=r.user)==null?void 0:f.user_type;if(e.meta.requiresAuth&&!i){t("/login");return}if(i&&s&&e.name!=="changePassword"){t({name:"changePassword"});return}if(e.name==="changePassword"&&!s){t({name:"home"});return}if(e.meta.allowedRoles&&o&&!e.meta.allowedRoles.includes(o)){t({name:"home"});return}if(e.meta.requiresGuest&&i){t({name:"home"});return}t()});const Cy=f0(OD),Qx=_A();Cy.use(Qx);Cy.use(Xx);const ZV=va(Qx);window.INITIAL_STATE&&ZV.initialize(window.INITIAL_STATE);Cy.mount("#app");export{Yi as _,Jl as a,E as b,qe as c,us as d,un as e,Wn as f,pi as g,In as h,$e as i,uc as j,fi as k,ql as l,Xw as m,Ri as n,$s as o,pH as p,Np as q,Ft as r,ea as s,Wt as t,va as u,Zr as v,Vc as w,gy as x};
